<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-packagers] The $(prefix)/usr vs $(libdir) argument
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-packagers-list%40lists.ximian.com?Subject=%5Bmono-packagers%5D%20The%20%24%28prefix%29/usr%20vs%20%24%28libdir%29%20argument&In-Reply-To=1227968470.31448.23.camel%40PB3.Linux">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000059.html">
   <LINK REL="Next"  HREF="000061.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-packagers] The $(prefix)/usr vs $(libdir) argument</H1>
    <B>Zoltan Varga</B> 
    <A HREF="mailto:mono-packagers-list%40lists.ximian.com?Subject=%5Bmono-packagers%5D%20The%20%24%28prefix%29/usr%20vs%20%24%28libdir%29%20argument&In-Reply-To=1227968470.31448.23.camel%40PB3.Linux"
       TITLE="[mono-packagers] The $(prefix)/usr vs $(libdir) argument">vargaz at gmail.com
       </A><BR>
    <I>Sat Nov 29 12:03:39 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000059.html">[mono-packagers] The $(prefix)/usr vs $(libdir) argument
</A></li>
        <LI>Next message: <A HREF="000061.html">[mono-packagers] The $(prefix)/usr vs $(libdir) argument
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60">[ date ]</a>
              <a href="thread.html#60">[ thread ]</a>
              <a href="subject.html#60">[ subject ]</a>
              <a href="author.html#60">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

  I have no idea whenever $(prefix)/lib or $(libdir) is the correct
approach, but the assemblies
shipped with mono _are_ platform independent, whenever they are
'built' using a JIT or
not. For proof, they can be copied to any other architecture supported
by mono, like arm
or itanium, or even windows, and they will run just fine there.

                             Zoltan

On Sat, Nov 29, 2008 at 3:21 PM, Paul &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">paul at all-the-johnsons.co.uk</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I know this argument has been going on for a while, but I feel it's now
</I>&gt;<i> something that really needs to be resolved across all of the mono stack
</I>&gt;<i> (and dependencies).
</I>&gt;<i>
</I>&gt;<i> Many many moons ago, Miguel said that as CIL is completely agnostic as
</I>&gt;<i> to what it is on, that everything mono related should really be
</I>&gt;<i> in /usr/share. Noises were made, but nothing really much happened. There
</I>&gt;<i> is logic in using /usr/share, but nothing completely overwhelming.
</I>&gt;<i>
</I>&gt;<i> There is then the argument that all mono packages should be .noarch.
</I>&gt;<i> This really is a non-starter, I'll explain below.
</I>&gt;<i>
</I>&gt;<i> The current situation is that by default, mono is installed to
</I>&gt;<i> $(prefix)/lib with scripts from $(prefix)/bin pointing to the CIL
</I>&gt;<i> binaries or libraries. The only problem is that if you're compiling
</I>&gt;<i> using JIT, then binaries (and libraries) are targetting a particular
</I>&gt;<i> architecture (albeit x86, PPC, PPC64, x86_64 or any other processor
</I>&gt;<i> type) and are therefore incorrectly polluting the /usr/lib directory
</I>&gt;<i> which on non-x86 platforms is there for *purely* 32 bit libs.
</I>&gt;<i>
</I>&gt;<i> This means that for mono to be correctly packaged for non-x86 platforms,
</I>&gt;<i> all of the makefiles, .pc files and anything else like that has to
</I>&gt;<i> patched to use $(libdir) rather than $(prefix)/lib. Okay, it probably
</I>&gt;<i> doesn't seem like much, but given the size of mono (and associated
</I>&gt;<i> packages), patching becomes a major ball ache!
</I>&gt;<i>
</I>&gt;<i> While I understand that not every distro builds the JIT compiler, using
</I>&gt;<i> $(libdir) would mean that for the sake of argument, files are correctly
</I>&gt;<i> installed to the correct libdir. I also don't know how Windows is
</I>&gt;<i> handled with respect to this.
</I>&gt;<i>
</I>&gt;<i> Using JIT also makes anything built using it a non-noarch package.
</I>&gt;<i>
</I>&gt;<i> There is the flipside in that there is currently no fixed guideline of
</I>&gt;<i> where to place files for mono. Some mono packages use $(libdir) in the
</I>&gt;<i> makefiles (mono-basic is an example of this), some mix and match (makes
</I>&gt;<i> a bloody awful mess of things) and some just use $(prefix)/lib.
</I>&gt;<i>
</I>&gt;<i> I have a whole raft of patches available if we go over to $(libdir) - I
</I>&gt;<i> mean lots of them, probably coming up to 100k worth, but we certainly
</I>&gt;<i> need to get this sorted as it's starting to get ridiculous.
</I>&gt;<i>
</I>&gt;<i> TTFN
</I>&gt;<i>
</I>&gt;<i> Paul
</I>&gt;<i> (long time mono user and mono packager for Fedora)
</I>&gt;<i> --
</I>&gt;<i> &#65279;Sie k&#246;nnen mich aufreizen und wirklich hei&#223; machen!
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> mono-packagers-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">mono-packagers-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">http://lists.ximian.com/mailman/listinfo/mono-packagers-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000059.html">[mono-packagers] The $(prefix)/usr vs $(libdir) argument
</A></li>
	<LI>Next message: <A HREF="000061.html">[mono-packagers] The $(prefix)/usr vs $(libdir) argument
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60">[ date ]</a>
              <a href="thread.html#60">[ thread ]</a>
              <a href="subject.html#60">[ subject ]</a>
              <a href="author.html#60">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">More information about the mono-packagers-list
mailing list</a><br>
</body></html>
