<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-packagers] binaries in tarball
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-packagers-list%40lists.ximian.com?Subject=Re%3A%20%5Bmono-packagers%5D%20binaries%20in%20tarball&In-Reply-To=%3CCAJ0%3DnQf3FyvZumAtWVA_skC9Tgz8o8XqQWXMVVS_gpaewTbndg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000219.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-packagers] binaries in tarball</H1>
    <B>Timotheus Pokorra</B> 
    <A HREF="mailto:mono-packagers-list%40lists.ximian.com?Subject=Re%3A%20%5Bmono-packagers%5D%20binaries%20in%20tarball&In-Reply-To=%3CCAJ0%3DnQf3FyvZumAtWVA_skC9Tgz8o8XqQWXMVVS_gpaewTbndg%40mail.gmail.com%3E"
       TITLE="[mono-packagers] binaries in tarball">timotheus.pokorra at solidcharity.com
       </A><BR>
    <I>Mon Apr 13 06:52:51 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000219.html">[mono-packagers] binaries in tarball
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#220">[ date ]</a>
              <a href="thread.html#220">[ thread ]</a>
              <a href="subject.html#220">[ subject ]</a>
              <a href="author.html#220">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Jo,

thank you for your detailed reply!
This is very helpful!

I will try to build now without the external binaries.

Fedora might decide to go for a 3.x Mono first, avoiding problems with
monolite. We will see.
I am not at all much involved yet with the Fedora culture to know how
decisions are made.

I have joined the IRC #mono on gimpnet.

All the best,
  Timotheus

On 10 April 2015 at 11:51, Jo Shields &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">directhex at apebox.org</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 10/04/15 10:08, Timotheus Pokorra wrote:
</I>&gt;&gt;<i> Hello Jo,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> First I want to thank you and Xamarin for providing uptodate Mono
</I>&gt;&gt;<i> packages for various Linux distributions.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But as it has been stated on the Mono mailing list before [1], the end
</I>&gt;&gt;<i> goal is to have uptodate Mono packages provided by the Linux
</I>&gt;&gt;<i> distributions themselves.
</I>&gt;<i>
</I>&gt;<i> This is still true, it'd definitely best for everyone if distributions
</I>&gt;<i> can offer up-to-date packages themselves - relationships between
</I>&gt;<i> distributions and upstreams are always best served if they're 2-way.
</I>&gt;<i>
</I>&gt;&gt;<i> I am trying to help to get a newer version of Mono into Fedora.
</I>&gt;&gt;<i> I don't have so much experience with packaging like yourself, so I
</I>&gt;&gt;<i> would like to ask for some advice.
</I>&gt;<i>
</I>&gt;<i> Hooray, it's been rather quiet on the Fedora front for a while. Remember
</I>&gt;<i> to consider #mono on GIMPnet for discussion with other people into this
</I>&gt;<i> packaging stuff.
</I>&gt;<i>
</I>&gt;&gt;<i> According to the Fedora rules [2] and [3], the packages must build
</I>&gt;&gt;<i> from source completely.
</I>&gt;&gt;<i> I think this is the same for Debian.
</I>&gt;&gt;<i> There are many dlls in the tarball, in
</I>&gt;&gt;<i> mono-4.0.0/external/binary-reference-assemblies/v4.0
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have checked the latest version that you built for Debian:
</I>&gt;&gt;<i> <A HREF="https://packages.debian.org/source/testing/mono">https://packages.debian.org/source/testing/mono</A>
</I>&gt;&gt;<i> I have learned that you create your own tarball: eg mono_3.2.8+dfsg.orig.tar.gz
</I>&gt;&gt;<i> This happens in the debian/rules file:
</I>&gt;&gt;<i> find $(TARBALL_DIR) -name &quot;*.dll&quot; -not -path
</I>&gt;&gt;<i> &quot;$(TARBALL_DIR)/mcs/class/lib/monolite/*&quot; -print -delete
</I>&gt;&gt;<i> find $(TARBALL_DIR) -name &quot;*.exe&quot; -not -path
</I>&gt;&gt;<i> &quot;$(TARBALL_DIR)/mcs/class/lib/monolite/*&quot; -print -delete
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There was no directory external/binary-reference-assemblies/ in 3.2.8.
</I>&gt;&gt;<i> What will you do for 4.0 for the Debian packages?
</I>&gt;<i>
</I>&gt;<i> The official Debian packages will not contain that directory at all. The
</I>&gt;<i> &quot;+dfsg&quot; suffix in a version number in a Debian orig tarball signifies
</I>&gt;<i> that it has been altered to comply with the Debian Free Software
</I>&gt;<i> Guidelines (which, like Fedora, forbid inclusion of needless binaries).
</I>&gt;<i> 4.0.0 in Debian will be +dfsg'd.
</I>&gt;<i>
</I>&gt;<i> Technically the binaries in question are Free Software - they have been
</I>&gt;<i> produced from Free source, with Free tools - but they cannot be produced
</I>&gt;<i> by the mono 4.0.0 source tree (they're built from a 3.12 source tree).
</I>&gt;<i>
</I>&gt;<i> The Xamarin packages include the binaries, as that no-binaries
</I>&gt;<i> requirement is not a requirement (although it is a personal
</I>&gt;<i> nice-to-have, as a FOSS guy).
</I>&gt;<i>
</I>&gt;<i> The binary-reference-assemblies files are needed when trying to compile
</I>&gt;<i> software which needs to target an older .NET version than 4.5 (which is
</I>&gt;<i> all Mono 4.0 supports natively) - if you don't care about that
</I>&gt;<i> requirement, then the binary-reference-assemblies simply are not needed.
</I>&gt;<i>
</I>&gt;&gt;<i> Can we join efforts to build the external binaries somehow during the
</I>&gt;&gt;<i> package build process?
</I>&gt;&gt;<i> Or do we need to create separate packages for the external binaries?
</I>&gt;<i>
</I>&gt;<i> You would need a &quot;mono_3.12.1&quot; source package as a distinct and separate
</I>&gt;<i> source package from &quot;mono&quot;. The build process would look approximately
</I>&gt;<i> like &quot;configure &amp;&amp; make &amp;&amp; run CLI-stripping tool whose name I've
</I>&gt;<i> forgotten &amp;&amp; manually package files in question without using make install&quot;
</I>&gt;<i>
</I>&gt;<i> This isn't a discussion I've had within Debian yet, as the 8.0 release
</I>&gt;<i> freeze means Mono updates haven't been a topic of discussion. My
</I>&gt;<i> *personal* feeling is &quot;I don't care enough about building against old
</I>&gt;<i> frameworks to put in the work, I'd rather just delete the files entirely&quot;
</I>&gt;<i>
</I>&gt;&gt;<i> Another question about monolite: Did you negotiate in the Debian
</I>&gt;&gt;<i> project to keep the monolite binaries, so that you can build Mono
</I>&gt;&gt;<i> without requiring Mono during the build?
</I>&gt;&gt;<i> I have just tested to build Mono without monolite on Fedora 21:
</I>&gt;<i>
</I>&gt;<i> Typically, decisions on such matters are made by the FTP Masters, whose
</I>&gt;<i> job is to gatekeep uploads by developers. A clear explanation of why
</I>&gt;<i> certain binaries have been kept, and a sworn statement that those
</I>&gt;<i> binaries can be regenerated by the source tree in question, has been
</I>&gt;<i> fine IME (see also F#, VBNC... compilers, generally). I couldn't find
</I>&gt;<i> the specific policy clause covering this whole topic, though. Doesn't
</I>&gt;<i> mean it's not there, just that our search mechanisms suck.
</I>&gt;<i>
</I>&gt;<i> When a compiler is self-hosting, that tends to also mean it needs itself
</I>&gt;<i> in order to compile, and any casual observer would agree that &quot;contains
</I>&gt;<i> a minimal copy of itself to bootstrap itself&quot; is better than &quot;circular
</I>&gt;<i> build dependency on itself, meaning the archive can never be cleanly
</I>&gt;<i> rebuilt from source&quot; - although instances of both exist in the Debian
</I>&gt;<i> archive.
</I>&gt;<i>
</I>&gt;&gt;<i> build/common/basic-profile-check.cs(40,30): error CS0117:
</I>&gt;&gt;<i> `System.Version' does not contain a definition for `TryParse'
</I>&gt;&gt;<i> /usr/lib/mono/2.0/mscorlib.dll (Location of the symbol related to
</I>&gt;&gt;<i> previous error)
</I>&gt;&gt;<i> build/common/basic-profile-check.cs(43,21): error CS0165: Use of
</I>&gt;&gt;<i> unassigned local variable `version'
</I>&gt;&gt;<i> Compilation failed: 2 error(s), 0 warnings
</I>&gt;&gt;<i> build/profiles/basic.make:93: recipe for target
</I>&gt;&gt;<i> 'build/deps/basic-profile-check.exe' failed
</I>&gt;&gt;<i> make[6]: *** [build/deps/basic-profile-check.exe] Error 1
</I>&gt;&gt;<i> *** The compiler 'mcs' doesn't appear to be usable.
</I>&gt;&gt;<i> *** You need Mono version 3.8 or better installed to build MCS
</I>&gt;&gt;<i> *** Check mono README for information on how to bootstrap a Mono installation.
</I>&gt;&gt;<i> *** The version of 'mcs' is: Mono C# compiler version 2.10.8.0.
</I>&gt;&gt;<i> build/profiles/basic.make:60: recipe for target 'do-profile-check' failed
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It seems that Mono 4 Alpha 1 does not build with the old Fedora Mono
</I>&gt;&gt;<i> 2.10 packages anymore.
</I>&gt;<i>
</I>&gt;<i> I don't believe the 3.8 requirement is entirely accurate, but 2.10 is
</I>&gt;<i> certainly too old. This is a great illustration of my point from above,
</I>&gt;<i> actually - a blanket ban on self-hosting bootstrap binaries makes it
</I>&gt;<i> tedious and incremental to update to latest. Unfortunately, it seems
</I>&gt;<i> Fedora packaging policy is &quot;hooray for tedious and incremental&quot;. You
</I>&gt;<i> should have some luck with the spec files I use for Xamarin RPMs, at
</I>&gt;<i> <A HREF="https://github.com/directhex/xamarin-mono/tree/centos">https://github.com/directhex/xamarin-mono/tree/centos</A> (I haven't been
</I>&gt;<i> tagging releases as I should - my development process is still very
</I>&gt;<i> Debian-centric - a gap of several days is a good indicator that I did an
</I>&gt;<i> upload). These are based on what was the state of the art in openSUSE
</I>&gt;<i> when I started my job, but with a bunch of changes to better cope with
</I>&gt;<i> gaps in RH's version of RPM.
</I>&gt;<i>
</I>


-- 
Kontaktdaten:
in Plauen: 03741 7424995
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000219.html">[mono-packagers] binaries in tarball
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#220">[ date ]</a>
              <a href="thread.html#220">[ thread ]</a>
              <a href="subject.html#220">[ subject ]</a>
              <a href="author.html#220">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">More information about the mono-packagers-list
mailing list</a><br>
</body></html>
