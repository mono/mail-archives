<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-packagers] Need help building moonlight 2.4.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-packagers-list%40lists.ximian.com?Subject=%5Bmono-packagers%5D%20Need%20help%20building%20moonlight%202.4.1&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-packagers] Need help building moonlight 2.4.1</H1>
    <B>Richard Shaw</B> 
    <A HREF="mailto:mono-packagers-list%40lists.ximian.com?Subject=%5Bmono-packagers%5D%20Need%20help%20building%20moonlight%202.4.1&In-Reply-To="
       TITLE="[mono-packagers] Need help building moonlight 2.4.1">hobbes1069 at gmail.com
       </A><BR>
    <I>Fri Sep 30 15:35:12 EDT 2011</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#203">[ date ]</a>
              <a href="thread.html#203">[ thread ]</a>
              <a href="subject.html#203">[ subject ]</a>
              <a href="author.html#203">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to package moonlight for possible inclusion at RPM Fusion
but I'm having some issues.

1. pkg-config problem:

I'm currently working on version 2.4.1 moonlight since it's the latest
stable. It apparently is supposed to work with mono 2.6 but 2.10 is
what F15 has, hopefully 2.6 is only a minimum.

I've already had to hack the main Makefile because of what I think is a
pkg-config issue with mono.

By default, the moonlight Makefile uses:

$ pkg-config --cflags mono

which returns nothing, while:

$ pkg-config --cflags mono-2
-D_REENTRANT -I/usr/lib64/pkgconfig/../../include/mono-2.0

^ returns what I need. ^

2. After that I'm getting most of the way though the compile but it's
failing looking for Mono.Cecil.dll. It's looking for it in a rather
strange place so I may have to hack the Makefile a bit to get it to
find it in the right place.

Here's the error I'm getting:
make[3]: Entering directory
`/home/build/rpmbuild/moonlight/BUILD/moonlight-2.4.1/class'
make[3]: *** No rule to make target
`/usr/bin/class/lib/net_1_1/Mono.Cecil.dll', needed by
`copy-mcs-assemblies'.  Stop.

I don't have a problem hacking the makefile to look in the right place
except the file (assuming I found the right one) is in an odd
directoy:

$ locate Mono.Cecil.dll
/usr/lib64/mono/gac/Mono.Cecil/0.9.4.0__0738eb9f132ed756/Mono.Cecil.dll

pkg-config --variable=Libraries cecil will give me the above path but
in it's description it says it's an internal library and &quot;do not
use&quot;... It seems the Makefile is setup for building from a tarball or
svn/git/whatever source, not from a system installed version of mono.

I'd like to get this fixed but I got around it temporarily using
--disable-browser-support and then I ran into a bunch of C# errors:

./System.Windows/Rect.cs(36,17): error CS0171: Field
`System.Windows.Rect.x' must be fully assigned before control leaves
the constructor
./System.Windows/Rect.cs(36,17): error CS0171: Field
`System.Windows.Rect.y' must be fully assigned before control leaves
the constructor
./System.Windows/Rect.cs(36,17): error CS0171: Field
`System.Windows.Rect.w' must be fully assigned before control leaves
the constructor
./System.Windows/Rect.cs(36,17): error CS0171: Field
`System.Windows.Rect.h' must be fully assigned before control leaves
the constructor
./System.Windows/Size.cs(35,25): error CS0188: The `this' object
cannot be used before all of its fields are assigned to
./System.Windows/Size.cs(36,25): error CS0188: The `this' object
cannot be used before all of its fields are assigned to
./System.Windows/Size.cs(34,17): error CS0171: Field
`System.Windows.Size.w' must be fully assigned before control leaves
the constructor
./System.Windows/Size.cs(34,17): error CS0171: Field
`System.Windows.Size.h' must be fully assigned before control leaves
the constructor

There's a lot more, that's just a sample.

Any ideas?

Thanks,
Richard
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#203">[ date ]</a>
              <a href="thread.html#203">[ thread ]</a>
              <a href="subject.html#203">[ subject ]</a>
              <a href="author.html#203">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">More information about the mono-packagers-list
mailing list</a><br>
</body></html>
