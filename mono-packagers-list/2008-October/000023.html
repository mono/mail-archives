<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-packagers] Startup Scripts Inconsistency in Mono 2.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-packagers-list%40lists.ximian.com?Subject=%5Bmono-packagers%5D%20Startup%20Scripts%20Inconsistency%20in%20Mono%202.0&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000037.html">
   <LINK REL="Next"  HREF="000024.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-packagers] Startup Scripts Inconsistency in Mono 2.0</H1>
    <B>Mirco Bauer</B> 
    <A HREF="mailto:mono-packagers-list%40lists.ximian.com?Subject=%5Bmono-packagers%5D%20Startup%20Scripts%20Inconsistency%20in%20Mono%202.0&In-Reply-To="
       TITLE="[mono-packagers] Startup Scripts Inconsistency in Mono 2.0">meebey at debian.org
       </A><BR>
    <I>Sun Oct 19 11:00:40 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000037.html">[mono-packagers] [Mono-docs-list] monodoc	&amp;	mcs/mono	module	merging
</A></li>
        <LI>Next message: <A HREF="000024.html">[mono-packagers] Startup Scripts Inconsistency in Mono 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23">[ date ]</a>
              <a href="thread.html#23">[ thread ]</a>
              <a href="subject.html#23">[ subject ]</a>
              <a href="author.html#23">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

in Mono 2.0 I noticed a serious inconsistency in the startup scripts.
This makes is very difficult to package it correctly, as I am splitting
applications that target the 1.0 and 2.0 runtime.

It seems that most scripts without a version number are now call the 2.0
version instead of the 1.0 version.

I see major issues with this though as there are many applications that rely
on this scripts during the build, and suddenly the helper tools start using
the 2.0 profile and not 1.0 like they did before.

As example if an application builds using mcs and al, al is now 2.0 while
mcs (as expected) 1.0....

IMHO all development tools should ship 2 flavors (1.0 and 2.0) with 2 scripts
(one for 1.0 and one for 2.0) and a default script that either calls 1.0 for
_all_ scripts or 2.0, but not a mix between of that!

This is not only a build issue but also a packaging issue, as files shipped
in packages (at least for debian) are not allowed to overwrite files of other
packages (if not explicitly allowed). Thus making /usr/bin/al suddenly use /usr/lib/mono/2.0/al.exe
means the script has to be moved from mono-1.0-devel to mono-2.0-devel and existing
source packages in debian will now break as they have a build-dependency on
mono-1.0-devel and not mono-2.0-devel.

I am stopping packaging Mono 2.0 for Debian because of this issue, as regardless
of what the solution will be, moving things forth and back will make packaging
error prone, cause unexpected corner cases and needlessly complicated.

So please lets find a solution that is a) consistent and b) back-wards compatible!
(compared to &lt; 2.0 of course)

Here a list of the scripts and which version they start:
al1:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/al.exe &quot;$@&quot;
al2:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/al.exe &quot;$@&quot;
al:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/al.exe &quot;$@&quot;

al was changed to 2.0

gacutil2:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/gacutil.exe &quot;$@&quot;
gacutil:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/gacutil.exe &quot;$@&quot;

gacutil was not changed to 2.0? and no gacutil1 script?

genxs1:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/genxs.exe &quot;$@&quot;
genxs2:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/genxs.exe &quot;$@&quot;
genxs:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/genxs.exe &quot;$@&quot;

ilasm1:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/ilasm.exe &quot;$@&quot;
ilasm2:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/ilasm.exe &quot;$@&quot;
ilasm:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/ilasm.exe &quot;$@&quot;

ilasm was changed to 2.0

mcs1:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/mcs.exe &quot;$@&quot;
mcs:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/mcs.exe &quot;$@&quot;

mcs1? what eh? :)

mkbundle1:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/mkbundle.exe &quot;$@&quot;
mkbundle2:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/mkbundle.exe &quot;$@&quot;
mkbundle:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/mkbundle.exe &quot;$@&quot;

mkbundle was changed to 2.0

mono-api-diff:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/mono-api-diff.exe &quot;$@&quot;

no 1 nor 2?

mono-api-info1:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/mono-api-info.exe &quot;$@&quot;
mono-api-info2:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/mono-api-info.exe &quot;$@&quot;
mono-api-info:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/mono-api-info.exe &quot;$@&quot;

mono-api-info was changed to 2.0

mono-service2:   exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/mono-service.exe $args
mono-service:   exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/mono-service.exe $args

mono-service is still 1.0, no mono-service1 script?

monolinker:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/monolinker.exe &quot;$@&quot;

no monolinker(1|2) and still 1.0?

monop1:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/monop.exe &quot;$@&quot;
monop2:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/monop.exe &quot;$@&quot;
monop:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/monop.exe &quot;$@&quot;

nunit-console2:exec /usr/bin/mono --debug $MONO_OPTIONS /usr/lib/mono/2.0/nunit-console.exe &quot;$@&quot;
nunit-console:exec /usr/bin/mono --debug $MONO_OPTIONS /usr/lib/mono/1.0/nunit-console.exe &quot;$@&quot;

resgen1:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/resgen.exe &quot;$@&quot;
resgen2:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/resgen.exe &quot;$@&quot;
resgen:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/resgen.exe &quot;$@&quot;

signcode:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/signcode.exe &quot;$@&quot;

sn:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/sn.exe &quot;$@&quot;

no sn(1|2) and still 1.0?

wsdl1:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/wsdl.exe &quot;$@&quot;
wsdl2:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/wsdl.exe &quot;$@&quot;
wsdl:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/wsdl.exe &quot;$@&quot;

wsdsl was changed to 2.0

xbuild:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/xbuild.exe &quot;$@&quot;

well this is 2.0-only app, so nothing to fix.

xsd2:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/2.0/xsd.exe &quot;$@&quot;
xsd:exec /usr/bin/mono $MONO_OPTIONS /usr/lib/mono/1.0/xsd.exe &quot;$@&quot;

no xsd1 and xsd still 1.0?

-- 
Regards,

Mirco 'meebey' Bauer

PGP-Key ID: 0xEEF946C8

FOSS Developer    <A HREF="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">meebey at meebey.net</A>  <A HREF="http://www.meebey.net/">http://www.meebey.net/</A>
PEAR Developer    <A HREF="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">meebey at php.net</A>     <A HREF="http://pear.php.net/">http://pear.php.net/</A>
Debian Developer  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">meebey at debian.org</A>  <A HREF="http://www.debian.org/">http://www.debian.org/</A>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000037.html">[mono-packagers] [Mono-docs-list] monodoc	&amp;	mcs/mono	module	merging
</A></li>
	<LI>Next message: <A HREF="000024.html">[mono-packagers] Startup Scripts Inconsistency in Mono 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23">[ date ]</a>
              <a href="thread.html#23">[ thread ]</a>
              <a href="subject.html#23">[ subject ]</a>
              <a href="author.html#23">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-packagers-list">More information about the mono-packagers-list
mailing list</a><br>
</body></html>
