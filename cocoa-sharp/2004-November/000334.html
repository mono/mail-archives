<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Cocoa-sharp] Running coco-sharp programs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jake.macmullin%40csiro.au">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000319.html">
   <LINK REL="Next"  HREF="000336.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cocoa-sharp] Running coco-sharp programs
   </H1>
    <B>Jake MacMullin
    </B> 
    <A HREF="mailto:jake.macmullin%40csiro.au"
       TITLE="[Cocoa-sharp] Running coco-sharp programs">jake.macmullin@csiro.au
       </A><BR>
    <I>Mon, 15 Nov 2004 11:56:44 +1100</I>
    <P><UL>
        <LI> Previous message: <A HREF="000319.html">[Cocoa-sharp] Running coco-sharp programs
</A></li>
        <LI> Next message: <A HREF="000336.html">[Cocoa-sharp] Running coco-sharp programs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#334">[ date ]</a>
              <a href="thread.html#334">[ thread ]</a>
              <a href="subject.html#334">[ subject ]</a>
              <a href="author.html#334">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> This message is in MIME format. Since your mail reader does not understand
</I>this format, some or all of this message may not be legible.

--B_3183364604_656985
Content-type: text/plain;
	charset=&quot;ISO-8859-1&quot;
Content-transfer-encoding: quoted-printable

I encountered the same problems when trying to run the CurrencyConverter
example with the latest build of Mono (and Cocoa Sharp).

I think the problem stems from the fact that the Makefile for the currency
converter is still referencing CocoaSharp as a separate framework. I
eventually managed to get it to work by making the following changes to the
makefile.

Firstly, the original makefile copied the following files in to the
Resources folder:

Cocoa Dlls:
Apple.AppKit.dll
Apple.Foundation.dll
Apple.WebKit.dll

Config files:
Apple.AppKit.dll.config
Apple.Foundation.dll.config
Apple.WebKit.dll.config

Glue:
libAppKitGlue.dylib
libWebKitGlue.dylib
libFoundationGlue.dylib
libCocoaSharpGlue.dylib

The location for these files has moved a fair bit from the original
CocoaSharp 0.1 release and the current build. The following Makefile
references the correct location (according to the latest build on my machin=
e
at least). It is a little more messy - as the required libraries (and confi=
g
files) aren't all in the same place any more. Anyway, with thie Makefile I
was able to get the CurrencyConverter up and running again. I=B9m not really
sure why the dll.config files need to be copied in to the =8CResources=B9
folder, but seeing as they do I=B9m thinking of putting some symbolic links i=
n
to /Library/Frameworks/Mono.framework/Libraries/mono/cocoa-sharp (which has
symbolic links to the DLLs) so that the original: cp $(LIB)/*.dll* will
work.

Is there a better way to do this? How are other people building NIB-based
CocoaSharp apps with the current build? I had a look at Patrick's Xcode
template but it still seems to reference
/Library/Frameworks/CocoaSharp.framework

Regards,

Jake MacMullin


******* Makefile *******
LIB=3D/Library/Frameworks/Mono.framework/Libraries/mono/cocoa-sharp
APPKIT=3D/Library/Frameworks/Mono.framework/Versions/1.1.2/lib/mono/gac/Apple=
.
AppKit/1.0.0.0__a2b5f5c17ce02f1d
FOUNDATION=3D/Library/Frameworks/Mono.framework/Versions/1.1.2/lib/mono/gac/A=
p
ple.Foundation/1.0.0.0__a2b5f5c17ce02f1d
WEBKIT=3D/Library/Frameworks/Mono.framework/Versions/1.1.2/lib/mono/gac/Apple=
.
WebKit/1.0.0.0__a2b5f5c17ce02f1d
GLUELIB=3D/Library/Frameworks/Mono.framework/Libraries
BIN=3D/Library/Frameworks/Mono.framework/Commands
APP=3DCurrencyConverter.app

all: test

test: CurrencyConverter.cs
    rm -Rf $(APP)
    mkdir -p $(APP)/Contents/Resources
    mcs CurrencyConverter.cs -out:$(APP)/Contents/Resources/Test.exe
-r:$(LIB)/Apple.Foundation.dll -r:$(LIB)/Apple.AppKit.dll
    mkdir -p $(APP)/Contents/MacOS
    cp ./mono.icns $(APP)/Contents/Resources
    cp ./Info.plist $(APP)/Contents/Info.plist
    cp $(APPKIT)/*.dll* $(APP)/Contents/Resources
    cp $(FOUNDATION)/*.dll* $(APP)/Contents/Resources
    cp $(WEBKIT)/*.dll* $(APP)/Contents/Resources
    cp $(GLUELIB)/*Glue.dylib $(APP)/Contents/Resources
    cp $(BIN)/CocoaSharpLoader $(APP)/Contents/MacOS/CurrencyConverter
    cp -r CurrencyConverter.nib $(APP)/Contents/Resources

run: test
    ./$(APP)/Contents/MacOS/CurrencyConverter



On 12/11/04 11:27 PM, &quot;Baker, GJ (Gareth)&quot; &lt;<A HREF="mailto:g.j.baker@dl.ac.uk">g.j.baker@dl.ac.uk</A>&gt; wrote:

&gt;<i> I have a couple of questions about running/building cocoa-sharp programs:
</I>&gt;<i>=20
</I>&gt;<i> Firstly, the nib example makefile which builds the currency converter doe=
</I>s
&gt;<i> not copy the *.dll files into the application, is this actually necessary=
</I>. I
&gt;<i> get different error messages depending on whether I do or not.
</I>&gt;<i>=20
</I>&gt;<i> Secondly, if I do copy them in I get the error message:
</I>&gt;<i>=20
</I>&gt;<i> Unhandled exception: System.DllNotFoundException: Glue
</I>&gt;<i> ..... Apple.Foundation.TypeConverter:GetObjectClassName (intptr)
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>&gt;<i> I have set up a mapping from Glue to libCocoaSharpGlue.dylib in the mono
</I>&gt;<i> config file, is this the right mapping?
</I>&gt;<i>=20
</I>&gt;<i> Thanks for any help.
</I>&gt;<i> Gareth Baker
</I>&gt;<i>=20
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Cocoa-sharp mailing list
</I>&gt;<i> <A HREF="mailto:Cocoa-sharp@lists.ximian.com">Cocoa-sharp@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/cocoa-sharp">http://lists.ximian.com/mailman/listinfo/cocoa-sharp</A>
</I>




--B_3183364604_656985
Content-type: text/html;
	charset=&quot;ISO-8859-1&quot;
Content-transfer-encoding: quoted-printable

&lt;HTML&gt;
&lt;HEAD&gt;
&lt;TITLE&gt;Re: [Cocoa-sharp] Running coco-sharp programs&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;FONT FACE=3D&quot;Verdana, Helvetica, Arial&quot;&gt;&lt;SPAN STYLE=3D'font-size:12.0px'&gt;I enc=
ountered the same problems when trying to run the CurrencyConverter example =
with the latest build of Mono (and Cocoa Sharp).&lt;BR&gt;
&lt;BR&gt;
I think the problem stems from the fact that the Makefile for the currency =
converter is still referencing CocoaSharp as a separate framework. I eventua=
lly managed to get it to work by making the following changes to the makefil=
e.&lt;BR&gt;
&lt;BR&gt;
Firstly, the original makefile copied the following files in to the Resourc=
es folder:&lt;BR&gt;
&lt;BR&gt;
Cocoa Dlls:&lt;BR&gt;
Apple.AppKit.dll&lt;BR&gt;
Apple.Foundation.dll&lt;BR&gt;
Apple.WebKit.dll&lt;BR&gt;
&lt;BR&gt;
Config files:&lt;BR&gt;
Apple.AppKit.dll.config&lt;BR&gt;
Apple.Foundation.dll.config&lt;BR&gt;
Apple.WebKit.dll.config&lt;BR&gt;
&lt;BR&gt;
Glue:&lt;BR&gt;
libAppKitGlue.dylib&lt;BR&gt;
libWebKitGlue.dylib&lt;BR&gt;
libFoundationGlue.dylib&lt;BR&gt;
libCocoaSharpGlue.dylib&lt;BR&gt;
&lt;BR&gt;
The location for these files has moved a fair bit from the original CocoaSh=
arp 0.1 release and the current build. The following Makefile references the=
 correct location (according to the latest build on my machine at least). It=
 is a little more messy - as the required libraries (and config files) aren'=
t all in the same place any more. Anyway, with thie Makefile I was able to g=
et the CurrencyConverter up and running again. I&amp;#8217;m not really sure why=
 the dll.config files need to be copied in to the &amp;#8216;Resources&amp;#8217; fo=
lder, but seeing as they do I&amp;#8217;m thinking of putting some symbolic link=
s in to /Library/Frameworks/Mono.framework/Libraries/mono/cocoa-sharp (which=
 has symbolic links to the DLLs) so that the original: cp $(LIB)/*.dll* will=
 work.&lt;BR&gt;
&lt;BR&gt;
Is there a better way to do this? How are other people building NIB-based C=
ocoaSharp apps with the current build? I had a look at Patrick's Xcode templ=
ate but it still seems to reference /Library/Frameworks/CocoaSharp.framework=
&lt;BR&gt;
&lt;BR&gt;
Regards,&lt;BR&gt;
&lt;BR&gt;
Jake MacMullin&lt;BR&gt;
&lt;BR&gt;
&lt;BR&gt;
******* Makefile *******&lt;BR&gt;
LIB=3D/Library/Frameworks/Mono.framework/Libraries/mono/cocoa-sharp&lt;BR&gt;
APPKIT=3D/Library/Frameworks/Mono.framework/Versions/1.1.2/lib/mono/gac/Apple=
.AppKit/1.0.0.0__a2b5f5c17ce02f1d&lt;BR&gt;
FOUNDATION=3D/Library/Frameworks/Mono.framework/Versions/1.1.2/lib/mono/gac/A=
pple.Foundation/1.0.0.0__a2b5f5c17ce02f1d&lt;BR&gt;
WEBKIT=3D/Library/Frameworks/Mono.framework/Versions/1.1.2/lib/mono/gac/Apple=
.WebKit/1.0.0.0__a2b5f5c17ce02f1d&lt;BR&gt;
GLUELIB=3D/Library/Frameworks/Mono.framework/Libraries&lt;BR&gt;
BIN=3D/Library/Frameworks/Mono.framework/Commands&lt;BR&gt;
APP=3DCurrencyConverter.app&lt;BR&gt;
&lt;BR&gt;
all: test&lt;BR&gt;
&lt;BR&gt;
test: CurrencyConverter.cs&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rm -Rf $(APP)&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mkdir -p $(APP)/Contents/Resources&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mcs CurrencyConverter.cs -out:$(APP)/Contents/Resou=
rces/Test.exe -r:$(LIB)/Apple.Foundation.dll -r:$(LIB)/Apple.AppKit.dll&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mkdir -p $(APP)/Contents/MacOS&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cp ./mono.icns $(APP)/Contents/Resources&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cp ./Info.plist $(APP)/Contents/Info.plist&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cp $(APPKIT)/*.dll* $(APP)/Contents/Resources&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cp $(FOUNDATION)/*.dll* $(APP)/Contents/Resources&lt;B=
R&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cp $(WEBKIT)/*.dll* $(APP)/Contents/Resources&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cp $(GLUELIB)/*Glue.dylib $(APP)/Contents/Resources=
&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cp $(BIN)/CocoaSharpLoader $(APP)/Contents/MacOS/Cu=
rrencyConverter&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cp -r CurrencyConverter.nib $(APP)/Contents/Resourc=
es&lt;BR&gt;
&lt;BR&gt;
run: test&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;./$(APP)/Contents/MacOS/CurrencyConverter&lt;BR&gt;
&lt;BR&gt;
&lt;BR&gt;
&lt;BR&gt;
On 12/11/04 11:27 PM, &amp;quot;Baker, GJ (Gareth)&amp;quot; &amp;lt;<A HREF="mailto:g.j.baker@dl.ac.uk">g.j.baker@dl.ac.uk</A>=
&amp;gt;<i> wrote:&lt;BR&gt;
</I>&lt;BR&gt;
&lt;FONT COLOR=3D&quot;#0000FF&quot;&gt;&amp;gt; I have a couple of questions about running/build=
ing cocoa-sharp programs:&lt;BR&gt;
&amp;gt;<i> &lt;BR&gt;
</I>&amp;gt;<i> Firstly, the nib example makefile which builds the currency converter =
</I>does&lt;BR&gt;
&amp;gt;<i> not copy the *.dll files into the application, is this actually necess=
</I>ary. I&lt;BR&gt;
&amp;gt;<i> get different error messages depending on whether I do or not.&lt;BR&gt;
</I>&amp;gt;<i> &lt;BR&gt;
</I>&amp;gt;<i> Secondly, if I do copy them in I get the error message:&lt;BR&gt;
</I>&amp;gt;<i> &lt;BR&gt;
</I>&amp;gt;<i> Unhandled exception: System.DllNotFoundException: Glue&lt;BR&gt;
</I>&amp;gt;<i> ..... Apple.Foundation.TypeConverter:GetObjectClassName (intptr)&lt;BR&gt;
</I>&amp;gt;<i> &lt;BR&gt;
</I>&amp;gt;<i> &lt;BR&gt;
</I>&amp;gt;<i> I have set up a mapping from Glue to libCocoaSharpGlue.dylib in the mo=
</I>no&lt;BR&gt;
&amp;gt;<i> config file, is this the right mapping?&lt;BR&gt;
</I>&amp;gt;<i> &lt;BR&gt;
</I>&amp;gt;<i> Thanks for any help.&lt;BR&gt;
</I>&amp;gt;<i> Gareth Baker&lt;BR&gt;
</I>&amp;gt;<i> &lt;BR&gt;
</I>&amp;gt;<i> _______________________________________________&lt;BR&gt;
</I>&amp;gt;<i> Cocoa-sharp mailing list&lt;BR&gt;
</I>&amp;gt;<i> <A HREF="mailto:Cocoa-sharp@lists.ximian.com">Cocoa-sharp@lists.ximian.com</A>&lt;BR&gt;
</I>&amp;gt;<i> &lt;a href=3D&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/cocoa-sharp"">http://lists.ximian.com/mailman/listinfo/cocoa-sharp&quot;</A>&gt;<A HREF="http://=">http://=</A>
</I>lists.ximian.com/mailman/listinfo/cocoa-sharp&lt;/a&gt;&lt;BR&gt;
&lt;/FONT&gt;&lt;BR&gt;
&lt;BR&gt;
&lt;BR&gt;
&lt;/SPAN&gt;&lt;/FONT&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;


--B_3183364604_656985--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000319.html">[Cocoa-sharp] Running coco-sharp programs
</A></li>
	<LI> Next message: <A HREF="000336.html">[Cocoa-sharp] Running coco-sharp programs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#334">[ date ]</a>
              <a href="thread.html#334">[ thread ]</a>
              <a href="subject.html#334">[ subject ]</a>
              <a href="author.html#334">[ author ]</a>
         </LI>
       </UL>
</body></html>
