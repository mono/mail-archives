<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Cocoa-sharp] Running coco-sharp programs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pat2man%40comcast.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000334.html">
   <LINK REL="Next"  HREF="000321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cocoa-sharp] Running coco-sharp programs
   </H1>
    <B>Patrick Tescher
    </B> 
    <A HREF="mailto:pat2man%40comcast.net"
       TITLE="[Cocoa-sharp] Running coco-sharp programs">pat2man@comcast.net
       </A><BR>
    <I>Sun, 14 Nov 2004 17:21:25 -0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="000334.html">[Cocoa-sharp] Running coco-sharp programs
</A></li>
        <LI> Next message: <A HREF="000321.html">[Cocoa-sharp] Xcode Template/CocoaSharp.framework
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#336">[ date ]</a>
              <a href="thread.html#336">[ thread ]</a>
              <a href="subject.html#336">[ subject ]</a>
              <a href="author.html#336">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you take a look at my updated template you will see that it now links 
to the Mono framework and not the Cocoa# framework; everything has been 
moved into the Mono framework. Right now my template copies the dll 
files into the Resources folder of the current application.


Jake MacMullin wrote:

&gt;<i>I encountered the same problems when trying to run the CurrencyConverter
</I>&gt;<i>example with the latest build of Mono (and Cocoa Sharp).
</I>&gt;<i>
</I>&gt;<i>I think the problem stems from the fact that the Makefile for the currency
</I>&gt;<i>converter is still referencing CocoaSharp as a separate framework. I
</I>&gt;<i>eventually managed to get it to work by making the following changes to the
</I>&gt;<i>makefile.
</I>&gt;<i>
</I>&gt;<i>Firstly, the original makefile copied the following files in to the
</I>&gt;<i>Resources folder:
</I>&gt;<i>
</I>&gt;<i>Cocoa Dlls:
</I>&gt;<i>Apple.AppKit.dll
</I>&gt;<i>Apple.Foundation.dll
</I>&gt;<i>Apple.WebKit.dll
</I>&gt;<i>
</I>&gt;<i>Config files:
</I>&gt;<i>Apple.AppKit.dll.config
</I>&gt;<i>Apple.Foundation.dll.config
</I>&gt;<i>Apple.WebKit.dll.config
</I>&gt;<i>
</I>&gt;<i>Glue:
</I>&gt;<i>libAppKitGlue.dylib
</I>&gt;<i>libWebKitGlue.dylib
</I>&gt;<i>libFoundationGlue.dylib
</I>&gt;<i>libCocoaSharpGlue.dylib
</I>&gt;<i>
</I>&gt;<i>The location for these files has moved a fair bit from the original
</I>&gt;<i>CocoaSharp 0.1 release and the current build. The following Makefile
</I>&gt;<i>references the correct location (according to the latest build on my machine
</I>&gt;<i>at least). It is a little more messy - as the required libraries (and config
</I>&gt;<i>files) aren't all in the same place any more. Anyway, with thie Makefile I
</I>&gt;<i>was able to get the CurrencyConverter up and running again. I¹m not really
</I>&gt;<i>sure why the dll.config files need to be copied in to the ŒResources¹
</I>&gt;<i>folder, but seeing as they do I¹m thinking of putting some symbolic links in
</I>&gt;<i>to /Library/Frameworks/Mono.framework/Libraries/mono/cocoa-sharp (which has
</I>&gt;<i>symbolic links to the DLLs) so that the original: cp $(LIB)/*.dll* will
</I>&gt;<i>work.
</I>&gt;<i>
</I>&gt;<i>Is there a better way to do this? How are other people building NIB-based
</I>&gt;<i>CocoaSharp apps with the current build? I had a look at Patrick's Xcode
</I>&gt;<i>template but it still seems to reference
</I>&gt;<i>/Library/Frameworks/CocoaSharp.framework
</I>&gt;<i>
</I>&gt;<i>Regards,
</I>&gt;<i>
</I>&gt;<i>Jake MacMullin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>******* Makefile *******
</I>&gt;<i>LIB=/Library/Frameworks/Mono.framework/Libraries/mono/cocoa-sharp
</I>&gt;<i>APPKIT=/Library/Frameworks/Mono.framework/Versions/1.1.2/lib/mono/gac/Apple.
</I>&gt;<i>AppKit/1.0.0.0__a2b5f5c17ce02f1d
</I>&gt;<i>FOUNDATION=/Library/Frameworks/Mono.framework/Versions/1.1.2/lib/mono/gac/Ap
</I>&gt;<i>ple.Foundation/1.0.0.0__a2b5f5c17ce02f1d
</I>&gt;<i>WEBKIT=/Library/Frameworks/Mono.framework/Versions/1.1.2/lib/mono/gac/Apple.
</I>&gt;<i>WebKit/1.0.0.0__a2b5f5c17ce02f1d
</I>&gt;<i>GLUELIB=/Library/Frameworks/Mono.framework/Libraries
</I>&gt;<i>BIN=/Library/Frameworks/Mono.framework/Commands
</I>&gt;<i>APP=CurrencyConverter.app
</I>&gt;<i>
</I>&gt;<i>all: test
</I>&gt;<i>
</I>&gt;<i>test: CurrencyConverter.cs
</I>&gt;<i>    rm -Rf $(APP)
</I>&gt;<i>    mkdir -p $(APP)/Contents/Resources
</I>&gt;<i>    mcs CurrencyConverter.cs -out:$(APP)/Contents/Resources/Test.exe
</I>&gt;<i>-r:$(LIB)/Apple.Foundation.dll -r:$(LIB)/Apple.AppKit.dll
</I>&gt;<i>    mkdir -p $(APP)/Contents/MacOS
</I>&gt;<i>    cp ./mono.icns $(APP)/Contents/Resources
</I>&gt;<i>    cp ./Info.plist $(APP)/Contents/Info.plist
</I>&gt;<i>    cp $(APPKIT)/*.dll* $(APP)/Contents/Resources
</I>&gt;<i>    cp $(FOUNDATION)/*.dll* $(APP)/Contents/Resources
</I>&gt;<i>    cp $(WEBKIT)/*.dll* $(APP)/Contents/Resources
</I>&gt;<i>    cp $(GLUELIB)/*Glue.dylib $(APP)/Contents/Resources
</I>&gt;<i>    cp $(BIN)/CocoaSharpLoader $(APP)/Contents/MacOS/CurrencyConverter
</I>&gt;<i>    cp -r CurrencyConverter.nib $(APP)/Contents/Resources
</I>&gt;<i>
</I>&gt;<i>run: test
</I>&gt;<i>    ./$(APP)/Contents/MacOS/CurrencyConverter
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On 12/11/04 11:27 PM, &quot;Baker, GJ (Gareth)&quot; &lt;<A HREF="mailto:g.j.baker@dl.ac.uk">g.j.baker@dl.ac.uk</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>I have a couple of questions about running/building cocoa-sharp programs:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Firstly, the nib example makefile which builds the currency converter does
</I>&gt;&gt;<i>not copy the *.dll files into the application, is this actually necessary. I
</I>&gt;&gt;<i>get different error messages depending on whether I do or not.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Secondly, if I do copy them in I get the error message:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Unhandled exception: System.DllNotFoundException: Glue
</I>&gt;&gt;<i>..... Apple.Foundation.TypeConverter:GetObjectClassName (intptr)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I have set up a mapping from Glue to libCocoaSharpGlue.dylib in the mono
</I>&gt;&gt;<i>config file, is this the right mapping?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Thanks for any help.
</I>&gt;&gt;<i>Gareth Baker
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>Cocoa-sharp mailing list
</I>&gt;&gt;<i><A HREF="mailto:Cocoa-sharp@lists.ximian.com">Cocoa-sharp@lists.ximian.com</A>
</I>&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/cocoa-sharp">http://lists.ximian.com/mailman/listinfo/cocoa-sharp</A>
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000334.html">[Cocoa-sharp] Running coco-sharp programs
</A></li>
	<LI> Next message: <A HREF="000321.html">[Cocoa-sharp] Xcode Template/CocoaSharp.framework
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#336">[ date ]</a>
              <a href="thread.html#336">[ thread ]</a>
              <a href="subject.html#336">[ subject ]</a>
              <a href="author.html#336">[ author ]</a>
         </LI>
       </UL>
</body></html>
