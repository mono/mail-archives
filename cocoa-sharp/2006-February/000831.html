<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Cocoa-sharp] Mach exception handling issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cocoa-sharp%40lists.ximian.com?Subject=%5BCocoa-sharp%5D%20Mach%20exception%20handling%20issues&In-Reply-To=9147a70ec1850ab5ee1b566d5354b7e7%40web.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000839.html">
   <LINK REL="Next"  HREF="000840.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cocoa-sharp] Mach exception handling issues</H1>
    <B>kangaroo</B> 
    <A HREF="mailto:cocoa-sharp%40lists.ximian.com?Subject=%5BCocoa-sharp%5D%20Mach%20exception%20handling%20issues&In-Reply-To=9147a70ec1850ab5ee1b566d5354b7e7%40web.de"
       TITLE="[Cocoa-sharp] Mach exception handling issues">grompf at sublimeintervention.com
       </A><BR>
    <I>Wed Feb  8 17:23:01 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000839.html">[Cocoa-sharp] Mach thread and AppKit exit behavior revealed
</A></li>
        <LI>Next message: <A HREF="000840.html">[Cocoa-sharp] Mach exception handling issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#831">[ date ]</a>
              <a href="thread.html#831">[ thread ]</a>
              <a href="subject.html#831">[ subject ]</a>
              <a href="author.html#831">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Andreas,

On 14-Jan-06, at 9:44 PM, Andreas F&#228;rber wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Some time ago I noticed a test case in Mach.cs that should  
</I>&gt;<i> demonstrate getting a NullPointerException from a call to  
</I>&gt;<i> Marshal.ReadIntPtr(IntPtr.Zero). Unfortunately I am not observing  
</I>&gt;<i> such results with the released or SVN version of cocoa-sharp.dll. I  
</I>&gt;<i> am always getting a SIGSEGV signal message with callstacks from  
</I>&gt;<i> Mono and it exits.
</I>
Is this still the case?

&gt;<i>
</I>&gt;<i> Not having heard answers on the topic of Mach I have begun learning  
</I>&gt;<i> about the Mach interface myself and have again written my own  
</I>&gt;<i> implementation of a Mach exception handler for Cocoa# - judging by  
</I>&gt;<i> its output it appears that the p/invoked Mach IPC itself is working  
</I>&gt;<i> fine. So we can narrow this down to the Cocoa# &quot;voodoo&quot; going on  
</I>&gt;<i> there ... can anyone point me to some documentation on these two  
</I>&gt;<i> messages (512 bytes received and 36 bytes sent)? In the Mach 3  
</I>&gt;<i> documents (kernel_interface.ps) only mach_msg_header_t is explained  
</I>&gt;<i> and not task_set_exception_ports and its messages. An int 0x5 seems  
</I>&gt;<i> to be written 8 Bytes (2*4) after mach_msg_header_t, but what about  
</I>&gt;<i> the eight bytes in between? Do they need to be filled in? Or am I  
</I>&gt;<i> on a wrong track here?
</I>&gt;<i>
</I>
Those values were emperically determined from the C code posted by  
the omni-group.

&gt;<i> The code only indicates that /removing/ the exception handling is  
</I>&gt;<i> not working; is this a known issue in Cocoa#? Or a problem with  
</I>&gt;<i> Mono or my system? I have used mcs for all these tests strait away  
</I>&gt;<i> this time.
</I>&gt;<i>
</I>
To be honest that code for removing is wrong; and needs to be  
rewritten but I didn't spend a ton of time on it as we're looking at  
moving mach exception handling into the mono runtime proper.  This  
shouldn't detract from any fixes that you have pending for the cocoa#  
trunk tho as there is no timeline around that.


-g

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000839.html">[Cocoa-sharp] Mach thread and AppKit exit behavior revealed
</A></li>
	<LI>Next message: <A HREF="000840.html">[Cocoa-sharp] Mach exception handling issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#831">[ date ]</a>
              <a href="thread.html#831">[ thread ]</a>
              <a href="subject.html#831">[ subject ]</a>
              <a href="author.html#831">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/cocoa-sharp">More information about the Cocoa-sharp
mailing list</a><br>
</body></html>
