<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Cocoa-sharp] Re: Something weird...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cocoa-sharp%40lists.ximian.com?Subject=%5BCocoa-sharp%5D%20Re%3A%20Something%20weird...&In-Reply-To=F814CDB4-322D-45B3-B246-5CE0B4DFDD9F%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000824.html">
   <LINK REL="Next"  HREF="000826.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cocoa-sharp] Re: Something weird...</H1>
    <B>Andreas F&#228;rber</B> 
    <A HREF="mailto:cocoa-sharp%40lists.ximian.com?Subject=%5BCocoa-sharp%5D%20Re%3A%20Something%20weird...&In-Reply-To=F814CDB4-322D-45B3-B246-5CE0B4DFDD9F%40gmail.com"
       TITLE="[Cocoa-sharp] Re: Something weird...">andreas.faerber at web.de
       </A><BR>
    <I>Wed Feb  8 17:06:01 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000824.html">[Cocoa-sharp] Re: Something weird...
</A></li>
        <LI>Next message: <A HREF="000826.html">[Cocoa-sharp] Passing Structs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#827">[ date ]</a>
              <a href="thread.html#827">[ thread ]</a>
              <a href="subject.html#827">[ subject ]</a>
              <a href="author.html#827">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tim Davis schrieb:
&gt;<i> Forget that email...if I try to make it return a cocoa.string it still
</I>&gt;<i> crashes, I had just forgotten to copy the new dll over...  oops, sorry.
</I>Tim, I can only repeat that your workaround in the patch
(NSTableColumn.Identifier) was wrong at the time. The reason for this is
that NSTableColumn's initWithIdentifier:, identifier and setIdentifier
are declared (well, except initWithIdentifer actually) to take/return an
argument of type &quot;id&quot; - that's a pointer to a structure objc_object
representing an Objective-C object. The closest in SVN Cocoa# is
Cocoa.Object, though not 100% exact, but working within Cocoa#. (I've
introduced a superclass ObjectiveCObject of Cocoa.Object that represents
this type but haven't heard from kangaroo for some weeks now and am
starting to loose my patience...) So for the time being, you should
theoretically be okay returning a Cocoa.Object return value from
Native.NativeToManaged.

For the IB issue you are facing there, there's actually no sensible way
that identifier can return a C string because of the id typing. Maybe
that instance pointer is being overwritten by a string through a fault
somewhere else... As a workaround you could try using setIdentifier to
overwrite IB's values...

When you get an NSString as return value, such as in NSToolbar's
identifier, don't return Cocoa.String directly, instead modify the code
of the latter sample to return &quot;string&quot; by returning Cocoa.String's
ToString() return value. If you use an NSString directly there might be
issues with it not being retained, and it's not really a .NET type
anyway. ;-)

Greetings,

Andreas
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000824.html">[Cocoa-sharp] Re: Something weird...
</A></li>
	<LI>Next message: <A HREF="000826.html">[Cocoa-sharp] Passing Structs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#827">[ date ]</a>
              <a href="thread.html#827">[ thread ]</a>
              <a href="subject.html#827">[ subject ]</a>
              <a href="author.html#827">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/cocoa-sharp">More information about the Cocoa-sharp
mailing list</a><br>
</body></html>
