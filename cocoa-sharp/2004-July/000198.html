<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Cocoa-sharp] gnome script (or half of it)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:adhamh%40apple.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000197.html">
   <LINK REL="Next"  HREF="000199.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cocoa-sharp] gnome script (or half of it)
   </H1>
    <B>Adhamh Findlay
    </B> 
    <A HREF="mailto:adhamh%40apple.com"
       TITLE="[Cocoa-sharp] gnome script (or half of it)">adhamh@apple.com
       </A><BR>
    <I>Thu, 29 Jul 2004 09:02:01 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="000197.html">[Cocoa-sharp] gnome script (or half of it)
</A></li>
        <LI> Next message: <A HREF="000199.html">[Cocoa-sharp] trying again :)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#198">[ date ]</a>
              <a href="thread.html#198">[ thread ]</a>
              <a href="subject.html#198">[ subject ]</a>
              <a href="author.html#198">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'll ask this for Geoff.

Can you resend as an attachment?  :-)

Adhamh
On Jul 29, 2004, at 7:46 AM, Attila Balogh wrote:

&gt;<i> vte needs a patch which is available. i think until popt everything  
</I>&gt;<i> goes well, and also at that one: if you build it by hand with a simple  
</I>&gt;<i> ./configure --prefix=/L/F/G.f/Fs/Popt.fw then it's going ok. in the  
</I>&gt;<i> script somewhere we set something that makes configure recognize  
</I>&gt;<i> intltool, and there's a bug or something there.
</I>&gt;<i>
</I>&gt;<i> libpng also needs some patching, i've done it with an ugly hack, check  
</I>&gt;<i> it please.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #!/bin/sh -x
</I>&gt;<i>
</I>&gt;<i> #Complete rewrite by Adhamh Findlay &lt;<A HREF="mailto:mono@adhamh.com">mono@adhamh.com</A>&gt; 7-14-04
</I>&gt;<i> #now compiles gettext, pkgconfig, icu, glib, and mono into frameworks
</I>&gt;<i> #more extensible so that other projects can be built into frameworks  
</I>&gt;<i> as well.
</I>&gt;<i> #this script can't build from CVS because it uses curl to download  
</I>&gt;<i> releases
</I>&gt;<i> #possible improvements
</I>&gt;<i> #	add function to get source from cvs
</I>&gt;<i> #	add some real functionality to the cleanup function
</I>&gt;<i> #	improve the initial directory creation and add option to remove  
</I>&gt;<i> framework directories
</I>&gt;<i> #		that will force a rebuild of the frameworks
</I>&gt;<i>
</I>&gt;<i> # this horrid little script updates a mono revision
</I>&gt;<i> # Author: Andy Satori &lt;<A HREF="mailto:dru@satori-assoc.com">dru@satori-assoc.com</A>&gt;
</I>&gt;<i> # Modifications: kangaroo
</I>&gt;<i> # Changes June 10/2004
</I>&gt;<i> #  - Updated for beta3 0.96
</I>&gt;<i> # Changes June 2/2004
</I>&gt;<i> #  - Updated for beta2 0.95
</I>&gt;<i> #  - Updated to boehm.gc.a6
</I>&gt;<i> #  - Updated to glib-2.4.1
</I>&gt;<i>
</I>&gt;<i> set -e
</I>&gt;<i>
</I>&gt;<i> BUILDROOT=&quot;/Users/Shared/MonoBuild&quot;
</I>&gt;<i> VERSION=&quot;1.0&quot;
</I>&gt;<i> BASEPREFIX=&quot;/Library/Frameworks&quot;
</I>&gt;<i> PREFIX=&quot;&quot;
</I>&gt;<i> MONOURL=&quot;<A HREF="http://www.go-mono.com/archive/1.0/mono-1.0.tar.gz"">http://www.go-mono.com/archive/1.0/mono-1.0.tar.gz&quot;</A>
</I>&gt;<i> REMOVE=&quot;NO&quot;
</I>&gt;<i> CLEAN=&quot;NO&quot;
</I>&gt;<i> PACKAGE=&quot;NO&quot;
</I>&gt;<i> CONFIGURE=&quot;YES&quot;
</I>&gt;<i>
</I>&gt;<i> usage()
</I>&gt;<i> {
</I>&gt;<i> # 		-p &lt;prefix for builds&gt; #default is  
</I>&gt;<i> /Library/Frameworks/Mono.framework/Versions/\$VERSION
</I>&gt;<i> # 		-v &lt;version of Mono&gt;
</I>&gt;<i> # 		-i &lt;dependencies dir&gt; #location for mono deps
</I>&gt;<i> # 		-m &lt;mono url&gt; #url to use for Mono source
</I>&gt;<i> echo &quot;Proper usage is as follows&quot;
</I>&gt;<i> cat &lt;&lt;EOF
</I>&gt;<i> 	buildNew.sh
</I>&gt;<i> 		-g remove gz files (default no)
</I>&gt;<i> 		-m make clean (default no)
</I>&gt;<i> 		-c run configure (default yes)
</I>&gt;<i> 		-p create packages in $BUILDROOT/MonoBuild
</I>&gt;<i> 		-h this message
</I>&gt;<i> EOF
</I>&gt;<i> exit
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> cleanup()
</I>&gt;<i> {
</I>&gt;<i> 	#Cleans up if the script is interupted.
</I>&gt;<i> 	echo
</I>&gt;<i> 	echo &quot;Interupted cleaning&quot;
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> creatDirs()
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i> 	if [ ! -d &quot;$BUILDROOT/Dependancies&quot; ]; then
</I>&gt;<i> 		mkdir $BUILDROOT/Dependancies
</I>&gt;<i> 	fi
</I>&gt;<i> 	
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> createFramework()
</I>&gt;<i> {	
</I>&gt;<i> 	cd $BASEPREFIX/$1/Versions
</I>&gt;<i> 	if [ -e &quot;$BASEPREFIX/$FRAMEWORKNAME/Versions/Current&quot; ]; then
</I>&gt;<i> 		rm Current
</I>&gt;<i> 	fi
</I>&gt;<i> 	
</I>&gt;<i> 	ln -sf $2 Current
</I>&gt;<i> 	echo &quot;Creating framework links&quot;
</I>&gt;<i> 	cd $BASEPREFIX/$1
</I>&gt;<i> 	if [ $FRAMEWORKNAME != &quot;PkgConfig.framework&quot; ]; then
</I>&gt;<i> 		ln -sf Versions/Current/lib Libraries
</I>&gt;<i> 		ln -sf Versions/Current/include Headers
</I>&gt;<i> 	fi
</I>&gt;<i> 	ln -sf Versions/Current/bin Commands
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> icuSpecificBuild()
</I>&gt;<i> {
</I>&gt;<i>     PREFIX=$1
</I>&gt;<i>
</I>&gt;<i> 	if [ ! -d $BUILDROOT/Dependancies/icu ]; then
</I>&gt;<i> 		echo &quot;Downloading icu-2.8&quot;
</I>&gt;<i> 		curl -s -O $2 $3
</I>&gt;<i> 		gnutar xzf $4
</I>&gt;<i> 	fi
</I>&gt;<i> 	if [ $REMOVE == &quot;YES&quot; ]; then rm $3; fi
</I>&gt;<i>
</I>&gt;<i>     cd icu/source
</I>&gt;<i> 	if [ ! -f ./Makefile ]; then
</I>&gt;<i> 		./runConfigureICU MacOSX --with-data-packaging=library  
</I>&gt;<i> --prefix=$PREFIX --libdir=$PREFIX/lib/
</I>&gt;<i> 	fi
</I>&gt;<i> 	echo $PWD
</I>&gt;<i> 	if [ $CLEAN == &quot;YES&quot; ]; then make clean; fi
</I>&gt;<i>     gnumake
</I>&gt;<i>     make install
</I>&gt;<i>     #make clean
</I>&gt;<i>
</I>&gt;<i>     cd $PREFIX/lib
</I>&gt;<i>
</I>&gt;<i>     # libicudata
</I>&gt;<i>     install_name_tool -id $PREFIX/lib/libicudata.dylib.28  
</I>&gt;<i> libicudata.dylib.28.0
</I>&gt;<i>
</I>&gt;<i>     # libicui18n
</I>&gt;<i>     install_name_tool -id $PREFIX/lib/libicui18n.dylib.28  
</I>&gt;<i> libicui18n.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicuuc.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicuuc.dylib.28 libicui18n.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicudata.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicudata.dylib.28 libicui18n.dylib.28.0
</I>&gt;<i>
</I>&gt;<i>     # libicuio
</I>&gt;<i>     install_name_tool -id $PREFIX/lib/libicuio.dylib.28  
</I>&gt;<i> libicuio.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicuuc.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicuuc.dylib.28 libicuio.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicudata.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicudata.dylib.28 libicuio.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicui18n.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicui18n.dylib.28 libicuio.dylib.28.0
</I>&gt;<i>
</I>&gt;<i>     # libicule
</I>&gt;<i>     install_name_tool -id $PREFIX/lib/libicule.dylib.28  
</I>&gt;<i> libicule.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicuuc.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicuuc.dylib.28 libicule.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicudata.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicudata.dylib.28 libicule.dylib.28.0
</I>&gt;<i>
</I>&gt;<i>     # libiculx
</I>&gt;<i>     install_name_tool -id $PREFIX/lib/libiculx.dylib.28  
</I>&gt;<i> libiculx.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicuuc.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicuuc.dylib.28 libiculx.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicudata.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicudata.dylib.28 libiculx.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicule.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicule.dylib.28 libiculx.dylib.28.0
</I>&gt;<i>
</I>&gt;<i>     # libicutoolutil
</I>&gt;<i>     install_name_tool -id $PREFIX/lib/libicutoolutil.dylib.28  
</I>&gt;<i> libicutoolutil.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicuuc.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicuuc.dylib.28 libicutoolutil.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicudata.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicudata.dylib.28 libicutoolutil.dylib.28.0
</I>&gt;<i>
</I>&gt;<i>     # libicuuc
</I>&gt;<i>     install_name_tool -id $PREFIX/lib/libicuuc.dylib.28  
</I>&gt;<i> libicuuc.dylib.28.0
</I>&gt;<i>     install_name_tool -change libicudata.dylib.28  
</I>&gt;<i> $PREFIX/lib/libicudata.dylib.28 libicuuc.dylib.28.0
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> buildDepNew()
</I>&gt;<i> {
</I>&gt;<i> 	#buildDepNew FRAMEWORKNAME FRAMEWORKVERSION URL TARBALL DIR
</I>&gt;<i> 	#FRAMEWORKNAME = PkgConfig.Framework |  
</I>&gt;<i> Gnome.framework/Framewoks/Glib2.framework
</I>&gt;<i> 	cd $BUILDROOT/Dependancies
</I>&gt;<i> 	FRAMEWORKNAME=$1
</I>&gt;<i> 	FRAMEWORKVERSION=$2
</I>&gt;<i> 	URL=$3
</I>&gt;<i> 	TARBALL=$4
</I>&gt;<i> 	DIR=$5
</I>&gt;<i> 	PREFIX=&quot;$BASEPREFIX/$FRAMEWORKNAME/Versions/$FRAMEWORKVERSION&quot;
</I>&gt;<i>
</I>&gt;<i> 	#sets the build env.
</I>&gt;<i> 	export  
</I>&gt;<i> PATH=$PREFIX/bin:/usr/X11R6/bin:$PATH:/Library/Frameworks/ 
</I>&gt;<i> GetText.framework/Versions/Current/bin/
</I>&gt;<i> 	export ACLOCAL_FLAGS=&quot;-I $PREFIX/share/aclocal/&quot;
</I>&gt;<i> 	export C_INCLUDE_PATH=$C_INCLUDE_PATH:$PREFIX/include
</I>&gt;<i> 	export LDFLAGS=&quot;-L$PREFIX/lib $LDFLAGS&quot;
</I>&gt;<i> 	export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:/usr/X11R6/lib:$PREFIX/lib
</I>&gt;<i> 	export  
</I>&gt;<i> PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/Library/Frameworks/Gnome.framework/ 
</I>&gt;<i> Frameworks/Glib2.framework/Versions/Current/lib/pkgconfig
</I>&gt;<i> 	export  
</I>&gt;<i> PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/Library/Frameworks/Gnome.framework/ 
</I>&gt;<i> Frameworks/Atk.framework/Versions/Current/lib/pkgconfig
</I>&gt;<i> 	export  
</I>&gt;<i> PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/Library/Frameworks/Gnome.framework/ 
</I>&gt;<i> Frameworks/Pango.framework/Versions/Current/lib/pkgconfig
</I>&gt;<i> 	export  
</I>&gt;<i> PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/Library/Frameworks/Gnome.framework/ 
</I>&gt;<i> Frameworks/Gtk2+.framework/Versions/Current/lib/pkgconfig
</I>&gt;<i> 	export  
</I>&gt;<i> PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/Library/Frameworks/Gnome.framework/ 
</I>&gt;<i> Frameworks/LibIDL.framework/Versions/Current/lib/pkgconfig
</I>&gt;<i>
</I>&gt;<i> 	# Check to see if pkg-config is present, needs to be dled, and/or  
</I>&gt;<i> installed
</I>&gt;<i> 	if [ ! -d &quot;$BASEPREFIX/$FRAMEWORKNAME/Versions/$FRAMEWORKVERSION&quot; ];  
</I>&gt;<i> then
</I>&gt;<i> 	
</I>&gt;<i> 		echo &quot;Creating $BASEPREFIX/$FRAMEWORKNAME&quot;
</I>&gt;<i> 		
</I>&gt;<i> 		mkdir -p $PREFIX
</I>&gt;<i> 		mkdir -p $PREFIX/bin
</I>&gt;<i> 		mkdir -p $PREFIX/lib		
</I>&gt;<i> 		mkdir -p $PREFIX/include
</I>&gt;<i> 		mkdir -p $PREFIX/share
</I>&gt;<i> 		mkdir -p $PREFIX/include		
</I>&gt;<i> 		mkdir -p $PREFIX/man/man1
</I>&gt;<i>
</I>&gt;<i> 		if [ $FRAMEWORKNAME = &quot;Mono.framework/Frameworks/Icu.framework&quot; ];  
</I>&gt;<i> then
</I>&gt;<i> 			icuSpecificBuild $PREFIX $URL $TARBALL
</I>&gt;<i> 		else
</I>&gt;<i> 			if [ ! -d $BUILDROOT/Dependancies/$DIR ]; then
</I>&gt;<i> 				echo &quot;Downloading $DIR&quot;
</I>&gt;<i> 				curl -s -O $URL
</I>&gt;<i> 				gnutar xzf $TARBALL
</I>&gt;<i> 			fi
</I>&gt;<i> 			if [ $REMOVE == &quot;YES&quot; ]; then rm $TARBALL; fi
</I>&gt;<i> 			
</I>&gt;<i> 			cd $DIR
</I>&gt;<i> 			echo &quot;Building $FRAMEWORKNAME&quot;
</I>&gt;<i> 			#CLEAN must be YES if the --prefix has changed
</I>&gt;<i> 			if [ $CLEAN == &quot;YES&quot; ]; then
</I>&gt;<i> 				make clean
</I>&gt;<i> 			fi
</I>&gt;<i> 			if [ $CONFIGURE == &quot;YES&quot; ]; then
</I>&gt;<i> 				if [ $FRAMEWORKNAME = &quot;Gnome.framework/Frameworks/Png.framework&quot;  
</I>&gt;<i> ]; then
</I>&gt;<i> 					curl -s -O  
</I>&gt;<i> <A HREF="ftp://swrinde.nde.swri.edu/pub/png/src/libpng-1.2.5-">ftp://swrinde.nde.swri.edu/pub/png/src/libpng-1.2.5-</A> 
</I>&gt;<i> makefile.macosx.tar.gz
</I>&gt;<i> 					gnutar xzf libpng-1.2.5-makefile.macosx.tar.gz
</I>&gt;<i> 					mv makefile.macosx Makefile
</I>&gt;<i> 					sed -e  
</I>&gt;<i> s/\\/usr\\/local/\\\/Library\\/Frameworks\\/Gnome.framework\\/ 
</I>&gt;<i> Frameworks\\/Png.framework/g Makefile &gt; Makefile2
</I>&gt;<i> 					rm Makefile
</I>&gt;<i> 					mv Makefile2 Makefile
</I>&gt;<i> 				else
</I>&gt;<i> 					if [ $FRAMEWORKNAME =  
</I>&gt;<i> &quot;Gnome.framework/Frameworks/Gtk2+.framework&quot; ]; then
</I>&gt;<i> 						./configure --prefix=$PREFIX --without-libjpeg
</I>&gt;<i> 					else
</I>&gt;<i> 						./configure --prefix=$PREFIX
</I>&gt;<i> 					fi
</I>&gt;<i> 				fi
</I>&gt;<i> 			fi
</I>&gt;<i> 			make
</I>&gt;<i> 			make install
</I>&gt;<i> 		fi
</I>&gt;<i> 		createFramework $FRAMEWORKNAME $FRAMEWORKVERSION
</I>&gt;<i> 		cd $BUILDROOT/Dependancies	
</I>&gt;<i> 	fi
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> createPackage()
</I>&gt;<i> {
</I>&gt;<i> 	FRAMEWORKNAME=$1
</I>&gt;<i> 	VERSION=$2
</I>&gt;<i> 	IDENTIFIER=$3
</I>&gt;<i> 	DESCRIPTION=$4
</I>&gt;<i> 	RFILES=&quot;/usr/local/mono/release/macosx/resources&quot;
</I>&gt;<i> 	PM=&quot;/Volumes/Tiger/Developer/Applications/Utilities/PackageMaker.app/ 
</I>&gt;<i> Contents/MacOS/PackageMaker&quot;
</I>&gt;<i> 	
</I>&gt;<i> 	if [ ! -d ${BUILDROOT}/PKGROOT/Library/Frameworks ]; then
</I>&gt;<i> 		mkdir -p ${BUILDROOT}/PKGROOT/Library/Frameworks
</I>&gt;<i> 	fi
</I>&gt;<i> 	if [ ! -d ${BUILDROOT}/${FRAMWORKNAME}/PKGRES/Resources ]; then
</I>&gt;<i> 		mkdir -p ${BUILDROOT}/${FRAMWORKNAME}/PKGRES/Resources
</I>&gt;<i> 	fi
</I>&gt;<i> 	
</I>&gt;<i> 	if [ ! -d  
</I>&gt;<i> ${BUILDROOT}/PKGROOT/Library/Frameworks/${FRAMEWORKNAME}.framework ];  
</I>&gt;<i> then
</I>&gt;<i> 		cp -r /Library/Frameworks/${FRAMEWORKNAME}.framework  
</I>&gt;<i> ${BUILDROOT}/PKGROOT/Library/Frameworks
</I>&gt;<i> 	fi
</I>&gt;<i> 	
</I>&gt;<i> 	cp -r ${RFILES}/* ${BUILDROOT}/${FRAMWORKNAME}/PKGRES/Resources
</I>&gt;<i> 	
</I>&gt;<i> cat &lt;&lt;EOF &gt; ${BUILDROOT}/PKGRES/Info.plist
</I>&gt;<i>         &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
</I>&gt;<i>         &lt;!DOCTYPE plist PUBLIC &quot;-//Apple Computer//DTD PLIST 1.0//EN&quot;  
</I>&gt;<i> &quot;<A HREF="http://www.apple.com/DTDs/PropertyList-1.0.dtd"">http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</A>&gt;
</I>&gt;<i>         &lt;plist version=&quot;1.0&quot;&gt;
</I>&gt;<i>                 &lt;dict&gt;
</I>&gt;<i>                 &lt;key&gt;CFBundleGetInfoString&lt;/key&gt;
</I>&gt;<i>                 &lt;string&gt;${VERSION}&lt;/string&gt;
</I>&gt;<i>                 &lt;key&gt;CFBundleIdentifier&lt;/key&gt;
</I>&gt;<i>                 &lt;string&gt;${IDENTIFIER}&lt;/string&gt;
</I>&gt;<i>                 &lt;key&gt;CFBundleName&lt;/key&gt;
</I>&gt;<i>                 &lt;string&gt;${FRAMEWORKNAME}.framework&lt;/string&gt;
</I>&gt;<i>                 &lt;key&gt;CFBundleShortVersionString&lt;/key&gt;
</I>&gt;<i>                 &lt;string&gt;${VERSION}&lt;/string&gt;
</I>&gt;<i>                 &lt;key&gt;IFMajorVersion&lt;/key&gt;
</I>&gt;<i>                 &lt;integer&gt;0&lt;/integer&gt;
</I>&gt;<i>                 &lt;key&gt;IFMinorVersion&lt;/key&gt;
</I>&gt;<i>                 &lt;integer&gt;0&lt;/integer&gt;
</I>&gt;<i>                 &lt;key&gt;IFPkgFlagAllowBackRev&lt;/key&gt;
</I>&gt;<i>                 &lt;false/&gt;
</I>&gt;<i>                 &lt;key&gt;IFPkgFlagAuthorizationAction&lt;/key&gt;
</I>&gt;<i>                 &lt;string&gt;AdminAuthorization&lt;/string&gt;
</I>&gt;<i>                 &lt;key&gt;IFPkgFlagDefaultLocation&lt;/key&gt;
</I>&gt;<i>                 &lt;string&gt;/&lt;/string&gt;
</I>&gt;<i>                 &lt;key&gt;IFPkgFlagInstallFat&lt;/key&gt;
</I>&gt;<i>                 &lt;false/&gt;
</I>&gt;<i>                 &lt;key&gt;IFPkgFlagIsRequired&lt;/key&gt;
</I>&gt;<i>                 &lt;false/&gt;
</I>&gt;<i>                 &lt;key&gt;IFPkgFlagRelocatable&lt;/key&gt;
</I>&gt;<i>                 &lt;false/&gt;
</I>&gt;<i>                 &lt;key&gt;IFPkgFlagRestartAction&lt;/key&gt;
</I>&gt;<i>                 &lt;string&gt;NoRestart&lt;/string&gt;
</I>&gt;<i>                 &lt;key&gt;IFPkgFlagRootVolumeOnly&lt;/key&gt;
</I>&gt;<i>                 &lt;true/&gt;
</I>&gt;<i>                 &lt;key&gt;IFPkgFlagUpdateInstalledLanguages&lt;/key&gt;
</I>&gt;<i>                 &lt;false/&gt;
</I>&gt;<i>                 &lt;key&gt;IFPkgFormatVersion&lt;/key&gt;
</I>&gt;<i>                 &lt;real&gt;0.10000000149011612&lt;/real&gt;
</I>&gt;<i>                 &lt;/dict&gt;
</I>&gt;<i>         &lt;/plist&gt;
</I>&gt;<i> EOF
</I>&gt;<i>
</I>&gt;<i> cat &lt;&lt;EOF &gt; ${BUILDROOT}/PKGRES/Description.plist
</I>&gt;<i> 	&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
</I>&gt;<i> 	&lt;!DOCTYPE plist PUBLIC &quot;-//Apple Computer//DTD PLIST 1.0//EN&quot;  
</I>&gt;<i> &quot;<A HREF="http://www.apple.com/DTDs/PropertyList-1.0.dtd"">http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</A>&gt;
</I>&gt;<i> 	&lt;plist version=&quot;1.0&quot;&gt;
</I>&gt;<i> 	&lt;dict&gt;
</I>&gt;<i> 			&lt;key&gt;IFPkgDescriptionDeleteWarning&lt;/key&gt;
</I>&gt;<i> 			&lt;string&gt;&lt;/string&gt;
</I>&gt;<i> 			&lt;key&gt;IFPkgDescriptionDescription&lt;/key&gt;
</I>&gt;<i> 			&lt;string&gt;${DESCRIPTION}&lt;/string&gt;
</I>&gt;<i> 			&lt;key&gt;IFPkgDescriptionTitle&lt;/key&gt;
</I>&gt;<i> 			&lt;string&gt;${FRAMEWORKNAME} Framework&lt;/string&gt;
</I>&gt;<i> 			&lt;key&gt;IFPkgDescriptionVersion&lt;/key&gt;
</I>&gt;<i> 			&lt;string&gt;${VERSION}&lt;/string&gt;
</I>&gt;<i> 	&lt;/dict&gt;
</I>&gt;<i> 	&lt;/plist&gt;
</I>&gt;<i> EOF
</I>&gt;<i>
</I>&gt;<i> 	if [ ! -d ${BUILDROOT}/${FRAMEWORKNAME}-${VERSION}.pkg ]; then
</I>&gt;<i>     	${PM} -build -p ${BUILDROOT}/${FRAMEWORKNAME}-${VERSION}.pkg -f  
</I>&gt;<i> ${BUILDROOT}/PKGROOT -r ${BUILDROOT}/PKGRES/Resources -i  
</I>&gt;<i> ${BUILDROOT}/PKGRES/Info.plist -d  
</I>&gt;<i> ${BUILDROOT}/PKGRES/Description.plist
</I>&gt;<i> 	fi
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> trap cleanup 2
</I>&gt;<i>
</I>&gt;<i> #get the options passed in on the command line.  doing this instead
</I>&gt;<i> #of a case because these are optional args.
</I>&gt;<i> while getopts hvpimcg option
</I>&gt;<i> 	do
</I>&gt;<i> # 		if [ $option == &quot;v&quot; ]; then
</I>&gt;<i> # 			VERSION=$OPTARG	
</I>&gt;<i> # 		fi
</I>&gt;<i> # 		if [ $option == &quot;p&quot; ]; then
</I>&gt;<i> # 			PREFIX=$OPTARG	
</I>&gt;<i> # 		fi
</I>&gt;<i> # 		if [ $option == &quot;i&quot; ]; then
</I>&gt;<i> # 			DEPSDIR=$OPTARG	
</I>&gt;<i> # 		fi
</I>&gt;<i>  		if [ $option == &quot;m&quot; ]; then
</I>&gt;<i>  			CLEAN=&quot;YES&quot;	
</I>&gt;<i>  		fi
</I>&gt;<i> 		if [ $option == &quot;c&quot; ]; then
</I>&gt;<i> 			CONFIGURE=&quot;YES&quot;	
</I>&gt;<i> 		fi
</I>&gt;<i> 		if [ $option == &quot;g&quot; ]; then
</I>&gt;<i> 			REMOVE=&quot;YES&quot;	
</I>&gt;<i> 		fi
</I>&gt;<i> 		if [ $option == &quot;h&quot; ]; then
</I>&gt;<i> 			usage
</I>&gt;<i> 		fi
</I>&gt;<i> 		if [ $option == &quot;p&quot; ]; then
</I>&gt;<i> 			PACKAGE=&quot;YES&quot;	
</I>&gt;<i> 		fi
</I>&gt;<i> done
</I>&gt;<i>
</I>&gt;<i> export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/X11R6/lib/pkgconfig
</I>&gt;<i>
</I>&gt;<i> creatDirs
</I>&gt;<i>
</I>&gt;<i> #Build the /Library/Frameworks/PkgConfig.framework
</I>&gt;<i> buildDepNew PkgConfig.framework 0.15 \
</I>&gt;<i> 	<A HREF="http://www.freedesktop.org/software/pkgconfig/releases/pkgconfig">http://www.freedesktop.org/software/pkgconfig/releases/pkgconfig</A> 
</I>&gt;<i> -0.15.0.tar.gz \
</I>&gt;<i> 	pkgconfig-0.15.0.tar.gz pkgconfig-0.15.0
</I>&gt;<i> #Build the /Library/Frameworks/GetText.framework
</I>&gt;<i> buildDepNew GetText.framework 0.14.1 \
</I>&gt;<i> 	<A HREF="http://ftp.gnu.org/pub/gnu/gettext/gettext-0.14.1.tar.gz">http://ftp.gnu.org/pub/gnu/gettext/gettext-0.14.1.tar.gz</A> \
</I>&gt;<i> 	gettext-0.14.1.tar.gz gettext-0.14.1
</I>&gt;<i> #Build the  
</I>&gt;<i> /Library/Frameworks/Gnome.framework/Frameworks/Glib2.framework
</I>&gt;<i> #this is don to provide a means to add more Gnome code later
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/Glib2.framework 2.4.1 \
</I>&gt;<i> 	<A HREF="ftp://ftp.gtk.org/pub/gtk/v2.4/glib-2.4.1.tar.gz">ftp://ftp.gtk.org/pub/gtk/v2.4/glib-2.4.1.tar.gz</A> \
</I>&gt;<i> 	glib-2.4.1.tar.gz glib-2.4.1
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/Atk.framework 1.4.1 \
</I>&gt;<i> 	<A HREF="ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/atk">ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/atk</A> 
</I>&gt;<i> -1.4.1.tar.gz \
</I>&gt;<i> 	atk-1.4.1.tar.gz atk-1.4.1
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/Pango.framework 1.2.5 \
</I>&gt;<i> 	<A HREF="ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/pango">ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/pango</A> 
</I>&gt;<i> -1.2.5.tar.gz \
</I>&gt;<i> 	pango-1.2.5.tar.gz pango-1.2.5
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/Intltool.framework 0.30.0 \
</I>&gt;<i> 	<A HREF="ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/intltool">ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/intltool</A> 
</I>&gt;<i> -0.30.tar.gz \
</I>&gt;<i> 	intltool-0.30.tar.gz intltool-0.30
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/Jpeg.framework 6.0 \
</I>&gt;<i> 	<A HREF="http://www.xfig.org/jpeg/jpegsrc.v6b.tar.gz">http://www.xfig.org/jpeg/jpegsrc.v6b.tar.gz</A> \
</I>&gt;<i> 	jpegsrc.v6b.tar.gz jpeg-6b
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/Tiff.framework 3.6.1 \
</I>&gt;<i> 	<A HREF="http://dl1.maptools.org/dl/libtiff/tiff-v3.6.1.tar.gz">http://dl1.maptools.org/dl/libtiff/tiff-v3.6.1.tar.gz</A> \
</I>&gt;<i> 	tiff-v3.6.1.tar.gz tiff-v3.6.1
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/Png.framework 1.2.4 \
</I>&gt;<i>  	<A HREF="ftp://swrinde.nde.swri.edu/pub/png/src/libpng-1.2.5.tar.gz">ftp://swrinde.nde.swri.edu/pub/png/src/libpng-1.2.5.tar.gz</A> \
</I>&gt;<i> 	libpng-1.2.5.tar.gz libpng-1.2.5
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/Gtk2+.framework 2.2.4 \
</I>&gt;<i> 	<A HREF="ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/gtk+">ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/gtk+</A> 
</I>&gt;<i> -2.2.4.tar.gz \
</I>&gt;<i> 	gtk+-2.2.4.tar.gz gtk+-2.2.4
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/Libart_lgpl.framework 2.3.16 \
</I>&gt;<i> 	<A HREF="ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/libart_lgpl">ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/libart_lgpl</A> 
</I>&gt;<i> -2.3.16.tar.gz \
</I>&gt;<i> 	libart_lgpl-2.3.16.tar.gz libart_lgpl-2.3.16
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/LibIDL.framework 0.8.3 \
</I>&gt;<i> 	<A HREF="ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/libIDL">ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/libIDL</A> 
</I>&gt;<i> -0.8.3.tar.gz \
</I>&gt;<i> 	libIDL-0.8.3.tar.gz libIDL-0.8.3
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/Popt.framework 1.7 \
</I>&gt;<i> 	<A HREF="ftp://ftp.rpm.org/pub/rpm/dist/rpm-4.1.x/popt-1.7.tar.gz">ftp://ftp.rpm.org/pub/rpm/dist/rpm-4.1.x/popt-1.7.tar.gz</A> \
</I>&gt;<i> 	popt-1.7.tar.gz popt-1.7
</I>&gt;<i>
</I>&gt;<i> buildDepNew Gnome.framework/Frameworks/ORBit2.framework 2.11.1 \
</I>&gt;<i> 	<A HREF="ftp://ftp.gnome.org/pub/gnome/sources/ORBit2/2.11/ORBit2">ftp://ftp.gnome.org/pub/gnome/sources/ORBit2/2.11/ORBit2</A> 
</I>&gt;<i> -2.11.1.tar.gz \
</I>&gt;<i> 	ORBit2-2.11.1.tar.gz ORBit2-2.11.1
</I>&gt;<i>
</I>&gt;<i> #buildDepNew Gnome.framework/Frameworks/Vte.framework 0.11.10 \
</I>&gt;<i> #	<A HREF="ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/vte">ftp://ftp.gnome.org/pub/GNOME/desktop/2.4/2.4.2/sources/vte</A> 
</I>&gt;<i> -0.11.10.tar.gz \
</I>&gt;<i> #	vte-0.11.10.tar.gz vte-0.11.10
</I>&gt;<i>
</I>&gt;<i> #Build the /Library/Frameworks/Mono.framwork/Frameworks/Icu.framework
</I>&gt;<i> #icu is only used by mono so it should be placed inside the mono  
</I>&gt;<i> framework
</I>&gt;<i>
</I>&gt;<i> buildDepNew Icu.framework 2.8 \
</I>&gt;<i> 	&quot;--disable-epsv <A HREF="ftp://www-126.ibm.com/pub/icu/2.8/icu-2.8.tgz"">ftp://www-126.ibm.com/pub/icu/2.8/icu-2.8.tgz&quot;</A> \
</I>&gt;<i> 	icu-2.8.tgz icu
</I>&gt;<i>
</I>&gt;<i> buildDepNew Mono.framework 1.0 \
</I>&gt;<i> 	<A HREF="http://www.go-mono.com/archive/1.0/mono-1.0.tar.gz">http://www.go-mono.com/archive/1.0/mono-1.0.tar.gz</A> \
</I>&gt;<i> 	mono-1.0.tar.gz mono-1.0
</I>&gt;<i>
</I>&gt;<i> echo &quot;build completed&quot;
</I>&gt;<i>
</I>&gt;<i> if [ $PACKAGE == &quot;YES&quot; ]; then
</I>&gt;<i> 	echo &quot;starting packaging&quot;
</I>&gt;<i> 	createPackage PkgConfig 0.15 org.freedesktop.pkgconfig &quot;PkgConfig  
</I>&gt;<i> Framework 0.15&quot;
</I>&gt;<i> 	createPackage GetText 0.14.1 org.gnu.gettext &quot;GetText Framework  
</I>&gt;<i> 0.14.1&quot;
</I>&gt;<i> 	createPackage Gnome 0.1 org.gnome &quot;Gnome Framework 0.1&quot;
</I>&gt;<i> 	createPackage Mono 1.0 com.ximian.mono &quot;Mono Framework 1.0&quot;
</I>&gt;<i> fi
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000197.html">[Cocoa-sharp] gnome script (or half of it)
</A></li>
	<LI> Next message: <A HREF="000199.html">[Cocoa-sharp] trying again :)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#198">[ date ]</a>
              <a href="thread.html#198">[ thread ]</a>
              <a href="subject.html#198">[ subject ]</a>
              <a href="author.html#198">[ author ]</a>
         </LI>
       </UL>
</body></html>
