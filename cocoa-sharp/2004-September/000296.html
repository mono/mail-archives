<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Cocoa-sharp] FW: [Mono-winforms-list] Does X11 support imply Mac OSX support?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:umuff%40QUARK.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000295.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cocoa-sharp] FW: [Mono-winforms-list] Does X11 support imply Mac OSX support?
   </H1>
    <B>Urs Muff
    </B> 
    <A HREF="mailto:umuff%40QUARK.com"
       TITLE="[Cocoa-sharp] FW: [Mono-winforms-list] Does X11 support imply Mac OSX support?">umuff@QUARK.com
       </A><BR>
    <I>Fri, 24 Sep 2004 06:40:12 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="000295.html">[Cocoa-sharp] Alternate build scripts
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#296">[ date ]</a>
              <a href="thread.html#296">[ thread ]</a>
              <a href="subject.html#296">[ subject ]</a>
              <a href="author.html#296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We might want to include Cario in the future pkgs.

- URS C. MUFF
SOFTWARE ARCHITECT		- RESEARCH LAB, QUARK EIF
QUARK INC.
<A HREF="mailto:UMUFF@QUARK.COM">UMUFF@QUARK.COM</A>=A0=A0=A0=A0	- X6360
+1 (303) 894 3360
CONFIDENTIALITY NOTICE
This e-mail transmission and any documents, files, or previous e-mail
messages appended or attached to it, may contain information that is
confidential or legally privileged. If you are not the intended =
recipient,
or a person responsible for delivering it to the intended recipient, =
you are
hereby notified that you must not read this transmission and that any
disclosure, copying, printing, distribution, or use of the information
contained or attached to this transmission is STRICTLY PROHIBITED. If =
you
have received this transmission in error, please immediately notify the
sender by telephone +1 (303) 894-3360 or return e-mail message
<A HREF="mailto:umuff@quark.com">umuff@quark.com</A> and delete the original transmission, its attachments, =
and
any copies without reading or saving in any manner. Thank you.


-----Original Message-----
From: <A HREF="mailto:mono-winforms-list-admin@lists.ximian.com">mono-winforms-list-admin@lists.ximian.com</A>
[mailto:<A HREF="mailto:mono-winforms-list-admin@lists.ximian.com">mono-winforms-list-admin@lists.ximian.com</A>] On Behalf Of Baker, =
GJ
(Gareth)
Sent: Friday, September 24, 2004 4:36 AM
To: Mono-Winforms-List (E-mail)
Subject: RE: [Mono-winforms-list] Does X11 support imply Mac OSX =
support?

Perhaps I should share my experiences with trying to get the Managed =
Windows
Forms running under X11 on Mac OSX....

There are a number of hurdles I had to clear just to get an X11 window =
up
(and there is still and exeption being thrown).

1) As Peter suggests I had to add a couple of lines to the 'config' =
file in
&lt;prefix&gt;/etc/mono:
        &lt;dllmap dll=3D&quot;libX11.so&quot; =
target=3D&quot;/usr/X11R6/lib/libX11.dylib&quot;/&gt;
        &lt;dllmap dll=3D&quot;MonoPosixHelper&quot;
target=3D&quot;/Library/Frameworks/Mono.framework/Versions/Current/lib/libMon=
oPosix
Helper.dylib&quot;/&gt;
note that I had to use the full path. I can't seem to find the right
environment variable (DYLIB_LIBRARY_PATH is set).

2) The 1.1.1 package for OSX does not include the libraries requied to =
get
Cairo and libgdiplus installed, so you need to install things like =
libpng,
freetype, fontconfig, expat (&amp; lingif, libtiff, libjpeg if you want =
full
graphics support) and then cairo and libgdiplus.

3) Finally I had to hack a file in libgdiplus to get it to compile.The =
file
gdip_win32.h contains:

#ifdef __GNUC__
#  define __stdcall __attribute__((__stdcall__))
#else
#  define __stdcall=20
#endif
I had to reduce this to:
#  define __stdcall=20
to get it to compile (something to do with __stdcall__ on OSX).

As I said, up to this point I can get an X11 window to appear but =
trying to
draw a string in it throws an exception:

Exception 'An exception was thrown by the type initializer for
System.Drawing.GDIPlus
         at System.Object..ctor ()
         at System.Drawing.Graphics.FromHwnd ()
         at System.Drawing.Graphics.FromHwnd ()
         at System.Windows.Forms.XplatUIX11.PaintEventStart ()
         at System.Windows.Forms.XplatUI.PaintEventStart ()
         at System.Windows.Forms.Control.WndProc ()
         at System.Windows.Forms.ScrollableControl.WndProc ()
         at System.Windows.Forms.ContainerControl.WndProc ()
         at System.Windows.Forms.Form.WndProc ()
         at System.Windows.Forms.Control+ControlNativeWindow.WndProc ()
         at System.Windows.Forms.NativeWindow.WndProc ()'
An exception was thrown by the type initializer for =
System.Drawing.GDIPlus
         at System.Object..ctor ()
         at System.Drawing.Graphics.FromHwnd ()
         at System.Drawing.Graphics.FromHwnd ()
         at System.Windows.Forms.XplatUIX11.PaintEventStart ()
         at System.Windows.Forms.XplatUI.PaintEventStart ()
         at System.Windows.Fo!
 rms.Control.WndProc ()
         at System.Windows.Forms.ScrollableControl.WndProc ()
         at System.Windows.Forms.ContainerControl.WndProc ()
         at System.Windows.Forms.Form.WndProc ()
         at System.Windows.Forms.Control+ControlNativeWindow.WndProc ()
         at System.Windows.Forms.NativeWindow.WndProc ()
Hope this is of some help. If I get any further I'll post the results.

Regards
Gareth Baker

&gt;<i> ----------
</I>&gt;<i> From: 	Peter Dennis Bartok
</I>&gt;<i> Sent: 	Wednesday, September 22, 2004 11:41 PM
</I>&gt;<i> To: 	<A HREF="mailto:mono-winforms-list@lists.ximian.com">mono-winforms-list@lists.ximian.com</A>
</I>&gt;<i> Subject: 	Re: [Mono-winforms-list] Does X11 support imply Mac OSX
</I>&gt;<i> support?
</I>&gt;<i>=20
</I>&gt;<i> I'll quote from my status update:
</I>&gt;<i>=20
</I>&gt;<i> &quot;The X11 driver has only been used/tested on Linux, due to lack of =
</I>time
&gt;<i> and
</I>&gt;<i> resources we haven't done anything on Solaris or Mac yet, maybe =
</I>someone
&gt;<i> who
</I>&gt;<i> reads this will feel compelled to volunteer :-)&quot;
</I>&gt;<i>=20
</I>&gt;<i> In other words - we're not working on Mac support, due to lack of =
</I>time and
&gt;<i> resources. I looked into it a bit, but I just can't find the time. If =
</I>you
&gt;<i> would like to volunteer, I will be delighted as I would love to have =
</I>Mac
&gt;<i> support. As for how to implement it, via X11 or natively, that is up =
</I>to
&gt;<i> the
</I>&gt;<i> implementor. AFAIK, it should be possible to run SWF as is on the Mac
</I>&gt;<i> today,
</I>&gt;<i> assuming that the DLL mapping tables are set up properly. (I remember
</I>&gt;<i> hearing/reading something about needing translation from .so to =
</I>.dylib or
&gt;<i> so)
</I>&gt;<i>=20
</I>&gt;<i> Hope this helps clarify things
</I>&gt;<i>=20
</I>&gt;<i> Cheers,
</I>&gt;<i>   Peter
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: &quot;Paul Murphy&quot; &lt;<A HREF="mailto:pmurphy@dimensional.com">pmurphy@dimensional.com</A>&gt;
</I>&gt;<i> To: &lt;<A HREF="mailto:mono-winforms-list@lists.ximian.com">mono-winforms-list@lists.ximian.com</A>&gt;
</I>&gt;<i> Date: 22 September, 2004 16:28
</I>&gt;<i> Subject: [Mono-winforms-list] Does X11 support imply Mac OSX support?
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>&gt;<i> &gt;Hello,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I see that SWF currently has drivers for Win32 and X11.  I also see =
</I>in
&gt;<i> &gt;the latest status update that Mac OSX is something that is on the =
</I>&quot;to
&gt;<i> &gt;do&quot; list.  Does this mean that native OSX support is on the todo =
</I>list,
&gt;<i> &gt;or does it mean that X11 on Mac is on the todo list?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Thanks,
</I>&gt;<i> &gt;Paul
</I>&gt;<i> &gt;_______________________________________________
</I>&gt;<i> &gt;Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
</I>&gt;<i> &gt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>=20
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>_______________________________________________
Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000295.html">[Cocoa-sharp] Alternate build scripts
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#296">[ date ]</a>
              <a href="thread.html#296">[ thread ]</a>
              <a href="subject.html#296">[ subject ]</a>
              <a href="author.html#296">[ author ]</a>
         </LI>
       </UL>
</body></html>
