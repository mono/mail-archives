<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Fwd: Re: [Cocoa-sharp] How does the bridge work]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cocoa-sharp%40lists.ximian.com?Subject=%5BFwd%3A%20Re%3A%20%5BCocoa-sharp%5D%20How%20does%20the%20bridge%20work%5D&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000615.html">
   <LINK REL="Next"  HREF="000613.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Fwd: Re: [Cocoa-sharp] How does the bridge work]</H1>
    <B>Urs C Muff</B> 
    <A HREF="mailto:cocoa-sharp%40lists.ximian.com?Subject=%5BFwd%3A%20Re%3A%20%5BCocoa-sharp%5D%20How%20does%20the%20bridge%20work%5D&In-Reply-To="
       TITLE="[Fwd: Re: [Cocoa-sharp] How does the bridge work]">umuff71 at email.com
       </A><BR>
    <I>Tue Aug 16 10:41:56 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000615.html">[Cocoa-sharp] Debug output?
</A></li>
        <LI>Next message: <A HREF="000613.html">[Cocoa-sharp] NSArray Initialization ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#612">[ date ]</a>
              <a href="thread.html#612">[ thread ]</a>
              <a href="subject.html#612">[ subject ]</a>
              <a href="author.html#612">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Timothy Mowlem wrote:

&gt;<i> Hello kangaroo, Andreas,
</I>&gt;<i>
</I>&gt;<i> I found the Cocoa.Foundation.dll and Cocoa.AppKit.dll assemblies  
</I>&gt;<i> mentioned by Andreas but I could not look inside them since the  
</I>&gt;<i> version of Mono 1.1.8.1 from the Go-Mono website does not contain the  
</I>&gt;<i> ildasm disassembler?
</I>&gt;<i>
</I>&gt;<i> Okay so the generator creates C# code equivalent to all of the Cocoa  
</I>&gt;<i> classes (presumably on a 1 for 1 basis where possible?). So:
</I>&gt;<i>
</I>&gt;<i> (1) Is the generator a standalone tool written by yourselves, or a  
</I>&gt;<i> Perl script or something?
</I>
It is a standalone C# tool, written by Kangaroo and myself.

&gt;<i> (2) Does it walk through the Cocoa framework and generate C# source  
</I>&gt;<i> which corresponds to the Objective-C code?
</I>
It parses Objective-C header files + mach-o binaries to extract classes, 
members, and methods, and is producing C# code.  We also can overwrite 
the generation of certain types with .override and .addin files.  We are 
not generating C# code for struct's and not perfect C# code for 
enumerations.  That's why we need .addin and .override.

&gt;<i> (3) Is there some glue to handle mono runtime/Cocoa runtime  
</I>&gt;<i> interactions?
</I>
There is some minimal glue that registers a Objective-C class and 
Objective-C methods for all exported/bound classes written by the user.  
The Objective-C runtime is calling into the glue which will forward the 
call to the Mono runtime, which will decide if the requested function is 
implemented in .Net.  If so it will return the correct signature so that 
the Objective-C runtime can forward the call, which calls the glue which 
will forward that to the Mono runtime to execute.

You can find that code in glue.m.  Have a look @ the source and it 
should be pretty self explanatory.

Regards,

- Urs

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Tim Mowlem
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Just to clarify; the generator actually generates C# code; not CIL
</I>&gt;&gt;<i> thru SRE.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -kangaroo
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 13-Aug-05, at 1:14 PM, Andreas F&#228;rber wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hello Tim,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> (on my system I did successfully build Hello.exe but Mono crashed
</I>&gt;&gt;&gt;&gt;<i> when I try to run it).
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This can happen when you run &quot;mono Hello.exe&quot; and it doesn't find
</I>&gt;&gt;&gt;<i> libCocoaSharpGlue.dylib. Did you use the macpack utility as
</I>&gt;&gt;&gt;<i> outlined in the CocoaSharp.org Wiki?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I did look at the source tree via the web interface but did not
</I>&gt;&gt;&gt;&gt;<i> find  a large collection of C# classes mapping NS classes.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Don't know about the repository, but there are lots of NS* CLR
</I>&gt;&gt;&gt;<i> classes in the Apple.Foundation.dll and Apple.AppKit.dll assemblies
</I>&gt;&gt;&gt;<i> installed as part of Mono.
</I>&gt;&gt;&gt;<i> As the CIL bytecode is independent of the C# programming language,
</I>&gt;&gt;&gt;<i> the classes can just as well be generated using
</I>&gt;&gt;&gt;<i> System.Reflection.Emit or any tool that outputs CIL. Overhearing
</I>&gt;&gt;&gt;<i> some of the more technical discussions here it appears the so-
</I>&gt;&gt;&gt;<i> called &quot;generator&quot; does this.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> HTH,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Andreas F&#228;rber
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Cocoa-sharp mailing list
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/cocoa-sharp">Cocoa-sharp at lists.ximian.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/cocoa-sharp">http://lists.ximian.com/mailman/listinfo/cocoa-sharp</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> !DSPAM:42fe2a9c43911332362160!
</I>&gt;&gt;&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Cocoa-sharp mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/cocoa-sharp">Cocoa-sharp at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/cocoa-sharp">http://lists.ximian.com/mailman/listinfo/cocoa-sharp</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
-- 
Urs C Muff

MindTouch
413 Wacouta St. #250
St. Paul, MN 55101

651.793.0010 office
651.793.0011 fax
303.412.7778 direct
www.mindtouch.com




</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000615.html">[Cocoa-sharp] Debug output?
</A></li>
	<LI>Next message: <A HREF="000613.html">[Cocoa-sharp] NSArray Initialization ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#612">[ date ]</a>
              <a href="thread.html#612">[ thread ]</a>
              <a href="subject.html#612">[ subject ]</a>
              <a href="author.html#612">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/cocoa-sharp">More information about the Cocoa-sharp
mailing list</a><br>
</body></html>
