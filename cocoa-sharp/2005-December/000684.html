<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Cocoa-sharp] doc generation, action property and stack traces
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cocoa-sharp%40lists.ximian.com?Subject=%5BCocoa-sharp%5D%20doc%20generation%2C%20action%20property%20and%20stack%20traces&In-Reply-To=439E9B04.7030907%40web.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000681.html">
   <LINK REL="Next"  HREF="000688.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cocoa-sharp] doc generation, action property and stack traces</H1>
    <B>kangaroo</B> 
    <A HREF="mailto:cocoa-sharp%40lists.ximian.com?Subject=%5BCocoa-sharp%5D%20doc%20generation%2C%20action%20property%20and%20stack%20traces&In-Reply-To=439E9B04.7030907%40web.de"
       TITLE="[Cocoa-sharp] doc generation, action property and stack traces">grompf at sublimeintervention.com
       </A><BR>
    <I>Tue Dec 13 11:31:36 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000681.html">[Cocoa-sharp] doc generation, action property and stack traces
</A></li>
        <LI>Next message: <A HREF="000688.html">[Cocoa-sharp] doc generation, action property and stack traces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#684">[ date ]</a>
              <a href="thread.html#684">[ thread ]</a>
              <a href="subject.html#684">[ subject ]</a>
              <a href="author.html#684">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 13-Dec-05, at 4:57 AM, Andreas F&#228;rber wrote:

&gt;<i> Hi kangaroo,
</I>&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     2.5. (Not applicable in this case) Dont forget documentation!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Do I have to write those XML files by hand? Or are they  
</I>&gt;&gt;&gt;<i> generated  somehow?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> No take a look at the Makefile target in docs; there is a target   
</I>&gt;&gt;<i> (update I think) that will generate stubs for you to edit.
</I>&gt;<i>
</I>&gt;<i> I've looked and did find a target update.
</I>&gt;<i> Unfortunately it fails: It creates a subdirectory lib within doc  
</I>&gt;<i> and tries to cp ../*/*.dll to lib, which does not work because  
</I>&gt;<i> cocoa-sharp.dll is in src/Cocoa/ and not just src/? Shall I patch  
</I>&gt;<i> this to cp ../*/*/*.dll or am I doing something wrong?
</I>
Run
mono /Library/Frameworks/Mono.framework/Versions/Current/lib/monodoc/ 
monodocer.exe -assembly:../src/Cocoa/cocoa-sharp.dll -assembly:../src/ 
WebKit/webkit-sharp.dll -path:. -name:&quot;Cocoa#&quot;

from inside the &quot;doc&quot; directory and it'll generate the stubs. (Note;  
you need &quot;monodoc&quot; from SVN installed)

&gt;<i>
</I>&gt;<i> Next question: How do I actually view these XML files I am supposed  
</I>&gt;<i> to edit? Do I have to checkout the Cocoa# monodoc viewer from  
</I>&gt;<i> another branch or directory?
</I>&gt;<i>
</I>
I use vi to edit them; once you install &quot;monodoc&quot; from SVN and  
reautogen cocoa#; CocoaDoc will build in samples and you'll be able  
to view your output.

&gt;<i> Another question: When I add files to Makefile.am do I have to re- 
</I>&gt;<i> run autogen.sh or is it safe to just run automake --add-missing in  
</I>&gt;<i> src/Cocoa/? autogen.sh takes a relatively long time on my G3 300MHz!
</I>&gt;<i>
</I>
Depending on the depth of your change this should be safe 95% of the  
time.

&gt;&gt;<i> Everything will be events;
</I>&gt;<i>
</I>&gt;<i> That is good news, I really welcome that and will support that to  
</I>&gt;<i> my abilities.
</I>&gt;<i>
</I>&gt;&gt;<i> any patch with .Action will not be  accepted.
</I>&gt;<i>
</I>&gt;<i> I strongly propose to make it available nontheless as either  
</I>&gt;<i> private or protected (or protected internal) to facilitate creating  
</I>&gt;<i> exactly this event handling which is still missing. Won't we have  
</I>&gt;<i> to set this property to a local method to receive the action event  
</I>&gt;<i> and dispatch it to the registered event handlers? Then we could use  
</I>&gt;<i> such a thing.
</I>

I'm still thinking about this (a policy / objc# ish version or build  
flag) but as it stands I currently want the API as .NET-esque as  
possible until I hear a compelling argument as to why it shouldn't.   
95% of the developer consumers of cocoa# are going to be .NET devs;  
not ObjC devs.

&gt;<i> The double action stuff seems to do this a little different or  
</I>&gt;<i> doesn't it? I don't really understand how that code is supposed to  
</I>&gt;<i> be working, I can only guess it is. It talks about a TODO of  
</I>&gt;<i> removing registered handlers but I don't see handlers being  
</I>&gt;<i> registered in the add at all, and all that's being done is clearing  
</I>&gt;<i> the double action in the remove! That's not how .NET events usually  
</I>&gt;<i> work, that's more J2ME-style with one exclusive listener. And why  
</I>&gt;<i> are you using ActionHandler instead of EventHandler with  
</I>&gt;<i> EventArgs.Empty which .NET libraries are supposed to use by  
</I>&gt;<i> convention?
</I>&gt;<i>
</I>
You're somewhat confused; in the add event the Target of the delegate  
is set on the Target = target; line and the selector is set on the  
following line.  Yes currently we have a 1:1 event-&gt;listener  
relationship.  This will be fixed in the future by dynamically  
generating a stub handler for each instance which will contain all  
the listeners and fire them in order; but this isn't done yet.

&gt;<i> If we used gmcs instead of mcs we might even be able to make the  
</I>&gt;<i> Action getter public (to allow reading of property for objects  
</I>&gt;<i> created outside Cocoa#) and the setter somehow inaccessible for the  
</I>&gt;<i> public?
</I>&gt;<i>
</I>
I'm not willing to require a .NET 2.0 on the entire build system at  
this time.

&gt;&gt;<i> You'll have toe xamine the stack trace and figure out whats going   
</I>&gt;&gt;<i> wrong.
</I>&gt;<i>
</I>&gt;<i> I always have to! :-)
</I>&gt;<i> Of course I examined it - but apart from seeing my property and the  
</I>&gt;<i> method I called from there (objc_msgSend) it is not very meaningful  
</I>&gt;<i> to me and I don't know Objective C.
</I>&gt;<i> From reading the code I thought that -(void)setDataSource:(id) 
</I>&gt;<i> anObject would map to ObjCMessaging.objc_sendMsg(NativeObject,  
</I>&gt;<i> &quot;setDataSource:&quot;, typeof(void), typeof(IntPtr),  
</I>&gt;<i> value.NativeObject); For most other code this appears to be the  
</I>&gt;<i> mapping. Except for one property (Window.Frame.set) which was  
</I>&gt;<i> documented at Apple as returning void but is used with a return  
</I>&gt;<i> type of IntPtr in Cocoa#. I desperately tried this too for  
</I>&gt;<i> setDataSource, but no change.
</I>
As I said in the previous mail; send me a small atomicized testcase.

&gt;<i>
</I>&gt;<i> BTW the Cocoa# debug info looks a little garbled on my German  
</I>&gt;<i> machine: Yesterday the Mach exception handling thing reported an  
</I>&gt;<i> apparent &quot;date&quot; of 2005-52-12 and the time(?) was neither the  
</I>&gt;<i> runtime nor the local time nor UTC time.
</I>&gt;<i>
</I>
interesting I believe its printing a DateTime.Now so it might be a  
mono bug.

-kangaroo

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000681.html">[Cocoa-sharp] doc generation, action property and stack traces
</A></li>
	<LI>Next message: <A HREF="000688.html">[Cocoa-sharp] doc generation, action property and stack traces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#684">[ date ]</a>
              <a href="thread.html#684">[ thread ]</a>
              <a href="subject.html#684">[ subject ]</a>
              <a href="author.html#684">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/cocoa-sharp">More information about the Cocoa-sharp
mailing list</a><br>
</body></html>
