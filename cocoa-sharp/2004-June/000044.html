<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Cocoa-sharp] New changes to genstubs.pl
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:C.J.Collier">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000042.html">
   <LINK REL="Next"  HREF="000045.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cocoa-sharp] New changes to genstubs.pl
   </H1>
    <B>C.J.Collier
    </B> 
    <A HREF="mailto:C.J.Collier"
       TITLE="[Cocoa-sharp] New changes to genstubs.pl">C.J.Collier
       </A><BR>
    <I>Fri, 11 Jun 2004 01:53:11 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="000042.html">[Cocoa-sharp] genstubs.pl diff with problems
</A></li>
        <LI> Next message: <A HREF="000045.html">[Cocoa-sharp] New changes to genstubs.pl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44">[ date ]</a>
              <a href="thread.html#44">[ thread ]</a>
              <a href="subject.html#44">[ subject ]</a>
              <a href="author.html#44">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>*whew*

I'm cc'ing you because the list is ass slow.

Mostly this is to merge my changes in with kangaroo's and Urs' before 
it gets any more hairy.  I was hoping I would be able to have 
parseMethod just fill in the fields of the %objC hash.  I would then 
use that hash to fill in the %c and %cSharp hashes.  We'd be able to 
get a bunch of the code that doesn't belong in the parsing method out 
of it.

I also think that the @interface parser should be separate from the 
rest of the code.  I feel like it's mucking things up a bit.  So, 
here's a list of the changes:

- made a note to not overwrite the entire file... in the future.
- modified the $origmethod regex to catch whitespace before the [-+].  
Also made the type optional
- defaulting return type to id
- removed comment about not supporting methods without explicit return 
types
- altered some of the variable names to match the ObjC nomenclature
- printing complaint if duplicate method name is discovered
- storing generation date in a variable so we don't call localtime() a 
bunch of times
- changed File::BaseName::fileparse() return variable name from $class 
to $name.  Mostly because I thought some folks might think that we had 
gotten the $class variable from the @interface line - we didn't.  it 
was coming from the filename.  In the future, we should be using 
$objCHash-&gt;{class} to get the class name from within parseMethod().  
Although, since we are passing $interface as the second arg now, it's 
the same difference.
- removed the need for the $skip variable by using a nifty comment 
removal regex.  It's really long, so I put it in its own subroutine.
- created %objC, %c and %cSharp hashes that contain information 
gathered from parseMethod.
- added code to combine multi-line method definitions.  Please check 
this out for me.  I haven't had much of a chance to test it.

And that's just about it.  After a bit of review, I'll even submit it.

G'night,

C.J.


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000042.html">[Cocoa-sharp] genstubs.pl diff with problems
</A></li>
	<LI> Next message: <A HREF="000045.html">[Cocoa-sharp] New changes to genstubs.pl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44">[ date ]</a>
              <a href="thread.html#44">[ thread ]</a>
              <a href="subject.html#44">[ subject ]</a>
              <a href="author.html#44">[ author ]</a>
         </LI>
       </UL>
</body></html>
