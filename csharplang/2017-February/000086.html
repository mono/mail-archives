<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [csharplang] C# proposal: classes declaring interfaces
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:csharplang%40lists.dot.net?Subject=Re%3A%20%5Bcsharplang%5D%20C%23%20proposal%3A%20classes%20declaring%20interfaces&In-Reply-To=%3CDM5PR03MB2666E653592705B2123B20E3B3400%40DM5PR03MB2666.namprd03.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000084.html">
   <LINK REL="Next"  HREF="000089.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[csharplang] C# proposal: classes declaring interfaces</H1>
    <B>Tanner Gooding</B> 
    <A HREF="mailto:csharplang%40lists.dot.net?Subject=Re%3A%20%5Bcsharplang%5D%20C%23%20proposal%3A%20classes%20declaring%20interfaces&In-Reply-To=%3CDM5PR03MB2666E653592705B2123B20E3B3400%40DM5PR03MB2666.namprd03.prod.outlook.com%3E"
       TITLE="[csharplang] C# proposal: classes declaring interfaces">tagoo at microsoft.com
       </A><BR>
    <I>Mon Feb  6 14:30:04 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000084.html">[csharplang] C# proposal: classes declaring interfaces
</A></li>
        <LI>Next message (by thread): <A HREF="000089.html">[csharplang] C# proposal: classes declaring interfaces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86">[ date ]</a>
              <a href="thread.html#86">[ thread ]</a>
              <a href="subject.html#86">[ subject ]</a>
              <a href="author.html#86">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just going to elaborate a little on why this is a bad idea.

If this feature existed, then anytime the class had a new public member added, the contract for the interface would change, thus breaking all downstream consumers of said interface. This is why you see `ISomeInterface` and `ISomeInterface2`. The first was released in v1 of some assembly and defined the base contract, then you decided that there was some additional functionality that is required. If you modify the original interface, then any type already consuming the interface will break at runtime. So, to maintain back-compat you define a new interface (`ISomeInterface2`), make it inherit from the original and add the new contract members to it.

Now, most of this wouldn’t be an issue if we had default interface implementations, but I would still think it wouldn’t be the best design decision to so tightly couple your interface to your class.

-Tanner

From: csharplang [mailto:<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">csharplang-bounces at lists.dot.net</A>] On Behalf Of <A HREF="http://lists.dot.net/mailman/listinfo/csharplang">christos.matskas at gmail.com</A>
Sent: Monday, February 6, 2017 5:33 AM
To: Paulo Morgado &lt;<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">paulo at paulomorgado.info</A>&gt;; Joseph Musser &lt;<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">me at jnm2.com</A>&gt;
Cc: Anton Purin &lt;<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">purin.anton at gmail.com</A>&gt;; <A HREF="http://lists.dot.net/mailman/listinfo/csharplang">csharplang at lists.dot.net</A>
Subject: Re: [csharplang] C# proposal: classes declaring interfaces

-1 from me too. Sounds like a very bad idea IMHO

Sent from Mail&lt;<A HREF="https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgo.microsoft.com%2Ffwlink%2F%3FLinkId%3D550986&amp;data=02%7C01%7Ctagoo%40microsoft.com%7Ce084edca6cf749aca5ba08d44e94b13f%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636219847946821350&amp;sdata=gCmY7jPWGJh4QK%2ByRA3Ggokh33wCpd3G1fjln2JwcCs%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgo.microsoft.com%2Ffwlink%2F%3FLinkId%3D550986&amp;data=02%7C01%7Ctagoo%40microsoft.com%7Ce084edca6cf749aca5ba08d44e94b13f%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636219847946821350&amp;sdata=gCmY7jPWGJh4QK%2ByRA3Ggokh33wCpd3G1fjln2JwcCs%3D&amp;reserved=0</A>&gt; for Windows 10

From: Paulo Morgado&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">paulo at paulomorgado.info</A>&gt;
Sent: 06 February 2017 13:24
To: Joseph Musser&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">me at jnm2.com</A>&gt;
Cc: Anton Purin&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">purin.anton at gmail.com</A>&gt;; <A HREF="http://lists.dot.net/mailman/listinfo/csharplang">csharplang at lists.dot.net</A>&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">csharplang at lists.dot.net</A>&gt;
Subject: Re: [csharplang] C# proposal: classes declaring interfaces

-1

--
Paulo Morgado

On Fri, Feb 3, 2017 at 6:54 PM, Joseph Musser &lt;<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">me at jnm2.com</A>&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">me at jnm2.com</A>&gt;&gt; wrote:
This is where I'd normally push the -1 button on GitHub and let a more eloquent and experienced community member explain why it's not a good idea to make interfaces cater to the implementing class instead of catering to the client that uses them.

On Fri, Feb 3, 2017 at 2:30 AM, Anton Purin &lt;<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">purin.anton at gmail.com</A>&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">purin.anton at gmail.com</A>&gt;&gt; wrote:
Hello,


What?

Syntax sugar which allows classes to declare interfaces with all their public methods.

Simplest example:

class Configuration: declares IConfiguration
{
    public int MaxInstances { get; }
}

will declare an interface IConfiguration, which otherwise would look like this:

interface IConfiguration
{
    int MaxInstances { get; }
}

It also works really straight forward with the more complex cases:

class My : IDisposable
    declares IMy
{
    public event Action Something;

    public void Foo() { }

    public void Dispose() { }

    protected void Bar() { }
}

will declare interface like this:

interface IMy : IDisposable
{
    event Action Something;

    void Foo();
}

As you can see it includes all public members and inherits all interfaces too, so My and IMy sharing the whole


Why it is needed?

It will simplify all cases when you have one class implementing one interface in the same assembly.
You don't have to:

  *   keep a separate interface
  *   maintaining an extra file
  *   updating interface's members each time the class was changed
Most obvious example is mocking, when you just need to extract all public methods to interface, so you can substitute that class:

var fakeConfiguration = Substitute.For&lt;IConfiguration&gt;();
fakeConfiguration.MaxInstances.Returns(callInfo =&gt; testInstanceCount++);

Best regards,
Anton

_______________________________________________
csharplang mailing list
<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">csharplang at lists.dot.net</A>&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">csharplang at lists.dot.net</A>&gt;
<A HREF="http://lists.dot.net/mailman/listinfo/csharplang&lt;https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fcsharplang&amp;data=02%7C01%7Ctagoo%40microsoft.com%7Ce084edca6cf749aca5ba08d44e94b13f%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636219847946821350&amp;sdata=WMfmaow2lqww4VRKpud%2Bi52p31tGM%2BAAebZFaJB8fMU%3D&amp;reserved=0">http://lists.dot.net/mailman/listinfo/csharplang&lt;https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fcsharplang&amp;data=02%7C01%7Ctagoo%40microsoft.com%7Ce084edca6cf749aca5ba08d44e94b13f%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636219847946821350&amp;sdata=WMfmaow2lqww4VRKpud%2Bi52p31tGM%2BAAebZFaJB8fMU%3D&amp;reserved=0</A>&gt;


_______________________________________________
csharplang mailing list
<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">csharplang at lists.dot.net</A>&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">csharplang at lists.dot.net</A>&gt;
<A HREF="http://lists.dot.net/mailman/listinfo/csharplang&lt;https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fcsharplang&amp;data=02%7C01%7Ctagoo%40microsoft.com%7Ce084edca6cf749aca5ba08d44e94b13f%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636219847946821350&amp;sdata=WMfmaow2lqww4VRKpud%2Bi52p31tGM%2BAAebZFaJB8fMU%3D&amp;reserved=0">http://lists.dot.net/mailman/listinfo/csharplang&lt;https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fcsharplang&amp;data=02%7C01%7Ctagoo%40microsoft.com%7Ce084edca6cf749aca5ba08d44e94b13f%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636219847946821350&amp;sdata=WMfmaow2lqww4VRKpud%2Bi52p31tGM%2BAAebZFaJB8fMU%3D&amp;reserved=0</A>&gt;


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/csharplang/attachments/20170206/3ac9e391/attachment-0001.html">http://lists.dot.net/pipermail/csharplang/attachments/20170206/3ac9e391/attachment-0001.html</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000084.html">[csharplang] C# proposal: classes declaring interfaces
</A></li>
	<LI>Next message (by thread): <A HREF="000089.html">[csharplang] C# proposal: classes declaring interfaces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86">[ date ]</a>
              <a href="thread.html#86">[ thread ]</a>
              <a href="subject.html#86">[ subject ]</a>
              <a href="author.html#86">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/csharplang">More information about the csharplang
mailing list</a><br>
</body></html>
