<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [csharplang] Proposal: Infer generic type based on target
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:csharplang%40lists.dot.net?Subject=Re%3A%20%5Bcsharplang%5D%20Proposal%3A%20Infer%20generic%20type%20based%20on%20target&In-Reply-To=%3CCAGu8fCriHaaOEMD-hHRCUFVEqH5HDnZx5B2%2B0Y%2Beze1G2WG7wQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000017.html">
   <LINK REL="Next"  HREF="000019.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[csharplang] Proposal: Infer generic type based on target</H1>
    <B>Justin Spindler</B> 
    <A HREF="mailto:csharplang%40lists.dot.net?Subject=Re%3A%20%5Bcsharplang%5D%20Proposal%3A%20Infer%20generic%20type%20based%20on%20target&In-Reply-To=%3CCAGu8fCriHaaOEMD-hHRCUFVEqH5HDnZx5B2%2B0Y%2Beze1G2WG7wQ%40mail.gmail.com%3E"
       TITLE="[csharplang] Proposal: Infer generic type based on target">justin.spindler at gmail.com
       </A><BR>
    <I>Fri Feb  3 00:47:13 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000017.html">[csharplang] [Proposal]: Support generics and generic type	parameters in aliases
</A></li>
        <LI>Next message (by thread): <A HREF="000019.html">[csharplang] Proposal: Field-targeting attributes on auto-properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18">[ date ]</a>
              <a href="thread.html#18">[ thread ]</a>
              <a href="subject.html#18">[ subject ]</a>
              <a href="author.html#18">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://github.com/dotnet/roslyn/issues/5429">https://github.com/dotnet/roslyn/issues/5429</A>

Problem

When calling generic methods where the generic type parameter is only used
as the return value of the method there is currently no inference which
leads to repetition.

DataTable table = ...;var people = table.Rows
    .Select(row =&gt; new Person {
        Id = row.Field&lt;int&gt;(&quot;id&quot;),
        Name = row.Field&lt;string&gt;(&quot;name&quot;),
        Birthdate = row.Field&lt;DateTime&gt;(&quot;dob&quot;)
    })
    .ToList();

Proposal

It would be convenient if in the specific case of the generic type
parameter being the return type if the compiler could infer the generic
type argument based on the destination of the result. This would only be
permitted if the method is called in an unambiguous fashion. The return
value must be assigned to a destination with an explicit type and there can
be no other non-generic methods with the same name and parameters.

int id = row.Field(&quot;id&quot;); // legal, generic type argument inferred to
be intvar id = row.Field(&quot;id&quot;); // not legal, circular
inferencerow.Field(&quot;id&quot;); // not legal, no assignment to a type
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/csharplang/attachments/20170202/945ad829/attachment.html">http://lists.dot.net/pipermail/csharplang/attachments/20170202/945ad829/attachment.html</A>&gt;
</PRE>

























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000017.html">[csharplang] [Proposal]: Support generics and generic type	parameters in aliases
</A></li>
	<LI>Next message (by thread): <A HREF="000019.html">[csharplang] Proposal: Field-targeting attributes on auto-properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18">[ date ]</a>
              <a href="thread.html#18">[ thread ]</a>
              <a href="subject.html#18">[ subject ]</a>
              <a href="author.html#18">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/csharplang">More information about the csharplang
mailing list</a><br>
</body></html>
