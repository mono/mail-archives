<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [csharplang] Operators should be exposed for `System.IntPtr`	and `System.UIntPtr`
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:csharplang%40lists.dot.net?Subject=Re%3A%20%5Bcsharplang%5D%20Operators%20should%20be%20exposed%20for%20%60System.IntPtr%60%0A%09and%20%60System.UIntPtr%60&In-Reply-To=%3CCABoMf7%3DPmq7E%3DVQ26fDFq047uNrHJ0J5U-Q_zyj9wRM%2B1TmfXw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000072.html">
   <LINK REL="Next"  HREF="000075.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[csharplang] Operators should be exposed for `System.IntPtr`	and `System.UIntPtr`</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:csharplang%40lists.dot.net?Subject=Re%3A%20%5Bcsharplang%5D%20Operators%20should%20be%20exposed%20for%20%60System.IntPtr%60%0A%09and%20%60System.UIntPtr%60&In-Reply-To=%3CCABoMf7%3DPmq7E%3DVQ26fDFq047uNrHJ0J5U-Q_zyj9wRM%2B1TmfXw%40mail.gmail.com%3E"
       TITLE="[csharplang] Operators should be exposed for `System.IntPtr`	and `System.UIntPtr`">miguel.de.icaza at gmail.com
       </A><BR>
    <I>Sat Feb  4 01:55:48 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000072.html">[csharplang] Operators should be exposed for	`System.IntPtr`	and	`System.UIntPtr`
</A></li>
        <LI>Next message (by thread): <A HREF="000075.html">[csharplang] Operators should be exposed for `System.IntPtr`	and `System.UIntPtr`
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74">[ date ]</a>
              <a href="thread.html#74">[ thread ]</a>
              <a href="subject.html#74">[ subject ]</a>
              <a href="author.html#74">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,


&gt;<i> As a historical perspective, I can say that this choice was made extremely
</I>&gt;<i> deliberately and after MUCH debate while creating the initial version of C#.
</I>&gt;<i>
</I>
Thanks for sharing the historical perspective.

One of the design principles that we felt strongly about was the core data
&gt;<i> types (short, int, long, etc.) should be of standardized size and operation
</I>&gt;<i> across all platforms. This is one of the things that we felt that Java had
</I>&gt;<i> right, and C had wrong. We felt that it was doing programmers a grave
</I>&gt;<i> disservice to allow them to write code where integers had different size
</I>&gt;<i> limits or overflow behavior on different platforms, and this just led to
</I>&gt;<i> code that was very hard to port between platforms with virtually no
</I>&gt;<i> benefit. If you need to store integers larger than 2G, use a long,
</I>&gt;<i> otherwise use an int. This is an algorithmic decision and the behavior
</I>&gt;<i> shouldn’t change just because you are running on a 32 or 64 bit platform.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> IntPtr and UIntPtr were introduced in the base class libraries for various
</I>&gt;<i> reasons, and C# had to decide how to handle them. We realized that they did
</I>&gt;<i> have a usefulness in P/Invoke and native interop scenarios, so we added the
</I>&gt;<i> ability to explicitly cast from the regular integers to them and back.
</I>&gt;<i> Further than that we were unwilling to go, very deliberately.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> We really didn’t want programmers to write libraries that used
</I>&gt;<i> size-specific integers in their public interface. By NOT putting operators
</I>&gt;<i> on them, and by making casts to other integers have to be explicit, we made
</I>&gt;<i> them painful enough that people did not use them as general
</I>&gt;<i> “platform-specific integers”, like “int” is in C.
</I>&gt;<i>
</I>
While this might have been an acceptable design decision 15 years ago for a
v1 of the language on the dominant platform, C# now lives in diverse
ecosystem, one where it needs to interoperate well with other runtimes and
languages.   This is one of those things that just needs to be revisited.

Apple's APIs are both extensive and exhibit this issue, but they are by no
means the only ones.

Miguel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/csharplang/attachments/20170203/d51b67d8/attachment.html">http://lists.dot.net/pipermail/csharplang/attachments/20170203/d51b67d8/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000072.html">[csharplang] Operators should be exposed for	`System.IntPtr`	and	`System.UIntPtr`
</A></li>
	<LI>Next message (by thread): <A HREF="000075.html">[csharplang] Operators should be exposed for `System.IntPtr`	and `System.UIntPtr`
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74">[ date ]</a>
              <a href="thread.html#74">[ thread ]</a>
              <a href="subject.html#74">[ subject ]</a>
              <a href="author.html#74">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/csharplang">More information about the csharplang
mailing list</a><br>
</body></html>
