<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [csharplang] Operators should be exposed for `System.IntPtr`	and	`System.UIntPtr`
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:csharplang%40lists.dot.net?Subject=Re%3A%20%5Bcsharplang%5D%20Operators%20should%20be%20exposed%20for%20%60System.IntPtr%60%0A%09and%09%60System.UIntPtr%60&In-Reply-To=%3CMWHPR03MB2446BA204B1E7D83812C3244C14F0%40MWHPR03MB2446.namprd03.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000012.html">
   <LINK REL="Next"  HREF="000029.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[csharplang] Operators should be exposed for `System.IntPtr`	and	`System.UIntPtr`</H1>
    <B>Cyrus Najmabadi</B> 
    <A HREF="mailto:csharplang%40lists.dot.net?Subject=Re%3A%20%5Bcsharplang%5D%20Operators%20should%20be%20exposed%20for%20%60System.IntPtr%60%0A%09and%09%60System.UIntPtr%60&In-Reply-To=%3CMWHPR03MB2446BA204B1E7D83812C3244C14F0%40MWHPR03MB2446.namprd03.prod.outlook.com%3E"
       TITLE="[csharplang] Operators should be exposed for `System.IntPtr`	and	`System.UIntPtr`">cyrusn at microsoft.com
       </A><BR>
    <I>Fri Feb  3 02:14:32 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000012.html">[csharplang] Operators should be exposed for `System.IntPtr` and	`System.UIntPtr`
</A></li>
        <LI>Next message (by thread): <A HREF="000029.html">[csharplang] Operators should be exposed for `System.IntPtr`	and `System.UIntPtr`
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27">[ date ]</a>
              <a href="thread.html#27">[ thread ]</a>
              <a href="subject.html#27">[ subject ]</a>
              <a href="author.html#27">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Why not just add the actual operators to the System.IntPtr and System.UIntPtr structs?  It's unclear to me why we'd need anything specific in C# for these types.

           -- Cyrus

From: csharplang [mailto:<A HREF="http://lists.dot.net/mailman/listinfo/csharplang">csharplang-bounces at lists.dot.net</A>] On Behalf Of Tanner Gooding via csharplang
Sent: Thursday, February 2, 2017 3:58 PM
To: <A HREF="http://lists.dot.net/mailman/listinfo/csharplang">csharplang at lists.dot.net</A>
Subject: [csharplang] Operators should be exposed for `System.IntPtr` and `System.UIntPtr`

Copied from: <A HREF="https://github.com/dotnet/roslyn/issues/12836">https://github.com/dotnet/roslyn/issues/12836</A>
Issue:
The CLR supports a set of operators for the System.IntPtr and System.UIntPtr types (native int). These operators can be seen in III.1.5 of the Command Language Infrastructure specification. However, these operators are not supported by the C#.
Workaround:
Either directly emit IL or write non-optimal code that does not directly translate to the appropriate IL instructions.
Request:
Language support should be provided for the full set of operators supported by System.IntPtr and System.UIntPtr. These operators are: Add, Divide, Multiply, Remainder, Subtract, Negate, Equals, Compare, And, Not, Or, XOr, ShiftLeft, ShiftRight.
Other Thoughts:
C# seems to treat both IntPtr and UIntPtr as a type only used for interop and for representing pointers in a 'safe' manner, when it is really just:
an integer whose size is platform-specific.
It should be possible for a user to treat the IntPtr and UIntPtr types as an equivalent to the native size_t type. However, in order to do that, one must may have to deal with one or more of the following:

  *   Perform multiple levels of casting
  *   Use integers whose size is larger than their platform's native size
  *   Have branching to use integers that are platform-specific
  *   Work with unsafe code and do pointer arithmetic

-Tanner Gooding
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/csharplang/attachments/20170203/dcd59d87/attachment.html">http://lists.dot.net/pipermail/csharplang/attachments/20170203/dcd59d87/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000012.html">[csharplang] Operators should be exposed for `System.IntPtr` and	`System.UIntPtr`
</A></li>
	<LI>Next message (by thread): <A HREF="000029.html">[csharplang] Operators should be exposed for `System.IntPtr`	and `System.UIntPtr`
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27">[ date ]</a>
              <a href="thread.html#27">[ thread ]</a>
              <a href="subject.html#27">[ subject ]</a>
              <a href="author.html#27">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/csharplang">More information about the csharplang
mailing list</a><br>
</body></html>
