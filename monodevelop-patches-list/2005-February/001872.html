<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2270 - in trunk/MonoDevelop: . Core/src/AddIns/BackendBindings Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion Extras Extras/JavaBinding Unused/AddInManager Unused/AddInManager/Gui
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2270%20-%20in%20trunk/MonoDevelop%3A%20.%20Core/src/AddIns/BackendBindings%20Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion%20Extras%20Extras/JavaBinding%20Unused/AddInManager%20Unused/AddInManager/Gui&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001871.html">
   <LINK REL="Next"  HREF="001873.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2270 - in trunk/MonoDevelop: . Core/src/AddIns/BackendBindings Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion Extras Extras/JavaBinding Unused/AddInManager Unused/AddInManager/Gui</H1>
    <B>John Luke &lt;jluke@cfl.rr.com&gt;</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2270%20-%20in%20trunk/MonoDevelop%3A%20.%20Core/src/AddIns/BackendBindings%20Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion%20Extras%20Extras/JavaBinding%20Unused/AddInManager%20Unused/AddInManager/Gui&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2270 - in trunk/MonoDevelop: . Core/src/AddIns/BackendBindings Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion Extras Extras/JavaBinding Unused/AddInManager Unused/AddInManager/Gui">jluke at mono-cvs.ximian.com
       </A><BR>
    <I>Thu Feb 24 13:35:53 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001871.html">[Monodevelop-patches-list] r2269 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . Gui/Dialogs
</A></li>
        <LI>Next message: <A HREF="001873.html">[Monodevelop-patches-list] r2271 - in trunk/MonoDevelop: Core/src/AddIns/DisplayBindings/SourceEditor/Gui/Dialogs Extras po
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1872">[ date ]</a>
              <a href="thread.html#1872">[ thread ]</a>
              <a href="subject.html#1872">[ subject ]</a>
              <a href="author.html#1872">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jluke
Date: 2005-02-24 13:35:53 -0500 (Thu, 24 Feb 2005)
New Revision: 2270

Added:
   trunk/MonoDevelop/Extras/JavaBinding/
   trunk/MonoDevelop/Unused/AddInManager/Gui/AddInDetailsFrame.cs
Removed:
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding/
Modified:
   trunk/MonoDevelop/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/Makefile.am
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CodeCompletionDataProvider.cs
   trunk/MonoDevelop/Extras/JavaBinding/Makefile.am
   trunk/MonoDevelop/Unused/AddInManager/AddInManager.addin.xml
   trunk/MonoDevelop/Unused/AddInManager/Gui/AddInManagerDialog.cs
   trunk/MonoDevelop/configure.in
Log:
move JavaBinding to extras


Modified: trunk/MonoDevelop/ChangeLog
===================================================================
--- trunk/MonoDevelop/ChangeLog	2005-02-24 04:46:25 UTC (rev 2269)
+++ trunk/MonoDevelop/ChangeLog	2005-02-24 18:35:53 UTC (rev 2270)
@@ -1,3 +1,8 @@
+2005-02-24  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">john.luke at gmail.com</A>&gt;
+
+	* configure.in: move JavaBinding to Extras
+	and some incomplete dep-checking for ikvm
+
 2005-02-09  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">john.luke at gmail.com</A>&gt;
 
 	* */Makefile.am: build to build/bin/ so the make CSC='mcs -g'

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/Makefile.am	2005-02-24 04:46:25 UTC (rev 2269)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/Makefile.am	2005-02-24 18:35:53 UTC (rev 2270)
@@ -1,3 +1,3 @@
 
-SUBDIRS = CSharpBinding JavaBinding NemerleBinding ILAsmBinding VBNetBinding
+SUBDIRS = CSharpBinding NemerleBinding ILAsmBinding VBNetBinding
 

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CodeCompletionDataProvider.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CodeCompletionDataProvider.cs	2005-02-24 04:46:25 UTC (rev 2269)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CodeCompletionDataProvider.cs	2005-02-24 18:35:53 UTC (rev 2270)
@@ -111,7 +111,7 @@
 				} else if (o is IClass) {
 					IClass iclass = (IClass) o;
 					if (iclass.Name != null &amp;&amp; insertedClasses[iclass.Name] == null) {
-						completionData.Add(new CodeCompletionData((IClass)o));
+						completionData.Add(new CodeCompletionData(iclass));
 						insertedClasses[iclass.Name] = iclass;
 					}
 				} else if (o is IProperty) {

Copied: trunk/MonoDevelop/Extras/JavaBinding (from rev 2269, trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding)

Modified: trunk/MonoDevelop/Extras/JavaBinding/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding/Makefile.am	2005-02-24 04:46:25 UTC (rev 2269)
+++ trunk/MonoDevelop/Extras/JavaBinding/Makefile.am	2005-02-24 18:35:53 UTC (rev 2270)
@@ -43,7 +43,11 @@
 
 src_TEMPLATES = $(addprefix $(srcdir)/, $(TEMPLATES))
 
+if ENABLE_JAVA
 all: $(ASSEMBLY) $(ADDIN_BUILD)/$(ADDIN) $(build_TEMPLATES)
+else
+all:
+endif
 
 #%.xft.xml: $(srcdir)/templates/%.xft.xml
 #	mkdir -p $(TEMPLATES_DIR)
@@ -69,11 +73,13 @@
 	mkdir -p $(ADDIN_BUILD)
 	$(CSC) $(DLLS) $(build_sources) -out:$@ -target:library
 
+if ENABLE_JAVA
 assemblydir = $(libdir)/monodevelop/AddIns/BackendBindings
 assembly_DATA = $(ASSEMBLY) $(ADDIN)
 
 templatedir = $(assemblydir)/templates
 template_DATA = $(TEMPLATES)
+endif
 
 CLEANFILES = $(ASSEMBLY) $(ASSEMBLY).mdb
 EXTRA_DIST = $(FILES) $(ADDIN) $(TEMPLATES)

Modified: trunk/MonoDevelop/Unused/AddInManager/AddInManager.addin.xml
===================================================================
--- trunk/MonoDevelop/Unused/AddInManager/AddInManager.addin.xml	2005-02-24 04:46:25 UTC (rev 2269)
+++ trunk/MonoDevelop/Unused/AddInManager/AddInManager.addin.xml	2005-02-24 18:35:53 UTC (rev 2270)
@@ -1,9 +1,10 @@
 &lt;AddIn name	 = &quot;AddInManager&quot;
        author	 = &quot;John Luke&quot;
-       copyright = &quot;GPL&quot;
+       copyright = &quot;2004-2005 John Luke&quot;
+       license   = &quot;GPL&quot;
        url       = &quot;<A HREF="http://monodevelop.com&quot;">http://monodevelop.com&quot;</A>
        description = &quot;Displays and Manages AddIns&quot;
-       version   = &quot;0.0&quot;&gt;
+       version   = &quot;0.5&quot;&gt;
 
 	&lt;Runtime&gt;
 		&lt;Import assembly=&quot;AddInManager.dll&quot;/&gt;

Added: trunk/MonoDevelop/Unused/AddInManager/Gui/AddInDetailsFrame.cs
===================================================================
--- trunk/MonoDevelop/Unused/AddInManager/Gui/AddInDetailsFrame.cs	2005-02-24 04:46:25 UTC (rev 2269)
+++ trunk/MonoDevelop/Unused/AddInManager/Gui/AddInDetailsFrame.cs	2005-02-24 18:35:53 UTC (rev 2270)
@@ -0,0 +1,44 @@
+using System;
+using Gtk;
+using MonoDevelop.Core.AddIns;
+
+public class AddInDetailsFrame : Frame
+{
+	Label author;
+	Label description;
+	Label copyright;
+	Label url;
+	// RuntimeLibraries
+	// Extensions
+
+	public AddInDetailsFrame ()
+	{
+		VBox vbox = new VBox ();
+		author = new Label ();
+		vbox.PackStart (author, false, true, 0);
+		copyright = new Label ();
+		vbox.PackStart (copyright, false, true, 0);
+		url = new Label ();
+		vbox.PackStart (url, false, true, 0);
+		description = new Label ();
+		vbox.PackStart (description, false, true, 0);
+		this.Add (vbox);
+	}
+
+	public void Clear ()
+	{
+		author.Text = &quot;Author: &quot;;
+		description.Text = &quot;Description: &quot;;
+		copyright.Text = &quot;Copyright: &quot;;
+		url.Text = &quot;Url: &quot;;
+	}
+
+	public void SetAddin (AddIn addin)
+	{
+		author.Text = &quot;Author: &quot; + addin.Author;
+		description.Text = &quot;Description: &quot; + addin.Description;
+		copyright.Text = &quot;Copyright: &quot; + addin.Copyright;
+		url.Text = &quot;Url: &quot; + addin.Url;
+	}
+}
+

Modified: trunk/MonoDevelop/Unused/AddInManager/Gui/AddInManagerDialog.cs
===================================================================
--- trunk/MonoDevelop/Unused/AddInManager/Gui/AddInManagerDialog.cs	2005-02-24 04:46:25 UTC (rev 2269)
+++ trunk/MonoDevelop/Unused/AddInManager/Gui/AddInManagerDialog.cs	2005-02-24 18:35:53 UTC (rev 2270)
@@ -9,7 +9,8 @@
 {
 	public class AddInManagerDialog : Dialog
 	{
-		TreeStore store;
+		ListStore store;
+		AddInDetailsFrame addinDetails;
 
 		public AddInManagerDialog ()
 		{
@@ -21,6 +22,7 @@
 			ScrolledWindow sw = new ScrolledWindow ();
 			sw.ShadowType = ShadowType.In;
 			TreeView tv = new TreeView ();
+			tv.Selection.Changed += new EventHandler (OnSelectionChanged);
 			tv.RowActivated += new RowActivatedHandler (OnRowActivated);
 
 			CellRendererToggle toggle = new CellRendererToggle ();
@@ -35,16 +37,19 @@
 			LoadAddIns ();
 			tv.Model = store;
 			this.VBox.Add (sw);
+
+			addinDetails = new AddInDetailsFrame ();
+			this.VBox.Add (addinDetails);
 			this.ShowAll ();
 		}
 
 		void LoadAddIns ()
 		{
-			store = new TreeStore (typeof (bool), typeof (string), typeof (string));
+			store = new ListStore (typeof (bool), typeof (string), typeof (string), typeof (AddIn));
 			AddInCollection addins = AddInTreeSingleton.AddInTree.AddIns;
 
 			foreach (AddIn a in addins)
-				store.AppendValues (true, a.Name, a.Version);
+				store.AppendValues (true, a.Name, a.Version, a);
 		}
 
 		void OnCellToggled (object sender, ToggledArgs a)
@@ -54,6 +59,17 @@
 				Toggle (iter);
 		}
 
+		void OnSelectionChanged (object sender, EventArgs a)
+		{
+			TreeIter iter;
+			TreeModel model;
+
+			if (((TreeSelection)sender).GetSelected (out model, out iter))
+				addinDetails.SetAddin ((AddIn) model.GetValue (iter, 3));
+			else
+				addinDetails.Clear ();
+		}
+
 		void OnRowActivated (object sender, RowActivatedArgs a)
 		{
 			TreeIter iter;

Modified: trunk/MonoDevelop/configure.in
===================================================================
--- trunk/MonoDevelop/configure.in	2005-02-24 04:46:25 UTC (rev 2269)
+++ trunk/MonoDevelop/configure.in	2005-02-24 18:35:53 UTC (rev 2270)
@@ -127,6 +127,17 @@
  AM_CONDITIONAL(ENABLE_DEBUGGER, test x$enable_debugger = xyes)
  AC_SUBST(MONO_DEBUGGER_LIBS)
 
+dnl java binding
+dnl need to test for a java source to bytecode compiler
+dnl and for ikvm
+IKVM_REQUIRED_VERSION=0.10
+AC_ARG_ENABLE(java,
+	AC_HELP_STRING([--enable-java],
+		[enable support for Java via ikvm [default=no]]),
+		[PKG_CHECK_MODULES(IKVM, ikvm &gt;= $IKVM_REQUIRED_VERSION, enable_java=yes, enable_java=no)],
+		enable_java=no)
+AM_CONDITIONAL(ENABLE_JAVA, test x$enable_java = xyes)
+
 MOZILLA_HOME=&quot;`$PKG_CONFIG --variable=libdir mozilla-gtkmozembed`&quot;
 AC_SUBST(MOZILLA_HOME)
 
@@ -188,7 +199,6 @@
 Core/src/AddIns/Makefile
 Core/src/AddIns/BackendBindings/Makefile
 Core/src/AddIns/BackendBindings/CSharpBinding/Makefile
-Core/src/AddIns/BackendBindings/JavaBinding/Makefile
 Core/src/AddIns/BackendBindings/ILAsmBinding/Makefile
 Core/src/AddIns/BackendBindings/NemerleBinding/Makefile
 Core/src/AddIns/BackendBindings/VBNetBinding/Makefile
@@ -229,6 +239,7 @@
 Extras/MonoQuery/Makefile
 Extras/MonoQuery/MonoQuery.addin.xml
 Extras/MonoDeveloperExtensions/Makefile
+Extras/JavaBinding/Makefile
 ])
 
 echo &quot;&quot;
@@ -242,4 +253,5 @@
 echo &quot;   *   PostgreSQL:   yes&quot;
 echo &quot;   *   MySQL:        yes&quot;
 echo &quot;   *   SQLite:       $enable_monoquery_sqlite&quot;
+echo &quot;   * java support: $enable_java&quot;
 echo &quot;&quot;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001871.html">[Monodevelop-patches-list] r2269 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . Gui/Dialogs
</A></li>
	<LI>Next message: <A HREF="001873.html">[Monodevelop-patches-list] r2271 - in trunk/MonoDevelop: Core/src/AddIns/DisplayBindings/SourceEditor/Gui/Dialogs Extras po
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1872">[ date ]</a>
              <a href="thread.html#1872">[ thread ]</a>
              <a href="subject.html#1872">[ subject ]</a>
              <a href="author.html#1872">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
