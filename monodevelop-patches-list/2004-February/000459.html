<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r854 - in trunk/MonoDevelop/src/AddIns/DisplayBindings: SourceEditor SourceEditor/Commands SourceEditor/Gui SourceEditor/Gui/Dialogs TextEditor/Gui/Dialogs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r854%20-%20in%20trunk/MonoDevelop/src/AddIns/DisplayBindings%3A%20SourceEditor%20SourceEditor/Commands%20SourceEditor/Gui%20SourceEditor/Gui/Dialogs%20TextEditor/Gui/Dialogs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000458.html">
   <LINK REL="Next"  HREF="000460.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r854 - in trunk/MonoDevelop/src/AddIns/DisplayBindings: SourceEditor SourceEditor/Commands SourceEditor/Gui SourceEditor/Gui/Dialogs TextEditor/Gui/Dialogs</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r854%20-%20in%20trunk/MonoDevelop/src/AddIns/DisplayBindings%3A%20SourceEditor%20SourceEditor/Commands%20SourceEditor/Gui%20SourceEditor/Gui/Dialogs%20TextEditor/Gui/Dialogs&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r854 - in trunk/MonoDevelop/src/AddIns/DisplayBindings: SourceEditor SourceEditor/Commands SourceEditor/Gui SourceEditor/Gui/Dialogs TextEditor/Gui/Dialogs">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Mon Feb  9 20:13:44 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000458.html">[Monodevelop-patches-list] r853 - in trunk/MonoDevelop: . gdldock/sources/gdl
</A></li>
        <LI>Next message: <A HREF="000460.html">[Monodevelop-patches-list] r855 - in trunk/MonoDevelop: data/resources/glade src/AddIns/DisplayBindings/SourceEditor/Gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#459">[ date ]</a>
              <a href="thread.html#459">[ thread ]</a>
              <a href="subject.html#459">[ subject ]</a>
              <a href="author.html#459">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: benm
Date: 2004-02-09 20:13:43 -0500 (Mon, 09 Feb 2004)
New Revision: 854

Added:
   trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Gui/Dialogs/
   trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Gui/Dialogs/GotoLineNumberDialog.cs
Removed:
   trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs/GotoLineNumberDialog.cs
Modified:
   trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Commands/SearchCommands.cs
   trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Makefile.am
Log:
gotoline

Modified: trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Commands/SearchCommands.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Commands/SearchCommands.cs	2004-02-10 01:03:56 UTC (rev 853)
+++ trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Commands/SearchCommands.cs	2004-02-10 01:13:43 UTC (rev 854)
@@ -158,12 +158,9 @@
 	{
 		public override void Run()
 		{
-			Console.WriteLine (&quot;Not implemented in the new editor&quot;);
-			/*if (!GotoLineNumberDialog.IsVisible) {
-				GotoLineNumberDialog gnd = new GotoLineNumberDialog();
-				gnd.Run ();
-				gnd.Hide ();
-			}*/
+			if (!GotoLineNumberDialog.IsVisible)
+				using (GotoLineNumberDialog gnd = new GotoLineNumberDialog ())
+					gnd.Run ();
 		}
 	}
 	

Copied: trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Gui/Dialogs/GotoLineNumberDialog.cs (from rev 852, trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs/GotoLineNumberDialog.cs)
===================================================================
--- trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs/GotoLineNumberDialog.cs	2004-02-10 00:44:55 UTC (rev 852)
+++ trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Gui/Dialogs/GotoLineNumberDialog.cs	2004-02-10 01:13:43 UTC (rev 854)
@@ -0,0 +1,79 @@
+// &lt;file&gt;
+//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
+//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
+//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
+//     &lt;version value=&quot;$version&quot;/&gt;
+// &lt;/file&gt;
+
+using System;
+using System.IO;
+using System.Resources;
+
+using ICSharpCode.Core.Properties;
+
+using ICSharpCode.Core.Services;
+
+using Gtk;
+using Glade;
+
+namespace ICSharpCode.SharpDevelop.Gui.Dialogs
+{
+	public class GotoLineNumberDialog : IDisposable
+	{
+		public static bool IsVisible = false;
+	
+		[Widget] Dialog GotoLineDialog;
+		[Widget] Entry line_number_entry;
+		
+		public GotoLineNumberDialog ()
+		{
+			new Glade.XML (null, &quot;texteditoraddin.glade&quot;, &quot;GotoLineDialog&quot;, null).Autoconnect (this);
+		}
+		
+		public void Run ()
+		{
+			GotoLineDialog.ShowAll ();
+			IsVisible = true;
+			GotoLineDialog.Run ();
+		}
+		
+		public void Hide ()
+		{
+			GotoLineDialog.Hide ();
+			IsVisible = false;
+		}
+		
+		void on_btn_close_clicked (object sender, EventArgs e)
+		{
+			GotoLineDialog.Hide ();
+		}
+		
+		void on_btn_go_to_line_clicked (object sender, EventArgs e)
+		{
+			try {
+				IWorkbenchWindow window = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
+				
+				
+				if (window != null &amp;&amp; window.ViewContent is IPositionable) {			
+					int l = Math.Max (0, Int32.Parse(line_number_entry.Text) - 1);
+					
+					((IPositionable) window.ViewContent).JumpTo (l, 0);
+				}
+			} catch (Exception) {
+				
+			} finally {
+				GotoLineDialog.Hide ();
+			}
+		}
+		
+		public void Dispose ()
+		{
+			if (GotoLineDialog != null) {
+				GotoLineDialog.Dispose ();
+				GotoLineDialog = null;
+				line_number_entry = null;
+				IsVisible = false;
+			}
+		}
+	}
+}

Modified: trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Makefile.am
===================================================================
--- trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Makefile.am	2004-02-10 01:03:56 UTC (rev 853)
+++ trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/Makefile.am	2004-02-10 01:13:43 UTC (rev 854)
@@ -5,6 +5,7 @@
 $(DLL) : $(shell find . -name \*.cs)
 	mcs $(shell find . -name \*.cs) /out:$@ /t:library \
 	/resource:../../../../data/resources/glade/EditorBindings.glade,EditorBindings.glade \
+	/resource:../../../../data/resources/glade/texteditoraddin.glade,texteditoraddin.glade \
 	 /r:gtk-sharp /r:gdk-sharp $(GTKSOURCEVIEW_SHARP) /r:glib-sharp \
 		/r:../../../../build/bin/MonoDevelop.Core.dll \
 		/r:../../../../build/bin/MonoDevelop.Base.dll \

Deleted: trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs/GotoLineNumberDialog.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs/GotoLineNumberDialog.cs	2004-02-10 01:03:56 UTC (rev 853)
+++ trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs/GotoLineNumberDialog.cs	2004-02-10 01:13:43 UTC (rev 854)
@@ -1,74 +0,0 @@
-// &lt;file&gt;
-//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
-//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
-//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
-//     &lt;version value=&quot;$version&quot;/&gt;
-// &lt;/file&gt;
-
-using System;
-using System.IO;
-using System.Resources;
-
-using ICSharpCode.TextEditor.Document;
-using ICSharpCode.SharpDevelop.DefaultEditor.Gui.Editor;
-using ICSharpCode.Core.Properties;
-
-using ICSharpCode.Core.Services;
-using ICSharpCode.TextEditor;
-
-using Gtk;
-using Glade;
-
-// TODO: this dialog should be moved to the core, as it has no deps
-// on this binding.
-
-namespace ICSharpCode.SharpDevelop.Gui.Dialogs
-{
-	public class GotoLineNumberDialog
-	{
-		public static bool IsVisible = false;
-	
-		[Widget] Dialog GotoLineDialog;
-		[Widget] Entry line_number_entry;
-		
-		public GotoLineNumberDialog ()
-		{
-			new Glade.XML (null, &quot;texteditoraddin.glade&quot;, &quot;GotoLineDialog&quot;, null).Autoconnect (this);
-			
-			GotoLineDialog.ShowAll ();
-		}
-		
-		public void Run ()
-		{
-			GotoLineDialog.Run ();
-		}
-		
-		public void Hide ()
-		{
-			GotoLineDialog.Hide ();
-		}
-		
-		void on_btn_close_clicked (object sender, EventArgs e)
-		{
-			GotoLineDialog.Hide ();
-		}
-		
-		void on_btn_go_to_line_clicked (object sender, EventArgs e)
-		{
-			try {
-				IWorkbenchWindow window = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
-				
-				
-				if (window != null &amp;&amp; window.ViewContent is IPositionable) {			
-					int l = Math.Max (0, Int32.Parse(line_number_entry.Text) - 1);
-					
-					((IPositionable) window.ViewContent).JumpTo (l, 0);
-				}
-			} catch (Exception) {
-				
-			} finally {
-				GotoLineDialog.Hide ();
-			}
-		}
-	}
-}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000458.html">[Monodevelop-patches-list] r853 - in trunk/MonoDevelop: . gdldock/sources/gdl
</A></li>
	<LI>Next message: <A HREF="000460.html">[Monodevelop-patches-list] r855 - in trunk/MonoDevelop: data/resources/glade src/AddIns/DisplayBindings/SourceEditor/Gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#459">[ date ]</a>
              <a href="thread.html#459">[ thread ]</a>
              <a href="subject.html#459">[ subject ]</a>
              <a href="author.html#459">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
