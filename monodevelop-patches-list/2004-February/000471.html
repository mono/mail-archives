<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r866 - in trunk/MonoDevelop/src/Main/Base: Gui/Components/StatusBar Services/StatusBar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r866%20-%20in%20trunk/MonoDevelop/src/Main/Base%3A%20Gui/Components/StatusBar%20Services/StatusBar&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000470.html">
   <LINK REL="Next"  HREF="000472.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r866 - in trunk/MonoDevelop/src/Main/Base: Gui/Components/StatusBar Services/StatusBar</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r866%20-%20in%20trunk/MonoDevelop/src/Main/Base%3A%20Gui/Components/StatusBar%20Services/StatusBar&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r866 - in trunk/MonoDevelop/src/Main/Base: Gui/Components/StatusBar Services/StatusBar">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Tue Feb 10 23:42:06 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000470.html">[Monodevelop-patches-list] r865 - in trunk/MonoDevelop: . build src/AddIns/DisplayBindings/SourceEditor/Gui
</A></li>
        <LI>Next message: <A HREF="000472.html">[Monodevelop-patches-list] r867 - in trunk/MonoDevelop/src: AddIns/DisplayBindings/SourceEditor/Gui Main/Base/Services/ParserService
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#471">[ date ]</a>
              <a href="thread.html#471">[ thread ]</a>
              <a href="subject.html#471">[ subject ]</a>
              <a href="author.html#471">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jluke
Date: 2004-02-10 23:42:06 -0500 (Tue, 10 Feb 2004)
New Revision: 866

Modified:
   trunk/MonoDevelop/src/Main/Base/Gui/Components/StatusBar/SdStatusBar.cs
   trunk/MonoDevelop/src/Main/Base/Services/StatusBar/DefaultStatusBarService.cs
   trunk/MonoDevelop/src/Main/Base/Services/StatusBar/IStatusBarService.cs
Log:
use Gnome.AppBar, and cleanup some old SWF code


Modified: trunk/MonoDevelop/src/Main/Base/Gui/Components/StatusBar/SdStatusBar.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Components/StatusBar/SdStatusBar.cs	2004-02-11 04:40:09 UTC (rev 865)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Components/StatusBar/SdStatusBar.cs	2004-02-11 04:42:06 UTC (rev 866)
@@ -5,22 +5,18 @@
 //     &lt;version value=&quot;$version&quot;/&gt;
 // &lt;/file&gt;
 using System;
-//using System.Drawing;
-//using System.Windows.Forms;
 using ICSharpCode.SharpDevelop.Services;
 using Gtk;
+using Gnome;
 
 namespace ICSharpCode.SharpDevelop.Gui.Components
 {
-	public class SdStatusBar : HBox, IProgressMonitor
+	public class SdStatusBar : AppBar, IProgressMonitor
 	{
-		ProgressBar statusProgressBar      = new ProgressBar ();
-		
 		Statusbar txtStatusBarPanel    = new Statusbar ();
 		Statusbar cursorStatusBarPanel = new Statusbar ();
 		Statusbar modeStatusBarPanel   = new Statusbar ();
-		private static GLib.GType type;
-
+		private static GLib.GType gtype;
 		
 		public Statusbar CursorStatusBarPanel {
 			get {
@@ -45,45 +41,26 @@
 			}
 		}
 
-		static SdStatusBar ()
-		{
-			type = RegisterGType (typeof (SdStatusBar));
+		public static new GLib.GType GType {
+			get {
+				if (gtype == GLib.GType.Invalid)
+					gtype = RegisterGType (typeof (SdStatusBar));
+				return gtype;
+			}
 		}
 		
-		public SdStatusBar(IStatusBarService manager) : base (type)
+		// FIXME: actually use a Progressbar
+		public SdStatusBar(IStatusBarService manager) : base (false, true, PreferencesType.Never)
 		{
-			//txtStatusBarPanel.Width = 500;
-			//txtStatusBarPanel.AutoSize = StatusBarPanelAutoSize.Spring;
 			txtStatusBarPanel.HasResizeGrip = false;
-			//txtStatusBarPanel.Push (1, &quot;test&quot;);
 			this.PackStart (txtStatusBarPanel);
-	//		manager.Add (new StatusBarContributionItem(&quot;TextPanel&quot;, txtStatusBarPanel));
 			
-			//statusProgressBar.Width  = 200;
-			//statusProgressBar.Height = 14;
-			//statusProgressBar.Location = new Point(160, 4);
-			//statusProgressBar.Minimum = 0;
-			statusProgressBar.Visible = false;
-			//this.PackStart (statusProgressBar, true, false, 0);
-			
-			//cursorStatusBarPanel.Width = 200;
-			//cursorStatusBarPanel.AutoSize = StatusBarPanelAutoSize.None;
-			//cursorStatusBarPanel.Alignment = HorizontalAlignment.Left;
 			cursorStatusBarPanel.HasResizeGrip = false;
-			//cursorStatusBarPanel.Push (1, &quot;test&quot;);
 			this.PackStart (cursorStatusBarPanel, true, true, 0);
 				
-			//modeStatusBarPanel.Width = 44;
-			//modeStatusBarPanel.AutoSize = StatusBarPanelAutoSize.None;
-			//modeStatusBarPanel.Alignment = HorizontalAlignment.Right;
 			modeStatusBarPanel.HasResizeGrip = false;
-			//modeStatusBarPanel.Push (1, &quot;test&quot;);
 			this.PackStart (modeStatusBarPanel, true, true, 0);
-			
-			
-			//manager.Add(new StatusBarContributionItem(&quot;ProgressBar&quot;, statusProgressBar));
-			
-			//ShowPanels = true;
+
 			this.ShowAll ();
 		}
 		
@@ -114,20 +91,20 @@
 			//oldMessage = txtStatusBarPanel.Pop (1);
 			SetMessage(name);
 			//statusProgressBar.Maximum = totalWork;
-			statusProgressBar.Visible = true;
+			this.Progress.Visible = true;
 		}
 		
 		public void Worked(int work, string status)
 		{
-			statusProgressBar.Fraction = (double) work;
-			statusProgressBar.Text = status;
+			this.Progress.Fraction = (double) work;
+			this.Progress.Text = status;
 		}
 		
 		public void Done()
 		{
 			SetMessage(oldMessage);
 			oldMessage = null;
-			statusProgressBar.Visible = false;
+			this.Progress.Visible = false;
 		}
 		
 		public bool Canceled {
@@ -147,9 +124,5 @@
 				
 			}
 		}
-		
-		//public void Dispose() {
-			// FIXME PEDRO
-		//}
 	}
 }

Modified: trunk/MonoDevelop/src/Main/Base/Services/StatusBar/DefaultStatusBarService.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Services/StatusBar/DefaultStatusBarService.cs	2004-02-11 04:40:09 UTC (rev 865)
+++ trunk/MonoDevelop/src/Main/Base/Services/StatusBar/DefaultStatusBarService.cs	2004-02-11 04:42:06 UTC (rev 866)
@@ -6,8 +6,6 @@
 // &lt;/file&gt;
 using System;
 using System.Diagnostics;
-//using System.Drawing;
-//using System.Windows.Forms;
 using Gtk;
 
 using ICSharpCode.Core.Services;
@@ -106,16 +104,16 @@
 		public void Update()
 		{
 			Debug.Assert(statusBar != null);
-	/*		statusBar.Panels.Clear();
-			statusBar.Controls.Clear();
+			/*statusBar.Clear ();
+			statusBar.Clear ();
 			
 			foreach (StatusBarContributionItem item in Items) {
 				if (item.Control != null) {
-					statusBar.Controls.Add(item.Control);
+					statusBar.Add (item.Control);
 				} else if (item.Panel != null) {
-					statusBar.Panels.Add(item.Panel);
+					statusBar.Add (item.Panel);
 				} else {
-					throw new ApplicationException(&quot;StatusBarContributionItem &quot; + item.ItemID + &quot; has no Control or Panel defined.&quot;);
+					throw new ApplicationException (&quot;StatusBarContributionItem &quot; + item.ItemID + &quot; has no Control or Panel defined.&quot;);
 				}
 			}*/
 		}

Modified: trunk/MonoDevelop/src/Main/Base/Services/StatusBar/IStatusBarService.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Services/StatusBar/IStatusBarService.cs	2004-02-11 04:40:09 UTC (rev 865)
+++ trunk/MonoDevelop/src/Main/Base/Services/StatusBar/IStatusBarService.cs	2004-02-11 04:42:06 UTC (rev 866)
@@ -6,11 +6,7 @@
 // &lt;/file&gt;
 using System.Drawing;
 using ICSharpCode.SharpDevelop.Gui;
-#if GTK
 using Gtk;
-#else
-using System.Windows.Forms;
-#endif
 
 namespace ICSharpCode.SharpDevelop.Services
 {
@@ -31,10 +27,9 @@
 		
 		void ShowErrorMessage(string message);
 		
-		void SetMessage(string message);
-#if !LINUX					
-		void SetMessage(Image image, string message);
-#endif		
+		void SetMessage(string message);					
+		//void SetMessage(Image image, string message);
+		
 		void SetCaretPosition(int x, int y, int charOffset);
 		void SetInsertMode(bool insertMode);
 		


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000470.html">[Monodevelop-patches-list] r865 - in trunk/MonoDevelop: . build src/AddIns/DisplayBindings/SourceEditor/Gui
</A></li>
	<LI>Next message: <A HREF="000472.html">[Monodevelop-patches-list] r867 - in trunk/MonoDevelop/src: AddIns/DisplayBindings/SourceEditor/Gui Main/Base/Services/ParserService
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#471">[ date ]</a>
              <a href="thread.html#471">[ thread ]</a>
              <a href="subject.html#471">[ subject ]</a>
              <a href="author.html#471">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
