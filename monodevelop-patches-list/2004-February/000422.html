<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r817 - in trunk/MonoDevelop: build/bin build/data/options src/Main/Base/Gui/Workbench/Layouts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r817%20-%20in%20trunk/MonoDevelop%3A%20build/bin%20build/data/options%20src/Main/Base/Gui/Workbench/Layouts&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000421.html">
   <LINK REL="Next"  HREF="000423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r817 - in trunk/MonoDevelop: build/bin build/data/options src/Main/Base/Gui/Workbench/Layouts</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r817%20-%20in%20trunk/MonoDevelop%3A%20build/bin%20build/data/options%20src/Main/Base/Gui/Workbench/Layouts&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r817 - in trunk/MonoDevelop: build/bin build/data/options src/Main/Base/Gui/Workbench/Layouts">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Sat Feb  7 22:09:14 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000421.html">[Monodevelop-patches-list] r816 - trunk/MonoDevelop/src/Main/Base/Services
</A></li>
        <LI>Next message: <A HREF="000423.html">[Monodevelop-patches-list] r818 - trunk/MonoDevelop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#422">[ date ]</a>
              <a href="thread.html#422">[ thread ]</a>
              <a href="subject.html#422">[ subject ]</a>
              <a href="author.html#422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-02-07 22:09:14 -0500 (Sat, 07 Feb 2004)
New Revision: 817

Added:
   trunk/MonoDevelop/build/data/options/DefaultEditingLayout.xml
Modified:
   trunk/MonoDevelop/build/bin/
   trunk/MonoDevelop/src/Main/Base/Gui/Workbench/Layouts/SdiWorkspaceLayout.cs
Log:
this is as clean as anything else for right now.



Property changes on: trunk/MonoDevelop/build/bin
___________________________________________________________________
Name: svn:ignore
   - *.exe
*.dll
libgdldock.so


   + *.exe
*.dll
*.png
libgdldock.so



Added: trunk/MonoDevelop/build/data/options/DefaultEditingLayout.xml
===================================================================
--- trunk/MonoDevelop/build/data/options/DefaultEditingLayout.xml	2004-02-08 00:48:44 UTC (rev 816)
+++ trunk/MonoDevelop/build/data/options/DefaultEditingLayout.xml	2004-02-08 03:09:14 UTC (rev 817)
@@ -0,0 +1,2 @@
+&lt;?xml version=&quot;1.0&quot;?&gt;
+&lt;dock-layout&gt;&lt;layout name=&quot;__default__&quot;&gt;&lt;dock name=&quot;__dock_1&quot; floating=&quot;no&quot; width=&quot;-1&quot; height=&quot;-1&quot; floatx=&quot;0&quot; floaty=&quot;0&quot;&gt;&lt;paned orientation=&quot;horizontal&quot; locked=&quot;no&quot; position=&quot;202&quot;&gt;&lt;notebook orientation=&quot;vertical&quot; locked=&quot;no&quot; page=&quot;0&quot;&gt;&lt;item name=&quot;Projects&quot; orientation=&quot;vertical&quot; locked=&quot;no&quot;/&gt;&lt;item name=&quot;Classes&quot; orientation=&quot;vertical&quot; locked=&quot;no&quot;/&gt;&lt;item name=&quot;Files&quot; orientation=&quot;vertical&quot; locked=&quot;no&quot;/&gt;&lt;/notebook&gt;&lt;paned orientation=&quot;vertical&quot; locked=&quot;no&quot; position=&quot;268&quot;&gt;&lt;item name=&quot;Documents&quot; orientation=&quot;vertical&quot; locked=&quot;yes&quot;/&gt;&lt;notebook orientation=&quot;vertical&quot; locked=&quot;no&quot; page=&quot;0&quot;&gt;&lt;item name=&quot;Output&quot; orientation=&quot;vertical&quot; locked=&quot;no&quot;/&gt;&lt;item name=&quot;Task List&quot; orientation=&quot;vertical&quot; locked=&quot;no&quot;/&gt;&lt;/notebook&gt;&lt;/paned&gt;&lt;/paned&gt;&lt;/dock&gt;&lt;/layout&gt;&lt;/dock-layout&gt;

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Workbench/Layouts/SdiWorkspaceLayout.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Workbench/Layouts/SdiWorkspaceLayout.cs	2004-02-08 00:48:44 UTC (rev 816)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Workbench/Layouts/SdiWorkspaceLayout.cs	2004-02-08 03:09:14 UTC (rev 817)
@@ -30,13 +30,14 @@
 	public class SdiWorkbenchLayout : IWorkbenchLayout
 	{
 		static PropertyService propertyService = (PropertyService)ServiceManager.Services.GetService(typeof(PropertyService));
-		static string configFile = propertyService.ConfigDirectory + &quot;MdiLayoutConfig.xml&quot;;
+		static string configFile = propertyService.ConfigDirectory + &quot;DefaultEditingLayout.xml&quot;;
 
 		private IWorkbench workbench;
 		Window wbWindow;
 		Container rootWidget;
 		Container toolbarContainer;
 		Dock dock;
+		DockLayout dockLayout;
 		Notebook tabControl;
 
 		//ICSharpCode.SharpDevelop.Gui.Components.OpenFileTab tabControl = new ICSharpCode.SharpDevelop.Gui.Components.OpenFileTab();
@@ -91,8 +92,10 @@
 			
 			// Create the docking widget and add it to the window.
 			dock = new Dock ();
+			DockBar dockBar = new DockBar (dock);
 			Gtk.HBox dockBox = new HBox (false, 5);
 			dockBox.PackStart (dock, true, true, 0);
+			dockBox.PackStart (dockBar, false, true, 0);
 			vbox.PackStart (dockBox, true, true, 0);
 
 			// Create the notebook for the various documents.
@@ -146,16 +149,7 @@
 			//tabControl.SwitchPage += new EventHandler(ActiveMdiChanged);
 			//tabControl.SelectionChanged += new EventHandler(ActiveMdiChanged);
 			
-			try {
-				if (File.Exists(configFile)) {
-					// FIXME: GTKize
-					//dockManager.LoadConfigFromFile(configFile);
-				} else {
-					CreateDefaultLayout();
-				}
-			} catch (Exception) {
-				Console.WriteLine(&quot;can't load docking configuration, version clash ?&quot;);
-			}
+			CreateDefaultLayout();
 			RedrawAllComponents();
 			wbWindow.ShowAll ();
 		}
@@ -228,11 +222,19 @@
 				}
 			}
 			//Console.WriteLine(&quot; Default Layout created.&quot;);
+			dockLayout = new DockLayout (dock);
+			if (File.Exists (configFile)) {
+				dockLayout.LoadFromFile (configFile);
+			} else {
+				dockLayout.LoadFromFile (&quot;../data/options/DefaultEditingLayout.xml&quot;);
+			}
+			dockLayout.LoadLayout (&quot;__default__&quot;);
 		}		
 
 		public void Detach()
 		{
 			Console.WriteLine(&quot;Call to SdiWorkSpaceLayout.Detach&quot;);
+			dockLayout.SaveToFile (configFile);
 			rootWidget.Remove(((DefaultWorkbench)workbench).TopMenu);
 			foreach (Gtk.Widget w in toolbarContainer.Children) {
 				toolbarContainer.Remove(w);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000421.html">[Monodevelop-patches-list] r816 - trunk/MonoDevelop/src/Main/Base/Services
</A></li>
	<LI>Next message: <A HREF="000423.html">[Monodevelop-patches-list] r818 - trunk/MonoDevelop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#422">[ date ]</a>
              <a href="thread.html#422">[ thread ]</a>
              <a href="subject.html#422">[ subject ]</a>
              <a href="author.html#422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
