<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2586 - in trunk/MonoDevelop/Core/src:	MonoDevelop.Base MonoDevelop.Dock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2586%20-%20in%20trunk/MonoDevelop/Core/src%3A%0A%09MonoDevelop.Base%20MonoDevelop.Dock&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002185.html">
   <LINK REL="Next"  HREF="002187.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2586 - in trunk/MonoDevelop/Core/src:	MonoDevelop.Base MonoDevelop.Dock</H1>
    <B>John Luke &lt;jluke@cfl.rr.com&gt;</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2586%20-%20in%20trunk/MonoDevelop/Core/src%3A%0A%09MonoDevelop.Base%20MonoDevelop.Dock&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2586 - in trunk/MonoDevelop/Core/src:	MonoDevelop.Base MonoDevelop.Dock">jluke at mono-cvs.ximian.com
       </A><BR>
    <I>Sat Jun  4 16:31:33 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002185.html">[Monodevelop-patches-list] r2585 - in	trunk/MonoDevelop/Core/src/MonoDevelop.Base: .	Internal/Project/Combine
</A></li>
        <LI>Next message: <A HREF="002187.html">[Monodevelop-patches-list] r2587 - in	trunk/MonoDevelop/Extras/BooBinding: . Gui/OptionPanels Project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2186">[ date ]</a>
              <a href="thread.html#2186">[ thread ]</a>
              <a href="subject.html#2186">[ subject ]</a>
              <a href="author.html#2186">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jluke
Date: 2005-06-04 16:31:33 -0400 (Sat, 04 Jun 2005)
New Revision: 2586

Modified:
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/MonoDevelopCore.addin.xml
   trunk/MonoDevelop/Core/src/MonoDevelop.Dock/ChangeLog
   trunk/MonoDevelop/Core/src/MonoDevelop.Dock/DockPaned.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Dock/GdlDockTest.cs
Log:
improve fix for bug 61113 by handling shift|f8 in DockPaned


Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog	2005-06-03 14:48:42 UTC (rev 2585)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog	2005-06-04 20:31:33 UTC (rev 2586)
@@ -1,3 +1,8 @@
+2005-06-04  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">john.luke at gmail.com</A>&gt;
+
+	* MonoDevelopCore.addin.xml: remove workaround
+	for Shift|F8 as the dock handles it now
+
 2005-06-03  Jacob Ils&#248; Christensen  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jacobilsoe at gmail.com</A>&gt;
 
 	* Internal/Project/Combine/Combine.cs: Remove references

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/MonoDevelopCore.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/MonoDevelopCore.addin.xml	2005-06-03 14:48:42 UTC (rev 2585)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/MonoDevelopCore.addin.xml	2005-06-04 20:31:33 UTC (rev 2586)
@@ -405,8 +405,7 @@
 				defaultHandler = &quot;MonoDevelop.Commands.TipOfTheDayHandler&quot;
 				_label = &quot;_Tip of the Day...&quot; 
 				icon = &quot;Icons.16x16.TipOfTheDay&quot; 
-				description = &quot;Show tip of the day&quot;
-				shortcut = &quot;Shift|F8&quot; /&gt;
+				description = &quot;Show tip of the day&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.HelpCommands.About&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.AboutHandler&quot;
 				_label = &quot;_About&quot; 

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Dock/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Dock/ChangeLog	2005-06-03 14:48:42 UTC (rev 2585)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Dock/ChangeLog	2005-06-04 20:31:33 UTC (rev 2586)
@@ -1,3 +1,8 @@
+2005-06-04  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">john.luke at gmail.com</A>&gt;
+
+	* DockPaned.cs: handle Shift|F8 to avoid crash for now
+	* GdlDockTest.cs: remove C# 2 features
+
 2005-04-28  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">john.luke at gmail.com</A>&gt;
 
 	* DockBar.cs: remove redundent RemoveItem call

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Dock/DockPaned.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Dock/DockPaned.cs	2005-06-03 14:48:42 UTC (rev 2585)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Dock/DockPaned.cs	2005-06-04 20:31:33 UTC (rev 2586)
@@ -85,6 +85,7 @@
 			
 			Child.AddNotification (&quot;position&quot;, new GLib.NotifyHandler (OnNotifyPosition));
 			Child.ButtonReleaseEvent += new ButtonReleaseEventHandler (OnButtonReleased);
+			Child.KeyPressEvent += new KeyPressEventHandler (OnKeyPressed);
 												
 			Child.Parent = this;
 			Child.Show ();
@@ -139,6 +140,7 @@
 			// after that we can remove the Paned child
 			if (Child != null) {
 				Child.ButtonReleaseEvent -= new ButtonReleaseEventHandler (OnButtonReleased);
+				Child.KeyPressEvent -= new KeyPressEventHandler (OnKeyPressed);
 				Child.Unparent ();
 				Child = null;
 			}
@@ -308,6 +310,14 @@
 		}
 
 		[GLib.ConnectBefore]
+		void OnKeyPressed (object sender, KeyPressEventArgs a)
+		{
+			// eat Shift|F8, see <A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=61113">http://bugzilla.ximian.com/show_bug.cgi?id=61113</A>
+			if (a.Event.Key == Gdk.Key.F8 &amp;&amp; a.Event.State == Gdk.ModifierType.ShiftMask)
+				a.RetVal = true;
+		}
+
+		[GLib.ConnectBefore]
 		void OnButtonReleased (object sender, ButtonReleaseEventArgs a)
 		{
 			if (a.Event.Button == 1 &amp;&amp; positionChanged) {

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Dock/GdlDockTest.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Dock/GdlDockTest.cs	2005-06-03 14:48:42 UTC (rev 2585)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Dock/GdlDockTest.cs	2005-06-04 20:31:33 UTC (rev 2586)
@@ -72,15 +72,15 @@
 		table.PackEnd (box, false, false, 0);
 		
 		Button button = new Button (Gtk.Stock.Save);
-		button.Clicked += OnSaveLayout;
+		button.Clicked += new EventHandler (OnSaveLayout);
 		box.PackEnd (button, false, true, 0);
 		
 		button = new Button (&quot;Layout Manager&quot;);
-		button.Clicked += OnRunLayoutManager;
+		button.Clicked += new EventHandler (OnRunLayoutManager);
 		box.PackEnd (button, false, true, 0);
 
 		button = new Button (&quot;Dump XML&quot;);
-		button.Clicked += OnDumpXML;
+		button.Clicked += new EventHandler (OnDumpXML);
 		box.PackEnd (button, false, true, 0);
 
 		app.ShowAll ();


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002185.html">[Monodevelop-patches-list] r2585 - in	trunk/MonoDevelop/Core/src/MonoDevelop.Base: .	Internal/Project/Combine
</A></li>
	<LI>Next message: <A HREF="002187.html">[Monodevelop-patches-list] r2587 - in	trunk/MonoDevelop/Extras/BooBinding: . Gui/OptionPanels Project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2186">[ date ]</a>
              <a href="thread.html#2186">[ thread ]</a>
              <a href="subject.html#2186">[ subject ]</a>
              <a href="author.html#2186">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
