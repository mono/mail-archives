<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2718 - in trunk/MonoDevelop: . Extras	Extras/VersionControl Extras/VersionControl/AddIn	Extras/VersionControl/Diff Extras/VersionControl/DiffWidget	Extras/VersionControl/VersionControl
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2718%20-%20in%20trunk/MonoDevelop%3A%20.%20Extras%0A%09Extras/VersionControl%20Extras/VersionControl/AddIn%0A%09Extras/VersionControl/Diff%20Extras/VersionControl/DiffWidget%0A%09Extras/VersionControl/VersionControl&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002317.html">
   <LINK REL="Next"  HREF="002319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2718 - in trunk/MonoDevelop: . Extras	Extras/VersionControl Extras/VersionControl/AddIn	Extras/VersionControl/Diff Extras/VersionControl/DiffWidget	Extras/VersionControl/VersionControl</H1>
    <B>John Luke &lt;jluke@cfl.rr.com&gt;</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2718%20-%20in%20trunk/MonoDevelop%3A%20.%20Extras%0A%09Extras/VersionControl%20Extras/VersionControl/AddIn%0A%09Extras/VersionControl/Diff%20Extras/VersionControl/DiffWidget%0A%09Extras/VersionControl/VersionControl&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2718 - in trunk/MonoDevelop: . Extras	Extras/VersionControl Extras/VersionControl/AddIn	Extras/VersionControl/Diff Extras/VersionControl/DiffWidget	Extras/VersionControl/VersionControl">jluke at mono-cvs.ximian.com
       </A><BR>
    <I>Mon Aug  8 23:02:58 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002317.html">[Monodevelop-patches-list] r2717 - in trunk/MonoDevelop:	Core/src/MonoDevelop.Startup Extras/MonoQuery	Extras/MonoQuery/MonoQuery
</A></li>
        <LI>Next message: <A HREF="002319.html">[Monodevelop-patches-list] r2719 - in trunk/MonoDevelop: .	Extras/VersionControl Extras/VersionControl/AddIn	Extras/VersionControl/Diff Extras/VersionControl/DiffWidget	Extras/VersionControl/VersionControl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2318">[ date ]</a>
              <a href="thread.html#2318">[ thread ]</a>
              <a href="subject.html#2318">[ subject ]</a>
              <a href="author.html#2318">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jluke
Date: 2005-08-08 23:02:58 -0400 (Mon, 08 Aug 2005)
New Revision: 2718

Modified:
   trunk/MonoDevelop/ChangeLog
   trunk/MonoDevelop/Extras/Makefile.am
   trunk/MonoDevelop/Extras/VersionControl/AddIn/Makefile.am
   trunk/MonoDevelop/Extras/VersionControl/ChangeLog
   trunk/MonoDevelop/Extras/VersionControl/Diff/Makefile.am
   trunk/MonoDevelop/Extras/VersionControl/DiffWidget/Makefile.am
   trunk/MonoDevelop/Extras/VersionControl/VersionControl/Makefile.am
   trunk/MonoDevelop/configure.in
Log:
fix the VersionControl addin to be conditional
and install right, disabled by default


Modified: trunk/MonoDevelop/ChangeLog
===================================================================
--- trunk/MonoDevelop/ChangeLog	2005-08-09 02:10:06 UTC (rev 2717)
+++ trunk/MonoDevelop/ChangeLog	2005-08-09 03:02:58 UTC (rev 2718)
@@ -1,3 +1,7 @@
+2005-08-08  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">john.luke at gmail.com</A>&gt;
+
+	* configure.in: add conditional for version control addin
+
 2005-08-05  Alp Toker  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alp at atoker.com</A>&gt;
 
 	* monodevelop.in: Remove 'function' bash-ism to make the launcher script

Modified: trunk/MonoDevelop/Extras/Makefile.am
===================================================================
--- trunk/MonoDevelop/Extras/Makefile.am	2005-08-09 02:10:06 UTC (rev 2717)
+++ trunk/MonoDevelop/Extras/Makefile.am	2005-08-09 03:02:58 UTC (rev 2718)
@@ -1,3 +1,3 @@
 
-#SUBDIRS = PythonBinding MonoQuery 
-SUBDIRS = MonoQuery JavaBinding BooBinding NUnit MonoDeveloperExtensions
+SUBDIRS = MonoQuery JavaBinding BooBinding NUnit MonoDeveloperExtensions VersionControl
+

Modified: trunk/MonoDevelop/Extras/VersionControl/AddIn/Makefile.am
===================================================================
--- trunk/MonoDevelop/Extras/VersionControl/AddIn/Makefile.am	2005-08-09 02:10:06 UTC (rev 2717)
+++ trunk/MonoDevelop/Extras/VersionControl/AddIn/Makefile.am	2005-08-09 03:02:58 UTC (rev 2718)
@@ -1,4 +1,4 @@
-FILES = *.cs
+FILES = Addin.cs Diffs.cs Logs.cs Statuses.cs Task.cs Update.cs
 
 REFS = /r:$(ADDIN_BUILD)/Diff.dll \
 	   /r:$(ADDIN_BUILD)/DiffWidget.dll \
@@ -13,11 +13,11 @@
        $(GCONF_SHARP_LIBS) \
        $(GTKSOURCEVIEW_SHARP_LIBS)
 
-RES = -resource:overlay_added.png \
-	  -resource:overlay_modified.png \
-	  -resource:overlay_conflicted.png \
-	  -resource:overlay_normal.png \
-	  -resource:overlay_locked.png
+RES = -resource:$(srcdir)/overlay_added.png,overlay_added.png \
+	  -resource:$(srcdir)/overlay_modified.png,overlay_modified.png \
+	  -resource:$(srcdir)/overlay_conflicted.png,overlay_conflicted.png \
+	  -resource:$(srcdir)/overlay_normal.png,overlay_normal.png \
+	  -resource:$(srcdir)/overlay_locked.png,overlay_locked.png
 
 ADDIN = VersionControl.addin.xml
 
@@ -25,18 +25,27 @@
 
 DLL = $(ADDIN_BUILD)/VersionControlAddIn.dll
 
+if ENABLE_VERSIONCONTROL
 all: $(ADDIN_BUILD)/$(ADDIN) $(DLL)
+else
+all:
+endif
 
+if ENABLE_VERSIONCONTROL
+addindir = $(MD_ADDIN_DIR)/VersionControl
+addin_DATA = $(srcdir)/$(ADDIN) $(DLL)
+endif
+
 $(ADDIN_BUILD)/$(ADDIN): $(srcdir)/$(ADDIN)
 	mkdir -p $(ADDIN_BUILD)
 	cp $(srcdir)/$(ADDIN) $(ADDIN_BUILD)/$(ADDIN)
 
-$(DLL): $(FILES)
+$(DLL): $(build_sources)
 	mkdir -p $(ADDIN_BUILD)
-	$(CSC) $(CSC_FLAGS) -target:library -out:$@ $(FILES) $(REFS) $(RES)
+	$(CSC) $(CSC_FLAGS) -target:library -out:$@ $(build_sources) $(REFS) $(RES)
 
 CLEANFILES = $(DLL) $(DLL).mdb $(ADDIN_BUILD)/$(ADDIN)
 
-EXTRA_DIST = $(FILES) $(ADDIN)
+EXTRA_DIST = $(FILES) $(ADDIN) overlay_added.png overlay_modified.png overlay_conflicted.png overlay_normal.png overlay_locked.png
 
 

Modified: trunk/MonoDevelop/Extras/VersionControl/ChangeLog
===================================================================
--- trunk/MonoDevelop/Extras/VersionControl/ChangeLog	2005-08-09 02:10:06 UTC (rev 2717)
+++ trunk/MonoDevelop/Extras/VersionControl/ChangeLog	2005-08-09 03:02:58 UTC (rev 2718)
@@ -1,3 +1,12 @@
+2005-08-08  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">john.luke at gmail.com</A>&gt;
+
+	* AddIn/Makefile.am:
+	* Diff/Makefile.am:
+	* DiffWidget/Makefile.am:
+	* VersionControl/Makefile.am: fix distcheck,
+	make it conditional on ENABLE_VERSIONCONTROL,
+	and install it when enabled
+
 2005-07-01  Joshua Tauberer &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tauberer at for.net</A>&gt;
 
 	* Added MD solution files for VersionControl.

Modified: trunk/MonoDevelop/Extras/VersionControl/Diff/Makefile.am
===================================================================
--- trunk/MonoDevelop/Extras/VersionControl/Diff/Makefile.am	2005-08-09 02:10:06 UTC (rev 2717)
+++ trunk/MonoDevelop/Extras/VersionControl/Diff/Makefile.am	2005-08-09 03:02:58 UTC (rev 2718)
@@ -2,17 +2,26 @@
 ADDIN_BUILD = $(top_builddir)/build/AddIns/VersionControl
 ASSEMBLY = $(ADDIN_BUILD)/Diff.dll
 
-FILES = *.cs
+FILES = Diff.cs Merge.cs Patch.cs StructuredDiff.cs TextDiff.cs UnifiedDiff.cs
 
 $(ADDIN_BUILD)/$(ADDIN): $(srcdir)/$(ADDIN)
 
-$(ASSEMBLY): $(FILES)
+$(ASSEMBLY): $(build_sources)
 	mkdir -p $(ADDIN_BUILD)
-	$(CSC) $(CSC_FLAGS) $(FILES) -out:$@ -target:library
+	$(CSC) $(CSC_FLAGS) $(build_sources) -out:$@ -target:library
 
 CLEANFILES = $(ASSEMBLY) $(ASSEMBLY).mdb
 EXTRA_DIST = $(FILES)
 
+if ENABLE_VERSIONCONTROL
 all: $(ASSEMBLY)
+else
+all:
+endif
 
+if ENABLE_VERSIONCONTROL
+addindir = $(MD_ADDIN_DIR)/VersionControl
+addin_DATA = $(ASSEMBLY)
+endif
+
 include $(top_srcdir)/Makefile.include

Modified: trunk/MonoDevelop/Extras/VersionControl/DiffWidget/Makefile.am
===================================================================
--- trunk/MonoDevelop/Extras/VersionControl/DiffWidget/Makefile.am	2005-08-09 02:10:06 UTC (rev 2717)
+++ trunk/MonoDevelop/Extras/VersionControl/DiffWidget/Makefile.am	2005-08-09 03:02:58 UTC (rev 2718)
@@ -3,17 +3,26 @@
 ASSEMBLY = $(ADDIN_BUILD)/DiffWidget.dll
 
 DLLS = 
-FILES = *.cs
+FILES = widget.cs
 
 $(ADDIN_BUILD)/$(ADDIN): $(srcdir)/$(ADDIN)
 
-$(ASSEMBLY): $(FILES)
+$(ASSEMBLY): $(build_sources)
 	mkdir -p $(ADDIN_BUILD)
-	$(CSC) $(CSC_FLAGS) $(FILES) -out:$@ -target:library -r:$(ADDIN_BUILD)/Diff.dll $(GTK_SHARP_LIBS)
+	$(CSC) $(CSC_FLAGS) $(build_sources) -out:$@ -target:library -r:$(ADDIN_BUILD)/Diff.dll $(GTK_SHARP_LIBS)
 
 CLEANFILES = $(ASSEMBLY) $(ASSEMBLY).mdb
 EXTRA_DIST = $(FILES)
 
+if ENABLE_VERSIONCONTROL
 all: $(ASSEMBLY)
+else
+all:
+endif
 
+if ENABLE_VERSIONCONTROL
+addindir = $(MD_ADDIN_DIR)/VersionControl
+addin_DATA = $(ASSEMBLY)
+endif
+
 include $(top_srcdir)/Makefile.include

Modified: trunk/MonoDevelop/Extras/VersionControl/VersionControl/Makefile.am
===================================================================
--- trunk/MonoDevelop/Extras/VersionControl/VersionControl/Makefile.am	2005-08-09 02:10:06 UTC (rev 2717)
+++ trunk/MonoDevelop/Extras/VersionControl/VersionControl/Makefile.am	2005-08-09 03:02:58 UTC (rev 2718)
@@ -3,17 +3,26 @@
 ASSEMBLY = $(ADDIN_BUILD)/VersionControl.dll
 
 DLLS = 
-FILES = *.cs
+FILES = Subversion.cs VersionControl.cs
 
 $(ADDIN_BUILD)/$(ADDIN): $(srcdir)/$(ADDIN)
 
-$(ASSEMBLY): $(FILES)
+$(ASSEMBLY): $(build_sources)
 	mkdir -p $(ADDIN_BUILD)
-	$(CSC) $(CSC_FLAGS) $(FILES) -out:$@ -target:library
+	$(CSC) $(CSC_FLAGS) $(build_sources) -out:$@ -target:library
 
 CLEANFILES = $(ASSEMBLY) $(ASSEMBLY).mdb
 EXTRA_DIST = $(FILES)
 
+if ENABLE_VERSIONCONTROL
 all: $(ASSEMBLY)
+else
+all:
+endif
 
+if ENABLE_VERSIONCONTROL
+addindir = $(MD_ADDIN_DIR)/VersionControl
+addin_DATA = $(ASSEMBLY)
+endif
+
 include $(top_srcdir)/Makefile.include

Modified: trunk/MonoDevelop/configure.in
===================================================================
--- trunk/MonoDevelop/configure.in	2005-08-09 02:10:06 UTC (rev 2717)
+++ trunk/MonoDevelop/configure.in	2005-08-09 03:02:58 UTC (rev 2718)
@@ -148,6 +148,13 @@
 	fi
 fi
 
+AC_ARG_ENABLE(versioncontrol,
+	AC_HELP_STRING([--enable-versioncontrol],
+		[enable version control support [default=no]]),
+		enable_versioncontrol=yes, enable_versioncontrol=no)
+
+AM_CONDITIONAL(ENABLE_VERSIONCONTROL, test x$enable_versioncontrol = xyes)
+
 MOZILLA_HOME=&quot;`$PKG_CONFIG --variable=libdir mozilla-gtkmozembed`&quot;
 AC_SUBST(MOZILLA_HOME)
 
@@ -263,4 +270,5 @@
 echo &quot;   * boo support: $enable_boo&quot;
 echo &quot;   * NUnit support: $enable_nunit&quot;
 echo &quot;   * Mono class library development extensions: $enable_monoextensions&quot;
+echo &quot;   * Version control support: $enable_versioncontrol&quot;
 echo &quot;&quot;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002317.html">[Monodevelop-patches-list] r2717 - in trunk/MonoDevelop:	Core/src/MonoDevelop.Startup Extras/MonoQuery	Extras/MonoQuery/MonoQuery
</A></li>
	<LI>Next message: <A HREF="002319.html">[Monodevelop-patches-list] r2719 - in trunk/MonoDevelop: .	Extras/VersionControl Extras/VersionControl/AddIn	Extras/VersionControl/Diff Extras/VersionControl/DiffWidget	Extras/VersionControl/VersionControl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2318">[ date ]</a>
              <a href="thread.html#2318">[ thread ]</a>
              <a href="subject.html#2318">[ subject ]</a>
              <a href="author.html#2318">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
