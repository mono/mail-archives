<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2731 - in	trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2731%20-%20in%0A%09trunk/MonoDevelop/Core/src/MonoDevelop.Base%3A%20.%20Services&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002329.html">
   <LINK REL="Next"  HREF="002331.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2731 - in	trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Services</H1>
    <B>Peter Johanson &lt;latexer@gentoo.org&gt;</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2731%20-%20in%0A%09trunk/MonoDevelop/Core/src/MonoDevelop.Base%3A%20.%20Services&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2731 - in	trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Services">pjohanson at mono-cvs.ximian.com
       </A><BR>
    <I>Wed Aug 10 09:22:12 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002329.html">[Monodevelop-patches-list] r2729 -	trunk/MonoDevelop/Extras/BooBinding/Gui/OptionPanels
</A></li>
        <LI>Next message: <A HREF="002331.html">[Monodevelop-patches-list] r2732 - in	trunk/MonoDevelop/Extras/BooBinding: . Parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2330">[ date ]</a>
              <a href="thread.html#2330">[ thread ]</a>
              <a href="subject.html#2330">[ subject ]</a>
              <a href="author.html#2330">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: pjohanson
Date: 2005-08-10 09:22:12 -0400 (Wed, 10 Aug 2005)
New Revision: 2731

Modified:
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DefaultLoggingService.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ILoggingService.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ResourceService.cs
Log:
Add support for logging to arbitrarily named loggers.


Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog	2005-08-10 12:54:07 UTC (rev 2730)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog	2005-08-10 13:22:12 UTC (rev 2731)
@@ -1,3 +1,11 @@
+2005-08-10  Peter Johanson  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">latexer at gentoo.org</A>&gt;
+
+	* Services/ILoggingService.cs:
+	* Services/DefaultLoggingService.cs: Add support for for logging to
+	arbitrarily named loggers. Allows for easy filtering/control of
+	logging.
+	* Services/ResourceService.cs: Report to logger named by service type.
+
 2005-08-10  Ben Motmans  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">ben.motmans at gmail.com</A>&gt;
 
     * MonoDevelop.Base.mdp: references update + missing/added files

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DefaultLoggingService.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DefaultLoggingService.cs	2005-08-10 12:54:07 UTC (rev 2730)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DefaultLoggingService.cs	2005-08-10 13:22:12 UTC (rev 2731)
@@ -32,9 +32,9 @@
 			return LogManager.GetLogger(typeof(ILoggingService));
 		}
 		
-		ILog GetLogger (System.Type type)
+		ILog GetLogger (string name)
 		{
-			return LogManager.GetLogger(type);
+			return LogManager.GetLogger(name);
 		}
 
 		public bool IsDebugEnabled {
@@ -67,33 +67,33 @@
 			}
 		}
 
-		public void Debug (System.Type type, object message)
+		public void Debug (string logger, object message)
 		{
-			GetLogger(type).Debug (message);
+			GetLogger(logger).Debug (message);
 			OnLogAppended (&quot;Debug&quot;, message.ToString());
 		}
 
-		public void Info (System.Type type, object message)
+		public void Info (string logger, object message)
 		{
-			GetLogger(type).Info (message);
+			GetLogger(logger).Info (message);
 			OnLogAppended (&quot;Info&quot;, message.ToString());
 		}
 
-		public void Warn (System.Type type, object message)
+		public void Warn (string logger, object message)
 		{
-			GetLogger(type).Warn (message);
+			GetLogger(logger).Warn (message);
 			OnLogAppended (&quot;Warn&quot;, message.ToString());
 		}
 
-		public void Error (System.Type type, object message)
+		public void Error (string logger, object message)
 		{
-			GetLogger(type).Error (message);
+			GetLogger(logger).Error (message);
 			OnLogAppended (&quot;Error&quot;, message.ToString());
 		}
 
-		public void Fatal (System.Type type, object message)
+		public void Fatal (string logger, object message)
 		{
-			GetLogger(type).Fatal (message);
+			GetLogger(logger).Fatal (message);
 			OnLogAppended (&quot;Fatal&quot;, message.ToString());
 		}
 
@@ -132,6 +132,12 @@
 			GetLogger().Debug (message, t);
 			OnLogAppended (&quot;Debug&quot;, message + t.ToString());
 		}
+
+		public void Debug (string logger, object message, Exception t)
+		{
+			GetLogger(logger).Debug (message, t);
+			OnLogAppended (&quot;Debug&quot;, message + t.ToString());
+		}
 		
 		public void Info (object message, Exception t)
 		{
@@ -139,17 +145,35 @@
 			OnLogAppended (&quot;Info&quot;, message + t.ToString());
 		}
 		
+		public void Info (string logger, object message, Exception t)
+		{
+			GetLogger(logger).Info (message, t);
+			OnLogAppended (&quot;Info&quot;, message + t.ToString());
+		}
+		
 		public void Warn (object message, Exception t)
 		{
 			GetLogger().Warn (message, t);
 			OnLogAppended (&quot;Warn&quot;, message + t.ToString());
 		}
 
+		public void Warn (string logger, object message, Exception t)
+		{
+			GetLogger(logger).Warn (message, t);
+			OnLogAppended (&quot;Warn&quot;, message + t.ToString());
+		}
+
 		public void Error (object message, Exception t)
 		{
 			GetLogger().Error (message, t);
 			OnLogAppended (&quot;Error&quot;, message + t.ToString());
 		}
+
+		public void Error (string logger, object message, Exception t)
+		{
+			GetLogger(logger).Error (message, t);
+			OnLogAppended (&quot;Error&quot;, message + t.ToString());
+		}
 		
 		public void Fatal (object message, Exception t)
 		{
@@ -157,6 +181,12 @@
 			OnLogAppended (&quot;Fatal&quot;, message + t.ToString());
 		}
 
+		public void Fatal (string logger, object message, Exception t)
+		{
+			GetLogger(logger).Fatal (message, t);
+			OnLogAppended (&quot;Fatal&quot;, message + t.ToString());
+		}
+
 		public void DebugFormat (string format, params object[] args)
 		{
 			GetLogger().DebugFormat (format, args);
@@ -187,33 +217,33 @@
 			OnLogAppended (&quot;Fatal&quot;, String.Format(format, args));
 		}
 
-		public void DebugFormat (Type type, string format, params object[] args)
+		public void DebugFormat (string logger, string format, params object[] args)
 		{
-			GetLogger(type).DebugFormat (format, args);
+			GetLogger(logger).DebugFormat (format, args);
 			OnLogAppended (&quot;Debug&quot;, String.Format(format, args));
 		}
 		
-		public void InfoFormat (Type type, string format, params object[] args)
+		public void InfoFormat (string logger, string format, params object[] args)
 		{
-			GetLogger(type).InfoFormat (format, args);
+			GetLogger(logger).InfoFormat (format, args);
 			OnLogAppended (&quot;Info&quot;, String.Format(format, args));
 		}
 		
-		public void WarnFormat (Type type, string format, params object[] args)
+		public void WarnFormat (string logger, string format, params object[] args)
 		{
-			GetLogger(type).WarnFormat (format, args);
+			GetLogger(logger).WarnFormat (format, args);
 			OnLogAppended (&quot;Warn&quot;, String.Format(format, args));
 		}
 		
-		public void ErrorFormat (Type type, string format, params object[] args)
+		public void ErrorFormat (string logger, string format, params object[] args)
 		{
-			GetLogger(type).ErrorFormat (format, args);
+			GetLogger(logger).ErrorFormat (format, args);
 			OnLogAppended (&quot;Error&quot;, String.Format(format, args));
 		}
 		
-		public void FatalFormat (Type type, string format, params object[] args)
+		public void FatalFormat (string logger, string format, params object[] args)
 		{
-			GetLogger(type).FatalFormat (format, args);
+			GetLogger(logger).FatalFormat (format, args);
 			OnLogAppended (&quot;Fatal&quot;, String.Format(format, args));
 		}
 
@@ -223,17 +253,35 @@
 			OnLogAppended (&quot;Debug&quot;, String.Format(provider, format, args));
 		}
 		
+		public void DebugFormat(string logger, IFormatProvider provider, string format, params object[] args)
+		{
+			GetLogger(logger).DebugFormat (provider, format, args);
+			OnLogAppended (&quot;Debug&quot;, String.Format(provider, format, args));
+		}
+		
 		public void InfoFormat(IFormatProvider provider, string format, params object[] args)
 		{
 			GetLogger().InfoFormat (provider, format, args);
 			OnLogAppended (&quot;Info&quot;, String.Format(provider, format, args));
 		}
 
+		public void InfoFormat(string logger, IFormatProvider provider, string format, params object[] args)
+		{
+			GetLogger(logger).InfoFormat (provider, format, args);
+			OnLogAppended (&quot;Info&quot;, String.Format(provider, format, args));
+		}
+
 		public void WarnFormat(IFormatProvider provider, string format, params object[] args)
 		{
 			GetLogger().WarnFormat (provider, format, args);
 			OnLogAppended (&quot;Warn&quot;, String.Format(provider, format, args));
 		}
+		
+		public void WarnFormat(string logger, IFormatProvider provider, string format, params object[] args)
+		{
+			GetLogger(logger).WarnFormat (provider, format, args);
+			OnLogAppended (&quot;Warn&quot;, String.Format(provider, format, args));
+		}
 
 		public void ErrorFormat(IFormatProvider provider, string format, params object[] args)
 		{
@@ -241,12 +289,24 @@
 			OnLogAppended (&quot;Error&quot;, String.Format(provider, format, args));
 		}
 
+		public void ErrorFormat(string logger, IFormatProvider provider, string format, params object[] args)
+		{
+			GetLogger(logger).ErrorFormat (provider, format, args);
+			OnLogAppended (&quot;Error&quot;, String.Format(provider, format, args));
+		}
+
 		public void FatalFormat(IFormatProvider provider, string format, params object[] args)
 		{
 			GetLogger().FatalFormat (provider, format, args);
 			OnLogAppended (&quot;Fatal&quot;, String.Format(provider, format, args));
 		}
 
+		public void FatalFormat(string logger, IFormatProvider provider, string format, params object[] args)
+		{
+			GetLogger(logger).FatalFormat (provider, format, args);
+			OnLogAppended (&quot;Fatal&quot;, String.Format(provider, format, args));
+		}
+
 		public void OnLogAppended(string level, string message)
 		{
 			if (LogAppended != null) {

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ILoggingService.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ILoggingService.cs	2005-08-10 12:54:07 UTC (rev 2730)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ILoggingService.cs	2005-08-10 13:22:12 UTC (rev 2731)
@@ -20,6 +20,12 @@
 		void Warn(object message);
 		void Error(object message);
 		void Fatal(object message);
+		
+		void Debug(string logger, object message);
+		void Info(string logger, object message);
+		void Warn(string logger, object message);
+		void Error(string logger, object message);
+		void Fatal(string logger, object message);
 
 		/* Log a message object and exception */
 		void Debug(object message, Exception t);
@@ -28,6 +34,12 @@
 		void Error(object message, Exception t);
 		void Fatal(object message, Exception t);
 
+		void Debug(string logger, object message, Exception t);
+		void Info(string logger, object message, Exception t);
+		void Warn(string logger, object message, Exception t);
+		void Error(string logger, object message, Exception t);
+		void Fatal(string logger, object message, Exception t);
+
 		/* Log a message string using the System.String.Format syntax */
 		void DebugFormat(string format, params object[] args);
 		void InfoFormat(string format, params object[] args);
@@ -35,6 +47,12 @@
 		void ErrorFormat(string format, params object[] args);
 		void FatalFormat(string format, params object[] args);
 
+		void DebugFormat(string logger, string format, params object[] args);
+		void InfoFormat(string logger, string format, params object[] args);
+		void WarnFormat(string logger, string format, params object[] args);
+		void ErrorFormat(string logger, string format, params object[] args);
+		void FatalFormat(string logger, string format, params object[] args);
+
 		/* Log a message string using the System.String.Format syntax */
 		void DebugFormat(IFormatProvider provider, string format, params object[] args);
 		void InfoFormat(IFormatProvider provider, string format, params object[] args);
@@ -42,6 +60,12 @@
 		void ErrorFormat(IFormatProvider provider, string format, params object[] args);
 		void FatalFormat(IFormatProvider provider, string format, params object[] args);
 
+		void DebugFormat(string logger, IFormatProvider provider, string format, params object[] args);
+		void InfoFormat(string logger, IFormatProvider provider, string format, params object[] args);
+		void WarnFormat(string logger, IFormatProvider provider, string format, params object[] args);
+		void ErrorFormat(string logger, IFormatProvider provider, string format, params object[] args);
+		void FatalFormat(string logger, IFormatProvider provider, string format, params object[] args);
+
 		event LogAppendedHandler LogAppended;
 	}
 

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ResourceService.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ResourceService.cs	2005-08-10 12:54:07 UTC (rev 2730)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ResourceService.cs	2005-08-10 13:22:12 UTC (rev 2731)
@@ -213,7 +213,7 @@
 			catch (GLib.GException ex) {
 				// just discard the exception, the icon simply can't be
 				// loaded
-				Runtime.LoggingService.InfoFormat(&quot;Warning: can't load &quot; + filename +
+				Runtime.LoggingService.Info(typeof(ResourceService).ToString(), &quot;Warning: can't load &quot; + filename +
 				                   &quot; icon file&quot;);
 			}
 		}
@@ -235,7 +235,7 @@
 			if (s != null)
 				return s;
 			
-			Runtime.LoggingService.InfoFormat(&quot;WARNING Could not find stock {0}&quot;, filename);
+			Runtime.LoggingService.InfoFormat(typeof(ResourceService).ToString(), &quot;WARNING Could not find stock {0}&quot;, filename);
 			
 			return filename;
 		}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002329.html">[Monodevelop-patches-list] r2729 -	trunk/MonoDevelop/Extras/BooBinding/Gui/OptionPanels
</A></li>
	<LI>Next message: <A HREF="002331.html">[Monodevelop-patches-list] r2732 - in	trunk/MonoDevelop/Extras/BooBinding: . Parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2330">[ date ]</a>
              <a href="thread.html#2330">[ thread ]</a>
              <a href="subject.html#2330">[ subject ]</a>
              <a href="author.html#2330">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
