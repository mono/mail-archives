<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2062 - in trunk/MonoDevelop/Core: build/AddIns src/AddIns/BackendBindings/CSharpBinding src/AddIns/BackendBindings/ILAsmBinding src/AddIns/BackendBindings/JavaBinding src/AddIns/BackendBindings/NemerleBinding src/AddIns/BackendBindings/VBNetBinding src/AddIns/DisplayBindings/SourceEditor src/AddIns/DisplayBindings/SourceEditor/Gui src/Main/Base src/Main/Base/Commands src/Main/Base/Gui/ContentInterfaces src/Main/Base/Internal/Codons/LanguageBinding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2062%20-%20in%20trunk/MonoDevelop/Core%3A%20build/AddIns%20src/AddIns/BackendBindings/CSharpBinding%20src/AddIns/BackendBindings/ILAsmBinding%20src/AddIns/BackendBindings/JavaBinding%20src/AddIns/BackendBindings/NemerleBinding%20src/AddIns/BackendBindings/VBNetBinding%20src/AddIns/DisplayBindings/SourceEditor%20src/AddIns/DisplayBindings/SourceEditor/Gui%20src/Main/Base%20src/Main/Base/Commands%20src/Main/Base/Gui/ContentInterfaces%20src/Main/Base/Internal/Codons/LanguageBinding&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001665.html">
   <LINK REL="Next"  HREF="001667.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2062 - in trunk/MonoDevelop/Core: build/AddIns src/AddIns/BackendBindings/CSharpBinding src/AddIns/BackendBindings/ILAsmBinding src/AddIns/BackendBindings/JavaBinding src/AddIns/BackendBindings/NemerleBinding src/AddIns/BackendBindings/VBNetBinding src/AddIns/DisplayBindings/SourceEditor src/AddIns/DisplayBindings/SourceEditor/Gui src/Main/Base src/Main/Base/Commands src/Main/Base/Gui/ContentInterfaces src/Main/Base/Internal/Codons/LanguageBinding</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2062%20-%20in%20trunk/MonoDevelop/Core%3A%20build/AddIns%20src/AddIns/BackendBindings/CSharpBinding%20src/AddIns/BackendBindings/ILAsmBinding%20src/AddIns/BackendBindings/JavaBinding%20src/AddIns/BackendBindings/NemerleBinding%20src/AddIns/BackendBindings/VBNetBinding%20src/AddIns/DisplayBindings/SourceEditor%20src/AddIns/DisplayBindings/SourceEditor/Gui%20src/Main/Base%20src/Main/Base/Commands%20src/Main/Base/Gui/ContentInterfaces%20src/Main/Base/Internal/Codons/LanguageBinding&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2062 - in trunk/MonoDevelop/Core: build/AddIns src/AddIns/BackendBindings/CSharpBinding src/AddIns/BackendBindings/ILAsmBinding src/AddIns/BackendBindings/JavaBinding src/AddIns/BackendBindings/NemerleBinding src/AddIns/BackendBindings/VBNetBinding src/AddIns/DisplayBindings/SourceEditor src/AddIns/DisplayBindings/SourceEditor/Gui src/Main/Base src/Main/Base/Commands src/Main/Base/Gui/ContentInterfaces src/Main/Base/Internal/Codons/LanguageBinding">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Tue Dec  7 19:39:16 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001665.html">[Monodevelop-patches-list] r2061 - in trunk/MonoDevelop/Core/src/Main/Base: . Gui/Pads/HelpBrowser
</A></li>
        <LI>Next message: <A HREF="001667.html">[Monodevelop-patches-list] r2063 - in trunk/MonoDevelop/Core/src: AddIns/BackendBindings/CSharpBinding Main/Base Main/Base/Internal/Project/Combine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1666">[ date ]</a>
              <a href="thread.html#1666">[ thread ]</a>
              <a href="subject.html#1666">[ subject ]</a>
              <a href="author.html#1666">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-12-07 19:39:15 -0500 (Tue, 07 Dec 2004)
New Revision: 2062

Added:
   trunk/MonoDevelop/Core/src/Main/Base/Gui/ContentInterfaces/ICodeStyleOperations.cs
Modified:
   trunk/MonoDevelop/Core/build/AddIns/ChangeLog
   trunk/MonoDevelop/Core/build/AddIns/SharpDevelopCore.addin.xml
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpLanguageBinding.cs
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/ILAsmBinding/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/ILAsmBinding/ILAsmLanguageBinding.cs
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding/JavaLanguageBinding.cs
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleLanguageBinding.cs
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/VBNetBinding/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/VBNetBinding/VBLanguageBinding.cs
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorBuffer.cs
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs
   trunk/MonoDevelop/Core/src/Main/Base/ChangeLog
   trunk/MonoDevelop/Core/src/Main/Base/Commands/EditCommands.cs
   trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/LanguageBinding/ILanguageBinding.cs
   trunk/MonoDevelop/Core/src/Main/Base/Makefile.am
Log:
Merging patch from Alexmipego.

2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;
	
	* Gui/SourceEditorDisplayBinding.cs,
	* Gui/SourceEditorBuffer.cs: Added implementation for CommentCode and UncommentCode

2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;

	* ILAsmLanguageBinding.cs: Added CommentTag to be used by (Un)CommentCode

2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;

	* NemerleLanguageBinding.cs: Added CommentTag to be used by (Un)CommentCode

2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;

	* VBLanguageBinding.cs: Added CommentTag to be used by (Un)CommentCode

2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;

	* CSharpLanguageBinding.cs: Added CommentTag to be used by (Un)CommentCode

2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;

	* JavaLanguageBinding.cs: Added CommentTag to be used by (Un)CommentCode

2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;

	*  Gui/ContentInterfaces/ICodeStyleOperations.cs: Added to rule style changes in code like (Un)Comment Code
	* Commands/EditCommands.cs: Changed to handle (Un)CommentCode menu options
	* Internal/Codons/LanguageBinding/ILanguageBinding.cs: Added CommentTag to all language bindings
	* MakeFile.am: Added reference to Gui/ContentInterfaces/ICodeStyleOperations.cs

2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;
	
	* SharpDevelopCore.Addin.xml: Added Comment Code and UncommentCode



Modified: trunk/MonoDevelop/Core/build/AddIns/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/ChangeLog	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/build/AddIns/ChangeLog	2004-12-08 00:39:15 UTC (rev 2062)
@@ -1,3 +1,7 @@
+2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;
+	
+	* SharpDevelopCore.Addin.xml: Added Comment Code and UncommentCode
+
 2004-11-20  Pawel Rozanski  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tokugawa at nemerle.org</A>&gt;
 
 	* AddIns/BackendBindings/NemerleBinding.addin.xml:

Modified: trunk/MonoDevelop/Core/build/AddIns/SharpDevelopCore.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/SharpDevelopCore.addin.xml	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/build/AddIns/SharpDevelopCore.addin.xml	2004-12-08 00:39:15 UTC (rev 2062)
@@ -702,8 +702,18 @@
 						  description = &quot;${res:XML.MainMenu.EditMenu.SelectAll.Description}&quot; 
 						  shortcut = &quot;Control|A&quot;
 						  class = &quot;MonoDevelop.Commands.SelectAll&quot;/&gt;
+			                &lt;MenuItem id = &quot;Separator4&quot; _label = &quot;-&quot; /&gt;
+					&lt;MenuItem id = &quot;CommentCode&quot;
+						shortcut = &quot;Control|Alt|C&quot;
+						_label = &quot;C_omment Code&quot;
+						class = &quot;MonoDevelop.Commands.CommentCode&quot;/&gt;
+					&lt;MenuItem id = &quot;UncommentCode&quot;
+						shortcut = &quot;Control|Alt|U&quot;
+						_label = &quot;_Uncomment Code&quot;
+						class = &quot;MonoDevelop.Commands.UncommentCode&quot;/&gt;
+
 		        &lt;/Conditional&gt;
-	                &lt;MenuItem id = &quot;Separator4&quot; _label = &quot;-&quot; /&gt;
+	                &lt;MenuItem id = &quot;Separator5&quot; _label = &quot;-&quot; /&gt;
 	                &lt;Conditional action=&quot;Disable&quot;&gt;
 		                &lt;Or&gt;
 		                	&lt;Condition activewindow=&quot;*&quot;/&gt;

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpLanguageBinding.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpLanguageBinding.cs	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpLanguageBinding.cs	2004-12-08 00:39:15 UTC (rev 2062)
@@ -97,5 +97,10 @@
 		{
 			compilerManager.GenerateMakefile (project, parentCombine);
 		}
+		
+		public string CommentTag
+		{
+			get { return &quot;//&quot;; }
+		}
 	}
 }

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/ChangeLog	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/ChangeLog	2004-12-08 00:39:15 UTC (rev 2062)
@@ -1,3 +1,7 @@
+2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;
+
+	* CSharpLanguageBinding.cs: Added CommentTag to be used by (Un)CommentCode
+
 2004-11-16  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
 
 	* CSharpBindingCompilerManager.cs: Properly output local assembly

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/ILAsmBinding/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/ILAsmBinding/ChangeLog	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/ILAsmBinding/ChangeLog	2004-12-08 00:39:15 UTC (rev 2062)
@@ -1,3 +1,7 @@
+2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;
+
+	* ILAsmLanguageBinding.cs: Added CommentTag to be used by (Un)CommentCode
+
 2004-06-08  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jluke at cfl.rr.com</A>&gt;
 
 	* ILAsmCompilerManager.cs:

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/ILAsmBinding/ILAsmLanguageBinding.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/ILAsmBinding/ILAsmLanguageBinding.cs	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/ILAsmBinding/ILAsmLanguageBinding.cs	2004-12-08 00:39:15 UTC (rev 2062)
@@ -109,5 +109,10 @@
 			throw new NotImplementedException ();
 		}
 		
+		// source: irc
+		public string CommentTag
+		{
+			get { return &quot;//&quot;; }
+		}
 	}
 }

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding/ChangeLog	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding/ChangeLog	2004-12-08 00:39:15 UTC (rev 2062)
@@ -1,3 +1,7 @@
+2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;
+
+	* JavaLanguageBinding.cs: Added CommentTag to be used by (Un)CommentCode
+
 2004-11-05  Levi Bard  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">taktaktaktaktaktaktaktaktaktak at gmail.com</A>&gt;
 
 	* Parser/Parser.cs: Added HandlesFileExtension() to work with new

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding/JavaLanguageBinding.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding/JavaLanguageBinding.cs	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding/JavaLanguageBinding.cs	2004-12-08 00:39:15 UTC (rev 2062)
@@ -97,5 +97,10 @@
 			throw new NotImplementedException ();
 		}
 		
+		// <A HREF="http://www.nbirn.net/Resources/Developers/Conventions/Commenting/Java_Comments.htm#CommentBlock">http://www.nbirn.net/Resources/Developers/Conventions/Commenting/Java_Comments.htm#CommentBlock</A>
+		public string CommentTag
+		{
+			get { return &quot;//&quot;; }
+		}
 	}
 }

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/ChangeLog	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/ChangeLog	2004-12-08 00:39:15 UTC (rev 2062)
@@ -1,3 +1,7 @@
+2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;
+
+	* NemerleLanguageBinding.cs: Added CommentTag to be used by (Un)CommentCode
+
 2004-07-06  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
 
 	* NemerleBindingExecutionServices.cs: removed.

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleLanguageBinding.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleLanguageBinding.cs	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleLanguageBinding.cs	2004-12-08 00:39:15 UTC (rev 2062)
@@ -80,5 +80,11 @@
 		{
 			compilerServices.GenerateMakefile(project, parentCombine);
 		}
+		
+		// <A HREF="http://nemerle.org/csharp-diff.html">http://nemerle.org/csharp-diff.html</A>
+		public string CommentTag
+		{
+			get { return &quot;//&quot;; }
+		}
 	}
 }

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/VBNetBinding/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/VBNetBinding/ChangeLog	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/VBNetBinding/ChangeLog	2004-12-08 00:39:15 UTC (rev 2062)
@@ -1,3 +1,7 @@
+2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;
+
+	* VBLanguageBinding.cs: Added CommentTag to be used by (Un)CommentCode
+
 2004-11-05  Levi Bard  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">taktaktaktaktaktaktaktaktaktak at gmail.com</A>&gt;
 
 	* Imported from #D and made to work with MD tools and namespaces

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/VBNetBinding/VBLanguageBinding.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/VBNetBinding/VBLanguageBinding.cs	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/VBNetBinding/VBLanguageBinding.cs	2004-12-08 00:39:15 UTC (rev 2062)
@@ -111,6 +111,10 @@
 		{
 			compilerServices.GenerateMakefile (project, parentCombine);
 		}
-
+
+		public string CommentTag
+		{
+			get { return &quot;'&quot;; }
+		}
 	}
 }

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog	2004-12-08 00:39:15 UTC (rev 2062)
@@ -1,3 +1,8 @@
+2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;
+	
+	* Gui/SourceEditorDisplayBinding.cs,
+	* Gui/SourceEditorBuffer.cs: Added implementation for CommentCode and UncommentCode
+
 2004-12-07  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt;
 
 	* Gui/Pads/CompilerMessageView.cs: Subscribe to service events using

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorBuffer.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorBuffer.cs	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorBuffer.cs	2004-12-08 00:39:15 UTC (rev 2062)
@@ -688,5 +688,90 @@
 		}
 
 #endregion
+
+#region ICodeStyleOperations
+		public void CommentCode ()
+		{
+			string commentTag = &quot;//&quot;; // as default
+			commentTag = Runtime.Languages.GetBindingPerFileName (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow.ViewContent.ContentName).CommentTag;
+			
+			TextIter textStart;
+			TextIter textEnd;
+			GetSelectionBounds (out textStart, out textEnd);
+			if (textStart.Line == textEnd.Line)
+			{ // all the code is in one line, just comment the select text
+				Insert (ref textStart, commentTag);
+			}
+			else
+			{ // comment the entire lines
+				int numberOfLines = textEnd.Line - textStart.Line + 1;
+				TextMark mTextStart = CreateMark (null, textStart, true);
+				TextMark mTextTmp = mTextStart;
+				
+				for (int i=0; i&lt;numberOfLines; i++)
+				{
+					TextIter textTmp = GetIterAtMark (mTextTmp);
+					// add the comment tag
+					textTmp.LineOffset = 0;
+					Insert (ref textTmp, commentTag);
+					// setup a mark on next line
+					textTmp = GetIterAtMark (mTextTmp);
+					textTmp.ForwardLine ();
+					mTextTmp = CreateMark (null, textTmp, true);
+				}			
+			}
+		}
+		
+		public void UncommentCode ()
+		{
+			string commentTag = &quot;//&quot;; // as default
+			commentTag = Runtime.Languages.GetBindingPerFileName (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow.ViewContent.ContentName).CommentTag;
+			
+			TextIter textStart;
+			TextIter textEnd;
+			GetSelectionBounds (out textStart, out textEnd);
+			if (textStart.Line == textEnd.Line)
+			{ // all the code is in one line, just umcomment is text starts with comment tag
+				textEnd = textStart;
+				textEnd.ForwardChars (commentTag.Length);
+				if (textStart.GetText (textEnd) == commentTag)
+					Delete (ref textStart, ref textEnd);
+			}
+			else
+			{ // uncomment the entire lines
+				int numberOfLines = textEnd.Line - textStart.Line + 1;
+				TextMark mTextStart = CreateMark (null, textStart, true);
+				TextMark mTextTmp = mTextStart;
+				
+				for (int i=0; i&lt;numberOfLines; i++)
+				{
+					TextIter textTmp = GetIterAtMark (mTextTmp);
+					// delete the comment tag
+					textTmp.LineOffset = 0;
+										
+					// the user can have spaces at start of line, handling that
+					TextIter textLineEnd = textTmp;
+					textLineEnd.ForwardToLineEnd ();
+					string trimmedText, fullText;
+					int spaces;
+					fullText = textTmp.GetText (textLineEnd);
+					trimmedText = fullText.TrimStart ();
+					spaces = fullText.Length - trimmedText.Length;
+					if (trimmedText.StartsWith (commentTag))
+					{
+						textTmp.ForwardChars (spaces);
+						textEnd = textTmp;
+						textEnd.ForwardChars (commentTag.Length);
+						Delete (ref textTmp, ref textEnd);
+					}
+					
+					// setup a mark on next line
+					textTmp = GetIterAtMark (mTextTmp);
+					textTmp.ForwardLine ();
+					mTextTmp = CreateMark (null, textTmp, true);
+				}			
+			}			
+		}
+#endregion
 	}
 }

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs	2004-12-08 00:39:15 UTC (rev 2062)
@@ -93,7 +93,7 @@
 	}
 	
 	public class SourceEditorDisplayBindingWrapper : AbstractViewContent,
-		IEditable, IPositionable, IBookmarkOperations, IDebuggableEditor
+		IEditable, IPositionable, IBookmarkOperations, IDebuggableEditor, ICodeStyleOperations
 	{
 
 		//internal FileSystemWatcher fsw;
@@ -371,7 +371,16 @@
 			statusBarService.SetInsertMode (insert_mode = ! insert_mode);
 		}
 #endregion
-
+#region ICodeStyleOperations
+		void ICodeStyleOperations.CommentCode ()
+		{
+			se.Buffer.CommentCode ();
+		}
+		void ICodeStyleOperations.UncommentCode ()
+		{
+			se.Buffer.UncommentCode ();
+		}
+#endregion 
 #region IBookmarkOperations
 		void IBookmarkOperations.ToggleBookmark ()
 		{

Modified: trunk/MonoDevelop/Core/src/Main/Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/ChangeLog	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/Main/Base/ChangeLog	2004-12-08 00:39:15 UTC (rev 2062)
@@ -1,3 +1,10 @@
+2004-12-07  Alexandre Gomes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alexmipego at hotmail.com</A>&gt;
+
+	*  Gui/ContentInterfaces/ICodeStyleOperations.cs: Added to rule style changes in code like (Un)Comment Code
+	* Commands/EditCommands.cs: Changed to handle (Un)CommentCode menu options
+	* Internal/Codons/LanguageBinding/ILanguageBinding.cs: Added CommentTag to all language bindings
+	* MakeFile.am: Added reference to Gui/ContentInterfaces/ICodeStyleOperations.cs
+
 2004-12-07  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
 
 	* Gui/Pads/HelpBrowser/HelpViewer.cs: Update to new gtk# api.

Modified: trunk/MonoDevelop/Core/src/Main/Base/Commands/EditCommands.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Commands/EditCommands.cs	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/Main/Base/Commands/EditCommands.cs	2004-12-08 00:39:15 UTC (rev 2062)
@@ -179,4 +179,51 @@
 			wcd.Hide ();
 		}
 	}
+	
+	public class CommentCode : AbstractMenuCommand
+	{
+		public override bool IsEnabled {
+			get {
+				IWorkbenchWindow window   = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
+				IEditable        editable = window != null ? window.ActiveViewContent as IEditable : null;
+				if (editable != null) {
+					return true;
+				}
+				return false;
+			}
+		}
+		
+		public override void Run()
+		{
+				IWorkbenchWindow window   = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
+				ICodeStyleOperations  styling = window != null ? window.ActiveViewContent as ICodeStyleOperations : null;
+				if (styling != null) {
+					styling.CommentCode ();
+				}
+		}
+	}
+	
+	public class UncommentCode : AbstractMenuCommand
+	{
+		public override bool IsEnabled {
+			get {
+				IWorkbenchWindow window   = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
+				IEditable        editable = window != null ? window.ActiveViewContent as IEditable : null;
+				if (editable != null) {
+					return true;
+				}
+				return false;
+			}
+		}
+		
+		public override void Run()
+		{
+				IWorkbenchWindow window   = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
+				ICodeStyleOperations  styling = window != null ? window.ActiveViewContent as ICodeStyleOperations : null;
+				if (styling != null) {
+					styling.UncommentCode ();
+				}
+		}
+	}
+		
 }

Added: trunk/MonoDevelop/Core/src/Main/Base/Gui/ContentInterfaces/ICodeStyleOperations.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/ContentInterfaces/ICodeStyleOperations.cs	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/ContentInterfaces/ICodeStyleOperations.cs	2004-12-08 00:39:15 UTC (rev 2062)
@@ -0,0 +1,7 @@
+// created on 11/9/2004 at 1:39 AM
+namespace MonoDevelop.Gui {
+	public interface ICodeStyleOperations {
+		void CommentCode ();
+		void UncommentCode ();
+	}
+}
\ No newline at end of file

Modified: trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/LanguageBinding/ILanguageBinding.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/LanguageBinding/ILanguageBinding.cs	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/LanguageBinding/ILanguageBinding.cs	2004-12-08 00:39:15 UTC (rev 2062)
@@ -64,5 +64,10 @@
 		/// it 'controls'.
 		/// &lt;/summary&gt;
 		IProject CreateProject(ProjectCreateInformation info, XmlElement projectOptions);
+
+		/// &lt;summary&gt;
+		/// Used by Comment and Uncomment operations and by Centaurus Addin.
+		/// &lt;/summary&gt;		
+		string CommentTag { get; }
 	}
 }

Modified: trunk/MonoDevelop/Core/src/Main/Base/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Makefile.am	2004-12-07 20:41:22 UTC (rev 2061)
+++ trunk/MonoDevelop/Core/src/Main/Base/Makefile.am	2004-12-08 00:39:15 UTC (rev 2062)
@@ -106,6 +106,7 @@
 Gui/Dialogs/NewFileDialog.cs \
 Gui/Dialogs/ProjectOptionsDialog.cs \
 Gui/Dialogs/NewLayoutDialog.cs \
+Gui/ContentInterfaces/ICodeStyleOperations.cs \
 Gui/ContentInterfaces/IBookmarkOperations.cs \
 Gui/ContentInterfaces/IClipboardHandler.cs \
 Gui/ContentInterfaces/IPrintable.cs \


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001665.html">[Monodevelop-patches-list] r2061 - in trunk/MonoDevelop/Core/src/Main/Base: . Gui/Pads/HelpBrowser
</A></li>
	<LI>Next message: <A HREF="001667.html">[Monodevelop-patches-list] r2063 - in trunk/MonoDevelop/Core/src: AddIns/BackendBindings/CSharpBinding Main/Base Main/Base/Internal/Project/Combine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1666">[ date ]</a>
              <a href="thread.html#1666">[ thread ]</a>
              <a href="subject.html#1666">[ subject ]</a>
              <a href="author.html#1666">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
