<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2047 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . CodeCompletion Gui
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2047%20-%20in%20trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor%3A%20.%20CodeCompletion%20Gui&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001650.html">
   <LINK REL="Next"  HREF="001652.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2047 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . CodeCompletion Gui</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2047%20-%20in%20trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor%3A%20.%20CodeCompletion%20Gui&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2047 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . CodeCompletion Gui">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Fri Dec  3 13:31:33 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001650.html">[Monodevelop-patches-list] r2046 - in trunk/MonoDevelop/Core/src/Main/Base: . Gui/Pads/ClassScout/NodeBuilder
</A></li>
        <LI>Next message: <A HREF="001652.html">[Monodevelop-patches-list] r2048 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . CodeCompletion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1651">[ date ]</a>
              <a href="thread.html#1651">[ thread ]</a>
              <a href="subject.html#1651">[ subject ]</a>
              <a href="author.html#1651">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-12-03 13:31:33 -0500 (Fri, 03 Dec 2004)
New Revision: 2047

Modified:
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CompletionListWindow.cs
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CompletionWindow.cs
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorBuffer.cs
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorView.cs
Log:
2004-12-03  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;

	* Gui/SourceEditorBuffer.cs:
	* Gui/SourceEditorView.cs:
	* Gui/SourceEditorDisplayBinding.cs:
	* CodeCompletion/CompletionListWindow.cs:
	* CodeCompletion/CompletionWindow.cs: Update to new gtk# API.



Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog	2004-12-03 00:44:12 UTC (rev 2046)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog	2004-12-03 18:31:33 UTC (rev 2047)
@@ -1,3 +1,11 @@
+2004-12-03  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
+
+	* Gui/SourceEditorBuffer.cs:
+	* Gui/SourceEditorView.cs:
+	* Gui/SourceEditorDisplayBinding.cs:
+	* CodeCompletion/CompletionListWindow.cs:
+	* CodeCompletion/CompletionWindow.cs: Update to new gtk# API.
+
 2004-11-24  Alp Toker  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">alp at atoker.com</A>&gt;
 
 	* CodeCompletion/CodeCompletionData.cs:

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CompletionListWindow.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CompletionListWindow.cs	2004-12-03 00:44:12 UTC (rev 2046)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CompletionListWindow.cs	2004-12-03 18:31:33 UTC (rev 2047)
@@ -91,7 +91,7 @@
 				TextIter offsetIter = wnd.control.Buffer.GetIterAtMark (wnd.triggeringMark);
 				TextIter endIter = wnd.control.Buffer.GetIterAtOffset (offsetIter.Offset + wnd.PartialWord.Length);
 				wnd.control.Buffer.MoveMark (wnd.control.Buffer.InsertMark, offsetIter);
-				wnd.control.Buffer.Delete (offsetIter, endIter);
+				wnd.control.Buffer.Delete (ref offsetIter, ref endIter);
 				wnd.control.Buffer.InsertAtCursor (wnd.CompleteWord);
 			}
 			

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CompletionWindow.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CompletionWindow.cs	2004-12-03 00:44:12 UTC (rev 2046)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CompletionWindow.cs	2004-12-03 18:31:33 UTC (rev 2047)
@@ -59,7 +59,7 @@
 			TextIter offsetIter = control.Buffer.GetIterAtMark (triggeringMark);
 			if (startIter.Offset &gt; offsetIter.Offset) {
 				int newPos = offsetIter.Offset;
-				control.Buffer.Delete (offsetIter, startIter);
+				control.Buffer.Delete (ref offsetIter, ref startIter);
 				control.Buffer.MoveMark (control.Buffer.InsertMark, control.Buffer.GetIterAtOffset (newPos));
 			}
 		}

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorBuffer.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorBuffer.cs	2004-12-03 00:44:12 UTC (rev 2046)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorBuffer.cs	2004-12-03 18:31:33 UTC (rev 2047)
@@ -166,14 +166,17 @@
 			if (GetIterAtMark (complete_end).Offset == 0)
 				return;
 			RemoveTag (complete_ahead, GetIterAtMark (InsertMark), GetIterAtMark (complete_end));
-			Delete (GetIterAtMark (InsertMark), GetIterAtMark (complete_end));
+			TextIter insertIter = GetIterAtMark (InsertMark);
+			TextIter completionEnd = GetIterAtMark (complete_end);
+			Delete (ref insertIter, ref completionEnd);
 			MoveMark (complete_end, GetIterAtOffset (0));
 		}
 
 		public void CompleteAhead (string what)
 		{
 			DropCompleteAhead ();
-			InsertWithTags (GetIterAtMark (InsertMark), what, new TextTag[] 
+			TextIter insertIter = GetIterAtMark (InsertMark);
+			InsertWithTags (ref insertIter, what, new TextTag[] 
 							{ complete_ahead });
 			TextIter it = GetIterAtMark (InsertMark);
 			MoveMark (complete_end, it);
@@ -645,7 +648,7 @@
 		public void Insert (int offset, string text)
 		{
 			TextIter put = GetIterAtOffset (offset);
-			Insert (put, text);
+			Insert (ref put, text);
 		}
 
 		public int GetLowerSelectionBounds ()
@@ -663,7 +666,7 @@
 		{
 			TextIter start = GetIterAtOffset (offset);
 			TextIter end = GetIterAtOffset (offset + length);
-			Delete (start, end);
+			Delete (ref start, ref end);
 		}
 
 		public void Replace (int offset, int length, string pattern)

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs	2004-12-03 00:44:12 UTC (rev 2046)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs	2004-12-03 18:31:33 UTC (rev 2047)
@@ -42,6 +42,8 @@
 				return true;
 			if (mimetype == &quot;application/x-config&quot;)
 				return true;
+			if (mimetype == &quot;application/x-aspx&quot;)
+				return true;
 			return false;
 		}
 		

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorView.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorView.cs	2004-12-03 00:44:12 UTC (rev 2046)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorView.cs	2004-12-03 18:31:33 UTC (rev 2047)
@@ -161,7 +161,7 @@
 			iter.LineOffset = 0;
 			TextIter end_iter = buf.GetIterAtLine (iter.Line);
 			end_iter.LineOffset = end_iter.CharsInLine;
-			buf.Delete (iter, end_iter);
+			buf.Delete (ref iter, ref end_iter);
 		}
 
 		void TriggerCodeComplete ()
@@ -374,7 +374,9 @@
 		{
 			int offset = buf.GetIterAtMark (buf.InsertMark).Offset;
 			int start = FindPrevWordStart (buf.Text, offset);
-			buf.Delete (buf.GetIterAtOffset (start), buf.GetIterAtOffset (offset));
+			TextIter startIter = buf.GetIterAtOffset (start);
+			TextIter offsetIter = buf.GetIterAtOffset (offset);
+			buf.Delete (ref startIter, ref offsetIter);
 			return start;
 		}
 
@@ -489,7 +491,7 @@
 			for (int l = y0; l &lt;= y1; l ++) {
 				TextIter it = Buffer.GetIterAtLine (l);
 				if (!it.EndsLine())
-					Buffer.Insert (it, indent);
+					Buffer.Insert (ref it, indent);
 			}
 		}
 		
@@ -503,7 +505,7 @@
 				
 				if (c == '\t') {
 					end.ForwardChar ();
-					buf.Delete (start, end);
+					buf.Delete (ref start, ref end);
 					
 				} else if (c == ' ') {
 					int cnt = 0;
@@ -517,7 +519,7 @@
 					if (cnt == 0)
 						return;
 					
-					buf.Delete (start, end);
+					buf.Delete (ref start, ref end);
 				}
 			}
 		}
@@ -557,8 +559,8 @@
 			TextIter end = begin;
 			end.ForwardToLineEnd ();
 			
-			Buffer.Delete (begin, end);
-			Buffer.Insert (begin, txt);
+			Buffer.Delete (ref begin, ref end);
+			Buffer.Insert (ref begin, txt);
 		}
 		
 		IndentStyle IFormattableDocument.IndentStyle
@@ -585,7 +587,8 @@
 		
 		void IFormattableDocument.Insert (int offset, string text)
 		{
-			Buffer.Insert (Buffer.GetIterAtOffset (offset), text);
+			TextIter insertIter = Buffer.GetIterAtOffset (offset);
+			Buffer.Insert (ref insertIter, text);
 		}
 		
 		string IFormattableDocument.IndentString


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001650.html">[Monodevelop-patches-list] r2046 - in trunk/MonoDevelop/Core/src/Main/Base: . Gui/Pads/ClassScout/NodeBuilder
</A></li>
	<LI>Next message: <A HREF="001652.html">[Monodevelop-patches-list] r2048 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . CodeCompletion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1651">[ date ]</a>
              <a href="thread.html#1651">[ thread ]</a>
              <a href="subject.html#1651">[ subject ]</a>
              <a href="author.html#1651">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
