<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2049 - in trunk/MonoDevelop/Core/src/Main/Base: . Commands Gui/BrowserDisplayBinding Gui/Components Gui/Dialogs Gui/Pads/FileScout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2049%20-%20in%20trunk/MonoDevelop/Core/src/Main/Base%3A%20.%20Commands%20Gui/BrowserDisplayBinding%20Gui/Components%20Gui/Dialogs%20Gui/Pads/FileScout&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001652.html">
   <LINK REL="Next"  HREF="001654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2049 - in trunk/MonoDevelop/Core/src/Main/Base: . Commands Gui/BrowserDisplayBinding Gui/Components Gui/Dialogs Gui/Pads/FileScout</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2049%20-%20in%20trunk/MonoDevelop/Core/src/Main/Base%3A%20.%20Commands%20Gui/BrowserDisplayBinding%20Gui/Components%20Gui/Dialogs%20Gui/Pads/FileScout&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2049 - in trunk/MonoDevelop/Core/src/Main/Base: . Commands Gui/BrowserDisplayBinding Gui/Components Gui/Dialogs Gui/Pads/FileScout">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Fri Dec  3 22:44:43 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001652.html">[Monodevelop-patches-list] r2048 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . CodeCompletion
</A></li>
        <LI>Next message: <A HREF="001654.html">[Monodevelop-patches-list] r2050 - in trunk/MonoDevelop/Core/src/Main/StartUp: . Dialogs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1653">[ date ]</a>
              <a href="thread.html#1653">[ thread ]</a>
              <a href="subject.html#1653">[ subject ]</a>
              <a href="author.html#1653">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jluke
Date: 2004-12-03 22:44:43 -0500 (Fri, 03 Dec 2004)
New Revision: 2049

Modified:
   trunk/MonoDevelop/Core/src/Main/Base/ChangeLog
   trunk/MonoDevelop/Core/src/Main/Base/Commands/MenuItemBuilders.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/BrowserDisplayBinding/HtmlViewPane.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Components/SdMenuCommand.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/CommonAboutDialog.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/SharpDevelopAboutPanels.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/WordCountDialog.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/FileScout/FileList.cs
Log:
2004-12-03  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">john.luke at cfl.rr.com</A>&gt;

        * Commands/MenuItemBuilders.cs:
        * Gui/Components/SdMenuCommand.cs: use AccelMap instead of Accel.Map*
        * Gui/Dialogs/SharpDevelopAboutPanels.cs:
        * Gui/Dialogs/CommonAboutDialog.cs:
        * Gui/Dialogs/WordCountDialog.cs:
        * Gui/Pads/FileScout/FileList.cs:
        * Gui/BrowserDisplayBinding/HtmlViewPane.cs: remove obsolete GType stuff,
        use ComboBox instead of obsolete OptionMenu



Modified: trunk/MonoDevelop/Core/src/Main/Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/ChangeLog	2004-12-03 21:53:20 UTC (rev 2048)
+++ trunk/MonoDevelop/Core/src/Main/Base/ChangeLog	2004-12-04 03:44:43 UTC (rev 2049)
@@ -1,3 +1,14 @@
+2004-12-03  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">john.luke at cfl.rr.com</A>&gt;
+
+	* Commands/MenuItemBuilders.cs:
+	* Gui/Components/SdMenuCommand.cs: use AccelMap instead of Accel.Map*
+	* Gui/Dialogs/SharpDevelopAboutPanels.cs: 
+	* Gui/Dialogs/CommonAboutDialog.cs:
+	* Gui/Dialogs/WordCountDialog.cs:
+	* Gui/Pads/FileScout/FileList.cs:
+	* Gui/BrowserDisplayBinding/HtmlViewPane.cs: remove obsolete GType stuff,
+	use ComboBox instead of obsolete OptionMenu
+
 2004-12-03  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt;
 
 	* Gui/Pads/ClassScout/NodeBuilder/DefaultDotNetClassScoutNodeBuilder.cs:

Modified: trunk/MonoDevelop/Core/src/Main/Base/Commands/MenuItemBuilders.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Commands/MenuItemBuilders.cs	2004-12-03 21:53:20 UTC (rev 2048)
+++ trunk/MonoDevelop/Core/src/Main/Base/Commands/MenuItemBuilders.cs	2004-12-04 03:44:43 UTC (rev 2049)
@@ -238,10 +238,10 @@
 				item.Description = GettextCatalog.GetString (&quot;Activate this window&quot;);
 				if (i + 1 &lt;= 9) {
 					string accel_path = &quot;&lt;MonoDevelop&gt;/MainWindow/OpenContents_&quot; + (i + 1).ToString ();
-					if (!Gtk.Accel.MapLookupEntry (accel_path, new Gtk.AccelKey ())) {
-						Gtk.Accel.MapAddEntry (accel_path, Gdk.Keyval.FromName ((i + 1).ToString ()), Gdk.ModifierType.Mod1Mask);
+					if (!Gtk.AccelMap.LookupEntry (accel_path, new Gtk.AccelKey ())) {
+						Gtk.AccelMap.AddEntry (accel_path, Gdk.Keyval.FromName ((i + 1).ToString ()), Gdk.ModifierType.Mod1Mask);
 					} else {
-						Gtk.Accel.MapChangeEntry (accel_path, Gdk.Keyval.FromName ((i + 1).ToString()), Gdk.ModifierType.Mod1Mask, true);
+						Gtk.AccelMap.ChangeEntry (accel_path, Gdk.Keyval.FromName ((i + 1).ToString()), Gdk.ModifierType.Mod1Mask, true);
 					}
 					item.AccelPath = accel_path;
 				}

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/BrowserDisplayBinding/HtmlViewPane.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/BrowserDisplayBinding/HtmlViewPane.cs	2004-12-03 21:53:20 UTC (rev 2048)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/BrowserDisplayBinding/HtmlViewPane.cs	2004-12-04 03:44:43 UTC (rev 2049)
@@ -142,7 +142,6 @@
 		Navbar nav = new Navbar ();
 		
 		bool loading = false;
-		static GLib.GType gtype;
 		
 		public MozillaControl MozillaControl {
 			get {
@@ -150,18 +149,8 @@
 			}
 		}
 		
-		public static new GLib.GType GType
+		public HtmlViewPane (bool showNavigation)
 		{
-			get
-			{
-				if (gtype == GLib.GType.Invalid)
-					gtype = RegisterGType (typeof (HtmlViewPane));
-				return gtype;
-			}
-		}
-		
-		public HtmlViewPane(bool showNavigation) : base (GType)
-		{
 			Shadow = Gtk.ShadowType.In;
 			VBox mainbox = new VBox (false, 2);
 			status = (SdStatusBar) statusbarService.ProgressMonitor;

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Components/SdMenuCommand.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Components/SdMenuCommand.cs	2004-12-03 21:53:20 UTC (rev 2048)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Components/SdMenuCommand.cs	2004-12-04 03:44:43 UTC (rev 2049)
@@ -113,8 +113,8 @@
 					ckey = Gdk.Keyval.FromName (key);
 				}
 			}
-			if (!Gtk.Accel.MapLookupEntry (accel_path, new Gtk.AccelKey()) ) {
-				Gtk.Accel.MapAddEntry (accel_path, ckey, mod);
+			if (!Gtk.AccelMap.LookupEntry (accel_path, new Gtk.AccelKey()) ) {
+				Gtk.AccelMap.AddEntry (accel_path, ckey, mod);
 				this.AccelPath = accel_path;
 			}
 		}

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/CommonAboutDialog.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/CommonAboutDialog.cs	2004-12-03 21:53:20 UTC (rev 2048)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/CommonAboutDialog.cs	2004-12-04 03:44:43 UTC (rev 2049)
@@ -21,7 +21,6 @@
 {
 	public class ScrollBox : DrawingArea
 	{
-		static GLib.GType gtype;
 		Pixbuf image;
 		string text;
 		int scroll = -220;
@@ -35,18 +34,8 @@
 			get { return hndlr; }
 		}
 		
-		public static new GLib.GType GType
+		public ScrollBox ()
 		{
-			get
-			{
-				if (gtype == GLib.GType.Invalid)
-					gtype = RegisterGType (typeof (ScrollBox));
-				return gtype;
-			}
-		}
-		
-		public ScrollBox() : base (GType)
-		{
 			this.SetSizeRequest (400, 220);
 			this.Realized += new EventHandler (OnRealized);
 			this.ExposeEvent += new ExposeEventHandler (OnExposed);
@@ -118,7 +107,6 @@
 	
 	public class CommonAboutDialog : Dialog
 	{
-		static GLib.GType gtype;
 		static FileUtilityService fileUtilityService = (FileUtilityService)ServiceManager.GetService(typeof(FileUtilityService));
 		
 		AuthorAboutTabPage aatp;
@@ -127,17 +115,8 @@
 		
 		//static PropertyService propertyService = (PropertyService)ServiceManager.Services.GetService(typeof(PropertyService));
 		
-		public static new GLib.GType GType
+		public CommonAboutDialog ()
 		{
-			get {
-				if (gtype == GLib.GType.Invalid)
-					gtype = RegisterGType (typeof (CommonAboutDialog));
-				return gtype;
-			}
-		}
-		
-		public CommonAboutDialog () : base (GType)
-		{
 			this.Title = GettextCatalog.GetString (&quot;About MonoDevelop&quot;);
 			this.TransientFor = (Gtk.Window) WorkbenchSingleton.Workbench;
 			aboutPictureScrollBox = new ScrollBox ();

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/SharpDevelopAboutPanels.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/SharpDevelopAboutPanels.cs	2004-12-03 21:53:20 UTC (rev 2048)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/SharpDevelopAboutPanels.cs	2004-12-04 03:44:43 UTC (rev 2049)
@@ -22,24 +22,13 @@
 {
 	public class AboutMonoDevelopTabPage : VBox
 	{
-		static GLib.GType gtype;
 		Label versionLabel = new Label ();
 		Label sponsorLabel = new Label ();
 		Label licenseLabel = new Label ();
 		Label copyrightLabel = new Label ();
 		
-		public static new GLib.GType GType
+		public AboutMonoDevelopTabPage ()
 		{
-			get
-			{
-				if (gtype == GLib.GType.Invalid)
-					gtype = RegisterGType (typeof (AboutMonoDevelopTabPage));
-				return gtype;
-			}
-		}
-		
-		public AboutMonoDevelopTabPage() : base (GType)
-		{
 			Version v = Assembly.GetEntryAssembly().GetName().Version;
 			versionLabel.Markup = String.Format (&quot;&lt;b&gt;{0}&lt;/b&gt;\n    {1}&quot;, GettextCatalog.GetString(&quot;Version&quot;), v.Major + &quot;.&quot; + v.Minor);
 			HBox hboxVersion = new HBox ();
@@ -137,24 +126,13 @@
 	
 	public class VersionInformationTabPage : VBox
 	{
-		private static GLib.GType gtype;
 		private TreeView listView;
 		private Button button;
 		private TreeStore store;
 		private Clipboard clipboard;
 		
-		public static new GLib.GType GType
+		public VersionInformationTabPage ()
 		{
-			get
-			{
-				if (gtype == GLib.GType.Invalid)
-					gtype = RegisterGType (typeof (VersionInformationTabPage));
-				return gtype;
-			}
-		}
-
-		public VersionInformationTabPage() : base (GType)
-		{
 			TreeView listView = new TreeView ();
 			listView.RulesHint = true;
 			listView.AppendColumn (GettextCatalog.GetString (&quot;Name&quot;), new CellRendererText (), &quot;text&quot;, 0);

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/WordCountDialog.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/WordCountDialog.cs	2004-12-03 21:53:20 UTC (rev 2048)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/WordCountDialog.cs	2004-12-04 03:44:43 UTC (rev 2049)
@@ -21,13 +21,12 @@
 {
 	public class WordCountDialog : Dialog
 	{
-		static GLib.GType gtype;
 		ScrolledWindow scrolledwindow;
 		TreeView resultListView;
 		TreeStore store;
+		ComboBox locationComboBox;
 		ArrayList items;
 		Report total;
-		int selectedIndex = 0;
 		
 		StringParserService stringParserService = (StringParserService)MonoDevelop.Core.Services.ServiceManager.GetService(typeof(StringParserService));
 		MessageService messageService = (MessageService)MonoDevelop.Core.Services.ServiceManager.GetService (typeof(MessageService));
@@ -91,7 +90,7 @@
 			items = new ArrayList();
 			total = null;
 			
-			switch (selectedIndex) {
+			switch (locationComboBox.Active) {
 				case 0: {// current file
 					IWorkbenchWindow window = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
 					if (window != null) {
@@ -266,18 +265,8 @@
 			//UpdateList ((TreeViewColumn)e.Column);
 		}
 		
-		public static new GLib.GType GType
+		public WordCountDialog ()
 		{
-			get
-			{
-				if (gtype == GLib.GType.Invalid)
-					gtype = RegisterGType (typeof (WordCountDialog));
-				return gtype;
-			}
-		}
-		
-		public WordCountDialog() : base (GType)
-		{
 			this.BorderWidth = 6;
 			this.TransientFor = (Window) WorkbenchSingleton.Workbench;
 			this.HasSeparator = false;
@@ -333,23 +322,16 @@
 			Label l = new Label (GettextCatalog.GetString (&quot;_Count where&quot;));
 			hbox.PackStart (l);
 			
-			OptionMenu locationComboBox = new OptionMenu ();
-			locationComboBox.Changed += new EventHandler (OnOptionChanged);
-			Menu m = new Menu ();
-			m.Append (new MenuItem (GettextCatalog.GetString (&quot;Current file&quot;)));
-			m.Append (new MenuItem (GettextCatalog.GetString (&quot;All open files&quot;)));
-			m.Append (new MenuItem (GettextCatalog.GetString (&quot;Whole solution&quot;)));
-			locationComboBox.Menu = m;
+			locationComboBox = ComboBox.NewText ();
+			locationComboBox.AppendText (GettextCatalog.GetString (&quot;Current file&quot;));
+			locationComboBox.AppendText (GettextCatalog.GetString (&quot;All open files&quot;));
+			locationComboBox.AppendText (GettextCatalog.GetString (&quot;Whole solution&quot;));
 			hbox.PackStart (locationComboBox);
 			
 			scrolledwindow.Add(resultListView);
 			this.VBox.PackStart (hbox, false, true, 0);
 			this.VBox.PackStart (scrolledwindow, true, true, 6);
 		}
-		
-		private void OnOptionChanged (object o, EventArgs args)
-		{
-			selectedIndex = ((OptionMenu) o).History;
-		}
 	}
 }
+

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/FileScout/FileList.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/FileScout/FileList.cs	2004-12-03 21:53:20 UTC (rev 2048)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/FileScout/FileList.cs	2004-12-04 03:44:43 UTC (rev 2049)
@@ -19,7 +19,6 @@
 {
 	public class FileList : Gtk.TreeView
 	{
-		private static GLib.GType gtype;
 		private FileSystemWatcher watcher;
 		private ArrayList Items;
 		private Gtk.TreeStore store;
@@ -27,18 +26,8 @@
 		FileListItem selectedItem = null;
 		Gtk.TreeIter selectedIter;
 		
-		public static new GLib.GType GType
+		public FileList ()
 		{
-			get
-			{
-				if (gtype == GLib.GType.Invalid)
-					gtype = RegisterGType (typeof (FileList));
-				return gtype;
-			}	
-		}
-
-		public FileList() : base (GType)
-		{
 			Items = new ArrayList ();
 			FileUtilityService fileUtilityService = (FileUtilityService)ServiceManager.GetService(typeof(FileUtilityService));
 			


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001652.html">[Monodevelop-patches-list] r2048 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . CodeCompletion
</A></li>
	<LI>Next message: <A HREF="001654.html">[Monodevelop-patches-list] r2050 - in trunk/MonoDevelop/Core/src/Main/StartUp: . Dialogs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1653">[ date ]</a>
              <a href="thread.html#1653">[ thread ]</a>
              <a href="subject.html#1653">[ subject ]</a>
              <a href="author.html#1653">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
