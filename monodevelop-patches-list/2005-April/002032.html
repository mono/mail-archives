<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2431 - in trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn: . Gui
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2431%20-%20in%20trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn%3A%20.%20Gui&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002031.html">
   <LINK REL="Next"  HREF="002033.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2431 - in trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn: . Gui</H1>
    <B>Chris Toshok</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2431%20-%20in%20trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn%3A%20.%20Gui&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2431 - in trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn: . Gui">toshok at mono-cvs.ximian.com
       </A><BR>
    <I>Wed Apr  6 18:53:07 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002031.html">[Monodevelop-patches-list] r2430 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Services
</A></li>
        <LI>Next message: <A HREF="002033.html">[Monodevelop-patches-list] r2432 - in trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn: . Gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2032">[ date ]</a>
              <a href="thread.html#2032">[ thread ]</a>
              <a href="subject.html#2032">[ subject ]</a>
              <a href="author.html#2032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: toshok
Date: 2005-04-06 18:53:07 -0400 (Wed, 06 Apr 2005)
New Revision: 2431

Modified:
   trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/DebuggingService.cs
   trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/LocalsPad.cs
   trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/StackTracePad.cs
   trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/ThreadPad.cs
Log:
2005-04-06  Chris Toshok  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">toshok at ximian.com</A>&gt;

	* Gui/LocalsPad.cs: (LocalsPad.OnStoppedEvent): the CurrentFrame
	field is of type StackFrame now, so move the cast to the
	DebuggingService instead of the stackframe.

	* Gui/StackTracePad.cs: same.

	* Gui/ThreadPad.cs (ThreadPad.UpdateThread): just set the values
	on the row, don't both comparing to the current value.

	* DebuggingService.cs (DebuggingService.target_output,
	DebuggingService.debugger_output): add Console.WriteLines here
	until I can get the debugger output pad to appear in the debug
	context.
	(DebuggingService.CurrentFrame): this property is now a
	StackFrame, not an object.



Modified: trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/ChangeLog	2005-04-06 22:45:10 UTC (rev 2430)
+++ trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/ChangeLog	2005-04-06 22:53:07 UTC (rev 2431)
@@ -1,3 +1,19 @@
+2005-04-06  Chris Toshok  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">toshok at ximian.com</A>&gt;
+
+	* Gui/LocalsPad.cs: (LocalsPad.OnStoppedEvent): the CurrentFrame
+	field is of type StackFrame now, so move the cast to the
+	DebuggingService instead of the stackframe.
+
+	* Gui/ThreadPad.cs (ThreadPad.UpdateThread): just set the values
+	on the row, don't both comparing to the current value.
+
+	* DebuggingService.cs (DebuggingService.target_output,
+	DebuggingService.debugger_output): add Console.WriteLines here
+	until I can get the debugger output pad to appear in the debug
+	context.
+	(DebuggingService.CurrentFrame): this property is now a
+	StackFrame, not an object.
+
 2005-04-05  Chris Toshok  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">toshok at ximian.com</A>&gt;
 
 	* Visualizers/Makefile.am (DLLS): add MonoDevelop.Debugger.dll.

Modified: trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/DebuggingService.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/DebuggingService.cs	2005-04-06 22:45:10 UTC (rev 2430)
+++ trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/DebuggingService.cs	2005-04-06 22:53:07 UTC (rev 2431)
@@ -176,16 +176,19 @@
 
 		void target_output (bool is_stderr, string line)
 		{
+			Console.WriteLine (line);
 			current_monitor.Log.Write (line);
 		}
 
 		void debugger_output (string line)
 		{
+			Console.WriteLine (line);
 			current_monitor.ReportWarning (line);
 		}
 
 		void debugger_error (object sender, string message, Exception e)
 		{
+		  Console.WriteLine (message);
 			current_monitor.ReportError (message, e);
 		}
 
@@ -362,7 +365,7 @@
 			}
 		}
 
-		public object CurrentFrame {
+		public StackFrame CurrentFrame {
 			get {
 				if (IsRunning)
 					return null;

Modified: trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/LocalsPad.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/LocalsPad.cs	2005-04-06 22:45:10 UTC (rev 2430)
+++ trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/LocalsPad.cs	2005-04-06 22:53:07 UTC (rev 2431)
@@ -706,13 +706,15 @@
 
 		protected void OnStoppedEvent (object o, EventArgs args)
 		{
-			current_frame = (Mono.Debugger.StackFrame)Runtime.DebuggingService.CurrentFrame;
+			DebuggingService dbgr = (DebuggingService)Runtime.DebuggingService;
+			current_frame = dbgr.CurrentFrame;
 			UpdateDisplay ();
 		}
 
 		protected void OnPausedEvent (object o, EventArgs args)
 		{
-			current_frame = (Mono.Debugger.StackFrame)Runtime.DebuggingService.CurrentFrame;
+			DebuggingService dbgr = (DebuggingService)Runtime.DebuggingService;
+			current_frame = dbgr.CurrentFrame;
 			UpdateDisplay ();
 		}
 

Modified: trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/StackTracePad.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/StackTracePad.cs	2005-04-06 22:45:10 UTC (rev 2430)
+++ trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/StackTracePad.cs	2005-04-06 22:53:07 UTC (rev 2431)
@@ -88,7 +88,8 @@
 
 		protected void OnPausedEvent (object o, EventArgs args)
 		{
-			current_frame = (StackFrame)Runtime.DebuggingService.CurrentFrame;
+			DebuggingService dbgr = (DebuggingService)Runtime.DebuggingService;
+			current_frame = dbgr.CurrentFrame;
 			UpdateDisplay ();
 		}
 

Modified: trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/ThreadPad.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/ThreadPad.cs	2005-04-06 22:45:10 UTC (rev 2430)
+++ trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn/Gui/ThreadPad.cs	2005-04-06 22:53:07 UTC (rev 2431)
@@ -102,12 +102,9 @@
 			TreeIter iter;
 
 			if (row != null &amp;&amp; store.GetIter (out iter, row.Path)) {
-				if (thread.ID != (int)store.GetValue (iter, 0))
-					store.SetValue (iter, 0, thread.ID);
-				if (thread.PID != (int)store.GetValue (iter, 1))
-					store.SetValue (iter, 1, thread.PID);
-				if (thread.State.ToString() != (string)store.GetValue (iter, 2))
-					store.SetValue (iter, 2, thread.State.ToString());
+				store.SetValue (iter, 0, thread.ID);
+				store.SetValue (iter, 1, thread.PID);
+				store.SetValue (iter, 2, thread.State.ToString());
 
 				string location;
 				if (thread.IsStopped)
@@ -115,8 +112,7 @@
 				else
 					location = &quot;&quot;;
 
-				if (location != (string)store.GetValue (iter, 3))
-					store.SetValue (iter, 3, location);
+				store.SetValue (iter, 3, location);
 			}
 			else {
 				AddThread (thread);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002031.html">[Monodevelop-patches-list] r2430 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Services
</A></li>
	<LI>Next message: <A HREF="002033.html">[Monodevelop-patches-list] r2432 - in trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn: . Gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2032">[ date ]</a>
              <a href="thread.html#2032">[ thread ]</a>
              <a href="subject.html#2032">[ subject ]</a>
              <a href="author.html#2032">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
