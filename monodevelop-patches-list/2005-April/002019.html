<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2417 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2417%20-%20in%20trunk/MonoDevelop/Core/src/MonoDevelop.Base%3A%20.%20Services&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002018.html">
   <LINK REL="Next"  HREF="002021.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2417 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Services</H1>
    <B>Christian Hergert &lt;chris@mosaix.net&gt;</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2417%20-%20in%20trunk/MonoDevelop/Core/src/MonoDevelop.Base%3A%20.%20Services&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2417 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Services">chergert at mono-cvs.ximian.com
       </A><BR>
    <I>Sat Apr  2 01:26:42 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002018.html">[Monodevelop-patches-list] r2416 - in trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn: . Visualizers
</A></li>
        <LI>Next message: <A HREF="002021.html">[Monodevelop-patches-list] r2418 - in trunk/MonoDevelop: Core/src/MonoDevelop.Base Core/src/MonoDevelop.Base/Commands contrib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2019">[ date ]</a>
              <a href="thread.html#2019">[ thread ]</a>
              <a href="subject.html#2019">[ subject ]</a>
              <a href="author.html#2019">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: chergert
Date: 2005-04-02 01:26:42 -0500 (Sat, 02 Apr 2005)
New Revision: 2417

Modified:
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DefaultLoggingService.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ILoggingService.cs
Log:
Services/ILoggingService.cs: Update LogAppendedArgs
Services/DefaultLoggingService.cs: Remove need for stack trace.


Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog	2005-04-02 03:49:31 UTC (rev 2416)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog	2005-04-02 06:26:42 UTC (rev 2417)
@@ -1,5 +1,13 @@
 2005-04-01	Christian Hergert	&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">christian.hergert at gmail.com</A>&gt;
 
+	* Services/ILoggingService.cs: Update the LogAppendedArgs and remove the
+	category.
+	* Services/DefaultLoggingService.cs: Remove the need for the StackTrace.
+	We dont really need that in depth of information currently. Will look to
+	find this feature directly in log4net and update soon.
+
+2005-04-01	Christian Hergert	&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">christian.hergert at gmail.com</A>&gt;
+
 	* Commands/VBConverter/ConvertBuffer.cs: Convert to use new Logging
 	framework.
 	* Commands/MenuItemBuilders.cs

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DefaultLoggingService.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DefaultLoggingService.cs	2005-04-02 03:49:31 UTC (rev 2416)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DefaultLoggingService.cs	2005-04-02 06:26:42 UTC (rev 2417)
@@ -20,164 +20,166 @@
 		{
 			base.InitializeService();
 		}
-		
-		ILog GetLogger(System.Type type)
-		{
-			return LogManager.GetLogger(type);
-		}
 
 		ILog GetLogger()
 		{
-			return LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);
+			return LogManager.GetLogger(typeof(ILoggingService));
 		}
 
-		System.Reflection.MethodBase GetCallingMethod()
-		{
-			System.Diagnostics.StackTrace
-					trace = new System.Diagnostics.StackTrace(true);
-			return trace.GetFrame(2).GetMethod();
-		}
-
 		public bool IsDebugEnabled {
 			get {
-				return GetLogger(GetCallingMethod().DeclaringType).IsDebugEnabled;
+				return GetLogger().IsDebugEnabled;
 			}
 		}
 
 		public bool IsInfoEnabled {
 			get {
-				return GetLogger(GetCallingMethod().DeclaringType).IsInfoEnabled;
+				return GetLogger().IsInfoEnabled;
 			}
 		}
 
 		public bool IsWarnEnabled {
 			get {
-				return GetLogger(GetCallingMethod().DeclaringType).IsWarnEnabled;
+				return GetLogger().IsWarnEnabled;
 			}
 		}
 
 		public bool IsErrorEnabled {
 			get {
-				return GetLogger(GetCallingMethod().DeclaringType).IsErrorEnabled;
+				return GetLogger().IsErrorEnabled;
 			}
 		}
 
 		public bool IsFatalEnabled {
 			get {
-				return GetLogger(GetCallingMethod().DeclaringType).IsFatalEnabled;
+				return GetLogger().IsFatalEnabled;
 			}
 		}
 
 		public void Debug (object message)
 		{
-			System.Type type = GetCallingMethod().DeclaringType;
-			GetLogger(type).Debug (message);
-			OnLogAppended (&quot;Debug&quot;, type.ToString(), message.ToString());
+			GetLogger().Debug (message);
+			OnLogAppended (&quot;Debug&quot;, message.ToString());
 		}
 
 		public void Info (object message)
 		{
-			System.Type type = GetCallingMethod().DeclaringType;
-			GetLogger(type).Info (message);
-			OnLogAppended (&quot;Info&quot;, type.ToString(), message.ToString());
+			GetLogger().Info (message);
+			OnLogAppended (&quot;Info&quot;, message.ToString());
 		}
 
 		public void Warn (object message)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).Warn (message);
+			GetLogger().Warn (message);
+			OnLogAppended (&quot;Warn&quot;, message.ToString());
 		}
 
 		public void Error (object message)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).Error (message);
+			GetLogger().Error (message);
 		}
 
 		public void Fatal (object message)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).Fatal (message);
+			GetLogger().Fatal (message);
+			OnLogAppended (&quot;Fatal&quot;, message.ToString());
 		}
 
 		public void Debug (object message, Exception t)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).Debug (message, t);
+			GetLogger().Debug (message, t);
+			OnLogAppended (&quot;Debug&quot;, message + t.ToString());
 		}
 		
 		public void Info (object message, Exception t)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).Info (message, t);
+			GetLogger().Info (message, t);
+			OnLogAppended (&quot;Info&quot;, message + t.ToString());
 		}
 		
 		public void Warn (object message, Exception t)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).Warn (message, t);
+			GetLogger().Warn (message, t);
+			OnLogAppended (&quot;Warn&quot;, message + t.ToString());
 		}
 
 		public void Error (object message, Exception t)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).Error (message, t);
+			GetLogger().Error (message, t);
+			OnLogAppended (&quot;Error&quot;, message + t.ToString());
 		}
 		
 		public void Fatal (object message, Exception t)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).Fatal (message, t);
+			GetLogger().Fatal (message, t);
+			OnLogAppended (&quot;Fatal&quot;, message + t.ToString());
 		}
 
 		public void DebugFormat (string format, params object[] args)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).DebugFormat (format, args);
+			GetLogger().DebugFormat (format, args);
+			OnLogAppended (&quot;Debug&quot;, String.Format(format, args));
 		}
 		
 		public void InfoFormat (string format, params object[] args)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).InfoFormat (format, args);
+			GetLogger().InfoFormat (format, args);
+			OnLogAppended (&quot;Info&quot;, String.Format(format, args));
 		}
 		
 		public void WarnFormat (string format, params object[] args)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).WarnFormat (format, args);
+			GetLogger().WarnFormat (format, args);
+			OnLogAppended (&quot;Warn&quot;, String.Format(format, args));
 		}
 		
 		public void ErrorFormat (string format, params object[] args)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).ErrorFormat (format, args);
+			GetLogger().ErrorFormat (format, args);
+			OnLogAppended (&quot;Error&quot;, String.Format(format, args));
 		}
 		
 		public void FatalFormat (string format, params object[] args)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).FatalFormat (format, args);
+			GetLogger().FatalFormat (format, args);
+			OnLogAppended (&quot;Fatal&quot;, String.Format(format, args));
 		}
 
 		public void DebugFormat(IFormatProvider provider, string format, params object[] args)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).DebugFormat (provider, format, args);
+			GetLogger().DebugFormat (provider, format, args);
+			OnLogAppended (&quot;Debug&quot;, String.Format(provider, format, args));
 		}
 		
 		public void InfoFormat(IFormatProvider provider, string format, params object[] args)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).InfoFormat (provider, format, args);
+			GetLogger().InfoFormat (provider, format, args);
+			OnLogAppended (&quot;Info&quot;, String.Format(provider, format, args));
 		}
 
 		public void WarnFormat(IFormatProvider provider, string format, params object[] args)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).WarnFormat (provider, format, args);
+			GetLogger().WarnFormat (provider, format, args);
+			OnLogAppended (&quot;Warn&quot;, String.Format(provider, format, args));
 		}
 
 		public void ErrorFormat(IFormatProvider provider, string format, params object[] args)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).ErrorFormat (provider, format, args);
+			GetLogger().ErrorFormat (provider, format, args);
+			OnLogAppended (&quot;Error&quot;, String.Format(provider, format, args));
 		}
 
 		public void FatalFormat(IFormatProvider provider, string format, params object[] args)
 		{
-			GetLogger(GetCallingMethod().DeclaringType).FatalFormat (provider, format, args);
+			GetLogger().FatalFormat (provider, format, args);
+			OnLogAppended (&quot;Fatal&quot;, String.Format(provider, format, args));
 		}
 
-		public void OnLogAppended(string level, string category, string message)
+		public void OnLogAppended(string level, string message)
 		{
 			if (LogAppended != null) {
 				LogAppendedArgs args = new LogAppendedArgs();
 				args.Level = level;
-				args.Category = category;
 				args.Message = message;
 				args.Timestamp = DateTime.Now;
 				LogAppended(this, args);

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ILoggingService.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ILoggingService.cs	2005-04-02 03:49:31 UTC (rev 2416)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/ILoggingService.cs	2005-04-02 06:26:42 UTC (rev 2417)
@@ -47,7 +47,7 @@
 
 	public class LogAppendedArgs
 	{
-		public string Category, Message, Level;
+		public string Message, Level;
 		public DateTime Timestamp;
 	}
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002018.html">[Monodevelop-patches-list] r2416 - in trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn: . Visualizers
</A></li>
	<LI>Next message: <A HREF="002021.html">[Monodevelop-patches-list] r2418 - in trunk/MonoDevelop: Core/src/MonoDevelop.Base Core/src/MonoDevelop.Base/Commands contrib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2019">[ date ]</a>
              <a href="thread.html#2019">[ thread ]</a>
              <a href="subject.html#2019">[ subject ]</a>
              <a href="author.html#2019">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
