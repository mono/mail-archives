<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2495 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Commands Gui/Workbench Services/DebuggerService Services/Project
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2495%20-%20in%20trunk/MonoDevelop/Core/src/MonoDevelop.Base%3A%20.%20Commands%20Gui/Workbench%20Services/DebuggerService%20Services/Project&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002094.html">
   <LINK REL="Next"  HREF="002096.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2495 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Commands Gui/Workbench Services/DebuggerService Services/Project</H1>
    <B>Lluis Sanchez &lt;lluis@ximian.com&gt;</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2495%20-%20in%20trunk/MonoDevelop/Core/src/MonoDevelop.Base%3A%20.%20Commands%20Gui/Workbench%20Services/DebuggerService%20Services/Project&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2495 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Commands Gui/Workbench Services/DebuggerService Services/Project">lluis at mono-cvs.ximian.com
       </A><BR>
    <I>Sat Apr 30 10:22:53 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002094.html">[Monodevelop-patches-list] r2494 - trunk/MonoDevelop/Core/src/MonoDevelop.Dock
</A></li>
        <LI>Next message: <A HREF="002096.html">[Monodevelop-patches-list] r2496 - in trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn: . Gui/Pads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2095">[ date ]</a>
              <a href="thread.html#2095">[ thread ]</a>
              <a href="subject.html#2095">[ subject ]</a>
              <a href="author.html#2095">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lluis
Date: 2005-04-30 10:22:53 -0400 (Sat, 30 Apr 2005)
New Revision: 2495

Added:
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/DebugCommands.cs
Modified:
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectCommands.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Workbench/DefaultWorkbench.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Makefile.am
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/MonoDevelopCore.addin.xml
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DebuggerService/IDebuggerService.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/Project/ProjectService.cs
Log:
2005-04-30  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt; 

	* Commands/ProjectCommands.cs: Added new build and run commands.
	* Services/DebuggerService/IDebuggerService.cs: Added some methods.
	* Services/Project/ProjectService.cs: Allow building a project even
	if there isn't an open combine.
	* Gui/Workbench/DefaultWorkbench.cs: Gui safe subscription to debugger
	events.
	* Makefile.am: added DebugCommands.
	* MonoDevelopCore.addin.xml: Added some missing descriptions. Registered
	new project and debug commands.



Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog	2005-04-29 03:00:42 UTC (rev 2494)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog	2005-04-30 14:22:53 UTC (rev 2495)
@@ -1,3 +1,15 @@
+2005-04-30  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt; 
+
+	* Commands/ProjectCommands.cs: Added new build and run commands.
+	* Services/DebuggerService/IDebuggerService.cs: Added some methods.
+	* Services/Project/ProjectService.cs: Allow building a project even
+	if there isn't an open combine.
+	* Gui/Workbench/DefaultWorkbench.cs: Gui safe subscription to debugger
+	events.
+	* Makefile.am: added DebugCommands.
+	* MonoDevelopCore.addin.xml: Added some missing descriptions. Registered
+	new project and debug commands.
+
 2005-04-27  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt; 
 
 	* Commands/ViewCommands.cs: Use markup for the view list menu.

Added: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/DebugCommands.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/DebugCommands.cs	2005-04-29 03:00:42 UTC (rev 2494)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/DebugCommands.cs	2005-04-30 14:22:53 UTC (rev 2495)
@@ -0,0 +1,119 @@
+
+using System;
+using MonoDevelop.Gui.Dialogs;
+using MonoDevelop.Services;
+using MonoDevelop.Core.Properties;
+using MonoDevelop.Core.AddIns;
+using MonoDevelop.Gui.Widgets;
+
+namespace MonoDevelop.Commands
+{
+	public enum DebugCommands
+	{
+		DebugApplication,
+		ToggleBreakpoint,
+		StepOver,
+		StepInto,
+		StepOut,
+		Pause,
+		ClearAllBreakpoints
+	}
+	
+	public class DebugApplicationHandler: CommandHandler
+	{
+		protected override void Run ()
+		{
+			using (FileSelector fs = new FileSelector (GettextCatalog.GetString (&quot;Application to Debug&quot;))) {
+				int response = fs.Run ();
+				string name = fs.Filename;
+				fs.Hide ();
+				if (response == (int)Gtk.ResponseType.Ok)
+					Runtime.ProjectService.DebugApplication (name);
+			}
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
+			info.Enabled = Runtime.DebuggingService != null &amp;&amp;
+							Runtime.ProjectService.CurrentRunOperation.IsCompleted;
+		}
+	}
+	
+	public class StepOverHandler : CommandHandler
+	{
+		protected override void Run ()
+		{
+			Runtime.DebuggingService.StepOver();
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
+			if (Runtime.DebuggingService == null)
+				info.Visible = false;
+			else
+				info.Enabled = Runtime.DebuggingService.IsDebugging;
+		}
+	}
+
+	public class StepIntoHandler : CommandHandler
+	{
+		protected override void Run ()
+		{
+			Runtime.DebuggingService.StepInto();
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
+			if (Runtime.DebuggingService == null)
+				info.Visible = false;
+			else
+				info.Enabled = Runtime.DebuggingService.IsDebugging;
+		}
+	}
+	
+	public class StepOutHandler : CommandHandler
+	{
+		protected override void Run ()
+		{
+			Runtime.DebuggingService.StepOut ();
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
+			if (Runtime.DebuggingService == null)
+				info.Visible = false;
+			else
+				info.Enabled = Runtime.DebuggingService.IsDebugging;
+		}
+	}
+	
+	public class PauseDebugHandler : CommandHandler
+	{
+		protected override void Run ()
+		{
+			Runtime.DebuggingService.Pause ();
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
+			if (Runtime.DebuggingService == null)
+				info.Visible = false;
+			else
+				info.Enabled = Runtime.DebuggingService.IsRunning;
+		}
+	}
+	
+	public class ClearAllBreakpointsHandler: CommandHandler
+	{
+		protected override void Run ()
+		{
+			Runtime.DebuggingService.ClearAllBreakpoints ();
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
+			if (Runtime.DebuggingService == null)
+				info.Visible = false;
+		}
+	}
+}

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectCommands.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectCommands.cs	2005-04-29 03:00:42 UTC (rev 2494)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectCommands.cs	2005-04-30 14:22:53 UTC (rev 2495)
@@ -17,7 +17,6 @@
 {
 	public enum ProjectCommands
 	{
-		Compile,
 		AddNewProject,
 		AddNewCombine,
 		AddProject,
@@ -31,49 +30,34 @@
 		NewFolder,
 		IncludeToProject,
 		Build,
+		BuildSolution,
 		Rebuild,
+		RebuildSolution,
 		SetAsStartupProject,
 		GenerateMakefiles,
+		RunEntry,
 		Run,
 		IncludeInBuild,
 		IncludeInDeploy,
 		Deploy,
 		ConfigurationSelector,
 		Debug,
+		DebugEntry,
 		DebugApplication,
-		Stop
+		Stop,
+		Clean,
+		CleanSolution
 	}
 	
-	public class CompileHandler: CommandHandler
-	{
-		protected override void Run ()
-		{
-			IProjectService projectService = Runtime.ProjectService;
-			if (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow != null) {
-				Runtime.FileService.SaveFile (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow);
-				projectService.BuildFile (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow.ViewContent.ContentName);
-			}
-		}
-		
-		protected override void Update (CommandInfo info)
-		{
-			info.Enabled = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow != null;
-		}
-	}
-	
 	public class RunHandler: CommandHandler
 	{
-		CombineEntry entry;
 		string file;
 		
 		protected override void Run ()
 		{
 			if (Runtime.ProjectService.CurrentOpenCombine != null) {
-				entry = Runtime.ProjectService.CurrentSelectedCombineEntry;
-				if (entry != null) {
-					IAsyncOperation op = Runtime.ProjectService.Build (entry);
-					op.Completed += new OperationHandler (ExecuteCombine);
-				}
+				IAsyncOperation op = Runtime.ProjectService.Build (Runtime.ProjectService.CurrentOpenCombine);
+				op.Completed += new OperationHandler (ExecuteCombine);
 			} else {
 				if (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow != null) {
 					file = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow.ViewContent.ContentName;
@@ -86,8 +70,7 @@
 		protected override void Update (CommandInfo info)
 		{
 			if (Runtime.ProjectService.CurrentOpenCombine != null) {
-				info.Enabled = Runtime.ProjectService.CurrentSelectedCombineEntry != null &amp;&amp; 
-								Runtime.ProjectService.CurrentRunOperation.IsCompleted;
+				info.Enabled = Runtime.ProjectService.CurrentRunOperation.IsCompleted;
 			} else {
 				info.Enabled = (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow != null);
 			}
@@ -96,7 +79,7 @@
 		void ExecuteCombine (IAsyncOperation op)
 		{
 			if (op.Success)
-				Runtime.ProjectService.Execute (entry);
+				Runtime.ProjectService.Execute (Runtime.ProjectService.CurrentOpenCombine);
 		}
 		
 		void ExecuteFile (IAsyncOperation op)
@@ -106,19 +89,46 @@
 		}
 	}
 	
+	
+	public class RunEntryHandler: CommandHandler
+	{
+		CombineEntry entry;
+		
+		protected override void Run ()
+		{
+			entry = Runtime.ProjectService.CurrentSelectedCombineEntry;
+			IAsyncOperation op = Runtime.ProjectService.Build (entry);
+			op.Completed += new OperationHandler (ExecuteCombine);
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
+			info.Enabled = Runtime.ProjectService.CurrentSelectedCombineEntry != null &amp;&amp; 
+							Runtime.ProjectService.CurrentRunOperation.IsCompleted;
+		}
+		
+		void ExecuteCombine (IAsyncOperation op)
+		{
+			if (op.Success)
+				Runtime.ProjectService.Execute (entry);
+		}
+	}
+	
+	
 	public class DebugHandler: CommandHandler
 	{
-		CombineEntry entry;
 		string file;
 		
 		protected override void Run ()
 		{
+			if (Runtime.DebuggingService != null &amp;&amp; Runtime.DebuggingService.IsDebugging &amp;&amp; !Runtime.DebuggingService.IsRunning) {
+				Runtime.DebuggingService.Resume ();
+				return;
+			}
+			
 			if (Runtime.ProjectService.CurrentOpenCombine != null) {
-				entry = Runtime.ProjectService.CurrentSelectedCombineEntry;
-				if (entry != null) {
-					IAsyncOperation op = Runtime.ProjectService.Build (entry);
-					op.Completed += new OperationHandler (ExecuteCombine);
-				}
+				IAsyncOperation op = Runtime.ProjectService.Build (Runtime.ProjectService.CurrentOpenCombine);
+				op.Completed += new OperationHandler (ExecuteCombine);
 			} else {
 				if (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow != null) {
 					file = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow.ViewContent.ContentName;
@@ -130,13 +140,18 @@
 		
 		protected override void Update (CommandInfo info)
 		{
+			if (Runtime.DebuggingService != null &amp;&amp; Runtime.DebuggingService.IsDebugging &amp;&amp; !Runtime.DebuggingService.IsRunning) {
+				info.Enabled = true;
+				info.Text = GettextCatalog.GetString (&quot;Resume&quot;);
+				return;
+			}
+
 			if (Runtime.DebuggingService == null) {
 				info.Enabled = false;
 				return;
 			}
 			if (Runtime.ProjectService.CurrentOpenCombine != null) {
-				info.Enabled = Runtime.ProjectService.CurrentSelectedCombineEntry != null &amp;&amp; 
-								Runtime.ProjectService.CurrentRunOperation.IsCompleted;
+				info.Enabled = Runtime.ProjectService.CurrentRunOperation.IsCompleted;
 			} else {
 				info.Enabled = (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow != null);
 			}
@@ -145,7 +160,7 @@
 		void ExecuteCombine (IAsyncOperation op)
 		{
 			if (op.Success)
-				Runtime.ProjectService.Debug (entry);
+				Runtime.ProjectService.Debug (Runtime.ProjectService.CurrentOpenCombine);
 		}
 		
 		void ExecuteFile (IAsyncOperation op)
@@ -155,56 +170,174 @@
 		}
 	}
 	
-	public class DebugApplicationHandler: CommandHandler
+	public class DebugEntryHandler: CommandHandler
 	{
+		CombineEntry entry;
+		string file;
+		
 		protected override void Run ()
 		{
-			using (FileSelector fs = new FileSelector (GettextCatalog.GetString (&quot;Application to Debug&quot;))) {
-				int response = fs.Run ();
-				string name = fs.Filename;
-				fs.Hide ();
-				if (response == (int)Gtk.ResponseType.Ok)
-					Runtime.ProjectService.DebugApplication (name);
-			}
+			entry = Runtime.ProjectService.CurrentSelectedCombineEntry;
+			IAsyncOperation op = Runtime.ProjectService.Build (entry);
+			op.Completed += new OperationHandler (ExecuteCombine);
 		}
 		
 		protected override void Update (CommandInfo info)
 		{
-			info.Enabled = Runtime.DebuggingService != null &amp;&amp;
+			if (Runtime.DebuggingService == null) {
+				info.Enabled = false;
+				return;
+			}
+
+			info.Enabled = Runtime.ProjectService.CurrentSelectedCombineEntry != null &amp;&amp; 
 							Runtime.ProjectService.CurrentRunOperation.IsCompleted;
 		}
+		
+		void ExecuteCombine (IAsyncOperation op)
+		{
+			if (op.Success)
+				Runtime.ProjectService.Debug (entry);
+		}
 	}
-
+	
 	public class BuildHandler: CommandHandler
 	{
 		protected override void Run ()
 		{
-			if (Runtime.ProjectService.CurrentSelectedCombineEntry != null)
-				Runtime.ProjectService.Build (Runtime.ProjectService.CurrentSelectedCombineEntry);
+			if (Runtime.ProjectService.CurrentOpenCombine != null) {
+				if (Runtime.ProjectService.CurrentSelectedCombineEntry != null)
+					Runtime.ProjectService.Build (Runtime.ProjectService.CurrentSelectedCombineEntry);
+			}
+			else if (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow != null) {
+				Runtime.FileService.SaveFile (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow);
+				Runtime.ProjectService.BuildFile (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow.ViewContent.ContentName);
+			}
 		}
 		
 		protected override void Update (CommandInfo info)
 		{
-			info.Enabled = Runtime.ProjectService.CurrentBuildOperation.IsCompleted &amp;&amp;
-							(Runtime.ProjectService.CurrentSelectedCombineEntry != null);
+			if (Runtime.ProjectService.CurrentOpenCombine != null) {
+				CombineEntry entry = Runtime.ProjectService.CurrentSelectedCombineEntry;
+				if (entry != null) {
+					info.Enabled = Runtime.ProjectService.CurrentBuildOperation.IsCompleted;
+					info.Text = string.Format (GettextCatalog.GetString (&quot;Build {0}&quot;), entry.Name);
+					if (entry is Combine)
+						info.Description = string.Format (GettextCatalog.GetString (&quot;Build Solution {0}&quot;), entry.Name);
+					else if (entry is Project)
+						info.Description = string.Format (GettextCatalog.GetString (&quot;Build Project {0}&quot;), entry.Name);
+					else
+						info.Description = info.Text;
+				} else {
+					info.Enabled = false;
+				}
+			} else {
+				if (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow != null) {
+					info.Enabled = Runtime.ProjectService.CurrentBuildOperation.IsCompleted;
+					string file = Path.GetFileName (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow.ViewContent.ContentName);
+					info.Text = string.Format (GettextCatalog.GetString (&quot;Build {0}&quot;), file);
+				} else {
+					info.Enabled = false;
+				}
+			}
 		}
 	}
 	
+	
 	public class RebuildHandler: CommandHandler
 	{
 		protected override void Run ()
 		{
-			if (Runtime.ProjectService.CurrentSelectedCombineEntry != null)
-				Runtime.ProjectService.Rebuild (Runtime.ProjectService.CurrentSelectedCombineEntry);
+			if (Runtime.ProjectService.CurrentOpenCombine != null) {
+				if (Runtime.ProjectService.CurrentSelectedCombineEntry != null)
+					Runtime.ProjectService.Rebuild (Runtime.ProjectService.CurrentSelectedCombineEntry);
+			}
+			else if (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow != null) {
+				Runtime.FileService.SaveFile (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow);
+				Runtime.ProjectService.BuildFile (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow.ViewContent.ContentName);
+			}
 		}
 		
 		protected override void Update (CommandInfo info)
 		{
+			if (Runtime.ProjectService.CurrentOpenCombine != null) {
+				CombineEntry entry = Runtime.ProjectService.CurrentSelectedCombineEntry;
+				if (entry != null) {
+					info.Enabled = Runtime.ProjectService.CurrentBuildOperation.IsCompleted;
+					info.Text = info.Description = string.Format (GettextCatalog.GetString (&quot;Rebuild {0}&quot;), entry.Name);
+				} else {
+					info.Enabled = false;
+				}
+			} else {
+				if (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow != null) {
+					info.Enabled = Runtime.ProjectService.CurrentBuildOperation.IsCompleted;
+					string file = Path.GetFileName (WorkbenchSingleton.Workbench.ActiveWorkbenchWindow.ViewContent.ContentName);
+					info.Text = info.Description = string.Format (GettextCatalog.GetString (&quot;Rebuild {0}&quot;), file);
+				} else {
+					info.Enabled = false;
+				}
+			}
+		}
+	}
+	
+	public class BuildSolutionHandler: CommandHandler
+	{
+		protected override void Run ()
+		{
+			Runtime.ProjectService.Build (Runtime.ProjectService.CurrentOpenCombine);
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
 			info.Enabled = Runtime.ProjectService.CurrentBuildOperation.IsCompleted &amp;&amp;
-							(Runtime.ProjectService.CurrentSelectedCombineEntry != null);
+							(Runtime.ProjectService.CurrentOpenCombine != null);
 		}
 	}
 	
+	public class RebuildSolutionHandler: CommandHandler
+	{
+		protected override void Run ()
+		{
+			Runtime.ProjectService.Rebuild (Runtime.ProjectService.CurrentOpenCombine);
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
+			info.Enabled = Runtime.ProjectService.CurrentBuildOperation.IsCompleted &amp;&amp;
+							(Runtime.ProjectService.CurrentOpenCombine != null);
+		}
+	}
+	
+	public class CleanSolutionHandler: CommandHandler
+	{
+		protected override void Run ()
+		{
+			Runtime.ProjectService.CurrentOpenCombine.Clean ();
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
+			info.Enabled = Runtime.ProjectService.CurrentOpenCombine != null;
+		}
+	}
+	
+	public class CleanHandler: CommandHandler
+	{
+		protected override void Run ()
+		{
+			Runtime.ProjectService.CurrentSelectedCombineEntry.Clean ();
+		}
+		
+		protected override void Update (CommandInfo info)
+		{
+			if (Runtime.ProjectService.CurrentSelectedCombineEntry != null) {
+				info.Enabled = Runtime.ProjectService.CurrentSelectedCombineEntry != null;
+				info.Text = info.Description = string.Format (GettextCatalog.GetString (&quot;Clean {0}&quot;), Runtime.ProjectService.CurrentSelectedCombineEntry.Name);
+			} else {
+				info.Enabled = false;
+			}
+		}
+	}
+	
 	public class StopHandler: CommandHandler
 	{
 		protected override void Run ()

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Workbench/DefaultWorkbench.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Workbench/DefaultWorkbench.cs	2005-04-29 03:00:42 UTC (rev 2494)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Workbench/DefaultWorkbench.cs	2005-04-30 14:22:53 UTC (rev 2495)
@@ -146,7 +146,7 @@
 
 			IDebuggingService dbgr = Runtime.DebuggingService;
 			if (dbgr != null) {
-				dbgr.PausedEvent += new EventHandler (onDebuggerPaused);
+				dbgr.PausedEvent += (EventHandler) Runtime.DispatchService.GuiDispatch (new EventHandler (onDebuggerPaused));
 			}
 
 			Gtk.Drag.DestSet (this, Gtk.DestDefaults.Motion | Gtk.DestDefaults.Highlight | Gtk.DestDefaults.Drop, targetEntryTypes, Gdk.DragAction.Copy);

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Makefile.am	2005-04-29 03:00:42 UTC (rev 2494)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Makefile.am	2005-04-30 14:22:53 UTC (rev 2495)
@@ -165,6 +165,7 @@
 Commands/FileCommands.cs \
 Commands/HelpCommands.cs \
 Commands/CustomStringTagProvider.cs \
+Commands/DebugCommands.cs \
 Commands/ProjectCommands.cs \
 Commands/VBConverter/ConvertProject.cs \
 Commands/VBConverter/ConvertBuffer.cs \

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/MonoDevelopCore.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/MonoDevelopCore.addin.xml	2005-04-29 03:00:42 UTC (rev 2494)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/MonoDevelopCore.addin.xml	2005-04-30 14:22:53 UTC (rev 2495)
@@ -103,64 +103,65 @@
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.Copy&quot;
 				_label = &quot;_Copy&quot;
 				icon = &quot;Icons.16x16.CopyIcon&quot; 
-				description = &quot;${res:XML.MainMenu.EditMenu.Copy.Description}&quot; 
+				description = &quot;Copy the selection&quot; 
 				shortcut = &quot;Control|C&quot;/&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.Cut&quot;
 				_label = &quot;Cu_t&quot;
 				icon = &quot;Icons.16x16.CutIcon&quot; 
-				description = &quot;${res:XML.MainMenu.EditMenu.Cut.Description}&quot; 
+				description = &quot;Cut the selection&quot; 
 				shortcut = &quot;Control|X&quot;/&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.Paste&quot;
 				_label = &quot;_Paste&quot; 
 				icon = &quot;Icons.16x16.PasteIcon&quot;
+				description = &quot;Paste&quot; 
 				shortcut = &quot;Control|V&quot;/&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.Delete&quot;
 				_label = &quot;_Delete&quot; 
-				description = &quot;${res:XML.MainMenu.EditMenu.Delete.Description}&quot;
+				description = &quot;Delete the selection&quot;
 				icon  = &quot;Icons.16x16.DeleteIcon&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.Rename&quot;
 				_label    = &quot;Re_name&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.Undo&quot;
 				_label = &quot;_Undo&quot; 
 				icon = &quot;Icons.16x16.UndoIcon&quot; 
-				description = &quot;${res:XML.MainMenu.EditMenu.Undo.Description}&quot; 
+				description = &quot;Undo last action&quot; 
 				shortcut = &quot;Control|Z&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.Redo&quot; 
 				_label = &quot;_Redo&quot; 
 				icon = &quot;Icons.16x16.RedoIcon&quot; 
-				description = &quot;${res:XML.MainMenu.EditMenu.Redo.Description}&quot; 
+				description = &quot;Redo last undone action&quot; 
 				shortcut = &quot;Control|Y&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.SelectAll&quot; 
 				_label = &quot;Select _All&quot; 
-				description = &quot;${res:XML.MainMenu.EditMenu.SelectAll.Description}&quot; 
+				description = &quot;Select all text&quot; 
 				shortcut = &quot;Control|A&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.CommentCode&quot;
 				shortcut = &quot;Control|Alt|C&quot;
+				description = &quot;Comment selected lines of code&quot; 
 				_label = &quot;C_omment Line(s)&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.UncommentCode&quot;
 				shortcut = &quot;Control|Alt|U&quot;
+				description = &quot;Uncomment selected lines of code&quot; 
 				_label = &quot;_Uncomment Line(s)&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.IndentSelection&quot;
 				shortcut = &quot;Control|Alt|Home&quot;
+				description = &quot;Indent selected lines of code&quot; 
 				_label = &quot;_Indent Selection&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.UnIndentSelection&quot;
 				shortcut = &quot;Control|Alt|End&quot;
+				description = &quot;Unindent selected lines of code&quot; 
 				_label = &quot;_Unindent Selection&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.WordCount&quot;
 				_label = &quot;_Word Count...&quot; 
-				description = &quot;${res:XML.MainMenu.EditMenu.WordCount.Description}&quot;/&gt;
+				description = &quot;Count words in a text file&quot;/&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.EditCommands.MonodevelopPreferences&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.MonodevelopPreferencesHandler&quot;
 				_label = &quot;_Preferences&quot;
 				icon = &quot;Icons.16x16.Options&quot;
-				description = &quot;${res:XML.MainMenu.ToolMenu.Options.Description}&quot; /&gt;
+				description = &quot;Show MonoDevelop preferences window&quot; /&gt;
 				
 		&lt;!-- ProjectCommands --&gt;
 				
-		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.Compile&quot;
-				defaultHandler = &quot;MonoDevelop.Commands.CompileHandler&quot;
-				description = &quot;Compile&quot;
-				_label = &quot;_Compile&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.AddNewProject&quot;
 				_label = &quot;Add New Project...&quot;
 				description = &quot;Add a new project to the selected solution&quot;
@@ -177,33 +178,48 @@
 				_label = &quot;Add existing Solution&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.RemoveFromProject&quot;
 				_label = &quot;_Remove From Project&quot; 
+				description = &quot;Remove an item from the project&quot;
 				icon  = &quot;Icons.16x16.DeleteIcon&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.Options&quot;
 				_label = &quot;Options&quot; 
 				description = &quot;Show options window&quot;
 				icon  = &quot;Icons.16x16.PropertiesIcon&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.AddResource&quot;
+				description = &quot;Add a resource to the project&quot;
 				_label = &quot;Add Resource&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.AddReference&quot;
+				description = &quot;Edit project references&quot;
 				_label = &quot;Edit References&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.AddNewFiles&quot;
 				_label = &quot;New _File&quot; 
+				description = &quot;Create a new file&quot;
 				icon  = &quot;Icons.16x16.NewDocumentIcon&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.AddFiles&quot;
 				_label = &quot;Add Files&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.NewFolder&quot;
 				_label = &quot;New Folder&quot; 
+				description = &quot;Create a new folder&quot;
 				icon  = &quot;Icons.16x16.NewFolderIcon&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.IncludeToProject&quot;
 				_label = &quot;Include To Project&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.BuildSolution&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.BuildSolutionHandler&quot;
+				_label = &quot;Buil_d Solution&quot;
+				shortcut = &quot;F8&quot;
+				description = &quot;Build the solution&quot;
+				icon  = &quot;Icons.16x16.BuildCombine&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.Build&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.BuildHandler&quot;
 				_label = &quot;Buil_d&quot; 
-				shortcut = &quot;F8&quot;
-				description = &quot;Build the selected project&quot;
+				shortcut = &quot;F7&quot;
 				icon  = &quot;Icons.16x16.BuildCurrentSelectedProject&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.RebuildSolution&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.RebuildSolutionHandler&quot;
+				shortcut = &quot;Control|F8&quot;
+				_label = &quot;Rebuild Solution&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.Rebuild&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.RebuildHandler&quot;
+				shortcut = &quot;Control|F7&quot;
 				_label = &quot;Rebuild&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.SetAsStartupProject&quot;
 				_label = &quot;Set As Startup Project&quot; /&gt;
@@ -211,15 +227,30 @@
 				defaultHandler = &quot;MonoDevelop.Commands.RunHandler&quot;
 				icon = &quot;Icons.16x16.RunProgramIcon&quot;
 				shortcut = &quot;F5&quot;
+				description = &quot;Run&quot;
 				_label = &quot;Run&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.RunEntry&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.RunEntryHandler&quot;
+				icon = &quot;Icons.16x16.RunProgramIcon&quot;
+				description = &quot;Run&quot;
+				_label = &quot;Run&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.Debug&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.DebugHandler&quot;
 				icon = &quot;Icons.16x16.RunProgramIcon&quot;
 				shortcut = &quot;Control|F5&quot;
+				description = &quot;Debug&quot;
 				_label = &quot;Debug&quot; /&gt;
-		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.DebugApplication&quot;
-				defaultHandler = &quot;MonoDevelop.Commands.DebugApplicationHandler&quot;
-				_label = &quot;Debug Application...&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.DebugEntry&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.DebugEntryHandler&quot;
+				icon = &quot;Icons.16x16.RunProgramIcon&quot;
+				description = &quot;Debug&quot;
+				_label = &quot;Debug&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.Clean&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.CleanHandler&quot;
+				_label = &quot;Clean&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.CleanSolution&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.CleanSolutionHandler&quot;
+				_label = &quot;Clean Solution&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ProjectCommands.IncludeInBuild&quot;
 				type=&quot;check&quot;
 				_label = &quot;Build&quot; /&gt;
@@ -244,30 +275,33 @@
 				defaultHandler = &quot;MonoDevelop.Commands.OpenFileHandler&quot;
 				_label = &quot;O_pen&quot; 
 				shortcut = &quot;Control|O&quot;
+				description = &quot;Open file or solution&quot;
 				icon  = &quot;Icons.16x16.OpenFileIcon&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.NewFile&quot; 
 				defaultHandler = &quot;MonoDevelop.Commands.NewFileHandler&quot;
 				_label = &quot;New File&quot;
 				shortcut = &quot;Control|N&quot;
-				description = &quot;${res:XML.MainMenu.FileMenu.New.File.Description}&quot; 
+				description = &quot;Create a new file&quot;
 				icon = &quot;Icons.16x16.NewDocumentIcon&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.Save&quot; 
 				icon = &quot;Icons.16x16.SaveIcon&quot; 
 				shortcut = &quot;Control|S&quot;
+				description = &quot;Save the active document&quot;
 				_label = &quot;Save&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.SaveAll&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.SaveAllHandler&quot;
 				icon = &quot;Icons.16x16.SaveAllIcon&quot; 
+				description = &quot;Save all open files&quot;
 				_label = &quot;Save All&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.NewProject&quot; 
 				defaultHandler = &quot;MonoDevelop.Commands.NewProjectHandler&quot;
 				_label = &quot;N_ew Solution/Project...&quot; 
 				icon = &quot;Icons.16x16.NewProjectIcon&quot; 
-				description = &quot;${res:XML.MainMenu.FileMenu.New.Project.Description}&quot; 
+				description = &quot;Create a new project&quot; 
 				shortcut = &quot;Control|Shift|N&quot;  /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.CloseFile&quot;
 				_label = &quot;_Close File&quot; 
-				description = &quot;${res:XML.MainMenu.FileMenu.Close.File.Desription}&quot;
+				description = &quot;Close active file&quot;
 				icon = &quot;Icons.16x16.CloseIcon&quot;
 				shortcut = &quot;Control|W&quot;/&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.CloseAllFiles&quot;
@@ -279,17 +313,17 @@
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.CloseCombine&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.CloseCombineHandler&quot;
 				_label = &quot;Close Sol_ution&quot; 
-				description = &quot;${res:XML.MainMenu.FileMenu.Close.Project.Desription}&quot;
+				description = &quot;Close solution&quot;
 				icon = &quot;Icons.16x16.CloseCombineIcon&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.ReloadFile&quot;
 				_label = &quot;_Reload File&quot; 
 				shortcut = &quot;Control|U&quot;
-				description = &quot;${res:XML.MainMenu.FileMenu.Reload.Description}&quot; /&gt;
+				description = &quot;Reload the file&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.SaveAs&quot;
 				_label = &quot;Save _As...&quot;
 				icon = &quot;Icons.16x16.SaveAsIcon&quot;
 				shortcut = &quot;Control|Shift|S&quot; 
-				description = &quot;${res:XML.MainMenu.FileMenu.SaveAs.Description}&quot; /&gt;
+				description = &quot;Save file as&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.RecentFileList&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.RecentFileListHandler&quot;
 				type=&quot;array&quot;
@@ -297,7 +331,7 @@
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.ClearRecentFiles&quot; 
 				defaultHandler = &quot;MonoDevelop.Commands.ClearRecentFilesHandler&quot;
 				_label = &quot;_Clear Recent Files&quot; 
-				description = &quot;${res:XML.MainMenu.FileMenu.ClearRecentFiles.Description}&quot; /&gt;
+				description = &quot;Clear recent files&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.RecentProjectList&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.RecentProjectListHandler&quot;
 				type=&quot;array&quot;
@@ -305,12 +339,12 @@
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.ClearRecentProjects&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.ClearRecentProjectsHandler&quot;
 				_label = &quot;_Clear Recent Solutions&quot; 
-				description = &quot;${res:XML.MainMenu.FileMenu.ClearRecentProjects.Description}&quot; /&gt;
+				description = &quot;Clear recent solutions&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.FileCommands.Exit&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.ExitHandler&quot;
 				_label = &quot;_Quit&quot; 
 				icon = &quot;Icons.16x16.QuitIcon&quot; 
-				description = &quot;${res:XML.MainMenu.FileMenu.Exit.Description}&quot;
+				description = &quot;Quit MonoDevelop&quot;
 				shortcut = &quot;Control|Q&quot; /&gt;
 				
 		&lt;!-- ViewCommands --&gt;
@@ -330,7 +364,7 @@
 				defaultHandler = &quot;MonoDevelop.Commands.FullScreenHandler&quot;
 				_label = &quot;_Full Screen&quot; 
 				icon = &quot;Icons.16x16.FullScreen&quot; 
-				description = &quot;${res:XML.MainMenu.ViewMenu.FullScreen.Description}&quot; /&gt;
+				description = &quot;Full Screen&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ViewCommands.Open&quot;
 				_label = &quot;Open&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.ViewCommands.TreeDisplayOptionList&quot;
@@ -352,13 +386,13 @@
 				defaultHandler = &quot;MonoDevelop.Commands.NextWindowHandler&quot;
 				_label = &quot;_Next Window&quot;
 				icon = &quot;Icons.16x16.NextWindowIcon&quot;
-				description = &quot;${res:XML.MainMenu.WindowMenu.NxtWindow.Description}&quot; 
+				description = &quot;Show next window&quot; 
 				shortcut = &quot;Control|Page_Down&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.WindowCommands.PrevWindow&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.PrevWindowHandler&quot;
 				_label = &quot;_Previous Window&quot;
 				icon = &quot;Icons.16x16.PrevWindowIcon&quot;
-				description = &quot;${res:XML.MainMenu.WindowMenu.PrvWindow.Description}&quot;
+				description = &quot;Show previous window&quot;
 				shortcut = &quot;Control|Page_Up&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.WindowCommands.OpenWindowList&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.OpenWindowListHandler&quot;
@@ -371,17 +405,49 @@
 				defaultHandler = &quot;MonoDevelop.Commands.TipOfTheDayHandler&quot;
 				_label = &quot;_Tip of the Day...&quot; 
 				icon = &quot;Icons.16x16.TipOfTheDay&quot; 
-				description = &quot;${res:XML.MainMenu.HelpMenu.Tips.Description}&quot; /&gt;
+				description = &quot;Show tip of the day&quot; /&gt;
 		&lt;Command id = &quot;MonoDevelop.Commands.HelpCommands.About&quot;
 				defaultHandler = &quot;MonoDevelop.Commands.AboutHandler&quot;
 				_label = &quot;_About&quot; 
 				icon = &quot;Icons.16x16.AboutIcon&quot; 
-				description = &quot;${res:XML.MainMenu.HelpMenu.About.Description}&quot; /&gt;
+				description = &quot;Show about dialog&quot; /&gt;
+				
+		&lt;!-- DebugCommands --&gt;
+		
+		&lt;Command id = &quot;MonoDevelop.Commands.DebugCommands.DebugApplication&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.DebugApplicationHandler&quot;
+				_label = &quot;Debug Application...&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.DebugCommands.Pause&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.PauseDebugHandler&quot;
+				_label = &quot;Pause&quot;
+				shortcut = &quot;Control|F8&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.DebugCommands.StepOver&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.StepOverHandler&quot;
+				_label = &quot;Step Over&quot;
+				shortcut = &quot;F11&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.DebugCommands.StepInto&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.StepIntoHandler&quot;
+				_label = &quot;Step Into&quot;
+				shortcut = &quot;Control|F11&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.DebugCommands.StepOut&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.StepOutHandler&quot;
+				_label = &quot;Step Out&quot;
+				shortcut = &quot;Shift|F11&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.DebugCommands.ToggleBreakpoint&quot;
+				_label = &quot;Toggle Breakpoint&quot;
+				shortcut = &quot;F9&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.DebugCommands.ClearAllBreakpoints&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.ClearAllBreakpointsHandler&quot;
+				_label = &quot;Clear All Breakpoints&quot; /&gt;
 	&lt;/Extension&gt;
 
 	&lt;Extension path = &quot;/SharpDevelop/Views/ProjectBrowser/ContextMenu/CombineBrowserNode&quot;&gt;
 		&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Build&quot; /&gt;
 		&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Rebuild&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Clean&quot; /&gt;
+		&lt;SeparatorItem id = &quot;RunSeparator&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.RunEntry&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.DebugEntry&quot; /&gt;
 		&lt;SeparatorItem id = &quot;CombineBuildGroupSeparator&quot; /&gt;
 		&lt;ItemSet id = &quot;CombineAddMenu&quot; _label = &quot;Add&quot; &gt;
 			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.AddNewProject&quot; /&gt;
@@ -473,6 +539,10 @@
 	&lt;Extension path = &quot;/SharpDevelop/Views/ProjectBrowser/ContextMenu/ProjectBrowserNode&quot;&gt;
 		&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Build&quot; /&gt;
 		&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Rebuild&quot;/&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Clean&quot; /&gt;
+		&lt;SeparatorItem id = &quot;RunSeparator&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.RunEntry&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.DebugEntry&quot; /&gt;
 		&lt;SeparatorItem id = &quot;BuildGroupSeparator&quot; /&gt;
 		&lt;ItemSet id = &quot;Add&quot; _label = &quot;Add&quot;&gt;
 			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.AddNewFiles&quot; /&gt;
@@ -723,6 +793,7 @@
 			&lt;SeparatorItem id = &quot;CompileSeparator&quot; /&gt;
 &lt;!--			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.ConfigurationSelector&quot; /&gt;--&gt;
 			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Build&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.BuildSolution&quot; /&gt;
 			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Run&quot; /&gt;
 			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Stop&quot; /&gt;
 		&lt;/ItemSet&gt;
@@ -802,15 +873,27 @@
 		&lt;/ItemSet&gt;
 		
 		&lt;ItemSet id = &quot;Run&quot; _label = &quot;_Run&quot;&gt;
-			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Compile&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.BuildSolution&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.RebuildSolution&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.CleanSolution&quot; /&gt;
+			&lt;SeparatorItem id = &quot;Separator0&quot; /&gt;
 			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Build&quot; /&gt;
 			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Rebuild&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Clean&quot; /&gt;
 			&lt;SeparatorItem id = &quot;Separator1&quot; /&gt;
 			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Run&quot; /&gt;
 			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Debug&quot; /&gt;
-			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.DebugApplication&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.DebugCommands.DebugApplication&quot; /&gt;
 			&lt;SeparatorItem id = &quot;Separator2&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.DebugCommands.Pause&quot; /&gt;
 			&lt;CommandItem id = &quot;MonoDevelop.Commands.ProjectCommands.Stop&quot; /&gt;
+			&lt;SeparatorItem id = &quot;Separator3&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.DebugCommands.StepOver&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.DebugCommands.StepInto&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.DebugCommands.StepOut&quot; /&gt;
+			&lt;SeparatorItem id = &quot;Separator4&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.DebugCommands.ToggleBreakpoint&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.DebugCommands.ClearAllBreakpoints&quot; /&gt;
 		&lt;/ItemSet&gt;
         
 		&lt;ItemSet id = &quot;Tools&quot; _label = &quot;Tools&quot;&gt;

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DebuggerService/IDebuggerService.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DebuggerService/IDebuggerService.cs	2005-04-29 03:00:42 UTC (rev 2494)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/DebuggerService/IDebuggerService.cs	2005-04-30 14:22:53 UTC (rev 2495)
@@ -17,6 +17,7 @@
 
 	public interface IDebuggingService {
 		bool IsRunning { get; }
+		bool IsDebugging { get; }
 		bool AddBreakpoint (string filename, int linenum);
 		void RemoveBreakpoint (string filename, int linenum);
 		bool ToggleBreakpoint (string filename, int linenum);
@@ -38,6 +39,7 @@
 
 		void StepInto ();
 		void StepOver ();
+		void StepOut ();
 
 		string[] Backtrace { get; }
 
@@ -48,5 +50,7 @@
 		
 		IBreakpoint[] Breakpoints { get; }
 		IBreakpoint[] GetBreakpointsAtFile (string sourceFile);
+		
+		void ClearAllBreakpoints ();
 	}
 }

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/Project/ProjectService.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/Project/ProjectService.cs	2005-04-29 03:00:42 UTC (rev 2494)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Services/Project/ProjectService.cs	2005-04-30 14:22:53 UTC (rev 2495)
@@ -336,7 +336,6 @@
 
 		public IAsyncOperation Execute (CombineEntry entry)
 		{
-			if (openCombine == null) return NullAsyncOperation.Success;
 			if (currentRunOperation != null &amp;&amp; !currentRunOperation.IsCompleted) return currentRunOperation;
 
 			IProgressMonitor monitor = new NullProgressMonitor ();
@@ -362,7 +361,6 @@
 		
 		public IAsyncOperation Debug (CombineEntry entry)
 		{
-			if (openCombine == null) return NullAsyncOperation.Success;
 			if (currentRunOperation != null &amp;&amp; !currentRunOperation.IsCompleted) return currentRunOperation;
 			
 			guiHelper.SetWorkbenchContext (WorkbenchContext.Debug);
@@ -442,7 +440,7 @@
 				aop.Completed += new OperationHandler (h.Run);
 				return aop;
 			} else {
-				Runtime.MessageService.ShowError (string.Format (GettextCatalog.GetString (&quot;The current file {0} can't be compiled.&quot;), file));
+				Runtime.MessageService.ShowError (string.Format (GettextCatalog.GetString (&quot;The file {0} can't be compiled.&quot;), file));
 				return NullAsyncOperation.Failure;
 			}
 		}
@@ -464,7 +462,6 @@
 	
 		public IAsyncOperation Rebuild (CombineEntry entry)
 		{
-			if (openCombine == null) return NullAsyncOperation.Success;
 			if (currentBuildOperation != null &amp;&amp; !currentBuildOperation.IsCompleted) return currentBuildOperation;
 
 			entry.Clean ();
@@ -473,7 +470,6 @@
 		
 		public IAsyncOperation Build (CombineEntry entry)
 		{
-			if (openCombine == null) return NullAsyncOperation.Success;
 			if (currentBuildOperation != null &amp;&amp; !currentBuildOperation.IsCompleted) return currentBuildOperation;
 			
 			BeforeCompile (entry);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002094.html">[Monodevelop-patches-list] r2494 - trunk/MonoDevelop/Core/src/MonoDevelop.Dock
</A></li>
	<LI>Next message: <A HREF="002096.html">[Monodevelop-patches-list] r2496 - in trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn: . Gui/Pads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2095">[ date ]</a>
              <a href="thread.html#2095">[ thread ]</a>
              <a href="subject.html#2095">[ subject ]</a>
              <a href="author.html#2095">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
