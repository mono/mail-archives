<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2475 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . Commands Gui Services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2475%20-%20in%20trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor%3A%20.%20Commands%20Gui%20Services&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002075.html">
   <LINK REL="Next"  HREF="002077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2475 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . Commands Gui Services</H1>
    <B>Lluis Sanchez &lt;lluis@ximian.com&gt;</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2475%20-%20in%20trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor%3A%20.%20Commands%20Gui%20Services&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2475 - in trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor: . Commands Gui Services">lluis at mono-cvs.ximian.com
       </A><BR>
    <I>Mon Apr 25 16:35:47 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002075.html">[Monodevelop-patches-list] r2474 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Commands Gui Gui/Components Gui/Dialogs Gui/Pads/ClassPad Gui/Pads/ProjectPad Gui/Pads/SolutionPad Gui/Workbench Gui/Workbench/Layouts Internal/Codons Internal/Codons/Commands Internal/Codons/Pads Internal/Conditions Internal/Project/Combine Internal/Project/Project Services Services/File Services/Project
</A></li>
        <LI>Next message: <A HREF="002077.html">[Monodevelop-patches-list] r2476 - trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2076">[ date ]</a>
              <a href="thread.html#2076">[ thread ]</a>
              <a href="subject.html#2076">[ subject ]</a>
              <a href="author.html#2076">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lluis
Date: 2005-04-25 16:35:47 -0400 (Mon, 25 Apr 2005)
New Revision: 2475

Added:
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Commands/EditorCommands.cs
Modified:
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Commands/SearchCommands.cs
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorWidget.cs
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Makefile.am
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/MonoDevelopEditor.addin.xml
   trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Services/SourceViewService.cs
Log:
2005-04-25  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt; 

	* Gui/SourceEditorWidget.cs: Moved here editor-specific commands.
	* Gui/SourceEditorDisplayBinding.cs: The methods for managing
	bookmarks are now in the editor widget, not the buffer.
	* Commands/EditorCommands.cs: New enum with IDs for edit commands.
	* Commands/SearchCommands.cs: Moved editor-specific commands to
	SourceEditorWidget.cs.
	* MonoDevelopEditor.addin.xml: Created the new command structure.



Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog	2005-04-25 20:35:11 UTC (rev 2474)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/ChangeLog	2005-04-25 20:35:47 UTC (rev 2475)
@@ -1,3 +1,13 @@
+2005-04-25  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt; 
+
+	* Gui/SourceEditorWidget.cs: Moved here editor-specific commands.
+	* Gui/SourceEditorDisplayBinding.cs: The methods for managing
+	bookmarks are now in the editor widget, not the buffer.
+	* Commands/EditorCommands.cs: New enum with IDs for edit commands.
+	* Commands/SearchCommands.cs: Moved editor-specific commands to
+	SourceEditorWidget.cs.
+	* MonoDevelopEditor.addin.xml: Created the new command structure.
+
 2005-04-25  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt;
 
 	* Gui/SourceEditorWidget.cs:

Added: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Commands/EditorCommands.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Commands/EditorCommands.cs	2005-04-25 20:35:11 UTC (rev 2474)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Commands/EditorCommands.cs	2005-04-25 20:35:47 UTC (rev 2475)
@@ -0,0 +1,44 @@
+//
+// EditorCommands.cs
+//
+// Author:
+//   Lluis Sanchez Gual
+//
+// Copyright (C) 2005 Novell, Inc (<A HREF="http://www.novell.com">http://www.novell.com</A>)
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// &quot;Software&quot;), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+//
+
+using System;
+
+namespace MonoDevelop.DefaultEditor
+{
+	public enum EditorCommands
+	{
+		HighlightingTypeList,
+		ShowBufferOptions,
+		ToggleBookmark,
+		PrevBookmark,
+		NextBookmark,
+		ClearBookmarks,
+		GotoLineNumber,
+		GotoMatchingBrace
+	}
+}

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Commands/SearchCommands.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Commands/SearchCommands.cs	2005-04-25 20:35:11 UTC (rev 2474)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Commands/SearchCommands.cs	2005-04-25 20:35:47 UTC (rev 2475)
@@ -24,97 +24,24 @@
 using MonoDevelop.Gui;
 using MonoDevelop.SourceEditor.Gui;
 using SourceEditor_ = MonoDevelop.SourceEditor.Gui.SourceEditor;
+using MonoDevelop.Commands;
 
-namespace MonoDevelop.DefaultEditor.Commands
+namespace MonoDevelop.Commands
 {
-	
-	public abstract class AbstractEditActionMenuCommand : AbstractMenuCommand
+	public enum SearchCommands
 	{
-		public abstract IEditAction EditAction
-		{
-			get;
-		}
-		
-		public override void Run()
-		{
-			Console.WriteLine (&quot;Not implemented in the new editor&quot;);
-			/*IWorkbenchWindow window = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
-			
-			if (window == null || !(window.ViewContent is ITextEditorControlProvider)) {
-				return;
-			}
-			TextEditorControl textEditor = ((ITextEditorControlProvider)window.ViewContent).TextEditorControl;
-			EditAction.Execute(textEditor.ActiveTextAreaControl.TextArea);*/
-		}
+		Find,
+		FindNext,
+		FindPrevious,
+		Replace,
+		FindInFiles,
+		FindSelection,
+		FindBox,
+		ReplaceInFiles
 	}
-	
-	public class Find : AbstractMenuCommand
-	{
-		public static void SetSearchPattern ()
-		{
-			IWorkbenchWindow window = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
 
-			if (window != null &amp;&amp; window.ViewContent is SourceEditorDisplayBindingWrapper)
-			{
-				SourceEditor_ editor = ((SourceEditorDisplayBindingWrapper)window.ViewContent).Editor;
-				string selectedText = editor.Buffer.GetSelectedText ();
-				
-				if (selectedText != null &amp;&amp; selectedText.Length &gt; 0)
-					SearchReplaceManager.SearchOptions.SearchPattern = selectedText.Split ('\n')[0];
-			}
-		}
-		
-		public override void Run()
-		{
-			SetSearchPattern();
-			if (SearchReplaceManager.ReplaceDialog != null) {
-				if (SearchReplaceManager.ReplaceDialog.replaceMode == false) {
-					SearchReplaceManager.ReplaceDialog.SetSearchPattern(SearchReplaceManager.SearchOptions.SearchPattern);
-					SearchReplaceManager.ReplaceDialog.Present ();
-				} else {
-					SearchReplaceManager.ReplaceDialog.Destroy ();
-					ReplaceDialog rd = new ReplaceDialog (false);
-					rd.ShowAll ();
-				}
-			} else {
-				ReplaceDialog rd = new ReplaceDialog (false);
-				rd.ShowAll();
-			}
-		}
-	}
-	
-	public class FindNext : AbstractMenuCommand
+	public class FindInFilesHandler : CommandHandler
 	{
-		public override void Run ()
-		{
-			SearchReplaceManager.FindNext ();
-		}
-	}
-	
-	public class Replace : AbstractMenuCommand
-	{
-		public override void Run ()
-		{ 
-			Find.SetSearchPattern ();
-			
-			if (SearchReplaceManager.ReplaceDialog != null) {
-				if (SearchReplaceManager.ReplaceDialog.replaceMode == true) {
-					SearchReplaceManager.ReplaceDialog.SetSearchPattern(SearchReplaceManager.SearchOptions.SearchPattern);
-					SearchReplaceManager.ReplaceDialog.Present ();
-				} else {
-					SearchReplaceManager.ReplaceDialog.Destroy ();
-					ReplaceDialog rd = new ReplaceDialog (true);
-					rd.ShowAll ();
-				}
-			} else {
-				ReplaceDialog rd = new ReplaceDialog(true);
-				rd.ShowAll();
-			}
-		}
-	}
-	
-	public class FindInFiles : AbstractMenuCommand
-	{
 		public static void SetSearchPattern ()
 		{
 			IWorkbenchWindow window = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
@@ -127,10 +54,7 @@
 			}
 		}
 
-		
-				
-								
-		public override void Run ()
+		protected override void Run ()
 		{
 			SetSearchPattern ();
 			if (SearchReplaceInFilesManager.ReplaceDialog != null) {
@@ -149,11 +73,11 @@
 		}
 	}
 	
-	public class ReplaceInFiles : AbstractMenuCommand
+	public class ReplaceInFilesHandler : CommandHandler
 	{
-		public override void Run()
+		protected override void Run()
 		{
-			FindInFiles.SetSearchPattern ();
+			FindInFilesHandler.SetSearchPattern ();
 			
 			if (SearchReplaceInFilesManager.ReplaceDialog != null) {
 				if (SearchReplaceInFilesManager.ReplaceDialog.replaceMode == true) {
@@ -171,26 +95,4 @@
 		}
 	}
 	
-	public class GotoLineNumber : AbstractMenuCommand
-	{
-		public override void Run ()
-		{
-			if (!GotoLineNumberDialog.IsVisible)
-				using (GotoLineNumberDialog gnd = new GotoLineNumberDialog ())
-					gnd.Run ();
-		}
-	}
-	
-	public class GotoMatchingBrace : AbstractMenuCommand
-	{
-		public override void Run ()
-		{
-			IWorkbenchWindow wnd = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
-			if (wnd == null) return;
-			SourceEditorDisplayBindingWrapper o = wnd.ViewContent as SourceEditorDisplayBindingWrapper;
-			if (o == null) return;
-
-			o.GotoMatchingBrace ();
-		}
-	}
 }

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs	2005-04-25 20:35:11 UTC (rev 2474)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorDisplayBinding.cs	2005-04-25 20:35:47 UTC (rev 2475)
@@ -224,16 +224,6 @@
 			return false;
 		}
 		
-		public void GotoMatchingBrace ()
-		{
-			TextIter iter = se.Buffer.GetIterAtMark (se.Buffer.InsertMark);
-			if (Source.IterFindMatchingBracket (ref iter)) {
-				iter.ForwardChar ();
-				se.Buffer.PlaceCursor (iter);
-				se.View.ScrollMarkOnscreen (se.Buffer.InsertMark);
-			}
-		}
-		
 		public override void RedrawContent()
 		{
 		}
@@ -484,24 +474,22 @@
 #region IBookmarkOperations
 		void IBookmarkOperations.ToggleBookmark ()
 		{
-			se.Buffer.ToggleBookmark ();
+			se.ToggleBookmark ();
 		}
 		
 		void IBookmarkOperations.PrevBookmark ()
 		{
-			se.Buffer.PrevBookmark ();
-			se.View.ScrollMarkOnscreen (se.Buffer.InsertMark);
+			se.PrevBookmark ();
 		}
 		
 		void IBookmarkOperations.NextBookmark ()
 		{
-			se.Buffer.NextBookmark ();
-			se.View.ScrollMarkOnscreen (se.Buffer.InsertMark);
+			se.NextBookmark ();
 		}
 		
 		void IBookmarkOperations.ClearBookmarks ()
 		{
-			se.Buffer.ClearBookmarks ();
+			se.ClearBookmarks ();
 		}
 #endregion
 

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorWidget.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorWidget.cs	2005-04-25 20:35:11 UTC (rev 2474)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Gui/SourceEditorWidget.cs	2005-04-25 20:35:47 UTC (rev 2475)
@@ -2,7 +2,13 @@
 
 using System;
 using System.Runtime.InteropServices;
-	
+
+using MonoDevelop.TextEditor.Document;
+using MonoDevelop.Commands;
+using MonoDevelop.Gui.Dialogs;
+using GtkSourceView;
+using MonoDevelop.DefaultEditor;
+
 namespace MonoDevelop.SourceEditor.Gui
 {
 	public class SourceEditor : ScrolledWindow
@@ -75,6 +81,112 @@
 			Buffer.Replace (offset, length, pattern);
 		}
 		
+		
+		public void SetSearchPattern ()
+		{
+			string selectedText = Buffer.GetSelectedText ();
+			if (selectedText != null &amp;&amp; selectedText.Length &gt; 0)
+				SearchReplaceManager.SearchOptions.SearchPattern = selectedText.Split ('\n')[0];
+		}
+		
+		[CommandHandler (SearchCommands.Find)]
+		public void Find()
+		{
+			SetSearchPattern();
+			if (SearchReplaceManager.ReplaceDialog != null) {
+				if (SearchReplaceManager.ReplaceDialog.replaceMode == false) {
+					SearchReplaceManager.ReplaceDialog.SetSearchPattern(SearchReplaceManager.SearchOptions.SearchPattern);
+					SearchReplaceManager.ReplaceDialog.Present ();
+				} else {
+					SearchReplaceManager.ReplaceDialog.Destroy ();
+					ReplaceDialog rd = new ReplaceDialog (false);
+					rd.ShowAll ();
+				}
+			} else {
+				ReplaceDialog rd = new ReplaceDialog (false);
+				rd.ShowAll();
+			}
+		}
+		
+		[CommandHandler (SearchCommands.FindNext)]
+		public void FindNext ()
+		{
+			SearchReplaceManager.FindNext ();
+		}
+	
+		[CommandHandler (SearchCommands.FindSelection)]
+		public void FindSelection ()
+		{
+			SetSearchPattern();
+			SearchReplaceManager.FindNext ();
+		}
+	
+		[CommandHandler (SearchCommands.Replace)]
+		public void Replace ()
+		{ 
+			SetSearchPattern ();
+			
+			if (SearchReplaceManager.ReplaceDialog != null) {
+				if (SearchReplaceManager.ReplaceDialog.replaceMode == true) {
+					SearchReplaceManager.ReplaceDialog.SetSearchPattern(SearchReplaceManager.SearchOptions.SearchPattern);
+					SearchReplaceManager.ReplaceDialog.Present ();
+				} else {
+					SearchReplaceManager.ReplaceDialog.Destroy ();
+					ReplaceDialog rd = new ReplaceDialog (true);
+					rd.ShowAll ();
+				}
+			} else {
+				ReplaceDialog rd = new ReplaceDialog(true);
+				rd.ShowAll();
+			}
+		}
+		
+		
+		[CommandHandler (EditorCommands.GotoLineNumber)]
+		public void GotoLineNumber ()
+		{
+			if (!GotoLineNumberDialog.IsVisible)
+				using (GotoLineNumberDialog gnd = new GotoLineNumberDialog ())
+					gnd.Run ();
+		}
+		
+		[CommandHandler (EditorCommands.GotoMatchingBrace)]
+		public void GotoMatchingBrace ()
+		{
+			TextIter iter = Buffer.GetIterAtMark (Buffer.InsertMark);
+			if (Source.IterFindMatchingBracket (ref iter)) {
+				iter.ForwardChar ();
+				Buffer.PlaceCursor (iter);
+				View.ScrollMarkOnscreen (Buffer.InsertMark);
+			}
+		}
+
+		[CommandHandler (EditorCommands.ToggleBookmark)]
+		public void ToggleBookmark ()
+		{
+			Buffer.ToggleBookmark ();
+		}
+		
+		[CommandHandler (EditorCommands.PrevBookmark)]
+		public void PrevBookmark ()
+		{
+			Buffer.PrevBookmark ();
+			View.ScrollMarkOnscreen (Buffer.InsertMark);
+		}
+		
+		[CommandHandler (EditorCommands.NextBookmark)]
+		public void NextBookmark ()
+		{
+			Buffer.NextBookmark ();
+			View.ScrollMarkOnscreen (Buffer.InsertMark);
+		}
+		
+		[CommandHandler (EditorCommands.ClearBookmarks)]
+		public void ClearBookmarks ()
+		{
+			Buffer.ClearBookmarks ();
+		}
+
 		private static readonly string [] drag_icon_xpm = new string [] {
 			&quot;36 48 9 1&quot;,
 			&quot; 	c None&quot;,

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Makefile.am	2005-04-25 20:35:11 UTC (rev 2474)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Makefile.am	2005-04-25 20:35:47 UTC (rev 2475)
@@ -32,16 +32,9 @@
 InsightWindow/MethodInsightDataProvider.cs \
 InsightWindow/InsightWindow.cs \
 InsightWindow/IInsightDataProvider.cs \
-Commands/CommentRegionCommand.cs \
-Commands/BookmarkCommands.cs \
-Commands/CodeActions.cs \
-Commands/IEditAction.cs \
-Commands/ToolCommands.cs \
-Commands/FoldingCommands.cs \
+Commands/EditorCommands.cs \
 Commands/SearchCommands.cs \
-Commands/ProjectCommands.cs \
-Commands/FormatCommands.cs \
-Commands/TextAreaContextmenuCommands.cs \
+Commands/IEditAction.cs \
 Properties/TextEditorProperties.cs \
 FormattingStrategy/DefaultFormattingStrategy.cs \
 FormattingStrategy/IndentStyle.cs \

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/MonoDevelopEditor.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/MonoDevelopEditor.addin.xml	2005-04-25 20:35:11 UTC (rev 2474)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/MonoDevelopEditor.addin.xml	2005-04-25 20:35:47 UTC (rev 2475)
@@ -28,7 +28,7 @@
 			          insertafter = &quot;GenerateDocumentation&quot;
 			          insertbefore = &quot;Separator5&quot;
 			          _label = &quot;${res:ProjectComponent.ContextMenu.HtmlExport}&quot;
-			          class = &quot;MonoDevelop.DefaultEditor.Commands.ExportProjectToHtml&quot;/&gt;
+			          class = &quot;MonoDevelop.DefaultEditor.EditorCommands.ExportProjectToHtml&quot;/&gt;
 		&lt;/Conditional&gt; --&gt;
 	&lt;/Extension&gt;
 	
@@ -38,7 +38,7 @@
 			          insertafter = &quot;GenerateDocumentation&quot;
 			          insertbefore = &quot;Separator2&quot;
 			          _label = &quot;${res:ProjectComponent.ContextMenu.HtmlExport}&quot;
-			          class = &quot;MonoDevelop.DefaultEditor.Commands.ExportProjectToHtml&quot;/&gt;
+			          class = &quot;MonoDevelop.DefaultEditor.EditorCommands.ExportProjectToHtml&quot;/&gt;
 		&lt;/Conditional&gt;
 	&lt;/Extension&gt; --&gt;
 	
@@ -49,199 +49,133 @@
 			          insertafter = &quot;GenerateDocumentation&quot;
 			          insertbefore = &quot;SetAsStartupProjectSeparator&quot;
 			          _label = &quot;${res:ProjectComponent.ContextMenu.HtmlExport}&quot;
-			          class = &quot;MonoDevelop.DefaultEditor.Commands.ExportProjectToHtml&quot;/&gt;
+			          class = &quot;MonoDevelop.DefaultEditor.EditorCommands.ExportProjectToHtml&quot;/&gt;
 		&lt;/Conditional&gt; --&gt;
 	&lt;/Extension&gt;
-	
+
+	&lt;Extension path = &quot;/SharpDevelop/Commands&quot;&gt;
+		&lt;Command id = &quot;MonoDevelop.DefaultEditor.EditorCommands.HighlightingTypeList&quot;
+				type = &quot;array|radio&quot;
+				_label = &quot;bogus_label&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.DefaultEditor.EditorCommands.ShowBufferOptions&quot;
+				_label = &quot;Buffer Options&quot;
+				icon = &quot;Icons.16x16.PropertiesIcon&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.DefaultEditor.EditorCommands.ToggleBookmark&quot;
+				icon = &quot;Icons.16x16.ToggleBookmark&quot;
+				shortcut = &quot;Control|F2&quot;
+				_label = &quot;Toggle Bookmark&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.DefaultEditor.EditorCommands.PrevBookmark&quot;
+				icon = &quot;Icons.16x16.GotoPrevbookmark&quot;
+				shortcut = &quot;Shift|F2&quot;
+				_label = &quot;Previous Bookmark&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.DefaultEditor.EditorCommands.NextBookmark&quot;
+				icon = &quot;Icons.16x16.GotoNextbookmark&quot;
+				shortcut = &quot;F2&quot;
+				_label = &quot;Next Bookmark&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.DefaultEditor.EditorCommands.ClearBookmarks&quot;
+				icon = &quot;Icons.16x16.ClearAllBookmarks&quot;
+				_label = &quot;Clear Bookmarks&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.DefaultEditor.EditorCommands.GotoLineNumber&quot;
+				_label = &quot;_Goto Line...&quot; 
+				description = &quot;${res:XML.MainMenu.SearchMenu.GotoLineNr.Description}&quot; 
+				shortcut = &quot;Control|G&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.DefaultEditor.EditorCommands.GotoMatchingBrace&quot;
+				_label = &quot;Goto Matching _Brace&quot; 
+				description = &quot;${res:XML.MainMenu.SearchMenu.GotoBrace.Description}&quot; 
+				shortcut = &quot;Control|B&quot; /&gt;
+
+		&lt;!-- SearchCommands --&gt;
+		
+		&lt;Command id = &quot;MonoDevelop.Commands.SearchCommands.Find&quot;
+				_label = &quot;_Find...&quot; 
+				icon = &quot;Icons.16x16.FindIcon&quot; 
+				description = &quot;${res:XML.MainMenu.SearchMenu.Find.Description}&quot; 
+				shortcut = &quot;Control|F&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.SearchCommands.FindNext&quot;
+				_label = &quot;Find _Next&quot; 
+				icon = &quot;Icons.16x16.FindNextIcon&quot; 
+				description = &quot;${res:XML.MainMenu.SearchMenu.FindNext.Description}&quot; 
+				shortcut = &quot;F3&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.SearchCommands.FindSelection&quot;
+				_label = &quot;Find Selection&quot; 
+				shortcut = &quot;Control|F3&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.SearchCommands.FindPrevious&quot;
+				_label = &quot;Find _Previous&quot; 
+				icon = &quot;Icons.16x16.FindPrevIcon&quot; 
+				description = &quot;${res:XML.MainMenu.SearchMenu.FindPrevious.Description}&quot; 
+				shortcut = &quot;Shift|F3&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.SearchCommands.Replace&quot;
+				_label = &quot;_Replace...&quot; 
+				icon = &quot;Icons.16x16.ReplaceIcon&quot; 
+				description = &quot;${res:XML.MainMenu.SearchMenu.Replace.Description}&quot; 
+				shortcut = &quot;Control|H&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.SearchCommands.FindInFiles&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.FindInFilesHandler&quot;
+				_label = &quot;F_ind In Files...&quot; 
+				icon = &quot;Icons.16x16.FindInFiles&quot; 
+				description = &quot;${res:XML.MainMenu.SearchMenu.FindInFiles.Description}&quot; /&gt;
+		&lt;Command id = &quot;MonoDevelop.Commands.SearchCommands.ReplaceInFiles&quot;
+				defaultHandler = &quot;MonoDevelop.Commands.ReplaceInFilesHandler&quot;
+				_label = &quot;R_eplace In Files...&quot; 
+				icon = &quot;Icons.16x16.ReplaceInFiles&quot; 
+				description = &quot;${res:XML.MainMenu.SearchMenu.ReplaceInFiles.Description}&quot; /&gt;
+	&lt;/Extension&gt;
+
 	&lt;Extension path = &quot;/SharpDevelop/ViewContent/DefaultTextEditor/ContextMenu&quot;&gt;
-		&lt;MenuItem id = &quot;Cut&quot;
-		          _label = &quot;Cut&quot;
-		          icon = &quot;Icons.16x16.CutIcon&quot;
-		          shortcut = &quot;Control|X&quot;
-		          class = &quot;MonoDevelop.Commands.Cut&quot;/&gt;
-		&lt;MenuItem id = &quot;Copy&quot;
-		          _label = &quot;Copy&quot;
-		          icon = &quot;Icons.16x16.CopyIcon&quot;
-		          shortcut = &quot;Control|C&quot;
-		          class = &quot;MonoDevelop.Commands.Copy&quot;/&gt;
-		&lt;MenuItem id = &quot;Paste&quot;
-		          _label = &quot;Paste&quot;
-		          icon = &quot;Icons.16x16.PasteIcon&quot;
-		          shortcut = &quot;Control|V&quot;
-		          class = &quot;MonoDevelop.Commands.Paste&quot;/&gt;
-		&lt;MenuItem id = &quot;Delete&quot;
-		          _label = &quot;Delete&quot;
-		          icon = &quot;Icons.16x16.DeleteIcon&quot;
-		          class = &quot;MonoDevelop.Commands.Delete&quot;/&gt;
-		&lt;MenuItem id = &quot;Separator1&quot; _label = &quot;-&quot; /&gt;
-		&lt;MenuItem id = &quot;Save&quot;
-		          _label = &quot;Save&quot;
-		          icon = &quot;Icons.16x16.SaveIcon&quot;
-		          shortcut = &quot;Control|S&quot;
-		          class = &quot;MonoDevelop.Commands.SaveFile&quot;/&gt;
-		&lt;MenuItem id = &quot;SaveAs&quot;
-		          _label = &quot;Save As&quot;
-		          class = &quot;MonoDevelop.Commands.SaveFileAs&quot;/&gt;
-		&lt;MenuItem id = &quot;File&quot;
-		          _label = &quot;Close&quot;
-		          class =&quot;MonoDevelop.Commands.CloseFile&quot;/&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.EditCommands.Cut&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.EditCommands.Copy&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.EditCommands.Paste&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.EditCommands.Delete&quot; /&gt;
+		&lt;SeparatorItem id = &quot;Separator1&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.FileCommands.Save&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.FileCommands.SaveAs&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.FileCommands.CloseFile&quot; /&gt;
 		&lt;MenuItem id = &quot;Separator2&quot; _label = &quot;-&quot; /&gt;
-		&lt;MenuItem id = &quot;Comment&quot;
-		          icon  = &quot;Icons.16x16.CommentRegion&quot;
-		          _label = &quot;Toggle Comments&quot;
-		          class= &quot;MonoDevelop.DefaultEditor.Commands.CommentRegion&quot;/&gt;
-&lt;!--		&lt;MenuItem id = &quot;Uncomment&quot;
-		          icon  = &quot;Icons.16x16.UnCommentRegion&quot;
-                  _label = &quot;${res:XML.TextAreaContextMenu.UncommentSelection}&quot;
-		          class= &quot;MonoDevelop.DefaultEditor.Commands.UncommentRegion&quot;/&gt;--&gt;
-		&lt;MenuItem id = &quot;Indent&quot;
-		          _label = &quot;Indent Selection&quot;
-		          shortcut = &quot;Control|I&quot;
-		          class = &quot;MonoDevelop.DefaultEditor.Commands.IndentSelection&quot; /&gt;
-		
-		&lt;MenuItem id = &quot;FileMode&quot; _label = &quot;Highlighting Mode&quot;&gt;
-			&lt;MenuItem id = &quot;HighlightBuilder&quot; _label = &quot;bogus_label&quot; class = &quot;MonoDevelop.DefaultEditor.Commands.HighlightingTypeBuilder&quot; /&gt;
-		&lt;/MenuItem&gt;
-		
-		&lt;MenuItem id = &quot;Separator3&quot; _label = &quot;-&quot; /&gt;
-		&lt;MenuItem id = &quot;Options&quot;
-		          _label = &quot;Buffer Options&quot;
-		          icon = &quot;Icons.16x16.PropertiesIcon&quot;
-		          class =&quot;MonoDevelop.DefaultEditor.Commands.ShowBufferOptions&quot;/&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.EditCommands.CommentCode&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.EditCommands.UncommentCode&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.EditCommands.IndentSelection&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.EditCommands.UnIndentSelection&quot; /&gt;
+		&lt;ItemSet id = &quot;FileMode&quot; _label = &quot;Highlighting Mode&quot;&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.HighlightingTypeList&quot; /&gt;
+		&lt;/ItemSet&gt;
+		&lt;SeparatorItem id = &quot;Separator3&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.ShowBufferOptions&quot; /&gt;
 	&lt;/Extension&gt;
 
 	&lt;Extension path = &quot;/SharpDevelop/Workbench/ToolBar/Standard&quot;&gt;
-			&lt;Conditional action=&quot;Disable&quot;&gt;
-				&lt;Or&gt;
-					&lt;Condition activewindow=&quot;MonoDevelop.SourceEditor.Gui.SourceEditorDisplayBindingWrapper&quot;/&gt;
-					&lt;Condition openproject=&quot;*&quot;/&gt;
-				&lt;/Or&gt;
-			
-				&lt;ToolbarItem id = &quot;Find&quot;
-				             icon = &quot;Icons.16x16.FindIcon&quot; 
-				             _tooltip = &quot;Find&quot;
-				             class = &quot;MonoDevelop.DefaultEditor.Commands.Find&quot;/&gt;
-				&lt;ToolbarItem id = &quot;FindNext&quot;
-				             icon = &quot;Icons.16x16.FindNextIcon&quot;
-				             _tooltip = &quot;Find Next&quot;
-				             class = &quot;MonoDevelop.DefaultEditor.Commands.FindNext&quot;/&gt;
-				&lt;ToolbarItem id = &quot;Replace&quot;
-				             icon = &quot;Icons.16x16.ReplaceIcon&quot; 
-				             _tooltip = &quot;Replace&quot;
-				             class = &quot;MonoDevelop.DefaultEditor.Commands.Replace&quot;/&gt;	
-			&lt;/Conditional&gt;             
-			&lt;ToolbarItem id = &quot;SearchSeparator&quot; _tooltip = &quot;-&quot;/&gt;
-			&lt;Conditional activewindow=&quot;MonoDevelop.DefaultEditor.Gui.Editor.ITextEditorControlProvider&quot; action=&quot;Disable&quot;&gt;
-&lt;!--				&lt;ToolbarItem id = &quot;Comment&quot;
-				             icon = &quot;Icons.16x16.CommentRegion&quot; 
-				             tooltip = &quot;${res:XML.TextAreaContextMenu.CommentUncommentSelection}&quot;
-				             class = &quot;MonoDevelop.DefaultEditor.Commands.CommentRegion&quot;/&gt; --&gt;
-&lt;!--				&lt;ToolbarItem id = &quot;Uncomment&quot;
-				             icon = &quot;Icons.16x16.UnCommentRegion&quot;
-				             tooltip = &quot;${res:XML.TextAreaContextMenu.UncommentSelection}&quot;
-				             class = &quot;MonoDevelop.DefaultEditor.Commands.UncommentRegion&quot;/&gt; --&gt;
-			
-&lt;!--				&lt;ToolbarItem id = &quot;SearchSeparator2&quot; tooltip = &quot;-&quot;/&gt; --&gt;
-				&lt;ToolbarItem id = &quot;ToggleBookmark&quot;
-				             icon = &quot;Icons.16x16.ToggleBookmark&quot;
-				             _tooltip = &quot;Toggle Bookmark&quot;
-				             class = &quot;MonoDevelop.EditorBindings.Commands.ToggleBookmark&quot;/&gt;
-				&lt;ToolbarItem id = &quot;PrevBookmark&quot;
-				             icon = &quot;Icons.16x16.GotoPrevbookmark&quot;
-				             _tooltip = &quot;Previous Bookmark&quot;
-				             class = &quot;MonoDevelop.EditorBindings.Commands.PrevBookmark&quot;/&gt;
-				&lt;ToolbarItem id = &quot;NextBookmark&quot;
-				             icon = &quot;Icons.16x16.GotoNextbookmark&quot;
-				             _tooltip = &quot;Next Bookmark&quot;
-				             class = &quot;MonoDevelop.EditorBindings.Commands.NextBookmark&quot;/&gt;
-				&lt;ToolbarItem id = &quot;ClearBookmarks&quot;
-				             icon = &quot;Icons.16x16.ClearAllBookmarks&quot;
-					     _tooltip = &quot;Clear Bookmarks&quot;
-				             class = &quot;MonoDevelop.EditorBindings.Commands.ClearBookmarks&quot;/&gt;
-			&lt;/Conditional&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.SearchCommands.Find&quot;  insertafter = &quot;CutSeparator&quot; insertbefore = &quot;CompileSeparator&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.SearchCommands.FindNext&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.Commands.SearchCommands.Replace&quot; /&gt;
+		&lt;SeparatorItem id = &quot;SearchSeparator&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.ToggleBookmark&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.PrevBookmark&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.NextBookmark&quot; /&gt;
+		&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.ClearBookmarks&quot; /&gt;
 	&lt;/Extension&gt;
 	
 	
 	&lt;Extension path = &quot;/SharpDevelop/Workbench/MainMenu&quot;&gt;
-	        &lt;MenuItem id = &quot;Search&quot; insertafter =&quot;View&quot; insertbefore =&quot;Tools&quot; _label = &quot;_Search&quot;&gt;
-	                &lt;Conditional action=&quot;Disable&quot;&gt;
-		                &lt;Or&gt;
-		                	&lt;Condition openwindow=&quot;MonoDevelop.DefaultEditor.Gui.Editor.ITextEditorControlProvider&quot;/&gt;
-		                	&lt;Condition openproject=&quot;*&quot;/&gt;
-		                &lt;/Or&gt;
-		                
-		                &lt;MenuItem id = &quot;Find&quot;
-		                          _label = &quot;_Find...&quot; 
-		                          icon = &quot;Icons.16x16.FindIcon&quot; 
-		                          description = &quot;${res:XML.MainMenu.SearchMenu.Find.Description}&quot; 
-		                          shortcut = &quot;Control|F&quot; 
-		                          class = &quot;MonoDevelop.DefaultEditor.Commands.Find&quot;/&gt;
-		                &lt;MenuItem id = &quot;FindNext&quot;
-		                          _label = &quot;Find _Next&quot; 
-		                          icon = &quot;Icons.16x16.FindNextIcon&quot; 
-		                          description = &quot;${res:XML.MainMenu.SearchMenu.FindNext.Description}&quot; 
-		                          shortcut = &quot;F3&quot;
-		                          class = &quot;MonoDevelop.DefaultEditor.Commands.FindNext&quot;/&gt;
-		                &lt;MenuItem id = &quot;Replace&quot;
-		                          _label = &quot;_Replace...&quot; 
-		                          icon = &quot;Icons.16x16.ReplaceIcon&quot; 
-		                          description = &quot;${res:XML.MainMenu.SearchMenu.Replace.Description}&quot; 
-		                          shortcut = &quot;Control|R&quot;
-		                          class = &quot;MonoDevelop.DefaultEditor.Commands.Replace&quot;/&gt;
-		        &lt;/Conditional&gt;
-		        
-		        &lt;MenuItem id = &quot;SearchSeparator&quot; _label = &quot;-&quot; /&gt;
-	                &lt;MenuItem id = &quot;FindInFiles&quot;
-	                          _label = &quot;F_ind In Files...&quot; 
-	                          icon = &quot;Icons.16x16.FindInFiles&quot; 
-	                          description = &quot;${res:XML.MainMenu.SearchMenu.FindInFiles.Description}&quot; 
-	                          class = &quot;MonoDevelop.DefaultEditor.Commands.FindInFiles&quot;/&gt;
-	                &lt;MenuItem id = &quot;ReplaceInFiles&quot;
-	                          _label = &quot;R_eplace In Files...&quot; 
-	                          icon = &quot;Icons.16x16.ReplaceInFiles&quot; 
-	                          description = &quot;${res:XML.MainMenu.SearchMenu.ReplaceInFiles.Description}&quot; 
-	                          class = &quot;MonoDevelop.DefaultEditor.Commands.ReplaceInFiles&quot;/&gt;
-	                
-	                &lt;MenuItem id = &quot;SearchInFilesSeparator&quot; _label = &quot;-&quot; /&gt;
-	                &lt;Conditional activewindow=&quot;MonoDevelop.DefaultEditor.Gui.Editor.ITextEditorControlProvider&quot; action=&quot;Disable&quot;&gt;
-			        
-		                &lt;MenuItem id = &quot;ToggleBookmark&quot;
-		                          _label = &quot;_Toggle Bookmark&quot; 
-		                          description = &quot;${res:XML.MainMenu.SearchMenu.ToggleBookmark.Description}&quot; 
-		                          shortcut = &quot;Control|F2&quot;
-		                          icon = &quot;Icons.16x16.ToggleBookmark&quot;
-		                          class = &quot;MonoDevelop.EditorBindings.Commands.ToggleBookmark&quot;/&gt;
-		                &lt;MenuItem id = &quot;PrevBookmark&quot;
-		                          _label = &quot;_Previous Bookmark&quot; 
-		                          description = &quot;${res:XML.MainMenu.SearchMenu.PrevBookmark.Description}&quot; 
-		                          shortcut = &quot;Alt|F2&quot;
-		                          icon = &quot;Icons.16x16.GotoPrevbookmark&quot;
-		                          class = &quot;MonoDevelop.EditorBindings.Commands.PrevBookmark&quot;/&gt;
-		                &lt;MenuItem id = &quot;NextBookmark&quot;
-		                          _label = &quot;_Next Bookmark&quot; 
-		                          description = &quot;${res:XML.MainMenu.SearchMenu.NextBookmark.Description}&quot; 
-		                          shortcut = &quot;F2&quot; 
-		                          icon = &quot;Icons.16x16.GotoNextbookmark&quot;
-		                          class = &quot;MonoDevelop.EditorBindings.Commands.NextBookmark&quot;/&gt;
-		                &lt;MenuItem id = &quot;ClearBookmarks&quot;
-		                          _label = &quot;_Clear Bookmarks&quot; 
-		                          description = &quot;${res:XML.MainMenu.SearchMenu.ClrBookmark.Description}&quot;
-		                          icon = &quot;Icons.16x16.ClearAllBookmarks&quot;
-		                          class = &quot;MonoDevelop.EditorBindings.Commands.ClearBookmarks&quot;/&gt;
-		                &lt;MenuItem id = &quot;Separator2&quot; _label = &quot;-&quot; /&gt;
-		                &lt;MenuItem id = &quot;GotoLineNr&quot;
-		                          _label = &quot;_Goto Line...&quot; 
-		                          description = &quot;${res:XML.MainMenu.SearchMenu.GotoLineNr.Description}&quot; 
-		                          shortcut = &quot;Control|G&quot;
-		                          class = &quot;MonoDevelop.DefaultEditor.Commands.GotoLineNumber&quot;/&gt;
-		                &lt;MenuItem id = &quot;Separator3&quot; _label = &quot;-&quot; /&gt;
-		                &lt;MenuItem id = &quot;GotoBrace&quot;
-		                          _label = &quot;Goto Matching _Brace&quot; 
-		                          description = &quot;${res:XML.MainMenu.SearchMenu.GotoBrace.Description}&quot; 
-		                          shortcut = &quot;Control|B&quot;
-		                          class = &quot;MonoDevelop.DefaultEditor.Commands.GotoMatchingBrace&quot;/&gt;
-		&lt;/Conditional&gt;
-		&lt;/MenuItem&gt;
+		&lt;ItemSet id = &quot;Search&quot; insertafter =&quot;View&quot; insertbefore =&quot;Tools&quot; _label = &quot;_Search&quot;&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.SearchCommands.Find&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.SearchCommands.FindNext&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.SearchCommands.Replace&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.SearchCommands.FindSelection&quot; /&gt;
+			
+			&lt;SeparatorItem id = &quot;SearchSeparator&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.SearchCommands.FindInFiles&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.Commands.SearchCommands.ReplaceInFiles&quot; /&gt;
+				
+			&lt;SeparatorItem id = &quot;SearchInFilesSeparator&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.ToggleBookmark&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.PrevBookmark&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.NextBookmark&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.ClearBookmarks&quot; /&gt;
+
+			&lt;SeparatorItem id = &quot;Separator2&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.GotoLineNumber&quot; /&gt;
+			&lt;SeparatorItem id = &quot;Separator3&quot; /&gt;
+			&lt;CommandItem id = &quot;MonoDevelop.DefaultEditor.EditorCommands.GotoMatchingBrace&quot; /&gt;
+		&lt;/ItemSet&gt;
 	&lt;/Extension&gt;
 	
 	&lt;!--
@@ -253,7 +187,7 @@
 			          _label = &quot;${res:XML.MainMenu.WindowMenu.Split}&quot;
 			          icon  = &quot;Icons.16x16.SplitWindow&quot;
 			          description = &quot;${res:XML.MainMenu.WindowMenu.Split.Description}&quot;
-			          class =&quot;MonoDevelop.DefaultEditor.Commands.SplitTextEditor&quot;/&gt;
+			          class =&quot;MonoDevelop.DefaultEditor.EditorCommands.SplitTextEditor&quot;/&gt;
 		&lt;/Conditional&gt; 
 	&lt;/Extension&gt;
 	--&gt;
@@ -266,52 +200,52 @@
                         &lt;MenuItem id = &quot;RemoveLeadingWs&quot; 
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.RlWs}&quot; 
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.RlWs.Description}&quot; 
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.RemoveLeadingWS&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.RemoveLeadingWS&quot;/&gt;
                         &lt;MenuItem id = &quot;RemoveTrailingWs&quot;
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.RtWs}&quot; 
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.RtWs.Description}&quot;
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.RemoveTrailingWS&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.RemoveTrailingWS&quot;/&gt;
                         &lt;MenuItem id = &quot;Seperator1&quot; _label = &quot;-&quot; /&gt;
                         &lt;MenuItem id = &quot;UpperCase&quot;  
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.UpperCase}&quot; 
                                   icon = &quot;Icons.16x16.LowerToUpperCase&quot; 
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.UpperCase.Description}&quot; 
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.ToUpperCase&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.ToUpperCase&quot;/&gt;
                         &lt;MenuItem id = &quot;LowerCase&quot; 
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.LowerCase}&quot; 
                                   icon = &quot;Icons.16x16.UpperToLowerCase&quot; 
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.LowerCase.Description}&quot;
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.ToLowerCase&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.ToLowerCase&quot;/&gt;
                         &lt;MenuItem id = &quot;Capitalize&quot;
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.Capitalize}&quot; 
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.Capitalize.Description}&quot; 
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.CapitalizeAction&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.CapitalizeAction&quot;/&gt;
                         &lt;MenuItem id = &quot;InvertCase&quot;
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.InvertCase}&quot; 
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.InvertCase.Description}&quot; 
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.InvertCaseAction&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.InvertCaseAction&quot;/&gt;
                         &lt;MenuItem id = &quot;Separator2&quot; _label = &quot;-&quot; /&gt;
                         &lt;MenuItem id = &quot;SortSelection&quot;
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.SortLines}&quot; 
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.SortLines.Description}&quot; 
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.SortSelection&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.SortSelection&quot;/&gt;
                         &lt;MenuItem id = &quot;Separator3&quot; _label = &quot;-&quot; /&gt;
                         &lt;MenuItem id = &quot;Tabs2Spaces&quot; 
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.Tab2Space}&quot; 
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.Tab2Space.Description}&quot; 
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.ConvertTabsToSpaces&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.ConvertTabsToSpaces&quot;/&gt;
                         &lt;MenuItem id = &quot;Spaces2Tabs&quot;
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.Space2Tab}&quot;
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.Space2Tab.Description}&quot;
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.ConvertSpacesToTabs&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.ConvertSpacesToTabs&quot;/&gt;
                         &lt;MenuItem id = &quot;LeadingTabs2Spaces&quot;
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.LdTab2Space}&quot;
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.LdTab2Space.Description}&quot; 
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.ConvertLeadingTabsToSpaces&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.ConvertLeadingTabsToSpaces&quot;/&gt;
                         &lt;MenuItem id = &quot;LeadingSpaces2Tabs&quot;
                                   _label = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.LdSpace2Tab}&quot;   
                                   description = &quot;${res:XML.MainMenu.EditMenu.FormatMenu.LdSpace2Tab.Description}&quot; 
-                                  class =&quot;MonoDevelop.DefaultEditor.Commands.ConvertLeadingSpacesToTabs&quot;/&gt;
+                                  class =&quot;MonoDevelop.DefaultEditor.EditorCommands.ConvertLeadingSpacesToTabs&quot;/&gt;
         		&lt;/Conditional&gt;
                 &lt;/MenuItem&gt;
                 &lt;MenuItem insertafter = &quot;Format&quot; insertbefore = &quot;Separator3&quot; id = &quot;Folding&quot; _label = &quot;${res:XML.MainMenu.EditMenu.FoldingMenu}&quot;&gt;
@@ -320,17 +254,17 @@
         	                          _label       = &quot;${res:XML.MainMenu.EditMenu.FoldingMenu.ToggleFolding}&quot;
                 	                  description = &quot;Toggles the current selected folding&quot;
 					  shortcut    = &quot;Shift|Control|M&quot;
-	                                  class       = &quot;MonoDevelop.DefaultEditor.Commands.ToggleFolding&quot;/&gt;
+	                                  class       = &quot;MonoDevelop.DefaultEditor.EditorCommands.ToggleFolding&quot;/&gt;
 	                        &lt;MenuItem id          = &quot;ToggleAllFoldings&quot;
         	                          _label       = &quot;${res:XML.MainMenu.EditMenu.FoldingMenu.ToggleAllFoldings}&quot;
 	         	                  description = &quot;Toggles all foldings&quot; 
        					  shortcut    = &quot;Shift|Control|L&quot;
-	                                  class       = &quot;MonoDevelop.DefaultEditor.Commands.ToggleAllFoldings&quot;/&gt;
+	                                  class       = &quot;MonoDevelop.DefaultEditor.EditorCommands.ToggleAllFoldings&quot;/&gt;
 	                        &lt;MenuItem id          = &quot;ShowDefinitionsOnly&quot;
         	                          _label       = &quot;${res:XML.MainMenu.EditMenu.FoldingMenu.ShowDefinitions}&quot;
                 	                  description = &quot;Shows only the definitions&quot; 
        					  shortcut    = &quot;Shift|Control|P&quot;
-	                                  class       = &quot;MonoDevelop.DefaultEditor.Commands.ShowDefinitionsOnly&quot;/&gt;
+	                                  class       = &quot;MonoDevelop.DefaultEditor.EditorCommands.ShowDefinitionsOnly&quot;/&gt;
         		&lt;/Conditional&gt;
                 &lt;/MenuItem&gt;
                 &lt;MenuItem insertafter = &quot;Separator2&quot; insertbefore = &quot;SelectAll&quot; id = &quot;Separator3&quot; _label = &quot;-&quot; /&gt;
@@ -378,19 +312,19 @@
 			          insertafter = &quot;Separator1&quot; insertbefore = &quot;Separator2&quot;
 			          _label = &quot;${res:XML.MainMenu.ToolMenu.InsColor}&quot; 
 			          description = &quot;${res:XML.MainMenu.ToolMenu.InsColor.Description}&quot; 
-			          class = &quot;MonoDevelop.DefaultEditor.Commands.ShowColorDialog&quot;/&gt;
+			          class = &quot;MonoDevelop.DefaultEditor.EditorCommands.ShowColorDialog&quot;/&gt;
 			&lt;MenuItem id = &quot;Separator2&quot; _label = &quot;-&quot; /&gt;
 
 			&lt;MenuItem id = &quot;GenerateCodeAction&quot;
 			          insertafter = &quot;Separator2&quot;
 			          _label = &quot;${res:XML.MainMenu.ToolMenu.GenerateCode}&quot; 
 			          description = &quot;${res:XML.MainMenu.ToolMenu.GenerateCode.Description}&quot; 
-			          class = &quot;MonoDevelop.DefaultEditor.Commands.GenerateCodeAction&quot;/&gt;
+			          class = &quot;MonoDevelop.DefaultEditor.EditorCommands.GenerateCodeAction&quot;/&gt;
 			&lt;MenuItem id = &quot;ShowQuickHelp&quot;
 			          _label = &quot;${res:XML.MainMenu.ToolMenu.QuickXmlDoc}&quot; 
 			          description = &quot;${res:XML.MainMenu.ToolMenu.QuickXmlDoc.Description}&quot; 
 			          shortcut = &quot;Control|Q&quot;
-			          class = &quot;MonoDevelop.DefaultEditor.Commands.QuickDocumentation&quot;/&gt; 
+			          class = &quot;MonoDevelop.DefaultEditor.EditorCommands.QuickDocumentation&quot;/&gt; 
 			&lt;MenuItem id = &quot;Separator3&quot; _label = &quot;-&quot; /&gt;
 		&lt;/Conditional&gt;
 	&lt;/Extension&gt;

Modified: trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Services/SourceViewService.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Services/SourceViewService.cs	2005-04-25 20:35:11 UTC (rev 2474)
+++ trunk/MonoDevelop/Core/src/AddIns/DisplayBindings/SourceEditor/Services/SourceViewService.cs	2005-04-25 20:35:47 UTC (rev 2475)
@@ -7,6 +7,7 @@
 
 using MonoDevelop.Core.Services;
 using MonoDevelop.Services;
+using MonoDevelop.DefaultEditor;
 
 namespace MonoDevelop.Services
 {
@@ -39,7 +40,7 @@
 		public override void InitializeService ()
 		{
 			base.InitializeService ();
-
+			
 			if (!File.Exists (file))
 				return;
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002075.html">[Monodevelop-patches-list] r2474 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Commands Gui Gui/Components Gui/Dialogs Gui/Pads/ClassPad Gui/Pads/ProjectPad Gui/Pads/SolutionPad Gui/Workbench Gui/Workbench/Layouts Internal/Codons Internal/Codons/Commands Internal/Codons/Pads Internal/Conditions Internal/Project/Combine Internal/Project/Project Services Services/File Services/Project
</A></li>
	<LI>Next message: <A HREF="002077.html">[Monodevelop-patches-list] r2476 - trunk/MonoDevelop/Core/src/AddIns/DebuggerAddIn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2076">[ date ]</a>
              <a href="thread.html#2076">[ thread ]</a>
              <a href="subject.html#2076">[ subject ]</a>
              <a href="author.html#2076">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
