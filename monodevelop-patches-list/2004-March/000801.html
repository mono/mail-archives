<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r1194 - in trunk/MonoDevelop: . src/Main/Base/Commands src/Main/Base/Gui src/Main/Base/Gui/CompletionDatabaseWizard src/Main/Base/Gui/Components src/Main/Base/Gui/Components/StatusBar src/Main/Base/Services/StatusBar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1194%20-%20in%20trunk/MonoDevelop%3A%20.%20src/Main/Base/Commands%20src/Main/Base/Gui%20src/Main/Base/Gui/CompletionDatabaseWizard%20src/Main/Base/Gui/Components%20src/Main/Base/Gui/Components/StatusBar%20src/Main/Base/Services/StatusBar&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000800.html">
   <LINK REL="Next"  HREF="000802.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r1194 - in trunk/MonoDevelop: . src/Main/Base/Commands src/Main/Base/Gui src/Main/Base/Gui/CompletionDatabaseWizard src/Main/Base/Gui/Components src/Main/Base/Gui/Components/StatusBar src/Main/Base/Services/StatusBar</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1194%20-%20in%20trunk/MonoDevelop%3A%20.%20src/Main/Base/Commands%20src/Main/Base/Gui%20src/Main/Base/Gui/CompletionDatabaseWizard%20src/Main/Base/Gui/Components%20src/Main/Base/Gui/Components/StatusBar%20src/Main/Base/Services/StatusBar&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r1194 - in trunk/MonoDevelop: . src/Main/Base/Commands src/Main/Base/Gui src/Main/Base/Gui/CompletionDatabaseWizard src/Main/Base/Gui/Components src/Main/Base/Gui/Components/StatusBar src/Main/Base/Services/StatusBar">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Fri Mar 19 19:04:08 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000800.html">[Monodevelop-patches-list] r1193 - in trunk/MonoDevelop: . src/Main/Base/Commands
</A></li>
        <LI>Next message: <A HREF="000802.html">[Monodevelop-patches-list] r1195 - in trunk/MonoDevelop: . src/Main/Base src/Main/Base/Gui src/Main/Base/Gui/Pads/ClassScout src/Main/Base/Gui/Pads/HelpBrowser src/Main/Base/Gui/Pads/ProjectBrowser src/Main/Base/Gui/Pads/ProjectBrowser/NodeBuilder src/Main/Base/Gui/Workbench src/Main/Base/Internal/Project/Project src/Main/Base/Services/Tasks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#801">[ date ]</a>
              <a href="thread.html#801">[ thread ]</a>
              <a href="subject.html#801">[ subject ]</a>
              <a href="author.html#801">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jluke
Date: 2004-03-19 19:04:08 -0500 (Fri, 19 Mar 2004)
New Revision: 1194

Modified:
   trunk/MonoDevelop/ChangeLog
   trunk/MonoDevelop/src/Main/Base/Commands/FileCommands.cs
   trunk/MonoDevelop/src/Main/Base/Gui/CompletionDatabaseWizard/GenerateDatabase.cs
   trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenuCheckBox.cs
   trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenuCommand.cs
   trunk/MonoDevelop/src/Main/Base/Gui/Components/StatusBar/SdStatusBar.cs
   trunk/MonoDevelop/src/Main/Base/Gui/IProgressMonitor.cs
   trunk/MonoDevelop/src/Main/Base/Services/StatusBar/DefaultStatusBarService.cs
   trunk/MonoDevelop/src/Main/Base/Services/StatusBar/IStatusBarService.cs
Log:
use double instead of int for progress and enable it


Modified: trunk/MonoDevelop/ChangeLog
===================================================================
--- trunk/MonoDevelop/ChangeLog	2004-03-19 16:53:39 UTC (rev 1193)
+++ trunk/MonoDevelop/ChangeLog	2004-03-20 00:04:08 UTC (rev 1194)
@@ -1,3 +1,14 @@
+2004-03-19  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jluke at cfl.rr.com</A>&gt;
+
+	* src/Main/Base/Gui/IProgressMonitor.cs:
+	* src/Main/Base/Gui/CompletionDatabaseWizard/GenerateDatabase.cs:
+	* src/Main/Base/Services/StatusBar/IStatusBarService.cs:
+	* src/Main/Base/Services/StatusBar/DefaultStatusBarService.cs:
+	* src/Main/Base/Commands/FileCommands.cs:
+	* src/Main/Base/Gui/Components/StatusBar/SdStatusBar.cs:
+	use double instead of casting to int everywhere
+	and implement ProgressBar
+
 2004-03-19  I&#241;igo Ill&#225;n &lt;kodeport AT terra.es&gt;
 	* src/Main/Base/Commands/FileCommands.cs:
 	ask if you want to really delete recent files/projects list.

Modified: trunk/MonoDevelop/src/Main/Base/Commands/FileCommands.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Commands/FileCommands.cs	2004-03-19 16:53:39 UTC (rev 1193)
+++ trunk/MonoDevelop/src/Main/Base/Commands/FileCommands.cs	2004-03-20 00:04:08 UTC (rev 1194)
@@ -281,10 +281,6 @@
 					for (int i = 0; !foundFilter &amp;&amp; i &lt; fileFilters.Length; ++i) {
 						for (int j = 0; !foundFilter &amp;&amp; j &lt; languageCodon.Supportedextensions.Length; ++j) {
 							if (fileFilters[i].IndexOf(languageCodon.Supportedextensions[j]) &gt;= 0) {
-#if !GTK
-								fdiag.FilterIndex = i + 1;
-								foundFilter       = true;
-#endif
 								break;
 							}
 						}
@@ -335,13 +331,9 @@
 	{
 		public override void Run()
 		{			
-			#if GTK
 			if (((DefaultWorkbench)WorkbenchSingleton.Workbench).Close()) {
 				Gtk.Application.Quit();
 			}
-			#else
-			((Form)WorkbenchSingleton.Workbench).Close();
-			#endif
 		}
 	}
 	

Modified: trunk/MonoDevelop/src/Main/Base/Gui/CompletionDatabaseWizard/GenerateDatabase.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/CompletionDatabaseWizard/GenerateDatabase.cs	2004-03-19 16:53:39 UTC (rev 1193)
+++ trunk/MonoDevelop/src/Main/Base/Gui/CompletionDatabaseWizard/GenerateDatabase.cs	2004-03-20 00:04:08 UTC (rev 1194)
@@ -15,10 +15,10 @@
 			this.DiscreteBlocks = (uint)totalWork;
 		}
 				
-		public void Worked(int work, string status)
+		public void Worked(double work, string status)
 		{
-			double f = (double)work / this.DiscreteBlocks;
-			Console.WriteLine(&quot;% is {0}&quot;, f);
+			double f = work / this.DiscreteBlocks;
+			//Console.WriteLine(&quot;% is {0}&quot;, f);
 			this.Fraction = f;
 		}
 		public void Done()

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenuCheckBox.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenuCheckBox.cs	2004-03-19 16:53:39 UTC (rev 1193)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenuCheckBox.cs	2004-03-20 00:04:08 UTC (rev 1194)
@@ -66,9 +66,6 @@
 		
 		protected void OnClick(object o, EventArgs e)
 		{
-#if !GTK
-			base.OnClick(e);
-#endif
 			if (menuCommand != null) {
 				menuCommand.IsChecked = Active;
 			}
@@ -81,11 +78,7 @@
 				this.Sensitive = failedAction != ConditionFailedAction.Disable;
 				this.Visible = failedAction != ConditionFailedAction.Exclude;
 			}
-#if GTK
-			// FIXME: GTKize
-#else
-			Text = stringParserService.Parse(localizedText);
-#endif
+
 			if (menuCommand != null) {
 				Active = menuCommand.IsChecked;
 			}

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenuCommand.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenuCommand.cs	2004-03-19 16:53:39 UTC (rev 1193)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenuCommand.cs	2004-03-20 00:04:08 UTC (rev 1194)
@@ -130,9 +130,6 @@
 		
 		protected void OnClick(object o, EventArgs e)
 		{
-#if !GTK
-			base.OnClick(e);
-#endif
 			if (menuCommand != null) {
 				menuCommand.Run();
 			}
@@ -149,11 +146,6 @@
 				Sensitive = ((IMenuCommand)menuCommand).IsEnabled;
 				ShowAll ();
 			}
-#if GTK
-			// FIXME: GTKize
-#else
-			Text = stringParserService.Parse(localizedText);
-#endif
 		}
 	}
 }

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Components/StatusBar/SdStatusBar.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Components/StatusBar/SdStatusBar.cs	2004-03-19 16:53:39 UTC (rev 1193)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Components/StatusBar/SdStatusBar.cs	2004-03-20 00:04:08 UTC (rev 1194)
@@ -54,8 +54,7 @@
 			}
 		}
 		
-		// FIXME: actually use a Progressbar
-		public SdStatusBar(IStatusBarService manager) : base (false, true, PreferencesType.Never)
+		public SdStatusBar(IStatusBarService manager) : base (true, true, PreferencesType.Never)
 		{
 			txtStatusBarPanel.HasResizeGrip = false;
 			this.PackStart (txtStatusBarPanel);
@@ -103,9 +102,9 @@
 			this.Progress.Visible = true;
 		}
 		
-		public void Worked (int work, string status)
+		public void Worked (double work, string status)
 		{
-			this.Progress.Fraction = (double) work;
+			this.Progress.Fraction = work;
 			this.Progress.Text = status;
 		}
 		

Modified: trunk/MonoDevelop/src/Main/Base/Gui/IProgressMonitor.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/IProgressMonitor.cs	2004-03-19 16:53:39 UTC (rev 1193)
+++ trunk/MonoDevelop/src/Main/Base/Gui/IProgressMonitor.cs	2004-03-20 00:04:08 UTC (rev 1194)
@@ -13,9 +13,9 @@
 	/// &lt;/summary&gt;
 	public interface IProgressMonitor 
 	{
-		void BeginTask(string name, int totalWork);
+		void BeginTask (string name, int totalWork);
 		
-		void Worked(int work, string status);
+		void Worked (double work, string status);
 		
 		void Done();
 		

Modified: trunk/MonoDevelop/src/Main/Base/Services/StatusBar/DefaultStatusBarService.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Services/StatusBar/DefaultStatusBarService.cs	2004-03-19 16:53:39 UTC (rev 1193)
+++ trunk/MonoDevelop/src/Main/Base/Services/StatusBar/DefaultStatusBarService.cs	2004-03-20 00:04:08 UTC (rev 1194)
@@ -58,7 +58,7 @@
 		
 		public void SetCaretPosition (int ln, int col, int ch)
 		{
-			statusBar.SetCursorPosition (ln, col, ch);                                                                  
+			statusBar.SetCursorPosition (ln, col, ch);
 		}
 		
 		public void SetInsertMode (bool insertMode)
@@ -83,6 +83,7 @@
 		public void SetMessage(Gtk.Image image, string message)
 		{
 			Debug.Assert(statusBar != null);
+			lastMessage = message;
 			statusBar.SetMessage(image, stringParserService.Parse(message));
 		}
 		

Modified: trunk/MonoDevelop/src/Main/Base/Services/StatusBar/IStatusBarService.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Services/StatusBar/IStatusBarService.cs	2004-03-19 16:53:39 UTC (rev 1193)
+++ trunk/MonoDevelop/src/Main/Base/Services/StatusBar/IStatusBarService.cs	2004-03-20 00:04:08 UTC (rev 1194)
@@ -27,8 +27,8 @@
 		
 		void ShowErrorMessage(string message);
 		
-		void SetMessage(string message);					
-		//void SetMessage(Image image, string message);
+		void SetMessage (string message);					
+		void SetMessage (Gtk.Image image, string message);
 		
 		void SetCaretPosition (int ln, int col, int ch);
 		void SetInsertMode (bool insertMode);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000800.html">[Monodevelop-patches-list] r1193 - in trunk/MonoDevelop: . src/Main/Base/Commands
</A></li>
	<LI>Next message: <A HREF="000802.html">[Monodevelop-patches-list] r1195 - in trunk/MonoDevelop: . src/Main/Base src/Main/Base/Gui src/Main/Base/Gui/Pads/ClassScout src/Main/Base/Gui/Pads/HelpBrowser src/Main/Base/Gui/Pads/ProjectBrowser src/Main/Base/Gui/Pads/ProjectBrowser/NodeBuilder src/Main/Base/Gui/Workbench src/Main/Base/Internal/Project/Project src/Main/Base/Services/Tasks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#801">[ date ]</a>
              <a href="thread.html#801">[ thread ]</a>
              <a href="subject.html#801">[ subject ]</a>
              <a href="author.html#801">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
