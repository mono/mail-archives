<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r1074 - in branches/MonoDevelop-playground: . libmonodevelop src src/AddIns/DisplayBindings/SourceEditor src/Plugins/Content src/Plugins/Node src/Util
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1074%20-%20in%20branches/MonoDevelop-playground%3A%20.%20libmonodevelop%20src%20src/AddIns/DisplayBindings/SourceEditor%20src/Plugins/Content%20src/Plugins/Node%20src/Util&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000678.html">
   <LINK REL="Next"  HREF="000680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r1074 - in branches/MonoDevelop-playground: . libmonodevelop src src/AddIns/DisplayBindings/SourceEditor src/Plugins/Content src/Plugins/Node src/Util</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1074%20-%20in%20branches/MonoDevelop-playground%3A%20.%20libmonodevelop%20src%20src/AddIns/DisplayBindings/SourceEditor%20src/Plugins/Content%20src/Plugins/Node%20src/Util&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r1074 - in branches/MonoDevelop-playground: . libmonodevelop src src/AddIns/DisplayBindings/SourceEditor src/Plugins/Content src/Plugins/Node src/Util">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Mon Mar  1 16:42:30 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000678.html">[Monodevelop-patches-list] r1073 - trunk/MonoDevelop/gdldock/sources/gdl
</A></li>
        <LI>Next message: <A HREF="000680.html">[Monodevelop-patches-list] r1075 - trunk/MonoDevelop/src/Main/Base/Services/File
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#679">[ date ]</a>
              <a href="thread.html#679">[ thread ]</a>
              <a href="subject.html#679">[ subject ]</a>
              <a href="author.html#679">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jzwart
Date: 2004-03-01 16:42:30 -0500 (Mon, 01 Mar 2004)
New Revision: 1074

Added:
   branches/MonoDevelop-playground/libmonodevelop/vfs-utils.c
   branches/MonoDevelop-playground/libmonodevelop/vfs-utils.h
   branches/MonoDevelop-playground/src/Util/
   branches/MonoDevelop-playground/src/Util/Makefile.am
   branches/MonoDevelop-playground/src/Util/Mime.cs
Modified:
   branches/MonoDevelop-playground/configure.in
   branches/MonoDevelop-playground/libmonodevelop/
   branches/MonoDevelop-playground/libmonodevelop/Makefile.am
   branches/MonoDevelop-playground/src/AddIns/DisplayBindings/SourceEditor/Makefile.am
   branches/MonoDevelop-playground/src/Makefile.am
   branches/MonoDevelop-playground/src/Plugins/Content/ContentManager.cs
   branches/MonoDevelop-playground/src/Plugins/Content/Makefile.am
   branches/MonoDevelop-playground/src/Plugins/Node/FileNode.cs
Log:
Cleaned up configure.in and related Makefile.am files. libmonodevelop now
installs in $prefix/lib like any other library. Added gnome-vfs methods and new
MonoDevelop.Util namespace for generic utility stuff. Continuing Node stuff.


Modified: branches/MonoDevelop-playground/configure.in
===================================================================
--- branches/MonoDevelop-playground/configure.in	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/configure.in	2004-03-01 21:42:30 UTC (rev 1074)
@@ -4,64 +4,50 @@
 AM_MAINTAINER_MODE
 AM_PROG_LIBTOOL
 
-AC_PATH_PROG(MONO, mono)
-AC_PATH_PROG(MCS, mcs)
-if test &quot;x$MONO&quot; = &quot;x&quot; ; then
-  AC_MSG_ERROR([Can't find &quot;mono&quot; in your PATH])
-fi
-if test &quot;x$MCS&quot; = &quot;x&quot; ; then
-  AC_MSG_ERROR([Can't find &quot;mcs&quot; in your PATH])
-fi
-AC_SUBST(PATH)
-AC_SUBST(LD_LIBRARY_PATH)
+MONO_REQUIRED=0.30
+GTK_REQUIRED=2.3.4
+GTKSHARP_REQUIRED=0.17
+GTKSOURCEVIEW_REQUIRED=0.7
+GTKSOURCEVIEWSHARP_REQUIRED=0.1
+MOZGTK_REQUIRED=1.2
+GNOMEVFS_REQUIRED=2.0
 
-dnl Find pkg-config
-AC_PATH_PROG(PKG_CONFIG, pkg-config, no)
-if test &quot;x$PKG_CONFIG&quot; = &quot;xno&quot;; then
-        AC_MSG_ERROR([You need to install pkg-config])
-fi
+PKG_CHECK_MODULES(CSHARP,
+		  gtk-sharp &gt;= $GTKSHARP_REQUIRED \
+		  gtksourceview-sharp &gt;= $GTKSOURCEVIEWSHARP_REQUIRED)
+AC_SUBST(CSHARP_LIBS)
 
-dnl Find mono
-MONO_REQUIRED_VERSION=0.30
+PKG_CHECK_MODULES(MONODEVELOP,
+		  mono &gt;= $MONO_REQUIRED \
+		  gtksourceview-1.0 &gt;= $GTKSOURCEVIEW_REQUIRED \
+		  mozilla-gtkmozembed &gt;= $MOZGTK_REQUIRED)
 
-PKG_CHECK_MODULES(BASE_DEPENDENCIES, mono &gt;= $MONO_REQUIRED_VERSION, enable_mono=yes, enable_mono=no)
+PKG_CHECK_MODULES(LIBMONODEVELOP,
+		  gnome-vfs-2.0 &gt;= $GNOMEVFS_REQUIRED \
+		  gtk+-2.0 &gt;= $GTK_REQUIRED)
+AC_SUBST(LIBMONODEVELOP_CFLAGS)
+AC_SUBST(LIBMONODEVELOP_LIBS)
 
-dnl Find gtk-sharp
-GTKSHARP_REQUIRED_VERSION=0.17
+dnl Check for Mono
+AC_PATH_PROG(MCS, mcs)
+AC_PATH_PROG(MONO, mono)
 
-PKG_CHECK_MODULES(BASE_DEPENDENCIES, gtk-sharp &gt;= $GTKSHARP_REQUIRED_VERSION, enable_gtksharp=yes, enable_gtksharp=no) 
+MCS_FLAGS=
+MONO_FLAGS=
+if test $USE_MAINTAINER_MODE = yes; then
+	MCS_FLAGS=&quot;-g&quot;
+	MONO_FLAGS=&quot;--debug&quot;
+fi
+AC_SUBST(MCS_FLAGS)
+AC_SUBST(MONO_FLAGS)
+
 gtksharp_prefix=`pkg-config --variable=prefix gtk-sharp`
 AC_SUBST(gtksharp_prefix)
 
-GTKSOURCEVIEW_REQUIRED_VERSION=0.7
-
-PKG_CHECK_MODULES(BASE_DEPENDENCIES, gtksourceview-1.0 &gt;= $GTKSOURCEVIEW_REQUIRED_VERSION, enable_gtksourceview=yes, enable_gtksourceview=no)
-
-GTKSOURCEVIEWSHARP_REQUIRED_VERSION=0.1
-PKG_CHECK_MODULES(BASE_DEPENDENCIES, gtksourceview-sharp &gt;= $GTKSOURCEVIEWSHARP_REQUIRED_VERSION, enable_gtksourceviewsharp=yes, enable_gtksourceviewsharp=no)
-GTKSOURCEVIEW_SHARP=&quot;`pkg-config --libs gtksourceview-sharp`&quot;
-echo This is it: _ ${GTKSOURCEVIEW_SHARP} _
-AC_SUBST(GTKSOURCEVIEW_SHARP)
-
-dnl find gnome-vfs
-GNOMEVFS_REQUIRED_VERSION=2.0
-PKG_CHECK_MODULES(BASE_DEPENDENCIES, gnome-vfs-2.0 &gt;= $GNOMEVFS_REQUIRED_VERSION, enable_gnomevfs=yes, enable_gnomevfs=no)
-
-dnl should this be a hard dep?
-dnl ORBIT2_REQUIRED_VERSION=2.8.3
-
-dnl PKG_CHECK_MODULES(BASE_DEPENDENCIES, ORBit-2.0 &gt;= $ORBIT2_REQUIRED_VERSION)
-
-dnl find mozilla-gtkmozembed
-MOZGTK_REQUIRED_VERSION=1.2
-PKG_CHECK_MODULES(BASE_DEPENDENCIES, mozilla-gtkmozembed &gt;= $MOZGTK_REQUIRED_VERSION, enable_gtkmoz=yes, enable_gtkmoz=no)
-
+dnl Get mozilla home
 MOZILLA_HOME=&quot;`$PKG_CONFIG --variable=libdir mozilla-gtkmozembed`&quot;
 AC_SUBST(MOZILLA_HOME)
 
-gnome_prefix=&quot;`$PKG_CONFIG --variable=prefix libgnome-2.0`&quot;
-AC_SUBST(gnome_prefix)
-
 dnl Set PREFIX
 if test &quot;x${prefix}&quot; = &quot;xNONE&quot;; then
   packageprefix=${ac_default_prefix}
@@ -95,6 +81,7 @@
 data/resources/Makefile
 data/resources/glade/Makefile
 src/Makefile
+src/Util/Makefile
 src/StartUp/Makefile
 src/Plugins/Makefile
 src/Plugins/Node/Makefile
@@ -104,24 +91,3 @@
 src/Plugins/Content/Makefile
 monodevelop
 ])
-
-echo &quot;---&quot;
-echo &quot;Configuration summary&quot;
-echo &quot;&quot;
-echo &quot;   * Installation prefix = $prefix&quot;
-echo &quot;   * GNOME prefix = $gnome_prefix&quot;
-echo &quot;&quot;
-echo &quot;   * gnomevfs $GNOMEVFS_REQUIRED_VERSION: $enable_gnomevfs&quot;
-echo &quot;   * gtk-sharp $GTKSHARP_REQUIRED_VERSION: $enable_gtksharp&quot;
-echo &quot;   * gtkmozembed $MOZGTK_REQUIRED_VERSION: $enable_gtkmoz&quot;
-echo &quot;   * gtksourceview $GTKSOURCEVIEW_REQUIRED_VERSION: $enable_gtksourceview&quot;
-echo &quot;   * gtksourceview-sharp $GTKSOURCEVIEWSHARP_REQUIRED_VERSION: $enable_gtksourceviewsharp&quot;
-echo &quot;   * mono $MONO_REQUIRED_VERSION: $enable_mono&quot;
-echo &quot;&quot;
-echo &quot;   NOTE: if any of the above say 'no' you may install the&quot;
-echo &quot;         corresponding development packages for them, and&quot;
-echo &quot;         rerun autogen.sh. If you are sure the proper&quot;
-echo &quot;         libraries are installed, use PKG_CONFIG_PATH to&quot;
-echo &quot;         point to their .pc files&quot;
-echo &quot;&quot;
-echo &quot;---&quot;


Property changes on: branches/MonoDevelop-playground/libmonodevelop
___________________________________________________________________
Name: svn:ignore
   - libmonodevelop.so
*.o
Makefile
Makefile.in

   + libmonodevelop.so
*.o
Makefile
Makefile.in
.libs
.deps


Modified: branches/MonoDevelop-playground/libmonodevelop/Makefile.am
===================================================================
--- branches/MonoDevelop-playground/libmonodevelop/Makefile.am	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/libmonodevelop/Makefile.am	2004-03-01 21:42:30 UTC (rev 1074)
@@ -1,43 +1,16 @@
-srcdir = .
+INCLUDES = 							\
+        -DG_LOG_DOMAIN=\&quot;libmonodevelop\&quot;			\
+	-DG_DISABLE_DEPRECATED -DGTK_DISABLE_DEPRECATED		\
+	-DGDK_DISABLE_DEPRECATED -DGNOME_DISABLE_DEPRECATED	\
+	-DGNOMELOCALEDIR=\&quot;&quot;$(datadir)/locale&quot;\&quot;		\
+	$(LIBMONODEVELOP_CFLAGS)
 
-CFLAGS = -g -Wall -O2
-LDFLAGS = -g -shared
-
-MDL_REQUIREMENTS = gtk+-2.0
-MDL_DEPENDENCIES_CFLAGS = $(shell pkg-config --cflags $(MDL_REQUIREMENTS))
-MDL_DEPENDENCIES_LIBS = $(shell pkg-config --libs $(MDL_REQUIREMENTS))
-
-INCLUDES = \
-	-DG_LOG_DOMAIN=\&quot;LibMonoDevelop\&quot; -I..	-I. \
-	$(MDL_DEPENDENCIES_CFLAGS)
-
-libmonodevelop_headers =
-
-libmonodevelop_SOURCE = \
-	$(libmonodevelop_headers) \
-	lmd-key-propagate.c
-
-libmonodevelop_OBJECTS = $(filter-out %.h,$(patsubst %.c,%.o,$(libmonodevelop_SOURCE)))
-
-all: libmonodevelop.so
-
-$(libmonodevelop_OBJECTS): $(libmonodevelop_headers)
-
-libmonodevelop.so: $(libmonodevelop_OBJECTS)
-	$(CC) $(LDFLAGS) -shared -fPIC -o libmonodevelop.so $+ &amp;&amp; \
-	cp libmonodevelop.so ../build/bin/.
-
-%.o: %.c
-	$(CC) $(CFLAGS) $(INCLUDES) -c $&lt;
-	
 monodeveloplibdir = $(prefix)/lib
-monodeveloplib_DATA = libmonodevelop.so
+monodeveloplib_LTLIBRARIES = libmonodevelop.la
 
-clean:
-	rm -f libmonodevelop.so $(libmonodevelop_OBJECTS)
+libmonodevelop_la_SOURCES = \
+	lmd-key-propagate.c \
+	vfs-utils.h \
+	vfs-utils.c
 
-CLEANFILES= ../build/bin/libmonodevelop.so libmonodevelop.so
-
-.PHONY: clean
-
-EXTRA_DIST = $(libmonodevelop_SOURCE) $(libmonodevelop_headers)
+libmonodevelop_la_LIBADD = $(LIBMONODEVELOP_LIBS)

Added: branches/MonoDevelop-playground/libmonodevelop/vfs-utils.c
===================================================================
--- branches/MonoDevelop-playground/libmonodevelop/vfs-utils.c	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/libmonodevelop/vfs-utils.c	2004-03-01 21:42:30 UTC (rev 1074)
@@ -0,0 +1,40 @@
+/*
+ * Copyright (C) 2004 Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License as
+ * published by the Free Software Foundation; either version 2 of the
+ * License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public
+ * License along with this program; if not, write to the
+ * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+ * Boston, MA 02111-1307, USA.
+ */
+
+#include &quot;vfs-utils.h&quot;
+#include &lt;libgnomevfs/gnome-vfs-mime-handlers.h&gt;
+#include &lt;libgnomevfs/gnome-vfs-mime-utils.h&gt;
+
+const char *
+vfs_get_file_mime_type (const char *uri)
+{
+	return gnome_vfs_get_mime_type (uri);
+}
+
+const char *
+vfs_mime_get_icon (const char *mime_type)
+{
+	return gnome_vfs_mime_get_icon (mime_type);
+}
+
+const char *
+vfs_mime_get_description (const char *mime_type)
+{
+	return gnome_vfs_mime_get_description (mime_type);
+}

Added: branches/MonoDevelop-playground/libmonodevelop/vfs-utils.h
===================================================================
--- branches/MonoDevelop-playground/libmonodevelop/vfs-utils.h	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/libmonodevelop/vfs-utils.h	2004-03-01 21:42:30 UTC (rev 1074)
@@ -0,0 +1,27 @@
+/*
+ * Copyright (C) 2004 Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License as
+ * published by the Free Software Foundation; either version 2 of the
+ * License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public
+ * License along with this program; if not, write to the
+ * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+ * Boston, MA 02111-1307, USA.
+ */
+
+#ifndef __VFS_UTILS_H__
+#define __VFS_UTILS_H__
+
+const char *vfs_get_file_mime_type   (const char *uri);
+const char *vfs_mime_get_icon        (const char *mime_type);
+const char *vfs_mime_get_description (const char *mime_type);
+
+#endif /* __VFS_UTILS_H__ */

Modified: branches/MonoDevelop-playground/src/AddIns/DisplayBindings/SourceEditor/Makefile.am
===================================================================
--- branches/MonoDevelop-playground/src/AddIns/DisplayBindings/SourceEditor/Makefile.am	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/src/AddIns/DisplayBindings/SourceEditor/Makefile.am	2004-03-01 21:42:30 UTC (rev 1074)
@@ -74,7 +74,7 @@
 	mcs $(FILES) /debug /out:$(DLL) /t:library \
 	/resource:../../../../data/resources/glade/EditorBindings.glade,EditorBindings.glade \
 	/resource:../../../../data/resources/glade/texteditoraddin.glade,texteditoraddin.glade \
-	 /r:gtk-sharp /r:gdk-sharp $(GTKSOURCEVIEW_SHARP) /r:glib-sharp \
+	 /r:gtk-sharp /r:gdk-sharp $(CSHARP_LIBS) /r:glib-sharp \
 		/r:../../../../build/bin/MonoDevelop.Core.dll \
 		/r:../../../../build/bin/MonoDevelop.Base.dll \
 		/r:../../../../build/bin/MonoDevelop.Gui.Utils.dll \

Modified: branches/MonoDevelop-playground/src/Makefile.am
===================================================================
--- branches/MonoDevelop-playground/src/Makefile.am	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/src/Makefile.am	2004-03-01 21:42:30 UTC (rev 1074)
@@ -1 +1 @@
-SUBDIRS=StartUp Plugins
+SUBDIRS=Util StartUp Plugins

Modified: branches/MonoDevelop-playground/src/Plugins/Content/ContentManager.cs
===================================================================
--- branches/MonoDevelop-playground/src/Plugins/Content/ContentManager.cs	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/src/Plugins/Content/ContentManager.cs	2004-03-01 21:42:30 UTC (rev 1074)
@@ -15,6 +15,7 @@
 using Gtk;
 using log4net;
 using MonoDevelop.Node;
+using MonoDevelop.Util;
 using MonoDevelop.Workbench;
 
 namespace MonoDevelop.Content {
@@ -34,7 +35,7 @@
 			
 			action = new Action (&quot;FileOpenAction&quot;, &quot;_Open...&quot;,
 					     &quot;Open a file&quot;, Gtk.Stock.Open);
-			action.Activated += new EventHandler (OnOpen);
+			action.Activated += new EventHandler (OnFileOpen);
 			group.Add (action);
 		
 			Workbench.Workbench.AddActionGroup (group);
@@ -45,7 +46,7 @@
 		// Event handlers
 		////////////////////////////////////////////////////////////////////////
 
-		private void OnOpen (object obj, EventArgs args)
+		private void OnFileOpen (object obj, EventArgs args)
 		{
 			FileChooserDialog fcd = new FileChooserDialog (&quot;Open File&quot;,
 								       (Window)Workbench.Workbench.ActiveWorkbench,
@@ -59,6 +60,9 @@
 			if (resp != (int)ResponseType.Ok)
 				return;
 
+			string mimetype = Mime.GetMimeType (fcd.Filename);
+			Console.WriteLine (&quot;mimetype for {0} is {1}&quot;, fcd.Filename, mimetype);
+
 			Type type = FileNode.FindFileNodeType (fcd.Filename, true);
 		}
 	

Modified: branches/MonoDevelop-playground/src/Plugins/Content/Makefile.am
===================================================================
--- branches/MonoDevelop-playground/src/Plugins/Content/Makefile.am	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/src/Plugins/Content/Makefile.am	2004-03-01 21:42:30 UTC (rev 1074)
@@ -18,6 +18,7 @@
 
 content_assemblies = \
 	-r:../../StartUp/monodevelop.exe \
+	-r:../../Util/util.dll \
 	-r:../Node/node.dll \
 	-r:../Services/services.dll \
 	-r:../Workbench/workbench.dll \

Modified: branches/MonoDevelop-playground/src/Plugins/Node/FileNode.cs
===================================================================
--- branches/MonoDevelop-playground/src/Plugins/Node/FileNode.cs	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/src/Plugins/Node/FileNode.cs	2004-03-01 21:42:30 UTC (rev 1074)
@@ -181,6 +181,62 @@
 							 Type type,
 							 Pixbuf icon)
 		{
+			ArrayList types;
+
+			if (fileNodeTypes.Contains (extension)) {
+				types = fileNodeTypes[extension] as ArrayList;
+				types.Add (new FileNodeEntry (extension,
+							      description,
+							      type, icon));			
+				fileNodeTypes[extension] = types;
+			} else {
+				types = new ArrayList ();
+				types.Add (new FileNodeEntry (extension,
+							      description,
+							      type, icon));			
+				fileNodeTypes.Add (extension, types);
+			}
+
 		}
 	}
+	
+	class FileNodeEntry {
+		private string extension;
+		private string description;
+		private Type type;
+		private Pixbuf icon;
+		
+		public string Extension {
+			get {
+				return extension;
+			}
+		}
+		
+		public string Description {
+			get {
+				return description;
+			}
+		}
+		
+		public Type Type {
+			get {
+				return type;
+			}
+		}
+		
+		public Pixbuf Icon {
+			get {
+				return icon;
+			}
+		}
+	
+		public FileNodeEntry (string extension, string description,
+				      Type type, Pixbuf icon)
+		{
+			this.extension = extension;
+			this.description = description;
+			this.type = type;
+			this.icon = icon;
+		}
+	}
 }


Property changes on: branches/MonoDevelop-playground/src/Util
___________________________________________________________________
Name: svn:ignore
   + Makefile
Makefile.in
util.dll


Added: branches/MonoDevelop-playground/src/Util/Makefile.am
===================================================================
--- branches/MonoDevelop-playground/src/Util/Makefile.am	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/src/Util/Makefile.am	2004-03-01 21:42:30 UTC (rev 1074)
@@ -0,0 +1,17 @@
+utildir = $(libdir)/monodevelop
+utilassembly = $(utildir)/util.dll
+util_DATA = util.dll
+CLEANFILES = util.dll
+CSC = mcs
+
+util_sources = \
+	Mime.cs
+
+util_assemblies = \
+	-r:System.dll
+
+util.dll: $(util_sources)
+	$(CSC) -debug -t:library -out:util.dll $(util_sources) $(util_assemblies)
+
+EXTRA_DIST = \
+	$(util_sources)

Added: branches/MonoDevelop-playground/src/Util/Mime.cs
===================================================================
--- branches/MonoDevelop-playground/src/Util/Mime.cs	2004-03-01 21:40:50 UTC (rev 1073)
+++ branches/MonoDevelop-playground/src/Util/Mime.cs	2004-03-01 21:42:30 UTC (rev 1074)
@@ -0,0 +1,39 @@
+//
+// Mime.cs: Utility class for dealing with mime-types.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+using System.Runtime.InteropServices;
+
+namespace MonoDevelop.Util {
+	public class Mime {
+		[DllImport (&quot;libmonodevelop&quot;)]
+		private static extern string vfs_get_file_mime_type (string uri);
+		
+		public static string GetMimeType (string uri)
+		{
+			return vfs_get_file_mime_type (uri);
+		}
+
+		[DllImport (&quot;libmonodevelop&quot;)]
+		private static extern string vfs_mime_get_icon (string mime_type);
+		
+		public static string GetIcon (string mime_type)
+		{
+			return vfs_mime_get_icon (mime_type);
+		}
+
+		[DllImport (&quot;libmonodevelop&quot;)]
+		private static extern string vfs_mime_get_description (string mime_type);
+		
+		public static string GetDescription (string mime_type)
+		{
+			return vfs_mime_get_description (mime_type);
+		}
+	}
+}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000678.html">[Monodevelop-patches-list] r1073 - trunk/MonoDevelop/gdldock/sources/gdl
</A></li>
	<LI>Next message: <A HREF="000680.html">[Monodevelop-patches-list] r1075 - trunk/MonoDevelop/src/Main/Base/Services/File
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#679">[ date ]</a>
              <a href="thread.html#679">[ thread ]</a>
              <a href="subject.html#679">[ subject ]</a>
              <a href="author.html#679">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
