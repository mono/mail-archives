<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r1898 - in trunk/MonoDevelop/Core: . src/AddIns/BackendBindings/CSharpBinding src/AddIns/BackendBindings/NemerleBinding src/Libraries/SharpRefactory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1898%20-%20in%20trunk/MonoDevelop/Core%3A%20.%20src/AddIns/BackendBindings/CSharpBinding%20src/AddIns/BackendBindings/NemerleBinding%20src/Libraries/SharpRefactory&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001504.html">
   <LINK REL="Next"  HREF="001506.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r1898 - in trunk/MonoDevelop/Core: . src/AddIns/BackendBindings/CSharpBinding src/AddIns/BackendBindings/NemerleBinding src/Libraries/SharpRefactory</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1898%20-%20in%20trunk/MonoDevelop/Core%3A%20.%20src/AddIns/BackendBindings/CSharpBinding%20src/AddIns/BackendBindings/NemerleBinding%20src/Libraries/SharpRefactory&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r1898 - in trunk/MonoDevelop/Core: . src/AddIns/BackendBindings/CSharpBinding src/AddIns/BackendBindings/NemerleBinding src/Libraries/SharpRefactory">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Mon Jul  5 15:19:49 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001504.html">[Monodevelop-patches-list] r1897 - in trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding: . FormatingStrategy Gui Project ProjectTreeBuilder
</A></li>
        <LI>Next message: <A HREF="001506.html">[Monodevelop-patches-list] r1899 - in trunk/MonoDevelop/Core/src/Main/Base: . Gui/Pads/HelpBrowser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1505">[ date ]</a>
              <a href="thread.html#1505">[ thread ]</a>
              <a href="subject.html#1505">[ subject ]</a>
              <a href="author.html#1505">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-07-05 15:19:48 -0400 (Mon, 05 Jul 2004)
New Revision: 1898

Added:
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpBindingExecutionManager.cs.in
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs.in
Removed:
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpBindingExecutionManager.cs
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs
Modified:
   trunk/MonoDevelop/Core/ChangeLog
   trunk/MonoDevelop/Core/Makefile.am
   trunk/MonoDevelop/Core/configure.in
   trunk/MonoDevelop/Core/monodevelop.in
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/Makefile.am
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/ChangeLog
   trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/Makefile.am
   trunk/MonoDevelop/Core/src/Libraries/SharpRefactory/Makefile.am
Log:
Patch from Marcin Krzyzanowski &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">krzak at pld-linux.org</A>&gt; to fix various mint vs mono issues.


Modified: trunk/MonoDevelop/Core/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/ChangeLog	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/ChangeLog	2004-07-05 19:19:48 UTC (rev 1898)
@@ -1,5 +1,12 @@
 2004-07-05  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
 
+	* configure.in:
+	* Makefile.am:
+	* monodevelop.in: Patch from Marcin Krzyzanowski &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">krzak at pld-linux.org</A>&gt;
+	to fix mint issues.
+
+2004-07-05  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
+
 	* Makefile.ams: remove libdir == $(prefix)/lib assumption. Patch from
 	Marcin Krzyzanowski &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">krzak at pld-linux.org</A>&gt;
 

Modified: trunk/MonoDevelop/Core/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/Makefile.am	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/Makefile.am	2004-07-05 19:19:48 UTC (rev 1898)
@@ -43,7 +43,7 @@
 run: runmd
 
 runmd: $(PROGRAM)
-	cd build/bin &amp;&amp; LD_LIBRARY_PATH=`echo &quot;$(LD_LIBRARY_PATH):$(MOZILLA_HOME)&quot; | sed 's/^://g'` mono --debug MonoDevelop.exe
+	cd build/bin &amp;&amp; LD_LIBRARY_PATH=`echo &quot;$(LD_LIBRARY_PATH):$(MOZILLA_HOME)&quot; | sed 's/^://g'` $(RUNTIME) MonoDevelop.exe
 
 pad: $(MONOPAD)
 

Modified: trunk/MonoDevelop/Core/configure.in
===================================================================
--- trunk/MonoDevelop/Core/configure.in	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/configure.in	2004-07-05 19:19:48 UTC (rev 1898)
@@ -12,9 +12,14 @@
 AC_PATH_PROG(MONO, mono)
 AC_PATH_PROG(MCS, mcs)
 AC_PATH_PROG(XDGMIME, update-mime-database, no)
+
 if test &quot;x$MONO&quot; = &quot;x&quot; ; then
-  AC_MSG_ERROR([Can't find &quot;mono&quot; in your PATH])
+  AC_PATH_PROG(MINT, mint)
+  if test &quot;x$MINT&quot; = &quot;x&quot; ; then
+	AC_MSG_ERROR([Can't find &quot;mono&quot; or &quot;mint&quot; in your PATH])
+  fi
 fi
+
 if test &quot;x$MCS&quot; = &quot;x&quot; ; then
   AC_MSG_ERROR([Can't find &quot;mcs&quot; in your PATH])
 fi
@@ -28,13 +33,38 @@
 fi
 
 dnl unmanaged hard dependencies
-MONO_REQUIRED_VERSION=1.0
 GNOMEVFS_REQUIRED_VERSION=2.0
 PKG_CHECK_MODULES(UNMANAGED_DEPENDENCIES,
-mono &gt;= $MONO_REQUIRED_VERSION
 gnome-vfs-2.0 &gt;= $GNOMEVFS_REQUIRED_VERSION
 )
 
+MONO_REQUIRED_VERSION=1.0
+PKG_CHECK_MODULES(UNMANAGED_DEPENDENCIES_MONO,mono &gt;= $MONO_REQUIRED_VERSION, has_mono=true, has_mono=false)
+PKG_CHECK_MODULES(UNMANAGED_DEPENDENCIES_MINT,mint &gt;= $MONO_REQUIRED_VERSION, has_mint=true, has_mint=false)
+
+if test &quot;x$has_mono&quot; = &quot;xtrue&quot;; then
+    if test `uname -s` = &quot;Darwin&quot;; then
+	AC_PATH_PROG(RUNTIME, mono, no)
+	AC_PATH_PROG(CSC, mcs, no)
+	LIB_PREFIX=
+	LIB_SUFFIX=.dylib
+    else
+	AC_PATH_PROG(RUNTIME, mono, no)
+	AC_PATH_PROG(CSC, mcs, no)
+	RUNTIME=&quot;$RUNTIME --debug&quot;
+	LIB_PREFIX=.so
+	LIB_SUFFIX=
+    fi
+else
+    if test &quot;x$has_mint&quot; = &quot;xtrue&quot;; then
+	AC_PATH_PROG(RUNTIME, mint, no)
+	AC_PATH_PROG(CSC, mcs, no)
+	LIB_PREFIX=.so
+	LIB_SUFFIX=
+    fi
+fi
+
+
 dnl hard dependencies
 GTKSHARP_REQUIRED_VERSION=1.0
 GTKSOURCEVIEWSHARP_REQUIRED_VERSION=0.5
@@ -94,21 +124,6 @@
 AC_DEFINE_UNQUOTED(GETTEXT_PACKAGE,&quot;$GETTEXT_PACKAGE&quot;, [Gettext package])
 AM_GLIB_GNU_GETTEXT
 
-dnl Plateform test and LIBEXT settings
-case &quot;x${host_os}&quot; in
-  x)
-    LIB_PREFIX=
-    LIB_SUFFIX=
-    ;;
-  xlinux*)
-    LIB_PREFIX=.so
-    LIB_SUFFIX=
-    ;;
-  x*darwin*)
-    LIB_SUFFIX=.dylib
-    LIB_PREFIX=
-    ;;
-esac
 AC_SUBST(LIB_SUFFIX)
 AC_SUBST(LIB_PREFIX)
 
@@ -176,6 +191,8 @@
 po/Makefile.in
 src/AddIns/prj2make-sharp-lib/Makefile
 src/AddIns/prj2make-sharp-lib/AssemblyInfo.cs
+src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs
+src/AddIns/BackendBindings/CSharpBinding/CSharpBindingExecutionManager.cs
 ])
 
 echo &quot;---&quot;

Modified: trunk/MonoDevelop/Core/monodevelop.in
===================================================================
--- trunk/MonoDevelop/Core/monodevelop.in	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/monodevelop.in	2004-07-05 19:19:48 UTC (rev 1898)
@@ -50,19 +50,19 @@
 
 case x$1 in
     x--profile)
-    mono --profile ./MonoDevelop.exe $@
+    @RUNTIME@ --profile ./MonoDevelop.exe $@
 	exit 0
     ;;
     x--debug)
-    mono --debug ./MonoDevelop.exe $@
+    @RUNTIME@ --debug ./MonoDevelop.exe $@
 	exit 0
     ;;
 	x--trace)
-    mono --trace ./MonoDevelop.exe $@
+    @RUNTIME@ --trace ./MonoDevelop.exe $@
 	exit 0;
 	;;
 esac
 
 # should not use --debug when we are more stable
-mono --debug ./MonoDevelop.exe $@
<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">+ at RUNTIME</A>@ ./MonoDevelop.exe $@
 


Property changes on: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding
___________________________________________________________________
Name: svn:ignore
   - Makefile
Makefile.in
CSharpBinding.dll
CSharpBinding.pidb

   + Makefile
Makefile.in
CSharpBinding.dll
CSharpBinding.pidb
CSharpBindingExecutionManager.cs


Deleted: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpBindingExecutionManager.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpBindingExecutionManager.cs	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpBindingExecutionManager.cs	2004-07-05 19:19:48 UTC (rev 1898)
@@ -1,106 +0,0 @@
-// &lt;file&gt;
-//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
-//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
-//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
-//     &lt;version value=&quot;$version&quot;/&gt;
-// &lt;/file&gt;
-
-using System;
-using System.IO;
-using System.Diagnostics;
-using System.Collections;
-using System.Reflection;
-using System.Resources;
-using System.Xml;
-using System.CodeDom.Compiler;
-using System.Threading;
-
-using MonoDevelop.Internal.Project;
-using MonoDevelop.Gui;
-using MonoDevelop.Core.Services;
-using MonoDevelop.Services;
-
-namespace CSharpBinding
-{
-	/// &lt;summary&gt;
-	/// This class describes the main functionalaty of a language codon
-	/// &lt;/summary&gt;
-	public class CSharpBindingExecutionManager
-	{
-		public void Debug (IProject project)
-		{
-			FileUtilityService fileUtilityService = (FileUtilityService) ServiceManager.GetService (typeof (FileUtilityService));
-			string directory = fileUtilityService.GetDirectoryNameWithSeparator(((CSharpCompilerParameters)project.ActiveConfiguration).OutputDirectory);
-			string exe = ((CSharpCompilerParameters)project.ActiveConfiguration).OutputAssembly + &quot;.exe&quot;;
-
-			IDebuggingService dbgr = (IDebuggingService) ServiceManager.GetService (typeof (IDebuggingService));
-			if (dbgr != null)
-				dbgr.Run (new string[] { Path.Combine (directory, exe) } );
-		}
-
-		public void Execute(string filename)
-		{
-			string exe = Path.ChangeExtension(filename, &quot;.exe&quot;);
-			ProcessStartInfo psi = new ProcessStartInfo(&quot;mono&quot;, &quot;--debug &quot; + exe);
-			psi.WorkingDirectory = Path.GetDirectoryName(exe);
-			psi.UseShellExecute = false;
-			try {
-				Process p = new Process();
-				p.StartInfo = psi;
-				p.Start();
-			} catch (Exception) {
-				throw new ApplicationException(&quot;Can not execute &quot; + &quot;\&quot;&quot; + exe + &quot;\&quot;\n(Try restarting MonoDevelop or start your app manually)&quot;);
-			}
-		}
-		
-		public void Execute(IProject project)
-		{
-			CSharpCompilerParameters parameters = (CSharpCompilerParameters)project.ActiveConfiguration;
-			FileUtilityService fileUtilityService = (FileUtilityService)ServiceManager.GetService(typeof(FileUtilityService));
-			
-			string directory = fileUtilityService.GetDirectoryNameWithSeparator(((CSharpCompilerParameters)project.ActiveConfiguration).OutputDirectory);
-			string exe = ((CSharpCompilerParameters)project.ActiveConfiguration).OutputAssembly + &quot;.exe&quot;;
-			string args = ((CSharpCompilerParameters)project.ActiveConfiguration).CommandLineParameters;
-			
-			ProcessStartInfo psi;
-			if (parameters.ExecuteScript != null &amp;&amp; parameters.ExecuteScript.Length &gt; 0) {
-				//Console.WriteLine(&quot;EXECUTE SCRIPT!!!!!!&quot;);
-				psi = new ProcessStartInfo(&quot;\&quot;&quot; + parameters.ExecuteScript + &quot;\&quot;&quot;);
-				psi.UseShellExecute = false;
-			} else {
-				string runtimeStarter = &quot;mono --debug &quot;;
-				
-				switch (parameters.NetRuntime) {
-					case NetRuntime.Mono:
-						runtimeStarter = &quot;mono --debug &quot;;
-						break;
-					case NetRuntime.MonoInterpreter:
-						runtimeStarter = &quot;mint &quot;;
-						break;
-				}
-				
-				//if (parameters.CompileTarget != CompileTarget.WinExe &amp;&amp; parameters.PauseConsoleOutput) {
-					psi = new ProcessStartInfo(&quot;xterm&quot;,
-						string.Format (
-						@&quot;-e &quot;&quot;{0} '{1}{2}' {3} ; echo; read -p 'press any key to continue...' -n1&quot;&quot;&quot;,
-						runtimeStarter, directory, exe, args));
-					psi.UseShellExecute = false;
-				//} else {
-				//	psi = new ProcessStartInfo(runtimeStarter, &quot;\&quot;&quot; + directory + exe + &quot;\&quot; &quot; + args);
-				//	psi.UseShellExecute = false;
-				//}
-			}
-			
-			try {
-				psi.WorkingDirectory = Path.GetDirectoryName(directory);
-				psi.UseShellExecute  =  false;
-				
-				Process p = new Process();
-				p.StartInfo = psi;
-				p.Start();
-			} catch (Exception) {
-				throw new ApplicationException(&quot;Can not execute &quot; + &quot;\&quot;&quot; + directory + exe + &quot;\&quot;\n(Try restarting MonoDevelop or start your app manually)&quot;);
-			}
-		}
-	}
-}

Added: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpBindingExecutionManager.cs.in
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpBindingExecutionManager.cs.in	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/CSharpBindingExecutionManager.cs.in	2004-07-05 19:19:48 UTC (rev 1898)
@@ -0,0 +1,107 @@
+// &lt;file&gt;
+//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
+//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
+//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
+//     &lt;version value=&quot;$version&quot;/&gt;
+// &lt;/file&gt;
+
+using System;
+using System.IO;
+using System.Diagnostics;
+using System.Collections;
+using System.Reflection;
+using System.Resources;
+using System.Xml;
+using System.CodeDom.Compiler;
+using System.Threading;
+
+using MonoDevelop.Internal.Project;
+using MonoDevelop.Gui;
+using MonoDevelop.Core.Services;
+using MonoDevelop.Services;
+
+namespace CSharpBinding
+{
+	/// &lt;summary&gt;
+	/// This class describes the main functionalaty of a language codon
+	/// &lt;/summary&gt;
+	public class CSharpBindingExecutionManager
+	{
+		public void Debug (IProject project)
+		{
+			FileUtilityService fileUtilityService = (FileUtilityService) ServiceManager.GetService (typeof (FileUtilityService));
+			string directory = fileUtilityService.GetDirectoryNameWithSeparator(((CSharpCompilerParameters)project.ActiveConfiguration).OutputDirectory);
+			string exe = ((CSharpCompilerParameters)project.ActiveConfiguration).OutputAssembly + &quot;.exe&quot;;
+
+			IDebuggingService dbgr = (IDebuggingService) ServiceManager.GetService (typeof (IDebuggingService));
+			if (dbgr != null)
+				dbgr.Run (new string[] { Path.Combine (directory, exe) } );
+		}
+
+		public void Execute(string filename)
+		{
+			string exe = Path.ChangeExtension(filename, &quot;.exe&quot;);
+			
+			ProcessStartInfo psi = new ProcessStartInfo(&quot;@RUNTIME@ &quot; + exe);
+			psi.WorkingDirectory = Path.GetDirectoryName(exe);
+			psi.UseShellExecute = false;
+			try {
+				Process p = new Process();
+				p.StartInfo = psi;
+				p.Start();
+			} catch (Exception) {
+				throw new ApplicationException(&quot;Can not execute &quot; + &quot;\&quot;&quot; + exe + &quot;\&quot;\n(Try restarting MonoDevelop or start your app manually)&quot;);
+			}
+		}
+		
+		public void Execute(IProject project)
+		{
+			CSharpCompilerParameters parameters = (CSharpCompilerParameters)project.ActiveConfiguration;
+			FileUtilityService fileUtilityService = (FileUtilityService)ServiceManager.GetService(typeof(FileUtilityService));
+			
+			string directory = fileUtilityService.GetDirectoryNameWithSeparator(((CSharpCompilerParameters)project.ActiveConfiguration).OutputDirectory);
+			string exe = ((CSharpCompilerParameters)project.ActiveConfiguration).OutputAssembly + &quot;.exe&quot;;
+			string args = ((CSharpCompilerParameters)project.ActiveConfiguration).CommandLineParameters;
+			
+			ProcessStartInfo psi;
+			if (parameters.ExecuteScript != null &amp;&amp; parameters.ExecuteScript.Length &gt; 0) {
+				//Console.WriteLine(&quot;EXECUTE SCRIPT!!!!!!&quot;);
+				psi = new ProcessStartInfo(&quot;\&quot;&quot; + parameters.ExecuteScript + &quot;\&quot;&quot;);
+				psi.UseShellExecute = false;
+			} else {
+				string runtimeStarter = &quot;mono --debug &quot;;
+				
+				switch (parameters.NetRuntime) {
+					case NetRuntime.Mono:
+						runtimeStarter = &quot;mono --debug &quot;;
+						break;
+					case NetRuntime.MonoInterpreter:
+						runtimeStarter = &quot;mint &quot;;
+						break;
+				}
+				
+				//if (parameters.CompileTarget != CompileTarget.WinExe &amp;&amp; parameters.PauseConsoleOutput) {
+					psi = new ProcessStartInfo(&quot;xterm&quot;,
+						string.Format (
+						@&quot;-e &quot;&quot;{0} '{1}{2}' {3} ; echo; read -p 'press any key to continue...' -n1&quot;&quot;&quot;,
+						runtimeStarter, directory, exe, args));
+					psi.UseShellExecute = false;
+				//} else {
+				//	psi = new ProcessStartInfo(runtimeStarter, &quot;\&quot;&quot; + directory + exe + &quot;\&quot; &quot; + args);
+				//	psi.UseShellExecute = false;
+				//}
+			}
+			
+			try {
+				psi.WorkingDirectory = Path.GetDirectoryName(directory);
+				psi.UseShellExecute  =  false;
+				
+				Process p = new Process();
+				p.StartInfo = psi;
+				p.Start();
+			} catch (Exception) {
+				throw new ApplicationException(&quot;Can not execute &quot; + &quot;\&quot;&quot; + directory + exe + &quot;\&quot;\n(Try restarting MonoDevelop or start your app manually)&quot;);
+			}
+		}
+	}
+}

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/ChangeLog	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/ChangeLog	2004-07-05 19:19:48 UTC (rev 1898)
@@ -1,3 +1,11 @@
+2004-07-05  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
+
+	* CSharpBindingExecutionManager.cs: removed.
+	* CSharpBindingExecutionManager.cs.in: Added
+	* Makefile.am: modified.
+	This patch is from Marcin Krzyzanowski &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">krzak at pld-linux.org</A>&gt; and it
+	fixes mint issues.
+
 2004-07-04  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jluke at cfl.rr.com</A>&gt;
 
 	* Gui/OutputOptionsPanel.cs: use MessageService, remove ResourceService

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/Makefile.am	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding/Makefile.am	2004-07-05 19:19:48 UTC (rev 1898)
@@ -29,7 +29,6 @@
 ./Parser/Resolver.cs \
 ./Parser/Parser.cs \
 ./Parser/ExpressionFinder.cs \
-./CSharpBindingExecutionManager.cs \
 ./CSharpAmbience.cs \
 ./Project/CSharpProject.cs \
 ./Project/CSharpCompilerParameters.cs \
@@ -37,7 +36,7 @@
 ./FormattingStrategy/CSharpFormattingStrategy.cs \
 ./CSharpBindingCompilerManager.cs
 
-build_sources = $(addprefix $(srcdir)/, $(FILES))
+build_sources = $(addprefix $(srcdir)/, $(FILES)) CSharpBindingExecutionManager.cs
 
 all: $(ASSEMBLY)
 
@@ -52,5 +51,7 @@
 
 CLEANFILES = $(ASSEMBLY)
 
-EXTRA_DIST = $(FILES)
+DISTCLEANFILES = CSharpBindingExecutionManager.cs
 
+EXTRA_DIST = $(FILES) CSharpBindingExecutionManager.cs.in
+


Property changes on: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding
___________________________________________________________________
Name: svn:ignore
   - Makefile
Makefile.in
NemerleBinding.dll
NemerleBinding.pidb

   + Makefile
Makefile.in
NemerleBinding.dll
NemerleBinding.pidb
NemerleBindingExecutionServices.cs


Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/ChangeLog	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/ChangeLog	2004-07-05 19:19:48 UTC (rev 1898)
@@ -1,3 +1,11 @@
+2004-07-06  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
+
+	* NemerleBindingExecutionServices.cs: removed.
+	* NemerleBindingExecutionServices.cs.in: Added.
+	* Makefile.am: adjusted.
+	This patch is from Marcin Krzyzanowski &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">krzak at pld-linux.org</A>&gt; and it
+	fixes mint vs mono issues at runtime.
+
 2004-06-26  Pawel Rozanski  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tokugawa at afn.no-ip.org</A>&gt;
 
 	* NemerleBindingCompilerServices.cs: add GenerateMakefile method.

Modified: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/Makefile.am	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/Makefile.am	2004-07-05 19:19:48 UTC (rev 1898)
@@ -15,11 +15,10 @@
 ./Gui/OutputPanel.cs \
 ./Project/NemerleParameters.cs \
 ./Project/NemerleProject.cs \
-./NemerleBindingExecutionServices.cs \
 ./NemerleBindingCompilerServices.cs \
 ./NemerleLanguageBinding.cs 
 
-build_sources = $(addprefix $(srcdir)/, $(FILES))
+build_sources = $(addprefix $(srcdir)/, $(FILES)) NemerleBindingExecutionServices.cs
 
 all: $(ASSEMBLY)
 
@@ -32,4 +31,5 @@
 assembly_DATA = $(ASSEMBLY)
 
 CLEANFILES = $(ASSEMBLY)
-EXTRA_DIST = $(FILES)
+DISTCLEANFILES = NemerleBindingExecutionServices.cs
+EXTRA_DIST = $(FILES) NemerleBindingExecutionServices.cs.in

Deleted: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs	2004-07-05 19:19:48 UTC (rev 1898)
@@ -1,59 +0,0 @@
-using System;
-using System.IO;
-using System.Diagnostics;
-using System.Collections;
-using System.Reflection;
-using System.Resources;
-using System.Xml;
-using System.CodeDom.Compiler;
-using System.Threading;
-
-using MonoDevelop.Internal.Project;
-using MonoDevelop.Gui;
-using MonoDevelop.Core.Services;
-
-namespace NemerleBinding
-{
-	public class NemerleBindingExecutionServices
-	{	
-		
-		public void Execute(string filename)
-		{
-			throw new ApplicationException(&quot;No ExecuteFile&quot;);
-		}
-		
-		public void Execute(IProject project)
-		{
-			
-			NemerleParameters p = (NemerleParameters)project.ActiveConfiguration;
-			FileUtilityService fus = (FileUtilityService)ServiceManager.GetService(typeof(FileUtilityService));
-			string exe;
-			
-			if (p.ExecuteScript == String.Empty)
-			{
-				exe	= &quot;mono --debug&quot;;
-			} else
-			{
-				exe = p.ExecuteScript;
-			}
-			
-			exe += &quot; &quot; + p.OutputAssembly + &quot;.exe &quot; + p.Parameters;
-			
-			try {
-				ProcessStartInfo psi = new ProcessStartInfo(&quot;xterm&quot;,
-					string.Format (
-					@&quot;-e &quot;&quot;{0} ;echo;read -p 'press any key to continue...' -n1&quot;&quot;&quot;,
-					exe));
-				psi.WorkingDirectory = fus.GetDirectoryNameWithSeparator(p.OutputDirectory);
-				psi.UseShellExecute = false;
-				
-				Process pr = new Process();
-				pr.StartInfo = psi;
-				pr.Start();
-			} catch (Exception) {
-				throw new ApplicationException(&quot;Can not execute&quot;);
-			}
-		}
-				
-	}
-}

Added: trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs.in
===================================================================
--- trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs.in	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs.in	2004-07-05 19:19:48 UTC (rev 1898)
@@ -0,0 +1,59 @@
+using System;
+using System.IO;
+using System.Diagnostics;
+using System.Collections;
+using System.Reflection;
+using System.Resources;
+using System.Xml;
+using System.CodeDom.Compiler;
+using System.Threading;
+
+using MonoDevelop.Internal.Project;
+using MonoDevelop.Gui;
+using MonoDevelop.Core.Services;
+
+namespace NemerleBinding
+{
+	public class NemerleBindingExecutionServices
+	{	
+		
+		public void Execute(string filename)
+		{
+			throw new ApplicationException(&quot;No ExecuteFile&quot;);
+		}
+		
+		public void Execute(IProject project)
+		{
+			
+			NemerleParameters p = (NemerleParameters)project.ActiveConfiguration;
+			FileUtilityService fus = (FileUtilityService)ServiceManager.GetService(typeof(FileUtilityService));
+			string exe;
+			
+			if (p.ExecuteScript == String.Empty)
+			{
+				exe	= &quot;@RUNTIME@ &quot;;
+			} else
+			{
+				exe = p.ExecuteScript;
+			}
+			
+			exe += &quot; &quot; + p.OutputAssembly + &quot;.exe &quot; + p.Parameters;
+			
+			try {
+				ProcessStartInfo psi = new ProcessStartInfo(&quot;xterm&quot;,
+					string.Format (
+					@&quot;-e &quot;&quot;{0} ;echo;read -p 'press any key to continue...' -n1&quot;&quot;&quot;,
+					exe));
+				psi.WorkingDirectory = fus.GetDirectoryNameWithSeparator(p.OutputDirectory);
+				psi.UseShellExecute = false;
+				
+				Process pr = new Process();
+				pr.StartInfo = psi;
+				pr.Start();
+			} catch (Exception) {
+				throw new ApplicationException(&quot;Can not execute&quot;);
+			}
+		}
+				
+	}
+}

Modified: trunk/MonoDevelop/Core/src/Libraries/SharpRefactory/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/Libraries/SharpRefactory/Makefile.am	2004-07-05 19:05:54 UTC (rev 1897)
+++ trunk/MonoDevelop/Core/src/Libraries/SharpRefactory/Makefile.am	2004-07-05 19:19:48 UTC (rev 1898)
@@ -125,7 +125,7 @@
 	@ $(CSC) /out:$@ /r:$(DLL) src/Main.cs
 
 run : test-parser.exe
-	@ MONO_PATH=`dirname $(DLL)` mono --debug test-parser.exe $(TEST_SOURCE)
+	@ MONO_PATH=`dirname $(DLL)` $(RUNTIME) test-parser.exe $(TEST_SOURCE)
 
 assemblydir = $(libdir)/monodevelop/bin
 assembly_DATA = $(DLL)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001504.html">[Monodevelop-patches-list] r1897 - in trunk/MonoDevelop/Core/src/AddIns/BackendBindings/JavaBinding: . FormatingStrategy Gui Project ProjectTreeBuilder
</A></li>
	<LI>Next message: <A HREF="001506.html">[Monodevelop-patches-list] r1899 - in trunk/MonoDevelop/Core/src/Main/Base: . Gui/Pads/HelpBrowser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1505">[ date ]</a>
              <a href="thread.html#1505">[ thread ]</a>
              <a href="subject.html#1505">[ subject ]</a>
              <a href="author.html#1505">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
