<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r1891 - in trunk/MonoDevelop/Core/src/Main/Base: . Gui/Dialogs/OptionPanels/ProjectOptions Gui/Pads/ProjectBrowser Gui/Pads/ProjectBrowser/BrowserNode Gui/Pads/ProjectBrowser/NodeBuilder Internal/Project/Project
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1891%20-%20in%20trunk/MonoDevelop/Core/src/Main/Base%3A%20.%20Gui/Dialogs/OptionPanels/ProjectOptions%20Gui/Pads/ProjectBrowser%20Gui/Pads/ProjectBrowser/BrowserNode%20Gui/Pads/ProjectBrowser/NodeBuilder%20Internal/Project/Project&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001497.html">
   <LINK REL="Next"  HREF="001499.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r1891 - in trunk/MonoDevelop/Core/src/Main/Base: . Gui/Dialogs/OptionPanels/ProjectOptions Gui/Pads/ProjectBrowser Gui/Pads/ProjectBrowser/BrowserNode Gui/Pads/ProjectBrowser/NodeBuilder Internal/Project/Project</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1891%20-%20in%20trunk/MonoDevelop/Core/src/Main/Base%3A%20.%20Gui/Dialogs/OptionPanels/ProjectOptions%20Gui/Pads/ProjectBrowser%20Gui/Pads/ProjectBrowser/BrowserNode%20Gui/Pads/ProjectBrowser/NodeBuilder%20Internal/Project/Project&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r1891 - in trunk/MonoDevelop/Core/src/Main/Base: . Gui/Dialogs/OptionPanels/ProjectOptions Gui/Pads/ProjectBrowser Gui/Pads/ProjectBrowser/BrowserNode Gui/Pads/ProjectBrowser/NodeBuilder Internal/Project/Project">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Sun Jul  4 15:06:25 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001497.html">[Monodevelop-patches-list] r1890 - trunk/MonoDevelop/Core/src/Main/Base
</A></li>
        <LI>Next message: <A HREF="001499.html">[Monodevelop-patches-list] r1892 - in trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding: . Gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1498">[ date ]</a>
              <a href="thread.html#1498">[ thread ]</a>
              <a href="subject.html#1498">[ subject ]</a>
              <a href="author.html#1498">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jluke
Date: 2004-07-04 15:06:25 -0400 (Sun, 04 Jul 2004)
New Revision: 1891

Modified:
   trunk/MonoDevelop/Core/src/Main/Base/ChangeLog
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/OptionPanels/ProjectOptions/DeployFileOptions.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/AbstractBrowserNode.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/CombineBrowserNode.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/DirectoryNode.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/FileNode.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/ProjectBrowserNode.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/ReferenceNode.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/NodeBuilder/DefaultDotNetNodeBuilder.cs
   trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/ProjectBrowserView.cs
   trunk/MonoDevelop/Core/src/Main/Base/Internal/Project/Project/IncludeFilesDialog.cs
Log:
2004-07-04  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jluke at cfl.rr.com</A>&gt;
 
        * Gui/Dialogs/OptionPanels/ProjectOptions/DeployFileOptions.cs:
        * Gui/Pads/ProjectBrowser/ProjectBrowserView.cs:
        * Gui/Pads/ProjectBrowser/BrowserNode/AbstractBrowserNode.cs:
        * Gui/Pads/ProjectBrowser/BrowserNode/ReferenceNode.cs:
        * Gui/Pads/ProjectBrowser/BrowserNode/FileNode.cs:
        * Gui/Pads/ProjectBrowser/BrowserNode/CombineBrowserNode.cs:
        * Gui/Pads/ProjectBrowser/BrowserNode/DirectoryNode.cs:
        * Gui/Pads/ProjectBrowser/NodeBuilder/DefaultDotNetNodeBuilder.cs:
        * Internal/Project/Project/IncludeFilesDialog.cs:
        Use the MessageService everywhere, and cleanup these files a bit



Modified: trunk/MonoDevelop/Core/src/Main/Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/ChangeLog	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/ChangeLog	2004-07-04 19:06:25 UTC (rev 1891)
@@ -1,3 +1,16 @@
+2004-07-04  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jluke at cfl.rr.com</A>&gt;
+
+	* Gui/Dialogs/OptionPanels/ProjectOptions/DeployFileOptions.cs:
+	* Gui/Pads/ProjectBrowser/ProjectBrowserView.cs:
+	* Gui/Pads/ProjectBrowser/BrowserNode/AbstractBrowserNode.cs:
+	* Gui/Pads/ProjectBrowser/BrowserNode/ReferenceNode.cs:
+	* Gui/Pads/ProjectBrowser/BrowserNode/FileNode.cs:
+	* Gui/Pads/ProjectBrowser/BrowserNode/CombineBrowserNode.cs:
+	* Gui/Pads/ProjectBrowser/BrowserNode/DirectoryNode.cs:   
+	* Gui/Pads/ProjectBrowser/NodeBuilder/DefaultDotNetNodeBuilder.cs:
+	* Internal/Project/Project/IncludeFilesDialog.cs:
+	Use the MessageService everywhere, and cleanup these files a bit
+
 2004-07-02  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
 
 	* Services/MessageService.cs: Convert most of these to be threadsafe.

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/OptionPanels/ProjectOptions/DeployFileOptions.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/OptionPanels/ProjectOptions/DeployFileOptions.cs	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Dialogs/OptionPanels/ProjectOptions/DeployFileOptions.cs	2004-07-04 19:06:25 UTC (rev 1891)
@@ -16,25 +16,16 @@
 using MonoDevelop.Core.Services;
 using MonoDevelop.Core.AddIns.Codons;
 using MonoDevelop.Gui.Components;
-
 using MonoDevelop.Services;
+using MonoDevelop.Gui.Widgets;
 
 using Gtk;
-using MonoDevelop.Gui.Widgets;
 
 namespace MonoDevelop.Gui.Dialogs.OptionPanels
 {
-	/// &lt;summary&gt;
-	/// Summary description for Form3.
-	/// &lt;/summary&gt;
 	public class DeployFileProjectOptions : AbstractOptionPanel
 	{
 
-		// FIXME 
-		// - internationalize 
-		// 	   SetupFromXml(Path.Combine(PropertyService.DataDirectory, 
-		// 			                          @&quot;resources\panels\DeployFileOptions.xfrm&quot;));
-
 		class DeployFileOptionsWidget : GladeWidgetExtract 
 		{
 		        // Gtk Controls
@@ -54,6 +45,8 @@
 			IProject project;
 			static FileUtilityService fileUtilityService = (FileUtilityService) ServiceManager.GetService(typeof(FileUtilityService));
 			StringParserService StringParserService = (StringParserService)ServiceManager.GetService (typeof (StringParserService));
+			MessageService messageService = (MessageService) ServiceManager.GetService (typeof (MessageService));
+
 			public DeployFileOptionsWidget (IProperties CustomizationObject) : 
 				base (&quot;Base.glade&quot;, &quot;DeployFileOptionsPanel&quot;)
 			{
@@ -137,41 +130,20 @@
 			{
 				if (deployTargetEntry.Text.Length &gt; 0) {
 					if (!fileUtilityService.IsValidFileName(deployTargetEntry.Text)) {
-						MessageDialog dialog = new MessageDialog ((Window) WorkbenchSingleton.Workbench, 
-								DialogFlags.DestroyWithParent,
-								MessageType.Error, 
-								ButtonsType.Close, 
-								GettextCatalog.GetString (&quot;Invalid deploy target specified&quot;));
-						dialog.Run ();
-						dialog.Hide ();
-						dialog.Dispose ();
+						messageService.ShowError (GettextCatalog.GetString (&quot;Invalid deploy target specified&quot;));
 						return false;
 					}
 				}
 				
 				if (deployScriptEntry.Text.Length &gt; 0) {
 					if (!fileUtilityService.IsValidFileName(deployScriptEntry.Text)) {
-						MessageDialog dialog = new MessageDialog ((Window) WorkbenchSingleton.Workbench, 
-								DialogFlags.DestroyWithParent,
-								MessageType.Error, 
-								ButtonsType.Close, 
-								GettextCatalog.GetString (&quot;Invalid deploy script specified&quot;));
-						dialog.Run ();
-						dialog.Hide ();
-						dialog.Dispose ();
+						messageService.ShowError (GettextCatalog.GetString (&quot;Invalid deploy script specified&quot;));
 						return false;				
 					}
 				}
 				
 				if (!System.IO.File.Exists(deployScriptEntry.Text)) {
-					MessageDialog dialog = new MessageDialog ((Window) WorkbenchSingleton.Workbench, 
-							DialogFlags.DestroyWithParent,
-							MessageType.Error, 
-							ButtonsType.Close, 
-							GettextCatalog.GetString (&quot;Deploy script doesn't exists&quot;));
-					dialog.Run ();
-					dialog.Hide ();
-					dialog.Dispose ();
+					messageService.ShowError (GettextCatalog.GetString (&quot;Deploy script doesn't exists&quot;));
 					return false;
  				}
 			

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/AbstractBrowserNode.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/AbstractBrowserNode.cs	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/AbstractBrowserNode.cs	2004-07-04 19:06:25 UTC (rev 1891)
@@ -13,9 +13,7 @@
 
 using MonoDevelop.Core.Properties;
 using MonoDevelop.Core.Services;
-
 using MonoDevelop.Core.AddIns;
-
 using MonoDevelop.Internal.Project;
 using MonoDevelop.Gui.Widgets;
 

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/CombineBrowserNode.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/CombineBrowserNode.cs	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/CombineBrowserNode.cs	2004-07-04 19:06:25 UTC (rev 1891)
@@ -13,7 +13,6 @@
 using System.Collections.Specialized;
 
 using MonoDevelop.Core.Properties;
-
 using MonoDevelop.Core.Services;
 using MonoDevelop.Services;
 using MonoDevelop.Internal.Project;
@@ -78,7 +77,6 @@
 		
 		public void UpdateCombineName(object sender, EventArgs e)
 		{
-			StringParserService stringParserService = (StringParserService)ServiceManager.GetService(typeof(StringParserService));
 			switch (combine.Entries.Count) {
 				case 0:
 					Text = String.Format (GettextCatalog.GetString (&quot;Solution {0}&quot;), combine.Name);
@@ -104,15 +102,12 @@
 			}
 			
 			CombineBrowserNode cmbNode = (CombineBrowserNode)Parent;
-			StringParserService stringParserService = (StringParserService)ServiceManager.GetService(typeof(StringParserService));
 			
-			Gtk.MessageDialog dialog = new Gtk.MessageDialog ((Gtk.Window)WorkbenchSingleton.Workbench, Gtk.DialogFlags.DestroyWithParent, Gtk.MessageType.Question, Gtk.ButtonsType.OkCancel, String.Format (GettextCatalog.GetString (&quot;Do you really want to remove solution {0} from solution {1}?&quot;), combine.Name, cmbNode.Combine.Name));
-			
-			if (dialog.Run() != (int)Gtk.ResponseType.Ok) {
-				dialog.Destroy ();
+			IMessageService messageService = (IMessageService) ServiceManager.GetService (typeof (IMessageService));
+			bool yes = messageService.AskQuestion (String.Format (GettextCatalog.GetString (&quot;Do you really want to remove solution {0} from solution {1}?&quot;), combine.Name, cmbNode.Combine.Name));
+
+			if (!yes)
 				return false;
-			}
-			dialog.Destroy ();
 			
 			CombineEntry removeEntry = null;
 			

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/DirectoryNode.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/DirectoryNode.cs	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/DirectoryNode.cs	2004-07-04 19:06:25 UTC (rev 1891)
@@ -12,9 +12,7 @@
 using System.Collections.Specialized;
 
 using MonoDevelop.Core.Properties;
-
 using MonoDevelop.Core.Services;
-
 using MonoDevelop.Services;
 using MonoDevelop.Internal.Project;
 using MonoDevelop.Gui.Components;
@@ -124,17 +122,14 @@
 			if (FolderName != null &amp;&amp; FolderName.Length == 0) {
 				return false;
 			}
-			StringParserService stringParserService = (StringParserService)ServiceManager.GetService(typeof(StringParserService));
 			
-			Gtk.MessageDialog dialog = new Gtk.MessageDialog ((Gtk.Window)WorkbenchSingleton.Workbench, Gtk.DialogFlags.DestroyWithParent, Gtk.MessageType.Question, Gtk.ButtonsType.OkCancel, String.Format (GettextCatalog.GetString (&quot;Do you want to remove folder {0} from project {1}?&quot;), Text, Project.Name));
+			IMessageService messageService = (IMessageService) ServiceManager.GetService (typeof (IMessageService));
+			bool yes = messageService.AskQuestion (String.Format (GettextCatalog.GetString (&quot;Do you want to remove folder {0} from project {1}?&quot;), Text, Project.Name));
 
-			if (dialog.Run() != (int)Gtk.ResponseType.Ok) {
-				dialog.Destroy ();
+			if (!yes)
 				return false;
-			}
-			dialog.Destroy ();
 			
-			IFileService fileService = (IFileService)MonoDevelop.Core.Services.ServiceManager.GetService(typeof(IFileService));
+			//IFileService fileService = (IFileService)MonoDevelop.Core.Services.ServiceManager.GetService(typeof(IFileService));
 			IProjectService projectService = (IProjectService)MonoDevelop.Core.Services.ServiceManager.GetService(typeof(IProjectService));
 			//switch (ret) {
 				//case 0:

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/FileNode.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/FileNode.cs	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/FileNode.cs	2004-07-04 19:06:25 UTC (rev 1891)
@@ -1,4 +1,4 @@
-// &lt;file&gt;
+
 //     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
 //     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
 //     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
@@ -28,6 +28,8 @@
 		public readonly static string ProjectFileContextMenuPath = &quot;/SharpDevelop/Views/ProjectBrowser/ContextMenu/ProjectFileNode&quot;;
 		public readonly static string DefaultContextMenuPath = &quot;/SharpDevelop/Views/ProjectBrowser/ContextMenu/DefaultFileNode&quot;;
 		
+		IMessageService messageService = (IMessageService) ServiceManager.GetService (typeof (IMessageService));
+
 		/// &lt;summary&gt;
 		/// Generates a Drag &amp; Drop data object. If this property returns null
 		/// the node indicates that it can't be dragged.
@@ -104,18 +106,11 @@
 				}
 				string oldname = ((ProjectFile)userData).Name;
 				
-				// this forces an extension: bug# 59677
-				//string oldExtension = Path.GetExtension(oldname);
-				
-				//if (Path.GetExtension(newName).Length == 0) {
-				//	newName += oldExtension;
-				//}
-				
 				string newname = Path.GetDirectoryName(oldname) + Path.DirectorySeparatorChar + newName;
 				if (oldname != newname) {
 					try {
-						IFileService fileService = (IFileService)MonoDevelop.Core.Services.ServiceManager.GetService(typeof(IFileService));
-						FileUtilityService fileUtilityService = (FileUtilityService)MonoDevelop.Core.Services.ServiceManager.GetService(typeof(FileUtilityService));
+						IFileService fileService = (IFileService) ServiceManager.GetService (typeof (IFileService));
+						FileUtilityService fileUtilityService = (FileUtilityService) ServiceManager.GetService (typeof (FileUtilityService));
 						if (fileUtilityService.IsValidFileName(newname)) {
 							fileService.RenameFile(oldname, newname);
 							SetNodeLabel();
@@ -123,11 +118,9 @@
 							UpdateBacking ();
 						}
 					} catch (System.IO.IOException) {   // assume duplicate file
-						IMessageService messageService =(IMessageService)ServiceManager.GetService(typeof(IMessageService));
-						messageService.ShowError(GettextCatalog.GetString (&quot;File or directory name is already in use, choose a different one.&quot;));
+						messageService.ShowError (GettextCatalog.GetString (&quot;File or directory name is already in use, choose a different one.&quot;));
 					} catch (System.ArgumentException) { // new file name with wildcard (*, ?) characters in it
-						IMessageService messageService =(IMessageService)ServiceManager.GetService(typeof(IMessageService));
-						messageService.ShowError(GettextCatalog.GetString (&quot;The file name you have chosen contains illegal characters. Please choose a different file name.&quot;));
+						messageService.ShowError (GettextCatalog.GetString (&quot;The file name you have chosen contains illegal characters. Please choose a different file name.&quot;));
 					}
 				}
 			}
@@ -139,30 +132,13 @@
 		public override bool RemoveNode()
 		{
 			DateTime old = DateTime.Now;
-			StringParserService stringParserService = (StringParserService)ServiceManager.GetService(typeof(StringParserService));
 			
-			using (MessageDialog dialog = new Gtk.MessageDialog ((Window) WorkbenchSingleton.Workbench, DialogFlags.DestroyWithParent, MessageType.Question, ButtonsType.YesNo, String.Format (GettextCatalog.GetString (&quot;Are you sure you want to remove file {0} from project {1}?&quot;), Path.GetFileName (((ProjectFile)userData).Name), Project.Name))) {
-			
-				if (dialog.Run() != (int)Gtk.ResponseType.Yes) {
-					dialog.Hide ();
-					return false;
-				}
-			
-				dialog.Hide ();
-			}
-			//switch (sharpMessageBox.ShowMessageBox()) {
-			//	case -1:
-			//	case 2:
-			//		return false;
-			//	case 0:
-					IProjectService projectService = (IProjectService)MonoDevelop.Core.Services.ServiceManager.GetService(typeof(IProjectService));
-					projectService.RemoveFileFromProject(((ProjectFile)userData).Name);
-			//		break;
-			//	case 1:
-			//		IFileService fileService = (IFileService)MonoDevelop.Core.Services.ServiceManager.Services.GetService(typeof(IFileService));
-			//		fileService.RemoveFile(((ProjectFile)userData).Name);
-			//		break;
-			//}
+			bool yes = messageService.AskQuestion (String.Format (GettextCatalog.GetString (&quot;Are you sure you want to remove file {0} from project {1}?&quot;), Path.GetFileName (((ProjectFile)userData).Name), Project.Name));
+			if (!yes)
+				return false;
+
+			IProjectService projectService = (IProjectService)MonoDevelop.Core.Services.ServiceManager.GetService(typeof(IProjectService));
+			projectService.RemoveFileFromProject(((ProjectFile)userData).Name);
 			return true;
 		}
 	}

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/ProjectBrowserNode.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/ProjectBrowserNode.cs	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/ProjectBrowserNode.cs	2004-07-04 19:06:25 UTC (rev 1891)
@@ -11,10 +11,10 @@
 using System.Diagnostics;
 using System.Drawing;
 using System.Collections.Specialized;
+
 using MonoDevelop.Core.Services;
 using MonoDevelop.Services;
 using MonoDevelop.Core.Properties;
-
 using MonoDevelop.Internal.Project;
 using MonoDevelop.Gui.Components;
 
@@ -104,14 +104,12 @@
 			Combine  cmb = Combine;
 			IProject prj = project;
 			CombineEntry removeEntry = null;
-			StringParserService stringParserService = (StringParserService)ServiceManager.GetService(typeof(StringParserService));
 			
-			Gtk.MessageDialog dialog = new Gtk.MessageDialog ((Gtk.Window)WorkbenchSingleton.Workbench, Gtk.DialogFlags.DestroyWithParent, Gtk.MessageType.Question, Gtk.ButtonsType.OkCancel, String.Format (GettextCatalog.GetString (&quot;Do you really want to remove project {0} from solution {1}&quot;), project.Name, cmb.Name)); 
-													if (dialog.Run() != (int)Gtk.ResponseType.Ok) {
-				dialog.Destroy ();
+			IMessageService messageService = (IMessageService) ServiceManager.GetService (typeof (IMessageService));
+			bool yes = messageService.AskQuestion (String.Format (GettextCatalog.GetString (&quot;Do you really want to remove project {0} from solution {1}&quot;), project.Name, cmb.Name));
+
+			if (!yes)
 				return false;
-			}
-			dialog.Destroy ();
 			
 			// remove combineentry
 			foreach (CombineEntry entry in cmb.Entries) {

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/ReferenceNode.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/ReferenceNode.cs	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/BrowserNode/ReferenceNode.cs	2004-07-04 19:06:25 UTC (rev 1891)
@@ -10,10 +10,10 @@
 using System.Diagnostics;
 using System.Drawing;
 using System.Collections.Specialized;
+
 using MonoDevelop.Core.Services;
 using MonoDevelop.Services;
 using MonoDevelop.Core.Properties;
-
 using MonoDevelop.Internal.Project;
 using MonoDevelop.Gui.Components;
 
@@ -84,16 +84,12 @@
 		/// &lt;summary&gt;
 		/// Removes a reference from a project
 		/// NOTE : This method assumes that its parent is 
-		/// from the type 'ProejctBrowserNode'.
+		/// from the type 'ProjectBrowserNode'.
 		/// &lt;/summary&gt;
 		public override bool RemoveNode()
 		{
-			
-			// TODO: Should we place a dialog here. There was one, but that is excessive.
 			ProjectReference referenceInformation = (ProjectReference)UserData;
-		
 			Project.ProjectReferences.Remove(referenceInformation);
-			
 			return true;
 		}
 	}

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/NodeBuilder/DefaultDotNetNodeBuilder.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/NodeBuilder/DefaultDotNetNodeBuilder.cs	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/NodeBuilder/DefaultDotNetNodeBuilder.cs	2004-07-04 19:06:25 UTC (rev 1891)
@@ -5,8 +5,6 @@
 //     &lt;version value=&quot;$version&quot;/&gt;
 // &lt;/file&gt;
 
-//FIXME: All the commented out GetBitmap's need to be changed to use Pixbuf's
-
 using System;
 using System.IO;
 using System.Diagnostics;
@@ -16,12 +14,10 @@
 using System.Collections.Utility;
 
 using MonoDevelop.Core.Properties;
-
 using MonoDevelop.Core.Services;
 using MonoDevelop.Internal.Project;
 using MonoDevelop.Gui.Widgets;
 using Stock = MonoDevelop.Gui.Stock;
-
 using MonoDevelop.Services;
 
 namespace MonoDevelop.Gui.Pads.ProjectBrowser

Modified: trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/ProjectBrowserView.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/ProjectBrowserView.cs	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/Gui/Pads/ProjectBrowser/ProjectBrowserView.cs	2004-07-04 19:06:25 UTC (rev 1891)
@@ -38,8 +38,8 @@
 
 		public static Font PlainFont = null;
 		Font               boldFont  = null;
-		//Panel contentPanel = new Panel();
 		Gtk.Frame contentPanel = new Gtk.Frame();
+
 		static FileUtilityService fileUtilityService = (FileUtilityService)ServiceManager.GetService(typeof(FileUtilityService));
 		static PropertyService propertyService = (PropertyService)ServiceManager.GetService(typeof(PropertyService));
 

Modified: trunk/MonoDevelop/Core/src/Main/Base/Internal/Project/Project/IncludeFilesDialog.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Internal/Project/Project/IncludeFilesDialog.cs	2004-07-04 06:26:27 UTC (rev 1890)
+++ trunk/MonoDevelop/Core/src/Main/Base/Internal/Project/Project/IncludeFilesDialog.cs	2004-07-04 19:06:25 UTC (rev 1891)
@@ -9,11 +9,10 @@
 using System.Collections;
 using System.Collections.Specialized;
 using System.ComponentModel;
-using MonoDevelop.Core.Properties;
 
+using MonoDevelop.Core.Properties;
 using MonoDevelop.Core.Services;
 using MonoDevelop.Services;
-
 using MonoDevelop.Gui;
 using MonoDevelop.Internal.Project;
 
@@ -21,9 +20,6 @@
 
 namespace MonoDevelop.Internal.Project
 {
-	/// &lt;summary&gt;
-	/// Summary description for Form1.
-	/// &lt;/summary&gt;
 	public class IncludeFilesDialog
 	{
 		// gtk widgets
@@ -46,12 +42,12 @@
 		
 		public IncludeFilesDialog(IProject project, StringCollection newFiles)
 		{
+			Console.WriteLine (&quot;*** Include files dialog ***&quot;);
 			// we must do it from *here* otherwise, we get this assembly, not the caller
 			Glade.XML glade = new Glade.XML (null, &quot;Base.glade&quot;, &quot;IncludeFilesDialogWidget&quot;, null);
 			glade.Autoconnect (this);
 			
 			// set up dialog title
-			StringParserService stringParserService = (StringParserService)ServiceManager.GetService(typeof(StringParserService));
 			this.IncludeFilesDialogWidget.Title = String.Format (GettextCatalog.GetString (&quot;Found new files in {0}&quot;), project.Name);
 			
 			newFilesOnlyRadioButton.Active = true;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001497.html">[Monodevelop-patches-list] r1890 - trunk/MonoDevelop/Core/src/Main/Base
</A></li>
	<LI>Next message: <A HREF="001499.html">[Monodevelop-patches-list] r1892 - in trunk/MonoDevelop/Core/src/AddIns/BackendBindings/CSharpBinding: . Gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1498">[ date ]</a>
              <a href="thread.html#1498">[ thread ]</a>
              <a href="subject.html#1498">[ subject ]</a>
              <a href="author.html#1498">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
