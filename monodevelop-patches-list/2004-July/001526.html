<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r1919 - in branches: . MonoDevelop-plan-43 MonoDevelop-plan-43/build MonoDevelop-plan-43/build/bin MonoDevelop-plan-43/build/lib MonoDevelop-plan-43/build/lib/monodevelop MonoDevelop-plan-43/build/share MonoDevelop-plan-43/build/share/monodevelop MonoDevelop-plan-43/build/share/monodevelop/ui MonoDevelop-plan-43/src MonoDevelop-plan-43/src/Content MonoDevelop-plan-43/src/Core MonoDevelop-plan-43/src/Editor MonoDevelop-plan-43/src/Node MonoDevelop-plan-43/src/Workbench
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1919%20-%20in%20branches%3A%20.%20MonoDevelop-plan-43%20MonoDevelop-plan-43/build%20MonoDevelop-plan-43/build/bin%20MonoDevelop-plan-43/build/lib%20MonoDevelop-plan-43/build/lib/monodevelop%20MonoDevelop-plan-43/build/share%20MonoDevelop-plan-43/build/share/monodevelop%20MonoDevelop-plan-43/build/share/monodevelop/ui%20MonoDevelop-plan-43/src%20MonoDevelop-plan-43/src/Content%20MonoDevelop-plan-43/src/Core%20MonoDevelop-plan-43/src/Editor%20MonoDevelop-plan-43/src/Node%20MonoDevelop-plan-43/src/Workbench&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001525.html">
   <LINK REL="Next"  HREF="001527.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r1919 - in branches: . MonoDevelop-plan-43 MonoDevelop-plan-43/build MonoDevelop-plan-43/build/bin MonoDevelop-plan-43/build/lib MonoDevelop-plan-43/build/lib/monodevelop MonoDevelop-plan-43/build/share MonoDevelop-plan-43/build/share/monodevelop MonoDevelop-plan-43/build/share/monodevelop/ui MonoDevelop-plan-43/src MonoDevelop-plan-43/src/Content MonoDevelop-plan-43/src/Core MonoDevelop-plan-43/src/Editor MonoDevelop-plan-43/src/Node MonoDevelop-plan-43/src/Workbench</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1919%20-%20in%20branches%3A%20.%20MonoDevelop-plan-43%20MonoDevelop-plan-43/build%20MonoDevelop-plan-43/build/bin%20MonoDevelop-plan-43/build/lib%20MonoDevelop-plan-43/build/lib/monodevelop%20MonoDevelop-plan-43/build/share%20MonoDevelop-plan-43/build/share/monodevelop%20MonoDevelop-plan-43/build/share/monodevelop/ui%20MonoDevelop-plan-43/src%20MonoDevelop-plan-43/src/Content%20MonoDevelop-plan-43/src/Core%20MonoDevelop-plan-43/src/Editor%20MonoDevelop-plan-43/src/Node%20MonoDevelop-plan-43/src/Workbench&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r1919 - in branches: . MonoDevelop-plan-43 MonoDevelop-plan-43/build MonoDevelop-plan-43/build/bin MonoDevelop-plan-43/build/lib MonoDevelop-plan-43/build/lib/monodevelop MonoDevelop-plan-43/build/share MonoDevelop-plan-43/build/share/monodevelop MonoDevelop-plan-43/build/share/monodevelop/ui MonoDevelop-plan-43/src MonoDevelop-plan-43/src/Content MonoDevelop-plan-43/src/Core MonoDevelop-plan-43/src/Editor MonoDevelop-plan-43/src/Node MonoDevelop-plan-43/src/Workbench">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Tue Jul 27 13:19:59 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001525.html">[Monodevelop-patches-list] r1918 - trunk/MonoDevelop/Core/src/Libraries/Gdl
</A></li>
        <LI>Next message: <A HREF="001527.html">[Monodevelop-patches-list] r1920 - trunk/md-website/tutorials
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1526">[ date ]</a>
              <a href="thread.html#1526">[ thread ]</a>
              <a href="subject.html#1526">[ subject ]</a>
              <a href="author.html#1526">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-07-27 13:19:59 -0400 (Tue, 27 Jul 2004)
New Revision: 1919

Added:
   branches/MonoDevelop-plan-43/
   branches/MonoDevelop-plan-43/build/
   branches/MonoDevelop-plan-43/build/bin/
   branches/MonoDevelop-plan-43/build/bin/gdl-sharp.dll
   branches/MonoDevelop-plan-43/build/bin/gdl-sharp.dll.config
   branches/MonoDevelop-plan-43/build/bin/monodevelop.exe
   branches/MonoDevelop-plan-43/build/bin/monodevelop.exe.config
   branches/MonoDevelop-plan-43/build/bin/stock-close-12.png
   branches/MonoDevelop-plan-43/build/bin/stock-menu-left-12.png
   branches/MonoDevelop-plan-43/build/bin/stock-menu-right-12.png
   branches/MonoDevelop-plan-43/build/lib/
   branches/MonoDevelop-plan-43/build/lib/gdl-sharp.dll
   branches/MonoDevelop-plan-43/build/lib/gdl-sharp.dll.config
   branches/MonoDevelop-plan-43/build/lib/log4net.dll
   branches/MonoDevelop-plan-43/build/lib/monodevelop/
   branches/MonoDevelop-plan-43/build/lib/monodevelop/content.dll
   branches/MonoDevelop-plan-43/build/lib/monodevelop/content.plugin
   branches/MonoDevelop-plan-43/build/lib/monodevelop/editor.dll
   branches/MonoDevelop-plan-43/build/lib/monodevelop/editor.plugin
   branches/MonoDevelop-plan-43/build/lib/monodevelop/node.dll
   branches/MonoDevelop-plan-43/build/lib/monodevelop/node.plugin
   branches/MonoDevelop-plan-43/build/lib/monodevelop/workbench.dll
   branches/MonoDevelop-plan-43/build/lib/monodevelop/workbench.plugin
   branches/MonoDevelop-plan-43/build/share/
   branches/MonoDevelop-plan-43/build/share/monodevelop/
   branches/MonoDevelop-plan-43/build/share/monodevelop/ui/
   branches/MonoDevelop-plan-43/build/share/monodevelop/ui/content.ui
   branches/MonoDevelop-plan-43/build/share/monodevelop/ui/editor.ui
   branches/MonoDevelop-plan-43/build/share/monodevelop/ui/workbench.ui
   branches/MonoDevelop-plan-43/default.build
   branches/MonoDevelop-plan-43/src/
   branches/MonoDevelop-plan-43/src/Content/
   branches/MonoDevelop-plan-43/src/Content/ContentManager.cs
   branches/MonoDevelop-plan-43/src/Content/ContentManagerWidgetFactory.cs
   branches/MonoDevelop-plan-43/src/Content/ContentView.cs
   branches/MonoDevelop-plan-43/src/Content/INodeViewer.cs
   branches/MonoDevelop-plan-43/src/Content/INodeViewerFactory.cs
   branches/MonoDevelop-plan-43/src/Content/content.build
   branches/MonoDevelop-plan-43/src/Content/content.plugin.in
   branches/MonoDevelop-plan-43/src/Content/content.ui
   branches/MonoDevelop-plan-43/src/Core/
   branches/MonoDevelop-plan-43/src/Core/AssemblyInfo.cs
   branches/MonoDevelop-plan-43/src/Core/ICommand.cs
   branches/MonoDevelop-plan-43/src/Core/MonoDevelop.cs
   branches/MonoDevelop-plan-43/src/Core/core.build
   branches/MonoDevelop-plan-43/src/Core/monodevelop.exe.config.in
   branches/MonoDevelop-plan-43/src/Editor/
   branches/MonoDevelop-plan-43/src/Editor/EditorNodeViewer.cs
   branches/MonoDevelop-plan-43/src/Editor/EditorNodeViewerFactory.cs
   branches/MonoDevelop-plan-43/src/Editor/editor.build
   branches/MonoDevelop-plan-43/src/Editor/editor.plugin.in
   branches/MonoDevelop-plan-43/src/Editor/editor.ui
   branches/MonoDevelop-plan-43/src/Node/
   branches/MonoDevelop-plan-43/src/Node/Buffer.cs
   branches/MonoDevelop-plan-43/src/Node/FileNode.cs
   branches/MonoDevelop-plan-43/src/Node/Node.cs
   branches/MonoDevelop-plan-43/src/Node/Project.cs
   branches/MonoDevelop-plan-43/src/Node/TextFileNode.cs
   branches/MonoDevelop-plan-43/src/Node/node.build
   branches/MonoDevelop-plan-43/src/Node/node.plugin.in
   branches/MonoDevelop-plan-43/src/Workbench/
   branches/MonoDevelop-plan-43/src/Workbench/IWorkbenchWidgetFactory.cs
   branches/MonoDevelop-plan-43/src/Workbench/Workbench.cs
   branches/MonoDevelop-plan-43/src/Workbench/WorkbenchCommand.cs
   branches/MonoDevelop-plan-43/src/Workbench/workbench.build
   branches/MonoDevelop-plan-43/src/Workbench/workbench.plugin.in
   branches/MonoDevelop-plan-43/src/Workbench/workbench.ui
   branches/MonoDevelop-plan-43/src/plugins.build
Log:
some stuff from jeroen. if you have beef with this. email me.


Added: branches/MonoDevelop-plan-43/build/bin/gdl-sharp.dll
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/bin/gdl-sharp.dll
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/bin/gdl-sharp.dll.config
===================================================================
--- branches/MonoDevelop-plan-43/build/bin/gdl-sharp.dll.config	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/build/bin/gdl-sharp.dll.config	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,6 @@
+&lt;configuration&gt;
+  &lt;dllmap dll=&quot;libglib-2.0-0.dll&quot; target=&quot;libglib-2.0.so.0&quot;/&gt;
+  &lt;dllmap dll=&quot;libgobject-2.0-0.dll&quot; target=&quot;libgobject-2.0.so.0&quot;/&gt;
+  &lt;dllmap dll=&quot;libatk-1.0-0.dll&quot; target=&quot;libatk-1.0.so.0&quot;/&gt;
+  &lt;dllmap dll=&quot;libgtk-win32-2.0-0.dll&quot; target=&quot;libgtk-x11-2.0.so.0&quot;/&gt;
+&lt;/configuration&gt;

Added: branches/MonoDevelop-plan-43/build/bin/monodevelop.exe
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/bin/monodevelop.exe
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/bin/monodevelop.exe.config
===================================================================
--- branches/MonoDevelop-plan-43/build/bin/monodevelop.exe.config	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/build/bin/monodevelop.exe.config	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,23 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
+&lt;configuration&gt;
+	&lt;appSettings&gt;
+		&lt;add key=&quot;imagePath&quot; value=&quot;@monodevelop_images_dir@&quot;/&gt;
+		&lt;add key=&quot;pluginPath&quot; value=&quot;/home/jeroen/Projects/monodevelop/build/lib/monodevelop&quot;/&gt;
+		&lt;add key=&quot;resourcePath&quot; value=&quot;@monodevelop_resource_dir@&quot;/&gt;
+		&lt;add key=&quot;uiPath&quot; value=&quot;/home/jeroen/Projects/monodevelop/build/share/monodevelop/ui&quot;/&gt;
+	&lt;/appSettings&gt;
+	&lt;configSections&gt;
+		&lt;section name=&quot;log4net&quot; type=&quot;log4net.Config.Log4NetConfigurationSectionHandler, log4net&quot;/&gt;
+	&lt;/configSections&gt;
+	&lt;log4net&gt;
+		&lt;appender name=&quot;ConsoleAppender&quot; type=&quot;log4net.Appender.ConsoleAppender&quot;&gt;
+			&lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;
+				&lt;param name=&quot;ConversionPattern&quot; value=&quot;%-5p - %m%n&quot;/&gt;
+			&lt;/layout&gt;
+		&lt;/appender&gt;
+		&lt;root&gt;
+			&lt;level value=&quot;ALL&quot;/&gt;
+			&lt;appender-ref ref=&quot;ConsoleAppender&quot;/&gt;
+		&lt;/root&gt;
+	&lt;/log4net&gt;
+&lt;/configuration&gt;

Added: branches/MonoDevelop-plan-43/build/bin/stock-close-12.png
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/bin/stock-close-12.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/bin/stock-menu-left-12.png
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/bin/stock-menu-left-12.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/bin/stock-menu-right-12.png
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/bin/stock-menu-right-12.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/lib/gdl-sharp.dll
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/lib/gdl-sharp.dll
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/lib/gdl-sharp.dll.config
===================================================================
--- branches/MonoDevelop-plan-43/build/lib/gdl-sharp.dll.config	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/build/lib/gdl-sharp.dll.config	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,6 @@
+&lt;configuration&gt;
+  &lt;dllmap dll=&quot;libglib-2.0-0.dll&quot; target=&quot;libglib-2.0.so.0&quot;/&gt;
+  &lt;dllmap dll=&quot;libgobject-2.0-0.dll&quot; target=&quot;libgobject-2.0.so.0&quot;/&gt;
+  &lt;dllmap dll=&quot;libatk-1.0-0.dll&quot; target=&quot;libatk-1.0.so.0&quot;/&gt;
+  &lt;dllmap dll=&quot;libgtk-win32-2.0-0.dll&quot; target=&quot;libgtk-x11-2.0.so.0&quot;/&gt;
+&lt;/configuration&gt;

Added: branches/MonoDevelop-plan-43/build/lib/log4net.dll
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/lib/log4net.dll
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/lib/monodevelop/content.dll
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/lib/monodevelop/content.dll
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/lib/monodevelop/content.plugin
===================================================================
--- branches/MonoDevelop-plan-43/build/lib/monodevelop/content.plugin	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/build/lib/monodevelop/content.plugin	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,5 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;plugin version=&quot;1.0&quot;&gt;
+	&lt;assembly&gt;/home/jeroen/Projects/monodevelop/build/lib/monodevelop/content.dll&lt;/assembly&gt;
+	&lt;class name=&quot;MonoDevelop.Content.ContentManager&quot;/&gt;
+&lt;/plugin&gt;

Added: branches/MonoDevelop-plan-43/build/lib/monodevelop/editor.dll
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/lib/monodevelop/editor.dll
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/lib/monodevelop/editor.plugin
===================================================================
--- branches/MonoDevelop-plan-43/build/lib/monodevelop/editor.plugin	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/build/lib/monodevelop/editor.plugin	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,5 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;plugin version=&quot;1.0&quot;&gt;
+	&lt;assembly&gt;/home/jeroen/Projects/monodevelop/build/lib/monodevelop/editor.dll&lt;/assembly&gt;
+	&lt;class name=&quot;MonoDevelop.Editor.EditorNodeViewer&quot;/&gt;
+&lt;/plugin&gt;

Added: branches/MonoDevelop-plan-43/build/lib/monodevelop/node.dll
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/lib/monodevelop/node.dll
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/lib/monodevelop/node.plugin
===================================================================
--- branches/MonoDevelop-plan-43/build/lib/monodevelop/node.plugin	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/build/lib/monodevelop/node.plugin	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,5 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;plugin version=&quot;1.0&quot;&gt;
+	&lt;assembly&gt;/home/jeroen/Projects/monodevelop/build/lib/monodevelop/node.dll&lt;/assembly&gt;
+	&lt;class name=&quot;MonoDevelop.Node.Node&quot;/&gt;
+&lt;/plugin&gt;

Added: branches/MonoDevelop-plan-43/build/lib/monodevelop/workbench.dll
===================================================================
(Binary files differ)


Property changes on: branches/MonoDevelop-plan-43/build/lib/monodevelop/workbench.dll
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: branches/MonoDevelop-plan-43/build/lib/monodevelop/workbench.plugin
===================================================================
--- branches/MonoDevelop-plan-43/build/lib/monodevelop/workbench.plugin	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/build/lib/monodevelop/workbench.plugin	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,5 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;plugin version=&quot;1.0&quot;&gt;
+	&lt;assembly&gt;/home/jeroen/Projects/monodevelop/build/lib/monodevelop/workbench.dll&lt;/assembly&gt;
+	&lt;class name=&quot;MonoDevelop.Workbench.Workbench&quot;/&gt;
+&lt;/plugin&gt;

Added: branches/MonoDevelop-plan-43/build/share/monodevelop/ui/content.ui
===================================================================
--- branches/MonoDevelop-plan-43/build/share/monodevelop/ui/content.ui	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/build/share/monodevelop/ui/content.ui	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,13 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;menubar&gt;
+	&lt;menu name=&quot;FileMenu&quot; action=&quot;FileMenuAction&quot;&gt;
+		&lt;placeholder name=&quot;FileOpenPlaceholder&quot;&gt;
+			&lt;menuitem name=&quot;FileOpen&quot; action=&quot;FileOpenAction&quot;/&gt;
+		&lt;/placeholder&gt;
+	&lt;/menu&gt;
+&lt;/menubar&gt;
+&lt;toolbar name=&quot;toolbar&quot;&gt;
+	&lt;placeholder name=&quot;FileOpenPlaceholder&quot;&gt;
+		&lt;toolitem name=&quot;FileOpenButton&quot; action=&quot;FileOpenAction&quot;/&gt;
+	&lt;/placeholder&gt;
+&lt;/toolbar&gt;

Added: branches/MonoDevelop-plan-43/build/share/monodevelop/ui/editor.ui
===================================================================
--- branches/MonoDevelop-plan-43/build/share/monodevelop/ui/editor.ui	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/build/share/monodevelop/ui/editor.ui	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,24 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;menubar&gt;
+	&lt;menu name=&quot;EditMenu&quot; action=&quot;EditMenuAction&quot;&gt;
+		&lt;placeholder name=&quot;EditEditorPlaceholder&quot;&gt;
+			&lt;menuitem name=&quot;EditUndo&quot; action=&quot;EditUndoAction&quot;/&gt;
+			&lt;menuitem name=&quot;EditRedo&quot; action=&quot;EditRedoAction&quot;/&gt;
+			&lt;separator/&gt;
+			&lt;menuitem name=&quot;EditCut&quot; action=&quot;EditCutAction&quot;/&gt;
+			&lt;menuitem name=&quot;EditCopy&quot; action=&quot;EditCopyAction&quot;/&gt;
+			&lt;menuitem name=&quot;EditPaste&quot; action=&quot;EditPasteAction&quot;/&gt;
+			&lt;menuitem name=&quot;EditDelete&quot; action=&quot;EditDeleteAction&quot;/&gt;
+			&lt;separator/&gt;
+			&lt;menuitem name=&quot;EditSelectAll&quot; action=&quot;EditSelectAllaction&quot;/&gt;
+		&lt;/placeholder&gt;
+	&lt;/menu&gt;
+&lt;/menubar&gt;
+&lt;toolbar name=&quot;toolbar&quot;&gt;
+	&lt;toolitem name=&quot;EditUndo&quot; action=&quot;EditUndoAction&quot;/&gt;
+	&lt;toolitem name=&quot;EditRedo&quot; action=&quot;EditRedoAction&quot;/&gt;
+	&lt;separator/&gt;
+	&lt;toolitem name=&quot;EditCut&quot; action=&quot;EditCutAction&quot;/&gt;
+	&lt;toolitem name=&quot;EditCopy&quot; action=&quot;EditCopyAction&quot;/&gt;
+	&lt;toolitem name=&quot;EditPaste&quot; action=&quot;EditPasteAction&quot;/&gt;
+&lt;/toolbar&gt;

Added: branches/MonoDevelop-plan-43/build/share/monodevelop/ui/workbench.ui
===================================================================
--- branches/MonoDevelop-plan-43/build/share/monodevelop/ui/workbench.ui	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/build/share/monodevelop/ui/workbench.ui	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,53 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;menubar&gt;
+	&lt;menu name=&quot;FileMenu&quot; action=&quot;FileMenuAction&quot;&gt;
+		&lt;placeholder name=&quot;FileOpenPlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileOpenProjectPlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileImportProjectPlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileRecentFilesPlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileSavePlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileClosePlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileCloseProject&quot;/&gt;
+		&lt;placeholder name=&quot;FilePrintPlaceholder&quot; position=&quot;top&quot;/&gt;
+		&lt;separator/&gt;
+		&lt;menuitem name=&quot;FileCloseWindow&quot; action=&quot;CloseWindowAction&quot;/&gt;
+		&lt;menuitem name=&quot;FileQuit&quot; action=&quot;QuitAction&quot;/&gt;
+	&lt;/menu&gt;
+	
+	&lt;menu name=&quot;EditMenu&quot; action=&quot;EditMenuAction&quot;&gt;
+		&lt;placeholder name=&quot;EditEditorPlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;EditPluginPlaceholder&quot; position=&quot;top&quot;/&gt;
+		&lt;placeholder name=&quot;EditPreferencesPlaceholder&quot; position=&quot;top&quot;/&gt;
+	&lt;/menu&gt;
+	
+	&lt;menu name=&quot;ViewMenu&quot; action=&quot;ViewMenuAction&quot;&gt;
+	&lt;/menu&gt;
+	
+	&lt;placeholder name=&quot;SearchMenuPlaceholder&quot;/&gt;
+
+	&lt;placeholder name=&quot;ProjectMenuPlaceholder&quot;/&gt;
+
+	&lt;placeholder name=&quot;RunMenuPlaceholder&quot;/&gt;
+	
+	&lt;placeholder name=&quot;ToolsMenuPlaceholder&quot;/&gt;
+
+	&lt;menu name=&quot;WindowMenu&quot; action=&quot;WindowMenuAction&quot;&gt;
+		&lt;menuitem name=&quot;WindowNew&quot; action=&quot;NewWindowAction&quot;/&gt;
+		&lt;separator/&gt;
+		&lt;menuitem name=&quot;WindowSaveLayout&quot; action=&quot;SaveLayoutAction&quot;/&gt;
+		&lt;separator/&gt;
+		&lt;menu name=&quot;WindowLayouts&quot; action=&quot;LayoutsAction&quot;&gt;
+			&lt;placeholder name=&quot;Layouts&quot;/&gt;
+		&lt;/menu&gt;
+	&lt;/menu&gt;
+	
+	&lt;menu name=&quot;HelpMenu&quot; action=&quot;HelpMenuAction&quot;&gt;
+		&lt;placeholder name=&quot;HelpOps&quot;/&gt;
+		&lt;placeholder name=&quot;HelpPlugins&quot;/&gt;
+		&lt;menuitem name=&quot;HelpAbout&quot; action=&quot;AboutAction&quot;/&gt;
+	&lt;/menu&gt;
+&lt;/menubar&gt;
+&lt;toolbar name=&quot;toolbar&quot;&gt;
+	&lt;placeholder name=&quot;FileOpenPlaceholder&quot;/&gt;
+	&lt;toolitem name=&quot;QuitButton&quot; action=&quot;QuitAction&quot;/&gt;
+&lt;/toolbar&gt;

Added: branches/MonoDevelop-plan-43/default.build
===================================================================
--- branches/MonoDevelop-plan-43/default.build	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/default.build	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,41 @@
+&lt;?xml version=&quot;1.0&quot;?&gt;
+&lt;project name=&quot;monodevelop&quot; default=&quot;build&quot;&gt;
+    &lt;!-- global project settings --&gt;
+    &lt;property name=&quot;basedir&quot; value=&quot;${nant.project.basedir}&quot;/&gt;
+    &lt;property name=&quot;project.name&quot; value=&quot;monodevelop&quot;/&gt;
+    &lt;property name=&quot;project.version&quot; value=&quot;0.1&quot; overwrite=&quot;false&quot;/&gt;
+    &lt;!-- global build settings --&gt;
+    &lt;property name=&quot;build.debug&quot; value=&quot;true&quot;/&gt;
+    &lt;property name=&quot;build.dir&quot; value=&quot;${path::combine(basedir, 'build')}&quot;/&gt;
+    &lt;property name=&quot;bin.dir&quot; value=&quot;${path::combine(build.dir, 'bin')}&quot;/&gt;
+    &lt;property name=&quot;lib.dir&quot; value=&quot;${path::combine(build.dir, 'lib')}&quot;/&gt;
+    &lt;property name=&quot;share.dir&quot; value=&quot;${path::combine(build.dir, 'share/monodevelop')}&quot;/&gt;
+
+    &lt;!-- cleanup build files --&gt;
+    &lt;target name=&quot;clean&quot; description=&quot;remove all files created by the build task&quot;&gt;
+        &lt;!-- clean up plugin build files --&gt;
+        &lt;nant buildfile=&quot;src/plugins.build&quot; target=&quot;clean&quot;/&gt;
+        &lt;!-- clean up monodevelop build files --&gt;
+        &lt;nant buildfile=&quot;src/Core/core.build&quot; target=&quot;clean&quot;/&gt;
+        &lt;!-- remove the build directory --&gt;
+        &lt;delete dir=&quot;${build.dir}&quot; failonerror=&quot;false&quot;/&gt;
+    &lt;/target&gt;
+
+    &lt;!-- build the project --&gt;
+    &lt;target name=&quot;build&quot; description=&quot;compiles the source code&quot;&gt;
+        &lt;!-- create directories --&gt;
+        &lt;mkdir dir=&quot;${build.dir}&quot;/&gt;
+        &lt;mkdir dir=&quot;${bin.dir}&quot;/&gt;
+        &lt;mkdir dir=&quot;${lib.dir}&quot;/&gt;
+        &lt;mkdir dir=&quot;${share.dir}&quot;/&gt;
+        &lt;!-- build monodevelop.exe --&gt;
+        &lt;nant buildfile=&quot;src/Core/core.build&quot; target=&quot;build&quot;/&gt;
+        &lt;!-- build the plugins --&gt;
+        &lt;nant buildfile=&quot;src/plugins.build&quot; target=&quot;build&quot;/&gt;
+    &lt;/target&gt;
+    
+    &lt;!-- run MonoDevelop --&gt;
+    &lt;target name=&quot;run&quot; depends=&quot;build&quot; description=&quot;run the program&quot;&gt;
+        &lt;exec program=&quot;mono&quot; commandline=&quot;${path::combine(bin.dir, 'monodevelop.exe')}&quot; workingdir=&quot;${bin.dir}&quot;/&gt;
+    &lt;/target&gt;
+&lt;/project&gt;

Added: branches/MonoDevelop-plan-43/src/Content/ContentManager.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Content/ContentManager.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Content/ContentManager.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,126 @@
+//
+// ContentManager.cs: ContentManager (one instance per Workbench window) manages 
+// the display of open files in the Content Pane by providing one tab per file,
+// where each tab represents a ContentView that in turn uses one or more
+// NodeViewers to display the file content.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+using System.Collections;
+using System.Reflection;
+using Gtk;
+using Gnome.Vfs;
+using log4net;
+using MonoDevelop.Node;
+using MonoDevelop.Workbench;
+
+namespace MonoDevelop.Content {
+	public class ContentManager : Notebook {
+		private static readonly ILog log = LogManager.GetLogger (typeof (ContentManager));
+		private static ArrayList factories = new ArrayList ();
+
+		public ContentManager ()
+		{
+			AddActions ();
+		}
+		
+		private void AddActions ()
+		{
+			ActionGroup group = new ActionGroup (&quot;ContentManager&quot;);
+			Action action;
+			
+			action = new Action (&quot;FileOpenAction&quot;, &quot;_Open...&quot;,
+					     &quot;Open a file&quot;, Gtk.Stock.Open);
+			action.Activated += new EventHandler (OnFileOpen);
+			group.Add (action);
+		
+			Workbench.Workbench.AddActionGroup (group);
+			Workbench.Workbench.AddUiFromFile (&quot;content.ui&quot;);
+		}
+
+		////////////////////////////////////////////////////////////////////////
+		// Event handlers
+		////////////////////////////////////////////////////////////////////////
+
+		private void OnFileOpen (object obj, EventArgs e)
+		{
+			// Ask the user which file to open.
+			FileChooserDialog fcd = new FileChooserDialog (&quot;Open File&quot;,
+								       (Window)Workbench.Workbench.ActiveWorkbench,
+								       FileChooserAction.Open,
+								       &quot;gnome-vfs&quot;);
+			fcd.AddButton (Stock.Cancel, ResponseType.Cancel);
+			fcd.AddButton (Stock.Open, ResponseType.Ok);
+			fcd.DefaultResponse = ResponseType.Ok;
+			int resp = fcd.Run ();
+			fcd.Hide ();
+			
+			if (resp != (int)ResponseType.Ok)
+				return;
+
+			string mimetype = Mime.GetMimeType (fcd.Filename);
+			log.Debug (&quot;Mimetype for &quot; + fcd.Filename + &quot; is &quot; + mimetype);
+
+			// Find a FileNode Type for the specified mimetype.
+			FileNodeEntry entry = FileNode.FindFileNodeType (mimetype);
+			if (entry == null) {
+				log.Debug (&quot;No matching FileNode found for mimetype \&quot;&quot; + mimetype + &quot;\&quot;&quot;);
+				return;
+			}
+
+			// Create a new FileNode for the specified file.
+			log.Debug (&quot;Found FileNode type: &quot; + entry.Type);
+			Type[] types = new Type[3];
+			types[0] = typeof (Project);
+			types[1] = typeof (Node);
+			types[2] = typeof (string);
+			ConstructorInfo ci = entry.Type.GetConstructor (BindingFlags.Instance | BindingFlags.Public,
+									null, CallingConventions.HasThis,
+									types, null);
+			object[] args = new object[3];
+			args[0] = null;
+			args[1] = null;
+			args[2] = fcd.Filename;
+			FileNode fn = (FileNode)ci.Invoke (args);
+			
+			// Find a suitable INodeViewer which can display the file.
+			foreach (INodeViewerFactory factory in factories) {
+				if (factory.CanDisplayNode (fn)) {
+					log.Debug (&quot;&quot; + factory + &quot; can display node &quot; + fn);
+					INodeViewer viewer = factory.CreateNodeViewer (fn);
+					AppendPage (viewer.ViewerWidget, new Label (fn.DisplayName));
+					viewer.ViewerWidget.ShowAll ();
+					break;
+				}
+			}
+		}
+	
+		////////////////////////////////////////////////////////////////////////
+		// Static methods
+		////////////////////////////////////////////////////////////////////////
+	
+		public static void AddNodeViewerFactory (INodeViewerFactory factory)
+		{
+			factories.Add (factory);
+		}
+	
+		public static void RemoveNodeViewerFactory (INodeViewerFactory factory)
+		{
+			factories.Remove (factory);
+		}
+		
+		public static void InitializePlugin (byte major, byte minor)
+		{
+			Workbench.Workbench.AddWidgetFactory (new ContentManagerWidgetFactory ());
+		}
+		
+		public static void FinalizePlugin ()
+		{
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Content/ContentManagerWidgetFactory.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Content/ContentManagerWidgetFactory.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Content/ContentManagerWidgetFactory.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,48 @@
+//
+// ContentManagerWidgetFactory.cs: Factory for the ContentManager widget.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+using log4net;
+using Gtk;
+using MonoDevelop.Workbench;
+
+namespace MonoDevelop.Content {
+	class ContentManagerWidgetFactory : IWorkbenchWidgetFactory {
+		private static readonly ILog log = LogManager.GetLogger (typeof (ContentManagerWidgetFactory));
+	
+		public string WidgetName {
+			get {
+				return &quot;ContentPane&quot;;
+			}
+		}
+	
+		public string WidgetTitle {
+			get {
+				return &quot;Documents&quot;;
+			}
+		}
+		
+		public string WidgetIcon {
+			get {
+				return &quot;gtk-justify-fill&quot;;
+			}
+		}
+		
+		public bool Dockable {
+			get {
+				return true;
+			}
+		}
+	
+		public Widget CreateWidget (Workbench workbench)
+		{
+			return new ContentManager ();
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Content/ContentView.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Content/ContentView.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Content/ContentView.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,24 @@
+//
+// ContentView.cs: Browser widget which displays Node's in a Notebook.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+using Gtk;
+using log4net;
+
+namespace MonoDevelop.Content {
+	internal class ContentView : Gtk.Notebook {
+		private static readonly ILog log = LogManager.GetLogger (typeof (ContentView));
+		
+		public ContentView ()
+		{
+			InsertPage (new Label (&quot;Content&quot;), new Label (&quot;Header&quot;), 0);
+			InsertPage (new Label (&quot;Another Content&quot;), new Label (&quot;Header 2&quot;), 1);
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Content/INodeViewer.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Content/INodeViewer.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Content/INodeViewer.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,40 @@
+//
+// INodeViewer.cs: An implementation of the INodeViewer interface provides one 
+// view of the content for an open Node. The ContentManager creates ContentViews
+// for each open Node. The tabs at the top (or left if vertical orientation is
+// configured) of the ContentManager panel are for selecting a ContentView. 
+// Each ContentView uses tabs (at the bottom on its pane) for selecting among 
+// the available NodeViewer instances which can display the Node content.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using Gtk;
+using System;
+
+namespace MonoDevelop.Content {
+	public interface INodeViewer {
+		Widget StructureWidget {
+			get;
+		}
+	
+		Widget ViewerWidget {
+			get;
+		}
+	
+		string ViewerDescription {
+			get;
+		}
+	
+		string ViewerTitle {
+			get;
+		}
+	
+		Gdk.Pixbuf ViewerIcon {
+			get;
+		}	
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Content/INodeViewerFactory.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Content/INodeViewerFactory.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Content/INodeViewerFactory.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,23 @@
+//
+// INodeViewerFactory.cs: The INodeViewerFactory interface is used to implement a
+// factory that creates instances of NodeViewer as needed to display the content
+// of a given Node. Each NodeViewerFactory must register with Browser at
+// application startup.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2003
+//
+
+using Gtk;
+using System;
+using MonoDevelop.Node;
+
+namespace MonoDevelop.Content {
+	public interface INodeViewerFactory {
+		bool CanDisplayNode (Node node);
+		
+		INodeViewer CreateNodeViewer (Node node);
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Content/content.build
===================================================================
--- branches/MonoDevelop-plan-43/src/Content/content.build	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Content/content.build	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,29 @@
+&lt;?xml version=&quot;1.0&quot;?&gt;
+&lt;project name=&quot;monodevelop.plugins.content&quot; default=&quot;build&quot;&gt;
+    &lt;!-- build the project --&gt;
+    &lt;target name=&quot;build&quot; description=&quot;compiles the source code&quot;&gt;
+        &lt;property name=&quot;assemblyfile&quot; value=&quot;${path::combine(plugin.dir, 'content.dll')}&quot;/&gt;
+        &lt;csc target=&quot;library&quot; output=&quot;${assemblyfile}&quot; debug=&quot;${build.debug}&quot;&gt;
+            &lt;arg value=&quot;${gnome-sharp.libs}&quot;/&gt;
+            &lt;arg value=&quot;-r:/usr/lib/gnome-vfs-sharp.dll&quot;/&gt;
+            &lt;sources&gt;
+                &lt;include name=&quot;*.cs&quot;/&gt;
+            &lt;/sources&gt;
+            &lt;references basedir=&quot;${build.dir}&quot;&gt;
+                &lt;include name=&quot;bin/monodevelop.exe&quot;/&gt;
+                &lt;include name=&quot;lib/gdl-sharp.dll&quot;/&gt;
+                &lt;include name=&quot;lib/log4net.dll&quot;/&gt;
+                &lt;include name=&quot;lib/monodevelop/node.dll&quot;/&gt;
+                &lt;include name=&quot;lib/monodevelop/workbench.dll&quot;/&gt;
+            &lt;/references&gt;
+        &lt;/csc&gt;
+        
+        &lt;!-- install the plugin file --&gt;
+        &lt;copy file=&quot;content.plugin.in&quot; tofile=&quot;content.plugin&quot;/&gt;
+        &lt;replaceregex match=&quot;@assembly@&quot; replace=&quot;${assemblyfile}&quot; file=&quot;content.plugin&quot; byline=&quot;true&quot; /&gt;
+        &lt;move file=&quot;content.plugin&quot; todir=&quot;${plugin.dir}&quot;/&gt;
+        
+        &lt;!-- install the ui file --&gt;
+        &lt;copy file=&quot;content.ui&quot; todir=&quot;${ui.dir}&quot;/&gt;
+    &lt;/target&gt;
+&lt;/project&gt;

Added: branches/MonoDevelop-plan-43/src/Content/content.plugin.in
===================================================================
--- branches/MonoDevelop-plan-43/src/Content/content.plugin.in	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Content/content.plugin.in	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,5 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;plugin version=&quot;1.0&quot;&gt;
+	&lt;assembly&gt;@assembly@&lt;/assembly&gt;
+	&lt;class name=&quot;MonoDevelop.Content.ContentManager&quot;/&gt;
+&lt;/plugin&gt;

Added: branches/MonoDevelop-plan-43/src/Content/content.ui
===================================================================
--- branches/MonoDevelop-plan-43/src/Content/content.ui	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Content/content.ui	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,13 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;menubar&gt;
+	&lt;menu name=&quot;FileMenu&quot; action=&quot;FileMenuAction&quot;&gt;
+		&lt;placeholder name=&quot;FileOpenPlaceholder&quot;&gt;
+			&lt;menuitem name=&quot;FileOpen&quot; action=&quot;FileOpenAction&quot;/&gt;
+		&lt;/placeholder&gt;
+	&lt;/menu&gt;
+&lt;/menubar&gt;
+&lt;toolbar name=&quot;toolbar&quot;&gt;
+	&lt;placeholder name=&quot;FileOpenPlaceholder&quot;&gt;
+		&lt;toolitem name=&quot;FileOpenButton&quot; action=&quot;FileOpenAction&quot;/&gt;
+	&lt;/placeholder&gt;
+&lt;/toolbar&gt;

Added: branches/MonoDevelop-plan-43/src/Core/AssemblyInfo.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Core/AssemblyInfo.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Core/AssemblyInfo.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,23 @@
+// &lt;file&gt;
+//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
+//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
+//     &lt;owner name=&quot;Mike Krger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
+//     &lt;version value=&quot;$version&quot;/&gt;
+// &lt;/file&gt;
+
+using System.Reflection;
+using System.Runtime.CompilerServices;
+
+[assembly: AssemblyTitle(&quot;MonoDevelop&quot;)]
+[assembly: AssemblyDescription(&quot;free C# IDE&quot;)]
+[assembly: AssemblyConfiguration(&quot;&quot;)]
+[assembly: AssemblyCompany(&quot;&quot;)]
+[assembly: AssemblyProduct(&quot;MonoDevelop&quot;)]
+[assembly: AssemblyCopyright(&quot;Mike Krueger 2000&quot;)]
+[assembly: AssemblyTrademark(&quot;&quot;)]
+[assembly: AssemblyCulture(&quot;&quot;)]
+
+[assembly: AssemblyVersion(&quot;0.1.0.0&quot;)]
+
+[assembly: AssemblyDelaySign(false)]
+[assembly: AssemblyKeyFile(&quot;&quot;)] // ..\\src\\SharpDevelop\\sharpdevelop.key

Added: branches/MonoDevelop-plan-43/src/Core/ICommand.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Core/ICommand.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Core/ICommand.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,24 @@
+//
+// ICommand.cs: Interface for handling command-line parameters.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+
+namespace MonoDevelop {
+	public interface ICommand {
+		string CommandDescription {
+			get;
+		}
+	
+		bool TakesCommandArguments {
+			get;
+		}
+	
+		void InvokeCommand (string[] args);
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Core/MonoDevelop.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Core/MonoDevelop.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Core/MonoDevelop.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,404 @@
+// MonoDevelop - A .NET Integrated Development Environment
+// Copyright (C) 2004 Jeroen Zwartepoorte
+//
+// This program is free software; you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation; either version 2 of the License, or
+// (at your option) any later version.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+//
+// Jeroen Zwartepoorte (<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>)
+
+using System;
+using System.Collections;
+using System.Configuration;
+using System.IO;
+using System.Reflection;
+using System.Xml;
+
+using log4net;
+using log4net.Config;
+
+// Configure log4net using the .config file.
+[assembly: log4net.Config.DOMConfigurator(Watch=true)]
+namespace MonoDevelop {
+	class Plugin {
+		private string assembly;
+		private string name;
+		private ArrayList dependencies;
+		private int resolvePass;
+		private int discovered;
+		private int finished;
+		private MethodInfo finalizePlugin;
+	
+		public Plugin (string assembly, string name) {
+			this.assembly = assembly;
+			this.name = name;
+			dependencies = new ArrayList ();
+			resolvePass = -1;
+			discovered = -1;
+			finished = -1;
+			finalizePlugin = null;
+		}
+	
+		public string Assembly {
+			get {
+				return assembly;
+			}
+		}
+	
+		public string Name {
+			get {
+				return name;
+			}
+		}
+		
+		public ArrayList Dependencies {
+			get {
+				return dependencies;
+			}
+		}
+		
+		internal int ResolvePass {
+			get {
+				return resolvePass;
+			}
+			set {
+				resolvePass = value;
+			}
+		}
+		
+		internal int Discovered {
+			get {
+				return discovered;
+			}
+			set {
+				discovered = value;
+			}
+		}
+		
+		internal int Finished {
+			get {
+				return finished;
+			}
+			set {
+				finished = value;
+			}
+		}
+		
+		internal MethodInfo FinalizePlugin {
+			get {
+				return finalizePlugin;
+			}
+			set {
+				finalizePlugin = value;
+			}
+		}
+	}
+	
+	class NameComparer : IComparer
+	{
+		public int Compare (Object obj1, Object obj2)
+		{
+			string className = (string)obj1;
+			Plugin plugin = (Plugin)obj2;
+			return String.Compare (className, plugin.Name);
+		}
+	}
+	
+	public class MonoDevelop
+	{
+		private static readonly ILog log = LogManager.GetLogger (typeof (MonoDevelop));
+		private static NameComparer nameComparer = new NameComparer ();
+		private static int time = 0;
+		private static ArrayList plugins;
+		private static Hashtable commands = new Hashtable ();
+		private static ICommand defaultCommand = null;
+	
+		//
+		// Registers a command handler for a particular command line option.
+		// An option value of null is used for the &quot;default&quot; handler. Set both
+		// parameters to null if you want to disable the default handler.
+		//
+		public static void RegisterCommand (string option, ICommand cmd)
+		{
+			if (option == null) {
+				defaultCommand = cmd;
+			} else {
+				if (commands.Contains (option))
+					log.Warn (&quot;Command &quot; + option + &quot; is already registered&quot;);
+				else
+					commands.Add (option, cmd);
+			}
+		}
+	
+		static void Main (string[] args)
+		{
+			log.Debug (&quot;Starting MonoDevelop...&quot;);
+			DateTime timeStarted = DateTime.Now;
+			
+			// Make a list of plugin directories.
+			ArrayList pluginDirs = new ArrayList ();
+			string path = ConfigurationSettings.AppSettings[&quot;pluginPath&quot;];
+			if (path == null) {
+				log.Error (&quot;Unknown configuration property \&quot;pluginPath\&quot;&quot;);
+				log.Error (&quot;Your monodevelop.exe.config is likely broken&quot;);
+				log.Error (&quot;Please reinstall MonoDevelop&quot;);
+				return;
+			}
+			pluginDirs.Add (path);
+			
+			// Add directories from the $MONODEVELOP_PLUGIN_PATH environment var.
+			path = Environment.GetEnvironmentVariable (&quot;MONODEVELOP_PLUGIN_PATH&quot;);
+			if (path != null) {
+				string[] dirs = path.Split (Path.DirectorySeparatorChar);
+				foreach (string dir in dirs)
+					pluginDirs.Add (dir);
+			}
+	
+			// Scan for .plugin files in the plugin directories.
+			log.Debug (&quot;Looking for .plugin files&quot;);
+			ArrayList pluginFiles = new ArrayList ();
+			foreach (string pluginDir in pluginDirs) {
+				if (!Directory.Exists (pluginDir))
+					continue;
+				log.Debug (&quot;Scanning &quot; + pluginDir);
+				DirectoryInfo di = new DirectoryInfo (pluginDir);
+				FileInfo[] files = di.GetFiles (&quot;*.plugin&quot;);
+				pluginFiles.AddRange (files);
+			}
+			log.Debug (&quot;&quot; + pluginFiles.Count + &quot; plugin file(s) found&quot;);
+			
+			// Parse the .plugin files and build a list of plugins
+			// and dependencies.
+			plugins = new ArrayList ();
+			foreach (FileInfo file in pluginFiles) {
+				log.Debug (&quot;Parsing &quot; + file.FullName);
+				ParsePluginFile (file.FullName);
+			}
+			
+			// Determine the order in which to load plugins.
+			SortedList loadOrder = ResolveDependencies ();
+			
+			// Load the plugins in proper order from the loadOrder SortedList.
+			foreach (Plugin plugin in loadOrder.Values) {
+				try {
+					log.Debug (&quot;Loading &quot; + plugin.Name);
+					Assembly a = Assembly.LoadFrom (plugin.Assembly);
+					Type t = a.GetType (plugin.Name);
+					if (t == null) {
+						log.Error (&quot;Unknown plugin class &quot; + plugin.Name);
+						continue;
+					}
+					
+					// Check if the class contians an InitializePlugin method.
+					MethodInfo ip = t.GetMethod (&quot;InitializePlugin&quot;,
+								     new Type[] {typeof (byte), typeof (byte)});
+					if (ip == null || !ip.IsStatic || !ip.IsPublic || 
+					    ip.ReturnType != typeof (void)) {
+						log.Error (&quot;Plugin class \&quot;&quot; + plugin.Name +
+							   &quot;\&quot; doesn't contain an InitializePlugin method with signature \&quot;&quot; +
+							   &quot;public static void InitializePlugin (byte, byte)\&quot;&quot;);
+						continue;
+					}
+					
+					// Check if the class contains a FinalizePlugin method.
+					MethodInfo fp = t.GetMethod (&quot;FinalizePlugin&quot;, new Type[] {});
+					if (fp == null || !fp.IsStatic || !fp.IsPublic ||
+					    fp.ReturnType != typeof (void)) {
+						log.Error (&quot;Plugin class \&quot;&quot; + plugin.Name +
+							   &quot;\&quot; doesn't contain a FinalizePlugin method with signature \&quot;&quot; +
+							   &quot;public static void FinalizePlugin ()\&quot;&quot;);
+						continue;
+					}
+
+					// Call InitializePlugin.					
+					ip.Invoke (null, new object[] {(byte)1, (byte)0});
+					// Cache the FinalizePlugin MethodInfo for later use.
+					plugin.FinalizePlugin = fp;
+				} catch (System.Exception e) {
+					log.Error (&quot;Error loading &quot; + plugin.Name, e);
+					continue;
+				}
+			}
+	
+			// Check for --help argument.
+			if (Array.BinarySearch (args, &quot;--help&quot;) &gt;= 0) {
+				Usage ();
+				return;
+			}
+			
+			// Print how much time it took to start.
+			log.Debug (&quot;Started in &quot; + (DateTime.Now - timeStarted).Seconds + &quot; seconds&quot;);
+			
+			// If the first argument isn't a registered ICommand,
+			// then interpret all the arguments as input for the
+			// default command handler.
+			if (args.Length == 0 || !commands.Contains (args[0])) {
+				// Invoke the default ICommand.
+				if (defaultCommand == null)
+					log.Error (&quot;No default command handler registered; Exiting&quot;);
+				else
+					defaultCommand.InvokeCommand (args);
+			} else {
+				// Parse the commandline arguments.
+				for (int i = 0; i &lt; args.Length; i++) {
+					ICommand cmd = (ICommand)commands[args[i]];
+					if (cmd.TakesCommandArguments) {
+						ArrayList p = new ArrayList ();
+						while ((args.Length &gt; i + 1) &amp;&amp; !commands.Contains (args[i+1]))
+							p.Add (args[++i]);
+						string[] result = new string[p.Count];
+						p.CopyTo (result);
+						cmd.InvokeCommand (result);
+					} else {
+						cmd.InvokeCommand (null);
+					}
+				}
+			}
+			
+			// At this point, the command handler has finished its task.
+			// Example: it has finished a --build command or the default
+			// command handler has returned from the GTK+ main loop.
+
+			// Finalize all plugins in the reverse order they were loaded.
+			for (int i = loadOrder.Count - 1; i &gt;= 0; i--) {
+				Plugin plugin = (Plugin)loadOrder.GetByIndex (i);
+				plugin.FinalizePlugin.Invoke (null, null);
+			}
+			commands.Clear ();
+			loadOrder.Clear ();
+			plugins.Clear ();
+			
+			// And exit.
+			log.Debug (&quot;Exiting MonoDevelop&quot;);
+		}
+		
+		//
+		// Output information about monodevelop's usage and possible commandline
+		// parameters to the console.
+		//
+		private static void Usage ()
+		{
+			Console.WriteLine (&quot;Usage is: monodevelop [options] files&quot;);
+			foreach (ICommand cmd in commands.Values)
+				Console.WriteLine (&quot;   {0}&quot;, cmd.CommandDescription);
+			Console.WriteLine (&quot;&quot;);
+		}
+		
+		//
+		// Parses a .plugin file and creates a new Plugin class with the
+		// attributes from the .plugin file.
+		//
+		private static void ParsePluginFile (string file)
+		{
+			XmlTextReader reader = new XmlTextReader (file);
+			Plugin plugin = null;
+			string assembly = null;			
+
+			while (reader.Read ()) {
+				if (reader.NodeType == XmlNodeType.Element) {
+					switch (reader.Name) {
+						case &quot;assembly&quot;:
+							assembly = reader.ReadElementString ();
+							break;
+						case &quot;class&quot;:
+							plugin = new Plugin (assembly, reader[&quot;name&quot;]);
+							plugins.Add (plugin);
+							break;
+						case &quot;depends&quot;:
+							plugin.Dependencies.Add (reader.ReadElementString());
+							break;
+					}
+				}
+			}
+		}
+		
+		//
+		// Returns the PluginInfo belonging to the specified className. Returns
+		// null if a matching PluginInfo wasn't found.
+		//
+		private static Plugin FindPlugin (ArrayList list, string className)
+		{
+			int idx = plugins.BinarySearch (className, nameComparer);
+			
+			if (idx &gt;= 0)
+				return (Plugin)list[idx];
+			else
+				return null;
+		}
+		
+		//
+		// Resolve the plugin dependencies. Check for cycles and whether
+		// dependency classes exist. The end result will be that the loadOrder
+		// SortedList will contain the plugins in the order that they need to be
+		// loaded.
+		//
+		private static SortedList ResolveDependencies ()
+		{
+			time = 0;
+			int pass = 0;
+			SortedList result = new SortedList ();
+		
+			foreach (Plugin plugin in plugins) {
+				if (plugin.ResolvePass == -1) {
+					if (!TraversePlugin (plugin, result, pass++))
+						log.Error (&quot;Unable to load: &quot; + plugin.Name);
+				}
+			}
+	
+			return result;		
+		}
+		
+		//
+		// Traverse the graph using a Depth First Search and sort the plugins
+		// based on the &quot;finished time&quot;. During each &quot;pass&quot;, the ResolvePass 
+		// attribute is set on each PluginInfo to detect when a cycle has 
+		// occurred. When this happens, false will be returned through the 
+		// recursion and the cycle will be excluded from the loadOrder list. The
+		// same occurs when a plugin depends on a class which is not listed in 
+		// any .plugin file.
+		//
+		private static bool TraversePlugin (Plugin plugin,
+						    SortedList order,
+						    int pass)
+		{
+			plugin.ResolvePass = pass;
+			plugin.Discovered = ++time;
+			
+			foreach (string className in plugin.Dependencies) {
+				Plugin child = FindPlugin (plugins, className);
+				
+				// Check that the dependency class exists.
+				if (child == null) {
+					log.Error (&quot;Class not found: &quot; + className);
+					return false;
+				}
+				
+				// Check for cycles in the dependency graph.
+				if (child.ResolvePass != pass) {
+					if (!TraversePlugin (child, order, pass)) {
+						log.Error (&quot;Unable to load: &quot; + child.Name);
+						return false;
+					}
+				} else {
+					log.Error (&quot;Circular dependency: &quot; + child.Name);
+					return false;
+				}
+			}
+			
+			plugin.Finished = ++time;
+			order.Add (plugin.Finished, plugin);
+			
+			return true;
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Core/core.build
===================================================================
--- branches/MonoDevelop-plan-43/src/Core/core.build	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Core/core.build	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,21 @@
+&lt;?xml version=&quot;1.0&quot;?&gt;
+&lt;project name=&quot;core&quot; default=&quot;build&quot;&gt;
+    &lt;target name=&quot;build&quot; description=&quot;compiles the source code&quot;&gt;
+        &lt;!-- build monodevelop.exe --&gt;
+        &lt;csc target=&quot;exe&quot; output=&quot;${path::combine(bin.dir, 'monodevelop.exe')}&quot; debug=&quot;${build.debug}&quot;&gt;
+            &lt;sources&gt;
+                &lt;include name=&quot;*.cs&quot;/&gt;
+            &lt;/sources&gt;
+            &lt;!-- FIXME: use $prefix/lib? --&gt;
+            &lt;references basedir=&quot;/usr/lib&quot;&gt;
+                &lt;include name=&quot;log4net.dll&quot;/&gt;
+            &lt;/references&gt;
+        &lt;/csc&gt;
+
+        &lt;!-- install the plugin file --&gt;
+        &lt;copy file=&quot;monodevelop.exe.config.in&quot; tofile=&quot;monodevelop.exe.config&quot;/&gt;
+        &lt;replaceregex match=&quot;@monodevelop_plugin_dir@&quot; replace=&quot;${path::combine(lib.dir, 'monodevelop')}&quot; file=&quot;monodevelop.exe.config&quot;/&gt;
+        &lt;replaceregex match=&quot;@monodevelop_ui_dir@&quot; replace=&quot;${path::combine(share.dir, 'ui')}&quot; file=&quot;monodevelop.exe.config&quot;/&gt;
+        &lt;move file=&quot;monodevelop.exe.config&quot; todir=&quot;${bin.dir}&quot;/&gt;
+    &lt;/target&gt;
+&lt;/project&gt;

Added: branches/MonoDevelop-plan-43/src/Core/monodevelop.exe.config.in
===================================================================
--- branches/MonoDevelop-plan-43/src/Core/monodevelop.exe.config.in	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Core/monodevelop.exe.config.in	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,23 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
+&lt;configuration&gt;
+	&lt;appSettings&gt;
+		&lt;add key=&quot;imagePath&quot; value=&quot;@monodevelop_images_dir@&quot;/&gt;
+		&lt;add key=&quot;pluginPath&quot; value=&quot;@monodevelop_plugin_dir@&quot;/&gt;
+		&lt;add key=&quot;resourcePath&quot; value=&quot;@monodevelop_resource_dir@&quot;/&gt;
+		&lt;add key=&quot;uiPath&quot; value=&quot;@monodevelop_ui_dir@&quot;/&gt;
+	&lt;/appSettings&gt;
+	&lt;configSections&gt;
+		&lt;section name=&quot;log4net&quot; type=&quot;log4net.Config.Log4NetConfigurationSectionHandler, log4net&quot;/&gt;
+	&lt;/configSections&gt;
+	&lt;log4net&gt;
+		&lt;appender name=&quot;ConsoleAppender&quot; type=&quot;log4net.Appender.ConsoleAppender&quot;&gt;
+			&lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;
+				&lt;param name=&quot;ConversionPattern&quot; value=&quot;%-5p - %m%n&quot;/&gt;
+			&lt;/layout&gt;
+		&lt;/appender&gt;
+		&lt;root&gt;
+			&lt;level value=&quot;ALL&quot;/&gt;
+			&lt;appender-ref ref=&quot;ConsoleAppender&quot;/&gt;
+		&lt;/root&gt;
+	&lt;/log4net&gt;
+&lt;/configuration&gt;

Added: branches/MonoDevelop-plan-43/src/Editor/EditorNodeViewer.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Editor/EditorNodeViewer.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Editor/EditorNodeViewer.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,76 @@
+//
+// EditorNodeViewer.cs: Node viewer for text/* mimetypes.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+using Gtk;
+using MonoDevelop.Content;
+
+namespace MonoDevelop.Editor {
+	public class EditorNodeViewer : INodeViewer {
+		private ScrolledWindow structure;
+		private TreeView tree;
+		private ScrolledWindow viewer;
+		private TextView editor;
+		private string description;
+		private string title;
+		private Gdk.Pixbuf icon;
+	
+		public EditorNodeViewer ()
+		{
+			structure = new ScrolledWindow ();
+			structure.ShadowType = ShadowType.In;
+			tree = new TreeView ();
+			structure.Add (tree);
+			
+			viewer = new ScrolledWindow ();
+			viewer.ShadowType = ShadowType.In;
+			editor = new TextView ();
+			viewer.Add (editor);
+		}
+		
+		public Widget StructureWidget {
+			get {
+				return structure;
+			}
+		}
+	
+		public Widget ViewerWidget {
+			get {
+				return viewer;
+			}
+		}
+	
+		public string ViewerDescription {
+			get {
+				return description;
+			}
+		}
+	
+		public string ViewerTitle {
+			get {
+				return title;
+			}
+		}
+	
+		public Gdk.Pixbuf ViewerIcon {
+			get {
+				return icon;
+			}
+		}
+		
+		public static void InitializePlugin (byte major, byte minor)
+		{
+			ContentManager.AddNodeViewerFactory (new EditorNodeViewerFactory ());
+		}
+		
+		public static void FinalizePlugin ()
+		{
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Editor/EditorNodeViewerFactory.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Editor/EditorNodeViewerFactory.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Editor/EditorNodeViewerFactory.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,30 @@
+//
+// EditorNodeViewerFactory.cs: Node viewer factory for text/* mimetypes.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+using MonoDevelop.Content;
+using MonoDevelop.Node;
+
+namespace MonoDevelop.Editor {
+	public class EditorNodeViewerFactory : INodeViewerFactory {
+		public EditorNodeViewerFactory ()
+		{
+		}
+		
+		public bool CanDisplayNode (Node node)
+		{
+			return true;
+		}
+		
+		public INodeViewer CreateNodeViewer (Node node)
+		{
+			return new EditorNodeViewer ();
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Editor/editor.build
===================================================================
--- branches/MonoDevelop-plan-43/src/Editor/editor.build	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Editor/editor.build	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,29 @@
+&lt;?xml version=&quot;1.0&quot;?&gt;
+&lt;project name=&quot;monodevelop.plugins.editor&quot; default=&quot;build&quot;&gt;
+    &lt;!-- build the project --&gt;
+    &lt;target name=&quot;build&quot; description=&quot;compiles the source code&quot;&gt;
+        &lt;property name=&quot;assemblyfile&quot; value=&quot;${path::combine(plugin.dir, 'editor.dll')}&quot;/&gt;
+        &lt;csc target=&quot;library&quot; output=&quot;${assemblyfile}&quot; debug=&quot;${build.debug}&quot;&gt;
+            &lt;arg value=&quot;${gnome-sharp.libs}&quot;/&gt;
+            &lt;sources&gt;
+                &lt;include name=&quot;*.cs&quot;/&gt;
+            &lt;/sources&gt;
+            &lt;references basedir=&quot;${build.dir}&quot;&gt;
+                &lt;include name=&quot;bin/monodevelop.exe&quot;/&gt;
+                &lt;include name=&quot;lib/gdl-sharp.dll&quot;/&gt;
+                &lt;include name=&quot;lib/log4net.dll&quot;/&gt;
+                &lt;include name=&quot;lib/monodevelop/content.dll&quot;/&gt;
+                &lt;include name=&quot;lib/monodevelop/node.dll&quot;/&gt;
+                &lt;include name=&quot;lib/monodevelop/workbench.dll&quot;/&gt;
+            &lt;/references&gt;
+        &lt;/csc&gt;
+        
+        &lt;!-- install the plugin file --&gt;
+        &lt;copy file=&quot;editor.plugin.in&quot; tofile=&quot;editor.plugin&quot;/&gt;
+        &lt;replaceregex match=&quot;@assembly@&quot; replace=&quot;${assemblyfile}&quot; file=&quot;editor.plugin&quot; byline=&quot;true&quot; /&gt;
+        &lt;move file=&quot;editor.plugin&quot; todir=&quot;${plugin.dir}&quot;/&gt;
+        
+        &lt;!-- install the ui file --&gt;
+        &lt;copy file=&quot;editor.ui&quot; todir=&quot;${ui.dir}&quot;/&gt;
+    &lt;/target&gt;
+&lt;/project&gt;

Added: branches/MonoDevelop-plan-43/src/Editor/editor.plugin.in
===================================================================
--- branches/MonoDevelop-plan-43/src/Editor/editor.plugin.in	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Editor/editor.plugin.in	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,5 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;plugin version=&quot;1.0&quot;&gt;
+	&lt;assembly&gt;@assembly@&lt;/assembly&gt;
+	&lt;class name=&quot;MonoDevelop.Editor.EditorNodeViewer&quot;/&gt;
+&lt;/plugin&gt;

Added: branches/MonoDevelop-plan-43/src/Editor/editor.ui
===================================================================
--- branches/MonoDevelop-plan-43/src/Editor/editor.ui	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Editor/editor.ui	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,24 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;menubar&gt;
+	&lt;menu name=&quot;EditMenu&quot; action=&quot;EditMenuAction&quot;&gt;
+		&lt;placeholder name=&quot;EditEditorPlaceholder&quot;&gt;
+			&lt;menuitem name=&quot;EditUndo&quot; action=&quot;EditUndoAction&quot;/&gt;
+			&lt;menuitem name=&quot;EditRedo&quot; action=&quot;EditRedoAction&quot;/&gt;
+			&lt;separator/&gt;
+			&lt;menuitem name=&quot;EditCut&quot; action=&quot;EditCutAction&quot;/&gt;
+			&lt;menuitem name=&quot;EditCopy&quot; action=&quot;EditCopyAction&quot;/&gt;
+			&lt;menuitem name=&quot;EditPaste&quot; action=&quot;EditPasteAction&quot;/&gt;
+			&lt;menuitem name=&quot;EditDelete&quot; action=&quot;EditDeleteAction&quot;/&gt;
+			&lt;separator/&gt;
+			&lt;menuitem name=&quot;EditSelectAll&quot; action=&quot;EditSelectAllaction&quot;/&gt;
+		&lt;/placeholder&gt;
+	&lt;/menu&gt;
+&lt;/menubar&gt;
+&lt;toolbar name=&quot;toolbar&quot;&gt;
+	&lt;toolitem name=&quot;EditUndo&quot; action=&quot;EditUndoAction&quot;/&gt;
+	&lt;toolitem name=&quot;EditRedo&quot; action=&quot;EditRedoAction&quot;/&gt;
+	&lt;separator/&gt;
+	&lt;toolitem name=&quot;EditCut&quot; action=&quot;EditCutAction&quot;/&gt;
+	&lt;toolitem name=&quot;EditCopy&quot; action=&quot;EditCopyAction&quot;/&gt;
+	&lt;toolitem name=&quot;EditPaste&quot; action=&quot;EditPasteAction&quot;/&gt;
+&lt;/toolbar&gt;

Added: branches/MonoDevelop-plan-43/src/Node/Buffer.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Node/Buffer.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Node/Buffer.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,102 @@
+//
+// Buffer.cs: A Buffer is an in-memory representation of the information
+//            referred to by a FileNode, and as such may represent changes to a
+//            FileNode that have not yet been saved to permanent storage.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+using System.IO;
+using Gnome.Vfs;
+
+namespace MonoDevelop.Node {
+	public delegate byte[] BufferContentCallback (Buffer buffer);
+
+	public class Buffer {
+		private BufferContentCallback callback;
+		private long lastModified;
+		private long sourceLastModified;
+		private string uri;
+
+		internal Buffer (string uri)
+		{
+		}
+		
+		internal Buffer (Gnome.Vfs.Uri uri)
+		{
+		}
+		
+		public BufferContentCallback BufferUpdater {
+			set {
+				callback = value;
+			}
+		}
+		
+		public long LastModified {
+			get {
+				return lastModified;
+			}
+		}
+		
+		public bool Modified {
+			get {
+				return false;
+			}
+			set {
+			}
+		}
+		
+		public bool ReadOnly {
+			get {
+				return true;
+			}
+		}
+		
+		public int Size {
+			get {
+				return 0;
+			}
+		}
+		
+		
+		public long SourceLastModified {
+			get {
+				return sourceLastModified;
+			}
+		}
+		
+		public string Uri {
+			get {
+				return uri;
+			}
+		}
+		
+		public Stream Reader {
+			get {
+				return null;
+			}
+		}
+
+		public Stream Writer {
+			get {
+				return null;
+			}
+		}
+		
+		public void Check ()
+		{
+		}
+		
+		public void Revert ()
+		{
+		}
+		
+		public void Save ()
+		{
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Node/FileNode.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Node/FileNode.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Node/FileNode.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,262 @@
+//
+// FileNode.cs: Abstract base class from which all nodes must inherit.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+using System.Collections;
+using System.IO;
+using System.Reflection;
+using Gdk;
+using Gnome.Vfs;
+using log4net;
+
+namespace MonoDevelop.Node {
+	public class FileNode : Node {
+		static private readonly ILog log = LogManager.GetLogger (typeof (FileNode));
+		static private Hashtable fileNodeTypes = new Hashtable ();
+	
+		private Node parent;
+		private Project project;
+		private Gnome.Vfs.Uri uri;
+		private Gnome.Vfs.FileInfo info;
+
+		public FileNode (Project project, Node parent, string uri)
+		{
+			this.project = project;
+			this.parent = parent;
+			this.uri = new Gnome.Vfs.Uri (uri);
+		}
+		
+		public override bool CanDelete {
+			get {
+				return uri.Exists &amp;&amp; 
+				       ((File.GetAttributes (filename) &amp;
+				         FileAttributes.ReadOnly) != FileAttributes.ReadOnly);
+			}
+		}
+		
+		public override bool CanRename {
+			get {
+				return uri.Exists &amp;&amp; 
+				       ((File.GetAttributes (filename) &amp;
+				         FileAttributes.ReadOnly) != FileAttributes.ReadOnly);
+			}
+		}
+		
+		public override bool CanRevert {
+			get {
+				return Vfs.Exists (filename);
+			}
+		}
+		
+		public override bool CanSave {
+			get {
+				return !uri.Exists || 
+				       (uri.Exists &amp;&amp; 
+				        ((File.GetAttributes (filename) &amp;
+				          FileAttributes.ReadOnly) != FileAttributes.ReadOnly));
+			}
+		}
+		
+		public override bool CanSaveAs {
+			get {
+				return true;
+			}
+		}
+		
+		public override Node[] Children {
+			get {
+				return null;
+			}
+		}
+		
+		public override Node[] DisplayChildren {
+			get {
+				return null;
+			}
+		}
+		
+		public override Pixbuf DisplayIcon {
+			get {
+				return null;
+			}
+		}
+		
+		public override string DisplayName {
+			get {
+				return Path.GetFileName (filename);
+			}
+		}
+		
+		public override bool HasChildren {
+			get {
+				return false;
+			}
+		}
+		
+		public override bool HasDisplayChildren {
+			get {
+				return false;
+			}
+		}
+		
+		public override string LongDisplayName {
+			get {
+				return Path.GetFullPath (filename);
+			}
+		}
+		
+		public string MimeType {
+			get {
+				return mimetype;
+			}
+		}
+		
+		public override Node Parent {
+			get {
+				return parent;
+			}
+			set {
+			}
+		}
+		
+		public override bool Modified {
+			get {
+				return false;
+			}
+		}
+		
+		public override bool Persistent {
+			get {
+				return false;
+			}
+		}
+		
+		public override Project Project {
+			get {
+				return project;
+			}
+		}
+		
+		protected Gnome.Vfs.FileInfo FileInfo {
+			get {
+				if (info == null)
+					info = new Gnome.Vfs.FileInfo (uri);
+				return info;
+			}
+		}
+		
+		public override void Delete ()
+		{
+		}
+		
+		public override void MakePersistent ()
+		{
+		}
+
+		public override void Rename ()
+		{
+		}
+		
+		public override void Revert ()
+		{
+		}
+		
+		public override void Save ()
+		{
+		}
+		
+		public override void SaveAndDelete ()
+		{
+		}
+		
+		public override void SaveAs ()
+		{
+		}
+		
+		////////////////////////////////////////////////////////////////////////
+		// Static methods
+		////////////////////////////////////////////////////////////////////////
+	
+		static public FileNodeEntry FindFileNodeType (string mimetype)
+		{
+			if (fileNodeTypes.Contains (mimetype)) {
+				ArrayList types = fileNodeTypes[mimetype] as ArrayList;
+				return types[0] as FileNodeEntry;
+			} else {
+				Console.WriteLine (&quot;doesn't contain {0}&quot;, mimetype);
+				return null;
+			}
+		}
+		
+		static public void RegisterFileNodeType (string mimetype,
+							 string description,
+							 Type type,
+							 Pixbuf icon)
+		{
+			ArrayList types;
+			
+			log.Debug (&quot;Registering filenode: &quot; + mimetype);
+
+			if (fileNodeTypes.Contains (mimetype)) {
+				types = fileNodeTypes[mimetype] as ArrayList;
+				types.Add (new FileNodeEntry (mimetype,
+							      description,
+							      type, icon));			
+				fileNodeTypes[mimetype] = types;
+			} else {
+				types = new ArrayList ();
+				types.Add (new FileNodeEntry (mimetype,
+							      description,
+							      type, icon));			
+				fileNodeTypes.Add (mimetype, types);
+			}
+
+		}
+	}
+	
+	public class FileNodeEntry {
+		private string mimetype;
+		private string description;
+		private Type type;
+		private Pixbuf icon;
+		
+		public string MimeType {
+			get {
+				return mimetype;
+			}
+		}
+		
+		public string Description {
+			get {
+				return description;
+			}
+		}
+		
+		public Type Type {
+			get {
+				return type;
+			}
+		}
+		
+		public Pixbuf Icon {
+			get {
+				return icon;
+			}
+		}
+	
+		public FileNodeEntry (string mimetype, string description,
+				      Type type, Pixbuf icon)
+		{
+			this.mimetype = mimetype;
+			this.description = description;
+			this.type = type;
+			this.icon = icon;
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Node/Node.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Node/Node.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Node/Node.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,106 @@
+//
+// Node.cs: Abstract base class from which all nodes must inherit.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using Gdk;
+using System;
+
+namespace MonoDevelop.Node {
+	abstract public class Node {
+		abstract public bool CanDelete {
+			get;
+		}
+		
+		abstract public bool CanRename {
+			get;
+		}
+		
+		abstract public bool CanRevert {
+			get;
+		}
+		
+		abstract public bool CanSave {
+			get;
+		}
+		
+		abstract public bool CanSaveAs {
+			get;
+		}
+		
+		abstract public Node[] Children {
+			get;
+		}
+		
+		abstract public Node[] DisplayChildren {
+			get;
+		}
+		
+		abstract public Pixbuf DisplayIcon {
+			get;
+		}
+		
+		abstract public string DisplayName {
+			get;
+		}
+		
+		abstract public bool HasChildren {
+			get;
+		}
+	
+		abstract public bool HasDisplayChildren {
+			get;
+		}
+	
+		abstract public string LongDisplayName {
+			get;
+		}
+	
+		abstract public Node Parent {
+			get;
+			set;
+		}
+		
+		abstract public bool Modified {
+			get;
+		}
+		
+		abstract public bool Persistent {
+			get;
+		}
+		
+		abstract public Project Project {
+			get;
+		}
+		
+		abstract public void Delete ();
+		
+		abstract public void MakePersistent ();
+
+		abstract public void Rename ();
+		
+		abstract public void Revert ();
+		
+		abstract public void Save ();
+		
+		abstract public void SaveAndDelete ();
+		
+		abstract public void SaveAs ();
+		
+		public static void InitializePlugin (byte major, byte minor)
+		{
+			FileNode.RegisterFileNodeType (&quot;text/x-csharp&quot;,
+						       &quot;Text file&quot;,
+						       typeof (TextFileNode),
+						       null);
+		}
+		
+		public static void FinalizePlugin ()
+		{
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Node/Project.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Node/Project.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Node/Project.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,13 @@
+//
+// Project.cs: Abstract base class from which all nodes must inherit.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+namespace MonoDevelop.Node {
+	abstract public class Project : Node {
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Node/TextFileNode.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Node/TextFileNode.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Node/TextFileNode.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,22 @@
+//
+// TextFileNode.cs: Class for text files.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using log4net;
+
+namespace MonoDevelop.Node {
+	public class TextFileNode : FileNode {
+		static private readonly ILog log = LogManager.GetLogger (typeof (TextFileNode));
+	
+		public TextFileNode (Project project, Node parent, string filename)
+			: base (project, parent, filename)
+		{
+			log.Debug (&quot;Created instance of TextFileNode&quot;);
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Node/node.build
===================================================================
--- branches/MonoDevelop-plan-43/src/Node/node.build	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Node/node.build	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,23 @@
+&lt;?xml version=&quot;1.0&quot;?&gt;
+&lt;project name=&quot;monodevelop.plugins.node&quot; default=&quot;build&quot;&gt;
+    &lt;!-- build the project --&gt;
+    &lt;target name=&quot;build&quot; description=&quot;compiles the source code&quot;&gt;
+        &lt;property name=&quot;assemblyfile&quot; value=&quot;${path::combine(plugin.dir, 'node.dll')}&quot;/&gt;
+        &lt;csc target=&quot;library&quot; output=&quot;${assemblyfile}&quot; debug=&quot;${build.debug}&quot;&gt;
+            &lt;arg value=&quot;${gtk-sharp.libs}&quot;/&gt;
+            &lt;arg value=&quot;${gnome-vfs-sharp.libs}&quot;/&gt;
+            &lt;sources&gt;
+                &lt;include name=&quot;*.cs&quot;/&gt;
+            &lt;/sources&gt;
+            &lt;references basedir=&quot;${build.dir}&quot;&gt;
+                &lt;include name=&quot;lib/log4net.dll&quot;/&gt;
+                &lt;include name=&quot;bin/monodevelop.exe&quot;/&gt;
+            &lt;/references&gt;
+        &lt;/csc&gt;
+        
+        &lt;!-- install the plugin file --&gt;
+        &lt;copy file=&quot;node.plugin.in&quot; tofile=&quot;node.plugin&quot;/&gt;
+        &lt;replaceregex match=&quot;@assembly@&quot; replace=&quot;${assemblyfile}&quot; file=&quot;node.plugin&quot; byline=&quot;true&quot; /&gt;
+        &lt;move file=&quot;node.plugin&quot; todir=&quot;${plugin.dir}&quot;/&gt;
+    &lt;/target&gt;
+&lt;/project&gt;

Added: branches/MonoDevelop-plan-43/src/Node/node.plugin.in
===================================================================
--- branches/MonoDevelop-plan-43/src/Node/node.plugin.in	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Node/node.plugin.in	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,5 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;plugin version=&quot;1.0&quot;&gt;
+	&lt;assembly&gt;@assembly@&lt;/assembly&gt;
+	&lt;class name=&quot;MonoDevelop.Node.Node&quot;/&gt;
+&lt;/plugin&gt;

Added: branches/MonoDevelop-plan-43/src/Workbench/IWorkbenchWidgetFactory.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Workbench/IWorkbenchWidgetFactory.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Workbench/IWorkbenchWidgetFactory.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,33 @@
+//
+// IWorkbenchWidgetFactory.cs: Factory interface for creating workbench widgets.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2003
+//
+
+using Gtk;
+using System;
+
+namespace MonoDevelop.Workbench {
+	public interface IWorkbenchWidgetFactory {
+		string WidgetName {
+			get;
+		}
+	
+		string WidgetTitle {
+			get;
+		}
+		
+		string WidgetIcon {
+			get;
+		}
+		
+		bool Dockable {
+			get;
+		}
+	
+		Widget CreateWidget (Workbench workbench);
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Workbench/Workbench.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Workbench/Workbench.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Workbench/Workbench.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,286 @@
+//
+// Workbench.cs: Main window containing a menu-, tool- and statusbar.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+using System.Collections;
+using System.Configuration;
+using System.IO;
+using Gdk;
+using Gtk;
+using Gnome;
+using Gdl;
+using log4net;
+
+namespace MonoDevelop.Workbench {
+	public class Workbench : Gtk.Window {
+		private static readonly ILog log = LogManager.GetLogger (typeof (Workbench));
+		private static bool initialized = false;
+		private static ArrayList workbenches = new ArrayList ();
+		private static ArrayList widgets = new ArrayList ();
+		private static ArrayList groups = new ArrayList ();
+		private static ArrayList uiinfos = new ArrayList ();
+	
+		private VBox box;
+		private Dock dock;
+		private Statusbar statusbar;
+		private UIManager manager;
+	
+		private Workbench () : base (&quot;MonoDevelop&quot;)
+		{
+			box = new VBox (false, 0);
+			Add (box);
+	
+			statusbar = new Statusbar ();
+			box.PackEnd (statusbar, false, true, 0);
+	
+			dock = new Dock ();
+			box.PackEnd (dock, true, true, 0);
+			
+			manager = new UIManager ();
+			manager.AddWidget += new AddWidgetHandler (OnWidgetAdd);
+			manager.ConnectProxy += new ConnectProxyHandler (OnProxyConnect);
+			
+			AddActions ();
+			AddWidgets ();
+			UpdateUI ();
+		}
+		
+		private Workbench (string[] files) : this ()
+		{
+		}
+	
+		private void AddActions ()
+		{
+			ActionGroup group = new ActionGroup (&quot;Workbench&quot;);
+			Action action;
+
+			// File menu.
+			action = new Action (&quot;FileMenuAction&quot;, &quot;_File&quot;, null, null);
+			group.Add (action);
+			
+			action = new Action (&quot;CloseWindowAction&quot;, &quot;Close _Window&quot;,
+					     &quot;Close this window&quot;, null);
+			action.Activated += new EventHandler (OnCloseWindow);
+			group.Add (action, &quot;&lt;control&gt;&lt;shift&gt;q&quot;);
+
+			action = new Action (&quot;QuitAction&quot;, null, &quot;Quit the program&quot;,
+					     Gtk.Stock.Quit);
+			action.Activated += new EventHandler (OnQuit);
+			group.Add (action, &quot;&lt;control&gt;q&quot;);
+
+			// Edit menu.
+			action = new Action (&quot;EditMenuAction&quot;, &quot;_Edit&quot;, null, null);
+			group.Add (action);
+			
+			// View menu.
+			action = new Action (&quot;ViewMenuAction&quot;, &quot;_View&quot;, null, null);
+			group.Add (action);
+			
+			// Window menu.
+			action = new Action (&quot;WindowMenuAction&quot;, &quot;_Window&quot;, null,
+					     null);
+			group.Add (action);
+			
+			action = new Action (&quot;NewWindowAction&quot;, &quot;_New Window&quot;,
+					     &quot;Create a new window&quot;, null);
+			group.Add (action);
+			
+			action = new Action (&quot;SaveLayoutAction&quot;, &quot;_Save Layout...&quot;,
+					     &quot;Save the current layout&quot;,
+					     Gtk.Stock.Save);
+			group.Add (action);
+			
+			action = new Action (&quot;LayoutsAction&quot;, &quot;_Layouts&quot;,
+					     null, null);
+			group.Add (action);
+			
+			// Help menu.
+			action = new Action (&quot;HelpMenuAction&quot;, &quot;_Help&quot;, null, null);
+			group.Add (action);
+
+			action = new Action (&quot;AboutAction&quot;, &quot;_About&quot;,
+					     &quot;About this application&quot;,
+					     Gnome.Stock.About);
+			action.Activated += new EventHandler (OnAbout);
+			group.Add (action);
+			
+			AddActionGroup (group);
+			AddUiFromFile (&quot;workbench.ui&quot;);
+		}
+	
+		private void AddWidgets ()
+		{
+			foreach (IWorkbenchWidgetFactory factory in widgets) {
+				DockItem item = new DockItem (factory.WidgetName,
+							      factory.WidgetTitle,
+							      factory.WidgetIcon,
+							      factory.Dockable ? 
+								DockItemBehavior.Normal :
+								DockItemBehavior.Locked);
+				item.Add (factory.CreateWidget (this));
+				dock.AddItem (item, DockPlacement.Top);
+			}
+		}
+	
+		private void UpdateUI ()
+		{
+			foreach (ActionGroup group in groups)
+				manager.InsertActionGroup (group, 0);
+	
+			foreach (string ui in uiinfos)
+				manager.AddUiFromString (ui);
+		}
+	
+		////////////////////////////////////////////////////////////////////////
+		// Event handlers
+		////////////////////////////////////////////////////////////////////////
+	
+		private void OnCloseWindow (object obj, EventArgs args)
+		{
+		}
+	
+		private void OnQuit (object obj, EventArgs args)
+		{
+			Application.Quit ();
+		}
+	
+		private void OnAbout (object obj, EventArgs args)
+		{
+			/*AboutDialog about = new AboutDialog ();
+			about.Run ();
+			about.Destroy ();*/
+		}
+		
+		private void OnWidgetAdd (object obj, AddWidgetArgs args)
+		{
+			box.PackStart (args.Widget, false, true, 0);
+			args.Widget.Show ();
+		}
+	
+		private void OnProxyConnect (object obj, ConnectProxyArgs args)
+		{
+			if (args.Proxy is MenuItem) {
+				((GLib.Object)args.Proxy).Data [&quot;action&quot;] = args.Action;
+				((Item)args.Proxy).Selected += new EventHandler (OnSelect);
+				((Item)args.Proxy).Deselected += new EventHandler (OnDeselect);
+			}
+		}
+
+		private void OnSelect (object obj, EventArgs args)
+		{
+			Action action = ((GLib.Object)obj).Data[&quot;action&quot;] as Action;
+			if (action.Tooltip != null)
+				statusbar.Push (0, action.Tooltip);
+		}
+
+		private void OnDeselect (object obj, EventArgs args)
+		{
+			statusbar.Pop (0);
+		}
+
+		////////////////////////////////////////////////////////////////////////
+		// Static methods
+		////////////////////////////////////////////////////////////////////////
+	
+		internal static void CreateDefaultInstance (string[] args)
+		{
+			if (initialized) {
+				log.Error (&quot;Workbench.CreateDefaultInstance may only be called once&quot;);
+				return;
+			}
+	
+			Program program = new Program (&quot;Workbench&quot;, &quot;0.1&quot;, Modules.UI, args);
+	
+			Workbench wb = new Workbench (args);
+			wb.DeleteEvent += new DeleteEventHandler (OnWindowDelete);
+			wb.ShowAll ();
+			workbenches.Add (wb);
+			
+			initialized = true;
+			
+			program.Run ();
+		}
+	
+		static void OnWindowDelete (object obj, DeleteEventArgs args)
+		{
+			Workbench wb = obj as Workbench;
+			workbenches.Remove (wb);
+			
+			if (workbenches.Count == 0)
+				Application.Quit ();
+	
+			args.RetVal = true;
+		}
+	
+		public static Workbench ActiveWorkbench {
+			get {
+				return workbenches[0] as Workbench;
+			}
+		}
+	
+		public static void AddActionGroup (ActionGroup group)
+		{
+			groups.Add (group);
+		}
+	
+		public static void RemoveActionGroup (ActionGroup group)
+		{
+			groups.Remove (group);
+		}
+	
+		public static void AddUiFromString (string ui)
+		{
+			uiinfos.Add (ui);
+		}
+		
+		public static void AddUiFromFile (string filename)
+		{
+			// Look in the uiPath if the filename doesn't exist.
+			if (!System.IO.File.Exists (filename)) {
+				string uidir = ConfigurationSettings.AppSettings[&quot;uiPath&quot;];
+				string uifile = uidir + System.IO.Path.DirectorySeparatorChar + filename;
+	
+				if (System.IO.File.Exists (uifile)) {
+					filename = uifile;
+				} else {
+					log.Error (&quot;UI file &quot; + filename + &quot; not found&quot;);
+					return;
+				}
+			}
+	
+			// Read the complete file and add it to uiinfos.
+			Stream stream = System.IO.File.OpenRead (filename);
+			StreamReader sr = new StreamReader (stream);
+			uiinfos.Add (sr.ReadToEnd ());
+		}
+	
+		public static void AddWidgetFactory (IWorkbenchWidgetFactory factory)
+		{
+			widgets.Add (factory);
+		}
+		
+		public static void RemoveWidgetFactory (IWorkbenchWidgetFactory factory)
+		{
+			widgets.Remove (factory);
+		}
+
+		////////////////////////////////////////////////////////////////////////
+		// Plugin methods
+		////////////////////////////////////////////////////////////////////////
+
+		public static void InitializePlugin (byte major, byte minor)
+		{
+			MonoDevelop.RegisterCommand (null, new WorkbenchCommand ());
+		}
+		
+		public static void FinalizePlugin ()
+		{
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Workbench/WorkbenchCommand.cs
===================================================================
--- branches/MonoDevelop-plan-43/src/Workbench/WorkbenchCommand.cs	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Workbench/WorkbenchCommand.cs	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,35 @@
+//
+// WorkbenchCommand.cs: Default command handler which creates a new Workbench window.
+//
+// Author:
+//   Jeroen Zwartepoorte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jeroen at xs4all.nl</A>&gt;
+//
+// (C) Copyright Jeroen Zwartepoorte 2004
+//
+
+using System;
+using log4net;
+using MonoDevelop;
+
+namespace MonoDevelop.Workbench {
+	class WorkbenchCommand : ICommand {
+		private static readonly ILog log = LogManager.GetLogger (typeof (WorkbenchCommand));
+	
+		public string CommandDescription {
+			get {
+				return null;
+			}
+		}
+		
+		public bool TakesCommandArguments {
+			get {
+				return true;
+			}
+		}
+		
+		public void InvokeCommand (string[] args)
+		{
+			Workbench.CreateDefaultInstance (args);
+		}
+	}
+}

Added: branches/MonoDevelop-plan-43/src/Workbench/workbench.build
===================================================================
--- branches/MonoDevelop-plan-43/src/Workbench/workbench.build	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Workbench/workbench.build	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,26 @@
+&lt;?xml version=&quot;1.0&quot;?&gt;
+&lt;project name=&quot;monodevelop.plugins.workbench&quot; default=&quot;build&quot;&gt;
+    &lt;!-- build the project --&gt;
+    &lt;target name=&quot;build&quot; description=&quot;compiles the source code&quot;&gt;
+        &lt;property name=&quot;assemblyfile&quot; value=&quot;${path::combine(plugin.dir, 'workbench.dll')}&quot;/&gt;
+        &lt;csc target=&quot;library&quot; output=&quot;${assemblyfile}&quot; debug=&quot;${build.debug}&quot;&gt;
+            &lt;arg value=&quot;${gnome-sharp.libs}&quot;/&gt;
+            &lt;sources&gt;
+                &lt;include name=&quot;*.cs&quot;/&gt;
+            &lt;/sources&gt;
+            &lt;references basedir=&quot;${build.dir}&quot;&gt;
+                &lt;include name=&quot;lib/gdl-sharp.dll&quot;/&gt;
+                &lt;include name=&quot;lib/log4net.dll&quot;/&gt;
+                &lt;include name=&quot;bin/monodevelop.exe&quot;/&gt;
+            &lt;/references&gt;
+        &lt;/csc&gt;
+        
+        &lt;!-- install the plugin file --&gt;
+        &lt;copy file=&quot;workbench.plugin.in&quot; tofile=&quot;workbench.plugin&quot;/&gt;
+        &lt;replaceregex match=&quot;@assembly@&quot; replace=&quot;${assemblyfile}&quot; file=&quot;workbench.plugin&quot; byline=&quot;true&quot; /&gt;
+        &lt;move file=&quot;workbench.plugin&quot; todir=&quot;${plugin.dir}&quot;/&gt;
+        
+        &lt;!-- install the ui file --&gt;
+        &lt;copy file=&quot;workbench.ui&quot; todir=&quot;${ui.dir}&quot;/&gt;
+    &lt;/target&gt;
+&lt;/project&gt;

Added: branches/MonoDevelop-plan-43/src/Workbench/workbench.plugin.in
===================================================================
--- branches/MonoDevelop-plan-43/src/Workbench/workbench.plugin.in	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Workbench/workbench.plugin.in	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,5 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;plugin version=&quot;1.0&quot;&gt;
+	&lt;assembly&gt;@assembly@&lt;/assembly&gt;
+	&lt;class name=&quot;MonoDevelop.Workbench.Workbench&quot;/&gt;
+&lt;/plugin&gt;

Added: branches/MonoDevelop-plan-43/src/Workbench/workbench.ui
===================================================================
--- branches/MonoDevelop-plan-43/src/Workbench/workbench.ui	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/Workbench/workbench.ui	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,53 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;menubar&gt;
+	&lt;menu name=&quot;FileMenu&quot; action=&quot;FileMenuAction&quot;&gt;
+		&lt;placeholder name=&quot;FileOpenPlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileOpenProjectPlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileImportProjectPlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileRecentFilesPlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileSavePlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileClosePlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;FileCloseProject&quot;/&gt;
+		&lt;placeholder name=&quot;FilePrintPlaceholder&quot; position=&quot;top&quot;/&gt;
+		&lt;separator/&gt;
+		&lt;menuitem name=&quot;FileCloseWindow&quot; action=&quot;CloseWindowAction&quot;/&gt;
+		&lt;menuitem name=&quot;FileQuit&quot; action=&quot;QuitAction&quot;/&gt;
+	&lt;/menu&gt;
+	
+	&lt;menu name=&quot;EditMenu&quot; action=&quot;EditMenuAction&quot;&gt;
+		&lt;placeholder name=&quot;EditEditorPlaceholder&quot;/&gt;
+		&lt;placeholder name=&quot;EditPluginPlaceholder&quot; position=&quot;top&quot;/&gt;
+		&lt;placeholder name=&quot;EditPreferencesPlaceholder&quot; position=&quot;top&quot;/&gt;
+	&lt;/menu&gt;
+	
+	&lt;menu name=&quot;ViewMenu&quot; action=&quot;ViewMenuAction&quot;&gt;
+	&lt;/menu&gt;
+	
+	&lt;placeholder name=&quot;SearchMenuPlaceholder&quot;/&gt;
+
+	&lt;placeholder name=&quot;ProjectMenuPlaceholder&quot;/&gt;
+
+	&lt;placeholder name=&quot;RunMenuPlaceholder&quot;/&gt;
+	
+	&lt;placeholder name=&quot;ToolsMenuPlaceholder&quot;/&gt;
+
+	&lt;menu name=&quot;WindowMenu&quot; action=&quot;WindowMenuAction&quot;&gt;
+		&lt;menuitem name=&quot;WindowNew&quot; action=&quot;NewWindowAction&quot;/&gt;
+		&lt;separator/&gt;
+		&lt;menuitem name=&quot;WindowSaveLayout&quot; action=&quot;SaveLayoutAction&quot;/&gt;
+		&lt;separator/&gt;
+		&lt;menu name=&quot;WindowLayouts&quot; action=&quot;LayoutsAction&quot;&gt;
+			&lt;placeholder name=&quot;Layouts&quot;/&gt;
+		&lt;/menu&gt;
+	&lt;/menu&gt;
+	
+	&lt;menu name=&quot;HelpMenu&quot; action=&quot;HelpMenuAction&quot;&gt;
+		&lt;placeholder name=&quot;HelpOps&quot;/&gt;
+		&lt;placeholder name=&quot;HelpPlugins&quot;/&gt;
+		&lt;menuitem name=&quot;HelpAbout&quot; action=&quot;AboutAction&quot;/&gt;
+	&lt;/menu&gt;
+&lt;/menubar&gt;
+&lt;toolbar name=&quot;toolbar&quot;&gt;
+	&lt;placeholder name=&quot;FileOpenPlaceholder&quot;/&gt;
+	&lt;toolitem name=&quot;QuitButton&quot; action=&quot;QuitAction&quot;/&gt;
+&lt;/toolbar&gt;

Added: branches/MonoDevelop-plan-43/src/plugins.build
===================================================================
--- branches/MonoDevelop-plan-43/src/plugins.build	2004-07-27 11:05:03 UTC (rev 1918)
+++ branches/MonoDevelop-plan-43/src/plugins.build	2004-07-27 17:19:59 UTC (rev 1919)
@@ -0,0 +1,69 @@
+&lt;?xml version=&quot;1.0&quot;?&gt;
+&lt;project name=&quot;monodevelop.plugins&quot; default=&quot;build&quot;&gt;
+    &lt;property name=&quot;plugin.dir&quot; value=&quot;${path::combine(lib.dir, 'monodevelop')}&quot;/&gt;
+    &lt;property name=&quot;ui.dir&quot; value=&quot;${path::combine(share.dir, 'ui')}&quot;/&gt;
+
+    &lt;!-- check for pkg-config dependencies and initialize properties --&gt;
+    &lt;target name=&quot;init&quot; description=&quot;initializes build properties&quot;&gt;
+        &lt;!-- check for gtk-sharp-2.0 --&gt;
+        &lt;if test=&quot;${pkg-config::exists('gtk-sharp-2.0')}&quot;&gt;
+            &lt;if test=&quot;${pkg-config::is-atleast-version('gtk-sharp-2.0', '1.2.99')}&quot;&gt;
+                &lt;property name=&quot;gtk-sharp.libs&quot; value=&quot;${pkg-config::get-link-flags('gtk-sharp-2.0')}&quot;/&gt;
+            &lt;/if&gt;
+        &lt;/if&gt;
+        &lt;!-- check for gnome-vfs-sharp-2.0 --&gt;
+        &lt;if test=&quot;${pkg-config::exists('gnome-vfs-sharp-2.0')}&quot;&gt;
+            &lt;if test=&quot;${pkg-config::is-atleast-version('gnome-vfs-sharp-2.0', '1.2.99')}&quot;&gt;
+                &lt;property name=&quot;gnome-vfs-sharp.libs&quot; value=&quot;${pkg-config::get-link-flags('gnome-vfs-sharp-2.0')}&quot;/&gt;
+            &lt;/if&gt;
+        &lt;/if&gt;
+        &lt;!-- check for gtksourceview-sharp --&gt;
+        &lt;if test=&quot;${pkg-config::exists('gtksourceview-sharp')}&quot;&gt;
+            &lt;if test=&quot;${pkg-config::is-atleast-version('gtksourceview-sharp', '0.3')}&quot;&gt;
+                &lt;property name=&quot;gtksourceview-sharp.libs&quot; value=&quot;${pkg-config::get-link-flags('gtksourceview-sharp')}&quot;/&gt;
+            &lt;/if&gt;
+        &lt;/if&gt;
+        
+        &lt;!-- output a message about required dependencies if not all dependencies exist --&gt;
+        &lt;if test=&quot;${not(property::exists('gtk-sharp.libs'))}&quot;&gt;
+            &lt;call target=&quot;dependencies&quot;/&gt;
+            &lt;fail message=&quot;gtk-sharp dependency not found&quot;/&gt;
+        &lt;/if&gt;
+        &lt;if test=&quot;${not(property::exists('gnome-vfs-sharp.libs'))}&quot;&gt;
+            &lt;call target=&quot;dependencies&quot;/&gt;
+            &lt;fail message=&quot;gnome-vfs-sharp dependency not found&quot;/&gt;
+        &lt;/if&gt;
+        &lt;if test=&quot;${not(property::exists('gtksourceview-sharp.libs'))}&quot;&gt;
+            &lt;call target=&quot;dependencies&quot;/&gt;
+            &lt;fail message=&quot;gtksourceview-sharp dependency not found&quot;/&gt;
+        &lt;/if&gt;
+    &lt;/target&gt;
+
+    &lt;!-- output a list of required dependencies --&gt;
+    &lt;target name=&quot;dependencies&quot; description=&quot;outputs a list of required dependencies&quot;&gt;
+        &lt;echo message=&quot;MonoDevelop requires the following dependencies:&quot;/&gt;
+        &lt;echo message=&quot;    gtk-sharp-2.0 &gt;= 1.2.99&quot;/&gt;
+        &lt;echo message=&quot;    gtksourceview-sharp &gt;= 0.4&quot;/&gt;
+        &lt;echo message=&quot;&quot;/&gt;
+        &lt;echo message=&quot;Install these packages first before building MonoDevelop&quot;/&gt;
+    &lt;/target&gt;
+
+    &lt;!-- cleanup build files --&gt;
+    &lt;target name=&quot;clean&quot; description=&quot;remove all files created by the build task&quot;&gt;
+        &lt;delete dir=&quot;${plugin.dir}&quot; failonerror=&quot;false&quot;/&gt;
+    &lt;/target&gt;
+
+    &lt;!-- build the project --&gt;
+    &lt;target name=&quot;build&quot; depends=&quot;init&quot; description=&quot;compiles the source code&quot;&gt;
+        &lt;!-- create directories --&gt;
+        &lt;mkdir dir=&quot;${plugin.dir}&quot;/&gt;
+        &lt;!-- build MonoDevelop.Node assembly --&gt;
+        &lt;nant buildfile=&quot;Node/node.build&quot; target=&quot;build&quot;/&gt;
+        &lt;!-- build MonoDevelop.Workbench assembly --&gt;
+        &lt;nant buildfile=&quot;Workbench/workbench.build&quot; target=&quot;build&quot;/&gt;
+        &lt;!-- build MonoDevelop.Content assembly --&gt;
+        &lt;nant buildfile=&quot;Content/content.build&quot; target=&quot;build&quot;/&gt;
+        &lt;!-- build MonoDevelop.Editor assembly --&gt;
+        &lt;nant buildfile=&quot;Editor/editor.build&quot; target=&quot;build&quot;/&gt;
+    &lt;/target&gt;
+&lt;/project&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001525.html">[Monodevelop-patches-list] r1918 - trunk/MonoDevelop/Core/src/Libraries/Gdl
</A></li>
	<LI>Next message: <A HREF="001527.html">[Monodevelop-patches-list] r1920 - trunk/md-website/tutorials
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1526">[ date ]</a>
              <a href="thread.html#1526">[ thread ]</a>
              <a href="subject.html#1526">[ subject ]</a>
              <a href="author.html#1526">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
