<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r1850 - in trunk/MonoDevelop/Core: . build/AddIns/AddIns/BackendBindings build/AddIns/AddIns/BackendBindings/templates build/data/templates data/resources src/Libraries/MonoDevelop.Core src/Libraries/MonoDevelop.Core/AddIns src/Main/Base src/Main/Base/Internal/Codons src/Main/Base/Internal/Codons/Templates src/Main/Base/Internal/Templates src/Main/StartUp
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1850%20-%20in%20trunk/MonoDevelop/Core%3A%20.%20build/AddIns/AddIns/BackendBindings%20build/AddIns/AddIns/BackendBindings/templates%20build/data/templates%20data/resources%20src/Libraries/MonoDevelop.Core%20src/Libraries/MonoDevelop.Core/AddIns%20src/Main/Base%20src/Main/Base/Internal/Codons%20src/Main/Base/Internal/Codons/Templates%20src/Main/Base/Internal/Templates%20src/Main/StartUp&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001456.html">
   <LINK REL="Next"  HREF="001458.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r1850 - in trunk/MonoDevelop/Core: . build/AddIns/AddIns/BackendBindings build/AddIns/AddIns/BackendBindings/templates build/data/templates data/resources src/Libraries/MonoDevelop.Core src/Libraries/MonoDevelop.Core/AddIns src/Main/Base src/Main/Base/Internal/Codons src/Main/Base/Internal/Codons/Templates src/Main/Base/Internal/Templates src/Main/StartUp</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1850%20-%20in%20trunk/MonoDevelop/Core%3A%20.%20build/AddIns/AddIns/BackendBindings%20build/AddIns/AddIns/BackendBindings/templates%20build/data/templates%20data/resources%20src/Libraries/MonoDevelop.Core%20src/Libraries/MonoDevelop.Core/AddIns%20src/Main/Base%20src/Main/Base/Internal/Codons%20src/Main/Base/Internal/Codons/Templates%20src/Main/Base/Internal/Templates%20src/Main/StartUp&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r1850 - in trunk/MonoDevelop/Core: . build/AddIns/AddIns/BackendBindings build/AddIns/AddIns/BackendBindings/templates build/data/templates data/resources src/Libraries/MonoDevelop.Core src/Libraries/MonoDevelop.Core/AddIns src/Main/Base src/Main/Base/Internal/Codons src/Main/Base/Internal/Codons/Templates src/Main/Base/Internal/Templates src/Main/StartUp">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Mon Jun 28 00:12:16 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001456.html">[Monodevelop-patches-list] r1849 - branches/MonoDevelop-0.5/src/Main/StartUp
</A></li>
        <LI>Next message: <A HREF="001458.html">[Monodevelop-patches-list] r1851 - in branches/MonoDevelop-0.5/src/Main/Base: . Internal/Project/Combine Internal/Project/Project Services/Project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1457">[ date ]</a>
              <a href="thread.html#1457">[ thread ]</a>
              <a href="subject.html#1457">[ subject ]</a>
              <a href="author.html#1457">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-06-28 00:12:16 -0400 (Mon, 28 Jun 2004)
New Revision: 1850

Added:
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/CSharpSessionStateWebService.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/CSharpWebService.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyCSharpFile.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyHTMLFile.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyJavaFile.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyNemerleFile.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyResourceFile.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyTextFile.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyXMLFile.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/GnomeSharpProgram.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/GtkSharpWindow.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaApplet.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaApplication.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaDialog.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaFrame.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaOKDialog.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaPanel.xft
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/Makefile.am
   trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/Templates/
   trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/Templates/FileTemplateCodon.cs
Removed:
   trunk/MonoDevelop/Core/build/data/templates/file/
Modified:
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/BackendBindings.addin.xml
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/JavaBinding.addin.xml
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/Makefile.am
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/NemerleBinding.addin.xml
   trunk/MonoDevelop/Core/build/data/templates/Makefile.am
   trunk/MonoDevelop/Core/configure.in
   trunk/MonoDevelop/Core/data/resources/AddIn.xsd
   trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/AddIns/AddIn.cs
   trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/ChangeLog
   trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/Makefile.am
   trunk/MonoDevelop/Core/src/Main/Base/ChangeLog
   trunk/MonoDevelop/Core/src/Main/Base/Internal/Templates/FileTemplate.cs
   trunk/MonoDevelop/Core/src/Main/Base/Makefile.am
   trunk/MonoDevelop/Core/src/Main/StartUp/ChangeLog
   trunk/MonoDevelop/Core/src/Main/StartUp/MonoDevelopMain.cs
Log:
move to a new system for file templates that have them specified in the xml files instead of inside some magic directory.


Modified: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/BackendBindings.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/BackendBindings.addin.xml	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/BackendBindings.addin.xml	2004-06-28 04:12:16 UTC (rev 1850)
@@ -13,6 +13,27 @@
 		&lt;Class id    = &quot;CSharp&quot;
 		       class = &quot;MonoDevelop.Services.CSharpAmbience&quot;/&gt;
 	&lt;/Extension&gt;
+
+	&lt;Extension path = &quot;/MonoDevelop/FileTemplates&quot;&gt;
+		&lt;FileTemplate id = &quot;SessionState&quot;
+		              location = &quot;templates/CSharpSessionStateWebService.xft&quot;/&gt;
+		&lt;FileTemplate id = &quot;WebService&quot;
+		              location = &quot;templates/CSharpWebService.xft&quot;/&gt;
+		&lt;FileTemplate id = &quot;Empty&quot;
+		              location = &quot;templates/EmptyCSharpFile.xft&quot;/&gt;
+		&lt;FileTemplate id = &quot;GnomeSharpProgram&quot;
+		              location = &quot;templates/GnomeSharpProgram.xft&quot;/&gt;
+		&lt;FileTemplate id = &quot;GtkSharpWindow&quot;
+		              location = &quot;templates/GtkSharpWindow.xft&quot;/&gt;
+		&lt;FileTemplate id = &quot;EmptyHTMLFile&quot;
+		              location = &quot;templates/EmptyHTMLFile.xft&quot;/&gt;
+		&lt;FileTemplate id = &quot;EmptyResourceFile&quot;
+		              location = &quot;templates/EmptyResourceFile.xft&quot;/&gt;
+		&lt;FileTemplate id = &quot;EmptyTextFile&quot;
+		              location = &quot;templates/EmptyTextFile.xft&quot;/&gt;
+		&lt;FileTemplate id = &quot;EmptyXMLFile&quot;
+		              location = &quot;templates/EmptyXMLFile.xft&quot;/&gt;
+	&lt;/Extension&gt;
 	
 	&lt;Extension path = &quot;/SharpDevelop/Workbench/FileFilter&quot;&gt;
 		&lt;FileFilter id = &quot;CSharp&quot;

Modified: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/JavaBinding.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/JavaBinding.addin.xml	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/JavaBinding.addin.xml	2004-06-28 04:12:16 UTC (rev 1850)
@@ -16,6 +16,23 @@
                 extensions = &quot;*.java&quot;/&gt;
   &lt;/Extension&gt;
 
+  &lt;Extension path = &quot;/MonoDevelop/FileTemplates&quot;&gt;
+    &lt;FileTemplate id = &quot;JavaApplet&quot;
+                  location = &quot;templates/JavaApplet.xft&quot;/&gt;
+    &lt;FileTemplate id = &quot;JavaApplication&quot;
+                  location = &quot;templates/JavaApplication.xft&quot;/&gt;
+    &lt;FileTemplate id = &quot;JavaDialog&quot;
+                  location = &quot;templates/JavaDialog.xft&quot;/&gt;
+    &lt;FileTemplate id = &quot;JavaFrame&quot;
+                  location = &quot;templates/JavaFrame.xft&quot;/&gt;
+    &lt;FileTemplate id = &quot;JavaOKDialog&quot;
+                  location = &quot;templates/JavaOKDialog.xft&quot;/&gt;
+    &lt;FileTemplate id = &quot;JavaPanel&quot;
+                  location = &quot;templates/JavaPanel.xft&quot;/&gt;
+    &lt;FileTemplate id = &quot;EmptyJavaFile&quot;
+                  location = &quot;templates/EmptyJavaFile.xft&quot;/&gt;
+  &lt;/Extension&gt;
+
   &lt;Extension path = &quot;/SharpDevelop/Workbench/ProjectOptions/ConfigurationProperties&quot;&gt;
     &lt;Conditional activeproject = &quot;Java&quot;&gt;
       &lt;DialogPanel id = &quot;JavaProjectPanel&quot;

Modified: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/Makefile.am	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/Makefile.am	2004-06-28 04:12:16 UTC (rev 1850)
@@ -1,8 +1,10 @@
 
+SUBDIRS = templates
+
 monodevelopdir = $(prefix)/lib/monodevelop
 backendbindingsdir = $(monodevelopdir)/AddIns/AddIns/BackendBindings
 
-backendbindings_DATA = BackendBindings.addin.xml
+backendbindings_DATA = BackendBindings.addin.xml ILAsmBinding.addin.xml JavaBinding.addin.xml NemerleBinding.addin.xml
 
 EXTRA_DIST = $(backendbindings_DATA)
 

Modified: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/NemerleBinding.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/NemerleBinding.addin.xml	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/NemerleBinding.addin.xml	2004-06-28 04:12:16 UTC (rev 1850)
@@ -16,6 +16,11 @@
                 extensions = &quot;*.n&quot;/&gt;
   &lt;/Extension&gt;
 
+  &lt;Extension path = &quot;/MonoDevelop/FileTemplates&quot;&gt;
+    &lt;FileTemplate id = &quot;EmptyNemerleFile&quot;
+                  location = &quot;templates/EmptyNemerleFile.xft&quot;/&gt;
+  &lt;/Extension&gt;
+
   &lt;Extension path = &quot;/SharpDevelop/Workbench/ProjectOptions/ConfigurationProperties&quot;&gt;
     &lt;Conditional activeproject = &quot;Nemerle&quot;&gt;
       &lt;DialogPanel id = &quot;NemerleCodeGenerationPanel&quot;


Property changes on: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates
___________________________________________________________________
Name: svn:ignore
   + Makefile.in
Makefile


Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/CSharpSessionStateWebService.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/CSharp/CSharpSessionStateWebService.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/CSharpWebService.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/CSharp/CSharpWebService.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyCSharpFile.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/CSharp/EmptyCSharpFile.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyHTMLFile.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/EmptyHTMLFile.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyJavaFile.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/EmptyJavaFile.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyNemerleFile.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/Nemerle/EmptyNemerleFile.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyResourceFile.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/EmptyResourceFile.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyTextFile.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/EmptyTextFile.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyXMLFile.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/EmptyXMLFile.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/GnomeSharpProgram.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/CSharp/GnomeSharpProgram.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/GtkSharpWindow.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/CSharp/GtkSharpWindow.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaApplet.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/JavaApplet.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaApplication.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/JavaApplication.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaDialog.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/JavaDialog.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaFrame.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/JavaFrame.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaOKDialog.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/JavaOKDialog.xft)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaPanel.xft (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/file/JavaPanel.xft)

Added: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/Makefile.am	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/Makefile.am	2004-06-28 04:12:16 UTC (rev 1850)
@@ -0,0 +1,22 @@
+monodevelopdir = $(prefix)/lib/monodevelop
+templatedir = $(monodevelopdir)/AddIns/AddIns/BackendBindings/templates
+
+template_DATA = CSharpSessionStateWebService.xft \
+CSharpWebService.xft \
+EmptyCSharpFile.xft \
+EmptyHTMLFile.xft \
+EmptyJavaFile.xft \
+EmptyNemerleFile.xft \
+EmptyResourceFile.xft \
+EmptyTextFile.xft \
+EmptyXMLFile.xft \
+GnomeSharpProgram.xft \
+GtkSharpWindow.xft \
+JavaApplet.xft \
+JavaApplication.xft \
+JavaDialog.xft \
+JavaFrame.xft \
+JavaOKDialog.xft \
+JavaPanel.xft
+
+EXTRA_DIST = $(template_DATA)

Modified: trunk/MonoDevelop/Core/build/data/templates/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/build/data/templates/Makefile.am	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/build/data/templates/Makefile.am	2004-06-28 04:12:16 UTC (rev 1850)
@@ -1 +1 @@
-SUBDIRS = file project
+SUBDIRS = project

Modified: trunk/MonoDevelop/Core/configure.in
===================================================================
--- trunk/MonoDevelop/Core/configure.in	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/configure.in	2004-06-28 04:12:16 UTC (rev 1850)
@@ -134,10 +134,6 @@
 build/data/resources/icons/Makefile
 build/data/resources/languages/Makefile
 build/data/templates/Makefile
-build/data/templates/file/Makefile
-build/data/templates/file/CSharp/Makefile
-build/data/templates/file/SharpDevelop/Makefile
-build/data/templates/file/Nemerle/Makefile
 build/data/templates/project/Makefile
 build/data/templates/project/CSharp/Makefile
 build/data/templates/project/Java/Makefile
@@ -148,6 +144,7 @@
 build/AddIns/Makefile
 build/AddIns/AddIns/Makefile
 build/AddIns/AddIns/BackendBindings/Makefile
+build/AddIns/AddIns/BackendBindings/templates/Makefile
 build/AddIns/AddIns/Misc/Makefile
 build/AddIns/AddIns/Misc/StartPage/Makefile
 build/AddIns/AddIns/Misc/Sonata/Makefile

Modified: trunk/MonoDevelop/Core/data/resources/AddIn.xsd
===================================================================
--- trunk/MonoDevelop/Core/data/resources/AddIn.xsd	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/data/resources/AddIn.xsd	2004-06-28 04:12:16 UTC (rev 1850)
@@ -37,6 +37,7 @@
 			&lt;xs:element ref=&quot;LanguageBinding&quot;/&gt;
 			&lt;xs:element ref=&quot;Class&quot;/&gt;
 			&lt;xs:element ref=&quot;MenuItem&quot;/&gt;
+			&lt;xs:element ref=&quot;FileTemplate&quot;/&gt;
 		&lt;/xs:choice&gt;
 		&lt;xs:attribute name=&quot;path&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;
 	&lt;/xs:complexType&gt;
@@ -122,6 +123,14 @@
 		&lt;/xs:complexContent&gt;
 	&lt;/xs:complexType&gt;
 	&lt;xs:element name=&quot;Class&quot; type=&quot;Class&quot;/&gt;
+	&lt;xs:complexType name=&quot;FileTemplate&quot;&gt;
+		&lt;xs:complexContent&gt;
+			&lt;xs:extension base=&quot;AbstractCodon&quot;&gt;
+				&lt;xs:attribute name=&quot;location&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;
+			&lt;/xs:extension&gt;
+		&lt;/xs:complexContent&gt;
+	&lt;/xs:complexType&gt;
+	&lt;xs:element name=&quot;FileTemplate&quot; type=&quot;FileTemplate&quot;/&gt;
 	&lt;xs:complexType name=&quot;DialogPanel&quot;&gt;
 		&lt;xs:complexContent&gt;
 			&lt;xs:extension base=&quot;AbstractCodon&quot;&gt;

Modified: trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/AddIns/AddIn.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/AddIns/AddIn.cs	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/AddIns/AddIn.cs	2004-06-28 04:12:16 UTC (rev 1850)
@@ -172,6 +172,7 @@
 			if (errors != null) {
 				ReportErrors(fileName);
 				errors = null;
+				Console.WriteLine (fileName + &quot; was malformed, returning&quot;);
 				return;
 			}
 			

Modified: trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/ChangeLog	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/ChangeLog	2004-06-28 04:12:16 UTC (rev 1850)
@@ -1,3 +1,10 @@
+2004-06-28  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
+
+	* AddIns/AddIn.cs: Add a C.WL so you dont get weird errors without
+	some more info.
+	* Makefile.am: fixup makefile so that if the AddIn.xsd changes, the
+	assembly is rebuilt.
+
 2004-06-23  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
 
 	* Services/ServiceManager.cs: protected ctor added.

Modified: trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/Makefile.am	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/src/Libraries/MonoDevelop.Core/Makefile.am	2004-06-28 04:12:16 UTC (rev 1850)
@@ -61,14 +61,21 @@
 
 build_sources = $(addprefix $(srcdir)/, $(FILES))
 
+RESOURCES = \
+./../../../data/resources/AddIn.xsd
+
+build_resources = $(addprefix $(srcdir)/, $(RESOURCES))
+
+COMPILE_RESOURCES = $(foreach res,$(build_resources), $(addprefix -resource:,$(res)),$(notdir $(res)))
+
 DLL = MonoDevelop.Core.dll
 
 REFS = /r:System.Drawing.dll
 
 all: $(DLL)
 
-$(DLL): $(build_sources)
-	mcs /debug /out:$(DLL) /target:library $(REFS) /define:LINUX /resource:$(srcdir)/../../../data/resources/AddIn.xsd,AddIn.xsd \
+$(DLL): $(build_sources) $(build_resources)
+	mcs /debug /out:$(DLL) /target:library $(REFS) /define:LINUX $(COMPILE_RESOURCES) \
 	$(build_sources) &amp;&amp; cp $(DLL) ../../../build/bin/.
 
 assemblydir = $(libdir)/monodevelop/bin

Modified: trunk/MonoDevelop/Core/src/Main/Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/ChangeLog	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/src/Main/Base/ChangeLog	2004-06-28 04:12:16 UTC (rev 1850)
@@ -1,3 +1,14 @@
+2004-06-28  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
+
+	* Internal/Codons/Templates/FileTemplateCodon.cs: add new codon for
+	handling file templates.
+	* Internal/Templates/FileTemplate.cs: Use the new codon based system
+	instead of the old find files that end in .xft system. This means
+	that you can now specify file templates in the addin.xml files and
+	it brings us one step closer to being able to split off the backend
+	bindings properly. (You will only see templates for bindings you have
+	installed).
+
 2004-06-26  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
 
 	* Gui/Dialogs/DirtyFilesDialog.cs: small layout fixes.

Added: trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/Templates/FileTemplateCodon.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/Templates/FileTemplateCodon.cs	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/Templates/FileTemplateCodon.cs	2004-06-28 04:12:16 UTC (rev 1850)
@@ -0,0 +1,41 @@
+// &lt;file&gt;
+//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
+//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
+//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
+//     &lt;version value=&quot;$version&quot;/&gt;
+// &lt;/file&gt;
+
+using System;
+using System.Collections;
+using System.Diagnostics;
+
+using MonoDevelop.Core.AddIns.Conditions;
+
+namespace MonoDevelop.Core.AddIns.Codons
+{
+	[CodonNameAttribute(&quot;FileTemplate&quot;)]
+	public class FileTemplateCodon : AbstractCodon
+	{
+		[XmlMemberAttribute(&quot;location&quot;, IsRequired = true)]
+		string location;
+		
+		public string Location {
+			get {
+				return location;
+			}
+			set {
+				location = value;
+			}
+		}
+		
+		/// &lt;summary&gt;
+		/// Creates an item with the specified sub items. And the current
+		/// Condition status for this item.
+		/// &lt;/summary&gt;
+		public override object BuildItem(object owner, ArrayList subItems, ConditionCollection conditions)
+		{
+			this.location = System.IO.Path.GetDirectoryName (this.AddIn.FileName) + System.IO.Path.DirectorySeparatorChar + this.location;
+			return this;
+		}
+	}
+}

Modified: trunk/MonoDevelop/Core/src/Main/Base/Internal/Templates/FileTemplate.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Internal/Templates/FileTemplate.cs	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/src/Main/Base/Internal/Templates/FileTemplate.cs	2004-06-28 04:12:16 UTC (rev 1850)
@@ -16,6 +16,9 @@
 using MonoDevelop.Core.Services;
 using MonoDevelop.Services;
 
+using MonoDevelop.Core.AddIns;
+using MonoDevelop.Core.AddIns.Codons;
+
 namespace MonoDevelop.Internal.Templates
 {
 	/// &lt;summary&gt;
@@ -153,16 +156,18 @@
 		{
 			FileUtilityService fileUtilityService = (FileUtilityService)ServiceManager.GetService(typeof(FileUtilityService));
 			PropertyService    propertyService    = (PropertyService)ServiceManager.GetService(typeof(PropertyService));
-			IMessageService    messageService     = (IMessageService)ServiceManager.GetService(typeof(IMessageService));
 			
-			StringCollection files = fileUtilityService.SearchDirectory(propertyService.DataDirectory + 
-			                            Path.DirectorySeparatorChar + &quot;templates&quot; + 
-			                            Path.DirectorySeparatorChar + &quot;file&quot;, &quot;*.xft&quot;);
-			foreach (string file in files) {
+			LoadTemplates ((FileTemplateCodon[])(AddInTreeSingleton.AddInTree.GetTreeNode (&quot;/MonoDevelop/FileTemplates&quot;).BuildChildItems (new object ()).ToArray (typeof (FileTemplateCodon))));
+		}
+
+		static void LoadTemplates (FileTemplateCodon[] codons)
+		{
+			IMessageService messageService = (IMessageService) ServiceManager.GetService (typeof (IMessageService));
+			foreach (FileTemplateCodon codon in codons) {
 				try {
-					LoadFileTemplate(file);
-				} catch(Exception e) {
-					messageService.ShowError(e, String.Format (GettextCatalog.GetString (&quot;Error loading template file {0}&quot;), file));
+					LoadFileTemplate (codon.Location);
+				} catch (Exception e) {
+					messageService.ShowError (e, String.Format (GettextCatalog.GetString (&quot;Error loading template file {0}&quot;), codon.Location));
 				}
 			}
 		}

Modified: trunk/MonoDevelop/Core/src/Main/Base/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Makefile.am	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/src/Main/Base/Makefile.am	2004-06-28 04:12:16 UTC (rev 1850)
@@ -242,6 +242,7 @@
 ./Internal/Codons/MenuItems/AbstractMenuCommand.cs \
 ./Internal/Codons/MenuItems/ICheckableMenuCommand.cs \
 ./Internal/Codons/MenuItems/MenuItemCodon.cs \
+./Internal/Codons/Templates/FileTemplateCodon.cs \
 ./Internal/DataStructures/PriorityQueue.cs \
 ./Internal/Parser/IRegion.cs \
 ./Internal/Parser/ICompilationUnitBase.cs \

Modified: trunk/MonoDevelop/Core/src/Main/StartUp/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/Main/StartUp/ChangeLog	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/src/Main/StartUp/ChangeLog	2004-06-28 04:12:16 UTC (rev 1850)
@@ -1,3 +1,7 @@
+2004-06-28  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
+
+	* MonoDevelopMain.cs: add Exit (0); and poof, issues are gone.
+
 2004-05-24  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at sevenl.net</A>&gt;
 
 	* Makefile.am: add Mono.Posix reference

Modified: trunk/MonoDevelop/Core/src/Main/StartUp/MonoDevelopMain.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/StartUp/MonoDevelopMain.cs	2004-06-28 04:01:50 UTC (rev 1849)
+++ trunk/MonoDevelop/Core/src/Main/StartUp/MonoDevelopMain.cs	2004-06-28 04:12:16 UTC (rev 1850)
@@ -143,6 +143,7 @@
 			// unloading services
 			File.Delete (socket_filename);
 			ServiceManager.UnloadAllServices();
+			System.Environment.Exit (0);
 		}
 
 		static string fileToOpen = String.Empty;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001456.html">[Monodevelop-patches-list] r1849 - branches/MonoDevelop-0.5/src/Main/StartUp
</A></li>
	<LI>Next message: <A HREF="001458.html">[Monodevelop-patches-list] r1851 - in branches/MonoDevelop-0.5/src/Main/Base: . Internal/Project/Combine Internal/Project/Project Services/Project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1457">[ date ]</a>
              <a href="thread.html#1457">[ thread ]</a>
              <a href="subject.html#1457">[ subject ]</a>
              <a href="author.html#1457">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
