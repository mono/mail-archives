<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r1862 - in trunk/MonoDevelop/Core: . build/AddIns/AddIns/BackendBindings build/AddIns/AddIns/BackendBindings/templates build/data data/resources src/Main/Base src/Main/Base/Internal/Codons/Templates src/Main/Base/Internal/Templates/ProjectTemplates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1862%20-%20in%20trunk/MonoDevelop/Core%3A%20.%20build/AddIns/AddIns/BackendBindings%20build/AddIns/AddIns/BackendBindings/templates%20build/data%20data/resources%20src/Main/Base%20src/Main/Base/Internal/Codons/Templates%20src/Main/Base/Internal/Templates/ProjectTemplates&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001468.html">
   <LINK REL="Next"  HREF="001470.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r1862 - in trunk/MonoDevelop/Core: . build/AddIns/AddIns/BackendBindings build/AddIns/AddIns/BackendBindings/templates build/data data/resources src/Main/Base src/Main/Base/Internal/Codons/Templates src/Main/Base/Internal/Templates/ProjectTemplates</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1862%20-%20in%20trunk/MonoDevelop/Core%3A%20.%20build/AddIns/AddIns/BackendBindings%20build/AddIns/AddIns/BackendBindings/templates%20build/data%20data/resources%20src/Main/Base%20src/Main/Base/Internal/Codons/Templates%20src/Main/Base/Internal/Templates/ProjectTemplates&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r1862 - in trunk/MonoDevelop/Core: . build/AddIns/AddIns/BackendBindings build/AddIns/AddIns/BackendBindings/templates build/data data/resources src/Main/Base src/Main/Base/Internal/Codons/Templates src/Main/Base/Internal/Templates/ProjectTemplates">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Tue Jun 29 18:11:10 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001468.html">[Monodevelop-patches-list] r1861 - trunk/md-website/release_notes
</A></li>
        <LI>Next message: <A HREF="001470.html">[Monodevelop-patches-list] r1863 - in trunk/md-website: . tutorials
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1469">[ date ]</a>
              <a href="thread.html#1469">[ thread ]</a>
              <a href="subject.html#1469">[ subject ]</a>
              <a href="author.html#1469">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-06-29 18:11:10 -0400 (Tue, 29 Jun 2004)
New Revision: 1862

Added:
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/BlankCombine.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/ConsoleProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyJavaProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/GladeSharpProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/GnomeSharpProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/GtkSharpProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/ILAsmConsoleProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/IkvmConsoleApplicationProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/IkvmGladeApplicationProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/IkvmGnomeApplicationProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/IkvmGtkApplicationProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaApplicationProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaConsoleApplicationProject.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/Library.xpt
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/NemerleEmptyProject.xpt
   trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/Templates/ProjectTemplateCodon.cs
Removed:
   trunk/MonoDevelop/Core/build/data/templates/
Modified:
   trunk/MonoDevelop/Core/ChangeLog
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/BackendBindings.addin.xml
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/ILAsmBinding.addin.xml
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/JavaBinding.addin.xml
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/NemerleBinding.addin.xml
   trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/Makefile.am
   trunk/MonoDevelop/Core/build/data/Makefile.am
   trunk/MonoDevelop/Core/configure.in
   trunk/MonoDevelop/Core/data/resources/AddIn.xsd
   trunk/MonoDevelop/Core/src/Main/Base/ChangeLog
   trunk/MonoDevelop/Core/src/Main/Base/Internal/Templates/ProjectTemplates/ProjectTemplate.cs
   trunk/MonoDevelop/Core/src/Main/Base/Makefile.am
Log:
convert to using project template codons, one more step away from the monolithic setup.


Modified: trunk/MonoDevelop/Core/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/ChangeLog	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/ChangeLog	2004-06-29 22:11:10 UTC (rev 1862)
@@ -1,3 +1,7 @@
+2004-06-29  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
+
+	* configure.in: remove dead directories.
+
 2004-06-24  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jluke at cfl.rr.com</A>&gt;
 
 	fix all the projects and generated makefiles

Modified: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/BackendBindings.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/BackendBindings.addin.xml	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/BackendBindings.addin.xml	2004-06-29 22:11:10 UTC (rev 1862)
@@ -34,6 +34,23 @@
 		&lt;FileTemplate id = &quot;EmptyXMLFile&quot;
 		              location = &quot;templates/EmptyXMLFile.xft&quot;/&gt;
 	&lt;/Extension&gt;
+
+	&lt;Extension path = &quot;/MonoDevelop/ProjectTemplates&quot;&gt;
+		&lt;ProjectTemplate id = &quot;ConsoleProject&quot;
+		                 location = &quot;templates/ConsoleProject.xpt&quot;/&gt;
+		&lt;ProjectTemplate id = &quot;EmptyProject&quot;
+		                 location = &quot;templates/EmptyProject.xpt&quot;/&gt;
+		&lt;ProjectTemplate id = &quot;GladeSharpProject&quot;
+		                 location = &quot;templates/GladeSharpProject.xpt&quot;/&gt;
+		&lt;ProjectTemplate id = &quot;GnomeSharpProject&quot;
+		                 location = &quot;templates/GnomeSharpProject.xpt&quot;/&gt;
+		&lt;ProjectTemplate id = &quot;GtkSharpProject&quot;
+		                 location = &quot;templates/GtkSharpProject.xpt&quot;/&gt;
+		&lt;ProjectTemplate id = &quot;Library&quot;
+		                 location = &quot;templates/Library.xpt&quot;/&gt;
+		&lt;ProjectTemplate id = &quot;BlankCombine&quot;
+		                 location = &quot;templates/BlankCombine.xpt&quot;/&gt;
+	&lt;/Extension&gt;
 	
 	&lt;Extension path = &quot;/SharpDevelop/Workbench/FileFilter&quot;&gt;
 		&lt;FileFilter id = &quot;CSharp&quot;

Modified: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/ILAsmBinding.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/ILAsmBinding.addin.xml	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/ILAsmBinding.addin.xml	2004-06-29 22:11:10 UTC (rev 1862)
@@ -9,6 +9,11 @@
     &lt;Import assembly = &quot;ILAsmBinding.dll&quot;/&gt;
   &lt;/Runtime&gt;
 
+  &lt;Extension path = &quot;/MonoDevelop/ProjectTemplates&quot;&gt;
+    &lt;ProjectTemplate id = &quot;ILAsmConsoleProject&quot;
+                     location = &quot;templates/ILAsmConsoleProject.xpt&quot;/&gt;
+  &lt;/Extension&gt;
+
   &lt;Extension path = &quot;/SharpDevelop/Workbench/ProjectOptions/ConfigurationProperties&quot;&gt;
     &lt;Conditional activeproject = &quot;ILAsm&quot;&gt;
       &lt;DialogPanel id = &quot;ILAsmCompilerParametersPanel&quot;

Modified: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/JavaBinding.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/JavaBinding.addin.xml	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/JavaBinding.addin.xml	2004-06-29 22:11:10 UTC (rev 1862)
@@ -33,6 +33,23 @@
                   location = &quot;templates/EmptyJavaFile.xft&quot;/&gt;
   &lt;/Extension&gt;
 
+  &lt;Extension path = &quot;/MonoDevelop/ProjectTemplates&quot;&gt;
+    &lt;ProjectTemplate id = &quot;EmptyJavaProject&quot;
+                     location = &quot;templates/EmptyJavaProject.xpt&quot;/&gt;
+    &lt;ProjectTemplate id = &quot;IkvmConsoleApplicationProject&quot;
+                     location = &quot;templates/IkvmConsoleApplicationProject.xpt&quot;/&gt;
+    &lt;ProjectTemplate id = &quot;IkvmGladeApplicationProject&quot;
+                     location = &quot;templates/IkvmGladeApplicationProject.xpt&quot;/&gt;
+    &lt;ProjectTemplate id = &quot;IkvmGnomeApplicationProject&quot;
+                     location = &quot;templates/IkvmGnomeApplicationProject.xpt&quot;/&gt;
+    &lt;ProjectTemplate id = &quot;IkvmGtkApplicationProject&quot;
+                     location = &quot;templates/IkvmGtkApplicationProject.xpt&quot;/&gt;
+    &lt;ProjectTemplate id = &quot;JavaApplicationProject&quot;
+                     location = &quot;templates/JavaApplicationProject.xpt&quot;/&gt;
+    &lt;ProjectTemplate id = &quot;JavaConsoleApplicationProject&quot;
+                     location = &quot;templates/JavaConsoleApplicationProject.xpt&quot;/&gt;
+  &lt;/Extension&gt;
+
   &lt;Extension path = &quot;/SharpDevelop/Workbench/ProjectOptions/ConfigurationProperties&quot;&gt;
     &lt;Conditional activeproject = &quot;Java&quot;&gt;
       &lt;DialogPanel id = &quot;JavaProjectPanel&quot;

Modified: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/NemerleBinding.addin.xml
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/NemerleBinding.addin.xml	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/NemerleBinding.addin.xml	2004-06-29 22:11:10 UTC (rev 1862)
@@ -21,6 +21,11 @@
                   location = &quot;templates/EmptyNemerleFile.xft&quot;/&gt;
   &lt;/Extension&gt;
 
+  &lt;Extension path = &quot;/MonoDevelop/ProjectTemplates&quot;&gt;
+    &lt;ProjectTemplate id = &quot;EmptyNemerleProject&quot;
+                     location = &quot;templates/NemerleEmptyProject.xpt&quot;/&gt;
+  &lt;/Extension&gt;
+
   &lt;Extension path = &quot;/SharpDevelop/Workbench/ProjectOptions/ConfigurationProperties&quot;&gt;
     &lt;Conditional activeproject = &quot;Nemerle&quot;&gt;
       &lt;DialogPanel id = &quot;NemerleCodeGenerationPanel&quot;

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/BlankCombine.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/Misc/BlankCombine.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/ConsoleProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/CSharp/ConsoleProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyJavaProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/Java/EmptyJavaProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/EmptyProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/CSharp/EmptyProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/GladeSharpProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/CSharp/GladeSharpProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/GnomeSharpProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/CSharp/GnomeSharpProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/GtkSharpProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/CSharp/GtkSharpProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/ILAsmConsoleProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/ILAsm/ConsoleProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/IkvmConsoleApplicationProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/Java/IkvmConsoleApplicationProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/IkvmGladeApplicationProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/Java/IkvmGladeApplicationProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/IkvmGnomeApplicationProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/Java/IkvmGnomeApplicationProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/IkvmGtkApplicationProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/Java/IkvmGtkApplicationProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaApplicationProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/Java/JavaApplicationProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/JavaConsoleApplicationProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/Java/JavaConsoleApplicationProject.xpt)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/Library.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/CSharp/Library.xpt)

Modified: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/Makefile.am	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/Makefile.am	2004-06-29 22:11:10 UTC (rev 1862)
@@ -17,6 +17,22 @@
 JavaDialog.xft \
 JavaFrame.xft \
 JavaOKDialog.xft \
-JavaPanel.xft
+JavaPanel.xft \
+BlankCombine.xpt \
+ConsoleProject.xpt \
+EmptyJavaProject.xpt \
+EmptyProject.xpt \
+GladeSharpProject.xpt \
+GnomeSharpProject.xpt \
+GtkSharpProject.xpt \
+IkvmConsoleApplicationProject.xpt \
+IkvmGladeApplicationProject.xpt \
+IkvmGnomeApplicationProject.xpt \
+IkvmGtkApplicationProject.xpt \
+ILAsmConsoleProject.xpt \
+JavaApplicationProject.xpt \
+JavaConsoleApplicationProject.xpt \
+Library.xpt \
+NemerleEmptyProject.xpt 
 
 EXTRA_DIST = $(template_DATA)

Copied: trunk/MonoDevelop/Core/build/AddIns/AddIns/BackendBindings/templates/NemerleEmptyProject.xpt (from rev 1847, trunk/MonoDevelop/Core/build/data/templates/project/Nemerle/EmptyProject.xpt)

Modified: trunk/MonoDevelop/Core/build/data/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/build/data/Makefile.am	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/build/data/Makefile.am	2004-06-29 22:11:10 UTC (rev 1862)
@@ -1 +1 @@
-SUBDIRS = resources options templates
+SUBDIRS = resources options

Modified: trunk/MonoDevelop/Core/configure.in
===================================================================
--- trunk/MonoDevelop/Core/configure.in	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/configure.in	2004-06-29 22:11:10 UTC (rev 1862)
@@ -133,13 +133,6 @@
 build/data/resources/css/Makefile
 build/data/resources/icons/Makefile
 build/data/resources/languages/Makefile
-build/data/templates/Makefile
-build/data/templates/project/Makefile
-build/data/templates/project/CSharp/Makefile
-build/data/templates/project/Java/Makefile
-build/data/templates/project/ILAsm/Makefile
-build/data/templates/project/Misc/Makefile
-build/data/templates/project/Nemerle/Makefile
 build/doc/Makefile
 build/AddIns/Makefile
 build/AddIns/AddIns/Makefile

Modified: trunk/MonoDevelop/Core/data/resources/AddIn.xsd
===================================================================
--- trunk/MonoDevelop/Core/data/resources/AddIn.xsd	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/data/resources/AddIn.xsd	2004-06-29 22:11:10 UTC (rev 1862)
@@ -38,6 +38,7 @@
 			&lt;xs:element ref=&quot;Class&quot;/&gt;
 			&lt;xs:element ref=&quot;MenuItem&quot;/&gt;
 			&lt;xs:element ref=&quot;FileTemplate&quot;/&gt;
+			&lt;xs:element ref=&quot;ProjectTemplate&quot;/&gt;
 		&lt;/xs:choice&gt;
 		&lt;xs:attribute name=&quot;path&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;
 	&lt;/xs:complexType&gt;
@@ -131,6 +132,14 @@
 		&lt;/xs:complexContent&gt;
 	&lt;/xs:complexType&gt;
 	&lt;xs:element name=&quot;FileTemplate&quot; type=&quot;FileTemplate&quot;/&gt;
+	&lt;xs:complexType name=&quot;ProjectTemplate&quot;&gt;
+		&lt;xs:complexContent&gt;
+			&lt;xs:extension base=&quot;AbstractCodon&quot;&gt;
+				&lt;xs:attribute name=&quot;location&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;
+			&lt;/xs:extension&gt;
+		&lt;/xs:complexContent&gt;
+	&lt;/xs:complexType&gt;
+	&lt;xs:element name=&quot;ProjectTemplate&quot; type=&quot;ProjectTemplate&quot;/&gt;
 	&lt;xs:complexType name=&quot;DialogPanel&quot;&gt;
 		&lt;xs:complexContent&gt;
 			&lt;xs:extension base=&quot;AbstractCodon&quot;&gt;

Modified: trunk/MonoDevelop/Core/src/Main/Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/ChangeLog	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/src/Main/Base/ChangeLog	2004-06-29 22:11:10 UTC (rev 1862)
@@ -1,3 +1,11 @@
+2004-06-29  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
+
+	* Internal/Codons/Templates/ProjectTemplateCodon.cs: new codon for
+	project templates.
+	* Internal/Templates/ProjectTemplates/ProjectTemplate.cs: convert to
+	using new codon based system.
+	* Makefile.am: add new file.
+
 2004-06-28  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at off.net</A>&gt;
 
 	* Gui/Workbench/Layouts/SdiWorkspaceWindow.cs: make sure everything is

Added: trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/Templates/ProjectTemplateCodon.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/Templates/ProjectTemplateCodon.cs	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/src/Main/Base/Internal/Codons/Templates/ProjectTemplateCodon.cs	2004-06-29 22:11:10 UTC (rev 1862)
@@ -0,0 +1,41 @@
+// &lt;file&gt;
+//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
+//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
+//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
+//     &lt;version value=&quot;$version&quot;/&gt;
+// &lt;/file&gt;
+
+using System;
+using System.Collections;
+using System.Diagnostics;
+
+using MonoDevelop.Core.AddIns.Conditions;
+
+namespace MonoDevelop.Core.AddIns.Codons
+{
+	[CodonNameAttribute(&quot;ProjectTemplate&quot;)]
+	public class ProjectTemplateCodon : AbstractCodon
+	{
+		[XmlMemberAttribute(&quot;location&quot;, IsRequired = true)]
+		string location;
+		
+		public string Location {
+			get {
+				return location;
+			}
+			set {
+				location = value;
+			}
+		}
+		
+		/// &lt;summary&gt;
+		/// Creates an item with the specified sub items. And the current
+		/// Condition status for this item.
+		/// &lt;/summary&gt;
+		public override object BuildItem(object owner, ArrayList subItems, ConditionCollection conditions)
+		{
+			this.location = System.IO.Path.GetDirectoryName (this.AddIn.FileName) + System.IO.Path.DirectorySeparatorChar + this.location;
+			return this;
+		}
+	}
+}

Modified: trunk/MonoDevelop/Core/src/Main/Base/Internal/Templates/ProjectTemplates/ProjectTemplate.cs
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Internal/Templates/ProjectTemplates/ProjectTemplate.cs	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/src/Main/Base/Internal/Templates/ProjectTemplates/ProjectTemplate.cs	2004-06-29 22:11:10 UTC (rev 1862)
@@ -19,6 +19,9 @@
 using MonoDevelop.Services;
 using MonoDevelop.Gui.Dialogs;
 
+using MonoDevelop.Core.AddIns;
+using MonoDevelop.Core.AddIns.Codons;
+
 namespace MonoDevelop.Internal.Templates
 {
 	public class OpenFileAction
@@ -211,16 +214,17 @@
 		{
 			FileUtilityService fileUtilityService = (FileUtilityService)ServiceManager.GetService(typeof(FileUtilityService));
 			PropertyService    propertyService    = (PropertyService)ServiceManager.GetService(typeof(PropertyService));
-			StringCollection files = fileUtilityService.SearchDirectory(propertyService.DataDirectory + 
-			                                                            Path.DirectorySeparatorChar + &quot;templates&quot; +
-			                                                            Path.DirectorySeparatorChar + &quot;project&quot;, &quot;*.xpt&quot;);
-			foreach (string fileName in files) {
+			LoadTemplates ((ProjectTemplateCodon[])(AddInTreeSingleton.AddInTree.GetTreeNode (&quot;/MonoDevelop/ProjectTemplates&quot;).BuildChildItems (new object ()).ToArray (typeof (ProjectTemplateCodon))));
+		}
+
+		static void LoadTemplates (ProjectTemplateCodon[] codons)
+                {
+			IMessageService messageService = (IMessageService) ServiceManager.GetService (typeof (IMessageService));
+			foreach (ProjectTemplateCodon codon in codons) {
 				try {
-					ProjectTemplates.Add(new ProjectTemplate(fileName));
+					ProjectTemplates.Add (new ProjectTemplate (codon.Location));
 				} catch (Exception e) {
-					IResourceService resourceService = (IResourceService)ServiceManager.GetService(typeof(IResourceService));
-					IMessageService messageService =(IMessageService)ServiceManager.GetService(typeof(IMessageService));
-					messageService.ShowError(e, resourceService.GetString(&quot;Internal.Templates.ProjectTemplate.LoadingError&quot;) + &quot;\n(&quot; + fileName + &quot;)\n&quot;);
+					messageService.ShowError (e, String.Format (GettextCatalog.GetString (&quot;Error loading template file {0}&quot;), codon.Location));
 				}
 			}
 		}

Modified: trunk/MonoDevelop/Core/src/Main/Base/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/Main/Base/Makefile.am	2004-06-29 19:15:11 UTC (rev 1861)
+++ trunk/MonoDevelop/Core/src/Main/Base/Makefile.am	2004-06-29 22:11:10 UTC (rev 1862)
@@ -243,6 +243,7 @@
 ./Internal/Codons/MenuItems/ICheckableMenuCommand.cs \
 ./Internal/Codons/MenuItems/MenuItemCodon.cs \
 ./Internal/Codons/Templates/FileTemplateCodon.cs \
+./Internal/Codons/Templates/ProjectTemplateCodon.cs \
 ./Internal/DataStructures/PriorityQueue.cs \
 ./Internal/Parser/IRegion.cs \
 ./Internal/Parser/ICompilationUnitBase.cs \


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001468.html">[Monodevelop-patches-list] r1861 - trunk/md-website/release_notes
</A></li>
	<LI>Next message: <A HREF="001470.html">[Monodevelop-patches-list] r1863 - in trunk/md-website: . tutorials
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1469">[ date ]</a>
              <a href="thread.html#1469">[ thread ]</a>
              <a href="subject.html#1469">[ subject ]</a>
              <a href="author.html#1469">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
