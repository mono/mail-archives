<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r620 - in trunk/MonoDevelop: . gtkmozembed-sharp src/Main/Base/Gui/Dialogs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r620%20-%20in%20trunk/MonoDevelop%3A%20.%20gtkmozembed-sharp%20src/Main/Base/Gui/Dialogs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000224.html">
   <LINK REL="Next"  HREF="000226.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r620 - in trunk/MonoDevelop: . gtkmozembed-sharp src/Main/Base/Gui/Dialogs</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r620%20-%20in%20trunk/MonoDevelop%3A%20.%20gtkmozembed-sharp%20src/Main/Base/Gui/Dialogs&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r620 - in trunk/MonoDevelop: . gtkmozembed-sharp src/Main/Base/Gui/Dialogs">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Fri Jan 23 16:53:01 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000224.html">[Monodevelop-patches-list] r619 - trunk/MonoDevelop/src/Libraries/ICSharpCode.TextEditor/src/Gui
</A></li>
        <LI>Next message: <A HREF="000226.html">[Monodevelop-patches-list] r621 - in trunk/MonoDevelop: . gtkmozembed-sharp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#225">[ date ]</a>
              <a href="thread.html#225">[ thread ]</a>
              <a href="subject.html#225">[ subject ]</a>
              <a href="author.html#225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jluke
Date: 2004-01-23 16:53:01 -0500 (Fri, 23 Jan 2004)
New Revision: 620

Modified:
   trunk/MonoDevelop/README
   trunk/MonoDevelop/TODO
   trunk/MonoDevelop/gtkmozembed-sharp/Makefile
   trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/CommonAboutDialog.cs
Log:
rework drawing of About Scrollbox and remove unused properties
add info to README


Modified: trunk/MonoDevelop/README
===================================================================
--- trunk/MonoDevelop/README	2004-01-23 01:47:07 UTC (rev 619)
+++ trunk/MonoDevelop/README	2004-01-23 21:53:01 UTC (rev 620)
@@ -1,5 +1,7 @@
 This is a port of SharpDevelop to Gtk# and Mono.
 
+Compiling and running
+---------------------
 To compile run the following command:
 make PREFIX=/usr/local
 
@@ -8,13 +10,25 @@
 To run MonoDevelop:
 ./monodevelop
 
-EXAMPLE:
+Example:
 make clean &amp;&amp; make PREFIX=/usr &amp;&amp; ./monodevelop
 
+Dependencies
+------------
 You need Mono and Gtk# cvs, and ORBit2-2.8.3 or newer
 
 Mono must be installed with ICU enabled.
 
+References
+----------
+SharpDevelop Tech Notes
+<A HREF="http://www.icsharpcode.net/TechNotes/">http://www.icsharpcode.net/TechNotes/</A>
+
 We are attempting to follow the HIG in certain areas especially, particularly dialogs.
 
 You can find a copy of the HIG at <A HREF="http://developer.gnome.org/projects/gup/hig/1.0/">http://developer.gnome.org/projects/gup/hig/1.0/</A>
+
+Discussion, Bugs, Patches
+-------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">+monodevelop-list at lists.ximian.com</A> (questions and discussion)
+<A HREF="http://bugzilla.ximian.com">http://bugzilla.ximian.com</A> (bugs and patches)

Modified: trunk/MonoDevelop/TODO
===================================================================
--- trunk/MonoDevelop/TODO	2004-01-23 01:47:07 UTC (rev 619)
+++ trunk/MonoDevelop/TODO	2004-01-23 21:53:01 UTC (rev 620)
@@ -16,7 +16,6 @@
 - When too many tabs are opened they go out for the window and don't show
 - printing support
 - some keywords should be bold when highlighted
-- make fonts choice persist (after restarting)
 - organize this list (Bugzilla maybe?)
 - switch to a proper build system (mbuild or auto*?)
 - Allow show hidden (.*) files/directories in the file browser.

Modified: trunk/MonoDevelop/gtkmozembed-sharp/Makefile
===================================================================
--- trunk/MonoDevelop/gtkmozembed-sharp/Makefile	2004-01-23 01:47:07 UTC (rev 619)
+++ trunk/MonoDevelop/gtkmozembed-sharp/Makefile	2004-01-23 21:53:01 UTC (rev 620)
@@ -13,7 +13,7 @@
 	 	gapi-codegen --generate gtkmozembed-api.xml --include $(INCLUDE_APIS) --outdir=generated --customdir=. --assembly-name=gtkmozembed-sharp &amp;&amp; touch generated-stamp
 
 $(ASSEMBLY): generated-stamp
-	$(MCS) --unsafe --target library -L @prefix@/lib \
+	$(MCS) --unsafe --target library \
 	-r glib-sharp.dll -r gtk-sharp.dll -r gdk-sharp.dll \
 	--recurse '*.cs' -o $(ASSEMBLY)
  

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/CommonAboutDialog.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/CommonAboutDialog.cs	2004-01-23 01:47:07 UTC (rev 619)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/CommonAboutDialog.cs	2004-01-23 21:53:01 UTC (rev 620)
@@ -6,15 +6,12 @@
 // &lt;/file&gt;
 
 using System;
-using System.Resources;
-using System.IO;
-using System.Reflection;
-using System.Runtime.CompilerServices;
 
 using ICSharpCode.SharpDevelop.Gui;
 using ICSharpCode.Core.Properties;
 using ICSharpCode.Core.Services;
-using ICSharpCode.SharpDevelop.Gui.HtmlControl;
+//using ICSharpCode.SharpDevelop.Gui.HtmlControl;
+
 using Gdk;
 using Gtk;
 using GtkSharp;
@@ -30,37 +27,9 @@
 		int scroll = -220;
 		uint hndlr;
 		Pango.Font font;
-		Drawable dr;
 		bool initial = true;
-		Gdk.GC gc;
+		Pango.Layout layout;
 		
-		public int ScrollY {
-			get {
-				return scroll;
-			}
-			set {
-				scroll = value;
-			}
-		}
-		
-		public Pixbuf Image {
-			get {
-				return image;
-			}
-			set {
-				image = value;
-			}
-		}
-		
-		public string ScrollText {
-			get {
-				return text;
-			}
-			set {
-				text =  value;
-			}
-		}
-		
 		internal uint Handler
 		{
 			get { return hndlr; }
@@ -78,9 +47,9 @@
 			this.ExposeEvent += new ExposeEventHandler (OnExposed);
 			
 			ResourceService resourceService = (ResourceService)ServiceManager.Services.GetService(typeof(IResourceService));
-			this.Image = resourceService.GetBitmap (&quot;Icons.AboutImage&quot;);
+			image = resourceService.GetBitmap (&quot;Icons.AboutImage&quot;);
 			
-			text = &quot;Ported and developed by:\nTodd Berman\nPedro Abelleira Seco\nJohn Luke\nDaniel Kornhauser\norph\nnricciar\njba\nBen Maurer&quot;;
+			text = &quot;&lt;b&gt;Ported and developed by:&lt;/b&gt;\nTodd Berman\nPedro Abelleira Seco\nJohn Luke\nDaniel Kornhauser\norph\nnricciar\njba\nBen Maurer&quot;;
 			
 			//text = &quot;\&quot;The most successful method of programming is to begin a program as simply as possible, test it, and then add to the program until it performs the required job.\&quot;\n    -- PDP8 handbook, Pg 9-64\n\n\n&quot;;
 			//text = &quot;\&quot;The primary purpose of the DATA statement is to give names to constants; instead of referring to pi as 3.141592653589793 at every\n appearance, the variable PI can be given that value with a DATA statement and used instead of the longer form of the constant. This also simplifies modifying the program, should the value of pi change.\&quot;\n    -- FORTRAN manual for Xerox computers\n\n\n&quot;;
@@ -104,26 +73,14 @@
 		private void DrawImage ()
 		{
 			if (image != null) {
-				dr.DrawPixbuf (gc, Image, 0, 0, 0, 0, -1, -1, RgbDither.Normal,  0,  0);
-				
+				this.GdkWindow.DrawPixbuf (this.Style.BackgroundGC (StateType.Normal), image, 0, 0, 0, 0, -1, -1, RgbDither.Normal,  0,  0);
 			}
 		}
 		
 		private void DrawText ()
 		{
-			Pango.Layout layout = new Pango.Layout (this.PangoContext);
-			// FIXME: this seems wrong but works
-			layout.Width = 253952;
-			layout.Wrap = Pango.WrapMode.Word;
-			FontDescription fd = FontDescription.FromString (&quot;Tahoma 10&quot;);
-			layout.FontDescription = fd;
-			layout.SetText (text);
-			dr.DrawLayout (gc, 200, 0 - scroll, layout);
-
-			//Console.WriteLine (layout.Size);
-			//Console.WriteLine (layout.Width);
-			//Console.WriteLine (layout.LineCount);
-				
+			this.GdkWindow.DrawLayout (this.Style.TextGC (StateType.Normal), 200, 0 - scroll, layout);
+	
 			if (scroll &gt; 220 ) {
 				scroll = -scroll;
 			}
@@ -137,10 +94,14 @@
 
 		protected void OnRealized (object o, EventArgs args)
 		{
-			int xoff;
-			int yoff;
-			this.GdkWindow.GetInternalPaintInfo (out dr, out xoff, out yoff);
-			gc = new Gdk.GC (dr);	
+			layout = new Pango.Layout (this.PangoContext);
+			Console.WriteLine (this.GdkWindow.Size);
+			// FIXME: this seems wrong but works
+			layout.Width = 253952;
+			layout.Wrap = Pango.WrapMode.Word;
+			FontDescription fd = FontDescription.FromString (&quot;Tahoma 10&quot;);
+			layout.FontDescription = fd;
+			layout.SetMarkup (text);	
 		}
 	}
 	
@@ -153,12 +114,6 @@
 		//ChangeLogTabPage changelog;
 		ScrollBox aboutPictureScrollBox;
 		
-		public ScrollBox ScrollBox {
-			get {
-				return (ScrollBox) aboutPictureScrollBox;
-			}
-		}
-		
 		static PropertyService propertyService = (PropertyService)ServiceManager.Services.GetService(typeof(PropertyService));
 		
 		static CommonAboutDialog ()
@@ -195,7 +150,7 @@
 		public new int Run ()
 		{
 			int tmp = base.Run ();
-			Timeout.Remove (ScrollBox.Handler);
+			Timeout.Remove (aboutPictureScrollBox.Handler);
 			return tmp;
 		}
 		


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000224.html">[Monodevelop-patches-list] r619 - trunk/MonoDevelop/src/Libraries/ICSharpCode.TextEditor/src/Gui
</A></li>
	<LI>Next message: <A HREF="000226.html">[Monodevelop-patches-list] r621 - in trunk/MonoDevelop: . gtkmozembed-sharp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#225">[ date ]</a>
              <a href="thread.html#225">[ thread ]</a>
              <a href="subject.html#225">[ subject ]</a>
              <a href="author.html#225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
