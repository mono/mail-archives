<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r624 - in trunk/MonoDevelop: data/resources/glade src/Main/Base/Commands src/Main/Base/Gui/Dialogs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r624%20-%20in%20trunk/MonoDevelop%3A%20data/resources/glade%20src/Main/Base/Commands%20src/Main/Base/Gui/Dialogs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000228.html">
   <LINK REL="Next"  HREF="000230.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r624 - in trunk/MonoDevelop: data/resources/glade src/Main/Base/Commands src/Main/Base/Gui/Dialogs</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r624%20-%20in%20trunk/MonoDevelop%3A%20data/resources/glade%20src/Main/Base/Commands%20src/Main/Base/Gui/Dialogs&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r624 - in trunk/MonoDevelop: data/resources/glade src/Main/Base/Commands src/Main/Base/Gui/Dialogs">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Fri Jan 23 21:29:00 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000228.html">[Monodevelop-patches-list] r623 - trunk/MonoDevelop/src/Libraries/MonoDevelop.Gui/Tree
</A></li>
        <LI>Next message: <A HREF="000230.html">[Monodevelop-patches-list] r625 - in trunk/MonoDevelop: . src/Main/Base/Gui/Components
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#229">[ date ]</a>
              <a href="thread.html#229">[ thread ]</a>
              <a href="subject.html#229">[ subject ]</a>
              <a href="author.html#229">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dkor
Date: 2004-01-23 21:29:00 -0500 (Fri, 23 Jan 2004)
New Revision: 624

Modified:
   trunk/MonoDevelop/data/resources/glade/Base.glade
   trunk/MonoDevelop/src/Main/Base/Commands/HelpCommands.cs
   trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/ViewGPLDialog.cs
Log:
Ported GPLDialog to glade.


Modified: trunk/MonoDevelop/data/resources/glade/Base.glade
===================================================================
--- trunk/MonoDevelop/data/resources/glade/Base.glade	2004-01-24 00:16:08 UTC (rev 623)
+++ trunk/MonoDevelop/data/resources/glade/Base.glade	2004-01-24 02:29:00 UTC (rev 624)
@@ -1170,4 +1170,88 @@
   &lt;/child&gt;
 &lt;/widget&gt;
 
+&lt;widget class=&quot;GtkDialog&quot; id=&quot;GPLDialog&quot;&gt;
+  &lt;property name=&quot;border_width&quot;&gt;6&lt;/property&gt;
+  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;has_default&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;title&quot; translatable=&quot;yes&quot;&gt;GNU GENERAL PUBLIC LICENSE&lt;/property&gt;
+  &lt;property name=&quot;type&quot;&gt;GTK_WINDOW_TOPLEVEL&lt;/property&gt;
+  &lt;property name=&quot;window_position&quot;&gt;GTK_WIN_POS_NONE&lt;/property&gt;
+  &lt;property name=&quot;modal&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;default_width&quot;&gt;600&lt;/property&gt;
+  &lt;property name=&quot;default_height&quot;&gt;400&lt;/property&gt;
+  &lt;property name=&quot;resizable&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;destroy_with_parent&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;has_separator&quot;&gt;False&lt;/property&gt;
+
+  &lt;child internal-child=&quot;vbox&quot;&gt;
+    &lt;widget class=&quot;GtkVBox&quot; id=&quot;dialog-vbox1&quot;&gt;
+      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+      &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+      &lt;child internal-child=&quot;action_area&quot;&gt;
+	&lt;widget class=&quot;GtkHButtonBox&quot; id=&quot;dialog-action_area1&quot;&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;layout_style&quot;&gt;GTK_BUTTONBOX_END&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkButton&quot; id=&quot;closebutton1&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;label&quot;&gt;gtk-close&lt;/property&gt;
+	      &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+	      &lt;property name=&quot;response_id&quot;&gt;-7&lt;/property&gt;
+	      &lt;signal name=&quot;clicked&quot; handler=&quot;OnCloseButtonClicked&quot; last_modification_time=&quot;Sat, 24 Jan 2004 01:26:19 GMT&quot;/&gt;
+	    &lt;/widget&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;pack_type&quot;&gt;GTK_PACK_END&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+
+      &lt;child&gt;
+	&lt;widget class=&quot;GtkScrolledWindow&quot; id=&quot;scrolledwindow1&quot;&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;hscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+	  &lt;property name=&quot;vscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+	  &lt;property name=&quot;shadow_type&quot;&gt;GTK_SHADOW_NONE&lt;/property&gt;
+	  &lt;property name=&quot;window_placement&quot;&gt;GTK_CORNER_TOP_LEFT&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkTextView&quot; id=&quot;view&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;editable&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;justification&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+	      &lt;property name=&quot;wrap_mode&quot;&gt;GTK_WRAP_NONE&lt;/property&gt;
+	      &lt;property name=&quot;cursor_visible&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;pixels_above_lines&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;pixels_below_lines&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;pixels_inside_wrap&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;left_margin&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;right_margin&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;indent&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;text&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
+	    &lt;/widget&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+    &lt;/widget&gt;
+  &lt;/child&gt;
+&lt;/widget&gt;
+
 &lt;/glade-interface&gt;

Modified: trunk/MonoDevelop/src/Main/Base/Commands/HelpCommands.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Commands/HelpCommands.cs	2004-01-24 00:16:08 UTC (rev 623)
+++ trunk/MonoDevelop/src/Main/Base/Commands/HelpCommands.cs	2004-01-24 02:29:00 UTC (rev 624)
@@ -41,8 +41,6 @@
 		public override void Run()
 		{
 			ViewGPLDialog vgd = new ViewGPLDialog();
-			vgd.Run ();
-			vgd.Hide ();
 		}
 	}
 	

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/ViewGPLDialog.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/ViewGPLDialog.cs	2004-01-24 00:16:08 UTC (rev 623)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/ViewGPLDialog.cs	2004-01-24 02:29:00 UTC (rev 624)
@@ -15,9 +15,12 @@
 
 namespace ICSharpCode.SharpDevelop.Gui.Dialogs
 {
-	public class ViewGPLDialog : Dialog 
+	public class ViewGPLDialog 
 	{
-		public ViewGPLDialog () : base (&quot;GNU GENERAL PUBLIC LICENSE&quot;, (Window) WorkbenchSingleton.Workbench, DialogFlags.DestroyWithParent)
+		[Glade.Widget] Gtk.TextView  view;
+		[Glade.Widget] Gtk.Dialog  GPLDialog;
+
+		public ViewGPLDialog () 
 		{
 			FileUtilityService fileUtilityService = (FileUtilityService)ServiceManager.Services.GetService(typeof(FileUtilityService));
 			string filename = fileUtilityService.SharpDevelopRootPath + 
@@ -25,25 +28,18 @@
 			System.IO.Path.DirectorySeparatorChar + &quot;license.txt&quot;;
 			
 			if (fileUtilityService.TestFileExists(filename)) {
-				this.BorderWidth = 6;
-				this.DefaultResponse = (int) ResponseType.Close;
-				this.HasSeparator = false;	
-				this.SetDefaultSize (600, 400);
-				this.AddButton (Stock.Close, (int) ResponseType.Close);
-				
-				ScrolledWindow sw = new  ScrolledWindow ();
-				sw.SetPolicy (PolicyType.Automatic, PolicyType.Automatic);
-				
-				TextView view = new TextView ();
-				view.Editable = false;
-				view.CursorVisible = false;
-				StreamReader streamReader = new StreamReader (filename);
-				view.Buffer.Text = streamReader.ReadToEnd ();
-
-				sw.Add (view);
-				this.VBox.PackStart(sw);
-				this.ShowAll ();
+				Glade.XML gplDialog = new Glade.XML (null, &quot;Base.glade&quot;, &quot;GPLDialog&quot;, null);
+				gplDialog.Autoconnect (this);
+				GPLDialog.DefaultResponse = (int) ResponseType.Close;
+ 				StreamReader streamReader = new StreamReader (filename);
+ 				view.Buffer.Text = streamReader.ReadToEnd ();
 			}
 		}
+
+		protected void OnCloseButtonClicked(object sender, EventArgs e)
+		{
+			GPLDialog.Hide();	
+		}
+
 	}
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000228.html">[Monodevelop-patches-list] r623 - trunk/MonoDevelop/src/Libraries/MonoDevelop.Gui/Tree
</A></li>
	<LI>Next message: <A HREF="000230.html">[Monodevelop-patches-list] r625 - in trunk/MonoDevelop: . src/Main/Base/Gui/Components
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#229">[ date ]</a>
              <a href="thread.html#229">[ thread ]</a>
              <a href="subject.html#229">[ subject ]</a>
              <a href="author.html#229">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
