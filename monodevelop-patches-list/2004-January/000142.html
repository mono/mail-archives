<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r527 - in trunk/MonoDevelop: data/resources/glade src/Main/Base/Commands/ProjectBrowserCommands src/Main/Base/Gui/Dialogs/ReferenceDialog src/Main/Base/Gui/ErrorDialogs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r527%20-%20in%20trunk/MonoDevelop%3A%20data/resources/glade%20src/Main/Base/Commands/ProjectBrowserCommands%20src/Main/Base/Gui/Dialogs/ReferenceDialog%20src/Main/Base/Gui/ErrorDialogs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000141.html">
   <LINK REL="Next"  HREF="000143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r527 - in trunk/MonoDevelop: data/resources/glade src/Main/Base/Commands/ProjectBrowserCommands src/Main/Base/Gui/Dialogs/ReferenceDialog src/Main/Base/Gui/ErrorDialogs</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r527%20-%20in%20trunk/MonoDevelop%3A%20data/resources/glade%20src/Main/Base/Commands/ProjectBrowserCommands%20src/Main/Base/Gui/Dialogs/ReferenceDialog%20src/Main/Base/Gui/ErrorDialogs&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r527 - in trunk/MonoDevelop: data/resources/glade src/Main/Base/Commands/ProjectBrowserCommands src/Main/Base/Gui/Dialogs/ReferenceDialog src/Main/Base/Gui/ErrorDialogs">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Sat Jan 17 18:29:02 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000141.html">[Monodevelop-patches-list] r526 - in trunk/MonoDevelop: samples/HtmlControl src/Main/Base/Gui/BrowserDisplayBinding src/Main/Base/Gui/HtmlControl
</A></li>
        <LI>Next message: <A HREF="000143.html">[Monodevelop-patches-list] r528 - in trunk/MonoDevelop/src/Main/Base: Commands/ProjectBrowserCommands Gui/Dialogs/ReferenceDialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#142">[ date ]</a>
              <a href="thread.html#142">[ thread ]</a>
              <a href="subject.html#142">[ subject ]</a>
              <a href="author.html#142">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-01-17 18:29:02 -0500 (Sat, 17 Jan 2004)
New Revision: 527

Modified:
   trunk/MonoDevelop/data/resources/glade/Base.glade
   trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/ReferenceFolderNodeCommands.cs
   trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/ReferenceDialog/SelectReferenceDialog.cs
   trunk/MonoDevelop/src/Main/Base/Gui/ErrorDialogs/LoadingError.cs
Log:
blah blah, need jluke too look at something


Modified: trunk/MonoDevelop/data/resources/glade/Base.glade
===================================================================
--- trunk/MonoDevelop/data/resources/glade/Base.glade	2004-01-17 21:40:58 UTC (rev 526)
+++ trunk/MonoDevelop/data/resources/glade/Base.glade	2004-01-17 23:29:02 UTC (rev 527)
@@ -689,4 +689,197 @@
   &lt;/child&gt;
 &lt;/widget&gt;
 
+&lt;widget class=&quot;GtkDialog&quot; id=&quot;AddReferenceDialog&quot;&gt;
+  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;title&quot; translatable=&quot;yes&quot;&gt;dialog1&lt;/property&gt;
+  &lt;property name=&quot;type&quot;&gt;GTK_WINDOW_TOPLEVEL&lt;/property&gt;
+  &lt;property name=&quot;window_position&quot;&gt;GTK_WIN_POS_NONE&lt;/property&gt;
+  &lt;property name=&quot;modal&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;default_width&quot;&gt;400&lt;/property&gt;
+  &lt;property name=&quot;default_height&quot;&gt;400&lt;/property&gt;
+  &lt;property name=&quot;resizable&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;destroy_with_parent&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;has_separator&quot;&gt;True&lt;/property&gt;
+
+  &lt;child internal-child=&quot;vbox&quot;&gt;
+    &lt;widget class=&quot;GtkVBox&quot; id=&quot;dialog-vbox2&quot;&gt;
+      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+      &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+      &lt;child internal-child=&quot;action_area&quot;&gt;
+	&lt;widget class=&quot;GtkHButtonBox&quot; id=&quot;dialog-action_area2&quot;&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;layout_style&quot;&gt;GTK_BUTTONBOX_END&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkButton&quot; id=&quot;cancelbutton&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;label&quot;&gt;gtk-cancel&lt;/property&gt;
+	      &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+	      &lt;property name=&quot;response_id&quot;&gt;-6&lt;/property&gt;
+	    &lt;/widget&gt;
+	  &lt;/child&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkButton&quot; id=&quot;okbutton&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;label&quot;&gt;gtk-ok&lt;/property&gt;
+	      &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+	      &lt;property name=&quot;response_id&quot;&gt;-5&lt;/property&gt;
+	    &lt;/widget&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;pack_type&quot;&gt;GTK_PACK_END&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+
+      &lt;child&gt;
+	&lt;widget class=&quot;GtkVBox&quot; id=&quot;vbox5&quot;&gt;
+	  &lt;property name=&quot;border_width&quot;&gt;2&lt;/property&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+	  &lt;property name=&quot;spacing&quot;&gt;12&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkNotebook&quot; id=&quot;notebook2&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;show_tabs&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;show_border&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;tab_pos&quot;&gt;GTK_POS_TOP&lt;/property&gt;
+	      &lt;property name=&quot;scrollable&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;enable_popup&quot;&gt;False&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkLabel&quot; id=&quot;label7&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;label7&lt;/property&gt;
+		  &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+		  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+		  &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+		  &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;tab_expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;tab_fill&quot;&gt;True&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkLabel&quot; id=&quot;label6&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;label6&lt;/property&gt;
+		  &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+		  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+		  &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+		  &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;type&quot;&gt;tab&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+	    &lt;/widget&gt;
+	    &lt;packing&gt;
+	      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	    &lt;/packing&gt;
+	  &lt;/child&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkHBox&quot; id=&quot;hbox4&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;spacing&quot;&gt;12&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkScrolledWindow&quot; id=&quot;scrolledwindow2&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;hscrollbar_policy&quot;&gt;GTK_POLICY_ALWAYS&lt;/property&gt;
+		  &lt;property name=&quot;vscrollbar_policy&quot;&gt;GTK_POLICY_ALWAYS&lt;/property&gt;
+		  &lt;property name=&quot;shadow_type&quot;&gt;GTK_SHADOW_NONE&lt;/property&gt;
+		  &lt;property name=&quot;window_placement&quot;&gt;GTK_CORNER_TOP_LEFT&lt;/property&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkTreeView&quot; id=&quot;ReferencesTreeView&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;headers_visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;rules_hint&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;reorderable&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;enable_search&quot;&gt;True&lt;/property&gt;
+		    &lt;/widget&gt;
+		  &lt;/child&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkVButtonBox&quot; id=&quot;vbuttonbox1&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;layout_style&quot;&gt;GTK_BUTTONBOX_END&lt;/property&gt;
+		  &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkButton&quot; id=&quot;RemoveReferenceButton&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;label&quot;&gt;gtk-remove&lt;/property&gt;
+		      &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+		      &lt;signal name=&quot;clicked&quot; handler=&quot;RemoveReference&quot; last_modification_time=&quot;Sat, 17 Jan 2004 22:02:58 GMT&quot;/&gt;
+		    &lt;/widget&gt;
+		  &lt;/child&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+	    &lt;/widget&gt;
+	    &lt;packing&gt;
+	      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	    &lt;/packing&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+    &lt;/widget&gt;
+  &lt;/child&gt;
+&lt;/widget&gt;
+
 &lt;/glade-interface&gt;

Modified: trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/ReferenceFolderNodeCommands.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/ReferenceFolderNodeCommands.cs	2004-01-17 21:40:58 UTC (rev 526)
+++ trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/ReferenceFolderNodeCommands.cs	2004-01-17 23:29:02 UTC (rev 527)
@@ -40,21 +40,20 @@
 				IProject project = ((ProjectBrowserNode)node.Parent).Project;
 				IParserService parserService = (IParserService)ICSharpCode.Core.Services.ServiceManager.Services.GetService(typeof(IParserService));
 				
-				using (SelectReferenceDialog selDialog = new SelectReferenceDialog(project)) {
-					if (selDialog.ShowDialog() == DialogResult.OK) {
+				SelectReferenceDialog selDialog = new SelectReferenceDialog(project);
+				if (selDialog.Run() == (int)Gtk.ResponseType.Ok) {
 						
-						foreach (ProjectReference refInfo in selDialog.ReferenceInformations) {
-							project.ProjectReferences.Add(refInfo);
-							parserService.AddReferenceToCompletionLookup(project, refInfo);
-						}
-						
-						DefaultDotNetNodeBuilder.InitializeReferences(node, project);
-						IProjectService projectService = (IProjectService)ICSharpCode.Core.Services.ServiceManager.Services.GetService(typeof(IProjectService));
-						projectService.SaveCombine();
+					foreach (ProjectReference refInfo in selDialog.ReferenceInformations) {
+						project.ProjectReferences.Add(refInfo);
+						parserService.AddReferenceToCompletionLookup(project, refInfo);
 					}
+					
+					DefaultDotNetNodeBuilder.InitializeReferences(node, project);
+					IProjectService projectService = (IProjectService)ICSharpCode.Core.Services.ServiceManager.Services.GetService(typeof(IProjectService));
+					projectService.SaveCombine();
 				}
-				node.Expand();
 			}
+			node.Expand();
 		}
 	}
 	

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/ReferenceDialog/SelectReferenceDialog.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/ReferenceDialog/SelectReferenceDialog.cs	2004-01-17 21:40:58 UTC (rev 526)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/ReferenceDialog/SelectReferenceDialog.cs	2004-01-17 23:29:02 UTC (rev 527)
@@ -10,11 +10,11 @@
 using System.Collections;
 using System.Diagnostics;
 using System.ComponentModel;
-using System.Windows.Forms;
 
 using ICSharpCode.SharpDevelop.Internal.Project;
 using ICSharpCode.Core.Services;
 
+using Gtk;
 
 namespace ICSharpCode.SharpDevelop.Gui.Dialogs
 {
@@ -26,8 +26,9 @@
 	/// &lt;summary&gt;
 	/// Summary description for Form2.
 	/// &lt;/summary&gt;
-	public class SelectReferenceDialog : System.Windows.Forms.Form
+	public class SelectReferenceDialog
 	{
+#if false
 		private System.Windows.Forms.ListView referencesListView;
 		private System.Windows.Forms.Button selectButton;
 		private System.Windows.Forms.Button removeButton;
@@ -47,40 +48,71 @@
 		/// Required designer variable.
 		/// &lt;/summary&gt;
 		private System.ComponentModel.Container components = null;
+#endif
+
+		               Gtk.TreeStore refTreeStore;
+		[Glade.Widget] Gtk.Dialog    AddReferenceDialog;
+		[Glade.Widget] Gtk.TreeView  ReferencesTreeView;
+		[Glade.Widget] Gtk.Button    okbutton;
+		[Glade.Widget] Gtk.Button    cancelbutton;
+		[Glade.Widget] Gtk.Button    RemoveReferencesButton;
+		[Glade.Widget] Gtk.Notebook  mainBook;
+
 		ResourceService resourceService = (ResourceService)ServiceManager.Services.GetService(typeof(IResourceService));
 		IProject configureProject;
 		
 		public ArrayList ReferenceInformations {
 			get {
 				ArrayList referenceInformations = new ArrayList();
-				foreach (ListViewItem item in referencesListView.Items) {
-					Debug.Assert(item.Tag != null);
-					referenceInformations.Add(item.Tag);
-				}
+				Gtk.TreeIter looping_iter;
+				refTreeStore.GetIterFirst (out looping_iter);
+				do {
+					//Debug.Assert(item.Tag != null);
+					referenceInformations.Add(refTreeStore.GetValue(looping_iter, 3));
+				} while (refTreeStore.IterNext (out looping_iter));
 				return referenceInformations;
 			}
 		}
+
+		public int Run ()
+		{
+			return AddReferenceDialog.Run ();
+		}
 		
 		public SelectReferenceDialog(IProject configureProject)
 		{
 			this.configureProject = configureProject;
 			
-			InitializeComponent();
+			Glade.XML refXML = new Glade.XML (null, &quot;Base.glade&quot;, &quot;AddReferenceDialog&quot;, null);
+			refXML.Autoconnect (this);
 			
-			gacTabPage.Controls.Add(new GacReferencePanel(this));
-			projectTabPage.Controls.Add(new ProjectReferencePanel(this));
-			browserTabPage.Controls.Add(new AssemblyReferencePanel(this));
+			AddReferenceDialog.Title = resourceService.GetString(&quot;Dialog.SelectReferenceDialog.DialogName&quot;);
 			
-			comTabPage.Controls.Add(new COMReferencePanel(this));
+			refTreeStore = new Gtk.TreeStore (typeof (string), typeof(string), typeof(string), typeof(ProjectReference));
+			ReferencesTreeView.Model = refTreeStore;
+
+			ReferencesTreeView.AppendColumn (resourceService.GetString(&quot;Dialog.SelectReferenceDialog.ReferenceHeader&quot;), new CellRendererText (), &quot;text&quot;, 0);
+			ReferencesTreeView.AppendColumn (resourceService.GetString (&quot;Dialog.SelectReferenceDialog.TypeHeader&quot;), new CellRendererText (), &quot;text&quot;, 1);
+			ReferencesTreeView.AppendColumn (resourceService.GetString (&quot;Dialog.SelectReferenceDialog.LocationHeader&quot;), new CellRendererText (), &quot;text&quot;, 2);
+			
+			//InitializeComponent();
+			
+			//gacTabPage.Controls.Add(new GacReferencePanel(this));
+			//projectTabPage.Controls.Add(new ProjectReferencePanel(this));
+			//browserTabPage.Controls.Add(new AssemblyReferencePanel(this));
+			
+			//comTabPage.Controls.Add(new COMReferencePanel(this));
 		}
 		
 		public void AddReference(ReferenceType referenceType, string referenceName, string referenceLocation)
 		{
-			foreach (ListViewItem item in referencesListView.Items) {
-				if (referenceLocation == item.SubItems[2].Text &amp;&amp; referenceName == item.Text ) {
+			Gtk.TreeIter looping_iter;
+			refTreeStore.GetIterFirst (out looping_iter);
+			do {
+				if (referenceLocation == (string)refTreeStore.GetValue (looping_iter, 2) &amp;&amp; referenceName == (string)refTreeStore.GetValue (looping_iter, 0)) {
 					return;
 				}
-			}
+			} while (refTreeStore.IterNext (out looping_iter));
 			
 			foreach (ProjectReference refInfo in configureProject.ProjectReferences) {
 				if (refInfo.ReferenceType == referenceType) {
@@ -103,42 +135,42 @@
 					}
 				}
 			}
-			ListViewItem newItem = new ListViewItem(new string[] {referenceName, referenceType.ToString(), referenceLocation});
+			ProjectReference tag;
 			switch (referenceType) {
 				case ReferenceType.Typelib:
-					newItem.Tag = new ProjectReference(referenceType, referenceName + &quot;|&quot; + referenceLocation);
+					tag = new ProjectReference(referenceType, referenceName + &quot;|&quot; + referenceLocation);
 					break;
 				case ReferenceType.Project:
-					newItem.Tag = new ProjectReference(referenceType, referenceName);
+					tag = new ProjectReference(referenceType, referenceName);
 					break;
 				default:
-					newItem.Tag = new ProjectReference(referenceType, referenceLocation);
+					tag = new ProjectReference(referenceType, referenceLocation);
 					break;
 					
 			}
-			
-			referencesListView.Items.Add(newItem);
+			refTreeStore.AppendValues (referenceName, referenceType.ToString (), referenceLocation, tag);
 		}
 		
 		void SelectReference(object sender, EventArgs e)
 		{
-			IReferencePanel refPanel = (IReferencePanel)referenceTabControl.SelectedTab.Controls[0];
-			refPanel.AddReference(null, null);
+			//IReferencePanel refPanel = (IReferencePanel)referenceTabControl.SelectedTab.Controls[0];
+			//refPanel.AddReference(null, null);
 		}
 		
 		void RemoveReference(object sender, EventArgs e)
 		{
-			ArrayList itemsToDelete = new ArrayList();
+			//ArrayList itemsToDelete = new ArrayList();
 			
-			foreach (ListViewItem item in referencesListView.SelectedItems) {
-				itemsToDelete.Add(item);
-			}
-			
-			foreach (ListViewItem item in itemsToDelete) {
-				referencesListView.Items.Remove(item);
-			}
+			//foreach (ListViewItem item in referencesListView.SelectedItems) {
+			//	itemsToDelete.Add(item);
+			//}
+			//
+			//foreach (ListViewItem item in itemsToDelete) {
+			//	referencesListView.Items.Remove(item);
+			//}
 		}
-		
+
+#if false
 		/// &lt;summary&gt;
 		/// Clean up any resources being used.
 		/// &lt;/summary&gt;
@@ -318,5 +350,6 @@
 			this.referenceTabControl.ResumeLayout(false);
 			this.ResumeLayout(false);
 		}
+#endif
 	}
 }

Modified: trunk/MonoDevelop/src/Main/Base/Gui/ErrorDialogs/LoadingError.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/ErrorDialogs/LoadingError.cs	2004-01-17 21:40:58 UTC (rev 526)
+++ trunk/MonoDevelop/src/Main/Base/Gui/ErrorDialogs/LoadingError.cs	2004-01-17 23:29:02 UTC (rev 527)
@@ -6,11 +6,11 @@
 // &lt;/file&gt;
 
 using System;
-using System.Windows.Forms;
+//using System.Windows.Forms;
 
 namespace ICSharpCode.SharpDevelop.Gui.ErrorDialogs
 {
-	public class LoadingError : System.Windows.Forms.Form 
+/*	public class LoadingError : System.Windows.Forms.Form 
 	{
 		private System.ComponentModel.Container components;
 		private System.Windows.Forms.Button button1;
@@ -82,5 +82,5 @@
 			this.Controls.Add(label3);
 			this.Controls.Add(label1);
 		}
-	}
+	}*/
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000141.html">[Monodevelop-patches-list] r526 - in trunk/MonoDevelop: samples/HtmlControl src/Main/Base/Gui/BrowserDisplayBinding src/Main/Base/Gui/HtmlControl
</A></li>
	<LI>Next message: <A HREF="000143.html">[Monodevelop-patches-list] r528 - in trunk/MonoDevelop/src/Main/Base: Commands/ProjectBrowserCommands Gui/Dialogs/ReferenceDialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#142">[ date ]</a>
              <a href="thread.html#142">[ thread ]</a>
              <a href="subject.html#142">[ subject ]</a>
              <a href="author.html#142">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
