<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r476 - in trunk/MonoDevelop/src: AddIns/BackendBindings/CSharpBinding AddIns/BackendBindings/CSharpBinding/Gui Main/Base/Gui/Dialogs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r476%20-%20in%20trunk/MonoDevelop/src%3A%20AddIns/BackendBindings/CSharpBinding%20AddIns/BackendBindings/CSharpBinding/Gui%20Main/Base/Gui/Dialogs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000079.html">
   <LINK REL="Next"  HREF="000081.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r476 - in trunk/MonoDevelop/src: AddIns/BackendBindings/CSharpBinding AddIns/BackendBindings/CSharpBinding/Gui Main/Base/Gui/Dialogs</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r476%20-%20in%20trunk/MonoDevelop/src%3A%20AddIns/BackendBindings/CSharpBinding%20AddIns/BackendBindings/CSharpBinding/Gui%20Main/Base/Gui/Dialogs&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r476 - in trunk/MonoDevelop/src: AddIns/BackendBindings/CSharpBinding AddIns/BackendBindings/CSharpBinding/Gui Main/Base/Gui/Dialogs">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Mon Jan 12 22:50:17 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000079.html">[Monodevelop-patches-list] r475 - trunk/MonoDevelop
</A></li>
        <LI>Next message: <A HREF="000081.html">[Monodevelop-patches-list] r477 - in trunk/MonoDevelop/src/Libraries/ICSharpCode.TextEditor/src: Document Document/HighlightingStrategy Document/LineManager Gui Util
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80">[ date ]</a>
              <a href="thread.html#80">[ thread ]</a>
              <a href="subject.html#80">[ subject ]</a>
              <a href="author.html#80">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-01-12 22:50:16 -0500 (Mon, 12 Jan 2004)
New Revision: 476

Modified:
   trunk/MonoDevelop/src/AddIns/BackendBindings/CSharpBinding/Gui/CodeGenerationPanel.cs
   trunk/MonoDevelop/src/AddIns/BackendBindings/CSharpBinding/Makefile
   trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/TreeViewOptions.cs
Log:
add gtk-sharp to the CSharpBinding makefile
new option panel from jba
hide the expander in the options because we handle expansion on our own.
thanks much gonzalo :)


Modified: trunk/MonoDevelop/src/AddIns/BackendBindings/CSharpBinding/Gui/CodeGenerationPanel.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/BackendBindings/CSharpBinding/Gui/CodeGenerationPanel.cs	2004-01-12 23:32:14 UTC (rev 475)
+++ trunk/MonoDevelop/src/AddIns/BackendBindings/CSharpBinding/Gui/CodeGenerationPanel.cs	2004-01-13 03:50:16 UTC (rev 476)
@@ -1,101 +1,104 @@
-// &lt;file&gt;
-//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
-//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
-//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
-//     &lt;version value=&quot;$version&quot;/&gt;
-// &lt;/file&gt;
-
-using System;
-using System.IO;
-using System.Drawing;
-
-using ICSharpCode.SharpDevelop.Internal.Project;
-using ICSharpCode.SharpDevelop.Internal.ExternalTool;
-using ICSharpCode.SharpDevelop.Gui.Dialogs;
-using ICSharpCode.Core.Services;
-using ICSharpCode.Core.Properties;
-using ICSharpCode.Core.AddIns.Codons;
-
-namespace CSharpBinding
-{
-	public class CodeGenerationPanel //: AbstractOptionPanel
-	{/*
-		CSharpCompilerParameters compilerParameters = null;
-		
-		public override void LoadPanelContents()
-		{
-			SetupFromXml(Path.Combine(PropertyService.DataDirectory, 
-			                          @&quot;resources\panels\ProjectOptions\CodeGenerationPanel.xfrm&quot;));
-			
-			((ComboBox)ControlDictionary[&quot;compileTargetComboBox&quot;]).Items.Add(StringParserService.Parse(&quot;${res:Dialog.Options.PrjOptions.Configuration.CompileTarget.Exe}&quot;));
-			((ComboBox)ControlDictionary[&quot;compileTargetComboBox&quot;]).Items.Add(StringParserService.Parse(&quot;${res:Dialog.Options.PrjOptions.Configuration.CompileTarget.WinExe}&quot;));
-			((ComboBox)ControlDictionary[&quot;compileTargetComboBox&quot;]).Items.Add(StringParserService.Parse(&quot;${res:Dialog.Options.PrjOptions.Configuration.CompileTarget.Library}&quot;));
-			((ComboBox)ControlDictionary[&quot;compileTargetComboBox&quot;]).Items.Add(StringParserService.Parse(&quot;${res:Dialog.Options.PrjOptions.Configuration.CompileTarget.Module}&quot;));
-			
-			ControlDictionary[&quot;browseWin32IconButton&quot;].Click += new EventHandler(SelectWin32Icon);
-			
-			this.compilerParameters = (CSharpCompilerParameters)((IProperties)CustomizationObject).GetProperty(&quot;Config&quot;);
-			
-			((ComboBox)ControlDictionary[&quot;compileTargetComboBox&quot;]).SelectedIndex = (int)compilerParameters.CompileTarget;
-			ControlDictionary[&quot;symbolsTextBox&quot;].Text   = compilerParameters.DefineSymbols;
-			ControlDictionary[&quot;mainClassTextBox&quot;].Text = compilerParameters.MainClass;
-			ControlDictionary[&quot;win32IconTextBox&quot;].Text = compilerParameters.Win32Icon;
-
-			((CheckBox)ControlDictionary[&quot;generateDebugInformationCheckBox&quot;]).Checked = compilerParameters.Debugmode;
-			((CheckBox)ControlDictionary[&quot;generateXmlOutputCheckBox&quot;]).Checked        = compilerParameters.GenerateXmlDocumentation;
-			((CheckBox)ControlDictionary[&quot;enableOptimizationCheckBox&quot;]).Checked       = compilerParameters.Optimize;
-			((CheckBox)ControlDictionary[&quot;allowUnsafeCodeCheckBox&quot;]).Checked       = compilerParameters.UnsafeCode;
-			((CheckBox)ControlDictionary[&quot;generateOverflowChecksCheckBox&quot;]).Checked       = compilerParameters.GenerateOverflowChecks;
-			((CheckBox)ControlDictionary[&quot;warningsAsErrorsCheckBox&quot;]).Checked       = !compilerParameters.RunWithWarnings;
-			
-			((NumericUpDown)ControlDictionary[&quot;warningLevelNumericUpDown&quot;]).Value = compilerParameters.WarningLevel;
-		}
-		
-		public override bool StorePanelContents()
-		{
-			if (compilerParameters == null) {
-				return true;
-			}
-			FileUtilityService fileUtilityService = (FileUtilityService)ServiceManager.Services.GetService(typeof(FileUtilityService));
-			
-			if (ControlDictionary[&quot;win32IconTextBox&quot;].Text.Length &gt; 0) {
-				if (!fileUtilityService.IsValidFileName(ControlDictionary[&quot;win32IconTextBox&quot;].Text)) {
-					MessageBox.Show(&quot;Invalid Win32Icon specified&quot;, &quot;Error&quot;, MessageBoxButtons.OK, MessageBoxIcon.Hand, MessageBoxDefaultButton.Button1);
-					return false;
-				}
-				if (!File.Exists(ControlDictionary[&quot;win32IconTextBox&quot;].Text)) {
-					MessageBox.Show(&quot;Win32Icon doesn't exists&quot;, &quot;Error&quot;, MessageBoxButtons.OK, MessageBoxIcon.Hand, MessageBoxDefaultButton.Button1);
-					return false;
-				}
-			}
-			
-			compilerParameters.CompileTarget = (CompileTarget)((ComboBox)ControlDictionary[&quot;compileTargetComboBox&quot;]).SelectedIndex;
-			compilerParameters.DefineSymbols = ControlDictionary[&quot;symbolsTextBox&quot;].Text;
-			compilerParameters.MainClass     = ControlDictionary[&quot;mainClassTextBox&quot;].Text;
-			compilerParameters.Win32Icon     = ControlDictionary[&quot;win32IconTextBox&quot;].Text;
-			
-			compilerParameters.Debugmode = ((CheckBox)ControlDictionary[&quot;generateDebugInformationCheckBox&quot;]).Checked;
-			compilerParameters.GenerateXmlDocumentation = ((CheckBox)ControlDictionary[&quot;generateXmlOutputCheckBox&quot;]).Checked;
-			compilerParameters.Optimize = ((CheckBox)ControlDictionary[&quot;enableOptimizationCheckBox&quot;]).Checked;
-			compilerParameters.UnsafeCode = ((CheckBox)ControlDictionary[&quot;allowUnsafeCodeCheckBox&quot;]).Checked;
-			compilerParameters.GenerateOverflowChecks = ((CheckBox)ControlDictionary[&quot;generateOverflowChecksCheckBox&quot;]).Checked;
-			compilerParameters.RunWithWarnings  = !((CheckBox)ControlDictionary[&quot;warningsAsErrorsCheckBox&quot;]).Checked;
-			compilerParameters.WarningLevel = (int)((NumericUpDown)ControlDictionary[&quot;warningLevelNumericUpDown&quot;]).Value;
-			return true;
-		}
-		
-		void SelectWin32Icon(object sender, EventArgs e) 
-		{
-			using (OpenFileDialog fdiag  = new OpenFileDialog()) {
-				fdiag.AddExtension    = true;
-				fdiag.Filter          = StringParserService.Parse(&quot;Icons (*.ico)|*.ico|${res:SharpDevelop.FileFilter.AllFiles}|*.*&quot;);
-				fdiag.Multiselect     = false;
-				fdiag.CheckFileExists = true;
-				
-				if (fdiag.ShowDialog() == DialogResult.OK) {
-					ControlDictionary[&quot;win32IconTextBox&quot;].Text = fdiag.FileName;
-				}
-			}
-		}*/
-	}
-}
+// &lt;file&gt;
+//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
+//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
+//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
+//     &lt;version value=&quot;$version&quot;/&gt;
+// &lt;/file&gt;
+
+using System;
+using System.IO;
+using System.Drawing;
+using System.Collections;
+
+using ICSharpCode.SharpDevelop.Internal.ExternalTool;
+using ICSharpCode.Core.AddIns.Codons;
+using ICSharpCode.Core.Properties;
+using ICSharpCode.SharpDevelop.Gui.Components;
+using ICSharpCode.Core.Services;
+using ICSharpCode.Core.AddIns;
+
+using Gtk;
+
+namespace ICSharpCode.SharpDevelop.Gui.Dialogs.OptionPanels
+{
+	public class CodeGenerationPanel : AbstractOptionPanel
+	{
+		// Gtk Controls
+		CheckButton generateAdditonalCommentsCheckBox;
+		CheckButton generateDocCommentsCheckBox;
+		CheckButton useFullTypeNamesCheckBox; 
+		CheckButton blankLinesBetweenMemberCheckBox;
+		CheckButton elseOnClosingCheckBox;
+		CheckButton startBlockOnTheSameLineCheckBox; 
+		
+		// Services
+		StringParserService StringParserService = (StringParserService)ServiceManager.Services.GetService (typeof (StringParserService));
+		PropertyService PropertyService = (PropertyService)ServiceManager.Services.GetService (typeof (PropertyService));
+		static readonly string codeGenerationProperty = &quot;SharpDevelop.UI.CodeGenerationOptions&quot;;
+		
+		public override void LoadPanelContents()
+		{
+			// set up the form controls instance
+			SetupPanelInstance();
+			
+			IProperties p = (IProperties)PropertyService.GetProperty(codeGenerationProperty, new DefaultProperties());
+			
+			generateAdditonalCommentsCheckBox.Active = p.GetProperty(&quot;GenerateAdditionalComments&quot;, true);
+			generateDocCommentsCheckBox.Active       = p.GetProperty(&quot;GenerateDocumentComments&quot;, true);
+			useFullTypeNamesCheckBox.Active          = p.GetProperty(&quot;UseFullyQualifiedNames&quot;, true);
+			
+			blankLinesBetweenMemberCheckBox.Active   = p.GetProperty(&quot;BlankLinesBetweenMembers&quot;, true);
+			elseOnClosingCheckBox.Active             = p.GetProperty(&quot;ElseOnClosing&quot;, true);
+			startBlockOnTheSameLineCheckBox.Active   = p.GetProperty(&quot;StartBlockOnSameLine&quot;, true);
+		}
+		
+		public override bool StorePanelContents()
+		{
+			IProperties p = (IProperties)PropertyService.GetProperty(codeGenerationProperty, new DefaultProperties());
+			p.SetProperty(&quot;GenerateAdditionalComments&quot;, generateAdditonalCommentsCheckBox.Active);
+			p.SetProperty(&quot;GenerateDocumentComments&quot;,   generateDocCommentsCheckBox.Active);
+			p.SetProperty(&quot;UseFullyQualifiedNames&quot;,     useFullTypeNamesCheckBox.Active);
+			p.SetProperty(&quot;BlankLinesBetweenMembers&quot;,   blankLinesBetweenMemberCheckBox.Active);
+			p.SetProperty(&quot;ElseOnClosing&quot;,              elseOnClosingCheckBox.Active);
+			p.SetProperty(&quot;StartBlockOnSameLine&quot;,       startBlockOnTheSameLineCheckBox.Active);
+			PropertyService.SetProperty(codeGenerationProperty, p);
+			return true;
+		}
+		
+		private void SetupPanelInstance()
+		{
+			// instantiate all the controls in the first group
+			Gtk.Frame frame1 = new Gtk.Frame(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.CodeGenerationOptionsPanel.CodeGenerationOptionsGroupBox}&quot;));
+			Gtk.VBox vBox1 = new Gtk.VBox(false,2);			
+			useFullTypeNamesCheckBox = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.CodeGenerationOptionsPanel.UseFullTypeNamesCheckBox}&quot;)); 
+			blankLinesBetweenMemberCheckBox = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.CodeGenerationOptionsPanel.BlankLinesBetweenMembersCheckBox}&quot;));
+			elseOnClosingCheckBox = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.CodeGenerationOptionsPanel.ElseOnClosingCheckBox}&quot;));
+			startBlockOnTheSameLineCheckBox = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.CodeGenerationOptionsPanel.StartBlockOnTheSameLineCheckBox}&quot;)); 
+			
+			// pack all controls in first group
+			vBox1.PackStart(startBlockOnTheSameLineCheckBox, false, false, 2);
+			vBox1.PackStart(elseOnClosingCheckBox, false, false, 2);
+			vBox1.PackStart(blankLinesBetweenMemberCheckBox, false, false, 2);
+			vBox1.PackStart(useFullTypeNamesCheckBox, false, false, 2);
+			frame1.Add(vBox1);
+			
+			// instantiate all the controls in the second group
+			Gtk.Frame frame2 = new Gtk.Frame(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.CodeGenerationOptionsPanel.CommentGenerationOptionsGroupBox}&quot;));
+			Gtk.VBox vBox2 = new Gtk.VBox(false,2);			
+			generateAdditonalCommentsCheckBox = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.CodeGenerationOptionsPanel.GenerateAdditionalCommentsCheckBox}&quot;));
+			generateDocCommentsCheckBox = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.CodeGenerationOptionsPanel.GenerateDocCommentsCheckBox}&quot;));
+			
+			// pack all controls in second group
+			vBox2.PackStart(generateDocCommentsCheckBox, false, false, 2);
+			vBox2.PackStart(generateAdditonalCommentsCheckBox, false, false, 2);
+			frame2.Add(vBox2);
+			
+			// pack all the groups
+			Gtk.VBox mainBox = new Gtk.VBox(false,2);
+			mainBox.PackStart(frame1, false, false, 2);
+			mainBox.PackStart(frame2, false, false, 2);
+			this.Add(mainBox);
+		}
+
+	}
+}

Modified: trunk/MonoDevelop/src/AddIns/BackendBindings/CSharpBinding/Makefile
===================================================================
--- trunk/MonoDevelop/src/AddIns/BackendBindings/CSharpBinding/Makefile	2004-01-12 23:32:14 UTC (rev 475)
+++ trunk/MonoDevelop/src/AddIns/BackendBindings/CSharpBinding/Makefile	2004-01-13 03:50:16 UTC (rev 476)
@@ -35,4 +35,5 @@
 		/r:../../../../build/bin/ICSharpCode.TextEditor.dll \
 		/r:../../../../build/bin/SharpDevelop.Base.dll \
 		/r:../../../../build/bin/ICSharpCode.SharpRefactory.dll \
+		/r:gtk-sharp.dll \
 		$(SOURCES)

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/TreeViewOptions.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/TreeViewOptions.cs	2004-01-12 23:32:14 UTC (rev 475)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/TreeViewOptions.cs	2004-01-13 03:50:16 UTC (rev 476)
@@ -284,6 +284,12 @@
 			column.PackStart (text_render, true);
 			column.AddAttribute (text_render, &quot;text&quot;, 0);
 			
+			
+			Gtk.TreeViewColumn empty = new Gtk.TreeViewColumn (&quot;a&quot;, new Gtk.CellRendererText (), &quot;string&quot;, 0);
+			treeView.AppendColumn (empty);
+			empty.Visible = false;
+			treeView.ExpanderColumn = empty;
+						
 			treeView.AppendColumn (column);
 			treeView.HeadersVisible = false;
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000079.html">[Monodevelop-patches-list] r475 - trunk/MonoDevelop
</A></li>
	<LI>Next message: <A HREF="000081.html">[Monodevelop-patches-list] r477 - in trunk/MonoDevelop/src/Libraries/ICSharpCode.TextEditor/src: Document Document/HighlightingStrategy Document/LineManager Gui Util
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80">[ date ]</a>
              <a href="thread.html#80">[ thread ]</a>
              <a href="subject.html#80">[ subject ]</a>
              <a href="author.html#80">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
