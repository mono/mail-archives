<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r438 - trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/IDEOptions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r438%20-%20trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/IDEOptions&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000041.html">
   <LINK REL="Next"  HREF="000043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r438 - trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/IDEOptions</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r438%20-%20trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/IDEOptions&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r438 - trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/IDEOptions">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Sun Jan 11 01:19:16 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000041.html">[Monodevelop-patches-list] r437 - trunk/MonoDevelop/src/Libraries/SharpRefactory/src/Lexer
</A></li>
        <LI>Next message: <A HREF="000043.html">[Monodevelop-patches-list] r439 - in trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor: Commands Gui/Dialogs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42">[ date ]</a>
              <a href="thread.html#42">[ thread ]</a>
              <a href="subject.html#42">[ subject ]</a>
              <a href="author.html#42">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-01-11 01:19:15 -0500 (Sun, 11 Jan 2004)
New Revision: 438

Modified:
   trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/IDEOptions/ProjectAndCombinePanel.cs
Log:
jba provided this nice Option Panel


Modified: trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/IDEOptions/ProjectAndCombinePanel.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/IDEOptions/ProjectAndCombinePanel.cs	2004-01-11 05:20:26 UTC (rev 437)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/IDEOptions/ProjectAndCombinePanel.cs	2004-01-11 06:19:15 UTC (rev 438)
@@ -1,87 +1,164 @@
-// &lt;file&gt;
-//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
-//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
-//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
-//     &lt;version value=&quot;$version&quot;/&gt;
-// &lt;/file&gt;
-
-using System;
-using System.IO;
-using System.Drawing;
-using System.Collections;
-using System.Windows.Forms;
-
-using ICSharpCode.SharpDevelop.Internal.ExternalTool;
-using ICSharpCode.Core.AddIns.Codons;
-using ICSharpCode.Core.Properties;
-using ICSharpCode.SharpDevelop.Gui.Components;
-using ICSharpCode.Core.Services;
-using ICSharpCode.Core.AddIns;
-using ICSharpCode.SharpDevelop.Services;
-
-namespace ICSharpCode.SharpDevelop.Gui.Dialogs.OptionPanels
-{/*
-	public class ProjectAndCombinePanel : AbstractOptionPanel
-	{
-		public override void LoadPanelContents()
-		{
-			SetupFromXml(Path.Combine(PropertyService.DataDirectory, 
-			                          @&quot;resources\panels\ProjectAndCombineOptions.xfrm&quot;));
-			
-			// read properties
-			ControlDictionary[&quot;projectLocationTextBox&quot;].Text = PropertyService.GetProperty(&quot;ICSharpCode.SharpDevelop.Gui.Dialogs.NewProjectDialog.DefaultPath&quot;, Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal), 
-			                                                                                                                                                                 &quot;SharpDevelop Projects&quot;)).ToString();
-			
-			BeforeCompileAction action = (BeforeCompileAction)PropertyService.GetProperty(&quot;SharpDevelop.Services.DefaultParserService.BeforeCompileAction&quot;, BeforeCompileAction.SaveAllFiles);
-			
-			((RadioButton)ControlDictionary[&quot;saveChangesRadioButton&quot;]).Checked = action == BeforeCompileAction.SaveAllFiles;
-			((RadioButton)ControlDictionary[&quot;promptChangesRadioButton&quot;]).Checked = action == BeforeCompileAction.PromptForSave;
-			((RadioButton)ControlDictionary[&quot;noSaveRadioButton&quot;]).Checked = action == BeforeCompileAction.Nothing;
-			
-			((CheckBox)ControlDictionary[&quot;loadPrevProjectCheckBox&quot;]).Checked = (bool)PropertyService.GetProperty(&quot;SharpDevelop.LoadPrevProjectOnStartup&quot;, false);
-
-			((CheckBox)ControlDictionary[&quot;showTaskListCheckBox&quot;]).Checked = (bool)PropertyService.GetProperty(&quot;SharpDevelop.ShowTaskListAfterBuild&quot;, true);
-			((CheckBox)ControlDictionary[&quot;showOutputCheckBox&quot;]).Checked = (bool)PropertyService.GetProperty(&quot;SharpDevelop.ShowOutputWindowAtBuild&quot;, true);
-			
-			((Button)ControlDictionary[&quot;selectProjectLocationButton&quot;]).Click += new EventHandler(SelectProjectLocationButtonClicked);
-		}
-		
-		public override bool StorePanelContents()
-		{
-			// check for correct settings
-			string projectPath = ControlDictionary[&quot;projectLocationTextBox&quot;].Text;
-			if (projectPath.Length &gt; 0) {
-				if (!FileUtilityService.IsValidFileName(projectPath)) {
-					MessageService.ShowError(&quot;Invalid project path specified&quot;);
-					return false;
-				}
-			}
-			
-			// set properties
-			PropertyService.SetProperty(&quot;ICSharpCode.SharpDevelop.Gui.Dialogs.NewProjectDialog.DefaultPath&quot;, projectPath);
-			
-			if (((RadioButton)ControlDictionary[&quot;saveChangesRadioButton&quot;]).Checked) {
-				PropertyService.SetProperty(&quot;SharpDevelop.Services.DefaultParserService.BeforeCompileAction&quot;, BeforeCompileAction.SaveAllFiles);
-			} else if (((RadioButton)ControlDictionary[&quot;promptChangesRadioButton&quot;]).Checked) {
-				PropertyService.SetProperty(&quot;SharpDevelop.Services.DefaultParserService.BeforeCompileAction&quot;, BeforeCompileAction.PromptForSave);
-			} else if (((RadioButton)ControlDictionary[&quot;noSaveRadioButton&quot;]).Checked) {
-				PropertyService.SetProperty(&quot;SharpDevelop.Services.DefaultParserService.BeforeCompileAction&quot;, BeforeCompileAction.Nothing);
-			}
-			
-			PropertyService.SetProperty(&quot;SharpDevelop.LoadPrevProjectOnStartup&quot;, ((CheckBox)ControlDictionary[&quot;loadPrevProjectCheckBox&quot;]).Checked);
-			
-			PropertyService.SetProperty(&quot;SharpDevelop.ShowTaskListAfterBuild&quot;, ((CheckBox)ControlDictionary[&quot;showTaskListCheckBox&quot;]).Checked);
-			PropertyService.SetProperty(&quot;SharpDevelop.ShowOutputWindowAtBuild&quot;, ((CheckBox)ControlDictionary[&quot;showOutputCheckBox&quot;]).Checked);
-			
-			return true;
-		}
-		
-		void SelectProjectLocationButtonClicked(object sender, EventArgs e)
-		{
-			FolderDialog fdiag = new  FolderDialog();
-			if (fdiag.DisplayDialog(&quot;Select default combile location&quot;) == DialogResult.OK) {
-				ControlDictionary[&quot;projectLocationTextBox&quot;].Text = fdiag.Path;
-			}
-		}
-	}*/
-}
+// &lt;file&gt;
+//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
+//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
+//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
+//     &lt;version value=&quot;$version&quot;/&gt;
+// &lt;/file&gt;
+
+using System;
+using System.IO;
+using System.Drawing;
+using System.Collections;
+
+using ICSharpCode.SharpDevelop.Internal.ExternalTool;
+using ICSharpCode.Core.AddIns.Codons;
+using ICSharpCode.Core.Properties;
+using ICSharpCode.SharpDevelop.Gui.Components;
+using ICSharpCode.Core.Services;
+using ICSharpCode.Core.AddIns;
+using ICSharpCode.SharpDevelop.Services;
+
+//using System.Windows.Forms;
+using Gtk;
+
+namespace ICSharpCode.SharpDevelop.Gui.Dialogs.OptionPanels
+{
+	public class ProjectAndCombinePanel : AbstractOptionPanel
+	{
+		//
+		// Gtk controls
+		//
+		Gtk.Entry projectLocationTextBox;
+		Gtk.RadioButton saveChangesRadioButton;
+		Gtk.RadioButton promptChangesRadioButton;
+		Gtk.RadioButton noSaveRadioButton;
+		Gtk.CheckButton loadPrevProjectCheckBox;
+		Gtk.CheckButton showTaskListCheckBox;
+		Gtk.CheckButton showOutputCheckBox;
+		Gtk.Button selectProjectLocationButton;
+		
+		// service instances needed
+		StringParserService StringParserService = (StringParserService)ServiceManager.Services.GetService (typeof (StringParserService));
+		PropertyService PropertyService = (PropertyService)ServiceManager.Services.GetService (typeof (PropertyService));
+		FileUtilityService FileUtilityService = (FileUtilityService)ServiceManager.Services.GetService (typeof (FileUtilityService));
+		MessageService MessageService = (MessageService)ServiceManager.Services.GetService (typeof (MessageService));
+		
+		public override void LoadPanelContents()
+		{
+			// set up the form controls instance
+			SetupPanelInstance();
+			
+			// read properties
+			projectLocationTextBox.Text = PropertyService.GetProperty(&quot;ICSharpCode.SharpDevelop.Gui.Dialogs.NewProjectDialog.DefaultPath&quot;, System.IO.Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal), &quot;SharpDevelop Projects&quot;)).ToString();
+			
+			BeforeCompileAction action = (BeforeCompileAction)PropertyService.GetProperty(&quot;SharpDevelop.Services.DefaultParserService.BeforeCompileAction&quot;, BeforeCompileAction.SaveAllFiles);
+			
+			System.Console.WriteLine(&quot;action is &quot; + action.ToString());
+			System.Console.WriteLine(&quot;Comparison 1 is &quot; + ((int)BeforeCompileAction.SaveAllFiles));
+			System.Console.WriteLine(&quot;Comparison 2 is &quot; + ((int)BeforeCompileAction.PromptForSave));
+			System.Console.WriteLine(&quot;Comparison 3 is &quot; + ((int)BeforeCompileAction.Nothing));
+			
+			saveChangesRadioButton.Active = action.Equals(BeforeCompileAction.SaveAllFiles);
+			promptChangesRadioButton.Active = action.Equals(BeforeCompileAction.PromptForSave);
+			noSaveRadioButton.Active = action.Equals(BeforeCompileAction.Nothing);
+			
+			loadPrevProjectCheckBox.Active = (bool)PropertyService.GetProperty(&quot;SharpDevelop.LoadPrevProjectOnStartup&quot;, false);
+
+			showTaskListCheckBox.Active = (bool)PropertyService.GetProperty(&quot;SharpDevelop.ShowTaskListAfterBuild&quot;, true);
+			showOutputCheckBox.Active = (bool)PropertyService.GetProperty(&quot;SharpDevelop.ShowOutputWindowAtBuild&quot;, true);
+			
+			selectProjectLocationButton.Clicked += new EventHandler(SelectProjectLocationButtonClicked);
+		}
+		
+		public override bool StorePanelContents()
+		{
+			// check for correct settings
+			string projectPath = projectLocationTextBox.Text;
+			if (projectPath.Length &gt; 0) {
+				if (!FileUtilityService.IsValidFileName(projectPath)) {
+					MessageService.ShowError(&quot;Invalid project path specified&quot;);
+					return false;
+				}
+			}
+			
+			// set properties
+			PropertyService.SetProperty(&quot;ICSharpCode.SharpDevelop.Gui.Dialogs.NewProjectDialog.DefaultPath&quot;, projectPath);
+			
+			if (saveChangesRadioButton.Active) {
+				PropertyService.SetProperty(&quot;SharpDevelop.Services.DefaultParserService.BeforeCompileAction&quot;, BeforeCompileAction.SaveAllFiles);
+			} else if (promptChangesRadioButton.Active) {
+				PropertyService.SetProperty(&quot;SharpDevelop.Services.DefaultParserService.BeforeCompileAction&quot;, BeforeCompileAction.PromptForSave);
+			} else if (noSaveRadioButton.Active) {
+				PropertyService.SetProperty(&quot;SharpDevelop.Services.DefaultParserService.BeforeCompileAction&quot;, BeforeCompileAction.Nothing);
+			}
+			
+			PropertyService.SetProperty(&quot;SharpDevelop.LoadPrevProjectOnStartup&quot;, loadPrevProjectCheckBox.Active);
+			
+			PropertyService.SetProperty(&quot;SharpDevelop.ShowTaskListAfterBuild&quot;, showTaskListCheckBox.Active);
+			PropertyService.SetProperty(&quot;SharpDevelop.ShowOutputWindowAtBuild&quot;, showOutputCheckBox.Active);
+			
+			return true;
+		}
+		
+		
+		private void SetupPanelInstance()
+		{
+			Gtk.Frame frame1 = new Gtk.Frame(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.ProjectAndCombineOptions.SettingsGroupBox}&quot;));
+			//
+			// set up the Project Settings options
+			//
+			// instantiate all the controls
+			Gtk.VBox vBox1 = new Gtk.VBox(false,2);
+			Gtk.Label label1 = new Gtk.Label(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.ProjectAndCombineOptions.ProjectLocationLabel}&quot;));
+				// make the location text box and button
+				Gtk.HBox hBox1 = new Gtk.HBox(false,2);
+				projectLocationTextBox = new Gtk.Entry();
+				selectProjectLocationButton = Button.NewWithLabel(&quot;...&quot;);
+				// FIXME:: make this button sensitive again when the FOlderDialog is implemented
+				selectProjectLocationButton.Sensitive = false;
+				hBox1.PackStart(projectLocationTextBox, true, true, 2);
+				hBox1.PackStart(selectProjectLocationButton, false, false, 2);
+			loadPrevProjectCheckBox = Gtk.CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.ProjectAndCombineOptions.LoadPrevProjectCheckBox}&quot;));
+			// pack them all
+			vBox1.PackStart(label1, false, false, 2);
+			vBox1.PackStart(hBox1, false, false, 2);
+			vBox1.PackStart(loadPrevProjectCheckBox, false, false, 2);
+			frame1.Add(vBox1);
+			
+			//
+			// setup the save options
+			//
+			//instantiate all the controls
+			Gtk.Frame frame2 = new Gtk.Frame(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.ProjectAndCombineOptions.BuildAndRunGroupBox}&quot;));
+			Gtk.VBox vBox2 = new Gtk.VBox(false, 2);
+			saveChangesRadioButton = new RadioButton(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.ProjectAndCombineOptions.SaveChangesRadioButton}&quot;));
+			promptChangesRadioButton = new RadioButton(saveChangesRadioButton, StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.ProjectAndCombineOptions.PromptToSaveRadioButton}&quot;));
+			noSaveRadioButton = new RadioButton(promptChangesRadioButton, StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.ProjectAndCombineOptions.DontSaveRadioButton}&quot;));
+			showOutputCheckBox = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.ProjectAndCombineOptions.ShowOutputPadCheckBox}&quot;));;
+			showTaskListCheckBox = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.ProjectAndCombineOptions.ShowTaskListPadCheckBox}&quot;));
+			// pack them all
+			vBox2.PackStart(saveChangesRadioButton, false, false, 2);
+			vBox2.PackStart(promptChangesRadioButton, false, false, 2);
+			vBox2.PackStart(noSaveRadioButton, false, false, 2);
+			vBox2.PackStart(showOutputCheckBox, false, false, 2);
+			vBox2.PackStart(showTaskListCheckBox, false, false, 2);
+			frame2.Add(vBox2);
+			
+			// create the main box
+			Gtk.VBox mainBox = new Gtk.VBox(false, 2);
+			mainBox.PackStart(frame1, false, false, 2);
+			mainBox.PackStart(frame2, false, false, 2);
+			
+			this.Add(mainBox);		
+		}		
+		
+		void SelectProjectLocationButtonClicked(object sender, EventArgs e)
+		{
+// FIXME: fix the FolderDialog control first so that we could then use it here
+//			FolderDialog fdiag = new  FolderDialog();
+//			if (fdiag.DisplayDialog(&quot;Select default combile location&quot;) == DialogResult.OK) {
+//				projectLocationTextBox.Text = fdiag.Path;
+//			}
+		}
+	}
+}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000041.html">[Monodevelop-patches-list] r437 - trunk/MonoDevelop/src/Libraries/SharpRefactory/src/Lexer
</A></li>
	<LI>Next message: <A HREF="000043.html">[Monodevelop-patches-list] r439 - in trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor: Commands Gui/Dialogs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42">[ date ]</a>
              <a href="thread.html#42">[ thread ]</a>
              <a href="subject.html#42">[ subject ]</a>
              <a href="author.html#42">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
