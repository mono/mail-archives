<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r648 - in trunk/MonoDevelop: data/resources/glade src/AddIns/DisplayBindings/TextEditor src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels src/Main/Base/Gui/Dialogs/OptionPanels
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r648%20-%20in%20trunk/MonoDevelop%3A%20data/resources/glade%20src/AddIns/DisplayBindings/TextEditor%20src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs%20src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels%20src/Main/Base/Gui/Dialogs/OptionPanels&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000252.html">
   <LINK REL="Next"  HREF="000254.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r648 - in trunk/MonoDevelop: data/resources/glade src/AddIns/DisplayBindings/TextEditor src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels src/Main/Base/Gui/Dialogs/OptionPanels</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r648%20-%20in%20trunk/MonoDevelop%3A%20data/resources/glade%20src/AddIns/DisplayBindings/TextEditor%20src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs%20src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels%20src/Main/Base/Gui/Dialogs/OptionPanels&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r648 - in trunk/MonoDevelop: data/resources/glade src/AddIns/DisplayBindings/TextEditor src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels src/Main/Base/Gui/Dialogs/OptionPanels">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Sun Jan 25 07:36:15 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000252.html">[Monodevelop-patches-list] r647 - trunk/MonoDevelop/src/Libraries/ICSharpCode.TextEditor/src/Gui/CompletionWindow
</A></li>
        <LI>Next message: <A HREF="000254.html">[Monodevelop-patches-list] r649 - trunk/MonoDevelop/src/Libraries/MonoDevelop.Gui/IconView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#253">[ date ]</a>
              <a href="thread.html#253">[ thread ]</a>
              <a href="subject.html#253">[ subject ]</a>
              <a href="author.html#253">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jba
Date: 2004-01-25 07:36:14 -0500 (Sun, 25 Jan 2004)
New Revision: 648

Added:
   trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs/EditTemplateGroupDialog.cs
Modified:
   trunk/MonoDevelop/data/resources/glade/texteditoraddin.glade
   trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels/CodeTemplatePanel.cs
   trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Makefile
   trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/EditTemplateDialog.cs
Log:
finished the code templates dialog finally. need to make the accept buttons defaults on the dialogs though

Modified: trunk/MonoDevelop/data/resources/glade/texteditoraddin.glade
===================================================================
--- trunk/MonoDevelop/data/resources/glade/texteditoraddin.glade	2004-01-25 08:16:43 UTC (rev 647)
+++ trunk/MonoDevelop/data/resources/glade/texteditoraddin.glade	2004-01-25 12:36:14 UTC (rev 648)
@@ -2,7 +2,6 @@
 &lt;!DOCTYPE glade-interface SYSTEM &quot;<A HREF="http://glade.gnome.org/glade-2.0.dtd&quot;">http://glade.gnome.org/glade-2.0.dtd&quot;</A>&gt;
 
 &lt;glade-interface&gt;
-&lt;requires lib=&quot;gnome&quot;/&gt;
 
 &lt;widget class=&quot;GtkDialog&quot; id=&quot;GotoLineDialog&quot;&gt;
   &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
@@ -172,4 +171,275 @@
   &lt;/child&gt;
 &lt;/widget&gt;
 
+&lt;widget class=&quot;GtkWindow&quot; id=&quot;CodeTemplatePane&quot;&gt;
+  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;title&quot; translatable=&quot;yes&quot;&gt;CodeTemplatePane&lt;/property&gt;
+  &lt;property name=&quot;type&quot;&gt;GTK_WINDOW_TOPLEVEL&lt;/property&gt;
+  &lt;property name=&quot;window_position&quot;&gt;GTK_WIN_POS_NONE&lt;/property&gt;
+  &lt;property name=&quot;modal&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;resizable&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;destroy_with_parent&quot;&gt;False&lt;/property&gt;
+
+  &lt;child&gt;
+    &lt;widget class=&quot;GtkVBox&quot; id=&quot;vbox13&quot;&gt;
+      &lt;property name=&quot;border_width&quot;&gt;12&lt;/property&gt;
+      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+      &lt;property name=&quot;spacing&quot;&gt;6&lt;/property&gt;
+
+      &lt;child&gt;
+	&lt;widget class=&quot;GtkTable&quot; id=&quot;table2&quot;&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;n_rows&quot;&gt;2&lt;/property&gt;
+	  &lt;property name=&quot;n_columns&quot;&gt;2&lt;/property&gt;
+	  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+	  &lt;property name=&quot;row_spacing&quot;&gt;6&lt;/property&gt;
+	  &lt;property name=&quot;column_spacing&quot;&gt;6&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkLabel&quot; id=&quot;extensionLabel&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;extensionLabel&lt;/property&gt;
+	      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+	      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;xalign&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+	      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;mnemonic_widget&quot;&gt;groupOptionMenu&lt;/property&gt;
+	    &lt;/widget&gt;
+	    &lt;packing&gt;
+	      &lt;property name=&quot;left_attach&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;right_attach&quot;&gt;1&lt;/property&gt;
+	      &lt;property name=&quot;top_attach&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;bottom_attach&quot;&gt;1&lt;/property&gt;
+	      &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
+	      &lt;property name=&quot;y_options&quot;&gt;&lt;/property&gt;
+	    &lt;/packing&gt;
+	  &lt;/child&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkHBox&quot; id=&quot;hbox8&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;spacing&quot;&gt;6&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkButton&quot; id=&quot;addGroupButton&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;button6&lt;/property&gt;
+		  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkButton&quot; id=&quot;editGroupButton&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;button1&lt;/property&gt;
+		  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkButton&quot; id=&quot;removeGroupButton&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;button2&lt;/property&gt;
+		  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+	    &lt;/widget&gt;
+	    &lt;packing&gt;
+	      &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
+	      &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
+	      &lt;property name=&quot;top_attach&quot;&gt;1&lt;/property&gt;
+	      &lt;property name=&quot;bottom_attach&quot;&gt;2&lt;/property&gt;
+	      &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
+	    &lt;/packing&gt;
+	  &lt;/child&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkOptionMenu&quot; id=&quot;groupOptionMenu&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;history&quot;&gt;-1&lt;/property&gt;
+	    &lt;/widget&gt;
+	    &lt;packing&gt;
+	      &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
+	      &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
+	      &lt;property name=&quot;top_attach&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;bottom_attach&quot;&gt;1&lt;/property&gt;
+	      &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
+	      &lt;property name=&quot;y_options&quot;&gt;&lt;/property&gt;
+	    &lt;/packing&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+
+      &lt;child&gt;
+	&lt;widget class=&quot;GtkHBox&quot; id=&quot;hbox9&quot;&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+	  &lt;property name=&quot;spacing&quot;&gt;6&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkScrolledWindow&quot; id=&quot;scrolledwindow3&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;hscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+	      &lt;property name=&quot;vscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+	      &lt;property name=&quot;shadow_type&quot;&gt;GTK_SHADOW_NONE&lt;/property&gt;
+	      &lt;property name=&quot;window_placement&quot;&gt;GTK_CORNER_TOP_LEFT&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkTreeView&quot; id=&quot;templateListView&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;headers_visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;rules_hint&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;reorderable&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;enable_search&quot;&gt;True&lt;/property&gt;
+		&lt;/widget&gt;
+	      &lt;/child&gt;
+	    &lt;/widget&gt;
+	    &lt;packing&gt;
+	      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	    &lt;/packing&gt;
+	  &lt;/child&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkVBox&quot; id=&quot;vbox14&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;spacing&quot;&gt;6&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkButton&quot; id=&quot;removeButton&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;button3&lt;/property&gt;
+		  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;pack_type&quot;&gt;GTK_PACK_END&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkButton&quot; id=&quot;editButton&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;button4&lt;/property&gt;
+		  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;pack_type&quot;&gt;GTK_PACK_END&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkButton&quot; id=&quot;addButton&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;button5&lt;/property&gt;
+		  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;pack_type&quot;&gt;GTK_PACK_END&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+	    &lt;/widget&gt;
+	    &lt;packing&gt;
+	      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	    &lt;/packing&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+
+      &lt;child&gt;
+	&lt;widget class=&quot;GtkScrolledWindow&quot; id=&quot;scrolledwindow4&quot;&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;hscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+	  &lt;property name=&quot;vscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+	  &lt;property name=&quot;shadow_type&quot;&gt;GTK_SHADOW_NONE&lt;/property&gt;
+	  &lt;property name=&quot;window_placement&quot;&gt;GTK_CORNER_TOP_LEFT&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkTextView&quot; id=&quot;templateTextView&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;editable&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;justification&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+	      &lt;property name=&quot;wrap_mode&quot;&gt;GTK_WRAP_NONE&lt;/property&gt;
+	      &lt;property name=&quot;cursor_visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;pixels_above_lines&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;pixels_below_lines&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;pixels_inside_wrap&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;left_margin&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;right_margin&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;indent&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;text&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
+	    &lt;/widget&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+    &lt;/widget&gt;
+  &lt;/child&gt;
+&lt;/widget&gt;
+
 &lt;/glade-interface&gt;

Added: trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs/EditTemplateGroupDialog.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs/EditTemplateGroupDialog.cs	2004-01-25 08:16:43 UTC (rev 647)
+++ trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/Dialogs/EditTemplateGroupDialog.cs	2004-01-25 12:36:14 UTC (rev 648)
@@ -0,0 +1,87 @@
+// &lt;file&gt;
+//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
+//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
+//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
+//     &lt;version value=&quot;$version&quot;/&gt;
+// &lt;/file&gt;
+
+using System;
+using System.IO;
+
+using ICSharpCode.SharpDevelop.Internal.Templates;
+using ICSharpCode.Core.Services;
+
+namespace ICSharpCode.SharpDevelop.Gui.Dialogs
+{
+	public class EditTemplateGroupDialog : Gtk.Dialog 
+	{
+		CodeTemplateGroup codeTemplateGroup;
+		string titlePrefix = string.Empty;
+		
+		// Gtk members
+		Gtk.Entry templateExtensionsTextBox;		
+		
+		// Services
+		StringParserService StringParserService = (StringParserService)ServiceManager.Services.GetService (typeof (StringParserService));
+		
+		public CodeTemplateGroup CodeTemplateGroup {
+			get {
+				return codeTemplateGroup;
+			}
+		}
+		
+		public EditTemplateGroupDialog(CodeTemplateGroup codeTemplateGroup, string titlePrefix)
+		{
+			this.codeTemplateGroup = codeTemplateGroup;
+			this.titlePrefix = titlePrefix;
+			InitializeComponents();
+			this.ShowAll();
+		}
+		
+		void AcceptEvent(object sender, EventArgs e)
+		{
+			codeTemplateGroup.ExtensionStrings = templateExtensionsTextBox.Text.Split(';');
+			
+			// close the window
+			CancelEvent(sender, EventArgs.Empty);
+		}
+		
+		void CancelEvent(object sender, EventArgs e)
+		{
+			this.Destroy();
+		}
+		
+		void InitializeComponents()
+		{
+			// set up this actual dialog
+			this.Modal = true;
+			// FIXME: make this a resource in the resource file
+			this.Title = titlePrefix + &quot;Code Group&quot;;
+			
+			// set up the dialog fields and add them
+			templateExtensionsTextBox = new Gtk.Entry();
+			templateExtensionsTextBox.ActivatesDefault = true;
+			// FIXME: make this a resource in the resource file
+			Gtk.Label label1 = new Gtk.Label(&quot;Extensions (; seperated)&quot;);
+			
+			label1.Xalign = 0;			
+			templateExtensionsTextBox.Text    = string.Join(&quot;;&quot;, codeTemplateGroup.ExtensionStrings);
+			
+			// FIXME: make the labels both part of the same sizing group so they have the same left and right rows.
+			Gtk.HBox hBox1 = new Gtk.HBox(false, 6);
+			hBox1.PackStart(label1, false, false, 6);
+			hBox1.PackStart(templateExtensionsTextBox, false, false, 6);
+			
+			this.VBox.PackStart(hBox1, false, false, 6);
+			
+			// set up the buttons and add them
+			this.DefaultResponse = (int) Gtk.ResponseType.Ok;
+			Gtk.Button cancelButton = new Gtk.Button(Gtk.Stock.Cancel);
+			Gtk.Button okButton = new Gtk.Button(Gtk.Stock.Ok);
+			okButton.Clicked += new EventHandler(AcceptEvent);
+			cancelButton.Clicked += new EventHandler(CancelEvent);
+			this.AddActionWidget (cancelButton, Gtk.ResponseType.Cancel);
+			this.AddActionWidget (okButton, (int) Gtk.ResponseType.Ok);
+		}
+	}
+}

Modified: trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels/CodeTemplatePanel.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels/CodeTemplatePanel.cs	2004-01-25 08:16:43 UTC (rev 647)
+++ trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels/CodeTemplatePanel.cs	2004-01-25 12:36:14 UTC (rev 648)
@@ -18,239 +18,396 @@
 
 using ICSharpCode.TextEditor;
 using ICSharpCode.TextEditor.Document;
+using ICSharpCode.SharpDevelop.Gui.Dialogs;
 
+using Gtk;
+using MonoDevelop.Gui;
+
 namespace ICSharpCode.SharpDevelop.Gui.Dialogs.OptionPanels 
 {
 	public class CodeTemplatePane : AbstractOptionPanel
-	{/*
-		ArrayList templateGroups;
-		int       currentSelectedGroup = -1;
-		
-		public CodeTemplateGroup CurrentTemplateGroup {
-			get {
-				if (currentSelectedGroup &lt; 0 || currentSelectedGroup &gt;= templateGroups.Count) {
-					return null;
+	{
+		class CodeTemplatePanelWidget : GladeWidgetExtract {
+			// members
+			ArrayList templateGroups;
+			int       currentSelectedGroup = -1;
+			
+			// Services
+			StringParserService StringParserService = (StringParserService)ServiceManager.Services.GetService (typeof (StringParserService));
+			PropertyService PropertyService = (PropertyService)ServiceManager.Services.GetService(typeof(PropertyService));
+			MessageService MessageService = (MessageService)ServiceManager.Services.GetService(typeof(MessageService));					
+			
+			// Gtk widgets
+			[Glade.Widget] Label extensionLabel;
+			[Glade.Widget] Gtk.TreeView templateListView;
+			ListStore templateListViewStore = new ListStore(typeof(CodeTemplate));
+			[Glade.Widget] Button removeButton;
+			[Glade.Widget] Button addButton;
+			[Glade.Widget] Button editButton;
+			[Glade.Widget] Button addGroupButton;
+			[Glade.Widget] Button editGroupButton;
+			[Glade.Widget] Button removeGroupButton;
+			TextBuffer templateTextBuffer = new TextBuffer(null);
+			[Glade.Widget] Gtk.TextView templateTextView;
+			[Glade.Widget] OptionMenu groupOptionMenu;
+			Menu groupMenu;
+			
+			public CodeTemplateGroup CurrentTemplateGroup {
+				get {
+					if (currentSelectedGroup &lt; 0 || currentSelectedGroup &gt;= templateGroups.Count) {
+						return null;
+					}
+					return (CodeTemplateGroup)templateGroups[currentSelectedGroup];
 				}
-				return (CodeTemplateGroup)templateGroups[currentSelectedGroup];
 			}
-		}
-		
-		public override void LoadPanelContents()
-		{
-			templateGroups = CodeTemplateLoader.TemplateGroups;
 			
-			SetupFromXml(Path.Combine(PropertyService.DataDirectory,
-			                          @&quot;resources\panels\CodeTemplatePanel.xfrm&quot;));
+			public ArrayList TemplateGroups {
+				get {
+					return this.templateGroups;
+				}
+			}
 			
-			ControlDictionary[&quot;removeButton&quot;].Click += new System.EventHandler(RemoveEvent);
-			ControlDictionary[&quot;addButton&quot;].Click    += new System.EventHandler(AddEvent);
-			ControlDictionary[&quot;editButton&quot;].Click   += new System.EventHandler(EditEvent);
+			public CodeTemplatePanelWidget (ArrayList templateGroups) : base (&quot;texteditoraddin.glade&quot;, &quot;CodeTemplatePane&quot;)
+			{
+				this.templateGroups = templateGroups;
+				
+				SetLabels();
+				
+				// set up the treeview
+				templateListView.Reorderable = false;
+				templateListView.HeadersVisible = true;
+				templateListView.Selection.Mode = SelectionMode.Multiple;
+				templateListView.Model = templateListViewStore;
+				
+				// set up the text view
+				templateTextView.Buffer = templateTextBuffer;
+				//templateTextView.Font = new System.Drawing.Font(&quot;Courier New&quot;, 10f);
+				
+				// wire in the events
+				removeButton.Clicked += new System.EventHandler(RemoveEvent);
+				addButton.Clicked    += new System.EventHandler(AddEvent);
+				editButton.Clicked   += new System.EventHandler(EditEvent);
+				
+				addGroupButton.Clicked    += new System.EventHandler(AddGroupEvent);
+				editGroupButton.Clicked += new System.EventHandler(EditGroupEvent);
+				removeGroupButton.Clicked += new System.EventHandler(RemoveGroupEvent);
+				templateListView.RowActivated		+= new GtkSharp.RowActivatedHandler(RowActivatedEvent);
+				templateListView.Selection.Changed 	+= new EventHandler(IndexChange);
+				templateTextBuffer.Changed += new EventHandler(TextChange);
+				
+				if (templateGroups.Count &gt; 0) {
+					currentSelectedGroup = 0;
+				}
+				
+				FillGroupOptionMenu();
+				BuildListView();
+				IndexChange(null, null);
+				SetEnabledStatus();
+			}
 			
-			ControlDictionary[&quot;addGroupButton&quot;].Click    += new System.EventHandler(AddGroupEvent);
-			ControlDictionary[&quot;removeGroupButton&quot;].Click += new System.EventHandler(RemoveGroupEvent);
+			void SetLabels()
+			{
+				extensionLabel.TextWithMnemonic = StringParserService.Parse(&quot;${res:Dialog.Options.CodeTemplate.ExtensionsLabel}&quot;);
+				removeButton.Label = StringParserService.Parse(&quot;${res:Global.RemoveButtonText}&quot;);
+				addButton.Label = StringParserService.Parse(&quot;${res:Global.AddButtonText}&quot;);
+				editButton.Label = StringParserService.Parse(&quot;${res:Global.EditButtonText}&quot;);
+				addGroupButton.Label = StringParserService.Parse(&quot;${res:Dialog.Options.CodeTemplate.AddGroupLabel}&quot;);
+				// FIXME: make this use the resource file for the label
+				editGroupButton.Label = &quot;Ed_it Group&quot;;
+				removeGroupButton.Label = StringParserService.Parse(&quot;${res:Dialog.Options.CodeTemplate.RemoveGroupLabel}&quot;);
+				
+				CellRendererText textRenderer = new CellRendererText ();
+				
+				// and listview columns 
+				templateListView.AppendColumn (
+					StringParserService.Parse(&quot;${res:Dialog.Options.CodeTemplate.Template}&quot;), 
+					textRenderer,  
+					new TreeCellDataFunc(TemplateListViewCellDataFunc));
+				templateListView.AppendColumn (
+					StringParserService.Parse(&quot;${res:Dialog.Options.CodeTemplate.Description}&quot;), 
+					textRenderer, 
+					new TreeCellDataFunc(TemplateListViewCellDataFunc));
+			}
 			
+			// function to render the cell
+			void TemplateListViewCellDataFunc(TreeViewColumn column, CellRenderer renderer, TreeModel model, TreeIter iter)
+			{
+				string toWrite = string.Empty;
+				
+				CodeTemplate codeTemplate = ((ListStore)model).GetValue(iter, 0) as CodeTemplate;
+				
+				if(column.Title == StringParserService.Parse(&quot;${res:Dialog.Options.CodeTemplate.Template}&quot;))
+				{
+					// first column
+					((CellRendererText)renderer).Text = codeTemplate.Shortcut;
+				}
+				else
+				{
+					// second column
+					((CellRendererText)renderer).Text = codeTemplate.Description;
+				}
+			}
 			
-			((RichTextBox)ControlDictionary[&quot;templateRichTextBox&quot;]).Font = new System.Drawing.Font(&quot;Courier New&quot;, 10f);
-			((RichTextBox)ControlDictionary[&quot;templateRichTextBox&quot;]).TextChanged += new EventHandler(TextChange);
+			void SetEnabledStatus()
+			{
+				bool groupSelected = CurrentTemplateGroup != null;
+				bool groupsEmpty   = templateGroups.Count != 0;
+				
+				SetEnabledStatus(groupSelected, addButton, editButton, removeButton, templateListView, templateTextView);
+				SetEnabledStatus(groupsEmpty, groupOptionMenu, extensionLabel);
+				if (groupSelected) {
+					bool oneItemSelected = templateListView.Selection.CountSelectedRows() == 1;
+					bool isItemSelected  = templateListView.Selection.CountSelectedRows() &gt; 0;
+					SetEnabledStatus(oneItemSelected, editButton, templateTextView);
+					SetEnabledStatus(isItemSelected, removeButton);
+				}
+			}
 			
-			((ListView)ControlDictionary[&quot;templateListView&quot;]).Activation = ItemActivation.Standard;
-			((ListView)ControlDictionary[&quot;templateListView&quot;]).ItemActivate         += new System.EventHandler(EditEvent);
-			((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedIndexChanged += new System.EventHandler(IndexChange);
+			// disables or enables (sets sensitivty) a specified array of widgets
+			public void SetEnabledStatus(bool enabled, params Widget[] controls)
+			{
+				foreach (Widget control in controls) {				
+					if (control == null) {
+						MessageService.ShowError(&quot;Control not found!&quot;);
+					} else {
+						control.Sensitive = enabled;
+					}
+				}
+			}
 			
-			((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).DropDown += new EventHandler(FillGroupBoxEvent);
+	#region GroupComboBox event handler
+			void SetGroupSelection(object sender, EventArgs e)
+			{
+				currentSelectedGroup = groupOptionMenu.History;
+				BuildListView();
+			}		
 			
-			if (templateGroups.Count &gt; 0) {
-				currentSelectedGroup = 0;
+	#endregion
+			
+	#region Group Button events
+			void AddGroupEvent(object sender, EventArgs e)
+			{
+				CodeTemplateGroup templateGroup = new CodeTemplateGroup(&quot;.???&quot;);
+				if(ShowEditTemplateGroupDialog(ref templateGroup, &quot;New &quot;)) {
+					templateGroups.Add(templateGroup);
+					FillGroupOptionMenu();
+					groupOptionMenu.SetHistory((uint) templateGroups.Count - 1);
+					SetEnabledStatus();
+				}
 			}
 			
-			FillGroupComboBox();
-			BuildListView();
-			IndexChange(null, null);
-			SetEnabledStatus();
-		}
-		
-		public override bool StorePanelContents()
-		{
-			CodeTemplateLoader.TemplateGroups = templateGroups;
-			CodeTemplateLoader.SaveTemplates();
-			return true;
-		}
-		
-		void FillGroupBoxEvent(object sender, EventArgs e)
-		{
-			FillGroupComboBox();
-		}
-		
-		void SetEnabledStatus()
-		{
-			bool groupSelected = CurrentTemplateGroup != null;
-			bool groupsEmpty   = templateGroups.Count != 0;
+			void EditGroupEvent(object sender, EventArgs e)
+			{
+				
+				int index = groupOptionMenu.History;
+				CodeTemplateGroup templateGroup = (CodeTemplateGroup) templateGroups[index];
+				if(ShowEditTemplateGroupDialog(ref templateGroup, &quot;Edit &quot;)) {
+					templateGroups[index] = templateGroup;
+					FillGroupOptionMenu();
+					groupOptionMenu.SetHistory((uint)index);
+					SetEnabledStatus();
+				}
+			}
 			
-			SetEnabledStatus(groupSelected, &quot;addButton&quot;, &quot;editButton&quot;, &quot;removeButton&quot;, &quot;templateListView&quot;, &quot;templateRichTextBox&quot;);
-			SetEnabledStatus(groupsEmpty, &quot;groupComboBox&quot;, &quot;extensionLabel&quot;);
-			if (groupSelected) {
-				bool oneItemSelected = ((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedItems.Count == 1;
-				bool isItemSelected  = ((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedItems.Count &gt; 0;
-				SetEnabledStatus(oneItemSelected, &quot;editButton&quot;, &quot;templateRichTextBox&quot;);
-				SetEnabledStatus(isItemSelected, &quot;removeButton&quot;);
+			void RemoveGroupEvent(object sender, EventArgs e)
+			{
+				if (CurrentTemplateGroup != null) {
+					templateGroups.RemoveAt(currentSelectedGroup);
+					if (templateGroups.Count == 0) {
+						currentSelectedGroup = -1;
+					} else {
+						groupOptionMenu.SetHistory((uint) Math.Min(currentSelectedGroup, templateGroups.Count - 1));
+					}
+					FillGroupOptionMenu();
+					BuildListView();
+					SetEnabledStatus();
+				}
 			}
-		}
-		
-#region GroupComboBox event handler
-		void SetGroupSelection(object sender, EventArgs e)
-		{
-			currentSelectedGroup = ((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).SelectedIndex;
-			BuildListView();
-		}
-		
-		void GroupComboBoxTextChanged(object sender, EventArgs e)
-		{
-			if (((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).SelectedIndex &gt;= 0) {
-				currentSelectedGroup = ((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).SelectedIndex;
+			
+			bool ShowEditTemplateGroupDialog(ref CodeTemplateGroup templateGroup, string title)
+			{
+				using (EditTemplateGroupDialog etgd = new EditTemplateGroupDialog(templateGroup, title)) {
+					return (etgd.Run() == (int) Gtk.ResponseType.Ok);
+				}
 			}
-			if (CurrentTemplateGroup != null) {
-				CurrentTemplateGroup.ExtensionStrings = ((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).Text.Split(';');
+	#endregion
+			
+	#region Template Button events
+			void RemoveEvent(object sender, System.EventArgs e)
+			{
+				// first copy the selected item paths into a temp array
+				int maxIndex = -1;				
+				int selectedItemCount = templateListView.Selection.CountSelectedRows();
+				TreeIter[] selectedIters = new TreeIter[selectedItemCount];
+				TreeModel lv;
+				GLib.List pathList = templateListView.Selection.GetSelectedRows(out lv);								
+				for(int i = 0; i &lt; selectedItemCount; i++) {
+					TreePath path = (TreePath) pathList[i];
+					((ListStore)lv).GetIter(out selectedIters[i], path);
+					maxIndex = path.Indices[0];
+				}
+				
+				// now delete each item in that list
+				foreach(TreeIter toDelete in selectedIters) {
+					TreeIter itr = toDelete;					
+					((ListStore)lv).Remove(out itr);
+				}
+				
+				StoreTemplateGroup();
+				
+				// try and select the next item after the one removed
+				if(maxIndex &gt; -1) {
+					templateListView.Selection.UnselectAll();
+					TreeIter nextIter;
+					maxIndex += 1- selectedItemCount;
+					if(templateListViewStore.GetIterFromString(out nextIter, maxIndex.ToString())) {				
+						// select the next one
+						templateListView.Selection.SelectIter(nextIter);
+					} else {
+						// select the very last one
+						maxIndex = templateListViewStore.IterNChildren() - 1;
+						if(templateListViewStore.GetIterFromString(out nextIter, (maxIndex).ToString())) {
+							templateListView.Selection.SelectIter(nextIter);
+						}
+					}
+				}
 			}
-		}
-#endregion
-		
-#region Group Button events
-		void AddGroupEvent(object sender, EventArgs e)
-		{
-			templateGroups.Add(new CodeTemplateGroup(&quot;.???&quot;));
-			FillGroupComboBox();
-			((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).SelectedIndex = templateGroups.Count - 1;
-			SetEnabledStatus();
-		}
-		
-		void RemoveGroupEvent(object sender, EventArgs e)
-		{
-			if (CurrentTemplateGroup != null) {
-				templateGroups.RemoveAt(currentSelectedGroup);
-				if (templateGroups.Count == 0) {
-					currentSelectedGroup = -1;
-				} else {
-					((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).SelectedIndex = Math.Min(currentSelectedGroup, templateGroups.Count - 1);
+			
+			void AddEvent(object sender, System.EventArgs e)
+			{
+				CodeTemplate newTemplate = new CodeTemplate();
+				using (EditTemplateDialog etd = new EditTemplateDialog(newTemplate)) {
+					if (etd.Run() == (int) Gtk.ResponseType.Ok) {
+						CurrentTemplateGroup.Templates.Add(newTemplate);						
+						templateListView.Selection.UnselectAll();
+						BuildListView();
+						
+						// select the newly added last one
+						TreeIter nextIter;
+						int maxIndex = templateListViewStore.IterNChildren() - 1;
+						if(templateListViewStore.GetIterFromString(out nextIter, (maxIndex).ToString())) {
+							templateListView.Selection.SelectIter(nextIter);
+						}
+					}
 				}
-				FillGroupComboBox();
-				BuildListView();
-				SetEnabledStatus();
 			}
-		}
-#endregion
-		
-#region Template Button events
-		void RemoveEvent(object sender, System.EventArgs e)
-		{
-			object[] selectedItems = new object[((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedItems.Count];
-			((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedItems.CopyTo(selectedItems, 0);
 			
-			foreach (ListViewItem item in selectedItems) {
-				((ListView)ControlDictionary[&quot;templateListView&quot;]).Items.Remove(item);
+			void EditEvent(object sender, System.EventArgs e)
+			{
+				TreeIter selectedIter;
+				TreeModel ls;				
+				if(((ListStore)templateListView.Model).GetIter(out selectedIter, (TreePath) templateListView.Selection.GetSelectedRows(out ls)[0])) {
+					CodeTemplate template = ls.GetValue(selectedIter, 0) as CodeTemplate;
+					
+					using (EditTemplateDialog etd = new EditTemplateDialog(template)) {
+						if (etd.Run() == (int) Gtk.ResponseType.Ok) {
+							ls.SetValue(selectedIter, 0, template);
+							StoreTemplateGroup();
+						}
+					}					
+					
+					// select the newly edited item
+					templateListView.Selection.SelectIter(selectedIter);
+				}				
 			}
-			StoreTemplateGroup();
-		}
-		
-		void AddEvent(object sender, System.EventArgs e)
-		{
-			CodeTemplate newTemplate = new CodeTemplate();
-			using (EditTemplateDialog etd = new EditTemplateDialog(newTemplate)) {
-				if (etd.ShowDialog() == DialogResult.OK) {
-					CurrentTemplateGroup.Templates.Add(newTemplate);
-					((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedItems.Clear();
-					BuildListView();
-					((ListView)ControlDictionary[&quot;templateListView&quot;]).Select();
-				}
+			
+			// raised when a treeview row is double clicked on
+			void RowActivatedEvent(object sender, GtkSharp.RowActivatedArgs ra)
+			{
+				EditEvent(sender, System.EventArgs.Empty);
 			}
-		}
-		
-		void EditEvent(object sender, System.EventArgs e)
-		{
-			int i = GetCurrentIndex();
-			if (i != -1) {
-				ListViewItem item = ((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedItems[0];
-				CodeTemplate template = (CodeTemplate)item.Tag;
-				template = new CodeTemplate(template.Shortcut, template.Description, template.Text);
+	#endregion
+			
+			void FillGroupOptionMenu()
+			{
+				groupOptionMenu.Changed -= new EventHandler(SetGroupSelection);
 				
-				using (EditTemplateDialog etd = new EditTemplateDialog(template)) {
-					if (etd.ShowDialog() == DialogResult.OK) {
-						item.Tag = template;
-						StoreTemplateGroup();
-					}
+				// remove the menu items
+				groupOptionMenu.RemoveMenu();
+				groupMenu = new Menu();
+				
+				
+				foreach (CodeTemplateGroup templateGroup in templateGroups) {					
+					groupMenu.Append(Gtk.MenuItem.NewWithLabel(String.Join(&quot;;&quot;, templateGroup.ExtensionStrings)));					
 				}
 				
-				BuildListView();
+				groupMenu.ShowAll();
+				groupOptionMenu.Menu = groupMenu;
+				if (currentSelectedGroup &gt;= 0) {
+					groupOptionMenu.SetHistory((uint)currentSelectedGroup);
+				}
+				
+				groupOptionMenu.Changed += new EventHandler(SetGroupSelection);
 			}
-		}
-#endregion
-		
-		void FillGroupComboBox()
-		{
-			((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).TextChanged          -= new EventHandler(GroupComboBoxTextChanged);
-			((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).SelectedIndexChanged -= new EventHandler(SetGroupSelection);
 			
-			((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).Items.Clear();
-			foreach (CodeTemplateGroup templateGroup in templateGroups) {
-				((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).Items.Add(String.Join(&quot;;&quot;, templateGroup.ExtensionStrings));
+			void IndexChange(object sender, System.EventArgs e)
+			{
+				if(templateListView.Selection.CountSelectedRows() == 1) {
+					TreeIter selectedIter;
+					TreeModel listStore;				
+					((ListStore)templateListView.Model).GetIter(out selectedIter, (TreePath) templateListView.Selection.GetSelectedRows(out listStore)[0]);
+					templateTextBuffer.Text    = ((CodeTemplate)listStore.GetValue(selectedIter, 0)).Text;
+				} else {
+					templateTextBuffer.Text    = String.Empty;
+				}
+				SetEnabledStatus();
 			}
-			((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).Text = CurrentTemplateGroup != null ? ((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).Items[currentSelectedGroup].ToString() : String.Empty;
-			if (currentSelectedGroup &gt;= 0) {
-				((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).SelectedIndex = currentSelectedGroup;
+			
+			void TextChange(object sender, EventArgs e)
+			{
+				if(templateListView.Selection.CountSelectedRows() == 1) {
+					TreeIter selectedIter;
+					TreeModel listStore;				
+					((ListStore)templateListView.Model).GetIter(out selectedIter, (TreePath) templateListView.Selection.GetSelectedRows(out listStore)[0]);
+					((CodeTemplate)listStore.GetValue(selectedIter, 0)).Text = templateTextBuffer.Text;
+				}
 			}
 			
-			((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).SelectedIndexChanged += new EventHandler(SetGroupSelection);
-			((ComboBox)ControlDictionary[&quot;groupComboBox&quot;]).TextChanged          += new EventHandler(GroupComboBoxTextChanged);
-		}
-		
-		int GetCurrentIndex()
-		{
-			if (((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedItems.Count == 1) {
-				return ((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedItems[0].Index;
+			void StoreTemplateGroup()
+			{
+				if (CurrentTemplateGroup != null) {
+					CurrentTemplateGroup.Templates.Clear();
+						
+					TreeIter first;			
+					if(templateListView.Model.GetIterFirst(out first)) {
+						TreeIter current = first;
+						
+						// loop through items in the tree, adding each item to the template group
+						do {
+							CurrentTemplateGroup.Templates.Add(templateListView.Model.GetValue(current, 0)); 
+						} while(templateListView.Model.IterNext(out current));
+					}
+				}
 			}
-			return -1;
-		}
-		
-		void IndexChange(object sender, System.EventArgs e)
-		{
-			int i = GetCurrentIndex();
 			
-			if (i != -1) {
-				ControlDictionary[&quot;templateRichTextBox&quot;].Text    = ((CodeTemplate)((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedItems[0].Tag).Text;
-			} else {
-				ControlDictionary[&quot;templateRichTextBox&quot;].Text    = String.Empty;
+			void BuildListView()
+			{
+				ListStore listStore = templateListView.Model as ListStore;
+				listStore.Clear();
+				if (CurrentTemplateGroup != null) {
+					foreach (CodeTemplate template in CurrentTemplateGroup.Templates) {
+						listStore.AppendValues(template);					
+					}
+				}
+				IndexChange(this, EventArgs.Empty);
 			}
-			SetEnabledStatus();
 		}
 		
-		void TextChange(object sender, EventArgs e)
-		{
-			int i = GetCurrentIndex();
-			if (i != -1) {
-				((CodeTemplate)((ListView)ControlDictionary[&quot;templateListView&quot;]).SelectedItems[0].Tag).Text = ControlDictionary[&quot;templateRichTextBox&quot;].Text;
-			}
-		}
+		CodeTemplatePanelWidget widget;
 		
-		void StoreTemplateGroup()
+		public override void LoadPanelContents()
 		{
-			if (CurrentTemplateGroup != null) {
-				CurrentTemplateGroup.Templates.Clear();
-				foreach (ListViewItem item in ((ListView)ControlDictionary[&quot;templateListView&quot;]).Items) {
-					CurrentTemplateGroup.Templates.Add(item.Tag);
-				}
-			}
+			// create a new CodeTemplatePanelWidget using glade files and add it
+			// pass in the template groups that it needs
+			this.Add (widget = new CodeTemplatePanelWidget (CodeTemplateLoader.TemplateGroups));
 		}
-		
-		void BuildListView()
+			
+		public override bool StorePanelContents()
 		{
-			((ListView)ControlDictionary[&quot;templateListView&quot;]).Items.Clear();
-			if (CurrentTemplateGroup != null) {
-				foreach (CodeTemplate template in CurrentTemplateGroup.Templates) {
-					ListViewItem newItem = new ListViewItem(new string[] { template.Shortcut, template.Description });
-					newItem.Tag = template;
-					((ListView)ControlDictionary[&quot;templateListView&quot;]).Items.Add(newItem);
-				}
-			}
-			IndexChange(this, EventArgs.Empty);
-		}*/
+			// get template groups from widhet and save them
+			CodeTemplateLoader.TemplateGroups = widget.TemplateGroups;
+			CodeTemplateLoader.SaveTemplates();
+			return true;
+		}		
 	}
 }

Modified: trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Makefile
===================================================================
--- trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Makefile	2004-01-25 08:16:43 UTC (rev 647)
+++ trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Makefile	2004-01-25 12:36:14 UTC (rev 648)
@@ -17,6 +17,7 @@
 ./Gui/OptionPanels/CodeTemplatePanel.cs \
 ./Gui/OptionPanels/BehaviorTextEditorPanel.cs \
 ./Gui/OptionPanels/MarkersTextEditorPanel.cs \
+./Gui/Dialogs/EditTemplateGroupDialog.cs \
 ./Gui/Dialogs/ExportProjectToHtmlDialog.cs \
 ./Gui/Dialogs/SortOptionsDialog.cs \
 ./Gui/Dialogs/ReplaceInFilesDialog.cs \
@@ -71,6 +72,7 @@
 		/r:../../../../build/bin/ICSharpCode.TextEditor.dll \
 		/r:../../../../build/bin/SharpDevelop.Base.dll \
 		/r:System.DirectoryServices.dll /r:pango-sharp.dll /r:glade-sharp.dll \
+		/r:MonoDevelop.Gui /r:glib-sharp.dll \
 		/resource:../../../../data/resources/glade/texteditoraddin.glade,texteditoraddin.glade \
 		/define:GTK /r:gtk-sharp.dll /r:gdk-sharp.dll \
 		$(SOURCES)

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/EditTemplateDialog.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/EditTemplateDialog.cs	2004-01-25 08:16:43 UTC (rev 647)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/OptionPanels/EditTemplateDialog.cs	2004-01-25 12:36:14 UTC (rev 648)
@@ -9,14 +9,21 @@
 using System.IO;
 
 using ICSharpCode.SharpDevelop.Internal.Templates;
-using ICSharpCode.SharpDevelop.Gui.XmlForms;
+using ICSharpCode.Core.Services;
 
 namespace ICSharpCode.SharpDevelop.Gui.Dialogs
-{/*
-	public class EditTemplateDialog : BaseSharpDevelopForm 
+{
+	public class EditTemplateDialog : Gtk.Dialog 
 	{
 		CodeTemplate codeTemplate;
 		
+		// Gtk members
+		Gtk.Entry templateTextBox;
+		Gtk.Entry descriptionTextBox;
+		
+		// Services
+		StringParserService StringParserService = (StringParserService)ServiceManager.Services.GetService (typeof (StringParserService));
+		
 		public CodeTemplate CodeTemplate {
 			get {
 				return codeTemplate;
@@ -27,25 +34,67 @@
 		{
 			this.codeTemplate = codeTemplate;
 			InitializeComponents();
+			this.ShowAll();
 		}
 		
 		void AcceptEvent(object sender, EventArgs e)
 		{
-			codeTemplate.Shortcut    = ControlDictionary[&quot;templateTextBox&quot;].Text;
-			codeTemplate.Description = ControlDictionary[&quot;descriptionTextBox&quot;].Text;
+			codeTemplate.Shortcut    = templateTextBox.Text;
+			codeTemplate.Description = descriptionTextBox.Text;
+			
+			// close the window
+			CancelEvent(sender, EventArgs.Empty);
 		}
 		
+		void CancelEvent(object sender, EventArgs e)
+		{
+			this.Destroy();
+		}
+		
 		void InitializeComponents()
 		{
-			base.SetupFromXml(Path.Combine(PropertyService.DataDirectory, @&quot;resources\dialogs\EditTemplateDialog.xfrm&quot;));
+			// set up this actual dialog
+			this.Modal = true;
+			this.Title = StringParserService.Parse(&quot;${res:Dialog.Options.CodeTemplate.EditTemplateDialog.DialogName}&quot;);
 			
-			ControlDictionary[&quot;templateTextBox&quot;].Text    = codeTemplate.Shortcut;
-			ControlDictionary[&quot;descriptionTextBox&quot;].Text = codeTemplate.Description;
+			// set up the dialog fields and add them
+			templateTextBox = new Gtk.Entry();
+			descriptionTextBox = new Gtk.Entry();
+			descriptionTextBox.ActivatesDefault = true;
+			Gtk.Label label1 = new Gtk.Label(StringParserService.Parse(&quot;${res:Dialog.Options.CodeTemplate.EditTemplateDialog.DescriptionLabel}&quot;));
+			Gtk.Label label2 = new Gtk.Label(StringParserService.Parse(&quot;${res:Dialog.Options.CodeTemplate.EditTemplateDialog.TemplateLabel}&quot;));
+			label1.Xalign = 0;
+			label2.Xalign = 0;
+			templateTextBox.Text    = codeTemplate.Shortcut;
+			descriptionTextBox.Text = codeTemplate.Description;			
+			Gtk.SizeGroup sizeGroup1 = new Gtk.SizeGroup(Gtk.SizeGroupMode.Horizontal);
+			Gtk.SizeGroup sizeGroup2 = new Gtk.SizeGroup(Gtk.SizeGroupMode.Horizontal);			
+			sizeGroup1.AddWidget(templateTextBox);
+			sizeGroup1.AddWidget(descriptionTextBox);
+			sizeGroup2.AddWidget(label1);
+			sizeGroup2.AddWidget(label2);
 			
-			ControlDictionary[&quot;okButton&quot;].Click += new EventHandler(AcceptEvent);
+			// FIXME: make the labels both part of the same sizing group so they have the same left and right rows.
+			Gtk.HBox hBox1 = new Gtk.HBox(false, 6);
+			hBox1.PackStart(label1, false, false, 6);
+			hBox1.PackStart(descriptionTextBox, false, false, 6);
 			
-			Owner = (Form)WorkbenchSingleton.Workbench;
-			Icon  = null;
+			Gtk.HBox hBox2 = new Gtk.HBox(false, 6);
+			hBox2.PackStart(label2, false, false, 6);
+			hBox2.PackStart(templateTextBox, false, false, 6);
+			
+			this.VBox.PackStart(hBox1, false, false, 6);
+			this.VBox.PackStart(hBox2, false, false, 6);
+			
+			// set up the buttons and add them
+			this.DefaultResponse = (int) Gtk.ResponseType.Ok;
+			Gtk.Button cancelButton = new Gtk.Button(Gtk.Stock.Cancel);
+			Gtk.Button okButton = new Gtk.Button(Gtk.Stock.Ok);
+			okButton.Clicked += new EventHandler(AcceptEvent);
+			cancelButton.Clicked += new EventHandler(CancelEvent);
+			this.AddActionWidget (cancelButton, Gtk.ResponseType.Cancel);
+			this.AddActionWidget (okButton, (int) Gtk.ResponseType.Ok);
+			
 		}
-	}*/
+	}
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000252.html">[Monodevelop-patches-list] r647 - trunk/MonoDevelop/src/Libraries/ICSharpCode.TextEditor/src/Gui/CompletionWindow
</A></li>
	<LI>Next message: <A HREF="000254.html">[Monodevelop-patches-list] r649 - trunk/MonoDevelop/src/Libraries/MonoDevelop.Gui/IconView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#253">[ date ]</a>
              <a href="thread.html#253">[ thread ]</a>
              <a href="subject.html#253">[ subject ]</a>
              <a href="author.html#253">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
