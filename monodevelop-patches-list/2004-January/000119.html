<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r510 - in trunk/MonoDevelop/src: Libraries/MonoDevelop.Gui/Tree Main/Base/Commands Main/Base/Gui/Components Main/Base/Gui/Workbench
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r510%20-%20in%20trunk/MonoDevelop/src%3A%20Libraries/MonoDevelop.Gui/Tree%20Main/Base/Commands%20Main/Base/Gui/Components%20Main/Base/Gui/Workbench&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000118.html">
   <LINK REL="Next"  HREF="000120.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r510 - in trunk/MonoDevelop/src: Libraries/MonoDevelop.Gui/Tree Main/Base/Commands Main/Base/Gui/Components Main/Base/Gui/Workbench</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r510%20-%20in%20trunk/MonoDevelop/src%3A%20Libraries/MonoDevelop.Gui/Tree%20Main/Base/Commands%20Main/Base/Gui/Components%20Main/Base/Gui/Workbench&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r510 - in trunk/MonoDevelop/src: Libraries/MonoDevelop.Gui/Tree Main/Base/Commands Main/Base/Gui/Components Main/Base/Gui/Workbench">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Fri Jan 16 23:05:09 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000118.html">[Monodevelop-patches-list] r509 - trunk/MonoDevelop/src/Main/Base/Gui/Dialogs
</A></li>
        <LI>Next message: <A HREF="000120.html">[Monodevelop-patches-list] r511 - trunk/MonoDevelop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#119">[ date ]</a>
              <a href="thread.html#119">[ thread ]</a>
              <a href="subject.html#119">[ subject ]</a>
              <a href="author.html#119">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-01-16 23:05:09 -0500 (Fri, 16 Jan 2004)
New Revision: 510

Modified:
   trunk/MonoDevelop/src/Libraries/MonoDevelop.Gui/Tree/TreeView.cs
   trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs
   trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenu.cs
   trunk/MonoDevelop/src/Main/Base/Gui/Workbench/DefaultWorkbench.cs
Log:
finally, fixed that obnoxious startup issue with the dead Project menu


Modified: trunk/MonoDevelop/src/Libraries/MonoDevelop.Gui/Tree/TreeView.cs
===================================================================
--- trunk/MonoDevelop/src/Libraries/MonoDevelop.Gui/Tree/TreeView.cs	2004-01-17 03:29:47 UTC (rev 509)
+++ trunk/MonoDevelop/src/Libraries/MonoDevelop.Gui/Tree/TreeView.cs	2004-01-17 04:05:09 UTC (rev 510)
@@ -25,10 +25,10 @@
 			complete_column.AddAttribute (pix_render, &quot;pixbuf&quot;, 1);
 			
 			Gtk.CellRendererText text_render = new Gtk.CellRendererText ();
-			text_render.Editable = canEdit;
-			if (canEdit) {
-				text_render.Edited += new GtkSharp.EditedHandler (OnEdit);
-			}
+			//text_render.Editable = canEdit;
+			//if (canEdit) {
+			//	text_render.Edited += new GtkSharp.EditedHandler (OnEdit);
+			//}
 			complete_column.PackStart (text_render, true);
 			complete_column.AddAttribute (text_render, &quot;text&quot;, 0);
 	

Modified: trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs	2004-01-17 03:29:47 UTC (rev 509)
+++ trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs	2004-01-17 04:05:09 UTC (rev 510)
@@ -211,6 +211,7 @@
 #endif
 			
 			((Gtk.Window)WorkbenchSingleton.Workbench).ShowAll ();
+			WorkbenchSingleton.Workbench.RedrawAllComponents ();
 		
 			ShowTipOfTheDay (null, null);
 		

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenu.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenu.cs	2004-01-17 03:29:47 UTC (rev 509)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Components/SdMenu.cs	2004-01-17 04:05:09 UTC (rev 510)
@@ -64,7 +64,7 @@
 			((Gtk.Window)WorkbenchSingleton.Workbench).AddAccelGroup (accel);
 		}
 		
-		protected void OnDropDown(object ob, System.EventArgs e)
+		public void OnDropDown(object ob, System.EventArgs e)
 		{
 			/*foreach (object o in ((Gtk.Menu)Submenu).Children) {
 			
@@ -79,8 +79,8 @@
 		{
 			if (conditionCollection != null) {
 				ConditionFailedAction failedAction = conditionCollection.GetCurrentConditionFailedAction(caller);
-				this.Sensitive = failedAction != ConditionFailedAction.Disable;
-				this.Visible = failedAction != ConditionFailedAction.Exclude;
+				this.Sensitive = (failedAction != ConditionFailedAction.Disable);
+				this.Visible = (failedAction != ConditionFailedAction.Exclude);
 			}
 			
 			if (Visible) {
@@ -103,13 +103,11 @@
 				}
 				ShowAll ();
 			}
-			//Text = stringParserService.Parse(localizedText);
 		}
 
 		public void Append (Gtk.Widget item)
 		{
-			if (item.Parent == null) // FIXME: lamehack
-				subMenu.Append (item);
+			subMenu.Append (item);
 		}
 	}
 }

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Workbench/DefaultWorkbench.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Workbench/DefaultWorkbench.cs	2004-01-17 03:29:47 UTC (rev 509)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Workbench/DefaultWorkbench.cs	2004-01-17 04:05:09 UTC (rev 510)
@@ -138,27 +138,14 @@
 			ResourceService resourceService = (ResourceService)ServiceManager.Services.GetService(typeof(IResourceService));
 			Title = resourceService.GetString(&quot;MainWindow.DialogName&quot;);
 		
-#if GTK
 			windowChangeEventHandler = new EventHandler(OnActiveWindowChanged);
 
 			DefaultWidth = normalBounds.Width;
 			DefaultHeight = normalBounds.Height;
 
 			DeleteEvent += new GtkSharp.DeleteEventHandler (OnClosing);
-
-
 			this.Icon = resourceService.GetBitmap (&quot;Icons.SharpDevelopIcon&quot;);
 			this.WindowPosition = Gtk.WindowPosition.None;
-			// FIXME: GTKize
-#else		
-			Icon = resourceService.GetIcon(&quot;Icons.SharpDevelopIcon&quot;);
-			
-			windowChangeEventHandler = new EventHandler(OnActiveWindowChanged);
-			
-			StartPosition = FormStartPosition.Manual;
-						
-			AllowDrop      = true;
-#endif
 		}
 		
 		public void InitializeWorkspace()
@@ -544,7 +531,6 @@
 			}
 		}
 
-#if GTK
 		private Gtk.Toolbar[] toolbars = null;
 		public Gtk.Toolbar[] ToolBars {
 			get {
@@ -554,12 +540,6 @@
 				toolbars = value;
 			}
 		}
-#else
-		//Commandbar crap
-		public CommandBarManager commandBarManager = new CommandBarManager();
-		public CommandBar   TopMenu  = null;
-		public CommandBar[] ToolBars = null;
-#endif
 		
 		public IPadContent GetPad(Type type)
 		{
@@ -577,14 +557,15 @@
 			foreach (object item in items) {
 				TopMenu.Append ((Gtk.Widget)item);
 			}
+			UpdateMenu (null, null);
 		}
 		
 		public void UpdateMenu(object sender, EventArgs e)
 		{
 			// update menu
 			foreach (object o in TopMenu.Children) {
-				if (o is IStatusUpdate) {
-					((IStatusUpdate)o).UpdateStatus();
+				if (o is SdMenu) {
+					((SdMenu)o).OnDropDown(null, null);
 				}
 			}
 			


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000118.html">[Monodevelop-patches-list] r509 - trunk/MonoDevelop/src/Main/Base/Gui/Dialogs
</A></li>
	<LI>Next message: <A HREF="000120.html">[Monodevelop-patches-list] r511 - trunk/MonoDevelop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#119">[ date ]</a>
              <a href="thread.html#119">[ thread ]</a>
              <a href="subject.html#119">[ subject ]</a>
              <a href="author.html#119">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
