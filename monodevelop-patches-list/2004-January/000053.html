<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r449 - in trunk/MonoDevelop: . src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels src/Main/Base/Commands src/Main/Base/Commands/ProjectBrowserCommands src/Main/Base/Gui/Dialogs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r449%20-%20in%20trunk/MonoDevelop%3A%20.%20src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels%20src/Main/Base/Commands%20src/Main/Base/Commands/ProjectBrowserCommands%20src/Main/Base/Gui/Dialogs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000052.html">
   <LINK REL="Next"  HREF="000054.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r449 - in trunk/MonoDevelop: . src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels src/Main/Base/Commands src/Main/Base/Commands/ProjectBrowserCommands src/Main/Base/Gui/Dialogs</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r449%20-%20in%20trunk/MonoDevelop%3A%20.%20src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels%20src/Main/Base/Commands%20src/Main/Base/Commands/ProjectBrowserCommands%20src/Main/Base/Gui/Dialogs&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r449 - in trunk/MonoDevelop: . src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels src/Main/Base/Commands src/Main/Base/Commands/ProjectBrowserCommands src/Main/Base/Gui/Dialogs">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Sun Jan 11 17:20:26 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000052.html">[Monodevelop-patches-list] r448 - in trunk/MonoDevelop: . src/AddIns/DisplayBindings/TextEditor/Gui/Editor
</A></li>
        <LI>Next message: <A HREF="000054.html">[Monodevelop-patches-list] r450 - in trunk/MonoDevelop: . src/Main/Base/Services/MenuService
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53">[ date ]</a>
              <a href="thread.html#53">[ thread ]</a>
              <a href="subject.html#53">[ subject ]</a>
              <a href="author.html#53">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-01-11 17:20:26 -0500 (Sun, 11 Jan 2004)
New Revision: 449

Modified:
   trunk/MonoDevelop/RELEASE_REQUIREMENTS
   trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels/BehaviorTextEditorPanel.cs
   trunk/MonoDevelop/src/Main/Base/Commands/FileCommands.cs
   trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/CombineNodeCommands.cs
   trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/FolderNodeCommands.cs
   trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/NewFileDialog.cs
   trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/NewProjectDialog.cs
Log:
some project browser context menu implementations

updating release requirements

jba's new OptionPanel


Modified: trunk/MonoDevelop/RELEASE_REQUIREMENTS
===================================================================
--- trunk/MonoDevelop/RELEASE_REQUIREMENTS	2004-01-11 21:00:42 UTC (rev 448)
+++ trunk/MonoDevelop/RELEASE_REQUIREMENTS	2004-01-11 22:20:26 UTC (rev 449)
@@ -12,3 +12,4 @@
   around)
 ~ Fix HtmlControl cause its busted
 ~ Why the hell is new file showing up as Ctrl+O?!?
+~ Context menu items inside a submenu require a right click to activate, why?

Modified: trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels/BehaviorTextEditorPanel.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels/BehaviorTextEditorPanel.cs	2004-01-11 21:00:42 UTC (rev 448)
+++ trunk/MonoDevelop/src/AddIns/DisplayBindings/TextEditor/Gui/OptionPanels/BehaviorTextEditorPanel.cs	2004-01-11 22:20:26 UTC (rev 449)
@@ -1,86 +1,174 @@
-// &lt;file&gt;
-//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
-//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
-//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
-//     &lt;version value=&quot;$version&quot;/&gt;
-// &lt;/file&gt;
-
-using System;
-using System.IO;
-using System.Collections;
-
-using ICSharpCode.SharpDevelop.Internal.ExternalTool;
-using ICSharpCode.SharpDevelop.Internal.Templates;
-using ICSharpCode.Core.Properties;
-using ICSharpCode.Core.AddIns.Codons;
-
-using ICSharpCode.Core.Services;
-
-using ICSharpCode.TextEditor;
-using ICSharpCode.TextEditor.Document;
-using ICSharpCode.SharpDevelop.Gui.Dialogs;
-
-namespace ICSharpCode.SharpDevelop.DefaultEditor.Gui.OptionPanels
-{
-	/// &lt;summary&gt;
-	/// Summary description for Form8.
-	/// &lt;/summary&gt;
-	public class BehaviorTextEditorPanel : AbstractOptionPanel
-	{/*
-		public override void LoadPanelContents()
-		{
-			SetupFromXml(Path.Combine(PropertyService.DataDirectory, 
-			                          @&quot;resources\panels\BehaviorTextEditorPanel.xfrm&quot;));
-			
-			((CheckBox)ControlDictionary[&quot;autoinsertCurlyBraceCheckBox&quot;]).Checked = ((IProperties)CustomizationObject).GetProperty(&quot;AutoInsertCurlyBracket&quot;, true);
-			((CheckBox)ControlDictionary[&quot;hideMouseCursorCheckBox&quot;]).Checked      = ((IProperties)CustomizationObject).GetProperty(&quot;HideMouseCursor&quot;, true);
-			((CheckBox)ControlDictionary[&quot;caretBehindEOLCheckBox&quot;]).Checked       = ((IProperties)CustomizationObject).GetProperty(&quot;CursorBehindEOL&quot;, false);
-			((CheckBox)ControlDictionary[&quot;auotInsertTemplatesCheckBox&quot;]).Checked  = ((IProperties)CustomizationObject).GetProperty(&quot;AutoInsertTemplates&quot;, true);
-			
-			((CheckBox)ControlDictionary[&quot;convertTabsToSpacesCheckBox&quot;]).Checked  = ((IProperties)CustomizationObject).GetProperty(&quot;TabsToSpaces&quot;, false);
-			
-			ControlDictionary[&quot;tabSizeTextBox&quot;].Text    = ((IProperties)CustomizationObject).GetProperty(&quot;TabIndent&quot;, 4).ToString();
-			ControlDictionary[&quot;indentSizeTextBox&quot;].Text = ((IProperties)CustomizationObject).GetProperty(&quot;IndentationSize&quot;, 4).ToString();
-			
-			((ComboBox)ControlDictionary[&quot;indentStyleComboBox&quot;]).Items.Add(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.IndentStyle.None}&quot;));
-			((ComboBox)ControlDictionary[&quot;indentStyleComboBox&quot;]).Items.Add(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.IndentStyle.Automatic}&quot;));
-			((ComboBox)ControlDictionary[&quot;indentStyleComboBox&quot;]).Items.Add(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.IndentStyle.Smart}&quot;));
-			
-			((ComboBox)ControlDictionary[&quot;indentStyleComboBox&quot;]).SelectedIndex = (int)(IndentStyle)((IProperties)CustomizationObject).GetProperty(&quot;IndentStyle&quot;, IndentStyle.Smart);
-		
-			((ComboBox)ControlDictionary[&quot;mouseWhellDirectionComboBox&quot;]).Items.Add(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.NormalMouseDirectionRadioButton}&quot;));
-			((ComboBox)ControlDictionary[&quot;mouseWhellDirectionComboBox&quot;]).Items.Add(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.ReverseMouseDirectionRadioButton}&quot;));
-			((ComboBox)ControlDictionary[&quot;mouseWhellDirectionComboBox&quot;]).SelectedIndex = ((IProperties)CustomizationObject).GetProperty(&quot;MouseWheelScrollDown&quot;, true) ? 0 : 1;
-		}
-		
-		public override bool StorePanelContents()
-		{
-			((IProperties)CustomizationObject).SetProperty(&quot;TabsToSpaces&quot;,         ((CheckBox)ControlDictionary[&quot;convertTabsToSpacesCheckBox&quot;]).Checked);
-			((IProperties)CustomizationObject).SetProperty(&quot;MouseWheelScrollDown&quot;, ((ComboBox)ControlDictionary[&quot;mouseWhellDirectionComboBox&quot;]).SelectedIndex == 0);
-			
-			((IProperties)CustomizationObject).SetProperty(&quot;AutoInsertCurlyBracket&quot;, ((CheckBox)ControlDictionary[&quot;autoinsertCurlyBraceCheckBox&quot;]).Checked);
-			((IProperties)CustomizationObject).SetProperty(&quot;HideMouseCursor&quot;,        ((CheckBox)ControlDictionary[&quot;hideMouseCursorCheckBox&quot;]).Checked);
-			((IProperties)CustomizationObject).SetProperty(&quot;CursorBehindEOL&quot;,        ((CheckBox)ControlDictionary[&quot;caretBehindEOLCheckBox&quot;]).Checked);
-			((IProperties)CustomizationObject).SetProperty(&quot;AutoInsertTemplates&quot;,    ((CheckBox)ControlDictionary[&quot;auotInsertTemplatesCheckBox&quot;]).Checked);
-			
-			((IProperties)CustomizationObject).SetProperty(&quot;IndentStyle&quot;, ((ComboBox)ControlDictionary[&quot;indentStyleComboBox&quot;]).SelectedIndex);
-			
-			try {
-				int tabSize = Int32.Parse(ControlDictionary[&quot;tabSizeTextBox&quot;].Text);
-				
-				// FIX: don't allow to set tab size to zero as this will cause divide by zero exceptions in the text control.
-				// Zero isn't a setting that makes sense, anyway.
-				if (tabSize &gt; 0) {
-					((IProperties)CustomizationObject).SetProperty(&quot;TabIndent&quot;, tabSize);
-				}
-			} catch (Exception) {
-			}
-			
-			try {
-				((IProperties)CustomizationObject).SetProperty(&quot;IndentationSize&quot;, Int32.Parse(ControlDictionary[&quot;indentSizeTextBox&quot;].Text));
-			} catch (Exception) {
-			}
-			return true;
-		}*/
-	}
-}
+// &lt;file&gt;
+//     &lt;copyright see=&quot;<A HREF="prj:///doc/copyright.txt&quot;/">prj:///doc/copyright.txt&quot;/</A>&gt;
+//     &lt;license see=&quot;<A HREF="prj:///doc/license.txt&quot;/">prj:///doc/license.txt&quot;/</A>&gt;
+//     &lt;owner name=&quot;Mike Kr&#252;ger&quot; email=&quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">mike at icsharpcode.net</A>&quot;/&gt;
+//     &lt;version value=&quot;$version&quot;/&gt;
+// &lt;/file&gt;
+
+using System;
+using System.IO;
+using System.Collections;
+
+using ICSharpCode.SharpDevelop.Internal.ExternalTool;
+using ICSharpCode.SharpDevelop.Internal.Templates;
+using ICSharpCode.Core.Properties;
+using ICSharpCode.Core.AddIns.Codons;
+
+using ICSharpCode.Core.Services;
+
+using ICSharpCode.TextEditor;
+using ICSharpCode.TextEditor.Document;
+using ICSharpCode.SharpDevelop.Gui.Dialogs;
+
+using Gtk;
+
+namespace ICSharpCode.SharpDevelop.DefaultEditor.Gui.OptionPanels
+{
+	/// &lt;summary&gt;
+	/// Summary description for Form8.
+	/// &lt;/summary&gt;
+	public class BehaviorTextEditorPanel : AbstractOptionPanel
+	{
+		// GTK controls
+		CheckButton		autoinsertCurlyBraceCheckBox;
+		CheckButton		hideMouseCursorCheckBox;
+		CheckButton		caretBehindEOLCheckBox;
+		CheckButton		auotInsertTemplatesCheckBox;
+		CheckButton		convertTabsToSpacesCheckBox;
+		Entry			tabSizeTextBox;
+		Entry			indentSizeTextBox;
+		Gtk.Menu		indentStyleComboBoxMenu;
+		Gtk.OptionMenu	indentStyleComboBox;
+		Gtk.Menu		mouseWhellDirectionComboBoxMenu;
+		Gtk.OptionMenu	mouseWhellDirectionComboBox;
+		
+		// Services
+		StringParserService StringParserService = (StringParserService)ServiceManager.Services.GetService (typeof (StringParserService));
+		
+		public override void LoadPanelContents()
+		{
+			// set up the form controls instance
+			SetupPanelInstance();			
+			
+			autoinsertCurlyBraceCheckBox.Active = ((IProperties)CustomizationObject).GetProperty(&quot;AutoInsertCurlyBracket&quot;, true);
+			hideMouseCursorCheckBox.Active      = ((IProperties)CustomizationObject).GetProperty(&quot;HideMouseCursor&quot;, true);
+			caretBehindEOLCheckBox.Active       = ((IProperties)CustomizationObject).GetProperty(&quot;CursorBehindEOL&quot;, false);
+			auotInsertTemplatesCheckBox.Active  = ((IProperties)CustomizationObject).GetProperty(&quot;AutoInsertTemplates&quot;, true);
+			
+			convertTabsToSpacesCheckBox.Active  = ((IProperties)CustomizationObject).GetProperty(&quot;TabsToSpaces&quot;, false);
+			
+			tabSizeTextBox.Text    = ((IProperties)CustomizationObject).GetProperty(&quot;TabIndent&quot;, 4).ToString();
+			indentSizeTextBox.Text = ((IProperties)CustomizationObject).GetProperty(&quot;IndentationSize&quot;, 4).ToString();
+			
+			indentStyleComboBoxMenu.Append(MenuItem.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.IndentStyle.None}&quot;)));
+			indentStyleComboBoxMenu.Append(MenuItem.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.IndentStyle.Automatic}&quot;)));
+			indentStyleComboBoxMenu.Append(MenuItem.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.IndentStyle.Smart}&quot;)));
+			
+			indentStyleComboBox.SetHistory((uint)(IndentStyle)((IProperties)CustomizationObject).GetProperty(&quot;IndentStyle&quot;, IndentStyle.Smart));
+		
+			mouseWhellDirectionComboBoxMenu.Append(MenuItem.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.NormalMouseDirectionRadioButton}&quot;)));
+			mouseWhellDirectionComboBoxMenu.Append(MenuItem.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.ReverseMouseDirectionRadioButton}&quot;)));
+			int selectedIndex = ((IProperties)CustomizationObject).GetProperty(&quot;MouseWheelScrollDown&quot;, true) ? 0 : 1;
+			mouseWhellDirectionComboBox.SetHistory((uint)selectedIndex);
+		}
+		
+		public override bool StorePanelContents()
+		{
+			((IProperties)CustomizationObject).SetProperty(&quot;TabsToSpaces&quot;,         convertTabsToSpacesCheckBox.Active);
+			((IProperties)CustomizationObject).SetProperty(&quot;MouseWheelScrollDown&quot;, mouseWhellDirectionComboBox.History == 0);
+			
+			((IProperties)CustomizationObject).SetProperty(&quot;AutoInsertCurlyBracket&quot;, autoinsertCurlyBraceCheckBox.Active);
+			((IProperties)CustomizationObject).SetProperty(&quot;HideMouseCursor&quot;,        hideMouseCursorCheckBox.Active);
+			((IProperties)CustomizationObject).SetProperty(&quot;CursorBehindEOL&quot;,        caretBehindEOLCheckBox.Active);
+			((IProperties)CustomizationObject).SetProperty(&quot;AutoInsertTemplates&quot;,    auotInsertTemplatesCheckBox.Active);
+			
+			((IProperties)CustomizationObject).SetProperty(&quot;IndentStyle&quot;, indentStyleComboBox.History);
+			
+			try {
+				int tabSize = Int32.Parse(tabSizeTextBox.Text);
+				
+				// FIX: don't allow to set tab size to zero as this will cause divide by zero exceptions in the text control.
+				// Zero isn't a setting that makes sense, anyway.
+				if (tabSize &gt; 0) {
+					((IProperties)CustomizationObject).SetProperty(&quot;TabIndent&quot;, tabSize);
+				}
+			} catch (Exception) {
+			}
+			
+			try {
+				((IProperties)CustomizationObject).SetProperty(&quot;IndentationSize&quot;, Int32.Parse(indentSizeTextBox.Text));
+			} catch (Exception) {
+			}
+			return true;
+		}
+		
+		#region jba added methods
+		
+		private void SetupPanelInstance()
+		{
+			Gtk.Frame frame1 = new Gtk.Frame(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.TabsGroupBox}&quot;));
+			//
+			// set up the Tab
+			//
+			// instantiate all the controls
+			Gtk.VBox vBox1 = new Gtk.VBox(false,2);
+			Gtk.Label label1 = new Gtk.Label(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.TabSizeLabel}&quot;));
+			Gtk.Label label2 = new Gtk.Label(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.IndentSizeLabel}&quot;));
+			Gtk.Label label3 = new Gtk.Label(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.IndentLabel}&quot;));
+			tabSizeTextBox = new Entry();
+			indentSizeTextBox = new Entry();
+			indentStyleComboBoxMenu = new Menu();
+			indentStyleComboBox = new OptionMenu();
+			indentStyleComboBox.Menu = indentStyleComboBoxMenu;
+			convertTabsToSpacesCheckBox = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.ConvertTabsToSpacesCheckBox}&quot;));
+				// table to pack the tab settings options 
+				Table table1 = new Table(4, 2, false);
+				//pack the table
+				table1.Attach(label1, 0, 1, 0, 1);
+				table1.Attach(tabSizeTextBox, 1, 2, 0, 1);
+				table1.Attach(label2, 0, 1, 1, 2);
+				table1.Attach(indentSizeTextBox, 1, 2, 1, 2);
+				table1.Attach(label3, 2, 4, 0, 1);
+				table1.Attach(indentStyleComboBox, 2, 4, 1, 2);
+				
+			// pack them all
+			vBox1.PackStart(table1, false, false, 2);
+			vBox1.PackStart(convertTabsToSpacesCheckBox, false, false, 2);
+			frame1.Add(vBox1);
+			
+			//
+			// setup the behaviour options
+			//
+			//instantiate all the controls			
+			Gtk.Frame frame2 = new Gtk.Frame(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.BehaviourGroupBox}&quot;));
+			Gtk.VBox vBox2 = new Gtk.VBox(false, 2);
+			
+			
+			autoinsertCurlyBraceCheckBox = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.CurlyBracketCheckBox}&quot;));
+			hideMouseCursorCheckBox  = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.HideMouseCheckBox}&quot;));
+			caretBehindEOLCheckBox  = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.BehindEOLCheckBox}&quot;));
+			auotInsertTemplatesCheckBox  = CheckButton.NewWithLabel(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.TemplateInsertCheckBox}&quot;));			
+			Label label4 = new Gtk.Label(StringParserService.Parse(&quot;${res:Dialog.Options.IDEOptions.TextEditor.Behaviour.MouseWhellGroupBox}&quot;));
+			mouseWhellDirectionComboBoxMenu = new Menu();
+			mouseWhellDirectionComboBox = new OptionMenu();
+			mouseWhellDirectionComboBox.Menu = mouseWhellDirectionComboBoxMenu;
+			// pack them all
+			vBox2.PackStart(caretBehindEOLCheckBox, false, false, 2);
+			vBox2.PackStart(auotInsertTemplatesCheckBox, false, false, 2);
+			vBox2.PackStart(autoinsertCurlyBraceCheckBox, false, false, 2);
+			vBox2.PackStart(hideMouseCursorCheckBox, false, false, 2);
+			vBox2.PackStart(label4, false, false, 2);
+			vBox2.PackStart(mouseWhellDirectionComboBox, false, false, 2);
+			frame2.Add(vBox2);
+			
+			// create the main box
+			Gtk.VBox mainBox = new Gtk.VBox(false, 2);
+			mainBox.PackStart(frame1, false, false, 2);
+			mainBox.PackStart(frame2, false, false, 2);
+			
+			this.Add(mainBox);
+		}
+		
+		#endregion
+	}
+}

Modified: trunk/MonoDevelop/src/Main/Base/Commands/FileCommands.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Commands/FileCommands.cs	2004-01-11 21:00:42 UTC (rev 448)
+++ trunk/MonoDevelop/src/Main/Base/Commands/FileCommands.cs	2004-01-11 22:20:26 UTC (rev 449)
@@ -40,7 +40,7 @@
 			IProjectService projectService = (IProjectService)ICSharpCode.Core.Services.ServiceManager.Services.GetService(typeof(IProjectService));
 			
 			NewProjectDialog npdlg = new NewProjectDialog(true);
-			npdlg.ShowAll ();
+			npdlg.Run ();
 		}
 	}
 	

Modified: trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/CombineNodeCommands.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/CombineNodeCommands.cs	2004-01-11 21:00:42 UTC (rev 448)
+++ trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/CombineNodeCommands.cs	2004-01-11 22:20:26 UTC (rev 449)
@@ -34,16 +34,17 @@
 	{
 		public override void Run()
 		{
+			Console.WriteLine (&quot;A&quot;);
 			IProjectService projectService = (IProjectService)ICSharpCode.Core.Services.ServiceManager.Services.GetService(typeof(IProjectService));
 			ProjectBrowserView browser = (ProjectBrowserView)Owner;
 			CombineBrowserNode node    = browser.SelectedNode as CombineBrowserNode;
 			
 			if (node != null) {
-		//		NewProjectDialog npdlg = new NewProjectDialog(false);
-		//		if (npdlg.ShowDialog() == DialogResult.OK) {
-		//			node.Nodes.Add(ProjectBrowserView.BuildProjectTreeNode((IProject)node.Combine.AddEntry(npdlg.NewProjectLocation)));
-		//			projectService.SaveCombine();
-		//		}
+				NewProjectDialog npdlg = new NewProjectDialog(false);
+				if (npdlg.Run() == (int)Gtk.ResponseType.Ok) {
+					node.Nodes.Add(ProjectBrowserView.BuildProjectTreeNode((IProject)node.Combine.AddEntry(npdlg.NewProjectLocation)));
+					projectService.SaveCombine();
+				}
 			}
 		}
 	}
@@ -52,16 +53,17 @@
 	{
 		public override void Run()
 		{
+			Console.WriteLine (&quot;A&quot;);
 			IProjectService projectService = (IProjectService)ICSharpCode.Core.Services.ServiceManager.Services.GetService(typeof(IProjectService));
 			ProjectBrowserView browser = (ProjectBrowserView)Owner;
 			CombineBrowserNode node    = browser.SelectedNode as CombineBrowserNode;
 			
 			if (node != null) {
-			//	NewProjectDialog npdlg = new NewProjectDialog(false);
-			//	if (npdlg.ShowDialog() == DialogResult.OK) {
-			//		node.Nodes.Add(ProjectBrowserView.BuildCombineTreeNode((Combine)node.Combine.AddEntry(npdlg.NewCombineLocation)));
-			//		projectService.SaveCombine();
-			//	}
+				NewProjectDialog npdlg = new NewProjectDialog(false);
+				if (npdlg.Run() == (int)Gtk.ResponseType.Ok) {
+					node.Nodes.Add(ProjectBrowserView.BuildCombineTreeNode((Combine)node.Combine.AddEntry(npdlg.NewCombineLocation)));
+					projectService.SaveCombine();
+				}
 			}
 		}
 	}
@@ -70,6 +72,7 @@
 	{
 		public override void Run()
 		{
+			Console.WriteLine (&quot;A&quot;);
 			IProjectService projectService = (IProjectService)ICSharpCode.Core.Services.ServiceManager.Services.GetService(typeof(IProjectService));
 			ProjectBrowserView browser = (ProjectBrowserView)Owner;
 			CombineBrowserNode node    = browser.SelectedNode as CombineBrowserNode;
@@ -99,6 +102,7 @@
 	{
 		public override void Run()
 		{
+			Console.WriteLine (&quot;A&quot;);
 			IProjectService projectService = (IProjectService)ICSharpCode.Core.Services.ServiceManager.Services.GetService(typeof(IProjectService));
 			ProjectBrowserView browser = (ProjectBrowserView)Owner;
 			CombineBrowserNode node    = browser.SelectedNode as CombineBrowserNode;
@@ -128,6 +132,7 @@
 	{
 		public override void Run()
 		{
+			Console.WriteLine (&quot;A&quot;);
 			IProjectService projectService = (IProjectService)ICSharpCode.Core.Services.ServiceManager.Services.GetService(typeof(IProjectService));
 			ProjectBrowserView browser = (ProjectBrowserView)Owner;
 			CombineBrowserNode node    = browser.SelectedNode as CombineBrowserNode;

Modified: trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/FolderNodeCommands.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/FolderNodeCommands.cs	2004-01-11 21:00:42 UTC (rev 448)
+++ trunk/MonoDevelop/src/Main/Base/Commands/ProjectBrowserCommands/FolderNodeCommands.cs	2004-01-11 22:20:26 UTC (rev 449)
@@ -109,8 +109,8 @@
 				return;
 			}
 			
-			/*using (NewFileDialog nfd = new NewFileDialog()) {
-				if (nfd.ShowDialog() == DialogResult.OK) {
+			using (NewFileDialog nfd = new NewFileDialog()) {
+				if (nfd.Run() == (int)Gtk.ResponseType.Ok) {
 					IWorkbenchWindow window = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
 					
 					int count = 1;
@@ -154,7 +154,7 @@
 					IProjectService projectService = (IProjectService)ICSharpCode.Core.Services.ServiceManager.Services.GetService(typeof(IProjectService));
 					projectService.SaveCombine();
 				}
-			}*/
+			}
 		}
 	}
 	

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/NewFileDialog.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/NewFileDialog.cs	2004-01-11 21:00:42 UTC (rev 448)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/NewFileDialog.cs	2004-01-11 22:20:26 UTC (rev 449)
@@ -68,6 +68,7 @@
 			} catch (Exception e) {
 				Console.WriteLine(e.ToString());
 			}
+			ShowAll ();
 		}
 		
 		void InitializeView()
@@ -386,8 +387,8 @@
 			TemplateView.PopulateTable();
 			viewbox.PackStart(TemplateView, true, true,0);
 
-			this.ActionArea.Add (cancelButton);
-			this.ActionArea.Add (okButton);
+			this.AddActionWidget (cancelButton, (int)Gtk.ResponseType.Cancel);
+			this.AddActionWidget (okButton, (int)Gtk.ResponseType.Ok);
 
 			this.VBox.PackStart (viewbox);
 			this.VBox.PackStart (infoLabelFrame, false, false, 6);

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/NewProjectDialog.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/NewProjectDialog.cs	2004-01-11 21:00:42 UTC (rev 448)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Dialogs/NewProjectDialog.cs	2004-01-11 22:20:26 UTC (rev 449)
@@ -76,6 +76,7 @@
 			//((TreeView)ControlDictionary[&quot;categoryTreeView&quot;]).Select();
 			pathEntry.Text = propertyService.GetProperty(&quot;ICSharpCode.SharpDevelop.Gui.Dialogs.NewProjectDialog.DefaultPath&quot;, fileUtilityService.GetDirectoryNameWithSeparator(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal)) + &quot;MonoDevelopProjects&quot;).ToString();
 			//Icon = null;
+			ShowAll ();
 		}
 		
 		void InitializeView()
@@ -426,8 +427,8 @@
 			TemplateView.PopulateTable();
 			viewbox.PackStart(TemplateView, true, true,0);
 
-			this.ActionArea.PackStart (cancelButton);
-			this.ActionArea.PackStart (okButton);
+			this.AddActionWidget (cancelButton, (int)Gtk.ResponseType.Cancel);
+			this.AddActionWidget (okButton, (int)Gtk.ResponseType.Ok);
 
 			Table entryTable = new Table (3, 3, false);
 			entryTable.RowSpacing = 6;			


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000052.html">[Monodevelop-patches-list] r448 - in trunk/MonoDevelop: . src/AddIns/DisplayBindings/TextEditor/Gui/Editor
</A></li>
	<LI>Next message: <A HREF="000054.html">[Monodevelop-patches-list] r450 - in trunk/MonoDevelop: . src/Main/Base/Services/MenuService
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53">[ date ]</a>
              <a href="thread.html#53">[ thread ]</a>
              <a href="subject.html#53">[ subject ]</a>
              <a href="author.html#53">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
