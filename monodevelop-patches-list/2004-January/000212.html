<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r606 - in trunk/MonoDevelop: build/AddIns src/Main/Base/Internal/Codons/MenuItems src/Main/Base/Services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r606%20-%20in%20trunk/MonoDevelop%3A%20build/AddIns%20src/Main/Base/Internal/Codons/MenuItems%20src/Main/Base/Services&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000211.html">
   <LINK REL="Next"  HREF="000213.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r606 - in trunk/MonoDevelop: build/AddIns src/Main/Base/Internal/Codons/MenuItems src/Main/Base/Services</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r606%20-%20in%20trunk/MonoDevelop%3A%20build/AddIns%20src/Main/Base/Internal/Codons/MenuItems%20src/Main/Base/Services&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r606 - in trunk/MonoDevelop: build/AddIns src/Main/Base/Internal/Codons/MenuItems src/Main/Base/Services">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Tue Jan 20 21:24:40 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000211.html">[Monodevelop-patches-list] r605 - in trunk/MonoDevelop: data/resources/glade src/Main/Base/Gui/CompletionDatabaseWizard src/Main/Base/Gui/Dialogs
</A></li>
        <LI>Next message: <A HREF="000213.html">[Monodevelop-patches-list] r607 - in trunk/MonoDevelop: build/AddIns src/Main/Base/Services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#212">[ date ]</a>
              <a href="thread.html#212">[ thread ]</a>
              <a href="subject.html#212">[ subject ]</a>
              <a href="author.html#212">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-01-20 21:24:39 -0500 (Tue, 20 Jan 2004)
New Revision: 606

Modified:
   trunk/MonoDevelop/build/AddIns/SharpDevelopCore.addin
   trunk/MonoDevelop/src/Main/Base/Internal/Codons/MenuItems/MenuItemCodon.cs
   trunk/MonoDevelop/src/Main/Base/Services/ResourceService.cs
Log:
lil bit of stockification


Modified: trunk/MonoDevelop/build/AddIns/SharpDevelopCore.addin
===================================================================
--- trunk/MonoDevelop/build/AddIns/SharpDevelopCore.addin	2004-01-21 00:31:07 UTC (rev 605)
+++ trunk/MonoDevelop/build/AddIns/SharpDevelopCore.addin	2004-01-21 02:24:39 UTC (rev 606)
@@ -358,7 +358,8 @@
 		&lt;/Conditional&gt;
                 &lt;MenuItem id = &quot;SaveAs&quot;
 	                  label = &quot;${res:OpenFileTabEventHandler.ContextMenu.SaveAs}&quot; 
-	                  class = &quot;ICSharpCode.SharpDevelop.Commands.TabStrip.SaveFileAsTab&quot;/&gt;
+	                  icon  = &quot;Icons.16x16.SaveAsIcon&quot;
+			  class = &quot;ICSharpCode.SharpDevelop.Commands.TabStrip.SaveFileAsTab&quot;/&gt;
 
 		&lt;MenuItem id = &quot;SaveSeparator&quot; label = &quot;-&quot; /&gt;
                 &lt;Conditional action=&quot;Disable&quot;&gt;
@@ -584,7 +585,8 @@
 		                          shortcut = &quot;Control|S&quot;
 		                          class = &quot;ICSharpCode.SharpDevelop.Commands.SaveFile&quot;/&gt;
 		                &lt;MenuItem id = &quot;SaveAs&quot;
-		                          label = &quot;${res:XML.MainMenu.FileMenu.SaveAs}&quot; 
+		                          label = &quot;${res:XML.MainMenu.FileMenu.SaveAs}&quot;
+					  icon = &quot;Icons.16x16.SaveAsIcon&quot;
 		                          description = &quot;${res:XML.MainMenu.FileMenu.SaveAs.Description}&quot;
 		                          class = &quot;ICSharpCode.SharpDevelop.Commands.SaveFileAs&quot;/&gt;
 		                &lt;MenuItem id = &quot;SaveAll&quot;

Modified: trunk/MonoDevelop/src/Main/Base/Internal/Codons/MenuItems/MenuItemCodon.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Internal/Codons/MenuItems/MenuItemCodon.cs	2004-01-21 00:31:07 UTC (rev 605)
+++ trunk/MonoDevelop/src/Main/Base/Internal/Codons/MenuItems/MenuItemCodon.cs	2004-01-21 02:24:39 UTC (rev 606)
@@ -138,7 +138,7 @@
 			
 			if (Icon != null &amp;&amp; newItem is SdMenuCommand) {
 				ResourceService resourceService = (ResourceService)ServiceManager.Services.GetService(typeof(IResourceService));
-				((SdMenuCommand)newItem).Image = new Gtk.Image(resourceService.GetBitmap(Icon));
+				((SdMenuCommand)newItem).Image = resourceService.GetImage(Icon, Gtk.IconSize.Menu);
 			}
 			
 			if (newItem is SdMenuCommand) {

Modified: trunk/MonoDevelop/src/Main/Base/Services/ResourceService.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Services/ResourceService.cs	2004-01-21 00:31:07 UTC (rev 605)
+++ trunk/MonoDevelop/src/Main/Base/Services/ResourceService.cs	2004-01-21 02:24:39 UTC (rev 606)
@@ -46,6 +46,7 @@
 		{
 			PropertyService propertyService = (PropertyService)ServiceManager.Services.GetService(typeof(PropertyService));
 			resourceDirctory = propertyService.DataDirectory + Path.DirectorySeparatorChar + &quot;resources&quot;;
+			CreateStockMapping ();
 		}
 		
 		Hashtable userStrings = null;
@@ -56,7 +57,21 @@
 		
 		Hashtable localStrings = null;
 		Hashtable localIcons   = null;
-		
+
+		static Hashtable stockMappings = null;
+
+		static void CreateStockMapping ()
+		{
+			stockMappings = new Hashtable ();
+			stockMappings[&quot;Icons.16x16.DeleteIcon&quot;] = Gtk.Stock.Delete;
+			stockMappings[&quot;Icons.16x16.OpenFile&quot;] = Gtk.Stock.Open;
+			stockMappings[&quot;Icons.16x16.SaveIcon&quot;] = Gtk.Stock.Save;
+			stockMappings[&quot;Icons.16x16.SaveAsIcon&quot;] = Gtk.Stock.SaveAs;
+			stockMappings[&quot;Icons.16x16.PasteIcon&quot;] = Gtk.Stock.Paste;
+			stockMappings[&quot;Icons.16x16.CopyIcon&quot;] = Gtk.Stock.Copy;
+			stockMappings[&quot;Icons.16x16.CutIcon&quot;] = Gtk.Stock.Cut;
+		}
+
 		void ChangeProperty(object sender, PropertyEventArgs e)
 		{
 			if (e.Key == uiLanguageProperty &amp;&amp; e.OldValue != e.NewValue) {
@@ -261,8 +276,6 @@
 			}
 */			
 			Gdk.Pixbuf b = new Gdk.Pixbuf(&quot;../data/resources/icons/&quot; + name);
-			Debug.Assert(b != null, &quot;Resource &quot; + name);
-			
 			return b;
 			
 		}
@@ -291,9 +304,16 @@
 			Gdk.Pixbuf b = (Gdk.Pixbuf)icon.GetObject(name);
 			*/
 			Gdk.Pixbuf b = new Gdk.Pixbuf(&quot;../data/resources/icons/&quot; + name);
-			Debug.Assert(b != null, &quot;Resource &quot; + name);
 			
 			return b;
 		}
+
+		public Gtk.Image GetImage (string name, Gtk.IconSize size)
+		{
+			string stock = (string)stockMappings[name];
+			if (stock != null)
+				return new Gtk.Image (stock, size);
+			return new Gtk.Image (GetBitmap (name));
+		}
 	}
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000211.html">[Monodevelop-patches-list] r605 - in trunk/MonoDevelop: data/resources/glade src/Main/Base/Gui/CompletionDatabaseWizard src/Main/Base/Gui/Dialogs
</A></li>
	<LI>Next message: <A HREF="000213.html">[Monodevelop-patches-list] r607 - in trunk/MonoDevelop: build/AddIns src/Main/Base/Services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#212">[ date ]</a>
              <a href="thread.html#212">[ thread ]</a>
              <a href="subject.html#212">[ subject ]</a>
              <a href="author.html#212">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
