<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r2375 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Commands Commands/ClassBrowserCommands Commands/ProjectBrowserCommands Gui/Dialogs/CombineConfiguration Gui/Pads/ProjectPad Internal/CollectionUtilities Internal/Project/Combine
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2375%20-%20in%20trunk/MonoDevelop/Core/src/MonoDevelop.Base%3A%20.%20Commands%20Commands/ClassBrowserCommands%20Commands/ProjectBrowserCommands%20Gui/Dialogs/CombineConfiguration%20Gui/Pads/ProjectPad%20Internal/CollectionUtilities%20Internal/Project/Combine&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001976.html">
   <LINK REL="Next"  HREF="001978.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r2375 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Commands Commands/ClassBrowserCommands Commands/ProjectBrowserCommands Gui/Dialogs/CombineConfiguration Gui/Pads/ProjectPad Internal/CollectionUtilities Internal/Project/Combine</H1>
    <B>Lluis Sanchez &lt;lluis@ximian.com&gt;</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r2375%20-%20in%20trunk/MonoDevelop/Core/src/MonoDevelop.Base%3A%20.%20Commands%20Commands/ClassBrowserCommands%20Commands/ProjectBrowserCommands%20Gui/Dialogs/CombineConfiguration%20Gui/Pads/ProjectPad%20Internal/CollectionUtilities%20Internal/Project/Combine&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r2375 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Commands Commands/ClassBrowserCommands Commands/ProjectBrowserCommands Gui/Dialogs/CombineConfiguration Gui/Pads/ProjectPad Internal/CollectionUtilities Internal/Project/Combine">lluis at mono-cvs.ximian.com
       </A><BR>
    <I>Sat Mar 19 13:07:37 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001976.html">[Monodevelop-patches-list] r2374 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Commands Gui/Pads/SolutionPad
</A></li>
        <LI>Next message: <A HREF="001978.html">[Monodevelop-patches-list] r2376 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Gui/Pads/FileScout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1977">[ date ]</a>
              <a href="thread.html#1977">[ thread ]</a>
              <a href="subject.html#1977">[ subject ]</a>
              <a href="author.html#1977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lluis
Date: 2005-03-19 13:07:36 -0500 (Sat, 19 Mar 2005)
New Revision: 2375

Modified:
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ClassBrowserCommands/ClassBrowserCommands.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/MenuItemBuilders.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectBrowserCommands/ProjectNodeCommands.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectOptionsCommands.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Dialogs/CombineConfiguration/CombineStartupPanel.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Pads/ProjectPad/ProjectFileNodeBuilder.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/CollectionUtilities/Comparers.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/Combine.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/CombineConfiguration.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/CombineExecuteDefinition.cs
   trunk/MonoDevelop/Core/src/MonoDevelop.Base/Makefile.am
Log:
2005-03-19  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt;

	* Commands/MenuItemBuilders.cs: Fixed Include/Compile and Deploy options.
	* Commands/ProjectOptionsCommands.cs:
	* Commands/ClassBrowserCommands/ClassBrowserCommands.cs:
	* Internal/CollectionUtilities/Comparers.cs:
	Removed reference to old project pad.
	* Commands/ProjectBrowserCommands/ProjectNodeCommands.cs: 
	* Gui/Dialogs/CombineConfiguration/CombineStartupPanel.cs:
	Use new StartupEntry property instead of SingleStartProjectName.
	* Gui/Pads/ProjectPad/ProjectFileNodeBuilder.cs: Use the correct
	menu path.
	* Makefile.am: Removed old solution pads.
	* Internal/Project/Combine/Combine.cs: Added StartupEntry property
	which replaces SingleStartProjectName. Storing the name made project
	renaming complex to handle.
	* Internal/Project/Combine/CombineExecuteDefinition.cs:
	* Internal/Project/Combine/CombineConfiguration.cs: Serialize the
	real entry name, which may have changed.



Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/ChangeLog	2005-03-19 18:07:36 UTC (rev 2375)
@@ -1,3 +1,23 @@
+2005-03-19  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt;
+
+	* Commands/MenuItemBuilders.cs: Fixed Include/Compile and Deploy options.
+	* Commands/ProjectOptionsCommands.cs:
+	* Commands/ClassBrowserCommands/ClassBrowserCommands.cs:
+	* Internal/CollectionUtilities/Comparers.cs:
+	Removed reference to old project pad.
+	* Commands/ProjectBrowserCommands/ProjectNodeCommands.cs: 
+	* Gui/Dialogs/CombineConfiguration/CombineStartupPanel.cs:
+	Use new StartupEntry property instead of SingleStartProjectName.
+	* Gui/Pads/ProjectPad/ProjectFileNodeBuilder.cs: Use the correct
+	menu path.
+	* Makefile.am: Removed old solution pads.
+	* Internal/Project/Combine/Combine.cs: Added StartupEntry property
+	which replaces SingleStartProjectName. Storing the name made project
+	renaming complex to handle.
+	* Internal/Project/Combine/CombineExecuteDefinition.cs:
+	* Internal/Project/Combine/CombineConfiguration.cs: Serialize the
+	real entry name, which may have changed.
+
 2005-03-19  Lluis Sanchez Gual &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">lluis at novell.com</A>&gt;
 
 	* Commands/MenuItemBuilders.cs: Removed wrong check.

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ClassBrowserCommands/ClassBrowserCommands.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ClassBrowserCommands/ClassBrowserCommands.cs	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ClassBrowserCommands/ClassBrowserCommands.cs	2005-03-19 18:07:36 UTC (rev 2375)
@@ -33,7 +33,7 @@
 	{
 		public override void Run()
 		{
-			ClassScout browser = Owner as ClassScout;
+/*			ClassScout browser = Owner as ClassScout;
 			if (browser == null) {
 				return;
 			}
@@ -42,7 +42,7 @@
 			if (node != null) {
 				Runtime.MessageService.ShowWarning(GettextCatalog.GetString (&quot;Not implemented&quot;));
 			}
-		}
+*/		}
 	}
 
 }

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/MenuItemBuilders.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/MenuItemBuilders.cs	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/MenuItemBuilders.cs	2005-03-19 18:07:36 UTC (rev 2375)
@@ -22,7 +22,7 @@
 using MonoDevelop.Gui.Dialogs;
 using MonoDevelop.Internal.Project;
 using MonoDevelop.Internal.ExternalTool;
-using MonoDevelop.Gui.Pads.ProjectBrowser;
+using MonoDevelop.Gui.Pads;
 
 using Freedesktop.RecentFiles;
 
@@ -264,67 +264,51 @@
 	
 	public class IncludeFilesBuilder : ISubmenuBuilder
 	{
-		public ProjectBrowserView browser;
+		public SolutionPad browser;
 		
-		MyMenuItem includeInCompileItem;
-		MyMenuItem includeInDeployItem;
+		SdMenuCheckBox includeInCompileItem;
+		SdMenuCheckBox includeInDeployItem;
 		
 		class MyMenuItem : SdMenuCheckBox, ISubmenuItem
 		{
-			IncludeFilesBuilder builder;
-			
-			public MyMenuItem(IncludeFilesBuilder builder, string name, EventHandler handler) : base(null, null, name)
+			public MyMenuItem(string name) : base(null, null, name)
 			{
-				base.Toggled += handler;
-				this.builder = builder;
 			}
-			
-			public override void UpdateStatus()
-			{
-				base.UpdateStatus();
-				if (builder == null) {
-					return;
-				}
-				AbstractBrowserNode node = builder.browser.SelectedNode as AbstractBrowserNode;
-				
-				if (node == null) {
-					return;
-				}
-				
-				ProjectFile finfo = node.UserData as ProjectFile;
-				if (finfo == null) {
-					builder.includeInCompileItem.Sensitive = builder.includeInCompileItem.Sensitive = false;
-				} else {
-					if (!builder.includeInCompileItem.Sensitive) {
-						builder.includeInCompileItem.Sensitive = builder.includeInCompileItem.Sensitive = true;
-					}
-					builder.includeInCompileItem.Active = finfo.BuildAction == BuildAction.Compile;
-					builder.includeInDeployItem.Active  = !node.Project.DeployInformation.IsFileExcluded(finfo.Name);
-				}
-			}
 		}
 		
 		public Gtk.MenuItem[] BuildSubmenu(ConditionCollection conditionCollection, object owner)
 		{
-			browser = (ProjectBrowserView)owner;
-			includeInCompileItem = new MyMenuItem(this, GettextCatalog.GetString (&quot;Compile&quot;), new EventHandler(ChangeCompileInclude));
-			includeInDeployItem  = new MyMenuItem(this, GettextCatalog.GetString (&quot;Deploy&quot;), new EventHandler(ChangeDeployInclude));
+			Console.WriteLine (Environment.StackTrace);
+			browser = (SolutionPad) owner;
+			ITreeNavigator nav = browser.GetSelectedNode ();
+			if (nav == null) return new Gtk.MenuItem[0];
+
+			ProjectFile finfo = nav.DataItem as ProjectFile;
+			if (finfo == null) return new Gtk.MenuItem[0];
 			
+			Project project = (Project) nav.GetParentDataItem (typeof(Project), false);
+
+			includeInCompileItem = new MyMenuItem (GettextCatalog.GetString (&quot;Compile&quot;));
+			includeInDeployItem  = new MyMenuItem (GettextCatalog.GetString (&quot;Deploy&quot;));
+			
+			includeInCompileItem.Active = finfo.BuildAction == BuildAction.Compile;
+			includeInDeployItem.Active  = !project.DeployInformation.IsFileExcluded (finfo.Name);
+			
+			includeInCompileItem.Toggled += new EventHandler (ChangeCompileInclude);
+			includeInDeployItem.Toggled += new EventHandler (ChangeDeployInclude);
+			
 			return new Gtk.MenuItem[] {
 				includeInCompileItem,
 				includeInDeployItem
 			};
 			
 		}
-		void ChangeCompileInclude(object sender, EventArgs e)
+		void ChangeCompileInclude (object sender, EventArgs e)
 		{
-			AbstractBrowserNode node = browser.SelectedNode as AbstractBrowserNode;
+			ITreeNavigator nav = browser.GetSelectedNode ();
+			if (nav == null) return;
 			
-			if (node == null) {
-				return;
-			}
-			
-			ProjectFile finfo = node.UserData as ProjectFile;
+			ProjectFile finfo = nav.DataItem as ProjectFile;
 			if (finfo != null) {
 				if (finfo.BuildAction == BuildAction.Compile) {
 					finfo.BuildAction = BuildAction.Nothing;
@@ -337,18 +321,16 @@
 		
 		void ChangeDeployInclude(object sender, EventArgs e)
 		{
-			AbstractBrowserNode node = browser.SelectedNode as AbstractBrowserNode;
+			ITreeNavigator nav = browser.GetSelectedNode ();
+			if (nav == null) return;
 			
-			if (node == null) {
-				return;
-			}
-			
-			ProjectFile finfo = node.UserData as ProjectFile;
+			ProjectFile finfo = nav.DataItem as ProjectFile;
 			if (finfo != null) {
-				if (node.Project.DeployInformation.IsFileExcluded(finfo.Name)) {
-					node.Project.DeployInformation.RemoveExcludedFile(finfo.Name);
+				Project project = (Project) nav.GetParentDataItem (typeof(Project), false);
+				if (project.DeployInformation.IsFileExcluded (finfo.Name)) {
+					project.DeployInformation.RemoveExcludedFile (finfo.Name);
 				} else {
-					node.Project.DeployInformation.AddExcludedFile(finfo.Name);
+					project.DeployInformation.AddExcludedFile (finfo.Name);
 				}
 			}
 			Runtime.ProjectService.SaveCombine();

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectBrowserCommands/ProjectNodeCommands.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectBrowserCommands/ProjectNodeCommands.cs	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectBrowserCommands/ProjectNodeCommands.cs	2005-03-19 18:07:36 UTC (rev 2375)
@@ -38,7 +38,7 @@
 			if (project == null) return;
 			
 			Combine combine = nav.GetParentDataItem (typeof(Combine), false) as Combine;
-			combine.SingleStartProjectName = project.Name;
+			combine.StartupEntry = project;
 			combine.SingleStartupProject = true;
 			Runtime.ProjectService.SaveCombine ();
 		}

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectOptionsCommands.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectOptionsCommands.cs	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Commands/ProjectOptionsCommands.cs	2005-03-19 18:07:36 UTC (rev 2375)
@@ -23,7 +23,6 @@
 using MonoDevelop.Internal.Project;
 
 using MonoDevelop.Internal.ExternalTool;
-using MonoDevelop.Gui.Pads.ProjectBrowser;
 
 namespace MonoDevelop.Commands
 {

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Dialogs/CombineConfiguration/CombineStartupPanel.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Dialogs/CombineConfiguration/CombineStartupPanel.cs	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Dialogs/CombineConfiguration/CombineStartupPanel.cs	2005-03-19 18:07:36 UTC (rev 2375)
@@ -58,7 +58,7 @@
 					CombineEntry entry = (CombineEntry) combine.Entries[i];
 					tmpStore.AppendValues (entry.Name);
 
-					if (combine.SingleStartProjectName == entry.Name)
+					if (combine.StartupEntry == entry)
 						active = i;
 				}
 				singleCombo.Model = tmpStore;
@@ -226,7 +226,7 @@
 
 			public bool Store()
 			{
-				combine.SingleStartProjectName = ((CombineEntry)combine.Entries[singleCombo.Active]).Name;
+				combine.StartupEntry = (CombineEntry) combine.Entries [singleCombo.Active];
 				combine.SingleStartupProject   = singleRadioButton.Active;
 				
 				// write back new combine execute definitions

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Pads/ProjectPad/ProjectFileNodeBuilder.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Pads/ProjectPad/ProjectFileNodeBuilder.cs	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Gui/Pads/ProjectPad/ProjectFileNodeBuilder.cs	2005-03-19 18:07:36 UTC (rev 2375)
@@ -51,7 +51,7 @@
 		}
 		
 		public override string ContextMenuAddinPath {
-			get { return &quot;/SharpDevelop/Views/ProjectBrowser/ContextMenu/DefaultFileNode&quot;; }
+			get { return &quot;/SharpDevelop/Views/ProjectBrowser/ContextMenu/ProjectFileNode&quot;; }
 		}
 		
 		public override void GetNodeAttributes (ITreeNavigator treeNavigator, object dataObject, ref NodeAttributes attributes)

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/CollectionUtilities/Comparers.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/CollectionUtilities/Comparers.cs	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/CollectionUtilities/Comparers.cs	2005-03-19 18:07:36 UTC (rev 2375)
@@ -1,6 +1,5 @@
 using System;
 using System.Collections;
-using MonoDevelop.Gui.Pads.ProjectBrowser;
 using MonoDevelop.Gui.Widgets;
 
 namespace System {
@@ -70,7 +69,6 @@
 	[Serializable]
 	public class TreeNodeComparer : IComparer {
 		
-		public static Gtk.TreeIterCompareFunc GtkProjectNode = new Gtk.TreeIterCompareFunc (GtkProjectNodeComparer);
 		public static Gtk.TreeIterCompareFunc GtkDefault = new Gtk.TreeIterCompareFunc (GtkDefaultComparer);
 		public static IComparer Default = new TreeNodeComparer ();
 
@@ -86,32 +84,6 @@
 			return cmp;
 		}
 
-			
-		static int GtkProjectNodeComparer (Gtk.TreeModel model, Gtk.TreeIter a, Gtk.TreeIter b)
-		{
-			Gtk.TreeStore ts = (Gtk.TreeStore) model;
-			TreeNode x = (TreeNode) ts.GetValue (a, 2);
-			TreeNode y = (TreeNode) ts.GetValue (b, 2);
-			
-			if (x.GetType () == y.GetType ()) {
-				if (x is NamedFolderNode) {
-					return ((NamedFolderNode)x).SortPriority - ((NamedFolderNode)y).SortPriority;
-				}
-				return x.Text.CompareTo(y.Text);
-			}
-			if (x is FileNode) {
-				return 1;
-			} else if (y is FileNode) {
-				return -1;
-			}
-			if (x is DirectoryNode) {
-				return 1;
-			} else if (y is DirectoryNode) {
-				return -1;
-			}
-			return x.Text.CompareTo(y.Text);
-		}
-		
 		static int GtkDefaultComparer (Gtk.TreeModel model, Gtk.TreeIter a, Gtk.TreeIter b)
 		{
 			Gtk.TreeStore ts = (Gtk.TreeStore) model;

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/Combine.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/Combine.cs	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/Combine.cs	2005-03-19 18:07:36 UTC (rev 2375)
@@ -41,7 +41,8 @@
 		string description = null;
 		
 		[ItemProperty (&quot;StartMode/startupentry&quot;)]
-		string startProject  = null;
+		string startEntryName;
+		CombineEntry startupEntry;
 		
 		[ItemProperty (&quot;StartMode/single&quot;)]
 		bool   singleStartup = true;
@@ -73,14 +74,14 @@
 			}
 		}
 		
-		[Browsable(false)]
-		public string SingleStartProjectName {
+		public CombineEntry StartupEntry {
 			get {
-				return startProject;
+				if (startupEntry == null &amp;&amp; startEntryName != null)
+					startupEntry = Entries [startEntryName];
+				return startupEntry;
 			}
 			set {
-				if (Entries [value] == null) throw new ArgumentException (&quot;Invalid entry name&quot;);
-				startProject = value;
+				startupEntry = value;
 				OnStartupPropertyChanged(null);
 			}
 		}
@@ -157,8 +158,8 @@
 		
 		internal void NotifyEntryAdded (CombineEntry entry)
 		{
-			if (startProject == null)
-				startProject = entry.Name;
+			if (StartupEntry == null)
+				StartupEntry = entry;
 			
 			if (Configurations.Count == 0) {
 				foreach (IConfiguration pconf in entry.Configurations) {
@@ -201,6 +202,14 @@
 			}
 		}
 		
+		public override DataCollection Serialize (ITypeSerializer handler)
+		{
+			if (StartupEntry != null)
+				startEntryName = StartupEntry.Name;
+
+			return base.Serialize (handler);
+		}
+		
 		public override void Deserialize (ITypeSerializer handler, DataCollection data)
 		{
 			base.Deserialize (handler, data);
@@ -278,15 +287,15 @@
 		
 		public override void Debug (IProgressMonitor monitor)
 		{
-			CombineEntry entry = Entries [startProject];
-			entry.Debug (monitor);
+			if (StartupEntry != null)
+				StartupEntry.Debug (monitor);
 		}
 
 		public override void Execute (IProgressMonitor monitor)
 		{
 			if (singleStartup) {
-				CombineEntry entry = (CombineEntry) Entries [startProject];
-				entry.Execute (monitor);
+				if (StartupEntry != null)
+					StartupEntry.Execute (monitor);
 			} else {
 				ArrayList list = new ArrayList ();
 				monitor.BeginTask (&quot;Executing projects&quot;, 1);
@@ -499,8 +508,8 @@
 			if (!SingleStartupProject) {
 				stream.WriteLine (&quot;\<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">t at echo</A> `run'ning multiple startup projects is not yet support&quot;);
 			} else {
-				if (SingleStartProjectName != null &amp;&amp; Entries [SingleStartProjectName] != null)
-					stream.WriteLine (&quot;\tcd $(OUTPUTDIR) &amp;&amp; $(RUNTIME) {0}&quot;, ((Project)Entries [SingleStartProjectName]).GetOutputFileName ());
+				if (StartupEntry != null)
+					stream.WriteLine (&quot;\tcd $(OUTPUTDIR) &amp;&amp; $(RUNTIME) {0}&quot;, ((Project)StartupEntry).GetOutputFileName ());
 				else
 					stream.WriteLine (&quot;\<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">t at echo</A> No startup project defined&quot;);
 			}

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/CombineConfiguration.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/CombineConfiguration.cs	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/CombineConfiguration.cs	2005-03-19 18:07:36 UTC (rev 2375)
@@ -30,9 +30,14 @@
 		[DataItem (&quot;Entry&quot;)]
 		public class Config 
 		{
-			[ItemProperty (&quot;name&quot;)]
 			string entryName;
 			
+			[ItemProperty (&quot;name&quot;)]
+			string EntryName {
+				get { return Entry != null ? Entry.Name : entryName; }
+				set { entryName = value; }
+			}
+			
 			public CombineEntry entry;
 			
 			[ItemProperty (&quot;configurationname&quot;)]

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/CombineExecuteDefinition.cs
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/CombineExecuteDefinition.cs	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Internal/Project/Combine/CombineExecuteDefinition.cs	2005-03-19 18:07:36 UTC (rev 2375)
@@ -16,14 +16,20 @@
 	
 	public class CombineExecuteDefinition
 	{
+		Combine combine;
 		CombineEntry combineEntry;
 		
 		[ItemProperty (&quot;type&quot;)]
 		EntryExecuteType type = EntryExecuteType.None;
 
-		[ItemProperty]
-		string entry;
+		string entryName;
 		
+		[ItemProperty (&quot;entry&quot;)]
+		string EntryName {
+			get { return Entry != null ? Entry.Name : entryName; }
+			set { entryName = value; }
+		}
+		
 		public CombineExecuteDefinition()
 		{
 		}
@@ -36,14 +42,18 @@
 		
 		internal void SetCombine (Combine cmb)
 		{
-			combineEntry = cmb.Entries [entry];
+			combine = cmb;
 		}
 		
 		public CombineEntry Entry {
-			get { return combineEntry; }
+			get {
+				if (combineEntry == null)
+					combineEntry = combine.Entries [entryName];
+				return combineEntry;
+			}
 			set {
 				combineEntry = value; 
-				entry = value != null ? value.Name : null;
+				entryName = value != null ? value.Name : null;
 			}
 		}
 		

Modified: trunk/MonoDevelop/Core/src/MonoDevelop.Base/Makefile.am
===================================================================
--- trunk/MonoDevelop/Core/src/MonoDevelop.Base/Makefile.am	2005-03-19 15:04:49 UTC (rev 2374)
+++ trunk/MonoDevelop/Core/src/MonoDevelop.Base/Makefile.am	2005-03-19 18:07:36 UTC (rev 2375)
@@ -17,18 +17,6 @@
 	$(MONODOC_LIBS)
 
 FILES= \
-Gui/Pads/ProjectBrowser/ProjectBrowserView.cs \
-Gui/Pads/ProjectBrowser/NodeBuilder/DefaultDotNetNodeBuilder.cs \
-Gui/Pads/ProjectBrowser/NodeBuilder/IProjectNodeBuilder.cs \
-Gui/Pads/ProjectBrowser/BrowserNode/ProjectBrowserNode.cs \
-Gui/Pads/ProjectBrowser/BrowserNode/FolderNode.cs \
-Gui/Pads/ProjectBrowser/BrowserNode/AbstractBrowserNode.cs \
-Gui/Pads/ProjectBrowser/BrowserNode/FileNode.cs \
-Gui/Pads/ProjectBrowser/BrowserNode/ReferenceNode.cs \
-Gui/Pads/ProjectBrowser/BrowserNode/CombineBrowserNode.cs \
-Gui/Pads/ProjectBrowser/BrowserNode/DragDropUtil.cs \
-Gui/Pads/ProjectBrowser/BrowserNode/DirectoryNode.cs \
-Gui/Pads/ProjectBrowser/BrowserNode/NamedFolderNode.cs \
 Gui/Pads/OpenTaskView.cs \
 Gui/Pads/TreeViewMemento.cs \
 Gui/Pads/FileScout/FileList.cs \
@@ -36,10 +24,6 @@
 Gui/Pads/FileScout/FileScout.cs \
 Gui/Pads/PropertyPad/PropertyPadCommands.cs \
 Gui/Pads/PropertyPad/PropertyPad.cs \
-Gui/Pads/ClassScout/ClassScout.cs \
-Gui/Pads/ClassScout/NodeBuilder/DefaultDotNetClassScoutNodeBuilder.cs \
-Gui/Pads/ClassScout/NodeBuilder/IClassScoutNodeBuilder.cs \
-Gui/Pads/ClassScout/BrowserNode/AbstractClassScoutNode.cs \
 Gui/Pads/ClassPad/ClassData.cs \
 Gui/Pads/ClassPad/ClassNodeBuilder.cs \
 Gui/Pads/ClassPad/CombineNodeBuilder.cs \


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001976.html">[Monodevelop-patches-list] r2374 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Commands Gui/Pads/SolutionPad
</A></li>
	<LI>Next message: <A HREF="001978.html">[Monodevelop-patches-list] r2376 - in trunk/MonoDevelop/Core/src/MonoDevelop.Base: . Gui/Pads/FileScout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1977">[ date ]</a>
              <a href="thread.html#1977">[ thread ]</a>
              <a href="subject.html#1977">[ subject ]</a>
              <a href="author.html#1977">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
