<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r1483 - in trunk/MonoDevelop: . src/AddIns/DisplayBindings/SourceEditor src/AddIns/DisplayBindings/SourceEditor/CodeCompletion src/Main/Base src/Main/Base/Commands src/Main/Base/Internal/Parser/ReflectionLayer src/Main/Base/Services src/Main/Base/Services/AmbienceService src/Main/Base/Services/ParserService src/Main/StartUp
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1483%20-%20in%20trunk/MonoDevelop%3A%20.%20src/AddIns/DisplayBindings/SourceEditor%20src/AddIns/DisplayBindings/SourceEditor/CodeCompletion%20src/Main/Base%20src/Main/Base/Commands%20src/Main/Base/Internal/Parser/ReflectionLayer%20src/Main/Base/Services%20src/Main/Base/Services/AmbienceService%20src/Main/Base/Services/ParserService%20src/Main/StartUp&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001089.html">
   <LINK REL="Next"  HREF="001091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r1483 - in trunk/MonoDevelop: . src/AddIns/DisplayBindings/SourceEditor src/AddIns/DisplayBindings/SourceEditor/CodeCompletion src/Main/Base src/Main/Base/Commands src/Main/Base/Internal/Parser/ReflectionLayer src/Main/Base/Services src/Main/Base/Services/AmbienceService src/Main/Base/Services/ParserService src/Main/StartUp</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1483%20-%20in%20trunk/MonoDevelop%3A%20.%20src/AddIns/DisplayBindings/SourceEditor%20src/AddIns/DisplayBindings/SourceEditor/CodeCompletion%20src/Main/Base%20src/Main/Base/Commands%20src/Main/Base/Internal/Parser/ReflectionLayer%20src/Main/Base/Services%20src/Main/Base/Services/AmbienceService%20src/Main/Base/Services/ParserService%20src/Main/StartUp&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r1483 - in trunk/MonoDevelop: . src/AddIns/DisplayBindings/SourceEditor src/AddIns/DisplayBindings/SourceEditor/CodeCompletion src/Main/Base src/Main/Base/Commands src/Main/Base/Internal/Parser/ReflectionLayer src/Main/Base/Services src/Main/Base/Services/AmbienceService src/Main/Base/Services/ParserService src/Main/StartUp">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Mon Apr 19 21:05:52 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001089.html">[Monodevelop-patches-list] r1482 - trunk/MonoDevelop/src/Libraries/MonoDevelop.Gui.Widgets
</A></li>
        <LI>Next message: <A HREF="001091.html">[Monodevelop-patches-list] r1484 - in trunk/md-website/lang/fr: . include tutorials
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1090">[ date ]</a>
              <a href="thread.html#1090">[ thread ]</a>
              <a href="subject.html#1090">[ subject ]</a>
              <a href="author.html#1090">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tberman
Date: 2004-04-19 21:05:52 -0400 (Mon, 19 Apr 2004)
New Revision: 1483

Modified:
   trunk/MonoDevelop/ChangeLog
   trunk/MonoDevelop/configure.in
   trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/ChangeLog
   trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CodeCompletionData.cs
   trunk/MonoDevelop/src/Main/Base/ChangeLog
   trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs
   trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionClass.cs
   trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionEvent.cs
   trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionField.cs
   trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionIndexer.cs
   trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionMethod.cs
   trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionParameter.cs
   trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionProperty.cs
   trunk/MonoDevelop/src/Main/Base/Services/AmbienceService/AmbienceReflectionDecorator.cs
   trunk/MonoDevelop/src/Main/Base/Services/MonodocService.cs
   trunk/MonoDevelop/src/Main/Base/Services/ParserService/AssemblyInformation.cs
   trunk/MonoDevelop/src/Main/StartUp/ChangeLog
   trunk/MonoDevelop/src/Main/StartUp/Makefile.am
Log:
couple changes. unlink the unused resource files.
enable documentation integration a bit.

To get this stuff, you gotta rebuild your code completion db with this code.


Modified: trunk/MonoDevelop/ChangeLog
===================================================================
--- trunk/MonoDevelop/ChangeLog	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/ChangeLog	2004-04-20 01:05:52 UTC (rev 1483)
@@ -1,5 +1,9 @@
 2004-04-19  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at sevenl.net</A>&gt;
 
+	* configure.in: bump the monodoc dep to 0.13.99
+
+2004-04-19  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at sevenl.net</A>&gt;
+
 	* configure.in: add french translation
 	* po/fr.po: add french translation from Vincent Daron
 

Modified: trunk/MonoDevelop/configure.in
===================================================================
--- trunk/MonoDevelop/configure.in	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/configure.in	2004-04-20 01:05:52 UTC (rev 1483)
@@ -34,7 +34,7 @@
 GTKSOURCEVIEWSHARP_REQUIRED_VERSION=0.1
 GECKOSHARP_REQUIRED_VERSION=0.1
 GNOMEVFS_REQUIRED_VERSION=2.0
-MONODOC_REQUIRED_VERSION=0.12
+MONODOC_REQUIRED_VERSION=0.13.99
 
 PKG_CHECK_MODULES(BASE_DEPENDENCIES,
 mono &gt;= $MONO_REQUIRED_VERSION

Modified: trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/ChangeLog
===================================================================
--- trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/ChangeLog	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/ChangeLog	2004-04-20 01:05:52 UTC (rev 1483)
@@ -1,5 +1,9 @@
 2004-04-19  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at sevenl.net</A>&gt;
 
+	* CodeCompletion/CodeCompletionDataProvider.cs: Wrap docs.
+
+2004-04-19  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at sevenl.net</A>&gt;
+
 	* Gui/SourceEditorView.cs: call the right resolver method.
 	* CodeCompletion/CodeCompletionDataProvider.cs: Add IParameter results.
 	* CodeCompletion/CodeCompletionData.cs: Add IParameter ctor.

Modified: trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CodeCompletionData.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CodeCompletionData.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor/CodeCompletion/CodeCompletionData.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -276,8 +276,18 @@
 					}
 				} while (xml.Read ());
 			} catch {
+				Console.WriteLine (&quot;DocBoom&quot;);
 				return doc;
 			}
+			int i = 45;
+			while (i &lt; ret.Length) {
+				while (ret[i] != ' ') {
+					i++;
+					if (i &gt;= ret.Length) return ret.ToString ();
+				}
+				ret.Insert (i, '\n');
+				i += 45;
+			}
 			return ret.ToString ();
 		}
 		

Modified: trunk/MonoDevelop/src/Main/Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/src/Main/Base/ChangeLog	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/ChangeLog	2004-04-20 01:05:52 UTC (rev 1483)
@@ -1,3 +1,19 @@
+2004-04-19  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at sevenl.net</A>&gt;
+
+	* Commands/AutostartCommands.cs: Match new ReflectionLayer api.
+	* Services/MonodocService.cs: uncomment GetHelpXml
+	* Services/AmbienceService/AmbienceReflectionDecorator.cs: match api.
+	* Services/ParserService/AssemblyInformation.cs: match api.
+	* Internal/Parser/ReflectionLayer/Reflection*.cs:
+	Add the start of documentation integration into the actual IDE.
+	Now the docs show up on code completion tooltips, just the summary.
+	Potentially we should enable the entire doc for the class/method,
+	but I havnt seen how it looks yet, as it will most likely be large
+	for some methods/classes.
+
+	**NOTE: To get this documentation integration, you have to rebuild
+	your code completion database.
+
 2004-04-17  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at sevenl.net</A>&gt;
 
 	* Services/Toolbar/ToolbarService.cs:

Modified: trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -151,7 +151,7 @@
 				return;
 			}
 		
-			ReflectionClass reflectionClass = new ReflectionClass(typeof(object), null);
+			ReflectionClass reflectionClass = new ReflectionClass(typeof(object));
 			
 			// register string tag provider (TODO: move to add-in tree :)
 			StringParserService stringParserService = (StringParserService)ServiceManager.Services.GetService(typeof(StringParserService));

Modified: trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionClass.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionClass.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionClass.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -5,6 +5,9 @@
 //     &lt;version value=&quot;$version&quot;/&gt;
 // &lt;/file&gt;
 
+using MonoDevelop.Services;
+using MonoDevelop.Core.Services;
+
 using System;
 using System.Collections;
 using System.Xml;
@@ -37,11 +40,17 @@
 			return type.IsSubclassOf(typeof(Delegate)) &amp;&amp; type != typeof(MulticastDelegate);
 		}
 		
-		public ReflectionClass(Type type, Hashtable xmlComments)
+		public ReflectionClass(Type type)
 		{
+
+			//FIXME: remove after doc changes are complete.
+			Hashtable xmlComments = null;
+			
 			FullyQualifiedName = type.FullName;
-			if (xmlComments != null) {
-				XmlNode node = xmlComments[&quot;T:&quot; + FullyQualifiedName] as XmlNode;
+
+			XmlDocument docs = ((MonodocService)ServiceManager.Services.GetService (typeof (MonodocService))).GetHelpXml (FullyQualifiedName);
+			if (docs != null) {
+				XmlNode node = docs.SelectSingleNode (&quot;/Type/Docs/summary&quot;);
 				if (node != null) {
 					Documentation = node.InnerXml;
 				}
@@ -105,12 +114,12 @@
 				}
 				
 				foreach (Type nestedType in type.GetNestedTypes(flags)) {
-					innerClasses.Add(new ReflectionClass(nestedType, xmlComments));
+					innerClasses.Add(new ReflectionClass(nestedType));
 				}
 				
 				foreach (FieldInfo field in type.GetFields(flags)) {
 //					if (!field.IsSpecialName) {
-					IField newField = new ReflectionField(field, xmlComments);
+					IField newField = new ReflectionField(field, docs);
 					if (!newField.IsInternal) {
 						fields.Add(newField);
 					}
@@ -126,12 +135,12 @@
 						p = propertyInfo.GetIndexParameters();
 					} catch (Exception) {}
 					if (p == null || p.Length == 0) {
-						IProperty newProperty = new ReflectionProperty(propertyInfo, xmlComments);
+						IProperty newProperty = new ReflectionProperty(propertyInfo, docs);
 						if (!newProperty.IsInternal) {
 							properties.Add(newProperty);
 						}
 					} else {
-						IIndexer newIndexer = new ReflectionIndexer(propertyInfo, xmlComments);
+						IIndexer newIndexer = new ReflectionIndexer(propertyInfo, docs);
 						if (!newIndexer.IsInternal) {
 							indexer.Add(newIndexer);
 						}
@@ -141,7 +150,7 @@
 				
 				foreach (MethodInfo methodInfo in type.GetMethods(flags)) {
 					if (!methodInfo.IsSpecialName) {
-						IMethod newMethod = new ReflectionMethod(methodInfo, xmlComments);
+						IMethod newMethod = new ReflectionMethod(methodInfo, docs);
 						
 						if (!newMethod.IsInternal) {
 							methods.Add(newMethod);
@@ -150,7 +159,7 @@
 				}
 				
 				foreach (ConstructorInfo constructorInfo in type.GetConstructors(flags)) {
-					IMethod newMethod = new ReflectionMethod(constructorInfo, xmlComments);
+					IMethod newMethod = new ReflectionMethod(constructorInfo, docs);
 					if (!newMethod.IsInternal) {
 						methods.Add(newMethod);
 					}
@@ -158,7 +167,7 @@
 				
 				foreach (EventInfo eventInfo in type.GetEvents(flags)) {
 //					if (!eventInfo.IsSpecialName) {
-					IEvent newEvent = new ReflectionEvent(eventInfo, xmlComments);
+					IEvent newEvent = new ReflectionEvent(eventInfo, docs);
 					
 					if (!newEvent.IsInternal) {
 						events.Add(newEvent);

Modified: trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionEvent.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionEvent.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionEvent.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -14,17 +14,17 @@
 	[Serializable]
 	public class ReflectionEvent : AbstractEvent
 	{
-		public ReflectionEvent(EventInfo eventInfo, Hashtable xmlComments)
+		public ReflectionEvent(EventInfo eventInfo, XmlDocument docs)
 		{
 			FullyQualifiedName = String.Concat(eventInfo.DeclaringType.FullName, &quot;.&quot;, eventInfo.Name);
-			
-			if (xmlComments != null) {
-				XmlNode node = xmlComments[&quot;E:&quot; + FullyQualifiedName] as XmlNode;
+
+			if (docs != null) {
+				XmlNode node = docs.SelectSingleNode (&quot;/Type/Members/Member[@MemberName='&quot; + eventInfo.Name + &quot;']/Docs/summary&quot;);
 				if (node != null) {
 					Documentation = node.InnerXml;
 				}
 			}
-			
+
 			// get modifiers
 			MethodInfo methodBase = null;
 			try {

Modified: trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionField.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionField.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionField.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -15,17 +15,18 @@
 	[Serializable]
 	public class ReflectionField : AbstractField
 	{
-		public ReflectionField(FieldInfo fieldInfo, Hashtable xmlComments)
+		public ReflectionField(FieldInfo fieldInfo, XmlDocument docs)
 		{
 			System.Diagnostics.Debug.Assert(fieldInfo != null);
 			FullyQualifiedName = String.Concat(fieldInfo.DeclaringType.FullName, &quot;.&quot;, fieldInfo.Name);
-			
-			if (xmlComments != null) {
-				XmlNode node = xmlComments[&quot;F:&quot; + FullyQualifiedName] as XmlNode;
+
+			if (docs != null) {
+				XmlNode node = docs.SelectSingleNode (&quot;/Type/Members/Member[@MemberName='&quot; + fieldInfo.Name + &quot;']/Docs/summary&quot;);
 				if (node != null) {
 					Documentation = node.InnerXml;
 				}
 			}
+			
 			if (fieldInfo.IsInitOnly) {
 				modifiers |= ModifierEnum.Readonly;
 			}

Modified: trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionIndexer.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionIndexer.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionIndexer.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -29,7 +29,7 @@
 			return propertyName.ToString();
 		}
 		
-		public ReflectionIndexer(PropertyInfo propertyInfo, Hashtable xmlComments)
+		public ReflectionIndexer(PropertyInfo propertyInfo, XmlDocument docs)
 		{
 			// indexers does have the same name as the object that declare the indexers
 			FullyQualifiedName = propertyInfo.DeclaringType.FullName;
@@ -46,12 +46,15 @@
 			} else {
 				setterRegion = null;
 			}
-			
+
 			XmlNode node = null;
-			if (xmlComments != null) {
-				node = xmlComments[&quot;P:&quot; + FullyQualifiedName] as XmlNode;
+			if (docs != null) {
+				node = docs.SelectSingleNode (&quot;/Type/Members/Member[@MemberName='&quot; + propertyInfo.Name + &quot;']&quot;);
 				if (node != null) {
-					Documentation = node.InnerXml;
+					XmlNode docNode = node.SelectSingleNode (&quot;Docs/summary&quot;);
+					if (docNode != null) {
+						Documentation = node.InnerXml;
+					}
 				}
 			}
 			

Modified: trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionMethod.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionMethod.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionMethod.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -31,24 +31,58 @@
 			propertyName.Append(')');
 			return propertyName.ToString();
 		}
+
+		XmlNode FindMatch (XmlNodeList nodes, MethodBase methodBase)
+		{
+			ParameterInfo[] p = methodBase.GetParameters ();
+			string s = &quot;&quot;;
+			foreach (XmlNode node in nodes) {
+				XmlNodeList paramList = node.SelectNodes (&quot;Parameters/*&quot;);
+				s += paramList.Count + &quot; - &quot; + p.Length + &quot;\n&quot;;
+				if (p.Length == 0 &amp;&amp; paramList.Count == 0) return node;
+				if (p.Length != paramList.Count) continue;
+				bool matched = true;
+				for (int i = 0; i &lt; p.Length; i++) {
+					if (p[i].ParameterType.ToString () != paramList[i].Attributes[&quot;Type&quot;].Value) {
+						matched = false;
+					}
+				}
+				if (matched)
+					return node;
+			}
+			Console.WriteLine (&quot;Info:&quot;);
+			Console.WriteLine (s);
+			Console.WriteLine (&quot;No match found - {2}.{0} {1}&quot;, methodBase.Name, GetParamList (methodBase), methodBase.DeclaringType.FullName);
+			return null;
+		}
 		
-		public ReflectionMethod(MethodBase methodBase, Hashtable xmlComments)
+		public ReflectionMethod(MethodBase methodBase, XmlDocument docs)
 		{
 			string name = methodBase.Name;
 			
 			if (methodBase is ConstructorInfo) {
-				name = &quot;#ctor&quot;;
+				name = &quot;.ctor&quot;;
 			}
 			FullyQualifiedName = String.Concat(methodBase.DeclaringType.FullName, &quot;.&quot;, name);
 			
 			XmlNode node = null;
-			
-			if (xmlComments != null) {
-				node = xmlComments[&quot;M:&quot; + FullyQualifiedName + GetParamList(methodBase)] as XmlNode;
-				if (node != null) {
-					Documentation = node.InnerXml;
+
+			if (docs != null) {
+				XmlNodeList nodes = docs.SelectNodes (&quot;/Type/Members/Member[@MemberName='&quot; + name + &quot;']&quot;);
+				if (nodes != null &amp;&amp; nodes.Count &gt; 0) {
+					if (nodes.Count == 1) {
+						node = nodes[0];
+					} else {
+						node = FindMatch (nodes, methodBase);
+					}
+					if (node != null) {
+						XmlNode docNode = node.SelectSingleNode (&quot;Docs/summary&quot;);
+						if (docNode != null) {
+							Documentation = docNode.InnerXml;
+						}
+					}
 				}
-			}
+			}	
 			
 			modifiers = ModifierEnum.None;
 			if (methodBase.IsStatic) {

Modified: trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionParameter.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionParameter.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionParameter.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -33,7 +33,7 @@
 			}
 			
 			if (methodNode != null) {
-				XmlNode paramDocu = methodNode.SelectSingleNode(&quot;member[@name='&quot; + parameterInfo.Name + &quot;']&quot;);
+				XmlNode paramDocu = methodNode.SelectSingleNode(&quot;Docs/param[@name='&quot; + parameterInfo.Name + &quot;']&quot;);
 				if (paramDocu != null) {
 					documentation = paramDocu.InnerXml;
 				}

Modified: trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionProperty.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionProperty.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Internal/Parser/ReflectionLayer/ReflectionProperty.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -14,7 +14,7 @@
 	[Serializable]
 	public class ReflectionProperty : AbstractProperty 
 	{
-		public ReflectionProperty(PropertyInfo propertyInfo, Hashtable xmlComments)
+		public ReflectionProperty(PropertyInfo propertyInfo, XmlDocument docs)
 		{
 			FullyQualifiedName = String.Concat(propertyInfo.DeclaringType.FullName, &quot;.&quot;, propertyInfo.Name);
 			
@@ -30,14 +30,14 @@
 			} else {
 				setterRegion = null;
 			}
-			
-			if (xmlComments != null) {
-				XmlNode node = xmlComments[&quot;P:&quot; + FullyQualifiedName] as XmlNode;
+
+			if (docs != null) {
+				XmlNode node = docs.SelectSingleNode (&quot;/Type/Members/Member[@MemberName='&quot; + propertyInfo.Name + &quot;']/Docs/summary&quot;);
 				if (node != null) {
 					Documentation = node.InnerXml;
 				}
 			}
-			
+
 			returnType = new ReflectionReturnType(propertyInfo.PropertyType);
 			
 			MethodInfo methodBase = null;

Modified: trunk/MonoDevelop/src/Main/Base/Services/AmbienceService/AmbienceReflectionDecorator.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Services/AmbienceService/AmbienceReflectionDecorator.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Services/AmbienceService/AmbienceReflectionDecorator.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -93,7 +93,7 @@
 		
 		public string Convert(Type type)
 		{
-			return conv.Convert(new ReflectionClass(type, null));
+			return conv.Convert(new ReflectionClass(type));
 		}
 		
 		public string Convert(FieldInfo field)

Modified: trunk/MonoDevelop/src/Main/Base/Services/MonodocService.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Services/MonodocService.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Services/MonodocService.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -22,8 +22,8 @@
 			get { return helpTree; }
 		}
 
-		//public XmlDocument GetHelpXml (string type) {
-		//	return helpTree.GetHelpXml (&quot;T:&quot; + type);
-		//}
+		public XmlDocument GetHelpXml (string type) {
+			return helpTree.GetHelpXml (&quot;T:&quot; + type);
+		}
 	}
 }

Modified: trunk/MonoDevelop/src/Main/Base/Services/ParserService/AssemblyInformation.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Services/ParserService/AssemblyInformation.cs	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/Base/Services/ParserService/AssemblyInformation.cs	2004-04-20 01:05:52 UTC (rev 1483)
@@ -66,7 +66,7 @@
 //			}
 			
 			// read xml documentation for the assembly
-			XmlDocument doc        = null;
+			/*XmlDocument doc        = null;
 			Hashtable   docuNodes  = new Hashtable();
 			string      xmlDocFile = System.IO.Path.ChangeExtension(fileName, &quot;.xml&quot;);
 			
@@ -89,7 +89,7 @@
 						}
 					}
 				}
-			}
+				}*/
 
 			//FIXME: Re-enable this code when the mono bug goes away, 0.32
 			//hopefully
@@ -97,7 +97,7 @@
 			System.Reflection.Assembly asm = Assembly.LoadFrom (fileName);
 			foreach (Type type in asm.GetTypes()) {
 				if (!type.FullName.StartsWith(&quot;&lt;&quot;) &amp;&amp; !type.IsSpecialName &amp;&amp; type.IsPublic) {
-					classes.Add(new ReflectionClass(type, docuNodes));
+					classes.Add(new ReflectionClass(type));
 				}
 			}
 		}

Modified: trunk/MonoDevelop/src/Main/StartUp/ChangeLog
===================================================================
--- trunk/MonoDevelop/src/Main/StartUp/ChangeLog	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/StartUp/ChangeLog	2004-04-20 01:05:52 UTC (rev 1483)
@@ -1,3 +1,7 @@
+2004-04-19  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at sevenl.net</A>&gt;
+
+	* Makefile.am: only link the one .resources file we need.
+
 2004-04-07  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jluke at cfl.rr.com</A>&gt;
 
 	* MonoDevelopMain.cs: use reflection for the name and version

Modified: trunk/MonoDevelop/src/Main/StartUp/Makefile.am
===================================================================
--- trunk/MonoDevelop/src/Main/StartUp/Makefile.am	2004-04-19 06:51:32 UTC (rev 1482)
+++ trunk/MonoDevelop/src/Main/StartUp/Makefile.am	2004-04-20 01:05:52 UTC (rev 1483)
@@ -20,27 +20,7 @@
 		/define:GTK /r:gtk-sharp /r:gdk-sharp \
 		/r:gnome-sharp \
 		$(build_sources) \
-		/resource:$(BASEDIR)/data/resources/StringResources.fr.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.cn-gb.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.jp.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.nl.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.pl.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.ro.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.pt.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.ru.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.goisern.resources \
-		/resource:$(BASEDIR)/data/resources/BitmapResources.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.se.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.es.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.cz.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.kr.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.it.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.bg.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.de.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.cn-big.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.dk.resources \
 		/resource:$(BASEDIR)/data/resources/StringResources.resources,StringResources.resources \
-		/resource:$(BASEDIR)/data/resources/StringResources.br.resources \
 		/resource:$(BASEDIR)/data/resources/SplashScreen.png,SplashScreen.png \
 	&amp;&amp; cp $(DLL) ../../../build/bin/.
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001089.html">[Monodevelop-patches-list] r1482 - trunk/MonoDevelop/src/Libraries/MonoDevelop.Gui.Widgets
</A></li>
	<LI>Next message: <A HREF="001091.html">[Monodevelop-patches-list] r1484 - in trunk/md-website/lang/fr: . include tutorials
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1090">[ date ]</a>
              <a href="thread.html#1090">[ thread ]</a>
              <a href="subject.html#1090">[ subject ]</a>
              <a href="author.html#1090">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
