<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r1424 - in trunk/MonoDevelop/src/Main/Base: . Commands Gui/HtmlControl Gui/Pads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1424%20-%20in%20trunk/MonoDevelop/src/Main/Base%3A%20.%20Commands%20Gui/HtmlControl%20Gui/Pads&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001030.html">
   <LINK REL="Next"  HREF="001032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r1424 - in trunk/MonoDevelop/src/Main/Base: . Commands Gui/HtmlControl Gui/Pads</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1424%20-%20in%20trunk/MonoDevelop/src/Main/Base%3A%20.%20Commands%20Gui/HtmlControl%20Gui/Pads&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r1424 - in trunk/MonoDevelop/src/Main/Base: . Commands Gui/HtmlControl Gui/Pads">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Fri Apr  9 14:35:03 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001030.html">[Monodevelop-patches-list] r1423 - in trunk/MonoDevelop/src/Main/Base: . Gui/Dialogs
</A></li>
        <LI>Next message: <A HREF="001032.html">[Monodevelop-patches-list] r1425 - in trunk/MonoDevelop/src/AddIns/BackendBindings/JavaBinding: . Gui Parser Parser/SharpDevelopTree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1031">[ date ]</a>
              <a href="thread.html#1031">[ thread ]</a>
              <a href="subject.html#1031">[ subject ]</a>
              <a href="author.html#1031">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jluke
Date: 2004-04-09 14:35:02 -0400 (Fri, 09 Apr 2004)
New Revision: 1424

Modified:
   trunk/MonoDevelop/src/Main/Base/ChangeLog
   trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs
   trunk/MonoDevelop/src/Main/Base/Gui/HtmlControl/MozillaControl.cs
   trunk/MonoDevelop/src/Main/Base/Gui/Pads/TerminalPad.cs
Log:
2004-04-09  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jluke at cfl.rr.com</A>&gt;
 
        * Commands/AutostartCommands: remove dead code
        * Gui/Pads/TerminalPad.cs: update and rename from 'Output' to 'Terminal'
        * Gui/HtmlControl/MozillaControl.cs: remove CWL



Modified: trunk/MonoDevelop/src/Main/Base/ChangeLog
===================================================================
--- trunk/MonoDevelop/src/Main/Base/ChangeLog	2004-04-09 17:57:38 UTC (rev 1423)
+++ trunk/MonoDevelop/src/Main/Base/ChangeLog	2004-04-09 18:35:02 UTC (rev 1424)
@@ -1,3 +1,9 @@
+2004-04-09  John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jluke at cfl.rr.com</A>&gt;
+
+	* Commands/AutostartCommands: remove dead code
+	* Gui/Pads/TerminalPad.cs: update and rename from 'Output' to 'Terminal'
+	* Gui/HtmlControl/MozillaControl.cs: remove CWL
+
 2004-04-09  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at sevenl.net</A>&gt;
 
 	* Gui/Dialogs/SharpDevelopAboutPanels.cs: closing per bug #55955.

Modified: trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs	2004-04-09 17:57:38 UTC (rev 1423)
+++ trunk/MonoDevelop/src/Main/Base/Commands/AutostartCommands.cs	2004-04-09 18:35:02 UTC (rev 1424)
@@ -210,10 +210,7 @@
 			ShowTipOfTheDay (null, null);
 		
 			// finally run the workbench window ...
-			Gtk.Application.Run();
-			
-			// save the workbench memento in the ide properties
-			//propertyService.SetProperty(workbenchMemento, WorkbenchSingleton.Workbench.CreateMemento());
+			Gtk.Application.Run ();
 		}
 	}
 }

Modified: trunk/MonoDevelop/src/Main/Base/Gui/HtmlControl/MozillaControl.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/HtmlControl/MozillaControl.cs	2004-04-09 17:57:38 UTC (rev 1423)
+++ trunk/MonoDevelop/src/Main/Base/Gui/HtmlControl/MozillaControl.cs	2004-04-09 18:35:02 UTC (rev 1424)
@@ -1,5 +1,5 @@
 //
-// MozillaControl - An Html widget that uses GtkMozEmbed#
+// MozillaControl - An Html widget that uses Gecko#
 //
 // Author: John Luke  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">jluke at cfl.rr.com</A>&gt;
 //
@@ -94,7 +94,7 @@
 
 		public void InitializeWithBase (string base_uri)
 		{
-			Console.WriteLine (base_uri);
+			//Console.WriteLine (base_uri);
 			if (html.Length &gt; 0)
 			{
 				this.RenderData (html, base_uri, &quot;text/html&quot;);

Modified: trunk/MonoDevelop/src/Main/Base/Gui/Pads/TerminalPad.cs
===================================================================
--- trunk/MonoDevelop/src/Main/Base/Gui/Pads/TerminalPad.cs	2004-04-09 17:57:38 UTC (rev 1423)
+++ trunk/MonoDevelop/src/Main/Base/Gui/Pads/TerminalPad.cs	2004-04-09 18:35:02 UTC (rev 1424)
@@ -13,7 +13,6 @@
 	public class TerminalPad : IPadContent
 	{
 		Frame frame = new Frame ();
-		VScrollbar vscroll;
 		Terminal term;
 
 		ResourceService resourceService = (ResourceService) ServiceManager.Services.GetService(typeof(IResourceService));
@@ -30,7 +29,7 @@
 		public string Title {
 			get {
 				//FIXME: check the string
-				return GettextCatalog.GetString (&quot;Output&quot;);
+				return GettextCatalog.GetString (&quot;Terminal&quot;);
 			}
 		}
 		
@@ -57,7 +56,7 @@
 			term.ScrollOnKeystroke = true;
 			term.CursorBlinks = true;
 			term.MouseAutohide = true;
-			term.FontFromString = &quot;monospace 12&quot;;
+			term.FontFromString = &quot;monospace 10&quot;;
 			term.Encoding = &quot;UTF-8&quot;;
 			term.BackspaceBinding = TerminalEraseBinding.Auto;
 			term.DeleteBinding = TerminalEraseBinding.Auto;
@@ -69,23 +68,25 @@
 			colormap.AllocColor (ref fgcolor, true, true);
 			colormap.AllocColor (ref bgcolor, true, true);
 			term.SetColors (fgcolor, bgcolor, fgcolor, 16);
-			term.SetSize (50, 5);
 
-			term.Commit += new Vte.CommitHandler (OnTermCommit);
-			term.RestoreWindow += new EventHandler (OnRestoreWindow);
+			//FIXME: whats a good default here
+			//term.SetSize (80, 5);
+
+			// FIXME: pass the environment along
+			term.ForkCommand (Environment.GetEnvironmentVariable (&quot;SHELL&quot;), Environment.GetCommandLineArgs (), new string[] {&quot;&quot;}, Environment.GetEnvironmentVariable (&quot;HOME&quot;), false, true, true);
+
 			term.ChildExited += new EventHandler (OnChildExited);
-			term.LowerWindow += new EventHandler (OnTermLower);
-			term.RaiseWindow += new EventHandler (OnTermRaise);
-//			term.TextModified += new EventHandler (OnTermTextModified);
 
-			vscroll = new VScrollbar (term.Adjustment);
+			VScrollbar vscroll = new VScrollbar (term.Adjustment);
 
 			HBox hbox = new HBox ();
 			hbox.PackStart (term, true, true, 0);
 			hbox.PackStart (vscroll, false, true, 0);
 
 			frame.ShadowType = Gtk.ShadowType.In;
-			frame.Add (hbox);
+			ScrolledWindow sw = new ScrolledWindow ();
+			sw.Add (hbox);
+			frame.Add (sw);
 			
 			taskService.CompilerOutputChanged += new EventHandler (SetOutput);
 			projectService.StartBuild += new EventHandler (SelectMessageView);
@@ -93,53 +94,20 @@
 			projectService.CombineOpened += new CombineEventHandler (OnCombineOpen);
 		}
 
-/*
-		void OnTermTextModified (object o, EventArgs args)
-		{
-		}
-*/
 		void OnChildExited (object o, EventArgs args)
 		{
 			// full reset
 			term.Reset (true, true);
 		}
 
-		void OnTermLower (object o, EventArgs args)
-		{
-			Console.WriteLine (&quot;term lower&quot;);
-		}
-
-		void OnTermRaise (object o, EventArgs args)
-		{
-			Console.WriteLine (&quot;term raise&quot;);
-		}
-
-		void OnRestoreWindow (object o, EventArgs args)
-		{
-			Console.WriteLine (&quot;restore window&quot;);
-		}
-
-		void OnTermCommit (object o, Vte.CommitArgs args)
-		{
-			Terminal t = (Terminal) o;
-        	if (args.P0 == &quot;\r&quot;)
-        	{
-            	//FIXME: maybe a setting somewhere
-            	t.Feed (&quot;\r\n&quot;);
-        	    return;
-    	    }
-                                                                         
-	        t.Feed (args.P0);
-		}
-		
 		void OnCombineOpen (object sender, CombineEventArgs e)
 		{
-			term.Reset (true, true);
+			term.Reset (false, false);
 		}
 		
 		void OnCombineClosed (object sender, CombineEventArgs e)
 		{
-			term.Reset (true, false);
+			term.Reset (false, true);
 		}
 		
 		void SelectMessageView (object sender, EventArgs e)
@@ -154,7 +122,12 @@
 				}
 			}
 		}
-		
+
+		public void RunCommand (string command)
+		{
+			term.FeedChild (command + &quot;\n&quot;);
+		}
+
 		void SetOutput2 ()
 		{
 			term.Feed (taskService.CompilerOutput.Replace (&quot;\n&quot;, &quot;\r\n&quot;));


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001030.html">[Monodevelop-patches-list] r1423 - in trunk/MonoDevelop/src/Main/Base: . Gui/Dialogs
</A></li>
	<LI>Next message: <A HREF="001032.html">[Monodevelop-patches-list] r1425 - in trunk/MonoDevelop/src/AddIns/BackendBindings/JavaBinding: . Gui Parser Parser/SharpDevelopTree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1031">[ date ]</a>
              <a href="thread.html#1031">[ thread ]</a>
              <a href="subject.html#1031">[ subject ]</a>
              <a href="author.html#1031">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
