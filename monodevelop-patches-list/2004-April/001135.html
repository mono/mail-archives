<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-patches-list] r1528 - in trunk/MonoDevelop: data/resources/glade src/AddIns/BackendBindings/NemerleBinding src/AddIns/BackendBindings/NemerleBinding/Gui src/AddIns/BackendBindings/NemerleBinding/Project
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1528%20-%20in%20trunk/MonoDevelop%3A%20data/resources/glade%20src/AddIns/BackendBindings/NemerleBinding%20src/AddIns/BackendBindings/NemerleBinding/Gui%20src/AddIns/BackendBindings/NemerleBinding/Project&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001134.html">
   <LINK REL="Next"  HREF="001136.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-patches-list] r1528 - in trunk/MonoDevelop: data/resources/glade src/AddIns/BackendBindings/NemerleBinding src/AddIns/BackendBindings/NemerleBinding/Gui src/AddIns/BackendBindings/NemerleBinding/Project</H1>
    <B>commit-watcher at mono-cvs.ximian.com</B> 
    <A HREF="mailto:monodevelop-patches-list%40lists.ximian.com?Subject=%5BMonodevelop-patches-list%5D%20r1528%20-%20in%20trunk/MonoDevelop%3A%20data/resources/glade%20src/AddIns/BackendBindings/NemerleBinding%20src/AddIns/BackendBindings/NemerleBinding/Gui%20src/AddIns/BackendBindings/NemerleBinding/Project&In-Reply-To="
       TITLE="[Monodevelop-patches-list] r1528 - in trunk/MonoDevelop: data/resources/glade src/AddIns/BackendBindings/NemerleBinding src/AddIns/BackendBindings/NemerleBinding/Gui src/AddIns/BackendBindings/NemerleBinding/Project">commit-watcher at mono-cvs.ximian.com
       </A><BR>
    <I>Tue Apr 27 19:58:51 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001134.html">[Monodevelop-patches-list] r1527 - in trunk/MonoDevelop/src/Main/Base/Gui/Pads: . FileScout
</A></li>
        <LI>Next message: <A HREF="001136.html">[Monodevelop-patches-list] r1529 - in trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor: . Gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1135">[ date ]</a>
              <a href="thread.html#1135">[ thread ]</a>
              <a href="subject.html#1135">[ subject ]</a>
              <a href="author.html#1135">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: pawel
Date: 2004-04-27 19:58:51 -0400 (Tue, 27 Apr 2004)
New Revision: 1528

Modified:
   trunk/MonoDevelop/data/resources/glade/ChangeLog
   trunk/MonoDevelop/data/resources/glade/Nemerle.glade
   trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/ChangeLog
   trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Gui/CodeGenerationPanel.cs
   trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Gui/OutputPanel.cs
   trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingCompilerServices.cs
   trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs
   trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Project/NemerleParameters.cs
   trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Project/NemerleProject.cs
Log:
use more from AbstractProjectConfiguration, Nemerle prjx looks cleaner now


Modified: trunk/MonoDevelop/data/resources/glade/ChangeLog
===================================================================
--- trunk/MonoDevelop/data/resources/glade/ChangeLog	2004-04-27 22:43:33 UTC (rev 1527)
+++ trunk/MonoDevelop/data/resources/glade/ChangeLog	2004-04-27 23:58:51 UTC (rev 1528)
@@ -1,3 +1,7 @@
+2004-04-28  Pawel Rozanski  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tokugawa at afn.no-ip.org</A>&gt;
+
+	* Nemerle.glade: &quot;Ignore warnings&quot; option added
+
 2004-04-26  Todd Berman  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tberman at sevenl.net</A>&gt;
 
 	* Base.glade: oops, missing combine-&gt;solution change

Modified: trunk/MonoDevelop/data/resources/glade/Nemerle.glade
===================================================================
--- trunk/MonoDevelop/data/resources/glade/Nemerle.glade	2004-04-27 22:43:33 UTC (rev 1527)
+++ trunk/MonoDevelop/data/resources/glade/Nemerle.glade	2004-04-27 23:58:51 UTC (rev 1528)
@@ -185,6 +185,24 @@
 		  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
 		&lt;/packing&gt;
 	      &lt;/child&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkCheckButton&quot; id=&quot;ignorewarnings&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Ignore warnings&lt;/property&gt;
+		  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+		  &lt;property name=&quot;active&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;inconsistent&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;draw_indicator&quot;&gt;True&lt;/property&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
 	    &lt;/widget&gt;
 	    &lt;packing&gt;
 	      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;

Modified: trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/ChangeLog
===================================================================
--- trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/ChangeLog	2004-04-27 22:43:33 UTC (rev 1527)
+++ trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/ChangeLog	2004-04-27 23:58:51 UTC (rev 1528)
@@ -1,3 +1,14 @@
+2004-04-28  Pawel Rozanski  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tokugawa at afn.no-ip.org</A>&gt;
+
+	* Gui/OutputPanel.cs:
+	* Gui/CodeGenerationPanel.cs:
+	* NemerleBindingCompilerServices.cs:
+	* Project/NemerleParameters.cs:
+	* Project/NemerleProject.cs:
+	* NemerleBindingExecutionServices.cs:
+	NemerleParameters uses more from inherited AbstractProjectConfiguration
+	class
+
 2004-04-16  Pawel Rozanski &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">tokugawa at afn.no-ip.org</A>&gt;
 
 	* NemerleBindingCompilerServices.cs: without temp files now,

Modified: trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Gui/CodeGenerationPanel.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Gui/CodeGenerationPanel.cs	2004-04-27 22:43:33 UTC (rev 1527)
+++ trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Gui/CodeGenerationPanel.cs	2004-04-27 23:58:51 UTC (rev 1528)
@@ -21,6 +21,7 @@
  			[Glade.Widget] OptionMenu target;
  			[Glade.Widget] CheckButton nostdmacros;
 			[Glade.Widget] CheckButton nostdlib;
+			[Glade.Widget] CheckButton ignorewarnings;
  			[Glade.Widget] CheckButton ot;
  			[Glade.Widget] CheckButton obcm;
  			[Glade.Widget] CheckButton oocm;
@@ -36,6 +37,7 @@
 				
 				nostdmacros.Active = compilerParameters.Nostdmacros;
 				nostdlib.Active    = compilerParameters.Nostdlib;
+				ignorewarnings.Active = compilerParameters.RunWithWarnings;
 				ot.Active          = compilerParameters.Ot;
 				obcm.Active        = compilerParameters.Obcm;
 				oocm.Active        = compilerParameters.Oocm;
@@ -47,6 +49,7 @@
 				compilerParameters.Target = (NemerleBinding.CompileTarget)target.History;
 				compilerParameters.Nostdmacros = nostdmacros.Active;
 				compilerParameters.Nostdlib = nostdlib.Active;
+				compilerParameters.RunWithWarnings = ignorewarnings.Active;
 				compilerParameters.Ot = ot.Active;
 				compilerParameters.Obcm = obcm.Active;
 				compilerParameters.Oocm = oocm.Active;

Modified: trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Gui/OutputPanel.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Gui/OutputPanel.cs	2004-04-27 22:43:33 UTC (rev 1527)
+++ trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Gui/OutputPanel.cs	2004-04-27 23:58:51 UTC (rev 1528)
@@ -31,18 +31,18 @@
 				compilerParameters = (NemerleParameters)((IProperties)CustomizationObject).GetProperty(&quot;Config&quot;);
 				
 				outputPathButton.Clicked += new EventHandler(SelectFolder);
-				assemblyName.Text   = compilerParameters.AssemblyName;
-				outputPath.Text     = compilerParameters.OutputPath;
+				assemblyName.Text   = compilerParameters.OutputAssembly;
+				outputPath.Text     = compilerParameters.OutputDirectory;
 				parameters.Text     = compilerParameters.Parameters;
-				executeCommand.Text = compilerParameters.ExecuteCommand;
+				executeCommand.Text = compilerParameters.ExecuteScript;
  			}
 
 			public bool Store ()
 			{	
-				compilerParameters.AssemblyName   = assemblyName.Text;
-				compilerParameters.OutputPath     = outputPath.Text;
-				compilerParameters.Parameters     = parameters.Text;
-				compilerParameters.ExecuteCommand = executeCommand.Text;
+				compilerParameters.OutputAssembly  = assemblyName.Text;
+				compilerParameters.OutputDirectory = outputPath.Text;
+				compilerParameters.Parameters      = parameters.Text;
+				compilerParameters.ExecuteScript   = executeCommand.Text;
 				return true;
 			}
 			void SelectFolder(object sender, EventArgs e)			

Modified: trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingCompilerServices.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingCompilerServices.cs	2004-04-27 22:43:33 UTC (rev 1527)
+++ trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingCompilerServices.cs	2004-04-27 23:58:51 UTC (rev 1528)
@@ -107,8 +107,8 @@
 		{
 			NemerleParameters cp = (NemerleParameters)project.ActiveConfiguration;
 			
-			return fileUtilityService.GetDirectoryNameWithSeparator(cp.OutputPath)
-					+ cp.AssemblyName + ((int)cp.Target == 0?&quot;.exe&quot;:&quot;.dll&quot;);
+			return fileUtilityService.GetDirectoryNameWithSeparator(cp.OutputDirectory)
+					+ cp.OutputAssembly + ((int)cp.Target == 0?&quot;.exe&quot;:&quot;.dll&quot;);
 		}
 		
 		public ICompilerResult CompileProject(IProject project)
@@ -130,8 +130,8 @@
 						break;
 					}
 
-			if (!Directory.Exists(cp.OutputPath))
-				Directory.CreateDirectory(cp.OutputPath);
+			if (!Directory.Exists(cp.OutputDirectory))
+				Directory.CreateDirectory(cp.OutputDirectory);
 			
 			string args = GetOptionsString(cp) + references + files  + &quot; -o &quot; + GetCompiledOutputName(project);
 			return DoCompilation (args);

Modified: trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs	2004-04-27 22:43:33 UTC (rev 1527)
+++ trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/NemerleBindingExecutionServices.cs	2004-04-27 23:58:51 UTC (rev 1528)
@@ -27,31 +27,26 @@
 			
 			NemerleParameters p = (NemerleParameters)project.ActiveConfiguration;
 			FileUtilityService fus = (FileUtilityService)ServiceManager.Services.GetService(typeof(FileUtilityService));
-			string dir = fus.GetDirectoryNameWithSeparator(p.OutputPath);
 			string exe;
 			
-			if (p.ExecuteCommand == String.Empty)
+			if (p.ExecuteScript == String.Empty)
 			{
 				exe	= &quot;mono --debug&quot;;
 			} else
 			{
-				exe = p.ExecuteCommand;
+				exe = p.ExecuteScript;
 			}
 			
-			exe += &quot; &quot; + p.AssemblyName + &quot;.exe &quot; + p.Parameters;
+			exe += &quot; &quot; + p.OutputAssembly + &quot;.exe &quot; + p.Parameters;
 			
 			try {
-				string currentDir = Directory.GetCurrentDirectory();
-				Directory.SetCurrentDirectory(dir);				
-				
 				ProcessStartInfo psi = new ProcessStartInfo(exe);
-				psi.WorkingDirectory = dir;
+				psi.WorkingDirectory = fus.GetDirectoryNameWithSeparator(p.OutputDirectory);
 				psi.UseShellExecute = false;
 				
 				Process pr = new Process();
 				pr.StartInfo = psi;
 				pr.Start();
-				Directory.SetCurrentDirectory(currentDir);	
 			} catch (Exception) {
 				throw new ApplicationException(&quot;Can not execute&quot;);
 			}

Modified: trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Project/NemerleParameters.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Project/NemerleParameters.cs	2004-04-27 22:43:33 UTC (rev 1527)
+++ trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Project/NemerleParameters.cs	2004-04-27 23:58:51 UTC (rev 1528)
@@ -24,7 +24,7 @@
 			[XmlAttribute(&quot;nostdlib&quot;)]
 			public bool nostdlib            = false;
 			[XmlAttribute(&quot;ot&quot;)]
-			public bool ot                  = true;
+			public bool ot                  = false;
 			[XmlAttribute(&quot;obcm&quot;)]
 			public bool obcm                = true;
 			[XmlAttribute(&quot;oocm&quot;)]
@@ -32,26 +32,12 @@
 			[XmlAttribute(&quot;oscm&quot;)]
 			public bool oscm                = true;
 			
-			[XmlAttribute(&quot;assemblyname&quot;)]
-			public string assemblyname      = String.Empty;
-			[XmlAttribute(&quot;outputpath&quot;)]
-			public string outputpath        = String.Empty;
 			[XmlAttribute(&quot;parameters&quot;)]
 			public string parameters        = String.Empty;
 		}
 		
-		[XmlNodeName(&quot;Execution&quot;)]
-		class Execution
-		{
-			[XmlAttribute(&quot;executecommand&quot;)]
-			public string executecommand    = String.Empty;
-		}
-
-		
 		CodeGeneration codeGeneration = new CodeGeneration();
 		
-		Execution      execution      = new Execution();
-		
 		public CompileTarget Target
 		{
 			get { return codeGeneration.target; }
@@ -88,29 +74,12 @@
 			set { codeGeneration.oscm = value; }
 		}
 		
-		public string AssemblyName
-		{
-			get { return codeGeneration.assemblyname; }
-			set { codeGeneration.assemblyname = value; }
-		}
-		public string OutputPath
-		{
-			get { return codeGeneration.outputpath; }
-			set { codeGeneration.outputpath = value; }
-		}
 		public string Parameters
 		{
 			get { return codeGeneration.parameters; }
 			set { codeGeneration.parameters = value; }
 		}
 		
-		public string ExecuteCommand
-		{
-			get { return execution.executecommand; }
-			set { execution.executecommand = value; }
-		}
-
-	
 		public NemerleParameters()
 		{
 		}

Modified: trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Project/NemerleProject.cs
===================================================================
--- trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Project/NemerleProject.cs	2004-04-27 22:43:33 UTC (rev 1527)
+++ trunk/MonoDevelop/src/AddIns/BackendBindings/NemerleBinding/Project/NemerleProject.cs	2004-04-27 23:58:51 UTC (rev 1528)
@@ -38,8 +38,9 @@
 				
 				foreach (NemerleParameters p in Configurations)
 				{
-					p.OutputPath = info.BinPath + Path.DirectorySeparatorChar + p.Name;
-					p.AssemblyName = Name;					
+					p.OutputDirectory = info.BinPath + Path.DirectorySeparatorChar + p.Name;
+					p.OutputAssembly = Name;
+					p.RunWithWarnings = true;
 				}				
 			}
 		}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001134.html">[Monodevelop-patches-list] r1527 - in trunk/MonoDevelop/src/Main/Base/Gui/Pads: . FileScout
</A></li>
	<LI>Next message: <A HREF="001136.html">[Monodevelop-patches-list] r1529 - in trunk/MonoDevelop/src/AddIns/DisplayBindings/SourceEditor: . Gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1135">[ date ]</a>
              <a href="thread.html#1135">[ thread ]</a>
              <a href="subject.html#1135">[ subject ]</a>
              <a href="author.html#1135">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-patches-list">More information about the Monodevelop-patches-list
mailing list</a><br>
</body></html>
