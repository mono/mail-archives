<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] Memory Leak in Generic Handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20Memory%20Leak%20in%20Generic%20Handler&In-Reply-To=%3C1355154225330-4657719.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001735.html">
   <LINK REL="Next"  HREF="001737.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] Memory Leak in Generic Handler</H1>
    <B>Niknak</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20Memory%20Leak%20in%20Generic%20Handler&In-Reply-To=%3C1355154225330-4657719.post%40n4.nabble.com%3E"
       TITLE="[Mono-aspnet-list] Memory Leak in Generic Handler">nick.pateman at certivox.com
       </A><BR>
    <I>Mon Dec 10 15:43:45 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001735.html">[Mono-aspnet-list] Memory Leak in Generic Handler
</A></li>
        <LI>Next message: <A HREF="001737.html">[Mono-aspnet-list] Register Report Viewer in to Ubuntu Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1736">[ date ]</a>
              <a href="thread.html#1736">[ thread ]</a>
              <a href="subject.html#1736">[ subject ]</a>
              <a href="author.html#1736">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm still working on this issue and have come across the following page...

<A HREF="http://www.mono-project.com/FAQ:_ASP.NET">http://www.mono-project.com/FAQ:_ASP.NET</A>


FAQ wrote*
&gt;<i> Quote:
</I>&gt;<i> 
</I>&gt;<i> Memory Usage
</I>&gt;<i> 
</I>&gt;<i> Why does the memory consumed by the Mono process keep growing?
</I>&gt;<i> 
</I>&gt;<i> Mono currently uses a conservative, non-moving, non-compacting garbage
</I>&gt;<i> collector. This means that the heap is not compacted when memory is
</I>&gt;<i> released. This means that applications can produce memory allocation
</I>&gt;<i> patterns that will effectively make the process grow, just like C, C++,
</I>&gt;<i> Perl, Python applications would.
</I>&gt;<i> 
</I>&gt;<i> It is hence important to not get into patterns that would create these
</I>&gt;<i> holes, for example such a hole could be created if you create a block of
</I>&gt;<i> size SIZE, release it, and then create two blocks of size SIZE/2+1.
</I>&gt;<i> 
</I>&gt;<i> ASP.NET in Mono is particularly vulnerable to this kind of memory problems
</I>&gt;<i> because it is easy for developers to define APIs that transfer large blobs
</I>&gt;<i> of data like entire image files, these would allocate a lot of memory that
</I>&gt;<i> can easily be fragmented.
</I>&gt;<i> 
</I>&gt;<i> A simple solution is to try to write your software in a way that large
</I>&gt;<i> data blocks are not allocated, but instead your application handles them
</I>&gt;<i> in blocks (like writing a &quot;copy&quot; command).
</I>&gt;<i> 
</I>&gt;<i> Is there a better collector in the works?
</I>&gt;<i> 
</I>&gt;<i> Yes, there is work to make a new generational collector under way, but it
</I>&gt;<i> will not be ready for a while. For more information on it, see the
</I>&gt;<i> Generational GC page.
</I>*

As I'm using generic handlers I assume I'm adhering to this anyway, as I'm
writing the request stream directly to disk, unless it's JSON in which I'm
having to parse it of course.  The JSON blobs are tiny so shouldn't result
the memory leaks afaik.

Anyone else experienced this or have any work arounds?

Nick.



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Memory-Leak-in-Generic-Handler-tp4657696p4657719.html">http://mono.1490590.n4.nabble.com/Memory-Leak-in-Generic-Handler-tp4657696p4657719.html</A>
Sent from the Mono - ASP.NET mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001735.html">[Mono-aspnet-list] Memory Leak in Generic Handler
</A></li>
	<LI>Next message: <A HREF="001737.html">[Mono-aspnet-list] Register Report Viewer in to Ubuntu Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1736">[ date ]</a>
              <a href="thread.html#1736">[ thread ]</a>
              <a href="subject.html#1736">[ subject ]</a>
              <a href="author.html#1736">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
