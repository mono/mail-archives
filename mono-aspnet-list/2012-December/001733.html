<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] Memory Leak in Generic Handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20Memory%20Leak%20in%20Generic%20Handler&In-Reply-To=%3C1354889346066-4657696.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001730.html">
   <LINK REL="Next"  HREF="001734.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] Memory Leak in Generic Handler</H1>
    <B>Niknak</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20Memory%20Leak%20in%20Generic%20Handler&In-Reply-To=%3C1354889346066-4657696.post%40n4.nabble.com%3E"
       TITLE="[Mono-aspnet-list] Memory Leak in Generic Handler">nick.pateman at certivox.com
       </A><BR>
    <I>Fri Dec  7 14:09:06 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001730.html">[Mono-aspnet-list] Memory Leak in Generic Handler
</A></li>
        <LI>Next message: <A HREF="001734.html">[Mono-aspnet-list] Memory Leak in Generic Handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1733">[ date ]</a>
              <a href="thread.html#1733">[ thread ]</a>
              <a href="subject.html#1733">[ subject ]</a>
              <a href="author.html#1733">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

I'm using a Generic Handler in my mono application, something which I have
done many times in Windows ASP.NET.  Unfortunately I seem to be experiencing
a rather strange issue with mono that is seemingly causing a memory leak (my
Peak Working Set increases indefinitely until the application crashes with
an Out of Memory exception).

I thought maybe I was leaving some handles open but I'm pretty sure that I
am not (afaik).  I have several payload types being uploaded, the most
noticeable is obviously large amounts of binary data, as the working set
increases much quicker.  I have removed the majority of my code so that it
still functions but just ignores the binary data, unfortunately the leak
still persists.

Is there anything I should know about mono generic asp.net handlers that
differs from Windows?  The code left in my binary upload path, effectively
just does the following,

1.  Parses the URI into its components for RESTful use
2.  Returns a  JSON success blob
3.  Ends the request

Surely my working set shouldn't increase under this circumstance, I would
understand if I were streaming the binary data elsewhere from the request,
but it's being ignored for these requests.

Should I be disposing of the request stream manually?

I'll continue to plug away at it, but any help would be much appreciated!

Niknak.



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Memory-Leak-in-Generic-Handler-tp4657696.html">http://mono.1490590.n4.nabble.com/Memory-Leak-in-Generic-Handler-tp4657696.html</A>
Sent from the Mono - ASP.NET mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001730.html">[Mono-aspnet-list] Memory Leak in Generic Handler
</A></li>
	<LI>Next message: <A HREF="001734.html">[Mono-aspnet-list] Memory Leak in Generic Handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1733">[ date ]</a>
              <a href="thread.html#1733">[ thread ]</a>
              <a href="subject.html#1733">[ subject ]</a>
              <a href="author.html#1733">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
