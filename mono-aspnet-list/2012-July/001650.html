<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] html being stripped from in-page javascript
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20html%20being%20stripped%20from%20in-page%20javascript&In-Reply-To=%3C1342795213612-4650489.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001649.html">
   <LINK REL="Next"  HREF="001651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] html being stripped from in-page javascript</H1>
    <B>Rexx Magnus</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20html%20being%20stripped%20from%20in-page%20javascript&In-Reply-To=%3C1342795213612-4650489.post%40n4.nabble.com%3E"
       TITLE="[Mono-aspnet-list] html being stripped from in-page javascript">deane-mono at rexx.co.uk
       </A><BR>
    <I>Fri Jul 20 14:40:13 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001649.html">[Mono-aspnet-list] How to see debug output from aspx file
</A></li>
        <LI>Next message: <A HREF="001651.html">[Mono-aspnet-list] mod_mono restart graceful?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1650">[ date ]</a>
              <a href="thread.html#1650">[ thread ]</a>
              <a href="subject.html#1650">[ subject ]</a>
              <a href="author.html#1650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've noticed a peculiar glitch - it seems to be related to mono (or mod_mono)
rather than the way apache is handling the file, as I've tested this by
putting the output from a correctly rendered page in as a .htm file and
serving that up and it appears fine. It happens when serving an asp.net page
from apache running on a raspberry pi (debian squeeze arm), but I've also
tested the same pages on a virtual server running the same on an intel
machine and also on an arm based sheevaplug (all same software versions).

I am running the following versions (ask if you need more):
mono-apache-server2 2.6.5-3
mono-runtime 2.6.7-5
libapache2-mod-mono 2.6.3-4


Code as it should be output:

  &lt;script type=&quot;text/javascript&quot;&gt;
        ///You can override these per page if necessary
        //var waitdiv = '&lt;div class=&quot;wait&quot;&gt;#LABEL#&lt;br/&gt; Assets/rotator.gif
&lt;/div&gt;';
        //var errordiv = '&lt;div class=&quot;error&quot;&gt;#LABEL# Unable to
connect&lt;/div&gt;';
        //var sound = '';
-------------------------------------
Incorrect code that gets output:
 &lt;script type=&quot;text/javascript&quot;&gt;
        ///You can override these per page if necessary
        //var waitdiv = '
        ///You ca#LABEL#ide these per page if necessary
        //var waitdiv';
        //var errordiv = '&lt;br/&gt; Asse#LABEL# Unable to connect &lt;/';
        //var sound = 'rdiv = '&lt;div class=&quot;error&quot;&gt;#LABEL#
Unable to connect&lt;/div&gt;';
        //var sound =';

-----------------------------------------------
Further down the same page in the script block
Correct script:

//Open nvp data in new window
                var w = window.open();
                $(w.document.body).html('
' + $site.html() + '
&lt;br/&gt;' + $thisnvp.html());

-----------------------------------------------
Munged script:

//Open nvp data in new window
                var w = window.open();
                $(w.document.body).html('
  ' + $site.html() + ' nvp data ' + $thisnvp.html());

----------------------------------------------

It looks like it's trying to strip out the html from within the javascript
(even when commented out) as though it's attempting to block content that
looks like an injection attack. I have tried disabling compression to see if
it's that causing the behaviour - but it still does the same.

It also does the same if I'm using mod-mono-server4 on the new raspbian
distribution for the raspberry pi, using mono 2.8.10
I'm pretty sure that I've got all of the configurations the same across
machines.



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/html-being-stripped-from-in-page-javascript-tp4650489.html">http://mono.1490590.n4.nabble.com/html-being-stripped-from-in-page-javascript-tp4650489.html</A>
Sent from the Mono - ASP.NET mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001649.html">[Mono-aspnet-list] How to see debug output from aspx file
</A></li>
	<LI>Next message: <A HREF="001651.html">[Mono-aspnet-list] mod_mono restart graceful?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1650">[ date ]</a>
              <a href="thread.html#1650">[ thread ]</a>
              <a href="subject.html#1650">[ subject ]</a>
              <a href="author.html#1650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
