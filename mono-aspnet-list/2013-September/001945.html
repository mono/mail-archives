<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] MVC3 + Razor + XSP4 + .NET 4.5 Tutorial
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20MVC3%20%2B%20Razor%20%2B%20XSP4%20%2B%20.NET%204.5%20Tutorial&In-Reply-To=%3CCAB1r_%2BVM%2B7aV5NUA_T6pdy0%3Dictt5csCYJHc6QtV5RR%2BXnpYQA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001944.html">
   <LINK REL="Next"  HREF="001949.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] MVC3 + Razor + XSP4 + .NET 4.5 Tutorial</H1>
    <B>Daniel Lo Nigro</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20MVC3%20%2B%20Razor%20%2B%20XSP4%20%2B%20.NET%204.5%20Tutorial&In-Reply-To=%3CCAB1r_%2BVM%2B7aV5NUA_T6pdy0%3Dictt5csCYJHc6QtV5RR%2BXnpYQA%40mail.gmail.com%3E"
       TITLE="[Mono-aspnet-list] MVC3 + Razor + XSP4 + .NET 4.5 Tutorial">lists at dan.cx
       </A><BR>
    <I>Thu Sep 12 06:47:11 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="001944.html">[Mono-aspnet-list] MVC3 + Razor + XSP4 + .NET 4.5 Tutorial
</A></li>
        <LI>Next message: <A HREF="001949.html">[Mono-aspnet-list] [Mono] Console application running on Mono 3.2.1 and connected to remote HubConnection is failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1945">[ date ]</a>
              <a href="thread.html#1945">[ thread ]</a>
              <a href="subject.html#1945">[ subject ]</a>
              <a href="author.html#1945">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm using MVC 4 + Razor on Mono 3.0.7 without any problems. I develop in
Visual Studio which adds all the MVC dependencies using NuGet packages.
This means that deployment of an MVC 4 app is easier than MVC 3. I didn't
have to manually copy any files, they're all handled by the regular build
process. The deployment script basically publishes the site into a temp
folder (using the MSBuild target) and then rsyncs this temp folder to the
server. :)

The only gotcha with MVC 4 is that you need to set &quot;Copy Local&quot; of
&quot;Microsoft.Web.Infrastructure.dll&quot; to false, as Mono has its own
implementation.


On Thu, Sep 12, 2013 at 3:18 PM, chris.schamper &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">chris.schamper at gmail.com</A>&gt;wrote:

&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i>      It seems that most tutorials about running MVC3/4 on Mono are centered
</I>&gt;<i> around Mono 2.X and an earlier release of MVC3. Having chased my tail
</I>&gt;<i> entirely too long trying to get a MVC3 Razor stack working, I wanted to
</I>&gt;<i> leave an updated tutorial in the hopes that this would save someone else
</I>&gt;<i> some effort.
</I>&gt;<i>
</I>&gt;<i> OS: Linux Mint 15 32-Bit Mate
</I>&gt;<i> Mono: Mono JIT compiler version 3.2.1 (Debian 3.2.1+dfsg-1~pre1+raring1) *
</I>&gt;<i> Monodevelop: Version 4.1.7 **
</I>&gt;<i> .NET Framework: 4.5
</I>&gt;<i> XSP: Github Tag 3.0.11, ce2f1f5bb9596d92f18492706be4356351409e68
</I>&gt;<i> xsp-3.0.11.zip
</I>&gt;<i> Additional Files:
</I>&gt;<i> Missing dlls from a Windows .NET 4.5 MVC3 App + SHA1:
</I>&gt;<i> c8bcc63d2f05553424877956e4f51b4493ff6790  System.Web.Helpers.dll
</I>&gt;<i> a08b8ffc68482af25ec0bbc41f50f77e1ef70704  System.Web.WebPages.dll
</I>&gt;<i> 5dbf16560da6953ae6e28e8a94115b1ef3b5df50  System.Web.Mvc.dll
</I>&gt;<i> e7b48f758d24bae87ff8dead896c24e79890ca8f  System.Web.WebPages.Razor.dll
</I>&gt;<i> 5d923740f2377298ad917eb9f5bfb45e0b1465fb
</I>&gt;<i>  System.Web.WebPages.Deployment.dll
</I>&gt;<i> 6194d5363bc8cdab62e4f39151a1d1972880b8c7  System.Web.Razor.dll
</I>&gt;<i>
</I>&gt;<i> * I am using the following pre-release PPA:
</I>&gt;<i> <A HREF="https://launchpad.net/~directhex/+archive/monoxide">https://launchpad.net/~directhex/+archive/monoxide</A>
</I>&gt;<i> ** I am using the following Monodevelop PPA:
</I>&gt;<i> <A HREF="https://launchpad.net/~keks9n/+archive/monodevelop-latest">https://launchpad.net/~keks9n/+archive/monodevelop-latest</A>
</I>&gt;<i>
</I>&gt;<i> I start Monodevelop and load the MVC3 Razor template. This template has two
</I>&gt;<i> missing references, System.Web.Helpers.dll and System.Web.WebPages. I add
</I>&gt;<i> these from a donor Windows machine hashes above.
</I>&gt;<i>
</I>&gt;<i> Building the project yields the following error:
</I>&gt;<i> Error CS1705: Assembly `System.Web.Mvc, Version=3.0.0.0, Culture=neutral,
</I>&gt;<i> PublicKeyToken=31bf3856ad364e35' references `System.Web.WebPages,
</I>&gt;<i> Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' which
</I>&gt;<i> has
</I>&gt;<i> a higher version number than imported assembly `System.Web.WebPages,
</I>&gt;<i> Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' (CS1705)
</I>&gt;<i> (ForumExample)
</I>&gt;<i>
</I>&gt;<i> I then replace the template version with the Windows donor version. The
</I>&gt;<i> solution now builds.
</I>&gt;<i>
</I>&gt;<i> I have compiled the latest tagged version of XSP, 3.0.11. I am looking to
</I>&gt;<i> use XSP4 to host the MVC3 Razor .NET 4.5 app. When I run xsp4 against the
</I>&gt;<i> build directory, I get the following error:
</I>&gt;<i>
</I>&gt;<i> Message is Could not load file or assembly 'xsp4, Version=3.0.0.0,
</I>&gt;<i> Culture=neutral, PublicKeyToken=0738eb9f132ed756' or one of its
</I>&gt;<i> dependencies. The system cannot find the file specified.
</I>&gt;<i>
</I>&gt;<i> OK, so off to gacutil:
</I>&gt;<i> sudo gacutil /i xsp4.exe
</I>&gt;<i> sudo gacutil /i Mono.WebServer2.dll
</I>&gt;<i>
</I>&gt;<i> OK, so now XSP4 at least starts:
</I>&gt;<i> xsp4
</I>&gt;<i> Listening on address: 0.0.0.0
</I>&gt;<i> Root directory: /home/chschamper/ForumExample/ForumExample
</I>&gt;<i> Listening on port: 8080 (non-secure)
</I>&gt;<i> Hit Return to stop the server.
</I>&gt;<i> Missing method Start in assembly
</I>&gt;<i>
</I>&gt;<i> /tmp/chschamper-temp-aspnet-0/477cf6c2/assembly/shadow/133f36d7/347ad6c0_2745e017_00000001/System.Web.Mvc.dll,
</I>&gt;<i> type System.Web.WebPages.Razor.PreApplicationStartCode
</I>&gt;<i>
</I>&gt;<i> Looks like there are some issues with one of the donor files. Connecting to
</I>&gt;<i> the server confirms it with an Error 500:
</I>&gt;<i>
</I>&gt;<i> System.IO.FileNotFoundException
</I>&gt;<i> Could not load file or assembly 'System.Web.WebPages.Razor,
</I>&gt;<i> Version=1.0.0.0,
</I>&gt;<i> Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its
</I>&gt;<i> dependencies.
</I>&gt;<i>
</I>&gt;<i> OK, so time to add another donor file, this time
</I>&gt;<i> System.Web.WebPages.Razor.dll.
</I>&gt;<i>
</I>&gt;<i> Rebuid and try xsp again:
</I>&gt;<i> xsp4
</I>&gt;<i> Listening on address: 0.0.0.0
</I>&gt;<i> Root directory: /home/chschamper/ForumExample/ForumExample
</I>&gt;<i> Listening on port: 8080 (non-secure)
</I>&gt;<i> Hit Return to stop the server.
</I>&gt;<i>
</I>&gt;<i> Ok, so no error on startup. Let's see if connecting to it works.
</I>&gt;<i>
</I>&gt;<i> And, no joy with another Error 500:
</I>&gt;<i> System.TypeLoadException
</I>&gt;<i> Could not load type 'System.Web.WebPages.Razor.WebCodeRazorHost' from
</I>&gt;<i> assembly 'System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral,
</I>&gt;<i> PublicKeyToken=31bf3856ad364e35'.
</I>&gt;<i>
</I>&gt;<i> I went on a hunch since there is only one file from that series missing
</I>&gt;<i> from
</I>&gt;<i> the donor set: System.Web.WebPages.Deployment.dll
</I>&gt;<i>
</I>&gt;<i> Now to continue until the necessary donor files are present:
</I>&gt;<i> System.IO.FileNotFoundException
</I>&gt;<i> Could not load file or assembly 'System.Web.Razor, Verselpon=1.0.0.0,
</I>&gt;<i> Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its
</I>&gt;<i> dependencies.
</I>&gt;<i>
</I>&gt;<i>  Add this file and try xsp again.
</I>&gt;<i>
</I>&gt;<i> Success!
</I>&gt;<i>
</I>&gt;<i> Welcome to ASP.NET MVC on Mono!
</I>&gt;<i>
</I>&gt;<i> I hope this helps someone else along the way.
</I>&gt;<i>
</I>&gt;<i> - Chris
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://mono.1490590.n4.nabble.com/MVC3-Razor-XSP4-NET-4-5-Tutorial-tp4660852.html">http://mono.1490590.n4.nabble.com/MVC3-Razor-XSP4-NET-4-5-Tutorial-tp4660852.html</A>
</I>&gt;<i> Sent from the Mono - ASP.NET mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-aspnet-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">Mono-aspnet-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">http://lists.ximian.com/mailman/listinfo/mono-aspnet-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20130912/faffb2d8/attachment.html">http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20130912/faffb2d8/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001944.html">[Mono-aspnet-list] MVC3 + Razor + XSP4 + .NET 4.5 Tutorial
</A></li>
	<LI>Next message: <A HREF="001949.html">[Mono-aspnet-list] [Mono] Console application running on Mono 3.2.1 and connected to remote HubConnection is failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1945">[ date ]</a>
              <a href="thread.html#1945">[ thread ]</a>
              <a href="subject.html#1945">[ subject ]</a>
              <a href="author.html#1945">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
