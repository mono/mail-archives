<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] How to make mvc4 fastcgi ngix application	responsible
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20How%20to%20make%20mvc4%20fastcgi%20ngix%20application%0A%09responsible&In-Reply-To=%3C932B2276A11D43B8916EA9BFC88860E0%40dell2%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001998.html">
   <LINK REL="Next"  HREF="002001.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] How to make mvc4 fastcgi ngix application	responsible</H1>
    <B>Andrus</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20How%20to%20make%20mvc4%20fastcgi%20ngix%20application%0A%09responsible&In-Reply-To=%3C932B2276A11D43B8916EA9BFC88860E0%40dell2%3E"
       TITLE="[Mono-aspnet-list] How to make mvc4 fastcgi ngix application	responsible">kobruleht2 at hot.ee
       </A><BR>
    <I>Sun Dec  8 22:50:38 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="001998.html">[Mono-aspnet-list] How to use nginx with mvc 4
</A></li>
        <LI>Next message: <A HREF="002001.html">[Mono-aspnet-list] System.Web.Extensions DLL errors while serving	ASP.NET pages from mod_mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1999">[ date ]</a>
              <a href="thread.html#1999">[ thread ]</a>
              <a href="subject.html#1999">[ subject ]</a>
              <a href="author.html#1999">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Simple MVC4 / Mono 3.2.1 application is running in Debian with Nginx and 
mono-fastcgi-4 server.

In browser F5 key is hold down for 30 seconds.
After that there is long delay, browser shows page load icon.
After delay message

504 Gateway Time-out
nginx/0.7.67

appears

and top command (output below) shows that mono fastcgi server takes 200% cpu 
forever (2 cores).
Only way to stop this is to kill mono fastcgi server manually and manually 
to restart it

How to make mono fastcgi to return pages immediately and not use so much cpu 
?

If same application is hosted with Apache and mod_mono , holding and 
releasing F5 key in browser returns
page immediately and cpu usage goes to 0 immediately after F5 is released in 
browser.



top - 00:40:38 up  1:43,  3 users,  load average: 16.49, 15.92, 15.35
Tasks:  59 total,   1 running,  58 sleeping,   0 stopped,   0 zombie
Cpu(s): 34.5%us, 65.5%sy,  0.0%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.0%si, 
0.0%st
Mem:   2097152k total,   744828k used,  1352324k free,        0k buffers
Swap:        0k total,        0k used,        0k free,   120120k cached

  PID  VIRT  RES  SHR %CPU %MEM    TIME+  COMMAND
4366  500m 121m  21m  198  5.9   6:24.45 /opt/mono-3.2/bin/mono 
/opt/mono-3.2/lib/mono/4.5/fastcgi- ....

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001998.html">[Mono-aspnet-list] How to use nginx with mvc 4
</A></li>
	<LI>Next message: <A HREF="002001.html">[Mono-aspnet-list] System.Web.Extensions DLL errors while serving	ASP.NET pages from mod_mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1999">[ date ]</a>
              <a href="thread.html#1999">[ thread ]</a>
              <a href="subject.html#1999">[ subject ]</a>
              <a href="author.html#1999">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
