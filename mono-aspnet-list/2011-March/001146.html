<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] Why the LogOn action does not work correct?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Why%20the%20LogOn%20action%20does%20not%20work%20correct%3F&In-Reply-To=1298941133318-3329073.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001145.html">
   <LINK REL="Next"  HREF="001147.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] Why the LogOn action does not work correct?</H1>
    <B>Daniel J. Summers</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Why%20the%20LogOn%20action%20does%20not%20work%20correct%3F&In-Reply-To=1298941133318-3329073.post%40n4.nabble.com"
       TITLE="[Mono-aspnet-list] Why the LogOn action does not work correct?">daniel.summers.2415 at gmail.com
       </A><BR>
    <I>Tue Mar  1 07:56:36 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001145.html">[Mono-aspnet-list] JQuery validation
</A></li>
        <LI>Next message: <A HREF="001147.html">[Mono-aspnet-list] Why the LogOn action does not work correct?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1146">[ date ]</a>
              <a href="thread.html#1146">[ thread ]</a>
              <a href="subject.html#1146">[ subject ]</a>
              <a href="author.html#1146">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Mar 1, 2011 at 12:58 AM, hjf1223 &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">hjf1223 at gmail.com</A>&gt; wrote:

&gt;<i> Download the sample site from :
</I>&gt;<i> <A HREF="http://files.cnblogs.com/hjf1223/Mono_MVC3.zip">http://files.cnblogs.com/hjf1223/Mono_MVC3.zip</A> Mono_MVC3.zip
</I>&gt;<i>
</I>&gt;<i> I have try it both on Windows(Nginx+FastCGI_Server) and
</I>&gt;<i> openSUSE(Apache+mod_mono), both of them have same result.
</I>&gt;<i>
</I>
Using that ZIP, I got the same thing using Mono 2.10 (version 4.0.30319.1)
and xsp4.  There does seem to be something amiss there.  I tried URLs like
?returnUrl=/Home and /LogOn/Home, but they don't seem to fix it either.

Since I don't have the source, can you edit Controllers/LogOnController.cs*
and remove the second parameter (return URL) under the [HttpPost]
annotation?  That may or may not break the &quot;you asked for this page, but you
have to be logged in; we'll redirect you to login, but send you back here
when you log in&quot; functionality, but I'd be curious as to whether that makes
it work.  Also, check Models/LogOnModel.cs* and see if it has a ReturnURL
property; if it does, maybe you don't even need that second parameter at
all.

FWIW, I'm working on similar functionality now; what I'm doing is sticking
the return URL in the session before redirecting to the login page.  Then,
once the user logs in, if the session has a URL, they get redirected there;
otherwise, they get redirected to ~/Home.  Now that I've built Mono 2.10
(thanks for the prompting), I'll be able to see if that works or not.

* These file names are guesses, but they should be right since MVC uses
names for auto-routing.

-- 
*Daniel J. Summers*
*Owner, DJS Consulting*
E-mail &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">daniel.summers.2415 at gmail.com</A>&gt; &#8226; Website &lt;<A HREF="http://djs-consulting.com">http://djs-consulting.com</A>&gt;
 &#8226; Support &lt;<A HREF="http://support.djs-consulting.com">http://support.djs-consulting.com</A>&gt; &#8226; Tech
Blog&lt;<A HREF="http://techblog.djs-consulting.com">http://techblog.djs-consulting.com</A>&gt;

GEEKCODE 3.12 GCS/IT d s-:+ a C++ P--- L++ E--- W++ N++ o? K- w !O M--
V PS+ PE++ Y? PGP- t+ 5? X+ R* tv b+ DI++ D+ G- e&lt;++ h---- r+++ y++++
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20110301/8e786706/attachment.html">http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20110301/8e786706/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001145.html">[Mono-aspnet-list] JQuery validation
</A></li>
	<LI>Next message: <A HREF="001147.html">[Mono-aspnet-list] Why the LogOn action does not work correct?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1146">[ date ]</a>
              <a href="thread.html#1146">[ thread ]</a>
              <a href="subject.html#1146">[ subject ]</a>
              <a href="author.html#1146">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
