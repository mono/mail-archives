<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] Error parsing Request Headers in FastCGI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Error%20parsing%20Request%20Headers%20in%20FastCGI&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000883.html">
   <LINK REL="Next"  HREF="000909.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] Error parsing Request Headers in FastCGI</H1>
    <B>Jesse Pasichnyk</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Error%20parsing%20Request%20Headers%20in%20FastCGI&In-Reply-To="
       TITLE="[Mono-aspnet-list] Error parsing Request Headers in FastCGI">jesse at pasichnyk.net
       </A><BR>
    <I>Wed Jul 21 16:36:16 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000883.html">[Mono-aspnet-list] DLL not found
</A></li>
        <LI>Next message: <A HREF="000909.html">[Mono-aspnet-list] Skip examples during xsp installation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#907">[ date ]</a>
              <a href="thread.html#907">[ thread ]</a>
              <a href="subject.html#907">[ subject ]</a>
              <a href="author.html#907">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Hi, 

I am running a mono based service (single .ashx) and from time to
time the request errors when it try to read the request headers. The error
seems to be a string manipulation error at the fastcgi level (lighttpd +
fastcgi). 

System.ArgumentOutOfRangeException: startIndex + length &gt;
this.lengthParameter name: length at System.String.Substring (Int32
startIndex, Int32 length) [0x00000] in :0 at
Mono.WebServer.FastCgi.WorkerRequest.ReformatHttpHeader (System.String
header) [0x00000] in :0 at
Mono.WebServer.FastCgi.WorkerRequest.GetUnknownRequestHeaders () [0x00000]
in :0 at Mono.WebServer.FastCgi.WorkerRequest.GetKnownRequestHeader (Int32
index) [0x00000] in :0 at System.Web.HeadersCollection.InsertInfo ()
[0x00000] in :0 at System.Web.BaseParamsCollection.LoadInfo () [0x00000] in
:<i>0 at System.Web.BaseParamsCollection.GetEnumerator  
</I>
Is there a known bug
there? 99.x% of the requests come through just fine, it must just be
clients with malformed headers (broken clients, or clients trying to cause
issues...) that are erroring. I'd think that the fastcgi layer in this case
would still return what headers are valid, and disregard anything else.


I'm using Mono 2.6.4. 

Thanks, 

Jesse
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20100721/0b5ed8b6/attachment.html">http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20100721/0b5ed8b6/attachment.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000883.html">[Mono-aspnet-list] DLL not found
</A></li>
	<LI>Next message: <A HREF="000909.html">[Mono-aspnet-list] Skip examples during xsp installation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#907">[ date ]</a>
              <a href="thread.html#907">[ thread ]</a>
              <a href="subject.html#907">[ subject ]</a>
              <a href="author.html#907">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
