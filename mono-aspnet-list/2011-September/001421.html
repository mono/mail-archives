<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] Mapping route values after first POST
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Mapping%20route%20values%20after%20first%20POST&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001420.html">
   <LINK REL="Next"  HREF="001422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] Mapping route values after first POST</H1>
    <B>gajcz</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Mapping%20route%20values%20after%20first%20POST&In-Reply-To="
       TITLE="[Mono-aspnet-list] Mapping route values after first POST">gajczewski at gmail.com
       </A><BR>
    <I>Wed Sep 28 00:00:00 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001420.html">[Mono-aspnet-list] Code Problem
</A></li>
        <LI>Next message: <A HREF="001422.html">[Mono-aspnet-list] i18n of ASP.NET MVC Application with Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1421">[ date ]</a>
              <a href="thread.html#1421">[ thread ]</a>
              <a href="subject.html#1421">[ subject ]</a>
              <a href="author.html#1421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I found a strange problem developing MVC 3 project. Since I implemented
signing-in mechanism the rest of my website started to crash.
When I'm not signed-in everything works fine, but after I fill and post
LogOn form I'm getting an exception on any page uses route values (e.g.
/Home/About/*1*). It goes:

*&quot;The parameters dictionary contains a null entry for parameter 'id' of
non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult
About(Int32)' in 'TestApp.Controllers.HomeController'. An optional parameter
must be a reference type, a nullable type, or be declared as an optional
parameter. Parameter name: parameters&quot;*

Searching for a reason I created new ASP.NET MVC 3 Web Application in Visual
Studio and I made only 3 simple changes:

*1*. I changed AccountController.LogOn Post method to redirect to
Home/Index:

*public ActionResult LogOn(LogOnModel model)
{
    return RedirectToAction(&quot;Index&quot;, &quot;Home&quot;);
}*

*2*. I added id parameter to Home/About:

*public ActionResult About(int id)
{
    return View();
}
*
*3*. I changed link to About in _Layout.cshtml to:

*@Html.ActionLink(&quot;About&quot;, &quot;About&quot;, &quot;Home&quot;, new { id = 1 }, null)*


After these changes (+ adding some references for Linux) the application
crashes on Linux but works on Windows.
1) Home -&gt; LogOn -&gt; POST -&gt; About (crash)
2) Home -&gt; About -&gt; LogOn - &gt; POST (model is null :|) -&gt; About (works) -&gt;
...

I removed the 'id' parameter of Action method and set it by:
var id = Convert.ToInt32(RouteData.Values[&quot;id&quot;]);
and it works, but it's not a solution to remove all parameters (not only
simple 'int') from controllers' actions.

This is really strange for me. Can anyone confirm this behaviour or deny?
Maybe I've got something wrong with my Linux configuration or with these
references...? Please help.

Versions I use: 
- OpenSUSE 11.3 (from vmware image)
- Mono 2.10.2 (default)

--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Mapping-route-values-after-first-POST-tp3849969p3849969.html">http://mono.1490590.n4.nabble.com/Mapping-route-values-after-first-POST-tp3849969p3849969.html</A>
Sent from the Mono - ASP.NET mailing list archive at Nabble.com.
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001420.html">[Mono-aspnet-list] Code Problem
</A></li>
	<LI>Next message: <A HREF="001422.html">[Mono-aspnet-list] i18n of ASP.NET MVC Application with Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1421">[ date ]</a>
              <a href="thread.html#1421">[ thread ]</a>
              <a href="subject.html#1421">[ subject ]</a>
              <a href="author.html#1421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
