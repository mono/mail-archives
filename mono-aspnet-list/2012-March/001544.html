<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] How to backup PostgreSql database from browser	in MVC2 application on Mono in Linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20How%20to%20backup%20PostgreSql%20database%20from%20browser%0A%09in%20MVC2%20application%20on%20Mono%20in%20Linux&In-Reply-To=%3C6B13246C6EF849C19B24AD84E319D7EF%40dell2%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001543.html">
   <LINK REL="Next"  HREF="001545.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] How to backup PostgreSql database from browser	in MVC2 application on Mono in Linux</H1>
    <B>Andrus</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20How%20to%20backup%20PostgreSql%20database%20from%20browser%0A%09in%20MVC2%20application%20on%20Mono%20in%20Linux&In-Reply-To=%3C6B13246C6EF849C19B24AD84E319D7EF%40dell2%3E"
       TITLE="[Mono-aspnet-list] How to backup PostgreSql database from browser	in MVC2 application on Mono in Linux">kobruleht2 at hot.ee
       </A><BR>
    <I>Fri Mar 23 18:45:53 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001543.html">[Mono-aspnet-list] Populating gridview from SQLServer
</A></li>
        <LI>Next message: <A HREF="001545.html">[Mono-aspnet-list] How to backup PostgreSql database from browser in MVC2 application on Mono in Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1544">[ date ]</a>
              <a href="thread.html#1544">[ thread ]</a>
              <a href="subject.html#1544">[ subject ]</a>
              <a href="author.html#1544">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I created Mono MVC2 application to backup database from browser.
pg_dump runs but looks like it is aborted. apache error_log contains its output ending in middle of line.

After some time of work exception Thread was being aborted occurs (whole error message is below).

How to fix or diagnose it so that backup copy can saved from brower over internet ?

Andrus.


[Authorize]
public class BackupController : ControllerBase
{
   [AcceptVerbs(HttpVerbs.Get)]
   public ActionResult Backup()
   {
            var pinfo = new ProcessStartInfo();
            var fn = &quot;backup.backup&quot;;
            pinfo.Arguments = &quot; -ib -Z6 -f \&quot;&quot; + fn + &quot;\&quot; -Fc -h \&quot;&quot; + &quot;myserver&quot; + &quot;\&quot; -U \&quot;&quot; +
                &quot;postgres&quot; + &quot; \&quot;&quot; + &quot;mydb&quot; + &quot;\&quot;&quot;;
            pinfo.FileName = &quot;/usr/bin/pg_dump&quot;;
            pinfo.UseShellExecute = false;
            using (var process = new Process())
            {
                process.EnableRaisingEvents = true;
                process.StartInfo = pinfo;
                process.Start();
                while (!process.HasExited)
                    Thread.Sleep(2000);
                process.WaitForExit();
                if (process.ExitCode!=0)
                  throw new Exception(&quot;error&quot;);
                process.Close();
            }
            Response.ClearContent();
            Response.WriteFile(fn);
            Response.End();
            System.IO.File.Delete(fn);
            return null;
        }
}


Server Error in '/myapp' Application
--------------------------------------------------------------------------------

Thread was being aborted
Description: HTTP 500. Error processing request.
Stack Trace: 

System.Threading.ThreadAbortException: Thread was being aborted
  at System.Web.HttpApplication.async_handler_complete_cb (IAsyncResult ar) [0x0002d] in /usr/src/redhat/BUILD/mono-2.10.2/mcs/class/System.Web/System.Web/HttpApplication.cs:1010 
  at System.Web.Mvc.Async.AsyncResultWrapper+WrappedAsyncResult`1[System.Web.Mvc.Async.AsyncVoid].Begin (System.AsyncCallback callback, System.Object state, Int32 timeout) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Web.Mvc.Async.AsyncResultWrapper.BeginSynchronous[AsyncVoid] (System.AsyncCallback callback, System.Object state, System.Func`1 func, System.Object tag) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Web.Mvc.Async.AsyncResultWrapper.BeginSynchronous (System.AsyncCallback callback, System.Object state, System.Action action, System.Object tag) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Web.Mvc.MvcHandler.BeginProcessRequest (System.Web.HttpContextBase httpContext, System.AsyncCallback callback, System.Object state) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Web.Mvc.MvcHandler.BeginProcessRequest (System.Web.HttpContext httpContext, System.AsyncCallback callback, System.Object state) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest (System.Web.HttpContext context, System.AsyncCallback cb, System.Object extraData) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Web.HttpApplication+&lt;Pipeline&gt;c__Iterator6.MoveNext () [0x00d42] in /usr/src/redhat/BUILD/mono-2.10.2/mcs/class/System.Web/System.Web/HttpApplication.cs:1365 
  at System.Web.HttpApplication.Tick () [0x00000] in /usr/src/redhat/BUILD/mono-2.10.2/mcs/class/System.Web/System.Web/HttpApplication.cs:932  

--------------------------------------------------------------------------------
Version information: Mono Runtime Version: 2.10.2 (tarball Mon Apr 18 18:57:39 UTC 2011); ASP.NET Version: 2.0.50727.1433
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20120323/0648fabf/attachment.html">http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20120323/0648fabf/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001543.html">[Mono-aspnet-list] Populating gridview from SQLServer
</A></li>
	<LI>Next message: <A HREF="001545.html">[Mono-aspnet-list] How to backup PostgreSql database from browser in MVC2 application on Mono in Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1544">[ date ]</a>
              <a href="thread.html#1544">[ thread ]</a>
              <a href="subject.html#1544">[ subject ]</a>
              <a href="author.html#1544">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
