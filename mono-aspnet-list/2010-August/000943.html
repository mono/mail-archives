<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] How for force asmx web service to generate	proper wsdl file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20How%20for%20force%20asmx%20web%20service%20to%20generate%0A%09proper%20wsdl%20file&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000941.html">
   <LINK REL="Next"  HREF="000944.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] How for force asmx web service to generate	proper wsdl file</H1>
    <B>Andrus</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20How%20for%20force%20asmx%20web%20service%20to%20generate%0A%09proper%20wsdl%20file&In-Reply-To="
       TITLE="[Mono-aspnet-list] How for force asmx web service to generate	proper wsdl file">kobruleht2 at hot.ee
       </A><BR>
    <I>Mon Aug 23 12:38:32 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000941.html">[Mono-aspnet-list] Mono 2.4 Switching ASP.Net 2.0 to 3.5 System.Reflection.ReflectionTypeLoadException
</A></li>
        <LI>Next message: <A HREF="000944.html">[Mono-aspnet-list] SetEndOfSendNotification not being called
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#943">[ date ]</a>
              <a href="thread.html#943">[ thread ]</a>
              <a href="subject.html#943">[ subject ]</a>
              <a href="author.html#943">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>ASMX web service is defined as

namespace MyApp.Service
{
    [WebService(Namespace = &quot;MyNsp1&quot;)]
    [ServiceContract(Name = &quot;Name&quot;, Namespace = <A HREF="http://mycomp.com">http://mycomp.com</A>)]
    [ServiceBehavior(IncludeExceptionDetailInFaults = true)]
    [AspNetCompatibilityRequirements(RequirementsMode = 
AspNetCompatibilityRequirementsMode.Allowed)]   // required to get caller ip 
address
    public sealed partial class  MyService: WebService {
......

}

Class called from service method refers types using only from type 
parameters:

namespace MyApp.Service
{
    sealed class WholeMenuBuilder : MenuBuilder
    {
        internal void Build()
        {
            MenuBuilder listMenu = new MenuBuilder();
            listMenu.Add&lt;Bilkaib&gt;();
            listMenu.Add&lt;Customer&gt;();
.....


Mono 2.4 ASMX proxy generates WSDL file for those types without namespace 
qualifier:

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-16&quot;?&gt;
&lt;xs:schema elementFormDefault=&quot;qualified&quot; 
xmlns:xs=&quot;<A HREF="http://www.w3.org/2001/XMLSchema&quot;">http://www.w3.org/2001/XMLSchema&quot;</A>&gt;
  &lt;xs:complexType name=&quot;EntityBase&quot;/&gt;
  &lt;xs:complexType name=&quot;Bilkaib&quot;&gt;
    &lt;xs:complexContent mixed=&quot;false&quot;&gt;
      &lt;xs:extension base=&quot;EntityBase&quot;&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot; name=&quot;Adoknr&quot; 
type=&quot;xs:string&quot;/&gt;
..

This violates standard as noted in proxy page:

R2105: All xsd:schema elements contained in a wsdl:types element of a 
DESCRIPTION MUST have a targetNamespace attribute with a valid and non-null 
value, UNLESS the xsd:schema element has xsd:import and/or xsd:annotation as 
its only child element(s)
Schema '', in Service Description 'MyNsp1'

How to make Mono generated WSDL standard compatible ?
Not sure is this caused by using type only as generic parameter or by 
something other.

Andrus.

WSDL file generated by VS2010 includes namespaces for those types:

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;wsdl:definitions xmlns:soap=&quot;<A HREF="http://schemas.xmlsoap.org/wsdl/soap/&quot;">http://schemas.xmlsoap.org/wsdl/soap/&quot;</A> 
xmlns:tm=&quot;<A HREF="http://microsoft.com/wsdl/mime/textMatching/&quot;">http://microsoft.com/wsdl/mime/textMatching/&quot;</A> 
xmlns:soapenc=&quot;<A HREF="http://schemas.xmlsoap.org/soap/encoding/&quot;">http://schemas.xmlsoap.org/soap/encoding/&quot;</A> 
xmlns:mime=&quot;<A HREF="http://schemas.xmlsoap.org/wsdl/mime/&quot;">http://schemas.xmlsoap.org/wsdl/mime/&quot;</A> xmlns:tns=&quot;MyNsp1&quot; 
xmlns:s=&quot;<A HREF="http://www.w3.org/2001/XMLSchema&quot;">http://www.w3.org/2001/XMLSchema&quot;</A> 
xmlns:soap12=&quot;<A HREF="http://schemas.xmlsoap.org/wsdl/soap12/&quot;">http://schemas.xmlsoap.org/wsdl/soap12/&quot;</A> 
xmlns:http=&quot;<A HREF="http://schemas.xmlsoap.org/wsdl/http/&quot;">http://schemas.xmlsoap.org/wsdl/http/&quot;</A> targetNamespace=&quot;MyNsp1&quot; 
xmlns:wsdl=&quot;<A HREF="http://schemas.xmlsoap.org/wsdl/&quot;">http://schemas.xmlsoap.org/wsdl/&quot;</A>&gt;
...
 &lt;s:complexType name=&quot;Bilkaib&quot;&gt;
 &lt;s:complexContent mixed=&quot;false&quot;&gt;
 &lt;s:extension base=&quot;tns:EntityBase&quot;&gt;
 &lt;s:sequence&gt;
  &lt;s:element minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot; name=&quot;Adoknr&quot; type=&quot;s:string&quot; /&gt;
..

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000941.html">[Mono-aspnet-list] Mono 2.4 Switching ASP.Net 2.0 to 3.5 System.Reflection.ReflectionTypeLoadException
</A></li>
	<LI>Next message: <A HREF="000944.html">[Mono-aspnet-list] SetEndOfSendNotification not being called
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#943">[ date ]</a>
              <a href="thread.html#943">[ thread ]</a>
              <a href="subject.html#943">[ subject ]</a>
              <a href="author.html#943">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
