<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] Socket error sending secured mail.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Socket%20error%20sending%20secured%20mail.&In-Reply-To=huatnf%24dt9%241%40dough.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000793.html">
   <LINK REL="Next"  HREF="000795.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] Socket error sending secured mail.</H1>
    <B>APS</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Socket%20error%20sending%20secured%20mail.&In-Reply-To=huatnf%24dt9%241%40dough.gmane.org"
       TITLE="[Mono-aspnet-list] Socket error sending secured mail.">dev.malst at apsystems.it
       </A><BR>
    <I>Mon Jun  7 05:39:17 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000793.html">[Mono-aspnet-list] Socket error sending secured mail.
</A></li>
        <LI>Next message: <A HREF="000795.html">[Mono-aspnet-list] Socket error sending secured mail.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#794">[ date ]</a>
              <a href="thread.html#794">[ thread ]</a>
              <a href="subject.html#794">[ subject ]</a>
              <a href="author.html#794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A step ahead, maybe is useful for someone else.
I found that the connection refused was due to the fact that smtpmail 
does not read the field &quot; 
<A HREF="http://schemas.microsoft.com/cdo/configuration/smtpserver&quot;">http://schemas.microsoft.com/cdo/configuration/smtpserver&quot;</A> but it 
uses only the SmtpMail.SmtpServer property to set the server so my 
old code always connect to localhost.
Fixed that I've the same behavior in system.web.mail and 
system.net.mail, the connection to 465 is made but it waits 
indefinitely, I've to restart apache; connection to 587 complains 
about the certificate so I need to update system.security.

I thought that the connection to 465 fails in MS.NET because it only 
supports the mode where &quot;the SMTP session begins on an unencrypted 
channel, then a STARTTLS command is issued by the client to the 
server to switch to secure communication using SSL.&quot;.
I'm investigating about the server but if the server only accept 
implicit SSL (the second one) in MS.NET I've the possibility to use 
system.web.mail, in Mono it seems that I've no chance. There's some workaround?

At 15.05 04/06/2010, you wrote:
&gt;<i>On 04.06.2010 14:43, APS wrote:
</I>&gt;<i> &gt; So we are back at the beginning. How can I debug traffic to see which
</I>&gt;<i> &gt; connection to which ip and port is made?
</I>&gt;<i>
</I>&gt;<i>This was solely your choice. No one is using System.Web.Mail
</I>&gt;<i>nowadays, but if you feel like wanting to use code that was last
</I>&gt;<i>modified at 2007-12-13, go for it.
</I>&gt;<i>
</I>&gt;<i>The usual suspects when it comes to traffic monitoring are
</I>&gt;<i>
</I>&gt;<i>tcpdump
</I>&gt;<i>wireshark
</I>&gt;<i>netstat
</I>&gt;<i>
</I>&gt;<i>Good luck!
</I>&gt;<i>
</I>&gt;<i>Robert
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; At 12.49 04/06/2010, you wrote:
</I>&gt;<i> &gt;&gt; On 04.06.2010 12:36, APS wrote:
</I>&gt;<i> &gt;&gt;&gt; Ok, gmail is only for testing and need to use another server that I
</I>&gt;<i> &gt;&gt;&gt; omitted to be more &quot;international&quot;, the real server is
</I>&gt;<i> &gt;&gt;&gt; sendm.cert.legalmail.it, how can I understand if it use the same new
</I>&gt;<i> &gt;&gt;&gt; type of certificate?
</I>&gt;<i> &gt;&gt;&gt; With the old system.security and new certificate I should obtain a
</I>&gt;<i> &gt;&gt;&gt; connection refused?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &quot;Connection refused&quot; usually means that you're connecting
</I>&gt;<i> &gt;&gt; to the wrong port. This is independent of Mono.Security
</I>&gt;<i> &gt;&gt; or the mailer variant (supposing that they are bug free).
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Robert
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Mono-aspnet-list mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">Mono-aspnet-list at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">http://lists.ximian.com/mailman/listinfo/mono-aspnet-list</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; --
</I>&gt;<i> &gt;&gt; Il messaggio e' stato analizzato alla ricerca di virus o
</I>&gt;<i> &gt;&gt; contenuti pericolosi da MailScanner, ed e'
</I>&gt;<i> &gt;&gt; risultato non infetto.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mono-aspnet-list mailing list
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">Mono-aspnet-list at lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">http://lists.ximian.com/mailman/listinfo/mono-aspnet-list</A>
</I>&gt;<i>
</I>&gt;<i>--
</I>&gt;<i>Il messaggio e' stato analizzato alla ricerca di virus o
</I>&gt;<i>contenuti pericolosi da MailScanner, ed e'
</I>&gt;<i>risultato non infetto.
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20100607/61c134ce/attachment.html">http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20100607/61c134ce/attachment.html</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000793.html">[Mono-aspnet-list] Socket error sending secured mail.
</A></li>
	<LI>Next message: <A HREF="000795.html">[Mono-aspnet-list] Socket error sending secured mail.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#794">[ date ]</a>
              <a href="thread.html#794">[ thread ]</a>
              <a href="subject.html#794">[ subject ]</a>
              <a href="author.html#794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
