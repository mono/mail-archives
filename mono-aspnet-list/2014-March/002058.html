<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] Problem With Mono + Apache2 with Mod-Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20Problem%20With%20Mono%20%2B%20Apache2%20with%20Mod-Mono&In-Reply-To=%3CCAK6LAGHXPjMT0bX34TA%3Dk%3DHbmqLaMBmi3efqyHdPQBpf-oYm2Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002055.html">
   <LINK REL="Next"  HREF="002059.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] Problem With Mono + Apache2 with Mod-Mono</H1>
    <B>miniBill</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-aspnet-list%5D%20Problem%20With%20Mono%20%2B%20Apache2%20with%20Mod-Mono&In-Reply-To=%3CCAK6LAGHXPjMT0bX34TA%3Dk%3DHbmqLaMBmi3efqyHdPQBpf-oYm2Q%40mail.gmail.com%3E"
       TITLE="[Mono-aspnet-list] Problem With Mono + Apache2 with Mod-Mono">cmt.minibill at gmail.com
       </A><BR>
    <I>Fri Mar 28 12:17:25 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="002055.html">[Mono-aspnet-list] Problem With Mono + Apache2 with Mod-Mono
</A></li>
        <LI>Next message: <A HREF="002059.html">[Mono-aspnet-list] Problem With Mono + Apache2 with Mod-Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2058">[ date ]</a>
              <a href="thread.html#2058">[ thread ]</a>
              <a href="subject.html#2058">[ subject ]</a>
              <a href="author.html#2058">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Why are you using a 2.10 mod_mono?
Il 28/mar/2014 13:06 &quot;Marcos Junior&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">junalmeida at gmail.com</A>&gt; ha scritto:

&gt;<i> I'm trying to configure my MVC ASP-NET 4 application with mod_mono and
</I>&gt;<i> apache2.
</I>&gt;<i>
</I>&gt;<i> I can successfully run the application when the machine comes from a
</I>&gt;<i> reboot (or restarting services and clearing temp files). All works fine.
</I>&gt;<i>
</I>&gt;<i> The problem is when I try to recompile the binary and replace it on the
</I>&gt;<i> production server's bin folder, apache stops responding. Browser seats
</I>&gt;<i> waiting for timeout. The mono-ctrl handler also stops responding. I cannot
</I>&gt;<i> find any useful logs.
</I>&gt;<i>
</I>&gt;<i> Thanks for helping.
</I>&gt;<i>
</I>&gt;<i> Here goes my settings, app versions and some logs.
</I>&gt;<i>
</I>&gt;<i> # apache2 -v
</I>&gt;<i> Server version: Apache/2.4.6 (Ubuntu)
</I>&gt;<i> Server built:   Dec  5 2013 18:32:22
</I>&gt;<i>
</I>&gt;<i> # mono -V
</I>&gt;<i> Mono JIT compiler version 3.2.8 (Debian 3.2.8+dfsg-1~pre1)
</I>&gt;<i> Copyright (C) 2002-2014 Novell, Inc, Xamarin Inc and Contributors.
</I>&gt;<i> www.mono-project.com
</I>&gt;<i>         TLS:           __thread
</I>&gt;<i>         SIGSEGV:       altstack
</I>&gt;<i>         Notifications: epoll
</I>&gt;<i>         Architecture:  amd64
</I>&gt;<i>         Disabled:      none
</I>&gt;<i>         Misc:          softdebug
</I>&gt;<i>         LLVM:          supported, not enabled.
</I>&gt;<i>         GC:            sgen
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> # uname -a
</I>&gt;<i> Linux ip-172-31-22-67 3.11.0-18-generic #32-Ubuntu SMP Tue Feb 18 21:11:14
</I>&gt;<i> UTC 2014 x86_64 x86_64 x86_64 GNU/Linux
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> # ls /etc/apache2/mods-enabled/
</I>&gt;<i> access_compat.load  authn_file.load  autoindex.load  env.load
</I>&gt;<i> mod_mono.load     setenvif.conf       ssl.load
</I>&gt;<i> alias.conf          authz_core.load  deflate.conf    filter.load
</I>&gt;<i>  mpm_worker.conf   setenvif.load       status.conf
</I>&gt;<i> alias.load          authz_host.load  deflate.load    mime.conf
</I>&gt;<i>  mpm_worker.load   socache_shmcb.load  status.load
</I>&gt;<i> auth_basic.load     authz_user.load  dir.conf        mime.load
</I>&gt;<i>  negotiation.conf  speling.load
</I>&gt;<i> authn_core.load     autoindex.conf   dir.load        mod_mono.conf
</I>&gt;<i>  negotiation.load  ssl.conf
</I>&gt;<i>
</I>&gt;<i> # mod-mono-server4 --version
</I>&gt;<i> mod-mono-server4.exe 2.10.0.0
</I>&gt;<i> (c) (c) 2002-2007 Novell, Inc.
</I>&gt;<i> Mod_mono backend for XSP
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> # cat /etc/apache2/sites-enabled/webmin.1395111048.conf
</I>&gt;<i> &lt;VirtualHost dev.ferloassessoria.com.br&gt;
</I>&gt;<i>   ServerName dev.ferloassessoria.com.br
</I>&gt;<i>   ServerAdmin <A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">web-admin at dev.ferloassessoria.com.br</A>
</I>&gt;<i>   DocumentRoot /var/www/dev.ferloassessoria.com.br
</I>&gt;<i>   MonoServerPath dev.ferloassessoria.com.br &quot;/usr/bin/mod-mono-server4&quot;
</I>&gt;<i>   MonoDebug dev.ferloassessoria.com.br true
</I>&gt;<i>   MonoSetEnv dev.ferloassessoria.com.br MONO_IOMAP=all
</I>&gt;<i>   MonoApplications dev.ferloassessoria.com.br &quot;/:/var/www/
</I>&gt;<i> dev.ferloassessoria.com.br&quot;
</I>&gt;<i>   &lt;Location &quot;/&quot;&gt;
</I>&gt;<i>     Allow from all
</I>&gt;<i>     Order allow,deny
</I>&gt;<i>     MonoSetServerAlias dev.ferloassessoria.com.br
</I>&gt;<i>     SetHandler mono
</I>&gt;<i>     SetOutputFilter DEFLATE
</I>&gt;<i>     SetEnvIfNoCase Request_URI &quot;\.(?:gif|jpe?g|png)$&quot; no-gzip dont-vary
</I>&gt;<i>     #ForceType application/x-asp-net
</I>&gt;<i>   &lt;/Location&gt;
</I>&gt;<i>   &lt;IfModule mod_deflate.c&gt;
</I>&gt;<i>     AddOutputFilterByType DEFLATE text/html text/plain text/xml
</I>&gt;<i> text/javascript
</I>&gt;<i>   &lt;/IfModule&gt;
</I>&gt;<i> &lt;/VirtualHost&gt;
</I>&gt;<i>
</I>&gt;<i> # cat /etc/apache2/sites-enabled/000-default.conf
</I>&gt;<i> # vim: syntax=apache ts=4 sw=4 sts=4 sr noet
</I>&gt;<i> &lt;Location /mono&gt;
</I>&gt;<i>   SetHandler mono-ctrl
</I>&gt;<i>   Order deny,allow
</I>&gt;<i>   Deny from all
</I>&gt;<i>   Allow from 127.0.0.1
</I>&gt;<i> &lt;/Location&gt;
</I>&gt;<i>
</I>&gt;<i> # tail  /var/log/apache2/error.log
</I>&gt;<i> [Wed Mar 19 16:51:55.947719 2014] [:error] [pid 4735:tid 140578624886528]
</I>&gt;<i> command failed: failed to send file (file data)
</I>&gt;<i> Change: Ferlo.Web.dll
</I>&gt;<i> [Wed Mar 19 16:52:44.047803 2014] [:error] [pid 4733:tid 140578498995968]
</I>&gt;<i> (104)Connection reset by peer: read_data failed
</I>&gt;<i> [Wed Mar 19 16:52:44.047902 2014] [:error] [pid 4733:tid 140578498995968]
</I>&gt;<i> Command stream corrupted, last command was -1
</I>&gt;<i> mod-mono-server4
</I>&gt;<i> mod-mono-server4
</I>&gt;<i> Listening on: /tmp/mod_mono_server_dev.ferloassessoria.com.br
</I>&gt;<i> Root directory: /var/www/dev.ferloassessoria.com.br
</I>&gt;<i> [Wed Mar 19 16:53:26.284182 2014] [mpm_worker:error] [pid 4724:tid
</I>&gt;<i> 140578848868224] AH00287: server is within MinSpareThreads of
</I>&gt;<i> MaxRequestWorkers, consider raising the MaxRequestWorkers setting
</I>&gt;<i> [Wed Mar 19 16:53:29.287387 2014] [mpm_worker:error] [pid 4724:tid
</I>&gt;<i> 140578848868224] AH00286: server reached MaxRequestWorkers setting,
</I>&gt;<i> consider raising the MaxRequestWorkers setting
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Att, Marcos Almeida Junior.
</I>&gt;<i> <A HREF="http://about.me/junalmeida">http://about.me/junalmeida</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-aspnet-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">Mono-aspnet-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">http://lists.ximian.com/mailman/listinfo/mono-aspnet-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20140328/4649c606/attachment-0001.html">http://lists.ximian.com/pipermail/mono-aspnet-list/attachments/20140328/4649c606/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002055.html">[Mono-aspnet-list] Problem With Mono + Apache2 with Mod-Mono
</A></li>
	<LI>Next message: <A HREF="002059.html">[Mono-aspnet-list] Problem With Mono + Apache2 with Mod-Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2058">[ date ]</a>
              <a href="thread.html#2058">[ thread ]</a>
              <a href="subject.html#2058">[ subject ]</a>
              <a href="author.html#2058">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
