<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] Problems with ASP.NET session
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Problems%20with%20ASP.NET%20session&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001283.html">
   <LINK REL="Next"  HREF="001272.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] Problems with ASP.NET session</H1>
    <B>pwo</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Problems%20with%20ASP.NET%20session&In-Reply-To="
       TITLE="[Mono-aspnet-list] Problems with ASP.NET session">szypki at onet.pl
       </A><BR>
    <I>Wed May  4 15:38:17 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001283.html">[Mono-aspnet-list] Globalization still not working in Mono 2.10
</A></li>
        <LI>Next message: <A HREF="001272.html">[Mono-aspnet-list] WSDL proxy generation when wsdl-doc has wrong	base url for service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1268">[ date ]</a>
              <a href="thread.html#1268">[ thread ]</a>
              <a href="subject.html#1268">[ subject ]</a>
              <a href="author.html#1268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have some serious problem with ASP.NET session in my application. Under
heavy load I get exception like this:
<A HREF="http://monobin.com/__f538359ca">http://monobin.com/__f538359ca</A>
Where get_Rejestry() is responsible for getting something from session. 

Under lighter load everything seems to be fine. When load becomes heavier
session data is very likely to be lost but only for one user. I enabled
tracing on every page and session_id stays the same for every request so I
think this is not the case. 

I tried both in-proc mode and asp-state2 for keeping the session data. 
When the in-proc mode is on the application is simply crashing and when
using asp-state2 application remains operational little longer but
eventually mono process takes almost all cpu so it looks like some kind of
dead lock.

Here are active thread stacks after dead lock / crash of application logged
using GDB

threads from in-proc crash: 
<A HREF="http://pastebin.com/Mmc7FjXV">http://pastebin.com/Mmc7FjXV</A>

threads from asp-state2:
threads 172-100 <A HREF="http://pastebin.com/ridD6MrH">http://pastebin.com/ridD6MrH</A>
threads 100-50 <A HREF="http://pastebin.com/3GenJU1s">http://pastebin.com/3GenJU1s</A>
threads 49-1 <A HREF="http://pastebin.com/UcMuVPDT">http://pastebin.com/UcMuVPDT</A>

Any ideas what to do?
Thanks in advance for advices
Best Regards,
Pawel

--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Problems-with-ASP-NET-session-tp3496592p3496592.html">http://mono.1490590.n4.nabble.com/Problems-with-ASP-NET-session-tp3496592p3496592.html</A>
Sent from the Mono - ASP.NET mailing list archive at Nabble.com.
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001283.html">[Mono-aspnet-list] Globalization still not working in Mono 2.10
</A></li>
	<LI>Next message: <A HREF="001272.html">[Mono-aspnet-list] WSDL proxy generation when wsdl-doc has wrong	base url for service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1268">[ date ]</a>
              <a href="thread.html#1268">[ thread ]</a>
              <a href="subject.html#1268">[ subject ]</a>
              <a href="author.html#1268">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
