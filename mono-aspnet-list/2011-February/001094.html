<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Bug%20With%20Default%20Index%20Files%0A%20%28MonoServerDefaultIndexFiles%29%20and%20Pre-compiled%20Sites%20with%20Xsp2&In-Reply-To=B4F712B5F4D0BF45B527428633813DBD020214756DDC%40VA3DIAXVS021.RED001.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001093.html">
   <LINK REL="Next"  HREF="001095.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2</H1>
    <B>Dave Glick</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Bug%20With%20Default%20Index%20Files%0A%20%28MonoServerDefaultIndexFiles%29%20and%20Pre-compiled%20Sites%20with%20Xsp2&In-Reply-To=B4F712B5F4D0BF45B527428633813DBD020214756DDC%40VA3DIAXVS021.RED001.local"
       TITLE="[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2">dglick at dracorp.com
       </A><BR>
    <I>Fri Feb  4 21:22:31 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001093.html">[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2
</A></li>
        <LI>Next message: <A HREF="001095.html">[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1094">[ date ]</a>
              <a href="thread.html#1094">[ thread ]</a>
              <a href="subject.html#1094">[ subject ]</a>
              <a href="author.html#1094">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>For future reference, I tracked the problem down and opened a bug here:
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=669757">https://bugzilla.novell.com/show_bug.cgi?id=669757</A>

After examining the code, I think the problem is in
XSPWorkerRequest.TryDirectory(). If I understand what's going on correctly,
this method checks if the path that the SimpleWorkerRequest base reports from
GetFilePathTranslated() is actually a directory. If so, it checks the
configured list of default index files to see if one actually exists. The
problem is that it does this check using File.Exists which only checks the
physical file system. In a pre-compiled site, none of the actual pages exist in
the physical file system - they're stored in a compiled form in the /bin folder
along with the pre-compile definition.

To fix the problem, the XSPWorkerRequest.TryDirectory() method needs to not
only check the physical file system, but the pages that have been pre-compiled
as well. Unfortunately, I don't know enough about the web routing system to
suggest how to do this. Is there a method you can call to ask &quot;does this page
exist in a pre-compiled form&quot;?

-Dave
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001093.html">[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2
</A></li>
	<LI>Next message: <A HREF="001095.html">[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1094">[ date ]</a>
              <a href="thread.html#1094">[ thread ]</a>
              <a href="subject.html#1094">[ subject ]</a>
              <a href="author.html#1094">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
