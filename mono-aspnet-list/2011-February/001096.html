<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Bug%20With%20Default%20Index%20Files%0A%20%28MonoServerDefaultIndexFiles%29%20and%20Pre-compiled%20Sites%20with%20Xsp2&In-Reply-To=1296886545.6900.7.camel%40lalo-laptop">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001095.html">
   <LINK REL="Next"  HREF="001097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2</H1>
    <B>Dave Glick</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%20Bug%20With%20Default%20Index%20Files%0A%20%28MonoServerDefaultIndexFiles%29%20and%20Pre-compiled%20Sites%20with%20Xsp2&In-Reply-To=1296886545.6900.7.camel%40lalo-laptop"
       TITLE="[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2">dglick at dracorp.com
       </A><BR>
    <I>Sat Feb  5 07:51:32 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001095.html">[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2
</A></li>
        <LI>Next message: <A HREF="001097.html">[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1096">[ date ]</a>
              <a href="thread.html#1096">[ thread ]</a>
              <a href="subject.html#1096">[ subject ]</a>
              <a href="author.html#1096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> AFAIR, precompiling does not remove the .aspx et al. It just strips them out of content and leaves one line saying that the file is a place holder... So 'Default.aspx' should be there with that line but the actual class is loaded from the 'bin' directory.
</I>
That's close, but not quite right. It puts all the precompiled placeholders in the /bin directory rather than their original location and gives them all pseudo-random names to avoid name collisions. Inside the file it contains the location that the file would have been had it not been precompiled. For example, for my root Default.aspx file I ended up with a file named default.aspx.cdcab7d2.compiled in /bin with the following content (notice the virtualPath attribute):

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;preserve resultType=&quot;3&quot; virtualPath=&quot;/Default.aspx&quot; hash=&quot;fffffffe9342ac25&quot; filehash=&quot;100f2d1bac72641f&quot; flags=&quot;110000&quot; assembly=&quot;WebAppDeploy&quot; type=&quot;ASP.default_aspx&quot;&gt;
  &lt;filedeps&gt;
    &lt;filedep name=&quot;/Default.aspx&quot; /&gt;
    &lt;filedep name=&quot;/Main.Master&quot; /&gt;
  &lt;/filedeps&gt;
&lt;/preserve&gt;

I guess one way to resolve this bug would be after checking the physical file system to look in the /bin directory for all .compiled files with the name of each default index file, open them, and check if the virtualPath attribute matches the request. It's kind of a hacky fix, but it would probably work. I would think that the web framework caches all the .compiled information though, and there's a better way to check if the site is precompiled and contains a page at the appropriate virtual path. I just don't know what it is :)

-Dave
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001095.html">[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2
</A></li>
	<LI>Next message: <A HREF="001097.html">[Mono-aspnet-list] Bug With Default Index Files (MonoServerDefaultIndexFiles) and Pre-compiled Sites with Xsp2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1096">[ date ]</a>
              <a href="thread.html#1096">[ thread ]</a>
              <a href="subject.html#1096">[ subject ]</a>
              <a href="author.html#1096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
