<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-aspnet-list] mod_mono parallel requests dont&#8217;t run in parallel
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%0A%20%3D%3Fwindows-1252%3Fq%3Fmod%3D5Fmono_parallel_requests_%3F%3D%0A%20%3D%3Fwindows-1252%3Fq%3Fdont%3D92t_run_in_parallel%3F%3D&In-Reply-To=25802952.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000501.html">
   <LINK REL="Next"  HREF="000507.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-aspnet-list] mod_mono parallel requests dont&#8217;t run in parallel</H1>
    <B>Marek Habersack</B> 
    <A HREF="mailto:mono-aspnet-list%40lists.ximian.com?Subject=%5BMono-aspnet-list%5D%0A%20%3D%3Fwindows-1252%3Fq%3Fmod%3D5Fmono_parallel_requests_%3F%3D%0A%20%3D%3Fwindows-1252%3Fq%3Fdont%3D92t_run_in_parallel%3F%3D&In-Reply-To=25802952.post%40talk.nabble.com"
       TITLE="[Mono-aspnet-list] mod_mono parallel requests dont&#8217;t run in parallel">grendel at twistedcode.net
       </A><BR>
    <I>Wed Oct 14 09:23:41 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000501.html">[Mono-aspnet-list]  mod_mono parallel requests dont&#8217;t run in parallel
</A></li>
        <LI>Next message: <A HREF="000507.html">[Mono-aspnet-list] mod_mono parallel requests dont&#8217;t run in parallel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#505">[ date ]</a>
              <a href="thread.html#505">[ thread ]</a>
              <a href="subject.html#505">[ subject ]</a>
              <a href="author.html#505">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>michaeltheplumber wrote:
&gt;<i>  hi,
</I>Hey,

&gt;<i> 
</I>&gt;<i> using jquery ($.get(..) ) I call 3 times the same ASP.NET MVC controller
</I>&gt;<i> method in one go. Since the responses are handled asynchronously, the
</I>&gt;<i> requests go out almost in parallel.
</I>&gt;<i> 
</I>&gt;<i> I know they go off in parallel, because I pass in the client's current time
</I>&gt;<i> as a parameter, but they seem to be processed (serverside) one after the
</I>&gt;<i> other. To proof this, I response out the start and end time in my controller
</I>&gt;<i> routine. In VS2008, using the little debug webserver, it works perfectly in
</I>&gt;<i> parallel (same start time). But running mod_mono on Apache, I never get the
</I>&gt;<i> calls to start in parallel.
</I>&gt;<i> The processing of the individual calls takes some time (about a second to
</I>&gt;<i> call an external sevice), so i can see the delay very clearly, i'm not
</I>&gt;<i> talking about milliseconds.
</I>&gt;<i> The user experience on the page is not very good,  the user sees the
</I>&gt;<i> returning data areas one after the other instead of building up
</I>&gt;<i> simultanously.
</I>&gt;<i> 
</I>&gt;<i> We develop a public website, utilizing shopping apis from amazon,ebay etc. 
</I>&gt;<i> 
</I>&gt;<i> Setup: Mono 2.4.latest, Linux OpenSuse 11, Virtual Server, showing 4 cpus in
</I>&gt;<i> cpuinfo, Apache (running worker MPM with high performance settings), hosted
</I>&gt;<i> by a professional service.
</I>Since they are separate requests, I don't see a reason they wouldn't be handled in parallel on a 
4-way machine unless there's a lock held somewhere on the way which serializes them. It's impossible 
to tell what's happening for sure without having sample code which exposes the issue. Please follow 
<A HREF="http://mono-project.com/Bugs">http://mono-project.com/Bugs</A> and file a bug report for the System.Web component with attached 
simple, self-contained test case which reproduces the problem.

&gt;<i> Any ideas ? Is this something I have to worry about ? I do worry about
</I>&gt;<i> scalibility in large, when all requests are handled one after the other..
</I>&gt;<i> will it scale better if the request would come from different machines
</I>&gt;<i> (users) ?
</I>We have tested Mono's ASP.NET under very high load and it scaled pretty well. Our garbage collection 
is not as good as we'd wish it to be, but overall the performance was more than satisfactory.

marek
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000501.html">[Mono-aspnet-list]  mod_mono parallel requests dont&#8217;t run in parallel
</A></li>
	<LI>Next message: <A HREF="000507.html">[Mono-aspnet-list] mod_mono parallel requests dont&#8217;t run in parallel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#505">[ date ]</a>
              <a href="thread.html#505">[ thread ]</a>
              <a href="subject.html#505">[ subject ]</a>
              <a href="author.html#505">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-aspnet-list">More information about the Mono-aspnet-list
mailing list</a><br>
</body></html>
