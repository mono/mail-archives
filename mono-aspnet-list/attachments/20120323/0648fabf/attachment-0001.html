<tt>
&lt;HTML&gt;&lt;HEAD&gt;&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;dir=ltr&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-FAMILY:&nbsp;'Calibri';&nbsp;COLOR:&nbsp;#000000;&nbsp;FONT-SIZE:&nbsp;12pt&quot;&gt;<br>
&lt;DIV&gt;I&nbsp;created&nbsp;Mono&nbsp;MVC2&nbsp;application&nbsp;to&nbsp;backup&nbsp;database&nbsp;from&nbsp;browser.&lt;/DIV&gt;<br>
&lt;DIV&gt;pg_dump&nbsp;runs&nbsp;but&nbsp;looks&nbsp;like&nbsp;it&nbsp;is&nbsp;aborted.&nbsp;apache&nbsp;error_log&nbsp;contains&nbsp;its&nbsp;<br>
output&nbsp;ending&nbsp;in&nbsp;middle&nbsp;of&nbsp;line.&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;After&nbsp;some&nbsp;time&nbsp;of&nbsp;work&nbsp;exception&nbsp;Thread&nbsp;was&nbsp;being&nbsp;aborted&nbsp;occurs&nbsp;(whole&nbsp;<br>
error&nbsp;message&nbsp;is&nbsp;below).&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;How&nbsp;to&nbsp;fix&nbsp;or&nbsp;diagnose&nbsp;it&nbsp;so&nbsp;that&nbsp;backup&nbsp;copy&nbsp;can&nbsp;saved&nbsp;from&nbsp;brower&nbsp;over&nbsp;<br>
internet&nbsp;?&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Andrus.&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;[Authorize]&lt;/DIV&gt;<br>
&lt;DIV&gt;public&nbsp;class&nbsp;BackupController&nbsp;:&nbsp;ControllerBase&lt;/DIV&gt;<br>
&lt;DIV&gt;{&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;[AcceptVerbs(HttpVerbs.Get)]&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;public&nbsp;ActionResult&nbsp;Backup()&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;{&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;<br>
pinfo&nbsp;=&nbsp;new&nbsp;ProcessStartInfo();&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fn&nbsp;=&nbsp;<br>
&quot;backup.backup&quot;;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
pinfo.Arguments&nbsp;=&nbsp;&quot;&nbsp;-ib&nbsp;-Z6&nbsp;-f&nbsp;\&quot;&quot;&nbsp;+&nbsp;fn&nbsp;+&nbsp;&quot;\&quot;&nbsp;-Fc&nbsp;-h&nbsp;\&quot;&quot;&nbsp;+&nbsp;&quot;myserver&quot;&nbsp;+&nbsp;&quot;\&quot;&nbsp;-U&nbsp;<br>
\&quot;&quot;&nbsp;+&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&quot;postgres&quot;&nbsp;+&nbsp;&quot;&nbsp;\&quot;&quot;&nbsp;+&nbsp;&quot;mydb&quot;&nbsp;+&nbsp;&quot;\&quot;&quot;;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
pinfo.FileName&nbsp;=&nbsp;&quot;/usr/bin/pg_dump&quot;;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
pinfo.UseShellExecute&nbsp;=&nbsp;false;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;<br>
(var&nbsp;process&nbsp;=&nbsp;new&nbsp;Process())&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
process.EnableRaisingEvents&nbsp;=&nbsp;true;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
process.StartInfo&nbsp;=&nbsp;pinfo;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
process.Start();&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
while&nbsp;(!process.HasExited)&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
Thread.Sleep(2000);&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
process.WaitForExit();&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
if&nbsp;(process.ExitCode!=0)&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
throw&nbsp;new&nbsp;Exception(&quot;error&quot;);&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
process.Close();&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
Response.ClearContent();&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
Response.WriteFile(fn);&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
Response.End();&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
System.IO.File.Delete(fn);&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<br>
null;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/DIV&gt;<br>
&lt;DIV&gt;}&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Server&nbsp;Error&nbsp;in&nbsp;'/myapp'&nbsp;Application&lt;/DIV&gt;<br>
&lt;DIV&gt;--------------------------------------------------------------------------------&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Thread&nbsp;was&nbsp;being&nbsp;aborted&lt;/DIV&gt;<br>
&lt;DIV&gt;Description:&nbsp;HTTP&nbsp;500.&nbsp;Error&nbsp;processing&nbsp;request.&lt;/DIV&gt;<br>
&lt;DIV&gt;Stack&nbsp;Trace:&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;System.Threading.ThreadAbortException:&nbsp;Thread&nbsp;was&nbsp;being&nbsp;aborted&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;at&nbsp;System.Web.HttpApplication.async_handler_complete_cb&nbsp;<br>
(IAsyncResult&nbsp;ar)&nbsp;[0x0002d]&nbsp;in&nbsp;<br>
/usr/src/redhat/BUILD/mono-2.10.2/mcs/class/System.Web/System.Web/HttpApplication.cs:1010&nbsp;<br>
&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;at&nbsp;<br>
System.Web.Mvc.Async.AsyncResultWrapper+WrappedAsyncResult`1[System.Web.Mvc.Async.AsyncVoid].Begin&nbsp;<br>
(System.AsyncCallback&nbsp;callback,&nbsp;System.Object&nbsp;state,&nbsp;Int32&nbsp;timeout)&nbsp;[0x00000]&nbsp;in&nbsp;<br>
&lt;filename&nbsp;unknown&gt;:0&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;at&nbsp;<br>
System.Web.Mvc.Async.AsyncResultWrapper.BeginSynchronous[AsyncVoid]&nbsp;<br>
(System.AsyncCallback&nbsp;callback,&nbsp;System.Object&nbsp;state,&nbsp;System.Func`1&nbsp;func,&nbsp;<br>
System.Object&nbsp;tag)&nbsp;[0x00000]&nbsp;in&nbsp;&lt;filename&nbsp;unknown&gt;:0&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;at&nbsp;System.Web.Mvc.Async.AsyncResultWrapper.BeginSynchronous&nbsp;<br>
(System.AsyncCallback&nbsp;callback,&nbsp;System.Object&nbsp;state,&nbsp;System.Action&nbsp;action,&nbsp;<br>
System.Object&nbsp;tag)&nbsp;[0x00000]&nbsp;in&nbsp;&lt;filename&nbsp;unknown&gt;:0&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;at&nbsp;System.Web.Mvc.MvcHandler.BeginProcessRequest&nbsp;<br>
(System.Web.HttpContextBase&nbsp;httpContext,&nbsp;System.AsyncCallback&nbsp;callback,&nbsp;<br>
System.Object&nbsp;state)&nbsp;[0x00000]&nbsp;in&nbsp;&lt;filename&nbsp;unknown&gt;:0&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;at&nbsp;System.Web.Mvc.MvcHandler.BeginProcessRequest&nbsp;<br>
(System.Web.HttpContext&nbsp;httpContext,&nbsp;System.AsyncCallback&nbsp;callback,&nbsp;<br>
System.Object&nbsp;state)&nbsp;[0x00000]&nbsp;in&nbsp;&lt;filename&nbsp;unknown&gt;:0&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;at&nbsp;<br>
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest&nbsp;<br>
(System.Web.HttpContext&nbsp;context,&nbsp;System.AsyncCallback&nbsp;cb,&nbsp;System.Object&nbsp;<br>
extraData)&nbsp;[0x00000]&nbsp;in&nbsp;&lt;filename&nbsp;unknown&gt;:0&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;at&nbsp;System.Web.HttpApplication+&lt;Pipeline&gt;c__Iterator6.MoveNext&nbsp;<br>
()&nbsp;[0x00d42]&nbsp;in&nbsp;<br>
/usr/src/redhat/BUILD/mono-2.10.2/mcs/class/System.Web/System.Web/HttpApplication.cs:1365&nbsp;<br>
&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;at&nbsp;System.Web.HttpApplication.Tick&nbsp;()&nbsp;[0x00000]&nbsp;in&nbsp;<br>
/usr/src/redhat/BUILD/mono-2.10.2/mcs/class/System.Web/System.Web/HttpApplication.cs:932&nbsp;&nbsp;<br>
&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;--------------------------------------------------------------------------------&lt;/DIV&gt;<br>
&lt;DIV&gt;Version&nbsp;information:&nbsp;Mono&nbsp;Runtime&nbsp;Version:&nbsp;2.10.2&nbsp;(tarball&nbsp;Mon&nbsp;Apr&nbsp;18&nbsp;<br>
18:57:39&nbsp;UTC&nbsp;2011);&nbsp;ASP.NET&nbsp;Version:&nbsp;2.0.50727.1433&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;FONT-FAMILY:&nbsp;'Calibri';&nbsp;COLOR:&nbsp;#000000;&nbsp;FONT-SIZE:&nbsp;12pt&quot;&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
