<tt>
Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;building&nbsp;HTML&nbsp;elements&nbsp;dynamically&nbsp;(in&nbsp;an&nbsp;ASPX&nbsp;file)&nbsp;to&nbsp;be&nbsp;added&nbsp;to&nbsp;existing&nbsp;page&nbsp;contents&nbsp;via&nbsp;an&nbsp;Ajax&nbsp;call.&nbsp;I&nbsp;basically&nbsp;construct&nbsp;the&nbsp;containers,&nbsp;add&nbsp;the&nbsp;children&nbsp;controls,&nbsp;and&nbsp;render&nbsp;them&nbsp;to&nbsp;a&nbsp;string,&nbsp;which&nbsp;is&nbsp;then&nbsp;returned&nbsp;as&nbsp;the&nbsp;Ajax&nbsp;response.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;all&nbsp;works&nbsp;well&nbsp;except&nbsp;for&nbsp;the &lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;HtmlInputText&lt;/span&gt;&nbsp;control&nbsp;which&nbsp;throws&nbsp;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(255,&nbsp;0,&nbsp;0);&quot;&gt;System.NullReferenceException&lt;/span&gt;&lt;/span&gt;&nbsp;when&nbsp;rendering&nbsp;to&nbsp;the&nbsp;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;HtmlTextWriter&lt;/span&gt;&nbsp;(i.e.&nbsp;other&nbsp;types&nbsp;of&nbsp;controls&nbsp;like&nbsp;HtmlInputButton&nbsp;and&nbsp;HtmlTable&nbsp;work&nbsp;fine).&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&nbsp;&quot;&gt;Any&nbsp;ideas&nbsp;on&nbsp;what&nbsp;goes&nbsp;wrong,&nbsp;or&nbsp;what&nbsp;I&nbsp;should&nbsp;rather&nbsp;be&nbsp;doing?&nbsp;It&nbsp;doesn&amp;#39;t&nbsp;look&nbsp;like&nbsp;this&nbsp;has&nbsp;been&nbsp;reported&nbsp;as&nbsp;a&nbsp;bug&nbsp;yet.&lt;/span&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;The&nbsp;code&nbsp;snippet&nbsp;is&nbsp;attached,&nbsp;but&nbsp;also&nbsp;copied&nbsp;here,&nbsp;in&nbsp;case&nbsp;it&nbsp;gets&nbsp;stripped&nbsp;by&nbsp;the&nbsp;mail&nbsp;client.&nbsp;I&nbsp;added&nbsp;an&nbsp;alternate&nbsp;Page_Load&nbsp;override&nbsp;to&nbsp;prove&nbsp;that&nbsp;the&nbsp;control&nbsp;works&nbsp;fine&nbsp;under&nbsp;normal&nbsp;circumstances,&nbsp;but&nbsp;I&nbsp;do&nbsp;need&nbsp;the&nbsp;alternate&nbsp;version&nbsp;to&nbsp;work&nbsp;as&nbsp;it&nbsp;isn&amp;#39;t&nbsp;always&nbsp;possible&nbsp;to&nbsp;use&nbsp;the&nbsp;working&nbsp;approach&nbsp;(which&nbsp;is&nbsp;only&nbsp;used&nbsp;here&nbsp;to&nbsp;illustrate&nbsp;the&nbsp;problem,&nbsp;anyway).&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;[&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;white-space:&nbsp;normal;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;HtmlInputTextException.aspx&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&amp;lt;%@&nbsp;Page&nbsp;Language=&amp;quot;C#&amp;quot;&nbsp;%&amp;gt;<br>
&amp;lt;%@&nbsp;Import&nbsp;Namespace=&amp;quot;System.IO&amp;quot;&nbsp;%&amp;gt;<br>
&amp;lt;script&nbsp;runat=&amp;quot;server&amp;quot;&amp;gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;===========================================================================<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;MAIN&nbsp;ENTRY<br>
&nbsp;&nbsp;&nbsp;&nbsp;//<br>
&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;void&nbsp;Working_Page_Load(object&nbsp;sender,&nbsp;EventArgs&nbsp;e)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;code&nbsp;does&nbsp;not&nbsp;throw&nbsp;an&nbsp;exception<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HtmlInputText&nbsp;user_token_input&nbsp;=&nbsp;new&nbsp;HtmlInputText(&amp;quot;text&amp;quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main_content.Controls.Add(user_token_input);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;void&nbsp;Page_Load(object&nbsp;sender,&nbsp;EventArgs&nbsp;e)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringWriter&nbsp;sw&nbsp;=&nbsp;new&nbsp;StringWriter();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HtmlTextWriter&nbsp;hw&nbsp;=&nbsp;new&nbsp;HtmlTextWriter(sw);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HtmlInputText&nbsp;user_token_input&nbsp;=&nbsp;new&nbsp;HtmlInputText(&amp;quot;text&amp;quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user_token_input.ID&nbsp;=&nbsp;&amp;quot;really_unique_id&amp;quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;code&nbsp;throws&nbsp;an&nbsp;exception&nbsp;here:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user_token_input.RenderControl(hw);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;System.NullReferenceException:&nbsp;Object&nbsp;reference&nbsp;not&nbsp;set&nbsp;to&nbsp;an&nbsp;instance&nbsp;of&nbsp;an&nbsp;object<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;System.Web.UI.HtmlControls.HtmlInputText.Render&nbsp;(System.Web.UI.HtmlTextWriter&nbsp;writer)&nbsp;[0x00000]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;System.Web.UI.Control.RenderControl&nbsp;(System.Web.UI.HtmlTextWriter&nbsp;writer)&nbsp;[0x00000]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;ASP.test_htmlinputtextexception_aspx.Page_Load&nbsp;(System.Object&nbsp;sender,&nbsp;System.EventArgs&nbsp;e)&nbsp;[0x00000]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;System.Web.UI.Control.OnLoad&nbsp;(System.EventArgs&nbsp;e)&nbsp;[0x00000]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;System.Web.UI.Control.LoadRecursive&nbsp;()&nbsp;[0x00000]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;System.Web.UI.Page.ProcessLoad&nbsp;()&nbsp;[0x00000]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;System.Web.UI.Page.ProcessPostData&nbsp;()&nbsp;[0x00000]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;System.Web.UI.Page.InternalProcessRequest&nbsp;()&nbsp;[0x00000]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;System.Web.UI.Page.ProcessRequest&nbsp;(System.Web.HttpContext&nbsp;context)&nbsp;[0x00000]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;html&nbsp;=&nbsp;sw.ToString();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Response.Write(html);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;prevent&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;page&nbsp;to&nbsp;be&nbsp;returned&nbsp;as&nbsp;well,&nbsp;i.e.&nbsp;the&nbsp;page&nbsp;only&nbsp;returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&amp;lt;input&nbsp;name=&amp;quot;really_unique_id&amp;quot;&nbsp;type=&amp;quot;text&amp;quot;&nbsp;id=&amp;quot;really_unique_id&amp;quot;&nbsp;/&amp;gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Response.End();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&amp;lt;/script&amp;gt;<br>
&amp;lt;div&nbsp;id=&amp;quot;main_content&amp;quot;&nbsp;runat=&amp;quot;server&amp;quot;&amp;gt;<br>
&amp;lt;/div&amp;gt;<br>
&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Best&nbsp;regards&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Jan&lt;/div&gt;<br>

</tt>
