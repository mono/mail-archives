<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Some changes to ambiences
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Some%20changes%20to%20ambiences&In-Reply-To=1227901895.4364.13.camel%40dalaran.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008588.html">
   <LINK REL="Next"  HREF="008594.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Some changes to ambiences</H1>
    <B>Michael Hutchinson</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Some%20changes%20to%20ambiences&In-Reply-To=1227901895.4364.13.camel%40dalaran.site"
       TITLE="[MonoDevelop] Some changes to ambiences">m.j.hutchinson at gmail.com
       </A><BR>
    <I>Sat Nov 29 00:36:23 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008588.html">[MonoDevelop] Some changes to ambiences
</A></li>
        <LI>Next message: <A HREF="008594.html">[MonoDevelop] Some changes to ambiences
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8593">[ date ]</a>
              <a href="thread.html#8593">[ thread ]</a>
              <a href="subject.html#8593">[ subject ]</a>
              <a href="author.html#8593">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Nov 28, 2008 at 2:51 PM, Mike Kr&#252;ger &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">mkrueger at novell.com</A>&gt; wrote:
&gt;<i> Hi
</I>&gt;<i>
</I>&gt;&gt;<i> How's at any harder? There's a single override to implement, and they
</I>&gt;&gt;<i> know that the argument is an OutputSettings object so they don't have
</I>&gt;&gt;<i> to do type checks. The OutputSettings object could even have
</I>&gt;&gt;<i> convenience properties for accessing the flags, e.g.
</I>&gt;&gt;<i> bool UseMarkup { get { return flags &amp; OutputFlags.UseMarkup != 0; } }
</I>&gt;&gt;<i> The outputsettings object could handle the null checks on the
</I>&gt;&gt;<i> postprocessing delegates too, e.g.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I've thousands of methods that are:
</I>&gt;<i>
</I>&gt;<i> VisitSomething (Something something, object data)
</I>&gt;<i> {
</I>&gt;<i> ..
</I>&gt;<i>        GetString (something.SomeObject, data)
</I>&gt;<i> ..
</I>&gt;<i>        IsValidSomething (something, data)
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> etc. The visitors are operating on objects. This method prevents that
</I>&gt;<i> I've to upcast the data objects in each visit method as ambience
</I>&gt;<i> implementor.
</I>
But an OutputSettings contains the flags, so I don't understand why
you can't require that the data object is an OutputSettings, and have
overloads on the *public* Ambience API (i.e. GetString etc) that will
accept an OutputFlags or an OutputSettings.

The main problem, though, is API usability. Imagine that, as a new
user of this API, you see the following signature in code completion:
public string GetString (IDomVisitable domVisitable, object settings)
You'd have no clear idea what the settings object is meant to be.

It does not make sense for the public ambience API to reflect the
limitations of the visitor pattern if we can avoid it.

As a bonus, all of the static protected helper methods on Ambience can
be moved to instance members of the OutputSettings object, e.g.
protected static bool IncludeModifiers (object settings)
becomes
public bool IncludeModifiers
on the settings object, and extracts the value from the flags enum in
the settings. IMO,
if (settings.IncludeModifiers) {}
is more readable than
if (IncludeModifiers (settings)) {}

-- 
Michael Hutchinson
<A HREF="http://mjhutchinson.com">http://mjhutchinson.com</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008588.html">[MonoDevelop] Some changes to ambiences
</A></li>
	<LI>Next message: <A HREF="008594.html">[MonoDevelop] Some changes to ambiences
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8593">[ date ]</a>
              <a href="thread.html#8593">[ thread ]</a>
              <a href="subject.html#8593">[ subject ]</a>
              <a href="author.html#8593">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
