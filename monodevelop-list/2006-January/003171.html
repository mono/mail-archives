<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Better monodoc integration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Better%20monodoc%20integration&In-Reply-To=455de9380601300910g5be32399jf519796fb7ae4de3%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003169.html">
   <LINK REL="Next"  HREF="003172.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Better monodoc integration</H1>
    <B>Lluis Sanchez</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Better%20monodoc%20integration&In-Reply-To=455de9380601300910g5be32399jf519796fb7ae4de3%40mail.gmail.com"
       TITLE="[MonoDevelop] Better monodoc integration">lluis at ximian.com
       </A><BR>
    <I>Mon Jan 30 13:28:48 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="003169.html">[MonoDevelop] Better monodoc integration
</A></li>
        <LI>Next message: <A HREF="003172.html">[MonoDevelop] Better monodoc integration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3171">[ date ]</a>
              <a href="thread.html#3171">[ thread ]</a>
              <a href="subject.html#3171">[ subject ]</a>
              <a href="author.html#3171">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>El lun, 30-01-2006 a las 18:10 +0100, Jacob Ils&#248; Christensen escribi&#243;:
&gt;<i> Ok, here is the first attempt!
</I>&gt;<i> 
</I>&gt;<i> The service has been renamed to DocumentationService and it implements
</I>&gt;<i> IDocumentationService which again implements IService.
</I>&gt;<i> IDocumentationService is placed in:
</I>&gt;<i> 
</I>&gt;<i> Core/src/MonoDevelop.Projects/MonoDevelop.Projects.Documentation
</I>&gt;<i> 
</I>&gt;<i> MonoDevelop.Projects no longer references MonoDevelop.Documentation
</I>&gt;<i> (but has to reference Monodoc). 
</I>
This reference shouldn't be needed. I guess it is due to the HelpTree
property in IDocumentationService which returns a type from Monodoc,
right? Since this property is not used in MonoDevelop.Projects it could
be removed from the interface (but not from the class).

However, MonoDevelop.Ide does use that property. I see two solutions for
this.

      * The easy one: In MonoDevelop.Ide use the class
        DocumentationService instead of IDocumentationService (it is
        possible to reference MonoDevelop.Documentation there).
      * The complex/good one: Move HelpViewer and MonodocTreePad from
        MonoDevelop.Ide to MonoDevelop.Documentation. Move the handling
        of the F1 key from MonoDevelop.SourceEditor to
        MonoDevelop.Documentation.

In any case those changes don't need to be done right now. Removing the
MonoDevelop.Documentation dependency is a first step. Removing the
Monodoc can be done in a later step.

&gt;<i> Instead MonoDevelop.Documentation references MonoDevelop.Projects.
</I>&gt;<i> 
</I>&gt;<i> I have one issue in:
</I>&gt;<i> 
</I>&gt;<i> Core/src/MonoDevelop.Projects/MonoDevelop.Projects.Parser/AssemblyCodeCompletionDatabase.cs
</I>&gt;<i> 
</I>&gt;<i> Here a new instance of MonodocService is made. This is no longer
</I>&gt;<i> possible due to the broken dependency. I need some help as to how to
</I>&gt;<i> resolve this. Maybe it is not necessary as the ServiceManager does
</I>&gt;<i> this?
</I>
Yes, the service should be created through the service manager. I'll
take a look at this.

&gt;<i> 
</I>&gt;<i> Apart from that issue is this good to commit (along with the mandatory
</I>&gt;<i> ChangeLog files... :-) )?
</I>&gt;<i> 
</I>&gt;<i> /Jacob
</I>&gt;<i> 
</I>&gt;<i> On 1/29/06, Jacob Ils&#248; Christensen &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">jacobilsoe at gmail.com</A>&gt; wrote:
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         On 1/29/06, Lluis Sanchez &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">lluis at ximian.com</A>&gt; wrote:
</I>&gt;<i>                 El s&#225;b, 28-01-2006 a las 18:15 +0100, Jacob Ils&#248;
</I>&gt;<i>                 Christensen escribi&#243;:
</I>&gt;<i>                 &gt; Hi.
</I>&gt;<i>                 &gt;
</I>&gt;<i>                 &gt; In current MonoDevelop hitting F1 will always show
</I>&gt;<i>                 help for the type
</I>&gt;<i>                 &gt; of the item the cursor is at instead of showing help
</I>&gt;<i>                 for the item 
</I>&gt;<i>                 &gt; itself. I have begun working on a patch to make sure
</I>&gt;<i>                 that the correct
</I>&gt;<i>                 &gt; help will always be shown. I have attached some
</I>&gt;<i>                 preliminary work and
</I>&gt;<i>                 &gt; would like some comments as to whether this is the
</I>&gt;<i>                 way to go. 
</I>&gt;<i>                 &gt;
</I>&gt;<i>                 &gt; A few things:
</I>&gt;<i>                 &gt;
</I>&gt;<i>                 &gt; I have made it the responsibility of the
</I>&gt;<i>                 MonodocService to translate
</I>&gt;<i>                 &gt; ILanguageItems into a relevant monodoc &quot;help url&quot;.
</I>&gt;<i>                 For this I needed
</I>&gt;<i>                 &gt; to add a reference from the
</I>&gt;<i>                 MonoDevelop.Documentation assembly to the
</I>&gt;<i>                 &gt; MonoDevelop.Projects assemby. Is this reference ok?
</I>&gt;<i>                 
</I>&gt;<i>                 I think that the approach is good, but the problem is
</I>&gt;<i>                 that
</I>&gt;<i>                 MonoDevelop.Projects already has a reference to
</I>&gt;<i>                 MonoDevelop.Documentation, and we can't add a circular
</I>&gt;<i>                 reference.
</I>&gt;<i>         
</I>&gt;<i>         Ahh, didn't see that. 
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>                 I propose the following solution:
</I>&gt;<i>                       * Add in MonoDevelop.Projects a new interface
</I>&gt;<i>                 named 
</I>&gt;<i>                         IDocumentationService, which defines the same
</I>&gt;<i>                 methods as in
</I>&gt;<i>                         MonodocService.
</I>&gt;<i>                       * Replace MonodocService by
</I>&gt;<i>                 IDocumentationService in
</I>&gt;<i>                         MonoDevelop.Projects, and remove the reference
</I>&gt;<i>                 to 
</I>&gt;<i>                         MonoDevelop.Documentation.
</I>&gt;<i>                       * In MonoDevelop.Documentation add a reference
</I>&gt;<i>                 to
</I>&gt;<i>                         MonoDevelop.Projects and make MonodocService
</I>&gt;<i>                 implement
</I>&gt;<i>                         IDocumentationService.
</I>&gt;<i>                 
</I>&gt;<i>                 This would fix the issue.
</I>&gt;<i>         
</I>&gt;<i>         Yes, that will do it. Thanks. 
</I>&gt;<i>         
</I>&gt;<i>         /Jacob
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>                 Lluis.
</I>&gt;<i>                 
</I>&gt;<i>                 &gt;
</I>&gt;<i>                 &gt; There is in MonoDevelop currently some functionality
</I>&gt;<i>                 based on the 
</I>&gt;<i>                 &gt; MonodocResolver method which I will phase out when
</I>&gt;<i>                 the above patch
</I>&gt;<i>                 &gt; stabilizes.
</I>&gt;<i>                 &gt;
</I>&gt;<i>                 &gt; Oh, and don't try to apply the patch since it won't
</I>&gt;<i>                 work due to the
</I>&gt;<i>                 &gt; above reference issue. :-)
</I>&gt;<i>                 &gt; 
</I>&gt;<i>                 &gt; Just wanted the opinion of someone else.
</I>&gt;<i>                 &gt;
</I>&gt;<i>                 &gt; Thanks,
</I>&gt;<i>                 &gt; Jacob
</I>&gt;<i>                 &gt; _______________________________________________
</I>&gt;<i>                 &gt; Monodevelop-list mailing list
</I>&gt;<i>                 &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">Monodevelop-list at lists.ximian.com</A>
</I>&gt;<i>                 &gt;
</I>&gt;<i>                 <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>
</I>&gt;<i>                 
</I>&gt;<i>         
</I>&gt;<i> 
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003169.html">[MonoDevelop] Better monodoc integration
</A></li>
	<LI>Next message: <A HREF="003172.html">[MonoDevelop] Better monodoc integration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3171">[ date ]</a>
              <a href="thread.html#3171">[ thread ]</a>
              <a href="subject.html#3171">[ subject ]</a>
              <a href="author.html#3171">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
