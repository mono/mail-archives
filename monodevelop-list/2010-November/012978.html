<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Deployment for desktop applications
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Deployment%20for%20desktop%20applications&In-Reply-To=4CCF1449.1000105%40azuregulf.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012917.html">
   <LINK REL="Next"  HREF="012918.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Deployment for desktop applications</H1>
    <B>Derek JW Cahusac de Caux</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Deployment%20for%20desktop%20applications&In-Reply-To=4CCF1449.1000105%40azuregulf.com"
       TITLE="[MonoDevelop] Deployment for desktop applications">derek at azuregulf.com
       </A><BR>
    <I>Sat Nov 13 18:32:43 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="012917.html">[MonoDevelop] Deployment for desktop applications
</A></li>
        <LI>Next message: <A HREF="012918.html">[MonoDevelop] Monodevelop CustomCommands
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12978">[ date ]</a>
              <a href="thread.html#12978">[ thread ]</a>
              <a href="subject.html#12978">[ subject ]</a>
              <a href="author.html#12978">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>With some more help (many thanks) I progressed a bit further and seem to 
be able to install a working .deb file, but I also seem to have found a 
few of 'oddities':

1. I need to add this line

    m4_include ([expansions.m4])

into the file configure.ac just before the 3 SHAMROCK_EXPANDS_... lines
in order to avoid errors when running ./configure

2. I also need to edit the resultant configure file (on around line 539) 
and change the line

    ac_default_prefix=/usr/local
    to
    ac_default_prefix=/usr


These 2 changes then produce a (package_name) user executable as below

    #!/bin/sh

    exec mono &quot;/usr/lib/myrss/myRSS.exe&quot; &quot;$@&quot;

which is installed into the folder /usr/bin as myrss - as required on 
Debian systems, as I understand it...

Without these changes, the path in the script was not being resolved and 
was left as:

    #!/bin/sh

    exec mono &quot;@expanded_libdir@/@PACKAGE@/myRSS.exe&quot;
    &lt;mailto:@expanded_libdir@/@PACKAGE@/myRSS.exe&gt; &quot;$@&quot;

(or was only partially resolved with the @PACKAGE@ label being replaced 
with the package name)


3. in Monodevelop, I've found that the application's .desktop file's 
properties are not saved when MD is closed - the Target directory needs 
to be set to .desktop applications directory but reverts to Program 
files when MD is re-opened...(even though MD does say 'item saved')


Patches 1 and 2 above seem to be kludges and probably break 
'architectural independence' rules in Debian packaging, so any ideas on 
how to better fix this would be appreciated.

Point 3 above could be a bug? If anyone with more experience than me 
feels it is, I will log a bug report?

Cheers, Derek

Derek JW Cahusac de Caux emailed  on 01/11/10 19:26:
&gt;<i> Hi Jo, Michael and Quandary
</I>&gt;<i>
</I>&gt;<i> Once again, thanks for your various comments and pointers.
</I>&gt;<i> It seems like I'm on the way to &quot;sorting&quot; this, but still have a lot 
</I>&gt;<i> to learn and do still wonder if I'm going in the right direction...
</I>&gt;<i> I've tried to systematically document my &quot;packaging&quot; process so far, 
</I>&gt;<i> and have attached a PDF copy - any comments / corrections welcome.
</I>&gt;<i>
</I>&gt;<i> ps - wasn't sure if I could add attachments to this mailing list, but 
</I>&gt;<i> noticed a few others had...
</I>&gt;<i>
</I>&gt;<i> Quandary emailed  on 25/10/10 22:07:
</I>&gt;&gt;<i>  Well, everything is relative.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you consider that last month I spent a week writing a windows 
</I>&gt;&gt;<i> service.
</I>&gt;&gt;<i> And then another one-and-a-half week for writing a working installer 
</I>&gt;&gt;<i> that sets the right folder permissions...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Makes spending a day on a linux package a little less negative.
</I>&gt;&gt;<i> The bad thing about Linux installers is really the segmentation, 
</I>&gt;&gt;<i> .deb, .rpm, ports.
</I>&gt;&gt;<i> Basically writing a Linux installer is much simpler and you can do it 
</I>&gt;&gt;<i> much faster and it works far better than a Windows installer. 
</I>&gt;&gt;<i> However, what kill's you is that you have to write an installer for 
</I>&gt;&gt;<i> every kind of Linux, with specific requirements for specific 
</I>&gt;&gt;<i> versions, etc. Basically, when you want to write a working installer 
</I>&gt;&gt;<i> for a mono application on Linux, the problem is you need to write an 
</I>&gt;&gt;<i> installer for mono &amp; co. as well, which is what really kills your 
</I>&gt;&gt;<i> productivity.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Am 25.10.2010 19:34, schrieb Derek JW Cahusac de Caux:
</I>&gt;&gt;&gt;<i> Thanks Michael &amp; Quandry for your responses - I'll investigate 
</I>&gt;&gt;&gt;<i> further along the lines you've both suggested but this does raise a 
</I>&gt;&gt;&gt;<i> few questions, if not concerns...
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Michael mentioned that 'there hasn't been a huge demand' for 
</I>&gt;&gt;&gt;<i> packaging which makes one wonder what developers are using MD for 
</I>&gt;&gt;&gt;<i> and how - is there any 'public' info on this? Are we looking at 
</I>&gt;&gt;&gt;<i> tens, hundreds, thousands of MD developers..?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> From looking at the various 'packaging' options out there (almost 
</I>&gt;&gt;&gt;<i> all seem to be command line driven) it seems that this is huge task 
</I>&gt;&gt;&gt;<i> simply because of the open systems arena - packagers are trying to 
</I>&gt;&gt;&gt;<i> be all things for all systems...maybe MD could start by implementing 
</I>&gt;&gt;&gt;<i> packaging (compiled binaries+dependencies+files, installer, launcher 
</I>&gt;&gt;&gt;<i> and un-installer) for just one &quot;system&quot;...any thoughts?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Quandary emailed  on 25/10/10 11:23:
</I>&gt;&gt;&gt;&gt;<i>  I still wanted to add 3 things:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 1. As a commerical solution, you can use InstallAnywhere (.bin 
</I>&gt;&gt;&gt;&gt;<i> files you see for example in Google Earth, Sybase, or Oracle Java). 
</I>&gt;&gt;&gt;&gt;<i> I'd not do that however, as it doesn't check for dependencies.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 2. The installed version of mono on all the different Linux 
</I>&gt;&gt;&gt;&gt;<i> distributions and distribution versions is not quite the same. So 
</I>&gt;&gt;&gt;&gt;<i> if you for example depend on mono 2.6 (as opposed to 2.4, current 
</I>&gt;&gt;&gt;&gt;<i> Ubuntu Lucid Lynx version), you'll basically have to package mono 
</I>&gt;&gt;&gt;&gt;<i> 2.6 as well. This happended to me because there's a bug in 2.4 
</I>&gt;&gt;&gt;&gt;<i> concerning XML and XmlTextReader/writer encoding.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 3. If you have a RPM file, you can use the Debian-Tool 'alien' to 
</I>&gt;&gt;&gt;&gt;<i> convert it into a .deb file automagically (careful).
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Am 25.10.2010 00:02, schrieb Michael Hutchinson:
</I>&gt;&gt;&gt;&gt;&gt;<i> On Sat, Oct 23, 2010 at 10:26 AM, Derek JW Cahusac de Caux
</I>&gt;&gt;&gt;&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">derek at azuregulf.com</A>&gt;  wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Hi - I'm new to MD and C# (thoroughly enjoying both) and am now 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> at the stage
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> where I'd like to 'package and ship' simple C# desktop 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> applications to end
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> users (on both Linux and Windows).
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> These tutorials from Visual Studio look fairly good:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://msdn.microsoft.com/en-us/library/k3bb4tfd%28v=VS.100%29.aspx">http://msdn.microsoft.com/en-us/library/k3bb4tfd%28v=VS.100%29.aspx</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://www.dreamincode.net/forums/topic/58021-deploying-a-c%23-application-visual-studio-setup-project/">http://www.dreamincode.net/forums/topic/58021-deploying-a-c%23-application-visual-studio-setup-project/</A> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Any pointers to the equivalent guides in MD would be most 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> appreciated.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> I really want to avoid asking end users to extract tarballs, drop 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> down to
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Terminal and run &quot; sudo ./configure&amp;&amp;  make&amp;&amp;  make install&quot; if 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> at all
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> possible....
</I>&gt;&gt;&gt;&gt;&gt;<i> Unfortunately MonoDevelop doesn't have any built-in support for
</I>&gt;&gt;&gt;&gt;&gt;<i> packaging. The best it can do is create a zip of binaries, or a
</I>&gt;&gt;&gt;&gt;&gt;<i> tarball with build/install scripts. I know, we've wanted packaging
</I>&gt;&gt;&gt;&gt;&gt;<i> support for a while
</I>&gt;&gt;&gt;&gt;&gt;<i> (<A HREF="http://monodevelop.com/Developers/Tasks/Packaging">http://monodevelop.com/Developers/Tasks/Packaging</A>) but it's 
</I>&gt;&gt;&gt;&gt;&gt;<i> difficult
</I>&gt;&gt;&gt;&gt;&gt;<i> to implement fully and there hasn't been huge demand.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Linux packaging depends on the distro, unfortunately - the major
</I>&gt;&gt;&gt;&gt;&gt;<i> package formats are rpm (openSUSE, SLE*, Redhat, Centos, Fedora, etc)
</I>&gt;&gt;&gt;&gt;&gt;<i> and deb (Debian, Ubuntu, etc.), though a few distros use other 
</I>&gt;&gt;&gt;&gt;&gt;<i> systems
</I>&gt;&gt;&gt;&gt;&gt;<i> (Gentoo etc).
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I've only used RPM myself. The way it works is that you write a
</I>&gt;&gt;&gt;&gt;&gt;<i> specfile: a description, a list of dependencies, the commands to 
</I>&gt;&gt;&gt;&gt;&gt;<i> build
</I>&gt;&gt;&gt;&gt;&gt;<i> and install (or simply unzip and cp) the app, and a list of files to
</I>&gt;&gt;&gt;&gt;&gt;<i> package up. You then feed it to a tool that builds and installs the
</I>&gt;&gt;&gt;&gt;&gt;<i> package into a fake root and collects the installed files and 
</I>&gt;&gt;&gt;&gt;&gt;<i> packages
</I>&gt;&gt;&gt;&gt;&gt;<i> them up. I think deb is fairly similar. If you're lucky, you might be
</I>&gt;&gt;&gt;&gt;&gt;<i> able to make packages that are usable on several distros or versions,
</I>&gt;&gt;&gt;&gt;&gt;<i> depending how similar they are.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> If your app is open-source, I suggest you investigate the openSUSE
</I>&gt;&gt;&gt;&gt;&gt;<i> Build Service which, given source and spec files, can build packages
</I>&gt;&gt;&gt;&gt;&gt;<i> for multiple distros automatically. The packages already there will
</I>&gt;&gt;&gt;&gt;&gt;<i> provide good examples to base yours on.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodevelop-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">Monodevelop-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>
</I>&gt;<i>    
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodevelop-list/attachments/20101113/11159be1/attachment-0001.html">http://lists.ximian.com/pipermail/monodevelop-list/attachments/20101113/11159be1/attachment-0001.html</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012917.html">[MonoDevelop] Deployment for desktop applications
</A></li>
	<LI>Next message: <A HREF="012918.html">[MonoDevelop] Monodevelop CustomCommands
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12978">[ date ]</a>
              <a href="thread.html#12978">[ thread ]</a>
              <a href="subject.html#12978">[ subject ]</a>
              <a href="author.html#12978">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
