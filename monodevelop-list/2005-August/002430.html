<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Tests for Db providers in Mono.Data.Sql
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Tests%20for%20Db%20providers%20in%20Mono.Data.Sql&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002429.html">
   <LINK REL="Next"  HREF="002431.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Tests for Db providers in Mono.Data.Sql</H1>
    <B>Daniel Morgan</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Tests%20for%20Db%20providers%20in%20Mono.Data.Sql&In-Reply-To="
       TITLE="[MonoDevelop] Tests for Db providers in Mono.Data.Sql">danielmorgan at verizon.net
       </A><BR>
    <I>Sun Aug 21 01:16:42 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002429.html">[MonoDevelop] Makefile for Mono.Data.Sql not using auto tools
</A></li>
        <LI>Next message: <A HREF="002431.html">[MonoDevelop] Dummy ODBC db provider for Mono.Data.Sql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2430">[ date ]</a>
              <a href="thread.html#2430">[ thread ]</a>
              <a href="subject.html#2430">[ subject ]</a>
              <a href="author.html#2430">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have created some tests for the sybase, oracle, and firebird db 
providers in Mono.Data.Sql which is part of the MonoQuery add-in.

The tests are not nunit2, but they should give you an idea on how to use 
them.

-------------- next part --------------
// test-sybase-1.cs
//
// $ mcs test-sybase-1.cs /r:System.Data /r:Mono.Data.SybaseClient /r:Mono.Data.Sql
//

using System;
using System.Data;
using Mono.Data.SybaseClient;
using System.Text;
using Mono.Data.Sql;

namespace Mono.Data.Sql.Tests
{
	public class CreateProviderTest
	{
		static SybaseDbProvider provider = null;

		static TableSchema[] tables = null;
		static ViewSchema[] views = null;
		
		public static void Main(string[] args) 
		{	
			Console.WriteLine(&quot;Test Sybase Meta Data Provider...&quot;);

			provider = new SybaseDbProvider ();
			provider.ConnectionString = &quot;Server=DANPC,5000;Database=testdb;User ID=sa;Password=;&quot;;

			Console.WriteLine(&quot;Opening database...&quot;);
			provider.Open ();
			
			Console.WriteLine(&quot;Do tests...&quot;);			

			ListTables ();
			ListViews ();

			tables = null;
			views = null;

			Console.WriteLine(&quot;Close provider...&quot;);			

			provider.Close();

			Console.WriteLine(&quot;Test Done.&quot;);
		}
		
		public static void ListTables ()
		{
			Console.WriteLine(&quot;List Tables...&quot;);
			tables = provider.GetTables ();
			Console.WriteLine(&quot;Tables Found: {0}&quot;, tables.Length);
			
			for (int i = 0; i &lt; tables.Length; i++) {
				TableSchema table = tables[i];
				Console.WriteLine(&quot;  Table{0} Owner: {1} Name: {2} &quot;, 
					i, table.OwnerName, table.Name);
				if (i == 0)
					ListTableColumns(table);
			}
		}

		public static void ListTableColumns (TableSchema table)
		{
			ColumnSchema[] columns = table.Columns;

			for (int c = 0; c &lt; columns.Length; c++) {
				ColumnSchema column = columns[c];
				Console.WriteLine(&quot;Column{0}: &quot;, c);
				Console.WriteLine(&quot;  Name: {0}&quot;, column.Name);
				Console.WriteLine(&quot;  DataTypeName: {0}&quot;, column.DataTypeName);
				Console.WriteLine(&quot;  Length: {0}&quot;, column.Length);
				//Console.WriteLine(&quot;  Precision: {0}&quot;, column.Precision);
				//Console.WriteLine(&quot;  Scale: {0}&quot;, column.Scale);
				//Console.WriteLine(&quot;  NotNull: {0}&quot;, column.NotNull);
				Console.WriteLine(&quot;&quot;);
			}
		}

		public static void ListViews () 
		{
			Console.WriteLine(&quot;List Views...&quot;);

			views = provider.GetViews ();
			for (int v = 0; v &lt; views.Length; v++) {
				ViewSchema view = views[v];
				Console.WriteLine(&quot;View{0}: &quot; ,v);
				Console.WriteLine(&quot;  Name: {0}&quot;, view.Name);
				Console.WriteLine(&quot;  Owner: {0}&quot;, view.OwnerName);
				if (v == 0)
					ListView (view);
			}
		}

		public static void ListView (ViewSchema view) 
		{
			Console.WriteLine(&quot;View Definition:\n&quot; + view.Definition);
		}
	}
}

-------------- next part --------------
// test-firebird-1.cs
//
// $ mcs test-firebird-1.cs /r:System.Data /r:FirebirdSql.Data.Firebird /r:Mono.Data.Sql
//

using System;
using System.Data;
using FirebirdSql.Data.Firebird;
using System.Text;
using Mono.Data.Sql;

namespace Mono.Data.Sql.Tests
{
	public class CreateProviderTest
	{
		static FirebirdDbProvider provider = null;

		static TableSchema[] tables = null;
		static ViewSchema[] views = null;
		
		public static void Main(string[] args) 
		{	
			Console.WriteLine(&quot;Test Firebird Meta Data Provider...&quot;);

			provider = new FirebirdDbProvider ();
			provider.ConnectionString = @&quot;Database=D:\PROGRA~1\Firebird\Firebird_1_5\examples\EMPLOYEE.FDB;User=SYSDBA;Password=masterkey;Dialect=3;Server=localhost&quot;;

			Console.WriteLine(&quot;Opening database...&quot;);
			provider.Open ();
			
			Console.WriteLine(&quot;Do tests...&quot;);			

			ListTables ();
			ListViews ();

			tables = null;
			views = null;

			Console.WriteLine(&quot;Close provider...&quot;);			

			provider.Close();

			Console.WriteLine(&quot;Test Done.&quot;);
		}
		
		public static void ListTables ()
		{
			Console.WriteLine(&quot;List Tables...&quot;);
			tables = provider.GetTables ();
			Console.WriteLine(&quot;Tables Found: {0}&quot;, tables.Length);
			
			for (int i = 0; i &lt; tables.Length; i++) {
				TableSchema table = tables[i];
				Console.WriteLine(&quot;  Table{0} Owner: {1} Name: {2} &quot;, 
					i, table.OwnerName, table.Name);
				if (i == 0)
					ListTableColumns(table);
			}
		}

		public static void ListTableColumns (TableSchema table)
		{
			ColumnSchema[] columns = table.Columns;

			for (int c = 0; c &lt; columns.Length; c++) {
				ColumnSchema column = columns[c];
				Console.WriteLine(&quot;Column{0}: &quot;, c);
				Console.WriteLine(&quot;  Name: {0}&quot;, column.Name);
				Console.WriteLine(&quot;  DataTypeName: {0}&quot;, column.DataTypeName);
				Console.WriteLine(&quot;  Length: {0}&quot;, column.Length);
				//Console.WriteLine(&quot;  Precision: {0}&quot;, column.Precision);
				//Console.WriteLine(&quot;  Scale: {0}&quot;, column.Scale);
				//Console.WriteLine(&quot;  NotNull: {0}&quot;, column.NotNull);
				Console.WriteLine(&quot;&quot;);
			}
		}

		public static void ListViews () 
		{
			Console.WriteLine(&quot;List Views...&quot;);

			views = provider.GetViews ();
			for (int v = 0; v &lt; views.Length; v++) {
				ViewSchema view = views[v];
				Console.WriteLine(&quot;View{0}: &quot; ,v);
				Console.WriteLine(&quot;  Name: {0}&quot;, view.Name);
				Console.WriteLine(&quot;  Owner: {0}&quot;, view.OwnerName);
				if (v == 0)
					ListView (view);
			}
		}

		public static void ListView (ViewSchema view) 
		{
			Console.WriteLine(&quot;View Definition:\n&quot; + view.Definition);
		}
	}
}

-------------- next part --------------
// test-oracle-1.cs
//
// $ mcs test-oracle-1.cs /r:System.Data /r:System.Data.OracleClient /r:Mono.Data.Sql
//

using System;
using System.Data;
using System.Data.OracleClient;
using System.Text;
using Mono.Data.Sql;

namespace Mono.Data.Sql.Tests
{
	public class CreateProviderTest
	{
		static OracleDbProvider provider = null;

		static TableSchema[] tables = null;
		static ViewSchema[] views = null;
		
		public static void Main(string[] args) 
		{	
			Console.WriteLine(&quot;Test Oracle Meta Data Provider...&quot;);

			provider = new OracleDbProvider ();
			provider.ConnectionString = &quot;Data Source=palis;user id=scott;password=tiger&quot;;
			provider.Open ();
			
			ListTables ();
			ListViews ();

			tables = null;
			views = null;

			provider.Close();

			Console.WriteLine(&quot;Test Done.&quot;);
		}
		
		public static void ListTables ()
		{
			Console.WriteLine(&quot;List Tables...&quot;);
			tables = provider.GetTables ();
			Console.WriteLine(&quot;Tables Found: {0}&quot;, tables.Length);
			
			for (int i = 0; i &lt; tables.Length; i++) {
				TableSchema table = tables[i];
				Console.WriteLine(&quot;  Table{0} Owner: {1} Name: {2} TableSpace: {3}&quot;, 
					i, table.OwnerName, table.Name, table.TableSpaceName);
				if (i == 0)
					ListTableColumns(table);
			}
		}

		public static void ListTableColumns (TableSchema table)
		{
			ColumnSchema[] columns = table.Columns;

			for (int c = 0; c &lt; columns.Length; c++) {
				ColumnSchema column = columns[c];
				Console.WriteLine(&quot;Column{0}: &quot;, c);
				Console.WriteLine(&quot;  Name: {0}&quot;, column.Name);
				Console.WriteLine(&quot;  DataTypeName: {0}&quot;, column.DataTypeName);
				Console.WriteLine(&quot;  Length: {0}&quot;, column.Length);
				Console.WriteLine(&quot;  Precision: {0}&quot;, column.Precision);
				Console.WriteLine(&quot;  Scale: {0}&quot;, column.Scale);
				Console.WriteLine(&quot;  NotNull: {0}&quot;, column.NotNull);
				Console.WriteLine(&quot;&quot;);
			}
		}

		public static void ListViews () 
		{
			Console.WriteLine(&quot;List Views...&quot;);

			views = provider.GetViews ();
			for (int v = 0; v &lt; views.Length; v++) {
				ViewSchema view = views[v];
				Console.WriteLine(&quot;View{0}: &quot; ,v);
				Console.WriteLine(&quot;  Name: {0}&quot;, view.Name);
				Console.WriteLine(&quot;  Owner: {0}&quot;, view.OwnerName);
				if (v == 0)
					ListView (view);
			}
		}

		public static void ListView (ViewSchema view) 
		{
			Console.WriteLine(&quot;View Definition:\n&quot; + view.Definition);
		}
	}
}

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002429.html">[MonoDevelop] Makefile for Mono.Data.Sql not using auto tools
</A></li>
	<LI>Next message: <A HREF="002431.html">[MonoDevelop] Dummy ODBC db provider for Mono.Data.Sql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2430">[ date ]</a>
              <a href="thread.html#2430">[ thread ]</a>
              <a href="subject.html#2430">[ subject ]</a>
              <a href="author.html#2430">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
