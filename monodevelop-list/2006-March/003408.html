<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] PATCH: Enable filering in open dialog
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20PATCH%3A%20Enable%20filering%20in%20open%20dialog&In-Reply-To=44192CA1.4040309%40sannyas-on.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003407.html">
   <LINK REL="Next"  HREF="003409.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] PATCH: Enable filering in open dialog</H1>
    <B>Lluis Sanchez</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20PATCH%3A%20Enable%20filering%20in%20open%20dialog&In-Reply-To=44192CA1.4040309%40sannyas-on.net"
       TITLE="[MonoDevelop] PATCH: Enable filering in open dialog">lluis at ximian.com
       </A><BR>
    <I>Thu Mar 16 06:06:29 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="003407.html">[MonoDevelop] PATCH: Enable filering in open dialog
</A></li>
        <LI>Next message: <A HREF="003409.html">[MonoDevelop] Re: Monodevelop-list Digest, Vol 11, Issue 24
	trusted sender for your account)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3408">[ date ]</a>
              <a href="thread.html#3408">[ thread ]</a>
              <a href="subject.html#3408">[ subject ]</a>
              <a href="author.html#3408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>El jue, 16-03-2006 a las 10:15 +0100, &quot;David Makovsk&#253; (Yakeen)&quot;
escribi&#243;:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> can someone look at it? Any suggestions?
</I>&gt;<i> Does someone have idea how to add other types like HTML which has not
</I>&gt;<i> Language Binding?
</I>&gt;<i> Or should be code files be grouped?
</I>
There is an extension element for specifying filters
(/SharpDevelop/Workbench/FileFilter) which is not being used right now.
Maybe we should implement support for it.

&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> David
</I>&gt;<i> 
</I>&gt;<i> documento de texto sencillo adjunto (fileselector-filters.patch)
</I>&gt;<i> Index: Core/src/MonoDevelop.Projects/MonoDevelop.Projects/ILanguageBinding.cs
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Core/src/MonoDevelop.Projects/MonoDevelop.Projects/ILanguageBinding.cs	(revision 57975)
</I>&gt;<i> +++ Core/src/MonoDevelop.Projects/MonoDevelop.Projects/ILanguageBinding.cs	(working copy)
</I>&gt;<i> @@ -23,6 +23,11 @@
</I>&gt;<i>  		/// The language for this language binding.
</I>&gt;<i>  		/// &lt;/returns&gt;
</I>&gt;<i>  		string Language { get; }
</I>&gt;<i> +
</I>&gt;<i> +		/// &lt;returns&gt;
</I>&gt;<i> +		/// Supported MIME Types by this language binding.
</I>&gt;<i> +		/// &lt;/returns&gt;
</I>&gt;<i> +		string[] MimeTypes { get; }
</I>&gt;<i>  		
</I>&gt;<i>  		/// &lt;summary&gt;
</I>&gt;<i>  		/// Used by Comment and Uncomment operations and by Centaurus Addin.
</I>&gt;<i> Index: Core/src/MonoDevelop.Projects/ChangeLog
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Core/src/MonoDevelop.Projects/ChangeLog	(revision 57975)
</I>&gt;<i> +++ Core/src/MonoDevelop.Projects/ChangeLog	(working copy)
</I>&gt;<i> @@ -1,3 +1,7 @@
</I>&gt;<i> +2006-03-16 David Makovsk&#253; (Yakeen) &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">yakeen at sannyas-on.net</A>&gt;
</I>&gt;<i> +
</I>&gt;<i> +	* MonoDevelop.Projects/ILanguageBinding.cs: Added MimeTypes property to interface
</I>&gt;<i> +
</I>&gt;<i>  2006-03-08 Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">lluis at novell.com</A>&gt;
</I>&gt;<i>  
</I>&gt;<i>  	* MonoDevelop.Projects.Text/TextFile.cs: Some small improvements.
</I>&gt;<i> Index: Core/src/MonoDevelop.Ide/MonoDevelop.Ide.Commands/FileCommands.cs
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Core/src/MonoDevelop.Ide/MonoDevelop.Ide.Commands/FileCommands.cs	(revision 57975)
</I>&gt;<i> +++ Core/src/MonoDevelop.Ide/MonoDevelop.Ide.Commands/FileCommands.cs	(working copy)
</I>&gt;<i> @@ -84,37 +84,35 @@
</I>&gt;<i>  	{
</I>&gt;<i>  		protected override void Run()
</I>&gt;<i>  		{
</I>&gt;<i> -			//string[] fileFilters  = (string[])(AddInTreeSingleton.AddInTree.GetTreeNode(&quot;/SharpDevelop/Workbench/FileFilter&quot;).BuildChildItems(this)).ToArray(typeof(string));
</I>&gt;<i> -			//bool foundFilter      = false;
</I>&gt;<i> -			// search filter like in the current selected project
</I>&gt;<i> -			/*
</I>&gt;<i> -			IProjectService projectService = (IProjectService)MonoDevelop.Core.ServiceManager.GetService(typeof(IProjectService));
</I>&gt;<i> -			
</I>&gt;<i> -			if (projectService.CurrentSelectedProject != null) {
</I>&gt;<i> -				LanguageBindingService languageBindingService = (LanguageBindingService)MonoDevelop.Core.ServiceManager.GetService(typeof(LanguageBindingService));
</I>&gt;<i> +			using (FileSelector fs = new FileSelector (GettextCatalog.GetString (&quot;File to Open&quot;))) {
</I>&gt;<i>  				
</I>&gt;<i> -				LanguageBindingCodon languageCodon = languageBindingService.GetCodonPerLanguageName(projectService.CurrentSelectedProject.ProjectType);
</I>&gt;<i> -				for (int i = 0; !foundFilter &amp;&amp; i &lt; fileFilters.Length; ++i) {
</I>&gt;<i> -					for (int j = 0; !foundFilter &amp;&amp; j &lt; languageCodon.Supportedextensions.Length; ++j) {
</I>&gt;<i> -						if (fileFilters[i].IndexOf(languageCodon.Supportedextensions[j]) &gt;= 0) {
</I>&gt;<i> -							break;
</I>&gt;<i> -						}
</I>&gt;<i> -					}
</I>&gt;<i> +				// Soluton/Project Files Filter
</I>&gt;<i> +				Gtk.FileFilter projectsFilter = new Gtk.FileFilter ();
</I>&gt;<i> +				projectsFilter.Name = GettextCatalog.GetString (&quot;Solution/Project Files&quot;);
</I>&gt;<i> +				projectsFilter.AddPattern (&quot;*.mds&quot;);
</I>&gt;<i> +				projectsFilter.AddPattern (&quot;*.mdp&quot;);
</I>&gt;<i> +				fs.AddFilter (projectsFilter);
</I>&gt;<i> +				
</I>&gt;<i> +				// Supported Language Files
</I>&gt;<i> +				LanguageBindingService languageBindingService = (LanguageBindingService)MonoDevelop.Core.ServiceManager.GetService (typeof (LanguageBindingService));
</I>&gt;<i> +				ILanguageBinding[] languageBindings = languageBindingService.GetLanguageBindings ();
</I>&gt;<i> +				foreach (ILanguageBinding lb in languageBindings)
</I>&gt;<i> +				{
</I>&gt;<i> +					Gtk.FileFilter filter = new Gtk.FileFilter ();
</I>&gt;<i> +					filter.Name = String.Format (GettextCatalog.GetString (&quot;{0} Files&quot;), lb.Language);
</I>&gt;<i> +					filter.AddPattern (lb.GetFileName (&quot;*&quot;));
</I>&gt;<i> +					foreach (string mimeType in lb.MimeTypes)
</I>&gt;<i> +						filter.AddMimeType (mimeType);
</I>&gt;<i> +					fs.AddFilter (filter);
</I>&gt;<i>  				}
</I>&gt;<i> -			}
</I>&gt;<i> -			
</I>&gt;<i> -			// search filter like in the current open file
</I>&gt;<i> -			if (!foundFilter) {
</I>&gt;<i> -				IWorkbenchWindow window = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
</I>&gt;<i> -				if (window != null) {
</I>&gt;<i> -					for (int i = 0; i &lt; fileFilters.Length; ++i) {
</I>&gt;<i> -						if (fileFilters[i].IndexOf(Path.GetExtension(window.ViewContent.ContentName == null ? window.ViewContent.UntitledName : window.ViewContent.ContentName)) &gt;= 0) {
</I>&gt;<i> -							break;
</I>&gt;<i> -						}
</I>&gt;<i> -					}
</I>&gt;<i> -				}
</I>&gt;<i> -			}*/
</I>&gt;<i> -			using (FileSelector fs = new FileSelector (GettextCatalog.GetString (&quot;File to Open&quot;))) {
</I>&gt;<i> +
</I>&gt;<i> +				// Show All Files
</I>&gt;<i> +				Gtk.FileFilter allFilter = new Gtk.FileFilter ();
</I>&gt;<i> +				allFilter.Name = GettextCatalog.GetString (&quot;All Files&quot;);
</I>&gt;<i> +				allFilter.AddPattern (&quot;*&quot;);
</I>&gt;<i> +				fs.AddFilter (allFilter);
</I>&gt;<i> +
</I>&gt;<i> +
</I>&gt;<i>  				int response = fs.Run ();
</I>&gt;<i>  				string name = fs.Filename;
</I>&gt;<i>  				fs.Hide ();
</I>&gt;<i> Index: Core/src/MonoDevelop.Ide/ChangeLog
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Core/src/MonoDevelop.Ide/ChangeLog	(revision 57975)
</I>&gt;<i> +++ Core/src/MonoDevelop.Ide/ChangeLog	(working copy)
</I>&gt;<i> @@ -1,3 +1,7 @@
</I>&gt;<i> +2006-03-16 David Makovsk&#253; (Yakeen) &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">yakeen at sannyas-on.net</A>&gt;
</I>&gt;<i> +
</I>&gt;<i> +	* MonoDevelop.Ide.Commands/FileCommands.cs: Added filtering to Open dialog.
</I>&gt;<i> +
</I>&gt;<i>  2006-03-14 Michael Hutchinson  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">m.j.hutchinson at gmail.com</A>&gt;
</I>&gt;<i>  
</I>&gt;<i>  	* MonoDevelop.Ide.Gui.Dialogs/IncludeFilesDialog.cs:
</I>&gt;<i> Index: Extras/ILAsmBinding/ChangeLog
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Extras/ILAsmBinding/ChangeLog	(revision 57975)
</I>&gt;<i> +++ Extras/ILAsmBinding/ChangeLog	(working copy)
</I>&gt;<i> @@ -1,3 +1,7 @@
</I>&gt;<i> +2006-03-16 David Makovsk&#253; (Yakeen) &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">yakeen at sannyas-on.net</A>&gt;
</I>&gt;<i> +
</I>&gt;<i> +	* ILAsmLanguageBinding.cs: Track changes in ILanguageBinding.
</I>&gt;<i> +
</I>&gt;<i>  2005-12-13  Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">lluis at novell.com</A>&gt; 
</I>&gt;<i>  
</I>&gt;<i>  	* ILAsmLanguageBinding.cs: Implemented the new methods in
</I>&gt;<i> Index: Extras/ILAsmBinding/ILAsmLanguageBinding.cs
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Extras/ILAsmBinding/ILAsmLanguageBinding.cs	(revision 57975)
</I>&gt;<i> +++ Extras/ILAsmBinding/ILAsmLanguageBinding.cs	(working copy)
</I>&gt;<i> @@ -26,6 +26,7 @@
</I>&gt;<i>  	public class ILAsmLanguageBinding : IDotNetLanguageBinding
</I>&gt;<i>  	{
</I>&gt;<i>  		public const string LanguageName = &quot;ILAsm&quot;;
</I>&gt;<i> +		private static readonly string[] mimeTypes = { &quot;text/x-msil&quot; };
</I>&gt;<i>  		
</I>&gt;<i>  		ILAsmCompilerManager  compilerManager  = new ILAsmCompilerManager();
</I>&gt;<i>  		
</I>&gt;<i> @@ -34,6 +35,12 @@
</I>&gt;<i>  				return LanguageName;
</I>&gt;<i>  			}
</I>&gt;<i>  		}
</I>&gt;<i> +
</I>&gt;<i> +		public string[] MimeTypes {
</I>&gt;<i> +				get {
</I>&gt;<i> +					return mimeTypes;
</I>&gt;<i> +				}
</I>&gt;<i> +		}
</I>&gt;<i>  		
</I>&gt;<i>  		public bool IsSourceCodeFile (string fileName)
</I>&gt;<i>  		{
</I>&gt;<i> Index: Extras/VBNetBinding/ChangeLog
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Extras/VBNetBinding/ChangeLog	(revision 57975)
</I>&gt;<i> +++ Extras/VBNetBinding/ChangeLog	(working copy)
</I>&gt;<i> @@ -1,3 +1,7 @@
</I>&gt;<i> +2006-03-16 David Makovsk&#253; (Yakeen) &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">yakeen at sannyas-on.net</A>&gt;
</I>&gt;<i> +
</I>&gt;<i> +	* VBLanguageBinding.cs: Track changes in ILanguageBinding.
</I>&gt;<i> +
</I>&gt;<i>  2006-01-30 Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">lluis at novell.com</A>&gt;   
</I>&gt;<i>  
</I>&gt;<i>  	* VBBindingCompilerServices.cs:
</I>&gt;<i> Index: Extras/VBNetBinding/VBLanguageBinding.cs
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Extras/VBNetBinding/VBLanguageBinding.cs	(revision 57975)
</I>&gt;<i> +++ Extras/VBNetBinding/VBLanguageBinding.cs	(working copy)
</I>&gt;<i> @@ -23,7 +23,8 @@
</I>&gt;<i>  {
</I>&gt;<i>  	public class VBLanguageBinding : IDotNetLanguageBinding
</I>&gt;<i>  	{
</I>&gt;<i> -		public const string LanguageName = &quot;VBNet&quot;;
</I>&gt;<i> +		public const string LanguageName = &quot;VBNet&quot;;
</I>&gt;<i> +		private static readonly string[] mimeTypes = { &quot;text/x-vb&quot; };
</I>&gt;<i>  		
</I>&gt;<i>  		VBBindingCompilerServices   compilerServices  = new VBBindingCompilerServices();
</I>&gt;<i>  		VBCodeProvider provider;
</I>&gt;<i> @@ -33,6 +34,12 @@
</I>&gt;<i>  			get {
</I>&gt;<i>  				return LanguageName;
</I>&gt;<i>  			}
</I>&gt;<i> +		}
</I>&gt;<i> +
</I>&gt;<i> +		public string[] MimeTypes {
</I>&gt;<i> +				get {
</I>&gt;<i> +					return mimeTypes;
</I>&gt;<i> +				}
</I>&gt;<i>  		}
</I>&gt;<i>  		
</I>&gt;<i>  		public bool IsSourceCodeFile (string fileName)
</I>&gt;<i> Index: Extras/CSharpBinding/CSharpLanguageBinding.cs
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Extras/CSharpBinding/CSharpLanguageBinding.cs	(revision 57975)
</I>&gt;<i> +++ Extras/CSharpBinding/CSharpLanguageBinding.cs	(working copy)
</I>&gt;<i> @@ -28,6 +28,7 @@
</I>&gt;<i>  	public class CSharpLanguageBinding : IDotNetLanguageBinding
</I>&gt;<i>  	{
</I>&gt;<i>  		public const string LanguageName = &quot;C#&quot;;
</I>&gt;<i> +		private static readonly string[] mimeTypes = { &quot;text/x-csharp&quot; };
</I>&gt;<i>  		
</I>&gt;<i>  		CSharpBindingCompilerManager   compilerManager  = new CSharpBindingCompilerManager();
</I>&gt;<i>  		CSharpCodeProvider provider;
</I>&gt;<i> @@ -38,6 +39,12 @@
</I>&gt;<i>  			}
</I>&gt;<i>  		}
</I>&gt;<i>  		
</I>&gt;<i> +		public string[] MimeTypes {
</I>&gt;<i> +				get {
</I>&gt;<i> +					return mimeTypes;
</I>&gt;<i> +				}
</I>&gt;<i> +		}
</I>&gt;<i> +
</I>&gt;<i>  		public bool IsSourceCodeFile (string fileName)
</I>&gt;<i>  		{
</I>&gt;<i>  			Debug.Assert(compilerManager != null);
</I>&gt;<i> Index: Extras/CSharpBinding/ChangeLog
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Extras/CSharpBinding/ChangeLog	(revision 57975)
</I>&gt;<i> +++ Extras/CSharpBinding/ChangeLog	(working copy)
</I>&gt;<i> @@ -1,3 +1,7 @@
</I>&gt;<i> +2006-03-16 David Makovsk&#253; (Yakeen) &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">yakeen at sannyas-on.net</A>&gt;
</I>&gt;<i> +
</I>&gt;<i> +	* CSharpLanguageBinding.cs: Track changes in ILanguageBinding.
</I>&gt;<i> +
</I>&gt;<i>  2006-03-08 Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">lluis at novell.com</A>&gt;   
</I>&gt;<i>  
</I>&gt;<i>  	* Parser/CodeGenerator.cs: Fixed issues when finding class
</I>&gt;<i> Index: Extras/JavaBinding/JavaLanguageBinding.cs
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Extras/JavaBinding/JavaLanguageBinding.cs	(revision 57975)
</I>&gt;<i> +++ Extras/JavaBinding/JavaLanguageBinding.cs	(working copy)
</I>&gt;<i> @@ -29,6 +29,8 @@
</I>&gt;<i>  	public class JavaLanguageBinding : IDotNetLanguageBinding
</I>&gt;<i>  	{
</I>&gt;<i>  		internal const string LanguageName = &quot;Java&quot;;
</I>&gt;<i> +		private static readonly string[] mimeTypes = { &quot;text/x-java&quot; };
</I>&gt;<i> +
</I>&gt;<i>  		JavaBindingCompilerServices compilerServices = new JavaBindingCompilerServices ();
</I>&gt;<i>  		
</I>&gt;<i>  		static GlobalProperties props = new GlobalProperties ();
</I>&gt;<i> @@ -42,6 +44,12 @@
</I>&gt;<i>  				return LanguageName;
</I>&gt;<i>  			}
</I>&gt;<i>  		}
</I>&gt;<i> +
</I>&gt;<i> +		public string[] MimeTypes {
</I>&gt;<i> +				get {
</I>&gt;<i> +					return mimeTypes;
</I>&gt;<i> +				}
</I>&gt;<i> +		}
</I>&gt;<i>  		
</I>&gt;<i>  		public bool IsSourceCodeFile (string fileName)
</I>&gt;<i>  		{
</I>&gt;<i> Index: Extras/JavaBinding/ChangeLog
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Extras/JavaBinding/ChangeLog	(revision 57975)
</I>&gt;<i> +++ Extras/JavaBinding/ChangeLog	(working copy)
</I>&gt;<i> @@ -1,3 +1,7 @@
</I>&gt;<i> +2006-03-16 David Makovsk&#253; (Yakeen) &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">yakeen at sannyas-on.net</A>&gt;
</I>&gt;<i> +
</I>&gt;<i> +	* JavaLanguageBinding.cs: Track changes in ILanguageBinding.
</I>&gt;<i> +
</I>&gt;<i>  2006-01-30 Lluis Sanchez Gual  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">lluis at novell.com</A>&gt;   
</I>&gt;<i>  
</I>&gt;<i>  	* Parser/Resolver.cs:
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodevelop-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">Monodevelop-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>
</I>
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003407.html">[MonoDevelop] PATCH: Enable filering in open dialog
</A></li>
	<LI>Next message: <A HREF="003409.html">[MonoDevelop] Re: Monodevelop-list Digest, Vol 11, Issue 24
	trusted sender for your account)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3408">[ date ]</a>
              <a href="thread.html#3408">[ thread ]</a>
              <a href="subject.html#3408">[ subject ]</a>
              <a href="author.html#3408">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
