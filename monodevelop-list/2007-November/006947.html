<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Further problems with libraries and assemblies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Further%20problems%20with%20libraries%20and%20assemblies&In-Reply-To=8C9F9B3169E2BA0-16BC-17D9%40FRR4-L29.sis.aol.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006946.html">
   <LINK REL="Next"  HREF="006951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Further problems with libraries and assemblies</H1>
    <B>Lluis Sanchez</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Further%20problems%20with%20libraries%20and%20assemblies&In-Reply-To=8C9F9B3169E2BA0-16BC-17D9%40FRR4-L29.sis.aol.com"
       TITLE="[MonoDevelop] Further problems with libraries and assemblies">lluis at ximian.com
       </A><BR>
    <I>Tue Nov 20 13:54:44 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="006946.html">[MonoDevelop] Further problems with libraries and assemblies
</A></li>
        <LI>Next message: <A HREF="006951.html">[MonoDevelop] Further problems with libraries and assemblies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6947">[ date ]</a>
              <a href="thread.html#6947">[ thread ]</a>
              <a href="subject.html#6947">[ subject ]</a>
              <a href="author.html#6947">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>El dt 20 de 11 del 2007 a les 12:36 -0500, en/na <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">dsmithers at talktalk.net</A>
va escriure:
&gt;<i> Hi,
</I>&gt;<i> I am now using MonoDevelop 0.15 (0.17 is not stable with Ubuntu 7.04)
</I>
MD 0.17 works great in Ubuntu 7.04. We haven't got any bug report about
problems with that distro.

&gt;<i> 
</I>&gt;<i> I am still struggling with libraries, and have found a way that works
</I>&gt;<i> most of the time.
</I>&gt;<i> I have written and compiled a library using 
</I>&gt;<i> 
</I>&gt;<i> gmcs -target:module -out:lib/mysock.dll src/mysock.cs
</I>&gt;<i> 
</I>&gt;<i> I have populated an AssemblyInfo.cs file and compiled it with 
</I>&gt;<i> 
</I>&gt;<i> gmsc -target:lib -out:lib/mysocklib.dll -addmodule:lib/mysock.dll
</I>&gt;<i> src/AssemblyInfo.cs
</I>&gt;<i> 
</I>&gt;<i> As well as a line to a key file and various other strings,
</I>&gt;<i> AssemblyInfo.cs contained the line
</I>&gt;<i> [assembly: AssemblyVersion(&quot;1.0.*.*&quot;)] 
</I>&gt;<i> 
</I>&gt;<i> but I found this to be very erratic. I kept getting invalid assembly
</I>&gt;<i> info compile errors after rebuilding the library.
</I>&gt;<i> I changed it to read 
</I>&gt;<i> 
</I>&gt;<i> [assembly: AssemblyVersion(&quot;1.0.0.0&quot;)] 
</I>&gt;<i> 
</I>&gt;<i> I also found that I needed to add a link to mysock.dll to the bin
</I>&gt;<i> directory containing my application.
</I>&gt;<i> 
</I>&gt;<i> Does this all look sensible? 
</I>
To create a library, just run 

gmcs -target:lib src/mysock.cs src/AssemblyInfo.cs

&gt;<i> How can I specify which versions of an assembly are compatible with my
</I>&gt;<i> application?
</I>
It depends. If the library is installed in the GAC, your application
will load only the library that exactly matches the version with which
your application was compiled. If there isn't any library with the same
exact version, your app will crash (this behavior can be changed by
installing 'policies', which allow mapping one library version to
another).

If the library is not installed in the GAC, your app will load any
version you may have in the application directory.

&gt;<i> 
</I>&gt;<i> I also _sometimes_ have problems finding the
</I>&gt;<i> System.Net.Sockets.UdpClient::set_EnableBroadcast when I run the
</I>&gt;<i> binary. There is no compilation error, but I get a
</I>&gt;<i> System.MissingMethodException raised. I say sometimes as some builds
</I>&gt;<i> run correctly and the next build might fail. Usually rebuilding the
</I>&gt;<i> library is sufficient to sort this out.
</I>&gt;<i> 
</I>&gt;<i> The error is as follows:
</I>&gt;<i> 
</I>&gt;<i> Unhandled exception: System.MissingMethodException: Method not found
</I>&gt;<i> 'System.Net.Sockets.UdpClient::set_EnableBroadcast'
</I>&gt;<i>   at &lt;0x00000&gt; &lt;unknown method&gt;
</I>&gt;<i>   at AGSocket.CSocket.create(Int32 port, System.Byte[] address,
</I>&gt;<i> AGSocket.FCallback cb) [0x00000]
</I>&gt;<i>   at Main..ctor() [0x00000]
</I>&gt;<i>   at gtkclient.MainClass.Main (System.string[] args) [0x00000]
</I>&gt;<i> 
</I>&gt;<i> I have a native C# application that uses this library that behaves
</I>&gt;<i> correctly.
</I>
Be careful when mixing assemblies compiled with mcs (.NET 1.1) and gmcs
(.NET 2.0). UdpClient.EnableBroadcast was introduced in .NET 2.0. So for
example let's say you create a library which sets
UdpClient.EnableBroadcast and you compile it with gmcs. Then, you create
an application which uses your library, but you compile that application
with mcs. When you run your application using &quot;mono yourapp.exe&quot;, mono
will detect that yourapp.exe was compiled with the 1.1 runtime, and will
load the 1.1 libraries. So it will load the 1.1 version of UdpClient,
which doesn't have the EnableBroadcast property, and you'll get the
MissingMethod exception.

&gt;<i> 
</I>&gt;<i> Is there some path variable that I need to set?
</I>&gt;<i> What about MONO_PATH? the runtime errors sometimes mention this, but
</I>&gt;<i> the main mono documentation deprecates its use.
</I>
It is not a path problem, just a conflict of runtime versions.

Lluis.


</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006946.html">[MonoDevelop] Further problems with libraries and assemblies
</A></li>
	<LI>Next message: <A HREF="006951.html">[MonoDevelop] Further problems with libraries and assemblies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6947">[ date ]</a>
              <a href="thread.html#6947">[ thread ]</a>
              <a href="subject.html#6947">[ subject ]</a>
              <a href="author.html#6947">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
