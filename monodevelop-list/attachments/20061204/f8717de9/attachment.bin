Index: configure.in
===================================================================
--- configure.in	(revision 68951)
+++ configure.in	(working copy)
@@ -149,20 +149,6 @@
 	AC_PATH_PROG(NCC, ncc)
 fi
 
-dnl nunit
-MONO_NUNIT_REQUIRED_VERSION=1.1.8
-NUNIT_REQUIRED_VERSION=2.2.0
-AC_ARG_ENABLE(nunit,
-    AC_HELP_STRING([--enable-nunit],[enable support for NUnit [default=yes]]),
-	enable_nunit=${enableval}, enable_nunit=yes)
-if test "x$enable_nunit" = "xyes"; then
-	PKG_CHECK_MODULES(NUNIT, nunit >= 2.2.0, [],
-	[PKG_CHECK_MODULES(MONO_NUNIT, mono-nunit >= 1.1.9)
-		NUNIT_LIBS="$MONO_NUNIT_LIBS"
-	])
-fi
-AM_CONDITIONAL(ENABLE_NUNIT, test x$enable_nunit = xyes)
-
 AC_ARG_ENABLE(monoextensions,
 	AC_HELP_STRING([--enable-monoextensions],
 		[enable extensions for Mono development [default=yes]]),
@@ -170,12 +156,6 @@
 
 AM_CONDITIONAL(ENABLE_MONOEXTENSIONS, test x$enable_monoextensions = xyes)
 
-if test "x$enable_monoextensions" = "xyes"; then
-	if test "x$enable_nunit" = "xno"; then
-		AC_MSG_ERROR([The NUnit addin is required to enable the extensions for Mono development (use --enable-nunit)])
-	fi
-fi
-
 AC_ARG_ENABLE(versioncontrol,
 	AC_HELP_STRING([--enable-versioncontrol],
 		[enable version control support [default=yes]]),
@@ -424,7 +404,6 @@
 echo "   * java support: $enable_java"
 echo "   * boo support: $enable_boo"
 echo "   * Nemerle support: $enable_nemerle"
-echo "   * NUnit support: $enable_nunit"
 echo "   * Mono class library development extensions: $enable_monoextensions"
 echo "   * Version control support: $enable_versioncontrol"
 echo "   *   Providers:"
Index: Extras/NUnit/MonoDevelopNUnit.addin.xml
===================================================================
--- Extras/NUnit/MonoDevelopNUnit.addin.xml	(revision 68951)
+++ Extras/NUnit/MonoDevelopNUnit.addin.xml	(working copy)
@@ -9,15 +9,15 @@
 
 	<Runtime>
 		<Import assembly="MonoDevelop.NUnit.dll" />
+		<Import assembly="nunit.core.dll" />
 	</Runtime>
 	
 	<Dependencies>
-	    <AddIn id="MonoDevelop.Core" version="0.12.0"/>
-	    <AddIn id="MonoDevelop.Core.Gui" version="0.12.0"/>
-	    <AddIn id="MonoDevelop.Projects" version="0.12.0"/>
-	    <AddIn id="MonoDevelop.Projects.Gui" version="0.12.0"/>
+		<AddIn id="MonoDevelop.Core" version="0.12.0"/>
+		<AddIn id="MonoDevelop.Core.Gui" version="0.12.0"/>
+		<AddIn id="MonoDevelop.Projects" version="0.12.0"/>
+		<AddIn id="MonoDevelop.Projects.Gui" version="0.12.0"/>
 		<AddIn id="MonoDevelop.Ide" version="0.12.0"/>
-		<Assembly name="nunit.framework, Version=2.2.0.0" package="nunit or mono-nunit"/>
 	</Dependencies>
 
 	<Extension path="/Workspace/Services">
Index: Extras/NUnit/Services/ExternalTestRunner.cs
===================================================================
--- Extras/NUnit/Services/ExternalTestRunner.cs	(revision 68951)
+++ Extras/NUnit/Services/ExternalTestRunner.cs	(working copy)
@@ -187,6 +187,10 @@
 		{
 		}
 
+		void EventListener.TestOutput (TestOutput testOutput)
+		{
+		}
+
 		void EventListener.TestStarted (TestCase testCase)
 		{
 			if (singleTestRun)
Index: Extras/NUnit/Services/NUnitAssemblyTestSuite.cs
===================================================================
--- Extras/NUnit/Services/NUnitAssemblyTestSuite.cs	(revision 68951)
+++ Extras/NUnit/Services/NUnitAssemblyTestSuite.cs	(working copy)
@@ -431,6 +431,11 @@
 			{
 				return test.Name == name;
 			}
+
+			public bool Exclude
+			{
+				get { return false; }
+			}
 		}
 	}
 }
Index: Extras/NUnit/Makefile.am
===================================================================
--- Extras/NUnit/Makefile.am	(revision 68951)
+++ Extras/NUnit/Makefile.am	(working copy)
@@ -2,8 +2,9 @@
 ADDIN_BUILD = $(top_builddir)/build/AddIns/NUnit
 ASSEMBLY = $(ADDIN_BUILD)/MonoDevelop.NUnit.dll
 
-REFS = -r:System \
-       -r:System.Xml \
+REFS =	-r:System \
+	-r:System.Xml \
+	-r:$(srcdir)/lib/nunit.core.dll \
 	-r:$(top_builddir)/build/bin/MonoDevelop.Core.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Core.Gui.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Projects.dll \
@@ -65,29 +66,33 @@
 Gui/NUnit.Loading.png \
 Gui/NUnit.Success.png
 
+NUNIT_FILES = \
+nunit.core.dll
+
+SRC_NUNIT_FILES = $(addprefix lib/, $(NUNIT_FILES))
+BUILD_NUNIT_FILES = $(addprefix $(ADDIN_BUILD)/, $(NUNIT_FILES))
+
 ADDIN = MonoDevelopNUnit.addin.xml
 
-if ENABLE_NUNIT
-all: $(ASSEMBLY) $(ADDIN_BUILD)/$(ADDIN)
-else
-all:
-endif
+all: $(ASSEMBLY) $(ADDIN_BUILD)/$(ADDIN) $(BUILD_NUNIT_FILES)
 
 $(ADDIN_BUILD)/$(ADDIN): $(srcdir)/$(ADDIN)
 	mkdir -p $(ADDIN_BUILD)
 	cp $(srcdir)/$(ADDIN) $(ADDIN_BUILD)/.
 
+$(ADDIN_BUILD)/%: $(srcdir)/lib/%
+	mkdir -p $(ADDIN_BUILD)
+	cp $< $@
+
 $(ASSEMBLY): $(FILES) $(RES)
 	mkdir -p $(ADDIN_BUILD)
 	$(CSC) $(CSC_FLAGS) $(REFS) $(RES:%=/resource:%) $(build_sources) -out:$@ -target:library
 
-if ENABLE_NUNIT
+
 assemblydir = $(MD_ADDIN_DIR)/NUnit
-assembly_DATA = $(ASSEMBLY) $(ADDIN)
+assembly_DATA = $(ASSEMBLY) $(ADDIN) $(SRC_NUNIT_FILES)
 
-endif
+CLEANFILES = $(ASSEMBLY) $(ASSEMBLY).mdb $(BUILD_NUNIT_FILES)
+EXTRA_DIST = $(FILES) $(ADDIN) $(RES) $(SRC_NUNIT_FILES)
 
-CLEANFILES = $(ASSEMBLY) $(ASSEMBLY).mdb
-EXTRA_DIST = $(FILES) $(ADDIN) $(RES)
-
 include $(top_srcdir)/Makefile.include