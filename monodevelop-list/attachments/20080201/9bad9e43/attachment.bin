Index: EditorBindings.glade
===================================================================
--- EditorBindings.glade	(revision 94516)
+++ EditorBindings.glade	(working copy)
@@ -533,6 +533,94 @@
 	  <property name="fill">True</property>
 	</packing>
       </child>
+
+      <child>
+	<widget class="GtkVBox" id="vbox66">
+	  <property name="homogeneous">False</property>
+	  <property name="spacing">6</property>
+
+	  <child>
+	    <widget class="GtkLabel" id="label66">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">&lt;b&gt;Color Scheme&lt;/b&gt;</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">True</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="padding">0</property>
+	      <property name="expand">False</property>
+	      <property name="fill">False</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkHBox" id="hbox35">
+	      <property name="visible">True</property>
+	      <property name="homogeneous">False</property>
+	      <property name="spacing">6</property>
+
+	      <child>
+		<widget class="GtkLabel" id="label67">
+		  <property name="visible">True</property>
+		  <property name="label" translatable="yes">    </property>
+		  <property name="use_underline">False</property>
+		  <property name="use_markup">False</property>
+		  <property name="justify">GTK_JUSTIFY_LEFT</property>
+		  <property name="wrap">False</property>
+		  <property name="selectable">False</property>
+		  <property name="xalign">0.5</property>
+		  <property name="yalign">0.5</property>
+		  <property name="xpad">0</property>
+		  <property name="ypad">0</property>
+		  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+		  <property name="width_chars">-1</property>
+		  <property name="single_line_mode">False</property>
+		  <property name="angle">0</property>
+		</widget>
+		<packing>
+		  <property name="padding">0</property>
+		  <property name="expand">False</property>
+		  <property name="fill">False</property>
+		</packing>
+	      </child>
+
+	      <child>
+		<widget class="GtkComboBox" id="comboColorScheme">
+		  <property name="visible">True</property>
+		  <property name="add_tearoffs">False</property>
+		  <property name="focus_on_click">True</property>
+		</widget>
+		<packing>
+		  <property name="padding">0</property>
+		  <property name="expand">True</property>
+		  <property name="fill">True</property>
+		</packing>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="padding">0</property>
+	      <property name="expand">True</property>
+	      <property name="fill">True</property>
+	    </packing>
+	  </child>
+	</widget>
+	<packing>
+	  <property name="padding">0</property>
+	  <property name="expand">False</property>
+	  <property name="fill">False</property>
+	</packing>
+      </child>
     </widget>
   </child>
 </widget>
Index: ChangeLog
===================================================================
--- ChangeLog	(revision 94516)
+++ ChangeLog	(working copy)
@@ -1,3 +1,8 @@
+2008-02-01  Ben Motmans <ben.motmans@gmail.com>
+
+	* MonoDevelop.SourceEditor.Gui.OptionPanels/GeneralTextEditorPanel.cs,
+	EditorBindings.glade: Added widget to change the color scheme
+
 2008-01-29  Mike Kr√ºger <mkrueger@novell.com> 
 
 	* MonoDevelop.SourceEditor.Gui/SourceEditorBuffer.cs: clipboard handler
Index: MonoDevelop.SourceEditor.Gui.OptionPanels/GeneralTextEditorPanel.cs
===================================================================
--- MonoDevelop.SourceEditor.Gui.OptionPanels/GeneralTextEditorPanel.cs	(revision 94516)
+++ MonoDevelop.SourceEditor.Gui.OptionPanels/GeneralTextEditorPanel.cs	(working copy)
@@ -25,6 +25,7 @@
 
 using Gtk;
 using Pango;
+using GtkSourceView;
 
 using MonoDevelop.Core;
 using MonoDevelop.Core.Gui.Dialogs;
@@ -64,7 +65,10 @@
 			[Glade.Widget] RadioButton use_monospace;
 			[Glade.Widget] RadioButton use_sans;
 			[Glade.Widget] RadioButton use_cust;
+			[Glade.Widget] ComboBox comboColorScheme;
 			
+			private ListStore storeColorSchemes;
+			
 			public GeneralTextEditorPanelWidget () :  base ("EditorBindings.glade", "GeneralTextEditorPanel")
 			{
 				encodingBox.Destroy(); // this is a really dirty way of hiding encodingBox, but Hide() doesn't work
@@ -117,6 +121,8 @@
 // 				encoding = CharacterEncodings.GetEncodingByIndex(i).CodePage;
 
 // 				textEncodingComboBox.Changed += new EventHandler (OnOptionChanged);
+				
+				LoadColorSchemes ();
 			}
 
 			public void Store ()
@@ -137,12 +143,44 @@
 // 				Console.WriteLine (CharacterEncodings.GetEncodingByIndex (selectedIndex).CodePage);
 // 				((Properties) CustomizationObject).Set (
 // 					"Encoding",CharacterEncodings.GetEncodingByIndex (selectedIndex).CodePage);
+				
+				TreeIter iter;
+				if (comboColorScheme.GetActiveIter (out iter))
+					TextEditorProperties.Properties.Set ("GtkSourceViewStyleScheme", storeColorSchemes.GetValue (iter, 1) as string);
 			}
 			
  			void ItemToggled (object o, EventArgs args)
 			{
 				fontNameDisplayTextBox.Sensitive = use_cust.Active;
 			}
+				
+			private void LoadColorSchemes ()
+			{
+				storeColorSchemes = new ListStore (typeof (string), typeof (string));
+				comboColorScheme.Model = storeColorSchemes;
+				
+				CellRendererText nameRenderer = new CellRendererText ();
+				comboColorScheme.PackStart (nameRenderer, false);
+				comboColorScheme.AddAttribute (nameRenderer, "markup", 0);
+
+				TreeIter selectedIter = TreeIter.Zero;
+				string selectedScheme = TextEditorProperties.Properties.Get<string> ("GtkSourceViewStyleScheme", "classic");
+				
+				SourceStyleSchemeManager mgr = SourceStyleSchemeManager.Default;
+				foreach (string schemeId in mgr.SchemeIds) {
+					SourceStyleScheme scheme = mgr.GetScheme (schemeId);
+
+					string markup = String.Concat ("<b>", scheme.Name, "</b> - ", scheme.Description);
+					TreeIter iter = storeColorSchemes.AppendValues (markup, schemeId);
+					if (schemeId == selectedScheme)
+						selectedIter = iter;
+				}
+				
+				if (TreeIter.Zero.Equals (selectedIter))
+					storeColorSchemes.GetIterFirst (out selectedIter);
+				
+				comboColorScheme.SetActiveIter (selectedIter);
+			}
 		}
 	}
 }