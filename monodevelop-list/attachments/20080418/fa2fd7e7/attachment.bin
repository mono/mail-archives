Index: main/src/addins/CSharpBinding/Gui/CSharpTextEditorExtension.cs
===================================================================
--- main/src/addins/CSharpBinding/Gui/CSharpTextEditorExtension.cs	(リビジョン 101097)
+++ main/src/addins/CSharpBinding/Gui/CSharpTextEditorExtension.cs	(作業コピー)
@@ -298,7 +298,7 @@
 				
 				//handle inserted characters
 				bool reIndent = false;
-				char lastCharInserted = TranslateKeyCharForIndenter (key, keyChar, Editor.GetCharAt (Editor.CursorPosition - 1));
+				char lastCharInserted = TranslateKeyCharForIndenter (key, keyChar, Editor.GetCharAt (Math.Max (0, Editor.CursorPosition - 1)));
 				if (!(oldLine == Editor.CursorLine && lastCharInserted == '\n') && (oldBufLen != Editor.TextLength || lastCharInserted != '\0'))
 					DoPostInsertionSmartIndent (lastCharInserted, hadSelection, out reIndent);
 				
