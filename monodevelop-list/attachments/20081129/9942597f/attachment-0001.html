<tt>
&amp;nbsp;cheers&nbsp;!&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2008/11/29&nbsp;Mike&nbsp;Krüger&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mkrueger@novell.com&quot;&gt;mkrueger@novell.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Hi&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;The&nbsp;main&nbsp;problem,&nbsp;though,&nbsp;is&nbsp;API&nbsp;usability.&nbsp;Imagine&nbsp;that,&nbsp;as&nbsp;a&nbsp;new&lt;br&gt;<br>
&amp;gt;&nbsp;user&nbsp;of&nbsp;this&nbsp;API,&nbsp;you&nbsp;see&nbsp;the&nbsp;following&nbsp;signature&nbsp;in&nbsp;code&nbsp;completion:&lt;br&gt;<br>
&amp;gt;&nbsp;public&nbsp;string&nbsp;GetString&nbsp;(IDomVisitable&nbsp;domVisitable,&nbsp;object&nbsp;settings)&lt;br&gt;<br>
&amp;gt;&nbsp;You&amp;#39;d&nbsp;have&nbsp;no&nbsp;clear&nbsp;idea&nbsp;what&nbsp;the&nbsp;settings&nbsp;object&nbsp;is&nbsp;meant&nbsp;to&nbsp;be.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;It&nbsp;does&nbsp;not&nbsp;make&nbsp;sense&nbsp;for&nbsp;the&nbsp;public&nbsp;ambience&nbsp;API&nbsp;to&nbsp;reflect&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;limitations&nbsp;of&nbsp;the&nbsp;visitor&nbsp;pattern&nbsp;if&nbsp;we&nbsp;can&nbsp;avoid&nbsp;it.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Ok&nbsp;fixed.&nbsp;We&nbsp;now&nbsp;have:&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
public&nbsp;string&nbsp;GetString&nbsp;(IDomVisitable&nbsp;domVisitable,&lt;br&gt;<br>
&lt;/div&gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;OutputSettings&nbsp;settings)&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;public&nbsp;string&nbsp;GetString&nbsp;(IDomVisitable&nbsp;domVisitable,&lt;br&gt;<br>
&lt;/div&gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;OutputFlags&nbsp;flags)&lt;br&gt;<br>
&lt;br&gt;<br>
in&nbsp;the&nbsp;public&nbsp;api&nbsp;and&nbsp;all&nbsp;helper&nbsp;methods&nbsp;became&nbsp;helper&nbsp;properties&nbsp;in&nbsp;the&lt;br&gt;<br>
settings.&nbsp;But&nbsp;the&nbsp;main&nbsp;problem&nbsp;was&nbsp;not&nbsp;the&nbsp;API&nbsp;usability&nbsp;(we&amp;#39;ve&nbsp;enough&lt;br&gt;<br>
&amp;#39;examples&amp;#39;&nbsp;of&nbsp;using&nbsp;ambiences&nbsp;(monkey&nbsp;see/monkey&nbsp;do&nbsp;learning))&nbsp;the&nbsp;main&lt;br&gt;<br>
problem&nbsp;was&nbsp;the&nbsp;limitation&nbsp;of&nbsp;the&nbsp;visitor&nbsp;pattern.&lt;br&gt;<br>
The&nbsp;visitor&nbsp;pattern&nbsp;was&nbsp;the&nbsp;bad&nbsp;guy&nbsp;here.&nbsp;Therefore&nbsp;I&nbsp;changed&nbsp;the&lt;br&gt;<br>
&lt;br&gt;<br>
﻿IDomVisitor&nbsp;{&lt;br&gt;<br>
object&nbsp;Visit&nbsp;(Something&nbsp;something,&nbsp;object&nbsp;data);&lt;br&gt;<br>
..&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
to&lt;br&gt;<br>
&lt;br&gt;<br>
﻿IDomVisitor&amp;lt;T,&nbsp;S&amp;gt;&nbsp;{&lt;br&gt;<br>
S&nbsp;Visit&nbsp;(Something&nbsp;something,&nbsp;T&nbsp;data);&lt;br&gt;<br>
..&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;the&nbsp;ambiences&nbsp;are&nbsp;using&nbsp;an&nbsp;&amp;#39;IDomVisitor&amp;lt;OutputSettings,&nbsp;string&amp;gt;&amp;#39;.&nbsp;So&lt;br&gt;<br>
all&nbsp;methods&nbsp;are&nbsp;now&nbsp;looking&nbsp;like:&lt;br&gt;<br>
&lt;br&gt;<br>
public&nbsp;string&nbsp;Visit&nbsp;(IProperty&nbsp;property,&nbsp;OutputSettings&nbsp;settings)&lt;br&gt;<br>
{&lt;br&gt;<br>
&nbsp;&amp;nbsp;...&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;think&nbsp;this&amp;#39;ll&nbsp;solve&nbsp;all&nbsp;issues&nbsp;I&nbsp;had&nbsp;with&nbsp;using&nbsp;strong&nbsp;typing&nbsp;and&nbsp;will&lt;br&gt;<br>
also&nbsp;solve&nbsp;some&nbsp;issues&nbsp;with&nbsp;the&nbsp;visitor&nbsp;pattern.&nbsp;No&nbsp;more&nbsp;objects&lt;br&gt;<br>
floating&nbsp;around/no&nbsp;boxing/no&nbsp;ugly&nbsp;upcasts.&lt;br&gt;<br>
Maybe&nbsp;we&nbsp;should&nbsp;introduce&nbsp;typed&nbsp;visitors&nbsp;in&nbsp;nrefactory&nbsp;as&nbsp;well,&nbsp;but&lt;br&gt;<br>
that&amp;#39;s&nbsp;a&nbsp;complete&nbsp;different&nbsp;story.&lt;br&gt;<br>
&lt;br&gt;<br>
Regards&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;Mike&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Monodevelop-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Monodevelop-list@lists.ximian.com&quot;&gt;Monodevelop-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/monodevelop-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/monodevelop-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;
</tt>
