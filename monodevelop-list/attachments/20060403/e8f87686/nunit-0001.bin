Index: configure.in
===================================================================
--- configure.in	(revision 58828)
+++ configure.in	(working copy)
@@ -140,13 +140,18 @@
 	AC_PATH_PROG(BOOC, booc)
 fi
 
+dnl nunit
 MONO_NUNIT_REQUIRED_VERSION=1.1.8
+NUNIT_REQUIRED_VERSION=2.2.0
 AC_ARG_ENABLE(nunit,
-	AC_HELP_STRING([--enable-nunit],
-		[enable support for NUnit [default=yes]]),
-	[PKG_CHECK_MODULES(MONO_NUNIT, mono-nunit >= $MONO_NUNIT_REQUIRED_VERSION, enable_nunit=${enableval}, enable_nunit=no)],
-	enable_nunit=yes)
-
+    AC_HELP_STRING([--enable-nunit],[enable support for NUnit [default=yes]]),
+	enable_nunit=${enableval}, enable_nunit=yes)
+if test "x$enable_nunit" = "xyes"; then
+	PKG_CHECK_MODULES(NUNIT, nunit >= 2.2.0, [],
+	[PKG_CHECK_MODULES(MONO_NUNIT, mono-nunit >= 1.1.9)
+		NUNIT_LIBS="$MONO_NUNIT_LIBS"
+	])
+fi
 AM_CONDITIONAL(ENABLE_NUNIT, test x$enable_nunit = xyes)
 
 AC_ARG_ENABLE(monoextensions,
Index: Extras/NUnit/Makefile.am
===================================================================
--- Extras/NUnit/Makefile.am	(revision 58828)
+++ Extras/NUnit/Makefile.am	(working copy)
@@ -4,8 +4,6 @@
 
 REFS = -r:System \
        -r:System.Xml \
-       -r:nunit.framework \
-	-r:nunit.core \
 	-r:$(top_builddir)/build/bin/MonoDevelop.Core.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Core.Gui.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Projects.dll \
@@ -13,7 +11,8 @@
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Components.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Ide.dll \
 	$(GTK_SHARP_LIBS) \
-	$(GLADE_SHARP_LIBS)
+	$(GLADE_SHARP_LIBS) \
+	$(NUNIT_LIBS)
 
 FILES = \
 AssemblyInfo.cs \
Index: Extras/CSharpBinding/Makefile.am
===================================================================
--- Extras/CSharpBinding/Makefile.am	(revision 58828)
+++ Extras/CSharpBinding/Makefile.am	(working copy)
@@ -80,7 +80,7 @@
 	Test/Test.cs
 
 TESTDLLS = \
-	/r:nunit.framework.dll
+	$(NUNIT_LIBS)
 
 TESTASSEMBLY = $(top_builddir)/build/bin/CSharpBinding.Test.dll
 
