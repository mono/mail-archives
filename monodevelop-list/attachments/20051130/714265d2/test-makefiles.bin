Index: Core/src/MonoDevelop.Ide/Makefile.am
===================================================================
--- Core/src/MonoDevelop.Ide/Makefile.am	(revision 53699)
+++ Core/src/MonoDevelop.Ide/Makefile.am	(working copy)
@@ -19,7 +19,7 @@
 	$(GTKHTML_SHARP_LIBS) \
 	$(MONODOC_LIBS)
 
-FILES= \
+FILES = \
 MonoDevelop.Ide.Commands/CustomStringTagProvider.cs \
 MonoDevelop.Ide.Commands/DebugCommands.cs \
 MonoDevelop.Ide.Commands/EditCommands.cs \
@@ -225,7 +225,13 @@
 MonoDevelop.Ide.Gui.Search/SearchProgressMonitor.cs \
 MonoDevelop.Ide.Gui.Pads/SearchResultPad.cs
 
-RES= \
+TESTDLLS = \
+	/r:nunit.framework.dll
+
+TESTFILES = \
+	Test/MonoDevelop.Ide.Tasks/TaskTest.cs
+
+RES = \
 Base.glade \
 icons/SplashScreen.png \
 icons/Icons.AboutImage
@@ -244,6 +250,7 @@
 
 DLLNAME = MonoDevelop.Ide.dll
 ASSEMBLY = $(top_builddir)/build/AddIns/$(DLLNAME)
+TESTASSEMBLY = $(top_builddir)/build/AddIns/MonoDevelop.Ide.Test.dll
 
 ADDIN = MonoDevelop.Ide.addin.xml
 
@@ -263,6 +270,13 @@
 	$(CSC) $(CSC_FLAGS) -debug -codepage:utf8 -out:$@ -target:library $(DLLS) \
 		$(monodoc_libflags) $(RES:%=/resource:%) $(build_sources)
 
+test: all $(TESTASSEMBLY)
+	nunit-console $(TESTASSEMBLY)
+
+$(TESTASSEMBLY) : $(build_test_sources) $(RES)
+	$(CSC) $(CSC_FLAGS) -debug -codepage:utf8 -out:$@ -target:library $(DLLS) $(TESTDLLS) /r:$(ASSEMBLY) \
+		$(monodoc_libflags) $(RES:%=/resource:%) $(build_test_sources)
+
 assemblydir = $(MD_ADDIN_DIR)
 assembly_DATA = $(ASSEMBLY)
 
Index: Makefile.include
===================================================================
--- Makefile.include	(revision 53699)
+++ Makefile.include	(working copy)
@@ -1,3 +1,4 @@
 
 build_sources = $(addprefix $(srcdir)/, $(FILES)) $(GENERATED_FILES)
 
+build_test_sources = $(addprefix $(srcdir)/, $(TESTFILES)) $(GENERATED_FILES)
\ No newline at end of file



