Index: Mono.TextTemplating.Tests/ChangeLog
===================================================================
--- Mono.TextTemplating.Tests/ChangeLog	(revision 147048)
+++ Mono.TextTemplating.Tests/ChangeLog	(working copy)
@@ -1,3 +1,9 @@
+2009-11-27  Olivier Dagenais  <olivier.dagenais@gmail.com>
+
+	* GenerationTests.cs: Make tests independent of the runtime
+	  they are running under by stripping the "autogenerated"
+	  comment (i.e. the first 9 lines).
+
 2009-10-29  Lluis Sanchez Gual  <lluis@novell.com>
 
 	* Mono.TextTemplating.Tests.csproj: Flush.
Index: Mono.TextTemplating.Tests/GenerationTests.cs
===================================================================
--- Mono.TextTemplating.Tests/GenerationTests.cs	(revision 147048)
+++ Mono.TextTemplating.Tests/GenerationTests.cs	(working copy)
@@ -26,6 +26,7 @@
 
 using System;
 using System.Collections.Generic;
+using System.IO;
 using NUnit.Framework;
 using Microsoft.VisualStudio.TextTemplating;
 
@@ -68,7 +69,7 @@
 			string className = "GeneratedTextTransformation4f504ca0";
 			string code = GenerateCode (host, input, className, newline);
 			Assert.AreEqual (0, host.Errors.Count);
-			Assert.AreEqual (expectedOutput, code);
+			Assert.AreEqual (expectedOutput, StripHeader(code, newline));
 		}
 		
 		#region Helpers
@@ -102,22 +103,34 @@
 				return writer.ToString ();
 			}
 		}
+
+        static string StripHeader(string input, string newLine)
+        {
+            using (var writer = new StringWriter())
+            {
+                using (var reader = new StringReader(input))
+                {
+                    for (int i = 0; i < 9; i++)
+                    {
+                        reader.ReadLine();
+                    }
+                    string line;
+                    while (( line = reader.ReadLine() ) != null)
+                    {
+                        writer.Write(line);
+                        writer.Write(newLine);
+                    }
+                }
+                return writer.ToString();
+            }
+        }
 		
 		#endregion
 		
 		#region Expected output strings
 		
 		public static string OutputSample1 = 
-@"// ------------------------------------------------------------------------------
-//  <autogenerated>
-//      This code was generated by a tool.
-//      Mono Runtime Version: 2.0.50727.1433
-// 
-//      Changes to this file may cause incorrect behavior and will be lost if 
-//      the code is regenerated.
-//  </autogenerated>
-// ------------------------------------------------------------------------------
-
+@"
 namespace Microsoft.VisualStudio.TextTemplating {
     
     