Index: Mono.TextEditor.Vi/ViActions.cs
===================================================================
--- Mono.TextEditor.Vi/ViActions.cs	(revision 138243)
+++ Mono.TextEditor.Vi/ViActions.cs	(working copy)
@@ -103,6 +103,7 @@
 		public static void Join (TextEditorData data)
 		{
 			int startLine, endLine, startOffset, length, lastSpaceOffset;
+			bool inComment;
 			
 			if (data.IsSomethingSelected) {
 				startLine = data.Document.OffsetToLineNumber (data.SelectionRange.Offset);
@@ -121,13 +122,25 @@
 			LineSegment seg = data.Document.GetLine (startLine);
 			startOffset = seg.Offset;
 			StringBuilder sb = new StringBuilder (data.Document.GetTextAt (seg).TrimEnd ());
+			// If we're in a comment, we should trim off leading /'s.
+			// TODO: Handle C-style comments (and shell scripts, etc?)
+			inComment = sb.ToString().TrimStart().StartsWith("//");
 			lastSpaceOffset = startOffset + sb.Length;
 			
 			for (int i = startLine + 1; i <= endLine; i++) {
 				seg = data.Document.GetLine (i);
 				lastSpaceOffset = startOffset + sb.Length;
 				sb.Append (" ");
-				sb.Append (data.Document.GetTextAt (seg).Trim ());
+				string appendText = data.Document.GetTextAt (seg).Trim();
+				if (inComment && appendText.StartsWith("//"))
+				{
+					int nSlashes = 2;
+					if (appendText.StartsWith("///"))
+						nSlashes = 3;
+					// The end was trimmed above, no need to redo it here.
+					appendText = appendText.Substring(nSlashes).TrimStart();
+				}
+				sb.Append (appendText);
 			}
 			length = (seg.Offset - startOffset) + seg.EditableLength;
 			// TODO: handle conversion issues ? 
Index: ChangeLog
===================================================================
--- ChangeLog	(revision 138243)
+++ ChangeLog	(working copy)
@@ -1,3 +1,8 @@
+2009-07-20  Adam Petaccia  <adam@tpetaccia.com>
+
+	* Mono.TextEditor.Vi/ViActions.cs: When joining lines with comments,
+	  remove the starting "//" or "///". Doesn't handle C-style comments.
+
 2009-07-17  Mike Kr√ºger  <mkrueger@novell.com>
 
 	* Mono.TextEditor/ISearchEngine.cs: Fixed search & replace bug
