Index: configure.in
===================================================================
--- configure.in	(Revision 58563)
+++ configure.in	(Arbeitskopie)
@@ -143,10 +143,14 @@
 MONO_NUNIT_REQUIRED_VERSION=1.1.8
 AC_ARG_ENABLE(nunit,
 	AC_HELP_STRING([--enable-nunit],
-		[enable support for NUnit [default=yes]]),
-	[PKG_CHECK_MODULES(MONO_NUNIT, mono-nunit >= $MONO_NUNIT_REQUIRED_VERSION, enable_nunit=${enableval}, enable_nunit=no)],
-	enable_nunit=yes)
+	[enable support for NUnit [default=yes]]), enable_nunit=${enableval},
+        enable_nunit=yes)
 
+if test "x$enable_nunit" = "xyes"; then
+    PKG_CHECK_MODULES(MONO_NUNIT, mono-nunit >= $MONO_NUNIT_REQUIRED_VERSION,
+            enable_nunit=yes, enable_nunit=no)
+fi
+
 AM_CONDITIONAL(ENABLE_NUNIT, test x$enable_nunit = xyes)
 
 AC_ARG_ENABLE(monoextensions,
Index: Extras/WelcomePage/Makefile.am
===================================================================
--- Extras/WelcomePage/Makefile.am	(Revision 58563)
+++ Extras/WelcomePage/Makefile.am	(Arbeitskopie)
@@ -2,9 +2,9 @@
 ADDIN_BUILD = $(top_builddir)/build/AddIns/WelcomePage
 ASSEMBLY = $(ADDIN_BUILD)/WelcomePage.dll
 
-REFS = -r:System.Xml \
-	-r:nunit.framework \
-	-r:nunit.core \
+REFS = \
+	-r:System.Xml \
+	-r:$(top_builddir)/build/bin/log4net.dll \
 	-r:$(top_builddir)/build/bin/MonoDevelop.Core.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Core.Gui.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Projects.dll \
Index: Extras/CSharpBinding/Makefile.am
===================================================================
--- Extras/CSharpBinding/Makefile.am	(Revision 58563)
+++ Extras/CSharpBinding/Makefile.am	(Arbeitskopie)
@@ -3,9 +3,11 @@
 
 PARSE = parse.exe
 
-REFS = -r:System \
-       -r:System.Xml \
+REFS = \
+	-r:System \
+	-r:System.Xml \
 	-r:System.Drawing \
+	-r:$(top_builddir)/build/bin/log4net.dll \
 	-r:$(top_builddir)/build/bin/MonoDevelop.Core.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Core.Gui.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.SourceEditor.dll \
@@ -79,8 +81,7 @@
 TESTFILES = \
 	Test/Test.cs
 
-TESTDLLS = \
-	/r:nunit.framework.dll
+TESTDLLS = $(MONO_NUNIT_LIBS)
 
 TESTASSEMBLY = $(top_builddir)/build/bin/CSharpBinding.Test.dll
 
Index: Extras/NUnit/Makefile.am
===================================================================
--- Extras/NUnit/Makefile.am	(Revision 58563)
+++ Extras/NUnit/Makefile.am	(Arbeitskopie)
@@ -2,16 +2,17 @@
 ADDIN_BUILD = $(top_builddir)/build/AddIns/NUnit
 ASSEMBLY = $(ADDIN_BUILD)/MonoDevelop.NUnit.dll
 
-REFS = -r:System \
-       -r:System.Xml \
-       -r:nunit.framework \
-	-r:nunit.core \
+REFS = \
+	-r:System \
+	-r:System.Xml \
+	-r:$(top_builddir)/build/bin/log4net.dll \
 	-r:$(top_builddir)/build/bin/MonoDevelop.Core.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Core.Gui.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Projects.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Projects.Gui.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Components.dll \
 	-r:$(top_builddir)/build/AddIns/MonoDevelop.Ide.dll \
+	$(MONO_NUNIT_LIBS) \
 	$(GTK_SHARP_LIBS) \
 	$(GLADE_SHARP_LIBS)
 
Index: ChangeLog
===================================================================
--- ChangeLog	(Revision 58563)
+++ ChangeLog	(Arbeitskopie)
@@ -1,3 +1,7 @@
+2006-03-27 Matthias Braun <matze@braunis.de>
+
+	* configure.in: always use pkg-config to detect nunit
+
 2006-03-24 Lluis Sanchez Gual  <lluis@novell.com>   
 
 	* configure.in: Added missing makefile.
Index: Extras/WelcomePage/ChangeLog
===================================================================
--- Extras/WelcomePage/ChangeLog	(Revision 58563)
+++ Extras/WelcomePage/ChangeLog	(Arbeitskopie)
@@ -1,3 +1,7 @@
+2006-03-27 Matthias Braun <matze@braunis.de>
+
+	* Makefile.am: No need for -r:nunit and -r:nunit.framework
+
 2006-03-24 Lluis Sanchez Gual  <lluis@novell.com>   
 
 	* Makefile.am: Use an unified format. Patch by Matze Braun.
Index: Extras/CSharpBinding/ChangeLog
===================================================================
--- Extras/CSharpBinding/ChangeLog	(Revision 58563)
+++ Extras/CSharpBinding/ChangeLog	(Arbeitskopie)
@@ -1,3 +1,7 @@
+2006-03-27 Matthias Braun <matze@braunis.de>
+
+	* Makefile.am: No need for -r:nunit and -r:nunit.framework
+
 2006-03-24  Jacob Ils√∏ Christensen <jacobilsoe@gmail.com>
 
 	* templates/ConsoleProject.xpt.xml: Added namespace clause.
Index: Extras/NUnit/ChangeLog
===================================================================
--- Extras/NUnit/ChangeLog	(Revision 58563)
+++ Extras/NUnit/ChangeLog	(Arbeitskopie)
@@ -1,3 +1,7 @@
+2006-03-27 Matthias Braun <matze@braunis.de>
+
+	* Makefile.am: Use nunit libs detected by configure
+
 2006-03-24 Lluis Sanchez Gual  <lluis@novell.com>   
 
 	* MonoDevelop.NUnit.mdp: Updated.
