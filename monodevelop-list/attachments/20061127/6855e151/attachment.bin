Index: Extras/WelcomePage/WelcomePageContent.xml
===================================================================
--- Extras/WelcomePage/WelcomePageContent.xml	(revision 0)
+++ Extras/WelcomePage/WelcomePageContent.xml	(revision 0)
@@ -0,0 +1,45 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<WelcomePage _title="MonoDevelop Home Page" _desc="Free .Net Development Environment">
+	
+	<Actions _title="Common Actions">
+		<Action href="monodevelop://NewProject" _title="Start a New Project"/>
+		<Action href="monodevelop://OpenFile" _title="Open a Project / File"/>
+	</Actions>
+	
+	<Projects
+		_title="Recent Projects"
+		_siteSub="From MonoDevelop"
+		_col1="Project"
+		_col2="Last Modified"
+		_linkTitle="Open Project"
+	/>
+	
+	<Links _title="Support Links">
+		<Link
+			href="http://www.monodevelop.com"
+			_title="MonoDevelop Home Page"
+		/>
+		<Link
+			href="http://www.mono-project.com/Main_Page"
+			_title="Mono Project Home Page"
+		/>
+	</Links>
+	
+	<Links _title="Development Links">
+		<Link 
+			href="http://www.go-mono.com/docs/" 
+			_title="Mono Documentation Library" 
+			_desc="Online documentation for Mono libraries."
+		/>
+		<Link
+			href="http://msdn2.microsoft.com/en-us/library/ms306608.aspx"
+			_title="MSDN Class Library Reference"
+			_desc="Documentation for Microsoft's implementation of the .NET framework."
+		/>
+		<Link
+			href="http://www.codeproject.com/"
+			_title="The Code Project"
+			_desc="A popular site for .NET articles, code snippets, and discussions."
+		/>
+	</Links>
+</WelcomePage>
Index: Extras/WelcomePage/ChangeLog
===================================================================
--- Extras/WelcomePage/ChangeLog	(revision 68499)
+++ Extras/WelcomePage/ChangeLog	(working copy)
@@ -1,3 +1,10 @@
+2006-11-27 Gideon de Swardt <gdeswardt@gmail.com>
+	
+	* WelcomePageView.cs: Added an Extension Object to the Xslt argument list that
+	  will allow xslt to call the GetString method during the transformation process.
+	* WelcomePage.xsl: Changed the xsl to use the GetString method to allow for localization
+	* WelcomePageContent.xml: Added the xml document containing all the content strings.
+
 2006-09-19 Jacob Ilsø Christensen  <jacobilsoe@gmail.com>
 
 	* WelcomePage.mdp: Updated.
Index: Extras/WelcomePage/WelcomePage.mdp
===================================================================
--- Extras/WelcomePage/WelcomePage.mdp	(revision 68499)
+++ Extras/WelcomePage/WelcomePage.mdp	(working copy)
@@ -18,6 +18,9 @@
     <File name="./WelcomePageCommands.cs" subtype="Code" buildaction="Compile" />
     <File name="./WelcomePageOptionPanel.cs" subtype="Code" buildaction="Compile" />
     <File name="./WelcomePageView.cs" subtype="Code" buildaction="Compile" />
+    <File name="./WelcomePage.addin.xml" subtype="Code" buildaction="Nothing" />
+    <File name="./WelcomePage.xsl" subtype="Code" buildaction="Nothing" />
+    <File name="./WelcomePageContent.xml" subtype="Code" buildaction="Nothing" />
   </Contents>
   <References>
     <ProjectReference type="Gac" localcopy="True" refto="System.Xml, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
Index: Extras/WelcomePage/WelcomePageView.cs
===================================================================
--- Extras/WelcomePage/WelcomePageView.cs	(revision 68499)
+++ Extras/WelcomePage/WelcomePageView.cs	(working copy)
@@ -42,8 +42,23 @@
 using System.Xml.Xsl;
 using System.IO;
 
+namespace MonoDevelop.Core
+{
+	public class XslGettextCatalog
+	{
+		public XslGettextCatalog() {}
+		
+		public static string GetString (string str)
+		{
+			return GettextCatalog.GetString(str);
+		}
+	}
+}
+
 namespace MonoDevelop.WelcomePage
 {
+	
+	
 	public class WelcomePageView : AbstractViewContent
 	{
 		protected Frame control;
@@ -95,21 +110,17 @@
 		
 		void LoadContent ()
 		{
-			// build simple xml which XSLT will process into XHTML
-			string myxml = 	"<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>" +
-							"<WelcomePage>" +
-							"<ResourcePath>" + datadir + "</ResourcePath>" +
-							BuildRecentProjectsXml() +
-							"</WelcomePage>";
+			// Get the Xml
+			XmlDocument inxml = BuildXmlDocument();
 			
-			XmlDocument inxml = new XmlDocument();
-			inxml.LoadXml(myxml);
-
+			XsltArgumentList arg = new XsltArgumentList();
+			arg.AddExtensionObject("urn:MonoDevelop.Core.XslGettextCatalog", new MonoDevelop.Core.XslGettextCatalog());
+			
 			XslTransform xslt = new XslTransform();
-            xslt.Load(datadir + "WelcomePage.xsl");
+            		xslt.Load(datadir + "WelcomePage.xsl");
 			StringWriter fs = new StringWriter();
-			xslt.Transform(inxml, null, fs, null);
-
+			xslt.Transform(inxml, arg, fs, null);
+			
 			htmlControl.Html = fs.ToString();
 			//Initialize(null);
 		}
@@ -178,25 +189,44 @@
 				}
 			}
 		}
-
-		string BuildRecentProjectsXml()
+		
+		private XmlDocument BuildXmlDocument()
 		{
-			StringBuilder content = new StringBuilder();
+			XmlDocument xml = new XmlDocument();
+			xml.Load(datadir + "WelcomePageContent.xml");
+			
+			// Get the Parent node
+			XmlNode parent = xml.SelectSingleNode("/WelcomePage");
+			
+			// Resource Path
+			XmlElement element = xml.CreateElement("ResourcePath");
+			element.InnerText = datadir;
+			parent.AppendChild(element);
+			
 			RecentOpen recentOpen = IdeApp.Workbench.RecentOpen;
 			if (recentOpen.RecentProject != null && recentOpen.RecentProject.Length > 0)
 			{
-				content.Append("<RecentProjects>");
+				XmlElement projectList  = xml.CreateElement("RecentProjects");
+				parent.AppendChild(projectList);
 				foreach (RecentItem ri in recentOpen.RecentProject)
 				{
-					content.Append("<Project>");
-					content.Append("<Uri>" + ri.Uri + "</Uri>");
-					content.Append("<Name>" + Path.GetFileNameWithoutExtension(ri.Uri) + "</Name>");
-					content.Append("<DateModified>" + TimeSinceEdited(ri.Timestamp) + "</DateModified>");
-					content.Append("</Project>");
+					XmlElement project = xml.CreateElement("Project");
+					projectList.AppendChild(project);
+					// Uri
+					element = xml.CreateElement("Uri");
+					element.InnerText = ri.Uri;
+					project.AppendChild(element);
+					// Name
+					element = xml.CreateElement("Name");
+					element.InnerText = Path.GetFileNameWithoutExtension(ri.Uri);
+					project.AppendChild(element);
+					// Date Modified
+					element = xml.CreateElement("DateModified");
+					element.InnerText = TimeSinceEdited(ri.Timestamp);
+					project.AppendChild(element);
 				}
-				content.Append("</RecentProjects>");
 			} 
-			return content.ToString();
+			return xml;
 		}
 
 		public void Initialize(object obj)
Index: Extras/WelcomePage/Makefile.am
===================================================================
--- Extras/WelcomePage/Makefile.am	(revision 68499)
+++ Extras/WelcomePage/Makefile.am	(working copy)
@@ -24,7 +24,8 @@
 	mono-bg.png \
 	mono-logo.png \
 	WelcomePage.css \
-	WelcomePage.xsl
+	WelcomePageContent.xml \
+	WelcomePage.xsl 
 
 DATA_FILE_BUILD = $(addprefix $(ADDIN_BUILD)/, $(DATA_FILES))
 
Index: Extras/WelcomePage/WelcomePage.xsl
===================================================================
--- Extras/WelcomePage/WelcomePage.xsl	(revision 68499)
+++ Extras/WelcomePage/WelcomePage.xsl	(working copy)
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="ISO-8859-1"?>
-<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
+<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:gtc="urn:MonoDevelop.Core.XslGettextCatalog">
 	<xsl:output method="xml" 
 		media-type="text/html" 
 		doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
@@ -12,7 +12,7 @@
 			<head>
 				<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 				<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
-				<title>Welcome Page</title>
+				<title><xsl:value-of select="gtc:GetString('Welcome Page')"/></title>
 				<!--<link rel="stylesheet" type="text/css" href="{ResourcePath}WelcomePage.css" />-->	
 				<style type="text/css">
 					@import "<xsl:value-of select="ResourcePath" />WelcomePage.css"; 
@@ -42,68 +42,61 @@
 					<div id="bigWrapper">
 						<div class="portlet" id="p-logo">
 							<a href="http://monodevelop.com/Main_Page"
-								title="MonoDevelop Home Page"></a>
+								title="{gtc:GetString(@_title)}"></a>
 						</div>
 						<div id="caption">
-							Free .Net Development Environment
+							<xsl:value-of select="gtc:GetString(@_desc)"/>
 						</div>
 						<div id="column-content">
 							<div>
 								<div id="bodyContent">
-									<h3 id="siteSub">From MonoDevelop</h3>
+									<h3 id="siteSub"><xsl:value-of select="gtc:GetString(Projects/_siteSub)"/></h3>
 									<div id="contentSub"></div>
 									<!-- start content -->
 									<table id="welcome_content" >
 										<tr>
 											<td id="leftTopic">
 
-												<h1>Common Actions</h1>
+												<h1><xsl:value-of select="gtc:GetString(Actions/@_title)"/></h1>
 												<ul>
-													<li><a href="monodevelop://NewProject">Start a New Project</a></li>
-													<li><a href="monodevelop://OpenFile">Open a Project / File</a></li>
+													<xsl:for-each select="Actions/Action">
+														<li><a href="{@href}"><xsl:value-of select="gtc:GetString(@_title)"/></a></li>
+													</xsl:for-each>
 												</ul>
 												<p />
-												<h1>Recent Projects</h1>
+												<h1><xsl:value-of select="gtc:GetString(Projects/@_title)"/></h1>
 												<p />
 												<table class="topic1" id="recentprojects">
 													<tr class="topicbar">
-														<th>Project</th>
-														<th class="proj_mod_col">Last Modified</th>
+														<th><xsl:value-of select="gtc:GetString(Projects/@_col1)"/></th>
+														<th class="proj_mod_col"><xsl:value-of select="gtc:GetString(Projects/@_col2)"/></th>
 													</tr>
+													<xsl:variable name="prjLinkTitle" select="Projects/@_linkTitle"/>
 
 													<xsl:for-each select="RecentProjects/Project">
-														<xsl:choose>
-															<xsl:when test="position() mod 2 = 0">
-																<tr class="evenrow">
-																	<td><a href="project://{Uri}" title="{Uri}" alt="Open Project {Name}"><xsl:value-of select="Name" /></a></td>
-																	<td class="proj_mod_col"><xsl:value-of select="DateModified" /></td>
-																</tr>
-															</xsl:when>
-															<xsl:otherwise>
-																<tr >
-																	<td><a href="project://{Uri}" title="{Uri}" alt="Open Project {Name}"><xsl:value-of select="Name" /></a></td>
-																	<td class="proj_mod_col"><xsl:value-of select="DateModified" /></td>
-																</tr>
-															</xsl:otherwise>
-														</xsl:choose>
+														<tr>
+															<xsl:if test="position() mod 2 = 0"><xsl:attribute name="class">evenrow</xsl:attribute></xsl:if>
+															<td><a href="project://{Uri}" title="{Uri}" alt="{gtc:GetString($prjLinkTitle)} {Name}"><xsl:value-of select="Name" /></a></td>
+															<td class="proj_mod_col"><xsl:value-of select="DateModified" /></td>
+														</tr>
 													</xsl:for-each>	
 
 												</table>
 											
 											</td>
 											<td id="rightTopic">
-												<h1>Support Links</h1>
-												<ul>
-													<li><a href="http://www.monodevelop.com">MonoDevelop Home Page</a></li>
-													<li><a href="http://www.mono-project.com/Main_Page">Mono Project Home Page</a></li>
-												</ul>
-												<p />
-												<h1>Development Links</h1>
-												<ul>
-													<li><a href="http://www.go-mono.com/docs/">Mono Documentation Library</a> - Online documentation for Mono libraries.</li>
-													<li><a href="http://msdn2.microsoft.com/en-us/library/ms306608.aspx">MSDN Class Library Reference</a> - Documentation for Microsoft's implementation of the .NET framework.</li>
-													<li><a href="http://www.codeproject.com/">The Code Project</a> - A popular site for .NET articles, code snippets, and discussions.</li>
-												</ul>
+												<xsl:for-each select="Links">
+													<h1><xsl:value-of select="gtc:GetString(@_title)"/></h1>
+													<ul>
+														<xsl:for-each select="Link">
+															<li>
+																<a href="{@href}"><xsl:value-of select="gtc:GetString(@_title)"/></a>
+																<xsl:if test="string-length(@_desc) != 0"> - <xsl:value-of select="gtc:GetString(@_desc)"/></xsl:if>
+															</li>
+														</xsl:for-each>
+													</ul>
+													<p />
+												</xsl:for-each>
 											</td>
 										</tr>
 									</table>
Index: po/ChangeLog
===================================================================
--- po/ChangeLog	(revision 68499)
+++ po/ChangeLog	(working copy)
@@ -1,3 +1,6 @@
+2006-11-27 Gideon de Swardt <gdeswardt@gmail.com>
+	* POTFILES.in: Added the WelcomePageContent.xml file
+
 2006-11-27  David Makovský (Yakeen) <yakeen@sannyas-on.net>
 	
 	* cs.po: Updated.
Index: po/POTFILES.in
===================================================================
--- po/POTFILES.in	(revision 68499)
+++ po/POTFILES.in	(working copy)
@@ -273,4 +273,5 @@
 Extras/WelcomePage/WelcomePage.addin.xml
 Extras/WelcomePage/WelcomePageOptionPanel.cs
 Extras/WelcomePage/WelcomePageView.cs
+Extras/WelcomePage/WelcomePageContent.xml
 
