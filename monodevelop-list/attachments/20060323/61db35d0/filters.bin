Index: Core/src/MonoDevelop.Projects/ChangeLog
===================================================================
--- Core/src/MonoDevelop.Projects/ChangeLog	(revision 58378)
+++ Core/src/MonoDevelop.Projects/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2006-03-23  David Makovský (Yakeen) <yakeen@sannyas-on.net>
+
+	* MonoDevelop.Projects.Extensions/FileFormatCodon.cs: Renamed XML attribute
+	
 2006-03-17  Jacob Ilsø Christensen <jacobilsoe@gmail.com> 
 
 	* MonoDevelop.Projects.Parser/DefaultParserService.cs:
Index: Core/src/MonoDevelop.Projects/MonoDevelop.Projects.Extensions/FileFilterCodon.cs
===================================================================
--- Core/src/MonoDevelop.Projects/MonoDevelop.Projects.Extensions/FileFilterCodon.cs	(revision 58378)
+++ Core/src/MonoDevelop.Projects/MonoDevelop.Projects.Extensions/FileFilterCodon.cs	(working copy)
@@ -14,11 +14,10 @@
 
 namespace MonoDevelop.Projects.Extensions
 {
-	// FIXME: Unused
 	[CodonNameAttribute("FileFilter")]
 	internal class FileFilterCodon : AbstractCodon
 	{
-		[XmlMemberAttribute("name", IsRequired=true)]
+		[XmlMemberAttribute("_label", IsRequired=true)]
 		string filtername       = null;
 		
 		[XmlMemberArrayAttribute("extensions", IsRequired=true)]
Index: Core/src/MonoDevelop.Ide/ChangeLog
===================================================================
--- Core/src/MonoDevelop.Ide/ChangeLog	(revision 58378)
+++ Core/src/MonoDevelop.Ide/ChangeLog	(working copy)
@@ -1,3 +1,8 @@
+2006-03-23  David Makovský (Yakeen) <yakeen@sannyas-on.net>
+
+	* MonoDevelop.Ide.Commands/FileCommands.cs: Added filtering in File dialog
+	* MonoDevelop.Ide.addin.xml: renamed attribute in FileFilter Extension
+	
 2006-03-23 Lluis Sanchez Gual  <lluis@novell.com>
 
 	* MonoDevelop.Ide.Gui.Dialogs/SelectReferenceDialog.cs:
Index: Core/src/MonoDevelop.Ide/MonoDevelop.Ide.Commands/FileCommands.cs
===================================================================
--- Core/src/MonoDevelop.Ide/MonoDevelop.Ide.Commands/FileCommands.cs	(revision 58378)
+++ Core/src/MonoDevelop.Ide/MonoDevelop.Ide.Commands/FileCommands.cs	(working copy)
@@ -84,37 +84,37 @@
 	{
 		protected override void Run()
 		{
-			//string[] fileFilters  = (string[])(AddInTreeSingleton.AddInTree.GetTreeNode("/SharpDevelop/Workbench/FileFilter").BuildChildItems(this)).ToArray(typeof(string));
-			//bool foundFilter      = false;
-			// search filter like in the current selected project
-			/*
-			IProjectService projectService = (IProjectService)MonoDevelop.Core.ServiceManager.GetService(typeof(IProjectService));
+			ArrayList filters = new ArrayList ();
+			filters.AddRange (AddInTreeSingleton.AddInTree.GetTreeNode ("/SharpDevelop/Workbench/Combine/FileFilter").BuildChildItems (this));
+			try
+			{
+				filters.AddRange (AddInTreeSingleton.AddInTree.GetTreeNode ("/SharpDevelop/Workbench/FileFilter").BuildChildItems (this));
+			}
+			catch
+			{
+				//nothing there..	
+			}
 			
-			if (projectService.CurrentSelectedProject != null) {
-				LanguageBindingService languageBindingService = (LanguageBindingService)MonoDevelop.Core.ServiceManager.GetService(typeof(LanguageBindingService));
+			using (FileSelector fs = new FileSelector (GettextCatalog.GetString ("File to Open"))) {
 				
-				LanguageBindingCodon languageCodon = languageBindingService.GetCodonPerLanguageName(projectService.CurrentSelectedProject.ProjectType);
-				for (int i = 0; !foundFilter && i < fileFilters.Length; ++i) {
-					for (int j = 0; !foundFilter && j < languageCodon.Supportedextensions.Length; ++j) {
-						if (fileFilters[i].IndexOf(languageCodon.Supportedextensions[j]) >= 0) {
-							break;
-						}
+				foreach (string filterStr in filters)
+				{
+					string[] parts = filterStr.Split ('|');
+					Gtk.FileFilter filter = new Gtk.FileFilter ();
+					filter.Name = parts[0];
+					foreach (string ext in parts[1].Split (';'))
+					{
+						filter.AddPattern (ext);
 					}
+					fs.AddFilter (filter);
 				}
-			}
-			
-			// search filter like in the current open file
-			if (!foundFilter) {
-				IWorkbenchWindow window = WorkbenchSingleton.Workbench.ActiveWorkbenchWindow;
-				if (window != null) {
-					for (int i = 0; i < fileFilters.Length; ++i) {
-						if (fileFilters[i].IndexOf(Path.GetExtension(window.ViewContent.ContentName == null ? window.ViewContent.UntitledName : window.ViewContent.ContentName)) >= 0) {
-							break;
-						}
-					}
-				}
-			}*/
-			using (FileSelector fs = new FileSelector (GettextCatalog.GetString ("File to Open"))) {
+				
+				//Add All Files
+				Gtk.FileFilter allFilter = new Gtk.FileFilter ();
+                allFilter.Name = GettextCatalog.GetString ("All Files");
+                allFilter.AddPattern ("*");
+                fs.AddFilter (allFilter);
+
 				int response = fs.Run ();
 				string name = fs.Filename;
 				fs.Hide ();
Index: Core/src/MonoDevelop.Ide/MonoDevelop.Ide.addin.xml
===================================================================
--- Core/src/MonoDevelop.Ide/MonoDevelop.Ide.addin.xml	(revision 58378)
+++ Core/src/MonoDevelop.Ide/MonoDevelop.Ide.addin.xml	(working copy)
@@ -589,11 +589,11 @@
 	</Extension>
 	
 
-	<Extension path = "/SharpDevelop/Workbench/FileFilter">
+	<!--<Extension path = "/SharpDevelop/Workbench/FileFilter">
 		<FileFilter id = "AllFiles"
-		            name = "${res:SharpDevelop.FileFilter.AllFiles}"
+		            _label = "All Files"
 		            extensions = "*.*"/>
-	</Extension>
+	</Extension>-->
 	
 	<Extension path = "/SharpDevelop/Workbench/Pads">
 		<Pad id = "MonoDevelop.Ide.Gui.Pads.FileScout" class = "MonoDevelop.Ide.Gui.Pads.FileScout"/>
@@ -693,14 +693,14 @@
 
 	<Extension path = "/SharpDevelop/Workbench/Combine/FileFilter">
 		<FileFilter id = "Combine"
-		            name = "${res:SharpDevelop.FileFilter.CombineFiles}"
-		            extensions = "*.cmbx"/>
+		            _label = "Solution Files"
+		            extensions = "*.mds"/>
 		<FileFilter id = "Project"
-		            name = "${res:SharpDevelop.FileFilter.ProjectFiles}"
-		            extensions = "*.prjx"/>
-		<FileFilter id = "AllFiles"
-		            name = "${res:SharpDevelop.FileFilter.AllFiles}"
-		            extensions = "*.*"/>
+		            _label = "Project Files"
+		            extensions = "*.mdp"/>
+		<!--<FileFilter id = "AllFiles"
+		            _label = "All Files"
+		            extensions = "*.*"/>-->
 	</Extension>
 	
 	<!-- Main Toolbar -->
Index: Extras/NemerleBinding/ChangeLog
===================================================================
--- Extras/NemerleBinding/ChangeLog	(revision 58378)
+++ Extras/NemerleBinding/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2006-03-23  David Makovský (Yakeen) <yakeen@sannyas-on.net>
+
+	* NemerleBinding.addin.xml: renamed attribute in FileFilter Extension
+	
 2006-03-12  David Makovský (Yakeen) <yakeen@sannyas-on.net>
 
         * Nemerle.glade: Marking some strings not to be translated. Not include balast in pot file.
Index: Extras/NemerleBinding/NemerleBinding.addin.xml
===================================================================
--- Extras/NemerleBinding/NemerleBinding.addin.xml	(revision 58378)
+++ Extras/NemerleBinding/NemerleBinding.addin.xml	(working copy)
@@ -17,8 +17,7 @@
 	
   <Extension path = "/SharpDevelop/Workbench/FileFilter">
     <FileFilter id = "Nemerle"
-                insertbefore = "AllFiles"
-                name = "Nemerle Files (*.n)"
+                _label = "Nemerle Files"
                 extensions = "*.n"/>
   </Extension>
 
Index: Extras/ILAsmBinding/ChangeLog
===================================================================
--- Extras/ILAsmBinding/ChangeLog	(revision 58378)
+++ Extras/ILAsmBinding/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2006-03-23  David Makovský (Yakeen) <yakeen@sannyas-on.net>
+
+	* ILAsmBinding.addin.xml: renamed attribute in FileFilter Extension
+	
 2005-12-13  Lluis Sanchez Gual  <lluis@novell.com> 
 
 	* ILAsmLanguageBinding.cs: Implemented the new methods in
Index: Extras/ILAsmBinding/ILAsmBinding.addin.xml
===================================================================
--- Extras/ILAsmBinding/ILAsmBinding.addin.xml	(revision 58378)
+++ Extras/ILAsmBinding/ILAsmBinding.addin.xml	(working copy)
@@ -34,6 +34,12 @@
                      class = "ILAsmBinding.ILAsmLanguageBinding"/>
   </Extension>
 
+	<Extension path = "/SharpDevelop/Workbench/FileFilter">
+		<FileFilter id = "ILAsm Files"
+		            _label = "ILAsm Files"
+		            extensions = "*.il"/>
+	</Extension>
+	
 	<Extension path = "/SharpDevelop/Workbench/SerializableClasses">
 		<Class class = "ILAsmBinding.ILAsmCompilerParameters" />
 	</Extension>
Index: Extras/VBNetBinding/VBNetBinding.addin.xml
===================================================================
--- Extras/VBNetBinding/VBNetBinding.addin.xml	(revision 58378)
+++ Extras/VBNetBinding/VBNetBinding.addin.xml	(working copy)
@@ -18,8 +18,7 @@
 	
   <Extension path = "/SharpDevelop/Workbench/FileFilter">
     <FileFilter id = "VBNet"
-                insertbefore = "AllFiles"
-                name = "VB.NET Files (*.vb)"
+                _label = "VB.NET Files"
                 extensions = "*.vb"/>
   </Extension>
 
Index: Extras/VBNetBinding/ChangeLog
===================================================================
--- Extras/VBNetBinding/ChangeLog	(revision 58378)
+++ Extras/VBNetBinding/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2006-03-23  David Makovský (Yakeen) <yakeen@sannyas-on.net>
+
+	* VBNetBinding.addin.xml: renamed attribute in FileFilter Extension
+
 2006-03-17  Jacob Ilsø Christensen <jacobilsoe@gmail.com>
 
 	* Parser/Parser.cs:
Index: Extras/BooBinding/BooBinding.addin.xml
===================================================================
--- Extras/BooBinding/BooBinding.addin.xml	(revision 58378)
+++ Extras/BooBinding/BooBinding.addin.xml	(working copy)
@@ -19,8 +19,7 @@
 
   <Extension path = "/SharpDevelop/Workbench/FileFilter">
     <FileFilter id = "Boo"
-                insertbefore = "AllFiles"
-                name = "Boo Files (*.boo)"
+                _label = "Boo Files"
                 extensions = "*.boo"/>
   </Extension>
 
Index: Extras/BooBinding/ChangeLog
===================================================================
--- Extras/BooBinding/ChangeLog	(revision 58378)
+++ Extras/BooBinding/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2006-03-23  David Makovský (Yakeen) <yakeen@sannyas-on.net>
+
+	* BooBinding.addin.xml: renamed attribute in FileFilter Extension
+	
 2006-02-24 Lluis Sanchez Gual  <lluis@novell.com>   
 
 	* BooBinding/BooShell/BooShell.mdp:
Index: Extras/CSharpBinding/ChangeLog
===================================================================
--- Extras/CSharpBinding/ChangeLog	(revision 58378)
+++ Extras/CSharpBinding/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2006-03-23  David Makovský (Yakeen) <yakeen@sannyas-on.net>
+
+	* CSharpBinding.addin.xml: renamed attributes in FileFilter Extension
+	
 2006-03-17  Jacob Ilsø Christensen <jacobilsoe@gmail.com>
 
 	* Parser/Parser.cs:
Index: Extras/CSharpBinding/CSharpBinding.addin.xml
===================================================================
--- Extras/CSharpBinding/CSharpBinding.addin.xml	(revision 58378)
+++ Extras/CSharpBinding/CSharpBinding.addin.xml	(working copy)
@@ -42,26 +42,22 @@
 	
 	<Extension path = "/SharpDevelop/Workbench/FileFilter">
 		<FileFilter id = "CSharp"
-		            insertbefore="AllFiles"
-		            name = "${res:SharpDevelop.FileFilter.CSharpFiles}"
+		            _label = "CSharp Files"
 			    extensions = "*.cs"/>
 		<FileFilter id = "Assemblies"
-		            insertbefore="AllFiles"
-		            name = "${res:SharpDevelop.FileFilter.AssemblyFiles}"
+		            _label = "Assemblies"
 		            extensions = "*.exe,*.dll"/>
 			    
 		<FileFilter id = "Html"
-		            insertbefore="AllFiles"
-		            name = "${res:SharpDevelop.FileFilter.WebFiles}"
+		            _label = "Web Files"
 		            extensions = "*.htm,*.html,*.aspx,*.ascx,*.asp"/>
 			    
 		<FileFilter id = "Xml"
-		            insertbefore="AllFiles"
-		            name = "${res:SharpDevelop.FileFilter.XmlFiles}"
+		            _label = "Xml Files"
 		            extensions = "*.xml"/>
+
 		<FileFilter id = "Resources"
-		            insertbefore="AllFiles"
-		            name = "${res:SharpDevelop.FileFilter.ResourceFiles}"
+		            _label = "Resource Files"
 		            extensions = "*.resources,*.resx"/>
 	</Extension>
 
Index: Extras/PythonBinding/PythonBinding.addin.xml
===================================================================
--- Extras/PythonBinding/PythonBinding.addin.xml	(revision 58378)
+++ Extras/PythonBinding/PythonBinding.addin.xml	(working copy)
@@ -30,6 +30,12 @@
     </Conditional>
   </Extension>
 
+	<Extension path = "/SharpDevelop/Workbench/FileFilter">
+		<FileFilter id = "Python"
+		            _label = "Python Files"
+		            extensions = "*.py"/>
+	</Extension>
+
   <Extension path = "/SharpDevelop/Workbench/LanguageBindings">
     <LanguageBinding id = "Python"
                      supportedextensions = ".py"
Index: Extras/JavaBinding/ChangeLog
===================================================================
--- Extras/JavaBinding/ChangeLog	(revision 58378)
+++ Extras/JavaBinding/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2006-03-23  David Makovský (Yakeen) <yakeen@sannyas-on.net>
+
+	* JavaBinding.addin.xml: renamed attribute in FileFilter Extension
+	
 2006-03-12  David Makovský (Yakeen) <yakeen@sannyas-on.net>
 
         * Java.glade: Marking some strings not to be translated. Not include balast in pot file.
Index: Extras/JavaBinding/JavaBinding.addin.xml
===================================================================
--- Extras/JavaBinding/JavaBinding.addin.xml	(revision 58378)
+++ Extras/JavaBinding/JavaBinding.addin.xml	(working copy)
@@ -17,8 +17,7 @@
 	
   <Extension path = "/SharpDevelop/Workbench/FileFilter">
     <FileFilter id = "Java"
-                insertbefore = "AllFiles"
-                name = "Java Files (*.java)"
+                _label = "Java Files"
                 extensions = "*.java"/>
   </Extension>
 
