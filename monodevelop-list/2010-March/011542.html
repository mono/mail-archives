<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Code analysis soc project
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Code%20analysis%20soc%20project&In-Reply-To=f9958e1e1003230350p3f43a99dqc38b040ff87ca4ab%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011537.html">
   <LINK REL="Next"  HREF="011544.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Code analysis soc project</H1>
    <B>Michael Hutchinson</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Code%20analysis%20soc%20project&In-Reply-To=f9958e1e1003230350p3f43a99dqc38b040ff87ca4ab%40mail.gmail.com"
       TITLE="[MonoDevelop] Code analysis soc project">m.j.hutchinson at gmail.com
       </A><BR>
    <I>Wed Mar 24 00:28:47 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="011537.html">[MonoDevelop] Code analysis soc project
</A></li>
        <LI>Next message: <A HREF="011544.html">[MonoDevelop] Code analysis soc project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11542">[ date ]</a>
              <a href="thread.html#11542">[ thread ]</a>
              <a href="subject.html#11542">[ subject ]</a>
              <a href="author.html#11542">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Mar 23, 2010 at 6:50 AM, nikhil sarda &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">diff.operator at gmail.com</A>&gt; wrote:
&gt;<i> Thanks for the reply.
</I>&gt;<i>
</I>&gt;<i> On Tue, Mar 23, 2010 at 11:48 AM, Mike Kr&#252;ger &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">mkrueger at novell.com</A>&gt; wrote:
</I>&gt;&gt;<i> Hi
</I>&gt;&gt;&gt;<i> Apparently the current
</I>&gt;&gt;&gt;<i> version of NRefactory is not good enough to detect certain types of
</I>&gt;&gt;&gt;<i> semantic errors. Hence detecting errors such as invalid return types,
</I>&gt;&gt;&gt;<i> incorrect parameters and so on are very difficult to do with the
</I>&gt;&gt;&gt;<i> current NRefactory.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> These two are possible :) (but anything that needs some more analyzation
</I>&gt;&gt;<i> than a resolve + type check is painful to implement)
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This is because there is presently no way to go to
</I>&gt;&gt;&gt;<i> the parent of the node you've no way to go to the parent and top-down
</I>&gt;&gt;&gt;<i> analysis is difficult because &quot;&lt;mkrueger&gt;: because you can't go to the
</I>&gt;&gt;&gt;<i> children of the nodes without knowing the type of the node&quot;. Some
</I>&gt;&gt;&gt;<i> things that can be implemented however are naming conventions,
</I>&gt;&gt;&gt;<i> spellings in comments and string literals and so on. Given this
</I>&gt;&gt;&gt;<i> backdrop is there any point proceeding with this project? Or should
</I>&gt;&gt;&gt;<i> one wait for the new DOM to be completed?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The new dom currently is almost ready - if you want to work with that
</I>&gt;&gt;<i> it's possible. You just need a customized mono compiler source code &amp;
</I>&gt;&gt;<i> comment out the parser file.
</I>&gt;<i>
</I>&gt;<i> Has it been committed to trunk yet? Also a small introduction to the
</I>&gt;<i> API would be very handy as well :)
</I>
That's great to hear!

I'm a huge fan of the idea of on-the-fly analysis.

As I see it, the core part is a framework for background analysers -
an extension point, a service to run the analysers on new
ParsedDocuments and report the errors and warnings, and some basic
configuration UI. This is the initial &quot;barrier&quot; that needs to be
implemented before anyone can write any analysis rules. This could
take quite a few weeks to fully implement and polish.  It would also
be nice to have a way for rules to attach &quot;fixes&quot; to their results,
and this would need a UI too. All of this is completely language
agnostic. For example, I might want to write analysers for ASP.NET
documents or XML, not just C#.

Beyond that, there are analysis rules, that scan the parsed documents
and report errors, warnings and suggestions. These rules can range
from trivial to very complex, and some are much more useful than
others.

My favourite example of a rule is an API naming conventions checker.
This would check that any public symbols defined in the file follow
.NET naming conventions, e.g. interfaces begin with I, class and
member names are PascalCase, parameters are camelCase, and all
identifiers are made of CorrectlySpelledWords. This rule would work
for any parsed .NET DOM, not just C#, and would be great for teaching
the conventions to newcomers, but also to catch typos from seasoned
users. It could easily offer quick fixes too, as these would just be
rename refactorings. In fact, quite a few of the framework design
guideline rules could be checked in a language-agnostic way with the
current DOM, since they affect only public API.

Another idea is to show unresolved types and unused usings. This would
be C#-only, and require attempting to resolve all types, and could
offer the existing &quot;resolve&quot; command as a quick fix. Other easy yet
useful rules would be to warn about recursion in properties, error on
trivial (i.e. clearly infinite) property recursion, warn about catch
blocks that completely discard the exception, check that string.Format
format is correct, warn about string concatenation in a loop...

Of course there are *many* more complex rules that could be
implemented, but are beyond the scope of a single GSoC project. The
main thing would be to get the framework implemented and polished,
with some fairly simple yet very useful rules to prove it, which would
make it possible for other people to contribute individual rules
afterwards.

(I didn't mention spellchecking strings and comments because I think
that *might* be better for the text editor to handle based on syntax
highlighting, as it would work for many more filetypes. But
specialized rules could do a better job because they'd have more
context).

- Michael

-- 
Michael Hutchinson
<A HREF="http://mjhutchinson.com">http://mjhutchinson.com</A>
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011537.html">[MonoDevelop] Code analysis soc project
</A></li>
	<LI>Next message: <A HREF="011544.html">[MonoDevelop] Code analysis soc project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11542">[ date ]</a>
              <a href="thread.html#11542">[ thread ]</a>
              <a href="subject.html#11542">[ subject ]</a>
              <a href="author.html#11542">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
