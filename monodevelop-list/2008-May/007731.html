<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] What is the correct way of closing a Gtk dialog?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20What%20is%20the%20correct%20way%20of%20closing%20a%20Gtk%20dialog%3F&In-Reply-To=f1cd8c6d0805220540v2da8b926r55f3b239cf1d8ed2%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007747.html">
   <LINK REL="Next"  HREF="007732.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] What is the correct way of closing a Gtk dialog?</H1>
    <B>simon.n.lindgren at gmail.com</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20What%20is%20the%20correct%20way%20of%20closing%20a%20Gtk%20dialog%3F&In-Reply-To=f1cd8c6d0805220540v2da8b926r55f3b239cf1d8ed2%40mail.gmail.com"
       TITLE="[MonoDevelop] What is the correct way of closing a Gtk dialog?">simon.n.lindgren at gmail.com
       </A><BR>
    <I>Thu May 22 08:55:16 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="007747.html">[MonoDevelop] What is the correct way of closing a Gtk dialog?
</A></li>
        <LI>Next message: <A HREF="007732.html">[MonoDevelop] What is the correct way of closing a Gtk dialog?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7731">[ date ]</a>
              <a href="thread.html#7731">[ thread ]</a>
              <a href="subject.html#7731">[ subject ]</a>
              <a href="author.html#7731">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ah, I think you misunderstood a bit(or maybe I didn't explain that
good). I have made new stetic dialog and I use an overloaded Run() to
display it. When the user presses any of the two buttons, buttonOk and
buttonCancel, the dialog should close i.e. the Run method should return
to the caller again. How do I do that? here's the current eventhandling
code:

public partial class PromtingDialog : Gtk.Dialog
{
	
	public PromtingDialog(string title, string promt)
	{
		this.Build();
		labelQuestion.Text = promt;
		this.Title = title;
	}
	
	public virtual int Run(out string response)
	{
		int retVal = base.Run();
		response = this.response;
		return retVal;
	}

	protected virtual void buttonOk_Clicked (object sender,
System.EventArgs e)
	{
		response = entryResponse.Text;
		this.Destroy();
	}

	protected virtual void buttonCancel_Clicked (object sender,
System.EventArgs e)
	{
		response = &quot;&quot;;
		this.Destroy();
	}
	
	private string response = &quot;&quot;;
}


tor 2008-05-22 klockan 14:40 +0200 skrev Gergely Kiss:
&gt;<i> For a dialog, you should use the Run() method. That way you can check
</I>&gt;<i> which button was pressed by the user. Check the Gtk.ResponseType
</I>&gt;<i> enumeration to see the available response values.
</I>&gt;<i> Using the Destroy() method is a fully acceptable technique to close a
</I>&gt;<i> window in GTK#.
</I>&gt;<i> 
</I>&gt;<i> For example, check the code below:
</I>&gt;<i> 
</I>&gt;<i> Dialog dlg = new Dialog ();
</I>&gt;<i> dlg.Title = &quot;Question&quot;;
</I>&gt;<i> // Add a label to the dialog to ask a question
</I>&gt;<i> dlg.VBox.Add(new Label (&quot;Are you sure you wish to quit?&quot;));
</I>&gt;<i> // Add a button to the dialog with a response type of Yes
</I>&gt;<i> dlg.AddButton(&quot;Yes&quot;, ResponseType.Yes);
</I>&gt;<i> // Add another button to the dialog with a response type of No
</I>&gt;<i> dlg.AddButton(&quot;No&quot;, ResponseType.No);
</I>&gt;<i> dlg.ShowAll (); // make all widgets visible inside the dialog
</I>&gt;<i> switch(dlg.Run ()) {
</I>&gt;<i>    case (int)ResponseType.Yes:
</I>&gt;<i>       dlg.Destroy ();
</I>&gt;<i>       Application.Quit ();
</I>&gt;<i>       a.RetVal = true;
</I>&gt;<i>       break;
</I>&gt;<i>    case (int)ResponseType.No:
</I>&gt;<i>       dlg.Destroy ();
</I>&gt;<i>       break;
</I>&gt;<i>    default:
</I>&gt;<i>       dlg.Destroy ();
</I>&gt;<i>       break;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> The code shows the dialog to the user and then, if a Dialog.Response
</I>&gt;<i> event happens (in other words, when the user presses a button on the
</I>&gt;<i> dialog, which sends a return value), depending on the return value, we
</I>&gt;<i> do different things. For example, when the users clicks the Cancel
</I>&gt;<i> button (a button which was assigned with a response value of Cancel),
</I>&gt;<i> we just close the dialog with Destroy(). If the user pressed the Yes
</I>&gt;<i> button, we close the dialog and exit from GTK# main loop with a call
</I>&gt;<i> to Application.Quit(). We've included a &quot;default&quot; label in our switch
</I>&gt;<i> statement. This way, we close the dialog, if the user clicks on the
</I>&gt;<i> Close button on the top-right corner of the window. This is required,
</I>&gt;<i> because by default, GTK dialogs won't close automatically by pressing
</I>&gt;<i> the Close button.
</I>&gt;<i> 
</I>&gt;<i> Check this page for more information:
</I>&gt;<i> <A HREF="http://www.go-mono.com/docs/monodoc.ashx?tlink=4@ecma%3a836%23Dialog%">http://www.go-mono.com/docs/monodoc.ashx?tlink=4@ecma%3a836%23Dialog%</A>
</I>&gt;<i> 2fM%2f1
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 2008/5/22 <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">simon.n.lindgren at gmail.com</A> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">simon.n.lindgren at gmail.com</A>&gt;:
</I>&gt;<i>         I have created a dialog that I show to the user to get an
</I>&gt;<i>         input value.
</I>&gt;<i>         How do I close the dialog in the correct way when the user
</I>&gt;<i>         clicks one of
</I>&gt;<i>         the buttons in the dialog?
</I>&gt;<i>         Currently I'm using the Destroy() method but that's not
</I>&gt;<i>         correct, is it?
</I>&gt;<i>         I'm using C# and gtk-sharp.
</I>&gt;<i>         --
</I>&gt;<i>         Simon Lindgren
</I>&gt;<i>         <A HREF="http://simonlindgren.pcriot.com">http://simonlindgren.pcriot.com</A>
</I>&gt;<i>         
</I>&gt;<i>         _______________________________________________
</I>&gt;<i>         Monodevelop-list mailing list
</I>&gt;<i>         <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">Monodevelop-list at lists.ximian.com</A>
</I>&gt;<i>         <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>
</I>&gt;<i> 
</I>-- 
Simon Lindgren
<A HREF="http://simonlindgren.pcriot.com">http://simonlindgren.pcriot.com</A>

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007747.html">[MonoDevelop] What is the correct way of closing a Gtk dialog?
</A></li>
	<LI>Next message: <A HREF="007732.html">[MonoDevelop] What is the correct way of closing a Gtk dialog?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7731">[ date ]</a>
              <a href="thread.html#7731">[ thread ]</a>
              <a href="subject.html#7731">[ subject ]</a>
              <a href="author.html#7731">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
