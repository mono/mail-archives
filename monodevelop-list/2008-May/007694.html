<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] [PATCH. RFC] Absolute File References
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20%5BPATCH.%20RFC%5D%20Absolute%20File%20References&In-Reply-To=fvvgjj%244et%241%40ger.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007693.html">
   <LINK REL="Next"  HREF="007695.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] [PATCH. RFC] Absolute File References</H1>
    <B>Marcos Mar&#237;n</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20%5BPATCH.%20RFC%5D%20Absolute%20File%20References&In-Reply-To=fvvgjj%244et%241%40ger.gmane.org"
       TITLE="[MonoDevelop] [PATCH. RFC] Absolute File References">marcosmarin at gmail.com
       </A><BR>
    <I>Thu May  8 15:12:06 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="007693.html">[MonoDevelop] [PATCH. RFC] Absolute File References
</A></li>
        <LI>Next message: <A HREF="007695.html">[MonoDevelop] [PATCH. RFC] Absolute File References
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7694">[ date ]</a>
              <a href="thread.html#7694">[ thread ]</a>
              <a href="subject.html#7694">[ subject ]</a>
              <a href="author.html#7694">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is what I do in the CBinding:
All paths are absolute, but paths get parsed for vars like ${ProjectDir} and
${CombineDir}, so if I want to link a lib in /usr/lib/somelib.so thats fine,
yet I can also add a reference to something that comes packaged with the
project like ${ProjectDir}/libmymath.so which will work perfectly fine on
someone else's computer.

Take a look at the StringParserService
<A HREF="http://anonsvn.mono-project.com/viewcvs/trunk/monodevelop/main/src/core/MonoDevelop.Core/MonoDevelop.Core/StringParserService.cs?view=markup">http://anonsvn.mono-project.com/viewcvs/trunk/monodevelop/main/src/core/MonoDevelop.Core/MonoDevelop.Core/StringParserService.cs?view=markup</A>
and this is an example of the widgets we use to allow the user to add a var
like ${ProjectDir}.
<A HREF="http://anonsvn.mono-project.com/viewcvs/trunk/monodevelop/main/src/addins/CBinding/Gui/CodeGenerationPanel.cs?view=markup">http://anonsvn.mono-project.com/viewcvs/trunk/monodevelop/main/src/addins/CBinding/Gui/CodeGenerationPanel.cs?view=markup</A>

On Thu, May 8, 2008 at 1:22 PM, &quot;Andr&#233;s G. Aragoneses&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">knocte at gmail.com</A>&gt;
wrote:

&gt;<i> Andr&#233;s G. Aragoneses wrote:
</I>&gt;<i> &gt; Jerome Haltom wrote:
</I>&gt;<i> &gt;&gt; Howdy. The last few days I've been working on a patch to MonoDevelop to
</I>&gt;<i> &gt;&gt; implement a feature I consider pretty important on the Linux/Unix space.
</I>&gt;<i> &gt;&gt; I'm going to start by explaining the problem, then my solution.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; First the problem. Sometimes it is understandable that in closed source
</I>&gt;<i> &gt;&gt; shops that use Visual Studio, when only a few developers are working on
</I>&gt;<i> &gt;&gt; it, a reference might be added to a third party assembly that exists on
</I>&gt;<i> &gt;&gt; a shared network drive. In VS, you'd right click on your project and
</I>&gt;<i> &gt;&gt; choose Add Reference, Browse, navigate to your shared network drive, and
</I>&gt;<i> &gt;&gt; choose the assembly. VS would store the absolute path to the assembly in
</I>&gt;<i> &gt;&gt; the project file, so that other users would attempt to refer to the
</I>&gt;<i> &gt;&gt; assembly from the same location.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; In open source code, this is generally a poor idea, for obvious reasons.
</I>&gt;<i> &gt;&gt; Nobody has shared network drives. For closed source internal company
</I>&gt;<i> &gt;&gt; code, there is nothing wrong with this. It's perfectly fine, many people
</I>&gt;<i> &gt;&gt; do it, and it works as expected.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Another situation might be when you want to add a reference to a library
</I>&gt;<i> &gt;&gt; installed on your OS, but which provides no means of dynamic location of
</I>&gt;<i> &gt;&gt; the assembly. Perhaps the assembly is simply installed directly
</I>&gt;<i> &gt;&gt; into /usr/lib. Perhaps it was never really packaged properly to be
</I>&gt;<i> &gt;&gt; consumed by others. No pkgconfig files. I personally see nothing wrong
</I>&gt;<i> &gt;&gt; with this. It would be nice to modify the package so that it installed a
</I>&gt;<i> &gt;&gt; pkgconfig file, no doubt. But you aren't going to convince my small
</I>&gt;<i> &gt;&gt; internal IT department to do so. Suggesting that we do is a non-starter.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; All of those points considered, MonoDevelop does not allow this to work.
</I>&gt;<i> &gt;&gt; If you add a reference to a file in /usr/lib, for instance, MonoDevelop
</I>&gt;<i> &gt;&gt; stores in it's project file something along the lines of
</I>&gt;<i> &gt;&gt; '../../../../../../usr/lib/foo/Bar.dll'. This is silly. There is no
</I>&gt;<i> &gt;&gt; expectation that my project file will be in the same place on every
</I>&gt;<i> &gt;&gt; system, so no expectation that the relative path will be the same. It
</I>&gt;<i> &gt;&gt; breaks.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; So. There are a few possible ways to address this that I see.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; a) Advocate that nobody refers to files outside of the solution
</I>&gt;<i> &gt;&gt; directory, and anybody who does is doing it Wrong.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I don't really find this solution practical. You won't convince people
</I>&gt;<i> &gt;&gt; by mandating solutions like this. Additionally, I don't really even have
</I>&gt;<i> &gt;&gt; a ethical problem with references outside my project directory! There is
</I>&gt;<i> &gt;&gt; no consistent definition of Wrong here.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; b) Store absolute paths in the project file when appropriate.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I'm all for this. If there was a way that would automatically determine
</I>&gt;<i> &gt;&gt; when a file should be stored absolute. I don't think there is a way. You
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Are you sure?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Let's say you link to /usr/lib/whatever, in MD that should be a
</I>&gt;<i> &gt; reference to ../../../(n times)/../usr/lib/whatever/.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Why not checking iteratively:
</I>&gt;<i> &gt; 1) is .. == / ? If yes, it's absolute.
</I>&gt;<i> &gt; 2) is ../.. == / ? If yes, it's absolute.
</I>&gt;<i> &gt; After n) It's relative.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The only case in which this would fail is that if someone stablishes
</I>&gt;<i> &gt; it's root dir project to /, which is non-sense.
</I>&gt;<i>
</I>&gt;<i> Hugh, and it would fail also if the project's root dir is in the same
</I>&gt;<i> first-level dir from root as the library, which is maybe not nonsense,
</I>&gt;<i> but totally uncommon...
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i>                Andres
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodevelop-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">Monodevelop-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodevelop-list/attachments/20080508/661c11b5/attachment.html">http://lists.ximian.com/pipermail/monodevelop-list/attachments/20080508/661c11b5/attachment.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007693.html">[MonoDevelop] [PATCH. RFC] Absolute File References
</A></li>
	<LI>Next message: <A HREF="007695.html">[MonoDevelop] [PATCH. RFC] Absolute File References
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7694">[ date ]</a>
              <a href="thread.html#7694">[ thread ]</a>
              <a href="subject.html#7694">[ subject ]</a>
              <a href="author.html#7694">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
