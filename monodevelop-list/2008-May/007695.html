<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] [PATCH. RFC] Absolute File References
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20%5BPATCH.%20RFC%5D%20Absolute%20File%20References&In-Reply-To=f31182ab0805081212g277ae6d8td8eb8976dcb37130%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007694.html">
   <LINK REL="Next"  HREF="007712.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] [PATCH. RFC] Absolute File References</H1>
    <B>Jerome Haltom</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20%5BPATCH.%20RFC%5D%20Absolute%20File%20References&In-Reply-To=f31182ab0805081212g277ae6d8td8eb8976dcb37130%40mail.gmail.com"
       TITLE="[MonoDevelop] [PATCH. RFC] Absolute File References">wasabi at larvalstage.net
       </A><BR>
    <I>Thu May  8 15:40:08 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="007694.html">[MonoDevelop] [PATCH. RFC] Absolute File References
</A></li>
        <LI>Next message: <A HREF="007712.html">[MonoDevelop] [PATCH. RFC] Absolute File References
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7695">[ date ]</a>
              <a href="thread.html#7695">[ thread ]</a>
              <a href="subject.html#7695">[ subject ]</a>
              <a href="author.html#7695">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is interesting, but probably way more complicated than is required.
In my patch, the user just has to check a check box on the reference for
Absolute Path. In yours he's responsible for typing in the path to the
reference, or hand editing it to either remove ${ProjectDir} or add it.
Maybe it should always automatically be added, unless the user hand
edits it out? It changes the interface of the References property box
quite a bit. It also requires a breaking change in the .mdp file format:
new files will begin to have variables in them, old versions of MD won't
support that.

I don't think it'd go over very well.

That said, I do like the ability to hand type reference paths... for
instance when the reference is built as the output of another project
from some custom process: for instance running ikvmc to convert a .jar
to a .dll.

My desire for that is out of the scope of this though.

On Thu, 2008-05-08 at 14:12 -0500, Marcos Mar&#237;n wrote:
&gt;<i> This is what I do in the CBinding:
</I>&gt;<i> All paths are absolute, but paths get parsed for vars like
</I>&gt;<i> ${ProjectDir} and ${CombineDir}, so if I want to link a lib
</I>&gt;<i> in /usr/lib/somelib.so thats fine, yet I can also add a reference to
</I>&gt;<i> something that comes packaged with the project like
</I>&gt;<i> ${ProjectDir}/libmymath.so which will work perfectly fine on someone
</I>&gt;<i> else's computer.
</I>&gt;<i> 
</I>&gt;<i> Take a look at the StringParserService
</I>&gt;<i> <A HREF="http://anonsvn.mono-project.com/viewcvs/trunk/monodevelop/main/src/core/MonoDevelop.Core/MonoDevelop.Core/StringParserService.cs?view=markup">http://anonsvn.mono-project.com/viewcvs/trunk/monodevelop/main/src/core/MonoDevelop.Core/MonoDevelop.Core/StringParserService.cs?view=markup</A>
</I>&gt;<i> and this is an example of the widgets we use to allow the user to add
</I>&gt;<i> a var like ${ProjectDir}.
</I>&gt;<i> <A HREF="http://anonsvn.mono-project.com/viewcvs/trunk/monodevelop/main/src/addins/CBinding/Gui/CodeGenerationPanel.cs?view=markup">http://anonsvn.mono-project.com/viewcvs/trunk/monodevelop/main/src/addins/CBinding/Gui/CodeGenerationPanel.cs?view=markup</A>
</I>&gt;<i> 
</I>&gt;<i> On Thu, May 8, 2008 at 1:22 PM, &quot;Andr&#233;s G. Aragoneses&quot;
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">knocte at gmail.com</A>&gt; wrote:
</I>&gt;<i>         
</I>&gt;<i>         Andr&#233;s G. Aragoneses wrote:
</I>&gt;<i>         &gt; Jerome Haltom wrote:
</I>&gt;<i>         &gt;&gt; Howdy. The last few days I've been working on a patch to
</I>&gt;<i>         MonoDevelop to
</I>&gt;<i>         &gt;&gt; implement a feature I consider pretty important on the
</I>&gt;<i>         Linux/Unix space.
</I>&gt;<i>         &gt;&gt; I'm going to start by explaining the problem, then my
</I>&gt;<i>         solution.
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>         &gt;&gt; First the problem. Sometimes it is understandable that in
</I>&gt;<i>         closed source
</I>&gt;<i>         &gt;&gt; shops that use Visual Studio, when only a few developers
</I>&gt;<i>         are working on
</I>&gt;<i>         &gt;&gt; it, a reference might be added to a third party assembly
</I>&gt;<i>         that exists on
</I>&gt;<i>         &gt;&gt; a shared network drive. In VS, you'd right click on your
</I>&gt;<i>         project and
</I>&gt;<i>         &gt;&gt; choose Add Reference, Browse, navigate to your shared
</I>&gt;<i>         network drive, and
</I>&gt;<i>         &gt;&gt; choose the assembly. VS would store the absolute path to
</I>&gt;<i>         the assembly in
</I>&gt;<i>         &gt;&gt; the project file, so that other users would attempt to
</I>&gt;<i>         refer to the
</I>&gt;<i>         &gt;&gt; assembly from the same location.
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>         &gt;&gt; In open source code, this is generally a poor idea, for
</I>&gt;<i>         obvious reasons.
</I>&gt;<i>         &gt;&gt; Nobody has shared network drives. For closed source
</I>&gt;<i>         internal company
</I>&gt;<i>         &gt;&gt; code, there is nothing wrong with this. It's perfectly
</I>&gt;<i>         fine, many people
</I>&gt;<i>         &gt;&gt; do it, and it works as expected.
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>         &gt;&gt; Another situation might be when you want to add a reference
</I>&gt;<i>         to a library
</I>&gt;<i>         &gt;&gt; installed on your OS, but which provides no means of
</I>&gt;<i>         dynamic location of
</I>&gt;<i>         &gt;&gt; the assembly. Perhaps the assembly is simply installed
</I>&gt;<i>         directly
</I>&gt;<i>         &gt;&gt; into /usr/lib. Perhaps it was never really packaged
</I>&gt;<i>         properly to be
</I>&gt;<i>         &gt;&gt; consumed by others. No pkgconfig files. I personally see
</I>&gt;<i>         nothing wrong
</I>&gt;<i>         &gt;&gt; with this. It would be nice to modify the package so that
</I>&gt;<i>         it installed a
</I>&gt;<i>         &gt;&gt; pkgconfig file, no doubt. But you aren't going to convince
</I>&gt;<i>         my small
</I>&gt;<i>         &gt;&gt; internal IT department to do so. Suggesting that we do is a
</I>&gt;<i>         non-starter.
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>         &gt;&gt; All of those points considered, MonoDevelop does not allow
</I>&gt;<i>         this to work.
</I>&gt;<i>         &gt;&gt; If you add a reference to a file in /usr/lib, for instance,
</I>&gt;<i>         MonoDevelop
</I>&gt;<i>         &gt;&gt; stores in it's project file something along the lines of
</I>&gt;<i>         &gt;&gt; '../../../../../../usr/lib/foo/Bar.dll'. This is silly.
</I>&gt;<i>         There is no
</I>&gt;<i>         &gt;&gt; expectation that my project file will be in the same place
</I>&gt;<i>         on every
</I>&gt;<i>         &gt;&gt; system, so no expectation that the relative path will be
</I>&gt;<i>         the same. It
</I>&gt;<i>         &gt;&gt; breaks.
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>         &gt;&gt; So. There are a few possible ways to address this that I
</I>&gt;<i>         see.
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>         &gt;&gt; a) Advocate that nobody refers to files outside of the
</I>&gt;<i>         solution
</I>&gt;<i>         &gt;&gt; directory, and anybody who does is doing it Wrong.
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>         &gt;&gt; I don't really find this solution practical. You won't
</I>&gt;<i>         convince people
</I>&gt;<i>         &gt;&gt; by mandating solutions like this. Additionally, I don't
</I>&gt;<i>         really even have
</I>&gt;<i>         &gt;&gt; a ethical problem with references outside my project
</I>&gt;<i>         directory! There is
</I>&gt;<i>         &gt;&gt; no consistent definition of Wrong here.
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>         &gt;&gt; b) Store absolute paths in the project file when
</I>&gt;<i>         appropriate.
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>         &gt;&gt; I'm all for this. If there was a way that would
</I>&gt;<i>         automatically determine
</I>&gt;<i>         &gt;&gt; when a file should be stored absolute. I don't think there
</I>&gt;<i>         is a way. You
</I>&gt;<i>         &gt;
</I>&gt;<i>         &gt; Are you sure?
</I>&gt;<i>         &gt;
</I>&gt;<i>         &gt; Let's say you link to /usr/lib/whatever, in MD that should
</I>&gt;<i>         be a
</I>&gt;<i>         &gt; reference to ../../../(n times)/../usr/lib/whatever/.
</I>&gt;<i>         &gt;
</I>&gt;<i>         &gt; Why not checking iteratively:
</I>&gt;<i>         &gt; 1) is .. == / ? If yes, it's absolute.
</I>&gt;<i>         &gt; 2) is ../.. == / ? If yes, it's absolute.
</I>&gt;<i>         &gt; After n) It's relative.
</I>&gt;<i>         &gt;
</I>&gt;<i>         &gt; The only case in which this would fail is that if someone
</I>&gt;<i>         stablishes
</I>&gt;<i>         &gt; it's root dir project to /, which is non-sense.
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         Hugh, and it would fail also if the project's root dir is in
</I>&gt;<i>         the same
</I>&gt;<i>         first-level dir from root as the library, which is maybe not
</I>&gt;<i>         nonsense,
</I>&gt;<i>         but totally uncommon...
</I>&gt;<i>         
</I>&gt;<i>         Regards,
</I>&gt;<i>         
</I>&gt;<i>                        Andres
</I>&gt;<i>         
</I>&gt;<i>         --
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         _______________________________________________
</I>&gt;<i>         Monodevelop-list mailing list
</I>&gt;<i>         <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">Monodevelop-list at lists.ximian.com</A>
</I>&gt;<i>         <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>
</I>&gt;<i>         
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodevelop-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">Monodevelop-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007694.html">[MonoDevelop] [PATCH. RFC] Absolute File References
</A></li>
	<LI>Next message: <A HREF="007712.html">[MonoDevelop] [PATCH. RFC] Absolute File References
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7695">[ date ]</a>
              <a href="thread.html#7695">[ thread ]</a>
              <a href="subject.html#7695">[ subject ]</a>
              <a href="author.html#7695">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
