<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] One-shot dialogs from add-ins
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20One-shot%20dialogs%20from%20add-ins&In-Reply-To=319D198B-1B44-4AFA-9544-1DCBA792AA92%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009282.html">
   <LINK REL="Next"  HREF="009284.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] One-shot dialogs from add-ins</H1>
    <B>Casey Marshall</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20One-shot%20dialogs%20from%20add-ins&In-Reply-To=319D198B-1B44-4AFA-9544-1DCBA792AA92%40gmail.com"
       TITLE="[MonoDevelop] One-shot dialogs from add-ins">casey.s.marshall at gmail.com
       </A><BR>
    <I>Wed Mar 18 16:17:45 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009282.html">[MonoDevelop] One-shot dialogs from add-ins
</A></li>
        <LI>Next message: <A HREF="009284.html">[MonoDevelop] One-shot dialogs from add-ins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9283">[ date ]</a>
              <a href="thread.html#9283">[ thread ]</a>
              <a href="subject.html#9283">[ subject ]</a>
              <a href="author.html#9283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mar 18, 2009, at 1:05 PM, Casey Marshall wrote:

&gt;<i> On Mar 18, 2009, at 11:51 AM, Chris Howie wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Wed, Mar 18, 2009 at 2:43 PM, Casey Marshall
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">casey.s.marshall at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> Because, I want to do this:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  Application.Invoke(delegate {
</I>&gt;&gt;&gt;<i>    run-dialog-and-get-result();
</I>&gt;&gt;&gt;<i>    signal-caller(); // only signal if not originally in GUI thread?
</I>&gt;&gt;&gt;<i>  });
</I>&gt;&gt;&gt;<i>  wait-to-be-signaled(); // only wait if not in GUI thread?
</I>&gt;&gt;&gt;<i>  use-result();
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you use e.g. a ManualResetEvent then this will work exactly as you
</I>&gt;&gt;<i> describe.  When you signal the caller (via Set()) this will get
</I>&gt;&gt;<i> stored.  If you are running on the same thread, WaitOne will return
</I>&gt;&gt;<i> immediately since you set it earlier.  If you are on separate threads
</I>&gt;&gt;<i> then the WaitOne will return when Set is called.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> OK, this seems to do it:
</I>&gt;<i>
</I>&gt;<i>  string password = null;
</I>&gt;<i>  ManualResetEvent mre = new ManualResetEvent(false);
</I>&gt;<i>  Gtk.Application.Invoke(delegate {
</I>&gt;<i>    password = RunPasswordDialog();
</I>&gt;<i>    mre.Set();
</I>&gt;<i>  });
</I>&gt;<i>  Gtk.Main.Iteration(); // must do this to run the delegate above!
</I>&gt;<i>  mre.WaitOne();
</I>&gt;<i>
</I>&gt;<i> Which was kind of non-obvious, but it works now, and no longer  
</I>&gt;<i> messes up the TreeView.
</I>&gt;<i>
</I>
Nope, I still get corruption in the solution tree view:

ERROR [2009-03-18 13:13:19Z]: Gtk-Critical: file /build/buildd/gtk 
+2.0-2.12.9/gtk/gtktreeview.c: line 4895 (gtk_tree_view_bin_expose):  
assertion `has_child' failed.
There is a disparity between the internal view of the GtkTreeView,
and the GtkTreeModel.  This generally means that the model has changed
without letting the view know.  Any display from now on is likely to
be incorrect.

Stack trace:
    at Gtk.Application.Run()
    at MonoDevelop.Ide.Gui.IdeApp.Run()
    at MonoDevelop.Ide.Gui.IdeStartup.Run(System.String[] args)
    at MonoDevelop.Startup.SharpDevelopMain.Main(System.String[] args)
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009282.html">[MonoDevelop] One-shot dialogs from add-ins
</A></li>
	<LI>Next message: <A HREF="009284.html">[MonoDevelop] One-shot dialogs from add-ins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9283">[ date ]</a>
              <a href="thread.html#9283">[ thread ]</a>
              <a href="subject.html#9283">[ subject ]</a>
              <a href="author.html#9283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
