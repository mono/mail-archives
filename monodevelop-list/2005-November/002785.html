<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] First go at unit tests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20First%20go%20at%20unit%20tests&In-Reply-To=1133381870.6885.32.camel%40portatil.aticatac">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002782.html">
   <LINK REL="Next"  HREF="002781.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] First go at unit tests</H1>
    <B>M. Scott Ford</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20First%20go%20at%20unit%20tests&In-Reply-To=1133381870.6885.32.camel%40portatil.aticatac"
       TITLE="[MonoDevelop] First go at unit tests">vaderpi at scottandlaurie.com
       </A><BR>
    <I>Wed Nov 30 18:04:26 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002782.html">[MonoDevelop] First go at unit tests
</A></li>
        <LI>Next message: <A HREF="002781.html">[MonoDevelop] monodevelop 0.9 no code completion anymore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2785">[ date ]</a>
              <a href="thread.html#2785">[ thread ]</a>
              <a href="subject.html#2785">[ subject ]</a>
              <a href="author.html#2785">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I would argue that the only tests that are a waste of time to write are 
the ones that either always fail or are never run. One of those states 
usually leads to the other. However, with that being said, I do have 
some advice for the current situation.

With an existing code base, it has been my experience that adding tests 
just for the sake of adding tests is not all that useful. Instead, just 
write tests to cover all of the new stuff that you write. This would 
include all of the bugs that you fix.

It might be worth while to check out Michael Feather's book, Working 
Effectively with Legacy Code[1]. The essay of the same name[2] is also a 
very useful read. It may help you decide if you think it is worth buying 
the book.

Either way, my advice is not to try and tackle the problem by adding a 
test framework. Just start small and ask yourself. &quot;How do a write a 
test for this bug that I am working on.&quot; And then only write enough code 
to solve that problem. In the end, you may end up with a test framework 
after all. But then again, you may realize that you don't need one.

[1]: <A HREF="http://www.objectmentor.com/resources/bookstore/books/welc/">http://www.objectmentor.com/resources/bookstore/books/welc/</A>
[2]: 
<A HREF="http://www.objectmentor.com/resources/articles/WorkingEffectivelyWithLegacyCode.pdf">http://www.objectmentor.com/resources/articles/WorkingEffectivelyWithLegacyCode.pdf</A>

-Scott

Lluis Sanchez wrote:

&gt;<i>Hi,
</I>&gt;<i>
</I>&gt;<i>Before starting to build this test infrastructure it would be good to
</I>&gt;<i>think about what are we going to test and how to do it.
</I>&gt;<i>
</I>&gt;<i>About what: writing a test for Task is easy, but I feel it doesn't add
</I>&gt;<i>much value. I know it's just an example, but what I mean is that we need
</I>&gt;<i>to decide which classes are important to test. The current API is not
</I>&gt;<i>final. Some classes will change, some will desapear, some will be made
</I>&gt;<i>private, so writing tests for those would be a lose of time.
</I>&gt;<i>
</I>&gt;<i>About how: MonoDevelop.Ide (and most of the MonoDevelop.* assemblies) is
</I>&gt;<i>not just a standalone dll, it's an add-in. It needs to be loaded by the
</I>&gt;<i>MonoDevelop runtime, and it needs to be properly initialized. Otherwise,
</I>&gt;<i>it is not guaranteed to work at all.
</I>&gt;<i>
</I>&gt;<i>This could be a problem with NUnit. I know that NUnit can do per-class
</I>&gt;<i>test initialization, but we would need per-assembly initialization.
</I>&gt;<i>
</I>&gt;<i>Another problem I see is that many of the classes in MonoDevelop.Gui are
</I>&gt;<i>designed to run in the GUI thread, and all in the same app domain. AFAIK
</I>&gt;<i>NUnit creates its own test threads and app domains, so we'd need to
</I>&gt;<i>think about how to handle this.
</I>&gt;<i>
</I>&gt;<i>Lluis.
</I>&gt;<i>
</I>&gt;<i>El mi&#233;, 30-11-2005 a las 20:04 +0100, Jacob Ils&#248; Christensen escribi&#243;:
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>Hi.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>The attached patch changes some Makefiles to accomplish testing of
</I>&gt;&gt;<i>MonoDevelop.Ide.dll. In addition the file TaskTest.cs should be put
</I>&gt;&gt;<i>here:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>monodevelop/Core/src/MonoDevelop.Ide/Test/MonoDevelop.Ide.Tasks
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Right now it is assumed that the nunit assemblies are in the GAC and
</I>&gt;&gt;<i>that nunit-console.exe is in the path.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>make test builds MonoDevelop.Ide.dll and MonoDevelop.Ide.Test.dll and
</I>&gt;&gt;<i>then runs nunit-console.exe on MonoDevelop.Ide.Test.dll.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Is this the way we should go? Will someone try it out on their system
</I>&gt;&gt;<i>to see if it works as expected?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Thanks in advance,
</I>&gt;&gt;<i>Jacob
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>Monodevelop-list mailing list
</I>&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">Monodevelop-list at lists.ximian.com</A>
</I>&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Monodevelop-list mailing list
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">Monodevelop-list at lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>
</I>&gt;<i>  
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002782.html">[MonoDevelop] First go at unit tests
</A></li>
	<LI>Next message: <A HREF="002781.html">[MonoDevelop] monodevelop 0.9 no code completion anymore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2785">[ date ]</a>
              <a href="thread.html#2785">[ thread ]</a>
              <a href="subject.html#2785">[ subject ]</a>
              <a href="author.html#2785">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
