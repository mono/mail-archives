<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Update &quot;Addin Development Basics&quot; with new	install path
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=Re%3A%20%5BMonoDevelop%5D%20Update%20%22Addin%20Development%20Basics%22%20with%20new%0A%09install%20path&In-Reply-To=%3CCAMga9iSRiwyvBvWFPMLeTBpMSdgrqazZ9TYM323pjH72Bbr3Ng%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014617.html">
   <LINK REL="Next"  HREF="014618.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Update &quot;Addin Development Basics&quot; with new	install path</H1>
    <B>Michael Hutchinson</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=Re%3A%20%5BMonoDevelop%5D%20Update%20%22Addin%20Development%20Basics%22%20with%20new%0A%09install%20path&In-Reply-To=%3CCAMga9iSRiwyvBvWFPMLeTBpMSdgrqazZ9TYM323pjH72Bbr3Ng%40mail.gmail.com%3E"
       TITLE="[MonoDevelop] Update &quot;Addin Development Basics&quot; with new	install path">m.j.hutchinson at gmail.com
       </A><BR>
    <I>Fri Apr  6 02:29:20 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="014617.html">[MonoDevelop] Update &quot;Addin Development Basics&quot; with new install path
</A></li>
        <LI>Next message: <A HREF="014618.html">[MonoDevelop] Update &quot;Addin Development Basics&quot; with new install path
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14624">[ date ]</a>
              <a href="thread.html#14624">[ thread ]</a>
              <a href="subject.html#14624">[ subject ]</a>
              <a href="author.html#14624">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5 April 2012 01:22, Joshua Granick &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">bulkmail at joshuagranick.com</A>&gt; wrote:
&gt;<i> Adding a symlink to that install directory has worked out well. I can close
</I>&gt;<i> MonoDevelop, relaunch and have an up-to-date plugin.
</I>&gt;<i>
</I>&gt;<i> It's been pretty difficult to find what I need so far, but aggregating the
</I>&gt;<i> information I find online, as well as searching all the files in the
</I>&gt;<i> MonoDevelop git repo, have helped me piece together how some of these things
</I>&gt;<i> work.
</I>&gt;<i>
</I>&gt;<i> I'm much farther along than when I dabbled in creating an addin with
</I>&gt;<i> MonoDevelop 2.6 (I think?)... I've already got the custom languages set up,
</I>&gt;<i> with highlighting, as well as my own project types and templates. I couldn't
</I>&gt;<i> figure out how to embed resources into a project template, and it was
</I>
You can use the RawFile code in your xpt/xft template:
&lt;RawFile src=&quot;someFileRelativeToAddin.png&quot; name=&quot;SomeName.png&quot; /&gt;

src is relative to the addin location, which means the file will need
to be &quot;copy to output&quot;, and don't forget to add a &lt;Runtime&gt;&lt;Import
file=&quot;... etc. so that the addin depends on this file.

Note you can use the src attribute on a File element too, so the
xft/xpt can become just a manifest. You can even avoid embedding the
manifest itself when you register it: &lt;FileTemplate id = &quot;Foo&quot; file =
&quot;templates/Foo.xft.xml&quot;/&gt;

Although historically, MD addins have kept everything inside the
xft/xpt and embedded it into the template, I would recommend using
files, with the addin structured something like this:
Foo/Foo.dll
Foo/Templates
Foo/Templates/Project.xpt.xml
Foo/Templates/Project/SomePng.png
Foo/Templates/Project/SomeFile.foo

&gt;<i> difficult to find all of the variables you could use in templates (like
</I>&gt;<i> ${Name} and ${ProjectName}), but the big things I need to solve now are
</I>&gt;<i> getting my compilation to work, then investigating code completion.
</I>&gt;<i>
</I>&gt;<i> It will be interesting to figure out, because code completion for my target
</I>&gt;<i> language is provided by the compiler, so I don't have to write a lot of
</I>&gt;<i> parsers to understand the language, but I wonder how that may mess with some
</I>
In general, MD provides a lot &quot;for free&quot; for .NET languages or other
languages that interact with the MD type system. It might be possible
for you to map type types into the MD type model to make them
automatically show up in the document outline, tooltips, class view,
etc. Or you might just have to reimplement some of these things, or
alter MD core to make them more extensible.

I can't speculate much on integrating the compiler for code completion
without details, but I'd expect you'll need direct access to AST for
things like folding, document outline, go-to-type, class browser, etc.
You could take a look at the F# addin, since it used the F# compiler
for completion, and I expect it has/had problems similar to those
you'll have.

&gt;<i> of the conveniences MonoDevelop provides. For example, the ${Namespace} tag
</I>&gt;<i> only returns &quot;Application&quot;, I assume because I don't have any parsers set up
</I>&gt;<i> to know how the file names and directories relate to the namespace.
</I>
All of the substitutable values in the file/project templating system
come from the template handler classes, while provide a lot more
default functionality for .NET projects:
<A HREF="https://github.com/mono/monodevelop/blob/master/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide.Templates/SingleFileDescriptionTemplate.cs#L337">https://github.com/mono/monodevelop/blob/master/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide.Templates/SingleFileDescriptionTemplate.cs#L337</A>

However, you can register your own template types that add additional
substitutions or even generate the content completely differently:
<A HREF="https://github.com/mono/monodevelop/blob/master/main/src/addins/AspNet/MonoDevelop.AspNet/MonoDevelop.AspNet.addin.xml#L95">https://github.com/mono/monodevelop/blob/master/main/src/addins/AspNet/MonoDevelop.AspNet/MonoDevelop.AspNet.addin.xml#L95</A>
<A HREF="https://github.com/mono/monodevelop/blob/master/main/src/addins/AspNet/MonoDevelop.AspNet/MonoDevelop.AspNet/AspNetFileDescriptionTemplate.cs">https://github.com/mono/monodevelop/blob/master/main/src/addins/AspNet/MonoDevelop.AspNet/MonoDevelop.AspNet/AspNetFileDescriptionTemplate.cs</A>

And then use these in your templates:
<A HREF="https://github.com/mono/monodevelop/blob/master/main/src/addins/AspNet/MonoDevelop.AspNet/Templates/WebForm-CodeBehind.xft.xml#L22">https://github.com/mono/monodevelop/blob/master/main/src/addins/AspNet/MonoDevelop.AspNet/Templates/WebForm-CodeBehind.xft.xml#L22</A>

&gt;<i> It would be great to be able to set up the project panel so that it
</I>&gt;<i> automatically adds any files in the target directory as a part of the
</I>&gt;<i> project. It isn't the biggest deal in the world, but its a nuisance coming
</I>
Do you want them actually added to the project file, or does the
project implicitly contain all the files in its base folder?

We never did the latter, but it would be useful to have a mechanism
for it, because it's not uncommon - even &quot;ASP.NET web sites&quot; projects
do it. We only support &quot;ASP.NET web apps&quot;, which have actual project
files, but I have thought about the problem a bit.

IMO the best way would be a custom project (de)serializer, which would
simply scan the disk and add all the files to the project in memory
when loading the project files, and omit them when writing it back
out.

&gt;<i> over from other editors. I suppose I might be able to constantly poll as a
</I>&gt;<i> part of my project somehow, or maybe this is a behavior that can be altered
</I>&gt;<i> in the existing control?
</I>
Polling the filesystem is quite expensive, and FileSystemWatcher
doesn't work reliably on MacOS. Instead, we have a mechanism in the
workspace that detects changes in projects' files by getting mtimes
when MD loses focus, and checking them again when it regains focus.
Maybe you could extend it to also detect added/removed files in
project folders?

&gt;<i> By and large I've been enjoying 2.8 even more than my previous experiences.
</I>&gt;<i> Excited to continue exploring support
</I>
Glad it's working out! I know the idea of bringing parts of FD into a
MD addin been discussed on and off for a few years, and it's exciting
to see someone making real progress :)

-- 
Michael Hutchinson
<A HREF="http://mjhutchinson.com">http://mjhutchinson.com</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014617.html">[MonoDevelop] Update &quot;Addin Development Basics&quot; with new install path
</A></li>
	<LI>Next message: <A HREF="014618.html">[MonoDevelop] Update &quot;Addin Development Basics&quot; with new install path
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14624">[ date ]</a>
              <a href="thread.html#14624">[ thread ]</a>
              <a href="subject.html#14624">[ subject ]</a>
              <a href="author.html#14624">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
