<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] [Problem] Project reference with vala
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20%5BProblem%5D%20Project%20reference%20with%20vala&In-Reply-To=loom.20090409T165839-262%40post.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009444.html">
   <LINK REL="Next"  HREF="009447.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] [Problem] Project reference with vala</H1>
    <B>Levi Bard</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20%5BProblem%5D%20Project%20reference%20with%20vala&In-Reply-To=loom.20090409T165839-262%40post.gmane.org"
       TITLE="[MonoDevelop] [Problem] Project reference with vala">taktaktaktaktaktaktaktaktaktak at gmail.com
       </A><BR>
    <I>Thu Apr  9 14:21:46 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009444.html">[MonoDevelop] [Problem] Project reference with vala
</A></li>
        <LI>Next message: <A HREF="009447.html">[MonoDevelop] [Problem] Project reference with vala
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9445">[ date ]</a>
              <a href="thread.html#9445">[ thread ]</a>
              <a href="subject.html#9445">[ subject ]</a>
              <a href="author.html#9445">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> I am playing with some Vala code in monodevelop. I currently have two projects
</I>&gt;<i> in the solution -- one library and one unit test for it -- and plan to add a
</I>&gt;<i> few more. And I have a problem with the reference from the test project to the
</I>&gt;<i> library one works only partly.
</I>&gt;<i>
</I>&gt;<i> I mean, the valac is given correct .vapi file to generate the code, but it is
</I>&gt;<i> *not* given either include path nor the library file for the C compiler, so
</I>&gt;<i> vala generates the C sources, but compiling them fails.
</I>
Hi, it's great to see someone using MD for Vala!
I think valac's behavior in this respect has changed semi-recently; if
I recall correctly, it used to be that, if one were compiling directly
to binaries, neither the include path nor the linker path were
required. (What version of Vala are you using?)

&gt;<i> I have currently worked around the problem by manually adding
</I>&gt;<i> appropriate --Xcc= options in the Build/Code Generation properties. But as I
</I>&gt;<i> said, I plan to add a few more projects and it will quickly grow ugly.
</I>&gt;<i>
</I>&gt;<i> Do you have any better proposal? Or should this be reported as a (possibly
</I>&gt;<i> wish-list) bug?
</I>
This is definitely a bug. I'll address it as soon as possible.

&gt;<i> Note, that monodevelop generated a .md.pc file for me and even seems to
</I>&gt;<i> regenerate it with every build. It only includes the Libs: definition and no
</I>&gt;<i> Cflags: and does not seem to be used anyway. Should it be used somehow, or
</I>&gt;<i> does it only exist as a template?
</I>
This is a carryover of the project reference behavior from the C
binding; it should be used internally or not at all.

&gt;<i> To complicate matters a little more, I am not entirely sure whether linking
</I>&gt;<i> the libraries should be done by path to the .so file (which will generate
</I>&gt;<i> rpath) or -L and -l options and using LD_LIBRARY_PATH for execution (which is
</I>&gt;<i> pain, but it will avoid the rpath, which is undesired for installed binaries).
</I>&gt;<i>
</I>&gt;<i> For unit-tests the rpath variant seems better, but the installed binary
</I>&gt;<i> (I have none yet, but I will have) should not have rpath and I fear MD can't
</I>&gt;<i> tell those cases apart.
</I>
I agree that -L/-l is a better general case; MD and valac should be
handling this for you.



-- 
<A HREF="http://homes.eff.org/~barlow/EconomyOfIdeas.html">http://homes.eff.org/~barlow/EconomyOfIdeas.html</A>
<A HREF="http://www.dreamsongs.com/MobSoftware.html">http://www.dreamsongs.com/MobSoftware.html</A>
<A HREF="http://www.gnu.org/philosophy/shouldbefree.html">http://www.gnu.org/philosophy/shouldbefree.html</A>
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009444.html">[MonoDevelop] [Problem] Project reference with vala
</A></li>
	<LI>Next message: <A HREF="009447.html">[MonoDevelop] [Problem] Project reference with vala
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9445">[ date ]</a>
              <a href="thread.html#9445">[ thread ]</a>
              <a href="subject.html#9445">[ subject ]</a>
              <a href="author.html#9445">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
