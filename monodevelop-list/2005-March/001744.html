<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] managed dock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:john.luke%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001753.html">
   <LINK REL="Next"  HREF="001745.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] managed dock
   </H1>
    <B>John Luke
    </B> 
    <A HREF="mailto:john.luke%40gmail.com"
       TITLE="[MonoDevelop] managed dock">john.luke@gmail.com
       </A><BR>
    <I>Sun, 06 Mar 2005 23:35:34 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="001753.html">[MonoDevelop] Compiling MonoDevelop from SVN
</A></li>
        <LI> Next message: <A HREF="001745.html">[MonoDevelop] managed dock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1744">[ date ]</a>
              <a href="thread.html#1744">[ thread ]</a>
              <a href="subject.html#1744">[ subject ]</a>
              <a href="author.html#1744">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-U6txLWjUJ5DRJaQ3xMPg
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hey all,
	I've been working on finishing the C# version of the gdl dock recently
and it's pretty much working now.  I only expect there to be minor bugs
and perhaps some performance problems remaining.  Thanks to Todd and
Jeroen for doing the hard parts earlier.

If some people try it out and report no major problems perhaps it can be
switched to, otherwise it should wait a bit to be committed.

To try it out:
cd MonoDevelop/Unused/Gdl/
make
cd MonoDevelop/Core/src/Base
make clean
patch -p0 &lt; dock.patch
make
cd MonoDevelop/build/bin
mono MonoDevelop.exe

--=-U6txLWjUJ5DRJaQ3xMPg
Content-Disposition: attachment; filename=dock.patch
Content-Type: text/x-patch; name=dock.patch; charset=UTF-8
Content-Transfer-Encoding: 7bit

Index: Gui/Workbench/Layouts/SdiWorkspaceLayout.cs
===================================================================
--- Gui/Workbench/Layouts/SdiWorkspaceLayout.cs	(revision 2275)
+++ Gui/Workbench/Layouts/SdiWorkspaceLayout.cs	(working copy)
@@ -83,7 +83,7 @@
 			
 			// Create the docking widget and add it to the window.
 			dock = new Dock ();
-			DockBar dockBar = new DockBar (dock);
+			DockBar dockBar = dock.Master.DockBar;
 			Gtk.HBox dockBox = new HBox (false, 5);
 			dockBox.PackStart (dockBar, false, true, 0);
 			dockBox.PackStart (dock, true, true, 0);
@@ -345,8 +345,9 @@
 								 content.Icon,
 								 DockItemBehavior.Normal);
 								 
-			Gtk.Label label = item.Tablabel as Gtk.Label;
-			label.UseMarkup = true;
+			Gtk.Label label = item.TabLabel as Gtk.Label;
+			if (label != null)
+				label.UseMarkup = true;
 
 			item.Add (content.Control);
 			item.ShowAll ();
@@ -356,11 +357,11 @@
 			if (extraPad) {
 				DockItem ot = dock.GetItemByName (&quot;MonoDevelop.Gui.Pads.OpenTaskView&quot;); 
 				if (ot != null &amp;&amp; ot.IsAttached) {
-					item.DockTo (ot, DockPlacement.Center, 0);
+					item.DockTo (ot, DockPlacement.Center);
 				}
 				else {
 					ot = dock.GetItemByName (&quot;Documents&quot;); 
-					item.DockTo (ot, DockPlacement.Bottom, 0);
+					item.DockTo (ot, DockPlacement.Bottom);
 				}
 			}
 			else
@@ -375,8 +376,9 @@
 			IPadContent content = (IPadContent) source;
 			DockItem item = GetDockItem (content);
 			if (item != null) {
-				Gtk.Label label = item.Tablabel as Gtk.Label;
-				label.Markup = content.Title;
+				Gtk.Label label = item.TabLabel as Gtk.Label;
+				if (label != null)
+					label.Markup = content.Title;
 				item.LongName = content.Title;
 				item.StockId = content.Icon;
 			}
Index: Makefile.am
===================================================================
--- Makefile.am	(revision 2275)
+++ Makefile.am	(working copy)
@@ -6,7 +6,7 @@
 	/r:$(top_builddir)/build/bin/MonoDevelop.Gui.Utils.dll \
 	/r:$(top_builddir)/build/bin/MonoDevelop.Gui.Widgets.dll \
 	/r:System.Data.dll /r:System.Web.Services.dll \
-	/r:$(top_builddir)/build/bin/gdl-sharp.dll \
+	/r:$(top_builddir)/build/bin/MonoDevelop.Dock.dll \
 	/r:Mono.Posix.dll \
 	$(GTK_SHARP_LIBS) \
 	$(GNOME_SHARP_LIBS) \

--=-U6txLWjUJ5DRJaQ3xMPg--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001753.html">[MonoDevelop] Compiling MonoDevelop from SVN
</A></li>
	<LI> Next message: <A HREF="001745.html">[MonoDevelop] managed dock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1744">[ date ]</a>
              <a href="thread.html#1744">[ thread ]</a>
              <a href="subject.html#1744">[ subject ]</a>
              <a href="author.html#1744">[ author ]</a>
         </LI>
       </UL>
</body></html>
