<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Generics support - Part 2 (PATCH)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Generics%20support%20-%20Part%202%20%28PATCH%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004278.html">
   <LINK REL="Next"  HREF="004252.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Generics support - Part 2 (PATCH)</H1>
    <B>Matej Urbas</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Generics%20support%20-%20Part%202%20%28PATCH%29&In-Reply-To="
       TITLE="[MonoDevelop] Generics support - Part 2 (PATCH)">matej.urbas at gmail.com
       </A><BR>
    <I>Sun Jul 23 09:48:26 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="004278.html">[MonoDevelop] Generics support - Part 2 (PATCH)
</A></li>
        <LI>Next message: <A HREF="004252.html">[MonoDevelop] Progressbar?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4251">[ date ]</a>
              <a href="thread.html#4251">[ thread ]</a>
              <a href="subject.html#4251">[ subject ]</a>
              <a href="author.html#4251">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Forgot to attach the newly added file...

---------------------------

Hi

Finally, I have concluded with the second part of implementing generic
support in MonoDevelop's code completion. (There is still a lot to be
done before we can be happy, though...)

What has been done:

- generic data gets parsed correctly from .NET assemblies (using
Mono.Cecil). This means that code completion databases contain all
generic info about types from every assembly.

- I have improved the way we obtain info for return types and parameters
in methods (generics are included).

- some generic info is already displayed in the code completion window,
but due to some greater design obstacles, I could not do much to make it
perfect/usable - this is the point where we have to redesign the way
code completion works (in source editors).

What has to be done:

- language bindings must fill out generic info about types

- language bindings must know that generic types have a '`#' appended in
their names...

- code completion must be somewhat redesigned to thoroughly support
generics...


The patch is attached and ready to commit.


Discussion:

You will notice, that generic types have a '`#' appended to their names.
Since Alejandro and Miguel have pointed out that this is the standard
naming convention of CLS (and it sure makes perfect sence), I have
decided that FullyQualifiedNames MUST preserve this naming convention.
But since language bindings don't understand this naming convention (and
since MonoDevelop's code completion doesn't trim the aforementioned
suffix) MonoDevelop doesn't recognize generic types, and hence members
for all generic types are invisible for now. (Note that generic members
of non-generic types ARE visible already...)

To solve this, I suggest the following (a short term solution):

- we introduce a new method in IAmbience - namely 'string
ConvertName(IClass)', which only removes the suffix and perhaps adds the
generic parameters (e.g.: enclosed in '&lt;' and '&gt;' for C#).

- we introduce a new property in the CodeCompletionWindow which contains
the correct 'completionString'. Now, it seems, that MonoDevelop uses the
string which is used in the code completion popup to display names, but
the problem is that characters '&lt;' and '&gt;' get replaced by '&amp;lt;' and
'&amp;gt;' - which makes no sense in the SourceEditor...


Well, this is only a short term solution. I'll be working on a
redesigned code completion infrastructure and will discuss much before I
implement anything. But for now, we should just get the bare minimum
working...


Enjoy,
---
Matej
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MonoDevelop-generics-part2.diff
Type: text/x-patch
Size: 32780 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060723/1145469a/attachment-0002.bin">http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060723/1145469a/attachment-0002.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PersistentGenericParamater.cs
Type: text/x-csharp
Size: 1844 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060723/1145469a/attachment-0003.bin">http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060723/1145469a/attachment-0003.bin</A> 
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004278.html">[MonoDevelop] Generics support - Part 2 (PATCH)
</A></li>
	<LI>Next message: <A HREF="004252.html">[MonoDevelop] Progressbar?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4251">[ date ]</a>
              <a href="thread.html#4251">[ thread ]</a>
              <a href="subject.html#4251">[ subject ]</a>
              <a href="author.html#4251">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
