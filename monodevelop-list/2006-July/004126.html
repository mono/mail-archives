<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Generics in CC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Generics%20in%20CC&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004124.html">
   <LINK REL="Next"  HREF="004127.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Generics in CC</H1>
    <B>Matej Urbas</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Generics%20in%20CC&In-Reply-To="
       TITLE="[MonoDevelop] Generics in CC">matej.urbas at gmail.com
       </A><BR>
    <I>Mon Jul  3 16:47:57 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="004124.html">[MonoDevelop] Autotools alternative?
</A></li>
        <LI>Next message: <A HREF="004127.html">[MonoDevelop] Generics in CC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4126">[ date ]</a>
              <a href="thread.html#4126">[ thread ]</a>
              <a href="subject.html#4126">[ subject ]</a>
              <a href="author.html#4126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I've been away for a while, but here I am again.

While I'm still trying to make generics support for CC, I have not 
progressed very far. I have not been able to make the (de)serialization 
process work... I need some help from professionals here.

After changing the BaseTypes attribute into a ReturnTypeList (in 
AbstractClass), and after making all the changes needed in Persistent* 
classes, I have broken quite some things.

I have tested the changes on the Monodevelop project (Monodevelop.mds) - 
where I have manually deleted the .pidb files (I don't know if that's 
the right way of testing it either :D).


The problem I'm experiencing is that the serialization process doesn't 
work well (not at all). I'm getting a lot of these (when code completion 
is triggered in an editor):

ERROR MonoDevelop.Core.ILoggingService [(null)] - 
System.IndexOutOfRangeException: Array index is out of range.
in &lt;0x0000e&gt; MonoDevelop.Projects.Parser.StringNameTable:GetStringValue 
(Int32 id)
in &lt;0x0003d&gt; MonoDevelop.Projects.Parser.PersistentHelper:ReadString 
(System.IO.BinaryReader reader, INameDecoder nameTable)
in &lt;0x0005b&gt; MonoDevelop.Projects.Parser.PersistentReturnType:Read 
(System.IO.BinaryReader reader, INameDecoder nameTable)
in &lt;0x00156&gt; MonoDevelop.Projects.Parser.PersistentClass:Read 
(System.IO.BinaryReader reader, INameDecoder nameTable)
in &lt;0x0009f&gt; 
MonoDevelop.Projects.Parser.CodeCompletionDatabase:ReadClass 
(MonoDevelop.Projects.Parser.ClassEntry ce)
in &lt;0x0005d&gt; MonoDevelop.Projects.Parser.CodeCompletionDatabase:GetClass 
(MonoDevelop.Projects.Parser.ClassEntry ce)
in &lt;0x0012f&gt; MonoDevelop.Projects.Parser.CodeCompletionDatabase:GetClass 
(System.String typeName, Boolean caseSensitive)
in &lt;0x000d7&gt; MonoDevelop.Projects.Parser.ParserDatabase:GetClass 
(MonoDevelop.Projects.Parser.CodeCompletionDatabase db, System.String 
typeName, Boolean caseSensitive)
in &lt;0x00035&gt; MonoDevelop.Projects.Parser.ParserDatabase:GetClass 
(MonoDevelop.Projects.Parser.CodeCompletionDatabase db, System.String 
typeName, Boolean deepSearchReferences, Boolean caseSensitive)
in &lt;0x00014&gt; MonoDevelop.Projects.Parser.ParserDatabase:GetClass 
(MonoDevelop.Projects.Parser.CodeCompletionDatabase db, System.String 
typeName)
in &lt;0x00066&gt; MonoDevelop.Projects.Parser.ParserDatabase:SearchType 
(MonoDevelop.Projects.Parser.CodeCompletionDatabase db, System.String 
name, IClass callingClass, ICompilationUnit unit)
in &lt;0x00020&gt; 
MonoDevelop.Projects.Parser.ParserDatabase+CompilationUnitTypeResolver:Resolve 
(System.String typeName)
in &lt;0x00059&gt; MonoDevelop.Projects.Parser.PersistentReturnType:Resolve 
(IReturnType source, ITypeResolver typeResolver)
in &lt;0x000be&gt; MonoDevelop.Projects.Parser.PersistentProperty:Resolve 
(IProperty source, ITypeResolver typeResolver)
in &lt;0x00607&gt; MonoDevelop.Projects.Parser.PersistentClass:Resolve (IClass 
sclass, ITypeResolver typeResolver)
in &lt;0x000b4&gt; MonoDevelop.Projects.Parser.ParserDatabase:ResolveTypes 
(MonoDevelop.Projects.Project project, ICompilationUnit unit, 
MonoDevelop.Projects.Parser.ClassCollection types, 
MonoDevelop.Projects.Parser.ClassCollection result)
in &lt;0x000e6&gt; 
MonoDevelop.Projects.Parser.ProjectCodeCompletionDatabase:UpdateFromParseInfo 
(IParseInformation parserInfo, System.String fileName)
in &lt;0x0016c&gt; MonoDevelop.Projects.Parser.ParserDatabase:UpdateFile 
(MonoDevelop.Projects.Project project, System.String fileName, 
System.String fileContent)

It would be nice if anyone with experience could only examine my changes 
and point me into the right direction. I'm still trying to figure it out 
on my own, though ;)

The patches are attached, please take a look.

Bye
---
Matej Urbas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MonoDevelop-generic_support.patch
Type: text/x-patch
Size: 57851 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060703/0c0e47c0/attachment-0004.bin">http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060703/0c0e47c0/attachment-0004.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: GenericParameter.cs
Type: text/x-csharp
Size: 4598 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060703/0c0e47c0/attachment-0005.bin">http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060703/0c0e47c0/attachment-0005.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: GenericParameterList.cs
Type: text/x-csharp
Size: 531 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060703/0c0e47c0/attachment-0006.bin">http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060703/0c0e47c0/attachment-0006.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ReturnTypeList.cs
Type: text/x-csharp
Size: 486 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060703/0c0e47c0/attachment-0007.bin">http://lists.ximian.com/pipermail/monodevelop-list/attachments/20060703/0c0e47c0/attachment-0007.bin</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004124.html">[MonoDevelop] Autotools alternative?
</A></li>
	<LI>Next message: <A HREF="004127.html">[MonoDevelop] Generics in CC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4126">[ date ]</a>
              <a href="thread.html#4126">[ thread ]</a>
              <a href="subject.html#4126">[ subject ]</a>
              <a href="author.html#4126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
