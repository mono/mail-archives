<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Problems building master on Linux due to missing	Microsoft.AspNet.Mvc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=Re%3A%20%5BMonoDevelop%5D%20Problems%20building%20master%20on%20Linux%20due%20to%20missing%0A%09Microsoft.AspNet.Mvc&In-Reply-To=%3CCAJ0%3DnQfDVwTEw9Pb-b7f7gXW%2BQgHNpwq71eXFg%2B5YbOrMAg5Vw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016102.html">
   <LINK REL="Next"  HREF="016105.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Problems building master on Linux due to missing	Microsoft.AspNet.Mvc</H1>
    <B>Timotheus Pokorra</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=Re%3A%20%5BMonoDevelop%5D%20Problems%20building%20master%20on%20Linux%20due%20to%20missing%0A%09Microsoft.AspNet.Mvc&In-Reply-To=%3CCAJ0%3DnQfDVwTEw9Pb-b7f7gXW%2BQgHNpwq71eXFg%2B5YbOrMAg5Vw%40mail.gmail.com%3E"
       TITLE="[MonoDevelop] Problems building master on Linux due to missing	Microsoft.AspNet.Mvc">timotheus.pokorra at solidcharity.com
       </A><BR>
    <I>Tue Jul  8 07:10:22 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="016102.html">[MonoDevelop] Problems building master on Linux due to missing Microsoft.AspNet.Mvc
</A></li>
        <LI>Next message: <A HREF="016105.html">[MonoDevelop] Problems building master on Linux due to missing	Microsoft.AspNet.Mvc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16104">[ date ]</a>
              <a href="thread.html#16104">[ thread ]</a>
              <a href="subject.html#16104">[ subject ]</a>
              <a href="author.html#16104">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Matt,

I first thought my problems were solved, because it worked after
installing the certificates.
But now after integrating it into my nightly build of Monodevelop, I
realize that sometimes I still get errors.

&gt;<i> Another thing to try is running NuGet.exe with the same command line
</I>&gt;<i> arguments, as in the output, but add &quot;-verbosity detailed&quot;. This should
</I>&gt;<i> display the full call stack of the exceptions which may be give us more
</I>&gt;<i> information.
</I>I have run it now with &quot;-verbosity detailed&quot;.
Please see the output below.
You can see that the installation of 2 dlls works, but it fails for the last.

All the best,
  Timotheus

here the log:

(this is with Mono 3.4)

mozroots --import --machine --sync
yes | certmgr -ssl -m <A HREF="https://go.microsoft.com">https://go.microsoft.com</A>
yes | certmgr -ssl -m <A HREF="https://nugetgallery.blob.core.windows.net">https://nugetgallery.blob.core.windows.net</A>
yes | certmgr -ssl -m <A HREF="https://nuget.org">https://nuget.org</A>

[00345] Mozilla Roots Importer - version 3.4.0.0
[00345] Download and import trusted root certificates from Mozilla's MXR.
[00345] Copyright 2002, 2003 Motus Technologies. Copyright 2004-2008
Novell. BSD licensed.
[00345]
[00345] Downloading from
'<A HREF="http://mxr.mozilla.org/seamonkey/source/security/nss/lib/ckfw/builtins/certdata.txt?raw=1">http://mxr.mozilla.org/seamonkey/source/security/nss/lib/ckfw/builtins/certdata.txt?raw=1</A>'...
[00345] Importing certificates into machine store...
[00345] 140 new root certificates were added to your trust store.
[00345] Import process completed.
[00345]
[00345] Mono Certificate Manager - version 3.4.0.0
[00345] Manage X.509 certificates and CRL from stores.
[00345] Copyright 2002, 2003 Motus Technologies. Copyright 2004-2008
Novell. BSD licensed.
[00345]
[00345]
[00345] Self-signed X.509 Certificate v3
[00345]    Issued from: C=IE, O=Baltimore, OU=CyberTrust, CN=Baltimore
CyberTrust Root
[00345]    Issued to:   C=IE, O=Baltimore, OU=CyberTrust, CN=Baltimore
CyberTrust Root
[00345]    Valid from:  05/12/2000 18:46:00
[00345]    Valid until: 05/12/2025 23:59:00
[00345] This certificate is already in the Trust store.
[00345]
[00345] X.509 Certificate v3
[00345]    Issued from: C=IE, O=Baltimore, OU=CyberTrust, CN=Baltimore
CyberTrust Root
[00345]    Issued to:   CN=Microsoft Internet Authority
[00345]    Valid from:  04/25/2012 17:41:36
[00345]    Valid until: 04/25/2020 17:40:55
[00345]    *** WARNING: Certificate signature is INVALID ***
[00345] Import this certificate into the CA store ?
[00345] X.509 Certificate v3
[00345]    Issued from: CN=Microsoft Internet Authority
[00345]    Issued to:   DC=com, DC=microsoft, DC=corp, DC=redmond,
CN=MSIT Machine Auth CA 2
[00345]    Valid from:  05/15/2012 20:40:55
[00345]    Valid until: 05/15/2016 20:50:55
[00345]    *** WARNING: Certificate signature is INVALID ***
[00345] Import this certificate into the CA store ?
[00345] X.509 Certificate v3
[00345]    Issued from: DC=com, DC=microsoft, DC=corp, DC=redmond,
CN=MSIT Machine Auth CA 2
[00345]    Issued to:   C=US, S=WA, L=Redmond, O=Microsoft, OU=MSCOM,
CN=GO.MICROSOFT.COM
[00345]    Valid from:  11/14/2012 21:01:45
[00345]    Valid until: 11/14/2014 21:01:45
[00345] Import this certificate into the AddressBook store ?
[00345] 3 certificates added to the stores.
[00345] Mono Certificate Manager - version 3.4.0.0
[00345] Manage X.509 certificates and CRL from stores.
[00345] Copyright 2002, 2003 Motus Technologies. Copyright 2004-2008
Novell. BSD licensed.
[00345]
[00345]
[00345] X.509 Certificate v3
[00345]    Issued from: C=IE, O=Baltimore, OU=CyberTrust, CN=Baltimore
CyberTrust Root
[00345]    Issued to:   CN=Microsoft Internet Authority
[00345]    Valid from:  04/25/2012 17:41:36
[00345]    Valid until: 04/25/2020 17:40:55
[00345]    *** WARNING: Certificate signature is INVALID ***
[00345] This certificate is already in the CA store.
[00345]
[00345] X.509 Certificate v3
[00345]    Issued from: CN=Microsoft Internet Authority
[00345]    Issued to:   DC=com, DC=microsoft, DC=corp, DC=redmond,
CN=MSIT Machine Auth CA 2
[00345]    Valid from:  05/15/2012 20:40:55
[00345]    Valid until: 05/15/2016 20:50:55
[00345]    *** WARNING: Certificate signature is INVALID ***
[00345] This certificate is already in the CA store.
[00345]
[00345] X.509 Certificate v3
[00345]    Issued from: DC=com, DC=microsoft, DC=corp, DC=redmond,
CN=MSIT Machine Auth CA 2
[00345]    Issued to:   CN=*.blob.core.windows.net
[00345]    Valid from:  02/20/2014 12:56:36
[00345]    Valid until: 02/20/2016 12:56:36
[00345] Import this certificate into the AddressBook store ?
[00345] 1 certificate added to the stores.
[00345] Mono Certificate Manager - version 3.4.0.0
[00345] Manage X.509 certificates and CRL from stores.
[00345] Copyright 2002, 2003 Motus Technologies. Copyright 2004-2008
Novell. BSD licensed.
[00345]
[00345]
[00345] X.509 Certificate v3
[00345]    Issued from: C=US, O=GeoTrust Inc., CN=GeoTrust Global CA
[00345]    Issued to:   C=US, O=&quot;GeoTrust, Inc.&quot;, CN=RapidSSL CA
[00345]    Valid from:  02/19/2010 22:45:05
[00345]    Valid until: 02/18/2020 22:45:05
[00345]    *** WARNING: Certificate signature is INVALID ***
[00345] Import this certificate into the CA store ?
[00345] X.509 Certificate v3
[00345]    Issued from: C=US, O=&quot;GeoTrust, Inc.&quot;, CN=RapidSSL CA
[00345]    Issued to:   OID.2.5.4.5=sPtVnrrF4RC7oFR6tDZvL/-rFIn3Huo8,
OU=GT65670104, OU=See www.rapidssl.com/resources/cps (c)13, OU=Domain
Control Validated - RapidSSL(R), CN=*.nuget.org
[00345]    Valid from:  02/14/2013 17:43:48
[00345]    Valid until: 04/18/2015 11:02:19
[00345] Import this certificate into the AddressBook store ?
[00345] 2 certificates added to the stores.

cd main/src/addins/AspNet &amp;&amp; mono
../../../external/nuget-binary/NuGet.exe restore -SolutionDirectory
../../.. -verbosity detailed

[00345] &#65279;Restoring NuGet packages listed in packages.config file.
[00347] GET <A HREF="https://www.nuget.org/api/v2/Packages(Id=">https://www.nuget.org/api/v2/Packages(Id=</A>'Microsoft.AspNet.Razor',Version='2.0.30506')
[00347] GET <A HREF="https://www.nuget.org/api/v2/Packages(Id=">https://www.nuget.org/api/v2/Packages(Id=</A>'Microsoft.AspNet.WebPages',Version='2.0.30506')
[00347] GET <A HREF="https://www.nuget.org/api/v2/Packages(Id=">https://www.nuget.org/api/v2/Packages(Id=</A>'Microsoft.AspNet.Mvc',Version='4.0.30506')
[00348] &#65279;ERROR building certificate chain: System.ArgumentException:
certificate ---&gt; System.Security.Cryptography.CryptographicException:
Unable to decode public key. ---&gt; System.NullReferenceException:
Object reference not set to an instance of an object
[00348]   at System.Security.Cryptography.X509Certificates.PublicKey..ctor
(Mono.Security.X509.X509Certificate certificate) [0x00000] in
&lt;filename unknown&gt;:0
[00348]   at System.Security.Cryptography.X509Certificates.X509Certificate2.get_PublicKey
() [0x00000] in &lt;filename unknown&gt;:0
[00348]   --- End of inner exception stack trace ---
[00348]   at System.Security.Cryptography.X509Certificates.X509Certificate2.get_PublicKey
() [0x00000] in &lt;filename unknown&gt;:0
[00348]   at System.Security.Cryptography.X509Certificates.X509Chain.Process
(Int32 n) [0x00000] in &lt;filename unknown&gt;:0
[00348]   at System.Security.Cryptography.X509Certificates.X509Chain.ValidateChain
(X509ChainStatusFlags flag) [0x00000] in &lt;filename unknown&gt;:0
[00348]   at System.Security.Cryptography.X509Certificates.X509Chain.Build
(System.Security.Cryptography.X509Certificates.X509Certificate2
certificate) [0x00000] in &lt;filename unknown&gt;:0
[00348]   --- End of inner exception stack trace ---
[00348]   at System.Security.Cryptography.X509Certificates.X509Chain.Build
(System.Security.Cryptography.X509Certificates.X509Certificate2
certificate) [0x00000] in &lt;filename unknown&gt;:0
[00348]   at System.Net.ServicePointManager+ChainValidationHelper.ValidateChain
(Mono.Security.X509.X509CertificateCollection certs) [0x00000] in
&lt;filename unknown&gt;:0
[00348] Please, report this problem to the Mono team
[00348] Installing 'Microsoft.AspNet.Mvc 4.0.30506.0'.
[00348] Installing 'Microsoft.AspNet.WebPages 2.0.30506.0'.
[00348] Installing 'Microsoft.AspNet.Razor 2.0.30506.0'.
[00348] GET <A HREF="https://www.nuget.org/api/v2/package/Microsoft.AspNet.WebPages/2.0.30506">https://www.nuget.org/api/v2/package/Microsoft.AspNet.WebPages/2.0.30506</A>
[00348] GET <A HREF="https://www.nuget.org/api/v2/package/Microsoft.AspNet.Mvc/4.0.30506">https://www.nuget.org/api/v2/package/Microsoft.AspNet.Mvc/4.0.30506</A>
[00348] GET <A HREF="https://www.nuget.org/api/v2/package/Microsoft.AspNet.Razor/2.0.30506">https://www.nuget.org/api/v2/package/Microsoft.AspNet.Razor/2.0.30506</A>
[00348] Successfully installed 'Microsoft.AspNet.Razor 2.0.30506.0'.
[00348] Successfully installed 'Microsoft.AspNet.WebPages 2.0.30506.0'.
[00348] System.Net.WebException: Error: SendFailure (Error writing
headers) ---&gt; System.Net.WebException: Error writing headers ---&gt;
System.IO.IOException: The authentication or decryption has failed.
---&gt; Mono.Security.Protocol.Tls.TlsException: Invalid certificate
received from server. Error code: 0xffffffff800b010a
[00349]   at Mono.Security.Protocol.Tls.Handshake.Client.TlsServerCertificate.RemoteValidation
(Mono.Security.Protocol.Tls.ClientContext context, AlertDescription
description) [0x00000] in &lt;filename unknown&gt;:0
[00349]   at Mono.Security.Protocol.Tls.Handshake.Client.TlsServerCertificate.validateCertificates
(Mono.Security.X509.X509CertificateCollection certificates) [0x00000]
in &lt;filename unknown&gt;:0
[00349]   at Mono.Security.Protocol.Tls.Handshake.Client.TlsServerCertificate.ProcessAsTls1
() [0x00000] in &lt;filename unknown&gt;:0
[00349]   at Mono.Security.Protocol.Tls.Handshake.HandshakeMessage.Process
() [0x00000] in &lt;filename unknown&gt;:0
[00349]   at (wrapper remoting-invoke-with-check)
Mono.Security.Protocol.Tls.Handshake.HandshakeMessage:Process ()
[00349]   at Mono.Security.Protocol.Tls.ClientRecordProtocol.ProcessHandshakeMessage
(Mono.Security.Protocol.Tls.TlsStream handMsg) [0x00000] in &lt;filename
unknown&gt;:0
[00349]   at Mono.Security.Protocol.Tls.RecordProtocol.InternalReceiveRecordCallback
(IAsyncResult asyncResult) [0x00000] in &lt;filename unknown&gt;:0
[00349]   --- End of inner exception stack trace ---
[00349]   at Mono.Security.Protocol.Tls.SslClientStream.EndNegotiateHandshake
(IAsyncResult result) [0x00000] in &lt;filename unknown&gt;:0
[00349]   at Mono.Security.Protocol.Tls.SslStreamBase.AsyncHandshakeCallback
(IAsyncResult asyncResult) [0x00000] in &lt;filename unknown&gt;:0
[00349]   --- End of inner exception stack trace ---
[00349]   --- End of inner exception stack trace ---
[00349]   at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult
asyncResult) [0x00000] in &lt;filename unknown&gt;:0
[00349]   at System.Net.HttpWebRequest.GetResponse () [0x00000] in
&lt;filename unknown&gt;:0
[00349]   at NuGet.RequestHelper.GetResponse (System.Func`1
createRequest, System.Action`1 prepareRequest, IProxyCache proxyCache,
ICredentialCache credentialCache, ICredentialProvider
credentialProvider) [0x00000] in &lt;filename unknown&gt;:0
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016102.html">[MonoDevelop] Problems building master on Linux due to missing Microsoft.AspNet.Mvc
</A></li>
	<LI>Next message: <A HREF="016105.html">[MonoDevelop] Problems building master on Linux due to missing	Microsoft.AspNet.Mvc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16104">[ date ]</a>
              <a href="thread.html#16104">[ thread ]</a>
              <a href="subject.html#16104">[ subject ]</a>
              <a href="author.html#16104">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
