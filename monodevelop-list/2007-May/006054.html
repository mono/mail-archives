<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] [PATCH] Fix Improper	MemberNodeCommandHandling	inClassPad
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20%5BPATCH%5D%20Fix%20Improper%0A%09MemberNodeCommandHandling%09inClassPad&In-Reply-To=569c97d20705282331v436f0627g9bbbebc1d8d83494%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006052.html">
   <LINK REL="Next"  HREF="006039.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] [PATCH] Fix Improper	MemberNodeCommandHandling	inClassPad</H1>
    <B>Lluis Sanchez</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20%5BPATCH%5D%20Fix%20Improper%0A%09MemberNodeCommandHandling%09inClassPad&In-Reply-To=569c97d20705282331v436f0627g9bbbebc1d8d83494%40mail.gmail.com"
       TITLE="[MonoDevelop] [PATCH] Fix Improper	MemberNodeCommandHandling	inClassPad">lluis at ximian.com
       </A><BR>
    <I>Tue May 29 07:21:41 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="006052.html">[MonoDevelop] [PATCH] Fix Improper MemberNodeCommandHandling	inClassPad
</A></li>
        <LI>Next message: <A HREF="006039.html">[MonoDevelop] &quot;Implement interface&quot; issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6054">[ date ]</a>
              <a href="thread.html#6054">[ thread ]</a>
              <a href="subject.html#6054">[ subject ]</a>
              <a href="author.html#6054">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; One possibility is to have the pidb loading code keep a table of unique
</I>&gt;<i> &gt; &gt; FileName strings as they are loaded from disk, and set the instance to
</I>&gt;<i> &gt; &gt; the unique string rather than the one loaded.
</I>&gt;<i>  So, I think the filename table should be maintained for each Class.
</I>&gt;<i> Or do we need to have a global one? Having a per class filename table
</I>&gt;<i> adds only a little overhead as it duplicates the filename between all
</I>&gt;<i> classes declared in the same file. So which one would be better? If it
</I>&gt;<i> is chosen to go for a global table,  is there anything wrong in making
</I>&gt;<i> it have a static reference in the class 'DefaultClass' ?
</I>&gt;<i> 
</I>&gt;<i> Can it be done in this way? Please explain.
</I>
I would do the following:

      * At parse time, assign the file name to IClass and to all its
        IMembers. In fact, every parsed class goes through a resolving
        process which resolved referenced types, so even if the parser
        does not assign a file name to each member, the resolving
        process could do it.
      * When saving an IClass to the pidb file, check the filename of
        each IMember, and if it is the same as the IClass filename,
        don't store it again (store it as null).
      * When loading an IClass, check all loaded IMembers. Assign the
        IClass file name to all IMembers with a null filename in the
        region.

Notice that each part of a partial class is stored individually as an
IClass, so the previous process would also work for sharing strings for
partial classes.

Lluis.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006052.html">[MonoDevelop] [PATCH] Fix Improper MemberNodeCommandHandling	inClassPad
</A></li>
	<LI>Next message: <A HREF="006039.html">[MonoDevelop] &quot;Implement interface&quot; issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6054">[ date ]</a>
              <a href="thread.html#6054">[ thread ]</a>
              <a href="subject.html#6054">[ subject ]</a>
              <a href="author.html#6054">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
