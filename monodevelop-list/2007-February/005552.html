<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Threading issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Threading%20issues&In-Reply-To=da8be25a0702231447k27f43052l786e08343d8b0724%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005536.html">
   <LINK REL="Next"  HREF="005537.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Threading issues</H1>
    <B>Luciano _</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20Threading%20issues&In-Reply-To=da8be25a0702231447k27f43052l786e08343d8b0724%40mail.gmail.com"
       TITLE="[MonoDevelop] Threading issues">lnc19 at hotmail.com
       </A><BR>
    <I>Mon Feb 26 08:33:37 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="005536.html">[MonoDevelop] Threading issues
</A></li>
        <LI>Next message: <A HREF="005537.html">[MonoDevelop] New release -- DllNotFound exception for msvcrt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5552">[ date ]</a>
              <a href="thread.html#5552">[ thread ]</a>
              <a href="subject.html#5552">[ subject ]</a>
              <a href="author.html#5552">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi. I guess you will need to read this:

<A HREF="http://www.mono-project.com/Responsive_Applications">http://www.mono-project.com/Responsive_Applications</A>

The explanation: (As i understand it): Gtk works on its own thread, and all 
the operation must be called from this thread, all the calls from other 
thread could cause unpredictable behaviors.

The easy approach for your code is to use:

Gtk.Application.Invoke ( delegate
{
   PBStatus.Fraction = 0.20;
});

Only a thought: I guess that you don't need other (second one) thread to 
update your ProgressBar, The progress bar will be updated from the new 
thread . I mean: You have the current thread, and you call the second thread 
to Perform your operations and this thread will update your applications.
If you wish an example, i used in my own app.

Is called from here:
<A HREF="http://gcomandos.svn.sourceforge.net/viewvc/gcomandos/trunk/gComandos/gComandos/ui/windows/FindFiles.cs?revision=81&amp;view=markup">http://gcomandos.svn.sourceforge.net/viewvc/gcomandos/trunk/gComandos/gComandos/ui/windows/FindFiles.cs?revision=81&amp;view=markup</A>

And the object that make the operations is here:
<A HREF="http://gcomandos.svn.sourceforge.net/viewvc/gcomandos/trunk/gComandos/gComandos/fs/Search.cs?revision=64&amp;view=markup">http://gcomandos.svn.sourceforge.net/viewvc/gcomandos/trunk/gComandos/gComandos/fs/Search.cs?revision=64&amp;view=markup</A>



&gt;<i>From: &quot;Neil Munro&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">neilmunro at gmail.com</A>&gt;
</I>&gt;<i>To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list at lists.ximian.com</A>
</I>&gt;<i>Subject: [MonoDevelop] Threading issues
</I>&gt;<i>Date: Fri, 23 Feb 2007 22:47:14 +0000
</I>&gt;<i>MIME-Version: 1.0
</I>&gt;<i>Received: from lists.ximian.com ([130.57.169.22]) by 
</I>&gt;<i>bay0-mc2-f18.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2444); Fri, 
</I>&gt;<i>23 Feb 2007 14:47:23 -0800
</I>&gt;<i>Received: from galactus.ximian.com (localhost.localdomain [127.0.0.1])by 
</I>&gt;<i>lists.ximian.com (Postfix) with ESMTP id C937A1CFC53;Fri, 23 Feb 2007 
</I>&gt;<i>19:20:01 -0500 (EST)
</I>&gt;<i>Received: from herald.ximian.com (frontgate.ximian.com [130.57.169.19])by 
</I>&gt;<i>lists.ximian.com (Postfix) with ESMTP id 467A71CFC44for 
</I>&gt;<i>&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list at lists.ximian.com</A>&gt;;Fri, 23 Feb 2007 19:19:59 -0500 (EST)
</I>&gt;<i>Received: by herald.ximian.com (Postfix, from userid 2601)id 28A8270077; 
</I>&gt;<i>Fri, 23 Feb 2007 17:47:19 -0500 (EST)
</I>&gt;<i>Received: from ug-out-1314.google.com (ug-out-1314.google.com 
</I>&gt;<i>[66.249.92.175])by herald.ximian.com (Postfix) with ESMTP id 2E0B770076for 
</I>&gt;<i>&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list at lists.ximian.com</A>&gt;;Fri, 23 Feb 2007 17:47:15 -0500 (EST)
</I>&gt;<i>Received: by ug-out-1314.google.com with SMTP id 78so486320ugnfor 
</I>&gt;<i>&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list at lists.ximian.com</A>&gt;;Fri, 23 Feb 2007 14:47:15 -0800 (PST)
</I>&gt;<i>Received: by 10.78.193.19 with SMTP id q19mr235681huf.1172270834741;Fri, 23 
</I>&gt;<i>Feb 2007 14:47:14 -0800 (PST)
</I>&gt;<i>Received: by 10.78.69.4 with HTTP; Fri, 23 Feb 2007 14:47:14 -0800 (PST)
</I>&gt;<i>X-Message-Info: txF49lGdW41IVhCEpnUhd3eJx96SiuA3MFKQ3hMjHbE=
</I>&gt;<i>X-Original-To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list at lists.ximian.com</A>
</I>&gt;<i>Delivered-To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list at lists.ximian.com</A>
</I>&gt;<i>X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
</I>&gt;<i>frontgate.ximian.com
</I>&gt;<i>X-Spam-Level: X-Spam-Status: No, score=0.9 required=5.0 
</I>&gt;<i>tests=HTML_60_70,HTML_MESSAGE,MY_OBFUT,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS 
</I>&gt;<i>version=3.0.3
</I>&gt;<i>X-BeenThere: <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list at lists.ximian.com</A>
</I>&gt;<i>X-Mailman-Version: 2.1.8
</I>&gt;<i>Precedence: list
</I>&gt;<i>List-Id: MonoDevelop discussion mailing 
</I>&gt;<i>list&lt;monodevelop-list.lists.ximian.com&gt;
</I>&gt;<i>List-Unsubscribe: 
</I>&gt;<i>&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>&gt;, 
</I>&gt;<i>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list-request at lists.ximian.com</A>?subject=unsubscribe&gt;
</I>&gt;<i>List-Archive: &lt;<A HREF="http://lists.ximian.com/pipermail/monodevelop-list">http://lists.ximian.com/pipermail/monodevelop-list</A>&gt;
</I>&gt;<i>List-Post: &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list at lists.ximian.com</A>&gt;
</I>&gt;<i>List-Help: &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list-request at lists.ximian.com</A>?subject=help&gt;
</I>&gt;<i>List-Subscribe: 
</I>&gt;<i>&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>&gt;,&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list-request at lists.ximian.com</A>?subject=subscribe&gt;
</I>&gt;<i>Errors-To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list-bounces at lists.ximian.com</A>
</I>&gt;<i>Return-Path: <A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">monodevelop-list-bounces at lists.ximian.com</A>
</I>&gt;<i>X-OriginalArrivalTime: 23 Feb 2007 22:47:23.0494 (UTC) 
</I>&gt;<i>FILETIME=[95507060:01C7579C]
</I>&gt;<i>
</I>&gt;<i>Hi, I posted here a while back about a progress bar issue I had, to be told
</I>&gt;<i>I needed to learn about threading to make it work, I am learning from Mono:
</I>&gt;<i>Kick start and Mono: A Developers guide and both have a bit about threading
</I>&gt;<i>but I still cannot seem to get it right. It is still regarding how to get a
</I>&gt;<i>progress bar to work but I seem to have trouble with threads any help would
</I>&gt;<i>be appreciated.
</I>&gt;<i>
</I>&gt;<i>This is the code i have written so far
</I>&gt;<i>
</I>&gt;<i>                Thread thread;
</I>&gt;<i>
</I>&gt;<i>                ThreadStart download = new ThreadStart ( vDownload );
</I>&gt;<i>                thread = new Thread ( download );
</I>&gt;<i>                thread.Start ( );
</I>&gt;<i>
</I>&gt;<i>                ThreadStart apb = new ThreadStart ( AdjustProgressBar1 );
</I>&gt;<i>                thread = new Thread ( apb );
</I>&gt;<i>                thread.Start ( );
</I>&gt;<i>
</I>&gt;<i>    protected void AdjustProgressBar1 ( )
</I>&gt;<i>    {
</I>&gt;<i>        PBStatus.Fraction = 0.20;
</I>&gt;<i>    }
</I>&gt;<i>
</I>&gt;<i>protected virtual void vDownload()
</I>&gt;<i>    {
</I>&gt;<i>        try
</I>&gt;<i>        {
</I>&gt;<i>            StreamWriter GenerateScript = new StreamWriter ( &quot;download.sh&quot;
</I>&gt;<i>);
</I>&gt;<i>            GenerateScript.WriteLine ( &quot;#!/bin/bash&quot; );
</I>&gt;<i>            GenerateScript.WriteLine ( &quot;mkdir temp&quot; );
</I>&gt;<i>            GenerateScript.WriteLine ( &quot;cd temp&quot; );
</I>&gt;<i>            GenerateScript.WriteLine ( &quot;wget {0}&quot;, ENURL.Text );
</I>&gt;<i>            GenerateScript.Close ( );
</I>&gt;<i>
</I>&gt;<i>            ProcessStartInfo ExeScript = new ProcessStartInfo ( );
</I>&gt;<i>            ExeScript.FileName = &quot;chmod&quot;;
</I>&gt;<i>            ExeScript.Arguments = &quot;+x download.sh&quot;;
</I>&gt;<i>            Process process = Process.Start ( ExeScript );
</I>&gt;<i>            process.WaitForExit ( );
</I>&gt;<i>            process.Close ( );
</I>&gt;<i>
</I>&gt;<i>            ProcessStartInfo RunScript = new ProcessStartInfo ( );
</I>&gt;<i>            RunScript.FileName = &quot;sh&quot;;
</I>&gt;<i>            RunScript.Arguments = &quot;download.sh&quot;;
</I>&gt;<i>            Process process2 = Process.Start ( RunScript );
</I>&gt;<i>            process2.WaitForExit ( );
</I>&gt;<i>            process2.Close ( );
</I>&gt;<i>        }
</I>&gt;<i>
</I>&gt;<i>        catch (Exception ex)
</I>&gt;<i>        {
</I>&gt;<i>            ENInfo.Text = ex.Message;
</I>&gt;<i>        }
</I>&gt;<i>
</I>&gt;<i>        /*finally
</I>&gt;<i>        {
</I>&gt;<i>            PBStatus.Fraction = 0.20;
</I>&gt;<i>        }*/
</I>&gt;<i>    }
</I>&gt;<i>
</I>&gt;<i>Neil Munro
</I>

&gt;<i>_______________________________________________
</I>&gt;<i>Monodevelop-list mailing list
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">Monodevelop-list at lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-list">http://lists.ximian.com/mailman/listinfo/monodevelop-list</A>
</I>
_________________________________________________________________
Visita MSN Latino Noticias: Todo lo que pasa en el mundo y en tu pa&#237;n, &#161;en 
tu idioma! <A HREF="http://latino.msn.com/noticias/">http://latino.msn.com/noticias/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005536.html">[MonoDevelop] Threading issues
</A></li>
	<LI>Next message: <A HREF="005537.html">[MonoDevelop] New release -- DllNotFound exception for msvcrt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5552">[ date ]</a>
              <a href="thread.html#5552">[ thread ]</a>
              <a href="subject.html#5552">[ subject ]</a>
              <a href="author.html#5552">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
