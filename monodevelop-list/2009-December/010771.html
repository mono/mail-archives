<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] [Patch] Mark T4-generated classes with 'partial'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20%5BPatch%5D%20Mark%20T4-generated%20classes%20with%20%27partial%27&In-Reply-To=aec34c770911301542x4e8b52edvf5503815052a5793%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010770.html">
   <LINK REL="Next"  HREF="010772.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] [Patch] Mark T4-generated classes with 'partial'</H1>
    <B>Olivier Dagenais</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=%5BMonoDevelop%5D%20%5BPatch%5D%20Mark%20T4-generated%20classes%20with%20%27partial%27&In-Reply-To=aec34c770911301542x4e8b52edvf5503815052a5793%40mail.gmail.com"
       TITLE="[MonoDevelop] [Patch] Mark T4-generated classes with 'partial'">olivier.dagenais at gmail.com
       </A><BR>
    <I>Tue Dec  1 20:42:40 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010770.html">[MonoDevelop] Use bigger fonts in MonoDevelop's editor, how?
</A></li>
        <LI>Next message: <A HREF="010772.html">[MonoDevelop] [Patch] Mark T4-generated classes with 'partial'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10771">[ date ]</a>
              <a href="thread.html#10771">[ thread ]</a>
              <a href="subject.html#10771">[ subject ]</a>
              <a href="author.html#10771">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Yup, I see no harm in it either. It should be especially useful when
</I>&gt;<i> we allow generating template classes from tt files within MD, like
</I>&gt;<i> VS2010 does (<A HREF="http://monodevelop.com/Developers/Tasks/Tools/T4#_task_a_T4.ClassGenerator">http://monodevelop.com/Developers/Tasks/Tools/T4#_task_a_T4.ClassGenerator</A>).
</I>
Cool, I already wrote code to make this happen for me with Visual
Studio 2008.  See
&lt;<A HREF="http://code.google.com/p/softwareninjas/source/detail?r=29">http://code.google.com/p/softwareninjas/source/detail?r=29</A>&gt; for the
initial MSBuild task I wrote based on some of the code in
GenerationTests.  The T4 patches I have been submitting (a few more
are on the way) are the changes I made to help make this happen.

While I have your attention, I would like to discuss the next patch I
was going to submit:  fixing the multi-threading nightmare that is
ToStringHelper.  I realize it was Microsoft who introduced it, but I
see no compelling reason to have the functionality it provides be
implemented as a singleton.  In my project, I incorporated its
functionality as instance methods on TextTransformation so that
parallel instances of TextTransformation (from the same or different
template) could use their own IFormatProvider instances without
risking a race condition in TemplatingEngine.Run().

See &lt;<A HREF="http://code.google.com/p/softwareninjas/source/detail?r=26">http://code.google.com/p/softwareninjas/source/detail?r=26</A>&gt; for
my implementation, which suits my purposes.  It has the side-effect
that compiled templates would only need to reference
TextTransformation and thus end-users could include Mono's
implementation of TextTransformation.cs in their projects much the
same way that end-users of Mono.Options can simply include
Mono.Options.cs in their projects.

In the general case, however, I think we would be better off adding a
read-write property called FormatProvider to TextTransformation and
thus avoid touching the TextTransformation constructor.  As you can
see in revision 26, I ended up painting myself into a corner with
TemplatingEngine.cs with my first approach while the approach I'm
proposing here (i.e. the property) would be simpler because it
wouldn't have to deal with instantiation by reflection.

What do you think?
- Oli
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010770.html">[MonoDevelop] Use bigger fonts in MonoDevelop's editor, how?
</A></li>
	<LI>Next message: <A HREF="010772.html">[MonoDevelop] [Patch] Mark T4-generated classes with 'partial'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10771">[ date ]</a>
              <a href="thread.html#10771">[ thread ]</a>
              <a href="subject.html#10771">[ subject ]</a>
              <a href="author.html#10771">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
