<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoDevelop] Why MonoDevelop doesn't use	GtkTextView/GtkSourceView?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=Re%3A%20%5BMonoDevelop%5D%20Why%20MonoDevelop%20doesn%27t%20use%0A%09GtkTextView/GtkSourceView%3F&In-Reply-To=%3C53F89A19.5020602%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016171.html">
   <LINK REL="Next"  HREF="016173.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoDevelop] Why MonoDevelop doesn't use	GtkTextView/GtkSourceView?</H1>
    <B>Mike Kr&#252;ger</B> 
    <A HREF="mailto:monodevelop-list%40lists.ximian.com?Subject=Re%3A%20%5BMonoDevelop%5D%20Why%20MonoDevelop%20doesn%27t%20use%0A%09GtkTextView/GtkSourceView%3F&In-Reply-To=%3C53F89A19.5020602%40xamarin.com%3E"
       TITLE="[MonoDevelop] Why MonoDevelop doesn't use	GtkTextView/GtkSourceView?">mkrueger at xamarin.com
       </A><BR>
    <I>Sat Aug 23 13:41:45 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="016171.html">[MonoDevelop] Why MonoDevelop doesn't use GtkTextView/GtkSourceView?
</A></li>
        <LI>Next message: <A HREF="016173.html">[MonoDevelop] Why MonoDevelop doesn't use GtkTextView/GtkSourceView?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16172">[ date ]</a>
              <a href="thread.html#16172">[ thread ]</a>
              <a href="subject.html#16172">[ subject ]</a>
              <a href="author.html#16172">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
&gt;<i> On Sat, Aug 23, 2014 at 11:47:21AM +0200, Mike Kr&#252;ger wrote:
</I>&gt;&gt;<i> We used GtkSourceView years ago but we needed more control over the text
</I>&gt;&gt;<i> editor.
</I>&gt;&gt;<i> Things like our incremental like find, folding, support for vs.net like
</I>&gt;&gt;<i> color themes and so on.
</I>&gt;<i> The search and replace is now implemented in GtkSourceView. Some
</I>&gt;<i> GtkTextView-based text editors have the code folding, so it is possible.
</I>&gt;<i> Syntax highlighting and color themes can anyway have a different
</I>&gt;<i> implementation in the application than the one available in
</I>&gt;<i> GtkSourceView.
</I>
The search &amp; replace idea was taken from us - therefore it's a bad 
example :).
Code folding is always possible to implement to a degree. But 
implementing like we did would require to change text lay outing (we're 
drawing folding markers as part of the layout) and background drawing - 
see the animations.
It's not a trivial implementation we have. Reworking the gtksourceview 
syntax highlighting, theming, folding, margins and so on would bring us 
very close to an own editor implementation anyways.

GtkSourceView is nice - I do not have complains about that but it 
doesn't solve our problem.

&gt;&gt;<i> As well as our text representation should support snapshotting
</I>&gt;<i> Is snapshotting different than a point in the undo/redo list? Or the
</I>&gt;<i> text buffer saved to a temporary file?
</I>Yes it is because it should be a O(1) operation that brings the whole 
text representation in an immutable state so that it can be used by 
background threads.
&gt;&gt;<i> Furthermore we need a text representation for non gui
</I>&gt;&gt;<i> cases that supports line/columns.
</I>&gt;<i> GtkTextBuffer can be used without GUI.
</I>Relying on a native call for a GetChar slows things down - it's better 
for us to stay on the managed side for getting the best results as a 
.NET application. Each line we have in the .NET world makes our lives 
easier.
For example I can't type with my neo2 keyboard layout in any gtk 
application on windows, on mac gtk was crashing all over the place - and 
still is crashing in many places.

&gt;&gt;<i> Furthermore developing with .NET is much more fun &amp; easier than extending a
</I>&gt;&gt;<i> C component.
</I>&gt;<i> GtkTextView is a quite complex piece of software. GtkSourceView is not
</I>&gt;<i> trivial either. So re-implementing a new text editor framework in C# was
</I>&gt;<i> probably fun, but not really easy. By using GtkSourceView, there is less
</I>&gt;<i> maintenance work for MonoDevelop.
</I>I agree that the editor is a complex piece of software - so is ours. 
Having less maintenance work is a good idea - but there were good 
reasons for us to implement our own editor control. (It wasn't my first 
editor control - I knew what I was up to)

It's even more maintenance work if we would've stuck to GtkSourceView 
because it adds a dependency for us and adds limitations to what can be 
done (like the find animations which required changes to the 
gtksourceview). We've tons of commands that are working differently on 
certain platforms (mac/windows/linux behavior is not the same) - it's 
really hard to implement all that if you give up control.

We've really many features that are hard to implement in a general 
purpose editor  - if it's not supported like our virtual indentation 
spaces. And now it's too late anyways - our text editor is now mature 
enough after 7 years of development.
(And as said - we've been using GtkSourceView before that and felt it 
was too limited for our use case at that time - 7 years ago - I think 
that the GtkSourceView has evolved a lot since then. But atm I don't 
really see any reason for switching back.

Can you give one ? (The maintainance work isn't much right now - most of 
the ongoing editor work is implementing new features or changing old ones)

&gt;&gt;<i> I give the question back:
</I>&gt;&gt;<i> Why didn't the gnome team switch to mono and not why did the mono team
</I>&gt;&gt;<i> choose mono.
</I>&gt;<i> There are millions of lines of code written in C/GObject in GNOME. Take
</I>&gt;<i> only GLib and GTK+ for example. It is not conceivable to rewrite all
</I>&gt;<i> this software in C#/.NET.
</I>It's no need to rewrite all software at once. But the Linux world lost 
14 years of development time and still sticks to C.
AFAIK the GNOME team now wants everyone to write everything in JavaScript ?
&gt;<i> C/GObject is meant to be language-binding-friendly, especially with
</I>&gt;<i> GObject introspection (automatic bindings). If GTK+ is rewritten in C#,
</I>&gt;<i> it would not be possible to use it in other high-level languages like
</I>&gt;<i> Python.
</I>There is IronPython :) - with .NET it's possible to use different 
languages as well. The language problem is just solved at a different level.
&gt;<i> And some developers enjoy writing C code. Apart from the manual memory
</I>&gt;<i> handling, it is a nice language, with a really good toolchain.
</I>That's true. But some don't enjoy writing C - or working with C based APIs.
I for myself hope to never see C again - I think it's a horrible 
language for desktop application development with a bad tool chain 
(begins with the compiler).
But opinions on languages differ - the GNOME team is aware of that :)

Regards
Mike
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016171.html">[MonoDevelop] Why MonoDevelop doesn't use GtkTextView/GtkSourceView?
</A></li>
	<LI>Next message: <A HREF="016173.html">[MonoDevelop] Why MonoDevelop doesn't use GtkTextView/GtkSourceView?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16172">[ date ]</a>
              <a href="thread.html#16172">[ thread ]</a>
              <a href="subject.html#16172">[ subject ]</a>
              <a href="author.html#16172">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-list">More information about the Monodevelop-list
mailing list</a><br>
</body></html>
