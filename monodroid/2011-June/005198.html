<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] NTLM Web Services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20NTLM%20Web%20Services&In-Reply-To=CA1DB428.9F50%25karl%40e-magesolutions.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005195.html">
   <LINK REL="Next"  HREF="005199.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] NTLM Web Services</H1>
    <B>Brian Graham</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20NTLM%20Web%20Services&In-Reply-To=CA1DB428.9F50%25karl%40e-magesolutions.com"
       TITLE="[mono-android] NTLM Web Services">brian.graham at russellmcveagh.com
       </A><BR>
    <I>Wed Jun 15 18:07:13 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005195.html">[mono-android] NTLM Web Services
</A></li>
        <LI>Next message: <A HREF="005199.html">[mono-android] NTLM Web Services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5198">[ date ]</a>
              <a href="thread.html#5198">[ thread ]</a>
              <a href="subject.html#5198">[ subject ]</a>
              <a href="author.html#5198">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Karl,

I have tried that as well before I went to the more complicated use of credential cache. It didn't work for me but if it works for you then I might have something else wrong in my set up.

Regards
Brian

From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>] On Behalf Of Karl Heinz Brehme Arredondo
Sent: Wednesday, 15 June 2011 4:02 p.m.
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>
Subject: Re: [mono-android] NTLM Web Services

Try something like that..:

NetworkCredential credential = new NetworkCredential(&quot;username&quot;, &quot;password&quot;);
TestService.Service1 ts = new TestService.Service1();
ts.Credentials = credential;
ts.PreAuthenticate = true;
identity.Text = ts.WhoAmI();

It's what I'm using on Windows Mobile, iOS and Android.

Karl

From: Brian Graham &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">brian.graham at russellmcveagh.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">brian.graham at russellmcveagh.com</A>&gt;&gt;
Reply-To: &quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&gt;&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&gt;&gt;
Date: Mon, 13 Jun 2011 08:37:37 +1200
To: &quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&gt;&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&gt;&gt;
Subject: [mono-android] NTLM Web Services

Hi all, I asked this in the forum but didn't get any replies. Not sure if it was because no one knows or if you guys didn't get the email. Sorry for the re-post if you did get it the first time.

Anyway, has anybody successfully connected to a Webservice from Mono for Android using Windows Authentication? I can connect if Anonymous is enabled but as soon as I select Windows and give the service proxy the credentials it comes back with a 401 error. This is the code:
                TestService.Service1 ts = new TestService.Service1();
                CredentialCache cache = new CredentialCache();
                cache.Add(new Uri(ts.Url), &quot;Negotiate&quot;, new NetworkCredential(&quot;username&quot;, &quot;pasword&quot;));
                 ts.Credentials = cache;
                ts.PreAuthenticate = true;
                identity.Text = ts.WhoAmI();

This code works perfectly from a Windows form test project so I know the webservice itself is ok. I'm using the emulator and have changed the URL to use the IP address of the host rather than &quot;local&quot;, I have also tried &quot;NTLM&quot; instead of &quot;Negotiate&quot;.
Thanks in advance for any help.

Regards
Brian

Russell McVeagh
OFFICIAL LAW FIRM OF RUGBY WORLD CUP 2011

Winner - ALB Awards 2011: New Zealand Deal of the Year, Australasian Debt Markets Deal of the Year.

Please think of the environment before printing this email.

________________________________________
This email contains confidential information and may be legally privileged. If you have received it in error, you may not read, use, copy or disclose this email or its attachments. In that case, please let us know immediately by reply email and then delete this email from your system. While we use standard virus checking software, we accept no responsibility for viruses or anything similar in this email or any attachment after it leaves our information systems. If you are interested in establishing more secure communication between us, please contact our systems administrator by email at <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mail.admin at russellmcveagh.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mail.admin at russellmcveagh.com</A>&gt;
_______________________________________________
Monodroid mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>&gt;

UNSUBSCRIBE INFORMATION:
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20110616/c792def8/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20110616/c792def8/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005195.html">[mono-android] NTLM Web Services
</A></li>
	<LI>Next message: <A HREF="005199.html">[mono-android] NTLM Web Services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5198">[ date ]</a>
              <a href="thread.html#5198">[ thread ]</a>
              <a href="subject.html#5198">[ subject ]</a>
              <a href="author.html#5198">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
