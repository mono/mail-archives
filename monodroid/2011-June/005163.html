<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] WebClient.DownloadFileAsync - unreliable on 3.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20WebClient.DownloadFileAsync%20-%20unreliable%20on%203.0&In-Reply-To=BANLkTinMtBcjCa6QqnFCS3SsQAabr9j0Xw%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005162.html">
   <LINK REL="Next"  HREF="005161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] WebClient.DownloadFileAsync - unreliable on 3.0</H1>
    <B>Andrew Sinclair</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20WebClient.DownloadFileAsync%20-%20unreliable%20on%203.0&In-Reply-To=BANLkTinMtBcjCa6QqnFCS3SsQAabr9j0Xw%40mail.gmail.com"
       TITLE="[mono-android] WebClient.DownloadFileAsync - unreliable on 3.0">andrew at magic5software.com
       </A><BR>
    <I>Mon Jun  6 04:35:59 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005162.html">[mono-android] WebClient.DownloadFileAsync - unreliable on 3.0
</A></li>
        <LI>Next message: <A HREF="005161.html">[mono-android] Deploying apk file in andriod phone
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5163">[ date ]</a>
              <a href="thread.html#5163">[ thread ]</a>
              <a href="subject.html#5163">[ subject ]</a>
              <a href="author.html#5163">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I&#8217;ve had similar, unpredictable crashes, all following a GC_EXPLICIT. Sometimes this in the scenario Bo&#382;o describes, other times just moving between activities in the UI, or loading largish files.

 

I&#8217;ve had mixed results with trying to control the GC. For instance within a series of StartActivityForResults I inhibited the GC from collecting activities by keeping a reference in the Application singleton &#8211; this improved things significantly but obviously isn&#8217;t the best solution with a GC-based system.

 

My feeling is that there isn&#8217;t a particular bug with, say, sockets. I think there&#8217;s a bug in the GC which occurs randomly from the application&#8217;s viewpoint.

 

It definitely gets my vote as the &#8220;number 1 thing to fix on MD or Xamarin&#8221; (although I can see that fixing activation issues is probably quite important too!)

 

Cheers,

 

Andy

 

From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>] On Behalf Of Bozo Ivkovic
Sent: 06 June 2011 08:57
To: Discussions related to Mono for Android
Subject: Re: [mono-android] WebClient.DownloadFileAsync - unreliable on 3.0

 

If you're using multithreading for UI synchronization, i.e. for displaying progressbar of download status, consider reducing the number of UI refresh events on the UI thread. We discovered that MD has occasional crashes(non catchable) if you are synchronizing UI thread in very short time intervals, while having long running working thread in background. I expirienced this not only with sockets, but with heavy database loads(sqllite). 

Rgds,
Bo&#382;o

On Mon, Jun 6, 2011 at 08:30, Nic Wise &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">nicw at fastchicken.co.nz</A>&gt; wrote:

webclient (on ios) uses sockets, and I'd assume the droid version is
the same. this usually bypasses the internal &quot;keep the WAN up&quot; stuff,
so you might need to use something else to keep it working. Maybe ping
a website with whatever the android sdk provides, and hence keep the
WAN going....




On Mon, Jun 6, 2011 at 07:27, Craig Dunn
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">craig.dunn at conceptdevelopment.net</A>&gt; wrote:
&gt;<i> I'm currently downloading 50~100Mb ZIP files in my Monodroid app.
</I>&gt;<i>
</I>&gt;<i> Using WebClient.DownloadFileAsync().
</I>&gt;<i>
</I>&gt;<i> The code works fine ~100% of the time in MonoTouch on iOS. It even worked
</I>&gt;<i> pretty reliably on an older Android device (Galaxy Tab 7&quot; with 2.2 i think),
</I>&gt;<i> although it did sometimes fail.
</I>&gt;<i>
</I>&gt;<i> BUT on a Samsung 10.1&quot; with Honeycomb (3.0) it struggles to work **1 time
</I>&gt;<i> out of 20** (or less!). The failure point varies - could be at 2% complete
</I>&gt;<i> or 90% complete or anywhere in-between. Doesn't seem to be a pattern.
</I>&gt;<i>
</I>&gt;<i> logcat tells me that whenever it fails, a GC_EXPLICIT occurs - although I've
</I>&gt;<i> no idea if this is related, since sometimes GC_EXPLICIT occurs during the
</I>&gt;<i> download but does _not_ affect it. I sometimes see TelephonyRegistry
</I>&gt;<i> radioTurnedOff messages too.
</I>&gt;<i>
</I>&gt;<i> ANY suggestions/thoughts appreciated...
</I>&gt;<i>
</I>&gt;<i> Craig
</I>&gt;<i>
</I>
&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


--
Nic Wise
t.  +44 7788 592 806 | @fastchicken | <A HREF="http://www.linkedin.com/in/nicwise">http://www.linkedin.com/in/nicwise</A>
b. <A HREF="http://www.fastchicken.co.nz/">http://www.fastchicken.co.nz/</A> | <A HREF="http://www.flickr.com/photos/nicwise">http://www.flickr.com/photos/nicwise</A>

mobileAgent (for FreeAgent): get your accounts in your pocket.
<A HREF="http://goo.gl/IuBU">http://goo.gl/IuBU</A>
Trip Wallet: Keep track of your budget on the go: <A HREF="http://goo.gl/ePhKa">http://goo.gl/ePhKa</A>
London Bike App: Find the nearest Boris Bike, and get riding! <A HREF="http://goo.gl/Icp2">http://goo.gl/Icp2</A>
_______________________________________________
Monodroid mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>

UNSUBSCRIBE INFORMATION:
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20110606/abd2aedc/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20110606/abd2aedc/attachment.html</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005162.html">[mono-android] WebClient.DownloadFileAsync - unreliable on 3.0
</A></li>
	<LI>Next message: <A HREF="005161.html">[mono-android] Deploying apk file in andriod phone
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5163">[ date ]</a>
              <a href="thread.html#5163">[ thread ]</a>
              <a href="subject.html#5163">[ subject ]</a>
              <a href="author.html#5163">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
