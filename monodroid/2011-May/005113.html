<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Know if a file already exists in the internal storage ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Know%20if%20a%20file%20already%20exists%20in%20the%20internal%0A%20storage%20%3F&In-Reply-To=1306498882743-4431703.post%40n5.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005111.html">
   <LINK REL="Next"  HREF="005114.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Know if a file already exists in the internal storage ?</H1>
    <B>Glen Hassell</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Know%20if%20a%20file%20already%20exists%20in%20the%20internal%0A%20storage%20%3F&In-Reply-To=1306498882743-4431703.post%40n5.nabble.com"
       TITLE="[mono-android] Know if a file already exists in the internal storage ?">mrhassell at gmail.com
       </A><BR>
    <I>Fri May 27 09:11:44 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005111.html">[mono-android] Know if a file already exists in the internal	storage ?
</A></li>
        <LI>Next message: <A HREF="005114.html">[mono-android] SPAM-LOW: Re: Know if a file already exists in the internal storage ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5113">[ date ]</a>
              <a href="thread.html#5113">[ thread ]</a>
              <a href="subject.html#5113">[ subject ]</a>
              <a href="author.html#5113">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> Hi David,

In the following, I demonstrate how to use the External media, for your
&quot;internal storage&quot; request, might I suggest you simply use the terminal and
type the following to find your mount points as a point of reference.

mount

That wasn't difficult now ;-) - what everybody who works with Android should
realise, the file system security comes with specific limitations. For this
reason, the external SDCard typically ALWAYS contains the following logical
directory - /android/data - so if your SDcard mount point is /mnt/sdcard/ -
your absolute path will be - /mnt/sdcard/android/data/com.your.app.name -
from here, you can extract in R+W and set files, which may require you to
mount the system in R+W mode, depending on your requirements.

<A HREF="http://developer.android.com/guide/topics/data/data-storage.html">http://developer.android.com/guide/topics/data/data-storage.html</A>

SDCard is always R+W so this is a nice place to write to and be certain your
package is extracted. From here, you know where you stand and can enumerate
from this point if you like, in preference of the Internal Storage.. you
should be aware of that by default, files saved to the internal storage are
private to your application and other applications cannot access them (nor
can the user). When the user uninstalls your application, these files are
removed.

To create and write a private file to the internal storage:

   1. Call openFileOutput()&lt;<A HREF="http://developer.android.com/reference/android/content/Context.html#openFileOutput(java.lang.String,">http://developer.android.com/reference/android/content/Context.html#openFileOutput(java.lang.String,</A>
   int)&gt; with the name of the file and the operating mode. This returns a
   FileOutputStream&lt;<A HREF="http://developer.android.com/reference/java/io/FileOutputStream.html">http://developer.android.com/reference/java/io/FileOutputStream.html</A>&gt;
   .
   2. Write to the file with
write()&lt;<A HREF="http://developer.android.com/reference/java/io/FileOutputStream.html#write(byte[]">http://developer.android.com/reference/java/io/FileOutputStream.html#write(byte[]</A>)&gt;
   .
   3. Close the stream with
close()&lt;<A HREF="http://developer.android.com/reference/java/io/FileOutputStream.html#close(">http://developer.android.com/reference/java/io/FileOutputStream.html#close(</A>)&gt;
   .

For example:

String FILENAME = &quot;hello_file&quot;;
String string = &quot;hello world!&quot;;

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close();


As I was saying, you may find in many cases the requirement for External
storage. Here I present to you something that I have used in commercial
applications with brevity for omitted methods, I am certain that this will
suffice to suit your purpose in Android 1.6 to 2.3.4.

Enjoy!

private void extractInstaller() throws IOException {

// Path to write to

String path = Environment.getExternalStorageDirectory()

.getAbsolutePath() + &quot;/Android/data/com.your.app.media/&quot;;

// Current state of the external media

String extState = Environment.getExternalStorageState();

// External media must be written onto

if (extState.equals(Environment.MEDIA_MOUNTED)) {

try { // Ensure path exists

boolean exists = (new File(path)).exists();

if (!exists) {

new File(path).mkdirs();

}

InputStream data = getResources().getAssets().open(&quot;installer&quot;);

/** EXTRACTION METHOD **/

writeInstaller(path, data);

/** EXTRACTION METHOD **/

} catch (Exception ioe) {

ioe.printStackTrace();

}

} else {

Log.e(getPackageName(), &quot;not mounted?&quot;);

}

}

Best Regards,
Glen


On Fri, May 27, 2011 at 10:21 PM, david.chhang &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">david.chhang at gmail.com</A>&gt;wrote:

&gt;<i> Isn't it the path for an external storage ? Here, I want to know the path
</I>&gt;<i> for
</I>&gt;<i> the files in the internal storage.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://mono-for-android.1047100.n5.nabble.com/Know-if-a-file-already-exists-in-the-internal-storage-tp4428476p4431703.html">http://mono-for-android.1047100.n5.nabble.com/Know-if-a-file-already-exists-in-the-internal-storage-tp4428476p4431703.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>


-- 
Glen Hassell
Inner Technique
<A HREF="http://innertech.com.au/">http://innertech.com.au/</A>
Office: 03 9687 0006
Mobile: +61 (0) 438 340 385
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20110527/63a6b627/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20110527/63a6b627/attachment.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005111.html">[mono-android] Know if a file already exists in the internal	storage ?
</A></li>
	<LI>Next message: <A HREF="005114.html">[mono-android] SPAM-LOW: Re: Know if a file already exists in the internal storage ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5113">[ date ]</a>
              <a href="thread.html#5113">[ thread ]</a>
              <a href="subject.html#5113">[ subject ]</a>
              <a href="author.html#5113">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
