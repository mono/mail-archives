<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Matrix transformation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Matrix%20transformation&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004789.html">
   <LINK REL="Next"  HREF="004664.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Matrix transformation</H1>
    <B>Narc&#237;s Calvet</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Matrix%20transformation&In-Reply-To="
       TITLE="[mono-android] Matrix transformation">narcis at steema.com
       </A><BR>
    <I>Wed May  4 05:00:46 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004789.html">[mono-android] SqliteDataAdapter.Fill problem
</A></li>
        <LI>Next message: <A HREF="004664.html">[mono-android] How to set CSS in WebView HTML text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4663">[ date ]</a>
              <a href="thread.html#4663">[ thread ]</a>
              <a href="subject.html#4663">[ subject ]</a>
              <a href="author.html#4663">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

 

I think I have found some inconsistency between WinForms behavior and Mono
for Android when performing matrix transformations. In my real world example
the rotation seems to offset elements along the vertical axis relative to
the WinForm rotation. I have arranged a simple example below in WinForms and
Mono for Android. Do you think results below reflect this inconsistency?

 

This is the WinForms example:

 

        System.Drawing.Drawing2D.Matrix matrix = new
System.Drawing.Drawing2D.Matrix();

        matrix.RotateAt(45, new System.Drawing.PointF(100, 100));

 

        foreach (float f in matrix.Elements)

        {

          listBox1.Items.Add(f);

        }

 

Text in listbox1 is:

 

0.707106769

0.7071067

-0.7071067

0.707106769

99.999999

-41.42135

 

In Monodroid I converted the code above to:

 

    protected override void OnDraw(Canvas canvas)

    {

      base.OnDraw(canvas);

 

      Paint pen = new Paint(PaintFlags.AntiAlias);

      pen.Color = Color.Red;

      pen.StrokeWidth = 1;

 

      Android.Graphics.Matrix matrix = new Android.Graphics.Matrix();

      matrix.SetRotate(45, 100, 100);

      canvas.Rotate(45, 100, 100);

 

      float[] values = new float[9];

      matrix.GetValues(values);

 

      for (int i = 0; i &lt; values.Length; i++)

      {

        canvas.DrawText(values[i].ToString(), 100, 20 * i, pen);

      }

    }

 

Which gives this matrix: 

 

-0.7071068

100

0.7071068

0.7071068

-41.42136

0

0

1

 

 

Thanks in advance,

Narc&#237;s Calvet

Steema Software

<A HREF="http://www.steema.com">http://www.steema.com</A> &lt;<A HREF="http://www.steema.com/">http://www.steema.com/</A>&gt; 

<A HREF="http://twitter.com/SteemaSoftware">http://twitter.com/SteemaSoftware</A>

<A HREF="https://www.facebook.com/SteemaSoftware">https://www.facebook.com/SteemaSoftware</A>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20110504/b8e4fbfd/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20110504/b8e4fbfd/attachment.html</A> 
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004789.html">[mono-android] SqliteDataAdapter.Fill problem
</A></li>
	<LI>Next message: <A HREF="004664.html">[mono-android] How to set CSS in WebView HTML text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4663">[ date ]</a>
              <a href="thread.html#4663">[ thread ]</a>
              <a href="subject.html#4663">[ subject ]</a>
              <a href="author.html#4663">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
