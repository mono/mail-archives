<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Video in Expansion Pack
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Video%20in%20Expansion%20Pack&In-Reply-To=%3CCAFe9JKJFWbgyAM6BHEC3HOXNPpCDu69x9pE7bmor1Gha9n82xg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013741.html">
   <LINK REL="Next"  HREF="013747.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Video in Expansion Pack</H1>
    <B>Francesco Colombo</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Video%20in%20Expansion%20Pack&In-Reply-To=%3CCAFe9JKJFWbgyAM6BHEC3HOXNPpCDu69x9pE7bmor1Gha9n82xg%40mail.gmail.com%3E"
       TITLE="[mono-android] Video in Expansion Pack">francesco.colombo at gmail.com
       </A><BR>
    <I>Mon May 13 13:02:57 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="013741.html">[mono-android] Video in Expansion Pack
</A></li>
        <LI>Next message: <A HREF="013747.html">[mono-android] Android GL preserve question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13745">[ date ]</a>
              <a href="thread.html#13745">[ thread ]</a>
              <a href="subject.html#13745">[ subject ]</a>
              <a href="author.html#13745">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've found a solution to this. I'll post here just in case anyone is
interested

Using the APK Expansion Pack library porting for Xamarin.Android you get
the relative ZipEntry of a file into the .obb package. Then you create an
AssetFileDescriptor using a ParcelFileDescriptor.
In this way you can stream the video inside the .zip file without
extracting it somewhere (temp file). Remember to create your zip file with
no compression for the .mp4 files

             var expansion = ApkExpansionSupport.GetApkExpansionZipFile(this
, 1, 1);
            var entry = expansion.GetEntry(&quot;videos/myvideo.mp4&quot;);

            var pfd = ParcelFileDescriptor.Open(new Java.IO.File(sourcePath)
, ParcelFileMode.ReadOnly);
            var fd = new AssetFileDescriptor(pfd, entry.FileOffset, entry.
FileSize);


On Sat, May 11, 2013 at 4:18 PM, Francesco Colombo &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">francesco.colombo at gmail.com</A>&gt; wrote:

&gt;<i> Hi to all,
</I>&gt;<i>
</I>&gt;<i> In my app I need to play a video file (.mp4) The source file is stored
</I>&gt;<i> inside an Android Expansion Packs files (.obb). How can I read it ?
</I>&gt;<i>
</I>&gt;<i> An example done in Android
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://stackoverflow.com/questions/11300137/playing-sound-files-from-expansion-file">http://stackoverflow.com/questions/11300137/playing-sound-files-from-expansion-file</A>
</I>&gt;<i>
</I>&gt;<i> What I'm missing is how to get the FileDescriptor instance from the
</I>&gt;<i> expansion file.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20130513/ae6833ad/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20130513/ae6833ad/attachment.html</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013741.html">[mono-android] Video in Expansion Pack
</A></li>
	<LI>Next message: <A HREF="013747.html">[mono-android] Android GL preserve question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13745">[ date ]</a>
              <a href="thread.html#13745">[ thread ]</a>
              <a href="subject.html#13745">[ subject ]</a>
              <a href="author.html#13745">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
