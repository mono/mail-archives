<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Problem with binding of Google analytics tracker	library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Problem%20with%20binding%20of%20Google%20analytics%20tracker%0A%09library&In-Reply-To=%3C417D99EA-A580-466E-BD2E-05C920EF8BF4%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010666.html">
   <LINK REL="Next"  HREF="010690.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Problem with binding of Google analytics tracker	library</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Problem%20with%20binding%20of%20Google%20analytics%20tracker%0A%09library&In-Reply-To=%3C417D99EA-A580-466E-BD2E-05C920EF8BF4%40xamarin.com%3E"
       TITLE="[mono-android] Problem with binding of Google analytics tracker	library">jonp at xamarin.com
       </A><BR>
    <I>Wed Jun  6 17:58:36 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010666.html">[mono-android] Problem with binding of Google analytics	tracker	library
</A></li>
        <LI>Next message: <A HREF="010690.html">[mono-android] Problem with binding of Google analytics	tracker	library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10676">[ date ]</a>
              <a href="thread.html#10676">[ thread ]</a>
              <a href="subject.html#10676">[ subject ]</a>
              <a href="author.html#10676">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jun 6, 2012, at 11:03 AM, Petr Slov&#225;&#269;ek wrote:
&gt;<i> This is what I get in application output window each time it tries to send the data:
</I>
Less useful than I hoped. HttpResponseParser.parseHead():

	<A HREF="https://github.com/android/platform_external_apache-http/blob/master/src/org/apache/http/impl/io/HttpResponseParser.java#L73">https://github.com/android/platform_external_apache-http/blob/master/src/org/apache/http/impl/io/HttpResponseParser.java#L73</A>

`sesionBuffer` is a SessionInputBuffer (interface), of unknown runtime type, and `sessionBuffer.readLine()` returned -1, causing the exception. Grepping libGoogleAnalytics.jar, I see no implementations of SessionInputBuffer, so I'll assume it's a AbstractSessionInputBuffer:

	<A HREF="https://github.com/android/platform_external_apache-http/blob/master/src/org/apache/http/impl/io/AbstractSessionInputBuffer.java#L164">https://github.com/android/platform_external_apache-http/blob/master/src/org/apache/http/impl/io/AbstractSessionInputBuffer.java#L164</A>

This assumption may very well be wrong, but if it's right, the only way for readLine() to return -1 is for this.linebuffer.length() to be -1 (lineFromLinebuffer()), or for fillBuffer() to return -1, which could happen if the wrapped InputStream.read() returns end-of-stream.

Either way, I'm not sure why that would be happening, not if your app has the INTERNET permission (which iirc you said that your app had). Could you confirm that your app has INTERNET permission, e.g. by trying to use WebClient against a url?

&gt;<i> I had to add empty IDispatcherCallbacks interface to Additions folder of my java binding library project otherwise it refused to compile.
</I>
I'm guessing that this is due to #5143:

	<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=5143">https://bugzilla.xamarin.com/show_bug.cgi?id=5143</A>

 - Jon

</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010666.html">[mono-android] Problem with binding of Google analytics	tracker	library
</A></li>
	<LI>Next message: <A HREF="010690.html">[mono-android] Problem with binding of Google analytics	tracker	library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10676">[ date ]</a>
              <a href="thread.html#10676">[ thread ]</a>
              <a href="subject.html#10676">[ subject ]</a>
              <a href="author.html#10676">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
