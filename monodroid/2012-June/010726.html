<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] The GenerateJavaStubs task failed unexpectedly.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20The%20GenerateJavaStubs%20task%20failed%20unexpectedly.&In-Reply-To=%3C4FD0FB6E.4070404%40veritas-vos-liberabit.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010693.html">
   <LINK REL="Next"  HREF="010758.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] The GenerateJavaStubs task failed unexpectedly.</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20The%20GenerateJavaStubs%20task%20failed%20unexpectedly.&In-Reply-To=%3C4FD0FB6E.4070404%40veritas-vos-liberabit.com%3E"
       TITLE="[mono-android] The GenerateJavaStubs task failed unexpectedly.">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Thu Jun  7 19:05:18 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010693.html">[mono-android] The GenerateJavaStubs task failed unexpectedly.
</A></li>
        <LI>Next message: <A HREF="010758.html">[mono-android] The GenerateJavaStubs task failed unexpectedly.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10726">[ date ]</a>
              <a href="thread.html#10726">[ thread ]</a>
              <a href="subject.html#10726">[ subject ]</a>
              <a href="author.html#10726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Could you please try this: we have an example for WebView Javascript 
interface in our &quot;monodroid-samples&quot; module
<A HREF="https://github.com/xamarin/monodroid-samples">https://github.com/xamarin/monodroid-samples</A>

There is &quot;WebViewJavaScriptInterface&quot; example which is exactly for what 
you are trying to do:
<A HREF="https://github.com/xamarin/monodroid-samples/tree/master/WebViewJavaScriptInterface">https://github.com/xamarin/monodroid-samples/tree/master/WebViewJavaScriptInterface</A>

If this sample builds and works fine, then there is something wrong with 
your project file or whatever, not setup. Yet, it could be still our bug 
in creating new project files, so in that case it would be nice if you 
can file a bug with your reproducible project.
If it results in the same error, it might be platform dependent (I 
verified this on Windows7/64bit + VS2010) or some broken setup for the 
related assembly or build tools. We would like to know what was your 
dev. environment.

Thanks,
Atsushi Eno

On 2012/06/07 15:16, Terry151151 wrote:
&gt;<i> I'm trying to create a JavaScript interface for use with a WebView.
</I>&gt;<i> I created the class below and used it as shown. I have also added a
</I>&gt;<i> reference to Mono.Android.Export to the project.
</I>&gt;<i>
</I>&gt;<i> When I compile I get the error Shown further below.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> using Java.Interop;
</I>&gt;<i> namespace Common
</I>&gt;<i> {
</I>&gt;<i> 	public class JavaScriptInterface : Java.Lang.Object
</I>&gt;<i> 	{
</I>&gt;<i> 		[Export]
</I>&gt;<i> 		public void Test()
</I>&gt;<i> 		{
</I>&gt;<i> 		}
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> _webView.AddJavascriptInterface( new JavaScriptInterface(), &quot;Device&quot; );
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Error	1	The &quot;GenerateJavaStubs&quot; task failed unexpectedly.
</I>&gt;<i> System.ApplicationException: Failed to create JavaTypeInfo for class:
</I>&gt;<i> Common.JavaInterface ---&gt;  System.InvalidOperationException: You need to add
</I>&gt;<i> a reference to Mono.Android.Export.dll when you use ExportAttribute or
</I>&gt;<i> ExportFieldAttribute.
</I>&gt;<i>     at Xamarin.Android.Tasks.Generator.CreateJavaSources(List`1 javaTypes,
</I>&gt;<i> String outputPath, Boolean useSharedRuntime, Boolean hasExportReference)
</I>&gt;<i>     --- End of inner exception stack trace ---
</I>&gt;<i>     at Xamarin.Android.Tasks.Generator.CreateJavaSources(List`1 javaTypes,
</I>&gt;<i> String outputPath, Boolean useSharedRuntime, Boolean hasExportReference)
</I>&gt;<i>     at Xamarin.Android.Tasks.GenerateJavaStubs.Execute()
</I>&gt;<i>     at
</I>&gt;<i> Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()
</I>&gt;<i>     at
</I>&gt;<i> Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost
</I>&gt;<i> taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost,
</I>&gt;<i> ItemBucket bucket, TaskExecutionMode howToExecuteTask, Boolean&amp;  taskResult)
</I>&gt;<i> PeerlessRepSalesV2
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/The-GenerateJavaStubs-task-failed-unexpectedly-tp5710209.html">http://mono-for-android.1047100.n5.nabble.com/The-GenerateJavaStubs-task-failed-unexpectedly-tp5710209.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010693.html">[mono-android] The GenerateJavaStubs task failed unexpectedly.
</A></li>
	<LI>Next message: <A HREF="010758.html">[mono-android] The GenerateJavaStubs task failed unexpectedly.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10726">[ date ]</a>
              <a href="thread.html#10726">[ thread ]</a>
              <a href="subject.html#10726">[ subject ]</a>
              <a href="author.html#10726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
