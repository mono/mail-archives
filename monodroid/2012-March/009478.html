<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] misunderstanding scope of Finish()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20misunderstanding%20scope%20of%20Finish%28%29&In-Reply-To=%3C00d701cd0b3b%246ed4d3b0%244c7e7b10%24%40gb.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009477.html">
   <LINK REL="Next"  HREF="009493.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] misunderstanding scope of Finish()</H1>
    <B>John Murray</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20misunderstanding%20scope%20of%20Finish%28%29&In-Reply-To=%3C00d701cd0b3b%246ed4d3b0%244c7e7b10%24%40gb.com%3E"
       TITLE="[mono-android] misunderstanding scope of Finish()">john at murray.gb.com
       </A><BR>
    <I>Mon Mar 26 10:30:14 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009477.html">[mono-android] Rendering Text OpenTK.
</A></li>
        <LI>Next message: <A HREF="009493.html">[mono-android] misunderstanding scope of Finish()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9478">[ date ]</a>
              <a href="thread.html#9478">[ thread ]</a>
              <a href="subject.html#9478">[ subject ]</a>
              <a href="author.html#9478">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is certainly due to my limited grasp of scopes and stuff but of some
kind soul could just give me a few pointers I'd be off and running again -
as it is I'm in brick wall mode

 

I have an activity called back up 

Just presents a few buttons for different actions 

I wanted to integrate it into the rest of the app which has a left and right
swipe on it using a tabhost - as this is a separate activity called from a
button I am running into problems as to what's in scope or not 

 

So a rough outline of the code is below - what I want is for the right to
left swipe to 'Finish()' the activity - the gesture listener is working nice
and is detecting a right to left swipe-  it's just how do I get the action I
want properly referenced at this point

As you can see I have tried  various ruses - the only one which works is
passing the context to the gesture detect then goin 

Cntxt.Dispose() - this is horrid - screen goes blank for a second and
mercifully it return to the previous activity but it seems to me like
setting fire to the shop at the end of the working day rather than just
closing it and locking the door - I'm sure it offers memory leaks 

There is a button on the main screen (not shown in code below) which calls
Finish() which exits gracefully but Finish() as a method is not in scope in
the gesture detector 

How do I do this - seems I must pass a reference to the activity to the
gesturelistener  but I cant figure how I do that  -  I guess its blindingly
obvious but I really am brain dead on this one  - help please anyone

John M

 

  [Activity(Label = &quot;Backup&quot;)]

    public class backup : Activity

    {

        public bool res;

        public GestureDetector gestureScannerB;

        public  GestureListenerB gestureListenerB;

 

        protected override void OnCreate(Bundle bundle)

        {

            base.OnCreate(bundle);

            SetContentView(Resource.Layout.backup);

 

///////////////   do stuff 

}

 

    public override bool OnTouchEvent(MotionEvent e)

        {

             return gestureScannerB.OnTouchEvent(e);

       }

 

 

    public class GestureListenerB : Java.Lang.Object,
GestureDetector.IOnGestureListener

        {

            private Context cntxt;

            private static int SWIPE_MAX_OFF_PATH = 270;

            private static int SWIPE_MIN_DISTANCE = 80;

            private static int SWIPE_THRESHOLD_VELOCITY = 70;

 

            public GestureListenerB(Context Cntxt)

            {

                 this.cntxt = Cntxt;

            }

 

            public bool OnDown(MotionEvent e)

            {

                return true;

            }

 

            public bool OnFling(MotionEvent e1, MotionEvent e2, float
velocityX, float velocityY)

            {

                try

                {

                    if (System.Math.Abs(e1.GetY() - e2.GetY()) &gt;
SWIPE_MAX_OFF_PATH)

                    { return false;}

                    // right to left swipe

                    if (e1.GetX() - e2.GetX() &gt; SWIPE_MIN_DISTANCE &amp;&amp;
System.Math.Abs(velocityX) &gt; SWIPE_THRESHOLD_VELOCITY)

                    {

 

                      //      Toast.MakeText(cntxt, &quot;no further pages&quot;,
ToastLength.Short).Show();                        

                       // backup.endthis();   //enthis not in scope 

                       // endthis(backup);     // created a method in backup
class which did Finish but cant pass 'backup' 

                     

 cntxt.Dispose();    // this works but seems messy 

                        

                    }

                    else if (e2.GetX() - e1.GetX() &gt; SWIPE_MIN_DISTANCE &amp;&amp;
System.Math.Abs(velocityX) &gt; SWIPE_THRESHOLD_VELOCITY)

                    { 

                     //   swiperight = true;


                    }

                }

                catch (System.Exception e)

                {

                    // nothing

                }

                return false;

            }

 

 

            public void OnLongPress(MotionEvent e)

            {

            }

 

            public bool OnScroll(MotionEvent e1, MotionEvent e2, float
distanceX, float distanceY)

            {

                return true;

            }

 

            public void OnShowPress(MotionEvent e)

            {

            }

 

            public bool OnSingleTapUp(MotionEvent e)

            {

                return true;

            }

        }

 

       

 

    }

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120326/269ab164/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120326/269ab164/attachment-0001.html</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009477.html">[mono-android] Rendering Text OpenTK.
</A></li>
	<LI>Next message: <A HREF="009493.html">[mono-android] misunderstanding scope of Finish()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9478">[ date ]</a>
              <a href="thread.html#9478">[ thread ]</a>
              <a href="subject.html#9478">[ subject ]</a>
              <a href="author.html#9478">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
