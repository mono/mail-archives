<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Contact woes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Contact%20woes&In-Reply-To=%3CCAAjfQHtk4oLKTRgD_WsAs20Tjcfv7vYRHHyDXezrKtMqSp5iHg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011487.html">
   <LINK REL="Next"  HREF="011477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Contact woes</H1>
    <B>Eric Maupin</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Contact%20woes&In-Reply-To=%3CCAAjfQHtk4oLKTRgD_WsAs20Tjcfv7vYRHHyDXezrKtMqSp5iHg%40mail.gmail.com%3E"
       TITLE="[mono-android] Contact woes">eric.maupin at xamarin.com
       </A><BR>
    <I>Thu Jul 26 14:46:41 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011487.html">[mono-android] Contact woes
</A></li>
        <LI>Next message: <A HREF="011477.html">[mono-android] Can't create handler inside thread....sync problem,	why?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11511">[ date ]</a>
              <a href="thread.html#11511">[ thread ]</a>
              <a href="subject.html#11511">[ subject ]</a>
              <a href="author.html#11511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Stephan,

On Android, there are two types of contact ID: the individual contact ID,
and the lookup key. Android gives you the option of looking at aggregated
contacts (that is, merged contact details from multiple accounts), or
individual contacts. The ID that you are using in your original example is
the individual ID, but you have PreferContactAggregation set to true, which
(as per the docs:
<A HREF="http://betaapi.xamarin.com/?link=M%3aXamarin.Contacts.AddressBook.Load(System.String">http://betaapi.xamarin.com/?link=M%3aXamarin.Contacts.AddressBook.Load(System.String</A>)
),
means that the ID you're passing should be a lookup key (which is what
you're retrieving in your second example). Your original example will work
if  PreferContactAggregation is false, or your second example is just as
valid if you'd rather look at aggregates.

Hope that helps.

On Tue, Jul 24, 2012 at 4:07 AM, Stephan Steiner
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">stephan.steiner at gmail.com</A>&gt;wrote:

&gt;<i> Yup it does - found that out during debugging (the app would initially just
</I>&gt;<i> crash).
</I>&gt;<i> In fact I managed to reverse engineer the issue - I just went searching for
</I>&gt;<i> a given email over the entire address book, then searched for it using the
</I>&gt;<i> traditional approach, and compared ids.
</I>&gt;<i>
</I>&gt;<i> While data.Data.LastPathSegment is the proper id for executing
</I>&gt;<i> ManagedQuery,
</I>&gt;<i> it is wrong for the Xamarin.Mobile API (at least in the Android version /
</I>&gt;<i> Phone model I'm using - Galaxy S3 running on 4.0.4).
</I>&gt;<i>
</I>&gt;<i> When I set id as follows, it works:
</I>&gt;<i>
</I>&gt;<i>                 string[] pathElements = data.Data.EncodedPath.Split(new
</I>&gt;<i> char[] { '/' });
</I>&gt;<i>                 id = pathElements[pathElements.Length - 2];
</I>&gt;<i>
</I>&gt;<i> I haven't tested on the emulator yet (no contacts available and I'm too
</I>&gt;<i> lazy
</I>&gt;<i> to type them up - plus even the x86 emulator is slower than the S3) and my
</I>&gt;<i> Galaxy Nexus is on 4.1 so I'm still waiting for an adapted MonoDroid - so
</I>&gt;<i> the S3 is all I have for now.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://mono-for-android.1047100.n5.nabble.com/Contact-woes-tp5710996p5711009.html">http://mono-for-android.1047100.n5.nabble.com/Contact-woes-tp5710996p5711009.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120726/75213708/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120726/75213708/attachment.html</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011487.html">[mono-android] Contact woes
</A></li>
	<LI>Next message: <A HREF="011477.html">[mono-android] Can't create handler inside thread....sync problem,	why?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11511">[ date ]</a>
              <a href="thread.html#11511">[ thread ]</a>
              <a href="subject.html#11511">[ subject ]</a>
              <a href="author.html#11511">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
