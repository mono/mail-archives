<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] JAR Binding Problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20JAR%20Binding%20Problem&In-Reply-To=%3C4FFA79CC.5000001%40veritas-vos-liberabit.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011253.html">
   <LINK REL="Next"  HREF="011256.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] JAR Binding Problem</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20JAR%20Binding%20Problem&In-Reply-To=%3C4FFA79CC.5000001%40veritas-vos-liberabit.com%3E"
       TITLE="[mono-android] JAR Binding Problem">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Mon Jul  9 06:27:24 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011253.html">[mono-android] JAR Binding Problem
</A></li>
        <LI>Next message: <A HREF="011256.html">[mono-android] JAR Binding Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11255">[ date ]</a>
              <a href="thread.html#11255">[ thread ]</a>
              <a href="subject.html#11255">[ subject ]</a>
              <a href="author.html#11255">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

craig wrote:
&gt;<i> I'm trying to bind this class (follow link below):
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://codeviewer.org/view/code:27cb">http://codeviewer.org/view/code:27cb</A> Click here to view code
</I>
I don't think you would like to &quot;bind&quot; the ActionBarSherlock's 
&quot;internal&quot; stuff, which is not supposed to be touched by users. This is 
my Metadata.xml when I try to bind it:

&lt;metadata&gt;
   &lt;remove-node path=&quot;/api/package[starts-with(@name, 
'com.actionbarsherlock.internal')]&quot; /&gt;
&lt;/metadata&gt;

But anyways ActionBarSherlock binding won't work as expected, due to 
this Android Library project binding issue regarding R class:
<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=5617">https://bugzilla.xamarin.com/show_bug.cgi?id=5617</A>

I'm fixing this issue, but it isn't fixable in very few days.

(There's another non-blocking issue regarding 9-patch images which can 
be workarounded by running build twice so far.)

In case you really need to bind that package, I'll explain some 
internals of this sausage...

But in short: use 4.2.4 from alpha/beta channel which has a fix.

&gt;<i> The important thing to note is that the class contains a method called
</I>&gt;<i> setEnabled.
</I>&gt;<i>
</I>&gt;<i> However when I build the JAR binding project this method is not included in
</I>&gt;<i> the api.xml that is generated and it is causing an error in the generated C#
</I>&gt;<i> code since this method is missing.
</I>Usually api.xml does not describe overriden methods in many cases. It is 
because, the XML format is almost the same as AOSP (open source Android) 
provided as API definition, which omitted those overrides.

When the generator binds a class, it tries to fill &quot;missing&quot; methods 
from the class' implementing interfaces (unlike Java we need explicit 
methods existence, so we fill them apart from api.xml class 
description). There, the definitions are taken from the interface's 
definition, so if a method comes from the interface and you want to make 
changes to it, then it is the interface's definition which needs to be 
modified.

But where is &quot;android.view.View.OnClickListener&quot; in the api.xml ... ?

The key is: the binding generator input is *not* only the &quot;api.xml&quot;. The 
referenced *.dlls are also used. In this case, Mono.Android.dll. The 
generator extracts the API definition from the dll, and use it as if 
there were another api.xml to retrieve required information.

At this point, you might have noticed: there is no way to make changes 
to this assembly-based API definition. You have to deal with it.

But this &quot;params&quot; name is wrong. This is a bug in generator. I noticed 
there is some overlook for mangling the names when they come from 
assemblies (not XML) a couple of days ago and the fix is in 4.2.4 beta 
(but not stable, or 4.2.3; you got a moment in time to catch my bug! ;-)

Hence, please use alpha/beta channel version to get around this issue. 
But let me rephrase, I don't think you need the entire package. Just 
remove them. And it doesn't work right now anyways...

Atsushi Eno

&gt;<i> Below is the output from api.xml that pertains to this class.  Any ideas why
</I>&gt;<i> the method is missing from api.xml?  Is this a bug in mono for android or is
</I>&gt;<i> there something I can do in the transform file to fix it?  Thanks.
</I>&gt;<i>
</I>&gt;<i> &lt;class abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot;
</I>&gt;<i> extends=&quot;android.widget.LinearLayout&quot;
</I>&gt;<i> extends-generic-aware=&quot;android.widget.LinearLayout&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;ActionMenuItemView&quot; static=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;implements name=&quot;android.view.View.OnClickListener&quot;
</I>&gt;<i> name-generic-aware=&quot;android.view.View.OnClickListener&quot;&gt;
</I>&gt;<i> &lt;/implements&gt;
</I>&gt;<i> &lt;implements name=&quot;android.view.View.OnLongClickListener&quot;
</I>&gt;<i> name-generic-aware=&quot;android.view.View.OnLongClickListener&quot;&gt;
</I>&gt;<i> &lt;/implements&gt;
</I>&gt;<i> &lt;implements
</I>&gt;<i> name=&quot;com.actionbarsherlock.internal.view.View_HasStateListenerSupport&quot;
</I>&gt;<i> name-generic-aware=&quot;com.actionbarsherlock.internal.view.View_HasStateListenerSupport&quot;&gt;
</I>&gt;<i> &lt;/implements&gt;
</I>&gt;<i> &lt;implements
</I>&gt;<i> name=&quot;com.actionbarsherlock.internal.view.menu.ActionMenuView.ActionMenuChildView&quot;
</I>&gt;<i> name-generic-aware=&quot;com.actionbarsherlock.internal.view.menu.ActionMenuView.ActionMenuChildView&quot;&gt;
</I>&gt;<i> &lt;/implements&gt;
</I>&gt;<i> &lt;implements
</I>&gt;<i> name=&quot;com.actionbarsherlock.internal.view.menu.MenuView.ItemView&quot;
</I>&gt;<i> name-generic-aware=&quot;com.actionbarsherlock.internal.view.menu.MenuView.ItemView&quot;&gt;
</I>&gt;<i> &lt;/implements&gt;
</I>&gt;<i> &lt;constructor deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;ActionMenuItemView&quot; static=&quot;false&quot;
</I>&gt;<i> type=&quot;com.actionbarsherlock.internal.view.menu.ActionMenuItemView&quot;
</I>&gt;<i> visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;android.content.Context&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/constructor&gt;
</I>&gt;<i> &lt;constructor deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;ActionMenuItemView&quot; static=&quot;false&quot;
</I>&gt;<i> type=&quot;com.actionbarsherlock.internal.view.menu.ActionMenuItemView&quot;
</I>&gt;<i> visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;android.content.Context&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;parameter name=&quot;p1&quot; type=&quot;android.util.AttributeSet&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;parameter name=&quot;p2&quot; type=&quot;int&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/constructor&gt;
</I>&gt;<i> &lt;constructor deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;ActionMenuItemView&quot; static=&quot;false&quot;
</I>&gt;<i> type=&quot;com.actionbarsherlock.internal.view.menu.ActionMenuItemView&quot;
</I>&gt;<i> visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;android.content.Context&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;parameter name=&quot;p1&quot; type=&quot;android.util.AttributeSet&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/constructor&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;addOnAttachStateChangeListener&quot; native=&quot;false&quot; return=&quot;void&quot;
</I>&gt;<i> static=&quot;false&quot; synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot;
</I>&gt;<i> type=&quot;com.actionbarsherlock.internal.view.View_OnAttachStateChangeListener&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;dispatchHoverEvent&quot; native=&quot;false&quot; return=&quot;boolean&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;android.view.MotionEvent&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;getItemData&quot; native=&quot;false&quot;
</I>&gt;<i> return=&quot;com.actionbarsherlock.internal.view.menu.MenuItemImpl&quot;
</I>&gt;<i> static=&quot;false&quot; synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;hasText&quot; native=&quot;false&quot; return=&quot;boolean&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;initialize&quot; native=&quot;false&quot; return=&quot;void&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot;
</I>&gt;<i> type=&quot;com.actionbarsherlock.internal.view.menu.MenuItemImpl&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;parameter name=&quot;p1&quot; type=&quot;int&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;needsDividerAfter&quot; native=&quot;false&quot; return=&quot;boolean&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;needsDividerBefore&quot; native=&quot;false&quot; return=&quot;boolean&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;onClick&quot; native=&quot;false&quot; return=&quot;void&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;android.view.View&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;onFinishInflate&quot; native=&quot;false&quot; return=&quot;void&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;onLongClick&quot; native=&quot;false&quot; return=&quot;boolean&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;android.view.View&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;prefersCondensedTitle&quot; native=&quot;false&quot; return=&quot;boolean&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;removeOnAttachStateChangeListener&quot; native=&quot;false&quot; return=&quot;void&quot;
</I>&gt;<i> static=&quot;false&quot; synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot;
</I>&gt;<i> type=&quot;com.actionbarsherlock.internal.view.View_OnAttachStateChangeListener&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;setCheckable&quot; native=&quot;false&quot; return=&quot;void&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;boolean&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;setChecked&quot; native=&quot;false&quot; return=&quot;void&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;boolean&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;setExpandedFormat&quot; native=&quot;false&quot; return=&quot;void&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;boolean&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;setIcon&quot; native=&quot;false&quot; return=&quot;void&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;android.graphics.drawable.Drawable&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;setItemInvoker&quot; native=&quot;false&quot; return=&quot;void&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot;
</I>&gt;<i> type=&quot;com.actionbarsherlock.internal.view.menu.MenuBuilder.ItemInvoker&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;setShortcut&quot; native=&quot;false&quot; return=&quot;void&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;boolean&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;parameter name=&quot;p1&quot; type=&quot;char&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;setTitle&quot; native=&quot;false&quot; return=&quot;void&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;parameter name=&quot;p0&quot; type=&quot;java.lang.CharSequence&quot;&gt;
</I>&gt;<i> &lt;/parameter&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;method abstract=&quot;false&quot; deprecated=&quot;not deprecated&quot; final=&quot;false&quot;
</I>&gt;<i> name=&quot;showsIcon&quot; native=&quot;false&quot; return=&quot;boolean&quot; static=&quot;false&quot;
</I>&gt;<i> synchronized=&quot;false&quot; visibility=&quot;public&quot;&gt;
</I>&gt;<i> &lt;/method&gt;
</I>&gt;<i> &lt;/class&gt;
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/JAR-Binding-Problem-tp5710768.html">http://mono-for-android.1047100.n5.nabble.com/JAR-Binding-Problem-tp5710768.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011253.html">[mono-android] JAR Binding Problem
</A></li>
	<LI>Next message: <A HREF="011256.html">[mono-android] JAR Binding Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11255">[ date ]</a>
              <a href="thread.html#11255">[ thread ]</a>
              <a href="subject.html#11255">[ subject ]</a>
              <a href="author.html#11255">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
