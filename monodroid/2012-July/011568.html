<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] How to handle garbage collection?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20How%20to%20handle%20garbage%20collection%3F&In-Reply-To=%3C50182221.3000204%40eqqon.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011567.html">
   <LINK REL="Next"  HREF="011572.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] How to handle garbage collection?</H1>
    <B>Meinrad Recheis</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20How%20to%20handle%20garbage%20collection%3F&In-Reply-To=%3C50182221.3000204%40eqqon.com%3E"
       TITLE="[mono-android] How to handle garbage collection?">meinrad.recheis at eqqon.com
       </A><BR>
    <I>Tue Jul 31 18:21:21 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011567.html">[mono-android] How to handle garbage collection?
</A></li>
        <LI>Next message: <A HREF="011572.html">[mono-android] How to handle garbage collection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11568">[ date ]</a>
              <a href="thread.html#11568">[ thread ]</a>
              <a href="subject.html#11568">[ subject ]</a>
              <a href="author.html#11568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi craig,
It seems to me, the garbage collector does not run as frequently in
mono4android as it does in .net, where it is potentially running a
firstgen collection every time you allocate objects. Mono4android
garbage-collects very lazy, only when the heap grows beyond certain
limits. Anyone with deeper knowledge about the GC may correct me here.
If your heap always grows and finally OOM-exceptions are thrown you
definitely have a leak (some objects are still referenced somehow).

I have not experenced leaks with textview, but here are some other insights.
In android it is very easy to leak memory. for instance, I had a very
hard to find leak with bitmaps and found that not only you need to call
Recycle on a dynamically loaded bitmap but also you need to set the
callback of the BitmapDrawable to null. I eventually ended up going
through my views on Activity.Destroy and set all Drawable.Callback to
null (i.e. Background of widgets etc.), recycle all dynamically loaded
bitmaps and unlink all views from their parents just to make sure.

Also I came across several bugs in android (for instance the gallery
widget does not recylce views) and many other problems, so don't expect
the android framework to be super bugfree.

Be careful with callbacks/eventhandlers in general and make sure you
destroy everything (break all possible links between objects, set
everything to null, unlink every child widget from its parent, etc.) so
that if there happens to be a leak, it does not hold a bunch of other
objects.

hth,
-- henon

On 31.07.2012 19:21, craig wrote:
&gt;<i> Honestly I'm still learning and didn't think of ListView until it was
</I>&gt;<i> suggested by you and John.  I am going to eventually change my code to use a
</I>&gt;<i> ListView because I think that's probably the cleaner way to code it now that
</I>&gt;<i> you have pointed it out to me.
</I>&gt;<i>
</I>&gt;<i> But I don't necessarily want to just dismiss this thread if the issue goes
</I>&gt;<i> away when I change to use ListView.  It seems that there is some fundamental
</I>&gt;<i> issue with garbage collection or else some fundamental knowledge that I am
</I>&gt;<i> lacking.  I just want to know why it is behaving as it is so I can better
</I>&gt;<i> understand how Mono for Android GC works.  I've read the articles about Mono
</I>&gt;<i> for Android GC on the support site but it didn't really help me to
</I>&gt;<i> understand what is happening here.  Thanks.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/How-to-handle-garbage-collection-memory-leak-tp5711079p5711090.html">http://mono-for-android.1047100.n5.nabble.com/How-to-handle-garbage-collection-memory-leak-tp5711079p5711090.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I></PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011567.html">[mono-android] How to handle garbage collection?
</A></li>
	<LI>Next message: <A HREF="011572.html">[mono-android] How to handle garbage collection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11568">[ date ]</a>
              <a href="thread.html#11568">[ thread ]</a>
              <a href="subject.html#11568">[ subject ]</a>
              <a href="author.html#11568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
