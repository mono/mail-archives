<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Random Deadlock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Random%20Deadlock&In-Reply-To=%3C1342104672200-5710849.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011350.html">
   <LINK REL="Next"  HREF="011353.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Random Deadlock</H1>
    <B>henon</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Random%20Deadlock&In-Reply-To=%3C1342104672200-5710849.post%40n5.nabble.com%3E"
       TITLE="[mono-android] Random Deadlock">meinrad.recheis at eqqon.com
       </A><BR>
    <I>Thu Jul 12 14:51:12 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011350.html">[mono-android] Unit Testing for MonoDroid
</A></li>
        <LI>Next message: <A HREF="011353.html">[mono-android] Random Deadlock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11332">[ date ]</a>
              <a href="thread.html#11332">[ thread ]</a>
              <a href="subject.html#11332">[ subject ]</a>
              <a href="author.html#11332">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi folks,
I am working on an app that needs to do heavy work in the background. I use
RunOnGuiThread to update the UI with progress and results. The problem is,
that I am experiencing non-deterministic hangups. When hanging I pause the
debugger and I always see that the executing thread (mostly my code on the
GUI thread) hangs in some random method (like view.GetChildAt(i) or
view.LayoutParameters=) or sometimes also not in my code. The stacktrace of
the hanging thread always looks like this 

System.Threading.Monitor.TryEnter ...
System.Threading.Monitor.Enter ...
Java.Lang.Object.GetObject ...
Java.Lang.Object._GetObject
Java.Lang.Object.GetObject ...
...

and another thread is waiting in System.Threading.Waithandle.WaitOne but I
have no code location. 

This happens even though I got no locks in my code but the deadlock happens
more likely if I do some locking of my own. To run the background worker I
tried System.Threading.ThreadPool, System.Threading.Thread and also
AsyncTask. It seemed to hang slightly more often with AsyncTask.

Because of the random nature of the deadlock and the absense of locks in my
code I suspect that the reason must be some synchronization in the
transition from c# to java and vice-versa. 

What do you think about that theory? Is there a way of proving/refuting
this? What can be done to eliminate such a deadlock?

If you need more info, please tell me what exactly I should provide.

Best regards,
-- henon

--
View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/Random-Deadlock-tp5710849.html">http://mono-for-android.1047100.n5.nabble.com/Random-Deadlock-tp5710849.html</A>
Sent from the Mono for Android mailing list archive at Nabble.com.
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011350.html">[mono-android] Unit Testing for MonoDroid
</A></li>
	<LI>Next message: <A HREF="011353.html">[mono-android] Random Deadlock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11332">[ date ]</a>
              <a href="thread.html#11332">[ thread ]</a>
              <a href="subject.html#11332">[ subject ]</a>
              <a href="author.html#11332">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
