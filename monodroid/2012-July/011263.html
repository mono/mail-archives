<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] How to convert?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20How%20to%20convert%3F&In-Reply-To=%3CE3A06FA3-29FE-4E6D-A2B1-2CE79CFAB366%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011254.html">
   <LINK REL="Next"  HREF="011264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] How to convert?</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20How%20to%20convert%3F&In-Reply-To=%3CE3A06FA3-29FE-4E6D-A2B1-2CE79CFAB366%40xamarin.com%3E"
       TITLE="[mono-android] How to convert?">jonp at xamarin.com
       </A><BR>
    <I>Mon Jul  9 16:23:57 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011254.html">[mono-android] How to convert?
</A></li>
        <LI>Next message: <A HREF="011264.html">[mono-android] How to convert?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11263">[ date ]</a>
              <a href="thread.html#11263">[ thread ]</a>
              <a href="subject.html#11263">[ subject ]</a>
              <a href="author.html#11263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jul 9, 2012, at 1:26 AM, craig wrote:
&gt;<i> In the code below, in the setter for RawAdapter, I would like to cast/convert the value variable from Java.Lang.Object to generic type T.
</I>
Are there any constraints on T?

&gt;<i> I have not found a simple way to do this.  In this example T must derive from Android.Widget.IAdapter.
</I>
So you have this?

	where T : IAdapter

&gt;<i>        public abstract T Adapter { get; set; }
</I>&gt;<i> 
</I>&gt;<i>        protected override Java.Lang.Object RawAdapter
</I>&gt;<i>        {
</I>&gt;<i>            get
</I>&gt;<i>            {
</I>&gt;<i>                return Adapter.JavaCast&lt;Java.Lang.Object&gt;();
</I>&gt;<i>            }
</I>&gt;<i>            set
</I>&gt;<i>            {
</I>&gt;<i>                Adapter = value.JavaCast&lt;T&gt;(); //causes error
</I>
JavaCast&lt;T&gt;() is only needed when you need to perform Java-side object casts. The primary example being interface navigation, e.g. the EGLContext.EGL property [0] returns an instance of type IEGL [1], and you can't perform a C# runtime cast to e.g. IEGL11 [2] because the C# implementation for IEGL doesn't implement the IEGL11 interface, while the Java implementation of the EGL interface does. Because of this mismatch, Mono's type system must be &quot;worked around&quot; by using JavaCast&lt;T&gt;().

I don't think that your code requires JavaCast&lt;T&gt;(): you're not performing or requiring any Java-side interface navigation, so you should be able to use normal casts:

	protected override Java.Lang.Object RawAdapter {
		get {return (Java.Lang.Object) Adapter;}
		set {Adapter = (T) value;}
	}

The `get` cast should be fine, as all &quot;sane&quot; Java interface implementations will inherit Java.Lang.Object. (Failure to do so is generally a Bad Idea&#8482;.) The `set` should likewise be fine because if the type isn't coercible to a C# 'T' you'll want an exception anyway.

 - Jon

[0] <A HREF="http://androidapi.xamarin.com/?link=P%3aJavax.Microedition.Khronos.Egl.EGLContext.EGL">http://androidapi.xamarin.com/?link=P%3aJavax.Microedition.Khronos.Egl.EGLContext.EGL</A>

[1] <A HREF="http://androidapi.xamarin.com/?link=T:Javax.Microedition.Khronos.Egl.IEGL">http://androidapi.xamarin.com/?link=T:Javax.Microedition.Khronos.Egl.IEGL</A>

[2] <A HREF="http://androidapi.xamarin.com/?link=T%3aJavax.Microedition.Khronos.Egl.IEGL11">http://androidapi.xamarin.com/?link=T%3aJavax.Microedition.Khronos.Egl.IEGL11</A>

</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011254.html">[mono-android] How to convert?
</A></li>
	<LI>Next message: <A HREF="011264.html">[mono-android] How to convert?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11263">[ date ]</a>
              <a href="thread.html#11263">[ thread ]</a>
              <a href="subject.html#11263">[ subject ]</a>
              <a href="author.html#11263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
