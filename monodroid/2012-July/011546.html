<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] 'this' is null / null reference exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20%27this%27%20is%20null%20/%20null%20reference%20exception&In-Reply-To=%3CF681E778-71BA-464B-A495-0FE91D59E5F1%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011600.html">
   <LINK REL="Next"  HREF="011548.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] 'this' is null / null reference exception</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20%27this%27%20is%20null%20/%20null%20reference%20exception&In-Reply-To=%3CF681E778-71BA-464B-A495-0FE91D59E5F1%40xamarin.com%3E"
       TITLE="[mono-android] 'this' is null / null reference exception">jonp at xamarin.com
       </A><BR>
    <I>Fri Jul 27 16:16:44 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011600.html">[mono-android] Odd behavior when restarting app
</A></li>
        <LI>Next message: <A HREF="011548.html">[mono-android] 'this' is null / null reference exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11546">[ date ]</a>
              <a href="thread.html#11546">[ thread ]</a>
              <a href="subject.html#11546">[ subject ]</a>
              <a href="author.html#11546">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jun 25, 2012, at 6:49 AM, keith &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">keith at buzzinteractive.co.uk</A>&gt; wrote:
&gt;<i> I have been getting random null reference exceptions in my app when running on lower end devices (galaxy ace in this case), but not on a desire s or
</I>&gt;<i> emulators.
</I>
There are two things to check.

1. Check the Android Debug Log for process startup messages:

	<A HREF="http://docs.xamarin.com/android/advanced_topics/android_debug_log">http://docs.xamarin.com/android/advanced_topics/android_debug_log</A>

The messages to look for are messages containing &quot;__mono&quot; and your package name, and are generated every time a Mono for Android process is started:

	I/ActivityThread(10777): Pub Scratch.SreProxy.mono.MonoRuntimeProvider.__mono_init__: mono.MonoRuntimeProvider 

The above comes from the &quot;Scratch.SreProxy&quot; app (just a random test app).

The question: do you see _two_ (or more) of these messages for a &quot;single&quot; app launch?

What could be happening is the Activity lifecycle: if your Activity isn't visible, Android is free to kill your process:

	<A HREF="http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle">http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle</A>

If Android kills your process and then the user navigates back to your Activity, Android will re-lauch the process and Activity (thus generating another __mono_ message in the debug log).

If you see this, then the solution is to capture the Activity lifecycle events and persistently save your singleton data so that you can restore it later.

2. The other thing to check is (of course) various bugs. A &quot;brute force&quot; solution is to enable tracing (which WILL spam your logcat, though hopefully to useful effect):

	<A HREF="http://docs.xamarin.com/android/advanced_topics/diagnostics">http://docs.xamarin.com/android/advanced_topics/diagnostics</A>

For example:

	adb shell setprop debug.mono.trace all,-N:System.Net

 - Jon

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011600.html">[mono-android] Odd behavior when restarting app
</A></li>
	<LI>Next message: <A HREF="011548.html">[mono-android] 'this' is null / null reference exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11546">[ date ]</a>
              <a href="thread.html#11546">[ thread ]</a>
              <a href="subject.html#11546">[ subject ]</a>
              <a href="author.html#11546">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
