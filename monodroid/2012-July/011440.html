<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Program that reproduces Mono4Android deadlock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Program%20that%20reproduces%20Mono4Android%20deadlock&In-Reply-To=%3C50080A46.2040906%40eqqon.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011433.html">
   <LINK REL="Next"  HREF="011442.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Program that reproduces Mono4Android deadlock</H1>
    <B>Meinrad Recheis</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Program%20that%20reproduces%20Mono4Android%20deadlock&In-Reply-To=%3C50080A46.2040906%40eqqon.com%3E"
       TITLE="[mono-android] Program that reproduces Mono4Android deadlock">meinrad.recheis at eqqon.com
       </A><BR>
    <I>Thu Jul 19 13:23:18 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011433.html">[mono-android] Program that reproduces Mono4Android deadlock
</A></li>
        <LI>Next message: <A HREF="011442.html">[mono-android] Program that reproduces Mono4Android deadlock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11440">[ date ]</a>
              <a href="thread.html#11440">[ thread ]</a>
              <a href="subject.html#11440">[ subject ]</a>
              <a href="author.html#11440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 18.07.2012 16:46, Jonathan Pryor wrote:
&gt;<i> On Jul 18, 2012, at 9:13 AM, Meinrad Recheis wrote:
</I>&gt;&gt;<i> Would be nice, if you guys could do a test on a Galaxy Tab 10.1.
</I>&gt;<i> I'll see if I can readily obtain one. In theory we have one around here...
</I>Any news about my test program on your Galaxy Tab?

I just wrote the equivalent test program in Java and even after running
for a very long time it did not deadlock on my Galaxy Tab which hangs
within minutes (if not seconds) executing the equivalent Mono program. I
am afraid the deadlock is in fact caused by synchronization code in Mono
for Android. Even if the likeliness of the deadlock to happen is low on
other devices it does not mean it can not happen. This is a huge problem
for Mono apps. I hope you are going to review the synchronization soon.

Please keep me posted.
-- Henon

For the reference, here is the Java Testprogram I used:

package com.example.deadlockrepro;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    Thread m_thread;
    public boolean stop;
    int i=0;
   
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        m_thread=new Thread(new Runnable() {
            public void run() {
                   while(!stop) {
                       try {
                           Thread.sleep(10);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                       i+=1;
                        runOnUiThread(new Runnable() {
                           public void run() {
                               TextView
hello=(TextView)findViewById(R.id.hello);
                               hello.setText(&quot;cycle &quot;+i);
                           }
                        });
                   }
                }
        });
        m_thread.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

   
}

&gt;<i>
</I>&gt;<i> Which Android version are you on? 3.1? 4.0?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>  - Jon
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011433.html">[mono-android] Program that reproduces Mono4Android deadlock
</A></li>
	<LI>Next message: <A HREF="011442.html">[mono-android] Program that reproduces Mono4Android deadlock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11440">[ date ]</a>
              <a href="thread.html#11440">[ thread ]</a>
              <a href="subject.html#11440">[ subject ]</a>
              <a href="author.html#11440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
