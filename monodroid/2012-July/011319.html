<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Type systems: java.lang.Object and System.Object
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Type%20systems%3A%20java.lang.Object%20and%20System.Object&In-Reply-To=%3C1C8A472D-FD01-442E-B8C0-719F90BEC5D4%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011347.html">
   <LINK REL="Next"  HREF="011348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Type systems: java.lang.Object and System.Object</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Type%20systems%3A%20java.lang.Object%20and%20System.Object&In-Reply-To=%3C1C8A472D-FD01-442E-B8C0-719F90BEC5D4%40xamarin.com%3E"
       TITLE="[mono-android] Type systems: java.lang.Object and System.Object">jonp at xamarin.com
       </A><BR>
    <I>Wed Jul 11 20:28:40 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011347.html">[mono-android] Type systems: java.lang.Object and System.Object
</A></li>
        <LI>Next message: <A HREF="011348.html">[mono-android] Type systems: java.lang.Object and System.Object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11319">[ date ]</a>
              <a href="thread.html#11319">[ thread ]</a>
              <a href="subject.html#11319">[ subject ]</a>
              <a href="author.html#11319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jul 11, 2012, at 7:02 AM, andyjohnson0 wrote:
&gt;<i> In a recent MfA project I needed to link UI elements (derived from View) to their corresponding data model object (derived from System.Object). The most natural way to do this was to use the View.Tag property. Since this is a java.lang.Object reference, I had to write a generic class that derives from java.lang.Object and wraps a System.Object reference.
</I>&gt;<i> 
</I>&gt;<i> This seems like it should be unnecessary for two reasons: it complicates the code where the Tag property is set and got, and it adds two extra object instances (a java object and a c# proxy).
</I>
There is no way to avoid the &quot;extra object instance&quot; problem: in order for the View instance to refer to a C# instance, the C# instance must (1) itself inherit Java.Lang.Object, or (2) be wrapped in an object that inherits Java.Lang.Object.

Could we do this automatic wrapping automatically? Yes. In fact, I believe we did so in one of the early previews, but changed it for &quot;stylistic&quot; reasons: since any such wrapper object would need to hold a gref, we felt that gref creation should be explicit, so that it can be reasoned about (somewhat) easier. This is also why we don't &quot;fold&quot; all Java.Lang.Object instances into System.Object instances.

At least that was the historical reasoning, which was never entirely credible anyway (e.g. JavaList&lt;object&gt; is entirely valid, and will implicitly wrap non-Java.Lang.Object subclasses).

Which brings us to today: making gref creation &quot;explicit&quot; (via `new`) isn't credible (too many grefs can be created behind the scenes anyway), so the proper solution is better tooling (e.g. something to parse `adb shell setprop debug.mono.log gref` output), profilers, etc., and allowing System.Object to be used ~everywhere Java.Lang.Object is used today. Given that we're now intending to provide API stability between minor releases, this won't happen before 5.0, if even then:

	<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=6085">https://bugzilla.xamarin.com/show_bug.cgi?id=6085</A>

&gt;<i> Am I missing something, or is this best/acceptable practice? If it is the standard solution, does Mono for Android provide a predefined class for this? I have been unable to find one.
</I>
Yes, creating wrapper objects is currently the only practice, and we don't provide a predefined class for this purpose. Feel free to create your own.

 - Jon

</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011347.html">[mono-android] Type systems: java.lang.Object and System.Object
</A></li>
	<LI>Next message: <A HREF="011348.html">[mono-android] Type systems: java.lang.Object and System.Object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11319">[ date ]</a>
              <a href="thread.html#11319">[ thread ]</a>
              <a href="subject.html#11319">[ subject ]</a>
              <a href="author.html#11319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
