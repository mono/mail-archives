<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] cant get my head around progress bar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20cant%20get%20my%20head%20around%20progress%20bar&In-Reply-To=CAJiYqXze8QsM7mhOFL7vXAASUOGmhEMTMXceNNZ6jRqADN5U6g%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006322.html">
   <LINK REL="Next"  HREF="006323.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] cant get my head around progress bar</H1>
    <B>John Murray</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20cant%20get%20my%20head%20around%20progress%20bar&In-Reply-To=CAJiYqXze8QsM7mhOFL7vXAASUOGmhEMTMXceNNZ6jRqADN5U6g%40mail.gmail.com"
       TITLE="[mono-android] cant get my head around progress bar">john at murray.gb.com
       </A><BR>
    <I>Fri Sep 23 06:34:35 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006322.html">[mono-android] cant get my head around progress bar
</A></li>
        <LI>Next message: <A HREF="006323.html">[mono-android] cant get my head around progress bar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6382">[ date ]</a>
              <a href="thread.html#6382">[ thread ]</a>
              <a href="subject.html#6382">[ subject ]</a>
              <a href="author.html#6382">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Many tx SRI

I solved it by putting the code into it's own method 
Viz 
Whilst this does not work (code in eventhandler ) 
t1.Text = &quot;loading&quot;;
&gt;<i>
</I>&gt;<i>                      ThreadPool.QueueUserWorkItem(o
</I>&gt;<i> =&gt;WXclass5.getwindmap(ds, WXclass5.altsel.ToString()));
</I>&gt;<i>
</I>&gt;<i>                 t1.Text = &quot;&quot;;
</I>
This does work 
            ThreadPool.QueueUserWorkItem(o =&gt; progbarMethod(ds));  //called
from click eventhandler

//Then 
   private void probarMethod(string ds)
     {
         
	 WXclass5.getwindmap2(this,ds);
       RunOnUiThread( () =&gt;t1.Text = WXclass5.getaltstring());
       RunOnUiThread( () =&gt;i1.SetImageBitmap(WXclass5.windmap));
	 RunOnUiThread( () =&gt;pb.Visibility=ViewStates.Invisible);
     }  
        




-----Original Message-----
From: SRI [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">srid68 at gmail.com</A>] 
Sent: 18 September 2011 12:25
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">john at murray.gb.com</A>; Discussions related to Mono for Android
Subject: Re: [mono-android] cant get my head around progress bar

Hi
         Problem 1 : Showing a Progress Bar

         I am doing everything programatically You can also use axml to do
this.

         Declare the folowing globally in your activity.

         static bool showActivity =false;
         ProgressBar _activityIndicator;
         private static System.Timers.Timer _periodicTimer ;

         In the OnCreate method or where you initialise you views do
the following

            _activityIndicator = new ProgressBar(this);
            _activityIndicator.Visibility = ViewStates.Invisible;
            RelativeLayout.LayoutParams
activityProgressAnimationParams = new RelativeLayout.LayoutParams(100,
100);
 
activityProgressAnimationParams.AddRule(LayoutRules.CenterHorizontal);
 
activityProgressAnimationParams.AddRule(LayoutRules.CenterVertical);
            [relativeLayout].AddView(_activityIndicator,
activityProgressAnimationParams);

            I am adding this to a RelativeLayout View. You may need to
adjust this to what ever is
            your main Layout.

            Alternative if you have declared this in axml, you can do
the following,

           _activityIndicator =
FindViewById&lt;ProgressBar&gt;(Resource.Id.progressBar)

            Also initialise the Periodic Timer
             _periodicTimer = = new System.Timers.Timer();
             _periodicTimer.Elapsed += new
ElapsedEventHandler(PeriodicTimer_Tick);
            _periodicTimer.Interval = 500;

          Declare the Period Timer Event Handler
        private void PeriodicTimer_Tick(object sender, ElapsedEventArgs e)
        {


        }






On Sat, Sep 17, 2011 at 6:32 PM, John Murray &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">john at murray.gb.com</A>&gt; wrote:
&gt;<i> I&#146;ve cracked a number of things along the learning curve of Mandroid but I
</I>&gt;<i> am being really thick here
</I>&gt;<i>
</I>&gt;<i> I just cannot get my head around the implementation of a progress bar &#150;
</I>can
&gt;<i> some kind soul help&#160; me with some idiot proof code?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have a static class method which fetches some meteorological diagrams
</I>from
&gt;<i> a webserver and places resulting bitmap in a static&#160; which is later
</I>accessed
&gt;<i> by an imageview
</I>&gt;<i>
</I>&gt;<i> Takes 4 or 5 seconds but a lot longer over a GSM network therefore I want
</I>to
&gt;<i> put up a progress thingy
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> For the time being I&#146;ve got a textview just saying loading
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> These lines of code are called&#160; when a user selects something&#160; from a
</I>&gt;<i> spinner
</I>&gt;<i>
</I>&gt;<i> Obviously this doesn&#146;t do much
</I>&gt;<i>
</I>&gt;<i> &#160;t1.Text = &quot;loading&quot;;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; WXclass5.getwindmap(ds, WXclass5.altsel.ToString());
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;t1.Text = &quot;&quot;;
</I>&gt;<i>
</I>&gt;<i> but why cant I do this
</I>&gt;<i>
</I>&gt;<i> t1.Text = &quot;loading&quot;;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ThreadPool.QueueUserWorkItem(o
</I>&gt;<i> =&gt;WXclass5.getwindmap(ds, WXclass5.altsel.ToString()));
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;t1.Text = &quot;&quot;;
</I>&gt;<i>
</I>&gt;<i> there&#146;s no UI code in the &#145;getwindmap&#146; &#150; just a webclient call and some
</I>&gt;<i> bitmap/byte manipulation
</I>&gt;<i>
</I>&gt;<i> but implementing the threadpool.QueueWorkItem does not seem to fetch
</I>&gt;<i> anything or do anything &#150; I can&#146;t seem to debug into it to see what&#146;s
</I>&gt;<i> happening (is there a special method of debugging on separate threads?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> With regards to implementing the progress bar instead of text saying
</I>loading
&gt;<i> &#160;I presume I just replace the text.t1 with a progressbar&#160; -and set it
</I>&gt;<i> &#160;visible&#160; before the threadpoolqueue and non-visible after?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I suspect it is not that simple
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sorry to seem so &#160;stupid but I&#146;ve read all the android stuff on
</I>progressbars
&gt;<i> and I&#146;ve developed a complete mental block &#150; the more I read the less I
</I>&gt;<i> understand.
</I>&gt;<i>
</I>&gt;<i> Can someone please explain in baby language please?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


-- 
Sridharan Srinivasan
Alias Sri
Ph:(65)98255785/(65)63922439
www.arshu.com

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006322.html">[mono-android] cant get my head around progress bar
</A></li>
	<LI>Next message: <A HREF="006323.html">[mono-android] cant get my head around progress bar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6382">[ date ]</a>
              <a href="thread.html#6382">[ thread ]</a>
              <a href="subject.html#6382">[ subject ]</a>
              <a href="author.html#6382">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
