<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Invalid IL code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Invalid%20IL%20code&In-Reply-To=CAP-t25-uzwnakJ%3DhWSDpSYT4FERM9f7iOD%2BosBB5%3DWtFLL2Dcw%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006192.html">
   <LINK REL="Next"  HREF="006198.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Invalid IL code</H1>
    <B>Nicklas M&#248;ller Jepsen</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Invalid%20IL%20code&In-Reply-To=CAP-t25-uzwnakJ%3DhWSDpSYT4FERM9f7iOD%2BosBB5%3DWtFLL2Dcw%40mail.gmail.com"
       TITLE="[mono-android] Invalid IL code">nmj at blueposition.com
       </A><BR>
    <I>Sat Sep 10 08:23:43 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006192.html">[mono-android] Invalid IL code
</A></li>
        <LI>Next message: <A HREF="006198.html">[mono-android] Invalid IL code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6197">[ date ]</a>
              <a href="thread.html#6197">[ thread ]</a>
              <a href="subject.html#6197">[ subject ]</a>
              <a href="author.html#6197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Rolf,

Thank you for your answer.
I've tried PEVerify both on the dll before and after running it through Dotfuscator both time with the following result:
[HRESULT 0x80070002] - The system cannot find the file specified.

I think I have to do some more research on this, but thanks again for your answer.

Nicklas

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>] On Behalf Of Rolf Bjarne Kvinge
Sent: 9. september 2011 17:30
To: Discussions related to Mono for Android
Subject: Re: [mono-android] Invalid IL code

Hi Nicklas,

There are issues with obfuscated assemblies in general with mono. The problem is that obfuscators create invalid files, inavlid IL, and all sorts of bad things to make decompilers fail on them, in short they scramble the assemblies as much as possible without causing failures when running in Windows with Microsoft's assembly loader and jit.

The Mono Migration Analyzer won't verify the IL code of your assembly to see if it's correct, but you can use Microsoft's PEVerify to do just that (and if it shows that the assembly has no problems, then there is a bug in mono).

I haven't tried Dotfuscator, but there may be configuration options you can set that make it work better with mono.

Best regards,
Rolf

On Fri, Sep 9, 2011 at 11:32 AM, Nicklas M&#248;ller Jepsen &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">nmj at blueposition.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> When obfuscating my dlls with Dotfuscator I get the following when 
</I>&gt;<i> running my application on a device:
</I>&gt;<i>
</I>&gt;<i> ERROR/mono(5224): Unhandled Exception: System.InvalidProgramException:
</I>&gt;<i> Invalid IL code in MyPackage.MyActivity:OnCreate (Android.OS.Bundle):
</I>&gt;<i> IL_0019: pop
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I've used to Mono Migration Analyzer to verify the Dotfuscated dll and 
</I>&gt;<i> it is not reporting any errors.
</I>&gt;<i>
</I>&gt;<i> Anyone aware off issues when obfuscating dlls used with MonoDroid?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards, Nicklas
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>_______________________________________________
Monodroid mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>

UNSUBSCRIBE INFORMATION:
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006192.html">[mono-android] Invalid IL code
</A></li>
	<LI>Next message: <A HREF="006198.html">[mono-android] Invalid IL code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6197">[ date ]</a>
              <a href="thread.html#6197">[ thread ]</a>
              <a href="subject.html#6197">[ subject ]</a>
              <a href="author.html#6197">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
