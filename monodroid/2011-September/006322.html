<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] cant get my head around progress bar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20cant%20get%20my%20head%20around%20progress%20bar&In-Reply-To=001001cc7525%2424ef3d00%246ecdb700%24%40gb.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006295.html">
   <LINK REL="Next"  HREF="006382.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] cant get my head around progress bar</H1>
    <B>SRI</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20cant%20get%20my%20head%20around%20progress%20bar&In-Reply-To=001001cc7525%2424ef3d00%246ecdb700%24%40gb.com"
       TITLE="[mono-android] cant get my head around progress bar">srid68 at gmail.com
       </A><BR>
    <I>Sun Sep 18 07:24:36 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006295.html">[mono-android] cant get my  head around progress bar
</A></li>
        <LI>Next message: <A HREF="006382.html">[mono-android] cant get my head around progress bar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6322">[ date ]</a>
              <a href="thread.html#6322">[ thread ]</a>
              <a href="subject.html#6322">[ subject ]</a>
              <a href="author.html#6322">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
         Problem 1 : Showing a Progress Bar

         I am doing everything programatically You can also use axml to do this.

         Declare the folowing globally in your activity.

         static bool showActivity =false;
         ProgressBar _activityIndicator;
         private static System.Timers.Timer _periodicTimer ;

         In the OnCreate method or where you initialise you views do
the following

            _activityIndicator = new ProgressBar(this);
            _activityIndicator.Visibility = ViewStates.Invisible;
            RelativeLayout.LayoutParams
activityProgressAnimationParams = new RelativeLayout.LayoutParams(100,
100);
            activityProgressAnimationParams.AddRule(LayoutRules.CenterHorizontal);
            activityProgressAnimationParams.AddRule(LayoutRules.CenterVertical);
            [relativeLayout].AddView(_activityIndicator,
activityProgressAnimationParams);

            I am adding this to a RelativeLayout View. You may need to
adjust this to what ever is
            your main Layout.

            Alternative if you have declared this in axml, you can do
the following,

           _activityIndicator =
FindViewById&lt;ProgressBar&gt;(Resource.Id.progressBar)

            Also initialise the Periodic Timer
             _periodicTimer = = new System.Timers.Timer();
             _periodicTimer.Elapsed += new
ElapsedEventHandler(PeriodicTimer_Tick);
            _periodicTimer.Interval = 500;

          Declare the Period Timer Event Handler
        private void PeriodicTimer_Tick(object sender, ElapsedEventArgs e)
        {


        }






On Sat, Sep 17, 2011 at 6:32 PM, John Murray &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">john at murray.gb.com</A>&gt; wrote:
&gt;<i> I&#8217;ve cracked a number of things along the learning curve of Mandroid but I
</I>&gt;<i> am being really thick here
</I>&gt;<i>
</I>&gt;<i> I just cannot get my head around the implementation of a progress bar &#8211; can
</I>&gt;<i> some kind soul help&#160; me with some idiot proof code?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have a static class method which fetches some meteorological diagrams from
</I>&gt;<i> a webserver and places resulting bitmap in a static&#160; which is later accessed
</I>&gt;<i> by an imageview
</I>&gt;<i>
</I>&gt;<i> Takes 4 or 5 seconds but a lot longer over a GSM network therefore I want to
</I>&gt;<i> put up a progress thingy
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> For the time being I&#8217;ve got a textview just saying loading
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> These lines of code are called&#160; when a user selects something&#160; from a
</I>&gt;<i> spinner
</I>&gt;<i>
</I>&gt;<i> Obviously this doesn&#8217;t do much
</I>&gt;<i>
</I>&gt;<i> &#160;t1.Text = &quot;loading&quot;;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; WXclass5.getwindmap(ds, WXclass5.altsel.ToString());
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;t1.Text = &quot;&quot;;
</I>&gt;<i>
</I>&gt;<i> but why cant I do this
</I>&gt;<i>
</I>&gt;<i> t1.Text = &quot;loading&quot;;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ThreadPool.QueueUserWorkItem(o
</I>&gt;<i> =&gt;WXclass5.getwindmap(ds, WXclass5.altsel.ToString()));
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;t1.Text = &quot;&quot;;
</I>&gt;<i>
</I>&gt;<i> there&#8217;s no UI code in the &#8216;getwindmap&#8217; &#8211; just a webclient call and some
</I>&gt;<i> bitmap/byte manipulation
</I>&gt;<i>
</I>&gt;<i> but implementing the threadpool.QueueWorkItem does not seem to fetch
</I>&gt;<i> anything or do anything &#8211; I can&#8217;t seem to debug into it to see what&#8217;s
</I>&gt;<i> happening (is there a special method of debugging on separate threads?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> With regards to implementing the progress bar instead of text saying loading
</I>&gt;<i> &#160;I presume I just replace the text.t1 with a progressbar&#160; -and set it
</I>&gt;<i> &#160;visible&#160; before the threadpoolqueue and non-visible after?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I suspect it is not that simple
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sorry to seem so &#160;stupid but I&#8217;ve read all the android stuff on progressbars
</I>&gt;<i> and I&#8217;ve developed a complete mental block &#8211; the more I read the less I
</I>&gt;<i> understand.
</I>&gt;<i>
</I>&gt;<i> Can someone please explain in baby language please?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


-- 
Sridharan Srinivasan
Alias Sri
Ph:(65)98255785/(65)63922439
www.arshu.com
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006295.html">[mono-android] cant get my  head around progress bar
</A></li>
	<LI>Next message: <A HREF="006382.html">[mono-android] cant get my head around progress bar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6322">[ date ]</a>
              <a href="thread.html#6322">[ thread ]</a>
              <a href="subject.html#6322">[ subject ]</a>
              <a href="author.html#6322">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
