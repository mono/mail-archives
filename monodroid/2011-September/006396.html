<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] ApiDemo error + debugging problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20ApiDemo%20error%20%2B%20debugging%20problems&In-Reply-To=4E79DEBA.9080103%40holisticware.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006364.html">
   <LINK REL="Next"  HREF="006463.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] ApiDemo error + debugging problems</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20ApiDemo%20error%20%2B%20debugging%20problems&In-Reply-To=4E79DEBA.9080103%40holisticware.net"
       TITLE="[mono-android] ApiDemo error + debugging problems">jonp at xamarin.com
       </A><BR>
    <I>Fri Sep 23 15:33:36 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006364.html">[mono-android] ApiDemo error + debugging problems
</A></li>
        <LI>Next message: <A HREF="006463.html">[mono-android] ApiDemo error + debugging problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6396">[ date ]</a>
              <a href="thread.html#6396">[ thread ]</a>
              <a href="subject.html#6396">[ subject ]</a>
              <a href="author.html#6396">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sep 21, 2011, at 8:55 AM, Miljenko Cvjetko wrote:
&gt;<i> ApiDemo.cs gets exception on line 84
</I>&gt;<i> list = list.OrderBy (p =&gt; (p.ActivityInfo.NonLocalizedLabel == null ? &quot;&quot; : p.ActivityInfo.NonLocalizedLabel.ToString ()).ToString ()).ToList ();
</I>...
&gt;<i> 09-21 12:36:47.620 E/dalvikvm( 519): Excessive JNI global references (2001)
</I>&gt;<i> 09-21 12:36:47.620 E/dalvikvm( 519): VM aborting
</I>&gt;<i> 09-21 12:36:47.620 I/mono ( 519): Stacktrace:
</I>
My guess is that you have the Android API Demo installed on your device. :-)

Since Mono's API demo is (mostly) a port of the Android API Demo, it uses the same logic to determine which activitites are &quot;samples&quot; (those with the category Intent.CategorySampleCode). The result is that _lots_ of Activity instances get pulled in (one GREF apiece), and then you look at the ActivityInfo property (another GREF apiece), and then you read the PackageItemInfo.NonLocalizedLabel property (another GREF apiece)...and pretty soon you're looking at a lot of GREFs.

Unfortunately, if this is the case the answer is &quot;don't do that&quot;: either run on Hardware (where the GREF limit is significantly higher), or uninstall the Android API Demo (so that fewer activities are pulled in), or change the Mono API demo code so that it looks for a different set of activities, e.g. look for a category in addition to Intent.CategorySampleCode.

 - Jon

</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006364.html">[mono-android] ApiDemo error + debugging problems
</A></li>
	<LI>Next message: <A HREF="006463.html">[mono-android] ApiDemo error + debugging problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6396">[ date ]</a>
              <a href="thread.html#6396">[ thread ]</a>
              <a href="subject.html#6396">[ subject ]</a>
              <a href="author.html#6396">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
