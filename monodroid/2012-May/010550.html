<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] MfA 4.2.2 - FileStream.Length -	System.ObjectDisposedException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20MfA%204.2.2%20-%20FileStream.Length%20-%0A%09System.ObjectDisposedException&In-Reply-To=%3C91BA5DF0-C7D3-4360-8C70-EFA9FB853822%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010532.html">
   <LINK REL="Next"  HREF="010533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] MfA 4.2.2 - FileStream.Length -	System.ObjectDisposedException</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20MfA%204.2.2%20-%20FileStream.Length%20-%0A%09System.ObjectDisposedException&In-Reply-To=%3C91BA5DF0-C7D3-4360-8C70-EFA9FB853822%40xamarin.com%3E"
       TITLE="[mono-android] MfA 4.2.2 - FileStream.Length -	System.ObjectDisposedException">jonp at xamarin.com
       </A><BR>
    <I>Mon May 28 20:03:51 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010532.html">[mono-android] MfA 4.2.2 - FileStream.Length -	System.ObjectDisposedException
</A></li>
        <LI>Next message: <A HREF="010533.html">[mono-android] Installation fails on Windows 7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10550">[ date ]</a>
              <a href="thread.html#10550">[ thread ]</a>
              <a href="subject.html#10550">[ subject ]</a>
              <a href="author.html#10550">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On May 27, 2012, at 8:08 AM, devbuzz wrote:
&gt;<i> Was looking in the 4.2.2 notes and saw this:
</I>&gt;<i> 
</I>&gt;<i> Reduce lifetime of wrapped Streams in InputStreamAdapter, InputStreamInvoker, OutputStreamAdapter, OutputStreamInvoker. Disposing of the wrapper instance will now dispose the wrapped instance.
</I>&gt;<i> 
</I>&gt;<i> Any chance this is the cause?
</I>
Damn, that's it. :-(

The problem in your original code fragment is that Bitmap.Compress() creates an OutputStreamAdapter, which gets disposed at the end of the method (to reduce gref count), which disposes of the Stream that the OutputStreamAdapter wraps. Oops. I should have only changed the Invokers, not the Adapters...

This will be fixed in 4.2.3. In the meantime, please revert to 4.2.1.

 - Jon

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010532.html">[mono-android] MfA 4.2.2 - FileStream.Length -	System.ObjectDisposedException
</A></li>
	<LI>Next message: <A HREF="010533.html">[mono-android] Installation fails on Windows 7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10550">[ date ]</a>
              <a href="thread.html#10550">[ thread ]</a>
              <a href="subject.html#10550">[ subject ]</a>
              <a href="author.html#10550">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
