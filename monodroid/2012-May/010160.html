<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] GridView / listview, pics from sdcard, problem MALLOC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20GridView%20/%20listview%2C%20pics%20from%20sdcard%2C%20problem%20MALLOC&In-Reply-To=%3C4FACE84D.2000104%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010163.html">
   <LINK REL="Next"  HREF="010171.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] GridView / listview, pics from sdcard, problem MALLOC</H1>
    <B>michelw</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20GridView%20/%20listview%2C%20pics%20from%20sdcard%2C%20problem%20MALLOC&In-Reply-To=%3C4FACE84D.2000104%40gmail.com%3E"
       TITLE="[mono-android] GridView / listview, pics from sdcard, problem MALLOC">michel.waast at gmail.com
       </A><BR>
    <I>Fri May 11 10:22:05 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010163.html">[mono-android] Mono.Android has a PublicKeyToken in 4.2 instead	of it being null
</A></li>
        <LI>Next message: <A HREF="010171.html">[mono-android] GridView / listview, pics from sdcard,	problem MALLOC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10160">[ date ]</a>
              <a href="thread.html#10160">[ thread ]</a>
              <a href="subject.html#10160">[ subject ]</a>
              <a href="author.html#10160">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've a problem (too malloc) when i read pics from sdcard in my gridview.

public override View GetView (int position, View convertView, ViewGroup 
parent)
{
             ImageView imageView;

             if (convertView == null)
             {
                 imageView = null;
                 imageView = new ImageView(context);
                 imageView.SetAdjustViewBounds(true);
             }
             else
                 imageView = (ImageView)convertView;

             //Default pic
             
imageView.SetImageResource(Resource.Drawable.DefaultImageGridView);

             imageView.Id = int.Parse(Liste[position].IdFichier);
             imageView.Tag = &quot;default&quot;;

             string nameofpic = Liste[position].FolderFichier + 
Config.TypeMiniatures + Liste[position].Fichier;
             nameofpic = nameofpic.Replace('/', '_');
             if (File.Exists(Config.CheminCache + nameofpic))
            {
                     //i print the good pic

                     
imageView.SetImageDrawable(Drawable.CreateFromPath(Config.CheminCache + 
nameofpic));

                     //same problem with it
                    
//imageView.SetImageBitmap(BitmapFactory.DecodeFile(Config.CheminCache + 
nameofpic));
            }

            return imageView;
         }


My gridview print 100 pics, and the pics are in the sdcard. If i scroll 
up, down, lot of time, i've this result:


05-11 12:01:25.117 D/dalvikvm( 3475): GC_FOR_MALLOC freed 167 objects / 
481688 bytes in 64ms
05-11 12:01:25.187 D/dalvikvm( 3475): GC_FOR_MALLOC freed 92 objects / 
479856 bytes in 43ms
05-11 12:01:25.539 D/dalvikvm( 3475): GC_FOR_MALLOC freed 91 objects / 
1020584 bytes in 27ms
05-11 12:01:25.680 D/dalvikvm( 3475): GC_FOR_MALLOC freed 129 objects / 
1432144 bytes in 28ms
[...]
05-11 12:01:48.469 D/dalvikvm( 3475): GC_FOR_MALLOC freed 162 objects / 
1909360 bytes in 29ms
05-11 12:01:48.617 E/dalvikvm-heap( 3475): 232112-byte external 
allocation too large for this process.
05-11 12:01:48.617 E/GraphicsJNI( 3475): VM won't let us allocate 232112 
bytes
05-11 12:01:48.617 E/dalvikvm-heap( 3475): 232112-byte external 
allocation too large for this process.
05-11 12:01:48.617 E/GraphicsJNI( 3475): VM won't let us allocate 232112 
bytes
05-11 12:01:48.680 E/dalvikvm-heap( 3475): 84480-byte external 
allocation too large for this process.
05-11 12:01:48.680 E/GraphicsJNI( 3475): VM won't let us allocate 84480 
bytes
05-11 12:01:48.680 D/skia    ( 3475): --- decoder-&gt;decode returned false
05-11 12:01:48.719 I/MonoDroid( 3475): UNHANDLED EXCEPTION: 
Java.Lang.OutOfMemoryError: Exception of type 
'Java.Lang.OutOfMemoryError' was thrown.


If i just print the Resource.Drawable.DefaultImageGridView, and scroll 
lot of, i've no problem.

I'm on android 2.1, with a harddevice (no avd)


Have an idea?

regards
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010163.html">[mono-android] Mono.Android has a PublicKeyToken in 4.2 instead	of it being null
</A></li>
	<LI>Next message: <A HREF="010171.html">[mono-android] GridView / listview, pics from sdcard,	problem MALLOC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10160">[ date ]</a>
              <a href="thread.html#10160">[ thread ]</a>
              <a href="subject.html#10160">[ subject ]</a>
              <a href="author.html#10160">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
