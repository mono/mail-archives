<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Monodroid 4.1.1 AsyncTask
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Monodroid%204.1.1%20AsyncTask&In-Reply-To=%3CCE3C87573DB3DD48AFE5E7A58AEB16CFAF5F922AD3%40SERVER.lowfamily.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010118.html">
   <LINK REL="Next"  HREF="010126.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Monodroid 4.1.1 AsyncTask</H1>
    <B>Joel Low</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Monodroid%204.1.1%20AsyncTask&In-Reply-To=%3CCE3C87573DB3DD48AFE5E7A58AEB16CFAF5F922AD3%40SERVER.lowfamily.local%3E"
       TITLE="[mono-android] Monodroid 4.1.1 AsyncTask">joel at joelsplace.sg
       </A><BR>
    <I>Thu May 10 01:26:23 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010118.html">[mono-android] New Book Available: Mobile Development with C#
</A></li>
        <LI>Next message: <A HREF="010126.html">[mono-android] Monodroid 4.1.1 AsyncTask
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10125">[ date ]</a>
              <a href="thread.html#10125">[ thread ]</a>
              <a href="subject.html#10125">[ subject ]</a>
              <a href="author.html#10125">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello list,

 

I've upgraded to 4.1.1 and there seems to have been a change in the
behaviour of the AsyncTask class where the ChangeType call does not properly
map the RunInBackground parameter argument and return value. I've getting an
InvalidCastException using AsyncTask if a non-trivial class is used as an
argument to RunInBackground, and another if the return type is also a
non-trivial class when exiting from RunInBackground.

 

I think the class is a bit ill-behaved since it is a Java class at its
heart, and marshalling types to/from the managed heap seem to be problematic
here (seems like for this to work properly). Is it because for this to
function properly both the parameter and return types have to implement
Java.Lang.Object and Java.Lang.IJavaObject? In that situation, my
RunInBackground was taking a string[] and a user-defined type as the return
value.

 

Any pointers?

 

Regards,

Joel

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120510/a63e0e30/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120510/a63e0e30/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 6547 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120510/a63e0e30/attachment.bin">http://lists.ximian.com/pipermail/monodroid/attachments/20120510/a63e0e30/attachment.bin</A>&gt;
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010118.html">[mono-android] New Book Available: Mobile Development with C#
</A></li>
	<LI>Next message: <A HREF="010126.html">[mono-android] Monodroid 4.1.1 AsyncTask
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10125">[ date ]</a>
              <a href="thread.html#10125">[ thread ]</a>
              <a href="subject.html#10125">[ subject ]</a>
              <a href="author.html#10125">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
