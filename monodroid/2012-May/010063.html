<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Adding custom resources to apk
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Adding%20custom%20resources%20to%20apk&In-Reply-To=%3CF7BF027B-2A58-4F9F-8494-66643EA9881A%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010060.html">
   <LINK REL="Next"  HREF="010091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Adding custom resources to apk</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Adding%20custom%20resources%20to%20apk&In-Reply-To=%3CF7BF027B-2A58-4F9F-8494-66643EA9881A%40xamarin.com%3E"
       TITLE="[mono-android] Adding custom resources to apk">jonp at xamarin.com
       </A><BR>
    <I>Sat May  5 15:38:50 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010060.html">[mono-android] Adding custom resources to apk
</A></li>
        <LI>Next message: <A HREF="010091.html">[mono-android] Adding custom resources to apk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10063">[ date ]</a>
              <a href="thread.html#10063">[ thread ]</a>
              <a href="subject.html#10063">[ subject ]</a>
              <a href="author.html#10063">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On May 5, 2012, at 5:59 AM, PVoLan wrote:
&gt;<i> In addition to .class files, this library contains two resource files
</I>&gt;<i> 
</I>&gt;<i> com\paypal\android\utils\data\data.bin
</I>&gt;<i> com\paypal\android\utils\data\locale.bin
</I>&gt;<i> 
</I>&gt;<i> these files are required to be built into destination .apk, but I cant get in thorough any monodevelop settings.
</I>
Are they supposed to be added as Android resources? Or are they supposed to be copied as-is (complete with directory structure) into the .apk?

If they need to be added as Android resources, I think you'll need to unzip the .jar, copy the .bin files into your Resources directory, add them to your project, and set their build action to AndroidResource.

If they need to be copied as-is into the .apk, I thought that setting the .jar's Build action to AndroidJavaLibrary would do that already. If it doesn't, please file a bug.

In the meantime, you could write a small app atop Ionic.Zip.dll which adds your directory structure to the .apk, and run it as part of a post-build step.

If you do this, you'll need to ensure that you run zipalign afterward. (Zipalign needs to be run after signing the .apk as well.)

&gt;<i> 2) Application starts successfully, but after that crashes with random exception (look's like adress pointers inside apk became broken after adding new files or something about).
</I>
My guess is that when you add files with aapt, it might be compressing data that was previously stored within the .apk. If the assemblies get compressed, things break.

 - Jon

</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010060.html">[mono-android] Adding custom resources to apk
</A></li>
	<LI>Next message: <A HREF="010091.html">[mono-android] Adding custom resources to apk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10063">[ date ]</a>
              <a href="thread.html#10063">[ thread ]</a>
              <a href="subject.html#10063">[ subject ]</a>
              <a href="author.html#10063">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
