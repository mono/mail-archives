<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] LinearLayout.AddView( View, ViewGroup.MarginLayoutParams ) fails
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20LinearLayout.AddView%28%20View%2C%0A%20ViewGroup.MarginLayoutParams%20%29%20fails&In-Reply-To=%3CCA%2BC5j5YGXegHoR9Zor_o1us59YRVzwT2PndPb5Rc0X_rov0r4g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010554.html">
   <LINK REL="Next"  HREF="010556.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] LinearLayout.AddView( View, ViewGroup.MarginLayoutParams ) fails</H1>
    <B>Goncalo Oliveira</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20LinearLayout.AddView%28%20View%2C%0A%20ViewGroup.MarginLayoutParams%20%29%20fails&In-Reply-To=%3CCA%2BC5j5YGXegHoR9Zor_o1us59YRVzwT2PndPb5Rc0X_rov0r4g%40mail.gmail.com%3E"
       TITLE="[mono-android] LinearLayout.AddView( View, ViewGroup.MarginLayoutParams ) fails">goncalo at minkan.net
       </A><BR>
    <I>Tue May 29 09:29:30 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010554.html">[mono-android] LinearLayout.AddView( View, ViewGroup.MarginLayoutParams ) fails
</A></li>
        <LI>Next message: <A HREF="010556.html">[mono-android] strange problem with file:// only on avd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10555">[ date ]</a>
              <a href="thread.html#10555">[ thread ]</a>
              <a href="subject.html#10555">[ subject ]</a>
              <a href="author.html#10555">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It works, seems like the problem was in using
LinearLayout.MarginLayoutParams. Changed to LinearLayout.LayoutParams and
it works, both setting the layout on the TextView and passing as parameter
to the AddView method.

Would expect LinearLayout.MarginLayoutParams to work, but this solves it.

Thank you for taking the time.
Cheers




On 29 May 2012 10:09, Tomasz Cielecki &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">tomasz at ostebaronen.dk</A>&gt; wrote:

&gt;<i> Oh and to add margins to a textview this works:
</I>&gt;<i>
</I>&gt;<i>            var l = FindViewById&lt;LinearLayout&gt;(Resource.Id.Layout);
</I>&gt;<i>
</I>&gt;<i>            var tv = new TextView(this) {Text = &quot;Bingabong&quot;};
</I>&gt;<i>
</I>&gt;<i>            var lp = new
</I>&gt;<i> LinearLayout.LayoutParams(ViewGroup.LayoutParams.FillParent,
</I>&gt;<i> ViewGroup.LayoutParams.WrapContent);
</I>&gt;<i>            lp.SetMargins(50,1,24,1);
</I>&gt;<i>
</I>&gt;<i>            tv.LayoutParameters = lp;
</I>&gt;<i>
</I>&gt;<i>            l.AddView(tv);
</I>&gt;<i>
</I>&gt;<i> Using the same sample from before...
</I>&gt;<i>
</I>&gt;<i> On Tue, May 29, 2012 at 11:00 AM, Tomasz Cielecki &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">tomasz at ostebaronen.dk</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; I just did a small test and successfully added margins to a
</I>&gt;<i> &gt; LinearLayout. I just used the default layout from a new Mono for
</I>&gt;<i> &gt; Android project and added an id (@+id/Layout) to the LinearLayout in
</I>&gt;<i> &gt; the Mail.axml file.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Then in the OnCreate method of the Activity I just added the following
</I>&gt;<i> code:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; LinearLayout l = FindViewById&lt;LinearLayout&gt;(Resource.Id.Layout);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; LinearLayout.MarginLayoutParams lp = (ViewGroup.MarginLayoutParams)
</I>&gt;<i> &gt; l.LayoutParameters;
</I>&gt;<i> &gt; lp.SetMargins(25, 25, 25, 25);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This works just fine.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Tue, May 29, 2012 at 10:21 AM, Goncalo Oliveira &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">goncalo at minkan.net</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt; Can't seem to set margins with code bellow. Only way I can get this to
</I>&gt;<i> work
</I>&gt;<i> &gt;&gt; with margins is to add it directly in the xml.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; LinearLayout view = FindViewById&lt;LinearLayout&gt;(
</I>&gt;<i> Resource.Id.taskDetailView
</I>&gt;<i> &gt;&gt; ); // vertical linear layout
</I>&gt;<i> &gt;&gt; TextView childView = new TextView( this );
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; childview.SetText( &quot;some text&quot; );
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; LinearLayout.MarginLayoutParams layoutParams = new
</I>&gt;<i> &gt;&gt; LinearLayout.MarginLayoutParams( ViewGroup.LayoutParams.FillParent,
</I>&gt;<i> &gt;&gt; ViewGroup.LayoutParams.WrapContent );
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; layoutParams.TopMargin = &lt;some pixel value... let's say 6&gt;
</I>&gt;<i> &gt;&gt; // also tried layoutParams.SetMargins( .... )
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; view.AddView( childView, layoutParams );
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; The xml declaration is pretty simple.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;         &lt;LinearLayout
</I>&gt;<i> &gt;&gt;             android:orientation=&quot;vertical&quot;
</I>&gt;<i> &gt;&gt;             android:minWidth=&quot;25px&quot;
</I>&gt;<i> &gt;&gt;             android:minHeight=&quot;25px&quot;
</I>&gt;<i> &gt;&gt;             android:id=&quot;@+id/taskDetailView&quot;
</I>&gt;<i> &gt;&gt;             android:layout_width=&quot;fill_parent&quot;
</I>&gt;<i> &gt;&gt;             android:layout_height=&quot;wrap_content&quot; /&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; There's no relevant trace in logcat
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I/ActivityManager(  196): [AppLaunch] Displayed
</I>&gt;<i> &gt;&gt; Frotcom.FMobile/fmobile.activities.TaskDetailsActivity: +484ms
</I>&gt;<i> &gt;&gt; D/ActivityManager(  196):
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> AP_PROF:AppLaunch_LaunchTime:Frotcom.FMobile/fmobile.activities.TaskDetailsActivity:484:
</I>&gt;<i> 448651969
</I>&gt;<i> &gt;&gt; I/SurfaceFlinger(  196): [SurfaceFlinger] statistic - FrameCount: 120,
</I>&gt;<i> &gt;&gt; Duration: 17477341us, fps: 6.866034
</I>&gt;<i> &gt;&gt; I/KeyguardUpdateMonitor(  196): DM_IsLocked, lockflag is false
</I>&gt;<i> &gt;&gt; D/dalvikvm(  196): GC_CONCURRENT freed 1797K, 43% free 6611K/11399K,
</I>&gt;<i> &gt;&gt; external 3983K/6031K, paused 14ms+17ms
</I>&gt;<i> &gt;&gt; D/OSFileSystem(  196): OSFileSystem::open fail :
</I>&gt;<i> &gt;&gt; filename==/sys/devices/system/cpu/cpu0/cpufreq/stats/time_in_state,
</I>&gt;<i> errno=2,
</I>&gt;<i> &gt;&gt; err=No such file or directory
</I>&gt;<i> &gt;&gt; D/WifiCommon(  196): [wlan0] Issue cmd = 'DRIVER RSSI-APPROX'
</I>&gt;<i> &gt;&gt; D/WifiCommon(  196): [wlan0] cmd = 'DRIVER RSSI-APPROX' ==&gt; failed.
</I>&gt;<i> (ret = 0
</I>&gt;<i> &gt;&gt; or reply='FAIL').
</I>&gt;<i> &gt;&gt; D/WifiCommon(  196): [wlan0] Issue cmd = 'DRIVER RSSI'
</I>&gt;<i> &gt;&gt; D/WifiStateTracker(  196): requestPolledInfo, newRssi=-66
</I>&gt;<i> &gt;&gt; D/WifiCommon(  196): [wlan0] Issue cmd = 'DRIVER LINKSPEED'
</I>&gt;<i> &gt;&gt; D/WarningMessage(  323): TimerTask: ReadCodeTask.run()
</I>&gt;<i> &gt;&gt; D/WarningMessage(  323): sendWarningMessage() called.
</I>&gt;<i> &gt;&gt; D/WarningMessage(  323): line content: 0
</I>&gt;<i> &gt;&gt; D/WarningMessage(  323): notify code is 0
</I>&gt;<i> &gt;&gt; D/WarningMessage(  323): getWarningMessage() called.
</I>&gt;<i> &gt;&gt; D/WifiCommon(  196): [wlan0] Issue cmd = 'DRIVER RSSI-APPROX'
</I>&gt;<i> &gt;&gt; D/WifiCommon(  196): [wlan0] cmd = 'DRIVER RSSI-APPROX' ==&gt; failed.
</I>&gt;<i> (ret = 0
</I>&gt;<i> &gt;&gt; or reply='FAIL').
</I>&gt;<i> &gt;&gt; D/WifiCommon(  196): [wlan0] Issue cmd = 'DRIVER RSSI'
</I>&gt;<i> &gt;&gt; D/WifiStateTracker(  196): requestPolledInfo, newRssi=-66
</I>&gt;<i> &gt;&gt; D/WifiCommon(  196): [wlan0] Issue cmd = 'DRIVER LINKSPEED'
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On 28 May 2012 19:14, Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jonp at xamarin.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; On May 28, 2012, at 12:29 PM, Goncalo Oliveira wrote:
</I>&gt;<i> &gt;&gt;&gt; &gt; This fails.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Can you elaborate? Presumably there's an exception in the Android Debug
</I>&gt;<i> &gt;&gt;&gt; Log (`adb logcat`); can you provide the full stack trace?
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Thanks,
</I>&gt;<i> &gt;&gt;&gt;  - Jon
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt; Monodroid mailing list
</I>&gt;<i> &gt;&gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; UNSUBSCRIBE INFORMATION:
</I>&gt;<i> &gt;&gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; --
</I>&gt;<i> &gt;&gt; Gon&#231;alo Oliveira
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Monodroid mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; UNSUBSCRIBE INFORMATION:
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Med Venlig Hilsen / With Best Regards
</I>&gt;<i> &gt; Tomasz Cielecki
</I>&gt;<i> &gt; <A HREF="http://ostebaronen.dk">http://ostebaronen.dk</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Med Venlig Hilsen / With Best Regards
</I>&gt;<i> Tomasz Cielecki
</I>&gt;<i> <A HREF="http://ostebaronen.dk">http://ostebaronen.dk</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>


-- 
Gon&#231;alo Oliveira
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120529/514529eb/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120529/514529eb/attachment-0001.html</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010554.html">[mono-android] LinearLayout.AddView( View, ViewGroup.MarginLayoutParams ) fails
</A></li>
	<LI>Next message: <A HREF="010556.html">[mono-android] strange problem with file:// only on avd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10555">[ date ]</a>
              <a href="thread.html#10555">[ thread ]</a>
              <a href="subject.html#10555">[ subject ]</a>
              <a href="author.html#10555">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
