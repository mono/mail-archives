<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] SQLite error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20SQLite%20error&In-Reply-To=%3C4FB9FD17.3080602%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010419.html">
   <LINK REL="Next"  HREF="010409.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] SQLite error</H1>
    <B>mdurli</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20SQLite%20error&In-Reply-To=%3C4FB9FD17.3080602%40gmail.com%3E"
       TITLE="[mono-android] SQLite error">mdurli at gmail.com
       </A><BR>
    <I>Mon May 21 08:30:42 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010419.html">[mono-android] SQLite error
</A></li>
        <LI>Next message: <A HREF="010409.html">[mono-android] SQLite error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10465">[ date ]</a>
              <a href="thread.html#10465">[ thread ]</a>
              <a href="subject.html#10465">[ subject ]</a>
              <a href="author.html#10465">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
  
    
  
  
    
    It shouldn't be null, but empty. 
    If I put the correct stateID in the query it returns a row and it
    correctly read and display it. 
    If I put a stateID that doesn't exists, it shouldn't return any row
    (right), and then sdr.Read() return false (right?) 
    But even if for any reason sdr were null, shouldn't sdr.Read be
    trapped in the try/catch block? 
    Instead pressing F10 to debug it just jumps to the end of the
    file...no trapping by try/catch 
      
      SqliteDataReader&#160;sdr&#160;=&#160;cmd.ExecuteReader();
    
      while&#160;(sdr.Read()) 
    
    
    
    
    
    Il 21/05/2012 10:19, ledz [via Mono for Android] ha scritto:
    
      but the datareader isn't null right? even if empty, the
        datareader Read method should just return false. 
      
      On 20 May 2012 22:40, mdurli &lt; [hidden email] &gt;
        wrote: 
        
          
             Hello, 
              
              I found the error, but still can't understand one thing.:
              I'm referring to the InternalNetworkData sample downloaded
              from wrox site, the code is below. 
              The error is that in the sample data created the row has
              stateID = 1 while when it searches for it stateID is set
              to 2 (don't ask me why,I wasn't even looking at it) and
              then of course the datareader is empty. 
              If you change the search stateID to 1 the sample obviously
              works. 
              
              But then, why, with the empty datareader, when I do 
              while&#160;(sdr.Read()) 
              the error is not trapped in the try/catch block? 
              
              Thanks! 
            
          
          using&#160;System;
using&#160;Android.App;
using&#160;Android.Content;
using&#160;Android.Runtime;
using&#160;Android.Views;
using&#160;Android.Widget;
using&#160;Android.OS;
using&#160;System.Data;
using&#160;System.IO;
using&#160;Mono.Data.Sqlite;
using&#160;Mono.Data.Tds;
//Note&#160;that&#160;the&#160;network&#160;connection&#160;for&#160;Sql&#160;Server&#160;may&#160;change&#160;in&#160;the&#160;future.&#160;&#160;
//&#160;&#160;Due&#160;to&#160;this,&#160;the&#160;code&#160;should&#160;always&#160;work,&#160;however,&#160;it&#160;may
//&#160;&#160;require&#160;a&#160;change&#160;to&#160;the&#160;connection&#160;string.
namespace&#160;InternalNetworkData
{
&#160;&#160;&#160;&#160;[Activity(Label&#160;=&#160;&quot;Data&#160;Activity&quot;,&#160;MainLauncher&#160;=&#160;true,&#160;Icon=&quot;@drawable/icon&quot;)]
&#160;&#160;&#160;&#160;public&#160;class&#160;Activity1&#160;:&#160;Activity
&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TextView&#160;tv;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;protected&#160;override&#160;void&#160;OnCreate(Bundle&#160;bundle)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;base.OnCreate(bundle);
 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//&#160;Set&#160;our&#160;view&#160;from&#160;the&#160;&quot;main&quot;&#160;layout&#160;resource
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SetContentView(Resource.Layout.main);
 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//&#160;Get&#160;our&#160;button&#160;from&#160;the&#160;layout&#160;resource,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//&#160;and&#160;attach&#160;an&#160;event&#160;to&#160;it
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Button&#160;DataBaseButton&#160;=&#160;FindViewById&lt;Button&gt;(Resource.Id.DataBaseButton);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DataBaseButton.Click&#160;+=&#160;new&#160;EventHandler(DataBaseButton_Click);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tv&#160;=&#160;FindViewById&lt;TextView&gt;(Resource.Id.Results);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Button&#160;CreateDataBaseButton&#160;=&#160;FindViewById&lt;Button&gt;(Resource.Id.CreateLocalDataBase);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CreateDataBaseButton.Click&#160;+=&#160;new&#160;EventHandler(CreateDataBaseButton_Click);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Button&#160;PullDataButton&#160;=&#160;FindViewById&lt;Button&gt;(Resource.Id.GetLocalDataBaseData);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PullDataButton.Click&#160;+=&#160;new&#160;EventHandler(PullDataButton_Click);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;void&#160;PullDataButton_Click(object&#160;sender,&#160;EventArgs &#160;e)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;DatabaseName&#160;=&#160;&quot;UserData.db3&quot;;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;documents&#160;=&#160;System.Environment.GetFolderPath(
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.Environment.SpecialFolder.Personal);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;db&#160;=&#160;Path.Combine(documents,&#160;DatabaseName);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var&#160;conn&#160;=&#160;new&#160;SqliteConnection(&quot;Data&#160;Source=&quot;&#160;+&#160;db);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var&#160;strSql&#160;=&#160;&quot;select&#160;Name&#160;from&#160;Customer&#160;where&#160;STATEID=@STATEID&quot;;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var&#160;cmd&#160;=&#160;new&#160;SqliteCommand(strSql,&#160;conn);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cmd.CommandType&#160;=&#160;CommandType.Text;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cmd.Parameters.Add(new&#160;SqliteParameter(&quot;@STATEID&quot;, 2));
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tv.Text&#160;=&#160;db;
 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;conn.Open();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SqliteDataReader&#160;sdr&#160;=&#160;cmd.ExecuteReader();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while&#160;(sdr.Read())
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tv.Text&#160;=&#160;Convert.ToString(sdr[&quot;Name&quot;]);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;catch&#160;(System.Exception&#160;sysExc)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tv.Text&#160;=&#160;sysExc.Message;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;finally
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;(conn.State&#160;!=&#160;ConnectionState.Closed)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;conn.Close();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;conn.Dispose() ;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;void&#160;CreateDataBaseButton_Click(object&#160;sender,&#160;EventArgs&#160;e)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;DatabaseName&#160;=&#160;&quot;UserData.db3&quot;;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;documents&#160;=&#160;System.Environment.GetFolderPath(
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.Environment.SpecialFolder.Personal);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;db&#160;=&#160;Path.Combine(documents,&#160;DatabaseName);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tv.Text&#160;=&#160;db;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;bool&#160;exists&#160;=&#160;File.Exists(db);&#160;&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;(!exists)&#160;&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SqliteConnection.CreateFile(db);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var&#160;conn&#160;=&#160;new&#160;SqliteConnection(&quot;Data&#160;Source=&quot;&#160;+&#160;db);&#160;&#160;&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var&#160;commands&#160;=&#160;new[]&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;DROP&#160;TABLE&#160;IF&#160;EXISTS&#160;TWITTERDATA&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;DROP&#160;TRIGGER&#160;IF&#160;EXISTS&#160;TWITTERDATA_INSERT&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;CREATE&#160;TABLE&#160;IF&#160;NOT&#160;EXISTS&#160;STATE&#160;(STATEID&#160;INT&#160;PRIMARY&#160;KEY,&#160;STATENAME&#160;VARCHAR(50))&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;CREATE&#160;TABLE&#160;IF&#160;NOT&#160;EXISTS&#160;CUSTOMER(CUSTOMERID&#160;BIGINT&#160;PRIMARY&#160;KEY,&#160;&quot;&#160;+
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;NAME&#160;VARCHAR(100),&#160;CONTACTNAME&#160;VARCHAR(100),&#160;DATEJOINED&#160;DATETIME,&#160;&quot;&#160;+
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;PHONE&#160;VARCHAR(25),&#160;ADDRESS&#160;VARCHAR(100),&#160;CITY&#160;VARCHAR(50),&#160;&quot;&#160;+
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;STATEID&#160;INT,&#160;ZIPCODE&#160;VARCHAR(25),&#160;DATEENTERED&#160;DATETIME,&#160;&quot;&#160;+
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;DATEUPDATED&#160;DATETIME,&#160;FOREIGN&#160;KEY(STATEID)&#160;REFERENCES&#160;STATE(STATEID))&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;CREATE&#160;TRIGGER&#160;IF&#160;NOT&#160;EXISTS&#160;CUSTOMER_INSERT&#160;INSERT&#160;ON&#160;CUSTOMER&#160;&quot;&#160;+
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;BEGIN&#160;UPDATE&#160;CUSTOMER&#160;SET&#160;DATEENTERED=DATE('now')&#160;&quot;&#160;+
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;WHERE&#160;CUSTOMERID=NEW.CUSTOMERID;&#160;END;&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;CREATE&#160;INDEX&#160;IF&#160;NOT&#160;EXISTS&#160;IDX_CUSTOMERNAME&#160;ON&#160;CUSTOMER&#160;(NAME)&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;CREATE&#160;INDEX&#160;IF&#160;NOT&#160;EXISTS&#160;IDX_STATEID&#160;ON&#160;CUSTOMER&#160;(STATEID)&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;CREATE&#160;INDEX&#160;IF&#160;NOT&#160;EXISTS&#160;IDX_DATEENTERED&#160;ON&#160;CUSTOMER&#160;(DATEENTERED)&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;INSERT&#160;INTO&#160;STATE&#160;(STATENAME)&#160;VALUES&#160;('TENNESSEE');&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;INSERT&#160;INTO&#160;STATE&#160;(STATENAME)&#160;VALUES&#160;('GEORGIA');&quot;};
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;foreach&#160;(var&#160;cmd&#160;in&#160;commands)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;using&#160;(var&#160;sqlitecmd&#160;=&#160;conn.CreateCommand())
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlitecmd.CommandText&#160;=&#160;cmd;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlitecmd.CommandType&#160;=&#160;CommandType.Text;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;conn.Open();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlitecmd.ExecuteNonQuery();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;conn.Close();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SqliteCommand&#160;sqlc&#160;=&#160;new&#160;SqliteCommand();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlc.Connection&#160;=&#160;conn;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;conn.Open();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;strSql&#160;=&#160;&quot;INSERT&#160;INTO&#160;CUSTOMER&#160;(NAME,&#160;&quot;&#160;+
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;CONTACTNAME,&#160;STATEID)&#160;VALUES&#160;&quot;&#160;+
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;(@NAME,&#160;@CONTACTNAME,&#160;@STATEID)&quot;;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlc.CommandText&#160;=&#160;strSql;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlc.CommandType&#160;=&#160;CommandType.Text;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlc.Parameters.Add(new&#160;SqliteParameter(&quot;@NAME&quot;,&#160;&quot;The&#160;Coca-Cola&#160;Company&quot;));
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlc.Parameters.Add(new&#160;SqliteParameter(&quot;@CONTACTNAME&quot;,&#160;&quot;John&#160;Johns&quot;));
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlc.Parameters.Add(new&#160;SqliteParameter(&quot;@STATEID&quot;, 1));
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlc. ExecuteNonQuery();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;(conn.State&#160;!=&#160;ConnectionState.Closed)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;conn.Close();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;conn.Dispose();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//tv.Text&#160;=&#160;&quot;Commands&#160;completed.&quot;;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;catch&#160;(System.Exception&#160;sysExc)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tv.Text&#160;=&#160;&quot;Exception:&#160;&quot;&#160;+&#160;sysExc.Message;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;void&#160;DataBaseButton_Click(object&#160;sender,&#160;EventArgs&#160;e)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.Data.SqlClient.SqlConnection&#160;sqlCn&#160;=&#160;new&#160;System.Data.SqlClient.SqlConnection();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.Data.SqlClient.SqlCommand&#160;sqlCm&#160;=&#160;new&#160;System.Data.SqlClient.SqlCommand();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.Data.SqlClient.SqlDataAdapter&#160;sqlDa&#160;=&#160;new&#160;System.Data.SqlClient.SqlDataAdapter();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DataTable&#160;dt&#160;=&#160;new&#160;DataTable();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;strSql&#160;=&#160;&quot;select&#160;*&#160;from&#160;Session&quot;;
 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;strCn&#160;=&#160;&quot;Server= mobiledev.scalabledevelopment.com ;Database=AnDevConTest;User&#160;ID=AnDevCon;Password=AnDevConPWD;Network&#160;Library=DBMSSOCN&quot;;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlCn.ConnectionString&#160;=&#160;strCn;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlCm.CommandText&#160;=&#160;strSql;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlCm.CommandType&#160;=&#160;CommandType.Text;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlCm.Connection&#160;=&#160;sqlCn;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlDa.SelectCommand&#160;=&#160;sqlCm;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlDa.Fill(dt);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tv.Text&#160;=&#160;&quot;Records&#160;returned:&#160;&quot;&#160;+&#160;dt.Rows.Count.ToString();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;catch&#160;(System.Exception&#160;sysExc)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Console.WriteLine(&quot;Exc:&#160;&quot;&#160;+&#160;sysExc.Message);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tv.Text&#160;=&#160;&quot;Exc:&#160;&quot;&#160;+&#160;sysExc.Message;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;finally
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;(sqlCn.State&#160;!=&#160;ConnectionState.Closed)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlCn.Close();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlCn.Dispose();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlCm.Dispose();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlDa.Dispose();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlCn&#160;=&#160;null;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlCm&#160;=&#160;null;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sqlDa&#160;=&#160;null;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;}
}
 

          
          
          
          
          
          
          
          
          Il 18/05/2012 15:42, ledz [via Mono for Android] ha scritto:
          
             The same code works here, tried on 3
              different devices; the only difference I can see offhand
              is the connection.CreateCommand instead of new
              Sqlitecommand(). You don't even have any errors on logcat? 
              
            
            
              
                 On 18 May 2012 14:02, mdurli &lt; [hidden
                      email] &gt; wrote: 
                   Tried on
                    a Motorola ET1 Tablet and on a Motorola Droid, both
                    with Android 2.3. 
                    
                    I tried other samples, and this code for example
                    works: 
                    string&#160;dbPath&#160;=&#160;Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal),&quot;items.db3&quot;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;bool&#160;exists&#160;=&#160;File.Exists(dbPath);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;(!exists)&#160;SqliteConnection.CreateFile(dbPath);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var&#160;connection&#160;=&#160;new&#160;SqliteConnection(&quot;Data&#160;Source=&quot;&#160;+&#160;dbPath);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;connection.Open();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;(!exists)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//&#160;This&#160;is&#160;the&#160;first&#160;time&#160;the&#160;app&#160;has&#160;run&#160;and/or&#160;that&#160;we&#160;need&#160;the&#160;DB.
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//&#160;Copy&#160;a&#160;&quot;template&quot;&#160;DB&#160;from&#160;your&#160;assets,&#160;or&#160;programmatically&#160;create&#160;one.
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var&#160;commands&#160;=&#160;new[]{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;CREATE&#160;TABLE&#160;[Items]&#160;(Key&#160;ntext,&#160;Value&#160;ntext);&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;INSERT&#160;INTO&#160;[Items]&#160;([Key],&#160;[Value])&#160;VALUES&#160;('sample',&#160;'text')&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;INSERT&#160;INTO&#160;[Items]&#160;([Key],&#160;[Value])&#160;VALUES&#160;('sample2',&#160;'text2')&quot;
&#160;&#160;&#160;&#160;};
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;foreach&#160;(var&#160;command&#160;in&#160;commands)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;using&#160;(var&#160;c&#160;=&#160;connection.CreateCommand())
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;c.CommandText&#160;=&#160;command;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;c.ExecuteNonQuery();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//&#160;use&#160;`connection`...
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//&#160;here,&#160;we'll&#160;just&#160;append&#160;the&#160;contents&#160;to&#160;a&#160;TextView
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;using&#160;(var&#160;contents&#160;=&#160;connection.CreateCommand())
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;contents.CommandText&#160;=&#160;&quot;SELECT&#160;[Key],&#160;[Value]&#160;from&#160;[Items]&quot;;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var&#160;r&#160;=&#160;contents.ExecuteReader();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while&#160;(r.Read())
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;textView1.Text&#160;+=&#160;string.Format(&quot;\n\tKey={0};&#160;Value={1}&quot;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;r[&quot;Key&quot;].ToString(),&#160;r[&quot;Value&quot;].ToString());
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;r.NextResult();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;connection.Close();


I can start from here now, but I'm still wondering what't wrong in the other code (and why it didn't trap the error but just exit the procedure when .Read()

Thanks,
Mattia




                    
                    
                    Il 18/05/2012 14:30, ledz [via Mono for Android] ha
                    scritto:
                    
                       On what real device did you test? 
                        
                      
                      
                        
                          On 18 May 2012 12:57,
                            mdurli &lt; [hidden email] &gt;
                            wrote: 
                            
                              Hello, 
                              
                              I tried both with emulator and with real
                              device. 
                              
                              Thanks, 
                              Mattia 
                              
                              
                              Il 18/05/2012 13:23, Wally McClure [via
                              Mono for Android] ha scritto:
                              
                                
                                   Mattia,
                                    
                                    
                                    I haven't tried this under 4.2,
                                      but when the book was written, the
                                      data readers did not work in the
                                      emulator under the 4.0x versions
                                      we tested with at the time, but
                                      worked in every physical device
                                      that we tested against. &#160;The joys
                                      of the emulator. 
                                    
                                    
                                  
                                  Wally 
                                    
                                    
                                      
                                        Date: Fri, 18 May 2012
                                        13:12:04 +0200 
                                      
                                       From: [hidden email] 
                                        To: [hidden email] 
                                      
                                      CC: [hidden email] 
                                      
                                        Subject: Re: [mono-android]
                                        SQLite error 
                                        
                                        Hello Wally, 
                                        
                                        thanks for the quick response. 
                                        
                                        
                                          
                                            
                                              
                                                On that specific
                                                  example, there should
                                                  be another button on
                                                  that form. &#160;IIRC, the
                                                  other button should
                                                  insert some data into
                                                  the table. &#160;When I get
                                                  down to my office,
                                                  I'll verify this.
                                              
                                            
                                          
                                        
                                        Yes there is a button and it
                                        completes the DB creation and
                                        sample data insertion with
                                        success, so that part works. 
                                        The problem is with the second
                                        button that should fetch the
                                        data with a datareader. 
                                        
                                        What I don't understand is why I
                                        can follow the debug until the
                                        &quot;while (sdr.Read())&quot; line, and
                                        then clicking F10 the debug
                                        jumps at the end of the file...
                                        without rising any error, even
                                        if it's in the try/catch block. 
                                        I tried both in emulator and in
                                        real device. 
                                        
                                        Debug should work, because there
                                        is a third button that connects
                                        to a SQLServer DB, that fails
                                        correctly during the connection
                                        in its try/catch block. 
                                        
                                        Thanks, 
                                        Mattia 
                                        
                                      
                                      
                                        
                                          
                                            
                                              
                                                You should be able
                                                  to create a DB and
                                                  store it in the assets
                                                  directory. &#160;When the
                                                  application is first
                                                  deployed and run, you
                                                  can copy the db file
                                                  out. &#160;I haven't done
                                                  this, but you &quot;should&quot;
                                                  be able to do this.
                                                  &#160;I'm a db guy at
                                                  heart, so sql commands
                                                  are easy to put
                                                  together for me, plus
                                                  I like to use them
                                                  when I update apps.
                                                Accessing the db
                                                  remotely is way more
                                                  complicated than we
                                                  are used to with VS.
                                                  &#160;You can use adb to
                                                  connect to the db, but
                                                  you have to have the
                                                  device. &#160;I'm sure that
                                                  there are higher level
                                                  tools that you can
                                                  use, but I am not
                                                  aware of them.
                                              
                                              
                                              
                                              Wally 
                                          
                                          
                                            
                                              &gt; Date: Fri, 18
                                                May 2012 03:35:23 -0700 
                                              
                                               &gt; From: [hidden
                                                  email] 
                                                &gt; To: [hidden
                                                  email] 
                                              
                                              
                                                 &gt; Subject:
                                                  [mono-android] SQLite
                                                  error 
                                                  &gt; 
                                                  &gt; Hello, 
                                                  &gt; 
                                                  &gt; I'm having this
                                                  problem with the
                                                  sample code of the
                                                  wrox book &quot;Pro Android 
                                                  &gt; programming with
                                                  Mono for Android&quot;,
                                                  InternalNetworkData
                                                  sample. 
                                                  &gt; First it creates
                                                  a DB and fills it with
                                                  data, with success,
                                                  then tries to 
                                                  &gt; read the data
                                                  with a
                                                  SqliteDataReader. 
                                                  &gt; I tried to debug
                                                  it and when it gets to
                                                  the line &quot;while
                                                  (sdr.Read())&quot; the 
                                                  &gt; debug line jumps
                                                  to the end of the
                                                  file, no errors, and
                                                  non processing, 
                                                  &gt; application stil
                                                  running, and I can
                                                  press the button to
                                                  get the data again. 
                                                  &gt; What's wrong?
                                                  with the code and with
                                                  my debug that can't
                                                  get the error. 
                                                  &gt; 
                                                  &gt; string
                                                  DatabaseName =
                                                  &quot;UserData.db3&quot;; 
                                                  &gt; string documents
                                                  =
                                                  System.Environment.GetFolderPath( 
                                                  &gt;
                                                  System.Environment.SpecialFolder.Personal); 
                                                  &gt; string db =
                                                  Path.Combine(documents,
                                                  DatabaseName); 
                                                  &gt; var conn = new
                                                  SqliteConnection(&quot;Data
                                                  Source=&quot; + db); 
                                                  &gt; var strSql =
                                                  &quot;select Name from
                                                  Customer where
                                                  STATEID=@STATEID&quot;; 
                                                  &gt; var cmd = new
                                                  SqliteCommand(strSql,
                                                  conn); 
                                                  &gt; cmd.CommandType =
                                                  CommandType.Text; 
                                                  &gt;
                                                  cmd.Parameters.Add(new
                                                  SqliteParameter(&quot;@STATEID&quot;,
                                                  2)); 
                                                  &gt; 
                                                  &gt; tv.Text = &quot;&quot;; 
                                                  &gt; 
                                                  &gt; try 
                                                  &gt; { 
                                                  &gt; conn.Open(); 
                                                  &gt; SqliteDataReader
                                                  sdr =
                                                  cmd.ExecuteReader(); 
                                                  &gt; while
                                                  (sdr.Read()) 
                                                  &gt; { 
                                                  &gt; tv.Text =
                                                  Convert.ToString(sdr[&quot;Name&quot;]); 
                                                  &gt; } 
                                                  &gt; } 
                                                  &gt; catch
                                                  (System.Exception
                                                  sysExc) 
                                                  &gt; { 
                                                  &gt; tv.Text =
                                                  sysExc.Message; 
                                                  &gt; } 
                                                  &gt; finally 
                                                  &gt; { 
                                                  &gt; if (conn.State !=
ConnectionState.Closed) 
                                                  &gt; { 
                                                  &gt; conn.Close(); 
                                                  &gt; } 
                                                  &gt; conn.Dispose(); 
                                                  &gt; 
                                                  &gt; } 
                                                  &gt; 
                                                  &gt; 
                                                  &gt; By the way, is
                                                  there a way with a
                                                  thirdy part software
                                                  or even with vs to 
                                                  &gt; create a sqlite
                                                  DB and deploy it with
                                                  the application? and
                                                  maybe even to 
                                                  &gt; access the sqlite
                                                  DBs in the connected
                                                  device? asking too
                                                  much? 
                                                  &gt; 
                                                  &gt; Thanks! 
                                                  &gt; Mattia 
                                                  &gt; 
                                                  &gt; -- 
                                                  &gt; View this message
                                                  in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898.html">http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898.html</A> 
                                                  &gt; Sent from the
                                                  Mono for Android
                                                  mailing list archive
                                                  at Nabble.com. 
                                                  &gt;
                                                  _______________________________________________ 
                                                  &gt; Monodroid mailing
                                                  list 
                                                
                                              
                                               &gt; [hidden
                                                  email] 
                                                &gt; 
                                                &gt; UNSUBSCRIBE
                                                INFORMATION: 
                                                &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A> 
                                              
                                            
                                          
                                        
                                      
                                    
                                  
                                
                                 
                                  _______________________________________________

                                  
                                  Monodroid mailing list 
                                  [hidden email]  
                                  
                                  UNSUBSCRIBE INFORMATION: 
                                  <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A> 
                                  
                                  
                                
                                
                                
                                  
                                    If you
                                      reply to this email, your message
                                      will be added to the discussion
                                      below: 
                                  
                                  <A HREF="http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898p5709904.html">http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898p5709904.html</A> 
                                
                                
                                  
                                    To unsubscribe from SQLite error, click here . 
                                    NAML  
                                
                              
                              
                               View this
                              message in context: Re: SQLite error 
                              
                                
                                  Sent from the Mono for Android
                                    mailing list archive  at
                                  Nabble.com. 
                                
                              
                              
_______________________________________________ 
                              Monodroid mailing list 
                              [hidden email] 
                              
                              UNSUBSCRIBE INFORMATION: 
                              <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A> 
                              
                            
                          
                          
                          
                          
                          
                        
                      
                      -- 
                      Gon&#231;alo Oliveira
                      
                        
                        _______________________________________________
                        
                        Monodroid mailing list 
                        [hidden

                          email]  
                        
                        UNSUBSCRIBE INFORMATION: 
                        <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A> 
                        
                        
                        
                      
                      
                        
                          If you reply to
                            this email, your message will be added to
                            the discussion below: 
                        
                        <A HREF="http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898p5709909.html">http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898p5709909.html</A> 
                      
                      
                        
                          To unsubscribe from SQLite error, click here . 
                          NAML  
                      
                    
                    
                       
                         View this message
                        in context: Re:

                          SQLite error 
                        Sent from the Mono
                          for Android mailing list archive  at
                        Nabble.com. 
                      
                    
                    
                    _______________________________________________ 
                    Monodroid mailing list 
                    [hidden
                      email] 
                    
                    UNSUBSCRIBE INFORMATION: 
                    <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A> 
                    
                  
                
                
                
                
                
                -- 
                Gon&#231;alo Oliveira 
                
                _______________________________________________ 
                Monodroid mailing list 
                [hidden
                  email]  
                
                UNSUBSCRIBE INFORMATION: 
                <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A> 
                
                
                 
            
            
              
                
                  If you reply to this
                    email, your message will be added to the discussion
                    below: 
                
              
              <A HREF="http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898p5709912.html">http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898p5709912.html</A> 
            
            
              
                To unsubscribe from SQLite error, click here . 
                NAML  
            
          
          
             
              
              View this message in context: Re:
                SQLite error 
              Sent from the Mono for
                Android mailing list archive  at Nabble.com. 
            
          
          
          _______________________________________________ 
          Monodroid mailing list 
          [hidden email] 
          
          UNSUBSCRIBE INFORMATION: 
          <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A> 
          
        
      
      
      
      
      
      -- 
      Gon&#231;alo Oliveira 
      
      _______________________________________________
      
      Monodroid mailing list
      
      [hidden email] 
      
      
      UNSUBSCRIBE INFORMATION:
      
      <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A> 
      
      
      
      
        If you reply to this email, your
          message will be added to the discussion below: 
        <A HREF="http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898p5709934.html">http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898p5709934.html</A> 
      
      
        To unsubscribe from SQLite error, click
          here . 
        NAML  
    
  



--
View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898p5709935.html">http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898p5709935.html</A>
Sent from the Mono for Android mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120521/b96db5d9/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120521/b96db5d9/attachment-0001.html</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010419.html">[mono-android] SQLite error
</A></li>
	<LI>Next message: <A HREF="010409.html">[mono-android] SQLite error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10465">[ date ]</a>
              <a href="thread.html#10465">[ thread ]</a>
              <a href="subject.html#10465">[ subject ]</a>
              <a href="author.html#10465">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
