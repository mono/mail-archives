<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] SQLite error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20SQLite%20error&In-Reply-To=%3CCOL122-W4358F4B16AC65B22D8CB17AE1E0%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010384.html">
   <LINK REL="Next"  HREF="010388.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] SQLite error</H1>
    <B>Wally McClure</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20SQLite%20error&In-Reply-To=%3CCOL122-W4358F4B16AC65B22D8CB17AE1E0%40phx.gbl%3E"
       TITLE="[mono-android] SQLite error">theevilprogrammer at hotmail.com
       </A><BR>
    <I>Fri May 18 11:23:15 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010384.html">[mono-android] SQLite error
</A></li>
        <LI>Next message: <A HREF="010388.html">[mono-android] SQLite error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10385">[ date ]</a>
              <a href="thread.html#10385">[ thread ]</a>
              <a href="subject.html#10385">[ subject ]</a>
              <a href="author.html#10385">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Mattia,
I haven't tried this under 4.2, but when the book was written, the data readers did not work in the emulator under the 4.0x versions we tested with at the time, but worked in every physical device that we tested against.  The joys of the emulator.
Wally

Date: Fri, 18 May 2012 13:12:04 +0200
From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mdurli at gmail.com</A>
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">theevilprogrammer at hotmail.com</A>
CC: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>
Subject: Re: [mono-android] SQLite error


  
    
  
  
    Hello Wally,

    

    thanks for the quick response. 

    

    
      
        
          
            On that specific example, there should be another button
              on that form.  IIRC, the other button should insert some
              data into the table.  When I get down to my office, I'll
              verify this.
          
        
      
    
    Yes there is a button and it completes the DB creation and sample
    data insertion with success, so that part works.

    The problem is with the second button that should fetch the data
    with a datareader.

    

    What I don't understand is why I can follow the debug until the
    &quot;while (sdr.Read())&quot; line, and then clicking F10 the debug jumps at
    the end of the file... without rising any error, even if it's in the
    try/catch block.

    I tried both in emulator and in real device.

    

    Debug should work, because there is a third button that connects to
    a SQLServer DB, that fails correctly during the connection in its
    try/catch block.

    

    Thanks,

    Mattia

    

    
      
        
          
            You should be able to create a DB and store it in the
              assets directory.  When the application is first deployed
              and run, you can copy the db file out.  I haven't done
              this, but you &quot;should&quot; be able to do this.  I'm a db guy
              at heart, so sql commands are easy to put together for me,
              plus I like to use them when I update apps.
            Accessing the db remotely is way more complicated than
              we are used to with VS.  You can use adb to connect to the
              db, but you have to have the device.  I'm sure that there
              are higher level tools that you can use, but I am not
              aware of them.
          
          

          
          Wally
        

          &gt; Date: Fri, 18 May 2012 03:35:23 -0700

            &gt; From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mdurli at gmail.com</A>

            &gt; To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>

            &gt; Subject: [mono-android] SQLite error

            &gt; 

            &gt; Hello,

            &gt; 

            &gt; I'm having this problem with the sample code of the
            wrox book &quot;Pro Android

            &gt; programming with Mono for Android&quot;, InternalNetworkData
            sample.

            &gt; First it creates a DB and fills it with data, with
            success, then tries to

            &gt; read the data with a SqliteDataReader.

            &gt; I tried to debug it and when it gets to the line &quot;while
            (sdr.Read())&quot; the

            &gt; debug line jumps to the end of the file, no errors, and
            non processing,

            &gt; application stil running, and I can press the button to
            get the data again.

            &gt; What's wrong? with the code and with my debug that
            can't get the error.

            &gt; 

            &gt; string DatabaseName = &quot;UserData.db3&quot;;

            &gt; string documents = System.Environment.GetFolderPath(

            &gt; System.Environment.SpecialFolder.Personal);

            &gt; string db = Path.Combine(documents, DatabaseName);

            &gt; var conn = new SqliteConnection(&quot;Data Source=&quot; + db);

            &gt; var strSql = &quot;select Name from Customer where
            STATEID=@STATEID&quot;;

            &gt; var cmd = new SqliteCommand(strSql, conn);

            &gt; cmd.CommandType = CommandType.Text;

            &gt; cmd.Parameters.Add(new SqliteParameter(&quot;@STATEID&quot;, 2));

            &gt; 

            &gt; tv.Text = &quot;&quot;;

            &gt; 

            &gt; try

            &gt; {

            &gt; conn.Open();

            &gt; SqliteDataReader sdr = cmd.ExecuteReader();

            &gt; while (sdr.Read())

            &gt; {

            &gt; tv.Text = Convert.ToString(sdr[&quot;Name&quot;]);

            &gt; }

            &gt; }

            &gt; catch (System.Exception sysExc)

            &gt; {

            &gt; tv.Text = sysExc.Message;

            &gt; }

            &gt; finally

            &gt; {

            &gt; if (conn.State != ConnectionState.Closed)

            &gt; {

            &gt; conn.Close();

            &gt; }

            &gt; conn.Dispose();

            &gt; 

            &gt; }

            &gt; 

            &gt; 

            &gt; By the way, is there a way with a thirdy part software
            or even with vs to

            &gt; create a sqlite DB and deploy it with the application?
            and maybe even to

            &gt; access the sqlite DBs in the connected device? asking
            too much?

            &gt; 

            &gt; Thanks!

            &gt; Mattia

            &gt; 

            &gt; --

            &gt; View this message in context:
<A HREF="http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898.html">http://mono-for-android.1047100.n5.nabble.com/SQLite-error-tp5709898.html</A>

            &gt; Sent from the Mono for Android mailing list archive at
            Nabble.com.

            &gt; _______________________________________________

            &gt; Monodroid mailing list

            &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>

            &gt; 

            &gt; UNSUBSCRIBE INFORMATION:

            &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>

          
        
      
     		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120518/5b53c0c1/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120518/5b53c0c1/attachment-0001.html</A>&gt;
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010384.html">[mono-android] SQLite error
</A></li>
	<LI>Next message: <A HREF="010388.html">[mono-android] SQLite error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10385">[ date ]</a>
              <a href="thread.html#10385">[ thread ]</a>
              <a href="subject.html#10385">[ subject ]</a>
              <a href="author.html#10385">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
