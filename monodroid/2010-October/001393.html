<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] Multiple thread pool threads cause VM crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Multiple%20thread%20pool%20threads%20cause%20VM%20crash&In-Reply-To=AANLkTin51o5CR-p3F5WGsFjFGc0c1njvmL8zsQrp%2B2m7%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001363.html">
   <LINK REL="Next"  HREF="001482.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] Multiple thread pool threads cause VM crash</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Multiple%20thread%20pool%20threads%20cause%20VM%20crash&In-Reply-To=AANLkTin51o5CR-p3F5WGsFjFGc0c1njvmL8zsQrp%2B2m7%40mail.gmail.com"
       TITLE="[Monodroid] Multiple thread pool threads cause VM crash">jpryor at novell.com
       </A><BR>
    <I>Thu Oct 14 16:54:08 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001363.html">[Monodroid] Multiple thread pool threads cause VM crash
</A></li>
        <LI>Next message: <A HREF="001482.html">[Monodroid] Multiple thread pool threads cause VM crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1393">[ date ]</a>
              <a href="thread.html#1393">[ thread ]</a>
              <a href="subject.html#1393">[ subject ]</a>
              <a href="author.html#1393">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2010-10-14 at 08:49 -0700, Koushik Dutta wrote:
&gt;<i> I've seen this before. If you use a JVM object on a CLR created thread
</I>&gt;<i> (as you are with RunOnUIThread, which calls android.os.Handler I
</I>&gt;<i> imagine), you need to manually detach the JVM from the thread prior to
</I>&gt;<i> it exiting. Ie, jvmInstance.DetatchCurrentThread. If the thread exits
</I>&gt;<i> without detaching from the JVM, Dalvik will exit.
</I>
This has been fixed for the next release.
&gt;<i> 
</I>&gt;<i> I'm not sure how to do this in MonoDroid though. Do we have access to
</I>&gt;<i> the JNI classes JNIEnv and JavaVM?
</I>
Not at this time.  We'll probably need to add such support (or some
limited subset thereof) when we support generating bindings to
arbitrary .jar files (as the bindings will obviously need access to JNI
invocation methods), but that will be a post-1.0 feature.

 - Jon


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001363.html">[Monodroid] Multiple thread pool threads cause VM crash
</A></li>
	<LI>Next message: <A HREF="001482.html">[Monodroid] Multiple thread pool threads cause VM crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1393">[ date ]</a>
              <a href="thread.html#1393">[ thread ]</a>
              <a href="subject.html#1393">[ subject ]</a>
              <a href="author.html#1393">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
