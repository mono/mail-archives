<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] Custom java splash screen
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Custom%20java%20splash%20screen&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001490.html">
   <LINK REL="Next"  HREF="001493.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] Custom java splash screen</H1>
    <B>bryan costanich</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Custom%20java%20splash%20screen&In-Reply-To="
       TITLE="[Monodroid] Custom java splash screen">b at wowzer.net
       </A><BR>
    <I>Wed Oct 27 15:59:04 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001490.html">[Monodroid] RunOnUiThread broken again :'(
</A></li>
        <LI>Next message: <A HREF="001493.html">[Monodroid] Google TV
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1487">[ date ]</a>
              <a href="thread.html#1487">[ thread ]</a>
              <a href="subject.html#1487">[ subject ]</a>
              <a href="author.html#1487">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey all,

With the help of JonP, I got an application working with a custom java splash screen that then launches the main MDr activity. If anyone wants the working sample project, I can send it along. Just e-mail me. In any case, here are the steps to get it to work:


 1.  create a new mdroid project called Test_JavaSourceSplashScreen (you can name it whatever you want really, but the source code in this write up refers to that name).
 2.  add a file called SplashScreenActivity.java and mark it as a AndroidJavaSource in the build action. Put something like this in there:

package test_JavaSourceSplashScreen;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class SplashScreenActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.splash);
        /** set time to splash out */
        final int welcomeScreenDisplay = 3000;
        /** create a thread to show splash up to splash time */
        Thread welcomeThread = new Thread() {

            int wait = 0;

            @Override
            public void run() {
                try {
                    super.run();
                    /**
                     * use while to get the splash time. Use sleep() to increase
                     * the wait variable for every 100L.
                     */
                    while (wait &lt; welcomeScreenDisplay) {
                        sleep(100);
                        wait += 100;
                    }
                } catch (Exception e) {
                    System.out.println(&quot;EXc=&quot; + e);
                } finally {
                    /**
                     * Called after splash times up. Do some action after splash
                     * times up. Here we moved to another main activity class
                     */
                    startActivity(new Intent(SplashScreenActivity.this, __Proxy__Activity1.class));
                   finish();
                }
            }
        };
        welcomeThread.start();

    }
}

The purple line above is where we actually launch our MDr activity. You can see that it's classname is __Proxy__Activity1 because that's the java-visible proxy class that actually creates our Activity1 class.

3. add an Acitivty node to the Application node in the /properties/manifest.xml file that specifies your java activity as a main launcher activity:
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns:android=&quot;<A HREF="http://schemas.android.com/apk/res/android&quot;">http://schemas.android.com/apk/res/android&quot;</A> package=&quot;Test_JavaSourceSplashScreen.Test_JavaSourceSplashScreen&quot; android:versionCode=&quot;1&quot; android:versionName=&quot;1.0&quot;&gt;
  &lt;application android:label=&quot;Test_JavaSourceSplashScreen&quot;&gt;
   &lt;!-- this is our splash screen built in java --&gt;
   &lt;activity android:name=&quot;test_JavaSourceSplashScreen.SplashScreenActivity&quot; android:label=&quot;Java Splash Test&quot;&gt;
     &lt;intent-filter&gt;
       &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
       &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
     &lt;/intent-filter&gt;
   &lt;/activity&gt;
  &lt;/application&gt;
  &lt;uses-sdk android:minSdkVersion=&quot;4&quot; /&gt;

&lt;/manifest&gt;

4. run your application. You'll notice the first screen that comes up is the java splash screen. In this case, there's nothing in it except a title bar because I'm not loading a layout (Java R files aren't created yet during the build process, so you can't load resources, a bug has been filed to add that, at the urging of jonp), and also, I'm too lazy to build a java layout by hand (and coding in java in VS with no intellisense, syntax highlighting, etc., is a pain).

Couple notes:

 1.  this is likely to change in p7 when proxies go away, so I'm just throwing this out there for those that need to get it working now for whatever reason. I'm sure the general premise will stay the same.
 2.  right now, the only way to get a callable proxy from an MDr activity is by declaring it a main launcher activity, the net effect of this is that you'll get an icon on your phoen for both the java splash screen activity, and the mdr main activity. Again, this should change in p7
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20101027/1a4c6db0/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20101027/1a4c6db0/attachment.html</A> 
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001490.html">[Monodroid] RunOnUiThread broken again :'(
</A></li>
	<LI>Next message: <A HREF="001493.html">[Monodroid] Google TV
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1487">[ date ]</a>
              <a href="thread.html#1487">[ thread ]</a>
              <a href="subject.html#1487">[ subject ]</a>
              <a href="author.html#1487">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
