<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;10pt;<br>
font-family:Tahoma<br>
}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;<br>
Wow,&nbsp;that&nbsp;was&nbsp;a&nbsp;firehose&nbsp;of&nbsp;awesomeness.&amp;nbsp;&nbsp;Thanks&nbsp;Jon&nbsp;and&nbsp;Chris!&lt;br&gt;&lt;br&gt;BTW,&nbsp;I&nbsp;would&nbsp;have&nbsp;posted&nbsp;the&nbsp;link,&nbsp;but&nbsp;was&nbsp;unsure&nbsp;how&nbsp;&quot;public&quot;&nbsp;it&nbsp;was.&amp;nbsp;&nbsp;&lt;br&gt;&lt;br&gt;Wally&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;div&nbsp;id=&quot;SkyDrivePlaceholder&quot;&gt;&lt;/div&gt;&lt;hr&nbsp;id=&quot;stopSpelling&quot;&gt;From:&nbsp;chrisntr@gmail.com&lt;br&gt;Date:&nbsp;Wed,&nbsp;4&nbsp;Jan&nbsp;2012&nbsp;22:57:01&nbsp;-0500&lt;br&gt;To:&nbsp;monodroid@lists.ximian.com&lt;br&gt;Subject:&nbsp;Re:&nbsp;[mono-android]&nbsp;drag-drop&nbsp;listener&lt;br&gt;&lt;br&gt;For&nbsp;the&nbsp;benefit&nbsp;of&nbsp;everyone&nbsp;else,&nbsp;I&nbsp;had&nbsp;recently&nbsp;ported&nbsp;the&nbsp;Drag&nbsp;and&nbsp;Drop&nbsp;sample&nbsp;into&nbsp;Mono&nbsp;for&nbsp;Android&nbsp;(just&nbsp;hadn't&nbsp;had&nbsp;time&nbsp;to&nbsp;put&nbsp;it&nbsp;up&nbsp;online&nbsp;anywhere),&nbsp;you&nbsp;can&nbsp;download&nbsp;the&nbsp;example&nbsp;here:&amp;nbsp;&lt;a&nbsp;href=&quot;http://dl.dropbox.com/u/90453/DragAndDrop-AndroidExample.zip&quot;&nbsp;target=&quot;_blank&quot;&gt;http://dl.dropbox.com/u/90453/DragAndDrop-AndroidExample.zip&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;Whilst&nbsp;Jon&nbsp;makes&nbsp;some&nbsp;good&nbsp;point,&nbsp;there&nbsp;is&nbsp;a&nbsp;&quot;Drag&quot;&nbsp;event&nbsp;for&nbsp;the&nbsp;OnDragListener&nbsp;so&nbsp;you&nbsp;don't&nbsp;have&nbsp;to&nbsp;implement&nbsp;it&nbsp;yourself&nbsp;:)&nbsp;Much&nbsp;easier!&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;hope&nbsp;this&nbsp;helps,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
ChrisNTR&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;ecxgmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Jan&nbsp;4,&nbsp;2012&nbsp;at&nbsp;9:49&nbsp;PM,&nbsp;Jonathan&nbsp;Pryor&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:jonp@xamarin.com&quot;&gt;jonp@xamarin.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;ecxgmail_quote&quot;&nbsp;style=&quot;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;ecxim&quot;&gt;On&nbsp;Jan&nbsp;4,&nbsp;2012,&nbsp;at&nbsp;9:06&nbsp;PM,&nbsp;Wally&nbsp;McClure&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Thanks.&nbsp;&amp;nbsp;Christntr&nbsp;got&nbsp;me&nbsp;set&nbsp;on&nbsp;this.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;For&nbsp;the&nbsp;benefit&nbsp;of&nbsp;everyone&nbsp;else...&nbsp;;-)&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;ecxim&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;The&nbsp;problem&nbsp;is&nbsp;that&nbsp;nothing&nbsp;in&nbsp;myDragListener&nbsp;seems&nbsp;to&nbsp;fire.&nbsp;&amp;nbsp;I&nbsp;think&nbsp;the&nbsp;problem&nbsp;is&nbsp;when&nbsp;I&nbsp;instantiate&nbsp;the&nbsp;class,&nbsp;I&nbsp;am&nbsp;handing&nbsp;in&nbsp;the&nbsp;incorrect&nbsp;handle.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;protected&nbsp;class&nbsp;myDragEventListener&nbsp;:&nbsp;View.IOnDragListener&lt;br&gt;<br>
&lt;br&gt;<br>
Unless&nbsp;you're&nbsp;me&nbsp;[0],&nbsp;always,&nbsp;_always_,&nbsp;ALWAYS&nbsp;inherit&nbsp;from&nbsp;Java.Lang.Object&nbsp;when&nbsp;implementing&nbsp;an&nbsp;Android&nbsp;interface.&lt;br&gt;<br>
&lt;br&gt;<br>
Here's&nbsp;why:&nbsp;the&nbsp;IJavaObject.Handle&nbsp;property&nbsp;is&nbsp;the&nbsp;JNI&nbsp;handle&nbsp;of&nbsp;the&nbsp;Java-side&nbsp;object&nbsp;to&nbsp;pass&nbsp;as&nbsp;a&nbsp;parameter.&nbsp;This&nbsp;thus&nbsp;requires&nbsp;that&nbsp;you&nbsp;have&nbsp;a&nbsp;Java-side&nbsp;object&nbsp;to&nbsp;provide&nbsp;(and&nbsp;is&nbsp;why&nbsp;any&nbsp;IJavaObject.Handle&nbsp;implementation&nbsp;which&nbsp;throws&nbsp;an&nbsp;exception&nbsp;or&nbsp;returns&nbsp;IntPtr.Zero&nbsp;is&nbsp;broken).&nbsp;Subclassing&nbsp;Java.Lang.Object&nbsp;handles&nbsp;creating&nbsp;the&nbsp;Java-side&nbsp;instance&nbsp;automatically.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
Furthermore,&nbsp;the&nbsp;associated&nbsp;Java&nbsp;object&nbsp;needs&nbsp;to&nbsp;be&nbsp;&quot;correct.&quot;&nbsp;If&nbsp;you're&nbsp;implementing&nbsp;an&nbsp;interface&nbsp;(as&nbsp;`myDragEventListener`&nbsp;does),&nbsp;and&nbsp;passing&nbsp;an&nbsp;instance&nbsp;of&nbsp;that&nbsp;type&nbsp;to&nbsp;a&nbsp;Java&nbsp;method&nbsp;(your&nbsp;previous&nbsp;`iv.SetOnDragListener()`&nbsp;call),&nbsp;then&nbsp;IJavaObject.Handle&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;obtain&nbsp;the&nbsp;Java&nbsp;instance&nbsp;to&nbsp;use,&nbsp;and&nbsp;_that_&nbsp;instance&nbsp;will&nbsp;be&nbsp;passed&nbsp;to&nbsp;the&nbsp;Java-side&nbsp;setOnDragListener()&nbsp;method.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
That&nbsp;Java-side&nbsp;instance&nbsp;had&nbsp;better&nbsp;implement&nbsp;the&nbsp;Java&nbsp;View.OnDragListener&nbsp;interface.&nbsp;If&nbsp;it&nbsp;doesn't...anything&nbsp;could&nbsp;happen.&nbsp;(ClassCastExceptions,&nbsp;aborts,&nbsp;corruption...)&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;your&nbsp;case,&nbsp;you're&nbsp;doing:&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;ecxim&quot;&gt;&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;IntPtr&nbsp;IJavaObject.Handle&nbsp;{&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;get&nbsp;{return&nbsp;_c.Handle;}&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;where&nbsp;`_c`&nbsp;is&nbsp;a&nbsp;Context&nbsp;instance.&nbsp;Unless&nbsp;`_c`&nbsp;is&nbsp;your&nbsp;Activity&nbsp;_and_&nbsp;your&nbsp;Activity&nbsp;is&nbsp;also&nbsp;implementing&nbsp;View.IOnDragListener,&nbsp;you'll&nbsp;be&nbsp;providing&nbsp;a&nbsp;Java&nbsp;object&nbsp;which&nbsp;does&nbsp;_not_&nbsp;implement&nbsp;the&nbsp;Java&nbsp;VIew.OnDragListener&nbsp;interface.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
This&nbsp;is,&nbsp;suffice&nbsp;it&nbsp;to&nbsp;say,&nbsp;Bad™.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;instead&nbsp;subclass&nbsp;Java.Lang.Object&nbsp;(as&nbsp;you&nbsp;should!),&nbsp;an&nbsp;Android&nbsp;Callable&nbsp;Wrapper&nbsp;(ACW)&nbsp;will&nbsp;be&nbsp;generated,&nbsp;which&nbsp;will&nbsp;implement&nbsp;the&nbsp;Java-side&nbsp;interfaces&nbsp;which&nbsp;are&nbsp;present&nbsp;in&nbsp;your&nbsp;subclass.&nbsp;The&nbsp;ACW&nbsp;will&nbsp;be&nbsp;created&nbsp;in&nbsp;the&nbsp;Java.Lang.Object&nbsp;constructor,&nbsp;thus&nbsp;ensuring&nbsp;that&nbsp;the&nbsp;Handle&nbsp;property&nbsp;is&nbsp;mapped&nbsp;to&nbsp;an&nbsp;appropriately&nbsp;typed&nbsp;Java&nbsp;instance.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
Finally,&nbsp;there's&nbsp;the&nbsp;GC&nbsp;problem.&nbsp;Java.Lang.Object&nbsp;has&nbsp;support&nbsp;for&nbsp;cross-VM&nbsp;object&nbsp;references.&nbsp;If&nbsp;you&nbsp;implement&nbsp;IJavaObject&nbsp;yourself,&nbsp;your&nbsp;class&nbsp;won't,&nbsp;and&nbsp;you'll&nbsp;need&nbsp;to&nbsp;(somehow)&nbsp;ensure&nbsp;that&nbsp;your&nbsp;Java&nbsp;object&nbsp;is&nbsp;eventually&nbsp;freed.&nbsp;Worse,&nbsp;you'll&nbsp;need&nbsp;to&nbsp;figure&nbsp;out&nbsp;some&nbsp;way&nbsp;to&nbsp;keep&nbsp;the&nbsp;managed&nbsp;instance&nbsp;from&nbsp;being&nbsp;GC'd&nbsp;as&nbsp;long&nbsp;as&nbsp;the&nbsp;Java&nbsp;object&nbsp;is&nbsp;alive.&nbsp;Don't&nbsp;go&nbsp;there,&nbsp;just&nbsp;subclass&nbsp;Java.Lang.Object.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
&amp;nbsp;-&nbsp;Jon&lt;br&gt;<br>
&lt;br&gt;<br>
[0]&nbsp;...and&nbsp;I&nbsp;would&nbsp;avoid&nbsp;implementing&nbsp;IJavaObject&nbsp;manually&nbsp;unless&nbsp;there&nbsp;was&nbsp;absolutely&nbsp;no&nbsp;other&nbsp;alternative.&nbsp;Please,&nbsp;just&nbsp;don't.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;ecxHOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Monodroid&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Monodroid@lists.ximian.com&quot;&gt;Monodroid@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
UNSUBSCRIBE&nbsp;INFORMATION:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/monodroid&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/monodroid&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;ChrisNTR&lt;br&gt;Microsoft&nbsp;ASPInsider&lt;br&gt;&lt;a&nbsp;href=&quot;http://weblogs.asp.net/chrishardy&quot;&nbsp;target=&quot;_blank&quot;&gt;http://weblogs.asp.net/chrishardy&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://twitter.com/chrisntr&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twitter.com/chrisntr&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________<br>
Monodroid&nbsp;mailing&nbsp;list<br>
Monodroid@lists.ximian.com<br>
<br>
UNSUBSCRIBE&nbsp;INFORMATION:<br>
http://lists.ximian.com/mailman/listinfo/monodroid&lt;/div&gt;&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
