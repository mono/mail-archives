<tt>
Hi&nbsp;Jon&lt;br&gt;&lt;br&gt;Thanks&nbsp;again&nbsp;for&nbsp;your&nbsp;reply.&lt;br&gt;&lt;br&gt;&gt;All&nbsp;data&nbsp;will&nbsp;always&nbsp;be&nbsp;out&nbsp;of&nbsp;date&nbsp;to&nbsp;some&nbsp;degree.&nbsp;(Consider:&nbsp;user&nbsp;<br>
launches&nbsp;app,&nbsp;sleeps&nbsp;the&nbsp;device,&nbsp;returns&nbsp;an&nbsp;hour&nbsp;later.&nbsp;Will&nbsp;your&nbsp;&gt;data&nbsp;<br>
be&nbsp;updated?&nbsp;Should&nbsp;it&nbsp;be?)&nbsp;The&nbsp;question&nbsp;is,&nbsp;what&nbsp;is&nbsp;a&nbsp;reasonable&nbsp;<br>
boundary&nbsp;for&nbsp;caching.&nbsp;You&nbsp;can&nbsp;always&nbsp;provide&nbsp;an&nbsp;explicit&nbsp;&gt;Refresh&nbsp;command<br>
&nbsp;if&nbsp;the&nbsp;cached&nbsp;data&nbsp;is&nbsp;&quot;too&nbsp;old.&quot;&lt;br&gt;&lt;br&gt;Sorry&nbsp;I&nbsp;should&nbsp;have&nbsp;worded&nbsp;this&nbsp;better.&nbsp;The&nbsp;solution&nbsp;that&nbsp;I&nbsp;have&nbsp;implemented&nbsp;is&nbsp;exactly&nbsp;as&nbsp;you&nbsp;have&nbsp;described.&lt;br&gt;&lt;br&gt;For&nbsp;the&nbsp;data&nbsp;caching&nbsp;this&nbsp;application&nbsp;could&nbsp;very&nbsp;much&nbsp;make&nbsp;use&nbsp;of&nbsp;caching&nbsp;business&nbsp;objects.&nbsp;I&nbsp;am&nbsp;already&nbsp;using&nbsp;the&nbsp;ImageLoader&nbsp;cache&nbsp;for&nbsp;images&nbsp;which&nbsp;caches&nbsp;a&nbsp;maximum&nbsp;of&nbsp;50&nbsp;images&nbsp;in&nbsp;memory&nbsp;at&nbsp;any&nbsp;one&nbsp;time.&lt;br&gt;<br>
&lt;br&gt;The&nbsp;data&nbsp;in&nbsp;this&nbsp;app&nbsp;is&nbsp;grouped&nbsp;by&nbsp;days.&nbsp;At&nbsp;any&nbsp;one&nbsp;time&nbsp;the&nbsp;user&nbsp;will&nbsp;only&nbsp;be&nbsp;viewing&nbsp;data&nbsp;for&nbsp;a&nbsp;selected&nbsp;day.&nbsp;How&nbsp;might&nbsp;I/should&nbsp;I&nbsp;go&nbsp;about&nbsp;caching&nbsp;the&nbsp;business&nbsp;objects&nbsp;in&nbsp;terms&nbsp;of&nbsp;limiting&nbsp;the&nbsp;amount&nbsp;of&nbsp;objects&nbsp;in&nbsp;memory&nbsp;at&nbsp;any&nbsp;one&nbsp;time&nbsp;to&nbsp;limit&nbsp;the&nbsp;amount&nbsp;of&nbsp;memory&nbsp;used?&nbsp;Do&nbsp;business&nbsp;objects&nbsp;take&nbsp;up&nbsp;enough&nbsp;memory&nbsp;to&nbsp;even&nbsp;be&nbsp;concerned?&lt;br&gt;<br>
&lt;br&gt;I&nbsp;have&nbsp;never&nbsp;really&nbsp;done&nbsp;any&nbsp;caching&nbsp;of&nbsp;plain&nbsp;objects&nbsp;so&nbsp;I&nbsp;am&nbsp;not&nbsp;too&nbsp;sure&nbsp;on&nbsp;how&nbsp;I&nbsp;could/should&nbsp;measure&nbsp;the&nbsp;amount.&nbsp;The&nbsp;Image&nbsp;cache&nbsp;is&nbsp;simple&nbsp;as&nbsp;all&nbsp;the&nbsp;images&nbsp;are&nbsp;the&nbsp;same&nbsp;in&nbsp;terms&nbsp;of&nbsp;their&nbsp;classification&nbsp;but&nbsp;with&nbsp;my&nbsp;business&nbsp;objects&nbsp;there&nbsp;are&nbsp;relationships&nbsp;etc.&nbsp;that&nbsp;should&nbsp;be&nbsp;also&nbsp;be&nbsp;persisted&nbsp;in&nbsp;the&nbsp;cache.&lt;br&gt;<br>
&lt;br&gt;Are&nbsp;there&nbsp;any&nbsp;standard&nbsp;caching&nbsp;examples/libraries&nbsp;that&nbsp;have&nbsp;been&nbsp;written&nbsp;for&nbsp;or&nbsp;used&nbsp;in&nbsp;Mono&nbsp;mobile&nbsp;apps?&lt;br&gt;&lt;br&gt;Thanks&nbsp;Again&lt;br&gt;Liam&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Jul&nbsp;3,&nbsp;2012&nbsp;at&nbsp;3:12&nbsp;AM,&nbsp;Jonathan&nbsp;Pryor&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:jonp@xamarin.com&quot;&nbsp;target=&quot;_blank&quot;&gt;jonp@xamarin.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Jul&nbsp;1,&nbsp;2012,&nbsp;at&nbsp;11:16&nbsp;PM,&nbsp;Liam&nbsp;Houlahan&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;1.&nbsp;Calling&nbsp;the&nbsp;GC&nbsp;did&nbsp;help&nbsp;with&nbsp;things&nbsp;however&nbsp;because&nbsp;the&nbsp;GC&nbsp;takes&nbsp;a&nbsp;millisecond&nbsp;or&nbsp;whatever&nbsp;to&nbsp;execute&nbsp;the&nbsp;UI&nbsp;suffers&nbsp;and&nbsp;gets&nbsp;a&nbsp;stutter&nbsp;effect.&nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;avoid&nbsp;this?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;My&nbsp;usual&nbsp;advice&nbsp;is&nbsp;to&nbsp;call&nbsp;it&nbsp;within&nbsp;Activity.OnDestroy(),&nbsp;as&nbsp;that&#39;s&nbsp;done&nbsp;when&nbsp;the&nbsp;UI&nbsp;is&nbsp;being&nbsp;hidden.&nbsp;That&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;be&nbsp;appropriate.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;In&nbsp;terms&nbsp;of&nbsp;memory&nbsp;management&nbsp;and&nbsp;making&nbsp;requests&nbsp;based&nbsp;on&nbsp;the&nbsp;individual&nbsp;activities&nbsp;my&nbsp;biggest&nbsp;concern&nbsp;is&nbsp;really&nbsp;the&nbsp;user&nbsp;flooding&nbsp;the&nbsp;app&nbsp;with&nbsp;network&nbsp;requests.&nbsp;Something&nbsp;else&nbsp;that&nbsp;has&nbsp;an&nbsp;influence&nbsp;on&nbsp;this&nbsp;in&nbsp;my&nbsp;app&nbsp;is&nbsp;that&nbsp;I&nbsp;am&nbsp;also&nbsp;loading&nbsp;images&nbsp;within&nbsp;my&nbsp;activities&nbsp;and&nbsp;caching&nbsp;them.&nbsp;I&nbsp;suspect&nbsp;that&nbsp;this&nbsp;was&nbsp;a&nbsp;cause&nbsp;for&nbsp;getting&nbsp;out&nbsp;of&nbsp;memory.&lt;br&gt;<br>
<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;come&nbsp;up&nbsp;with&nbsp;a&nbsp;solution&nbsp;based&nbsp;on&nbsp;the&nbsp;ImageLoader&nbsp;in&nbsp;the&nbsp;MWC&nbsp;app.&nbsp;I&nbsp;have&nbsp;managed&nbsp;to&nbsp;hack&nbsp;together&nbsp;a&nbsp;version&nbsp;of&nbsp;this&nbsp;ImageLoader&nbsp;that&nbsp;unifies&nbsp;queuing&nbsp;of&nbsp;the&nbsp;image&nbsp;requests&nbsp;and&nbsp;the&nbsp;data&nbsp;requests.&nbsp;This&nbsp;seemed&nbsp;good&nbsp;for&nbsp;managing&nbsp;the&nbsp;memory&nbsp;but&nbsp;it&nbsp;now&nbsp;has&nbsp;some&nbsp;other&nbsp;issues.&nbsp;Ideally&nbsp;what&nbsp;I&nbsp;think&nbsp;I&nbsp;need&nbsp;is:&lt;br&gt;<br>
<br>
&gt;&nbsp; -&nbsp;Two&nbsp;queues&nbsp;one&nbsp;for&nbsp;images&nbsp;and&nbsp;one&nbsp;for&nbsp;the&nbsp;data&nbsp;requests.&lt;br&gt;<br>
&gt;&nbsp; -&nbsp;The&nbsp;worker&nbsp;for&nbsp;processing&nbsp;the&nbsp;queues&nbsp;should&nbsp;limit&nbsp;the&nbsp;number&nbsp;of&nbsp;requests&nbsp;across&nbsp;the&nbsp;queues.&lt;br&gt;<br>
&gt;&nbsp; -&nbsp;The&nbsp;data&nbsp;queue&nbsp;should&nbsp;take&nbsp;higher&nbsp;priority&nbsp;to&nbsp;the&nbsp;image&nbsp;queue.&nbsp;So&nbsp;the&nbsp;data&nbsp;queue&nbsp;is&nbsp;always&nbsp;processed&nbsp;before&nbsp;the&nbsp;image&nbsp;queue.&lt;br&gt;<br>
&gt;&nbsp; -&nbsp;If&nbsp;the&nbsp;activity&nbsp;is&nbsp;destroyed&nbsp;before&nbsp;loading&nbsp;all&nbsp;of&nbsp;the&nbsp;data/images&nbsp;it&nbsp;should&nbsp;dequeue&nbsp;any&nbsp;outstanding&nbsp;requests.&nbsp;Any&nbsp;ideas&nbsp;how&nbsp;I&nbsp;might&nbsp;dequeue&nbsp;if&nbsp;I&nbsp;am&nbsp;using&nbsp;something&nbsp;like&nbsp;the&nbsp;ImageLoader&nbsp;from&nbsp;the&nbsp;MWC&nbsp;app?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Unfortunately&nbsp;no.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;What&nbsp;are&nbsp;your&nbsp;thoughts&nbsp;on&nbsp;this&nbsp;design&nbsp;for&nbsp;managing&nbsp;the&nbsp;requests?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;This&nbsp;makes&nbsp;a&nbsp;lot&nbsp;of&nbsp;sense:&nbsp;centralize&nbsp;network&nbsp;access&nbsp;so&nbsp;that&nbsp;you&nbsp;can&nbsp;prevent&nbsp;flooding.&nbsp;You&nbsp;could&nbsp;also&nbsp;implement&nbsp;a&nbsp;data&nbsp;caching&nbsp;layer&nbsp;here&nbsp;(so&nbsp;for&nbsp;e.g.&nbsp;image&nbsp;data&nbsp;you&nbsp;check&nbsp;disk&nbsp;before&nbsp;sending&nbsp;the&nbsp;network&nbsp;request),&nbsp;transparent&nbsp;to&nbsp;the&nbsp;caller.&lt;br&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;still&nbsp;need&nbsp;to&nbsp;make&nbsp;individual&nbsp;requests&nbsp;for&nbsp;each&nbsp;activity&nbsp;as&nbsp;the&nbsp;data&nbsp;retrieved&nbsp;from&nbsp;each&nbsp;request&nbsp;is&nbsp;specific&nbsp;to&nbsp;the&nbsp;individual&nbsp;activity&nbsp;and&nbsp;it&nbsp;can&nbsp;only&nbsp;be&nbsp;retrieved&nbsp;on&nbsp;the&nbsp;per&nbsp;activity&nbsp;basis.&nbsp;I&nbsp;need&nbsp;to&nbsp;have&nbsp;realtime&nbsp;up&nbsp;to&nbsp;date&nbsp;info&nbsp;for&nbsp;each&nbsp;activity.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
&lt;/div&gt;Do&nbsp;you?&nbsp;Really?&nbsp;:-)&lt;br&gt;<br>
&lt;br&gt;<br>
All&nbsp;data&nbsp;will&nbsp;always&nbsp;be&nbsp;out&nbsp;of&nbsp;date&nbsp;to&nbsp;some&nbsp;degree.&nbsp;(Consider:&nbsp;user&nbsp;launches&nbsp;app,&nbsp;sleeps&nbsp;the&nbsp;device,&nbsp;returns&nbsp;an&nbsp;hour&nbsp;later.&nbsp;Will&nbsp;your&nbsp;data&nbsp;be&nbsp;updated?&nbsp;Should&nbsp;it&nbsp;be?)&nbsp;The&nbsp;question&nbsp;is,&nbsp;what&nbsp;is&nbsp;a&nbsp;reasonable&nbsp;boundary&nbsp;for&nbsp;caching.&nbsp;You&nbsp;can&nbsp;always&nbsp;provide&nbsp;an&nbsp;explicit&nbsp;Refresh&nbsp;command&nbsp;if&nbsp;the&nbsp;cached&nbsp;data&nbsp;is&nbsp;&quot;too&nbsp;old.&quot;&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
This&nbsp;may&nbsp;be&nbsp;apocryphal,&nbsp;but&nbsp;at&nbsp;last&nbsp;weeks&nbsp;MADExpo&nbsp;I&nbsp;heard&nbsp;a&nbsp;story&nbsp;that&nbsp;Microsoft&nbsp;was&nbsp;profiling&nbsp;some&nbsp;web&nbsp;apps,&nbsp;and&nbsp;found&nbsp;that&nbsp;for&nbsp;a&nbsp;large&nbsp;number&nbsp;of&nbsp;them&nbsp;95%&nbsp;of&nbsp;all&nbsp;database&nbsp;access&nbsp;requests&nbsp;can&nbsp;be&nbsp;avoided&nbsp;if&nbsp;you&nbsp;implement&nbsp;a&nbsp;5s&nbsp;data&nbsp;cache.&nbsp;5s&nbsp;isn&#39;t&nbsp;a&nbsp;terribly&nbsp;long&nbsp;time,&nbsp;and&nbsp;it&nbsp;supposedly&nbsp;had&nbsp;a&nbsp;large&nbsp;reduction&nbsp;on&nbsp;database&nbsp;queries.&lt;br&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;I&nbsp;initiate&nbsp;the&nbsp;all&nbsp;of&nbsp;the&nbsp;requests&nbsp;from&nbsp;the&nbsp;Application&nbsp;class&nbsp;as&nbsp;you&nbsp;suggest&nbsp;and&nbsp;then&nbsp;raise&nbsp;the&nbsp;events&nbsp;to&nbsp;update&nbsp;the&nbsp;activities&nbsp;from&nbsp;the&nbsp;application&nbsp;class&nbsp;when&nbsp;raising&nbsp;the&nbsp;event&nbsp;should&nbsp;it&nbsp;always&nbsp;be&nbsp;done&nbsp;on&nbsp;the&nbsp;UI&nbsp;thread&nbsp;using&nbsp;SynchronizationContext.Post?&nbsp;Or&nbsp;is&nbsp;it&nbsp;ok&nbsp;to&nbsp;raise&nbsp;it&nbsp;on&nbsp;another&nbsp;thread,&nbsp;then&nbsp;in&nbsp;the&nbsp;event&nbsp;handler&nbsp;in&nbsp;the&nbsp;Activity&nbsp;call&nbsp;RunOnUIThread?&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
&lt;/div&gt;Both&nbsp;sound&nbsp;appropriate;&nbsp;pick&nbsp;one&nbsp;and&nbsp;stick&nbsp;with&nbsp;it&nbsp;(to&nbsp;minimize&nbsp;confusion).&lt;br&gt;<br>
&lt;br&gt;<br>
 -&nbsp;Jon&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Monodroid&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Monodroid@lists.ximian.com&quot;&gt;Monodroid@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
UNSUBSCRIBE&nbsp;INFORMATION:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/monodroid&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/monodroid&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
