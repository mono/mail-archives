<tt>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;TITLE&gt;Re:&nbsp;[Monodroid]&nbsp;Sqlite&nbsp;and&nbsp;static&nbsp;constructors&nbsp;bug&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;FONT&nbsp;FACE=&quot;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:10pt'&gt;Hi,&lt;BR&gt;<br>
&lt;BR&gt;<br>
Are&nbsp;you&nbsp;sure&nbsp;the&nbsp;Package&nbsp;Name&nbsp;(under&nbsp;Options,&nbsp;Build,&nbsp;MonoDroid&nbsp;Application)&nbsp;is&nbsp;only&nbsp;&amp;quot;test&amp;quot;?&nbsp;The&nbsp;connection&nbsp;string&nbsp;should&nbsp;be&nbsp;like&nbsp;this:&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;quot;Data Source=data/data/package.name/test.db3&amp;quot;&lt;BR&gt;<br>
&lt;BR&gt;<br>
Marcio&nbsp;Alexandroni&lt;BR&gt;<br>
&amp;nbsp;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;FONT&nbsp;SIZE=&quot;2&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Wingdings&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:7pt'&gt;(&nbsp;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;FACE=&quot;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:10pt'&gt;(+55&nbsp;11)&nbsp;9989-8316&lt;BR&gt;<br>
&lt;IMG&nbsp;src=&quot;cid:3378365670_195972&quot;&nbsp;&gt;&nbsp;&amp;nbsp;marcioalexandroni&lt;BR&gt;<br>
--&nbsp;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;HR&nbsp;ALIGN=CENTER&nbsp;SIZE=&quot;3&quot;&nbsp;WIDTH=&quot;95%&quot;&gt;&lt;B&gt;From:&nbsp;&lt;/B&gt;Piotr&nbsp;Kryger&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;piotr.kryger@legimi.com&quot;&gt;piotr.kryger@legimi.com&lt;/a&gt;&amp;gt;&lt;BR&gt;<br>
&lt;B&gt;Reply-To:&nbsp;&lt;/B&gt;&amp;lt;&lt;a&nbsp;href=&quot;monodroid@lists.ximian.com&quot;&gt;monodroid@lists.ximian.com&lt;/a&gt;&amp;gt;&lt;BR&gt;<br>
&lt;B&gt;Date:&nbsp;&lt;/B&gt;Thu,&nbsp;20&nbsp;Jan&nbsp;2011&nbsp;13:36:45&nbsp;+0100&lt;BR&gt;<br>
&lt;B&gt;To:&nbsp;&lt;/B&gt;&amp;lt;&lt;a&nbsp;href=&quot;monodroid@lists.ximian.com&quot;&gt;monodroid@lists.ximian.com&lt;/a&gt;&amp;gt;&lt;BR&gt;<br>
&lt;B&gt;Subject:&nbsp;&lt;/B&gt;[Monodroid]&nbsp;Sqlite&nbsp;and&nbsp;static&nbsp;constructors&nbsp;bug&lt;BR&gt;<br>
&lt;BR&gt;<br>
Im&nbsp;running&nbsp;MonoDroid&nbsp;on&nbsp;Windows&nbsp;7.&lt;BR&gt;<br>
When&nbsp;I&nbsp;attempt&nbsp;to&nbsp;create&nbsp;simple&nbsp;sqlite&nbsp;database&nbsp;in&nbsp;type&nbsp;initiliazer,&nbsp;I&nbsp;get&nbsp;Sqlite&nbsp;exception:&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;BLOCKQUOTE&gt;&lt;FONT&nbsp;FACE=&quot;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:10pt'&gt;Mono.Data.Sqlite.SqliteException:&nbsp;The&nbsp;database&nbsp;disk&nbsp;image&nbsp;is&nbsp;malformed&lt;BR&gt;<br>
malformed&nbsp;database&nbsp;schema&nbsp;(sqlite_autoindex_Test_1)&nbsp;-&nbsp;invalid&nbsp;rootpage&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/BLOCKQUOTE&gt;&lt;FONT&nbsp;FACE=&quot;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:10pt'&gt;&lt;BR&gt;<br>
This&nbsp;is&nbsp;result&nbsp;of&nbsp;running&nbsp;the&nbsp;following&nbsp;code&nbsp;on&nbsp;the&nbsp;emulator:&lt;BR&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;public&lt;/FONT&gt; &lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;class&lt;/FONT&gt; DbTest&lt;BR&gt;<br>
{&lt;BR&gt;<br>
  &nbsp;&lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;private&lt;/FONT&gt; &lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;static&lt;/FONT&gt; DbTest instance;&lt;BR&gt;<br>
&lt;BR&gt;<br>
  &nbsp;&lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;static&lt;/FONT&gt; DbTest()&lt;BR&gt;<br>
  &nbsp;{&lt;BR&gt;<br>
      &nbsp;instance = &lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;new&lt;/FONT&gt; DbTest();&lt;BR&gt;<br>
  &nbsp;}&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
  &nbsp;&lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;private&lt;/FONT&gt; DbTest()&lt;BR&gt;<br>
&lt;BR&gt;<br>
  &nbsp;{&lt;BR&gt;<br>
       &nbsp;SqliteConnection conn = &lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;new&lt;/FONT&gt; SqliteConnection(&amp;quot;Data Source=/data/data/test/files/test.db3;&amp;quot;);&lt;BR&gt;<br>
&lt;BR&gt;<br>
       &nbsp;conn.Open();&lt;BR&gt;<br>
       &nbsp;SqliteCommand command = &lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;new&lt;/FONT&gt; SqliteCommand();&lt;BR&gt;<br>
       &nbsp;command.Connection = conn;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
       &nbsp;command.CommandText = @&amp;quot;CREATE TABLE Test(&lt;BR&gt;<br>
               &nbsp;key int NOT NULL PRIMARY KEY,&lt;BR&gt;<br>
               &nbsp;value int NOT NULL&lt;BR&gt;<br>
&lt;BR&gt;<br>
                );&amp;quot;;&lt;BR&gt;<br>
       &nbsp;command.ExecuteNonQuery();&lt;BR&gt;<br>
   &nbsp;}&lt;BR&gt;<br>
}&lt;BR&gt;<br>
Database&nbsp;initialization&nbsp;code&nbsp;works&nbsp;fine&nbsp;when&nbsp;its&nbsp;not&nbsp;inside&nbsp;type&nbsp;initialization.&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
--&lt;BR&gt;<br>
Piotr&nbsp;Kryger&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;HR&nbsp;ALIGN=CENTER&nbsp;SIZE=&quot;3&quot;&nbsp;WIDTH=&quot;95%&quot;&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;SPAN&nbsp;STYLE='font-size:10pt'&gt;&lt;FONT&nbsp;FACE=&quot;Consolas,&nbsp;Courier&nbsp;New,&nbsp;Courier&quot;&gt;_______________________________________________&lt;BR&gt;<br>
Monodroid&nbsp;mailing&nbsp;list&lt;BR&gt;<br>
&lt;a&nbsp;href=&quot;Monodroid@lists.ximian.com&quot;&gt;Monodroid@lists.ximian.com&lt;/a&gt;&lt;BR&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/monodroid&quot;&gt;http://lists.ximian.com/mailman/listinfo/monodroid&lt;/a&gt;&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;/SPAN&gt;<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>
<br>

</tt>
