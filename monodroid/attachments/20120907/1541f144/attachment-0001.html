<tt>
Hi!&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;create&nbsp;an&nbsp;always&nbsp;on&nbsp;top,&nbsp;clickable&nbsp;button,&nbsp;like&nbsp;the&nbsp;one&nbsp;from&nbsp;this&nbsp;app:&nbsp;&lt;a&nbsp;href=&quot;http://www.appbrain.com/app/smart-taskbar-%28sidebar%29/com.smart.taskbar&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.appbrain.com/app/smart-taskbar-%28sidebar%29/com.smart.taskbar&lt;/a&gt;&lt;br&gt;<br>
In&nbsp;order&nbsp;to&nbsp;do&nbsp;this,&nbsp;I&nbsp;have&nbsp;ported&nbsp;in&nbsp;c#&nbsp;this&nbsp;code:&nbsp;&lt;a&nbsp;href=&quot;http://stackoverflow.com/questions/4481226/creating-a-system-overlay-always-on-top-button-in-android&quot;&nbsp;target=&quot;_blank&quot;&gt;http://stackoverflow.com/questions/4481226/creating-a-system-overlay-always-on-top-button-in-android&lt;/a&gt;&lt;br&gt;<br>
<br>
But&nbsp;it&nbsp;throws&nbsp;an&nbsp;exception&nbsp;of&nbsp;type&nbsp;WindowManagerBadTokenException&nbsp;from&nbsp;the&nbsp;line&nbsp;where&nbsp;I&nbsp;add&nbsp;the&nbsp;custom&nbsp;view&nbsp;and&nbsp;parameters&nbsp;to&nbsp;the&nbsp;window&nbsp;manager&nbsp;(the&nbsp;.AddView&nbsp;line)&lt;br&gt;Using&nbsp;a&nbsp;breakpoint,&nbsp;i&nbsp;saw&nbsp;that&nbsp;parameter&#39;s&nbsp;Token&nbsp;property&nbsp;is&nbsp;null.&lt;br&gt;<br>
Here&nbsp;&lt;a&nbsp;href=&quot;http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#token&quot;&gt;http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#token&lt;/a&gt;&nbsp;it&nbsp;says&nbsp;that&nbsp;&#39;This&nbsp;will&nbsp;usually&nbsp;be&nbsp;filled&nbsp;in&nbsp;for<br>
&nbsp;you&#39;.&lt;br&gt;&lt;br&gt;Here&#39;s&nbsp;my&nbsp;code:&lt;br&gt;mView=new&nbsp;ButtonView&nbsp;(Application.Context);&lt;br&gt;IWindowManager&nbsp;iwm=this.GetSystemService&nbsp;(Context.WindowService).JavaCast&nbsp;&lt;IWindowManager&gt;&nbsp;();;&lt;br&gt;WindowManagerLayoutParams&nbsp;param=new&nbsp;WindowManagerLayoutParams&nbsp;(WindowManagerTypes.SystemOverlay,&nbsp;WindowManagerFlags.WatchOutsideTouch,&nbsp;Format.Translucent);&lt;br&gt;<br>
param.Gravity=GravityFlags.Right&nbsp;|&nbsp;GravityFlags.Top;&lt;br&gt;param.Title=&quot;Load&nbsp;Average&quot;;&lt;br&gt;iwm.AddView&nbsp;(mView,&nbsp;param);&lt;br&gt;&lt;br&gt;Is&nbsp;there&nbsp;a&nbsp;solution?&lt;br&gt;Thanks&nbsp;in&nbsp;advance.&lt;br&gt;<br>
<br>

</tt>
