<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] dynamically target Kindle Fire from same project
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20dynamically%20target%20Kindle%20Fire%20from%20same%20project&In-Reply-To=%3C3A407783-B543-4C93-BD84-4C98D6109E10%40hightg.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008422.html">
   <LINK REL="Next"  HREF="008405.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] dynamically target Kindle Fire from same project</H1>
    <B>Gerry High</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20dynamically%20target%20Kindle%20Fire%20from%20same%20project&In-Reply-To=%3C3A407783-B543-4C93-BD84-4C98D6109E10%40hightg.com%3E"
       TITLE="[mono-android] dynamically target Kindle Fire from same project">ghigh at hightg.com
       </A><BR>
    <I>Mon Jan 16 13:55:14 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="008422.html">[mono-android] dynamically target Kindle Fire from same project
</A></li>
        <LI>Next message: <A HREF="008405.html">[mono-android] SimpleCursorAdapter and	SimpleCursorAdapter.CursorToStringConverter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8423">[ date ]</a>
              <a href="thread.html#8423">[ thread ]</a>
              <a href="subject.html#8423">[ subject ]</a>
              <a href="author.html#8423">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Disregard the last message--I hadn't changed the build action to AndroidResource on the linked layout files.


On Jan 16, 2012, at 7:52 AM, Gerry High wrote:

&gt;<i> This is the route I'm going--to have 2 projects within the same solution.  One thing I've run into is that the IDE doesn't seem like it is smart if you link your layout files in that it is not updating the Resource.designer.cs with the IDs, etc. from the linked layout files.
</I>&gt;<i> 
</I>&gt;<i> Is this a know issue or is there some workaround?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Gerry
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Jan 15, 2012, at 10:51 AM, Jonathan Pryor wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Really, the easier/saner thing to do is just have separate projects for Kindle vs. non-Kindle builds, and Link the source files between the separate projects. There's less hand-editing of .csproj files this way, and it'll be easier to build your packages from within the IDE.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> - Jon
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Jan 15, 2012, at 11:43 AM, Jonathan Pobst wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> We also now support declaring permission in code, so you can use defines:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> #if !KINDLE
</I>&gt;&gt;&gt;<i> [assembly: UsesPermission (Android.Manifest.Permission.Internet)]
</I>&gt;&gt;&gt;<i> #endif
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> But I am guessing the actual issue you are hitting is that referencing the GoogleMaps assembly automatically adds the &lt;uses-library&gt; to your manifest.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> So you would need to use conditions like JonP suggests, but on the &lt;Reference&gt; to the GoogleMaps.dll instead, and not reference the library on Kindle builds.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Jonathan
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On 1/15/2012 10:33 AM, Jonathan Pryor wrote:
</I>&gt;&gt;&gt;&gt;<i> On Jan 14, 2012, at 12:11 PM, Gerry High wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i> I'd like my monodroid app to be able to run on the Kindle Fire and as such I need to be able to turn off Google maps.  Short of creating a new project is there a way to tie the android manifest settings (e.g. ACCESS_COURSE_LOCATION, ACCESS_FINE_LOCATION) to a build configuration?
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> _Probably_. This is untested, but you could presumably edit your Project.csproj and add a Condition attribute to the the&lt;AndroidManifest/&gt;  element:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> 	&lt;PropertyGroup&gt;
</I>&gt;&gt;&gt;&gt;<i> 		&lt;!-- ... --&gt;
</I>&gt;&gt;&gt;&gt;<i> 		&lt;AndroidManifest Condition=&quot;'$(TargetKindle)'== 'True'&quot;&gt;KindleManifest.xml&lt;/AndroidManifest&gt;
</I>&gt;&gt;&gt;&gt;<i> 		&lt;AndroidManifest Condition=&quot;'$(TargetKindle)'== ''&quot;&gt;AndroidManifest.xml&lt;/AndroidManifest&gt;
</I>&gt;&gt;&gt;&gt;<i> 	&lt;/PropertyGroup&gt;
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Then you could set the TargetKindle property when building your project to select the KindleManifest.xml file:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> 	msbuild /t:SignAndroidPackage /p:TargetKindle=True Project.csproj ...
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> However, I have no idea what doing this will do to IDE support for editing the AndroidManifest.xml file; it may break.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> (The &quot;silly&quot; MSBuild ideas that come to mind...)
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> - Jon
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> Monodroid mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Monodroid mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i> 
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120116/170b9eb1/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120116/170b9eb1/attachment-0001.html</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008422.html">[mono-android] dynamically target Kindle Fire from same project
</A></li>
	<LI>Next message: <A HREF="008405.html">[mono-android] SimpleCursorAdapter and	SimpleCursorAdapter.CursorToStringConverter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8423">[ date ]</a>
              <a href="thread.html#8423">[ thread ]</a>
              <a href="subject.html#8423">[ subject ]</a>
              <a href="author.html#8423">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
