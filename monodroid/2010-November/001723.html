<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] How to use TelephonyManager and PhoneStateListener?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20How%20to%20use%20TelephonyManager%20and%20PhoneStateListener%3F&In-Reply-To=95C40EFEB47F4B48B4B064C53B4EC82E0378910A%40ultranaut.hq.wilshiremedia.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001720.html">
   <LINK REL="Next"  HREF="001752.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] How to use TelephonyManager and PhoneStateListener?</H1>
    <B>bryan costanich</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20How%20to%20use%20TelephonyManager%20and%20PhoneStateListener%3F&In-Reply-To=95C40EFEB47F4B48B4B064C53B4EC82E0378910A%40ultranaut.hq.wilshiremedia.com"
       TITLE="[Monodroid] How to use TelephonyManager and PhoneStateListener?">b at wowzer.net
       </A><BR>
    <I>Wed Nov 17 19:54:32 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001720.html">[Monodroid] How to use TelephonyManager and PhoneStateListener?
</A></li>
        <LI>Next message: <A HREF="001752.html">[Monodroid] How to use TelephonyManager and PhoneStateListener?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1723">[ date ]</a>
              <a href="thread.html#1723">[ thread ]</a>
              <a href="subject.html#1723">[ subject ]</a>
              <a href="author.html#1723">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Arash,

You can get an instance of the context from the current Activity. Activity inherits from Context.

Not sure about the flags. Geoff, do you know where they're at?

From: Arash Emami &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">arash at wilshiremedia.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">arash at wilshiremedia.com</A>&gt;&gt;
Date: Wed, 17 Nov 2010 18:19:32 -0500
To: &quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&gt;&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&gt;&gt;
Subject: [Monodroid] How to use TelephonyManager and PhoneStateListener?

Hi,

I am new to this list.  Thank you for adding me, first of all.  Second of all, I am working with Bryan Costanich on a project, and I will probably be asking many annoying questions over the next few months, so please bear with me :)

I am attempting to implement a PhoneStateListener, and then registering it with the TelephonyManager.  This is what I am doing so far:

    class MyPhoneStateListener : PhoneStateListener
    {
        public override void OnCallStateChanged(CallState state, string incomingNumber)
        {
            base.OnCallStateChanged(state, incomingNumber);

            switch (state)
            {
                case CallState.Ringing:
                    break;

                case CallState.Idle:
                    break;

                case CallState.Offhook:
                    break;
            }
        }
    }


    Context context = null; // How do you new up a Context instance?
    var audioManager2 = ((AudioManager)context.GetSystemService(Context.AudioService));

    // ---- supposed to pass in PhoneStateListener flags &#8211; can&#8217;t seem to find it in the docs?
    ((TelephonyManager)context.GetSystemService(Context.TelephonyService))
        .Listen(new MyPhoneStateListener(), 2 /* flags should go here */ );

My questions are, how do you get an instance of the Context class, and where is the enum that contains the flags that go into the Listen function?

Thank you!

Arash Emami
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20101117/1a6da1bf/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20101117/1a6da1bf/attachment.html</A> 
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001720.html">[Monodroid] How to use TelephonyManager and PhoneStateListener?
</A></li>
	<LI>Next message: <A HREF="001752.html">[Monodroid] How to use TelephonyManager and PhoneStateListener?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1723">[ date ]</a>
              <a href="thread.html#1723">[ thread ]</a>
              <a href="subject.html#1723">[ subject ]</a>
              <a href="author.html#1723">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
