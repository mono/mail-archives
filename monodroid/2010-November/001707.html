<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] Problems with HttpWebRequest
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Problems%20with%20HttpWebRequest&In-Reply-To=AANLkTinUi14Wt61m4WqaUtLzV4csdmPaXORH6vHftmGS%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001706.html">
   <LINK REL="Next"  HREF="001736.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] Problems with HttpWebRequest</H1>
    <B>Jonathan Peppers</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Problems%20with%20HttpWebRequest&In-Reply-To=AANLkTinUi14Wt61m4WqaUtLzV4csdmPaXORH6vHftmGS%40mail.gmail.com"
       TITLE="[Monodroid] Problems with HttpWebRequest">Jonathan.Peppers at Hitcents.com
       </A><BR>
    <I>Wed Nov 17 14:49:12 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001706.html">[Monodroid] Problems with HttpWebRequest
</A></li>
        <LI>Next message: <A HREF="001736.html">[Monodroid] Problems with HttpWebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1707">[ date ]</a>
              <a href="thread.html#1707">[ thread ]</a>
              <a href="subject.html#1707">[ subject ]</a>
              <a href="author.html#1707">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well, we discovered it would happen while debugging in Visual Studio, but not if you ran the app manually from the emulator.

We keep getting several error popups in Visual Studio, so maybe it is related.

We saw these same popups listed on bugzilla already, so they're probably already working on it.

-- Jonathan Peppers
Hitcents.com

From: Koushik Dutta [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">koush at ghs.l.google.com</A>]
Sent: Wednesday, November 17, 2010 12:20 PM
To: Jonathan Peppers
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>
Subject: Re: [Monodroid] Problems with HttpWebRequest

Make sure your AndroidManifest.xml has the internet permission maybe?
On Wed, Nov 17, 2010 at 8:49 AM, Jonathan Peppers &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Jonathan.Peppers at hitcents.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Jonathan.Peppers at hitcents.com</A>&gt;&gt; wrote:
To try out MonoDroid, we tried testing a client-side library we use for communicating with a web server.

Basically we write the original class library as a standard .Net project, then create new projects for MonoTouch, .Net CF, etc. linking in each file.  Then we can put conditions like #define iPhone, PocketPC, etc.

We started doing this for MonoDroid and can't get our library to work.  The issue is that every HttpWebRequest we try to make, fails with &quot;Request timed out.&quot;

Is there anything special we need to do to get this working in the emulator?  We don't have a device to try it on yet.

Also, if we go to our website in the emulator's browser, it can connect just fine.  So I don't think it's a network setup issue.

The web request is created like this:

            HttpWebRequest request = HttpWebRequest.Create(url) as HttpWebRequest;
            request.Method = WebRequestMethods.Http.Post;
            request.Timeout = Timeout;
            request.ContentType = Constants.ContentType;
            if (!string.IsNullOrEmpty(TransactionKey))
            {
                request.Headers.Add(Constants.TransactionKey, TransactionKey);
            }
            if (!string.IsNullOrEmpty(Session))
            {
                request.Headers.Add(Constants.Session, Session);
            }
            request.SendChunked = true;

It is used as:

            using (Stream postStream = request.GetRequestStream())
            {
                using (XmlWriter writer = XmlWriter.Create(postStream, XmlConstants.Settings))
                {
                    Serializer.WriteXml(requests, writer);
                }
            }
            using (HttpWebResponse webResponse = response as HttpWebResponse)
            {
                using (Stream stream = webResponse.GetResponseStream())
                {
                    using (StreamReader reader = new StreamReader(stream, Constants.Encoding))
                    {
                        return Serializer.ReadXml(reader);
                    }
                }
            }

This works fine on MonoTouch.

-- Jonathan Peppers
Hitcents.com


_______________________________________________
Monodroid mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>&gt;
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20101117/1bfcb096/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20101117/1bfcb096/attachment.html</A> 
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001706.html">[Monodroid] Problems with HttpWebRequest
</A></li>
	<LI>Next message: <A HREF="001736.html">[Monodroid] Problems with HttpWebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1707">[ date ]</a>
              <a href="thread.html#1707">[ thread ]</a>
              <a href="subject.html#1707">[ subject ]</a>
              <a href="author.html#1707">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
