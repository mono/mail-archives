<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] How to handle garbage collection?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20How%20to%20handle%20garbage%20collection%3F&In-Reply-To=%3CDB3935A41BD6564F9BB7CA00D4F939B0027BCA48%40yellow.initions.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011611.html">
   <LINK REL="Next"  HREF="011741.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] How to handle garbage collection?</H1>
    <B>Breyer, Christian</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20How%20to%20handle%20garbage%20collection%3F&In-Reply-To=%3CDB3935A41BD6564F9BB7CA00D4F939B0027BCA48%40yellow.initions.local%3E"
       TITLE="[mono-android] How to handle garbage collection?">breyer at initions.com
       </A><BR>
    <I>Fri Aug  3 06:54:21 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011611.html">[mono-android] How to handle garbage collection?
</A></li>
        <LI>Next message: <A HREF="011741.html">[mono-android] How to handle garbage collection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11627">[ date ]</a>
              <a href="thread.html#11627">[ thread ]</a>
              <a href="subject.html#11627">[ subject ]</a>
              <a href="author.html#11627">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Our customers are currently using well over 100 phones running on API
Level 7. They bought those phones in order to use them for at least two
years in their line of business and there is no way to just update the
OS.

So, I think what craig described - thanks for that - should be taken
seriously.

 

 

Von: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>] Im Auftrag von Sayed Arian
Kooshesh
Gesendet: Mittwoch, 1. August 2012 07:06
An: Discussions related to Mono for Android
Betreff: Re: [mono-android] How to handle garbage collection?

 

I never target under 8. No one sells those phones and the market share
is tiny and it has the most bugs. 

On Tue, Jul 31, 2012 at 5:39 PM, craig &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">craigrs84 at gmail.com</A>&gt; wrote:

I was running on Android emulator API Level 7 (2.1)

Curiously, I just tried the same code on Android emulator API Level 15
and
it behaved completely differently.  The app didn't lock up like it does
on
API Level 7.

I don't know.  I don't fully understand it all yet (haven't had time to
do
further research yet) but something just doesn't seem right.  It feels
like
a bug to me.  Let me again re-iterate that I know the way I'm doing this
is
not the most efficient way.  And I do plan to switch over to using a
ListView.  But it still feels very buggy.  If what I am mistaking as a
bug
is actually just a limitation of Mono for Android then please correct
me.

On API Level 7 it seems that garbage collection is finally kicking in
after
it reaches around 1900 grefs.  I'm fine with this.  But what surprises
me is
that it seems to go haywire and continue to run full GC over and over
again.
I'm not seeing this behavior on API Level 15.  Even after it finishes
doing
full GC and it says that the &quot;GREF has decreased to 299&quot;, the next time
I
click the button it runs full GC again!  I would have thought that it
wouldn't need to run full GC again for at least another 10-20 clicks of
the
button.  So yes it seems like resources are not being released.  I'd be
suspicious of Android/Java except that I have tried it in Java and it
works
fine.

Anyways I am attaching 2 different logs from my logcat.

The first log is from logcat on Android API Level 7:
<A HREF="http://codeviewer.org/view/code:2895">http://codeviewer.org/view/code:2895</A>

The second log is from logcat on Android API Level 15:
<A HREF="http://codeviewer.org/view/code:2896">http://codeviewer.org/view/code:2896</A>

Hopefully these two logs will provide some insight.  I have added an
additional logging line that records every time I pressed the button (at
the
beginning of the event handler).

Also, you mentioned that you were confused by the 2200+ gref count.  I
can
consistently reproduce these high counts on the API Level 7 emulator.







--
View this message in context:
<A HREF="http://mono-for-android.1047100.n5.nabble.com/How-to-handle-garbage-coll">http://mono-for-android.1047100.n5.nabble.com/How-to-handle-garbage-coll</A>
ection-memory-leak-tp5711079p5711096.html

Sent from the Mono for Android mailing list archive at Nabble.com.

_______________________________________________
Monodroid mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>

UNSUBSCRIBE INFORMATION:
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>




-- 
Extreme Knowledge is not something for which he programs a computer but
for which his computer is programming him.

-Wozniak

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120803/23cd60da/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120803/23cd60da/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011611.html">[mono-android] How to handle garbage collection?
</A></li>
	<LI>Next message: <A HREF="011741.html">[mono-android] How to handle garbage collection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11627">[ date ]</a>
              <a href="thread.html#11627">[ thread ]</a>
              <a href="subject.html#11627">[ subject ]</a>
              <a href="author.html#11627">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
