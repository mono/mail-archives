<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Task Parallel Framework issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Task%20Parallel%20Framework%20issues&In-Reply-To=%3C502ED5A0.8020009%40eqqon.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011962.html">
   <LINK REL="Next"  HREF="011869.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Task Parallel Framework issues</H1>
    <B>Meinrad Recheis</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Task%20Parallel%20Framework%20issues&In-Reply-To=%3C502ED5A0.8020009%40eqqon.com%3E"
       TITLE="[mono-android] Task Parallel Framework issues">meinrad.recheis at eqqon.com
       </A><BR>
    <I>Fri Aug 17 23:37:04 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011962.html">[mono-android] Task Parallel Framework issues
</A></li>
        <LI>Next message: <A HREF="011869.html">[mono-android] Task Parallel Framework issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11861">[ date ]</a>
              <a href="thread.html#11861">[ thread ]</a>
              <a href="subject.html#11861">[ subject ]</a>
              <a href="author.html#11861">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16.08.2012 21:52, Stephan Steiner wrote:
&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> I'm having a weird issue using the TPF.
</I>&gt;<i> In my main activity, in the OnCreate method I'm trying to initialize network
</I>&gt;<i> connectivity (which potentially could take a while - I need to check if one
</I>&gt;<i> of two addresses is reachable).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> So, within OnCreate, I start a new task (for simplicity's sake I do nothing
</I>&gt;<i> with the return value for now)
</I>&gt;<i>
</I>&gt;<i> Task.Factory.StartNew(() =&gt;
</I>&gt;<i> {
</I>&gt;<i>     bool initialized = Controller.Instance.Initialize();
</I>&gt;<i> });
</I>&gt;<i>
</I>&gt;<i> Controller.Instance is a singleton which gets initialized upon startup,
</I>&gt;<i> using the standard singleton approach
</I>&gt;<i>
</I>&gt;<i> public static Controller Instance
</I>&gt;<i>         {
</I>&gt;<i>             get
</I>&gt;<i>             {
</I>&gt;<i>                 if (myController == null)
</I>&gt;<i>                 {
</I>&gt;<i>                     Log.Info(MainActivity.AppId, &quot;Controller not yet
</I>&gt;<i> instantiated&quot;);
</I>&gt;<i>                     lock (syncRoot)
</I>&gt;<i>                     {
</I>&gt;<i>                         if (myController == null)
</I>&gt;<i>                         {
</I>&gt;<i>                             Log.Info(MainActivity.AppId, &quot;Instantiating
</I>&gt;<i> controller&quot;);
</I>&gt;<i>                             myController = new Controller();
</I>&gt;<i>                         }
</I>&gt;<i>                     }
</I>&gt;<i>                 }
</I>&gt;<i>                 return myController;
</I>&gt;<i>             }
</I>&gt;<i>         }
</I>&gt;<i>
</I>&gt;<i> Now, if I run this code, it gets as far as the second Log.Info string, then
</I>&gt;<i> ... nothing. No errors, no exceptions, no nothing whatsoever. If I step
</I>&gt;<i> through the code and press F11 on the &quot;myController = new Controller()&quot;
</I>&gt;<i> line, it jumps to the end of the file.
</I>&gt;<i>
</I>&gt;<i> If I run the same code within the GUI thread 
</I>&gt;<i>
</I>&gt;<i> bool initialized = Controller.Instance.Initialize();
</I>&gt;<i>
</I>&gt;<i> Then, things work as they should. 
</I>&gt;<i>
</I>&gt;<i> How can I figure out a) what is going on here, 
</I>You could run the program with debugger attached and when you think your
task is hanging you simply pause the debugger and check the threads
window for your background thread, select it and have a look in the
callstack window where the task is currently in code. if you are lucky,
the task is in your code or in mono4android code and you get a good
stacktrace. if it really is hanging (i.e. a deadlock or a blocking
method call) it will always be the same line of code.
hth,
-- henon
&gt;<i> b) how to counteract it? 
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i> Stephan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/Task-Parallel-Framework-issues-tp5711359.html">http://mono-for-android.1047100.n5.nabble.com/Task-Parallel-Framework-issues-tp5711359.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I></PRE>












































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011962.html">[mono-android] Task Parallel Framework issues
</A></li>
	<LI>Next message: <A HREF="011869.html">[mono-android] Task Parallel Framework issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11861">[ date ]</a>
              <a href="thread.html#11861">[ thread ]</a>
              <a href="subject.html#11861">[ subject ]</a>
              <a href="author.html#11861">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
