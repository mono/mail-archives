<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Handle incoming SMS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Handle%20incoming%20SMS&In-Reply-To=%3CCAC30OvgmHWDeondDej%3DzFm3AqqPNmvAmAJ5kXJ5mG-NHzebaBw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012122.html">
   <LINK REL="Next"  HREF="012011.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Handle incoming SMS</H1>
    <B>Sayed Arian Kooshesh</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Handle%20incoming%20SMS&In-Reply-To=%3CCAC30OvgmHWDeondDej%3DzFm3AqqPNmvAmAJ5kXJ5mG-NHzebaBw%40mail.gmail.com%3E"
       TITLE="[mono-android] Handle incoming SMS">kooshesh at gmail.com
       </A><BR>
    <I>Wed Aug 29 23:05:16 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="012122.html">[mono-android] Handle incoming SMS
</A></li>
        <LI>Next message: <A HREF="012011.html">[mono-android] GPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12230">[ date ]</a>
              <a href="thread.html#12230">[ thread ]</a>
              <a href="subject.html#12230">[ subject ]</a>
              <a href="author.html#12230">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I thought this,

&quot;

[IntentFilter(new[] { &quot;android.provider.Telephony.
SMS_RECEIVED&quot; })]

&quot;

was the same as registering the recvr in manifest, which makes it where you
don't have to call register recvr?

Second, do you have any other sms recving apps on the emulator that could
be suppressing it?


On Wed, Aug 29, 2012 at 5:33 AM, sorniels &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">sorniels at fooz.dk</A>&gt; wrote:

&gt;<i> This doesn't work for me. I have the following:
</I>&gt;<i>
</I>&gt;<i> [BroadcastReceiver(Enabled = true)]
</I>&gt;<i>     [IntentFilter(new[] { &quot;android.provider.Telephony.SMS_RECEIVED&quot; })]
</I>&gt;<i>     public class TextMessageListener : BroadcastReceiver
</I>&gt;<i>     {
</I>&gt;<i>         public static readonly string IntentAction =
</I>&gt;<i> &quot;android.provider.Telephony.SMS_RECEIVED&quot;;
</I>&gt;<i>
</I>&gt;<i>         public override void OnReceive(Context context, Intent intent)
</I>&gt;<i>         {
</I>&gt;<i>             Toast.MakeText(context, &quot;Msg received!&quot;,
</I>&gt;<i> ToastLength.Short).Show();
</I>&gt;<i>             if (intent.Action == IntentAction)
</I>&gt;<i>             {
</I>&gt;<i>                 var bundle = intent.Extras;
</I>&gt;<i>
</I>&gt;<i>                 if (bundle != null)
</I>&gt;<i>                 {
</I>&gt;<i>                     var pdus = bundle.Get (&quot;pdus&quot;);
</I>&gt;<i>                     var castedPdus =
</I>&gt;<i> JNIEnv.GetArray&lt;Java.Lang.Object&gt;(pdus.Handle);
</I>&gt;<i>
</I>&gt;<i>                     var bytes = new
</I>&gt;<i> Byte[JNIEnv.GetArrayLength(castedPdus[0].Handle)];
</I>&gt;<i>                     JNIEnv.CopyArray(castedPdus[0].Handle, bytes);
</I>&gt;<i>                     var message = Encoding.UTF8.GetString(bytes);
</I>&gt;<i>                     ((Main)context).ShowMessage(message);
</I>&gt;<i>                 }
</I>&gt;<i>             }
</I>&gt;<i>         }
</I>&gt;<i>     }
</I>&gt;<i>
</I>&gt;<i> In the OnCreate() of my Main activity I'm registering the BroadcastReceiver
</I>&gt;<i> like this:
</I>&gt;<i>
</I>&gt;<i> _receiver = new TextMessageListener();
</I>&gt;<i>             var intent = new IntentFilter();
</I>&gt;<i>             intent.AddAction(TextMessageListener.IntentAction);
</I>&gt;<i>             RegisterReceiver(_receiver, intent);
</I>&gt;<i>
</I>&gt;<i> Receive Sms is added to the manifest as a permission. The problem is, that
</I>&gt;<i> the SMS_RECEIVED never seems to fire. I've had a breakpoint in the code,
</I>&gt;<i> but
</I>&gt;<i> it never reaches it.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://mono-for-android.1047100.n5.nabble.com/Handle-incoming-SMS-tp5711524p5711623.html">http://mono-for-android.1047100.n5.nabble.com/Handle-incoming-SMS-tp5711524p5711623.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>


-- 
Extreme Knowledge is not something for which he programs a computer but for
which his computer is programming him.

-Wozniak


   - if my programming advice has helped you, feel free to donate to :
&lt;<A HREF="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=KYUXV2PG88YQQ">https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=KYUXV2PG88YQQ</A>&gt;

&lt;<A HREF="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=KYUXV2PG88YQQ">https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=KYUXV2PG88YQQ</A>&gt;
&lt;<A HREF="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=KYUXV2PG88YQQ">https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=KYUXV2PG88YQQ</A>&gt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120829/2327eac6/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120829/2327eac6/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012122.html">[mono-android] Handle incoming SMS
</A></li>
	<LI>Next message: <A HREF="012011.html">[mono-android] GPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12230">[ date ]</a>
              <a href="thread.html#12230">[ thread ]</a>
              <a href="subject.html#12230">[ subject ]</a>
              <a href="author.html#12230">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
