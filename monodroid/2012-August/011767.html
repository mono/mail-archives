<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Random crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Random%20crash&In-Reply-To=%3CCAKdriZv8ousJwdX8MDWVDH288uv3cZs%2BM39-5twJ6r3FkQTsnw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011771.html">
   <LINK REL="Next"  HREF="011791.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Random crash</H1>
    <B>Matthieu Laban</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Random%20crash&In-Reply-To=%3CCAKdriZv8ousJwdX8MDWVDH288uv3cZs%2BM39-5twJ6r3FkQTsnw%40mail.gmail.com%3E"
       TITLE="[mono-android] Random crash">matt at flyingdevstudio.com
       </A><BR>
    <I>Sat Aug 11 17:14:44 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011771.html">[mono-android] error with keytool
</A></li>
        <LI>Next message: <A HREF="011791.html">[mono-android] Random crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11767">[ date ]</a>
              <a href="thread.html#11767">[ thread ]</a>
              <a href="subject.html#11767">[ subject ]</a>
              <a href="author.html#11767">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Guys,

We're still working on porting our iOS/WP7 app to Android and we're hitting
a road block...

Basically, the app crashes at random times when loading things, creating
shaders, parsing data, etc...
Most of it seems memory related since we're getting the errors mostly in
Array.Resize() or other methods that have to do with memory allocations.

I added some code to invoke the Runtime GC
(Java.Lang.Runtime.GetRuntime().Gc()) and it tends to make things better,
but we always crash further down the line.

The GC messages in the log seem to say that we still have a lot of
available memory though, ~40% out of 13MB when it crashes usually.

There are 2 types of crash we get, they both have call stacks, but one says
that the process has been terminated by signal (11).
The other types says nothing more than a call stack in the log.

Here's a typical log (through adb logcat):
[...] Normal application log...
D/dalvikvm( 5446): GC_EXPLICIT freed 242K, 39% free 7935K/12999K, paused
2ms+2ms
I/mono    ( 5446): Stacktrace:
I/mono    ( 5446):
I/mono    ( 5446):   at System.Collections.Generic.Dictionary`2&lt;char,
Microsoft.Xna.Framework.Graphics.GlyphData&gt;.Resize () &lt;0x00247&gt;
I/mono    ( 5446):   at System.Collections.Generic.Dictionary`2&lt;char,
Microsoft.Xna.Framework.Graphics.GlyphData&gt;.Add
(char,Microsoft.Xna.Framework.G
phics.GlyphData) &lt;0x00193&gt;
I/mono    ( 5446):   at Microsoft.Xna.Framework.Graphics.SpriteFont..ctor
(Microsoft.Xna.Framework.Graphics.Texture2D,System.Collections.Generic.List
&lt;Microsoft.Xna.Framework.Rectangle&gt;,System.Collections.Generic.List`1&lt;Microsoft.Xna.Framework.Rectangle&gt;,System.Collections.Generic.List`1&lt;char&gt;,int,
ngle,System.Collections.Generic.List`1&lt;Microsoft.Xna.Framework.Vector3&gt;,System.Nullable`1&lt;char&gt;)
&lt;0x002bb&gt;
I/mono    ( 5446):   at
Microsoft.Xna.Framework.Content.SpriteFontReader.Read
(Microsoft.Xna.Framework.Content.ContentReader,Microsoft.Xna.Framework.
aphics.SpriteFont) &lt;0x00173&gt;
I/SurfaceFlinger(  237): id=1183 Removed SurfaceView idx=1 Map Size=3
V/WindowManager(  312): Preventing status bar from hiding by policy
I/SurfaceFlinger(  237): id=1182 Removed
FDS.InfiniteFlight/fds.infiniterunway.Activity1 idx=1 Map Size=2
I/WindowManager(  312): WIN DEATH: Window{407340c8
FDS.InfiniteFlight/fds.infiniterunway.Activity1 paused=false}
I/ActivityManager(  312): Process FDS.InfiniteFlight (pid 5446) has died.
W/WindowManager(  312): Force-removing child win Window{41f510d0
SurfaceView paused=false} from container Window{407340c8
FDS.InfiniteFlight/fds.infi
terunway.Activity1 paused=false}
D/Zygote  (  238): Process 5446 terminated by signal (11)

Has anybody faced anything similar?
How can I get more information about the exception?

Thanks!
--
Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120811/ab438474/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120811/ab438474/attachment.html</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011771.html">[mono-android] error with keytool
</A></li>
	<LI>Next message: <A HREF="011791.html">[mono-android] Random crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11767">[ date ]</a>
              <a href="thread.html#11767">[ thread ]</a>
              <a href="subject.html#11767">[ subject ]</a>
              <a href="author.html#11767">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
