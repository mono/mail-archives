<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] monodroid - protocol violation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20monodroid%20-%20protocol%20violation&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002160.html">
   <LINK REL="Next"  HREF="002164.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] monodroid - protocol violation</H1>
    <B>Wally McClure</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20monodroid%20-%20protocol%20violation&In-Reply-To="
       TITLE="[Monodroid] monodroid - protocol violation">theevilprogrammer at hotmail.com
       </A><BR>
    <I>Tue Dec 28 21:46:04 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002160.html">[Monodroid] error on console.writeline
</A></li>
        <LI>Next message: <A HREF="002164.html">[Monodroid] build in release mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2161">[ date ]</a>
              <a href="thread.html#2161">[ thread ]</a>
              <a href="subject.html#2161">[ subject ]</a>
              <a href="author.html#2161">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I'm getting this error on an async call to a rest web service.  The error doesn't show up in the app, but does show up in logcat.
12-28 21:29:46.080: ERROR/mono(380): [0x570760:] EXCEPTION handling: System.Net.Sockets.SocketException: An address incompatible with the requested protocol was used

the source code for the call is below.
 
A second issue that I am seeing in this is that when I run in debug mode, everything works fine, or seems to. When I run in release mode, I get a nameresolutionexception.  I'm still trying to figure this one out.  I can do this in MonoTouch with almost the exact same code and it works perfectly.  Any ideas are appreciated.
 
void btnCallREST_Click(object sender, EventArgs e)
{
string Url = &quot;<A HREF="http://www.twtmstr.com/webservices/remoteapi.svc/login&quot;;">http://www.twtmstr.com/webservices/remoteapi.svc/login&quot;;</A>
string Body = &quot;{\&quot;ld\&quot;:{\&quot;UserName\&quot;:\&quot;MonoDroidBook\&quot;,\&quot;PassWord\&quot;:\&quot;MonoDroidIsGreat\&quot;,\&quot;AppKey\&quot;:\&quot;blah\&quot;}}&quot;;
byte[] byteData = System.Text.UTF8Encoding.UTF8.GetBytes(Body);
try
{
// Create the web request
HttpWebRequest request = WebRequest.Create(Url) as HttpWebRequest;
request.ContentLength = Body.Length;
// Set type to POST
request.Method = &quot;POST&quot;;
request.ContentType = &quot;application/json&quot;;
// Write the parameters
StreamWriter stOut = new StreamWriter(request.GetRequestStream(), System.Text.Encoding.ASCII);
stOut.Write(Body);
stOut.Close();
request.BeginGetResponse(new AsyncCallback(ProcessHttpResponse), request);
}
catch (WebException we)
{
tv.Text = we.Message;
Android.Util.Log.E(&quot;http request&quot;, &quot;Exception: &quot; + we.Message);
//System.Diagnostics.Debug.WriteLine(&quot;Exception: &quot; + we.Message);
}
catch (System.Exception sysExc)
{
tv.Text = sysExc.Message;
Android.Util.Log.E(&quot;http request&quot;, &quot;Exception: &quot; + sysExc.Message);
}
}
private void ProcessHttpResponse(IAsyncResult iar)
{
try
{
HttpWebRequest request = (HttpWebRequest)iar.AsyncState;
HttpWebResponse response;
response = (HttpWebResponse)request.EndGetResponse(iar);
//Console.WriteLine(&quot;get response.&quot;);
System.IO.StreamReader strm = new System.IO.StreamReader(
response.GetResponseStream());
string responseString = strm.ReadToEnd();
response.Close();
this.RunOnUiThread(() =&gt; tv.Text = responseString);
Android.Util.Log.D(&quot;http response&quot;, responseString);
}
catch (System.Exception sysExc)
{
Android.Util.Log.E(&quot;http response&quot;, &quot;Exception: &quot; + sysExc.Message);
this.RunOnUiThread(() =&gt; tv.Text = &quot;Exception: &quot; + sysExc.Message);
}
} 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20101228/a1c0c842/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20101228/a1c0c842/attachment.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002160.html">[Monodroid] error on console.writeline
</A></li>
	<LI>Next message: <A HREF="002164.html">[Monodroid] build in release mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2161">[ date ]</a>
              <a href="thread.html#2161">[ thread ]</a>
              <a href="subject.html#2161">[ subject ]</a>
              <a href="author.html#2161">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
