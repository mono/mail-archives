<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Binding FileChooser java Library project to	xamarin android
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Binding%20FileChooser%20java%20Library%20project%20to%0A%09xamarin%20android&In-Reply-To=%3C44D9AC1B-F55E-42E1-9B92-EFE3A1858347%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013954.html">
   <LINK REL="Next"  HREF="013956.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Binding FileChooser java Library project to	xamarin android</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Binding%20FileChooser%20java%20Library%20project%20to%0A%09xamarin%20android&In-Reply-To=%3C44D9AC1B-F55E-42E1-9B92-EFE3A1858347%40xamarin.com%3E"
       TITLE="[mono-android] Binding FileChooser java Library project to	xamarin android">jonp at xamarin.com
       </A><BR>
    <I>Wed Sep 25 14:54:43 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="013954.html">[mono-android] Binding FileChooser java Library project to xamarin	android
</A></li>
        <LI>Next message: <A HREF="013956.html">[mono-android] Binding FileChooser java Library project to	xamarin android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13955">[ date ]</a>
              <a href="thread.html#13955">[ thread ]</a>
              <a href="subject.html#13955">[ subject ]</a>
              <a href="author.html#13955">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sep 25, 2013, at 3:07 AM, venkatesh &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">venkatesh.r at sierratec.com</A>&gt; wrote:
&gt;<i> I am binding filechooser library project to xamarin android .
</I>&gt;<i> 
</I>&gt;<i> 1) filechooser.jar from eclipse build
</I>&gt;<i> 2) Created a new Java Bindings Library project 
</I>&gt;<i> 3) Copied the generated filechooser.jar into the Jar directory and set the Build Action to &quot;EmbeddedJar&quot; 
</I>&gt;<i> 4) Copied the referenced android-support-v4.jar file from the android-sdk\extras folder to the Jar directory and set the Build Action to &quot;EmbeddedReferenceJar&quot; 
</I>&gt;<i> 5)Add the reference Mono.Android.Support.V4  to the binding project 
</I>
There are lots of android-support-v4.jar's, and the android-support-v4.jar that filechooser.jar probably differs from the one in the Mono.Android.Support.V4.dll assembly.

You'll also be including _both_ android-support-v4.jar's into your final app, which will likely confuse things. I would suggest removing android-support-v4.jar from your binding project and just sticking with Mono.Android.Support.V4.dll.

&gt;<i> 6) Attempted to build the project and got the errors .
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> *Error 1 :* 'Com.Ipaulpro.Afilechooser.FileListFragment' does not implement interface member 'Android.Support.V4.App.LoaderManager.ILoaderCallbacks.OnLoadFinished(Android.Support.V4.Content.Loader, Java.Lang.Object)'
</I>
The &quot;generated C# Code&quot; you provide doesn't have any OnLoadFinished() member. :-(

Is it there but not added in the email? Are there any warnings? Perhaps the member is being skipped? Could you please provide diagnostic build output?

	<A HREF="http://docs.xamarin.com/guides/android/deployment%2c_testing%2c_and_metrics/diagnostics">http://docs.xamarin.com/guides/android/deployment%2c_testing%2c_and_metrics/diagnostics</A>

I do see FileListFragment.onLoadFinished() declared within api.xml, so it _should_ be bound, though it's possible that the nested generics on the parameter types are confusing things. If that's the case, you can fix that by adding the following to Transforms\Metadata.xml:

	&lt;attr
		path=&quot;/api/package[@name='com.ipaulpro.afilechooser']/class[@name='FileChooserFragment']/method[@name='onLoadFinished']/parameter[@name='p0']&quot;
		name=&quot;type&quot;
	&gt;android.support.v4.content.Loader&lt;/attr&gt;
	&lt;attr
		path=&quot;/api/package[@name='com.ipaulpro.afilechooser']/class[@name='FileChooserFragment']/method[@name='onLoadFinished']/parameter[@name='p1']&quot;
		name=&quot;type&quot;
	&gt;java.util.List &lt;/attr&gt;

_However_, even once bound the parameter types won't match the expected LoaderManager.ILoaderCallbacks.OnLoadFinished(Android.Support.V4.Content.Loader, Java.Lang.Object) argument list. You will thus need to provide a partial class declaration to implement this member:

	// Add a new class to your solution:
	namespace Com.Ipaulpro.Afilechooser {
		partial class FileListFragment {
			public void OnLoadFinished(Android.Support.V4.Content.Loader loader, Java.Lang.Object value)
			{
				OnLoadFinished(loader, (Java.Util.List) value);
			}
		}
	}

&gt;<i> *Error 2 :*
</I>&gt;<i> 
</I>&gt;<i> 'Com.Ipaulpro.Afilechooser.FileLoader.LoadInBackground()': return type must be 'Java.Lang.Object' to match overridden member 'Android.Support.V4.Content.AsyncTaskLoader.LoadInBackground()'
</I>
Our binding infrastructure doesn't cleanly handle Java covariant return types, and requires some help:

	<A HREF="http://docs.xamarin.com/guides/android/advanced_topics/java_integration_overview/binding_a_java_library_(.jar">http://docs.xamarin.com/guides/android/advanced_topics/java_integration_overview/binding_a_java_library_(.jar</A>)#4.9.1.possible-causes

You'll need to edit Transforms\Metadata.xml and add something similar to the following fragment:

	&lt;attr
		path=&quot;/api/package[@name='com.ipaulpro.afilechooser']/class[@name='FileLoader']/method[@name='loadInBackground']&quot;
		name=&quot;managedReturn&quot;
	&gt;Java.Lang.Object&lt;/attr&gt;

 - Jon

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013954.html">[mono-android] Binding FileChooser java Library project to xamarin	android
</A></li>
	<LI>Next message: <A HREF="013956.html">[mono-android] Binding FileChooser java Library project to	xamarin android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13955">[ date ]</a>
              <a href="thread.html#13955">[ thread ]</a>
              <a href="subject.html#13955">[ subject ]</a>
              <a href="author.html#13955">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
