<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] I'am getting and System.MissingMethodException when i use the SetOnScrollListener's method of ListView's controller
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20I%27am%20getting%20and%20System.MissingMethodException%20when%20i%0A%20use%20the%20SetOnScrollListener%27s%20method%20of%20ListView%27s%20controller&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002768.html">
   <LINK REL="Next"  HREF="002752.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] I'am getting and System.MissingMethodException when i use the SetOnScrollListener's method of ListView's controller</H1>
    <B>Orlando Silva</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20I%27am%20getting%20and%20System.MissingMethodException%20when%20i%0A%20use%20the%20SetOnScrollListener%27s%20method%20of%20ListView%27s%20controller&In-Reply-To="
       TITLE="[Monodroid] I'am getting and System.MissingMethodException when i use the SetOnScrollListener's method of ListView's controller">orlandolsilva at gmail.com
       </A><BR>
    <I>Sat Jan 29 18:01:33 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002768.html">[Monodroid] HttpWebRequest use?
</A></li>
        <LI>Next message: <A HREF="002752.html">[Monodroid] I'am getting and System.MissingMethodException when i use the SetOnScrollListener's method of ListView's controller
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2751">[ date ]</a>
              <a href="thread.html#2751">[ thread ]</a>
              <a href="subject.html#2751">[ subject ]</a>
              <a href="author.html#2751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'am getting the exception System.MissingMethodException when using the
SetOnScrollListener's method of an ListView's controller. What i'm trying to
achieve with this, is detect when the scroll stops.

I tried to override the method &quot;void OnScrollChanged(int l, int t, int oldl,
int oldt)&quot; of the listView's controller, but without any success because it
never gets triggered... After searching in google, i found that we can set
an scroll listener to the listView (SetOnScrollListener). The next lines
show how it was implemented and called.


public class MyListView : ListView
    {
        public MyListView(Context context)
            : this(context, null) { }

        public MyListView(Context context, Android.Util.IAttributeSet attrs)
            : base(context, attrs)
        {
            ArrayAdapter&lt;string&gt; adapter = new ArrayAdapter&lt;string&gt;(context,
Resource.Layout.list_item, countries);
            this.Adapter = adapter;

            this.SetOnScrollListener(new AbsListViewScrollListener());

            this.ItemClick += delegate(object sender, ItemEventArgs args)
            {
                // When clicked, show a toast with the TextView text
                Toast.MakeText(context, ((TextView)args.View).Text,
ToastLength.Short).Show();
            };
        }

...
}



public class AbsListViewScrollListener :
Android.Widget.AbsListView.IOnScrollListener
    {
        private const int FirstItemIndex = 0;

            public IntPtr Handle { get; set; }

            public AbsListViewScrollListener() : base() { }
            public AbsListViewScrollListener(IntPtr intptr) : base() { }


            public void OnScroll(AbsListView view, int firstVisibleItem, int
visibleItemCount, int totalItemCount)
            {

            }

            public void OnScrollStateChanged(AbsListView view, ScrollState
scrollState)
            {
                if(scrollState == ScrollState.Idle)
                {
                    Android.Util.Log.Error(&quot;ScrollListText&quot;,
&quot;OnScrollStateChanged&quot;);

                }
            }
    }


But sometimes, when i'm scrolling through the list items, i get an error,
and the app crashes.

adb logcat:

I/MonoDroid( 3016): UNHANDLED EXCEPTION: System.NotSupportedException:
Unable to activate instance of type Android.Widge
t.AbsListView+IOnScrollListenerAdapter from native handle 43c80cc8 ---&gt;
System.MissingMethodException: No constructor fo
und for
Android.Widget.AbsListView+IOnScrollListenerAdapter::.ctor(System.IntPtr)
I/MonoDroid( 3016):   at System.Activator.CreateInstance (System.Type type,
BindingFlags bindingAttr, System.Reflection.
Binder binder, System.Object[] args, System.Globalization.CultureInfo
culture, System.Object[] activationAttributes) [0x
00000] in &lt;filename unknown&gt;:0
I/MonoDroid( 3016):   at System.Activator.CreateInstance (System.Type type,
System.Object[] args, System.Object[] activa
tionAttributes) [0x00000] in &lt;filename unknown&gt;:0
I/MonoDroid( 3016):   at System.Activator.CreateInstance (System.Type type,
System.Object[] args) [0x00000] in &lt;filename
 unknown&gt;:0
I/MonoDroid( 3016):   at Android.Runtime.TypeManager.CreateInstance (IntPtr
handle, System.Type targetType) [0x00000] in
 &lt;filename unknown&gt;:0
I/MonoDroid( 3016):   --- End of inner exception stack trace ---
I/MonoDroid( 3016): at Android.Runtime.TypeManager.CreateInstance
(intptr,System.Type) &lt;0x00608&gt;
I/MonoDroid( 3016): at Java.Lang.Object.GetObject (intptr,System.Type,bool)
&lt;0x001f3&gt;
I/MonoDroid( 3016): at
Java.Lang.Object.GetObject&lt;Android.Widget.AbsListView/IOnScrollListener&gt;
(intptr,bool) &lt;0x0004f&gt;
I/MonoDroid( 3016): at
Android.Widget.AbsListView/IOnScrollListenerAdapter.n_OnScroll_Landroid_widget_AbsListView_III
(i
ntptr,intptr,intptr,int,int,int) &lt;0x00043&gt;
I/MonoDroid( 3016): at (wrapper dynamic-method)
object.ea27096e-9819-4ec8-96d9-25c391564614 (intptr,intptr,intptr,int,in
t,int) &lt;0x0005b&gt;
E/mono    ( 3016): [0xafd49860:] EXCEPTION handling:
System.NotSupportedException: Unable to activate instance of type A
ndroid.Widget.AbsListView+IOnScrollListenerAdapter from native handle
43c80cc8
E/mono    ( 3016):
E/mono    ( 3016): Unhandled Exception: System.NotSupportedException: Unable
to activate instance of type Android.Widget
.AbsListView+IOnScrollListenerAdapter from native handle 43c80cc8 ---&gt;
System.MissingMethodException: No constructor fou
nd for
Android.Widget.AbsListView+IOnScrollListenerAdapter::.ctor(System.IntPtr)
E/mono    ( 3016):   at System.Activator.CreateInstance (System.Type type,
BindingFlags bindingAttr, System.Reflection.B
inder binder, System.Object[] args, System.Globalization.CultureInfo
culture, System.Object[] activationAttributes) [0x0
0000] in &lt;filename unknown&gt;:0
E/mono    ( 3016):   at System.Activator.CreateInstance (System.Type type,
System.Object[] args, System.Object[] activat
ionAttributes) [0x00000] in &lt;filename unknown&gt;:0
E/mono    ( 3016):   at System.Activator.CreateInstance (System.Type type,
System.Object[] args) [0x00000] in &lt;filename
unknown&gt;:0
E/mono    ( 3016):   at Android.Runtime.TypeManager.CreateInstance (IntPtr
handle, System.Type targetType) [0x00000] in
&lt;filename unknown&gt;:0
E/mono    ( 3016):   --- End of inner exception stack trace ---
E/mono    ( 3016):   at Android.Runtime.TypeManager.Cre
I/ActivityManager( 1317): Process com.cardmobili.androidui.androidui (pid
3016) has died.




I don't know if its my fault, because i'm doing something wrong, or if it is
an new bug of Monodroid.
Any help is welcome!

thanx for all you help,
 Orlando Silva
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20110129/92041be8/attachment-0001.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20110129/92041be8/attachment-0001.html</A> 
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002768.html">[Monodroid] HttpWebRequest use?
</A></li>
	<LI>Next message: <A HREF="002752.html">[Monodroid] I'am getting and System.MissingMethodException when i use the SetOnScrollListener's method of ListView's controller
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2751">[ date ]</a>
              <a href="thread.html#2751">[ thread ]</a>
              <a href="subject.html#2751">[ subject ]</a>
              <a href="author.html#2751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
