<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Could not load type exception (generic interfaces in a class library) Preview 14
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Could%20not%20load%20type%20exception%20%28generic%0A%20interfaces%20in%20a%20class%20library%29%20Preview%2014&In-Reply-To=098a01cbe304%248e9ed7a0%24abdc86e0%24%40com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003674.html">
   <LINK REL="Next"  HREF="003681.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Could not load type exception (generic interfaces in a class library) Preview 14</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Could%20not%20load%20type%20exception%20%28generic%0A%20interfaces%20in%20a%20class%20library%29%20Preview%2014&In-Reply-To=098a01cbe304%248e9ed7a0%24abdc86e0%24%40com"
       TITLE="[mono-android] Could not load type exception (generic interfaces in a class library) Preview 14">jpryor at novell.com
       </A><BR>
    <I>Tue Mar 15 08:52:47 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003674.html">[mono-android] Could not load type exception (generic	interfaces in a class library) Preview 14
</A></li>
        <LI>Next message: <A HREF="003681.html">[mono-android] Could not load type exception (generic	interfaces in a class library) Preview 14
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3676">[ date ]</a>
              <a href="thread.html#3676">[ thread ]</a>
              <a href="subject.html#3676">[ subject ]</a>
              <a href="author.html#3676">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mar 15, 2011, at 7:31 AM, Amir Waldman wrote:
&gt;<i> I tried using the 'Preserve' attribute trick on a few classes, but instead of giving me the name of the type in the exception as it did before, it simply showed a very general exception (with no type specified): 'A type load exception has occurred.'
</I>
More context would be useful, specifically the `adb logcat` lines surrounding that exception message. A sample to reproduce would be good, too. I assure that I also tested this with a sample project (one library + one app project, as you originally specified) and adding [Preserve(AllMembers=true)] made it work for me, so I find it odd that it's not working for you.

&gt;<i> I should add that the class that I reported earlier is derived from another class that is derived from another class that implements an interface (that was the 'A' class if you check my code sample. A : A1 =&gt; A1: A2 =&gt; A2 : IA). Even when I added the 'Preserve' attribute to the entire hierarchy, I still got the general 'type load' exception with no type specified. It is specified only when there was no use of this attribute at all. Furthermore, I couldn't see any indication for this in the ADB log like Jon showed in a  previous message.
</I>
Again, a full sample would be helpful in reproducing the issue.

&gt;<i> I just changed Linking in both class library and main assembly to 'Sdk Assemblies Only' and it loads again (that's all I checked for now). I don't see any changes in the size of the APK either since Preview 13.
</I>
You shouldn't see a significant change, as (presumably) your assemblies are (currently) tiny in comparison to the entire framework.

&gt;<i> Thanks for looking into this, I'd like to use the full capabilities of the linker. What are the benefits of linking user assemblies?
</I>
Mostly to shrink the resulting package as much as possible, which can be increasingly useful as you include larger frameworks with your app while not using the full capabilities of those frameworks. (For example, Cadenza.dll is 224KB in size, and if you only use small portion of it there's no need to waste space on the rest of it...)

 - Jon

</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003674.html">[mono-android] Could not load type exception (generic	interfaces in a class library) Preview 14
</A></li>
	<LI>Next message: <A HREF="003681.html">[mono-android] Could not load type exception (generic	interfaces in a class library) Preview 14
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3676">[ date ]</a>
              <a href="thread.html#3676">[ thread ]</a>
              <a href="subject.html#3676">[ subject ]</a>
              <a href="author.html#3676">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
