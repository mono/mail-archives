<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] ClassNotFoundException with ItemClick event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20ClassNotFoundException%20with%20ItemClick%20event&In-Reply-To=4D8CAA17.5070302%40jpobst.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003938.html">
   <LINK REL="Next"  HREF="003928.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] ClassNotFoundException with ItemClick event</H1>
    <B>Fabrice</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20ClassNotFoundException%20with%20ItemClick%20event&In-Reply-To=4D8CAA17.5070302%40jpobst.com"
       TITLE="[mono-android] ClassNotFoundException with ItemClick event">faze1224 at gmail.com
       </A><BR>
    <I>Fri Mar 25 11:30:46 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003938.html">[mono-android] ClassNotFoundException with ItemClick event
</A></li>
        <LI>Next message: <A HREF="003928.html">[mono-android] Reflection - Cannot find default constructor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3940">[ date ]</a>
              <a href="thread.html#3940">[ thread ]</a>
              <a href="subject.html#3940">[ subject ]</a>
              <a href="author.html#3940">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'll continue to search a bit before sending you the project.
I suppose the exception is swallowed somewhere in the stack, it's why I
don't have the catch block executed. I see it on VS only because I've
activate to stop on all exceptions. The monodroid exceptions are not like a
&quot;normal&quot; .net exception and the difference between first-chance exception
and unhanded exception is not clear...

I've reproduced the ListView tutorial (
<A HREF="http://mono-android.net/Tutorials/Hello_Views/List_View">http://mono-android.net/Tutorials/Hello_Views/List_View</A>) and still have this
exception behind the scene... Is it normal ?
After this exception, the tutorial list seems to works fine ... so maybe the
list in my project is not working due to something else than this exception.
I'll continue to search...

@Jonathan: changing Linking to &quot;None&quot; doesn't modify the behaviour.

Thank you for your help
Fabrice


On Fri, Mar 25, 2011 at 3:43 PM, Jonathan Pobst &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monkey at jpobst.com</A>&gt; wrote:

&gt;<i> If you have linking on (Project Properties -&gt; Mono for Android -&gt; Linking),
</I>&gt;<i> try turning it off and see if it works.
</I>&gt;<i>
</I>&gt;<i> Jonathan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 3/25/2011 9:21 AM, Fabrice wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've set up the log as requested:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         protected  override  void  OnCreate(Bundle  bundle)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         {
</I>&gt;&gt;<i>             base.OnCreate(bundle);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>             //Set the Activity's view to our list layout
</I>&gt;&gt;<i>             SetContentView(Resource.Layout.DeviceList);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>             var  server =new  MockServer();
</I>&gt;&gt;<i>             var  listView
</I>&gt;&gt;<i> =this.FindViewById&lt;ListView&gt;(Resource.Id.listView);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>             listView.Adapter =new
</I>&gt;&gt;<i>  DeviceAdapter(this,Resource.Layout.OnOffDevice, server.GetDevices());
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>             //Wire up the click event
</I>&gt;&gt;<i>             try
</I>&gt;&gt;<i>             {
</I>&gt;&gt;<i>                 listView.ItemClick +=new
</I>&gt;&gt;<i>  EventHandler&lt;ItemEventArgs&gt;(showToast);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>             }
</I>&gt;&gt;<i>             catch  (Java.Lang.Throwable  e)
</I>&gt;&gt;<i>             {
</I>&gt;&gt;<i>                 *Android.Util.Log.Error(&quot;no!&quot;, e,&quot;this is the java-side
</I>&gt;&gt;<i> exception.&quot;);*
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                 Toast.MakeText(this,&quot;Error
</I>&gt;&gt;<i> reported&quot;,ToastLength.Long).Show();
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>             }
</I>&gt;&gt;<i>         }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Problem:
</I>&gt;&gt;<i> Visual Studio correctly stop on the error when adding the handler. To be
</I>&gt;&gt;<i> more detailed, it stop 2x:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -  Instance    {Java.Lang.ClassNotFoundException: Exception of type
</I>&gt;&gt;<i> 'Java.Lang.ClassNotFoundException' was thrown.
</I>&gt;&gt;<i>   at Android.Runtime.JNIEnv.CallObjectMethod (IntPtr jobject, IntPtr
</I>&gt;&gt;<i> jmethod, Android.Runtime.JValue[] parms) [0x00024] in
</I>&gt;&gt;<i> /home/jpobst/Desktop/mondroid/Mono.Android/src/Runtime/JNIEnv.cs:328
</I>&gt;&gt;<i>   at Android.Runtime.JNIEnv.FindClass (System.String classname)
</I>&gt;&gt;<i> [0x00032] in
</I>&gt;&gt;<i> /home/jpobst/Desktop/mondroid/Mono.Android/src/Runtime/JNIEnv.cs:155
</I>&gt;&gt;<i> }    Java.Lang.ClassNotFoundException
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  - Instance    {Java.Lang.NoClassDefFoundError: Exception of type
</I>&gt;&gt;<i> 'Java.Lang.NoClassDefFoundError' was thrown.
</I>&gt;&gt;<i>   at Android.Runtime.JNIEnv.FindClass (System.String classname)
</I>&gt;&gt;<i> [0x00066] in
</I>&gt;&gt;<i> /home/jpobst/Desktop/mondroid/Mono.Android/src/Runtime/JNIEnv.cs:159
</I>&gt;&gt;<i>   at Android.Runtime.JNIEnv.FindClass (System.Type type) [0x00000] in
</I>&gt;&gt;<i> /home/jpobst/Desktop/mondroid/Mono.Android/src/Runtime/JNIEnv.cs:126
</I>&gt;&gt;<i> }    Java.Lang.NoClassDefFoundError
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But I don't know why, it completely stop executing code: the catch is
</I>&gt;&gt;<i> not executed (no log, no Toast)
</I>&gt;&gt;<i> I also tested without the debugger (only on the device), same behaviour...
</I>&gt;&gt;<i> I also tested using a &quot;catch(Exception exc)&quot; to be more generic, same
</I>&gt;&gt;<i> behaviour: the catch code is not executed
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> adb logcat (activity name is &quot;HoMIDroid.DeviceActivity&quot;) doesn't show
</I>&gt;&gt;<i> any error:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I/monodroid(21979): Activating instance of type HoMIDroid.DeviceActivity
</I>&gt;&gt;<i> I/monodroid(21979): signature
</I>&gt;&gt;<i> D/dalvikvm(21465): GC_EXPLICIT freed 119 objects / 10144 bytes in 76m
</I>&gt;&gt;<i> I/BatteryStatsImpl(   96): notePhoneSignalStrengthLocked: 3-&gt;4
</I>&gt;&gt;<i> D/SurfaceFlinger(   96): Layer::requestBuffer(this=0x91c6d8), index=1,
</I>&gt;&gt;<i> pid=21979, w=480, h=800 success
</I>&gt;&gt;<i> D/SurfaceFlinger(   96): Layer::requestBuffer(this=0x91c6d8), index=0,
</I>&gt;&gt;<i> pid=21979, w=480, h=800 success
</I>&gt;&gt;<i> D/SurfaceFlinger(   96): Layer::requestBuffer(this=0x91c6d8), index=1,
</I>&gt;&gt;<i> pid=21979, w=480, h=800 success
</I>&gt;&gt;<i> D/dalvikvm(21473): GC_EXPLICIT freed 491 objects / 25424 bytes in 65ms
</I>&gt;&gt;<i> D/PowerManagerService(   96): New lightsensor value:90, lcdValue:160
</I>&gt;&gt;<i> D/PowerManagerService(   96): New lightsensor value:40, lcdValue:160
</I>&gt;&gt;<i> W/KeyCharacterMap(21979): Bad keycharmap - filesize=32
</I>&gt;&gt;<i> W/KeyCharacterMap(21979): Error loading keycharmap file
</I>&gt;&gt;<i> '/system/usr/keychars/bravo-keypad.kcm.bin'.
</I>&gt;&gt;<i> hw.keyboards.0.devname='bravo-keypad'
</I>&gt;&gt;<i> W/KeyCharacterMap(21979): Using default keymap:
</I>&gt;&gt;<i> /system/usr/keychars/qwerty.kcm.bin
</I>&gt;&gt;<i> D/Sensors (   96): close_akm, fd=170
</I>&gt;&gt;<i> D/SurfaceFlinger(   96): Layer::setBuffers(this=0x9d0a88), pid=211,
</I>&gt;&gt;<i> w=480, h=800
</I>&gt;&gt;<i> D/SurfaceFlinger(   96): Layer::setBuffers(this=0x9d0a88), pid=211,
</I>&gt;&gt;<i> w=480, h=800
</I>&gt;&gt;<i> D/SurfaceFlinger(   96): Layer::requestBuffer(this=0x9d0a88), index=0,
</I>&gt;&gt;<i> pid=211, w=480, h=800 success
</I>&gt;&gt;<i> D/SurfaceFlinger(   96): Layer::requestBuffer(this=0x9d0a88), index=1,
</I>&gt;&gt;<i> pid=211, w=480, h=800 success
</I>&gt;&gt;<i> D/AK8973  (   72): Compass CLOSE
</I>&gt;&gt;<i> V/AlarmManager(   96): Adding Alarm{46982c80 type 0 com.htc.launcher}
</I>&gt;&gt;<i> mars 26 12:00:00 matin
</I>&gt;&gt;<i> D/PowerManagerService(   96): New lightsensor value:90, lcdValue:160
</I>&gt;&gt;<i> I/BatteryStatsImpl(   96): notePhoneSignalStrengthLocked: 4-&gt;3
</I>&gt;&gt;<i> I/BatteryStatsImpl(   96): notePhoneSignalStrengthLocked: 3-&gt;4
</I>&gt;&gt;<i> D/dalvikvm(21481): GC_EXPLICIT freed 6522 objects / 356664 bytes in 94ms
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thank you for your help
</I>&gt;&gt;<i> Fabrice
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Fri, Mar 25, 2011 at 2:27 PM, Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jpryor at novell.com</A>
</I>&gt;&gt;<i> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jpryor at novell.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    On Mar 25, 2011, at 5:27 AM, Faze Faze wrote:
</I>&gt;&gt;<i>     &gt; I'm new to monodroid (and new to android dev) and I'm facing a
</I>&gt;&gt;<i>    problem when binding the ItemClick event.
</I>&gt;&gt;<i>    ...
</I>&gt;&gt;<i>     &gt;
</I>&gt;&gt;<i>     &gt;         protected override void OnCreate(Bundle bundle)
</I>&gt;&gt;<i>     &gt;         {
</I>&gt;&gt;<i>    ...
</I>&gt;&gt;<i>     &gt;             //Wire up the click event
</I>&gt;&gt;<i>            try {
</I>&gt;&gt;<i>     &gt;             listView.ItemClick += new
</I>&gt;&gt;<i>    EventHandler&lt;ItemEventArgs&gt;(showToast);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>            } catch (Java.Lang.Throwable e) {
</I>&gt;&gt;<i>                    Android.Util.Log.Error(&quot;no!&quot;, e, &quot;this is the
</I>&gt;&gt;<i>    java-side exception.&quot;);
</I>&gt;&gt;<i>            }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     &gt; Do you have any idea on where the problem is ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    No, because we don't know what the Java-side message and stack trace
</I>&gt;&gt;<i>    are. (Fortunately, the next release will -- finally! -- include the
</I>&gt;&gt;<i>    Java side exception information when you call
</I>&gt;&gt;<i>    Java.Lang.Throwable.ToString()...)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    The above code wraps the call in a try/catch block, then uses
</I>&gt;&gt;<i>    Log.Error() to print the error message on the Android error log. You
</I>&gt;&gt;<i>    can then use `adb logcat` to view the Java-side exception message,
</I>&gt;&gt;<i>    which will either provide you enough information to figure out
</I>&gt;&gt;<i>    what's wrong, or provide us enough information to investigate
</I>&gt;&gt;<i>    further. :-)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      - Jon
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    _______________________________________________
</I>&gt;&gt;<i>    Monodroid mailing list
</I>&gt;&gt;<i>    <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    UNSUBSCRIBE INFORMATION:
</I>&gt;&gt;<i>    <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Monodroid mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20110325/52923ffd/attachment-0001.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20110325/52923ffd/attachment-0001.html</A> 
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003938.html">[mono-android] ClassNotFoundException with ItemClick event
</A></li>
	<LI>Next message: <A HREF="003928.html">[mono-android] Reflection - Cannot find default constructor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3940">[ date ]</a>
              <a href="thread.html#3940">[ thread ]</a>
              <a href="subject.html#3940">[ subject ]</a>
              <a href="author.html#3940">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
