<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Possible GC Bug?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Possible%20GC%20Bug%3F&In-Reply-To=AANLkTinzzg0Fd%3D9V8To0b1qUr2%2BVefadV59sNrY9JzNN%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003769.html">
   <LINK REL="Next"  HREF="003771.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Possible GC Bug?</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Possible%20GC%20Bug%3F&In-Reply-To=AANLkTinzzg0Fd%3D9V8To0b1qUr2%2BVefadV59sNrY9JzNN%40mail.gmail.com"
       TITLE="[mono-android] Possible GC Bug?">jpryor at novell.com
       </A><BR>
    <I>Fri Mar 18 12:56:34 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003769.html">[mono-android] Possible GC Bug?
</A></li>
        <LI>Next message: <A HREF="003771.html">[mono-android] Possible GC Bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3770">[ date ]</a>
              <a href="thread.html#3770">[ thread ]</a>
              <a href="subject.html#3770">[ subject ]</a>
              <a href="author.html#3770">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mar 18, 2011, at 12:43 PM, Aaron Knabb wrote:
&gt;<i> However, if I am creating and disposing of a large bitmap every time my activity is recreated (say in an ImageView), I run out of memory before long.
</I>
The problem -- which is present on every GC system -- is that Mono's GC doesn't know how big the Dalvik-allocated bitmap is (just as .NET's GC doesn't know that you just called Marshal.AllocHGlobal() to allocate 4GB of memory...). Furthermore, Mono's GC _can't_ know how big the Dalvik-allocated bitmap is, and even if you knew how much memory it took GC.AddMemoryPressure() isn't supported.

Thus, in this (and similar) cases you need to help the GC out, as you know things the GC doesn't, and thus the GC.Collect() call is appropriate.

 - Jon

</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003769.html">[mono-android] Possible GC Bug?
</A></li>
	<LI>Next message: <A HREF="003771.html">[mono-android] Possible GC Bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3770">[ date ]</a>
              <a href="thread.html#3770">[ thread ]</a>
              <a href="subject.html#3770">[ subject ]</a>
              <a href="author.html#3770">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
