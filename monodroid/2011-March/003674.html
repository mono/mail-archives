<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Could not load type exception (generic	interfaces in a class library) Preview 14
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Could%20not%20load%20type%20exception%20%28generic%0A%09interfaces%20in%20a%20class%20library%29%20Preview%2014&In-Reply-To=AANLkTimvVJ8VYvQAzp8hy2VnrSPeL8aSGCp_ia5hTooB%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003673.html">
   <LINK REL="Next"  HREF="003676.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Could not load type exception (generic	interfaces in a class library) Preview 14</H1>
    <B>Amir Waldman</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Could%20not%20load%20type%20exception%20%28generic%0A%09interfaces%20in%20a%20class%20library%29%20Preview%2014&In-Reply-To=AANLkTimvVJ8VYvQAzp8hy2VnrSPeL8aSGCp_ia5hTooB%40mail.gmail.com"
       TITLE="[mono-android] Could not load type exception (generic	interfaces in a class library) Preview 14">amirw2k at gmail.com
       </A><BR>
    <I>Tue Mar 15 07:31:39 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003673.html">[mono-android] Could not load type exception (generic interfaces in a class library) Preview 14
</A></li>
        <LI>Next message: <A HREF="003676.html">[mono-android] Could not load type exception (generic interfaces in a class library) Preview 14
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3674">[ date ]</a>
              <a href="thread.html#3674">[ thread ]</a>
              <a href="subject.html#3674">[ subject ]</a>
              <a href="author.html#3674">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

First, I can assure you nothing has changed in my code. It still works in Preview 13 when I set the system time to a week earlier!

I tried using the 'Preserve' attribute trick on a few classes, but instead of giving me the name of the type in the exception as it did before, it simply showed a very general exception (with no type specified): 'A type load exception has occurred.'


I should add that the class that I reported earlier is derived from another class that is derived from another class that implements an interface (that was the 'A' class if you check my code sample. A : A1 =&gt; A1: A2 =&gt; A2 : IA). Even when I added the 'Preserve' attribute to the entire hierarchy, I still got the general 'type load' exception with no type specified. It is specified only when there was no use of this attribute at all. Furthermore, I couldn't see any indication for this in the ADB log like Jon showed in a  previous message.


I just changed Linking in both class library and main assembly to 'Sdk Assemblies Only' and it loads again (that's all I checked for now). I don't see any changes in the size of the APK either since Preview 13.

Thanks for looking into this, I'd like to use the full capabilities of the linker. What are the benefits of linking user assemblies?



Regards,
Amir



-----Original Message-----
From: Jb Evain [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jbevain at gmail.com</A>] 
Sent: Tuesday, March 15, 2011 12:50 PM
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>
Cc: Amir Waldman
Subject: Re: [mono-android] Could not load type exception (generic interfaces in a class library) Preview 14

Hi,

On Tue, Mar 8, 2011 at 10:39 AM, Amir Waldman &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">amirw2k at gmail.com</A>&gt; wrote:
&gt;<i> Does disabling linking means that the APK will go up to 15MB?
</I>
As an intermediate step, you can use the Link SDK only setting, which
leaves your assemblies untouched.

&gt;<i> What are the implications of this 'Preserve' attribute in terms of runtime,
</I>&gt;<i> debugging, memory usage, etc?
</I>
Simple: none :)

&gt;<i> You say you may not be able to fix it. Can you explain why it worked in
</I>&gt;<i> Preview 13 but broke one preview later?
</I>
There was no change in the linker during those two previews, so I
suspect a change in your code base triggered this.

Thanks for reporting this,

Best,

Jb

</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003673.html">[mono-android] Could not load type exception (generic interfaces in a class library) Preview 14
</A></li>
	<LI>Next message: <A HREF="003676.html">[mono-android] Could not load type exception (generic interfaces in a class library) Preview 14
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3674">[ date ]</a>
              <a href="thread.html#3674">[ thread ]</a>
              <a href="subject.html#3674">[ subject ]</a>
              <a href="author.html#3674">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
