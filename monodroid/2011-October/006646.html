<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Calling secured WCF Web Service
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Calling%20secured%20WCF%20Web%20Service&In-Reply-To=D7C394926CDE044A9287D0D6D87360B139200808B4%40aumail01.PROJECTCENTRE.loc">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006645.html">
   <LINK REL="Next"  HREF="006647.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Calling secured WCF Web Service</H1>
    <B>Mike Child</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Calling%20secured%20WCF%20Web%20Service&In-Reply-To=D7C394926CDE044A9287D0D6D87360B139200808B4%40aumail01.PROJECTCENTRE.loc"
       TITLE="[mono-android] Calling secured WCF Web Service">mike at mikechild.net
       </A><BR>
    <I>Mon Oct 10 21:18:57 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006645.html">[mono-android] Calling secured WCF Web Service
</A></li>
        <LI>Next message: <A HREF="006647.html">[mono-android] Calling secured WCF Web Service (Mike Child)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6646">[ date ]</a>
              <a href="thread.html#6646">[ thread ]</a>
              <a href="subject.html#6646">[ subject ]</a>
              <a href="author.html#6646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>As Jon said in his previous email....

Are you sure it isn't a certificate problem? Specifically, are you able to
connect to the same https URL via Browser without being prompted to
(manually) accept the certificate?

Mono for Android delegates HTTPS certificate authentication to Android, so
if Android/Browser don't like the URL, then your app won't be able to
connect.

 - Jon


When you click on the link you provided...
<A HREF="https://services.projectcentre.net/pcmobile/2.0/ProjectCentreService.svc">https://services.projectcentre.net/pcmobile/2.0/ProjectCentreService.svc</A> ,the
browser in Android does prompt you to accept the certificate. This is why
you can't connect in your application to https.


Mike Child


On Mon, Oct 10, 2011 at 6:52 PM, Nirban Dutta &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Nirban.Dutta at projectcentre.net</A>&gt; wrote:

&gt;<i> Hi,****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> I was trying to connect to our secured web service, from android
</I>&gt;<i> application without success:****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://services.projectcentre.net/pcmobile/2.0/ProjectCentreService.svc**">https://services.projectcentre.net/pcmobile/2.0/ProjectCentreService.svc**</A>
</I>&gt;<i> **
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> It is accessible through browser.****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Regards,****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> *From:* Nirban Dutta
</I>&gt;<i> *Sent:* Friday, 7 October 2011 9:18 AM
</I>&gt;<i> *To:* '<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>'
</I>&gt;<i> *Subject:* Calling secured WCF Web Service****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Hi,****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> We are able to connect to Web service over HTTP, but failed to connect to
</I>&gt;<i> HTTPS web service.****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Here is our code and we read a config file and set binding.Security.Mode,
</I>&gt;<i> is there anything else we need to specify for connecting to secured web
</I>&gt;<i> service?****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> public static ProjectCentreProxy CreateProxy(XElement configurationElement)
</I>&gt;<i> ****
</I>&gt;<i>
</I>&gt;<i>      {****
</I>&gt;<i>
</I>&gt;<i>          var svc = new ProjectCentreProxy();****
</I>&gt;<i>
</I>&gt;<i>          EndpointAddress endpoint;****
</I>&gt;<i>
</I>&gt;<i>          endpoint = (from ep in
</I>&gt;<i> configurationElement.Descendants(&quot;endpoint&quot;)****
</I>&gt;<i>
</I>&gt;<i>                      select new
</I>&gt;<i> EndpointAddress(ep.Attribute(&quot;address&quot;).Value)).FirstOrDefault();****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i>          var binding = new BasicHttpBinding();****
</I>&gt;<i>
</I>&gt;<i>          string httpConfig = (from ep in
</I>&gt;<i> configurationElement.Descendants(&quot;security&quot;)****
</I>&gt;<i>
</I>&gt;<i>                               select
</I>&gt;<i> ep.Attribute(&quot;mode&quot;).Value).FirstOrDefault();****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i>          if (!string.IsNullOrEmpty(httpConfig) &amp;&amp; httpConfig==&quot;Transport&quot;)
</I>&gt;<i> ****
</I>&gt;<i>
</I>&gt;<i>          {****
</I>&gt;<i>
</I>&gt;<i>              binding.Security.Mode =
</I>&gt;<i> System.ServiceModel.BasicHttpSecurityMode.Transport;****
</I>&gt;<i>
</I>&gt;<i>          }****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i>          binding.SendTimeout = new TimeSpan(0, 20, 0);****
</I>&gt;<i>
</I>&gt;<i>          binding.MaxReceivedMessageSize = 2147483647;****
</I>&gt;<i>
</I>&gt;<i>          binding.MaxBufferSize = 2147483647;****
</I>&gt;<i>
</I>&gt;<i>          svc.Proxy = new ProjectCentreServiceClient(binding, endpoint);***
</I>&gt;<i> *
</I>&gt;<i>
</I>&gt;<i>          ****
</I>&gt;<i>
</I>&gt;<i>          return svc;****
</I>&gt;<i>
</I>&gt;<i>      }****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Here is the exception we get:****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> -                              ex
</I>&gt;<i> {System.ServiceModel.EndpointNotFoundException: A system exception has
</I>&gt;<i> occurred. ---&gt; System.Net.WebException: Error: ConnectFailure****
</I>&gt;<i>
</I>&gt;<i>   at System.Net.HttpWebRequest.EndGetRequestStream (IAsyncResult
</I>&gt;<i> asyncResult) [0x00043] in
</I>&gt;<i> /home/jon/Development/xamarin/mono/mcs/class/System/System.Net/HttpWebRequest.cs:727
</I>&gt;<i> ****
</I>&gt;<i>
</I>&gt;<i>   at
</I>&gt;<i> System.ServiceModel.Channels.HttpRequestChannel+&lt;BeginProcessRequest&gt;c__AnonStoreyA.&lt;&gt;m__7
</I>&gt;<i> (IAsyncResult r) [0x0001d] in
</I>&gt;<i> /home/jon/Development/xamarin/mono/mcs/class/System.ServiceModel/System.ServiceModel.Channels/HttpRequestChannel.cs:181
</I>&gt;<i> ****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Regards,****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> *Nirban Dutta*
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> Software Engineer****
</I>&gt;<i>
</I>&gt;<i> [image: PROJECTCENTRE_LOGO_] &lt;<A HREF="http://www.projectcentre.net">http://www.projectcentre.net</A>&gt;****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> *P* 1300 653 420 |* M* +61 432 675 543 ****
</I>&gt;<i>
</I>&gt;<i> [image: Deloitte_TF50Winner]****
</I>&gt;<i>
</I>&gt;<i> *F* +61 (0) 2 9420 8277****
</I>&gt;<i>
</I>&gt;<i> 3 / 11 Orion Road, Lane Cove, NSW, Australia 2066****
</I>&gt;<i>
</I>&gt;<i> CADX PTY LTD DISCLAIMER: The information contained in this email message is
</I>&gt;<i> CONFIDENTIAL INFORMATION, and may also be LEGALLY PRIVILEGED, intended only
</I>&gt;<i> for the individual or entity named above. If you are not the intended
</I>&gt;<i> recipient, you are hereby notified that any use, review, dissemination,
</I>&gt;<i> distribution or copying of this document is strictly prohibited. If you have
</I>&gt;<i> received this document in error, please immediately notify us by email and
</I>&gt;<i> destroy the original message. CADX disclaims all liability and
</I>&gt;<i> responsibility for any direct or indirect loss or damage that may be
</I>&gt;<i> suffered by any recipient of this message****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111010/fe3b161d/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20111010/fe3b161d/attachment-0001.html</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 9716 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111010/fe3b161d/attachment-0002.jpe">http://lists.ximian.com/pipermail/monodroid/attachments/20111010/fe3b161d/attachment-0002.jpe</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 25096 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111010/fe3b161d/attachment-0003.jpe">http://lists.ximian.com/pipermail/monodroid/attachments/20111010/fe3b161d/attachment-0003.jpe</A> 
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006645.html">[mono-android] Calling secured WCF Web Service
</A></li>
	<LI>Next message: <A HREF="006647.html">[mono-android] Calling secured WCF Web Service (Mike Child)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6646">[ date ]</a>
              <a href="thread.html#6646">[ thread ]</a>
              <a href="subject.html#6646">[ subject ]</a>
              <a href="author.html#6646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
