<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Error in downloading many files from WCF Web	Service
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Error%20in%20downloading%20many%20files%20from%20WCF%20Web%0A%09Service&In-Reply-To=D7C394926CDE044A9287D0D6D87360B13920233B66%40aumail01.PROJECTCENTRE.loc">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006893.html">
   <LINK REL="Next"  HREF="006895.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Error in downloading many files from WCF Web	Service</H1>
    <B>Willem Meints</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Error%20in%20downloading%20many%20files%20from%20WCF%20Web%0A%09Service&In-Reply-To=D7C394926CDE044A9287D0D6D87360B13920233B66%40aumail01.PROJECTCENTRE.loc"
       TITLE="[mono-android] Error in downloading many files from WCF Web	Service">willemm at infosupport.com
       </A><BR>
    <I>Fri Oct 28 04:09:42 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006893.html">[mono-android] Downloading new version
</A></li>
        <LI>Next message: <A HREF="006895.html">[mono-android] Content Provider demo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6892">[ date ]</a>
              <a href="thread.html#6892">[ thread ]</a>
              <a href="subject.html#6892">[ subject ]</a>
              <a href="author.html#6892">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Nirban,

I see a stacktrace with your bugreport and in the message below, but I am missing the exceptionmessage.
Do you have one and can you post it here or in the bugreport?

Maybe it's still something with the app itself, but I'm unable to tell from just the stacktrace :)

Kind regards,

Willem Meints

Van: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>] Namens Nirban Dutta
Verzonden: Friday, October 28, 2011 9:04 AM
Aan: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>
Onderwerp: [mono-android] Error in downloading many files from WCF Web Service

Hi,

I have created a bug for this:
<A HREF="http://bugzilla.xamarin.com/show_bug.cgi?id=1741">http://bugzilla.xamarin.com/show_bug.cgi?id=1741</A>

I know there are similar bugs reported earlier in bugzilla, please give me a solution for this.
This is critical, and if we can not resolve this, our product is gone, we can not proceed at all.

Here is the detail again:

We are downloading lot of image files  by calling web method once for each
file in loop. We receive the file as stream of bytes.

When tested, for a download of about 50~200 files,  after few 20~30 files the
web service call fails and the app crashes, while downloading any random
file(not specific to any file).
File sizes are normally 0.5MB to 4 MB,  and we have already set timeout etc,
as given below:

         binding.SendTimeout = new TimeSpan(0, 20, 0);
         binding.MaxReceivedMessageSize = 2147483647;
         binding.MaxBufferSize = 2147483647;
         svc.Proxy = new ProjectCentreServiceClient(binding, endpoint);

I have monitored the error and mostly this appears:

10-26 16:35:00.975: INFO/mono(25398): Stacktrace:
10-26 16:35:00.979: INFO/mono(25398):   at System.Text.StringBuilder.InternalEnsureCapacity (int) &lt;0x000b7&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Text.StringBuilder.Append (char) &lt;0x0003f&gt;
10-26 16:35:00.979: INFO/mono(25398):   at Mono.Xml2.XmlTextReader.ReadText (bool) &lt;0x0010f&gt;
10-26 16:35:00.979: INFO/mono(25398):   at Mono.Xml2.XmlTextReader.ReadContent () &lt;0x001db&gt;
10-26 16:35:00.979: INFO/mono(25398):   at Mono.Xml2.XmlTextReader.Read () &lt;0x001d3&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Xml.XmlTextReader.Read () &lt;0x000c7&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Xml.XmlSimpleDictionaryReader.Read () &lt;0x0001f&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Xml.XmlReader.ReadStartElement () &lt;0x00033&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Xml.XmlDictionaryReader.ReadElementContentAsString () &lt;0x0004f&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Runtime.Serialization.XmlFormatterDeserializer.DeserializePrimitive (System.Type,System.Xml.XmlReader,System.Xml.XmlQualifiedName) &lt;0x002db&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Runtime.Serialization.XmlFormatterDeserializer.Deserialize (System.Type,System.Xml.XmlReader) &lt;0x004c7&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Runtime.Serialization.SerializationMap.DeserializeContent (System.Xml.XmlReader,System.Runtime.Serialization.XmlFormatterDeserializer,string,bool) &lt;0x004cb&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Runtime.Serialization.SerializationMap.DeserializeContent (System.Xml.XmlReader,System.Runtime.Serialization.XmlFormatterDeserializer,string) &lt;0x00037&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Runtime.Serialization.SerializationMap.DeserializeObject (System.Xml.XmlReader,System.Runtime.Serialization.XmlFormatterDeserializer) &lt;0x000b7&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Runtime.Serialization.XmlFormatterDeserializer.DeserializeByMap (System.Xml.XmlQualifiedName,System.Type,System.Xml.XmlReader) &lt;0x00147&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Runtime.Serialization.XmlFormatterDeserializer.Deserialize (System.Type,System.Xml.XmlReader) &lt;0x00527&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Runtime.Serialization.XmlFormatterDeserializer.Deserialize (System.Xml.XmlReader,System.Type,System.Runtime.Serialization.KnownTypeCollection,System.Runtime.Serialization.IDataContractSurrogate,System.Runtime.Serialization.DataContractResolver,System.Runtime.Serialization.DataContractResolver,string,string,bool) &lt;0x000ef&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Runtime.Serialization.DataContractSerializer.ReadObject (System.Xml.XmlDictionaryReader,bool) &lt;0x000c3&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.Runtime.Serialization.XmlObjectSerializer.ReadObject (System.Xml.XmlDictionaryReader) &lt;0x0002b&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.ServiceModel.Dispatcher.DataContractMessagesFormatter.ReadMessagePart (System.ServiceModel.Description.MessagePartDescription,System.Xml.XmlDictionaryReader) &lt;0x00093&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.ServiceModel.Dispatcher.DataContractMessagesFormatter.MessageToParts (System.ServiceModel.Description.MessageDescription,System.ServiceModel.Channels.Message) &lt;0x001af&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.ServiceModel.Dispatcher.BaseMessagesFormatter.DeserializeReply (System.ServiceModel.Channels.Message,object[]) &lt;0x00107&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeReply (System.ServiceModel.Channels.Message,object[]) &lt;0x0002f&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Description.OperationDescription,object[]) &lt;0x0051b&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.ServiceModel.MonoInternal.ClientRuntimeChannel.DoProcess (System.Reflection.MethodBase,string,object[]) &lt;0x00077&gt;
10-26 16:35:00.979: INFO/mono(25398):   at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Process (System.Reflection.MethodBase,string,object[]) &lt;0x00037&gt;

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111028/a9bbbbf0/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20111028/a9bbbbf0/attachment-0001.html</A> 
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006893.html">[mono-android] Downloading new version
</A></li>
	<LI>Next message: <A HREF="006895.html">[mono-android] Content Provider demo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6892">[ date ]</a>
              <a href="thread.html#6892">[ thread ]</a>
              <a href="subject.html#6892">[ subject ]</a>
              <a href="author.html#6892">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
