<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] SMS Message Receiver
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20SMS%20Message%20Receiver&In-Reply-To=CAC30Ovj_PLi3uiHYh27z%3DCXUgLcYE5rK1Ysmv5Yc3U98MTfAUg%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006744.html">
   <LINK REL="Next"  HREF="006773.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] SMS Message Receiver</H1>
    <B>ChrisNTR</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20SMS%20Message%20Receiver&In-Reply-To=CAC30Ovj_PLi3uiHYh27z%3DCXUgLcYE5rK1Ysmv5Yc3U98MTfAUg%40mail.gmail.com"
       TITLE="[mono-android] SMS Message Receiver">chrisntr at gmail.com
       </A><BR>
    <I>Mon Oct 17 17:42:30 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006744.html">[mono-android] SMS Message Receiver
</A></li>
        <LI>Next message: <A HREF="006773.html">[mono-android] SMS Message Receiver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6751">[ date ]</a>
              <a href="thread.html#6751">[ thread ]</a>
              <a href="subject.html#6751">[ subject ]</a>
              <a href="author.html#6751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael,

I had responded to you on this through the support e-mail but here's my
message incase you missed it and for everyone else to see too,

This has been rather tricky but you can convert a Object to a Object[] by
using the following lines:

var pdus = bundle.Get (&quot;pdus&quot;);
Java.Lang.Object[] castedPdus =
JNIEnv.GetArray&lt;Java.Lang.Object&gt;(pdus.Handle);

This solves one half of the problem, when you have your casted PDUs, you
still need to convert those objects into a byte array, and you would do this
like the following;

var bytes = new Byte[JNIEnv.GetArrayLength(castedPdus[i].Handle)];
JNIEnv.CopyArray(castedPdus[i].Handle, bytes);

So the final example will look something like this;
<A HREF="https://gist.github.com/cc8eec0c5b35fffc05cb">https://gist.github.com/cc8eec0c5b35fffc05cb</A>

I hope this helps! This was quite something to figure out!

Chris Hardy

On Mon, Oct 17, 2011 at 8:19 PM, Sayed Arian Kooshesh &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">kooshesh at gmail.com</A>&gt;wrote:

&gt;<i> this is actually a really common error i've experienced in things
</I>&gt;<i> other than this project.
</I>&gt;<i>
</I>&gt;<i> Try ObjectDumper  it might help you continue past this.
</I>&gt;<i>
</I>&gt;<i> On Mon, Oct 17, 2011 at 2:15 PM, mcgear &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">michael.gearhardt at zed.com</A>&gt; wrote:
</I>&gt;<i> &gt; That is correct, however this should be returning an array...  As you can
</I>&gt;<i> see
</I>&gt;<i> &gt; from this QuickWatch output:
</I>&gt;<i> &gt; -        Class  {class [Ljava.lang.Object;}     Java.Lang.Class
</I>&gt;<i> &gt; +        base   {Java.Lang.Object}      Java.Lang.Object
</I>&gt;<i> &gt;                CanonicalName   &quot;java.lang.Object[]&quot;    string
</I>&gt;<i> &gt; +        ClassLoader    {<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">java.lang.BootClassLoader at 4001bde0</A>}
</I>&gt;<i> &gt; Java.Lang.ClassLoaderInvoker
</I>&gt;<i> &gt; +        ComponentType  {class java.lang.Object}        Java.Lang.Class
</I>&gt;<i> &gt; +        DeclaringClass (null)  object
</I>&gt;<i> &gt; +        EnclosingClass (null)  object
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The CanonicalName states that this is a java.lang.Object[]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; And if you look at an article
</I>&gt;<i> &gt; (<A HREF="http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android">http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android</A>)
</I>&gt;<i> &gt; you'll see that the Android API is in fact supposed to return an object[]
</I>&gt;<i> &gt; for the &quot;PDUS&quot;...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Any additional help would be great!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; View this message in context:
</I>&gt;<i> <A HREF="http://mono-for-android.1047100.n5.nabble.com/SMS-Message-Receiver-tp4903060p4911172.html">http://mono-for-android.1047100.n5.nabble.com/SMS-Message-Receiver-tp4903060p4911172.html</A>
</I>&gt;<i> &gt; Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Monodroid mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; UNSUBSCRIBE INFORMATION:
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Extreme Knowledge is not something for which he programs a computer
</I>&gt;<i> but for which his computer is programming him.
</I>&gt;<i>
</I>&gt;<i> -Wozniak
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>


-- 
ChrisNTR
Microsoft ASPInsider
<A HREF="http://weblogs.asp.net/chrishardy">http://weblogs.asp.net/chrishardy</A>
<A HREF="http://twitter.com/chrisntr">http://twitter.com/chrisntr</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111017/bd8651a5/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20111017/bd8651a5/attachment.html</A> 
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006744.html">[mono-android] SMS Message Receiver
</A></li>
	<LI>Next message: <A HREF="006773.html">[mono-android] SMS Message Receiver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6751">[ date ]</a>
              <a href="thread.html#6751">[ thread ]</a>
              <a href="subject.html#6751">[ subject ]</a>
              <a href="author.html#6751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
