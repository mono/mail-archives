<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] weird one...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20weird%20one...&In-Reply-To=CABunV9XNNCOh1EmC_qVWSipxmtE0C%2B0bw-GS6eb-1SXNPXLLug%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006616.html">
   <LINK REL="Next"  HREF="006617.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] weird one...</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20weird%20one...&In-Reply-To=CABunV9XNNCOh1EmC_qVWSipxmtE0C%2B0bw-GS6eb-1SXNPXLLug%40mail.gmail.com"
       TITLE="[mono-android] weird one...">jonp at xamarin.com
       </A><BR>
    <I>Fri Oct  7 11:21:03 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006616.html">[mono-android] weird one...
</A></li>
        <LI>Next message: <A HREF="006617.html">[mono-android] Deployment error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6618">[ date ]</a>
              <a href="thread.html#6618">[ thread ]</a>
              <a href="subject.html#6618">[ subject ]</a>
              <a href="author.html#6618">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Oct 7, 2011, at 7:18 AM, Iain Mcleod wrote:
&gt;<i> Weird and rather worrying.  I cannot explain this stacktrace at all as the UserLog class is thread safe as far as I can see and in fact has been in production across multiple platforms for years.
</I>&gt;<i> Sorry, I don't have the actual exception message, there did not appear to be one in the logcat output.
</I>
I see lots of `catch(Exception){}` blocks. Do you know how many exceptions are being generated, if any?

I ask because there was a Local Reference leak (fixed in 1.9.1) around exception handling. If you're not throwing exceptions, this shouldn't be an issue, but if you are, and you never return to Java code (assuming a Java-&gt;managed invocation, which wouldn't be the case for managed threads), then you could run out of Local References.

&gt;<i> Only slightly nonstandard thing I can think of is that UserLog is in a library dll which is built with a minimum target platform version of 1.6 whereas the app was built to target 2.2.
</I>
This shouldn't be the problem, but don't do that. :-)

The primary reason we have different versions of Mono.Android.dll is because android.jar changed in a forward-compatible manner, but not a backward compatible manner -- some members were moved from a derived class into an (introduced) base class. This works fine if you're running an older app on a new Android, but it bombs horribly if you run a newer app against an older Android (the method doesn't exist!).

Thus, Mono.Android.dll v1.6 will differ from Mono.Android.dll v2.2, but only Mono.Android.dll v2.2 will be bundled with your app. This _could_ cause compatibility problems due to the aforementioned member movement.

Again, this shouldn't be the cause of your crash, but it's something to avoid.

 - Jon

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006616.html">[mono-android] weird one...
</A></li>
	<LI>Next message: <A HREF="006617.html">[mono-android] Deployment error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6618">[ date ]</a>
              <a href="thread.html#6618">[ thread ]</a>
              <a href="subject.html#6618">[ subject ]</a>
              <a href="author.html#6618">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
