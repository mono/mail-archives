<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Using the device camera and getting a result - OnActivityResult is NEVER called?!?!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Using%20the%20device%20camera%20and%20getting%20a%20result%20-%0A%20OnActivityResult%20is%20NEVER%20called%3F%21%3F%21&In-Reply-To=1318605389168-4902949.post%40n5.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006694.html">
   <LINK REL="Next"  HREF="006695.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Using the device camera and getting a result - OnActivityResult is NEVER called?!?!</H1>
    <B>Brian Matz</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Using%20the%20device%20camera%20and%20getting%20a%20result%20-%0A%20OnActivityResult%20is%20NEVER%20called%3F%21%3F%21&In-Reply-To=1318605389168-4902949.post%40n5.nabble.com"
       TITLE="[mono-android] Using the device camera and getting a result - OnActivityResult is NEVER called?!?!">bmatz at mobileepiphany.com
       </A><BR>
    <I>Fri Oct 14 11:30:25 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006694.html">[mono-android] Using the device camera and getting a result - OnActivityResult is NEVER called?!?!
</A></li>
        <LI>Next message: <A HREF="006695.html">[mono-android] Using the device camera and getting a result - OnActivityResult is NEVER called?!?!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6696">[ date ]</a>
              <a href="thread.html#6696">[ thread ]</a>
              <a href="subject.html#6696">[ subject ]</a>
              <a href="author.html#6696">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Outside my project, in a new, empty Android app, both your code and mine
works correctly with the camera, and OnActivityResult IS called.

This leads me to believe that the problem lies somewhere else in my code.

You see, my application only has 1 activity, the rest of the 'screens' are
created in code and applied to that activity's main layout.

In the code in question, I'm calling into the Activity's public method
StartCamera() that I posted earlier, making the presumable assumption that
it should function as if it were all invoked by that Activity directly.

In fact, I've taken it one step further, and just called the code in
question directly from the Activity itself on startup, but the same failed
results appear there too.

Thoughts ?

Thanks,
Brian Matz
Software Architect
Mobile Epiphany


On Fri, Oct 14, 2011 at 9:16 AM, efontana &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">eric at fontanas.net</A>&gt; wrote:

&gt;<i> This code works for me, and OnActivityResult is called:
</I>&gt;<i>
</I>&gt;<i>  void useCamera()
</I>&gt;<i>    {
</I>&gt;<i>      Intent intent = new
</I>&gt;<i> Intent(Android.Provider.MediaStore.ActionImageCapture);
</I>&gt;<i>
</I>&gt;<i>      string xp =
</I>&gt;<i> System.IO.Path.Combine(
</I>&gt;<i> Android.OS.Environment.ExternalStorageDirectory.Name,
</I>&gt;<i> &quot;Android/data/com.myprereg.leads/file/capturedBadge.jpg&quot;);
</I>&gt;<i>      Java.IO.File xfile = new Java.IO.File(xp);
</I>&gt;<i>      if (xfile.Exists())
</I>&gt;<i>        xfile.Delete();
</I>&gt;<i>
</I>&gt;<i>      try
</I>&gt;<i>      {
</I>&gt;<i>        if (!xfile.Exists())
</I>&gt;<i>        {
</I>&gt;<i>          Console.WriteLine(&quot;File {0} does not exist&quot;, xp);
</I>&gt;<i>          xfile.ParentFile.Mkdirs();
</I>&gt;<i>          xfile.CreateNewFile();
</I>&gt;<i>        }
</I>&gt;<i>      }
</I>&gt;<i>      catch (Exception ex)
</I>&gt;<i>      {
</I>&gt;<i>        Console.WriteLine(&quot;Error: {0}&quot;, ex.Message);
</I>&gt;<i>      }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>      _badgeFileUri = Android.Net.Uri.FromFile(xfile);
</I>&gt;<i>
</I>&gt;<i>      Console.WriteLine(_badgeFileUri);
</I>&gt;<i>
</I>&gt;<i>      intent.PutExtra(Android.Provider.MediaStore.ExtraOutput,
</I>&gt;<i> _badgeFileUri);
</I>&gt;<i>      StartActivityForResult(intent, TAKE_PICTURE);
</I>&gt;<i>    }
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://mono-for-android.1047100.n5.nabble.com/Using-the-device-camera-and-getting-a-result-OnActivityResult-is-NEVER-called-tp4902905p4902949.html">http://mono-for-android.1047100.n5.nabble.com/Using-the-device-camera-and-getting-a-result-OnActivityResult-is-NEVER-called-tp4902905p4902949.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111014/8be60702/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20111014/8be60702/attachment.html</A> 
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006694.html">[mono-android] Using the device camera and getting a result - OnActivityResult is NEVER called?!?!
</A></li>
	<LI>Next message: <A HREF="006695.html">[mono-android] Using the device camera and getting a result - OnActivityResult is NEVER called?!?!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6696">[ date ]</a>
              <a href="thread.html#6696">[ thread ]</a>
              <a href="subject.html#6696">[ subject ]</a>
              <a href="author.html#6696">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
