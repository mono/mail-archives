<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] getAssets()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20getAssets%28%29&In-Reply-To=%3C22ACC53D-AD68-4949-B298-AA8CFAA948F1%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013311.html">
   <LINK REL="Next"  HREF="013315.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] getAssets()</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20getAssets%28%29&In-Reply-To=%3C22ACC53D-AD68-4949-B298-AA8CFAA948F1%40xamarin.com%3E"
       TITLE="[mono-android] getAssets()">jonp at xamarin.com
       </A><BR>
    <I>Tue Feb 12 17:28:48 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="013311.html">[mono-android] getAssets()
</A></li>
        <LI>Next message: <A HREF="013315.html">[mono-android] app is misconfigured for facebook login Mono for	Android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13316">[ date ]</a>
              <a href="thread.html#13316">[ thread ]</a>
              <a href="subject.html#13316">[ subject ]</a>
              <a href="author.html#13316">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Feb 11, 2013, at 6:12 PM, Hulot &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">cahulot at hotmail.com</A>&gt; wrote:
&gt;<i> Any news on this problem? I&#180;m getting exception as well when using : tf = Typeface.CreateFromAsset(context.Assets, &quot;fonts/somefont.ttf&quot;);
</I>
It would help matters if the stack trace were nicely formatted and readable [0].

The problem is that Android is throwing a java.lang.RuntimeException. Beyond that, you'd need to investigate further:

	<A HREF="https://github.com/android/platform_frameworks_base/blob/master/graphics/java/android/graphics/Typeface.java#L175">https://github.com/android/platform_frameworks_base/blob/master/graphics/java/android/graphics/Typeface.java#L175</A>
	<A HREF="https://github.com/android/platform_frameworks_base/blob/master/graphics/java/android/graphics/Typeface.java#L149">https://github.com/android/platform_frameworks_base/blob/master/graphics/java/android/graphics/Typeface.java#L149</A>

Looks like Typeface.nativeCreateFromAsset() is returning an &quot;invalid&quot; value:

	<A HREF="https://github.com/android/platform_frameworks_base/blob/master/core/jni/android/graphics/Typeface.cpp#L115">https://github.com/android/platform_frameworks_base/blob/master/core/jni/android/graphics/Typeface.cpp#L115</A>

Unfortunately it doesn't look like it prints anything to logcat to explain _why_ it's returning an error value; my initial guess is that either context.Assets is null (weird?) or you don't have an Assets\fonts\somefont.ttf file with a build action of AndroidAsset.

 - Jon

[0]: Java.Lang.RuntimeException: native typeface cannot be made
  at Android.Runtime.JNIEnv.CallStaticObjectMethod (intptr,intptr,Android.Runtime.JValue[]) [0x00024] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.4-series/6418373f/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.g.cs:767 
  at Android.Graphics.Typeface.CreateFromAsset (Android.Content.Res.AssetManager,string) [0x00034] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.4-series/6418373f/source/monodroid/src/Mono.Android/platforms/android-16/src/generated/Android.Graphics.Typeface.cs:201 
  at CalculatorTest.Activity1.OnCreate (Android.OS.Bundle) [0x00063] in c:\Users\HulotDev\Documents\Projects\CalculatorTest\CalculatorTest\Activity1.cs:47 
  at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (intptr,intptr,intptr) [0x00010] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.4-series/6418373f/source/monodroid/src/Mono.Android/platforms/android-16/src/generated/Android.App.Activity.cs:1997 
  at (wrapper dynamic-method) object.18cd6642-1f38-4c84-8e6a-e3b8d7ce86f9 (intptr,intptr,intptr)
--- End of managed exception stack trace ---
java.lang.RuntimeException: native typeface cannot be made 
  at android.graphics.Typeface.(Typeface.java:175)
  at android.graphics.Typeface.createFromAsset(Typeface.java:149)
  at calculatortest.Activity1.n_onCreate(Native Method)
  at calculatortest.Activity1.onCreate(Activity1.java:28)
  at android.app.Activity.performCreate(Activity.java:5008)
  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
  at android.app.ActivityThread.access$600(ActivityThread.java:130)
  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
  at android.os.Handler.dispatchMessage(Handler.java:99)
  at android.os.Looper.loop(Looper.java:137)
  at android.app.ActivityThread.main(ActivityThread.java:4745)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:511)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
  at dalvik.system.NativeStart.main(Native Method)

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013311.html">[mono-android] getAssets()
</A></li>
	<LI>Next message: <A HREF="013315.html">[mono-android] app is misconfigured for facebook login Mono for	Android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13316">[ date ]</a>
              <a href="thread.html#13316">[ thread ]</a>
              <a href="subject.html#13316">[ subject ]</a>
              <a href="author.html#13316">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
