<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] how to store data to xml file (like database) from mono for android
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20how%20to%20store%20data%20to%20xml%20file%20%28like%20database%29%0A%20from%20mono%20for%20android&In-Reply-To=%3C51238C8D.4070308%40all-the-johnsons.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013348.html">
   <LINK REL="Next"  HREF="013358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] how to store data to xml file (like database) from mono for android</H1>
    <B>Paul Johnson</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20how%20to%20store%20data%20to%20xml%20file%20%28like%20database%29%0A%20from%20mono%20for%20android&In-Reply-To=%3C51238C8D.4070308%40all-the-johnsons.co.uk%3E"
       TITLE="[mono-android] how to store data to xml file (like database) from mono for android">paul at all-the-johnsons.co.uk
       </A><BR>
    <I>Tue Feb 19 14:30:37 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="013348.html">[mono-android] how to store data to xml file (like database) from mono for android
</A></li>
        <LI>Next message: <A HREF="013358.html">[mono-android] how to store data to xml file (like database) from mono for android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13352">[ date ]</a>
              <a href="thread.html#13352">[ thread ]</a>
              <a href="subject.html#13352">[ subject ]</a>
              <a href="author.html#13352">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;<i> i have 3 edittexts(eteno,etename,eteadd) and two buttons (btnsave and
</I>&gt;<i> btnretreive) when i click on save button the edittext values will save to
</I>&gt;<i> xml...the values are saving...bt my problem is retreiveing...
</I>&gt;<i> suppose i have data like this
</I>&gt;<i> 101 john    usa
</I>&gt;<i> 102 james  uk
</I>&gt;<i> 103 robert india
</I>&gt;<i> now when i give 101 in first edittext(eteno) and click on retrieve button
</I>&gt;<i> related data john and usa should populate to edittexts etename and etadd
</I>&gt;<i> respectively...
</I>&gt;<i> plz help me ...its my life and death question....
</I>
Unless someone literally has a gun to your head or a knife to your 
throat or about to dunk you head first into a bath of hot sulfuric acid, 
it is not likely to be life or death ;)

&gt;<i>              btretreive.Click += delegate { retFromXml(eteno.Text); };
</I>
If eteno.Text is NULL or empty, then you're heading for a problem here. 
Always program defensively - though it's not a nice thing to do, think 
of your average user as a bit of a twit, so error trap...

btretreive.Click += delegate {
if (!string.IsNullOrEmpty(eteno.Text)
	retFromXml(); // eteno is defined in a global scope
else
	Toast.MakeToast(context, &quot;I cannot retrieve nothing!&quot;, 
ToastLength.Short).Show();
};

Here I'm testing for eteno.Text to be not null or empty. If the 
condition is met, call the retFromXml. No need to pass anything in the 
call as eteno is defined globally. The other two need not be defined 
globally. Something like this will do the trick

btretreive.Click += delegate {
if (!string.IsNullOrEmpty(eteno.Text)
{
	string[] retValues = new string[2];
	retValues = retFromXml(); // eteno is defined in a global scope
	etename.Text = retValue[0];
	eteadd.Text = retValue[1];
}
else
	Toast.MakeToast(context, &quot;I cannot retrieve nothing!&quot;, 
ToastLength.Short).Show();
};

No requirement for the additional globals. Only problem here is if you 
expand the structure, you will need to expand the size of the array. 
Possibly an easier way would be to use List&lt;string&gt;, but that's for 
another time.

For reading back in...

private void retFromXml() or private string[] retFromXml()

depending on which way you want to play it.

{
string[] retVal = new string[2]; // no need for global way

XmlReader reader = XmlReader.Create(path);
while (reader.Read())
{
    if (reader.NodeType != XmlNodeType.EndElement)
    {
       reader.Read();
       if (reader.Name == eteno.Text)
       {
          while (reader.NodeType != XmlNodeType.EndElement)
          {
             reader.Read();
             if (reader.NodeType == XmlNodeType.Text)
                retVal[0] = reader.Value;
	    reader.Read();
	    if (reader.NodeType == XmlNodeType.Text)
	       retVal[1] = reader.Value;
           }
	break;
        }
     }
}

if (string.IsNullOrEmpty(retVal[0]) &amp;&amp; string.IsNullOrEmpty(retVal[1])
{
   string error = string.Format(&quot;The username {0} could not be found.&quot;, 
eteno.Text);
   Toast.MakeToast(context, error, ToastLength.Short).Show();
// then either for returning the value
   retVal[0] = retVal[1] = &quot;n/a&quot;;
// or for globals
   eteadd.Text = etename.Text = &quot;Not found&quot;;

return retVal; // not needed if it's a void
}

This should give you an idea on how to do it (I've not tested the code). 
There are tonnes of websites out there that show you how to read/write 
to XML, MSDN is a good start as is dot net perls. Here is not a bad 
piece on it... <A HREF="http://www.all-the-johnsons.co.uk/csharp/xml.html">http://www.all-the-johnsons.co.uk/csharp/xml.html</A>

Paul
-- 
&quot;Space,&quot; it says, &quot;is big. Really big. You just won't believe how 
vastly, hugely, mindbogglingly big it is. I mean, you may think it's a 
long way down the road to the chemist's, but that's just peanuts to 
space, listen...&quot;
Hitch Hikers Guide to the Galaxy, a truly remarkable book!

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013348.html">[mono-android] how to store data to xml file (like database) from mono for android
</A></li>
	<LI>Next message: <A HREF="013358.html">[mono-android] how to store data to xml file (like database) from mono for android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13352">[ date ]</a>
              <a href="thread.html#13352">[ thread ]</a>
              <a href="subject.html#13352">[ subject ]</a>
              <a href="author.html#13352">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
