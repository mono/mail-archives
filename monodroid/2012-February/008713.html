<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Excessive JNI global references (2001) on hardware
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Excessive%20JNI%20global%20references%20%282001%29%20on%0A%20hardware&In-Reply-To=%3CCOL122-W17C0FB6CEF79F1F0950C59AE710%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008709.html">
   <LINK REL="Next"  HREF="008715.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Excessive JNI global references (2001) on hardware</H1>
    <B>Wally McClure</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Excessive%20JNI%20global%20references%20%282001%29%20on%0A%20hardware&In-Reply-To=%3CCOL122-W17C0FB6CEF79F1F0950C59AE710%40phx.gbl%3E"
       TITLE="[mono-android] Excessive JNI global references (2001) on hardware">theevilprogrammer at hotmail.com
       </A><BR>
    <I>Fri Feb  3 15:28:51 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="008709.html">[mono-android] Excessive JNI global references (2001) on	hardware
</A></li>
        <LI>Next message: <A HREF="008715.html">[mono-android] Excessive JNI global references (2001) on	hardware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8713">[ date ]</a>
              <a href="thread.html#8713">[ thread ]</a>
              <a href="subject.html#8713">[ subject ]</a>
              <a href="author.html#8713">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Not to interject to much into this conversation, but I am fearful of calling GC.Collect() automatically too much.  For example, I find the magnetic field sensor to basically take over my htc evo when I am getting change events.  I realize that you aren't talking about called a .Collect() on every change event.  My concern is that something that fires so often, adding the .Collect will just result in even worse performance.  Granted, I am not privy to the source and have other things to do if I was, so take what I have said for what it is worth.
Maybe this is a good time for Xamarin to explain the intricacies of the Mono for Android GC?

Wally

&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jonp at xamarin.com</A>
</I>&gt;<i> Date: Fri, 3 Feb 2012 10:00:22 -0500
</I>&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [mono-android] Excessive JNI global references (2001) on	hardware
</I>&gt;<i> 
</I>&gt;<i> On Feb 3, 2012, at 7:54 AM, PVoLan wrote:
</I>&gt;<i> &gt; Please, look at this test case <A HREF="https://github.com/PVoLan/TestAccelerometer">https://github.com/PVoLan/TestAccelerometer</A>
</I>&gt;<i> 
</I>&gt;<i> Your sample is is largely a simplified version of:
</I>&gt;<i> 
</I>&gt;<i> 	<A HREF="http://bugzilla.xamarin.com/show_bug.cgi?id=1084">http://bugzilla.xamarin.com/show_bug.cgi?id=1084</A>
</I>&gt;<i> 
</I>&gt;<i> The current &quot;fix&quot; (workaround) is to dispose of `val` within SensorListener.OnSensorChanged():
</I>&gt;<i> 
</I>&gt;<i> 	public void OnSensorChanged (SensorEvent e)
</I>&gt;<i> 	{
</I>&gt;<i> 		var val = e.Values;
</I>&gt;<i> 		try {
</I>&gt;<i> 			Android.Util.Log.Info(&quot;-------------&quot;,&quot;Works for: &quot; + (DateTime.Now - created));
</I>&gt;<i> 			Android.Util.Log.Info(&quot;-------------&quot;,string.Format(&quot;X: {0} Y: {1} Z: {2}&quot;, val[0], val[1], val[2] ));
</I>&gt;<i> 		} finally {
</I>&gt;<i> 			((IDisposable) val).Dispose ();
</I>&gt;<i> 		}
</I>&gt;<i> 	}
</I>&gt;<i> 
</I>&gt;<i> A future release will improve matters by automatically calling GC.Collect() when we pass a certain gref threshold, but even that fix may not be ideal as it may result in too many collections (e.g. if you have an animation loop, you want to control when the GC runs), so explicitly disposing of wrappers may still be required even after the implicit GC.Collect() call is in place.
</I>&gt;<i> 
</I>&gt;<i>  - Jon
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i> 
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I> 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120203/f30626a3/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120203/f30626a3/attachment.html</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008709.html">[mono-android] Excessive JNI global references (2001) on	hardware
</A></li>
	<LI>Next message: <A HREF="008715.html">[mono-android] Excessive JNI global references (2001) on	hardware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8713">[ date ]</a>
              <a href="thread.html#8713">[ thread ]</a>
              <a href="subject.html#8713">[ subject ]</a>
              <a href="author.html#8713">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
