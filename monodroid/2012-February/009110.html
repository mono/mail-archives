<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] [MonoTouch] sharing code between mono touch and mono for android
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20%5BMonoTouch%5D%20sharing%20code%20between%20mono%20touch%20and%0A%20mono%20for%20android&In-Reply-To=%3C4F4C4768.9010603%40intranel.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009107.html">
   <LINK REL="Next"  HREF="009111.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] [MonoTouch] sharing code between mono touch and mono for android</H1>
    <B>Felix Collins</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20%5BMonoTouch%5D%20sharing%20code%20between%20mono%20touch%20and%0A%20mono%20for%20android&In-Reply-To=%3C4F4C4768.9010603%40intranel.com%3E"
       TITLE="[mono-android] [MonoTouch] sharing code between mono touch and mono for android">felix at intranel.com
       </A><BR>
    <I>Tue Feb 28 03:18:00 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009107.html">[mono-android] [MonoTouch] sharing code between mono touch and mono for android
</A></li>
        <LI>Next message: <A HREF="009111.html">[mono-android] [MonoTouch] sharing code between mono touch and mono for android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9110">[ date ]</a>
              <a href="thread.html#9110">[ thread ]</a>
              <a href="subject.html#9110">[ subject ]</a>
              <a href="author.html#9110">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The different platforms can be in the same solution except for MonoTouch which can't be compiled on PC. We have out shared app code in three projects named something like MyApp (for a .net/mono console version), MyApp.MD (for android) and MyApp.MT (for ios). These three projects all point at the same files but compile targeting the different platforms. On mac it would be possible to compile all three at once from one solution.

On 28/02/2012 2:53 p.m., James Briant wrote:
&gt;<i> So the book and the FlightsNorway take the approach of putting the platforms in their own solutions. Which means that the benefits of automated refactoring go out the window. The flip-side, I suppose, is that automated refactoring is a great way to screw up version control - so teams &gt;1 person have to tip-toe around that. Which is to say, that if you have a team working on app, or sharing code, you don't lose anything by having multiple solutions as you have to be careful about any refactor causing merge hell anyway. Looks like you guys also have a your own &quot;middleware&quot; approach, and code to this common platform. The platform is used by many projects with many programmers and as such has to be pretty stable anyway.
</I>&gt;<i>
</I>&gt;<i> Is that an accurate assessment?
</I>&gt;<i>
</I>&gt;<i> jamie
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2012/2/27 Nathan Clevenger &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">nathan.clevenger at itr-mobility.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">nathan.clevenger at itr-mobility.com</A>&gt;&gt;
</I>&gt;<i>
</I>&gt;<i>     Have you looked at the proposed solution/project structure and workflow proposed in the new book, /Professional Cross-Platform Mobile Development in C#/?
</I>&gt;<i>
</I>&gt;<i>     <A HREF="http://www.amazon.com/Professional-Cross-Platform-Mobile-Development-C/dp/1118157702/ref=pd_sim_b_34">http://www.amazon.com/Professional-Cross-Platform-Mobile-Development-C/dp/1118157702/ref=pd_sim_b_34</A>
</I>&gt;<i>
</I>&gt;<i>     This is the approach that our firm has structured and managed 100+ cross-platform mono-based projects, and while it&#8217;s not without its idiosyncrasies, it does work quite well.
</I>&gt;<i>
</I>&gt;<i>     Thanks,
</I>&gt;<i>
</I>&gt;<i>     Nathan
</I>&gt;<i>
</I>&gt;<i>     *From:*<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>&gt; [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>&gt;] *On Behalf Of *Jamie Briant
</I>&gt;<i>     *Sent:* Monday, February 27, 2012 7:13 AM
</I>&gt;<i>     *To:* <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monotouch at lists.ximian.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monotouch at lists.ximian.com</A>&gt;; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>&gt;
</I>&gt;<i>     *Subject:* Re: [mono-android] [MonoTouch] sharing code between mono touch and mono for android
</I>&gt;<i>
</I>&gt;<i>     Is this as good as it gets? I'm attempting to build an MfA version of my MT app and its proving extremely frustrating, to the extent that I'm considering just writing the thing in Java. My reason for using MT was the awfulness of Objective-C, and while java is frustrating its entirely doable. The only thing at this point is the real possibility that a WP7 version will be next, so I might as well bite the bullet now.
</I>&gt;<i>
</I>&gt;<i>     Context: I'm using Visual Studio, Resharper, and my own Monotouch VSIX to load MT projects. I edit entirely in VS, and build in MD on the mac. I've tried Project Linker.
</I>&gt;<i>
</I>&gt;<i>     Problem: MfA, MT and WP7 require different .XXproj file formats.
</I>&gt;<i>
</I>&gt;<i>     There's no getting around this for WP7.
</I>&gt;<i>
</I>&gt;<i>     Why is this a problem?
</I>&gt;<i>
</I>&gt;<i>     1. &quot;This file is open in another project&quot;. (and associated Intellisense death)
</I>&gt;<i>
</I>&gt;<i>     2. Refactorings don't refactor #if/#endif code.
</I>&gt;<i>
</I>&gt;<i>     3. Refactorings don't refactor code in linked projects at all.
</I>&gt;<i>
</I>&gt;<i>     4. Resharper completely horked.
</I>&gt;<i>
</I>&gt;<i>     Basically, I cannot work the way I work. And if I can't do that - if I can't keep the apps in sync /as I work/ I might as well use java: if I have to retype the code I can just as easily convert it to java as I type.
</I>&gt;<i>
</I>&gt;<i>     Project Linker doesn't solve any of these. It makes things slightly less broken, but the flip side is I managed to delete a whole ton of files off disk as I tried to remove them from the MfA project.
</I>&gt;<i>
</I>&gt;<i>     Source Control as an alternative. I thought about having separate branches and handling it that way. But this fundamentally fails for refactoring often. It made me wonder how on earth teams of programmers collaborate. When I decide to take a class, split it into two and then pull out a common base, all with new names: how does a team deal with that? I refactor continuously.
</I>&gt;<i>
</I>&gt;<i>     *A Possible Solution*
</I>&gt;<i>
</I>&gt;<i>     Could the MT and MfA compilers/linkers/projects be made to accept WP7 projects as References? Then I could factor out common code into a shared library - but it would claim to be WP7 so the WP7 app could use it. The MT and MfA apps would ignore the fact that the library is WP7. MT could solve any problems at code generation time anyway.
</I>&gt;<i>
</I>&gt;<i>     *Pain*
</I>&gt;<i>
</I>&gt;<i>     How do the rest of you do this? Is Project Linker as good as it gets? How do you deal with intellisense/resharper being completely horked?
</I>&gt;<i>
</I>&gt;<i>     Thanks,
</I>&gt;<i>
</I>&gt;<i>     jamie
</I>&gt;<i>
</I>&gt;<i>     On Mon, Jan 30, 2012 at 11:30 PM, Miljenko Cvjetko &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mcvjetko at holisticware.net</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mcvjetko at holisticware.net</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     Good morning
</I>&gt;<i>
</I>&gt;<i>     On 2012.01.31 01 &lt;tel:2012.01.31%2001&gt;:59, Felix Collins wrote:
</I>&gt;<i>
</I>&gt;<i>     What is Project Linker?
</I>&gt;<i>
</I>&gt;<i>     Byproduct of Patterns and Practices project called Prism where MS guys explain
</I>&gt;<i>     code sharing on WPF, SL and lately WP7 platform.
</I>&gt;<i>     Project linker is just a tool VS plugin that helps batch linking of files. Defines
</I>&gt;<i>     project dependencies in sense of code sharing (copy as link + paste or copy + paste as link)
</I>&gt;<i>
</I>&gt;<i>     some refs:
</I>&gt;<i>     <A HREF="http://msdn.microsoft.com/en-us/library/ff921108(v=pandp.20">http://msdn.microsoft.com/en-us/library/ff921108(v=pandp.20</A>).aspx &lt;<A HREF="http://msdn.microsoft.com/en-us/library/ff921108%28v=pandp.20%29.aspx">http://msdn.microsoft.com/en-us/library/ff921108%28v=pandp.20%29.aspx</A>&gt;
</I>&gt;<i>     <A HREF="http://visualstudiogallery.msdn.microsoft.com/5e730577-d11c-4f2e-8e2b-cbb87f76c044">http://visualstudiogallery.msdn.microsoft.com/5e730577-d11c-4f2e-8e2b-cbb87f76c044</A>
</I>&gt;<i>
</I>&gt;<i>     Greg's sample with M4A
</I>&gt;<i>     <A HREF="http://www.gregshackles.com/2010/12/shared-libraries-for-windows-phone-7-monodroid-and-beyond/">http://www.gregshackles.com/2010/12/shared-libraries-for-windows-phone-7-monodroid-and-beyond/</A>
</I>&gt;<i>
</I>&gt;<i>     I like the tool, cos it is nonintrusive regarding IDE tools, does not break VS (other plugins) and
</I>&gt;<i>     works with MonoDevelop too (meaning one can do the linking in VS and all links are picked up).
</I>&gt;<i>
</I>&gt;<i>     Right now besides integrating MTch stuff I'm trying to extend our MultiTarget solution template to
</I>&gt;<i>     include Project Linker stuff from the beginning, so the manual addition of links is not necessary.
</I>&gt;<i>
</I>&gt;<i>     HTH
</I>&gt;<i>
</I>&gt;<i>     regards
</I>&gt;<i>
</I>&gt;<i>     mel
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         On 31/01/2012 12:46 p.m., Miljenko Cvjetko wrote:
</I>&gt;<i>
</I>&gt;<i>             Sharing code with Project Linker
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     -- 
</I>&gt;<i>
</I>&gt;<i>     Miljenko Cvjetko dipl.ing. ET
</I>&gt;<i>
</I>&gt;<i>              Direktor/CEO
</I>&gt;<i>
</I>&gt;<i>              Projektant rje&#353;enja/Solution Architect
</I>&gt;<i>
</I>&gt;<i>              Razvojni programer/Senior developer
</I>&gt;<i>
</I>&gt;<i>              Voditelj projekta/Project Manager
</I>&gt;<i>
</I>&gt;<i>       
</I>&gt;<i>
</I>&gt;<i>     IX ju&#382;na obala 13
</I>&gt;<i>
</I>&gt;<i>     Kajzerica Zagreb
</I>&gt;<i>
</I>&gt;<i>     T: 385 1 7775555
</I>&gt;<i>
</I>&gt;<i>     M: 385 91 557 447 3
</I>&gt;<i>
</I>&gt;<i>     F: 385 1 7779556
</I>&gt;<i>
</I>&gt;<i>     e:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mcvjetko at holisticware.net</A>  &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mcvjetko at holisticware.net</A>&gt;
</I>&gt;<i>
</I>&gt;<i>     w:<A HREF="http://www.holisticware.net">http://www.holisticware.net</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     MonoTouch mailing list
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">MonoTouch at lists.ximian.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">MonoTouch at lists.ximian.com</A>&gt;
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     Monodroid mailing list
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>&gt;
</I>&gt;<i>
</I>&gt;<i>     UNSUBSCRIBE INFORMATION:
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i>
</I>&gt;<i> jamie briant
</I>&gt;<i>
</I>&gt;<i> founder | binaryfinery | mobile, social, cloud, apps
</I>&gt;<i>
</I>&gt;<i> www.binaryfinery.com &lt;<A HREF="http://www.binaryfinery.com/">http://www.binaryfinery.com/</A>&gt;| blog.binaryfinery.com &lt;<A HREF="http://blog.binaryfinery.com/">http://blog.binaryfinery.com/</A>&gt; | about jamie &lt;<A HREF="http://careers.stackoverflow.com/jamiebriant">http://careers.stackoverflow.com/jamiebriant</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> No virus found in this message.
</I>&gt;<i> Checked by AVG - www.avg.com &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt;
</I>&gt;<i> Version: 2012.0.1913 / Virus Database: 2114/4835 - Release Date: 02/27/12
</I>&gt;<i>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009107.html">[mono-android] [MonoTouch] sharing code between mono touch and mono for android
</A></li>
	<LI>Next message: <A HREF="009111.html">[mono-android] [MonoTouch] sharing code between mono touch and mono for android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9110">[ date ]</a>
              <a href="thread.html#9110">[ thread ]</a>
              <a href="subject.html#9110">[ subject ]</a>
              <a href="author.html#9110">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
