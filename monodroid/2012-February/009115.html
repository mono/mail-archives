<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] [MonoTouch] sharing code between mono touch and mono for android
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20%5BMonoTouch%5D%20sharing%20code%20between%20mono%20touch%20and%0A%20mono%20for%20android&In-Reply-To=%3CCANdg_tTqAEsSsTp-UVmpN5XNtzY7De3oWkk2a8Ys6cVeWO1wKA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009113.html">
   <LINK REL="Next"  HREF="009121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] [MonoTouch] sharing code between mono touch and mono for android</H1>
    <B>Stuart Lodge</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20%5BMonoTouch%5D%20sharing%20code%20between%20mono%20touch%20and%0A%20mono%20for%20android&In-Reply-To=%3CCANdg_tTqAEsSsTp-UVmpN5XNtzY7De3oWkk2a8Ys6cVeWO1wKA%40mail.gmail.com%3E"
       TITLE="[mono-android] [MonoTouch] sharing code between mono touch and mono for android">me at slodge.com
       </A><BR>
    <I>Tue Feb 28 08:04:10 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009113.html">[mono-android] [MonoTouch] sharing code between mono touch and mono for android
</A></li>
        <LI>Next message: <A HREF="009121.html">[mono-android] [MonoTouch] sharing code between mono touch and mono for android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9115">[ date ]</a>
              <a href="thread.html#9115">[ thread ]</a>
              <a href="subject.html#9115">[ subject ]</a>
              <a href="author.html#9115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I like that Norway flights example - wish I'd seen that earlier!

I've personally found that as long as you put as much of your code as
possible into the shared ViewModel and lower classes (Model, Services, BL,
DAL, whatever, ...) inside their own project, then refactoring isn't too
painful - it's maybe only 80% automatic, which I personally don't find
unworkably painful. One thing that's helped me is that the way I've tackled
this so far is to build one Mvvm platform first (e.g. WP7) and to then
build the others- I haven't tackled this by having all 3 platforms being
developed concurrently. If you really have to develop all 3 concurrently
then that might be harder.

To be clear this was also recently done across a team of up to 4 devs
working remotely to each other - and I personally used R# a lot :)

A &quot;baby&quot; example of the type of solution I'm using is:
<A HREF="https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20Tutorial/Tutorial">https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20Tutorial/Tutorial</A>
 or
<A HREF="https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20CustomerManagement/CustomerManagement">https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20CustomerManagement/CustomerManagement</A>
-
hopefully you can see how &quot;thin&quot; we keep the UI/views - those are the
places where the auto-refactoring doesn't work.

One other suggestion/hope for the future - Portable Class Libraries might
help... <A HREF="http://msdn.microsoft.com/en-us/library/gg597391.aspx">http://msdn.microsoft.com/en-us/library/gg597391.aspx</A> - but on the
one time I tried these I found I couldn't write the code I needed to write
:<i>/
</I>
Stuart

On 28 February 2012 04:34, James Briant &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jamie at binaryfinery.com</A>&gt; wrote:

&gt;<i> On Mon, Feb 27, 2012 at 8:03 PM, Felix Collins &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">felix at intranel.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 28/02/2012 4:48 p.m., James Briant wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Yes they can be, but the examples from the book aren't, nor are the ones
</I>&gt;&gt;&gt;<i> from FlightsNorway. If they /are/ in the same solution, it doesn't help
</I>&gt;&gt;&gt;<i> refactoring at all, because there are two separate project hierarchies:
</I>&gt;&gt;&gt;<i> refactoring Library.Droid will change the files in App.Droid, and also in
</I>&gt;&gt;&gt;<i> Library.MT (because the are the exact same files as Library.Droid), but it
</I>&gt;&gt;&gt;<i> wont do the refactoring in App.MT. So, they might as well be in separate
</I>&gt;&gt;&gt;<i> solutions. And in fact, having them all in the same solution /completely
</I>&gt;&gt;&gt;<i> fucks up Intellisense/ and Resharper's Code Dom. Whole Solution Analysis
</I>&gt;&gt;&gt;<i> (in R#) that I totally rely on to make sure my MT projects will actually
</I>&gt;&gt;&gt;<i> compile when switch to the Mac, is completely broken by having the same
</I>&gt;&gt;&gt;<i> file in two different projects.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Sounds like a feature request for JetBrains.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Its not something that they can reasonably solve without a complete model
</I>&gt;<i> change, and then I suspect that they would still run into the fundamental
</I>&gt;<i> problem that Visual Studio itself will not open the same file twice, in the
</I>&gt;<i> context of two different projects. That's the infamous &quot;This file is open
</I>&gt;<i> in another project&quot; error.
</I>&gt;<i>
</I>&gt;<i> These problems are just indicative of the fact that this solution is
</I>&gt;<i> totally ad hoc. There is a way to do target specific programming in an OO
</I>&gt;<i> language, and it is shared libraries with platform specific code in
</I>&gt;<i> platform specific libraries. The problem is that Microsoft totally fucked
</I>&gt;<i> us over by making it so that projects cannot target multiple platforms.
</I>&gt;<i> Since its impossible to do, people then figure, &quot;Well if I'm fucked anyway,
</I>&gt;<i> I might as well start doing other things like using partial classes and #if
</I>&gt;<i> to include platform specific code&quot;. This is not sound.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The MT app can be in the same solution, btw. You just need something &lt;
</I>&gt;&gt;&gt;<i> <A HREF="https://github.com/**jamiebriant/VsMono&lt;https://github.com/jamiebriant/VsMono">https://github.com/**jamiebriant/VsMono&lt;https://github.com/jamiebriant/VsMono</A>&gt;&gt;to
</I>&gt;&gt;&gt;<i> fool VS into loading it, and a hacked version of monotouch.dll that claims
</I>&gt;&gt;&gt;<i> to be .NET 4. Then you can use R# Solution Analysis to catch errors as you
</I>&gt;&gt;&gt;<i> type: if R# says there are no errors, MonoDevelop will compile it on the
</I>&gt;&gt;&gt;<i> Mac 99.99% of the time. I edit my MT apps on windows.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  I think I'll have to do that (are there step by step instructions
</I>&gt;&gt;<i> somewhere?).  My brain hurts trying to learn all the different keybindings
</I>&gt;&gt;<i> on the mac despite having hacked as many as possible.  I use the
</I>&gt;&gt;<i> alt-&lt;firstletter&gt; key mnemonics in windows all the time and that plays
</I>&gt;&gt;<i> merry hell on a mac!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> More details here:
</I>&gt;<i> <A HREF="http://blog.binaryfinery.com/pages/monotouch-visual-studio-productivity">http://blog.binaryfinery.com/pages/monotouch-visual-studio-productivity</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Felix
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;<i> Monodroid mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/**mailman/listinfo/monodroid&lt;http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/**mailman/listinfo/monodroid&lt;http://lists.ximian.com/mailman/listinfo/monodroid</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> jamie briant
</I>&gt;<i>
</I>&gt;<i> founder | binaryfinery | mobile, social, cloud, apps
</I>&gt;<i>
</I>&gt;<i> www.binaryfinery.com | blog.binaryfinery.com | about jamie&lt;<A HREF="http://careers.stackoverflow.com/jamiebriant">http://careers.stackoverflow.com/jamiebriant</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120228/6380f9db/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120228/6380f9db/attachment-0001.html</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009113.html">[mono-android] [MonoTouch] sharing code between mono touch and mono for android
</A></li>
	<LI>Next message: <A HREF="009121.html">[mono-android] [MonoTouch] sharing code between mono touch and mono for android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9115">[ date ]</a>
              <a href="thread.html#9115">[ thread ]</a>
              <a href="subject.html#9115">[ subject ]</a>
              <a href="author.html#9115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
