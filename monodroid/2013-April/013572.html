<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] long polling - connection timeouts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20long%20polling%20-%20connection%20timeouts&In-Reply-To=%3C1365517593501-5713122.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013570.html">
   <LINK REL="Next"  HREF="013573.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] long polling - connection timeouts</H1>
    <B>Stephan Steiner</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20long%20polling%20-%20connection%20timeouts&In-Reply-To=%3C1365517593501-5713122.post%40n5.nabble.com%3E"
       TITLE="[mono-android] long polling - connection timeouts">stephan.steiner at gmail.com
       </A><BR>
    <I>Tue Apr  9 14:26:33 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="013570.html">[mono-android] long polling - connection timeouts
</A></li>
        <LI>Next message: <A HREF="013573.html">[mono-android] long polling - connection timeouts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13572">[ date ]</a>
              <a href="thread.html#13572">[ thread ]</a>
              <a href="subject.html#13572">[ subject ]</a>
              <a href="author.html#13572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think I may have used the wrong title thus giving the wrong impression of
what the problem is or isn't.

I already have 

System.Net.ServicePointManager.DefaultConnectionLimit = 4;

In my code - I've had this problem earlier (both of you participated in the
thread last year), and if this were it, the problem would appear differently
(not being able to make any new connections - I can make new connections
just fine when I get those &quot;timeouts&quot; or rather connection freezes). In fact
I even keep a log of the number of parallel connections just to be on the
safe side - so whenever I have 2 or more parallel connections, it is noted
in my log - and I have yet to see 4 parallel connections (I'm not looking at
my code right now but I may have even set the limit  higher).

Note that it is not timeouts in making the connection or keeping the
connection alive - the connection is up and running as far as the TCP layer
is concerned (confirmed by wireshark traces), the server is processing - but
long poll means the client may have to wait for a long time until something
is returned to a request). Eventually, my client will abort the connection
since it thinks it has not received any data, but the server has tried to
send some.. it is as if the connection has become &quot;frozen&quot; in place. In a
network trace I see nothing that would show a problem with the connection.

I haven't had time for a simple repro project - but I've found that 4
minutes is about as long as I can go... if the server responds later, the
answer may never make it to the client (my client has a dynamic timeout
duration for the connection controlled by the server - and it is always
slightly longer than the server side timeout, so the server will after a
while simply send the current state even if nothing has changed so that we
don't have any errors in the communication chain). I've experimented for
hours, and with the server delaying responses by 5 minutes, the response
then only gets to the client unreliably (one time it works, the next it
doesn't, etc.), larger values mean the same, and at 4 minutes, things are
reliable. Also, just because one connection is frozen doesn't mean I can
initiate another... that works fine and not only that... if I do so, then
the response from the long poll has a good chance of being delivered after
all - it is as if making another connection revitalizes the existing
connection (but this is also not 100% reliable - the additional connection
may work and should trigger a result being sent to the long poll connection,
but sometime this doesn't work).

Stephan




--
View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/long-polling-connection-timeouts-tp5713110p5713122.html">http://mono-for-android.1047100.n5.nabble.com/long-polling-connection-timeouts-tp5713110p5713122.html</A>
Sent from the Mono for Android mailing list archive at Nabble.com.
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013570.html">[mono-android] long polling - connection timeouts
</A></li>
	<LI>Next message: <A HREF="013573.html">[mono-android] long polling - connection timeouts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13572">[ date ]</a>
              <a href="thread.html#13572">[ thread ]</a>
              <a href="subject.html#13572">[ subject ]</a>
              <a href="author.html#13572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
