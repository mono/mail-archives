<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] long polling - connection timeouts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20long%20polling%20-%20connection%20timeouts&In-Reply-To=%3C1365194542970-5713110.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013559.html">
   <LINK REL="Next"  HREF="013568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] long polling - connection timeouts</H1>
    <B>Stephan Steiner</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20long%20polling%20-%20connection%20timeouts&In-Reply-To=%3C1365194542970-5713110.post%40n5.nabble.com%3E"
       TITLE="[mono-android] long polling - connection timeouts">stephan.steiner at gmail.com
       </A><BR>
    <I>Fri Apr  5 20:42:22 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="013559.html">[mono-android] Problem with android resource attribute
</A></li>
        <LI>Next message: <A HREF="013568.html">[mono-android] long polling - connection timeouts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13560">[ date ]</a>
              <a href="thread.html#13560">[ thread ]</a>
              <a href="subject.html#13560">[ subject ]</a>
              <a href="author.html#13560">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I'm using long polling in my app and I recently noted something funny - it
seems there quite a low threshold for how long the server may take to
respond. It generally tends to work just fine with a 10 minute timeout, but
recently more and more the server side timeout runs out so the server
responds, but nothing ever gets to the client until the client side
connection times out. The sessions will last longer if while a long poll is
running, another connection is established to the server (those connections
are short lived). 

Looking at wireshark, I see that my client immediately after making the
httpwebrequest sends an empty packet with FIN, ACK flags to the server (two
packets pretty much concurrently), then another one a bit over a minute
later. At that time, if the server responds, data still gets to the client,
but a certain time later, nothing goes anymore (I don't even see a single
tcp packet going from server to my client). I'm unable to give a precise
interval for when this happens - I thought it may be around the 4 minute
mark, but I've just had a case where 4.5 minutes after starting the request
the server responded and the connection still worked. I have my clients
configured so they adapt the interval according to what's configured in
server, so I suppose if I set 1 Minute I'd be golden, but it's not very
effective both from a traffic standpoint and a power standpoint. 

So I'm wondering what others that use long polls have experienced in that
regard - do you have a reliable cutoff time to which you can adapt your long
poll interval? Note that currently I'm using WiFi.

I'm also using the exact same code compiled on a PC with much higher
intervals just fine - so it must be Android specific.

Regards
Stephan



--
View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/long-polling-connection-timeouts-tp5713110.html">http://mono-for-android.1047100.n5.nabble.com/long-polling-connection-timeouts-tp5713110.html</A>
Sent from the Mono for Android mailing list archive at Nabble.com.
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013559.html">[mono-android] Problem with android resource attribute
</A></li>
	<LI>Next message: <A HREF="013568.html">[mono-android] long polling - connection timeouts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13560">[ date ]</a>
              <a href="thread.html#13560">[ thread ]</a>
              <a href="subject.html#13560">[ subject ]</a>
              <a href="author.html#13560">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
