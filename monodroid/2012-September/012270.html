<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Error Linking Sdk Assemblies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Error%20Linking%20Sdk%20Assemblies&In-Reply-To=%3C1418A594-960F-4535-B845-20A59FC8B818%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012263.html">
   <LINK REL="Next"  HREF="012253.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Error Linking Sdk Assemblies</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Error%20Linking%20Sdk%20Assemblies&In-Reply-To=%3C1418A594-960F-4535-B845-20A59FC8B818%40xamarin.com%3E"
       TITLE="[mono-android] Error Linking Sdk Assemblies">jonp at xamarin.com
       </A><BR>
    <I>Wed Sep 12 20:40:35 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="012263.html">[mono-android] Error Linking Sdk Assemblies
</A></li>
        <LI>Next message: <A HREF="012253.html">[mono-android] Bug: Cannon build project in Release mode: Error	CS0006
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12270">[ date ]</a>
              <a href="thread.html#12270">[ thread ]</a>
              <a href="subject.html#12270">[ subject ]</a>
              <a href="author.html#12270">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sep 12, 2012, at 1:38 PM, Kirby &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">ds at adestis.de</A>&gt; wrote:
&gt;<i> What I have real trouble to understand is: Why does the (non linked) version run perfectly on the android device?
</I>
Luck. ;-)

You have a JIT, and the JIT won't complain about missing types or members unless/until those types/members are actually used. Since your code isn't doing anything with the ImmutableObjectAttribute, it doesn't matter (to your code) that it's missing.

The linker, on the other hand, visits EVERYTHING, so the linker DOES care if a type is missing, and fails because of it.

I suppose we could make it skip types that can't be found, but I'm not sure what the actual ramifications would be. Instead of getting &quot;missing type&quot; errors at link time, they'd be at runtime...which is already the case when Reflection is involved, so this might not change anything. ;-)

&gt;<i> Beside this - what would be the best practice in the above mentioned scenario? Should I build 2 dlls one for mono (2.0.5) and one for .Net (4.0.0.0)?
</I>
Yes.

&gt;<i> Strictly spoken I'm not sharing the same contract then anymore...
</I>
Close enough?

Keep in mind that this isn't entirely a &quot;new&quot; problem; .NET binary serialization had no guarantees that you could e.g. serialize type on .NET 1.1 and deserialize on 1.0. Things like OptionalFieldAttribute was added in part to support this, but if you rename fields, things will break unless you have custom serialization.

Which is why we have things like WCF and Protobuff.net, to make such things more explicit and tolerant of versioning changes.

The real concern thus isn't over what the client and server provide; it's the &quot;version&quot; of the &quot;on-wire&quot; data sent between the client &amp; server, as adding/removing fields will change the conceptual version which is being transmitted. As long as client &amp; server agree on which version of data is being sent (and/or can accommodate a variety of versions), things should work regardless of the .NET assembly versions involved.

 - Jon

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012263.html">[mono-android] Error Linking Sdk Assemblies
</A></li>
	<LI>Next message: <A HREF="012253.html">[mono-android] Bug: Cannon build project in Release mode: Error	CS0006
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12270">[ date ]</a>
              <a href="thread.html#12270">[ thread ]</a>
              <a href="subject.html#12270">[ subject ]</a>
              <a href="author.html#12270">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
