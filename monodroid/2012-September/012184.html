<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] ListView - preserve selection state
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20ListView%20-%20preserve%20selection%20state&In-Reply-To=%3C1346864459522-5711708.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012186.html">
   <LINK REL="Next"  HREF="012188.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] ListView - preserve selection state</H1>
    <B>Stephan Steiner</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20ListView%20-%20preserve%20selection%20state&In-Reply-To=%3C1346864459522-5711708.post%40n5.nabble.com%3E"
       TITLE="[mono-android] ListView - preserve selection state">stephan.steiner at gmail.com
       </A><BR>
    <I>Wed Sep  5 17:00:59 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="012186.html">[mono-android] Jelly Bean issues
</A></li>
        <LI>Next message: <A HREF="012188.html">[mono-android] Emulator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12184">[ date ]</a>
              <a href="thread.html#12184">[ thread ]</a>
              <a href="subject.html#12184">[ subject ]</a>
              <a href="author.html#12184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I have a ListView inside a fragment. I'd like to restore the selected item
when the Fragment is reloaded (e.g. due to a rotation). To that end, I'm
using onResume to determine the position and item id of the previously
selected item inside the newly rendered ListView, then calling 
myListView.PerformItemClick(calls, position, itemId)

There are two issues I'm facing though
1) my ItemClick event handler will get a View in the
AdapterView.ItemClickEventArgs that isn't the &quot;normal&quot; view (when performing
a normal click from within the application, e.View is the LinearLayout that
I'm using for every ListViewItem (the layout that belongs to the item
selected) and e.Parent is the ListView itself), instead it seems to be the
ListView itelf (so e.View == e.Parent). So, when I then look for GUI
elements within e.View, I'm finding the first LinearLayout that there is (so
the first item in the ListView - and thus the first item in the list gets
the action performed that I do upon selection.. not the item I actually
selected)
2) If I do myListView.PerformItemClick immediately in onResume, I'm having
timing issues - it seems that even though the view should have been created,
something is still rendering as I'm unable to find the usual GUI elements
from within e.View and the app then crashes. If I add a small delay before
calling myListView.PerformItemClick (launch a background task, sleep 500ms,
then run PerformItemClick on the UI thread), things do work out except for
issue 1.

If I can solve issue 1) then I can get back on track but I'd also like to
figure out which event to hook into to launch my PerformItemClick - what do
I have to wait for exactly to ensure that my ListView is up and running the
way it should?

Regards
Stephan



--
View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/ListView-preserve-selection-state-tp5711708.html">http://mono-for-android.1047100.n5.nabble.com/ListView-preserve-selection-state-tp5711708.html</A>
Sent from the Mono for Android mailing list archive at Nabble.com.
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012186.html">[mono-android] Jelly Bean issues
</A></li>
	<LI>Next message: <A HREF="012188.html">[mono-android] Emulator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12184">[ date ]</a>
              <a href="thread.html#12184">[ thread ]</a>
              <a href="subject.html#12184">[ subject ]</a>
              <a href="author.html#12184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
