<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] MVVM framework
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20MVVM%20framework&In-Reply-To=CAJsqB0iS0vRawrjHBwgT1LW6M4HF3XRykznzuHZj8UgBxLU7zA%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007070.html">
   <LINK REL="Next"  HREF="007087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] MVVM framework</H1>
    <B>Richard Wilburn</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20MVVM%20framework&In-Reply-To=CAJsqB0iS0vRawrjHBwgT1LW6M4HF3XRykznzuHZj8UgBxLU7zA%40mail.gmail.com"
       TITLE="[mono-android] MVVM framework">rhwilburn at gmail.com
       </A><BR>
    <I>Tue Nov  8 16:17:12 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="007070.html">[mono-android] MVVM framework
</A></li>
        <LI>Next message: <A HREF="007087.html">[mono-android] MVVM framework
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7077">[ date ]</a>
              <a href="thread.html#7077">[ thread ]</a>
              <a href="subject.html#7077">[ subject ]</a>
              <a href="author.html#7077">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Emiel

I have given it a few thoughts already (based off only a quick class
diagram that was sketched up over a few hours), and the main flow at the
moment is (definately flexible to change):

1) parse the xml in the axml and put it into object model.
1.1) strip out bindings from the axml file and fetch the id etc of that
element. Fetch the property and binding info before stripping it and put it
in the object model.
2) use a visitor pattern in a parser like way to decipher the binding data
2.1) as a visitor visits a valid binding, it pushes it to a bindingfactory
class.
3) BindingLifecycleFactory class is an abstract factory that handles the
lifecycle of the bindings, ie setup, teardown and caching of bindings with
respect to pages. (caching low priority)
4) BindingFactory will setup a single binding between a control and a
viewmodel property. It will interact with the following parts:
4.1) ValueConverter
4.2) Binding (which only works against objects which use
INotifyPropertyChanged interface)

As for the question about reflection, im not sure that it would matter if
we did use reflection because:

1) We can cache bindings, so they will only be created once and can be
&quot;paused&quot; when no longer relevant.
2) we can as part of our caching, we can pre cache bindings before going to
the next page via a background worker process.
3) a non type safe binding is never stored, so reflective style processing
would only ever be done once.

I do however believe that it is ideal to minimize or remove reflection, but
this would be a secondary aim after getting a proof of concept working. I
am definately open to ideas on how to get this working. I imagine we might
be able to emit some code or something if we really had to go there. I
think ultimately though, that caching should work because with MVVM you
shouldn't be creating bindings on the fly, everything is created up front,
even for situations like treeview controls etc where they use heirarchical
templates and bindings again are done up front.

We are definately keen to get more people interested in this, even if only
to provide critique or suggestion of our approach (or for one off effort,
ie no commitments). I think MVVM can add alot of value to Mono developers
because viewmodels can be shared, meaning potentially only  some value
converters and all views are platform specific. With that said, we can also
potentially make axml look very similar in bindings to WPF to reduce the
learning curve down, making Windows phone and android development almost
identical. iOS looks more like winforms, which can be bent to a MVVM
pattern (I haven't investigated that in depth).

We also have experience in setting up projects for nuget, so we would also
be bringing that to the project. See here:
<A HREF="https://github.com/edys/Ninject-prism-ext">https://github.com/edys/Ninject-prism-ext</A>

-Richard.

On Tue, Nov 8, 2011 at 8:28 PM, Emiel Metselaar &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">edmetselaar at gmail.com</A>&gt;wrote:

&gt;<i> Richard
</I>&gt;<i>
</I>&gt;<i> Interesting. Do you already have some thoughts on how to implement the
</I>&gt;<i> bindings, reflection seems expensive. I have played around with the func
</I>&gt;<i> and action delegates to do some form of binding, but ofcourse this does not
</I>&gt;<i> work from an axml file...
</I>&gt;<i>
</I>&gt;<i> Emiel
</I>&gt;<i>
</I>&gt;<i> On Mon, Nov 7, 2011 at 9:50 PM, Richard Wilburn &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">rhwilburn at gmail.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A friend and I are looking at making a MVVM framework that will enable
</I>&gt;&gt;<i> monodroid (and eventually iphone too) to have bindings like silverlight etc.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We have started some modelling work on this, based off of what we have
</I>&gt;&gt;<i> learned from a hack migration of this poorly modeled project:
</I>&gt;&gt;<i> <A HREF="http://www.codeproject.com/KB/android/AndroidMVVM.aspx">http://www.codeproject.com/KB/android/AndroidMVVM.aspx</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We are keen to put this project onto github/nuget if there is interest
</I>&gt;&gt;<i> from anyone else in developing it. I don't believe the size of the project
</I>&gt;&gt;<i> is that large, since we can scope it down nicely. Even if someone is
</I>&gt;&gt;<i> interested in doing a single class to help out that would be cool.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We feel that a MVVM framework will maximize our reuseability between
</I>&gt;&gt;<i> WPF/Silverlight/WP7/Android/iphone.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you are interested just reply to this email, and we will set up our
</I>&gt;&gt;<i> current code on github, and share our details.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers,
</I>&gt;&gt;<i> Richard.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Monodroid mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111109/82dfc936/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20111109/82dfc936/attachment.html</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007070.html">[mono-android] MVVM framework
</A></li>
	<LI>Next message: <A HREF="007087.html">[mono-android] MVVM framework
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7077">[ date ]</a>
              <a href="thread.html#7077">[ thread ]</a>
              <a href="subject.html#7077">[ subject ]</a>
              <a href="author.html#7077">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
