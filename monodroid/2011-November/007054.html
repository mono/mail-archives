<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Calling arbitrary web services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Calling%20arbitrary%20web%20services&In-Reply-To=CAHhxv0z3N2P7DmRctRtjR5zTOBzSkkBFXLfT%2BM4go3eXrj3Xsg%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007033.html">
   <LINK REL="Next"  HREF="007057.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Calling arbitrary web services</H1>
    <B>Tim Kelly</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Calling%20arbitrary%20web%20services&In-Reply-To=CAHhxv0z3N2P7DmRctRtjR5zTOBzSkkBFXLfT%2BM4go3eXrj3Xsg%40mail.gmail.com"
       TITLE="[mono-android] Calling arbitrary web services">tim.kelly at DesignerWare.com
       </A><BR>
    <I>Mon Nov  7 16:45:21 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="007033.html">[mono-android] Calling arbitrary web services
</A></li>
        <LI>Next message: <A HREF="007057.html">[mono-android] Calling arbitrary web services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7054">[ date ]</a>
              <a href="thread.html#7054">[ thread ]</a>
              <a href="subject.html#7054">[ subject ]</a>
              <a href="author.html#7054">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It cost me and my team weeks because we didn't notice the issues until we went live.  The overhead and cost of web services is documented all over Google (no one particular place) as I recall.  There seemed to be more written about it on the Java side.  So, after spending some time to isolate the problem, we got our network team involved and then isolated the problem.

 

During the research, one of the engineer's mentioned that the phone speed was close to an old 1200 baud modem, and that's when it struck me.  Why not communicate like we did during the 70's?  Heck we got great speed out of even those 300 baud modems.  So, basically we post/get a xmodem/ymodem package back and forth. 

We don't chunk it up into packets, but basically take the data and encrypt it and then add a CRC to it and post it.  On the server side we uncrypt it and check the CRC, now TCP/IP keeps the data clean, so the CRC is just because the engineer's wanted to be able to post without TCP/IP.  Theoretically,  we could do a dialup an post to a modem without TCP/IP therefore the CRC would come into affect.

 

The other thing was serializing objects to XML really creates a PIG XML set if you really look at it.  For example, your XML has elements that are empty or set to the default and look something like this:

 

&lt;First Name&gt;Billy&lt;/ First Name&gt;

&lt;Middle Name&gt;&lt;/Middle Name&gt;

&lt;Last Name&gt;Bob&lt;/Last Name&gt;

 

Notice the overhead? also notice that middle name is empty but you're sending the overhead to tell the ever it is empty.  So we wrote classes to serials objects like this:

&lt;1&gt;Billy|

&lt;3&gt;Bob|

 

The second example uses only 17 characters instead of 85 which is 80% smaller.  Now if you take out the SOAP, you can see the difference you can start making.  

 

Notice that 1 is used instead of the proper name, also notice that element 2 is not sent therefore the server will assign the default to it.  Also, we use the pipe character to end the element (downside you cannot send a pipe).  Overall do this for a large object and a few thousand phones and all these bytes add up.  It does mean you have to build some custom classes on each end to handle the serializing and know that element 1 maps to the First Name we keep the mapping in the class and then just version the classes and hope like hell nobody fobar's sourcecontrol &lt;lol&gt;.  

 

 

 

Anyway, just my 2&#162;

 

 

________________________________

From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>] On Behalf Of cgraus
Sent: Sunday, November 06, 2011 11:28 PM
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>
Subject: Re: [mono-android] Calling arbitrary web services

 

Thank you Tim, that's super helpful info at this stage of our development cycle. 

On Mon, Nov 7, 2011 at 12:57 PM, Tim Kelly [via Mono for Android] 
&lt;[hidden email]&gt; wrote: 


&gt;<i> Web service is just a URL and we dynamically build them all the time. 
</I>&gt;<i> Matter of fact we use a random number generator.  For example, we have 
</I>&gt;<i> 20 websites and we us ws_x.hostURL.com.  ws_0 ws_1 ws_2 etc etc  we also 
</I>&gt;<i> dynamically build the hostURL too. 
</I>&gt;<i> 
</I>&gt;<i> Note however, we dropped web services in our android projects because of 
</I>&gt;<i> the overhead.  We replaced it with a simply post/get.  The network 
</I>&gt;<i> overhead of directly consuming web services caused network to memory 
</I>&gt;<i> issues.  When we added all the SOAP it was BLOATed and caused issues on 
</I>&gt;<i> phones etc which have less bandwidth and memory. 
</I>&gt;<i> 
</I>&gt;<i> After messing around with web services we decided the overhead was too 
</I>&gt;<i> much so we built a webpage that accepts Post/Gets.  Now, we build a 
</I>&gt;<i> special XML record set that only has elements that are not empty (or not 
</I>&gt;<i> set to default - no need to pass them).  We then encode it, add SOH + 
</I>&gt;<i> BLOCK + data +  CRC + ETX (yes the old xmodem data pack) and post it to 
</I>&gt;<i> the website.  The website makes sure there is a SOH and ETX, calculates 
</I>&gt;<i> the CRC on data and compares it. Then we process the xml if it passes. 
</I>&gt;<i> This reduced our overhead by over 80% compared to using web services. 
</I>&gt;<i> We pass binary data the same way.  Bottom-line we never noticed issues 
</I>&gt;<i> on computers, but when we went to hand held devices (with slower 
</I>&gt;<i> bandwidth) the web services was transmitting to much data and causing 
</I>&gt;<i> memory issues. 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----Original Message----- 
</I>&gt;<i> From: [hidden email] 
</I>&gt;<i> [mailto:[hidden email]] On Behalf Of cgraus 
</I>&gt;<i> Sent: Wednesday, November 02, 2011 8:01 PM 
</I>&gt;<i> To: [hidden email] 
</I>&gt;<i> Subject: [mono-android] Calling arbitrary web services 
</I>&gt;<i> 
</I>&gt;<i> We have an application which we want to write some supporting mobile 
</I>&gt;<i> apps 
</I>&gt;<i> for.  The idea is that if you buy our app, it comes with a web service, 
</I>&gt;<i> and 
</I>&gt;<i> you will host that service on your server, so it has access to your data 
</I>&gt;<i> store and can be used to provide access to your data.  Therefore the 
</I>&gt;<i> interface is strongly typed, but the location is unknown.  We're 
</I>&gt;<i> expecting 
</I>&gt;<i> to write this with WCF.  All the examples I am seeing, require me to 
</I>&gt;<i> create 
</I>&gt;<i> a reference to a service.  I can do that, but I'll need to dynamically 
</I>&gt;<i> change the location of the service.  Are there any examples along those 
</I>&gt;<i> lines, or any advice anyone can offer ? 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> View this message in context: 
</I>&gt;<i> <A HREF="http://mono-for-android.1047100.n5.nabble.com/Calling-arbitrary-web-serv">http://mono-for-android.1047100.n5.nabble.com/Calling-arbitrary-web-serv</A>
</I>&gt;<i> ices-tp4959774p4959774.html 
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com. 
</I>&gt;<i> _______________________________________________ 
</I>&gt;<i> Monodroid mailing list 
</I>&gt;<i> [hidden email] 
</I>&gt;<i> 
</I>&gt;<i> UNSUBSCRIBE INFORMATION: 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i> _______________________________________________ 
</I>&gt;<i> Monodroid mailing list 
</I>&gt;<i> [hidden email] 
</I>&gt;<i> 
</I>&gt;<i> UNSUBSCRIBE INFORMATION: 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ________________________________ 
</I>&gt;<i> If you reply to this email, your message will be added to the discussion 
</I>&gt;<i> below: 
</I>&gt;<i> <A HREF="http://mono-for-android.1047100.n5.nabble.com/Calling-arbitrary-web-services-tp4959774p4970013.html">http://mono-for-android.1047100.n5.nabble.com/Calling-arbitrary-web-services-tp4959774p4970013.html</A>
</I>&gt;<i> To unsubscribe from Calling arbitrary web services, click here. 
</I>
 

________________________________

View this message in context: Re: Calling arbitrary web services &lt;<A HREF="http://mono-for-android.1047100.n5.nabble.com/Calling-arbitrary-web-services-tp4959774p4970176.html">http://mono-for-android.1047100.n5.nabble.com/Calling-arbitrary-web-services-tp4959774p4970176.html</A>&gt; 
Sent from the Mono for Android mailing list archive &lt;<A HREF="http://mono-for-android.1047100.n5.nabble.com/">http://mono-for-android.1047100.n5.nabble.com/</A>&gt;  at Nabble.com.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111107/8bf5d0bb/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20111107/8bf5d0bb/attachment-0001.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007033.html">[mono-android] Calling arbitrary web services
</A></li>
	<LI>Next message: <A HREF="007057.html">[mono-android] Calling arbitrary web services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7054">[ date ]</a>
              <a href="thread.html#7054">[ thread ]</a>
              <a href="subject.html#7054">[ subject ]</a>
              <a href="author.html#7054">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
