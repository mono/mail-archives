<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Random exceptions while reading SSL stream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Random%20exceptions%20while%20reading%20SSL%20stream&In-Reply-To=003c01cca50d%240edaa5f0%242c8ff1d0%24%40com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007167.html">
   <LINK REL="Next"  HREF="007356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Random exceptions while reading SSL stream</H1>
    <B>Sean Irving</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Random%20exceptions%20while%20reading%20SSL%20stream&In-Reply-To=003c01cca50d%240edaa5f0%242c8ff1d0%24%40com"
       TITLE="[mono-android] Random exceptions while reading SSL stream">sirving at mobileepiphany.com
       </A><BR>
    <I>Mon Nov 28 15:33:45 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="007167.html">[mono-android] Random exceptions while reading SSL stream
</A></li>
        <LI>Next message: <A HREF="007356.html">[mono-android] Random exceptions while reading SSL stream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7329">[ date ]</a>
              <a href="thread.html#7329">[ thread ]</a>
              <a href="subject.html#7329">[ subject ]</a>
              <a href="author.html#7329">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is there any movement on this I'm seeing this issue all over when I'm
syncing data with our server and its really hampering my progress forward.

-Sean Irving
Lead Developer
Mobile Epiphany


On Thu, Nov 17, 2011 at 2:41 AM, Andrew Sinclair
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">andrew at magic5software.com</A>&gt;wrote:

&gt;<i> Piotr,****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> This sounds like exactly the same problem as:****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://bugzilla.xamarin.com/show_bug.cgi?id=1394****">http://bugzilla.xamarin.com/show_bug.cgi?id=1394****</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://bugzilla.xamarin.com/show_bug.cgi?id=1741****">http://bugzilla.xamarin.com/show_bug.cgi?id=1741****</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://bugzilla.xamarin.com/show_bug.cgi?id=1534****">http://bugzilla.xamarin.com/show_bug.cgi?id=1534****</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://bugzilla.xamarin.com/show_bug.cgi?id=1031****">http://bugzilla.xamarin.com/show_bug.cgi?id=1031****</A>
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> plus the &#8220;Mono Stacktrace and ANR&#8221; e-mail sent to the list yesterday.****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> I&#8217;ve only seen this type of thing since 1.2.0 and it also happens with
</I>&gt;<i> 1.9.*. Prior to 1.2 there seemed to be many more GC-related bugs but maybe
</I>&gt;<i> they just hid this one (or maybe it&#8217;s the knock-on effect of a fix.)****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Xamarin people -&gt; any idea when this will be fixed? The bugzilla bugs are
</I>&gt;<i> quiet. I can&#8217;t imagine there&#8217;s a more important problem for you to be
</I>&gt;<i> fixing because it causes random hangs in all sorts of applications and
</I>&gt;<i> there isn&#8217;t a workaround for the developer. I&#8217;d be happy to trade all of
</I>&gt;<i> the new functionality in 2.x for a fix to this one and a stable runtime!!*
</I>&gt;<i> ***
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Cheers,****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Andy****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> *From:* <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A> [mailto:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>] *On Behalf Of *Piotr Kryger
</I>&gt;<i> *Sent:* 17 November 2011 09:24
</I>&gt;<i> *To:* Discussions related to Mono for Android
</I>&gt;<i> *Subject:* [mono-android] Random exceptions while reading SSL stream****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Im trying to read binary data from ssl stream.
</I>&gt;<i> Basically, I do this:
</I>&gt;<i>
</I>&gt;<i> Stream inner = ConnectToMyHttpsServerAndGetStream();
</I>&gt;<i> SslStream sslStream = new SslStream(inner, false, null, null);
</I>&gt;<i> sslStream.AuthenticateAsClient(certificateServerName);
</I>&gt;<i> BinaryReader reader = new BinaryReader(sslStream);
</I>&gt;<i> //calls to reader methods go here
</I>&gt;<i> reader.Close();****
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Most of the time, code runs fine, but sometimes during reading operations my app freezes. Log shows following (or similar) stacktrace:****
</I>&gt;<i>
</I>&gt;<i> 11-17 09:28:20.084 I/mono    (24066): Stacktrace:
</I>&gt;<i> 11-17 09:28:20.084 I/mono    (24066):
</I>&gt;<i> 11-17 09:28:20.084 I/mono    (24066):   at Mono.Security.Protocol.Tls.CipherSuite.DecryptRecord (byte[],byte[]&amp;,byte[]&amp;) &lt;0x000e3&gt;****
</I>&gt;<i>
</I>&gt;<i> 11-17 09:28:20.125 I/mono    (24066):   at Mono.Security.Protocol.Tls.RecordProtocol.decryptRecordFragment (Mono.Security.Protocol.Tls.ContentType,byte[]) &lt;0x0006b&gt;
</I>&gt;<i>
</I>&gt;<i> 11-17 09:28:20.125 I/mono    (24066):   at Mono.Security.Protocol.Tls.RecordProtocol.InternalReceiveRecordCallback (System.IAsyncResult) &lt;0x001b7&gt;****
</I>&gt;<i>
</I>&gt;<i> 11-17 09:28:20.125 I/mono    (24066):   at System.IO.Stream.BeginRead (byte[],int,int,System.AsyncCallback,object) &lt;0x00117&gt;
</I>&gt;<i>
</I>&gt;<i> 11-17 09:28:20.125 I/mono    (24066):   at Mono.Security.Protocol.Tls.RecordProtocol.BeginReceiveRecord (System.IO.Stream,System.AsyncCallback,object) &lt;0x0016f&gt;****
</I>&gt;<i>
</I>&gt;<i> 11-17 09:28:20.125 I/mono    (24066):   at Mono.Security.Protocol.Tls.RecordProtocol.ReceiveRecord (System.IO.Stream) &lt;0x00023&gt;
</I>&gt;<i> 11-17 09:28:20.125 I/mono    (24066):   at Mono.Security.Protocol.Tls.SslStreamBase.InternalReadCallback (System.IAsyncResult) &lt;0x002a3&gt;****
</I>&gt;<i>
</I>&gt;<i> 11-17 09:28:20.125 I/mono    (24066):   at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_void__this___object (object,intptr,intptr,intptr) &lt;0xffffffff&gt;
</I>&gt;<i>
</I>&gt;<i> The more data is read, the more frequent the exception tends to be.****
</I>&gt;<i>
</I>&gt;<i> Is there anything I can do to workaround this issue? Or maybe Im doing something wrong?
</I>&gt;<i>
</I>&gt;<i> Im using M4A 1.2 and VS2010.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Piotr****
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111128/493b3bdf/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20111128/493b3bdf/attachment-0001.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007167.html">[mono-android] Random exceptions while reading SSL stream
</A></li>
	<LI>Next message: <A HREF="007356.html">[mono-android] Random exceptions while reading SSL stream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7329">[ date ]</a>
              <a href="thread.html#7329">[ thread ]</a>
              <a href="subject.html#7329">[ subject ]</a>
              <a href="author.html#7329">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
