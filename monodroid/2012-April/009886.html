<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Fragments problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Fragments%20problem&In-Reply-To=%3CCAJbSEHWb%2BqhqEBS8eo6gRPtV0yUM-b3s%3DA73qwqqgEfs2_Hm%3DQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009884.html">
   <LINK REL="Next"  HREF="009887.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Fragments problem</H1>
    <B>Tom Opgenorth</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Fragments%20problem&In-Reply-To=%3CCAJbSEHWb%2BqhqEBS8eo6gRPtV0yUM-b3s%3DA73qwqqgEfs2_Hm%3DQ%40mail.gmail.com%3E"
       TITLE="[mono-android] Fragments problem">tom at opgenorth.net
       </A><BR>
    <I>Wed Apr 25 19:42:20 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009884.html">[mono-android] Fragments problem
</A></li>
        <LI>Next message: <A HREF="009887.html">[mono-android] Fragments problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9886">[ date ]</a>
              <a href="thread.html#9886">[ thread ]</a>
              <a href="subject.html#9886">[ subject ]</a>
              <a href="author.html#9886">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If I may ask: Why are you createing all these fragments and then
hiding them?  Why not just create a fragment when you need  it and
replace the existing one?


On Wed, Apr 25, 2012 at 12:09, mosimo &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mos at r3dcloud.net</A>&gt; wrote:
&gt;<i> I've been playing with this more today and have got it working but it seems
</I>&gt;<i> like a bit of a bodge job. So if anyway has a better more efficient way of
</I>&gt;<i> doing this I'd appreciate it.
</I>&gt;<i>
</I>&gt;<i> -------Working code for newFrags()----
</I>&gt;<i> private void newFrags()
</I>&gt;<i> &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;int i = 0;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;foreach (String s in countries)
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;FragmentTransaction ft =
</I>&gt;<i> this.FragmentManager.BeginTransaction();
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;MyFragment fragment = new MyFragment(s);
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ft.Add(Resource.Id.frag_container, fragment, s);
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;if (i &lt; (countries.Length - 1))
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{ ft.Hide(fragment); }
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ft.Commit();
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;i++;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;currFrag = s;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;} }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -------------ORIGNAL POST CODE----------
</I>&gt;<i> ----Partial code of Activity1.cs ------------
</I>&gt;<i> Private String currFrag = &quot;&quot;;
</I>&gt;<i> private FragmentManager fm; //fm = this.FragmentManager; in OnCreate
</I>&gt;<i>
</I>&gt;<i> static readonly string[] countries = new String[] {
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;&quot;Afghanistan&quot;,&quot;Albania&quot;,&quot;Algeria&quot;,&quot;American Samoa&quot;,&quot;Andorra&quot;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;&quot;Angola&quot;,&quot;Anguilla&quot;,&quot;Antarctica&quot;,&quot;Antigua and
</I>&gt;<i> Barbuda&quot;,&quot;Argentina&quot;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;&quot;Armenia&quot;,&quot;Aruba&quot;,&quot;Australia&quot;,&quot;Austria&quot;,&quot;Azerbaijan&quot; }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> //Make new fragments with replace
</I>&gt;<i> //This works visually but I cannot access the fragments by their tags
</I>&gt;<i> //unless they are the current fragment being shown in frag_container
</I>&gt;<i> private void newFrags()
</I>&gt;<i> {
</I>&gt;<i> &#160; &#160;foreach (String s in countries)
</I>&gt;<i> &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160;FragmentTransaction ft = this.FragmentManager.BeginTransaction();
</I>&gt;<i> &#160; &#160; &#160; &#160;MyFragment fragment = new MyFragment(s);
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;//Replace fragment in container with new fragment MyFragment and
</I>&gt;<i> give it tag s
</I>&gt;<i> &#160; &#160; &#160; &#160;ft.Replace(Resource.Id.frag_container, fragment,s);
</I>&gt;<i> &#160; &#160; &#160; &#160;ft.Commit();
</I>&gt;<i> &#160; &#160; &#160; &#160;//Set String currFrag to the tag of the newly set Fragment
</I>&gt;<i> &#160; &#160; &#160; &#160;currFrag = s;
</I>&gt;<i> &#160; &#160;}
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> //Make new frags using add and hiding the last made one (if available)
</I>&gt;<i> //This is how I would like to do it so it loads all needed fragments
</I>&gt;<i> //then hides them as the next one is made
</I>&gt;<i> private void newFrags()
</I>&gt;<i> {
</I>&gt;<i> &#160; &#160;FragmentTransaction ft = this.FragmentManager.BeginTransaction();
</I>&gt;<i> &#160; &#160;foreach (String s in countries)
</I>&gt;<i> &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160;//Check if there was a Fragment already created and hide, if not no
</I>&gt;<i> need to hide anything
</I>&gt;<i> &#160; &#160; &#160; &#160;if (currFrag != &quot;&quot;)
</I>&gt;<i> &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;Fragment f = (Fragment)fm.FindFragmentByTag(currFrag);
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;ft.Hide(f);
</I>&gt;<i> &#160; &#160; &#160; &#160;}
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;MyFragment fragment = new MyFragment(s);
</I>&gt;<i> &#160; &#160; &#160; &#160;ft.Add(Resource.Id.frag_container, fragment, s);
</I>&gt;<i> &#160; &#160; &#160; &#160;ft.Commit();
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;currFrag = tag; // If I leave this in App crashes when I run this
</I>&gt;<i> function.
</I>&gt;<i> &#160; &#160;}
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> //How I want to switch fragments. This works and keeps all the previous
</I>&gt;<i> contents of the fragments
</I>&gt;<i> //and allows me to still change things on the fragments in the background
</I>&gt;<i> wtihout them
</I>&gt;<i> //needing to be visible by finding them using their tags.
</I>&gt;<i> private void switchFrag(string tag)
</I>&gt;<i> {
</I>&gt;<i> &#160; &#160;FragmentTransaction ft = this.FragmentManager.BeginTransaction();
</I>&gt;<i> &#160; &#160;ft.Hide(fm.FindFragmentByTag(currFrag));
</I>&gt;<i> &#160; &#160;ft.Show(fm.FindFragmentByTag(tag));
</I>&gt;<i> &#160; &#160;ft.Commit();
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/Fragments-problem-tp5664586p5665582.html">http://mono-for-android.1047100.n5.nabble.com/Fragments-problem-tp5664586p5665582.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>


-- 
<A HREF="http://www.opgenorth.net">http://www.opgenorth.net</A>
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009884.html">[mono-android] Fragments problem
</A></li>
	<LI>Next message: <A HREF="009887.html">[mono-android] Fragments problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9886">[ date ]</a>
              <a href="thread.html#9886">[ thread ]</a>
              <a href="subject.html#9886">[ subject ]</a>
              <a href="author.html#9886">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
