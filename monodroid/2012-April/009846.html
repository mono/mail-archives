<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] custom adapter for autocompletextbox
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20custom%20adapter%20for%20autocompletextbox&In-Reply-To=%3CCAAG_%2BO6OD6hVsAWphNpy6gKZa_AqPCBDW_q7V2HtJRMTFyiCgQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009845.html">
   <LINK REL="Next"  HREF="009847.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] custom adapter for autocompletextbox</H1>
    <B>Craig Dunn</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20custom%20adapter%20for%20autocompletextbox&In-Reply-To=%3CCAAG_%2BO6OD6hVsAWphNpy6gKZa_AqPCBDW_q7V2HtJRMTFyiCgQ%40mail.gmail.com%3E"
       TITLE="[mono-android] custom adapter for autocompletextbox">craig.dunn at conceptdevelopment.net
       </A><BR>
    <I>Sat Apr 21 01:54:42 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009845.html">[mono-android] custom adapter for autocompletextbox
</A></li>
        <LI>Next message: <A HREF="009847.html">[mono-android] AutoCompleteTextView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9846">[ date ]</a>
              <a href="thread.html#9846">[ thread ]</a>
              <a href="subject.html#9846">[ subject ]</a>
              <a href="author.html#9846">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>John,

I've put something together quickly that slots into the existing
ContentControls&lt;<A HREF="https://github.com/xamarin/monodroid-samples/tree/master/ContentControls">https://github.com/xamarin/monodroid-samples/tree/master/ContentControls</A>&gt;[0]
sample on github. here it is in action, searching for &quot;ea&quot; in a dictionary
<A HREF="http://screencast.com/t/7rWbUaVY">http://screencast.com/t/7rWbUaVY</A>

Download that sample,then in the
Screens/AutoCompleteTextViewScreen.cschange the adapter to use

act.Adapter = new AutoAdapter(this,
Android.Resource.Layout.SimpleDropDownItem1Line, wordlist);

and add this AutoAdapter.cs class/file (also at
<A HREF="https://gist.github.com/2433227">https://gist.github.com/2433227</A>)

using System;

using System.Collections.Generic;

using Android.App;

using Android.Views;

using Android.Widget;


namespace ContentControls {

public class AutoAdapter : ArrayAdapter, IFilterable

{

LayoutInflater inflater;

Filter filter;

Activity context;

public string[] AllItems;

public string[] MatchItems;


 public AutoAdapter (Activity context, int txtViewResourceId, string[]
items)

:<i> base(context, txtViewResourceId, items)
</I>
{

inflater = context.LayoutInflater;

filter = new SuggestionsFilter(this);

AllItems = items;

MatchItems = items;

}

public override int Count {

get {

return MatchItems.Length;

}

}

public override Java.Lang.Object GetItem (int position)

{

return MatchItems[position];

}

public override View GetView (int position, View convertView, ViewGroup
parent)

{

View view = convertView;

if (view == null)

view = inflater.Inflate(Android.Resource.Layout.SimpleDropDownItem1Line,
null);


            view.FindViewById&lt;TextView&gt;(Android.Resource.Id.Text1).Text =
MatchItems[position];


            return view;

}

 public override Filter Filter {

get {

return filter;

}

}


 class SuggestionsFilter : Filter

{

AutoAdapter a;

public SuggestionsFilter (AutoAdapter adapter) : base() {

a = adapter;

}

protected override Filter.FilterResults PerformFiltering
(Java.Lang.ICharSequence constraint)

{

FilterResults results = new FilterResults();

if (constraint != null) {

var searchFor = constraint.ToString ();

Console.WriteLine (&quot;searchFor:&quot; + searchFor);

var matchList = new List&lt;string&gt;();

 var matches = from i in a.AllItems

where i.IndexOf(searchFor) &gt;= 0

select i;

 foreach (var match in matches) {

matchList.Add (match);

}

 a.MatchItems = matchList.ToArray ();

Console.WriteLine (&quot;resultCount:&quot; + matchList.Count);


Java.Lang.Object[] matchObjects;

matchObjects = new Java.Lang.Object[matchList.Count];

for (int i = 0; i &lt; matchList.Count; i++) {

matchObjects[i] = new Java.Lang.String(matchList[i]);

}


 results.Values = matchObjects;

results.Count = matchList.Count;

}

return results;

}

protected override void PublishResults (Java.Lang.ICharSequence constraint,
Filter.FilterResults results)

{

a.NotifyDataSetChanged();

}

}

}

}

HTH
craig

[0] <A HREF="https://github.com/xamarin/monodroid-samples/tree/master/ContentControls">https://github.com/xamarin/monodroid-samples/tree/master/ContentControls</A>




On Sat, Apr 21, 2012 at 7:59 AM, John Murray &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">john at murray.gb.com</A>&gt; wrote:

&gt;<i> I have looked at the forum but cant find any assistance with this
</I>&gt;<i> previously &#8211; Might be useful to others ****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> I was looking for  a way to run an autocompletetextbox with a filter which
</I>&gt;<i> allowed the selection from teh adapter to show any items &#8216;containing&#8217; the
</I>&gt;<i> letters typed in (by default it will filter on anything &#8216;beginning&#8217; with
</I>&gt;<i> the letters typed in ) ****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> I came across an item on StackOverflow with this Java code ****
</I>&gt;<i>
</I>&gt;<i> I have successfully converted java code before but htis one beats me  -Can
</I>&gt;<i> anyone help &#8211; Like I say this might be a useful example to add to the
</I>&gt;<i> Webote or one of the books to help others &#8211; I&#8217;m just not knowledgeable
</I>&gt;<i> enough to solve it ****
</I>&gt;<i>
</I>&gt;<i> This code is my attempt at conversion but throws up several errors which I
</I>&gt;<i> cant figure****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> I realise that even if I get this translated into c# I still have to
</I>&gt;<i> figure how to filter on a &#8216;contains&#8217; model rather than &#8216;begin wth&#8217; ****
</I>&gt;<i>
</I>&gt;<i> Any help much appreciated ****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> John Murray****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Agar14.ACAdapter.SuggestionsFilter' does not implement inherited abstract
</I>&gt;<i> member 'Android.Widget.Filter.PerformFiltering(Java.Lang.ICharSequence)'**
</I>&gt;<i> **
</I>&gt;<i>
</I>&gt;<i> 'Agar14.ACAdapter.SuggestionsFilter.PerformFiltering(Android.Runtime.CharSequence)':
</I>&gt;<i> no suitable method found to override****
</I>&gt;<i>
</I>&gt;<i> 'Agar14.ACAdapter.SuggestionsFilter.PublishResults(Android.Runtime.CharSequence,
</I>&gt;<i> Android.Widget.Filter.FilterResults)': no suitable method found to
</I>&gt;<i> override        ****
</I>&gt;<i>
</I>&gt;<i> Cannot access a non-static member of outer type
</I>&gt;<i> 'Android.Widget.BaseAdapter' via nested type
</I>&gt;<i> 'Agar14.ACAdapter.SuggestionsFilter'    ****
</I>&gt;<i>
</I>&gt;<i> 'Android.Runtime.CharSequence': static types cannot be used as
</I>&gt;<i> parameters    ****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> public class ACAdapter : ArrayAdapter , IFilterable ****
</I>&gt;<i>
</I>&gt;<i>     {****
</I>&gt;<i>
</I>&gt;<i>     protected LayoutInflater mInflater;****
</I>&gt;<i>
</I>&gt;<i>     protected Filter filter;****
</I>&gt;<i>
</I>&gt;<i>         public ACAdapter(Context context, int textViewResourceId, string[]
</I>&gt;<i> items) :base(context, textViewResourceId, items)****
</I>&gt;<i>
</I>&gt;<i>         {****
</I>&gt;<i>
</I>&gt;<i>       ****
</I>&gt;<i>
</I>&gt;<i>         SuggestionsFilter  filter = new SuggestionsFilter();****
</I>&gt;<i>
</I>&gt;<i>         mInflater = LayoutInflater.From(context);****
</I>&gt;<i>
</I>&gt;<i>         }****
</I>&gt;<i>
</I>&gt;<i>     public override View GetView(int position, View convertView, ViewGroupparent) {
</I>&gt;<i> ****
</I>&gt;<i>
</I>&gt;<i>         View v = convertView;****
</I>&gt;<i>
</I>&gt;<i>         if (v == null) {****
</I>&gt;<i>
</I>&gt;<i>             v = mInflater.Inflate(Resource.Layout.list_item, parent, false
</I>&gt;<i> );****
</I>&gt;<i>
</I>&gt;<i>         }****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i>         TextView tt = v.FindViewById&lt;TextView&gt;(Resource.Layout.textview);*
</I>&gt;<i> ***
</I>&gt;<i>
</I>&gt;<i>         tt.SetText(&quot;Suggestion item&quot;,TextView.BufferType.Editable);****
</I>&gt;<i>
</I>&gt;<i>         return v;****
</I>&gt;<i>
</I>&gt;<i>     }****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i>     public Filter GetFilter() {****
</I>&gt;<i>
</I>&gt;<i>         return filter;****
</I>&gt;<i>
</I>&gt;<i>     }****
</I>&gt;<i>
</I>&gt;<i>     public class SuggestionsFilter : Filter {****
</I>&gt;<i>
</I>&gt;<i>         protected override FilterResults PerformFiltering(CharSequenceconstraint) {
</I>&gt;<i> ****
</I>&gt;<i>
</I>&gt;<i>             return null;****
</I>&gt;<i>
</I>&gt;<i>         }****
</I>&gt;<i>
</I>&gt;<i>         protected override  void PublishResults(CharSequence constraint,
</I>&gt;<i> FilterResults results) {****
</I>&gt;<i>
</I>&gt;<i>             NotifyDataSetChanged();****
</I>&gt;<i>
</I>&gt;<i>         }****
</I>&gt;<i>
</I>&gt;<i>     }****
</I>&gt;<i>
</I>&gt;<i> }****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20120421/91f5a7fc/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20120421/91f5a7fc/attachment-0001.html</A>&gt;
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009845.html">[mono-android] custom adapter for autocompletextbox
</A></li>
	<LI>Next message: <A HREF="009847.html">[mono-android] AutoCompleteTextView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9846">[ date ]</a>
              <a href="thread.html#9846">[ thread ]</a>
              <a href="subject.html#9846">[ subject ]</a>
              <a href="author.html#9846">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
