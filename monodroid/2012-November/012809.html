<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Serial Port for MODBUS/RS485
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Serial%20Port%20for%20MODBUS/RS485&In-Reply-To=%3CCAKq9yRhCf5ioDH7m4%3DiUpbL%3Dm1LhjNuunj4aNus_ejriXy0uNg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012783.html">
   <LINK REL="Next"  HREF="012817.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Serial Port for MODBUS/RS485</H1>
    <B>Daniele Salvatore Albano</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Serial%20Port%20for%20MODBUS/RS485&In-Reply-To=%3CCAKq9yRhCf5ioDH7m4%3DiUpbL%3Dm1LhjNuunj4aNus_ejriXy0uNg%40mail.gmail.com%3E"
       TITLE="[mono-android] Serial Port for MODBUS/RS485">d.albano at gmail.com
       </A><BR>
    <I>Tue Nov 13 01:08:57 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="012783.html">[mono-android] Serial Port for MODBUS/RS485
</A></li>
        <LI>Next message: <A HREF="012817.html">[mono-android] Serial Port for MODBUS/RS485
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12809">[ date ]</a>
              <a href="thread.html#12809">[ thread ]</a>
              <a href="subject.html#12809">[ subject ]</a>
              <a href="author.html#12809">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>After few hours of happy hacking i successfully compiled
libMonoPosixHelper using ndk on windows and it works like a charm with
mono System.IO.Ports (i dropped some code) and NModbus (that uses
log4net and in which i removed a lot of unuseful and unsupported
code).

Just one thing: i discovered that android doesn't load native
libraries dependencies so i make a BIG library containing:
- libeglib, from mono-master
- libz, from mono-master (i just added stuff in support folder)
- some functions from libm (sqrt and all the necessary stuff) because
libeglib uses them for hashtables

Now it working fine and it's very very very nice, my basilar weather
station (just pressure and temperature) is happily attached to my
chinese android tablet with android 4.0.3 and seems to works fine
(twenty minutes without crash :))

Big question: i've seen that libz and libeglib uses mit/bsd style
license, what license is in use for libMonoPosixHelper?


Thank you!

2012/11/6 Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jonp at xamarin.com</A>&gt;:
&gt;<i> On Nov 5, 2012, at 8:06 PM, Daniele Salvatore Albano &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">d.albano at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> While i understand that some (many) custom kernels doesn't support serial ports (internal and usb ones), i really need it :)
</I>&gt;<i>
</I>&gt;&gt;<i> Can i do something to obtain support for Serial Ports on mono for android? Can i grab System.IO.Ports from mono project (i think not, i've seen that a native helper called MonoPosixHelper is used).
</I>&gt;<i>
</I>&gt;<i> You'd need to grab both: use the Android NDK to compile mono/support into MonoPosixHelper, and compile mcs/class/System/Sytem.IO.Ports into your application. In theory both should be do-able, but I haven't tried (and thus don't know what complications you may run into).
</I>&gt;<i>
</I>&gt;&gt;<i> I imagine that i need to write a simple native library to handle this situation,
</I>&gt;<i>
</I>&gt;<i> That would be the NDK-built libMonoPosixHelper.so.
</I>&gt;<i>
</I>&gt;&gt;<i> or i can write a native android library and use it with pinvokes on mono for android?
</I>&gt;<i>
</I>&gt;<i> P/Invoke is fully supported. You can certainly DllImport into an app-bundled MonoPosixHelper.
</I>&gt;<i>
</I>&gt;&gt;<i> I've wrote some stuff, some time ago, to handle serial ports and it works fine so if i can use it without interfacing with JNI would be great!
</I>&gt;<i>
</I>&gt;<i> That works too.
</I>&gt;<i>
</I>&gt;<i>  - Jon
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>


-- 
Daniele Salvatore Albano
---
IT Consultant
Website Design and Development
Software Engineer and Developer
Linux Servers SetUp And Administration
Embedded Network Solutions

<A HREF="http://www.daccii.it">http://www.daccii.it</A>
<A HREF="http://www.itechcon.it">http://www.itechcon.it</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012783.html">[mono-android] Serial Port for MODBUS/RS485
</A></li>
	<LI>Next message: <A HREF="012817.html">[mono-android] Serial Port for MODBUS/RS485
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12809">[ date ]</a>
              <a href="thread.html#12809">[ thread ]</a>
              <a href="subject.html#12809">[ subject ]</a>
              <a href="author.html#12809">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
