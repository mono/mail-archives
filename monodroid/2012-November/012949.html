<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Updating textview from a thread
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Updating%20textview%20from%20a%20thread&In-Reply-To=%3CCAEFaS4bOjn34PeLBmdDfhMEBRPG5CuwUrtDnTa59sgg7FWH7oA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012961.html">
   <LINK REL="Next"  HREF="012983.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Updating textview from a thread</H1>
    <B>Maximilian Wilson</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Updating%20textview%20from%20a%20thread&In-Reply-To=%3CCAEFaS4bOjn34PeLBmdDfhMEBRPG5CuwUrtDnTa59sgg7FWH7oA%40mail.gmail.com%3E"
       TITLE="[mono-android] Updating textview from a thread">wilson.max at gmail.com
       </A><BR>
    <I>Sun Nov 25 15:20:12 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="012961.html">[mono-android] Updating textview from a thread
</A></li>
        <LI>Next message: <A HREF="012983.html">[mono-android] Updating textview from a thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12949">[ date ]</a>
              <a href="thread.html#12949">[ thread ]</a>
              <a href="subject.html#12949">[ subject ]</a>
              <a href="author.html#12949">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>RunOnUIThread is a member of Activity, see
<A HREF="http://developer.android.com/reference/android/app/Activity.html.">http://developer.android.com/reference/android/app/Activity.html.</A> If there
anyway you could change the signature of expiration to have an activity
reference?

public void expiration(object o, Activity context)
{
       context.RunOnUiThread(() =&gt; tv.Text = &quot;TIME END&quot;);
}

Alternatively, if you can't change the signature, you could write a
synchronization context that used RunOnUIThread under the covers, set it
via SetSynchronizationContext when you create your worker thread, and then
use it via SynchonizationContext.Current. The whole point of
synchronization contexts is abstracting away thread-control mechanisms, so
they still work in Mono, it's just that instead of one that runs on the
thread pool or on a WPF dispatcher, you want a custom one that runs via
RunOnUIThread and the Android stack.

-Max

On Sat, Nov 24, 2012 at 3:42 AM, JM_SH &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">juanmanuelsanchezh at gmail.com</A>&gt; wrote:

&gt;<i> Hello,
</I>&gt;<i> Thank you for your answer, but i haven&#180;t get it, I don&#180;t know if I
</I>&gt;<i> undersntood fine, I have to use the code you gave into the thread isn&#180;t it?
</I>&gt;<i> I create the thread so:
</I>&gt;<i>        TimerCallback tc1 = new TimerCallback(expiration);
</I>&gt;<i>        expTime = new System.Threading.Timer(tc1, null, 1000, 500);
</I>&gt;<i>
</I>&gt;<i> and I have a method
</I>&gt;<i>
</I>&gt;<i> public void expiration(object o)
</I>&gt;<i> {
</I>&gt;<i>        //Here I want to update the textview
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> What i have try is to put the code you suggested inside the method above in
</I>&gt;<i> this way:
</I>&gt;<i> public void expiration(object o)
</I>&gt;<i> {
</I>&gt;<i>        RunOnUiThread(() =&gt; tv.Text = &quot;TIME END&quot;);
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> but it doesn&#180;t make anything.
</I>&gt;<i> Probably I`m making wrong...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://mono-for-android.1047100.n5.nabble.com/Updating-textview-from-a-thread-tp5712478p5712481.html">http://mono-for-android.1047100.n5.nabble.com/Updating-textview-from-a-thread-tp5712478p5712481.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>


-- 
Hahahahaaaa!!! That is ME laughing at YOU, cruel world.
    -Jordan Rixon

I could not love thee, dear, so much,
Loved I not Honour more.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20121125/0f737d36/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20121125/0f737d36/attachment.html</A>&gt;
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012961.html">[mono-android] Updating textview from a thread
</A></li>
	<LI>Next message: <A HREF="012983.html">[mono-android] Updating textview from a thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12949">[ date ]</a>
              <a href="thread.html#12949">[ thread ]</a>
              <a href="subject.html#12949">[ subject ]</a>
              <a href="author.html#12949">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
