<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Debugging a service in another process
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Debugging%20a%20service%20in%20another%20process&In-Reply-To=%3CCAK%2BbpX%3D6G5ZZbkQ9dBYk%3Dsirx83gDM8XZK3xkJdN85ViJ5fF3A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012844.html">
   <LINK REL="Next"  HREF="012851.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Debugging a service in another process</H1>
    <B>Bjorn Coltof</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Debugging%20a%20service%20in%20another%20process&In-Reply-To=%3CCAK%2BbpX%3D6G5ZZbkQ9dBYk%3Dsirx83gDM8XZK3xkJdN85ViJ5fF3A%40mail.gmail.com%3E"
       TITLE="[mono-android] Debugging a service in another process">bjorn.coltof at gmail.com
       </A><BR>
    <I>Thu Nov 15 09:30:48 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="012844.html">[mono-android] Consuming WCF 4.0 Service
</A></li>
        <LI>Next message: <A HREF="012851.html">[mono-android] Debugging a service in another process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12846">[ date ]</a>
              <a href="thread.html#12846">[ thread ]</a>
              <a href="subject.html#12846">[ subject ]</a>
              <a href="author.html#12846">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Does anyone know how I can debug a service that is hosted in
a separate process? When debugging the app that contains the service the
service crashes a number of times due to an error in the debugger and
eventually does start when the process starts without debugging.

As part of the start the activity also sends a Message to the service, this
message is delivered in the end but somehow the ReplyTo object is lost
along the way or becomes invalid. If I run the same app in release mode all
is well and the ReplyTo object can be used to successfully send back a
message to the activity.

Is there a way that I can get the debugger to also attach to the process?
If not, is there a way I can disable the debugger to even attempt to start
for the service?

I've attached the relevant bit form the device log.

Any help would be greatly appreciated...

Bj&#246;rn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20121115/5e973c2e/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20121115/5e973c2e/attachment-0001.html</A>&gt;
-------------- next part --------------
11-15 10:18:51.786 I/ActivityManager(  885): Start proc NipoSoftware.Nfield.Capi.Client for activity NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.SplashActivity: pid=1541 uid=10041 gids={3003, 1015}
11-15 10:18:51.807 D/AndroidRuntime( 1531): Shutting down VM
11-15 10:18:51.816 D/dalvikvm( 1531): GC_CONCURRENT freed 96K, 78% free 470K/2048K, paused 0ms+0ms
11-15 10:18:51.826 I/dalvikvm( 1541): Turning on JNI app bug workarounds for target SDK version 8...
11-15 10:18:51.876 W/NetworkManagementSocketTagger(  885): setKernelCountSet(10041, 1) failed with errno -2
11-15 10:18:52.116 I/ActivityThread( 1541): Pub NipoSoftware.Nfield.Capi.Client.mono.MonoRuntimeProvider.__mono_init__: mono.MonoRuntimeProvider
11-15 10:18:52.126 D/dalvikvm( 1541): Trying to load lib /data/data/NipoSoftware.Nfield.Capi.Client/lib/libmonodroid.so 0xb4a20c78
11-15 10:18:52.126 D/dalvikvm( 1541): Added shared lib /data/data/NipoSoftware.Nfield.Capi.Client/lib/libmonodroid.so 0xb4a20c78
11-15 10:18:52.156 W/MonoDroid-Debugger( 1541): Trying to initialize the debugger with options: --debugger-agent=transport=dt_socket,loglevel=0,address=127.0.0.1:8953,server=y,embedding=1
11-15 10:18:52.196 W/MonoDroid-Debugger( 1541): Accepted stdout connection: 39
11-15 10:18:52.376 I/Process (  885): Sending signal. PID: 1541 SIG: 3
11-15 10:18:52.376 I/dalvikvm( 1541): threadid=3: reacting to signal 3
11-15 10:18:52.376 I/dalvikvm( 1541): Wrote stack traces to '/data/anr/traces.txt'
11-15 10:18:52.876 I/Process (  885): Sending signal. PID: 1541 SIG: 3
11-15 10:18:52.876 I/dalvikvm( 1541): threadid=3: reacting to signal 3
11-15 10:18:52.887 I/dalvikvm( 1541): Wrote stack traces to '/data/anr/traces.txt'
11-15 10:18:53.386 I/Process (  885): Sending signal. PID: 1541 SIG: 3
11-15 10:18:53.386 I/dalvikvm( 1541): threadid=3: reacting to signal 3
11-15 10:18:53.386 I/dalvikvm( 1541): Wrote stack traces to '/data/anr/traces.txt'
11-15 10:18:53.886 I/Process (  885): Sending signal. PID: 1541 SIG: 3
11-15 10:18:53.886 I/dalvikvm( 1541): threadid=3: reacting to signal 3
11-15 10:18:53.886 I/dalvikvm( 1541): Wrote stack traces to '/data/anr/traces.txt'
11-15 10:18:54.016 W/monodroid-gc( 1541): GREF GC Threshold: 1800
11-15 10:18:54.386 I/Process (  885): Sending signal. PID: 1541 SIG: 3
11-15 10:18:54.386 I/dalvikvm( 1541): threadid=3: reacting to signal 3
11-15 10:18:54.386 I/dalvikvm( 1541): Wrote stack traces to '/data/anr/traces.txt'
11-15 10:18:54.886 I/Process (  885): Sending signal. PID: 1541 SIG: 3
11-15 10:18:54.886 I/dalvikvm( 1541): threadid=3: reacting to signal 3
11-15 10:18:54.886 I/dalvikvm( 1541): Wrote stack traces to '/data/anr/traces.txt'
11-15 10:18:55.316 D/dalvikvm(  977): GC_CONCURRENT freed 383K, 6% free 9491K/9991K, paused 2ms+3ms
11-15 10:18:55.386 I/Process (  885): Sending signal. PID: 1541 SIG: 3
11-15 10:18:55.386 I/dalvikvm( 1541): threadid=3: reacting to signal 3
11-15 10:18:55.396 I/dalvikvm( 1541): Wrote stack traces to '/data/anr/traces.txt'
11-15 10:18:55.686 V/SplashActivity( 1541): OnCreate
11-15 10:18:55.718 V/SplashActivity( 1541): OnResume
11-15 10:18:55.726 D/SplashActivity( 1541): Starting service
11-15 10:18:55.786 D/dalvikvm( 1563): Not late-enabling CheckJNI (already on)
11-15 10:18:55.806 I/ActivityManager(  885): Start proc NipoSoftware.Nfield.Capi.Client:service for service NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.NancyService: pid=1563 uid=10041 gids={3003, 1015}
11-15 10:18:55.886 I/Process (  885): Sending signal. PID: 1541 SIG: 3
11-15 10:18:55.886 I/dalvikvm( 1541): threadid=3: reacting to signal 3
11-15 10:18:55.896 I/dalvikvm( 1563): Turning on JNI app bug workarounds for target SDK version 8...
11-15 10:18:55.936 I/dalvikvm( 1541): Wrote stack traces to '/data/anr/traces.txt'
11-15 10:18:55.956 D/dalvikvm( 1541): GC_FOR_ALLOC freed 43K, 3% free 9028K/9283K, paused 43ms
11-15 10:18:55.956 I/dalvikvm-heap( 1541): Grow heap (frag case) to 10.335MB for 1536012-byte allocation
11-15 10:18:56.007 D/dalvikvm( 1541): GC_CONCURRENT freed &lt;1K, 3% free 10527K/10823K, paused 2ms+1ms
11-15 10:18:56.066 D/dalvikvm( 1541): GC_FOR_ALLOC freed 0K, 3% free 10528K/10823K, paused 51ms
11-15 10:18:56.106 I/ActivityThread( 1563): Pub NipoSoftware.Nfield.Capi.Client.mono.MonoRuntimeProvider_1.__mono_init__: mono.MonoRuntimeProvider_1
11-15 10:18:56.127 D/dalvikvm( 1563): Trying to load lib /data/data/NipoSoftware.Nfield.Capi.Client/lib/libmonodroid.so 0xb4a21e58
11-15 10:18:56.136 D/dalvikvm( 1563): Added shared lib /data/data/NipoSoftware.Nfield.Capi.Client/lib/libmonodroid.so 0xb4a21e58
11-15 10:18:56.146 W/MonoDroid-Debugger( 1563): Trying to initialize the debugger with options: --debugger-agent=transport=dt_socket,loglevel=0,address=127.0.0.1:8953,server=y,embedding=1
11-15 10:18:56.156 W/MonoDroid-Debugger( 1563): Accepted stdout connection: -1
11-15 10:18:56.156 F/MonoDroid-Debugger( 1563): Error accepting stdout and stderr (127.0.0.1:8954)
11-15 10:18:56.166 I/dalvikvm-heap( 1541): Grow heap (frag case) to 13.631MB for 3456012-byte allocation
11-15 10:18:56.216 I/ActivityManager(  885): Process NipoSoftware.Nfield.Capi.Client:service (pid 1563) has died.
11-15 10:18:56.226 W/ActivityManager(  885): Scheduling restart of crashed service NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.NancyService in 5000ms
11-15 10:18:56.236 D/Zygote  (  794): Process 1563 exited cleanly (1)
11-15 10:18:56.236 D/dalvikvm( 1541): GC_FOR_ALLOC freed 0K, 3% free 13903K/14215K, paused 52ms
11-15 10:18:56.366 D/gralloc_goldfish( 1541): Emulator without GPU emulation detected.
11-15 10:18:56.396 V/PhoneStatusBar(  945): setLightsOn(true)
11-15 10:18:56.426 I/Process (  885): Sending signal. PID: 1541 SIG: 3
11-15 10:18:56.426 I/dalvikvm( 1541): threadid=3: reacting to signal 3
11-15 10:18:56.436 I/dalvikvm( 1541): Wrote stack traces to '/data/anr/traces.txt'
11-15 10:18:56.506 I/ActivityManager(  885): Displayed NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.SplashActivity: +4s751ms (total +11s649ms)
11-15 10:18:56.546 W/NetworkManagementSocketTagger(  885): setKernelCountSet(10012, 0) failed with errno -2
11-15 10:19:01.266 D/dalvikvm( 1575): Not late-enabling CheckJNI (already on)
11-15 10:19:01.286 I/ActivityManager(  885): Start proc NipoSoftware.Nfield.Capi.Client:service for service NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.NancyService: pid=1575 uid=10041 gids={3003, 1015}
11-15 10:19:01.317 I/dalvikvm( 1575): Turning on JNI app bug workarounds for target SDK version 8...
11-15 10:19:01.406 I/ActivityThread( 1575): Pub NipoSoftware.Nfield.Capi.Client.mono.MonoRuntimeProvider_1.__mono_init__: mono.MonoRuntimeProvider_1
11-15 10:19:01.416 D/dalvikvm( 1575): Trying to load lib /data/data/NipoSoftware.Nfield.Capi.Client/lib/libmonodroid.so 0xb4a22d40
11-15 10:19:01.426 D/dalvikvm( 1575): Added shared lib /data/data/NipoSoftware.Nfield.Capi.Client/lib/libmonodroid.so 0xb4a22d40
11-15 10:19:01.436 W/MonoDroid-Debugger( 1575): Trying to initialize the debugger with options: --debugger-agent=transport=dt_socket,loglevel=0,address=127.0.0.1:8953,server=y,embedding=1
11-15 10:19:01.436 W/MonoDroid-Debugger( 1575): Accepted stdout connection: -1
11-15 10:19:01.436 F/MonoDroid-Debugger( 1575): Error accepting stdout and stderr (127.0.0.1:8954)
11-15 10:19:01.466 I/ActivityManager(  885): Process NipoSoftware.Nfield.Capi.Client:service (pid 1575) has died.
11-15 10:19:01.466 D/Zygote  (  794): Process 1575 exited cleanly (1)
11-15 10:19:01.466 W/ActivityManager(  885): Scheduling restart of crashed service NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.NancyService in 20000ms
11-15 10:19:12.867 W/ThrottleService(  885): unable to find stats for iface rmnet0
11-15 10:19:21.506 D/dalvikvm( 1587): Not late-enabling CheckJNI (already on)
11-15 10:19:21.536 I/ActivityManager(  885): Start proc NipoSoftware.Nfield.Capi.Client:service for service NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.NancyService: pid=1587 uid=10041 gids={3003, 1015}
11-15 10:19:21.566 I/dalvikvm( 1587): Turning on JNI app bug workarounds for target SDK version 8...
11-15 10:19:21.646 I/ActivityThread( 1587): Pub NipoSoftware.Nfield.Capi.Client.mono.MonoRuntimeProvider_1.__mono_init__: mono.MonoRuntimeProvider_1
11-15 10:19:21.666 D/dalvikvm( 1587): Trying to load lib /data/data/NipoSoftware.Nfield.Capi.Client/lib/libmonodroid.so 0xb4a23c90
11-15 10:19:21.666 D/dalvikvm( 1587): Added shared lib /data/data/NipoSoftware.Nfield.Capi.Client/lib/libmonodroid.so 0xb4a23c90
11-15 10:19:21.676 W/MonoDroid-Debugger( 1587): Trying to initialize the debugger with options: --debugger-agent=transport=dt_socket,loglevel=0,address=127.0.0.1:8953,server=y,embedding=1
11-15 10:19:21.676 W/MonoDroid-Debugger( 1587): Accepted stdout connection: -1
11-15 10:19:21.676 F/MonoDroid-Debugger( 1587): Error accepting stdout and stderr (127.0.0.1:8954)
11-15 10:19:21.696 I/ActivityManager(  885): Process NipoSoftware.Nfield.Capi.Client:service (pid 1587) has died.
11-15 10:19:21.696 W/ActivityManager(  885): Canceling start item Intent { cmp=NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.NancyService } in service ComponentInfo{NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.NancyService}
11-15 10:19:21.696 W/ActivityManager(  885): Scheduling restart of crashed service NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.NancyService in 80000ms
11-15 10:19:21.706 D/Zygote  (  794): Process 1587 exited cleanly (1)
11-15 10:20:41.738 D/dalvikvm( 1600): Not late-enabling CheckJNI (already on)
11-15 10:20:41.768 I/ActivityManager(  885): Start proc NipoSoftware.Nfield.Capi.Client:service for service NipoSoftware.Nfield.Capi.Client/niposoftware.nfield.capi.client.NancyService: pid=1600 uid=10041 gids={3003, 1015}
11-15 10:20:41.808 I/dalvikvm( 1600): Turning on JNI app bug workarounds for target SDK version 8...
11-15 10:20:41.879 I/ActivityThread( 1600): Pub NipoSoftware.Nfield.Capi.Client.mono.MonoRuntimeProvider_1.__mono_init__: mono.MonoRuntimeProvider_1
11-15 10:20:41.888 D/dalvikvm( 1600): Trying to load lib /data/data/NipoSoftware.Nfield.Capi.Client/lib/libmonodroid.so 0xb4a24ac0
11-15 10:20:41.898 D/dalvikvm( 1600): Added shared lib /data/data/NipoSoftware.Nfield.Capi.Client/lib/libmonodroid.so 0xb4a24ac0
11-15 10:20:41.898 W/MonoDroid-Debugger( 1600): Not starting the debugger as the timeout value has been reached; current-time: 1352971241  timeout: 1352971161
11-15 10:20:41.948 W/monodroid-gc( 1600): GREF GC Threshold: 1800
11-15 10:20:42.178 V/NancyService( 1600): OnCreate
11-15 10:20:42.188 D/NancyService( 1600): Initializing DependencyResolver
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012844.html">[mono-android] Consuming WCF 4.0 Service
</A></li>
	<LI>Next message: <A HREF="012851.html">[mono-android] Debugging a service in another process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12846">[ date ]</a>
              <a href="thread.html#12846">[ thread ]</a>
              <a href="subject.html#12846">[ subject ]</a>
              <a href="author.html#12846">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
