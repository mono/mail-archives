<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] get network interface list failure and P/Invoke	style workaround?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20get%20network%20interface%20list%20failure%20and%20P/Invoke%0A%09style%20workaround%3F&In-Reply-To=CABunV9XqDJysP78X4b5vJkgQ-_uCPiuEauqR8%3Dv3LzgwU_DKEA%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005599.html">
   <LINK REL="Next"  HREF="005600.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] get network interface list failure and P/Invoke	style workaround?</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20get%20network%20interface%20list%20failure%20and%20P/Invoke%0A%09style%20workaround%3F&In-Reply-To=CABunV9XqDJysP78X4b5vJkgQ-_uCPiuEauqR8%3Dv3LzgwU_DKEA%40mail.gmail.com"
       TITLE="[mono-android] get network interface list failure and P/Invoke	style workaround?">jonp at xamarin.com
       </A><BR>
    <I>Wed Aug  3 19:10:40 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005599.html">[mono-android] get network interface list failure and P/Invoke style workaround?
</A></li>
        <LI>Next message: <A HREF="005600.html">[mono-android] Non-persisting property in custom application.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5665">[ date ]</a>
              <a href="thread.html#5665">[ thread ]</a>
              <a href="subject.html#5665">[ subject ]</a>
              <a href="author.html#5665">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Aug 1, 2011, at 6:52 AM, Iain Mcleod wrote:
&gt;<i> When I attempt to debug the application, it runs for a few seconds and comms seem fine.  However before long it will crash out and I get a No Source Available page in visual studio with a crash stacktrace (below).  I'm afraid I don't know what the exception message actually is as the No Source Available page does not give me any exception details, and the stacktrace does not include any of my code. My woes are further complicated by the fact that if I try to interact with visual studio to show a disassembly, it crashes too.
</I>&gt;<i> 
</I>&gt;<i> The only info I can provide is the following stacktrace:
</I>&gt;<i> 
</I>&gt;<i> 0x4E in System.Net.WebConnectionStream..ctor at /home/mkestner/monogit/mono/mcs/class/System/System.Net/WebConnectionStream.cs:76
</I>&gt;<i> 0x135 in System.Net.WebConnection.ReadDone at /home/mkestner/monogit/mono/mcs/class/System/System.Net/WebConnection.cs:486
</I>
What's the exception? You can see some of the source at:

	<A HREF="https://github.com/mono/mono/blob/mono-android-1-0/mcs/class/System/System.Net/WebConnectionStream.cs#L76">https://github.com/mono/mono/blob/mono-android-1-0/mcs/class/System/System.Net/WebConnectionStream.cs#L76</A>
	<A HREF="https://github.com/mono/mono/blob/mono-android-1-0/mcs/class/System/System.Net/WebConnection.cs#L486">https://github.com/mono/mono/blob/mono-android-1-0/mcs/class/System/System.Net/WebConnection.cs#L486</A>

Full stack trace + exception type + message may be helpful.

&gt;<i> 
</I>&gt;<i> I also see a periodic message in the adb log:
</I>&gt;<i> ERROR: Unable to detach current thread from the Java VM!
</I>
That's ignorable. We should probably just stop emitting that message; I'm not even sure why it happens (as in, I've read Android's source and can't fathom how we're getting a return value that would prompt us to generate that message...).

&gt;<i> App is open source, I can also send you a build if you wish to try running it, but I rather suspect it will not crash without running on a network with devices to communicate with.
</I>
You could always file a bug. :-)

I am also reminded of:

	<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=648862#c9">https://bugzilla.novell.com/show_bug.cgi?id=648862#c9</A>

in which things went bad because network resources weren't disposed of in a timely fashion. Perhaps you could look for some HttpWebResponse/etc. instances and ensure that you Dispose() of them when you're done? Mono's networking infrastructure doesn't seem to like/appreciate having &quot;too many&quot; network connections &quot;in flight&quot; at once.

 - Jon

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005599.html">[mono-android] get network interface list failure and P/Invoke style workaround?
</A></li>
	<LI>Next message: <A HREF="005600.html">[mono-android] Non-persisting property in custom application.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5665">[ date ]</a>
              <a href="thread.html#5665">[ thread ]</a>
              <a href="subject.html#5665">[ subject ]</a>
              <a href="author.html#5665">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
