<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] HTTP issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20HTTP%20issues&In-Reply-To=704D36BD-4E9B-4CA1-A00E-72EF7D385F7A%40xamarin.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005702.html">
   <LINK REL="Next"  HREF="005706.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] HTTP issues</H1>
    <B>Tim Kelly</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20HTTP%20issues&In-Reply-To=704D36BD-4E9B-4CA1-A00E-72EF7D385F7A%40xamarin.com"
       TITLE="[mono-android] HTTP issues">tim.kelly at DesignerWare.com
       </A><BR>
    <I>Fri Aug  5 12:41:14 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005702.html">[mono-android] HTTP issues
</A></li>
        <LI>Next message: <A HREF="005706.html">[mono-android] HTTP issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5704">[ date ]</a>
              <a href="thread.html#5704">[ thread ]</a>
              <a href="subject.html#5704">[ subject ]</a>
              <a href="author.html#5704">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I eventually will look for hotspots and call only when one is detected
and online.  Thanks for that bit of information and code.  

But during testing, I shouldn't have an issue.  I've decided to take
your thoughts to heart on the emulator and decided to nuke it.  I'm
building a clean emulator(what a painfully long task) and will make sure
that the VM has Internet.  This will give me a clean bench.  I will then
load the application and see what happens.  

I have noticed the emulator is a little flaky where I have to restart it
or even reboot my PC. 

So, let me get a clean bench and make sure Internet is working and I'll
let your know.  On a side note, it would be great if I could use
virtualbox for testing because I save and load different snapshots.

Tim



-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>] On Behalf Of Jonathan Pryor
Sent: Friday, August 05, 2011 12:03 PM
To: Discussions related to Mono for Android
Subject: Re: [mono-android] HTTP issues

On Aug 5, 2011, at 11:31 AM, Tim Kelly wrote:
&gt;<i> However, during on C# testing, this attached routine is called every
</I>minute and after a short period of time it causes the networking in the
emulator to stop requiring a reboot. 
&gt;<i>  
</I>&gt;<i> We've determined nothing from the logs other than it  seems the DNS
</I>request dies as a reported error first and then additional request just
timeout.  But basically it is all over the place and not consistent.

When that happens, before you reboot the emulator, try opening the
Browser app and seeing if you can navigate to a URL. Is it a system wide
loss of DNS/etc., or is it local to your app?

What I've noticed in testing with the emulator is that frequently when
the emulator boots it has no networking, and Browser won't be able to
load anything (which breaks my test app, which also tries a network
request w/o any graceful error catching). Restarting the emulator fixes
this problem (as I haven't explored enough to figure out why the
emulator is coming up w/o networking in the first place).

This may or may not be related to the issues you're seeing; I have no
idea. It does bring up a major point, though: you can't expect to have
&quot;always accessible&quot; networking on the device, so you should try checking
the network connection status before you fire off your network requests
(adapted from
<A HREF="http://www.androidpeople.com/android-how-check-network-statusboth-wifi-a">http://www.androidpeople.com/android-how-check-network-statusboth-wifi-a</A>
nd-mobile-3g):

	static bool IsNetworkAvailable (Context context)
	{
		// requires the android.permission.ACCESS_NETWORK_STATE
permission
		var manager = (Android.Net.ConnectivityManager)
context.GetSystemService(Context.ConnectivityService);
		var wifi = manager.GetNeworkInfo
(Android.Net.ConnectivityType.Wifi);
		var mobile = manager.GetNetworkInfo
(Android.Net.ConnectivityType.Mobile);
		bool online = wifi.IsAvailable || mobile.IsAvailable;
		return online;
	}

This may help your app, it may not; it's my current best guess. :-)

 - Jon

_______________________________________________
Monodroid mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>

UNSUBSCRIBE INFORMATION:
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005702.html">[mono-android] HTTP issues
</A></li>
	<LI>Next message: <A HREF="005706.html">[mono-android] HTTP issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5704">[ date ]</a>
              <a href="thread.html#5704">[ thread ]</a>
              <a href="subject.html#5704">[ subject ]</a>
              <a href="author.html#5704">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
