<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] This should be that hard
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20This%20should%20be%20that%20hard&In-Reply-To=493F7888-00CE-4C01-BAF6-8B2821BB62AB%40xamarin.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005615.html">
   <LINK REL="Next"  HREF="005617.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] This should be that hard</H1>
    <B>Tim Kelly</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20This%20should%20be%20that%20hard&In-Reply-To=493F7888-00CE-4C01-BAF6-8B2821BB62AB%40xamarin.com"
       TITLE="[mono-android] This should be that hard">tim.kelly at DesignerWare.com
       </A><BR>
    <I>Mon Aug  1 21:33:17 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005615.html">[mono-android] This should be that hard
</A></li>
        <LI>Next message: <A HREF="005617.html">[mono-android] This should be that hard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5616">[ date ]</a>
              <a href="thread.html#5616">[ thread ]</a>
              <a href="subject.html#5616">[ subject ]</a>
              <a href="author.html#5616">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok that's what I'm looking for sort of, now I'm stuck with trying to get
Toast to work inside your example and how to call it from my background
thread?   I don't seem to understand how to pass the UI into and out of
non UI threads.  In Java, all I had to do was add a handler to the
service class and pass that handler to the thread and then I could call
the handler from the background thread (which I call Main_class).  Also,
because the handler in Java was attached to the Service class, it had
access to the UI.

Dang, I'm just not getting this???

Or really (I'll use anything that works).  Here's what I'm trying to do:

1.  I start a service, and start my thread class in the 'OnStart'

	  public override void OnStart(Intent intent, int startId)
        {base.OnStart(intent, startId);
	  Main_Class mainProgram = new Main_Class();
            mainProgram.Start();
        }	

2.  The service which creates an instance of this main class which
creates the background thread.  Inside a new thread, I want to Toast a
message back to the UI.

  class Main_Class
    {
        private System.ComponentModel.BackgroundWorker AgentMainThread =
new System.ComponentModel.BackgroundWorker();

  
        public void Start(){
            AgentMainThread.WorkerSupportsCancellation = true;
            AgentMainThread.DoWork += new
System.ComponentModel.DoWorkEventHandler(background_DoWork);
            AgentMainThread.RunWorkerAsync();
     }
    
        private void background_DoWork(object sender,
System.ComponentModel.DoWorkEventArgs e)
        {
            
            System.ComponentModel.BackgroundWorker worker = sender as
System.ComponentModel.BackgroundWorker;
            
            Class_Debug log = new Class_Debug();
            
            log.writeLogInfo(null, &quot;Stared backround thread&quot;);
            
           &quot;Tell user you're getting data&quot;--&gt;&gt; CALL TOAST WITH A MESSAGE
SOME HOW????????
		
             ... do other work blah blah

           &quot;Tell user got it!!!&quot;--&gt;&gt; CALL TOAST WITH A MESSAGE SOME
HOW????????
 
     
        ~Main_Class()
        {
            AgentMainThread.CancelAsync();
        }
    }


 

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>] On Behalf Of Jonathan Pryor
Sent: Monday, August 01, 2011 9:06 PM
To: Discussions related to Mono for Android
Subject: Re: [mono-android] This should be that hard

On Aug 1, 2011, at 5:56 PM, Tim Kelly wrote:
&gt;<i> Ok how the heck do you make a handler back in .Net C#?  This is my
</I>Java code as you can see, it is a service that calls my Main_Class which
forks a thread.

I'm afraid I don't understand your example, as I don't know what
Main_Class is, much less what Main_Class.Start(Handler) is.

As for creating a Handler, you'd just need to introduce an explicit
type:

	class MyHandler : Handler {
		public override void HandleMessage (Android.OS.Message
msg) {...}
	}

then pass an instance of MyHandler to Main_Class.Start().

 - Jon

_______________________________________________
Monodroid mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>

UNSUBSCRIBE INFORMATION:
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005615.html">[mono-android] This should be that hard
</A></li>
	<LI>Next message: <A HREF="005617.html">[mono-android] This should be that hard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5616">[ date ]</a>
              <a href="thread.html#5616">[ thread ]</a>
              <a href="subject.html#5616">[ subject ]</a>
              <a href="author.html#5616">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
