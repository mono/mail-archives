<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] 2 spinners on Dialog click handling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%202%20spinners%20on%20Dialog%20click%20handling&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005714.html">
   <LINK REL="Next"  HREF="005662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] 2 spinners on Dialog click handling</H1>
    <B>John Murray</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%202%20spinners%20on%20Dialog%20click%20handling&In-Reply-To="
       TITLE="[mono-android] 2 spinners on Dialog click handling">john at murray.gb.com
       </A><BR>
    <I>Wed Aug  3 10:31:02 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005714.html">[mono-android] How to have monodroid project in same soultion with windows 7 phone?
</A></li>
        <LI>Next message: <A HREF="005662.html">[mono-android] Note: Java 7 Will Not Work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5661">[ date ]</a>
              <a href="thread.html#5661">[ thread ]</a>
              <a href="subject.html#5661">[ subject ]</a>
              <a href="author.html#5661">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have discovered how to get a couple of spinners on an alert dialog 

(put them in a xmal then inflate them ) - for anyone interested here's the
crude code 

AlertDialog.Builder alert = new AlertDialog.Builder(this);


                                LayoutInflater ll =
LayoutInflater.From(this);

View sp4view = ll.Inflate(Resource.Layout.airfpicker,null);

                                Spinner spa1 =
sp4view.FindViewById&lt;Spinner&gt;(Resource.Id.sp1);

                                Spinner spa2 =
sp4view.FindViewById&lt;Spinner&gt;(Resource.Id.sp2);

 

(sp1 and sp2 are of course the spinners in the layout file )

 

So far so good 

I was trying this for the commonlyasked reason - can I have a two stage
spinner like on the iPhone ?? Often this is used to streamline the selection
process i.e select a country then a list of cities - so one doesn't have an
inordinate list 

 

As I said so far so good in MonoAndroid until I can to handling the clicks 

 

I put a 'itemselected' delegate onthe first spinner which - depending on the
selection goes and fetches a new array to populate the second spinner 

-          Works well though alittle slow 

Here's the code 

spa1.ItemSelected+=delegate(object sender,ItemEventArgs ee)

                                                                {


 
string mystr =&quot;&quot;;

 
mystr =spa1.Adapter.GetItem(Convert.ToInt16(
ee.Id)).ToString().Substring(0,3);                

 
if (vineGar.xt==null)

 
{

 
vineGar.xt = XDocument.Load(Assets.Open(&quot;airfields3.xml&quot;));

 
}

 
Gbr=readairf(vineGar.xt,mystr);// Gbr is a previously defined array 

 
Gbr2=toAAAfromarray(this,Gbr);// this converts the array into an array
adapter could of course do it in one step

spa2.Adapter=null;   // because the selections on first spinner are
constantly changing the adapter for the second //spinner then I need to
nullify before setting to refresh - cannot find out how to use
NotifyDataSetChanged 

 
spa2.Adapter=Gbr2;

                                                                };

 

That's the first bit 

Now I want to do something with the selection from the second spinner so I
used the same approach i.e. spa2.ItemSelected+=delegate{};

e.g. 

 

spa2.ItemSelected+=delegate(object sender,ItemEventArgs ee)

                                                {

                                                                string mystr
=&quot;&quot;;

                                                                mystr
=spa2.Adapter.GetItem(Convert.ToInt16(  ee.Id)).ToString().Substring(0,4);

 
mystr=findlatlong(vineGar.xt,mystr);

 
Toast.MakeText(this,&quot; \n&quot;+mystr,ToastLength.Long).Show();    

                                                };

 

 

Trouble is this gets fired which the spinner is initialise with new data
(i.e. before the user has selected anything) so it's not a lot of use 

I tried doing the same with 

Sap2.ItemClick+=delegate(object sender,ItemEventArgs ee){dosomething();};

But if you put the above line in it falls over with a null reference on the
delegation 

 

I suppose I could put in an OK button on the alert dialog and just accept
whatever was selected on the second spinner when OK is pressed but it
doesn't seem too neat to me. Surely there's a way of implementing  an
'onclick' or something 

 

 

Not many of the examples for Android help much   So Help please - I'm not
terribly au fait with delegates, listeners and eventhandlers - 

This could be of interest to others 

 

TIA 

 

John Murray

 

 

 

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20110803/202fd992/attachment-0001.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20110803/202fd992/attachment-0001.html</A> 
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005714.html">[mono-android] How to have monodroid project in same soultion with windows 7 phone?
</A></li>
	<LI>Next message: <A HREF="005662.html">[mono-android] Note: Java 7 Will Not Work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5661">[ date ]</a>
              <a href="thread.html#5661">[ thread ]</a>
              <a href="subject.html#5661">[ subject ]</a>
              <a href="author.html#5661">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
