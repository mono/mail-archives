<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] App crashes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20App%20crashes&In-Reply-To=1314035798278-4724149.post%40n5.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005949.html">
   <LINK REL="Next"  HREF="005960.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] App crashes</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20App%20crashes&In-Reply-To=1314035798278-4724149.post%40n5.nabble.com"
       TITLE="[mono-android] App crashes">jonp at xamarin.com
       </A><BR>
    <I>Tue Aug 23 12:38:51 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005949.html">[mono-android] App crashes
</A></li>
        <LI>Next message: <A HREF="005960.html">[mono-android] App crashes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5959">[ date ]</a>
              <a href="thread.html#5959">[ thread ]</a>
              <a href="subject.html#5959">[ subject ]</a>
              <a href="author.html#5959">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Aug 22, 2011, at 1:56 PM, was wrote:
&gt;<i> I wonder if this relates to the problems I'm having using Resco's
</I>&gt;<i> AdvancedList and DetailView (DV)components when scrolling records/items. My
</I>&gt;<i> recent Resco forum message on this subject:
</I>&gt;<i> 
</I>&gt;<i> /'Further info: With 6 ComboBoxes containing nearly 1500 records in total in
</I>&gt;<i> the DV, the app crashes after a few scrolls up and down. If the number of
</I>&gt;<i> lookup records is much less, say 100 or so in total, the crashes do not
</I>&gt;<i> occur. No crashes occur if there are no lookup records in any of the
</I>&gt;<i> ComboBoxes' lists and the DV may be scrolled  indefinitely without problems.
</I>
The most important question: are your crashes on the emulator or on hardware?

Due to architectural decisions, each instances of a Java.Lang.Object subclass results in allocating a Global Reference (GREF) from Dalvik, and Dalvik only supports 2000 GREFs in the emulator (~52000 on device). If each of your 1500 records is backed by a Java.Lang.Object subclass, and they're all &quot;live&quot; concurrently, you'll hit that 2000 limit fairly quickly, which will crash. See:

	<A HREF="http://android.xamarin.com/Documentation/Troubleshoot#Unexpected_NullReferenceExceptions">http://android.xamarin.com/Documentation/Troubleshoot#Unexpected_NullReferenceExceptions</A>

If this is what you're hitting, there's unfortunately not much you can do (other than kill the emulator and test on actual hardware) that doesn't involve architectural changes to your code to either Dispose or reuse objet instances, to minimize the number of objects alive concurrently. (There is also a related GC issue here, but if you have a giant ComboBox with 1500 Buttons in it or something, the GC isn't going to help there, as they're all live.)

If you're seeing this on hardware, then you're probably hitting a GC bug, which should (hopefully) be fixed [0] in 1.0.3 (due soon).

 - Jon

[0] TouchTest works. Lots of other GC-related bugs now work. It's a _huge_ fix.

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005949.html">[mono-android] App crashes
</A></li>
	<LI>Next message: <A HREF="005960.html">[mono-android] App crashes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5959">[ date ]</a>
              <a href="thread.html#5959">[ thread ]</a>
              <a href="subject.html#5959">[ subject ]</a>
              <a href="author.html#5959">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
