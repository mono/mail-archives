<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] floating point performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20floating%20point%20performance&In-Reply-To=AANLkTim3aTE-_4_omD18%3DiPyrpXfdAS%3DN81rEK33%2BdPb%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001042.html">
   <LINK REL="Next"  HREF="001036.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] floating point performance</H1>
    <B>Christian Beaumont</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20floating%20point%20performance&In-Reply-To=AANLkTim3aTE-_4_omD18%3DiPyrpXfdAS%3DN81rEK33%2BdPb%40mail.gmail.com"
       TITLE="[Monodroid] floating point performance">chris at foundation42.org
       </A><BR>
    <I>Mon Sep 27 09:47:50 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001042.html">[Monodroid] floating point performance
</A></li>
        <LI>Next message: <A HREF="001036.html">[Monodroid] Favorite Android books?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1043">[ date ]</a>
              <a href="thread.html#1043">[ thread ]</a>
              <a href="subject.html#1043">[ subject ]</a>
              <a href="author.html#1043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Jeremy,

Yes I need a fixed update clock as well but that's okay.  I'm doing some
blobby Verlet spring physics.  To keep it stable I need to run around 5
time-steps per update period.

Although there aren't a lot of calculations that I do per-particle or
constraint, it looks like the current fp performance isn't really up to it.
 On WP7 the framerate is fine, but I'm getting seconds per frame, not frames
per second with MonoDroid.  I'll just shelve that project and work on
something a little less taxing for a while.

It's my own physics code, nothing special.

cheers,
-chris


On Mon, Sep 27, 2010 at 3:40 PM, Jeremy Bell &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">bell.jeremy at gmail.com</A>&gt; wrote:

&gt;<i> One thing that caught me off guard when running physics on the phone was
</I>&gt;<i> the refresh rate. Most physics engines assume a fixed update time of around
</I>&gt;<i> 60 to 100 updates per second, and generally most phones today are fill-rate
</I>&gt;<i> limited to around 30 frames per second, so I had to double the physics
</I>&gt;<i> iterations settings to get the stability I needed at 30 updates per second.
</I>&gt;<i> Just something to watch out for. Out of curiosity, what engine are you
</I>&gt;<i> using?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, Sep 27, 2010 at 6:01 AM, Christian Beaumont &lt;
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">chris at foundation42.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hey Geoff,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ah great, that's good news.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'll try to get a repro together when I have some time; but it's gonna be
</I>&gt;&gt;<i> difficult/tedious to isolate the exact location.  I'll need to dump all the
</I>&gt;&gt;<i> math into some log files side by side and compare the results.  Doesn't
</I>&gt;&gt;<i> sound like fun :(
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -chris
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Mon, Sep 27, 2010 at 4:18 AM, Geoff Norton &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">gnorton at novell.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 2010-09-26, at 6:01 PM, Christian Beaumont wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt; Hi Jon,
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; Thanks, I figured that this was probably the case.  Do you have any
</I>&gt;&gt;&gt;<i> estimates for when that might be on the roadmap?  I'm not looking for a
</I>&gt;&gt;&gt;<i> date, but I'd be interested if it is to be expected in say 3 months, 6
</I>&gt;&gt;&gt;<i> months or longer.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Less than all of those windows.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt; By the way, I think there may be a bug (or lack of precision) in the
</I>&gt;&gt;&gt;<i> software math.  I'm running some physics code and the simulation becomes
</I>&gt;&gt;&gt;<i> unstable really quickly.  I dunno how interested you are in fixing that
</I>&gt;&gt;&gt;<i> stack if it's a marginal issue; and the stack is likely to become legacy
</I>&gt;&gt;&gt;<i> anyway.   I don't really care because the software emulation really isn't a
</I>&gt;&gt;&gt;<i> good choice for physics, as I'm sure you can imagine.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> We are definately interested in fixing it (if possible), please extract a
</I>&gt;&gt;&gt;<i> test case and file a bug.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -g
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt; cheers,
</I>&gt;&gt;&gt;<i> &gt; -Chris
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; On Sep 26, 2010, at 9:45 PM, Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jpryor at novell.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; On Sun, 2010-09-26 at 11:57 +0200, Christian Beaumont wrote:
</I>&gt;&gt;&gt;<i> &gt;&gt;&gt; What's the scoop with floating point efficiency in MonoDroid?
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Preview 3 and earlier releases only ship with armeabi support, which
</I>&gt;&gt;&gt;<i> (as
</I>&gt;&gt;&gt;<i> &gt;&gt; per the Android NDK r4b docs/CPU-ARCH-ABIS.TXT file):
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; This ABI does *not* support hardware-assisted floating point
</I>&gt;&gt;&gt;<i> computations.
</I>&gt;&gt;&gt;<i> &gt;&gt; Instead, all FP operations are performed through software helper
</I>&gt;&gt;&gt;<i> functions
</I>&gt;&gt;&gt;<i> &gt;&gt; that come from the compiler's libgcc.a static library.
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; So having horribly slow FP performance is expected. :-/
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; We are working on adding armeabi-v7a support, which adds VFP hardware
</I>&gt;&gt;&gt;<i> &gt;&gt; FPU instructions, and thus should offer much faster FP support.
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; - Jon
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;&gt;<i> &gt; Monodroid mailing list
</I>&gt;&gt;&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;&gt;&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Monodroid mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20100927/f9c96ee7/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20100927/f9c96ee7/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001042.html">[Monodroid] floating point performance
</A></li>
	<LI>Next message: <A HREF="001036.html">[Monodroid] Favorite Android books?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1043">[ date ]</a>
              <a href="thread.html#1043">[ thread ]</a>
              <a href="subject.html#1043">[ subject ]</a>
              <a href="author.html#1043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
