<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] System.Data.SQLite vs Mono.Data.Sqlite
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20System.Data.SQLite%20vs%20Mono.Data.Sqlite&In-Reply-To=AANLkTi%3Du5m3p7h2VZQ_ym2mXB%2BMYXGUyPVmUiEwyLtZ2%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000847.html">
   <LINK REL="Next"  HREF="000846.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] System.Data.SQLite vs Mono.Data.Sqlite</H1>
    <B>Amir (GMail)</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20System.Data.SQLite%20vs%20Mono.Data.Sqlite&In-Reply-To=AANLkTi%3Du5m3p7h2VZQ_ym2mXB%2BMYXGUyPVmUiEwyLtZ2%40mail.gmail.com"
       TITLE="[Monodroid] System.Data.SQLite vs Mono.Data.Sqlite">amirw2k at gmail.com
       </A><BR>
    <I>Sat Sep 18 12:46:36 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000847.html">[Monodroid] System.Data.SQLite vs Mono.Data.Sqlite
</A></li>
        <LI>Next message: <A HREF="000846.html">[Monodroid] &quot;In mgmain JNI_OnLoad&quot; whenever I make a HttpWebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#850">[ date ]</a>
              <a href="thread.html#850">[ thread ]</a>
              <a href="subject.html#850">[ subject ]</a>
              <a href="author.html#850">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You're right, and the whole idea was to prevent duplicating a factory. The
exceptions are the downside of this, but you can use them with a specific
directive on dedicated SQLite code files.

 

Regards,

Amir

 

From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mrshrinkray at gmail.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mrshrinkray at gmail.com</A>] On Behalf Of
Chris Small
Sent: Friday, September 17, 2010 10:28 PM
To: Amir (GMail)
Cc: Jonathan Pryor; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>
Subject: Re: [Monodroid] System.Data.SQLite vs Mono.Data.Sqlite

 

You could also use a factory as they all implement DbConnection, DbCommand
etc. from what I remember. For exceptions it would be a case of catching an
Exception instead. I had the same problem with Monotouch (with VS2010 and
some unit tests) but stuck to the compiler directive option

On Fri, Sep 17, 2010 at 5:15 PM, Amir (GMail) &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">amirw2k at gmail.com</A>&gt; wrote:

Thanks Jon,

I was just about to post my discovery of these useful 'using' directives
which basically solved my problem of syntax mismatch.
I'm already used to working with System.Data.SQLite which performs quite
well. I'll keep that idea in mind in case I get into other kinds of
incompatibilities... I'm not sure if the Mono library supports Compact
Framework, so it won't be any good for other projects I have...

This is the code if anyone's interested.

#if MONODROID
using Mono.Data.Sqlite;

using SQLiteConnection = Mono.Data.Sqlite.SqliteConnection;

using SQLiteCommand = Mono.Data.Sqlite.SqliteCommand;
using SQLiteDataReader = Mono.Data.Sqlite.SqliteDataReader;
using SQLiteDataAdapter = Mono.Data.Sqlite.SqliteDataAdapter;
using SQLiteException = Mono.Data.Sqlite.SqliteException;
#else
using System.Data.SQLite;
#endif

Regards,
Amir


-----Original Message-----
From: Jonathan Pryor [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jpryor at novell.com</A>]
Sent: Friday, September 17, 2010 5:19 PM
To: Amir (GMail)
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>
Subject: Re: [Monodroid] System.Data.SQLite vs Mono.Data.Sqlite

Alas, there's only one sensible answer: use the same library, don't try
to &quot;port&quot; between them.

You can use Mono.Data.Sqlite on Windows (you just need to install the
native SQLITE3.DLL with your app; it's entirely P/Invoke driven).

Alternatively, you could take the System.Data.SQLite sources and
(presumably) recompile them to target the MonoDroid profile, which would
give you the existing System.Data.SQLite API. When doing this, you'll
need to build the &quot;managedonly&quot; version, as mixed mode assemblies won't
work, and make sure you DllImport(&quot;sqlite3&quot;) (as MonoDroid will have a
config file to map &quot;sqlite3&quot; to the system libsqlite3.so file).

Alas, the latter approach will make your app larger (an extra assembly
to ship with your app), but Mono.Data.Sqlite.dll is only 166KB in size,
so that's potentially negligible.

As an alternate-alternate approach, you could just add 'using' aliases
to your code:

       #if MONODROID
       using SQLiteConnection = Mono.Data.Sqlite.SqliteConnection;
       // repeat for other types
       #endif

Alas, you'll need to do this in each file you use SQLite within.

 - Jon

On Fri, 2010-09-17 at 16:00 +0200, Amir (GMail) wrote:
&gt;<i> I have a code written for System.Data.SQLite. There seems to be an
</I>&gt;<i> annoying difference in syntax which doesn't allow the code to compile
</I>&gt;<i> for Mono.Data.Sqlite.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> SQLiteConnection vs SqliteConnection
</I>&gt;<i>
</I>&gt;<i> SQLiteCommand vs SqliteCommand
</I>&gt;<i>
</I>&gt;<i> SQLiteException vs SqliteException
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I realize it comes from the original Mono code, but is there something
</I>&gt;<i> to do about it? I can't even give these classes aliases by inheritance
</I>&gt;<i> because they are sealed.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It would be easier to maintain two copies of code than to start
</I>&gt;<i> messing with #if directives, but I'm hoping there's a better way to
</I>&gt;<i> solve this.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Amir
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>

_______________________________________________
Monodroid mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20100918/04f3bad8/attachment-0001.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20100918/04f3bad8/attachment-0001.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000847.html">[Monodroid] System.Data.SQLite vs Mono.Data.Sqlite
</A></li>
	<LI>Next message: <A HREF="000846.html">[Monodroid] &quot;In mgmain JNI_OnLoad&quot; whenever I make a HttpWebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#850">[ date ]</a>
              <a href="thread.html#850">[ thread ]</a>
              <a href="subject.html#850">[ subject ]</a>
              <a href="author.html#850">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
