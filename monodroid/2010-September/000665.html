<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] View.OnClickListener
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20View.OnClickListener&In-Reply-To=1283979885.3881.7.camel%40lina.magi">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000663.html">
   <LINK REL="Next"  HREF="000667.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] View.OnClickListener</H1>
    <B>Mike Kestner</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20View.OnClickListener&In-Reply-To=1283979885.3881.7.camel%40lina.magi"
       TITLE="[Monodroid] View.OnClickListener">mkestner at novell.com
       </A><BR>
    <I>Wed Sep  8 18:14:47 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000663.html">[Monodroid] View.OnClickListener
</A></li>
        <LI>Next message: <A HREF="000667.html">[Monodroid] http://www.apple.com/pr/library/2010/09/09statement.html
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#665">[ date ]</a>
              <a href="thread.html#665">[ thread ]</a>
              <a href="subject.html#665">[ subject ]</a>
              <a href="author.html#665">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2010-09-08 at 17:04 -0400, Jonathan Pryor wrote:
&gt;<i> On Wed, 2010-09-08 at 21:28 +0100, Matthew Baxter-Reynolds wrote:
</I>&gt;<i> &gt; I've just been returning 0 out of that, so if anyone has any input on
</I>&gt;<i> &gt; what value *should* be returned there...!  :-)
</I>&gt;<i> 
</I>&gt;<i> You should never, ever, ever, ever, implement IJavaObject yourself.
</I>&gt;<i> 
</I>&gt;<i> Always, always, always, always subclass Java.Lang.Object (or some other
</I>&gt;<i> Android.* type which inherits from Java.Lang.Object) if you're going to
</I>&gt;<i> implement an Android interface.
</I>&gt;<i> 
</I>&gt;<i> Why?  
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://monodroid.net/Documentation/Architecture/Android_Callable_Wrappers">http://monodroid.net/Documentation/Architecture/Android_Callable_Wrappers</A>
</I>&gt;<i> 
</I>&gt;<i> Specifically, in order for Android code to invoke managed code, Android
</I>&gt;<i> needs to have a Java object instance upon which to invoke methods.
</I>&gt;<i> IJavaObject.Handle is the Java object instance that Android code will
</I>&gt;<i> invoke.  It is not possible for managed code to create a valid value.
</I>&gt;<i> 
</I>&gt;<i> If you implement IJavaObject.Handle yourself (by e.g. returning
</I>&gt;<i> IntPtr.Zero), when your instance is passed into Android code, Android
</I>&gt;<i> will receive 'null', which will either (1) generate a
</I>&gt;<i> NullPointerException, or (2) cause Android to ignore the instance, and
</I>&gt;<i> thus never invoke your your methods.  Both are bad, in different
</I>&gt;<i> ways. :-)
</I>
This isn't exactly true.  If the type doesn't derive from J.L.Object, it
is wrapped internally in an adapter that does, so the handle that's
passed to android is this internal class.  However, this does add
overhead to the scenario: construction of the adapter, forwarding back
of the method invocations, memory usage, etc...

All of the above can be avoided by implementing on a J.L.Object
subclass.
  
-- 
Mike Kestner &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">mkestner at novell.com</A>&gt;

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000663.html">[Monodroid] View.OnClickListener
</A></li>
	<LI>Next message: <A HREF="000667.html">[Monodroid] http://www.apple.com/pr/library/2010/09/09statement.html
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#665">[ date ]</a>
              <a href="thread.html#665">[ thread ]</a>
              <a href="subject.html#665">[ subject ]</a>
              <a href="author.html#665">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
