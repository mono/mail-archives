<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] MonoDroid simple webserver
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20MonoDroid%20simple%20webserver&In-Reply-To=009b01cbc270%245a1a4d70%240e4ee850%24%40torqsoftware.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002824.html">
   <LINK REL="Next"  HREF="002883.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] MonoDroid simple webserver</H1>
    <B>Leonardo Suryana</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20MonoDroid%20simple%20webserver&In-Reply-To=009b01cbc270%245a1a4d70%240e4ee850%24%40torqsoftware.com"
       TITLE="[Monodroid] MonoDroid simple webserver">leonardo at torqsoftware.com
       </A><BR>
    <I>Fri Feb  4 01:14:05 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002824.html">[Monodroid] MonoDroid simple webserver
</A></li>
        <LI>Next message: <A HREF="002883.html">[Monodroid] MonoDroid simple webserver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2882">[ date ]</a>
              <a href="thread.html#2882">[ thread ]</a>
              <a href="subject.html#2882">[ subject ]</a>
              <a href="author.html#2882">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>any ideas?

 

log :

I/ActivityManager(  112): Process torqsoftware.testwebserver (pid 3044) has
died.

I/WindowManager(  112): WIN DEATH: Window{44d15120
torqsoftware.testwebserver/monodroidwebservertest.Activity1 paused=false}

D/Zygote  (   58): Process 3044 terminated by signal (4)

V/RenderScript_jni(  199): surfaceCreated

V/RenderScript_jni(  199): surfaceChanged

I/UsageStats(  112): Unexpected resume of com.android.launcher while already
resumed in torqsoftware.testwebserver

W/InputManagerService(  112): Got RemoteException sending setActive(false)
notification to pid 3044 uid 10062

 

From: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid-bounces at lists.ximian.com</A>] On Behalf Of Leonardo Suryana
Sent: Wednesday, 2 February 2011 8:30 AM
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">monodroid at lists.ximian.com</A>
Subject: [Monodroid] MonoDroid simple webserver

 

Hi,

 

I've created a simple web server that runs on the Android device that
basically response with Hello World that used to work prior to Preview 11.
Was there any major change that causes this to no longer work or am I doing
something wrong? The application crashes on
context.Response.OutputStream.Write( buffer, 0, buffer.Length );

 

Code:

 

    public class Activity1 : Activity

    {

        private HttpListener listener;

 

        protected override void OnCreate( Bundle bundle )

        {

            base.OnCreate( bundle );

 

            // Set our view from the &quot;main&quot; layout resource

            SetContentView( Resource.Layout.Main );

 

            // Get our button from the layout resource,

            // and attach an event to it

            var button = FindViewById&lt;Button&gt;( Resource.Id.MyButton );

 

            button.Click += button_Click;

        }

 

        private void button_Click( object sender, EventArgs e )

        {

            try

            {

                if ( !HttpListener.IsSupported )

                    return;

 

                listener = new HttpListener();

                listener.Prefixes.Add( &quot;<A HREF="http://+:8001/&quot;">http://+:8001/&quot;</A> );

                listener.Start();

                listener.BeginGetContext( HandleRequest, listener );

            }

            catch ( Exception )

            {

                throw;

            }

        }

 

        private void HandleRequest( IAsyncResult result )

        {

            HttpListenerContext context = listener.EndGetContext( result );

 

            string response = &quot;&lt;html&gt;Hello World&lt;/html&gt;&quot;;

            byte [] buffer = Encoding.UTF8.GetBytes( response );

 

            context.Response.ContentLength64 = buffer.Length;

            context.Response.OutputStream.Write( buffer, 0, buffer.Length );

            context.Response.OutputStream.Close();

 

            listener.BeginGetContext( HandleRequest, listener );

        }

    }

 

Thanks

Leo

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20110204/1acf8760/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20110204/1acf8760/attachment.html</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002824.html">[Monodroid] MonoDroid simple webserver
</A></li>
	<LI>Next message: <A HREF="002883.html">[Monodroid] MonoDroid simple webserver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2882">[ date ]</a>
              <a href="thread.html#2882">[ thread ]</a>
              <a href="subject.html#2882">[ subject ]</a>
              <a href="author.html#2882">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
