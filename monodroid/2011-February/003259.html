<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] Opening a database
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Opening%20a%20database&In-Reply-To=826A4CB19093E642A6FEA63CAB7799A7AFD2%40EXMB1.jmu.ac.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003258.html">
   <LINK REL="Next"  HREF="003236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] Opening a database</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Opening%20a%20database&In-Reply-To=826A4CB19093E642A6FEA63CAB7799A7AFD2%40EXMB1.jmu.ac.uk"
       TITLE="[Monodroid] Opening a database">jpryor at novell.com
       </A><BR>
    <I>Wed Feb 23 15:17:33 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003258.html">[Monodroid] Opening a database
</A></li>
        <LI>Next message: <A HREF="003236.html">[Monodroid]  Production runtime/footprint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3259">[ date ]</a>
              <a href="thread.html#3259">[ thread ]</a>
              <a href="subject.html#3259">[ subject ]</a>
              <a href="author.html#3259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Feb 23, 2011, at 8:48 AM, Thompson, Robert wrote:
&gt;<i> I am just emailing to ask how do I go about opening a database in Mono? I have added Android.Database to my namespace and my program contains the assembly Mono.Android. I have written this so far&#8230;
</I>
As mentioned elsewhere, there are a variety of ways to use databases in Mono, from Mono.Data.Sqlite, to System.Data.SqlClient, to...

Android.Database is the Android platform mechanism.
 
&gt;<i> System.IntPtr pointer = new IntPtr();
</I>&gt;<i> SQLiteDatabase db = new SQLiteDatabase(pointer);
</I>
This won't work. The intent of the (IntPtr) constructors is for when you have a reference to an already existing Java object as an IntPtr (usually via JNI/Android.Runtime.JNIEnv use), and you want to create a wrapper for the pre-existing instance so that you can invoke methods upon it.

What you're doing with the above is the equivalent of:

	SQLiteDatabase db = null;

That is, the underlying Java object will be `null`, and thus invoking any methods on it will generate a Java.Lang.NullPointerException.

You don't want to do this. :-)

Thus, step one is creating a SQLiteDatabase instance (should you wish to use Android.Database). The answer is to find a static method or some other mechanism that will provide a SQLiteDatabase instance. Two such ways are via the static SQLIteDatabase.Create() [0], SQLiteDatabase.OpenDatabase() [1], SQLiteDatabase.OpenOrCreateDatabase() [2], and inheriting from SQLiteOpenHelper [3]. You'll need to read the Android documentation and examples for more information.

Once you have a SQLiteDatabase instance, I believe that the database is open (based on the methods the type provides), so you can then query the database via SQLiteDatabase.Query() and otherwise manage your data.

 - Jon

[0] <A HREF="http://docs.monodroid.net/index.aspx?link=M:Android.Database.Sqlite.SQLiteDatabase.Create">http://docs.monodroid.net/index.aspx?link=M:Android.Database.Sqlite.SQLiteDatabase.Create</A>

[1] <A HREF="http://docs.monodroid.net/index.aspx?link=M:Android.Database.Sqlite.SQLiteDatabase.OpenDatabase">http://docs.monodroid.net/index.aspx?link=M:Android.Database.Sqlite.SQLiteDatabase.OpenDatabase</A>

[2] <A HREF="http://docs.monodroid.net/index.aspx?link=M:Android.Database.Sqlite.SQLiteDatabase.OpenOrCreateDatabase">http://docs.monodroid.net/index.aspx?link=M:Android.Database.Sqlite.SQLiteDatabase.OpenOrCreateDatabase</A>

[3] <A HREF="http://docs.monodroid.net/index.aspx?link=T:Android.Database.Sqlite.SQLiteOpenHelper">http://docs.monodroid.net/index.aspx?link=T:Android.Database.Sqlite.SQLiteOpenHelper</A>


</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003258.html">[Monodroid] Opening a database
</A></li>
	<LI>Next message: <A HREF="003236.html">[Monodroid]  Production runtime/footprint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3259">[ date ]</a>
              <a href="thread.html#3259">[ thread ]</a>
              <a href="subject.html#3259">[ subject ]</a>
              <a href="author.html#3259">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
