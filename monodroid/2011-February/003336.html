<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] Permissions to create directories
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Permissions%20to%20create%20directories&In-Reply-To=C98D8952.15F65%25cerickson%40cartopac.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003330.html">
   <LINK REL="Next"  HREF="003344.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] Permissions to create directories</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Permissions%20to%20create%20directories&In-Reply-To=C98D8952.15F65%25cerickson%40cartopac.com"
       TITLE="[Monodroid] Permissions to create directories">jpryor at novell.com
       </A><BR>
    <I>Fri Feb 25 22:41:03 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003330.html">[Monodroid] Permissions to create directories
</A></li>
        <LI>Next message: <A HREF="003344.html">[Monodroid] Permissions to create directories
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3336">[ date ]</a>
              <a href="thread.html#3336">[ thread ]</a>
              <a href="subject.html#3336">[ subject ]</a>
              <a href="author.html#3336">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Feb 25, 2011, at 6:29 PM, Chris Erickson wrote:
&gt;<i> I'm trying to create a directory on external storage, and am getting an unauthorized access exception.
</I>
You can't write to just any directory, the filesystem permissions won't allow it. In particular, they certainly won't allow writing to /data, and I've never heard of a /Android directory (much less a /Android/data directory).

What you want is Context.GetExternalFilesDir(string)[0] and/or Environment.GetExternalStorageDirectory() [1].

Note the fine print in [1]:

	This directory may not currently be accessible if it has been mounted by the user on their computer, has been removed from the device, or some other problem has happened. You can determine its current state with Environment.ExternalStorageState [2].

Once you obtain a full path name from the Java.IO.File instance (e.g. via Java.IO.File.AbsolutePath [3]), you can use System.IO.Directory.CreateDirectory(), but you first need to find the correct root directory, which is what [0, 1] do.

 - Jon

[0] <A HREF="http://docs.monodroid.net/index.aspx?link=M:Android.Content.Context.GetExternalFilesDir(System.String">http://docs.monodroid.net/index.aspx?link=M:Android.Content.Context.GetExternalFilesDir(System.String</A>)

[1] <A HREF="http://docs.monodroid.net/index.aspx?link=P:Android.OS.Environment.ExternalStorageDirectory">http://docs.monodroid.net/index.aspx?link=P:Android.OS.Environment.ExternalStorageDirectory</A>

[2] <A HREF="http://docs.monodroid.net/index.aspx?link=P:Android.OS.Environment.ExternalStorageState">http://docs.monodroid.net/index.aspx?link=P:Android.OS.Environment.ExternalStorageState</A>

[3] <A HREF="http://docs.monodroid.net/index.aspx?link=P:Java.IO.File.AbsolutePath">http://docs.monodroid.net/index.aspx?link=P:Java.IO.File.AbsolutePath</A>

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003330.html">[Monodroid] Permissions to create directories
</A></li>
	<LI>Next message: <A HREF="003344.html">[Monodroid] Permissions to create directories
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3336">[ date ]</a>
              <a href="thread.html#3336">[ thread ]</a>
              <a href="subject.html#3336">[ subject ]</a>
              <a href="author.html#3336">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
