<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] Error - Android.Net.ConnectivityManager	ActiveNetworkInfo.IsConnectedOrConnecting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Error%20-%20Android.Net.ConnectivityManager%0A%09ActiveNetworkInfo.IsConnectedOrConnecting&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003371.html">
   <LINK REL="Next"  HREF="003364.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] Error - Android.Net.ConnectivityManager	ActiveNetworkInfo.IsConnectedOrConnecting</H1>
    <B>Orlando Silva</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Error%20-%20Android.Net.ConnectivityManager%0A%09ActiveNetworkInfo.IsConnectedOrConnecting&In-Reply-To="
       TITLE="[Monodroid] Error - Android.Net.ConnectivityManager	ActiveNetworkInfo.IsConnectedOrConnecting">orlandolsilva at gmail.com
       </A><BR>
    <I>Mon Feb 28 09:51:57 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003371.html">[Monodroid] upgraded to version 9639 and gave the following error =&gt; The &quot;LowercaseFilenames&quot; parameter is not supported by the &quot;AndroidComputeResPaths&quot; task.
</A></li>
        <LI>Next message: <A HREF="003364.html">[Monodroid] Error - Android.Net.ConnectivityManager	ActiveNetworkInfo.IsConnectedOrConnecting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3362">[ date ]</a>
              <a href="thread.html#3362">[ thread ]</a>
              <a href="subject.html#3362">[ subject ]</a>
              <a href="author.html#3362">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Sometimes when i try to read the
property ActiveNetworkInfo.IsConnectedOrConnecting (bool) of the object
Android.Net.ConnectivityManager, my app starts crashing..
Im trying to check if my app has internet access, this error only occurs
sometimes, its very strange.

Error Description:
E/mono    (13370): [0x471818:] EXCEPTION handling:
System.NullReferenceException: Object reference not set to an instance of an
object
Warning error while reading the NetworkStatus. Internet is
ReachableViaWiFiNetwork.
Description: System.NullReferenceException: Object reference not set to an
instance of an object
at Android.Runtime.JNIEnv.CallBooleanMethod (IntPtr jobject, IntPtr jmethod)
[0x00000] in &lt;filename unknown&gt;:0
at Android.Net.NetworkInfo.get_IsConnectedOrConnecting () [0x00000] in
&lt;filename unknown&gt;:0
at Com.Cardmobili.Util.AndroidReachability.RemoteHostStatus () [0x00000] in
&lt;filename unknown&gt;:0


My Code:

public enum NetworkStatus
{
NotReachable,
ReachableViaCarrierDataNetwork,
ReachableViaWiFiNetwork
}

private Android.Net.ConnectivityManager Connectivity;

public void InitializeReachability()
        {
            Connectivity =
this.GetSystemService(Context.ConnectivityService) as
Android.Net.ConnectivityManager;
        }

protected NetworkStatus RemoteHostStatus()
{
                if (Connectivity != null)
                {
                    // Has internet connection?
                    if (Connectivity.ActiveNetworkInfo != null &amp;&amp;
Connectivity.ActiveNetworkInfo.IsConnectedOrConnecting)
                    {
                        switch (Connectivity.ActiveNetworkInfo.Type)
                        {
                            case (int)ConnectivityType.Wifi:
                                return
NetworkStatus.ReachableViaWiFiNetwork;
                            case (int)ConnectivityType.Mobile:
                                return
NetworkStatus.ReachableViaCarrierDataNetwork;
                            default:
                                Debug.WriteLine(&quot;** Internet is Reachable by
an unknown source! **&quot;);
                                return
NetworkStatus.ReachableViaWiFiNetwork;
                        }
                    }
                }
}


What am i doing wrong?


Thanx,
 Orlando Silva
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20110228/f96beb05/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20110228/f96beb05/attachment.html</A> 
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003371.html">[Monodroid] upgraded to version 9639 and gave the following error =&gt; The &quot;LowercaseFilenames&quot; parameter is not supported by the &quot;AndroidComputeResPaths&quot; task.
</A></li>
	<LI>Next message: <A HREF="003364.html">[Monodroid] Error - Android.Net.ConnectivityManager	ActiveNetworkInfo.IsConnectedOrConnecting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3362">[ date ]</a>
              <a href="thread.html#3362">[ thread ]</a>
              <a href="subject.html#3362">[ subject ]</a>
              <a href="author.html#3362">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
