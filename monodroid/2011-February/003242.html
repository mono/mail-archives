<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] Production runtime/footprint
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Production%20runtime/footprint&In-Reply-To=16088525986B0A41AAF04939F879CBA003654B97%40mail-server.laneautomotive.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003236.html">
   <LINK REL="Next"  HREF="003237.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] Production runtime/footprint</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Production%20runtime/footprint&In-Reply-To=16088525986B0A41AAF04939F879CBA003654B97%40mail-server.laneautomotive.local"
       TITLE="[Monodroid] Production runtime/footprint">jpryor at novell.com
       </A><BR>
    <I>Wed Feb 23 10:10:13 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003236.html">[Monodroid]  Production runtime/footprint
</A></li>
        <LI>Next message: <A HREF="003237.html">[Monodroid] Nook Color
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3242">[ date ]</a>
              <a href="thread.html#3242">[ thread ]</a>
              <a href="subject.html#3242">[ subject ]</a>
              <a href="author.html#3242">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Feb 23, 2011, at 9:21 AM, Dan Kibby wrote:
&gt;<i> Looking at the runtime installed via the debugging process, I see the
</I>&gt;<i> size is significant.
</I>&gt;<i> 
</I>&gt;<i> For production, are there foreseen noteworthy changes in the size?  
</I>&gt;<i> Will the production runtime be able to be moved to SD storage?
</I>
As per [0], we will _not_ be supporting a separate runtime package for deployment on the Android Market; packages will need to include all runtime assemblies that they depend upon. This is the same model that MonoTouch uses, and will provide us more flexibility in providing runtime and API binding fixes going forward without breaking existing apps already deployed on the Android Market.

Bundling the runtime also allows us to sensibly support SD storage deployment [1].

Furthermore, we have an IL linker [3] which will removed unused types and assemblies from the resulting .apk. You can't use the size of MonoRuntimeService-debug.apk for comparison, as that contains unlinked assemblies.

Consequently, the actual size for your app will depend upon the specifics of the app -- which assemblies it uses, which types and members it uses, etc. The more it uses, the bigger it will be.

For example, the monodroid-samples/HelloWorld app [4], without the shared runtime and with linking enabled (Release build), generates a 4.2 MB package. This is in line with MonoTouch application sizes, and we feel that this is currently an acceptable size.

Note, however, that the above is only for Release/Android Market deployment. For _development_, we will continue to rely upon a separate shared runtime package, and for Preview 13 we will be adding a separate per-API level package as well to contain Mono.Android.dll and OpenTK.dll instead of linking these with the app. The result is that a Debug build of HelloWorld is ~136KB instead of ~2.9 MB, which should help with deployment times and development turnaround times.

 - Jon

[0] <A HREF="http://lists.ximian.com/mailman/private/monodroid/2011-February/002827.html">http://lists.ximian.com/mailman/private/monodroid/2011-February/002827.html</A>

[1] You still need to opt-in to SD use, as it's disabled by default (as per Google documentation [2]). You can currently set this by manually editing Properties\AndroidManifest.xml and adding the /manifest/@android:installLocation attribute, or within Visual Studio edit your Project Properties and using the Install location drop-down in the Android Manifest tab.

[2] <A HREF="http://developer.android.com/guide/topics/manifest/manifest-element.html#install">http://developer.android.com/guide/topics/manifest/manifest-element.html#install</A>

[3] <A HREF="http://monodroid.net/Releases/Previews/Preview_11#Linking">http://monodroid.net/Releases/Previews/Preview_11#Linking</A>

[4] <A HREF="https://github.com/mono/monodroid-samples/tree/master/GoogleMaps">https://github.com/mono/monodroid-samples/tree/master/GoogleMaps</A>

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003236.html">[Monodroid]  Production runtime/footprint
</A></li>
	<LI>Next message: <A HREF="003237.html">[Monodroid] Nook Color
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3242">[ date ]</a>
              <a href="thread.html#3242">[ thread ]</a>
              <a href="subject.html#3242">[ subject ]</a>
              <a href="author.html#3242">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
