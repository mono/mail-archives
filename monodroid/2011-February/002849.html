<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] PackageName isn't actually case sensitive
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20PackageName%20isn%27t%20actually%20case%20sensitive&In-Reply-To=AANLkTi%3D4FnsKprLvfEuGEcQN27LkNF30apd7fbg-9AXp%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002829.html">
   <LINK REL="Next"  HREF="002850.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] PackageName isn't actually case sensitive</H1>
    <B>Joseph Hill</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20PackageName%20isn%27t%20actually%20case%20sensitive&In-Reply-To=AANLkTi%3D4FnsKprLvfEuGEcQN27LkNF30apd7fbg-9AXp%40mail.gmail.com"
       TITLE="[Monodroid] PackageName isn't actually case sensitive">jhill at novell.com
       </A><BR>
    <I>Wed Feb  2 14:05:13 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002829.html">[Monodroid] PackageName isn't actually case sensitive
</A></li>
        <LI>Next message: <A HREF="002850.html">[Monodroid] PackageName isn't actually case sensitive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2849">[ date ]</a>
              <a href="thread.html#2849">[ thread ]</a>
              <a href="subject.html#2849">[ subject ]</a>
              <a href="author.html#2849">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What is the overall implication of not being able to support mixed case
package names?  I'm just trying to figure out if this is a serious flaw that
needs to be addressed, or if it's just something that should work one way
but doesn't, but doesn't really affect end users or the development 
experience.

Thanks
Joseph

 &gt;&gt;&gt;
&gt;<i> Still the current restriction in MonoDroid is over strict. Android requires
</I>&gt;<i> that the first letter be lowercase, not the entire string.
</I>&gt;<i> 
</I>&gt;<i> On Tue, Feb 1, 2011 at 21:28, Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jpryor at novell.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; On Feb 1, 2011, at 12:39 PM, Stefan Rusek wrote:
</I>&gt;<i> &gt; &gt; All I do to create a java based project is this:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; android create project --name MixedCaseName --target 4 --path
</I>&gt;<i> &gt; MixedCasePath --package com.mydomain.MixedCasePackage --activity MyActivity
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; this works flawlessly and I don't have any of the problems you mentioned.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It's also not exactly what was originally described; the problem is that
</I>&gt;<i> &gt; you're thinking like a Java programmer, not a .NET programmer. :-)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The problem, as I described earlier, is still with the package name --
</I>&gt;<i> &gt;  your first package name component is camelCase, not PascalCase.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thus, if you care to play along at nome:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;        $ android create project --name MixedCaseName --target 4 --path
</I>&gt;<i> &gt; MixedCasePath --package Mixed.Case.Package --activity MyActivity
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Note that the package here starts with an uppercase letter, not a lowercase
</I>&gt;<i> &gt; letter, and also contains a period, to appease the Android gods.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This builds and installs just fine:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;        $ ant install
</I>&gt;<i> &gt;        ...
</I>&gt;<i> &gt;             [exec]     pkg: /data/local/tmp/MixedCaseName-debug.apk
</I>&gt;<i> &gt;             [exec] Success
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; HOWEVER, if you kindly view the /manifest/application/activity element
</I>&gt;<i> &gt; within MixedCaseName/AndroidManifest.xml:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;        &lt;activity android:name=&quot;MyActivity&quot;
</I>&gt;<i> &gt;                  android:label=&quot;@string/app_name&quot;&gt;
</I>&gt;<i> &gt;            &lt;intent-filter&gt;
</I>&gt;<i> &gt;                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
</I>&gt;<i> &gt;                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
</I>&gt;<i> &gt;            &lt;/intent-filter&gt;
</I>&gt;<i> &gt;        &lt;/activity&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Now, I was slightly mistaken in my factor #2: if there are no periods, then
</I>&gt;<i> &gt; it's fine [0].  The above clearly has no periods.  Let's fix that:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;        &lt;activity android:name=&quot;Mixed.Case.Name.MyActivity&quot;
</I>&gt;<i> &gt;                  android:label=&quot;@string/app_name&quot;&gt;
</I>&gt;<i> &gt;            &lt;intent-filter&gt;
</I>&gt;<i> &gt;                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
</I>&gt;<i> &gt;                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
</I>&gt;<i> &gt;            &lt;/intent-filter&gt;
</I>&gt;<i> &gt;        &lt;/activity&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We changed //activity/@android:name to Mixed.Case.Name.MyActivity, which
</I>&gt;<i> &gt; (1) starts with an uppercase letter, and (2) contains periods.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If we try to build and install this one:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;        $ ant uninstall
</I>&gt;<i> &gt;        # make above changes
</I>&gt;<i> &gt;        $ ant install
</I>&gt;<i> &gt;             [exec]     pkg: /data/local/tmp/MixedCaseName-debug.apk
</I>&gt;<i> &gt;             [exec] Failure [INSTALL_PARSE_FAILED_MANIFEST_MALFORMED]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It doesn't install!  Which was, after all, my point.  The only way to make
</I>&gt;<i> &gt; the &quot;manifest&quot; (AndroidManifest.xml) well-formed is to either have the
</I>&gt;<i> &gt; package name start with a lowercase letter (which was the case for your
</I>&gt;<i> &gt; original example), start with a period, or to not have any periods within
</I>&gt;<i> &gt; the //activity/@android:name value [0].  Factor #1 requires the inclusion 
</I>&gt;<i> of
</I>&gt;<i> &gt; a period, and I didn't want to deal with the extra work logic that would be
</I>&gt;<i> &gt; required to avoid it.  Add in the fact that a leading '.' is probably 
</I>&gt;<i> broken
</I>&gt;<i> &gt; _anyway_ [1], and things go south fast.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thus, Factor #2 does, in fact, require that package names start with a
</I>&gt;<i> &gt; lowercase letter.  Historically, my next logical leap was to just camelCase
</I>&gt;<i> &gt; the package names instead of lowercasing them, but then factor #3 and #4
</I>&gt;<i> &gt; raise their heads.  For Mixed.Case.Package, camelCasing amounts to
</I>&gt;<i> &gt; lowercasing, but if you have MonoDroidTestProject as the package name, the
</I>&gt;<i> &gt; camelCase is monoDroidTestProject, but if the AndroidManifest.xml package
</I>&gt;<i> &gt; name is still MonoDroidTestProject, you have the case mismatch issue of
</I>&gt;<i> &gt; factors #3 and #4, and monoDroidTestProject != MonoDroidTestProject, so
</I>&gt;<i> &gt; things go further south.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It's not for no reason that we require lowercase package names.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It's because Android can be phenomenally annoying, and we have to work
</I>&gt;<i> &gt; around its annoyances.  (If not for Factor #2, we'd just leave everything 
</I>&gt;<i> as
</I>&gt;<i> &gt; the original casing, no camelCasing or lowercasing at all.  Things would
</I>&gt;<i> &gt; Just Work&#8482;, and I'd be overjoyed, and then we'd probably find out that XML
</I>&gt;<i> &gt; layout files fail to properly support this as there's no easy way to know
</I>&gt;<i> &gt; when the package name ends and the type names begin, and then I'd start
</I>&gt;<i> &gt; crying...)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  - Jon
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [0]
</I>&gt;<i> &gt; 
</I>&gt;<i> <A HREF="http://android.git.kernel.org/?p=platform/frameworks/base.git;a=blob;f=core/j">http://android.git.kernel.org/?p=platform/frameworks/base.git;a=blob;f=core/j</A> 
</I>&gt;<i> ava/android/content/pm/PackageParser.java;h=ff3656c22216e3421712647dc742ce468
</I>&gt;<i> 728f1fd;hb=HEAD#l1174
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [1] VS default project names don't contain periods, so you're looking at a
</I>&gt;<i> &gt; project name like MyTestProject.  However, Android requires that a period 
</I>&gt;<i> be
</I>&gt;<i> &gt; in there _somewhere_, so to facilitate this MonoDroid will set the package
</I>&gt;<i> &gt; name to $(AssemblyName).$(AssemblyName).  (If $(AssemblyName) contains a
</I>&gt;<i> &gt; '.', then it's used unchanged).  This results in a package name of
</I>&gt;<i> &gt; MyTestProject.MyTestProject, which is lowercased to
</I>&gt;<i> &gt; mytestproject.mytestproject, but even when we ignore the lowercase, the
</I>&gt;<i> &gt; package name won't actually match any packages within the app!
</I>&gt;<i> &gt;  Specifically, you'll have a type named mytestproject.Foo (assuming
</I>&gt;<i> &gt; MyTestProject is also the name of your default project namespace), and
</I>&gt;<i> &gt; mytestproject.Foo != mytestproject.mytestproject.Foo.  Result: a &quot;smarter&quot;
</I>&gt;<i> &gt; monodroid would likely make things worse!  Using a fully-qualified type 
</I>&gt;<i> name
</I>&gt;<i> &gt; nicely sidesteps the entire issue, and doesn't require that C# users
</I>&gt;<i> &gt; actually change their project naming conventions.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Monodroid mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A> 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; UNSUBSCRIBE INFORMATION:
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A> 
</I>&gt;<i> &gt;
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002829.html">[Monodroid] PackageName isn't actually case sensitive
</A></li>
	<LI>Next message: <A HREF="002850.html">[Monodroid] PackageName isn't actually case sensitive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2849">[ date ]</a>
              <a href="thread.html#2849">[ thread ]</a>
              <a href="subject.html#2849">[ subject ]</a>
              <a href="author.html#2849">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
