<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Google maps with MfA need for api key and getting lat and long
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Google%20maps%20with%20MfA%20need%20for%20api%20key%20and%0A%20getting%20lat%20and%20long&In-Reply-To=%3CCAJbSEHVCt9Q%3DL809i_qy3uttqk8Bjou4WVU%2B%2Bc7aY5n7JGFa3Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013182.html">
   <LINK REL="Next"  HREF="013185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Google maps with MfA need for api key and getting lat and long</H1>
    <B>Tom Opgenorth</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Google%20maps%20with%20MfA%20need%20for%20api%20key%20and%0A%20getting%20lat%20and%20long&In-Reply-To=%3CCAJbSEHVCt9Q%3DL809i_qy3uttqk8Bjou4WVU%2B%2Bc7aY5n7JGFa3Q%40mail.gmail.com%3E"
       TITLE="[mono-android] Google maps with MfA need for api key and getting lat and long">tom at opgenorth.net
       </A><BR>
    <I>Tue Jan  8 15:55:06 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="013182.html">[mono-android] Google maps with MfA need for api key and	getting lat and long
</A></li>
        <LI>Next message: <A HREF="013185.html">[mono-android] Google maps with MfA need for api key and	getting lat and long
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13184">[ date ]</a>
              <a href="thread.html#13184">[ thread ]</a>
              <a href="subject.html#13184">[ subject ]</a>
              <a href="author.html#13184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Also note that with Google Maps for Android v2, it's possible to share one
API key with multiple apps/SHA1 fingerprints via the Google API's Console.
This means you could use both your release keystore and your debug keystore
with the one API key.


On Tue, Jan 8, 2013 at 8:13 AM, Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">jonp at xamarin.com</A>&gt; wrote:

&gt;<i> On Jan 8, 2013, at 9:37 AM, John Murray &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">john at murray.gb.com</A>&gt; wrote:
</I>&gt;<i> &gt; Any idea how I can get an up to date debug.keystore file
</I>&gt;<i>
</I>&gt;<i> You are now entering a maze of twisty passages, all alike. Your sanity is
</I>&gt;<i> likely to disappear.
</I>&gt;<i>
</I>&gt;<i> First of all, where'd debug.keystore come from? Mono for Android
</I>&gt;<i> auto-generates it during the build process if it doesn't already exist
</I>&gt;<i> (because all apps need to be signed to get them onto the device). If you
</I>&gt;<i> need a new one, delete it and a new one will be auto generated:
</I>&gt;<i>
</I>&gt;<i>         OSX: $HOME/.local/share/Xamarin/Mono for Android/debug.keystore
</I>&gt;<i>         Windows: %LOCALAPPDATA%\Xamarin\Mono for Android\debug.keystore
</I>&gt;<i>
</I>&gt;<i> HOWEVER, that's only part of the problem, and this is where things get
</I>&gt;<i> crazy.
</I>&gt;<i>
</I>&gt;<i> Since debug.keystore is automatically created, it will DIFFER between
</I>&gt;<i> every machine that Mono for Android is installed on. This is fine outside
</I>&gt;<i> of Google Maps, but when you need to use Google Maps (and it's API key) and
</I>&gt;<i> you're on a team this will result in pain, suffering, and misery (because
</I>&gt;<i> only one person will be able to build the app!).
</I>&gt;<i>
</I>&gt;<i> So when it comes to Google Maps, you DO NOT want to use the default
</I>&gt;<i> debug.keystore file!
</I>&gt;<i>
</I>&gt;<i> Instead, create a new one:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://docs.xamarin.com/Android/Guides/Deployment%2C_Testing%2C_and_Metrics/publishing_an_application/Part_1_-_Preparing_an_Application_for_Release#Creating_a_Private_Keystore">http://docs.xamarin.com/Android/Guides/Deployment%2C_Testing%2C_and_Metrics/publishing_an_application/Part_1_-_Preparing_an_Application_for_Release#Creating_a_Private_Keystore</A>
</I>&gt;<i>
</I>&gt;<i> Add it to your source repo, and update your project so that the included
</I>&gt;<i> keystore is used instead of the default keystore:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://docs.xamarin.com/Android/Guides/Advanced_Topics/Build_Process#Signing">http://docs.xamarin.com/Android/Guides/Advanced_Topics/Build_Process#Signing</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://docs.xamarin.com/Android/Guides/Deployment%2C_Testing%2C_and_Metrics/publishing_an_application/Part_1_-_Preparing_an_Application_for_Release#Permanently_Use_A_Different_Keystore">http://docs.xamarin.com/Android/Guides/Deployment%2C_Testing%2C_and_Metrics/publishing_an_application/Part_1_-_Preparing_an_Application_for_Release#Permanently_Use_A_Different_Keystore</A>
</I>&gt;<i>
</I>&gt;<i> This allows things to be &quot;sane&quot; in a team environment, but the security
</I>&gt;<i> implications are terrible: you have a (private!) keystore in a &quot;public&quot;
</I>&gt;<i> (presumably internal) source control repo, and the password + alias + etc.
</I>&gt;<i> are stored in plain text in your .csproj.
</I>&gt;<i>
</I>&gt;<i> This is NOT SECURE. It WORKS, but it's not secure. (Related note: this
</I>&gt;<i> might not be &quot;that bad&quot;; if someone can access the in-repo keystore, they
</I>&gt;<i> can also access all the source included in that repo, which is presumably
</I>&gt;<i> something you don't want easily accessible either...)
</I>&gt;<i>
</I>&gt;<i> Bear that in mind. ;-)
</I>&gt;<i>
</I>&gt;<i> For Release apps, you'll want (need) to use a DIFFERENT keystore file,
</I>&gt;<i> protected with actual security precautions (e.g. not stored on a network
</I>&gt;<i> accessible computer), and then MANUALLY sign your Release app with this
</I>&gt;<i> Release keystore:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://docs.xamarin.com/Android/Guides/Deployment%2C_Testing%2C_and_Metrics/publishing_an_application/Part_1_-_Preparing_an_Application_for_Release#Signing_the_APK_in_Visual_Studio_(Mono_for_Android_4.2.6_or_higher">http://docs.xamarin.com/Android/Guides/Deployment%2C_Testing%2C_and_Metrics/publishing_an_application/Part_1_-_Preparing_an_Application_for_Release#Signing_the_APK_in_Visual_Studio_(Mono_for_Android_4.2.6_or_higher</A>)
</I>&gt;<i>
</I>&gt;<i> Of course, since your Release app is using a different keystore file,
</I>&gt;<i> it'll also have a different Google Maps API key (argh!). You'll probably
</I>&gt;<i> thus want to store the API key as a String resource, and have per-build
</I>&gt;<i> string resources (one for Debug builds, one for Release builds):
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://docs.xamarin.com/Android/Guides/Deployment%2C_Testing%2C_and_Metrics/publishing_an_application/Part_1_-_Preparing_an_Application_for_Release#Storing_Google_Maps_API_Keys">http://docs.xamarin.com/Android/Guides/Deployment%2C_Testing%2C_and_Metrics/publishing_an_application/Part_1_-_Preparing_an_Application_for_Release#Storing_Google_Maps_API_Keys</A>
</I>&gt;<i>
</I>&gt;<i> Related/different idea to the above: to your Project, add two files:
</I>&gt;<i> Resources\Values\ApiKey-Release.xml and Resources\Values\ApiKey-Debug.xml:
</I>&gt;<i>
</I>&gt;<i>         &lt;resources&gt;
</I>&gt;<i>                 &lt;string name=&quot;google_maps_api_key&quot;&gt;...&lt;/string&gt;
</I>&gt;<i>         &lt;/resources&gt;
</I>&gt;<i>
</I>&gt;<i> Update &quot;...&quot; with the appropriate value (Debug key in the -Debug file,
</I>&gt;<i> Release key in the -Release file). Add one to your .csproj via the IDE,
</I>&gt;<i> close the project, then manually edit the .csproj to replace the
</I>&gt;<i> ApiKey-*.xml entry with:
</I>&gt;<i>
</I>&gt;<i>         &lt;AndroidResource
</I>&gt;<i> Include=&quot;Resources\Values\ApiKey-$(Configuration).xml&quot; /&gt;
</I>&gt;<i>
</I>&gt;<i> This will make the API key a per-configuration value: build Debug, and
</I>&gt;<i> you'll use the ApiKey-Debug.xml file (and thus Debug key), build Release
</I>&gt;<i> and you'll use the ApiKey-Release.xml file (and thus Release key). This has
</I>&gt;<i> the added benefit that your layout XML can &quot;just&quot; use
</I>&gt;<i> @string/google_maps_api_key, removing the need to have per-profile Layout
</I>&gt;<i> files.
</I>&gt;<i>
</I>&gt;<i>  - Jon
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>


-- 
<A HREF="http://www.opgenorth.net">http://www.opgenorth.net</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20130108/adc7bfdd/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20130108/adc7bfdd/attachment.html</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013182.html">[mono-android] Google maps with MfA need for api key and	getting lat and long
</A></li>
	<LI>Next message: <A HREF="013185.html">[mono-android] Google maps with MfA need for api key and	getting lat and long
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13184">[ date ]</a>
              <a href="thread.html#13184">[ thread ]</a>
              <a href="subject.html#13184">[ subject ]</a>
              <a href="author.html#13184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
