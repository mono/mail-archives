<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Turning display on and off
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Turning%20display%20on%20and%20off&In-Reply-To=%3C1359109764579-5712797.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013232.html">
   <LINK REL="Next"  HREF="013233.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Turning display on and off</H1>
    <B>Stephan Steiner</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Turning%20display%20on%20and%20off&In-Reply-To=%3C1359109764579-5712797.post%40n5.nabble.com%3E"
       TITLE="[mono-android] Turning display on and off">stephan.steiner at gmail.com
       </A><BR>
    <I>Fri Jan 25 10:29:24 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="013232.html">[mono-android] Turning display on and off
</A></li>
        <LI>Next message: <A HREF="013233.html">[mono-android] Google Maps Navigation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13255">[ date ]</a>
              <a href="thread.html#13255">[ thread ]</a>
              <a href="subject.html#13255">[ subject ]</a>
              <a href="author.html#13255">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hmm

&gt;&gt;<i>wakeLock = pm.NewWakeLock( (WakeLockFlags)32, &quot;your_tag_here&quot; );
</I>
&gt;<i>Does work, but only on my Galaxy Nexus. On the Nexus 4, it doesn't do
</I>anything, on the S3, it puts the device to sleep.

Small update on this for those interested - it seems things do work, but it
is still highly device dependant (is this why you see so many app devs
prefering IOS?) - on the Galaxy Nexus, things work regardless of telephony
state. On the Nexus 4, it works, but only if there's actually a call. On the
S3, it works &quot;differently&quot;.. Samsung seems to have modified the OS so that
if you acquire that wakelock, not only does the screen go off, but your
activity stops - you get OnPause and OnStop events. As I unregister the
proximity sensor in onPause, that lead to the display never turning on
automatically again.

I've now changed my code to keep the sensor alive in certain cases - it's a
bit risky keeping a sensor and lock around so there's quite a bit of code in
OnResume to ensure we also clean up previously acquired locks and unregister
sensors when there's no longer a reason to hold them, but since this
scenario is really for when people make calls, I figure it should be okay.

There's one catch on the S3 - since the activity is stopped, if the sensor
changes from far to near and back again too quickly, the display is turned
off but not back on (can be turned back on by pressing the home button or
power button) - that problem doesn't exist on the Google devices as they
keep the activity running.

Regards
Stephan




--
View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/Turning-display-on-and-off-tp5712611p5712797.html">http://mono-for-android.1047100.n5.nabble.com/Turning-display-on-and-off-tp5712611p5712797.html</A>
Sent from the Mono for Android mailing list archive at Nabble.com.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013232.html">[mono-android] Turning display on and off
</A></li>
	<LI>Next message: <A HREF="013233.html">[mono-android] Google Maps Navigation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13255">[ date ]</a>
              <a href="thread.html#13255">[ thread ]</a>
              <a href="subject.html#13255">[ subject ]</a>
              <a href="author.html#13255">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
