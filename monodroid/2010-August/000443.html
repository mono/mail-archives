<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] Obfuscating the DLL inside the APK
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Obfuscating%20the%20DLL%20inside%20the%20APK&In-Reply-To=AANLkTi%3Dyw5P3ynLSTuRP7mHe5Wwm6-LdXb9YHDJxkbGU%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000438.html">
   <LINK REL="Next"  HREF="000440.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] Obfuscating the DLL inside the APK</H1>
    <B>Duane Wandless</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Obfuscating%20the%20DLL%20inside%20the%20APK&In-Reply-To=AANLkTi%3Dyw5P3ynLSTuRP7mHe5Wwm6-LdXb9YHDJxkbGU%40mail.gmail.com"
       TITLE="[Monodroid] Obfuscating the DLL inside the APK">duane at wandless.net
       </A><BR>
    <I>Wed Aug 25 10:02:11 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000438.html">[Monodroid] Obfuscating the DLL inside the APK
</A></li>
        <LI>Next message: <A HREF="000440.html">[Monodroid] Obfuscating the DLL inside the APK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#443">[ date ]</a>
              <a href="thread.html#443">[ thread ]</a>
              <a href="subject.html#443">[ subject ]</a>
              <a href="author.html#443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Someone used a house analogy

I remember back in the days of the .NET 1.0 Beta when I used to pop over to
&gt;<i> Redmond for their authors briefings, one of the Microsoft PMs talking to us
</I>&gt;<i> about how obfuscation was &quot;essentially pointless&quot; as - like a thief looking
</I>&gt;<i> to break into a house - if they really want the goodies, they'll find a way
</I>&gt;<i> around your protection.
</I>

&gt;<i> Matt.
</I>
I say that argument is flawed.  If a thief wants to break into my house they
will, therefore I should not lock my door nor put on the alarm when I leave.
 Yet I bet everyone here locks their door and at least 50% put on their
alarm.

So why not lock your code with obfuscation just to make it a little harder.
 it is a deterrent, just like locking the door and putting on the alarm.

For the record I use DeepSea to obfuscate my DLLs that run on Windows and
Mac.

Duane

On Wed, Aug 25, 2010 at 9:56 AM, Tim Reynolds &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">razialx at gmail.com</A>&gt; wrote:

&gt;<i> Miha,
</I>&gt;<i>
</I>&gt;<i> c) Reflection is the bane of obfuscation. In Dotfuscator we have 'smart
</I>&gt;<i> obfuscation,' a set of built-in rules that try to identify code patterns
</I>&gt;<i> that obfuscation will break. An example is the use of .ToString() on an
</I>&gt;<i> enum. If we detect that, we will automatically exclude that Enum from
</I>&gt;<i> renaming. The one area we can't detect the instantiation of classes or
</I>&gt;<i> invocation of methods using strings. Because the variable could be anything
</I>&gt;<i> at runtime, we are not able to automatically exclude the type that will be
</I>&gt;<i> reflected upon. If you know you will be doing that, especially late binding,
</I>&gt;<i> there are easy steps to take that will generally avoid any issues.
</I>&gt;<i>
</I>&gt;<i> Thanks for reading through my points before :)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Aug 25, 2010 at 9:30 AM, Miha Markic &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">miha at rthand.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Tim,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> c) yes, I know, most obfuscators do. But still, here is an example: your
</I>&gt;&gt;<i> app might fail at run time somewhere because you obfuscated some code that
</I>&gt;&gt;<i> is used by reflection (human error, but still).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> d) i was talking about (expert) end clients, like I tend to often use
</I>&gt;&gt;<i> Reflector, specially in case something goes very wrong
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> e) true, it raises the bar.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Miha
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> *From:* Tim Reynolds [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">razialx at gmail.com</A>]
</I>&gt;&gt;<i> *Sent:* Wednesday, August 25, 2010 3:22 PM
</I>&gt;&gt;<i> *To:* Miha Markic
</I>&gt;&gt;<i> *Cc:* Wayne Douglas; Kris Siegel; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> *Subject:* Re: [Monodroid] Obfuscating the DLL inside the APK
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This might sound all markety, but please bear with me.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I work for PreEmptive Solutions. We produce Dotfuscator and DashO
</I>&gt;&gt;<i> obfuscators. I have tested Dotfuscator with MonoDroid and it will fully
</I>&gt;&gt;<i> obfuscate your assemblies, though it isn't an entirely straightforward
</I>&gt;&gt;<i> process yet. I would like the opportunity to address the points made here:
</I>&gt;&gt;<i> a) Nothing I can do about that :)
</I>&gt;&gt;<i> b) Obfuscation necessarily requires an extra step when viewing stack
</I>&gt;&gt;<i> traces. Currently an issue with the APK generation prevents you from running
</I>&gt;&gt;<i> your MonoDroid application in Debug mode, however this does not in any way
</I>&gt;&gt;<i> apply to non-MonoDroid applications. They can be run with a debugger (if
</I>&gt;&gt;<i> obfuscated with Dotfuscator) without issue. Dotfuscator regenerates your PDB
</I>&gt;&gt;<i> file to handle the obfuscated assembly.
</I>&gt;&gt;<i> c) Dotfuscator gives you insanely precise control over what you want
</I>&gt;&gt;<i> obfuscated. It defaults to obfuscating everything, and provides mechanisms
</I>&gt;&gt;<i> for specifying what you do not want obfuscated. We even support Regular
</I>&gt;&gt;<i> Expression matching to determine what to exclude. We also break the three
</I>&gt;&gt;<i> major obfuscation mechanisms (renaming, control flow, string encryption)
</I>&gt;&gt;<i> into separate configuration sections. This means you can have completely
</I>&gt;&gt;<i> different 'rules' for each technique.
</I>&gt;&gt;<i> d) This is true, and is the major separation between open source and
</I>&gt;&gt;<i> closed source applications. We do provide a technology, Runtime
</I>&gt;&gt;<i> Intelligence, that allows you to gather runtime analytics about your
</I>&gt;&gt;<i> applications in the wild. We have not yet tested this with MonoDroid but I
</I>&gt;&gt;<i> feel it is a really amazing technology. Of course, I am biased. That is what
</I>&gt;&gt;<i> I directly work on ;)
</I>&gt;&gt;<i> e) The logic is still there, but with proper obfuscation you will only be
</I>&gt;&gt;<i> able to view it as assembly code in Reflector. And best of all, the assembly
</I>&gt;&gt;<i> code is going to be scrambled. The contextual information around it (fields,
</I>&gt;&gt;<i> properties, method names) will all be renamed. This will greatly increase
</I>&gt;&gt;<i> the difficulty in reverse engineering what you are doing.
</I>&gt;&gt;<i> f) There are absolutely no problems with code signing when using
</I>&gt;&gt;<i> Dotfuscator. We support strong name resigning, partial signing and
</I>&gt;&gt;<i> authenticode signing. We support signing of packages (XAP for example). The
</I>&gt;&gt;<i> only scenario I know of that we do not directly support is resigning strong
</I>&gt;&gt;<i> named assemblies with a PFX file (password protected). Because we leverage
</I>&gt;&gt;<i> the .NET SDK you will need to extract the public key into a SNK file, which
</I>&gt;&gt;<i> is easy.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Wed, Aug 25, 2010 at 8:39 AM, Miha Markic &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">miha at rthand.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yeah, the logic is still here but it is much harder to read.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> However, my bigger point was that
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> a) usually we all produce &quot;boring&quot; apps with no rocket science code
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> b) obfuscation produces debugging/error reporting problems
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> c) obfuscation might obfuscate too much
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> d) non obfuscated code might help skilled persons to understand why
</I>&gt;&gt;<i> something isn't working
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> e) and as noted, logic is still there
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> f) problems with code signing
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am sure there are other arguments :-)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Miha
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Monodroid mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Tim Reynolds
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Tim Reynolds
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20100825/bf3cac2a/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20100825/bf3cac2a/attachment.html</A> 
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000438.html">[Monodroid] Obfuscating the DLL inside the APK
</A></li>
	<LI>Next message: <A HREF="000440.html">[Monodroid] Obfuscating the DLL inside the APK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#443">[ date ]</a>
              <a href="thread.html#443">[ thread ]</a>
              <a href="subject.html#443">[ subject ]</a>
              <a href="author.html#443">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
