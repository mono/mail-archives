<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodroid] Obfuscating the DLL inside the APK
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Obfuscating%20the%20DLL%20inside%20the%20APK&In-Reply-To=305BE46EAC079043A4E00428FA706F7F1C53A9C713%40MOON01.moon.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000436.html">
   <LINK REL="Next"  HREF="000443.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodroid] Obfuscating the DLL inside the APK</H1>
    <B>Tim Reynolds</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5BMonodroid%5D%20Obfuscating%20the%20DLL%20inside%20the%20APK&In-Reply-To=305BE46EAC079043A4E00428FA706F7F1C53A9C713%40MOON01.moon.local"
       TITLE="[Monodroid] Obfuscating the DLL inside the APK">razialx at gmail.com
       </A><BR>
    <I>Wed Aug 25 09:56:15 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000436.html">[Monodroid] Obfuscating the DLL inside the APK
</A></li>
        <LI>Next message: <A HREF="000443.html">[Monodroid] Obfuscating the DLL inside the APK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#438">[ date ]</a>
              <a href="thread.html#438">[ thread ]</a>
              <a href="subject.html#438">[ subject ]</a>
              <a href="author.html#438">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Miha,

c) Reflection is the bane of obfuscation. In Dotfuscator we have 'smart
obfuscation,' a set of built-in rules that try to identify code patterns
that obfuscation will break. An example is the use of .ToString() on an
enum. If we detect that, we will automatically exclude that Enum from
renaming. The one area we can't detect the instantiation of classes or
invocation of methods using strings. Because the variable could be anything
at runtime, we are not able to automatically exclude the type that will be
reflected upon. If you know you will be doing that, especially late binding,
there are easy steps to take that will generally avoid any issues.

Thanks for reading through my points before :)



On Wed, Aug 25, 2010 at 9:30 AM, Miha Markic &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">miha at rthand.com</A>&gt; wrote:

&gt;<i> Hi Tim,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> c) yes, I know, most obfuscators do. But still, here is an example: your
</I>&gt;<i> app might fail at run time somewhere because you obfuscated some code that
</I>&gt;<i> is used by reflection (human error, but still).
</I>&gt;<i>
</I>&gt;<i> d) i was talking about (expert) end clients, like I tend to often use
</I>&gt;<i> Reflector, specially in case something goes very wrong
</I>&gt;<i>
</I>&gt;<i> e) true, it raises the bar.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Miha
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* Tim Reynolds [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">razialx at gmail.com</A>]
</I>&gt;<i> *Sent:* Wednesday, August 25, 2010 3:22 PM
</I>&gt;<i> *To:* Miha Markic
</I>&gt;<i> *Cc:* Wayne Douglas; Kris Siegel; <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> *Subject:* Re: [Monodroid] Obfuscating the DLL inside the APK
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This might sound all markety, but please bear with me.
</I>&gt;<i>
</I>&gt;<i> I work for PreEmptive Solutions. We produce Dotfuscator and DashO
</I>&gt;<i> obfuscators. I have tested Dotfuscator with MonoDroid and it will fully
</I>&gt;<i> obfuscate your assemblies, though it isn't an entirely straightforward
</I>&gt;<i> process yet. I would like the opportunity to address the points made here:
</I>&gt;<i> a) Nothing I can do about that :)
</I>&gt;<i> b) Obfuscation necessarily requires an extra step when viewing stack
</I>&gt;<i> traces. Currently an issue with the APK generation prevents you from running
</I>&gt;<i> your MonoDroid application in Debug mode, however this does not in any way
</I>&gt;<i> apply to non-MonoDroid applications. They can be run with a debugger (if
</I>&gt;<i> obfuscated with Dotfuscator) without issue. Dotfuscator regenerates your PDB
</I>&gt;<i> file to handle the obfuscated assembly.
</I>&gt;<i> c) Dotfuscator gives you insanely precise control over what you want
</I>&gt;<i> obfuscated. It defaults to obfuscating everything, and provides mechanisms
</I>&gt;<i> for specifying what you do not want obfuscated. We even support Regular
</I>&gt;<i> Expression matching to determine what to exclude. We also break the three
</I>&gt;<i> major obfuscation mechanisms (renaming, control flow, string encryption)
</I>&gt;<i> into separate configuration sections. This means you can have completely
</I>&gt;<i> different 'rules' for each technique.
</I>&gt;<i> d) This is true, and is the major separation between open source and closed
</I>&gt;<i> source applications. We do provide a technology, Runtime Intelligence, that
</I>&gt;<i> allows you to gather runtime analytics about your applications in the wild.
</I>&gt;<i> We have not yet tested this with MonoDroid but I feel it is a really amazing
</I>&gt;<i> technology. Of course, I am biased. That is what I directly work on ;)
</I>&gt;<i> e) The logic is still there, but with proper obfuscation you will only be
</I>&gt;<i> able to view it as assembly code in Reflector. And best of all, the assembly
</I>&gt;<i> code is going to be scrambled. The contextual information around it (fields,
</I>&gt;<i> properties, method names) will all be renamed. This will greatly increase
</I>&gt;<i> the difficulty in reverse engineering what you are doing.
</I>&gt;<i> f) There are absolutely no problems with code signing when using
</I>&gt;<i> Dotfuscator. We support strong name resigning, partial signing and
</I>&gt;<i> authenticode signing. We support signing of packages (XAP for example). The
</I>&gt;<i> only scenario I know of that we do not directly support is resigning strong
</I>&gt;<i> named assemblies with a PFX file (password protected). Because we leverage
</I>&gt;<i> the .NET SDK you will need to extract the public key into a SNK file, which
</I>&gt;<i> is easy.
</I>&gt;<i>
</I>&gt;<i> On Wed, Aug 25, 2010 at 8:39 AM, Miha Markic &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">miha at rthand.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> Yeah, the logic is still here but it is much harder to read.
</I>&gt;<i>
</I>&gt;<i> However, my bigger point was that
</I>&gt;<i>
</I>&gt;<i> a) usually we all produce &quot;boring&quot; apps with no rocket science code
</I>&gt;<i>
</I>&gt;<i> b) obfuscation produces debugging/error reporting problems
</I>&gt;<i>
</I>&gt;<i> c) obfuscation might obfuscate too much
</I>&gt;<i>
</I>&gt;<i> d) non obfuscated code might help skilled persons to understand why
</I>&gt;<i> something isn't working
</I>&gt;<i>
</I>&gt;<i> e) and as noted, logic is still there
</I>&gt;<i>
</I>&gt;<i> f) problems with code signing
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I am sure there are other arguments :-)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Miha
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Tim Reynolds
</I>&gt;<i>
</I>


-- 
Tim Reynolds
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monodroid/attachments/20100825/fe90e465/attachment.html">http://lists.ximian.com/mailman/private/monodroid/attachments/20100825/fe90e465/attachment.html</A> 
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000436.html">[Monodroid] Obfuscating the DLL inside the APK
</A></li>
	<LI>Next message: <A HREF="000443.html">[Monodroid] Obfuscating the DLL inside the APK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#438">[ date ]</a>
              <a href="thread.html#438">[ thread ]</a>
              <a href="subject.html#438">[ subject ]</a>
              <a href="author.html#438">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
