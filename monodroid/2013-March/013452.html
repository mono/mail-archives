<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Enhancement code for Spinner
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Enhancement%20code%20for%20Spinner&In-Reply-To=%3C1362558575916-5712996.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013442.html">
   <LINK REL="Next"  HREF="013453.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Enhancement code for Spinner</H1>
    <B>krish</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=Re%3A%20%5Bmono-android%5D%20Enhancement%20code%20for%20Spinner&In-Reply-To=%3C1362558575916-5712996.post%40n5.nabble.com%3E"
       TITLE="[mono-android] Enhancement code for Spinner">kickrish at gmail.com
       </A><BR>
    <I>Wed Mar  6 08:29:35 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="013442.html">[mono-android] Enhancement code for Spinner
</A></li>
        <LI>Next message: <A HREF="013453.html">[mono-android] Enhancement code for Spinner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13452">[ date ]</a>
              <a href="thread.html#13452">[ thread ]</a>
              <a href="subject.html#13452">[ subject ]</a>
              <a href="author.html#13452">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi,
  here m suffering from retrieivng code...i m saving spinner value in
database with ur dictionary collection...now  i wnt to populate the spinner
with the coursename based on database corresponding value...
i wrote some code to populate the spinner (retreive code )but it is not
working...
for all the times my task is half done...plz help me to retrieve code:
in previous spinner ex i did the retrieve with following code using
arrayadapter...
                while (sdr.Read())
                {                    
                    string str = Convert.ToString(sdr[&quot;SCOURSE&quot;]);
                    Spcourse.SetSelection(aas.GetPosition(str));// here aas
is ArrayAdapter&lt;String&gt; aas = new
ArrayAdapter&lt;string&gt;(this,Android.Resource.Layout.SimpleSpinnerDropDownItem);
 -----------------------------------------
i fill spinner  using arrayadapter like this       
   Spcourse = FindViewById&lt;Spinner&gt;(Resource.Id.Spcourse);
            aas = new
ArrayAdapter&lt;string&gt;(this,Android.Resource.Layout.SimpleSpinnerDropDownItem);
            Spcourse.Adapter = aas;
            aas.Add(String.Empty);
            aas.Add(&quot;MCA&quot;);
            aas.Add(&quot;MBA&quot;);
            aas.Add(&quot;M.Sc&quot;);
and in saving code i saved like this 
          string spcourse = Spcourse.SelectedItem.ToString();
        sqlc.Parameters.Add(new SqliteParameter(&quot;@SCOURSE&quot;, spcourse));
-------------------------------------
its working  fine  for saving and retreiving because it contains only
value(coursename)...
but now coming into my current example i filled spinner with dictionary
contains key and value ....here saving the value corresponding to course is
saving...now when i enter student no and click on retreive button the
spinner should set with the course based on database value....i tried some
retreive code but its not working..
 void retreivedict_Click(object sender, EventArgs e) {
           

            string DatabaseName = &quot;sdata.db3&quot;;
            string documents =
System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal);
            string db = Path.Combine(documents, DatabaseName);
            var conn = new SqliteConnection(&quot;Data Source=&quot; + db);
            var strSql = &quot;select SNO,SCOURSE,SADD from Stdetails where
SNO=@SNO&quot;;
            var cmd = new SqliteCommand(strSql, conn);
            cmd.CommandType = CommandType.Text;
            cmd.Parameters.Add(new SqliteParameter(&quot;@SNO&quot;,studentno.Text));
            try
            {
                conn.Open();
                SqliteDataReader sdr = cmd.ExecuteReader();
                while (sdr.Read())
                {
                    //string str = Convert.ToString(sdr[&quot;SCOURSE&quot;]);
                    int spinintval = Convert.ToInt32(sdr[&quot;SCOURSE&quot;]);
                    if (retcourse.ContainsKey(spinintval))          //here i
wrote like this for retreiving
       { studentcourse.SetSelection(adapter1.GetPosition(spinintval));
}//here is my retreive code which is not working                
                     
                    studentaddr.Text = Convert.ToString(sdr[&quot;SADD&quot;]);
                   // Toast.MakeText(this, str, ToastLength.Long).Show();             
                }
            }
        here is my saving code  for spinner with dictionary collection:

 public class SaveSpinnerValueDictionary : Activity
    {
        Spinner studentcourse;
        EditText studentno, studentaddr;
        Button savedict, retreivedict;
        Dictionary&lt;string, int&gt; course;
        string spinval;
        ArrayAdapter&lt;string&gt; adapter;
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            SetContentView(Resource.Layout.SaveSpinnerValueDictionary);
            // Create your application here
            studentcourse =
FindViewById&lt;Spinner&gt;(Resource.Id.studentcourse);
            studentno = FindViewById&lt;EditText&gt;(Resource.Id.studentno);
            studentaddr = FindViewById&lt;EditText&gt;(Resource.Id.studentaddr);
            savedict = FindViewById&lt;Button&gt;(Resource.Id.savedictionary);
            retreivedict =
FindViewById&lt;Button&gt;(Resource.Id.retreivedictionary);
             savedict.Click+=new EventHandler(savedict_Click);
            retreivedict.Click+=new EventHandler(retreivedict_Click);
            course = new Dictionary&lt;string, int&gt;();
            course.Add(&quot;MCA&quot;, 101);
            course.Add(&quot;MBA&quot;, 202);
            course.Add(&quot;MSc&quot;, 303);
            course.Add(&quot;Mtech&quot;, 404);
            adapter = new ArrayAdapter&lt;string&gt;(this,
Android.Resource.Layout.SimpleSpinnerDropDownItem);
            foreach(string k in course.Keys) 
                adapter.Add(k);
            studentcourse.Adapter = adapter;     
        }

        void savedict_Click(object sender, EventArgs e) { 
            string spcourse = studentcourse.SelectedItem.ToString();
            int outValue = 0;
            if (course.TryGetValue(spcourse, out outValue)) {
                spinval = outValue.ToString();
            }
            string DatabaseName = &quot;sdata.db3&quot;;
            string documents =
System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal);
            string db = Path.Combine(documents, DatabaseName);
            bool exists = File.Exists(db);
            if (!exists)
            {
                SqliteConnection.CreateFile(db);
            }
            var conn = new SqliteConnection(&quot;Data Source=&quot; + db);
            SqliteCommand sqlitecmd = new SqliteCommand();
            sqlitecmd.Connection = conn;
            string cmd = &quot;CREATE TABLE IF NOT EXISTS Stdetails(SNO
INT,SCOURSE VARCHAR(50),SADD VARCHAR(50))&quot;;
            sqlitecmd.CommandType = CommandType.Text;
            sqlitecmd.CommandText = cmd;
            conn.Open();
            sqlitecmd.ExecuteNonQuery();
            conn.Close();

            SqliteCommand sqlc = new SqliteCommand();
            sqlc.Connection = conn;
            conn.Open();
            string strSql = &quot;INSERT INTO Stdetails (SNO, SCOURSE, SADD)
VALUES (@SNO, @SCOURSE, @SADD)&quot;;
            sqlc.CommandText = strSql;
            sqlc.CommandType = CommandType.Text;
            sqlc.Parameters.Add(new SqliteParameter(&quot;@SNO&quot;,studentno.Text));
            sqlc.Parameters.Add(new SqliteParameter(&quot;@SCOURSE&quot;, spinval));
            sqlc.Parameters.Add(new
SqliteParameter(&quot;@SADD&quot;,studentaddr.Text));
            sqlc.ExecuteNonQuery();
            if (conn.State != ConnectionState.Closed)
            {
                conn.Close();
            }
            conn.Dispose();
            Toast.MakeText(this, &quot;data inserted successfully...!&quot;,
ToastLength.Long).Show();           
           studentno.Text = &quot;&quot;;
           studentaddr.Text = &quot;&quot;;      
               
        }
now i saved data like this in database:
 sno   scourse   saddress
1        101         UK
2        303        INDIA
3        404         USA
when i enter 2 in sno edittext and click on retreive button the spinner
should populate with &quot;MSc&quot;...
plz tell indetail...actually my task is half completing all time ..plz help
me to complete this task...



--
View this message in context: <A HREF="http://mono-for-android.1047100.n5.nabble.com/Enhancement-code-for-Spinner-tp5712950p5712996.html">http://mono-for-android.1047100.n5.nabble.com/Enhancement-code-for-Spinner-tp5712950p5712996.html</A>
Sent from the Mono for Android mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013442.html">[mono-android] Enhancement code for Spinner
</A></li>
	<LI>Next message: <A HREF="013453.html">[mono-android] Enhancement code for Spinner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13452">[ date ]</a>
              <a href="thread.html#13452">[ thread ]</a>
              <a href="subject.html#13452">[ subject ]</a>
              <a href="author.html#13452">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
