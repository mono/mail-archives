<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Saving a log file and attaching to an e-mail
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Saving%20a%20log%20file%20and%20attaching%20to%20an%20e-mail&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007727.html">
   <LINK REL="Next"  HREF="007751.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Saving a log file and attaching to an e-mail</H1>
    <B>Neal Culiner</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Saving%20a%20log%20file%20and%20attaching%20to%20an%20e-mail&In-Reply-To="
       TITLE="[mono-android] Saving a log file and attaching to an e-mail">neal at nc-software.com
       </A><BR>
    <I>Mon Dec 12 12:17:32 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="007727.html">[mono-android] Fwd: FW: Issue 223 in droiddraw: Command line option	to load layout
</A></li>
        <LI>Next message: <A HREF="007751.html">[mono-android] Saving a log file and attaching to an e-mail
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7741">[ date ]</a>
              <a href="thread.html#7741">[ thread ]</a>
              <a href="subject.html#7741">[ subject ]</a>
              <a href="author.html#7741">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello MfA devs,

 

I have a routine just like I use in MonoTouch (and works) that writes info
such as exception to a log file.  

 

                   private static void WriteToLog(string msg)

                   {

#if DEBUG

            Android.Util.Log.Info(&quot;LOGBOOK PRO&quot;, msg);

#endif

            using (System.IO.StreamWriter s =
System.IO.File.AppendText(Utils.LogFilename))

            {

                s.WriteLine();

                s.WriteLine(msg);

                s.WriteLine(&quot;--------------------------------------------&quot;);

                s.WriteLine();

            }

                   }

          }

 

 

I am writing to:

 

public readonly static string BaseDir =
System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal);

public readonly static string LogFilename = System.IO.Path.Combine(BaseDir,
&quot;log.txt&quot;);

 

And when a user submits a bug report (via e-mail) from the about area of the
app I attach the file using the code as follows, but for whatever reason, I
never get log files, either they are not being created OR attached, not sure
which just yet.  

 

        private void SendBugReport()

        {

            var recips = new string[] { &quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">bugs at nc-software.com</A>&quot; };

            var intent = new Intent(Intent.ActionSend);

            intent

                .PutExtra(Intent.ExtraEmail, recips)

                .PutExtra(Intent.ExtraSubject, &quot;Android App Bug Report&quot;)

                .PutExtra(Intent.ExtraText,
String.Format(&quot;{0}\n\nSettings\n{1}\nDevice ID: {2}&quot;, MessageBody,
App.Settings.ToString(),App.UDID))

                .SetType(&quot;application/octet-stream&quot;);

            if (File.Exists(Utils.LogFilename))

            {

                Java.IO.File file = new Java.IO.File(Utils.LogFilename);

                intent.PutExtra(Intent.ExtraStream,
Android.Net.Uri.FromFile(file));

            }

            try

            {

                StartActivity(Intent.CreateChooser(intent, &quot;Send E-mail
Using...&quot;));

            }

            catch (Exception ex)

            {

                Logger.LogException(ex.Message, ex, &quot;ContactUs&quot;);

                Toast.MakeText(this, &quot;There are no e-mail clients
installed.&quot;, ToastLength.Short).Show();

            }

        }

 

Anyone see anything wrong with what I'm doing?  The intention is to write a
log file to track exceptions and messages and then attach that file to the
e-mail.  If I can attach a second file I'd love to also send the database
(SQLite) but I'm not sure if I can attach multiple attachments or not, or
don't know how to.

 

Thank you!

 

Neal Culiner

NC Software, Inc.

 &lt;<A HREF="http://www.nc-software.com/">http://www.nc-software.com/</A>&gt; <A HREF="http://www.nc-software.com/">http://www.nc-software.com/</A>

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111212/87eea752/attachment-0001.html">http://lists.ximian.com/pipermail/monodroid/attachments/20111212/87eea752/attachment-0001.html</A> 
</PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007727.html">[mono-android] Fwd: FW: Issue 223 in droiddraw: Command line option	to load layout
</A></li>
	<LI>Next message: <A HREF="007751.html">[mono-android] Saving a log file and attaching to an e-mail
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7741">[ date ]</a>
              <a href="thread.html#7741">[ thread ]</a>
              <a href="subject.html#7741">[ subject ]</a>
              <a href="author.html#7741">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
