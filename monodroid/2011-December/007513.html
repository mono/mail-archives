<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mono-android] Handling texture loss in OpenTK on mono for	android
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Handling%20texture%20loss%20in%20OpenTK%20on%20mono%20for%0A%09android&In-Reply-To=1323119039026-5050146.post%40n5.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007511.html">
   <LINK REL="Next"  HREF="007519.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mono-android] Handling texture loss in OpenTK on mono for	android</H1>
    <B>Andreia Gaita</B> 
    <A HREF="mailto:monodroid%40lists.ximian.com?Subject=%5Bmono-android%5D%20Handling%20texture%20loss%20in%20OpenTK%20on%20mono%20for%0A%09android&In-Reply-To=1323119039026-5050146.post%40n5.nabble.com"
       TITLE="[mono-android] Handling texture loss in OpenTK on mono for	android">shana at xamarin.com
       </A><BR>
    <I>Mon Dec  5 17:03:18 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="007511.html">[mono-android] Handling texture loss in OpenTK on mono for	android
</A></li>
        <LI>Next message: <A HREF="007519.html">[mono-android] Handling texture loss in OpenTK on mono for	android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7513">[ date ]</a>
              <a href="thread.html#7513">[ thread ]</a>
              <a href="subject.html#7513">[ subject ]</a>
              <a href="author.html#7513">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Thanks for the feedback, there are several issues in OpenTK/Android
currently and we're currently actively working on them. The screen rotation
in particular should send a OnLoad, event, but it will only do so if you've
paused the AndroidGameView when the activity is paused (due to the
rotation), otherwise things won't work well. If it's not actually sending
an OnLoad event ever, then that's a bigger bug :P

If you know of any other issues, please file bugs on them on
bugzilla.xamarin.com if you can, with api level / device information and
small repros if at all possible.

Thanks!

andreia gaita

On Mon, Dec 5, 2011 at 9:03 PM, <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">chris at Terrago</A> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">cdrake at terragotech.com</A>&gt;wrote:

&gt;<i> Warren
</I>&gt;<i>
</I>&gt;<i> This sounds like a problem I was having a few months ago. It would be nice
</I>&gt;<i> to have a little more detail on how you are setting up your rendering
</I>&gt;<i> through AndroidGameView, but I will make a few assumptions and hopefully
</I>&gt;<i> this information will be useful to you.
</I>&gt;<i>
</I>&gt;<i> I am assuming that you have set up an AndroidGameView with a run loop that
</I>&gt;<i> is started in the handler for an OnLoad event. You probably also have some
</I>&gt;<i> kind of OO framework to handle initializing OpenGL textures (among other
</I>&gt;<i> renderable objects) such that they can be drawn later in response to
</I>&gt;<i> OnRenderFrame events without the need to reconstruct them each time. If
</I>&gt;<i> this
</I>&gt;<i> is at all similar to your approach, there are two issues you need to be
</I>&gt;<i> aware of:
</I>&gt;<i>
</I>&gt;<i> 1. AndroidGameView maintains a Graphics context that is destroyed any time
</I>&gt;<i> the view is paused. The graphics context maintains references to various
</I>&gt;<i> resources such as textures, framebuffers, buffers, renderbuffers, shaders,
</I>&gt;<i> and program contexts. *When the graphics context is destroyed the GPU will
</I>&gt;<i> also destroy any resources associated with it.* This is normal behavior and
</I>&gt;<i> is documented on the OpenTK site. So to handle this you will need to make
</I>&gt;<i> sure that you have a way to signal a context change (do this upon your
</I>&gt;<i> activity resuming) to your renderer so that it can remove any cached
</I>&gt;<i> references to resources the GPU has deleted and then recreate them.
</I>&gt;<i>
</I>&gt;<i> 2.  When the graphics context is destroyed in response to a screen rotation
</I>&gt;<i> or when the device sleeps it is never recreated. I am assuming that there
</I>&gt;<i> is
</I>&gt;<i> a problem with the recreation of the SurfaceView because you never get
</I>&gt;<i> another OnLoad event. This is apparently a known bug although I can't dig
</I>&gt;<i> up
</I>&gt;<i> a link at the moment. Unfortunately, I have not found a way around this
</I>&gt;<i> problem that works consistently.
</I>&gt;<i>
</I>&gt;<i> I hope this helps. If not, give me a little more detail about your setup
</I>&gt;<i> and
</I>&gt;<i> I'll see what I can do.
</I>&gt;<i>
</I>&gt;<i> Chris
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://mono-for-android.1047100.n5.nabble.com/Handling-texture-loss-in-OpenTK-on-mono-for-android-tp5045738p5050146.html">http://mono-for-android.1047100.n5.nabble.com/Handling-texture-loss-in-OpenTK-on-mono-for-android-tp5045738p5050146.html</A>
</I>&gt;<i> Sent from the Mono for Android mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Monodroid mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">Monodroid at lists.ximian.com</A>
</I>&gt;<i>
</I>&gt;<i> UNSUBSCRIBE INFORMATION:
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monodroid">http://lists.ximian.com/mailman/listinfo/monodroid</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monodroid/attachments/20111205/eb8e11e7/attachment.html">http://lists.ximian.com/pipermail/monodroid/attachments/20111205/eb8e11e7/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007511.html">[mono-android] Handling texture loss in OpenTK on mono for	android
</A></li>
	<LI>Next message: <A HREF="007519.html">[mono-android] Handling texture loss in OpenTK on mono for	android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7513">[ date ]</a>
              <a href="thread.html#7513">[ thread ]</a>
              <a href="subject.html#7513">[ subject ]</a>
              <a href="author.html#7513">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodroid">More information about the Monodroid
mailing list</a><br>
</body></html>
