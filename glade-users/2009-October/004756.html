<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] Using Actions + MenuItems + Accelerators + AccelLabels
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20Using%20Actions%20%2B%20MenuItems%20%2B%20Accelerators%20%2B%0A%20AccelLabels&In-Reply-To=796874fc0910050941o4bd33232m39e538b29ffefee3%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004754.html">
   <LINK REL="Next"  HREF="004757.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] Using Actions + MenuItems + Accelerators + AccelLabels</H1>
    <B>Alexey Kurochkin</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20Using%20Actions%20%2B%20MenuItems%20%2B%20Accelerators%20%2B%0A%20AccelLabels&In-Reply-To=796874fc0910050941o4bd33232m39e538b29ffefee3%40mail.gmail.com"
       TITLE="[Glade-users] Using Actions + MenuItems + Accelerators + AccelLabels">alexey.kurochkin at pathfinderlwd.com
       </A><BR>
    <I>Mon Oct  5 14:05:21 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004754.html">[Glade-users] custom widgets
</A></li>
        <LI>Next message: <A HREF="004757.html">[Glade-users] Problem with GtkBuilder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4756">[ date ]</a>
              <a href="thread.html#4756">[ thread ]</a>
              <a href="subject.html#4756">[ subject ]</a>
              <a href="author.html#4756">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2009-10-05 at 11:41 -0500, Manuel Alejandro Cer&#243;n Estrada wrote:
&gt;<i> 2009/10/5 Alexey Kurochkin &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">alexey.kurochkin at pathfinderlwd.com</A>&gt;:
</I>&gt;<i> 
</I>&gt;<i> &gt; I'd like to see the answer too. Currently I create only the main menu
</I>&gt;<i> &gt; bar and empty sub menus with Glade, and all the menu items are created
</I>&gt;<i> &gt; and appended to the sub menus manually in the code. It results in
</I>&gt;<i> &gt; hundreds of lines of clutter which I'm looking forward to get rid of.
</I>&gt;<i> 
</I>&gt;<i> I've been looking information about it, and there are two problems:
</I>&gt;<i> First, Glade currently doesn't support GtkActionGroup well. Second
</I>&gt;<i> GTK+ doesn't have a property for accelerator in GtkAction, the only
</I>&gt;<i> way to assign accelerators to actions is using
</I>&gt;<i> GtkActionGroup.add_action_with_accel(). Thereby, we have for one of
</I>&gt;<i> those problems to be fixed.
</I>&gt;<i> 
</I>&gt;<i> My current approach for the problem, trying to avoid clutter code as
</I>&gt;<i> much as possible, is: Creating the main menu using GtkUIManager
</I>&gt;<i> instead of Glade. I manually wrote my main menu using a UIManager xml
</I>&gt;<i> description. Something like this:
</I>&gt;<i> 
</I>&gt;<i> &lt;ui&gt;
</I>&gt;<i> &lt;menubar name=&quot;mainmenu&quot;&gt;
</I>&gt;<i> &lt;menu name=&quot;file_menu&quot; action=&quot;file_action&quot;&gt;
</I>&gt;<i> &lt;menuitem name=&quot;open_recording_menuitem&quot; action=&quot;open_recording_action&quot;/&gt;
</I>&gt;<i> &lt;menuitem name=&quot;open_recording2_menuitem&quot; action=&quot;open_recording2_action&quot;/&gt;
</I>&gt;<i> &lt;separator/&gt;
</I>&gt;<i> &lt;menuitem name=&quot;quit_menuitem&quot; action=&quot;quit_action&quot;/&gt;
</I>&gt;<i> &lt;/menu&gt;
</I>&gt;<i> ...
</I>&gt;<i> &lt;/menubar&gt;
</I>&gt;<i> &lt;/ui&gt;
</I>&gt;<i> 
</I>&gt;<i> The actions referred in the UIManager file are created in the Glade
</I>&gt;<i> file. Then, in code I do:
</I>&gt;<i> 
</I>&gt;<i> - Create an GtkActionGroup and add all the actions defined in the
</I>&gt;<i> Glade file to it.
</I>&gt;<i> - Create a UIManager and load the file with the menu defined.
</I>&gt;<i> - Insert the ActionGroup to the UIManager
</I>&gt;<i> - Assign the AccelGroup of the UIManager to the current window.
</I>&gt;<i> - Get the main menu from the UIManager and manually insert it in the window.
</I>&gt;<i> 
</I>&gt;<i> Manuel.
</I>&gt;<i> 
</I>
I used to do it before, but I've found it rather inconvenient for two
reasons. First, writing xml by hand is not that much different from
copy/paste five lines of code per menu item (get action from builder,
set accelerator group for it, add it to the group, create menu item from
the action, and append it to the menu shell). I can write GtkBuilder xml
too, but what I need Glade for then? Second, the changes to the ui file
have to be synchronized with code and/or glade anyway, so I figured it
is less hassle to keep it all in one source file despite the length. It
is easier to maintain this way. I'm not going back to ui manager unless
I'd really need to build dynamic (merge/unmerge) menus.


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004754.html">[Glade-users] custom widgets
</A></li>
	<LI>Next message: <A HREF="004757.html">[Glade-users] Problem with GtkBuilder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4756">[ date ]</a>
              <a href="thread.html#4756">[ thread ]</a>
              <a href="subject.html#4756">[ subject ]</a>
              <a href="author.html#4756">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
