<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] problems with treeview
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20problems%20with%20treeview&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003839.html">
   <LINK REL="Next"  HREF="003841.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] problems with treeview</H1>
    <B>Atmadarshini devi dasi</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20problems%20with%20treeview&In-Reply-To="
       TITLE="[Glade-users] problems with treeview">atmadarshini_dd at yahoo.com
       </A><BR>
    <I>Mon Mar 17 12:39:45 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003839.html">[Glade-users] GtkDial in Glade
</A></li>
        <LI>Next message: <A HREF="003841.html">[Glade-users] problems with treeview
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3840">[ date ]</a>
              <a href="thread.html#3840">[ thread ]</a>
              <a href="subject.html#3840">[ subject ]</a>
              <a href="author.html#3840">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi there

I am trying to use treeview in order to view an addressbook that i am trying to create. now i was trying out a working example that is suppose to work to see how things work before implementing my own function.
but for some reason all that it does is shows me an empty treeview screen with no data or headings in it. on the glade side of things, all i have done is put in the treeview into the window. I have not attched any signals or changed anything. Is that correct?

I have posted the code below that I have used. 


enum
{
  COL_FIRST_NAME = 0,
  COL_LAST_NAME,
  COL_YEAR_BORN,
  NUM_COLS
} ;

static GtkTreeModel *
create_and_fill_model (void)
{
  GtkTreeStore  *treestore;
  GtkTreeIter    toplevel, child;

  treestore = gtk_tree_store_new(NUM_COLS, G_TYPE_STRING, G_TYPE_STRING, G_TYPE_UINT); /* NUM_COLS = 3 */

  /* Append a top level row and leave it empty */
  gtk_tree_store_append(treestore, &amp;toplevel, NULL);
  gtk_tree_store_set(treestore, &amp;toplevel,
                     COL_FIRST_NAME, &quot;Maria&quot;,
                     COL_LAST_NAME, &quot;Incognito&quot;,
                     -1);

  /* Append a second top level row, and fill it with some data */
  gtk_tree_store_append(treestore, &amp;toplevel, NULL);
  gtk_tree_store_set(treestore, &amp;toplevel,
                     COL_FIRST_NAME, &quot;Jane&quot;,
                     COL_LAST_NAME, &quot;Average&quot;,
                     COL_YEAR_BORN, (guint) 1962,
                     -1);

  /* Append a child to the second top level row, and fill in some data */
  gtk_tree_store_append(treestore, &amp;child, &amp;toplevel);
  gtk_tree_store_set(treestore, &amp;child,
                     COL_FIRST_NAME, &quot;Janinita&quot;,
                     COL_LAST_NAME, &quot;Average&quot;,
                     COL_YEAR_BORN, (guint) 1985,
                     -1);

  return GTK_TREE_MODEL(treestore);
}

void
age_cell_data_func (GtkTreeViewColumn *col,
                    GtkCellRenderer   *renderer,
                    GtkTreeModel      *model,
                    GtkTreeIter       *iter,
                    gpointer           user_data)
{
  guint  year_born;
  guint  year_now = 2003; /* to save code not relevant for the example */
  gchar  buf[64];

  gtk_tree_model_get(model, iter, COL_YEAR_BORN, &amp;year_born, -1);

  if (year_born &lt;= year_now &amp;&amp; year_born &gt; 0)
  {
    guint age = year_now - year_born;

    g_snprintf(buf, sizeof(buf), &quot;%u years old&quot;, age);

    g_object_set(renderer, &quot;foreground-set&quot;, FALSE, NULL); /* print this normal */
  }
  else
  {
    g_snprintf(buf, sizeof(buf), &quot;age unknown&quot;);
    g_object_set(renderer, &quot;foreground&quot;, &quot;Red&quot;, &quot;foreground-set&quot;, TRUE, NULL); /* make red */
  }

  g_object_set(renderer, &quot;text&quot;, buf, NULL);
}


static GtkWidget *
create_view_and_model (void)
{
  GtkTreeViewColumn   *col;
  GtkCellRenderer     *renderer;
  GtkWidget           *view;
  GtkTreeModel        *model;

  view = gtk_tree_view_new();

  /* --- Column #1 --- */

  col = gtk_tree_view_column_new();

  gtk_tree_view_column_set_title(col, &quot;First Name&quot;);

  /* pack tree view column into tree view */
  gtk_tree_view_append_column(GTK_TREE_VIEW(view), col);

  renderer = gtk_cell_renderer_text_new();

  /* pack cell renderer into tree view column */
  gtk_tree_view_column_pack_start(col, renderer, TRUE);

  /* connect 'text' property of the cell renderer to model column that contains the first name */
  gtk_tree_view_column_add_attribute(col, renderer, &quot;text&quot;, COL_FIRST_NAME);


  /* --- Column #2 --- */

  col = gtk_tree_view_column_new();

  gtk_tree_view_column_set_title(col, &quot;Last Name&quot;);

  /* pack tree view column into tree view */
  gtk_tree_view_append_column(GTK_TREE_VIEW(view), col);

  renderer = gtk_cell_renderer_text_new();

  /* pack cell renderer into tree view column */
  gtk_tree_view_column_pack_start(col, renderer, TRUE);

  /* connect 'text' property of the cell renderer to model column that contains the last name */
  gtk_tree_view_column_add_attribute(col, renderer, &quot;text&quot;, COL_LAST_NAME);

  /* set 'weight' property of the cell renderer to bold print (we want all last names in bold) */
  g_object_set(renderer, &quot;weight&quot;, PANGO_WEIGHT_BOLD, &quot;weight-set&quot;, TRUE, NULL);


  /* --- Column #3 --- */

  col = gtk_tree_view_column_new();

  gtk_tree_view_column_set_title(col, &quot;Age&quot;);

  /* pack tree view column into tree view */
  gtk_tree_view_append_column(GTK_TREE_VIEW(view), col);

  renderer = gtk_cell_renderer_text_new();

  /* pack cell renderer into tree view column */
  gtk_tree_view_column_pack_start(col, renderer, TRUE);

  /* connect a cell data function */
  gtk_tree_view_column_set_cell_data_func(col, renderer, age_cell_data_func, NULL, NULL);


  model = create_and_fill_model();

  gtk_tree_view_set_model(GTK_TREE_VIEW(view), model);

  g_object_unref(model); /* destroy model automatically with view */

  gtk_tree_selection_set_mode(gtk_tree_view_get_selection(GTK_TREE_VIEW(view)), GTK_SELECTION_NONE);

  return view;
}



void
on_view_button_clicked  (GtkButton       *button,
                                        gpointer         user_data)
{
GtkWidget *treeview;

view_address_window = create_view_address_window();
treeview = create_view_and_model();
gtk_widget_show (view_address_window);


}

the view button is a button that i use in order to see the window with the treeview . i get no errors but dont see anything in my treeview.

Please help.

thanks

Aakanksha

       
---------------------------------
Looking for last minute shopping deals?  Find them fast with Yahoo! Search.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/glade-users/attachments/20080317/3c7f9768/attachment-0001.html">http://lists.ximian.com/pipermail/glade-users/attachments/20080317/3c7f9768/attachment-0001.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003839.html">[Glade-users] GtkDial in Glade
</A></li>
	<LI>Next message: <A HREF="003841.html">[Glade-users] problems with treeview
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3840">[ date ]</a>
              <a href="thread.html#3840">[ thread ]</a>
              <a href="subject.html#3840">[ subject ]</a>
              <a href="author.html#3840">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
