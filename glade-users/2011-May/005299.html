<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] GTK+ threads: works great but compile-time warning
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20GTK%2B%20threads%3A%20works%20great%20but%20compile-time%20warning&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005298.html">
   <LINK REL="Next"  HREF="005300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] GTK+ threads: works great but compile-time warning</H1>
    <B>David Buchan</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20GTK%2B%20threads%3A%20works%20great%20but%20compile-time%20warning&In-Reply-To="
       TITLE="[Glade-users] GTK+ threads: works great but compile-time warning">pdbuchan at yahoo.com
       </A><BR>
    <I>Sun May 29 19:17:44 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005298.html">[Glade-users] GTK+ threads: works great but compile-time warning
</A></li>
        <LI>Next message: <A HREF="005300.html">[Glade-users] GTK+ threads: works great but compile-time warning
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5299">[ date ]</a>
              <a href="thread.html#5299">[ thread ]</a>
              <a href="subject.html#5299">[ subject ]</a>
              <a href="author.html#5299">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I found some people on the web who were putting a cast (GThreadFunc) before the 1st argument of g_thread_create. I did this, and got rid of the error message. Weird, and a little worrisome. Regardless, the code works.

But it occurs to me that maybe I don't need to do threads at all.
Here's specifically what I want to achieve:

I have the user press a button to begin some heavy computation, but I also want the user to be able to press another button, if desired, to stop the computation. They won't need to do anything else. That is, other than stop the computation, they need no more functionality while the numbers are being crunched.

I had tested briefly and found that once the computation started, I lost control and had to click on the x to close out the window. In Ubuntu, the screen darkens to inform the user that they've lost control. This is what initially led me to believe I needed threads.

Is there a way to allow them to stop the computation without resorting to threads? Seems like something a lot of programs would need, and I (perhaps mistakely) didn't think threads were quite so commonly used.

Dave

--- On Sat, 5/28/11, David Buchan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">pdbuchan at yahoo.com</A>&gt; wrote:

&gt;<i> From: David Buchan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">pdbuchan at yahoo.com</A>&gt;
</I>&gt;<i> Subject: GTK+ threads: works great but compile-time warning
</I>&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">glade-users at lists.ximian.com</A>
</I>&gt;<i> Date: Saturday, May 28, 2011, 8:58 PM
</I>&gt;<i> Hi guys,
</I>&gt;<i> 
</I>&gt;<i> Info: Ubuntu (lucid), gtkbuilder from glade 3.6.7, C
</I>&gt;<i> language with gcc.
</I>&gt;<i> 
</I>&gt;<i> I took some of Tadej's thread code from his Bits and Pieces
</I>&gt;<i> blog post, and modified it to closer to what I need.
</I>&gt;<i> 
</I>&gt;<i> Specifically, I moved the thread creation into a callback,
</I>&gt;<i> on the basis that I understood that all callbacks were
</I>&gt;<i> inside main's threadlock so it should be equivalent. I
</I>&gt;<i> removed the timeout.
</I>&gt;<i> 
</I>&gt;<i> You click on button1 and it's label will cycle from
</I>&gt;<i> &quot;thread&quot; to &quot;cycle&quot; each second. You click on button2 to
</I>&gt;<i> stop it.
</I>&gt;<i> 
</I>&gt;<i> It does the job, but gives a compile-time warning:
</I>&gt;<i> 
</I>&gt;<i> test5.c: In function &#8216;on_button1_clicked&#8217;:
</I>&gt;<i> test5.c:33: warning: passing argument 1 of
</I>&gt;<i> &#8216;g_thread_create_full&#8217; from incompatible pointer type
</I>&gt;<i> /usr/include/glib-2.0/glib/gthread.h:225: note: expected
</I>&gt;<i> &#8216;GThreadFunc&#8217; but argument is of type &#8216;void *
</I>&gt;<i> (*)(struct TestData *)&#8217;
</I>&gt;<i> 
</I>&gt;<i> Note that I call g_thread_create not g_thread_create_full.
</I>&gt;<i> 
</I>&gt;<i> Comments?
</I>&gt;<i> Code attached.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Dave
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005298.html">[Glade-users] GTK+ threads: works great but compile-time warning
</A></li>
	<LI>Next message: <A HREF="005300.html">[Glade-users] GTK+ threads: works great but compile-time warning
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5299">[ date ]</a>
              <a href="thread.html#5299">[ thread ]</a>
              <a href="subject.html#5299">[ subject ]</a>
              <a href="author.html#5299">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
