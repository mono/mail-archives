<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] gtk_label_set_text fails, but not gtk_label_get_text
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20gtk_label_set_text%20fails%2C%20but%20not%20gtk_label_get_text&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003682.html">
   <LINK REL="Next"  HREF="003684.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] gtk_label_set_text fails, but not gtk_label_get_text</H1>
    <B>Stuart Gilbert</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20gtk_label_set_text%20fails%2C%20but%20not%20gtk_label_get_text&In-Reply-To="
       TITLE="[Glade-users] gtk_label_set_text fails, but not gtk_label_get_text">stuart.gilbert at gmail.com
       </A><BR>
    <I>Thu Nov  8 11:47:25 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003682.html">[Glade-users] Can any one help me to develop a GUI for serial port	reading
</A></li>
        <LI>Next message: <A HREF="003684.html">[Glade-users] gtk_label_set_text fails,	but not gtk_label_get_text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3683">[ date ]</a>
              <a href="thread.html#3683">[ thread ]</a>
              <a href="subject.html#3683">[ subject ]</a>
              <a href="author.html#3683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello.

I've got an application with a label and 3 buttons. When I click one of the
buttons I want the label text to change. gtk_label_set_text doesn't give me
any errors, but it also doesn't change the text at all.

gtk_label_get_text works fine when I put it in before the set_text, and then
prints a blank line if I put it after the set_text.

I get no errors or warnings during compilation with the following line: gcc
famulus.c -o fam `pkg-config gtk+-2.0 --cflags --libs` `pkg-config
libglade-2.0 --cflags --libs` -export-dynamic

I'll paste my code below because it's not very long.

Thanks in advance for any help. :)
Stuart.

---------------------------------------------------------

#include &lt;gtk/gtk.h&gt;
#include &lt;glade/glade.h&gt;

GtkWidget* getElement(const char*);
void btnIssue_clicked_cb(GtkWidget*, GdkEventAny*, gpointer);

void btnIssue_clicked_cb(GtkWidget* btnIssue, GdkEventAny* event, gpointer
data) {
  GtkWidget* lblInfo = getElement(&quot;lblInfo&quot;);
/*  g_print(gtk_label_get_text((GtkLabel*) lblInfo));
  g_print(&quot;\n&quot;);

Commented out for the moment. */

  gtk_label_set_text((GtkLabel*) lblInfo, &quot;&quot;); /* &lt;--- This is the line that
fails */
}

GtkWidget* getElement(const char* name) {
  GladeXML *xml;
  xml = glade_xml_new(&quot;famulus.glade&quot;, NULL, NULL);
  glade_xml_signal_autoconnect(xml);

  GtkWidget* widget = glade_xml_get_widget(xml, name);

  g_object_unref(G_OBJECT(xml));

  return(widget);
}


int main(int argc, char *argv[]) {
  gtk_init(&amp;argc, &amp;argv);

  GtkWidget* wndMain = getElement(&quot;wndMain&quot;);

  gtk_widget_show_all(wndMain);

  gtk_main();

  return(0);
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/glade-users/attachments/20071108/87ca4f40/attachment.html">http://lists.ximian.com/pipermail/glade-users/attachments/20071108/87ca4f40/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003682.html">[Glade-users] Can any one help me to develop a GUI for serial port	reading
</A></li>
	<LI>Next message: <A HREF="003684.html">[Glade-users] gtk_label_set_text fails,	but not gtk_label_get_text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3683">[ date ]</a>
              <a href="thread.html#3683">[ thread ]</a>
              <a href="subject.html#3683">[ subject ]</a>
              <a href="author.html#3683">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
