<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] Importing an old .glade file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20Importing%20an%20old%20.glade%20file&In-Reply-To=1122977567.3785.1.camel%40eternity">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002694.html">
   <LINK REL="Next"  HREF="002705.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] Importing an old .glade file</H1>
    <B>Zoltan Boszormenyi</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20Importing%20an%20old%20.glade%20file&In-Reply-To=1122977567.3785.1.camel%40eternity"
       TITLE="[Glade-users] Importing an old .glade file">zboszor at dunaweb.hu
       </A><BR>
    <I>Sun Aug  7 16:02:25 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002694.html">[Glade-users] Importing an old .glade file
</A></li>
        <LI>Next message: <A HREF="002705.html">[Glade-users] Importing an old .glade file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2704">[ date ]</a>
              <a href="thread.html#2704">[ thread ]</a>
              <a href="subject.html#2704">[ subject ]</a>
              <a href="author.html#2704">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Damon Chaplin &#237;rta:
&gt;<i> On Mon, 2005-08-01 at 20:20 +0200, Zoltan Boszormenyi wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I have to resume maintaining an old GTK-1.2 software,
</I>&gt;&gt;<i>which is huuuge. Last time I updated it was to recompile it
</I>&gt;&gt;<i>for RedHat 9, changing it to UTF-8 from ISO-8859-2.
</I>&gt;&gt;<i>Now I have to upgrade it to GTK-2.x. Is there a way to import
</I>&gt;&gt;<i>the .glade file from that project and export it in a newer format?
</I>&gt;&gt;<i>Simply opening it in glade-2.6 doesn't work.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The FAQ covers this a bit:
</I>&gt;<i> 
</I>&gt;<i> 1.5 How do I port a GTK+ 1.2 or GNOME 1.4 project to GTK+/GNOME 2.0.
</I>&gt;<i> 
</I>&gt;<i> libglade includes a script called libglade-convert which will convert an
</I>&gt;<i> old GTK+ 1.2 or GNOME 1.4 Glade XML file to the new GTK+/GNOME 2.0
</I>&gt;<i> format.
</I>&gt;<i> 
</I>&gt;<i> However, for GTK+ applications there is currently a slight problem with
</I>&gt;<i> this.
</I>&gt;<i> You need to:
</I>&gt;<i>   (1) Convert the XML file with libglade-convert.
</I>&gt;<i>   (2) Open the new file in Glade and save it immediately. This will
</I>&gt;<i> create
</I>&gt;<i>       the project options file with the same name as the XML file but
</I>&gt;<i> with
</I>&gt;<i>       a 'p' on the end.
</I>&gt;<i>   (3) Add '&lt;gnome_support&gt;FALSE&lt;/gnome_support&gt;'
</I>&gt;<i>       to the project options file, so Glade knows it is a GTK+ project.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Damon
</I>
Thanks for the answer, I just had the time to try it.
The software was actually for GNOME-1.2/1.4, not plain GTK+-1.2.
Converting the .glade file gave me this:

$ libglade-convert --verbose myproject.glade
Fixing app1 up as GnomeApp
Fixing app1 up as GtkWindow
Fixing dock1 up as BonoboDock
Fixing dockitem1 up as BonoboDockItem
Fixing menubar1 up as GtkMenuBar
Fixing file1 up as GtkMenuItem
Fixing file1_menu up as GtkMenu
Fixing exit1 up as GtkImageMenuItem
Fixing exit1 up as GtkMenuItem
Fixing Traceback (most recent call last):
   File &quot;/usr/bin/libglade-convert&quot;, line 1201, in ?
     main()
   File &quot;/usr/bin/libglade-convert&quot;, line 1198, in main
     handle_file(args[0])
   File &quot;/usr/bin/libglade-convert&quot;, line 1160, in handle_file
     fixup_widget(widgetdef)
   File &quot;/usr/bin/libglade-convert&quot;, line 428, in fixup_widget
     fixup_widget(childdef.widget)
   File &quot;/usr/bin/libglade-convert&quot;, line 428, in fixup_widget
     fixup_widget(childdef.widget)
   File &quot;/usr/bin/libglade-convert&quot;, line 428, in fixup_widget
     fixup_widget(childdef.widget)
   File &quot;/usr/bin/libglade-convert&quot;, line 428, in fixup_widget
     fixup_widget(childdef.widget)
   File &quot;/usr/bin/libglade-convert&quot;, line 424, in fixup_widget
     while (type and not fixup_as_type (widget, type)):
   File &quot;/usr/bin/libglade-convert&quot;, line 600, in fixup_as_type
     print &gt;&gt; sys.stderr, 'Fixing', widget['name'], 'up as', type
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in 
position 9: ordinal not in range(128)

And it doesn't get converted. System is Fedora Core 3/x86-64.
glade2-2.6.0, libglade2-2.4.0.

All the project files, including the .glade file are in UTF-8,
they were run through &quot;recode latin2..utf-8&quot; during the upgrade
from RedHat 7.3 to RedHat 9, and glade-0.6.4 was happy with the file.
It still is, I just compiled glade-0.6.4-11 from FC2 on my FC3.
I converted my .glade file back to latin2 and libglade-convert dies
even earlier.

What can I try next to get my .glade file upgraded?

Best regards,
Zolt&#225;n B&#246;sz&#246;rm&#233;nyi
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002694.html">[Glade-users] Importing an old .glade file
</A></li>
	<LI>Next message: <A HREF="002705.html">[Glade-users] Importing an old .glade file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2704">[ date ]</a>
              <a href="thread.html#2704">[ thread ]</a>
              <a href="subject.html#2704">[ subject ]</a>
              <a href="author.html#2704">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
