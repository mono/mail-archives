<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] Unable to automatically connect signal handlers	with integer arguments
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20Unable%20to%20automatically%20connect%20signal%20handlers%0A%09with%20integer%20arguments&In-Reply-To=20090916172300.4584df7a%40namir.ctr.unican.es">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004740.html">
   <LINK REL="Next"  HREF="004742.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] Unable to automatically connect signal handlers	with integer arguments</H1>
    <B>Tristan Van Berkom</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20Unable%20to%20automatically%20connect%20signal%20handlers%0A%09with%20integer%20arguments&In-Reply-To=20090916172300.4584df7a%40namir.ctr.unican.es"
       TITLE="[Glade-users] Unable to automatically connect signal handlers	with integer arguments">tristan.van.berkom at gmail.com
       </A><BR>
    <I>Wed Sep 16 11:35:38 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004740.html">[Glade-users] Unable to automatically connect signal handlers with integer arguments
</A></li>
        <LI>Next message: <A HREF="004742.html">[Glade-users] Glade re-branched stable as gnome-2-28
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4741">[ date ]</a>
              <a href="thread.html#4741">[ thread ]</a>
              <a href="subject.html#4741">[ subject ]</a>
              <a href="author.html#4741">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>   Signals need to be improved with GtkBuilder/Glade, its really not
so much work
when you consider the possible gains, I've outlined a roadmap[0] to get it done,
if anyone thinks this is interesting I'd be happy to lend them a hand
getting it done.

For now user data must be an object, but it must be an object that is defined
in the same xml (GtkBuilder does not know about any symbols you may have
defined outside of the xml), and be careful; when you connect a signal with
an object argument then your signal will be connected with the swap flag,
which means the user data argument will be the _first_ argument.

Cheers,
          -Tristan

<A HREF="http://live.gnome.org/Glade/Roadmap/RealUsableSignals">http://live.gnome.org/Glade/Roadmap/RealUsableSignals</A>

On Wed, Sep 16, 2009 at 11:23 AM, Miguel Telleria de Esteban
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">miguel at mtelleria.com</A>&gt; wrote:
&gt;<i> Dear all,
</I>&gt;<i>
</I>&gt;<i> I am using glade 3.6 with the GtkBuilder format and I wanted to try a
</I>&gt;<i> simple case in which two widgets share the same handler functions for a
</I>&gt;<i> signal name but use different user data.
</I>&gt;<i>
</I>&gt;<i> A simple example is two ToggleButtons with the same &quot;toggled&quot; handler
</I>&gt;<i> and passing a different integer number as user argument.
</I>&gt;<i>
</I>&gt;<i> The GtkBuilder XML [1] has the following relevant information
</I>&gt;<i>
</I>&gt;<i> &#160;&lt;object class=&quot;GtkToggleButton&quot; id=&quot;tbutton1&quot;&gt;
</I>&gt;<i> &#160; &#160; &lt;signal name=&quot;toggled&quot; handler=&quot;toggled_cb&quot; object=&quot;arg1&quot;/&gt;
</I>&gt;<i> &#160;&lt;/object&gt;
</I>&gt;<i>
</I>&gt;<i> &#160;&lt;object class=&quot;GtkToggleButton&quot; id=&quot;tbutton2&quot;&gt;
</I>&gt;<i> &#160; &#160;&lt;signal name=&quot;toggled&quot; handler=&quot;toggled_cb&quot; object=&quot;arg2&quot;/&gt;
</I>&gt;<i> &#160;&lt;/object&gt;
</I>&gt;<i>
</I>&gt;<i> On the Python code [2] I have the following lines in the class
</I>&gt;<i> constructor:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;def __init__(self):
</I>&gt;<i> &#160; &#160; &#160; &#160;self.arg1 = 1
</I>&gt;<i> &#160; &#160; &#160; &#160;self.arg2 = 2
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;self.builder = gtk.Builder()
</I>&gt;<i> &#160; &#160; &#160; &#160;self.builder.add_from_file(&quot;togglebutton_gtkbuilder.glade&quot;)
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;missing = self.builder.connect_signals(self)
</I>&gt;<i> &#160; &#160; &#160; &#160;assert missing == None
</I>&gt;<i>
</I>&gt;<i> and the callback is as follows:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;def toggled_cb(self, widget, data):
</I>&gt;<i> &#160; &#160; &#160; &#160;if data == &quot;1&quot;:
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;print &quot;Button1 pressed&quot;
</I>&gt;<i> &#160; &#160; &#160; &#160;elif data == &quot;2&quot;:
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;print &quot;Button2 pressed&quot;
</I>&gt;<i>
</I>&gt;<i> The problem is that the connect_signals() methods gives me the error:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;GtkWarning: Could not lookup object arg1 on signal toggled of object
</I>&gt;<i> &#160; &#160;tbutton1
</I>&gt;<i>
</I>&gt;<i> and when I clicked on the button it seems that the argument is not
</I>&gt;<i> passed to the callback:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;TypeError: toggled_cb() takes exactly 3 arguments (2 given)
</I>&gt;<i>
</I>&gt;<i> Some google research has made me believe that the argument value should
</I>&gt;<i> be a GObject instance some how but I tried to create a GObject instance
</I>&gt;<i> with:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;gobject.new(gobject.TYPE_INT)
</I>&gt;<i>
</I>&gt;<i> &#160;without any success neither.
</I>&gt;<i>
</I>&gt;<i> My questions:
</I>&gt;<i>
</I>&gt;<i> A) &#160;Is there a way to define a GTK_VALUE as a user arg from the
</I>&gt;<i> &#160; &#160;GtkBuilder XML?
</I>&gt;<i>
</I>&gt;<i> B) &#160;Is there a way to build a GOBJECT explicitely in PyGTK that
</I>&gt;<i> &#160; &#160;could be referenced as the argument value of glade-3 signal
</I>&gt;<i> &#160; &#160;handlers?
</I>&gt;<i>
</I>&gt;<i> So far it seems that any handler with a user data needs to be connected
</I>&gt;<i> manually (getting the object with get_object() and invoking the
</I>&gt;<i> connect() method).
</I>&gt;<i>
</I>&gt;<i> Thanks in advance for any help.
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;Miguel
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> [1] <A HREF="http://pastebin.com/d51347024">http://pastebin.com/d51347024</A> (with 24h life)
</I>&gt;<i> [2] <A HREF="http://pastebin.com/d14244161">http://pastebin.com/d14244161</A> (with 24h life)
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160;(O-O)
</I>&gt;<i> ---oOO-(_)-OOo-----------------------------------------------------
</I>&gt;<i> &#160;Miguel TELLERIA DE ESTEBAN &#160; &#160; &#160; &#160; &#160; &#160; &#160; <A HREF="http://www.mtelleria.com">http://www.mtelleria.com</A>
</I>&gt;<i> &#160;Email: miguel at mtelleria.com &#160; &#160; &#160; &#160; &#160; Tel GSM: &#160;+34 650 801098
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;Tel Fix: &#160;+34 942 280174
</I>&gt;<i>
</I>&gt;<i> &#160;Miembro de <A HREF="http://www.linuca.org">http://www.linuca.org</A> &#160; &#160;Membre du <A HREF="http://www.bxlug.be">http://www.bxlug.be</A>
</I>&gt;<i> &#160;&#191;Usuario captivo o libre? &#160; &#160;<A HREF="http://www.obtengalinux.org/windows/">http://www.obtengalinux.org/windows/</A>
</I>&gt;<i> &#160;Free or &#160;captive user? &#160; &#160; &#160; &#160;<A HREF="http://www.getgnulinux.org/windows/">http://www.getgnulinux.org/windows/</A>
</I>&gt;<i> -------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Glade-users maillist &#160;- &#160;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">Glade-users at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">http://lists.ximian.com/mailman/listinfo/glade-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004740.html">[Glade-users] Unable to automatically connect signal handlers with integer arguments
</A></li>
	<LI>Next message: <A HREF="004742.html">[Glade-users] Glade re-branched stable as gnome-2-28
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4741">[ date ]</a>
              <a href="thread.html#4741">[ thread ]</a>
              <a href="subject.html#4741">[ subject ]</a>
              <a href="author.html#4741">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
