<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] uni- versus multi-threaded gtk
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20uni-%20versus%20multi-threaded%20gtk&In-Reply-To=1309024904.61811.YahooMailClassic%40web112502.mail.gq1.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005324.html">
   <LINK REL="Next"  HREF="005326.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] uni- versus multi-threaded gtk</H1>
    <B>Alexey</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20uni-%20versus%20multi-threaded%20gtk&In-Reply-To=1309024904.61811.YahooMailClassic%40web112502.mail.gq1.yahoo.com"
       TITLE="[Glade-users] uni- versus multi-threaded gtk">virtualex at linuxoid.net
       </A><BR>
    <I>Sat Jun 25 23:48:30 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005324.html">[Glade-users] uni- versus multi-threaded gtk
</A></li>
        <LI>Next message: <A HREF="005326.html">[Glade-users] uni- versus multi-threaded gtk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5325">[ date ]</a>
              <a href="thread.html#5325">[ thread ]</a>
              <a href="subject.html#5325">[ subject ]</a>
              <a href="author.html#5325">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 2011-06-25 at 11:01 -0700, David Buchan wrote:
&gt;<i> // main calculation loop
</I>&gt;<i> while (flag == 0) {
</I>&gt;<i>   make some heavy duty calculations;
</I>&gt;<i> 
</I>&gt;<i> // Check if the user has clicked any buttons (e.g., the STOP button)
</I>&gt;<i>     while (gtk_events_pending()) {
</I>&gt;<i>       gtk_main_iteration();      // let the main gtk loop deal with it
</I>&gt;<i>     }
</I>&gt;<i>   carry on with more ridiculously heavy duty calculations;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> The way I set it up, if the user clicks the STOP button, a callback is
</I>&gt;<i> executed which sets the flag to zero (flag = 0). The main calculation
</I>&gt;<i> while-loop then ends peacefully.
</I>
It's not the preferred way to do it. The preferred way is to replace
your loop with an idle function which is called repeatedly whenever
there's no other events are to be processed. You use g_idle_add() to add
the function to the main loop and the main loop takes care of all the
necessary checks. All you have to do in the function is returning TRUE
until the job is done and finally return FALSE to stop the function
being called. To cancel the job by the user request you'd use
g_source_remove() in the appropriate callback.

The approach you described is acceptable only for porting some old code
relying on polling user input within some complex loop which is too
burdensome to untangle. In general, unless you do some low level stuff,
if you feel the need to poll for events you probably doing something
wrong, cause it is the main loop job to decide when and what to process.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005324.html">[Glade-users] uni- versus multi-threaded gtk
</A></li>
	<LI>Next message: <A HREF="005326.html">[Glade-users] uni- versus multi-threaded gtk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5325">[ date ]</a>
              <a href="thread.html#5325">[ thread ]</a>
              <a href="subject.html#5325">[ subject ]</a>
              <a href="author.html#5325">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
