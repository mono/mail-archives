<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] compiling flags (gtk2 --&gt; gtk3)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20compiling%20flags%20%28gtk2%20--%3E%20gtk3%29&In-Reply-To=1319418010.67798.YahooMailNeo%40web112506.mail.gq1.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005407.html">
   <LINK REL="Next"  HREF="005409.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] compiling flags (gtk2 --&gt; gtk3)</H1>
    <B>Tristan Van Berkom</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20compiling%20flags%20%28gtk2%20--%3E%20gtk3%29&In-Reply-To=1319418010.67798.YahooMailNeo%40web112506.mail.gq1.yahoo.com"
       TITLE="[Glade-users] compiling flags (gtk2 --&gt; gtk3)">tristanvb at openismus.com
       </A><BR>
    <I>Mon Oct 24 03:04:00 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005407.html">[Glade-users] compiling flags (gtk2 --&gt; gtk3)
</A></li>
        <LI>Next message: <A HREF="005409.html">[Glade-users] Installing the windows version of glade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5408">[ date ]</a>
              <a href="thread.html#5408">[ thread ]</a>
              <a href="subject.html#5408">[ subject ]</a>
              <a href="author.html#5408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2011-10-23 at 18:00 -0700, David Buchan wrote:
&gt;<i> Oh my gosh. I'm going to sound like an idiot here.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Take g_malo0 () as an example.
</I>&gt;<i> Am I correct is understanding that functions like g_malloc0() no
</I>&gt;<i> longer exist and there is a new
</I>&gt;<i> function in it's place for gtk+ 3? Or are thing done in a different
</I>&gt;<i> way?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I looked at the section discussing converting your apps to gtk+3, but
</I>&gt;<i> i didn't see anything about
</I>&gt;<i> new functions for malloc &amp; friends.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I got scared and installed libgtk2.0-dev, and went back to my original
</I>&gt;<i> makefile,  but I still can't compile.
</I>&gt;<i> I get all the same errors. This is scaring me, as it was fine for 6
</I>&gt;<i> months, and now it seems I can't even compile
</I>&gt;<i> with GTK2.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Can you provide more guidance? Is there a cross-reference of 2 versus
</I>&gt;<i> 3 or something.
</I>
Oh my, of course there is a porting guide:
   <A HREF="http://developer.gnome.org/gtk3/3.2/gtk-migrating-2-to-3.html">http://developer.gnome.org/gtk3/3.2/gtk-migrating-2-to-3.html</A>

Sorry for the confusion, you should really be posting to a GTK+
list (gtk-list or gtk-app-devel-list) for issues you have with
porting your GTK+ app (you will get a faster response there because
you are on topic and there are much more users).

This list is more about using the Glade tool, but I'm happy to answer
your questions when I have time.

Cheers,
    -Tristan

&gt;<i> I'm completely bamboozled.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Dave
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i> From: Tristan Van Berkom &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">tristanvb at openismus.com</A>&gt;
</I>&gt;<i> To: David Buchan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">pdbuchan at yahoo.com</A>&gt;
</I>&gt;<i> Cc: Glade List &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">glade-users at lists.ximian.com</A>&gt;
</I>&gt;<i> Sent: Saturday, October 22, 2011 10:20 PM
</I>&gt;<i> Subject: Re: [Glade-users] compiling flags (gtk2 --&gt; gtk3)
</I>&gt;<i> 
</I>&gt;<i> On Sat, 2011-10-22 at 19:07 -0700, David Buchan wrote:
</I>&gt;<i> &gt; Hi guys,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I did indeed have -Wall. All compiler options are:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; CC      = gcc
</I>&gt;<i> &gt; CCFLAGS = `pkg-config --cflags gtk+-3.0 gmodule-2.0`
</I>&gt;<i> &gt; LIBS    = `pkg-config --libs  gtk+-3.0 gmodule-2.0`
</I>&gt;<i> &gt; DEBUG  = -Wall -g
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I only gave a sample of the error messages.
</I>&gt;<i> &gt; I went through them all and they're all like the ones below, except
</I>&gt;<i> at
</I>&gt;<i> &gt; the end, where is says:
</I>&gt;<i> 
</I>&gt;<i> Right, usually though, you dont care about the linker error.
</I>&gt;<i> 
</I>&gt;<i> ... until you've fixed all the compiler warnings mentioning
</I>&gt;<i> unresolved symbols...
</I>&gt;<i> 
</I>&gt;<i> You will be more interested in the compiler warnings because
</I>&gt;<i> they will tell you exactly where in your source code that you
</I>&gt;<i> are mentioning missing symbols such as 'g_threads_got_initialized'
</I>&gt;<i> 
</I>&gt;<i> ... while you go ahead and modify your source to use new and
</I>&gt;<i> updated apis, after fixing those compiler warnings... you
</I>&gt;<i> should not get the linker error anymore.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i>       -Tristan
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; collect2: ld returned 1 exit status
</I>&gt;<i> &gt; make: *** [x] Error 1
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i> &gt; From: Tristan Van Berkom &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">tristanvb at openismus.com</A>&gt;
</I>&gt;<i> &gt; To: David Buchan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">pdbuchan at yahoo.com</A>&gt;
</I>&gt;<i> &gt; Cc: Glade List &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">glade-users at lists.ximian.com</A>&gt;
</I>&gt;<i> &gt; Sent: Saturday, October 22, 2011 9:35 PM
</I>&gt;<i> &gt; Subject: Re: [Glade-users] compiling flags (gtk2 --&gt; gtk3)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On Sat, 2011-10-22 at 17:47 -0700, David Buchan wrote:
</I>&gt;<i> &gt; &gt; I recently formatted my drive and installed the latest Ubuntu
</I>&gt;<i> &gt; &gt; distribution of glade
</I>&gt;<i> &gt; &gt; and I installed libgtk-3-dev.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; In my make file, I used to have:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; CCFLAGS = `pkg-config --cflags gtk+-2.0 gmodule-2.0`
</I>&gt;<i> &gt; &gt; LIBS    = `pkg-config --libs  gtk+-2.0 gmodule-2.0`
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I've changed it to:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; CCFLAGS = `pkg-config --cflags gtk+-3.0 gmodule-2.0`
</I>&gt;<i> &gt; &gt; LIBS    = `pkg-config --libs  gtk+-3.0 gmodule-2.0`
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I left the gmodule as 2.0, as it couldn't find 3.0
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I made no changed to my source code.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; It compiles but won't link. I bombs with tons of errors such as:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; /x.c:43: undefined reference to `g_threads_got_initialized'
</I>&gt;<i> &gt; &gt; /x.c:44: undefined reference to `g_thread_init'
</I>&gt;<i> &gt; &gt; /x.c:46: undefined reference to `gtk_init'
</I>&gt;<i> &gt; &gt; /x.c:49: undefined reference to `g_malloc0'
</I>&gt;<i> &gt; &gt; etc etc...
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; What am I doing wrong?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Adding -Wall would be a good start.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Any tips would be appreciated.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Dave
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Glade-users maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">Glade-users at lists.ximian.com</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">http://lists.ximian.com/mailman/listinfo/glade-users</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005407.html">[Glade-users] compiling flags (gtk2 --&gt; gtk3)
</A></li>
	<LI>Next message: <A HREF="005409.html">[Glade-users] Installing the windows version of glade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5408">[ date ]</a>
              <a href="thread.html#5408">[ thread ]</a>
              <a href="subject.html#5408">[ subject ]</a>
              <a href="author.html#5408">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
