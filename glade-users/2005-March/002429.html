<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] libglademm and DrawingArea
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mike%40kleibi.de">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002428.html">
   <LINK REL="Next"  HREF="002430.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] libglademm and DrawingArea
   </H1>
    <B>Michael Kleiber
    </B> 
    <A HREF="mailto:mike%40kleibi.de"
       TITLE="[Glade-users] libglademm and DrawingArea">mike@kleibi.de
       </A><BR>
    <I>Sat, 05 Mar 2005 13:08:19 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="002428.html">[Glade-users] libglade: cut/copy/paste menu
</A></li>
        <LI> Next message: <A HREF="002430.html">[Glade-users] libglademm and DrawingArea
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2429">[ date ]</a>
              <a href="thread.html#2429">[ thread ]</a>
              <a href="subject.html#2429">[ subject ]</a>
              <a href="author.html#2429">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I did my first steps with Glade and libglademm respektively but now I am 
stuck with the DrawingArea.

I get my derived drawing area widget like so:
   m_refGlade-&gt;get_widget_derived(&quot;drawingarea&quot;, m_pDrawingArea);
which seems to work fine, as the proportions from the Glade XML file are 
respected. (I set the widget to 200x200 size - the window is resized to 
that)

Now I wanted to draw lines and therefore overwrote the expose event with:
bool GCurveDrawingArea::on_expose_event(GdkEventExpose* event)
{
   // This is where we draw on the window
   Glib::RefPtr&lt;Gdk::Window&gt; window = get_window();
   window-&gt;clear();
   window-&gt;draw_line(gc_, 1, 1, 100, 100);
   std::cout &lt;&lt; &quot;Drawing Area exposed!&quot; &lt;&lt; std::endl;
   return true;
}

which I basically took from the gtkmm docs about the drawing area. This 
on the other hand does give me:
  (gcurve:29715): Gdk-CRITICAL **: file gdkdraw.c: line 370 
(gdk_draw_line): assertion `gc != NULL' failed
   Drawing Area exposed!

So why is my graphics context = NULL although I implemented the 
on_realize function just as in the tutorial?:
void GCurveDrawingArea::on_realize()
{
   // We need to call the base on_realize()
   Gtk::DrawingArea::on_realize();

   // Now we can allocate any additional resources we need
   Glib::RefPtr&lt;Gdk::Window&gt; window = get_window();
   gc_ = Gdk::GC::create(window);
   window-&gt;set_background(red_);
   window-&gt;clear();
   gc_-&gt;set_foreground(blue_);
   std::cout &lt;&lt; &quot;Drawing Area realized!&quot; &lt;&lt; std::endl;
}


I have never debugged a C++ programm so I am lost. What should I do? Or 
is there maybe a better way to accomplish drawing?

PS: The example from gtkmm (without glade) works just fine

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002428.html">[Glade-users] libglade: cut/copy/paste menu
</A></li>
	<LI> Next message: <A HREF="002430.html">[Glade-users] libglademm and DrawingArea
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2429">[ date ]</a>
              <a href="thread.html#2429">[ thread ]</a>
              <a href="subject.html#2429">[ subject ]</a>
              <a href="author.html#2429">[ author ]</a>
         </LI>
       </UL>
</body></html>
