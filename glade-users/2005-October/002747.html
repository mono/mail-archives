<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] Help with textview
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20Help%20with%20textview&In-Reply-To=1128370615.3899.16.camel%40eternity">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002744.html">
   <LINK REL="Next"  HREF="002761.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] Help with textview</H1>
    <B>Nor Azhar Sa'ad</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20Help%20with%20textview&In-Reply-To=1128370615.3899.16.camel%40eternity"
       TITLE="[Glade-users] Help with textview">z3026109 at student.unsw.edu.au
       </A><BR>
    <I>Wed Oct  5 08:22:06 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002744.html">[Glade-users] Help with textview
</A></li>
        <LI>Next message: <A HREF="002761.html">[Glade-users] Help with textview
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2747">[ date ]</a>
              <a href="thread.html#2747">[ thread ]</a>
              <a href="subject.html#2747">[ subject ]</a>
              <a href="author.html#2747">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>HI. Thanks for the reply. I never used gdb before, and juz tried it. I don't
know how to really do that, as I am editing the file callbacks.c but in glade it
is all connected and is compiled by make. Can anyone give me a hand. Also, for
reference, I attached the function that I am having trouble with. 

P/s : the itoa function work opposite way to atoi.

void
on_button12_clicked                    (GtkButton       *button,
                                        gpointer         user_data)
{
	gint fline,row,col, i, j, k,cloc, collength,len,matrixD, noOfStates,rowNoA,
rowNoB, user_input, linecount, charcount;
	gchar A[MAXSIZE], B[MAXSIZE], matrixA[MAXSIZE][MAXSIZE], 
              matrixB[MAXSIZE],
matrixC[MAXSIZE],stringEntered[MAXENTRY][100],element[100]; 		
	gchar *text1,*text2,*text3,*text4,*text5,*text6,*text7, *matA; 	
	gchar c, l, rowC;//, *text;
	GtkTextBuffer *buffer1;
	GtkWidget *textview1;
	/*GtkWidget
*entry1,*entry2,*entry3,*entry4,*entry5,*entry6,*entry7,*entry8,*entry9,
*entry10,*entry11,*entry12,*entry13,*entry14,*entry15,*entry16,*entry17,
*entry18,*entry19,*entry20,*entry21,*/
	GtkWidget *entry[MAXENTRY];//, stringEntered[MAXENTRY];
	GtkWidget *spinbutton1,*spinbutton3,*spinbutton4;
*textview1;
	GtkTextTagTable *textTagTable;
	GtkTextIter *iter, *start_iter, *end_iter;

        entry[1]  = lookup_widget(GTK_WIDGET(button), &quot;entry1&quot;);
	entry[2]  = lookup_widget(GTK_WIDGET(button), &quot;entry2&quot;);
        entry[3]  = lookup_widget(GTK_WIDGET(button), &quot;entry3&quot;);
	entry[4]  = lookup_widget(GTK_WIDGET(button), &quot;entry4&quot;);
	entry[5]  = lookup_widget(GTK_WIDGET(button), &quot;entry5&quot;);
	entry[6]  = lookup_widget(GTK_WIDGET(button), &quot;entry6&quot;);
	entry[7]  = lookup_widget(GTK_WIDGET(button), &quot;entry7&quot;);
	entry[8]  = lookup_widget(GTK_WIDGET(button), &quot;entry8&quot;);
	entry[9]  = lookup_widget(GTK_WIDGET(button), &quot;entry9&quot;);
	entry[10] = lookup_widget(GTK_WIDGET(button), &quot;entry10&quot;);
	entry[11] = lookup_widget(GTK_WIDGET(button), &quot;entry11&quot;);
	entry[12] = lookup_widget(GTK_WIDGET(button), &quot;entry12&quot;);
	entry[13] = lookup_widget(GTK_WIDGET(button), &quot;entry13&quot;);
	entry[14] = lookup_widget(GTK_WIDGET(button), &quot;entry14&quot;);
	entry[15] = lookup_widget(GTK_WIDGET(button), &quot;entry15&quot;);
	entry[16] = lookup_widget(GTK_WIDGET(button), &quot;entry16&quot;);
	entry[17] = lookup_widget(GTK_WIDGET(button), &quot;entry17&quot;);
	entry[18] = lookup_widget(GTK_WIDGET(button), &quot;entry18&quot;);
	entry[19] = lookup_widget(GTK_WIDGET(button), &quot;entry19&quot;);
	entry[20] = lookup_widget(GTK_WIDGET(button), &quot;entry20&quot;);
	entry[21] = lookup_widget(GTK_WIDGET(button), &quot;entry21&quot;);
	spinbutton1 = lookup_widget(GTK_WIDGET(button), &quot;spinbutton1&quot;);
	spinbutton3 = lookup_widget(GTK_WIDGET(button), &quot;spinbutton3&quot;);
	spinbutton4 = lookup_widget(GTK_WIDGET(button), &quot;spinbutton4&quot;);
        textview1   = lookup_widget(GTK_WIDGET(button), &quot;textview1&quot;);

	linear.num_states = gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON
(spinbutton1));
	linear.user_input = gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON
(spinbutton3));
	linear.matrixD = gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON (spinbutton4));

	//get all the string input into each text entry
	
	len = strlen(gtk_entry_get_text(GTK_ENTRY(entry[i])));
	//cloc = len - (len-i);
	for(i=1; i&lt;=MAXENTRY; i++)
	{
		stringEntered[i][len] = gtk_entry_get_text(GTK_ENTRY(entry[i]));
	}

	//for matrixA
	
	for(k=12,i=1 ; k&lt;=21,i&lt;linear.num_states ; k++,i++)
	{
		//for(i=1; i&lt;=linear.num_states; i++)
		{
			for(j=0; j&lt;=len; j++)
			{
				c=(stringEntered[k][j]);
				if((c!= '\n') &amp;&amp; (c !=','))
				{
					linear.matrixA[i][j] = c;
			//		printf(&quot;%c&quot;, c);
				}
			//	printf(&quot;\n&quot;);
			}
		}
	}
	matA = linear.matrixA[i][j];
	
	//for matrixB
	for(k=2,i=1; k&lt;= 11,i&lt;=linear.num_states; k++, i++)
	{
		//for(i=1; i&lt;=linear.num_states; i++)
		//{
			
			linear.matrixB[i] = (stringEntered[i][len]);
			//printf(&quot;%c\n&quot;, linear.matrixB); 
		//}
	}
	
	//for matrixC
	//element[j]= (stringEntered[1][len]);
	for(k=(len-(len-1)); k&lt;=len; k++)
	{
		if(stringEntered[1][k] != ',')
		{
			i=1;
			linear.matrixC[i] = stringEntered[1][k];
			i++;
		}
	}
	
	//i = 1;
	/*for(j=0; j&lt;len; j++)
	{	
		if(element[j]!=',')
		{
			linear.matrixC[i] = element[j];
			//g_print(&quot;c&quot;,linear.matrixC[i]); 
			i++;
		}
	}*/	
	
	//If you don't call gtk_text_view_set_buffer() before using the text view, an
empty default buffer will be created for you. Get the buffer with
gtk_text_view_get_buffer().
		
	text1 = &quot;System : Linear System&quot;;
	text2 = &quot;Number of States : &quot;;
	text3 = &quot;Matrix A = &quot;;
	text4 = &quot;Matrix B = &quot;;
	text5 = &quot;Matrix C = &quot;;
	text6 = &quot;Matrix D = &quot;;
	text7 = &quot;User Input = &quot;;

	buffer1 = gtk_text_view_get_buffer(GTK_TEXT_VIEW (textview1));
	linecount = gtk_text_buffer_get_line_count(buffer1);
	charcount = gtk_text_buffer_get_char_count(buffer1);
	
	gtk_text_buffer_get_start_iter(buffer1,iter);

        //get the first line of the buffer
	fline = linecount-(linecount-1);
	
	gtk_text_buffer_set_text (buffer1, &quot;Hello, this is some text&quot;, -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(fline+1));
	gtk_text_buffer_insert(buffer1, iter, text1, -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(fline+2));
	gtk_text_buffer_insert(buffer1, iter, text2, -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(fline+3));
	gtk_text_buffer_insert(buffer1, iter, itoa(linear.num_states), -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(fline+4));
	gtk_text_buffer_insert(buffer1, iter, text3, -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(fline+5));
	gtk_text_buffer_insert(buffer1, iter, matA, -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(fline+6));
	gtk_text_buffer_insert(buffer1, iter, text4, -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(fline+7));
	gtk_text_buffer_insert(buffer1, iter, linear.matrixB, -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(fline+8));
	gtk_text_buffer_insert(buffer1, iter, text5, -1);

	gtk_text_buffer_get_iter_at_line(buffer1,iter,(charcount+9));
	gtk_text_buffer_insert(buffer1, iter, linear.matrixC, -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(charcount+10));
	gtk_text_buffer_insert(buffer1, iter, text6, -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(charcount+11));
	gtk_text_buffer_insert(buffer1, iter, itoa(linear.matrixD), -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(charcount+12));
	gtk_text_buffer_insert(buffer1, iter, text7, -1);
	gtk_text_buffer_get_iter_at_line(buffer1,iter,(charcount+13));
	gtk_text_buffer_insert(buffer1, iter, itoa(linear.user_input), -1);
	
}

I would really like to know what makes my textview not diplaying the buffer.
Thanks in advance.

Quoting Damon Chaplin &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">damon at karuna.uklinux.net</A>&gt;:

&gt;<i> On Tue, 2005-10-04 at 00:21 +1000, Nor Azhar Sa'ad wrote:
</I>&gt;<i> &gt; Hi everyone.
</I>&gt;<i> &gt; I am using glade with C language for my undergraduate thesis project.
</I>&gt;<i> Currently
</I>&gt;<i> &gt; im having trouble with textview, where Ive put the input supplied by the
</I>&gt;<i> user
</I>&gt;<i> &gt; into a buffer and try to display it in the text view. However, the GUI
</I>&gt;<i> window
</I>&gt;<i> &gt; was automatically closed and I got the msg &quot;Segmentation Fault&quot; whenever
</I>&gt;<i> the
</I>&gt;<i> &gt; button that supposed to generate the response was clicked. Can anyone give
</I>&gt;<i> me a
</I>&gt;<i> &gt; hand on this? Also, I only found 3 tutorials on using glade from the
</I>&gt;<i> internet.
</I>&gt;<i> &gt; Is there anyway i can find more of those, particularly those with sample
</I>&gt;<i> using
</I>&gt;<i> &gt; textview?
</I>&gt;<i> 
</I>&gt;<i> Have you tried running it in gdb? You can then see where it crashed.
</I>&gt;<i>   Run 'gdb &lt;application-name&gt;',
</I>&gt;<i>   type 'r' to run the application,
</I>&gt;<i>   click the button to crash the application
</I>&gt;<i>   type 'bt' to get a stack trace.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> You could post the relevant code here, and someone will probably spot
</I>&gt;<i> the mistake.
</I>&gt;<i> 
</I>&gt;<i> Damon
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>

Regards,
Nor Azhar Sa'ad
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002744.html">[Glade-users] Help with textview
</A></li>
	<LI>Next message: <A HREF="002761.html">[Glade-users] Help with textview
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2747">[ date ]</a>
              <a href="thread.html#2747">[ thread ]</a>
              <a href="subject.html#2747">[ subject ]</a>
              <a href="author.html#2747">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
