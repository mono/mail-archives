<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] reparenting a GtkDrawingArea with OpenGl
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20reparenting%20a%20GtkDrawingArea%20with%20OpenGl&In-Reply-To=560259cb0905151342m46623132nf0e874f8344acd4b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004451.html">
   <LINK REL="Next"  HREF="004452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] reparenting a GtkDrawingArea with OpenGl</H1>
    <B>Jeff Eberl</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20reparenting%20a%20GtkDrawingArea%20with%20OpenGl&In-Reply-To=560259cb0905151342m46623132nf0e874f8344acd4b%40mail.gmail.com"
       TITLE="[Glade-users] reparenting a GtkDrawingArea with OpenGl">jeffeb3 at gmail.com
       </A><BR>
    <I>Fri May 15 16:50:54 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004451.html">[Glade-users] reparenting a GtkDrawingArea with OpenGl
</A></li>
        <LI>Next message: <A HREF="004452.html">[Glade-users] reparenting a GtkDrawingArea with OpenGl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4453">[ date ]</a>
              <a href="thread.html#4453">[ thread ]</a>
              <a href="subject.html#4453">[ subject ]</a>
              <a href="author.html#4453">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Both windows need to be displayed, but they swap positions when the user
wants.  The left box is a lot bigger, so it's a way to change the focus from
the map to the picture. I've thought of a couple of work arounds:

1) I could completely destroy, and redraw the object, but that seems like
it's a waste, and I'd have to cache the information that's being drawn in a
second place.

2) I could create two copies of each, but them in vbox's and then just
change which one is hidden. So at startup the left map and right pic are not
hidden, and then when the user switches, the right map and left pic are not
hidden.  Seems like even more of a waste.

On Fri, May 15, 2009 at 2:42 PM, Tristan Van Berkom &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">tristan.van.berkom at gmail.com</A>&gt; wrote:

&gt;<i> Out of curiosity, does it work if you use a notebook parent with hidden
</I>&gt;<i> tabs ?
</I>&gt;<i> the notebook is slightly different as it remaps the child widgets and
</I>&gt;<i> realizes
</I>&gt;<i> them once, only careful you may get bitten by the fact that the
</I>&gt;<i> invisible notebook
</I>&gt;<i> pages are never realized/mapped until shown.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>         -Tristan
</I>&gt;<i>
</I>&gt;<i> On Fri, May 15, 2009 at 4:01 PM, Jeff Eberl &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">jeffeb3 at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; I have  a window with two GtkDrawingArea's.  One is a map and one is a
</I>&gt;<i> &gt; picture, I'm trying to swap the two windows with the click of a button.
</I>&gt;<i> &gt; Surrounding each drawing is a bunch of buttons and things.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This is how I reparent them:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; gtk_widget_ref(map_widget);
</I>&gt;<i> &gt; gtk_widget_ref(pic_widget);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; gtk_container_remove(left_container, map_widget);
</I>&gt;<i> &gt; gtk_container_remove(right_container, pic_widget);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; gtk_container_add(left_container, pic_widget);
</I>&gt;<i> &gt; gtk_container_add(right_container, map_widget);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; gtk_widget_unref(map_widget);
</I>&gt;<i> &gt; gtk_widget_unref(pic_widget);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The buttons, the boxes, and everything in the widgets swaps out, but the
</I>&gt;<i> &gt; next time I try to draw in either of them, the gdk_gl_drawable_gl_begin
</I>&gt;<i> &gt; fails:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; GdkGKExt-CRITICAL **: gdk_gl_window_impl_x11_make_context_current:
</I>&gt;<i> assertion
</I>&gt;<i> &gt; 'GDK_IS_GL_CONTEXT_IMPL_X11 (glcontext)' failed
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So, that's a bummer.  I didn't write the code I'm using to instantiate
</I>&gt;<i> the
</I>&gt;<i> &gt; widgets, or draw the pic/map.  I'm wondering if maybe the problem is that
</I>&gt;<i> &gt; the &quot;realize&quot; event gets called twice, but all the gdk setup stuff is
</I>&gt;<i> &gt; actually in a different method, one that doesn't get called twice.  The
</I>&gt;<i> &gt; realize callback doesn't really have anything in it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Any help would be appreciated.  I'm running in circles.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Jeff
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Glade-users maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">Glade-users at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">http://lists.ximian.com/mailman/listinfo/glade-users</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/glade-users/attachments/20090515/12e9428d/attachment.html">http://lists.ximian.com/pipermail/glade-users/attachments/20090515/12e9428d/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004451.html">[Glade-users] reparenting a GtkDrawingArea with OpenGl
</A></li>
	<LI>Next message: <A HREF="004452.html">[Glade-users] reparenting a GtkDrawingArea with OpenGl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4453">[ date ]</a>
              <a href="thread.html#4453">[ thread ]</a>
              <a href="subject.html#4453">[ subject ]</a>
              <a href="author.html#4453">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
