<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] Button only receiving input after leaving &amp;	re-entering button
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20Button%20only%20receiving%20input%20after%20leaving%20%26%0A%09re-entering%20button&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004397.html">
   <LINK REL="Next"  HREF="004399.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] Button only receiving input after leaving &amp;	re-entering button</H1>
    <B>RNG</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20Button%20only%20receiving%20input%20after%20leaving%20%26%0A%09re-entering%20button&In-Reply-To="
       TITLE="[Glade-users] Button only receiving input after leaving &amp;	re-entering button">rgasch at gmail.com
       </A><BR>
    <I>Mon May  4 03:31:04 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004397.html">[Glade-users] glade 3.6.3 and cellrenderercombo in a treeview
</A></li>
        <LI>Next message: <A HREF="004399.html">[Glade-users] Button only receiving input after leaving &amp;	re-entering button
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4398">[ date ]</a>
              <a href="thread.html#4398">[ thread ]</a>
              <a href="subject.html#4398">[ subject ]</a>
              <a href="author.html#4398">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have a window which contains a button created through the custom
function below:

GtkWidget*
create_randomize (gchar *widget_name, gchar *string1, gchar *string2,
                gint int1, gint int2)
{
  GtkWidget *button;
  GtkWidget *hbox;
  GtkWidget *label;
  GtkWidget *die;

  button = gtk_button_new ();
  hbox = gtk_hbox_new (FALSE, 0);
  die = create_pixmap (button, DATA_DIR &quot;/glade/die.xpm&quot;);
  label = gtk_label_new (_(&quot;Roll Again&quot;));
  gtk_box_pack_start (GTK_BOX (hbox), die, FALSE, FALSE, 0);
  gtk_box_pack_start (GTK_BOX (hbox), label, FALSE, FALSE, 0);
  gtk_container_add (GTK_CONTAINER (button), hbox);
  gtk_widget_show_all (button);

  gtk_signal_connect (GTK_OBJECT (button), &quot;clicked&quot;,
                      (GtkSignalFunc) on_randomize_clicked,
                      NULL);
  gtk_widget_show_all (button);
  return button;
}


The code handling a click on this button looks like this:

 void
on_randomize_clicked                   (GtkButton       *button,
                                        gpointer         user_data)
{
  MainState *main_state;
  GtkWidget *chooser_window;
  GtkWidget *main_window;
  gint       i;
  int        types;
  char *widgets[] = {
    &quot;t1&quot;, &quot;tt2&quot;, &quot;t3&quot;, &quot;t4&quot;, &quot;tt5&quot;, &quot;t6&quot;, &quot;t7&quot;, &quot;t8&quot;, &quot;tt9&quot;, NULL };

  chooser_window = lookup_toplevel (GTK_WIDGET (button));
  main_window = lookup_data (chooser_window, &quot;data_parent&quot;);
  main_state = lookup_data (main_window, &quot;data_state&quot;);

  gtk_object_ref (GTK_OBJECT (chooser_window));
  gtk_widget_set_sensitive (GTK_WIDGET (button), FALSE);

  /* make sure the type bitmap holds a valid value */
  if (user_data != NULL)
    types = *((int*)user_data);
  else
    types = 0;

  for (i = 0; widgets[i] != NULL; i++)
    {
      TTerrain  *terrain;
      GtkWidget *widget;
      GtkWidget *view;

      while (gtk_events_pending ())
        gtk_main_iteration ();

      /* Break out of loop if window is closed. */
      if (!GTK_WIDGET_REALIZED (chooser_window))
        break;

      widget = lookup_widget (GTK_WIDGET (button), widgets[i]);
      view = gtk_object_get_data (GTK_OBJECT (widget), &quot;view&quot;);

      terrain = t_terrain_generate_random (main_state-&gt;default_size,
main_state-&gt;genfactor, main_state-&gt;gentypes);
      t_terrain_view_set_terrain (T_TERRAIN_VIEW (view), terrain);
    }

  gtk_widget_set_sensitive (GTK_WIDGET (button), TRUE);
  gtk_object_unref (GTK_OBJECT (chooser_window));
}


This works but the problem is that when the randomization process
finishes and the mouse is still on the randomize button, the randomize
button seems active (ie: it is not grayed out) but clicking on the
button does not result in any actions. When I move the mouse out of
the button and then again into the button, then clicks are once again
received and properly processed. It seems that I am not setting some
state correctly, but I don't know what I would have to do in order to
fix this.

Any ideas would be much appreciated.

Greetings/Thanks
Robert
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004397.html">[Glade-users] glade 3.6.3 and cellrenderercombo in a treeview
</A></li>
	<LI>Next message: <A HREF="004399.html">[Glade-users] Button only receiving input after leaving &amp;	re-entering button
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4398">[ date ]</a>
              <a href="thread.html#4398">[ thread ]</a>
              <a href="subject.html#4398">[ subject ]</a>
              <a href="author.html#4398">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
