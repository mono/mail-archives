<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] adding custom widgets written with Gtkmm
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20adding%20custom%20widgets%20written%20with%20Gtkmm&In-Reply-To=560259cb0809201814x5fcbc2cbl398087e21acf51c9%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004004.html">
   <LINK REL="Next"  HREF="004006.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] adding custom widgets written with Gtkmm</H1>
    <B>Tristan Wibberley</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20adding%20custom%20widgets%20written%20with%20Gtkmm&In-Reply-To=560259cb0809201814x5fcbc2cbl398087e21acf51c9%40mail.gmail.com"
       TITLE="[Glade-users] adding custom widgets written with Gtkmm">tristan at wibberley.org
       </A><BR>
    <I>Sun Sep 21 06:36:18 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004004.html">[Glade-users] adding custom widgets written with Gtkmm
</A></li>
        <LI>Next message: <A HREF="004006.html">[Glade-users] adding custom widgets written with Gtkmm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4005">[ date ]</a>
              <a href="thread.html#4005">[ thread ]</a>
              <a href="subject.html#4005">[ subject ]</a>
              <a href="author.html#4005">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 2008-09-20 at 21:14 -0400, Tristan Van Berkom wrote:
&gt;<i> On Sat, Sep 20, 2008 at 8:37 PM, Tristan Wibberley
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">tristan at wibberley.org</A>&gt; wrote:
</I>&gt;<i> &gt; On Sat, 2008-09-20 at 20:16 -0400, Tristan Van Berkom wrote:
</I>&gt;<i> &gt;&gt; sure, looks like its worth a try, I wonder if its harmfull at all to
</I>&gt;<i> &gt;&gt; call gtk_init()
</I>&gt;<i> &gt;&gt; twice...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; hmm. I think I've been barking up the wrong tree, my &quot;init
</I>&gt;<i> &gt; function&quot; (ie, my constructor) is not being called and nor is my
</I>&gt;<i> &gt; on_realize function.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Does glade-3 create an instance by using the
</I>&gt;<i> &gt; gtkmm___custom_object_mywidget_new() function? Because that is not being
</I>&gt;<i> &gt; called in my case and if it /were/ called then everything would work, I
</I>&gt;<i> &gt; think.
</I>&gt;<i> 
</I>&gt;<i> In the xml catalog file that you supply to glade, you are allowed
</I>&gt;<i> to specify a &quot;init-function&quot; argument (the gnome catalog does that
</I>&gt;<i> to register its icons at startup, also the python support plugin to
</I>&gt;<i> initialize the interpretor).
</I>
I've used that and successfully called the Gtkmm initialization routine.


&gt;<i> Double check the api docs at <A HREF="http://glade.gnome.org/docs,">http://glade.gnome.org/docs,</A> do
</I>&gt;<i> you want your type to be written to the glade file as &quot;gtkmm_MyObjectType&quot; or
</I>&gt;<i> should it be written out as &quot;MyObjectType&quot; (not sure how this should
</I>&gt;<i> look from the GtkBuilder side of things..) ?
</I>
I have no idea. The object is apparently going to be of gtype
&quot;gtkmm__CustomObject_mywidget&quot; so the snakecase name will be
&quot;gtkmm___custom_object_mywidget&quot;.

glade is calling my init-function and my tests show that double init
does not break in a simple case.

glade is calling gtkmm___custom_object_mywidget_get_type

glade is not calling gtkmm___custom_object_mywidget_new but instead it
seems to be making the object in some other way that doesn't call the
object's constructor so doesn't set the NO_WINDOW flag or any other
necessary part.

I've looked into this, and it looks like a gtkmm widget cannot be
created with gtk_type_new, so I'm going to try writing a real gtk widget
adhering to the requirements of a gtk widget including support for
gtk_type_new, then make that widget have-a gtkmm custom widget which it
will forward all signals to. Hopefully that will work. I'm not sure how
to indicate that all signals should be forwarded but I'm hoping it can
be done.

-- 
Tristan

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004004.html">[Glade-users] adding custom widgets written with Gtkmm
</A></li>
	<LI>Next message: <A HREF="004006.html">[Glade-users] adding custom widgets written with Gtkmm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4005">[ date ]</a>
              <a href="thread.html#4005">[ thread ]</a>
              <a href="subject.html#4005">[ subject ]</a>
              <a href="author.html#4005">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
