<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] EXTERNAL: Re: Non-existing symbols are exported from libgladeui
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=Re%3A%20%5BGlade-users%5D%20EXTERNAL%3A%20Re%3A%20Non-existing%20symbols%20are%20exported%0A%20from%20libgladeui&In-Reply-To=%3C501FDC4C.2050907%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="005548.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] EXTERNAL: Re: Non-existing symbols are exported from libgladeui</H1>
    <B>LRN</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=Re%3A%20%5BGlade-users%5D%20EXTERNAL%3A%20Re%3A%20Non-existing%20symbols%20are%20exported%0A%20from%20libgladeui&In-Reply-To=%3C501FDC4C.2050907%40gmail.com%3E"
       TITLE="[Glade-users] EXTERNAL: Re: Non-existing symbols are exported from libgladeui">lrn1986 at gmail.com
       </A><BR>
    <I>Mon Aug  6 15:01:32 UTC 2012</I>
    <P><UL>
        
        <LI>Next message: <A HREF="005548.html">[Glade-users] aboutdialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5547">[ date ]</a>
              <a href="thread.html#5547">[ thread ]</a>
              <a href="subject.html#5547">[ subject ]</a>
              <a href="author.html#5547">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 25.07.2012 0:00, Damon Register wrote:
&gt;<i> On 5/18/2012 11:13 PM, Juan Pablo wrote:
</I>&gt;&gt;<i> It's been a long time since I do not compile it on windows. Can
</I>&gt;&gt;<i> you elaborate more about the compiler and libs you are using to
</I>&gt;&gt;<i> do the compilation?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Is it mingw/msys?
</I>&gt;<i> Now I am to the point where I am trying to build glade3-3.12.1 and
</I>&gt;<i> I am getting the same error.  I found this post but I don't see
</I>&gt;<i> that there was an answer.  Did I miss a message?  I don't know 
</I>&gt;<i> about the original poster, but yes, I am using mingw/msys
</I>&gt;<i> 
</I>Here's a set of patches against 3.12.1 that i've used last time i
needed to compile it.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (MingW32)
Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org/">http://enigmail.mozdev.org/</A>

iQEcBAEBAgAGBQJQH9xMAAoJEOs4Jb6SI2CwQT0IAN6bxst6mcDA6PFo/+DNY26F
tNT+LfJP2bP3SuC4nryFgyX63IjuTCyqGPrhYcl7n5+cZ489Q6rV1yoDI/K2H9Z5
wbL9+zit8fDoq2XmKUKeJa1LfiTzc+43oA+G1Ye07DvkfX0f1/nFkbmHgLHVWsn0
bHNBPSxx1IBaaEiqrKZdYd8GlBJxbwZNA9MWxLVFLR6uOl8Ll0AVQKIpMB+ycFAA
w9vKr2msNoV/zmT/SScAJ3SZABVI+UmWuyogtFjR7VRoc5v2FDccqqvgznZoNpUY
GTvrkeMW+DBpbzNlmVAv6K+vq7K6DWuPdg06mE+Z9wsp0eLbfFCiqohhS9nBuHY=
=MCgs
-----END PGP SIGNATURE-----
-------------- next part --------------
--- glade-3.12.1/src/Makefile.am.orig	2012-05-06 23:01:32 +0400
+++ glade-3.12.1/src/Makefile.am	2012-05-19 06:07:58 +0400
@@ -33,6 +33,6 @@
 endif
 
 glade-win32-res.o: glade.rc
-	$(WINDRES) $&lt; $@
+	$(WINDRES) -I $(top_srcdir)/data/icons $&lt; $@
 
 EXTRA_DIST = glade.rc.in
--- glade-3.12.1/src/glade.rc.in.orig	2012-03-27 01:24:39 +0400
+++ glade-3.12.1/src/glade.rc.in	2012-05-19 06:09:03 +0400
@@ -1,6 +1,6 @@
 #include &lt;winver.h&gt;                      
 
-GLADE_ICON		ICON		&quot;../data/icons/glade.ico&quot;
+GLADE_ICON		ICON		&quot;glade.ico&quot;
 
 VS_VERSION_INFO VERSIONINFO
   FILEVERSION     @GLADE_MAJOR_VERSION@<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">, at GLADE_MINOR_VERSION</A>@<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">, at GLADE_MICRO_VERSION</A>@,0
--- glade-3.12.1/gladeui/glade-previewer.rc.in.orig	2012-03-27 01:24:39 +0400
+++ glade-3.12.1/gladeui/glade-previewer.rc.in	2012-05-19 06:10:00 +0400
@@ -1,6 +1,6 @@
 #include &lt;winver.h&gt;                      
 
-GLADE_ICON		ICON		&quot;../data/icons/glade.ico&quot;
+GLADE_ICON		ICON		&quot;glade.ico&quot;
 
 VS_VERSION_INFO VERSIONINFO
   FILEVERSION     @GLADE_MAJOR_VERSION@<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">, at GLADE_MINOR_VERSION</A>@<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">, at GLADE_MICRO_VERSION</A>@,0
--- glade-3.12.1/gladeui/Makefile.am.orig	2012-05-19 05:55:03 +0400
+++ glade-3.12.1/gladeui/Makefile.am	2012-05-19 06:10:59 +0400
@@ -163,7 +163,7 @@
 endif
 
 gladeui-win32-res.o: gladeui.rc
-	$(WINDRES) $&lt; $@
+	$(WINDRES) -I $(top_srcdir)/data/icons $&lt; $@
 
 #
 # Marshaller generation
--- glade-3.12.1/gladeui/Makefile.am.orig	2012-05-19 06:11:47 +0400
+++ glade-3.12.1/gladeui/Makefile.am	2012-05-19 06:19:43 +0400
@@ -30,7 +30,7 @@
 endif
 
 glade-win32-res.o: glade-previewer.rc
-	$(WINDRES) $&lt; $@
+	$(WINDRES) -I $(top_srcdir)/data/icons $&lt; $@
 
 ## Rest of the UI ;)
 
-------------- next part --------------
--- glade-3.12.1/m4/introspection.m4.orig	2012-05-18 18:54:03 +0400
+++ glade-3.12.1/m4/introspection.m4	2011-06-10 19:36:50 +0400
@@ -0,0 +1,94 @@
+dnl -*- mode: autoconf -*-
+dnl Copyright 2009 Johan Dahlin
+dnl
+dnl This file is free software; the author(s) gives unlimited
+dnl permission to copy and/or distribute it, with or without
+dnl modifications, as long as this notice is preserved.
+dnl
+
+# serial 1
+
+m4_define([_GOBJECT_INTROSPECTION_CHECK_INTERNAL],
+[
+    AC_BEFORE([AC_PROG_LIBTOOL],[$0])dnl setup libtool first
+    AC_BEFORE([AM_PROG_LIBTOOL],[$0])dnl setup libtool first
+    AC_BEFORE([LT_INIT],[$0])dnl setup libtool first
+
+    dnl enable/disable introspection
+    m4_if([$2], [require],
+    [dnl
+        enable_introspection=yes
+    ],[dnl
+        AC_ARG_ENABLE(introspection,
+                  AS_HELP_STRING([--enable-introspection[=@&lt;:@no/auto/yes@:&gt;@]],
+                                 [Enable introspection for this build]),, 
+                                 [enable_introspection=auto])
+    ])dnl
+
+    AC_MSG_CHECKING([for gobject-introspection])
+
+    dnl presence/version checking
+    AS_CASE([$enable_introspection],
+    [no], [dnl
+        found_introspection=&quot;no (disabled, use --enable-introspection to enable)&quot;
+    ],dnl
+    [yes],[dnl
+        PKG_CHECK_EXISTS([gobject-introspection-1.0],,
+                         AC_MSG_ERROR([gobject-introspection-1.0 is not installed]))
+        PKG_CHECK_EXISTS([gobject-introspection-1.0 &gt;= $1],
+                         found_introspection=yes,
+                         AC_MSG_ERROR([You need to have gobject-introspection &gt;= $1 installed to build AC_PACKAGE_NAME]))
+    ],dnl
+    [auto],[dnl
+        PKG_CHECK_EXISTS([gobject-introspection-1.0 &gt;= $1], found_introspection=yes, found_introspection=no)
+    ],dnl
+    [dnl	
+        AC_MSG_ERROR([invalid argument passed to --enable-introspection, should be one of @&lt;:@no/auto/yes@:&gt;@])
+    ])dnl
+
+    AC_MSG_RESULT([$found_introspection])
+
+    INTROSPECTION_SCANNER=
+    INTROSPECTION_COMPILER=
+    INTROSPECTION_GENERATE=
+    INTROSPECTION_GIRDIR=
+    INTROSPECTION_TYPELIBDIR=
+    if test &quot;x$found_introspection&quot; = &quot;xyes&quot;; then
+       INTROSPECTION_SCANNER=`$PKG_CONFIG --variable=g_ir_scanner gobject-introspection-1.0`
+       INTROSPECTION_COMPILER=`$PKG_CONFIG --variable=g_ir_compiler gobject-introspection-1.0`
+       INTROSPECTION_GENERATE=`$PKG_CONFIG --variable=g_ir_generate gobject-introspection-1.0`
+       INTROSPECTION_GIRDIR=`$PKG_CONFIG --variable=girdir gobject-introspection-1.0`
+       INTROSPECTION_TYPELIBDIR=&quot;$($PKG_CONFIG --variable=typelibdir gobject-introspection-1.0)&quot;
+       INTROSPECTION_CFLAGS=`$PKG_CONFIG --cflags gobject-introspection-1.0`
+       INTROSPECTION_LIBS=`$PKG_CONFIG --libs gobject-introspection-1.0`
+       INTROSPECTION_MAKEFILE=`$PKG_CONFIG --variable=datadir gobject-introspection-1.0`/gobject-introspection-1.0/Makefile.introspection
+    fi
+    AC_SUBST(INTROSPECTION_SCANNER)
+    AC_SUBST(INTROSPECTION_COMPILER)
+    AC_SUBST(INTROSPECTION_GENERATE)
+    AC_SUBST(INTROSPECTION_GIRDIR)
+    AC_SUBST(INTROSPECTION_TYPELIBDIR)
+    AC_SUBST(INTROSPECTION_CFLAGS)
+    AC_SUBST(INTROSPECTION_LIBS)
+    AC_SUBST(INTROSPECTION_MAKEFILE)
+
+    AM_CONDITIONAL(HAVE_INTROSPECTION, test &quot;x$found_introspection&quot; = &quot;xyes&quot;)
+])
+
+
+dnl Usage:
+dnl   GOBJECT_INTROSPECTION_CHECK([minimum-g-i-version])
+
+AC_DEFUN([GOBJECT_INTROSPECTION_CHECK],
+[
+  _GOBJECT_INTROSPECTION_CHECK_INTERNAL([$1])
+])
+
+dnl Usage:
+dnl   GOBJECT_INTROSPECTION_REQUIRE([minimum-g-i-version])
+
+
+AC_DEFUN([GOBJECT_INTROSPECTION_REQUIRE],
+[
+  _GOBJECT_INTROSPECTION_CHECK_INTERNAL([$1], [require])
+])
-------------- next part --------------
--- glade-3.12.1/configure.ac.orig	2012-05-06 23:37:16 +0400
+++ glade-3.12.1/configure.ac	2012-05-18 18:57:34 +0400
@@ -76,10 +76,6 @@
 
 # ================================================================
 
-GNOME_DEBUG_CHECK
-GNOME_COMPILE_WARNINGS([maximum])
-GNOME_MAINTAINER_MODE_DEFINES
-
 # For the plugins, we don't use the warning flags defined by GNOME_COMPILE_WARNINGS.
 # These flags include -Wmissing-prototypes, which we prefer not to use.
 if test &quot;x$GCC&quot; = &quot;xyes&quot;; then
-------------- next part --------------
--- glade-3.12.1/gladeui/glade-app.h.orig	2012-05-06 23:01:32 +0400
+++ glade-3.12.1/gladeui/glade-app.h	2012-05-19 05:33:30 +0400
@@ -97,7 +97,6 @@
 /* package paths */
 const gchar       *glade_app_get_catalogs_dir     (void) G_GNUC_CONST;
 const gchar       *glade_app_get_modules_dir      (void) G_GNUC_CONST;
-const gchar       *glade_app_get_plugins_dir      (void) G_GNUC_CONST;
 const gchar       *glade_app_get_pixmaps_dir      (void) G_GNUC_CONST;
 const gchar       *glade_app_get_locale_dir       (void) G_GNUC_CONST;
 const gchar       *glade_app_get_bin_dir          (void) G_GNUC_CONST;
--- glade-3.12.1/gladeui/glade-catalog.h.orig	2012-05-06 23:01:32 +0400
+++ glade-3.12.1/gladeui/glade-catalog.h	2012-05-19 05:33:50 +0400
@@ -82,9 +82,6 @@
 
 const GList  *glade_widget_group_get_adaptors       (GladeWidgetGroup *group);
 
-gboolean      glade_catalog_supports_libglade       (GladeCatalog     *catalog);
-gboolean      glade_catalog_supports_gtkbuilder     (GladeCatalog     *catalog);
-
 G_END_DECLS
 
 #endif /* __GLADE_CATALOG_H__ */
--- glade-3.12.1/gladeui/glade-signal-editor.h.orig	2012-05-06 23:01:32 +0400
+++ glade-3.12.1/gladeui/glade-signal-editor.h	2012-05-19 05:33:20 +0400
@@ -42,7 +42,6 @@
 GType              glade_signal_editor_get_type (void) G_GNUC_CONST;
 
 GladeSignalEditor *glade_signal_editor_new                    (void);
-void               glade_signal_editor_construct_signals_list (GladeSignalEditor *editor);
 void               glade_signal_editor_load_widget            (GladeSignalEditor *editor, 
 							       GladeWidget       *widget);
 GladeWidget       *glade_signal_editor_get_widget             (GladeSignalEditor *editor);
-------------- next part --------------
--- glade-3.12.1/gladeui/Makefile.am.orig	2012-05-05 21:55:07 +0400
+++ glade-3.12.1/gladeui/Makefile.am	2012-05-19 05:34:41 +0400
@@ -158,32 +158,13 @@
 endif
 
 if NATIVE_WIN32
-libgladeui_2_la_LDFLAGS += -Wl,gladeui-win32-res.o -export-symbols gladeui.def
-libgladeui_2_la_DEPENDENCIES = gladeui-win32-res.o gladeui.def
+libgladeui_2_la_LDFLAGS += -Wl,gladeui-win32-res.o -export-symbols-regex '^glade_.+'
+libgladeui_2_la_DEPENDENCIES = gladeui-win32-res.o
 endif
 
 gladeui-win32-res.o: gladeui.rc
 	$(WINDRES) $&lt; $@
 
-# gladeui.def: auto-generated DEF file for linker input
-# The routines below will scan the header files and extracts symbol declarations.
-# The symbol 'custom_get_type' is added manually. It's naming deviates from
-# the pattern set by all other public symbols in the glade namespace.
-#
-gladeui.def: $(libgladeuiinclude_HEADERS)
-	@echo Generating $@
-	@(echo EXPORTS; \
-	echo 'custom_get_type'; \
-	(cd $(srcdir); cat $(libgladeuiinclude_HEADERS) || echo 'glade_ERROR ()' ) | \
-	grep -v -E '^# *include' | \
-	grep -v -E '^# *define' | \
-	grep -E '[^\(]glade_.*[[:space:]]+\(.*' | \
-	sed -e 's/[ 	]*(.*//' | \
-	sed -e 's/.*glade_/glade_/' | \
-	sort; \
-	) &gt;$@
-	@ ! grep -q glade_ERROR $@ || ($(RM) $@; false)
-
 #
 # Marshaller generation
 #
@@ -196,7 +177,7 @@
 	&amp;&amp; mv glade-marshallers-c.tmp glade-marshallers.c \
 	|| ( rm -f glade-marshallers-c.tmp &amp;&amp; exit 1 )
 
-CLEANFILES = $(BUILT_SOURCES) gladeui.def
+CLEANFILES = $(BUILT_SOURCES)
 
 #
 # Introspection generation
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="005548.html">[Glade-users] aboutdialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5547">[ date ]</a>
              <a href="thread.html#5547">[ thread ]</a>
              <a href="subject.html#5547">[ subject ]</a>
              <a href="author.html#5547">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
