<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] [gtkbuilder+glade3.4]The Child-window can not	creat again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20%5Bgtkbuilder%2Bglade3.4%5DThe%20Child-window%20can%20not%0A%09creat%20again&In-Reply-To=a4dfa4410904272343m9a07a7w5821e61ce20ee69f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004382.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] [gtkbuilder+glade3.4]The Child-window can not	creat again</H1>
    <B>Tristan Van Berkom</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20%5Bgtkbuilder%2Bglade3.4%5DThe%20Child-window%20can%20not%0A%09creat%20again&In-Reply-To=a4dfa4410904272343m9a07a7w5821e61ce20ee69f%40mail.gmail.com"
       TITLE="[Glade-users] [gtkbuilder+glade3.4]The Child-window can not	creat again">tristan.van.berkom at gmail.com
       </A><BR>
    <I>Tue Apr 28 10:55:11 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004382.html">[Glade-users] [gtkbuilder+glade3.4]The Child-window can not creat	again
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4383">[ date ]</a>
              <a href="thread.html#4383">[ thread ]</a>
              <a href="subject.html#4383">[ subject ]</a>
              <a href="author.html#4383">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>How did you end up using a GtkCList in GtkBuilder format ?

was it converted from an old libglade format Glade file ?
did you get the appropriate error/warning dialog when trying
to save the GtkCList in GtkBuilder format from Glade ?

GtkCList is deprecated and unsupported, for list views you are
expected to use treeviews etc.

Cheers,
       -Tristan

On Tue, Apr 28, 2009 at 2:43 AM, &#202;&#169;&#181;&#194;&#192;&#180;delai &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">wispernano at gmail.com</A>&gt; wrote:
&gt;<i> I wirte a sample application use GktBuilder + glade3. there are one
</I>&gt;<i> main-window(top level) and some other child-window (top level too, creat and
</I>&gt;<i> show when the menu item is actived, in my code it is named window_rank).
</I>&gt;<i> after close the child-window for first time, i click the menu item again.
</I>&gt;<i> But this child-window cannot be created and showed again. with many errors
</I>&gt;<i> or warming like this:
</I>&gt;<i>
</I>&gt;<i> (lsacs_gsecu:11866): GLib-GObject-WARNING **: invalid unclassed pointer in
</I>&gt;<i> cast to `GtkCList'
</I>&gt;<i>
</I>&gt;<i> (lsacs_gsecu:11866): Gtk-CRITICAL **: gtk_clist_append: assertion
</I>&gt;<i> `GTK_IS_CLIST (clist)' failed
</I>&gt;<i>
</I>&gt;<i> (lsacs_gsecu:11866): GLib-GObject-WARNING **: invalid unclassed pointer in
</I>&gt;<i> cast to `GtkCList'
</I>&gt;<i>
</I>&gt;<i> (lsacs_gsecu:11866): Gtk-CRITICAL **: gtk_clist_set_text: assertion
</I>&gt;<i> `GTK_IS_CLIST (clist)' failed
</I>&gt;<i>
</I>&gt;<i> (lsacs_gsecu:11866): GLib-GObject-WARNING **: invalid unclassed pointer in
</I>&gt;<i> cast to `GtkCList'
</I>&gt;<i>
</I>&gt;<i> ....
</I>&gt;<i>
</I>&gt;<i> i thinke when i destroy the child-window, these UI data are freed, so i
</I>&gt;<i> cannot use builder again.
</I>&gt;<i> some one tell me that i can hide the child-window instead of destroy it, but
</I>&gt;<i> it will bring many terrible problem specially when the window contain
</I>&gt;<i> treeview.
</I>&gt;<i> so, do anyone can tell me how can i do with that child-window, or tell me
</I>&gt;<i> where can i find some example which develop by gktbuilder+glade
</I>&gt;<i>
</I>&gt;<i> extremely grateful
</I>&gt;<i>
</I>&gt;<i> my code is here:
</I>&gt;<i>
</I>&gt;<i> main.c:
</I>&gt;<i>
</I>&gt;<i> #include &quot;gsecu.h&quot;
</I>&gt;<i> #define BUILDER_XML_FILE &quot;gsecu.xml&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> gboolean init_app (LsacsGsecu *editor);
</I>&gt;<i> int main (int argc, char *argv[])
</I>&gt;<i>
</I>&gt;<i> {
</I>&gt;<i>         LsacsGsecu *gsecu;
</I>&gt;<i>         gsecu = g_slice_new(LsacsGsecu);
</I>&gt;<i>
</I>&gt;<i>         gtk_init (&amp;argc, &amp;argv);
</I>&gt;<i>         if (init_app (gsecu) == FALSE) return 1; /* error loading UI */
</I>&gt;<i>
</I>&gt;<i>         gtk_widget_show(gsecu-&gt;window);
</I>&gt;<i>         gtk_main();
</I>&gt;<i>
</I>&gt;<i>         return 0;
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> gboolean init_app (LsacsGsecu *gsecu)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {
</I>&gt;<i>         GtkBuilder *builder;
</I>&gt;<i>         GError                  *err=NULL;
</I>&gt;<i>
</I>&gt;<i>         /* use GtkBuilder to build our interface from the XML file */
</I>&gt;<i>         builder = gtk_builder_new ();
</I>&gt;<i>
</I>&gt;<i>         if (gtk_builder_add_from_file (builder, BUILDER_XML_FILE, &amp;err) ==
</I>&gt;<i> 0)
</I>&gt;<i>
</I>&gt;<i>         {
</I>&gt;<i>                 error_message (err-&gt;message);
</I>&gt;<i>
</I>&gt;<i>                 g_error_free (err);
</I>&gt;<i>                 return FALSE;
</I>&gt;<i>
</I>&gt;<i>         }
</I>&gt;<i>
</I>&gt;<i>         /* get the widgets which will be referenced in callbacks */
</I>&gt;<i>
</I>&gt;<i>         gsecu-&gt;window = GTK_WIDGET (gtk_builder_get_object (builder,
</I>&gt;<i> &quot;window&quot;));
</I>&gt;<i>
</I>&gt;<i>         //&#179;&#245;&#202;&#188;&#187;&#175;&#176;&#178;&#200;&#171;&#181;&#200;&#188;&#182;
</I>&gt;<i>         gsecu-&gt;window_rank = GTK_WIDGET (gtk_builder_get_object (builder,
</I>&gt;<i> &quot;window_rank&quot;));
</I>&gt;<i>
</I>&gt;<i>         gsecu-&gt;clist_rank = GTK_WIDGET (gtk_builder_get_object (builder,
</I>&gt;<i> &quot;clist_rank&quot;));
</I>&gt;<i>
</I>&gt;<i>         gsecu-&gt;entry_rank = GTK_WIDGET (gtk_builder_get_object (builder,
</I>&gt;<i> &quot;entry_rank&quot;));
</I>&gt;<i>
</I>&gt;<i>         /* connect signals, passing our LsacsGsecu struct as user data */
</I>&gt;<i>         gtk_builder_connect_signals (builder, gsecu);
</I>&gt;<i>
</I>&gt;<i>         /* free memory used by GtkBuilder object */
</I>&gt;<i>         g_object_unref (G_OBJECT (builder));
</I>&gt;<i>
</I>&gt;<i>         return TRUE;
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> inittable.c:
</I>&gt;<i>
</I>&gt;<i> void on_initrank_activate (GtkObject *object, LsacsGsecu *gsecu)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {
</I>&gt;<i>         struct stat filebuf;
</I>&gt;<i>
</I>&gt;<i>         gchar *p_space = &quot; &quot;;
</I>&gt;<i>         int fd,ranknum;
</I>&gt;<i>
</I>&gt;<i>         int i;
</I>&gt;<i>         RANKNAME_SREC rankbuf;
</I>&gt;<i>         if((fd=open(LSACS_RANKNAME,O_RDWR|O_CREAT|O_APPEND))&lt;0)
</I>&gt;<i>
</I>&gt;<i>         {
</I>&gt;<i>                 OK_dialog(&quot;&#182;&#193;&#200;&#161;rankname&#206;&#196;&#188;&#254;&#179;&#246;&#180;&#237;&quot;, gsecu-&gt;window_rank);
</I>&gt;<i>
</I>&gt;<i>                 return;
</I>&gt;<i>         }
</I>&gt;<i>         fstat(fd,&amp;filebuf);
</I>&gt;<i>
</I>&gt;<i>         ranknum=(filebuf.st_size/(sizeof(RANKNAME_SREC)));
</I>&gt;<i>
</I>&gt;<i>         for(i=1;i&lt;=ranknum;i++)
</I>&gt;<i>
</I>&gt;<i>         {
</I>&gt;<i>                 gtk_clist_append(GTK_CLIST(gsecu-&gt;clist_rank), &amp;p_space);
</I>&gt;<i>
</I>&gt;<i>                 lseek(fd,(i-1)*sizeof(RANKNAME_SREC),SEEK_SET);
</I>&gt;<i>
</I>&gt;<i>                 read(fd,&amp;rankbuf,sizeof(RANKNAME_SREC));
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> gtk_clist_set_text(GTK_CLIST(gsecu-&gt;clist_rank),(i-1),0,rankbuf.rankname);
</I>&gt;<i>
</I>&gt;<i>         }
</I>&gt;<i>         close(fd);
</I>&gt;<i>         gtk_clist_set_column_width (GTK_CLIST (gsecu-&gt;clist_rank), 0, 270);
</I>&gt;<i>
</I>&gt;<i>         gtk_widget_show(gsecu-&gt;window_rank);
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> i have spended many many time to solve it, can some one help me !
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Glade-users maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">Glade-users at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">http://lists.ximian.com/mailman/listinfo/glade-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004382.html">[Glade-users] [gtkbuilder+glade3.4]The Child-window can not creat	again
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4383">[ date ]</a>
              <a href="thread.html#4383">[ thread ]</a>
              <a href="subject.html#4383">[ subject ]</a>
              <a href="author.html#4383">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
