<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] Generating classes, but no instantiation in glade--
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:khuisman%40nortelnetworks.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000588.html">
   <LINK REL="Next"  HREF="000590.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] Generating classes, but no instantiation in glade--
   </H1>
    <B>Ken Huisman
    </B> 
    <A HREF="mailto:khuisman%40nortelnetworks.com"
       TITLE="[Glade-users] Generating classes, but no instantiation in glade--">khuisman@nortelnetworks.com
       </A><BR>
    <I>Mon, 19 Mar 2001 18:17:27 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="000588.html">[Glade-users] Generating classes, but no instantiation in glade--
</A></li>
        <LI> Next message: <A HREF="000590.html">[Glade-users] Generating classes, but no instantiation in glade--
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#589">[ date ]</a>
              <a href="thread.html#589">[ thread ]</a>
              <a href="subject.html#589">[ subject ]</a>
              <a href="author.html#589">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Why not change your UI a bit and have each of the configurations
be a subtree on your tree and then on the right only show things
at the appropriate context, i.e.:

-USB Mouse          
  |
   - config 1

-USB Camera
  |
   - config 1
   - config 2


and then in your window on the right, if they
click on config 1 in the tree they would see the
config related info for config 1
and if they had clicked on the usb device they
would only see the usb level info

you could do the same with the endpoints.

this would make your window on the right side of your
screen much simpler, and the tree would do what a tree does
best - show the hierarchy of the data.

just a thought...would that work for you?

Ken


Ansel Sermersheim wrote:
&gt;<i> 
</I>&gt;<i> I've been getting up to speed on glade and glade-- by playing around
</I>&gt;<i> with writing a utility to enumerate the USB bus and display it
</I>&gt;<i> spiffily.  (I had some old C++ code sitting around that parses
</I>&gt;<i> /proc/bus/usb/devices under Linux).
</I>&gt;<i> 
</I>&gt;<i> I've run into a bit of a design difficulty.  I have a paned window.
</I>&gt;<i> On the left is a DeviceTree (derived from Tree), displaying the
</I>&gt;<i> current USB topology.  (same as e.g. windows device manager).  This is
</I>&gt;<i> easy - I had glade-- generate it as a seperate class, and wrote some
</I>&gt;<i> bridge code in the initialisation to populate it.
</I>&gt;<i> 
</I>&gt;<i> On the right, I have a DeviceFrame (derived from Frame), with Labels
</I>&gt;<i> inside it displaying data about the currently selected device.  Now it
</I>&gt;<i> gets tricky.  A single device may have one or more Configurations,
</I>&gt;<i> each of which has one or more Endpoints.  So, if I click on a simple
</I>&gt;<i> device, say, a mouse, I should see something like this:
</I>&gt;<i> 
</I>&gt;<i> +-USB Mouse------------+
</I>&gt;<i> | Vendor ID: xxxx      |
</I>&gt;<i> | Product ID: xxxx     |
</I>&gt;<i> | ...                  |
</I>&gt;<i> |                      |
</I>&gt;<i> | +-Config 1---------+ |
</I>&gt;<i> | | Power=11mA       | |
</I>&gt;<i> | |                  | |
</I>&gt;<i> | |+-Endpoint 1-----+| |
</I>&gt;<i> | || Type: xxxx     || |
</I>&gt;<i> | |+----------------+| |
</I>&gt;<i> | +------------------+ |
</I>&gt;<i> +----------------------+
</I>&gt;<i> 
</I>&gt;<i> Whereas, if I click on something like a USB Camera, I want something
</I>&gt;<i> more like this:
</I>&gt;<i> 
</I>&gt;<i> +-USB Camera-----------+
</I>&gt;<i> | Vendor ID: xxxx      |
</I>&gt;<i> | Product ID: xxxx     |
</I>&gt;<i> | ...                  |
</I>&gt;<i> |                      |
</I>&gt;<i> | +-Config 1---------+ |
</I>&gt;<i> | | Power=55mA       | |
</I>&gt;<i> | |                  | |
</I>&gt;<i> | |+-Endpoint 1-----+| |
</I>&gt;<i> | || Type: xxxx     || |
</I>&gt;<i> | |+----------------+| |
</I>&gt;<i> | |+-Endpoint 2-----+| |
</I>&gt;<i> | || Type: xxxx     || |
</I>&gt;<i> | |+----------------+| |
</I>&gt;<i> | +------------------+ |
</I>&gt;<i> | +-Config 2---------+ |
</I>&gt;<i> | | Power=15mA       | |
</I>&gt;<i> | |                  | |
</I>&gt;<i> | |+-Endpoint 1-----+| |
</I>&gt;<i> | || Type: xxxx     || |
</I>&gt;<i> | |+----------------+| |
</I>&gt;<i> | +------------------+ |
</I>&gt;<i> +----------------------+
</I>&gt;<i> 
</I>&gt;<i> A sensible way of doing this seems to be to create each level of
</I>&gt;<i> frames as a seperate class.  Give DeviceFrame a vector&lt;ConfigFrame *&gt;,
</I>&gt;<i> and ConfigFrame a vector&lt;EndpointFrame *&gt;, and have them dynamically
</I>&gt;<i> populate/prune these lists when a device is selected. (Obviously, each
</I>&gt;<i> of them will get an hbox as well to which the children will be added.)
</I>&gt;<i> 
</I>&gt;<i> (If there's a simpler, cleaner, more sensible way to do this, please
</I>&gt;<i> let me know.)
</I>&gt;<i> 
</I>&gt;<i> However, this doesn't work.  No matter what I try, I can't get glade--
</I>&gt;<i> to _not_ generate code that does e.g.
</I>&gt;<i> 
</I>&gt;<i> ConfigFrame * configframe;
</I>&gt;<i> configframe = manage(new ConfigFrame);
</I>&gt;<i> configframe-&gt;show();
</I>&gt;<i> 
</I>&gt;<i> in DeviceFrame_glade.cc thus leaving me with an undesired child that I
</I>&gt;<i> then have to destroy if I want to be able to add my own widgets in the
</I>&gt;<i> space.
</I>&gt;<i> 
</I>&gt;<i> I'm looking for a way to say 'Generate the class for this widget, but
</I>&gt;<i> do _not_ instantiate or reference it from the parent widget, because
</I>&gt;<i> I'll do it at runtime from derived-class code.'
</I>&gt;<i> 
</I>&gt;<i> The only way I can get this to stop is if I create a new top-level
</I>&gt;<i> window, and put the ConfigFrame in it.  Then since it is no longer a
</I>&gt;<i> child of the DeviceFrame, the DeviceFrame will not attempt to
</I>&gt;<i> instantiate one.  However, this is kind of clunky from a GUI design
</I>&gt;<i> standpoint.
</I>&gt;<i> 
</I>&gt;<i> This leads to two top-level windows that are never used, because they
</I>&gt;<i> only serve to give me somewhere other than the current window in which
</I>&gt;<i> to put a child window I want to generate classes for.  In this project
</I>&gt;<i> it's not too bad, because I've just got one main window &amp; an about
</I>&gt;<i> box, but in a larger application it could get very confusing.
</I>&gt;<i> 
</I>&gt;<i> If I were to try to add this to glade, where do I start looking?  I
</I>&gt;<i> assume I'll have to add support for generating the option tag in glade
</I>&gt;<i> proper, and have glade-- look for that tag and avoid generating the
</I>&gt;<i> corresponding code.  If someone could point me to the relevant bits of
</I>&gt;<i> code, I'd be most obliged.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> -Ansel
</I>&gt;<i> --
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Glade-users maillist  -  <A HREF="mailto:Glade-users@helixcode.com">Glade-users@helixcode.com</A>
</I>&gt;<i> <A HREF="http://lists.helixcode.com/mailman/listinfo/glade-users">http://lists.helixcode.com/mailman/listinfo/glade-users</A>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000588.html">[Glade-users] Generating classes, but no instantiation in glade--
</A></li>
	<LI> Next message: <A HREF="000590.html">[Glade-users] Generating classes, but no instantiation in glade--
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#589">[ date ]</a>
              <a href="thread.html#589">[ thread ]</a>
              <a href="subject.html#589">[ subject ]</a>
              <a href="author.html#589">[ author ]</a>
         </LI>
       </UL>
</body></html>
