<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] Closing a dialog window
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:kms%40passback.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002390.html">
   <LINK REL="Next"  HREF="002392.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] Closing a dialog window
   </H1>
    <B>Keith Sharp
    </B> 
    <A HREF="mailto:kms%40passback.co.uk"
       TITLE="[Glade-users] Closing a dialog window">kms@passback.co.uk
       </A><BR>
    <I>Sun, 30 Jan 2005 15:55:24 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="002390.html">[Glade-users] Closing a dialog window
</A></li>
        <LI> Next message: <A HREF="002392.html">[Glade-users] Closing a dialog window
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2391">[ date ]</a>
              <a href="thread.html#2391">[ thread ]</a>
              <a href="subject.html#2391">[ subject ]</a>
              <a href="author.html#2391">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2005-01-30 at 14:06 +0000, Chris Morrison wrote:
&gt;<i> On Sat, 2005-01-29 at 20:52 +0000, Keith Sharp wrote:
</I>&gt;<i> &gt; On Sat, 2005-01-29 at 12:34 +0000, Chris Morrison wrote:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I have placed the following code in the signal handler for the Close
</I>&gt;<i> &gt; &gt; button's click event.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; void on_closebutton_clicked(GtkButton *button, gpointer window_ptr)
</I>&gt;<i> &gt; &gt; {
</I>&gt;<i> &gt; &gt;   GtkDialog *window = GTK_DIALOG(window_ptr);
</I>&gt;<i> &gt; &gt;   gtk_widget_destroy(GTK_WIDGET(window));
</I>&gt;<i> &gt; &gt; }
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; However, when I click on the Close button nothing happens and the
</I>&gt;<i> &gt; &gt; following message is displayed in the terminal window.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; (my-program:5534): Gtk-CRITICAL **: file gtkwidget.c: line 1911
</I>&gt;<i> &gt; &gt; (gtk_widget_destroy): assertion `GTK_IS_WIDGET (widget)' failed
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 1) How are you connecting the callback, which you show above, to the
</I>&gt;<i> &gt; object and the signal?  I assume you have a call to g_signal_connect
</I>&gt;<i> &gt; somewhere in your code.  Can you show us some more of your code?
</I>&gt;<i> 
</I>&gt;<i> g_signal_connect ((gpointer) closebutton, &quot;clicked&quot;, G_CALLBACK
</I>&gt;<i> (on_closebutton_clicked), NULL);
</I>
The last parameter of this function is for extra data you want to pass
to the callback, in your case this would the pointer to your window.
You need to change this code to somethings like:

GtkDialog *dialog;

/* Create and setup dialog here */

g_signal_connect (closebutton, &quot;clicked&quot;, G_CALLBACK (on_closebutton_clicked), window);

This should now allow your callback to work as you expect.

&gt;<i> This was pasted from the interface.c file.
</I>
Using autogenerated code from GLADE is considered bad practise.  Can I
suggest you take a look at the GTK+ Tutorial:

		<A HREF="http://www.gtk.org/tutorial/">http://www.gtk.org/tutorial/</A>

which should give you a better understanding of how things work.

Keith.


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002390.html">[Glade-users] Closing a dialog window
</A></li>
	<LI> Next message: <A HREF="002392.html">[Glade-users] Closing a dialog window
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2391">[ date ]</a>
              <a href="thread.html#2391">[ thread ]</a>
              <a href="subject.html#2391">[ subject ]</a>
              <a href="author.html#2391">[ author ]</a>
         </LI>
       </UL>
</body></html>
