<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] practical question: apps locating glade file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:email%40ivanwong.info">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002308.html">
   <LINK REL="Next"  HREF="002310.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] practical question: apps locating glade file
   </H1>
    <B>Ivan Wong
    </B> 
    <A HREF="mailto:email%40ivanwong.info"
       TITLE="[Glade-users] practical question: apps locating glade file">email@ivanwong.info
       </A><BR>
    <I>Sat, 11 Dec 2004 01:51:41 +0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="002308.html">[Glade-users] practical question: apps locating glade file
</A></li>
        <LI> Next message: <A HREF="002310.html">[Glade-users] practical question: apps locating glade file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2309">[ date ]</a>
              <a href="thread.html#2309">[ thread ]</a>
              <a href="subject.html#2309">[ subject ]</a>
              <a href="author.html#2309">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Sort of OK, but it seems this method needs a recompile in order
</I>&gt;<i> to do a make install. On the other hand I can't think of a better
</I>&gt;<i> solution, and it seems to me that having glade_xml_new itself
</I>&gt;<i> do the directory searching for the given file inappropriate.
</I>um... how about this (a `make check` should work in both $srcdir and 
$srcdir/src):

/* main.c */
gchar *gladedir = GLADEDIR;

#ifdef HAVE_LIBPOPT
static struct poptOption options[] = {
     ......
     ......
	{ &quot;gladedir&quot;, '\0', POPT_ARG_STRING, &amp;gladedir, 0,
	  N_(&quot;the directory where glade xml files are placed.&quot;), NULL },
     ......
     ......
}

int main (int argc, char *argv[])
{
     gchar *filename;

     filename = g_build_filename (gladedir, &quot;galeon.glade&quot;, NULL);
     gladexml = glade_xml_new (filename, ...);
     g_free (filename);
     if (!gladexml)
         gladexml = glade_xml_new (GLADEDIR &quot;/galeon.glade&quot;, ...);
}



/* src/Makefile.am */

TESTS = test-galeon



/* src/test-galeon */

#!/bin/sh

test --gladedir=&quot;$srcdir/../ui&quot;



Rgrds,
Ivan.

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002308.html">[Glade-users] practical question: apps locating glade file
</A></li>
	<LI> Next message: <A HREF="002310.html">[Glade-users] practical question: apps locating glade file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2309">[ date ]</a>
              <a href="thread.html#2309">[ thread ]</a>
              <a href="subject.html#2309">[ subject ]</a>
              <a href="author.html#2309">[ author ]</a>
         </LI>
       </UL>
</body></html>
