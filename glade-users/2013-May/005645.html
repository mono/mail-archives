<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] Two newbie questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=Re%3A%20%5BGlade-users%5D%20Two%20newbie%20questions&In-Reply-To=%3CCAGUy9WJ-kKgoa0xL0wZgs7vT_vNZ8NA%2BCrmyEQhsu7MbvyW1Uw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005643.html">
   <LINK REL="Next"  HREF="005646.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] Two newbie questions</H1>
    <B>Tristan Van Berkom</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=Re%3A%20%5BGlade-users%5D%20Two%20newbie%20questions&In-Reply-To=%3CCAGUy9WJ-kKgoa0xL0wZgs7vT_vNZ8NA%2BCrmyEQhsu7MbvyW1Uw%40mail.gmail.com%3E"
       TITLE="[Glade-users] Two newbie questions">tristan.van.berkom at gmail.com
       </A><BR>
    <I>Thu May 16 09:25:28 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="005643.html">[Glade-users] Two newbie questions
</A></li>
        <LI>Next message: <A HREF="005646.html">[Glade-users] Two newbie questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5645">[ date ]</a>
              <a href="thread.html#5645">[ thread ]</a>
              <a href="subject.html#5645">[ subject ]</a>
              <a href="author.html#5645">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, May 16, 2013 at 6:10 PM, Carlos Franke
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">carlos_franke at taunusstein.net</A>&gt; wrote:
&gt;<i> Sorry for bringing this month-old thread up again. I just did not get to it
</I>&gt;<i> earlier. Anyway, here are my two cents.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ma Xiaojun wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. Where is the correct location to install .glade/.ui files with
</I>&gt;&gt;<i> regard to FHS or some freedesktop.org standards?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> and:
</I>&gt;<i>
</I>&gt;&gt;<i> On Sun, Apr 7, 2013 at 7:23 PM, Tristan Van Berkom
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">tristan.van.berkom at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; Rather, I would encourage you to use GResources to bind
</I>&gt;&gt;<i> &gt; the XML into your app or library and use
</I>&gt;&gt;<i> &gt; gtk_builder_add_from_resource().
</I>&gt;&gt;<i> &gt; (note that GResources allows for a compression option too).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is available since GTK+ 3.4, I'm on GTK+ 2.24 though.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> First, I am very grateful for the hint to GResources. I wonder if embedding
</I>&gt;<i> the glade files in the binaries would somehow allow for an easier way of UI
</I>&gt;<i> localisation (i. e. translation of strings). On the first glance it appears
</I>&gt;<i> that one would still have to maintain separate glade files for every
</I>&gt;<i> supported language, just that they wouldn't all have to be installed in the
</I>&gt;<i> file sytem, but in the executables (which might not be a good thing, as the
</I>&gt;<i> executables would grow bigger with every supported translation). I may be
</I>&gt;<i> missing something.
</I>
Indeed.

You don't need to maintain separate Glade files, you just simply mark the
strings as translatable in Glade (i.e. for all translatable strings, they
are marked for translation by default, you can control the context/comments
etc in a dialog which is accessible in the text entry, i.e. try GtkLabel:text
property for example).

To set the translation domain, use gtk_builder_set_translation_domain()
before calling _add_from_file() or such. Or in very recent Glade, you can
set the translation domain in the project properties dialog.

To extract strings for translation, intltool already understands .glade files,
if you want to call them .ui files, you need to annotate them correctly
in POTFILES.in.. like this:

[type: application/x-glade]path/to/gladefile.ui

I hope you have not been maintaining separate Glade files for too long,
this feature has been built into Glade for a very very long time ;-)

Cheers,
    -Tristan

&gt;<i>
</I>&gt;<i> Second, for installation in the file system, the right place for glade files
</I>&gt;<i> is probably the one specified in the $XDG_DATA_DIRS environment variable*,
</I>&gt;<i> usually /usr/share. There is a Glib utility function to get the right
</I>&gt;<i> directories, so they do not need to be hard-coded. In gtkmm, it is called
</I>&gt;<i> Glib::get_system_data_dirs(), don't know about GTK+.
</I>&gt;<i> * <A HREF="http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html">http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html</A>
</I>&gt;<i>
</I>&gt;<i> There is also this four year old video explaining a way to embed glade files
</I>&gt;<i> in executables:
</I>&gt;<i> <A HREF="http://www.youtube.com/watch?v=5-8h6eOwKwA">http://www.youtube.com/watch?v=5-8h6eOwKwA</A>
</I>&gt;<i> I don't know if this way is any good. On 2 Aug 2011 the above quoted Tristan
</I>&gt;<i> Van Berkom had this to say about it:
</I>&gt;<i> &#8220;Sure you can do that, unfortunately it means any graphic files in the Glade
</I>&gt;<i> file need to be specified by full path, because GtkBuilder currently only
</I>&gt;<i> uses the file load location to resolve relative paths for loaded resources
</I>&gt;<i> (something that could/should be easily fixed in GtkBuilder).&#8221;
</I>&gt;<i> (<A HREF="http://lists.ximian.com/pipermail/glade-users/2011-August/005355.html">http://lists.ximian.com/pipermail/glade-users/2011-August/005355.html</A>)
</I>&gt;<i>
</I>&gt;<i> Carlos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Glade-users maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">Glade-users at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">http://lists.ximian.com/mailman/listinfo/glade-users</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005643.html">[Glade-users] Two newbie questions
</A></li>
	<LI>Next message: <A HREF="005646.html">[Glade-users] Two newbie questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5645">[ date ]</a>
              <a href="thread.html#5645">[ thread ]</a>
              <a href="subject.html#5645">[ subject ]</a>
              <a href="author.html#5645">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
