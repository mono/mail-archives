<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] Fwd: Failing to display a custom fake property
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=Re%3A%20%5BGlade-users%5D%20Fwd%3A%20Failing%20to%20display%20a%20custom%20fake%20property&In-Reply-To=%3CCAGUy9WKeGg7ztfZbbpBHtFGZNc7YCz_%2BHy82S-CYWLzJzAORFA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005707.html">
   <LINK REL="Next"  HREF="005709.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] Fwd: Failing to display a custom fake property</H1>
    <B>Tristan Van Berkom</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=Re%3A%20%5BGlade-users%5D%20Fwd%3A%20Failing%20to%20display%20a%20custom%20fake%20property&In-Reply-To=%3CCAGUy9WKeGg7ztfZbbpBHtFGZNc7YCz_%2BHy82S-CYWLzJzAORFA%40mail.gmail.com%3E"
       TITLE="[Glade-users] Fwd: Failing to display a custom fake property">tristan.van.berkom at gmail.com
       </A><BR>
    <I>Fri Feb  7 09:38:04 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="005707.html">[Glade-users] Fwd: Failing to display a custom fake property
</A></li>
        <LI>Next message: <A HREF="005709.html">[Glade-users] Fwd: Failing to display a custom fake property
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5708">[ date ]</a>
              <a href="thread.html#5708">[ thread ]</a>
              <a href="subject.html#5708">[ subject ]</a>
              <a href="author.html#5708">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Feb 7, 2014 at 6:23 PM, Alejandro T. Colombini
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">atcolombini at gmail.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>   thank you for replying, and sorry for the lack of information, I've solved
</I>&gt;<i> the problem of the values not displaying and it had nothing to do with glade
</I>&gt;<i> itself.
</I>&gt;<i>
</I>&gt;<i>   What I'm doing is to set a fake property to store a list of pairs of
</I>&gt;<i> strings in the glade files and then load them in a internal structure of the
</I>&gt;<i> buildable object this property belongs to. To set this list, I've declared
</I>&gt;<i> the fake property as a GtkListStore (with two columns), so it can be used
</I>&gt;<i> both for storing the property in the glade plugin until it is written to the
</I>&gt;<i> UI definition of my object, and also as a model of the GtkTreeView used as
</I>&gt;<i> input of the property for the user to set those pairs of strings. So the
</I>&gt;<i> value of the property is an object (a GtkListStore), but the values I
</I>&gt;<i> actually need are the contents of this object, which are then written to the
</I>&gt;<i> XML inside a set of custom tags. All this is working right now.
</I>&gt;<i>
</I>&gt;<i>   The problem I had was that the values set in the GtkListStore through the
</I>&gt;<i> GtkTreeView were not showing, but it was just because I made a mistake when
</I>&gt;<i> defining the GtkCellRenderers, and I wasn't paying attention to it due to
</I>&gt;<i> the warning shown by Glade while setting the value of the property itself.
</I>&gt;<i>
</I>&gt;<i>   The warning is still showing when I set the value of the property (the
</I>&gt;<i> GtkListStore) using the glade_command family of functions but the undo/redo
</I>&gt;<i> is working. This is the only thing left to fix in the plugin. These are the
</I>&gt;<i> warnings shown when:
</I>&gt;<i>      - using glade_command_set_property or glade_command_set_property_value
</I>&gt;<i> with a value for the property:
</I>&gt;<i>       (glade:5091): GladeUI-CRITICAL **: Object type property refers to an
</I>&gt;<i> object outside the project
</I>&gt;<i>       (glade:5091): GladeUI-CRITICAL **: glade_property_update_prop_refs:
</I>&gt;<i> assertion `gnew != NULL' failed
</I>&gt;<i>
</I>&gt;<i>      - using glade_command_set_property or glade_command_set_property_value
</I>&gt;<i> with NULL (to unset the value):
</I>&gt;<i>       (glade:5091): GladeUI-CRITICAL **: glade_property_update_prop_refs:
</I>&gt;<i> assertion `gold != NULL' failed
</I>&gt;<i>
</I>&gt;<i>   The second and third messages are also emitted when using the
</I>&gt;<i> glade_property_set and glade_property_set_value functions.
</I>&gt;<i>
</I>&gt;<i>   If you need more information about anything, let me know and I'll try to
</I>&gt;<i> provide it. Thanks.
</I>
Ok I have an idea what's going on - however I'm still guessing so you may
have to clarify.

My &quot;guess&quot; is that somewhere in your plugin, you are adding a new object
to the project and you want that new widget to automatically refer to this
GtkListStore which you are adding at the same time.

A few notes should help to set you straight, assuming that you are trying
to atomically add a &quot;foo&quot; which starts out referring to &quot;bar&quot;:

  A.) If you want to set a property reference, you must absolutely refer to
        an object which is in the project - which means that &quot;bar&quot; must be
        added to the project *before* having &quot;foo&quot; refer to it.

  B.) I may be helpful to know that you don't need the GladeCommand interface
        for setting up values on a GladeWidget before adding it to the
project, any
        properties set on a GladeWidget *before* adding it to the
project will be
        remembered as the initial values upon the project addition command.

        Of course if you are setting the value of the newly created
object to another
        project object - *that* other project object must also be
undoably added to
        the project.

  C.) Remember to use glade_command_push/pop_group() to ensure the addition
        of both objects become an atomic command.

Hope this solves it for you.

Cheers,
     -Tristan
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005707.html">[Glade-users] Fwd: Failing to display a custom fake property
</A></li>
	<LI>Next message: <A HREF="005709.html">[Glade-users] Fwd: Failing to display a custom fake property
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5708">[ date ]</a>
              <a href="thread.html#5708">[ thread ]</a>
              <a href="subject.html#5708">[ subject ]</a>
              <a href="author.html#5708">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
