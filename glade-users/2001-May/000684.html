<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] Urgent Help Needed! - GLADE-Database-Connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:kshivdeep%40rediffmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000683.html">
   <LINK REL="Next"  HREF="000691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] Urgent Help Needed! - GLADE-Database-Connection
   </H1>
    <B>Shivdeep  Krishnan
    </B> 
    <A HREF="mailto:kshivdeep%40rediffmail.com"
       TITLE="[Glade-users] Urgent Help Needed! - GLADE-Database-Connection">kshivdeep@rediffmail.com
       </A><BR>
    <I>5 May 2001 06:13:20 -0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000683.html">[Glade-users] 凯顿销售管理系统――企业销售业绩快速提升之道
</A></li>
        <LI> Next message: <A HREF="000691.html">[Glade-users] Urgent Help Needed! - GLADE-Database-Connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#684">[ date ]</a>
              <a href="thread.html#684">[ thread ]</a>
              <a href="subject.html#684">[ subject ]</a>
              <a href="author.html#684">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Friends,

I am very happy to be a part of this wonderful group. I have currently shifted to the Linux operating system. I am currently doing a database application project using GLADE with MySQL as the database. I use the C code generation. To start with I created a CList and a Button. I want to populate the CList with data from the table on clicking the Button. I am unable to do it. What code should I write and in which file should I write?. I am confused with all the files interface.c,support.c,main.c and callbacks.c. I am giving the enitire code of the C files also below. Please help me. I would also like to know to connect StarOffice BAse to C. You can also send answers to my mail ID. <A HREF="mailto:kshivdeep@rediffmail.com.">kshivdeep@rediffmail.com.</A>
--------------------------------------------------------
main.c:
=======
/*
 * Initial main.c file generated by Glade. Edit as required.
 * Glade will not overwrite this file.
 */

#ifdef HAVE_CONFIG_H
#  include &lt;config.h&gt;
#endif

#include &lt;gnome.h&gt;

#include &quot;interface.h&quot;
#include &quot;support.h&quot;

int
main (int argc, char *argv[])
{
  GtkWidget *window1;
 
#ifdef ENABLE_NLS
  bindtextdomain (PACKAGE, PACKAGE_LOCALE_DIR);
  textdomain (PACKAGE);
#endif

  gnome_init (&quot;cdb&quot;, VERSION, argc, argv);

  /*
   * The following code was added by Glade to create one of each component
   * (except popup menus), just so that you see something after building
   * the project. Delete any components that you don't want shown initially.
   */
  window1 = create_window1 ();
  gtk_widget_show (window1);

  gtk_main ();
  return 0;
}
---------------------------------------------------------
interface.c:
============
/*
 * DO NOT EDIT THIS FILE - it is generated by Glade.
 */

#ifdef HAVE_CONFIG_H
#  include &lt;config.h&gt;
#endif

#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;

#include &lt;gnome.h&gt;

#include &quot;callbacks.h&quot;
#include &quot;interface.h&quot;
#include &quot;support.h&quot;

GtkWidget*
create_window1 (void)
{
  GtkWidget *window1;
  GtkWidget *fixed1;
  GtkWidget *button1;
  GtkWidget *clist1;
  GtkWidget *label2;

  window1 = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_object_set_data (GTK_OBJECT (window1), &quot;window1&quot;, window1);
  gtk_window_set_title (GTK_WINDOW (window1), _(&quot;C Database Demo&quot;));

  fixed1 = gtk_fixed_new ();
  gtk_widget_ref (fixed1);
  gtk_object_set_data_full (GTK_OBJECT (window1), &quot;fixed1&quot;, fixed1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (fixed1);
  gtk_container_add (GTK_CONTAINER (window1), fixed1);

  button1 = gtk_button_new_with_label (_(&quot;Generate&quot;));
  gtk_widget_ref (button1);
  gtk_object_set_data_full (GTK_OBJECT (window1), &quot;button1&quot;, button1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (button1);
  gtk_fixed_put (GTK_FIXED (fixed1), button1, 8, 184);
  gtk_widget_set_uposition (button1, 8, 184);
  gtk_widget_set_usize (button1, 144, 32);

  clist1 = gtk_clist_new (1);
  gtk_widget_ref (clist1);
  gtk_object_set_data_full (GTK_OBJECT (window1), &quot;clist1&quot;, clist1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (clist1);
  gtk_fixed_put (GTK_FIXED (fixed1), clist1, 8, 16);
  gtk_widget_set_uposition (clist1, 8, 16);
  gtk_widget_set_usize (clist1, 144, 160);
  gtk_clist_set_column_width (GTK_CLIST (clist1), 0, 80);
  gtk_clist_column_titles_show (GTK_CLIST (clist1));

  label2 = gtk_label_new (_(&quot;Name&quot;));
  gtk_widget_ref (label2);
  gtk_object_set_data_full (GTK_OBJECT (window1), &quot;label2&quot;, label2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (label2);
  gtk_clist_set_column_widget (GTK_CLIST (clist1), 0, label2);

  gtk_signal_connect (GTK_OBJECT (button1), &quot;clicked&quot;,
                      GTK_SIGNAL_FUNC (on_button1_clicked),
                      NULL);
 
  return window1;
}
---------------------------------------------------------
callbacks.c:
============
#ifdef HAVE_CONFIG_H
#  include &lt;config.h&gt;
#endif

#include &lt;gnome.h&gt;

#include &quot;callbacks.h&quot;
#include &quot;interface.h&quot;
#include &quot;support.h&quot;
#include &lt;mysql.h&gt;

MYSQL mysql;
MYSQL_RES *res;
MYSQL_ROW row;

void exiterr(int exitcode)
{
    fprintf( stderr, &quot;%s\n&quot;, mysql_error(&amp;mysql) );
    exit( exitcode );
}

void
on_button1_clicked                     (GtkButton       *button,
                                        gpointer         user_data)
{   
    uint i = 0;

    if (!(mysql_connect(&amp;mysql,&quot;&quot;,&quot;&quot;,&quot;&quot;))) 
        exiterr(1);

    if (mysql_select_db(&amp;mysql,&quot;siddi&quot;))
        exiterr(2);

    if (mysql_query(&amp;mysql,&quot;SELECT name FROM emp&quot;))
        exiterr(3);

    if (!(res = mysql_store_result(&amp;mysql)))
        exiterr(4);


    while((row = mysql_fetch_row(res))) 
    {
        for (i=0 ; i &lt; mysql_num_fields(res); i++) 
	  printf(&quot;%s\n&quot;,row[i]); 
    }
   
    if (!mysql_eof(res))
        exiterr(5);

    mysql_free_result(res);
    mysql_close(&amp;mysql);
}

--------------------------------------------------------
/*
 * DO NOT EDIT THIS FILE - it is generated by Glade.
 */

#ifdef HAVE_CONFIG_H
#  include &lt;config.h&gt;
#endif

#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;

#include &lt;gnome.h&gt;

#include &quot;support.h&quot;

/* This is an internally used function to create pixmaps. */
static GtkWidget* create_dummy_pixmap  (GtkWidget       *widget,
                                        gboolean         gnome_pixmap);

GtkWidget*
lookup_widget                          (GtkWidget       *widget,
                                        const gchar     *widget_name)
{
  GtkWidget *parent, *found_widget;

  for (;;)
    {
      if (GTK_IS_MENU (widget))
        parent = gtk_menu_get_attach_widget (GTK_MENU (widget));
      else
        parent = widget-&gt;parent;
      if (parent == NULL)
        break;
      widget = parent;
    }

  found_widget = (GtkWidget*) gtk_object_get_data (GTK_OBJECT (widget),
                                                   widget_name);
  if (!found_widget)
    g_warning (&quot;Widget not found: %s&quot;, widget_name);
  return found_widget;
}

/* This is a dummy pixmap we use when a pixmap can't be found. */
static char *dummy_pixmap_xpm[] = {
/* columns rows colors chars-per-pixel */
&quot;1 1 1 1&quot;,
&quot;  c None&quot;,
/* pixels */
&quot; &quot;,
&quot; &quot;
};

/* This is an internally used function to create pixmaps. */
static GtkWidget*
create_dummy_pixmap                    (GtkWidget       *widget,
                                        gboolean         gnome_pixmap)
{
  GdkColormap *colormap;
  GdkPixmap *gdkpixmap;
  GdkBitmap *mask;
  GtkWidget *pixmap;

  if (gnome_pixmap)
    {
      return gnome_pixmap_new_from_xpm_d (dummy_pixmap_xpm);
    }

  colormap = gtk_widget_get_colormap (widget);
  gdkpixmap = gdk_pixmap_colormap_create_from_xpm_d (NULL, colormap, &amp;mask,
                                                     NULL, dummy_pixmap_xpm);
  if (gdkpixmap == NULL)
    g_error (&quot;Couldn't create replacement pixmap.&quot;);
  pixmap = gtk_pixmap_new (gdkpixmap, mask);
  gdk_pixmap_unref (gdkpixmap);
  gdk_bitmap_unref (mask);
  return pixmap;
}

/* This is an internally used function to create pixmaps. */
GtkWidget*
create_pixmap                          (GtkWidget       *widget,
                                        const gchar     *filename,
                                        gboolean         gnome_pixmap)
{
  GtkWidget *pixmap;
  GdkColormap *colormap;
  GdkPixmap *gdkpixmap;
  GdkBitmap *mask;
  gchar *pathname;

  if (!filename || !filename[0])
      return create_dummy_pixmap (widget, gnome_pixmap);

  pathname = gnome_pixmap_file (filename);
  if (!pathname)
    {
      g_warning (_(&quot;Couldn't find pixmap file: %s&quot;), filename);
      return create_dummy_pixmap (widget, gnome_pixmap);
    }

  if (gnome_pixmap)
    {
      pixmap = gnome_pixmap_new_from_file (pathname);
      g_free (pathname);
      return pixmap;
    }

  colormap = gtk_widget_get_colormap (widget);
  gdkpixmap = gdk_pixmap_colormap_create_from_xpm (NULL, colormap, &amp;mask,
                                                   NULL, pathname);
  if (gdkpixmap == NULL)
    {
      g_warning (_(&quot;Couldn't create pixmap from file: %s&quot;), pathname);
      g_free (pathname);
      return create_dummy_pixmap (widget, gnome_pixmap);
    }
  g_free (pathname);

  pixmap = gtk_pixmap_new (gdkpixmap, mask);
  gdk_pixmap_unref (gdkpixmap);
  gdk_bitmap_unref (mask);
  return pixmap;
}

/* This is an internally used function to create imlib images. */
GdkImlibImage*
create_image                           (const gchar     *filename)
{
  GdkImlibImage *image;
  gchar *pathname;

  pathname = gnome_pixmap_file (filename);
  if (!pathname)
    {
      g_warning (_(&quot;Couldn't find pixmap file: %s&quot;), filename);
      return NULL;
    }

  image = gdk_imlib_load_image (pathname);
  g_free (pathname);
  return image;
}

---------------------------------------------------------
cdb.glade:
===========
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;GTK-Interface&gt;

&lt;project&gt;
  &lt;name&gt;CDb&lt;/name&gt;
  &lt;program_name&gt;cdb&lt;/program_name&gt;
  &lt;directory&gt;&lt;/directory&gt;
  &lt;source_directory&gt;src&lt;/source_directory&gt;
  &lt;pixmaps_directory&gt;pixmaps&lt;/pixmaps_directory&gt;
  &lt;language&gt;C&lt;/language&gt;
  &lt;gnome_support&gt;True&lt;/gnome_support&gt;
  &lt;gettext_support&gt;True&lt;/gettext_support&gt;
&lt;/project&gt;

&lt;widget&gt;
  &lt;class&gt;GtkWindow&lt;/class&gt;
  &lt;name&gt;window1&lt;/name&gt;
  &lt;title&gt;C Database Demo&lt;/title&gt;
  &lt;type&gt;GTK_WINDOW_TOPLEVEL&lt;/type&gt;
  &lt;position&gt;GTK_WIN_POS_NONE&lt;/position&gt;
  &lt;modal&gt;False&lt;/modal&gt;
  &lt;allow_shrink&gt;False&lt;/allow_shrink&gt;
  &lt;allow_grow&gt;True&lt;/allow_grow&gt;
  &lt;auto_shrink&gt;False&lt;/auto_shrink&gt;

  &lt;widget&gt;
    &lt;class&gt;GtkFixed&lt;/class&gt;
    &lt;name&gt;fixed1&lt;/name&gt;

    &lt;widget&gt;
      &lt;class&gt;GtkButton&lt;/class&gt;
      &lt;name&gt;button1&lt;/name&gt;
      &lt;x&gt;8&lt;/x&gt;
      &lt;y&gt;184&lt;/y&gt;
      &lt;width&gt;144&lt;/width&gt;
      &lt;height&gt;32&lt;/height&gt;
      &lt;can_focus&gt;True&lt;/can_focus&gt;
      &lt;signal&gt;
	&lt;name&gt;clicked&lt;/name&gt;
	&lt;handler&gt;on_button1_clicked&lt;/handler&gt;
	&lt;last_modification_time&gt;Fri, 04 May 2001 09:51:39 GMT&lt;/last_modification_time&gt;
      &lt;/signal&gt;
      &lt;label&gt;Generate&lt;/label&gt;
    &lt;/widget&gt;

    &lt;widget&gt;
      &lt;class&gt;GtkCList&lt;/class&gt;
      &lt;name&gt;clist1&lt;/name&gt;
      &lt;x&gt;8&lt;/x&gt;
      &lt;y&gt;16&lt;/y&gt;
      &lt;width&gt;144&lt;/width&gt;
      &lt;height&gt;160&lt;/height&gt;
      &lt;can_focus&gt;True&lt;/can_focus&gt;
      &lt;columns&gt;1&lt;/columns&gt;
      &lt;column_widths&gt;80&lt;/column_widths&gt;
      &lt;selection_mode&gt;GTK_SELECTION_SINGLE&lt;/selection_mode&gt;
      &lt;show_titles&gt;True&lt;/show_titles&gt;
      &lt;shadow_type&gt;GTK_SHADOW_IN&lt;/shadow_type&gt;

      &lt;widget&gt;
	&lt;class&gt;GtkLabel&lt;/class&gt;
	&lt;child_name&gt;CList:title&lt;/child_name&gt;
	&lt;name&gt;label2&lt;/name&gt;
	&lt;label&gt;Name&lt;/label&gt;
	&lt;justify&gt;GTK_JUSTIFY_CENTER&lt;/justify&gt;
	&lt;wrap&gt;False&lt;/wrap&gt;
	&lt;xalign&gt;0.5&lt;/xalign&gt;
	&lt;yalign&gt;0.5&lt;/yalign&gt;
	&lt;xpad&gt;0&lt;/xpad&gt;
	&lt;ypad&gt;0&lt;/ypad&gt;
      &lt;/widget&gt;
    &lt;/widget&gt;
  &lt;/widget&gt;
&lt;/widget&gt;

&lt;/GTK-Interface&gt;


love,
Shivdeep



_____________________________________________________
Chat with your friends as soon as they come online. Get Rediff Bol at
<A HREF="http://bol.rediff.com">http://bol.rediff.com</A>






</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000683.html">[Glade-users] 凯顿销售管理系统――企业销售业绩快速提升之道
</A></li>
	<LI> Next message: <A HREF="000691.html">[Glade-users] Urgent Help Needed! - GLADE-Database-Connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#684">[ date ]</a>
              <a href="thread.html#684">[ thread ]</a>
              <a href="subject.html#684">[ subject ]</a>
              <a href="author.html#684">[ author ]</a>
         </LI>
       </UL>
</body></html>
