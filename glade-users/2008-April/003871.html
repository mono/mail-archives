<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] libxml and treeview - how to read in more than	one entries from an xml file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20libxml%20and%20treeview%20-%20how%20to%20read%20in%20more%20than%0A%09one%20entries%20from%20an%20xml%20file&In-Reply-To=56236.35547.qm%40web56404.mail.re3.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003870.html">
   <LINK REL="Next"  HREF="003872.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] libxml and treeview - how to read in more than	one entries from an xml file</H1>
    <B>Tristan Van Berkom</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20libxml%20and%20treeview%20-%20how%20to%20read%20in%20more%20than%0A%09one%20entries%20from%20an%20xml%20file&In-Reply-To=56236.35547.qm%40web56404.mail.re3.yahoo.com"
       TITLE="[Glade-users] libxml and treeview - how to read in more than	one entries from an xml file">tristan.van.berkom at gmail.com
       </A><BR>
    <I>Tue Apr  8 10:11:31 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003870.html">[Glade-users] libxml and treeview - how to read in more than	one entries from an xml file
</A></li>
        <LI>Next message: <A HREF="003872.html">[Glade-users] Glade 3.5.1 released !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3871">[ date ]</a>
              <a href="thread.html#3871">[ thread ]</a>
              <a href="subject.html#3871">[ subject ]</a>
              <a href="author.html#3871">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Apr 8, 2008 at 10:42 AM, Atmadarshini devi dasi
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">atmadarshini_dd at yahoo.com</A>&gt; wrote:
&gt;<i> Hi there
</I>&gt;<i>
</I>&gt;<i> Could you sort of explain what you mean? I dont understand.
</I>
You allocate address once:

   address = (AddressBook*)malloc(sizeof(AddressBook));

And in  &quot;int addressbook_get_addresses_from_xml_file(char *filename)&quot;
you never return address.

So, what you need is to have a GList * of allocated addresses,
otherwise you are just overwriting the pointers in address every
time you do:
   strcpy(address-&gt;cellphone, child-&gt;content);

Moreover, dont use strcpy here, if adress-&gt;cellphone really
is a char array then use strncpy() to make sure you stay within
the bounds of your char array.

But unless your app is really really really mission critical and needs
to know exactly how much memory its going to use at startup time,
I'd say everybody today is using allocated strings, i.e. you'd want:

   address-&gt;cellphone = g_strdup (BAD_CAST (child-&gt;content));

Also, try to stay on the glib slab, i.e. use allocators like g_new, g_malloc
and g_strdup.

Cheers,
                  -Tristan



&gt;<i>
</I>&gt;<i> thanks
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Tristan Van Berkom &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">tristan.van.berkom at gmail.com</A>&gt; wrote:
</I>&gt;<i>  On Tue, Apr 8, 2008 at 9:43 AM, Atmadarshini devi dasi
</I>&gt;<i>  wrote:
</I>&gt;<i> &gt; Hi there
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am working with glade, gtktreeview and libxml. What i am trying to do is
</I>&gt;<i> &gt; that from an xml file, I am trying to put things into my treeview. My
</I>&gt;<i> &gt; treeview for instance has three columns such as Lastname, Firstname,
</I>&gt;<i> &gt; cellphone.
</I>&gt;<i>
</I>&gt;<i> I dont see how this code could work, even if your parsing function
</I>&gt;<i> even ever returned the address it allocated, it only ever allocates one
</I>&gt;<i> and simply overwrites the strings each new address it parses, leaking
</I>&gt;<i> the old strings.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>  -Tristan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  ________________________________
</I>&gt;<i> You rock. That's why Blockbuster's offering you one month of Blockbuster
</I>&gt;<i> Total Access, No Cost.
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003870.html">[Glade-users] libxml and treeview - how to read in more than	one entries from an xml file
</A></li>
	<LI>Next message: <A HREF="003872.html">[Glade-users] Glade 3.5.1 released !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3871">[ date ]</a>
              <a href="thread.html#3871">[ thread ]</a>
              <a href="subject.html#3871">[ subject ]</a>
              <a href="author.html#3871">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
