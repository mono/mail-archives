<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] multiple istance of glade whit perl
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20multiple%20istance%20of%20glade%20whit%20perl&In-Reply-To=d42f9fad0804151139v24a6c574nb58c495a88ad3970%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003879.html">
   <LINK REL="Next"  HREF="003881.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] multiple istance of glade whit perl</H1>
    <B>Daniel Kasak</B> 
    <A HREF="mailto:glade-users%40lists.ximian.com?Subject=%5BGlade-users%5D%20multiple%20istance%20of%20glade%20whit%20perl&In-Reply-To=d42f9fad0804151139v24a6c574nb58c495a88ad3970%40mail.gmail.com"
       TITLE="[Glade-users] multiple istance of glade whit perl">dkasak at nusconsulting.com.au
       </A><BR>
    <I>Tue Apr 15 18:50:55 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003879.html">[Glade-users] multiple istance of glade whit perl
</A></li>
        <LI>Next message: <A HREF="003881.html">[Glade-users] Glade 3.4.4 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3880">[ date ]</a>
              <a href="thread.html#3880">[ thread ]</a>
              <a href="subject.html#3880">[ subject ]</a>
              <a href="author.html#3880">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2008-04-15 at 20:39 +0200, Antonio Ragagnin wrote:

&gt;<i> Hi
</I>&gt;<i> i'm writing a tool that,when a button is clicked a new glade window is
</I>&gt;<i> open, here my code:
</I>&gt;<i> 
</I>&gt;<i> sub btnNewMessage_onclick {
</I>&gt;<i>  my $newWin = Gtk2::GladeXML-&gt;new('gui/wSMS.glade');
</I>&gt;<i>  my $newForm = $newWin-&gt;get_widget('wSMS');
</I>&gt;<i>  $newWin-&gt;signal_autoconnect_from_package('callbackSMS');
</I>&gt;<i>  $newForm-&gt;show;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> package callbackSMS;
</I>&gt;<i> my $ID;
</I>&gt;<i> sub init {         #it's on form.show()
</I>&gt;<i>  $ID=rand(0,1000);
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> sub btnOk_clicked {
</I>&gt;<i>  print $ID;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> Ok, everytime i click btnNewMessage, a new window appear. but if i
</I>&gt;<i> click btnOk, the value of $ID will be the same for all windows!
</I>&gt;<i> it seems that every $newWin share the same package &quot;callbackSMS&quot;
</I>&gt;<i> there is some way to separate the packages? or using a class?
</I>&gt;<i> 
</I>&gt;<i> thx
</I>
Firstly, there is a gtk-perl mailing list full of happy, helpful people.
Subscribe at: <A HREF="http://mail.gnome.org/mailman/listinfo/gtk-perl-list">http://mail.gnome.org/mailman/listinfo/gtk-perl-list</A>

Secondly, when you go:

sub btnNewMessage_onclick {
 my $newWin = Gtk2::GladeXML-&gt;new('gui/wSMS.glade');
 my $newForm = $newWin-&gt;get_widget('wSMS');
 $newWin-&gt;signal_autoconnect_from_package('callbackSMS');
 $newForm-&gt;show;
}

 ... you're creating your Gtk2::GladeXML object and assigning it to
$newWin but then $newWin goes out of scope straight away ( at the end
of &#65279;btnNewMessage_onclick ). If you want to have multiple &#65279;callbackSMS
objects open and be able to access them from your script, then you
should keep them in an array or something, otherwise when they go out
of scope, the only code that can get at them is code inside the
&#65279;&#65279;callbackSMS package itself.

And lastly, if you want to store a variable attached to a single
instance of an object, you should do it in an OO way. Here's a snippet
from one of our packages, with your random number storage:

use strict;

package forms::posters_priority;

use Gtk2::Pango;
use Glib qw ( TRUE FALSE );

sub new {
    
    my ( $class, $globals ) = @_;
    
    my $self;
    $self-&gt;{globals} = $globals;
    bless $self, $class;
    
    $self-&gt;{form} = Gtk2::GladeXML-&gt;new(
        &quot;$self-&gt;{globals}-&gt;{gladefiles}/posters_priority.glade&quot;,
        &quot;posters_priority&quot; );
    
    $self-&gt;{form}-&gt;signal_autoconnect_from_package( $self );
    
    # Store a random number against this instance
    $self-&gt;{ID} = rand( 0,1000 );
    
    return $self;
    
}

I think the way you're doing it is storing the random number as a class
variable instead, and as you've found, there's only ONE of these per class.

Oh yeah ... and if you want to do database stuff from gtk-perl, check out my work at:
<A HREF="http://entropy.homelinux.org/axis">http://entropy.homelinux.org/axis</A> :)

--
Daniel Kasak
IT Developer
NUS Consulting Group
Level 5, 77 Pacific Highway
North Sydney, NSW, Australia 2060
T: (+61) 2 9922-7676 / F: (+61) 2
9922 7989
email: <A HREF="http://lists.ximian.com/mailman/listinfo/glade-users">dkasak at nusconsulting.com.au</A>
website:
<A HREF="http://www.nusconsulting.com.au">http://www.nusconsulting.com.au</A>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003879.html">[Glade-users] multiple istance of glade whit perl
</A></li>
	<LI>Next message: <A HREF="003881.html">[Glade-users] Glade 3.4.4 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3880">[ date ]</a>
              <a href="thread.html#3880">[ thread ]</a>
              <a href="subject.html#3880">[ subject ]</a>
              <a href="author.html#3880">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-users">More information about the Glade-users
mailing list</a><br>
</body></html>
