<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-users] problems with glade
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:albert%40vorwireless.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001635.html">
   <LINK REL="Next"  HREF="001636.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-users] problems with glade
   </H1>
    <B>Albert
    </B> 
    <A HREF="mailto:albert%40vorwireless.net"
       TITLE="[Glade-users] problems with glade">albert@vorwireless.net
       </A><BR>
    <I>06 Nov 2003 01:41:08 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="001635.html">[Glade-users] libglade and Dialog Modal
</A></li>
        <LI> Next message: <A HREF="001636.html">[Glade-users] problems with glade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1633">[ date ]</a>
              <a href="thread.html#1633">[ thread ]</a>
              <a href="subject.html#1633">[ subject ]</a>
              <a href="author.html#1633">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all, this is my first message in the list, excuse me for my poor
english.

Now I build my first project in glade. It is a button and a text_view. I
want read a text file using fgets and show in the text_view.

I paste de source:

----- interface.c ------------ 8&lt; ------
#ifdef HAVE_CONFIG_H
#  include &lt;config.h&gt;
#endif

#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;
#include &lt;stdio.h&gt;

#include &lt;gdk/gdkkeysyms.h&gt;
#include &lt;gtk/gtk.h&gt;

#include &quot;callbacks.h&quot;
#include &quot;interface.h&quot;
#include &quot;support.h&quot;

#define GLADE_HOOKUP_OBJECT(component,widget,name) \
  gtk_object_set_data_full (GTK_OBJECT (component), name, \
    gtk_widget_ref (widget), (GtkDestroyNotify) gtk_widget_unref)
#define GLADE_HOOKUP_OBJECT_NO_REF(component,widget,name) \
  gtk_object_set_data (GTK_OBJECT (component), name, widget)

GtkWidget*
create_tenes777 (void)
{
  GtkWidget *tenes777;
  GtkWidget *vbox2;
  GtkWidget *buto;
  GtkWidget *scrolledwindow1;
  GtkWidget *textbox;
  GtkTextBuffer *buffer;

  tenes777 = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_usize (tenes777, 300, 300);
  gtk_window_set_title (GTK_WINDOW (tenes777), _(&quot;Hacklab Tenes777&quot;));

  vbox2 = gtk_vbox_new (FALSE, 0);
  gtk_widget_show (vbox2);
  gtk_container_add (GTK_CONTAINER (tenes777), vbox2);

  buto = gtk_button_new_with_mnemonic (_(&quot;recollir&quot;));
  gtk_widget_show (buto);
  gtk_box_pack_start (GTK_BOX (vbox2), buto, FALSE, FALSE, 0);

  scrolledwindow1 = gtk_scrolled_window_new (NULL, NULL);
  gtk_widget_show (scrolledwindow1);
  gtk_box_pack_start (GTK_BOX (vbox2), scrolledwindow1, TRUE, TRUE, 0);

// my code start here:

  FILE *correu;
  int a, i;
  char magatzem[1024];

  correu = fopen(&quot;/tmp/tenes777&quot;,&quot;r&quot;);
  textbox = gtk_text_view_new();
  buffer = gtk_text_buffer_new (NULL);
  while (!feof(correu)) {
  fgets(magatzem, 1000, correu);
  a++;
  if (strstr(magatzem, &quot;[Tenes777]&quot;) != NULL) {
    gtk_text_buffer_set_text (buffer, magatzem, -1);
    gtk_text_view_set_buffer (GTK_TEXT_VIEW (textbox), buffer);
    gtk_widget_show (textbox);
    i++;
  }
 }
///------------end of my code----------------///

  gtk_container_add (GTK_CONTAINER (scrolledwindow1), textbox);

  gtk_signal_connect (GTK_OBJECT (buto), &quot;clicked&quot;,
                      GTK_SIGNAL_FUNC (on_buto_clicked),
                      NULL);

  /* Store pointers to all widgets, for use by lookup_widget(). */
  GLADE_HOOKUP_OBJECT_NO_REF (tenes777, tenes777, &quot;tenes777&quot;);
  GLADE_HOOKUP_OBJECT (tenes777, vbox2, &quot;vbox2&quot;);
  GLADE_HOOKUP_OBJECT (tenes777, buto, &quot;buto&quot;);
  GLADE_HOOKUP_OBJECT (tenes777, scrolledwindow1, &quot;scrolledwindow1&quot;);

  GLADE_HOOKUP_OBJECT (tenes777, textbox, &quot;textbox&quot;);

  return tenes777;
}

When execute the program, it returns:

-----------------------------------------8&lt;--------

(tenes777:4771): Gtk-CRITICAL **: file gtktextbuffer.c: line 543
(gtk_text_buffer_emit_insert): assertion `g_utf8_validate (text, len,
NULL)' failed

(tenes777:4771): Gtk-CRITICAL **: file gtktextbuffer.c: line 543
(gtk_text_buffer_emit_insert): assertion `g_utf8_validate (text, len,
NULL)' failed

(tenes777:4771): Gtk-CRITICAL **: file gtktextbuffer.c: line 543
(gtk_text_buffer_emit_insert): assertion `g_utf8_validate (text, len,
NULL)' failed

(tenes777:4771): Gtk-CRITICAL **: file gtktextbuffer.c: line 543
(gtk_text_buffer_emit_insert): assertion `g_utf8_validate (text, len,
NULL)' failed

(tenes777:4771): Gtk-CRITICAL **: file gtktextbuffer.c: line 543
(gtk_text_buffer_emit_insert): assertion `g_utf8_validate (text, len,
NULL)' failed

(tenes777:4771): Gtk-CRITICAL **: file gtktextbuffer.c: line 543
(gtk_text_buffer_emit_insert): assertion `g_utf8_validate (text, len,
NULL)' failed

---------------------------------------------------

thanks for you time,

Albert


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001635.html">[Glade-users] libglade and Dialog Modal
</A></li>
	<LI> Next message: <A HREF="001636.html">[Glade-users] problems with glade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1633">[ date ]</a>
              <a href="thread.html#1633">[ thread ]</a>
              <a href="subject.html#1633">[ subject ]</a>
              <a href="author.html#1633">[ author ]</a>
         </LI>
       </UL>
</body></html>
