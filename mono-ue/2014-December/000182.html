<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-ue] How to set the Default Player Character in Game Mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-ue%40lists.ximian.com?Subject=Re%3A%20%5BMono-ue%5D%20How%20to%20set%20the%20Default%20Player%20Character%20in%20Game%20Mode&In-Reply-To=%3CCAMga9iSiw%2B0%2B%2B_WjaWhKU%2Bp2Ggz1WdQcrUyMx7KpGBgGUrigJQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000181.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-ue] How to set the Default Player Character in Game Mode</H1>
    <B>Michael Hutchinson</B> 
    <A HREF="mailto:mono-ue%40lists.ximian.com?Subject=Re%3A%20%5BMono-ue%5D%20How%20to%20set%20the%20Default%20Player%20Character%20in%20Game%20Mode&In-Reply-To=%3CCAMga9iSiw%2B0%2B%2B_WjaWhKU%2Bp2Ggz1WdQcrUyMx7KpGBgGUrigJQ%40mail.gmail.com%3E"
       TITLE="[Mono-ue] How to set the Default Player Character in Game Mode">m.j.hutchinson at gmail.com
       </A><BR>
    <I>Wed Dec 31 11:48:47 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000181.html">[Mono-ue] How to set the Default Player Character in Game Mode
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#182">[ date ]</a>
              <a href="thread.html#182">[ thread ]</a>
              <a href="subject.html#182">[ subject ]</a>
              <a href="author.html#182">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think you want something like:

var finder = new ClassFinder&lt;Pawn&gt;();
finder.Initialize(&quot;/Game/Blueprints/PlayerCharacter.PlayerCharacter&quot;);
DefaultPawnClass = finder.Class;


You can find examples of this kind of stuff in our C# port of the
ShooterGame sample, see e.g.
Source/ShooterGameMono/Online/MonoShooterGameMode.cs

- m


On 31 December 2014 at 11:18, Ryan Burnham &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-ue">nitro52 at iinet.net.au</A>&gt; wrote:
&gt;<i> Hi All,
</I>&gt;<i>
</I>&gt;<i> So I thought I would try to go through the Gettings Started: Introduction to
</I>&gt;<i> UE4 Programming tutorial
</I>&gt;<i> (<A HREF="http://www.youtube.com/playlist?list=PLZlv_N0_O1gb5xvsc7VM7pfoRAKLuIcFi">http://www.youtube.com/playlist?list=PLZlv_N0_O1gb5xvsc7VM7pfoRAKLuIcFi</A>)
</I>&gt;<i> and convert it to C# using Mono of UE.
</I>&gt;<i>
</I>&gt;<i> This required me to convert the PlayerCharacter to c#. I&#8217;ve gone through and
</I>&gt;<i> done this but I&#8217;m trying to figure out now how to set it up as the default
</I>&gt;<i> player character. Basing it on this tutorial
</I>&gt;<i> <A HREF="https://wiki.unrealengine.com/First_Person_Shooter_C%2B%2B_Tutorial">https://wiki.unrealengine.com/First_Person_Shooter_C%2B%2B_Tutorial</A> I can
</I>&gt;<i> see you need to setup a new game mode in code and then initialise the
</I>&gt;<i> DefaultPlayerPawn to the blueprint inherited from the custom
</I>&gt;<i> PlayerCharacter. In C++ it looks like this
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> AFPSGameMode::AFPSGameMode(const class FPostConstructInitializeProperties&amp;
</I>&gt;<i> PCIP)
</I>&gt;<i>
</I>&gt;<i> : Super(PCIP)
</I>&gt;<i>
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i>       // set default pawn class to our Blueprinted character
</I>&gt;<i>
</I>&gt;<i>       static ConstructorHelpers::FObjectFinder&lt;UBlueprint&gt;
</I>&gt;<i> PlayerPawnObject(TEXT(&quot;Blueprint'/Game/Blueprints/BP_FPSCharacter.BP_FPSCharacter'&quot;));
</I>&gt;<i>
</I>&gt;<i>       if (PlayerPawnObject.Object != NULL)
</I>&gt;<i>
</I>&gt;<i>       {
</I>&gt;<i>
</I>&gt;<i>              DefaultPawnClass =
</I>&gt;<i> (UClass*)PlayerPawnObject.Object-&gt;GeneratedClass;
</I>&gt;<i>
</I>&gt;<i>       }
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I&#8217;m no C++ expert so I&#8217;m not sure if I am missing something but I can&#8217;t
</I>&gt;<i> figure out how to convert this in the C# Mono for UE equivalent. So far I
</I>&gt;<i> have this
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     public class CSharpGameMode : GameMode
</I>&gt;<i>     {
</I>&gt;<i>         // Constructor called when creating or loading an object
</I>&gt;<i>         protected CSharpGameMode(PostConstructInitializeProperties pcip) :
</I>&gt;<i> base(pcip)
</I>&gt;<i>         {
</I>&gt;<i>             var playerPawnObject = new ObjectFinder&lt;Blueprint&gt;();
</I>&gt;<i>
</I>&gt;<i> playerPawnObject.Initialize(&quot;Blueprint'/Game/Blueprints/PlayerCharacter.PlayerCharacter'&quot;);
</I>&gt;<i>
</I>&gt;<i>             if (playerPawnObject.Object != null)
</I>&gt;<i>             {
</I>&gt;<i>                 DefaultPawnClass = //&lt;------- How do i get SubclassOf
</I>&gt;<i> &lt;Pawn&gt; from the ObjectFinder;
</I>&gt;<i>             }
</I>&gt;<i>         }
</I>&gt;<i>
</I>&gt;<i>         // Constructor for hot-reloading. UProperties will already be
</I>&gt;<i> initialized, but any purely managed fields or data
</I>&gt;<i>         // will need to be set up
</I>&gt;<i>         protected CSharpGameMode(IntPtr nativeObject) : base(nativeObject)
</I>&gt;<i>         {
</I>&gt;<i>
</I>&gt;<i>         }
</I>&gt;<i>     }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-ue mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-ue">Mono-ue at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-ue">http://lists.ximian.com/mailman/listinfo/mono-ue</A>
</I>&gt;<i>
</I>


-- 
Michael Hutchinson ~ <A HREF="https://mhut.ch">https://mhut.ch</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000181.html">[Mono-ue] How to set the Default Player Character in Game Mode
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#182">[ date ]</a>
              <a href="thread.html#182">[ thread ]</a>
              <a href="subject.html#182">[ subject ]</a>
              <a href="author.html#182">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-ue">More information about the Mono-ue
mailing list</a><br>
</body></html>
