<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] [PATCH] Prevention of API stripping for	accessibility
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20%5BPATCH%5D%20Prevention%20of%20API%20stripping%20for%0A%09accessibility&In-Reply-To=1251244413.8952.33.camel%40mizar.home">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000582.html">
   <LINK REL="Next"  HREF="000586.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] [PATCH] Prevention of API stripping for	accessibility</H1>
    <B>&quot;Andr&#233;s G. Aragoneses&quot;</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20%5BPATCH%5D%20Prevention%20of%20API%20stripping%20for%0A%09accessibility&In-Reply-To=1251244413.8952.33.camel%40mizar.home"
       TITLE="[Moonlight-list] [PATCH] Prevention of API stripping for	accessibility">knocte at gmail.com
       </A><BR>
    <I>Thu Aug 27 18:03:23 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000582.html">[Moonlight-list] [PATCH] Prevention of API stripping	for	accessibility
</A></li>
        <LI>Next message: <A HREF="000586.html">[Moonlight-list] [PATCH] Prevention of API stripping	for	accessibility
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#585">[ date ]</a>
              <a href="thread.html#585">[ thread ]</a>
              <a href="subject.html#585">[ subject ]</a>
              <a href="author.html#585">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sebastien Pouliot wrote:
&gt;<i> On Tue, 2009-08-11 at 18:04 -0400, &quot;Andr&#233;s G. Aragoneses&quot; wrote:
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As the tuning step of the moon build process may cut API that our team
</I>&gt;&gt;<i> is using for A11y support, I'm proposing this patch here to prevent that
</I>&gt;&gt;<i> to happen (we will be updating it while the development continues,
</I>&gt;&gt;<i> thanks to a script in our tree that will warn us if the descriptors file
</I>&gt;&gt;<i> changes).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The patch is big so I have compressed it. However, if you want to take a
</I>&gt;&gt;<i> quick look, the relevant change is this one:
</I>&gt;<i> 
</I>&gt;<i> Well I'm a bit surprised it's so big. Could you enlighten me about the
</I>&gt;<i> a11y use of the following API ? (I only had a quick look so may have
</I>&gt;<i> more questions later)
</I>&gt;<i> 
</I>&gt;<i> * System.Security.AccessControl.MutexRights
</I>&gt;<i> * System.Security.AccessControl.ObjectSecurity
</I>&gt;<i> &#65279;* System.Security.Cryptography.ICspAsymmetricAlgorithm
</I>&gt;<i> &#65279;* System.Security.IEvidenceFactory
</I>&gt;<i> * System.Security.Permissions.StrongNameIdentityPermission/SNIP
</I>&gt;<i> &#65279;* System.Security.Principal.WindowsBuiltInRole
</I>&gt;<i> * System.KitchenSinkCollection
</I>
I believe all of this is caused by the current whitelist of the linker
(but jb can confirm):

<A HREF="http://anonsvn.mono-project.com/viewvc/trunk/mcs/tools/linker/Descriptors/">http://anonsvn.mono-project.com/viewvc/trunk/mcs/tools/linker/Descriptors/</A>

For example, System.Security.AccessControl.MutexRights is there because
this is in mscorlib.xml:

&lt;type fullname=&quot;System.Threading.Mutex&quot; /&gt;

And the rest of the stuff may be used by other types that are
white-listed...

I remember asking jb some time ago if it was necessary for us to strip
our descriptor file of references that are already on the whitelist, and
he told me it was not necessary. After all, if the whitelist gets
reduced, we will notice at our build time, and will commit the new
version of the file.

Thanks,

	Andres


&gt;&gt;<i> So, ok to commit?
</I>&gt;<i> 
</I>&gt;<i> Not quite ;-)
</I>&gt;<i> 
</I>&gt;<i> Sebastien
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Moonlight-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-list">Moonlight-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-list">http://lists.ximian.com/mailman/listinfo/moonlight-list</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000582.html">[Moonlight-list] [PATCH] Prevention of API stripping	for	accessibility
</A></li>
	<LI>Next message: <A HREF="000586.html">[Moonlight-list] [PATCH] Prevention of API stripping	for	accessibility
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#585">[ date ]</a>
              <a href="thread.html#585">[ thread ]</a>
              <a href="subject.html#585">[ subject ]</a>
              <a href="author.html#585">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
