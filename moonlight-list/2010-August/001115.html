<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] System.BadImageFormatException (due to Invalid	MS-DOS watermark)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20System.BadImageFormatException%20%28due%20to%20Invalid%0A%09MS-DOS%20watermark%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001114.html">
   <LINK REL="Next"  HREF="001116.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] System.BadImageFormatException (due to Invalid	MS-DOS watermark)</H1>
    <B>kleb</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20System.BadImageFormatException%20%28due%20to%20Invalid%0A%09MS-DOS%20watermark%29&In-Reply-To="
       TITLE="[Moonlight-list] System.BadImageFormatException (due to Invalid	MS-DOS watermark)">dklebanoff at dayforce.com
       </A><BR>
    <I>Tue Aug 17 12:19:07 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001114.html">[Moonlight-list] Anybody else having issues with the Preview and	FireFox?
</A></li>
        <LI>Next message: <A HREF="001116.html">[Moonlight-list] System.BadImageFormatException (due to	Invalid	MS-DOS watermark)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1115">[ date ]</a>
              <a href="thread.html#1115">[ thread ]</a>
              <a href="subject.html#1115">[ subject ]</a>
              <a href="author.html#1115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello. We're trying to smoke-test our application with Moonlight and getting
nowhere. The Moonlight trace indicates that all of the Microsoft toolkit
DLLs are unloadable. The message implies the DLLs are somehow corrupt, yet
they are simply signed, managed DLLs provided by Microsoft. Can anybody
suggest what might be going on here? Environment is pretty &quot;stock&quot;, a clean
OpenSUSE 11.3 install, Firefox 3.6.6 and Moonlight preview 2.99.0.8. I've
tried both 32-bit and 64-bit platforms as well, doesn't seem to be related
to the CORFlags in the assemblies.

Trace from MOON_TRACE:
*** nss-shared-helper: Shared database disabled (set NSS_USE_SHARED_DB to
enable).
Attempting to load libmoonloaderxpi 
Moonlight: no audio capture service available
Moonlight: Installing signal handlers for crash reporting.
Moonlight: Enabling MONO_DEBUG=keep-delegates,reverse-pinvoke-exceptions and
MOONLIGHT_ENABLE_CONSOLE=1
Setting trace options to: N:x
Using the ff3 bridge
Moonlight: Plugin AppDomain Creation: OK
Moonlight: setting option emulatekeycodes to 0
Moonlight: setting option clipping to 0
Moonlight: setting option bbox to 0
Moonlight: setting option textbox to 0
Moonlight: setting option occlusion-culling to 1
Moonlight: setting option cache to 0
Moonlight: setting option backend to 1
Moonlight: setting option keepmedia to 0
Moonlight: setting option effects to 1
Moonlight: setting option projections to 1
Moonlight: setting option curlbridge to 0
Moonlight: setting option ooblauncher to 0
Attempting To Load ExternalPart SharpZipLib.zip
Attempting To Load ExternalPart SLVisifire.Charts.zip
Attempting To Load ExternalPart System.ComponentModel.DataAnnotations.zip
Attempting To Load ExternalPart System.Json.zip
Attempting To Load ExternalPart System.Windows.Controls.Data.zip
Attempting To Load ExternalPart System.Windows.Controls.Data.Input.zip
Attempting To Load ExternalPart System.Windows.Controls.zip
Attempting To Load ExternalPart System.Windows.Controls.Input.zip
Attempting To Load ExternalPart System.Windows.Controls.Input.Toolkit.zip
Attempting To Load ExternalPart System.Windows.Controls.Toolkit.zip
Attempting To Load ExternalPart System.Windows.Data.zip
Attempting To Load ExternalPart System.Xml.Serialization.zip
Could not load image data-0x7efff81e7000 due to Invalid MS-DOS watermark
Could not load image data-0x7effd92b3000 due to Invalid MS-DOS watermark
[0x7effd8cd9710:] EXCEPTION handling: System.BadImageFormatException: 
[0x7effd8eda710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load image data-0x7effd8915000 due to Invalid MS-DOS watermark
[0x7effd8cd9710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load image data-0x7effd8915000 due to Invalid MS-DOS watermark
[0x7effd8eda710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load image data-0x7effd894c000 due to Invalid MS-DOS watermark
[0x7effd8eda710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load image data-0x7effd8954000 due to Invalid MS-DOS watermark
[0x7effd8cd9710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load image data-0x7effd895f000 due to Invalid MS-DOS watermark
[0x7effd8eda710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load image data-0x7effd8298000 due to Invalid MS-DOS watermark
[0x7effd8cd9710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load image data-0x7effd8953000 due to Invalid MS-DOS watermark
[0x7effd8eda710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load image data-0x7effd8298000 due to Invalid MS-DOS watermark
[0x7effd8eda710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load image data-0x7effd8298000 due to Invalid MS-DOS watermark
[0x7effd8cd9710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load image data-0x7effd816c000 due to Invalid MS-DOS watermark
[0x7effd8eda710:] EXCEPTION handling: System.BadImageFormatException: 
Could not load file or assembly 'System.ComponentModel.DataAnnotations,
Version=2.0.5.0, Culture=neutral, PublicKeyToken=ddd0da4d3e678217' or one of
its dependencies.
[0x7f000e0ec720:] EXCEPTION handling: System.TypeLoadException: Could not
load type 'System.Windows.Controls.DataGrid' from assembly
'System.Windows.Controls.Data, Version=2.0.5.0, Culture=neutral,
PublicKeyToken=31bf3856ad364e35'.
[0x7f000e0ec720:] EXCEPTION handling: System.TypeLoadException: Could not
load type 'System.Windows.Controls.DataGrid' from assembly
'System.Windows.Controls.Data, Version=2.0.5.0, Culture=neutral,
PublicKeyToken=31bf3856ad364e35'.
[0x7f000e0ec720:] EXCEPTION handling:
System.Reflection.TargetInvocationException: Exception has been thrown by
the target of an invocation.
ManagedXamlLoader::SetProperty (139637301052256, , 139637300377712,
TargetType, 139637300377664) threw an exception: Exception has been thrown
by the target of an invocation..
System.Reflection.TargetInvocationException: Exception has been thrown by
the target of an invocation. ---&gt; System.TypeLoadException: Could not load
type 'System.Windows.Controls.DataGrid' from assembly
'System.Windows.Controls.Data, Version=2.0.5.0, Culture=neutral,
PublicKeyToken=31bf3856ad364e35'.
  at (wrapper managed-to-native)
System.MonoCustomAttrs:GetCustomAttributesInternal
(System.Reflection.ICustomAttributeProvider,System.Type,bool)
  at System.MonoCustomAttrs.GetCustomAttributesBase
(ICustomAttributeProvider obj, System.Type attributeType) [0x00000] in
&lt;filename unknown&gt;:0 
  at System.MonoCustomAttrs.GetCustomAttributes (ICustomAttributeProvider
obj, System.Type attributeType, Boolean inherit) [0x00000] in &lt;filename
unknown&gt;:0 
  at System.MonoType.GetCustomAttributes (System.Type attributeType, Boolean
inherit) [0x00000] in &lt;filename unknown&gt;:0 
  at Mono.Types.GetContentPropertyName (System.Type t) [0x00000] in
&lt;filename unknown&gt;:0 
  at Mono.Types.RegisterType (System.Type type, Mono.ManagedType parent,
Mono.ManagedType[] interfaces) [0x00000] in &lt;filename unknown&gt;:0 
  at Mono.Types.Find (System.Type type) [0x00000] in &lt;filename unknown&gt;:0 
  at Mono.Types.TypeToKind (System.Type type) [0x00000] in &lt;filename
unknown&gt;:0 
  at Mono.Value.FromObject (System.Object v, Boolean box_value_types)
[0x00000] in &lt;filename unknown&gt;:0 
  at Mono.NativeDependencyObjectHelper.SetValue
(INativeDependencyObjectWrapper wrapper, System.Windows.DependencyProperty
dp, System.Object value) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.DependencyObject.SetValueImpl
(System.Windows.DependencyProperty dp, System.Object value) [0x00000] in
&lt;filename unknown&gt;:0 
  --- End of inner exception stack trace ---
  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags
invokeAttr, System.Reflection.Binder binder, System.Object[] parameters,
System.Globalization.CultureInfo culture) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Reflection.MonoProperty.SetValue (System.Object obj,
System.Object value, BindingFlags invokeAttr, System.Reflection.Binder
binder, System.Object[] index, System.Globalization.CultureInfo culture)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Reflection.PropertyInfo.SetValue (System.Object obj,
System.Object value, System.Object[] index) [0x00000] in &lt;filename
unknown&gt;:0 
  at Mono.Xaml.ManagedXamlLoader.SetValue (Mono.Xaml.XamlCallbackData* data,
IntPtr target_data, System.Reflection.PropertyInfo pi, System.Object target,
System.Object value) [0x00000] in &lt;filename unknown&gt;:0 
  at Mono.Xaml.ManagedXamlLoader.SetPropertyFromValue
(Mono.Xaml.XamlCallbackData* data, System.Object target, IntPtr target_data,
Mono.Value* target_parent_ptr, System.Reflection.PropertyInfo pi,
Mono.Value* value_ptr, IntPtr value_data, System.String&amp; error) [0x00000] in
&lt;filename unknown&gt;:0 
  at Mono.Xaml.ManagedXamlLoader.TrySetPropertyReflection
(Mono.Xaml.XamlCallbackData* data, System.String xmlns, System.Object
target, IntPtr target_data, Mono.Value* target_parent_ptr, System.String
type_name, System.String name, Mono.Value* value_ptr, IntPtr value_data,
System.String&amp; error) [0x00000] in &lt;filename unknown&gt;:0 
  at Mono.Xaml.ManagedXamlLoader.SetProperty (Mono.Xaml.XamlCallbackData*
data, System.String xmlns, Mono.Value* target_ptr, IntPtr target_data,
Mono.Value* target_parent_ptr, System.String prop_xmlns, System.String name,
Mono.Value* value_ptr, IntPtr value_data) [0x00000] in &lt;filename unknown&gt;:0 
  at Mono.Xaml.ManagedXamlLoader.cb_set_property
(Mono.Xaml.XamlCallbackData* data, System.String xmlns, Mono.Value* target,
IntPtr target_data, Mono.Value* target_parent, System.String prop_xmlns,
System.String name, Mono.Value* value_ptr, IntPtr value_data,
Mono.MoonError&amp; error) [0x00000] in &lt;filename unknown&gt;:0 
Moonlight: ErrorEventArgs created with message: 'Exception has been thrown
by the target of an invocation.'
Could not parse element Style, attribute (null), error: Exception has been
thrown by the target of an invocation.
[0x7f000e0ec720:] EXCEPTION handling:
System.Windows.Markup.XamlParseException: Exception has been thrown by the
target of an invocation.
[0x7f000e0ec720:] EXCEPTION handling:
System.Reflection.TargetInvocationException: Exception has been thrown by
the target of an invocation.
Moonlight: ErrorEventArgs created with message: 'Error while creating the
instance of type XXXYYYZZZ.Client.UI.App.App'

-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/System-BadImageFormatException-due-to-Invalid-MS-DOS-watermark-tp2328609p2328609.html">http://mono.1490590.n4.nabble.com/System-BadImageFormatException-due-to-Invalid-MS-DOS-watermark-tp2328609p2328609.html</A>
Sent from the Moonlight mailing list archive at Nabble.com.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001114.html">[Moonlight-list] Anybody else having issues with the Preview and	FireFox?
</A></li>
	<LI>Next message: <A HREF="001116.html">[Moonlight-list] System.BadImageFormatException (due to	Invalid	MS-DOS watermark)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1115">[ date ]</a>
              <a href="thread.html#1115">[ thread ]</a>
              <a href="subject.html#1115">[ subject ]</a>
              <a href="author.html#1115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
