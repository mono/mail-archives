<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] warming up CoreCLR inside Moonlight
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20warming%20up%20CoreCLR%20inside%20Moonlight&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000254.html">
   <LINK REL="Next"  HREF="000264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] warming up CoreCLR inside Moonlight</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20warming%20up%20CoreCLR%20inside%20Moonlight&In-Reply-To="
       TITLE="[Moonlight-list] warming up CoreCLR inside Moonlight">sebastien.pouliot at gmail.com
       </A><BR>
    <I>Wed Feb 18 08:26:53 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000254.html">[Moonlight-list] File.IO and Moonlight.
</A></li>
        <LI>Next message: <A HREF="000264.html">[Moonlight-list] warming up CoreCLR inside Moonlight
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#258">[ date ]</a>
              <a href="thread.html#258">[ thread ]</a>
              <a href="subject.html#258">[ subject ]</a>
              <a href="author.html#258">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning Moon Hackers,

Current status: The CoreCLR security model [1], which is a lot simpler
than CAS, is not yet enable on SVN builds of Moonlight.

CoreCLR is important since it is (part of) how you can safely execute
untrusted Silverlight 2.0 code inside your browser. It needs (among
other things) to be enabled before releasing Moonlight 2.0 binaries to
end-users.

The mono runtime already support the CoreCLR but there are two major
concerns before &quot;turning it on&quot; : security and compatibility.

The later is very simple. Silverlight application (i.e. user) code can
either call platform code (i.e. transparent code, default, or
[SecuritySafeCritical] code) or not (i.e. [SecurityCritical] code). A
tool, similar to corcompare, makes sure Moonlight visible API are
compatible with Silverlight wrt [SecurityCritical] types and methods.

We'll solve the former using a mix of automation and manual work. Since
the CoreCLR  model makes it very clear what needs to be
[SecurityCritical] and who can call them, only [SecuritySafeCritical]
code, we can infer quite a few them by using tools. This &quot;raw&quot; data then
needs to be audited (i.e. confirmed to be ok) and, in some case,
overridden (e.g. removal) to complete the process.

The output of those processes (compatibility, automatic &amp; manual) will
then be used as an additional input to the 'tuner' to produce the final
Moonlight assemblies. This means that  the [SecurityCritical] and
[SecuritySafeCritical] attributes inside the class libraries (either in
mcs or moon) are &quot;unneeded&quot; (and the tuner will remove them, before
adding the &quot;right&quot; ones).

All the lists are kept in SVN [2] so we can audit them and any future
changes applied to them (e.g. updates to the mono class libraries could
results in changes).

Finally we can verify ourselves in different ways.

* Compatibility can be verified (at the end of the process) by comparing
Moonlight public API with the definition files we extracted from
Silverlight.

* Unit tests can (i.e. need) to be done to confirm the behavior of the
visible API. This will make sure any changes to our data files does not,
indirectly, breaks the limited access to critical API.

* Audits, manual and tool based (e.g. a few Gendarme rules comes to
mind) to ensure we're doing the correct things (e.g. where Moonlight
design is different from Silverlight design).


Current issue-let: we need to do this same process (injecting the
attributes, not the whole tuning) for assemblies residing in /moon

We can either:

        * duplicate the code/steps in mono/moon; 
        
        or
        
        * move all the tuning (not the building) into /moon. That would
        make shorter builds for /mono-only builders.


Sebastien

p.s. more news once the first &quot;attribute-tuned&quot; assemblies are available
(for early testers since default will still be off initially)

p.p.s. this (and more) information on the wiki soon

[1] <A HREF="http://www.mono-project.com/MoonlightNotes#Security_Model">http://www.mono-project.com/MoonlightNotes#Security_Model</A>

[2]
<A HREF="http://anonsvn.mono-project.com/viewvc/trunk/mcs/tools/moon/SecurityAttributes/">http://anonsvn.mono-project.com/viewvc/trunk/mcs/tools/moon/SecurityAttributes/</A>


</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000254.html">[Moonlight-list] File.IO and Moonlight.
</A></li>
	<LI>Next message: <A HREF="000264.html">[Moonlight-list] warming up CoreCLR inside Moonlight
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#258">[ date ]</a>
              <a href="thread.html#258">[ thread ]</a>
              <a href="subject.html#258">[ subject ]</a>
              <a href="author.html#258">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
