<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] KeyDown event differs from Silveright
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20KeyDown%20event%20differs%20from%20Silveright&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001177.html">
   <LINK REL="Next"  HREF="001179.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] KeyDown event differs from Silveright</H1>
    <B>Cocai</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20KeyDown%20event%20differs%20from%20Silveright&In-Reply-To="
       TITLE="[Moonlight-list] KeyDown event differs from Silveright">simionato.cristiano at gmail.com
       </A><BR>
    <I>Wed Dec  8 06:27:31 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001177.html">[Moonlight-list] does moonlight work with silverlight 4?
</A></li>
        <LI>Next message: <A HREF="001179.html">[Moonlight-list] Building Monnlight: a path to the hell
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1178">[ date ]</a>
              <a href="thread.html#1178">[ thread ]</a>
              <a href="subject.html#1178">[ subject ]</a>
              <a href="author.html#1178">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I have made a very simple silverlight 3/4 application to test the value of
KeyEventArgs retrived by KeyDown event; this is the code of the main page:

        public partial class MainPage : UserControl
	{
		public MainPage()
		{
			InitializeComponent();
			_list = new ObservableCollection&lt;string&gt;();
			KeyDown += MainPage_KeyDown;
			var lb = (ListBox) this.FindName(&quot;listBox1&quot;);
			lb.ItemsSource = _list;
		}

		void MainPage_KeyDown(object sender, KeyEventArgs e)
		{
			var result = string.Format(&quot;Key = {0} | Platform = {1} | Modifier = {2}&quot;,
e.Key, e.PlatformKeyCode, Keyboard.Modifiers);
			_list.Add(result);
		}

		
		private readonly ObservableCollection&lt;string&gt; _list;

		private void button1_Click(object sender, RoutedEventArgs e)
		{
			_list.Clear();
		}
	}

I have compared the result list by executing this application in Windows 7,
Firefox 3.6.12 and Italian keyboard, with OpenSuse 11.3, mono 2.8.1,
Moonlight 2.99.0.10, Firefox 3.6.12 and Italian Keyboard.

Well, there are several difference:

Key Pressed       Silverlight                    MoonLight                            
Note
D1                   K = D1, P=49, M=none    K=D1, P=10, M=none             
OK

Shift+D1           K=Shift, P=16, M=Shift   K=Shift, P=50, M=Shift
                      K =D1, P=49, M=Shift     K=D1, P=10, M=Shift              
OK

                     
D2                   K = D2, P=50, M=none      K=D2, P=11, M=none           
OK

Shift+D2           K=Shift, P=16, M=Shift     K=Shift, P=50, M=Shift
                      K =D2, P=50, M=Shift       K=Unknown, P=11, M=shift    
Key is not D2 in moonlight, same for D3, D7 and D0

D6                   K = D6, P=54, M=none      K=D6, P=15, M=none           
OK

Shift+D6           K=Shift, P=16, M=Shift     K=Shift, P=50, M=Shift
                      K =D6, P=54, M=Shift       K=D7, P=15, M=Shift            
Key is wrong in moonlight, same for D8 and D9

char &#236;              K=Unknown,P=221,M=none K=Unknown,P=21,M=none     OK

Shift+&#236;             K=Unknown,P=221,M=Shift K=D6,P=21,M=none             
Key is wrong in moonlight

Tab                 K=Tab,P=9,M=none           none                                
In moonlight there isn't the event 

AltGr               K=Ctrl,P=17,M=Ctrl
                     K=Alt,P=18,M=Alt, Ctrl        K=Unknown,P=108,M=none  
Moonlight doesn't know the key

Shift+Ctrl+Alt   K=Shift,P=16,M=shift          K=Shift,P=50,M=Shift
                     K=Ctrl,P=17,                     K=Ctrl,P=37,
                        M=Control,Shift                 M=Control,Shift
                     K=Alt,P=18,                      K=Unknown, P=64, 
                        M=Alt,Control,Shift            M=Control,Shift               
Moonlight doesn't know the Alt in the combination Shift+Ctrl+Alt

Win                K=Unknown,P=92,M=Apple   K=Unknonw,P=134,M=none  
Moonlight doesn't update the Modifier

Alt                 none                                K=Alt,P=64,M=Alt              
In Windows there isn't the event

Left Ctrl         K=Ctrl,P=17,M=Control         K=Ctrl,P=37,M=Control       
OK
Right Ctrl       K=Ctrl,P=17,M=Control         K=Ctrl,P=105,M=Control      
Moonlight has different Platform for the keys, windows doesn't; same for:
left/right Shift, Insert/Numpad Insert, Home/Numpad Home, up/numpad up,...

Are they all bugs?

This is the zip with the source and binary:
<A HREF="http://mono.1490590.n4.nabble.com/file/n3078046/TestKey.zip">http://mono.1490590.n4.nabble.com/file/n3078046/TestKey.zip</A> TestKey.zip 


Have a nice day,
Cristiano
-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/KeyDown-event-differs-from-Silveright-tp3078046p3078046.html">http://mono.1490590.n4.nabble.com/KeyDown-event-differs-from-Silveright-tp3078046p3078046.html</A>
Sent from the Moonlight mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001177.html">[Moonlight-list] does moonlight work with silverlight 4?
</A></li>
	<LI>Next message: <A HREF="001179.html">[Moonlight-list] Building Monnlight: a path to the hell
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1178">[ date ]</a>
              <a href="thread.html#1178">[ thread ]</a>
              <a href="subject.html#1178">[ subject ]</a>
              <a href="author.html#1178">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
