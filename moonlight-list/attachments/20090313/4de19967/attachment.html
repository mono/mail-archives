<tt>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Mar&nbsp;13,&nbsp;2009&nbsp;at&nbsp;9:55&nbsp;AM,&nbsp;Sebastien&nbsp;Pouliot&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:sebastien@ximian.com&quot;&gt;sebastien@ximian.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
Two&nbsp;small&nbsp;issues&nbsp;we&nbsp;need&nbsp;to&nbsp;fix&nbsp;for&nbsp;ML2:&lt;br&gt;<br>
&lt;br&gt;<br>
1)&nbsp;GAC&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;GAC&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;since&nbsp;it&nbsp;break&nbsp;the&nbsp;isolation&nbsp;provided&nbsp;by&nbsp;the&lt;br&gt;<br>
XAP&nbsp;(and&nbsp;compatibility&nbsp;with&nbsp;MS&nbsp;Silverlight).&nbsp;Right&nbsp;now&nbsp;our&nbsp;2.1&lt;br&gt;<br>
assemblies&nbsp;are&nbsp;stored&nbsp;in&nbsp;the&nbsp;GAC&nbsp;(except&nbsp;mscorlib.dll&nbsp;iirc).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
2)&nbsp;Platform&nbsp;Code&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;CoreCLR&nbsp;security&nbsp;model&nbsp;[1]&nbsp;works&nbsp;because&nbsp;there&amp;#39;s&nbsp;a&nbsp;clear&nbsp;distinction&lt;br&gt;<br>
between&nbsp;the&nbsp;&amp;quot;platform&amp;quot;&nbsp;(plugin&nbsp;provided)&nbsp;and&nbsp;the&nbsp;&amp;quot;application&amp;quot;&nbsp;(user&lt;br&gt;<br>
provided)&nbsp;code.&nbsp;AFAIK&nbsp;Silverlight&nbsp;2.0&nbsp;detect&nbsp;platform&nbsp;code&nbsp;using&nbsp;2&lt;br&gt;<br>
tricks:&lt;br&gt;<br>
&lt;br&gt;<br>
(a)&nbsp;code&nbsp;location:&nbsp;it&amp;#39;s&nbsp;not&nbsp;the&nbsp;in&nbsp;GAC,&nbsp;but&nbsp;stored&nbsp;in&nbsp;a&nbsp;single&nbsp;directory&lt;br&gt;<br>
(b)&nbsp;code&nbsp;signing&lt;br&gt;<br>
&lt;br&gt;<br>
Since&nbsp;(b)&nbsp;is&nbsp;not&nbsp;an&nbsp;easy&nbsp;option&nbsp;for&nbsp;open&nbsp;source&nbsp;software&nbsp;we&amp;#39;ll&nbsp;need&nbsp;to&lt;br&gt;<br>
rely&nbsp;(even&nbsp;more)&nbsp;on&nbsp;(a).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Suggestions:&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;short&nbsp;term&nbsp;(platform&nbsp;code)&lt;br&gt;<br>
&lt;br&gt;<br>
Move&nbsp;all&nbsp;moonlight&nbsp;platform&nbsp;code&nbsp;[1]&nbsp;under&nbsp;the&nbsp;plugin&nbsp;moonlight&lt;br&gt;<br>
directory&nbsp;(i.e.&nbsp;same&nbsp;location&nbsp;as&nbsp;the&nbsp;downloaded&nbsp;codecs).&nbsp;By&nbsp;keeping&nbsp;a&lt;br&gt;<br>
list&nbsp;of&nbsp;known&nbsp;assemblies&nbsp;(names)&nbsp;this&nbsp;gives&nbsp;us&nbsp;a&nbsp;known,&nbsp;full&nbsp;path&nbsp;to&lt;br&gt;<br>
every&nbsp;platform&nbsp;assemblies&nbsp;(easy&nbsp;and&nbsp;safer&nbsp;to&nbsp;check).&nbsp;This&nbsp;also&nbsp;removes&lt;br&gt;<br>
part&nbsp;of&nbsp;ML&nbsp;dependence&nbsp;on&nbsp;the&nbsp;GAC.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;long&nbsp;term&nbsp;(GAC)&lt;br&gt;<br>
&lt;br&gt;<br>
Make&nbsp;sure&nbsp;the&nbsp;GAC&nbsp;cannot&nbsp;be&nbsp;indirectly&nbsp;used&nbsp;by&nbsp;the&nbsp;plugin.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Comments&nbsp;?&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;Change&nbsp;mono&nbsp;to&nbsp;be&nbsp;possible&nbsp;to&nbsp;disable&nbsp;GAC&nbsp;support&nbsp;or&nbsp;make&nbsp;the&nbsp;assembly&nbsp;search&nbsp;code&lt;br&gt;plugable.&lt;br&gt;So&nbsp;for&nbsp;moonlight&nbsp;either&nbsp;a&nbsp;./configure&nbsp;--enable-minimal=gac&nbsp;or&nbsp;overriding&nbsp;the&nbsp;search&nbsp;code&lt;br&gt;would&nbsp;solve&nbsp;most,&nbsp;if&nbsp;not&nbsp;all,&nbsp;concerns.&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
