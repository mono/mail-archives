<tt>
Hey&nbsp;folks,&lt;br&gt;&lt;br&gt;The&nbsp;attached&nbsp;patch&nbsp;add&nbsp;support&nbsp;for&nbsp;Moonlight&nbsp;working&nbsp;on&nbsp;top&nbsp;of&nbsp;OpenVG.&nbsp;Basically,&nbsp;there&nbsp;are&nbsp;three&nbsp;components&nbsp;that&nbsp;are&nbsp;modified&nbsp;or&nbsp;provided&nbsp;:&nbsp;ShivaVG&nbsp;(the&nbsp;OpenVG&nbsp;implementation&nbsp;used&nbsp;in&nbsp;the&nbsp;port&nbsp;which&nbsp;is&nbsp;based&nbsp;on&nbsp;OpenGL),&nbsp;Cairo&nbsp;(by&nbsp;adding&nbsp;the&nbsp;OpenVG&nbsp;surface)&nbsp;and&nbsp;Moonlight&nbsp;itself&nbsp;(for&nbsp;using&nbsp;correctly&nbsp;the&nbsp;new&nbsp;surface).&lt;br&gt;<br>
&lt;br&gt;Dependencies&lt;br&gt;============&lt;br&gt;&lt;br&gt;-&nbsp;liboil&nbsp;0.3&lt;br&gt;-&nbsp;gtkglext&nbsp;1.2.0&lt;br&gt;-&nbsp;an&nbsp;accelerated&nbsp;OpenGL&nbsp;with&nbsp;PBO&nbsp;support&nbsp;(glxinfo&nbsp;|&nbsp;grep&nbsp;&amp;#39;GL_ARB_pixel_buffer_object&amp;#39;)&lt;br&gt;&lt;br&gt;How&nbsp;to&nbsp;build&lt;br&gt;==========&lt;br&gt;&lt;br&gt;-&nbsp;Extract&nbsp;the&nbsp;provided&nbsp;ShivaVG&nbsp;tarball,&nbsp;then,&nbsp;before&nbsp;calling&nbsp;autogen.sh&nbsp;and&nbsp;configure,&nbsp;run&nbsp;`source&nbsp;exportShivavg.sh&amp;#39;&nbsp;which&nbsp;set&nbsp;up&nbsp;some&nbsp;environment&nbsp;variables.&nbsp;After&nbsp;that,&nbsp;make&nbsp;and&nbsp;make&nbsp;install&nbsp;as&nbsp;usual.&lt;br&gt;<br>
&lt;br&gt;-&nbsp;Compile&nbsp;moon&nbsp;with&nbsp;openvg.patch&nbsp;applied&nbsp;(patch&nbsp;based&nbsp;on&nbsp;r138450).&nbsp;Before&nbsp;running&nbsp;autogen.sh&nbsp;or&nbsp;configure,&nbsp;run&nbsp;`source&nbsp;exportMoon.sh&amp;#39;&nbsp;which&nbsp;also&nbsp;setup&nbsp;some&nbsp;environment&nbsp;variables.&nbsp;You&nbsp;may&nbsp;have&nbsp;to&nbsp;`make&nbsp;clean&nbsp;&amp;amp;&amp;amp;&nbsp;make&nbsp;distclean&amp;#39;&nbsp;for&nbsp;things&nbsp;to&nbsp;work&nbsp;correctly.&lt;br&gt;<br>
&lt;br&gt;Demos&nbsp;that&nbsp;are&nbsp;known&nbsp;to&nbsp;&amp;quot;work&amp;quot;&lt;br&gt;=========================&lt;br&gt;&lt;br&gt;-&nbsp;BubbleMark&nbsp;:&nbsp;&lt;a&nbsp;href=&quot;http://bubblemark.com/silverlight2.html&quot;&gt;http://bubblemark.com/silverlight2.html&lt;/a&gt;&lt;br&gt;-&nbsp;DeepZoom&nbsp;map&nbsp;:&nbsp;&lt;a&nbsp;href=&quot;http://blogs.msdn.com/lutzg/archive/2009/03/03/panning-across-large-maps-with-deep-zoom-and-custom-animations.aspx&quot;&gt;http://blogs.msdn.com/lutzg/archive/2009/03/03/panning-across-large-maps-with-deep-zoom-and-custom-animations.aspx&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;TODO&lt;br&gt;=====&lt;br&gt;&lt;br&gt;-&nbsp;Find&nbsp;a&nbsp;way&nbsp;to&nbsp;not&nbsp;monopolize&nbsp;GLib&nbsp;mainloop&nbsp;(fix&nbsp;Firefox&nbsp;redrawing).&lt;br&gt;-&nbsp;Add&nbsp;VBO&nbsp;to&nbsp;ShivaVG&nbsp;for&nbsp;path&nbsp;handling.&lt;br&gt;-&nbsp;Make&nbsp;Cairo&nbsp;OpenVG&nbsp;surface&nbsp;use&nbsp;more&nbsp;of&nbsp;ShivaVG&nbsp;rather&nbsp;than&nbsp;fallbacking&nbsp;on&nbsp;cairo_image_surface&nbsp;operations.&lt;br&gt;<br>
-&nbsp;Image&nbsp;caching&nbsp;on&nbsp;Moonlight&nbsp;is&nbsp;currently&nbsp;totally&nbsp;disabled.&nbsp;Create&nbsp;another&nbsp;cairo&nbsp;surface&nbsp;wrapping&nbsp;vgImage&nbsp;for&nbsp;that&nbsp;(that&nbsp;could&nbsp;maybe&nbsp;be&nbsp;returned&nbsp;by&nbsp;cairo_surface_create_similar&nbsp;to&nbsp;keep&nbsp;the&nbsp;current&nbsp;caching&nbsp;code&nbsp;working).&lt;br&gt;<br>
-&nbsp;Get&nbsp;that&nbsp;f*ck*ng&nbsp;slowdown&nbsp;on&nbsp;NVidia&nbsp;squashed.&lt;br&gt;-&nbsp;Handle&nbsp;the&nbsp;resize&nbsp;of&nbsp;the&nbsp;canvas.&lt;br&gt;&lt;br&gt;About&nbsp;Silverlight&nbsp;3.0&lt;br&gt;===============&lt;br&gt;&lt;br&gt;The&nbsp;cool&nbsp;thing&nbsp;about&nbsp;ShivaVG&nbsp;here&nbsp;is&nbsp;that&nbsp;it&nbsp;relies&nbsp;on&nbsp;OpenGL.&nbsp;It&nbsp;means&nbsp;that&nbsp;when&nbsp;Moonlight&nbsp;will&nbsp;transition&nbsp;to&nbsp;SL&nbsp;3.0&nbsp;and&nbsp;its&nbsp;3D&nbsp;effects,&nbsp;you&nbsp;can&nbsp;basically&nbsp;still&nbsp;call&nbsp;Cairo/OpenVG&nbsp;for&nbsp;the&nbsp;2D&nbsp;stuff&nbsp;and&nbsp;insert&nbsp;some&nbsp;other&nbsp;OpenGL&nbsp;calls&nbsp;when&nbsp;3D&nbsp;is&nbsp;necessary.&lt;br&gt;<br>
&lt;br&gt;Cheers.&lt;br&gt;&lt;br&gt;--&lt;br&nbsp;clear=&quot;all&quot;&gt;Jérémie&nbsp;Laval&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:jeremie.laval@gmail.com&quot;&gt;jeremie.laval@gmail.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://garuma.wordpress.com&quot;&gt;http://garuma.wordpress.com&lt;/a&gt;&lt;br&gt;<br>

</tt>
