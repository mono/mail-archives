<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Mar&nbsp;6,&nbsp;2009&nbsp;at&nbsp;6:14&nbsp;PM,&nbsp;Geoff&nbsp;Norton&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:gnorton@novell.com&quot;&gt;gnorton@novell.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
&nbsp;&nbsp;<br>
<br>
&lt;div&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#ffffff&quot;&gt;<br>
Following&nbsp;up&nbsp;on&nbsp;a&nbsp;few&nbsp;points&nbsp;here.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;03/06/2009&nbsp;08:44&nbsp;PM,&nbsp;Miguel&nbsp;de&nbsp;Icaza&nbsp;wrote:<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&gt;Hello,<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;a)&nbsp;In&nbsp;the&nbsp;XPI&nbsp;of&nbsp;Moonlight&nbsp;itself&nbsp;(this&nbsp;seemed&nbsp;to&nbsp;be&nbsp;the&nbsp;preferred<br>
election&nbsp;of&nbsp;some&nbsp;people&nbsp;in&nbsp;the&nbsp;IRC&nbsp;channel).<br>
Disadvantage:&nbsp;it&nbsp;would&nbsp;pull&nbsp;some&nbsp;dependencies&nbsp;such&nbsp;as&nbsp;atk-sharp&nbsp;and<br>
glib-sharp&nbsp;so&nbsp;the&nbsp;XPI&nbsp;size&nbsp;grows.<br>
Advantage:&nbsp;everybody&nbsp;gets&nbsp;native&nbsp;accessibility&nbsp;support&nbsp;in&nbsp;Linux&nbsp;if&nbsp;they<br>
have&nbsp;their&nbsp;corresponding&nbsp;A11Y&nbsp;client&nbsp;software&nbsp;installed&nbsp;(at-spi,&nbsp;screen<br>
readers,&nbsp;etc.),&nbsp;without&nbsp;the&nbsp;need&nbsp;of&nbsp;packaging&nbsp;the&nbsp;bridge&nbsp;for&nbsp;every&nbsp;distro.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&gt;I&nbsp;would&nbsp;not&nbsp;want&nbsp;to&nbsp;ship&nbsp;glib-sharp,&nbsp;atk-sharp&nbsp;or&nbsp;anything&nbsp;like&nbsp;that.<br>
<br>
The&nbsp;UIA&nbsp;code&nbsp;probably&nbsp;should&nbsp;not&nbsp;use&nbsp;those&nbsp;either,&nbsp;it&nbsp;likely&nbsp;can&nbsp;get<br>
away&nbsp;by&nbsp;just&nbsp;P/Invoking&nbsp;the&nbsp;handful&nbsp;of&nbsp;calls&nbsp;that&nbsp;it&nbsp;needs.<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Agreed,&nbsp;you&nbsp;cannot&nbsp;possibly&nbsp;need&nbsp;that&nbsp;many&nbsp;functions&nbsp;that&nbsp;you&nbsp;cannot<br>
just&nbsp;pinvoke&nbsp;them&nbsp;directly.&lt;br&gt;<br>
Additionally,&nbsp;I&amp;#39;m&nbsp;not&nbsp;keen&nbsp;on&nbsp;the&nbsp;glue&nbsp;associated&nbsp;with&nbsp;them. &nbsp;Doesn&amp;#39;t<br>
firefox&nbsp;provide&nbsp;its&nbsp;own&nbsp;accessibility&nbsp;plumbing&nbsp;for&nbsp;extensions/plugins<br>
anyways? &nbsp;Someone&nbsp;needs&nbsp;to&nbsp;do&nbsp;some&nbsp;digging&nbsp;here.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;Firefox&nbsp;definitely&nbsp;doesn&amp;#39;t&nbsp;provide&nbsp;accessibility&nbsp;plumbing&nbsp;for&nbsp;plugins&nbsp;(or&nbsp;at&nbsp;least&nbsp;nothing&nbsp;in&nbsp;a&nbsp;form&nbsp;we&nbsp;can&nbsp;use&nbsp;if&nbsp;we&nbsp;want&nbsp;to&nbsp;remain&nbsp;browser&nbsp;agnostic). &nbsp;extensions&nbsp;perhaps,&nbsp;since&nbsp;they&nbsp;can&nbsp;tie&nbsp;directly&nbsp;into&nbsp;the&nbsp;chrome&nbsp;via&nbsp;an&nbsp;overlay,&nbsp;but&nbsp;that&nbsp;doesn&amp;#39;t&nbsp;help&nbsp;us.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;share&nbsp;sandy&amp;#39;s&nbsp;confusion&nbsp;when&nbsp;it&nbsp;comes&nbsp;to&nbsp;atk-sharp/glib-sharp. &nbsp;It&amp;#39;s&nbsp;not&nbsp;like&nbsp;they&amp;#39;re&nbsp;huge&nbsp;apis. &nbsp;We&nbsp;could&nbsp;tune&nbsp;them&nbsp;to&nbsp;remove&nbsp;what&nbsp;we&nbsp;don&amp;#39;t&nbsp;need&nbsp;in&nbsp;the&nbsp;moonlight&nbsp;case,&nbsp;but&nbsp;I&amp;#39;d&nbsp;*much*&nbsp;rather&nbsp;base&nbsp;whatever&nbsp;we&nbsp;use&nbsp;off&nbsp;something&nbsp;that&nbsp;has&nbsp;a&nbsp;release&nbsp;#&nbsp;attached&nbsp;to&nbsp;it&nbsp;instead&nbsp;of&nbsp;a&nbsp;potentially&nbsp;large&nbsp;number&nbsp;of&nbsp;c&amp;amp;p&amp;#39;ed&nbsp;pinvokes,&nbsp;especially&nbsp;given&nbsp;that&nbsp;any&nbsp;distribution&nbsp;mechanism&nbsp;we&nbsp;choose&nbsp;has&nbsp;an&nbsp;update&nbsp;mechanism&nbsp;available.&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;c)&nbsp;In&nbsp;a&nbsp;2nd&nbsp;XPI.<br>
Advantage:&nbsp;it&amp;#39;s&nbsp;optional&nbsp;so&nbsp;we&nbsp;don&amp;#39;t&nbsp;grow&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;Moonlight&nbsp;XPI.<br>
Advantage:&nbsp;packaged&nbsp;for&nbsp;every&nbsp;Firefox&nbsp;user&nbsp;regardless&nbsp;of&nbsp;the&nbsp;distro&nbsp;used.<br>
Disadvantage/Limitation?:&nbsp;can&nbsp;dependencies&nbsp;between&nbsp;extensions&nbsp;be<br>
defined?&nbsp;Mmm,&nbsp;googled&nbsp;quickly&nbsp;and&nbsp;it&nbsp;seems&nbsp;to&nbsp;be&nbsp;supported:<br>
&lt;a&nbsp;href=&quot;http://forums.mozillazine.org/viewtopic.php?f=38&amp;amp;t=458040&amp;amp;start=0&amp;amp;st=0&amp;amp;sk=t&amp;amp;sd=a&quot;&nbsp;target=&quot;_blank&quot;&gt;http://forums.mozillazine.org/viewtopic.php?f=38&amp;amp;t=458040&amp;amp;start=0&amp;amp;st=0&amp;amp;sk=t&amp;amp;sd=a&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&gt;This&nbsp;is&nbsp;another&nbsp;viable&nbsp;option&nbsp;if&nbsp;you&nbsp;really&nbsp;want&nbsp;to&nbsp;ship&nbsp;all&nbsp;of&nbsp;those<br>
extra&nbsp;libraries.&lt;br&gt;&lt;br&gt;&lt;/pre&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;br&gt;We&nbsp;can&nbsp;also&nbsp;provide&nbsp;an&nbsp;accessibility&nbsp;download&nbsp;in&nbsp;much&nbsp;the&nbsp;same&nbsp;way&nbsp;as&nbsp;we&nbsp;do&nbsp;with&nbsp;codecs&nbsp;in&nbsp;the&nbsp;xpi&nbsp;case. &nbsp;Maybe&nbsp;flesh&nbsp;out&nbsp;the&nbsp;both&nbsp;the&lt;br&gt;&lt;a&nbsp;href=&quot;http://go-mono.com/moonlight&quot;&gt;go-mono.com/moonlight&lt;/a&gt;&nbsp;page,&nbsp;and&nbsp;also&nbsp;the&nbsp;right&nbsp;click&nbsp;menu/properties&nbsp;dialog.&lt;/pre&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;pre&gt;&lt;br&gt; I&nbsp;do&nbsp;not&nbsp;know&nbsp;why&nbsp;System.Windows.dll&nbsp;needs&nbsp;to&nbsp;have&nbsp;a&nbsp;hard&nbsp;dependency&nbsp;on<br>
the&nbsp;bridge,&nbsp;it&nbsp;should&nbsp;probably&nbsp;have&nbsp;it&nbsp;on&nbsp;the&nbsp;accessibility&nbsp;assembly,<br>
and&nbsp;that&nbsp;assembly&nbsp;should&nbsp;likely&nbsp;have&nbsp;a&nbsp;soft&nbsp;dependency,&nbsp;and&nbsp;fall&nbsp;back<br>
gracefully&nbsp;if&nbsp;libraries/packages&nbsp;are&nbsp;not&nbsp;installed.<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&gt;<br>
Agreed.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#ffffff&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;B:&nbsp;Local&nbsp;Reflection:&nbsp;System.Windows.dll&nbsp;would&nbsp;try&nbsp;to&nbsp;locate&nbsp;the&nbsp;bridge<br>
from&nbsp;the&nbsp;Moonlight&amp;#39;s&nbsp;GAC.<br>
<br>
C:&nbsp;Reflection&nbsp;to&nbsp;a&nbsp;different&nbsp;GAC:&nbsp;System.Windows.dll&nbsp;would&nbsp;try&nbsp;to&nbsp;locate<br>
the&nbsp;bridge&nbsp;from&nbsp;the&nbsp;System&nbsp;GAC&nbsp;(I&amp;#39;ve&nbsp;done&nbsp;a&nbsp;proof&nbsp;of&nbsp;concept&nbsp;in<br>
System.Windows.dll&nbsp;and&nbsp;this&nbsp;works&nbsp;specifying&nbsp;an&nbsp;absolute&nbsp;URI,&nbsp;although<br>
some&nbsp;moon&nbsp;devs&nbsp;have&nbsp;stated&nbsp;that&nbsp;the&nbsp;fact&nbsp;that&nbsp;it&nbsp;worked&nbsp;may&nbsp;be&nbsp;a&nbsp;bug).<br>
<br>
D:&nbsp;Embedding&nbsp;API:&nbsp;we&nbsp;would&nbsp;use&nbsp;some&nbsp;mono_assembly_load_*&nbsp;if&nbsp;we&nbsp;decide<br>
that&nbsp;moonlight&nbsp;should&nbsp;load&nbsp;the&nbsp;bridge&nbsp;instead&nbsp;of&nbsp;the&nbsp;UIA&nbsp;Provider.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Lets&nbsp;keep&nbsp;in&nbsp;mind,&nbsp;moonlight&nbsp;doesn&amp;#39;t&nbsp;really&nbsp;have&nbsp;a&nbsp;&amp;quot;gac&amp;quot;,&nbsp;and&nbsp;will<br>
certainly&nbsp;not&nbsp;go&nbsp;loading&nbsp;stuff&nbsp;from&nbsp;/usr/lib/whatever&nbsp;if&nbsp;its&nbsp;been<br>
installed&nbsp;from&nbsp;xpi.&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&nbsp;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#ffffff&quot;&gt;&lt;br&gt;<br>
Additional&nbsp;concerns:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;What&nbsp;about&nbsp;fully&nbsp;unmanaged&nbsp;items&nbsp;that&nbsp;we&nbsp;have,&nbsp;do&nbsp;they&nbsp;take&nbsp;part&nbsp;in<br>
a11y? &nbsp;What&nbsp;about&nbsp;items&nbsp;that&nbsp;we&nbsp;have&nbsp;a&nbsp;light &nbsp;managed&nbsp;wrapper&nbsp;over&nbsp;a<br>
native&nbsp;implementation,&nbsp;will&nbsp;there&nbsp;be&nbsp;enough&nbsp;information&nbsp;for&nbsp;you&nbsp;here?&lt;br&gt;<br>
Is&nbsp;there&nbsp;a&nbsp;list&nbsp;of&nbsp;SL2&nbsp;accessible&nbsp;controls&nbsp;and&nbsp;what&nbsp;they&nbsp;need?&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;The&nbsp;system.windows.automation.peer/system.windows.automation.provider&nbsp;namespaces&nbsp;(which&nbsp;I&nbsp;*think*&nbsp;are&nbsp;at&nbsp;least&nbsp;api&nbsp;complete&nbsp;wrt&nbsp;gui-compare)&nbsp;should&nbsp;show&nbsp;us&nbsp;the&nbsp;minimum&nbsp;we&nbsp;need&nbsp;to&nbsp;expose. &nbsp;I&nbsp;don&amp;#39;t&nbsp;think&nbsp;we&nbsp;need&nbsp;to&nbsp;do&nbsp;a&nbsp;comprehensive&nbsp;audit&nbsp;before&nbsp;beginning,&nbsp;though. &nbsp;We&nbsp;can&nbsp;solve&nbsp;any&nbsp;issues&nbsp;as&nbsp;they&nbsp;come&nbsp;up&nbsp;-&nbsp;they&amp;#39;re&nbsp;pretty&nbsp;much&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;small.&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;chris&lt;br&gt;<br>

</tt>
