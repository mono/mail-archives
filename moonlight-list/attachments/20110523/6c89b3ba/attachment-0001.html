<tt>
Aaaand&nbsp;another&nbsp;issue&nbsp;or&nbsp;two&nbsp;:)&lt;br&gt;&lt;br&gt;moonlight-desktop&nbsp;has&nbsp;a&nbsp;bit&nbsp;of&nbsp;a&nbsp;problem&nbsp;when&nbsp;it&nbsp;comes&nbsp;to&nbsp;loading&nbsp;assemblies.&nbsp;The&nbsp;traditional&nbsp;way&nbsp;to&nbsp;load&nbsp;an&nbsp;assembly&nbsp;in&nbsp;a&nbsp;Moonlight/Silverlight&nbsp;application&nbsp;is&nbsp;to&nbsp;add&nbsp;it&nbsp;to&nbsp;your&nbsp;AppManifest.xaml&nbsp;file.&nbsp;When&nbsp;the&nbsp;application&nbsp;starts&nbsp;up,&nbsp;all&nbsp;assemblies&nbsp;referenced&nbsp;in&nbsp;the&nbsp;AppManifest&nbsp;are&nbsp;loaded.&nbsp;If&nbsp;they&nbsp;are&nbsp;core&nbsp;assemblies&nbsp;like&nbsp;System.Windows,&nbsp;they&nbsp;are&nbsp;loaded&nbsp;automatically&nbsp;by&nbsp;the&nbsp;plugin&nbsp;from&nbsp;the&nbsp;private&nbsp;&amp;#39;gac&amp;#39;&nbsp;the&nbsp;plugin&nbsp;has.&nbsp;If&nbsp;they&amp;#39;re&nbsp;in&nbsp;the&nbsp;XAP&nbsp;file&nbsp;they&nbsp;are&nbsp;loaded&nbsp;from&nbsp;the&nbsp;directory&nbsp;where&nbsp;the&nbsp;XAP&nbsp;was&nbsp;decompressed&nbsp;to&nbsp;and&nbsp;finally&nbsp;if&nbsp;they&amp;#39;re&nbsp;ExternalParts&nbsp;assemblies&nbsp;they&nbsp;are&nbsp;downloaded&nbsp;from&nbsp;a&nbsp;remote&nbsp;location&nbsp;to&nbsp;a&nbsp;temporary&nbsp;directory&nbsp;and&nbsp;loaded&nbsp;from&nbsp;there.&nbsp;This&nbsp;way&nbsp;the&nbsp;assemblies&nbsp;are&nbsp;already&nbsp;loaded&nbsp;and&nbsp;usable&nbsp;when&nbsp;you&nbsp;start&nbsp;parsing&nbsp;xaml&nbsp;so&nbsp;when&nbsp;the&nbsp;xaml&nbsp;parser&nbsp;sees&nbsp;types&nbsp;like&nbsp;&amp;quot;sdk:GridSplitter&amp;quot;&nbsp;it&nbsp;already&nbsp;has&nbsp;the&nbsp;correct&nbsp;assembly&nbsp;loaded&nbsp;and&nbsp;can&nbsp;find&nbsp;the&nbsp;correct&nbsp;type&nbsp;and&nbsp;instantiate&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;The&nbsp;problem&nbsp;with&nbsp;moonlight-desktop&nbsp;is&nbsp;two-fold.&nbsp;First&nbsp;we&nbsp;never&nbsp;parse&nbsp;the&nbsp;AppManifest.xaml&nbsp;file.&nbsp;Secondly&nbsp;even&nbsp;if&nbsp;we&nbsp;parse&nbsp;it&nbsp;to&nbsp;figure&nbsp;out&nbsp;what&nbsp;assemblies&nbsp;we&nbsp;have&nbsp;to&nbsp;load,&nbsp;there&nbsp;is&nbsp;no&nbsp;xap&nbsp;containing&nbsp;the&nbsp;SDK&nbsp;assemblies&nbsp;so&nbsp;we&nbsp;can&amp;#39;t&nbsp;load&nbsp;them&nbsp;and&nbsp;end&nbsp;up&nbsp;throwing&nbsp;an&nbsp;AssemblyNotFound&nbsp;exception&nbsp;at&nbsp;startup.&nbsp;This&nbsp;is&nbsp;because&nbsp;moonlight&nbsp;cannot&nbsp;load&nbsp;the&nbsp;assembly&nbsp;from&nbsp;the&nbsp;GAC&nbsp;using&nbsp;just&nbsp;the&nbsp;name&nbsp;&amp;quot;System.Windows.Controls.dll&amp;quot;.&lt;br&gt;<br>
&lt;br&gt;We&nbsp;have&nbsp;three&nbsp;possible&nbsp;solutions&nbsp;for&nbsp;this&nbsp;that&nbsp;I&nbsp;can&nbsp;think&nbsp;of.&lt;br&gt;1)&nbsp;As&nbsp;there&nbsp;are&nbsp;a&nbsp;limited&nbsp;number&nbsp;of&nbsp;assemblies&nbsp;which&nbsp;can&nbsp;be&nbsp;accessed&nbsp;in&nbsp;<br>
this&nbsp;way&nbsp;(just&nbsp;the&nbsp;6&nbsp;or&nbsp;so&nbsp;SDK&nbsp;assemblies),&nbsp;then&nbsp;we&nbsp;can&nbsp;potentially&nbsp;<br>
hardcode&nbsp;in&nbsp;specific&nbsp;support&nbsp;for&nbsp;loading&nbsp;these&nbsp;from&nbsp;the&nbsp;GAC&nbsp;when&nbsp;they&nbsp;<br>
are&nbsp;detected&nbsp;in&nbsp;a&nbsp;moonlight-desktop&nbsp;application.&lt;br&gt;&lt;br&gt;2)&nbsp;Ask&nbsp;people&nbsp;to&nbsp;always&nbsp;copy&nbsp;SDK&nbsp;assemblies&nbsp;locally&nbsp;when&nbsp;compiling&nbsp;their&nbsp;application.&nbsp;This&nbsp;is&nbsp;already&nbsp;what&nbsp;happens&nbsp;when&nbsp;you&nbsp;build&nbsp;a&nbsp;regular&nbsp;silverlight/moonlight&nbsp;application.&lt;br&gt;<br>
&lt;br&gt;3)&nbsp;Bundle&nbsp;desktop&nbsp;applications&nbsp;as&nbsp;a&nbsp;regular&nbsp;xap&nbsp;file&nbsp;just&nbsp;like&nbsp;web&nbsp;applications.&lt;br&gt;&lt;br&gt;Some&nbsp;distros&nbsp;may&nbsp;not&nbsp;like&nbsp;the&nbsp;idea&nbsp;of&nbsp;applications&nbsp;bundling&nbsp;these&nbsp;SDK&nbsp;assemblies&nbsp;so&nbsp;maybe&nbsp;providing&nbsp;a&nbsp;mechanism&nbsp;to&nbsp;load&nbsp;the&nbsp;SDK&nbsp;assemblies&nbsp;from&nbsp;the&nbsp;GAC&nbsp;would&nbsp;be&nbsp;the&nbsp;best&nbsp;option.&nbsp;It&nbsp;would&nbsp;also&nbsp;make&nbsp;it&nbsp;easier&nbsp;to&nbsp;roll&nbsp;out&nbsp;fixes&nbsp;to&nbsp;moonlight-desktop&nbsp;applications&nbsp;as&nbsp;if&nbsp;there&nbsp;was&nbsp;a&nbsp;bug&nbsp;in&nbsp;an&nbsp;SDK&nbsp;assembly&nbsp;a&nbsp;simple&nbsp;update&nbsp;of&nbsp;that&nbsp;package&nbsp;would&nbsp;roll&nbsp;the&nbsp;fix&nbsp;out&nbsp;to&nbsp;every&nbsp;desktop&nbsp;app&nbsp;using&nbsp;the&nbsp;assembly.&nbsp;If&nbsp;they&nbsp;all&nbsp;bundled&nbsp;the&nbsp;assemblies&nbsp;they&nbsp;would&nbsp;have&nbsp;to&nbsp;be&nbsp;updated&nbsp;individually.&nbsp;This&nbsp;would&nbsp;make&nbsp;option&nbsp;1&nbsp;preferable.&lt;br&gt;<br>
&lt;br&gt;Does&nbsp;anyone&nbsp;have&nbsp;any&nbsp;preferences&nbsp;on&nbsp;how&nbsp;to&nbsp;fix&nbsp;or&nbsp;work&nbsp;around&nbsp;this&nbsp;issue?&lt;br&gt;&lt;br&gt;Alan&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;May&nbsp;20,&nbsp;2011&nbsp;at&nbsp;7:26&nbsp;PM,&nbsp;Alan&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:alan.mcgovern@gmail.com&quot;&gt;alan.mcgovern@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;Hey,&lt;br&gt;<br>
&lt;br&gt;<br>
It&amp;#39;d&nbsp;be&nbsp;trivial&nbsp;to&nbsp;put&nbsp;a&nbsp;dependency&nbsp;in&nbsp;the&nbsp;packages&nbsp;to&nbsp;ensure&nbsp;that&nbsp;if&lt;br&gt;<br>
you&nbsp;install&nbsp;moonlight-desktop-devel&nbsp;or&nbsp;moonlight-web-devel&nbsp;that&nbsp;you&lt;br&gt;<br>
also&nbsp;install&nbsp;the&nbsp;debugger&nbsp;enabled&nbsp;moonlight-developer-plugin&nbsp;instead&lt;br&gt;<br>
of&nbsp;the&nbsp;regular&nbsp;moonlight-plugin.&nbsp;However&nbsp;if&nbsp;it&nbsp;isn&amp;#39;t&nbsp;a&nbsp;security&nbsp;issue&lt;br&gt;<br>
or&nbsp;anything,&nbsp;we&nbsp;can&nbsp;trivially&nbsp;have&nbsp;everything&nbsp;debugger&nbsp;enabled.&nbsp;I&amp;#39;d&lt;br&gt;<br>
prefer&nbsp;just&nbsp;debugger&nbsp;enabling&nbsp;all&nbsp;our&nbsp;builds&nbsp;but&nbsp;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;if&lt;br&gt;<br>
there&amp;#39;d&nbsp;be&nbsp;an&nbsp;unexpected&nbsp;and&nbsp;unwelcome&nbsp;consequences&nbsp;from&nbsp;that&nbsp;:)&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Alan&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
On&nbsp;Fri,&nbsp;May&nbsp;20,&nbsp;2011&nbsp;at&nbsp;6:28&nbsp;PM,&nbsp;Miguel&nbsp;de&nbsp;Icaza&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:miguel@xamarin.com&quot;&gt;miguel@xamarin.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;gt;1)&nbsp;Debug&nbsp;support&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;gt;Issue:&nbsp;The&nbsp;section&nbsp;of&nbsp;code&nbsp;which&nbsp;initiates&nbsp;SDB&nbsp;is&nbsp;only&nbsp;compiled&nbsp;in&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;gt;builds&nbsp;which&nbsp;define&nbsp;the&nbsp;DEBUG&nbsp;symbol.&nbsp;This&nbsp;means&nbsp;that&nbsp;regular&nbsp;release&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;gt;builds&nbsp;cannot&nbsp;have&nbsp;a&nbsp;debugger&nbsp;attached.&nbsp;Do&nbsp;we&nbsp;want&nbsp;all&nbsp;our&nbsp;release&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;gt;builds&nbsp;to&nbsp;be&nbsp;debuggable&nbsp;or&nbsp;do&nbsp;we&nbsp;want&nbsp;to&nbsp;have&nbsp;a&nbsp;separate&nbsp;&amp;#39;Developer&amp;#39;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;gt;runtime&nbsp;which&nbsp;has&nbsp;debug&nbsp;support&nbsp;enabled.&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;gt;Solution:&nbsp;We&nbsp;can&nbsp;either&nbsp;enable&nbsp;debug&nbsp;support&nbsp;in&nbsp;release&nbsp;builds&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;gt;(security&nbsp;issue?)&nbsp;or&nbsp;have&nbsp;a&nbsp;separate&nbsp;moonlight-developer-plugin&nbsp;which&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;gt;will&nbsp;collide&nbsp;with/replace&nbsp;the&nbsp;regular&nbsp;moonlight-plugin.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;have&nbsp;debugging&nbsp;available&nbsp;on&nbsp;every&nbsp;build;&nbsp;Â If&nbsp;we&nbsp;do&nbsp;not&nbsp;do&lt;br&gt;<br>
&amp;gt;&nbsp;this,&nbsp;in&nbsp;practice,&nbsp;only&nbsp;2-3&nbsp;individuals&nbsp;in&nbsp;the&nbsp;whole&nbsp;planet&nbsp;will&nbsp;be&nbsp;able&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;endure&nbsp;the&nbsp;necessary&nbsp;steps&nbsp;necessary&nbsp;to&nbsp;get&nbsp;Moonlight&nbsp;running&nbsp;on&nbsp;their&lt;br&gt;<br>
&amp;gt;&nbsp;system&nbsp;to&nbsp;enable&nbsp;debugging.&lt;br&gt;<br>
&amp;gt;&nbsp;So&nbsp;the&nbsp;fewer&nbsp;steps&nbsp;necessary,&nbsp;the&nbsp;better.&lt;br&gt;<br>
&amp;gt;&nbsp;Miguel&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
