<tt>
&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Hi-&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;I'm<br>
not&nbsp;sure&nbsp;if&nbsp;this&nbsp;is&nbsp;the&nbsp;proper&nbsp;forum&nbsp;to&nbsp;submit&nbsp;patches...&nbsp;if&nbsp;not,&nbsp;just<br>
let&nbsp;me&nbsp;know.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;I&nbsp;tracked&nbsp;down&nbsp;a&nbsp;problem&nbsp;in&nbsp;the&nbsp;ClientHttp<br>
implementation&nbsp;where&nbsp;it&nbsp;appeared&nbsp;to&nbsp;be&nbsp;receiving&nbsp;empty&nbsp;responses.&nbsp;Turns<br>
out&nbsp;that&nbsp;when&nbsp;the&nbsp;CopyTo&nbsp;is&nbsp;performed&nbsp;on&nbsp;the&nbsp;response&nbsp;stream&nbsp;to&nbsp;a&nbsp;MemoryStream<br>
that&nbsp;resulting&nbsp;stream&nbsp;is&nbsp;never&nbsp;set&nbsp;back&nbsp;to&nbsp;the&nbsp;beginning.&nbsp;The&nbsp;BrowserHttp<br>
implementation&nbsp;has&nbsp;an&nbsp;explicit&nbsp;Seek&nbsp;in&nbsp;the&nbsp;GetResponseStream,&nbsp;but&nbsp;the&nbsp;ClientHttp<br>
was&nbsp;missing&nbsp;that.&nbsp;The&nbsp;following&nbsp;patch&nbsp;fixes&nbsp;the&nbsp;problem:&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;---&nbsp;a/class/System.Windows/System.Net.Browser/ClientHttpWebResponse.cs&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;+++&nbsp;b/class/System.Windows/System.Net.Browser/ClientHttpWebResponse.cs&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;@@&nbsp;-159,6&nbsp;+159,7&nbsp;@@&nbsp;namespace&nbsp;System.Net.Browser<br>
{&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;&amp;nbsp;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;public&nbsp;override&nbsp;Stream&nbsp;GetResponseStream&nbsp;()&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;stream.Seek&nbsp;(0,&nbsp;SeekOrigin.Begin);&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;return&nbsp;stream;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;}&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;An&nbsp;alternative&nbsp;would&nbsp;be&nbsp;to&nbsp;put&nbsp;the&nbsp;Seek()<br>
where&nbsp;the&nbsp;MemoryStream&nbsp;is&nbsp;initially&nbsp;created,&nbsp;but&nbsp;it&nbsp;seems&nbsp;better&nbsp;to&nbsp;be<br>
consistent&nbsp;with&nbsp;the&nbsp;BrowserHttp&nbsp;implementation.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Once&nbsp;bug&nbsp;659791&nbsp;(&lt;/font&gt;&lt;a&nbsp;href=&quot;https://bugzilla.novell.com/show_bug.cgi?id=659791&quot;&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;https://bugzilla.novell.com/show_bug.cgi?id=659791&lt;/font&gt;&lt;/a&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;)<br>
is&nbsp;fixed,&nbsp;the&nbsp;xap&nbsp;file&nbsp;attached&nbsp;to&nbsp;it&nbsp;will&nbsp;demonstrate&nbsp;the&nbsp;problem.&nbsp;To<br>
test&nbsp;this&nbsp;patch&nbsp;I&nbsp;just&nbsp;put&nbsp;in&nbsp;a&nbsp;temporary&nbsp;workaround&nbsp;to&nbsp;avoid&nbsp;the&nbsp;bug&nbsp;(the<br>
fix&nbsp;is&nbsp;a&nbsp;little&nbsp;more&nbsp;complicated).&nbsp;In&nbsp;that&nbsp;testcase,&nbsp;if&nbsp;you&nbsp;switch&nbsp;ClientHttp<br>
to&nbsp;BrowserHttp&nbsp;you&nbsp;can&nbsp;see&nbsp;the&nbsp;differing&nbsp;behavior.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Also,&nbsp;I&nbsp;had&nbsp;a&nbsp;quick&nbsp;question:&nbsp;Is&nbsp;there<br>
any&nbsp;good&nbsp;way&nbsp;to&nbsp;debug&nbsp;moonlight&nbsp;applications&nbsp;(like&nbsp;remotely&nbsp;via&nbsp;Dev&nbsp;Studio<br>
like&nbsp;for&nbsp;Mono&nbsp;apps)?&nbsp;I&nbsp;was&nbsp;able&nbsp;to&nbsp;debug&nbsp;the&nbsp;C&nbsp;portion&nbsp;of&nbsp;moonlight&nbsp;with<br>
gdb,&nbsp;but&nbsp;to&nbsp;track&nbsp;down&nbsp;anything&nbsp;in&nbsp;the&nbsp;C#&nbsp;I&nbsp;just&nbsp;started&nbsp;dumping&nbsp;Console.WriteLine's<br>
all&nbsp;over&nbsp;the&nbsp;place&nbsp;in&nbsp;the&nbsp;mono/moonlight&nbsp;code&nbsp;--&nbsp;which&nbsp;is&nbsp;pretty&nbsp;tedious<br>
;-)&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Thanx,&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;--Keenan&lt;/font&gt;
</tt>
