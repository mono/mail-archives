<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] Debian/Ubuntu packaging - now what?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20Debian/Ubuntu%20packaging%20-%20now%20what%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000820.html">
   <LINK REL="Next"  HREF="000808.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] Debian/Ubuntu packaging - now what?</H1>
    <B>Jo Shields</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20Debian/Ubuntu%20packaging%20-%20now%20what%3F&In-Reply-To="
       TITLE="[Moonlight-list] Debian/Ubuntu packaging - now what?">directhex at apebox.org
       </A><BR>
    <I>Sun Dec 20 11:46:57 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000820.html">[Moonlight-list] Moonlight+Silverlight portability: how	realistic?
</A></li>
        <LI>Next message: <A HREF="000808.html">[Moonlight-list] Feature Set of Moonlight 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#807">[ date ]</a>
              <a href="thread.html#807">[ thread ]</a>
              <a href="subject.html#807">[ subject ]</a>
              <a href="author.html#807">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm in the process of preparing some Debian/Ubuntu packaging for
Moonlight 2.0. I'm at the stage where it's building, and installing into
a temporary prefix. I know I need to do some RPATH mangling to make
things not break once they move out of the prefix and into /usr, but in
the broader scheme of things, I need to better understand the layout of
files and folders as installed to better understand what to do with
them.
     
Here's my moonprefix:
.
|<i>-- bin
</I>|<i>   |-- mopen
</I>|<i>   |-- munxap
</I>|<i>   |-- mxap
</I>|<i>   |-- respack
</I>|<i>   |-- smcs
</I>|<i>   |-- sockpol
</I>|<i>   |-- unrespack
</I>|<i>   |-- xaml2html
</I>|<i>   `-- xamlg
</I>|<i>-- lib
</I>|<i>   |-- libmoon.la
</I>|<i>   |-- libmoon.so -&gt; libmoon.so.0.0.0
</I>|<i>   |-- libmoon.so.0 -&gt; libmoon.so.0.0.0
</I>|<i>   |-- libmoon.so.0.0.0
</I>|<i>   |-- mono
</I>|<i>   |   |-- gac
</I>|<i>   |   |   |-- Moon.Windows.Desktop
</I>|<i>   |   |   |   `-- 3.0.0.0__0738eb9f132ed756
</I>|<i>   |   |   |       |-- Moon.Windows.Desktop.dll
</I>|<i>   |   |   |       `-- Moon.Windows.Desktop.dll.mdb
</I>|<i>   |   |   |-- Moonlight.Gtk
</I>|<i>   |   |   |   `-- 3.0.0.0__976ad8f3443f9a4d
</I>|<i>   |   |   |       |-- Moonlight.Gtk.dll
</I>|<i>   |   |   |       `-- Moonlight.Gtk.dll.mdb
</I>|<i>   |   |   |-- System.Windows
</I>|<i>   |   |   |   `-- 3.0.0.0__0738eb9f132ed756
</I>|<i>   |   |   |       |-- System.Windows.dll
</I>|<i>   |   |   |       |-- System.Windows.dll.config
</I>|<i>   |   |   |       `-- System.Windows.dll.mdb
</I>|<i>   |   |   |-- System.Windows.Browser
</I>|<i>   |   |   |   `-- 3.0.0.0__0738eb9f132ed756
</I>|<i>   |   |   |       |-- System.Windows.Browser.dll
</I>|<i>   |   |   |       `-- System.Windows.Browser.dll.mdb
</I>|<i>   |   |   |-- System.Windows.Controls
</I>|<i>   |   |   |   `-- 2.0.5.0__0738eb9f132ed756
</I>|<i>   |   |   |       |-- System.Windows.Controls.dll
</I>|<i>   |   |   |       `-- System.Windows.Controls.dll.mdb
</I>|<i>   |   |   `-- System.Windows.Controls.Data
</I>|<i>   |   |       `-- 2.0.5.0__0738eb9f132ed756
</I>|<i>   |   |           |-- System.Windows.Controls.Data.dll
</I>|<i>   |   |           `-- System.Windows.Controls.Data.dll.mdb
</I>|<i>   |   `-- moonlight
</I>|<i>   |       |-- Moon.Windows.Desktop.dll
</I>-&gt; ../gac/Moon.Windows.Desktop/3.0.0.0__0738eb9f132ed756/Moon.Windows.Desktop.dll
|<i>   |       |-- Moonlight.Gtk.dll
</I>|<i>   |       |-- System.Windows.Browser.dll
</I>-&gt; ../gac/System.Windows.Browser/3.0.0.0__0738eb9f132ed756/System.Windows.Browser.dll
|<i>   |       |-- System.Windows.Controls.Data.dll
</I>-&gt; ../gac/System.Windows.Controls.Data/2.0.5.0__0738eb9f132ed756/System.Windows.Controls.Data.dll
|<i>   |       |-- System.Windows.Controls.dll
</I>-&gt; ../gac/System.Windows.Controls/2.0.5.0__0738eb9f132ed756/System.Windows.Controls.dll
|<i>   |       `-- System.Windows.dll
</I>-&gt; ../gac/System.Windows/3.0.0.0__0738eb9f132ed756/System.Windows.dll
|<i>   |-- monodoc
</I>|<i>   |   `-- sources
</I>|<i>   |       |-- moonlight-gtk.source
</I>|<i>   |       |-- moonlight-gtk.tree
</I>|<i>   |       `-- moonlight-gtk.zip
</I>|<i>   `-- moonlight
</I>|<i>       |-- 2.0
</I>|<i>       |   |-- Microsoft.VisualBasic.dll
</I>|<i>       |   |-- Mono.CompilerServices.SymbolWriter.dll
</I>|<i>       |   |-- Mono.CompilerServices.SymbolWriter.dll.mdb
</I>|<i>       |   |-- System.Core.dll
</I>|<i>       |   |-- System.Core.dll.mdb
</I>|<i>       |   |-- System.Net.dll
</I>|<i>       |   |-- System.Net.dll.mdb
</I>|<i>       |   |-- System.Runtime.Serialization.dll
</I>|<i>       |   |-- System.Runtime.Serialization.dll.mdb
</I>|<i>       |   |-- System.ServiceModel.Web.dll
</I>|<i>       |   |-- System.ServiceModel.Web.dll.mdb
</I>|<i>       |   |-- System.ServiceModel.dll
</I>|<i>       |   |-- System.ServiceModel.dll.mdb
</I>|<i>       |   |-- System.Windows.Browser.dll
</I>|<i>       |   |-- System.Windows.Browser.dll.mdb
</I>|<i>       |   |-- System.Windows.dll
</I>|<i>       |   |-- System.Windows.dll.mdb
</I>|<i>       |   |-- System.Xml.dll
</I>|<i>       |   |-- System.Xml.dll.mdb
</I>|<i>       |   |-- System.dll
</I>|<i>       |   |-- System.dll.mdb
</I>|<i>       |   |-- buildversion
</I>|<i>       |   |-- mscorlib.dll
</I>|<i>       |   |-- mscorlib.dll.mdb
</I>|<i>       |   |-- respack.exe
</I>|<i>       |   |-- respack.exe.mdb
</I>|<i>       |   |-- smcs.exe
</I>|<i>       |   `-- smcs.exe.mdb
</I>|<i>       |-- 2.0-redist
</I>|<i>       |   |-- System.Windows.Controls.Data.dll
</I>|<i>       |   |-- System.Windows.Controls.Data.dll.mdb
</I>|<i>       |   |-- System.Windows.Controls.dll
</I>|<i>       |   |-- System.Windows.Controls.dll.mdb
</I>|<i>       |   |-- System.Xml.Linq.dll
</I>|<i>       |   `-- System.Xml.Linq.dll.mdb
</I>|<i>       |-- mopen.exe
</I>|<i>       |-- mopen.exe.config
</I>|<i>       |-- mopen.exe.mdb
</I>|<i>       |-- munxap.exe
</I>|<i>       |-- mxap.exe
</I>|<i>       |-- plugin
</I>|<i>       |   |-- Microsoft.VisualBasic.dll
</I>|<i>       |   |-- System.Core.dll
</I>|<i>       |   |-- System.Core.dll.mdb
</I>|<i>       |   |-- System.Net.dll
</I>|<i>       |   |-- System.Net.dll.mdb
</I>|<i>       |   |-- System.Runtime.Serialization.dll
</I>|<i>       |   |-- System.Runtime.Serialization.dll.mdb
</I>|<i>       |   |-- System.ServiceModel.Web.dll
</I>|<i>       |   |-- System.ServiceModel.Web.dll.mdb
</I>|<i>       |   |-- System.ServiceModel.dll
</I>|<i>       |   |-- System.ServiceModel.dll.mdb
</I>|<i>       |   |-- System.Windows.Browser.dll
</I>|<i>       |   |-- System.Windows.Browser.dll.mdb
</I>|<i>       |   |-- System.Windows.dll
</I>|<i>       |   |-- System.Windows.dll.config
</I>|<i>       |   |-- System.Windows.dll.mdb
</I>|<i>       |   |-- System.Xml.dll
</I>|<i>       |   |-- System.Xml.dll.mdb
</I>|<i>       |   |-- System.dll
</I>|<i>       |   |-- System.dll.mdb
</I>|<i>       |   |-- libmoonloader.la
</I>|<i>       |   |-- libmoonloader.so
</I>|<i>       |   |-- libmoonplugin-ff3bridge.la
</I>|<i>       |   |-- libmoonplugin-ff3bridge.so
</I>|<i>       |   |-- libmoonplugin.la
</I>|<i>       |   |-- libmoonplugin.so
</I>|<i>       |   |-- mscorlib.dll
</I>|<i>       |   `-- mscorlib.dll.mdb
</I>|<i>       |-- respack.exe
</I>|<i>       |-- sockpol.exe
</I>|<i>       |-- xaml2html.exe
</I>|<i>       `-- xamlg.exe
</I>`-- share
    |-- man
    |   `-- man1
    |       |-- mopen.1
    |       |-- mxap.1
    |       |-- respack.1
    |       |-- sockpol.1
    |       |-- svg2xaml.1
    |       `-- xamlg.1
    `-- pkgconfig
        |-- moonlight-desktop-2.0.pc
        |-- moonlight-gtk-2.0.pc
        `-- moonlight-web-2.0.pc
        
27 directories, 115 files
        
The important thing to remember here (and this is kinda a note to
myself) is that I also need to put libmono.so.0 from monoprefix/ (the
temporary mono 2.6 snapshot build) someplace, as it is NOT copied to
anywhere moonlighty and is linked in via RPATH. And the current plan is
to ship Mono 2.4.x in our next Debian/Ubuntu releases due to long-term
support considerations, so we don't want to use the system's
libmono.so.0.
        
Now then.
        
The stuff in bin/ and the corresponding manpages/exes are easy enough,
as is the monodoc manual. Those I can handle.
        
The GAC stuff which doesn't have &quot;Moon&quot; in its name - should those go
into Moonlight-themed packages, or are they useful for other use cases,
and should go individually?
        
What is lib/moonlight/2.0-redist?
        
How do the assemblies in lib/moonlight/2.0 and lib/moonlight/plugin
differ? When would each of them be needed?
        
Is anything in lib/moonlight needed for the GAC libraries (which I
assume are the desktop libs for things like Cubano) to work?
        
I'll ask more stuff as it comes to me.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 489 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://lists.ximian.com/pipermail/moonlight-list/attachments/20091220/090c651a/attachment-0001.bin">http://lists.ximian.com/pipermail/moonlight-list/attachments/20091220/090c651a/attachment-0001.bin</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000820.html">[Moonlight-list] Moonlight+Silverlight portability: how	realistic?
</A></li>
	<LI>Next message: <A HREF="000808.html">[Moonlight-list] Feature Set of Moonlight 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#807">[ date ]</a>
              <a href="thread.html#807">[ thread ]</a>
              <a href="subject.html#807">[ subject ]</a>
              <a href="author.html#807">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
