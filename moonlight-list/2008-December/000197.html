<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] Embed moonlight and capture frames
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20Embed%20moonlight%20and%20capture%20frames&In-Reply-To=67ed228e0811190949v48b52f1dx3f5f5487c06ad80d%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000196.html">
   <LINK REL="Next"  HREF="000198.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] Embed moonlight and capture frames</H1>
    <B>Dan Shryock</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20Embed%20moonlight%20and%20capture%20frames&In-Reply-To=67ed228e0811190949v48b52f1dx3f5f5487c06ad80d%40mail.gmail.com"
       TITLE="[Moonlight-list] Embed moonlight and capture frames">dan.shryock at gmail.com
       </A><BR>
    <I>Wed Dec 24 15:18:47 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000196.html">[Moonlight-list] DependencyProperty setter validation in C#
</A></li>
        <LI>Next message: <A HREF="000198.html">[Moonlight-list] Embed moonlight and capture frames
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#197">[ date ]</a>
              <a href="thread.html#197">[ thread ]</a>
              <a href="subject.html#197">[ subject ]</a>
              <a href="author.html#197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Nov 19, 2008 at 9:49 AM, MDK &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-list">michaldominik at gmail.com</A>&gt; wrote:
&gt;<i> This is exactly what our performance tool does -- it loads a html/xaml
</I>&gt;<i> file and &quot;renders&quot; it frame by frame using the manual time source.
</I>&gt;<i> Unfortunately, as Toshok mentioned, this is not exposed in the managed
</I>&gt;<i> code yet.
</I>
I've exposed the manual time source, and gotten to the point where I
can take a sample xaml file and let it render for a given period of
time, and capture all frames to a video file.  To make sure that the
framerate for embedded video files is fixed to my output framerate, I
changed MediaPlayer::AdvanceFrame () to base target_pts on
element-&gt;GetTimeManager()-&gt;GetCurrentTime () regardless of the audio
track.

Now I'm looking to capture the audio.  From looking at the source, it
appears that I need to subclass AudioSource, and AudioPlayer, and
somehow use the Write methods from AudioSource to capture audio frames
and mix them together with any other audio frames that are currently
playing.  I have very little experience with audio, so I was hoping
for some pointers on how to accomplish this task.  It appears that I
will need to loop through the sources list and capture the audio data
per source, and then somehow do any necessary conversions between
different sample rates.  The other thing that seems like it will be
troublesome is synchronizing the audio to the video.

Any ideas, corrections, info, etc on how to get this working would be
very welcome.  Thanks!

Dan
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000196.html">[Moonlight-list] DependencyProperty setter validation in C#
</A></li>
	<LI>Next message: <A HREF="000198.html">[Moonlight-list] Embed moonlight and capture frames
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#197">[ date ]</a>
              <a href="thread.html#197">[ thread ]</a>
              <a href="subject.html#197">[ subject ]</a>
              <a href="author.html#197">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
