<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] Custom Attached Properties
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20Custom%20Attached%20Properties&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] Custom Attached Properties</H1>
    <B>Ian Norton</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20Custom%20Attached%20Properties&In-Reply-To="
       TITLE="[Moonlight-list] Custom Attached Properties">ian.norton-badrul at thales-esecurity.com
       </A><BR>
    <I>Tue May  3 06:15:00 EDT 2011</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001286.html">[Moonlight-list] Custom Attached Properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1283">[ date ]</a>
              <a href="thread.html#1283">[ thread ]</a>
              <a href="subject.html#1283">[ subject ]</a>
              <a href="author.html#1283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I'm in the midst of writing a helper framework for getting moonlight apps
running using moonlight.desktop, I have gotten a good chunk running now and can
load up views and give them associated view models quite easily now. I'm aiming
for (almost) fully detached xaml and viewmodels ( no code-behinds ). I've
gotten nearly everything working for data binding and wanted to move onto
providing a custom xaml attribute to associate events just like WPF's command
binding and similar to some of the silverlight 2.0 attempts to do the same
thing.

Som I'm trying to create a custom attached property to use in my moonlight xaml
(using moonlight desktop).

I have the following xaml.

&lt;UserControl xmlns=&quot;<A HREF="http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;">http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</A> 
             xmlns:x=&quot;<A HREF="http://schemas.microsoft.com/winfx/2006/xaml&quot;">http://schemas.microsoft.com/winfx/2006/xaml&quot;</A>
             xmlns:my=&quot;clr-namespace:My.Namespace;assembly=My.Assembly&quot;&gt;

  &lt;ContentControl my:Utils.Foo=&quot;test&quot; /&gt;

&lt;/UserControl&gt;

And the following custom attribute class.

public class Utils {

  public static readonly DependencyProperty FooProperty;

  static Utils(){
    FooProperty = DependencyProperty.RegisterAttached(&quot;Foo&quot;,
      typeof(string), typeof(Utils), null );
  }

  public static void SetFoo( DependencyObject obj, string value )
  {
    Console.WriteLine(value);
  }

  public static string GetFoo( DependencyObject obj )
  {
    return &quot;Hello&quot;;
  }
}


When I load the above xaml fragment through XamlLoader I see:

&quot;couldn't load assembly: My.Assembly namespace: My.Namespace&quot; on the console.

If I omit the &quot;assembly=&quot; portion instead I see:

&quot;attach type is null type name: Utils full type name: My.Namespace.Utils&quot;

In all cases my assembly is referenced and that type is accessible from other
code in the project.

In the first case I can't tell why the parser won't load my assembly. In the
second I've assumed the assembly is loaded already because that class is 
used in other parts of my code that run ok.

Looking at the managed xaml parser and System.Windows.Application it seems to
me that somehow the presence of the extra xmlns above gets ignored at the time
the parser tries to find the Get/Set methods for the custom property.

This all seems to work in silverlight 3 on windows :(.

I'm using moonlight as packaged into libmoonlight-desktop2.0-cil-dev on ubuntu
10.10. ( version 2.3-0ubuntu4.1 ).

Is this supposed to work in moonlight 2.x or the latest github sources?

Many thanks.

Ian

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001286.html">[Moonlight-list] Custom Attached Properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1283">[ date ]</a>
              <a href="thread.html#1283">[ thread ]</a>
              <a href="subject.html#1283">[ subject ]</a>
              <a href="author.html#1283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
