<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] Remaining work for the Moonlight 4 SDK
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20Remaining%20work%20for%20the%20Moonlight%204%20SDK&In-Reply-To=20110527095959.GB8256%40carrot.ncipher.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001323.html">
   <LINK REL="Next"  HREF="001325.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] Remaining work for the Moonlight 4 SDK</H1>
    <B>Alan</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20Remaining%20work%20for%20the%20Moonlight%204%20SDK&In-Reply-To=20110527095959.GB8256%40carrot.ncipher.com"
       TITLE="[Moonlight-list] Remaining work for the Moonlight 4 SDK">alan.mcgovern at gmail.com
       </A><BR>
    <I>Tue May 31 06:29:14 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001323.html">[Moonlight-list] Remaining work for the Moonlight 4 SDK
</A></li>
        <LI>Next message: <A HREF="001325.html">[Moonlight-list] Remaining work for the Moonlight 4 SDK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1324">[ date ]</a>
              <a href="thread.html#1324">[ thread ]</a>
              <a href="subject.html#1324">[ subject ]</a>
              <a href="author.html#1324">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I got my VM set up for WPF development and it looks like WPF takes the easy
approach - it copies GAC assemblies local to the application. WPF appears to
be incapable of loading assemblies from the GAC as my application fails to
start up when I remove the local assembly. I don't see a good reason to
deviate from this behaviour as it would be what anyone developing with WPF
would expect when working with moonlight-desktop. With this approach you
wouldn't need an appmanifest.xaml file.

Manually adding assemblies to a list at runtime seems very error prone and
awkward. If you're doing that you'd be much better off using an appmanifest
file which could be autogenerated at compile time and embedded/distributed
with your application. I don't know exactly how dynamically loaded
assemblies would work in the WPF case, I haven't tested that yet. It's
probable that these would be accessible via xaml but I'd need to test.

So at the moment I'm quite content with doing what WPF does unless there's a
very good reason not to. Anyone care to chime in on why we should deviate?
Also, if we're deviating, outline why you're deviating and what the
pros/cons of it would be.

Alan



On Fri, May 27, 2011 at 10:59 AM, Ian Norton &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-list">ian.norton-badrul at thales-esecurity.com</A>&gt; wrote:

&gt;<i> On Fri, May 27, 2011 at 09:35:43AM +0100, technomage1972 wrote:
</I>&gt;<i> &gt; I've taken a look at your branch Ian, nice approach. So I assume the host
</I>&gt;<i> &gt; application would be calling
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Deployment.PreloadDesktopAssemblies.Add(&lt;Assembly&gt;)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; before initializing the MoonlightHost.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I agree it would be nice for the Moonlight engine to behave they way WPF
</I>&gt;<i> &gt; does in Dekstop mode and not have to have the AppManifest.xaml and be
</I>&gt;<i> able
</I>&gt;<i> &gt; to resolve references dynamically. Having a call back from the xaml
</I>&gt;<i> parser
</I>&gt;<i> &gt; for missing assemblies would be a interesting route to take...
</I>&gt;<i>
</I>&gt;<i> Yes, I'm not clever enough yet with c++ to figure a good place to put that.
</I>&gt;<i>
</I>&gt;<i> &gt; Is there any way we could attempt preload assemblies by going through the
</I>&gt;<i> &gt; references for the assemblies in the applicaiton/dll?
</I>&gt;<i>
</I>&gt;<i> Yes, the moonlight runtime only runs
</I>&gt;<i> System.Windows.Deployment.InitializeDeployment on the desktop profile when
</I>&gt;<i> someone creates a MoonlightHost object. So if you add your loaded
</I>&gt;<i> assemblies
</I>&gt;<i> before it, then moonlight's xaml parser will use them.
</I>&gt;<i>
</I>&gt;<i> Since you need to just pass in a list of Assembly objects they can be
</I>&gt;<i> fetched
</I>&gt;<i> from the Gac, current dir or an explicit path.
</I>&gt;<i>
</I>&gt;<i> I'll have a look at your blog later, I'm keen on the idea of producing a
</I>&gt;<i> wpf or
</I>&gt;<i> moonlight app from the same source base.
</I>&gt;<i>
</I>&gt;<i> Best Regards
</I>&gt;<i>
</I>&gt;<i> Ian
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Moonlight-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-list">Moonlight-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-list">http://lists.ximian.com/mailman/listinfo/moonlight-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/moonlight-list/attachments/20110531/4767793a/attachment.html">http://lists.ximian.com/pipermail/moonlight-list/attachments/20110531/4767793a/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001323.html">[Moonlight-list] Remaining work for the Moonlight 4 SDK
</A></li>
	<LI>Next message: <A HREF="001325.html">[Moonlight-list] Remaining work for the Moonlight 4 SDK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1324">[ date ]</a>
              <a href="thread.html#1324">[ thread ]</a>
              <a href="subject.html#1324">[ subject ]</a>
              <a href="author.html#1324">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
