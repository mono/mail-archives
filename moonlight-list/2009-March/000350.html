<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] [PATCH] Add glib-sharp to InternalsVisibleTo of corlib in the 2.1 profile (was: Re: Distribution and initialization of	accessibility in Moonlight)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20%5BPATCH%5D%20Add%20glib-sharp%20to%20InternalsVisibleTo%20of%0A%20corlib%20in%20the%202.1%20profile%20%28was%3A%20Re%3A%20Distribution%20and%20initialization%0A%20of%09accessibility%20in%20Moonlight%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000365.html">
   <LINK REL="Next"  HREF="000352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] [PATCH] Add glib-sharp to InternalsVisibleTo of corlib in the 2.1 profile (was: Re: Distribution and initialization of	accessibility in Moonlight)</H1>
    <B>&quot;Andr&#233;s G. Aragoneses&quot;</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20%5BPATCH%5D%20Add%20glib-sharp%20to%20InternalsVisibleTo%20of%0A%20corlib%20in%20the%202.1%20profile%20%28was%3A%20Re%3A%20Distribution%20and%20initialization%0A%20of%09accessibility%20in%20Moonlight%29&In-Reply-To="
       TITLE="[Moonlight-list] [PATCH] Add glib-sharp to InternalsVisibleTo of corlib in the 2.1 profile (was: Re: Distribution and initialization of	accessibility in Moonlight)">knocte at gmail.com
       </A><BR>
    <I>Wed Mar 25 12:00:10 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000365.html">[Moonlight-list] [Mono-dev] [patch] coreclr: metadata/*	(platform check)
</A></li>
        <LI>Next message: <A HREF="000352.html">[Moonlight-list] [PATCH] Add glib-sharp to InternalsVisibleTo	of corlib in the 2.1 profile (was: Re: Distribution and initialization	of	accessibility in Moonlight)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#350">[ date ]</a>
              <a href="thread.html#350">[ thread ]</a>
              <a href="subject.html#350">[ subject ]</a>
              <a href="author.html#350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Regardless of the method picked for distribution of the a11y support of
moonlight (discussed on previous thread about this), we need to use
atk-sharp for hooking our classes into the GObject framework that is
used by Atk, and thus this implies that glib-sharp (which is a
dependency of atk-sharp) needs to be built against the 2.1 profile.

Since glib-sharp uses a lot of marshaling API (which is not present
anymore as public in Silverlight) we need to add it to the list of
InternalsVisibleTo assemblies, with the patch attached. This step of
course is under the assumption that our stuff will be loaded as platform
code, since it will be indeed part of moonlight infrastructure, and
because it wouldn't be possible otherwise (as glib-sharp needs to use
P/Invoke extensively).

The patch for making our stuff be loaded as platform code is still in
the works. I've discussed briefly how to do this with Sebastien, as he's
working on some security-related patches that will affect this.

So, can I commit the patch attached? Any feedback welcome. Thanks!

	Andr&#233;s



&gt;<i> Miguel de Icaza wrote:
</I>&gt;&gt;<i> &gt; Hello,
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;&gt;<i> &gt;&gt; a) In the XPI of Moonlight itself (this seemed to be the preferred
</I>&gt;&gt;&gt;<i> &gt;&gt; election of some people in the IRC channel).
</I>&gt;&gt;&gt;<i> &gt;&gt; Disadvantage: it would pull some dependencies such as atk-sharp and
</I>&gt;&gt;&gt;<i> &gt;&gt; glib-sharp so the XPI size grows.
</I>&gt;&gt;&gt;<i> &gt;&gt; Advantage: everybody gets native accessibility support in Linux if they
</I>&gt;&gt;&gt;<i> &gt;&gt; have their corresponding A11Y client software installed (at-spi, screen
</I>&gt;&gt;&gt;<i> &gt;&gt; readers, etc.), without the need of packaging the bridge for every distro.
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; I would not want to ship glib-sharp, atk-sharp or anything like that.
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; The UIA code probably should not use those either, it likely can get
</I>&gt;&gt;<i> &gt; away by just P/Invoking the handful of calls that it needs.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> As Sandy has already pointed out, we use atk extensively and atk-sharp
</I>&gt;<i> is extremely useful for that (because we derive from Atk classes, use
</I>&gt;<i> GInterfaces, etc.). It's a usage very similar to what is done if you
</I>&gt;<i> want to create a Gtk+ widget with GtkSharp (but in our case it's not
</I>&gt;<i> just a class, but a lot of them).
</I>&gt;<i> 
</I>&gt;<i> 
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: gtksharp21-mcs.diff
Type: text/x-patch
Size: 1413 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/moonlight-list/attachments/20090325/843b849b/attachment.bin">http://lists.ximian.com/pipermail/moonlight-list/attachments/20090325/843b849b/attachment.bin</A> 
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000365.html">[Moonlight-list] [Mono-dev] [patch] coreclr: metadata/*	(platform check)
</A></li>
	<LI>Next message: <A HREF="000352.html">[Moonlight-list] [PATCH] Add glib-sharp to InternalsVisibleTo	of corlib in the 2.1 profile (was: Re: Distribution and initialization	of	accessibility in Moonlight)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#350">[ date ]</a>
              <a href="thread.html#350">[ thread ]</a>
              <a href="subject.html#350">[ subject ]</a>
              <a href="author.html#350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
