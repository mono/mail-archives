<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] couple more comments about databinding stuff
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20couple%20more%20comments%20about%20databinding%20stuff&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000166.html">
   <LINK REL="Next"  HREF="000168.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] couple more comments about databinding stuff</H1>
    <B>Chris Toshok</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20couple%20more%20comments%20about%20databinding%20stuff&In-Reply-To="
       TITLE="[Moonlight-list] couple more comments about databinding stuff">toshok at gmail.com
       </A><BR>
    <I>Mon Nov 24 00:53:11 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000166.html">[Moonlight-list] partial desklet patch
</A></li>
        <LI>Next message: <A HREF="000168.html">[Moonlight-list] couple more comments about databinding stuff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#167">[ date ]</a>
              <a href="thread.html#167">[ thread ]</a>
              <a href="subject.html#167">[ subject ]</a>
              <a href="author.html#167">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>terminology: let's use the SL terminology except where we absolutely
cannot.  That'll keep articles written about silverlight easily applicable
to our code as well.
So,  &quot;Source&quot; should be used for the object we're binding from (in a one-way
scenario) -- i.e. the DataContext.  And &quot;Target&quot; should be the
FrameworkElement.  In the managed code there's some places where it's
incredibly confusing, because we're calling the Source &quot;Target&quot; and the
Target &quot;Element&quot;, and in the unmanaged code we're using &quot;Destination&quot;
instead of &quot;Target&quot;.  In the unmanaged code it also seems like we're using
&quot;Element&quot; in a different way than the managed code - to mean &quot;Source&quot;, and
we're limiting source elements to FrameworkElements, when it should be
DependencyObject, right?

FrameworkElement: there are some static method/callbacks in FrameworkElement
that should really be in BindingExpression - notably
bound_property_changed/BoundPropertyChangeed.  There's no reason for
FrameworkElement to have such intimate knowledge of that stuff.

I've been thinking about the ReadLocalValue implementation we have now.
Right now in FrameworkElement::SetValueImplWithError, we check to see if the
value we're setting is BindingExpression/Style, and use that value as the
current_value for the Property, just so we get ReadLocalValue semantics.  I
really don't like the overloading of the current_value hashtable to contain
things other than actual values, since it complicates both GetValue and
SetValue, and it seems to me that we don't need it -- ReadLocalValue is just
an indication of where the current value comes from.  So the current_value
hash should could contain within it the actual Value* associated with the
property, not the BindingExpression or Style object.  We'd have a separate
hash keyed on DP -- or maybe even just reuse the DependencyObject::bindings
hash and add one for the style as well -- to determine where the value comes
from.  For a &quot;local&quot; value, i.e. one that was just set as a property, that
hash would have NULL (or in the alternate case it wouldn't exist in either
bindings or style hashes.)  For BindingExpressions or Style Setters, it
would have the appropriate object.

chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/moonlight-list/attachments/20081123/f6fd23e7/attachment.html">http://lists.ximian.com/pipermail/moonlight-list/attachments/20081123/f6fd23e7/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000166.html">[Moonlight-list] partial desklet patch
</A></li>
	<LI>Next message: <A HREF="000168.html">[Moonlight-list] couple more comments about databinding stuff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#167">[ date ]</a>
              <a href="thread.html#167">[ thread ]</a>
              <a href="subject.html#167">[ subject ]</a>
              <a href="author.html#167">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
