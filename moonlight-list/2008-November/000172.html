<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-list] couple more comments about databinding	stuff
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20couple%20more%20comments%20about%20databinding%09stuff&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000171.html">
   <LINK REL="Next"  HREF="000173.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-list] couple more comments about databinding	stuff</H1>
    <B>Jeff Stedfast</B> 
    <A HREF="mailto:moonlight-list%40lists.ximian.com?Subject=%5BMoonlight-list%5D%20couple%20more%20comments%20about%20databinding%09stuff&In-Reply-To="
       TITLE="[Moonlight-list] couple more comments about databinding	stuff">fejj at novell.com
       </A><BR>
    <I>Thu Nov 27 16:18:42 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000171.html">[Moonlight-list] Can't find System.dll v2.0.5.0 while building from	source
</A></li>
        <LI>Next message: <A HREF="000173.html">[Moonlight-list] couple more comments about databinding stuff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#172">[ date ]</a>
              <a href="thread.html#172">[ thread ]</a>
              <a href="subject.html#172">[ subject ]</a>
              <a href="author.html#172">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>using gw webmail so this reply formatting is gonna suck.

&gt;&gt;&gt;<i> &quot;Chris Toshok&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-list">toshok at gmail.com</A>&gt; 11/24/08 12:53 AM &gt;&gt;&gt;terminology: let's use the SL terminology except where we absolutely cannot.  That'll keep articles written about silverlight easily applicable to our code as well.
</I>So,  &quot;Source&quot; should be used for the object we're binding from (in a one-way scenario) -- i.e. the DataContext.  And &quot;Target&quot; should be the FrameworkElement.  In the managed code there's some places where it's incredibly confusing, because we're calling the Source &quot;Target&quot; and the Target &quot;Element&quot;, and in the unmanaged code we're using &quot;Destination&quot; instead of &quot;Target&quot;.  In the unmanaged code it also seems like we're using &quot;Element&quot; in a different way than the managed code - to mean &quot;Source&quot;, and we're limiting source elements to FrameworkElements, when it should be DependencyObject, right?

&quot;That's not the preferred nomenclature, Donny!&quot;

This isat least partly my fault (unmanaged). I agree 100% with changing over to the preferred nomenclature. Target is a much better name than Destination, for sure.

The &quot;Element&quot; property, however, was done to mimic the defined managed API so we should keep that.


&gt;<i> FrameworkElement: there are some static method/callbacks in FrameworkElement that should really be in 
</I>&gt;<i> BindingExpression - notably bound_property_changed/BoundPropertyChangeed.  There's no reason for 
</I>&gt;<i> FrameworkElement to have such intimate knowledge of that stuff.
</I>
I originally had them in the BindingExpression class, but it made things more difficult and messy. Although, that was before I figured out a cleanish way of doing it (current FE callbacks are decent now), maybe we can move it back and keep a level of sanity now (if we can, I have no problems moving it back).

&gt;<i> I've been thinking about the ReadLocalValue implementation we have now.  Right now in 
</I>&gt;<i> FrameworkElement::SetValueImplWithError, we check to see if the value we're setting is BindingExpression/Style, and 
</I>&gt;<i> use that value as the current_value for the Property, just so we get ReadLocalValue semantics.  I really don't like the 
</I>&gt;<i> overloading of the current_value hashtable to contain things other than actual values
</I>
I might not be remembering correctly, but I think current_values only does store values. If you set a BindingExpression value, then it gets set on the bindings hash table instead of current_values.

This might not be done in the cleanest way (that overloaded method is getting kinda big iirc), so maybe the logic can be split out a bit.

&gt;<i>, since it complicates both GetValue 
</I>&gt;<i> and SetValue, and it seems to me that we don't need it -- ReadLocalValue is just an indication of where the current value 
</I>&gt;<i> comes from.  So the current_value hash should could contain within it the actual Value* associated with the property, not 
</I>&gt;<i> the BindingExpression or Style object.  We'd have a separate hash keyed on DP -- or maybe even just reuse the 
</I>&gt;<i> DependencyObject::bindings hash and add one for the style as well -- to determine where the value comes from.  For a 
</I>&gt;<i> &quot;local&quot; value, i.e. one that was just set as a property, that hash would have NULL (or in the alternate case it wouldn't exist 
</I>&gt;<i> in either bindings or style hashes.)  For BindingExpressions or Style Setters, it would have the appropriate object.
</I>
I don't have the code in front of me anymore so it's hard to be sure, but I think we more or less agree here.

&gt;<i> chris
</I>
Sorry about being late but replying over iPhone is rather tedious :p

Jeff

&lt;/<A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-list">toshok at gmail.com</A>&gt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/moonlight-list/attachments/20081127/335ce3b2/attachment.html">http://lists.ximian.com/pipermail/moonlight-list/attachments/20081127/335ce3b2/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000171.html">[Moonlight-list] Can't find System.dll v2.0.5.0 while building from	source
</A></li>
	<LI>Next message: <A HREF="000173.html">[Moonlight-list] couple more comments about databinding stuff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#172">[ date ]</a>
              <a href="thread.html#172">[ thread ]</a>
              <a href="subject.html#172">[ subject ]</a>
              <a href="author.html#172">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-list">More information about the Moonlight-list
mailing list</a><br>
</body></html>
