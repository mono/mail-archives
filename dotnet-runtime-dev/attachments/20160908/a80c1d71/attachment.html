<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;<br>
Hello,<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;With&nbsp;the&nbsp;growing&nbsp;love&nbsp;for&nbsp;UTF8&nbsp;in&nbsp;the&nbsp;.NET&nbsp;world,&nbsp;I&nbsp;would&nbsp;love&nbsp;to&nbsp;see&nbsp;C#&nbsp;support&nbsp;implicit&nbsp;conversions&nbsp;from&nbsp;string&nbsp;constants&nbsp;to&nbsp;byte[]&nbsp;and&nbsp;byte*.&nbsp;&nbsp;&nbsp;This&nbsp;should&nbsp;help&nbsp;things&nbsp;like<br>
&lt;a&nbsp;href=&quot;http://asp.net&quot;&nbsp;class=&quot;&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;Core&nbsp;and&nbsp;it&nbsp;should&nbsp;help&nbsp;interoperate&nbsp;with&nbsp;the&nbsp;new&nbsp;Utf8String&nbsp;type&nbsp;[1].&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;The&nbsp;idea&nbsp;is&nbsp;to&nbsp;encode&nbsp;the&nbsp;string&nbsp;constant&nbsp;into&nbsp;a&nbsp;UTF8&nbsp;encoded&nbsp;byte&nbsp;stream&nbsp;and&nbsp;add&nbsp;it&nbsp;as&nbsp;a&nbsp;binary&nbsp;blob&nbsp;to&nbsp;the&nbsp;assembly.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;Then,&nbsp;we&nbsp;provide&nbsp;two&nbsp;implicit&nbsp;conversions&nbsp;on&nbsp;string&nbsp;constants:&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;<br>
&lt;ul&nbsp;class=&quot;MailOutline&quot;&gt;<br>
&lt;li&nbsp;class=&quot;&quot;&gt;one&nbsp;to&nbsp;byte&nbsp;[],&nbsp;which&nbsp;initializes&nbsp;the&nbsp;byte&nbsp;[]&nbsp;with&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;bytes&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;one&nbsp;to&nbsp;byte*,&nbsp;which&nbsp;initializes&nbsp;the&nbsp;pointer&nbsp;to&nbsp;the&nbsp;address&nbsp;containing&nbsp;the&nbsp;encoded&nbsp;null-terminated&nbsp;string.&lt;/li&gt;&lt;/ul&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;A&nbsp;proof&nbsp;of&nbsp;concept&nbsp;for&nbsp;Mono’s&nbsp;C#&nbsp;compiler&nbsp;is&nbsp;available&nbsp;here:&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;https://gist.github.com/migueldeicaza/96c2bc52bfc30aa47a3ba34ce135e6f1&quot;&nbsp;class=&quot;&quot;&gt;https://gist.github.com/migueldeicaza/96c2bc52bfc30aa47a3ba34ce135e6f1&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;Apply&nbsp;the&nbsp;patch&nbsp;to&nbsp;your&nbsp;local&nbsp;Mono&nbsp;build,&nbsp;and&nbsp;enjoy:&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;byte&nbsp;[]&nbsp;foo&nbsp;=&nbsp;“Hello,&nbsp;world”;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;byte&nbsp;*bar&nbsp;=&nbsp;“Hello&nbsp;there”;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;In&nbsp;an&nbsp;ideal&nbsp;world,&nbsp;we&nbsp;should&nbsp;also&nbsp;support&nbsp;an&nbsp;implicit&nbsp;conversion&nbsp;to&nbsp;the&nbsp;new&nbsp;Span&lt;byte&gt;&nbsp;type:&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;Span&lt;byte&gt;&nbsp;span&nbsp;=&nbsp;“Hey&nbsp;there”&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;I&nbsp;just&nbsp;did&nbsp;not&nbsp;do&nbsp;that&nbsp;work&nbsp;because&nbsp;the&nbsp;code&nbsp;is&nbsp;not&nbsp;in&nbsp;mscorlib&nbsp;yet.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;Miguel.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;[1]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/dotnet/corefxlab/blob/master/src/System.Text.Utf8/System/Text/Utf8/Utf8String.cs&quot;&nbsp;class=&quot;&quot;&gt;https://github.com/dotnet/corefxlab/blob/master/src/System.Text.Utf8/System/Text/Utf8/Utf8String.cs&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;[2]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/dotnet/corefxlab/blob/master/src/System.Slices/System/Span.cs&quot;&nbsp;class=&quot;&quot;&gt;https://github.com/dotnet/corefxlab/blob/master/src/System.Slices/System/Span.cs&lt;/a&gt;&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
