<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;style=&quot;display:none;&quot;&gt;&lt;!--&nbsp;P&nbsp;{margin-top:0;margin-bottom:0;}&nbsp;--&gt;&lt;/style&gt;<br>
&lt;div&nbsp;id=&quot;divtagdefaultwrapper&quot;&nbsp;style=&quot;font-size:12pt;color:#000000;background-color:#FFFFFF;font-family:Calibri,Arial,Helvetica,sans-serif;&quot;&gt;<br>
&lt;p&gt;&#43;1&nbsp;this&nbsp;will&nbsp;make&nbsp;it&nbsp;easy&nbsp;to&nbsp;produce&nbsp;UTF8&nbsp;encoded&nbsp;content&nbsp;for&nbsp;web&nbsp;scenarios.&nbsp;It's&nbsp;great&nbsp;it&nbsp;also&nbsp;doesn't&nbsp;need&nbsp;to&nbsp;directly&nbsp;depend&nbsp;on&nbsp;the&nbsp;UTF8String&nbsp;type.&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;<br>
&lt;p&gt;Sent&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://aka.ms/weboutlook&quot;&nbsp;id=&quot;LPNoLP&quot;&gt;Outlook&lt;/a&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;hr&nbsp;style=&quot;display:inline-block;width:98%&quot;&nbsp;tabindex=&quot;-1&quot;&gt;<br>
&lt;div&nbsp;id=&quot;divRplyFwdMsg&quot;&nbsp;dir=&quot;ltr&quot;&gt;&lt;font&nbsp;face=&quot;Calibri,&nbsp;sans-serif&quot;&nbsp;style=&quot;font-size:11pt&quot;&nbsp;color=&quot;#000000&quot;&gt;&lt;b&gt;From:&lt;/b&gt;&nbsp;Miguel&nbsp;de&nbsp;Icaza&lt;br&gt;<br>
&lt;b&gt;Sent:&lt;/b&gt;&nbsp;Wednesday,&nbsp;September&nbsp;7,&nbsp;2016&nbsp;8:33:55&nbsp;PM&lt;br&gt;<br>
&lt;b&gt;To:&lt;/b&gt;&nbsp;dotnet-runtime-dev@lists.dot.net&lt;br&gt;<br>
&lt;b&gt;Cc:&lt;/b&gt;&nbsp;David&nbsp;Fowler&lt;br&gt;<br>
&lt;b&gt;Subject:&lt;/b&gt;&nbsp;Implicit&nbsp;conversions&nbsp;from&nbsp;strings&nbsp;to&nbsp;byte[]&nbsp;and&nbsp;byte*&lt;/font&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;Hello,<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;With&nbsp;the&nbsp;growing&nbsp;love&nbsp;for&nbsp;UTF8&nbsp;in&nbsp;the&nbsp;.NET&nbsp;world,&nbsp;I&nbsp;would&nbsp;love&nbsp;to&nbsp;see&nbsp;C#&nbsp;support&nbsp;implicit&nbsp;conversions&nbsp;from&nbsp;string&nbsp;constants&nbsp;to&nbsp;byte[]&nbsp;and&nbsp;byte*.&nbsp;&nbsp;&nbsp;This&nbsp;should&nbsp;help&nbsp;things&nbsp;like<br>
&lt;a&nbsp;href=&quot;http://asp.net&quot;&nbsp;class=&quot;&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;Core&nbsp;and&nbsp;it&nbsp;should&nbsp;help&nbsp;interoperate&nbsp;with&nbsp;the&nbsp;new&nbsp;Utf8String&nbsp;type&nbsp;[1].&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;The&nbsp;idea&nbsp;is&nbsp;to&nbsp;encode&nbsp;the&nbsp;string&nbsp;constant&nbsp;into&nbsp;a&nbsp;UTF8&nbsp;encoded&nbsp;byte&nbsp;stream&nbsp;and&nbsp;add&nbsp;it&nbsp;as&nbsp;a&nbsp;binary&nbsp;blob&nbsp;to&nbsp;the&nbsp;assembly.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;Then,&nbsp;we&nbsp;provide&nbsp;two&nbsp;implicit&nbsp;conversions&nbsp;on&nbsp;string&nbsp;constants:&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;<br>
&lt;ul&nbsp;class=&quot;MailOutline&quot;&gt;<br>
&lt;li&nbsp;class=&quot;&quot;&gt;one&nbsp;to&nbsp;byte&nbsp;[],&nbsp;which&nbsp;initializes&nbsp;the&nbsp;byte&nbsp;[]&nbsp;with&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;bytes&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;one&nbsp;to&nbsp;byte*,&nbsp;which&nbsp;initializes&nbsp;the&nbsp;pointer&nbsp;to&nbsp;the&nbsp;address&nbsp;containing&nbsp;the&nbsp;encoded&nbsp;null-terminated&nbsp;string.&lt;/li&gt;&lt;/ul&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;A&nbsp;proof&nbsp;of&nbsp;concept&nbsp;for&nbsp;Mono&#8217;s&nbsp;C#&nbsp;compiler&nbsp;is&nbsp;available&nbsp;here:&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;https://gist.github.com/migueldeicaza/96c2bc52bfc30aa47a3ba34ce135e6f1&quot;&nbsp;class=&quot;&quot;&gt;https://gist.github.com/migueldeicaza/96c2bc52bfc30aa47a3ba34ce135e6f1&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;Apply&nbsp;the&nbsp;patch&nbsp;to&nbsp;your&nbsp;local&nbsp;Mono&nbsp;build,&nbsp;and&nbsp;enjoy:&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;byte&nbsp;[]&nbsp;foo&nbsp;=&nbsp;&#8220;Hello,&nbsp;world&#8221;;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;byte&nbsp;*bar&nbsp;=&nbsp;&#8220;Hello&nbsp;there&#8221;;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;In&nbsp;an&nbsp;ideal&nbsp;world,&nbsp;we&nbsp;should&nbsp;also&nbsp;support&nbsp;an&nbsp;implicit&nbsp;conversion&nbsp;to&nbsp;the&nbsp;new&nbsp;Span&lt;byte&gt;&nbsp;type:&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;Span&lt;byte&gt;&nbsp;span&nbsp;=&nbsp;&#8220;Hey&nbsp;there&#8221;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;I&nbsp;just&nbsp;did&nbsp;not&nbsp;do&nbsp;that&nbsp;work&nbsp;because&nbsp;the&nbsp;code&nbsp;is&nbsp;not&nbsp;in&nbsp;mscorlib&nbsp;yet.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;Miguel.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;[1]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/dotnet/corefxlab/blob/master/src/System.Text.Utf8/System/Text/Utf8/Utf8String.cs&quot;&nbsp;class=&quot;&quot;&gt;https://github.com/dotnet/corefxlab/blob/master/src/System.Text.Utf8/System/Text/Utf8/Utf8String.cs&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;[2]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/dotnet/corefxlab/blob/master/src/System.Slices/System/Span.cs&quot;&nbsp;class=&quot;&quot;&gt;https://github.com/dotnet/corefxlab/blob/master/src/System.Slices/System/Span.cs&lt;/a&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
