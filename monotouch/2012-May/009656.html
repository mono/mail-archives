<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] When and why would TryGetNSObject() fail?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20When%20and%20why%20would%20TryGetNSObject%28%29%20fail%3F&In-Reply-To=%3C001b01cd345a%2428ed3e30%247ac7ba90%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009655.html">
   <LINK REL="Next"  HREF="009649.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] When and why would TryGetNSObject() fail?</H1>
    <B>Ren&#233; Ruppert</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20When%20and%20why%20would%20TryGetNSObject%28%29%20fail%3F&In-Reply-To=%3C001b01cd345a%2428ed3e30%247ac7ba90%24%40gmail.com%3E"
       TITLE="[MonoTouch] When and why would TryGetNSObject() fail?">rene.ruppert at googlemail.com
       </A><BR>
    <I>Thu May 17 18:23:28 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009655.html">[MonoTouch] When and why would TryGetNSObject() fail?
</A></li>
        <LI>Next message: <A HREF="009649.html">[MonoTouch] Is it possible in monotouch to move/drag one cell of a uitableview to another?with database connected into it? The scenario is like selling an item that instead of clicking the cell i will move/drag it. If it is possible, how? if not, what are the other ways?  Thank you in advance for the response and help.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9656">[ date ]</a>
              <a href="thread.html#9656">[ thread ]</a>
              <a href="subject.html#9656">[ subject ]</a>
              <a href="author.html#9656">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I get this error about once a day. Nobody is able to tell me what is causing
it or at least I don&#146;t see any pattern.

So if you have anything you can give me to track it down, I would gladly try
it out.

 

Ren&#233;

 

Von: Jeff Stedfast [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">jeff at xamarin.com</A>] 
Gesendet: Donnerstag, 17. Mai 2012 18:52
An: Rolf Bjarne Kvinge
Cc: Ren&#233; Ruppert; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
Betreff: Re: [MonoTouch] When and why would TryGetNSObject() fail?

 

It's possible that the native pointer address has been reused (e.g. the
runtime thinks the old object is still around even tho it is not).

 

Jeff

On Thu, May 17, 2012 at 4:46 AM, Rolf Bjarne Kvinge &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">rolf at xamarin.com</A>&gt;
wrote:

Hi,

 

I just looked at the source and this is something that should not happen.
We're looking up an object using the pointer to that object in a dictionary,
and then casting the result to NSObject. The problem is that the only thing
we ever put in that dictionary is NSObjects, i.e. it is impossible for this
to happen, which leads to the possibility of memory corruption or GC bug. Is
it a reproducible issue? We could probably give you instrumented
monotouch.dlls which could help tracking it down if it happens for you once
in a while.

 

Rolf

 

On Thu, May 17, 2012 at 9:44 AM, Ren&#233; Ruppert &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">rene.ruppert at googlemail.com</A>&gt;
wrote:

Hi,

 

Can somebody give me an example that would lead to the exception below?

Is that simply caused by trying to case a null ref into an NSObject?

Would can cause this? Does it mean that there is a managed object that tries
to access its unmanaged counterpart that no longer exists?

 

System.InvalidCastException: Cannot cast from source type to destination
type.

at MonoTouch.ObjCRuntime.Runtime.TryGetNSObject (IntPtr ptr) [0x00000] in
&lt;filename unknown&gt;:0 

at MonoTouch.ObjCRuntime.Runtime.GetNSObject (IntPtr ptr) [0x00000] in
&lt;filename unknown&gt;:0 

at MonoTouch.ObjCRuntime.Runtime.GetNSObjectWrapped (IntPtr ptr) [0x00000]
in &lt;filename unknown&gt;:0 

at (wrapper native-to-managed)
MonoTouch.ObjCRuntime.Runtime:GetNSObjectWrapped (intptr)

 

 

Ren&#233;

 

_______________________________________________
MonoTouch mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>



_______________________________________________
MonoTouch mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120517/d64c7fe0/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120517/d64c7fe0/attachment-0001.html</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009655.html">[MonoTouch] When and why would TryGetNSObject() fail?
</A></li>
	<LI>Next message: <A HREF="009649.html">[MonoTouch] Is it possible in monotouch to move/drag one cell of a uitableview to another?with database connected into it? The scenario is like selling an item that instead of clicking the cell i will move/drag it. If it is possible, how? if not, what are the other ways?  Thank you in advance for the response and help.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9656">[ date ]</a>
              <a href="thread.html#9656">[ thread ]</a>
              <a href="subject.html#9656">[ subject ]</a>
              <a href="author.html#9656">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
