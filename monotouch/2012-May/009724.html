<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] UITableView showing multiple checked items
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20UITableView%20showing%20multiple%20checked%20items&In-Reply-To=%3CCANfFwGTX3%2BoqzzyYUiwzT%2BSObDa4_0tdsyh9y%3DkH1Mw57T0EAw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009723.html">
   <LINK REL="Next"  HREF="009725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] UITableView showing multiple checked items</H1>
    <B>Nic Wise</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20UITableView%20showing%20multiple%20checked%20items&In-Reply-To=%3CCANfFwGTX3%2BoqzzyYUiwzT%2BSObDa4_0tdsyh9y%3DkH1Mw57T0EAw%40mail.gmail.com%3E"
       TITLE="[MonoTouch] UITableView showing multiple checked items">nicw at fastchicken.co.nz
       </A><BR>
    <I>Mon May 21 16:12:43 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009723.html">[MonoTouch] UITableView showing multiple checked items
</A></li>
        <LI>Next message: <A HREF="009725.html">[MonoTouch] UITableView showing multiple checked items
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9724">[ date ]</a>
              <a href="thread.html#9724">[ thread ]</a>
              <a href="subject.html#9724">[ subject ]</a>
              <a href="author.html#9724">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You will need to look at your internal model in GetCell (in the
UITableViewSource, or, I think there might be an event on
UITableView), and set the checkbox as appropriate when getcell is
called, and set the model when someone taps (dont rely on the cells!)

The idea is that ios keeps the cells that are on screen (eg 10), and
50% above and below (ie 5 above, 10 on screen, and 5 off the bottom).
As a cell is pushed off the top or bottom, it's reused, so they dont
need to keep rebuilding cells in memory. Down side is, you have to
assume your cell is temporary, and if you dequeue one, you MUST fully
configure it.

You'll be looking for a pattern like: (tv is the UITableVew)

var cell = tv.DequeueReusableCell (CellKey);
if (cell == null){
  cell = new UITableViewCell (UITableViewCellStyle.Default, CellKey);
  //initial config here. Only on new cells
} else {
  //it's a reused cell
}

//do common stuff here

return cell;



On Mon, May 21, 2012 at 4:58 PM, Chris House &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">chrishouse at proag.com</A>&gt; wrote:
&gt;<i> I have a UITableView that contains ~ 150 items.&#160; When an item is selected, I
</I>&gt;<i> want to indicate selection via setting the selected cell accessory to
</I>&gt;<i> UITableViewAccessory.Checkmark.&#160; I&#8217;m accomplishing this by using the
</I>&gt;<i> following UITableViewDelegate:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; public class TableViewDelegate : UITableViewDelegate
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; private readonly Action&lt;int&gt;
</I>&gt;<i> selectionDelegate;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; private UITableViewCell previousSelection;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; public TableViewDelegate(Action&lt;int&gt;
</I>&gt;<i> selectionDelegate)
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; this.selectionDelegate =
</I>&gt;<i> selectionDelegate;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; public override void RowSelected
</I>&gt;<i> (UITableView tableView, NSIndexPath indexPath)
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> this.selectionDelegate(indexPath.Row);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; if (previousSelection !=
</I>&gt;<i> null)
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> previousSelection.Accessory = UITableViewCellAccessory.None;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; UITableViewCell currentCell
</I>&gt;<i> = tableView.CellAt(indexPath);
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; currentCell.Accessory =
</I>&gt;<i> UITableViewCellAccessory.Checkmark;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; previousSelection =
</I>&gt;<i> currentCell;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This code seems to work fine when the UITableView displays fewer items than
</I>&gt;<i> can fit on the screen without scrolling.&#160; However for larger lists, I&#8217;m
</I>&gt;<i> seeing that multiple items show the checkmark accessory.&#160; It seems like
</I>&gt;<i> every 20th item before or after the selection also shows a checkmark.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Any suggestions as to what I&#8217;m missing to ensure only the selected item in
</I>&gt;<i> the table view shows the checkmark would be appreciated.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Chris
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>


-- 
Nic Wise
t.&#160; +44 7788 592 806 |&#160;@fastchicken | <A HREF="http://www.linkedin.com/in/nicwise">http://www.linkedin.com/in/nicwise</A>
b. <A HREF="http://www.fastchicken.co.nz/">http://www.fastchicken.co.nz/</A>

Earnest: Self-employed? Track your business expenses and income.
<A HREF="http://earnestapp.com">http://earnestapp.com</A>
Nearest Bus: find when the next bus is coming to your stop. <A HREF="http://goo.gl/Vcz1p">http://goo.gl/Vcz1p</A>
mobileAgent (for FreeAgent): get your accounts in your pocket.
<A HREF="http://goo.gl/IuBU">http://goo.gl/IuBU</A>
Trip Wallet: Keep track of your budget on the go: <A HREF="http://goo.gl/ePhKa">http://goo.gl/ePhKa</A>
London Bike App: Find the nearest Boris Bike, and get riding! <A HREF="http://goo.gl/Icp2">http://goo.gl/Icp2</A>
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009723.html">[MonoTouch] UITableView showing multiple checked items
</A></li>
	<LI>Next message: <A HREF="009725.html">[MonoTouch] UITableView showing multiple checked items
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9724">[ date ]</a>
              <a href="thread.html#9724">[ thread ]</a>
              <a href="subject.html#9724">[ subject ]</a>
              <a href="author.html#9724">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
