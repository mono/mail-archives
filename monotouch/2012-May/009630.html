<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Problem with making code based on database access gallery project work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Problem%20with%20making%20code%20based%20on%20database%20access%0A%20gallery%20project%20work&In-Reply-To=%3CCAAG_%2BO45eKcmcGHW%2BX4NKRS4rEkJ9vQiGr114h1T%2BTaLoVf21g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009626.html">
   <LINK REL="Next"  HREF="009672.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Problem with making code based on database access gallery project work</H1>
    <B>Craig Dunn</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Problem%20with%20making%20code%20based%20on%20database%20access%0A%20gallery%20project%20work&In-Reply-To=%3CCAAG_%2BO45eKcmcGHW%2BX4NKRS4rEkJ9vQiGr114h1T%2BTaLoVf21g%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Problem with making code based on database access gallery project work">craig.dunn at conceptdevelopment.net
       </A><BR>
    <I>Wed May 16 22:30:37 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009626.html">[MonoTouch] Problem with making code based on database access gallery project work
</A></li>
        <LI>Next message: <A HREF="009672.html">[MonoTouch] Problem with making code based on database access gallery project work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9630">[ date ]</a>
              <a href="thread.html#9630">[ thread ]</a>
              <a href="subject.html#9630">[ subject ]</a>
              <a href="author.html#9630">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>try changing

var counties = connection.Table&lt;CountyData&gt;();

to the following two lines:

var countiesTable = connection.Table&lt;CountyData&gt;();

var counties = (from i in countiesTable select i).ToList (); // using
System.Linq


basically the object returned from connection.Table&lt;&gt; isn't really a list
you can bind to: you need to perform a query on it that gives you a generic
list that your TableSource expects.

HTH


On Thu, May 17, 2012 at 5:41 AM, Chris_M &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">kungfuchris99 at yahoo.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> I'm creating an app that reads data from a pre-created database, one that
</I>&gt;<i> will NOT be modified by the user. This is purely a search and display info
</I>&gt;<i> app. The code below is the main view for the app, which displays a company
</I>&gt;<i> logo, adds a search bar (which will be used essentially to filter the
</I>&gt;<i> displayed data to specific searched-for counties or cities), and upon
</I>&gt;<i> initial display loads and displays the entire list of data (which will be
</I>&gt;<i> about 200 entries, I believe).
</I>&gt;<i>
</I>&gt;<i> My code is based on a couple of the tutorials and gallery projects, but
</I>&gt;<i> chiefly the Data Access gallery example and some advice from the
</I>&gt;<i> inestimable
</I>&gt;<i> Nice Wise. I am also specifically trying to use only the SQLite-Net code to
</I>&gt;<i> work with my database.
</I>&gt;<i>
</I>&gt;<i> I've whittled my way down to just two errors, and after searching and
</I>&gt;<i> reading everything related I can find, I still don't know why they're
</I>&gt;<i> happening or how to fix them. They are both generated by the same line,
</I>&gt;<i> which is marked below by the comment &quot;THIS IS THE PROBLEM LINE RIGHT HERE!&quot;
</I>&gt;<i>
</I>&gt;<i> I apologize in advance for my ignorance and the many other mistakes I have
</I>&gt;<i> no doubt made (and also that this post is kind of long; I thought including
</I>&gt;<i> all the code would be best, though). I'm having a blast learning to combine
</I>&gt;<i> what I've gotten to work from following tutorials and gallery projects, but
</I>&gt;<i> it's a slow, clumsy process sometimes. I wouldn't trade the experience for
</I>&gt;<i> anything, but I have a high tolerance for my own knuckleheadedness.  :-)
</I>&gt;<i>
</I>&gt;<i> Anyway, the two errors I'm getting are:
</I>&gt;<i>
</I>&gt;<i> &quot;The best overloaded match for [the method in question] has some invalid
</I>&gt;<i> arguments.&quot; And: &quot;Argument #1 cannot convert 'SQLite.TableQuery&lt;[my
</I>&gt;<i> table]&gt;'
</I>&gt;<i> expression to type 'Systems.Collections.Generic.List&lt;[list with the same
</I>&gt;<i> name as my table]&gt;'
</I>&gt;<i>
</I>&gt;<i> What am I doing wrong, and how can I fix this?
</I>&gt;<i>
</I>&gt;<i> code below===================================================
</I>&gt;<i>
</I>&gt;<i> using System;
</I>&gt;<i> using System.Linq;
</I>&gt;<i> using System.Collections.Generic;
</I>&gt;<i> using MonoTouch.Foundation;
</I>&gt;<i> using MonoTouch.UIKit;
</I>&gt;<i> using MonoTouch.Dialog;
</I>&gt;<i> using System.Drawing;
</I>&gt;<i> using System.Data;
</I>&gt;<i> using System.IO;
</I>&gt;<i> using SQLite;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> namespace MyDBAccessApp
</I>&gt;<i> {
</I>&gt;<i>        public class HomeNavController : UITableViewController
</I>&gt;<i>        {
</I>&gt;<i>                // declare vars
</I>&gt;<i>                // add these in later when nav button options added
</I>&gt;<i>        //      List&lt;NavItemGroup&gt; navItems = new List&lt;NavItemGroup&gt;();
</I>&gt;<i>        //      NavItemTableSource tableSource;
</I>&gt;<i>
</I>&gt;<i>                protected List&lt;CountyData&gt; counties = new List&lt;CountyData&gt;
</I>&gt;<i> ();
</I>&gt;<i>                protected TableSource tableSource;
</I>&gt;<i>                CountyData county;
</I>&gt;<i>
</I>&gt;<i>                UIImageView imageView;
</I>&gt;<i>                UIImage logoGraphic;
</I>&gt;<i>                UILabel appTitle;
</I>&gt;<i>                UISearchBar searchBar;
</I>&gt;<i>
</I>&gt;<i>                float _TopOfScreen;
</I>&gt;<i>                float _CentScreen;
</I>&gt;<i>                float logoVert;
</I>&gt;<i>                float logoHorz;
</I>&gt;<i>                float appTitleVert;
</I>&gt;<i>                float appTitleHorz;
</I>&gt;<i>                float logoWidth;
</I>&gt;<i>                float logoHeight;
</I>&gt;<i>                float barVert;
</I>&gt;<i>
</I>&gt;<i>                string dbName = &quot;FCResData.sqlite&quot;;
</I>&gt;<i>
</I>&gt;<i>                public HomeNavController () //:
</I>&gt;<i> base(UITableViewStyle.Grouped)
</I>&gt;<i>                {
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                class SearchDelegate : UISearchBarDelegate {
</I>&gt;<i>                        public override void SearchButtonClicked
</I>&gt;<i> (UISearchBar searchBar)
</I>&gt;<i>                        {
</I>&gt;<i>                                        searchBar.ResignFirstResponder ();
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i>                        public override void CancelButtonClicked
</I>&gt;<i> (UISearchBar searchBar)
</I>&gt;<i>                        {
</I>&gt;<i>                                        searchBar.ResignFirstResponder ();
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public override void ViewWillAppear (bool animated)
</I>&gt;<i>                {
</I>&gt;<i>                        base.ViewWillAppear (animated);
</I>&gt;<i>                        // hide the nav bar when this controller appears
</I>&gt;<i>                        NavigationController.SetNavigationBarHidden (true,
</I>&gt;<i> true);
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public override void ViewWillDisappear (bool animated)
</I>&gt;<i>                {
</I>&gt;<i>                        base.ViewWillDisappear (animated);
</I>&gt;<i>                        // show the nav bar when other controllers appear
</I>&gt;<i>                        NavigationController.SetNavigationBarHidden (false,
</I>&gt;<i> true);
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public override void ViewDidLoad ()
</I>&gt;<i>                {
</I>&gt;<i>
</I>&gt;<i>                        logoGraphic = UIImage.FromFile
</I>&gt;<i> (&quot;images/BooksLogo03.png&quot;);
</I>&gt;<i>
</I>&gt;<i>                        logoWidth = logoGraphic.Size.Width;
</I>&gt;<i>                        logoHeight = 200; //logoGraphic.Size.Height;
</I>&gt;<i>
</I>&gt;<i>                        _CentScreen = UIScreen.MainScreen.Bounds.Width / 2;
</I>&gt;<i>                        _TopOfScreen = 20;
</I>&gt;<i>                        logoVert = _TopOfScreen;
</I>&gt;<i>                        logoHorz = _CentScreen - (logoWidth / 2);
</I>&gt;<i>
</I>&gt;<i>                        imageView = new UIImageView(new RectangleF(logoHorz,
</I>&gt;<i> logoVert,logoWidth,logoHeight));
</I>&gt;<i>                        imageView.ContentMode =
</I>&gt;<i> UIViewContentMode.ScaleAspectFit;
</I>&gt;<i>                        imageView.Image = logoGraphic;
</I>&gt;<i>
</I>&gt;<i>                        appTitleVert = _TopOfScreen + logoHeight + 5;
</I>&gt;<i>                        appTitleHorz = _CentScreen - 350;
</I>&gt;<i>
</I>&gt;<i>                        appTitle = new UILabel (new RectangleF
</I>&gt;<i> (appTitleHorz,
</I>&gt;<i> appTitleVert,700,60));
</I>&gt;<i>                        appTitle.Text =&quot;Sales Sites for Texas Foreclosures&quot;;
</I>&gt;<i>                        appTitle.Font = UIFont.FromName(&quot;Arial-BoldMT&quot;,
</I>&gt;<i> 32f);
</I>&gt;<i>                        appTitle.TextAlignment = UITextAlignment.Center;
</I>&gt;<i>
</I>&gt;<i>                        barVert = appTitleVert + 60;
</I>&gt;<i>
</I>&gt;<i>                        searchBar = new UISearchBar(new RectangleF(0,
</I>&gt;<i> barVert, View.Bounds.Width,
</I>&gt;<i> 44)){
</I>&gt;<i>                                Delegate = new SearchDelegate (),
</I>&gt;<i>                                ShowsCancelButton = false,
</I>&gt;<i>                        };
</I>&gt;<i>
</I>&gt;<i>                        var connection = new
</I>&gt;<i> SQLiteConnection(GetDBPath(dbName));
</I>&gt;<i>                        var counties = connection.Table&lt;CountyData&gt;();
</I>&gt;<i>
</I>&gt;<i>                      // THIS IS THE PROBLEM LINE RIGHT HERE! The
</I>&gt;<i> tableSource assignment below.
</I>&gt;<i>
</I>&gt;<i>                        tableSource = new TableSource (counties);
</I>&gt;<i>
</I>&gt;<i>                        TableView = new UITableView () {
</I>&gt;<i>                                        Source = tableSource
</I>&gt;<i>                                };
</I>&gt;<i>
</I>&gt;<i>                        connection.Close ();
</I>&gt;<i>
</I>&gt;<i>                        this.Add(searchBar);
</I>&gt;<i>                        this.Add(appTitle);
</I>&gt;<i>                        this.Add(imageView);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                // The following also from BasicOperations
</I>&gt;<i>
</I>&gt;<i>                protected string GetDBPath (string dbName)
</I>&gt;<i>                {
</I>&gt;<i>                        // get a reference to the documents folder
</I>&gt;<i>                        var documents = Environment.GetFolderPath
</I>&gt;<i> (Environment.SpecialFolder.Personal);
</I>&gt;<i>
</I>&gt;<i>                        // create the db path
</I>&gt;<i>                        string db = Path.Combine (documents, dbName);
</I>&gt;<i>
</I>&gt;<i>                        return db;
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                // A simple data source for our table -- took this from
</I>&gt;<i> BasicOperations
</I>&gt;<i>
</I>&gt;<i>                protected class TableSource : UITableViewSource
</I>&gt;<i>                {
</I>&gt;<i>                        List&lt;CountyData&gt; items;
</I>&gt;<i>
</I>&gt;<i>                        public TableSource (List&lt;CountyData&gt; items) :
</I>&gt;<i> base() { this.items =
</I>&gt;<i> items; }
</I>&gt;<i>
</I>&gt;<i>                        public override int NumberOfSections (UITableView
</I>&gt;<i> tableView) { return 1;
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>                        public override int RowsInSection (UITableView
</I>&gt;<i> tableview, int section) {
</I>&gt;<i> return this.items.Count; }
</I>&gt;<i>
</I>&gt;<i>                        public override UITableViewCell GetCell
</I>&gt;<i> (UITableView tableView,
</I>&gt;<i> NSIndexPath indexPath)
</I>&gt;<i>                        {
</I>&gt;<i>                                UITableViewCell cell;
</I>&gt;<i>                                cell = tableView.DequeueReusableCell
</I>&gt;<i> (&quot;item&quot;);
</I>&gt;<i>                                if(cell == null)
</I>&gt;<i>                                        cell = new
</I>&gt;<i> UITableViewCell(UITableViewCellStyle.Default, &quot;item&quot;);
</I>&gt;<i>                                cell.TextLabel.Text =
</I>&gt;<i> this.items[indexPath.Row].FCCounty + &quot;County;
</I>&gt;<i> City: &quot; + this.items[indexPath.Row].CountySeat;
</I>&gt;<i>                                return cell;
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>        }
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://monotouch.2284126.n4.nabble.com/Problem-with-making-code-based-on-database-access-gallery-project-work-tp4641935.html">http://monotouch.2284126.n4.nabble.com/Problem-with-making-code-based-on-database-access-gallery-project-work-tp4641935.html</A>
</I>&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120517/6ff586ab/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120517/6ff586ab/attachment-0001.html</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009626.html">[MonoTouch] Problem with making code based on database access gallery project work
</A></li>
	<LI>Next message: <A HREF="009672.html">[MonoTouch] Problem with making code based on database access gallery project work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9630">[ date ]</a>
              <a href="thread.html#9630">[ thread ]</a>
              <a href="subject.html#9630">[ subject ]</a>
              <a href="author.html#9630">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
