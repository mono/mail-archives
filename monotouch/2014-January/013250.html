<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Using MonoTouch.CoreText to draw text fragments at	specific coordinates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Using%20MonoTouch.CoreText%20to%20draw%20text%20fragments%20at%0A%09specific%20coordinates&In-Reply-To=%3Cm2zjmmdaqs.fsf%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013249.html">
   <LINK REL="Next"  HREF="013251.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Using MonoTouch.CoreText to draw text fragments at	specific coordinates</H1>
    <B>Guido Van Hoecke</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Using%20MonoTouch.CoreText%20to%20draw%20text%20fragments%20at%0A%09specific%20coordinates&In-Reply-To=%3Cm2zjmmdaqs.fsf%40gmail.com%3E"
       TITLE="[MonoTouch] Using MonoTouch.CoreText to draw text fragments at	specific coordinates">guivho at gmail.com
       </A><BR>
    <I>Thu Jan 23 14:38:19 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="013249.html">[MonoTouch] Crash Reporting Tool For MonoTouch
</A></li>
        <LI>Next message: <A HREF="013251.html">[MonoTouch] Please help with 'Using MonoTouch.CoreText to draw text	fragments'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13250">[ date ]</a>
              <a href="thread.html#13250">[ thread ]</a>
              <a href="subject.html#13250">[ subject ]</a>
              <a href="author.html#13250">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

(Copy from stackoverflow post at
<A HREF="http://stackoverflow.com/questions/21309082/using-monotouch-coretext-to-draw-text-fragments-at-specific-coordinaates">http://stackoverflow.com/questions/21309082/using-monotouch-coretext-to-draw-text-fragments-at-specific-coordinaates</A>)

I am trying to get a grasp of CoreText, working from the example app at
<A HREF="http://docs.xamarin.com/recipes/ios/graphics_and_drawing/core_text/draw_unicode_text_with_coretext/">http://docs.xamarin.com/recipes/ios/graphics_and_drawing/core_text/draw_unicode_text_with_coretext/</A>

As a test I want to write to write 'N', 'E', 'S' and 'W' on the view in
the respective positions. But only the first one (the 'N') gets drawn.

Here's my version of TextDrawingView.cs:

    using System;
    using System.Drawing;
    using MonoTouch.UIKit;
    using MonoTouch.Foundation;
    using MonoTouch.CoreText;
    using MonoTouch.CoreGraphics;

    namespace CoreTextDrawing
    {
        public class TextDrawingView : UIView
        {
            public TextDrawingView ()
            {
            }

            //based upon docs.xamarin.com/recipes/ios/graphics_and_drawing/\
            //    core_text/draw_unicode_text_with_coretext/

            public override void Draw (RectangleF rect)
            {
                base.Draw (rect);

                var gctx = UIGraphics.GetCurrentContext ();
                gctx.SetFillColor (UIColor.Green.CGColor);

                DrawText (&quot;N&quot;, Bounds.Width / 2, Bounds.Height / 4, gctx);
                DrawText (&quot;W&quot;, Bounds.Width / 4, Bounds.Height / 2, gctx);
                DrawText (&quot;E&quot;, Bounds.Width / 4 * 3, Bounds.Height / 2, gctx);
                DrawText (&quot;S&quot;, Bounds.Width / 2, Bounds.Height / 4 * 3, gctx);
            }

            private void DrawText (string t, float x, float y, CGContext gctx)
            {
                gctx.TranslateCTM (x, y);
                gctx.ScaleCTM (1, -1);
                var attributedString = new NSAttributedString (t,
                                           new CTStringAttributes {
                        ForegroundColorFromContext = true,
                        Font = new CTFont (&quot;Arial&quot;, 24)
                    }); 

                using (var textLine = new CTLine (attributedString)) { 
                    textLine.Draw (gctx);
                }
            }
        }
    }

I have no idea why only the 'N' gets drawn. Each of the 4 DrawText
invocations work fine if they are the only invocation.

I seem to lack some basic understanding.

Basically I want to draw some letters at specific coordinates on the
screen, but failed to understand how to achieve this.

Any help, any one?

TIA,


Guido

--
But these pills can't be habit forming;
I've been taking them for years.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013249.html">[MonoTouch] Crash Reporting Tool For MonoTouch
</A></li>
	<LI>Next message: <A HREF="013251.html">[MonoTouch] Please help with 'Using MonoTouch.CoreText to draw text	fragments'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13250">[ date ]</a>
              <a href="thread.html#13250">[ thread ]</a>
              <a href="subject.html#13250">[ subject ]</a>
              <a href="author.html#13250">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
