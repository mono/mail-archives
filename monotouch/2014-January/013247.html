<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Major Windows Authentication Issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Major%20Windows%20Authentication%20Issue&In-Reply-To=%3C1390134685822-4658528.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013246.html">
   <LINK REL="Next"  HREF="013248.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Major Windows Authentication Issue</H1>
    <B>Xy</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Major%20Windows%20Authentication%20Issue&In-Reply-To=%3C1390134685822-4658528.post%40n4.nabble.com%3E"
       TITLE="[MonoTouch] Major Windows Authentication Issue">Xy at pyriformgroup.com
       </A><BR>
    <I>Sun Jan 19 12:31:25 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="013246.html">[MonoTouch] Slide down menu
</A></li>
        <LI>Next message: <A HREF="013248.html">[MonoTouch] Major Windows Authentication Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13247">[ date ]</a>
              <a href="thread.html#13247">[ thread ]</a>
              <a href="subject.html#13247">[ subject ]</a>
              <a href="author.html#13247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have some code that downloads files using WebClient from a Windows
Authentication-based server for Monotouch that worked well before the iOS7
release of Monotouch.  However, now with this version of Monotouch:

Xamarin.iOS
Version: 7.0.5.2 (Business Edition)
Branch: 
Build date: 2013-02-12 20:04:08-0500

I get this error when downloading files:

 Exception from source mscorlib : System.IO.IOException: Too many open files

  at System.IO.FileStream..ctor (System.String path, FileMode mode,
FileAccess access, FileShare share, Int32 bufferSize, Boolean anonymous,
FileOptions options) [0x00000] in &lt;filename unknown&gt;:0 
	  at System.IO.FileStream..ctor (System.String path, FileMode mode,
FileAccess access, FileShare share, Int32 bufferSize, Boolean isAsync,
Boolean anonymous) [0x00000] in &lt;filename unknown&gt;:0 
	  at System.IO.FileStream..ctor (System.String path, FileMode mode,
FileAccess access) [0x00000] in &lt;filename unknown&gt;:0 

The error happens like clockwork after 236 files are downloaded from a
Windows Authentication server.  The first 235 files download just fine.

The exact same code that worked before, now does not work when paired with
the new version of the Monotouch library.  I thought that perhaps it had
something to do with WebClient specifically, so I tried implementing a
non-WebClient approach using HttpWebRequest and that has the exact same
problem.  As soon as I take the Windows Authentication piece out by pointing
it at a non-authenticated test server, it works fine.  When I switch back to
the Windows Authentication server, it breaks.  Windows Authentication is a
necessary part of this app, so I cannot switch to another authentication
method.

I am sure this is a regression. I have confirmed that this is not an iOS7
issue as the same problem repros in the iOS 6 simulator as the iOS 7
simulator.  Rather, it is an issue in the underlying Monotouch/Mono library
itself.  The old build works just fine on iOS 7 simulator and hardware.

Two questions:

1.  Can I use the old version of Monotouch somehow?  If so, how do I
download the DLL for the old version of System.Net, and use it side-by-side
in my app?  I am now on the new version of the tools.
2.  Is this an issue you can provide guidance on how to work around, or an
ETA on a fix?

Thanks,




--
View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/Major-Windows-Authentication-Issue-tp4658528.html">http://monotouch.2284126.n4.nabble.com/Major-Windows-Authentication-Issue-tp4658528.html</A>
Sent from the MonoTouch mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013246.html">[MonoTouch] Slide down menu
</A></li>
	<LI>Next message: <A HREF="013248.html">[MonoTouch] Major Windows Authentication Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13247">[ date ]</a>
              <a href="thread.html#13247">[ thread ]</a>
              <a href="subject.html#13247">[ subject ]</a>
              <a href="author.html#13247">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
