<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Convert String to DateTime
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Convert%20String%20to%20DateTime&In-Reply-To=1305033403918-3511815.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003114.html">
   <LINK REL="Next"  HREF="003116.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Convert String to DateTime</H1>
    <B>Nic Wise</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Convert%20String%20to%20DateTime&In-Reply-To=1305033403918-3511815.post%40n4.nabble.com"
       TITLE="[MonoTouch] Convert String to DateTime">nicw at fastchicken.co.nz
       </A><BR>
    <I>Tue May 10 09:35:18 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003114.html">[MonoTouch] Convert String to DateTime
</A></li>
        <LI>Next message: <A HREF="003116.html">[MonoTouch] Cascade controls in MT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3115">[ date ]</a>
              <a href="thread.html#3115">[ thread ]</a>
              <a href="subject.html#3115">[ subject ]</a>
              <a href="author.html#3115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just wondering why you would use reflection...

Worst case: use linq to xml and XDocument... or I'm sure there is some
serialization built in.

or:

DateTime.ParseExtact(&quot;2011-05-09T16:02:37.673&quot;, &quot;O&quot; ,
CultureInfo.InvariantCulture);

from here: <A HREF="http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx">http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx</A> and
here: <A HREF="http://msdn.microsoft.com/en-us/library/az4se3k1.aspx">http://msdn.microsoft.com/en-us/library/az4se3k1.aspx</A>

I suspect that System.Convert.ToDateTime can't handle these dates,
without you passing in the actual format.



On Tue, May 10, 2011 at 14:16, kizmar &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">kizmar at gmail.com</A>&gt; wrote:
&gt;<i> I'm using System.Reflection to convert XML elements to object property
</I>&gt;<i> types. The following method works on everything except DateTime formats:
</I>&gt;<i>
</I>&gt;<i> public static T Convert(object o) {
</I>&gt;<i> 	if (o == null || Convert.IsDBNull(o)) return default(T);
</I>&gt;<i> 	else {
</I>&gt;<i> 		Type t = Nullable.GetUnderlyingType(typeof(T));
</I>&gt;<i> 		if (t == null) t = typeof(T);
</I>&gt;<i> 		if (t.IsEnum) t = typeof(System.Int32);
</I>&gt;<i> 		if (t == typeof(DateTime)) {
</I>&gt;<i> 			// Do something here to fix the issue?
</I>&gt;<i> 			// 2011-05-09T16:02:37.673
</I>&gt;<i> 		}
</I>&gt;<i> 		return (T)Convert.ChangeType(o, t);
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> I'm getting the following error when &quot;t&quot; is a DateTime and &quot;o&quot; is
</I>&gt;<i> &quot;2011-05-09T16:02:37.673&quot;:
</I>&gt;<i>
</I>&gt;<i> System.FormatException: String was not recognized as a valid DateTime.
</I>&gt;<i>   at System.DateTime.Parse (System.String s, IFormatProvider provider,
</I>&gt;<i> DateTimeStyles styles)
</I>&gt;<i> [0x00027] in
</I>&gt;<i> /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/DateTime.cs:828
</I>&gt;<i>
</I>&gt;<i>   at System.DateTime.Parse (System.String s, IFormatProvider provider)
</I>&gt;<i> [0x00000] in
</I>&gt;<i> /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/DateTime.cs:816
</I>&gt;<i>
</I>&gt;<i>   at System.Convert.ToDateTime (System.String value, IFormatProvider
</I>&gt;<i> provider) [0x0000c] in
</I>&gt;<i> /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Convert.cs:630
</I>&gt;<i>
</I>&gt;<i>   at System.String.System.IConvertible.ToDateTime (IFormatProvider provider)
</I>&gt;<i> [0x00000] in
</I>&gt;<i> /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/String.cs:2320
</I>&gt;<i>
</I>&gt;<i>   at System.Convert.ToDateTime (System.Object value, IFormatProvider
</I>&gt;<i> provider) [0x0000c] in
</I>&gt;<i> /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Convert.cs:694
</I>&gt;<i>
</I>&gt;<i>   at System.Convert.ToDateTime (System.Object value) [0x0000c] in
</I>&gt;<i> /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Convert.cs:687
</I>&gt;<i>
</I>&gt;<i>   at VoterRegistration.Data.Member.Convert[DateTime] (System.Object o)
</I>&gt;<i> [0x00079] in
</I>&gt;<i> /Users/admin/Projects/VoterRegistration/VoterRegistration/Data/Member.cs:355
</I>&gt;<i>
</I>&gt;<i> I haven't been able to gracefully handle this yet. Any suggestions would be
</I>&gt;<i> greatly appreciated.
</I>&gt;<i>
</I>&gt;<i> Reference - I got that method from this post
</I>&gt;<i>
</I>&gt;<i> ________________________________
</I>&gt;<i> View this message in context: Convert String to DateTime
</I>&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


-- 
Nic Wise
t.&#160; +44 7788 592 806 |&#160;@fastchicken | <A HREF="http://www.linkedin.com/in/nicwise">http://www.linkedin.com/in/nicwise</A>
b. <A HREF="http://www.fastchicken.co.nz/">http://www.fastchicken.co.nz/</A> | <A HREF="http://www.flickr.com/photos/nicwise">http://www.flickr.com/photos/nicwise</A>

mobileAgent (for FreeAgent): get your accounts in your pocket.
<A HREF="http://goo.gl/IuBU">http://goo.gl/IuBU</A>
Trip Wallet: Keep track of your budget on the go: <A HREF="http://goo.gl/ePhKa">http://goo.gl/ePhKa</A>
London Bike App: Find the nearest Boris Bike, and get riding! <A HREF="http://goo.gl/Icp2">http://goo.gl/Icp2</A>
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003114.html">[MonoTouch] Convert String to DateTime
</A></li>
	<LI>Next message: <A HREF="003116.html">[MonoTouch] Cascade controls in MT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3115">[ date ]</a>
              <a href="thread.html#3115">[ thread ]</a>
              <a href="subject.html#3115">[ subject ]</a>
              <a href="author.html#3115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
