<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Strange error when loading XIB
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Strange%20error%20when%20loading%20XIB&In-Reply-To=1304798233680-3506100.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003062.html">
   <LINK REL="Next"  HREF="003065.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Strange error when loading XIB</H1>
    <B>Dimitris Tavlikos</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Strange%20error%20when%20loading%20XIB&In-Reply-To=1304798233680-3506100.post%40n4.nabble.com"
       TITLE="[MonoTouch] Strange error when loading XIB">jimitav at gmail.com
       </A><BR>
    <I>Sat May  7 18:52:20 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003062.html">[MonoTouch] Strange error when loading XIB
</A></li>
        <LI>Next message: <A HREF="003065.html">[MonoTouch] Strange error when loading XIB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3064">[ date ]</a>
              <a href="thread.html#3064">[ thread ]</a>
              <a href="subject.html#3064">[ subject ]</a>
              <a href="author.html#3064">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If we were talking about pure .NET code, this type of error would be similar to an InvalidCastException. Similar, but not identical.

The problem here is that you are initializing the controller with a wrong constructor. You are instructing the runtime to load a native controller of type PoscodeInputController, and use a UIViewController as a wrapper. This cannot stand because when the managed objects will be created, the runtime does not find the members of PoscodeInputController inside the UIViewController class. Hence, the error message actually tells you: &quot;I can't find the member TextBoxPostCode inside UIViewController&quot;. You may think why would this happen, since we can do, for example,

UIViewController v = new MyViewController();

where MyViewController inherits UIViewController and might actually have members that UIViewController does not. This is different, since in this case the native object is first created, after that wrapped by the managed MyViewController class and then assigned to an object of its base type.
Here,

&gt;<i> new
</I>&gt;<i> UIViewController(&quot;PoscodeInputController&quot;,null)
</I>
the runtime just fails to wrap the native object to the managed one.

So the best thing is to just initialize your controller with the default constructor:

new PoscodeInputController();

If you check the constructors that MonoDevelop creates, this constructor inherits the constructor you are calling now:

public PoscodeInputController() : base(&quot;PoscodeInputController&quot;,null) {}

This works because the runtime wraps the native object to its managed wrapper successfully, since it is being called from an object of the same type.

Dimitris Tavlikos
Software Developer
Email: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">jimitav at gmail.com</A>
Twitter: @dtavlikos
Blog: <A HREF="http://software.tavlikos.com">http://software.tavlikos.com</A>





On May 7, 2011, at 10:57 PM, KhalilD wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> This problem is driving me crazy, If anyone can help I would very much
</I>&gt;<i> appreciate it.
</I>&gt;<i> 
</I>&gt;<i> I'm trying to load an xib view like so:
</I>&gt;<i> NavigationController.PushViewController(new
</I>&gt;<i> UIViewController(&quot;PoscodeInputController&quot;,null),true);
</I>&gt;<i> 
</I>&gt;<i> The name of the xib is spelled correctly, and the view consists of a few
</I>&gt;<i> labels and a textbox all with outlets in the view controller.
</I>&gt;<i> 
</I>&gt;<i> I keep getting this exception:
</I>&gt;<i> 
</I>&gt;<i> Unhandled Exception: MonoTouch.Foundation.MonoTouchException: Objective-C
</I>&gt;<i> exception thrown.  Name: NSUnknownKeyException Reason: [&lt;UIViewController
</I>&gt;<i> 0x75993f0&gt; setValue:forUndefinedKey:]: this class is not key value
</I>&gt;<i> coding-compliant for the key TextBoxPostCode.
</I>&gt;<i>  at (wrapper managed-to-native)
</I>&gt;<i> MonoTouch.ObjCRuntime.Messaging:void_objc_msgSend_IntPtr_bool
</I>&gt;<i> (intptr,intptr,intptr,bool)
</I>&gt;<i>  at MonoTouch.UIKit.UINavigationController.PushViewController
</I>&gt;<i> (MonoTouch.UIKit.UIViewController viewController, Boolean animated)
</I>&gt;<i> [0x0001c] in
</I>&gt;<i> /Users/plasma/Source/iphone/monotouch/UIKit/UINavigationController.g.cs:121 
</I>&gt;<i>  at SchoolFinder.SearchRoot.ButtonDoSearchByPostcode
</I>&gt;<i> (MonoTouch.UIKit.UIButton sender) [0x00000] in
</I>&gt;<i> /Users/Khalil/Desktop/iOSScratch/SchoolFinder/SchoolFinder-Production/V0.1/SchoolFinder/SearchRoot.xib.cs:39 
</I>&gt;<i>  at (wrapper managed-to-native)
</I>&gt;<i> MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
</I>&gt;<i>  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String
</I>&gt;<i> principalClassName, System.String delegateClassName) [0x00038] in
</I>&gt;<i> /Users/plasma/Source/iphone/monotouch/UIKit/UIApplication.cs:26 
</I>&gt;<i>  at MonoTouch.UIKit.UIApplication.Main (System.String[] args) [0x00000] in
</I>&gt;<i> /Users/plasma/Source/iphone/monotouch/UIKit/UIApplication.cs:31 
</I>&gt;<i>  at SchoolFinder.Application.Main (System.String[] args) [0x00000] in
</I>&gt;<i> /Users/Khalil/Desktop/iOSScratch/SchoolFinder/SchoolFinder-Production/V0.1/SchoolFinder/Main.cs:14 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/Strange-error-when-loading-XIB-tp3506100p3506100.html">http://monotouch.2284126.n4.nabble.com/Strange-error-when-loading-XIB-tp3506100p3506100.html</A>
</I>&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003062.html">[MonoTouch] Strange error when loading XIB
</A></li>
	<LI>Next message: <A HREF="003065.html">[MonoTouch] Strange error when loading XIB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3064">[ date ]</a>
              <a href="thread.html#3064">[ thread ]</a>
              <a href="subject.html#3064">[ subject ]</a>
              <a href="author.html#3064">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
