<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] HttpWebRequest: &quot;ConnectFailure: No route to host&quot; after coming out of airplane mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20HttpWebRequest%3A%20%22ConnectFailure%3A%20No%20route%20to%20host%22%0A%20after%20coming%20out%20of%20airplane%20mode&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002608.html">
   <LINK REL="Next"  HREF="002610.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] HttpWebRequest: &quot;ConnectFailure: No route to host&quot; after coming out of airplane mode</H1>
    <B>David Moles</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20HttpWebRequest%3A%20%22ConnectFailure%3A%20No%20route%20to%20host%22%0A%20after%20coming%20out%20of%20airplane%20mode&In-Reply-To="
       TITLE="[MonoTouch] HttpWebRequest: &quot;ConnectFailure: No route to host&quot; after coming out of airplane mode">davidmoles at thegogame.com
       </A><BR>
    <I>Mon Jan 24 19:11:09 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002608.html">[MonoTouch] Status of --with-sigaltstack?
</A></li>
        <LI>Next message: <A HREF="002610.html">[MonoTouch] HttpWebRequest: &quot;ConnectFailure: No route to host&quot; after coming out of airplane mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2609">[ date ]</a>
              <a href="thread.html#2609">[ thread ]</a>
              <a href="subject.html#2609">[ subject ]</a>
              <a href="author.html#2609">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey, folks --

We just had the first field test of our client-server app last week and
finally discovered the joy that is AT&amp;T's 3G network. I've spent the last
few days rewriting our network code to keep track of failed network requests
and resubmit them after a certain interval (currently 5 seconds). To avoid
having to leave my desk, I've been using airplane mode to simulate lost
connectivity.

  1. Start app with network connectivity
  2. Make sure it works
  3. Background the app and activate airplane mode
  4. Return to the app
  5. Note in the phone console (via iPhone configuration utility, thanks
Miguel!) that we're getting connection failures
  6. Background the app and deactivate airplane mode
  7. Return to the app while still &quot;Searching...&quot; for the 3G network
  8. Note in the phone console that we're still getting connection
failures... forever.

It seems like if the network's not up when the app's first foregrounded, it
never finds out that the network's up.

If I background the app and then sort of kick the network by, say, loading
something in Safari, I get something like this in the console, and after
that my app can connect, too:

Mon Jan 24 16:07:53 TGG-iPhone-3GS configd[23] &lt;Debug&gt;:
CaptiveNetworkSupport:CaptiveHandleNetworkChanged:2205 key:
State:/Network/Service/0E5DFB9B-E7C2-449A-8467-7B6C7A909ABE/IPv4

Mon Jan 24 16:07:53 TGG-iPhone-3GS configd[23] &lt;Notice&gt;: network
configuration changed.


But if I don't, it seems like I'm just stuck. Is this plausible?

And is there something I can do on my end to check / force a reload of the
network configuration, or whatever needs doing here?

-- 
David Moles
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">davidmoles at thegogame.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110124/9ee31f2e/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110124/9ee31f2e/attachment-0001.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002608.html">[MonoTouch] Status of --with-sigaltstack?
</A></li>
	<LI>Next message: <A HREF="002610.html">[MonoTouch] HttpWebRequest: &quot;ConnectFailure: No route to host&quot; after coming out of airplane mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2609">[ date ]</a>
              <a href="thread.html#2609">[ thread ]</a>
              <a href="subject.html#2609">[ subject ]</a>
              <a href="author.html#2609">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
