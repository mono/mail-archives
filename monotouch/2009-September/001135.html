<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] exception when attempting to create XmlSerializer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20exception%20when%20attempting%20to%20create%20XmlSerializer&In-Reply-To=d57001c10909220838t479276f9h7ce7596fe6eca545%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001133.html">
   <LINK REL="Next"  HREF="001136.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] exception when attempting to create XmlSerializer</H1>
    <B>Lee Whitney</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20exception%20when%20attempting%20to%20create%20XmlSerializer&In-Reply-To=d57001c10909220838t479276f9h7ce7596fe6eca545%40mail.gmail.com"
       TITLE="[MonoTouch] exception when attempting to create XmlSerializer">lwhitney at hdgreetings.com
       </A><BR>
    <I>Tue Sep 22 11:55:55 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001133.html">[MonoTouch] exception when attempting to create XmlSerializer
</A></li>
        <LI>Next message: <A HREF="001136.html">[MonoTouch] exception when attempting to create XmlSerializer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1135">[ date ]</a>
              <a href="thread.html#1135">[ thread ]</a>
              <a href="subject.html#1135">[ subject ]</a>
              <a href="author.html#1135">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What are most common cases where the linker can't do the optimal thing?

Is it only when the app code is explicitly using reflection?  Or are there implicit cases also?

I didn't see code posted in this thread that was using reflection, but maybe I missed it.

Lee



From: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>] On Behalf Of Duane Wandless
Sent: Tuesday, September 22, 2009 10:38 AM
To: Simon Guindon
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
Subject: Re: [MonoTouch] exception when attempting to create XmlSerializer

Compiling with -linksdkonly increased the size to 5.8M.  Here is the full directory with the linksdkonly flag (release build).

total 11960
-rw-r--r--  1 xxx  staff     1867 Sep 22 11:27 MainWindow.nib
-rwxr-xr-x  1 xxx  staff   154624 Sep 22 11:27 monotouch.dll
-rwxr-xr-x  1 xxx  staff   347136 Sep 22 11:27 Test1.exe
-rwxr-xr-x  1 xxx  staff   897536 Sep 22 11:27 mscorlib.dll
-rwxr-xr-x  1 xxx  staff   441856 Sep 22 11:27 System.dll
-rwxr-xr-x  1 xxx  staff   486400 Sep 22 11:27 System.Xml.dll
-rwxr-xr-x  1 xxx  staff    40448 Sep 22 11:27 System.Xml.Linq.dll
-rwxr-xr-x  1 xxx  staff    26624 Sep 22 11:27 System.Core.dll
-rwxr-xr-x  1 xxx  staff   162816 Sep 22 11:27 Mono.Security.dll
-rwxr-xr-x  1 xxx  staff  3546372 Sep 22 11:27 Test1
-rw-r--r--  1 xxx  staff     1120 Sep 22 11:28 Info.plist

Here is the full directory without the flag (debug build).
total 9920
-rw-r--r--  1 xxx  staff     1867 Sep 16 07:06 MainWindow.nib
-rwxr-xr-x  1 xxx  staff   153088 Sep 16 11:04 monotouch.dll
-rw-r--r--  1 xxx  staff      540 Sep 16 11:04 Test1.exe.mdb
-rwxr-xr-x  1 xxx  staff     6144 Sep 16 11:04 Test1.exe
-rwxr-xr-x  1 xxx  staff   308736 Sep 16 11:04 System.dll
-rwxr-xr-x  1 xxx  staff     7168 Sep 16 11:04 System.Xml.dll
-rwxr-xr-x  1 xxx  staff     5120 Sep 16 11:04 System.Xml.Linq.dll
-rwxr-xr-x  1 xxx  staff   861184 Sep 16 11:04 mscorlib.dll
-rwxr-xr-x  1 xxx  staff     5632 Sep 16 11:04 System.Core.dll
-rwxr-xr-x  1 xxx  staff   153600 Sep 16 11:04 Mono.Security.dll
-rwxr-xr-x  1 xxx  staff  3546372 Sep 16 11:04 Test1
-rw-r--r--  1 xxx  staff     1120 Sep 16 11:04 Info.plist

I thought the file Test1 (size 3.4M) is what should be compared to the Windows DLL (size 360k).  Or is it Test1.exe?  Which then begs the question what is in Test1.  This is a default MonoDevelop project, no linking to libraries other than the System and monotouch libraries.

Thanks,
Duane
On Tue, Sep 22, 2009 at 11:14 AM, Simon Guindon &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">sguindon at truecontext.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">sguindon at truecontext.com</A>&gt;&gt; wrote:

Duane,



Keep in mind your compiling the actual &quot;framework&quot; into your .app unlike in Windows where your just referencing things like System.dll etc. But it's a valid point. Thanks very much for the info.



I would be curious to compare 2 situations:

1.       Compile again with -linksdkonly and compare the numbers on how they differ.

2.       Do these comparisons again once you start filling out the UI layer with several interfaces and images if you need any.



Thanks!

Simon



From: Duane Wandless [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">duane at wandless.net</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">duane at wandless.net</A>&gt;]
Sent: Tuesday, September 22, 2009 11:07 AM
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&gt;; Miguel de Icaza
Cc: Michael Hutchinson; Simon Guindon

Subject: Re: [MonoTouch] exception when attempting to create XmlSerializer



I'll add some real world info.  I have compiled (note not ported) my existing Windows business layer to use MonoTouch.  The resulting .App is 4.8M.  This is with zero UI coding, just the API layer.  This is 24k lines (wc -l), 65 classes.  Windows DLL is 360k.  So I am a little concerned about the size.  Then again not having to rewrite the 24k lines is fantastic.

Duane

On Tue, Sep 22, 2009 at 10:30 AM, Simon Guindon &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">sguindon at truecontext.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">sguindon at truecontext.com</A>&gt;&gt; wrote:

Miguel,

I have thought about this as well however a standard iPhone application in MonoTouch is very much larger than its Objective-C counterpart and in danger of hitting the &quot;over the air downloadable&quot; limit of 10MB once you start adding images to your application. Much less head room.

I think probably some application statistics as far as real world apps compiling in both modes, how much gains are significant versus the amount of people encountering this issue.

If Novell wanted statistics on real world apps compiled in both modes, I for one would be glad to provide these on any production-size apps built so that we have numbers to base a decision around. I hope others would too so that we can better understand the situation.

I like your idea but I'm just not sure if the stats play in that favour or not.

There's a chance as people include large libraries like say MEF or others, that there is a large size of &quot;unused&quot; code the linker strips off. There is also the chance that a large amount of apps utilize 90% of their actual code and that your assumption would be correct.

It depends where the percentages lie I suppose is my point versus the risk.

Thanks and take care,
Simon

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>&gt; [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>&gt;] On Behalf Of Miguel de Icaza
Sent: Monday, September 21, 2009 10:16 PM
To: Michael Hutchinson
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&gt;
Subject: Re: [MonoTouch] exception when attempting to create XmlSerializer

&gt;<i> b) you can add &quot;-linksdkonly&quot; (IIRC) to the additional mtouch options,
</I>&gt;<i> preventing the linker from removing anything from your code.
</I>
It seems to me that we should make this the default and developers
should opt-in to link everything on their own, if they want to reduce
the program size.

The reality is that the linker is mostly there to remove unnecessary
library code, not to remove your application's library code.

Thoughts?

_______________________________________________
MonoTouch mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>&gt;
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
_______________________________________________
MonoTouch mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>&gt;
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20090922/e9203137/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20090922/e9203137/attachment-0001.html</A> 
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001133.html">[MonoTouch] exception when attempting to create XmlSerializer
</A></li>
	<LI>Next message: <A HREF="001136.html">[MonoTouch] exception when attempting to create XmlSerializer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1135">[ date ]</a>
              <a href="thread.html#1135">[ thread ]</a>
              <a href="subject.html#1135">[ subject ]</a>
              <a href="author.html#1135">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
