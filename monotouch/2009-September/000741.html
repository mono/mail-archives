<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] UIViewController / ViewDidLoad
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20UIViewController%20/%20ViewDidLoad&In-Reply-To=0AB7E7587D54A441A490F26E831A704AE9F952%40MAIL02.ie.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000737.html">
   <LINK REL="Next"  HREF="000750.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] UIViewController / ViewDidLoad</H1>
    <B>Geoff Norton</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20UIViewController%20/%20ViewDidLoad&In-Reply-To=0AB7E7587D54A441A490F26E831A704AE9F952%40MAIL02.ie.com"
       TITLE="[MonoTouch] UIViewController / ViewDidLoad">gnorton at novell.com
       </A><BR>
    <I>Mon Sep  7 15:52:16 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000737.html">[MonoTouch] UIViewController / ViewDidLoad
</A></li>
        <LI>Next message: <A HREF="000750.html">[MonoTouch] UIViewController / ViewDidLoad
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#741">[ date ]</a>
              <a href="thread.html#741">[ thread ]</a>
              <a href="subject.html#741">[ subject ]</a>
              <a href="author.html#741">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 7-Sep-09, at 1:02 PM, Mike Warriner wrote:

&gt;<i> Greg,
</I>&gt;<i>
</I>&gt;<i> Thank you for your reply.  However:
</I>&gt;<i>
</I>&gt;<i> #1 &#8211; By calling &#8220;window.AddSubView(myView.View)&#8221;  would I not be  
</I>&gt;<i> adding the relevant reference to the &#8220;window&#8221; so there is no need to  
</I>&gt;<i> keep the reference myself?  I can see that &#8220;myView&#8221; might get GC&#8217;d,  
</I>&gt;<i> but not the view held inside &#8211; does it matter to the iPhone that the  
</I>&gt;<i> view controller gets GC&#8217;d before the view?  (This seems important  
</I>&gt;<i> since it&#8217;s a &#8220;hidden behaviour&#8221; if I need to reference parent  
</I>&gt;<i> objects that I&#8217;m no-longer using.
</I>
I'm not sure how this is a hidden behaviour.  Lets look at the code,  
it was basically:

public void FinishLaunching () {
   MyViewController mvc = new MyViewController ();
   window.AddSubview (mvc.View);
}

As soon as control leaves this function, mvc has no refs left to it in  
managed, or in native, so its going to be garbage collected.

&gt;<i>
</I>&gt;<i> #2  Thank you &#8211; interesting (that code was code-generated by  
</I>&gt;<i> MonoDevelop).  Is there somewhere I can read to find out what you  
</I>&gt;<i> mean by &#8220;registered with the runtime&#8221; means for me please?  I&#8217;ve  
</I>&gt;<i> done this since you recommend it, but it doesn&#8217;t actually seem to  
</I>&gt;<i> make any difference to the results of changing #3.
</I>
Any time you create a constructor you need to call into : base () of  
some sort, what the exact call is depends on the logic you're trying  
to implement, in this case I was suggesting:


UIViewController(string,MonoTouch.Foundation.NSBundle)

Which allows you to create a view controller from a nib in a bundle.

&gt;<i>
</I>&gt;<i> #3 This seemed like my problem so I added a UIViewController to the  
</I>&gt;<i> main window (by putting it on the XIB and calling  
</I>&gt;<i> &#8220;window.AddSubview(myViewController.View)&#8221; in the &#8220;FinishedLoading&#8221;  
</I>&gt;<i> method as described in the code-generated comments and then I call  
</I>&gt;<i> &#8220;myViewController.PresentModalViewController(myView, true)&#8221; instead  
</I>&gt;<i> of &#8220;window.AddSubView(myView.View)&#8221; and it started working.
</I>&gt;<i>
</I>&gt;<i> HOWEVER...
</I>&gt;<i>
</I>&gt;<i> If I add any direct reference to the View property before I call  
</I>&gt;<i> PresentModalViewController &#8211; such as adding a Console.WriteLine  
</I>&gt;<i> (&#8220;View : &#8220;+myView.View) &#8211; it stops working again.
</I>&gt;<i>
</I>&gt;<i> So I contend that any programmatic access to a UIViewController&#8217;s  
</I>&gt;<i> &#8220;View&#8221; property before MonoTouch initializes the view causes the  
</I>&gt;<i> &#8220;ViewDidLoad&#8221; function to never get called.  Does this analysis  
</I>&gt;<i> sound valid, or am I still missing something blindingly obvious to  
</I>&gt;<i> experienced MonoTouch developers?
</I>
If you see this documentation on apples site:

<A HREF="http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#/">http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#/</A> 
/apple_ref/occ/instp/UIViewController/view

I'm guessing that the view hasn't been loaded by objc yet, and you're  
causing that to happen, but something is set wrong with your nibs.   
I'd need to see the exact code to speak to it further however.

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/mailman/private/monotouch/attachments/20090907/9ef05b9b/attachment.html">http://lists.ximian.com/mailman/private/monotouch/attachments/20090907/9ef05b9b/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000737.html">[MonoTouch] UIViewController / ViewDidLoad
</A></li>
	<LI>Next message: <A HREF="000750.html">[MonoTouch] UIViewController / ViewDidLoad
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#741">[ date ]</a>
              <a href="thread.html#741">[ thread ]</a>
              <a href="subject.html#741">[ subject ]</a>
              <a href="author.html#741">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
