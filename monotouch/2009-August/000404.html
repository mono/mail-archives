<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] CoreGraphics Drawing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20CoreGraphics%20Drawing&In-Reply-To=20090823051319.7YGA8.57535.imail%40fed1rmwml41">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000403.html">
   <LINK REL="Next"  HREF="000406.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] CoreGraphics Drawing</H1>
    <B>Geoff Norton</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20CoreGraphics%20Drawing&In-Reply-To=20090823051319.7YGA8.57535.imail%40fed1rmwml41"
       TITLE="[MonoTouch] CoreGraphics Drawing">gnorton at novell.com
       </A><BR>
    <I>Sun Aug 23 16:44:29 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000403.html">[MonoTouch] CoreGraphics Drawing
</A></li>
        <LI>Next message: <A HREF="000406.html">[MonoTouch] RowSelectedBug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#404">[ date ]</a>
              <a href="thread.html#404">[ thread ]</a>
              <a href="subject.html#404">[ subject ]</a>
              <a href="author.html#404">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This should be working.  Can you file a bug and attach a sample project?

Thanks

-g

On 23-Aug-09, at 5:13 AM, &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">joeldentici at cox.net</A>&gt; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">joeldentici at cox.net</A>&gt;  
wrote:

&gt;<i> I have implemented a subclass of UIView by adding a subview to my  
</I>&gt;<i> window, and changing the class name to &quot;MyView&quot;. I then link it to  
</I>&gt;<i> my AppDelegate, and save in IB. Then, monodevelop gets the update in  
</I>&gt;<i> the designer file, so i know i did the subclass correctly, because i  
</I>&gt;<i> see a partial class called &quot;MyView&quot;. Then, in main.cs I set it to  
</I>&gt;<i> inherit from UIView, and then override the Draw(RectangleF rect),  
</I>&gt;<i> method (which equates to drawRect(CGRect) in obj-c), but the method  
</I>&gt;<i> is only called when the app first starts. Later, when I try to call  
</I>&gt;<i> SetNeedsDisplay(), which sets the system to start a call to the  
</I>&gt;<i> drawing method of the view, it isn't called. I am able to call the  
</I>&gt;<i> method directly, but it is bad practice, and since it loads invalid  
</I>&gt;<i> drawing contexts, it won't draw anyways. I am just trying to create  
</I>&gt;<i> a simple game with CoreGraphics, but I cannot get it to work. If  
</I>&gt;<i> somebody could help me figure this out, it would be great. Thanks  
</I>&gt;<i> for any help.
</I>&gt;<i>
</I>&gt;<i> code suggests that the image should quickly move across the iphone's  
</I>&gt;<i> screen, but only draws once
</I>&gt;<i> code:
</I>&gt;<i> in designer.cs
</I>&gt;<i> // Base type probably should be MonoTouch.UIKit.UIView or subclass
</I>&gt;<i> 	[MonoTouch.Foundation.Register(&quot;MyView&quot;)]
</I>&gt;<i> 	public partial class MyView {
</I>&gt;<i> 	}
</I>&gt;<i>
</I>&gt;<i> in main.cs
</I>&gt;<i> public partial class MyView : UIView
</I>&gt;<i> {
</I>&gt;<i> public MyView(IntPtr handle)
</I>&gt;<i> 		{
</I>&gt;<i> 			NSTimer.CreateRepeatingScheduledTimer(TimeSpan.FromSeconds(.033),  
</I>&gt;<i> () =&gt; Update());
</I>&gt;<i> 		}
</I>&gt;<i> 		public void Update()
</I>&gt;<i> 		{
</I>&gt;<i> 			x += 5;
</I>&gt;<i> 		        SetNeedsDisplay();
</I>&gt;<i> 		}
</I>&gt;<i> 		
</I>&gt;<i>    float x = 0;
</I>&gt;<i> 		public override void Draw (System.Drawing.RectangleF rect)
</I>&gt;<i> 		{
</I>&gt;<i> 		        MonoTouch.CoreGraphics.CGContext context =  
</I>&gt;<i> UIGraphics.GetCurrentContext();
</I>&gt;<i> 			UIImage.FromFile(&quot;something.png&quot;).Draw(new PointF(x, 0));
</I>&gt;<i>
</I>&gt;<i> 		}
</I>&gt;<i> }
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000403.html">[MonoTouch] CoreGraphics Drawing
</A></li>
	<LI>Next message: <A HREF="000406.html">[MonoTouch] RowSelectedBug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#404">[ date ]</a>
              <a href="thread.html#404">[ thread ]</a>
              <a href="subject.html#404">[ subject ]</a>
              <a href="author.html#404">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
