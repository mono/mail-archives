<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Any ideas what causes this?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Any%20ideas%20what%20causes%20this%3F&In-Reply-To=%3C3710891442134441118%40unknownmsgid%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012168.html">
   <LINK REL="Next"  HREF="012184.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Any ideas what causes this?</H1>
    <B>James Darbyshire</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Any%20ideas%20what%20causes%20this%3F&In-Reply-To=%3C3710891442134441118%40unknownmsgid%3E"
       TITLE="[MonoTouch] Any ideas what causes this?">jamesdarbyshire at gmail.com
       </A><BR>
    <I>Mon Oct  8 12:00:51 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="012168.html">[MonoTouch] Any ideas what causes this?
</A></li>
        <LI>Next message: <A HREF="012184.html">[MonoTouch] Any ideas what causes this?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12169">[ date ]</a>
              <a href="thread.html#12169">[ thread ]</a>
              <a href="subject.html#12169">[ subject ]</a>
              <a href="author.html#12169">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dino,

For the 'No route to host' exception, can you try using an IP address
rather than a DNS record?

I agree that async exceptions can be a pain... I have felt it in the past!

Can you post an example of the way you are calling your services?

Regards,

James

On 08/10/2012, at 10:24 PM, Dean Cleaver &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">dean.cleaver at xceptionsoftware.com</A>&gt;
wrote:

  I&#8217;m only sending 30 to 300 records, no images (they&#8217;re handled
separately, and the locations having errors are not using images).



Problem I have is that they were able to connect milliseconds later to send
the error report to me &#8211; so if it&#8217;s a bad connection, it&#8217;s intermittent.



I have exception handling in every single function in the entire app &#8211; but
these exceptions are not occurring anywhere in my code &#8211; that&#8217;s my core
issue.



Dino



*From:* Jason Hardman [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">Jason.Hardman at beims.com</A>&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">Jason.Hardman at beims.com</A>&gt;]

*Sent:* Sunday, October 07, 2012 19:29
*To:* Dean Cleaver; James Darbyshire
*Cc:* <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
*Subject:* RE: [MonoTouch] Any ideas what causes this?



When I had the data size issue my web server was trying to send 50000
records at once.  Once I changed it to 1000 records it was all good.  If
the record counts are low, maybe images are the problem?  For me it was
consistent and easy to replicate.  After relooking at your errors,
exception 2 and 3 looks like it was unable to connect to the server.  Maybe
exception 1 was caused by corrupted data from being dropped?  In any case
you should put exception handling around your web calls and either try the
call again or inform the user of a bad connection.  The nature of mobile
apps is that will not always be connected so you need to be able to handle
these situations.



*From:* Dean Cleaver [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">dean.cleaver at xceptionsoftware.com</A>]
*Sent:* Monday, 8 October 2012 12:40 p.m.
*To:* James Darbyshire
*Cc:* Jason Hardman; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
*Subject:* RE: [MonoTouch] Any ideas what causes this?



Appreciate it James, but I fear it&#8217;s possibly something where you have to
be actively using the app 24/7 for it to occur. This app is designed for
Valet Parking providers, who issue tickets and process requests all day
long &#8211; this is why I&#8217;ve not seen it as I just don&#8217;t use the app enough to
see it.



I&#8217;m also curious that some venues see more of this issue than others.
Either means their data packets are larger than the rest (not the case as I
have eyeballed some and they should have much less data than other venues)
or their internet connection is really slow/problematic.



Dino



*From:* James Darbyshire [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">jamesdarbyshire at gmail.com</A>]
*Sent:* Sunday, October 07, 2012 17:54
*To:* Dean Cleaver
*Cc:* Jason Hardman; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
*Subject:* Re: [MonoTouch] Any ideas what causes this?



Dino,



Always happy to test on my devices if you need a hand.

Regards,



James


On 08/10/2012, at 9:50 AM, Dean Cleaver &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">dean.cleaver at xceptionsoftware.com</A>&gt;
wrote:

 I&#8217;m using the standard Visual Studio calls to the web client &#8211; so if I
have a method called &#8220;Fred&#8221; I call &#8220;service.Fred()&#8221;.I don&#8217;t use async, but
I do use my own threads so there&#8217;s no blocking.



I&#8217;ll look into the response property, but it&#8217;s a long slow fix &#8211; won&#8217;t be
till we publish to Apple again that I&#8217;ll start to get that information, and
can then look at fixing it. I can&#8217;t reproduce these errors, but they&#8217;re
happening to a few clients in the field.



Dino



*From:* Jason Hardman [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">Jason.Hardman at beims.com</A>&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">Jason.Hardman at beims.com</A>&gt;]

*Sent:* Sunday, October 07, 2012 17:10
*To:* Dean Cleaver; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
*Subject:* RE: Any ideas what causes this?



How are you making the web calls?  It is your choice to use async or not.
Maybe you are using a library that is forcing it to use async?  If you are
there might be sync methods available.  I know RestSharp has sync and async
methods.  Personally I am using async so we can use the same code on
Windows Phone if we ever get that far.



The WebException has a Response property that you should be able to use to
determine the Url that was called.



*From:* Dean Cleaver [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">dean.cleaver at xceptionsoftware.com</A>]
*Sent:* Monday, 8 October 2012 10:21 a.m.
*To:* Jason Hardman; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
*Subject:* RE: Any ideas what causes this?



Yeah &#8211; I figured it was because of some Async calls, but I don&#8217;t use the
Async calls directly &#8211; so Mono? must be calling async?



And I have about 80 to 100 different web service calls &#8211; so I&#8217;m unsure
which ones to page. If there was any hint as to what part of my code was
causing the problem it would be useful, but I just have nothing to go on.



*From:* Jason Hardman [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">Jason.Hardman at beims.com</A>]
*Sent:* Sunday, October 07, 2012 16:15
*To:* Dean Cleaver; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
*Subject:* RE: Any ideas what causes this?



The errors are to do with making calls to the web asynchronously i.e. the
error is occurring on a different thread to the code that started it, hence
your namespace is not displayed.



I have experienced the first error when the data being returned was large.
My fix was to change my WCF Web API to use paging and then update my
RestSharp code (in MonoTouch) to make the web calls while passing the
paging parameters.  RestSharp is a library that simplifies making web calls
to REST web services as it automatically serialises the data into objects.



*From:* <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>] *On Behalf Of *Dean Cleaver
*Sent:* Monday, 8 October 2012 7:56 a.m.
*To:* <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
*Subject:* Re: [MonoTouch] Any ideas what causes this?



And this one:



System.Net.WebException: Error: ConnectFailure (No route to host) ---&gt;
System.Net.Sockets.SocketException: No route to host
at System.Net.Sockets.Socket.Connect (System.Net.EndPoint remoteEP)
[0x00000] in :0
at System.Net.WebConnection.Connect (System.Net.HttpWebRequest request)
[0x00000] in :0
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetRequestStream (IAsyncResult asyncResult)
[0x00000] in :0
at System.Net.HttpWebRequest.GetRequestStream () [0x00000] in :0
at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke
(System.String method_name, System.Object[] parameters) [0x00000] in :0



Dino



*From:* Dean Cleaver
*Sent:* Sunday, October 07, 2012 13:48
*To:* Dean Cleaver; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
*Subject:* RE: Any ideas what causes this?



Likewise this one:



System.Net.WebException: The request timed out
at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult)
[0x00000] in :0
at System.Net.HttpWebRequest.GetResponse () [0x00000] in :0
at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse
(System.Net.WebRequest request) [0x00000] in :0



Once again &#8211; none of my code nor namespaces at all. How does this happen?



Dino



*From:* <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>] *On Behalf Of *Dean Cleaver
*Sent:* Sunday, October 07, 2012 13:47
*To:* <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
*Subject:* [MonoTouch] Any ideas what causes this?



System.Net.WebException: Error getting response stream (ReadDone2):
ReceiveFailure ---&gt; System.Exception:

at System.Net.WebConnection.ReadDone(IAsyncResult result)
at System.Net.WebConnection.HandleError (WebExceptionStatus st,
System.Exception e, System.String where) [0x00000] in :0
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult)
[0x00000] in :0
at System.Net.HttpWebRequest.GetResponse () [0x00000] in :0
at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse
(System.Net.WebRequest request) [0x00000] in :0



It must be being reported by this?



AppDomain
.CurrentDomain.UnhandledException +=
HandleAppDomainCurrentDomainUnhandledException;



Because none of the above is my code &#8211; there is no &#8220;Xception&#8221; nor
&#8220;KleverLogic&#8221; namespace in the call. And any ideas what could cause it?



Dino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20121008/a396c2ee/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20121008/a396c2ee/attachment-0001.html</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012168.html">[MonoTouch] Any ideas what causes this?
</A></li>
	<LI>Next message: <A HREF="012184.html">[MonoTouch] Any ideas what causes this?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12169">[ date ]</a>
              <a href="thread.html#12169">[ thread ]</a>
              <a href="subject.html#12169">[ subject ]</a>
              <a href="author.html#12169">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
