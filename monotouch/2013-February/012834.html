<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Mono.CSharp.InternalErrorException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Mono.CSharp.InternalErrorException&In-Reply-To=%3CCAEySM9HEUwVztEp3MBDucVJa3M0xg9%2BUsWDV-bZX71ZdYyDfeg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012833.html">
   <LINK REL="Next"  HREF="012830.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Mono.CSharp.InternalErrorException</H1>
    <B>Guido Van Hoecke</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Mono.CSharp.InternalErrorException&In-Reply-To=%3CCAEySM9HEUwVztEp3MBDucVJa3M0xg9%2BUsWDV-bZX71ZdYyDfeg%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Mono.CSharp.InternalErrorException">guivho at gmail.com
       </A><BR>
    <I>Thu Feb 21 18:41:29 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="012833.html">[MonoTouch] Mono.CSharp.InternalErrorException
</A></li>
        <LI>Next message: <A HREF="012830.html">[MonoTouch] Urgent. Problem with binding Objective C to C#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12834">[ date ]</a>
              <a href="thread.html#12834">[ thread ]</a>
              <a href="subject.html#12834">[ subject ]</a>
              <a href="author.html#12834">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Marek,

Maybe I should have been more complete. All uses of the KindNormal
constant in the DayDiary.cs file where it is defined cause the same
error although it is a local constant!

I know this is weird, but it gets worse: all DayDiary.cs 'error' line
nrs reporting [`ZzLib.DayDiary' does not contain a definition for
`KindNormal'] are wrong. The offset starts at 14 (actual line 1681, but
1667 reported), continues with 23 (1713 vs 1690) and then stabilises on
24 (1806-1782, 1869-1845, 1877-1853...)

All uses of DayDiary.KindNormal in any source complain with the above
error. Line nrs are correct for these sources.

Anyway, I replaced all local 'KindNormal' with '0 /*KindNormal*/' and all
'DayDiary.KindNormal' by '0 /*DayDiary.KindNormal*/', and the project
compiles on MonoDevelop and the command line and runs fine in the
simulator.

So I'm no longer stuck, but this is truly a weird error.

Thanks for the workaround :)

With kind regards,


Guido.


On 21 February 2013 18:00, Marek Safar &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">msafar at xamarin.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The constructor is very straightforward (and it hasn't changed in weeks)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         public BarButtonView(Txt.Id id, int kind =  DayDiary.KindNormal)
</I>&gt;&gt;<i>             : base(new RectangleF(0f, 0f, Width, Height))
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It looks straightforward but it isn't. I remember fixing such thing and this
</I>&gt;<i> should not happen in future releases for now as I workaround try to replace
</I>&gt;<i> int kind =  DayDiary.KindNormal with int kind = 0 or make the KindNormal
</I>&gt;<i> constant local to this class.
</I>&gt;<i>
</I>&gt;<i> Marek
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         {
</I>&gt;&gt;<i>             _kind = kind;
</I>&gt;&gt;<i>             _id = id;
</I>&gt;&gt;<i>             BackgroundColor = UIColor.Clear;
</I>&gt;&gt;<i>             var font = UIFont.BoldSystemFontOfSize(24);
</I>&gt;&gt;<i>             var text = Txt.Get(id);
</I>&gt;&gt;<i>             var frame = new RectangleF(0, 0, Width, Height);
</I>&gt;&gt;<i>             AddSubview(MCiOS.ShadowLabel
</I>&gt;&gt;<i>                 (frame, text, font, UITextAlignment.Center,
</I>&gt;&gt;<i> Color.Fg.Window));
</I>&gt;&gt;<i>         }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It complains that KindNormal is undefined. It's been defined about a
</I>&gt;&gt;<i> year ago :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /Users/guivho/Mono/Targister/Targister/Classes/BarButtonView.cs(13,62):
</I>&gt;&gt;<i> error CS0117: `ZzLib.DayDiary' does not contain a definition for
</I>&gt;&gt;<i> `KindNormal'
</I>&gt;&gt;<i> /Users/guivho/Mono/Targister/Targister/Tables/DayDiary.cs(9,18):
</I>&gt;&gt;<i> (Location of the symbol related to previous error)
</I>&gt;&gt;<i> /Users/guivho/Mono/Targister/Targister/Classes/BarButtonView.cs(13,62):
</I>&gt;&gt;<i> error CS0584: Internal compiler error:
</I>&gt;&gt;<i> /Users/guivho/Mono/Targister/Targister/Classes/BarButtonView.cs(13,62):
</I>&gt;&gt;<i> Mono.CSharp.DefaultParameterValueExpression ExprClass is Invalid after
</I>&gt;&gt;<i> resolve
</I>&gt;&gt;<i> /Users/guivho/Mono/Targister/Targister/Classes/BarButtonView.cs(13,62):
</I>&gt;&gt;<i> error CS1736: The expression being assigned to optional parameter `kind'
</I>&gt;&gt;<i> must be a constant or default value
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ad here's the start of DayDiary.cs:
</I>&gt;&gt;<i>     public class DayDiary
</I>&gt;&gt;<i>     {
</I>&gt;&gt;<i>         #region Inc enum
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         public enum Inc
</I>&gt;&gt;<i>         {
</I>&gt;&gt;<i>             Day,
</I>&gt;&gt;<i>             Week,
</I>&gt;&gt;<i>             Month,
</I>&gt;&gt;<i>             Year
</I>&gt;&gt;<i>         };
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         #endregion
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         public const int KindNormal = 0;
</I>&gt;&gt;<i>         public const int KindTarget = 1;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Marek, if needed I'm willing to mail you personally the full project,
</I>&gt;&gt;<i> just give me a shout.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Guido
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 21 February 2013 11:19, Marek Safar &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">msafar at xamarin.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; Hi Guido,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Could you paste exact code signature of your constructor
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; ZzLib.BarButtonView.BarButtonView(ZzLib.Txt.Id, int)
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Thanks
</I>&gt;&gt;<i> &gt; Marek
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; On Thu, Feb 21, 2013 at 11:11 AM, Guido Van Hoecke &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">guivho at gmail.com</A>&gt;
</I>&gt;&gt;<i> &gt; wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Hi,
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; My app compiles fine in Visual Studio, but throws an
</I>&gt;&gt;<i> &gt;&gt; InternalErrorException in MonoDevelop as well as when building from the
</I>&gt;&gt;<i> &gt;&gt; command line.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; I'm stuck.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; I even restarted my Mac, hoping the problem would go away, as it often
</I>&gt;&gt;<i> &gt;&gt; did in the MS world, but it did not.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; I can still continue development in the VirtualBox MS environment, but
</I>&gt;&gt;<i> &gt;&gt; obviously, I can't do any testing, only provide compiling sources.
</I>&gt;&gt;<i> &gt;&gt; Alas,
</I>&gt;&gt;<i> &gt;&gt; they now compile in MS, not in MD!
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Any ideas, any one?
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Unhandled Exception:
</I>&gt;&gt;<i> &gt;&gt; 0   mono                                0x000dfe1b mono + 912923
</I>&gt;&gt;<i> &gt;&gt; 1   mono                                0x000e0285 mono + 914053
</I>&gt;&gt;<i> &gt;&gt; 2   mono                                0x000e1085 mono + 917637
</I>&gt;&gt;<i> &gt;&gt; 3   mono                                0x000e1f51 mono + 921425
</I>&gt;&gt;<i> &gt;&gt; 4   mono                                0x0015169d mono + 1377949
</I>&gt;&gt;<i> &gt;&gt; 5   ???                                 0x00500f8f 0x0 + 5246863
</I>&gt;&gt;<i> &gt;&gt; at Mono.CSharp.TypeContainer.EmitType () &lt;0x0013c&gt;
</I>&gt;&gt;<i> &gt;&gt; at Mono.CSharp.ModuleContainer.Emit () &lt;0x001c0&gt;
</I>&gt;&gt;<i> &gt;&gt; at Mono.CSharp.AssemblyDefinition.Emit () &lt;0x00124&gt;
</I>&gt;&gt;<i> &gt;&gt; at Mono.CSharp.Driver.Compile () &lt;0x00434&gt;
</I>&gt;&gt;<i> &gt;&gt; at Mono.CSharp.Driver.Main (string[]) &lt;0x000b0&gt;
</I>&gt;&gt;<i> &gt;&gt; at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_int_object
</I>&gt;&gt;<i> &gt;&gt; (object,intptr,intptr,intptr) &lt;0x00096&gt;
</I>&gt;&gt;<i> &gt;&gt; 12  mono                                0x00010caf mono + 64687
</I>&gt;&gt;<i> &gt;&gt; 13  mono                                0x0022694a mono + 2251082
</I>&gt;&gt;<i> &gt;&gt; 14  mono                                0x002294ec mono + 2262252
</I>&gt;&gt;<i> &gt;&gt; 15  mono                                0x00228751 mono + 2258769
</I>&gt;&gt;<i> &gt;&gt; 16  mono                                0x000acfff mono + 704511
</I>&gt;&gt;<i> &gt;&gt; 17  mono                                0x000ad250 mono + 705104
</I>&gt;&gt;<i> &gt;&gt; 18  mono                                0x000af6bf mono + 714431
</I>&gt;&gt;<i> &gt;&gt; 19  mono                                0x00002134 mono + 4404
</I>&gt;&gt;<i> &gt;&gt; 20  mono                                0x000021c8 mono + 4552
</I>&gt;&gt;<i> &gt;&gt; 21  mono                                0x00001ee5 mono + 3813
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; [ERROR] FATAL UNHANDLED EXCEPTION: Mono.CSharp.InternalErrorException:
</I>&gt;&gt;<i> &gt;&gt; /Users/guivho/Mono/Targister/Targister/Classes/BarButtonView.cs(13,16):
</I>&gt;&gt;<i> &gt;&gt; ZzLib.BarButtonView.BarButtonView(ZzLib.Txt.Id, int) ---&gt;
</I>&gt;&gt;<i> &gt;&gt; System.NullReferenceException: Object reference not set to an instance
</I>&gt;&gt;<i> &gt;&gt; of an object
</I>&gt;&gt;<i> &gt;&gt;   at Mono.CSharp.Parameter.ApplyAttributes
</I>&gt;&gt;<i> &gt;&gt; (System.Reflection.Emit.MethodBuilder mb,
</I>&gt;&gt;<i> &gt;&gt; System.Reflection.Emit.ConstructorBuilder cb, Int32 index,
</I>&gt;&gt;<i> &gt;&gt; Mono.CSharp.PredefinedAttributes pa) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;<i> &gt;&gt;   at Mono.CSharp.ParametersCompiled.ApplyAttributes (IMemberContext
</I>&gt;&gt;<i> &gt;&gt; mc, System.Reflection.MethodBase builder) [0x00000] in &lt;filename
</I>&gt;&gt;<i> &gt;&gt; unknown&gt;:0
</I>&gt;&gt;<i> &gt;&gt;   at Mono.CSharp.Constructor.Emit () [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;<i> &gt;&gt;   at Mono.CSharp.TypeContainer.EmitConstructors () [0x00000] in
</I>&gt;&gt;<i> &gt;&gt; &lt;filename unknown&gt;:0
</I>&gt;&gt;<i> &gt;&gt;   --- End of inner exception stack trace ---
</I>&gt;&gt;<i> &gt;&gt;   at Mono.CSharp.TypeContainer.EmitConstructors () [0x00000] in
</I>&gt;&gt;<i> &gt;&gt; &lt;filename unknown&gt;:0
</I>&gt;&gt;<i> &gt;&gt;   at Mono.CSharp.TypeContainer.EmitType () [0x00000] in &lt;filename
</I>&gt;&gt;<i> &gt;&gt; unknown&gt;:0
</I>&gt;&gt;<i> &gt;&gt;   at Mono.CSharp.ModuleContainer.Emit () [0x00000] in &lt;filename
</I>&gt;&gt;<i> &gt;&gt; unknown&gt;:0
</I>&gt;&gt;<i> &gt;&gt;   at Mono.CSharp.AssemblyDefinition.Emit () [0x00000] in &lt;filename
</I>&gt;&gt;<i> &gt;&gt; unknown&gt;:0
</I>&gt;&gt;<i> &gt;&gt;   at Mono.CSharp.Driver.Compile () [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;<i> &gt;&gt;   at Mono.CSharp.Driver.Main (System.String[] args) [0x00000] in
</I>&gt;&gt;<i> &gt;&gt; &lt;filename unknown&gt;:0
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Guido
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; --
</I>&gt;&gt;<i> &gt;&gt; Someday we'll look back on this moment and plow into a parked car.
</I>&gt;&gt;<i> &gt;&gt;                 -- Evan Davis
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://vanhoecke.org">http://vanhoecke.org</A> ... and go2 places!
</I>&gt;&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;&gt;<i> &gt;&gt; MonoTouch mailing list
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012833.html">[MonoTouch] Mono.CSharp.InternalErrorException
</A></li>
	<LI>Next message: <A HREF="012830.html">[MonoTouch] Urgent. Problem with binding Objective C to C#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12834">[ date ]</a>
              <a href="thread.html#12834">[ thread ]</a>
              <a href="subject.html#12834">[ subject ]</a>
              <a href="author.html#12834">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
