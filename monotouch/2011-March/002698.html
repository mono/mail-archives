<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Converting NSData to NSString: what do I do with	NSUrlResponse.TextEncodingName?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Converting%20NSData%20to%20NSString%3A%20what%20do%20I%20do%20with%0A%09NSUrlResponse.TextEncodingName%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002734.html">
   <LINK REL="Next"  HREF="002700.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Converting NSData to NSString: what do I do with	NSUrlResponse.TextEncodingName?</H1>
    <B>David Moles</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Converting%20NSData%20to%20NSString%3A%20what%20do%20I%20do%20with%0A%09NSUrlResponse.TextEncodingName%3F&In-Reply-To="
       TITLE="[MonoTouch] Converting NSData to NSString: what do I do with	NSUrlResponse.TextEncodingName?">davidmoles at thegogame.com
       </A><BR>
    <I>Wed Mar  2 17:17:01 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002734.html">[MonoTouch] need help to send and open iphone View with controller
</A></li>
        <LI>Next message: <A HREF="002700.html">[MonoTouch] Converting NSData to NSString: what do I do with	NSUrlResponse.TextEncodingName?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2698">[ date ]</a>
              <a href="thread.html#2698">[ thread ]</a>
              <a href="subject.html#2698">[ subject ]</a>
              <a href="author.html#2698">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to parse the &quot;raw response&quot; from a Facebook request (using Kevin
McMahon's MT binding of the Facebook SDK).

&gt;<i>From what I can tell, in the FB API, you first get an NSUrlResponse, and
</I>then you get an NSData (in separate callbacks).

Now, I happen to know that what's in the NSData -- at least for this
particular request -- is a block of JSON, and what I'd like to do is convert
the NSData to a string and then parse it out.

&gt;<i>From what I can tell, it looks like the conversion, in ObjC, is supposed to
</I>look something like:

CFStringEncoding cfEncoding =
CFStringConvertIANACharSetNameToEncoding((CFStringRef) [response
textEncodingName]);
NSStringEncoding encoding =
CFStringConvertEncodingToNSStringEncoding(cfEncoding);

NSString* string = [[NSString alloc] initWithData:data encoding:encoding];


Having to go through CoreFoundation to get from an NSString property of
NSUrlResponse to an NSStringEncoding is dopey as hell, but this seems to be
the way to do it.

Unfortunately, CFStringEncoding doesn't appear to exist in MT, nor the
corresponding convert method.

Is there a workaround? Or should I just ignore the encoding, pretend it's
always going to be UTF-8, and cross my fingers?

-- 
David Moles
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">davidmoles at thegogame.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110302/9af7c36e/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110302/9af7c36e/attachment.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002734.html">[MonoTouch] need help to send and open iphone View with controller
</A></li>
	<LI>Next message: <A HREF="002700.html">[MonoTouch] Converting NSData to NSString: what do I do with	NSUrlResponse.TextEncodingName?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2698">[ date ]</a>
              <a href="thread.html#2698">[ thread ]</a>
              <a href="subject.html#2698">[ subject ]</a>
              <a href="author.html#2698">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
