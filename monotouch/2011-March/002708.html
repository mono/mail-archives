<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] &quot;System.ExecutionEngineException: Attempting to JIT	compile method&quot; in System.Collections.Generic.Dictionary
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20%22System.ExecutionEngineException%3A%20Attempting%20to%20JIT%0A%09compile%20method%22%20in%20System.Collections.Generic.Dictionary&In-Reply-To=AANLkTikh%2BakyfuqUA9eU3s1Zcx-2K4OEaxoxkbkhSAyN%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002707.html">
   <LINK REL="Next"  HREF="002709.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] &quot;System.ExecutionEngineException: Attempting to JIT	compile method&quot; in System.Collections.Generic.Dictionary</H1>
    <B>Geoff Norton</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20%22System.ExecutionEngineException%3A%20Attempting%20to%20JIT%0A%09compile%20method%22%20in%20System.Collections.Generic.Dictionary&In-Reply-To=AANLkTikh%2BakyfuqUA9eU3s1Zcx-2K4OEaxoxkbkhSAyN%40mail.gmail.com"
       TITLE="[MonoTouch] &quot;System.ExecutionEngineException: Attempting to JIT	compile method&quot; in System.Collections.Generic.Dictionary">gnorton at novell.com
       </A><BR>
    <I>Thu Mar  3 14:09:08 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002707.html">[MonoTouch] &quot;System.ExecutionEngineException: Attempting to JIT compile method&quot; in System.Collections.Generic.Dictionary
</A></li>
        <LI>Next message: <A HREF="002709.html">[MonoTouch] [Monotouch] Problem compiling plist
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2708">[ date ]</a>
              <a href="thread.html#2708">[ thread ]</a>
              <a href="subject.html#2708">[ subject ]</a>
              <a href="author.html#2708">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Correct

-g

On 2011-03-03, at 2:04 PM, David Moles wrote:

&gt;<i> Okay. By &quot;non-deterministic generics&quot;, you mean that without running the code, the compiler can't figure out that it's a Dictionary that's going to be passed in there, is that right? I guess I can change the method in question to take a Dictionary rather than an IEnumerable, or just populate the list by hand.
</I>&gt;<i> 
</I>&gt;<i> On Thu, Mar 3, 2011 at 10:05 AM, Geoff Norton &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">gnorton at novell.com</A>&gt; wrote:
</I>&gt;<i> This has nothing to do with the linker, you've introduced non-deterministic generics which our AOT compiler cannot compile the method for.  If you used to explicitly copy the Dictionary to a List, then it probably saw the necessity for this method before, which is why it used to work.
</I>&gt;<i> 
</I>&gt;<i> -g
</I>&gt;<i> 
</I>&gt;<i> On 2011-03-03, at 12:42 PM, David Moles wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> My app just crashed with the following:
</I>&gt;&gt;<i> System.ExecutionEngineException: Attempting to JIT compile method 'System.Collections.Generic.Dictionary`2&lt;string, string&gt;:Do_CopyTo&lt;System.Collections.Generic.KeyValuePair`2&lt;string, string&gt;, System.Collections.Generic.KeyValuePair`2&lt;string, string&gt;&gt; (System.Collections.Generic.KeyValuePair`2&lt;string, string&gt;[],int,System.Collections.Generic.Dictionary`2/Transform`1&lt;string, string, System.Collections.Generic.KeyValuePair`2&lt;string, string&gt;&gt;)' while running with --aot-only.
</I>&gt;&gt;<i>   at System.Collections.Generic.Dictionary`2[System.String,System.String].CopyTo (System.Collections.Generic.KeyValuePair`2[] array, Int32 index) [0x00000] in &lt;filename unknown&gt;:0 
</I>&gt;&gt;<i>   at System.Collections.Generic.Dictionary`2[System.String,System.String].System.Collections.Generic.ICollection&lt;System.Collections.Generic.KeyValuePair&lt;TKey,TValue&gt;&gt;.CopyTo (System.Collections.Generic.KeyValuePair`2[] array, Int32 index) [0x00000] in &lt;filename unknown&gt;:0 
</I>&gt;&gt;<i>   at System.Collections.Generic.List`1[System.Collections.Generic.KeyValuePair`2[System.String,System.String]].AddCollection (ICollection`1 collection) [0x00015] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Collections.Generic/List.cs:119 
</I>&gt;&gt;<i>   at System.Collections.Generic.List`1[System.Collections.Generic.KeyValuePair`2[System.String,System.String]]..ctor (IEnumerable`1 collection) [0x00042] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Collections.Generic/List.cs:67 
</I>&gt;&gt;<i>   at GoGame.Util.Services.AbstractMultipartWriteRequest..ctor (GoGame.Util.Services.FailBehavior priority, System.String queryUrl, GoGame.Util.Services.Method method, IEnumerable`1 formFields, GoGame.Util.Services.Attachment attachment) [0x00014] in /Users/work/Projects/orbiter-mobile/gg-util/Services/MultipartWriteRequest.cs:41 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> The line in question is 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> this.formFields = new List&lt;KeyValuePair&lt;String, String&gt;&gt;(formFields);
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> where the formFields parameter is declared as an IEnumerable&lt;KeyValuePair&lt;String, String&gt;&gt;, and the value passed into it, in this case, is a Dictionary&lt;String, String&gt;.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> It looks to me like maybe the linker got over-aggressive? It's possible that somewhere else in the code I used to explicitly copy a Dictionary into a List, so the linker knew better (if that is in fact the issue), and now I'm only doing it implicitly? But the actual code that crashed has worked fine for the better part of two months, so to see this now scares me.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Any ideas?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> David Moles
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">davidmoles at thegogame.com</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> MonoTouch mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> David Moles
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">davidmoles at thegogame.com</A>
</I>&gt;<i> 
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110303/8fcb6a3d/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110303/8fcb6a3d/attachment-0001.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002707.html">[MonoTouch] &quot;System.ExecutionEngineException: Attempting to JIT compile method&quot; in System.Collections.Generic.Dictionary
</A></li>
	<LI>Next message: <A HREF="002709.html">[MonoTouch] [Monotouch] Problem compiling plist
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2708">[ date ]</a>
              <a href="thread.html#2708">[ thread ]</a>
              <a href="subject.html#2708">[ subject ]</a>
              <a href="author.html#2708">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
