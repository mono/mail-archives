<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;There&nbsp;is&nbsp;one&nbsp;bit&nbsp;of&nbsp;ugliness,&nbsp;and&nbsp;that&nbsp;has&nbsp;to&nbsp;do&nbsp;with&nbsp;structure&nbsp;return&nbsp;values;&nbsp;&amp;nbsp;&amp;nbsp;The&nbsp;calling&nbsp;conventions&nbsp;for&nbsp;ARM&nbsp;and&nbsp;X86&nbsp;are&nbsp;different&nbsp;so&nbsp;sometimes&nbsp;you&nbsp;need&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;contains&nbsp;the&nbsp;suffix&nbsp;&quot;_stret&quot;&nbsp;(for&nbsp;struct&nbsp;return)&nbsp;and&nbsp;pass&nbsp;as&nbsp;the&nbsp;first&nbsp;parameter&nbsp;an&nbsp;&quot;out&quot;&nbsp;value&nbsp;that&nbsp;will&nbsp;hold&nbsp;the&nbsp;result.&lt;br&gt;&lt;br&gt;And&nbsp;since&nbsp;the&nbsp;rules&nbsp;are&nbsp;different,&nbsp;you&nbsp;end&nbsp;up&nbsp;with&nbsp;code&nbsp;like&nbsp;this&nbsp;if&nbsp;the&nbsp;device/simulator&nbsp;struct&nbsp;return&nbsp;rules&nbsp;are&nbsp;different:&lt;br&gt;&lt;br&gt;if&nbsp;(Runtime.Arch&nbsp;==&nbsp;Arch.DEVICE){&lt;br&gt;﻿&nbsp;&amp;nbsp;&amp;nbsp;//&nbsp;obj_msgSend&nbsp;call&nbsp;goes&nbsp;here&lt;br&gt;}&nbsp;else&nbsp;{&lt;br&gt;﻿&nbsp;&amp;nbsp;&amp;nbsp;//&nbsp;obj_msgSend&nbsp;call&nbsp;goes&nbsp;here&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;It&nbsp;should&nbsp;be&nbsp;noted&nbsp;the&nbsp;different&nbsp;with&nbsp;regard&nbsp;to&nbsp;structure&nbsp;return&nbsp;types&nbsp;only&nbsp;happens&nbsp;when&nbsp;the&nbsp;native&nbsp;sizeof&nbsp;the&nbsp;return&nbsp;type&nbsp;&amp;lt;=&nbsp;sizeof(register_t)*2&nbsp;on&nbsp;x86.&nbsp;&amp;nbsp;The&nbsp;darwin&nbsp;ABI&nbsp;for&nbsp;intel&nbsp;specifies&nbsp;that&nbsp;structures&nbsp;under&nbsp;8&nbsp;bytes&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;EAX:EDX,&nbsp;anything&nbsp;larger&nbsp;than&nbsp;8&nbsp;bytes&nbsp;follows&nbsp;the&nbsp;same&nbsp;rules&nbsp;on&nbsp;device&nbsp;and&nbsp;simulator.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-g&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
