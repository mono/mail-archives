<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;But&nbsp;isn't&nbsp;that&nbsp;then,like&nbsp;Miguel&nbsp;said,&nbsp;an&nbsp;issue&nbsp;of&nbsp;Monotouch?&nbsp;Shouldn't&nbsp;it&nbsp;keep&nbsp;a&nbsp;reference?&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;not&nbsp;seen&nbsp;a&nbsp;single&nbsp;MT&nbsp;example&nbsp;so&nbsp;far&nbsp;tat&nbsp;keeps&nbsp;explicit&nbsp;references&nbsp;to&nbsp;table&nbsp;view&nbsp;cells.&nbsp;Are&nbsp;they&nbsp;all&nbsp;wrong?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;René&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;Am&nbsp;08.12.2011&nbsp;um&nbsp;00:53&nbsp;schrieb&nbsp;Rolf&nbsp;Bjarne&nbsp;Kvinge:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Dec&nbsp;7,&nbsp;2011&nbsp;at&nbsp;11:24&nbsp;PM,&nbsp;Rene&nbsp;Ruppert&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rene.ruppert@googlemail.com&quot;&gt;rene.ruppert@googlemail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;Thanks&nbsp;Rolf!&nbsp;I&nbsp;tried&nbsp;that!&nbsp;Here&nbsp;is&nbsp;the&nbsp;result.&nbsp;But&nbsp;I'm&nbsp;none&nbsp;wiser!&nbsp;It&nbsp;is&nbsp;supposed&nbsp;to&nbsp;relayout,&nbsp;I&nbsp;can&nbsp;relayout,&nbsp;but&nbsp;why&nbsp;does&nbsp;it&nbsp;go&nbsp;for&nbsp;the&nbsp;IntPtr&nbsp;ctor?&nbsp;What&nbsp;is&nbsp;thie&nbsp;&quot;_createPreparedCellForGlobalRow&quot;&nbsp;about?&lt;div&gt;<br>
My&nbsp;&quot;fix&quot;&nbsp;is:&nbsp;if&nbsp;the&nbsp;IntPtr&nbsp;ctor&nbsp;is&nbsp;called,&nbsp;I&nbsp;set&nbsp;a&nbsp;bool&nbsp;to&nbsp;indicate&nbsp;the&nbsp;cell&nbsp;if&nbsp;in&nbsp;invalid&nbsp;state.&nbsp;When&nbsp;dequeing&nbsp;cells,&nbsp;I&nbsp;check&nbsp;if&nbsp;the&nbsp;cell&nbsp;is&nbsp;NULL&nbsp;or&nbsp;that&nbsp;bool&nbsp;is&nbsp;set.&nbsp;In&nbsp;both&nbsp;cases&nbsp;I&nbsp;create&nbsp;a&nbsp;new&nbsp;instance&nbsp;of&nbsp;the&nbsp;cell&nbsp;and&nbsp;everything&nbsp;works&nbsp;fine.&nbsp;But&nbsp;still&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;know&nbsp;if&nbsp;somebody&nbsp;can&nbsp;make&nbsp;sense&nbsp;from&nbsp;the&nbsp;debugger&nbsp;output:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;#0&nbsp;&amp;nbsp;0x933b583e&nbsp;in&nbsp;__psynch_cvwait&nbsp;()&lt;/div&gt;&lt;div&gt;#1&nbsp;&amp;nbsp;0x9a6aae21&nbsp;in&nbsp;_pthread_cond_wait&nbsp;()&lt;/div&gt;&lt;div&gt;#2&nbsp;&amp;nbsp;0x9a65b42c&nbsp;in&nbsp;pthread_cond_wait$UNIX2003&nbsp;()&lt;/div&gt;&lt;div&gt;#3&nbsp;&amp;nbsp;0x00104188&nbsp;in&nbsp;suspend_current&nbsp;()&nbsp;at&nbsp;debugger-agent.c:2375&lt;/div&gt;<br>
&lt;div&gt;#4&nbsp;&amp;nbsp;0x00105da6&nbsp;in&nbsp;process_event&nbsp;(event=EVENT_KIND_BREAKPOINT,&nbsp;arg=0xa1ac33c,&nbsp;il_offset=0,&nbsp;ctx=0xbfffca08,&nbsp;events=0x0,&nbsp;suspend_policy=2)&nbsp;at&nbsp;debugger-agent.c:3017&lt;/div&gt;&lt;div&gt;#5&nbsp;&amp;nbsp;0x001080c4&nbsp;in&nbsp;process_breakpoint_inner&nbsp;(tls=0x9c78f10,&nbsp;ctx=0xbfffca08)&nbsp;at&nbsp;debugger-agent.c:3837&lt;/div&gt;<br>
&lt;div&gt;#6&nbsp;&amp;nbsp;0x00108199&nbsp;in&nbsp;process_breakpoint&nbsp;()&nbsp;at&nbsp;debugger-agent.c:3855&lt;/div&gt;&lt;div&gt;#7&nbsp;&amp;nbsp;0xbfffc6c8&nbsp;in&nbsp;??&nbsp;()&lt;/div&gt;&lt;div&gt;#8&nbsp;&amp;nbsp;0x10a7e06f&nbsp;in&nbsp;??&nbsp;()&lt;/div&gt;&lt;div&gt;#9&nbsp;&amp;nbsp;0x00011aef&nbsp;in&nbsp;mono_jit_runtime_invoke&nbsp;(method=0xa1ac33c,&nbsp;obj=0x9ae7cc0,&nbsp;params=0xbfffcb60,&nbsp;exc=0x0)&nbsp;at&nbsp;mini.c:5770&lt;/div&gt;<br>
&lt;div&gt;#10&nbsp;0x0022011a&nbsp;in&nbsp;mono_runtime_invoke&nbsp;(method=0xa1ac33c,&nbsp;obj=0x9ae7cc0,&nbsp;params=0xbfffcb60,&nbsp;exc=0x0)&nbsp;at&nbsp;object.c:2757&lt;/div&gt;&lt;div&gt;#11&nbsp;0x002ee535&nbsp;in&nbsp;monotouch_trampoline&nbsp;()&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;So&nbsp;the&nbsp;issue&nbsp;here&nbsp;is&nbsp;that&nbsp;setSelected&nbsp;is&nbsp;called&nbsp;on&nbsp;a&nbsp;native&nbsp;object&nbsp;instance&nbsp;that&nbsp;doesn't&nbsp;have&nbsp;a&nbsp;corresponding&nbsp;managed&nbsp;peer&nbsp;(as&nbsp;mentioned&nbsp;earlier,&nbsp;this&nbsp;happens&nbsp;if&nbsp;the&nbsp;managed&nbsp;peer&nbsp;has&nbsp;been&nbsp;freed).&nbsp;This&nbsp;is&nbsp;the&nbsp;reason&nbsp;for&nbsp;MonoTouch&nbsp;calling&nbsp;the&nbsp;IntPtr&nbsp;ctor&nbsp;(since&nbsp;it&nbsp;can't&nbsp;distinguish&nbsp;between&nbsp;the&nbsp;case&nbsp;when&nbsp;there&nbsp;has&nbsp;never&nbsp;existed&nbsp;a&nbsp;managed&nbsp;peer,&nbsp;and&nbsp;when&nbsp;the&nbsp;managed&nbsp;peer&nbsp;was&nbsp;freed&nbsp;by&nbsp;the&nbsp;GC)&nbsp;-&nbsp;MonoTouch&nbsp;tries&nbsp;to&nbsp;construct&nbsp;the&nbsp;managed&nbsp;peer&nbsp;thinking&nbsp;that&nbsp;it&nbsp;has&nbsp;never&nbsp;existed&nbsp;(and&nbsp;this&nbsp;is&nbsp;done&nbsp;with&nbsp;an&nbsp;IntPtr&nbsp;ctor).&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;most&nbsp;usual&nbsp;reason&nbsp;for&nbsp;this&nbsp;problem&nbsp;with&nbsp;tableviewcells&nbsp;is&nbsp;to&nbsp;return&nbsp;cells&nbsp;from&nbsp;the&nbsp;TableSource's&nbsp;GetCell&nbsp;method&nbsp;without&nbsp;storing&nbsp;those&nbsp;cell&nbsp;object&nbsp;instances&nbsp;somewhere&nbsp;the&nbsp;managed&nbsp;GC&nbsp;can&nbsp;see&nbsp;them&nbsp;(so&nbsp;from&nbsp;the&nbsp;GC's&nbsp;point&nbsp;of&nbsp;view&nbsp;they&nbsp;can&nbsp;be&nbsp;freed&nbsp;as&nbsp;soon&nbsp;as&nbsp;the&nbsp;GetCell&nbsp;method&nbsp;returns).&nbsp;The&nbsp;usual&nbsp;fix&nbsp;is&nbsp;to&nbsp;store&nbsp;created&nbsp;cells&nbsp;in&nbsp;a&nbsp;class-level&nbsp;list.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Rolf&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;#12&nbsp;0x0248e852&nbsp;in&nbsp;-[UITableViewCell&nbsp;setSelected:]&nbsp;()&lt;/div&gt;<br>
&lt;div&gt;#13&nbsp;0x0234044d&nbsp;in&nbsp;-[UITableView(UITableViewInternal)&nbsp;_createPreparedCellForGlobalRow:withIndexPath:]&nbsp;()&lt;/div&gt;&lt;div&gt;#14&nbsp;0x02340589&nbsp;in&nbsp;-[UITableView(UITableViewInternal)&nbsp;_createPreparedCellForGlobalRow:]&nbsp;()&lt;/div&gt;&lt;div&gt;#15&nbsp;0x0232bdfd&nbsp;in&nbsp;-[UITableView(_UITableViewPrivate)&nbsp;_updateVisibleCellsNow:]&nbsp;()&lt;/div&gt;<br>
&lt;div&gt;#16&nbsp;0x0233a851&nbsp;in&nbsp;-[UITableView&nbsp;layoutSubviews]&nbsp;()&lt;/div&gt;&lt;div&gt;#17&nbsp;0x022e5322&nbsp;in&nbsp;-[UIView(CALayerDelegate)&nbsp;layoutSublayersOfLayer:]&nbsp;()&lt;/div&gt;&lt;div&gt;#18&nbsp;0x012d8e72&nbsp;in&nbsp;-[NSObject&nbsp;performSelector:withObject:]&nbsp;()&lt;/div&gt;&lt;div&gt;#19&nbsp;0x0427592d&nbsp;in&nbsp;-[CALayer&nbsp;layoutSublayers]&nbsp;()&lt;/div&gt;<br>
&lt;div&gt;#20&nbsp;0x0427f827&nbsp;in&nbsp;CA::Layer::layout_if_needed&nbsp;()&lt;/div&gt;&lt;div&gt;#21&nbsp;0x04205fa7&nbsp;in&nbsp;CA::Context::commit_transaction&nbsp;()&lt;/div&gt;&lt;div&gt;#22&nbsp;0x04207ea6&nbsp;in&nbsp;CA::Transaction::commit&nbsp;()&lt;/div&gt;&lt;div&gt;#23&nbsp;0x04207580&nbsp;in&nbsp;CA::Transaction::observer_callback&nbsp;()&lt;/div&gt;<br>
&lt;div&gt;#24&nbsp;0x012ab9ce&nbsp;in&nbsp;__CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__&nbsp;()&lt;/div&gt;&lt;div&gt;#25&nbsp;0x01242670&nbsp;in&nbsp;__CFRunLoopDoObservers&nbsp;()&lt;/div&gt;&lt;div&gt;#26&nbsp;0x0120e4f6&nbsp;in&nbsp;__CFRunLoopRun&nbsp;()&lt;/div&gt;&lt;div&gt;#27&nbsp;0x0120ddb4&nbsp;in&nbsp;CFRunLoopRunSpecific&nbsp;()&lt;/div&gt;<br>
&lt;div&gt;#28&nbsp;0x0120dccb&nbsp;in&nbsp;CFRunLoopRunInMode&nbsp;()&lt;/div&gt;&lt;div&gt;#29&nbsp;0x0489f879&nbsp;in&nbsp;GSEventRunModal&nbsp;()&lt;/div&gt;&lt;div&gt;#30&nbsp;0x0489f93e&nbsp;in&nbsp;GSEventRun&nbsp;()&lt;/div&gt;&lt;div&gt;#31&nbsp;0x022a6a9b&nbsp;in&nbsp;UIApplicationMain&nbsp;()&lt;/div&gt;&lt;div&gt;#32&nbsp;0x0cfdcb0d&nbsp;in&nbsp;??&nbsp;()&lt;/div&gt;<br>
&lt;div&gt;#33&nbsp;0x0cfdb2f0&nbsp;in&nbsp;??&nbsp;()&lt;/div&gt;&lt;div&gt;#34&nbsp;0x0cfdafe8&nbsp;in&nbsp;??&nbsp;()&lt;/div&gt;&lt;div&gt;#35&nbsp;0x0cfdb13e&nbsp;in&nbsp;??&nbsp;()&lt;/div&gt;&lt;div&gt;#36&nbsp;0x00011aef&nbsp;in&nbsp;mono_jit_runtime_invoke&nbsp;(method=0xa9e5e2c,&nbsp;obj=0x0,&nbsp;params=0xbffff158,&nbsp;exc=0x0)&nbsp;at&nbsp;mini.c:5770&lt;/div&gt;<br>
&lt;div&gt;#37&nbsp;0x0022011a&nbsp;in&nbsp;mono_runtime_invoke&nbsp;(method=0xa9e5e2c,&nbsp;obj=0x0,&nbsp;params=0xbffff158,&nbsp;exc=0x0)&nbsp;at&nbsp;object.c:2757&lt;/div&gt;&lt;div&gt;#38&nbsp;0x00222e51&nbsp;in&nbsp;mono_runtime_exec_main&nbsp;(method=0xa9e5e2c,&nbsp;args=0xcd52960,&nbsp;exc=0x0)&nbsp;at&nbsp;object.c:3940&lt;/div&gt;<br>
&lt;div&gt;#39&nbsp;0x00222061&nbsp;in&nbsp;mono_runtime_run_main&nbsp;(method=0xa9e5e2c,&nbsp;argc=0,&nbsp;argv=0xbffff300,&nbsp;exc=0x0)&nbsp;at&nbsp;object.c:3562&lt;/div&gt;&lt;div&gt;#40&nbsp;0x000ad6df&nbsp;in&nbsp;mono_jit_exec&nbsp;(domain=0x9a6fe00,&nbsp;assembly=0x997d1c0,&nbsp;argc=1,&nbsp;argv=0xbffff2fc)&nbsp;at&nbsp;driver.c:1102&lt;/div&gt;<br>
&lt;div&gt;#41&nbsp;0x002f41ca&nbsp;in&nbsp;main&nbsp;()&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;René&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
