<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Sloppy ugly rotation of OwnerDrawnElement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Sloppy%20ugly%20rotation%20of%20OwnerDrawnElement&In-Reply-To=%3Cm2fvnhbhlk.fsf%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013262.html">
   <LINK REL="Next"  HREF="013264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Sloppy ugly rotation of OwnerDrawnElement</H1>
    <B>Guido Van Hoecke</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Sloppy%20ugly%20rotation%20of%20OwnerDrawnElement&In-Reply-To=%3Cm2fvnhbhlk.fsf%40gmail.com%3E"
       TITLE="[MonoTouch] Sloppy ugly rotation of OwnerDrawnElement">guivho at gmail.com
       </A><BR>
    <I>Mon Feb 17 20:37:59 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="013262.html">[MonoTouch] Problem IOS7 Setting background image
</A></li>
        <LI>Next message: <A HREF="013264.html">[MonoTouch] Monotouch Dialog StringElement Value empty
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13263">[ date ]</a>
              <a href="thread.html#13263">[ thread ]</a>
              <a href="subject.html#13263">[ subject ]</a>
              <a href="author.html#13263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I need an element that has a caption at the left side, and a
disclosure indicator preceded by a dynamic subview on the right side.

Following element class works as expected, but behaves uncleanly when I rotate the device:

  public class SchemeElement : OwnerDrawnElement
  {

    public SchemeElement (UITableViewCellStyle style, string key) : base (style, key)
    {
    }

    public override void Draw (RectangleF bounds, MonoTouch.CoreGraphics.CGContext context, UIView view)
    {
      context.SetFillColor (MCColor.BackgroundColor.CGColor);
      context.FillRect (bounds);

      foreach (var v in view.Subviews) {
        v.RemoveFromSuperview ();
      }

      view.Add( new UILabel (bounds) {
        Text = &quot;My text&quot;,
        TextColor = MCColor.TextColor,
        Font = MCFont.ButtonFont,
        Frame = new RectangleF (10, 0, 100, bounds.Height),
        BackgroundColor = MCColor.BackgroundColor,
      });

      // add subview that will have a frame.X of bounds.Width - 30 - subview.Width
      view.Add ( Config.SchemeShortTitle (bounds.Width - 30, (bounds.Height - 32) / 2));

      // add disclosure indicator size is 11 by 42, at X=bounds.Width - 20 and Y=1
      view.Add( new UIImageView () {
        Frame = new RectangleF (bounds.Width - 20, 1, 11, 42),
        Image = UIImage.FromFile (&quot;Images/Img/accessory.png&quot;)
      });
    }

    public override float Height (RectangleF bounds)
    {
      return 44f;
    }
  }

Both subviews are still visible at the beginning of the rotation to
landscape mode, disappear by the time the rotation is finished, and
appear as desired in the rotated element.

This is really sloppy and ugly, and probably caused by the way I coded
the element.

Without the RemoveFromSuperView, both subviews appear twice: once at the
location of their portrait coordinates and at the desired landscape
coordinates.

Is there a better way to code such an element?

Please advise,

Thanks in advance,


Guido


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013262.html">[MonoTouch] Problem IOS7 Setting background image
</A></li>
	<LI>Next message: <A HREF="013264.html">[MonoTouch] Monotouch Dialog StringElement Value empty
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13263">[ date ]</a>
              <a href="thread.html#13263">[ thread ]</a>
              <a href="subject.html#13263">[ subject ]</a>
              <a href="author.html#13263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
