<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Release build of app linked with zbarlib crashes unless debug symbols included
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Release%20build%20of%20app%20linked%20with%20zbarlib%20crashes%0A%20unless%20debug%20symbols%20included&In-Reply-To=%3CCAP-t25-NNSVyvhBK4f4v3x9MC__QJAKBXNPxiGkQkOxrkEEiGQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013100.html">
   <LINK REL="Next"  HREF="013123.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Release build of app linked with zbarlib crashes unless debug symbols included</H1>
    <B>Rolf Bjarne Kvinge</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Release%20build%20of%20app%20linked%20with%20zbarlib%20crashes%0A%20unless%20debug%20symbols%20included&In-Reply-To=%3CCAP-t25-NNSVyvhBK4f4v3x9MC__QJAKBXNPxiGkQkOxrkEEiGQ%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Release build of app linked with zbarlib crashes unless debug symbols included">rolf at xamarin.com
       </A><BR>
    <I>Tue Jul 16 22:32:26 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="013100.html">[MonoTouch] Release build of app linked with zbarlib crashes unless debug symbols included
</A></li>
        <LI>Next message: <A HREF="013123.html">[MonoTouch] Release build of app linked with zbarlib crashes unless debug symbols included
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13122">[ date ]</a>
              <a href="thread.html#13122">[ thread ]</a>
              <a href="subject.html#13122">[ subject ]</a>
              <a href="author.html#13122">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Most likely this is because in release mode we strip out symbols by
default, so when your app tries to load the string constant zbarlib will
dynamically look up the constant by name (which will fail because the
symbols were stripped out).

You can fix this by adding &quot;-nosymbolstrip:symbol1,symbol2&quot; to the
additional mtouch arguments in the project's iOS Build configuration
(remember to do it for the release configuration).

Best regards,
Rolf

On Wed, Jul 10, 2013 at 8:13 AM, technohead &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">dj_technohead at yahoo.com</A>&gt; wrote:

&gt;<i> Found the line of code that was causing the crash, and a workaround.
</I>&gt;<i>
</I>&gt;<i> // this crashes the app when compiled in release mode
</I>&gt;<i> // unless it is compiled with debugging symbols
</I>&gt;<i> //string s = ZBarSDK.BarcodeResultsKey;
</I>&gt;<i> string s = &quot;ZBarReaderControllerResults&quot;;
</I>&gt;<i>
</I>&gt;<i> var results = info[s];
</I>&gt;<i>
</I>&gt;<i> For some reason, trying to retrieve the string constant (I assume) from the
</I>&gt;<i> library would cause a crash if compiled as release and without debugging
</I>&gt;<i> symbols. Compiling with debugging symbols seemed to fix the problem.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://monotouch.2284126.n4.nabble.com/Release-build-of-app-linked-with-zbarlib-crashes-unless-debug-symbols-included-tp4658371p4658372.html">http://monotouch.2284126.n4.nabble.com/Release-build-of-app-linked-with-zbarlib-crashes-unless-debug-symbols-included-tp4658371p4658372.html</A>
</I>&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20130717/862a30b5/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20130717/862a30b5/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013100.html">[MonoTouch] Release build of app linked with zbarlib crashes unless debug symbols included
</A></li>
	<LI>Next message: <A HREF="013123.html">[MonoTouch] Release build of app linked with zbarlib crashes unless debug symbols included
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13122">[ date ]</a>
              <a href="thread.html#13122">[ thread ]</a>
              <a href="subject.html#13122">[ subject ]</a>
              <a href="author.html#13122">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
