<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Urgent help with WebClient.CancelAsync() Throwing System.Threading.ThreadInterruptedException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Urgent%20help%20with%20WebClient.CancelAsync%28%29%20Throwing%0A%20System.Threading.ThreadInterruptedException&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004046.html">
   <LINK REL="Next"  HREF="004049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Urgent help with WebClient.CancelAsync() Throwing System.Threading.ThreadInterruptedException</H1>
    <B>Danny Pronk</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Urgent%20help%20with%20WebClient.CancelAsync%28%29%20Throwing%0A%20System.Threading.ThreadInterruptedException&In-Reply-To="
       TITLE="[MonoTouch] Urgent help with WebClient.CancelAsync() Throwing System.Threading.ThreadInterruptedException">dpronk at probe-asp.eu
       </A><BR>
    <I>Wed Jul 27 05:17:59 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004046.html">[MonoTouch] Post Lion CoreLocation Not Working
</A></li>
        <LI>Next message: <A HREF="004049.html">[MonoTouch] Problem with updating UITableCell's DetailTextLabel.Text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4047">[ date ]</a>
              <a href="thread.html#4047">[ thread ]</a>
              <a href="subject.html#4047">[ subject ]</a>
              <a href="author.html#4047">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

In my app I am using the following :

WebClient.DownloadDataAsync to download a file (epub)
When the download starts I actually show an AlertView to display the
progress of the download with a cancel button to give the user the
possibility to
Cancel the download (e.g. When he is on 3G and download is slow).
When the user presses the cancelbutton I actually call
WebClient.CancelAsync(); to interrupt the download.
In my DataCompleted Routine I do a check on e.cancelled to figure out if the
user has cancelled or not (or at least not break at that point)

So far So good and all these pieces run good (without any problem) but after
the code of DownloadCompleted has finished Mono throws me the exception
System.Threading.ThreadInterrupedException.

My stacktrace tells me :

System.Threading.WaitHandle.WaitOne(etc..)
System.Net.WebAsyncResult.WaitUntilComplete(etc..)
System.New.WebConnectionStream.Read(etc..)
System.Net.WebClient.ReadAll (etc..)
System.Net.WebClient.DownloadDataCare(etc&#138;)

After reading up on CancelAsync() now I am at a loss how to fix this
exception.

Please can anybody give me some advise

Regards

Danny


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110727/88ee4966/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110727/88ee4966/attachment.html</A> 
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004046.html">[MonoTouch] Post Lion CoreLocation Not Working
</A></li>
	<LI>Next message: <A HREF="004049.html">[MonoTouch] Problem with updating UITableCell's DetailTextLabel.Text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4047">[ date ]</a>
              <a href="thread.html#4047">[ thread ]</a>
              <a href="subject.html#4047">[ subject ]</a>
              <a href="author.html#4047">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
