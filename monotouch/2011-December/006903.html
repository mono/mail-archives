<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Anyone experiencing some &quot;strange&quot; network problems?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Anyone%20experiencing%20some%20%22strange%22%20network%20problems%3F&In-Reply-To=DD088E6E0805DA4ABF0235F11CD07D6F6A1E3BF1%40SXSLAKL002.xceptionsoftware.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006902.html">
   <LINK REL="Next"  HREF="006904.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Anyone experiencing some &quot;strange&quot; network problems?</H1>
    <B>Dean Cleaver</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Anyone%20experiencing%20some%20%22strange%22%20network%20problems%3F&In-Reply-To=DD088E6E0805DA4ABF0235F11CD07D6F6A1E3BF1%40SXSLAKL002.xceptionsoftware.com"
       TITLE="[MonoTouch] Anyone experiencing some &quot;strange&quot; network problems?">dean.cleaver at xceptionsoftware.com
       </A><BR>
    <I>Fri Dec  2 14:13:55 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006902.html">[MonoTouch] MT training
</A></li>
        <LI>Next message: <A HREF="006904.html">[MonoTouch] UIImageView memory model
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6903">[ date ]</a>
              <a href="thread.html#6903">[ thread ]</a>
              <a href="subject.html#6903">[ subject ]</a>
              <a href="author.html#6903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The more I dig into this, the more it seems to be either an iOS problem, or merely the way the devices (and possibly Windows etc as well) work.

I've switched from TcpClient to Socket, because unlike the TcpClient's void Write method, the Socket's Send method returns the number of bytes written so am hoping that might help - however, if it returns the number of bytes written to the iOS network buffer, then I am no better off, and it's an iOS issue whereby that packet of data just never arrives, and I have no way of knowing.

Dino

From: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>] On Behalf Of Dean Cleaver
Sent: Tuesday, November 22, 2011 9:46 PM
To: Forums, MonoTouch (<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>)
Subject: [MonoTouch] Anyone experiencing some &quot;strange&quot; network problems?

Hi,

I'm experiencing some unusual network behaviour that I can't work out. In short, my app communicates with the server either via web services or TCP-IP calls, depending on the process. Some processes have mixed calls.

What I am seeing in one case is the web service call works and then it proceeds to make a TCP-IP call, which reports that it worked too - however it didn't work. The code below returns &quot;true&quot; so I know all checks passed, and no exceptions occurred, but the TCP-IP data never makes it to the server.

This can be proven by turning 3G off, and walking outside wireless network range so I have no connectivity at all - is it the iPhone reporting success in sending the message, or MonoTouch? How can I get it to fail like it should?

Dino


try

{

    if (this.clientStream == null)

    {

        if (this.stopClient)

            return false;



        this.Continue(5);



        if (this.clientStream == null)

            return false;

    }



    if (!this.clientStream.CanWrite)

        return false;



    if (message == null)

        return false;



    this.clientStream.Write(message, 0, message.Length);

    return true;

}

catch (NullReferenceException)

{

    return false;

}

catch (ObjectDisposedException)

{

    return false;

}

catch (IOException)

{

    return false;

}

catch (Exception ex)

{

    this.SendError(ex, &quot;Error in SendMessage byte[]&quot;);

    return false;

}


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20111202/35338254/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20111202/35338254/attachment-0001.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006902.html">[MonoTouch] MT training
</A></li>
	<LI>Next message: <A HREF="006904.html">[MonoTouch] UIImageView memory model
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6903">[ date ]</a>
              <a href="thread.html#6903">[ thread ]</a>
              <a href="subject.html#6903">[ subject ]</a>
              <a href="author.html#6903">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
