<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] changes from 4.04 to 4.1 - problem with peoplepicker
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20changes%20from%204.04%20to%204.1%20-%20problem%20with%20peoplepicker&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004497.html">
   <LINK REL="Next"  HREF="004499.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] changes from 4.04 to 4.1 - problem with peoplepicker</H1>
    <B>John Murray</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20changes%20from%204.04%20to%204.1%20-%20problem%20with%20peoplepicker&In-Reply-To="
       TITLE="[MonoTouch] changes from 4.04 to 4.1 - problem with peoplepicker">john at murray.gb.com
       </A><BR>
    <I>Sun Aug 21 11:37:46 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004497.html">[MonoTouch] System.WebException / ConnectFailure on HTTPS webservice on device but not on emulator
</A></li>
        <LI>Next message: <A HREF="004499.html">[MonoTouch] Unable To Create Outlet/Actions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4498">[ date ]</a>
              <a href="thread.html#4498">[ thread ]</a>
              <a href="subject.html#4498">[ subject ]</a>
              <a href="author.html#4498">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A follow on from the saga of previous posts - 

After an upgrade the people picker code ceased to function and was
undebuggable

AS a couple of people pointed out the problem was likely to be in the new
way 4.1 handles the controller and its dismissal.

I've reverted to md 2.6 and mono 4.04 and recovered the position but having
played a bit with the new xcode and md 2.8 and being assured that the
newmonotouch is handling dismissal of controllers correctly .... then I'd
like my code to do it 'correctly' also 

 

So could ANYONE say how this code should be changed so that it does not
cause a crash under 4.1 

 

Interestingly it only crashes, the moment you introduce the two PPVC.Cancel
and PPVC.SelectPerson methods - even if these delegates have no code in them
they cause a null reference exception. Am I right therefore in assuming this
means it has nothing to do with dismissmodalviewcontroller?

If you rem them out completely there is no crash but of course one cannot
exit the modal picker.

 

Finally what is the right way of achieving this in mono 4.1????

 

public partial class AppDelegate : UIApplicationDelegate

       {

// assume this is what is meant by declaring the peoplepicker at class
level?????

              protected ABPeoplePickerNavigationController  ppvc=new
ABPeoplePickerNavigationController();      

              public override bool FinishedLaunching (UIApplication app,
NSDictionary options)

              {

                     window.AddSubview (navcontrol.View);

                     window.MakeKeyAndVisible ();

                            button.TouchUpInside +=delegate{

navcontrol.PresentModalViewController(ppvc,true);

};

                     // if one comments out the next two delegates code does
not cause exception

                     // but even if delegates are left in with blank code
they cause null object exception under mono 4.1 &gt;

                     // so it appears nothing to do with
dismissingmodalviewcontroller

ppvc.Cancelled+=delegate(object sender,EventArgs e)

                     {

 
navcontrol.DismissModalViewControllerAnimated(true);

                     };

                     ppvc.SelectPerson+=delegate (object
sender,ABPeoplePickerSelectPersonEventArgs args1)

                     {      

                            if (!args1.Continue)

                           {  // do something;  

 
navcontrol.DismissModalViewControllerAnimated(true);}

                     };                   

                     return true;

              }

 

Once again thanks in advance to those kind souls prepared to help

John Murray

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110821/c555075d/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110821/c555075d/attachment-0001.html</A> 
</PRE>





























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004497.html">[MonoTouch] System.WebException / ConnectFailure on HTTPS webservice on device but not on emulator
</A></li>
	<LI>Next message: <A HREF="004499.html">[MonoTouch] Unable To Create Outlet/Actions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4498">[ date ]</a>
              <a href="thread.html#4498">[ thread ]</a>
              <a href="subject.html#4498">[ subject ]</a>
              <a href="author.html#4498">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
