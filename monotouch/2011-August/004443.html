<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] people picker problem after upgrading to touch 4	and MD2.8Alpha
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20people%20picker%20problem%20after%20upgrading%20to%20touch%204%0A%09and%20MD2.8Alpha&In-Reply-To=014c01cc5da4%24cc128fd0%246437af70%24%40gb.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004438.html">
   <LINK REL="Next"  HREF="004446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] people picker problem after upgrading to touch 4	and MD2.8Alpha</H1>
    <B>Jeff Stedfast</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20people%20picker%20problem%20after%20upgrading%20to%20touch%204%0A%09and%20MD2.8Alpha&In-Reply-To=014c01cc5da4%24cc128fd0%246437af70%24%40gb.com"
       TITLE="[MonoTouch] people picker problem after upgrading to touch 4	and MD2.8Alpha">jeff at xamarin.com
       </A><BR>
    <I>Thu Aug 18 10:54:07 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004438.html">[MonoTouch] people picker problem after upgrading to touch 4	and MD2.8Alpha
</A></li>
        <LI>Next message: <A HREF="004446.html">[MonoTouch] people picker problem after upgrading to touch 4	and MD2.8Alpha
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4443">[ date ]</a>
              <a href="thread.html#4443">[ thread ]</a>
              <a href="subject.html#4443">[ subject ]</a>
              <a href="author.html#4443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi John,

DismissModalViewController() now clears the parent's ModalViewController
property, which, if that is the only reference that still exists for your
ppvc, will be lost (cleared to null). What you need to do is make sure you
hold a reference to that object elsewhere.

This is one of the fixes in the 4.1 beta branch which is needed to more
accurately reflect the state of the underlying objects. The reason it
happened to work because is because we wrongly kept the ModalViewController
property cached which prevented expected garbage collection when the modal
view was dismissed.

For more information, see <A HREF="http://bugzilla.xamarin.com/show_bug.cgi?id=172">http://bugzilla.xamarin.com/show_bug.cgi?id=172</A>

Hope that helps,

Jeff

On Thu, Aug 18, 2011 at 8:46 AM, John Murray &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">john at murray.gb.com</A>&gt; wrote:

&gt;<i> Doesn&#8217;t make the slightest difference &#8211; still get null reference exception
</I>&gt;<i> ****
</I>&gt;<i>
</I>&gt;<i> Also doens&#8217;t explain why it worked in previous version of MD and touch ***
</I>&gt;<i> *
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Also I have tried loading several examples from the Wally B etc book which
</I>&gt;<i> worked fine before &#8211; I simply get SIGSEGV errors trying to run them ****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Thanks anyway ****
</I>&gt;<i>
</I>&gt;<i> Yours in further desperation ****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> *From:* Jason Awbrey [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">jason at awbrey.net</A>]
</I>&gt;<i> *Sent:* 18 August 2011 13:34
</I>&gt;<i> *To:* <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">john at murray.gb.com</A>
</I>&gt;<i> *Cc:* <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
</I>&gt;<i> *Subject:* Re: [MonoTouch] people picker problem after upgrading to touch
</I>&gt;<i> 4 and MD2.8Alpha****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> the first thing I'd try is to move the declaration &quot;var ppvc&quot; from your
</I>&gt;<i> local scope and declare it at the class level instead.  ****
</I>&gt;<i>
</I>&gt;<i> On Thu, Aug 18, 2011 at 7:02 AM, John Murray &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">john at murray.gb.com</A>&gt; wrote:**
</I>&gt;<i> **
</I>&gt;<i>
</I>&gt;<i> I downloaded monotouch 4 and 2.8 of MD this morning after a prompt from MD
</I>&gt;<i> ****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> My app has a view which requires user to enter name and address info ****
</I>&gt;<i>
</I>&gt;<i> It has a button which allows user to pick from the contacts list ****
</I>&gt;<i>
</I>&gt;<i> Code lifted straight from Wally B&#8217;s book ****
</I>&gt;<i>
</I>&gt;<i> It&#8217;s worked fine until now &#8211; I mean last night fine &#8211; this morning after
</I>&gt;<i> upgrade No ****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> It is undebuggable &#8211; cannot even get to a break point simply drops out with
</I>&gt;<i> green line at UIApplication.Main(args)****
</I>&gt;<i>
</I>&gt;<i> As I say I&#8217;ve not changed code overnight.****
</I>&gt;<i>
</I>&gt;<i> The trace shows it failing on monotouch.utils.backingField.get ****
</I>&gt;<i>
</I>&gt;<i> In developer/monotouch/source/monotouch/src/utils/backingField.cs line 47*
</I>&gt;<i> ***
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> I&#8217;d be the first to admit my code is not exactly expert &#8211; I do hope this is
</I>&gt;<i> a fault in the new version rather than I have to go to college for 10 years
</I>&gt;<i> to discover how to do it properly as every new developer tool/evolution
</I>&gt;<i> seems to get more complicatedJ ****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> It seem simple enough &#8211; I cant imagine what I am doing wrong and why it
</I>&gt;<i> only comes out now after the upgrade****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> A button calls ****
</I>&gt;<i>
</I>&gt;<i> -          paxViewController.PresentModalViewController(ppvc,true) ;****
</I>&gt;<i>
</I>&gt;<i> the ppvc is declared like this ****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i>                 var ppvc = new ABPeoplePickerNavigationController();****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> and then it has a few override methods e.g. ****
</I>&gt;<i>
</I>&gt;<i> ppvc.SelectPerson+=delegate(object
</I>&gt;<i> sender,ABPeoplePickerSelectPersonEventArgs e)****
</I>&gt;<i>
</I>&gt;<i> {****
</I>&gt;<i>
</I>&gt;<i> //do something ****
</I>&gt;<i>
</I>&gt;<i> //dismiss modal ****
</I>&gt;<i>
</I>&gt;<i> paxViewController.DismissModalViewControllerAnimated(true);****
</I>&gt;<i>
</I>&gt;<i> };****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> And that&#8217;s all there is to it -   as I say it doesn&#8217;t even get to these
</I>&gt;<i> lines &#8211; on touching the contact (any contact) to select it drops out with
</I>&gt;<i> nullreference exception****
</I>&gt;<i>
</I>&gt;<i> And no clue as to what is causing it ****
</I>&gt;<i>
</I>&gt;<i> are there changes in monotouch4 which mean I have to do things differently?
</I>&gt;<i> ****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> Desperate for help here &#8211; completely out of my depth.****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> Tia ****
</I>&gt;<i>
</I>&gt;<i> John Murray ****
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch****">http://lists.ximian.com/mailman/listinfo/monotouch****</A>
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110818/2909549c/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110818/2909549c/attachment-0001.html</A> 
</PRE>
















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004438.html">[MonoTouch] people picker problem after upgrading to touch 4	and MD2.8Alpha
</A></li>
	<LI>Next message: <A HREF="004446.html">[MonoTouch] people picker problem after upgrading to touch 4	and MD2.8Alpha
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4443">[ date ]</a>
              <a href="thread.html#4443">[ thread ]</a>
              <a href="subject.html#4443">[ subject ]</a>
              <a href="author.html#4443">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
