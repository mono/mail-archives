<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Embed RESX for Localization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Embed%20RESX%20for%20Localization&In-Reply-To=CA5F0CDD.BD4B%25karl%40e-magesolutions.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004189.html">
   <LINK REL="Next"  HREF="004184.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Embed RESX for Localization</H1>
    <B>Karl Heinz Brehme Arredondo</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Embed%20RESX%20for%20Localization&In-Reply-To=CA5F0CDD.BD4B%25karl%40e-magesolutions.com"
       TITLE="[MonoTouch] Embed RESX for Localization">karl at e-magesolutions.com
       </A><BR>
    <I>Thu Aug 18 19:45:30 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004189.html">[MonoTouch] Embed RESX for Localization
</A></li>
        <LI>Next message: <A HREF="004184.html">[MonoTouch] Post Lion CoreLocation Not Working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4463">[ date ]</a>
              <a href="thread.html#4463">[ thread ]</a>
              <a href="subject.html#4463">[ subject ]</a>
              <a href="author.html#4463">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Rodrigo,

Today I found that if I copy the MD generated folders es and es-MX that has
inside files like MyApp.resources.dll inside the MyApp.app &quot;folder&quot;, in the
simulator it was capable to correctly consider the resx file that I created
with strings and text per country/language, created on Visual Studio from a
Windows Mobile project, as described in the other e-mails. So it runs! Just
need to give a hand to Monodevelop to manually copy this resource folders
inside .app &quot;file&quot; package.

BUT, when I tested on a real device, I got this error message:

Failed to load AOT module
'/private/var/mobile/Applications/2F590F07-2FF1-4D7F-A27B-5B25BB8CF6CE/MyDev
ice.app/es-MX/MyApp.resources.dll.dylib' in aot-only mode.

I thought that was because I altered the original MyApp.app but doesn&#185;t. I
made a normal compilation and tested it. It isn't running anymore when the
program reaches the Library.CONVIDADOS it closes with the above message. In
the original e-mail speaking about hits it was running OK. But since then I
never done another test until now when I got the idea to copy folders inside
MyApp.app.

MonoDevelop: 2.4.2
Mono: 2.10.1
MonoTouch: 4.0.3.10366

Any tip? This running again could be the solution for resx (or a big start
to do something inside .NET and cross platform for localization because It
correctly differentiated &quot;es&quot; from &quot;es-MX&quot; or whatever, not only spanish or
portuguese as native iOS).

Karl

From:  Karl Heinz Brehme Arredondo &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">karl at e-magesolutions.com</A>&gt;
Date:  Wed, 03 Aug 2011 14:36:27 -0300
To:  Rodrigo Kumpera &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">kumpera at xamarin.com</A>&gt;
Cc:  &quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&gt;
Subject:  Re: [MonoTouch] Embed RESX for Localization

.. And MonoDevelop generated the directories &quot;es&quot; and &quot;es-MX&quot; with DLLs that
I copied  to Payload folder to generate the MyApp.app with all things plus
localization folders.

Sorry for fragmented info.

Karl

From:  Karl Heinz Brehme Arredondo &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">karl at e-magesolutions.com</A>&gt;
Date:  Wed, 03 Aug 2011 13:10:39 -0300
To:  Rodrigo Kumpera &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">kumpera at xamarin.com</A>&gt;
Cc:  &quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&gt;
Subject:  Re: [MonoTouch] Embed RESX for Localization

Thanks a lot.

If later you need exactly code of what I copied from Visual Studio
2008/Windows Mobile/netcf 2 I can private.

And to resume: code created on VS 2008 for resx was compiled on
MonoTouch/MonoDevelop and it has get the default text of each string
resource, but when changing iOS config to another country and language it
still got default text. But at least got some text from VS 2008 netcf
classes.

I have about 1 month to to basic localizations and will try something in VS
model to implement something temporary. BTW, Lion and bugs are more
important now.

Thanks,

Karl

From:  Rodrigo Kumpera &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">kumpera at xamarin.com</A>&gt;
Date:  Wed, 3 Aug 2011 12:56:08 -0300
To:  Karl Heinz Brehme Arredondo &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">karl at e-magesolutions.com</A>&gt;
Cc:  &quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&gt;
Subject:  Re: [MonoTouch] Embed RESX for Localization

Hi Karl,

Your email caused a very heated argument internally at Xamarin because, yes,
our localization story is not as nice as we want it to be.
Right now we are sorting out more urgent matters like crashers, bugs and
critical features such as Lion support.
Rest assured that your email caught our attention and we have the issue on
our radar.


On Wed, Aug 3, 2011 at 12:48 PM, Karl Heinz Brehme Arredondo
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">karl at e-magesolutions.com</A>&gt; wrote:
&gt;<i> (Resending if no one saw)
</I>&gt;<i> 
</I>&gt;<i> Hi..
</I>&gt;<i> 
</I>&gt;<i> I'm porting a Windows Mobile application to iOS and it's time for
</I>&gt;<i> localization. I read about NSBundle.MainBundle.LocalizedStrings and the tool
</I>&gt;<i> for extract it from the application, but I didn't like at all&#138;
</I>&gt;<i> 
</I>&gt;<i> As I have this already localized on Windows Mobile application, I tried to
</I>&gt;<i> copy my Library.Designer.cs generated on Visual Studio 2008 and the resx files
</I>&gt;<i> Library.resx, Library.es.resx (generic spanish) and Library.es-CH.resx
</I>&gt;<i> (chilean spanish), changed resx'es to Embed Resource, compiled and run without
</I>&gt;<i> errors.
</I>&gt;<i> 
</I>&gt;<i> But, no translations was made changing iOs settings, and just the original
</I>&gt;<i> text from Library.resx is shown. Debugging I found that Library.Designer.cs
</I>&gt;<i> has resourceCulture = null, so at constructor I put a
</I>&gt;<i> manual-not-necessary-on-windows resourceCulture =
</I>&gt;<i> System.Globalization.CultureInfo.CurrentCulture, and checked on debugging that
</I>&gt;<i> resourceCulture now has es-CH, but still no translated text appeared.
</I>&gt;<i> 
</I>&gt;<i> A sample of property generated on Visual Studio that runs OK there but on
</I>&gt;<i> MonoTouch returned default text but not the translated:
</I>&gt;<i> 
</I>&gt;<i>         /// &lt;summary&gt;
</I>&gt;<i>         ///   Looks up a localized string similar to Convidados.
</I>&gt;<i>         /// &lt;/summary&gt;
</I>&gt;<i>         internal static string CONVIDADOS {
</I>&gt;<i>             get {
</I>&gt;<i>                 return ResourceManager.GetString(&quot;CONVIDADOS&quot;,
</I>&gt;<i> resourceCulture);
</I>&gt;<i>             }
</I>&gt;<i>         }
</I>&gt;<i> 
</I>&gt;<i> So, on code I call something like myButton.Text  = Library.CONVIDADOS and it
</I>&gt;<i> has to return localized text from resx.
</I>&gt;<i> 
</I>&gt;<i> No idea what to do or how to use it, but it can help against the lack of
</I>&gt;<i> localization on iOS that support just spanish or english or portuguese but not
</I>&gt;<i> es and es-CH and es-AR and pt-BR and pt all as differente things. There is a
</I>&gt;<i> way to use resx correctly? Something missing here?
</I>&gt;<i> 
</I>&gt;<i> I just don't want to put a #if PocketPC and #if Android and #if iOS on
</I>&gt;<i> everywhere for each text&#138; I think that could be possible to do it on a .net
</I>&gt;<i> way.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Also missing about the lack of UI resources like on windows. And still a lot
</I>&gt;<i> of people condemn windows development where without a line of code I have
</I>&gt;<i> ASP.NET &lt;<A HREF="http://ASP.NET">http://ASP.NET</A>&gt;  applications, desktop applications and windows
</I>&gt;<i> mobile applications localized, not just text translation but with custom
</I>&gt;<i> control properties (width, Visilibity and others) based on language and
</I>&gt;<i> country&#138;
</I>&gt;<i> 
</I>&gt;<i> I have fear now to discover how this runs on Android&#138;&#138;.
</I>&gt;<i> 
</I>&gt;<i> Karl
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i> 
</I>
_______________________________________________ MonoTouch mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.comhttp</A>://lists.ximian.com/mailman/listinfo/monotouch
_______________________________________________ MonoTouch mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110818/130896be/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110818/130896be/attachment-0001.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004189.html">[MonoTouch] Embed RESX for Localization
</A></li>
	<LI>Next message: <A HREF="004184.html">[MonoTouch] Post Lion CoreLocation Not Working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4463">[ date ]</a>
              <a href="thread.html#4463">[ thread ]</a>
              <a href="subject.html#4463">[ subject ]</a>
              <a href="author.html#4463">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
