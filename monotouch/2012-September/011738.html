<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] CoreImage Memory Consumption / Recipe affected
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20CoreImage%20Memory%20Consumption%20/%20Recipe%20affected&In-Reply-To=%3CCAP-t258KM3QX-%2BTqWam1_JtcdnX7LoCiO6W-9B6e05pXAwwg0Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011711.html">
   <LINK REL="Next"  HREF="011739.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] CoreImage Memory Consumption / Recipe affected</H1>
    <B>Rolf Bjarne Kvinge</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20CoreImage%20Memory%20Consumption%20/%20Recipe%20affected&In-Reply-To=%3CCAP-t258KM3QX-%2BTqWam1_JtcdnX7LoCiO6W-9B6e05pXAwwg0Q%40mail.gmail.com%3E"
       TITLE="[MonoTouch] CoreImage Memory Consumption / Recipe affected">rolf at xamarin.com
       </A><BR>
    <I>Wed Sep 12 22:45:57 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011711.html">[MonoTouch] CoreImage Memory Consumption / Recipe affected
</A></li>
        <LI>Next message: <A HREF="011739.html">[MonoTouch] CoreImage Memory Consumption / Recipe affected
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11738">[ date ]</a>
              <a href="thread.html#11738">[ thread ]</a>
              <a href="subject.html#11738">[ subject ]</a>
              <a href="author.html#11738">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I checked out the sample and it is actually a bug in our binding (I also
filed a bug: <A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=7117">https://bugzilla.xamarin.com/show_bug.cgi?id=7117</A> - you can CC
yourself to get notified when it's fixed).

You could manually call release on the leaked object:

using MonoTouch.ObjCRuntime;
var result = context.CreateCGImage (output, output.Extent);
Messaging.void_objc_msgSend (result.Handle, Selector.GetHandle (&quot;release&quot;));

but note that this workaround will crash once the issue is fixed.

Rolf

On Wed, Sep 12, 2012 at 2:10 AM, couchworx &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">boris at couchworx.com</A>&gt; wrote:

&gt;<i> Hi Rolf,
</I>&gt;<i>
</I>&gt;<i> thanks for responding.
</I>&gt;<i>
</I>&gt;<i> profiling the &quot;Adjust Contrast and Brightness of an Image&quot; recipe App
</I>&gt;<i> &quot;Color_Controls_Pro&quot; every call to HandleValueChanged up to the crash (7
</I>&gt;<i> calls, 8 snapshots) shows no increase of object count or total memory used
</I>&gt;<i> after the first one. I've attached the output document.
</I>&gt;<i>
</I>&gt;<i> 1 ObjCount 1,384  Total Mem 36,528 bytes
</I>&gt;<i> 2 ObjCount 1,622  Total Mem 42,600 bytes
</I>&gt;<i> 3 ObjCount 1,628  Total Mem 42,736 bytes
</I>&gt;<i> 4 ObjCount 1,630  Total Mem 42,784 bytes
</I>&gt;<i> 5 ObjCount 1,630  Total Mem 42,800 bytes
</I>&gt;<i> 6 ObjCount 1,630  Total Mem 42,800 bytes
</I>&gt;<i> 7 ObjCount 1,630  Total Mem 42,800 bytes
</I>&gt;<i> 8 ObjCount 1,630  Total Mem 42,800 bytes
</I>&gt;<i> crash
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://monotouch.2284126.n4.nabble.com/file/n4656965/profiler-output.mlpd">http://monotouch.2284126.n4.nabble.com/file/n4656965/profiler-output.mlpd</A>
</I>&gt;<i> profiler-output.mlpd
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Can you explain why and when to Dispose Images while in use?
</I>&gt;<i> Disposing the Image while having it shown to the user does not seem to make
</I>&gt;<i> sense to me ... ;-)
</I>&gt;<i>
</I>&gt;<i> thanks
</I>&gt;<i> Boris
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://monotouch.2284126.n4.nabble.com/CoreImage-Memory-Consumption-Recipe-affected-tp4656953p4656965.html">http://monotouch.2284126.n4.nabble.com/CoreImage-Memory-Consumption-Recipe-affected-tp4656953p4656965.html</A>
</I>&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120913/87de19fd/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120913/87de19fd/attachment.html</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011711.html">[MonoTouch] CoreImage Memory Consumption / Recipe affected
</A></li>
	<LI>Next message: <A HREF="011739.html">[MonoTouch] CoreImage Memory Consumption / Recipe affected
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11738">[ date ]</a>
              <a href="thread.html#11738">[ thread ]</a>
              <a href="subject.html#11738">[ subject ]</a>
              <a href="author.html#11738">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
