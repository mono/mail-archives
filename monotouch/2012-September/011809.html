<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] TypeInitializationException on device
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20TypeInitializationException%20on%20device&In-Reply-To=%3CCACp3Zk1o6hEpjMyG6qE%2BUVObanYD64w-%2BLnnkbpQAPZ2QsLqOQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011808.html">
   <LINK REL="Next"  HREF="011845.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] TypeInitializationException on device</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20TypeInitializationException%20on%20device&In-Reply-To=%3CCACp3Zk1o6hEpjMyG6qE%2BUVObanYD64w-%2BLnnkbpQAPZ2QsLqOQ%40mail.gmail.com%3E"
       TITLE="[MonoTouch] TypeInitializationException on device">sebastien at xamarin.com
       </A><BR>
    <I>Mon Sep 17 19:38:02 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011808.html">[MonoTouch] TypeInitializationException on device
</A></li>
        <LI>Next message: <A HREF="011845.html">[MonoTouch] TypeInitializationException on device
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11809">[ date ]</a>
              <a href="thread.html#11809">[ thread ]</a>
              <a href="subject.html#11809">[ subject ]</a>
              <a href="author.html#11809">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Len,

On Mon, Sep 17, 2012 at 3:13 PM, Len Charest &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">len at shingl.com</A>&gt; wrote:
&gt;<i> When running on a device, my app is throwing a TypeInitializationException
</I>&gt;<i> from the static constructor for System.Data.Services.Client.TypeSystem.The
</I>&gt;<i> constructor is attempting to populate a Dictionary&lt;MethodInfo, string&gt; and
</I>&gt;<i> failing on the lookup of method info for String.Contains(String); see
</I>&gt;<i> TypeSystem.cs, line 42. This code works fine on the simulator.
</I>&gt;<i>
</I>&gt;<i> I'm hitting the error when my app tries to do the following:
</I>&gt;<i>
</I>&gt;<i> var context = new MyDataServiceContext(myServiceRoot); // context class
</I>&gt;<i> generated by dataSvcUtil.exe
</I>&gt;<i> var query = context.Users.AddQueryOption(&quot;$filter&quot;, &quot;Username eq 'bob'&quot;); //
</I>&gt;<i> query is a DataServiceQuery&lt;User&gt;
</I>&gt;<i> var uri = query.RequestUri;
</I>&gt;<i>
</I>&gt;<i> The getter for RequestUri starts a call chain that eventually hits
</I>&gt;<i> TypeSystem.GetElementType, which thereby triggers the static constructor.
</I>&gt;<i>
</I>&gt;<i> Any ideas?
</I>
It seems that System.Data.Services.Client.dll depends a lot of
reflection. By default linking is disabled on the simulator so almost*
everything is available at runtime. However the default, for devices,
is to enable the linker (small app size and faster builds) and this
can remove some of the methods (or even types) that SDSC.dll might
need.

A very quick turn around is to disable the linker (no link). That will
allow you to resume development / testing on device. Please fill a bug
report on bugzilla.xamarin.com and we'll look to fix this and give you
a better workaround until this fix is released.

Regards,
Sebastien

* not the parts about Microsoft.VisualBasic.*
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011808.html">[MonoTouch] TypeInitializationException on device
</A></li>
	<LI>Next message: <A HREF="011845.html">[MonoTouch] TypeInitializationException on device
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11809">[ date ]</a>
              <a href="thread.html#11809">[ thread ]</a>
              <a href="subject.html#11809">[ subject ]</a>
              <a href="author.html#11809">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
