<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Cannot use a native library in monotouch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Cannot%20use%20a%20native%20library%20in%20monotouch&In-Reply-To=%3C1327873308350-4339336.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007702.html">
   <LINK REL="Next"  HREF="007699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Cannot use a native library in monotouch</H1>
    <B>ilmdaniel</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Cannot%20use%20a%20native%20library%20in%20monotouch&In-Reply-To=%3C1327873308350-4339336.post%40n4.nabble.com%3E"
       TITLE="[MonoTouch] Cannot use a native library in monotouch">ilmdaniel at yahoo.com
       </A><BR>
    <I>Sun Jan 29 21:41:48 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="007702.html">[MonoTouch] AddressBook ABSource missing?
</A></li>
        <LI>Next message: <A HREF="007699.html">[MonoTouch] Cannot use a native library in monotouch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7696">[ date ]</a>
              <a href="thread.html#7696">[ thread ]</a>
              <a href="subject.html#7696">[ subject ]</a>
              <a href="author.html#7696">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to make a c# binding for &quot;iCarousel&quot; objective-c library.
I've created a new target &quot;Cocoa Touch Static Library&quot; for the Xcode project
and i've created the static libraries after that using the tutorial
commands:

    /Developer/usr/bin/xcodebuild -project iCarousel.xcodeproj -target
libiCarousel -sdk iphonesimulator -configuration Release clean build
    /Developer/usr/bin/xcodebuild -project iCarousel.xcodeproj -target
libiCarousel -sdk iphoneos -arch armv6 -configuration Release clean build
    /Developer/usr/bin/xcodebuild -project iCarousel.xcodeproj -target
libiCarousel -sdk iphoneos -arch armv7 -configuration Release clean build
    lipo -create -output libiCarousel.a libiCarousel-i386.a
libiCarousel-armv6.a libiCarousel-armv7.a

Everything worked like a charm for now.
After that I've created a new monotouch binding project, include the &quot;fat&quot;
static library, generated a dll using the new LinkWith attribute and
everything it's working fine on the simulator and on my iPad with iOS 5.0.  

The problem only appears on my old iPhone 3g with iOS 4.1 installed. The
sample I've made doesn't run and the debugger returns this strange error:

dyld: lazy symbol binding failed: Symbol not found:
_objc_retainAutoreleasedReturnValue
  Referenced from:
/var/mobile/Applications/8160D667-16EF-45F7-9658-A096AD421A21/Sample.app/Sample
  Expected in: /usr/lib/libobjc.A.dylib

dyld: Symbol not found: _objc_retainAutoreleasedReturnValue
  Referenced from:
/var/mobile/Applications/8160D667-16EF-45F7-9658-A096AD421A21/Sample.app/Sample
  Expected in: /usr/lib/libobjc.A.dylib

I'm almost sure it's an error on my Xcode project properties and with ARMv6
and ARMv7 settings but I don't know how to handle it.

I've used LinkWith like this:
[assembly: LinkWith (&quot;libiCarousel.a&quot;, LinkTarget.Simulator |
LinkTarget.ArmV6 | LinkTarget.ArmV7, ForceLoad = true,
Frameworks=&quot;CoreGraphics QuartzCore UIKit&quot;)]

Also I noticed that my build it's working ONLY on iOS 5...


--
View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/Cannot-use-a-native-library-in-monotouch-tp4339336p4339336.html">http://monotouch.2284126.n4.nabble.com/Cannot-use-a-native-library-in-monotouch-tp4339336p4339336.html</A>
Sent from the MonoTouch mailing list archive at Nabble.com.
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007702.html">[MonoTouch] AddressBook ABSource missing?
</A></li>
	<LI>Next message: <A HREF="007699.html">[MonoTouch] Cannot use a native library in monotouch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7696">[ date ]</a>
              <a href="thread.html#7696">[ thread ]</a>
              <a href="subject.html#7696">[ subject ]</a>
              <a href="author.html#7696">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
