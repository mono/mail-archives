<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] An error in unmanaged code...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20An%20error%20in%20unmanaged%20code...&In-Reply-To=4D9CD3AB.6040509%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002816.html">
   <LINK REL="Next"  HREF="002830.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] An error in unmanaged code...</H1>
    <B>David Moles</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20An%20error%20in%20unmanaged%20code...&In-Reply-To=4D9CD3AB.6040509%40gmail.com"
       TITLE="[MonoTouch] An error in unmanaged code...">davidmoles at thegogame.com
       </A><BR>
    <I>Wed Apr  6 18:13:53 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002816.html">[MonoTouch] Mono for Android 1.0 and MonoTouch 4.0
</A></li>
        <LI>Next message: <A HREF="002830.html">[MonoTouch] An error in unmanaged code...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2817">[ date ]</a>
              <a href="thread.html#2817">[ thread ]</a>
              <a href="subject.html#2817">[ subject ]</a>
              <a href="author.html#2817">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>ViewDidDisappear should get called if you're successfully removed from the
nav controller, but I guess it's not getting that far?

I'd try making the CATiledLayer and UIScrollView both fields instead of
local variables. If that doesn't work, I'm probably wrong about premature
garbage collection being the issue.

On Wed, Apr 6, 2011 at 1:57 PM, Peter Morris &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">mrpmorris at gmail.com</A>&gt; wrote:

&gt;<i> ViewDidDisappear does not get executed so I cannot do it there.
</I>&gt;<i>
</I>&gt;<i> As for popping the controller and then disposing in the button click
</I>&gt;<i>
</I>&gt;<i>        void BackButtonClick(object sender, EventArgs e)
</I>&gt;<i>        {
</I>&gt;<i>            NavigationController.PopViewControllerAnimated(false);
</I>&gt;<i>            var page = PdfPage;
</I>&gt;<i>            var document = PdfDocument;
</I>&gt;<i>            var contentView = ContentView;
</I>&gt;<i>
</I>&gt;<i>            PdfPage = null;
</I>&gt;<i>            PdfDocument = null;
</I>&gt;<i>            ContentView = null;
</I>&gt;<i>
</I>&gt;<i>            page.Dispose ();
</I>&gt;<i>            document.Dispose ();
</I>&gt;<i>            contentView.Dispose ();
</I>&gt;<i>        }
</I>&gt;<i>
</I>&gt;<i> As soon as I click the &quot;Done&quot; button the app instantly hangs, it doesn't
</I>&gt;<i> even make it to a breakline on the first line of the method.  If I then
</I>&gt;<i> click STOP in the IDE and re-run my app I get the following:
</I>&gt;<i> Mono.Debugger.Soft.VMDisconnectedException: Exception of type
</I>&gt;<i> 'Mono.Debugger.Soft.VMDisconnectedException' was thrown.
</I>&gt;<i>  at Mono.Debugger.Soft.Connection.SendReceive (CommandSet command_set,
</I>&gt;<i> Int32 command, Mono.Debugger.Soft.PacketWriter packet) [0x00000] in
</I>&gt;<i> &lt;filename unknown&gt;:0
</I>&gt;<i>  at Mono.Debugger.Soft.Connection.VM_Exit (Int32 exitCode) [0x00000] in
</I>&gt;<i> &lt;filename unknown&gt;:0
</I>&gt;<i>  at Mono.Debugger.Soft.VirtualMachine.Exit (Int32 exitCode) [0x00000] in
</I>&gt;<i> &lt;filename unknown&gt;:0
</I>&gt;<i>  at Mono.Debugging.Soft.SoftDebuggerSession.OnExit () [0x00000] in
</I>&gt;<i> &lt;filename unknown&gt;:0
</I>&gt;<i>  at MonoDevelop.Debugger.Soft.IPhone.IPhoneDebuggerSession.OnExit ()
</I>&gt;<i> [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i>  at Mono.Debugging.Client.DebuggerSession.&lt;Exit&gt;m__B () [0x00000] in
</I>&gt;<i> &lt;filename unknown&gt;:0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Whereas if I comment out the following line everything works great - except
</I>&gt;<i> that the PDF does not appear:
</I>&gt;<i>            View.AddSubview(scrollView);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I really have no clue what is going on here.
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
David Moles
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">davidmoles at thegogame.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110406/2dc783d2/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110406/2dc783d2/attachment.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002816.html">[MonoTouch] Mono for Android 1.0 and MonoTouch 4.0
</A></li>
	<LI>Next message: <A HREF="002830.html">[MonoTouch] An error in unmanaged code...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2817">[ date ]</a>
              <a href="thread.html#2817">[ thread ]</a>
              <a href="subject.html#2817">[ subject ]</a>
              <a href="author.html#2817">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
