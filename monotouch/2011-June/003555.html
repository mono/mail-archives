<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Anyone knows a workaround for bug in Sqlite on iPad - or tell me what I am doing wrong.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Anyone%20knows%20a%20workaround%20for%20bug%20in%20Sqlite%20on%20iPad%20-%0A%20or%20tell%20me%20what%20I%20am%20doing%20wrong.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003554.html">
   <LINK REL="Next"  HREF="003556.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Anyone knows a workaround for bug in Sqlite on iPad - or tell me what I am doing wrong.</H1>
    <B>Anders Kj&#230;rgaard Hansen</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Anyone%20knows%20a%20workaround%20for%20bug%20in%20Sqlite%20on%20iPad%20-%0A%20or%20tell%20me%20what%20I%20am%20doing%20wrong.&In-Reply-To="
       TITLE="[MonoTouch] Anyone knows a workaround for bug in Sqlite on iPad - or tell me what I am doing wrong.">Anders.Kjaergaard.Hansen at logimatic.dk
       </A><BR>
    <I>Thu Jun  9 03:46:15 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003554.html">[MonoTouch] works in simulator, not so much on device
</A></li>
        <LI>Next message: <A HREF="003556.html">[MonoTouch] Anyone knows a workaround for bug in Sqlite on iPad - or tell me what I am doing wrong.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3555">[ date ]</a>
              <a href="thread.html#3555">[ thread ]</a>
              <a href="subject.html#3555">[ subject ]</a>
              <a href="author.html#3555">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am developing an iPad application, and is using the Sqlite database for data storage (Mono.Data.Sqlite)

Sometimes my queries fail and the ipad app crashes. No exceptions, it just crashes.

The stacktrace I get is similar to the one described in this bug report <A HREF="https://bugzilla.novell.com/show_bug.cgi?id=696025.">https://bugzilla.novell.com/show_bug.cgi?id=696025.</A>

To sum up the important lines of the stacktrace is:
  at (wrapper managed-to-native) Mono.Data.Sqlite.UnsafeNativeMethods.sqlite3_prepare (intptr,intptr,int,intptr&amp;,intptr&amp;) &lt;IL 0x0002a, 0xffffffff&gt;
  at Mono.Data.Sqlite.SQLite3.Prepare (Mono.Data.Sqlite.SqliteConnection,string,Mono.Data.Sqlite.SqliteStatement,uint,string&amp;) [0x00044] in
      /Developer/MonoTouch/Source/mono/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLite3.cs:258
  at Mono.Data.Sqlite.SqliteCommand.BuildNextCommand () [0x00019] in
      /Developer/MonoTouch/Source/mono/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLiteCommand.cs:230
 ...
  at Mono.Data.Sqlite.SqliteCommand.ExecuteNonQuery () [0x00000] in
      /Developer/MonoTouch/Source/mono/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLiteCommand.cs:568
  at MYAPP.db.DbController.ExecuteNonQuery (Mono.Data.Sqlite.SqliteCommand) [0x00027] in
      /Users/MYUSERNAME/Code/PRODUCT/trunk/IPAD_APP/IPAD_APP/db/DbController.cs:773
  at MYAPP.db.DbController.SaveInspectionJobHistory (PRODUCT.ServiceApi.InspectionJobHistory) [0x00274] in
      /Users/MYUSERNAME/Code/PRODUCT/trunk/IPAD_APP/IPAD_APP/db/DbController.cs:360

I have tried to ensure that my app only executes one sql statement at a time, but the issue still appears. It also seems random if the bug occurs in ExecuteNonQuery or ExecuteReader statements.

Does anyone know why this appears, and more importantly, does anyone have some hints at what I am doing wrong that can cause this to appear.

We are getting close to launching the app, and I am considering changing the datastore to something else if I don't feel confident with the Sqlite implementation in MonoTouch.

Best regards
/Anders


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110609/80f90bfa/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110609/80f90bfa/attachment.html</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003554.html">[MonoTouch] works in simulator, not so much on device
</A></li>
	<LI>Next message: <A HREF="003556.html">[MonoTouch] Anyone knows a workaround for bug in Sqlite on iPad - or tell me what I am doing wrong.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3555">[ date ]</a>
              <a href="thread.html#3555">[ thread ]</a>
              <a href="subject.html#3555">[ subject ]</a>
              <a href="author.html#3555">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
