<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] SIGSEGV while executing native code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20SIGSEGV%20while%20executing%20native%20code&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005568.html">
   <LINK REL="Next"  HREF="005573.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] SIGSEGV while executing native code</H1>
    <B>Guido Van Hoecke</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20SIGSEGV%20while%20executing%20native%20code&In-Reply-To="
       TITLE="[MonoTouch] SIGSEGV while executing native code">guivho at gmail.com
       </A><BR>
    <I>Fri Oct  7 06:56:59 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005568.html">[MonoTouch] MT 4.9 Beta &amp; iOS SDK 5 &amp; iOS 4 device
</A></li>
        <LI>Next message: <A HREF="005573.html">[MonoTouch] SIGSEGV while executing native code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5572">[ date ]</a>
              <a href="thread.html#5572">[ thread ]</a>
              <a href="subject.html#5572">[ subject ]</a>
              <a href="author.html#5572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Can somebody explain following error?

I get sigsegv errors in an app under development. I separated the
'offending' code to demonstrate the problem. Just create a new
empty monotouch project and replace the FinishedLaunching method:

        public override bool FinishedLaunching (UIApplication app,
NSDictionary options)
        {
            window = new UIWindow (UIScreen.MainScreen.Bounds);
            var view = new  UIView(UIScreen.MainScreen.Bounds);
            var label = new UILabel(new RectangleF(0, 0,
view.Bounds.Size.Width, view.Bounds.Size.Height));
            label.TextAlignment = UITextAlignment.Center;
            label.Text = &quot;hi there&quot;;
            view.AddSubview(label);
            var toolBar = new UIToolbar (
                new RectangleF(0, view.Bounds.Size.Height - 44f,
view.Bounds.Size.Width, 44f));
            var button = new UIBarButtonItem {
                Title = &quot;button&quot;,
                Style = UIBarButtonItemStyle.Bordered };
            button.Clicked += delegate {
                using (var alert = new UIAlertView {Title = &quot;alert&quot;,
Message = &quot;message&quot; }) {
                    alert.AddButton(&quot;yes&quot;);
                    alert.AddButton(&quot;no&quot;);
                    alert.Clicked += delegate(object sender,
UIButtonEventArgs e) {
                        if (e.ButtonIndex == 0) {
                            label.Text = &quot;we got a 'yes'&quot;;
                        } else {
                            label.Text = &quot;too bad...&quot;;
                        }
                    };
                    alert.Show();
                }
            };
            var flex = new UIBarButtonItem(UIBarButtonSystemItem.FlexibleSpace);
            toolBar.SetItems(new[] {flex, button, flex}, false);
            view.AddSubview(toolBar);
            window.AddSubview (view);
            window.MakeKeyAndVisible ();
            return true;
        }

When you run this app from MD, either targeting
Release/iPhoneSimulator or Debug/iPhoneSimulator, the app
randomly crashes when hitting the 'button' or one of the 'yes' or
'no' buttons on the alertview. Funny thing is that the app does
not crash when started from the simulator. It works just fine
then. The error only occurs when running under control of MD.

This is probably a Garbage Collector error. The error happens at
different times: sometimes only when hitting the 'yes' or 'no'
button, sometimes even after showing the alertview, before a
button can be pressed.

Stacktrace:

  at (wrapper managed-to-native)
MonoTouch.UIKit.UIApplication.UIApplicationMain
(int,string[],intptr,intptr) &lt;IL 0x0009f, 0xffffffff&gt;
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string)
[0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29
  at Sigsegv.Application.Main (string[]) &lt;IL 0x00007, 0x00017&gt;
  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_void_object
(object,intptr,intptr,intptr) &lt;IL 0x00050, 0xffffffff&gt;

Native stacktrace:

	0   Sigsegv                             0x000d1e9c
mono_handle_native_sigsegv + 343
	1   Sigsegv                             0x000100e0
mono_sigsegv_signal_handler + 322
	2   libsystem_c.dylib                   0x99b8659b _sigtramp + 43
	3   ???                                 0xffffffff 0x0 + 4294967295
	4   UIKit                               0x01cd84fd -[UIApplication
sendAction:to:from:forEvent:] + 119
	5   UIKit                               0x01d68799 -[UIControl
sendAction:to:forEvent:] + 67
	6   UIKit                               0x01d6ac2b
-[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
	7   UIKit                               0x01d697d8 -[UIControl
touchesEnded:withEvent:] + 458
	8   UIKit                               0x01cfcded -[UIWindow
_sendTouchesForEvent:] + 567
	9   UIKit                               0x01cddc37 -[UIApplication
sendEvent:] + 447
	10  UIKit                               0x01ce2f2e
_UIApplicationHandleEvent + 7576
	11  GraphicsServices                    0x04053992 PurpleEventCallback + 1550
	12  CoreFoundation                      0x00ea6944
__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
	13  CoreFoundation                      0x00e06cf7 __CFRunLoopDoSource1 + 215
	14  CoreFoundation                      0x00e03f83 __CFRunLoopRun + 979
	15  CoreFoundation                      0x00e03840 CFRunLoopRunSpecific + 208
	16  CoreFoundation                      0x00e03761 CFRunLoopRunInMode + 97
	17  GraphicsServices                    0x040521c4 GSEventRunModal + 217
	18  GraphicsServices                    0x04052289 GSEventRun + 115
	19  UIKit                               0x01ce6c93 UIApplicationMain + 1160
	20  ???                                 0x077f6b0c 0x0 + 125790988
	21  ???                                 0x077f5db8 0x0 + 125787576
	22  ???                                 0x077f5c50 0x0 + 125787216
	23  ???                                 0x077f5cdf 0x0 + 125787359
	24  Sigsegv                             0x0000fe9b
mono_jit_runtime_invoke + 1332
	25  Sigsegv                             0x001ee961 mono_runtime_invoke + 137
	26  Sigsegv                             0x001f1048 mono_runtime_exec_main + 669
	27  Sigsegv                             0x001f0432 mono_runtime_run_main + 843
	28  Sigsegv                             0x000a3f9e mono_jit_exec + 200
	29  Sigsegv                             0x002a3d21 main + 3733
	30  Sigsegv                             0x00003179 _start + 208
	31  Sigsegv                             0x000030a8 start + 40

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================


Any help or advice, any one?


Guido.
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005568.html">[MonoTouch] MT 4.9 Beta &amp; iOS SDK 5 &amp; iOS 4 device
</A></li>
	<LI>Next message: <A HREF="005573.html">[MonoTouch] SIGSEGV while executing native code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5572">[ date ]</a>
              <a href="thread.html#5572">[ thread ]</a>
              <a href="subject.html#5572">[ subject ]</a>
              <a href="author.html#5572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
