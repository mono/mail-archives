<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Weird exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Weird%20exception&In-Reply-To=CALqoN0bbv1jo%3Djg1_%3DJy8LXHiszw%3D2VFAA2C0y31Si2fQcmTcQ%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005553.html">
   <LINK REL="Next"  HREF="005555.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Weird exception</H1>
    <B>Dean Cleaver</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Weird%20exception&In-Reply-To=CALqoN0bbv1jo%3Djg1_%3DJy8LXHiszw%3D2VFAA2C0y31Si2fQcmTcQ%40mail.gmail.com"
       TITLE="[MonoTouch] Weird exception">dean.cleaver at xceptionsoftware.com
       </A><BR>
    <I>Thu Oct  6 20:52:47 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005553.html">[MonoTouch] Weird exception
</A></li>
        <LI>Next message: <A HREF="005555.html">[MonoTouch] Creating UITableViewCells the proper way?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5558">[ date ]</a>
              <a href="thread.html#5558">[ thread ]</a>
              <a href="subject.html#5558">[ subject ]</a>
              <a href="author.html#5558">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry Jeff - didn't see this. I'll see if I can put together a sample, but I'm just swamped at the moment.

Dino

From: Jeff Stedfast [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">jeff at xamarin.com</A>]
Sent: Thursday, October 06, 2011 5:32 PM
To: Dean Cleaver
Cc: Forums, MonoTouch (<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>)
Subject: Re: [MonoTouch] Weird exception

Hi Dean,

Did you ever get this resolved? If not, could you submit a bug report to <A HREF="http://bugzilla.xamarin.com">http://bugzilla.xamarin.com</A> (preferably with a sample test case) so that someone can look deeper into this issue? Unfortunately, like you, I'm not seeing anything obviously wrong in the code snippet you provided.

Thanks!

Jeff
On Wed, Sep 28, 2011 at 11:47 PM, Dean Cleaver &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">dean.cleaver at xceptionsoftware.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">dean.cleaver at xceptionsoftware.com</A>&gt;&gt; wrote:
Hi,

I'm getting this exception reported to me:


System.ObjectDisposedException: The object was used after being disposed.

  at MonoTouch.AVFoundation.InternalAVAudioPlayerDelegate.FinishedPlaying (MonoTouch.AVFoundation.AVAudioPlayer player, Boolean flag) [0x00000] in &lt;filename unknown&gt;:0

  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00000] in &lt;filename unknown&gt;:0

  at KleverLogic.FlashValet.iPhone.Valet.Application.Main (System.String[] args) [0x000ed] in /xsl-home/kleverlogic/FlashValet20110906/Mobile/iPhone/Valet/Main.cs:62

No - only lines of code that are mine is the &quot;Main&quot; function in the Application.

I've searched the entire solution for &quot;FinishedPlaying&quot; and every reference to that event has error handling, and specifically handles ObjectDisposedException. For example:

private static void HandlePlayerhandleFinishedPlaying (object sender, AVStatusEventArgs e)
{
                try
                {
                                if (player != null)
                                                player.Dispose();

                                player = null;
                }
                catch (ObjectDisposedException)
                {
                                player = null;
                }
                catch (Exception ex)
                {
                                AppDelegate.CurrentAppDelegate.SendError(ex);
                }
}

How is this possible? There's only 2 effectively identical functions in my code. The other one checks a static Boolean, and if set calls Play() again - but has the same ObjectDisposedException trap, yet somehow I am still getting error reports back from the SendError function.

Looks to me like the exception is actually something in the MonoTouch.AVFoundation.InternalAVAudioPlayerDelegate.FinishedPlaying (MonoTouch.AVFoundation.AVAudioPlayer player, Boolean flag) function, and not in my code?

This is all new with MonoTouch 4.2 - this exact code (actually, without the ObjectDisposedExceptions) has been working perfectly for a while now on 4.0.6.

Dino

_______________________________________________
MonoTouch mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>&lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>&gt;
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20111007/5eee7fa7/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20111007/5eee7fa7/attachment.html</A> 
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005553.html">[MonoTouch] Weird exception
</A></li>
	<LI>Next message: <A HREF="005555.html">[MonoTouch] Creating UITableViewCells the proper way?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5558">[ date ]</a>
              <a href="thread.html#5558">[ thread ]</a>
              <a href="subject.html#5558">[ subject ]</a>
              <a href="author.html#5558">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
