<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] SDK 5 issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20SDK%205%20issue&In-Reply-To=CANfFwGTZ9QTCabPBWafFPT0%2B_%3DvMSuseA-qpm8Ft1%3D_NncHXxw%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005816.html">
   <LINK REL="Next"  HREF="005874.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] SDK 5 issue</H1>
    <B>Sergio Fadda</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20SDK%205%20issue&In-Reply-To=CANfFwGTZ9QTCabPBWafFPT0%2B_%3DvMSuseA-qpm8Ft1%3D_NncHXxw%40mail.gmail.com"
       TITLE="[MonoTouch] SDK 5 issue">sergio.fadda at logobject.ch
       </A><BR>
    <I>Tue Oct 18 03:14:47 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005816.html">[MonoTouch] SDK 5 issue
</A></li>
        <LI>Next message: <A HREF="005874.html">[MonoTouch] SDK 5 issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5851">[ date ]</a>
              <a href="thread.html#5851">[ thread ]</a>
              <a href="subject.html#5851">[ subject ]</a>
              <a href="author.html#5851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you very much,
actually I solved the problem moving only the controllers in AppDelegate 
and MyController (that is, _navCtrl and menuCtrl): since references of 
views, toolbar, etc. are retained by the controllers the GC should not 
remove them when the scopes terminate.

Thank you again!

Il 17/10/2011 17:06, Nic Wise ha scritto:
&gt;<i> ignore the bit about __mt_window :) I thought you were using a XIB and
</I>&gt;<i> a partial class, which does this for you. (ie, how the default
</I>&gt;<i> template does it)
</I>&gt;<i>
</I>&gt;<i> On Mon, Oct 17, 2011 at 16:06, Nic Wise&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">nicw at fastchicken.co.nz</A>&gt;  wrote:
</I>&gt;&gt;<i> Try moving all the declarations out of FinishedLaunching, eg:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                private MonoTouch.UIKit.UIWindow __mt_window;
</I>&gt;&gt;&gt;<i>                private UITextField _txtField;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> THEY should be here!
</I>&gt;&gt;<i>       MyController ctrl1;
</I>&gt;&gt;<i>       UIView mainView;
</I>&gt;&gt;<i>       UIToolbar toolbar;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                public override bool FinishedLaunching (UIApplication app, NSDictionary
</I>&gt;&gt;&gt;<i> options)
</I>&gt;&gt;&gt;<i>                {
</I>&gt;&gt;&gt;<i>                        __mt_window = new UIWindow(UIScreen.MainScreen.Bounds);
</I>&gt;&gt;&gt;<i>                        __mt_window.BackgroundColor = UIColor.White;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> why are you using __mt_window? use the window property, which talks to
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                        MyController ctrl1 = new MyController();
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                        UIView mainView = new UIView(UIScreen.MainScreen.Bounds);
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> NOT HERE!
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                        UIToolbar toolbar = new UIToolbar(new RectangleF(0, 0, 320, 30));
</I>&gt;&gt;&gt;<i>                        toolbar.Items = new[]
</I>&gt;&gt;&gt;<i>                        {
</I>&gt;&gt;&gt;<i>                                new UIBarButtonItem(UIBarButtonSystemItem.FlexibleSpace),
</I>&gt;&gt;&gt;<i>                                new UIBarButtonItem(UIBarButtonSystemItem.Done, HandleDoneButton)
</I>&gt;&gt;&gt;<i>                        };
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> OR HERE - move UIToolbar out into a class-level variable
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Native stacktrace:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>        0   MTFailure                           0x000d5c18
</I>&gt;&gt;&gt;<i> mono_handle_native_sigsegv + 408
</I>&gt;&gt;<i> SIGSEGV is a Signal for a Segment Violation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> AKA a Null Pointer Exception.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All those things above will be getting GC'ed before you get to use
</I>&gt;&gt;<i> them. The GC in the newer version of MT is (I beleive) a LOT more
</I>&gt;&gt;<i> agressive, so things going out of scope get cleaned up quickly.
</I>&gt;&gt;<i> Putting them in as class var's stops that.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> N
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Nic Wise
</I>&gt;&gt;<i> t.  +44 7788 592 806 | @fastchicken | <A HREF="http://www.linkedin.com/in/nicwise">http://www.linkedin.com/in/nicwise</A>
</I>&gt;&gt;<i> b. <A HREF="http://www.fastchicken.co.nz/">http://www.fastchicken.co.nz/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Nearest Bus: find when the next bus is coming to your stop. <A HREF="http://goo.gl/Vcz1p">http://goo.gl/Vcz1p</A>
</I>&gt;&gt;<i> mobileAgent (for FreeAgent): get your accounts in your pocket.
</I>&gt;&gt;<i> <A HREF="http://goo.gl/IuBU">http://goo.gl/IuBU</A>
</I>&gt;&gt;<i> Trip Wallet: Keep track of your budget on the go: <A HREF="http://goo.gl/ePhKa">http://goo.gl/ePhKa</A>
</I>&gt;&gt;<i> London Bike App: Find the nearest Boris Bike, and get riding! <A HREF="http://goo.gl/Icp2">http://goo.gl/Icp2</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
------------------------------------------------------------------------

Ai sensi del Codice in materia di protezione dei dati personali (d.L.vo 
196/03 e successive modifiche ed integrazioni), il contenuto di questa 
email e degli eventuali allegati sono riservati e ad uso esclusivo del 
destinatario. Chiunque riceva questo messaggio per errore &#232; pregato di 
distruggerlo e di contattare il mittente. Si informa inoltre che la 
risposta alla presente compresi eventuali allegati potrebbero essere 
visionati, ai fini del disbrigo delle competenze lavorative, anche da 
altro personale addetto.

This email and any files transmitted with it are confidential and solely 
for the use of the intended recipient. If you have received this email 
in error, please notify us immediately by email and permanently delete 
the email without reading, copying or disclosing its contents to any 
other person.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20111018/847f71e1/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20111018/847f71e1/attachment.html</A> 
</PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005816.html">[MonoTouch] SDK 5 issue
</A></li>
	<LI>Next message: <A HREF="005874.html">[MonoTouch] SDK 5 issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5851">[ date ]</a>
              <a href="thread.html#5851">[ thread ]</a>
              <a href="subject.html#5851">[ subject ]</a>
              <a href="author.html#5851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
