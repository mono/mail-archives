<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Multi-lingual
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Multi-lingual&In-Reply-To=CACWhsM-GR%3Dnjq9jQVYkWqp%3D9Cj%2B%2Byh4Xrx1wOxY%3DofA5cjwQnw%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005580.html">
   <LINK REL="Next"  HREF="005567.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Multi-lingual</H1>
    <B>Karl Heinz Brehme Arredondo</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Multi-lingual&In-Reply-To=CACWhsM-GR%3Dnjq9jQVYkWqp%3D9Cj%2B%2Byh4Xrx1wOxY%3DofA5cjwQnw%40mail.gmail.com"
       TITLE="[MonoTouch] Multi-lingual">karl at e-magesolutions.com
       </A><BR>
    <I>Fri Oct  7 11:51:41 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005580.html">[MonoTouch] Multi-lingual
</A></li>
        <LI>Next message: <A HREF="005567.html">[MonoTouch] MT 4.9 Beta &amp; iOS SDK 5 &amp; iOS 4 device
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5582">[ date ]</a>
              <a href="thread.html#5582">[ thread ]</a>
              <a href="subject.html#5582">[ subject ]</a>
              <a href="author.html#5582">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you just need languages without crossing platforms, the cocoa native way
is good.

In my case, where I'm moving from Windows Mobile to all new devices
nowadays, the best thing would be .NET ways of localization, with resx for
forms and strings. Specially because iOS do not support es-MX, es-CH,
es-VE... You just have an &quot;es&quot; folder for generic spanish. Indeed, on
windows visual studio designer you can put a form field and label that has
some text, size, and also visibility, configured automatically when you
change es-MX to es-CH to .NET handles it to you (yes since old compact
framework). So I need this functionality.

The thing is, this do not execute correctly yet on iOS, and you just get
strings, no integration with Interface Builder.

So what I made to try to use the best things and have cross platform
compatibility was a mix of all this:
- Login screen, that do not have database, uses the native platform way for
localization, no need to es-MX and es-CH for user, password and OK&#138;
- After it subscribes to the database, downloading tables and data, it
download a Library table, that on server is has all strings with localized
text and all controls.properties as RESX do on Windows.Forms
- All UI made on Interface Builder if it don't find on runtime a localized
text, it gets the default defined on IB. If it find what is configured on
CurrentCulture, so it shows the localized text, hide controls or not, change
size an position, as on Windows.Forms, I mean, in Brazil person ID called RG
has 2 common info, like a number and another thing, like
Region/Country/State. On Chile they have just RUT, a number. So when
MonTouch will show the view, it id find on sqlite the localized library info
for each control, it will show on chile RUT on ID label and will hide the
second ComboBox (ok UIPicker or whatever) and if you change iOS to pr-BR it
will show RG on ID label and 2 fields. All being automatic.
- All text like messages, or whatever that is write on code, wil be get with
something like Library.GetText(&quot;TextID&quot;) to get localized text

Now this can run on web (ASP.NET with SQL Server or whatever you want),
Silverlight, Windows.Forms (like Windows Mobile), Windows Phone and Android&#138;
Ok, I need to discard native Windows localization but it runs in the same
way, and with de advantage if I need to now put italian, you just need to
record that on server, than all devices on next sync will get italian
library without recompilation. Also translators can enter on browser or
silverlight to review or insert translations on the fly and all version will
be translated/corrected on next sync (windows, androis and iOS).

Karl

From:  G&#246;ran Halvarsson &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">goranhalvarsson at gmail.com</A>&gt;
Date:  Fri, 7 Oct 2011 15:35:06 +0200
To:  Mittchel Van Vliet &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">mittchel at gmail.com</A>&gt;
Cc:  &quot;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>&gt;
Subject:  Re: [MonoTouch] Multi-lingual

Hello

I made something similar, but in stead of using DB I used good old
localizable folders:
sv.proj
--Localizable.strings
en.proj
--Localizable.strings

In the &quot;swedish&quot; Localizable.strings:
&quot;Offers&quot; = &quot;Erbjudande&quot;;
&quot;Barcode&quot; = &quot;Streckkod&quot;

Display a label:
Locale.GetText (&quot;Offers&quot;);

Switch Language, let say you have a settings view where you select a
language:
Locale.ChangeCulture(MyApp.Instance.CurrentUser.Culture);

Don't forget to reload your view after the &quot;switch&quot;. I did a flip
animation to spice it up...
Task.Factory.StartNew( () =&gt; ReloadView() );


private void ReloadView()
{
InvokeOnMainThread(delegate {
//Flip the view
UIView.BeginAnimations(&quot;Flipper&quot;);
UIView.SetAnimationDuration(1.25);
UIView.SetAnimationCurve(UIViewAnimationCurve.EaseInOut);
UIView.SetAnimationTransition
(UIViewAnimationTransition.FlipFromRight, _tabbarController.View ,
true);
_tabbarController.ViewWillDisappear(true);
_tabbarController.ViewWillAppear(true);
UIView.CommitAnimations();
});
}


The class:
public static class Locale
{
public static CultureInfo DefaultCultureInfo = new CultureInfo(&quot;sv-SE&quot;);
private static CultureInfo _currentCultureInfo = DefaultCultureInfo;
public static void ChangeCulture(string cultureInfo)
{
_currentCultureInfo = new CultureInfo(cultureInfo);
}
public static CultureInfo GetPhoneCultureInfo()
{
return new 
CultureInfo(NSLocale.CurrentLocale.LocaleIdentifier.Replace(&quot;_&quot;,&quot;-&quot;));
}
public static string GetText (string str)
{
string path = null;
path = 
NSBundle.MainBundle.PathForResource(_currentCultureInfo.TwoLetterISOLanguage
Name.ToLower(),&quot;lproj&quot;);
NSBundle languageBundle = NSBundle.FromPath(path);
return languageBundle.LocalizedString(str,string.Empty);
}

public static string Format (string fmt, params object [] args)
{
fmt = NSBundle.MainBundle.LocalizedString(fmt,&quot;&quot;);
return String.Format (fmt, args);
}


    public static CultureInfo GetCultureInfo(string countryCode)
    {
        CultureInfo currentCulture = null;

        foreach (CultureInfo ci in
CultureInfo.GetCultures(CultureTypes.AllCultures))
        {

            if (ci.Name.ToLower().Contains(countryCode.ToLower()))
            {

                currentCulture = ci;
                break;
            }



        }

        return currentCulture;

    }
}
That's it really...
(I must say that I just love the System.Threading.Task.Factory:
<A HREF="http://www.codethinked.com/net-40-and-systemthreadingtasks">http://www.codethinked.com/net-40-and-systemthreadingtasks</A>)

I hope it will help you.

Br
G&#246;ran
_______________________________________________
MonoTouch mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20111007/b435aef8/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20111007/b435aef8/attachment.html</A> 
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005580.html">[MonoTouch] Multi-lingual
</A></li>
	<LI>Next message: <A HREF="005567.html">[MonoTouch] MT 4.9 Beta &amp; iOS SDK 5 &amp; iOS 4 device
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5582">[ date ]</a>
              <a href="thread.html#5582">[ thread ]</a>
              <a href="subject.html#5582">[ subject ]</a>
              <a href="author.html#5582">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
