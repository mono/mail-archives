<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] UIDocumentInteractionController Question/Problem only	with iOS 5.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20UIDocumentInteractionController%20Question/Problem%20only%0A%09with%20iOS%205.0&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006215.html">
   <LINK REL="Next"  HREF="006246.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] UIDocumentInteractionController Question/Problem only	with iOS 5.0</H1>
    <B>Danny Pronk</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20UIDocumentInteractionController%20Question/Problem%20only%0A%09with%20iOS%205.0&In-Reply-To="
       TITLE="[MonoTouch] UIDocumentInteractionController Question/Problem only	with iOS 5.0">dpronk at probe-asp.eu
       </A><BR>
    <I>Fri Oct 28 07:27:21 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006215.html">[MonoTouch] web-services vs alternative
</A></li>
        <LI>Next message: <A HREF="006246.html">[MonoTouch] UIDocumentInteractionController Question/Problem only with iOS 5.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6210">[ date ]</a>
              <a href="thread.html#6210">[ thread ]</a>
              <a href="subject.html#6210">[ subject ]</a>
              <a href="author.html#6210">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am using the following code to display the OpenInMenu.
On the iPhone when the UIDocumentInteractionController is shown, you can see
a cancel button, and there things work like clockwork.

However on the iPad (both with iOS 4.3 and iOS 5.0) you see the applications
where you can open the file with, but NO cancel button is visible.

When the OpenInMenu is visible and you click somewhere outside the menu it
disappears but still remains active in memory.
Is my problem related to the RectangleF size or am I missing something
essential how to give the user the dismiss option on the iPad !

The strange thing is that on an iPad with iOS 4.3 things seem to work ok,
but on and iPad with iOS 5.0 the DidDissmissOpenInMenu is NEVER fired.

Please help. (I have found this code on StackOverflow and until iOS 5.0
things worked like expected!


Below you find the code I am using.
using (var pool = new NSAutoreleasePool()) {

UIDocumentInteractionController docControl =
UIDocumentInteractionController.FromUrl(nsurl);

docControl.Delegate = new
Dialogs.UIDocumentInteractionControllerDelegateClass();

docControl.DidDismissOpenInMenu += HandleDocControlDidDismissOpenInMenu;

docControl.DidEndSendingToApplication +=
HandleDocControlDidEndSendingToApplication;

docControl.

docControl.InvokeOnMainThread(

               delegate {

if(_webView.IsFirstResponder)

_webView.ResignFirstResponder();

RectangleF theScreenSize = UIScreen.MainScreen.Bounds;

                float width = theScreenSize.Width;

bool isValid = docControl.PresentOpenInMenu(new RectangleF(width-40,0,0,20),
_viewController.View,false);

if(!isValid)

{

UIAlertView avAlert = new
UIAlertView(_viewController.Language.FieldValue(&quot;reader_title&quot;),
_viewController.Language.FieldValue(&quot;reader_message&quot;),
null,_viewController.Language.FieldValue(&quot;reader_close&quot;));

avAlert.AutoresizingMask = UIViewAutoresizing.FlexibleLeftMargin |
UIViewAutoresizing.FlexibleTopMargin;

avAlert.Show(); 

}

} ); 

}




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20111028/ae9192c6/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20111028/ae9192c6/attachment.html</A> 
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006215.html">[MonoTouch] web-services vs alternative
</A></li>
	<LI>Next message: <A HREF="006246.html">[MonoTouch] UIDocumentInteractionController Question/Problem only with iOS 5.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6210">[ date ]</a>
              <a href="thread.html#6210">[ thread ]</a>
              <a href="subject.html#6210">[ subject ]</a>
              <a href="author.html#6210">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
