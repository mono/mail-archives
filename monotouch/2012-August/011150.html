<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Ensure Invoked on Main Thread (Performant???)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Ensure%20Invoked%20on%20Main%20Thread%20%28Performant%3F%3F%3F%29&In-Reply-To=%3CCAP-t259%3DY7oqgyu%3DASKhS7kG1X_9t_ifU33XCWPOK%3DwwgsRfhQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011149.html">
   <LINK REL="Next"  HREF="011157.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Ensure Invoked on Main Thread (Performant???)</H1>
    <B>Rolf Bjarne Kvinge</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Ensure%20Invoked%20on%20Main%20Thread%20%28Performant%3F%3F%3F%29&In-Reply-To=%3CCAP-t259%3DY7oqgyu%3DASKhS7kG1X_9t_ifU33XCWPOK%3DwwgsRfhQ%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Ensure Invoked on Main Thread (Performant???)">rolf at xamarin.com
       </A><BR>
    <I>Tue Aug  7 10:56:57 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011149.html">[MonoTouch] Ensure Invoked on Main Thread (Performant???)
</A></li>
        <LI>Next message: <A HREF="011157.html">[MonoTouch] Ensure Invoked on Main Thread (Performant???)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11150">[ date ]</a>
              <a href="thread.html#11150">[ thread ]</a>
              <a href="subject.html#11150">[ subject ]</a>
              <a href="author.html#11150">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

There are likely more efficient ways to this.

One way would be to have a [ThreadStatic] variable which you set to true in
your Main method. That way it'll only be true for the main thread.

The only way to really tell what is faster though is to actually measure
the difference (and do you actually know that this code is called a lot in
your app? If not, it won't be a problem. Have in mind that anything
UI-related will likely drown this piece of code completely).

Best regards,
Rolf

On Tue, Aug 7, 2012 at 12:43 PM, Phil Cockfield &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">phil at cockfield.net</A>&gt; wrote:

&gt;<i> I've got some same code which is designed to make sure an Action is
</I>&gt;<i> invoked on the UI thread.
</I>&gt;<i> Here it is here:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://gist.github.com/3284433">https://gist.github.com/3284433</A>
</I>&gt;<i>
</I>&gt;<i> It uses this to determine if it's running on the UI thread.  Is code the
</I>&gt;<i> most efficient way to do this?  It seems a bit baroque to be marshalling
</I>&gt;<i> out over a *bool_objc_msgSend *type method.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       private static bool IsMainThread()
</I>&gt;<i>
</I>&gt;<i>     {
</I>&gt;<i>
</I>&gt;<i>       return Messaging.bool_objc_msgSend(GetClassHandle(&quot;NSThread&quot;), newSelector(
</I>&gt;<i> &quot;isMainThread&quot;).Handle);
</I>&gt;<i>
</I>&gt;<i>     }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> *Phil *Cockfield
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120807/3c85ab3e/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120807/3c85ab3e/attachment.html</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011149.html">[MonoTouch] Ensure Invoked on Main Thread (Performant???)
</A></li>
	<LI>Next message: <A HREF="011157.html">[MonoTouch] Ensure Invoked on Main Thread (Performant???)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11150">[ date ]</a>
              <a href="thread.html#11150">[ thread ]</a>
              <a href="subject.html#11150">[ subject ]</a>
              <a href="author.html#11150">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
