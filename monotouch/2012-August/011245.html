<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Thoughts on IntPtr constructor in UITableViewController - need feedback from MonoTouch team
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Thoughts%20on%20IntPtr%20constructor%20in%0A%20UITableViewController%20-%20need%20feedback%20from%20MonoTouch%20team&In-Reply-To=%3CCANfFwGRDhN1YcMYvgyL3NX7%2BrR1_Gu8LaRGmQnTLFPVtLXUGSg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011227.html">
   <LINK REL="Next"  HREF="011263.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Thoughts on IntPtr constructor in UITableViewController - need feedback from MonoTouch team</H1>
    <B>Nic Wise</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Thoughts%20on%20IntPtr%20constructor%20in%0A%20UITableViewController%20-%20need%20feedback%20from%20MonoTouch%20team&In-Reply-To=%3CCANfFwGRDhN1YcMYvgyL3NX7%2BrR1_Gu8LaRGmQnTLFPVtLXUGSg%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Thoughts on IntPtr constructor in UITableViewController - need feedback from MonoTouch team">nicw at fastchicken.co.nz
       </A><BR>
    <I>Mon Aug 13 19:00:26 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011227.html">[MonoTouch] Thoughts on IntPtr constructor in UITableViewController - need feedback from MonoTouch team
</A></li>
        <LI>Next message: <A HREF="011263.html">[MonoTouch] Thoughts on IntPtr constructor in UITableViewController - need feedback from MonoTouch team
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11245">[ date ]</a>
              <a href="thread.html#11245">[ thread ]</a>
              <a href="subject.html#11245">[ subject ]</a>
              <a href="author.html#11245">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You really need Sebastian to do the definitive reply (again - he's
done it a few times), but my understanding is that it's caused when:

you have an object which has a Obj-C/unmanaged peer (eg UITableViewController)

you release it, so the GC releases the managed version. the unmanaged
side doesn't as the ref-count isn't 0.

something in ObjC/unmanaged says &quot;hey, I want to use that object&quot;, and
the ObjC/native part of your app trys to recreate the managed peer....
which it can't do unless you have the intptr constructor (and even
then, it wouldn't have your state in it)

That might help, but it can depend on your situation.

&gt;<i> UIImage's PNG loading is asynchronous (this is a fact).
</I>
FromFile is. FromBundle isn't (or is it the other way around?)

&gt;<i> If I have a UITableView now (together with its controller) that is using
</I>&gt;<i> cells and those in turns use PNGs, the cell might be loaded and used before
</I>&gt;<i> the PNG has been loaded, right?
</I>
In theory yes.

&gt;<i> This again is leading me to the conclusion: if the UITableView and/or its
</I>&gt;<i> controller is already gone (removed from the view hierarchy and no longer
</I>&gt;<i> referenced by managed code) before UIImage has finished loading, could it
</I>&gt;<i> then happen that the UITableViewController gets resurrected via the IntPtr
</I>&gt;<i> c'tor?
</I>
I suspect it could, but it sounds like a bit of an edgy-edge-case. I
guess this is what you are seeing? Can you change your load to be the
other one (FromFile -&gt; FromBundle or the other way)?

&gt;<i> Why am I asking? Because most of the IntPtr calls seem to happen in
</I>&gt;<i> combination with table views and I'm wondering if the above scenario could
</I>&gt;<i> cause it.
</I>
Other than the above, I'll leave it to those who jump in with machine
level debuggers. :)

N


-- 
Nic Wise
t.  +44 7788 592 806 | @fastchicken | <A HREF="http://www.linkedin.com/in/nicwise">http://www.linkedin.com/in/nicwise</A>
b. <A HREF="http://www.fastchicken.co.nz/">http://www.fastchicken.co.nz/</A>

mobileAgent (for FreeAgent): get your accounts in your pocket.
<A HREF="http://goo.gl/IuBU">http://goo.gl/IuBU</A>
Trip Wallet: Keep track of your budget on the go: <A HREF="http://goo.gl/ePhKa">http://goo.gl/ePhKa</A>
Earnest: Self-employed? Track your business expenses and income.
<A HREF="http://earnestapp.com">http://earnestapp.com</A>
Nearest Bus: find when the next bus is coming to your stop. <A HREF="http://goo.gl/Vcz1p">http://goo.gl/Vcz1p</A>
London Bike App: Find the nearest Boris Bike, and get riding! <A HREF="http://goo.gl/Icp2">http://goo.gl/Icp2</A>
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011227.html">[MonoTouch] Thoughts on IntPtr constructor in UITableViewController - need feedback from MonoTouch team
</A></li>
	<LI>Next message: <A HREF="011263.html">[MonoTouch] Thoughts on IntPtr constructor in UITableViewController - need feedback from MonoTouch team
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11245">[ date ]</a>
              <a href="thread.html#11245">[ thread ]</a>
              <a href="subject.html#11245">[ subject ]</a>
              <a href="author.html#11245">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
