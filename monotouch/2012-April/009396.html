<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Crash in MonoTouch.Foundation.NSArray.ArrayFromHandle[NSDictionary] (IntPtr handle)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Crash%20in%0A%20MonoTouch.Foundation.NSArray.ArrayFromHandle%5BNSDictionary%5D%20%28IntPtr%20handle%29&In-Reply-To=%3CCAAEjJnF%3DVW6GHxUmgr7ULNBiU0AqW_3ZvYHxdDW8_xC3_xLimQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009395.html">
   <LINK REL="Next"  HREF="009403.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Crash in MonoTouch.Foundation.NSArray.ArrayFromHandle[NSDictionary] (IntPtr handle)</H1>
    <B>Jason Awbrey</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Crash%20in%0A%20MonoTouch.Foundation.NSArray.ArrayFromHandle%5BNSDictionary%5D%20%28IntPtr%20handle%29&In-Reply-To=%3CCAAEjJnF%3DVW6GHxUmgr7ULNBiU0AqW_3ZvYHxdDW8_xC3_xLimQ%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Crash in MonoTouch.Foundation.NSArray.ArrayFromHandle[NSDictionary] (IntPtr handle)">jason at awbrey.net
       </A><BR>
    <I>Mon Apr 30 13:04:11 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009395.html">[MonoTouch] Crash in MonoTouch.Foundation.NSArray.ArrayFromHandle[NSDictionary] (IntPtr handle)
</A></li>
        <LI>Next message: <A HREF="009403.html">[MonoTouch] Crash in MonoTouch.Foundation.NSArray.ArrayFromHandle[NSDictionary] (IntPtr handle)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9396">[ date ]</a>
              <a href="thread.html#9396">[ thread ]</a>
              <a href="subject.html#9396">[ subject ]</a>
              <a href="author.html#9396">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'd try having the user request the URL via Mobile Safari - just to see if
they are able to access it from their network or if their proxy blocks it
or does something else strange with it

also, I'd suggest not trying to load remote resources with XDocument.Load -
instead I'd load the data with an async HttpWebReqeust, then load it into
the XDocument.  That gives you a lot more granular control over identifying
and handling exceptions

On Mon, Apr 30, 2012 at 7:54 AM, Sebastien Pouliot &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">sebastien at xamarin.com</A>&gt;wrote:

&gt;<i> Hello Phillipe,
</I>&gt;<i>
</I>&gt;<i> On Mon, Apr 30, 2012 at 8:24 AM, activa &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">philippe at activa.be</A>&gt; wrote:
</I>&gt;<i> &gt; Ok, I finally managed to get a crash log, and it wasn't related to the
</I>&gt;<i> map
</I>&gt;<i> &gt; view at all.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The crash happens when calling XDocument.Load() with a URL.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This is the crash log:
</I>&gt;<i>
</I>&gt;<i> That's the managed stack trace (not a crash log) but that's much
</I>&gt;<i> better (90% of the time).
</I>&gt;<i>
</I>&gt;<i> Can you give us more details, e.g. do you know the URL being
</I>&gt;<i> downloaded, if the users are using a proxy (while you're not - or the
</I>&gt;<i> reverse)... and, if you want to track the progress on the issue, fill
</I>&gt;<i> everything into a bug report at <A HREF="http://bugzilla.xamarin.com">http://bugzilla.xamarin.com</A>
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i> Sebastien
</I>&gt;<i>
</I>&gt;<i> &gt; 2012-04-30 12:33:19 Exception: Cannot cast from source type to
</I>&gt;<i> destination
</I>&gt;<i> &gt; type.
</I>&gt;<i> &gt; 2012-04-30 12:33:19 at
</I>&gt;<i> &gt; MonoTouch.Foundation.NSArray.ArrayFromHandle[NSDictionary] (IntPtr
</I>&gt;<i> handle)
</I>&gt;<i> &gt; [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at MonoTouch.CoreFoundation.CFNetwork.GetProxiesForURL
</I>&gt;<i> &gt; (MonoTouch.Foundation.NSUrl url, MonoTouch.CoreFoundation.CFProxySettings
</I>&gt;<i> &gt; proxySettings) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at MonoTouch.CoreFoundation.CFNetwork.GetProxiesForUri (System.Uri uri,
</I>&gt;<i> &gt; MonoTouch.CoreFoundation.CFProxySettings proxySettings) [0x00000] in
</I>&gt;<i> &gt; &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at MonoTouch.CoreFoundation.CFNetwork+CFWebProxy.GetProxy (System.Uri
</I>&gt;<i> &gt; targetUri) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at MonoTouch.CoreFoundation.CFNetwork+CFWebProxy.IsBypassed (System.Uri
</I>&gt;<i> &gt; targetUri) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at System.Net.ServicePointManager.FindServicePoint (System.Uri address,
</I>&gt;<i> &gt; IWebProxy proxy) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at System.Net.HttpWebRequest.GetServicePoint () [0x00000] in &lt;filename
</I>&gt;<i> &gt; unknown&gt;:0
</I>&gt;<i> &gt; at System.Net.HttpWebRequest.BeginGetResponse (System.AsyncCallback
</I>&gt;<i> &gt; callback, System.Object state) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at System.Net.HttpWebRequest.GetResponse () [0x00000] in &lt;filename
</I>&gt;<i> &gt; unknown&gt;:0
</I>&gt;<i> &gt; at System.Xml.XmlUrlResolver.GetEntity (System.Uri absoluteUri,
</I>&gt;<i> &gt; System.String role, System.Type ofObjectToReturn) [0x00000] in &lt;filename
</I>&gt;<i> &gt; unknown&gt;:0
</I>&gt;<i> &gt; at Mono.Xml2.XmlTextReader.GetStreamFromUrl (System.String url,
</I>&gt;<i> &gt; System.String&amp; absoluteUriString) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at Mono.Xml2.XmlTextReader..ctor (Boolean dummy, System.Xml.XmlResolver
</I>&gt;<i> &gt; resolver, System.String url, XmlNodeType fragType,
</I>&gt;<i> &gt; System.Xml.XmlParserContext context) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at System.Xml.XmlTextReader..ctor (Boolean dummy, System.Xml.XmlResolver
</I>&gt;<i> &gt; resolver, System.String url, XmlNodeType fragType,
</I>&gt;<i> &gt; System.Xml.XmlParserContext context) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at System.Xml.XmlReader.Create (System.String url,
</I>&gt;<i> &gt; System.Xml.XmlReaderSettings settings, System.Xml.XmlParserContext
</I>&gt;<i> context)
</I>&gt;<i> &gt; [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at System.Xml.XmlReader.Create (System.String url,
</I>&gt;<i> &gt; System.Xml.XmlReaderSettings settings) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at System.Xml.Linq.XDocument.Load (System.String uri, LoadOptions
</I>&gt;<i> options)
</I>&gt;<i> &gt; [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at System.Xml.Linq.XDocument.Load (System.String uri) [0x00000] in
</I>&gt;<i> &lt;filename
</I>&gt;<i> &gt; unknown&gt;:0
</I>&gt;<i> &gt; at Proxio.WebService.GetDropdownValues[PropertyType] (System.String
</I>&gt;<i> &gt; serviceName) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at Proxio.WebService.GetPropertyTypes () [0x00000] in &lt;filename
</I>&gt;<i> unknown&gt;:0
</I>&gt;<i> &gt; at
</I>&gt;<i> &gt;
</I>&gt;<i> Proxio.WebService+&lt;Async&gt;c__AnonStorey0`1[System.Collections.Generic.IEnumerable`1[Proxio.PropertyType]].&lt;&gt;m__3
</I>&gt;<i> &gt; () [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; at System.Threading.Thread.StartInternal () [0x00000] in &lt;filename
</I>&gt;<i> &gt; unknown&gt;:0
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; View this message in context:
</I>&gt;<i> <A HREF="http://monotouch.2284126.n4.nabble.com/MKMapView-crashing-on-all-my-customer-s-iPads-runs-fine-on-ours-tp4590869p4598042.html">http://monotouch.2284126.n4.nabble.com/MKMapView-crashing-on-all-my-customer-s-iPads-runs-fine-on-ours-tp4590869p4598042.html</A>
</I>&gt;<i> &gt; Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; MonoTouch mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120430/e13cf2ac/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120430/e13cf2ac/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009395.html">[MonoTouch] Crash in MonoTouch.Foundation.NSArray.ArrayFromHandle[NSDictionary] (IntPtr handle)
</A></li>
	<LI>Next message: <A HREF="009403.html">[MonoTouch] Crash in MonoTouch.Foundation.NSArray.ArrayFromHandle[NSDictionary] (IntPtr handle)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9396">[ date ]</a>
              <a href="thread.html#9396">[ thread ]</a>
              <a href="subject.html#9396">[ subject ]</a>
              <a href="author.html#9396">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
