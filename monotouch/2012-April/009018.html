<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] When is BeginInvokeOnMainThread done?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20When%20is%20BeginInvokeOnMainThread%20done%3F&In-Reply-To=%3CEDF29748-F074-495C-81A8-A17DD9BAD7C5%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009016.html">
   <LINK REL="Next"  HREF="009020.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] When is BeginInvokeOnMainThread done?</H1>
    <B>Ren&#233; Ruppert</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20When%20is%20BeginInvokeOnMainThread%20done%3F&In-Reply-To=%3CEDF29748-F074-495C-81A8-A17DD9BAD7C5%40gmail.com%3E"
       TITLE="[MonoTouch] When is BeginInvokeOnMainThread done?">rene.ruppert at googlemail.com
       </A><BR>
    <I>Fri Apr  6 06:00:30 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009016.html">[MonoTouch] When is BeginInvokeOnMainThread done?
</A></li>
        <LI>Next message: <A HREF="009020.html">[MonoTouch] When is BeginInvokeOnMainThread done?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9018">[ date ]</a>
              <a href="thread.html#9018">[ thread ]</a>
              <a href="subject.html#9018">[ subject ]</a>
              <a href="author.html#9018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I would opt for Task and ContinueWith(). It's an awesome way of dealing with such situations. 
All locking, WaitHandles or Sleep calls can block the UI thread on iPhone and cause very weird behavior or lockups. 

Gr&#252;&#223;e, Ren&#233;

Am 05.04.2012 um 23:34 schrieb Rodrigo Kumpera &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">kumpera at xamarin.com</A>&gt;:

&gt;<i> You really can't do it without manually waiting for it.
</I>&gt;<i> 
</I>&gt;<i> What you can do is:
</I>&gt;<i> 
</I>&gt;<i> object obj = new object ();
</I>&gt;<i> BeginInvokeOnMainThread (delegate {
</I>&gt;<i>  //Do something
</I>&gt;<i>  lock (obj) { Monitor.Notify (obj); }
</I>&gt;<i> });
</I>&gt;<i> 
</I>&gt;<i> Thread.Sleep (2000);
</I>&gt;<i> lock (obk) { Monitor.Wait (obj); }
</I>&gt;<i> 
</I>&gt;<i> Ideally we would provide wrappers for common idioms of the .NET plataform like making the
</I>&gt;<i> function return an IAsyncResult or Task object.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Thu, Apr 5, 2012 at 6:13 PM, MojoDK &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">mrj at fpr.dk</A>&gt; wrote:
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> In this code...
</I>&gt;<i> 
</I>&gt;<i> ThreadPool.QueueUserWorkItem (delegate {
</I>&gt;<i>    BeginInvokeOnMainThread (delegate {
</I>&gt;<i>        // Do something
</I>&gt;<i>    });
</I>&gt;<i>    Thread.Sleep(2000);
</I>&gt;<i>    // Check something
</I>&gt;<i> });
</I>&gt;<i> 
</I>&gt;<i> ... how can I make sure the &quot;// Do something&quot; is completely done before
</I>&gt;<i> &quot;//Check something&quot;?
</I>&gt;<i> 
</I>&gt;<i> In other words, how can I check when BeginInvokeOnMainThread is done and
</I>&gt;<i> then do some stuff still in the ThreadPool.QueueUserWorkItem?
</I>&gt;<i> 
</I>&gt;<i> Thanks!
</I>&gt;<i> Mojo
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/When-is-BeginInvokeOnMainThread-done-tp4536089p4536089.html">http://monotouch.2284126.n4.nabble.com/When-is-BeginInvokeOnMainThread-done-tp4536089p4536089.html</A>
</I>&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120406/accd0341/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120406/accd0341/attachment.html</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009016.html">[MonoTouch] When is BeginInvokeOnMainThread done?
</A></li>
	<LI>Next message: <A HREF="009020.html">[MonoTouch] When is BeginInvokeOnMainThread done?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9018">[ date ]</a>
              <a href="thread.html#9018">[ thread ]</a>
              <a href="subject.html#9018">[ subject ]</a>
              <a href="author.html#9018">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
