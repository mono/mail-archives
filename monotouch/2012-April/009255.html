<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Memory issues - running a MT app when memory is	constrained
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Memory%20issues%20-%20running%20a%20MT%20app%20when%20memory%20is%0A%09constrained&In-Reply-To=%3CCAP-t25-YgnhpqSR%2BeX6xavwdRUBbfgNknePfoRMZtSxOFzrUqA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009224.html">
   <LINK REL="Next"  HREF="009270.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Memory issues - running a MT app when memory is	constrained</H1>
    <B>Rolf Bjarne Kvinge</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Memory%20issues%20-%20running%20a%20MT%20app%20when%20memory%20is%0A%09constrained&In-Reply-To=%3CCAP-t25-YgnhpqSR%2BeX6xavwdRUBbfgNknePfoRMZtSxOFzrUqA%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Memory issues - running a MT app when memory is	constrained">rolf at xamarin.com
       </A><BR>
    <I>Thu Apr 19 11:38:25 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009224.html">[MonoTouch] Memory issues - running a MT app when memory is	constrained
</A></li>
        <LI>Next message: <A HREF="009270.html">[MonoTouch] Memory issues - running a MT app when memory is	constrained
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9255">[ date ]</a>
              <a href="thread.html#9255">[ thread ]</a>
              <a href="subject.html#9255">[ subject ]</a>
              <a href="author.html#9255">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Wed, Apr 18, 2012 at 9:55 AM, stevek &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">steve.keane at solvd.co.uk</A>&gt; wrote:

&gt;<i> I have got a new MT app that seems to crash when memory is constrained.
</I>&gt;<i>
</I>&gt;<i> Starting the App I immediately get level 1 memory warnings due to all the
</I>&gt;<i> other stuff that was running.
</I>&gt;<i> Run my app for a few minutes and I get ( I assume) a level 2 warning and
</I>&gt;<i> then all the ViewControllers begin to unload  and somewhere a selector is
</I>&gt;<i> called on a GCd object.
</I>&gt;<i>
</I>&gt;<i> Is this correct behavior - I would assume the OS would try and unload
</I>&gt;<i> background programs 1st before trying mine??
</I>&gt;<i>
</I>&gt;<i> Is the fix just to comment out base.DidReceiveMemoryWarning (); in
</I>&gt;<i> DidReceiveMemoryWarning()  but would this just create more problems?
</I>&gt;<i>
</I>
If you do this your app will not return any memory when you do get a memory
warning, and the likelyhood of getting killed by the OS increases.


&gt;<i>
</I>&gt;<i> If not  - what what can I do to minimize the chance of a crash and clean up
</I>&gt;<i> nicely - I have de-registered NSNotification centers during ViewDidUnload()
</I>&gt;<i> - do I need to remove .Net event handlers as well?
</I>&gt;<i>
</I>
There are a couple of things you can do:
* Use less memory yourself. MonoDevelop now has a memory profiler you can
use to track down memory leaks, or you can use Apple's Instruments to do
memory profiling to find out where memory is used.
* Some times you will still get memory warnings, so you'll need to handle
this the best way possible. This includes removing event handlers (to
events on objects derived from NSObject, not normal managed objects - the
easiest way to do this is to just the the .Delegate property to null),
calling Dispose on class-level objects and clearing out fields (once again
only fields defined on NSObjects).

Rolf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120419/381c3a2f/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120419/381c3a2f/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009224.html">[MonoTouch] Memory issues - running a MT app when memory is	constrained
</A></li>
	<LI>Next message: <A HREF="009270.html">[MonoTouch] Memory issues - running a MT app when memory is	constrained
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9255">[ date ]</a>
              <a href="thread.html#9255">[ thread ]</a>
              <a href="subject.html#9255">[ subject ]</a>
              <a href="author.html#9255">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
