<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] How can this code cause those exceptions?	Trampolines problem?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20How%20can%20this%20code%20cause%20those%20exceptions%3F%0A%09Trampolines%20problem%3F&In-Reply-To=%3CCACp3Zk2hLdpjskaTgmeuN5fynLFrvYzrJibz7PS6FLFzXbLKPA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009047.html">
   <LINK REL="Next"  HREF="009026.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] How can this code cause those exceptions?	Trampolines problem?</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20How%20can%20this%20code%20cause%20those%20exceptions%3F%0A%09Trampolines%20problem%3F&In-Reply-To=%3CCACp3Zk2hLdpjskaTgmeuN5fynLFrvYzrJibz7PS6FLFzXbLKPA%40mail.gmail.com%3E"
       TITLE="[MonoTouch] How can this code cause those exceptions?	Trampolines problem?">sebastien at xamarin.com
       </A><BR>
    <I>Mon Apr  9 13:53:39 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009047.html">[MonoTouch] How can this code cause those exceptions?	Trampolines problem?
</A></li>
        <LI>Next message: <A HREF="009026.html">[MonoTouch] Invalid IL Code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9053">[ date ]</a>
              <a href="thread.html#9053">[ thread ]</a>
              <a href="subject.html#9053">[ subject ]</a>
              <a href="author.html#9053">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Ren&#233;,

On Mon, Apr 9, 2012 at 5:43 AM, Ren&#233; Ruppert
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">rene.ruppert at googlemail.com</A>&gt; wrote:
&gt;<i> Thanks. What's your recommendation for now? Use 5.2.x? I went to 5.3 because of the possibility to detect UI threading problems.
</I>
Here's my personal opinion as this really depend on your work/project,
your time table and your tolerance to risk.

You can always use stable for your all your work. The only thing you
need to take care is updating your OSX, Xcode, iOS SDK versions since
it can takes a few days for us to test them (they will be available to
you at the same time they are available to us) and issue a new
beta/stable release(s) that supports them (if any changes are
required).

You might want/need to use 'beta' releases, e.g. when you need some
features / latest fixes. It's even easier/safer to do so if you're not
planning to ship very soon, i.e. the beta(s) will likely become stable
before then so you're actually testing the code base you'll
(eventually) ship with.

The 'alpha' are previews of the (many) new features [1] that will be
available in the next major release. Other new features are still
being added (or could be removed from previous alphas), large changes
can still occurs [2]... So you might want to try them (since they can
prove useful [1] and your feedback on them is much appreciated) but
you should always have a backup plan to go back (to stable) if
anything fails or block you.

Regards,
Sebastien

[1] like the UI thread checks
[2] that seems to be the case for the crash you're experiencing


&gt;<i> Gr&#252;&#223;e, Ren&#233;
</I>&gt;<i>
</I>&gt;<i> Am 09.04.2012 um 00:09 schrieb Sebastien Pouliot &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">sebastien at xamarin.com</A>&gt;:
</I>&gt;<i>
</I>&gt;&gt;<i> Hello Ren&#233;,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This (generated) Trampoline* code is new (well changed) in 5.3.x so
</I>&gt;&gt;<i> you might be (the first) to hit a bug on it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'll try to reproduce this and ensure it get fixed in the next
</I>&gt;&gt;<i> alpha/beta releases.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> Sebastien
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Sun, Apr 8, 2012 at 10:15 AM, Ren&#233; Ruppert
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">rene.ruppert at googlemail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> Does not help. As I said there are two exceptions. Other one is crashing at the constructor. Randomly. Same input data(same calendar events).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Gr&#252;&#223;e, Ren&#233;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Am 08.04.2012 um 12:56 schrieb Nic Wise &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">nicw at fastchicken.co.nz</A>&gt;:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Try it without this
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> BackgroundColor = new UIColor (oEvent.Calendar.CGColor)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> And/or report (log) what oEvent.Calendar.CGColor is.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Fri, Apr 6, 2012 at 19:16, Ren&#233; Ruppert &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">rene.ruppert at googlemail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I have posted the exception before, but now I can add the piece of code that
</I>&gt;&gt;&gt;&gt;&gt;<i> is causing it.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> This is what gets executed ViewDidLoad(). I want to get all events in a one
</I>&gt;&gt;&gt;&gt;&gt;<i> month range:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> EKEventStore oStore = new EKEventStore ();
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> NSPredicate oPredicate = oStore.PredicateForEvents (this.EventRangeStart,
</I>&gt;&gt;&gt;&gt;&gt;<i> this.EventRangeEnd, oStore.Calendars);
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> oStore.EnumerateEvents (
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; oPredicate,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; delegate(EKEvent oEvent, ref bool bStop)
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; {
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; LocalEventItem oLocalEvent = new LocalEventItem ()
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; {
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; &#160; ID = -1,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; &#160; Name = oEvent.Title,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; &#160; StartDate = oEvent.StartDate,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; &#160; EndDate = oEvent.EndDate,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; &#160; Description = oEvent.Notes,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; &#160; EventType = LocalEventItem.EVENT_TYPE.Local,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; &#160; Location = oEvent.Location,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; &#160; BackgroundColor = new UIColor (oEvent.Calendar.CGColor)
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; } ;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; &#160; aEvents.Add (oLocalEvent); bStop = false; } );
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &#160; }
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> );
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> And these are the exceptions I&#8217;m getting randomly (for same input
</I>&gt;&gt;&gt;&gt;&gt;<i> parameters!) when the above gets executed. I pasted two variations of the
</I>&gt;&gt;&gt;&gt;&gt;<i> exception below.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Both crash in the search callback. One when accessing the start date, the
</I>&gt;&gt;&gt;&gt;&gt;<i> other when trying to get the color of the event.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> CRASH @ 06.04.2012 11:28:53
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> MONOTOUCH VERSION: 5.3.2
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> TERMINATING:True
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> EXCEPTION:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> System.NullReferenceException: Object reference not set to an instance of
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> an object
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &#160;at MonoTouch.Foundation.NSObject.InitializeObject (Boolean alloced)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> [0x00000] in
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> /Developer/MonoTouch/Source/monotouch/src/Foundation/NSObject.cs:122
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &#160;at MonoTouch.Foundation.NSObject..ctor (MonoTouch.Foundation.NSObjectFlag
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> x) [0x0000d] in
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> /Developer/MonoTouch/Source/monotouch/src/Foundation/NSObject.cs:54
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &#160;at MonoTouch.UIKit.UIColor..ctor (MonoTouch.CoreGraphics.CGColor color)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &#160;at
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> BrainloopMobile.Calendar.BaseCalendarViewModeController+&lt;GetEventsInRange&gt;c__AnonStorey38.&lt;&gt;m__AA
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> (MonoTouch.EventKit.EKEvent oEvent, System.Boolean&amp; bStop) [0x00000] in
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> /Users/rene/Documents/Develop/Projects/BrainloopMobile/210/BrainloopMobile/BrainloopMobile/Controllers/Calendar/ViewModes/BaseCalendarViewModeController.cs:48
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &#160;at MonoTouch.EventKit.EKEventStore.TrampolineEKEventSearchCallback
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> (IntPtr block, IntPtr theEvent, System.Boolean&amp; stop) [0x0004d] in
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> /Developer/MonoTouch/Source/monotouch/src/EventKit/EKEventStore.g.cs:477
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &#160;at (wrapper native-to-managed)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> MonoTouch.EventKit.EKEventStore:TrampolineEKEventSearchCallback
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> (intptr,intptr,int&amp;)
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> CRASH @ 06.04.2012 11:42:25
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> MONOTOUCH VERSION: 5.3.2
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> BRAINLOOP MOBILE VERSION: 2.1.0.120405
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> TERMINATING:True
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> EXCEPTION:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> System.NullReferenceException: Object reference not set to an instance of an
</I>&gt;&gt;&gt;&gt;&gt;<i> object &#160;at MonoTouch.ObjCRuntime.Runtime.ConstructNSObject (IntPtr ptr,
</I>&gt;&gt;&gt;&gt;&gt;<i> IntPtr klass) [0x0000d] in
</I>&gt;&gt;&gt;&gt;&gt;<i> /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:205
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> at MonoTouch.ObjCRuntime.Runtime.GetNSObject (IntPtr ptr) [0x0001f] in
</I>&gt;&gt;&gt;&gt;&gt;<i> /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:254
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> at MonoTouch.EventKit.EKEvent.get_StartDate () [0x0000b] in
</I>&gt;&gt;&gt;&gt;&gt;<i> /Developer/MonoTouch/Source/monotouch/src/EventKit/EKEvent.g.cs:159
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> at
</I>&gt;&gt;&gt;&gt;&gt;<i> BrainloopMobile.Calendar.BaseCalendarViewModeController+&lt;GetEventsInRange&gt;c__AnonStorey38.&lt;&gt;m__AA
</I>&gt;&gt;&gt;&gt;&gt;<i> (MonoTouch.EventKit.EKEvent oEvent, System.Boolean&amp; bStop) [0x00000] in
</I>&gt;&gt;&gt;&gt;&gt;<i> /Users/rene/Documents/Develop/Projects/BrainloopMobile/210/BrainloopMobile/BrainloopMobile/Controllers/Calendar/ViewModes/BaseCalendarViewModeController.cs:48
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> at MonoTouch.EventKit.EKEventStore.TrampolineEKEventSearchCallback (IntPtr
</I>&gt;&gt;&gt;&gt;&gt;<i> block, IntPtr theEvent, System.Boolean&amp; stop) [0x0004d] in
</I>&gt;&gt;&gt;&gt;&gt;<i> /Developer/MonoTouch/Source/monotouch/src/EventKit/EKEventStore.g.cs:477
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> at (wrapper native-to-managed)
</I>&gt;&gt;&gt;&gt;&gt;<i> MonoTouch.EventKit.EKEventStore:TrampolineEKEventSearchCallback
</I>&gt;&gt;&gt;&gt;&gt;<i> (intptr,intptr,int&amp;)=
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Any ideas what&#8217;s going on? Are there alternatives to the code above that I
</I>&gt;&gt;&gt;&gt;&gt;<i> could try?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Ren&#233;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> MonoTouch mailing list
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;<i> Nic Wise
</I>&gt;&gt;&gt;&gt;<i> t. &#160;+44 7788 592 806 | @fastchicken | <A HREF="http://www.linkedin.com/in/nicwise">http://www.linkedin.com/in/nicwise</A>
</I>&gt;&gt;&gt;&gt;<i> b. <A HREF="http://www.fastchicken.co.nz/">http://www.fastchicken.co.nz/</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Earnest: Self-employed? Track your business expenses and income.
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://earnestapp.com">http://earnestapp.com</A>
</I>&gt;&gt;&gt;&gt;<i> Nearest Bus: find when the next bus is coming to your stop. <A HREF="http://goo.gl/Vcz1p">http://goo.gl/Vcz1p</A>
</I>&gt;&gt;&gt;&gt;<i> mobileAgent (for FreeAgent): get your accounts in your pocket.
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://goo.gl/IuBU">http://goo.gl/IuBU</A>
</I>&gt;&gt;&gt;&gt;<i> Trip Wallet: Keep track of your budget on the go: <A HREF="http://goo.gl/ePhKa">http://goo.gl/ePhKa</A>
</I>&gt;&gt;&gt;&gt;<i> London Bike App: Find the nearest Boris Bike, and get riding! <A HREF="http://goo.gl/Icp2">http://goo.gl/Icp2</A>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> MonoTouch mailing list
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I></PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009047.html">[MonoTouch] How can this code cause those exceptions?	Trampolines problem?
</A></li>
	<LI>Next message: <A HREF="009026.html">[MonoTouch] Invalid IL Code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9053">[ date ]</a>
              <a href="thread.html#9053">[ thread ]</a>
              <a href="subject.html#9053">[ subject ]</a>
              <a href="author.html#9053">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
