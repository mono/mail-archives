<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Crash problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Crash%20problem&In-Reply-To=%3CCACp3Zk3icQ1zDNUS6ZK1ATV%2BHUyTXiMLhr_U6YBubuOMGubRow%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009035.html">
   <LINK REL="Next"  HREF="009041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Crash problem</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Crash%20problem&In-Reply-To=%3CCACp3Zk3icQ1zDNUS6ZK1ATV%2BHUyTXiMLhr_U6YBubuOMGubRow%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Crash problem">sebastien at xamarin.com
       </A><BR>
    <I>Sun Apr  8 22:02:18 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009035.html">[MonoTouch] Crash problem
</A></li>
        <LI>Next message: <A HREF="009041.html">[MonoTouch] PresentViewController crashes on real iPhone
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9043">[ date ]</a>
              <a href="thread.html#9043">[ thread ]</a>
              <a href="subject.html#9043">[ subject ]</a>
              <a href="author.html#9043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dean,

&gt;<i>From your description things seems to be correct.
</I>
It would be helpful if you could create a small, self-contained, test
case that shows this issue and attach it to a bug report (mark it
private if needed).

Thanks
Sebastien

On Sat, Apr 7, 2012 at 2:35 PM, Dean Cleaver
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">dean.cleaver at xceptionsoftware.com</A>&gt; wrote:
&gt;<i> this.InvokeOnMainThread( delegate
</I>&gt;<i>
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i> *snipped*
</I>&gt;<i>
</I>&gt;<i> this.Title = &quot;Issued: &quot; + IssuedTicketSortedDataSource.IssuedTickets.Count;
</I>&gt;<i>
</I>&gt;<i> } );
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ________________________________
</I>&gt;<i> From: Ren&#233; Ruppert [<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">rene.ruppert at googlemail.com</A>]
</I>&gt;<i> Sent: Saturday, April 07, 2012 1:20 PM
</I>&gt;<i> To: Dean Cleaver; 'Ren&#233; Ruppert'
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
</I>&gt;<i> Subject: AW: [MonoTouch] Crash problem
</I>&gt;<i>
</I>&gt;<i> Can you show some code that is setting the title?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ren&#233;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Von: Dean Cleaver [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">dean.cleaver at xceptionsoftware.com</A>]
</I>&gt;<i> Gesendet: Samstag, 7. April 2012 19:42
</I>&gt;<i> An: Ren&#233; Ruppert
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
</I>&gt;<i> Betreff: RE: [MonoTouch] Crash problem
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Rene,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I&#8217;m using 5.2.10. And the call to change the title was invoked on the main
</I>&gt;<i> thread. Removing the call to change the title stops the crashing from
</I>&gt;<i> occurring.
</I>&gt;<i>
</I>&gt;<i> It doesn&#8217;t crash in my code. If you look at the stack trace, the last code
</I>&gt;<i> of mine called is &#8220;Main&#8221; where is the entry point. My clicked code is
</I>&gt;<i> executed, it&#8217;s after that that it crashes.
</I>&gt;<i>
</I>&gt;<i> Yes &#8211; the view is still present, just its Title has changed.
</I>&gt;<i>
</I>&gt;<i> I&#8217;m using C# callbacks, and I keep a reference to the sheet also.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If I remove the code that updates the Title, I get no crashes at all.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Dino
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From: Ren&#233; Ruppert [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">rene.ruppert at googlemail.com</A>]
</I>&gt;<i> Sent: Saturday, April 07, 2012 3:39 AM
</I>&gt;<i> To: Dean Cleaver
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [MonoTouch] Crash problem
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Do you use Monotouch 5.3? It will throw an exception in debug builds if you
</I>&gt;<i> modify UI on non-UI thread.
</I>&gt;<i>
</I>&gt;<i> Next: where in your button click handler or dismissal handler does it crash?
</I>&gt;<i> Or those reached at all?
</I>&gt;<i>
</I>&gt;<i> Is the view you're presenting the sheet from still the same after your
</I>&gt;<i> update? It must not be collected while the sheet is visible.
</I>&gt;<i>
</I>&gt;<i> Are you using the C# callbacks of the sheet or a delegate? Latter one could
</I>&gt;<i> cause GC problems if you don't keep a reference to the sheet (at least I
</I>&gt;<i> noticed this behavior with alert view).
</I>&gt;<i>
</I>&gt;<i> Gr&#252;&#223;e, Ren&#233;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Am 07.04.2012 um 01:54 schrieb Dean Cleaver
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">dean.cleaver at xceptionsoftware.com</A>&gt;:
</I>&gt;<i>
</I>&gt;<i> Even closer&#8230; but not 100% certain.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> As I update the table, I also update the Title of the current screen. If I
</I>&gt;<i> don&#8217;t update it, it doesn&#8217;t crash (in this instance). This is very
</I>&gt;<i> repeatable.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> However, my QA team tells me that it happens on other screens that do not
</I>&gt;<i> update the title.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Dino
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From: Dean Cleaver
</I>&gt;<i> Sent: Friday, April 06, 2012 6:38 PM
</I>&gt;<i> To: Dean Cleaver; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
</I>&gt;<i> Subject: RE: Crash problem
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ok &#8211; have slightly more information, but no idea how to correct it.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This seems to happen every time if the UI is updated while an Action Sheet
</I>&gt;<i> is open. My code polls in the background for updates, so if a user opens an
</I>&gt;<i> action sheet, then it polls and finds an update, and adds the update to a
</I>&gt;<i> table, when the user clicks a button on the action sheet it crashes &#8211; every
</I>&gt;<i> time.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I am certain that all the polling code is invoked on the main thread for the
</I>&gt;<i> updates etc &#8211; what else can I look at to try to fix it?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Dino
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>
</I>&gt;<i> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch-bounces at lists.ximian.com</A>] On Behalf Of Dean Cleaver
</I>&gt;<i> Sent: Friday, April 06, 2012 5:21 PM
</I>&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">monotouch at lists.ximian.com</A>
</I>&gt;<i> Subject: [MonoTouch] Crash problem
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Can anyone shed light on this fault - looks to be a problem in dismissing an
</I>&gt;<i> action sheet, but it doesn't appear to be a problem in my code. It's
</I>&gt;<i> relatively random.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Exception Type:&#160; EXC_BAD_ACCESS (SIGABRT)
</I>&gt;<i>
</I>&gt;<i> Exception Codes: KERN_INVALID_ADDRESS at 0xc06fa6c8
</I>&gt;<i>
</I>&gt;<i> Crashed Thread:&#160; 0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thread 0 name:&#160; Dispatch queue: com.apple.main-thread
</I>&gt;<i>
</I>&gt;<i> Thread 0 Crashed:
</I>&gt;<i>
</I>&gt;<i> 0 &#160; libsystem_kernel.dylib&#160; &#160; &#160; &#160; 0x32ced32c __pthread_kill + 8
</I>&gt;<i>
</I>&gt;<i> 1 &#160; libsystem_c.dylib &#160; &#160; &#160; &#160; &#160; &#160; 0x30b3f208 pthread_kill + 48
</I>&gt;<i>
</I>&gt;<i> 2 &#160; libsystem_c.dylib &#160; &#160; &#160; &#160; &#160; &#160; 0x30b38298 abort + 88
</I>&gt;<i>
</I>&gt;<i> 3 &#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x00d6c62c mono_handle_native_sigsegv (mini-exceptions.c:2255)
</I>&gt;<i>
</I>&gt;<i> 4 &#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x00d4f544 mono_sigsegv_signal_handler (mini.c:5923)
</I>&gt;<i>
</I>&gt;<i> 5 &#160; libsystem_c.dylib &#160; &#160; &#160; &#160; &#160; &#160; 0x30b497e6 _sigtramp + 42
</I>&gt;<i>
</I>&gt;<i> 6 &#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x32425c14 -[UITabBar(UITabBarInternal)
</I>&gt;<i> _alertWillShow:duration:] + 628
</I>&gt;<i>
</I>&gt;<i> 7 &#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x322e0fe0 -[UIActionSheet(Private)
</I>&gt;<i> _slideSheetOut:] + 980
</I>&gt;<i>
</I>&gt;<i> 8 &#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x322e0b9c -[UIActionSheet
</I>&gt;<i> dismissWithClickedButtonIndex:animated:] + 964
</I>&gt;<i>
</I>&gt;<i> 9 &#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x322e07c6 -[UIActionSheet(Private)
</I>&gt;<i> _buttonClicked:] + 290
</I>&gt;<i>
</I>&gt;<i> 10&#160; CoreFoundation&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x36eae3f6 -[NSObject
</I>&gt;<i> performSelector:withObject:withObject:] + 46
</I>&gt;<i>
</I>&gt;<i> 11&#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x321c1fa8 -[UIApplication
</I>&gt;<i> sendAction:to:from:forEvent:] + 56
</I>&gt;<i>
</I>&gt;<i> 12&#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x321c1f64 -[UIApplication
</I>&gt;<i> sendAction:toTarget:fromSender:forEvent:] + 24
</I>&gt;<i>
</I>&gt;<i> 13&#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x321c1f42 -[UIControl
</I>&gt;<i> sendAction:to:forEvent:] + 38
</I>&gt;<i>
</I>&gt;<i> 14&#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x321c1cb2 -[UIControl(Internal)
</I>&gt;<i> _sendActionsForEvents:withEvent:] + 486
</I>&gt;<i>
</I>&gt;<i> 15&#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x321c25ea -[UIControl
</I>&gt;<i> touchesEnded:withEvent:] + 470
</I>&gt;<i>
</I>&gt;<i> 16&#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x321c0acc -[UIWindow
</I>&gt;<i> _sendTouchesForEvent:] + 312
</I>&gt;<i>
</I>&gt;<i> 17&#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x321c04ba -[UIWindow sendEvent:] + 374
</I>&gt;<i>
</I>&gt;<i> 18&#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x321a6836 -[UIApplication sendEvent:] +
</I>&gt;<i> 350
</I>&gt;<i>
</I>&gt;<i> 19&#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x321a60dc _UIApplicationHandleEvent +
</I>&gt;<i> 5820
</I>&gt;<i>
</I>&gt;<i> 20&#160; GraphicsServices&#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x32f53224 PurpleEventCallback + 876
</I>&gt;<i>
</I>&gt;<i> 21&#160; CoreFoundation&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x36f2851c
</I>&gt;<i> __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
</I>&gt;<i>
</I>&gt;<i> 22&#160; CoreFoundation&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x36f284be __CFRunLoopDoSource1 + 134
</I>&gt;<i>
</I>&gt;<i> 23&#160; CoreFoundation&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x36f2730c __CFRunLoopRun + 1364
</I>&gt;<i>
</I>&gt;<i> 24&#160; CoreFoundation&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x36eaa49e CFRunLoopRunSpecific + 294
</I>&gt;<i>
</I>&gt;<i> 25&#160; CoreFoundation&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x36eaa366 CFRunLoopRunInMode + 98
</I>&gt;<i>
</I>&gt;<i> 26&#160; GraphicsServices&#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x32f52432 GSEventRunModal + 130
</I>&gt;<i>
</I>&gt;<i> 27&#160; UIKit &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 0x321d4e76 UIApplicationMain + 1074
</I>&gt;<i>
</I>&gt;<i> 28&#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x004cc47c
</I>&gt;<i> wrapper_managed_to_native_MonoTouch_UIKit_UIApplication_UIApplicationMain_int_string___intptr_intptr
</I>&gt;<i> (monotouch.dll.6.s:47515)
</I>&gt;<i>
</I>&gt;<i> 29&#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x0086db24 KleverLogic_FlashValet_iPhone_Valet_Application_Main_string__
</I>&gt;<i> (KleverLogicFlashValetiPhoneValet.exe.6.s:489)
</I>&gt;<i>
</I>&gt;<i> 30&#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x00c2dfc8
</I>&gt;<i> wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr
</I>&gt;<i> (mscorlib.dll.6.s:166630)
</I>&gt;<i>
</I>&gt;<i> 31&#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x00d51884 mono_jit_runtime_invoke (mini.c:5786)
</I>&gt;<i>
</I>&gt;<i> 32&#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x00e0a158 mono_runtime_invoke (object.c:2757)
</I>&gt;<i>
</I>&gt;<i> 33&#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x00e0e4f0 mono_runtime_exec_main (object.c:3932)
</I>&gt;<i>
</I>&gt;<i> 34&#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x00e13a58 mono_runtime_run_main (object.c:3562)
</I>&gt;<i>
</I>&gt;<i> 35&#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x00d5867c mono_jit_exec (driver.c:1112)
</I>&gt;<i>
</I>&gt;<i> 36&#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x00d4cad4 main (main.m:1716)
</I>&gt;<i>
</I>&gt;<i> 37&#160; ...rLogicFlashValetiPhoneValet
</I>&gt;<i>
</I>&gt;<i> 0x000020fc start + 44
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I></PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009035.html">[MonoTouch] Crash problem
</A></li>
	<LI>Next message: <A HREF="009041.html">[MonoTouch] PresentViewController crashes on real iPhone
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9043">[ date ]</a>
              <a href="thread.html#9043">[ thread ]</a>
              <a href="subject.html#9043">[ subject ]</a>
              <a href="author.html#9043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
