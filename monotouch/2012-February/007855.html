<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Strange SIGSEGV error .. please help me ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Strange%20SIGSEGV%20error%20..%20please%20help%20me%20%3F&In-Reply-To=%3CCALqoN0ZBgPY8kteVNn28LpjOKpceRsQ_vCX%2B6hMv6ON6pT2%3DAg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007853.html">
   <LINK REL="Next"  HREF="007854.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Strange SIGSEGV error .. please help me ?</H1>
    <B>Jeff Stedfast</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Strange%20SIGSEGV%20error%20..%20please%20help%20me%20%3F&In-Reply-To=%3CCALqoN0ZBgPY8kteVNn28LpjOKpceRsQ_vCX%2B6hMv6ON6pT2%3DAg%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Strange SIGSEGV error .. please help me ?">jeff at xamarin.com
       </A><BR>
    <I>Tue Feb  7 20:26:08 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="007853.html">[MonoTouch] Strange SIGSEGV error .. please help me ?
</A></li>
        <LI>Next message: <A HREF="007854.html">[MonoTouch] need your help on articles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7855">[ date ]</a>
              <a href="thread.html#7855">[ thread ]</a>
              <a href="subject.html#7855">[ subject ]</a>
              <a href="author.html#7855">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Kent,

Was great meeting Tony last week!

Anyway, looking at the native stack trace makes me wonder what the contents
of the string is that you are trying to render. It looks like it is
crashing in some code that is trying to figure out the best way to truncate
the text bad getting into some bad state. I see you are using:
UILineBreakMode.MiddleTruncation.

What happens if you use a different line break mode? Something simpler,
perhaps.

Just a thought.

Hope that helps,

Jeff

On Tue, Feb 7, 2012 at 10:01 AM, kentfonager &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">kent at netcoders.dk</A>&gt; wrote:

&gt;<i> Hi fellow developer
</I>&gt;<i>
</I>&gt;<i> I'm currently working on a strategic game addon, for the upcoming danish
</I>&gt;<i> title &quot;Heroes &amp; Generals&quot;. We use a CATiledLayer to update and render the
</I>&gt;<i> tiles of a &quot;google maps&quot; alike european WW2 map, but when rendering objects
</I>&gt;<i> for all the european cities, I get a SIGSEGV error, that i unfortunately
</I>&gt;<i> cannot solve ...
</I>&gt;<i>
</I>&gt;<i> The error happends when trying to render a string:
</I>&gt;<i>
</I>&gt;<i> test.DrawString(titleRect, UIFont.FromName(&quot;FetteEngDOT&quot;, fontSize),
</I>&gt;<i> UILineBreakMode.MiddleTruncation, UITextAlignment.Center);
</I>&gt;<i>
</I>&gt;<i> I debug the values of titleRect and the test string itself, and everything
</I>&gt;<i> seems okay.
</I>&gt;<i>
</I>&gt;<i> (debug: test = Cmd_Odense_US (titleRect:
</I>&gt;<i> {X=402,4781,Y=165,4276,Width=1,484375,Height=0,390625}
</I>&gt;<i>
</I>&gt;<i> The stacktrace i get is this :
</I>&gt;<i>
</I>&gt;<i> Stacktrace:
</I>&gt;<i>
</I>&gt;<i>  at (wrapper managed-to-native)
</I>&gt;<i>
</I>&gt;<i> MonoTouch.ObjCRuntime.Messaging.SizeF_objc_msgSend_RectangleF_IntPtr_int_int
</I>&gt;<i> (intptr,intptr,System.Drawing.RectangleF,intptr,int,int) &lt;IL 0x0002c,
</I>&gt;<i> 0xffffffff&gt;
</I>&gt;<i>  at MonoTouch.Foundation.NSString.DrawString
</I>&gt;<i>
</I>&gt;<i> (System.Drawing.RectangleF,MonoTouch.UIKit.UIFont,MonoTouch.UIKit.UILineBreakMode,MonoTouch.UIKit.UITextAlignment)
</I>&gt;<i> [0x0003c] in
</I>&gt;<i> /Developer/MonoTouch/Source/monotouch/src/Foundation/NSString.g.cs:232
</I>&gt;<i>  at HGMobileIOS.WarMapTileLayer.DrawCommandNode
</I>&gt;<i>
</I>&gt;<i> (single,single,single,single,single,MonoTouch.CoreGraphics.CGContext,HGDataBaseModels.dboCommandNode,int,single)
</I>&gt;<i> [0x00228] in
</I>&gt;<i> /Users/kent/Projects/HGMobile/HGMobileIOS/views/map/WarMapTileLayer.cs:420
</I>&gt;<i>  at HGMobileIOS.WarMapTileLayer.RenderOverlay
</I>&gt;<i>
</I>&gt;<i> (MonoTouch.CoreGraphics.CGContext,System.Drawing.RectangleF,System.Drawing.RectangleF,int,int,single)
</I>&gt;<i> [0x00623] in
</I>&gt;<i> /Users/kent/Projects/HGMobile/HGMobileIOS/views/map/WarMapTileLayer.cs:352
</I>&gt;<i>  at HGMobileIOS.WarMapTileLayer.Draw (System.Drawing.RectangleF) [0x00240]
</I>&gt;<i> in
</I>&gt;<i> /Users/kent/Projects/HGMobile/HGMobileIOS/views/map/WarMapTileLayer.cs:168
</I>&gt;<i>  at (wrapper runtime-invoke)
</I>&gt;<i> &lt;Module&gt;.runtime_invoke_void__this___RectangleF
</I>&gt;<i> (object,intptr,intptr,intptr) &lt;IL 0x0005c, 0xffffffff&gt;
</I>&gt;<i>  at (wrapper managed-to-native)
</I>&gt;<i> MonoTouch.ObjCRuntime.Messaging.void_objc_msgSendSuper_IntPtr
</I>&gt;<i> (intptr,intptr,intptr) &lt;IL 0x00025, 0xffffffff&gt;
</I>&gt;<i>  at MonoTouch.CoreAnimation.CALayer.DrawInContext
</I>&gt;<i> (MonoTouch.CoreGraphics.CGContext) [0x00026] in
</I>&gt;<i> /Developer/MonoTouch/Source/monotouch/src/CoreAnimation/CALayer.g.cs:498
</I>&gt;<i>  at HGMobileIOS.NoFadeTiledLayer.DrawInContext
</I>&gt;<i> (MonoTouch.CoreGraphics.CGContext) [0x00000] in
</I>&gt;<i> /Users/kent/Projects/HGMobile/HGMobileIOS/views/map/WarMapTileLayer.cs:34
</I>&gt;<i>  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_void__this___object
</I>&gt;<i> (object,intptr,intptr,intptr) &lt;IL 0x00052, 0xffffffff&gt;
</I>&gt;<i>
</I>&gt;<i> Native stacktrace:
</I>&gt;<i>
</I>&gt;<i>        0   HGMobileIOS                         0x0009524c
</I>&gt;<i> mono_handle_native_sigsegv + 284
</I>&gt;<i>        1   HGMobileIOS                         0x0000c158
</I>&gt;<i> mono_sigsegv_signal_handler + 248
</I>&gt;<i>        2   libSystem.B.dylib                   0x9557d05b _sigtramp + 43
</I>&gt;<i>        3   ???                                 0xffffffff 0x0 + 4294967295
</I>&gt;<i>        4   libicucore.A.dylib                  0x0325b78f
</I>&gt;<i> _ZN3icu22RuleBasedBreakIterator10isBoundaryEi + 159
</I>&gt;<i>        5   libicucore.A.dylib                  0x0325b6eb ubrk_isBoundary
</I>&gt;<i> + 24
</I>&gt;<i>        6   WebCore                             0x058df1a8
</I>&gt;<i> _ZN7WebCore11isTextBreakEPNS_17TextBreakIteratorEi + 24
</I>&gt;<i>        7   WebCore                             0x05835333
</I>&gt;<i> _ZN7WebCoreL22centerTruncateToBufferERKNS_6StringEjjPtb + 99
</I>&gt;<i>        8   WebCore                             0x0583598c
</I>&gt;<i> _ZN7WebCoreL14truncateStringERKNS_6StringEfRKNS_4FontEPFjS2_jjPtbEbPfbfb +
</I>&gt;<i> 716
</I>&gt;<i>        9   WebCore                             0x05835d84
</I>&gt;<i> _ZN7WebCore15StringTruncator14centerTruncateERKNS_6StringEfRKNS_4FontEbRfbf
</I>&gt;<i> + 84
</I>&gt;<i>        10  WebCore                             0x05922336
</I>&gt;<i>
</I>&gt;<i> _ZL18applyEllipsisStyleRKN7WebCore6StringE16WebEllipsisStylefRKNS_4FontEbPfbfb
</I>&gt;<i> + 678
</I>&gt;<i>        11  WebCore                             0x05924b22
</I>&gt;<i> -[NSString(WebStringDrawing)
</I>&gt;<i>
</I>&gt;<i> __web_drawInRect:withFont:ellipsis:alignment:letterSpacing:lineSpacing:includeEmoji:truncationRect:measureOnly:renderedStringOut:]
</I>&gt;<i> + 5058
</I>&gt;<i>        12  WebCore                             0x059217ce
</I>&gt;<i> -[NSString(WebStringDrawing)
</I>&gt;<i>
</I>&gt;<i> __web_drawInRect:withFont:ellipsis:alignment:letterSpacing:lineSpacing:includeEmoji:truncationRect:measureOnly:]
</I>&gt;<i> + 158
</I>&gt;<i>        13  WebCore                             0x059214a9
</I>&gt;<i> -[NSString(WebStringDrawing)
</I>&gt;<i>
</I>&gt;<i> _web_drawInRect:withFont:ellipsis:alignment:lineSpacing:includeEmoji:truncationRect:measureOnly:]
</I>&gt;<i> + 153
</I>&gt;<i>        14  WebCore                             0x059213fc
</I>&gt;<i> -[NSString(WebStringDrawing)
</I>&gt;<i>
</I>&gt;<i> _web_drawInRect:withFont:ellipsis:alignment:lineSpacing:includeEmoji:truncationRect:]
</I>&gt;<i> + 140
</I>&gt;<i>        15  UIKit                               0x01c5cb22
</I>&gt;<i> -[NSString(UIStringDrawing)
</I>&gt;<i>
</I>&gt;<i> _drawInRect:withFont:lineBreakMode:alignment:lineSpacing:includeEmoji:truncationRect:]
</I>&gt;<i> + 145
</I>&gt;<i>        16  UIKit                               0x01c5c3ce
</I>&gt;<i> -[NSString(UIStringDrawing)
</I>&gt;<i> drawInRect:withFont:lineBreakMode:alignment:lineSpacing:includeEmoji:] +
</I>&gt;<i> 109
</I>&gt;<i>        17  UIKit                               0x01c5c49f
</I>&gt;<i> -[NSString(UIStringDrawing) drawInRect:withFont:lineBreakMode:alignment:] +
</I>&gt;<i> 99
</I>&gt;<i>        18  ???                                 0x127f3f28 0x0 + 310329128
</I>&gt;<i>        19  ???                                 0x127f3de0 0x0 + 310328800
</I>&gt;<i>        20  ???                                 0x10f67e9c 0x0 + 284589724
</I>&gt;<i>        21  ???                                 0x127efe30 0x0 + 310312496
</I>&gt;<i>        22  ???                                 0x1279a144 0x0 + 309961028
</I>&gt;<i>        23  ???                                 0x1279a650 0x0 + 309962320
</I>&gt;<i>        24  HGMobileIOS                         0x000104c2
</I>&gt;<i> mono_jit_runtime_invoke
</I>&gt;<i> + 722
</I>&gt;<i>        25  HGMobileIOS                         0x001721fe
</I>&gt;<i> mono_runtime_invoke +
</I>&gt;<i> 126
</I>&gt;<i>        26  HGMobileIOS                         0x00220bdc
</I>&gt;<i> monotouch_trampoline +
</I>&gt;<i> 3372
</I>&gt;<i>        27  UIKit                               0x01c76187
</I>&gt;<i> -[UIView(CALayerDelegate) drawLayer:inContext:] + 426
</I>&gt;<i>        28  QuartzCore                          0x0311bb5e -[CALayer
</I>&gt;<i> drawInContext:] + 143
</I>&gt;<i>        29  ???                                 0x10bbb2ac 0x0 + 280736428
</I>&gt;<i>        30  ???                                 0x12798e8c 0x0 + 309956236
</I>&gt;<i>        31  ???                                 0x12798cf8 0x0 + 309955832
</I>&gt;<i>        32  ???                                 0x10be5596 0x0 + 280909206
</I>&gt;<i>        33  HGMobileIOS                         0x000104c2
</I>&gt;<i> mono_jit_runtime_invoke
</I>&gt;<i> + 722
</I>&gt;<i>        34  HGMobileIOS                         0x001721fe
</I>&gt;<i> mono_runtime_invoke +
</I>&gt;<i> 126
</I>&gt;<i>        35  HGMobileIOS                         0x00220bdc
</I>&gt;<i> monotouch_trampoline +
</I>&gt;<i> 3372
</I>&gt;<i>        36  QuartzCore                          0x03132283
</I>&gt;<i> _ZL18tiled_layer_renderP16_CAImageProviderjjjjPv + 1648
</I>&gt;<i>        37  QuartzCore                          0x0307aeb2
</I>&gt;<i> _ZL21CAImageProviderThreadPjb + 475
</I>&gt;<i>        38  libSystem.B.dylib                   0x9553c781
</I>&gt;<i> _pthread_wqthread + 390
</I>&gt;<i>        39  libSystem.B.dylib                   0x9553c5c6 start_wqthread +
</I>&gt;<i> 30
</I>&gt;<i>
</I>&gt;<i> =================================================================
</I>&gt;<i> Got a SIGSEGV while executing native code. This usually indicates
</I>&gt;<i> a fatal error in the mono runtime or one of the native libraries
</I>&gt;<i> used by your application.
</I>&gt;<i> =================================================================
</I>&gt;<i>
</I>&gt;<i> I really, really hope that someone to help pointing me in the right
</I>&gt;<i> direction ...
</I>&gt;<i>
</I>&gt;<i> Thanks in advance,
</I>&gt;<i> Kent Fonager, netcoders aps
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://monotouch.2284126.n4.nabble.com/Strange-SIGSEGV-error-please-help-me-tp4364967p4364967.html">http://monotouch.2284126.n4.nabble.com/Strange-SIGSEGV-error-please-help-me-tp4364967p4364967.html</A>
</I>&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120207/e7f730dd/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120207/e7f730dd/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007853.html">[MonoTouch] Strange SIGSEGV error .. please help me ?
</A></li>
	<LI>Next message: <A HREF="007854.html">[MonoTouch] need your help on articles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7855">[ date ]</a>
              <a href="thread.html#7855">[ thread ]</a>
              <a href="subject.html#7855">[ subject ]</a>
              <a href="author.html#7855">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
