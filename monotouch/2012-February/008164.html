<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Threading best practice
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Threading%20best%20practice&In-Reply-To=%3C1329941574124-4411605.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008208.html">
   <LINK REL="Next"  HREF="008171.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Threading best practice</H1>
    <B>MojoDK</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Threading%20best%20practice&In-Reply-To=%3C1329941574124-4411605.post%40n4.nabble.com%3E"
       TITLE="[MonoTouch] Threading best practice">mrj at fpr.dk
       </A><BR>
    <I>Wed Feb 22 20:12:54 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="008208.html">[MonoTouch] SIGSEGV on simulator after upgrade
</A></li>
        <LI>Next message: <A HREF="008171.html">[MonoTouch] Threading best practice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8164">[ date ]</a>
              <a href="thread.html#8164">[ thread ]</a>
              <a href="subject.html#8164">[ subject ]</a>
              <a href="author.html#8164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I need to do about 100 WebClient.DownloadString(&quot;xxxxx&quot;) as fast as
possible.

Threading is not my strongest side, so I ask for your help.

What is best practice in MT for doing 100 webrequest as fast as possible?

My idea was something like (I haven't tested it)...

private void StartWebRequets () {
    for (int i = 0; i &lt; 100; i++) {
        ThreadPool.QueueUserWorkItem(DoQueryWeb, i);		
    }
}

private void DoQueryWeb(object state) {
    int i = state as int;
    WebClient client = new WebClient();
    string html = client.DownloadString(&quot;my url&quot;);
    InvokeOnMainThread(delegate { 
        // Do main thread stuff here
    });
}

My worries is that firing 100 webrequests will kill the app. How would you
solve it? Can I tell ThreadPool to only do like 3-4 at a time?

Thanks!!
Mojo

--
View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/Threading-best-practice-tp4411605p4411605.html">http://monotouch.2284126.n4.nabble.com/Threading-best-practice-tp4411605p4411605.html</A>
Sent from the MonoTouch mailing list archive at Nabble.com.
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008208.html">[MonoTouch] SIGSEGV on simulator after upgrade
</A></li>
	<LI>Next message: <A HREF="008171.html">[MonoTouch] Threading best practice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8164">[ date ]</a>
              <a href="thread.html#8164">[ thread ]</a>
              <a href="subject.html#8164">[ subject ]</a>
              <a href="author.html#8164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
