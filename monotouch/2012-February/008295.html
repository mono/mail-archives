<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] [mono-android] sharing code between mono touch and mono for android
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20%5Bmono-android%5D%20sharing%20code%20between%20mono%20touch%20and%0A%20mono%20for%20android&In-Reply-To=%3CCACoXTY-9xwtuCF5nfmmkG%3DYdEqzE8gF_YGgs-kEW_S6_-UpLPA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008297.html">
   <LINK REL="Next"  HREF="008300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] [mono-android] sharing code between mono touch and mono for android</H1>
    <B>Jamie Briant</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20%5Bmono-android%5D%20sharing%20code%20between%20mono%20touch%20and%0A%20mono%20for%20android&In-Reply-To=%3CCACoXTY-9xwtuCF5nfmmkG%3DYdEqzE8gF_YGgs-kEW_S6_-UpLPA%40mail.gmail.com%3E"
       TITLE="[MonoTouch] [mono-android] sharing code between mono touch and mono for android">monotouch.list at binaryfinery.com
       </A><BR>
    <I>Mon Feb 27 13:13:03 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="008297.html">[MonoTouch] Is Xcode 4.1 comes with the iOS 5 SDK.
</A></li>
        <LI>Next message: <A HREF="008300.html">[MonoTouch] [mono-android] sharing code between mono touch and mono for android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8295">[ date ]</a>
              <a href="thread.html#8295">[ thread ]</a>
              <a href="subject.html#8295">[ subject ]</a>
              <a href="author.html#8295">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is this as good as it gets? I'm attempting to build an MfA version of my MT
app and its proving extremely frustrating, to the extent that I'm
considering just writing the thing in Java. My reason for using MT was the
awfulness of Objective-C, and while java is frustrating its entirely
doable. The only thing at this point is the real possibility that a WP7
version will be next, so I might as well bite the bullet now.

Context: I'm using Visual Studio, Resharper, and my own Monotouch VSIX to
load MT projects. I edit entirely in VS, and build in MD on the mac. I've
tried Project Linker.

Problem: MfA, MT and WP7 require different .XXproj file formats.

There's no getting around this for WP7.

Why is this a problem?

1. &quot;This file is open in another project&quot;. (and associated Intellisense
death)
2. Refactorings don't refactor #if/#endif code.
3. Refactorings don't refactor code in linked projects at all.
4. Resharper completely horked.

Basically, I cannot work the way I work. And if I can't do that - if I
can't keep the apps in sync *as I work* I might as well use java: if I have
to retype the code I can just as easily convert it to java as I type.

Project Linker doesn't solve any of these. It makes things slightly less
broken, but the flip side is I managed to delete a whole ton of files off
disk as I tried to remove them from the MfA project.

Source Control as an alternative. I thought about having separate branches
and handling it that way. But this fundamentally fails for refactoring
often. It made me wonder how on earth teams of programmers collaborate.
When I decide to take a class, split it into two and then pull out a common
base, all with new names: how does a team deal with that? I refactor
continuously.

*A Possible Solution*

Could the MT and MfA compilers/linkers/projects be made to accept WP7
projects as References? Then I could factor out common code into a shared
library - but it would claim to be WP7 so the WP7 app could use it. The MT
and MfA apps would ignore the fact that the library is WP7. MT could solve
any problems at code generation time anyway.

*Pain*

How do the rest of you do this? Is Project Linker as good as it gets? How
do you deal with intellisense/resharper being completely horked?

Thanks,

jamie




On Mon, Jan 30, 2012 at 11:30 PM, Miljenko Cvjetko &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">mcvjetko at holisticware.net</A>&gt; wrote:

&gt;<i>  Good morning
</I>&gt;<i>
</I>&gt;<i> On 2012.01.31 01:59, Felix Collins wrote:
</I>&gt;<i>
</I>&gt;<i> What is Project Linker?
</I>&gt;<i>
</I>&gt;<i> Byproduct of Patterns and Practices project called Prism where MS guys
</I>&gt;<i> explain
</I>&gt;<i> code sharing on WPF, SL and lately  WP7 platform.
</I>&gt;<i> Project linker is just a tool VS plugin that helps batch linking of files.
</I>&gt;<i> Defines
</I>&gt;<i> project dependencies in sense of code sharing (copy as link + paste or
</I>&gt;<i> copy + paste as link)
</I>&gt;<i>
</I>&gt;<i> some refs:
</I>&gt;<i> <A HREF="http://msdn.microsoft.com/en-us/library/ff921108(v=pandp.20">http://msdn.microsoft.com/en-us/library/ff921108(v=pandp.20</A>).aspx
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://visualstudiogallery.msdn.microsoft.com/5e730577-d11c-4f2e-8e2b-cbb87f76c044">http://visualstudiogallery.msdn.microsoft.com/5e730577-d11c-4f2e-8e2b-cbb87f76c044</A>
</I>&gt;<i>
</I>&gt;<i> Greg's sample with M4A
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.gregshackles.com/2010/12/shared-libraries-for-windows-phone-7-monodroid-and-beyond/">http://www.gregshackles.com/2010/12/shared-libraries-for-windows-phone-7-monodroid-and-beyond/</A>
</I>&gt;<i>
</I>&gt;<i> I like the tool, cos it is nonintrusive regarding IDE tools, does not
</I>&gt;<i> break VS (other plugins) and
</I>&gt;<i> works with MonoDevelop too (meaning one can do the linking in VS and all
</I>&gt;<i> links are picked up).
</I>&gt;<i>
</I>&gt;<i> Right now besides integrating MTch stuff I'm trying to extend our
</I>&gt;<i> MultiTarget solution template to
</I>&gt;<i> include Project Linker stuff from the beginning, so the manual addition of
</I>&gt;<i> links is not necessary.
</I>&gt;<i>
</I>&gt;<i> HTH
</I>&gt;<i>
</I>&gt;<i> regards
</I>&gt;<i>
</I>&gt;<i> mel
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 31/01/2012 12:46 p.m., Miljenko Cvjetko wrote:
</I>&gt;<i>
</I>&gt;<i> Sharing code with Project Linker
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Miljenko Cvjetko dipl.ing. ET
</I>&gt;<i> 	Direktor/CEO
</I>&gt;<i> 	Projektant rje&#353;enja/Solution Architect	
</I>&gt;<i> 	Razvojni programer/Senior developer
</I>&gt;<i> 	Voditelj projekta/Project Manager
</I>&gt;<i>
</I>&gt;<i> IX ju&#382;na obala 13
</I>&gt;<i> Kajzerica Zagreb
</I>&gt;<i> T: 385 1 7775555
</I>&gt;<i> M: 385 91 557 447 3
</I>&gt;<i> F: 385 1 7779556
</I>&gt;<i> e: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">mcvjetko at holisticware.net</A>
</I>&gt;<i> w: <A HREF="http://www.holisticware.net">http://www.holisticware.net</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120227/1316d97b/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120227/1316d97b/attachment.html</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008297.html">[MonoTouch] Is Xcode 4.1 comes with the iOS 5 SDK.
</A></li>
	<LI>Next message: <A HREF="008300.html">[MonoTouch] [mono-android] sharing code between mono touch and mono for android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8295">[ date ]</a>
              <a href="thread.html#8295">[ thread ]</a>
              <a href="subject.html#8295">[ subject ]</a>
              <a href="author.html#8295">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
