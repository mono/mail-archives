<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] &quot;mtouch failed with no output&quot; trying to build against	bound library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20%22mtouch%20failed%20with%20no%20output%22%20trying%20to%20build%20against%0A%09bound%20library&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002364.html">
   <LINK REL="Next"  HREF="002367.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] &quot;mtouch failed with no output&quot; trying to build against	bound library</H1>
    <B>David Moles</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20%22mtouch%20failed%20with%20no%20output%22%20trying%20to%20build%20against%0A%09bound%20library&In-Reply-To="
       TITLE="[MonoTouch] &quot;mtouch failed with no output&quot; trying to build against	bound library">davidmoles at thegogame.com
       </A><BR>
    <I>Thu Nov 11 15:54:52 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002364.html">[MonoTouch] AVMutableComposition, AVMutableCompositionTrack
</A></li>
        <LI>Next message: <A HREF="002367.html">[MonoTouch] &quot;mtouch failed with no output&quot; trying to build	against bound library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2365">[ date ]</a>
              <a href="thread.html#2365">[ thread ]</a>
              <a href="subject.html#2365">[ subject ]</a>
              <a href="author.html#2365">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey, guys --

Lacking full AVFoundation bindings, I'm trying to write a simple Obj-C
library that will do what I need to do, and bind that. Being
completely new to this end of things, I've started by creating an
Obj-C class with a static method of the right signature (but no
meaningful guts) and trying to code against that. I fully expect it to
blow up when I try to run it, but I haven't gotten that far --
building the project gets me an &quot;mtouch failed with no output&quot; error.

(It's not the spaces-in-the-path thing mentioned in the FAQ -- I checked that.)

I've build the Obj-C library, libAVUtils.so, and dropped that in my
main project directory; and I've used btouch to build the binding DLL,
AVUtils.dll, and added the DLL as a reference in my main project --
that much seems to work, at least as far as I can tell from code
completion etc.

In the extra build arguments, I've got:

    -gcc_flags &quot;-L${ProjectDir} -lAVUtils -force_load&quot;

Not sure what to do with -framework, but adding

  -framework Foundation -framework AVFoundation -framework CoreData

doesn't seem to help.

Any ideas? Source code below.

/////////////////////////////////////////////

The Obj-C header file, AVUtils.h:

    #import &lt;Foundation/Foundation.h&gt;
    #import &lt;AVFoundation/AVFoundation.h&gt;
    #import &lt;CoreData/CoreData.h&gt;

    @interface AVUtils : NSObject {}
    + (NSURL*) replaceAudio:(NSURL*)videoUrl withTrack:(NSURL*)audioUrl;
    @end

The Obj-C implementation, AVUtils.m:

    #import &quot;AVUtils.h&quot;
    @implementation AVUtils : NSObject
    + (NSURL*) replaceAudio:(NSURL*)videoUrl withTrack:(NSURL*)audioUrl
    {
        NSURL *newURL = [NSURL URLWithString:[videoUrl absoluteString]];
        return newURL;
    }
    @end

And the C# interface, AVUtils.cs:

    using System;
    using MonoTouch.Foundation;

    namespace MyNamespace.AV
    {
        [BaseType (typeof (NSObject))]
        public interface AVUtils
        {
            [Static, Export(&quot;replaceAudio:withTrack:&quot;)]
            NSUrl ReplaceAudio(NSUrl videoUrl, NSUrl audioUrl);
        }
    }


-- 
David Moles
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">davidmoles at thegogame.com</A>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002364.html">[MonoTouch] AVMutableComposition, AVMutableCompositionTrack
</A></li>
	<LI>Next message: <A HREF="002367.html">[MonoTouch] &quot;mtouch failed with no output&quot; trying to build	against bound library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2365">[ date ]</a>
              <a href="thread.html#2365">[ thread ]</a>
              <a href="subject.html#2365">[ subject ]</a>
              <a href="author.html#2365">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
