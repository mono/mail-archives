<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] App is crashing at random - the app completely freezes indefinitely
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20App%20is%20crashing%20at%20random%20-%20the%20app%20completely%0A%20freezes%20indefinitely&In-Reply-To=%3CCAP-t25-oCodjwuOAg%3DTumHA2Hg_0fNaFtzbe574TnyLKD%2B-xDw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008386.html">
   <LINK REL="Next"  HREF="008391.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] App is crashing at random - the app completely freezes indefinitely</H1>
    <B>Rolf Bjarne Kvinge</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20App%20is%20crashing%20at%20random%20-%20the%20app%20completely%0A%20freezes%20indefinitely&In-Reply-To=%3CCAP-t25-oCodjwuOAg%3DTumHA2Hg_0fNaFtzbe574TnyLKD%2B-xDw%40mail.gmail.com%3E"
       TITLE="[MonoTouch] App is crashing at random - the app completely freezes indefinitely">rolf at xamarin.com
       </A><BR>
    <I>Thu Mar  1 23:51:23 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="008386.html">[MonoTouch] App is crashing at random - the app completely freezes	indefinitely
</A></li>
        <LI>Next message: <A HREF="008391.html">[MonoTouch] App is crashing at random - the app completely freezes indefinitely
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8388">[ date ]</a>
              <a href="thread.html#8388">[ thread ]</a>
              <a href="subject.html#8388">[ subject ]</a>
              <a href="author.html#8388">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&lt;inline&gt;

On Fri, Mar 2, 2012 at 12:11 AM, MilkyJoe &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">leigh.bowers at curvenet.co.uk</A>&gt;wrote:

&gt;<i> I've got big problem. My app, that is due to go live tomorrow, is crashing
</I>&gt;<i> at
</I>&gt;<i> random. It crashes in different views, and at different points. It doesn't
</I>&gt;<i> actually crash the app - the app just sits there, not responding. It
</I>&gt;<i> literally just sat there for 24 minutes, until I allowed the screen to go
</I>&gt;<i> off (I kept tapping the screen to keep it awake). Then, when re-starting
</I>&gt;<i> the
</I>&gt;<i> app, it closed itself within 30 seconds. The next time I run the app,
</I>&gt;<i> everything is fine.
</I>&gt;<i>
</I>&gt;<i> There doesn't appear to be any pattern to it, although I'm starting to
</I>&gt;<i> think
</I>&gt;<i> it could be something to do with the UIWebView, or me not dealing with low
</I>&gt;<i> memory correctly (but I can't think of anything else to do).
</I>&gt;<i>
</I>&gt;<i> I've spent days googling and trying various things, including:
</I>&gt;<i>
</I>&gt;<i> Promoting key private variables to class variables (to prevent premature
</I>&gt;<i> GC)
</I>&gt;<i> Turning off phone number detection (I found an article that suggested it
</I>&gt;<i> might be bugged)
</I>&gt;<i> Making sure all objects are disposed of cleanly
</I>&gt;<i> (needlessly) Completely rewriting sections of code (at one point, it looked
</I>&gt;<i> like a LINQ query was the problem, so I rewrote it to not employ LINQ at
</I>&gt;<i> all)
</I>&gt;<i> Etc etc etc.
</I>&gt;<i>
</I>&gt;<i> From the iPad's console, I see this (client name and app name removed):
</I>&gt;<i>
</I>&gt;<i> Mar  1 22:21:01 unknown &lt;removed&gt;[760] &lt;Warning&gt;: Received memory warning.
</I>&gt;<i> Mar  1 22:21:11 unknown &lt;removed&gt;[760] &lt;Warning&gt;: void
</I>&gt;<i> SendDelegateMessage(NSInvocation*): delegate
</I>&gt;<i> (webView:resource:didFinishLoadingFromDataSource:) failed to return after
</I>&gt;<i> waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode
</I>&gt;<i> Mar  1 22:21:21 unknown &lt;removed&gt;[760] &lt;Warning&gt;: void
</I>&gt;<i> SendDelegateMessage(NSInvocation*): delegate
</I>&gt;<i> (webView:resource:didFinishLoadingFromDataSource:) failed to return after
</I>&gt;<i> waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode
</I>&gt;<i> .... EVERY TEN SECONDS UNTIL ...
</I>&gt;<i>
</I>
Didn't you figure this out here:
<A HREF="http://lists.ximian.com/pipermail/monotouch/2012-February/008190.html?">http://lists.ximian.com/pipermail/monotouch/2012-February/008190.html?</A> Or
is it another case?


&gt;<i> Mar  1 22:45:56 unknown &lt;removed&gt;[760] &lt;Warning&gt;: void
</I>&gt;<i> SendDelegateMessage(NSInvocation*): delegate
</I>&gt;<i> (webView:resource:didFinishLoadingFromDataSource:) failed to return after
</I>&gt;<i> waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode
</I>&gt;<i> Mar  1 22:46:06 unknown &lt;removed&gt;[760] &lt;Warning&gt;: void
</I>&gt;<i> SendDelegateMessage(NSInvocation*): delegate
</I>&gt;<i> (webView:resource:didFinishLoadingFromDataSource:) failed to return after
</I>&gt;<i> waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode
</I>&gt;<i> Mar  1 22:46:32 unknown SpringBoard[15] &lt;Warning&gt;: com.&lt;removed&gt;.&lt;removed&gt;
</I>&gt;<i> failed to resume in time
</I>&gt;<i> Mar  1 22:46:32 unknown SpringBoard[15] &lt;Warning&gt;: Forcing crash report of
</I>&gt;<i> &lt;removed&gt;[760]...
</I>&gt;<i> Mar  1 22:46:33 unknown Music~ipad[315] &lt;Warning&gt;: Received memory warning.
</I>&gt;<i> Mar  1 22:46:33 unknown SpringBoard[15] &lt;Warning&gt;: Finished crash
</I>&gt;<i> reporting.
</I>&gt;<i> Mar  1 22:46:33 unknown com.apple.launchd[1] &lt;Notice&gt;:
</I>&gt;<i> (UIKitApplication:com.&lt;removed&gt;.&lt;removed&gt;[0x4666]) Exited: Killed: 9
</I>&gt;<i> Mar  1 22:46:33 unknown SpringBoard[15] &lt;Warning&gt;: Application '&lt;removed&gt;'
</I>&gt;<i> exited abnormally with signal 9: Killed: 9
</I>&gt;<i>
</I>&gt;<i> I don't even get a crash report at the time it locks up (which makes sense,
</I>&gt;<i> as the app hasn't crashed out). I get a crash report if I let the screen go
</I>&gt;<i> off, and the unlock the device (that I can post if it would help).
</I>&gt;<i>
</I>
Yes please, that might help us help you.


&gt;<i>
</I>&gt;<i> Can anyone suggest what might be the problem? I know it's a big ask but,
</I>&gt;<i> after two days of trying to fix the problem without success, I'm fast
</I>&gt;<i> running out of time.
</I>&gt;<i>
</I>
Does it happen while debugging? Maybe you can break when it hangs in the
debugger, and see what the main thread is trying to do.

&gt;<i>From the device log it looks like it's related to the memory warning (since
</I>that's what happens first). There is a method you can override in your
classes (ReceiveMemoryWarning), to handle this warning appropriately (you
should clean up/null out as much as you possibly can when you get this
warning). Unfortunately your problem isn't directly related to keeping too
much memory alive after the warning.

You might want to make the GC more aggressive while debugging, to see if it
makes a difference (maybe the problem goes away, maybe it's easier to
reproduce: in either case it's valuable debugging information). You can do
this by starting up a new thread and periodically request a GC:

new Thread ((v) =&gt; { while (true) { Thread.Sleep (5000); GC.Collect
(GC.MaxGeneration); } }).Start ();

I hope this helps,
Rolf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120302/bb6cfa96/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120302/bb6cfa96/attachment-0001.html</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008386.html">[MonoTouch] App is crashing at random - the app completely freezes	indefinitely
</A></li>
	<LI>Next message: <A HREF="008391.html">[MonoTouch] App is crashing at random - the app completely freezes indefinitely
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8388">[ date ]</a>
              <a href="thread.html#8388">[ thread ]</a>
              <a href="subject.html#8388">[ subject ]</a>
              <a href="author.html#8388">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
