<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Subscribing to ScrollAnimationEnded on a uitableview has strange results?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Subscribing%20to%20ScrollAnimationEnded%20on%20a%20uitableview%0A%20has%20strange%20results%3F&In-Reply-To=%3C1331079597953-4451815.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008469.html">
   <LINK REL="Next"  HREF="008474.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Subscribing to ScrollAnimationEnded on a uitableview has strange results?</H1>
    <B>victoria</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Subscribing%20to%20ScrollAnimationEnded%20on%20a%20uitableview%0A%20has%20strange%20results%3F&In-Reply-To=%3C1331079597953-4451815.post%40n4.nabble.com%3E"
       TITLE="[MonoTouch] Subscribing to ScrollAnimationEnded on a uitableview has strange results?">iminurbase at hotmail.com
       </A><BR>
    <I>Wed Mar  7 00:19:57 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="008469.html">[MonoTouch] WCF RESTful Service Error Message
</A></li>
        <LI>Next message: <A HREF="008474.html">[MonoTouch] Subscribing to ScrollAnimationEnded on a uitableview has strange results?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8473">[ date ]</a>
              <a href="thread.html#8473">[ thread ]</a>
              <a href="subject.html#8473">[ subject ]</a>
              <a href="author.html#8473">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello list, hope you can shed some light on this odd issue we're having.

Today I helped track down a really obscure bug. What it came down to is
this: deep in the code an uitableview had its ScrollAnimationEnded
subscribed to, and when that happened the uitableview.Source for some reason
got set to null.

I think the best way I can explain it is with a simple test case:

---
    class DoNothing : UITableViewSource
    {
      public override int RowsInSection (UITableView tableview, int section)
{ return 0; }
      public override UITableViewCell GetCell (UITableView tableView,
NSIndexPath indexPath)
      {
        return new UITableViewCell();
      }
    }
 
    public override void ViewDidLoad ()
    {
      UITableView tableview = new UITableView();
      tableview.Source = new DoNothing();
 
      Console.WriteLine(&quot;source null? &quot; + (tableview.Source == null));  //
false
      tableview.ScrollAnimationEnded += (s, e) =&gt; { };
      Console.WriteLine(&quot;source null? &quot; + (tableview.Source == null));  //
true, what happened here?
    }
---

we worked around the problem by saving the uitableview.source just before
subscribing to the event, then in the event handler we simply set the source
again. This seem to work and luckily we don't really need the source until
the event has fired, but I can't for my life understand WHY .source is
cleared on subscribing to the event, or what else happens that we haven't
noticed yet (hint: this is the real question that worries me).

This by the way, doesn't work either:

var tmp = tableview.Source;
tableview.ScrollAnimationEnded += (s, e) =&gt; { };
tableview.Source = tmp;

Because setting Source to tmp clears the subscribed event. Is this really
expected behavior, are we missing something? Or maybe, what is the proper
way to subscribe to ScrollAnimationEnded without strange side effects?

/ V

--
View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/Subscribing-to-ScrollAnimationEnded-on-a-uitableview-has-strange-results-tp4451815p4451815.html">http://monotouch.2284126.n4.nabble.com/Subscribing-to-ScrollAnimationEnded-on-a-uitableview-has-strange-results-tp4451815p4451815.html</A>
Sent from the MonoTouch mailing list archive at Nabble.com.
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008469.html">[MonoTouch] WCF RESTful Service Error Message
</A></li>
	<LI>Next message: <A HREF="008474.html">[MonoTouch] Subscribing to ScrollAnimationEnded on a uitableview has strange results?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8473">[ date ]</a>
              <a href="thread.html#8473">[ thread ]</a>
              <a href="subject.html#8473">[ subject ]</a>
              <a href="author.html#8473">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
