<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] ICloneable and performance issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20ICloneable%20and%20performance%20issues&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001756.html">
   <LINK REL="Next"  HREF="001738.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] ICloneable and performance issues</H1>
    <B>Matt Greer</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20ICloneable%20and%20performance%20issues&In-Reply-To="
       TITLE="[MonoTouch] ICloneable and performance issues">matt.e.greer at gmail.com
       </A><BR>
    <I>Fri Dec 25 18:12:50 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001756.html">[MonoTouch] call method with one (or more) args from static	library via c#
</A></li>
        <LI>Next message: <A HREF="001738.html">[MonoTouch] loaded the &quot;DettaglioStruttura&quot; nib but the view outlet	was not set.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1735">[ date ]</a>
              <a href="thread.html#1735">[ thread ]</a>
              <a href="subject.html#1735">[ subject ]</a>
              <a href="author.html#1735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey all,

I am writing a game with MonoTouch (I mostly hang out on the IRC channel,
this is my first mailing list post). In my game I have a Segment class,
which is just two PointF's bound together. Segments are used all over the
place and often, thrown into collections, those collections are iterated
over often, etc. My most prolific class in the game.

My tests needed to clone Segments, so I made Segment implement ICloneable.
Nowhere in my actual game do I ever call Clone(), just my tests.

But with Segment implementing ICloneable, my game's frame rate drops to
12fps. Without it implement it, it's a nice 60fps. That literally is the
only difference. I can just comment out the &quot;: ICloneable {&quot; at the top of
the class and *bam!* 5x the performance! It's rather amazing actually :)

I added in &quot;Console.WriteLine(Environment.StackTrace);&quot; inside my Clone()
method thinking something at the runtime level was making use of Clone()
without me knowing it. The method is never called.


Any ideas what the issue is? Is the MT runtime doing something different
with classes that implement ICloneable? Or perhaps they get compiled
differently?





It doesn't affect me, I just won't use ICloneable, not a big deal. But it is
curious.

Thanks,
Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20091225/afd0c439/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20091225/afd0c439/attachment.html</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001756.html">[MonoTouch] call method with one (or more) args from static	library via c#
</A></li>
	<LI>Next message: <A HREF="001738.html">[MonoTouch] loaded the &quot;DettaglioStruttura&quot; nib but the view outlet	was not set.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1735">[ date ]</a>
              <a href="thread.html#1735">[ thread ]</a>
              <a href="subject.html#1735">[ subject ]</a>
              <a href="author.html#1735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
