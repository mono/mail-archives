<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] How do you start a new thread?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20How%20do%20you%20start%20a%20new%20thread%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001754.html">
   <LINK REL="Next"  HREF="001742.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] How do you start a new thread?</H1>
    <B>James Moore</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20How%20do%20you%20start%20a%20new%20thread%3F&In-Reply-To="
       TITLE="[MonoTouch] How do you start a new thread?">james at restphone.com
       </A><BR>
    <I>Mon Dec 28 11:24:30 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001754.html">[MonoTouch] Moonlight for UI rending on smartphones
</A></li>
        <LI>Next message: <A HREF="001742.html">[MonoTouch] How do you start a new thread?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1741">[ date ]</a>
              <a href="thread.html#1741">[ thread ]</a>
              <a href="subject.html#1741">[ subject ]</a>
              <a href="author.html#1741">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I tried to create a new thread by doing:

		// This method is required in iPhoneOS 3.0
		public override void OnActivated (UIApplication application)
		{
			t = new NSThread(this, new Selector (&quot;EntryPoint&quot;), this);
			t.Name = &quot;mythread&quot;;
			t.Start ();
		}

		[Export(&quot;EntryPoint&quot;)]
		void EntryPointFoo(NSObject _)
		{
			NSAutoreleasePool p = new NSAutoreleasePool();
			Console.WriteLine(&quot;Hello new thread&quot;);
			p.Dispose();
		}

But that dies with this error:


Native stacktrace:

	0   IPhoneProjectWithFSharp             0x000bb3ed
mono_handle_native_sigsegv + 367
	1   IPhoneProjectWithFSharp             0x0000d3fa
mono_sigsegv_signal_handler + 189
	2   libSystem.B.dylib                   0x959829bb _sigtramp + 43
	3   ???                                 0xffffffff 0x0 + 4294967295
	4   IPhoneProjectWithFSharp             0x001bbfd7 mono_runtime_invoke + 137
	5   IPhoneProjectWithFSharp             0x0026c127 get_mono_method + 52
	6   IPhoneProjectWithFSharp             0x0026c15c get_method_for_selector + 43
	7   IPhoneProjectWithFSharp             0x0026ddad monotouch_trampoline + 161
	8   Foundation                          0x00635f7d -[NSThread main] + 45
	9   Foundation                          0x00635b18 __NSThread__main__ + 280
	10  libSystem.B.dylib                   0x95949fbd _pthread_start + 345
	11  libSystem.B.dylib                   0x95949e42 thread_start + 34

Debug info from gdb:

warning: Trying to remove a section from the ordered section list that
did not exist at 0x357000.
warning: Could not find object file
&quot;/var/folders/h-/h-sGPopnGs8IE5Vu1FU9ME+++TI/-Tmp-/tmp59b7e4e6.tmp/main.o&quot;
- no debug information available for
&quot;/var/folders/h-/h-sGPopnGs8IE5Vu1FU9ME+++TI/-Tmp-/tmp59b7e4e6.tmp/main.m&quot;.

Error connecting stdout and stderr (127.0.0.1:10001)
Attaching to process 29871.
Reading symbols for shared libraries . done
Reading symbols for shared libraries
..................................................................................
done
0x9591c8da in mach_msg_trap ()
  6 port# 0x5003 0x95927bfe in read$UNIX2003 ()
  5 port# 0x3a03 0x9591c8da in mach_msg_trap ()
  4 port# 0x2803 0x9591c916 in semaphore_wait_trap ()
  3 port# 0x2403 0x9594a806 in __semwait_signal ()
  2 port# 0x2303 0x9591c8da in mach_msg_trap ()
* 1 port# 0x207  0x9591c8da in mach_msg_trap ()

Thread 6 (process 29871):
#0  0x95927bfe in read$UNIX2003 ()
#1  0x000bb5e8 in mono_handle_native_sigsegv (signal=11,
ctx=0xb02d2bc0) at ../../../../mono/mini/mini-exceptions.c:1817
#2  0x0000d3fa in mono_sigsegv_signal_handler (_dummy=10,
info=0xb02d2b80, context=0xb02d2bc0) at
../../../../mono/mini/mini.c:4763
#3  &lt;signal handler called&gt;
#4  0x0000cd5e in mono_jit_runtime_invoke (method=0x580f474, obj=0x0,
params=0xb02d2c98, exc=0x0) at ../../../../mono/mini/mini.c:4500
#5  0x001bbfd7 in mono_runtime_invoke (method=0x580f474, obj=0x0,
params=0xb02d2c98, exc=0x0) at ../../../../mono/metadata/object.c:2604
#6  0x0026c127 in get_mono_method ()
#7  0x0026c15c in get_method_for_selector ()
#8  0x0026ddad in monotouch_trampoline ()
#9  0x00635f7d in -[NSThread main] ()
#10 0x00635b18 in __NSThread__main__ ()
#11 0x95949fbd in _pthread_start ()
#12 0x95949e42 in thread_start ()

Thread 5 (process 29871):
#0  0x9591c8da in mach_msg_trap ()
#1  0x9591d047 in mach_msg ()
#2  0x0048a382 in CFRunLoopRunSpecific ()
#3  0x00489c48 in CFRunLoopRunInMode ()
#4  0x034f1803 in RunWebThread ()
#5  0x95949fbd in _pthread_start ()
#6  0x95949e42 in thread_start ()

Thread 4 (process 29871):
#0  0x9591c916 in semaphore_wait_trap ()
#1  0x0014ec24 in finalizer_thread (unused=0x0) at
../../../../mono/metadata/gc.c:1026
#2  0x001f6657 in start_wrapper (data=0x51283a0) at
../../../../mono/metadata/threads.c:662
#3  0x00239194 in thread_start_routine (args=0x5802c34) at
../../../../mono/io-layer/wthreads.c:286
#4  0x0026945b in GC_start_routine (arg=0x55c8f60) at
../../../libgc/pthread_support.c:1390
#5  0x95949fbd in _pthread_start ()
#6  0x95949e42 in thread_start ()

Thread 3 (process 29871):
#0  0x9594a806 in __semwait_signal ()
#1  0x95976441 in nanosleep$UNIX2003 ()
#2  0x00219ace in collection_thread (unused=0x0) at
../../../../mono/io-layer/collection.c:34
#3  0x95949fbd in _pthread_start ()
#4  0x95949e42 in thread_start ()

Thread 2 (process 29871):
#0  0x9591c8da in mach_msg_trap ()
#1  0x9591d047 in mach_msg ()
#2  0x001115f6 in mach_exception_thread (arg=0x0) at
../../../../mono/mini/mini-darwin.c:138
#3  0x95949fbd in _pthread_start ()
#4  0x95949e42 in thread_start ()

Thread 1 (process 29871):
#0  0x9591c8da in mach_msg_trap ()
#1  0x9591d047 in mach_msg ()
#2  0x0048a382 in CFRunLoopRunSpecific ()
#3  0x00489c48 in CFRunLoopRunInMode ()
#4  0x032b378d in GSEventRunModal ()
#5  0x032b3852 in GSEventRun ()
#6  0x00f70003 in UIApplicationMain ()
#7  0x050e6a59 in ?? ()
#8  0x050e6992 in ?? ()
#9  0x050e61f5 in ?? ()
#10 0x050e6131 in ?? ()
#11 0x050e618c in ?? ()
#12 0x0000d23a in mono_jit_runtime_invoke (method=0x585d864, obj=0x0,
params=0xbfffef38, exc=0x0) at ../../../../mono/mini/mini.c:4693
#13 0x001bbfd7 in mono_runtime_invoke (method=0x585d864, obj=0x0,
params=0xbfffef38, exc=0x0) at ../../../../mono/metadata/object.c:2604
#14 0x001bdc56 in mono_runtime_exec_main (method=0x585d864,
args=0x7049930, exc=0x0) at ../../../../mono/metadata/object.c:3545
#15 0x001bd517 in mono_runtime_run_main (method=0x585d864, argc=0,
argv=0xbffff0e0, exc=0x0) at ../../../../mono/metadata/object.c:3319
#16 0x00091267 in mono_jit_exec (domain=0x50cde58, assembly=0x514e230,
argc=1, argv=0xbffff0dc) at ../../../../mono/mini/driver.c:1094
#17 0x00270ff8 in main ()

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================






-- 
James Moore
<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">james at restphone.com</A>
<A HREF="http://jamesmoorecode.blogspot.com/">http://jamesmoorecode.blogspot.com/</A>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001754.html">[MonoTouch] Moonlight for UI rending on smartphones
</A></li>
	<LI>Next message: <A HREF="001742.html">[MonoTouch] How do you start a new thread?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1741">[ date ]</a>
              <a href="thread.html#1741">[ thread ]</a>
              <a href="subject.html#1741">[ subject ]</a>
              <a href="author.html#1741">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
