<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] detect hardware type snippet
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20detect%20hardware%20type%20snippet&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002196.html">
   <LINK REL="Next"  HREF="002197.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] detect hardware type snippet</H1>
    <B>Natalia Portillo</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20detect%20hardware%20type%20snippet&In-Reply-To="
       TITLE="[MonoTouch] detect hardware type snippet">claunia at claunia.com
       </A><BR>
    <I>Tue Sep 14 12:01:24 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002196.html">[MonoTouch] Image In Cell Can Leak Memory
</A></li>
        <LI>Next message: <A HREF="002197.html">[MonoTouch] detect hardware type snippet
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2183">[ date ]</a>
              <a href="thread.html#2183">[ thread ]</a>
              <a href="subject.html#2183">[ subject ]</a>
              <a href="author.html#2183">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The snippet code on <A HREF="http://wiki.monotouch.net/HowTo/Device/Detect_the_Hardware_Type">http://wiki.monotouch.net/HowTo/Device/Detect_the_Hardware_Type</A> is wholly incorrect.

There is no &quot;iPhone 2G&quot;, iPhone1,2 corresponds to iPhone 3G and iPhone 2,1 to iPhone 3GS.
Also, if simulator is running under x64 kernel the answer will not be i386 but x86-64.

I also found an enhanced version to detect iPhone 4 and exact simulator on <A HREF="http://www.bscheiman.org/2010/08/30/detecting-hardware-type-monotouch/">http://www.bscheiman.org/2010/08/30/detecting-hardware-type-monotouch/</A> also incorrect.

I pasted a corrected version on <A HREF="http://pastebin.com/sfn5d37q">http://pastebin.com/sfn5d37q</A>

Note that the sysctl works on any BSD provided the property is present and the constant is changed for /usr/lib/libSystem.dylib
Property as &quot;hw.machine&quot; returns model on iOS, running kernel arch on Mac OS X (and Simulator, I have not tested on NeXTStep/OpenStep but as mono is not available there *sighs*).
Property as &quot;hw.model&quot; returns the Macintosh computer model (like iMac1,1) on Mac OS X (and when run under Simulator).

Should work on any BSD (FreeBSD, DragonFly BSD, NetBSD, OpenBSD) changing the P/Invoke to the appropiate library and property to the correct one (hw.machine is available I think hw.model is not).

Executing sysctl -A in a terminal will show you all available properties on that exact BSD/Darwin (including iOS)

I hope it is useful.
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002196.html">[MonoTouch] Image In Cell Can Leak Memory
</A></li>
	<LI>Next message: <A HREF="002197.html">[MonoTouch] detect hardware type snippet
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2183">[ date ]</a>
              <a href="thread.html#2183">[ thread ]</a>
              <a href="subject.html#2183">[ subject ]</a>
              <a href="author.html#2183">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
