<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Hardware accelerated crypto in MT 5.3?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Hardware%20accelerated%20crypto%20in%20MT%205.3%3F&In-Reply-To=%3CCAFbLP%2BgnmdzGDLYm%2BbustjGTspucyWCWAmaSciizarxix20-3g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010638.html">
   <LINK REL="Next"  HREF="010635.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Hardware accelerated crypto in MT 5.3?</H1>
    <B>Ren&#233; Ruppert</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Hardware%20accelerated%20crypto%20in%20MT%205.3%3F&In-Reply-To=%3CCAFbLP%2BgnmdzGDLYm%2BbustjGTspucyWCWAmaSciizarxix20-3g%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Hardware accelerated crypto in MT 5.3?">rene.ruppert at gmail.com
       </A><BR>
    <I>Tue Jul 10 11:28:54 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010638.html">[MonoTouch] StringElement Button - As Stateful Button
</A></li>
        <LI>Next message: <A HREF="010635.html">[MonoTouch] Hardware accelerated crypto in MT 5.3?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10632">[ date ]</a>
              <a href="thread.html#10632">[ thread ]</a>
              <a href="subject.html#10632">[ subject ]</a>
              <a href="author.html#10632">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

from the docs of 5.3:

Common Crypto

MonoTouch will now use the iOS CommonCrypto libraries to provide some of
the functionality exposed by its APIs. This replaces our managed
implementations with the native versions. It is now used for for digest
(hash) and symmetric ciphers, leveraging the hardware acceleration for
SHA-1 and AES under the right circumstances.


I'm using code like the one below for hashing and encryption. How can I
take advantage of HW crypto? Or will it automatically become faster?

/// &lt;summary&gt;

/// Calculates the SHA256 hash value of the data &lt;c&gt;b&lt;/c&gt;.

/// &lt;/summary&gt;

/// &lt;detail declaration=&quot;public static&quot;/&gt;

/// &lt;param name=&quot;b&quot; type=&quot;byte[]&quot;&gt;The data of which the hash value is
calculated.&lt;/param&gt;

/// &lt;returns type=&quot;byte[]&quot;&gt;The SHA256 hash value of &lt;c&gt;b&lt;/c&gt;.&lt;/returns&gt;

public static byte[] CalculateHash ( byte[] b )

{

SHA256Managed oSha = new SHA256Managed ();

byte[] aHash = oSha.ComputeHash ( b );

 return aHash;

}

 /// &lt;summary&gt;

/// Computes SHA256 hash from a string

/// &lt;/summary&gt;

/// &lt;param name=&quot;sData&quot;&gt;&lt;/param&gt;

/// &lt;returns&gt;&lt;/returns&gt;

public static string ComputeSHA256HashUnicode ( string sData )

{

byte[] aData, aHash;


 UnicodeEncoding oEncoding = new UnicodeEncoding ();

aData = oEncoding.GetBytes ( sData );

aHash = CalculateHash(aData);

string sResult = oEncoding.GetString ( aHash );

return sResult;

}


public static void Crypt ( Stream oFileIn, Stream oFileOut,
ICryptoTransform oTrans )

{

// Declare local variables

byte[] buf = new byte[ 4096]; // Read buffer

int iLen; // Current buffer length

long lReadLen = 0; // Total number of bytes written.

long lTotLen = oFileIn.Length; // Total length of the input file.


 // Move to the beginning of the file

if ( oFileIn.Position &gt; 0 &amp;&amp; oFileIn.CanSeek )

oFileIn.Seek ( 0, SeekOrigin.Begin );


 // Create the cryptographic stream

CryptoStream encStream = new CryptoStream (oFileOut, oTrans,
CryptoStreamMode.Write);


 // Read from the input file, then encrypt/decrypt and write to the output
file.

while ( lReadLen &lt; lTotLen )

{

iLen = oFileIn.Read ( buf, 0, buf.Length );

encStream.Write ( buf, 0, iLen );

lReadLen += iLen;

}

 // Clean up

encStream.Close ();

}


Ren&#233;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120710/3a89e168/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120710/3a89e168/attachment-0001.html</A>&gt;
</PRE>


















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010638.html">[MonoTouch] StringElement Button - As Stateful Button
</A></li>
	<LI>Next message: <A HREF="010635.html">[MonoTouch] Hardware accelerated crypto in MT 5.3?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10632">[ date ]</a>
              <a href="thread.html#10632">[ thread ]</a>
              <a href="subject.html#10632">[ subject ]</a>
              <a href="author.html#10632">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
