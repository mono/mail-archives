<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Hardware accelerated crypto in MT 5.3?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Hardware%20accelerated%20crypto%20in%20MT%205.3%3F&In-Reply-To=%3CCACp3Zk14tevjk%2BHQc-gMdduG7oLvNT7c3atih-CUQQ44UL9AWw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010643.html">
   <LINK REL="Next"  HREF="010644.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Hardware accelerated crypto in MT 5.3?</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Hardware%20accelerated%20crypto%20in%20MT%205.3%3F&In-Reply-To=%3CCACp3Zk14tevjk%2BHQc-gMdduG7oLvNT7c3atih-CUQQ44UL9AWw%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Hardware accelerated crypto in MT 5.3?">sebastien at xamarin.com
       </A><BR>
    <I>Mon Jul 16 11:38:28 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010643.html">[MonoTouch] Hardware accelerated crypto in MT 5.3?
</A></li>
        <LI>Next message: <A HREF="010644.html">[MonoTouch] Try/Catch ok?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10732">[ date ]</a>
              <a href="thread.html#10732">[ thread ]</a>
              <a href="subject.html#10732">[ subject ]</a>
              <a href="author.html#10732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Ren&#233;,

Several answers inline...

On Tue, Jul 10, 2012 at 8:39 AM, Ren&#233; Ruppert &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">rene.ruppert at gmail.com</A>&gt; wrote:
&gt;<i> &quot;On iOS this could default to the native implementation&quot; - I really would
</I>&gt;<i> like to know if it WILL.
</I>&gt;<i> Are they compatible?
</I>
Yes. The .NET crypto stack is pluggable (new or replacement
implementations) and depends on using compatible implementations.

&gt;<i> Meaning: If I used SHA256Managed so far and now switch,
</I>&gt;<i> can data still be decrypted?
</I>
SHA256 is an hash algorithm, so it does not encrypt (not decrypt) but
the CommonCrypto version is fully compatible with the .NET version.
Mono's whole crypto test suite (more than 2000 test cases) have been
ported to Touch.Unit to ensure all implementations behaves
identically.

...

&gt;&gt;<i> Don't use 'new SHA256Managed', use 'SHA256.Create ()'. This way the
</I>&gt;&gt;<i> mono runtime will be able to select the 'best' SHA256 implementation
</I>&gt;&gt;<i> to use. On iOS this could default to the native implementation, on
</I>&gt;&gt;<i> desktop this will default to SHA256Managed.
</I>
That's a very good advice. That allows you to reuse your existing code
on .NET, Mono, Mono for Android... without change.

Now the &quot;dynamic&quot; switching allowed by CryptoConfig (the underlying
code under .Create methods) requires the runtime to load extra code at
runtime. That's not possible with iOS. This is explained in more
details in my blogs entries on the subject [1] [2] [3]. IOW for iOS
(only) using 'new SHA256Managed' or 'SHA256.Create ()' will be
identical and both will use the native (not managed) SHA256
implementation that CommonDigest offers.

[1] <A HREF="http://spouliot.wordpress.com/2012/04/30/managed-crypto-vs-commoncrypto/">http://spouliot.wordpress.com/2012/04/30/managed-crypto-vs-commoncrypto/</A>
[2] <A HREF="http://spouliot.wordpress.com/2012/05/01/managed-crypto-vs-commoncrypto-digesting-results/">http://spouliot.wordpress.com/2012/05/01/managed-crypto-vs-commoncrypto-digesting-results/</A>
[3] <A HREF="http://spouliot.wordpress.com/2012/05/02/managed-crypto-vs-commoncrypto-deciphering-results/">http://spouliot.wordpress.com/2012/05/02/managed-crypto-vs-commoncrypto-deciphering-results/</A>

...

&gt;&gt;<i> &gt; from the docs of 5.3:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Common Crypto
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; MonoTouch will now use the iOS CommonCrypto libraries to provide some of
</I>&gt;&gt;<i> &gt; the
</I>&gt;&gt;<i> &gt; functionality exposed by its APIs. This replaces our managed
</I>&gt;&gt;<i> &gt; implementations
</I>&gt;&gt;<i> &gt; with the native versions. It is now used for for digest (hash) and
</I>&gt;&gt;<i> &gt; symmetric
</I>&gt;&gt;<i> &gt; ciphers, leveraging the hardware acceleration for SHA-1 and AES under
</I>&gt;&gt;<i> &gt; the
</I>&gt;&gt;<i> &gt; right circumstances.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I'm using code like the one below for hashing and encryption. How can I
</I>&gt;&gt;<i> &gt; take
</I>&gt;&gt;<i> &gt; advantage of HW crypto?
</I>
If the &quot;right&quot; conditions are present (see my blog for details) then
iOS (not MonoTouch) will enable the cryptographic hardware.

&gt;&gt;<i> &gt; Or will it automatically become faster?
</I>
That's automatic (and out of the developer control). However even if
HW is not enabled (or not available for older devices) then it will
still be faster since it will be using optimized native code versions
of the algorithms.

Sebastien
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010643.html">[MonoTouch] Hardware accelerated crypto in MT 5.3?
</A></li>
	<LI>Next message: <A HREF="010644.html">[MonoTouch] Try/Catch ok?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10732">[ date ]</a>
              <a href="thread.html#10732">[ thread ]</a>
              <a href="subject.html#10732">[ subject ]</a>
              <a href="author.html#10732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
