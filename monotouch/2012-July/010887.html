<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Compiler crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Compiler%20crash&In-Reply-To=%3C031a01cd699f%24ec65e630%24c531b290%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010886.html">
   <LINK REL="Next"  HREF="010889.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Compiler crash</H1>
    <B>Randy Ficker</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Compiler%20crash&In-Reply-To=%3C031a01cd699f%24ec65e630%24c531b290%24%40gmail.com%3E"
       TITLE="[MonoTouch] Compiler crash">randyficker at gmail.com
       </A><BR>
    <I>Tue Jul 24 13:26:23 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010886.html">[MonoTouch] Dns.BeginGetHostEntry
</A></li>
        <LI>Next message: <A HREF="010889.html">[MonoTouch] Compiler crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10887">[ date ]</a>
              <a href="thread.html#10887">[ thread ]</a>
              <a href="subject.html#10887">[ subject ]</a>
              <a href="author.html#10887">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In the middle of developing a large MonoTouch app, I started getting the
&quot;The compiler appears to have crashed&quot; error.  This was frustrating because
it gave no indication as to where in my code the issue was, and it still
crashed even after undoing my recent changes.

 

After spending considerable time ripping code out of the project, I was able
to make a short repro:  (it's a large project at over 400k lines, so don't
ask how long it took to narrow it down to this J)

 

struct SomeStruct1

{

       SomeStruct2 One;

       SomeStruct2 Two;

}

struct SomeStruct2

{

}

class SomeClass

{

       SomeStruct1? foo;

}

 

I hope you guys can provide me work a work-around to this ASAP, as I'm
currently out of commission until I can get my project to build.

 

All components are up-to-date with the &quot;stable&quot; channel.  &quot;smcs --version&quot;
gives 2.10.7.0. 

 

Here are the complete repro steps:

 

1.       Make a new iPhone project (I used the &quot;Empty Project&quot; template)

2.       Paste the code above into Main.cs

3.       Build, and you'll get the following error:  (full build output
visible at <A HREF="http://pastebin.com/CMRBkkB4">http://pastebin.com/CMRBkkB4</A> )

 

* Assertion at ../../../../../mono/mono/metadata/class.c:1740, condition
`class-&gt;image-&gt;dynamic || field-&gt;offset &gt; 0' not met
at (wrapper managed-to-native)
System.Reflection.Emit.TypeBuilder.create_runtime_class
(System.Reflection.Emit.TypeBuilder,System.Reflection.Emit.TypeBuilder)
&lt;0xffffffff&gt;

1.    at System.Reflection.Emit.TypeBuilder.CreateType () &lt;0x0039f&gt;

2.    at Mono.CSharp.TypeContainer.CloseType () &lt;0x0019b&gt;

3.    at Mono.CSharp.ModuleContainer.CloseType () &lt;0x00080&gt;

4.    at Mono.CSharp.Driver.Compile () &lt;0x0047e&gt;

5.    at Mono.CSharp.Driver.Main (string[]) &lt;0x000af&gt;

6.    at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_int_object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

 

 

Any help is greatly appreciated!

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120724/9af42273/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120724/9af42273/attachment.html</A>&gt;
</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010886.html">[MonoTouch] Dns.BeginGetHostEntry
</A></li>
	<LI>Next message: <A HREF="010889.html">[MonoTouch] Compiler crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10887">[ date ]</a>
              <a href="thread.html#10887">[ thread ]</a>
              <a href="subject.html#10887">[ subject ]</a>
              <a href="author.html#10887">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
