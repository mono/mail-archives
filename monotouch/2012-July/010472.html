<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] connecting to web services - major problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20connecting%20to%20web%20services%20-%20major%20problem&In-Reply-To=%3C1341321818632-4655735.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010466.html">
   <LINK REL="Next"  HREF="010473.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] connecting to web services - major problem</H1>
    <B>umauk01</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20connecting%20to%20web%20services%20-%20major%20problem&In-Reply-To=%3C1341321818632-4655735.post%40n4.nabble.com%3E"
       TITLE="[MonoTouch] connecting to web services - major problem">umauk at yahoo.com
       </A><BR>
    <I>Tue Jul  3 13:23:38 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010466.html">[MonoTouch] OpenGL ES 1.1 depth buffer not working using MonoTouch	on iOS 5
</A></li>
        <LI>Next message: <A HREF="010473.html">[MonoTouch] Using Camera.TakePicture in Monotouch.Dialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10472">[ date ]</a>
              <a href="thread.html#10472">[ thread ]</a>
              <a href="subject.html#10472">[ subject ]</a>
              <a href="author.html#10472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Friends,

I'm having problem connecting to https SOAP web services - trying from many
days with no success. Please help. Please find the sample project attached. 
<A HREF="http://monotouch.2284126.n4.nabble.com/file/n4655735/ipad12Mono.zip">http://monotouch.2284126.n4.nabble.com/file/n4655735/ipad12Mono.zip</A>
ipad12Mono.zip 

tried to contact monotouch support team. they suggested below stuff. but, I
could not work out .. working code. Please help.

Thanks
Uma

=== Support Emails from Monotouch Team ==============
Bryan Moulton
JUN 28, 2012  |  08:59PM EDT
Uma,

I would recommend using a network monitor on the host machine to watch how
your header is being created. Also, you need to parse the stream like an XML
document and INSERT the authorization sections only. Most of the soap
headers are created automatically.

Also, your web reference is incomplete. You need to use the Add Web
Reference dialog in MonoDevelop, which will create a References.cs file. Add
the attribute to these methods.

Thanks!
-Bryan

----------------------

Please, rate my reply: <A HREF="http://nicereply.com/xamarin/16386693/12827">http://nicereply.com/xamarin/16386693/12827</A>
Uma
JUN 27, 2012  |  10:37AM EDT
Hi Bryan,

I tried many many ways, no success. Please find the project attached. 

I have created a soapExtenstion and soapExtensionAttributes and
[customSoapHeader] to attach on top of each web method.

Please help to fix this. 

Thanks
Uma

________________________________
From: Xamarin Support &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">support at xamarin.com</A>&gt;
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">umauk at yahoo.com</A>
Sent: Thursday, 21 June 2012, 2:59
Subject: Re: &quot;Invalid Security Header&quot; error
Bryan Moulton
JUN 21, 2012  |  09:59PM EDT
Uma,

It looks like you'll have to manually add the ttauth header. I've found a
few good articles on how to do that:

<A HREF="http://msdn.microsoft.com/en-us/library/ms972353.aspx">http://msdn.microsoft.com/en-us/library/ms972353.aspx</A>
<A HREF="http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapextension.aspx">http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapextension.aspx</A>
<A HREF="http://forums.asp.net/t/1137408.aspx">http://forums.asp.net/t/1137408.aspx</A>

You'll need two subclasses: SoapExtension and SoapExtensionAttribute. Your
SoapExtension will handle the data stream, while the SoapExtensionAttribute
should be applied to all the web methods in the References.cs file.

I hope this gives you a little more to work with. Sounds like a tricky
situation. Let me know if I can help you further.

Thanks!
-Bryan
Uma
JUN 18, 2012  |  11:00AM EDT
Hi Bryan,

following last email I send you, please find the below soap header format
3rd party company (timetrade.com) requests..., please send me a code to
include in my project.

Many thanks
Uma


&lt;S:Envelopexmlns:S=&quot;<A HREF="http://schemas.xmlsoap.org/soap/envelope/&amp;quot;">http://schemas.xmlsoap.org/soap/envelope/&quot;</A>
xmlns:wsse=&quot;<A HREF="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecuritysecext-">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecuritysecext-</A>
1.0.xsd&quot;
xmlns:wsu=&quot;<A HREF="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurityutility-">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurityutility-</A>
1.0.xsd&quot; xmlns:xs=&quot;<A HREF="http://www.w3.org/2001/XMLSchema&amp;quot;">http://www.w3.org/2001/XMLSchema&quot;</A>&gt;
&lt;S:Header&gt;
&lt;ttauth:authHeaderxmlns:ttauth=&quot;<A HREF="http://timetrade.timecommerce/services&amp;quot;">http://timetrade.timecommerce/services&quot;</A>&gt;
&lt;ttauth:Accessuserxmlns:ttauth=&quot;<A HREF="http://timetrade.timecommerce/services&amp;quot;">http://timetrade.timecommerce/services&quot;</A>&gt;
ApiUserFor136
&lt;/ttauth:Accessuser&gt;
&lt;ttauth:Accesscodexmlns:ttauth=&quot;<A HREF="http://timetrade.timecommerce/services&amp;quot;">http://timetrade.timecommerce/services&quot;</A>&gt;
testing
&lt;/ttauth:Accesscode&gt;
&lt;/ttauth:authHeader&gt;
&lt;wsse:SecurityS:mustUnderstand=&quot;1&quot;&gt;
&lt;wsse:UsernameToken
xmlns:ns14=&quot;<A HREF="http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512">http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512</A>&quot;
xmlns:ns13=&quot;<A HREF="http://www.w3.org/2003/05/soap-envelope">http://www.w3.org/2003/05/soap-envelope</A>&quot;
wsu:Id=&quot;uuid_b4cff845-bbd9-4b21-a0ea-63635fe443d8&quot;&gt;
&lt;wsse:Username&gt;APIUSER136&lt;/wsse:Username&gt;
&lt;wsse:Password
Type=&quot;<A HREF="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wssusername-">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wssusername-</A>
token-profile-1.0#PasswordText&quot;&gt;testingws&lt;/wsse:Password&gt;
&lt;wsse:UsernameToken&gt;
&lt;/wsse:Security&gt;
&lt;/S:Header&gt;
&lt;S:Body&gt;
&lt;ns2:getAppointmentByConfirmationNumber
xmlns:ns2=&quot;<A HREF="http://timetrade.timecommerce/services/ws">http://timetrade.timecommerce/services/ws</A>&quot;
xmlns:ns3=&quot;<A HREF="http://timetrade.timecommerce/services/appointment">http://timetrade.timecommerce/services/appointment</A>&quot;&gt;
&lt;confirmationNumber&gt;VBZ2S49W&lt;/confirmationNumber&gt;
&lt;/ns2:getAppointmentByConfirmationNumber&gt;
&lt;/S:Body&gt;
&lt;/S:Envelope&gt;
________________________________
From: Xamarin Support &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">support at xamarin.com</A>&gt;
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">umauk at yahoo.com</A>
Sent: Sunday, 17 June 2012, 22:35
Subject: Re: &quot;Invalid Security Header&quot; error
Uma
JUN 18, 2012  |  05:37AM EDT
Hi Bryan,
 
No, it is a 3rd party company called <A HREF="http://www.timetrade.com/">http://www.timetrade.com/</A> who provide
the appointment system. My plan was to implement Monotouch with Resco Weekly
Schedule (3rd party ios control) which supports monotouch - suits my senerio
perfectly.
 
problem is connecting timetrade.com web services. please help.
 
Thanks
Uma Jayaraman
________________________________
From: Xamarin Support &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">support at xamarin.com</A>&gt;
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">umauk at yahoo.com</A>
Sent: Sunday, 17 June 2012, 22:35
Subject: Re: &quot;Invalid Security Header&quot; error
Bryan Moulton
JUN 17, 2012  |  05:35PM EDT
Hi Uma,

Do you have access to the web service itself? In order for that to work you
would have to change the service methods/contracts.

-Bryan
Uma
JUN 17, 2012  |  05:00PM EDT
Hi Bryan,

This is the URL which I will be calling : :
<A HREF="https://nc1devapi3.timetradesystems.com:443/tc/api/2.0/AppointmentServices?wsdl">https://nc1devapi3.timetradesystems.com:443/tc/api/2.0/AppointmentServices?wsdl</A>

using monodevelop in Mac envoronment it is SOAP call. Can you please provide
me the code to make the call how to send username and password for SOAP
header for each request. it will be help full. I'm trying form past 4 days
.. not getting the way around...


Thanks and regards,
Uma

________________________________
From: Xamarin Support &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">support at xamarin.com</A>&gt;
To: <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">umauk at yahoo.com</A>
Sent: Sunday, 17 June 2012, 21:09
Subject: Re: &quot;Invalid Security Header&quot; error
Bryan Moulton
JUN 17, 2012  |  04:09PM EDT
Hello Uma,

I've done some research and may have some bad news for you. I've found the
process for using SOAP security in .NET here:
<A HREF="http://msdn.microsoft.com/en-us/library/ms819938.aspx">http://msdn.microsoft.com/en-us/library/ms819938.aspx</A>

But this relies on a Microsoft library that isn't supported by the Mono
framework. I'm assuming you're using WCF for your web service?

An alternative would be to send the credentials with every request as a
parameter. Or, call a login function that will generate a token or hash that
can be used to send with every request. Since you're using SSL this might
not be a concern.

Let me know if this answers your question.

Thanks!
-Bryan
Uma
JUN 17, 2012  |  09:51AM EDT
Original message
Hi Support,

Monotouch everything latest updated.

I am trying to connect to https SOAP web service with username and password
auth, getting &quot;Invalid Security Header&quot; error please help.

url is :
<A HREF="https://nc1devapi3.timetradesystems.com:443/tc/api/2.0/AppointmentServices?wsdl">https://nc1devapi3.timetradesystems.com:443/tc/api/2.0/AppointmentServices?wsdl</A>

copied the client reference files from silverlight project in to mono
develop   and don't understand how to pass the username and password to SOAP
security header.

ttApptWS.AppointmentServices ap = new ttApptWS.AppointmentServices();
ap.getAPIVersion();

ap.ClientCredientials --????? does not exist to setup the username and
password please help.

Thanks
Uma

--
View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/connecting-to-web-services-major-problem-tp4655735.html">http://monotouch.2284126.n4.nabble.com/connecting-to-web-services-major-problem-tp4655735.html</A>
Sent from the MonoTouch mailing list archive at Nabble.com.
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010466.html">[MonoTouch] OpenGL ES 1.1 depth buffer not working using MonoTouch	on iOS 5
</A></li>
	<LI>Next message: <A HREF="010473.html">[MonoTouch] Using Camera.TakePicture in Monotouch.Dialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10472">[ date ]</a>
              <a href="thread.html#10472">[ thread ]</a>
              <a href="subject.html#10472">[ subject ]</a>
              <a href="author.html#10472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
