<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] How to add event handler for custom UITableCell button (without it being called many times)? - Email found in subject
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20How%20to%20add%20event%20handler%20for%20custom%20UITableCell%0A%20button%20%28without%20it%20being%20called%20many%20times%29%3F%20-%20Email%20found%20in%20subject&In-Reply-To=DD088E6E0805DA4ABF0235F11CD07D6F2ED53FBC%40SXSLAKL002.xceptionsoftware.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005064.html">
   <LINK REL="Next"  HREF="005066.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] How to add event handler for custom UITableCell button (without it being called many times)? - Email found in subject</H1>
    <B>ayoung</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20How%20to%20add%20event%20handler%20for%20custom%20UITableCell%0A%20button%20%28without%20it%20being%20called%20many%20times%29%3F%20-%20Email%20found%20in%20subject&In-Reply-To=DD088E6E0805DA4ABF0235F11CD07D6F2ED53FBC%40SXSLAKL002.xceptionsoftware.com"
       TITLE="[MonoTouch] How to add event handler for custom UITableCell button (without it being called many times)? - Email found in subject">andrewdyoung at gmail.com
       </A><BR>
    <I>Mon Sep 12 15:44:56 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="005064.html">[MonoTouch] How to add event handler for custom UITableCell button (without it being called many times)? - Email found in subject
</A></li>
        <LI>Next message: <A HREF="005066.html">[MonoTouch] Background Audio with AVPlayer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5083">[ date ]</a>
              <a href="thread.html#5083">[ thread ]</a>
              <a href="subject.html#5083">[ subject ]</a>
              <a href="author.html#5083">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Have you ever considered using NSNotifications? There are scenarios where using notification-type eventing is better than using C# events and delegates handlers. This is probably one of those times.

Advantages:
Using notifications don't up (ref++) the object reference counts like C# events do. This means GC can clean up your TableView, Source and Cells with very little clean up code to unhook events
You don't have to manage how many times events are hooked up. It looks like this is the kind of problem you're having.

Just have your TableCell publish a notification and have your TableSource observe/subscribe to that notification.


<A HREF="http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html">http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html</A> 


On Monday, September 12, 2011 at 6:40, Dino [via MonoTouch] wrote:

&gt;<i>  Something else to keep in mind that has bitten me in the past: 
</I>&gt;<i> 
</I>&gt;<i> If you present a confirmation dialog, remember that while it's displayed if there's any chance the table could refresh (and thus re-load that cell with a different set of parameters) the wrong &quot;cell&quot; will get acted on instead. This was happening to me because the device was getting TCP communications generated from elsewhere that would alter its list of cells - sometimes removing one, which might cause the cell to be re-populated with different data. 
</I>&gt;<i> 
</I>&gt;<i> Because only one cell could ever have an active confirmation dialog at any given time, I loaded the parameters of that cell into static properties, and acted on the static properties once the user confirmed. 
</I>&gt;<i> 
</I>&gt;<i> Dino 
</I>&gt;<i> 
</I>&gt;<i> -----Original Message----- 
</I>&gt;<i> From: Steve Keane [mailto:[hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=0)] 
</I>&gt;<i> Sent: Monday, September 12, 2011 8:35 AM 
</I>&gt;<i> To: Dean Cleaver 
</I>&gt;<i> Subject: RE: [MonoTouch] How to add event handler for custom UITableCell button (without it being called many times)? - Email found in subject 
</I>&gt;<i> 
</I>&gt;<i> Thanks. That makes good sense, I will look into that. 
</I>&gt;<i> 
</I>&gt;<i> Thanks for the help! 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Steve 
</I>&gt;<i> 
</I>&gt;<i> -----Original Message----- 
</I>&gt;<i> From: Dean Cleaver [mailto:[hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=1)] 
</I>&gt;<i> Sent: 12 September 2011 13:56 
</I>&gt;<i> To: Dean Cleaver; Steve Keane; [hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=2) 
</I>&gt;<i> Subject: RE: [MonoTouch] How to add event handler for custom UITableCell button (without it being called many times)? - Email found in subject 
</I>&gt;<i> 
</I>&gt;<i> Sorry - not the constructor of the cell as that's only called once. I have properties on the cell that are set during GetCell and the values for that might have been passed in to the constructor of the DataSource. 
</I>&gt;<i> 
</I>&gt;<i> Dino 
</I>&gt;<i> 
</I>&gt;<i> -----Original Message----- 
</I>&gt;<i> From: [hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=3) [mailto:[hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=4)] On Behalf Of Dean Cleaver 
</I>&gt;<i> Sent: Monday, September 12, 2011 7:50 AM 
</I>&gt;<i> To: stevek; [hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=5) 
</I>&gt;<i> Subject: Re: [MonoTouch] How to add event handler for custom UITableCell button (without it being called many times)? 
</I>&gt;<i> 
</I>&gt;<i> Personally, I pass in the parameters/object it needs to act on to the constructor of the custom cell, and have the event code in the cell perform the required action. 
</I>&gt;<i> 
</I>&gt;<i> Dino 
</I>&gt;<i> 
</I>&gt;<i> -----Original Message----- 
</I>&gt;<i> From: [hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=6) [mailto:[hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=7)] On Behalf Of stevek 
</I>&gt;<i> Sent: Monday, September 12, 2011 7:04 AM 
</I>&gt;<i> To: [hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=8) 
</I>&gt;<i> Subject: [MonoTouch] How to add event handler for custom UITableCell button (without it being called many times)? 
</I>&gt;<i> 
</I>&gt;<i> I am having trouble trying to and an event handler for a delete button that is on a custom UITableCell 
</I>&gt;<i> 
</I>&gt;<i> Currently the delegate seems to get called several times for each click on the delete button. I am using an anonymous method as I need the indexPath to work out which message to delete. 
</I>&gt;<i> 
</I>&gt;<i> Can anyone suggest a way of ensuring the event is only called once or an alternative method so I can use the indexPath to determine which message to delete without using an delegate in the GetCell method? 
</I>&gt;<i> 
</I>&gt;<i> The code I currently have is: 
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i>  public override UITableViewCell GetCell (UITableView tableView, NSIndexPath 
</I>&gt;<i> indexPath) 
</I>&gt;<i>  { 
</I>&gt;<i> SprayCell cell = tableView.DequeueReusableCell (kCellIdentifier) as SprayCell; 
</I>&gt;<i>  if (cell == null) { 
</I>&gt;<i>  cell = new SprayCell(); 
</I>&gt;<i>  var views = NSBundle.MainBundle.LoadNib(&quot;SprayCell&quot;,cell,null); 
</I>&gt;<i>  cell = Runtime.GetNSObject(views.ValueAt(0)) as SprayCell; 
</I>&gt;<i> 
</I>&gt;<i> //If I do this here it only ever tries to delete the 1st few messages 
</I>&gt;<i>  /* 
</I>&gt;<i>  cell.DeleteButton.TouchUpInside += delegate { 
</I>&gt;<i>  Util.Debug(&quot;cell.DeleteButton.TouchUpInside() - DELETE MsgID&quot; + _list2[indexPath.Row].MessageID); 
</I>&gt;<i>  }; 
</I>&gt;<i>  */ 
</I>&gt;<i> 
</I>&gt;<i>  }; 
</I>&gt;<i> 
</I>&gt;<i>  } 
</I>&gt;<i>  cell.Text = _list2[indexPath.Row].Body; 
</I>&gt;<i>  cell.Date1 = &quot;received &quot; + 
</I>&gt;<i> _list2[indexPath.Row].TimeStamp.ToShortTimeString() + &quot; &quot; + 
</I>&gt;<i> _list2[indexPath.Row].TimeStamp.ToShortDateString() ; 
</I>&gt;<i> 
</I>&gt;<i>  cell.DeleteButton.TouchUpInside -= delegate {}; //If I don't have this we get lots of different events firing when we have lots of items in the list 
</I>&gt;<i> 
</I>&gt;<i>  cell.DeleteButton.TouchUpInside += delegate 
</I>&gt;<i> {cell.DeleteButton.TouchUpInside() - DELETE MsgID&quot; + _list2[indexPath.Row].MessageID)}; //Gets called multiple times randomly and regularly at the top/bottom of the list 
</I>&gt;<i> 
</I>&gt;<i>  return cell; 
</I>&gt;<i>  } 
</I>&gt;<i> 
</I>&gt;<i> &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 
</I>&gt;<i> 
</I>&gt;<i> Many Thanks 
</I>&gt;<i> SK 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/How-to-add-event-handler-for-custom-UITableCell-button-without-it-being-called-many-times-tp3807201p3807201.html">http://monotouch.2284126.n4.nabble.com/How-to-add-event-handler-for-custom-UITableCell-button-without-it-being-called-many-times-tp3807201p3807201.html</A>
</I>&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com (<A HREF="http://Nabble.com">http://Nabble.com</A>). 
</I>&gt;<i> _______________________________________________ 
</I>&gt;<i> MonoTouch mailing list 
</I>&gt;<i> [hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=9) 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i> _______________________________________________ 
</I>&gt;<i> MonoTouch mailing list 
</I>&gt;<i> [hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=10) 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i> 
</I>&gt;<i> No virus found in this incoming message. 
</I>&gt;<i> Checked by AVG - www.avg.com (<A HREF="http://www.avg.com">http://www.avg.com</A>) 
</I>&gt;<i> Version: 9.0.901 / Virus Database: 271.1.1/3891 - Release Date: 09/11/11 19:38:00 
</I>&gt;<i> _______________________________________________ 
</I>&gt;<i> MonoTouch mailing list 
</I>&gt;<i> [hidden email] (/user/SendEmail.jtp?type=node&amp;node=3807417&amp;i=11) 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> If you reply to this email, your message will be added to the discussion below: <A HREF="http://monotouch.2284126.n4.nabble.com/How-to-add-event-handler-for-custom-UITableCell-button-without-it-being-called-many-times-tp3807201p3807417.html">http://monotouch.2284126.n4.nabble.com/How-to-add-event-handler-for-custom-UITableCell-button-without-it-being-called-many-times-tp3807201p3807417.html</A> 
</I>&gt;<i>  To start a new topic under MonoTouch, email <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">ml-node+s2284126n3346893h90 at n4.nabble.com</A> (mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">ml-node+s2284126n3346893h90 at n4.nabble.com</A>) 
</I>&gt;<i>  To unsubscribe from MonoTouch, click here (<A HREF="http://monotouch.2284126.n4.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=3346893&amp;code=YW5kcmV3ZHlvdW5nQGdtYWlsLmNvbXwzMzQ2ODkzfDE5MjczODc4ODI=">http://monotouch.2284126.n4.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=3346893&amp;code=YW5kcmV3ZHlvdW5nQGdtYWlsLmNvbXwzMzQ2ODkzfDE5MjczODc4ODI=</A>). 
</I>


--
View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/How-to-add-event-handler-for-custom-UITableCell-button-without-it-being-called-many-times-tp3807201p3808424.html">http://monotouch.2284126.n4.nabble.com/How-to-add-event-handler-for-custom-UITableCell-button-without-it-being-called-many-times-tp3807201p3808424.html</A>
Sent from the MonoTouch mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110912/76adc6ac/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110912/76adc6ac/attachment-0001.html</A> 
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005064.html">[MonoTouch] How to add event handler for custom UITableCell button (without it being called many times)? - Email found in subject
</A></li>
	<LI>Next message: <A HREF="005066.html">[MonoTouch] Background Audio with AVPlayer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5083">[ date ]</a>
              <a href="thread.html#5083">[ thread ]</a>
              <a href="subject.html#5083">[ subject ]</a>
              <a href="author.html#5083">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
