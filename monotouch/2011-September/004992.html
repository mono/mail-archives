<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] UITextField.ShouldReturn crashes app
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20UITextField.ShouldReturn%20crashes%20app&In-Reply-To=1E768AF206E7E94FA03F838C8BA063A0053E02%40COM03.paradigm.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004991.html">
   <LINK REL="Next"  HREF="004993.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] UITextField.ShouldReturn crashes app</H1>
    <B>Rolf Bjarne Kvinge</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20UITextField.ShouldReturn%20crashes%20app&In-Reply-To=1E768AF206E7E94FA03F838C8BA063A0053E02%40COM03.paradigm.local"
       TITLE="[MonoTouch] UITextField.ShouldReturn crashes app">rolf at xamarin.com
       </A><BR>
    <I>Thu Sep  8 18:07:34 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004991.html">[MonoTouch] UITextField.ShouldReturn crashes app
</A></li>
        <LI>Next message: <A HREF="004993.html">[MonoTouch] UITextField.ShouldReturn crashes app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4992">[ date ]</a>
              <a href="thread.html#4992">[ thread ]</a>
              <a href="subject.html#4992">[ subject ]</a>
              <a href="author.html#4992">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Derik,

On Thu, Sep 8, 2011 at 11:57 PM, Derik Palacino &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">derik at palacino.net</A>&gt; wrote:
&gt;<i> That&#8217;s what I thought you&#8217;d say. Is there cause for concern regarding memory
</I>&gt;<i> usage maintaining a list of the cells outside the table itself? I&#8217;m just
</I>&gt;<i> asking because I don&#8217;t know how the Mono framework tracks references (is it
</I>&gt;<i> just a reference?) between managed and unmanaged memory.
</I>
I wouldn't worry about memory usage as long as you keep an eye on the
number of items in the list - have in mind that cell instances are
reused, so in most cases the total number of live cells isn't that
big. If it ever grows too much, you should be able to remove cells
from the list that aren't in the table anymore.

Rolf

&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks again,
</I>&gt;<i>
</I>&gt;<i> Derik
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From: Rolf Bjarne Kvinge [via MonoTouch] [mailto:ml-node+[hidden email]]
</I>&gt;<i> Sent: Thursday, September 08, 2011 4:55 PM
</I>&gt;<i> To: Derik J. Palacino
</I>&gt;<i> Subject: Re: UITextField.ShouldReturn crashes app
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi Derik,
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for the confirmation and insight. How exactly would you recommend I
</I>&gt;&gt;<i> go about maintaining a managed reference to the cell so it&#8217;s not GC&#8217;ed? Or
</I>&gt;&gt;<i> how to obtain a new managed reference with only a UITextField in the GC&#8217;ed
</I>&gt;&gt;<i> cell that appears to also have been GC&#8217;ed?
</I>&gt;<i>
</I>&gt;<i> I'd use a list (List&lt;CellType&gt;) at class level which contains all the
</I>&gt;<i> currently used cells. Once an object is GC'ed while native code still
</I>&gt;<i> has references to it, there is nothing you can do but pray it won't
</I>&gt;<i> crash (in MonoTouch 4 the GC is much more agressive, so it's a lot
</I>&gt;<i> easier to find these issues before they go into production).
</I>&gt;<i>
</I>&gt;<i> Rolf
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks again,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Derik
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> From: Rolf Bjarne Kvinge [via MonoTouch] [mailto:ml-node+[hidden email]]
</I>&gt;&gt;<i> Sent: Thursday, September 08, 2011 4:35 PM
</I>&gt;&gt;<i> To: Derik J. Palacino
</I>&gt;&gt;<i> Subject: Re: UITextField.ShouldReturn crashes app
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Derik,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Thu, Sep 8, 2011 at 7:50 PM, Derik Palacino &lt;[hidden email]&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm using MonoDevelop 2.6 with MonoTouch 4.0.7 and XCode 3.2.6. I'm
</I>&gt;&gt;&gt;<i> having
</I>&gt;&gt;&gt;<i> an
</I>&gt;&gt;&gt;<i> issue where an app crashes on the emulator when I add a UITextField to a
</I>&gt;&gt;&gt;<i> UITableViewCell and assign it a ShouldReturn delegate, but only when
</I>&gt;&gt;&gt;<i> launched from MonoDevelop.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> When I launch from the home screen the return key does absolutely
</I>&gt;&gt;&gt;<i> nothing.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> My implementation is an XIB with a controller that contains a
</I>&gt;&gt;&gt;<i> UITableViewCell which parents a UITextField and a UIButton (probably
</I>&gt;&gt;&gt;<i> should
</I>&gt;&gt;&gt;<i> be replaced with an accessory).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Does anyone else have a similar implementation or any knowledge that
</I>&gt;&gt;&gt;<i> could
</I>&gt;&gt;&gt;<i> help work around this issue?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I do have a seperate solution/project that consistantly reproduces this
</I>&gt;&gt;&gt;<i> issue and I've already sent it to Rolf
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I can reproduce it; and the problem is that the cell you return in
</I>&gt;&gt;<i> GetCell is GC'ed, there are no managed references to it after GetCell
</I>&gt;&gt;<i> returns, so it ends up freed.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Rolf
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ________________________________
</I>&gt;&gt;<i> View this message in context: RE: UITextField.ShouldReturn crashes app
</I>&gt;&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> MonoTouch mailing list
</I>&gt;&gt;<i> [hidden email]
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> [hidden email]
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>&gt;<i> ________________________________
</I>&gt;<i>
</I>&gt;<i> If you reply to this email, your message will be added to the discussion
</I>&gt;<i> below:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://monotouch.2284126.n4.nabble.com/UITextField-ShouldReturn-crashes-app-tp3799527p3800254.html">http://monotouch.2284126.n4.nabble.com/UITextField-ShouldReturn-crashes-app-tp3799527p3800254.html</A>
</I>&gt;<i>
</I>&gt;<i> To unsubscribe from UITextField.ShouldReturn crashes app, click here.
</I>&gt;<i>
</I>&gt;<i> ________________________________
</I>&gt;<i> View this message in context: RE: UITextField.ShouldReturn crashes app
</I>&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004991.html">[MonoTouch] UITextField.ShouldReturn crashes app
</A></li>
	<LI>Next message: <A HREF="004993.html">[MonoTouch] UITextField.ShouldReturn crashes app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4992">[ date ]</a>
              <a href="thread.html#4992">[ thread ]</a>
              <a href="subject.html#4992">[ subject ]</a>
              <a href="author.html#4992">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
