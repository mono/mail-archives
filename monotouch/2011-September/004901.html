<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Custom MapKit Pins/Circles
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Custom%20MapKit%20Pins/Circles&In-Reply-To=CACWcBbmzR%2BQRG6pOOVhTAYxEVySPXhVPx6x3E%3DmV0ZOVBr5GhA%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004902.html">
   <LINK REL="Next"  HREF="004913.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Custom MapKit Pins/Circles</H1>
    <B>Mikkel L&#248;now</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Custom%20MapKit%20Pins/Circles&In-Reply-To=CACWcBbmzR%2BQRG6pOOVhTAYxEVySPXhVPx6x3E%3DmV0ZOVBr5GhA%40mail.gmail.com"
       TITLE="[MonoTouch] Custom MapKit Pins/Circles">mloenow at gmail.com
       </A><BR>
    <I>Mon Sep  5 09:45:04 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004902.html">[MonoTouch] Custom MapKit Pins/Circles
</A></li>
        <LI>Next message: <A HREF="004913.html">[MonoTouch] Custom MapKit Pins/Circles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4901">[ date ]</a>
              <a href="thread.html#4901">[ thread ]</a>
              <a href="subject.html#4901">[ subject ]</a>
              <a href="author.html#4901">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Right click / Ctrl click / two finger tab on the .app package and select
Show Package Contents.

What version of MonoDevelop are you using?

On Mon, Sep 5, 2011 at 15:42, Tomasz Cielecki &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">tomasz at ostebaronen.dk</A>&gt; wrote:

&gt;<i> How do I make sure that they are actually copied into the .app package?
</I>&gt;<i>
</I>&gt;<i> On Mon, Sep 5, 2011 at 3:39 PM, Mikkel L&#248;now &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">mloenow at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; At first glance it looks correct.
</I>&gt;<i> &gt; Is Build Action for pin.png set to Content? Can you make sure they are
</I>&gt;<i> &gt; actually copied to the .app package? (there's a bug in some versions of
</I>&gt;<i> &gt; MonoDevelop where images would not be copied).
</I>&gt;<i> &gt; Mikkel
</I>&gt;<i> &gt; P.S. Replied to all.
</I>&gt;<i> &gt; On Mon, Sep 5, 2011 at 15:32, Tomasz Cielecki &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">tomasz at ostebaronen.dk</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I think your suggestion is more or less the same way I am implementing
</I>&gt;<i> it.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Code can be seen here <A HREF="https://gist.github.com/1194994">https://gist.github.com/1194994</A> or:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Here is my Main.cs file:
</I>&gt;<i> &gt;&gt; using System;
</I>&gt;<i> &gt;&gt; using System.Collections.Generic;
</I>&gt;<i> &gt;&gt; using System.Linq;
</I>&gt;<i> &gt;&gt; using MonoTouch.Foundation;
</I>&gt;<i> &gt;&gt; using MonoTouch.UIKit;
</I>&gt;<i> &gt;&gt; using LoadSiteList;
</I>&gt;<i> &gt;&gt; using MonoTouch.MapKit;
</I>&gt;<i> &gt;&gt; using MonoTouch.CoreLocation;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; namespace MapsStuff
</I>&gt;<i> &gt;&gt; {
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;        public class Application
</I>&gt;<i> &gt;&gt;        {
</I>&gt;<i> &gt;&gt;                static void Main (string[] args)
</I>&gt;<i> &gt;&gt;                {
</I>&gt;<i> &gt;&gt;                        UIApplication.Main (args);
</I>&gt;<i> &gt;&gt;                }
</I>&gt;<i> &gt;&gt;        }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;        // The name AppDelegate is referenced in the MainWindow.xib file.
</I>&gt;<i> &gt;&gt;        public partial class AppDelegate : UIApplicationDelegate
</I>&gt;<i> &gt;&gt;        {
</I>&gt;<i> &gt;&gt;                UITabBarController tabBarController;
</I>&gt;<i> &gt;&gt;                os4MapsViewController viewController;
</I>&gt;<i> &gt;&gt;                MapsStuff.TableViewController viewController2;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                // This method is invoked when the application has loaded
</I>&gt;<i> &gt;&gt; its UI and
</I>&gt;<i> &gt;&gt; its ready to run
</I>&gt;<i> &gt;&gt;                public override bool FinishedLaunching (UIApplication
</I>&gt;<i> app,
</I>&gt;<i> &gt;&gt; NSDictionary options)
</I>&gt;<i> &gt;&gt;                {
</I>&gt;<i> &gt;&gt;                        window = new UIWindow
</I>&gt;<i> (UIScreen.MainScreen.Bounds);
</I>&gt;<i> &gt;&gt;                        tabBarController = new UITabBarController();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                        viewController = new os4MapsViewController();
</I>&gt;<i> &gt;&gt;                        viewController2 = new TableViewController();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                        viewController.TabBarItem = new UITabBarItem
</I>&gt;<i> &gt;&gt; (&quot;Map&quot;,
</I>&gt;<i> &gt;&gt; UIImage.FromFile(&quot;Images/103-map.png&quot;), 0);
</I>&gt;<i> &gt;&gt;                        viewController2.TabBarItem = new UITabBarItem
</I>&gt;<i> &gt;&gt; (&quot;List&quot;,
</I>&gt;<i> &gt;&gt; UIImage.FromFile(&quot;Images/103-map.png&quot;), 0);
</I>&gt;<i> &gt;&gt;                        tabBarController.ViewControllers = new
</I>&gt;<i> &gt;&gt; UIViewController[]
</I>&gt;<i> &gt;&gt; {viewController, viewController2};
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                        window.AddSubview(tabBarController.View);
</I>&gt;<i> &gt;&gt;                        // If you have defined a view, add it here:
</I>&gt;<i> &gt;&gt;                        // window.AddSubview (navigationController.View);
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                        window.MakeKeyAndVisible ();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                        return true;
</I>&gt;<i> &gt;&gt;                }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                // This method is required in iPhoneOS 3.0
</I>&gt;<i> &gt;&gt;                public override void OnActivated (UIApplication
</I>&gt;<i> &gt;&gt; application)
</I>&gt;<i> &gt;&gt;                {
</I>&gt;<i> &gt;&gt;                }
</I>&gt;<i> &gt;&gt;        }
</I>&gt;<i> &gt;&gt; }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Next here is the os4MapsViewController.cs:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; using System;
</I>&gt;<i> &gt;&gt; using System.Drawing;
</I>&gt;<i> &gt;&gt; using System.Collections.Generic;
</I>&gt;<i> &gt;&gt; using System.Diagnostics;
</I>&gt;<i> &gt;&gt; using MonoTouch.Foundation;
</I>&gt;<i> &gt;&gt; using MonoTouch.UIKit;
</I>&gt;<i> &gt;&gt; using MonoTouch.MapKit;
</I>&gt;<i> &gt;&gt; using MonoTouch.CoreLocation;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; namespace MapsStuff
</I>&gt;<i> &gt;&gt; {
</I>&gt;<i> &gt;&gt;        public class os4MapsViewController: UIViewController
</I>&gt;<i> &gt;&gt;        {
</I>&gt;<i> &gt;&gt;                private MKMapView _mapView { get; set; }
</I>&gt;<i> &gt;&gt;                List&lt;MapsStuff.MapAnnotation&gt; pins;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                public MKMapView MapView
</I>&gt;<i> &gt;&gt;                {
</I>&gt;<i> &gt;&gt;                        get { return _mapView; }
</I>&gt;<i> &gt;&gt;                }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                public os4MapsViewController () : base()
</I>&gt;<i> &gt;&gt;                {}
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                public override void ViewDidLoad ()
</I>&gt;<i> &gt;&gt;                {
</I>&gt;<i> &gt;&gt;                        base.ViewDidLoad ();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                        //
</I>&gt;<i> &gt;&gt;                        // Create our map view and add it as as subview.
</I>&gt;<i> &gt;&gt;                        //
</I>&gt;<i> &gt;&gt;                        pins = CreateRandomPins();
</I>&gt;<i> &gt;&gt;                        _mapView = new MKMapView();
</I>&gt;<i> &gt;&gt;                        _mapView.Frame = new RectangleF (0, 0,
</I>&gt;<i> &gt;&gt; this.View.Frame.Width,
</I>&gt;<i> &gt;&gt; this.View.Frame.Height);
</I>&gt;<i> &gt;&gt;                        _mapView.ShowsUserLocation = true;
</I>&gt;<i> &gt;&gt;                        _mapView.MapType = MKMapType.Hybrid;
</I>&gt;<i> &gt;&gt;                        _mapView.Delegate = new MapViewDelegate();
</I>&gt;<i> &gt;&gt;                        foreach (MapAnnotation m in pins)
</I>&gt;<i> &gt;&gt;                        {
</I>&gt;<i> &gt;&gt;                                _mapView.AddAnnotation(m);
</I>&gt;<i> &gt;&gt;                        }
</I>&gt;<i> &gt;&gt;                        View.AddSubview(_mapView);
</I>&gt;<i> &gt;&gt;                }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                List&lt;MapsStuff.MapAnnotation&gt; CreateRandomPins()
</I>&gt;<i> &gt;&gt;                {
</I>&gt;<i> &gt;&gt;                        Random r = new Random();
</I>&gt;<i> &gt;&gt;                        List&lt;MapsStuff.MapAnnotation&gt; locations = new
</I>&gt;<i> &gt;&gt; List&lt;MapsStuff.MapAnnotation&gt;();
</I>&gt;<i> &gt;&gt;                        for (int i = 0; i &lt; 4; i++)
</I>&gt;<i> &gt;&gt;                        {
</I>&gt;<i> &gt;&gt;                                        locations.Add(
</I>&gt;<i> &gt;&gt;                                              new
</I>&gt;<i> MapsStuff.MapAnnotation(
</I>&gt;<i> &gt;&gt;                                                  new
</I>&gt;<i> &gt;&gt; CLLocationCoordinate2D(r.NextDouble() * 180,
</I>&gt;<i> &gt;&gt; r.NextDouble() * 180),
</I>&gt;<i> &gt;&gt;                                                  &quot;test&quot; + i,
</I>&gt;<i> &gt;&gt;                                                  &quot;sub&quot; + i
</I>&gt;<i> &gt;&gt;                                              ));
</I>&gt;<i> &gt;&gt;                        }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                        return locations;
</I>&gt;<i> &gt;&gt;                }
</I>&gt;<i> &gt;&gt;        }
</I>&gt;<i> &gt;&gt;        public class MapViewDelegate : MKMapViewDelegate
</I>&gt;<i> &gt;&gt;        {
</I>&gt;<i> &gt;&gt;                public MapViewDelegate (): base()
</I>&gt;<i> &gt;&gt;                {
</I>&gt;<i> &gt;&gt;                }
</I>&gt;<i> &gt;&gt;                public override MKAnnotationView GetViewForAnnotation
</I>&gt;<i> &gt;&gt; (MKMapView
</I>&gt;<i> &gt;&gt; mapView, NSObject annotation)
</I>&gt;<i> &gt;&gt;                {
</I>&gt;<i> &gt;&gt;                        var anv =
</I>&gt;<i> &gt;&gt; mapView.DequeueReusableAnnotation(&quot;thislocation&quot;);
</I>&gt;<i> &gt;&gt;                        if (anv == null)
</I>&gt;<i> &gt;&gt;                        {
</I>&gt;<i> &gt;&gt;                                Console.WriteLine(&quot;creating new
</I>&gt;<i> &gt;&gt; MKAnnotationView&quot;);
</I>&gt;<i> &gt;&gt;                                anv = new MKPinAnnotationView(annotation,
</I>&gt;<i> &gt;&gt; &quot;thislocation&quot;);
</I>&gt;<i> &gt;&gt;                        }
</I>&gt;<i> &gt;&gt;                        else
</I>&gt;<i> &gt;&gt;                        {
</I>&gt;<i> &gt;&gt;                                anv.Annotation = annotation;
</I>&gt;<i> &gt;&gt;                        }
</I>&gt;<i> &gt;&gt;                        anv.Image = new UIImage(&quot;pin.png&quot;);
</I>&gt;<i> &gt;&gt;                        anv.CanShowCallout = true;
</I>&gt;<i> &gt;&gt;                        return anv;
</I>&gt;<i> &gt;&gt;                }
</I>&gt;<i> &gt;&gt;        }
</I>&gt;<i> &gt;&gt; }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; So both the referenced images in Main.cs and the ones in
</I>&gt;<i> &gt;&gt; os4MapsViewController.cs are not shown
</I>&gt;<i> &gt;&gt; <A HREF="http://imageshack.us/photo/my-images/850/screenshot20110905at323.png/">http://imageshack.us/photo/my-images/850/screenshot20110905at323.png/</A>
</I>&gt;<i> &gt;&gt; &lt;-- this image shows what I get on the emulator.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; pin.png lies in the root folder of my project. The other image lies in
</I>&gt;<i> &gt;&gt; the folder Images in the project dir. None of them seems to show up.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Any ideas? I know the code provided uses MKPinAnnotationView, but
</I>&gt;<i> &gt;&gt; changing it to MKAnnotationView simply shows nothing.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Mon, Sep 5, 2011 at 2:48 PM, Mikkel L&#248;now &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">mloenow at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; &gt; Hi Tomasz,
</I>&gt;<i> &gt;&gt; &gt; I believe MKAnnotationView would be your best option. Use a custom
</I>&gt;<i> &gt;&gt; &gt; MKMapViewDelegate and override GetViewForAnnotation where you call
</I>&gt;<i> &gt;&gt; &gt; mapView.DequeueReusableAnnotation to reuse the annotation view (or
</I>&gt;<i> &gt;&gt; &gt; create a
</I>&gt;<i> &gt;&gt; &gt; new if null). Here you can set your image to the annotation view.
</I>&gt;<i> &gt;&gt; &gt; Feel free to share your implementation if you need more help.
</I>&gt;<i> &gt;&gt; &gt; Mikkel
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; On Mon, Sep 5, 2011 at 14:01, Tomasz Cielecki &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">tomasz at ostebaronen.dk</A>&gt;
</I>&gt;<i> &gt;&gt; &gt; wrote:
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; Hello MonoTouch list,
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; I am in the midst of creating a iPhone app where I need a map with
</I>&gt;<i> &gt;&gt; &gt;&gt; some circles, where the circle colors changes depending on the data
</I>&gt;<i> &gt;&gt; &gt;&gt; received asynchronously in the background.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; So my first approach to this was to get a Map shown on the devices
</I>&gt;<i> &gt;&gt; &gt;&gt; with a circle, which works fine. Only problem is that MKCircle takes
</I>&gt;<i> a
</I>&gt;<i> &gt;&gt; &gt;&gt; radius for that circle, which means the circle is only visible at
</I>&gt;<i> some
</I>&gt;<i> &gt;&gt; &gt;&gt; zoom level. So lets say the circle radius is 100 meters, then I have
</I>&gt;<i> &gt;&gt; &gt;&gt; to zoom to almost the biggest zoom level to get to a point where I
</I>&gt;<i> &gt;&gt; &gt;&gt; actually can see the circle, this is not the desirable behavior. I
</I>&gt;<i> &gt;&gt; &gt;&gt; want to have the circle resize along with the zoom level, just like
</I>&gt;<i> &gt;&gt; &gt;&gt; pins do.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; So I have also tried to use a custom image on MKPinAnnotationView and
</I>&gt;<i> &gt;&gt; &gt;&gt; on MKAnnotationView, neither of them seems to show my custom image.
</I>&gt;<i> &gt;&gt; &gt;&gt; The normal pin image shows when using MKPinAnnotationView. I have put
</I>&gt;<i> &gt;&gt; &gt;&gt; the pin image in the root of my project and referencing it with the
</I>&gt;<i> &gt;&gt; &gt;&gt; path &quot;pin.png&quot; (the name of the image is actually pin.png).
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; So maybe someone here can help me find out what is wrong, or provide
</I>&gt;<i> &gt;&gt; &gt;&gt; me with some examples on how to do this? I would prefer if I could
</I>&gt;<i> use
</I>&gt;<i> &gt;&gt; &gt;&gt; MKCircle and just choose the color. But using images could be a
</I>&gt;<i> &gt;&gt; &gt;&gt; solution.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; --
</I>&gt;<i> &gt;&gt; &gt;&gt; Med Venlig Hilsen / With Best Regards
</I>&gt;<i> &gt;&gt; &gt;&gt; Tomasz Cielecki
</I>&gt;<i> &gt;&gt; &gt;&gt; <A HREF="http://ostebaronen.dk">http://ostebaronen.dk</A>
</I>&gt;<i> &gt;&gt; &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt;&gt; MonoTouch mailing list
</I>&gt;<i> &gt;&gt; &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt; &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; --
</I>&gt;<i> &gt;&gt; Med Venlig Hilsen / With Best Regards
</I>&gt;<i> &gt;&gt; Tomasz Cielecki
</I>&gt;<i> &gt;&gt; <A HREF="http://ostebaronen.dk">http://ostebaronen.dk</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Med Venlig Hilsen / With Best Regards
</I>&gt;<i> Tomasz Cielecki
</I>&gt;<i> <A HREF="http://ostebaronen.dk">http://ostebaronen.dk</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20110905/8296f786/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20110905/8296f786/attachment-0001.html</A> 
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004902.html">[MonoTouch] Custom MapKit Pins/Circles
</A></li>
	<LI>Next message: <A HREF="004913.html">[MonoTouch] Custom MapKit Pins/Circles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4901">[ date ]</a>
              <a href="thread.html#4901">[ thread ]</a>
              <a href="subject.html#4901">[ subject ]</a>
              <a href="author.html#4901">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
