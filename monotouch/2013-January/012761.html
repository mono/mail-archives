<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] ImageLoader caching
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20ImageLoader%20caching&In-Reply-To=%3C1359643636342-4658027.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012760.html">
   <LINK REL="Next"  HREF="012762.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] ImageLoader caching</H1>
    <B>Dennis Welu</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20ImageLoader%20caching&In-Reply-To=%3C1359643636342-4658027.post%40n4.nabble.com%3E"
       TITLE="[MonoTouch] ImageLoader caching">DennisWelu at motisconsulting.com
       </A><BR>
    <I>Thu Jan 31 14:47:16 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="012760.html">[MonoTouch] ImageLoader caching
</A></li>
        <LI>Next message: <A HREF="012762.html">[MonoTouch] MonoTouch.Dialog ImageStringElement with a remote image
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12761">[ date ]</a>
              <a href="thread.html#12761">[ thread ]</a>
              <a href="subject.html#12761">[ subject ]</a>
              <a href="author.html#12761">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I actually did spent some time reviewing the code on Github. As far as I can
tell, the LRUCache being used only clears out memory on a Purge. I'm
watching the downloaded files on disk (.../iPhone
Simulator/6.0/Applications/{bigLongGuid}/Library/Caches/Pictures/MonoTouch.Dialog)
and I see them come into the cache...but never leave. Hotel California. And
on subsequent sessions the app loads the pics clearly from cache.

I see in the ImageLoader code it makes requests with
NSUrlRequestCachePolicy.UseProtocolCachePolicy. There's some complicated
rules involved with this policy, at least as it's describe nicely on  this
post &lt;<A HREF="http://blackpixel.com/blog/2012/05/caching-and-nsurlconnection.html">http://blackpixel.com/blog/2012/05/caching-and-nsurlconnection.html</A>&gt; 
. But using Charles I don't see any remote http requests going out either.
So there could be something on the headers of the original response that are
causing it to cache longer than it should maybe? This is where my knowledge
gets a little fuzzy...

Anyhoo...thanks for the suggestion.




--
View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/ImageLoader-caching-tp4658025p4658027.html">http://monotouch.2284126.n4.nabble.com/ImageLoader-caching-tp4658025p4658027.html</A>
Sent from the MonoTouch mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012760.html">[MonoTouch] ImageLoader caching
</A></li>
	<LI>Next message: <A HREF="012762.html">[MonoTouch] MonoTouch.Dialog ImageStringElement with a remote image
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12761">[ date ]</a>
              <a href="thread.html#12761">[ thread ]</a>
              <a href="subject.html#12761">[ subject ]</a>
              <a href="author.html#12761">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
