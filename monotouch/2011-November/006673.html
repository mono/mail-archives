<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Simple Tweet code example
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Simple%20Tweet%20code%20example&In-Reply-To=1321404274434-4074835.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006660.html">
   <LINK REL="Next"  HREF="006755.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Simple Tweet code example</H1>
    <B>ric3kg</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=%5BMonoTouch%5D%20Simple%20Tweet%20code%20example&In-Reply-To=1321404274434-4074835.post%40n4.nabble.com"
       TITLE="[MonoTouch] Simple Tweet code example">rickgross at mac.com
       </A><BR>
    <I>Wed Nov 16 18:38:41 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006660.html">[MonoTouch] Simple Tweet code example
</A></li>
        <LI>Next message: <A HREF="006755.html">[MonoTouch] Simple Tweet code example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6673">[ date ]</a>
              <a href="thread.html#6673">[ thread ]</a>
              <a href="subject.html#6673">[ subject ]</a>
              <a href="author.html#6673">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here's some of the code I'm using to send the tweet...

string postData = &quot;Hello World&quot;;
Uri taskUri = new Uri (<A HREF="https://api.twitter.com/1/statuses/update.json">https://api.twitter.com/1/statuses/update.json</A>);
client = new WebClient();
var content = new StringBuilder ();
content.AppendFormat (&quot;status={0}&quot;, OAuth.PercentEncode (postData));
				
client.Headers [HttpRequestHeader.Authorization] =
OAuthAuthorizer.AuthorizeRequest (TwitterAccount.OAuthConfig, twitterToken,
twitterSecret, &quot;POST&quot;, taskUri, content.ToString());
				
var res = client.UploadData (taskUri, &quot;POST&quot;, Encoding.UTF8.GetBytes
(postData));


public static string AuthorizeRequest (OAuthConfig config, string
oauthToken, string oauthTokenSecret, string method, Uri uri, string data)
		{			
			var headers = new Dictionary&lt;string, string&gt;() 
			{
				{ &quot;oauth_consumer_key&quot;, config.ConsumerKey },
				{ &quot;oauth_nonce&quot;, MakeNonce () },
				{ &quot;oauth_signature_method&quot;, &quot;HMAC-SHA1&quot; },
				{ &quot;oauth_timestamp&quot;, MakeTimestamp () },
				{ &quot;oauth_token&quot;, oauthToken },
				{ &quot;oauth_version&quot;, &quot;1.0&quot;},
			};
			var signatureHeaders = new Dictionary&lt;string,string&gt; (headers);

			// Add the data and URL query string to the copy of the headers for
computing the signature
			if (!string.IsNullOrEmpty(data))
			{
				var parsed = HttpUtility.ParseQueryString (data);
				foreach (string k in parsed.Keys)
				{
					signatureHeaders.Add (k, OAuth.PercentEncode (parsed [k]));
				}
			}
			
			var nvc = HttpUtility.ParseQueryString (uri.Query);
			
			foreach (string key in nvc)
			{
				if (key != null)
					signatureHeaders.Add (key, OAuth.PercentEncode (nvc [key]));
			}
			
			string signature = MakeSignature (method, uri.GetLeftPart
(UriPartial.Path), signatureHeaders);
			string compositeSigningKey = MakeSigningKey (config.ConsumerSecret,
oauthTokenSecret);
			string oauth_signature = MakeOAuthSignature (compositeSigningKey,
signature);

			headers.Add (&quot;oauth_signature&quot;, OAuth.PercentEncode (oauth_signature));

			return HeadersToOAuth (headers);
		}


--
View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/Simple-Tweet-code-example-tp4074835p4078324.html">http://monotouch.2284126.n4.nabble.com/Simple-Tweet-code-example-tp4074835p4078324.html</A>
Sent from the MonoTouch mailing list archive at Nabble.com.
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006660.html">[MonoTouch] Simple Tweet code example
</A></li>
	<LI>Next message: <A HREF="006755.html">[MonoTouch] Simple Tweet code example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6673">[ date ]</a>
              <a href="thread.html#6673">[ thread ]</a>
              <a href="subject.html#6673">[ subject ]</a>
              <a href="author.html#6673">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
