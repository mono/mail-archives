<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Binding of Zebra SDK to Monotouch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Binding%20of%20Zebra%20SDK%20to%20Monotouch&In-Reply-To=%3CCALqoN0bpPGapBMfbn_rSaeyZ9cBQhXVyNKYvueGE3Y3byYqDZA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010080.html">
   <LINK REL="Next"  HREF="010082.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Binding of Zebra SDK to Monotouch</H1>
    <B>Jeff Stedfast</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Binding%20of%20Zebra%20SDK%20to%20Monotouch&In-Reply-To=%3CCALqoN0bpPGapBMfbn_rSaeyZ9cBQhXVyNKYvueGE3Y3byYqDZA%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Binding of Zebra SDK to Monotouch">jeff at xamarin.com
       </A><BR>
    <I>Wed Jun 13 17:27:33 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010080.html">[MonoTouch] Binding of Zebra SDK to Monotouch
</A></li>
        <LI>Next message: <A HREF="010082.html">[MonoTouch] The story of MonoTouch?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10098">[ date ]</a>
              <a href="thread.html#10098">[ thread ]</a>
              <a href="subject.html#10098">[ subject ]</a>
              <a href="author.html#10098">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I think what you want to do is change this:

[BaseType (typeof(NSObject))]
interface TcpPrinterConnection : ZebraPrinterConnection

to this:

[BaseType (typeof(ZebraPrinterConnection))]
interface TcpPrinterConnection

On Wed, Jun 13, 2012 at 4:19 AM, &#1044;&#1084;&#1080;&#1090;&#1088;&#1080;&#1081; &#1053;&#1072;&#1076;&#1077;&#1078;&#1076;&#1080;&#1085; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">denadezhdin at gmail.com</A>&gt;wrote:

&gt;<i> Dear MonoTouch subscribers,
</I>&gt;<i>
</I>&gt;<i> The same question is here:
</I>&gt;<i> <A HREF="http://stackoverflow.com/questions/11008726/binding-of-zebra-sdk-to-monotouch">http://stackoverflow.com/questions/11008726/binding-of-zebra-sdk-to-monotouch</A>
</I>&gt;<i>
</I>&gt;<i> Short version: I have created a binding for Zebra native library for
</I>&gt;<i> mobile printers and the basic functionality works fine (wireless connection
</I>&gt;<i> between the printer and the iPad, writing data to streams, printing out
</I>&gt;<i> text, etc.)
</I>&gt;<i> I want to print out PDFs and images, and the native library provides the
</I>&gt;<i> classes for that. However, I can't get it to work from Monotouch.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Long version: I have problem binding the structure described below.
</I>&gt;<i>
</I>&gt;<i> @protocol ZebraPrinterConnection
</I>&gt;<i>     - (BOOL) open;
</I>&gt;<i>     - (void) close;
</I>&gt;<i>     - (NSInteger) write:(NSData *)data error:(NSError **)error;
</I>&gt;<i>     - (NSData *)read: (NSError**)error;
</I>&gt;<i>
</I>&gt;<i> @interface TcpPrinterConnection : NSObject&lt;ZebraPrinterConnection&gt; {
</I>&gt;<i>      some @private properties
</I>&gt;<i> }
</I>&gt;<i>      - (id)initWithAddress:(NSString *)anAddress andWithPort:(
</I>&gt;<i> NSInteger)aPort;
</I>&gt;<i>
</I>&gt;<i> @interface ZebraPrinterFactory : NSObject { }
</I>&gt;<i>   +(id&lt;ZebraPrinter,NSObject&gt;) getInstance:(id&lt;ZebraPrinterConnection,
</I>&gt;<i> NSObject&gt;) connection error:(NSError**)error
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The tricky part here is to obtain ZebraPrinter instance in Monotouch code.
</I>&gt;<i> Note how ZebraPrinterFactory wants ZebraPrinterConnection to be passed to
</I>&gt;<i> it, but onlyTcpPrinterConnection has an actual constructor.
</I>&gt;<i> The connection classes work fine when bound like this:
</I>&gt;<i>
</I>&gt;<i> [BaseType (typeof (NSObject))]
</I>&gt;<i> [Model]
</I>&gt;<i> interface ZebraPrinterConnection
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i> [Export (&quot;open&quot;)] bool Open();
</I>&gt;<i>
</I>&gt;<i> [Export (&quot;close&quot;)] void Close();
</I>&gt;<i> [Export (&quot;write:error:&quot;)] int Write(NSData data, out NSError error);
</I>&gt;<i> [Export (&quot;read:&quot;)] NSData Read(out NSError error);
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> [BaseType (typeof(NSObject))]
</I>&gt;<i> interface TcpPrinterConnection : ZebraPrinterConnection
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i> [Export (&quot;initWithAddress:andWithPort:&quot;)] IntPtr Constructor (string
</I>&gt;<i> anAddress, int aPort);
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> Binding of ZebraPrinterFactory class is not as straightforward. If I bind
</I>&gt;<i> it like this:
</I>&gt;<i>
</I>&gt;<i> [BaseType (typeof(NSObject))]
</I>&gt;<i> interface ZebraPrinterFactory
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i> [Static, Export (&quot;getInstance:error:&quot;)]
</I>&gt;<i>
</I>&gt;<i> ZebraPrinter getInstance(ZebraPrinterConnection connection, out NSError
</I>&gt;<i> error);
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> then I try to use something like
</I>&gt;<i>
</I>&gt;<i> myConn = new TcpPrinterConnection(ipAddress, port);
</I>&gt;<i> myConn.Open ();
</I>&gt;<i> ZebraPrinter zPrinter = ZebraPrinterFactory.GetInstance(myConn, out err);
</I>&gt;<i> // compile-time error: Cannot convert TcpPrinterConnection
</I>&gt;<i> into ZebraPrinterConnection
</I>&gt;<i>
</I>&gt;<i> I get a compile-time error. If I change the binding for Mono to
</I>&gt;<i> accept TcpPrinterConnection as parameter (I've tried multiple
</I>&gt;<i> configurations), I get runtime exception (&quot;System.InvalidCastException:
</I>&gt;<i> Cannot cast from source type to destination type.&quot;) which has no inner
</I>&gt;<i> exceptions and I have no idea which type could not be converted (strongly
</I>&gt;<i> suspecting that same conversion as above).
</I>&gt;<i> It's really frustrating having something ALMOST working, but not quite.
</I>&gt;<i>
</I>&gt;<i> Any ideas? I'm starting to think of binding limitations already. Could
</I>&gt;<i> someone tell me if such structures can be bound at all?
</I>&gt;<i>
</I>&gt;<i> Regards, Dmitry
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120613/09ac4861/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120613/09ac4861/attachment.html</A>&gt;
</PRE>





























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010080.html">[MonoTouch] Binding of Zebra SDK to Monotouch
</A></li>
	<LI>Next message: <A HREF="010082.html">[MonoTouch] The story of MonoTouch?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10098">[ date ]</a>
              <a href="thread.html#10098">[ thread ]</a>
              <a href="subject.html#10098">[ subject ]</a>
              <a href="author.html#10098">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
