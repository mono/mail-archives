<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] Binding of Zebra SDK to Monotouch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Binding%20of%20Zebra%20SDK%20to%20Monotouch&In-Reply-To=%3CCADk20%3DSFzzSB-DmSqtNZiS88j%3DN-1W%3D_1D6ovEsDMHwitYrSCg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010083.html">
   <LINK REL="Next"  HREF="010098.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] Binding of Zebra SDK to Monotouch</H1>
    <B>&#1044;&#1084;&#1080;&#1090;&#1088;&#1080;&#1081; &#1053;&#1072;&#1076;&#1077;&#1078;&#1076;&#1080;&#1085;</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20Binding%20of%20Zebra%20SDK%20to%20Monotouch&In-Reply-To=%3CCADk20%3DSFzzSB-DmSqtNZiS88j%3DN-1W%3D_1D6ovEsDMHwitYrSCg%40mail.gmail.com%3E"
       TITLE="[MonoTouch] Binding of Zebra SDK to Monotouch">denadezhdin at gmail.com
       </A><BR>
    <I>Wed Jun 13 08:19:26 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010083.html">[MonoTouch] Newbie: MonoTouch + Janrain Engage ?
</A></li>
        <LI>Next message: <A HREF="010098.html">[MonoTouch] Binding of Zebra SDK to Monotouch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10080">[ date ]</a>
              <a href="thread.html#10080">[ thread ]</a>
              <a href="subject.html#10080">[ subject ]</a>
              <a href="author.html#10080">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear MonoTouch subscribers,

The same question is here:
<A HREF="http://stackoverflow.com/questions/11008726/binding-of-zebra-sdk-to-monotouch">http://stackoverflow.com/questions/11008726/binding-of-zebra-sdk-to-monotouch</A>

Short version: I have created a binding for Zebra native library for mobile
printers and the basic functionality works fine (wireless connection
between the printer and the iPad, writing data to streams, printing out
text, etc.)
I want to print out PDFs and images, and the native library provides the
classes for that. However, I can't get it to work from Monotouch.


Long version: I have problem binding the structure described below.

@protocol ZebraPrinterConnection
    - (BOOL) open;
    - (void) close;
    - (NSInteger) write:(NSData *)data error:(NSError **)error;
    - (NSData *)read: (NSError**)error;

@interface TcpPrinterConnection : NSObject&lt;ZebraPrinterConnection&gt; {
     some @private properties
}
     - (id)initWithAddress:(NSString *)anAddress andWithPort:(
NSInteger)aPort;

@interface ZebraPrinterFactory : NSObject { }
  +(id&lt;ZebraPrinter,NSObject&gt;) getInstance:(id&lt;ZebraPrinterConnection,
NSObject&gt;) connection error:(NSError**)error


The tricky part here is to obtain ZebraPrinter instance in Monotouch code.
Note how ZebraPrinterFactory wants ZebraPrinterConnection to be passed to
it, but onlyTcpPrinterConnection has an actual constructor.
The connection classes work fine when bound like this:

[BaseType (typeof (NSObject))]
[Model]
interface ZebraPrinterConnection
{

[Export (&quot;open&quot;)] bool Open();

[Export (&quot;close&quot;)] void Close();
[Export (&quot;write:error:&quot;)] int Write(NSData data, out NSError error);
[Export (&quot;read:&quot;)] NSData Read(out NSError error);

}

[BaseType (typeof(NSObject))]
interface TcpPrinterConnection : ZebraPrinterConnection
{

[Export (&quot;initWithAddress:andWithPort:&quot;)] IntPtr Constructor (string
anAddress, int aPort);

}

Binding of ZebraPrinterFactory class is not as straightforward. If I bind
it like this:

[BaseType (typeof(NSObject))]
interface ZebraPrinterFactory
{

[Static, Export (&quot;getInstance:error:&quot;)]

ZebraPrinter getInstance(ZebraPrinterConnection connection, out NSError
error);

}

then I try to use something like

myConn = new TcpPrinterConnection(ipAddress, port);
myConn.Open ();
ZebraPrinter zPrinter = ZebraPrinterFactory.GetInstance(myConn, out err);
// compile-time error: Cannot convert TcpPrinterConnection
into ZebraPrinterConnection

I get a compile-time error. If I change the binding for Mono to
accept TcpPrinterConnection as parameter (I've tried multiple
configurations), I get runtime exception (&quot;System.InvalidCastException:
Cannot cast from source type to destination type.&quot;) which has no inner
exceptions and I have no idea which type could not be converted (strongly
suspecting that same conversion as above).
It's really frustrating having something ALMOST working, but not quite.

Any ideas? I'm starting to think of binding limitations already. Could
someone tell me if such structures can be bound at all?

Regards, Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120613/7bda214a/attachment-0001.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120613/7bda214a/attachment-0001.html</A>&gt;
</PRE>




































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010083.html">[MonoTouch] Newbie: MonoTouch + Janrain Engage ?
</A></li>
	<LI>Next message: <A HREF="010098.html">[MonoTouch] Binding of Zebra SDK to Monotouch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10080">[ date ]</a>
              <a href="thread.html#10080">[ thread ]</a>
              <a href="subject.html#10080">[ subject ]</a>
              <a href="author.html#10080">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
