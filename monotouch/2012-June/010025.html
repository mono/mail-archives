<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] System.Net.Sockets NullReference help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20System.Net.Sockets%20NullReference%20help&In-Reply-To=%3C1339174071409-4655267.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010024.html">
   <LINK REL="Next"  HREF="009967.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] System.Net.Sockets NullReference help</H1>
    <B>rnendel11</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20System.Net.Sockets%20NullReference%20help&In-Reply-To=%3C1339174071409-4655267.post%40n4.nabble.com%3E"
       TITLE="[MonoTouch] System.Net.Sockets NullReference help">rnendel11 at gmail.com
       </A><BR>
    <I>Fri Jun  8 16:47:51 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010024.html">[MonoTouch] System.Net.Sockets NullReference help
</A></li>
        <LI>Next message: <A HREF="009967.html">[MonoTouch] New Items Counter Icon/Overlay - How to implement?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10025">[ date ]</a>
              <a href="thread.html#10025">[ thread ]</a>
              <a href="subject.html#10025">[ subject ]</a>
              <a href="author.html#10025">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>OK, I downloaded and checked your test app.  At first I didn't know how to
reproduce, everything seemed to run as expected, until I pressed the enter
key to exit the app, then the exception occurs.  I'm assuming this is where
you see the exception occur always.

What is happening is, you have instructed the registration instance to
perform a task asynchronously with periodic updates.  So, I'm assuming that
the async operation is periodically completing and then initializing itself
again, ie. there's an active async always.

After you find the initiating thread has terminated, you prompt the user to
press any key to terminate the app and then the app promptly terminates,
leaving that async operation active (and therefore invalid).  I looked at
the registration module and could not find an &quot;End&lt;&gt;&quot; method that
corresponds to the &quot;BeginRegister()&quot; method used.  There doesn't seem to be
a &quot;gracious stop&quot; provided.  However, adding a new registration.Begin&lt;&gt;()
operation at the very end, with a parameter of &quot;false&quot; (to indicate the
async should not be continuously refreshed) seems to fix the problem, at
least as far as I can tell.

So, in short, the exceptions are from not cleanly shutting down with async
socket operations active in the background.  I think focusing there will
solve it.  

If you are seeing exceptions during &quot;normal operations&quot;, not just at
shutdown, let me know and I'll take a look.

Here is the line I added, just after the Console.ReadKey() at the very end:
registration.BeginRegistration(false);

&lt;then terminate&gt;

--
View this message in context: <A HREF="http://monotouch.2284126.n4.nabble.com/System-Net-Sockets-NullReference-help-tp4655218p4655267.html">http://monotouch.2284126.n4.nabble.com/System-Net-Sockets-NullReference-help-tp4655218p4655267.html</A>
Sent from the MonoTouch mailing list archive at Nabble.com.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010024.html">[MonoTouch] System.Net.Sockets NullReference help
</A></li>
	<LI>Next message: <A HREF="009967.html">[MonoTouch] New Items Counter Icon/Overlay - How to implement?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10025">[ date ]</a>
              <a href="thread.html#10025">[ thread ]</a>
              <a href="subject.html#10025">[ subject ]</a>
              <a href="author.html#10025">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
