<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MonoTouch] What does iOS do to my poor app in the background?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20What%20does%20iOS%20do%20to%20my%20poor%20app%20in%20the%20background%3F&In-Reply-To=%3CCAP-t25_XotPUcCZQ9LwSHe3u43boZi_vR-LuqePT2E%2BE-pfeVA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010339.html">
   <LINK REL="Next"  HREF="010380.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MonoTouch] What does iOS do to my poor app in the background?</H1>
    <B>Rolf Bjarne Kvinge</B> 
    <A HREF="mailto:monotouch%40lists.ximian.com?Subject=Re%3A%20%5BMonoTouch%5D%20What%20does%20iOS%20do%20to%20my%20poor%20app%20in%20the%20background%3F&In-Reply-To=%3CCAP-t25_XotPUcCZQ9LwSHe3u43boZi_vR-LuqePT2E%2BE-pfeVA%40mail.gmail.com%3E"
       TITLE="[MonoTouch] What does iOS do to my poor app in the background?">rolf at xamarin.com
       </A><BR>
    <I>Wed Jun 27 22:25:41 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010339.html">[MonoTouch] What does iOS do to my poor app in the background?
</A></li>
        <LI>Next message: <A HREF="010380.html">[MonoTouch] What does iOS do to my poor app in the background?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10355">[ date ]</a>
              <a href="thread.html#10355">[ thread ]</a>
              <a href="subject.html#10355">[ subject ]</a>
              <a href="author.html#10355">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Wed, Jun 27, 2012 at 10:30 AM, victoria &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">iminurbase at hotmail.com</A>&gt; wrote:

&gt;<i> Dear list,
</I>&gt;<i>
</I>&gt;<i> App works fine and Monotouch is awesome. The final showstopper is the silly
</I>&gt;<i> user decides to do something else (gasp!) and puts the app in the
</I>&gt;<i> background, and when restored later on one of three things happens:
</I>&gt;<i>
</I>&gt;<i> 1 App returns to where it was, great!
</I>&gt;<i> 2 App has been killed by iOS in the background and stars anew, can live
</I>&gt;<i> with
</I>&gt;<i> that!
</I>&gt;<i> 3 Something in-between, and the app freezes. This isn't very good.
</I>&gt;<i>
</I>
You might be able to get a crash report out of these freezes using this
technique:
<A HREF="http://rolfkvinge.blogspot.com.es/2012/05/monotouch-debugging-tips.html">http://rolfkvinge.blogspot.com.es/2012/05/monotouch-debugging-tips.html</A> -
and with symbolicated crash reports it is usually quite easy to find the
reason for hangs.

Another (somewhat harsher) method you can try is to handle memory warnings
and not do anything at all (in particular do not call the base class
implementation of DidReceiveMemoryWarning). This way you'll hopefully end
up in case 2) instead of 3) pretty much all the time.


&gt;<i>
</I>&gt;<i> Up until now I haven't put much thought into the whole
</I>&gt;<i> background/foreground
</I>&gt;<i> thing and find it surprisingly hard to come by any good resources how to do
</I>&gt;<i> this. The reason for the app freezing is probably me not properly restoring
</I>&gt;<i> the state of the application, but exactly what is it I need to
</I>&gt;<i> save/restore?
</I>&gt;<i>
</I>&gt;<i> The app I'm working on isn't the most complicated thing ever, but it's not
</I>&gt;<i> Hello ViewController either. For one thing, I have quite a few objects in
</I>&gt;<i> memory that responds to events. If iOS decides to kill them off, I can see
</I>&gt;<i> why the app freezes. If that's even possible? From what I understand, iOS
</I>&gt;<i> can &quot;reclaim memory&quot; (without killing the application), but exactly what
</I>&gt;<i> would that include? In memory objects? ViewControllers? Subviews?
</I>&gt;<i>
</I>
The app gets a memory warning (DidReceiveMemoryWarning) when the system
decides it needs more memory from you. If you release enough memory nothing
else happens. If you don't, your app is killed. (Note that UIViewController
will handle memory warnings and free stuff by itself). I don't know enough
about this to know exactly what is freed though and how you should handle
it properly (in my experience the restoration is pretty automatic, but I
guess it depends on each app)


&gt;<i>
</I>&gt;<i> For me, it all comes down to this: When the user returns to the app, I need
</I>&gt;<i> to know &quot;what has iOS done to my application&quot; so I know how to respond.
</I>&gt;<i> Right now I answer that question with &quot;I have no idea and just hope
</I>&gt;<i> scenario
</I>&gt;<i> 1 or 2 plays out&quot;.
</I>&gt;<i>
</I>
The easy way out is probably to override DidReceiveMemoryWarning as I
described above and not call the base method (you need to do this in all
your controllers) - this way the answer to &quot;what has iOS done to my
application&quot; will be &quot;nothing.&quot; (besides killing it :)

Rolf


&gt;<i>
</I>&gt;<i> Any hints or docs on this is very very very much appreciated. This is, I
</I>&gt;<i> think, the last issue before I get super rich selling my app for $0 on the
</I>&gt;<i> appstore.
</I>&gt;<i>
</I>&gt;<i> / V
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://monotouch.2284126.n4.nabble.com/What-does-iOS-do-to-my-poor-app-in-the-background-tp4655601.html">http://monotouch.2284126.n4.nabble.com/What-does-iOS-do-to-my-poor-app-in-the-background-tp4655601.html</A>
</I>&gt;<i> Sent from the MonoTouch mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> MonoTouch mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">MonoTouch at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/monotouch">http://lists.ximian.com/mailman/listinfo/monotouch</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/monotouch/attachments/20120628/a3bb4174/attachment.html">http://lists.ximian.com/pipermail/monotouch/attachments/20120628/a3bb4174/attachment.html</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010339.html">[MonoTouch] What does iOS do to my poor app in the background?
</A></li>
	<LI>Next message: <A HREF="010380.html">[MonoTouch] What does iOS do to my poor app in the background?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10355">[ date ]</a>
              <a href="thread.html#10355">[ thread ]</a>
              <a href="subject.html#10355">[ subject ]</a>
              <a href="author.html#10355">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monotouch">More information about the MonoTouch
mailing list</a><br>
</body></html>
