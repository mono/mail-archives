<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [android-devel] [macios-devel] Signal-chaining &amp; crash reporters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:android-devel%40lists.dot.net?Subject=Re%3A%20%5Bandroid-devel%5D%20%5Bmacios-devel%5D%20Signal-chaining%20%26%20crash%20reporters&In-Reply-To=%3CF4180F56-97BB-4A5B-B49F-C4E49D07439E%40microsoft.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000016.html">
   <LINK REL="Next"  HREF="000018.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[android-devel] [macios-devel] Signal-chaining &amp; crash reporters</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:android-devel%40lists.dot.net?Subject=Re%3A%20%5Bandroid-devel%5D%20%5Bmacios-devel%5D%20Signal-chaining%20%26%20crash%20reporters&In-Reply-To=%3CF4180F56-97BB-4A5B-B49F-C4E49D07439E%40microsoft.com%3E"
       TITLE="[android-devel] [macios-devel] Signal-chaining &amp; crash reporters">rokumper at microsoft.com
       </A><BR>
    <I>Thu Sep 22 21:05:07 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000016.html">[android-devel] [macios-devel] Signal-chaining &amp; crash reporters
</A></li>
        <LI>Next message (by thread): <A HREF="000018.html">[android-devel] [macios-devel] Signal-chaining &amp; crash reporters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17">[ date ]</a>
              <a href="thread.html#17">[ thread ]</a>
              <a href="subject.html#17">[ subject ]</a>
              <a href="author.html#17">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

Given Rolf’s constraints, I don’t think we can do reasonably better than your proposal.

--
Rodrigo


From: Miguel de Icaza &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">miguel at microsoft.com</A>&gt;
Date: Tuesday, September 20, 2016 at 6:01 AM
To: Rolf Kvinge &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">Rolf.Kvinge at microsoft.com</A>&gt;, Rodrigo Kumpera &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">rokumper at microsoft.com</A>&gt;
Cc: &quot;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">macios-devel at lists.dot.net</A>&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">macios-devel at lists.dot.net</A>&gt;, &quot;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">mono-devel-list at lists.dot.net</A>&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">mono-devel-list at lists.dot.net</A>&gt;, &quot;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">android-devel at lists.dot.net</A>&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">android-devel at lists.dot.net</A>&gt;
Subject: Re: [android-devel] [macios-devel] Signal-chaining &amp; crash reporters

Hello,

My proposal addressed that, the downside is that there is a window at startup where the runtime will not catch exceptions properly.

I think it is fair to document the limitation of the technique in those scenarios.

From: Rolf Kvinge &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">Rolf.Kvinge at microsoft.com</A>&gt;
Date: Tuesday, September 20, 2016 at 5:17 AM
To: Rodrigo Kumpera &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">rokumper at microsoft.com</A>&gt;
Cc: Miguel de Icaza &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">miguel at microsoft.com</A>&gt;, &quot;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">macios-devel at lists.dot.net</A>&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">macios-devel at lists.dot.net</A>&gt;, &quot;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">mono-devel-list at lists.dot.net</A>&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">mono-devel-list at lists.dot.net</A>&gt;, &quot;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">android-devel at lists.dot.net</A>&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">android-devel at lists.dot.net</A>&gt;
Subject: Re: [android-devel] [macios-devel] Signal-chaining &amp; crash reporters




Hi Rodrigo,



I think we should first decide how we want to expose this in managed code, since using your idea I don't see any options besides those I initially proposed (and which Miguel didn't like).



One of the problems is that there's a lot of people involved here:



1) The native library that detects crashes and collects crash information. On iOS this is typically PLCrashReporter [1].



2) Companies that build native crash reporting solutions on top of libraries from 1). On iOS this is HockeyApp, Insights, Crittercism, Flurry (which all use PLCrashReporter I believe), Crashlytics (which is not using PLCrashReporter, they wrote their own replacement [2]), etc.



3) The managed bindings for the products in 2). Some of these we maintain ourselves (in the component store - Crittercism [3]), some are maintained by those companies themselves (HockeyApp [4]), and some I believe are community supported/written.



4) Us.



5) The app (developer).



Ideally whatever we come up with should require changes from as few of these as possible, the best case scenario being #3 only (besides ourselves of course). Any changes to #1 will likely require changes to #2 as well.



Rolf



[1] <A HREF="https://plcrashreporter.org&lt;https://plcrashreporter.org/">https://plcrashreporter.org&lt;https://plcrashreporter.org/</A>&gt;

[2] <A HREF="http://stackoverflow.com/questions/14041789/comparison-between-testflight-live-quincykit-and-crashlytics#comment19667280_14103776">http://stackoverflow.com/questions/14041789/comparison-between-testflight-live-quincykit-and-crashlytics#comment19667280_14103776</A>

[3] <A HREF="https://components.xamarin.com/gettingstarted/crittercism">https://components.xamarin.com/gettingstarted/crittercism</A>

[4] <A HREF="https://github.com/bitstadium/HockeySDK-Xamarin">https://github.com/bitstadium/HockeySDK-Xamarin</A>



Sent from Outlook&lt;<A HREF="http://aka.ms/weboutlook">http://aka.ms/weboutlook</A>&gt;

________________________________
From: Rodrigo Kumpera
Sent: Monday, September 19, 2016 8:51:02 PM
To: Rolf Kvinge
Cc: Miguel de Icaza; <A HREF="http://lists.dot.net/mailman/listinfo/android-devel">macios-devel at lists.dot.net</A>; <A HREF="http://lists.dot.net/mailman/listinfo/android-devel">mono-devel-list at lists.dot.net</A>; <A HREF="http://lists.dot.net/mailman/listinfo/android-devel">android-devel at lists.dot.net</A>
Subject: Re: [android-devel] [macios-devel] Signal-chaining &amp; crash reporters

Hey Rolf,

On your suggestion, I’m not sure that’s exactly what we want.
Even though we can ask user to do signal chaining themselves, I don’t think it’s necessary. I don’t think we should be promoting the broken design of posix signals around. ;)
Another thing is that this design is not portable and exposes a bit too much of mono internals.

What about this: <A HREF="https://gist.github.com/569e860dd7e73bde0d8d098f95143662">https://gist.github.com/569e860dd7e73bde0d8d098f95143662</A>

It probably won’t compile as I normalized the signature of mono_handle_native_sigsegv with other similar functions.

--
Rodrigo


On 9/19/16, 3:25 AM, &quot;Rolf Kvinge&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/android-devel">Rolf.Kvinge at microsoft.com</A>&gt; wrote:


    Hi,

    &gt; From: Rodrigo Kumpera
    &gt;
    &gt;
    &gt; Hey guys,
    &gt;
    &gt;  Exposing signal handlers from managed code is always the wrong solution.
    &gt;
    &gt;
    &gt;
    &gt; If we're crashing in the runtime, a managed code signal handler has very little chance of works. It's a scenario we will never even consider supporting.

    This is not about exposing signal handlers to managed code, the signal handlers we want called are always in native code.

    &gt;
    &gt;
    &gt;
    &gt; I guess the simple solution is to add an embedding API call that queues signal handlers
    &gt; to be called first before chaining to the OS one.

    Something like this: <A HREF="https://gist.github.com/rolfbjarne/6aab59c1609f33402d195f9c34e9f99b?">https://gist.github.com/rolfbjarne/6aab59c1609f33402d195f9c34e9f99b?</A>

    Rolf

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/android-devel/attachments/20160922/f8f19755/attachment-0001.html">http://lists.dot.net/pipermail/android-devel/attachments/20160922/f8f19755/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000016.html">[android-devel] [macios-devel] Signal-chaining &amp; crash reporters
</A></li>
	<LI>Next message (by thread): <A HREF="000018.html">[android-devel] [macios-devel] Signal-chaining &amp; crash reporters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17">[ date ]</a>
              <a href="thread.html#17">[ thread ]</a>
              <a href="subject.html#17">[ subject ]</a>
              <a href="author.html#17">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/android-devel">More information about the android-devel
mailing list</a><br>
</body></html>
