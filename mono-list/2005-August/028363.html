<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Page Caching, VaryByCustom, VaryByParam
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Page%20Caching%2C%20VaryByCustom%2C%20VaryByParam&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028372.html">
   <LINK REL="Next"  HREF="028374.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Page Caching, VaryByCustom, VaryByParam</H1>
    <B>Marc DM</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Page%20Caching%2C%20VaryByCustom%2C%20VaryByParam&In-Reply-To="
       TITLE="[Mono-list] Page Caching, VaryByCustom, VaryByParam">m at phronein.com
       </A><BR>
    <I>Tue Aug 30 21:51:40 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="028372.html">[Spam] [Mono-list] Compiling VB
</A></li>
        <LI>Next message: <A HREF="028374.html">[Mono-list] Page Caching, VaryByCustom, VaryByParam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28363">[ date ]</a>
              <a href="thread.html#28363">[ thread ]</a>
              <a href="subject.html#28363">[ subject ]</a>
              <a href="author.html#28363">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is the ASP.NET Page Caching mechanism complete in Mono 1.1.7

Is there something I need to know about it?

I have the following code in an ASP.NET page :

&lt;%@ OutputCache Duration=&quot;600&quot; VaryByParam=&quot;pg;lang&quot; 
VaryByCustom=&quot;signedin&quot; %&gt;

And then in global.asax.cs (from which global.asax inherits) :

    public class Global : System.Web.HttpApplication
    {
        public override string GetVaryByCustomString(HttpContext 
context, string s)
        {
             if (mynamespace.utils.ContextAuthenticated(context))
                  return s;
             else
                  return &quot;guest&quot;;
        }
    }

But it doesn't give me two different versions of the page at all.

Also it doesn't seem to check the cookies collection for the parameter 
to vary by when using VaryByParam. Or am I mistaken to assume that a 
cookie named lang would equate to a param named lang.

I issue a cookie named lang on first visit, and if you want to use a 
different language, you click a link to the current url with lang=de as 
an additional querystring parameter. (assuming you selected de). Loading 
the page with this Querystring param will flip the language, and issue a 
new cookie in the page response.

Thinking about it now, it sounds like if the cookies collection is used, 
then when the link is clicked to switch language, then 2 values for lang 
would be sent. In that case, the first page returned in the new language 
would also be a different cached version than the one we want.

Anywho, VaryByCustom is not working, and VaryByParam is givin me some 
trouble.

Regards,

Marc DM

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028372.html">[Spam] [Mono-list] Compiling VB
</A></li>
	<LI>Next message: <A HREF="028374.html">[Mono-list] Page Caching, VaryByCustom, VaryByParam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28363">[ date ]</a>
              <a href="thread.html#28363">[ thread ]</a>
              <a href="subject.html#28363">[ subject ]</a>
              <a href="author.html#28363">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
