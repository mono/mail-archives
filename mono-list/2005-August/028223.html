<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Help with SSL and WebRequest
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Help%20with%20SSL%20and%20WebRequest&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028233.html">
   <LINK REL="Next"  HREF="028225.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Help with SSL and WebRequest</H1>
    <B>John M. Brown</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Help%20with%20SSL%20and%20WebRequest&In-Reply-To="
       TITLE="[Mono-list] Help with SSL and WebRequest">ratchet at firelace.com
       </A><BR>
    <I>Fri Aug 19 16:53:29 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="028233.html">[Mono-list] Binary installer
</A></li>
        <LI>Next message: <A HREF="028225.html">[Mono-list] Help with SSL and WebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28223">[ date ]</a>
              <a href="thread.html#28223">[ thread ]</a>
              <a href="subject.html#28223">[ subject ]</a>
              <a href="author.html#28223">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I continually get this error when I try to use the System.Net.WebRequest
class to connect to an SSL Server.

My setup: Using Debian (with MonoDevelop) and Mono 1.1.8-2.

Here's the full error:

Unhandled Exception: System.Net.WebException: Error writing request.
in &lt;0x0020d&gt; System.Net.WebConnectionStream:WriteRequest ()
in (wrapper remoting-invoke-with-check)
System.Net.WebConnectionStream:WriteRequest ()
in &lt;0x00147&gt; System.Net.WebConnectionStream:Close ()
in [0x0023a] (at /home/ratchet/mono/testcsharp/TEST/FileUpload.cs:91)
FileUpload:UploadFileEx (System.String uploadfile, System.String url,
System.String fileFormName, System.String contenttype, System.String
querystring)
in [0x00011] (at /home/ratchet/mono/testcsharp/TEST/FileUpload.cs:19)
FileUpload:Upload ()
in [0x00011] (at /home/ratchet/mono/testcsharp/TEST/Main.cs:55)
SimpleApp:button_Clicked (System.Object sender, System.EventArgs e)
in (wrapper delegate-invoke)
System.MulticastDelegate:invoke_void_object_EventArgs
(object,System.EventArgs)
in &lt;0x00096&gt; GLib.Signal:voidObjectCallback (IntPtr handle, IntPtr gch)
in (wrapper native-to-managed) GLib.Signal:voidObjectCallback (intptr,intptr)
in &lt;0x00000&gt; &lt;unknown method&gt;
in (wrapper managed-to-native) Gtk.Application:gtk_main ()
in &lt;0x00007&gt; Gtk.Application:Run ()
in [0x000a6] (at /home/ratchet/mono/testcsharp/TEST/Main.cs:31)
SimpleApp:Main ()

I ran the tlstest.exe file from: <A HREF="http://www.mono-project.com/FAQ:_Security">http://www.mono-project.com/FAQ:_Security</A>
and it gives me some data but the last line reads:

&quot;Error #-2146762486: CERT_E_CHAINING 0x800B010A&quot;

...

I've connected and written the request (which works on Microsoft's .Net
CLR) but when I go to &quot;WebRequest.Flush()&quot; and &quot;WebRequest.Close()&quot; it
dies.

I read in a mailing in June that I may be able to get around this by
trusting the certificate, but alas the FAQ page doesn't provide much in
the way of details except to say &quot;you need to find the public
certificate&quot;.

Can anyone provide a work around or tell me what I'm doing wrong... or
even give me some direction in how to set up trust against either an
individual or blanketed trust to all certificates?

Here's a snippet...

...
requestStream.Write(boundaryBytes, 0, boundaryBytes.Length);
requestStream.Flush();
requestStream.Close();
WebResponse resp = webrequest.GetResponse();
StreamReader sr = new StreamReader(s);
return sr.ReadToEnd();


Let me repeat again for clarity.  My program works correctly on
Microsoft's .Net CLR on Windows, but fails when run through Mono.  The
site I'm connecting to for an example is <A HREF="https://www.ipupdater.com">https://www.ipupdater.com</A>

Thanks,

John M. Brown

</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028233.html">[Mono-list] Binary installer
</A></li>
	<LI>Next message: <A HREF="028225.html">[Mono-list] Help with SSL and WebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28223">[ date ]</a>
              <a href="thread.html#28223">[ thread ]</a>
              <a href="subject.html#28223">[ subject ]</a>
              <a href="author.html#28223">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
