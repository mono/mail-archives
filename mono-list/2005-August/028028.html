<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Problem with Events
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Problem%20with%20Events&In-Reply-To=1123140629.8217.14.camel%40laptoplinux.barlow.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028027.html">
   <LINK REL="Next"  HREF="028034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Problem with Events</H1>
    <B>Jackson Harper</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Problem%20with%20Events&In-Reply-To=1123140629.8217.14.camel%40laptoplinux.barlow.local"
       TITLE="[Mono-list] Problem with Events">jackson at ximian.com
       </A><BR>
    <I>Thu Aug  4 04:56:52 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="028027.html">[Mono-list] Problem with Events
</A></li>
        <LI>Next message: <A HREF="028034.html">[Mono-list] Sqlite version
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28028">[ date ]</a>
              <a href="thread.html#28028">[ thread ]</a>
              <a href="subject.html#28028">[ subject ]</a>
              <a href="author.html#28028">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2005-08-04 at 17:30 +1000, <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list.1.tracyanne at spamgourmet.com</A>
wrote:
&gt;<i> Can anyone see anything wrong with this code. It looks to me to be
</I>&gt;<i> correct syntax for defining and raising an event. It compiles without
</I>&gt;<i> error, but when I run it I get the following error message
</I>
Nothing is ever subscribing to your event, so it is null when you are
trying to invoke it. You need something like:

OnInputError += new InputError (ErrorHandlerFunction); somewhere.

A few general style comments:

1. Normally event handler delegates are named &lt;something&gt;Handler. So
your InputError delegate would be named InputErrorHandler.

2. Normally events names don't start with On. So OnInputError would be
InputError.

3. It's common to wrap the instantiation of an event in a protected
method named On&lt;Event Name&gt;. So you would have a method that looks like
this:

protected void OnInputError (InputErrorEventArgs e)
{
        if (InputError != null)
                InputError (this, e);
}


Cheers,
Jackson


&gt;<i> 
</I>&gt;<i> Unhandled Exception: System.NullReferenceException: Object reference not
</I>&gt;<i> set to an instance of an object
</I>&gt;<i> in [0x00001] (at /home/tracy/MonoDevelop/TestEvents/Main.cs:22)
</I>&gt;<i> RaiseAnEvent:Run ()
</I>&gt;<i> in [0x00007] (at /home/tracy/MonoDevelop/TestEvents/Main.cs:11)
</I>&gt;<i> MainClass:Main (System.String[] args)
</I>&gt;<i> 
</I>&gt;<i> I'm using Mono_1.1.8-2.
</I>&gt;<i> 
</I>&gt;<i> // project created on 04/08/2005 at 17:17
</I>&gt;<i> using System;
</I>&gt;<i> 
</I>&gt;<i> class MainClass
</I>&gt;<i> {
</I>&gt;<i> 				
</I>&gt;<i> 	public static void Main(string[] args)
</I>&gt;<i> 	{
</I>&gt;<i> 		RaiseAnEvent RAE = new RaiseAnEvent();
</I>&gt;<i> 		RAE.Run();
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> class RaiseAnEvent
</I>&gt;<i> {
</I>&gt;<i> 	public delegate void InputError(object sender, InputErrorEventArgs e);
</I>&gt;<i> 	public event InputError OnInputError;
</I>&gt;<i> 	
</I>&gt;<i> 	public void Run()
</I>&gt;<i> 	{
</I>&gt;<i> 		OnInputError(this, new InputErrorEventArgs(&quot;DF&quot;, &quot;OI&quot;));
</I>&gt;<i> 	}
</I>&gt;<i> 
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> 	
</I>&gt;<i> //Class for passing Input Error messages to the application
</I>&gt;<i> class InputErrorEventArgs : EventArgs
</I>&gt;<i> {
</I>&gt;<i> 	private string errorMessage;
</I>&gt;<i> 	private string errorSource;
</I>&gt;<i> 	
</I>&gt;<i> 	public string ErrorMessage
</I>&gt;<i> 	{
</I>&gt;<i> 		get
</I>&gt;<i> 		{
</I>&gt;<i> 			return errorMessage;
</I>&gt;<i> 		}
</I>&gt;<i> 	}
</I>&gt;<i> 	
</I>&gt;<i> 	public string ErrorSource
</I>&gt;<i> 	{
</I>&gt;<i> 		get
</I>&gt;<i> 		{
</I>&gt;<i> 			return errorSource;
</I>&gt;<i> 		}
</I>&gt;<i> 	}
</I>&gt;<i> 	
</I>&gt;<i> 	public InputErrorEventArgs(string Message, string Source) : base()
</I>&gt;<i> 	{
</I>&gt;<i> 		errorMessage = Message;
</I>&gt;<i> 		errorSource = Source;
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028027.html">[Mono-list] Problem with Events
</A></li>
	<LI>Next message: <A HREF="028034.html">[Mono-list] Sqlite version
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28028">[ date ]</a>
              <a href="thread.html#28028">[ thread ]</a>
              <a href="subject.html#28028">[ subject ]</a>
              <a href="author.html#28028">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
