<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Addresses marked as ??? in Valgrind stack trace
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Addresses%20marked%20as%20%3F%3F%3F%20in%20Valgrind%20stack%20trace&In-Reply-To=%3CCANaWP3xCecd7782GAdZi%2BT7zyd0pYPKaADGskBGky%2B%3DDitu%3DQg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048983.html">
   <LINK REL="Next"  HREF="048985.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Addresses marked as ??? in Valgrind stack trace</H1>
    <B>Kerrick Staley</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Addresses%20marked%20as%20%3F%3F%3F%20in%20Valgrind%20stack%20trace&In-Reply-To=%3CCANaWP3xCecd7782GAdZi%2BT7zyd0pYPKaADGskBGky%2B%3DDitu%3DQg%40mail.gmail.com%3E"
       TITLE="[Mono-list] Addresses marked as ??? in Valgrind stack trace">mail at kerrickstaley.com
       </A><BR>
    <I>Thu Oct  4 18:19:13 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="048983.html">[Mono-list] Help with mono
</A></li>
        <LI>Next message: <A HREF="048985.html">[Mono-list] Addresses marked as ??? in Valgrind stack trace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48984">[ date ]</a>
              <a href="thread.html#48984">[ thread ]</a>
              <a href="subject.html#48984">[ subject ]</a>
              <a href="author.html#48984">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I'm running Valgrind on Mono as it executes a C# program. The C# program in
question invokes several native routines in several different shared object
files, and it's crashing in one of these native routines. The following is
a snippet from Valgrind's output:

==3652== Thread 5:
==3652== Conditional jump or move depends on uninitialised value(s)
==3652==    at 0xA55A385: ???
==3652==    by 0xA55A1F7: ???
==3652==    by 0x78C8074: ???
==3652==    by 0x8064415: mono_jit_runtime_invoke (mini.c:5791)
==3652==    by 0x81AF4EE: mono_runtime_invoke (object.c:2755)
==3652==    by 0x81AF8F3: mono_runtime_delegate_invoke (object.c:3420)
==3652==    by 0x8202FEB: start_wrapper (threads.c:790)
==3652==    by 0x82305EE: thread_start_routine (wthreads.c:287)
==3652==    by 0x416FD5D: clone (clone.S:130)
==3652==
==3652== Invalid read of size 4
==3652==    at 0xA55A543: ???
==3652==    by 0xA55A1F7: ???
==3652==    by 0x78C8074: ???
==3652==    by 0x8064415: mono_jit_runtime_invoke (mini.c:5791)
==3652==    by 0x81AF4EE: mono_runtime_invoke (object.c:2755)
==3652==    by 0x81AF8F3: mono_runtime_delegate_invoke (object.c:3420)
==3652==    by 0x8202FEB: start_wrapper (threads.c:790)
==3652==    by 0x82305EE: thread_start_routine (wthreads.c:287)
==3652==    by 0x416FD5D: clone (clone.S:130)
==3652==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==3652==
==3652== Thread 5 return signal frame corrupted.  Killing process.
==3652==
==3652== Process terminating with default action of signal 11 (SIGSEGV)
==3652==  General Protection Fault
==3652==    at 0x408F655: ??? (in /lib/libpthread-2.11.3.so)
==3652==    by 0xA55A1F7: ???
==3652==    by 0x78C8074: ???
==3652==    by 0x8064415: mono_jit_runtime_invoke (mini.c:5791)
==3652==    by 0x81AF4EE: mono_runtime_invoke (object.c:2755)
==3652==    by 0x81AF8F3: mono_runtime_delegate_invoke (object.c:3420)
==3652==    by 0x8202FEB: start_wrapper (threads.c:790)
==3652==    by 0x82305EE: thread_start_routine (wthreads.c:287)
==3652==    by 0x416FD5D: clone (clone.S:130)

I can't track down the error since the stack trace doesn't indicate which
shared object and function it occurs in.

According to <A HREF="http://valgrind.org/docs/manual/faq.html#faq.unhelpful,">http://valgrind.org/docs/manual/faq.html#faq.unhelpful,</A> if a
shared object is unloaded before the program terminates, ??? entries will
appear in the stack trace, so I'm guessing that Mono is dynamically
unloading the shared object after the segfault. I'm unsure as to whether
this hunch even makes sense, though. Is there anything I can do on either
the Valgrind or the Mono side to get more information from the stack trace?

Thanks,
Kerrick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20121004/cb2e3856/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20121004/cb2e3856/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048983.html">[Mono-list] Help with mono
</A></li>
	<LI>Next message: <A HREF="048985.html">[Mono-list] Addresses marked as ??? in Valgrind stack trace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48984">[ date ]</a>
              <a href="thread.html#48984">[ thread ]</a>
              <a href="subject.html#48984">[ subject ]</a>
              <a href="author.html#48984">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
