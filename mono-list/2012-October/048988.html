<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Addresses marked as ??? in Valgrind stack trace
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Addresses%20marked%20as%20%3F%3F%3F%20in%20Valgrind%20stack%20trace&In-Reply-To=%3CCACmR%2BBAQ79_nc8JmX9h5J%2Byvrg%2BzTOrxqBeWqc-e6MgbX%3DxGLw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048985.html">
   <LINK REL="Next"  HREF="049000.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Addresses marked as ??? in Valgrind stack trace</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Addresses%20marked%20as%20%3F%3F%3F%20in%20Valgrind%20stack%20trace&In-Reply-To=%3CCACmR%2BBAQ79_nc8JmX9h5J%2Byvrg%2BzTOrxqBeWqc-e6MgbX%3DxGLw%40mail.gmail.com%3E"
       TITLE="[Mono-list] Addresses marked as ??? in Valgrind stack trace">kumpera at gmail.com
       </A><BR>
    <I>Fri Oct  5 18:11:42 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="048985.html">[Mono-list] Addresses marked as ??? in Valgrind stack trace
</A></li>
        <LI>Next message: <A HREF="049000.html">[Mono-list] Addresses marked as ??? in Valgrind stack trace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48988">[ date ]</a>
              <a href="thread.html#48988">[ thread ]</a>
              <a href="subject.html#48988">[ subject ]</a>
              <a href="author.html#48988">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mono features a JIT that dynamically generates code and those unknown
frames are precisely that.
Look at the man page to see how to enable valgrind integration to show
actual names instead.

On Thu, Oct 4, 2012 at 2:19 PM, Kerrick Staley &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mail at kerrickstaley.com</A>&gt;wrote:

&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I'm running Valgrind on Mono as it executes a C# program. The C# program
</I>&gt;<i> in question invokes several native routines in several different shared
</I>&gt;<i> object files, and it's crashing in one of these native routines. The
</I>&gt;<i> following is a snippet from Valgrind's output:
</I>&gt;<i>
</I>&gt;<i> ==3652== Thread 5:
</I>&gt;<i> ==3652== Conditional jump or move depends on uninitialised value(s)
</I>&gt;<i> ==3652==    at 0xA55A385: ???
</I>&gt;<i> ==3652==    by 0xA55A1F7: ???
</I>&gt;<i> ==3652==    by 0x78C8074: ???
</I>&gt;<i> ==3652==    by 0x8064415: mono_jit_runtime_invoke (mini.c:5791)
</I>&gt;<i> ==3652==    by 0x81AF4EE: mono_runtime_invoke (object.c:2755)
</I>&gt;<i> ==3652==    by 0x81AF8F3: mono_runtime_delegate_invoke (object.c:3420)
</I>&gt;<i> ==3652==    by 0x8202FEB: start_wrapper (threads.c:790)
</I>&gt;<i> ==3652==    by 0x82305EE: thread_start_routine (wthreads.c:287)
</I>&gt;<i> ==3652==    by 0x416FD5D: clone (clone.S:130)
</I>&gt;<i> ==3652==
</I>&gt;<i> ==3652== Invalid read of size 4
</I>&gt;<i> ==3652==    at 0xA55A543: ???
</I>&gt;<i> ==3652==    by 0xA55A1F7: ???
</I>&gt;<i> ==3652==    by 0x78C8074: ???
</I>&gt;<i> ==3652==    by 0x8064415: mono_jit_runtime_invoke (mini.c:5791)
</I>&gt;<i> ==3652==    by 0x81AF4EE: mono_runtime_invoke (object.c:2755)
</I>&gt;<i> ==3652==    by 0x81AF8F3: mono_runtime_delegate_invoke (object.c:3420)
</I>&gt;<i> ==3652==    by 0x8202FEB: start_wrapper (threads.c:790)
</I>&gt;<i> ==3652==    by 0x82305EE: thread_start_routine (wthreads.c:287)
</I>&gt;<i> ==3652==    by 0x416FD5D: clone (clone.S:130)
</I>&gt;<i> ==3652==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
</I>&gt;<i> ==3652==
</I>&gt;<i> ==3652== Thread 5 return signal frame corrupted.  Killing process.
</I>&gt;<i> ==3652==
</I>&gt;<i> ==3652== Process terminating with default action of signal 11 (SIGSEGV)
</I>&gt;<i> ==3652==  General Protection Fault
</I>&gt;<i> ==3652==    at 0x408F655: ??? (in /lib/libpthread-2.11.3.so)
</I>&gt;<i> ==3652==    by 0xA55A1F7: ???
</I>&gt;<i> ==3652==    by 0x78C8074: ???
</I>&gt;<i> ==3652==    by 0x8064415: mono_jit_runtime_invoke (mini.c:5791)
</I>&gt;<i> ==3652==    by 0x81AF4EE: mono_runtime_invoke (object.c:2755)
</I>&gt;<i> ==3652==    by 0x81AF8F3: mono_runtime_delegate_invoke (object.c:3420)
</I>&gt;<i> ==3652==    by 0x8202FEB: start_wrapper (threads.c:790)
</I>&gt;<i> ==3652==    by 0x82305EE: thread_start_routine (wthreads.c:287)
</I>&gt;<i> ==3652==    by 0x416FD5D: clone (clone.S:130)
</I>&gt;<i>
</I>&gt;<i> I can't track down the error since the stack trace doesn't indicate which
</I>&gt;<i> shared object and function it occurs in.
</I>&gt;<i>
</I>&gt;<i> According to <A HREF="http://valgrind.org/docs/manual/faq.html#faq.unhelpful,">http://valgrind.org/docs/manual/faq.html#faq.unhelpful,</A> if a
</I>&gt;<i> shared object is unloaded before the program terminates, ??? entries will
</I>&gt;<i> appear in the stack trace, so I'm guessing that Mono is dynamically
</I>&gt;<i> unloading the shared object after the segfault. I'm unsure as to whether
</I>&gt;<i> this hunch even makes sense, though. Is there anything I can do on either
</I>&gt;<i> the Valgrind or the Mono side to get more information from the stack trace?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Kerrick
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20121005/eecba836/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20121005/eecba836/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048985.html">[Mono-list] Addresses marked as ??? in Valgrind stack trace
</A></li>
	<LI>Next message: <A HREF="049000.html">[Mono-list] Addresses marked as ??? in Valgrind stack trace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48988">[ date ]</a>
              <a href="thread.html#48988">[ thread ]</a>
              <a href="subject.html#48988">[ subject ]</a>
              <a href="author.html#48988">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
