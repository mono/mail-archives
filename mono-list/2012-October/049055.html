<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono &amp; x64 issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Mono%20%26%20x64%20issue&In-Reply-To=%3CE726E2AF4466A04EAEAEDD8D7672D946087176%40MTLEXC04.eidos.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="049039.html">
   <LINK REL="Next"  HREF="049028.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono &amp; x64 issue</H1>
    <B>Francois Schelling</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Mono%20%26%20x64%20issue&In-Reply-To=%3CE726E2AF4466A04EAEAEDD8D7672D946087176%40MTLEXC04.eidos.com%3E"
       TITLE="[Mono-list] Mono &amp; x64 issue">fschelling at square-enix-montreal.com
       </A><BR>
    <I>Mon Oct 22 17:13:10 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="049039.html">[Mono-list] Mono &amp; x64 issue
</A></li>
        <LI>Next message: <A HREF="049028.html">[Mono-list] monologue blogs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49055">[ date ]</a>
              <a href="thread.html#49055">[ thread ]</a>
              <a href="subject.html#49055">[ subject ]</a>
              <a href="author.html#49055">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok,

 

I've just tried to build my own version of mono using the what you mentioned : build the mono/msvc/mono.sln with Visual Studio 2010.  I decided to start with the 32 bits version since I'm having a working version of my app working with the &quot;official&quot; mono package.  I've been able to compile the mono-2.0.dll and mono-2.0.lib.  But when launching my app, I've got the following error when calling  mono_jit_init_version():

 

* Assertion at d:\projects\monoeval\mono-2.11.4-source\mono\metadata\threads.c:767, condition `((char*)&amp;internal-&gt;unused2 - (char*)internal)== mono_defaults.internal_thread_class-&gt;fields [mono_defaults.internal_thread_class-&gt;field.count - 1].offset' not met

 

The problem is with my own mono-2.0.dll since swapping it with the one from mono package work just fine.

 

Any idea?

 

 

Francois Schelling

Senior Programmer

Square Enix Montr&#233;al

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">fschelling at square-enix-montreal.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">fschelling at square-enix-montreal.com</A>&gt; 

 

 

 

 

 

 

From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list-bounces at lists.ximian.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list-bounces at lists.ximian.com</A>] On Behalf Of Jonathan Chambers
Sent: 20 October 2012 15:21
To: Robert Jordan
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
Subject: Re: [Mono-list] Mono &amp; x64 issue

 

The easiest thing to do is to build the Visual Studio solution mono.sln in mono/msvc. Build the x64 target in this case. It will produce the dynamic library (mono-2.0.dll) and an import lib (mono-2.0.lib). A few others and myself had the Win64 version of the runtime working pretty well. You may run into some issues, but it should simple applications reliably.

 

Thanks,

Jonathan

On Tue, Oct 16, 2012 at 10:54 AM, Robert Jordan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">robertj at gmx.net</A>&gt; wrote:

On 16.10.2012 16:14, Francois Schelling wrote:

I've created a 64 bits version of my mono.lib in order to make my
program links correctly with mono using the following command: lib
/nologo /def:mono.def /out:mono64.lib /machine:x64.

 

The &quot;official&quot; Mono for Windows is 32-bit only, so creating
a 64-bit import lib won't help at all.

Robert

_______________________________________________
Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>

 


______________________________________________________________________
This email has been scanned by the MessageLabs
______________________________________________________________________


______________________________________________________________________
This email has been scanned by the MessageLabs
______________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20121022/8b73d963/attachment-0001.html">http://lists.ximian.com/pipermail/mono-list/attachments/20121022/8b73d963/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.gif
Type: image/gif
Size: 824 bytes
Desc: image001.gif
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20121022/8b73d963/attachment-0001.gif">http://lists.ximian.com/pipermail/mono-list/attachments/20121022/8b73d963/attachment-0001.gif</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="049039.html">[Mono-list] Mono &amp; x64 issue
</A></li>
	<LI>Next message: <A HREF="049028.html">[Mono-list] monologue blogs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49055">[ date ]</a>
              <a href="thread.html#49055">[ thread ]</a>
              <a href="subject.html#49055">[ subject ]</a>
              <a href="author.html#49055">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
