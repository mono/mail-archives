<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Sharing Web.config among webapps/services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:joe_audette%40yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="024256.html">
   <LINK REL="Next"  HREF="024260.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Sharing Web.config among webapps/services
   </H1>
    <B>Joe Audette
    </B> 
    <A HREF="mailto:joe_audette%40yahoo.com"
       TITLE="[Mono-list] Sharing Web.config among webapps/services">joe_audette@yahoo.com
       </A><BR>
    <I>Thu, 4 Nov 2004 07:27:45 -0800 (PST)</I>
    <P><UL>
        <LI> Previous message: <A HREF="024256.html">[Mono-list] Sharing Web.config among webapps/services
</A></li>
        <LI> Next message: <A HREF="024260.html">[Mono-list] Sharing Web.config among webapps/services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24259">[ date ]</a>
              <a href="thread.html#24259">[ thread ]</a>
              <a href="subject.html#24259">[ subject ]</a>
              <a href="author.html#24259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--0-1500469038-1099582065=:32190
Content-Type: text/plain; charset=us-ascii

I'm not using XSP. I have this working under mono with mod_mono and apache, the only difference is my referenced file is in the same folder with the Web.config file so not sure about ../../ but I thought it would work.
 
Mine is like this
&lt;appSettings file=&quot;user.config&quot;&gt;
    &lt;add key=&quot;myKey&quot; value=&quot;somePrivateValue&quot; /&gt;
&lt;/appSettings&gt;
 
Where user.config is in the same folder with Web.config
In this scenario the setting from user.config is used in preference to the same setting in Web.config
 
Under mono, if I make a change in Web.config or user.config I have to killall mono to make it see the changes.
Under Windows it detects changes to Web.config but not changes to user.config
 
I would suggest 2 experiments.
1. Name the referenced file something other than Web.config as this name has special context, try main.config or something like that.
2. See if it works in the same folder with the Web.config instead of ../../
 
Hope that helps,
 
Joe Audette


Mariano Alarcon &lt;<A HREF="mailto:marianoa@itcsoluciones.com">marianoa@itcsoluciones.com</A>&gt; wrote:
Thanks Joe,

I tried your suggestion, but it did not work. I created a Web.config 
file inside WebApp1 and added the following:





I can read the value of &quot;myKey&quot; but not the the settings defined in 
../../Web.config. Do you mean that it works for you with IIS or mono?

If I point xsp to mainDir I can read both values but I still have the 
problem that I have to move all the dlls up to mainDir...


Joe Audette wrote:

&gt;<i> Another way to do it is in the Web.config, reference another config 
</I>&gt;<i> file like this
</I>&gt;<i> Web.config:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Then the settings in the referenced MyWeb.config will take precedence 
</I>&gt;<i> over the settings in the calling Web.config
</I>&gt;<i> Not sure if that helps but it does work
</I>&gt;<i> 
</I>&gt;<i> Joe Audette
</I>&gt;<i>
</I>&gt;<i> */Mariano Alarcon /* wrote:
</I>&gt;<i>
</I>&gt;<i> Yes, but maybe WebApps have Web.config files of their own which I
</I>&gt;<i> would
</I>&gt;<i> like to take precedence. If I do links I only get one Web.config file.
</I>&gt;<i>
</I>&gt;<i> Dan Maltes wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Perhaps file links would work?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;-Dan
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;-----Original Message-----
</I>&gt;<i> &gt;From: <A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>
</I>&gt;<i> &gt;[mailto:<A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>] On Behalf Of Mariano
</I>&gt;<i> Alarcon
</I>&gt;<i> &gt;Sent: Tuesday, November 02, 2004 11:50 AM
</I>&gt;<i> &gt;To: <A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>
</I>&gt;<i> &gt;Subject: [Mono-list] Sharing Web.config among webapps/services
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Hello,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Is it posible to set up xsp/mod_mono so they can share the same
</I>&gt;<i> Web.config
</I>&gt;<i> &gt;file? So far I have been able to make this happen but it requires
</I>&gt;<i> that I
</I>&gt;<i> &gt;move all the codebehind binaries to the main directory.
</I>&gt;<i> &gt;For example I tried:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;|
</I>&gt;<i> &gt;+-MainDir
</I>&gt;<i> &gt; |
</I>&gt;<i> &gt; + - Web.config (to be shared by WebApp1 and WebApp2)
</I>&gt;<i> &gt; |
</I>&gt;<i> &gt; +- WebApp1
</I>&gt;<i> &gt; | |
</I>&gt;<i> &gt; | +- WebApp1.asmx
</I>&gt;<i> &gt; | |
</I>&gt;<i> &gt; | +- bin
</I>&gt;<i> &gt; | |
</I>&gt;<i> &gt; | +- WebApp1.dll
</I>&gt;<i> &gt; |
</I>&gt;<i> &gt; +- WebApp2
</I>&gt;<i> &gt; |
</I>&gt;<i> &gt; +- WebApp2.asmx
</I>&gt;<i> &gt; |
</I>&gt;<i> &gt; +- bin
</I>&gt;<i> &gt; |
</I>&gt;<i> &gt; + WebApp2.dll
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;With this configuration if I point my xsp to MainDir I get the
</I>&gt;<i> following:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Server error in '/' application
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Type WebApp.WebApp1 not found.
</I>&gt;<i> &gt;Description: Error processing request.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Error Message: HTTP 500. Type WebApp.WebApp1 not found.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Starting two xsps at /WebApp1 and /WebApp2 deals with the error
</I>&gt;<i> but I do not
</I>&gt;<i> &gt;get the common settings in Web.config. It also works if I move
</I>&gt;<i> WebApp1.dll
</I>&gt;<i> &gt;and WebApp2.dll to a /bin directory under MainDir but I was
</I>&gt;<i> hoping I could
</I>&gt;<i> &gt;keep the structure like the example above.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Is this possible?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Thanks.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;_______________________________________________
</I>&gt;<i> &gt;Mono-list maillist - <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> &gt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Mariano Alarcón
</I>&gt;<i> ITC Soluciones
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist - <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="mailto:joe_audette@yahoo.com">joe_audette@yahoo.com</A>
</I>&gt;<i> <A HREF="http://www.joeaudette.com">http://www.joeaudette.com</A>
</I>&gt;<i> <A HREF="http://www.mojoportal.com">http://www.mojoportal.com</A> 
</I>

-- 
Mariano Alarcón
ITC Soluciones



<A HREF="mailto:joe_audette@yahoo.com">joe_audette@yahoo.com</A>
<A HREF="http://www.joeaudette.com">http://www.joeaudette.com</A>
<A HREF="http://www.mojoportal.com">http://www.mojoportal.com</A>
--0-1500469038-1099582065=:32190
Content-Type: text/html; charset=us-ascii

&lt;DIV&gt;I'm not using XSP. I have this working under mono with mod_mono and&amp;nbsp;apache, the only difference is my referenced file is in the same folder with the Web.config file so not sure about ../../ but I thought it would work.&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;Mine is like this&lt;/DIV&gt;
&lt;DIV&gt;&amp;lt;appSettings file=&quot;user.config&quot;&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;add key=&quot;myKey&quot; value=&quot;somePrivateValue&quot; /&amp;gt;&lt;BR&gt;&amp;lt;/appSettings&amp;gt;&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;Where user.config is in the same folder with Web.config&lt;/DIV&gt;
&lt;DIV&gt;In this scenario the setting from user.config is used in preference to the same setting in Web.config&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;Under mono, if I make a change in Web.config or user.config&amp;nbsp;I have to killall mono to make it see the changes.&lt;/DIV&gt;
&lt;DIV&gt;Under Windows it detects changes to Web.config but not changes to user.config&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;I would suggest 2 experiments.&lt;/DIV&gt;
&lt;DIV&gt;1. Name the referenced file something other than Web.config as this name has special context, try main.config or something like that.&lt;/DIV&gt;
&lt;DIV&gt;2. See if it works in the same folder with the Web.config instead of ../../&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;Hope that helps,&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;Joe Audette&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;B&gt;&lt;I&gt;Mariano Alarcon &amp;lt;<A HREF="mailto:marianoa@itcsoluciones.com">marianoa@itcsoluciones.com</A>&amp;gt;&lt;/I&gt;&lt;/B&gt; wrote:&lt;/DIV&gt;
&lt;BLOCKQUOTE class=replbq style=&quot;PADDING-LEFT: 5px; MARGIN-LEFT: 5px; BORDER-LEFT: #1010ff 2px solid&quot;&gt;Thanks Joe,&lt;BR&gt;&lt;BR&gt;I tried your suggestion, but it did not work. I created a Web.config &lt;BR&gt;file inside WebApp1 and added the following:&lt;BR&gt;&lt;BR&gt;&lt;APPSETTINGS file=&quot;../../Web.config&quot;&gt;&lt;BR&gt;&lt;ADD value=&quot;somePrivateValue&quot; key=&quot;myKey&quot; /&gt;&lt;BR&gt;&lt;/APPSETTINGS&gt;&lt;BR&gt;&lt;BR&gt;I can read the value of &quot;myKey&quot; but not the the settings defined in &lt;BR&gt;../../Web.config. Do you mean that it works for you with IIS or mono?&lt;BR&gt;&lt;BR&gt;If I point xsp to mainDir I can read both values but I still have the &lt;BR&gt;problem that I have to move all the dlls up to mainDir...&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Joe Audette wrote:&lt;BR&gt;&lt;BR&gt;&amp;gt; Another way to do it is in the Web.config, reference another config &lt;BR&gt;&amp;gt; file like this&lt;BR&gt;&amp;gt; Web.config:&lt;BR&gt;&amp;gt; &lt;APPSETTINGS file=&quot;../MyWeb.config&quot;&gt;&lt;BR&gt;&amp;gt; &lt;BR&gt;&amp;gt; Then the settings in the referenced MyWeb.config will take precedence &lt;BR&gt;&amp;gt; over the settings in the calling Web.config&lt;BR&gt;&amp;gt; Not su
 re if
 that helps but it does work&lt;BR&gt;&amp;gt; &lt;BR&gt;&amp;gt; Joe Audette&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt; */Mariano Alarcon &lt;<A HREF="mailto:MARIANOA@ITCSOLUCIONES.COM">MARIANOA@ITCSOLUCIONES.COM</A>&gt;/* wrote:&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt; Yes, but maybe WebApps have Web.config files of their own which I&lt;BR&gt;&amp;gt; would&lt;BR&gt;&amp;gt; like to take precedence. If I do links I only get one Web.config file.&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt; Dan Maltes wrote:&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt; &amp;gt; Perhaps file links would work?&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;-Dan&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;-----Original Message-----&lt;BR&gt;&amp;gt; &amp;gt;From: <A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>&lt;BR&gt;&amp;gt; &amp;gt;[mailto:<A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>] On Behalf Of Mariano&lt;BR&gt;&amp;gt; Alarcon&lt;BR&gt;&amp;gt; &amp;gt;Sent: Tuesday, November 02, 2004 11:50 AM&lt;BR&gt;&amp;gt; &amp;gt;To: <A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&lt;BR&gt;&amp;gt; &amp;gt;Subject: [Mono-list] Sharing Web.config among webapps/services&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;Hello,&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;Is it posible to set up xsp/mod_mono so they can share the same&lt;BR&gt;&amp;gt; Web.config&lt;BR&gt;&amp;gt; &amp;gt;file? So far I have been able to make this happen but it
 requires&lt;BR&gt;&amp;gt; that I&lt;BR&gt;&amp;gt; &amp;gt;move all the codebehind binaries to the main directory.&lt;BR&gt;&amp;gt; &amp;gt;For example I tried:&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;|&lt;BR&gt;&amp;gt; &amp;gt;+-MainDir&lt;BR&gt;&amp;gt; &amp;gt; |&lt;BR&gt;&amp;gt; &amp;gt; + - Web.config (to be shared by WebApp1 and WebApp2)&lt;BR&gt;&amp;gt; &amp;gt; |&lt;BR&gt;&amp;gt; &amp;gt; +- WebApp1&lt;BR&gt;&amp;gt; &amp;gt; | |&lt;BR&gt;&amp;gt; &amp;gt; | +- WebApp1.asmx&lt;BR&gt;&amp;gt; &amp;gt; | |&lt;BR&gt;&amp;gt; &amp;gt; | +- bin&lt;BR&gt;&amp;gt; &amp;gt; | |&lt;BR&gt;&amp;gt; &amp;gt; | +- WebApp1.dll&lt;BR&gt;&amp;gt; &amp;gt; |&lt;BR&gt;&amp;gt; &amp;gt; +- WebApp2&lt;BR&gt;&amp;gt; &amp;gt; |&lt;BR&gt;&amp;gt; &amp;gt; +- WebApp2.asmx&lt;BR&gt;&amp;gt; &amp;gt; |&lt;BR&gt;&amp;gt; &amp;gt; +- bin&lt;BR&gt;&amp;gt; &amp;gt; |&lt;BR&gt;&amp;gt; &amp;gt; + WebApp2.dll&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;With this configuration if I point my xsp to MainDir I get the&lt;BR&gt;&amp;gt; following:&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;Server error in '/' application&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;Type WebApp.WebApp1 not found.&lt;BR&gt;&amp;gt; &amp;gt;Description: Error processing request.&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;Error Message: HTTP 500. Type WebApp.WebApp1 not found.&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;Starting two xsps at /We
 bApp1
 and /WebApp2 deals with the error&lt;BR&gt;&amp;gt; but I do not&lt;BR&gt;&amp;gt; &amp;gt;get the common settings in Web.config. It also works if I move&lt;BR&gt;&amp;gt; WebApp1.dll&lt;BR&gt;&amp;gt; &amp;gt;and WebApp2.dll to a /bin directory under MainDir but I was&lt;BR&gt;&amp;gt; hoping I could&lt;BR&gt;&amp;gt; &amp;gt;keep the structure like the example above.&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;Is this possible?&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;Thanks.&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;_______________________________________________&lt;BR&gt;&amp;gt; &amp;gt;Mono-list maillist - <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>&lt;BR&gt;&amp;gt; &amp;gt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list<BR">http://lists.ximian.com/mailman/listinfo/mono-list&lt;BR</A>&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt; &amp;gt;&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt; -- &lt;BR&gt;&amp;gt; Mariano Alarcón&lt;BR&gt;&amp;gt; ITC Soluciones&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt; _______________________________________________&lt;BR&gt;&amp;gt; Mono-list maillist - <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>&lt;BR&gt;&amp;gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list<BR">http://lists.ximian.com/mailman/listinfo/mono-list&lt;BR</A>&gt;&amp;gt;&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt; <A HREF="mailto:joe_audette@yahoo.com">joe_audette@yahoo.com</A>&lt;BR&gt;&amp;gt; <A HREF="http://www.joeaudette.com<BR">http://www.joeaudette.com&lt;BR</A>&gt;&amp;g
 t;
 <A HREF="http://www.mojoportal.com">http://www.mojoportal.com</A> &lt;BR&gt;&lt;BR&gt;&lt;BR&gt;-- &lt;BR&gt;Mariano Alarcón&lt;BR&gt;ITC Soluciones&lt;BR&gt;&lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;BR&gt;&lt;BR&gt;<A HREF="mailto:joe_audette@yahoo.com">joe_audette@yahoo.com</A>&lt;br&gt;<A HREF="http://www.joeaudette.com<br">http://www.joeaudette.com&lt;br</A>&gt;<A HREF="http://www.mojoportal.com">http://www.mojoportal.com</A>
--0-1500469038-1099582065=:32190--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="024256.html">[Mono-list] Sharing Web.config among webapps/services
</A></li>
	<LI> Next message: <A HREF="024260.html">[Mono-list] Sharing Web.config among webapps/services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24259">[ date ]</a>
              <a href="thread.html#24259">[ thread ]</a>
              <a href="subject.html#24259">[ subject ]</a>
              <a href="author.html#24259">[ author ]</a>
         </LI>
       </UL>
</body></html>
