<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] MySql.Data and UTF-8?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rykr%40comcast.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="024204.html">
   <LINK REL="Next"  HREF="024241.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] MySql.Data and UTF-8?
   </H1>
    <B>Reggie Burnett
    </B> 
    <A HREF="mailto:rykr%40comcast.net"
       TITLE="[Mono-list] MySql.Data and UTF-8?">rykr@comcast.net
       </A><BR>
    <I>Wed, 03 Nov 2004 10:33:00 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="024204.html">[Mono-list] MySql.Data and UTF-8?
</A></li>
        <LI> Next message: <A HREF="024241.html">[Mono-list] MySql.Data and UTF-8?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24240">[ date ]</a>
              <a href="thread.html#24240">[ thread ]</a>
              <a href="subject.html#24240">[ subject ]</a>
              <a href="author.html#24240">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Keith

I will be adding connection string options to select a character set.  
Currently, however, what happens is that the driver at startup does a 
SET NAMES utf8; SET CHARACTER_SET_RESULS=NULL.  What this means is that 
the server expects all queries to come from the driver as utf8 and, in 
fact, the driver internally sends all queries as utf8.  However, 
resultsets comeback in the character set of the table queried.  So, if 
your server's default character set is latin1, then the textual fields 
from your tables may use latin1 as their character set.  If so, the 
driver will try to create the latin1 encoding to receive those bytes 
from the server.  The problem is that Mono apparently does not currently 
support the GetEncoding(&quot;latin1&quot;) method.

-reggie

Keith Dreibelbis wrote:

&gt;<i>Hello mono-list,
</I>&gt;<i>
</I>&gt;<i>I am trying out MySql Connector .NET 1.0.1 (beta 2), after using ByteFX
</I>&gt;<i>0.76 for a while.  The mysql database I am trying to talk to runs 4.1.3,
</I>&gt;<i>and uses utf-8 encoding.
</I>&gt;<i>
</I>&gt;<i>I have a unit test which connects, runs some simple queries and closes.
</I>&gt;<i>On Windows, it succeeds fine.  On Mono, it fails in this way:
</I>&gt;<i>
</I>&gt;<i>System.NotSupportedException : Encoding name `latin1' not supported
</I>&gt;<i>in &lt;0x000e4&gt; MySql.Data.MySqlClient.MySqlConnection:Open ()
</I>&gt;<i>in &lt;0x0004a&gt; (wrapper remoting-invoke-with-check)
</I>&gt;<i>MySql.Data.MySqlClient.MySqlConnection:Open ()
</I>&gt;<i>
</I>&gt;<i>That exception seems to be thrown from the end of
</I>&gt;<i>System.Text.Encoding.GetEncoding().  So, I guess the connector Driver is
</I>&gt;<i>asking for &quot;latin1&quot; by default.  I really want to tell it to use &quot;utf8&quot;
</I>&gt;<i>instead; does anyone know how to do this?
</I>&gt;<i>
</I>&gt;<i>I suspected that the connectionstring was the place to do this, but the
</I>&gt;<i>help lists no way to set the encoding.  Please let me know if you have any
</I>&gt;<i>ideas.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>-kd
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="024204.html">[Mono-list] MySql.Data and UTF-8?
</A></li>
	<LI> Next message: <A HREF="024241.html">[Mono-list] MySql.Data and UTF-8?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24240">[ date ]</a>
              <a href="thread.html#24240">[ thread ]</a>
              <a href="subject.html#24240">[ subject ]</a>
              <a href="author.html#24240">[ author ]</a>
         </LI>
       </UL>
</body></html>
