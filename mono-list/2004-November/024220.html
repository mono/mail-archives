<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Accessing secure site: x509 + basic authentication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:spouliot%40videotron.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024211.html">
   <LINK REL="Next"  HREF="024221.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Accessing secure site: x509 + basic authentication
   </H1>
    <B>Sebastien Pouliot
    </B> 
    <A HREF="mailto:spouliot%40videotron.ca"
       TITLE="[Mono-list] Accessing secure site: x509 + basic authentication">spouliot@videotron.ca
       </A><BR>
    <I>Tue, 02 Nov 2004 07:51:33 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="024211.html">[Mono-list] Accessing secure site: x509 + basic authentication
</A></li>
        <LI> Next message: <A HREF="024221.html">[Mono-list] Accessing secure site: x509 + basic authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24220">[ date ]</a>
              <a href="thread.html#24220">[ thread ]</a>
              <a href="subject.html#24220">[ subject ]</a>
              <a href="author.html#24220">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Oliver,

Some comments below. Please fill a bug report into bugzilla.ximian.com.

&gt;<i> I'm attempting to access a secured site using Mono, the site uses
</I>&gt;<i> certification (https) and basic authentication.
</I>
Are you using client-side certificates ? or only server-side ?
If you're using client-side (like your code seems to) then why do you need a
username/password ?

&gt;<i> When running my code I'm given the result:
</I>&gt;<i>
</I>&gt;<i> Error getting response stream: ReceiveFailure
</I>
You probably get a stack trace with an exception ?
Could you add this in your bug report.

&gt;<i> After various attempts I decided to test the same code on SharpDevelop
</I>&gt;<i> with the MS Framework v1.1, this compiled fine and works (ie I get the
</I>&gt;<i> correct response from the server).  This suggests to me that the code is
</I>&gt;<i> fine however it's a bug relating to Mono?? Or am I deluding myself :S
</I>&gt;<i>
</I>&gt;<i> The code doesn't get as far as 'Console.WriteLine(&quot;Got Response&quot;);'
</I>&gt;<i>
</I>&gt;<i> Any advice appreciated!
</I>&gt;<i>
</I>&gt;<i> &lt;&lt; Code Snippet &gt;&gt;
</I>&gt;<i>
</I>&gt;<i> // Service Point
</I>&gt;<i> ServicePointManager.CertificatePolicy = new MyPolicy();
</I>&gt;<i>
</I>&gt;<i> HttpWebRequest webRequest = (HttpWebRequest)
</I>&gt;<i> HttpWebRequest.Create(&quot;<A HREF="https://www.securesite.com/login"">https://www.securesite.com/login&quot;</A>);
</I>&gt;<i>
</I>&gt;<i> // Crendential Cache
</I>&gt;<i> credentialcache.Add(new Uri(&quot;<A HREF="https://www.securesite.com/login"">https://www.securesite.com/login&quot;</A>), &quot;Basic&quot;,
</I>&gt;<i> new System.Net.NetworkCredential(&quot;user&quot;, &quot;password&quot;));
</I>&gt;<i>
</I>&gt;<i> webRequest.Credentials = crendentialcache;
</I>&gt;<i>
</I>&gt;<i> 			X509Certificate x509 =
</I>&gt;<i> X509Certificate.CreateFromCertFile(&quot;/cert/mycert.cer&quot;);
</I>&gt;<i> 			webRequest.ClientCertificates.Add(x509);
</I>
You only have to supply a certificate for client-side SSL authentication.
If this is the case then the code is incomplete for Mono - as Mono has no
way to &quot;detect&quot; the private key associated with the certificate.

&gt;<i> 			System.Net.HttpWebResponse response =
</I>&gt;<i> (HttpWebResponse)
</I>&gt;<i> webRequest.GetResponse();
</I>&gt;<i>
</I>&gt;<i> 			Console.WriteLine(&quot;Got GetResponse&quot;);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 			System.IO.StreamReader reader = new
</I>&gt;<i> StreamReader(response.GetResponseStream());
</I>&gt;<i>
</I>&gt;<i> 			string HTML = reader.ReadToEnd();
</I>&gt;<i>
</I>&gt;<i> 			Console.WriteLine(responseHTML);
</I>&gt;<i>
</I>&gt;<i> 			response.Close();
</I>&gt;<i>
</I>&gt;<i> 			reader.Close();
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="024211.html">[Mono-list] Accessing secure site: x509 + basic authentication
</A></li>
	<LI> Next message: <A HREF="024221.html">[Mono-list] Accessing secure site: x509 + basic authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24220">[ date ]</a>
              <a href="thread.html#24220">[ thread ]</a>
              <a href="subject.html#24220">[ subject ]</a>
              <a href="author.html#24220">[ author ]</a>
         </LI>
       </UL>
</body></html>
