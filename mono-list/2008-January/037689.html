<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono on PPC Linux quirk.  Any work around?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono%20on%20PPC%20Linux%20quirk.%20%20Any%20work%20around%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037687.html">
   <LINK REL="Next"  HREF="037691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono on PPC Linux quirk.  Any work around?</H1>
    <B>Sean Dague</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono%20on%20PPC%20Linux%20quirk.%20%20Any%20work%20around%3F&In-Reply-To="
       TITLE="[Mono-list] Mono on PPC Linux quirk.  Any work around?">sean at dague.net
       </A><BR>
    <I>Thu Jan 31 08:37:58 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="037687.html">[Mono-list] Support for .NET compact framework?
</A></li>
        <LI>Next message: <A HREF="037691.html">[Mono-list] Download links
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37689">[ date ]</a>
              <a href="thread.html#37689">[ thread ]</a>
              <a href="subject.html#37689">[ subject ]</a>
              <a href="author.html#37689">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm working through getting OpenSim running on PPC Linux (ppc 32bit,
mono 1.2.5.1, gentoo linux), which is very close to working.  However,
there is currently at least one more issue to overcome, which seems to
be that structures are initialized differently on PPC than on x86.

At some point there is a binding layer through libsecondlife to
OpenJPEG.  It uses this structure:

        [StructLayout(LayoutKind.Sequential, Pack = 4)]
        private struct MarshalledImage
        {
            public IntPtr encoded;             // encoded image data
            public int length;                 // encoded image length
            public int dummy; // padding for 64-bit alignment

            public IntPtr decoded;             // decoded image, contiguous components
            public int width;                  // width of decoded image
            public int height;                 // height of decoded image
            public int components;             // component count
        }

On x86 the decoded IntPtr is initialized to a value when a new
MarshalledImage is created.  On PPC (32bit) it is equal to IntPtr.Zero,
which blows up a Marshal.Copy call later.

Any ideas here on:
 * What is going on?
 * What possible fixes are?

Thanks in advance,

       -Sean

-- 
__________________________________________________________________

Sean Dague                                       Mid-Hudson Valley
sean at dague dot net                            Linux Users Group
<A HREF="http://dague.net">http://dague.net</A>                                 <A HREF="http://mhvlug.org">http://mhvlug.org</A>

There is no silver bullet.  Plus, werewolves make better neighbors
than zombies, and they tend to keep the vampire population down.
__________________________________________________________________
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20080131/d79bdf67/attachment.bin">http://lists.ximian.com/pipermail/mono-list/attachments/20080131/d79bdf67/attachment.bin</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037687.html">[Mono-list] Support for .NET compact framework?
</A></li>
	<LI>Next message: <A HREF="037691.html">[Mono-list] Download links
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37689">[ date ]</a>
              <a href="thread.html#37689">[ thread ]</a>
              <a href="subject.html#37689">[ subject ]</a>
              <a href="author.html#37689">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
