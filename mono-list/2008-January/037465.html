<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Send cookies in HttpWebRequest's
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Send%20cookies%20in%20HttpWebRequest%27s&In-Reply-To=f5f1bb710801041553k3d6a35beu4d7af16d206525c1%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037464.html">
   <LINK REL="Next"  HREF="037466.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Send cookies in HttpWebRequest's</H1>
    <B>Chris Howie</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Send%20cookies%20in%20HttpWebRequest%27s&In-Reply-To=f5f1bb710801041553k3d6a35beu4d7af16d206525c1%40mail.gmail.com"
       TITLE="[Mono-list] Send cookies in HttpWebRequest's">cdhowie at gmail.com
       </A><BR>
    <I>Fri Jan  4 19:15:21 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="037464.html">[Mono-list] Send cookies in HttpWebRequest's
</A></li>
        <LI>Next message: <A HREF="037466.html">[Mono-list] Send cookies in HttpWebRequest's
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37465">[ date ]</a>
              <a href="thread.html#37465">[ thread ]</a>
              <a href="subject.html#37465">[ subject ]</a>
              <a href="author.html#37465">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just tried your test case (substituting my own test server in) and
Wireshark did see a cookie get sent.

Are you sure that the path and domain parameters on the cookie match the URL
you are testing against?  Mono will not send the cookie otherwise.

On Jan 4, 2008 6:53 PM, S&#248;ren Juul &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">zpon.dk at gmail.com</A>&gt; wrote:

&gt;<i> As far as i can see in wireshark it is not there, and when I look in
</I>&gt;<i> webRequest.Hostes I cannot see it neither
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2008/1/5, Chris Howie &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">cdhowie at gmail.com</A> &gt;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can you use Wireshark or another packet sniffer to verify that the
</I>&gt;<i> &gt; cookie is in fact not being sent?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Jan 4, 2008 6:37 PM, S&#248;ren Juul &lt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">zpon.dk at gmail.com</A> &gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; I'm sorry i forgot that line in my the sample code in my first line,
</I>&gt;<i> &gt; &gt; but in my real code I got it as it should be, something like this:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; using System;
</I>&gt;<i> &gt; &gt; using System.Net;
</I>&gt;<i> &gt; &gt; using System.IO;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; public class Test
</I>&gt;<i> &gt; &gt; {
</I>&gt;<i> &gt; &gt;     public static void Main (string[] args)
</I>&gt;<i> &gt; &gt;     {
</I>&gt;<i> &gt; &gt;         HttpWebRequest webRequest =
</I>&gt;<i> &gt; &gt; (HttpWebRequest)WebRequest.Create(&quot; <A HREF="http://example.com&quot;">http://example.com&quot;</A>);
</I>&gt;<i> &gt; &gt;         CookieContainer CookieJar = new CookieContainer();
</I>&gt;<i> &gt; &gt;         CookieJar.Add(new Cookie(&quot;name&quot;, &quot;value&quot;, &quot;/path&quot;,
</I>&gt;<i> &gt; &gt; &quot;.example.com&quot;));
</I>&gt;<i> &gt; &gt;         webRequest.CookieContainer = CookieJar;
</I>&gt;<i> &gt; &gt;         HttpWebResponse webResponse =
</I>&gt;<i> &gt; &gt; (HttpWebResponse)webRequest.GetResponse();
</I>&gt;<i> &gt; &gt;     }
</I>&gt;<i> &gt; &gt; }
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; 2008/1/5, Chris Howie &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">cdhowie at gmail.com</A>&gt;:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;  On Jan 4, 2008 6:19 PM, S&#248;ren Juul &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">zpon.dk at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Shouldn't i be able to send a cookie in a HttpWebRequest by adding
</I>&gt;<i> &gt; &gt; &gt; &gt; a CookieContainer to the request?
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Something like this:
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; HttpWebRequest webRequest =
</I>&gt;<i> &gt; &gt; &gt; &gt; (HttpWebRequest)WebRequest.Create(url);
</I>&gt;<i> &gt; &gt; &gt; &gt; CookieContainer CookieJar = new CookieContainer();
</I>&gt;<i> &gt; &gt; &gt; &gt; CookieJar.Add(new Cookie(&quot;name&quot;, &quot;value&quot;, &quot;/path&quot;,
</I>&gt;<i> &gt; &gt; &gt; &gt; &quot;.domain.com&quot;));
</I>&gt;<i> &gt; &gt; &gt; &gt; HttpWebResponse webResponse =
</I>&gt;<i> &gt; &gt; &gt; &gt; (HttpWebResponse)webRequest.GetResponse();
</I>&gt;<i> &gt; &gt; &gt; &gt; (...)
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Yes you should, and in fact you can, but somewhere in there you need
</I>&gt;<i> &gt; &gt; &gt; to do:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; webRequest.CookieContainer = CookieJar;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; C# may be magical but it's not *that* magical.  :)
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; --
</I>&gt;<i> &gt; &gt; &gt; Chris Howie
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://www.chrishowie.com">http://www.chrishowie.com</A>
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://en.wikipedia.org/wiki/User:Crazycomputers">http://en.wikipedia.org/wiki/User:Crazycomputers</A>
</I>&gt;<i> &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; --
</I>&gt;<i> &gt; &gt; Med venlig hilsen / Kind Regards
</I>&gt;<i> &gt; &gt; S&#248;ren Juul
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Chris Howie
</I>&gt;<i> &gt; <A HREF="http://www.chrishowie.com">http://www.chrishowie.com</A>
</I>&gt;<i> &gt; <A HREF="http://en.wikipedia.org/wiki/User:Crazycomputers">http://en.wikipedia.org/wiki/User:Crazycomputers</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Med venlig hilsen / Kind Regards
</I>&gt;<i> S&#248;ren Juul
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Chris Howie
<A HREF="http://www.chrishowie.com">http://www.chrishowie.com</A>
<A HREF="http://en.wikipedia.org/wiki/User:Crazycomputers">http://en.wikipedia.org/wiki/User:Crazycomputers</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20080104/a5787e51/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20080104/a5787e51/attachment.html</A> 
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037464.html">[Mono-list] Send cookies in HttpWebRequest's
</A></li>
	<LI>Next message: <A HREF="037466.html">[Mono-list] Send cookies in HttpWebRequest's
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37465">[ date ]</a>
              <a href="thread.html#37465">[ thread ]</a>
              <a href="subject.html#37465">[ subject ]</a>
              <a href="author.html#37465">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
