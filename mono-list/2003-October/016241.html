<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] ASP.NET + ByteFX.Data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:dlamotta%40email.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="016333.html">
   <LINK REL="Next"  HREF="016242.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] ASP.NET + ByteFX.Data
   </H1>
    <B>David La Motta
    </B> 
    <A HREF="mailto:dlamotta%40email.com"
       TITLE="[Mono-list] ASP.NET + ByteFX.Data">dlamotta@email.com
       </A><BR>
    <I>Thu, 09 Oct 2003 23:05:04 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="016333.html">[Mono-list] Script Locations of WebUIValidation.js, SmartNav.js
</A></li>
        <LI> Next message: <A HREF="016242.html">[Mono-list] ASP.NET + ByteFX.Data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16241">[ date ]</a>
              <a href="thread.html#16241">[ thread ]</a>
              <a href="subject.html#16241">[ subject ]</a>
              <a href="author.html#16241">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.
--------------080907030808040309070604
Content-Type: multipart/alternative;
 boundary=&quot;------------010703070601080305020406&quot;


--------------010703070601080305020406
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hello all.

I am running xsp 0.6 and I am trying to do some simple playing around to 
see if I can get some data out of MySql.  I downloaded the latest 
ByteFX.Data assembly and was able to run a very simple query from the 
command line--joy!  I then proceeded to modify the dbpage1.aspx example 
provided with mod_mono and replaced the PostgreSql directives with MySql 
ones.  I seemed to get around syntactical mistakes but now the server 
responds with the following.  I am attaching the .aspx file in case any 
of you is feeling good enough to take a look  :-)  I added the 
ByteFX.Data.dll and SharpZipLib.dll to my /usr/lib directory and 
restarted the xsp server.  Not sure what to try next. 

Thanks for any help!

// David

*Description: *Error processing request.

*Error Message: *

*Stack Trace: * ||

System.IO.FileNotFoundException: File 'ByteFX.Data.MySqlClient' not found.
in (unmanaged) /usr/lib/libmono.so.0(mono_raise_exception+0x20) [0x400a98e9]
in (unmanaged) /usr/lib/libmono.so.0 [0x400cb5c7]
in &lt;0x0006c&gt; (wrapper remoting-invoke-with-check) System.AppDomain:LoadAssembly (System.Reflection.AssemblyName,System.Security.Policy.Evidence)
in &lt;0x00044&gt; System.AppDomain:Load (System.Reflection.AssemblyName,System.Security.Policy.Evidence)
in &lt;0x0006b&gt; (wrapper remoting-invoke-with-check) System.AppDomain:Load (System.Reflection.AssemblyName,System.Security.Policy.Evidence)
in &lt;0x00074&gt; System.AppDomain:Load (string)
in &lt;0x00058&gt; (wrapper remoting-invoke-with-check) System.AppDomain:Load (string)
in &lt;0x0001c&gt; System.Reflection.Assembly:Load (string)
in &lt;0x00045&gt; ASP.mysql_aspx:Page_Init (object,System.EventArgs)
in &lt;0x0005a&gt; (wrapper delegate-invoke) System.MulticastDelegate:invoke_void_object_EventArgs (object,System.EventArgs)
in &lt;0x00090&gt; System.Web.UI.Control:OnInit (System.EventArgs)
in &lt;0x0020d&gt; System.Web.UI.Control:InitRecursive (System.Web.UI.Control)
in &lt;0x00047&gt; System.Web.UI.Page:ProcessRequest (System.Web.HttpContext)
in &lt;0x00191&gt; .ExecuteHandlerState:Execute ()
in &lt;0x0004e&gt; .StateMachine:ExecuteState (System.Web.HttpApplication/IStateHandler,bool&amp;)



--------------010703070601080305020406
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=ISO-8859-1&quot;&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body text=&quot;#000000&quot; bgcolor=&quot;#ffffff&quot;&gt;
Hello all.&lt;br&gt;
&lt;br&gt;
I am running xsp 0.6 and I am trying to do some simple playing around
to see if I can get some data out of MySql.&amp;nbsp; I downloaded the latest
ByteFX.Data assembly and was able to run a very simple query from the
command line--joy!&amp;nbsp; I then proceeded to modify the dbpage1.aspx example
provided with mod_mono and replaced the PostgreSql directives with
MySql ones.&amp;nbsp; I seemed to get around syntactical mistakes but now the
server responds with the following.&amp;nbsp; I am attaching the .aspx file in
case any of you is feeling good enough to take a look&amp;nbsp; :-)&amp;nbsp; I added the
ByteFX.Data.dll and SharpZipLib.dll to my /usr/lib directory and
restarted the xsp server.&amp;nbsp; Not sure what to try next.&amp;nbsp; &lt;br&gt;
&lt;br&gt;
Thanks for any help!&lt;br&gt;
&lt;br&gt;
// David&lt;br&gt;
&lt;br&gt;
&lt;b&gt;Description: &lt;/b&gt;Error processing request.
&lt;p&gt;&lt;b&gt;Error Message: &lt;/b&gt;
&lt;/p&gt;
&lt;b&gt;Stack Trace: &lt;/b&gt;
&lt;code&gt;&lt;/code&gt;
&lt;pre&gt;System.IO.FileNotFoundException: File 'ByteFX.Data.MySqlClient' not found.
in (unmanaged) /usr/lib/libmono.so.0(mono_raise_exception+0x20) [0x400a98e9]
in (unmanaged) /usr/lib/libmono.so.0 [0x400cb5c7]
in &amp;lt;0x0006c&amp;gt; (wrapper remoting-invoke-with-check) System.AppDomain:LoadAssembly (System.Reflection.AssemblyName,System.Security.Policy.Evidence)
in &amp;lt;0x00044&amp;gt; System.AppDomain:Load (System.Reflection.AssemblyName,System.Security.Policy.Evidence)
in &amp;lt;0x0006b&amp;gt; (wrapper remoting-invoke-with-check) System.AppDomain:Load (System.Reflection.AssemblyName,System.Security.Policy.Evidence)
in &amp;lt;0x00074&amp;gt; System.AppDomain:Load (string)
in &amp;lt;0x00058&amp;gt; (wrapper remoting-invoke-with-check) System.AppDomain:Load (string)
in &amp;lt;0x0001c&amp;gt; System.Reflection.Assembly:Load (string)
in &amp;lt;0x00045&amp;gt; ASP.mysql_aspx:Page_Init (object,System.EventArgs)
in &amp;lt;0x0005a&amp;gt; (wrapper delegate-invoke) System.MulticastDelegate:invoke_void_object_EventArgs (object,System.EventArgs)
in &amp;lt;0x00090&amp;gt; System.Web.UI.Control:OnInit (System.EventArgs)
in &amp;lt;0x0020d&amp;gt; System.Web.UI.Control:InitRecursive (System.Web.UI.Control)
in &amp;lt;0x00047&amp;gt; System.Web.UI.Page:ProcessRequest (System.Web.HttpContext)
in &amp;lt;0x00191&amp;gt; .ExecuteHandlerState:Execute ()
in &amp;lt;0x0004e&amp;gt; .StateMachine:ExecuteState (System.Web.HttpApplication/IStateHandler,bool&amp;amp;)
&lt;/pre&gt;
&lt;br&gt;
&lt;/body&gt;
&lt;/html&gt;

--------------010703070601080305020406--

--------------080907030808040309070604
Content-Type: text/plain;
 name=&quot;mysql.aspx&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;mysql.aspx&quot;

&lt;%@ language=&quot;C#&quot; %&gt;
&lt;%@ import namespace=&quot;System.Configuration&quot; %&gt;
&lt;%@ import namespace=&quot;System.Data&quot; %&gt;
&lt;%@ import namespace=&quot;System.Reflection&quot; %&gt;

&lt;html&gt;
&lt;script runat=server&gt;

	static Type cncType = null;

	void ShowError (Exception exc)
	{
		noDBLine.InnerHtml += &quot;&lt;p&gt;&lt;b&gt;The error was:&lt;/b&gt;\n&lt;pre&gt; &quot; + exc + &quot;&lt;/pre&gt;&lt;p&gt;&quot;;
		theForm.Visible = false;
	}

	IDbConnection connection;
	void Page_Init (object sender, EventArgs e)
	{
        string providerAssemblyName = &quot;ByteFX.Data.MySqlClient&quot;;
        string connectionTypeName = &quot;ByteFX.Data.MySqlClient.MySqlConnection&quot;;
		string connectionString = &quot;Server=127.0.0.1;User ID=mono;Password=;Database=test&quot;;

        Assembly dbAssembly = Assembly.Load (providerAssemblyName);
		cncType = dbAssembly.GetType (connectionTypeName, true);

		if (!typeof (IDbConnection).IsAssignableFrom (cncType))
		 	 throw new ApplicationException (&quot;The type '&quot; + cncType +
								&quot;' does not implement IDbConnection.\n&quot; +
								&quot;Check 'DbConnectionType' in server.exe.config.&quot;);

		connection = (IDbConnection) Activator.CreateInstance (cncType);
		connection.ConnectionString = connectionString;

        try {
            connection.Open();
        } catch (Exception exception) {
			ShowError (exception);
			connection = null;
        }       	  
	}

	void Page_Load (object sender, EventArgs e)
	{
		if (!IsPostBack){
			FirstNameFilter.Text = &quot;%&quot;;
			LastNameFilter.Text = &quot;%&quot;;
			UpdateTable (FirstNameFilter.Text, LastNameFilter.Text);
		}
	}

	void Filter_Changed (object sender, EventArgs e)
	{
		UpdateTable (FirstNameFilter.Text, LastNameFilter.Text);
	}

	void UpdateTable (string firstName, string lastName)
	{
		if (connection == null)
			return;

		IDbCommand selectCommand = connection.CreateCommand();

        string sql = &quot;SELECT firstname, lastname FROM employees&quot;;
		selectCommand.CommandText = sql;

		IDataReader reader;

		try {
			reader = selectCommand.ExecuteReader ();
			while (reader.Read ()) {
				TableRow row = new TableRow ();
				for (int i = 0; i &lt; reader.FieldCount; i++) {
					TableCell cell = new TableCell ();
					cell.Controls.Add (new LiteralControl (reader.GetValue (i).ToString ()));
					row.Cells.Add (cell);
				}
				myTable.Rows.Add (row);
			}
		} catch (Exception exc) {
			ShowError (exc);
		}
	}

&lt;/script&gt;
&lt;head&gt;
&lt;title&gt;MySQL testing&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;span runat=&quot;server&quot; visible=&quot;false&quot; id=&quot;noDBLine&quot;&gt;
&lt;h3&gt;Database Error&lt;/h3&gt;
&lt;/span&gt;

&lt;form id=&quot;theForm&quot; runat=&quot;server&quot;&gt;
Choose the SQL filters and click 'Submit'.
&lt;asp:Label Text=&quot;First Name: &quot; /&gt;
&lt;asp:TextBox id=&quot;FirstNameFilter&quot; Text=&quot;&quot; TextMode=&quot;singleLine&quot; OnTextChanged=&quot;Filter_Changed&quot; runat=&quot;server&quot; maxlength=40 /&gt;
&lt;p&gt;
&lt;asp:Label Text=&quot;Last Name: &quot; /&gt;
&lt;asp:TextBox id=&quot;LastNameFilter&quot; Text=&quot;&quot; TextMode=&quot;singleLine&quot; OnTextChanged=&quot;Filter_Changed&quot; runat=&quot;server&quot; maxlength=40 /&gt;
&lt;p&gt;
&lt;asp:Button id=&quot;btn&quot; runat=&quot;server&quot; Text=&quot;Submit&quot; /&gt;
&lt;p&gt;
&lt;asp:Table id=&quot;myTable&quot; HorizontalAlign=&quot;Left&quot; Font-Size=&quot;12pt&quot; GridLines=&quot;both&quot; 
CellPadding=&quot;5&quot; runat=&quot;server&quot;/&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;


--------------080907030808040309070604--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="016333.html">[Mono-list] Script Locations of WebUIValidation.js, SmartNav.js
</A></li>
	<LI> Next message: <A HREF="016242.html">[Mono-list] ASP.NET + ByteFX.Data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16241">[ date ]</a>
              <a href="thread.html#16241">[ thread ]</a>
              <a href="subject.html#16241">[ subject ]</a>
              <a href="author.html#16241">[ author ]</a>
         </LI>
       </UL>
</body></html>
