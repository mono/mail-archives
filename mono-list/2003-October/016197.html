<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] ExpressionElement.cs patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:marco.canini%40fastwebnet.it">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="016164.html">
   <LINK REL="Next"  HREF="016165.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] ExpressionElement.cs patch
   </H1>
    <B>Marco Canini
    </B> 
    <A HREF="mailto:marco.canini%40fastwebnet.it"
       TITLE="[Mono-list] ExpressionElement.cs patch">marco.canini@fastwebnet.it
       </A><BR>
    <I>Wed, 08 Oct 2003 19:27:32 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="016164.html">[Mono-list] ExpressionElement.cs patch
</A></li>
        <LI> Next message: <A HREF="016165.html">[Mono-list] [Npgsql] SSL support commited in cvs.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16197">[ date ]</a>
              <a href="thread.html#16197">[ thread ]</a>
              <a href="subject.html#16197">[ subject ]</a>
              <a href="author.html#16197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-I1nlH43OeLy5C4PfKo7g
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

On Tue, 2003-10-07 at 01:49, Marco Canini wrote:
&gt;<i> This patch solves a problem in ExpressionSingleElement class when using
</I>&gt;<i> integer number bigger than Int32.Max or floating point number.
</I>&gt;<i> I've also added the support for datetime.
</I>&gt;<i> I've tested it with my app and now i don't get an overflow exception.
</I>Ok, i forgot an 'else' in the second if, please use this patch.
-- 
Marco Canini &lt;<A HREF="mailto:marco.canini@fastwebnet.it">marco.canini@fastwebnet.it</A>&gt;

--=-I1nlH43OeLy5C4PfKo7g
Content-Disposition: attachment; filename=patchfile2
Content-Type: text/x-patch; name=patchfile2; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit

Index: ExpressionElement.cs
===================================================================
RCS file: /mono/mcs/class/System.Data/System.Data/ExpressionElement.cs,v
retrieving revision 1.4
diff -r1.4 ExpressionElement.cs
1648a1649,1652
&gt;<i> 			else if (s.StartsWith (&quot;#&quot;) &amp;&amp; s.EndsWith (&quot;#&quot;)) {
</I>&gt;<i> 				Element = DateTime.Parse (s.Substring (1, s.Length - 2));
</I>&gt;<i> 				_ResultType = typeof (DateTime);
</I>&gt;<i> 			}
</I>1654,1655c1658,1659
&lt; 				_ResultType = typeof (int);
&lt; 				Element = int.Parse (s);
---
&gt;<i> 				Element = Decimal.Parse (s);
</I>&gt;<i> 				_ResultType = typeof (Decimal);
</I>1771d1774
&lt; 			// If one of elements are string they both should be??? FIXME 
1772a1776
&gt;<i> 				// FIXME: If one of elements are string they both should be???				
</I>1785,1791c1789
&lt; 			}
&lt; 			else if (t1 != t2) {
&lt; 				
&lt; 				value2 = Convert.ChangeType (value2, Type.GetTypeCode (t1));
&lt; 			}
&lt; 
&lt; 			else if (t1 != t2) {
---
&gt;<i> 			} else if (t1 != t2) {
</I>
--=-I1nlH43OeLy5C4PfKo7g--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="016164.html">[Mono-list] ExpressionElement.cs patch
</A></li>
	<LI> Next message: <A HREF="016165.html">[Mono-list] [Npgsql] SSL support commited in cvs.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16197">[ date ]</a>
              <a href="thread.html#16197">[ thread ]</a>
              <a href="subject.html#16197">[ subject ]</a>
              <a href="author.html#16197">[ author ]</a>
         </LI>
       </UL>
</body></html>
