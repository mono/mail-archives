<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Extension method not found
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Extension%20method%20not%20found&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045710.html">
   <LINK REL="Next"  HREF="045713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Extension method not found</H1>
    <B>Dr_Asik</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Extension%20method%20not%20found&In-Reply-To="
       TITLE="[Mono-list] Extension method not found">blask_prawdi at yahoo.ca
       </A><BR>
    <I>Tue Aug 31 23:39:47 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="045710.html">[Mono-list] Installing monomac &amp; maccore
</A></li>
        <LI>Next message: <A HREF="045713.html">[Mono-list] Extension method not found
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45712">[ date ]</a>
              <a href="thread.html#45712">[ thread ]</a>
              <a href="subject.html#45712">[ subject ]</a>
              <a href="author.html#45712">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello,

I am having a weird problem with Mono. I have a solution made of 2 projects
A and B, targeting Mono/.NET 3.5. In project A, I have a class called
BinaryExtensions which define a bunch of extensions methods for
System.IO.BinaryReader and BinaryWriter. Both projects A and B use some of
these extensions methods; project B references project A for that reason.
For some reason, project B fails to find one of the extensions methods when
compiling.

The whole thing works perfectly fine under VS2010. Using Monodevelop 2.4
under Ubuntu 10.04 to compile my code, however, I get CS1061 (Type
'System.IO.BinayReader' does not contain a definition for funcX and no
extension method could be found). The thing is, the method in question is
used successfully by project A. Project B also successfully uses other
extensions methods from BinaryExtensions. But it fails to find one
particular function. Here is the code for that function:

        public static string ReadNullTerminatedASCIIString(this BinaryReader
binaryReader, int count) {
            var rawBytes = binaryReader.ReadBytes(count);
            rawBytes = rawBytes.TakeWhile(b =&gt; b != 0x00).ToArray();
            var chars = Encoding.ASCII.GetChars(rawBytes);
            return new string(chars);
        }

Again, this function is used by projectA and projectA compiles fine. Also,
other extension methods of that class are used by projectB and generate no
errors.

Also, when I use the assembly browser to check projectA, all extensions
methods decompile fine except for the method in question. I get:

&quot;Decompilation failed:

System.NotImplementedException: IL_0011: ldftn bool
AssetImporter.BinaryExtensions::m__0(System.Byte)
  at Cecil.Decompiler.Cil.BaseInstructionVisitor.OnLdftn
(Mono.Cecil.Cil.Instruction instruction) [0x00000] in :0 
  at Cecil.Decompiler.Cil.InstructionDispatcher.Dispatch
(Mono.Cecil.Cil.Instruction instruction, IInstructionVisitor visitor)
[0x00000] in :0 
  at Cecil.Decompiler.Cil.BaseInstructionVisitor.Visit
(Mono.Cecil.Cil.Instruction instruction) [0x00000] in :0 
  at Cecil.Decompiler.StatementDecompiler.ProcessExpressionBlock
(Cecil.Decompiler.Cil.InstructionBlock block, Boolean skip_first) [0x00000]
in :0 
  at Cecil.Decompiler.StatementDecompiler.ProcessExpressionBlock
(Cecil.Decompiler.Cil.InstructionBlock block) [0x00000] in :0 
  at Cecil.Decompiler.StatementDecompiler.PushConditionExpression
(Mono.Cecil.Cil.Instruction instruction) [0x00000] in :0 
  at Cecil.Decompiler.StatementDecompiler.TryProcessExpression
(Mono.Cecil.Cil.Instruction instruction) [0x00000] in :0 
  at Cecil.Decompiler.StatementDecompiler.ProcessInstruction
(Mono.Cecil.Cil.Instruction instruction) [0x00000] in :0 
  at Cecil.Decompiler.StatementDecompiler.ProcessInstructions
(Cecil.Decompiler.Cil.InstructionBlock block) [0x00000] in :0 
  at Cecil.Decompiler.StatementDecompiler.ProcessBlock
(Cecil.Decompiler.Cil.InstructionBlock block) [0x00000] in :0 
  at Cecil.Decompiler.StatementDecompiler.ProcessBlocks () [0x00000] in :0 
  at Cecil.Decompiler.StatementDecompiler.Run () [0x00000] in :0 
  at Cecil.Decompiler.StatementDecompiler.Process
(Cecil.Decompiler.DecompilationContext context,
Cecil.Decompiler.Ast.BlockStatement body) [0x00000] in :0 
  at Cecil.Decompiler.DecompilationPipeline.Run (Mono.Cecil.Cil.MethodBody
body) [0x00000] in :0 
  at Cecil.Decompiler.Extensions.RunPipeline
(Cecil.Decompiler.DecompilationPipeline pipeline, Mono.Cecil.Cil.MethodBody
body) [0x00000] in :0 
  at Cecil.Decompiler.Extensions.Decompile (Mono.Cecil.Cil.MethodBody body,
ILanguage language) [0x00000] in :0 
  at Cecil.Decompiler.Languages.CSharpWriter.Write
(Mono.Cecil.MethodDefinition method) [0x00000] in :0 
  at MonoDevelop.AssemblyBrowser.DomMethodNodeBuilder.Decompile
(MonoDevelop.Projects.Dom.DomCecilMethod method, Boolean markup) [0x00000]
in :0 

What's going on?
-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Extension-method-not-found-tp2402574p2402574.html">http://mono.1490590.n4.nabble.com/Extension-method-not-found-tp2402574p2402574.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045710.html">[Mono-list] Installing monomac &amp; maccore
</A></li>
	<LI>Next message: <A HREF="045713.html">[Mono-list] Extension method not found
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45712">[ date ]</a>
              <a href="thread.html#45712">[ thread ]</a>
              <a href="subject.html#45712">[ subject ]</a>
              <a href="author.html#45712">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
