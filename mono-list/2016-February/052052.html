<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] libmono-2-0.a in libmono-dev CentOS package?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20libmono-2-0.a%20in%20libmono-dev%20CentOS%20package%3F&In-Reply-To=%3CABB23FFE-3143-4893-9000-22F2A5B7F905%40asme.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052051.html">
   <LINK REL="Next"  HREF="052054.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] libmono-2-0.a in libmono-dev CentOS package?</H1>
    <B>David Curylo</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20libmono-2-0.a%20in%20libmono-dev%20CentOS%20package%3F&In-Reply-To=%3CABB23FFE-3143-4893-9000-22F2A5B7F905%40asme.org%3E"
       TITLE="[Mono-list] libmono-2-0.a in libmono-dev CentOS package?">curylod at asme.org
       </A><BR>
    <I>Sat Feb 20 00:00:02 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="052051.html">[Mono-list] libmono-2-0.a in libmono-dev CentOS package?
</A></li>
        <LI>Next message: <A HREF="052054.html">[Mono-list] libmono-2-0.a in libmono-dev CentOS package?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52052">[ date ]</a>
              <a href="thread.html#52052">[ thread ]</a>
              <a href="subject.html#52052">[ subject ]</a>
              <a href="author.html#52052">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I&#8217;m not sure if this is an option for you, but if you control the host for your containers, then supplying mono to your container via data volume works for me to keep the images small:

<A HREF="https://docs.docker.com/v1.8/userguide/dockervolumes/#adding-a-data-volume">https://docs.docker.com/v1.8/userguide/dockervolumes/#adding-a-data-volume</A> &lt;<A HREF="https://docs.docker.com/v1.8/userguide/dockervolumes/#adding-a-data-volume">https://docs.docker.com/v1.8/userguide/dockervolumes/#adding-a-data-volume</A>&gt;

To describe my setup a little more, I run Mesos, and each slave has a mono distribution in a directory that mounts to the location of the shared mono distribution.  I also have a directory that contains nuget packages on each slave which I also mount as a docker volume.  

With this configuration the Docker image really bootstraps itself by
1. Adding the docker volume containing mono to the PATH
2. Set LD_LIBRARY_PATH
3. Add nuget source
4. Install packages that contain .dll&#8217;s and .exe&#8217;s
5. Start the application itself.

The images are relatively small, at least they don&#8217;t contain copies of mono or my fairly large application, but they are entirely ephermal, and I can update packages without a need to rebuild and maintain many the images.

Some or all of course, is optional - you could put all your code on the image just as well.

&gt;<i> On Feb 19, 2016, at 11:45 AM, Eugene Kobrinsky &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">cue at integrate.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> In regards to Docker layers, I'm not an expert myself. At least from my understanding, Docker does use caching for each layer when you build a container but in effect it is still a separate instance when you run the resulting container.  It still seems to use all the space of each layer for that particular running container. So running the same container 10 times will still take up 10x of the space. 
</I>&gt;<i> 
</I>&gt;<i> We might just have to build our own packages... I was really hoping to avoid that. 
</I>&gt;<i> 
</I>&gt;<i> Going to try IRC and the package manager list next. 
</I>&gt;<i> 
</I>&gt;<i> Thanks for your responses Timotheus! 
</I>&gt;<i> 
</I>&gt;<i> Eugene
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list-bounces at lists.ximian.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list-bounces at lists.ximian.com</A>] On Behalf Of Timotheus Pokorra
</I>&gt;<i> Sent: Thursday, February 18, 2016 11:58 PM
</I>&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-list] libmono-2-0.a in libmono-dev CentOS package?
</I>&gt;<i> 
</I>&gt;<i> Hello Eugene,
</I>&gt;<i> 
</I>&gt;&gt;<i> Good question. We are using Docker to run a microservices architecture for our app. As such, we are dealing with a lot of docker containers, each running a very small mono app (service).
</I>&gt;<i> Sounds interesting!
</I>&gt;<i> 
</I>&gt;&gt;<i> Right now we have a full blown CentOS instance and mono runtime in each container, which bloats the container size to 160mb+. Our goal is to run a small container with minimal OS (options: BusyBox or Alpine <A HREF="https://github.com/gliderlabs/docker-alpine">https://github.com/gliderlabs/docker-alpine</A>) which would bring down our container size to 20mb-40mb.
</I>&gt;<i> I am not a docker expert, but I thought the layered system with AUFS avoids duplication of similar parts of containers? Or are the containers all running on different hosts?
</I>&gt;<i> 
</I>&gt;&gt;<i> Here is an example of a guy doing it, except he makes the static bundle on Debian <A HREF="http://www.onegeek.com.au/articles/a-nancy-net-microservice-running-on-docker-in-under-20mb.">http://www.onegeek.com.au/articles/a-nancy-net-microservice-running-on-docker-in-under-20mb.</A>
</I>&gt;<i> I suggest you build your own CentOS packages: comment the rm lines, and add the libmono-2.0.a files and others in the %files section.
</I>&gt;<i> 
</I>&gt;&gt;<i> Is the mono package mailing list more appropriate for this question? It seems like an oversite given there is a tool (mkbundle) that uses those static libraries.
</I>&gt;<i> I think not much is happening on the package mailing list:
</I>&gt;<i> <A HREF="http://lists.ximian.com/pipermail/mono-packagers-list/">http://lists.ximian.com/pipermail/mono-packagers-list/</A>
</I>&gt;<i> But it might be good to get a discussion going there again :)
</I>&gt;<i> 
</I>&gt;<i> Otherwise try the IRC: #mono on freenode
</I>&gt;<i> 
</I>&gt;<i> all the best,
</I>&gt;<i>  Timotheus
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20160219/e54b06d0/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20160219/e54b06d0/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052051.html">[Mono-list] libmono-2-0.a in libmono-dev CentOS package?
</A></li>
	<LI>Next message: <A HREF="052054.html">[Mono-list] libmono-2-0.a in libmono-dev CentOS package?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52052">[ date ]</a>
              <a href="thread.html#52052">[ thread ]</a>
              <a href="subject.html#52052">[ subject ]</a>
              <a href="author.html#52052">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
