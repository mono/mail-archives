<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Apache restarts required to avoid whitescreens
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Apache%20restarts%20required%20to%20avoid%20whitescreens&In-Reply-To=15541995.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037833.html">
   <LINK REL="Next"  HREF="037837.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Apache restarts required to avoid whitescreens</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Apache%20restarts%20required%20to%20avoid%20whitescreens&In-Reply-To=15541995.post%40talk.nabble.com"
       TITLE="[Mono-list] Apache restarts required to avoid whitescreens">robertj at gmx.net
       </A><BR>
    <I>Tue Feb 19 17:16:43 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="037833.html">[Mono-list] Apache restarts required to avoid whitescreens
</A></li>
        <LI>Next message: <A HREF="037837.html">[Mono-list] Apache restarts required to avoid whitescreens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37834">[ date ]</a>
              <a href="thread.html#37834">[ thread ]</a>
              <a href="subject.html#37834">[ subject ]</a>
              <a href="author.html#37834">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

dugaldcurtis wrote:
&gt;<i> However, I have to gracefully restart Apache between morning and lunch or
</I>&gt;<i> else (on busier days) lunchtime web pages start to just whitescreen (and
</I>&gt;<i> load after a minute or so).  Button presses which are supposed to action
</I>&gt;<i> database inserts appear to work but the inserts don't happen. With the
</I>&gt;<i> restart at 11.30 this never happens.  However, users get logged out and the
</I>&gt;<i> root of the problem isn't getting sorted.
</I>
You should make your application restartable first. Then you can
examine/log/trace your app w/out being under pressure.

Users are logged out because the view and session states are lost
when mono is going down. To prevent this, add the following settings
to web.config under &lt;system.web&gt;:

1. Preset validation keys for the view state:

&lt;machineKey 
validationKey=&quot;0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef&quot;
decryptionKey=&quot;0123456789abcdef0123456789abcdef0123456789abcdef&quot;
validation=&quot;SHA1&quot;
/&gt;

The keys must be randomly chosen, of course.

2.1 Setup persistent session state (ASP.NET 1.1)

You need this only if your application is using the &quot;Session&quot; object.

&lt;sessionState
   cookieless=&quot;false&quot;
   mode=&quot;SQLServer&quot;
   sqlConnectionString=&quot;database connection string&quot;
   timeout=&quot;20&quot;
/&gt;

sqlConnectionString must be a valid DB connection string.

The database must provide a table containing these fields (MySQL
DDL dialect):

CREATE TABLE `ASPStateTempSessions` (
   `SessionId`           char(32) NOT NULL,
   `AppPath`             char(128) NOT NULL,
   `Created`             datetime NOT NULL,
   `Expires`             datetime NOT NULL,
   `Timeout`             int NOT NULL,
   `StaticObjectsData`   mediumblob,
   `SessionData`         mediumblob,
   PRIMARY KEY  (`SessionId`)
);

Additionally to the &lt;sessionState&gt; settings, you have to setup
the session state module. This is Mono specific, as MS does not
support other providers than MS SQL:

&lt;appSettings&gt;
&lt;!-- tell SqlSessionStateModule which DB provider to use --&gt;
&lt;!-- Adjust the assembly name according to your
      MySQL Connector version! --&gt;

&lt;add key=&quot;StateDBProviderAssembly&quot; value=&quot;MySql.Data, 
Version=1.0.7.30073, Culture=neutral, PublicKeyToken=8e323390df8d9ed4&quot; /&gt;

&lt;!-- the connection type of the provider --&gt;
&lt;add key=&quot;StateDBConnectionType&quot; 
value=&quot;MySql.Data.MySqlClient.MySqlConnection&quot; /&gt;

&lt;!-- parameter placeholder/prefix (MySQL: &quot;?&quot;) --&gt;
&lt;add key=&quot;StateDBParamPrefix&quot; value=&quot;?&quot; /&gt;
&lt;/appSettings&gt;


2.2 Setup persistent session state (ASP.NET 2.0)

Unfortunately I don't know if the session state module
for Mono's ASP.NET 2.0 is complete/working. I'll have a look
at its state if nobody else will reply.


Robert

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037833.html">[Mono-list] Apache restarts required to avoid whitescreens
</A></li>
	<LI>Next message: <A HREF="037837.html">[Mono-list] Apache restarts required to avoid whitescreens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37834">[ date ]</a>
              <a href="thread.html#37834">[ thread ]</a>
              <a href="subject.html#37834">[ subject ]</a>
              <a href="author.html#37834">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
