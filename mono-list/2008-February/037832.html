<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mod_mono failing to start correctly, 1.2.6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20mod_mono%20failing%20to%20start%20correctly%2C%201.2.6&In-Reply-To=4774F31E.5040703%40roadrunner.uk.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037830.html">
   <LINK REL="Next"  HREF="037874.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mod_mono failing to start correctly, 1.2.6</H1>
    <B>Kevin Monceaux</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20mod_mono%20failing%20to%20start%20correctly%2C%201.2.6&In-Reply-To=4774F31E.5040703%40roadrunner.uk.com"
       TITLE="[Mono-list] mod_mono failing to start correctly, 1.2.6">Kevin at RawFedDogs.net
       </A><BR>
    <I>Tue Feb 19 13:59:19 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="037830.html">[Mono-list] Development in mono x86 and Deploy in x86_64. No	Problem ? Right?
</A></li>
        <LI>Next message: <A HREF="037874.html">[Mono-list] LDAP Lookup w/ Binary Data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37832">[ date ]</a>
              <a href="thread.html#37832">[ thread ]</a>
              <a href="subject.html#37832">[ subject ]</a>
              <a href="author.html#37832">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mono Fans,

On Fri, 28 Dec 2007, Ben Clewett wrote:

&gt;<i> This is from my apache error log on start:
</I>&gt;<i>
</I>&gt;<i> ** (/usr/lib/mono/1.0/mod-mono-server.exe:10744): WARNING **:
</I>&gt;<i> _wapi_thread_set_termination_details: error looking up thread handle (nil)
</I>&gt;<i> [notice] Apache/2.2.3 (Linux/SUSE) configured -- resuming normal operations
</I>&gt;<i> [error] Failed to connect to mod-mono-server after several attempts to
</I>&gt;<i> spawn the process.
</I>&gt;<i> [error] Failed to connect to mod-mono-server after several attempts to
</I>&gt;<i> spawn the process.
</I>&gt;<i> [error] Failed (etc)
</I>&gt;<i>
</I>&gt;<i> Do any members know if I can do something to try and avoid this problem?
</I>
I've just started experiencing similar errors under FreeBSD:

FreeBSD:  6.3-RELEASE
apache:   2.2.8
mono:     1.2.6_1
mod_mono: 1.2.6
xsp:      1.2.6_2

If I kill/restart apache and mono it works for a while then eventually 
fails and displays a &quot;Service Temporarily Unavailable&quot; message when trying 
to access the web site in question.  In my apache error log I'm seeing:

[Tue Feb 19 09:27:22 2008] [notice] Apache/2.2.8 (FreeBSD) mod_ssl/2.2.8 
OpenSSL
/0.9.7e-p1 DAV/2 PHP/5.2.5 with Suhosin-Patch mod_mono/1.2.6 configured -- 
resum
ing normal operations
Fatal error 'thr_resume_wrapper: thread has returned from _thread_switch' 
at lin
e 1128 in file /usr/src/lib/libpthread/thread/thr_kern.c (errno = 22)
Stacktrace:

   at (wrapper xdomain-dispatch) 
Mono.WebServer.ModMonoApplicationHost.ProcessReq
uest 
(object,byte[]&amp;,byte[]&amp;,int,string,string,string,string,string,int,string,i
nt,string,string[],string[]) &lt;0x00004&gt;
   at (wrapper xdomain-dispatch) 
Mono.WebServer.ModMonoApplicationHost.ProcessReq
uest 
(object,byte[]&amp;,byte[]&amp;,int,string,string,string,string,string,int,string,i
nt,string,string[],string[]) &lt;0xffffffff&gt;
   at (wrapper xdomain-invoke) 
Mono.WebServer.ModMonoApplicationHost.ProcessReque
st 
(int,string,string,string,string,string,int,string,int,string,string[],string
[]) &lt;0xffffffff&gt;
   at (wrapper remoting-invoke-with-check) 
Mono.WebServer.ModMonoApplicationHost.
ProcessRequest 
(int,string,string,string,string,string,int,string,int,string,str
ing[],string[]) &lt;0xffffffff&gt;
   at Mono.WebServer.ModMonoWorker.InnerRun (object) &lt;0x00422&gt;
   at Mono.WebServer.ModMonoWorker.Run (object) &lt;0x00017&gt;
   at (wrapper delegate-invoke) System.MulticastDelegate.invoke_void_object 
(obje
ct) &lt;0xffffffff&gt;
   at (wrapper runtime-invoke) 
System.Threading.WaitCallback.runtime_invoke_void_
object (object,intptr,intptr,intptr) &lt;0xffffffff&gt;
[Tue Feb 19 09:50:29 2008] [error] (70014)End of file found: read_data 
failed
[Tue Feb 19 09:50:29 2008] [error] Command stream corrupted, last command 
was 1
[Tue Feb 19 09:50:39 2008] [error] Failed to connect to mod-mono-server 
after se
veral attempts to spawn the process.
[Tue Feb 19 09:50:41 2008] [error] Failed to connect to mod-mono-server 
after several attempts to spawn the process.

With the Failed to connect to mod-mono-server messages repeating every 
couple of minutes until I restart it.  If anyone knows how to resolve this 
problem info would be greatly appreciated.



Kevin
<A HREF="http://www.RawFedDogs.net">http://www.RawFedDogs.net</A>
<A HREF="http://www.WacoAgilityGroup.org">http://www.WacoAgilityGroup.org</A>
Bruceville, TX

Si hoc legere scis nimium eruditionis habes.
Longum iter est per praecepta, breve et efficax per exempla!!!

</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037830.html">[Mono-list] Development in mono x86 and Deploy in x86_64. No	Problem ? Right?
</A></li>
	<LI>Next message: <A HREF="037874.html">[Mono-list] LDAP Lookup w/ Binary Data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37832">[ date ]</a>
              <a href="thread.html#37832">[ thread ]</a>
              <a href="subject.html#37832">[ subject ]</a>
              <a href="author.html#37832">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
