<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Detecting mono version
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Detecting%20mono%20version&In-Reply-To=001201c873bc%24ac3ace00%2404b06a00%24%40nl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037876.html">
   <LINK REL="Next"  HREF="037884.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Detecting mono version</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Detecting%20mono%20version&In-Reply-To=001201c873bc%24ac3ace00%2404b06a00%24%40nl"
       TITLE="[Mono-list] Detecting mono version">jonpryor at vt.edu
       </A><BR>
    <I>Sun Feb 24 08:34:14 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="037876.html">[Mono-list] Detecting mono version
</A></li>
        <LI>Next message: <A HREF="037884.html">[Mono-list] Detecting mono version
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37883">[ date ]</a>
              <a href="thread.html#37883">[ thread ]</a>
              <a href="subject.html#37883">[ subject ]</a>
              <a href="author.html#37883">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2008-02-20 at 13:32 +0100, Erik Renes wrote:
&gt;<i> Hi All, 
</I>&gt;<i> 
</I>&gt;<i> I am wondering if there is a way to detect the mono runtime version. 
</I>&gt;<i> I am trying to detect the version to be able to gracefully handle the known
</I>&gt;<i> issues in windows.forms implementation (my app has serious issues on 1.2.3,
</I>&gt;<i> but works fine on 1.2.4 upwards). 
</I>
Mono.Runtime.GetDisplayName() is commented as:

    // Should not be removed intended for external use
    // Safe to be called using reflection
    // Format is undefined only for use as a string for reporting

It should be safe to rely on this method, though not necessarily to rely
on the semantics/format of this method.

Mono.Runtime can't be public because it's in mscorlib.dll, and we need
to provide the same public API as .NET's mscorlib.dll (otherwise you
could compile against Mono and the resulting app wouldn't run on .NET).

&gt;<i> My current code (proof of concept): 
</I>&gt;<i>   Type t = Type.GetType(&quot;Mono.Runtime&quot;);
</I>&gt;<i>   MethodInfo mi = t.GetMethod(&quot;GetDisplayName&quot;, BindingFlags.NonPublic |
</I>&gt;<i> BindingFlags.Static );
</I>&gt;<i>   string s = (string)mi.Invoke(null, null);
</I>&gt;<i>   if (mi!= null)
</I>&gt;<i>     Console.WriteLine(s);
</I>
You should check that `t' is not null before using it, as it will be
null when running on .NET.  Otherwise, that looks correct.

 - Jon


</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037876.html">[Mono-list] Detecting mono version
</A></li>
	<LI>Next message: <A HREF="037884.html">[Mono-list] Detecting mono version
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37883">[ date ]</a>
              <a href="thread.html#37883">[ thread ]</a>
              <a href="subject.html#37883">[ subject ]</a>
              <a href="author.html#37883">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
