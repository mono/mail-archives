<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] BinaryFormatter, Deserialize(),	casting throws exception.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20BinaryFormatter%2C%20Deserialize%28%29%2C%0A%09casting%20throws%20exception.&In-Reply-To=ed1014%242o4%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032537.html">
   <LINK REL="Next"  HREF="032539.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] BinaryFormatter, Deserialize(),	casting throws exception.</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20BinaryFormatter%2C%20Deserialize%28%29%2C%0A%09casting%20throws%20exception.&In-Reply-To=ed1014%242o4%241%40sea.gmane.org"
       TITLE="[Mono-list] BinaryFormatter, Deserialize(),	casting throws exception.">atsushi at ximian.com
       </A><BR>
    <I>Tue Aug 29 05:26:24 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="032537.html">[Mono-list] BinaryFormatter, Deserialize(),	casting throws exception.
</A></li>
        <LI>Next message: <A HREF="032539.html">[Mono-list] BinaryFormatter, Deserialize(),	casting throws exception.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32538">[ date ]</a>
              <a href="thread.html#32538">[ thread ]</a>
              <a href="subject.html#32538">[ subject ]</a>
              <a href="author.html#32538">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm not expertized in remoting land so I'm not writing the solution,
but anyways ... this InvalidCastException is likely to happen in
remoting land and in that case it is also likely to happen that
those types are regarded as identical, while one is a transparent
proxy while the other is the original type.

Another thought I have is that the InvalidCastException might not
be happening against &quot;Mydata&quot; type but somewhere inside the
deserialization. What does the full stack trace tell you?

Atsushi Eno

Robert Jordan wrote:
&gt;<i> Wiktor Gr&#281;bla wrote:
</I>&gt;&gt;<i> Robert Jordan napisa&#322;(a):
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Because the deserialized data is not of type &quot;Mydata&quot;.
</I>&gt;&gt;&gt;<i> What's the output of
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Console.WriteLine (bf.Deserialize(fs).GetType ().FullName)
</I>&gt;&gt;&gt;<i>   
</I>&gt;&gt;<i> Mydata (unfortunately).
</I>&gt;<i> 
</I>&gt;<i> It could be another version of Mydata.
</I>&gt;<i> 
</I>&gt;<i> Try
</I>&gt;<i> 
</I>&gt;<i> Console.WriteLine (bf.Deserialize(fs).GetType ().Assembly.FullName)
</I>&gt;<i> 
</I>&gt;<i> and
</I>&gt;<i> 
</I>&gt;<i> Console.WriteLine (typeof (Mydata).Assembly.FullName)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> BTW, try to get a *full* stack trace using
</I>&gt;<i> 
</I>&gt;<i> try {
</I>&gt;<i> 	your code
</I>&gt;<i> } catch (Exception ex) {
</I>&gt;<i> 	Console.WriteLine (ex);
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> Robert
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032537.html">[Mono-list] BinaryFormatter, Deserialize(),	casting throws exception.
</A></li>
	<LI>Next message: <A HREF="032539.html">[Mono-list] BinaryFormatter, Deserialize(),	casting throws exception.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32538">[ date ]</a>
              <a href="thread.html#32538">[ thread ]</a>
              <a href="subject.html#32538">[ subject ]</a>
              <a href="author.html#32538">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
