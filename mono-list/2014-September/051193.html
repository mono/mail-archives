<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Running ASP.Net 4.5 MVC Application on Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Running%20ASP.Net%204.5%20MVC%20Application%20on%20Mono&In-Reply-To=%3CCAH07y4RNxZoXombFU63SHLVYRwM%2Bn65zzxTcPMbGZq6GMNGV0Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="051192.html">
   <LINK REL="Next"  HREF="051194.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Running ASP.Net 4.5 MVC Application on Mono</H1>
    <B>Martin Thwaites</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Running%20ASP.Net%204.5%20MVC%20Application%20on%20Mono&In-Reply-To=%3CCAH07y4RNxZoXombFU63SHLVYRwM%2Bn65zzxTcPMbGZq6GMNGV0Q%40mail.gmail.com%3E"
       TITLE="[Mono-list] Running ASP.Net 4.5 MVC Application on Mono">monoforum at my2cents.co.uk
       </A><BR>
    <I>Tue Sep 16 21:13:55 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="051192.html">[Mono-list] Running ASP.Net 4.5 MVC Application on Mono
</A></li>
        <LI>Next message: <A HREF="051194.html">[Mono-list] Running ASP.Net 4.5 MVC Application on Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51193">[ date ]</a>
              <a href="thread.html#51193">[ thread ]</a>
              <a href="subject.html#51193">[ subject ]</a>
              <a href="author.html#51193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That last error is misleading.  I think someone did look into fixing the
error message.  It basically masks the underlying error.  Check your logs,
you'll probably see the actual error.

In terms of the packages ending up in bin... From your description you
appear to missing how references work.  Deleting the nuget packages doesn't
stop things from being copied in.  It's how you define the reference in the
csproj file (by defining &quot;copy local&quot; as true).  Apologies if you knew
that, but your description wasn't clear.

Also, you shouldn't really be referencing the assemblies with a full path,
you should do it through the GAC.

There was a PR for the append trailing slash one, not sure where it ended
up though.

What I would say though is, what are you using that requires MVC 4? Could
you revert to MVC3? As that does work on mono.
On 16 Sep 2014 20:07, &quot;Fernando Rodriguez&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">frodriguez.developer at outlook.com</A>&gt;
wrote:

&gt;<i> Thanks for the replies.
</I>&gt;<i>
</I>&gt;<i> I did made some progress, that specific error is my xsp was quite old, I
</I>&gt;<i> built
</I>&gt;<i> it from the latest tarball on Mono's website but it is outdated, so I had
</I>&gt;<i> to
</I>&gt;<i> get it from github.
</I>&gt;<i>
</I>&gt;<i> After that I got another missing method exception:
</I>&gt;<i> System.Web.Routing.RouteCollection.get_AppendTrailingSlash. This method
</I>&gt;<i> does
</I>&gt;<i> not exist currently in mono (I read it's on the current github tree but
</I>&gt;<i> not on
</I>&gt;<i> releases). So obviously it's because my app was using MS assemblies.
</I>&gt;<i>
</I>&gt;<i> So I installed Mono and MonoDevelop 5.1 from tarballs on a desktop. Then
</I>&gt;<i> opened the solution removed all Package References and added References to
</I>&gt;<i> the
</I>&gt;<i> right assemblies on /usr/local/lib/mono/4.5 and deleted everything in the
</I>&gt;<i> bin
</I>&gt;<i> directory. It still wouldn't compile because it doesn't find the ViewBag
</I>&gt;<i> property on the Controller class (I guess because it's a dynamic type and I
</I>&gt;<i> guess Mono can't handle it), so I created quick custom ViewBag extension
</I>&gt;<i> and
</I>&gt;<i> it compiled but I still get the same error so I look on the bin directory
</I>&gt;<i> and
</I>&gt;<i> they're back! I don't know where MonoDevelop got them cause I deleted them
</I>&gt;<i> from packages directory. So I deleted everything from the bin directory
</I>&gt;<i> except
</I>&gt;<i> for my DLL and a couple third party DLLs (everything else is in the GAC),
</I>&gt;<i> then
</I>&gt;<i> without recompiling I ran from my project directory root.
</I>&gt;<i>
</I>&gt;<i> xsp4 --root . --applications /:.
</I>&gt;<i>
</I>&gt;<i> now I'm getting:
</I>&gt;<i>
</I>&gt;<i> System.InvalidOperationException
</I>&gt;<i> The view 'Index' or its master was not found or no view engine supports the
</I>&gt;<i> searched locations. The following locations were searched:
</I>&gt;<i> ~/Views/Default/Index.aspx
</I>&gt;<i> ~/Views/Default/Index.ascx
</I>&gt;<i> ~/Views/Shared/Index.aspx
</I>&gt;<i> ~/Views/Shared/Index.ascx
</I>&gt;<i> ~/Views/Default/Index.cshtml
</I>&gt;<i> ~/Views/Default/Index.vbhtml
</I>&gt;<i> ~/Views/Shared/Index.cshtml
</I>&gt;<i> ~/Views/Shared/Index.vbhtml
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> But Views/Default/Index.cshtml is there with rwx permission for everyone.
</I>&gt;<i> As a
</I>&gt;<i> desperate move I even tried copying the View directory to my home
</I>&gt;<i> directory in
</I>&gt;<i> case it was interpreting ~ to be my home dir instead of the app root. So
</I>&gt;<i> right
</I>&gt;<i> now I'm stuck. I'm using the right case on the url. Any suggestions?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tuesday 16 September 2014 3:32:31 PM Martin Thwaites wrote:
</I>&gt;<i> &gt; Have you made sure to remove the Microsoft.Web.Infrastructure.dll file...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; There is a tutorial somewhere about running MVC 3 on mono (which I do
</I>&gt;<i> with
</I>&gt;<i> &gt; great success).  There a few files that you need to make sure are not
</I>&gt;<i> &gt; deployed as part of your application.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That said, I've not tried anything 4.5 related on mono yet.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Also, you could try compiling from git, it maybe more upto date that the
</I>&gt;<i> &gt; tarball.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hope that helps
</I>&gt;<i> &gt; Martin
</I>&gt;<i> &gt; On 16 Sep 2014 05:41, &quot;Fernando Rodriguez&quot;
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">frodriguez.developer at outlook.com</A>&gt;
</I>&gt;<i> &gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I'm trying to get an Asp.Net 4.5 MVC app to run on mono and I'm getting
</I>&gt;<i> the
</I>&gt;<i> &gt; &gt; error shown bellow (also posted here). I get the same error in apache
</I>&gt;<i> using
</I>&gt;<i> &gt; &gt; mod_mono as in xsp4. I built mono, xsp, and mod_mono on the server from
</I>&gt;<i> the
</I>&gt;<i> &gt; &gt; latest tarball releases (simple ./configure &amp;&amp; make &amp;&amp; make install).
</I>&gt;<i> Other
</I>&gt;<i> &gt; &gt; Asp.Net applications run fine on the same server (targetting earlier
</I>&gt;<i> &gt; &gt; runtimes).
</I>&gt;<i> &gt; &gt; The server run Gentoo and I remove all mono, xsp, and mod_mono packages
</I>&gt;<i> &gt; &gt; before
</I>&gt;<i> &gt; &gt; building the source.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I found several posts that suggest a bug in xsp (don't apply since I'm
</I>&gt;<i> &gt; &gt; using
</I>&gt;<i> &gt; &gt; latest tarball and also tried earlier versions) or mono loading the
</I>&gt;<i> wrong
</I>&gt;<i> &gt; &gt; framework version stack trace and exception message suggest is loading
</I>&gt;<i> the
</I>&gt;<i> &gt; &gt; right assemblies (most assemblies on the 4.5 directory are symlinks to
</I>&gt;<i> &gt; &gt; 4.0). I
</I>&gt;<i> &gt; &gt; did tried to run xsp.exe with mono ---runtime=v4.5 and it tells me it's
</I>&gt;<i> not
</I>&gt;<i> &gt; &gt; available, same for 4.0 but it is available and the and the exception
</I>&gt;<i> shows
</I>&gt;<i> &gt; &gt; it's using it.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The application was built on Windows with Visual Studio but I also
</I>&gt;<i> built
</I>&gt;<i> on
</I>&gt;<i> &gt; &gt; MonoDevelop (Xamarin) on Windows to target Mono. It does not use any
</I>&gt;<i> &gt; &gt; external
</I>&gt;<i> &gt; &gt; references except for PayPal's API Library but I used this same
</I>&gt;<i> library on
</I>&gt;<i> &gt; &gt; other applications that run on mono so that shouldn't be the problem.
</I>&gt;<i> I'm
</I>&gt;<i> &gt; &gt; trying to setup a parallel mono environment on a Linux desktop to
</I>&gt;<i> compile
</I>&gt;<i> &gt; &gt; it
</I>&gt;<i> &gt; &gt; on Linux to see if it makes a difference (my distro's version are
</I>&gt;<i> really
</I>&gt;<i> &gt; &gt; outdated).
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Another thing I noticed is that Visual Studio copies all the Mvc and
</I>&gt;<i> Razor,
</I>&gt;<i> &gt; &gt; etc assemblies to the bin folder, if I delete them mono wines about not
</I>&gt;<i> &gt; &gt; finding
</I>&gt;<i> &gt; &gt; them even though there's Mono's implementation on the GAC (which I
</I>&gt;<i> believe
</I>&gt;<i> &gt; &gt; are
</I>&gt;<i> &gt; &gt; built from the same source). Also in the Visual Studio generated
</I>&gt;<i> &gt; &gt; Web.config the
</I>&gt;<i> &gt; &gt; &lt;httpRuntime&gt; and other tags had a targetFramework=&quot;4.5&quot; attribute,
</I>&gt;<i> and I
</I>&gt;<i> &gt; &gt; had
</I>&gt;<i> &gt; &gt; to remove it cause mono wined about it (unrecognized attribute or
</I>&gt;<i> something
</I>&gt;<i> &gt; &gt; like that). Yet the same Web.config works fine in Mono under Windows.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I think that's all I got, suggestions are appreciated.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Exception caught during reading the configuration file:
</I>&gt;<i> &gt; &gt; System.MissingMethodException: Method not found:
</I>&gt;<i> &gt; &gt; 'System.Configuration.IConfigurationSectionHandler.Create'.
</I>&gt;<i> &gt; &gt;   at
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection
</I>&gt;<i> &gt; &gt; (System.String configKey) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; &gt;   at System.Configuration.ConfigurationManager.GetSection
</I>&gt;<i> (System.String
</I>&gt;<i> &gt; &gt; sectionName) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; &gt;   at System.Configuration.ConfigurationManager.get_AppSettings ()
</I>&gt;<i> &gt; &gt; [0x00000] in
</I>&gt;<i> &gt; &gt; &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; &gt;   at Mono.WebServer.XSP.Server.get_AppSettings () [0x00000] in
</I>&gt;<i> &lt;filename
</I>&gt;<i> &gt; &gt; unknown&gt;:0
</I>&gt;<i> &gt; &gt;   at Mono.WebServer.XSP.Server+ApplicationSettings..ctor () [0x00000]
</I>&gt;<i> in
</I>&gt;<i> &gt; &gt; &lt;filename unknown&gt;:0
</I>&gt;<i> &gt; &gt; xsp4
</I>&gt;<i> &gt; &gt; Listening on address: 0.0.0.0
</I>&gt;<i> &gt; &gt; Root directory: /var/www/stage.fernansoft.net
</I>&gt;<i> &gt; &gt; Listening on port: 8080 (non-secure)
</I>&gt;<i> &gt; &gt; Hit Return to stop the server.
</I>&gt;<i> &gt; &gt; Missing method
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> System.Configuration.IConfigurationSectionHandler::Create(object,object,XmlNode)
</I>&gt;<i> &gt; &gt; in assembly /usr/local/lib64/mono/4.0/System.dll, referenced in
</I>&gt;<i> assembly
</I>&gt;<i> &gt; &gt; /usr/local/lib64/mono/4.0/System.Configuration.dll
</I>&gt;<i> &gt; &gt; Missing method
</I>&gt;<i> &gt; &gt; System.Configuration.ConfigurationManager::get_AppSettings() in
</I>&gt;<i> &gt; &gt; assembly
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> /usr/local/lib64/mono/gac/System.Configuration/4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll,
</I>&gt;<i> &gt; &gt; referenced in assembly
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> /usr/local/lib64/mono/gac/Mono.WebServer2/0.4.0.0__0738eb9f132ed756/Mono.WebServer2.dll
</I>&gt;<i> &gt; &gt; Missing method
</I>&gt;<i> &gt; &gt; System.Configuration.ConfigurationManager::get_AppSettings() in
</I>&gt;<i> &gt; &gt; assembly
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> /usr/local/lib64/mono/gac/System.Configuration/4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll,
</I>&gt;<i> &gt; &gt; referenced in assembly /usr/local/lib64/mono/4.0/System.Web.dll
</I>&gt;<i> &gt; &gt; Missing method
</I>&gt;<i> &gt; &gt; System.Configuration.ConfigurationManager::get_AppSettings() in
</I>&gt;<i> &gt; &gt; assembly
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> /usr/local/lib64/mono/gac/System.Configuration/4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll,
</I>&gt;<i> &gt; &gt; referenced in assembly /usr/local/lib64/mono/4.0/System.Web.dll
</I>&gt;<i> &gt; &gt; Missing method
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> System.Configuration.ConfigurationProperty::.ctor(string,Type,object,TypeConverter,ConfigurationValidatorBase,ConfigurationPropertyOptions)
</I>&gt;<i> &gt; &gt; in assembly
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> /usr/local/lib64/mono/gac/System.Configuration/4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll,
</I>&gt;<i> &gt; &gt; referenced in assembly /usr/local/lib64/mono/4.0/System.Web.dll
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; ---------
</I>&gt;<i> &gt; &gt; Fernando Rodriguez
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">frodriguez.developer at outlook.com</A>
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> ----------
</I>&gt;<i> Fernando Rodriguez
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">frodriguez.developer at outlook.com</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20140916/0cc61d33/attachment-0001.html">http://lists.ximian.com/pipermail/mono-list/attachments/20140916/0cc61d33/attachment-0001.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="051192.html">[Mono-list] Running ASP.Net 4.5 MVC Application on Mono
</A></li>
	<LI>Next message: <A HREF="051194.html">[Mono-list] Running ASP.Net 4.5 MVC Application on Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51193">[ date ]</a>
              <a href="thread.html#51193">[ thread ]</a>
              <a href="subject.html#51193">[ subject ]</a>
              <a href="author.html#51193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
