<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Can someone analyze this code and tell me what	happens
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Can%20someone%20analyze%20this%20code%20and%20tell%20me%20what%0A%09happens&In-Reply-To=f4493004f03ec1cd4cd7c01a7e018c71.squirrel%40correo.cumay3.cfg.jovenclub.cu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046794.html">
   <LINK REL="Next"  HREF="046799.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Can someone analyze this code and tell me what	happens</H1>
    <B>Alex</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Can%20someone%20analyze%20this%20code%20and%20tell%20me%20what%0A%09happens&In-Reply-To=f4493004f03ec1cd4cd7c01a7e018c71.squirrel%40correo.cumay3.cfg.jovenclub.cu"
       TITLE="[Mono-list] Can someone analyze this code and tell me what	happens">xtzgzorex at gmail.com
       </A><BR>
    <I>Tue Apr  5 15:28:28 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="046794.html">[Mono-list] Can someone analyze this code and tell me what happens
</A></li>
        <LI>Next message: <A HREF="046799.html">[Mono-list] Can someone analyze this code and tell me what	happens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46795">[ date ]</a>
              <a href="thread.html#46795">[ thread ]</a>
              <a href="subject.html#46795">[ subject ]</a>
              <a href="author.html#46795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

You could help us help you by telling us what exception you're
getting. A self-contained test case also helps (the more you can
reduce the amount of code, the better).

Regards,
Alex

2011/4/4 Leonel Florin Selles &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">leonel06013 at cfg.jovenclub.cu</A>&gt;:
&gt;<i> I have created two applications that connect on the same machine and sent
</I>&gt;<i> an object, I used Socket to connect, but when the client sends data to the
</I>&gt;<i> server, and the server revived the data and try to &#160;Deserialize is when it
</I>&gt;<i> &#160;get me out with one exception.
</I>&gt;<i>
</I>&gt;<i> here is the client and server, the object that they use to communicate and
</I>&gt;<i> &#160;the class to serialize and deserialize
</I>&gt;<i>
</I>&gt;<i> dataStruct
</I>&gt;<i> -----------------------------------------
</I>&gt;<i> using System;
</I>&gt;<i>
</I>&gt;<i> namespace server
</I>&gt;<i> {
</I>&gt;<i> &#160; &#160; &#160; &#160;public class dataStruct
</I>&gt;<i> &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public dataStruct ()
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;}
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public String clientName;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public Int32 clientPid;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public String host;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public String bd;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public String user;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public String pass;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public String usersCheck;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public Boolean systemTryIcon;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public String adminpass;
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public enum signals
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ConfFileExist,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ConfFileEmpty,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;SocketServerNoStart,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ClientMalCerrado,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ClientBienCerrado,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;TmServiceExist,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;TmServiseNoExist,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;CerrarSesion,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;SendMeConfData,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;SaveThisConfData,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ApagerEquipo,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ReiniciarEquipo,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ObjetoBdNoInicia,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;BindToSocketBrouk,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ConectarBdImposible,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;SocketNoListen,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ConsultaFallo,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ConsultaOK,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ExtractConsultaFallo,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;ExtractConsultaOk,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;PCNoExiste
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;}
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public signals orden;
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;}
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> ------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Serialice
</I>&gt;<i> -----------------------------------------------------
</I>&gt;<i> using System;
</I>&gt;<i> using System.Runtime.Serialization.Formatters.Binary;
</I>&gt;<i> using System.IO;
</I>&gt;<i>
</I>&gt;<i> namespace server
</I>&gt;<i> {
</I>&gt;<i> &#160; &#160; &#160; &#160;public class serializacion
</I>&gt;<i> &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public serializacion ()
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;}
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public static byte[] Serialize (Object objeto)
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;BinaryFormatter formater = new BinaryFormatter ();
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;MemoryStream mem = new MemoryStream ();
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;formater.Serialize (mem, objeto);
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;return mem.GetBuffer ();
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;}
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public static System.Object DeSerialize (byte[] listaByte)
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;BinaryFormatter formater = new BinaryFormatter ();
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;MemoryStream mem = new MemoryStream ();
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;mem.Write (listaByte, 0, listaByte.Length);
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;mem.Seek (0, 0);
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;return formater.Deserialize (mem);
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;}
</I>&gt;<i> &#160; &#160; &#160; &#160;}
</I>&gt;<i> }
</I>&gt;<i> ----------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> client
</I>&gt;<i> ------------------------------------
</I>&gt;<i> using System;
</I>&gt;<i> using System.Text;
</I>&gt;<i> using System.IO;
</I>&gt;<i> using System.Net.Sockets;
</I>&gt;<i>
</I>&gt;<i> namespace cliente
</I>&gt;<i> {
</I>&gt;<i> &#160; &#160; &#160; &#160;class MainClass
</I>&gt;<i> &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public static void Main (string[] args)
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;byte[] sendData;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;byte[] recvData;
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;Socket clientSocket = new Socket (AddressFamily.InterNetwork,
</I>&gt;<i> SocketType.Stream, ProtocolType.IP);
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;clientSocket.Connect (&quot;localhost&quot;, 4069);
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;dataStruct structura = new dataStruct ();
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;structura.clientName = &quot;Pepe&quot;;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;structura.clientPid = 1234;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;structura.host = &quot;localhost&quot;;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;structura.bd = &quot;Tmaquina&quot;;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;structura.user = &quot;TmaquinaLoco&quot;;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;structura.pass = &quot;EstoNoCuadra&quot;;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;structura.usersCheck = &quot;estudiante,florin&quot;;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;structura.systemTryIcon = true;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;structura.adminpass = &quot;pepeloco&quot;;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;structura.orden = dataStruct.signals.ApagerEquipo;
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;sendData = serializacion.Serialize (structura);
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;clientSocket.Send (sendData, 0, sendData.Length, SocketFlags.None);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;}
</I>&gt;<i> &#160; &#160; &#160; &#160;}
</I>&gt;<i> }
</I>&gt;<i> --------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Server
</I>&gt;<i> ---------------------------------------------
</I>&gt;<i> using System;
</I>&gt;<i> using System.Runtime.InteropServices;
</I>&gt;<i> using System.Net;
</I>&gt;<i> using System.Net.Sockets;
</I>&gt;<i> using System.Collections;
</I>&gt;<i> using System.Text;
</I>&gt;<i>
</I>&gt;<i> namespace server
</I>&gt;<i> {
</I>&gt;<i> &#160; &#160; &#160; &#160;class MainClass
</I>&gt;<i> &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;public static void Main (string[] args)
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;byte[] sendData;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;byte[] rcvData;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;int puerto = 4069;
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;Socket socketServer = new Socket (AddressFamily.InterNetwork,
</I>&gt;<i> SocketType.Stream, ProtocolType.IP);
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;Socket socketClient;
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;socketServer.Bind (new IPEndPoint (IPAddress.Any, puerto));
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;socketServer.Listen (100);
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;socketClient = socketServer.Accept ();
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;rcvData = new byte[4000];
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;socketClient.Receive (rcvData, 0, rcvData.Length, SocketFlags.None);
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;dataStruct datos = new dataStruct ();
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;datos = (dataStruct)serializacion.DeSerialize (rcvData);
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;Console.Read ();
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;}
</I>&gt;<i> &#160; &#160; &#160; &#160;}
</I>&gt;<i> }
</I>&gt;<i> ----------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> helpppppppppppppppppppp
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist &#160;- &#160;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046794.html">[Mono-list] Can someone analyze this code and tell me what happens
</A></li>
	<LI>Next message: <A HREF="046799.html">[Mono-list] Can someone analyze this code and tell me what	happens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46795">[ date ]</a>
              <a href="thread.html#46795">[ thread ]</a>
              <a href="subject.html#46795">[ subject ]</a>
              <a href="author.html#46795">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
