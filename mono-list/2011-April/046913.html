<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] ADO.net issue with 2.11 master/b32093e Win32
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20ADO.net%20issue%20with%202.11%20master/b32093e%20Win32&In-Reply-To=1303761469343-3473994.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046912.html">
   <LINK REL="Next"  HREF="046914.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] ADO.net issue with 2.11 master/b32093e Win32</H1>
    <B>Veerapuram Varadhan</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20ADO.net%20issue%20with%202.11%20master/b32093e%20Win32&In-Reply-To=1303761469343-3473994.post%40n4.nabble.com"
       TITLE="[Mono-list] ADO.net issue with 2.11 master/b32093e Win32">vvaradhan at novell.com
       </A><BR>
    <I>Mon Apr 25 16:13:52 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="046912.html">[Mono-list] ADO.net issue with 2.11 master/b32093e Win32
</A></li>
        <LI>Next message: <A HREF="046914.html">[Mono-list] ADO.net issue with 2.11 master/b32093e Win32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46913">[ date ]</a>
              <a href="thread.html#46913">[ thread ]</a>
              <a href="subject.html#46913">[ subject ]</a>
              <a href="author.html#46913">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Which version of SqlServer are you trying to connect to?

Is &quot;Timeout exception&quot; (in release mode) an expected behavior of your
test?

Can you attach your sample test?

Thanks,

V. Varadhan

On Mon, 2011-04-25 at 12:57 -0700, Rod wrote:
&gt;<i> I have a simple test I am trying to run using ADO.net and mono.
</I>&gt;<i> 
</I>&gt;<i> I create a connection to a SQL Server then attempt to call a stored proc on
</I>&gt;<i> that connection.  When I call Open() on the connection I get the below
</I>&gt;<i> exception immediately in debug mode.  I have set the CommandTimeout to 30
</I>&gt;<i> before Open is called on the connection.  Since the exception occurs
</I>&gt;<i> immediately it is not waiting 30 seconds for the timeout to expire which is
</I>&gt;<i> what it says it did but only in debug mode.  If I do this is release mode
</I>&gt;<i> then it seems to wait and then throw the exception.  
</I>&gt;<i> 
</I>&gt;<i> I then did NOT set the CommandTimeout and left it to be the default and
</I>&gt;<i> still the same results.
</I>&gt;<i> 
</I>&gt;<i> Environment:
</I>&gt;<i> Windows 2008 R2 SP1 64 bit
</I>&gt;<i> Visual Studio 2010 SP1
</I>&gt;<i> Mono Tools for VS
</I>&gt;<i> Mono 2.11 master/b32093e (from yesterday compiled in Cygwin)
</I>&gt;<i> 
</I>&gt;<i> Running test using Mono Tools for VS with a profile setup to the freshly
</I>&gt;<i> compiled 2.11.x.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> EXCEPTION
</I>&gt;<i> ========
</I>&gt;<i> 
</I>&gt;<i> Unhandled Exception: System.Data.SqlClient.SqlException: Timeout expired.
</I>&gt;<i> The timeout period elapsed prior to completion of the operation or the
</I>&gt;<i> server is not responding. ---&gt; Mono.Data.Tds.Protocol.TdsTimeoutException:
</I>&gt;<i> Timeout expired. The timeout period elapsed prior to completion of the
</I>&gt;<i> operation or the server is not responding.
</I>&gt;<i>   at Mono.Data.Tds.Protocol.TdsComm..ctor (System.String dataSource, Int32
</I>&gt;<i> port, Int32 packetSize, Int32 timeout, TdsVersion tdsVersion) [0x00105] in
</I>&gt;<i> C:\MonoCompile\cygwin\usr\src\mono\mono\mcs\class\Mono.Data.Tds\Mono.Data.Tds.Protocol\TdsComm.cs:117
</I>&gt;<i>   --- End of inner exception stack trace ---
</I>&gt;<i>   at System.Data.SqlClient.SqlConnection.Open () [0x00155] in
</I>&gt;<i> C:\MonoCompile\cygwin\usr\src\mono\mono\mcs\class\System.Data\System.Data.SqlClient\SqlConnection.cs:554
</I>&gt;<i>   at FunWith40.Program.ExecuteStoredProc[IEnumerable`1] (System.String
</I>&gt;<i> storedProcName, System.Func`2 readerHandler, Int32 commandTimeoutOverride,
</I>&gt;<i> System.Data.SqlClient.SqlParameter[] sqlParameters) [0x00047] in
</I>&gt;<i> FunWith40\Program.cs:179
</I>&gt;<i>   at FunWith40.Program.spConfig_GetString (System.String domainName,
</I>&gt;<i> System.String applicationName, System.String itemName) [0x00084] in
</I>&gt;<i> FunWith40\Program.cs:158
</I>&gt;<i>   at FunWith40.Program.PerformanceTest (Int32 cyclesPerTest) [0x0000a] in
</I>&gt;<i> FunWith40\Program.cs:112
</I>&gt;<i>   at FunWith40.Program.PerformanceTest (Int32 cyclesPerTest, Int32
</I>&gt;<i> numberOfTests, Int32 delayBetweenTestsMs) [0x00017] in
</I>&gt;<i> FunWith40\Program.cs:96
</I>&gt;<i>   at FunWith40.Program.Main (System.String[] args) [0x00025] in
</I>&gt;<i> FunWith40\Program.cs:61
</I>&gt;<i> Press any key to continue . . .
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/ADO-net-issue-with-2-11-master-b32093e-Win32-tp3473994p3473994.html">http://mono.1490590.n4.nabble.com/ADO-net-issue-with-2-11-master-b32093e-Win32-tp3473994p3473994.html</A>
</I>&gt;<i> Sent from the Mono - General mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046912.html">[Mono-list] ADO.net issue with 2.11 master/b32093e Win32
</A></li>
	<LI>Next message: <A HREF="046914.html">[Mono-list] ADO.net issue with 2.11 master/b32093e Win32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46913">[ date ]</a>
              <a href="thread.html#46913">[ thread ]</a>
              <a href="subject.html#46913">[ subject ]</a>
              <a href="author.html#46913">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
