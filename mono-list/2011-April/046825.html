<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Apache+mono+mod_mono_server with '--gc=sgen' fails on	start-up
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Apache%2Bmono%2Bmod_mono_server%20with%20%27--gc%3Dsgen%27%20fails%20on%0A%09start-up&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046824.html">
   <LINK REL="Next"  HREF="046849.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Apache+mono+mod_mono_server with '--gc=sgen' fails on	start-up</H1>
    <B>Tymek Majewski</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Apache%2Bmono%2Bmod_mono_server%20with%20%27--gc%3Dsgen%27%20fails%20on%0A%09start-up&In-Reply-To="
       TITLE="[Mono-list] Apache+mono+mod_mono_server with '--gc=sgen' fails on	start-up">tym.majewski at nearmap.com
       </A><BR>
    <I>Mon Apr 11 03:55:54 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="046824.html">[Mono-list] Problems with InvariantCulture on Maemo.
</A></li>
        <LI>Next message: <A HREF="046849.html">[Mono-list] Apache+mono+mod_mono_server with '--gc=sgen' fails	on start-up
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46825">[ date ]</a>
              <a href="thread.html#46825">[ thread ]</a>
              <a href="subject.html#46825">[ subject ]</a>
              <a href="author.html#46825">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi gurus,

I have a Apache+mono+mod_mono_server setup and I would like to
experiment with the new garbage collector, but when I start mono with
--gc=sgen reports a 'Stack overflow' problem on start-up.

The test case is:
/usr/local/mono-2.10.1/bin/mono --debug --gc=sgen
/usr/local/mono-2.10.1/lib/mono/4.0/mod-mono-server4.exe --filename
/tmp/.mono_unix_socket_app1 --applications /app1/:/home/me/app1
--nonstop

The output is:
Stack overflow: IP: 0x404e9fe2, fault addr: (nil)
Stacktrace:
  at System.Exception.ToString () [0x00000] in
/home/tym/mono/mono-2.10.1/mcs/class/corlib/System/Exception.cs:285
  &lt;...&gt;
  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_object__this__
(object,intptr,intptr,intptr) &lt;IL 0x00050, 0xffffffff&gt;

Just to reiterate without &quot;--gc=sgen&quot; it's all good.

If I run mono --version it reports correctly that GC is set to 'sgen':
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">tym at tym-pc</A>:~$ /usr/local/mono-2.10.1/bin/mono --gc=sgen --version
Mono JIT compiler version 2.10.1 (tarball Mon Apr 11 05:13:56 UTC 2011)
Copyright (C) 2002-2011 Novell, Inc and Contributors. www.mono-project.com
        TLS:           normal
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  amd64
        Disabled:      none
        Misc:          softdebug
        LLVM:          supported, not enabled.
        GC:            sgen


Do I have to do something else, like recompile mod_mono with some special flags?

Thanks in advance for any help.

Regards,
Tymek Majewski
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046824.html">[Mono-list] Problems with InvariantCulture on Maemo.
</A></li>
	<LI>Next message: <A HREF="046849.html">[Mono-list] Apache+mono+mod_mono_server with '--gc=sgen' fails	on start-up
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46825">[ date ]</a>
              <a href="thread.html#46825">[ thread ]</a>
              <a href="subject.html#46825">[ subject ]</a>
              <a href="author.html#46825">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
