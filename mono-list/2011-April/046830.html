<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] WCF KnownTypes in Mono 2.10 / MonoTouch 4.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20WCF%20KnownTypes%20in%20Mono%202.10%20/%20MonoTouch%204.0&In-Reply-To=1302657024153-3446014.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046828.html">
   <LINK REL="Next"  HREF="046831.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] WCF KnownTypes in Mono 2.10 / MonoTouch 4.0</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20WCF%20KnownTypes%20in%20Mono%202.10%20/%20MonoTouch%204.0&In-Reply-To=1302657024153-3446014.post%40n4.nabble.com"
       TITLE="[Mono-list] WCF KnownTypes in Mono 2.10 / MonoTouch 4.0">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Thu Apr 14 02:00:09 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="046828.html">[Mono-list] WCF KnownTypes in Mono 2.10 / MonoTouch 4.0
</A></li>
        <LI>Next message: <A HREF="046831.html">[Mono-list] WCF KnownTypes in Mono 2.10 / MonoTouch 4.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46830">[ date ]</a>
              <a href="thread.html#46830">[ thread ]</a>
              <a href="subject.html#46830">[ subject ]</a>
              <a href="author.html#46830">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

It turned out the method lookup in ServiceKnownTypeAttribute was 
implemented way different from what .NET exactly expects (which is not 
documented). I did a couple of experiment and fixed our code in git.
<A HREF="https://github.com/mono/mono/commit/77758013">https://github.com/mono/mono/commit/77758013</A>

Atsushi Eno

(2011/04/13 10:10), thenextman wrote:
&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> I have an application that uses WCF. It runs great on Mono 2.8.2 on Ubuntu
</I>&gt;<i> and .NET 3.0 on Windows.
</I>&gt;<i>
</I>&gt;<i> It decorates the WCF service contract with the 'ServiceKnownType' attribute,
</I>&gt;<i> which points to a method returning the derived types needed to use the
</I>&gt;<i> server:
</I>&gt;<i>
</I>&gt;<i> [ServiceKnownType(&quot;GetKnownTypes&quot;, typeof(KnownTypeProvider)]
</I>&gt;<i>
</I>&gt;<i> I am porting my app to MonoTouch. I am using the latest 4.0, based on Mono
</I>&gt;<i> 2.10.1. This no longer works: my WCF call fails because the
</I>&gt;<i> DataContractSerializer on the client doesn't recognise the return type.
</I>&gt;<i>
</I>&gt;<i> I set a breakpoint in my 'GetKnownTypes' method and see that it is never
</I>&gt;<i> called. I assume that this part of System.ServiceModel is not present / not
</I>&gt;<i> working in MonoTouch?
</I>&gt;<i>
</I>&gt;<i> I try to work around this by decorating the base return type with the
</I>&gt;<i> 'KnownType' attribute instead.
</I>&gt;<i>
</I>&gt;<i> [KnownType(&quot;GetKnownTypes&quot;)]
</I>&gt;<i>
</I>&gt;<i> Again, it doesn't work and my 'GetKnownTypes' method is never called.
</I>&gt;<i> Looking at the source for DataContractSerializer, it seems if you use a
</I>&gt;<i> method name rather than specifying the type, it just gets ignored?!
</I>&gt;<i>
</I>&gt;<i> I will try again by specifying the type instead of using a method (looking
</I>&gt;<i> at the source of DataContractSerializer, it *looks* like this will work),
</I>&gt;<i> however this is tricky for me in MonoTouch because I will need to use typeof
</I>&gt;<i> rather than Type.GetType(&quot;fully.qualified.typename&quot;).
</I>&gt;<i>
</I>&gt;<i> Is there another solution? Workaround?
</I>&gt;<i>
</I>&gt;<i> I did see this:
</I>&gt;<i> <A HREF="http://stackoverflow.com/questions/771560/how-do-you-configure-wcf-known-types-programmatically/2104482#2104482,">http://stackoverflow.com/questions/771560/how-do-you-configure-wcf-known-types-programmatically/2104482#2104482,</A>
</I>&gt;<i> however it seems MonoTouch is missing some of the required interfaces...
</I>&gt;<i>
</I>&gt;<i> Thanks in advance
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/WCF-KnownTypes-in-Mono-2-10-MonoTouch-4-0-tp3446014p3446014.html">http://mono.1490590.n4.nabble.com/WCF-KnownTypes-in-Mono-2-10-MonoTouch-4-0-tp3446014p3446014.html</A>
</I>&gt;<i> Sent from the Mono - General mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046828.html">[Mono-list] WCF KnownTypes in Mono 2.10 / MonoTouch 4.0
</A></li>
	<LI>Next message: <A HREF="046831.html">[Mono-list] WCF KnownTypes in Mono 2.10 / MonoTouch 4.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46830">[ date ]</a>
              <a href="thread.html#46830">[ thread ]</a>
              <a href="subject.html#46830">[ subject ]</a>
              <a href="author.html#46830">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
