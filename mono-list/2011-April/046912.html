<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] ADO.net issue with 2.11 master/b32093e Win32
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20ADO.net%20issue%20with%202.11%20master/b32093e%20Win32&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046907.html">
   <LINK REL="Next"  HREF="046913.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] ADO.net issue with 2.11 master/b32093e Win32</H1>
    <B>Rod</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20ADO.net%20issue%20with%202.11%20master/b32093e%20Win32&In-Reply-To="
       TITLE="[Mono-list] ADO.net issue with 2.11 master/b32093e Win32">rodney.foley at lumension.com
       </A><BR>
    <I>Mon Apr 25 15:57:49 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="046907.html">[Mono-list] mod-mono problem
</A></li>
        <LI>Next message: <A HREF="046913.html">[Mono-list] ADO.net issue with 2.11 master/b32093e Win32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46912">[ date ]</a>
              <a href="thread.html#46912">[ thread ]</a>
              <a href="subject.html#46912">[ subject ]</a>
              <a href="author.html#46912">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a simple test I am trying to run using ADO.net and mono.

I create a connection to a SQL Server then attempt to call a stored proc on
that connection.  When I call Open() on the connection I get the below
exception immediately in debug mode.  I have set the CommandTimeout to 30
before Open is called on the connection.  Since the exception occurs
immediately it is not waiting 30 seconds for the timeout to expire which is
what it says it did but only in debug mode.  If I do this is release mode
then it seems to wait and then throw the exception.  

I then did NOT set the CommandTimeout and left it to be the default and
still the same results.

Environment:
Windows 2008 R2 SP1 64 bit
Visual Studio 2010 SP1
Mono Tools for VS
Mono 2.11 master/b32093e (from yesterday compiled in Cygwin)

Running test using Mono Tools for VS with a profile setup to the freshly
compiled 2.11.x.


EXCEPTION
========

Unhandled Exception: System.Data.SqlClient.SqlException: Timeout expired.
The timeout period elapsed prior to completion of the operation or the
server is not responding. ---&gt; Mono.Data.Tds.Protocol.TdsTimeoutException:
Timeout expired. The timeout period elapsed prior to completion of the
operation or the server is not responding.
  at Mono.Data.Tds.Protocol.TdsComm..ctor (System.String dataSource, Int32
port, Int32 packetSize, Int32 timeout, TdsVersion tdsVersion) [0x00105] in
C:\MonoCompile\cygwin\usr\src\mono\mono\mcs\class\Mono.Data.Tds\Mono.Data.Tds.Protocol\TdsComm.cs:117
  --- End of inner exception stack trace ---
  at System.Data.SqlClient.SqlConnection.Open () [0x00155] in
C:\MonoCompile\cygwin\usr\src\mono\mono\mcs\class\System.Data\System.Data.SqlClient\SqlConnection.cs:554
  at FunWith40.Program.ExecuteStoredProc[IEnumerable`1] (System.String
storedProcName, System.Func`2 readerHandler, Int32 commandTimeoutOverride,
System.Data.SqlClient.SqlParameter[] sqlParameters) [0x00047] in
FunWith40\Program.cs:179
  at FunWith40.Program.spConfig_GetString (System.String domainName,
System.String applicationName, System.String itemName) [0x00084] in
FunWith40\Program.cs:158
  at FunWith40.Program.PerformanceTest (Int32 cyclesPerTest) [0x0000a] in
FunWith40\Program.cs:112
  at FunWith40.Program.PerformanceTest (Int32 cyclesPerTest, Int32
numberOfTests, Int32 delayBetweenTestsMs) [0x00017] in
FunWith40\Program.cs:96
  at FunWith40.Program.Main (System.String[] args) [0x00025] in
FunWith40\Program.cs:61
Press any key to continue . . .





--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/ADO-net-issue-with-2-11-master-b32093e-Win32-tp3473994p3473994.html">http://mono.1490590.n4.nabble.com/ADO-net-issue-with-2-11-master-b32093e-Win32-tp3473994p3473994.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046907.html">[Mono-list] mod-mono problem
</A></li>
	<LI>Next message: <A HREF="046913.html">[Mono-list] ADO.net issue with 2.11 master/b32093e Win32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46912">[ date ]</a>
              <a href="thread.html#46912">[ thread ]</a>
              <a href="subject.html#46912">[ subject ]</a>
              <a href="author.html#46912">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
