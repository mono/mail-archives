<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Fw: Bug with multiple threads in XSP ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tiago.lima%40vianw.pt">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="017048.html">
   <LINK REL="Next"  HREF="017046.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Fw: Bug with multiple threads in XSP ?
   </H1>
    <B>Tiago Lima
    </B> 
    <A HREF="mailto:tiago.lima%40vianw.pt"
       TITLE="[Mono-list] Fw: Bug with multiple threads in XSP ?">tiago.lima@vianw.pt
       </A><BR>
    <I>Fri, 21 Nov 2003 21:12:08 -0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="017048.html">[Mono-list] (no subject)
</A></li>
        <LI> Next message: <A HREF="017046.html">[Mono-list] Installing XSP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17042">[ date ]</a>
              <a href="thread.html#17042">[ thread ]</a>
              <a href="subject.html#17042">[ subject ]</a>
              <a href="author.html#17042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

------=_NextPart_000_0047_01C3B074.1F46E2A0
Content-Type: multipart/alternative;
	boundary=&quot;----=_NextPart_001_0048_01C3B074.1F46E2A0&quot;


------=_NextPart_001_0048_01C3B074.1F46E2A0
Content-Type: text/plain;
	charset=&quot;iso-8859-1&quot;
Content-Transfer-Encoding: quoted-printable

Hi again,

Yes ! I've did it ! Here is a sort of test to demonstrate a bug in the =
XSP
server... Hope this helps :)
The file &quot;MainClass1.cs&quot; launches a couple of threads that request the =
same
page and display the length of the response.
It is supposed to be always the same value...

Instructions:
    - The files &quot;MyButton.cs&quot; and &quot;ViewStateTester.aspx&quot; are part of the
site to test.
         - compile with:
                    $ mcs *.cs
/t:library -r:System.Web.dll -out:bin/MyButton.dll

    - The file MainClass1.cs has a main method that launches a couple of
threads making requests to the site.
            - please replace &lt;site&gt; the site to test.
            - it displays the number of bytes returned by the xsp =
server...
Some request shows different lengths...

If you need more information I'am available. I would appreciate some =
kind of
urgency...

Thanks,
    Tiago Lima

------=_NextPart_001_0048_01C3B074.1F46E2A0
Content-Type: text/html;
	charset=&quot;iso-8859-1&quot;
Content-Transfer-Encoding: quoted-printable

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;
&lt;HTML&gt;&lt;HEAD&gt;
&lt;META http-equiv=3DContent-Type content=3D&quot;text/html; =
charset=3Diso-8859-1&quot;&gt;
&lt;META content=3D&quot;MSHTML 6.00.3790.94&quot; name=3DGENERATOR&gt;
&lt;STYLE&gt;&lt;/STYLE&gt;
&lt;/HEAD&gt;
&lt;BODY bgColor=3D#ffffff&gt;
&lt;DIV&gt;Hi again,&lt;BR&gt;&lt;BR&gt;Yes ! I've did it ! Here is a sort of test to =
demonstrate=20
a bug in the XSP&lt;BR&gt;server... Hope this helps :)&lt;BR&gt;The file =
&quot;MainClass1.cs&quot;=20
launches a couple of threads that request the same&lt;BR&gt;page and display =
the=20
length of the response.&lt;BR&gt;It is supposed to be always the same=20
value...&lt;BR&gt;&lt;BR&gt;Instructions:&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; - The files =
&quot;MyButton.cs&quot;=20
and &quot;ViewStateTester.aspx&quot; are part of the&lt;BR&gt;site to=20
test.&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; - compile=20
with:&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbs=
p;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;=20
$ mcs *.cs&lt;BR&gt;/t:library -r:System.Web.dll=20
-out:bin/MyButton.dll&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; - The file MainClass1.cs =
has a=20
main method that launches a couple of&lt;BR&gt;threads making requests to the=20
site.&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbs=
p; -=20
please replace &amp;lt;site&amp;gt; the site to=20
test.&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbs=
p; - it=20
displays the number of bytes returned by the xsp server...&lt;BR&gt;Some =
request shows=20
different lengths...&lt;BR&gt;&lt;BR&gt;If you need more information I'am available. =
I would=20
appreciate some kind =
of&lt;BR&gt;urgency...&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Tiago=20
Lima&lt;BR&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;

------=_NextPart_001_0048_01C3B074.1F46E2A0--

------=_NextPart_000_0047_01C3B074.1F46E2A0
Content-Type: application/octet-stream;
	name=&quot;MainClass1.cs&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename=&quot;MainClass1.cs&quot;


using System;
using System.IO;
using System.Net;
using System.Threading;

namespace FLMIDTests
{
	public class MainClass
	{
		public static void Main(string[] args)
		{
			for(int i =3D 0; i &lt; 50; i++)
			{
				RequestThread request =3D new RequestThread();
				Thread thread =3D new Thread(new ThreadStart(request.Run));
				thread.Start();
			}
		}
	}
=09
	public class RequestThread
	{
		public void Run()
		{
			// Create a new WebRequest Object to the mentioned URL.
			WebRequest myWebRequest =3D =
WebRequest.Create(&quot;<A HREF="http://<site">http://&lt;site</A>&gt;/ViewStateTester.aspx&quot;);
			Console.WriteLine(&quot;\nThe Uri that responded for the Request is   =
{0}&quot;, myWebRequest.RequestUri);
		=09
			// Assign the response object of 'WebRequest' to a 'WebResponse' =
variable.
			WebResponse myWebResponse =3D myWebRequest.GetResponse();
		=09
			// Print the HTML contents of the page to the console.
			Stream streamResponse =3D myWebResponse.GetResponseStream();
			StreamReader streamRead =3D new StreamReader( streamResponse );
		=09
			System.Console.WriteLine(streamRead.ReadToEnd().Length);
		=09
			Console.WriteLine(&quot;\nThe Uri that responded for the Request is =
'{0}'&quot;, myWebRequest.RequestUri);
		}
	}
}

------=_NextPart_000_0047_01C3B074.1F46E2A0
Content-Type: application/octet-stream;
	name=&quot;ViewStateTester.aspx&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename=&quot;ViewStateTester.aspx&quot;

&lt;%@ Register TagPrefix=3D&quot;Control&quot; Namespace=3D&quot;ViewStateTests&quot; =
Assembly=3D&quot;MyButton&quot; %&gt;

&lt;%@ Page Language=3D&quot;C#&quot; EnableViewState=3D&quot;true&quot; %&gt;

&lt;html&gt;
&lt;body&gt;

&lt;form runat=3D&quot;server&quot;&gt;
	&lt;Control:MyButton id=3D&quot;button1&quot; runat=3D&quot;server&quot; /&gt;
&lt;/form&gt;

&lt;img src=3D'fdskdfsdh' runat=3D&quot;server&quot; /&gt;

&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;

&lt;form runat=3D&quot;server&quot;&gt;
	&lt;Control:MyButton id=3D&quot;button2&quot; runat=3D&quot;server&quot; /&gt;
&lt;/form&gt;

&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;

&lt;form runat=3D&quot;server&quot;&gt;
	&lt;Control:MyButton id=3D&quot;button3&quot; runat=3D&quot;server&quot; /&gt;
&lt;/form&gt;

&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;

&lt;form runat=3D&quot;server&quot;&gt;
	&lt;Control:MyButton id=3D&quot;button4&quot; runat=3D&quot;server&quot; /&gt;
&lt;/form&gt;

&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;

&lt;form runat=3D&quot;server&quot;&gt;
	&lt;Control:MyButton id=3D&quot;button5&quot; runat=3D&quot;server&quot; /&gt;
&lt;/form&gt;

&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;
&lt;b&gt;This page tests the view state capability of mono !&lt;/b&gt;

&lt;/body&gt;
&lt;/html&gt;

------=_NextPart_000_0047_01C3B074.1F46E2A0
Content-Type: application/octet-stream;
	name=&quot;MyButton.cs&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename=&quot;MyButton.cs&quot;


using System.Web.UI.WebControls;

// mcs *.cs /t:library -r:System.Web.dll -out:bin/MyButton.dll

namespace ViewStateTests
{
	public class MyButton : Button
	{
		protected override void OnLoad(System.EventArgs e)
		{
			string garbage =3D &quot;&quot;;
		=09
			for(int i =3D 0; i &lt; 100; i++)
				garbage +=3D &quot;$&amp;=3D?(B? QW#?(F=C2=BB#!?( V#=3D/\&quot;!=C2=BB/=3D =
!\&quot;%/=3D=C2=BB\&quot;#/ %\&quot;&quot;;
		=09
			ViewState.Add(&quot;a&quot;, garbage);
		}
	}
}

------=_NextPart_000_0047_01C3B074.1F46E2A0--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="017048.html">[Mono-list] (no subject)
</A></li>
	<LI> Next message: <A HREF="017046.html">[Mono-list] Installing XSP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17042">[ date ]</a>
              <a href="thread.html#17042">[ thread ]</a>
              <a href="subject.html#17042">[ subject ]</a>
              <a href="author.html#17042">[ author ]</a>
         </LI>
       </UL>
</body></html>
