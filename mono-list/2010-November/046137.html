<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Heap-Shot with no GUI.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Heap-Shot%20with%20no%20GUI.&In-Reply-To=4CE68D10.7090908%40hyber.dk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046136.html">
   <LINK REL="Next"  HREF="046013.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Heap-Shot with no GUI.</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Heap-Shot%20with%20no%20GUI.&In-Reply-To=4CE68D10.7090908%40hyber.dk"
       TITLE="[Mono-list] Heap-Shot with no GUI.">lupus at ximian.com
       </A><BR>
    <I>Fri Nov 19 10:16:25 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="046136.html">[Mono-list] Heap-Shot with no GUI.
</A></li>
        <LI>Next message: <A HREF="046013.html">[Mono-list] NET Compact Framework Assembly on Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46137">[ date ]</a>
              <a href="thread.html#46137">[ thread ]</a>
              <a href="subject.html#46137">[ subject ]</a>
              <a href="author.html#46137">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/19/10 Esben Laursen wrote:
&gt;<i>          Heap shot 10 at 331.831 secs: size: 23752824, object count: 
</I>&gt;<i> 22964, class count: 519, roots: 8074
</I>&gt;<i>               Bytes      Count  Average Class name
</I>&gt;<i>            17182136       1117    15382 System.Byte[] (bytes: +16703432, 
</I>&gt;<i> count: +509)
</I>&gt;<i>                  555 root references (2 pinning)
</I>&gt;<i>                  18 references from: SBSSHClient.TElSSHClient
</I>&gt;<i>                  14 references from: 
</I>&gt;<i> SBCryptoProvBuiltInSym.TElBuiltInAESSymmetricCrypto
</I>&gt;<i>                  13 references from: SBSSHKeyStorage.TElSSHKey
</I>&gt;<i> 
</I>&gt;<i> Sorry that you have to spell it out in wet cardboard, but what is a root 
</I>&gt;<i> reference and what does pinning mean?
</I>
Typically, a root reference is a static field in a class, or a gc
handle (see the GCHandle docs on msdn). Pinning means that two
of those arrays were referenced either from a pinning gc handle
or from some pinning variable on one of the thread's stacks
(because of something like the fixed C# statement or by the
conservative GC scan of some other stack local variable).
Pinning means also that the object can't be moved in memory.

Given the high number of root references to the arrays, my guess
is that the app creates GC handles for them and doesn't free them.
In the GC summary you should see something like the following if my
guess is true:

	GC handles normal: created: 600, destroyed: 0, max: 600

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">lupus at ximian.com</A>                             Monkeys do it better
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046136.html">[Mono-list] Heap-Shot with no GUI.
</A></li>
	<LI>Next message: <A HREF="046013.html">[Mono-list] NET Compact Framework Assembly on Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46137">[ date ]</a>
              <a href="thread.html#46137">[ thread ]</a>
              <a href="subject.html#46137">[ subject ]</a>
              <a href="author.html#46137">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
