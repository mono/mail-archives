<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] System.Graphics and GTK# applications
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20System.Graphics%20and%20GTK%23%20applications&In-Reply-To=4CDFE911.5030701%40gmx.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046077.html">
   <LINK REL="Next"  HREF="046081.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] System.Graphics and GTK# applications</H1>
    <B>Francisco M. Marzoa</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20System.Graphics%20and%20GTK%23%20applications&In-Reply-To=4CDFE911.5030701%40gmx.net"
       TITLE="[Mono-list] System.Graphics and GTK# applications">fmmarzoa at gmx.net
       </A><BR>
    <I>Mon Nov 15 14:38:08 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="046077.html">[Mono-list] System.Graphics and GTK# applications
</A></li>
        <LI>Next message: <A HREF="046081.html">[Mono-list] System.Graphics and GTK# applications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46080">[ date ]</a>
              <a href="thread.html#46080">[ thread ]</a>
              <a href="subject.html#46080">[ subject ]</a>
              <a href="author.html#46080">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I've found that if I create the Graphics.FromDrawable within the Expose
event function, it works as expected. I.e. move this code:

g = Gtk.DotNet.Graphics.FromDrawable (drawingarea1.GdkWindow);

&gt;<i>From MainWindow constructor to Redraw function (that's called on
</I>ExposeEvent of drawing area).

Two misteries remain undisclosed for me anyway:

First is why the graphics instance must be recreated in each expose
event? and second, probably related with the first, is why when Graphics
instance is get just one time on MainWindow constructor I can see the
rectagle flickering from time to time while I change the window size...

Who knows... O_o

Anyway having it working is enough for now for me.

Thanks a lot everyone,


El 14/11/10 14:50, Francisco M. Marzoa escribi&#243;:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> Thanks for your help, Dimitar.
</I>&gt;<i>
</I>&gt;<i> This wants to work, but it didn't fully. It seem that I can draw an
</I>&gt;<i> square on a DrawingArea, but it's erased just after drawing it. :-?
</I>&gt;<i>
</I>&gt;<i> Please, take a look at this code:
</I>&gt;<i>
</I>&gt;<i> using System;
</I>&gt;<i> using Gtk;
</I>&gt;<i> using Gtk.DotNet;
</I>&gt;<i> using System.Drawing;
</I>&gt;<i>
</I>&gt;<i> public partial class MainWindow : Gtk.Window
</I>&gt;<i> {
</I>&gt;<i>     System.Drawing.Graphics g;
</I>&gt;<i>        
</I>&gt;<i>     public MainWindow () : base(Gtk.WindowType.Toplevel)
</I>&gt;<i>     {
</I>&gt;<i>         Build ();
</I>&gt;<i>         g = Gtk.DotNet.Graphics.FromDrawable (drawingarea1.GdkWindow);
</I>&gt;<i>     }
</I>&gt;<i>
</I>&gt;<i>     protected void OnDeleteEvent (object sender, DeleteEventArgs a)
</I>&gt;<i>     {
</I>&gt;<i>         Application.Quit ();
</I>&gt;<i>         a.RetVal = true;
</I>&gt;<i>     }
</I>&gt;<i>    
</I>&gt;<i>     protected virtual void Redraw (object o, Gtk.ExposeEventArgs args)
</I>&gt;<i>     {
</I>&gt;<i>         Pen p = new Pen (Color.Red);
</I>&gt;<i>         g.DrawRectangle (p, 10, 10, 100, 100);
</I>&gt;<i>     }
</I>&gt;<i>    
</I>&gt;<i>    
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> Is a GTK# solution I've created with Monodevelop: it has just a
</I>&gt;<i> MainWindow, within which there's a VBox container with just one row,
</I>&gt;<i> within which there's a DrawingArea named as default &quot;drawingarea1&quot;.
</I>&gt;<i>
</I>&gt;<i> Also the Redraw method is connected to the Expose signal on
</I>&gt;<i> drawingarea1, so it's redrawn everytime the MainWindow resizes (Miguel
</I>&gt;<i> de Icaza told me to use that event for this task in a previous message.
</I>&gt;<i> Thanks, Miguel).
</I>&gt;<i>
</I>&gt;<i> Now, when I run the application there's nothing drawn on the window, but
</I>&gt;<i> if I drag a corner of the mainwindow resizing it continously, I can see
</I>&gt;<i> from time to time a flickering red square within, that dissapears when I
</I>&gt;<i> stop to drag the corner.
</I>&gt;<i>
</I>&gt;<i> So it seems like the rectangle where drawn, but it's &quot;erased&quot; just after
</I>&gt;<i> drawn.
</I>&gt;<i>
</I>&gt;<i> Do you know where the problem may be??
</I>&gt;<i>
</I>&gt;<i> Thanks a million in advance,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> El 13/11/10 18:47, Dimitar Dobrev escribi&#243;:
</I>&gt;<i>   
</I>&gt;&gt;<i> Add a reference to gtkdotnet and use Graphics.FormDrawable, which returns a
</I>&gt;&gt;<i> Graphics object for drawing on the widget with the specified GdkWindow. This
</I>&gt;&gt;<i> works on Windows and Linux but not on Mac OS X. I'm looking for a way to use
</I>&gt;&gt;<i> it on the latter as well.
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>   
</I>
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046077.html">[Mono-list] System.Graphics and GTK# applications
</A></li>
	<LI>Next message: <A HREF="046081.html">[Mono-list] System.Graphics and GTK# applications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46080">[ date ]</a>
              <a href="thread.html#46080">[ thread ]</a>
              <a href="subject.html#46080">[ subject ]</a>
              <a href="author.html#46080">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
