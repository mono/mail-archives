<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] An inheritance dilemma
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20An%20inheritance%20dilemma&In-Reply-To=AANLkTin1dELGbXe9KV9pEXz7h9iC2iAasBftVB0%3DBnpk%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046145.html">
   <LINK REL="Next"  HREF="046152.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] An inheritance dilemma</H1>
    <B>Francisco M. Marzoa</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20An%20inheritance%20dilemma&In-Reply-To=AANLkTin1dELGbXe9KV9pEXz7h9iC2iAasBftVB0%3DBnpk%40mail.gmail.com"
       TITLE="[Mono-list] An inheritance dilemma">fmmarzoa at gmx.net
       </A><BR>
    <I>Mon Nov 22 09:09:39 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="046145.html">[Mono-list] An inheritance dilemma
</A></li>
        <LI>Next message: <A HREF="046152.html">[Mono-list] An inheritance dilemma
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46147">[ date ]</a>
              <a href="thread.html#46147">[ thread ]</a>
              <a href="subject.html#46147">[ subject ]</a>
              <a href="author.html#46147">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks a lot for your help, Abe.

The previous code was just a simplified version of a more complex one.
The fact is that I need each class to have it's own SampleMethod, so it
cannot be just removed from B class. And that's the real root of the
problem. Obviusly you couldn't know this.

Anyway after look more into this, I've reached the conclussion that
there's no chance to obtain the output I want with the class scheme I
proposed without, perhaps, dirty hacks based on reflection. And prior
doing that, I think it's better to rethink the scheme.

So, the best solution I've found is to rewrite both classes like follows:

    public class A
    {
        protected string BuildString( string cname )
        {
            return cname + &quot; method&quot;;
        }

        public virtual void SampleMethod()
        {
            Console.WriteLine(this.BuildString(&quot;Class A&quot;));
        }
    }

    public class B : A
    {
        public override void SampleMethod()
        {
            base.SampleMethod();
            Console.WriteLine(this.BuildString(&quot;Class B&quot;));
        }
    }

 

The key point on this is that as there should be a different
SampleMethod overrided in each descendant, we do know within that method
the class we're executing in, so we can pass it from there instead of
use an instance method GetClassName.

Best regards,


El 21/11/10 19:53, Abe Gillespie escribi&#243;:
&gt;<i> I just realized you *really* doing virtualization in GetClassName().
</I>&gt;<i> So the better way to do this is:
</I>&gt;<i>
</I>&gt;<i> namespace Dummy
</I>&gt;<i> {
</I>&gt;<i>    class MainClass
</I>&gt;<i>    {
</I>&gt;<i>        public static void Main (string[] args)
</I>&gt;<i>        {
</I>&gt;<i>            B b = new B();
</I>&gt;<i>            b.SampleMethod();
</I>&gt;<i>        }
</I>&gt;<i>    }
</I>&gt;<i>
</I>&gt;<i>    public class A {
</I>&gt;<i>        protected virtual string GetClassName() {
</I>&gt;<i>            return &quot;Class A&quot;;
</I>&gt;<i>        }
</I>&gt;<i>
</I>&gt;<i>        public void SampleMethod () {
</I>&gt;<i>            Console.WriteLine (GetClassName() + &quot; method&quot;);
</I>&gt;<i>        }
</I>&gt;<i>    }
</I>&gt;<i>
</I>&gt;<i>    public class B : A {
</I>&gt;<i>        protected override string GetClassName() {
</I>&gt;<i>            return &quot;Class B&quot;;
</I>&gt;<i>        }
</I>&gt;<i>    }
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>   
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046145.html">[Mono-list] An inheritance dilemma
</A></li>
	<LI>Next message: <A HREF="046152.html">[Mono-list] An inheritance dilemma
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46147">[ date ]</a>
              <a href="thread.html#46147">[ thread ]</a>
              <a href="subject.html#46147">[ subject ]</a>
              <a href="author.html#46147">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
