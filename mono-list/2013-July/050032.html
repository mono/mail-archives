<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Using mod-mono from source
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Using%20mod-mono%20from%20source&In-Reply-To=%3CCAPbQ7cGjFR_VPm-h7F8ARLrpFWEikwMmo89rA8U9AA%3DHTFRnhA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="050031.html">
   <LINK REL="Next"  HREF="050037.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Using mod-mono from source</H1>
    <B>Mike Morano</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Using%20mod-mono%20from%20source&In-Reply-To=%3CCAPbQ7cGjFR_VPm-h7F8ARLrpFWEikwMmo89rA8U9AA%3DHTFRnhA%40mail.gmail.com%3E"
       TITLE="[Mono-list] Using mod-mono from source">mmorano at mikeandwan.us
       </A><BR>
    <I>Thu Jul  4 16:59:44 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="050031.html">[Mono-list] Using mod-mono from source
</A></li>
        <LI>Next message: <A HREF="050037.html">[Mono-list] Using mod-mono from source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50032">[ date ]</a>
              <a href="thread.html#50032">[ thread ]</a>
              <a href="subject.html#50032">[ subject ]</a>
              <a href="author.html#50032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I was doing something similar today - moving a working site to a different
machine (running a new fedora19 install).  Your issue sounds a bit
different from mine, but thought I'd send some of the things that caught me
when getting this up and running again in apache:

1) selinux - although I don't know what a good fix for this is, i had to
disable selinux.
  - edit /etc/selinux/config:  SELINUX=disabled
  - reboot (perhaps there is a way to reload the config if not done
manually, but my machine is not a production server)

2) mono prefix location
  - I compile all of mono to a unique prefix on my machine:  /opt/mono-3.0
  - When I ran apache, was getting issue where it could not find
libmonoPosixHelper.so.  To fix this, I did the following:
       a) cd /etc/ld.so.conf.d/
       b) echo '/opt/mono-3.0/lib' &gt; mod_mono.conf
       c) ldconfig
       d) systemctl restart httpd.service   (restart apache - not sure if
this is the same as what you would need to do on ubuntu)


In terms of permissions, I had previously made sure that the user that runs
apache has appropriate access to the directory structure hosting the site.
 On my system, that is the apache user/group.  Just make sure the directory
hosting the site and parent paths are accessible.

Also, I have a couple extra settings in my apache config, so perhaps take a
look at this in the mod_mono man pages to see if it helps:  MonoWapiDir,
MonoUnixSocket.  In particular, make sure apache has rw acess to the
location pointed to by MonoWapiDir.


After the above was completed, my site worked via apache on the new
machine.

Good luck,
Mike


On Wed, Jul 3, 2013 at 9:21 PM, Danny &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">dgortonii at gmail.com</A>&gt; wrote:

&gt;<i> No idea.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 07/03/2013 05:30 PM, Martin Thwaites wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Is this message not getting through? is it just that no one knows the
</I>&gt;&gt;<i> answer, can someone just send a simple &quot;No idea&quot; so I know this is
</I>&gt;&gt;<i> getting through.  It's the first time I've used the list.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Mon, Jul 1, 2013 at 9:49 PM, Martin Thwaites
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">monoforum at my2cents.co.uk</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">monoforum at my2cents.co.</A>**uk&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">monoforum at my2cents.co.uk</A>&gt;&gt;&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     I'm trying to get mono working from source so i can try and get some
</I>&gt;&gt;<i>     .net 4.5 website stuff working.  I'm using Ubuntu Server 13.04, and
</I>&gt;&gt;<i>     I followed this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     <A HREF="http://stackoverflow.com/**questions/13365158/installing-**mono-3-0&lt;http://stackoverflow.com/questions/13365158/installing-mono-3-0">http://stackoverflow.com/**questions/13365158/installing-**mono-3-0&lt;http://stackoverflow.com/questions/13365158/installing-mono-3-0</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Apart from the libgdiplus, I can get everything to compile, however,
</I>&gt;&gt;<i>     when I've installed mod_mono, I keep getting the following in the
</I>&gt;&gt;<i> log...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:57 2013] [error] Failed to connect to
</I>&gt;&gt;<i>     mod-mono-server after several attempts to spawn the process.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     I enable debug on the compile and got this in the logs..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] getting unix socket path
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Socket file name
</I>&gt;&gt;<i>     /tmp/mod_mono_server_**GalleryLive
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] try_connect: -1
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] After setup_socket
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] No backend found, will start a new
</I>&gt;&gt;<i>     copy.
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Acquiring the
</I>&gt;&gt;<i>     /tmp/mod_mono_dashboard_**GalleryLive_2.lock lock for backend start
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] config-&gt;servers [0]-&gt;dashboard ==
</I>&gt;&gt;<i> 0x0
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] config-&gt;servers [1]-&gt;dashboard ==
</I>&gt;&gt;<i>     0x7F2F61407000
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] xsp address 0x7f2f6599c6c8,
</I>&gt;&gt;<i>     dashboard 0x7f2f61407000
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] getting unix socket path
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Socket file name
</I>&gt;&gt;<i>     /tmp/mod_mono_server_**GalleryLive
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] try_connect: -1
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] backend cannot be connected to.
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Starting backend for alias
</I>&gt;&gt;<i> GalleryLive
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Applications: /:/var/www/gallery/
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Config file: (null)
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Config dir.: (null)
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Listen port: (null)
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Listen address: (null)
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Started new backend, sleeping 2s
</I>&gt;&gt;<i>     to let it configure
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] child started
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] PATH: /usr/local/bin:/usr/bin:/bin
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] serverdir: /usr/bin
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] PATH after:
</I>&gt;&gt;<i>     /usr/bin:/usr/local/bin:/usr/**bin:/bin
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] getting unix socket path
</I>&gt;&gt;<i>     [Mon Jul 01 21:20:55 2013] [warn] Backend socket path:
</I>&gt;&gt;<i>     /tmp/mod_mono_server_**GalleryLive
</I>&gt;&gt;<i>     Warning: unparsed command line arguments:
</I>&gt;&gt;<i>     /tmp/mod_mono_server_**GalleryLive /:/var/www/gallery/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     It seems there there is no &quot;/tmp/mod_mono_server_**GalleryLive&quot;
</I>&gt;&gt;<i> socket
</I>&gt;&gt;<i>     for it to connect to, so the error makes sense, but I can't see why
</I>&gt;&gt;<i>     this is the case.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     I can run mod-mono-server4 from the desired directory, and it seems
</I>&gt;&gt;<i>     to run fine.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     I've run sites using mod-mono from the repos before, but this is the
</I>&gt;&gt;<i>     first time I've compiled from source.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     vhost config is (this is also copied some a server using the repos
</I>&gt;&gt;<i>     and is working):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     &lt;VirtualHost *:80&gt;
</I>&gt;&gt;<i>              ServerAdmin <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">webmaster at localhost</A>
</I>&gt;&gt;<i>              ServerName gallery.internal.com &lt;<A HREF="http://gallery.internal.com">http://gallery.internal.com</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>              DocumentRoot /var/www/gallery/
</I>&gt;&gt;<i>              MonoServerPath GalleryLive &quot;/usr/bin/mod-mono-server4&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>              MonoApplications GalleryLive &quot;/:/var/www/gallery/&quot;
</I>&gt;&gt;<i>              &lt;Location &quot;/&quot;&gt;
</I>&gt;&gt;<i>                      Allow from all
</I>&gt;&gt;<i>                      Order allow,deny
</I>&gt;&gt;<i>                      MonoSetServerAlias GalleryLive
</I>&gt;&gt;<i>                      SetHandler mono
</I>&gt;&gt;<i>              &lt;/Location&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>              ErrorLog /var/log/apache2/error.log
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>              # Possible values include: debug, info, notice, warn,
</I>&gt;&gt;<i>     error, crit,
</I>&gt;&gt;<i>              # alert, emerg.
</I>&gt;&gt;<i>              LogLevel debug
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>              CustomLog /var/log/apache2/access.log combined
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     &lt;/VirtualHost&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     I'm thinking that this could be a permissions error somewhere, but
</I>&gt;&gt;<i>     I've run out of places to look.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Any ideas?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/**mailman/listinfo/mono-list&lt;http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/**mailman/listinfo/mono-list&lt;http://lists.ximian.com/mailman/listinfo/mono-list</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  ______________________________**_________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/**mailman/listinfo/mono-list&lt;http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/**mailman/listinfo/mono-list&lt;http://lists.ximian.com/mailman/listinfo/mono-list</A>&gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20130704/7ded61bb/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20130704/7ded61bb/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="050031.html">[Mono-list] Using mod-mono from source
</A></li>
	<LI>Next message: <A HREF="050037.html">[Mono-list] Using mod-mono from source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50032">[ date ]</a>
              <a href="thread.html#50032">[ thread ]</a>
              <a href="subject.html#50032">[ subject ]</a>
              <a href="author.html#50032">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
