<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Autofac 3.0.1 on Mono 3.0.5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Autofac%203.0.1%20on%20Mono%203.0.5&In-Reply-To=%3C512E0B71.4000401%40uci.ru.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="049620.html">
   <LINK REL="Next"  HREF="049623.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Autofac 3.0.1 on Mono 3.0.5</H1>
    <B>Erik Schierboom</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Autofac%203.0.1%20on%20Mono%203.0.5&In-Reply-To=%3C512E0B71.4000401%40uci.ru.nl%3E"
       TITLE="[Mono-list] Autofac 3.0.1 on Mono 3.0.5">e.schierboom at uci.ru.nl
       </A><BR>
    <I>Wed Feb 27 13:34:41 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="049620.html">[Mono-list]	System.Security.Policy.Evidence::GetHostEvidence&lt;[1]&gt;()
</A></li>
        <LI>Next message: <A HREF="049623.html">[Mono-list] Mono embedding with threads + multiple domains
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49630">[ date ]</a>
              <a href="thread.html#49630">[ thread ]</a>
              <a href="subject.html#49630">[ subject ]</a>
              <a href="author.html#49630">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have been trying to get Autofac 3.0.1 working on Mono, but have so far 
been unsuccessful. When I try to run an application that references 
Autofac 3.0.1 on Mono 3.0.5, I get the following exception:

     Mono: Assembly Loader probing location: 
'/opt/mono-3.0.5/lib/mono/4.5/mscorlib.dll'.
     Mono: Image addref mscorlib[0x14ce2c70] -&gt; 
/opt/mono-3.0.5/lib/mono/4.5/mscorlib.dll[0x14ce1ec0]: 2
     Mono: Assembly Loader probing location: 
'/opt/mono-3.0.5/lib/mono/4.5/mscorlib.dll'.
     Mono: Assembly Loader loaded assembly from location: 
'/opt/mono-3.0.5/lib/mono/4.5/mscorlib.dll'.
     Mono: Assembly mscorlib[0x14ce2c70] added to domain 
ConsoleApplication1.exe, ref_count=1
     Mono: Assembly Loader probing location: 'ConsoleApplication1.exe'.
     Mono: Image addref ConsoleApplication1[0x14d20230] -&gt; 
/var/www/sites/erik/monoconsole/ConsoleApplication1.exe[0x14d1f4a0]: 2
     Mono: Assembly ConsoleApplication1[0x14d20230] added to domain 
ConsoleApplication1.exe, ref_count=1
     Mono: Assembly Loader loaded assembly from location: 
'ConsoleApplication1.exe'.
     Mono: Assembly Loader probing location: 'ConsoleApplication1.exe'.
     Mono: Assembly Ref addref ConsoleApplication1[0x14d20230] -&gt; 
mscorlib[0x14ce2c70]: 2
     Mono: Assembly Loader probing location: 
'/var/www/sites/erik/monoconsole/Autofac.dll'.
     Mono: Image addref Autofac[0x14d269b0] -&gt; 
/var/www/sites/erik/monoconsole/Autofac.dll[0x14d25c40]: 2
     Mono: Assembly Autofac[0x14d269b0] added to domain 
ConsoleApplication1.exe, ref_count=1
     Mono: Assembly Loader loaded assembly from location: 
'/var/www/sites/erik/monoconsole/Autofac.dll'.
     Mono: Assembly Ref addref ConsoleApplication1[0x14d20230] -&gt; 
Autofac[0x14d269b0]: 2
     Mono: The request to load the retargetable assembly mscorlib 
v2.0.5.0 was remapped to mscorlib v4.0.0.0
     Mono: Assembly Ref addref Autofac[0x14d269b0] -&gt; 
mscorlib[0x14ce2c70]: 3
     Mono: The request to load the retargetable assembly System.Core 
v2.0.5.0 was remapped to System.Core v4.0.0.0
     Mono: Assembly Loader probing location: 
'/opt/mono-3.0.5/lib/mono/gac/System.Core/4.0.0.0__7cec85d7bea7798e/System.Core.dll'.
     Mono: Assembly Loader probing location: 
'/var/www/sites/erik/monoconsole/System.Core.dll'.
     Mono: Assembly Loader probing location: 
'/opt/mono-3.0.5/lib/System.Core.dll'.
     Mono: Assembly Loader probing location: 
'/opt/mono-3.0.5/lib/mono/gac/System.Core/4.0.0.0__7cec85d7bea7798e/System.Core.exe'.
     Mono: Assembly Loader probing location: 
'/var/www/sites/erik/monoconsole/System.Core.exe'.
     Mono: Assembly Loader probing location: 
'/opt/mono-3.0.5/lib/System.Core.exe'.
     Mono: The following assembly referenced from 
/var/www/sites/erik/monoconsole/Autofac.dll could not be loaded:
          Assembly:   System.Core    (assemblyref_index=1)
          Version:    2.0.5.0
          Public Key: 7cec85d7bea7798e
     The assembly was not found in the Global Assembly Cache, a path 
listed in the MONO_PATH environment variable, or in the location of the 
executing assembly (/var/www/sites/erik/monoconsole/).

     Mono: Failed to load assembly Autofac[0x14d269b0]

     Mono: Could not load file or assembly 'System.Core, 
Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e, 
Retargetable=Yes' or one of its dependencies.
     Missing method .ctor in assembly 
/var/www/sites/erik/monoconsole/Autofac.dll, type 
System.Runtime.CompilerServices.ExtensionAttribute
     Can't find custom attr constructor image: 
/var/www/sites/erik/monoconsole/Autofac.dll mtoken: 0x0a000015
     Hello!
     Mono: Unloading domain ConsoleApplication1.exe[0x2aaaab6f1cc0], 
assembly mscorlib[0x14ce2c70], ref_count=3
     Mono: Unloading domain ConsoleApplication1.exe[0x2aaaab6f1cc0], 
assembly ConsoleApplication1[0x14d20230], ref_count=1
     Mono: Unloading assembly ConsoleApplication1 [0x14d20230].
     Mono: Unloading image 
/var/www/sites/erik/monoconsole/ConsoleApplication1.exe [0x14d1f4a0].
     Mono: Unloading domain ConsoleApplication1.exe[0x2aaaab6f1cc0], 
assembly Autofac[0x14d269b0], ref_count=1
     Mono: Unloading assembly Autofac [0x14d269b0].
     Mono: Unloading image /var/www/sites/erik/monoconsole/Autofac.dll 
[0x14d25c40].
     Mono: Unloading assembly mscorlib [0x14ce2c70].
     Mono: Unloading image /opt/mono-3.0.5/lib/mono/4.5/mscorlib.dll 
[0x14ce1ec0].

There are several things to note. First, it appears that System.Core 
2.0.5.0 could not be loaded. Could this be due to Autofac 3.0.1 being a 
portable class library?

This problem also results in the second issue, where there is a Missing 
method .ctor in System.Runtime.CompilerServices.ExtensionAttribute. I 
have found some information about this problem, and it appears that this 
problem is due to the ExtensionAttribute class being moved from one DLL 
to another: 
<A HREF="http://www.lextm.com/2013/02/how-to-use-nuget-on-mono-part-iv.html">http://www.lextm.com/2013/02/how-to-use-nuget-on-mono-part-iv.html</A>

This problem can be reproduced as follows (see 
<A HREF="https://gist.github.com/ErikSchierboom/5047101">https://gist.github.com/ErikSchierboom/5047101</A>):

  1. Create a .NET 4.0 console application
  2. Add a reference to Autofac 3.0.1 (e.g. through NuGet)
  3. Create an instance of the `ContainerBuilder` class
  4. Build the console application
  5. Run the console application under Mono

Does anyone have an idea on how to solve this problem?
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="049620.html">[Mono-list]	System.Security.Policy.Evidence::GetHostEvidence&lt;[1]&gt;()
</A></li>
	<LI>Next message: <A HREF="049623.html">[Mono-list] Mono embedding with threads + multiple domains
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49630">[ date ]</a>
              <a href="thread.html#49630">[ thread ]</a>
              <a href="subject.html#49630">[ subject ]</a>
              <a href="author.html#49630">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
