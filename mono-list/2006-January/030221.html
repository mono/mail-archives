<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono scalability
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono%20scalability&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030205.html">
   <LINK REL="Next"  HREF="030223.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono scalability</H1>
    <B>Peng, Hao</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono%20scalability&In-Reply-To="
       TITLE="[Mono-list] Mono scalability">bacchusboy2000 at yahoo.com
       </A><BR>
    <I>Fri Jan  6 11:48:59 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="030205.html">[Mono-list] [ANN] Firebird ADO.NET Data Provider 2.0 Beta 3
	released.
</A></li>
        <LI>Next message: <A HREF="030223.html">[Mono-list] Mono scalability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30221">[ date ]</a>
              <a href="thread.html#30221">[ thread ]</a>
              <a href="subject.html#30221">[ subject ]</a>
              <a href="author.html#30221">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, 

Anyone has any suggestions to improve asp.net
applications scalability running Apache/Mono?

I have an application to migrate to Linux. I'm using
RHEL 4 AS i386/mono 1.1.10/mod-mono 1.1.10/apache
2.0.52. 
The hardware is PII 400 / 256M. (delibrately used this
low spec machine to force the application
optimisation)

I use VS.NET application centre test to simulate 50
users cocurrantly accessing the asp.net app, but it
constantly fails after 10 mins or so. With a small
user load (2-5) the application runs perfectly.
At the failing point, I found out mono processes are
spawn (using ps aux | grep mono). Two of them are in
the Ssl (Interruptible sleep) state and the others are
Z (zombies). The parent process of the zombie ones is
one of the Ssl

I also found that the unix sockets mod_mono_server is
using are also abnormal (using netstat an | grep
mono). About 50 sockets are connected but all the
others are trying to connect to somewhere but for some
reason they are hanging there eventually.

When MonoMaxMemory directive is applied in httpd.conf,
the problem is solved. The application runs under 50
users for 8 hours without any problem. But it is not
an ultimate solution as the mono server process will
be killed so the site user will still experience some
server down time.

It is a complex application, and I don't know where
exactly the problem is. So I can't post any source
code. Does anyone have any general guideline as for
the mono scalability? I saw in various forums that the
Garbage Collector is a bit problematic in Mono (or
Linux in general) but I don't know whether it is true.
If it's true, is there any improvement that I could do
non-programmatically? Is there any managed-code
improvement particularly needed for Mono? 

I know without the source code it's a bit difficult to
tell. But ANY suggestions (including how to precisely
locate the problematic code section, any profiler to
monitor the mono runtime for asp.net) will be greatly
appreciated.

Thanks very much


		
__________________________________________ 
Yahoo! DSL &#150; Something to write home about. 
Just $16.99/mo. or less. 
dsl.yahoo.com 

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030205.html">[Mono-list] [ANN] Firebird ADO.NET Data Provider 2.0 Beta 3
	released.
</A></li>
	<LI>Next message: <A HREF="030223.html">[Mono-list] Mono scalability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30221">[ date ]</a>
              <a href="thread.html#30221">[ thread ]</a>
              <a href="subject.html#30221">[ subject ]</a>
              <a href="author.html#30221">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
