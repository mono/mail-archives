<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono.Data.SqliteClient fixes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono.Data.SqliteClient%20fixes&In-Reply-To=1135874599.7086.749.camel%40linux.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030145.html">
   <LINK REL="Next"  HREF="030152.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono.Data.SqliteClient fixes</H1>
    <B>Joshua Tauberer</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono.Data.SqliteClient%20fixes&In-Reply-To=1135874599.7086.749.camel%40linux.site"
       TITLE="[Mono-list] Mono.Data.SqliteClient fixes">tauberer at for.net
       </A><BR>
    <I>Mon Jan  2 14:39:45 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="030145.html">[Mono-list] Running Mono from a location specified by a UNC
</A></li>
        <LI>Next message: <A HREF="030152.html">[Mono-list] gacutil -i  (am I doing something wrong?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30146">[ date ]</a>
              <a href="thread.html#30146">[ thread ]</a>
              <a href="subject.html#30146">[ subject ]</a>
              <a href="author.html#30146">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've gone ahead and committed a bunch of fixes for Sqlite client, 
addressing:

Julien Sobrier wrote on Dec. 13:
&gt;<i> I opened the bug 76986.
</I>&gt;<i> With sqlite 3 and  Mono.Data.SqliteClient, GetDataTypeName always return
</I>&gt;<i> &quot;text&quot;, even for fields declared as Integer.
</I>
This is fixed.  (For reference, Sqlite 2 treats everything as strings so 
it's only possible with ver 3.)

Duncan McQueen wrote on Dec. 3:
 &gt; The database is a version 3 table.  However, the datetime values
 &gt; returned are not returned as datetime values in the Schema.  The
 &gt; alternative Finisar.SQLite implementation does do this correctly.

For Sqlite 3, INT and INTEGER columns are now returned as ints (rather 
than longs), and DATE and DATETIME columns are now returned as DateTime 
structs rather than strings (using DateTime.Parse).  But with Sqlite the 
best thing to do is probably to avoid casting GetValue() and stick with 
GetInt32, etc.

Daniel Drake wrote on Nov. 29:
 &gt; The sqlite API can return BUSY in some locking-related situations, but
 &gt; this wasn't being handled appropriately, and strange things would happen.

SqliteBusyException is now thrown whenever business is encountered, but 
I couldn't test this because I don't know how to lock a table...

Your patch also had changes to SqliteDataReader so that the entire 
result set didn't have to be held in memory -- that would still be nice 
to get in (although your patch probably won't work anymore).

Ecmel Ercan wrote on Nov. 29:
 &gt; I am trying to use the Mono.Data.SqliteClient with sqlite3 but can not
 &gt; execute more than one SQL command in a single CommandText:

This had to do with preparing all the statements first and then 
executing them later, which isn't possible when tables are 
created/modified.  Now the statements are prepared right before they're 
executed, fixing this.

There was also a bugzilla entry about 
SqliteConnection.BeginTransaction(IsolationLevel) returning null instead 
of throwing an exception.

It'd be great if anyone using the Sqlite client could try it out now 
since I had to muck with it quite a bit to fix the issue Ecmel raised.

-- 
- Joshua Tauberer

<A HREF="http://taubz.for.net">http://taubz.for.net</A>

** Nothing Unreal Exists **


</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030145.html">[Mono-list] Running Mono from a location specified by a UNC
</A></li>
	<LI>Next message: <A HREF="030152.html">[Mono-list] gacutil -i  (am I doing something wrong?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30146">[ date ]</a>
              <a href="thread.html#30146">[ thread ]</a>
              <a href="subject.html#30146">[ subject ]</a>
              <a href="author.html#30146">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
