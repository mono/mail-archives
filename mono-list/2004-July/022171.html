<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] WebService, SessionState and CookieContainer.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:beniniva%40csr.unibo.it">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="022170.html">
   <LINK REL="Next"  HREF="022172.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] WebService, SessionState and CookieContainer.
   </H1>
    <B>beniniva@csr.unibo.it
    </B> 
    <A HREF="mailto:beniniva%40csr.unibo.it"
       TITLE="[Mono-list] WebService, SessionState and CookieContainer.">beniniva@csr.unibo.it
       </A><BR>
    <I>Fri, 16 Jul 2004 10:14:33 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="022170.html">[Mono-list] Strict evaluation
</A></li>
        <LI> Next message: <A HREF="022172.html">[Mono-list] WebService, SessionState and CookieContainer.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22171">[ date ]</a>
              <a href="thread.html#22171">[ thread ]</a>
              <a href="subject.html#22171">[ subject ]</a>
              <a href="author.html#22171">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This message is in MIME format.

---MOQ1089965673ac38c293467cfc7c7c3352c9443cd36e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit

Hi,

I try to run a simple example of stateful web service. This example run well on
windows with Explorer and IIS but no on Mono with mod_mono+Apache, why?

In order to maintain stateful communication between a client application and a
server application,I use session objects and the cookie container.
On the Server I must explicitly enable session support for each Web service
method that requires a session state ( [WebMethod ( EnableSession = true )] )
On the Client application, I use cookie http with
System.Web.SessionState.HttpSessionState and System.Net.CookieContainer
classes.
When the web service method uses a session state, a cookie is passed back to
the Web Service client in the response header. 
That cookie uniquely identifies the session for that Web Service client.
To receive that cookie for the web service client, a new instance of
CookieContainer must be created and then assigned to the CookieContainer
property before the Web service method is called.
This make sure that the cookie is correctly included in subsequent requests. 
I must do this because I must store the cookies that are received in the session
state for future retrieval by the session.

The Web services code is: Contatore.asmx.cs
The client application code is: CounterCLI.aspx.cs

Could anybody help me please?

Thanks a lot,

Valentina.

---MOQ1089965673ac38c293467cfc7c7c3352c9443cd36e
Content-Type: text/richtext; name=&quot;Contatore.asmx.cs&quot;
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=&quot;Contatore.asmx.cs&quot;

e1xydGYxXGFuc2lcYW5zaWNwZzEyNTJcZGVmZjBcZGVmbGFuZzEwNDBcZGVmdGFiNzA4e1xmb250
dGJse1xmMFxmbW9kZXJuXGZjaGFyc2V0MCBDb3VyaWVyIE5ldzt9e1xmMVxmcm9tYW5cZmNoYXJz
ZXQwIFRpbWVzIE5ldyBSb21hbjt9fQ0Ke1xjb2xvcnRibCA7XHJlZDBcZ3JlZW4wXGJsdWUyNTU7
XHJlZDEyN1xncmVlbjEyN1xibHVlMTI3O1xyZWQwXGdyZWVuMTI3XGJsdWUwO30NCntcKlxnZW5l
cmF0b3IgTXNmdGVkaXQgNS40MS4xNS4xNTAzO31cdmlld2tpbmQ0XHVjMVxwYXJkXGNmMVxsYW5n
MjA1N1xmMFxmczIwIHVzaW5nXGNmMCAgU3lzdGVtO1xwYXINClxjZjEgdXNpbmdcY2YwICBTeXN0
ZW0uQ29sbGVjdGlvbnM7XHBhcg0KXGNmMSB1c2luZ1xjZjAgIFN5c3RlbS5Db21wb25lbnRNb2Rl
bDtccGFyDQpcY2YxIHVzaW5nXGNmMCAgU3lzdGVtLkRhdGE7XHBhcg0KXGNmMSB1c2luZ1xjZjAg
IFN5c3RlbS5EaWFnbm9zdGljcztccGFyDQpcY2YxIHVzaW5nXGNmMCAgU3lzdGVtLldlYjtccGFy
DQpcY2YxIHVzaW5nXGNmMCAgU3lzdGVtLldlYi5TZXJ2aWNlcztccGFyDQpccGFyDQpcY2YxIG5h
bWVzcGFjZVxjZjAgIENvbnRhdG9yZVxwYXINClx7XHBhcg0KXHRhYlxjZjJccGFyDQpcY2YwXHRh
YlxjZjEgcHVibGljXGNmMCAgXGNmMSBjbGFzc1xjZjAgIFNlcnZpY2UxIDogU3lzdGVtLldlYi5T
ZXJ2aWNlcy5XZWJTZXJ2aWNlXHBhcg0KXHRhYlx7XHBhcg0KXHRhYlx0YWJcY2YxIHB1YmxpY1xj
ZjAgIFNlcnZpY2UxKClccGFyDQpcdGFiXHRhYlx7XHBhcg0KXHRhYlx0YWJcdGFiXGNmM1xwYXIN
ClxjZjBcdGFiXHRhYlx0YWIgSW5pdGlhbGl6ZUNvbXBvbmVudCgpO1xwYXINClx0YWJcdGFiXH1c
cGFyDQpccGFyDQpcY2YxXHRhYlx0YWIgI3JlZ2lvblxjZjAgIENvbXBvbmVudCBEZXNpZ25lciBn
ZW5lcmF0ZWQgY29kZVxwYXINClx0YWJcdGFiXHBhcg0KXHRhYlx0YWJcY2YzXHBhcg0KXGNmMFx0
YWJcdGFiXGNmMSBwcml2YXRlXGNmMCAgSUNvbnRhaW5lciBjb21wb25lbnRzID0gXGNmMSBudWxs
XGNmMCA7XHBhcg0KXHRhYlx0YWJcdGFiXHRhYlxwYXINClx0YWJcdGFiXGNmMlxwYXINClxjZjBc
dGFiXHRhYlxjZjEgcHJpdmF0ZVxjZjAgIFxjZjEgdm9pZFxjZjAgIEluaXRpYWxpemVDb21wb25l
bnQoKVxwYXINClx0YWJcdGFiXHtccGFyDQpcdGFiXHRhYlx9XHBhcg0KXHBhcg0KXHRhYlx0YWJc
Y2YyXHBhcg0KXGNmMFx0YWJcdGFiXGNmMSBwcm90ZWN0ZWRcY2YwICBcY2YxIG92ZXJyaWRlXGNm
MCAgXGNmMSB2b2lkXGNmMCAgRGlzcG9zZSggXGNmMSBib29sXGNmMCAgZGlzcG9zaW5nIClccGFy
DQpcdGFiXHRhYlxsYW5nMTA0MFx7XHBhcg0KXHRhYlx0YWJcdGFiXGNmMSBpZlxjZjAgKGRpc3Bv
c2luZyAmJiBjb21wb25lbnRzICE9IFxjZjEgbnVsbFxjZjAgKVxwYXINClx0YWJcdGFiXHRhYlx7
XHBhcg0KXHRhYlx0YWJcdGFiXHRhYiBjb21wb25lbnRzLkRpc3Bvc2UoKTtccGFyDQpcdGFiXHRh
Ylx0YWJcfVxwYXINClx0YWJcdGFiXHRhYlxjZjEgYmFzZVxjZjAgLkRpc3Bvc2UoZGlzcG9zaW5n
KTtcdGFiXHRhYlxwYXINClx0YWJcdGFiXGxhbmcyMDU3XH1ccGFyDQpcdGFiXHRhYlxwYXINClxj
ZjFcdGFiXHRhYiAjZW5kcmVnaW9uXHBhcg0KXHBhcg0KXGNmMFx0YWJcdGFiXHBhcg0KXHRhYlx0
YWJccGFyDQpcdGFiXHRhYiBbIFdlYk1ldGhvZChEZXNjcmlwdGlvbj0iUGVyIHNlc3Npb24gSGl0
IENvdW50ZXIiLEVuYWJsZVNlc3Npb249XGNmMSB0cnVlXGNmMCApXVxwYXINClx0YWJcdGFiXGNm
MSBwdWJsaWNcY2YwICBcY2YxIGludFxjZjAgIFNlc3Npb25IaXRDb3VudGVyKCkgXHBhcg0KXHRh
Ylx0YWJce1xwYXINClx0YWJcdGFiXHRhYlxjZjEgaWZcY2YwICAoU2Vzc2lvblsiSGl0Q291bnRl
ciJdID09IFxjZjEgbnVsbFxjZjAgKSBccGFyDQpcdGFiXHRhYlx0YWJce1xwYXINClx0YWJcdGFi
XHRhYlx0YWIgU2Vzc2lvblsiSGl0Q291bnRlciJdID0gMTtccGFyDQpcdGFiXHRhYlx0YWJcfVxw
YXINClx0YWJcdGFiXHRhYlxjZjEgZWxzZVxjZjAgIFxwYXINClx0YWJcdGFiXHRhYlx7XHBhcg0K
XHRhYlx0YWJcdGFiXHRhYiBTZXNzaW9uWyJIaXRDb3VudGVyIl0gPSAoKFxjZjEgaW50XGNmMCAp
IFNlc3Npb25bIkhpdENvdW50ZXIiXSkgKyAxO1xwYXINClx0YWJcdGFiXHRhYlxsYW5nMTA0MFx9
XHBhcg0KXHRhYlx0YWJcdGFiXGNmMSByZXR1cm5cY2YwICAoKFxjZjEgaW50XGNmMCApIFNlc3Np
b25bIkhpdENvdW50ZXIiXSk7XHBhcg0KXHRhYlx0YWJcfSAgIFxwYXINClx0YWJcfVxwYXINClx9
XHBhcg0KXHBhcg0KXHBhcg0KXGYxXGZzMjRccGFyDQp9DQoA

---MOQ1089965673ac38c293467cfc7c7c3352c9443cd36e
Content-Type: text/richtext; name=&quot;CounterCLI.aspx.cs&quot;
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=&quot;CounterCLI.aspx.cs&quot;

e1xydGYxXGFuc2lcYW5zaWNwZzEyNTJcZGVmZjBcZGVmbGFuZzEwNDBcZGVmdGFiNzA4e1xmb250
dGJse1xmMFxmbW9kZXJuXGZjaGFyc2V0MCBDb3VyaWVyIE5ldzt9e1xmMVxmcm9tYW5cZmNoYXJz
ZXQwIFRpbWVzIE5ldyBSb21hbjt9fQ0Ke1xjb2xvcnRibCA7XHJlZDBcZ3JlZW4wXGJsdWUyNTU7
XHJlZDEyN1xncmVlbjEyN1xibHVlMTI3O1xyZWQwXGdyZWVuMTI3XGJsdWUwO30NCntcKlxnZW5l
cmF0b3IgTXNmdGVkaXQgNS40MS4xNS4xNTAzO31cdmlld2tpbmQ0XHVjMVxwYXJkXGNmMVxsYW5n
MjA1N1xmMFxmczIwIHVzaW5nXGNmMCAgU3lzdGVtO1xwYXINClxjZjEgdXNpbmdcY2YwICBTeXN0
ZW0uQ29sbGVjdGlvbnM7XHBhcg0KXGNmMSB1c2luZ1xjZjAgIFN5c3RlbS5Db21wb25lbnRNb2Rl
bDtccGFyDQpcY2YxIHVzaW5nXGNmMCAgU3lzdGVtLkRhdGE7XHBhcg0KXGNmMSB1c2luZ1xjZjAg
IFN5c3RlbS5EcmF3aW5nO1xwYXINClxjZjEgdXNpbmdcY2YwICBTeXN0ZW0uV2ViO1xwYXINClxj
ZjEgdXNpbmdcY2YwICBTeXN0ZW0uV2ViLlNlc3Npb25TdGF0ZTtccGFyDQpcY2YxIHVzaW5nXGNm
MCAgU3lzdGVtLldlYi5VSTtccGFyDQpcY2YxIHVzaW5nXGNmMCAgU3lzdGVtLldlYi5VSS5XZWJD
b250cm9scztccGFyDQpcY2YxIHVzaW5nXGNmMCAgU3lzdGVtLldlYi5VSS5IdG1sQ29udHJvbHM7
XHBhcg0KXGNmMSB1c2luZ1xjZjAgIFN5c3RlbS5OZXQ7XHBhcg0KXHBhcg0KXGNmMSBuYW1lc3Bh
Y2VcY2YwICBDb3VudGVyQ0xJXHBhcg0KXHtccGFyDQpcdGFiXGNmMlxwYXINClxjZjBcdGFiXGNm
MSBwdWJsaWNcY2YwICBcY2YxIGNsYXNzXGNmMCAgV2ViRm9ybTEgOiBTeXN0ZW0uV2ViLlVJLlBh
Z2VccGFyDQpcdGFiXHtccGFyDQpcdGFiXHRhYlxjZjEgcHJvdGVjdGVkXGNmMCAgU3lzdGVtLldl
Yi5VSS5XZWJDb250cm9scy5MYWJlbCBMYWJlbDE7XHBhcg0KXHRhYlx0YWJcY2YxIHByb3RlY3Rl
ZFxjZjAgIFN5c3RlbS5XZWIuVUkuV2ViQ29udHJvbHMuQnV0dG9uIEJ1dHRvbjE7XHBhcg0KXHRh
YlxwYXINClx0YWJcdGFiXGNmMyAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgYSBwcm94eSBj
bGFzcyBmb3IgeW91ciBYTUwgV2ViIHNlcnZpY2UuXHBhcg0KXGNmMFx0YWJcdGFiXGNmMSBwcml2
YXRlXGNmMCAgU2VydmVyVXNhZ2UuU2VydmljZTEgc3UgPSBcY2YxIG5ld1xjZjAgIFNlcnZlclVz
YWdlLlNlcnZpY2UxKCk7XHBhcg0KXHRhYlx0YWJcY2YxIHByaXZhdGVcY2YwICBDb29raWVDb250
YWluZXIgY29va2llSmFyO1xwYXINClxwYXINClxwYXINClx0YWJcdGFiXGNmMSBwcml2YXRlXGNm
MCAgXGNmMSB2b2lkXGNmMCAgUGFnZV9Mb2FkKFxjZjEgb2JqZWN0XGNmMCAgc2VuZGVyLCBTeXN0
ZW0uRXZlbnRBcmdzIGUpXHBhcg0KXHRhYlx0YWJce1xwYXINClx0YWJcdGFiXHRhYlxjZjMgLy8g
UHV0IHVzZXIgY29kZSB0byBpbml0aWFsaXplIHRoZSBwYWdlIGhlcmVccGFyDQpcY2YwXHRhYlx0
YWJcfVxwYXINClxwYXINClxjZjFcdGFiXHRhYiAjcmVnaW9uXGNmMCAgV2ViIEZvcm0gRGVzaWdu
ZXIgZ2VuZXJhdGVkIGNvZGVccGFyDQpcdGFiXHRhYlxjZjEgb3ZlcnJpZGVcY2YwICBcY2YxIHBy
b3RlY3RlZFxjZjAgIFxjZjEgdm9pZFxjZjAgIE9uSW5pdChFdmVudEFyZ3MgZSlccGFyDQpcdGFi
XHRhYlx7XHBhcg0KXHRhYlx0YWJcdGFiXGNmM1xwYXINClxjZjBcdGFiXHRhYlx0YWIgSW5pdGlh
bGl6ZUNvbXBvbmVudCgpO1xwYXINClx0YWJcdGFiXHRhYlxjZjEgYmFzZVxjZjAgLk9uSW5pdChl
KTtccGFyDQpcdGFiXHRhYlx9XHBhcg0KXHRhYlx0YWJccGFyDQpcdGFiXHRhYlxjZjJccGFyDQpc
Y2YwXHRhYlx0YWJcY2YxIHByaXZhdGVcY2YwICBcY2YxIHZvaWRcY2YwICBJbml0aWFsaXplQ29t
cG9uZW50KClccGFyDQpcdGFiXHRhYlx7ICAgIFxwYXINClx0YWJcdGFiXHRhYlxjZjEgdGhpc1xj
ZjAgLkJ1dHRvbjEuQ2xpY2sgKz0gXGNmMSBuZXdcY2YwICBTeXN0ZW0uRXZlbnRIYW5kbGVyKFxj
ZjEgdGhpc1xjZjAgLkJ1dHRvbjFfQ2xpY2spO1xwYXINClx0YWJcdGFiXHRhYlxjZjEgdGhpc1xj
ZjAgLkxvYWQgKz0gXGNmMSBuZXdcY2YwICBTeXN0ZW0uRXZlbnRIYW5kbGVyKFxjZjEgdGhpc1xj
ZjAgLlBhZ2VfTG9hZCk7XHBhcg0KXHBhcg0KXHRhYlx0YWJcbGFuZzEwNDBcfVxwYXINClxjZjFc
dGFiXHRhYlxsYW5nMjA1NyAjZW5kcmVnaW9uXHBhcg0KXHBhcg0KXGNmMFx0YWJcdGFiXGNmMSBw
cml2YXRlXGNmMCAgXGNmMSB2b2lkXGNmMCAgQnV0dG9uMV9DbGljayhcY2YxIG9iamVjdFxjZjAg
IHNlbmRlciwgU3lzdGVtLkV2ZW50QXJncyBlKVxwYXINClx0YWJcdGFiXHtccGFyDQpcdGFiXHRh
YlxwYXINClx0YWJcdGFiXHRhYlxwYXINClx0YWJcdGFiXHRhYlxjZjMgLy8gQ2hlY2sgdG8gc2Vl
IGlmIHRoZSBjb29raWVzIGhhdmUgYWxyZWFkeSBiZWVuIHNhdmVkIGZvciB0aGlzIHNlc3Npb24u
XHBhcg0KXGNmMFx0YWJcdGFiXHRhYlxjZjEgaWZcY2YwICAoU2Vzc2lvblsiQ29va2llSmFyIl0g
PT0gXGNmMSBudWxsXGNmMCApIFxwYXINClx0YWJcdGFiXHRhYlx0YWIgY29va2llSmFyPSBcY2Yx
IG5ld1xjZjAgIENvb2tpZUNvbnRhaW5lcigpO1xwYXINClx0YWJcdGFiXHRhYlxjZjEgZWxzZVxw
YXINClxjZjBcdGFiXHRhYlx0YWJcdGFiIGNvb2tpZUphciA9IChDb29raWVDb250YWluZXIpIFNl
c3Npb25bIkNvb2tpZUphciJdO1xwYXINClxwYXINClx0YWJcdGFiXHRhYlxjZjMgLy8gQXNzaWdu
IHRoZSBDb29raWVDb250YWluZXIgdG8gdGhlIHByb3h5IGNsYXNzLlxwYXINClxjZjBcdGFiXHRh
Ylx0YWIgc3UuQ29va2llQ29udGFpbmVyID0gY29va2llSmFyO1xwYXINClxwYXINClx0YWJcdGFi
XHRhYlxjZjMgLy8gSW52b2tlIGFuIFhNTCBXZWIgc2VydmljZSBtZXRob2QgdGhhdCB1c2VzIHNl
c3Npb24gc3RhdGUgYW5kIHRodXMgY29va2llcy5ccGFyDQpcY2YwXHRhYlx0YWJcdGFiXGNmMSBp
bnRcY2YwICBjb3VudCA9IHN1LlNlc3Npb25IaXRDb3VudGVyKCk7ICAgICAgICAgXHBhcg0KXHBh
cg0KXHRhYlx0YWJcdGFiXGNmMyAvLyBTdG9yZSB0aGUgY29va2llcyByZWNlaXZlZCBpbiB0aGUg
c2Vzc2lvbiBzdGF0ZSBmb3IgZnV0dXJlIHJldHJpZXZhbCBieSB0aGlzIHNlc3Npb24uXHBhcg0K
XGNmMFx0YWJcdGFiXHRhYiBTZXNzaW9uWyJDb29raWVKYXIiXSA9IGNvb2tpZUphcjtccGFyDQpc
cGFyDQpcdGFiXHRhYlx0YWJcY2YzIC8vIFBvcHVsYXRlIHRoZSB0ZXh0IGJveCB3aXRoIHRoZSBy
ZXN1bHRzIGZyb20gdGhlIGNhbGwgdG8gdGhlIFhNTCBXZWIgc2VydmljZSBtZXRob2QuXHBhcg0K
XGNmMFx0YWJcdGFiXHRhYlxsYW5nMTA0MCBMYWJlbDEuVGV4dCA9IGNvdW50LlRvU3RyaW5nKCk7
ICBccGFyDQpcdGFiXHRhYlxwYXINClxwYXINClx0YWJcdGFiXH1ccGFyDQpcdGFiXH1ccGFyDQpc
fVxwYXINClxmMVxmczI0XHBhcg0KfQ0KAA==

---MOQ1089965673ac38c293467cfc7c7c3352c9443cd36e--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="022170.html">[Mono-list] Strict evaluation
</A></li>
	<LI> Next message: <A HREF="022172.html">[Mono-list] WebService, SessionState and CookieContainer.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22171">[ date ]</a>
              <a href="thread.html#22171">[ thread ]</a>
              <a href="subject.html#22171">[ subject ]</a>
              <a href="author.html#22171">[ author ]</a>
         </LI>
       </UL>
</body></html>
