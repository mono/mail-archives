<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] anyone got bDataAdapter.Fill Method work?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:sUmadevi%40novell.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="022084.html">
   <LINK REL="Next"  HREF="022079.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] anyone got bDataAdapter.Fill Method work?
   </H1>
    <B>S Umadevi
    </B> 
    <A HREF="mailto:sUmadevi%40novell.com"
       TITLE="[Mono-list] anyone got bDataAdapter.Fill Method work?">sUmadevi@novell.com
       </A><BR>
    <I>Mon, 12 Jul 2004 22:59:30 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="022084.html">[Mono-list] Re: Bootstrapping
</A></li>
        <LI> Next message: <A HREF="022079.html">[Mono-list] anyone got bDataAdapter.Fill Method work?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22072">[ date ]</a>
              <a href="thread.html#22072">[ thread ]</a>
              <a href="subject.html#22072">[ subject ]</a>
              <a href="author.html#22072">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Denis/Igor
Does Test2 and Test3 below work?
Also can you send me the the database table schema ( for the table you
are querying), along with the values in the  first row.

Would also be useful if you can send the enitre stack trace of the
exception below..

Regards
Uma

&gt;&gt;&gt;<i> Dennis Boylan &lt;<A HREF="mailto:mono@b-lan.com">mono@b-lan.com</A>&gt; 7/13/2004 2:52:28 AM &gt;&gt;&gt;
</I>I'm trying to chase this down myself.  I've got a .NET application
which
runs fine under the Microsoft runtime, but I get a:

System.Data.SqlClient.SqlException: Error converting data type nvarchar
to tinyint.

while trying to run the same application under mono.

I thought it was fill as well because the traceback looks like this:

in &lt;0x00058&gt; (wrapper remoting-invoke-with-check)
System.Data.Common.DbDataAdapter:Fill (System.Data.DataTable)
in [0x00092] (at /home/dennis/Dev/new/DbLayer/Network.cs:1070)
IA.DbLayer.DBNetwork:GetDTNetwork (int)

Where GetDTNetwork is trying to fill a DataTable with the values from
a
MS SQL database on a remote machine.  It is the last part of my
application
code before it gets lost in the weeds.

I thought it might be because the table was empty, so I wrote a little
standalone app to test it.  The standalone app works.

My first test was trying it without using my stored procedure.  It was
called test2.  The second uses a stored procedure like the application
normally does.  It was called test3.

These were my best approximations of what the code at the location was
trying to do.  The real code hides the type of database, so direct
examples
would not be all that useful.

Now, mind you, I'm trying this on the bleeding edge.
[<A HREF="mailto:dennis@Shuttle">dennis@Shuttle</A> test]$ mono -V
Mono JIT compiler version 1.0.20040712, (C) 2002-2004 Novell, Inc and
Contributors. www.go-mono.com 
        TLS:           __thread
        GC:            Included Boehm (with typed GC)
        SIGSEGV      : normal
        Globalization: ICU

- Dennis

-- test2.cs --

 using System;
 using System.Data;
 using System.Data.Common;
 using System.Data.SqlClient;

 public class Test
 {
     public static void Main(string[] args)
     {
        string connectionString =
              &quot;Address=hp,1434;&quot; +
              &quot;Database=Linux;&quot; +
              &quot;User ID=test;&quot; +
              &quot;Password=test;&quot;;
        IDbConnection dbcon;
        dbcon = new SqlConnection(connectionString);
        dbcon.Open();
        IDbCommand dbcmd = dbcon.CreateCommand();
        string sql = &quot;SELECT Name, Parent &quot; +
	             &quot;FROM Network&quot;;
        dbcmd.CommandText = sql;
        DataTable dtNtwk = new DataTable(&quot;Network&quot;);
        DbDataAdapter dbAdptr = new SqlDataAdapter((SqlCommand)dbcmd);
        int iRows = dbAdptr.Fill(dtNtwk);
	Console.WriteLine (&quot;Returned &quot; + iRows + &quot; rows&quot;);
        dbcon.Close();
        dbcon = null;
    }
}

-- test3.cs --
 using System;
 using System.Data;
 using System.Data.Common;
 using System.Data.SqlClient;

 public class Test
 {
     public static void Main(string[] args)
     {
        string connectionString =
              &quot;Address=hp,1434;&quot; +
              &quot;Database=Linux;&quot; +
              &quot;User ID=test;&quot; +
              &quot;Password=test;&quot;;
        IDbConnection dbcon;
        dbcon = new SqlConnection(connectionString);
        dbcon.Open();
        IDbCommand dbcmd = new SqlCommand(&quot;GetNtwkNEType&quot;,
(SqlConnection)dbcon);
	dbcmd.CommandType = CommandType.StoredProcedure;
	IDataParameter param =
((SqlCommand)dbcmd).Parameters.Add(&quot;@AddrType&quot;, SqlDbType.TinyInt);
	param.Direction = ParameterDirection.Input;
	param.Value = 0;
        DataTable dtNtwk = new DataTable(&quot;Network&quot;);
        DbDataAdapter dbAdptr = new SqlDataAdapter((SqlCommand)dbcmd);
        int iRows = dbAdptr.Fill(dtNtwk);
	Console.WriteLine (&quot;Returned &quot; + iRows + &quot; rows&quot;);
        dbcon.Close();
        dbcon = null;
    }
}


On Mon, Jul 12, 2004 at 08:40:05PM +0300, Igor Georgiev wrote:
&gt;<i> anyone got DbDataAdapter.Fill Method work?
</I>&gt;<i> I need to deploy working .NET web application to apache/xsp/mono,
</I>&gt;<i> but unfortunately i always get an empty dataset :((
</I>&gt;<i> 
</I>&gt;<i> ExecuteScalar &amp; ExecuteReader works for me,  so as a last resort
</I>&gt;<i> i'll rewrite the data access components to fill dataset by hand :(((
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I think it's a bug so i submit a report,
</I>&gt;<i> but i'm very intersted does anyone get it work?
</I>&gt;<i> If yes pls notify me urgent because i have a deadline to do the work
</I>.
&gt;<i> 
</I>&gt;<i> ----- here is the copy of my bug report ----
</I>&gt;<i> odbcDataAdapter.Fill(DataSet) doesn't work for me
</I>&gt;<i> 
</I>&gt;<i> Steps to reproduce the problem:
</I>&gt;<i> 1. create odbcDataAdapter that select something from database
</I>&gt;<i> 2. generate named/typed dataset /i'm using VS2003.NET /
</I>&gt;<i> 3. fill dataset
</I>&gt;<i> 
</I>&gt;<i> Actual Results:
</I>&gt;<i> dataset is empty
</I>&gt;<i> 
</I>&gt;<i> Expected Results:
</I>&gt;<i> Data in the dataset
</I>&gt;<i> 
</I>&gt;<i> How often does this happen? 
</I>&gt;<i> Always
</I>&gt;<i> 
</I>&gt;<i> Additional Information:
</I>&gt;<i> Code work fine in .NET framework
</I>&gt;<i> -----
</I>&gt;<i> also i try public int Fill( DataTable dataTable); - same result :(((
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ---
</I>&gt;<i> Outgoing mail is certified Virus Free.
</I>&gt;<i> Checked by AVG anti-virus system (<A HREF="http://www.grisoft.com">http://www.grisoft.com</A>).
</I>&gt;<i> Version: 6.0.718 / Virus Database: 474 - Release Date: 09.07.2004
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A> 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A> 
</I>_______________________________________________
Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A> 
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="022084.html">[Mono-list] Re: Bootstrapping
</A></li>
	<LI> Next message: <A HREF="022079.html">[Mono-list] anyone got bDataAdapter.Fill Method work?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22072">[ date ]</a>
              <a href="thread.html#22072">[ thread ]</a>
              <a href="subject.html#22072">[ subject ]</a>
              <a href="author.html#22072">[ author ]</a>
         </LI>
       </UL>
</body></html>
