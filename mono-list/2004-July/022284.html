<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Problem with XmlTextReader
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:atsushi%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="022282.html">
   <LINK REL="Next"  HREF="022188.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Problem with XmlTextReader
   </H1>
    <B>Atsushi Eno
    </B> 
    <A HREF="mailto:atsushi%40ximian.com"
       TITLE="[Mono-list] Problem with XmlTextReader">atsushi@ximian.com
       </A><BR>
    <I>Wed, 21 Jul 2004 13:09:14 +0900</I>
    <P><UL>
        <LI> Previous message: <A HREF="022282.html">[Mono-list] Problem with XmlTextReader
</A></li>
        <LI> Next message: <A HREF="022188.html">[Mono-list] Problem with XmlTextReader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22284">[ date ]</a>
              <a href="thread.html#22284">[ thread ]</a>
              <a href="subject.html#22284">[ subject ]</a>
              <a href="author.html#22284">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

 &gt; Thanks for answering my question. but the problem is that i
 &gt; feel the XmlTextReader, just reads to the end of the stream
 &gt; when it is instantiated (thats why it takes so long to instantiate)
 &gt; and keeps this in memory. Then when the client asks for a Read()
 &gt; he just gives the next element or whatever. Shouldn't the parser
 &gt; be reading off the stream when the client gives a Read()?

In short, no. It is impossible.

I have one easy answer: for such TextReader whose CanSeek
is false (can not Peek()), we will have to cache the peek character
anyways. It have to continue reading until it encounters '&lt;', but
you won't send the next '&lt;foo&gt;' element. Thus, such &quot;wait &amp; see&quot;
way won't work anyways.


Another complicated case: Suppose you are going to read such XML
document like:

	&lt;!DOCTYPE foo SYSTEM &quot;foo.dtd&quot;&gt;
	&lt;root&gt;
	&amp;amp; &amp;quot; &amp;apos; &amp;lt; &amp;gt; are character entity.
	external &amp;ent; &amp;amp; &amp;not; are defined in foo.dtd.
	&lt;/root&gt;

There general entity &quot;ent&quot; and &quot;not&quot; are defined in foo.dtd.

When you call the third Read(), then XmlTextReader tries to
read the text node inside root element. Read() will return
true and then it represents Text node that ends with &quot;external &quot;
(immediate before &amp;ent;).

When XmlTextReader found '&amp;', it MUST NOT stop the parse since
it cannoy identify if following markup represents character
entity (&amp;amp;, &amp;quot;, &amp;apos;, &amp;lt; or &amp;gt;) or general entity
without reading the folloing text stream.


Atsushi Eno


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="022282.html">[Mono-list] Problem with XmlTextReader
</A></li>
	<LI> Next message: <A HREF="022188.html">[Mono-list] Problem with XmlTextReader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22284">[ date ]</a>
              <a href="thread.html#22284">[ thread ]</a>
              <a href="subject.html#22284">[ subject ]</a>
              <a href="author.html#22284">[ author ]</a>
         </LI>
       </UL>
</body></html>
