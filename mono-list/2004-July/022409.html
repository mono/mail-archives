<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono DataAdapter problem?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:agus.surachman%40ppatk.go.id">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="022410.html">
   <LINK REL="Next"  HREF="022415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono DataAdapter problem?
   </H1>
    <B>Agus Surachman
    </B> 
    <A HREF="mailto:agus.surachman%40ppatk.go.id"
       TITLE="[Mono-list] Mono DataAdapter problem?">agus.surachman@ppatk.go.id
       </A><BR>
    <I>Tue, 27 Jul 2004 11:57:27 +0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="022410.html">[Mono-list] Re: Mono DataAdapter problem?
</A></li>
        <LI> Next message: <A HREF="022415.html">[Mono-list] Class status page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22409">[ date ]</a>
              <a href="thread.html#22409">[ thread ]</a>
              <a href="subject.html#22409">[ subject ]</a>
              <a href="author.html#22409">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.


------=_NextPart_000_0062_01C473D0.E2E46FF0
Content-Type: text/plain;
	charset=&quot;iso-8859-1&quot;
Content-Transfer-Encoding: quoted-printable




Dear all,

Is there something weird with Mono Data Adapter?

My script code as attached below give different result if I run using =
.NET and Mono.
Seems that there is a problem when filling DataTable with DataAdapter.
Please your help.

-Aguss



private static string p_GetNextSequence(string szPjkCode, string =
szFtrTypeCode, DateTime dtmExtraction)
  {
   OraDatabase db =3D new OraDatabase();
   string _debug =3D &quot;&quot;;   //tambahan aguss
  =20
   try
   {
    _debug =3D &quot;opening..;&quot;;  //tamabahn aguss
    db.Open();
    _debug +=3D &quot;beginning...;&quot;; //tambahan aguss
    db.Begin();
   =20
    _debug +=3D &quot;getting text command...;&quot;; //tambahan aguss

    OracleCommand cmd =3D db.GetTextCommand();
   =20
    // Check if the counter is already exist in the table.
    // Before getting the row, lock it first so that no one can modify =
it when we work on it.
   =20
    // Lock (by updating SEQ_NUMBER =3D SEQ_NUMBER + 1).
    //

    _debug +=3D &quot;executing updating sequence command...;&quot;; //tambahan =
aguss

    cmd.CommandText =3D &quot;UPDATE UPLOADER_SEQUENCE SET&quot; + &quot; SEQ_NUMBER =
=3D SEQ_NUMBER + 1&quot; + &quot; WHERE&quot; + &quot; LOWER(PJK_CODE) =3D '&quot; + =
szPjkCode.ToLower() + &quot;'&quot; + &quot; AND FTR_DATE =3D &quot; + =
DtmDateToOraDateString(dtmExtraction) + &quot; AND LOWER(FTR_TYPE_CODE) =3D =
'&quot; + szFtrTypeCode.ToLower() + &quot;'&quot;;
   =20
    _debug +=3D cmd.CommandText + &quot;...;&quot;;=20

    cmd.ExecuteNonQuery();
   =20
    // Read the row to check if the counter is already exist in the =
table.
    //
    cmd.CommandText =3D &quot;SELECT SEQ_NUMBER&quot; + &quot; FROM UPLOADER_SEQUENCE&quot; =
+ &quot; WHERE&quot; + &quot; LOWER(PJK_CODE) =3D '&quot; + szPjkCode.ToLower() + &quot;'&quot; + &quot; =
AND FTR_DATE =3D &quot; + DtmDateToOraDateString(dtmExtraction) + &quot; AND =
LOWER(FTR_TYPE_CODE) =3D '&quot; + szFtrTypeCode.ToLower() + &quot;'&quot;;
   =20

    _debug +=3D &quot;creating data adapater...;&quot;;=20
 =20
    =20
    _debug +=3D cmd.CommandText + &quot;...;&quot;;=20
   =20
    OracleDataAdapter da =3D new OracleDataAdapter(cmd);
    DataTable dt =3D new DataTable();

    _debug +=3D &quot;filling data adapter...;&quot;;

    da.Fill(dt);
   =20
    int iNextSeqNo;
  =20
    _debug +=3D&quot;nilai Rows dari data adapter: &quot; + dt.Rows.Count + =
&quot;...;&quot;;
    =20
    if (dt.Rows.Count =3D=3D 0)
    {

     // If counter not found, create (also set the SEQ_NUMBER =3D 1).
     cmd.CommandText =3D &quot;INSERT INTO UPLOADER_SEQUENCE (&quot; + &quot; =
PJK_CODE,&quot; + &quot; FTR_DATE,&quot; + &quot; FTR_TYPE_CODE,&quot; + &quot; SEQ_NUMBER&quot; + &quot; ) =
VALUES (&quot; + &quot; '&quot; + szPjkCode + &quot;',&quot; + &quot; &quot; + =
DtmDateToOraDateString(dtmExtraction) + &quot;,&quot; + &quot; '&quot; + szFtrTypeCode + =
&quot;',&quot; + &quot; 1&quot; + &quot; )&quot;;
   =20


     _debug +=3D &quot;inserting into uploader sequence:...&quot; + =
cmd.CommandText + &quot;....;&quot;;
    =20
     cmd.ExecuteNonQuery();
    =20
     iNextSeqNo =3D 1;
    =20
    }
    else
    {
     // If found, return the counter.
     // No need to check if SEQ_NUMBER is null or not (it must not be =
null!).
     iNextSeqNo =3D System.Convert.ToInt32(dt.Rows[0][&quot;SEQ_NUMBER&quot;]);
    =20
    } // dt.Rows.Count.
   =20
    db.Commit();
   =20
    //return iNextSeqNo;
    return &quot;next sequence: &quot; + iNextSeqNo.ToString() + &quot;; &quot; + _debug;
   =20
   }
   catch(Exception exp){     //tambahan aguss
    return (&quot;Error get sequence: &quot; + _debug + &quot; &quot; + exp.Message); =
//tambahan aguss
   }       //tambahan aguss
   finally
   {
    db.Close();
   }
  }



Output from .NET:

opening..;beginning...;getting text command...;executing updating =
sequence command...;UPDATE UPLOADER_SEQUENCE SET SEQ_NUMBER =3D =
SEQ_NUMBER + 1 WHERE LOWER(PJK_CODE) =3D 'ppatk' AND FTR_DATE =3D =
TO_DATE('27-7-2004', 'DD-MM-YYYY') AND LOWER(FTR_TYPE_CODE) =3D =
'c'...;creating data adapater...;SELECT SEQ_NUMBER FROM =
UPLOADER_SEQUENCE WHERE LOWER(PJK_CODE) =3D 'ppatk' AND FTR_DATE =3D =
TO_DATE('27-7-2004', 'DD-MM-YYYY') AND LOWER(FTR_TYPE_CODE) =3D =
'c'...;filling data adapter...;nilai Rows dari data adapter: 1...;


Output from Mono

opening..;beginning...;getting text command...;executing updating =
sequence command...;UPDATE UPLOADER_SEQUENCE SET SEQ_NUMBER =3D =
SEQ_NUMBER + 1 WHERE LOWER(PJK_CODE) =3D 'ppatk' AND FTR_DATE =3D =
TO_DATE('27-7-2004', 'DD-MM-YYYY') AND LOWER(FTR_TYPE_CODE) =3D =
'c'...;creating data adapater...;SELECT SEQ_NUMBER FROM =
UPLOADER_SEQUENCE WHERE LOWER(PJK_CODE) =3D 'ppatk' AND FTR_DATE =3D =
TO_DATE('27-7-2004', 'DD-MM-YYYY') AND LOWER(FTR_TYPE_CODE) =3D =
'c'...;filling data adapter...;nilai Rows dari data adapter: 0...;




  ---
  Outgoing mail is certified Virus Free.
  Checked by AVG anti-virus system (<A HREF="http://www.grisoft.com">http://www.grisoft.com</A>).
  Version: 6.0.726 / Virus Database: 481 - Release Date: 7/22/2004
------=_NextPart_000_0062_01C473D0.E2E46FF0
Content-Type: text/html;
	charset=&quot;iso-8859-1&quot;
Content-Transfer-Encoding: quoted-printable

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;
&lt;HTML&gt;&lt;HEAD&gt;
&lt;META http-equiv=3DContent-Type content=3D&quot;text/html; =
charset=3Diso-8859-1&quot;&gt;
&lt;META content=3D&quot;MSHTML 6.00.2800.1400&quot; name=3DGENERATOR&gt;
&lt;STYLE&gt;&lt;/STYLE&gt;
&lt;/HEAD&gt;
&lt;BODY bgColor=3D#ffffff&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Dear all,&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Is there something weird with Mono Data =

Adapter?&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;My script code as attached below give =
different=20
result if I run using .NET and Mono.&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Seems that there is a problem when =
filling=20
DataTable with DataAdapter.&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Please your help.&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;-Aguss&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080 size=3D2&gt;private static string =

p_GetNextSequence(string szPjkCode, string szFtrTypeCode, DateTime=20
dtmExtraction)&lt;BR&gt;&amp;nbsp;&amp;nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;OraDatabase db =3D =
new=20
OraDatabase();&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;string _debug =3D=20
&quot;&quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;//tambahan=20
aguss&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp=
;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_debug=20
=3D &quot;opening..;&quot;;&amp;nbsp;&amp;nbsp;//tamabahn=20
aguss&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;db.Open();&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_d=
ebug +=3D=20
&quot;beginning...;&quot;;&amp;nbsp;//tambahan=20
aguss&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;db.Begin();&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;=
BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_debug=20
+=3D &quot;getting text command...;&quot;;&amp;nbsp;//tambahan aguss&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080=20
size=3D2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;OracleCommand cmd =3D=20
db.GetTextCommand();&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nb=
sp;//=20
Check if the counter is already exist in the=20
table.&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Before getting the row, lock it =
first so=20
that no one can modify it when we work on=20
it.&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Lock (by =
updating=20
SEQ_NUMBER =3D SEQ_NUMBER + =
1).&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080 =
size=3D2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_debug +=3D=20
&quot;executing updating sequence command...;&quot;;&amp;nbsp;//tambahan =
aguss&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080=20
size=3D2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmd.CommandText =3D &quot;UPDATE =
UPLOADER_SEQUENCE SET&quot;=20
+ &quot; SEQ_NUMBER =3D SEQ_NUMBER + 1&quot; + &quot; WHERE&quot; + &quot; LOWER(PJK_CODE) =3D '&quot; =
+=20
szPjkCode.ToLower() + &quot;'&quot; + &quot; AND FTR_DATE =3D &quot; +=20
DtmDateToOraDateString(dtmExtraction) + &quot; AND LOWER(FTR_TYPE_CODE) =3D =
'&quot; +=20
szFtrTypeCode.ToLower() +=20
&quot;'&quot;;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_debug +=3D=20
cmd.CommandText + &quot;...;&quot;;&amp;nbsp;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080=20
size=3D2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmd.ExecuteNonQuery();&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;n=
bsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//=20
Read the row to check if the counter is already exist in the=20
table.&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmd.Comma=
ndText=20
=3D &quot;SELECT SEQ_NUMBER&quot; + &quot; FROM UPLOADER_SEQUENCE&quot; + &quot; WHERE&quot; + &quot; =
LOWER(PJK_CODE)=20
=3D '&quot; + szPjkCode.ToLower() + &quot;'&quot; + &quot; AND FTR_DATE =3D &quot; +=20
DtmDateToOraDateString(dtmExtraction) + &quot; AND LOWER(FTR_TYPE_CODE) =3D =
'&quot; +=20
szFtrTypeCode.ToLower() + &quot;'&quot;;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080 =
size=3D2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_debug +=3D=20
&quot;creating data=20
adapater...;&quot;;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR=
&gt;<i>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_debug=20
</I>+=3D cmd.CommandText + =
&quot;...;&quot;;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&lt;STRONG&gt;&lt;FONT=20
color=3D#800000 size=3D3&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;OracleDataAdapter da =
=3D new=20
OracleDataAdapter(cmd);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DataTable dt =3D new=20
DataTable();&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080 =
size=3D2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_debug +=3D=20
&quot;filling data adapter...;&quot;;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080 size=3D2&gt;&amp;nbsp;&lt;FONT =
color=3D#800000=20
size=3D3&gt;&lt;STRONG&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;da.Fill(dt);&lt;/STRONG&gt;&lt;/FONT&gt;&lt;BR&gt;&amp;nbsp;=
&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int=20
iNextSeqNo;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_debug =
+=3D&quot;nilai=20
Rows dari data adapter: &quot; + dt.Rows.Count +=20
&quot;...;&quot;;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if=20
(dt.Rows.Count =3D=3D 0)&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080 =
size=3D2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// If=20
counter not found, create (also set the SEQ_NUMBER =3D=20
1).&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmd.CommandText =3D &quot;INSERT INTO=20
UPLOADER_SEQUENCE (&quot; + &quot; PJK_CODE,&quot; + &quot; FTR_DATE,&quot; + &quot; FTR_TYPE_CODE,&quot; + =
&quot;=20
SEQ_NUMBER&quot; + &quot; ) VALUES (&quot; + &quot; '&quot; + szPjkCode + &quot;',&quot; + &quot; &quot; +=20
DtmDateToOraDateString(dtmExtraction) + &quot;,&quot; + &quot; '&quot; + szFtrTypeCode + =
&quot;',&quot; + &quot; 1&quot;=20
+ &quot; )&quot;;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier color=3D#000080=20
size=3D2&gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_debug +=3D &quot;inserting into =
uploader=20
sequence:...&quot; + cmd.CommandText +=20
&quot;....;&quot;;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nb=
sp;cmd.ExecuteNonQuery();&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbs=
p;&amp;nbsp;&amp;nbsp;&amp;nbsp;iNextSeqNo=20
=3D=20
1;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;BR&gt;&amp;nbs=
p;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbs=
p;&amp;nbsp;&amp;nbsp;//=20
If found, return the counter.&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// No =
need to=20
check if SEQ_NUMBER is null or not (it must not be=20
null!).&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;iNextSeqNo =3D=20
System.Convert.ToInt32(dt.Rows[0][&quot;SEQ_NUMBER&quot;]);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;n=
bsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}=20
//=20
dt.Rows.Count.&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;db.=
Commit();&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//return=
=20
iNextSeqNo;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return &quot;next sequence: &quot; +=20
iNextSeqNo.ToString() + &quot;; &quot; +=20
_debug;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;BR&gt;&amp;nbsp;&amp;nbsp=
;&amp;nbsp;catch(Exception=20
exp){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//tambahan=20
aguss&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return (&quot;Error get sequence: &quot; + _debug =
+ &quot; &quot; +=20
exp.Message);&amp;nbsp;//tambahan=20
aguss&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//t=
ambahan=20
aguss&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;finally&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;=
&amp;nbsp;&amp;nbsp;db.Close();&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;BR&gt;&amp;nbsp;&amp;nbsp;}&lt;/FONT&gt;&lt;/D=
IV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;STRONG&gt;Output from =
.NET:&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier size=3D2&gt;opening..;beginning...;getting text=20
command...;executing updating sequence command...;UPDATE =
UPLOADER_SEQUENCE SET=20
SEQ_NUMBER =3D SEQ_NUMBER + 1 WHERE LOWER(PJK_CODE) =3D 'ppatk' AND =
FTR_DATE =3D=20
TO_DATE('27-7-2004', 'DD-MM-YYYY') AND LOWER(FTR_TYPE_CODE) =3D =
'c'...;creating=20
data adapater...;SELECT SEQ_NUMBER FROM UPLOADER_SEQUENCE WHERE =
LOWER(PJK_CODE)=20
=3D 'ppatk' AND FTR_DATE =3D TO_DATE('27-7-2004', 'DD-MM-YYYY') AND=20
LOWER(FTR_TYPE_CODE) =3D 'c'...;filling data adapter...;nilai =
&lt;STRONG&gt;&lt;FONT=20
color=3D#800000 size=3D3&gt;Rows dari data adapter: =
1...;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;STRONG&gt;Output from =
Mono&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DCourier size=3D2&gt;opening..;beginning...;getting text=20
command...;executing updating sequence command...;UPDATE =
UPLOADER_SEQUENCE SET=20
SEQ_NUMBER =3D SEQ_NUMBER + 1 WHERE LOWER(PJK_CODE) =3D 'ppatk' AND =
FTR_DATE =3D=20
TO_DATE('27-7-2004', 'DD-MM-YYYY') AND LOWER(FTR_TYPE_CODE) =3D =
'c'...;creating=20
data adapater...;SELECT SEQ_NUMBER FROM UPLOADER_SEQUENCE WHERE =
LOWER(PJK_CODE)=20
=3D 'ppatk' AND FTR_DATE =3D TO_DATE('27-7-2004', 'DD-MM-YYYY') AND=20
LOWER(FTR_TYPE_CODE) =3D 'c'...;filling data adapter...;nilai =
&lt;STRONG&gt;&lt;FONT=20
color=3D#800000 size=3D3&gt;Rows dari data adapter: =
0...;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;BLOCKQUOTE&gt;
  &lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
  &lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
  &lt;DIV&gt;&lt;BR&gt;---&lt;BR&gt;Outgoing mail is certified Virus Free.&lt;BR&gt;Checked by =
AVG=20
  anti-virus system (&lt;A=20
  =
href=3D&quot;<A HREF="http://www.grisoft.com"">http://www.grisoft.com&quot;</A>&gt;<A HREF="http://www.grisoft.com</A">http://www.grisoft.com&lt;/A</A>&gt;).&lt;BR&gt;Version: =
6.0.726=20
  / Virus Database: 481 - Release Date: =
7/22/2004&lt;/DIV&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;

------=_NextPart_000_0062_01C473D0.E2E46FF0--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="022410.html">[Mono-list] Re: Mono DataAdapter problem?
</A></li>
	<LI> Next message: <A HREF="022415.html">[Mono-list] Class status page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22409">[ date ]</a>
              <a href="thread.html#22409">[ thread ]</a>
              <a href="subject.html#22409">[ subject ]</a>
              <a href="author.html#22409">[ author ]</a>
         </LI>
       </UL>
</body></html>
