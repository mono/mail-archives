<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mod_mono and swapping out web application
 assemblies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gonzalo.reply.to.the.list.iam.subscribed%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="022092.html">
   <LINK REL="Next"  HREF="022115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mod_mono and swapping out web application
 assemblies
   </H1>
    <B>Gonzalo Paniagua Javier
    </B> 
    <A HREF="mailto:gonzalo.reply.to.the.list.iam.subscribed%40ximian.com"
       TITLE="[Mono-list] mod_mono and swapping out web application
 assemblies">gonzalo.reply.to.the.list.iam.subscribed@ximian.com
       </A><BR>
    <I>Wed, 14 Jul 2004 01:31:39 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="022092.html">[Mono-list] mod_mono and swapping out web application assemblies
</A></li>
        <LI> Next message: <A HREF="022115.html">[Mono-list] mod_mono and swapping out web application
 assemblies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22101">[ date ]</a>
              <a href="thread.html#22101">[ thread ]</a>
              <a href="subject.html#22101">[ subject ]</a>
              <a href="author.html#22101">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>El mar, 13-07-2004 a las 18:23, Jim Erwin escribió:
&gt;<i> I know mod_mono is a bit behind the core release of mono in terms of
</I>&gt;<i> maturity, however there is an issue I've come across that I'd like to
</I>&gt;<i> find a way to resolve, or at least find a best practice to handle it.
</I>&gt;<i> 
</I>&gt;<i> If I simply want to change the assemblies in the bin folder of a web
</I>&gt;<i> application with IIS/Windows from a VS.NET compiled project, I can
</I>&gt;<i> simply copy over the old ones. At this point, JIT compilation and
</I>&gt;<i> caching occur as soon as the next page hit occurs without any other need
</I>&gt;<i> for admin intervention. The same is not true when using mod_mono.
</I>
There are bug reports covering this issue. Search for ShadowCopy in
bugzilla.

&gt;<i> 
</I>&gt;<i> When I simply swap out assemblies with mod_mono, I get errors that the
</I>&gt;<i> classes can't be found. At this point, the only thing I know to do that
</I>&gt;<i> works is to run &quot;killall mono&quot; from a root prompt. At this point, the
</I>&gt;<i> server processes are restarted and on the next page hit, the JIT
</I>&gt;<i> compilation takes place. All is well. The down side of this as I see it
</I>&gt;<i> is that this will kill ALL mono applications on the box. So if I'm
</I>&gt;<i> running multiple web applications, or other non-web mono applications on
</I>&gt;<i> the server, all of them get killed at this point.
</I>
Last week I did some changes to mod_mono. Now, if you let mod_mono fork
mod-mono-server when needed, reloading/restarting/stopping apache will
properly finish it and relaunch when necessary. Killing by hand is not
needed any more.

&gt;<i> 
</I>&gt;<i> A perfect resolution would be to have mod_mono treat new assemblies the
</I>&gt;<i> same way IIS does on Windows. I'm assuming that this may take quite a
</I>&gt;<i> bit of work to implement or may never be done. The next option would be
</I>&gt;<i> to have a utility where you can pass which application needs to be
</I>&gt;<i> reloaded for a web application and have all of the behavior for that
</I>&gt;<i> handled in the background. The question is then how to determine which
</I>&gt;<i> instances of &quot;mono mod-mono-server.exe&quot; are attached to a specific web
</I>&gt;<i> application.
</I>&gt;<i> 
</I>&gt;<i> Thoughts and ideas on how to resolve this would be greatly appreciated.
</I>
Ideally, we would only need to unload the appdomain of the application
you want to restart (or do it automatically when, for example,
global.asax is changed) but there are still a few bumps on the road (all
of them in bugzilla).

The «easiest» thing to do that would help us with this issues is
supporting ShadowCopyFiles.

-Gonzalo



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="022092.html">[Mono-list] mod_mono and swapping out web application assemblies
</A></li>
	<LI> Next message: <A HREF="022115.html">[Mono-list] mod_mono and swapping out web application
 assemblies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22101">[ date ]</a>
              <a href="thread.html#22101">[ thread ]</a>
              <a href="subject.html#22101">[ subject ]</a>
              <a href="author.html#22101">[ author ]</a>
         </LI>
       </UL>
</body></html>
