<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Error in Dataset ReadXmlSchema from an XSD file?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Error%20in%20Dataset%20ReadXmlSchema%20from%20an%20XSD%20file%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032824.html">
   <LINK REL="Next"  HREF="032825.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Error in Dataset ReadXmlSchema from an XSD file?</H1>
    <B>Juha Saharinen</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Error%20in%20Dataset%20ReadXmlSchema%20from%20an%20XSD%20file%3F&In-Reply-To="
       TITLE="[Mono-list] Error in Dataset ReadXmlSchema from an XSD file?">juha.saharinen at gmail.com
       </A><BR>
    <I>Sat Sep 23 14:06:03 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="032824.html">[Mono-list] GTK# problem
</A></li>
        <LI>Next message: <A HREF="032825.html">[Mono-list] Variable number of parameters to an indexer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32829">[ date ]</a>
              <a href="thread.html#32829">[ thread ]</a>
              <a href="subject.html#32829">[ subject ]</a>
              <a href="author.html#32829">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm trying to read a schema for a DataSet form an XSD file, which causes an
error. The behavior is different in MS .NET 2.0 and Mono (tried both
1.1.17.1 and 1.1.13.8 under Linux x64, both fc5 and OpenSUSE 10.1): both
gmcs and Windows csc compiled binaries work OK in Windows (Vista RC1) and
both fail on Linux. The error given is:

Reading XML schema...

Unhandled Exception: System.NullReferenceException: Object reference not set
to an instance of an object
  at System.Data.XmlSchemaDataImporter.CreateChildColumn (
System.Data.DataColumn parentColumn, System.Data.DataTable childTable)
[0x00000]
  at System.Data.XmlSchemaDataImporter.GenerateRelationship (
System.Data.RelationStructure rs) [0x00000]
  at System.Data.XmlSchemaDataImporter.Process () [0x00000]
  at System.Data.DataSet.ReadXmlSchema (System.Xml.XmlReader reader)
[0x00000]
  at System.Data.DataSet.ReadXmlSchema (System.String str) [0x00000]
  at ConsoleApplication1.Program.Main (System.String[] args) [0x00000]


The same error is produced with Mono's &quot;xsd -d&quot;. The lines causing the error
(in runtime) in the C# application are as follows:

            Console.WriteLine(&quot;Reading XML schema...&quot;);
            DataSet ds = new DataSet();
            ds.ReadXmlSchema(&quot;qstat.xsd&quot;);
===&gt; Execution generated here.

The XSD fie I'm using is available at
<A HREF="http://gridengine.sunsource.net/source/browse/*checkout*/gridengine/source/dist/util/resources/schemas/qstat/qstat.xsd?rev=1.8">http://gridengine.sunsource.net/source/browse/*checkout*/gridengine/source/dist/util/resources/schemas/qstat/qstat.xsd?rev=1.8</A>

Only one change is required to be used as a Dataset schema: comment out line
159:
&lt;xs:attribute name=&quot;state&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;
(This would generate a second column name state on the same Table in the
Dataset; the XSD schema is validated to be OK in Altova's XMLSpy)

My question is that is this error known by the Mono developer team and could
anyone have any suggestion for a way to fix / circumvent this?

Juha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20060923/af0ab3fd/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20060923/af0ab3fd/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032824.html">[Mono-list] GTK# problem
</A></li>
	<LI>Next message: <A HREF="032825.html">[Mono-list] Variable number of parameters to an indexer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32829">[ date ]</a>
              <a href="thread.html#32829">[ thread ]</a>
              <a href="subject.html#32829">[ subject ]</a>
              <a href="author.html#32829">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
