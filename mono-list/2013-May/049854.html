<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Web Service Client times out in 1 minute
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Web%20Service%20Client%20times%20out%20in%201%20minute&In-Reply-To=%3C1367461259744-4659573.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="049851.html">
   <LINK REL="Next"  HREF="049856.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Web Service Client times out in 1 minute</H1>
    <B>hnakayama</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Web%20Service%20Client%20times%20out%20in%201%20minute&In-Reply-To=%3C1367461259744-4659573.post%40n4.nabble.com%3E"
       TITLE="[Mono-list] Web Service Client times out in 1 minute">hnakayama at terrasky.co.jp
       </A><BR>
    <I>Thu May  2 02:20:59 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="049851.html">[Mono-list] Trying to port parallel tasks back to .net 3.5
</A></li>
        <LI>Next message: <A HREF="049856.html">[Mono-list] Hello world..  Mono/Gtk/WinXP install &amp; config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49854">[ date ]</a>
              <a href="thread.html#49854">[ thread ]</a>
              <a href="subject.html#49854">[ subject ]</a>
              <a href="author.html#49854">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello. 

We want to access a service that takes a long time to respond (around 5
minutes) using the WFC client.
We made a client program with Visual Studio 2012 but only when executing on
mono, the client times out after 1 minute.
Is this a peculiarity of mono? Please let me know if there is any way to get
around this limitation.

My environment consists of the following:
(I tried 2 versions of mono for each operating system)
---
OS            : Windows 7/ CentOS 6.2(64bit, on VMWare)
mono version  : 2.10.9, 3.0.9
.NET Framework: 3.5
---

I made a test SOAP service that waits for 2 minutes after receiving a
request and then sends a response.
The output from executing this program is as follows.

(.NET framework)
-------------------------
C:\&gt;testClient.exe
program start.
channel created...
2013/05/01 17:35:28
2013/05/01 17:37:54
2013/05/01 17:37:54
program end.
-------------------------

(mono)
-------------------------
C:\&gt;&quot;Program Files (x86)\Mono-2.10.9\bin\mono.exe&quot; testClient.exe
program start.
channel created...
5/1/2013 5:24:46 PM
exception thrown!
The operation has timed-out.
5/1/2013 5:25:46 PM
program end.
-------------------------



(source code)
&lt;main process&gt;
-----------
        static void Main(string[] args)
        {
            System.Console.WriteLine(&quot;program start.&quot;);

            BasicHttpBinding myBinding = new BasicHttpBinding();
            myBinding.Name = &quot;TestOperationPortType&quot;;
            myBinding.Security.Mode = BasicHttpSecurityMode.None;
            myBinding.Security.Transport.ClientCredentialType =
HttpClientCredentialType.None;
            myBinding.Security.Transport.ProxyCredentialType =
HttpProxyCredentialType.None;
            myBinding.Security.Message.ClientCredentialType =
BasicHttpMessageCredentialType.UserName;
            myBinding.SendTimeout = new System.TimeSpan(0, 10, 0);
            myBinding.ReceiveTimeout = new System.TimeSpan(0, 10, 0);

            EndpointAddress endPointAddress = new EndpointAddress( 
               
&quot;<A HREF="http://www.xxxxxx.net/ws/webServices/nxsoap?some_parametersxxxxx">http://www.xxxxxx.net/ws/webServices/nxsoap?some_parametersxxxxx</A>&quot;);
            ChannelFactory&lt;TestOperationPortType&gt; factory = new
ChannelFactory&lt;TestOperationPortType&gt;(myBinding, endPointAddress);
            TestOperationPortType tc = factory.CreateChannel();
            System.Console.WriteLine(&quot;channel created...&quot;);
            try
            {
                System.Console.WriteLine(DateTime.Now.ToString());
                //factory.Open();
                tc.TestOperation();
                System.Console.WriteLine(DateTime.Now.ToString());
                factory.Close();
                System.Console.WriteLine(DateTime.Now.ToString());

            }
            catch (Exception e)
            {
                System.Console.WriteLine(&quot;exception thrown!&quot;);
                System.Console.WriteLine( e.Message);
                System.Console.WriteLine(DateTime.Now.ToString());
            }
            System.Console.WriteLine(&quot;program end.&quot;);
        }
-----------


&lt;TestOperationPortType interface/class&gt;
----------
[System.ServiceModel.ServiceContractAttribute(Namespace=&quot;<A HREF="https://www.xxxxxx.net/ws/webServices/nxsoap">https://www.xxxxxx.net/ws/webServices/nxsoap</A>&quot;,
ConfigurationName=&quot;TestOperationPortType&quot;)]
public interface TestOperationPortType
{
    
    [System.ServiceModel.OperationContractAttribute(Action=&quot;&quot;,
ReplyAction=&quot;*&quot;)]
    void TestOperation();
}

public interface TestOperationPortTypeChannel : TestOperationPortType,
System.ServiceModel.IClientChannel
{
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
public partial class TestOperationPortTypeClient :
System.ServiceModel.ClientBase&lt;TestOperationPortType&gt;, TestOperationPortType
{
    
    public TestOperationPortTypeClient()
    {
    }
    
    public TestOperationPortTypeClient(string endpointConfigurationName) : 
            base(endpointConfigurationName)
    {
    }
    
    public TestOperationPortTypeClient(string endpointConfigurationName,
string remoteAddress) : 
            base(endpointConfigurationName, remoteAddress)
    {
    }
    
    public TestOperationPortTypeClient(string endpointConfigurationName,
System.ServiceModel.EndpointAddress remoteAddress) : 
            base(endpointConfigurationName, remoteAddress)
    {
    }
    
    public TestOperationPortTypeClient(System.ServiceModel.Channels.Binding
binding, System.ServiceModel.EndpointAddress remoteAddress) : 
            base(binding, remoteAddress)
    {
    }
    
    public void TestOperation()
    {
        base.Channel.TestOperation();
    }

}
----------


(settings)
For both .Net/mono, I have added the following setting to machine.config

----
  &lt;system.transactions&gt;
    &lt;machineSettings maxTimeout=&quot;23:00:00&quot;/&gt;
  &lt;/system.transactions&gt;
----

I appreciate your feedback.



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Web-Service-Client-times-out-in-1-minute-tp4659573.html">http://mono.1490590.n4.nabble.com/Web-Service-Client-times-out-in-1-minute-tp4659573.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="049851.html">[Mono-list] Trying to port parallel tasks back to .net 3.5
</A></li>
	<LI>Next message: <A HREF="049856.html">[Mono-list] Hello world..  Mono/Gtk/WinXP install &amp; config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49854">[ date ]</a>
              <a href="thread.html#49854">[ thread ]</a>
              <a href="subject.html#49854">[ subject ]</a>
              <a href="author.html#49854">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
