<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] float p/invoke
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20float%20p/invoke&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033330.html">
   <LINK REL="Next"  HREF="033334.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] float p/invoke</H1>
    <B>Andreas F&#228;rber</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20float%20p/invoke&In-Reply-To="
       TITLE="[Mono-list] float p/invoke">andreas.faerber at web.de
       </A><BR>
    <I>Thu Nov  9 14:44:46 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="033330.html">[Mono-list] mono-core problem
</A></li>
        <LI>Next message: <A HREF="033334.html">[Mono-list] float p/invoke
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33332">[ date ]</a>
              <a href="thread.html#33332">[ thread ]</a>
              <a href="subject.html#33332">[ subject ]</a>
              <a href="author.html#33332">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I'm facing a weird marshalling issue...

The Objective-C runtime on OS X exposes a method:

id objc_msgSend(id, SEL, ...);    // with id and SEL pointers

I marshal it as IntPtr objc_msgSend(IntPtr, IntPtr, ...) using an SRE  
p/invoke method factory.

This has worked fine so far, but now I noticed some marshalling  
problems. The method's semantic return value is not always a pointer  
but is apparently also used for int, unsigned int - which works fine  
through IntPtr casting, but not for float. To my understanding float  
is single-precision floating point number, thus 32 bits or 4 bytes  
wide and identical to IntPtr.Size in a 32-bit environment. However,  
when the method semantically returns a float, via IntPtr marshalling  
I always get value 1 whereas return type float gives the correct  
value but soon after leads to the app hanging, on both PPC and Intel.  
Shouldn't the different managed types only lead to different  
interpretations of the original 4 bytes? Am I missing something easy?

Andreas
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033330.html">[Mono-list] mono-core problem
</A></li>
	<LI>Next message: <A HREF="033334.html">[Mono-list] float p/invoke
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33332">[ date ]</a>
              <a href="thread.html#33332">[ thread ]</a>
              <a href="subject.html#33332">[ subject ]</a>
              <a href="author.html#33332">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
