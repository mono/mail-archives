<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] UnixStream/Pipe Best Practices
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20UnixStream/Pipe%20Best%20Practices&In-Reply-To=1163451103.5626.25.camel%40Schurter3-Linux.TREMONT">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033372.html">
   <LINK REL="Next"  HREF="033380.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] UnixStream/Pipe Best Practices</H1>
    <B>Ben Timby</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20UnixStream/Pipe%20Best%20Practices&In-Reply-To=1163451103.5626.25.camel%40Schurter3-Linux.TREMONT"
       TITLE="[Mono-list] UnixStream/Pipe Best Practices">ben at gohelios.com
       </A><BR>
    <I>Mon Nov 13 17:48:31 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="033372.html">[Mono-list] UnixStream/Pipe Best Practices
</A></li>
        <LI>Next message: <A HREF="033380.html">[Mono-list] UnixStream/Pipe Best Practices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33374">[ date ]</a>
              <a href="thread.html#33374">[ thread ]</a>
              <a href="subject.html#33374">[ subject ]</a>
              <a href="author.html#33374">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Easiest way is likely to configure syslog-ng with a destination of type: 
unix-stream for your firewalls events.

syslog-ng.conf:
--
source firewall {
         udp(ip(0.0.0.0) port(5000));
};

destination parser {
	unix-stream(&quot;/var/firewall-parser&quot;);
}

log {
	source(firewall);
	destination(parser);
}
--

You can then use the UnixStream to read the incoming data...


C#:
--
int fd = Syscall.open (&quot;/var/firewall-parser&quot;, OpenFlags.O_RDONLY);
UnixStream fs = new UnixStream (fd);

int n;
while ((n = fs.Read(...)) != 0)
{
	//do something with your data...
}
--

I don't know when this particular class would return EOF (0) from the 
Read method. My guess is when the remote end closes the stream. Your 
read operations will likely block until data becomes available from 
syslog-ng. If this is not the case, I would be happy to help you 
research this.

Michael Schurter wrote:
&gt;<i> Now I'd like to streamline the process. I don't know much about Unix
</I>&gt;<i> streams/sockets/pipes (obviously), but it seems like the easiest way to
</I>&gt;<i> pipe data from syslog-ng to my Mono program (which I would run as a
</I>&gt;<i> service).
</I>&gt;<i> 
</I>&gt;<i> The example for UnixStream looks simple enough, but I don't know the
</I>&gt;<i> best practice for using that in a service.
</I>
-- 
Ben Timby
Senior Software Architect
Helios, LLC
(p) 317-554-3619
(f) 317-554-8997
www.gohelios.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3233 bytes
Desc: S/MIME Cryptographic Signature
Url : <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20061113/d6fcba11/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-list/attachments/20061113/d6fcba11/attachment-0001.bin</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033372.html">[Mono-list] UnixStream/Pipe Best Practices
</A></li>
	<LI>Next message: <A HREF="033380.html">[Mono-list] UnixStream/Pipe Best Practices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33374">[ date ]</a>
              <a href="thread.html#33374">[ thread ]</a>
              <a href="subject.html#33374">[ subject ]</a>
              <a href="author.html#33374">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
