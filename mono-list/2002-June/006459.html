<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] DllImport ... help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:richard.torkar%40htu.se">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="006458.html">
   <LINK REL="Next"  HREF="006497.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] DllImport ... help
   </H1>
    <B>Richard Torkar
    </B> 
    <A HREF="mailto:richard.torkar%40htu.se"
       TITLE="[Mono-list] DllImport ... help">richard.torkar@htu.se
       </A><BR>
    <I>15 Jun 2002 17:10:17 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="006458.html">[Mono-list] DllImport ... help
</A></li>
        <LI> Next message: <A HREF="006497.html">[Mono-list] DllImport ... help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6459">[ date ]</a>
              <a href="thread.html#6459">[ thread ]</a>
              <a href="subject.html#6459">[ subject ]</a>
              <a href="author.html#6459">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 2002-06-15 at 16:32, Jonathan Pryor wrote:
&gt;<i> An MSDN sample might be worth looking at:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpguide/html/cpconbufferssample.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpguide/html/cpconbufferssample.asp</A>
</I>&gt;<i> 
</I>&gt;<i> It works for me on .NET, but I haven't been able to make it work with
</I>&gt;<i> mono...  I'm thinking that mono isn't ready for full-blown DllImport
</I>&gt;<i> yet.
</I>&gt;<i> 
</I>&gt;<i> For example, the following works with .NET
</I>
&lt;/snip&gt;

&gt;<i> When I run either `managed.exe' (the mcs-compiled program) or
</I>&gt;<i> `managed-net.exe' (the csc-compiled program) under .NET, I get the
</I>&gt;<i> expected output:
</I>&gt;<i> 
</I>&gt;<i> 	name: This is my message.  Isn't it nice?
</I>&gt;<i> 
</I>&gt;<i> When I run either `managed.exe' or `managed-net.exe' under mono, I get
</I>&gt;<i> errors:
</I>&gt;<i> 
</I>&gt;<i> 	name: 
</I>&gt;<i> 	** (process:13403): WARNING **: unhandled exception
</I>&gt;<i> 	System.NullReferenceException: &quot;A null value was found where an 	object
</I>&gt;<i> instance was required&quot;
</I>&gt;<i> 	in &lt;0x00065&gt; .ghbn:Main ()
</I>&gt;<i> 
</I>&gt;<i> 	RESULT: -1
</I>&gt;<i> 
</I>&gt;<i> This implies to me that Mono does not properly handle PInvoke calls, at
</I>&gt;<i> least currently.  (CVS tree built around 9:00 AM this morning).
</I>&gt;<i> 
</I>

Confirmed with release 0.12

/Richard
-- 
Supporting the Mono project, and helping you...

  <A HREF="http://mono.baselabs.org">http://mono.baselabs.org</A>              <A HREF="http://mono.baselabs.org/CSAM">http://mono.baselabs.org/CSAM</A>
             ***                                     ***
&quot;First steps&quot; building guides,        CSAM the C Sharp Archived Modules
daily Mono RPMS, C# tutorial,...





</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="006458.html">[Mono-list] DllImport ... help
</A></li>
	<LI> Next message: <A HREF="006497.html">[Mono-list] DllImport ... help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6459">[ date ]</a>
              <a href="thread.html#6459">[ thread ]</a>
              <a href="subject.html#6459">[ subject ]</a>
              <a href="author.html#6459">[ author ]</a>
         </LI>
       </UL>
</body></html>
