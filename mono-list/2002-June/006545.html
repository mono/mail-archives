<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Object Lookup with a Compound key
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:AjayKumar.Dwivedi%40dresdner-bank.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="006544.html">
   <LINK REL="Next"  HREF="006546.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Object Lookup with a Compound key
   </H1>
    <B>Dwivedi , Ajay Kumar
    </B> 
    <A HREF="mailto:AjayKumar.Dwivedi%40dresdner-bank.com"
       TITLE="[Mono-list] Object Lookup with a Compound key">AjayKumar.Dwivedi@dresdner-bank.com
       </A><BR>
    <I>Thu, 20 Jun 2002 11:13:49 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="006544.html">[Mono-list] Object Lookup with a Compound key
</A></li>
        <LI> Next message: <A HREF="006546.html">[Mono-list] Re: Java VM for .NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6545">[ date ]</a>
              <a href="thread.html#6545">[ thread ]</a>
              <a href="subject.html#6545">[ subject ]</a>
              <a href="author.html#6545">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Rafael,
	I am now using a class as a key. The class is TypeMember.cs and is
present in the Xml.Serialization namespace.
The class Impelments Equals and GetHashCode. The GetHashCode is simply
unchecked sum of individual hashcodes of Type and string.

Happy Hacking,
Ajay

&gt;<i> -----Original Message-----
</I>&gt;<i> From: A Rafael D Teixeira [mailto:<A HREF="mailto:rafaelteixeirabr@hotmail.com">rafaelteixeirabr@hotmail.com</A>]
</I>&gt;<i> Sent: Thursday, June 20, 2002 7:57 AM
</I>&gt;<i> To: <A HREF="mailto:AjayKumar.Dwivedi@dresdner-bank.com">AjayKumar.Dwivedi@dresdner-bank.com</A>
</I>&gt;<i> Cc: <A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-list] Object Lookup with a Compound key
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt;From: &quot;Dwivedi , Ajay Kumar&quot; &lt;<A HREF="mailto:AjayKumar.Dwivedi@dresdner-bank.com">AjayKumar.Dwivedi@dresdner-bank.com</A>&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Hi All,
</I>&gt;<i> &gt;	I need to store and retrieve objects with a compound key.
</I>&gt;<i> &gt;This is required for the SoapAttributeOverrides class. The class
</I>&gt;<i> &gt;stores SoapAttributes object for each Member of a class. So the
</I>&gt;<i> &gt;key to be used in the hashtable consists of Type of the class and
</I>&gt;<i> &gt;Name of the member.
</I>&gt;<i> &gt;	Now I have 3 ways in which this can be implemented.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;1. Make the key as 'Type.FullType+&quot;..&quot;+MemberName' , with &quot;..&quot;
</I>&gt;<i> &gt;    seperating Type and Member. This assumes that &quot;..&quot; can't occur
</I>&gt;<i> &gt;    in the FullName or MemberName. This is the easiest, but I am
</I>&gt;<i> &gt;    not sure if this is a language neutral approach.
</I>&gt;<i> 
</I>&gt;<i> No names accepts whitespace (at least for languages taht 
</I>&gt;<i> comply with the 
</I>&gt;<i> CLR), so you could use a space or a newline to concatenate those two 
</I>&gt;<i> strings. But I would not go that route.
</I>&gt;<i> 
</I>&gt;<i> &gt;2. Use a jagged 2D hashtable. The main hashtable is indexed by
</I>&gt;<i> &gt;    Type and each value contains another hashtable which is
</I>&gt;<i> &gt;    indexed by member names. However this approach might require
</I>&gt;<i> &gt;    too many hashtables.
</I>&gt;<i> 
</I>&gt;<i> I think it?s too expensive...
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt;3. Use a new class which emcompasses the Type and MemberName and
</I>&gt;<i> &gt;    use it as a key. This approach would however require creation
</I>&gt;<i> &gt;    of a new key everytime a search is made.
</I>&gt;<i> 
</I>&gt;<i> I would try this one, but I would try to hide these details inside a 
</I>&gt;<i> tailored subclass of hashtable. Something like:
</I>&gt;<i> 
</I>&gt;<i> class SoapAttributesCollection : Hashtable
</I>&gt;<i> {
</I>&gt;<i> 
</I>&gt;<i> struct specialKey
</I>&gt;<i> {
</I>&gt;<i>   string typeKeyPart;
</I>&gt;<i>   string memberKeyPart;
</I>&gt;<i> 
</I>&gt;<i>   public specialKey(System.Type typeKeyPart, string memberKeyPart)
</I>&gt;<i>   {
</I>&gt;<i>     this.typeKeyPart = typeKeyPart.FullTypeName;
</I>&gt;<i>     this.memberKeyPart = memberKeyPart;
</I>&gt;<i>   }
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> // Indexer
</I>&gt;<i> public SoapAttributes this[
</I>&gt;<i>    System.Type typeKeyPart,
</I>&gt;<i>    string memberKeyPart]
</I>&gt;<i> {
</I>&gt;<i>   get {
</I>&gt;<i>     return (SoapAttributes)(this[specialKey(typeKeyPart, 
</I>&gt;<i> memberKeyPart)]);
</I>&gt;<i>   }
</I>&gt;<i>   set {
</I>&gt;<i>     this[specialKey(typeKeyPart, memberKeyPart)] = value;
</I>&gt;<i>   }
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> public void Add(
</I>&gt;<i>    System.Type typeKeyPart,
</I>&gt;<i>    string memberKeyPart,
</I>&gt;<i>    SoapAttributes value )
</I>&gt;<i> {
</I>&gt;<i>   Add(new specialKey(typeKeyPart, memberKeyPart), value);
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> // so on for ContainsKey, Remove... if needed
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> I would also experiment with tailoring the hashcodeprovider 
</I>&gt;<i> (hcp member) to 
</I>&gt;<i> see if I could use System.Type inside the specialKey structure.
</I>&gt;<i> 
</I>&gt;<i> Hope it is of some help for you...
</I>&gt;<i> 
</I>&gt;<i> Wonderfull Hacking
</I>&gt;<i> 
</I>&gt;<i> Rafael Teixeira
</I>&gt;<i> Brazilian Developer
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _________________________________________________________________
</I>&gt;<i> Chat with friends online, try MSN Messenger: <A HREF="http://messenger.msn.com">http://messenger.msn.com</A>
</I>&gt;<i> 
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="006544.html">[Mono-list] Object Lookup with a Compound key
</A></li>
	<LI> Next message: <A HREF="006546.html">[Mono-list] Re: Java VM for .NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6545">[ date ]</a>
              <a href="thread.html#6545">[ thread ]</a>
              <a href="subject.html#6545">[ subject ]</a>
              <a href="author.html#6545">[ author ]</a>
         </LI>
       </UL>
</body></html>
