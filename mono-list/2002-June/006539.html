<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Binary problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lupus%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="006514.html">
   <LINK REL="Next"  HREF="006542.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Binary problem
   </H1>
    <B>Paolo Molaro
    </B> 
    <A HREF="mailto:lupus%40ximian.com"
       TITLE="[Mono-list] Binary problem">lupus@ximian.com
       </A><BR>
    <I>Wed, 19 Jun 2002 18:28:36 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="006514.html">[Mono-list] Binary problem
</A></li>
        <LI> Next message: <A HREF="006542.html">[Mono-list] Binary problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6539">[ date ]</a>
              <a href="thread.html#6539">[ thread ]</a>
              <a href="subject.html#6539">[ subject ]</a>
              <a href="author.html#6539">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/18/02 Dwivedi , Ajay Kumar wrote:
&gt;<i> The executable generated by the attached hello.cs program does not run on my
</I>&gt;<i> machine. 
</I>&gt;<i> It runs fine on linux though.
</I>&gt;<i> 
</I>&gt;<i> 	OS:	Windows 2000 professional
</I>&gt;<i> 		5.00.2195
</I>&gt;<i> 		Service Pack 2
</I>&gt;<i> 
</I>&gt;<i> 	Runtime: v1.0.3705
</I>&gt;<i> 	
</I>&gt;<i> 	Error: Unhandled exception at 0x200025ff in hello.exe: 
</I>&gt;<i> 		 0xC0000005: Access violation reading location 0x200025ff.
</I>&gt;<i> 	
</I>
<A HREF="mailto:blu@LATOP">blu@LATOP</A> /cygdrive/g/mono
$ md5sum.exe hello.tar.gz 
ef83f6508c4bcab48c9946438188cbc9 *hello.tar.gz

<A HREF="mailto:blu@LATOP">blu@LATOP</A> /cygdrive/g/mono
$ tar zxvf hello.tar.gz 
hello.cs
hello.exe

<A HREF="mailto:blu@LATOP">blu@LATOP</A> /cygdrive/g/mono
$ uname
CYGWIN_NT-5.1

<A HREF="mailto:blu@LATOP">blu@LATOP</A> /cygdrive/g/mono
$ ./hello.exe
Hello Ajay!

<A HREF="mailto:blu@LATOP">blu@LATOP</A> /cygdrive/g/mono
$ mdsum5.exe hello.exe
61e2aff1be84906029b39b36e0cd7a10 *hello.exe

Your same binary works for me on Windows Xp. Your error messages are the
same reported by Dick on his win 2000 system.

The issue may be that the binary is relocated in memory in a different
place on windows 2000: the image base default is 0x400000.
Go into metadata/reflection.c, line 2279 and change

	virtual_base = 0x400000;
into
	virtual_base = 0x20000000;

This may as well not work: it's just a wild guess. I don't know why it
would work on a system and not on the other. You could try attaching a
debugger and try to poke inside the loading process.

lupus

-- 
-----------------------------------------------------------------
<A HREF="mailto:lupus@debian.org">lupus@debian.org</A>                                     debian/rules
<A HREF="mailto:lupus@ximian.com">lupus@ximian.com</A>                             Monkeys do it better


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="006514.html">[Mono-list] Binary problem
</A></li>
	<LI> Next message: <A HREF="006542.html">[Mono-list] Binary problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6539">[ date ]</a>
              <a href="thread.html#6539">[ thread ]</a>
              <a href="subject.html#6539">[ subject ]</a>
              <a href="author.html#6539">[ author ]</a>
         </LI>
       </UL>
</body></html>
