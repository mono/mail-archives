<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] array casts in mint
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lupus%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014915.html">
   <LINK REL="Next"  HREF="014959.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] array casts in mint
   </H1>
    <B>Paolo Molaro
    </B> 
    <A HREF="mailto:lupus%40ximian.com"
       TITLE="[Mono-list] array casts in mint">lupus@ximian.com
       </A><BR>
    <I>Mon, 14 Jul 2003 17:02:20 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="014915.html">[Mono-list] array casts in mint
</A></li>
        <LI> Next message: <A HREF="014959.html">AW: [Mono-list] array casts in mint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15003">[ date ]</a>
              <a href="thread.html#15003">[ thread ]</a>
              <a href="subject.html#15003">[ subject ]</a>
              <a href="author.html#15003">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/11/03 Sam Clegg wrote:
&gt;<i> Is this a bug?  Is there much interest in fixing bugs in the
</I>&gt;<i> interpreter now that mini is working?
</I>
Yes, bugs in the interpreter will be fixed, but they are lower priority
than almost all the rest of the stuff: we'll gladly accept and applyt
patches to it, though.

&gt;<i> I am interested in the interpreter because I am working on some
</I>&gt;<i> optimisations that are better suited (at the moment anyway) to it.
</I>&gt;<i> They involve runtime aggregation of remoting calls.  In the end,
</I>&gt;<i> what I plan to do is, from with the JIT, select certain methods
</I>&gt;<i> and run them through my optimising interpreter.  It looks like
</I>&gt;<i> switching from JIT to interp at runtime is possible since they 
</I>&gt;<i> share most data structures.  Has anyone else tried to do thie
</I>&gt;<i> before?
</I>
Switching from JIT execution to the interp is not possible and it would
require significant effort, especially when dealing with exception
handling. As Zoltan points out, a dual interp/JIT setup is used by some
VMs, but I don't think we should deal with the complexity of it at this
time (and it wouldn't be based on the current interp.c code anyway...).
I think there is lots of room for improvements in the
not-fully-optimizing JIT code, so that JIT times could be significantly
reduced in most cases. Using profiling info is then the next obvious step.
As for your optimizing interpreter: it's fine if you hack the current
interpreter to test it, but the way I'd see it implemented is as
follows:
*) I assume you select some methods by some sort of profiling or runtime
instrumentation, but if you do it offline it's even simpler
*) you create a new optimized method (rewriting the IL code, maybe
adding some specialized IL opcode like we do for marshaling)
*) call the new method directly from the previous unoptimized one, or
install it in the JIT so it's executed instead of the old one

This last chunk is the only missing bit in the JIT infrastructure to
achieve what I think you need and we need to implement it also to
support recompilation of methods and simplify and speedup a bunch of 
things anyway. Let us know if that would work for you.

lupus

-- 
-----------------------------------------------------------------
<A HREF="mailto:lupus@debian.org">lupus@debian.org</A>                                     debian/rules
<A HREF="mailto:lupus@ximian.com">lupus@ximian.com</A>                             Monkeys do it better

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014915.html">[Mono-list] array casts in mint
</A></li>
	<LI> Next message: <A HREF="014959.html">AW: [Mono-list] array casts in mint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15003">[ date ]</a>
              <a href="thread.html#15003">[ thread ]</a>
              <a href="subject.html#15003">[ subject ]</a>
              <a href="author.html#15003">[ author ]</a>
         </LI>
       </UL>
</body></html>
