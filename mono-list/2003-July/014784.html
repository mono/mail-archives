<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] XSLT Problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:blackhawk%40ivanhawkes.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014783.html">
   <LINK REL="Next"  HREF="014800.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] XSLT Problems
   </H1>
    <B>Ivan Hawkes
    </B> 
    <A HREF="mailto:blackhawk%40ivanhawkes.com"
       TITLE="[Mono-list] XSLT Problems">blackhawk@ivanhawkes.com
       </A><BR>
    <I>Fri, 4 Jul 2003 21:15:45 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="014783.html">[Mono-list] Problem with monoresgen
</A></li>
        <LI> Next message: <A HREF="014800.html">[Mono-list] XSLT Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14784">[ date ]</a>
              <a href="thread.html#14784">[ thread ]</a>
              <a href="subject.html#14784">[ subject ]</a>
              <a href="author.html#14784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--Boundary-00=_xBeB/DEGjx6tqTm
Content-Type: Text/Plain;
  charset=&quot;utf-8&quot;
Content-Transfer-Encoding: quoted-printable
Content-Description: clearsigned data
Content-Disposition: inline

=2D----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ok, I've Googled until my eyes bugged out of my head but no answer to this=
=20
one...

I have some XML and an XSL file to transform that into some HTML output. De=
ep=20
within the program I am converting is a call to transform the XML using the=
=20
XSL file provided. If I perform the transform from the command line with=20
xsltproc then it all works, but the code using C# fails. Output is below:

[<A HREF="mailto:ivan@hal9000">ivan@hal9000</A> simpletest]$ mono simpletest.exe
=EF=BB=BFStarting up
Path=3D/home/ivan/simpletest/Stylesheets
Entity: line 1: warning: Namespace prefix xsl is not defined
&lt;?xml version=3D&quot;1.0&quot; encoding=3D&quot;utf-8&quot;?&gt;&lt;xsl:stylesheet=20
version=3D&quot;1.0&quot;&gt;&lt;xsl:import
                                                                  ^
Entity: line 1: warning: Namespace prefix xsl is not defined
encoding=3D&quot;utf-8&quot;?&gt;&lt;xsl:stylesheet version=3D&quot;1.0&quot;&gt;&lt;xsl:import=20
href=3D&quot;DeepCopy.xsl&quot;
                                                                           =
  =20
^
Entity: line 1: warning: Namespace prefix xsl is not defined
opy.xsl&quot; /&gt;&lt;xsl:output method=3D&quot;xml&quot; version=3D&quot;1.0&quot; encoding=3D&quot;UTF-8&quot;=20
indent=3D&quot;yes&quot;
                                                                           =
  =20
^
Entity: line 1: warning: Namespace prefix xsl is not defined
xml&quot; version=3D&quot;1.0&quot; encoding=3D&quot;UTF-8&quot; indent=3D&quot;yes&quot; /&gt;&lt;xsl:template=20
match=3D&quot;content
                                                                           =
  =20
^
Entity: line 1: warning: Namespace prefix xsl is not defined
:<i>value-of select=3D&quot;normalize-space=20
</I>(//placeholder[@id=3D'1']/placeholder-content)&quot;
                                                                           =
  =20
^
Entity: line 1: warning: Namespace prefix xsl is not defined
:<i>value-of select=3D&quot;normalize-space=20
</I>(//placeholder[@id=3D'2']/placeholder-content)&quot;
                                                                           =
  =20
^
compilation error: element stylesheet
xsltParseStylesheetProcess : document is not a stylesheet
=20
Unhandled Exception: System.Xml.XmlException: Error creating stylesheet
in &lt;0x000d9&gt; 00 System.Xml.Xsl.XslTransform:GetStylesheetFromString (string)
in &lt;0x0006f&gt; 00 System.Xml.Xsl.XslTransform:Load=20
(System.Xml.XPath.XPathNavigator)
in &lt;0x00031&gt; 00 System.Xml.Xsl.XslTransform:Load=20
(System.Xml.XPath.IXPathNavigable)
in &lt;0x00044&gt; 00 Interesource.Util.Xslt.XsltHelper:Transform=20
(System.Xml.XPath.IXPathNavigable,System.Xml.XPath.IXPathNavigable,System.I=
O.TextWriter,System.Xml.Xsl.XsltArgumentList)
in &lt;0x0003e&gt; 00 Interesource.Util.Xslt.XsltHelper:Transform=20
(System.Xml.XPath.IXPathNavigable,System.Xml.XmlReader,System.IO.TextWriter=
,System.Xml.Xsl.XsltArgumentList)
in &lt;0x0008c&gt; 00 Interesource.Publish.Client.ContentElement:Transform=20
(System.IO.TextWriter,System.Xml.Xsl.XsltArgumentList,System.Xml.XPath.IXPa=
thNavigable)
in &lt;0x0006d&gt; 00 Interesource.Publish.Client.ContentElement:Transform=20
(System.IO.TextWriter,System.Xml.Xsl.XsltArgumentList)
in &lt;0x00067&gt; 00 Interesource.Publish.Client.ContentElement:Transform=20
(System.Xml.Xsl.XsltArgumentList)
in &lt;0x00022&gt; 00 Interesource.Publish.Client.ContentElement:Transform ()
in &lt;0x000d9&gt; 00 simpletest.SimpleTest:Main (string[])
=20
The transform routine looks like the following:

		/// &lt;summary&gt;
		/// Transforms the instance doucment using the provided stylesheet.
		/// &lt;/summary&gt;
		/// &lt;param name=3D&quot;stylesheet&quot;&gt;The stylesheet to use.&lt;/param&gt;
		/// &lt;param name=3D&quot;instanceDoc&quot;&gt;An &lt;see cref=3D&quot;IXPathNavigable&quot;/&gt; over t=
he XML=20
data to transform.&lt;/param&gt;
		/// &lt;param name=3D&quot;output&quot;&gt;The output stream to write to.&lt;/param&gt;
		public static void Transform(IXPathNavigable stylesheet, IXPathNavigable=
=20
instanceDoc, TextWriter output, XsltArgumentList args)
		{
			XslTransform x =3D new XslTransform();
			x.Load(stylesheet);

			XmlTextWriter writer =3D new XmlTextWriter(output);
			writer.Formatting =3D Formatting.None;

			x.Transform(instanceDoc, args, writer);
		}

Now, for some reason, the Load function isn't happy with the XSL file, even=
=20
though from the output provided you can see that it has loaded the correct=
=20
file.

Any clues?

My Setup:
	OS RedHat 9.0 (Shrike - stock)
	Mono/MCS built from CVS today
=09
=2D----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.1 (GNU/Linux)

iQIVAwUBPwXgcfr1e7bH1pzBAQJ6thAAjXLA47kmelf96fA3c2tQKrdatyfV36YS
lS6Y6DOQZSeYowkopUp3twPPDhl7XsP1SHfan6xllD41hRKlQCUQYPYY1lJ+XqTw
VWQKl1DQetxd+qcAzo6CSA4P7eq7lEtq1DJ/Uj5+cyjkwmS8qPM7AkA2YovHitxO
II2UPE+n2ZIttSCkFMU+RudXzZeQ5jTYh1ekD25KVOW5M4l6fTVgsLQQzmtvX2DB
QvDU4FVpI+Fjdn4f4S2437tEq0oKVYstxah8LflMe8fPtz0TYInv00eZvutFYzGl
xhAODbDZobISBhtTwjer2ea0If0VBEHutb5WlEANYZGyDLYPHE0ajqQtcAid06+O
3zmn5FURCuOlXzFxJ2ABA90PFAciUpMD3vUO/pvohIpWsxf4jranm0eTIHahncs2
0XffszRXPd0HHkynwlSOxmMvn0AapOpTYO7GjqKPzzL1bsIH86q6mhM4hfocUvS8
4dB3wmgijre8fLo9aiQbgPZvua8zsUZU8D3D9pR/KwVqq5IsHJJeBqApOGsfOcmZ
VIuiz0rVfkUtYgNeVVbbArtojkOi5ziwMs0+la+IyHQ9Ut+YLM0pM0PjJVSBYdky
HD1f9AuyxATmx0xARrxNsq1pOgGFW3bwm4TBfNoY9qGikGMG3NylW5yYfP7YGrS4
r+FASb9Fgv8=3D
=3DQ0EE
=2D----END PGP SIGNATURE-----

--Boundary-00=_xBeB/DEGjx6tqTm
Content-Type: text/xml;
  charset=&quot;iso-8859-1&quot;;
  name=&quot;DeepCopy.xsl&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment; filename=&quot;DeepCopy.xsl&quot;

&lt;?xml version=3D&quot;1.0&quot; encoding=3D&quot;UTF-8&quot;?&gt;
&lt;xsl:stylesheet version=3D&quot;1.0&quot; xmlns:xsl=3D&quot;<A HREF="http://www.w3.org/1999/XSL/Tra=">http://www.w3.org/1999/XSL/Tra=</A>
nsform&quot;&gt;

	&lt;!-- default copy everything template --&gt;
	&lt;xsl:template match=3D&quot;*&quot; mode=3D&quot;content&quot;&gt;
		&lt;xsl:element name=3D&quot;{name()}&quot;&gt;
			&lt;!-- copy all of the attributes --&gt;
			&lt;xsl:for-each select=3D&quot;@*&quot;&gt;
				&lt;xsl:attribute name=3D&quot;{name()}&quot;&gt;&lt;xsl:value-of select=3D&quot;.&quot;/&gt;&lt;/xsl:attr=
ibute&gt;
			&lt;/xsl:for-each&gt;

			&lt;xsl:apply-templates mode=3D&quot;content&quot;/&gt;
		&lt;/xsl:element&gt;
	&lt;/xsl:template&gt;

	&lt;xsl:template match=3D&quot;BR&quot; mode=3D&quot;content&quot;&gt;
		&lt;br /&gt;
	&lt;/xsl:template&gt;
=09
	&lt;xsl:template match=3D&quot;TD&quot; mode=3D&quot;content&quot;&gt;
		&lt;td&gt;
			&lt;!-- copy all of the attributes --&gt;
			&lt;xsl:for-each select=3D&quot;@*&quot;&gt;
				&lt;xsl:attribute name=3D&quot;{name()}&quot;&gt;&lt;xsl:value-of select=3D&quot;.&quot;/&gt;&lt;/xsl:attr=
ibute&gt;
			&lt;/xsl:for-each&gt;
			&lt;xsl:attribute name=3D&quot;class&quot;&gt;t70&lt;/xsl:attribute&gt;
			&lt;xsl:apply-templates mode=3D&quot;content&quot;/&gt;
		&lt;/td&gt;
	&lt;/xsl:template&gt;


	&lt;xsl:template name=3D&quot;make-upper&quot;&gt;
		&lt;xsl:param name=3D&quot;upper-text&quot;/&gt;
		&lt;xsl:value-of select=3D&quot;translate($upper-text, 'abcdefghijklmnopqrstuvwxy=
z=C3=A9=C3=A8', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ=C3=89=C3=88')&quot;/&gt;
	&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
--Boundary-00=_xBeB/DEGjx6tqTm
Content-Type: text/xml;
  charset=&quot;iso-8859-1&quot;;
  name=&quot;notes.xsl&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename=&quot;notes.xsl&quot;

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform"">http://www.w3.org/1999/XSL/Transform&quot;</A>&gt;
&lt;xsl:import href=&quot;DeepCopy.xsl&quot;/&gt;
&lt;xsl:output method=&quot;xml&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;
		
	&lt;xsl:template match=&quot;content&quot;&gt;
		&lt;p class=&quot;newsTitle&quot;&gt;&lt;xsl:value-of select=&quot;normalize-space (//placeholder[@id='1']/placeholder-content)&quot;/&gt;
		&lt;br/&gt;&lt;span class=&quot;p&quot;&gt;&lt;xsl:value-of select=&quot;normalize-space (//placeholder[@id='2']/placeholder-content)&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
	&lt;/xsl:template&gt;	
		
&lt;/xsl:stylesheet&gt;

--Boundary-00=_xBeB/DEGjx6tqTm
Content-Type: text/xml;
  charset=&quot;iso-8859-1&quot;;
  name=&quot;test.xml&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename=&quot;test.xml&quot;

&lt;ir-content-item id=&quot;10&quot; name=&quot;Test&quot; template=&quot;notes.xml&quot;&gt;&lt;content-metadata&gt;&lt;standard-metadata&gt;&lt;authors&gt;&lt;author id=&quot;1&quot; first-name=&quot;Ivan&quot; last-name=&quot;Hawkes&quot; email-address=&quot;<A HREF="mailto:blackhawk@ivanhawkes.com">blackhawk@ivanhawkes.com</A>&quot;&gt;&lt;/author&gt;&lt;/authors&gt;&lt;modified date=&quot;Thu Jul
3 22:24:46 UTC+0100 2003&quot;&gt;&lt;/modified&gt;&lt;/standard-metadata&gt;&lt;/content-metadata&gt;&lt;content&gt;&lt;placeholder id=&quot;1&quot;&gt;&lt;placeholder-content&gt;Some Notes&lt;/placeholder-content&gt;&lt;/placeholder&gt;&lt;placeholder id=&quot;2&quot;&gt;&lt;placeholder-content&gt;I made some notes about it
for the sidebar. I made some notes about it for the sidebar. I made some notes about it for the sidebar. I made some notes about it for the sidebar. I made some notes about it for the sidebar.&lt;/placeholder-content&gt;&lt;/placeholder&gt;&lt;/content&gt;&lt;/ir-content-item&gt;
--Boundary-00=_xBeB/DEGjx6tqTm--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014783.html">[Mono-list] Problem with monoresgen
</A></li>
	<LI> Next message: <A HREF="014800.html">[Mono-list] XSLT Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14784">[ date ]</a>
              <a href="thread.html#14784">[ thread ]</a>
              <a href="subject.html#14784">[ subject ]</a>
              <a href="author.html#14784">[ author ]</a>
         </LI>
       </UL>
</body></html>
