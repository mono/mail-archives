<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Why mono_marshal_get_runtime_invoke() ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lupus%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014902.html">
   <LINK REL="Next"  HREF="014781.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Why mono_marshal_get_runtime_invoke() ?
   </H1>
    <B>Paolo Molaro
    </B> 
    <A HREF="mailto:lupus%40ximian.com"
       TITLE="[Mono-list] Why mono_marshal_get_runtime_invoke() ?">lupus@ximian.com
       </A><BR>
    <I>Tue, 15 Jul 2003 16:02:50 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="014902.html">AW: [Mono-list] Why mono_marshal_get_runtime_invoke() ?
</A></li>
        <LI> Next message: <A HREF="014781.html">[Mono-list] Problem with monoresgen
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15000">[ date ]</a>
              <a href="thread.html#15000">[ thread ]</a>
              <a href="subject.html#15000">[ subject ]</a>
              <a href="author.html#15000">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/04/03 Vivek, Bharath Varma (IE10) wrote:
&gt;<i> For the &quot;Main&quot; of my HelloWorld.exe application, this dynamically generated
</I>&gt;<i> IL code gets compiled to a function that in turn makes a call to the
</I>&gt;<i> runtime's function called &quot;mono_ldftn&quot;(load function token), which
</I>&gt;<i> eventually goes on to compile my HelloWorld.exe's &quot;Main&quot;. 
</I>&gt;<i> If we know the managed application's entry point method(&quot;Main&quot;) why don't we
</I>&gt;<i> compile and call it directly? Why do we create a function which in turn
</I>&gt;<i> calls the entry point method? 
</I>&gt;<i> 
</I>&gt;<i> I found that this mechanism is used for certain other functions too(some of
</I>&gt;<i> which are functions that support opcode emulation). What's basis for
</I>&gt;<i> deciding which functions in the runtime will need this dynamic IL wrapper
</I>&gt;<i> mechanism?
</I>
The main reason, as Dietmar explained, is to handle exceptions: the
generated method has a filter exception clause. This lets the C code
easily intercept exceptions if needed. The other main reason is that
the calling convention used by the managed methods may be different from
the calling convention of functions in the C code: you need a wrapper
that does the appropriate conversions.

lupus

-- 
-----------------------------------------------------------------
<A HREF="mailto:lupus@debian.org">lupus@debian.org</A>                                     debian/rules
<A HREF="mailto:lupus@ximian.com">lupus@ximian.com</A>                             Monkeys do it better

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014902.html">AW: [Mono-list] Why mono_marshal_get_runtime_invoke() ?
</A></li>
	<LI> Next message: <A HREF="014781.html">[Mono-list] Problem with monoresgen
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15000">[ date ]</a>
              <a href="thread.html#15000">[ thread ]</a>
              <a href="subject.html#15000">[ subject ]</a>
              <a href="author.html#15000">[ author ]</a>
         </LI>
       </UL>
</body></html>
