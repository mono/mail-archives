<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Dispose method is never called
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:normri%40samc.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014859.html">
   <LINK REL="Next"  HREF="014864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Dispose method is never called
   </H1>
    <B>Richard Norman
    </B> 
    <A HREF="mailto:normri%40samc.com"
       TITLE="[Mono-list] Dispose method is never called">normri@samc.com
       </A><BR>
    <I>Mon, 07 Jul 2003 09:45:05 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="014859.html">[Mono-list] Re: [Mono-cvs-list] STUDENTS INTERSTED IN CONTRIBUTING MONO PROJECT
</A></li>
        <LI> Next message: <A HREF="014864.html">[Mono-list] Hidden variables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14860">[ date ]</a>
              <a href="thread.html#14860">[ thread ]</a>
              <a href="subject.html#14860">[ subject ]</a>
              <a href="author.html#14860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a MIME message. If you are reading this text, you may want to 
consider changing to a mail reader or gateway that understands how to 
properly handle MIME multipart messages.

--=_742A4F89.10710587
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Please someone correct me if I am wrong,
 
What I believe you created is a finalizer.  Dispose is implemented as a
method you call on the object to clean up resources. The finalizer is
not called until the object is actually garbage collected. So it could
sit in memory for an undetermined amount of time before the finalizer is
called. (after writing this and reading two more times, Gonzalo does
have a point)
 
The IDispose interface is used to be able to clear up resources without
necessarily being garbage collected right away.
 
Here are some articles on MSDN:
<A HREF="http://search.microsoft.com/default.asp?qu=IDispose&boolean=ALL&so=RECCNT&p=1&nq=NEW&ig=03&ig=04&i=99&ig=05&i=99&ig=02&i=42&i=43&i=44&i=45&i=46&i=47&i=48&i=49&i=50&i=51&i=52&i=53&i=54&i=55&i=56&i=57&i=58&i=59&i=60&i=61&i=62&i=63&ig=07&i=99&ig=01&i=00&i=01&i=02&i=03&i=04&i=05&i=06&i=07&i=08&i=09&i=10&i=11&i=12&i=13&i=14&i=15&i=16&i=17&i=18&i=19&i=20&i=21&i=22&i=23&i=24&i=25&i=26&i=27&i=28&i=29&i=30&i=31&i=32&i=33&i=34&i=35&i=36&i=37&i=38&i=39&i=40&i=41&i=99&siteid=us/dev">http://search.microsoft.com/default.asp?qu=IDispose&amp;boolean=ALL&amp;so=RECCNT&amp;p=1&amp;nq=NEW&amp;ig=03&amp;ig=04&amp;i=99&amp;ig=05&amp;i=99&amp;ig=02&amp;i=42&amp;i=43&amp;i=44&amp;i=45&amp;i=46&amp;i=47&amp;i=48&amp;i=49&amp;i=50&amp;i=51&amp;i=52&amp;i=53&amp;i=54&amp;i=55&amp;i=56&amp;i=57&amp;i=58&amp;i=59&amp;i=60&amp;i=61&amp;i=62&amp;i=63&amp;ig=07&amp;i=99&amp;ig=01&amp;i=00&amp;i=01&amp;i=02&amp;i=03&amp;i=04&amp;i=05&amp;i=06&amp;i=07&amp;i=08&amp;i=09&amp;i=10&amp;i=11&amp;i=12&amp;i=13&amp;i=14&amp;i=15&amp;i=16&amp;i=17&amp;i=18&amp;i=19&amp;i=20&amp;i=21&amp;i=22&amp;i=23&amp;i=24&amp;i=25&amp;i=26&amp;i=27&amp;i=28&amp;i=29&amp;i=30&amp;i=31&amp;i=32&amp;i=33&amp;i=34&amp;i=35&amp;i=36&amp;i=37&amp;i=38&amp;i=39&amp;i=40&amp;i=41&amp;i=99&amp;siteid=us/dev</A>
 
This article is particularly good...
<A HREF="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dncscol/html/deepc10192000.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dncscol/html/deepc10192000.asp</A>
 
Now I may be off base at what's being asked, but In general if you
follow the linked articles, it generally should work.
 
Richard Norman
Web/Application Developer
 
El dom, 06-07-2003 a las 17:20, Giuseppe Greco escribi=:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> I've a class that starts a worker thread like
</I>&gt;<i> this:
</I>&gt;<i> 
</I>&gt;<i> class MyClass
</I>&gt;<i> {
</I>&gt;<i>   bool isDisposed = false;
</I>&gt;<i>   Thread myThread;
</I>&gt;<i> 
</I>&gt;<i>   public MyClass()
</I>&gt;<i>   {
</I>&gt;<i>       ...
</I>&gt;<i>       myThread = new Thread(new ThreadStart(MyThreadMethod));
</I>&gt;<i>       myThread.Start();
</I>&gt;<i>       myThread.IsBackground = true;
</I>&gt;<i>    }
</I>&gt;<i> 
</I>&gt;<i>   ~MyClass()
</I>&gt;<i>   {
</I>&gt;<i>     Dispose(false)
</I>&gt;<i>   }
</I>&gt;<i> 
</I>&gt;<i>   public void Dispose()
</I>&gt;<i>   {
</I>&gt;<i>     Dispose(true);
</I>&gt;<i>     GC.SuppressFinalize(this);
</I>&gt;<i>   }
</I>&gt;<i> 
</I>&gt;<i>   protected virtual void Dispose(bool disposing)
</I>&gt;<i>   {
</I>&gt;<i>     if (!isDisposed) {
</I>&gt;<i>       isDisposed = true;
</I>&gt;<i> 
</I>&gt;<i>       myThread.Join(); // should wait until MyThreadMethod()
</I>&gt;<i>                        // completes its work...
</I>&gt;<i>       myThread = null;
</I>&gt;<i>                                                                  
</I>&gt;<i>       if (disposing) {
</I>&gt;<i>         ...
</I>&gt;<i>       }
</I>&gt;<i>     }
</I>&gt;<i>   }
</I>&gt;<i> 
</I>&gt;<i>   private void MyThreadMethod()
</I>&gt;<i>   {
</I>&gt;<i>     while (!isDisposed) {
</I>&gt;<i>       ...
</I>&gt;<i>     {
</I>&gt;<i>   }
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> Well, in the class above, the Dispose() method is never
</I>&gt;<i> called. This is a problem if one needs to wait until the
</I>&gt;<i> thread has finished its work -- Thread.Join() should block
</I>&gt;<i> until then.
</I>&gt;<i> 
</I>&gt;<i> The destructor -- ~MyClass() -- is never called.
</I> 
Is it called under windows? I think it's not because MyThreadMethod is
accessing isDisposed field, which belongs to the class instance.
That's
why it's never disposed.
 
-Gonzalo
 

 

--=_742A4F89.10710587
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
Content-Description: HTML

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;
&lt;HTML&gt;&lt;HEAD&gt;
&lt;META http-equiv=Content-Type content=&quot;text/html; charset=windows-1252&quot;&gt;
&lt;META content=&quot;MSHTML 6.00.2800.1173&quot; name=GENERATOR&gt;&lt;/HEAD&gt;
&lt;BODY style=&quot;MARGIN: 4px 4px 1px; FONT: 12pt Arial&quot;&gt;
&lt;DIV&gt;Please someone correct me if I am wrong,&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;What I believe you created is a finalizer.&amp;nbsp; Dispose is implemented as 
a method you call on the object to clean up resources. The finalizer is not 
called until the object is actually garbage collected. So it could sit in memory 
for an undetermined amount of time before the finalizer is called. (after 
writing this and reading two more times, Gonzalo does have a point)&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;The IDispose interface is used to be able to clear up resources without 
necessarily being garbage collected right away.&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;Here are some articles on MSDN:&lt;/DIV&gt;
&lt;DIV&gt;&lt;A 
href=&quot;<A HREF="http://search.microsoft.com/default.asp?qu=IDispose&amp;boolean=ALL&amp;so=RECCNT&amp;p=1&amp;nq=NEW&amp;ig=03&amp;ig=04&amp;i=99&amp;ig=05&amp;i=99&amp;ig=02&amp;i=42&amp;i=43&amp;i=44&amp;i=45&amp;i=46&amp;i=47&amp;i=48&amp;i=49&amp;i=50&amp;i=51&amp;i=52&amp;i=53&amp;i=54&amp;i=55&amp;i=56&amp;i=57&amp;i=58&amp;i=59&amp;i=60&amp;i=61&amp;i=62&amp;i=63&amp;ig=07&amp;i=99&amp;ig=01&amp;i=00&amp;i=01&amp;i=02&amp;i=03&amp;i=04&amp;i=05&amp;i=06&amp;i=07&amp;i=08&amp;i=09&amp;i=10&amp;i=11&amp;i=12&amp;i=13&amp;i=14&amp;i=15&amp;i=16&amp;i=17&amp;i=18&amp;i=19&amp;i=20&amp;i=21&amp;i=22&amp;i=23&amp;i=24&amp;i=25&amp;i=26&amp;i=27&amp;i=28&amp;i=29&amp;i=30&amp;i=31&amp;i=32&amp;i=33&amp;i=34&amp;i=35&amp;i=36&amp;i=37&amp;i=38&amp;i=39&amp;i=40&amp;i=41&amp;i=99&amp;siteid=us/dev"">http://search.microsoft.com/default.asp?qu=IDispose&amp;amp;boolean=ALL&amp;amp;so=RECCNT&amp;amp;p=1&amp;amp;nq=NEW&amp;amp;ig=03&amp;amp;ig=04&amp;amp;i=99&amp;amp;ig=05&amp;amp;i=99&amp;amp;ig=02&amp;amp;i=42&amp;amp;i=43&amp;amp;i=44&amp;amp;i=45&amp;amp;i=46&amp;amp;i=47&amp;amp;i=48&amp;amp;i=49&amp;amp;i=50&amp;amp;i=51&amp;amp;i=52&amp;amp;i=53&amp;amp;i=54&amp;amp;i=55&amp;amp;i=56&amp;amp;i=57&amp;amp;i=58&amp;amp;i=59&amp;amp;i=60&amp;amp;i=61&amp;amp;i=62&amp;amp;i=63&amp;amp;ig=07&amp;amp;i=99&amp;amp;ig=01&amp;amp;i=00&amp;amp;i=01&amp;amp;i=02&amp;amp;i=03&amp;amp;i=04&amp;amp;i=05&amp;amp;i=06&amp;amp;i=07&amp;amp;i=08&amp;amp;i=09&amp;amp;i=10&amp;amp;i=11&amp;amp;i=12&amp;amp;i=13&amp;amp;i=14&amp;amp;i=15&amp;amp;i=16&amp;amp;i=17&amp;amp;i=18&amp;amp;i=19&amp;amp;i=20&amp;amp;i=21&amp;amp;i=22&amp;amp;i=23&amp;amp;i=24&amp;amp;i=25&amp;amp;i=26&amp;amp;i=27&amp;amp;i=28&amp;amp;i=29&amp;amp;i=30&amp;amp;i=31&amp;amp;i=32&amp;amp;i=33&amp;amp;i=34&amp;amp;i=35&amp;amp;i=36&amp;amp;i=37&amp;amp;i=38&amp;amp;i=39&amp;amp;i=40&amp;amp;i=41&amp;amp;i=99&amp;amp;siteid=us/dev&quot;</A>&gt;<A HREF="http://search.microsoft.com/default.asp?qu=IDispose&amp;boolean=ALL&amp;so=RECCNT&amp;p=1&amp;nq=NEW&amp;ig=03&amp;ig=04&amp;i=99&amp;ig=05&amp;i=99&amp;ig=02&amp;i=42&amp;i=43&amp;i=44&amp;i=45&amp;i=46&amp;i=47&amp;i=48&amp;i=49&amp;i=50&amp;i=51&amp;i=52&amp;i=53&amp;i=54&amp;i=55&amp;i=56&amp;i=57&amp;i=58&amp;i=59&amp;i=60&amp;i=61&amp;i=62&amp;i=63&amp;ig=07&amp;i=99&amp;ig=01&amp;i=00&amp;i=01&amp;i=02&amp;i=03&amp;i=04&amp;i=05&amp;i=06&amp;i=07&amp;i=08&amp;i=09&amp;i=10&amp;i=11&amp;i=12&amp;i=13&amp;i=14&amp;i=15&amp;i=16&amp;i=17&amp;i=18&amp;i=19&amp;i=20&amp;i=21&amp;i=22&amp;i=23&amp;i=24&amp;i=25&amp;i=26&amp;i=27&amp;i=28&amp;i=29&amp;i=30&amp;i=31&amp;i=32&amp;i=33&amp;i=34&amp;i=35&amp;i=36&amp;i=37&amp;i=38&amp;i=39&amp;i=40&amp;i=41&amp;i=99&amp;siteid=us/dev</A">http://search.microsoft.com/default.asp?qu=IDispose&amp;amp;boolean=ALL&amp;amp;so=RECCNT&amp;amp;p=1&amp;amp;nq=NEW&amp;amp;ig=03&amp;amp;ig=04&amp;amp;i=99&amp;amp;ig=05&amp;amp;i=99&amp;amp;ig=02&amp;amp;i=42&amp;amp;i=43&amp;amp;i=44&amp;amp;i=45&amp;amp;i=46&amp;amp;i=47&amp;amp;i=48&amp;amp;i=49&amp;amp;i=50&amp;amp;i=51&amp;amp;i=52&amp;amp;i=53&amp;amp;i=54&amp;amp;i=55&amp;amp;i=56&amp;amp;i=57&amp;amp;i=58&amp;amp;i=59&amp;amp;i=60&amp;amp;i=61&amp;amp;i=62&amp;amp;i=63&amp;amp;ig=07&amp;amp;i=99&amp;amp;ig=01&amp;amp;i=00&amp;amp;i=01&amp;amp;i=02&amp;amp;i=03&amp;amp;i=04&amp;amp;i=05&amp;amp;i=06&amp;amp;i=07&amp;amp;i=08&amp;amp;i=09&amp;amp;i=10&amp;amp;i=11&amp;amp;i=12&amp;amp;i=13&amp;amp;i=14&amp;amp;i=15&amp;amp;i=16&amp;amp;i=17&amp;amp;i=18&amp;amp;i=19&amp;amp;i=20&amp;amp;i=21&amp;amp;i=22&amp;amp;i=23&amp;amp;i=24&amp;amp;i=25&amp;amp;i=26&amp;amp;i=27&amp;amp;i=28&amp;amp;i=29&amp;amp;i=30&amp;amp;i=31&amp;amp;i=32&amp;amp;i=33&amp;amp;i=34&amp;amp;i=35&amp;amp;i=36&amp;amp;i=37&amp;amp;i=38&amp;amp;i=39&amp;amp;i=40&amp;amp;i=41&amp;amp;i=99&amp;amp;siteid=us/dev&lt;/A</A>&gt;&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;This article is particularly good...&lt;/DIV&gt;
&lt;DIV&gt;&lt;A 
href=&quot;<A HREF="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dncscol/html/deepc10192000.asp"">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dncscol/html/deepc10192000.asp&quot;</A>&gt;<A HREF="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dncscol/html/deepc10192000.asp</A">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dncscol/html/deepc10192000.asp&lt;/A</A>&gt;&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;Now I may be off base at what's being asked, but In general if you follow 
the linked articles, it generally should work.&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;Richard Norman&lt;/DIV&gt;
&lt;DIV&gt;Web/Application Developer&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;El dom, 06-07-2003 a las 17:20, Giuseppe Greco escribi=:&lt;BR&gt;&amp;gt; Hi 
all,&lt;BR&gt;&amp;gt; &lt;BR&gt;&amp;gt; I've a class that starts a worker thread like&lt;BR&gt;&amp;gt; 
this:&lt;BR&gt;&amp;gt; &lt;BR&gt;&amp;gt; class MyClass&lt;BR&gt;&amp;gt; {&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; bool 
isDisposed = false;&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; Thread myThread;&lt;BR&gt;&amp;gt; 
&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; public MyClass()&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; 
{&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 
...&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; myThread = new Thread(new 
ThreadStart(MyThreadMethod));&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 
myThread.Start();&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 
myThread.IsBackground = true;&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;BR&gt;&amp;gt; 
&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; ~MyClass()&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; 
{&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Dispose(false)&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; }&lt;BR&gt;&amp;gt; 
&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; public void Dispose()&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; 
{&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Dispose(true);&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 
GC.SuppressFinalize(this);&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; }&lt;BR&gt;&amp;gt; &lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; 
protected virtual void Dispose(bool disposing)&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; 
{&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if (!isDisposed) 
{&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; isDisposed = true;&lt;BR&gt;&amp;gt; 
&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; myThread.Join(); // should wait 
until 
MyThreadMethod()&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 
// completes its work...&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; myThread = 
null;&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 
&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if (disposing) 
{&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 
...&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 
}&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; }&lt;BR&gt;&amp;gt; 
&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; private void MyThreadMethod()&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; 
{&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; while (!isDisposed) 
{&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 
...&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp; }&lt;BR&gt;&amp;gt; }&lt;BR&gt;&amp;gt; 
&lt;BR&gt;&amp;gt; Well, in the class above, the Dispose() method is never&lt;BR&gt;&amp;gt; called. 
This is a problem if one needs to wait until the&lt;BR&gt;&amp;gt; thread has finished its 
work -- Thread.Join() should block&lt;BR&gt;&amp;gt; until then.&lt;BR&gt;&amp;gt; &lt;BR&gt;&amp;gt; The 
destructor -- ~MyClass() -- is never called.&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;Is it called under windows? I think it's not because MyThreadMethod 
is&lt;BR&gt;accessing isDisposed field, which belongs to the class instance. 
That's&lt;BR&gt;why it's never disposed.&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;-Gonzalo&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;BR&gt;&amp;nbsp;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;

--=_742A4F89.10710587--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014859.html">[Mono-list] Re: [Mono-cvs-list] STUDENTS INTERSTED IN CONTRIBUTING MONO PROJECT
</A></li>
	<LI> Next message: <A HREF="014864.html">[Mono-list] Hidden variables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14860">[ date ]</a>
              <a href="thread.html#14860">[ thread ]</a>
              <a href="subject.html#14860">[ subject ]</a>
              <a href="author.html#14860">[ author ]</a>
         </LI>
       </UL>
</body></html>
