<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Segmentation fault with &quot;GC_ENABLE_INCREMENTAL&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:t.fransen%40mailned.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="015024.html">
   <LINK REL="Next"  HREF="015001.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Segmentation fault with &quot;GC_ENABLE_INCREMENTAL&quot;
   </H1>
    <B>Tom Fransen
    </B> 
    <A HREF="mailto:t.fransen%40mailned.nl"
       TITLE="[Mono-list] Segmentation fault with &quot;GC_ENABLE_INCREMENTAL&quot;">t.fransen@mailned.nl
       </A><BR>
    <I>Tue, 22 Jul 2003 06:10:30 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="015024.html">[Mono-list] Segmentation fault with &quot;GC_ENABLE_INCREMENTAL&quot;
</A></li>
        <LI> Next message: <A HREF="015001.html">[Mono-list] Segmentation fault / StackOverflowException not thrown
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15077">[ date ]</a>
              <a href="thread.html#15077">[ thread ]</a>
              <a href="subject.html#15077">[ subject ]</a>
              <a href="author.html#15077">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Okehee,

below the reply I got on a similar question:

 | On a Linux system
 | (and on many others) turning on incremental collection will cause the
 | heap to be write protected.  The collector will handle the resulting
 | write faults, unless they occur inside a system call.  Thus you will
 | need to be careful with, and preferably avoid, system calls that write
 | directly to the garbage-collected heap.  (If the application is
 | single-threaded, or nearly single-threaded, you can also wrap the system
 | calls with some routines provided by the collector.  In some cases, it's
 | also OK to have system calls write to objects allocated with
 | GC_MALLOC_ATOMIC.  But this has turned out to be enough of an issue that
 | I believe there are relatively few clients for the incremental
 | collector.)

In other words, turning on incremental collection would require
carefully vetting the mono source code to make sure that there are no
calls to system calls that might write directly to memory allocated
with GC_malloc() and friends.  There might also be some nasty
interactions with the C interface (PlatformInvoke etc.)


-----Original Message-----
From: <A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>
[mailto:<A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>]On Behalf Of Okehee Goh
Sent: Wednesday, July 16, 2003 11:09 PM
To: <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
Subject: [Mono-list] Segmentation fault with &quot;GC_ENABLE_INCREMENTAL&quot;





 Hello,
 I run Mono-0.25 with &quot;GC_ENABLE_INCREMENTAL&quot; to enable an incremental GC.
 But it just gave a segmentation fault.
 One of documents regarding Boehm's GC says that the incremental GC can
cause &quot;unintended system call failure.&quot;
 (Refer to the following..)
 Is there anybody who didn't encounter this problem? My system is Linux
kernel 2.4 and i686.

  ---
 GC_ENABLE_INCREMENTAL - Turn on incremental collection at startup. Note
that,
depending on platform and collector configuration, this
may involve write protecting pieces of the heap to
track modifications. These pieces may include pointerfree
objects or not. Although this is intended to be
transparent, it may cause unintended system call failures.
Use with caution.


 Any suggestion will be appreciated.

 Regards,

 Okehee

_______________________________________________
Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="015024.html">[Mono-list] Segmentation fault with &quot;GC_ENABLE_INCREMENTAL&quot;
</A></li>
	<LI> Next message: <A HREF="015001.html">[Mono-list] Segmentation fault / StackOverflowException not thrown
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15077">[ date ]</a>
              <a href="thread.html#15077">[ thread ]</a>
              <a href="subject.html#15077">[ subject ]</a>
              <a href="author.html#15077">[ author ]</a>
         </LI>
       </UL>
</body></html>
