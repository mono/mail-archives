<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Monodoc - doc generator
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jaroslaw.kowalski%40atm.com.pl">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014940.html">
   <LINK REL="Next"  HREF="014935.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Monodoc - doc generator
   </H1>
    <B>Jaroslaw Kowalski
    </B> 
    <A HREF="mailto:jaroslaw.kowalski%40atm.com.pl"
       TITLE="[Mono-list] Monodoc - doc generator">jaroslaw.kowalski@atm.com.pl
       </A><BR>
    <I>Sun, 13 Jul 2003 13:35:20 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="014940.html">[Mono-list] Monodoc - doc generator
</A></li>
        <LI> Next message: <A HREF="014935.html">[Mono-list] Monodoc - doc generator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14942">[ date ]</a>
              <a href="thread.html#14942">[ thread ]</a>
              <a href="subject.html#14942">[ subject ]</a>
              <a href="author.html#14942">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

------=_NextPart_000_001C_01C34943.9AB38A80
Content-Type: text/plain;
	charset=&quot;windows-1250&quot;
Content-Transfer-Encoding: 7bit

Hi all!

I really needed that tool so I sat down and wrote it. It's attached to my
e-mail and everyone is free to use it (BSD license).

It's ultra quick-and-dirty, so please excuse its design.
Usage is very simple, and batch file used for testing is attached.

Please note, that this tool was only tested on Windows/.NET 1.1 but should
work on Mono/Linux without any changes.

Can someone add this to monodoc CVS directory?

Jarek

----- Original Message -----
From: &quot;Giuseppe Greco&quot; &lt;<A HREF="mailto:giuseppe.greco@agamura.com">giuseppe.greco@agamura.com</A>&gt;
To: &quot;Jaroslaw Kowalski&quot; &lt;<A HREF="mailto:jaak@zd.com.pl">jaak@zd.com.pl</A>&gt;
Cc: &quot;Miguel de Icaza&quot; &lt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&gt;; &quot;Mono&quot; &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
Sent: Sunday, July 13, 2003 12:25 PM
Subject: Re: [Mono-list] Monodoc - doc generator


&gt;<i> On Sun, 2003-07-13 at 10:39, Jaroslaw Kowalski wrote:
</I>&gt;<i> &gt; Hi!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Is there any tool (or is anybody working on it) to convert monodoc
</I>source
&gt;<i> &gt; files to the xml format emitted by csc compiler?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This way, one could use it to produce nice output with ndoc.
</I>&gt;<i>
</I>&gt;<i> I think this would be really nice...
</I>&gt;<i>
</I>&gt;<i> We have developed our system with Mono on Linux, but to produce
</I>&gt;<i> the first version of the SDK documentation, we had to switch to
</I>&gt;<i> Windows...
</I>&gt;<i>
</I>&gt;<i> At that point, before we proceed with our project, we have to
</I>&gt;<i> fix the documentation issue, so that in the future we will not
</I>&gt;<i> have to setup a Windows machine any more just to generate the
</I>&gt;<i> documentation.
</I>&gt;<i>
</I>&gt;<i> The nice thing with ndoc is the possibility to generate LaTeX
</I>&gt;<i> source, from which one can generate either PDF or PS output.
</I>&gt;<i>
</I>&gt;<i> We would like to automatically generate our documentation in
</I>&gt;<i> the following formats:
</I>&gt;<i>
</I>&gt;<i> . ECMA
</I>&gt;<i> . HTML
</I>&gt;<i> . PDF
</I>&gt;<i>
</I>&gt;<i> By the way, since our development platform is Linux only, and we
</I>&gt;<i> decided to use the Mono framework only, for the moment it would
</I>&gt;<i> be enough to get the documentation generated with what is available
</I>&gt;<i> right now.
</I>&gt;<i>
</I>&gt;<i> Would it possible to get a step-by-step description of how to
</I>&gt;<i> setup a documentation project based on monodoc?
</I>&gt;<i>
</I>&gt;<i> Gius_.
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Jarek
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ----- Original Message -----
</I>&gt;<i> &gt; From: &quot;Miguel de Icaza&quot; &lt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&gt;
</I>&gt;<i> &gt; To: &quot;Giuseppe Greco&quot; &lt;<A HREF="mailto:giuseppe.greco@agamura.com">giuseppe.greco@agamura.com</A>&gt;
</I>&gt;<i> &gt; Cc: &quot;Mono&quot; &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
</I>&gt;<i> &gt; Sent: Saturday, July 12, 2003 11:20 PM
</I>&gt;<i> &gt; Subject: Re: [Mono-list] Monodoc - doc generator
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Hello,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I've checked out monodoc from CVS and I've seen there is
</I>&gt;<i> &gt; &gt; &gt; a tool named updater.exe in the &quot;generator&quot; directory.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; update.exe takes an assembly as an input and then
</I>&gt;<i> &gt; &gt; &gt; generates XML documentation stubs.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Does that means that I wouldn't be able to extract
</I>&gt;<i> &gt; &gt; &gt; documentation comments from my C# source files at all?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Today our C# compiler does not extract documentation from the C#
</I>source
&gt;<i> &gt; &gt; code, but it is something that is in our TODO list.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Monodoc is the framework to document the Mono class libraries, so we
</I>&gt;<i> &gt; &gt; have slightly different needs than the documentation typically
</I>embedded
&gt;<i> &gt; &gt; in C# code.   There were various reasons why Mono as a project
</I>&gt;<i> &gt; &gt; decided a few months ago to use the ECMA XML file format as its master
</I>&gt;<i> &gt; &gt; file format as opposed to the C# markup, and they are:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; * Internationalization issues: documentation embedded in the
</I>&gt;<i> &gt; &gt;   source code is only available in one language.  This possed
</I>&gt;<i> &gt; &gt;   a problem: documentation for other languages had to be kept
</I>&gt;<i> &gt; &gt;   on separate files, so we had to define a file format for this.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;   Basically, it would not be practical to have documentation in
</I>&gt;<i> &gt; &gt;   30+ languages in the source code.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;   It would also not be practical to track updates to the
</I>&gt;<i> &gt; &gt;   documentation if it were to be embedded.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; * Inline documentation is best to document the workings of the
</I>&gt;<i> &gt; &gt;   code and not necessarily the exposed API.  It might work for
</I>&gt;<i> &gt; &gt;   smaller projects, but it becomes a liability to maintain the
</I>&gt;<i> &gt; &gt;   code to include all the documentation inline in our opinion.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;   Rotor's API documentation are a good proof of this: the
</I>&gt;<i> &gt; &gt;   documentation is actually just &quot;linked&quot; from the main source
</I>&gt;<i> &gt; &gt;   code, I imagine that they also encountered this problem.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; * Using the format that the ECMA group used to define the API
</I>&gt;<i> &gt; &gt;   meant that we could bootstrap our documentation effort
</I>&gt;<i> &gt; &gt;   quickly.  We have since extended this format to suit the needs
</I>&gt;<i> &gt; &gt;   of Mono better (Some changes were done by Duncan, and more
</I>&gt;<i> &gt; &gt;   recently Joshua Trauber has updated its format).
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Hai! That also means I've to manually move all the
</I>&gt;<i> &gt; &gt; &gt; documentation comments from my C# source files into these
</I>&gt;<i> &gt; &gt; &gt; generated stub files...
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Another option is to contribute the code to extract the documentation
</I>in
&gt;<i> &gt; &gt; C# source files, and contribute another monodoc provider;  That was
</I>one
&gt;<i> &gt; &gt; of the design goals behind Monodoc (today we have three providers).
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Did the Mono team decide to not implement the -doc option
</I>&gt;<i> &gt; &gt; &gt; for mcs.exe at all, or are there plans for future development?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; It was not a priority, but as I said, at some point we will include
</I>it.
&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Miguel
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> --
</I>&gt;<i> ----------------------------------------
</I>&gt;<i> Giuseppe Greco
</I>&gt;<i>
</I>&gt;<i> ::agamura::
</I>&gt;<i>
</I>&gt;<i> phone:  +41 (0)91 604 67 65
</I>&gt;<i> mobile: +41 (0)76 390 60 32
</I>&gt;<i> email:  <A HREF="mailto:giuseppe.greco@agamura.com">giuseppe.greco@agamura.com</A>
</I>&gt;<i> web:    www.agamura.com
</I>&gt;<i> ----------------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>
------=_NextPart_000_001C_01C34943.9AB38A80
Content-Type: application/octet-stream;
	name=&quot;monodoc2ndoc.cs&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename=&quot;monodoc2ndoc.cs&quot;

/*

Copyright (c) 2002,2003 Jaroslaw Kowalski &lt;<A HREF="mailto:jaak@polbox.com">jaak@polbox.com</A>&gt;
All rights reserved.

Redistribution and use in source and binary forms, with or without=20
modification, are permitted provided that the following conditions=20
are met:

* Redistributions of source code must retain the above copyright notice, =

this list of conditions and the following disclaimer.=20

* Redistributions in binary form must reproduce the above copyright =
notice,
this list of conditions and the following disclaimer in the =
documentation
and/or other materials provided with the distribution.=20

* Neither the name of Jaroslaw Kowalski nor the names of its=20
contributors may be used to endorse or promote products derived from =
this
software without specific prior written permission.=20

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS =
IS&quot;
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, =
THE=20
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR =
PURPOSE=20
ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE =

LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR=20
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS =

INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN=20
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)=20
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF=20
THE POSSIBILITY OF SUCH DAMAGE.

*/
using System;
using System.IO;
using System.Xml;

class Monodoc2NDoc
{
	static bool wroteAssemblyInfo =3D false;
	static int Main(string[] args)
	{
		if (args.Length &lt; 2)
		{
			Console.WriteLine(&quot;Monodoc2NDoc - converts documentation from monodoc =
to ndoc format&quot;);
			Console.WriteLine();
			Console.WriteLine(&quot;Usage: monodoc2ndoc outputfile.xml dir1 dir2 .. =
dirN&quot;);=20
			Console.WriteLine(&quot;&quot;);
			Console.WriteLine(&quot;\toutputfile.xml is the name of file to create.&quot;);
			Console.WriteLine(&quot;\tdir1..N are directory names to scan for =
documentation XML files&quot;);
			return 1;
		}

		XmlTextWriter xw =3D new XmlTextWriter(args[0], =
System.Text.Encoding.UTF8);
		xw.Formatting =3D Formatting.Indented;

		for (int i =3D 1; i &lt; args.Length; ++i)
		{
			ProcessDirectory(xw, new DirectoryInfo(args[i]));
		}
		xw.Close();
		return 0;
	}

	private static void ProcessDirectory(XmlWriter xw, DirectoryInfo =
dirInfo)
	{
		Console.WriteLine(&quot;Processing directory {0}&quot;, dirInfo.FullName);

		foreach (DirectoryInfo subdir in dirInfo.GetDirectories())
		{
			ProcessDirectory(xw, subdir);
		}

		foreach (FileInfo fi in dirInfo.GetFiles())
		{
			if (fi.Extension !=3D &quot;.xml&quot;)
			{
				Console.WriteLine(&quot;Ignoring file: &quot; + fi.FullName);
				continue;
			}
			XmlDocument doc =3D new XmlDocument();
			Console.WriteLine(&quot;Loading {0}&quot;, fi.FullName);
			doc.Load(fi.FullName);

			if (!wroteAssemblyInfo)
			{
				xw.WriteStartDocument();
				xw.WriteStartElement(&quot;doc&quot;);
				xw.WriteStartElement(&quot;assembly&quot;);
				xw.WriteElementString(&quot;name&quot;, =
doc.SelectSingleNode(&quot;Type/AssemblyInfo/AssemblyName&quot;).InnerText);
				xw.WriteEndElement();
				xw.WriteStartElement(&quot;members&quot;);
				wroteAssemblyInfo =3D true;
			}

			if (doc.DocumentElement.LocalName !=3D &quot;Type&quot;)
			{
				Console.WriteLine(&quot;Ignoring file: &quot; + fi.FullName);
				continue;
			}

			string typeName =3D doc.SelectSingleNode(&quot;Type/@FullName&quot;).InnerText;

			xw.WriteStartElement(&quot;member&quot;);
			xw.WriteAttributeString(&quot;name&quot;, &quot;T:&quot; + typeName);
			foreach (XmlElement el in doc.SelectNodes(&quot;Type/Docs/*&quot;))
			{
				el.WriteTo(xw);
			};
			xw.WriteEndElement();

			foreach (XmlElement member in doc.SelectNodes(&quot;Type/Members/Member&quot;))
			{
				xw.WriteStartElement(&quot;member&quot;);
				xw.WriteAttributeString(&quot;name&quot;, GetMemberNameString(member, =
typeName));
				foreach (XmlElement el in member.SelectNodes(&quot;Docs/*&quot;))
				{
					el.WriteTo(xw);
				};
				xw.WriteEndElement();
			}
		}
	}

	private static string GetParametersString(XmlElement member)
	{
		string par =3D &quot;&quot;;
		XmlNodeList nodes =3D member.SelectNodes(&quot;Parameters/Parameter&quot;);
		if (nodes.Count !=3D 0)
		{
			par +=3D &quot;(&quot;;
			bool first =3D true;
			foreach (XmlElement el in nodes)
			{
				if (!first)
					par +=3D &quot;,&quot;;
				first =3D false;
				par +=3D el.GetAttribute(&quot;Type&quot;);
			}
			par +=3D &quot;)&quot;;
		}
		return par;
	}

	private static string GetMemberNameString(XmlElement member, string =
typeName)
	{
		switch (member.SelectSingleNode(&quot;MemberType&quot;).InnerText)
		{
			case &quot;Event&quot;:
				return &quot;E:&quot; + typeName + &quot;.&quot; + member.GetAttribute(&quot;MemberName&quot;) + =
GetParametersString(member);

			case &quot;Method&quot;:
				return &quot;M:&quot; + typeName + &quot;.&quot; + member.GetAttribute(&quot;MemberName&quot;) + =
GetParametersString(member);

			case &quot;Field&quot;:
				return &quot;F:&quot; + typeName + &quot;.&quot; + member.GetAttribute(&quot;MemberName&quot;) + =
GetParametersString(member);

			case &quot;Property&quot;:
				return &quot;P:&quot; + typeName + &quot;.&quot; + member.GetAttribute(&quot;MemberName&quot;) + =
GetParametersString(member);

			case &quot;Constructor&quot;:
				return &quot;M:&quot; + typeName + &quot;.#ctor&quot; + GetParametersString(member);

			default:
				throw new NotSupportedException(&quot;Unsupported MemberType: &quot; + =
member.SelectSingleNode(&quot;MemberType&quot;).InnerText);
		}
	}
}

------=_NextPart_000_001C_01C34943.9AB38A80
Content-Type: application/octet-stream;
	name=&quot;test.bat&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename=&quot;test.bat&quot;

csc monodoc2ndoc.cs 
monodoc2ndoc.exe corlib.xml M:\monodoc\class\corlib\en


------=_NextPart_000_001C_01C34943.9AB38A80--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014940.html">[Mono-list] Monodoc - doc generator
</A></li>
	<LI> Next message: <A HREF="014935.html">[Mono-list] Monodoc - doc generator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14942">[ date ]</a>
              <a href="thread.html#14942">[ thread ]</a>
              <a href="subject.html#14942">[ subject ]</a>
              <a href="author.html#14942">[ author ]</a>
         </LI>
       </UL>
</body></html>
