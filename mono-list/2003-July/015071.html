<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Dispose method is never called
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gius.greco%40bluewin.ch">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014920.html">
   <LINK REL="Next"  HREF="015079.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Dispose method is never called
   </H1>
    <B>Giuseppe Greco
    </B> 
    <A HREF="mailto:gius.greco%40bluewin.ch"
       TITLE="[Mono-list] Dispose method is never called">gius.greco@bluewin.ch
       </A><BR>
    <I>Mon, 21 Jul 2003 06:42:52 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="014920.html">[Mono-list] Dispose method is never called
</A></li>
        <LI> Next message: <A HREF="015079.html">[Mono-list] Dispose method is never called
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15071">[ date ]</a>
              <a href="thread.html#15071">[ thread ]</a>
              <a href="subject.html#15071">[ subject ]</a>
              <a href="author.html#15071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--========/3F15D7270000D9C9/mss1n.bluewin.ch
Content-Type: text/plain; charset=&quot;ISO-8859-1&quot;
Content-Transfer-Encoding: 8bit


&gt;<i>-- Original Message --
</I>&gt;<i>Subject: Re: [Mono-list] Dispose method is never called
</I>&gt;<i>From: Gonzalo Paniagua Javier &lt;<A HREF="mailto:gonzalo@ximian.com">gonzalo@ximian.com</A>&gt;
</I>&gt;<i>To: <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
</I>&gt;<i>Date: 11 Jul 2003 22:22:01 +0200
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>El vie, 11-07-2003 a las 12:19, Giuseppe Greco escribió:
</I>&gt;&gt;<i> &gt; &gt; 
</I>&gt;&gt;<i> &gt; &gt; Mono doesn't execute the Finalizer at all. I've posted this problem
</I>&gt;&gt;<i> &gt; &gt; to bugzilla.ximian.com. Look at bug #45962 and get the source code
</I>&gt;&gt;<i> &gt; &gt; I've used to reproduce the problem (source code is attached as a tarball).
</I>&gt;&gt;<i> &gt; &gt; 
</I>&gt;&gt;<i> &gt; &gt; Try to execute that small program either with .NET on Windows or with
</I>&gt;&gt;<i> &gt; &gt; Mono on Linux, and you'll see the differences...
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; Fixed in CVS.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Gonzalo, I've checked out the latest version of Mono
</I>&gt;&gt;<i> from CVS right now, but the problem is still there...
</I>&gt;<i>
</I>&gt;<i>Well, it works for me (tm) :-).
</I>&gt;<i>
</I>&gt;<i>However, it seems that the patch i applied causes some other troubles.
</I>&gt;<i>If I cannot fix them soon, i'll reopen the bug and add more info on
</I>&gt;<i>this.
</I>
Gonzalo, in mono-threaded applications the destructor
(or Finalize method) is called, but in multi-threaded
ones it isn't. Please try the attached program. As you
will see, the thread method is brutally interrupted and
the finalizer is never called.

If you comment out line 13, 14, and 15 in finalizer.cs,
then it works fine.

I hope that helps...

Gius_.

&gt;<i>
</I>&gt;<i>-Gonzalo
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>

--========/3F15D7270000D9C9/mss1n.bluewin.ch
Content-Type: application/x-gzip
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=&quot;finalizer.tar.gz&quot;

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

--========/3F15D7270000D9C9/mss1n.bluewin.ch--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014920.html">[Mono-list] Dispose method is never called
</A></li>
	<LI> Next message: <A HREF="015079.html">[Mono-list] Dispose method is never called
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15071">[ date ]</a>
              <a href="thread.html#15071">[ thread ]</a>
              <a href="subject.html#15071">[ subject ]</a>
              <a href="author.html#15071">[ author ]</a>
         </LI>
       </UL>
</body></html>
