<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: Seeing Values of Unwound Stack variables at Exception Handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:nospam_40811%40alltel.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="025006.html">
   <LINK REL="Next"  HREF="025041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: Seeing Values of Unwound Stack variables at Exception Handler
   </H1>
    <B>TB
    </B> 
    <A HREF="mailto:nospam_40811%40alltel.net"
       TITLE="[Mono-list] Re: Seeing Values of Unwound Stack variables at Exception Handler">nospam_40811@alltel.net
       </A><BR>
    <I>Mon, 20 Dec 2004 13:05:57 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="025006.html">[Mono-list] Debian apache2 mod_mono apxs bug/problem
</A></li>
        <LI> Next message: <A HREF="025041.html">[Mono-list] Re: Seeing Values of Unwound Stack variables
 at Exception Handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25014">[ date ]</a>
              <a href="thread.html#25014">[ thread ]</a>
              <a href="subject.html#25014">[ subject ]</a>
              <a href="author.html#25014">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I forgot to mention -- please reply directly to me.
I'm not subscribed.

On Mon, Dec 20, 2004 at 01:03:22PM -0500, TB wrote:
&gt;<i> With the Microsoft CLR one can use WinDBG !clrstack to view the CLR 
</I>&gt;<i> stack when an UHHANDLED exception is thrown.  But when you have an
</I>&gt;<i> try..catch exception block active, the stack will be unwound.  The
</I>&gt;<i> Exception.StackTrace property gives you the *names* of the methods
</I>&gt;<i> that were unwound, but not the locals or function parameters -- the 
</I>&gt;<i> stack variables.
</I>&gt;<i> 
</I>&gt;<i> Does Mono allow you to register a &quot;custom stack unwinder notification&quot;
</I>&gt;<i> function?  I could do it myself by adding the following code to every
</I>&gt;<i> single method body:
</I>&gt;<i> 
</I>&gt;<i> function MayThrowException (int arg1, int arg2, intarg3) {
</I>&gt;<i>   bool completed = false;
</I>&gt;<i>   try {
</I>&gt;<i>     // real method body
</I>&gt;<i>    completed = true;
</I>&gt;<i>   } finally {
</I>&gt;<i>     if (!completed) {
</I>&gt;<i>       //stash arg1, args2, arg3 on heap for later perusal
</I>&gt;<i>       //possibly serialize them
</I>&gt;<i>       //you can use reflection to enumerate all method
</I>&gt;<i>       //arguments, can you use serialization to enumerate
</I>&gt;<i>       //the locals?
</I>&gt;<i>     }
</I>&gt;<i>   }
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> The compiler could output this prolog/epilogue code
</I>&gt;<i> for each method.
</I>&gt;<i> 
</I>&gt;<i> But if the Runtime called back some code before it
</I>&gt;<i> unwinds the stack that would be best.  It would help
</I>&gt;<i> to debug.
</I>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="025006.html">[Mono-list] Debian apache2 mod_mono apxs bug/problem
</A></li>
	<LI> Next message: <A HREF="025041.html">[Mono-list] Re: Seeing Values of Unwound Stack variables
 at Exception Handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25014">[ date ]</a>
              <a href="thread.html#25014">[ thread ]</a>
              <a href="subject.html#25014">[ subject ]</a>
              <a href="author.html#25014">[ author ]</a>
         </LI>
       </UL>
</body></html>
