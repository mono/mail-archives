<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Support for marshalling of C# string to unmanaged wchar_t on Linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:kalabalun%40yahoo.co.in">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="024978.html">
   <LINK REL="Next"  HREF="024967.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Support for marshalling of C# string to unmanaged wchar_t on Linux
   </H1>
    <B>Kala B
    </B> 
    <A HREF="mailto:kalabalun%40yahoo.co.in"
       TITLE="[Mono-list] Support for marshalling of C# string to unmanaged wchar_t on Linux">kalabalun@yahoo.co.in
       </A><BR>
    <I>Fri, 17 Dec 2004 12:59:32 +0000 (GMT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="024978.html">[Mono-list] Support for marshalling of C# string to unmanaged
 wchar_t on Linux
</A></li>
        <LI> Next message: <A HREF="024967.html">[Mono-list] Re: Embedded mono (small devices)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24980">[ date ]</a>
              <a href="thread.html#24980">[ thread ]</a>
              <a href="subject.html#24980">[ subject ]</a>
              <a href="author.html#24980">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
Thanks for your suggestions.

I had actually used wsclen() in the sample code. I was
trying with strlen( and passing the string as
Charset.Auto) as well as wcslen( and passing the
string as Charset.Unicode). So, it was a copy-paste
problem. Sorry about that.

Thanks again,
Regards
Kala B.


 --- Jonathan Pryor &lt;<A HREF="mailto:jonpryor@vt.edu">jonpryor@vt.edu</A>&gt; wrote: 
&gt;<i> Corrections...
</I>&gt;<i> 
</I>&gt;<i> On Thu, 2004-12-16 at 21:22 -0500, Jonathan Pryor
</I>&gt;<i> wrote:
</I>&gt;<i> &lt;snip/&gt;
</I>&gt;<i> &gt; &gt; Contents of testlib.c
</I>&gt;<i> &gt; &gt; ---------------------
</I>&gt;<i> &gt; &gt; #include &lt;stdio.h&gt;
</I>&gt;<i> &gt; &gt; #include &lt;wchar.h&gt;
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; typedef struct _id
</I>&gt;<i> &gt; &gt; {
</I>&gt;<i> &gt; &gt;     int len;
</I>&gt;<i> &gt; &gt;     wchar_t name[256];
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Change &quot;name&quot; to the following and things work
</I>&gt;<i> better:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 	unsigned char name[256];
</I>&gt;<i> 
</I>&gt;<i> This should be &quot;unsigned short&quot;, not &quot;unsigned
</I>&gt;<i> char&quot;, obviously.
</I>&gt;<i> 
</I>&gt;<i> &lt;snip/&gt;
</I>&gt;<i> &gt; &gt;     printf(&quot;wcslen returns..
</I>&gt;<i> %d\n&quot;,strlen(id-&gt;name));
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Besides, you're not even using wcslen here, you're
</I>&gt;<i> using strlen here.
</I>&gt;<i> &gt; OF COURSE it'll return &quot;1&quot; -- it'll hit the &quot;null&quot;
</I>&gt;<i> embedded in the first
</I>&gt;<i> &gt; wide character.
</I>&gt;<i> 
</I>&gt;<i> Thinking about it, it'll be 0 or 1, depending on the
</I>&gt;<i> endian-ness of your
</I>&gt;<i> platform.  The character 'p' will be 0x0070, so on
</I>&gt;<i> little-endian
</I>&gt;<i> architectures strlen will return 1 while it will
</I>&gt;<i> return 0 on big-endian
</I>&gt;<i> architectures.  Silly me.
</I>&gt;<i> 
</I>&gt;<i>  - Jon
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>  
</I>
________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: <A HREF="http://yahoo.shaadi.com/india-matrimony">http://yahoo.shaadi.com/india-matrimony</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="024978.html">[Mono-list] Support for marshalling of C# string to unmanaged
 wchar_t on Linux
</A></li>
	<LI> Next message: <A HREF="024967.html">[Mono-list] Re: Embedded mono (small devices)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24980">[ date ]</a>
              <a href="thread.html#24980">[ thread ]</a>
              <a href="subject.html#24980">[ subject ]</a>
              <a href="author.html#24980">[ author ]</a>
         </LI>
       </UL>
</body></html>
