<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Debian apache2 mod_mono apxs bug/problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stuff%40dustsmoke.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="024998.html">
   <LINK REL="Next"  HREF="025000.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Debian apache2 mod_mono apxs bug/problem
   </H1>
    <B>Michael
    </B> 
    <A HREF="mailto:stuff%40dustsmoke.com"
       TITLE="[Mono-list] Debian apache2 mod_mono apxs bug/problem">stuff@dustsmoke.com
       </A><BR>
    <I>Mon, 20 Dec 2004 00:47:36 -0700 (MST)</I>
    <P><UL>
        <LI> Previous message: <A HREF="024998.html">[Mono-list] Debian apache2 mod_mono apxs bug/problem
</A></li>
        <LI> Next message: <A HREF="025000.html">[Mono-list] BinaryFormatter Deserialize problem in Mono 1.0.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24999">[ date ]</a>
              <a href="thread.html#24999">[ thread ]</a>
              <a href="subject.html#24999">[ subject ]</a>
              <a href="author.html#24999">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Does anybody know what we can do to get around this? I would like to use
</I>&gt;<i> mono on debian's prefork'd apache2 under sarge.
</I>&gt;<i>
</I>&gt;<i> make install
</I>&gt;<i> ......................................
</I>&gt;<i> Making install in src
</I>&gt;<i> make[1]: Entering directory `/usr/local/src/mod_mono-1.0.5/src'
</I>&gt;<i> mkdir -p -- . &quot;/usr/lib/apache2/modules&quot;
</I>&gt;<i> /usr/bin/apxs2 -S LIBEXECDIR=&quot;/usr/lib/apache2/modules&quot; -S
</I>&gt;<i> PREFIX=&quot;/usr/local&quot; -i -n mono mod_mono.la
</I>&gt;<i> apxs:Error: no config variable PREFIX
</I>&gt;<i> Usage: apxs -g [-S &lt;var&gt;=&lt;val&gt;] -n &lt;modname&gt;
</I>&gt;<i>        apxs -q [-S &lt;var&gt;=&lt;val&gt;] &lt;query&gt; ...
</I>&gt;<i>        apxs -c [-S &lt;var&gt;=&lt;val&gt;] [-o &lt;dsofile&gt;] [-D &lt;name&gt;[=&lt;value&gt;]]
</I>&gt;<i>                [-I &lt;incdir&gt;] [-L &lt;libdir&gt;] [-l &lt;libname&gt;] [-Wc,&lt;flags&gt;]
</I>&gt;<i>                [-Wl,&lt;flags&gt;] [-p] &lt;files&gt; ...
</I>&gt;<i>        apxs -i [-S &lt;var&gt;=&lt;val&gt;] [-a] [-A] [-n &lt;modname&gt;] &lt;dsofile&gt; ...
</I>&gt;<i>        apxs -e [-S &lt;var&gt;=&lt;val&gt;] [-a] [-A] [-n &lt;modname&gt;] &lt;dsofile&gt; ...
</I>&gt;<i> make[1]: *** [install] Error 1
</I>&gt;<i> make[1]: Leaving directory `/usr/local/src/mod_mono-1.0.5/src'
</I>&gt;<i> make: *** [install-recursive] Error 1
</I>&gt;<i> ............................................
</I>&gt;<i>
</I>&gt;<i> I didn't have these problems with FC2's Apache. I was sort of waiting
</I>&gt;<i> around for the packages to start staying up to date or actually existing
</I>&gt;<i> in the debian sid/sarge repo's but have realized that is a lost cause.
</I>&gt;<i> Thus I must build this stuff from source I guess. Besides, last time I
</I>&gt;<i> tried pre-builts it always demanded all kinds of X stuff to be installed.
</I>&gt;<i> Why would a server have something like that on it?
</I>&gt;<i>
</I>&gt;<i> (On a side note, has that since changed regaurding the deps of core
</I>&gt;<i> packages for ASP.NET and systems without an X enviroment?)
</I>&gt;<i>
</I>&gt;<i> -Michael
</I>&gt;<i>
</I>
Ok, so I got around that by editing src/Makefile

from:

$(APXS) -S LIBEXECDIR=&quot;$(DESTDIR)$(APXS_LIBEXECDIR)&quot; -S PREFIX=&quot;$(prefix)&quot;
-i -n mono mod_mono.la

to:

$(APXS) -S LIBEXECDIR=&quot;$(DESTDIR)$(APXS_LIBEXECDIR)&quot; -i -n mono mod_mono.la


But now I can't get the dumb thing to tell me why it is giving me internel
server errors.

I have given it and verified the paths it needs...... And tried in every
combination of those 4 options, all I know is it needs the
MonoApplicationsConfigDir and MonoServerPath because the apache log tells
me so..... After that it just gives me the internet server error instead
of service temporary univaliable...

(mono, xsp and mod_mono built with --prefix=/usr/local)

------------------------------------------------------------
LoadModule mono_module /usr/lib/apache2/modules/mod_mono.so

MonoExecutablePath &quot;/usr/local/bin/mono&quot;
MonoServerPath &quot;/usr/local/lib/mono/1.0/mod-mono-server.exe&quot;
MonoApplicationsConfigDir &quot;/etc/apache2/mod-mono-applications&quot;
MonoPath &quot;/usr/local/bin:/usr/local/lib/mono/1.0&quot;
------------------------------------------------------------

example of a mono application (www.myhost.com.webapp)

------------------------------------------------------------
&lt;apps&gt;
  &lt;web-application&gt;
    &lt;name&gt;www.myhost.com&lt;/name&gt;
    &lt;vhost&gt;www.myhost.com&lt;/vhost&gt;
    &lt;vport&gt;80&lt;/vport&gt;
    &lt;vpath&gt;/&lt;/vpath&gt;
    &lt;path&gt;/home/me/myhost&lt;/path&gt;
  &lt;/web-application&gt;
  &lt;web-application&gt;
    &lt;name&gt;myhost.com&lt;/name&gt;
    &lt;vhost&gt;myhost.com&lt;/vhost&gt;
    &lt;vport&gt;80&lt;/vport&gt;
    &lt;vpath&gt;/&lt;/vpath&gt;
    &lt;path&gt;/home/me/myhost.com&lt;/path&gt;
  &lt;/web-application&gt;
&lt;/apps&gt;
-------------------------------------------------------------

I have also went bare minimum and did the example demo configuration
without the vhost xml files... No difference.

anybody have any clue why it will no longer log any errors into the apache
error log? I am blind without anything telling me why it isn't working.
And an identical configuration on a fedora box works fine. Already checked
for typo's.

Anybody got any ideas at all?

-Mike


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="024998.html">[Mono-list] Debian apache2 mod_mono apxs bug/problem
</A></li>
	<LI> Next message: <A HREF="025000.html">[Mono-list] BinaryFormatter Deserialize problem in Mono 1.0.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24999">[ date ]</a>
              <a href="thread.html#24999">[ thread ]</a>
              <a href="subject.html#24999">[ subject ]</a>
              <a href="author.html#24999">[ author ]</a>
         </LI>
       </UL>
</body></html>
