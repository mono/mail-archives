<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Question about RSACryptoServiceProvider...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:spouliot%40videotron.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015736.html">
   <LINK REL="Next"  HREF="015738.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Question about RSACryptoServiceProvider...
   </H1>
    <B>Sebastien Pouliot
    </B> 
    <A HREF="mailto:spouliot%40videotron.ca"
       TITLE="[Mono-list] Question about RSACryptoServiceProvider...">spouliot@videotron.ca
       </A><BR>
    <I>Sat, 06 Sep 2003 09:30:13 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="015736.html">[Mono-list] Question about RSACryptoServiceProvider...
</A></li>
        <LI> Next message: <A HREF="015738.html">[Mono-list] Question about RSACryptoServiceProvider...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15737">[ date ]</a>
              <a href="thread.html#15737">[ thread ]</a>
              <a href="subject.html#15737">[ subject ]</a>
              <a href="author.html#15737">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gius,

&gt;<i> If I've well understood, the following code generates the
</I>&gt;<i> public/private key pair:
</I>&gt;<i>
</I>&gt;<i> RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
</I>
Right this will generate a new keypair with the default key size (normally
1024 bits).

&gt;<i> Then, the following code retrieves the public key:
</I>&gt;<i>
</I>&gt;<i> RSAParamters publicKey = rsa.ExportParameters(false);
</I>
Yes. This will return the public key.

&gt;<i> and the following code retrieves the private key:
</I>&gt;<i>
</I>&gt;<i> RSAParametes privateKey = rsa.ExportParamters(true);
</I>
Not exactly. This returns the keypair - including the private key.

&gt;<i> Well, the question is: How does the Encrypt/Decrypt
</I>&gt;<i> method know which key to use?
</I>
This is automatic (by design). Encrypt uses the public key. Decrypt requires
the private key.

&gt;<i> In my specific case, sometime I need to Encrypt with
</I>&gt;<i> the private key and Decrypt with the public key, and
</I>&gt;<i> sometime I need to Encrypt with the public key and
</I>&gt;<i> Decrypt with the private key...
</I>
Encrypting with the private key isn't (by design) supported in the .NET
framework (nor by Mono or me!).
While this is technically possible you wont find much support on most crypto
librairies (there are very good reason for that).
Most time (98%) people comes up with such a idea when there is a flaw in
their (security) design and they are trying to fix it at the wrong end.

If you REALLY need this (2%) then I suggest that you look at the
RSAManaged.cs file (in /mcs/class/corlib/Mono.Security.Cryptography/) and
implement your own &quot;InversedRSA&quot; class using the BigInteger classes
(available in /mcs/class/corlib/Mono.Math/).

&gt;<i> Could somebody explain me this point one time for ever?
</I>&gt;<i> I've give a look at the msdn documentation, but it is
</I>&gt;<i> a little bit unclear, since it doesn't explain this
</I>&gt;<i> issue.
</I>
MSDN isn't the best source to learn about cryptography. The article are (a)
very basic or (b) API that requires solid crypto knowledge (as there are not
much warning about potential pitfalls).

I suggest getting a good book on cryptography (like cryptography applied).
The RSA FAQ (<A HREF="http://www.rsasecurity.com/rsalabs/faq/index.html">http://www.rsasecurity.com/rsalabs/faq/index.html</A>) is also a
good source of information.

Good luck,

Sebastien Pouliot
Security Architect, Motus Technologies, <A HREF="http://www.motus.com/">http://www.motus.com/</A>
work: <A HREF="mailto:spouliot@motus.com">spouliot@motus.com</A>
home: <A HREF="mailto:spouliot@videotron.ca">spouliot@videotron.ca</A>


-----Original Message-----
From: <A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>
[mailto:<A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>]On Behalf Of Giuseppe Greco
Sent: 6 septembre 2003 02:05
To: Mono
Subject: [Mono-list] Question about RSACryptoServiceProvider...


Hi all,

I'm trying to understand how RSACryptoServiceProvider works.

If I've well understood, the following code generates the
public/private key pair:

RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();

Then, the following code retrieves the public key:

RSAParamters publicKey = rsa.ExportParameters(false);

and the following code retrieves the private key:

RSAParametes privateKey = rsa.ExportParamters(true);

Well, the question is: How does the Encrypt/Decrypt
method know which key to use?

In my specific case, sometime I need to Encrypt with
the private key and Decrypt with the public key, and
sometime I need to Encrypt with the public key and
Decrypt with the private key...

Could somebody explain me this point one time for ever?
I've give a look at the msdn documentation, but it is
a little bit unclear, since it doesn't explain this
issue.

Thanks a lot,
Gius_.

--
----------------------------------------
Giuseppe Greco

::<i>agamura::
</I>
phone:  +41 (0)91 604 67 65
mobile: +41 (0)76 390 60 32
email:  <A HREF="mailto:giuseppe.greco@agamura.com">giuseppe.greco@agamura.com</A>
web:    www.agamura.com
----------------------------------------

_______________________________________________
Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="015736.html">[Mono-list] Question about RSACryptoServiceProvider...
</A></li>
	<LI> Next message: <A HREF="015738.html">[Mono-list] Question about RSACryptoServiceProvider...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15737">[ date ]</a>
              <a href="thread.html#15737">[ thread ]</a>
              <a href="subject.html#15737">[ subject ]</a>
              <a href="author.html#15737">[ author ]</a>
         </LI>
       </UL>
</body></html>
