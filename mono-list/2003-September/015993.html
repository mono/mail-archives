<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: [Mono-devel-list] Dynamically changing classes?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bitmask%40xecu.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="015977.html">
   <LINK REL="Next"  HREF="015978.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: [Mono-devel-list] Dynamically changing classes?
   </H1>
    <B>Scott Allen
    </B> 
    <A HREF="mailto:bitmask%40xecu.net"
       TITLE="[Mono-list] Re: [Mono-devel-list] Dynamically changing classes?">bitmask@xecu.net
       </A><BR>
    <I>Wed, 24 Sep 2003 21:33:00 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="015977.html">[Mono-list] Re: [Mono-devel-list] Dynamically changing classes?
</A></li>
        <LI> Next message: <A HREF="015978.html">[Mono-list] mono --optimize=??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15993">[ date ]</a>
              <a href="thread.html#15993">[ thread ]</a>
              <a href="subject.html#15993">[ subject ]</a>
              <a href="author.html#15993">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On the MS side at least, you can rewrite IL code to dynamically add new
types, or add new methods to a type, using the profiling API and
intercepting JIT requests from the runtime. The assembly does need
permissions to execute unverifiable code, so it is of no use for =
production
code, but could be useful for debugging and certain types of
instrumentation.


-----Original Message-----
From: <A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>
[mailto:<A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>] On Behalf Of A Rafael D =
Teixeira
Sent: Wednesday, September 24, 2003 3:44 PM
To: <A HREF="mailto:thomas@thomassondergaard.com">thomas@thomassondergaard.com</A>
Cc: <A HREF="mailto:mono-br@redesolbrasil.org">mono-br@redesolbrasil.org</A>; <A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>

&gt;<i>From: &quot;Thomas Sondergaard&quot; &lt;<A HREF="mailto:thomas@thomassondergaard.com">thomas@thomassondergaard.com</A>&gt;
</I>&gt;<i>
</I>&gt;<i>Can a .net class be changed at runtime? Can you add/remove methods and
</I>&gt;<i>fields at runtime?
</I>
I don't think so, because that makes the runtime's security features =
near=20
worthless.

&gt;<i>If one were to compile a dynamically typed language like Ruby or Python =
</I>to
&gt;<i>IL and the classes were to be directly represented by .net classes and =
</I>not
&gt;<i>.net objects this would be necessary.
</I>
Every changed object, must be a subclass so they can be assignable to=20
superclasses, but gives entree to an important restriction: you can add=20
things, and override virtual methods, but you can't  subtract things =
(public

ones I 'm saying, you can hide protected itens, and can't even know what =

private things are).

That is specially true for Ruby, where instances of the same type can =
end=20
with different sets of methods. Aggregation  also is part of the=20
magic-behind-the-curtain, to make Ruby's interface addition carrying=20
implementation (I can't remember the name of this feature now).

&gt;<i>I have been using the emit API but this just adds a new assembly either =
</I>to
&gt;<i>memory or a file, so I don't see how I can use it to dynamically change
</I>&gt;<i>existing types.
</I>
You can't, you can only create new ones, as I said before.

&gt;<i>In CIL you can call a virtual function. This, as far as I understand, =
</I>is=20
&gt;<i>the
</I>&gt;<i>limit to late binding as implemented in .net (without reflection). In =
</I>ruby
&gt;<i>and Python the concept of sending messages to an object is more dynamic =
</I>and
&gt;<i>has nothing to do with types. Using Type.InvokeMember you can mimic =
</I>this
&gt;<i>behaviour on .net but could it is relatively slow. Why not add a new
</I>&gt;<i>instruction to the CLR that is simply called e.g. 'send_msg'  that =
</I>accepts=20
&gt;<i>a
</I>&gt;<i>methodName string and a list of parameters? This would be essential for
</I>&gt;<i>dynamically typed languages wouldn't it.
</I>
That is the problem of security again:How do you verify that some code =
is=20
safe for execution, and throw exceptions when it tries to use=20
policy-forbidden features, if it is totally changeable at runtime?

&gt;<i>Disclaimer: I don't really know much about this I'm just wondering what =
</I>
&gt;<i>kind
</I>&gt;<i>of platform support that is necessary if you want dynamically typed
</I>&gt;<i>languages to execute more or less directly on the CLR, meaning that =
</I>classes
&gt;<i>are represented by .net classes and not .net objects.
</I>
I think dynamically typed languages are hard to fit  inside a .NET, =
period.
But don't get stopped by it.

&gt;<i>Cheers,
</I>&gt;<i>
</I>&gt;<i>Thomas
</I>
Regards,

Rafael Teixeira
Brazilian Polymath
Mono Hacker since 16 Jul 2001

_________________________________________________________________
MSN Messenger: instale gr=E1tis e converse com seus amigos.=20
<A HREF="http://messenger.msn.com.br">http://messenger.msn.com.br</A>

_______________________________________________
Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="015977.html">[Mono-list] Re: [Mono-devel-list] Dynamically changing classes?
</A></li>
	<LI> Next message: <A HREF="015978.html">[Mono-list] mono --optimize=??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15993">[ date ]</a>
              <a href="thread.html#15993">[ thread ]</a>
              <a href="subject.html#15993">[ subject ]</a>
              <a href="author.html#15993">[ author ]</a>
         </LI>
       </UL>
</body></html>
