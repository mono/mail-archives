<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: [Mono-devel-list] Dynamically changing classes?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rafaelteixeirabr%40hotmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="015980.html">
   <LINK REL="Next"  HREF="015993.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: [Mono-devel-list] Dynamically changing classes?
   </H1>
    <B>A Rafael D Teixeira
    </B> 
    <A HREF="mailto:rafaelteixeirabr%40hotmail.com"
       TITLE="[Mono-list] Re: [Mono-devel-list] Dynamically changing classes?">rafaelteixeirabr@hotmail.com
       </A><BR>
    <I>Wed, 24 Sep 2003 16:43:47 -0300</I>
    <P><UL>
        <LI> Previous message: <A HREF="015980.html">[Mono-list] Unable to run mcs
</A></li>
        <LI> Next message: <A HREF="015993.html">[Mono-list] Re: [Mono-devel-list] Dynamically changing classes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15977">[ date ]</a>
              <a href="thread.html#15977">[ thread ]</a>
              <a href="subject.html#15977">[ subject ]</a>
              <a href="author.html#15977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>From: &quot;Thomas Sondergaard&quot; &lt;<A HREF="mailto:thomas@thomassondergaard.com">thomas@thomassondergaard.com</A>&gt;
</I>&gt;<i>
</I>&gt;<i>Can a .net class be changed at runtime? Can you add/remove methods and
</I>&gt;<i>fields at runtime?
</I>
I don't think so, because that makes the runtime's security features near 
worthless.

&gt;<i>If one were to compile a dynamically typed language like Ruby or Python to
</I>&gt;<i>IL and the classes were to be directly represented by .net classes and not
</I>&gt;<i>.net objects this would be necessary.
</I>
Every changed object, must be a subclass so they can be assignable to 
superclasses, but gives entree to an important restriction: you can add 
things, and override virtual methods, but you can't  subtract things (public 
ones I 'm saying, you can hide protected itens, and can't even know what 
private things are).

That is specially true for Ruby, where instances of the same type can end 
with different sets of methods. Aggregation  also is part of the 
magic-behind-the-curtain, to make Ruby's interface addition carrying 
implementation (I can't remember the name of this feature now).

&gt;<i>I have been using the emit API but this just adds a new assembly either to
</I>&gt;<i>memory or a file, so I don't see how I can use it to dynamically change
</I>&gt;<i>existing types.
</I>
You can't, you can only create new ones, as I said before.

&gt;<i>In CIL you can call a virtual function. This, as far as I understand, is 
</I>&gt;<i>the
</I>&gt;<i>limit to late binding as implemented in .net (without reflection). In ruby
</I>&gt;<i>and Python the concept of sending messages to an object is more dynamic and
</I>&gt;<i>has nothing to do with types. Using Type.InvokeMember you can mimic this
</I>&gt;<i>behaviour on .net but could it is relatively slow. Why not add a new
</I>&gt;<i>instruction to the CLR that is simply called e.g. 'send_msg'  that accepts 
</I>&gt;<i>a
</I>&gt;<i>methodName string and a list of parameters? This would be essential for
</I>&gt;<i>dynamically typed languages wouldn't it.
</I>
That is the problem of security again:How do you verify that some code is 
safe for execution, and throw exceptions when it tries to use 
policy-forbidden features, if it is totally changeable at runtime?

&gt;<i>Disclaimer: I don't really know much about this I'm just wondering what 
</I>&gt;<i>kind
</I>&gt;<i>of platform support that is necessary if you want dynamically typed
</I>&gt;<i>languages to execute more or less directly on the CLR, meaning that classes
</I>&gt;<i>are represented by .net classes and not .net objects.
</I>
I think dynamically typed languages are hard to fit  inside a .NET, period.
But don't get stopped by it.

&gt;<i>Cheers,
</I>&gt;<i>
</I>&gt;<i>Thomas
</I>
Regards,

Rafael Teixeira
Brazilian Polymath
Mono Hacker since 16 Jul 2001

_________________________________________________________________
MSN Messenger: instale grátis e converse com seus amigos. 
<A HREF="http://messenger.msn.com.br">http://messenger.msn.com.br</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="015980.html">[Mono-list] Unable to run mcs
</A></li>
	<LI> Next message: <A HREF="015993.html">[Mono-list] Re: [Mono-devel-list] Dynamically changing classes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15977">[ date ]</a>
              <a href="thread.html#15977">[ thread ]</a>
              <a href="subject.html#15977">[ subject ]</a>
              <a href="author.html#15977">[ author ]</a>
         </LI>
       </UL>
</body></html>
