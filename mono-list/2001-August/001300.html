<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Preprocessor #define Standardization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:fjh%40cs.mu.oz.au">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001298.html">
   <LINK REL="Next"  HREF="001314.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Preprocessor #define Standardization
   </H1>
    <B>Fergus Henderson
    </B> 
    <A HREF="mailto:fjh%40cs.mu.oz.au"
       TITLE="[Mono-list] Preprocessor #define Standardization">fjh@cs.mu.oz.au
       </A><BR>
    <I>Sun, 19 Aug 2001 02:47:29 +1000</I>
    <P><UL>
        <LI> Previous message: <A HREF="001298.html">[Mono-list] Preprocessor #define Standardization
</A></li>
        <LI> Next message: <A HREF="001314.html">[Mono-list] Preprocessor #define Standardization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1300">[ date ]</a>
              <a href="thread.html#1300">[ thread ]</a>
              <a href="subject.html#1300">[ subject ]</a>
              <a href="author.html#1300">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 18-Aug-2001, develop &lt;<A HREF="mailto:develop@wtfo.wtfo-guru.com">develop@wtfo.wtfo-guru.com</A>&gt; wrote:
&gt;<i> I recommend we standardize on the usage of this directives in the class
</I>&gt;<i> library now. And perhaps create a document listing the standard directives
</I>&gt;<i> in use in the mono class library.
</I>&gt;<i> The three definitions I have found are used in the PathTest.cs file, and
</I>&gt;<i> meet my needs currently for base level OS directives, although I can
</I>&gt;<i> certainly envision that derivatives will be needed as more subtle distro
</I>&gt;<i> specific implementation issues are encountered.
</I>&gt;<i> 
</I>&gt;<i> The three in use in PathTest.cs are:
</I>&gt;<i> 
</I>&gt;<i> WINDOWS
</I>&gt;<i> UNIX
</I>&gt;<i> MAC
</I>
I haven't looked at the code in PathTest.cs.
But as a matter of general principle...

Using conditional compilation which tests the OS is a bad idea, because
you never know when someone is going to invent a new platform that is a
mixture of previous different platforms.  For example, a new platform
might be part SysV / part BSD (e.g. Linux), part Unix / part Windows
(e.g. Cygwin, Wine) or part Unix / part Mac (e.g. MacOS X).  If the code
has conditionals which test directly on the OS, it makes it much more
difficult to port to new systems.

Instead, add an extra level of indirection, so the OS determines the
feature set and the code only ever tests for features, rather than
testing the OS.  So rather than testing on WINDOWS in PathTest.cs,
test on e.g. WINDOWS_PATHNAMES.

-- 
Fergus Henderson &lt;<A HREF="mailto:fjh@cs.mu.oz.au">fjh@cs.mu.oz.au</A>&gt;  |  &quot;I have always known that the pursuit
The University of Melbourne         |  of excellence is a lethal habit&quot;
WWW: &lt;<A HREF="http://www.cs.mu.oz.au/~fjh">http://www.cs.mu.oz.au/~fjh</A>&gt;  |     -- the last words of T. S. Garp.


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001298.html">[Mono-list] Preprocessor #define Standardization
</A></li>
	<LI> Next message: <A HREF="001314.html">[Mono-list] Preprocessor #define Standardization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1300">[ date ]</a>
              <a href="thread.html#1300">[ thread ]</a>
              <a href="subject.html#1300">[ subject ]</a>
              <a href="author.html#1300">[ author ]</a>
         </LI>
       </UL>
</body></html>
