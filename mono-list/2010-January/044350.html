<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mono performance,	20x differential with Java (what am i doing wrong)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20mono%20performance%2C%0A%0920x%20differential%20with%20Java%20%28what%20am%20i%20doing%20wrong%29&In-Reply-To=201001291932.09456.jon%40ffconsultancy.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044346.html">
   <LINK REL="Next"  HREF="044356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)</H1>
    <B>Jonathan Shore</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20mono%20performance%2C%0A%0920x%20differential%20with%20Java%20%28what%20am%20i%20doing%20wrong%29&In-Reply-To=201001291932.09456.jon%40ffconsultancy.com"
       TITLE="[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)">jonathan.shore at gmail.com
       </A><BR>
    <I>Fri Jan 29 16:28:58 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="044346.html">[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)
</A></li>
        <LI>Next message: <A HREF="044356.html">[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44350">[ date ]</a>
              <a href="thread.html#44350">[ thread ]</a>
              <a href="subject.html#44350">[ subject ]</a>
              <a href="author.html#44350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jan 29, 2010, at 2:32 PM, Jon Harrop wrote:

&gt;<i> On Friday 29 January 2010 02:00:07 Jonathan Shore wrote:
</I>&gt;&gt;<i> My main interest is in Ocaml, particularly the F# variant as the basis for
</I>&gt;&gt;<i> my numerical work.
</I>&gt;<i> 
</I>&gt;<i> Note that F# uses ILX that Mono does not implement correctly, e.g. TCO. So F# 
</I>&gt;<i> code is not yet reliable on Mono.
</I>&gt;<i> 
</I>
Jon, I saw your post about that on your blog some time ago.   Someone familiar with Mono claimed otherwise, was therefore uncertain as to whether was addressed or not.    I can live some some inefficiency in tail calls provided one does not get stack overflow or some other fatal issue.


&gt;<i> 
</I>&gt;&gt;<i> I have heard only good things about LLVM performance, so hoping that this
</I>&gt;&gt;<i> will help address this gap. 
</I>&gt;<i> 
</I>&gt;<i> To really benefit from LLVM you need to design the VM properly from the ground 
</I>&gt;<i> up. My HLVM project aims to do this:
</I>&gt;<i> 
</I>&gt;<i>  <A HREF="http://www.ffconsultancy.com/ocaml/hlvm/">http://www.ffconsultancy.com/ocaml/hlvm/</A>
</I>&gt;<i> 
</I>
I've seen your posts on this and is very impressive.    To be honest I would get more value out of a Ocaml variant wedded to the .NET platform.   There is just so much momentum and available libraries on the two major VMs (CLR and JVM), that would be a huge risk for me at the moment.    I also have a significant body of imperative VM-bound code that I need to get access to.    If HLVM could interact with java bytecode or .NET bytecode, would work for me.

&gt;<i> I haven't benchmarked it against Mono but it is already thrashing Java on 
</I>&gt;<i> numerical benchmarks:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://flyingfrogblog.blogspot.com/2010/01/hlvm-on-ray-tracer-language-comparison.html">http://flyingfrogblog.blogspot.com/2010/01/hlvm-on-ray-tracer-language-comparison.html</A>
</I>&gt;<i> 
</I>
Again, very impressive stuff.   Do you see bridging between the .NET world and your VM in the future?    For instance the IKVM project that maps Java bytecode to .NET built up a joint project with the mono team to provide the ability to run Java byetcode in mono.    A similar concept could be done in this setting.


&gt;<i> The above line is dead code. The JVM is probably eliminating it and .NET does 
</I>&gt;<i> not. Removing this dead code by hand, I obtain the same result from .NET in 
</I>&gt;<i> the same time that the JVM takes.
</I>
Yes, thanks realize this.  The benchmark is flawed.    I had meant to place i - j in the inner loop.       I'm going to test this again with the correction.  Will post results.

&gt;<i> 
</I>&gt;&gt;<i> 				for (int j = 1 ; j &lt; 8 ; j++)
</I>&gt;&gt;<i> 					sum += 1.3 * vec[j-1];
</I>&gt;&gt;<i> 			}
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 			return sum;
</I>&gt;&gt;<i> 		}
</I>&gt;<i> 
</I>&gt;<i> To build a useful benchmark you should set an irreducibly-complex problem to 
</I>&gt;<i> solve and let people solve it freely in different languages using whatever 
</I>&gt;<i> features and characteristics of the language or VM they choose.
</I>&gt;<i> 
</I>
I've seen the language shootouts, but they appear flawed to me.   The length of the tests is too short to allow the Java or Mono VMs to reap benefits from optimisation.    The main problem I have found in VM environments (aside from the GC, boxing / unboxing) is array access.    One can work around issues of GC, boxing, etc, but cannot work around array issues if they exist.

Jonathan


</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044346.html">[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)
</A></li>
	<LI>Next message: <A HREF="044356.html">[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44350">[ date ]</a>
              <a href="thread.html#44350">[ thread ]</a>
              <a href="subject.html#44350">[ subject ]</a>
              <a href="author.html#44350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
