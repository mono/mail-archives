<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mono performance,	20x differential with Java (what am i doing wrong)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20mono%20performance%2C%0A%0920x%20differential%20with%20Java%20%28what%20am%20i%20doing%20wrong%29&In-Reply-To=201001300019.28404.jon%40ffconsultancy.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044356.html">
   <LINK REL="Next"  HREF="044363.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)</H1>
    <B>Jonathan Shore</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20mono%20performance%2C%0A%0920x%20differential%20with%20Java%20%28what%20am%20i%20doing%20wrong%29&In-Reply-To=201001300019.28404.jon%40ffconsultancy.com"
       TITLE="[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)">jonathan.shore at gmail.com
       </A><BR>
    <I>Fri Jan 29 19:20:11 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="044356.html">[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)
</A></li>
        <LI>Next message: <A HREF="044363.html">[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44360">[ date ]</a>
              <a href="thread.html#44360">[ thread ]</a>
              <a href="subject.html#44360">[ subject ]</a>
              <a href="author.html#44360">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jan 29, 2010, at 7:19 PM, Jon Harrop wrote:
&gt;&gt;<i> 
</I>&gt;&gt;<i> Jon, I saw your post about that on your blog some time ago.   Someone
</I>&gt;&gt;<i> familiar with Mono claimed otherwise, was therefore uncertain as to whether
</I>&gt;&gt;<i> was addressed or not.
</I>&gt;<i> 
</I>&gt;<i> You should be able to verify my results easily: just run the 8-line example F# 
</I>&gt;<i> program I gave and Mono will stack overflow.
</I>&gt;<i> 
</I>&gt;&gt;<i> I can live some some inefficiency in tail calls provided one does not get
</I>&gt;&gt;<i> stack overflow or some other fatal issue. 
</I>&gt;<i> 
</I>&gt;<i> TCO is broken on Mono, not merely inefficient.
</I>&gt;<i> 
</I>
As I have no familiarity with the Mono VM code, no idea what it would take to fix this.   Do any of the mono developers have a view on this?    I suppose we could lift Jon's code and put it into the bug tracking system ...

&gt;<i> 
</I>&gt;&gt;<i> To be honest I 
</I>&gt;&gt;<i> would get more value out of a Ocaml variant wedded to the .NET platform.
</I>&gt;<i> 
</I>&gt;<i> Yes. F# is awesome but only on Windows/.NET and not on Mono.
</I>&gt;<i> 
</I>
Hmm, very problematic for me ...


&gt;&gt;<i> There is just so much momentum and available libraries on the two major VMs
</I>&gt;&gt;<i> (CLR and JVM), that would be a huge risk for me at the moment.
</I>&gt;<i> 
</I>&gt;<i> I was actually disappointed with .NET's libraries in the context of technical 
</I>&gt;<i> computing. I felt OCaml had better libraries and it turns out that .NET was 
</I>&gt;<i> about as popular for technical computing as OCaml was when I started. The 
</I>&gt;<i> main exception is WPF but you don't get that with Mono.
</I>&gt;<i> 
</I>
I guess it depends where you come from.  First I'll have to be honest and say that I am new to Ocaml.    My FP background is Scheme and some dabbling in Haskell.    I had heard from real-world users of Ocaml (such as the Jane Street capital guys), that the depth of libraries for Ocaml is pretty shallow.    They've invested some years into building that up, but is private work largely.

Now if we are talking about numerical stuff, then yes, there is not much publicly available on either the CLR or JVM.    I was more referring to the tech libraries rather than scientific.    


&gt;&gt;<i> I also 
</I>&gt;&gt;<i> have a significant body of imperative VM-bound code that I need to get
</I>&gt;&gt;<i> access to.    If HLVM could interact with java bytecode or .NET bytecode,
</I>&gt;&gt;<i> would work for me.
</I>&gt;<i> 
</I>&gt;<i> You should be able to compile plain numerical code from JVM/CIL to HLVM easily 
</I>&gt;<i> enough, particularly when HLVM is more complete.
</I>&gt;<i> 
</I>
I'll look forward to seeing that.   Are you implying that I would be able to take a bunch of java classes and make them available?    I guess it depends on what you mean by &quot;plain numerical&quot; code.

Will or does HLVM support the F# dialect of Ocaml as well?

&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> That doesn't really interest me. F# is so far ahead now that everything else 
</I>&gt;<i> is a toy in comparison from my point of view. HLVM is just a hobby project 
</I>&gt;<i> designed to bring some of the benefits of F# to the open source world for fun 
</I>&gt;<i> but it is a massive undertaking because the open source world doesn't even 
</I>&gt;<i> have any reliable foundations like .NET, let alone decent libraries like WPF 
</I>&gt;<i> built upon them. So I have to build everything from scratch myself. I'm not 
</I>&gt;<i> even sure I will be able to use hardware acceleration due to the poor state 
</I>&gt;<i> of OpenGL drivers on Linux.
</I>
Fair enough.   I recognize that you have accomplished quite a bit with the performance of your design.   However, as you allude to, it is quite another thing to enrich it to the point of being a broad-use platform.   For that you need a group of dedicated developers and the momentum to foster that community.  

The MS CLR and Mono may never have the specializations that you have done, for instance, make boxing / unboxing a non-issue (or at least a lot cheaper).    However, they have momentum and breadth.    Getting the best of both would be super, but I understand ... 

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> For example, the Haskell implementation of k-nucleotide is only 20% slower 
</I>&gt;<i> than OCaml but the Haskell code is a joke: where the OCaml uses its stdlib's 
</I>&gt;<i> hash table, the Haskell had to do memory allocation manually using &quot;malloc&quot; 
</I>&gt;<i> directly in order to work around serious design flaws in their garbage 
</I>&gt;<i> collector. Not only is this hidden from the casual shootout reader but they 
</I>&gt;<i> even comment their code with total nonsense like &quot;Hash tables are not 
</I>&gt;<i> generally used in functional languages&quot; when what they really mean is &quot;When 
</I>&gt;<i> hash tables are a good solution, Haskell will suck uniquely even among 
</I>&gt;<i> functional languages&quot;.
</I>
I agree that benchmarks have to be studied carefully to see what is real and what is not.  In the end it is your own application that is the final measure.

&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> You cannot work around boxing on the JVM because it lacks value types. Indeed, 
</I>&gt;<i> that is a major advantage of .NET on the JVM that Mono should inherit.
</I>&gt;<i> 
</I>
I'm totally with you on .NET over the JVM.    Sun sat on the JVM and Java design for many years.    Catchup now is too late.




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20100129/0dcc546c/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20100129/0dcc546c/attachment.html</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044356.html">[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)
</A></li>
	<LI>Next message: <A HREF="044363.html">[Mono-list] mono performance,	20x differential with Java (what am i doing wrong)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44360">[ date ]</a>
              <a href="thread.html#44360">[ thread ]</a>
              <a href="subject.html#44360">[ subject ]</a>
              <a href="author.html#44360">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
