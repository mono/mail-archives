<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] OnDeserialized exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20OnDeserialized%20exception&In-Reply-To=ff5eua%24oqn%241%40ger.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036619.html">
   <LINK REL="Next"  HREF="036623.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] OnDeserialized exception</H1>
    <B>Jonathan Gagnon</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20OnDeserialized%20exception&In-Reply-To=ff5eua%24oqn%241%40ger.gmane.org"
       TITLE="[Mono-list] OnDeserialized exception">jonathan.gagnon at croesus.com
       </A><BR>
    <I>Wed Oct 17 14:02:31 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="036619.html">[Mono-list] OnDeserialized exception
</A></li>
        <LI>Next message: <A HREF="036623.html">[Mono-list] Compile errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36620">[ date ]</a>
              <a href="thread.html#36620">[ thread ]</a>
              <a href="subject.html#36620">[ subject ]</a>
              <a href="author.html#36620">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>Robert Jordan wrote:
</I>&gt;&gt;<i> Jonathan Gagnon wrote:
</I>&gt;&gt;&gt;<i> Lately, I started using the OnDeserialized event to do some stuff 
</I>&gt;&gt;&gt;<i> after an object is deserialized.  It works fine when I compile it on 
</I>&gt;&gt;&gt;<i> my machine, unfortunately, when compiled on our build machine, I get 
</I>&gt;&gt;&gt;<i> the following error when deserializing my object with mono :
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i> System.NotSupportedException: Collection is read-only
</I>&gt;&gt;&gt;<i>   at System.Array.InternalArray__RemoveAt[Object] (Int32 index) 
</I>&gt;&gt;&gt;<i> [0x00000] in
</I>&gt;&gt;&gt;<i> /tmp/scratch/BUILD/mono-1.2.3.1/mcs/class/corlib/System/Array.cs:131
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> OnDeserialized was not supported in 1.2.3.1. Please update to the 
</I>&gt;&gt;<i> latest Mono 1.2.5.1.
</I>
&gt;<i>Sorry, it is actually implemented since Mono 1.2.
</I>
&gt;&gt;&gt;<i> System.NotSupportedException: Collection is read-only
</I>&gt;&gt;&gt;<i>   at System.Array.InternalArray__RemoveAt[Object] (Int32 index) 
</I>&gt;&gt;&gt;<i> [0x00000] in
</I>&gt;&gt;&gt;<i> /tmp/scratch/BUILD/mono-1.2.3.1/mcs/class/corlib/System/Array.cs:131
</I>&gt;&gt;&gt;<i>   at (wrapper managed-to-managed)
</I>&gt;&gt;&gt;<i> Croesus.EntityManagement.IAccessControlInformation[]:System.Collectio
</I>&gt;&gt;&gt;<i> ns.Gene
</I>&gt;&gt;&gt;<i> ric.IList`1.RemoveAt (int)
</I>
&gt;<i>This seems to be a problem in you own callback code. Nevertheless, please
</I>try the latest Mono 1.2.5.1 that fixes a lot of problems with &gt;generics. If
it's still failing, please file a bug with a test case at
<A HREF="http://www.mono-project.com/Bugs.">http://www.mono-project.com/Bugs.</A>

I tried with Mono 1.2.5.1 and I still have the same problem.  It is unlikely
to be related to my own callback code since it is not even called (at least,
it is not in the callstack).  The delegate calls something that isn't marked
with the OnDeserialized attribute, making me think that the in-memory
pointer is corrupted.  I will try to come up with a simple test case,
although up to now, every simple case that I tried work just fine.

Jonathan

</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036619.html">[Mono-list] OnDeserialized exception
</A></li>
	<LI>Next message: <A HREF="036623.html">[Mono-list] Compile errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36620">[ date ]</a>
              <a href="thread.html#36620">[ thread ]</a>
              <a href="subject.html#36620">[ subject ]</a>
              <a href="author.html#36620">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
