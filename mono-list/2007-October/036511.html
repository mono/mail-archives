<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Need advise on Mono Memory Model
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Need%20advise%20on%20Mono%20Memory%20Model&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036510.html">
   <LINK REL="Next"  HREF="036512.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Need advise on Mono Memory Model</H1>
    <B>FX Meta</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Need%20advise%20on%20Mono%20Memory%20Model&In-Reply-To="
       TITLE="[Mono-list] Need advise on Mono Memory Model">rednaxela0607 at hotmail.com
       </A><BR>
    <I>Thu Oct  4 03:25:09 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="036510.html">[Mono-list] MIPS- Mono
</A></li>
        <LI>Next message: <A HREF="036512.html">[Mono-list] SuSe 10.3 repositories for mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36511">[ date ]</a>
              <a href="thread.html#36511">[ thread ]</a>
              <a href="subject.html#36511">[ subject ]</a>
              <a href="author.html#36511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi all,
I'm still new to this mailing-list and I'm sure someone's asked about similar questions before, but it's hard to find documented materials related to this topic: does the current stable version of Mono (namely 1.2.5.1) conform to the ECMA standard of memory model, which is a weak model, or does it conform to the stronger one as used by MS .Net Framework 2.0 or later? Is it different on various implementations of Mono, such that the ones on IA64 are not using the stronger model?
I'd also like to know, there was a hint that MS is trying to revise the ECMA CLI standard so that a stronger memory gets employed, does anybody know how's that in progress?
 
Anyway, just to be sure I got the concepts right, please correct me if I got the Mono/CLR memory model wrong:
1. No reorder can happen if there's a MemoryBarrier (as given by Interlocked or Thread.VolatileRead/Write) or volatile variable in between in a method; or if reorder happened, it's invisible to programmers (given that reads and writes cannot move before a volatile read, and reads and writes cannot move after a volatile write)
2. Monitor.Enter has aquire semantics, Monitor.Exit has release semantics, does that mean that before entering a critical section, everything in the thread's own copy of memory (if the memory is cached) gets synchronized with the latest values in the main memory, and after leaving a critical section, all changes done by the current thread will be flushed out to the main memory?
3. Does a volatile read behave just like a Monitor.Enter in terms of having aquire semantics, that everything in the thread's own copy of memory (and not just the volatile variable itself) gets synchronized with the latest values in the main memory, and vice versa?
4. What's the cost of using a volatile variable in comparison to using locks in Mono? Should I expect less overhead with a volatile variable rather than with locks, if all accesses to it must not be reordered?
5. What are the major differences between a Mono/CLR memory model and the Java memory model (after Java 5) that I should care about?Greetings,- RednaxelaFX
_________________________________________________________________
Invite your mail contacts to join your friends list with Windows Live Spaces. It's easy!
<A HREF="http://spaces.live.com/spacesapi.aspx?wx_action=create&amp;wx_url=/friends.aspx&amp;mkt=en-us">http://spaces.live.com/spacesapi.aspx?wx_action=create&amp;wx_url=/friends.aspx&amp;mkt=en-us</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20071004/89a9bbc3/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20071004/89a9bbc3/attachment.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036510.html">[Mono-list] MIPS- Mono
</A></li>
	<LI>Next message: <A HREF="036512.html">[Mono-list] SuSe 10.3 repositories for mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36511">[ date ]</a>
              <a href="thread.html#36511">[ thread ]</a>
              <a href="subject.html#36511">[ subject ]</a>
              <a href="author.html#36511">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
