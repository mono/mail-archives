<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] compiling / using libgdiplus on Mac OS X w/ mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20compiling%20/%20using%20libgdiplus%20on%20Mac%20OS%20X%20w/%20mono&In-Reply-To=%3C50BE2C18.60504%40sourcegear.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="049219.html">
   <LINK REL="Next"  HREF="049216.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] compiling / using libgdiplus on Mac OS X w/ mono</H1>
    <B>jeff clausius</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20compiling%20/%20using%20libgdiplus%20on%20Mac%20OS%20X%20w/%20mono&In-Reply-To=%3C50BE2C18.60504%40sourcegear.com%3E"
       TITLE="[Mono-list] compiling / using libgdiplus on Mac OS X w/ mono">jeffc at sourcegear.com
       </A><BR>
    <I>Tue Dec  4 17:00:08 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="049219.html">[Mono-list] Possible Mac OS X bugs?
</A></li>
        <LI>Next message: <A HREF="049216.html">[Mono-list] Memory profiler for Mono-1.9.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49215">[ date ]</a>
              <a href="thread.html#49215">[ thread ]</a>
              <a href="subject.html#49215">[ subject ]</a>
              <a href="author.html#49215">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
In order to get around some issues of missing functions, I'm compiling
libgdiplus on Mac OS X Lion.  After cloning the libgdiplus repo from
git, I ran autogen.sh to generate the config files.

I ran into some issues regarding libpng being 1.5 on my system and
libgdiplus only working with libpng 1.4.  Found someone's patch and
compiled.  Also discovered CCFLAGS needed to be set to '-arch i386'
before running autogen.sh.

After all this, I was able to .configure/make a 32 bit version of
libgdiplus (libgdiplus.0.dylib).  After compilation, I copied the new
libgdiplus.0.dylib and libgdiplus.la to the Mono 3.0.1 Framework lib
directory (renaming the old ones), and also replaced the symlinks for
libgdiplus.dylib and libgdiplus.0.0.0.dylib.

Now, if I run a test app using MONO_MWF_MAC_FORCE_X11 with an embedded
resource, I get the following error:

Unhandled Exception:
System.ArgumentException: A null reference or invalid value was found
[GDI+ status: InvalidParameter]
  at System.Drawing.GDIPlus.CheckStatus (Status status) [0x00000] in
&lt;filename unknown&gt;:0
  at System.Drawing.Image.Clone () [0x00000] in &lt;filename unknown&gt;:0
  at System.Resources.RuntimeResourceSet.CloneDisposableObjectIfPossible
(System.Object value) [0x00000] in &lt;filename unknown&gt;:0
  at System.Resources.RuntimeResourceSet.GetObject (System.String name,
Boolean ignoreCase) [0x00000] in &lt;filename unknown&gt;:0
  at System.Resources.ResourceManager.GetObject (System.String name,
System.Globalization.CultureInfo culture) [0x00000] in &lt;filename unknown&gt;:0
  at System.Resources.ResourceManager.GetObject (System.String name)
[0x00000] in &lt;filename unknown&gt;:0
  at App1.Form1.InitializeComponent () [0x00000] in &lt;filename unknown&gt;:0
  at App1.Form1..ctor () [0x00000] in &lt;filename unknown&gt;:0
  at (wrapper remoting-invoke-with-check) App1.Form1:.ctor ()
  at App1.Program.Main () [0x00000] in &lt;filename unknown&gt;:0
[ERROR] FATAL UNHANDLED EXCEPTION: System.ArgumentException: A null
reference or invalid value was found [GDI+ status: InvalidParameter]
&lt;snip&gt;


Do you think I compiled libgdiplus incorrectly?  Did I copy / hookup
libgdiplus into the Mono Framework lib directory incorrectly?  Any idea
how to trouble shoot this issue?

All help will be appreciated.

Jeff
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="049219.html">[Mono-list] Possible Mac OS X bugs?
</A></li>
	<LI>Next message: <A HREF="049216.html">[Mono-list] Memory profiler for Mono-1.9.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49215">[ date ]</a>
              <a href="thread.html#49215">[ thread ]</a>
              <a href="subject.html#49215">[ subject ]</a>
              <a href="author.html#49215">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
