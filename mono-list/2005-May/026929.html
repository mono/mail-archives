<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] XmlIncludeAttribute missing class
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ricardo.gladwell%40btinternet.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="026928.html">
   <LINK REL="Next"  HREF="026933.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] XmlIncludeAttribute missing class
   </H1>
    <B>Ricardo Gladwell
    </B> 
    <A HREF="mailto:ricardo.gladwell%40btinternet.com"
       TITLE="[Mono-list] XmlIncludeAttribute missing class">ricardo.gladwell@btinternet.com
       </A><BR>
    <I>Wed, 11 May 2005 12:49:04 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="026928.html">[Mono-list] OdbcParameters seem not to work in Mono 1.1.7
</A></li>
        <LI> Next message: <A HREF="026933.html">[Mono-list] XmlIncludeAttribute missing class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26929">[ date ]</a>
              <a href="thread.html#26929">[ thread ]</a>
              <a href="subject.html#26929">[ subject ]</a>
              <a href="author.html#26929">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm getting the following exception when I attempt to deserialize some 
objects in my application using System.Xml.Serialization:

System.InvalidOperationException: The type WebPuppy.Model.Site was not 
expected. Use the XmlInclude or SoapInclude attribute to specify types 
that are not known statically.

I've been careful to include all the relevant objects using the 
XmlIncludeAttribute so I can't figure out why the XML serializer is not 
properly finding the Site object. See code fragment below:

using System.Collections;
using System.IO;
using System.Xml.Serialization;

public class Test {
     public static void Main () {
         Configuration configuration = new Configuration();
         Site site = new Site();
         site.Id = &quot;id&quot;;
         configuration.Sites.Add( site );
         XmlSerializer serializer = new XmlSerializer (typeof 
(Configuration));
         using (FileStream fs = new FileStream (&quot;test.xml&quot;, 
FileMode.Create)) {
             serializer.Serialize (fs, configuration);
         }
     }
}

public class Configuration {

	Folder sites = new Folder();

	public Folder Sites
	{
		get {
			return sites;
		}
		set {
			this.sites = value;
		}
	}

}

[XmlInclude (typeof (Folder))]
[XmlInclude (typeof (Site))]
public abstract class Artifact {
	public string Id;
}

public class Folder : Artifact, IEnumerable
{
	private Hashtable artifacts = new Hashtable ();

	public IEnumerator GetEnumerator ()
	{
		return artifacts.Values.GetEnumerator ();
	}

	public void Add(object o) {
         Artifact artifact = (Artifact) o;
		artifacts[artifact.Id] = (Artifact) artifact;
	}
}

public class Site : Folder
{
}

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="026928.html">[Mono-list] OdbcParameters seem not to work in Mono 1.1.7
</A></li>
	<LI> Next message: <A HREF="026933.html">[Mono-list] XmlIncludeAttribute missing class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26929">[ date ]</a>
              <a href="thread.html#26929">[ thread ]</a>
              <a href="subject.html#26929">[ subject ]</a>
              <a href="author.html#26929">[ author ]</a>
         </LI>
       </UL>
</body></html>
