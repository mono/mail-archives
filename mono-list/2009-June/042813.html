<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Cross compiling mono 2.4 to PowerPC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Cross%20compiling%20mono%202.4%20to%20PowerPC&In-Reply-To=877C99AB-0C03-444D-BE13-7872C22F31D7%40web.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042811.html">
   <LINK REL="Next"  HREF="042793.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Cross compiling mono 2.4 to PowerPC</H1>
    <B>Dushara Jayasinghe</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Cross%20compiling%20mono%202.4%20to%20PowerPC&In-Reply-To=877C99AB-0C03-444D-BE13-7872C22F31D7%40web.de"
       TITLE="[Mono-list] Cross compiling mono 2.4 to PowerPC">DusharaJ at optiscan.com
       </A><BR>
    <I>Sun Jun 28 20:19:52 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="042811.html">[Mono-list] Cross compiling mono 2.4 to PowerPC
</A></li>
        <LI>Next message: <A HREF="042793.html">[Mono-list]  Threading ThreadPriority under Mono/Linux vs Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42813">[ date ]</a>
              <a href="thread.html#42813">[ thread ]</a>
              <a href="subject.html#42813">[ subject ]</a>
              <a href="author.html#42813">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Andreas, thanks for the response.

&gt;<i> &gt; I tried version 2.4.2-rc1 (<A HREF="http://anonsvn.mono-">http://anonsvn.mono-</A>
</I>&gt;<i> project.com/viewvc/tags/mono-2-4-2-rc1/
</I>&gt;<i> &gt; ). I still had to tweak configure.in:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; checking for working __thread... configure: error: cannot run test
</I>&gt;<i> &gt; program while cross compiling
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; and Makefile.am (build breaks after entering the docs subdir).
</I>&gt;<i> 
</I>&gt;<i> Did you read `./configure -h` output? ...
</I>
Yes

&gt;<i> ... There's not only the --disable-
</I>&gt;<i> mcs-build option but also --with-mcs-docs=no. That should in theory
</I>&gt;<i> take care of the latter, without any Makefile modification.
</I>
The option --with-mcs-docs doesn't exist in the version I'm using. Maybe I need to look at a later version then (perhaps rc2)? The reason I didn't checkout the tip was because of the comment in the download page stating that the daily SVN tarballs are not guaranteed to build.

&gt;<i> 
</I>&gt;<i> For the other one, there's --with-tls=__thread or --with-tls=pthread.
</I>&gt;<i> Please read for yourself.
</I>
I invoke configure as

./configure --prefix=/usr --cache-file=cis2.cache --with-sigaltstack=no  --with-tls=__thread --disable-mcs-build --host=ppc-linux

I still get the error. That's why I had to hack configure.in to add a caching variable 'mono_cv_workingthread'.

&gt;<i> &gt; The mono:arm page (<A HREF="http://www.mono-project.com/Mono:ARM">http://www.mono-project.com/Mono:ARM</A>) recommends
</I>&gt;<i> &gt; using scratchbox. Does this mean that mono can't be built using
</I>&gt;<i> &gt; cross compilers?
</I>&gt;<i> 
</I>&gt;<i> It can, it's just not for the feint-hearted and not well documented.
</I>&gt;<i> You need to understand autoconf and you may need to know details of
</I>&gt;<i> the target platform.
</I>
Well at least now I know that it's possible. Thanks.

Now if I may assume that I've got the build working properly, I wonder if anyone could provide any clues as to why mscorlib.dll is rejected? On the x86 dev environment the DLL is parsed properly by pedump. On the target (the PPC), the same DLL is rejected. Could the endienness of the 2 architectures be causing some sort of problem?

Thanks again for all your help.

Dushara



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042811.html">[Mono-list] Cross compiling mono 2.4 to PowerPC
</A></li>
	<LI>Next message: <A HREF="042793.html">[Mono-list]  Threading ThreadPriority under Mono/Linux vs Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42813">[ date ]</a>
              <a href="thread.html#42813">[ thread ]</a>
              <a href="subject.html#42813">[ subject ]</a>
              <a href="author.html#42813">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
