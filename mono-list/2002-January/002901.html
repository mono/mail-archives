<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Latest mono for Cygwin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:dick%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002900.html">
   <LINK REL="Next"  HREF="002902.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Latest mono for Cygwin
   </H1>
    <B>Dick Porter
    </B> 
    <A HREF="mailto:dick%40ximian.com"
       TITLE="[Mono-list] Latest mono for Cygwin">dick@ximian.com
       </A><BR>
    <I>Thu, 31 Jan 2002 10:03:49 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="002900.html">[Mono-list] Latest mono for Cygwin
</A></li>
        <LI> Next message: <A HREF="002902.html">[Mono-list] Latest mono for Cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2901">[ date ]</a>
              <a href="thread.html#2901">[ thread ]</a>
              <a href="subject.html#2901">[ subject ]</a>
              <a href="author.html#2901">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jan 31, 2002 at 09:33:35AM +0000, Dan Lewis wrote:
&gt;<i> At the moment the build system appears to have two Win32 targets, denoted by
</I>&gt;<i> the
</I>&gt;<i> defines PLATFORM_WIN32 and PLATFORM_WIN32_NATIVE. The first is meant for Cygwin
</I>&gt;<i> (Unix-style API, linking to the cywin1.dll emulation layer), the second for
</I>&gt;<i> MinGW.
</I>&gt;<i> 
</I>&gt;<i> Now IMHO, I think the PLATFORM_WIN32 target (Cygwin) should be scrapped, or at
</I>&gt;<i> least put on the back burner - and PLATFORM_WIN32_NATIVE (MinGW) should be the
</I>&gt;<i> Windows default. The reason being is that Dick Porter's io-layer, which is sort
</I>&gt;<i> of like a mini-Cygwin in reverse, would be mapping the Windows API to the Unix
</I>&gt;<i> API, and then Cygwin would be mapping the Unix API back to Windows. This is
</I>&gt;<i> crazy enough, but you'd also have to actively maintain the code for Cygwin,
</I>&gt;<i> which is already missing a few screws. (Unfortunately it's difficult to use
</I>&gt;<i> both
</I>&gt;<i> cygwin1.dll and the MS runtime libraries together, because certain things
</I>&gt;<i> collide
</I>&gt;<i> - eg the sockets namespace).
</I>
Actually, on cygwin the io-layer is bypassed. Cygwin has its own wrapper
for the native w32 calls (in the w32api package).  Mono has been known to
build under cygwin (we try and keep it working, though none of the runtime
developers builds it on windows very often), but the mingw &quot;support&quot; in
configure.in and io-layer is really just good intention.

&gt;<i> 
</I>&gt;<i> To fully support the native target, we need to do a few things. Where Unix
</I>&gt;<i> libraries are used, a Windows alternative needs to be provided. There's an
</I>&gt;<i> example of this in rawbuffer.c, which uses mmap() under Unix and file mapping
</I>&gt;<i> under Windows. Thankfully there are only a few places where this needs to be
</I>&gt;<i> done (the class globber in monowrapper uses the Unix regex library, for
</I>&gt;<i> instance).
</I>
The monowrapper library is being deprecated in favour of the io-layer library.

&gt;<i> 
</I>&gt;<i> Secondly, a Windows target for corlib needs to be built. There's some code to
</I>&gt;<i> do
</I>&gt;<i> this in the class library, but I can't seem to get it to compile. (I could run
</I>&gt;<i> hello world using the Linux library, but the loader throws up loads of warnings
</I>&gt;<i> when it trys to link internal methods to libc and libm instead of MSVCRT.)
</I>
The separation between windows and posix builds (the System.PAL namespace)
is also being deprecated in favour of the io-layer library.  At the moment,
sorting out class/corlib/Windows/Windows.cs to match Linux.cs shouldn't be
too difficult - all the internal calls should be exactly the same.

- Dick



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002900.html">[Mono-list] Latest mono for Cygwin
</A></li>
	<LI> Next message: <A HREF="002902.html">[Mono-list] Latest mono for Cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2901">[ date ]</a>
              <a href="thread.html#2901">[ thread ]</a>
              <a href="subject.html#2901">[ subject ]</a>
              <a href="author.html#2901">[ author ]</a>
         </LI>
       </UL>
</body></html>
