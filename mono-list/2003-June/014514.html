<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] string encoding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jaak%40zd.com.pl">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014513.html">
   <LINK REL="Next"  HREF="014515.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] string encoding
   </H1>
    <B>Jaroslaw Kowalski
    </B> 
    <A HREF="mailto:jaak%40zd.com.pl"
       TITLE="[Mono-list] string encoding">jaak@zd.com.pl
       </A><BR>
    <I>Mon, 23 Jun 2003 00:02:27 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="014513.html">[Mono-list] string encoding
</A></li>
        <LI> Next message: <A HREF="014515.html">[Mono-list] string encoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14514">[ date ]</a>
              <a href="thread.html#14514">[ thread ]</a>
              <a href="subject.html#14514">[ subject ]</a>
              <a href="author.html#14514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>1. If you want GTK Support to be mono-only then adding an extension is a way
to go. I don't think that it should be done that way.

2. If you want portability and want to see a quick progress then try
System.Text.Encoding.UTF8.GetBytes(...) and passing strings as byte arrays.
It may not be fast, though because it creates new heap object (garbage) for
each input parameter.

3. You may also want to create a wrapper aroung GTK that would accept utf-16
parameters and convert them to utf-8 which is used by gtk. I think this
would be the fastest way, because all the costly conversion is done in
unmanaged (and highly optimized) code, there are no managed objects (byte
arrays) allocated. Also transition from managed to unmanaged requires no
marshalling as string can be blitted to wchar_t * according to MS specs. I
also think this kind of wrapper could be done automatically using techniques
similar to what gtk-sharp uses today.

Jarek

----- Original Message -----
From: &quot;Havoc Pennington&quot; &lt;<A HREF="mailto:hp@redhat.com">hp@redhat.com</A>&gt;
To: &quot;Jaroslaw Kowalski&quot; &lt;<A HREF="mailto:jaroslaw.kowalski@atm.com.pl">jaroslaw.kowalski@atm.com.pl</A>&gt;
Cc: &quot;Marcus&quot; &lt;<A HREF="mailto:mathpup@mylinuxisp.com">mathpup@mylinuxisp.com</A>&gt;; &lt;<A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>&gt;
Sent: Sunday, June 22, 2003 9:06 PM
Subject: Re: [Mono-list] string encoding


&gt;<i> On Sun, Jun 22, 2003 at 08:38:34PM +0200, Jaroslaw Kowalski wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Charset.Ansi is dependent on windows installation. In Polish Windows it
</I>uses
&gt;<i> &gt; 1250 codepage.
</I>&gt;<i> &gt; All ANSI versions of WIN32 APIs (like GetCurrentDirectoryA) use this
</I>&gt;<i> &gt; codepage.
</I>&gt;<i>
</I>&gt;<i> Yikes. Maybe on UNIX then CharSet.Ansi should be interpreted as &quot;the
</I>&gt;<i> current locale encoding&quot;?
</I>&gt;<i>
</I>&gt;<i> That leaves no way to marshal functions that take UTF-8 regardless of
</I>&gt;<i> locale as GTK does, but Mono could add some nonstandard extension to
</I>&gt;<i> make that easier I suppose.
</I>&gt;<i>
</I>&gt;<i> Havoc
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014513.html">[Mono-list] string encoding
</A></li>
	<LI> Next message: <A HREF="014515.html">[Mono-list] string encoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14514">[ date ]</a>
              <a href="thread.html#14514">[ thread ]</a>
              <a href="subject.html#14514">[ subject ]</a>
              <a href="author.html#14514">[ author ]</a>
         </LI>
       </UL>
</body></html>
