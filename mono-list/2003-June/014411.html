<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Traversing directories
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:dick%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014412.html">
   <LINK REL="Next"  HREF="014397.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Traversing directories
   </H1>
    <B>Dick Porter
    </B> 
    <A HREF="mailto:dick%40ximian.com"
       TITLE="[Mono-list] Traversing directories">dick@ximian.com
       </A><BR>
    <I>16 Jun 2003 13:49:00 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="014412.html">[Mono-list] Traversing directories
</A></li>
        <LI> Next message: <A HREF="014397.html">[Mono-list] mod_mono on Gentoo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14411">[ date ]</a>
              <a href="thread.html#14411">[ thread ]</a>
              <a href="subject.html#14411">[ subject ]</a>
              <a href="author.html#14411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2003-06-16 at 03:08, Jonathan Pryor wrote:
&gt;<i> Encoding is a tricky subject.  At this point, mono uses glib, which
</I>&gt;<i> assumes that all filenames are encoded as UTF-8 strings.  This is an
</I>&gt;<i> invalid assumption for your environment, resulting in bizarre program
</I>&gt;<i> behavior.
</I>&gt;<i>=20
</I>&gt;<i> See:
</I>&gt;<i> 	<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=3D30781">http://bugzilla.ximian.com/show_bug.cgi?id=3D30781</A>
</I>&gt;<i> 	<A HREF="http://bugzilla.gnome.org/show_bug.cgi?id=3D93751">http://bugzilla.gnome.org/show_bug.cgi?id=3D93751</A>
</I>&gt;<i>=20
</I>&gt;<i> The fix is (should be?) to set the G_BROKEN_FILENAMES environment
</I>&gt;<i> variable  (presumably to an empty string -- export G_BROKEN_FILENAMES=3D&quot;=
</I>&quot;
&gt;<i> -- but this isn't clear from the above bug reports).
</I>
Unfortunately this doesn't work.  The only difference setting the env
var makes is to not spam the terminal with pointless g_warnings, iirc.

I'm rapidly coming to the conclusion that we will have to ditch glib for
locale encodings, because it's just not usable in the real world.
(Assuming that every file and every filename is utf-8 encoded is
bonkers.)  This work might be an ideal self-contained project for
someone looking for a way to contribute.

- Dick

&gt;<i>=20
</I>&gt;<i>  - Jon
</I>&gt;<i>=20
</I>&gt;<i> On Sun, 2003-06-15 at 08:09, =D8yvind Hvamstad wrote:
</I>&gt;<i> &gt; Hi all. I have problems while traversing directories having names with=20
</I>&gt;<i> &gt; iso-8859-1 encoding. If a file has say an =E6, =F8 or =E5 in it,  the c=
</I>all to=20
&gt;<i> &gt; Directory.GetFiles(path) throws an System.NullReferenceException.
</I>&gt;<i> &gt; I tried searcing the archives on the subject, but was unable to find=20
</I>&gt;<i> &gt; anything.
</I>&gt;<i> &gt;=20
</I>&gt;<i> &gt; Can anyone please help?
</I>&gt;<i>=20
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014412.html">[Mono-list] Traversing directories
</A></li>
	<LI> Next message: <A HREF="014397.html">[Mono-list] mod_mono on Gentoo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14411">[ date ]</a>
              <a href="thread.html#14411">[ thread ]</a>
              <a href="subject.html#14411">[ subject ]</a>
              <a href="author.html#14411">[ author ]</a>
         </LI>
       </UL>
</body></html>
