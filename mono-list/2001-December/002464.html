<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Internalcall
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jasonw%40develop.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002462.html">
   <LINK REL="Next"  HREF="002463.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Internalcall
   </H1>
    <B>Jason Whittington
    </B> 
    <A HREF="mailto:jasonw%40develop.com"
       TITLE="[Mono-list] Internalcall">jasonw@develop.com
       </A><BR>
    <I>Fri, 28 Dec 2001 11:35:39 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="002462.html">[Mono-list] Internalcall
</A></li>
        <LI> Next message: <A HREF="002463.html">[Mono-list] Struct Unit: Stuck again..
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2464">[ date ]</a>
              <a href="thread.html#2464">[ thread ]</a>
              <a href="subject.html#2464">[ subject ]</a>
              <a href="author.html#2464">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Internalcall methods are ones where the body is generated by the runtime,
typically because they represents some intrinsic capability of the runtime
itself.  Sort of like P/Invoke in reverse - rather than calling out to
unmanaged
code it's a method that has to be linked to a method implemented by the
runtime
itself.

Thread.StartInternal is the classic instance in my mind,
there's no reasonable way to start a thread from pure managed code -
the runtime has to do whatever makes sense for the platform.  If you look
at the mono source for Thread
(/mcs/class/corlib/System.Threading/Thread.cs)
you'll see that Start_internal is marked as
[MethodImpl(MethodImplOptions.InternalCall)]
and has no body.

So the runtime itself has to have a priori knowledge of
internalcall methods and know how to implement them.  I always
imagined (but haven't proved) that the runtime has more or less
a dictionary so that when JITting it sees the flag and finds the
matching function and links it up internally.  There is no way
to actually attach any kind of *body* to an internalcall method
(you'll notice that all internalcall methods you find have empty
bodies) so I think the &quot;dictionary&quot; approach may be the only
way to do it.

Jason




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002462.html">[Mono-list] Internalcall
</A></li>
	<LI> Next message: <A HREF="002463.html">[Mono-list] Struct Unit: Stuck again..
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2464">[ date ]</a>
              <a href="thread.html#2464">[ thread ]</a>
              <a href="subject.html#2464">[ subject ]</a>
              <a href="author.html#2464">[ author ]</a>
         </LI>
       </UL>
</body></html>
