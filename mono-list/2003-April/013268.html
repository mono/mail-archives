<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Implementation of ListWrapper.Sort
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tum%40veridicus.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="013267.html">
   <LINK REL="Next"  HREF="013292.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Implementation of ListWrapper.Sort
   </H1>
    <B>Thong (Tum) Nguyen
    </B> 
    <A HREF="mailto:tum%40veridicus.com"
       TITLE="[Mono-list] Implementation of ListWrapper.Sort">tum@veridicus.com
       </A><BR>
    <I>Sun, 6 Apr 2003 07:22:43 +1200</I>
    <P><UL>
        <LI> Previous message: <A HREF="013267.html">[Mono-list] German Localisation of Mono
</A></li>
        <LI> Next message: <A HREF="013292.html">[Mono-list] Implementation of ListWrapper.Sort
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13268">[ date ]</a>
              <a href="thread.html#13268">[ thread ]</a>
              <a href="subject.html#13268">[ subject ]</a>
              <a href="author.html#13268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

------=_NextPart_000_0013_01C2FC0D.52150980
Content-Type: text/plain;
	charset=&quot;Windows-1252&quot;
Content-Transfer-Encoding: 7bit

Can't remember if this is the place for patches or not...

^Tum

&quot;The true measure of a man is how he treats someone who can do him
absolutely no good.&quot; - Samuel Johnson (1709-1784)



---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (<A HREF="http://www.grisoft.com">http://www.grisoft.com</A>).
Version: 6.0.461 / Virus Database: 260 - Release Date: 10/03/2003
 
  

------=_NextPart_000_0013_01C2FC0D.52150980
Content-Type: application/octet-stream;
	name=&quot;listwrapper.diff&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename=&quot;listwrapper.diff&quot;

? arraylist.diff=0A=
? listwrapper.diff=0A=
Index: ArrayList.cs=0A=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
RCS file: /mono/mcs/class/corlib/System.Collections/ArrayList.cs,v=0A=
retrieving revision 1.42=0A=
diff -r1.42 ArrayList.cs=0A=
319,320c319,321=0A=
&lt; 			[MonoTODO]
&lt; 			public override void Sort () {
---=0A=
&gt;<i> 			public override void Sort ()
</I>&gt;<i> 			{
</I>&gt;<i> 				QuickSort(this, 0, count - 1, Comparer.Default);
</I>323,324c324,326=0A=
&lt; 			[MonoTODO]
&lt; 			public override void Sort (IComparer comparer) {
---=0A=
&gt;<i> 			public override void Sort (IComparer comparer)
</I>&gt;<i> 			{
</I>&gt;<i> 				QuickSort(this, 0, count - 1, comparer);
</I>327,328c329,423=0A=
&lt; 			[MonoTODO]
&lt; 			public override void Sort (int index, int count, IComparer =
comparer) {
---=0A=
&gt;<i> 			public override void Sort (int index, int count, IComparer =
</I>comparer)
&gt;<i> 			{
</I>&gt;<i> 				QuickSort(this, index, index + count, comparer);
</I>&gt;<i> 			}
</I>&gt;<i>=20
</I>&gt;<i> 			/// &lt;summary&gt;
</I>&gt;<i> 			/// Swaps two items in a list at the specified indexes.
</I>&gt;<i> 			/// &lt;/summary&gt;
</I>&gt;<i> 			private static void Swap(IList list, int x, int y)
</I>&gt;<i> 			{
</I>&gt;<i> 				object tmp;
</I>&gt;<i> 			=09
</I>&gt;<i> 				tmp =3D list[x];
</I>&gt;<i> 				list[x] =3D list[y];
</I>&gt;<i> 				list[y] =3D tmp;
</I>&gt;<i> 			}
</I>&gt;<i>=20
</I>&gt;<i> 			/// &lt;summary&gt;
</I>&gt;<i> 			/// Quicksort for lists.
</I>&gt;<i> 			/// &lt;/summary&gt;
</I>&gt;<i> 			/// &lt;remarks&gt;
</I>&gt;<i> 			/// This function acts as both qsort() and partition().
</I>&gt;<i> 			/// &lt;/remarks&gt;
</I>&gt;<i> 			private static void QuickSort(IList list, int left, int right, =
</I>IComparer comparer)
&gt;<i> 			{
</I>&gt;<i> 				int i, j, middle;
</I>&gt;<i> 				object pivot;
</I>&gt;<i> 				=09
</I>&gt;<i> 				if (left &gt;=3D right)
</I>&gt;<i> 				{
</I>&gt;<i> 					return;
</I>&gt;<i> 				}
</I>&gt;<i>=20
</I>&gt;<i> 				// Pick the pivot using the median-of-three strategy.
</I>&gt;<i>=20
</I>&gt;<i> 				middle =3D (left + right) / 2;
</I>&gt;<i>=20
</I>&gt;<i> 				if (comparer.Compare(list[middle], list[left]) &lt; 0)
</I>&gt;<i> 				{
</I>&gt;<i> 					Swap(list, middle, left);
</I>&gt;<i> 				}
</I>&gt;<i>=20
</I>&gt;<i> 				if (comparer.Compare(list[right], list[left]) &lt; 0)
</I>&gt;<i> 				{
</I>&gt;<i> 					Swap(list, right, left);
</I>&gt;<i> 				}
</I>&gt;<i>=20
</I>&gt;<i> 				if (comparer.Compare(list[right], list[middle]) &lt; 0)
</I>&gt;<i> 				{
</I>&gt;<i> 					Swap(list, right, middle);
</I>&gt;<i> 				}
</I>&gt;<i> 	=09
</I>&gt;<i> 				if (right - left + 1 &lt;=3D 3)
</I>&gt;<i> 				{
</I>&gt;<i> 					return;
</I>&gt;<i> 				}
</I>&gt;<i> 	=09
</I>&gt;<i> 				// Put the pivot in right - 1.
</I>&gt;<i>=20
</I>&gt;<i> 				Swap(list, right - 1, middle);
</I>&gt;<i>=20
</I>&gt;<i> 				// List should look like:
</I>&gt;<i> 				//
</I>&gt;<i> 				// [Small] ..Numbers.. [Middle] ..Numbers.. [Pivot][Large]
</I>&gt;<i>=20
</I>&gt;<i> 				pivot =3D list[right - 1];
</I>&gt;<i>=20
</I>&gt;<i> 				// Sort from (left + 1) to (right - 2).
</I>&gt;<i>=20
</I>&gt;<i> 				i =3D left;
</I>&gt;<i> 				j =3D right - 1;		=09
</I>&gt;<i> 	=09
</I>&gt;<i> 				for (;;)
</I>&gt;<i> 				{
</I>&gt;<i> 					while (comparer.Compare(list[++i], pivot) &lt; 0);
</I>&gt;<i> 					while (comparer.Compare(list[--j], pivot) &gt; 0);
</I>&gt;<i> 		=09
</I>&gt;<i> 					if (i &lt; j)
</I>&gt;<i> 					{
</I>&gt;<i> 						Swap(list, i, j);
</I>&gt;<i> 					}
</I>&gt;<i> 					else
</I>&gt;<i> 					{
</I>&gt;<i> 						break;
</I>&gt;<i> 					}
</I>&gt;<i> 				}
</I>&gt;<i>=20
</I>&gt;<i> 				// Put pivot into the right position (real middle).
</I>&gt;<i>=20
</I>&gt;<i> 				Swap(list, right - 1, i);
</I>&gt;<i>=20
</I>&gt;<i> 				// Recursively sort the left and right sub lists.
</I>&gt;<i>=20
</I>&gt;<i> 				QuickSort(list, left, i - 1, comparer);
</I>&gt;<i> 				QuickSort(list, i + 1, right, comparer);	=09
</I>Index: ChangeLog=0A=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
RCS file: /mono/mcs/class/corlib/System.Collections/ChangeLog,v=0A=
retrieving revision 1.66=0A=
diff -r1.66 ChangeLog=0A=
0a1,3=0A=
&gt;<i> 2003-04-06  Thong Nguyen &lt;<A HREF="mailto:tum@veridicus.com">tum@veridicus.com</A>&gt;=0A=
</I>&gt;<i> 	* ArrayList.cs:  Added implementation for ListWrapper.Sort.=0A=
</I>&gt;<i> =0A=
</I>
------=_NextPart_000_0013_01C2FC0D.52150980--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="013267.html">[Mono-list] German Localisation of Mono
</A></li>
	<LI> Next message: <A HREF="013292.html">[Mono-list] Implementation of ListWrapper.Sort
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13268">[ date ]</a>
              <a href="thread.html#13268">[ thread ]</a>
              <a href="subject.html#13268">[ subject ]</a>
              <a href="author.html#13268">[ author ]</a>
         </LI>
       </UL>
</body></html>
