<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Critical sections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:dick%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="021467.html">
   <LINK REL="Next"  HREF="021495.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Critical sections
   </H1>
    <B>Dick Porter
    </B> 
    <A HREF="mailto:dick%40ximian.com"
       TITLE="[Mono-list] Critical sections">dick@ximian.com
       </A><BR>
    <I>20 Jun 2004 20:13:40 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="021467.html">[Mono-list] Critical sections
</A></li>
        <LI> Next message: <A HREF="021495.html">Re[2]: [Mono-list] Critical sections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21491">[ date ]</a>
              <a href="thread.html#21491">[ thread ]</a>
              <a href="subject.html#21491">[ subject ]</a>
              <a href="author.html#21491">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 2004-06-19 at 22:43, Vadim B. Guzev wrote:
&gt;<i> Hello ,
</I>&gt;<i> 
</I>&gt;<i> I'm constantly getting the following error:
</I>&gt;<i> ** ERROR **: file critical-sections.c: line 89 (DeleteCriticalSection): assertion failed: (ret == 0)
</I>&gt;<i> aborting...
</I>&gt;<i> And after that application crashes...
</I>&gt;<i> 
</I>&gt;<i> What do these &quot;critical sections&quot; mean? Is it related to sockets,
</I>&gt;<i> mutexes, monitors, threads or what?
</I>
Something is causing the runtime to delete a locked critical section (an
internal mutex.)  This is an internal bug.

&gt;<i> I can't understand what's wrong with my program. It happens when I call
</I>&gt;<i> System.Environment.Exit(0) from one of the running threads.
</I>&gt;<i> 
</I>&gt;<i> Also sometimes I get this warning
</I>&gt;<i> ** (/home/vadim/mcsharp.cluster/bin/wn.exe:1737): WARNING **: : unref on 18 called when ref was already 0
</I>
I suspect this (and the critical section problem) is due to aborting the
running threads when you are exiting the application.

&gt;<i> 
</I>&gt;<i> I'm using:
</I>&gt;<i> Mono 0.91
</I>&gt;<i> Linux skif 2.4.25 #2 SMP Fri Apr 23 14:03:00 MSD 2004 i686 athlon i386 GNU/Linux
</I>&gt;<i> gcc (GCC) 3.2.2 20030222 (Red Hat Linux 3.2.2-5)
</I>
Newer versions have a much improved thread abort, but still need a bit
of work in this area.  It might be good enough at the moment for you
already though.  The SMP part seems to make thread abort problems much
more apparent, btw.

If you can demonstrate this problem in a short test application, it
would help us if you add it to bugzilla.  I suspect you're seeing
<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=58065">http://bugzilla.ximian.com/show_bug.cgi?id=58065</A> so that might be worth
a look.


- Dick



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="021467.html">[Mono-list] Critical sections
</A></li>
	<LI> Next message: <A HREF="021495.html">Re[2]: [Mono-list] Critical sections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21491">[ date ]</a>
              <a href="thread.html#21491">[ thread ]</a>
              <a href="subject.html#21491">[ subject ]</a>
              <a href="author.html#21491">[ author ]</a>
         </LI>
       </UL>
</body></html>
