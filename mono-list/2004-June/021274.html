<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Multiple ASP.net VirtualHosts, running as `/'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:steve%40citygroup.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="021206.html">
   <LINK REL="Next"  HREF="021207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Multiple ASP.net VirtualHosts, running as `/'
   </H1>
    <B>Steve Deobald
    </B> 
    <A HREF="mailto:steve%40citygroup.ca"
       TITLE="[Mono-list] Multiple ASP.net VirtualHosts, running as `/'">steve@citygroup.ca
       </A><BR>
    <I>Sun, 13 Jun 2004 22:06:10 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="021206.html">[Mono-list] Multiple ASP.net VirtualHosts, running as `/'
</A></li>
        <LI> Next message: <A HREF="021207.html">[Mono-list] New web site up
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21274">[ date ]</a>
              <a href="thread.html#21274">[ thread ]</a>
              <a href="subject.html#21274">[ subject ]</a>
              <a href="author.html#21274">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 2004-06-11 at 01:38, Gonzalo Paniagua Javier wrote:
&gt;<i> You don't need the alias for / if you use DocumentRoot
</I>&gt;<i> (<A HREF="http://httpd.apache.org/docs-2.0/mod/core.html#documentroot">http://httpd.apache.org/docs-2.0/mod/core.html#documentroot</A>) and then
</I>&gt;<i> &lt;Location /&gt;
</I>&gt;<i> 	SetHandler mono
</I>&gt;<i> &lt;/Location&gt;
</I>&gt;<i> 
</I>&gt;<i> and, btw, then ending / after all public_html you have might be wrong.
</I>&gt;<i> 
</I>&gt;<i> -Gonzalo
</I>
Hey folks! After a long chat with Gonz before the weekend, I found out a
lot of neat mod_mono/xsp stuff relating to running multiple VirtualHosts
with different methods.

Briefly, for myself, the easiest solution was to go with a single
`MonoApplications' line:

MonoApplications
&quot;someguy.com:80:/:/home/someguy/blah,otherguy.com:80:/:/home/otherguy/public_html&quot;

Keep this outside of your &lt;VirtualHost&gt; directive, and all should be
well. (If you only need one vhost running, just use everything up to the
comma.) Your &lt;VirtualHost&gt; directive will now look something like:

DocumentRoot /home/someguy/public_html
&lt;Location /&gt;
        SetHandler mono
&lt;/Location&gt;

I think this is gorgeous. Nice and clean - easy to edit. Congrats to the
mod_mono/xsp team on this. Gonzalo also mentioned to me that if one is
looking to script vhost creation, it's easiest to use .webapp files.
I'll look into this further, but I'm happy with the current solution for
myself.


I'm pasting the modified chat log from talking with Gonz below.
Hopefully someone coming across this while Googling will find it useful.
:<i>) If anyone has any corrections or amendments, please reply to this
</I>thread. Thanks!

.steve



16:03 &lt; steved&gt; gonzalo: Hmm. I changed my server config as you
suggested (use DocumentRoot exclusively with the Location directive),
but somehow all traffic is still redirected to a single site.
16:03 &lt; steved&gt; gonzalo: Any ideas?
16:03 &lt;@gonzalo&gt; no :-?
16:04 &lt; steved&gt; dohs
16:04 &lt; steved&gt; Any idea if anyone else has this working? Cuz if so,
I'll keep playing with it.
16:04 &lt; steved&gt; Just curious if it's a bug
16:05 &lt;@gonzalo&gt; looks more like a configuration problem
16:05 &lt; steved&gt; gonzalo: okay
16:05 &lt;@gonzalo&gt; either on apache side or mod-mono-server side (might
even be a bug)


16:06 &lt; steved&gt; gonzalo: This is all that's in there right now (followed
by the regular stuff):
16:06 &lt; steved&gt; DocumentRoot /home/mdevelop/public_html
16:06 &lt; steved&gt; MonoApplications &quot;/:/home/mdevelop/public_html&quot;
16:06 &lt; steved&gt; &lt;Location /&gt;
16:06 &lt; steved&gt;         SetHandler mono
16:06 &lt; steved&gt; &lt;/Location&gt;
16:06 &lt; steved&gt; I don't really know the internals of Apache (this is
1.3), so I'm not sure why all the following sites would also point to
that same location
16:07 &lt;@gonzalo&gt; steved: that's not the way to go for virtual servers
16:07 &lt; steved&gt; gonzalo: oh?
16:07 &lt;@gonzalo&gt; you need to use a .webapp file
16:07 &lt; steved&gt; Ahh!
16:07 &lt; steved&gt; I didn't realize it was required.
16:07 &lt;@gonzalo&gt; man mcs or man mod_mono
16:07 &lt; steved&gt; Okay, cool.


16:07 &lt;@gonzalo&gt; or change MonoApplications to include the virtual
server too
16:07 &lt; steved&gt; I was just trying to make it as simple a config as
possible. :)
16:08 &lt; steved&gt; Change MonoApplications to include the virtual
server...?
16:08 &lt;@gonzalo&gt; a comma separated list of virtual directory and
16:08 &lt;@gonzalo&gt;   real directory for all the applications we want to
manage
16:08 &lt;@gonzalo&gt;   with this server. The virtual and real dirs. are
separated
16:08 &lt;@gonzalo&gt;   by a colon. Optionally you may specify virtual host
name
16:08 &lt;@gonzalo&gt;   and a port.
16:08  * gonzalo notices the man page is not updated
16:09 &lt;@gonzalo&gt; [[hostname:]port:]VPath:realpath
16:09 &lt; steved&gt; ah
16:10 &lt; steved&gt; MonoApplications
&quot;monodevelop.com:80:/:/home/mdevelop/blah&quot;
16:10 &lt; steved&gt; And then the .webapp file isn't required, or?
16:11 &lt;@gonzalo&gt; right
16:11 &lt; steved&gt; Cool stuff
16:12 &lt;@gonzalo&gt; i will add some more docs and release xsp and mod_mono


16:12 &lt; steved&gt; So can the &quot;detailed&quot; MonoApplications format and
.webapp files be mixed? (cleanly?)
16:12 &lt;@gonzalo&gt; yes
16:12 &lt; steved&gt; Also cool
16:12 &lt;@gonzalo&gt; it doesn't handle duplicates, so watch out
16:12 &lt; steved&gt; Come again?
16:12 &lt;@gonzalo&gt; if you give an application in MonoApplication and then
16:13 &lt;@gonzalo&gt; another on with the same server/port/vdir, the second
one overwrites the first one
16:13 &lt; steved&gt; Ah, ok
16:13 &lt; steved&gt; That's fair enough, I think ;)


16:14 &lt; steved&gt; So if I avoid .webapps, should I only have a single
MonoApplications line in the whole config file?
16:14 &lt; steved&gt; As opposed to putting it in the VirtualHost directive?
16:14 &lt; steved&gt; s/the/a
16:15 &lt; steved&gt; Or rather, does it require a single comma-delimited
MonoApplications directive, or can multiple be used?
16:16 &lt;@gonzalo&gt; one single --applications

16:17 &lt;@gonzalo&gt; once you make it work, can you post a reply to the
list?
16:17  * steved answers his own question with an experiment
16:17 &lt; steved&gt; Yeah, for sure
16:17 &lt; steved&gt; This is really cool
16:17 &lt;@gonzalo&gt; thanks!
16:17 &lt; steved&gt; Cuz
16:17 &lt; steved&gt; I just tried multiple lines, and that works fine
16:18 &lt;@gonzalo&gt; oh
16:18 &lt;@gonzalo&gt; hahaha
16:18 &lt; steved&gt; :)
16:18 &lt; steved&gt; Although it works weird.
16:18 &lt;@gonzalo&gt; i'll document that 'feature' :)
16:18 &lt; steved&gt; hahah!
16:18 &lt;@gonzalo&gt; or make it not work at all
16:18 &lt; steved&gt; Heh
16:18 &lt; steved&gt; Both are good, I guess. ;)
16:18 &lt; steved&gt; It's kinda nice this way, actually
16:18 &lt; steved&gt; Seems more intuitive to me, for some reason.
16:19 &lt; steved&gt; However, it does make it operate really specifically.


16:19 &lt;@gonzalo&gt; i prefer that instead of the .webapp
16:19 &lt; steved&gt; Compare www.monodevelop.com and monodevelop.com right
now, and it only works w/o the www.
16:19 &lt;@gonzalo&gt; but if you want to serve $HOME/public_html dirs,
16:19 &lt;@gonzalo&gt; it's better to use .webapp
16:19 &lt;@gonzalo&gt; as you can make then with a script and deploy all of
them in a directory
16:19 &lt; steved&gt; Any particular reason?
16:20 &lt; steved&gt; Oh, I see
16:20 &lt; steved&gt; Put the .webapp in people's skel, you mean?
16:20 &lt;@gonzalo&gt; no, you put all of them in a directory
16:20 &lt;@gonzalo&gt; and then use --appconfigdir
16:20 &lt; steved&gt; oh
16:20 &lt;@gonzalo&gt; or the equivalent mod_mono stuff
16:20 &lt; steved&gt; Right
16:21 &lt; steved&gt; But just for the ease of scripting, you're saying
16:21 &lt;@gonzalo&gt; yes
16:21 &lt; steved&gt; I guess that make sense
16:21 &lt;@gonzalo&gt; one of these years i'll have a proper FAQ containing
hints on this
16:21 &lt; steved&gt; Man, this is awesome
16:21 &lt;@gonzalo&gt; :)
16:21 &lt; steved&gt; hehe :)
16:21 &lt; steved&gt; Well, I'm slowly building up one of my own. ;)


16:22 &lt; steved&gt; Definitely cool to find out about all the options. The
flexibility is really nice.
16:23 &lt;@gonzalo&gt; jaroslaw did a good job with vhost support in xsp
16:23 &lt; steved&gt; yeah?
16:23 &lt;@gonzalo&gt; he did most of the patch
16:23 &lt;@gonzalo&gt; that added vhost support through --applications or
.webapp files


16:24 &lt; steved&gt; If I continue to use multiple MonoApplications
directives (assuming you leave that &quot;feature&quot; in), is there a way to set
wildcards at all? Or do I just have to be very specific about what to
run mono on?
16:24 &lt; steved&gt; ie. Can I say *.monodevelop.com? or just monodevelop.com
and www.monodevelop.com?
16:24 &lt;@gonzalo&gt; the wild card for hosts is having no host at all
16:24 &lt;@gonzalo&gt; for the rest, there's no wildcard
16:25 &lt; steved&gt; gonzalo: ok
16:26 &lt; steved&gt; gonzalo: So can I do that with .webapp (have
*.monodevelop.com handled by mod_mono)? Or it's just not available if I
want multiple virtual hosts?


16:43 &lt; steved&gt; gonzalo: oops, I take it back
16:43 &lt; steved&gt; You can't have multiple MonoApplications lines
16:43 &lt; steved&gt; It looked like it worked, but I guess it doesn't :)



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="021206.html">[Mono-list] Multiple ASP.net VirtualHosts, running as `/'
</A></li>
	<LI> Next message: <A HREF="021207.html">[Mono-list] New web site up
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21274">[ date ]</a>
              <a href="thread.html#21274">[ thread ]</a>
              <a href="subject.html#21274">[ subject ]</a>
              <a href="author.html#21274">[ author ]</a>
         </LI>
       </UL>
</body></html>
