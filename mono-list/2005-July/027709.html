<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Running vs2005 beta 2 compiled code on mono...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Running%20vs2005%20beta%202%20compiled%20code%20on%20mono...&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027708.html">
   <LINK REL="Next"  HREF="027710.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Running vs2005 beta 2 compiled code on mono...</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Running%20vs2005%20beta%202%20compiled%20code%20on%20mono...&In-Reply-To="
       TITLE="[Mono-list] Running vs2005 beta 2 compiled code on mono...">kornelpal at hotmail.com
       </A><BR>
    <I>Fri Jul  1 20:43:48 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="027708.html">[Mono-list] Running vs2005 beta 2 compiled code on mono...
</A></li>
        <LI>Next message: <A HREF="027710.html">[Mono-list] Running vs2005 beta 2 compiled code on mono...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27709">[ date ]</a>
              <a href="thread.html#27709">[ thread ]</a>
              <a href="subject.html#27709">[ subject ]</a>
              <a href="author.html#27709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Unfortunately /clr:safe just isn't a viable option.  You can't use any
</I>&gt;<i> native datatypes if you have this switch on.  You can't do: struct foo {
</I>&gt;<i> int bar, baz; };
</I>
The new managed C++ syntax is a bit different than the old syntax but is
more reliable.

Use:
ref struct foo {
int bar, baz; };

Or:
value struct foo {
int bar, baz; };

You can use ref class and value class as well. IL does not have separate
class and struct types so you can use any of the struct or class keyword
they mean the same.

ref creates an object reference while value creates a value class.

And you should look at the documentation of C++ language in MSDN to can use
understand these new features:
<A HREF="http://msdn2.microsoft.com/library/xey702bw(en-us,vs.80">http://msdn2.microsoft.com/library/xey702bw(en-us,vs.80</A>).aspx

&gt;<i> We currently compile our low-level c++ libraries natively and we need to
</I>&gt;<i> continue to be able to do that.
</I>&gt;<i>
</I>&gt;<i> To build our new software, ideally we could use our low-level libs in
</I>&gt;<i> the mid-level code by just compiling it all to IL (using /clr:pure).
</I>&gt;<i> This way the mid-level code could build .net objects for itself and the
</I>&gt;<i> higher-level stuff to use.  Then (ideally) we could run everywhere with
</I>&gt;<i> the same code (and possibly one build!) using mono.
</I>&gt;<i>
</I>&gt;<i> Since this now seems impossible, I'm looking at other options:
</I>&gt;<i>
</I>&gt;<i> I don't think we can use whidbey-style c++ interop because the only
</I>&gt;<i> c++/cli compiler is in visual studio.  P/Invoke seems bad because our
</I>&gt;<i> low-level libs are heavily object oriented c++ and P/Invoke seems to
</I>&gt;<i> only work well for c-style interfaces.
</I>&gt;<i>
</I>&gt;<i> I'm struggling to figure out how to best do this sort of thing.
</I>
Native C++ libraries built for Win32 cannot be used on Mac anyway. So you
have to compile them into IL or use a native Mac library that is called by
the managed code using P/Invoke.

Alternatively you can embed Mono into your application and in this case you
can add InternalCalls that are managed methods but are implemented natively:
<A HREF="http://www.mono-project.com/Embedding_Mono">http://www.mono-project.com/Embedding_Mono</A>

Korn&#233;l

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027708.html">[Mono-list] Running vs2005 beta 2 compiled code on mono...
</A></li>
	<LI>Next message: <A HREF="027710.html">[Mono-list] Running vs2005 beta 2 compiled code on mono...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27709">[ date ]</a>
              <a href="thread.html#27709">[ thread ]</a>
              <a href="subject.html#27709">[ subject ]</a>
              <a href="author.html#27709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
