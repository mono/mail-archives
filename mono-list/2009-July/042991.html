<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] null ref. exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20null%20ref.%20exception&In-Reply-To=1248087438.4969.5.camel%40djm-hp-ph">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042989.html">
   <LINK REL="Next"  HREF="042994.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] null ref. exception</H1>
    <B>Marek Habersack</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20null%20ref.%20exception&In-Reply-To=1248087438.4969.5.camel%40djm-hp-ph"
       TITLE="[Mono-list] null ref. exception">grendel at twistedcode.net
       </A><BR>
    <I>Mon Jul 20 07:18:33 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="042989.html">[Mono-list] null ref. exception
</A></li>
        <LI>Next message: <A HREF="042994.html">[Mono-list] null ref. exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42991">[ date ]</a>
              <a href="thread.html#42991">[ thread ]</a>
              <a href="subject.html#42991">[ subject ]</a>
              <a href="author.html#42991">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Peter Hagen wrote:
&gt;<i> Hi Gonzalo
</I>&gt;<i> 
</I>&gt;<i> I did some tests on ./mcs/class/System.Web/System.Web.UI/Control.cs and 
</I>&gt;<i> noticed if the TemplateSourceDirectory is empty, I get the crash.
</I>&gt;<i> 
</I>[snip]
&gt;<i> 
</I>&gt;<i> So, i added this line, which is probably not ok, but it works now. Im 
</I>&gt;<i> not sure what the TemplateSourceDirectory should be in this case. Do you 
</I>&gt;<i> have a suggestion?
</I>It should always be set to the virtual directory of the current control's parent. 
TemplateSourceDirectory can be empty only in those cases (2.0 profile):

1. this.TemplateControl is null and HttpContext.Current is null and the current control is not a
    TemplateControl
2. current control is a TemplateControl and this.AppRelativeVirtualPath is null, which can happen
    only if AppRelativeVirtualPath is never initialized from code generated by ASP.NET compiler.
3. We have a bug in 2.0 logic for Control.TemplateSourceDirectory

My bet is on #2, which would mean that your application is incorrectly ported to 2.0 - make sure 
that you run it with the 2.0 runtime, that all your code-behind and referenced assemblies are 
compiled with the 2.0 compiler. It is possible that some of your controls use the 1.1 version of 
System.Web and thus hit the 1.1 path in Control.TemplateSourceDirectory.

regards,

marek

&gt;<i> 
</I>&gt;<i> Cheers
</I>&gt;<i> 
</I>&gt;<i> Peter
</I>&gt;<i> 
</I>&gt;<i> On Mon, 2009-07-20 at 00:02 -0400, Gonzalo Paniagua Javier wrote:
</I>&gt;&gt;<i> On Sun, 2009-07-19 at 18:40 +0200, Peter Hagen wrote:
</I>&gt;&gt;<i> &gt; Hi Gonzalo
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; well, i have a bit a problem of recreating the bug in a new project.  
</I>&gt;&gt;<i> &gt; If i make a new project from MonoDevelop, it works as planned. But  
</I>&gt;&gt;<i> &gt; inside my project it doesn't. But this is originally a 1.1  
</I>&gt;&gt;<i> &gt; application. Uploading the entire project isnt really an option. So,  
</I>&gt;&gt;<i> &gt; ill try to figure out more about the project first :s
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you can build System.Web from sources, sprinkle a few
</I>&gt;&gt;<i> Console.WriteLine() in  Contorl.AppRelativeTemplateSourceDirectory and
</I>&gt;&gt;<i> ToAppRelative. That will at least tell you where the 'null' is used for
</I>&gt;&gt;<i> the first time.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Gonzalo
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>&gt;
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042989.html">[Mono-list] null ref. exception
</A></li>
	<LI>Next message: <A HREF="042994.html">[Mono-list] null ref. exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42991">[ date ]</a>
              <a href="thread.html#42991">[ thread ]</a>
              <a href="subject.html#42991">[ subject ]</a>
              <a href="author.html#42991">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
