<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Class Property Initializer Question...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Class%20Property%20Initializer%20Question...&In-Reply-To=4A65197A.7010304%40inovonics.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043006.html">
   <LINK REL="Next"  HREF="043007.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Class Property Initializer Question...</H1>
    <B>Ryan Kirkpatrick</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Class%20Property%20Initializer%20Question...&In-Reply-To=4A65197A.7010304%40inovonics.com"
       TITLE="[Mono-list] Class Property Initializer Question...">ryan.kirkpatrick at inovonics.com
       </A><BR>
    <I>Tue Jul 21 12:44:18 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="043006.html">[Mono-list] Class Property Initializer Question...
</A></li>
        <LI>Next message: <A HREF="043007.html">[Mono-list]  Mono 2.4 for RHEL4 or RHEL5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43013">[ date ]</a>
              <a href="thread.html#43013">[ thread ]</a>
              <a href="subject.html#43013">[ subject ]</a>
              <a href="author.html#43013">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ryan Kirkpatrick wrote:
&gt;<i> When I compile and run the following code with Visual Studio, the output 
</I>&gt;<i> is 'Blue/Green' and 'Red/Red'. When I compile and run the same code 
</I>&gt;<i> with Mono (2.4.2.x), the output is 'Blue/Green' and 'Blue/Green'.
</I>
Looked at this again with a fresh mind this morning and realized this 
only happens if the initial values set inline with 'new' are the 
variable type's default value. In other words, if I change the below 
code such that 'Red = 3' in the enum, then this problem all goes away!

Therefore, these 'inline initializers' are unable to set a class's 
variable/property to the default value of its data type if the class 
provides a value in its declaration or constructor. This looks like a 
compiler bug to me. :(

&gt;<i> ---------------------PROGRAM.CS-------------------------------------
</I>&gt;<i> 
</I>&gt;<i> using System;
</I>&gt;<i> using System.Collections.Generic;
</I>&gt;<i> 
</I>&gt;<i> namespace ConsoleApplication2 {
</I>&gt;<i>      enum Colors { Red = 0, Green = 1, Blue = 2 };
</I>&gt;<i>      class Screen {
</I>&gt;<i>          public Colors fore = Colors.Blue;
</I>&gt;<i>          public Colors back;
</I>&gt;<i>          public Screen() { back = Colors.Green; }
</I>&gt;<i>      }
</I>&gt;<i> 
</I>&gt;<i>      class Program {
</I>&gt;<i>          static void Main(string[] args) {
</I>&gt;<i>              Screen a = new Screen();
</I>&gt;<i>              Console.WriteLine(&quot;{0} / {1}&quot;, a.fore, a.back);
</I>&gt;<i>              a = new Screen() { back = Colors.Red, fore = Colors.Red };
</I>&gt;<i>              Console.WriteLine(&quot;{0} / {1}&quot;, a.fore, a.back);
</I>&gt;<i>          }
</I>&gt;<i>      }
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> -----------------------------------------------------------------
</I>
-- 
Ryan Kirkpatrick &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">ryan.kirkpatrick at inovonics.com</A>&gt;, 303-209-7190
Senior Design Engineer
Inovonics Wireless Corporation

This email transmission and any documents, files or previous email
messages attached to it contains information that is confidential
or legally privileged. If you are not the intended recipient or a
person responsible for delivering this transmission to the intended
recipient, you are hereby notified that you must not read this
transmission and that any disclosure, copying, printing,
distribution or use of this transmission is strictly prohibited. If
you have received this transmission in error, please immediately
notify the sender by telephone or return email and delete the
original transmission and its attachments without reading or saving
in any manner. Thank you.
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043006.html">[Mono-list] Class Property Initializer Question...
</A></li>
	<LI>Next message: <A HREF="043007.html">[Mono-list]  Mono 2.4 for RHEL4 or RHEL5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43013">[ date ]</a>
              <a href="thread.html#43013">[ thread ]</a>
              <a href="subject.html#43013">[ subject ]</a>
              <a href="author.html#43013">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
