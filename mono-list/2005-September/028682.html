<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] yield
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20yield&In-Reply-To=001d01c5b891%24862927e0%240200a8c0%40LAPTOP">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028589.html">
   <LINK REL="Next"  HREF="028686.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] yield</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20yield&In-Reply-To=001d01c5b891%24862927e0%240200a8c0%40LAPTOP"
       TITLE="[Mono-list] yield">miguel at ximian.com
       </A><BR>
    <I>Thu Sep 22 21:29:58 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="028589.html">[Mono-list] yield
</A></li>
        <LI>Next message: <A HREF="028686.html">[Mono-list] yield
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28682">[ date ]</a>
              <a href="thread.html#28682">[ thread ]</a>
              <a href="subject.html#28682">[ subject ]</a>
              <a href="author.html#28682">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> I wanted to use yield (like Miguel did it in HttpApplication), but I need to 
</I>&gt;<i> lock by data. Is this not allowed?
</I>&gt;<i> 
</I>&gt;<i> static object lockit = new Object();
</I>&gt;<i> 
</I>&gt;<i> public static IEnumerable GetData()
</I>&gt;<i> {
</I>&gt;<i>   lock (lockit)
</I>&gt;<i>   {
</I>&gt;<i>    for (int i = 0; i &lt; 10; i++)
</I>&gt;<i>     yield return true;
</I>&gt;<i>   }
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> I am getting this error (with Mono, it works with MS.Net):
</I>
This is a bug in the compiler.  But even with the bug fixed the code
above will not work in the way you think it would.

The lock will be taken the first time, and released on the first yield,
and will not be taken again when the method resumes execution (although
Monitor.Exit will be called repeated times).

Basically yield and lock dont mix.

Miguel
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028589.html">[Mono-list] yield
</A></li>
	<LI>Next message: <A HREF="028686.html">[Mono-list] yield
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28682">[ date ]</a>
              <a href="thread.html#28682">[ thread ]</a>
              <a href="subject.html#28682">[ subject ]</a>
              <a href="author.html#28682">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
