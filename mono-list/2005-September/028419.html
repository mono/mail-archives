<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Help in customization of MCS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Help%20in%20customization%20of%20MCS&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028418.html">
   <LINK REL="Next"  HREF="028459.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Help in customization of MCS</H1>
    <B>Guilherme</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Help%20in%20customization%20of%20MCS&In-Reply-To="
       TITLE="[Mono-list] Help in customization of MCS">g_labega at yahoo.com.br
       </A><BR>
    <I>Sun Sep  4 07:35:48 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="028418.html">[Mono-list] [ANN] Firebird ADO.NET data Provider 1.7.1 Release
	candidate 1 released.
</A></li>
        <LI>Next message: <A HREF="028459.html">[Mono-list] Help in customization of MCS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28419">[ date ]</a>
              <a href="thread.html#28419">[ thread ]</a>
              <a href="subject.html#28419">[ subject ]</a>
              <a href="author.html#28419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, 

I&#146;m working in some king of customization of MCS (Mono
C# compiler). What I&#146;m doing in add some elements to
C# language to support something from AOP.

So let me show a basic example:

namespace XXXX
{

public aspect Class2
{
	pointcut MyPointCut1 void *.T*(XXXX.MainCls i);

	after MyPointCut1(XXXX.MainCls i)
	{
	Console.WriteLine(&quot;MyPointCut1: i: &quot; + i);
		Console.WriteLine(&quot;Object Instance is: &quot; +
instance.ToString());
	}
}

}

The code inside &#147;after MyPointCut1&#148; is called after
the execution of which method that the name starts
with &#147;T&#148; (in any class and any namespace).

namespace XXXX
{

public class MainCls
{
	public void Toto(MainCls i)
	{
		Console.WriteLine(i);
	}
}

}

So to find which method should be intercepted I use
some criteria&#146;s: return type, the name (that stuff
with &#147;*&#148;), and parameters. I&#146;m having troubles with
parameters. 

In my code I created a class named &quot;aspect&#148; that is
derived from &#147;Class&#148;. So when the method &#147;public
override bool DefineMembers(TypeContainer parent)&#148; is
called by MCS I start to look up for methods to
intercept. The parameters comparison (to check is
method parameter and aspect parameters are from same
type) is made in the following way:

return (p1.TypeName.ToString() ==
p2.TypeName.ToString());
Where p1 and p2 are instances of Parameter. 

The problem occurs in the code that I showed above. In
the method the type of parameters is write &#147;MainCls&#148;
and in the aspect &#147;XXXX.MainCls&#148;. So the compression
returns false, and that aspect in not binded for
&#147;Toto&#148; method. 

There is another way to check parameters type? :D 

I&#146;m know that is a little complex question. If someone
want to talk about this project with me, please feel
free. Sorry about my terrible english and the long
e-mail. :D

Thanks in advanced, 

Guilherme. 

Mail: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">glabega at gmail.com</A>
MSN : <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">g_labega at hotmail.com</A>


__________________________________________________
Converse com seus amigos em tempo real com o Yahoo! Messenger 
<A HREF="http://br.download.yahoo.com/messenger/">http://br.download.yahoo.com/messenger/</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028418.html">[Mono-list] [ANN] Firebird ADO.NET data Provider 1.7.1 Release
	candidate 1 released.
</A></li>
	<LI>Next message: <A HREF="028459.html">[Mono-list] Help in customization of MCS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28419">[ date ]</a>
              <a href="thread.html#28419">[ thread ]</a>
              <a href="subject.html#28419">[ subject ]</a>
              <a href="author.html#28419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
