<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] XSP and IKVM error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20XSP%20and%20IKVM%20error&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028717.html">
   <LINK REL="Next"  HREF="028726.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] XSP and IKVM error</H1>
    <B>Jeroen Frijters</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20XSP%20and%20IKVM%20error&In-Reply-To="
       TITLE="[Mono-list] XSP and IKVM error">jeroen at sumatra.nl
       </A><BR>
    <I>Fri Sep 23 10:02:36 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="028717.html">[Mono-list] To yield or to not
</A></li>
        <LI>Next message: <A HREF="028726.html">[Mono-list] XSP and IKVM error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28714">[ date ]</a>
              <a href="thread.html#28714">[ thread ]</a>
              <a href="subject.html#28714">[ subject ]</a>
              <a href="author.html#28714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lukasz Piatkowski wrote:
&gt;<i> I'm currently trying to develop asp.net administration panel for
</I>&gt;<i> subversion. I found this
</I>&gt;<i> <A HREF="http://svn.haxx.se/users/archive-2005-05/0065.shtml">http://svn.haxx.se/users/archive-2005-05/0065.shtml</A> to be very useful
</I>&gt;<i> - using IKVM according to this method i compiled a mono libarary for
</I>&gt;<i> svn, which works perfectly when used in standard console program. Now
</I>&gt;<i> I'm trying to put it in asp.net page and I'm getting following error:
</I>&gt;<i> when request is send back to XSP and lib methods are invoke, the
</I>&gt;<i> answer for browser is just &quot;Server error. Your client sent a request
</I>&gt;<i> that was not understood by this server.&quot; and XSP itself prints:
</I>&gt;<i> ---
</I>&gt;<i> System.ArgumentException: GCHandle value belongs to a different domain
</I>&gt;<i> in &lt;0x00088&gt; 
</I>&gt;<i> System.Runtime.InteropServices.GCHandle:op_Explicit (IntPtr value)
</I>&gt;<i> in &lt;0x00012&gt; MemberWrapper:FromCookieImpl (IntPtr cookie)
</I>&gt;<i> in &lt;0x0000b&gt; FieldWrapper:FromCookie (IntPtr cookie)
</I>&gt;<i> in &lt;0x0000f&gt; IKVM.Runtime.JNIEnv:GetFieldValue (IntPtr cookie,
</I>&gt;<i> System.Object obj)
</I>&gt;<i> ---
</I>&gt;<i> I can't cope with this - can enybody help me?
</I>
IKVM doesn't support using JNI outside of the default AppDomain. I
assume XSP is using multiple AppDomains to host different instances of
your application (like ASP.NET does), so this will cause IKVM run into
inside multiple AppDomains and this is fine for managed code, but
unmanaged code cannot be loaded multiple times into the same process, so
the JNI code gets confused.

I don't know of any solution or workaround for this problem, but maybe
XSP has a configuration option to disable using multiple AppDomains?

Regards,
Jeroen
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028717.html">[Mono-list] To yield or to not
</A></li>
	<LI>Next message: <A HREF="028726.html">[Mono-list] XSP and IKVM error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28714">[ date ]</a>
              <a href="thread.html#28714">[ thread ]</a>
              <a href="subject.html#28714">[ subject ]</a>
              <a href="author.html#28714">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
