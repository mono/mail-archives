<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono.WebServer.XSPWorker:Read problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono.WebServer.XSPWorker%3ARead%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028652.html">
   <LINK REL="Next"  HREF="028685.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono.WebServer.XSPWorker:Read problem</H1>
    <B>Rusky</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono.WebServer.XSPWorker%3ARead%20problem&In-Reply-To="
       TITLE="[Mono-list] Mono.WebServer.XSPWorker:Read problem">rusky at rusky.hu
       </A><BR>
    <I>Wed Sep 21 05:42:50 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="028652.html">[Mono-list] libgdiplus - Mac OS X 10.4 / fink / xcode 2.1
</A></li>
        <LI>Next message: <A HREF="028685.html">[Mono-list] Mono.WebServer.XSPWorker:Read problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28653">[ date ]</a>
              <a href="thread.html#28653">[ thread ]</a>
              <a href="subject.html#28653">[ subject ]</a>
              <a href="author.html#28653">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We run webservices under XSP, Debian sarge. We use the latest version of 
Debian Sarge, Linux 2.4.27-2-386, xsp-1.1.9, mono-1.1.9, mono and xsp, 
installed from source code.

We have the following problem:

We run the XSP with &quot;echo web service, mono --trace=xsp&quot; command. In 
case of the data size (size of the complete SOAP message) larger than 
1024 byte, we got an exception of the XSP:

ENTER: Mono.WebServer.XSPWorkerRequest:ReadEntityBody 
(byte[],int)(this:0x8206600[Mono.WebServer.XSPWorkerRequest 
ASPHOST_619ad3e8], 0x85ad000, 3308, )

. ENTER: Mono.WebServer.XSPWorkerRequest:ReadInput 
(byte[],int,int)(this:0x8206600[Mono.WebServer.XSPWorkerRequest 
ASPHOST_619ad3e8], 0x85ad000, 0, 3308, )

. . ENTER: (wrapper remoting-invoke-with-check) 
Mono.WebServer.BaseRequestBroker:Read 
(int,int,byte[]&amp;)(this:0x820ec18[System.Runtime.Remoting.Proxies.TransparentProxy 
ASPHOST_619ad3e8], 1062340992, 3308, [BYREF:0xbedfef64], )

  . . . ENTER: (wrapper xdomain-invoke) 
Mono.WebServer.BaseRequestBroker:Read 
(int,int,byte[]&amp;)(this:0x820ec18[System.Runtime.Remoting.Proxies.TransparentProxy 
ASPHOST_619ad3e8], 1062340992, 3308, [BYREF:0xbedfef64], )
  . . . . ENTER: (wrapper xdomain-dispatch) 
Mono.WebServer.BaseRequestBroker:Read 
(object,byte[]&amp;,byte[]&amp;,int,int,byte[]&amp;)([System.Runtime.Remoting.Proxies.RemotingProxy:0x831bd58], 
[BYREF:0xbedfeeec], [BYREF:0xbedfeef4], 1062340992, 3308, 
[BYREF:0xbedfeed4], )

  . . . . . ENTER: (wrapper remoting-invoke-with-check) 
Mono.WebServer.BaseRequestBroker:Read 
(int,int,byte[]&amp;)(this:0x84641b0[Mono.WebServer.XSPRequestBroker 
xsp.exe], 1062340992, 3308, [BYREF:0xbedfeed4], )

. . . . . . ENTER: Mono.WebServer.BaseRequestBroker:Read 
(int,int,byte[]&amp;)(this:0x84641b0[Mono.WebServer.XSPRequestBroker 
xsp.exe], 1062340992, 3308, [BYREF:0xbedfeed4], )

. . . . . . . . ENTER: Mono.WebServer.XSPWorker:Read 
(byte[],int,int)(this:0x8267030[Mono.WebServer.XSPWorker xsp.exe], 
0x85ae000, 0, 3308, )
EXCEPTION handling: SocketException
EXCEPTION handling: IOException
EXCEPTION: catch found at clause 0 of Mono.WebServer.XSPWorker:Read 
(byte[],int,int)
EXCEPTION handling: IOException
EXCEPTION: catch found at clause 0 of (wrapper xdomain-dispatch) 
Mono.WebServer.BaseRequestBroker:Read 
(object,byte[]&amp;,byte[]&amp;,int,int,byte[]&amp;)
. . . . . . . . . . . . . . . . . . . LEAVE: (wrapper xdomain-dispatch) 
Mono.WebServer.BaseRequestBroker:Read 
(object,byte[]&amp;,byte[]&amp;,int,int,byte[]&amp;)result=3
EXCEPTION handling: IOException
...

The error logged with log4 is the following:

2005-09-20 14:32:10,273 [98311] ERROR xsp [(null)] - Error.
System.IO.IOException: Read failure ---&gt; 
System.Net.Sockets.SocketException: Operation on non-blocking socket 
would block
in &lt;0x0006d&gt; System.Net.Sockets.Socket:Receive_nochecks (System.Byte[] 
buf, Int32 offset, Int32 size, SocketFlags flags)
in &lt;0x00053&gt; System.Net.Sockets.Socket:Receive (System.Byte[] buf, Int32 
offset, Int32 size, SocketFlags flags)
in &lt;0x00075&gt; System.Net.Sockets.NetworkStream:Read (System.Byte[] 
buffer, Int32 offset, Int32 size)--- End of inner exception stack trace ---

in &lt;0x000c3&gt; System.Net.Sockets.NetworkStream:Read (System.Byte[] 
buffer, Int32 offset, Int32 size)
in &lt;0x0001d&gt; Mono.WebServer.XSPWorker:Read (System.Byte[] buffer, Int32 
position, Int32 size)

Aside from the error mentioned above, we had no error with XSP at all!
It runs perfectly, if we run the same xsp assembly and echo webservice 
under Win with .Net framework.

If you have any idea, please give us a hint, because we need to solve 
the problem urgently.

Thank you in anticipation!

Rusky
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028652.html">[Mono-list] libgdiplus - Mac OS X 10.4 / fink / xcode 2.1
</A></li>
	<LI>Next message: <A HREF="028685.html">[Mono-list] Mono.WebServer.XSPWorker:Read problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28653">[ date ]</a>
              <a href="thread.html#28653">[ thread ]</a>
              <a href="subject.html#28653">[ subject ]</a>
              <a href="author.html#28653">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
