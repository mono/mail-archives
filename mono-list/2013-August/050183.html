<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Unit tests load a different configuration file	under mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Unit%20tests%20load%20a%20different%20configuration%20file%0A%09under%20mono&In-Reply-To=%3CC66AC996-752A-4A9A-9F03-052BE35DAF43%40asme.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="050180.html">
   <LINK REL="Next"  HREF="050184.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Unit tests load a different configuration file	under mono</H1>
    <B>David Curylo</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Unit%20tests%20load%20a%20different%20configuration%20file%0A%09under%20mono&In-Reply-To=%3CC66AC996-752A-4A9A-9F03-052BE35DAF43%40asme.org%3E"
       TITLE="[Mono-list] Unit tests load a different configuration file	under mono">curylod at asme.org
       </A><BR>
    <I>Mon Aug 12 16:15:19 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="050180.html">[Mono-list] Unit tests load a different configuration file	under mono
</A></li>
        <LI>Next message: <A HREF="050184.html">[Mono-list] Unit tests load a different configuration file	under mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50183">[ date ]</a>
              <a href="thread.html#50183">[ thread ]</a>
              <a href="subject.html#50183">[ subject ]</a>
              <a href="author.html#50183">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is the exact same problem, yes.  So from your last comment on the pull request:

&gt;<i> when running inside a unit test, Mono.Web.Util.SettingsMappingManager.Init() doesn't manage to make the _instance not null, because mapper.HasMappings ends up being false (and this doesn't happen when running inside an ASP.NET site).
</I>
Have you had any luck finding why this is?	I've found configuration works as you would expect when running inside an ASP.NET site under mono, so I'm really confused as to why things work so differently under a unit test.  I'm trying to recreate this in isolation from the unit testing framework itself, but I'm not sure exactly what I should be doing - different AppDomain, shadow copied assemblies, but must be some other part of this scenario.

On Aug 10, 2013, at 4:42 AM, &quot;Andr&#233;s G. Aragoneses&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">knocte at gmail.com</A>&gt; wrote:

&gt;<i> Wrong URL, I meant this one: <A HREF="https://github.com/mono/mono/pull/643">https://github.com/mono/mono/pull/643</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20130812/a7867e5b/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20130812/a7867e5b/attachment.html</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="050180.html">[Mono-list] Unit tests load a different configuration file	under mono
</A></li>
	<LI>Next message: <A HREF="050184.html">[Mono-list] Unit tests load a different configuration file	under mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50183">[ date ]</a>
              <a href="thread.html#50183">[ thread ]</a>
              <a href="subject.html#50183">[ subject ]</a>
              <a href="author.html#50183">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
