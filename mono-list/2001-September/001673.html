<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] array &amp;&amp; interop  &amp;&amp; delegate-callback &amp;&amp; performance problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lloyd%40galador.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001672.html">
   <LINK REL="Next"  HREF="001674.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] array &amp;&amp; interop  &amp;&amp; delegate-callback &amp;&amp; performance problem
   </H1>
    <B>Lloyd Dupont
    </B> 
    <A HREF="mailto:lloyd%40galador.net"
       TITLE="[Mono-list] array &amp;&amp; interop  &amp;&amp; delegate-callback &amp;&amp; performance problem">lloyd@galador.net
       </A><BR>
    <I>Mon, 24 Sep 2001 13:23:13 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="001672.html">[Mono-list] Mono and .GNU
</A></li>
        <LI> Next message: <A HREF="001674.html">[Mono-list] is it still not possible to compile mcs on linux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1673">[ date ]</a>
              <a href="thread.html#1673">[ thread ]</a>
              <a href="subject.html#1673">[ subject ]</a>
              <a href="author.html#1673">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>i have a C# project with some C interop code like this

**************************
typedef void (* READCALLBACK) (void * buf, int num, int sizeElem);
void myFunction(READCALLBACK fct);
***************************

i want to call myFunction from C# and give it a delegate as argument.
the trouble is that the delegate should take a pointer argument and i 
want to fill this buffer by calling some System.IO.Stream method, which 
takes byte[] as argument.

so i have 2 solution:
the immediate one. create a temp buffer, call stream method wih it, copy 
my buffer in the void *.

but my problem is with the second (far better) method.
array in C# are SAFARRAY struct in C (with MS .Net, at last) so i 
though, i could &quot;cook&quot; a home made safe array whose buffer (pvData) 
would be  replaced by my data...

As SAFEARRAY is fewly documented this would be cooking and this leads me 
to my first question. my cooking will surely (after some test) work with 
MS.Net but what about Mono ?

and could somebody advice me on such topics, to write a nice cooking ?



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001672.html">[Mono-list] Mono and .GNU
</A></li>
	<LI> Next message: <A HREF="001674.html">[Mono-list] is it still not possible to compile mcs on linux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1673">[ date ]</a>
              <a href="thread.html#1673">[ thread ]</a>
              <a href="subject.html#1673">[ subject ]</a>
              <a href="author.html#1673">[ author ]</a>
         </LI>
       </UL>
</body></html>
