<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Certificate validation in HttpWebRequest
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Certificate%20validation%20in%20HttpWebRequest&In-Reply-To=%3C9f2175e9719340a49d9de1f07602059b%40BL2PR08MB451.namprd08.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="050791.html">
   <LINK REL="Next"  HREF="050795.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Certificate validation in HttpWebRequest</H1>
    <B>Edward Ned Harvey (mono)</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Certificate%20validation%20in%20HttpWebRequest&In-Reply-To=%3C9f2175e9719340a49d9de1f07602059b%40BL2PR08MB451.namprd08.prod.outlook.com%3E"
       TITLE="[Mono-list] Certificate validation in HttpWebRequest">edward.harvey.mono at clevertrove.com
       </A><BR>
    <I>Fri Mar 21 13:43:49 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="050791.html">[Mono-list] Certificate validation in HttpWebRequest
</A></li>
        <LI>Next message: <A HREF="050795.html">[Mono-list] Certificate validation in HttpWebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50792">[ date ]</a>
              <a href="thread.html#50792">[ thread ]</a>
              <a href="subject.html#50792">[ subject ]</a>
              <a href="author.html#50792">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list-bounces at lists.ximian.com</A> [mailto:mono-list-
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">bounces at lists.ximian.com</A>] On Behalf Of Mat Arge
</I>&gt;<i> 
</I>&gt;<i> I do access some websites on HTTPS URLs using the HttpWebRequest class.
</I>&gt;<i> To
</I>&gt;<i> handle the certificates I set the
</I>&gt;<i> System.Net.ServicePointManager.ServerCertificateValidationCallback to an
</I>&gt;<i> implementation of mine. This worked fine, but recently (to be precise: since
</I>&gt;<i> updating from mono-2.10 to 3.2.8) I get the old &quot;System.Net.WebException:
</I>&gt;<i> Error getting response stream (Write: The authentication or decryption has
</I>&gt;<i> failed.)&quot; error again. My callback is actually never called.
</I>
I recently stepped into the same problem, only I was using SslStream rather than HttpWebRequest, and thanks to Sebastien for steering me straight.

I don't know if HttpWebRequest is using SslStream under the hood?  Here was the answer for SslStream.  I'm highly suspicious that it's related.

Check the mono compatibility page.  (Just google for &quot;mono compatibility&quot;).  At the bottom, go to &quot;class status pages&quot; and then System, System.Net.Security, SslStream.  Notice that the basic constructor (without RemoteCertificateValidationCallback) is green and good.  While the ones with callback are marked as not returning SslPolicyErrors correctly.  The solution for me was to use the basic constructor, and then if AuthenticateAsClient failed,  try again using the other constructor, but ignore the SslPolicyErrors and Chain.

Looking at HttpWebRequest right now, I don't see anything obviously along those lines.  It is very likely you are encountering *some* bug or incomplete feature.  Can you post some sample code?  That would make it easier to say for sure.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="050791.html">[Mono-list] Certificate validation in HttpWebRequest
</A></li>
	<LI>Next message: <A HREF="050795.html">[Mono-list] Certificate validation in HttpWebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50792">[ date ]</a>
              <a href="thread.html#50792">[ thread ]</a>
              <a href="subject.html#50792">[ subject ]</a>
              <a href="author.html#50792">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
