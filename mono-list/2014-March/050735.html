<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Debug.Assert - a cross-platform issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Debug.Assert%20-%20a%20cross-platform%20issue&In-Reply-To=%3C1394342902166-4662183.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="050734.html">
   <LINK REL="Next"  HREF="050736.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Debug.Assert - a cross-platform issue</H1>
    <B>MarLOne</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Debug.Assert%20-%20a%20cross-platform%20issue&In-Reply-To=%3C1394342902166-4662183.post%40n4.nabble.com%3E"
       TITLE="[Mono-list] Debug.Assert - a cross-platform issue">InfoSeeker002 at gmail.com
       </A><BR>
    <I>Sun Mar  9 05:28:22 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="050734.html">[Mono-list] Debug.Assert - a cross-platform issue
</A></li>
        <LI>Next message: <A HREF="050736.html">[Mono-list] Debug.Assert - a cross-platform issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50735">[ date ]</a>
              <a href="thread.html#50735">[ thread ]</a>
              <a href="subject.html#50735">[ subject ]</a>
              <a href="author.html#50735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I have found out the run time discrepancy of Debug.Assert() in CLR and in
Mono. The answer literally is in front of our eyes.

The difference is in this property:
System.Diagnostics.DefaultTraceListener.AssertUiEnabled.

In *CLR* the default value is *true* but in *Mono* the default value is set
to *false*. If you disassembly the system assembly, you will see that in
Mono, the DefaultTraceListener.Fail() already contains GUI code to report
the failure if the above mentioned property is true. Since the default value
is set to false, it does not report any failure condition.

Hence there are two ways of fixing it:
1) In code just do this (surround it with conditional compilation control) :
(Debug.Listeners[&quot;Default&quot;] as DefaultTraceListener).AssertUiEnabled = true;

2) In a config file like this:
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;

  &lt;system.diagnostics&gt;
       
       &lt;assert assertuienabled=&quot;true&quot; /&gt;
  &lt;/system.diagnostics&gt;

&lt;/configuration&gt;

This setting is superfluous in CLR but is harmless hence the same config
file can be used in both platform.

If you are performing cross platform checking, make sure you include the
configuration setting to avoid the disappointment. This highlights the
importance to maintain default values consistence.

Hope this will help and may be someone maintaining this part of the code to
consider restoring that consistence.

MarL



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Debug-Assert-a-cross-platform-issue-tp4662174p4662183.html">http://mono.1490590.n4.nabble.com/Debug-Assert-a-cross-platform-issue-tp4662174p4662183.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="050734.html">[Mono-list] Debug.Assert - a cross-platform issue
</A></li>
	<LI>Next message: <A HREF="050736.html">[Mono-list] Debug.Assert - a cross-platform issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50735">[ date ]</a>
              <a href="thread.html#50735">[ thread ]</a>
              <a href="subject.html#50735">[ subject ]</a>
              <a href="author.html#50735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
