<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Why is 0.1f + 0.2f - 0.3f produces such a large	error number?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Why%20is%200.1f%20%2B%200.2f%20-%200.3f%20produces%20such%20a%20large%0A%09error%20number%3F&In-Reply-To=%3C1464008346336-4667862.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052104.html">
   <LINK REL="Next"  HREF="052108.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Why is 0.1f + 0.2f - 0.3f produces such a large	error number?</H1>
    <B>MarLOne</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Why%20is%200.1f%20%2B%200.2f%20-%200.3f%20produces%20such%20a%20large%0A%09error%20number%3F&In-Reply-To=%3C1464008346336-4667862.post%40n4.nabble.com%3E"
       TITLE="[Mono-list] Why is 0.1f + 0.2f - 0.3f produces such a large	error number?">InfoSeeker002 at gmail.com
       </A><BR>
    <I>Mon May 23 12:59:06 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="052104.html">[Mono-list] Why is 0.1f + 0.2f - 0.3f produces such a large	error number?
</A></li>
        <LI>Next message: <A HREF="052108.html">[Mono-list] Why is 0.1f + 0.2f - 0.3f produces such a large	error number?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52107">[ date ]</a>
              <a href="thread.html#52107">[ thread ]</a>
              <a href="subject.html#52107">[ subject ]</a>
              <a href="author.html#52107">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Alan,

While all this is find it does not explain the following observation using
the same CPU:
VS2015  the delta is zero

For all other VS dated back to 2003 the delta is non-zero.

In fact my friend has shown me his code that led him to question this:
He has a web server implementing that simple expression. When the server was
hosted in VS2015 IIS (v10) Express and in a local IIS 7.5, the results are
different. One returning perfect zero while the other the delta I have
reported.

There is hardly any accumulated error. It seems to be MS finally decides
that the result should be zero (previously some mistake or simplistic
approach) so that it is the same as Java, Swift and C/C++.

Something dodgy to me. My friend's web demo is pretty much the same as mine
using C/Com and .Net assembly resulting in two different values.

For those that are using this for SCIENTIFIC calculations, I urge you to do
fine grain test them using Learning Test when moving to and from VS2015 or
Roslyn. It seems VS2015 has changed something leading to the observation.
Just to make sure the change does not have impact on it. Alternately those
developed in VS2015 but run with code developed in earlier compiler one
needs to implement floating point defensive code.

If you have to do some SCIENTIFIC computation of running that expression or
more complex one a few hundred times, the result if not taken care of of the
type's accuracy at each iteration, the end result will have accumulation
error that puts the end result within the precision of the type. Clearly
that is wrong and should not be so sensitive to version change of the VS.

In fairness scientific calculation is best to be performed in Double because
more floating point operations are performed internally in double. Doing so
with produce a number of 5.55E-017 which is the same as produced by Java and
C.

Rover



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Why-is-0-1f-0-2f-0-3f-produces-such-a-large-error-number-tp4667837p4667862.html">http://mono.1490590.n4.nabble.com/Why-is-0-1f-0-2f-0-3f-produces-such-a-large-error-number-tp4667837p4667862.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052104.html">[Mono-list] Why is 0.1f + 0.2f - 0.3f produces such a large	error number?
</A></li>
	<LI>Next message: <A HREF="052108.html">[Mono-list] Why is 0.1f + 0.2f - 0.3f produces such a large	error number?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52107">[ date ]</a>
              <a href="thread.html#52107">[ thread ]</a>
              <a href="subject.html#52107">[ subject ]</a>
              <a href="author.html#52107">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
