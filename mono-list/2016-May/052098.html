<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Stack overflow during compilation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Stack%20overflow%20during%20compilation&In-Reply-To=%3C57359FF9.6040505%40expertsystems.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052097.html">
   <LINK REL="Next"  HREF="052099.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Stack overflow during compilation</H1>
    <B>Mattias Jiderhamn</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Stack%20overflow%20during%20compilation&In-Reply-To=%3C57359FF9.6040505%40expertsystems.se%3E"
       TITLE="[Mono-list] Stack overflow during compilation">mj-lists at expertsystems.se
       </A><BR>
    <I>Fri May 13 09:35:53 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="052097.html">[Mono-list] when run mono background by &amp; notation, it is actually paused. Is it a bug?
</A></li>
        <LI>Next message: <A HREF="052099.html">[Mono-list] Windows icon in generated exe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52098">[ date ]</a>
              <a href="thread.html#52098">[ thread ]</a>
              <a href="subject.html#52098">[ subject ]</a>
              <a href="author.html#52098">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi list. I'm trying to compile an existing .NET project (i.e. works fine 
w/ msbuild) with Mono/xbuild for the first time, which ends with the 
compiler crashing with the error below.
Because of the &quot;CStrExpression&quot; I tried commenting out any CStr calls in 
our code, but that didn't make any difference, so my guess is this is 
created automatically from some literals.

I'm doing the compilation using the official Docker image; tried both 
tags lastest=4.2.3.4 and onbuild=4.2.3.4-onbuild with same result.

/verbosity:diagnostic didn't seem to add anything useful
How can I continue debugging this (i.e. find which source file is 
triggering this and determine if it is a bug in the Mono compiler or 
some obscurity in our code)?

(FYI: I'm mainly a Java developer and this integration component is the 
only real .NET project I have experience from, meaning I may need 
detailed explanation of .NET specific concepts - sorry!)


Here is the error
                 Stack overflow: IP: 0x40f265e3, fault addr: 0x7ffc27d68ff8
                 Stacktrace:
                 at vbnc.VariableClassification.GetConstant 
(object&amp;,bool) &lt;0x00077&gt;
                 &lt;...&gt;
                 at vbnc.VariableToValueExpression.GetConstant 
(object&amp;,bool) &lt;0x0002b&gt;
                 at vbnc.CStrExpression.GetConstant (object&amp;,bool) &lt;0x00035&gt;
                 at vbnc.CStrExpression.GetConstant (object&amp;,bool) &lt;0x00035&gt;
                 at vbnc.CStrExpression.GetConstant (object&amp;,bool) &lt;0x00035&gt;
[repeated 17500+ times]
                 at vbnc.CStrExpression.GetConstant (object&amp;,bool) &lt;0x00035&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x0007b&gt;
                 at vbnc.ValueClassification.GenerateCode 
(vbnc.EmitInfo) &lt;0x0005b&gt;
                 at vbnc.ConversionExpression.GenerateCodeForExpression 
(vbnc.ConversionExpression,vbnc.EmitInfo,System.TypeCode&amp;,Mono.Cecil.TypeReference&amp;) 
&lt;0x000b8&gt;
                 at vbnc.CStrExpression.GenerateCode 
(vbnc.ConversionExpression,vbnc.EmitInfo) &lt;0x00063&gt;
                 at vbnc.CStrExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00013&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ValueClassification.GenerateCode 
(vbnc.EmitInfo) &lt;0x0005b&gt;
                 at vbnc.ConversionExpression.GenerateCodeForExpression 
(vbnc.ConversionExpression,vbnc.EmitInfo,System.TypeCode&amp;,Mono.Cecil.TypeReference&amp;) 
&lt;0x000b8&gt;
                 at vbnc.CStrExpression.GenerateCode 
(vbnc.ConversionExpression,vbnc.EmitInfo) &lt;0x00063&gt;
                 at vbnc.CStrExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00013&gt;
[repeated 15500+ times]
                 at vbnc.CStrExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00013&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ConcatExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x00073&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ValueClassification.GenerateCode 
(vbnc.EmitInfo) &lt;0x0005b&gt;
                 at vbnc.ConversionExpression.GenerateCodeForExpression 
(vbnc.ConversionExpression,vbnc.EmitInfo,System.TypeCode&amp;,Mono.Cecil.TypeReference&amp;) 
&lt;0x000b8&gt;
                 at vbnc.CStrExpression.GenerateCode 
(vbnc.ConversionExpression,vbnc.EmitInfo) &lt;0x00063&gt;
                 at vbnc.CTypeExpression.GenerateCodeInternal 
(vbnc.EmitInfo) &lt;0x010d7&gt;
                 at vbnc.Expression.GenerateCode (vbnc.EmitInfo) &lt;0x00270&gt;
                 at vbnc.ValueClassification.GenerateCode 
(vbnc.EmitInfo) &lt;0x0005b&gt;
                 at vbnc.VariableExpression.Emit 
(vbnc.EmitInfo,Mono.Cecil.Cil.VariableDefinition) &lt;0x0008c&gt;
                 at vbnc.VariableClassification.GenerateCode 
(vbnc.EmitInfo) &lt;0x003c3&gt;
                 at vbnc.AssignmentStatement.GenerateCode 
(vbnc.EmitInfo) &lt;0x00055&gt;
                 at vbnc.CodeBlock.GenerateCode (vbnc.EmitInfo) &lt;0x001ff&gt;
                 at vbnc.IfStatement.GenerateCode (vbnc.EmitInfo) &lt;0x00146&gt;
                 at vbnc.CodeBlock.GenerateCode (vbnc.EmitInfo) &lt;0x001ff&gt;
                 at vbnc.CodeBlock.GenerateCode (vbnc.IMethod) &lt;0x0017b&gt;
                 at vbnc.MethodBaseDeclaration.GenerateCode 
(vbnc.EmitInfo) &lt;0x00143&gt;
                 at vbnc.MethodDeclaration.GenerateCode (vbnc.EmitInfo) 
&lt;0x00037&gt;
                 at vbnc.SubDeclaration.GenerateCode (vbnc.EmitInfo) 
&lt;0x000bb&gt;
                 at vbnc.Helper.GenerateCodeCollection 
(System.Collections.IEnumerable,vbnc.EmitInfo) &lt;0x001fd&gt;
                 at vbnc.BaseObjects`1&lt;T_REF&gt;.GenerateCode 
(vbnc.EmitInfo) &lt;0x00013&gt;
                 at vbnc.AssemblyDeclaration.Emit (vbnc.TypeDeclaration) 
&lt;0x0007f&gt;
                 at vbnc.AssemblyDeclaration.Emit () &lt;0x0018b&gt;
                 at vbnc.Compiler.Compile () &lt;0x00e0f&gt;
                 at vbnc.Compiler.Compile (string[]) &lt;0x000a7&gt;
                 at vbnc.Main.Main (string[]) &lt;0x000e3&gt;
                 at (wrapper runtime-invoke) 
&lt;Module&gt;.runtime_invoke_int_object (object,intptr,intptr,intptr) 
&lt;0xffffffff&gt;
                 Tool /usr/lib/mono/4.5/vbnc.exe execution finished.
/usr/lib/mono/xbuild/12.0/bin/Microsoft.VisualBasic.targets: error : 
Compiler crashed with code: 1.
             Task &quot;Vbc&quot; execution -- FAILED

-- 

   &lt;/Mattias&gt;

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052097.html">[Mono-list] when run mono background by &amp; notation, it is actually paused. Is it a bug?
</A></li>
	<LI>Next message: <A HREF="052099.html">[Mono-list] Windows icon in generated exe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52098">[ date ]</a>
              <a href="thread.html#52098">[ thread ]</a>
              <a href="subject.html#52098">[ subject ]</a>
              <a href="author.html#52098">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
