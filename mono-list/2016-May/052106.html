<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] How to programatically change the Ubuntu 16.04 System Monitor process name from cli or mono to an unique name?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20How%20to%20programatically%20change%20the%20Ubuntu%2016.04%20System%0A%20Monitor%20process%20name%20from%20cli%20or%20mono%20to%20an%20unique%20name%3F&In-Reply-To=%3CCANuJMRrU0pXkoF%2BUEucHMqg3ZtkPVuNXSP0GwxeknSakdxmzgA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052105.html">
   <LINK REL="Next"  HREF="052109.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] How to programatically change the Ubuntu 16.04 System Monitor process name from cli or mono to an unique name?</H1>
    <B>Frank Chang</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20How%20to%20programatically%20change%20the%20Ubuntu%2016.04%20System%0A%20Monitor%20process%20name%20from%20cli%20or%20mono%20to%20an%20unique%20name%3F&In-Reply-To=%3CCANuJMRrU0pXkoF%2BUEucHMqg3ZtkPVuNXSP0GwxeknSakdxmzgA%40mail.gmail.com%3E"
       TITLE="[Mono-list] How to programatically change the Ubuntu 16.04 System Monitor process name from cli or mono to an unique name?">frankchang91 at gmail.com
       </A><BR>
    <I>Wed May 18 01:30:45 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="052105.html">[Mono-list] Why is 0.1f + 0.2f - 0.3f produces such a large	error number?
</A></li>
        <LI>Next message: <A HREF="052109.html">[Mono-list] (no subject)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52106">[ date ]</a>
              <a href="thread.html#52106">[ thread ]</a>
              <a href="subject.html#52106">[ subject ]</a>
              <a href="author.html#52106">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  I wrote and tested the following C++ program after reading the Stack
Overflow article ,
<A HREF="http://stackoverflow.com/questions/31747247/change-real-process-name-in-c-on-linux">http://stackoverflow.com/questions/31747247/change-real-process-name-in-c-on-linux</A>
.

I discovered my  program could not  programatically change the Ubuntu 16.04
System Monitor
process name from cli or mono to an unique name such as &quot;fancy_name&quot;. How
can we
fix my botched C++ program for the use case where multiple Linux processes
have an identical name and we would like to kill processes by process name
using pgrep? My architect does not wish to use UNIX scripts for this
purpose.

#include &lt;unistd.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/wait.h&gt;
#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;cstdlib&gt;
#include &lt;csignal&gt;
#include &lt;string.h&gt;
#include &lt;sys/prctl.h&gt;

using namespace std;

int main(int argc, char* argvp[])
{
   char lockfile[4096];
   char environment_variable[4096];
   char exe[4096];

   cout &lt;&lt; argvp[1] &lt;&lt; endl;
   if (strcmp(argvp[1] , &quot;-start&quot;) == 0)
   {
        sprintf(exe,&quot;%s.exe&quot;,argvp[2]);
    cout &lt;&lt; exe &lt;&lt; endl;
        ifstream myReadFile;
        myReadFile.open(exe);
        if (!myReadFile.good())
    {
        cout &lt;&lt; &quot;-start Unrecognized C# executable &quot; &lt;&lt; exe &lt;&lt; endl;
                return 0;
    }
    char *argv[] = { &quot;/usr/lib/mono/4.5/mono-service.exe&quot;,
                         exe,
                         0
               };

    sprintf(environment_variable,&quot;LD_LIBRARY_PATH=%s&quot;,argvp[3]);

    cout &lt;&lt; environment_variable &lt;&lt; endl;
        char *envp[] =
        {
                environment_variable,
            0
        };
    cout &lt;&lt; argv[0] &lt;&lt; endl;
        execle(&quot;/usr/lib/mono/4.5/mono-service.exe&quot;,
               &quot;fancy_name&quot;,
               exe,
               (char *)0,
               envp
               );
        perror(&quot;Oops!&quot;);
    }
    return 1;
}

Any help is greatly appreciated.
       Frank
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20160517/08b04b51/attachment-0001.html">http://lists.ximian.com/pipermail/mono-list/attachments/20160517/08b04b51/attachment-0001.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052105.html">[Mono-list] Why is 0.1f + 0.2f - 0.3f produces such a large	error number?
</A></li>
	<LI>Next message: <A HREF="052109.html">[Mono-list] (no subject)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52106">[ date ]</a>
              <a href="thread.html#52106">[ thread ]</a>
              <a href="subject.html#52106">[ subject ]</a>
              <a href="author.html#52106">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
