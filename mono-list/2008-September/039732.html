<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list]  Extending generic methods
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%20Extending%20generic%20methods&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039740.html">
   <LINK REL="Next"  HREF="039733.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list]  Extending generic methods</H1>
    <B>DraconisBG</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%20Extending%20generic%20methods&In-Reply-To="
       TITLE="[Mono-list]  Extending generic methods">draconisbg at yahoo.com
       </A><BR>
    <I>Sun Sep 28 11:52:46 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039740.html">[Mono-list] Implement StrLike in C#
</A></li>
        <LI>Next message: <A HREF="039733.html">[Mono-list] Extending generic methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39732">[ date ]</a>
              <a href="thread.html#39732">[ thread ]</a>
              <a href="subject.html#39732">[ subject ]</a>
              <a href="author.html#39732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello,

Sorry if I send this to the wrong list, please direct me where I should send
it.

I got a task where I have to modify Mono/GMCS in order to make the following
possible:

------------------------------------------------
public void GenericMethod&lt;T&gt; (...) {...}

...

System.Type typ = &lt;expression that evaluates to a type&gt;;
GenericMethod&lt;typ&gt; (...);

------------------------------------------------

In other words, type arguments can be defined in runtime for generic method
instantiations (calls). The instantiation's type argument won't be
System.Type, but rather the type represented by the particular System.Type.

Using Reflection is not allowed, for perf reasons (so I can't just generate
IL code on the fly). Unfortunately, the signature of the gen.method
instantiation is fixed in the IL code, so it seems that the modification of
the JIT compiler will be needed.

However, if I just change the JIT to resolve System.Type type arguments, it
will result in problems (backward compatibility, and cases where we really
want System.Type as type argument).

So I guess something like this would work:
1. Modification of gmcs (Expression resolving etc.), no problem here
2. Modifying JIT to be able to resolve System.Type type arguments *when*
needed
3. Modification of gmcs to emit code into the app which *informs* JIT before
such a call, so the JIT will now that in *this* case, System.Type type
argument must be substitured with the actual type.

However, I'm not sure if this is a good or even a working solution (I can't
think of an easier solution withotu generating IL code on-the-fly), and even
if it's workable, what are the key moments of the implementation.

Any thoughts/help would be greatly appreciated! 
-- 
View this message in context: <A HREF="http://www.nabble.com/Extending-generic-methods-tp19712662p19712662.html">http://www.nabble.com/Extending-generic-methods-tp19712662p19712662.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039740.html">[Mono-list] Implement StrLike in C#
</A></li>
	<LI>Next message: <A HREF="039733.html">[Mono-list] Extending generic methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39732">[ date ]</a>
              <a href="thread.html#39732">[ thread ]</a>
              <a href="subject.html#39732">[ subject ]</a>
              <a href="author.html#39732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
