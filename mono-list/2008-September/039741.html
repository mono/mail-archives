<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] *bug* Zeroconf 0.80 serviceRemoved Bonjour
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%2Abug%2A%20Zeroconf%200.80%20serviceRemoved%20Bonjour&In-Reply-To=19489094.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039574.html">
   <LINK REL="Next"  HREF="039577.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] *bug* Zeroconf 0.80 serviceRemoved Bonjour</H1>
    <B>mpfj</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%2Abug%2A%20Zeroconf%200.80%20serviceRemoved%20Bonjour&In-Reply-To=19489094.post%40talk.nabble.com"
       TITLE="[Mono-list] *bug* Zeroconf 0.80 serviceRemoved Bonjour">mpfj at mimc.co.uk
       </A><BR>
    <I>Mon Sep 29 07:24:16 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039574.html">[Mono-list]  *bug* Zeroconf 0.80 serviceRemoved Bonjour
</A></li>
        <LI>Next message: <A HREF="039577.html">[Mono-list]  Video4linux library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39741">[ date ]</a>
              <a href="thread.html#39741">[ thread ]</a>
              <a href="subject.html#39741">[ subject ]</a>
              <a href="author.html#39741">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

KimSchneider wrote:
&gt;<i> 
</I>&gt;<i> Now I've got the SVN Version 0.80 and that bug seems to be fixed, BUT the
</I>&gt;<i> serviceRemoved event doesn't fire, after the server leaves the network.
</I>&gt;<i> 
</I>&gt;<i> Short:
</I>&gt;<i> - 0.76 works fine but crashes sometimes
</I>&gt;<i> - 0.80 runs stable but doesn't fire serviceRemoved event
</I>&gt;<i> 
</I>
Hi

I've also found the same problem (also when moving from 0.7.6 to 0.8.0). 
*BUT* I think it's connected to the .Resolve() function.

In the code I'm developing, I have tested simple services scanning using
ServiceAdded and ServiceRemoved.  This all works fine ... i.e. I can see
machines being added / removed as they are powered on / off.

But if I then use ...

args.Service.Resolved += OnServiceResolved;
args.Service.Resolve();

... i can only see machines being added and never removed.

this also shows up with the mzclient tools.  Using MZClient, I first do a
default scan.  As you can see, it returns a list of (Ubuntu) workstations
(which are all running Avahi by default).

C:\Desktop\mono-zeroconf-0.8.0-binary\mono-zeroconf-0.8.0-binary\bin&gt;MZClient.exe
Hit ^C when you're bored waiting for responses.

*** Found name = 'ubuntu [00:18:f3:4a:23:70]', type = '_workstation._tcp.',
domain = 'local.'
*** Found name = 'mailhost [00:30:1b:ad:79:33]', type =
'_workstation._tcp.', domain = 'local.'
*** Found name = 'mpfj-ubuntu [00:13:8f:c7:99:f7]', type =
'_workstation._tcp.', domain = 'local.'
*** Found name = 'mob-ubuntu [00:1f:d0:55:7d:33]', type =
'_workstation._tcp.',domain = 'local.'
^C

But if I then use the &quot;resolve&quot; option, it only gives us one result ...

C:\Desktop\mono-zeroconf-0.8.0-binary\mono-zeroconf-0.8.0-binary\bin&gt;MZClient.exe
--resolve
Hit ^C when you're bored waiting for responses.

*** Found name = 'ubuntu [00:18:f3:4a:23:70]', type = '_workstation._tcp.',
domain = 'local.'
*** Resolved name =
'ubuntu\032[00:18:f3:4a:23:70]._workstation._tcp.local.', host ip =
'10.0.0.100', hostname = , port = '9', interface = '3', address type =
'Any', TXT Record = [ = '']

... and that's it !!

so i'm guessing something's broken in the resolve code ...

regards
mark
-- 
View this message in context: <A HREF="http://n2.nabble.com/*bug*-Zeroconf-0.80-serviceRemoved-Bonjour-tp1090074p1125594.html">http://n2.nabble.com/*bug*-Zeroconf-0.80-serviceRemoved-Bonjour-tp1090074p1125594.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039574.html">[Mono-list]  *bug* Zeroconf 0.80 serviceRemoved Bonjour
</A></li>
	<LI>Next message: <A HREF="039577.html">[Mono-list]  Video4linux library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39741">[ date ]</a>
              <a href="thread.html#39741">[ thread ]</a>
              <a href="subject.html#39741">[ subject ]</a>
              <a href="author.html#39741">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
