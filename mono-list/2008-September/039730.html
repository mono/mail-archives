<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Some issues with mono 2.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Some%20issues%20with%20mono%202.0&In-Reply-To=48DCB482.6070904%40yandex.ru">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039722.html">
   <LINK REL="Next"  HREF="039747.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Some issues with mono 2.0</H1>
    <B>Joshua Tauberer</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Some%20issues%20with%20mono%202.0&In-Reply-To=48DCB482.6070904%40yandex.ru"
       TITLE="[Mono-list] Some issues with mono 2.0">jit at occams.info
       </A><BR>
    <I>Sat Sep 27 07:28:08 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039722.html">[Mono-list] Some issues with mono 2.0
</A></li>
        <LI>Next message: <A HREF="039747.html">[Mono-list] Some issues with mono 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39730">[ date ]</a>
              <a href="thread.html#39730">[ thread ]</a>
              <a href="subject.html#39730">[ subject ]</a>
              <a href="author.html#39730">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Maxim wrote:
&gt;<i> Hmm, it seems like we solved problem just partially.
</I>&gt;<i> With
</I>&gt;<i> 
</I>&gt;<i> MonoMaxActiveRequests 10
</I>&gt;<i> MonoMaxWaitingRequests 100
</I>&gt;<i> 
</I>&gt;<i> settings there are a lot messages like &quot;Maximum number (10) of
</I>&gt;<i> concurrent mod_mono requests to
</I>&gt;<i> /tmp/mod_mono_dashboard_nike-outdoor.ru_2.lock reached. Droping request.&quot;
</I>&gt;<i> and some visitors get &quot;Service Temporary Unavailable&quot; error.
</I>
Well that's exactly what's going to happen when you limit the number of 
connections --- the hope is that with a reasonably large 
MonoMaxWaitingRequests it doesn't happen often.

&gt;<i> Is option &quot;MonoMaxWaitingRequest&quot; implemented?
</I>
Yes. (I did it myself...)

If you access a page during high load and see your browser waiting with 
no response for a while, that's MonoMaxWaitingRequest in action holding 
onto the request until it gets a chance to be processed.

&gt;<i> Is the only way to solve this situation in upgrading server CPU?
</I>
Anything that will make your site process requests faster (which might 
involve improving mono like finding out why more concurrency causes 
problems, etc.).

-- 
- Josh Tauberer

<A HREF="http://razor.occams.info">http://razor.occams.info</A>

&quot;Yields falsehood when preceded by its quotation!  Yields
falsehood when preceded by its quotation!&quot; Achilles to
Tortoise (in &quot;Godel, Escher, Bach&quot; by Douglas Hofstadter)

 &gt;
 &gt; Best wishes,
 &gt; Max Karavaev
 &gt;
 &gt;&gt; Hello!
 &gt;&gt;
 &gt;&gt; It seems like we solved this problem.
 &gt;&gt; Joshua is right.
 &gt;&gt;
 &gt;&gt; Settings
 &gt;&gt; MonoMaxActiveRequests 10
 &gt;&gt; MonoMaxWaitingRequests 100
 &gt;&gt; fixed exponentially grow of connections by reducing concurrent 
processes.
 &gt;&gt; On other server with two dual core xeons this problem never appear, but
 &gt;&gt; for other with single core duo 2 these settings are very important.
 &gt;&gt;
 &gt;&gt; And settings
 &gt;&gt; MonoAutoRestartMode Requests
 &gt;&gt; MonoAutoRestartRequests 10000
 &gt;&gt; reduce memory consumption by restarting hight loaded websites.
 &gt;&gt; May be with compacting GC this option become obsolete. I've never seen
 &gt;&gt; such a situation on IIS+.Net.
 &gt;&gt;
 &gt;&gt; It would be great to write some tips about these situations on mod_mono
 &gt;&gt; FAQ page.
 &gt;&gt;
 &gt;&gt; Thanks a lot for help!
 &gt;&gt;
 &gt;&gt; All the best,
 &gt;&gt; Max Karavaev
 &gt;&gt;
 &gt;&gt;
 &gt;&gt;&gt; Hello Maxim,
 &gt;&gt;&gt;
 &gt;&gt;&gt;     We are unaware of this problem, do you think you could provide a
 &gt;&gt;&gt; test case that illustrates this problem so we can look into it?
 &gt;&gt;&gt;
 &gt;&gt;&gt;
 &gt;&gt; _______________________________________________
 &gt;&gt; Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
 &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
 &gt;&gt;
 &gt;&gt;


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039722.html">[Mono-list] Some issues with mono 2.0
</A></li>
	<LI>Next message: <A HREF="039747.html">[Mono-list] Some issues with mono 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39730">[ date ]</a>
              <a href="thread.html#39730">[ thread ]</a>
              <a href="subject.html#39730">[ subject ]</a>
              <a href="author.html#39730">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
