<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list]  Exception only with mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%20Exception%20only%20with%20mono&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039585.html">
   <LINK REL="Next"  HREF="039586.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list]  Exception only with mono</H1>
    <B>misterJane</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%20Exception%20only%20with%20mono&In-Reply-To="
       TITLE="[Mono-list]  Exception only with mono">the_purple_turtle at hotmail.com
       </A><BR>
    <I>Tue Sep 16 04:58:01 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039585.html">[Mono-list] Build order for mono-2-0 branch
</A></li>
        <LI>Next message: <A HREF="039586.html">[Mono-list]  Error converting project from Windows to Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39613">[ date ]</a>
              <a href="thread.html#39613">[ thread ]</a>
              <a href="subject.html#39613">[ subject ]</a>
              <a href="author.html#39613">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

I have a piece of code that executes a stored procedure.
When I run it with .net it executes fine.
When I run it with mono (1.9.1) i get the following exception :

The Connection object does not have the same transaction as the command
object.

Does anyone know what this exception means, and why it works fine directly
on .net, but on mono it throws this exception ?

Thanks !

The code looks something like  :

                SqlTransaction tr = cn.BeginTransaction()
                SqlCommand cmd = PrepareSPCommand(&quot;someCommand&quot;, tr);
                cmd.Parameters.AddWithValue(&quot;@par1&quot;, 1234);
                cmd.Parameters.AddWithValue(&quot;@par2&quot;, _exampleString);

                byte[] fileContent = File.ReadAllBytes(_file);
                cmd.Parameters.AddWithValue(&quot;@FileContent&quot;, fileContent);

                try
                {
                    cmd.ExecuteNonQuery();
                }
                catch (SqlException e)
                {
                    // do some stuff....                   
                    tr.Rollback();
                    throw new Exception(e.Message, e);
                }

                tr.Commit();
    


-- 
View this message in context: <A HREF="http://www.nabble.com/Exception-only-with-mono-tp19507938p19507938.html">http://www.nabble.com/Exception-only-with-mono-tp19507938p19507938.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039585.html">[Mono-list] Build order for mono-2-0 branch
</A></li>
	<LI>Next message: <A HREF="039586.html">[Mono-list]  Error converting project from Windows to Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39613">[ date ]</a>
              <a href="thread.html#39613">[ thread ]</a>
              <a href="subject.html#39613">[ subject ]</a>
              <a href="author.html#39613">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
