<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono doesn't work on PowerPC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono%20doesn%27t%20work%20on%20PowerPC&In-Reply-To=8A9A8D0B-F947-4212-BFB4-E14576B26EFF%40web.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039493.html">
   <LINK REL="Next"  HREF="039492.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono doesn't work on PowerPC</H1>
    <B>Yury Serdyuk</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono%20doesn%27t%20work%20on%20PowerPC&In-Reply-To=8A9A8D0B-F947-4212-BFB4-E14576B26EFF%40web.de"
       TITLE="[Mono-list] Mono doesn't work on PowerPC">Yury at serdyuk.botik.ru
       </A><BR>
    <I>Sat Sep  6 04:03:17 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039493.html">[Mono-list] Mono doesn't work on PowerPC
</A></li>
        <LI>Next message: <A HREF="039492.html">[Mono-list] the GC define ALL_INTERIOR_POINTERS - needed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39502">[ date ]</a>
              <a href="thread.html#39502">[ thread ]</a>
              <a href="subject.html#39502">[ subject ]</a>
              <a href="author.html#39502">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Andreas F&#228;rber wrote:

&gt;<i> If you've  come so far, you will most likely have built for ppc, not 
</I>&gt;<i> ppc64.  Please be careful not to spread confusion there.
</I>
I have tried to build Mono from mono-112392 SVN trunk.
I've used  --target=powerpc-redhat-linux switch for configure.

Results are the following:

1) Using mcs from the previously installed Mono ( 1.2.3 ) gives

make[7]: Entering directory `/home/user002/mono-112392/mcs/mcs'
../jay/jay -ctv &lt; ../jay/skeleton.cs cs-parser.jay &gt; jay-tmp.out &amp;&amp; mv 
jay-tmp.out cs-parser.cs
../jay/jay: 2 rules never reduced
../jay/jay: 32 shift/reduce conflicts.
/bin/sh ../mkinstalldirs ../class/lib/basic/
mkdir -p -- ../class/lib/basic/
touch ../class/lib/basic//.stamp
MCS     [basic] mcs.exe
** Message: Unknown errno: Unknown error 8192

Stacktrace:


Native stacktrace:

        /usr/bin/mono [0x1011dbd8]
        /usr/bin/mono [0x100e350c]
        [0x100350]
        [0xf7588680]
        [0xf758c6e0]
        [0xf75881bc]
        [0xf7587d2c]
        [0xf7587a08]
        [0xf758cfd8]
        [0xf758cee8]
        [0xf758cd54]
        [0xf75bb3d4]
        [0xf75bee30]
        [0xf75bea6c]
        [0xf75baae4]
        [0xf75ba514]
        [0xf7597750]
        [0xf7590f7c]
        [0xf758c0c8]
        [0xf758ba80]
        [0xf756420c]
        [0xf75608c4]
        [0xf7553b58]
        /usr/bin/mono [0x10106e68]
        /usr/bin/mono(mono_runtime_invoke+0x1c) [0x10083e7c]
        /usr/bin/mono(mono_runtime_exec_main+0xd4) [0x10089cc4]
        /usr/bin/mono(mono_runtime_run_main+0x1d4) [0x10089fa4]
        /usr/bin/mono(mono_jit_exec+0xa0) [0x100104d0]
        /usr/bin/mono(mono_main+0xfd0) [0x100114e0]
        /usr/bin/mono [0x1000fe60]
        /lib/libc.so.6 [0xfcfde0c]
        /lib/libc.so.6 [0xfcfe060]

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================


** ERROR **: file mini-exceptions.c: line 1098 
(mono_handle_native_sigsegv): assertion failed: (sigaction (SIGABRT, 
&amp;sa, NULL) != -1)
aborting...
/bin/sh: line 1: 26397 Aborted                 mcs /codepage:65001 
-optimize -d:NET_1_1 -d:ONLY_1_1 -d:BOOTSTRAP_WITH_OLDLIB -debug 
-target:exe -out:mcs.exe cs-parser.cs @mcs.exe.sources
make[7]: *** [../class/lib/basic/mcs.exe] Error 134

2) With   make EXTERNAL_MCS=false  I got:

make[6]: Entering directory `/home/user002/mono-112392/mcs'
*** The compiler 'false' doesn't appear to be usable.
*** Trying the 'monolite' directory.
make[7]: Entering directory `/home/user002/mono-112392/mcs'

** ERROR **: file method-to-ir.c: line 10238 (mono_spill_global_vars): 
assertion failed: (load_opcode != OP_LOADV_MEMBASE)
aborting...
Stacktrace:

  at Mono.CSharp.Location..cctor () &lt;0xffffffff&gt;
  at Mono.CSharp.Location..cctor () &lt;0x00054&gt;
  at Mono.CSharp.Location..cctor () &lt;0x00050&gt;
  at (wrapper runtime-invoke) object.runtime_invoke_void 
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

        /home/user002/mono-112392/mono/mini/mono [0x10027294]
        [0x100350]
        [0x1]
        /lib/libc.so.6(abort+0x23c) [0xfd17ddc]
        /lib/libglib-2.0.so.0(g_logv+0x424) [0xfc124b4]
        /lib/libglib-2.0.so.0(g_log+0x68) [0xfc12528]
        /lib/libglib-2.0.so.0(g_assert_warning+0x8c) [0xfc125cc]
        /home/user002/mono-112392/mono/mini/mono [0x101a0240]
        /home/user002/mono-112392/mono/mini/mono [0x10194e54]
        /home/user002/mono-112392/mono/mini/mono [0x10195538]
        /home/user002/mono-112392/mono/mini/mono [0x10195da8]
        
/home/user002/mono-112392/mono/mini/mono(mono_runtime_invoke+0x80) 
[0x10071810]
        /home/user002/mono-112392/mono/mini/mono [0x10075f0c]
        /home/user002/mono-112392/mono/mini/mono [0x1019579c]
        
/home/user002/mono-112392/mono/mini/mono(mono_compile_method+0x30) 
[0x10070460]
        /home/user002/mono-112392/mono/mini/mono [0x10029480]
        [0xf7f30114]
        [0xf7ad06cc]
        [0xf7ad057c]
        /home/user002/mono-112392/mono/mini/mono [0x10195dc0]
        
/home/user002/mono-112392/mono/mini/mono(mono_runtime_invoke+0x80) 
[0x10071810]
        /home/user002/mono-112392/mono/mini/mono [0x10075f0c]
        
/home/user002/mono-112392/mono/mini/mono(mono_method_to_ir2+0x1e2b8) 
[0x101c3758]
        /home/user002/mono-112392/mono/mini/mono [0x10193688]
        /home/user002/mono-112392/mono/mini/mono [0x10195538]
        /home/user002/mono-112392/mono/mini/mono [0x10195da8]
        
/home/user002/mono-112392/mono/mini/mono(mono_runtime_invoke+0x80) 
[0x10071810]
        
/home/user002/mono-112392/mono/mini/mono(mono_runtime_exec_main+0x1b0) 
[0x100777c0]
        
/home/user002/mono-112392/mono/mini/mono(mono_runtime_run_main+0x1d4) 
[0x10078fc4]
        /home/user002/mono-112392/mono/mini/mono(mono_jit_exec+0xa0) 
[0x10011980]
        /home/user002/mono-112392/mono/mini/mono(mono_main+0x118c) 
[0x10012b4c]
        /home/user002/mono-112392/mono/mini/mono [0x10011290]
        /lib/libc.so.6 [0xfcfde0c]
        /lib/libc.so.6 [0xfcfe060]

Debug info from gdb:

Using host libthread_db library &quot;/lib/libthread_db.so.1&quot;.
[Thread debugging using libthread_db enabled]
[New Thread 268381744 (LWP 17408)]
[New Thread -144575328 (LWP 17451)]
[New Thread -144182112 (LWP 17450)]
0x0fcaf350 in read () from /lib/libpthread.so.0
  3 Thread -144182112 (LWP 17450)  0x0fcafc24 in nanosleep () from 
/lib/libpthread.so.0
  2 Thread -144575328 (LWP 17451)  0x0fcab044 in 
pthread_cond_wait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
  1 Thread 268381744 (LWP 17408)  0x0fcaf350 in read () from 
/lib/libpthread.so.0

My sytem is :

Linux tm-server 2.6.22-5.20070920bsc #1 SMP Tue Sep 25 10:49:16 CEST 
2007 ppc64 ppc64 ppc64 GNU/Linux
( Fedora Core 7 Distro).

&gt;<i>
</I>&gt;<i> If it's not solved when building from SVN trunk, you should file a 
</I>&gt;<i> bug  at Bugzilla. Could be a buffer overflow. You forgot to mention 
</I>&gt;<i> your  system btw. 
</I>
Should I post a bug at Bugzilla ?

Thanks.

Yury.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20080906/62bcb161/attachment-0001.html">http://lists.ximian.com/pipermail/mono-list/attachments/20080906/62bcb161/attachment-0001.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039493.html">[Mono-list] Mono doesn't work on PowerPC
</A></li>
	<LI>Next message: <A HREF="039492.html">[Mono-list] the GC define ALL_INTERIOR_POINTERS - needed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39502">[ date ]</a>
              <a href="thread.html#39502">[ thread ]</a>
              <a href="subject.html#39502">[ subject ]</a>
              <a href="author.html#39502">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
