<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Some issues with mono 2.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Some%20issues%20with%20mono%202.0&In-Reply-To=48E11049.7040102%40yandex.ru">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039747.html">
   <LINK REL="Next"  HREF="039697.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Some issues with mono 2.0</H1>
    <B>Joshua Tauberer</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Some%20issues%20with%20mono%202.0&In-Reply-To=48E11049.7040102%40yandex.ru"
       TITLE="[Mono-list] Some issues with mono 2.0">jit at occams.info
       </A><BR>
    <I>Mon Sep 29 13:53:40 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039747.html">[Mono-list] Some issues with mono 2.0
</A></li>
        <LI>Next message: <A HREF="039697.html">[Mono-list]  Mono 2.0 LINUX Download
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39748">[ date ]</a>
              <a href="thread.html#39748">[ thread ]</a>
              <a href="subject.html#39748">[ subject ]</a>
              <a href="author.html#39748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &quot;Service Temporary Unavailable&quot; error appears when amount of waiting
</I>&gt;<i> requests reach limit or when waiting requests reach apache timeout?
</I>
Yes, both. That is (to be clear), either:

A) A request comes in and the maximum number of requests are already 
being processed, so this request waits (it sleeps for short intervals) 
until the number of currently-being-processed requests drops below the 
maximum. If that doesn't happen within a certain amount of time 
(hard-coded in mod_mono), the request is dropped with 503. (Service 
Temporarily Unavailable)

B) A request comes in and the maximum number of requests are already 
being processed, but there are also already the maximum number of 
waiting requests waiting, so this request gets dropped *immediately* 
with 503 (Service Temporarily Unavailable).

So I was half-wrong before because I forgot that another way to avoid 
503s is to increase the timeout in mod_mono (but as I said, it's 
hard-coded) so requests can wait longer. But it's already fairly long 
--- 20 seconds or something.

-- 
- Josh Tauberer

<A HREF="http://razor.occams.info">http://razor.occams.info</A>

&quot;Yields falsehood when preceded by its quotation!  Yields
falsehood when preceded by its quotation!&quot; Achilles to
Tortoise (in &quot;Godel, Escher, Bach&quot; by Douglas Hofstadter)


Maxim wrote:
&gt;<i> Joshua Tauberer wrote:
</I>&gt;&gt;<i> Maxim wrote:
</I>&gt;&gt;&gt;<i> Hmm, it seems like we solved problem just partially. With
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> MonoMaxActiveRequests 10 MonoMaxWaitingRequests 100
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> settings there are a lot messages like &quot;Maximum number (10) of 
</I>&gt;&gt;&gt;<i> concurrent mod_mono requests to 
</I>&gt;&gt;&gt;<i> /tmp/mod_mono_dashboard_nike-outdoor.ru_2.lock reached. Droping 
</I>&gt;&gt;&gt;<i> request.&quot; and some visitors get &quot;Service Temporary Unavailable&quot;
</I>&gt;&gt;&gt;<i> error.
</I>&gt;&gt;<i> Well that's exactly what's going to happen when you limit the
</I>&gt;&gt;<i> number of connections --- the hope is that with a reasonably large 
</I>&gt;&gt;<i> MonoMaxWaitingRequests it doesn't happen often.
</I>&gt;<i> So, we should to increase MonoMaxWaitingRequests ?   &quot;Service
</I>&gt;<i> Temporary Unavailable&quot; error appears when amount of waiting requests
</I>&gt;<i> reach limit or when waiting requests reach apache timeout?
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i> Is option &quot;MonoMaxWaitingRequest&quot; implemented?
</I>&gt;&gt;<i> Yes. (I did it myself...)
</I>&gt;<i> Great respect!
</I>&gt;&gt;<i> If you access a page during high load and see your browser waiting 
</I>&gt;&gt;<i> with no response for a while, that's MonoMaxWaitingRequest in
</I>&gt;&gt;<i> action holding onto the request until it gets a chance to be
</I>&gt;&gt;<i> processed.
</I>&gt;<i> Yes, exactly. But sometimes after waiting browser get response
</I>&gt;<i> &quot;Service Temporary Unavailable&quot;.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thanks again for your help!
</I>&gt;<i> 
</I>&gt;<i> All the best, Max Karavaev 
</I>&gt;<i> _______________________________________________ Mono-list maillist  -
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A> 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039747.html">[Mono-list] Some issues with mono 2.0
</A></li>
	<LI>Next message: <A HREF="039697.html">[Mono-list]  Mono 2.0 LINUX Download
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39748">[ date ]</a>
              <a href="thread.html#39748">[ thread ]</a>
              <a href="subject.html#39748">[ subject ]</a>
              <a href="author.html#39748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
