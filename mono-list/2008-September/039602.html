<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] ListViewItemSorter property for FileDialog to folow	.Net functions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20ListViewItemSorter%20property%20for%20FileDialog%20to%20folow%0A%09.Net%20functions&In-Reply-To=84776a970809161351k7aa38f76p604328cbde8071a5%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039601.html">
   <LINK REL="Next"  HREF="039604.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] ListViewItemSorter property for FileDialog to folow	.Net functions</H1>
    <B>Petit Eric</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20ListViewItemSorter%20property%20for%20FileDialog%20to%20folow%0A%09.Net%20functions&In-Reply-To=84776a970809161351k7aa38f76p604328cbde8071a5%40mail.gmail.com"
       TITLE="[Mono-list] ListViewItemSorter property for FileDialog to folow	.Net functions">surfzoid at gmail.com
       </A><BR>
    <I>Tue Sep 16 17:02:08 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039601.html">[Mono-list] ListViewItemSorter property for FileDialog to folow	.Net functions
</A></li>
        <LI>Next message: <A HREF="039604.html">[Mono-list] ListViewItemSorter property for FileDialog to folow	.Net functions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39602">[ date ]</a>
              <a href="thread.html#39602">[ thread ]</a>
              <a href="subject.html#39602">[ subject ]</a>
              <a href="author.html#39602">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>As sayed on IRC, better to attach the patch file.

2008/9/16 Petit Eric &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">surfzoid at gmail.com</A>&gt;:
&gt;<i> Hi
</I>&gt;<i> i add the listview item comparer for FileDialog, like this in a FSdlg,
</I>&gt;<i> yu can click to a collumn header (details view) to change the order,
</I>&gt;<i> like in .NET.
</I>&gt;<i> a perfect think, should be to add &quot;order by group&quot;.
</I>&gt;<i>
</I>&gt;<i> At this time, this patch provide similar way as .NET, except for one
</I>&gt;<i> thing, with .NET that work as it, yu click on the first column header
</I>&gt;<i> it  order asc and class by the first column item, yu click on the 2th
</I>&gt;<i> column header, it order asc and class by the 2th clm header.
</I>&gt;<i> Mine patch, change order asc/desc, each time yu click on a column, it
</I>&gt;<i> will need to copy paste my method for each column and dont continu to
</I>&gt;<i> use the same click event void to use my order function/class.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> [<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">root at SurfzoidPC</A> System.Windows.Forms]# svn diff FileDialog.cs
</I>&gt;<i> Index: FileDialog.cs
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- FileDialog.cs       (r&#233;vision 113212)
</I>&gt;<i> +++ FileDialog.cs       (copie de travail)
</I>&gt;<i> @@ -360,6 +360,9 @@
</I>&gt;<i>                        mwfFileView.SelectedFileChanged += new
</I>&gt;<i> EventHandler (OnSelectedFileChangedFileView);
</I>&gt;<i>                        mwfFileView.ForceDialogEnd += new EventHandler
</I>&gt;<i> (OnForceDialogEndFileView);
</I>&gt;<i>                        mwfFileView.SelectedFilesChanged += new
</I>&gt;<i> EventHandler (OnSelectedFilesChangedFileView);
</I>&gt;<i> +
</I>&gt;<i> +                       //Add Column click event for manual sorting. line 379
</I>&gt;<i> +                       mwfFileView.ColumnClick += new
</I>&gt;<i> System.Windows.Forms.ColumnClickEventHandler(mwfFileView_ColumnClick);
</I>&gt;<i>
</I>&gt;<i>                        dirComboBox.DirectoryChanged += new
</I>&gt;<i> EventHandler (OnDirectoryChangedDirComboBox);
</I>&gt;<i>                        popupButtonPanel.DirectoryChanged += new
</I>&gt;<i> EventHandler (OnDirectoryChangedPopupButtonPanel);
</I>&gt;<i> @@ -373,6 +376,25 @@
</I>&gt;<i>  #endif
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i> +               bool AscDesc = true;
</I>&gt;<i> +               private void mwfFileView_ColumnClick(object sender,
</I>&gt;<i> ColumnClickEventArgs e)
</I>&gt;<i> +               {
</I>&gt;<i> +                       try
</I>&gt;<i> +                       {
</I>&gt;<i> +                               AscDesc = !AscDesc;
</I>&gt;<i> +
</I>&gt;<i> +                               // Set the ListViewItemSorter property
</I>&gt;<i> to a new ListViewItemComparer object.
</I>&gt;<i> +                               mwfFileView.ListViewItemSorter = new
</I>&gt;<i> ListViewItemComparer(e.Column, AscDesc);
</I>&gt;<i> +                               // Call the sort method to manually sort.
</I>&gt;<i> +                               mwfFileView.Sort();
</I>&gt;<i> +
</I>&gt;<i> +                       }
</I>&gt;<i> +                       catch (Exception ex)
</I>&gt;<i> +                       {
</I>&gt;<i> +                               Console.WriteLine(DateTime.Now + &quot;: &quot;
</I>&gt;<i> + ex.Message + Environment.NewLine + ex.StackTrace);
</I>&gt;<i> +                       }
</I>&gt;<i> +               }
</I>&gt;<i> +
</I>&gt;<i>                [DefaultValue(true)]
</I>&gt;<i>                public bool AddExtension {
</I>&gt;<i>                        get {
</I>&gt;<i> @@ -2198,6 +2220,41 @@
</I>&gt;<i>        }
</I>&gt;<i>        #endregion
</I>&gt;<i>
</I>&gt;<i> +       #region ListViewItemComparer Added by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">surfzoid at gmail.com</A>
</I>&gt;<i> +    // Implements the manual sorting of items by column.
</I>&gt;<i> +    class ListViewItemComparer : IComparer
</I>&gt;<i> +    {
</I>&gt;<i> +               private int col;
</I>&gt;<i> +               private bool AscDescInternal;
</I>&gt;<i> +               public ListViewItemComparer()
</I>&gt;<i> +               {
</I>&gt;<i> +                       col = 0;
</I>&gt;<i> +               }
</I>&gt;<i> +
</I>&gt;<i> +               public ListViewItemComparer(int column, bool AscDesc)
</I>&gt;<i> +               {
</I>&gt;<i> +                       col = column;
</I>&gt;<i> +                       AscDescInternal = AscDesc;
</I>&gt;<i> +               }
</I>&gt;<i> +               public int Compare(object x, object y)
</I>&gt;<i> +               {
</I>&gt;<i> +                       int returnVal = -1;
</I>&gt;<i> +                       if (AscDescInternal == true)
</I>&gt;<i> +                       {
</I>&gt;<i> +                               returnVal =
</I>&gt;<i> String.Compare(((ListViewItem)x).SubItems[col].Text,
</I>&gt;<i> +                               ((ListViewItem)y).SubItems[col].Text);
</I>&gt;<i> +                       }
</I>&gt;<i> +
</I>&gt;<i> +                       else
</I>&gt;<i> +                       {
</I>&gt;<i> +                               returnVal =
</I>&gt;<i> String.Compare(((ListViewItem)y).SubItems[col].Text,
</I>&gt;<i> +                               ((ListViewItem)x).SubItems[col].Text);
</I>&gt;<i> +                       }
</I>&gt;<i> +               return returnVal;
</I>&gt;<i> +               }
</I>&gt;<i> +       }
</I>&gt;<i> +    #endregion
</I>&gt;<i> +
</I>&gt;<i>        #region MWFFileView
</I>&gt;<i>
</I>&gt;<i>        internal class MWFFileView : ListView
</I>&gt;<i> @@ -2333,14 +2390,14 @@
</I>&gt;<i>                        columns [1] = CreateColumnHeader (&quot;Size &quot;, 80,
</I>&gt;<i> HorizontalAlignment.Right);
</I>&gt;<i>                        columns [2] = CreateColumnHeader (&quot; Type&quot;,
</I>&gt;<i> 100, HorizontalAlignment.Left);
</I>&gt;<i>                        columns [3] = CreateColumnHeader (&quot; Last
</I>&gt;<i> Access&quot;, 150, HorizontalAlignment.Left);
</I>&gt;<i> -
</I>&gt;<i> +
</I>&gt;<i>                        AllowColumnReorder = true;
</I>&gt;<i>
</I>&gt;<i>                        ResumeLayout (false);
</I>&gt;<i>
</I>&gt;<i>                        KeyDown += new KeyEventHandler (MWF_KeyDown);
</I>&gt;<i>                }
</I>&gt;<i> -
</I>&gt;<i> +
</I>&gt;<i>                ColumnHeader CreateColumnHeader (string text, int
</I>&gt;<i> width, HorizontalAlignment alignment)
</I>&gt;<i>                {
</I>&gt;<i>                        ColumnHeader col = new ColumnHeader ();
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> Cordially.
</I>&gt;<i>
</I>&gt;<i> Small Eric Quotations of the days:
</I>&gt;<i> ---------------------------------------------------------------------------
</I>&gt;<i> If one day one reproaches you that your work is not a work of
</I>&gt;<i> professional, say you that:
</I>&gt;<i> Amateurs built the arch of Noah, and professionals the Titanic.
</I>&gt;<i> ---------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Few people are done for independence, it is the privilege of the powerful ones.
</I>&gt;<i> ---------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> No key was wounded during the drafting of this message.
</I>&gt;<i>
</I>


-- 

Cordially.

Small Eric Quotations of the days:
---------------------------------------------------------------------------
If one day one reproaches you that your work is not a work of
professional, say you that:
Amateurs built the arch of Noah, and professionals the Titanic.
---------------------------------------------------------------------------

Few people are done for independence, it is the privilege of the powerful ones.
---------------------------------------------------------------------------

No key was wounded during the drafting of this message.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: FsDlgItemComparer.patch
Type: application/octet-stream
Size: 4091 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20080916/f463a2db/attachment.obj">http://lists.ximian.com/pipermail/mono-list/attachments/20080916/f463a2db/attachment.obj</A> 
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039601.html">[Mono-list] ListViewItemSorter property for FileDialog to folow	.Net functions
</A></li>
	<LI>Next message: <A HREF="039604.html">[Mono-list] ListViewItemSorter property for FileDialog to folow	.Net functions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39602">[ date ]</a>
              <a href="thread.html#39602">[ thread ]</a>
              <a href="subject.html#39602">[ subject ]</a>
              <a href="author.html#39602">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
