<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Problem with downloading files in Threads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Problem%20with%20downloading%20files%20in%20Threads&In-Reply-To=emr982%249m8%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033737.html">
   <LINK REL="Next"  HREF="033749.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Problem with downloading files in Threads</H1>
    <B>Felipe Almeida Lessa</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Problem%20with%20downloading%20files%20in%20Threads&In-Reply-To=emr982%249m8%241%40sea.gmane.org"
       TITLE="[Mono-list] Problem with downloading files in Threads">felipe.lessa at gmail.com
       </A><BR>
    <I>Tue Dec 26 09:13:56 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="033737.html">[Mono-list] Problem with downloading files in Threads
</A></li>
        <LI>Next message: <A HREF="033749.html">[Mono-list] Problem with downloading files in Threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33739">[ date ]</a>
              <a href="thread.html#33739">[ thread ]</a>
              <a href="subject.html#33739">[ subject ]</a>
              <a href="author.html#33739">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/26/06, Robert Jordan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">robertj at gmx.net</A>&gt; wrote:
&gt;<i> Sebastian P&#246;lsterl wrote:
</I>&gt;<i> &gt; Unfortunatly, if I have 3 files that should be downloaded the last Thread
</I>&gt;<i> &gt; never terminates. Whereas, I download 1 or 2 files everything works fine.
</I>&gt;<i>
</I>&gt;<i> According to the HTTP RFC, a client must not maintain more than
</I>&gt;<i> 2 open connections to the server. WebClient is respecting this
</I>&gt;<i> restriction.
</I>
Maybe he has another problem. He's creating a WebRequest/WebResponse
pair and is never closing it. In fact, he's not even using it, he's
just taking the file size. So for each file it creates two connections
to the same server, being one not closed in the end, so in practice
(with his code) only one download per server can be done concurrently.
Am I right?

Try not using WebClient (as it's just sugar on WebRequest), see the
attached file (which works here).

Cheers,

-- 
Felipe.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dlme.cs
Type: text/x-csharp
Size: 3731 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20061226/0b4b1732/attachment.bin">http://lists.ximian.com/pipermail/mono-list/attachments/20061226/0b4b1732/attachment.bin</A> 
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033737.html">[Mono-list] Problem with downloading files in Threads
</A></li>
	<LI>Next message: <A HREF="033749.html">[Mono-list] Problem with downloading files in Threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33739">[ date ]</a>
              <a href="thread.html#33739">[ thread ]</a>
              <a href="subject.html#33739">[ subject ]</a>
              <a href="author.html#33739">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
