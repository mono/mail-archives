<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Dealock on creating a stream after threading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Dealock%20on%20creating%20a%20stream%20after%20threading&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033746.html">
   <LINK REL="Next"  HREF="033752.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Dealock on creating a stream after threading</H1>
    <B>Eric Morgan</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Dealock%20on%20creating%20a%20stream%20after%20threading&In-Reply-To="
       TITLE="[Mono-list] Dealock on creating a stream after threading">eric at rengeo.com
       </A><BR>
    <I>Wed Dec 27 18:43:39 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="033746.html">[Mono-list] Am I missing something with ContextMenuStrips and ToolStrips?
</A></li>
        <LI>Next message: <A HREF="033752.html">[Mono-list] Mono &amp; bonobo (corba)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33751">[ date ]</a>
              <a href="thread.html#33751">[ thread ]</a>
              <a href="subject.html#33751">[ subject ]</a>
              <a href="author.html#33751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I have an interesting problem involving my .NET application running under Mono deadlocking when trying any file IO after threading.  It's very consistant, and happens when trying to create a StreamWriter, BinaryWriter, XmlDocument.save() or any kind of stream creation.  I have a main thread, which then calls a worker thread.  I have a few locking statements and I've double checked all that to make sure that deadlock isn't happening due to a poor locking mechanism.  If I comment out the immediate lines that write out a file, it finishes OK, but then will deadlock on the very next stream attempt.  It does not deadlock (using the exact same writing function) on any IO *before* the threads are started up.

The application is *very* large and the source code is confidential.  I'm wondering if other people have run into similar issues and if there's any advice that I can get to try to avoid this deadlocking issue.  I've read numerous articles about how to use threading in .NET, but I could be doing something wrong.

However, the code executes just fine under .NET, *and* Mono 1.2.2 for windows.  It only deadlocks under 1.2.2 and later on Mono.  I have both the standalone 1.2.2 Mono version and the latest svn built on my linux box running suse 10.1.  Deadlocks on both, so I'm thinking it could just be an error in my specific linux installation or configuration, since the windows version of Mono works.

Any help is greatly appreciated.  If I can, I'll try to come up with a test case in the next day or so, but I thought I'd toss a message out here first.

Thanks,

Eric Morgan
Renegade Geophysics 







 
                   
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033746.html">[Mono-list] Am I missing something with ContextMenuStrips and ToolStrips?
</A></li>
	<LI>Next message: <A HREF="033752.html">[Mono-list] Mono &amp; bonobo (corba)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33751">[ date ]</a>
              <a href="thread.html#33751">[ thread ]</a>
              <a href="subject.html#33751">[ subject ]</a>
              <a href="author.html#33751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
