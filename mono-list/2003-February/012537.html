<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] More on System.Web.Mail
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pt99par%40student.bth.se">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="012534.html">
   <LINK REL="Next"  HREF="012518.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] More on System.Web.Mail
   </H1>
    <B>Per Arneng
    </B> 
    <A HREF="mailto:pt99par%40student.bth.se"
       TITLE="[Mono-list] More on System.Web.Mail">pt99par@student.bth.se
       </A><BR>
    <I>Wed, 26 Feb 2003 20:46:55 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="012534.html">[Mono-list] More on System.Web.Mail
</A></li>
        <LI> Next message: <A HREF="012518.html">[Mono-list] HttpChannel?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12537">[ date ]</a>
              <a href="thread.html#12537">[ thread ]</a>
              <a href="subject.html#12537">[ subject ]</a>
              <a href="author.html#12537">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

|<i> You should delay the encoding until you actually have to deliver the
</I>|<i> content.  Once you connect to the SMTP server, you can find out whether
</I>|<i> it supports eight-bit transfers.
</I> =20
  As i have understood it the SMTP spec says 7bit. And since the mail
 goes through several MTA's and it would be hard to know what each
 of them could handle.  And MS only uses 7bit content transfer for us-asc=
ii
 otherwise it uses 8bit and encodes the subject with base64

|<i> guess some heuristics work in this case (I am CCing Jeff, which can
</I>|<i> correct me):
</I>|<i>
</I>|<i> =09* If message body contains nulls, use base64 encoding.
</I>|<i>
</I>|<i> =09* If not, if the target server does not support  8-bit encoding
</I>|<i> =09  use Quoted Printable.
</I>|<i>
</I>|<i> =09* Else, use plain text transfer.
</I>|<i>
</I>=20
The code that is on the CVS reacts exactly as the .NET runtime on some  =20
different encodings. I could write a library that handles everything with=
=20
encoding better than .NETruntime but then it would not be compatible. But=
=20
thats not for me to decide. If you want me to write a better one but not=20
compatible i can do so. The api would be the same but the resulting mail=20
would differ.  Either way is ok with me :)

Best regards
   Per



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="012534.html">[Mono-list] More on System.Web.Mail
</A></li>
	<LI> Next message: <A HREF="012518.html">[Mono-list] HttpChannel?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12537">[ date ]</a>
              <a href="thread.html#12537">[ thread ]</a>
              <a href="subject.html#12537">[ subject ]</a>
              <a href="author.html#12537">[ author ]</a>
         </LI>
       </UL>
</body></html>
