<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] (no subject)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:eriklebel%40yahoo.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="012570.html">
   <LINK REL="Next"  HREF="012568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] (no subject)
   </H1>
    <B>Erik LeBel
    </B> 
    <A HREF="mailto:eriklebel%40yahoo.ca"
       TITLE="[Mono-list] (no subject)">eriklebel@yahoo.ca
       </A><BR>
    <I>Thu, 27 Feb 2003 11:28:46 -0500 (EST)</I>
    <P><UL>
        <LI> Previous message: <A HREF="012570.html">[Mono-list] Error: Failed to load library libuser32.dll...
</A></li>
        <LI> Next message: <A HREF="012568.html">[Mono-list] garbage collector
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12571">[ date ]</a>
              <a href="thread.html#12571">[ thread ]</a>
              <a href="subject.html#12571">[ subject ]</a>
              <a href="author.html#12571">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--0-1493297886-1046363326=:68546
Content-Type: multipart/alternative; boundary=&quot;0-702280723-1046363326=:68546&quot;

--0-702280723-1046363326=:68546
Content-Type: text/plain; charset=us-ascii


Hello folks,

I've put together a patch for XmlTextReader. If this is of any interest to anyone, please feel free to incorporate it.

This patch make the addresses three issues:
- fills thrown XmlException objects with Location information
- verifies that element tags are paired together in a valid fassion
- prevents the apperance of multiple root elements.

I am not running .NET, nor have access to it at the moment. The exceptions that I have added for validation purposes do not conform with the .NET messages. Could somebody check them?

I may continue to dable in the class libraries, if anyone has specific requests or comment/corrections let me know.

cheers,
erik



---------------------------------
Post your free ad now! Yahoo! Canada Personals

--0-702280723-1046363326=:68546
Content-Type: text/html; charset=us-ascii

&lt;P&gt;Hello folks,&lt;/P&gt;
&lt;P&gt;I've put together a patch for XmlTextReader. If this is of any interest to anyone, please feel free to incorporate it.&lt;/P&gt;
&lt;P&gt;This patch make the addresses three issues:&lt;BR&gt;- fills thrown XmlException objects with Location information&lt;BR&gt;- verifies that element tags are paired together in a valid fassion&lt;BR&gt;- prevents the apperance of multiple root elements.&lt;/P&gt;
&lt;P&gt;I am not running .NET, nor have access to it at the moment. The exceptions that I have added for validation purposes do not conform with the .NET messages. Could somebody check them?&lt;/P&gt;
&lt;P&gt;I may continue to dable in the class libraries, if anyone has specific requests or comment/corrections let me know.&lt;/P&gt;
&lt;P&gt;cheers,&lt;BR&gt;erik&lt;/P&gt;&lt;p&gt;&lt;br&gt;&lt;hr size=1&gt;Post your free ad now! &lt;a href=&quot;<A HREF="http://ca.personals.yahoo.com/"">http://ca.personals.yahoo.com/&quot;</A>&gt;&lt;b&gt;Yahoo! Canada Personals&lt;/b&gt;&lt;/a&gt;&lt;br&gt;
--0-702280723-1046363326=:68546--
--0-1493297886-1046363326=:68546
Content-Type: application/octet-stream; name=&quot;XmlTextReader.cs&quot;
Content-Transfer-Encoding: base64
Content-Description: XmlTextReader.cs
Content-Disposition: attachment; filename=&quot;XmlTextReader.cs&quot;

Ly8NCi8vIFN5c3RlbS5YbWwuWG1sVGV4dFJlYWRlcg0KLy8NCi8vIEF1dGhv
cjoNCi8vICAgSmFzb24gRGlhbW9uZCAoamFzb25AaW5qZWt0aWxvLm9yZykN
Ci8vICAgQWRhbSBUcmVhdCAobWFueW9zb0B5YWhvby5jb20pDQovLw0KLy8g
KEMpIDIwMDEsIDIwMDIgSmFzb24gRGlhbW9uZCAgaHR0cDovL2luamVrdGls
by5vcmcvDQovLw0KDQovLyBGSVhNRToNCi8vICAgVGhpcyBjYW4gb25seSBw
YXJzZSBiYXNpYyBYTUw6IGVsZW1lbnRzLCBhdHRyaWJ1dGVzLCBwcm9jZXNz
aW5nDQovLyAgIGluc3RydWN0aW9ucywgYW5kIGNvbW1lbnRzIGFyZSBPSy4N
Ci8vDQovLyAgIEl0IGJhcmZzIG9uIERPQ1RZUEUgZGVjbGFyYXRpb25zLg0K
Ly8gICAgID0+IE5vIGJhcmZpbmcsIGJ1dCBwYXJzaW5nIGlzIGluY29tcGxl
dGUuDQovLyAgICAgICAgRFREIG5vZGVzIGFyZSBub3Qgc3RpbGwgY3JlYXRl
ZC4NCi8vDQovLyAgIFRoZXJlJ3MgYWxzbyBubyBjaGVja2luZyBiZWluZyBk
b25lIGZvciB2YWxpZGl0eS4NCi8vDQovLyAgIE1vcmUgY2hlY2tpbmcgc2hv
dWxkIGJlIGRvbmUgZm9yIHdlbGwtZm9ybWVkbmVzcy4NCi8vDQovLyAgIE5h
bWVUYWJsZXMgYXJlbid0IGJlaW5nIHVzZWQgZXZlcnl3aGVyZSB5ZXQuDQov
Lw0KLy8gICBTb21lIHRob3VnaHQgbmVlZHMgdG8gYmUgZ2l2ZW4gdG8gcGVy
Zm9ybWFuY2UuIFRoZXJlJ3MgdG9vIG1hbnkNCi8vICAgc3RyaW5ncyBiZWlu
ZyBhbGxvY2F0ZWQuDQovLw0KLy8gICBTb21lIG9mIHRoZSBNb3ZlVG8gbWV0
aG9kcyBoYXZlbid0IGJlZW4gaW1wbGVtZW50ZWQgeWV0Lg0KLy8NCi8vICAg
eG1sOnNwYWNlLCB4bWw6bGFuZywgYW5kIHhtbDpiYXNlIGFyZW4ndCBiZWlu
ZyB0cmFja2VkLg0KLy8NCg0KdXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVt
LkNvbGxlY3Rpb25zOw0KdXNpbmcgU3lzdGVtLklPOw0KdXNpbmcgU3lzdGVt
LlRleHQ7DQoNCm5hbWVzcGFjZSBTeXN0ZW0uWG1sDQp7DQoJcHVibGljIGNs
YXNzIFhtbFRleHRSZWFkZXIgOiBYbWxSZWFkZXIsIElYbWxMaW5lSW5mbw0K
CXsNCgkJV2hpdGVzcGFjZUhhbmRsaW5nIHdoaXRlc3BhY2VIYW5kbGluZyA9
IFdoaXRlc3BhY2VIYW5kbGluZy5BbGw7DQoJCSNyZWdpb24gQ29uc3RydWN0
b3JzDQoNCgkJcHJvdGVjdGVkIFhtbFRleHRSZWFkZXIgKCkNCgkJew0KCQl9
DQoNCgkJcHVibGljIFhtbFRleHRSZWFkZXIgKFN0cmVhbSBpbnB1dCkNCgkJ
CTogdGhpcyAobmV3IFN0cmVhbVJlYWRlciAoaW5wdXQpKQ0KCQl7DQoJCX0N
Cg0KCQlwdWJsaWMgWG1sVGV4dFJlYWRlciAoc3RyaW5nIHVybCkNCgkJCTog
dGhpcyh1cmwsIG5ldyBOYW1lVGFibGUgKCkpDQoJCXsNCgkJfQ0KDQoJCXB1
YmxpYyBYbWxUZXh0UmVhZGVyIChUZXh0UmVhZGVyIGlucHV0KQ0KCQkJOiB0
aGlzIChpbnB1dCwgbmV3IE5hbWVUYWJsZSAoKSkNCgkJew0KCQl9DQoNCgkJ
cHJvdGVjdGVkIFhtbFRleHRSZWFkZXIgKFhtbE5hbWVUYWJsZSBudCkNCgkJ
CTogdGhpcyAoU3RyaW5nLkVtcHR5LCBudWxsLCBYbWxOb2RlVHlwZS5Ob25l
LCBudWxsKQ0KCQl7DQoJCX0NCg0KCQlwdWJsaWMgWG1sVGV4dFJlYWRlciAo
U3RyZWFtIGlucHV0LCBYbWxOYW1lVGFibGUgbnQpDQoJCQk6IHRoaXMobmV3
IFN0cmVhbVJlYWRlciAoaW5wdXQpLCBudCkNCiAJCXsNCgkJfQ0KDQoJCXB1
YmxpYyBYbWxUZXh0UmVhZGVyIChzdHJpbmcgdXJsLCBTdHJlYW0gaW5wdXQp
DQoJCQk6IHRoaXMgKHVybCwgbmV3IFN0cmVhbVJlYWRlciAoaW5wdXQpKQ0K
CQl7DQoJCX0NCg0KCQlwdWJsaWMgWG1sVGV4dFJlYWRlciAoc3RyaW5nIHVy
bCwgVGV4dFJlYWRlciBpbnB1dCkNCgkJCTogdGhpcyAodXJsLCBpbnB1dCwg
bmV3IE5hbWVUYWJsZSAoKSkNCgkJew0KCQl9DQoNCgkJW01vbm9UT0RPKCJO
b24tZmlsZW5hbWUtdXJsIG11c3QgYmUgc3VwcG9ydGVkLiBXYWl0aW5nIGZv
ciBXZWJDbGllbnQiKV0NCgkJcHVibGljIFhtbFRleHRSZWFkZXIgKHN0cmlu
ZyB1cmwsIFhtbE5hbWVUYWJsZSBudCkNCgkJCS8vIDogdGhpcyh1cmwsIG5l
dyBTdHJlYW1SZWFkZXIgKChTdHJlYW0pbmV3IFhtbFVybFJlc29sdmVyICgp
LkdldEVudGl0eSAobmV3IFVyaSAodXJsKSwgbnVsbCwgdHlwZW9mKFN0cmVh
bSkpKSwgbnQpDQoJCQk6IHRoaXMgKHVybCwgbmV3IFN0cmVhbVJlYWRlciAo
dXJsKSwgbnQpDQoJCXsNCgkJfQ0KDQoJCXB1YmxpYyBYbWxUZXh0UmVhZGVy
IChUZXh0UmVhZGVyIGlucHV0LCBYbWxOYW1lVGFibGUgbnQpDQoJCQk6IHRo
aXMoU3RyaW5nLkVtcHR5LCBpbnB1dCwgbnQpDQoJCXsNCgkJfQ0KDQoJCXB1
YmxpYyBYbWxUZXh0UmVhZGVyIChTdHJlYW0geG1sRnJhZ21lbnQsIFhtbE5v
ZGVUeXBlIGZyYWdUeXBlLCBYbWxQYXJzZXJDb250ZXh0IGNvbnRleHQpDQoJ
CQk6IHRoaXMgKFN0cmluZy5FbXB0eSwgbmV3IFN0cmVhbVJlYWRlciAoeG1s
RnJhZ21lbnQpLCBmcmFnVHlwZSwgY29udGV4dCkNCgkJew0KCQl9DQoNCgkJ
cHVibGljIFhtbFRleHRSZWFkZXIgKHN0cmluZyB1cmwsIFN0cmVhbSBpbnB1
dCwgWG1sTmFtZVRhYmxlIG50KQ0KCQkJOiB0aGlzICh1cmwsIG5ldyBTdHJl
YW1SZWFkZXIgKGlucHV0KSwgbnQpDQoJCXsNCgkJfQ0KDQoJCXB1YmxpYyBY
bWxUZXh0UmVhZGVyIChzdHJpbmcgdXJsLCBUZXh0UmVhZGVyIGlucHV0LCBY
bWxOYW1lVGFibGUgbnQpDQoJCQk6IHRoaXMgKHVybCwgaW5wdXQsIFhtbE5v
ZGVUeXBlLkRvY3VtZW50LCBuZXcgWG1sUGFyc2VyQ29udGV4dCAobnQsIG5l
dyBYbWxOYW1lc3BhY2VNYW5hZ2VyIChudCksIG51bGwsIFhtbFNwYWNlLk5v
bmUpKQ0KCQl7DQoJCX0NCg0KCQlbTW9ub1RPRE8oIlRPRE8gYXMgc2FtZSBh
cyBwcml2YXRlIFhtbFRleHRSZWFkZXIoVGV4dFJlYWRlciwgWG1sTm9kZVR5
cGUsIFhtbFBhcnNlckNvbnRleHQpIildDQoJCXB1YmxpYyBYbWxUZXh0UmVh
ZGVyIChzdHJpbmcgeG1sRnJhZ21lbnQsIFhtbE5vZGVUeXBlIGZyYWdUeXBl
LCBYbWxQYXJzZXJDb250ZXh0IGNvbnRleHQpDQoJCQk6IHRoaXMgKFN0cmlu
Zy5FbXB0eSwgbmV3IFN0cmluZ1JlYWRlciAoeG1sRnJhZ21lbnQpLCBmcmFn
VHlwZSwgY29udGV4dCkNCgkJew0KCQl9DQoNCgkJLy8gVE9ETyBzdGlsbCBy
ZW1haW5zIGFzIGRlc2NyaWJlZCBhdCBoZWFkIG9mIHRoaXMgZmlsZSwNCgkJ
Ly8gYnV0IGl0IG1pZ2h0IG5vdCBiZSBUT0RPIG9mIHRoZSBjb25zdHJ1Y3Rv
cnMuLi4NCgkJWG1sVGV4dFJlYWRlciAoc3RyaW5nIHVybCwgVGV4dFJlYWRl
ciBmcmFnbWVudCwgWG1sTm9kZVR5cGUgZnJhZ1R5cGUsIFhtbFBhcnNlckNv
bnRleHQgY29udGV4dCkNCgkJew0KCQkJdGhpcy5TZXRSZWFkZXJDb250ZXh0
KHVybCwgY29udGV4dCk7DQoJCQl0aGlzLlNldFJlYWRlckZyYWdtZW50KGZy
YWdtZW50LCBmcmFnVHlwZSk7DQoJCX0NCg0KCQkjZW5kcmVnaW9uDQoNCgkJ
I3JlZ2lvbiBQcm9wZXJ0aWVzDQoNCgkJcHVibGljIG92ZXJyaWRlIGludCBB
dHRyaWJ1dGVDb3VudA0KCQl7DQoJCQlnZXQgeyByZXR1cm4gYXR0cmlidXRl
cy5Db3VudDsgfQ0KCQl9DQoNCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBC
YXNlVVJJDQoJCXsNCgkJCWdldCB7IHJldHVybiBwYXJzZXJDb250ZXh0LkJh
c2VVUkk7IH0NCgkJfQ0KDQoJCXB1YmxpYyBvdmVycmlkZSBpbnQgRGVwdGgN
CgkJew0KCQkJZ2V0IHsNCgkJCQlyZXR1cm4gZWxlbWVudERlcHRoOw0KCQkJ
fQ0KCQl9DQoNCgkJcHVibGljIEVuY29kaW5nIEVuY29kaW5nDQoJCXsNCgkJ
CWdldCB7IHJldHVybiBwYXJzZXJDb250ZXh0LkVuY29kaW5nOyB9DQoJCX0N
Cg0KCQlwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFT0YNCgkJew0KCQkJZ2V0DQoJ
CQl7DQoJCQkJcmV0dXJuDQoJCQkJCXJlYWRTdGF0ZSA9PSBSZWFkU3RhdGUu
RW5kT2ZGaWxlIHx8DQoJCQkJCXJlYWRTdGF0ZSA9PSBSZWFkU3RhdGUuQ2xv
c2VkOw0KCQkJfQ0KCQl9DQoNCgkJcHVibGljIG92ZXJyaWRlIGJvb2wgSGFz
VmFsdWUNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIHZhbHVlICE9IFN0cmluZy5F
bXB0eTsJfQ0KCQl9DQoNCgkJcHVibGljIG92ZXJyaWRlIGJvb2wgSXNEZWZh
dWx0DQoJCXsNCgkJCWdldA0KCQkJew0KCQkJCS8vIFhtbFRleHRSZWFkZXIg
ZG9lcyBub3QgZXhwYW5kIGRlZmF1bHQgYXR0cmlidXRlcy4NCgkJCQlyZXR1
cm4gZmFsc2U7DQoJCQl9DQoJCX0NCg0KCQlwdWJsaWMgb3ZlcnJpZGUgYm9v
bCBJc0VtcHR5RWxlbWVudA0KCQl7DQoJCQlnZXQgeyByZXR1cm4gaXNFbXB0
eUVsZW1lbnQ7IH0NCgkJfQ0KDQoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcg
dGhpcyBbaW50IGldDQoJCXsNCgkJCWdldCB7IHJldHVybiBHZXRBdHRyaWJ1
dGUgKGkpOyB9DQoJCX0NCg0KCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIHRo
aXMgW3N0cmluZyBuYW1lXQ0KCQl7DQoJCQlnZXQgeyByZXR1cm4gR2V0QXR0
cmlidXRlIChuYW1lKTsgfQ0KCQl9DQoNCgkJcHVibGljIG92ZXJyaWRlIHN0
cmluZyB0aGlzIFtzdHJpbmcgbG9jYWxOYW1lLCBzdHJpbmcgbmFtZXNwYWNl
TmFtZV0NCgkJew0KCQkJZ2V0IHsgcmV0dXJuIEdldEF0dHJpYnV0ZSAobG9j
YWxOYW1lLCBuYW1lc3BhY2VOYW1lKTsgfQ0KCQl9DQoNCgkJcHVibGljIGlu
dCBMaW5lTnVtYmVyDQoJCXsNCgkJCWdldCB7IHJldHVybiBsaW5lOyB9DQoJ
CX0NCg0KCQlwdWJsaWMgaW50IExpbmVQb3NpdGlvbg0KCQl7DQoJCQlnZXQg
eyByZXR1cm4gY29sdW1uOyB9DQoJCX0NCg0KCQlwdWJsaWMgb3ZlcnJpZGUg
c3RyaW5nIExvY2FsTmFtZQ0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbG9jYWxO
YW1lOyB9DQoJCX0NCg0KCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIE5hbWUN
CgkJew0KCQkJZ2V0IHsgcmV0dXJuIG5hbWU7IH0NCgkJfQ0KDQoJCVtNb25v
VE9ET10NCgkJcHVibGljIGJvb2wgTmFtZXNwYWNlcw0KCQl7DQoJCQlnZXQg
eyB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24gKCk7IH0NCgkJ
CXNldCB7IHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbiAoKTsg
fQ0KCQl9DQoNCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBOYW1lc3BhY2VV
UkkNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG5hbWVzcGFjZVVSSTsgfQ0KCQl9
DQoNCgkJcHVibGljIG92ZXJyaWRlIFhtbE5hbWVUYWJsZSBOYW1lVGFibGUN
CgkJew0KCQkJZ2V0IHsgcmV0dXJuIHBhcnNlckNvbnRleHQuTmFtZVRhYmxl
OyB9DQoJCX0NCg0KCQlwdWJsaWMgb3ZlcnJpZGUgWG1sTm9kZVR5cGUgTm9k
ZVR5cGUNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG5vZGVUeXBlOyB9DQoJCX0N
Cg0KCQlbTW9ub1RPRE9dDQoJCXB1YmxpYyBib29sIE5vcm1hbGl6YXRpb24N
CgkJew0KCQkJZ2V0IHsgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0
aW9uICgpOyB9DQoJCQlzZXQgeyB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRF
eGNlcHRpb24gKCk7IH0NCgkJfQ0KDQoJCXB1YmxpYyBvdmVycmlkZSBzdHJp
bmcgUHJlZml4DQoJCXsNCgkJCWdldCB7IHJldHVybiBwcmVmaXg7IH0NCgkJ
fQ0KDQoJCXB1YmxpYyBvdmVycmlkZSBjaGFyIFF1b3RlQ2hhcg0KCQl7DQoJ
CQlnZXQgew0KCQkJCS8vIHZhbHVlIHN0cmluZyBob2xkcyBhdHRyaWJ1dGUg
cXVvdGF0aW9uIGNoYXIuDQoJCQkJaWYgKE5vZGVUeXBlID09IFhtbE5vZGVU
eXBlLkF0dHJpYnV0ZSkNCgkJCQkJcmV0dXJuIHZhbHVlIFswXTsNCgkJCQll
bHNlDQoJCQkJCXJldHVybiAnIic7DQoJCQl9DQoJCX0NCg0KCQlwdWJsaWMg
b3ZlcnJpZGUgUmVhZFN0YXRlIFJlYWRTdGF0ZQ0KCQl7DQoJCQlnZXQgeyBy
ZXR1cm4gcmVhZFN0YXRlOyB9DQoJCX0NCg0KCQlwdWJsaWMgb3ZlcnJpZGUg
c3RyaW5nIFZhbHVlDQoJCXsNCgkJCWdldCB7DQoJCQkJaWYoTm9kZVR5cGUg
PT0gWG1sTm9kZVR5cGUuQXR0cmlidXRlKQ0KCQkJCQlyZXR1cm4gVW5lc2Nh
cGVBdHRyaWJ1dGVWYWx1ZSh2YWx1ZSk7DQoJCQkJZWxzZQ0KCQkJCQlyZXR1
cm4gdmFsdWU7DQoJCQl9DQoJCX0NCg0KCQlwdWJsaWMgV2hpdGVzcGFjZUhh
bmRsaW5nIFdoaXRlc3BhY2VIYW5kbGluZw0KCQl7DQoJCQlnZXQgeyByZXR1
cm4gd2hpdGVzcGFjZUhhbmRsaW5nOyB9DQoJCQlzZXQgeyB3aGl0ZXNwYWNl
SGFuZGxpbmcgPSB2YWx1ZTsgfQ0KCQl9DQoNCgkJW01vbm9UT0RPXQ0KCQlw
dWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFhtbExhbmcNCgkJew0KCQkJZ2V0IHsg
dGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0aW9uICgpOyB9DQoJCX0N
Cg0KCQlbTW9ub1RPRE9dDQoJCXB1YmxpYyBYbWxSZXNvbHZlciBYbWxSZXNv
bHZlcg0KCQl7DQoJCQlzZXQgeyB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRF
eGNlcHRpb24gKCk7IH0NCgkJfQ0KDQoJCVtNb25vVE9ET10NCgkJcHVibGlj
IG92ZXJyaWRlIFhtbFNwYWNlIFhtbFNwYWNlDQoJCXsNCgkJCWdldCB7IHRo
cm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbiAoKTsgfQ0KCQl9DQoN
CgkJI2VuZHJlZ2lvbg0KDQoJCSNyZWdpb24gTWV0aG9kcw0KDQoJCVtNb25v
VE9ET10NCgkJcHVibGljIG92ZXJyaWRlIHZvaWQgQ2xvc2UgKCkNCgkJew0K
CQkJcmVhZFN0YXRlID0gUmVhZFN0YXRlLkNsb3NlZDsNCgkJfQ0KDQoJCVtN
b25vVE9ET10NCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXRBdHRyaWJ1
dGUgKGludCBpKQ0KCQl7DQoJCQlpZiAoaSA+IGF0dHJpYnV0ZXMuQ291bnQp
DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUV4Y2VwdGlvbiAo
ImkgaXMgc21hbGxlciB0aGFuIEF0dHJpYnV0ZUNvdW50Iik7DQoJCQllbHNl
DQoJCQkJcmV0dXJuIFVuZXNjYXBlQXR0cmlidXRlVmFsdWUgKGF0dHJpYnV0
ZXMgW29yZGVyZWRBdHRyaWJ1dGVzIFtpXV0gYXMgc3RyaW5nKTsNCgkJfQ0K
DQoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0QXR0cmlidXRlIChzdHJp
bmcgbmFtZSkNCgkJew0KCQkJcmV0dXJuIGF0dHJpYnV0ZXMuQ29udGFpbnNL
ZXkgKG5hbWUpID8NCgkJCQlVbmVzY2FwZUF0dHJpYnV0ZVZhbHVlIChhdHRy
aWJ1dGVzIFtuYW1lXSBhcyBzdHJpbmcpIDogU3RyaW5nLkVtcHR5Ow0KCQl9
DQoNCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXRBdHRyaWJ1dGUgKHN0
cmluZyBsb2NhbE5hbWUsIHN0cmluZyBuYW1lc3BhY2VVUkkpDQoJCXsNCgkJ
CWZvcmVhY2ggKERpY3Rpb25hcnlFbnRyeSBlbnRyeSBpbiBhdHRyaWJ1dGVz
KQ0KCQkJew0KCQkJCXN0cmluZyB0aGlzTmFtZSA9IGVudHJ5LktleSBhcyBz
dHJpbmc7DQoNCgkJCQlpbnQgaW5kZXhPZkNvbG9uID0gdGhpc05hbWUuSW5k
ZXhPZiAoJzonKTsNCg0KCQkJCWlmIChpbmRleE9mQ29sb24gIT0gLTEpIHsN
CgkJCQkJc3RyaW5nIHRoaXNMb2NhbE5hbWUgPSB0aGlzTmFtZS5TdWJzdHJp
bmcgKGluZGV4T2ZDb2xvbiArIDEpOw0KDQoJCQkJCWlmIChsb2NhbE5hbWUg
PT0gdGhpc0xvY2FsTmFtZSkgew0KCQkJCQkJc3RyaW5nIHRoaXNQcmVmaXgg
PSB0aGlzTmFtZS5TdWJzdHJpbmcgKDAsIGluZGV4T2ZDb2xvbik7DQoJCQkJ
CQlzdHJpbmcgdGhpc05hbWVzcGFjZVVSSSA9IExvb2t1cE5hbWVzcGFjZSAo
dGhpc1ByZWZpeCk7DQoNCgkJCQkJCWlmIChuYW1lc3BhY2VVUkkgPT0gdGhp
c05hbWVzcGFjZVVSSSkNCgkJCQkJCQlyZXR1cm4gYXR0cmlidXRlcy5Db250
YWluc0tleSAodGhpc05hbWUpID8NCgkJCQkJCQkJVW5lc2NhcGVBdHRyaWJ1
dGVWYWx1ZSAoYXR0cmlidXRlcyBbdGhpc05hbWVdIGFzIHN0cmluZykgOiBT
dHJpbmcuRW1wdHk7DQoJCQkJCX0NCgkJCQl9IGVsc2UgaWYgKGxvY2FsTmFt
ZSA9PSAieG1sbnMiICYmIG5hbWVzcGFjZVVSSSA9PSAiaHR0cDovL3d3dy53
My5vcmcvMjAwMC94bWxucy8iICYmIHRoaXNOYW1lID09ICJ4bWxucyIpDQoJ
CQkJCXJldHVybiBhdHRyaWJ1dGVzLkNvbnRhaW5zS2V5ICh0aGlzTmFtZSkg
PyANCgkJCQkJCVVuZXNjYXBlQXR0cmlidXRlVmFsdWUgKGF0dHJpYnV0ZXMg
W3RoaXNOYW1lXSBhcyBzdHJpbmcpIDogU3RyaW5nLkVtcHR5Ow0KCQkJfQ0K
DQoJCQlyZXR1cm4gU3RyaW5nLkVtcHR5Ow0KCQl9DQoNCgkJW01vbm9UT0RP
XQ0KCQlwdWJsaWMgVGV4dFJlYWRlciBHZXRSZW1haW5kZXIgKCkNCgkJew0K
CQkJdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0aW9uICgpOw0KCQl9
DQoNCgkJW01vbm9UT0RPXQ0KCQlib29sIElYbWxMaW5lSW5mby5IYXNMaW5l
SW5mbyAoKQ0KCQl7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCg0KCQlwdWJs
aWMgb3ZlcnJpZGUgc3RyaW5nIExvb2t1cE5hbWVzcGFjZSAoc3RyaW5nIHBy
ZWZpeCkNCgkJew0KCQkJcmV0dXJuIHBhcnNlckNvbnRleHQuTmFtZXNwYWNl
TWFuYWdlci5Mb29rdXBOYW1lc3BhY2UgKHByZWZpeCk7DQoJCX0NCg0KCQlw
dWJsaWMgb3ZlcnJpZGUgdm9pZCBNb3ZlVG9BdHRyaWJ1dGUgKGludCBpKQ0K
CQl7DQoJCQlNb3ZlVG9FbGVtZW50ICgpOw0KDQoJCQlpZiAoYXR0cmlidXRl
cyA9PSBudWxsIHx8IG9yZGVyZWRBdHRyaWJ1dGVzLkNvdW50IDwgaSB8fCBp
IDwgMCkNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0
aW9uICgiYXR0cmlidXRlIGluZGV4IG91dCBvZiByYW5nZS4iKTsNCg0KCQkJ
c3RyaW5nIG5hbWUgPSBvcmRlcmVkQXR0cmlidXRlcyBbaV0gYXMgc3RyaW5n
Ow0KCQkJc3RyaW5nIHZhbHVlID0gYXR0cmlidXRlcyBbbmFtZV0gYXMgc3Ry
aW5nOw0KCQkJU2V0UHJvcGVydGllcyAoDQoJCQkJWG1sTm9kZVR5cGUuQXR0
cmlidXRlLCAvLyBub2RlVHlwZQ0KCQkJCW5hbWUsIC8vIG5hbWUNCgkJCQlm
YWxzZSwgLy8gaXNFbXB0eUVsZW1lbnQNCgkJCQl2YWx1ZSwgLy8gdmFsdWUN
CgkJCQlmYWxzZSAvLyBjbGVhckF0dHJpYnV0ZXMNCgkJCQkpOw0KCQkJYXR0
cmlidXRlVmFsdWVQb3MgPSAwOw0KCQl9DQoNCgkJcHVibGljIG92ZXJyaWRl
IGJvb2wgTW92ZVRvQXR0cmlidXRlIChzdHJpbmcgbmFtZSkNCgkJew0KCQkJ
TW92ZVRvRWxlbWVudCAoKTsNCgkJCWJvb2wgbWF0Y2ggPSBmYWxzZTsNCg0K
CQkJaWYgKGF0dHJpYnV0ZXMgPT0gbnVsbCkNCgkJCQlyZXR1cm4gZmFsc2U7
DQoNCgkJCWlmIChvcmRlcmVkQXR0cmlidXRlc0VudW1lcmF0b3IgPT0gbnVs
bCkgew0KCQkJCVNhdmVQcm9wZXJ0aWVzICgpOw0KCQkJCW9yZGVyZWRBdHRy
aWJ1dGVzRW51bWVyYXRvciA9IG9yZGVyZWRBdHRyaWJ1dGVzLkdldEVudW1l
cmF0b3IgKCk7DQoJCQl9DQoNCgkJCXdoaWxlIChvcmRlcmVkQXR0cmlidXRl
c0VudW1lcmF0b3IuTW92ZU5leHQgKCkpIHsNCgkJCQlpZihuYW1lID09IG9y
ZGVyZWRBdHRyaWJ1dGVzRW51bWVyYXRvci5DdXJyZW50IGFzIHN0cmluZykg
ew0KCQkJCQltYXRjaCA9IHRydWU7DQoJCQkJCWJyZWFrOw0KCQkJCX0NCgkJ
CX0NCg0KCQkJaWYgKG1hdGNoKSB7DQoJCQkJc3RyaW5nIHZhbHVlID0gYXR0
cmlidXRlcyBbbmFtZV0gYXMgc3RyaW5nOw0KCQkJCVNldFByb3BlcnRpZXMg
KA0KCQkJCQlYbWxOb2RlVHlwZS5BdHRyaWJ1dGUsIC8vIG5vZGVUeXBlDQoJ
CQkJCW5hbWUsIC8vIG5hbWUNCgkJCQkJZmFsc2UsIC8vIGlzRW1wdHlFbGVt
ZW50DQoJCQkJCXZhbHVlLCAvLyB2YWx1ZQ0KCQkJCQlmYWxzZSAvLyBjbGVh
ckF0dHJpYnV0ZXMNCgkJCQkpOw0KCQkJCWF0dHJpYnV0ZVZhbHVlUG9zID0g
MDsNCgkJCX0NCg0KCQkJcmV0dXJuIG1hdGNoOw0KCQl9DQoNCgkJW01vbm9U
T0RPXQ0KCQlwdWJsaWMgb3ZlcnJpZGUgYm9vbCBNb3ZlVG9BdHRyaWJ1dGUg
KHN0cmluZyBsb2NhbE5hbWUsIHN0cmluZyBuYW1lc3BhY2VOYW1lKQ0KCQl7
DQoJCQl0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24gKCk7DQoJ
CX0NCg0KCQlwdWJsaWMgb3ZlcnJpZGUgYm9vbCBNb3ZlVG9FbGVtZW50ICgp
DQoJCXsNCgkJCWlmIChvcmRlcmVkQXR0cmlidXRlc0VudW1lcmF0b3IgIT0g
bnVsbCkgew0KCQkJCW9yZGVyZWRBdHRyaWJ1dGVzRW51bWVyYXRvciA9IG51
bGw7DQoJCQkJUmVzdG9yZVByb3BlcnRpZXMgKCk7DQoJCQkJcmV0dXJuIHRy
dWU7DQoJCQl9DQoNCgkJCXJldHVybiBmYWxzZTsNCgkJfQ0KDQoJCXB1Ymxp
YyBvdmVycmlkZSBib29sIE1vdmVUb0ZpcnN0QXR0cmlidXRlICgpDQoJCXsN
CgkJCU1vdmVUb0VsZW1lbnQgKCk7DQoJCQlyZXR1cm4gTW92ZVRvTmV4dEF0
dHJpYnV0ZSAoKTsNCgkJfQ0KDQoJCXB1YmxpYyBvdmVycmlkZSBib29sIE1v
dmVUb05leHRBdHRyaWJ1dGUgKCkNCgkJew0KCQkJaWYgKGF0dHJpYnV0ZXMg
PT0gbnVsbCkNCgkJCQlyZXR1cm4gZmFsc2U7DQoNCgkJCWlmIChvcmRlcmVk
QXR0cmlidXRlc0VudW1lcmF0b3IgPT0gbnVsbCkgew0KCQkJCVNhdmVQcm9w
ZXJ0aWVzICgpOw0KCQkJCW9yZGVyZWRBdHRyaWJ1dGVzRW51bWVyYXRvciA9
IG9yZGVyZWRBdHRyaWJ1dGVzLkdldEVudW1lcmF0b3IgKCk7DQoJCQl9DQoN
CgkJCWlmIChvcmRlcmVkQXR0cmlidXRlc0VudW1lcmF0b3IuTW92ZU5leHQg
KCkpIHsNCgkJCQlzdHJpbmcgbmFtZSA9IG9yZGVyZWRBdHRyaWJ1dGVzRW51
bWVyYXRvci5DdXJyZW50IGFzIHN0cmluZzsNCgkJCQlzdHJpbmcgdmFsdWUg
PSBhdHRyaWJ1dGVzIFtuYW1lXSBhcyBzdHJpbmc7DQoJCQkJU2V0UHJvcGVy
dGllcyAoDQoJCQkJCVhtbE5vZGVUeXBlLkF0dHJpYnV0ZSwgLy8gbm9kZVR5
cGUNCgkJCQkJbmFtZSwgLy8gbmFtZQ0KCQkJCQlmYWxzZSwgLy8gaXNFbXB0
eUVsZW1lbnQNCgkJCQkJdmFsdWUsIC8vIHZhbHVlDQoJCQkJCWZhbHNlIC8v
IGNsZWFyQXR0cmlidXRlcw0KCQkJCSk7DQoJCQkJYXR0cmlidXRlVmFsdWVQ
b3MgPSAwOw0KCQkJCXJldHVybiB0cnVlOw0KCQkJfQ0KDQoJCQlyZXR1cm4g
ZmFsc2U7DQoJCX0NCg0KCQlwdWJsaWMgb3ZlcnJpZGUgYm9vbCBSZWFkICgp
DQoJCXsNCgkJCWJvb2wgbW9yZSA9IGZhbHNlOw0KDQoJCQlyZWFkU3RhdGUg
PSBSZWFkU3RhdGUuSW50ZXJhY3RpdmU7DQoNCgkJCW1vcmUgPSBSZWFkQ29u
dGVudCAoKTsNCg0KCQkJcmV0dXJuIG1vcmU7DQoJCX0NCg0KCQlbTW9ub1RP
RE8oIlRoaXMgbWV0aG9kIHNob3VsZCBjb25zaWRlciBlbnRpdHkgcmVmZXJl
bmNlcyIpXQ0KCQlwdWJsaWMgb3ZlcnJpZGUgYm9vbCBSZWFkQXR0cmlidXRl
VmFsdWUgKCkNCgkJew0KCQkJLy8gJ2F0dHJpYnV0ZVN0cmluZycgaG9sZHMg
cmVhbCBzdHJpbmcgdmFsdWUgKHdpdGhvdXQgdGhlaXINCgkJCS8vIHF1b3Rh
dGlvbiBjaGFyYWN0ZXJzKS4NCgkJCS8vDQoJCQkvLyAnYXR0cmlidXRlVmFs
dWVQb3MnIGhvbGRzIGN1cnJlbnQgcG9zaXRpb24NCgkJCS8vIG9mICdhdHRy
aWJ1dGVTdHJpbmcnIHdoaWxlIGl0ZXJhdGluZyBSZWFkQXR0cmlidXRlKCku
DQoJCQkvLyBJdCBtYXkgYmU6DQoJCQkvLyAgIC0xIGlmIFJlYWRBdHRyaWJ1
dGVWYWx1ZSgpIGhhcyBhbHJlYWR5IGZpbmlzaGVkLg0KCQkJLy8gICAgMCBp
ZiBSZWFkQXR0cmlidXRlVmFsdWUoKSByZWFkeSB0byBzdGFydCByZWFkaW5n
Lg0KCQkJLy8gICA+MCBpZiBSZWFkQXR0cmlidXRlVmFsdWUoKSBhbHJlYWR5
IGdvdCAxIG9yIG1vcmUgdmFsdWVzDQoJCQkvLw0KCQkJLy8gbG9jYWwgJ3Jl
ZlBvc2l0aW9uJyBob2xkcyB0aGUgcG9zaXRpb24gb24gdGhlIA0KCQkJLy8g
YXR0cmlidXRlU3RyaW5nIHdoaWNoIG1heSBiZSB1c2VkIG5leHQgdGltZS4N
Cg0KCQkJaWYgKGF0dHJpYnV0ZVZhbHVlUG9zIDwgMCkgew0KCQkJCVNldFBy
b3BlcnRpZXMgKFhtbE5vZGVUeXBlLk5vbmUsDQoJCQkJCVN0cmluZy5FbXB0
eSwNCgkJCQkJZmFsc2UsDQoJCQkJCVN0cmluZy5FbXB0eSwNCgkJCQkJZmFs
c2UpOw0KCQkJCXJldHVybiBmYWxzZTsNCgkJCX0NCg0KCQkJLy8gSWYgbm90
IHN0YXJ0ZWQsIHRoZW4gaW5pdGlhbGl6ZSBhdHRyaWJ1dGVTdHJpbmcgd2hl
biBwYXJzaW5nIGlzIGF0IHN0YXJ0Lg0KCQkJaWYgKGF0dHJpYnV0ZVZhbHVl
UG9zID09IDApDQoJCQkJYXR0cmlidXRlU3RyaW5nID0NCgkJCQkJdmFsdWUu
U3Vic3RyaW5nICgxLCB2YWx1ZS5MZW5ndGggLSAyKTsNCg0KCQkJYm9vbCBy
ZXR1cm5FbnRpdHlSZWZlcmVuY2UgPSBmYWxzZTsNCgkJCXZhbHVlID0gU3Ry
aW5nLkVtcHR5Ow0KCQkJaW50IHJlZlBvc2l0aW9uOw0KCQkJaW50IGxvb3Ag
PSAwOw0KDQoJCQlkbyB7DQoJCQkJcmVmUG9zaXRpb24gPSBhdHRyaWJ1dGVT
dHJpbmcuSW5kZXhPZiAoJyYnLCBhdHRyaWJ1dGVWYWx1ZVBvcyk7DQoJCQkJ
aWYgKHJlZlBvc2l0aW9uIDwgMCkgew0KCQkJCQkvLyBSZWFjaGVkIHRvIHRo
ZSBlbmQgb2YgdmFsdWUgc3RyaW5nLg0KCQkJCQl2YWx1ZSArPSBhdHRyaWJ1
dGVTdHJpbmcuU3Vic3RyaW5nIChhdHRyaWJ1dGVWYWx1ZVBvcyk7DQoJCQkJ
CWF0dHJpYnV0ZVZhbHVlUG9zID0gLTE7DQoJCQkJCWJyZWFrOw0KCQkJCX0g
ZWxzZSBpZiAocmVmUG9zaXRpb24gPT0gYXR0cmlidXRlVmFsdWVQb3MpIHsN
CgkJCQkJc3RyaW5nIHBhcnNlZCA9IFJlYWRBdHRyaWJ1dGVWYWx1ZVJlZmVy
ZW5jZSAoKTsNCgkJCQkJaWYgKHBhcnNlZCAhPSBudWxsKQ0KCQkJCQkJdmFs
dWUgKz0gcGFyc2VkOw0KCQkJCQllbHNlIHsNCgkJCQkJCS8vIEZvdW5kIHRo
YXQgYW4gZW50aXR5IHJlZmVyZW5jZSBzdGFydHMgZnJvbSB0aGlzIHBvaW50
Lg0KCQkJCQkJLy8gcmVzZXQgcG9zaXRpb24gdG8gYWZ0ZXIgJyYnLg0KCQkJ
CQkJYXR0cmlidXRlVmFsdWVQb3MgPSByZWZQb3NpdGlvbjsNCgkJCQkJCWlm
ICh2YWx1ZS5MZW5ndGggPD0gMCkgew0KCQkJCQkJCWludCBlbmROYW1lUG9z
ID0gYXR0cmlidXRlU3RyaW5nLkluZGV4T2YgKCI7IiwgYXR0cmlidXRlVmFs
dWVQb3MpOw0KCQkJCQkJCXZhbHVlID0gYXR0cmlidXRlU3RyaW5nLlN1YnN0
cmluZyAoYXR0cmlidXRlVmFsdWVQb3MrMSwgZW5kTmFtZVBvcyAtIGF0dHJp
YnV0ZVZhbHVlUG9zIC0gMSk7DQoJCQkJCQkJYXR0cmlidXRlVmFsdWVQb3Mg
Kz0gdmFsdWUuTGVuZ3RoICsgMjsNCgkJCQkJCQlyZXR1cm5FbnRpdHlSZWZl
cmVuY2UgPSB0cnVlOw0KCQkJCQkJfQ0KCQkJCQkJYnJlYWs7DQoJCQkJCX0N
CgkJCQl9IGVsc2Ugew0KCQkJCQl2YWx1ZSArPSBhdHRyaWJ1dGVTdHJpbmcu
U3Vic3RyaW5nIChhdHRyaWJ1dGVWYWx1ZVBvcywNCgkJCQkJCXJlZlBvc2l0
aW9uIC0gYXR0cmlidXRlVmFsdWVQb3MpOw0KCQkJCQlhdHRyaWJ1dGVWYWx1
ZVBvcyA9IHJlZlBvc2l0aW9uOw0KCQkJCQljb250aW51ZTsNCgkJCQl9DQoJ
CQl9IHdoaWxlICgrK2xvb3AgPiAwKTsNCg0KCQkJaWYgKHJldHVybkVudGl0
eVJlZmVyZW5jZSkNCgkJCQlTZXRQcm9wZXJ0aWVzIChYbWxOb2RlVHlwZS5F
bnRpdHlSZWZlcmVuY2UsDQoJCQkJCXZhbHVlLA0KCQkJCQlmYWxzZSwNCgkJ
CQkJU3RyaW5nLkVtcHR5LA0KCQkJCQlmYWxzZSk7DQoJCQllbHNlDQoJCQkJ
U2V0UHJvcGVydGllcyAoWG1sTm9kZVR5cGUuVGV4dCwNCgkJCQkJIiN0ZXh0
IiwNCgkJCQkJZmFsc2UsDQoJCQkJCXZhbHVlLA0KCQkJCQlmYWxzZSk7DQoN
CgkJCXJldHVybiB0cnVlOw0KCQl9DQoNCgkJW01vbm9UT0RPXQ0KCQlwdWJs
aWMgaW50IFJlYWRCYXNlNjQgKGJ5dGUgW10gYnVmZmVyLCBpbnQgb2Zmc2V0
LCBpbnQgbGVuZ3RoKQ0KCQl7DQoJCQl0aHJvdyBuZXcgTm90SW1wbGVtZW50
ZWRFeGNlcHRpb24gKCk7DQoJCX0NCg0KCQlbTW9ub1RPRE9dDQoJCXB1Ymxp
YyBpbnQgUmVhZEJpbkhleCAoYnl0ZSBbXSBidWZmZXIsIGludCBvZmZzZXQs
IGludCBsZW5ndGgpDQoJCXsNCgkJCXRocm93IG5ldyBOb3RJbXBsZW1lbnRl
ZEV4Y2VwdGlvbiAoKTsNCgkJfQ0KDQoJCVtNb25vVE9ET10NCgkJcHVibGlj
IGludCBSZWFkQ2hhcnMgKGNoYXIgW10gYnVmZmVyLCBpbnQgb2Zmc2V0LCBp
bnQgbGVuZ3RoKQ0KCQl7DQoJCQl0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRF
eGNlcHRpb24gKCk7DQoJCX0NCg0KCQlbTW9ub1RPRE9dDQoJCXB1YmxpYyBv
dmVycmlkZSBzdHJpbmcgUmVhZElubmVyWG1sICgpDQoJCXsNCgkJCS8vIFN0
aWxsIG5lZWQgYSBXZWxsIEZvcm1lZG5lc3MgY2hlY2suDQoJCQkvLyBXaWxs
IHdhaXQgZm9yIFZhbGlkYXRpbmcgcmVhZGVyIDstKQ0KCQkJaWYgKE5vZGVU
eXBlID09IFhtbE5vZGVUeXBlLkF0dHJpYnV0ZSkgew0KCQkJCXJldHVybiBW
YWx1ZTsNCgkJCX0gZWxzZSB7DQogICAJCQkJc2F2ZVRvWG1sQnVmZmVyID0g
dHJ1ZTsNCgkJCQlzdHJpbmcgc3RhcnRuYW1lID0gdGhpcy5OYW1lOw0KCQkJ
CXN0cmluZyBlbmRuYW1lID0gc3RyaW5nLkVtcHR5Ow0KCQkJCXJlYWRTdGF0
ZSA9IFJlYWRTdGF0ZS5JbnRlcmFjdGl2ZTsNCg0KCQkJCXdoaWxlIChzdGFy
dG5hbWUgIT0gZW5kbmFtZSkgew0KCQkJCQlSZWFkQ29udGVudCAoKTsNCgkJ
CQkJZW5kbmFtZSA9IHRoaXMuTmFtZTsNCgkJCQl9DQoNCgkJCQl4bWxCdWZm
ZXIuUmVwbGFjZSAoY3VycmVudFRhZy5Ub1N0cmluZyAoKSwgIiIpOw0KCQkJ
CXNhdmVUb1htbEJ1ZmZlciA9IGZhbHNlOw0KCQkJCXN0cmluZyBJbm5lclht
bCA9IHhtbEJ1ZmZlci5Ub1N0cmluZyAoKTsNCgkJCQl4bWxCdWZmZXIuTGVu
Z3RoID0gMDsNCgkJCQlyZXR1cm4gSW5uZXJYbWw7DQoJCQl9DQoJCX0NCg0K
CQlbTW9ub1RPRE9dDQoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgUmVhZE91
dGVyWG1sICgpDQoJCXsNCgkJCWlmIChOb2RlVHlwZSA9PSBYbWxOb2RlVHlw
ZS5BdHRyaWJ1dGUpIHsNCgkJCQlyZXR1cm4gTmFtZSArICI9XCIiICsgVmFs
dWUuUmVwbGFjZSAoIlwiIiwgIiZxdW90OyIpICsgIlwiIjsNCgkJCX0gZWxz
ZSB7DQogICAJCQkJc2F2ZVRvWG1sQnVmZmVyID0gdHJ1ZTsNCgkJCQl4bWxC
dWZmZXIuQXBwZW5kIChjdXJyZW50VGFnLlRvU3RyaW5nICgpKTsNCgkJCQlp
bnQgc3RhcnREZXB0aCA9IERlcHRoOw0KCQkJCXJlYWRTdGF0ZSA9IFJlYWRT
dGF0ZS5JbnRlcmFjdGl2ZTsNCg0KCQkJCWRvIHsNCgkJCQkJUmVhZENvbnRl
bnQgKCk7DQoJCQkJfSB3aGlsZSAoRGVwdGggPiBzdGFydERlcHRoKTsNCg0K
CQkJCXNhdmVUb1htbEJ1ZmZlciA9IGZhbHNlOw0KCQkJCXN0cmluZyBPdXRl
clhtbCA9IHhtbEJ1ZmZlci5Ub1N0cmluZyAoKTsNCgkJCQl4bWxCdWZmZXIu
TGVuZ3RoID0gMDsNCgkJCQlyZXR1cm4gT3V0ZXJYbWw7DQoJCQl9DQoJCX0N
Cg0KCQlbTW9ub1RPRE9dDQoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgUmVh
ZFN0cmluZyAoKQ0KCQl7DQoJCQl0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRF
eGNlcHRpb24gKCk7DQoJCX0NCg0KCQlbTW9ub1RPRE9dDQoJCXB1YmxpYyB2
b2lkIFJlc2V0U3RhdGUgKCkNCgkJew0KCQkJdGhyb3cgbmV3IE5vdEltcGxl
bWVudGVkRXhjZXB0aW9uICgpOw0KCQl9DQoNCgkJcHVibGljIG92ZXJyaWRl
IHZvaWQgUmVzb2x2ZUVudGl0eSAoKQ0KCQl7DQoJCQkvLyBYbWxUZXh0UmVh
ZGVycyBkb24ndCByZXNvbHZlIGVudGl0aWVzLg0KCQkJdGhyb3cgbmV3IElu
dmFsaWRPcGVyYXRpb25FeGNlcHRpb24gKCJYbWxUZXh0UmVhZGVyIGNhbm5v
dCByZXNvbHZlIGV4dGVybmFsIGVudGl0aWVzLiIpOw0KCQl9DQoNCgkJI2Vu
ZHJlZ2lvbg0KDQoJCSNyZWdpb24gSW50ZXJuYWxzDQoJCWludGVybmFsIHN0
cmluZyBwdWJsaWNJZDsNCgkJaW50ZXJuYWwgc3RyaW5nIHN5c3RlbUlkOw0K
DQoJCWludGVybmFsIHZvaWQgU2V0UmVhZGVyQ29udGV4dCAoc3RyaW5nIHVy
bCwgWG1sUGFyc2VyQ29udGV4dCBjb250ZXh0KQ0KCQl7DQoJCQlwYXJzZXJD
b250ZXh0ID0gY29udGV4dDsNCgkJCXBhcnNlckNvbnRleHQuQmFzZVVSSSA9
IHVybDsNCgkJCUluaXQgKCk7DQoJCX0NCg0KCQlpbnRlcm5hbCB2b2lkIFNl
dFJlYWRlckZyYWdtZW50KFRleHRSZWFkZXIgZnJhZ21lbnQsIFhtbE5vZGVU
eXBlIGZyYWdUeXBlKQ0KCQl7DQoJCQl0aGlzLnJlYWRlciA9IGZyYWdtZW50
Ow0KCQkJU3RyZWFtUmVhZGVyIHNyID0gZnJhZ21lbnQgYXMgU3RyZWFtUmVh
ZGVyOw0KCQkJaWYgKHNyICE9IG51bGwpDQoJCQkJY2FuX3NlZWsgPSBzci5C
YXNlU3RyZWFtLkNhblNlZWs7DQoJCQllbHNlDQoJCQkJY2FuX3NlZWsgPSBm
cmFnbWVudCAhPSBudWxsICYmIGZyYWdtZW50LlBlZWsgKCkgIT0gLTE7DQoN
CgkJCWlmIChmcmFnVHlwZSA9PSBYbWxOb2RlVHlwZS5BdHRyaWJ1dGUpDQoJ
CQkJdmFsdWUgPSAiJyciOw0KLyoJZm9yIGZ1dHVyZSB1c2UNCgkJCXN3aXRj
aChmcmFnVHlwZSkNCgkJCXsNCgkJCWNhc2UgWG1sTm9kZVR5cGUuQXR0cmli
dXRlOgkvLyBhdHRyaWJ1dGUgY29udGVudA0KCQkJCXBhcnNlckNvbnRleHQu
SW5wdXRTdGF0ZSA9IFhtbFBhcnNlcklucHV0U3RhdGUuQXR0cmlidXRlVmFs
dWU7DQoJCQkJYnJlYWs7DQoJCQljYXNlIFhtbE5vZGVUeXBlLkRvY3VtZW50
RnJhZ21lbnQ6CS8vIGVsZW1lbnQgY29udGVudA0KCQkJCXBhcnNlckNvbnRl
eHQuSW5wdXRTdGF0ZSA9IFhtbFBhcnNlcklucHV0U3RhdGUuQ29udGVudDsN
CgkJCQlicmVhazsNCgkJCWNhc2UgWG1sTm9kZVR5cGUuRWxlbWVudDoJLy8g
b25lIGVsZW1lbnQNCgkJCQlwYXJzZXJDb250ZXh0LklucHV0U3RhdGUgPSBY
bWxQYXJzZXJJbnB1dFN0YXRlLlN0YXJ0VGFnOw0KCQkJCWJyZWFrOw0KCQkJ
Y2FzZSBYbWxOb2RlVHlwZS5Eb2N1bWVudDoJLy8gZG9jdW1lbnQgY29udGVu
dA0KCQkJCXBhcnNlckNvbnRleHQuSW5wdXRTdGF0ZSA9IFhtbFBhcnNlcklu
cHV0U3RhdGUuU3RhcnQ7DQoJCQkJYnJlYWs7DQoJCQlkZWZhdWx0Og0KCQkJ
CXRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKCJzZXR0aW5n
IHRoaXMgeG1sIG5vZGUgdHlwZSBub3QgYWxsb3dlZC4iKTsNCgkJCX0NCiov
DQoJCX0NCgkJI2VuZHJlZ2lvbg0KDQoJCSNyZWdpb24gUHJpdmF0ZXMNCg0K
CQlwcml2YXRlIFhtbFBhcnNlckNvbnRleHQgcGFyc2VyQ29udGV4dDsNCg0K
CQlwcml2YXRlIFRleHRSZWFkZXIgcmVhZGVyOw0KCQlwcml2YXRlIFJlYWRT
dGF0ZSByZWFkU3RhdGU7DQoNCgkJcHJpdmF0ZSBpbnQgZGVwdGg7DQoJCXBy
aXZhdGUgaW50IGVsZW1lbnREZXB0aDsNCgkJcHJpdmF0ZSBib29sIGRlcHRo
RG93bjsNCg0KCQlwcml2YXRlIGJvb2wgcG9wU2NvcGU7DQoJCXByaXZhdGUg
U3RhY2sgZWxlbWVudFN0YWNrOw0KCQlwcml2YXRlIGJvb2wgaGF2ZUVudGVy
ZWREb2N1bWVudDsNCg0KCQlwcml2YXRlIFhtbE5vZGVUeXBlIG5vZGVUeXBl
Ow0KCQlwcml2YXRlIHN0cmluZyBuYW1lOw0KCQlwcml2YXRlIHN0cmluZyBw
cmVmaXg7DQoJCXByaXZhdGUgc3RyaW5nIGxvY2FsTmFtZTsNCgkJcHJpdmF0
ZSBzdHJpbmcgbmFtZXNwYWNlVVJJOw0KCQlwcml2YXRlIGJvb2wgaXNFbXB0
eUVsZW1lbnQ7DQoJCXByaXZhdGUgc3RyaW5nIHZhbHVlOw0KDQoJCXByaXZh
dGUgWG1sTm9kZVR5cGUgc2F2ZU5vZGVUeXBlOw0KCQlwcml2YXRlIHN0cmlu
ZyBzYXZlTmFtZTsNCgkJcHJpdmF0ZSBzdHJpbmcgc2F2ZVByZWZpeDsNCgkJ
cHJpdmF0ZSBzdHJpbmcgc2F2ZUxvY2FsTmFtZTsNCgkJcHJpdmF0ZSBzdHJp
bmcgc2F2ZU5hbWVzcGFjZVVSSTsNCgkJcHJpdmF0ZSBib29sIHNhdmVJc0Vt
cHR5RWxlbWVudDsNCg0KCQlwcml2YXRlIEhhc2h0YWJsZSBhdHRyaWJ1dGVz
Ow0KCQlwcml2YXRlIEFycmF5TGlzdCBvcmRlcmVkQXR0cmlidXRlczsNCgkJ
cHJpdmF0ZSBJRW51bWVyYXRvciBvcmRlcmVkQXR0cmlidXRlc0VudW1lcmF0
b3I7DQoNCgkJcHJpdmF0ZSBib29sIHJldHVybkVudGl0eVJlZmVyZW5jZTsN
CgkJcHJpdmF0ZSBzdHJpbmcgZW50aXR5UmVmZXJlbmNlTmFtZTsNCg0KCQlw
cml2YXRlIGNoYXIgW10gbmFtZUJ1ZmZlcjsNCgkJcHJpdmF0ZSBpbnQgbmFt
ZUxlbmd0aDsNCgkJcHJpdmF0ZSBpbnQgbmFtZUNhcGFjaXR5Ow0KCQlwcml2
YXRlIGNvbnN0IGludCBpbml0aWFsTmFtZUNhcGFjaXR5ID0gMjU2Ow0KDQoJ
CXByaXZhdGUgY2hhciBbXSB2YWx1ZUJ1ZmZlcjsNCgkJcHJpdmF0ZSBpbnQg
dmFsdWVMZW5ndGg7DQoJCXByaXZhdGUgaW50IHZhbHVlQ2FwYWNpdHk7DQoJ
CXByaXZhdGUgY29uc3QgaW50IGluaXRpYWxWYWx1ZUNhcGFjaXR5ID0gODE5
MjsNCg0KCQlwcml2YXRlIFN0cmluZ0J1aWxkZXIgeG1sQnVmZmVyOyAvLyBU
aGlzIGlzIGZvciBSZWFkKElubmVyfE91dGVyKVhtbA0KCQlwcml2YXRlIFN0
cmluZ0J1aWxkZXIgY3VycmVudFRhZzsgLy8gQSBidWZmZXIgZm9yIFJlYWRD
b250ZW50IGZvciBSZWFkT3V0ZXJYbWwNCgkJcHJpdmF0ZSBib29sIHNhdmVU
b1htbEJ1ZmZlcjsNCgkJcHJpdmF0ZSBpbnQgbGluZSA9IDE7DQoJCXByaXZh
dGUgaW50IGNvbHVtbiA9IDE7DQoJCXByaXZhdGUgYm9vbCBoYXNfcGVlazsN
CgkJcHJpdmF0ZSBib29sIGNhbl9zZWVrOw0KCQlwcml2YXRlIGludCBwZWVr
X2NoYXI7DQoNCgkJcHJpdmF0ZSBzdHJpbmcgYXR0cmlidXRlU3RyaW5nID0g
U3RyaW5nLkVtcHR5Ow0KCQlwcml2YXRlIGludCBhdHRyaWJ1dGVWYWx1ZVBv
czsNCg0KCQlwcml2YXRlIFhtbEV4Y2VwdGlvbiBSZWFkZXJFcnJvcihzdHJp
bmcgbWVzc2FnZSkNCgkJew0KCQkJcmV0dXJuIG5ldyBYbWxFeGNlcHRpb24o
bWVzc2FnZSwgTGluZU51bWJlciwgTGluZVBvc2l0aW9uKTsNCgkJfQ0KCQlw
cml2YXRlIHZvaWQgSW5pdCAoKQ0KCQl7DQoJCQlyZWFkU3RhdGUgPSBSZWFk
U3RhdGUuSW5pdGlhbDsNCg0KCQkJZGVwdGggPSAwOw0KCQkJZGVwdGhEb3du
ID0gZmFsc2U7DQoNCgkJCXBvcFNjb3BlID0gZmFsc2U7DQoJCQllbGVtZW50
U3RhY2sgPSBuZXcgU3RhY2soKTsNCgkJCWhhdmVFbnRlcmVkRG9jdW1lbnQg
PSBmYWxzZTsNCg0KCQkJbm9kZVR5cGUgPSBYbWxOb2RlVHlwZS5Ob25lOw0K
CQkJbmFtZSA9IFN0cmluZy5FbXB0eTsNCgkJCXByZWZpeCA9IFN0cmluZy5F
bXB0eTsNCgkJCWxvY2FsTmFtZSA9IHN0cmluZy5FbXB0eTsNCgkJCWlzRW1w
dHlFbGVtZW50ID0gZmFsc2U7DQoJCQl2YWx1ZSA9IFN0cmluZy5FbXB0eTsN
Cg0KCQkJYXR0cmlidXRlcyA9IG5ldyBIYXNodGFibGUgKCk7DQoJCQlvcmRl
cmVkQXR0cmlidXRlcyA9IG5ldyBBcnJheUxpc3QgKCk7DQoJCQlvcmRlcmVk
QXR0cmlidXRlc0VudW1lcmF0b3IgPSBudWxsOw0KDQoJCQlyZXR1cm5FbnRp
dHlSZWZlcmVuY2UgPSBmYWxzZTsNCgkJCWVudGl0eVJlZmVyZW5jZU5hbWUg
PSBTdHJpbmcuRW1wdHk7DQoNCgkJCW5hbWVCdWZmZXIgPSBuZXcgY2hhciBb
aW5pdGlhbE5hbWVDYXBhY2l0eV07DQoJCQluYW1lTGVuZ3RoID0gMDsNCgkJ
CW5hbWVDYXBhY2l0eSA9IGluaXRpYWxOYW1lQ2FwYWNpdHk7DQoNCgkJCXZh
bHVlQnVmZmVyID0gbmV3IGNoYXIgW2luaXRpYWxWYWx1ZUNhcGFjaXR5XTsN
CgkJCXZhbHVlTGVuZ3RoID0gMDsNCgkJCXZhbHVlQ2FwYWNpdHkgPSBpbml0
aWFsVmFsdWVDYXBhY2l0eTsNCg0KCQkJeG1sQnVmZmVyID0gbmV3IFN0cmlu
Z0J1aWxkZXIgKCk7DQoJCQljdXJyZW50VGFnID0gbmV3IFN0cmluZ0J1aWxk
ZXIgKCk7DQoJCX0NCg0KCQkvLyBVc2UgdGhpcyBtZXRob2QgcmF0aGVyIHRo
YW4gc2V0dGluZyB0aGUgcHJvcGVydGllcw0KCQkvLyBkaXJlY3RseSBzbyB0
aGF0IGFsbCB0aGUgbmVjZXNzYXJ5IHByb3BlcnRpZXMgY2FuDQoJCS8vIGJl
IGNoYW5nZWQgaW4gaGFybW9ueSB3aXRoIGVhY2ggb3RoZXIuIE1heWJlIHRo
ZQ0KCQkvLyBmaWVsZHMgc2hvdWxkIGJlIGluIGEgc2VwZXJhdGUgY2xhc3Mg
dG8gaGVscCBlbmZvcmNlDQoJCS8vIHRoaXMuDQoJCXByaXZhdGUgdm9pZCBT
ZXRQcm9wZXJ0aWVzICgNCgkJCVhtbE5vZGVUeXBlIG5vZGVUeXBlLA0KCQkJ
c3RyaW5nIG5hbWUsDQoJCQlib29sIGlzRW1wdHlFbGVtZW50LA0KCQkJc3Ry
aW5nIHZhbHVlLA0KCQkJYm9vbCBjbGVhckF0dHJpYnV0ZXMpDQoJCXsNCgkJ
CXRoaXMubm9kZVR5cGUgPSBub2RlVHlwZTsNCgkJCXRoaXMubmFtZSA9IG5h
bWU7DQoJCQl0aGlzLmlzRW1wdHlFbGVtZW50ID0gaXNFbXB0eUVsZW1lbnQ7
DQoJCQl0aGlzLnZhbHVlID0gdmFsdWU7DQoJCQl0aGlzLmVsZW1lbnREZXB0
aCA9IGRlcHRoOw0KDQoJCQlpZiAoY2xlYXJBdHRyaWJ1dGVzKQ0KCQkJCUNs
ZWFyQXR0cmlidXRlcyAoKTsNCg0KCQkJaW50IGluZGV4T2ZDb2xvbiA9IG5h
bWUuSW5kZXhPZiAoJzonKTsNCg0KCQkJaWYgKGluZGV4T2ZDb2xvbiA9PSAt
MSkgew0KCQkJCXByZWZpeCA9IFN0cmluZy5FbXB0eTsNCgkJCQlsb2NhbE5h
bWUgPSBuYW1lOw0KCQkJfSBlbHNlIHsNCgkJCQlwcmVmaXggPSBuYW1lLlN1
YnN0cmluZyAoMCwgaW5kZXhPZkNvbG9uKTsNCgkJCQlsb2NhbE5hbWUgPSBu
YW1lLlN1YnN0cmluZyAoaW5kZXhPZkNvbG9uICsgMSk7DQoJCQl9DQoNCgkJ
CW5hbWVzcGFjZVVSSSA9IExvb2t1cE5hbWVzcGFjZSAocHJlZml4KTsNCgkJ
fQ0KDQoJCXByaXZhdGUgdm9pZCBTYXZlUHJvcGVydGllcyAoKQ0KCQl7DQoJ
CQlzYXZlTm9kZVR5cGUgPSBub2RlVHlwZTsNCgkJCXNhdmVOYW1lID0gbmFt
ZTsNCgkJCXNhdmVQcmVmaXggPSBwcmVmaXg7DQoJCQlzYXZlTG9jYWxOYW1l
ID0gbG9jYWxOYW1lOw0KCQkJc2F2ZU5hbWVzcGFjZVVSSSA9IG5hbWVzcGFj
ZVVSSTsNCgkJCXNhdmVJc0VtcHR5RWxlbWVudCA9IGlzRW1wdHlFbGVtZW50
Ow0KCQkJLy8gQW4gZWxlbWVudCdzIHZhbHVlIGlzIGFsd2F5cyBTdHJpbmcu
RW1wdHkuDQoJCX0NCg0KCQlwcml2YXRlIHZvaWQgUmVzdG9yZVByb3BlcnRp
ZXMgKCkNCgkJew0KCQkJbm9kZVR5cGUgPSBzYXZlTm9kZVR5cGU7DQoJCQlu
YW1lID0gc2F2ZU5hbWU7DQoJCQlwcmVmaXggPSBzYXZlUHJlZml4Ow0KCQkJ
bG9jYWxOYW1lID0gc2F2ZUxvY2FsTmFtZTsNCgkJCW5hbWVzcGFjZVVSSSA9
IHNhdmVOYW1lc3BhY2VVUkk7DQoJCQlpc0VtcHR5RWxlbWVudCA9IHNhdmVJ
c0VtcHR5RWxlbWVudDsNCgkJCXZhbHVlID0gU3RyaW5nLkVtcHR5Ow0KCQl9
DQoNCgkJcHJpdmF0ZSB2b2lkIEFkZEF0dHJpYnV0ZSAoc3RyaW5nIG5hbWUs
IHN0cmluZyB2YWx1ZSkNCgkJew0KCQkJYXR0cmlidXRlcy5BZGQgKG5hbWUs
IHZhbHVlKTsNCgkJCW9yZGVyZWRBdHRyaWJ1dGVzLkFkZCAobmFtZSk7DQoJ
CX0NCg0KCQlwcml2YXRlIHZvaWQgQ2xlYXJBdHRyaWJ1dGVzICgpDQoJCXsN
CgkJCWlmIChhdHRyaWJ1dGVzLkNvdW50ID4gMCkgew0KCQkJCWF0dHJpYnV0
ZXMuQ2xlYXIgKCk7DQoJCQkJb3JkZXJlZEF0dHJpYnV0ZXMuQ2xlYXIgKCk7
DQoJCQl9DQoNCgkJCW9yZGVyZWRBdHRyaWJ1dGVzRW51bWVyYXRvciA9IG51
bGw7DQoJCX0NCg0KCQlwcml2YXRlIGludCBQZWVrQ2hhciAoKQ0KCQl7DQoJ
CQlpZiAoY2FuX3NlZWspDQoJCQkJcmV0dXJuIHJlYWRlci5QZWVrICgpOw0K
DQoJCQlpZiAoaGFzX3BlZWspDQoJCQkJcmV0dXJuIHBlZWtfY2hhcjsNCg0K
CQkJcGVla19jaGFyID0gcmVhZGVyLlJlYWQgKCk7DQoJCQloYXNfcGVlayA9
IHRydWU7DQoJCQlyZXR1cm4gcGVla19jaGFyOw0KCQl9DQoNCgkJcHJpdmF0
ZSBpbnQgUmVhZENoYXIgKCkNCgkJew0KCQkJaW50IGNoOw0KCQkJaWYgKGhh
c19wZWVrKSB7DQoJCQkJY2ggPSBwZWVrX2NoYXI7DQoJCQkJaGFzX3BlZWsg
PSBmYWxzZTsNCgkJCX0gZWxzZSB7DQoJCQkJY2ggPSByZWFkZXIuUmVhZCAo
KTsNCgkJCX0NCg0KCQkJaWYgKGNoID09ICdcbicpIHsNCgkJCQlsaW5lKys7
DQoJCQkJY29sdW1uID0gMTsNCgkJCX0gZWxzZSB7DQoJCQkJY29sdW1uKys7
DQoJCQl9DQoJCQlpZiAoc2F2ZVRvWG1sQnVmZmVyKSB7DQoJCQkJeG1sQnVm
ZmVyLkFwcGVuZCAoKGNoYXIpIGNoKTsNCgkJCX0NCgkJCWN1cnJlbnRUYWcu
QXBwZW5kICgoY2hhcikgY2gpOw0KCQkJcmV0dXJuIGNoOw0KCQl9DQoNCgkJ
Ly8gVGhpcyBzaG91bGQgcmVhbGx5IGtlZXAgdHJhY2sgb2Ygc29tZSBzdGF0
ZSBzbw0KCQkvLyB0aGF0IGl0J3Mgbm90IHBvc3NpYmxlIHRvIGhhdmUgbW9y
ZSB0aGFuIG9uZSBkb2N1bWVudA0KCQkvLyBlbGVtZW50IG9yIHRleHQgb3V0
c2lkZSBvZiB0aGUgZG9jdW1lbnQgZWxlbWVudC4NCgkJcHJpdmF0ZSBib29s
IFJlYWRDb250ZW50ICgpDQoJCXsNCgkJCWN1cnJlbnRUYWcuTGVuZ3RoID0g
MDsNCgkJCWlmIChwb3BTY29wZSkgew0KCQkJCXBhcnNlckNvbnRleHQuTmFt
ZXNwYWNlTWFuYWdlci5Qb3BTY29wZSAoKTsNCgkJCQlwb3BTY29wZSA9IGZh
bHNlOw0KCQkJfQ0KDQoJCQlpZiAocmV0dXJuRW50aXR5UmVmZXJlbmNlKSB7
DQoJCQkJU2V0RW50aXR5UmVmZXJlbmNlUHJvcGVydGllcyAoKTsNCgkJCX0g
ZWxzZSB7DQogICAgCQkJc3dpdGNoIChQZWVrQ2hhciAoKSkNCgkJCQl7DQoJ
CQkJY2FzZSAnPCc6DQoJCQkJCVJlYWRDaGFyICgpOw0KCQkJCQlSZWFkVGFn
ICgpOw0KCQkJCQlicmVhazsNCgkJCQljYXNlICdccic6DQoJCQkJCWlmICh3
aGl0ZXNwYWNlSGFuZGxpbmcgPT0gV2hpdGVzcGFjZUhhbmRsaW5nLkFsbCB8
fA0KCQkJCQkgICAgd2hpdGVzcGFjZUhhbmRsaW5nID09IFdoaXRlc3BhY2VI
YW5kbGluZy5TaWduaWZpY2FudCkNCgkJCQkJCXJldHVybiBSZWFkV2hpdGVz
cGFjZSAoKTsNCg0KCQkJCQlSZWFkQ2hhciAoKTsNCgkJCQkJcmV0dXJuIFJl
YWRDb250ZW50ICgpOw0KCQkJCWNhc2UgJ1xuJzoNCgkJCQkJaWYgKHdoaXRl
c3BhY2VIYW5kbGluZyA9PSBXaGl0ZXNwYWNlSGFuZGxpbmcuQWxsIHx8DQoJ
CQkJCSAgICB3aGl0ZXNwYWNlSGFuZGxpbmcgPT0gV2hpdGVzcGFjZUhhbmRs
aW5nLlNpZ25pZmljYW50KQ0KCQkJCQkJcmV0dXJuIFJlYWRXaGl0ZXNwYWNl
ICgpOw0KDQoJCQkJCVJlYWRDaGFyICgpOw0KCQkJCQlyZXR1cm4gUmVhZENv
bnRlbnQgKCk7DQoJCQkJY2FzZSAnICc6DQoJCQkJCWlmICh3aGl0ZXNwYWNl
SGFuZGxpbmcgPT0gV2hpdGVzcGFjZUhhbmRsaW5nLkFsbCB8fA0KCQkJCQkg
ICAgd2hpdGVzcGFjZUhhbmRsaW5nID09IFdoaXRlc3BhY2VIYW5kbGluZy5T
aWduaWZpY2FudCkNCgkJCQkJCXJldHVybiBSZWFkV2hpdGVzcGFjZSAoKTsN
Cg0KCQkJCQlTa2lwV2hpdGVzcGFjZSAoKTsNCgkJCQkJcmV0dXJuIFJlYWRD
b250ZW50ICgpOw0KCQkJCWNhc2UgLTE6DQoJCQkJCXJlYWRTdGF0ZSA9IFJl
YWRTdGF0ZS5FbmRPZkZpbGU7DQoJCQkJCVNldFByb3BlcnRpZXMgKA0KCQkJ
CQkJWG1sTm9kZVR5cGUuTm9uZSwgLy8gbm9kZVR5cGUNCgkJCQkJCVN0cmlu
Zy5FbXB0eSwgLy8gbmFtZQ0KCQkJCQkJZmFsc2UsIC8vIGlzRW1wdHlFbGVt
ZW50DQoJCQkJCQlTdHJpbmcuRW1wdHksIC8vIHZhbHVlDQoJCQkJCQl0cnVl
IC8vIGNsZWFyQXR0cmlidXRlcw0KCQkJCQkpOw0KCQkJCQlicmVhazsNCgkJ
CQlkZWZhdWx0Og0KCQkJCQlSZWFkVGV4dCAodHJ1ZSk7DQoJCQkJCWJyZWFr
Ow0KCQkJCX0NCgkJCX0NCgkJCXJldHVybiB0aGlzLlJlYWRTdGF0ZSAhPSBS
ZWFkU3RhdGUuRW5kT2ZGaWxlOw0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIFNl
dEVudGl0eVJlZmVyZW5jZVByb3BlcnRpZXMgKCkNCgkJew0KCQkJU2V0UHJv
cGVydGllcyAoDQoJCQkJWG1sTm9kZVR5cGUuRW50aXR5UmVmZXJlbmNlLCAv
LyBub2RlVHlwZQ0KCQkJCWVudGl0eVJlZmVyZW5jZU5hbWUsIC8vIG5hbWUN
CgkJCQlmYWxzZSwgLy8gaXNFbXB0eUVsZW1lbnQNCgkJCQlTdHJpbmcuRW1w
dHksIC8vIHZhbHVlDQoJCQkJdHJ1ZSAvLyBjbGVhckF0dHJpYnV0ZXMNCgkJ
CSk7DQoNCgkJCXJldHVybkVudGl0eVJlZmVyZW5jZSA9IGZhbHNlOw0KCQkJ
ZW50aXR5UmVmZXJlbmNlTmFtZSA9IFN0cmluZy5FbXB0eTsNCgkJfQ0KDQoJ
CS8vIFRoZSBsZWFkaW5nICc8JyBoYXMgYWxyZWFkeSBiZWVuIGNvbnN1bWVk
Lg0KCQlwcml2YXRlIHZvaWQgUmVhZFRhZyAoKQ0KCQl7DQoJCQlzd2l0Y2gg
KFBlZWtDaGFyICgpKQ0KCQkJew0KCQkJY2FzZSAnLyc6DQoJCQkJUmVhZENo
YXIgKCk7DQoJCQkJUmVhZEVuZFRhZyAoKTsNCgkJCQlicmVhazsNCgkJCWNh
c2UgJz8nOg0KCQkJCVJlYWRDaGFyICgpOw0KCQkJCVJlYWRQcm9jZXNzaW5n
SW5zdHJ1Y3Rpb24gKCk7DQoJCQkJYnJlYWs7DQoJCQljYXNlICchJzoNCgkJ
CQlSZWFkQ2hhciAoKTsNCgkJCQlSZWFkRGVjbGFyYXRpb24gKCk7DQoJCQkJ
YnJlYWs7DQoJCQlkZWZhdWx0Og0KCQkJCVJlYWRTdGFydFRhZyAoKTsNCgkJ
CQlicmVhazsNCgkJCX0NCgkJfQ0KDQoJCS8vIFRoZSBsZWFkaW5nICc8JyBo
YXMgYWxyZWFkeSBiZWVuIGNvbnN1bWVkLg0KCQlwcml2YXRlIHZvaWQgUmVh
ZFN0YXJ0VGFnICgpDQoJCXsNCgkJCXBhcnNlckNvbnRleHQuTmFtZXNwYWNl
TWFuYWdlci5QdXNoU2NvcGUgKCk7DQoNCgkJCXN0cmluZyBuYW1lID0gUmVh
ZE5hbWUgKCk7DQoJCQlpZiAoaGF2ZUVudGVyZWREb2N1bWVudCAmJiBlbGVt
ZW50U3RhY2suQ291bnQgPT0gMCkNCgkJCQl0aHJvdyBSZWFkZXJFcnJvcigi
ZG9jdW1lbnQgaGFzIHRlcm1pbmF0ZWQsIGNhbm5vdCBvcGVuIG5ldyBlbGVt
ZW50Iik7DQoNCgkJCWhhdmVFbnRlcmVkRG9jdW1lbnQgPSB0cnVlOw0KCQkJ
U2tpcFdoaXRlc3BhY2UgKCk7DQoNCgkJCWJvb2wgaXNFbXB0eUVsZW1lbnQg
PSBmYWxzZTsNCg0KCQkJQ2xlYXJBdHRyaWJ1dGVzICgpOw0KDQoJCQlpZiAo
WG1sQ2hhci5Jc0ZpcnN0TmFtZUNoYXIgKFBlZWtDaGFyICgpKSkNCgkJCQlS
ZWFkQXR0cmlidXRlcyAoKTsNCg0KCQkJaWYgKFBlZWtDaGFyICgpID09ICcv
Jykgew0KCQkJCVJlYWRDaGFyICgpOw0KCQkJCWlzRW1wdHlFbGVtZW50ID0g
dHJ1ZTsNCgkJCQlkZXB0aERvd24gPSB0cnVlOw0KCQkJCXBvcFNjb3BlID0g
dHJ1ZTsNCgkJCX0NCgkJCWVsc2UNCgkJCQllbGVtZW50U3RhY2suUHVzaChu
YW1lKTsNCg0KCQkJRXhwZWN0ICgnPicpOw0KDQoJCQlTZXRQcm9wZXJ0aWVz
ICgNCgkJCQlYbWxOb2RlVHlwZS5FbGVtZW50LCAvLyBub2RlVHlwZQ0KCQkJ
CW5hbWUsIC8vIG5hbWUNCgkJCQlpc0VtcHR5RWxlbWVudCwgLy8gaXNFbXB0
eUVsZW1lbnQNCgkJCQlTdHJpbmcuRW1wdHksIC8vIHZhbHVlDQoJCQkJZmFs
c2UgLy8gY2xlYXJBdHRyaWJ1dGVzDQoJCQkpOw0KDQoJCQlpZiAoIWRlcHRo
RG93bikNCgkJCQkrK2RlcHRoOw0KCQkJZWxzZQ0KCQkJCWRlcHRoRG93biA9
IGZhbHNlOw0KDQoJCX0NCg0KCQkvLyBUaGUgcmVhZGVyIGlzIHBvc2l0aW9u
ZWQgb24gdGhlIGZpcnN0IGNoYXJhY3Rlcg0KCQkvLyBvZiB0aGUgZWxlbWVu
dCdzIG5hbWUuDQoJCXByaXZhdGUgdm9pZCBSZWFkRW5kVGFnICgpDQoJCXsN
CgkJCXN0cmluZyBuYW1lID0gUmVhZE5hbWUgKCk7DQoJCQlpZiAoZWxlbWVu
dFN0YWNrLkNvdW50ID09IDApDQoJCQkJdGhyb3cgUmVhZGVyRXJyb3IoImNs
b3NpbmcgZWxlbWVudCB3aXRob3V0IG1hdGNoaW5nIG9wZW5pbmcgZWxlbWVu
dCIpOw0KCQkJaWYgKChzdHJpbmcpZWxlbWVudFN0YWNrLlBvcCgpICE9IG5h
bWUpDQoJCQkJdGhyb3cgUmVhZGVyRXJyb3IoInVubWF0Y2hlZCBjbG9zaW5n
IGVsZW1lbnQiKTsNCg0KCQkJU2tpcFdoaXRlc3BhY2UgKCk7DQoJCQlFeHBl
Y3QgKCc+Jyk7DQoNCgkJCS0tZGVwdGg7DQoNCgkJCVNldFByb3BlcnRpZXMg
KA0KCQkJCVhtbE5vZGVUeXBlLkVuZEVsZW1lbnQsIC8vIG5vZGVUeXBlDQoJ
CQkJbmFtZSwgLy8gbmFtZQ0KCQkJCWZhbHNlLCAvLyBpc0VtcHR5RWxlbWVu
dA0KCQkJCVN0cmluZy5FbXB0eSwgLy8gdmFsdWUNCgkJCQl0cnVlIC8vIGNs
ZWFyQXR0cmlidXRlcw0KCQkJKTsNCg0KCQkJcG9wU2NvcGUgPSB0cnVlOw0K
CQl9DQoNCgkJcHJpdmF0ZSB2b2lkIEFwcGVuZE5hbWVDaGFyIChpbnQgY2gp
DQoJCXsNCgkJCUNoZWNrTmFtZUNhcGFjaXR5ICgpOw0KCQkJbmFtZUJ1ZmZl
ciBbbmFtZUxlbmd0aCsrXSA9IChjaGFyKWNoOw0KCQl9DQoNCgkJcHJpdmF0
ZSB2b2lkIENoZWNrTmFtZUNhcGFjaXR5ICgpDQoJCXsNCgkJCWlmIChuYW1l
TGVuZ3RoID09IG5hbWVDYXBhY2l0eSkgew0KCQkJCW5hbWVDYXBhY2l0eSA9
IG5hbWVDYXBhY2l0eSAqIDI7DQoJCQkJY2hhciBbXSBvbGROYW1lQnVmZmVy
ID0gbmFtZUJ1ZmZlcjsNCgkJCQluYW1lQnVmZmVyID0gbmV3IGNoYXIgW25h
bWVDYXBhY2l0eV07DQoJCQkJQXJyYXkuQ29weSAob2xkTmFtZUJ1ZmZlciwg
bmFtZUJ1ZmZlciwgbmFtZUxlbmd0aCk7DQoJCQl9DQoJCX0NCg0KCQlwcml2
YXRlIHN0cmluZyBDcmVhdGVOYW1lU3RyaW5nICgpDQoJCXsNCgkJCXJldHVy
biBuZXcgU3RyaW5nIChuYW1lQnVmZmVyLCAwLCBuYW1lTGVuZ3RoKTsNCgkJ
fQ0KDQoJCXByaXZhdGUgdm9pZCBBcHBlbmRWYWx1ZUNoYXIgKGludCBjaCkN
CgkJew0KCQkJQ2hlY2tWYWx1ZUNhcGFjaXR5ICgpOw0KCQkJdmFsdWVCdWZm
ZXIgW3ZhbHVlTGVuZ3RoKytdID0gKGNoYXIpY2g7DQoJCX0NCg0KCQlwcml2
YXRlIHZvaWQgQ2hlY2tWYWx1ZUNhcGFjaXR5ICgpDQoJCXsNCgkJCWlmICh2
YWx1ZUxlbmd0aCA9PSB2YWx1ZUNhcGFjaXR5KSB7DQoJCQkJdmFsdWVDYXBh
Y2l0eSA9IHZhbHVlQ2FwYWNpdHkgKiAyOw0KCQkJCWNoYXIgW10gb2xkVmFs
dWVCdWZmZXIgPSB2YWx1ZUJ1ZmZlcjsNCgkJCQl2YWx1ZUJ1ZmZlciA9IG5l
dyBjaGFyIFt2YWx1ZUNhcGFjaXR5XTsNCgkJCQlBcnJheS5Db3B5IChvbGRW
YWx1ZUJ1ZmZlciwgdmFsdWVCdWZmZXIsIHZhbHVlTGVuZ3RoKTsNCgkJCX0N
CgkJfQ0KDQoJCXByaXZhdGUgc3RyaW5nIENyZWF0ZVZhbHVlU3RyaW5nICgp
DQoJCXsNCgkJCXJldHVybiBuZXcgU3RyaW5nICh2YWx1ZUJ1ZmZlciwgMCwg
dmFsdWVMZW5ndGgpOw0KCQl9DQoNCgkJLy8gVGhlIHJlYWRlciBpcyBwb3Np
dGlvbmVkIG9uIHRoZSBmaXJzdCBjaGFyYWN0ZXINCgkJLy8gb2YgdGhlIHRl
eHQuDQoJCXByaXZhdGUgdm9pZCBSZWFkVGV4dCAoYm9vbCBjbGVhblZhbHVl
KQ0KCQl7DQoJCQlpZiAoY2xlYW5WYWx1ZSkNCgkJCQl2YWx1ZUxlbmd0aCA9
IDA7DQoNCgkJCWludCBjaCA9IFBlZWtDaGFyICgpOw0KDQoJCQl3aGlsZSAo
Y2ggIT0gJzwnICYmIGNoICE9IC0xKSB7DQoJCQkJaWYgKGNoID09ICcmJykg
ew0KCQkJCQlSZWFkQ2hhciAoKTsNCgkJCQkJaWYgKFJlYWRSZWZlcmVuY2Ug
KGZhbHNlKSkNCgkJCQkJCWJyZWFrOw0KCQkJCX0gZWxzZQ0KCQkJCQlBcHBl
bmRWYWx1ZUNoYXIgKFJlYWRDaGFyICgpKTsNCg0KCQkJCWNoID0gUGVla0No
YXIgKCk7DQoJCQl9DQoNCgkJCWlmIChyZXR1cm5FbnRpdHlSZWZlcmVuY2Ug
JiYgdmFsdWVMZW5ndGggPT0gMCkgew0KCQkJCVNldEVudGl0eVJlZmVyZW5j
ZVByb3BlcnRpZXMgKCk7DQoJCQl9IGVsc2Ugew0KCQkJCVNldFByb3BlcnRp
ZXMgKA0KCQkJCQlYbWxOb2RlVHlwZS5UZXh0LCAvLyBub2RlVHlwZQ0KCQkJ
CQlTdHJpbmcuRW1wdHksIC8vIG5hbWUNCgkJCQkJZmFsc2UsIC8vIGlzRW1w
dHlFbGVtZW50DQoJCQkJCUNyZWF0ZVZhbHVlU3RyaW5nICgpLCAvLyB2YWx1
ZQ0KCQkJCQl0cnVlIC8vIGNsZWFyQXR0cmlidXRlcw0KCQkJCSk7DQoJCQl9
DQoJCX0NCg0KCQkvLyBUaGUgbGVhZGluZyAnJicgaGFzIGFscmVhZHkgYmVl
biBjb25zdW1lZC4NCgkJLy8gUmV0dXJucyB0cnVlIGlmIHRoZSBlbnRpdHkg
cmVmZXJlbmNlIGlzbid0IGEgc2ltcGxlDQoJCS8vIGNoYXJhY3RlciByZWZl
cmVuY2Ugb3Igb25lIG9mIHRoZSBwcmVkZWZpbmVkIGVudGl0aWVzLg0KCQkv
LyBUaGlzIGFsbG93cyB0aGUgUmVhZFRleHQgbWV0aG9kIHRvIGJyZWFrIHNv
IHRoYXQgdGhlDQoJCS8vIG5leHQgY2FsbCB0byBSZWFkIHdpbGwgcmV0dXJu
IHRoZSBFbnRpdHlSZWZlcmVuY2Ugbm9kZS4NCgkJcHJpdmF0ZSBib29sIFJl
YWRSZWZlcmVuY2UgKGJvb2wgaWdub3JlRW50aXR5UmVmZXJlbmNlcykNCgkJ
ew0KCQkJaWYgKFBlZWtDaGFyICgpID09ICcjJykgew0KCQkJCVJlYWRDaGFy
ICgpOw0KCQkJCVJlYWRDaGFyYWN0ZXJSZWZlcmVuY2UgKCk7DQoJCQl9IGVs
c2UNCgkJCQlSZWFkRW50aXR5UmVmZXJlbmNlIChpZ25vcmVFbnRpdHlSZWZl
cmVuY2VzKTsNCg0KCQkJcmV0dXJuIHJldHVybkVudGl0eVJlZmVyZW5jZTsN
CgkJfQ0KDQoJCXByaXZhdGUgdm9pZCBSZWFkQ2hhcmFjdGVyUmVmZXJlbmNl
ICgpDQoJCXsNCgkJCWludCB2YWx1ZSA9IDA7DQoNCgkJCWlmIChQZWVrQ2hh
ciAoKSA9PSAneCcpIHsNCgkJCQlSZWFkQ2hhciAoKTsNCg0KCQkJCXdoaWxl
IChQZWVrQ2hhciAoKSAhPSAnOycgJiYgUGVla0NoYXIgKCkgIT0gLTEpIHsN
CgkJCQkJaW50IGNoID0gUmVhZENoYXIgKCk7DQoNCgkJCQkJaWYgKGNoID49
ICcwJyAmJiBjaCA8PSAnOScpDQoJCQkJCQl2YWx1ZSA9ICh2YWx1ZSA8PCA0
KSArIGNoIC0gJzAnOw0KCQkJCQllbHNlIGlmIChjaCA+PSAnQScgJiYgY2gg
PD0gJ0YnKQ0KCQkJCQkJdmFsdWUgPSAodmFsdWUgPDwgNCkgKyBjaCAtICdB
JyArIDEwOw0KCQkJCQllbHNlIGlmIChjaCA+PSAnYScgJiYgY2ggPD0gJ2Yn
KQ0KCQkJCQkJdmFsdWUgPSAodmFsdWUgPDwgNCkgKyBjaCAtICdhJyArIDEw
Ow0KCQkJCQllbHNlDQoJCQkJCQl0aHJvdyBSZWFkZXJFcnJvciAoDQoJCQkJ
CQkJU3RyaW5nLkZvcm1hdCAoDQoJCQkJCQkJCSJpbnZhbGlkIGhleGFkZWNp
bWFsIGRpZ2l0OiB7MH0gKCN4ezE6WH0pIiwNCgkJCQkJCQkJKGNoYXIpY2gs
DQoJCQkJCQkJCWNoKSk7DQoJCQkJfQ0KCQkJfSBlbHNlIHsNCgkJCQl3aGls
ZSAoUGVla0NoYXIgKCkgIT0gJzsnICYmIFBlZWtDaGFyICgpICE9IC0xKSB7
DQoJCQkJCWludCBjaCA9IFJlYWRDaGFyICgpOw0KDQoJCQkJCWlmIChjaCA+
PSAnMCcgJiYgY2ggPD0gJzknKQ0KCQkJCQkJdmFsdWUgPSB2YWx1ZSAqIDEw
ICsgY2ggLSAnMCc7DQoJCQkJCWVsc2UNCgkJCQkJCXRocm93IFJlYWRlckVy
cm9yICgNCgkJCQkJCQlTdHJpbmcuRm9ybWF0ICgNCgkJCQkJCQkJImludmFs
aWQgZGVjaW1hbCBkaWdpdDogezB9ICgjeHsxOlh9KSIsDQoJCQkJCQkJCShj
aGFyKWNoLA0KCQkJCQkJCQljaCkpOw0KCQkJCX0NCgkJCX0NCg0KCQkJUmVh
ZENoYXIgKCk7IC8vICc7Jw0KDQoJCQlBcHBlbmRWYWx1ZUNoYXIgKHZhbHVl
KTsNCgkJfQ0KDQoJCXByaXZhdGUgdm9pZCBSZWFkRW50aXR5UmVmZXJlbmNl
IChib29sIGlnbm9yZUVudGl0eVJlZmVyZW5jZXMpDQoJCXsNCgkJCW5hbWVM
ZW5ndGggPSAwOw0KDQoJCQlpbnQgY2ggPSBQZWVrQ2hhciAoKTsNCg0KCQkJ
d2hpbGUgKGNoICE9ICc7JyAmJiBjaCAhPSAtMSkgew0KCQkJCUFwcGVuZE5h
bWVDaGFyIChSZWFkQ2hhciAoKSk7DQoJCQkJY2ggPSBQZWVrQ2hhciAoKTsN
CgkJCX0NCg0KCQkJRXhwZWN0ICgnOycpOw0KDQoJCQlzdHJpbmcgbmFtZSA9
IENyZWF0ZU5hbWVTdHJpbmcgKCk7DQoNCgkJCXN3aXRjaCAobmFtZSkNCgkJ
CXsNCgkJCQljYXNlICJsdCI6DQoJCQkJCUFwcGVuZFZhbHVlQ2hhciAoJzwn
KTsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSAiZ3QiOg0KCQkJCQlBcHBlbmRW
YWx1ZUNoYXIgKCc+Jyk7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgImFtcCI6
DQoJCQkJCUFwcGVuZFZhbHVlQ2hhciAoJyYnKTsNCgkJCQkJYnJlYWs7DQoJ
CQkJY2FzZSAiYXBvcyI6DQoJCQkJCUFwcGVuZFZhbHVlQ2hhciAoJ1wnJyk7
DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgInF1b3QiOg0KCQkJCQlBcHBlbmRW
YWx1ZUNoYXIgKCciJyk7DQoJCQkJCWJyZWFrOw0KCQkJCWRlZmF1bHQ6DQoJ
CQkJCWlmIChpZ25vcmVFbnRpdHlSZWZlcmVuY2VzKSB7DQoJCQkJCQlBcHBl
bmRWYWx1ZUNoYXIgKCcmJyk7DQoNCgkJCQkJCWZvcmVhY2ggKGNoYXIgY2gy
IGluIG5hbWUpIHsNCgkJCQkJCQlBcHBlbmRWYWx1ZUNoYXIgKGNoMik7DQoJ
CQkJCQl9DQoNCgkJCQkJCUFwcGVuZFZhbHVlQ2hhciAoJzsnKTsNCgkJCQkJ
fSBlbHNlIHsNCgkJCQkJCXJldHVybkVudGl0eVJlZmVyZW5jZSA9IHRydWU7
DQoJCQkJCQllbnRpdHlSZWZlcmVuY2VOYW1lID0gbmFtZTsNCgkJCQkJfQ0K
CQkJCQlicmVhazsNCgkJCX0NCgkJfQ0KDQoJCS8vIFRoZSByZWFkZXIgaXMg
cG9zaXRpb25lZCBvbiB0aGUgZmlyc3QgY2hhcmFjdGVyIG9mDQoJCS8vIHRo
ZSBhdHRyaWJ1dGUgbmFtZS4NCgkJcHJpdmF0ZSB2b2lkIFJlYWRBdHRyaWJ1
dGVzICgpDQoJCXsNCgkJCWRvIHsNCgkJCQlzdHJpbmcgbmFtZSA9IFJlYWRO
YW1lICgpOw0KCQkJCVNraXBXaGl0ZXNwYWNlICgpOw0KCQkJCUV4cGVjdCAo
Jz0nKTsNCgkJCQlTa2lwV2hpdGVzcGFjZSAoKTsNCgkJCQlzdHJpbmcgdmFs
dWUgPSBSZWFkQXR0cmlidXRlICgpOw0KCQkJCVNraXBXaGl0ZXNwYWNlICgp
Ow0KDQoJCQkJaWYgKG5hbWUgPT0gInhtbG5zIikNCgkJCQkJcGFyc2VyQ29u
dGV4dC5OYW1lc3BhY2VNYW5hZ2VyLkFkZE5hbWVzcGFjZSAoU3RyaW5nLkVt
cHR5LCBVbmVzY2FwZUF0dHJpYnV0ZVZhbHVlICh2YWx1ZSkpOw0KCQkJCWVs
c2UgaWYgKG5hbWUuU3RhcnRzV2l0aCAoInhtbG5zOiIpKQ0KCQkJCQlwYXJz
ZXJDb250ZXh0Lk5hbWVzcGFjZU1hbmFnZXIuQWRkTmFtZXNwYWNlIChuYW1l
LlN1YnN0cmluZyAoNiksIFVuZXNjYXBlQXR0cmlidXRlVmFsdWUgKHZhbHVl
KSk7DQoNCgkJCQlBZGRBdHRyaWJ1dGUgKG5hbWUsIHZhbHVlKTsNCgkJCX0g
d2hpbGUgKFBlZWtDaGFyICgpICE9ICcvJyAmJiBQZWVrQ2hhciAoKSAhPSAn
PicgJiYgUGVla0NoYXIgKCkgIT0gLTEpOw0KCQl9DQoNCgkJLy8gVGhlIHJl
YWRlciBpcyBwb3NpdGlvbmVkIG9uIHRoZSBxdW90ZSBjaGFyYWN0ZXIuDQoJ
CS8vICpLZWVwcyBxdW90ZSBjaGFyKiB0byB2YWx1ZSB0byBnZXRfUXVvdGVD
aGFyKCkgY29ycmVjdGx5Lg0KCQlwcml2YXRlIHN0cmluZyBSZWFkQXR0cmli
dXRlICgpDQoJCXsNCgkJCXZhbHVlTGVuZ3RoID0gMDsNCg0KCQkJaW50IHF1
b3RlQ2hhciA9IFJlYWRDaGFyICgpOw0KDQoJCQlpZiAocXVvdGVDaGFyICE9
ICdcJycgJiYgcXVvdGVDaGFyICE9ICdcIicpDQoJCQkJdGhyb3cgUmVhZGVy
RXJyb3IgKCJhbiBhdHRyaWJ1dGUgdmFsdWUgd2FzIG5vdCBxdW90ZWQiKTsN
Cg0KCQkJQXBwZW5kVmFsdWVDaGFyIChxdW90ZUNoYXIpOw0KDQoJCQl3aGls
ZSAoUGVla0NoYXIgKCkgIT0gcXVvdGVDaGFyKSB7DQoJCQkJaW50IGNoID0g
UmVhZENoYXIgKCk7DQoNCgkJCQlzd2l0Y2ggKGNoKQ0KCQkJCXsNCgkJCQlj
YXNlICc8JzoNCgkJCQkJdGhyb3cgUmVhZGVyRXJyb3IgKCJhdHRyaWJ1dGUg
dmFsdWVzIGNhbm5vdCBjb250YWluICc8JyIpOw0KCQkJCWNhc2UgLTE6DQoJ
CQkJCXRocm93IFJlYWRlckVycm9yICgidW5leHBlY3RlZCBlbmQgb2YgZmls
ZSBpbiBhbiBhdHRyaWJ1dGUgdmFsdWUiKTsNCgkJCQlkZWZhdWx0Og0KCQkJ
CQlBcHBlbmRWYWx1ZUNoYXIgKGNoKTsNCgkJCQkJYnJlYWs7DQoJCQkJfQ0K
CQkJfQ0KDQoJCQlSZWFkQ2hhciAoKTsgLy8gcXVvdGVDaGFyDQoJCQlBcHBl
bmRWYWx1ZUNoYXIgKHF1b3RlQ2hhcik7DQoNCgkJCXJldHVybiBDcmVhdGVW
YWx1ZVN0cmluZyAoKTsNCgkJfQ0KDQoJCS8vIFRoZSByZWFkZXIgaXMgcG9z
aXRpb25lZCBvbiB0aGUgZmlyc3QgY2hhcmFjdGVyDQoJCS8vIG9mIHRoZSB0
YXJnZXQuDQoJCS8vDQoJCS8vIE5vdyBpdCBhbHNvIHJlYWRzIFhtbERlY2xh
cmF0aW9uLCB0aGlzIG1ldGhvZCBuYW1lIGJlY2FtZSBpbXByb3Blci4uLg0K
CQlwcml2YXRlIHZvaWQgUmVhZFByb2Nlc3NpbmdJbnN0cnVjdGlvbiAoKQ0K
CQl7DQoJCQlzdHJpbmcgdGFyZ2V0ID0gUmVhZE5hbWUgKCk7DQoJCQlTa2lw
V2hpdGVzcGFjZSAoKTsNCg0KCQkJdmFsdWVMZW5ndGggPSAwOw0KDQoJCQl3
aGlsZSAoUGVla0NoYXIgKCkgIT0gLTEpIHsNCgkJCQlpbnQgY2ggPSBSZWFk
Q2hhciAoKTsNCg0KCQkJCWlmIChjaCA9PSAnPycgJiYgUGVla0NoYXIgKCkg
PT0gJz4nKSB7DQoJCQkJCVJlYWRDaGFyICgpOw0KCQkJCQlicmVhazsNCgkJ
CQl9DQoNCgkJCQlBcHBlbmRWYWx1ZUNoYXIgKChjaGFyKWNoKTsNCgkJCX0N
Cg0KLyogZm9yIGZ1dHVyZSB1c2UNCgkJCWlmKHRhcmdldCA9PSAieG1sIikg
JiYgcGFyc2VyQ29udGV4dC5JbnB1dFN0YXRlICE9IFhtbFBhcnNlcklucHV0
U3RhdGUuU3RhcnQpDQoJCQkJdGhyb3cgbmV3IFhtbEV4Y2VwdGlvbigiWG1s
IGRlY2xhcmF0aW9uIGlzIG5vdCBhbGxvd2VkIGhlcmUuIik7DQoJCQllbHNl
IHsNCgkJCQlwYXJzZXJDb250ZXh0LklucHV0U3RhdGUgPSBYbWxQYXJzZXJJ
bnB1dFN0YXRlLkRURDsgLy9mb3IgZnV0dXJlIHVzZQ0KCQkJfQ0KKi8NCgkJ
CVNldFByb3BlcnRpZXMgKA0KCQkJCXRhcmdldCA9PSAieG1sIiA/DQoJCQkJ
WG1sTm9kZVR5cGUuWG1sRGVjbGFyYXRpb24gOg0KCQkJCVhtbE5vZGVUeXBl
LlByb2Nlc3NpbmdJbnN0cnVjdGlvbiwgLy8gbm9kZVR5cGUNCgkJCQl0YXJn
ZXQsIC8vIG5hbWUNCgkJCQlmYWxzZSwgLy8gaXNFbXB0eUVsZW1lbnQNCgkJ
CQlDcmVhdGVWYWx1ZVN0cmluZyAoKSwgLy8gdmFsdWUNCgkJCQl0cnVlIC8v
IGNsZWFyQXR0cmlidXRlcw0KCQkJKTsNCgkJfQ0KDQoJCS8vIFRoZSByZWFk
ZXIgaXMgcG9zaXRpb25lZCBvbiB0aGUgZmlyc3QgY2hhcmFjdGVyIGFmdGVy
DQoJCS8vIHRoZSBsZWFkaW5nICc8IScuDQoJCXByaXZhdGUgdm9pZCBSZWFk
RGVjbGFyYXRpb24gKCkNCgkJew0KCQkJaW50IGNoID0gUGVla0NoYXIgKCk7
DQoNCgkJCXN3aXRjaCAoY2gpDQoJCQl7DQoJCQljYXNlICctJzoNCgkJCQlF
eHBlY3QgKCItLSIpOw0KCQkJCVJlYWRDb21tZW50ICgpOw0KCQkJCWJyZWFr
Ow0KCQkJY2FzZSAnWyc6DQoJCQkJUmVhZENoYXIgKCk7DQoJCQkJRXhwZWN0
ICgiQ0RBVEFbIik7DQoJCQkJUmVhZENEQVRBICgpOw0KCQkJCWJyZWFrOw0K
CQkJY2FzZSAnRCc6DQoJCQkJRXhwZWN0ICgiRE9DVFlQRSIpOw0KCQkJCVJl
YWREb2N0eXBlRGVjbCAoKTsNCgkJCQlicmVhazsNCgkJCX0NCgkJfQ0KDQoJ
CS8vIFRoZSByZWFkZXIgaXMgcG9zaXRpb25lZCBvbiB0aGUgZmlyc3QgY2hh
cmFjdGVyIGFmdGVyDQoJCS8vIHRoZSBsZWFkaW5nICc8IS0tJy4NCgkJcHJp
dmF0ZSB2b2lkIFJlYWRDb21tZW50ICgpDQoJCXsNCgkJCXZhbHVlTGVuZ3Ro
ID0gMDsNCg0KCQkJd2hpbGUgKFBlZWtDaGFyICgpICE9IC0xKSB7DQoJCQkJ
aW50IGNoID0gUmVhZENoYXIgKCk7DQoNCgkJCQlpZiAoY2ggPT0gJy0nICYm
IFBlZWtDaGFyICgpID09ICctJykgew0KCQkJCQlSZWFkQ2hhciAoKTsNCg0K
CQkJCQlpZiAoUGVla0NoYXIgKCkgIT0gJz4nKQ0KCQkJCQkJdGhyb3cgUmVh
ZGVyRXJyb3IgKCJjb21tZW50cyBjYW5ub3QgY29udGFpbiAnLS0nIik7DQoN
CgkJCQkJUmVhZENoYXIgKCk7DQoJCQkJCWJyZWFrOw0KCQkJCX0NCg0KCQkJ
CUFwcGVuZFZhbHVlQ2hhciAoKGNoYXIpY2gpOw0KCQkJfQ0KDQoJCQlTZXRQ
cm9wZXJ0aWVzICgNCgkJCQlYbWxOb2RlVHlwZS5Db21tZW50LCAvLyBub2Rl
VHlwZQ0KCQkJCVN0cmluZy5FbXB0eSwgLy8gbmFtZQ0KCQkJCWZhbHNlLCAv
LyBpc0VtcHR5RWxlbWVudA0KCQkJCUNyZWF0ZVZhbHVlU3RyaW5nICgpLCAv
LyB2YWx1ZQ0KCQkJCXRydWUgLy8gY2xlYXJBdHRyaWJ1dGVzDQoJCQkpOw0K
CQl9DQoNCgkJLy8gVGhlIHJlYWRlciBpcyBwb3NpdGlvbmVkIG9uIHRoZSBm
aXJzdCBjaGFyYWN0ZXIgYWZ0ZXINCgkJLy8gdGhlIGxlYWRpbmcgJzwhW0NE
QVRBWycuDQoJCXByaXZhdGUgdm9pZCBSZWFkQ0RBVEEgKCkNCgkJew0KCQkJ
dmFsdWVMZW5ndGggPSAwOw0KDQoJCQl3aGlsZSAoUGVla0NoYXIgKCkgIT0g
LTEpIHsNCgkJCQlpbnQgY2ggPSBSZWFkQ2hhciAoKTsNCg0KCQkJCWlmIChj
aCA9PSAnXScgJiYgUGVla0NoYXIgKCkgPT0gJ10nKSB7DQoJCQkJCWNoID0g
UmVhZENoYXIgKCk7IC8vICddJw0KDQoJCQkJCWlmIChQZWVrQ2hhciAoKSA9
PSAnPicpIHsNCgkJCQkJCVJlYWRDaGFyICgpOyAvLyAnPicNCgkJCQkJCWJy
ZWFrOw0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJQXBwZW5kVmFsdWVDaGFyICgn
XScpOw0KCQkJCQkJQXBwZW5kVmFsdWVDaGFyICgnXScpOw0KCQkJCQkJY2gg
PSBSZWFkQ2hhciAoKTsNCgkJCQkJfQ0KCQkJCX0NCg0KCQkJCUFwcGVuZFZh
bHVlQ2hhciAoKGNoYXIpY2gpOw0KCQkJfQ0KDQoJCQlTZXRQcm9wZXJ0aWVz
ICgNCgkJCQlYbWxOb2RlVHlwZS5DREFUQSwgLy8gbm9kZVR5cGUNCgkJCQlT
dHJpbmcuRW1wdHksIC8vIG5hbWUNCgkJCQlmYWxzZSwgLy8gaXNFbXB0eUVs
ZW1lbnQNCgkJCQlDcmVhdGVWYWx1ZVN0cmluZyAoKSwgLy8gdmFsdWUNCgkJ
CQl0cnVlIC8vIGNsZWFyQXR0cmlidXRlcw0KCQkJKTsNCgkJfQ0KDQoJCS8v
IFRoZSByZWFkZXIgaXMgcG9zaXRpb25lZCBvbiB0aGUgZmlyc3QgY2hhcmFj
dGVyIGFmdGVyDQoJCS8vIHRoZSBsZWFkaW5nICc8IURPQ1RZUEUnLg0KCQlw
cml2YXRlIHZvaWQgUmVhZERvY3R5cGVEZWNsICgpDQoJCXsNCgkJCXN0cmlu
ZyBkb2N0eXBlTmFtZSA9IG51bGw7DQoJCQlzdHJpbmcgcHVibGljSWQgPSBT
dHJpbmcuRW1wdHk7DQoJCQlzdHJpbmcgc3lzdGVtSWQgPSBTdHJpbmcuRW1w
dHk7DQoNCgkJCVNraXBXaGl0ZXNwYWNlICgpOw0KCQkJZG9jdHlwZU5hbWUg
PSBSZWFkTmFtZSAoKTsNCgkJCVNraXBXaGl0ZXNwYWNlICgpOw0KCQkJeG1s
QnVmZmVyLkxlbmd0aCA9IDA7DQoJCQlzd2l0Y2goUGVla0NoYXIgKCkpDQoJ
CQl7DQoJCQljYXNlICdTJzoNCgkJCQlzeXN0ZW1JZCA9IFJlYWRTeXN0ZW1M
aXRlcmFsICh0cnVlKTsNCgkJCQlicmVhazsNCgkJCWNhc2UgJ1AnOg0KCQkJ
CXB1YmxpY0lkID0gUmVhZFB1YmlkTGl0ZXJhbCAoKTsNCgkJCQlTa2lwV2hp
dGVzcGFjZSAoKTsNCgkJCQlzeXN0ZW1JZCA9IFJlYWRTeXN0ZW1MaXRlcmFs
IChmYWxzZSk7DQoJCQkJYnJlYWs7DQoJCQl9DQoJCQlTa2lwV2hpdGVzcGFj
ZSAoKTsNCg0KDQoJCQlpZihQZWVrQ2hhciAoKSA9PSAnWycpDQoJCQl7DQoJ
CQkJLy8gcmVhZCBtYXJrdXBkZWNsIGV0Yy4gb3IgZW5kIG9mIGRlY2wNCgkJ
CQlSZWFkQ2hhciAoKTsNCgkJCQl4bWxCdWZmZXIuTGVuZ3RoID0gMDsNCgkJ
CQlzYXZlVG9YbWxCdWZmZXIgPSB0cnVlOw0KCQkJCWRvIHsNCgkJCQkJUmVh
ZERUREludGVybmFsU3Vic2V0ICgpOw0KCQkJCX0gd2hpbGUobm9kZVR5cGUg
IT0gWG1sTm9kZVR5cGUuTm9uZSk7DQoJCQkJeG1sQnVmZmVyLlJlbW92ZSAo
eG1sQnVmZmVyLkxlbmd0aCAtIDEsIDEpOwkvLyBjdXQgb2ZmICddJw0KCQkJ
CXNhdmVUb1htbEJ1ZmZlciA9IGZhbHNlOw0KCQkJfQ0KCQkJLy8gZW5kIG9m
IERPQ1RZUEUgZGVjbC4NCgkJCVNraXBXaGl0ZXNwYWNlICgpOw0KCQkJRXhw
ZWN0ICgnPicpOw0KDQoJCQlwYXJzZXJDb250ZXh0LkludGVybmFsU3Vic2V0
ID0geG1sQnVmZmVyLlRvU3RyaW5nICgpOw0KDQoJCQkvLyBzZXQgcHJvcGVy
dGllcyBmb3IgPCFET0NUWVBFPiBub2RlDQoJCQlTZXRQcm9wZXJ0aWVzICgN
CgkJCQlYbWxOb2RlVHlwZS5Eb2N1bWVudFR5cGUsIC8vIG5vZGVUeXBlDQoJ
CQkJZG9jdHlwZU5hbWUsIC8vIG5hbWUNCgkJCQlmYWxzZSwgLy8gaXNFbXB0
eUVsZW1lbnQNCgkJCQlwYXJzZXJDb250ZXh0LkludGVybmFsU3Vic2V0LCAv
LyB2YWx1ZQ0KCQkJCXRydWUgLy8gY2xlYXJBdHRyaWJ1dGVzDQoJCQkJKTsN
CgkJfQ0KDQoJCS8vIFJlYWQgYW55IG9uZSBvZiBmb2xsb3dpbmc6DQoJCS8v
ICAgZWxlbWVudGRlY2wsIEF0dGxpc3REZWNsLCBFbnRpdHlEZWNsLCBOb3Rh
dGlvbkRlY2wsDQoJCS8vICAgUEksIENvbW1lbnQsIFBhcmFtZXRlciBFbnRp
dHksIG9yIGRvY3R5cGUgdGVybWluYXRpb24gY2hhcignXScpDQoJCS8vDQoJ
CS8vIHJldHVybnMgYSBub2RlIG9mIHNvbWUgbm9kZVR5cGUgb3IgbnVsbCwg
c2V0dGluZyBub2RlVHlwZS4NCgkJLy8JIChpZiBOb25lIHRoZW4gJ10nIHdh
cyBmb3VuZC4pDQoJCXByaXZhdGUgdm9pZCBSZWFkRFRESW50ZXJuYWxTdWJz
ZXQoKQ0KCQl7DQoJCQlTa2lwV2hpdGVzcGFjZSAoKTsNCgkJCXN3aXRjaChS
ZWFkQ2hhciAoKSkNCgkJCXsNCgkJCWNhc2UgJ10nOg0KCQkJCW5vZGVUeXBl
ID0gWG1sTm9kZVR5cGUuTm9uZTsNCgkJCQlicmVhazsNCgkJCWNhc2UgJyUn
Og0KCQkJCXN0cmluZyBwZU5hbWUgPSBSZWFkTmFtZSAoKTsNCgkJCQlFeHBl
Y3QgKCc7Jyk7DQoJCQkJbm9kZVR5cGUgPSBYbWxOb2RlVHlwZS5FbnRpdHlS
ZWZlcmVuY2U7CS8vIEl0J3MgY2hhdGluZyBhIGJpdDstKQ0KCQkJCWJyZWFr
Ow0KCQkJY2FzZSAnPCc6DQoJCQkJc3dpdGNoKFJlYWRDaGFyICgpKQ0KCQkJ
CXsNCgkJCQljYXNlICc/JzoNCgkJCQkJUmVhZFByb2Nlc3NpbmdJbnN0cnVj
dGlvbiAoKTsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSAnISc6DQoJCQkJCXN3
aXRjaChSZWFkQ2hhciAoKSkNCgkJCQkJew0KCQkJCQljYXNlICctJzoNCgkJ
CQkJCUV4cGVjdCAoJy0nKTsNCgkJCQkJCVJlYWRDb21tZW50ICgpOw0KCQkJ
CQkJYnJlYWs7DQoJCQkJCWNhc2UgJ0UnOg0KCQkJCQkJc3dpdGNoKFJlYWRD
aGFyICgpKQ0KCQkJCQkJew0KCQkJCQkJY2FzZSAnTic6DQoJCQkJCQkJRXhw
ZWN0ICgiVElUWSIpOw0KCQkJCQkJCVJlYWRFbnRpdHlEZWNsICgpOw0KCQkJ
CQkJCWJyZWFrOw0KCQkJCQkJY2FzZSAnTCc6DQoJCQkJCQkJRXhwZWN0ICgi
RU1FTlQiKTsNCgkJCQkJCQlSZWFkRWxlbWVudERlY2wgKCk7DQoJCQkJCQkJ
YnJlYWs7DQoJCQkJCQlkZWZhdWx0Og0KCQkJCQkJCXRocm93IFJlYWRlckVy
cm9yICgiU3ludGF4IEVycm9yIGFmdGVyICc8IUUnIChFTEVNRU5UIG9yIEVO
VElUWSBtdXN0IGJlIGZvdW5kKSIpOw0KCQkJCQkJfQ0KCQkJCQkJYnJlYWs7
DQoJCQkJCWNhc2UgJ0EnOg0KCQkJCQkJRXhwZWN0ICgiVFRMSVNUIik7DQoJ
CQkJCQlSZWFkQXR0TGlzdERlY2wgKCk7DQoJCQkJCQlicmVhazsNCgkJCQkJ
Y2FzZSAnTic6DQoJCQkJCQlFeHBlY3QgKCJPVEFUSU9OIik7DQoJCQkJCQlS
ZWFkTm90YXRpb25EZWNsICgpOw0KCQkJCQkJYnJlYWs7DQoJCQkJCWRlZmF1
bHQ6DQoJCQkJCQl0aHJvdyBSZWFkZXJFcnJvciAoIlN5bnRheCBFcnJvciBh
ZnRlciAnPCEnIGNoYXJhY3RlcnMuIik7DQoJCQkJCX0NCgkJCQkJYnJlYWs7
DQoJCQkJZGVmYXVsdDoNCgkJCQkJdGhyb3cgUmVhZGVyRXJyb3IgKCJTeW50
YXggRXJyb3IgYWZ0ZXIgJzwnIGNoYXJhY3Rlci4iKTsNCgkJCQl9DQoJCQkJ
YnJlYWs7DQoJCQlkZWZhdWx0Og0KCQkJCXRocm93IFJlYWRlckVycm9yICgi
U3ludGF4IEVycm9yIGluc2lkZSBkb2N0eXBlZGVjbCBtYXJrdXAuIik7DQoJ
CQl9DQoJCX0NCg0KCQkvLyBUaGUgcmVhZGVyIGlzIHBvc2l0aW9uZWQgb24g
dGhlIGhlYWQgb2YgdGhlIG5hbWUuDQoJCXByaXZhdGUgdm9pZCBSZWFkRWxl
bWVudERlY2woKQ0KCQl7DQoJCQl3aGlsZShSZWFkQ2hhciAoKSAhPSAnPicp
Ow0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIFJlYWRFbnRpdHlEZWNsKCkNCgkJ
ew0KCQkJd2hpbGUoUmVhZENoYXIgKCkgIT0gJz4nKTsNCgkJfQ0KDQoJCXBy
aXZhdGUgdm9pZCBSZWFkQXR0TGlzdERlY2woKQ0KCQl7DQoJCQl3aGlsZShS
ZWFkQ2hhciAoKSAhPSAnPicpOw0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIFJl
YWROb3RhdGlvbkRlY2woKQ0KCQl7DQoJCQl3aGlsZShSZWFkQ2hhciAoKSAh
PSAnPicpOw0KCQl9DQoJCQ0KCQkvLyBUaGUgcmVhZGVyIGlzIHBvc2l0aW9u
ZWQgb24gdGhlIGZpcnN0ICdTJyBvZiAiU1lTVEVNIi4NCgkJcHJpdmF0ZSBz
dHJpbmcgUmVhZFN5c3RlbUxpdGVyYWwgKGJvb2wgZXhwZWN0U1lTVEVNKQ0K
CQl7DQoJCQlpZihleHBlY3RTWVNURU0pDQoJCQkJRXhwZWN0ICgiU1lTVEVN
Iik7DQoJCQlTa2lwV2hpdGVzcGFjZSAoKTsNCgkJCWludCBxdW90ZUNoYXIg
PSBSZWFkQ2hhciAoKTsJLy8gYXBvcyBvciBxdW90DQoJCQl4bWxCdWZmZXIu
TGVuZ3RoID0gMDsNCgkJCXNhdmVUb1htbEJ1ZmZlciA9IHRydWU7DQoJCQlp
bnQgYyA9IDA7DQoJCQl3aGlsZShjICE9IHF1b3RlQ2hhcikgew0KCQkJCWMg
PSBSZWFkQ2hhciAoKTsNCgkJCQlpZihjIDwgMCkgdGhyb3cgUmVhZGVyRXJy
b3IgKCJVbmV4cGVjdGVkIGVuZCBvZiBzdHJlYW0gaW4gRXh0ZXJuYWxJRC4i
KTsNCgkJCX0NCgkJCXNhdmVUb1htbEJ1ZmZlciA9IGZhbHNlOw0KCQkJeG1s
QnVmZmVyLlJlbW92ZSAoeG1sQnVmZmVyLkxlbmd0aC0xLCAxKTsJLy8gY3V0
IHF1b3RlQ2hhcg0KCQkJcmV0dXJuIHhtbEJ1ZmZlci5Ub1N0cmluZyAoKTsN
CgkJfQ0KDQoJCXByaXZhdGUgc3RyaW5nIFJlYWRQdWJpZExpdGVyYWwoKQ0K
CQl7DQoJCQlFeHBlY3QgKCJQVUJMSUMiKTsNCgkJCVNraXBXaGl0ZXNwYWNl
ICgpOw0KCQkJaW50IHF1b3RlQ2hhciA9IFJlYWRDaGFyICgpOw0KCQkJeG1s
QnVmZmVyLkxlbmd0aCA9IDA7DQoJCQlzYXZlVG9YbWxCdWZmZXIgPSB0cnVl
Ow0KCQkJaW50IGMgPSAwOw0KCQkJd2hpbGUoYyAhPSBxdW90ZUNoYXIpDQoJ
CQl7DQoJCQkJYyA9IFJlYWRDaGFyICgpOw0KCQkJCWlmKGMgPCAwKSB0aHJv
dyBSZWFkZXJFcnJvciAoIlVuZXhwZWN0ZWQgZW5kIG9mIHN0cmVhbSBpbiBF
eHRlcm5hbElELiIpOw0KCQkJCWlmKGMgIT0gcXVvdGVDaGFyICYmICFYbWxD
aGFyLklzUHViaWRDaGFyIChjKSkNCgkJCQkJdGhyb3cgUmVhZGVyRXJyb3Io
ImNoYXJhY3RlciAnIiArIChjaGFyKWMgKyAiJyBub3QgYWxsb3dlZCBmb3Ig
UFVCTElDIElEIik7DQoJCQl9DQoJCQlSZWFkQ2hhcigpOwkvLyBza2lwcyBx
dW90ZUNoYXINCgkJCXhtbEJ1ZmZlci5SZW1vdmUgKHhtbEJ1ZmZlci5MZW5n
dGgtMSwgMSk7CS8vIGN1dCBxdW90ZUNoYXINCgkJCXNhdmVUb1htbEJ1ZmZl
ciA9IGZhbHNlOw0KCQkJcmV0dXJuIHhtbEJ1ZmZlci5Ub1N0cmluZyAoKTsN
CgkJfQ0KDQoJCS8vIFRoZSByZWFkZXIgaXMgcG9zaXRpb25lZCBvbiB0aGUg
Zmlyc3QgY2hhcmFjdGVyDQoJCS8vIG9mIHRoZSBuYW1lLg0KCQlwcml2YXRl
IHN0cmluZyBSZWFkTmFtZSAoKQ0KCQl7DQoJCQlpZiAoIVhtbENoYXIuSXNG
aXJzdE5hbWVDaGFyIChQZWVrQ2hhciAoKSkpDQoJCQkJdGhyb3cgUmVhZGVy
RXJyb3IgKCJhIG5hbWUgZGlkIG5vdCBzdGFydCB3aXRoIGEgbGVnYWwgY2hh
cmFjdGVyIik7DQoNCgkJCW5hbWVMZW5ndGggPSAwOw0KDQoJCQlBcHBlbmRO
YW1lQ2hhciAoUmVhZENoYXIgKCkpOw0KDQoJCQl3aGlsZSAoWG1sQ2hhci5J
c05hbWVDaGFyIChQZWVrQ2hhciAoKSkpIHsNCgkJCQlBcHBlbmROYW1lQ2hh
ciAoUmVhZENoYXIgKCkpOw0KCQkJfQ0KDQoJCQlyZXR1cm4gQ3JlYXRlTmFt
ZVN0cmluZyAoKTsNCgkJfQ0KDQoJCS8vIFJlYWQgdGhlIG5leHQgY2hhcmFj
dGVyIGFuZCBjb21wYXJlIGl0IGFnYWluc3QgdGhlDQoJCS8vIHNwZWNpZmll
ZCBjaGFyYWN0ZXIuDQoJCXByaXZhdGUgdm9pZCBFeHBlY3QgKGludCBleHBl
Y3RlZCkNCgkJew0KCQkJaW50IGNoID0gUmVhZENoYXIgKCk7DQoNCgkJCWlm
IChjaCAhPSBleHBlY3RlZCkgew0KCQkJCXRocm93IFJlYWRlckVycm9yICgN
CgkJCQkJU3RyaW5nLkZvcm1hdCAoDQoJCQkJCQkiZXhwZWN0ZWQgJ3swfScg
KHsxOlh9KSBidXQgZm91bmQgJ3syfScgKHszOlh9KSIsDQoJCQkJCQkoY2hh
cilleHBlY3RlZCwNCgkJCQkJCWV4cGVjdGVkLA0KCQkJCQkJKGNoYXIpY2gs
DQoJCQkJCQljaCkpOw0KCQkJfQ0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIEV4
cGVjdCAoc3RyaW5nIGV4cGVjdGVkKQ0KCQl7DQoJCQlpbnQgbGVuID0gZXhw
ZWN0ZWQuTGVuZ3RoOw0KCQkJZm9yKGludCBpPTA7IGk8IGxlbjsgaSsrKQ0K
CQkJCUV4cGVjdCAoZXhwZWN0ZWRbaV0pOw0KCQl9DQoNCgkJLy8gRG9lcyBu
b3QgY29uc3VtZSB0aGUgZmlyc3Qgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVy
Lg0KCQlwcml2YXRlIHZvaWQgU2tpcFdoaXRlc3BhY2UgKCkNCgkJew0KCQkJ
Ly9GSVhNRTogU2hvdWxkIG5vdCBza2lwIGlmIHdoaXRlc3BhY2VIYW5kbGlu
ZyA9PSBXaGl0ZVNwYWNlSGFuZGxpbmcuTm9uZQ0KCQkJd2hpbGUgKFhtbENo
YXIuSXNXaGl0ZXNwYWNlIChQZWVrQ2hhciAoKSkpDQoJCQkJUmVhZENoYXIg
KCk7DQoJCX0NCg0KCQlwcml2YXRlIGJvb2wgUmVhZFdoaXRlc3BhY2UgKCkN
CgkJew0KCQkJdmFsdWVMZW5ndGggPSAwOw0KCQkJaW50IGNoID0gUGVla0No
YXIgKCk7DQoJCQlkbyB7DQoJCQkJQXBwZW5kVmFsdWVDaGFyIChSZWFkQ2hh
ciAoKSk7DQoJCQl9IHdoaWxlICgoY2ggPSBQZWVrQ2hhciAoKSkgIT0gLTEg
JiYgWG1sQ2hhci5Jc1doaXRlc3BhY2UgKGNoKSk7DQoNCgkJCWlmIChjaCAh
PSAtMSAmJiBjaCAhPSAnPCcpDQoJCQkJUmVhZFRleHQgKGZhbHNlKTsNCgkJ
CWVsc2UNCgkJCQlTZXRQcm9wZXJ0aWVzIChYbWxOb2RlVHlwZS5XaGl0ZXNw
YWNlLA0KCQkJCQkgICAgICAgU3RyaW5nLkVtcHR5LA0KCQkJCQkgICAgICAg
ZmFsc2UsDQoJCQkJCSAgICAgICBDcmVhdGVWYWx1ZVN0cmluZyAoKSwNCgkJ
CQkJICAgICAgIHRydWUpOw0KDQoJCQlyZXR1cm4gKFBlZWtDaGFyICgpICE9
IC0xKTsNCgkJfQ0KDQoJCS8vIHJlYWQgZW50aXR5IHJlZmVyZW5jZSBmcm9t
IGF0dHJpYnV0ZSBzdHJpbmcgYW5kIGlmIHBhcnNhYmxlIHRoZW4gcmV0dXJu
IHRoZSB2YWx1ZS4NCgkJcHJpdmF0ZSBzdHJpbmcgUmVhZEF0dHJpYnV0ZVZh
bHVlUmVmZXJlbmNlICgpDQoJCXsNCgkJCWludCBlbmRFbnRpdHlQb3NpdGlv
biA9IGF0dHJpYnV0ZVN0cmluZy5JbmRleE9mKCc7JywNCgkJCQlhdHRyaWJ1
dGVWYWx1ZVBvcyk7DQoJCQlzdHJpbmcgZW50aXR5TmFtZSA9IGF0dHJpYnV0
ZVN0cmluZy5TdWJzdHJpbmcgKGF0dHJpYnV0ZVZhbHVlUG9zICsgMSwNCgkJ
CQllbmRFbnRpdHlQb3NpdGlvbiAtIGF0dHJpYnV0ZVZhbHVlUG9zIC0gMSk7
DQoNCgkJCWF0dHJpYnV0ZVZhbHVlUG9zID0gZW5kRW50aXR5UG9zaXRpb24g
KyAxOw0KDQoJCQlpZihlbnRpdHlOYW1lIFswXSA9PSAnIycpIHsNCgkJCQlj
aGFyIGM7DQoJCQkJLy8gY2hhcmFjdGVyIGVudGl0eQ0KCQkJCWlmKGVudGl0
eU5hbWUgWzFdID09ICd4Jykgew0KCQkJCQkvLyBoZXhhZGVjaW1hbA0KCQkJ
CQljID0gKGNoYXIpIGludC5QYXJzZSAoIjAiICsgZW50aXR5TmFtZS5TdWJz
dHJpbmcgKDIpLA0KCQkJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uTnVtYmVy
U3R5bGVzLkhleE51bWJlcik7DQoJCQkJfSBlbHNlIHsNCgkJCQkJLy8gZGVj
aW1hbA0KCQkJCQljID0gKGNoYXIpIGludC5QYXJzZSAoZW50aXR5TmFtZS5T
dWJzdHJpbmcgKDEpKTsNCgkJCQl9DQoJCQkJcmV0dXJuIGMuVG9TdHJpbmco
KTsNCgkJCX0NCgkJCWVsc2Ugew0KCQkJCXN3aXRjaChlbnRpdHlOYW1lKQ0K
CQkJCXsNCgkJCQljYXNlICJsdCI6IHJldHVybiAiPCI7DQoJCQkJY2FzZSAi
Z3QiOiByZXR1cm4gIj4iOw0KCQkJCWNhc2UgImFtcCI6IHJldHVybiAiJiI7
DQoJCQkJY2FzZSAicXVvdCI6IHJldHVybiAiXCIiOw0KCQkJCWNhc2UgImFw
b3MiOiByZXR1cm4gIiciOw0KCQkJCWRlZmF1bHQ6IHJldHVybiBudWxsOw0K
CQkJCX0NCgkJCX0NCgkJfQ0KDQoJCXByaXZhdGUgc3RyaW5nIFVuZXNjYXBl
QXR0cmlidXRlVmFsdWUgKHN0cmluZyB1bnJlc29sdmVkKQ0KCQl7DQoJCQlp
Zih1bnJlc29sdmVkID09IG51bGwpIHJldHVybiBudWxsOw0KCQkJU3RyaW5n
QnVpbGRlciByZXNvbHZlZCA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7DQoJCQlp
bnQgcG9zID0gMDsNCg0KCQkJLy8gdHJpbSBzdGFydC9lbmQgZWRnZSBvZiBx
dW90YXRpb24gY2hhcmFjdGVyLg0KCQkJdW5yZXNvbHZlZCA9IHVucmVzb2x2
ZWQuU3Vic3RyaW5nICgxLCB1bnJlc29sdmVkLkxlbmd0aCAtIDIpOw0KDQoJ
CQlpbnQgbmV4dCA9IHVucmVzb2x2ZWQuSW5kZXhPZiAoJyYnKTsNCgkJCWlm
KG5leHQgPCAwKQ0KCQkJCXJldHVybiB1bnJlc29sdmVkOw0KDQoJCQl3aGls
ZShuZXh0ID49IDApIHsNCgkJCQlpZihwb3MgPCBuZXh0KQ0KCQkJCQlyZXNv
bHZlZC5BcHBlbmQgKHVucmVzb2x2ZWQuU3Vic3RyaW5nIChwb3MsIG5leHQg
LSBwb3MpKTsvLyAtIDEpOw0KCQkJCWludCBlbmRQb3MgPSB1bnJlc29sdmVk
LkluZGV4T2YgKCc7JywgbmV4dCsxKTsNCgkJCQlzdHJpbmcgZW50aXR5TmFt
ZSA9DQoJCQkJCXVucmVzb2x2ZWQuU3Vic3RyaW5nIChuZXh0ICsgMSwgZW5k
UG9zIC0gbmV4dCAtIDEpOw0KCQkJCWlmKGVudGl0eU5hbWUgWzBdID09ICcj
Jykgew0KCQkJCQljaGFyIGM7DQoJCQkJCS8vIGNoYXJhY3RlciBlbnRpdHkN
CgkJCQkJaWYoZW50aXR5TmFtZSBbMV0gPT0gJ3gnKSB7DQoJCQkJCQkvLyBo
ZXhhZGVjaW1hbA0KCQkJCQkJYyA9IChjaGFyKSBpbnQuUGFyc2UgKCIwIiAr
IGVudGl0eU5hbWUuU3Vic3RyaW5nICgyKSwNCgkJCQkJCQlTeXN0ZW0uR2xv
YmFsaXphdGlvbi5OdW1iZXJTdHlsZXMuSGV4TnVtYmVyKTsNCgkJCQkJfSBl
bHNlIHsNCgkJCQkJCS8vIGRlY2ltYWwNCgkJCQkJCWMgPSAoY2hhcikgaW50
LlBhcnNlIChlbnRpdHlOYW1lLlN1YnN0cmluZyAoMSkpOw0KCQkJCQl9DQoJ
CQkJCXJlc29sdmVkLkFwcGVuZCAoYyk7DQoJCQkJfSBlbHNlIHsNCgkJCQkJ
c3dpdGNoKGVudGl0eU5hbWUpIHsNCgkJCQkJY2FzZSAibHQiOiByZXNvbHZl
ZC5BcHBlbmQgKCI8Iik7IGJyZWFrOw0KCQkJCQljYXNlICJndCI6IHJlc29s
dmVkLkFwcGVuZCAoIj4iKTsgYnJlYWs7DQoJCQkJCWNhc2UgImFtcCI6IHJl
c29sdmVkLkFwcGVuZCAoIiYiKTsgYnJlYWs7DQoJCQkJCWNhc2UgInF1b3Qi
OiByZXNvbHZlZC5BcHBlbmQgKCJcIiIpOyBicmVhazsNCgkJCQkJY2FzZSAi
YXBvcyI6IHJlc29sdmVkLkFwcGVuZCAoIiciKTsgYnJlYWs7DQoJCQkJCS8v
IFdpdGggcmVzcGVjdCB0byAiVmFsdWUiLCBNUyBkb2N1bWVudCBpcyBoZWxw
bGVzcw0KCQkJCQkvLyBhbmQgdGhlIGltcGxlbWVudGlvbiByZXR1cm5zIGlu
Y29uc2lzdGVudCB2YWx1ZQ0KCQkJCQkvLyAoZS5nLiBYTUw6ICImZW50OyAm
YW1wO2VudDsiIC0tLT4gVmFsdWU6ICImZW50OyAmZW50OyIuKQ0KCQkJCQlk
ZWZhdWx0OiByZXNvbHZlZC5BcHBlbmQgKCImIiArIGVudGl0eU5hbWUgKyAi
OyIpOyBicmVhazsNCgkJCQkJfQ0KCQkJCX0NCgkJCQlwb3MgPSBlbmRQb3Mg
KyAxOw0KCQkJCWlmKHBvcyA+IHVucmVzb2x2ZWQuTGVuZ3RoKQ0KCQkJCQli
cmVhazsNCgkJCQluZXh0ID0gdW5yZXNvbHZlZC5JbmRleE9mKCcmJywgcG9z
KTsNCgkJCX0NCgkJCXJlc29sdmVkLkFwcGVuZCAodW5yZXNvbHZlZC5TdWJz
dHJpbmcocG9zKSk7DQoNCgkJCXJldHVybiByZXNvbHZlZC5Ub1N0cmluZygp
Ow0KCQl9DQoNCgkJI2VuZHJlZ2lvbg0KCX0NCn0NCg==

--0-1493297886-1046363326=:68546--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="012570.html">[Mono-list] Error: Failed to load library libuser32.dll...
</A></li>
	<LI> Next message: <A HREF="012568.html">[Mono-list] garbage collector
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12571">[ date ]</a>
              <a href="thread.html#12571">[ thread ]</a>
              <a href="subject.html#12571">[ subject ]</a>
              <a href="author.html#12571">[ author ]</a>
         </LI>
       </UL>
</body></html>
