<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] c# serialization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rafaelteixeirabr%40hotmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="012360.html">
   <LINK REL="Next"  HREF="012362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] c# serialization
   </H1>
    <B>A Rafael D Teixeira
    </B> 
    <A HREF="mailto:rafaelteixeirabr%40hotmail.com"
       TITLE="[Mono-list] c# serialization">rafaelteixeirabr@hotmail.com
       </A><BR>
    <I>Fri, 21 Feb 2003 00:17:43 -0300</I>
    <P><UL>
        <LI> Previous message: <A HREF="012360.html">[Mono-list] c# serialization
</A></li>
        <LI> Next message: <A HREF="012362.html">[Mono-list] c# serialization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12361">[ date ]</a>
              <a href="thread.html#12361">[ thread ]</a>
              <a href="subject.html#12361">[ subject ]</a>
              <a href="author.html#12361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>From: &quot;Ricardo Kirkner&quot; &lt;<A HREF="mailto:mono@kirkner.com.ar">mono@kirkner.com.ar</A>&gt;
</I>
&gt;<i>I would like to serialize a class that has the following structure (this is 
</I>&gt;<i>an abstraction)
</I>&gt;<i>
</I>&gt;<i>public var1;
</I>&gt;<i>public var2;
</I>&gt;<i>public type;
</I>&gt;<i>
</I>&gt;<i>where one instance of this class can only have var1 or var2 instantiated. 
</I>&gt;<i>Therefore I introduced variable type. So I can know which variable is 
</I>&gt;<i>currently the right one (i.e. type=var1 or type=var2).
</I>&gt;<i>When it comes to serialization, i would like to get only the &quot;used&quot; 
</I>&gt;<i>variable serialized (i.e if type=var1 then I would like to have onle var1 
</I>&gt;<i>serialized, and not both)
</I>
&gt;<i>So far i have found that in order to serialize a class i could prepend the 
</I>&gt;<i>[Serializable] attribute to my class, and it would serialize every public 
</I>&gt;<i>variable. In order not to get variable type serialized, i could prepend the 
</I>&gt;<i>[XmlIgnore] attribute and that would do the job; but how can i tell that 
</I>&gt;<i>one variable should get serialized based on the contents of another 
</I>&gt;<i>variable of an instance of my class. I was thinking of something like...
</I>
&gt;<i>Ricardo Kirkner
</I>
First thing: The Serializable attribute is for Binary serialization, not for 
Xml serialization. These are two very different things...

I think you are probably heading for Xml serialization, so...

Second: If those var1 and var2 are reference types (classes instead of 
structs), just keep the unused one as null, and it won't be serialized to 
xml.

Third: If these are xml simple types (ints, floats, strings, ...), you can 
use a different approach: serializing them as attributes, that besides being 
more compact has a higher level of control using the xxxSpecified trick.

Example:

[XmlAttribute]
public int var1;

[XmlIgnore]
public bool var1Specified
{
  get { return type == &quot;var1&quot;; }
}

[XmlAttribute]
public string var2;

[XmlIgnore]
public bool var2Specified
{
  get { return type == &quot;var2&quot;; }
}

public string type;


Hope it helps,

Rafael Teixeira
Brazilian Polymath
Mono, MonoQLE Hacker


_________________________________________________________________
The new MSN 8: advanced junk mail protection and 2 months FREE* 
<A HREF="http://join.msn.com/?page=features/junkmail">http://join.msn.com/?page=features/junkmail</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="012360.html">[Mono-list] c# serialization
</A></li>
	<LI> Next message: <A HREF="012362.html">[Mono-list] c# serialization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12361">[ date ]</a>
              <a href="thread.html#12361">[ thread ]</a>
              <a href="subject.html#12361">[ subject ]</a>
              <a href="author.html#12361">[ author ]</a>
         </LI>
       </UL>
</body></html>
