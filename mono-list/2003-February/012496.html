<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Smtp status
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gvaish%40adobe.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="012475.html">
   <LINK REL="Next"  HREF="012501.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Smtp status
   </H1>
    <B>Gaurav Vaish
    </B> 
    <A HREF="mailto:gvaish%40adobe.com"
       TITLE="[Mono-list] Smtp status">gvaish@adobe.com
       </A><BR>
    <I>Wed, 26 Feb 2003 10:39:29 +0530</I>
    <P><UL>
        <LI> Previous message: <A HREF="012475.html">[Mono-list] Smtp status
</A></li>
        <LI> Next message: <A HREF="012501.html">[Mono-list] Smtp status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12496">[ date ]</a>
              <a href="thread.html#12496">[ thread ]</a>
              <a href="subject.html#12496">[ subject ]</a>
              <a href="author.html#12496">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Per,

    I had a look at your SmtpClient and other classes. Implementation looks
pretty fine - noting that there's no abstraction needed. Here are some of my
findings which you may like to look into:

    * SmtpClient::SendMultipartMail(MailMessage) [line 106] - boundary is a
constant / hardcoded string. Ideally you should generate it dynamically. You
may like to have a look at my implementation [1].
    * [line 138] - While adding attachments, the Content-Type is
&quot;unknown/unknown&quot;. My opinion is that you should keep it as
&quot;application/octet-stream&quot;. I haven't seen MS implementation, but it's using
CDOSYS - and IIRC, all unknown types are &quot;a/o-s&quot;.

    * SmtpStream::WriteBase64(Stream) [line 207] - IMO, you are looking for
&quot;if(row.Length &gt;= 60)&quot;. I am not sure what you are doing and why. If you are
giving a break after 60 chars in mail, you should better do this:

    while(row.Length &gt;= 60)
    {
        WriteLine(row.ToString().Substring(0, 60)); // unless there's short
cut available for this
        row.Remove(0, 60);
    }

    * SmtpMail [line 20] - Why is the mail server static?

    * SmtpMail - You should give default value to smtpServer = &quot;localhost&quot;.
This is what the MS docs read.

    * MailMessage - BodyEncoding, BodyFormat, Priority: All should have a
default value. And while set-ing, you should check whether the value is a
valid value using System.Enum.IsDefined(typeof(&lt;enum&gt;, value)) before
assigning.


    Rest all looks pretty OK to me, at least now. Enjoy sending mails... :-)



Happy Hacking,
Gaurav
<A HREF="http://mastergaurav.virtualave.net/iitk">http://mastergaurav.virtualave.net/iitk</A>
---------------------------------------


----- Original Message -----
From: &quot;Per Arneng&quot; &lt;<A HREF="mailto:pt99par@student.bth.se">pt99par@student.bth.se</A>&gt;
To: &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
Sent: Wednesday, February 26, 2003 00:50
Subject: [Mono-list] Smtp status


Hi!

Just got a laptop which i installed windows and cygwin on. So now i can sit
back on my old linux puter and run testcases on bothe platforms at the
same time using ssh.. great!!!

Working on now:

* Test cases on .NET runtime System.Web.Mail to fill the
   holes of a poorly written documentation :)
   Im going to run the test cases on mono's System.Web.Mail
   later on to make sure everyhing is nice and compattible.

Todo:

* Implement UUEncoding and create separate classes
  for UU and Base64

* Test theese separate classes against the uuencode program
  $uuencode
  $uuencode --base64

* Charsets .. encodings...
   .NET runtime useses the Encoding class for MailMessage.BodyEncoding and
   encodes the body and subject with that. If BodyEncoding is UTF-8 it sends
   it as that. The .NET runtime figures out the current charset:
Content-Type: text/plain;
         charset=&quot;iso-8859-1&quot;
  I would like to do that but dont know how really..  need some help here!!

So anyone who knows how to get the current charset are welcome to mail me
and any other suggestions tips and bugs :)

///Per
_______________________________________________
Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="012475.html">[Mono-list] Smtp status
</A></li>
	<LI> Next message: <A HREF="012501.html">[Mono-list] Smtp status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12496">[ date ]</a>
              <a href="thread.html#12496">[ thread ]</a>
              <a href="subject.html#12496">[ subject ]</a>
              <a href="author.html#12496">[ author ]</a>
         </LI>
       </UL>
</body></html>
