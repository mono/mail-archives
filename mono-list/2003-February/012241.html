<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Embedding issues ..
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:miguel%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="012054.html">
   <LINK REL="Next"  HREF="012817.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Embedding issues ..
   </H1>
    <B>Miguel de Icaza
    </B> 
    <A HREF="mailto:miguel%40ximian.com"
       TITLE="[Mono-list] Embedding issues ..">miguel@ximian.com
       </A><BR>
    <I>16 Feb 2003 18:59:47 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="012054.html">[Mono-list] Embedding issues ..
</A></li>
        <LI> Next message: <A HREF="012817.html">[Mono-list] Status of unsafe code in Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12241">[ date ]</a>
              <a href="thread.html#12241">[ thread ]</a>
              <a href="subject.html#12241">[ subject ]</a>
              <a href="author.html#12241">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> In a perfect world, I'd like to have a completely isolated VM
</I>&gt;<i> instance associated with each database session. The association
</I>&gt;<i> would be setup when the database client connects and the VM would
</I>&gt;<i> be shut down when the connections ends or timeouts.
</I>
The concept of &quot;VM&quot; does not really exist within Mono.  There are a
number of services that are exposed by the Mono JIT engine to managed
and unmanaged code:

	* IO abstraction layer.
	* Thread abstraction layer.
	* Garbage Collection.
	* Image loading, introspection.
	* Execution and dynamic compilation services.

These services are shared, and are not isolated from each other.

In reality, you would ask Mono to execute code on your behalf.  The
closest you can get to code separation is through the creation of
different &quot;application domains&quot;, and running code in different
application domains.  

See Don Box's book for a deeper treatment of Application Domains, which
might be close to what you are looking for. 

&gt;<i> 2. Custom class loader
</I>&gt;<i> 
</I>&gt;<i> In a perfect world it should be not that hard to hack the run-time
</I>&gt;<i> such that classes/bytecode is not loaded from files in the filesystem
</I>&gt;<i> (that is not accessible from the database .. at least it should not),
</I>&gt;<i> but classes/bytecode are loaded from the database itself. Classes/bytecode
</I>&gt;<i> would be uploaded (under compete transaction control) into the database
</I>&gt;<i> via a special interface. 
</I>&gt;<i> 
</I>&gt;<i> Possible?
</I>
It would be possible to support this in Mono relatively easily.  But
this is not supported in the distribution as of now.

&gt;<i> 3. Transparent object persistence
</I>&gt;<i> 
</I>&gt;<i> Most important, is it possible to hack the run-time (the CTS?) such that
</I>&gt;<i> a user can declare new types to be persistable, e.g in C# like so:
</I>&gt;<i> 
</I>&gt;<i> public class MyClass
</I>&gt;<i> {
</I>&gt;<i>    [Persistable]
</I>&gt;<i> ...
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> public class MyKeyedClass
</I>&gt;<i> {
</I>&gt;<i>    [Persistable(int)]
</I>&gt;<i> ...
</I>&gt;<i> }
</I>
This is part of the things that .NET offers to its users.  The attribute
is actually called &quot;Serializable&quot; though.

&gt;<i> Instances of persistable classes are sharable between all VM instances.
</I>&gt;<i> All synchronisation is done under the hood by the OO database.
</I>
In .NET this is handled a bit differently.  I suggest again Don's book
or Ingo Rammer's .NET Remoting book for a more detailed explanation.

The Microsoft.NET documentation will also be helpful here.

Miguel

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="012054.html">[Mono-list] Embedding issues ..
</A></li>
	<LI> Next message: <A HREF="012817.html">[Mono-list] Status of unsafe code in Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12241">[ date ]</a>
              <a href="thread.html#12241">[ thread ]</a>
              <a href="subject.html#12241">[ subject ]</a>
              <a href="author.html#12241">[ author ]</a>
         </LI>
       </UL>
</body></html>
