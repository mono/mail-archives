<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Oracle data provider in Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:danmorg%40sc.rr.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="012246.html">
   <LINK REL="Next"  HREF="012257.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Oracle data provider in Mono
   </H1>
    <B>Daniel Morgan
    </B> 
    <A HREF="mailto:danmorg%40sc.rr.com"
       TITLE="[Mono-list] Oracle data provider in Mono">danmorg@sc.rr.com
       </A><BR>
    <I>Mon, 17 Feb 2003 03:32:14 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="012246.html">[Mono-list] mcs/class/doc/TemplateTest.cs corrupt
</A></li>
        <LI> Next message: <A HREF="012257.html">[Mono-list] Patch - First implementation to DataRelation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12247">[ date ]</a>
              <a href="thread.html#12247">[ thread ]</a>
              <a href="subject.html#12247">[ subject ]</a>
              <a href="author.html#12247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Just in case you don't pay attention to the cvs commits.  Tim Coleman got
the Oracle ADO.NET provider (System.Data.OracleClient) to retrieve data from
an Oracle 8i database.  In current cvs Mono, you can only retrieve simple
character data.

For example, this example SQL works with the sample database installed by
Oracle:

&quot;SELECT ename, job FROM emp&quot;

Sample C# source code follows at the bottom.

OracleClient builds and runs on Linux and Windows.  It uses OCI (Oracle
Call-level Interface) which is a C API included in the Oracle Client
software for accessing Oracle databases.

Tim also removed the dependencies on a &quot;glue&quot; library between the
System.Data.OracleClient.dll assembly and OCI.   So, if you have a working
Mono and the Oracle client software installed, you  can build and use the
System.Data.OracleClient provider.

The OracleClient provider can retrieve simple character data using the SQL#
command-line and GTK# GUI versions in Mono.

Tim said he is now working on handling of data types and a data adapter for
the OracleClient provider.

C# Oracle sample
----------------

// MonoOracleSample.cs
//
// To build on Linux:
// mcs MonoOracleSample.cs \
//     -r System.Data.dll -r System.Data.OracleClient.dll
// To build on Windows via Cygwin:
// mono C:/cygwin/home/DanielMorgan/mono/install/bin/mcs.exe \
//      MonoOracleSample.cs \
//      -lib:/cygwin/home/DanielMorgan/mono/install/lib \
//      -r System.Data.dll -r System.Data.OracleClient.dll
using System;
using System.Data;
using System.Data.OracleClient;

public class MonoOracleSample
{
	public static void Main(string[] args)
	{
		string connectionString = String.Format(
			&quot;Data Source={0};&quot; +
			&quot;User ID={1};&quot; +
			&quot;Password={2}&quot;,
			args[0], args[1], args[2]);

		OracleConnection con1 = new OracleConnection();
		con1.ConnectionString = connectionString;
		con1.Open();

		string selectSql =
			&quot;SELECT ename, job FROM scott.emp&quot;;

		OracleCommand cmd = new OracleCommand();
		cmd.Connection = con1;
		cmd.CommandText = selectSql;
		OracleDataReader reader = cmd.ExecuteReader();
		Console.WriteLine(&quot;Schema&quot;);
		DataTable table;
		table = reader.GetSchemaTable();
		for(int c = 0; c &lt; reader.FieldCount; c++) {
			Console.WriteLine(&quot;  Column &quot; + c.ToString());
			DataRow row = table.Rows[c];

			string ColumnName = (string) row[&quot;ColumnName&quot;];
			string BaseColumnName = (string) row[&quot;BaseColumnName&quot;];
			int ColumnSize = (int) row[&quot;ColumnSize&quot;];
			int NumericScale = Convert.ToInt32( row[&quot;NumericScale&quot;]);
			int NumericPrecision = Convert.ToInt32(row[&quot;NumericPrecision&quot;]);
			Type DataType = (Type) row[&quot;DataType&quot;];
			Console.WriteLine(&quot;    ColumnName: &quot; + ColumnName);
			Console.WriteLine(&quot;    BaseColumnName: &quot; + BaseColumnName);
			Console.WriteLine(&quot;    ColumnSize: &quot; + ColumnSize.ToString());
			Console.WriteLine(&quot;    NumericScale: &quot; + NumericScale.ToString());
			Console.WriteLine(&quot;    NumericPrecision: &quot; +
NumericPrecision.ToString());
			Console.WriteLine(&quot;    DataType: &quot; + DataType.ToString());
		}

		int row = 0;
		Console.WriteLine(&quot;Data&quot;);
		while(reader.Read()) {
			row++;
			Console.WriteLine(&quot;  Row: &quot; + row.ToString());
			for(int f = 0; f &lt; reader.FieldCount; f++) {
				object ovalue;
				string svalue;
				ovalue = reader.GetValue(0);
				svalue = ovalue.ToString();
				Console.WriteLine(&quot;     Field: &quot; + f.ToString());
				Console.WriteLine(&quot;         Value: &quot; + svalue);
			}
		}
		if(row == 0)
			Console.WriteLine(&quot;No data returned.&quot;);

		reader.Close();
		reader = null;
		cmd.Dispose();
		cmd = null;
		con1.Close();
		con1 = null;
	}
}



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="012246.html">[Mono-list] mcs/class/doc/TemplateTest.cs corrupt
</A></li>
	<LI> Next message: <A HREF="012257.html">[Mono-list] Patch - First implementation to DataRelation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12247">[ date ]</a>
              <a href="thread.html#12247">[ thread ]</a>
              <a href="subject.html#12247">[ subject ]</a>
              <a href="author.html#12247">[ author ]</a>
         </LI>
       </UL>
</body></html>
