<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] OSX Class libraries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mush_keithd%40yahoo.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="012037.html">
   <LINK REL="Next"  HREF="012048.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] OSX Class libraries
   </H1>
    <B>keith davey
    </B> 
    <A HREF="mailto:mush_keithd%40yahoo.co.uk"
       TITLE="[Mono-list] OSX Class libraries">mush_keithd@yahoo.co.uk
       </A><BR>
    <I>Sat, 8 Feb 2003 18:19:19 +0000 (GMT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="012037.html">[Mono-list] OSX Class libraries
</A></li>
        <LI> Next message: <A HREF="012048.html">[Mono-list] OSX Class libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12041">[ date ]</a>
              <a href="thread.html#12041">[ thread ]</a>
              <a href="subject.html#12041">[ subject ]</a>
              <a href="author.html#12041">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Cool,

Thanks for the info.

Am I right in thinking so, to call Cocoa code I will
have create a bundle, that links against the dylib.
Then I can call that from mono.

I guess I will try to write a small bunble and run
code against it to see.

Keith


 --- Benjamin Reed &lt;<A HREF="mailto:ranger@befunk.com">ranger@befunk.com</A>&gt; wrote: &gt; On
Saturday, February 8, 2003, at 11:45 AM, keith
&gt;<i> davey wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; I've been testing this and seem to have it a
</I>&gt;<i> problem.
</I>&gt;<i> &gt; OSX has dynlib files, and I assume these are the
</I>&gt;<i> same
</I>&gt;<i> &gt; as
</I>&gt;<i> &gt; .so files. However when I run a program which
</I>&gt;<i> tries to
</I>&gt;<i> &gt; load a dynlib I get this:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ** (invoke.exe:507): WARNING **: Failed to load
</I>&gt;<i> &gt; library libSystem.dylib (libSystem.dylib):
</I>&gt;<i> &gt; libSystem.dylib is not a loadable module
</I>&gt;<i> &gt; got wrong token: 0x00000001
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ** ERROR **: file loader.c: line 491
</I>&gt;<i> &gt; (mono_get_method): assertion failed: (table ==
</I>&gt;<i> &gt; MONO_TABLE_MEMBERREF)
</I>&gt;<i> &gt; aborting...
</I>&gt;<i> &gt; Abort
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Anyone know anything about dynLib files? I guess
</I>&gt;<i> if we
</I>&gt;<i> &gt; have a problem I could write a C so, that wraps
</I>&gt;<i> the
</I>&gt;<i> &gt; dynlib file and then call that from mono.
</I>&gt;<i> 
</I>&gt;<i> Libraries on MacOSX are not like most elf systems...
</I>&gt;<i>  MacOSX  
</I>&gt;<i> differentiates between shared libraries and
</I>&gt;<i> dynamically loadable  
</I>&gt;<i> modules (plugin).  It looks like it's trying to load
</I>&gt;<i> libSystem.dylib as  
</I>&gt;<i> a bundle (loadable module), but it's a shared
</I>&gt;<i> library.  That is bad.  =)
</I>&gt;<i> 
</I>&gt;<i> MacOSX's dynamic loader is described in detail in  
</I>&gt;<i>
</I><A HREF="http://developer.apple.com/techpubs/macosx/DeveloperTools/MachORuntime/">http://developer.apple.com/techpubs/macosx/DeveloperTools/MachORuntime/</A>
&gt;<i> 
</I>&gt;<i> MachORuntime.pdf
</I>&gt;<i> 
</I>&gt;<i> The short version is:
</I>&gt;<i> 
</I>&gt;<i> Dylibs are shared libraries.  They are linked to
</I>&gt;<i> another library or a  
</I>&gt;<i> binary at build time, and can be linked against, but
</I>&gt;<i> cannot be  
</I>&gt;<i> dynamically loaded without some tricks (dlcompat, a
</I>&gt;<i> dlopen/dlclose  
</I>&gt;<i> emulation library for macosx does this).  Even with
</I>&gt;<i> tricks they can't  
</I>&gt;<i> be dlclosed though.
</I>&gt;<i> 
</I>&gt;<i> Bundles are loadable modules (ie, plugins), and can
</I>&gt;<i> be dlopened and  
</I>&gt;<i> dlclosed (and the macosx equivalents, using the
</I>&gt;<i> native dyld loader).   
</I>&gt;<i> They cannot be linked against, though.
</I>&gt;<i> 
</I>&gt;<i>  From what I understand this is all just a
</I>&gt;<i> side-effect of the Mach-O  
</I>&gt;<i> structure.  On elf systems, shared libs and modules
</I>&gt;<i> have the same  
</I>&gt;<i> structure, and can be treated as either, in Mach-O
</I>&gt;<i> this is not the case.
</I>&gt;<i>  
</I>
__________________________________________________
Do You Yahoo!?
Everything you'll ever need on one web page
from News and Sport to Email and Music Charts
<A HREF="http://uk.my.yahoo.com">http://uk.my.yahoo.com</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="012037.html">[Mono-list] OSX Class libraries
</A></li>
	<LI> Next message: <A HREF="012048.html">[Mono-list] OSX Class libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12041">[ date ]</a>
              <a href="thread.html#12041">[ thread ]</a>
              <a href="subject.html#12041">[ subject ]</a>
              <a href="author.html#12041">[ author ]</a>
         </LI>
       </UL>
</body></html>
