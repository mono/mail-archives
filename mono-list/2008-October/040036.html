<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Starting mod_mono in Apache,	load jumps to 100% per connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Starting%20mod_mono%20in%20Apache%2C%0A%09load%20jumps%20to%20100%25%20per%20connection&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040032.html">
   <LINK REL="Next"  HREF="040037.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Starting mod_mono in Apache,	load jumps to 100% per connection</H1>
    <B>Ben Clewett</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Starting%20mod_mono%20in%20Apache%2C%0A%09load%20jumps%20to%20100%25%20per%20connection&In-Reply-To="
       TITLE="[Mono-list] Starting mod_mono in Apache,	load jumps to 100% per connection">ben at roadrunner.uk.com
       </A><BR>
    <I>Tue Oct 28 12:15:33 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="040032.html">[Mono-list] how to compress a directory?
</A></li>
        <LI>Next message: <A HREF="040037.html">[Mono-list] Starting mod_mono in Apache, load jumps to 100% per connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40036">[ date ]</a>
              <a href="thread.html#40036">[ thread ]</a>
              <a href="subject.html#40036">[ subject ]</a>
              <a href="author.html#40036">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

I have just upgraded a working system from 1.9.1 to 2.0.1.

# mono --version
Mono JIT compiler version 2.0.1 (tarball)
Copyright (C) 2002-2008 Novell, Inc and Contributors. www.mono-project.com
         TLS:           __thread
         GC:            Included Boehm (with typed GC)
         SIGSEGV:       altstack
         Notifications: epoll
         Architecture:  amd64
         Disabled:      none

# uname -a
Linux fls-16-06 2.6.25.5-1.1-default #1 SMP 2008-06-07 01:55:22 +0200 
x86_64 x86_64 x86_64 GNU/Linux

Under this version I have a problem that when Apache starts, if a call 
is made early to mod_mono, as in within about a second of the start, the 
server load jumps to 100% per request.

Further this then locks out further requests, which also set on 100% 
load.  Eg, a 8 connection will result in about 800% load:


   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
  5651 wwwrun    20   0  253m  30m 8712 S  783  0.4  58:52.86 mono


Where the process is running:


/usr/bin/mono /usr/lib/mono/2.0/mod-mono-server2.exe --filename 
/tmp/mod_mono_server_sdi_webservice --applications /:/usr/local/sdi/ws/ 
--nonstop


As far as I can see, these requests at 100% each will sit there for ever 
more.

(If I user mod-mono-server.exe instead of server2, makes no difference.)

If any users have seen this behaviour, and may know where I can take 
this, I would be very interested.  As now we have a dead unusable server!

Kind regards,

Ben








*************************************************************************
This e-mail is confidential and may be legally privileged. It is intended
solely for the use of the individual(s) to whom it is addressed. Any
content in this message is not necessarily a view or statement from Road
Tech Computer Systems Limited but is that of the individual sender. If
you are not the intended recipient, be advised that you have received
this e-mail in error and that any use, dissemination, forwarding,
printing, or copying of this e-mail is strictly prohibited. We use
reasonable endeavours to virus scan all e-mails leaving the company but
no warranty is given that this e-mail and any attachments are virus free.
You should undertake your own virus checking. The right to monitor e-mail
communications through our networks is reserved by us

  Road Tech Computer Systems Ltd. Shenley Hall, Rectory Lane, Shenley,
  Radlett, Hertfordshire, WD7 9AN. - VAT Registration No GB 449 3582 17
  Registered in England No: 02017435, Registered Address: Charter Court, 
  Midland Road, Hemel Hempstead,  Hertfordshire, HP2 5GE. 
*************************************************************************
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040032.html">[Mono-list] how to compress a directory?
</A></li>
	<LI>Next message: <A HREF="040037.html">[Mono-list] Starting mod_mono in Apache, load jumps to 100% per connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40036">[ date ]</a>
              <a href="thread.html#40036">[ thread ]</a>
              <a href="subject.html#40036">[ subject ]</a>
              <a href="author.html#40036">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
