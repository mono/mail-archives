<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Performance benchmark
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Performance%20benchmark&In-Reply-To=1267217588054-1571319.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044524.html">
   <LINK REL="Next"  HREF="044528.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Performance benchmark</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Performance%20benchmark&In-Reply-To=1267217588054-1571319.post%40n4.nabble.com"
       TITLE="[Mono-list] Performance benchmark">miguel at novell.com
       </A><BR>
    <I>Sun Feb 28 12:36:52 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="044524.html">[Mono-list] Performance benchmark
</A></li>
        <LI>Next message: <A HREF="044528.html">[Mono-list] Performance benchmark
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44527">[ date ]</a>
              <a href="thread.html#44527">[ thread ]</a>
              <a href="subject.html#44527">[ subject ]</a>
              <a href="author.html#44527">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

First, some stupid Math calculations:
&gt;<i>
</I>&gt;<i>                                for (int ct = 0; ct &lt; 1000000; ct++)
</I>&gt;<i>                                {
</I>&gt;<i>                                        decimal d =
</I>&gt;<i> Convert.ToDecimal(Math.Pow(ct, 4));
</I>&gt;<i>                                        d =
</I>&gt;<i> Convert.ToDecimal(Math.Sqrt(Convert.ToDouble(d)) * 4 *
</I>&gt;<i> Math.Atan(Convert.ToDouble(ct)));
</I>&gt;<i>                                }
</I>&gt;<i>
</I>
I looked a little bit into this, and although the above looks
computationally intensive, in Mono the above goes through vast paths of GC
bound operations as our implementation for the Decimal (double) sadly goes
through a very inefficient code path.   It allocates strings, formats
strings and does a bunch of extra work.

We probably should implement a Decimal constructor that decodes
double/floats directly.

On a separate note, we have regressed somewhere in trunk compared to 2.6.1.

I include my sample.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20100228/4f2d89c9/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20100228/4f2d89c9/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044524.html">[Mono-list] Performance benchmark
</A></li>
	<LI>Next message: <A HREF="044528.html">[Mono-list] Performance benchmark
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44527">[ date ]</a>
              <a href="thread.html#44527">[ thread ]</a>
              <a href="subject.html#44527">[ subject ]</a>
              <a href="author.html#44527">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
