<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Https (Webservice) authentication using PKCS#11	tokens
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Https%20%28Webservice%29%20authentication%20using%20PKCS%2311%0A%09tokens&In-Reply-To=1266331059.19955.68.camel%40mizar.home">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044436.html">
   <LINK REL="Next"  HREF="044483.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Https (Webservice) authentication using PKCS#11	tokens</H1>
    <B>Mathias Tausig</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Https%20%28Webservice%29%20authentication%20using%20PKCS%2311%0A%09tokens&In-Reply-To=1266331059.19955.68.camel%40mizar.home"
       TITLE="[Mono-list] Https (Webservice) authentication using PKCS#11	tokens">mathias.tausig at a-cert.at
       </A><BR>
    <I>Fri Feb 19 04:30:47 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="044436.html">[Mono-list] Https (Webservice) authentication using PKCS#11	tokens
</A></li>
        <LI>Next message: <A HREF="044483.html">[Mono-list] Https (Webservice) authentication using PKCS#11	tokens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44479">[ date ]</a>
              <a href="thread.html#44479">[ thread ]</a>
              <a href="subject.html#44479">[ subject ]</a>
              <a href="author.html#44479">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hy Sebastien (and everybody else)!

Am 16.02.2010 15:37, schrieb Sebastien Pouliot:
&gt;<i> On Tue, 2010-02-16 at 15:17 +0100, Mathias Tausig wrote:
</I>&gt;&gt;<i> [...].
</I>&gt;<i> 
</I>&gt;&gt;<i> The best concept that I could
</I>&gt;&gt;<i> make up so far, was to write a PKCS#11 wrapper and then subclass RSA.
</I>&gt;<i> 
</I>&gt;<i> Yep, that's the right thing to do.
</I>&gt;<i> 
</I>&gt;<i> Sebastien
</I>&gt;<i> 
</I>
I have done that now (and no, I have not written a PKCS#11 wrapper in
the course of 2 days, I had already started the work before), but I am
facing a slight problem.
In Mono's implementation of X509Certificate2, when the key is accessed
via the PrivateKey property, the ExportParameter method of
AssymetricAlgorithm ist invoked (see
<A HREF="http://anonsvn.mono-project.com/viewvc/tags/mono-2-6-1/mcs/class/System/System.Security.Cryptography.X509Certificates/X509Certificate2.cs">http://anonsvn.mono-project.com/viewvc/tags/mono-2-6-1/mcs/class/System/System.Security.Cryptography.X509Certificates/X509Certificate2.cs</A>
, line 213). When I implemented my Pkcs11RsaKey class, derived from RSA,
I chose to throw a CryptographicException whenever ExportParamters(true)
is called (since there is no possibility to actually read the private
parameters off a token). But if I do so, X509Certificate2.PrivateKey
returns null and the whole https - login process fails.

Since you wrote the whole Cryptographic namespace, maybe you could shed
some light, why this call to ExportParameters is neccesary.
Do you see any workaround for this, apart from simply returning the
public parameters from ExportParameters(true), as I have done now, to
make it work as a proof of concept?

cheers
Mathias
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044436.html">[Mono-list] Https (Webservice) authentication using PKCS#11	tokens
</A></li>
	<LI>Next message: <A HREF="044483.html">[Mono-list] Https (Webservice) authentication using PKCS#11	tokens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44479">[ date ]</a>
              <a href="thread.html#44479">[ thread ]</a>
              <a href="subject.html#44479">[ subject ]</a>
              <a href="author.html#44479">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
