<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono.Zeroconf Problem: Calling delegate after garbage collection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono.Zeroconf%20Problem%3A%20Calling%20delegate%20after%20garbage%0A%20collection&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039115.html">
   <LINK REL="Next"  HREF="039113.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono.Zeroconf Problem: Calling delegate after garbage collection</H1>
    <B>parkerjm</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono.Zeroconf%20Problem%3A%20Calling%20delegate%20after%20garbage%0A%20collection&In-Reply-To="
       TITLE="[Mono-list] Mono.Zeroconf Problem: Calling delegate after garbage collection">parkerjm at gmail.com
       </A><BR>
    <I>Mon Jul 21 16:24:28 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039115.html">[Mono-list]  Support Android API
</A></li>
        <LI>Next message: <A HREF="039113.html">[Mono-list] Mono.Zeroconf Problem: Calling delegate after garbage collection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39116">[ date ]</a>
              <a href="thread.html#39116">[ thread ]</a>
              <a href="subject.html#39116">[ subject ]</a>
              <a href="author.html#39116">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I wrote a pair of programs that communicate through the Mono.Zeroconf
library. The first program just broadcasts its presence and the other
program listens for instances of the broadcasting program. When the listener
is running and finds a broadcaster and then the broadcaster is closed, I get
the following exception:

&quot;CallbackOnCollectedDelegate was detected
Message: A callback was made on a garbage collected delegate of type
'Mono.Zeroconf.Providers.Bonjour!Mono.Zeroconf.Providers.Bonjour.Native+DNSServiceBrowseReply::Invoke'.
This may cause application crashes, corruption and data loss. When passing
delegates to unmanaged code, they must be kept alive by the managed
application until it is guaranteed that they will never be called.&quot;

It seems like the object is being marked for garbage collection too soon or
something. How can I keep it alive? I pretty much used a lot of the mzclient
source for creating these programs, but it doesn't crash and mine does. I am
not sure why. 

Here is a snippet of the important code:
<A HREF="http://pastebin.com/fb91b9d2">http://pastebin.com/fb91b9d2</A>

I am creating this on Windows using .NET.
-- 
View this message in context: <A HREF="http://www.nabble.com/Mono.Zeroconf-Problem%3A-Calling-delegate-after-garbage-collection-tp18534138p18534138.html">http://www.nabble.com/Mono.Zeroconf-Problem%3A-Calling-delegate-after-garbage-collection-tp18534138p18534138.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039115.html">[Mono-list]  Support Android API
</A></li>
	<LI>Next message: <A HREF="039113.html">[Mono-list] Mono.Zeroconf Problem: Calling delegate after garbage collection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39116">[ date ]</a>
              <a href="thread.html#39116">[ thread ]</a>
              <a href="subject.html#39116">[ subject ]</a>
              <a href="author.html#39116">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
