<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] XML File Opening,	XPathNodeIterator 3500% Slower in Mono/Linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20XML%20File%20Opening%2C%0A%09XPathNodeIterator%203500%25%20Slower%20in%20Mono/Linux&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039073.html">
   <LINK REL="Next"  HREF="039072.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] XML File Opening,	XPathNodeIterator 3500% Slower in Mono/Linux</H1>
    <B>Bradford Stephens</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20XML%20File%20Opening%2C%0A%09XPathNodeIterator%203500%25%20Slower%20in%20Mono/Linux&In-Reply-To="
       TITLE="[Mono-list] XML File Opening,	XPathNodeIterator 3500% Slower in Mono/Linux">bradfordstephens at gmail.com
       </A><BR>
    <I>Thu Jul 17 19:04:50 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039073.html">[Mono-list]  mkbundle + distribution requirements
</A></li>
        <LI>Next message: <A HREF="039072.html">[Mono-list] XML File Opening,	XPathNodeIterator 3500% Slower	in Mono/Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39070">[ date ]</a>
              <a href="thread.html#39070">[ thread ]</a>
              <a href="subject.html#39070">[ subject ]</a>
              <a href="author.html#39070">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings,

I've recently convinced my company to switch for MS-only to a Linux
Cluster for our core business system (yay!). Part of this system
involves turning HTML to valid XML, then processing it with XPaths.

As part of this process, I open and load 300 XML files. This operation
takes about 20 milliseconds in Windows to open the files, parse the
XML, and load some data into HashTables. However. it takes about 1700
milliseconds on Mono with Linux (Ubuntu Server Edition).

I also need to parse HTML documents that have been transformed with
XML using XPath. I've narrowed the bottleneck to
XPathNodeIterator.MoveNext(). On my Windows system, 90% of these calls
take 0-6 milliseconds, with 10% of calls taking up to 40. However, on
the same file in Mono, each call takes at least 60-115 milliseconds.
This adds up rapidly when I need to do 50+ calls per document, and
tens of thousands of documents.

This does not happen with *all* documents that I'm parsing -- some
take 10 milliseconds to parse, and others can take 2200ms. However,
documents that are slower in Linux are also slower in Windows.

Am I missing some optimizations here? I compile in MonoDevelop with
the optimizations flag &quot;on&quot;, then run the .exe from the command line
&quot;Parser.exe&quot;. I also tried &quot;mono -O=all Parser.exe&quot;.  I'm running mono
1.9.1 with the C# 2.0 profile. I make sure to compile in
&quot;Release|AllCPU&quot; mode as well.

I could post some example code, but the system is rather complex and
I'd have to take all our proprietary stuff out :)

Could I use Microsoft's System.Xml.Dll in place of the Mono one, if I
can't figure this out?

Thanks for your help in advance!

Cheers,
Bradford
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039073.html">[Mono-list]  mkbundle + distribution requirements
</A></li>
	<LI>Next message: <A HREF="039072.html">[Mono-list] XML File Opening,	XPathNodeIterator 3500% Slower	in Mono/Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39070">[ date ]</a>
              <a href="thread.html#39070">[ thread ]</a>
              <a href="subject.html#39070">[ subject ]</a>
              <a href="author.html#39070">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
