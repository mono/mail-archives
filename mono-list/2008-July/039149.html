<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Compile mono 1.9.1 for arm linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Compile%20mono%201.9.1%20for%20arm%20linux&In-Reply-To=1216905878.6241.29.camel%40PC551-Kubuntu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039148.html">
   <LINK REL="Next"  HREF="039150.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Compile mono 1.9.1 for arm linux</H1>
    <B>Chen, Michael (Dongliang)</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Compile%20mono%201.9.1%20for%20arm%20linux&In-Reply-To=1216905878.6241.29.camel%40PC551-Kubuntu"
       TITLE="[Mono-list] Compile mono 1.9.1 for arm linux">micchen2 at cisco.com
       </A><BR>
    <I>Thu Jul 24 09:59:55 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039148.html">[Mono-list] Compile mono 1.9.1 for arm linux
</A></li>
        <LI>Next message: <A HREF="039150.html">[Mono-list] Compile mono 1.9.1 for arm linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39149">[ date ]</a>
              <a href="thread.html#39149">[ thread ]</a>
              <a href="subject.html#39149">[ subject ]</a>
              <a href="author.html#39149">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tim,

I am trying to compile it for Freescale iMX21ads. Would you please check
which version of gcc/autoconf you used on ubuntu?

Thanks,
Dongliang

-----Original Message-----
Nice one.

I was building mono from the svn head, so no specific version sorry -
this was maybe a couple of months after 1.2.6 I think.

For N800 I was building mono using scratchbox with maemo sdk. This was
all on ubuntu gutsy.

What's your target?

Cheers,
Tim


On Thu, 2008-07-24 at 08:43 -0400, Chen, Michael (Dongliang) wrote:
&gt;<i> Tim,
</I>&gt;<i> 
</I>&gt;<i> Thank you very much for your help. That seems fix the linking issue.
</I>Now
&gt;<i> I got an error, see below.
</I>&gt;<i> 
</I>&gt;<i> Would you mind let me know which version of mono you were compiling?
</I>&gt;<i> What's the building environment, like gcc version, which Linux
</I>&gt;<i> distribution you used?
</I>&gt;<i> 
</I>&gt;<i> Thanks in advance,
</I>&gt;<i> Dongliang
</I>&gt;<i> 
</I>&gt;<i> ./configure --build=arm-linux --with-tls=pthread
</I>&gt;<i> ...
</I>&gt;<i> Make
</I>&gt;<i> ...
</I>&gt;<i> gcc -I../.. -I../../libgc/include -pthread -I/usr/include/glib-2.0
</I>&gt;<i> -I/usr/lib/glib-2.0/include -g -O2 -fno-strict-aliasing
</I>&gt;<i> -Wdeclaration-after-statement -g -Wall -Wunused -Wmissing-prototypes
</I>&gt;<i> -Wmissing-declarations -Wstrict-prototypes -Wmissing-prototypes
</I>&gt;<i> -Wnested-externs -Wpointer-arith -Wno-cast-qual -Wcast-align
</I>&gt;<i> -Wwrite-strings -mno-tls-direct-seg-refs -o genmdesc
</I>genmdesc-genmdesc.o
&gt;<i> genmdesc-helpers.o ../../mono/metadata/.libs/opcodes.o -pthread
</I>&gt;<i> ../../mono/utils/.libs/libmonoutils.a -lgthread-2.0 -lrt -lglib-2.0
</I>-ldl
&gt;<i> -lpthread -lm
</I>&gt;<i> ./genmdesc ./cpu-arm.md cpu-arm.h arm_cpu_desc
</I>&gt;<i> 
</I>&gt;<i> ** ERROR **: Invalid opcode 'arm_rsbs_imm' at line 275 in ./cpu-arm.md
</I>&gt;<i> 
</I>&gt;<i> aborting...
</I>&gt;<i> make[3]: *** [cpu-arm.h] Aborted
</I>&gt;<i> make[3]: Leaving directory `/work/mono/src/mono-1.9.1/mono/mini'
</I>&gt;<i> make[2]: *** [all-recursive] Error 1
</I>&gt;<i> make[2]: Leaving directory `/work/mono/src/mono-1.9.1/mono'
</I>&gt;<i> make[1]: *** [all-recursive] Error 1
</I>&gt;<i> make[1]: Leaving directory `/work/mono/src/mono-1.9.1'
</I>&gt;<i> make: *** [all] Error 2
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> On Wed, 2008-07-23 at 13:58 -0400, Chen, Michael (Dongliang) wrote:
</I>&gt;<i> &gt; Hi all,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I am new to mono. I was trying to compile mono 1.9.1 for arm
</I>&gt;<i> processor.
</I>&gt;<i> &gt; I downloaded mono-1.9.1.tar.bz2, uncompressed it. I got the
</I>following
&gt;<i> &gt; error while compiling it. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If any one could point out what I did wrong and how to fix this
</I>issue,
&gt;<i> &gt; I'd appreciate it.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ./configure --build=arm-linux
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; make
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; /bin/sh ../../libtool --tag=CC   --mode=link gcc  -g -O2
</I>&gt;<i> &gt; -fno-strict-aliasing -Wdeclaration-after-statement -g -Wall -Wunused
</I>&gt;<i> &gt; -Wmissing-prototypes -Wmissing-declarations -Wstrict-prototypes
</I>&gt;<i> &gt; -Wmissing-prototypes -Wnested-externs -Wpointer-arith -Wno-cast-qual
</I>&gt;<i> &gt; -Wcast-align -Wwrite-strings -mno-tls-direct-seg-refs   -o pedump
</I>&gt;<i> &gt; pedump.o libmonoruntime.la ../io-layer/libwapi.la
</I>&gt;<i> &gt; ../utils/libmonoutils.la ../../libgc/libmonogc.la -pthread
</I>&gt;<i> -lgthread-2.0
</I>&gt;<i> &gt; -lrt -lglib-2.0   -lm -ldl -lpthread -lm
</I>&gt;<i> &gt; gcc -g -O2 -fno-strict-aliasing -Wdeclaration-after-statement -g
</I>-Wall
&gt;<i> &gt; -Wunused -Wmissing-prototypes -Wmissing-declarations
</I>&gt;<i> -Wstrict-prototypes
</I>&gt;<i> &gt; -Wmissing-prototypes -Wnested-externs -Wpointer-arith -Wno-cast-qual
</I>&gt;<i> &gt; -Wcast-align -Wwrite-strings -mno-tls-direct-seg-refs -o pedump
</I>&gt;<i> pedump.o
</I>&gt;<i> &gt; -pthread  ./.libs/libmonoruntime.a ../io-layer/.libs/libwapi.a
</I>&gt;<i> &gt; ../utils/.libs/libmonoutils.a ../../libgc/.libs/libmonogc.a
</I>&gt;<i> &gt; -lgthread-2.0 -lrt -lglib-2.0 -ldl -lpthread -lm
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(reflection.o): In function
</I>&gt;<i> &gt; `create_dynamic_mono_image':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/reflection.c:4340: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(reflection.o): In function
</I>&gt;<i> &gt; `mono_image_basic_init':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/reflection.c:4425: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> &gt; `mono_object_new_ptrfree_box':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3447: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc_atomic'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> &gt; `mono_object_new_ptrfree':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3423: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc_atomic'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> `mono_object_new_fast':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3415: undefined
</I>&gt;<i> &gt; reference to `GC_local_gcj_malloc'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> &gt; `mono_object_allocate_spec':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3329: undefined
</I>&gt;<i> &gt; reference to `GC_local_gcj_malloc'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> `mono_object_allocate':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3304: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> &gt; `mono_object_allocate_spec':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3329: undefined
</I>&gt;<i> &gt; reference to `GC_local_gcj_malloc'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> &gt; `mono_object_allocate_ptrfree':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3321: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc_atomic'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> `mono_object_allocate':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3304: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc'
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3304: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> &gt; `mono_object_allocate_ptrfree':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3321: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc_atomic'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> &gt; `mono_object_allocate_spec':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3329: undefined
</I>&gt;<i> &gt; reference to `GC_local_gcj_malloc'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> &gt; `mono_object_allocate_ptrfree':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3321: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc_atomic'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(object.o): In function
</I>&gt;<i> `mono_object_allocate':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/object.c:3304: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc'
</I>&gt;<i> &gt; ./.libs/libmonoruntime.a(boehm-gc.o): In function
</I>&gt;<i> `mono_gc_alloc_fixed':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/metadata/boehm-gc.c:332: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc'
</I>&gt;<i> &gt; ../utils/.libs/libmonoutils.a(mono-hash.o): In function
</I>&gt;<i> &gt; `g_hash_table_resize':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/utils/mono-hash.c:724: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc'
</I>&gt;<i> &gt; ../utils/.libs/libmonoutils.a(mono-hash.o): In function
</I>&gt;<i> &gt; `mono_g_hash_table_new_full':
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/utils/mono-hash.c:188: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc'
</I>&gt;<i> &gt; /work/mono/src/mono-1.9.1/mono/utils/mono-hash.c:199: undefined
</I>&gt;<i> &gt; reference to `GC_local_malloc'
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>../utils/.libs/libmonoutils.a(mono-hash.o):/work/mono/src/mono-1.9.1/mon
&gt;<i> &gt; o/utils/mono-hash.c:339: more undefined references to
</I>&gt;<i> `GC_local_malloc'
</I>&gt;<i> &gt; follow
</I>&gt;<i> &gt; collect2: ld returned 1 exit status
</I>&gt;<i> &gt; make[3]: *** [pedump] Error 1
</I>&gt;<i> &gt; make[3]: Leaving directory `/work/mono/src/mono-1.9.1/mono/metadata'
</I>&gt;<i> &gt; make[2]: *** [all-recursive] Error 1
</I>&gt;<i> &gt; make[2]: Leaving directory `/work/mono/src/mono-1.9.1/mono'
</I>&gt;<i> &gt; make[1]: *** [all-recursive] Error 1          
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I am using Fedora Core 8
</I>&gt;<i> &gt; gcc --version
</I>&gt;<i> &gt; gcc (GCC) 4.1.2 20070925 (Red Hat 4.1.2-33)
</I>&gt;<i> &gt; Copyright (C) 2006 Free Software Foundation, Inc.
</I>&gt;<i> &gt; This is free software; see the source for copying conditions.  There
</I>&gt;<i> is
</I>&gt;<i> &gt; NO
</I>&gt;<i> &gt; warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR
</I>&gt;<i> &gt; PURPOSE.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; uname -a
</I>&gt;<i> &gt; Linux 2.6.25.9-40.fc8 #1 SMP Fri Jun 27 16:25:53 EDT 2008 i686 i686
</I>&gt;<i> i386
</I>&gt;<i> &gt; GNU/Linux
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> When I was building for N800, I had to configure with
</I>&gt;<i> 
</I>&gt;<i> --with-tls=pthread
</I>&gt;<i> 
</I>&gt;<i> to dodge those missing GC_local_xxx references. Can't tell you why
</I>&gt;<i> exactly :P
</I>&gt;<i> 
</I>&gt;<i> Tim
</I>&gt;<i> 
</I>


     - - - - -                              Cisco                            - - - - -         
This e-mail and any attachments may contain information which is confidential, 
proprietary, privileged or otherwise protected by law. The information is solely 
intended for the named addressee (or a person responsible for delivering it to 
the addressee). If you are not the intended recipient of this message, you are 
not authorized to read, print, retain, copy or disseminate this message or any 
part of it. If you have received this e-mail in error, please notify the sender 
immediately by return e-mail and delete it from your computer.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039148.html">[Mono-list] Compile mono 1.9.1 for arm linux
</A></li>
	<LI>Next message: <A HREF="039150.html">[Mono-list] Compile mono 1.9.1 for arm linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39149">[ date ]</a>
              <a href="thread.html#39149">[ thread ]</a>
              <a href="subject.html#39149">[ subject ]</a>
              <a href="author.html#39149">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
