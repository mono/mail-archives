<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] TcpChannel constructor throws SocketException with DHCP	on Mac OS X
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20TcpChannel%20constructor%20throws%20SocketException%20with%20DHCP%0A%09on%20Mac%20OS%20X&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035622.html">
   <LINK REL="Next"  HREF="035639.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] TcpChannel constructor throws SocketException with DHCP	on Mac OS X</H1>
    <B>Robert Smallshire</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20TcpChannel%20constructor%20throws%20SocketException%20with%20DHCP%0A%09on%20Mac%20OS%20X&In-Reply-To="
       TITLE="[Mono-list] TcpChannel constructor throws SocketException with DHCP	on Mac OS X">robert at smallshire.org.uk
       </A><BR>
    <I>Sat Jul 14 05:59:42 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="035622.html">[Mono-list] Monodevelop Addins problems
</A></li>
        <LI>Next message: <A HREF="035639.html">[Mono-list] TcpChannel constructor throws SocketException with	DHCP on Mac OS X
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35623">[ date ]</a>
              <a href="thread.html#35623">[ thread ]</a>
              <a href="subject.html#35623">[ subject ]</a>
              <a href="author.html#35623">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The following program, which simply constructs a TcpChannel object fails on
Mono 1.2.4 with a SocketException.

using System.Runtime.Remoting.Channels.Tcp;
namespace Test {
    class Program {
        static void Main(string[] args) {
            TcpChannel channel = new TcpChannel(1234);
        }
    }
}

Unhandled Exception: System.Net.Sockets.SocketException: No such host is
known
  at System.Net.Dns.hostent_to_IPHostEntry (System.String h_name,
System.String[] h_aliases, System.String[] h_addrlist) [0x00000] 
  at System.Net.Dns.GetHostByName (System.String hostName) [0x00000] 
  at System.Net.Dns.Resolve (System.String hostName) [0x00000] 
  at System.Runtime.Remoting.Channels.Tcp.TcpServerChannel.Init
(IServerChannelSinkProvider serverSinkProvider) [0x00000] 
  at System.Runtime.Remoting.Channels.Tcp.TcpServerChannel..ctor
(IDictionary properties, IServerChannelSinkProvider serverSinkProvider)
[0x00000] 
  at System.Runtime.Remoting.Channels.Tcp.TcpChannel.Init (IDictionary
properties, IClientChannelSinkProvider clientSink,
IServerChannelSinkProvider serverSink) [0x00000] 
  at System.Runtime.Remoting.Channels.Tcp.TcpChannel..ctor (Int32 port)
[0x00000] 
  at TamGeoTest.Program.Main (System.String[] args) [0x00000]

The problem is that GetHostByName fails with 'No such host is known' when my
Mac is configured to use DHCP. If I add an explicit entry for my hostname
and IP address into /etc/hosts then it works fine.

The same code works fine on .NET on Windows with DHCP assigned addresses,
and works fine with static IP addresses. So, first of all, how do I
construct a TcpChannel in the precense of DHCP assigned addresses, and
secondly is this a bug in the Mono implementation, given that it works under
.NET ?

Many thanks,

Rob

</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035622.html">[Mono-list] Monodevelop Addins problems
</A></li>
	<LI>Next message: <A HREF="035639.html">[Mono-list] TcpChannel constructor throws SocketException with	DHCP on Mac OS X
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35623">[ date ]</a>
              <a href="thread.html#35623">[ thread ]</a>
              <a href="subject.html#35623">[ subject ]</a>
              <a href="author.html#35623">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
