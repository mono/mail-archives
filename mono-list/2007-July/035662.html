<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Need help with DllImport (P/Invoke) and UCS-4	unicode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Need%20help%20with%20DllImport%20%28P/Invoke%29%20and%20UCS-4%0A%09unicode&In-Reply-To=469CE00B.9010501%40cheimes.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035661.html">
   <LINK REL="Next"  HREF="035663.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Need help with DllImport (P/Invoke) and UCS-4	unicode</H1>
    <B>Andreas F&#228;rber</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Need%20help%20with%20DllImport%20%28P/Invoke%29%20and%20UCS-4%0A%09unicode&In-Reply-To=469CE00B.9010501%40cheimes.de"
       TITLE="[Mono-list] Need help with DllImport (P/Invoke) and UCS-4	unicode">andreas.faerber at web.de
       </A><BR>
    <I>Tue Jul 17 13:00:38 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="035661.html">[Mono-list] Need help with DllImport (P/Invoke) and UCS-4	unicode
</A></li>
        <LI>Next message: <A HREF="035663.html">[Mono-list] Need help with DllImport (P/Invoke) and	UCS-4	unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35662">[ date ]</a>
              <a href="thread.html#35662">[ thread ]</a>
              <a href="subject.html#35662">[ subject ]</a>
              <a href="author.html#35662">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Am 17.07.2007 um 17:28 schrieb Christian Heimes:

&gt;<i> Miguel de Icaza wrote:
</I>&gt;&gt;<i> Sadly, you have to do it manually.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We brought this up a few times at ECMA and three or four times with
</I>&gt;&gt;<i> different people at Microsoft and we did not get very far.     The
</I>&gt;&gt;<i> solution is trivial, and we could implement it in Mono (expand the
</I>&gt;&gt;<i> CharSet definition to include UTF8, UCS4 explicit encodings), but it
</I>&gt;&gt;<i> would not be compatible with .NET, so we decided against doing it.
</I>&gt;<i>
</I>&gt;<i> It's a shame that a product which is advertised cross platform
</I>&gt;<i> compatible doesn't implement or at least provide support for important
</I>&gt;<i> standards. IIRC Charset.Unicode is equal to Little Endian UCS-2.  
</I>&gt;<i> Charset
</I>&gt;<i> does neither take UTF-8 and UCS-4 nor Big Endian into account. :(
</I>
.NET was never advertised as cross-platform to my knowledge. That's a  
feature introduced by Mono.
Windows had A and W APIs corresponding to SBCS and UCS-2 so that's  
the options Microsoft needed and that's what we got...


Miguel, if we don't want to extend the official class library why not  
do it the way the SDF does it for .NET CF? Mono could provide a  
separate enumeration/attribute/etc. in a Mono namespace, call it the  
same or &lt;origName&gt;Ex and extend that &quot;copy&quot; using an Adapter pattern  
or inheritance where possible (for example to enhance  
System.Windows.Forms.Application they have  
OpenNetCF.Windows.Forms.ApplicationEx I believe). That'll still not  
work on .NET but would be a clean way to let Mono developers do their  
work while clarifying through the namespace and reference to an  
assembly that it's an extension. (On the other hand, .NET developers  
will be used to reading the documentation's small print on what is  
available in which version of .NET/.NETCF/Windows so long-term it  
might be acceptable to actually extend the original class library and  
to conditionally emit warnings when used.)

And if short-term a custom marshaler is needed as a workaround  
wouldn't that be a prime candidate for a Mono-bundled and .NET- 
compatible library, say Mono.InteropServices? Instead of telling  
people a recipe to cook their own.

Just a thought,

Andreas
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035661.html">[Mono-list] Need help with DllImport (P/Invoke) and UCS-4	unicode
</A></li>
	<LI>Next message: <A HREF="035663.html">[Mono-list] Need help with DllImport (P/Invoke) and	UCS-4	unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35662">[ date ]</a>
              <a href="thread.html#35662">[ thread ]</a>
              <a href="subject.html#35662">[ subject ]</a>
              <a href="author.html#35662">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
