<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mod-mono-server2 with threadpool does not correct threadstatic
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20mod-mono-server2%20with%20threadpool%20does%20not%20correct%0A%20threadstatic&In-Reply-To=f6l4pk%24v4b%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035544.html">
   <LINK REL="Next"  HREF="035546.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mod-mono-server2 with threadpool does not correct threadstatic</H1>
    <B>Adriaan van Kekem</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20mod-mono-server2%20with%20threadpool%20does%20not%20correct%0A%20threadstatic&In-Reply-To=f6l4pk%24v4b%241%40sea.gmane.org"
       TITLE="[Mono-list] mod-mono-server2 with threadpool does not correct threadstatic">adriaanvk at gmail.com
       </A><BR>
    <I>Fri Jul  6 06:32:11 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="035544.html">[Mono-list] mod-mono-server2 with threadpool does not correct	threadstatic
</A></li>
        <LI>Next message: <A HREF="035546.html">[Mono-list] mod-mono-server2 with threadpool does not correct threadstatic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35545">[ date ]</a>
              <a href="thread.html#35545">[ thread ]</a>
              <a href="subject.html#35545">[ subject ]</a>
              <a href="author.html#35545">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

So, is there a possibility to solve this problem without manually clearing
the stack by each new request in the global.asax? or is there no standard
way to solve this problem?

greetings,

Adriaan



Robert Jordan wrote:
&gt;<i> 
</I>&gt;<i> Adriaan van Kekem wrote:
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I have a mono application running with mod_mono on mono 1.2.4. I have
</I>&gt;&gt;<i> created somewhere in my webapp a threadstatic variable, actually a
</I>&gt;&gt;<i> generic
</I>&gt;&gt;<i> stack with specific objects. No i am running my webapp, and seeing my log
</I>&gt;&gt;<i> file, i see that sometimes the same thread is reused later. This is
</I>&gt;&gt;<i> logical,
</I>&gt;&gt;<i> because there is a threadpool containing all threads, using them later
</I>&gt;&gt;<i> again. But when i see that the same thread is reused, the threadstatic
</I>&gt;&gt;<i> variables are not reset. I don't know if this is a bug, from compiler
</I>&gt;&gt;<i> view
</I>&gt;&gt;<i> its right, because it's the same thread. But from webapplication view, i
</I>&gt;&gt;<i> think this is not right. 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Is there any solution for this, or have i to report this as a real bug?
</I>&gt;<i> 
</I>&gt;<i> This is not a bug. As you said, the threads are reused. That's why
</I>&gt;<i> the [ThreadStatic] fields are already initialized.
</I>&gt;<i> 
</I>&gt;<i> Robert
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://www.nabble.com/mod-mono-server2-with-threadpool-does-not-correct-threadstatic-tf4034291.html#a11461978">http://www.nabble.com/mod-mono-server2-with-threadpool-does-not-correct-threadstatic-tf4034291.html#a11461978</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035544.html">[Mono-list] mod-mono-server2 with threadpool does not correct	threadstatic
</A></li>
	<LI>Next message: <A HREF="035546.html">[Mono-list] mod-mono-server2 with threadpool does not correct threadstatic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35545">[ date ]</a>
              <a href="thread.html#35545">[ thread ]</a>
              <a href="subject.html#35545">[ subject ]</a>
              <a href="author.html#35545">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
