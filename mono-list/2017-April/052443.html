<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono caused ANTLR test failure on s390x
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.dot.net?Subject=Re%3A%20%5BMono-list%5D%20Mono%20caused%20ANTLR%20test%20failure%20on%20s390x&In-Reply-To=%3COFAA5EB95D.3D6BF475-ON0025810D.00185DBD-6525810E.003F7BB1%40notes.na.collabserv.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052442.html">
   <LINK REL="Next"  HREF="052444.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono caused ANTLR test failure on s390x</H1>
    <B>Vaibhav Vaingankar</B> 
    <A HREF="mailto:mono-list%40lists.dot.net?Subject=Re%3A%20%5BMono-list%5D%20Mono%20caused%20ANTLR%20test%20failure%20on%20s390x&In-Reply-To=%3COFAA5EB95D.3D6BF475-ON0025810D.00185DBD-6525810E.003F7BB1%40notes.na.collabserv.com%3E"
       TITLE="[Mono-list] Mono caused ANTLR test failure on s390x">vaibhavv at us.ibm.com
       </A><BR>
    <I>Wed Apr 26 11:33:24 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052442.html">[Mono-list] ❣Re: hard facts
</A></li>
        <LI>Next message (by thread): <A HREF="052444.html">[Mono-list] new info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52443">[ date ]</a>
              <a href="thread.html#52443">[ thread ]</a>
              <a href="subject.html#52443">[ subject ]</a>
              <a href="author.html#52443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Hi,
Greetings.

We are building ANTL4 on s390x RHEL 7.2 which targets different languages
(csharp, java, javascript, python). We have used mono to test csharp
target. However I have encountered a glitch while executing test cases. The
csharp tests fail with unhandled nullpointer exception.

   Steps used to build mono

   sudo yum install -y autoconf automake libtool which gcc-c++ make
   git clone <A HREF="https://github.com/mono/mono">https://github.com/mono/mono</A>
   cd mono
   git checkout mono-4.8.0.371
   ./autogen.sh --disable-nls
   make get-monolite-latest
   make
   sudo make install

   The resultant binaries were used to test ANTLR4

   git clone <A HREF="https://github.com/antlr/antlr4.git">https://github.com/antlr/antlr4.git</A>
   cd antlr4
   git checkout 4.6
   export MAVEN_OPTS=&quot;-Xmx1G&quot;
   mvn install -DskipTests=true
   mvn test

We tried steps mentioned above on x86 architecture, which worked fine. So
this could be issue with the mono runtime environment on s390x
architecture.

Any guidance would be appreciated.

This is the error which we have encountered
   Unhandled Exception:
   System.TypeInitializationException: The type initializer for 'TLexer'
   threw an exception. ---&gt; System.NotSupportedException: Could not
   deserialize ATN with UUID aadb8d7e-aeef-4415-2e04-cfd604822bad (expected
   aadb8d7e-aeef-4415-ad2b-8204d6cf042e or a legacy UUID).
     at Antlr4.Runtime.Atn.ATNDeserializer.CheckUUID () [0x00043] in
   &lt;76524c89e9ab4d24a159bd01cd6f7212&gt;:0
     at Antlr4.Runtime.Atn.ATNDeserializer.Deserialize (System.Char[] data)
   [0x0000d] in &lt;76524c89e9ab4d24a159bd01cd6f7212&gt;:0
     at TLexer..cctor () [0x0009b] in &lt;dea3fa93188448afa2dd62e733b0b53e&gt;:0
      --- End of inner exception stack trace ---
     at (wrapper managed-to-native)
   System.Object:__icall_wrapper_mono_generic_class_init (intptr)
     at Test.Main (System.String[] args) [0x00009] in
   &lt;dea3fa93188448afa2dd62e733b0b53e&gt;:0
   [ERROR] FATAL UNHANDLED EXCEPTION: System.TypeInitializationException:
   The type initializer for 'TLexer' threw an exception. ---&gt;
   System.NotSupportedException: Could not deserialize ATN with UUID
   aadb8d7e-aeef-4415-2e04-cfd604822bad (expected
   aadb8d7e-aeef-4415-ad2b-8204d6cf042e or a legacy UUID).
     at Antlr4.Runtime.Atn.ATNDeserializer.CheckUUID () [0x00043] in
   &lt;76524c89e9ab4d24a159bd01cd6f7212&gt;:0
     at Antlr4.Runtime.Atn.ATNDeserializer.Deserialize (System.Char[] data)
   [0x0000d] in &lt;76524c89e9ab4d24a159bd01cd6f7212&gt;:0
     at TLexer..cctor () [0x0009b] in &lt;dea3fa93188448afa2dd62e733b0b53e&gt;:0
      --- End of inner exception stack trace ---
     at (wrapper managed-to-native)
   System.Object:__icall_wrapper_mono_generic_class_init (intptr)

Attaching the complete test log.
(See attached file: antlr4.log)

Thanks and regards,
Vaibhav Vaingankar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/mono-list/attachments/20170426/2936dbf9/attachment-0001.html">http://lists.dot.net/pipermail/mono-list/attachments/20170426/2936dbf9/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: antlr4.log
Type: application/octet-stream
Size: 1035878 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.dot.net/pipermail/mono-list/attachments/20170426/2936dbf9/attachment-0001.obj">http://lists.dot.net/pipermail/mono-list/attachments/20170426/2936dbf9/attachment-0001.obj</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052442.html">[Mono-list] ❣Re: hard facts
</A></li>
	<LI>Next message (by thread): <A HREF="052444.html">[Mono-list] new info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52443">[ date ]</a>
              <a href="thread.html#52443">[ thread ]</a>
              <a href="subject.html#52443">[ subject ]</a>
              <a href="author.html#52443">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
