<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Problem connecting to a secure site via a NTLM	authenticating proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Problem%20connecting%20to%20a%20secure%20site%20via%20a%20NTLM%0A%09authenticating%20proxy&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046584.html">
   <LINK REL="Next"  HREF="046596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Problem connecting to a secure site via a NTLM	authenticating proxy</H1>
    <B>Andrew Bryson</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Problem%20connecting%20to%20a%20secure%20site%20via%20a%20NTLM%0A%09authenticating%20proxy&In-Reply-To="
       TITLE="[Mono-list] Problem connecting to a secure site via a NTLM	authenticating proxy">abryson at rm.com
       </A><BR>
    <I>Mon Feb 14 14:46:16 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="046584.html">[Mono-list] Problem connecting to a secure site via a NTLM	authenticating proxy
</A></li>
        <LI>Next message: <A HREF="046596.html">[Mono-list] Problem connecting to a secure site via a NTLM authenticating proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46586">[ date ]</a>
              <a href="thread.html#46586">[ thread ]</a>
              <a href="subject.html#46586">[ subject ]</a>
              <a href="author.html#46586">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for your response Steve.  I'm afraid I made a mistake in my original post - *hangs head in shame*.  The same binary DOES work on Windows when executed through the .NET framework.  The problem is specific to the mono runtime only.  

I'll give curl a try out though, thanks for the suggestion.  It may point to something wrong as you said.

Any hints to the mono problem would be appreicated.  I'm happy to gather more information (e.g. from tcpdump) if required.

Thanks,
andy

-----Original Message-----
From: Steve Lessard [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">s_lessard at yahoo.com</A>]
Sent: Mon 14/02/2011 18:31
To: Andrew Bryson
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list at lists.ximian.com</A>
Subject: Re: [Mono-list] Problem connecting to a secure site via a NTLM authenticating proxy
 
You should try isolating the problem by removing .NET and Mono altogether. Try using curl to make the same connection. Curl has support for all types of proxy servers as well as good debugging capabilities. Using curl may help you gain more insight into how connections through the proxy work.

-SteveL


On Feb 14, 2011, at 6:12 AM, Andrew Bryson &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">abryson at rm.com</A>&gt; wrote:

&gt;<i> 
</I>&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> We've had a problem within our software for a while that our client on Mac
</I>&gt;<i> (OS X 10.5-106, Mono 2.6) has not been able to connect to websites which
</I>&gt;<i> require HTTPS when connecting through a NTLM authentication proxy (Microsoft
</I>&gt;<i> ISA 2006).  In trying to get to the bottom of this I've discovered:
</I>&gt;<i> 
</I>&gt;<i> - This is a problem with Mono 2.6 and 2.8(.2).
</I>&gt;<i> - NTLM authentication works through the ISA proxy when the target site uses
</I>&gt;<i> plain HTTP.  We must connect securely via HTTPS.
</I>&gt;<i> - The same problem happens on Windows when I execute my C# .NET 2.0 app
</I>&gt;<i> directly (i.e. not launching it with 'mono').
</I>&gt;<i> 
</I>&gt;<i> I have put together a small application to allow me to test this issue. 
</I>&gt;<i> When calling HttpWebRequest.GetResponse() the following exception occurs:
</I>&gt;<i> <A HREF="http://pastie.org/1562663.">http://pastie.org/1562663.</A>
</I>&gt;<i> 
</I>&gt;<i> I've tried playing around with the HttpWebRequest.PreAuthenticate property,
</I>&gt;<i> and associating the credentials with the HttpWebRequest.Credentials object
</I>&gt;<i> (but the website does not require auth, only the proxy).
</I>&gt;<i> 
</I>&gt;<i> The same binary executed on Windows works.  I realy hope that somebody is
</I>&gt;<i> able to help me out in either fixing the problem, or confirming that it's a
</I>&gt;<i> known issue in the current Mono framework.  Here's the test application:
</I>&gt;<i> <A HREF="http://pastie.org/1562659.">http://pastie.org/1562659.</A>
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> andy
</I>&gt;<i> -- 
</I>&gt;<i> View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Problem-connecting-to-a-secure-site-via-a-NTLM-authenticating-proxy-tp3305051p3305051.html">http://mono.1490590.n4.nabble.com/Problem-connecting-to-a-secure-site-via-a-NTLM-authenticating-proxy-tp3305051p3305051.html</A>
</I>&gt;<i> Sent from the Mono - General mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>____________________________________________________________________

RM Assessment is sponsoring the 9th e-Assessment Question Conference in London.
Visit us on our stand!

30th - 31st March 2011, America Square Conference Centre, London
<A HREF="http://www.rmassessment.co.uk/events/e-assessment_2011">http://www.rmassessment.co.uk/events/e-assessment_2011</A>

____________________________________________________________________

P.S. Think Green - don't print this email unless you really need to.

This message is confidential. You should not copy it or disclose its contents to anyone. You may use and apply the information only for the intended purpose. Internet communications are not secure and therefore RM Education does not accept legal responsibility for the contents of this message. Any views or opinions presented are only those of the author and not those of RM Education. If this email has come to you in error please delete it and any attachments. Please note that RM Education may intercept incoming and outgoing email communications.

RM Education plc is a company registered in England and Wales, Company Reg. No: 01148594; Registered Office: New Mill House, 183 Milton Park, Abingdon, OXON OX14 4SE; VAT No: 630 8236 56
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20110214/c3193de7/attachment-0001.html">http://lists.ximian.com/pipermail/mono-list/attachments/20110214/c3193de7/attachment-0001.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046584.html">[Mono-list] Problem connecting to a secure site via a NTLM	authenticating proxy
</A></li>
	<LI>Next message: <A HREF="046596.html">[Mono-list] Problem connecting to a secure site via a NTLM authenticating proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46586">[ date ]</a>
              <a href="thread.html#46586">[ thread ]</a>
              <a href="subject.html#46586">[ subject ]</a>
              <a href="author.html#46586">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
