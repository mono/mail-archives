<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Objects sizes and the GC.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:Rafael.Ferreira%40apollogrp.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="022623.html">
   <LINK REL="Next"  HREF="022626.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Objects sizes and the GC.
   </H1>
    <B>Rafael Ferreira
    </B> 
    <A HREF="mailto:Rafael.Ferreira%40apollogrp.edu"
       TITLE="[Mono-list] Objects sizes and the GC.">Rafael.Ferreira@apollogrp.edu
       </A><BR>
    <I>Fri, 6 Aug 2004 09:37:24 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="022623.html">[Mono-list] eclipse, ikvm, linux, ppc
</A></li>
        <LI> Next message: <A HREF="022626.html">[Mono-list] What Is Most Reliable Mono Install for Fedora Core
 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22624">[ date ]</a>
              <a href="thread.html#22624">[ thread ]</a>
              <a href="subject.html#22624">[ subject ]</a>
              <a href="author.html#22624">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey everyone, 

I'm working on an application using mono/.net that implements various
in-memeory cache algorithms for very large objects and one of the issues I'm
trying to address is when to swap cached objects out of memory.
Historically, this would be done in 3 different ways: by setting a hard
limit on the number of objects cached and swapping out after reaching the
limit, by querying the memory utilization every time you would something
like malloc() and finally by using some algorithm that would attempt to
predict the need for swapping based upon the hit/miss ratio. 


Now, I'm building something that utilizes both the hit/miss ratio but that
would be smart enough to not rely on the OS to swap stuff to disk and that's
where I'm having issues. To the best of my knowledge, the only interface
into the inner workings on the GC is via System.GC (GC.GetTotalMemory) and
that gives me basically no access to how much memory an object is taking at
any given time. I do understand that this is done that way for a reason,
since memory footprint in a GC based environment is not an exact science,
but I believe that there must be another facility that I can use to at least
get an approximate value of an object memory utilization. 

Also, I've heard of Marshal.SizeOf() but according to the documentation that
only works in unmanaged objects, and I think it would be too costly of a
process to marshal my objects just so I can query it's memory footprint.
Speed is very, very important in my app. 

Let me know if you guys can help me, 

- raf


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="022623.html">[Mono-list] eclipse, ikvm, linux, ppc
</A></li>
	<LI> Next message: <A HREF="022626.html">[Mono-list] What Is Most Reliable Mono Install for Fedora Core
 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22624">[ date ]</a>
              <a href="thread.html#22624">[ thread ]</a>
              <a href="subject.html#22624">[ subject ]</a>
              <a href="author.html#22624">[ author ]</a>
         </LI>
       </UL>
</body></html>
