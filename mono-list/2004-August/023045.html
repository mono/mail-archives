<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] C# bindings and FILE* question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jonpryor%40vt.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="023041.html">
   <LINK REL="Next"  HREF="023053.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] C# bindings and FILE* question
   </H1>
    <B>Jonathan Pryor
    </B> 
    <A HREF="mailto:jonpryor%40vt.edu"
       TITLE="[Mono-list] C# bindings and FILE* question">jonpryor@vt.edu
       </A><BR>
    <I>Mon, 30 Aug 2004 07:54:32 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="023041.html">[Mono-list] C# bindings and FILE* question
</A></li>
        <LI> Next message: <A HREF="023053.html">[Mono-list] C# bindings and FILE* question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23045">[ date ]</a>
              <a href="thread.html#23045">[ thread ]</a>
              <a href="subject.html#23045">[ subject ]</a>
              <a href="author.html#23045">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2004-08-30 at 04:01, Артем Попов wrote:
&gt;<i> Is it possible to pass a Stream object to the C code as FILE* pointer?
</I>
No.  They're completely different.  You could P/Invoke into libc for
fopen(3), fclose(3), etc., and use IntPtr as a FILE*, if necessary.

&gt;<i> I'd like to wrap some native code that has lots of functions with FILE*-
</I>&gt;<i> args and I want to pass at least to kind of Stream from the class
</I>&gt;<i> library to them (the Memory Stream and the File Stream)
</I>
This isn't possible, even if you were in C.  FILE* doesn't support
polymorphism, so there's no way for you to handle the read/write
requests, so that you could write to a memory buffer instead of a file. 
That's just the limitations of the standard C library, and there's no
way to change it (unless you change the standard to support such
functionality, and wait for the implementations to match the
standard...).

This is one of the reasons why C++ introduced iostreams (that, and to
have type-safe I/O of class objects without needing extra casts).

Consequently, if you want to read data written to a FILE*, you have to
use a temporary file first, and then read the file afterward.

 - Jon



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="023041.html">[Mono-list] C# bindings and FILE* question
</A></li>
	<LI> Next message: <A HREF="023053.html">[Mono-list] C# bindings and FILE* question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23045">[ date ]</a>
              <a href="thread.html#23045">[ thread ]</a>
              <a href="subject.html#23045">[ subject ]</a>
              <a href="author.html#23045">[ author ]</a>
         </LI>
       </UL>
</body></html>
