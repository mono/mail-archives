<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mcs use codepage and program with chinese
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jonpryor%40vt.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="022684.html">
   <LINK REL="Next"  HREF="022681.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mcs use codepage and program with chinese
   </H1>
    <B>Jonathan Pryor
    </B> 
    <A HREF="mailto:jonpryor%40vt.edu"
       TITLE="[Mono-list] mcs use codepage and program with chinese">jonpryor@vt.edu
       </A><BR>
    <I>Tue, 10 Aug 2004 08:05:42 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="022684.html">[Mono-list] mcs use codepage and program with chinese
</A></li>
        <LI> Next message: <A HREF="022681.html">[Mono-list] Mod_mono syntax for multiple webapps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22687">[ date ]</a>
              <a href="thread.html#22687">[ thread ]</a>
              <a href="subject.html#22687">[ subject ]</a>
              <a href="author.html#22687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2004-08-10 at 00:09,
=?gb2312?q?=FFffffb8=FFffffb8=20=FFffffbf=FFffffe4?= wrote:
&lt;snip/&gt;
&gt;<i> We use the tool &quot;native2ascii&quot; of JDK and run &quot;native2ascii Hello.cs
</I>&gt;<i> hello1.cs&quot;,then we get Hello1.cs in ascii coding.
</I>&gt;<i> 
</I>&gt;<i> run &quot;mcs -codepage:utf8 Hello1.cs&quot; ,then get Hello1.ex.Run hello1.exe,
</I>&gt;<i> In windows we get right output &quot;你好&quot;;
</I>&gt;<i> 
</I>&gt;<i> but in Linux it output some strange characters.
</I>
It's strange because you're doing *really* strange things.  native2ascii
doesn't convert to UTF-8, it converts to a custom ASCII-compatible
encoding.  It *isn't* UTF-8.  But then you go and tell mcs that the
codepage is UTF-8, and since 0x00-0x7F of UTF-8 *is* ASCII, this is akin
to just printing out the native2ascii text.  No wonder it looks
strange.  I do have to wonder why Windows prints the right text, except
in my experience the Windows console *sucks* when it comes to i18n, at
least compared with Linux.  Redirecting to a file and opening with
NOTEPAD.EXE gives me better success on Windows than sticking with the
console....

On Linux, make life easy: Skip native2ascii, save the file as UTF-8, and
compile with mcs -codepage:utf8:

        <A HREF="mailto:jon@melchior">jon@melchior</A>:tmp$ cat hwc.cs
        // Hello World, Chinese version
        using System;
        namespace Test
        {
           public class Hello
           {
             public static void Main()
             {
                 Console.WriteLine(&quot;你好&quot;);
             }
           }
        }
         
        <A HREF="mailto:jon@melchior">jon@melchior</A>:tmp$ mcs -codepage:utf8 hwc.cs
        Compilation succeeded
        <A HREF="mailto:jon@melchior">jon@melchior</A>:tmp$ mono hwc.exe
        你好

It may be that the reason your original compilation attempt didn't work
is that mcs didn't understand codpage 936.

Alternatively, it may not have worked for you originally because your
LANG environment variable isn't set properly.  Mine is set to
en_US.UTF-8, so your chinese text is rendered properly in the console.

 - Jon



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="022684.html">[Mono-list] mcs use codepage and program with chinese
</A></li>
	<LI> Next message: <A HREF="022681.html">[Mono-list] Mod_mono syntax for multiple webapps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22687">[ date ]</a>
              <a href="thread.html#22687">[ thread ]</a>
              <a href="subject.html#22687">[ subject ]</a>
              <a href="author.html#22687">[ author ]</a>
         </LI>
       </UL>
</body></html>
