<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono.Posix.Syscall.passwd patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lorenb%40mmgsecurity.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="023249.html">
   <LINK REL="Next"  HREF="023255.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono.Posix.Syscall.passwd patch
   </H1>
    <B>Loren Bandiera
    </B> 
    <A HREF="mailto:lorenb%40mmgsecurity.com"
       TITLE="[Mono-list] Mono.Posix.Syscall.passwd patch">lorenb@mmgsecurity.com
       </A><BR>
    <I>Tue, 14 Sep 2004 18:40:43 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="023249.html">[Mono-list] Embedding resources (bug?)
</A></li>
        <LI> Next message: <A HREF="023255.html">[Mono-list] Mono.Posix.Syscall.passwd patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23253">[ date ]</a>
              <a href="thread.html#23253">[ thread ]</a>
              <a href="subject.html#23253">[ subject ]</a>
              <a href="author.html#23253">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-esCU2lAc8s30Bxt7iYoG
Content-Type: text/plain
Content-Transfer-Encoding: 7bit


Here is my patch for adding a wrapper for getpwnam(3) to
Mono.Posix.Syscall.  I tried to model it after stat().

You can use this to get the password file entry for a given username.
The fields are:

	Account
	Password
	Uid
	Gid
	Gecos
	HomeDirectory
	Shell

Some sample code:

using System;
using Mono.Posix;

Passwd passwd;
string username = &quot;root&quot;;
int result = 0;

result = Syscall.passwd (username, out passwd);
Console.WriteLine (&quot;username: {0} shell: {1}&quot;, username, passwd.Shell)


Thanks to Jackson Harper for helping me with my testing issues.  

-- 
Loren Bandiera, CISSP &lt;<A HREF="mailto:lorenb@mmgsecurity.com">lorenb@mmgsecurity.com</A>&gt;
MMG Security, Inc.

--=-esCU2lAc8s30Bxt7iYoG
Content-Disposition: attachment; filename=mono-posix-getpwnam.tgz
Content-Type: application/x-compressed-tar; name=mono-posix-getpwnam.tgz
Content-Transfer-Encoding: base64

H4sICJttR0EAA2ZyLjIwNzc0LjAubW9uby1wb3NpeC1nZXRwd25hbS50YXIA7VbbbttGENXr8ium
fpJMUeZNVCxDgYOmcFzEhRDBT0VhMNRaJkqRBC+xhcD/3tkLl6QjKQ91b+geQOLu7HA4M7uzZ7ZZ
mll5VsZP1oZW+WMabid5WEUPg9eDjQh8nz2d2dTmc0fM+dALZgPHdlwnCALX9wa2E/iz2QDsV/Th
IOqyCguAQZIVNP18TI8W5RE7Mhj1/I/gOl3Tpzlsw6jIyklkLP48jE8/ruA+TugczrZ4vMRfWed5
VlRnzZfGX4yCVkVMv8TpBgp8lHGWgjPxjHV8fw9WDVaBs9Y1y7LUhLgB3IQ7cG3bx7+57c09ByyW
ecJMmKbZ6jo+rGgudd2548z9QOgal5dgnU/HHpj4776By0sDSHwPQwqLBfxy+/HjCH2r6iLlkwtc
ldOyKtZ1jorW2/UdVg0d4eKzYRpmnFbwQJOcFnc3GPndklXX3TIsy8c1DKMHPG6n7DSxl8aGSYTk
NIyirE6rjiRnr2TFmomY0dM6bscbMZaqGxplZWf+kG3pOi46khJdSnA6gq/MSYL+11EFuXDrNIcF
NBfAsPEOQzJ5NvI2GyhpUuBccEuN52ght97mjzwb7E0VgFoRX+NrGIsS45jLNh3ZppGxyFopm3G5
jFCt4JjLeZxKymfCTem0jbNn458uu38NtlFpsVM64afUEhv0ygzwnfvf89ypuv/ZGO//wPP1/f93
QN7/q10ZhUkyicq/hgGi8ixK8GydtWetO2w/f5AWnKDHC07Q9ZlRQzslrg8/16kih2kw9z1FDmiI
sUNH/SU/uHNv2uEH/9wez8BkD+QYzhCE/X59nyTXW0ZqMDxhwfBYPvCb/2QMP6VVsVtmeFkvTr6l
g4KGa7yyTka/MVN5/TmJI+SUsMIHfaqoYBiRA645vE6rZVUADkfiQjvuABpGFfw6u8qT1ib/wnGK
kh/uchQhWV01HjVMBR2Z4iouZPYlWYk3mYAxVvcVwVldSYe1eh/ktzjjV0y8+TJbzHR+wHNuXIYl
dDj9ofWXobT+S7caX6ChEMKzycMCQU5KhicWGedQQoetO/wNHlkvh/3kqcRxRZW1Trp6eRKJkhni
Av4vU7KAlD7KFAzF8p6Ym6Ckxb0pGKmIsSFgEf+wAFt1R/ho1jtESwjriAD/gZWM3Dia1ltY4e7d
ZGt6E5a/l7gprNKmM388BXN6/mbsnstKe25eN9t9552L3NavBnTOBCuWLE12zcl5J2K9OKKylFnY
q8N29zY+vHZ1YE3avmralUMKHzDF7+OCRlVW7I4prtpGpi3qpmD3nuhvCrNXlKog+8W4rxB7RSi7
R0LeqaYv7OSYLDstXzex5Jb3drLTI+SKTzdqKrs81d8R0ksNKy/hk1hcyS5PFac8a+yo6O5OQ0ND
Q0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ+N/jT8AMlFVyQAoAAA=


--=-esCU2lAc8s30Bxt7iYoG--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="023249.html">[Mono-list] Embedding resources (bug?)
</A></li>
	<LI> Next message: <A HREF="023255.html">[Mono-list] Mono.Posix.Syscall.passwd patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23253">[ date ]</a>
              <a href="thread.html#23253">[ thread ]</a>
              <a href="subject.html#23253">[ subject ]</a>
              <a href="author.html#23253">[ author ]</a>
         </LI>
       </UL>
</body></html>
