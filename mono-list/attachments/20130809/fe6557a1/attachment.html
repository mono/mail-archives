<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Each&nbsp;test&nbsp;framework&nbsp;has&nbsp;it&#39;s&nbsp;own&nbsp;requirements&nbsp;for&nbsp;where&nbsp;a&nbsp;config&nbsp;file&nbsp;must&nbsp;be&nbsp;located&nbsp;and&nbsp;how&nbsp;it&nbsp;should&nbsp;be&nbsp;named&nbsp;in&nbsp;order&nbsp;to&nbsp;be&nbsp;loaded&nbsp;and&nbsp;used.&nbsp;Those&nbsp;requirements&nbsp;are&nbsp;necessarily&nbsp;different&nbsp;from&nbsp;how&nbsp;.NET&nbsp;normally&nbsp;locates&nbsp;config&nbsp;files&nbsp;because&nbsp;following&nbsp;the&nbsp;.NET&nbsp;rules&nbsp;would&nbsp;load&nbsp;the&nbsp;config&nbsp;for&nbsp;the&nbsp;test&nbsp;runner&nbsp;itself&nbsp;rather&nbsp;than&nbsp;for&nbsp;your&nbsp;tests.&lt;br&gt;<br>
&lt;br&gt;In&nbsp;the&nbsp;case&nbsp;of&nbsp;NUnit,&nbsp;you&nbsp;can&nbsp;find&nbsp;the&nbsp;required&nbsp;info&nbsp;at&nbsp;&lt;a&nbsp;href=&quot;http://www.nunit.org/index.php?p=configFiles&amp;r=2.6.2&quot;&gt;http://www.nunit.org/index.php?p=configFiles&amp;r=2.6.2&lt;/a&gt;&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;Charlie&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Aug&nbsp;9,&nbsp;2013&nbsp;at&nbsp;3:24&nbsp;PM,&nbsp;David&nbsp;Curylo&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:curylod@asme.org&quot;&nbsp;target=&quot;_blank&quot;&gt;curylod@asme.org&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;I&nbsp;ran&nbsp;into&nbsp;an&nbsp;issue&nbsp;several&nbsp;months&nbsp;back&nbsp;where&nbsp;my&nbsp;code&nbsp;could&nbsp;not&nbsp;find&nbsp;ConnectionStrings&nbsp;while&nbsp;running&nbsp;my&nbsp;code&nbsp;in&nbsp;NUnit&nbsp;under&nbsp;mono,&nbsp;however,&nbsp;I&nbsp;was&nbsp;having&nbsp;trouble&nbsp;making&nbsp;a&nbsp;simple&nbsp;reproducible&nbsp;test&nbsp;case.&nbsp; Now&nbsp;I&nbsp;have&nbsp;one,&nbsp;and&nbsp;I&nbsp;suspect&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;an&nbsp;NUnit&nbsp;issue,&nbsp;as&nbsp;the&nbsp;same&nbsp;thing&nbsp;happens&nbsp;under&nbsp;xUnit.&nbsp; Rather,&nbsp;I&#39;m&nbsp;guessing&nbsp;that&nbsp;this&nbsp;has&nbsp;to&nbsp;do&nbsp;with&nbsp;how&nbsp;the&nbsp;AppDomain&nbsp;in&nbsp;mono&nbsp;resolves&nbsp;configuration&nbsp;file&nbsp;locations&nbsp;in&nbsp;shadow&nbsp;copied&nbsp;assemblies&nbsp;like&nbsp;those&nbsp;used&nbsp;by&nbsp;unit&nbsp;testing&nbsp;frameworks.&lt;br&gt;<br>
&lt;br&gt;My&nbsp;simple&nbsp;test&nbsp;is&nbsp;below.&nbsp; The&nbsp;first&nbsp;test&nbsp;will&nbsp;succeed,&nbsp;but&nbsp;the&nbsp;second&nbsp;one&nbsp;will&nbsp;fail&nbsp;only&nbsp;under&nbsp;mono&nbsp;(tried&nbsp;versions&nbsp;2.10.8.1,&nbsp;3.0.2,&nbsp;3.1.2,&nbsp;and&nbsp;3.2.0).&nbsp;Under &lt;a&nbsp;href=&quot;http://ms.net/&quot;&nbsp;target=&quot;_blank&quot;&gt;MS.NET&lt;/a&gt;,&nbsp;both&nbsp;will&nbsp;succeed.&nbsp; The&nbsp;only&nbsp;difference&nbsp;in&nbsp;the&nbsp;first&nbsp;and&nbsp;the&nbsp;second&nbsp;test&nbsp;is&nbsp;that&nbsp;the&nbsp;second&nbsp;test&nbsp;uses&nbsp;HttpUtility&nbsp;from&nbsp;System.Web,&nbsp;and&nbsp;when&nbsp;this&nbsp;happens,&nbsp;the&nbsp;ConfigurationManager.ConnectionStrings&nbsp;changes&nbsp;to&nbsp;the&nbsp;default&nbsp;one&nbsp;from &lt;a&nbsp;href=&quot;http://asp.net/&quot;&nbsp;target=&quot;_blank&quot;&gt;ASP.NET&lt;/a&gt;,&nbsp;containing&nbsp;a&nbsp;LocalSqlServer&nbsp;(SQLEXPRESS)&nbsp;and&nbsp;LocalSqliteServer.&lt;br&gt;<br>
&lt;br&gt;Is&nbsp;anyone&nbsp;able&nbsp;to&nbsp;explain&nbsp;why&nbsp;this&nbsp;would&nbsp;happen&nbsp;only&nbsp;in&nbsp;the&nbsp;AppDomains&nbsp;as&nbsp;created&nbsp;by&nbsp;unit&nbsp;testing&nbsp;frameworks?&nbsp; Any&nbsp;known&nbsp;workarounds&nbsp;for&nbsp;this&nbsp;to&nbsp;keep&nbsp;it&nbsp;from&nbsp;loading&nbsp;a&nbsp;different&nbsp;config?&lt;br&gt;&lt;br&gt;###&nbsp;TestCode.cs&nbsp;###&lt;br&gt;&lt;br&gt;<br>
using&nbsp;System;&lt;br&gt;using&nbsp;System.Configuration;&lt;br&gt;using&nbsp;NUnit.Framework;&lt;br&gt;&lt;br&gt;namespace&nbsp;TestHarness&lt;br&gt;{&lt;br&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;[TestFixture]&lt;br&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;public&nbsp;class&nbsp;MyClass&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{&lt;br&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;[Test]&lt;br&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;public&nbsp;void&nbsp;TestSomeCode1()&nbsp;{&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;var&nbsp;connStr&nbsp;=&nbsp;ConfigurationManager.ConnectionStrings[&quot;mystr&quot;];&lt;br&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;Assert.IsNotNull&nbsp;(connStr);&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;}&lt;br&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;[Test]&lt;br&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;public&nbsp;void&nbsp;TestSomeCode2()&nbsp;{&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;System.Web.HttpUtility.ParseQueryString&nbsp;(&quot;&lt;a&nbsp;href=&quot;http://foo.bz/?bar=fu&quot;&nbsp;target=&quot;_blank&quot;&gt;http://foo.bz?bar=fu&lt;/a&gt;&quot;);&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;var&nbsp;connStr&nbsp;=&nbsp;ConfigurationManager.ConnectionStrings[&quot;mystr&quot;];&lt;br&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;Assert.IsNotNull&nbsp;(connStr);&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;}&lt;br&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;}&lt;br&gt;}&lt;br&gt;&lt;br&gt;###&nbsp;App.config&nbsp;###&lt;br&gt;&lt;br&gt;&lt;configuration&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;connectionStrings&gt;&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;add&nbsp;name=&quot;mystr&quot;&nbsp;connectionString=&quot;&lt;a&nbsp;href=&quot;mailto:test@whatever.net&quot;&nbsp;target=&quot;_blank&quot;&gt;test@whatever.net&lt;/a&gt;&quot;&nbsp;/&gt;&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/connectionStrings&gt;&lt;br&gt;&lt;/configuration&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Mono-list&nbsp;maillist&nbsp; -&nbsp; &lt;a&nbsp;href=&quot;mailto:Mono-list@lists.ximian.com&quot;&gt;Mono-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
