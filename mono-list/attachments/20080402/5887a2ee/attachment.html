<tt>
&lt;p&gt;Hello,&nbsp;all!&lt;/p&gt;&lt;p&gt;I&nbsp;would&nbsp;like&nbsp;to&nbsp;get&nbsp;some&nbsp;feedback&nbsp;from&nbsp;the&nbsp;list&nbsp;before<br>
writing&nbsp;up&nbsp;a&nbsp;bug&nbsp;on&nbsp;Bugzilla.&nbsp;I&nbsp;apologize&nbsp;for&nbsp;the&nbsp;lengthy&nbsp;post&nbsp;beforehand,&nbsp;but<br>
I&nbsp;wanted&nbsp;to&nbsp;get&nbsp;as&nbsp;much&nbsp;detail&nbsp;in&nbsp;as&nbsp;I&nbsp;can&nbsp;to&nbsp;make&nbsp;it&nbsp;useful&nbsp;without&nbsp;having&nbsp;to<br>
go&nbsp;back&nbsp;and&nbsp;forth&nbsp;on&nbsp;the&nbsp;list.&lt;/p&gt;&lt;p&gt;We've&nbsp;converted&nbsp;an&nbsp;Asterisk.Net-based&nbsp;set<br>
of&nbsp;C#&nbsp;IVR&nbsp;code&nbsp;to&nbsp;run&nbsp;on&nbsp;Linux.&nbsp;The&nbsp;code&nbsp;was &nbsp;written&nbsp;using&nbsp;VS2k5&nbsp;and&nbsp;.NET<br>
2.0.&lt;/p&gt;&lt;p&gt;Asterisk.Net&nbsp;has&nbsp;been&nbsp;modified&nbsp;to&nbsp;run&nbsp;as&nbsp;a&nbsp;daemon&nbsp;and&nbsp;to&nbsp;respond&nbsp;to<br>
each&nbsp;incoming&nbsp;connection&nbsp;by&nbsp;spawning&nbsp;a&nbsp;thread,&nbsp;which&nbsp;will&nbsp;then&nbsp;access&nbsp;MS&nbsp;SQL<br>
Server&nbsp;and&nbsp;query&nbsp;some&nbsp;data&nbsp;from&nbsp;it,&nbsp;processing&nbsp;it,&nbsp;and&nbsp;returning&nbsp;a&nbsp;resulting<br>
AGI&nbsp;command&nbsp;back&nbsp;to&nbsp;Asterisk.&nbsp;All&nbsp;commands&nbsp;and&nbsp;responses&nbsp;are&nbsp;text-based,&nbsp;and<br>
Asterisk.Net&nbsp;has&nbsp;no&nbsp;dependencies&nbsp;on&nbsp;any&nbsp;libraries&nbsp;other&nbsp;than&nbsp;mono&nbsp;runtime&nbsp;and<br>
standard&nbsp;class&nbsp;libs.&lt;/p&gt;&lt;p&gt;The&nbsp;current&nbsp;Linux&nbsp;set&nbsp;up&nbsp;is&nbsp;Mandriva&nbsp;2007.0&nbsp;with<br>
mono&nbsp;1.2.3.1&nbsp;accessing&nbsp;MS&nbsp;SQL&nbsp;Server&nbsp;2000&nbsp;SP4&nbsp;running&nbsp;on&nbsp;a&nbsp;W2k3&nbsp;box.&lt;br&nbsp;/&gt;<br>
&lt;/p&gt;&lt;p&gt;The&nbsp;process&nbsp;starts&nbsp;by&nbsp;issuing&nbsp;a&nbsp;SELECT&nbsp;query&nbsp;with&nbsp;a&nbsp;DataAdapter.Fill(),<br>
which&nbsp;returns&nbsp;results&nbsp;just&nbsp;fine.&nbsp;However,&nbsp;a&nbsp;subsequent&nbsp;call&nbsp;to&nbsp;a&nbsp;stored<br>
procedure&nbsp;which&nbsp;uses&nbsp;INSERT&nbsp;followed&nbsp;by&nbsp;SELECT&nbsp;returns&nbsp;no&nbsp;rows&nbsp;(which&nbsp;causes<br>
&lt;i&gt;System.IndexOutOfRangeException:&nbsp;There&nbsp;is&nbsp;no&nbsp;row&nbsp;at&nbsp;position&nbsp;0&lt;/i&gt;.<br>
exception&nbsp;while&nbsp;trying&nbsp;to&nbsp;iterate&nbsp;through&nbsp;the&nbsp;DataRow&nbsp;collection&nbsp;coming&nbsp;back<br>
from&nbsp;Fill()'ed&nbsp;DataTable&nbsp;).&nbsp;We&nbsp;are&nbsp;using&nbsp;DataAdapter.Fill()&nbsp;from&nbsp;SqlClient&nbsp;to<br>
return&nbsp;the&nbsp;data&nbsp;back&nbsp;to&nbsp;the&nbsp;calling&nbsp;code.&nbsp;There&nbsp;could&nbsp;be&nbsp;as&nbsp;much&nbsp;as&nbsp;a&nbsp;week<br>
between&nbsp;errors&nbsp;or&nbsp;just&nbsp;one&nbsp;day&nbsp;or&nbsp;even&nbsp;one&nbsp;hour.&nbsp;The&nbsp;traffic&nbsp;does&nbsp;get&nbsp;heavy<br>
sometimes,&nbsp;depending&nbsp;on&nbsp;the&nbsp;number&nbsp;of&nbsp;simultaneous&nbsp;calls,&nbsp;but&nbsp;load&nbsp;doesn't<br>
always&nbsp;seem&nbsp;to&nbsp;be&nbsp;the&nbsp;issue,&nbsp;as&nbsp;we&nbsp;get&nbsp;the&nbsp;error&nbsp;below&nbsp;even&nbsp;in&nbsp;relatively<br>
low-load&nbsp;conditions.&nbsp;After&nbsp;we&nbsp;received&nbsp;the&nbsp;error&nbsp;10&nbsp;or&nbsp;20&nbsp;times&nbsp;in&nbsp;a&nbsp;row,<br>
everything&nbsp;seems&nbsp;to&nbsp;come&nbsp;back&nbsp;to&nbsp;normal&nbsp;for&nbsp;a&nbsp;while.&nbsp;This&nbsp;error&nbsp;doesn't&nbsp;occur<br>
on&nbsp;Windows&nbsp;under&nbsp;.NET&nbsp;2.0&nbsp;with&nbsp;exactly&nbsp;same&nbsp;code.&lt;/p&gt;&lt;p&gt;&lt;br&nbsp;/&gt;Here's&nbsp;a&nbsp;snippet<br>
of&nbsp;the&nbsp;stack&nbsp;trace:&lt;/p&gt;&lt;p&gt;&lt;i&gt;Channel&nbsp;[Zap/1-1]&nbsp;[04/02&nbsp;10:48:05]&nbsp;Exception<br>
caught:&lt;br&nbsp;/&gt;System.IndexOutOfRangeException:&nbsp;There&nbsp;is&nbsp;no&nbsp;row&nbsp;at&nbsp;position&nbsp;0.&lt;br<br>
/&gt; &nbsp;at&nbsp;System.Data.DataRowCollection.get_Item&nbsp;(Int32&nbsp;index)&nbsp;[0x00040]&nbsp;in<br>
/home/mandrake/rpm/BUILD/mono-1.2.3.1/mcs/class/System.Data/System.Data/DataRowCollection.cs:78<br>
&lt;br&nbsp;/&gt; &nbsp;at&nbsp;Asterisk.NET.FastAGI.Scripts.myRSCIVR.IVRNewCall&nbsp;(System.String<br>
pcCaller,&nbsp;System.String&nbsp;pcCallee)&nbsp;[0x00066]&nbsp;in&nbsp;[.....]myfile.cs:372<br>
&lt;/i&gt;&lt;/p&gt;&lt;p&gt;I&nbsp;omitted&nbsp;the&nbsp;non-relevant&nbsp;path&nbsp;to&nbsp;our&nbsp;code&nbsp;with&nbsp;[...]&lt;/p&gt;&lt;p&gt;The<br>
bottom&nbsp;of&nbsp;the&nbsp;stack&nbsp;is&nbsp;our&nbsp;code&nbsp;trying&nbsp;to&nbsp;iterate&nbsp;through&nbsp;the&nbsp;DataTable's<br>
DataRows&nbsp;coming&nbsp;back&nbsp;from&nbsp;Fill().&nbsp;There&nbsp;should&nbsp;always&nbsp;be&nbsp;data&nbsp;coming&nbsp;back,&nbsp;as<br>
INSERT&nbsp;succeeds&nbsp;every&nbsp;time,&nbsp;even&nbsp;if&nbsp;we&nbsp;get&nbsp;a&nbsp;subsequent&nbsp;error.&nbsp;It's&nbsp;the&nbsp;SELECT<br>
that&nbsp;returns&nbsp;nothing&nbsp;back&nbsp;(Note,&nbsp;it's&nbsp;not&nbsp;that&nbsp;it&nbsp;returns&nbsp;a&nbsp;row&nbsp;with&nbsp;NULLs,&nbsp;it<br>
returns&nbsp;no&nbsp;rows&nbsp;whatsoever--an&nbsp;empty&nbsp;DataTable).&lt;br&nbsp;/&gt;&nbsp;&lt;/p&gt;&lt;p&gt;Before&nbsp;I&nbsp;submit<br>
the&nbsp;Bugzilla&nbsp;report&nbsp;I&nbsp;would&nbsp;like&nbsp;the&nbsp;list's&nbsp;opinion&nbsp;on&nbsp;the&nbsp;following:&lt;/p&gt;&lt;p&gt;1)<br>
Has&nbsp;anyone&nbsp;had&nbsp;this&nbsp;problem&nbsp;before&nbsp;(is&nbsp;there&nbsp;another&nbsp;bug&nbsp;out&nbsp;there&nbsp;already)?&nbsp;I<br>
searched&nbsp;the&nbsp;Bugzilla,&nbsp;but&nbsp;couldn't&nbsp;find&nbsp;exact&nbsp;same&nbsp;or&nbsp;very&nbsp;similar&nbsp;issues.&nbsp;If<br>
someone&nbsp;has&nbsp;found&nbsp;a&nbsp;solution&nbsp;or&nbsp;a&nbsp;patch,&nbsp;that&nbsp;would&nbsp;be&nbsp;great&nbsp;too&nbsp;:)&lt;br&nbsp;/&gt;<br>
&lt;/p&gt;&lt;p&gt;2)&nbsp;Since&nbsp;the&nbsp;exception&nbsp;we&nbsp;get&nbsp;is&nbsp;not&nbsp;in&nbsp;Fill()&nbsp;itself,&nbsp;but&nbsp;rather&nbsp;after<br>
that,&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;see&nbsp;if&nbsp;I&nbsp;can&nbsp;somehow&nbsp;get&nbsp;the&nbsp;source&nbsp;for&nbsp;the&nbsp;class&nbsp;lib&nbsp;and<br>
put&nbsp;some&nbsp;tracing&nbsp;code&nbsp;around&nbsp;fill &nbsp;and&nbsp;use&nbsp;that&nbsp;class&nbsp;lib&nbsp;instead&nbsp;of&nbsp;the&nbsp;stock<br>
one&nbsp;to&nbsp;get&nbsp;some&nbsp;tracing&nbsp;within&nbsp;the&nbsp;Fill&nbsp;method&nbsp;of&nbsp;the&nbsp;DA,&nbsp;so&nbsp;that&nbsp;my&nbsp;Bugzilla<br>
report&nbsp;is&nbsp;most&nbsp;useful&nbsp;to&nbsp;the&nbsp;ADO.NET&nbsp;team.&lt;/p&gt;&lt;p&gt;3)&nbsp;What&nbsp;all&nbsp;is&nbsp;needed&nbsp;to&nbsp;be<br>
submitted&nbsp;with&nbsp;the&nbsp;report&nbsp;to&nbsp;make&nbsp;this&nbsp;issue&nbsp;easier&nbsp;to&nbsp;fix?&lt;/p&gt;&lt;p&gt;&lt;br&nbsp;/&gt;This<br>
issue&nbsp;is&nbsp;not&nbsp;easy&nbsp;to&nbsp;reproduce&nbsp;at&nbsp;will,&nbsp;so&nbsp;I'm&nbsp;hoping&nbsp;that&nbsp;this&nbsp;is&nbsp;all&nbsp;helpful<br>
for&nbsp;starters.&lt;/p&gt;&lt;p&gt;&lt;br&nbsp;/&gt;Thank&nbsp;you&nbsp;all&nbsp;in&nbsp;advance&nbsp;for&nbsp;reading&nbsp;this&nbsp;monster&nbsp;of<br>
a&nbsp;post.&lt;/p&gt;&lt;p&gt;Regards,&lt;/p&gt;&lt;p&gt;Mark.&lt;/p&gt;&lt;br&nbsp;/&gt;<br>

</tt>
