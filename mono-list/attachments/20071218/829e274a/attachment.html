<tt>
Technically,&nbsp;you&nbsp;should&nbsp;write&nbsp;the&nbsp;headers&nbsp;before&nbsp;you&nbsp;write&nbsp;the&nbsp;content.&nbsp;That&nbsp;means&nbsp;you&nbsp;need&nbsp;to&nbsp;set&nbsp;content&nbsp;type&nbsp;and&nbsp;all&nbsp;that&nbsp;*before*&nbsp;you&nbsp;write&nbsp;the&nbsp;actual&nbsp;data&nbsp;to&nbsp;the&nbsp;response&nbsp;stream.&nbsp;I&nbsp;came&nbsp;across&nbsp;this&nbsp;one&nbsp;recently&nbsp;myself&nbsp;and&nbsp;filed&nbsp;a&nbsp;bug:<br>
&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://bugzilla.novell.com/show_bug.cgi?id=343915&quot;&gt;https://bugzilla.novell.com/show_bug.cgi?id=343915&lt;/a&gt;&lt;br&gt;&lt;br&gt;Unfortunately&nbsp;it&nbsp;looks&nbsp;like&nbsp;the&nbsp;default&nbsp;&lt;a&nbsp;href=&quot;http://MS.NET&quot;&gt;MS.NET&lt;/a&gt;&nbsp;behavior&nbsp;is&nbsp;buggy,&nbsp;in&nbsp;that&nbsp;it&nbsp;lets&nbsp;you&nbsp;set&nbsp;content&nbsp;type&nbsp;even&nbsp;though&nbsp;the&nbsp;headers&nbsp;are&nbsp;already&nbsp;sent&nbsp;and&nbsp;the&nbsp;receiver&nbsp;will&nbsp;never&nbsp;see&nbsp;that&nbsp;new&nbsp;value.<br>
&lt;br&gt;&lt;br&gt;Alan.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Dec&nbsp;18,&nbsp;2007&nbsp;9:46&nbsp;PM,&nbsp;Adam&nbsp;Tauno&nbsp;Williams&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:adam@morrison-ind.com&quot;&gt;adam@morrison-ind.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
I&amp;#39;ve&nbsp;created&nbsp;an&nbsp;XML-RPC&nbsp;service&nbsp;using&nbsp;the&nbsp;CookComputing&nbsp;XML-RPC&nbsp;assembly&lt;br&gt;as&nbsp;described&nbsp;at&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://www.cookcomputing.com/blog/archives/000572.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.cookcomputing.com/blog/archives/000572.html<br>
&lt;/a&gt;&lt;br&gt;&lt;br&gt;But&nbsp;it&nbsp;doesn&amp;#39;t&nbsp;work&nbsp;[correctly]&nbsp;under&nbsp;Mono&nbsp;1.2.6&nbsp;whereas&nbsp;it&nbsp;does&nbsp;work&lt;br&gt;in&nbsp;.NET.&nbsp;&amp;nbsp;See&nbsp;-&lt;br&gt;&lt;a&nbsp;href=&quot;http://tech.groups.yahoo.com/group/XMLRPCNET/message/970&quot;&nbsp;target=&quot;_blank&quot;&gt;http://tech.groups.yahoo.com/group/XMLRPCNET/message/970<br>
&lt;/a&gt;&lt;br&gt;&lt;br&gt;On&nbsp;Mono&nbsp;I&nbsp;get&nbsp;-&lt;br&gt;Cannot&nbsp;be&nbsp;changed&nbsp;after&nbsp;headers&nbsp;are&nbsp;sent.&lt;br&gt;&nbsp;&amp;nbsp;at&nbsp;System.Net.HttpListenerResponse.set_ContentType&nbsp;(System.String&lt;br&gt;value)&nbsp;[0x00039]&lt;br&gt;in&nbsp;/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/System/System.Net/HttpListenerResponse.cs:110<br>
&lt;br&gt;&nbsp;&amp;nbsp;at&lt;br&gt;Whitemice.Hexagonal.RPCResponse.CookComputing.XmlRpc.IHttpResponse.set_ContentType&nbsp;(System.String&nbsp;value)&nbsp;[0x00000]&nbsp;in&nbsp;/home/awilliam/Works/Hexagonal/RPCResponse.cs:21&lt;br&gt;&nbsp;&amp;nbsp;at&nbsp;CookComputing.XmlRpc.XmlRpcHttpServerProtocol.HandleHttpRequest<br>
&lt;br&gt;(IHttpRequest&nbsp;httpReq,&nbsp;IHttpResponse&nbsp;httpResp)&nbsp;[0x00000]&lt;br&gt;&amp;nbsp;-&nbsp;every&nbsp;time&nbsp;a&nbsp;request&nbsp;is&nbsp;processed,&nbsp;&amp;nbsp;although&nbsp;the&nbsp;client&nbsp;does&nbsp;receive&lt;br&gt;the&nbsp;response.&lt;br&gt;&lt;br&gt;The&nbsp;author&nbsp;of&nbsp;the&nbsp;XML-RPC&nbsp;assembly&nbsp;has&nbsp;verified&nbsp;that&nbsp;it&nbsp;works&nbsp;on&nbsp;.NET<br>
&lt;br&gt;and&nbsp;fails&nbsp;on&nbsp;Mono,&nbsp;see&nbsp;-&lt;br&gt;&lt;a&nbsp;href=&quot;http://tech.groups.yahoo.com/group/XMLRPCNET/message/971&quot;&nbsp;target=&quot;_blank&quot;&gt;http://tech.groups.yahoo.com/group/XMLRPCNET/message/971&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;_______________________________________________<br>
&lt;br&gt;Mono-list&nbsp;maillist&nbsp;&amp;nbsp;-&nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-list@lists.ximian.com&quot;&gt;Mono-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-list<br>
&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
