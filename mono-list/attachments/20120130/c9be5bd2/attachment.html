<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;TRANSITIONAL//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;CHARSET=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;NAME=&quot;GENERATOR&quot;&nbsp;CONTENT=&quot;GtkHTML/4.1.92&quot;&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
Hi&nbsp;there,&lt;BR&gt;<br>
&lt;BR&gt;<br>
Today&nbsp;I&nbsp;finally&nbsp;found&nbsp;my&nbsp;problem&nbsp;that&nbsp;occurs&nbsp;with&nbsp;sending&nbsp;my&nbsp;mailings.&nbsp;To&nbsp;be&nbsp;brief,&nbsp;I&nbsp;send&nbsp;emails&nbsp;with&nbsp;alternativeview's&nbsp;containing&nbsp;one&nbsp;with&nbsp;html&nbsp;and&nbsp;one&nbsp;with&nbsp;plain&nbsp;text.&nbsp;The&nbsp;html&nbsp;has&nbsp;links&nbsp;to&nbsp;images,&nbsp;and&nbsp;while&nbsp;it&nbsp;mostly&nbsp;goes&nbsp;well,&nbsp;it&nbsp;sometimes&nbsp;fails.&nbsp;After&nbsp;checking&nbsp;the&nbsp;sources&nbsp;of&nbsp;those&nbsp;emails,&nbsp;I&nbsp;discovered&nbsp;that&nbsp;a&nbsp;line,&nbsp;starting&nbsp;with&nbsp;a&nbsp;dot,&nbsp;is&nbsp;not&nbsp;escaped&nbsp;with&nbsp;a&nbsp;dot.&nbsp;As&nbsp;an&nbsp;example&nbsp;here&nbsp;a&nbsp;part&nbsp;of&nbsp;the&nbsp;html:&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;/tr&gt;&lt;tr&nbsp;id=3D&quot;row1&quot;&gt;&lt;td&nbsp;width=3D&quot;50px&quot;&nbsp;nowrap=3D&quot;on&quot;&nbsp;align=3D&quot;center&quot;&nbsp;valig=&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;n=3D&quot;middle&quot;&gt;&lt;a&nbsp;href=3D&quot;http://www.wingsofdeath.net/content/16,18329&quot;&gt;&lt;img&nbsp;=&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;src=3D&quot;http://www.wingsofdeath.net/cache/56178e3b58687a9e048d72ec93219b8b/&lt;/TT&gt;&lt;TT&gt;&lt;B&gt;2=&lt;/B&gt;&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;&lt;B&gt;20120126095140.45x45.image001.jpg&lt;/B&gt;&lt;/TT&gt;&lt;TT&gt;&quot;&nbsp;border=3D&quot;0&quot;&nbsp;/&gt;&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
this&nbsp;is&nbsp;how&nbsp;its&nbsp;being&nbsp;received&nbsp;by&nbsp;the&nbsp;client.&nbsp;The&nbsp;filename&nbsp;should&nbsp;be:&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;2&lt;/TT&gt;&lt;TT&gt;.&lt;/TT&gt;&lt;TT&gt;20120126095140.45x45.image001.jpg&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
the&nbsp;dot&nbsp;falls&nbsp;incidentally&nbsp;on&nbsp;the&nbsp;first&nbsp;character.&nbsp;I&nbsp;checked&nbsp;the&nbsp;output&nbsp;of&nbsp;mono&nbsp;to&nbsp;the&nbsp;mailserver&nbsp;with&nbsp;wireshark,&nbsp;and&nbsp;there&nbsp;the&nbsp;dot&nbsp;is&nbsp;visible.&nbsp;While&nbsp;looking&nbsp;for&nbsp;the&nbsp;answer,&nbsp;I&nbsp;found&nbsp;out&nbsp;that&nbsp;Postfix&nbsp;(the&nbsp;mailserver&nbsp;I&nbsp;use)&nbsp;states&nbsp;that&nbsp;every&nbsp;line&nbsp;starting&nbsp;with&nbsp;a&nbsp;dot,&nbsp;should&nbsp;be&nbsp;escaped&nbsp;with&nbsp;a&nbsp;dot.&nbsp;Then&nbsp;I&nbsp;looked&nbsp;into&nbsp;the&nbsp;Mono&nbsp;code&nbsp;(2.10.6&nbsp;&amp;&nbsp;8)&nbsp;and&nbsp;found&nbsp;the&nbsp;following&nbsp;code&nbsp;(mcs/build/System/System.Net.Mail/SmtpClient.cs):<br>
&lt;PRE&gt;<br>
private&nbsp;void&nbsp;SendData&nbsp;(string&nbsp;data)<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(String.IsNullOrEmpty&nbsp;(data))&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.Write(&quot;\r\n&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.Flush();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringReader&nbsp;sr&nbsp;=&nbsp;new&nbsp;StringReader&nbsp;(data);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;line;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;escapeDots&nbsp;=&nbsp;deliveryMethod&nbsp;==&nbsp;SmtpDeliveryMethod.Network;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;((line&nbsp;=&nbsp;sr.ReadLine&nbsp;())&nbsp;!=&nbsp;null)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CheckCancellation&nbsp;();<br>
<br>
&lt;B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(escapeDots)&nbsp;{&lt;/B&gt;<br>
&lt;B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i;&lt;/B&gt;<br>
&lt;B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;line.Length;&nbsp;i++)&nbsp;{&lt;/B&gt;<br>
&lt;B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(line[i]&nbsp;!=&nbsp;'.')&lt;/B&gt;<br>
&lt;B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&lt;/B&gt;<br>
&lt;B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/B&gt;<br>
&lt;B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(i&nbsp;&gt;&nbsp;0&nbsp;&amp;&amp;&nbsp;i&nbsp;==&nbsp;line.Length)&nbsp;{&lt;/B&gt;<br>
&lt;B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;+=&nbsp;&quot;.&quot;;&lt;/B&gt;<br>
&lt;B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/B&gt;<br>
&lt;B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/B&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.Write&nbsp;(line);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.Write&nbsp;(&quot;\r\n&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.Flush&nbsp;();<br>
}<br>
&lt;/PRE&gt;<br>
&lt;BR&gt;<br>
Escaping&nbsp;with&nbsp;this&nbsp;works&nbsp;if&nbsp;there&nbsp;is&nbsp;only&nbsp;a&nbsp;single&nbsp;dot,&nbsp;but&nbsp;when&nbsp;there&nbsp;is&nbsp;a&nbsp;line&nbsp;starting&nbsp;with&nbsp;a&nbsp;dot,&nbsp;it&nbsp;wont&nbsp;escape&nbsp;it.&nbsp;So,&nbsp;is&nbsp;this&nbsp;a&nbsp;bug,&nbsp;or&nbsp;is&nbsp;this&nbsp;to&nbsp;be&nbsp;compatible&nbsp;with&nbsp;.Net&nbsp;(4)?&nbsp;And&nbsp;if&nbsp;this&nbsp;is&nbsp;not&nbsp;a&nbsp;bug,&nbsp;is&nbsp;there&nbsp;a&nbsp;(known&nbsp;Mono)&nbsp;way&nbsp;to&nbsp;get&nbsp;around&nbsp;this,&nbsp;without&nbsp;implementing&nbsp;another&nbsp;mail&nbsp;library?&nbsp;&lt;BR&gt;<br>
&lt;BR&gt;<br>
Cheers&nbsp;&lt;BR&gt;<br>
&lt;BR&gt;<br>
Peter<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>

</tt>
