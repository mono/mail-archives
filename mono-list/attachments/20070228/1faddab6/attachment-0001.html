<tt>
I&amp;#39;m&nbsp;not&nbsp;too&nbsp;sure&nbsp;how&nbsp;to&nbsp;get&nbsp;a&nbsp;Bitmap&nbsp;object&nbsp;from&nbsp;a&nbsp;graphics&nbsp;object.&amp;nbsp;&nbsp;From&nbsp;all&nbsp;I&amp;#39;ve&nbsp;read,&nbsp;I&nbsp;just&nbsp;hear&nbsp;that&nbsp;you&nbsp;have&nbsp;to&nbsp;deal&nbsp;with&nbsp;device&nbsp;contexts.&amp;nbsp;&nbsp;I&amp;#39;m&nbsp;not&nbsp;too&nbsp;familiar&nbsp;with&nbsp;it,&nbsp;but&nbsp;BitBlt&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;way&nbsp;to&nbsp;do&nbsp;that.&amp;nbsp;&nbsp;What&nbsp;would&nbsp;I&nbsp;need&nbsp;to&nbsp;do&nbsp;to&nbsp;get&nbsp;that&nbsp;bitmap&nbsp;created&nbsp;with&nbsp;what&nbsp;appears&nbsp;in&nbsp;the&nbsp;control&nbsp;using&nbsp;100%&nbsp;.NET&nbsp;so&nbsp;it&nbsp;can&nbsp;run&nbsp;in&nbsp;mono?&amp;nbsp;&nbsp;Here&amp;#39;s&nbsp;a&nbsp;snippet&nbsp;of&nbsp;code.<br>
&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[System.Runtime.InteropServices.DllImportAttribute(&amp;quot;gdi32.dll&amp;quot;)]&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;private&nbsp;static&nbsp;extern&nbsp;bool&nbsp;BitBlt(&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;IntPtr&nbsp;hdcDest,&nbsp;//&nbsp;handle&nbsp;to&nbsp;destination&nbsp;DC&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;nXDest,&amp;nbsp;&nbsp;//&nbsp;x-coord&nbsp;of&nbsp;destination&nbsp;upper-left&nbsp;corner<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;nYDest,&amp;nbsp;&nbsp;//&nbsp;y-coord&nbsp;of&nbsp;destination&nbsp;upper-left&nbsp;corner&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;nWidth,&amp;nbsp;&nbsp;//&nbsp;width&nbsp;of&nbsp;destination&nbsp;rectangle&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;nHeight,&nbsp;//&nbsp;height&nbsp;of&nbsp;destination&nbsp;rectangle&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;IntPtr&nbsp;hdcSrc,&amp;nbsp;&nbsp;//&nbsp;handle&nbsp;to&nbsp;source&nbsp;DC<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;nXSrc,&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;x-coordinate&nbsp;of&nbsp;source&nbsp;upper-left&nbsp;corner&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;nYSrc,&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;y-coordinate&nbsp;of&nbsp;source&nbsp;upper-left&nbsp;corner&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;System.Int32&nbsp;dwRop&amp;nbsp;&nbsp;//&nbsp;raster&nbsp;operation&nbsp;code&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;);<br>
&lt;br&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;public&nbsp;static&nbsp;Bitmap&nbsp;PerformCapture(Control&nbsp;c,&nbsp;int&nbsp;maxWidth,&nbsp;int&nbsp;maxHeight)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;try&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;w&nbsp;=&nbsp;c.ClientRectangle.Width;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;h&nbsp;=&nbsp;<br>
c.ClientRectangle.Height;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;w&nbsp;=&nbsp;System.Math.Min(w,&nbsp;maxWidth);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;h&nbsp;=&nbsp;System.Math.Min(w,&nbsp;maxHeight);&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;System.Drawing.Graphics&nbsp;g1&nbsp;=&nbsp;c.CreateGraphics();//this.CreateGraphics();<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Bitmap&nbsp;MyImage&nbsp;=&nbsp;new&nbsp;Bitmap(w,&nbsp;h,&nbsp;g1);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;System.Drawing.Graphics&nbsp;g2&nbsp;=&nbsp;System.Drawing.Graphics.FromImage(MyImage);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;IntPtr&nbsp;dc1&nbsp;=&nbsp;g1.GetHdc();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;IntPtr&nbsp;dc2&nbsp;=&nbsp;<br>
g2.GetHdc();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;BitBlt(dc2,&nbsp;0,&nbsp;0,&nbsp;w,&nbsp;h,&nbsp;dc1,&nbsp;0,&nbsp;0,&nbsp;13369376);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;g1.ReleaseHdc(dc1);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;g2.ReleaseHdc(dc2);&lt;br&gt;&lt;br&gt;//Separate&nbsp;dialog&nbsp;to&nbsp;display&nbsp;the&nbsp;image.&amp;nbsp;&nbsp;If&nbsp;I&nbsp;comment&nbsp;out&nbsp;the&nbsp;BitBlt&nbsp;code,&nbsp;it&nbsp;just&nbsp;appears&nbsp;blank.<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Library.Windows.Dialogs.ScreenCaptureDlg&nbsp;dlg&nbsp;=&nbsp;new&nbsp;Library.Windows.Dialogs.ScreenCaptureDlg(MyImage);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;dlg.ShowDialog();&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;MyImage;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;catch(Exception&nbsp;error)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{&lt;br&gt;//our&nbsp;exception&nbsp;handling&nbsp;library.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Library.Common.ErrMsg.Err(&nbsp;error&nbsp;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;throw&nbsp;error;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;2/28/07,&nbsp;<br>
&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Abe&nbsp;Gillespie&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:abe.gillespie@gmail.com&quot;&gt;abe.gillespie@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Are&nbsp;you&nbsp;P/Invoking&nbsp;for&nbsp;performance?&amp;nbsp;&amp;nbsp;Why&nbsp;not&nbsp;just&nbsp;use&nbsp;the&nbsp;GDI&nbsp;.Net&nbsp;API?&lt;br&gt;&lt;br&gt;-Abe&lt;br&gt;&lt;br&gt;On&nbsp;2/28/07,&nbsp;Eric&nbsp;Morgan&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:eric@rengeo.com&quot;&gt;eric@rengeo.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;Hi&nbsp;all,&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Is&nbsp;there&nbsp;a&nbsp;good&nbsp;way&nbsp;to&nbsp;capture&nbsp;screens&nbsp;or&nbsp;something&nbsp;similar&nbsp;in&nbsp;mono?&amp;nbsp;&amp;nbsp;In&nbsp;our<br>
&lt;br&gt;&amp;gt;&nbsp;.NET&nbsp;application,&nbsp;we&nbsp;have&nbsp;custom&nbsp;controls,&nbsp;and&nbsp;we&nbsp;basically&nbsp;create&nbsp;a&lt;br&gt;&amp;gt;&nbsp;graphics&nbsp;object&nbsp;from&nbsp;it,&nbsp;make&nbsp;a&nbsp;new&nbsp;bitmap,&nbsp;then&nbsp;do&nbsp;a&nbsp;bitblt&nbsp;to&nbsp;get&nbsp;it&nbsp;into&lt;br&gt;&amp;gt;&nbsp;the&nbsp;bitmap.&amp;nbsp;&amp;nbsp;This&nbsp;requires&nbsp;a&nbsp;P/Invoke&nbsp;into&nbsp;gdi32.dll<br>
,&nbsp;which&nbsp;obviously&nbsp;blows&lt;br&gt;&amp;gt;&nbsp;up&nbsp;in&nbsp;mono.&amp;nbsp;&amp;nbsp;Is&nbsp;there&nbsp;a&nbsp;good&nbsp;way&nbsp;to&nbsp;do&nbsp;this&nbsp;using&nbsp;mono?&amp;nbsp;&amp;nbsp;Some&nbsp;other&nbsp;library&lt;br&gt;&amp;gt;&nbsp;maybe?&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&amp;#39;ve&nbsp;tried&nbsp;installing&nbsp;wine&nbsp;and&nbsp;using&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://gdi32.dll.so&quot;&gt;gdi32.dll.so<br>
&lt;/a&gt;&nbsp;that&nbsp;comes&nbsp;with&nbsp;it,&lt;br&gt;&amp;gt;&nbsp;but&nbsp;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;if&nbsp;I&amp;#39;m&nbsp;using&nbsp;it&nbsp;correctly&nbsp;or&nbsp;not.&amp;nbsp;&amp;nbsp;It&nbsp;can&nbsp;find&nbsp;the&nbsp;library,&lt;br&gt;&amp;gt;&nbsp;but&nbsp;it&nbsp;gives&nbsp;a&nbsp;SIGSEGV&nbsp;while&nbsp;trying&nbsp;to&nbsp;execute&nbsp;the&nbsp;bitblt&nbsp;operation.&amp;nbsp;&amp;nbsp;Seemed&lt;br&gt;&amp;gt;&nbsp;like&nbsp;kind&nbsp;of&nbsp;a&nbsp;hack,&nbsp;and&nbsp;I&nbsp;didn&amp;#39;t&nbsp;really&nbsp;expect&nbsp;it&nbsp;to&nbsp;work...&amp;nbsp;&amp;nbsp;Do&nbsp;I&nbsp;need<br>
&lt;br&gt;&amp;gt;&nbsp;other&nbsp;libraries&nbsp;along&nbsp;with&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://gdi32.dll.so&quot;&gt;gdi32.dll.so&lt;/a&gt;&nbsp;?&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Any&nbsp;advice&nbsp;is&nbsp;appreciated.&amp;nbsp;&amp;nbsp;Thanks.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Eric&nbsp;Morgan&lt;br&gt;&amp;gt;&nbsp;Renegade&nbsp;Geophysics&lt;br&gt;&amp;gt;&nbsp;303-661-0400,&nbsp;x2<br>
&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;_______________________________________________&lt;br&gt;&amp;gt;&nbsp;Mono-list&nbsp;maillist&amp;nbsp;&amp;nbsp;-&amp;nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-list@lists.ximian.com&quot;&gt;Mono-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-list&quot;&gt;<br>
http://lists.ximian.com/mailman/listinfo/mono-list&lt;/a&gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
