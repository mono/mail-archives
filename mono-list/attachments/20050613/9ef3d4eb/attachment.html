<tt>
<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;I've&nbsp;found&nbsp;a&nbsp;minor&nbsp;bug&nbsp;in&nbsp;OdbcDataReader.cs<br>
in&nbsp;the&nbsp;private&nbsp;string&nbsp;[]&nbsp;GetPrimaryKeys()&nbsp;method.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;The&nbsp;bug&nbsp;is&nbsp;for&nbsp;the&nbsp;following&nbsp;scenario:&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;1)&nbsp;Have&nbsp;a&nbsp;table&nbsp;with&nbsp;compound&nbsp;primary<br>
keys&nbsp;(in&nbsp;this&nbsp;case,&nbsp;two&nbsp;database&nbsp;columns&nbsp;make&nbsp;a&nbsp;row&nbsp;unique).&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;2)&nbsp;Exercise&nbsp;the&nbsp;query&nbsp;where&nbsp;the&nbsp;selected<br>
column&nbsp;in&nbsp;the&nbsp;query&nbsp;is&nbsp;not&nbsp;one&nbsp;of&nbsp;the&nbsp;primary&nbsp;key.&nbsp;There&nbsp;is&nbsp;only&nbsp;one&nbsp;field<br>
retrieved&nbsp;in&nbsp;the&nbsp;Select&nbsp;statement.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;3)&nbsp;The&nbsp;bug&nbsp;in&nbsp;the&nbsp;GetPrimaryKeys()&nbsp;was<br>
allocated&nbsp;the&nbsp;return&nbsp;keys&nbsp;string&nbsp;array&nbsp;based&nbsp;on&nbsp;the&nbsp;number&nbsp;of&nbsp;returned<br>
columns&nbsp;in&nbsp;the&nbsp;Select&nbsp;statement.&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;In&nbsp;this&nbsp;scenario,&nbsp;the&nbsp;returned&nbsp;column<br>
in&nbsp;Select&nbsp;statement&nbsp;is&nbsp;one,&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;primary&nbsp;keys&nbsp;in&nbsp;the&nbsp;table<br>
is&nbsp;two.&nbsp;So&nbsp;the&nbsp;bug&nbsp;was&nbsp;actually&nbsp;occurred&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;in&nbsp;the&nbsp;while(true)&nbsp;of&nbsp;fetching&nbsp;the&nbsp;primary<br>
key&nbsp;from&nbsp;backend&nbsp;database,&nbsp;and&nbsp;the&nbsp;while&nbsp;loop&nbsp;is&nbsp;crashing&nbsp;on&nbsp;the&nbsp;second<br>
time&nbsp;it&nbsp;retrieves&nbsp;the&nbsp;second&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;primary&nbsp;key&nbsp;since&nbsp;the&nbsp;keys[]&nbsp;string<br>
array&nbsp;only&nbsp;allocated&nbsp;one&nbsp;slot&nbsp;up&nbsp;front.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;4)&nbsp;attached&nbsp;is&nbsp;the&nbsp;diff&nbsp;of&nbsp;the&nbsp;OdbcDataReader.cs<br>
from&nbsp;tarball&nbsp;1.1.7&nbsp;with&nbsp;the&nbsp;latest&nbsp;from&nbsp;svn&nbsp;(retrieved&nbsp;about&nbsp;11am&nbsp;June<br>
13th&nbsp;05).&nbsp;The&nbsp;fix&nbsp;that&nbsp;I&nbsp;made&nbsp;to&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;GetPrimaryKeys()&nbsp;method&nbsp;was&nbsp;not&nbsp;to&nbsp;make<br>
an&nbsp;assumption&nbsp;of&nbsp;keys[]&nbsp;string&nbsp;array&nbsp;to&nbsp;be&nbsp;allocated&nbsp;up&nbsp;front&nbsp;the&nbsp;number<br>
of&nbsp;returned&nbsp;columns&nbsp;from&nbsp;Select&nbsp;statement.&nbsp;There&nbsp;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;is&nbsp;a&nbsp;local&nbsp;ArrayList&nbsp;object&nbsp;being&nbsp;introduced<br>
to&nbsp;dynamic&nbsp;add&nbsp;the&nbsp;primary&nbsp;keys&nbsp;fetched&nbsp;from&nbsp;backend&nbsp;database.&nbsp;As&nbsp;the&nbsp;completion<br>
of&nbsp;the&nbsp;fetch,&nbsp;then&nbsp;the&nbsp;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;ArrayList&nbsp;will&nbsp;convert&nbsp;and&nbsp;return&nbsp;an<br>
array&nbsp;of&nbsp;string&nbsp;back.&nbsp;The&nbsp;signature&nbsp;of&nbsp;the&nbsp;method&nbsp;doesn't&nbsp;change.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;5)&nbsp;Please&nbsp;review&nbsp;the&nbsp;fix.&nbsp;I&nbsp;don't&nbsp;know<br>
how&nbsp;the&nbsp;procedure&nbsp;once&nbsp;the&nbsp;bug&nbsp;review&nbsp;is&nbsp;approved,&nbsp;so&nbsp;please&nbsp;instruct&nbsp;me<br>
how&nbsp;to&nbsp;proceed&nbsp;from&nbsp;there.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;
</tt>
