<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.2900.2873&quot;&nbsp;name=GENERATOR&gt;<br>
&lt;STYLE&gt;&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;bgColor=#ffffff&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Hi,&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;I've&nbsp;been&nbsp;working&nbsp;in&nbsp;a&nbsp;proyect&nbsp;where&nbsp;is&nbsp;required&nbsp;to&nbsp;<br>
extract&nbsp;the&nbsp;user&nbsp;certificate&nbsp;and&nbsp;his&nbsp;private&nbsp;key&nbsp;from&nbsp;a&nbsp;.pfx&nbsp;file.&nbsp;After&nbsp;have&nbsp;<br>
looked&nbsp;at&nbsp;certmgr&nbsp;and&nbsp;makecert&nbsp;code,&nbsp;finally&nbsp;I&nbsp;made&nbsp;a&nbsp;class&nbsp;to&nbsp;do&nbsp;the&nbsp;<br>
task.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;I&nbsp;use&nbsp;a&nbsp;X509CertificateBuilder&nbsp;to&nbsp;receive&nbsp;the&nbsp;<br>
values&nbsp;from&nbsp;the&nbsp;user's&nbsp;certificate,&nbsp;just&nbsp;transfer&nbsp;for&nbsp;one&nbsp;side&nbsp;to&nbsp;<br>
another:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;&amp;nbsp;builder.SerialNumber&nbsp;=&nbsp;<br>
userCertificate.SerialNumber;&lt;BR&gt;&amp;nbsp;&amp;nbsp;builder.IssuerName&nbsp;=&nbsp;<br>
userCertificate.IssuerName;&lt;BR&gt;&amp;nbsp;&amp;nbsp;builder.NotBefore&nbsp;=&nbsp;<br>
userCertificate.ValidFrom;&nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;builder.NotAfter&nbsp;=&nbsp;<br>
userCertificate.ValidUntil;&nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;builder.SubjectName&nbsp;=&nbsp;<br>
userCertificate.SubjectName;&lt;BR&gt;&amp;nbsp;&amp;nbsp;builder.SubjectPublicKey&nbsp;=&nbsp;aa;&nbsp;<br>
&lt;BR&gt;&amp;nbsp;&amp;nbsp;builder.Hash&nbsp;=&nbsp;userCertificate.SignatureAlgorithm;&nbsp;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;&amp;nbsp;byte[]&nbsp;rawcert&nbsp;=&nbsp;<br>
builder.Sign(aa);&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;The&nbsp;problem&nbsp;arise&nbsp;from&nbsp;the&nbsp;las&nbsp;line,&nbsp;as&nbsp;it's&nbsp;run&nbsp;<br>
throws&nbsp;this&nbsp;exception:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Unknown&nbsp;hash&nbsp;algorithm&nbsp;1.2.840.113549.1.1.5&lt;BR&gt;in&nbsp;<br>
&amp;lt;0x000ee&amp;gt;&nbsp;Mono.Security.X509.X509Builder:GetOid&nbsp;(System.String&nbsp;<br>
hashName)&lt;BR&gt;in&nbsp;&amp;lt;0x00038&amp;gt;&nbsp;Mono.Security.X509.X509Builder:Sign&nbsp;<br>
(System.Security.Cryptography.RSA&nbsp;key)&lt;BR&gt;in&nbsp;&amp;lt;0x0004d&amp;gt;&nbsp;<br>
Mono.Security.X509.X509Builder:Sign&nbsp;<br>
(System.Security.Cryptography.AsymmetricAlgorithm&nbsp;aa)&lt;BR&gt;in&nbsp;&amp;lt;0x00466&amp;gt;&nbsp;<br>
PfxManager:ExtractCertificate&nbsp;()&lt;BR&gt;in&nbsp;&amp;lt;0x0002f&amp;gt;&nbsp;PfxManagerTest:Main&nbsp;<br>
(System.String[]&nbsp;args)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;This&nbsp;is&nbsp;for&nbsp;Mono&nbsp;1.1.13.6,&nbsp;Mono&nbsp;1.1.15&nbsp;and&nbsp;.NET&nbsp;<br>
1.1&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;I've&nbsp;already&nbsp;found&nbsp;the&nbsp;description&nbsp;of&nbsp;the&nbsp;OID&nbsp;at&nbsp;&lt;A&nbsp;<br>
href=&quot;http://www.alvestrand.no/objectid/1.2.840.113549.1.1.5.html&quot;&gt;http://www.alvestrand.no/objectid/1.2.840.113549.1.1.5.html&lt;/A&gt;.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Now,&nbsp;this&nbsp;simply&nbsp;means&nbsp;that&nbsp;as&nbsp;the&nbsp;hash&nbsp;algorithm&nbsp;<br>
is&nbsp;unknown&nbsp;I'm&nbsp;stuck&nbsp;'til&nbsp;here?&nbsp;I'm&nbsp;not&nbsp;very&nbsp;cripto-proficient&nbsp;so&nbsp;the&nbsp;idea&nbsp;of&nbsp;<br>
building&nbsp;a&nbsp;hash&nbsp;algorithm&nbsp;implementation&nbsp;really&nbsp;scares&nbsp;me,&nbsp;besides,&nbsp;there&nbsp;is&nbsp;no&nbsp;<br>
time&nbsp;:P&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Any&nbsp;comments,&nbsp;guidance&amp;nbsp;and/or&nbsp;help&nbsp;would&nbsp;be&nbsp;<br>
appreciated.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Regards,&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Martín&nbsp;Trejo&nbsp;Chávez&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;A&nbsp;<br>
href=&quot;http://chilli-coder.blogspot.com&quot;&gt;http://chilli-coder.blogspot.com&lt;/A&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;A&nbsp;<br>
href=&quot;http://www.chillicoder.com&quot;&gt;http://www.chillicoder.com&lt;/A&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;&lt;/DIV&gt;&lt;/FONT&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
