<tt>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Dec&nbsp;12,&nbsp;2011&nbsp;at&nbsp;11:11&nbsp;PM,&nbsp;Dragony&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:cschmid@rapidshare.com&quot;&gt;cschmid@rapidshare.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
You&nbsp;did&nbsp;not&nbsp;understand&nbsp;my&nbsp;point(s).&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;FIRST&nbsp;point&nbsp;is,&nbsp;that&nbsp;with&nbsp;the&nbsp;Boehm&nbsp;GC,&nbsp;I&nbsp;can&nbsp;create&nbsp;objects&nbsp;really&lt;br&gt;<br>
fast.&nbsp;Even&nbsp;500&nbsp;millions.&nbsp;BUT&nbsp;when&nbsp;the&nbsp;memory&nbsp;consumption&nbsp;is&nbsp;over&nbsp;4&nbsp;GB,&nbsp;it&lt;br&gt;<br>
crashes&nbsp;under&nbsp;some&nbsp;conditions&nbsp;when&nbsp;you&nbsp;want&nbsp;to&nbsp;create&nbsp;a&nbsp;new&nbsp;object.&nbsp;So&nbsp;the&lt;br&gt;<br>
point&nbsp;of&nbsp;my&nbsp;test&nbsp;program&nbsp;is&nbsp;to&nbsp;create&nbsp;many&nbsp;big&nbsp;objects&nbsp;just&nbsp;to&nbsp;demonstrate&lt;br&gt;<br>
that&nbsp;Mono&nbsp;crashes&nbsp;after&nbsp;500&nbsp;objects&nbsp;IF&nbsp;your&nbsp;memory&nbsp;consumption&nbsp;is&nbsp;already&lt;br&gt;<br>
over&nbsp;4&nbsp;GB&nbsp;when&nbsp;you&nbsp;reach&nbsp;that&nbsp;point.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Boehm&nbsp;is&nbsp;not&nbsp;well&nbsp;suite&nbsp;for&nbsp;large&nbsp;heaps,&nbsp;it&nbsp;hard&nbsp;some&nbsp;intrinsic&nbsp;limitations&nbsp;on&nbsp;heap&nbsp;size.&lt;/div&gt;&lt;div&gt;Let&nbsp;me&nbsp;see&nbsp;if&nbsp;I&nbsp;understand&nbsp;you&nbsp;meant,&nbsp;sgen&nbsp;crashes&nbsp;if&nbsp;you&nbsp;try&nbsp;to&nbsp;allocate&nbsp;another&nbsp;2Gb&lt;/div&gt;<br>
&lt;div&gt;of&nbsp;memory&nbsp;after&nbsp;you&nbsp;reached&nbsp;4Gb?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;pretty&nbsp;odd,&nbsp;as&nbsp;sgen&nbsp;doesn&amp;#39;t&nbsp;have&nbsp;any&nbsp;sort&nbsp;of&nbsp;limitations&nbsp;regarding&nbsp;allocation&nbsp;of&lt;/div&gt;&lt;div&gt;large&nbsp;objects.&nbsp;Unfortunately&nbsp;I&nbsp;can&amp;#39;t&nbsp;test&nbsp;it&nbsp;as&nbsp;my&nbsp;machine&nbsp;doesn&amp;#39;t&nbsp;have&nbsp;enough&nbsp;memory.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
The&nbsp;SECOND&nbsp;point&nbsp;is,&nbsp;that&nbsp;SGen&nbsp;GC&nbsp;has&nbsp;NOT&nbsp;this&nbsp;limitation,&nbsp;BUT&nbsp;it&nbsp;has&nbsp;a&lt;br&gt;<br>
serious&nbsp;speed&nbsp;issue.&nbsp;When&nbsp;you&nbsp;create&nbsp;500&nbsp;million&nbsp;objects&nbsp;with&nbsp;each&nbsp;one&nbsp;100&lt;br&gt;<br>
bytes,&nbsp;you&nbsp;come&nbsp;up&nbsp;with&nbsp;50&nbsp;GB&nbsp;of&nbsp;memory&nbsp;consumption.&nbsp;This&nbsp;WORKS&nbsp;in&nbsp;SGen,&nbsp;but&lt;br&gt;<br>
it&nbsp;goes&nbsp;slower&nbsp;and&nbsp;slower&nbsp;the&nbsp;more&nbsp;memory&nbsp;I&nbsp;already&nbsp;use.&nbsp;When&nbsp;I&nbsp;have&nbsp;reached&lt;br&gt;<br>
12&nbsp;GB,&nbsp;it&nbsp;can&nbsp;be&nbsp;said&nbsp;its&nbsp;then&nbsp;unusable.&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Garbage&nbsp;collection&nbsp;performance&nbsp;is&nbsp;proportional&nbsp;to&nbsp;the&nbsp;heap&nbsp;size,&nbsp;so&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;work&lt;/div&gt;&lt;div&gt;with&nbsp;such&nbsp;massive&nbsp;heap&nbsp;and&nbsp;that&nbsp;many&nbsp;objects,&nbsp;don&amp;#39;t&nbsp;expect&nbsp;it&nbsp;to&nbsp;fly.&nbsp;You&nbsp;can&nbsp;try&nbsp;the &lt;/div&gt;<br>
&lt;div&gt;parallel&nbsp;collector,&nbsp;as&nbsp;it&nbsp;should&nbsp;shine&nbsp;on&nbsp;such&nbsp;massive&nbsp;heaps.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Another&nbsp;option&nbsp;is&nbsp;to&nbsp;use arrays&nbsp;of&nbsp;valuetypes&nbsp;and&nbsp;use&nbsp;indexing&nbsp;instead&nbsp;of&nbsp;direct&nbsp;references,&lt;/div&gt;&lt;div&gt;this&nbsp;is&nbsp;a&nbsp;much&nbsp;more&nbsp;GC&nbsp;robust&nbsp;design.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Overall,&nbsp;this&nbsp;doesn&amp;#39;t&nbsp;surprise&nbsp;me&nbsp;at&nbsp;all,&nbsp;sgen&nbsp;was&nbsp;never&nbsp;meant&nbsp;to&nbsp;be&nbsp;used&nbsp;with&nbsp;such&nbsp;massive&lt;/div&gt;&lt;div&gt;amount&nbsp;of&nbsp;memory,&nbsp;it&nbsp;was&nbsp;engineered&nbsp;to&nbsp;work&nbsp;well&nbsp;with&nbsp;much&nbsp;much&nbsp;less.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
You&nbsp;can&nbsp;try&nbsp;the&nbsp;same&nbsp;benchmark&nbsp;with&nbsp;Java&amp;#39;s&nbsp;or&nbsp;.NET&amp;#39;s&nbsp;serial&nbsp;GCs&nbsp;and&nbsp;you&amp;#39;ll&nbsp;notice&nbsp;the&nbsp;same&lt;/div&gt;&lt;div&gt;ridiculous performance&nbsp;drop&nbsp;once&nbsp;you&nbsp;reach&nbsp;50Gb&nbsp;of&nbsp;heap.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;way&nbsp;to&nbsp;improve&nbsp;it&nbsp;is&nbsp;to&nbsp;have&nbsp;a&nbsp;concurrent&nbsp;GC&nbsp;that&nbsp;would&nbsp;work&nbsp;in&nbsp;the&nbsp;background,&nbsp;but&nbsp;this&lt;/div&gt;<br>
&lt;div&gt;is&nbsp;one&nbsp;lot&nbsp;of&nbsp;work.&nbsp;If&nbsp;you&amp;#39;re&nbsp;interested&nbsp;you&nbsp;can&nbsp;hire&nbsp;someone&nbsp;to&nbsp;write&nbsp;it&nbsp;and&nbsp;we&nbsp;would&nbsp;love&nbsp;to&lt;/div&gt;&lt;div&gt;integrate&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
