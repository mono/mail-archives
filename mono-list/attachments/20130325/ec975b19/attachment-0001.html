<tt>
Hi,<br>
I&nbsp;am&nbsp;building&nbsp;a&nbsp;sandbox&nbsp;with&nbsp;Mono&nbsp;which&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;run&nbsp;untrusted&nbsp;code&nbsp;uploaded&nbsp;to&nbsp;the&nbsp;site.&nbsp;I&nbsp;wanna&nbsp;enable&nbsp;coreCLR&nbsp;security&nbsp;for&nbsp;this&nbsp;and&nbsp;limit&nbsp;the&nbsp;number&nbsp;of&nbsp;things&nbsp;which&nbsp;a&nbsp;user&nbsp;can&nbsp;do&nbsp;in&nbsp;his/her&nbsp;code.&nbsp;Here&nbsp;is&nbsp;my&nbsp;code&nbsp;verifying&nbsp;custom&nbsp;BCL.&nbsp;I&nbsp;have&nbsp;a&nbsp;custom&nbsp;assembly&nbsp;list&nbsp;towards&nbsp;which&nbsp;I&nbsp;verify&nbsp;and&nbsp;return&nbsp;false&nbsp;if&nbsp;the&nbsp;assembly&nbsp;is&nbsp;not&nbsp;in&nbsp;the&nbsp;list.&nbsp;The&nbsp;problem&nbsp;seems&nbsp;that&nbsp;even&nbsp;if&nbsp;I&nbsp;return&nbsp;false&nbsp;for&nbsp;one&nbsp;of&nbsp;the&nbsp;assemblies&nbsp;the&nbsp;execution&nbsp;moves&nbsp;forward&nbsp;and&nbsp;never&nbsp;throws&nbsp;a&nbsp;security&nbsp;exception&nbsp;as&nbsp;expected&nbsp;:).&nbsp;&nbsp;<br>
<br>
This&nbsp;function&nbsp;is&nbsp;registered&nbsp;as&nbsp;callback&nbsp;and&nbsp;I&nbsp;can&nbsp;see&nbsp;the&nbsp;call&nbsp;getting&nbsp;into&nbsp;this&nbsp;function&nbsp;and&nbsp;it&nbsp;returning&nbsp;a&nbsp;FALSE&nbsp;for&nbsp;one&nbsp;of&nbsp;the&nbsp;assemblies&nbsp;verified&nbsp;but&nbsp;mono&nbsp;doesn't&nbsp;seem&nbsp;to&nbsp;fail&nbsp;and&nbsp;moves&nbsp;to&nbsp;next&nbsp;assembly&nbsp;where&nbsp;it&nbsp;passes&nbsp;and&nbsp;returns&nbsp;TRUE&nbsp;again.&nbsp;Am&nbsp;I&nbsp;missing&nbsp;something&nbsp;in&nbsp;the&nbsp;way&nbsp;it&nbsp;is&nbsp;implemented?<br>
<br>
Thank&nbsp;you<br>
<br>
&lt;code&gt;<br>
static&nbsp;gboolean<br>
determine_platform_image(const&nbsp;char&nbsp;*image_name)&nbsp;{<br>
&nbsp;&nbsp;gchar&nbsp;*dir,&nbsp;*name;<br>
&nbsp;&nbsp;unsigned&nbsp;int&nbsp;i;<br>
<br>
&nbsp;&nbsp;if&nbsp;(!image_name)<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;FALSE;<br>
<br>
&nbsp;&nbsp;dir&nbsp;=&nbsp;g_path_get_dirname&nbsp;(image_name);<br>
&nbsp;&nbsp;if&nbsp;(!dir)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;g_free&nbsp;(dir);<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;FALSE;<br>
&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;name&nbsp;=&nbsp;g_path_get_basename&nbsp;(image_name);<br>
<br>
&nbsp;&nbsp;g_free&nbsp;(dir);<br>
&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;G_N_ELEMENTS&nbsp;(platform_code_assemblies);&nbsp;i++)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(g_ascii_strcasecmp&nbsp;(name,&nbsp;platform_code_assemblies&nbsp;[i])&nbsp;==&nbsp;0)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_free&nbsp;(name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;TRUE;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;}<br>
&nbsp;&nbsp;g_free&nbsp;(name);<br>
&nbsp;&nbsp;return&nbsp;FALSE;<br>
}<br>
&lt;/code&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;signature&quot;&nbsp;style=&quot;margin-top:1em;color:#666666;font-size:11px;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&gt;Mobilis&nbsp;in&nbsp;Mobili...&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&lt;br/&gt;&lt;hr&nbsp;align=&quot;left&quot;&nbsp;width=&quot;300&quot;&nbsp;/&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/Mono-Enable-CoreCLR-tp4659145.html&quot;&gt;Mono&nbsp;Enable&nbsp;CoreCLR&lt;/a&gt;&lt;br/&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/Mono-General-f1490591.html&quot;&gt;Mono&nbsp;-&nbsp;General&nbsp;mailing&nbsp;list&nbsp;archive&lt;/a&gt;&nbsp;at&nbsp;Nabble.com.&lt;br/&gt;
</tt>
