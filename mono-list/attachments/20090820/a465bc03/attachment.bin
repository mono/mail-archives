using System;
using System.Net;
using System.Net.Mail;
using System.Net.Security;
using System.Security.Cryptography.X509Certificates;

class Program {

	static MailMessage BuildConfirmationMessage (string user)
	{
		MailAddress ma = new MailAddress (user);
		MailMessage mm = new MailMessage (ma, ma);
		mm.Subject = "Confirmation";
		mm.Body = "it works on Mono!!!";
		return mm;
	}

	static void Main (string[] args)
	{
		string user = args [0];
		string password = args [1];

		NetworkCredential nc = new NetworkCredential ();
		nc.UserName = user;
		nc.Password = password;

		SmtpClient smtp = new SmtpClient ("smtp.gmail.com", 587);
		smtp.EnableSsl = true;
		smtp.Credentials = nc;
		smtp.Send (BuildConfirmationMessage (user));
	}
}

