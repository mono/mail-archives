using System;
using System.IO;
using System.Xml;
using System.Xml.Schema;

namespace ValidationSample
{
  class Sample
  {
    public static void Main (string [] args)
    {
        XmlTextReader tr = new XmlTextReader (args[2]);
        XmlValidatingReader vr = new XmlValidatingReader (tr);
	
	if (args[0] == "DTD")
  		// for DTD validation
        	vr.ValidationType = ValidationType.DTD;
	else if (args[0] == "XSD")
        	// form schema XSD validation
	        vr.ValidationType = ValidationType.Schema;
	
	vr.Schemas.Add(string.Empty, args[1]);
        vr.ValidationEventHandler +=
	new ValidationEventHandler (ValidationHandler);

        while (vr.Read ());
        Console.WriteLine ("End Validation");
    }

    public static void ValidationHandler (object sender,
					  ValidationEventArgs args)
    {
      Console.WriteLine ("***Validation error");
      Console.WriteLine ("\tSeverity:{0}", args.Severity);
      Console.WriteLine ("\tMessage  :{0}", args.Message);
    }
  }
}

