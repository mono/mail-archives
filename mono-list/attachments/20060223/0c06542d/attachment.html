<tt>
Robert,&nbsp;&lt;br&gt;Thank&nbsp;you&nbsp;for&nbsp;your&nbsp;suggestions.&lt;br&gt;&lt;br&gt;What&nbsp;about&nbsp;C#&nbsp;wrapper&nbsp;classes&nbsp;that&nbsp;were&nbsp;singletons&nbsp;and&nbsp;had&nbsp;locks&nbsp;that&nbsp;would&nbsp;take&nbsp;care&nbsp;of&nbsp;race&nbsp;conditions,&nbsp;initializing&nbsp;the&nbsp;library&nbsp;in&nbsp;global?&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
On&nbsp;2/23/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Robert&nbsp;Jordan&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:robertj@gmx.net&quot;&gt;robertj@gmx.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Chris,&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;Looking&nbsp;for&nbsp;some&nbsp;guidelines&nbsp;on&nbsp;consuming&nbsp;some&nbsp;of&nbsp;our&nbsp;library&nbsp;(in&nbsp;C)&nbsp;into&lt;br&gt;&amp;gt;&nbsp;.NET&nbsp;for&nbsp;use&nbsp;with&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;pages&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I'm&nbsp;concerned&nbsp;about&nbsp;our&nbsp;global&nbsp;and&nbsp;static&nbsp;variables&nbsp;that&nbsp;are&nbsp;needed&nbsp;in&nbsp;some<br>
&lt;br&gt;&amp;gt;&nbsp;of&nbsp;our&nbsp;libraries.&amp;nbsp;&amp;nbsp;In&nbsp;a&nbsp;single&nbsp;threaded&nbsp;C#&nbsp;application&nbsp;this&nbsp;would&nbsp;be&nbsp;no&lt;br&gt;&amp;gt;&nbsp;problem.&amp;nbsp;&amp;nbsp;Initialize&nbsp;the&nbsp;libraries&nbsp;at&nbsp;startup,&nbsp;destroy&nbsp;on&nbsp;close.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;But&nbsp;for&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;pages,&nbsp;how&nbsp;would&nbsp;I&nbsp;handle&nbsp;initialization,&nbsp;since&nbsp;multiple<br>
&lt;br&gt;&amp;gt;&nbsp;pages&nbsp;are&nbsp;being&nbsp;served&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;making&nbsp;use&nbsp;of&nbsp;these&nbsp;libraries?&lt;br&gt;&lt;br&gt;Are&nbsp;your&nbsp;native&nbsp;libraries&nbsp;thread&nbsp;safe?&nbsp;If&nbsp;yes,&nbsp;you&nbsp;usually&nbsp;don't&lt;br&gt;have&nbsp;to&nbsp;care&nbsp;about&nbsp;the&nbsp;initialization.&nbsp;If&nbsp;they&nbsp;are&nbsp;not:&nbsp;welcome&nbsp;to&nbsp;a<br>
&lt;br&gt;world&nbsp;of&nbsp;pain.&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;Would&nbsp;I&nbsp;initiailze&nbsp;for&nbsp;each&nbsp;page&nbsp;request&nbsp;as&nbsp;needed&nbsp;in&nbsp;the&nbsp;C#&nbsp;code&nbsp;behind&lt;br&gt;&amp;gt;&nbsp;page?&amp;nbsp;&amp;nbsp;Or&nbsp;is&nbsp;this&nbsp;going&nbsp;to&nbsp;have&nbsp;problems&nbsp;when&nbsp;multiple&nbsp;requests&nbsp;are&nbsp;issued?&lt;br&gt;&lt;br&gt;It&nbsp;won't&nbsp;work.&nbsp;Go&nbsp;ahead&nbsp;and&nbsp;fix&nbsp;the&nbsp;native&nbsp;library.&nbsp;Everything<br>
&lt;br&gt;else&nbsp;is&nbsp;a&nbsp;waste&nbsp;of&nbsp;time.&lt;br&gt;&lt;br&gt;&nbsp;&amp;gt;&nbsp;Also&nbsp;what&nbsp;about&nbsp;a&nbsp;function&nbsp;that&nbsp;contains&nbsp;a&nbsp;static&nbsp;variable?&lt;br&gt;&lt;br&gt;You&nbsp;have&nbsp;to&nbsp;rewrite&nbsp;them&nbsp;to&nbsp;use&nbsp;a&nbsp;TLS&nbsp;slot&nbsp;instead&nbsp;of&nbsp;the&lt;br&gt;static&nbsp;variable.&nbsp;If&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;static&nbsp;variable&nbsp;is<br>
&lt;br&gt;thread&nbsp;invariant,&nbsp;a&nbsp;lock&nbsp;for&nbsp;its&nbsp;initialization&nbsp;might&nbsp;be&nbsp;sufficient.&lt;br&gt;&lt;br&gt;The&nbsp;same&nbsp;has&nbsp;to&nbsp;be&nbsp;done&nbsp;with&nbsp;static&nbsp;variables&nbsp;outside&lt;br&gt;of&nbsp;functions&nbsp;as&nbsp;well.&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;Basically&nbsp;these&nbsp;are&nbsp;the&nbsp;questions&nbsp;I&nbsp;have,&nbsp;but&nbsp;I&nbsp;just&nbsp;can't&nbsp;find&nbsp;any<br>
&lt;br&gt;&amp;gt;&nbsp;resources&nbsp;to&nbsp;explain&nbsp;how&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;applications&nbsp;are&nbsp;threaded,&nbsp;and&nbsp;how&nbsp;it&nbsp;would&lt;br&gt;&amp;gt;&nbsp;effect&nbsp;consumption&nbsp;of&nbsp;unmanaged&nbsp;libraries.&amp;nbsp;&amp;nbsp;If&nbsp;anyone&nbsp;can&nbsp;even&nbsp;point&nbsp;me&nbsp;in&lt;br&gt;&amp;gt;&nbsp;the&nbsp;right&nbsp;direction&nbsp;I'd&nbsp;be&nbsp;very&nbsp;grateful.<br>
&lt;br&gt;&lt;br&gt;The&nbsp;threading&nbsp;model&nbsp;of&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;is&nbsp;quite&nbsp;straightforward&nbsp;for&lt;br&gt;the&nbsp;developer:&nbsp;one&nbsp;cannot&nbsp;predict&nbsp;by&nbsp;which&nbsp;thread&nbsp;the&nbsp;request&lt;br&gt;will&nbsp;be&nbsp;handled.&nbsp;This&nbsp;implies&nbsp;that&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;<br>
ASP.NET&lt;/a&gt;&nbsp;consumer&nbsp;has&lt;br&gt;to&nbsp;deal&nbsp;with&nbsp;concurrency&nbsp;all&nbsp;the&nbsp;time.&lt;br&gt;&lt;br&gt;Robert&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Mono-list&nbsp;maillist&amp;nbsp;&amp;nbsp;-&amp;nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-list@lists.ximian.com&quot;&gt;Mono-list@lists.ximian.com<br>
&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-list&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
