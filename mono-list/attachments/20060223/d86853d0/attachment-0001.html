<tt>
Robert,&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;exactly&nbsp;what&nbsp;I&nbsp;was&nbsp;wondering.&amp;nbsp;&nbsp;So&nbsp;it's&nbsp;safe&nbsp;to&nbsp;initialize&nbsp;this&nbsp;way,&nbsp;all&nbsp;asp&nbsp;worker&nbsp;threads&nbsp;would&nbsp;have&nbsp;access&nbsp;to&nbsp;an&nbsp;initialized&nbsp;library.&lt;br&gt;&lt;br&gt;Well&nbsp;that&nbsp;saves&nbsp;me&nbsp;a&nbsp;lot&nbsp;of&nbsp;work.&lt;br&gt;&lt;br&gt;Thank&nbsp;you&nbsp;very&nbsp;much&nbsp;for&nbsp;your&nbsp;time,<br>
&lt;br&gt;Chris&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;2/23/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Robert&nbsp;Jordan&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:robertj@gmx.net&quot;&gt;robertj@gmx.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Chris,&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;What&nbsp;about&nbsp;C#&nbsp;wrapper&nbsp;classes&nbsp;that&nbsp;were&nbsp;singletons&nbsp;and&nbsp;had&nbsp;locks&nbsp;that&nbsp;would&lt;br&gt;&amp;gt;&nbsp;take&nbsp;care&nbsp;of&nbsp;race&nbsp;conditions,&nbsp;initializing&nbsp;the&nbsp;library&nbsp;in&nbsp;global?&lt;br&gt;&lt;br&gt;Now&nbsp;I&nbsp;understand&nbsp;what&nbsp;you&nbsp;are&nbsp;looking&nbsp;for:&nbsp;an&nbsp;entry&nbsp;point&nbsp;to<br>
&lt;br&gt;initialize&nbsp;the&nbsp;lib.&nbsp;This&nbsp;entry&nbsp;point&nbsp;exists&nbsp;even&nbsp;for&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;apps:&lt;br&gt;it's&nbsp;the&nbsp;method&lt;br&gt;&lt;br&gt;protected&nbsp;void&nbsp;Application_Start(Object&nbsp;sender,&nbsp;EventArgs&nbsp;e)&lt;br&gt;&lt;br&gt;of&nbsp;global.asax&lt;br&gt;&lt;br&gt;But&nbsp;you&nbsp;can&nbsp;use&nbsp;a&nbsp;singleton&nbsp;for&nbsp;the&nbsp;initialization&nbsp;as&nbsp;well.<br>
&lt;br&gt;&lt;br&gt;Robert&lt;br&gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;On&nbsp;2/23/06,&nbsp;Robert&nbsp;Jordan&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:robertj@gmx.net&quot;&gt;robertj@gmx.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&amp;gt;&amp;gt;&nbsp;Chris,&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;Looking&nbsp;for&nbsp;some&nbsp;guidelines&nbsp;on&nbsp;consuming&nbsp;some&nbsp;of&nbsp;our&nbsp;library&nbsp;(in&nbsp;C)&nbsp;into<br>
&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;.NET&nbsp;for&nbsp;use&nbsp;with&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;pages&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;I'm&nbsp;concerned&nbsp;about&nbsp;our&nbsp;global&nbsp;and&nbsp;static&nbsp;variables&nbsp;that&nbsp;are&nbsp;needed&nbsp;in&lt;br&gt;&amp;gt;&amp;gt;&nbsp;some&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;of&nbsp;our&nbsp;libraries.&amp;nbsp;&amp;nbsp;In&nbsp;a&nbsp;single&nbsp;threaded&nbsp;C#&nbsp;application&nbsp;this&nbsp;would&nbsp;be&nbsp;no<br>
&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;problem.&amp;nbsp;&amp;nbsp;Initialize&nbsp;the&nbsp;libraries&nbsp;at&nbsp;startup,&nbsp;destroy&nbsp;on&nbsp;close.&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;But&nbsp;for&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;pages,&nbsp;how&nbsp;would&nbsp;I&nbsp;handle&nbsp;initialization,&nbsp;since&nbsp;multiple&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;pages&nbsp;are&nbsp;being&nbsp;served&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;making&nbsp;use&nbsp;of&nbsp;these&nbsp;libraries?<br>
&lt;br&gt;&amp;gt;&amp;gt;&nbsp;Are&nbsp;your&nbsp;native&nbsp;libraries&nbsp;thread&nbsp;safe?&nbsp;If&nbsp;yes,&nbsp;you&nbsp;usually&nbsp;don't&lt;br&gt;&amp;gt;&amp;gt;&nbsp;have&nbsp;to&nbsp;care&nbsp;about&nbsp;the&nbsp;initialization.&nbsp;If&nbsp;they&nbsp;are&nbsp;not:&nbsp;welcome&nbsp;to&nbsp;a&lt;br&gt;&amp;gt;&amp;gt;&nbsp;world&nbsp;of&nbsp;pain.&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;Would&nbsp;I&nbsp;initiailze&nbsp;for&nbsp;each&nbsp;page&nbsp;request&nbsp;as&nbsp;needed&nbsp;in&nbsp;the&nbsp;C#&nbsp;code&nbsp;behind<br>
&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;page?&amp;nbsp;&amp;nbsp;Or&nbsp;is&nbsp;this&nbsp;going&nbsp;to&nbsp;have&nbsp;problems&nbsp;when&nbsp;multiple&nbsp;requests&nbsp;are&lt;br&gt;&amp;gt;&amp;gt;&nbsp;issued?&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;It&nbsp;won't&nbsp;work.&nbsp;Go&nbsp;ahead&nbsp;and&nbsp;fix&nbsp;the&nbsp;native&nbsp;library.&nbsp;Everything&lt;br&gt;&amp;gt;&amp;gt;&nbsp;else&nbsp;is&nbsp;a&nbsp;waste&nbsp;of&nbsp;time.<br>
&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;Also&nbsp;what&nbsp;about&nbsp;a&nbsp;function&nbsp;that&nbsp;contains&nbsp;a&nbsp;static&nbsp;variable?&lt;br&gt;&amp;gt;&amp;gt;&nbsp;You&nbsp;have&nbsp;to&nbsp;rewrite&nbsp;them&nbsp;to&nbsp;use&nbsp;a&nbsp;TLS&nbsp;slot&nbsp;instead&nbsp;of&nbsp;the&lt;br&gt;&amp;gt;&amp;gt;&nbsp;static&nbsp;variable.&nbsp;If&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;static&nbsp;variable&nbsp;is<br>
&lt;br&gt;&amp;gt;&amp;gt;&nbsp;thread&nbsp;invariant,&nbsp;a&nbsp;lock&nbsp;for&nbsp;its&nbsp;initialization&nbsp;might&nbsp;be&nbsp;sufficient.&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;The&nbsp;same&nbsp;has&nbsp;to&nbsp;be&nbsp;done&nbsp;with&nbsp;static&nbsp;variables&nbsp;outside&lt;br&gt;&amp;gt;&amp;gt;&nbsp;of&nbsp;functions&nbsp;as&nbsp;well.&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;Basically&nbsp;these&nbsp;are&nbsp;the&nbsp;questions&nbsp;I&nbsp;have,&nbsp;but&nbsp;I&nbsp;just&nbsp;can't&nbsp;find&nbsp;any<br>
&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;resources&nbsp;to&nbsp;explain&nbsp;how&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;applications&nbsp;are&nbsp;threaded,&nbsp;and&nbsp;how&nbsp;it&lt;br&gt;&amp;gt;&amp;gt;&nbsp;would&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;effect&nbsp;consumption&nbsp;of&nbsp;unmanaged&nbsp;libraries.&amp;nbsp;&amp;nbsp;If&nbsp;anyone&nbsp;can&nbsp;even&nbsp;point&nbsp;me<br>
&lt;br&gt;&amp;gt;&amp;gt;&nbsp;in&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;the&nbsp;right&nbsp;direction&nbsp;I'd&nbsp;be&nbsp;very&nbsp;grateful.&lt;br&gt;&amp;gt;&amp;gt;&nbsp;The&nbsp;threading&nbsp;model&nbsp;of&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;is&nbsp;quite&nbsp;straightforward&nbsp;for&lt;br&gt;&amp;gt;&amp;gt;&nbsp;the&nbsp;developer:&nbsp;one&nbsp;cannot&nbsp;predict&nbsp;by&nbsp;which&nbsp;thread&nbsp;the&nbsp;request<br>
&lt;br&gt;&amp;gt;&amp;gt;&nbsp;will&nbsp;be&nbsp;handled.&nbsp;This&nbsp;implies&nbsp;that&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://ASP.NET&quot;&gt;ASP.NET&lt;/a&gt;&nbsp;consumer&nbsp;has&lt;br&gt;&amp;gt;&amp;gt;&nbsp;to&nbsp;deal&nbsp;with&nbsp;concurrency&nbsp;all&nbsp;the&nbsp;time.&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;Robert&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;_______________________________________________<br>
&lt;br&gt;&amp;gt;&amp;gt;&nbsp;Mono-list&nbsp;maillist&amp;nbsp;&amp;nbsp;-&amp;nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-list@lists.ximian.com&quot;&gt;Mono-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-list<br>
&lt;/a&gt;&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;------------------------------------------------------------------------&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;_______________________________________________&lt;br&gt;&amp;gt;&nbsp;Mono-list&nbsp;maillist&amp;nbsp;&amp;nbsp;-&amp;nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-list@lists.ximian.com&quot;&gt;<br>
Mono-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-list&lt;/a&gt;&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Mono-list&nbsp;maillist&amp;nbsp;&amp;nbsp;-&amp;nbsp;&amp;nbsp;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-list@lists.ximian.com&quot;&gt;Mono-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-list&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
