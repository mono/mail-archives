<tt>
Hi&amp;nbsp;Sebastien,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;thanks&nbsp;for&nbsp;your&nbsp;reply!&lt;/div&gt;&lt;div&gt;I&nbsp;only&nbsp;want&nbsp;to&nbsp;deploy&nbsp;it&nbsp;on&nbsp;the&nbsp;Linux&nbsp;server,&nbsp;so&nbsp;I&amp;#39;m&nbsp;working&nbsp;on&nbsp;this&nbsp;part&nbsp;first.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;found&nbsp;the&nbsp;solution,&nbsp;it&nbsp;had&nbsp;no&nbsp;rights&nbsp;to&nbsp;write&nbsp;to&nbsp;a&nbsp;given&nbsp;folder.&nbsp;It&nbsp;now&nbsp;executes,&nbsp;but&nbsp;the&nbsp;output&nbsp;file&nbsp;is&nbsp;just&nbsp;192&nbsp;bytes&nbsp;long,&nbsp;and&nbsp;only&nbsp;has&nbsp;the&nbsp;header&nbsp;of&nbsp;the&nbsp;PNG&nbsp;stream.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;whole&nbsp;process&nbsp;is&nbsp;the&nbsp;following:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;&amp;nbsp;open&nbsp;a&nbsp;24bit&nbsp;PNG&nbsp;file&lt;/div&gt;&lt;div&gt;2)&nbsp;&amp;nbsp;add&nbsp;the&nbsp;text&lt;/div&gt;&lt;div&gt;3)&nbsp;&amp;nbsp;save&nbsp;the&nbsp;file&nbsp;to&nbsp;a&nbsp;given&nbsp;directory&lt;/div&gt;&lt;div&gt;4)&nbsp;&amp;nbsp;send&nbsp;it&nbsp;to&nbsp;the&nbsp;out&nbsp;stream&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Image.FromFile&nbsp;would&nbsp;throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;it&nbsp;would&nbsp;not&nbsp;find&nbsp;the&nbsp;original&nbsp;file,&lt;/div&gt;&lt;div&gt;the&nbsp;TextWriter&nbsp;would&nbsp;throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;it&nbsp;would&nbsp;not&nbsp;find&nbsp;the&nbsp;font,&lt;/div&gt;&lt;div&gt;so&nbsp;I&nbsp;can&amp;#39;t&nbsp;find&nbsp;any&nbsp;reason&nbsp;why&nbsp;it&amp;#39;s&nbsp;not&nbsp;working.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don&amp;#39;t&nbsp;know,&nbsp;possibly&nbsp;I&amp;#39;m&nbsp;missing&nbsp;some&nbsp;required&nbsp;.so&nbsp;files?&lt;/div&gt;&lt;div&gt;I&nbsp;installed&nbsp;everything&nbsp;from&nbsp;the&nbsp;mono&nbsp;packages,&nbsp;and&nbsp;have&nbsp;libpng&nbsp;installed&nbsp;as&nbsp;well.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#888888&quot;&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;<br>
&lt;/font&gt;üdvözlettel&lt;br&gt;with&nbsp;regards&lt;br&gt;&lt;br&gt;Kardos&nbsp;Bálint&lt;br&gt;_______________________________________&lt;br&gt;&lt;a&nbsp;href=&quot;http://skaelede.hu&quot;&gt;http://skaelede.hu&lt;/a&gt;&nbsp;10&nbsp;(0xA)&nbsp;év&nbsp;a&nbsp;magyar&nbsp;weben&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Feb&nbsp;4,&nbsp;2009&nbsp;at&nbsp;19:12,&nbsp;Sebastien&nbsp;Pouliot&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:sebastien.pouliot@gmail.com&quot;&gt;sebastien.pouliot@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;On&nbsp;Wed,&nbsp;2009-02-04&nbsp;at&nbsp;18:55&nbsp;+0100,&nbsp;Bálint&nbsp;Kardos&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Hi,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;have&nbsp;written&nbsp;a&nbsp;small&nbsp;HttpHandler&nbsp;which&nbsp;automatically&nbsp;generates&nbsp;text&lt;br&gt;<br>
&amp;gt;&nbsp;on&nbsp;the&nbsp;fly&nbsp;with&nbsp;a&nbsp;custom&nbsp;font,&nbsp;added&nbsp;to&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;System.Drawing.Font.PrivateFontCollection.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;with&nbsp;Ms.net&nbsp;3.5sp1,&nbsp;it&nbsp;works&nbsp;fine.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;with&nbsp;Mono&nbsp;2.0.1,&lt;br&gt;<br>
&amp;gt;&nbsp;on&nbsp;Vista,&nbsp;it&nbsp;dies&nbsp;with:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Stacktrace:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;at&nbsp;(wrapper&nbsp;managed-to-native)&lt;br&gt;<br>
&amp;gt;&nbsp;System.Drawing.GDIPlus.GdipDeletePrivateFontCollection&nbsp;(intptr&amp;amp;)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;lt;0x00004&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;at&nbsp;(wrapper&nbsp;managed-to-native)&lt;br&gt;<br>
&amp;gt;&nbsp;System.Drawing.GDIPlus.GdipDeletePrivateFontCollection&nbsp;(intptr&amp;amp;)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;lt;0xffffffff&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;at&nbsp;System.Drawing.Text.PrivateFontCollection.Dispose&nbsp;(bool)&lt;br&gt;<br>
&amp;gt;&nbsp;[0x00015]&nbsp;in&nbsp;C:\cygwin\tmp\monobuild\build\BUILD\mono-2.0.1\mcs\class&lt;br&gt;<br>
&amp;gt;&nbsp;\System.Drawing\System.Drawing.Text\PrivateFontCollection.cs:80&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;on&nbsp;Linux,&nbsp;it&nbsp;dies&nbsp;with:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;System.Exception:&nbsp;Generic&nbsp;Error&nbsp;[GDI+&nbsp;status:&nbsp;GenericError]&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;at&nbsp;System.Drawing.GDIPlus.CheckStatus&nbsp;(Status&nbsp;status)&nbsp;[0x00000]&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;at&nbsp;System.Drawing.Image.Save&nbsp;(System.String&nbsp;filename,&nbsp;System.Drawing.Imaging.ImageCodecInfo&nbsp;encoder,&nbsp;System.Drawing.Imaging.EncoderParameters&nbsp;encoderParams)&nbsp;[0x00000]&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;at&nbsp;System.Drawing.Image.Save&nbsp;(System.String&nbsp;filename,&nbsp;System.Drawing.Imaging.ImageFormat&nbsp;format)&nbsp;[0x00000]&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;none&nbsp;of&nbsp;the&nbsp;which&nbsp;are&nbsp;further&nbsp;traceable.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;﻿This&nbsp;is&nbsp;likely&nbsp;two&nbsp;different&nbsp;issues.&nbsp;I&nbsp;recall&nbsp;(it&nbsp;was&nbsp;a&nbsp;_long_&nbsp;time&lt;br&gt;<br>
ago)&nbsp;some&nbsp;win32&nbsp;specific&nbsp;behavior&nbsp;wrt&nbsp;﻿PrivateFontCollection&nbsp;-&lt;br&gt;<br>
explaining&nbsp;the&nbsp;first&nbsp;case.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;suspect&nbsp;the&nbsp;later&nbsp;error&nbsp;(on&nbsp;Linux)&nbsp;is&nbsp;due&nbsp;to&nbsp;something&nbsp;else.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Any&nbsp;clues&nbsp;on&nbsp;how&nbsp;to&nbsp;further&nbsp;debug?&lt;br&gt;<br>
&amp;gt;&nbsp;thank&nbsp;you,&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Try&nbsp;to&nbsp;create&nbsp;a&nbsp;test&nbsp;case&nbsp;outside&nbsp;your&nbsp;HTTP&nbsp;handler&nbsp;(i.e.&nbsp;a&nbsp;small&nbsp;EXE).&lt;br&gt;<br>
Then&nbsp;use&nbsp;&amp;quot;mono&nbsp;--debug&nbsp;app.exe&amp;quot;&nbsp;to&nbsp;get&nbsp;a&nbsp;bit&nbsp;more&nbsp;information&nbsp;and&nbsp;fill&nbsp;a&lt;br&gt;<br>
bug&nbsp;report&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://bugzilla.novell.com&quot;&nbsp;target=&quot;_blank&quot;&gt;http://bugzilla.novell.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;Sebastien&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
