<tt>
rarrrr,&nbsp;forget&nbsp;the&nbsp;monolist,&nbsp;sorry&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2009/11/3&nbsp;Petit&nbsp;Eric&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:surfzoid@gmail.com&quot;&gt;surfzoid@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
same&nbsp;if&nbsp;trying&nbsp;to&nbsp;force&nbsp;:&lt;br&gt;//Example&nbsp;code&lt;br&gt;//On&nbsp;the&nbsp;NetFarmework&nbsp;-&nbsp;all&nbsp;work&nbsp;fine&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;//On&nbsp;Monoš&nbsp;-&nbsp;~105MiB&nbsp;in&nbsp;the&nbsp;heap,&nbsp;after&nbsp;GC.Collect().&nbsp;Expected&nbsp;~5&nbsp;MiB&lt;br&gt;////////////////&lt;br&gt;using&nbsp;System;&lt;br&gt;using&nbsp;System.Collections.Generic;&lt;br&gt;<br>
<br>
<br>
using&nbsp;System.Text;&lt;br&gt;&lt;br&gt;namespace&nbsp;mono_gc_test&lt;br&gt;{&lt;br&gt;šššššš&nbsp;class&nbsp;Program&lt;br&gt;šššššš&nbsp;{&lt;br&gt;šššššššššššššš&nbsp;static&nbsp;object&nbsp;alloc100MB()&lt;br&gt;šššššššššššššš&nbsp;{&lt;br&gt;šššššššššššššššššššššš&nbsp;byte[]&nbsp;data&nbsp;=&nbsp;new&nbsp;byte[100&nbsp;*&nbsp;1024&nbsp;*&nbsp;1024];&lt;br&gt;<br>
<br>
<br>
šššššššššššššššššššššš&nbsp;return&nbsp;data;&lt;br&gt;šššššššššššššš&nbsp;}&lt;br&gt;šššššššššššššš&nbsp;static&nbsp;void&nbsp;msg(string&nbsp;text,&nbsp;bool&nbsp;wait)&lt;br&gt;šššššššššššššš&nbsp;{&lt;br&gt;šššššššššššššššššššššš&nbsp;Console.WriteLine(text);&lt;br&gt;šššššššššššššššššššššš&nbsp;if&nbsp;(wait)&lt;br&gt;<br>
<br>
<br>
šššššššššššššššššššššššššššššš&nbsp;Console.ReadLine();&lt;br&gt;šššššššššššššš&nbsp;}&lt;br&gt;šššššššššššššš&nbsp;static&nbsp;void&nbsp;Main(string[]&nbsp;args)&lt;br&gt;šššššššššššššš&nbsp;{&lt;br&gt;šššššššššššššššššššššš&nbsp;object&nbsp;data&nbsp;=&nbsp;null;&lt;br&gt;šššššššššššššššššššššš&nbsp;msg(&amp;quot;Mono&nbsp;GC.Collect()&nbsp;realloc&nbsp;test.&amp;quot;,&nbsp;false);&lt;br&gt;<br>
<br>
&lt;/div&gt;<br>
šššššššššššššššššššššš&nbsp;msg(GC.GetTotalMemory(true).ToString(),false);&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;šššššššššššššššššššššš&nbsp;msg(&amp;quot;Press&nbsp;ENTER&nbsp;to&nbsp;alloc&nbsp;100MiB&nbsp;of&nbsp;data&amp;quot;,&nbsp;true);&lt;br&gt;šššššššššššššššššššššš&nbsp;data&nbsp;=&nbsp;alloc100MB();&lt;br&gt;<br>
<br>
&lt;/div&gt;šššššššššššššššššššššš&nbsp;msg(GC.GetTotalMemory(true).ToString(),false);&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
šššššššššššššššššššššš&nbsp;msg(&amp;quot;Press&nbsp;ENTER&nbsp;to&nbsp;GC.Collect()&amp;quot;,&nbsp;true);&lt;br&gt;šššššššššššššššššššššš&nbsp;data&nbsp;=&nbsp;null;&lt;br&gt;šššššššššššššššššššššš&nbsp;GC.Collect();&lt;br&gt;&lt;/div&gt;šššššššššššššššššššššš&nbsp;msg(GC.GetTotalMemory(true).ToString(),false);šššššššššššššššššššššš&nbsp;&lt;br&gt;<br>
<br>
<br>
šššššššššššššššššššššš&nbsp;GC.Collect(100&nbsp;*&nbsp;1024&nbsp;*&nbsp;1024,GCCollectionMode.Forced);&lt;br&gt;šššššššššššššššššššššš&nbsp;msg(GC.GetTotalMemory(true).ToString(),false);&lt;br&gt;šššššššššššššššššššššš&nbsp;msg(&amp;quot;Press&nbsp;ENTER&nbsp;to&nbsp;exit&amp;quot;,&nbsp;true);&lt;br&gt;<br>
<br>
<br>
šššššššššššššš&nbsp;}&lt;br&gt;šššššš&nbsp;}&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2009/11/3&nbsp;Alex&nbsp;A&nbsp;Ermoshenko&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:erax@rambler.ru&quot;&nbsp;target=&quot;_blank&quot;&gt;erax@rambler.ru&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
<br>
&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
//Example&nbsp;code&lt;br&gt;<br>
//On&nbsp;the&nbsp;NetFarmewort&nbsp;-&nbsp;all&nbsp;work&nbsp;fine&lt;br&gt;<br>
//On&nbsp;Mono&nbsp;š-&nbsp;~105MiB&nbsp;in&nbsp;the&nbsp;heap,&nbsp;after&nbsp;GC.Collect().&nbsp;Expected&nbsp;~5&nbsp;MiB&lt;br&gt;<br>
////////////////&lt;br&gt;<br>
using&nbsp;System;&lt;br&gt;<br>
using&nbsp;System.Collections.Generic;&lt;br&gt;<br>
using&nbsp;System.Text;&lt;br&gt;<br>
&lt;br&gt;<br>
namespace&nbsp;mono_gc_test&lt;br&gt;<br>
{&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;šclass&nbsp;Program&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š{&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šstatic&nbsp;object&nbsp;alloc100MB()&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š{&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šbyte[]&nbsp;data&nbsp;=&nbsp;new&nbsp;byte[100&nbsp;*&nbsp;1024&nbsp;*&nbsp;1024];&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šreturn&nbsp;data;&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š}&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šstatic&nbsp;void&nbsp;msg(string&nbsp;text,&nbsp;bool&nbsp;wait)&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š{&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šConsole.WriteLine(text);&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šif&nbsp;(wait)&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šConsole.ReadLine();&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š}&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šstatic&nbsp;void&nbsp;Main(string[]&nbsp;args)&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š{&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šobject&nbsp;data&nbsp;=&nbsp;null;&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šmsg(&amp;quot;Mono&nbsp;GC.Collect()&nbsp;realloc&nbsp;test.&amp;quot;,&nbsp;false);&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šmsg(&amp;quot;Press&nbsp;ENTER&nbsp;to&nbsp;alloc&nbsp;100MiB&nbsp;of&nbsp;data&amp;quot;,&nbsp;true);&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šdata&nbsp;=&nbsp;alloc100MB();&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šmsg(&amp;quot;Press&nbsp;ENTER&nbsp;to&nbsp;GC.Collect()&amp;quot;,&nbsp;true);&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šdata&nbsp;=&nbsp;null;&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šGC.Collect();&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;šmsg(&amp;quot;Press&nbsp;ENTER&nbsp;to&nbsp;exit&amp;quot;,&nbsp;true);&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š&nbsp;š}&lt;br&gt;<br>
&nbsp;š&nbsp;š&nbsp;š&nbsp;š}&lt;br&gt;<br>
}&lt;br&gt;<br>
--&lt;br&gt;<br>
&lt;/div&gt;View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://old.nabble.com/Why-mono-GC-does-not-realloc-the-heap-after-collect--tp26160496p26160496.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://old.nabble.com/Why-mono-GC-does-not-realloc-the-heap-after-collect--tp26160496p26160496.html&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>
<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Sent&nbsp;from&nbsp;the&nbsp;Mono&nbsp;-&nbsp;General&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-list&nbsp;maillist&nbsp;š-&nbsp;š&lt;a&nbsp;href=&quot;mailto:Mono-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Cordially.&nbsp;&lt;br&gt;&lt;br&gt;Small&nbsp;Eric&nbsp;Quotations&nbsp;of&nbsp;the&nbsp;days:&nbsp;&lt;br&gt;---------------------------------------------------------------------------&nbsp;&lt;br&gt;<br>
<br>
I&nbsp;have&nbsp;no&nbsp;special&nbsp;talents.&nbsp;I&nbsp;am&nbsp;only&nbsp;passionately&nbsp;curious&lt;br&gt;<br>
<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Cordially.&nbsp;&lt;br&gt;&lt;br&gt;Small&nbsp;Eric&nbsp;Quotations&nbsp;of&nbsp;the&nbsp;days:&nbsp;&lt;br&gt;---------------------------------------------------------------------------&nbsp;&lt;br&gt;I&nbsp;have&nbsp;no&nbsp;special&nbsp;talents.&nbsp;I&nbsp;am&nbsp;only&nbsp;passionately&nbsp;curious&lt;br&gt;<br>
<br>
Sent&nbsp;from&nbsp;Bordeaux,&nbsp;France<br>

</tt>
