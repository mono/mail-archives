<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7653.18&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[Mono-list]&nbsp;Problem&nbsp;connecting&nbsp;to&nbsp;a&nbsp;secure&nbsp;site&nbsp;via&nbsp;a&nbsp;NTLM&nbsp;authenticating&nbsp;proxy&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Thanks&nbsp;for&nbsp;your&nbsp;response&nbsp;Steve.&amp;nbsp;&nbsp;I'm&nbsp;afraid&nbsp;I&nbsp;made&nbsp;a&nbsp;mistake&nbsp;in&nbsp;my&nbsp;original&nbsp;post&nbsp;-&nbsp;*hangs&nbsp;head&nbsp;in&nbsp;shame*.&amp;nbsp;&nbsp;The&nbsp;same&nbsp;binary&nbsp;DOES&nbsp;work&nbsp;on&nbsp;Windows&nbsp;when&nbsp;executed&nbsp;through&nbsp;the&nbsp;.NET&nbsp;framework.&amp;nbsp;&nbsp;The&nbsp;problem&nbsp;is&nbsp;specific&nbsp;to&nbsp;the&nbsp;mono&nbsp;runtime&nbsp;only.&amp;nbsp;&lt;BR&gt;<br>
&lt;BR&gt;<br>
I'll&nbsp;give&nbsp;curl&nbsp;a&nbsp;try&nbsp;out&nbsp;though,&nbsp;thanks&nbsp;for&nbsp;the&nbsp;suggestion.&amp;nbsp;&nbsp;It&nbsp;may&nbsp;point&nbsp;to&nbsp;something&nbsp;wrong&nbsp;as&nbsp;you&nbsp;said.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Any&nbsp;hints&nbsp;to&nbsp;the&nbsp;mono&nbsp;problem&nbsp;would&nbsp;be&nbsp;appreicated.&amp;nbsp;&nbsp;I'm&nbsp;happy&nbsp;to&nbsp;gather&nbsp;more&nbsp;information&nbsp;(e.g.&nbsp;from&nbsp;tcpdump)&nbsp;if&nbsp;required.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Thanks,&lt;BR&gt;<br>
andy&lt;BR&gt;<br>
&lt;BR&gt;<br>
-----Original&nbsp;Message-----&lt;BR&gt;<br>
From:&nbsp;Steve&nbsp;Lessard&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:s_lessard@yahoo.com&quot;&gt;mailto:s_lessard@yahoo.com&lt;/A&gt;]&lt;BR&gt;<br>
Sent:&nbsp;Mon&nbsp;14/02/2011&nbsp;18:31&lt;BR&gt;<br>
To:&nbsp;Andrew&nbsp;Bryson&lt;BR&gt;<br>
Cc:&nbsp;mono-list@lists.ximian.com&lt;BR&gt;<br>
Subject:&nbsp;Re:&nbsp;[Mono-list]&nbsp;Problem&nbsp;connecting&nbsp;to&nbsp;a&nbsp;secure&nbsp;site&nbsp;via&nbsp;a&nbsp;NTLM&nbsp;authenticating&nbsp;proxy&lt;BR&gt;<br>
&lt;BR&gt;<br>
You&nbsp;should&nbsp;try&nbsp;isolating&nbsp;the&nbsp;problem&nbsp;by&nbsp;removing&nbsp;.NET&nbsp;and&nbsp;Mono&nbsp;altogether.&nbsp;Try&nbsp;using&nbsp;curl&nbsp;to&nbsp;make&nbsp;the&nbsp;same&nbsp;connection.&nbsp;Curl&nbsp;has&nbsp;support&nbsp;for&nbsp;all&nbsp;types&nbsp;of&nbsp;proxy&nbsp;servers&nbsp;as&nbsp;well&nbsp;as&nbsp;good&nbsp;debugging&nbsp;capabilities.&nbsp;Using&nbsp;curl&nbsp;may&nbsp;help&nbsp;you&nbsp;gain&nbsp;more&nbsp;insight&nbsp;into&nbsp;how&nbsp;connections&nbsp;through&nbsp;the&nbsp;proxy&nbsp;work.&lt;BR&gt;<br>
&lt;BR&gt;<br>
-SteveL&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;Feb&nbsp;14,&nbsp;2011,&nbsp;at&nbsp;6:12&nbsp;AM,&nbsp;Andrew&nbsp;Bryson&nbsp;&amp;lt;abryson@rm.com&amp;gt;&nbsp;wrote:&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;Hi&nbsp;all,&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;We've&nbsp;had&nbsp;a&nbsp;problem&nbsp;within&nbsp;our&nbsp;software&nbsp;for&nbsp;a&nbsp;while&nbsp;that&nbsp;our&nbsp;client&nbsp;on&nbsp;Mac&lt;BR&gt;<br>
&amp;gt;&nbsp;(OS&nbsp;X&nbsp;10.5-106,&nbsp;Mono&nbsp;2.6)&nbsp;has&nbsp;not&nbsp;been&nbsp;able&nbsp;to&nbsp;connect&nbsp;to&nbsp;websites&nbsp;which&lt;BR&gt;<br>
&amp;gt;&nbsp;require&nbsp;HTTPS&nbsp;when&nbsp;connecting&nbsp;through&nbsp;a&nbsp;NTLM&nbsp;authentication&nbsp;proxy&nbsp;(Microsoft&lt;BR&gt;<br>
&amp;gt;&nbsp;ISA&nbsp;2006).&amp;nbsp;&nbsp;In&nbsp;trying&nbsp;to&nbsp;get&nbsp;to&nbsp;the&nbsp;bottom&nbsp;of&nbsp;this&nbsp;I've&nbsp;discovered:&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;-&nbsp;This&nbsp;is&nbsp;a&nbsp;problem&nbsp;with&nbsp;Mono&nbsp;2.6&nbsp;and&nbsp;2.8(.2).&lt;BR&gt;<br>
&amp;gt;&nbsp;-&nbsp;NTLM&nbsp;authentication&nbsp;works&nbsp;through&nbsp;the&nbsp;ISA&nbsp;proxy&nbsp;when&nbsp;the&nbsp;target&nbsp;site&nbsp;uses&lt;BR&gt;<br>
&amp;gt;&nbsp;plain&nbsp;HTTP.&amp;nbsp;&nbsp;We&nbsp;must&nbsp;connect&nbsp;securely&nbsp;via&nbsp;HTTPS.&lt;BR&gt;<br>
&amp;gt;&nbsp;-&nbsp;The&nbsp;same&nbsp;problem&nbsp;happens&nbsp;on&nbsp;Windows&nbsp;when&nbsp;I&nbsp;execute&nbsp;my&nbsp;C#&nbsp;.NET&nbsp;2.0&nbsp;app&lt;BR&gt;<br>
&amp;gt;&nbsp;directly&nbsp;(i.e.&nbsp;not&nbsp;launching&nbsp;it&nbsp;with&nbsp;'mono').&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;I&nbsp;have&nbsp;put&nbsp;together&nbsp;a&nbsp;small&nbsp;application&nbsp;to&nbsp;allow&nbsp;me&nbsp;to&nbsp;test&nbsp;this&nbsp;issue.&lt;BR&gt;<br>
&amp;gt;&nbsp;When&nbsp;calling&nbsp;HttpWebRequest.GetResponse()&nbsp;the&nbsp;following&nbsp;exception&nbsp;occurs:&lt;BR&gt;<br>
&amp;gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://pastie.org/1562663&quot;&gt;http://pastie.org/1562663&lt;/A&gt;.&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;I've&nbsp;tried&nbsp;playing&nbsp;around&nbsp;with&nbsp;the&nbsp;HttpWebRequest.PreAuthenticate&nbsp;property,&lt;BR&gt;<br>
&amp;gt;&nbsp;and&nbsp;associating&nbsp;the&nbsp;credentials&nbsp;with&nbsp;the&nbsp;HttpWebRequest.Credentials&nbsp;object&lt;BR&gt;<br>
&amp;gt;&nbsp;(but&nbsp;the&nbsp;website&nbsp;does&nbsp;not&nbsp;require&nbsp;auth,&nbsp;only&nbsp;the&nbsp;proxy).&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;The&nbsp;same&nbsp;binary&nbsp;executed&nbsp;on&nbsp;Windows&nbsp;works.&amp;nbsp;&nbsp;I&nbsp;realy&nbsp;hope&nbsp;that&nbsp;somebody&nbsp;is&lt;BR&gt;<br>
&amp;gt;&nbsp;able&nbsp;to&nbsp;help&nbsp;me&nbsp;out&nbsp;in&nbsp;either&nbsp;fixing&nbsp;the&nbsp;problem,&nbsp;or&nbsp;confirming&nbsp;that&nbsp;it's&nbsp;a&lt;BR&gt;<br>
&amp;gt;&nbsp;known&nbsp;issue&nbsp;in&nbsp;the&nbsp;current&nbsp;Mono&nbsp;framework.&amp;nbsp;&nbsp;Here's&nbsp;the&nbsp;test&nbsp;application:&lt;BR&gt;<br>
&amp;gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://pastie.org/1562659&quot;&gt;http://pastie.org/1562659&lt;/A&gt;.&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;Thanks,&lt;BR&gt;<br>
&amp;gt;&nbsp;andy&lt;BR&gt;<br>
&amp;gt;&nbsp;--&lt;BR&gt;<br>
&amp;gt;&nbsp;View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;A&nbsp;HREF=&quot;http://mono.1490590.n4.nabble.com/Problem-connecting-to-a-secure-site-via-a-NTLM-authenticating-proxy-tp3305051p3305051.html&quot;&gt;http://mono.1490590.n4.nabble.com/Problem-connecting-to-a-secure-site-via-a-NTLM-authenticating-proxy-tp3305051p3305051.html&lt;/A&gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;Sent&nbsp;from&nbsp;the&nbsp;Mono&nbsp;-&nbsp;General&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.&lt;BR&gt;<br>
&amp;gt;&nbsp;_______________________________________________&lt;BR&gt;<br>
&amp;gt;&nbsp;Mono-list&nbsp;maillist&amp;nbsp;&nbsp;-&amp;nbsp;&nbsp;Mono-list@lists.ximian.com&lt;BR&gt;<br>
&amp;gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://lists.ximian.com/mailman/listinfo/mono-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-list&lt;/A&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Verdana&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10pt;&quot;&gt;_________________________________________________________________&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;table&nbsp;valign=&quot;top&quot;&nbsp;width=&quot;101%&quot;&nbsp;cellspacing=&quot;0&quot;&gt;<br>
&lt;tr&gt;<br>
&lt;td&nbsp;width=&quot;27%&quot;&gt;<br>
&lt;br&gt;<br>
&lt;img&nbsp;alt=&quot;&quot;&nbsp;border=&quot;0&quot;&nbsp;width=&quot;160&quot;&nbsp;height=&quot;100&quot;&nbsp;src=&quot;http://www.rmassessment.co.uk/sites/default/files/images/thumbs/Assessment%20Tomorrow%20logo.PNG?1259349477&quot;&gt;&lt;/td&gt;<br>
&lt;td&nbsp;width=&quot;150%&quot;&gt;<br>
&lt;br&gt;<br>
RM&nbsp;Assessment&nbsp;is&nbsp;sponsoring&nbsp;the&nbsp;9&lt;sup&gt;th&lt;/sup&gt;&nbsp;e-Assessment&nbsp;Question&nbsp;Conference&nbsp;in&nbsp;London.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.e-assess.co.uk/&quot;&gt;30th&nbsp;-&nbsp;31st&nbsp;March&nbsp;2011&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
&lt;br&gt;<br>
&lt;p&gt;_________________________________________________________________&lt;/p&gt;<br>
&lt;br&gt;<br>
&lt;p&nbsp;style=&quot;color:#008000;&quot;&gt;P.S.&nbsp;Think&nbsp;Green&nbsp;-&nbsp;don't&nbsp;print&nbsp;this&nbsp;email&nbsp;unless&nbsp;you&nbsp;really&nbsp;need&nbsp;to.&lt;/p&gt;<br>
&lt;br&gt;<br>
&lt;table&nbsp;border=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&nbsp;width=&quot;916&quot;&gt;<br>
&nbsp;&nbsp;&lt;tr&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&nbsp;width=&quot;144&quot;&nbsp;valign=&quot;top&quot;&gt;&lt;p&gt;&lt;img&nbsp;width=&quot;127&quot;&nbsp;height=&quot;107&quot;&nbsp;src=&quot;http://www.rm.com/_RMVirtual/media/images/rm_education_email_signature_logo.gif&quot;&nbsp;/&gt;&lt;/p&gt;&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&nbsp;width=&quot;772&quot;&nbsp;valign=&quot;top&quot;&gt;&lt;p&gt;&lt;font&nbsp;face=&quot;Verdana&quot;&nbsp;size=&quot;2&quot;&nbsp;color=&quot;#999999&quot;&gt;This&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;is&nbsp;confidential.&nbsp;You&nbsp;should&nbsp;not&nbsp;copy&nbsp;it&nbsp;or&nbsp;disclose&nbsp;its&nbsp;contents&nbsp;to&nbsp;&nbsp;&nbsp;&nbsp;anyone.&nbsp;You&nbsp;may&nbsp;use&nbsp;and&nbsp;apply&nbsp;the&nbsp;information&nbsp;only&nbsp;for&nbsp;the&nbsp;intended&nbsp;purpose.&nbsp;&nbsp;&nbsp;&nbsp;Internet&nbsp;communications&nbsp;are&nbsp;not&nbsp;secure&nbsp;and&nbsp;therefore&nbsp;RM&nbsp;Education&nbsp;does&nbsp;not&nbsp;&nbsp;&nbsp;&nbsp;accept&nbsp;legal&nbsp;responsibility&nbsp;for&nbsp;the&nbsp;contents&nbsp;of&nbsp;this&nbsp;message.&nbsp;Any&nbsp;views&nbsp;or&nbsp;&nbsp;&nbsp;&nbsp;opinions&nbsp;presented&nbsp;are&nbsp;only&nbsp;those&nbsp;of&nbsp;the&nbsp;author&nbsp;and&nbsp;not&nbsp;those&nbsp;of&nbsp;RM&nbsp;&nbsp;&nbsp;&nbsp;Education.&nbsp;If&nbsp;this&nbsp;email&nbsp;has&nbsp;come&nbsp;to&nbsp;you&nbsp;in&nbsp;error&nbsp;please&nbsp;delete&nbsp;it&nbsp;and&nbsp;any&nbsp;&nbsp;&nbsp;&nbsp;attachments.&nbsp;Please&nbsp;note&nbsp;that&nbsp;RM&nbsp;Education&nbsp;may&nbsp;intercept&nbsp;incoming&nbsp;and&nbsp;&nbsp;&nbsp;&nbsp;outgoing&nbsp;email&nbsp;communications.&amp;nbsp;&lt;br&nbsp;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&nbsp;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RM&nbsp;Education&nbsp;plc&nbsp;is&nbsp;a&nbsp;company&nbsp;registered&nbsp;in&nbsp;England&nbsp;and&nbsp;Wales,&nbsp;Company&nbsp;Reg.&nbsp;&nbsp;&nbsp;&nbsp;No:&nbsp;01148594;&nbsp;Registered&nbsp;Office:&nbsp;New&nbsp;Mill&nbsp;House,&nbsp;183&nbsp;Milton&nbsp;Park,&nbsp;Abingdon,&nbsp;&nbsp;&nbsp;&nbsp;OXON&nbsp;OX14&nbsp;4SE;&nbsp;VAT&nbsp;No:&nbsp;630&nbsp;8236&nbsp;56&nbsp;&lt;/p&gt;&lt;/td&gt;<br>
&nbsp;&nbsp;&lt;/tr&gt;<br>
&lt;/table&gt;&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
