<tt>
&lt;div&gt;Here&nbsp;is&nbsp;the&nbsp;fix&nbsp;for&nbsp;the&nbsp;following&nbsp;bug:&lt;br&gt;&lt;a&nbsp;href=&quot;https://bugzilla.novell.com/show_bug.cgi?id=633454&quot;&gt;https://bugzilla.novell.com/show_bug.cgi?id=633454&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;underlying&nbsp;problem&nbsp;is&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;Android&amp;#39;s&nbsp;libc,&nbsp;where&nbsp;after&nbsp;a&nbsp;process&nbsp;forks,&nbsp;the&nbsp;kernel&nbsp;id&nbsp;of&nbsp;the&nbsp;forked&nbsp;thread&nbsp;is&nbsp;not&nbsp;changed&nbsp;to&nbsp;reflect&nbsp;the&nbsp;new&nbsp;child&nbsp;thread.&nbsp;The&nbsp;pthread&nbsp;kernel&nbsp;id&nbsp;still&nbsp;points&nbsp;to&nbsp;the&nbsp;kernel&nbsp;id&nbsp;of&nbsp;the&nbsp;parent&nbsp;process:&nbsp;zygote.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;bug&nbsp;breaks&nbsp;all&nbsp;multithread&nbsp;monodroid&nbsp;apps&nbsp;(as&nbsp;well&nbsp;as&nbsp;my&nbsp;mono&nbsp;on&nbsp;Android&nbsp;port),&nbsp;as&nbsp;Garbage&nbsp;Collection&nbsp;fails&nbsp;and&nbsp;the&nbsp;process&nbsp;hangs.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;fix/workaround&nbsp;for&nbsp;the&nbsp;bug&nbsp;in&nbsp;Android&nbsp;is&nbsp;as&nbsp;follows:&lt;br&gt;<br>
The&nbsp;GC_Thread&nbsp;structure&nbsp;on&nbsp;Android&nbsp;has&nbsp;a&nbsp;new&nbsp;&amp;quot;kernel_id&amp;quot;&nbsp;member.&nbsp;When&nbsp;GC_new_thread&nbsp;is&nbsp;called,&nbsp;the&nbsp;kernel&nbsp;id&nbsp;is&nbsp;also&nbsp;retrieved&nbsp;and&nbsp;stored&nbsp;with&nbsp;gettid.&nbsp;When&nbsp;the&nbsp;world&nbsp;needs&nbsp;to&nbsp;be&nbsp;stopped/started,&nbsp;a&nbsp;new&nbsp;function&nbsp;android_thread_kill&nbsp;is&nbsp;called,&nbsp;which&nbsp;is&nbsp;a&nbsp;reimplementation&nbsp;of&nbsp;Android&amp;#39;s&nbsp;pthread_kill.&nbsp;Instead,&nbsp;which&nbsp;takes&nbsp;the&nbsp;correct&nbsp;kernel&nbsp;id,&nbsp;rather&nbsp;than&nbsp;the&nbsp;potentially&nbsp;hosed&nbsp;pthread.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;attached&nbsp;a&nbsp;patch&nbsp;file,&nbsp;as&nbsp;well&nbsp;as&nbsp;committed&nbsp;to&nbsp;my&nbsp;fork&nbsp;of&nbsp;mono&nbsp;on&nbsp;Github:&lt;/div&gt;&lt;a&nbsp;href=&quot;http://github.com/koush/mono/commit/414aff5598a2dea618741bea714fa8dd1baf0d52&quot;&gt;http://github.com/koush/mono/commit/414aff5598a2dea618741bea714fa8dd1baf0d52&lt;/a&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
