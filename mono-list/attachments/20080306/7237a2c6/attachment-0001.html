<tt>
I&amp;#39;ve&nbsp;made&nbsp;a&nbsp;small&nbsp;program&nbsp;to&nbsp;use&nbsp;all&nbsp;processors&nbsp;on&nbsp;a&nbsp;system&nbsp;to&nbsp;analyze&nbsp;N&nbsp;text&nbsp;files.&nbsp;But&nbsp;when&nbsp;it&amp;#39;s&nbsp;run&nbsp;on&nbsp;a&nbsp;8&nbsp;CPU&nbsp;PC,&nbsp;the&nbsp;CPU&nbsp;time&nbsp;stays&nbsp;around&nbsp;70%-80%&nbsp;and&nbsp;the&nbsp;idle&nbsp;time&nbsp;between&nbsp;20-30%.&nbsp;&lt;br&gt;&lt;br&gt;I&amp;nbsp;&nbsp;made&nbsp;a&nbsp;small&nbsp;program&nbsp;to&nbsp;illustrate&nbsp;the&nbsp;problem,&nbsp;it&nbsp;was&nbsp;simplified&nbsp;it&nbsp;to&nbsp;the&nbsp;point&nbsp;it&nbsp;doesn&amp;#39;t&nbsp;process&nbsp;anything.&nbsp;It&nbsp;just&nbsp;creates&nbsp;a&nbsp;thread&nbsp;for&nbsp;every&nbsp;processor&nbsp;on&nbsp;the&nbsp;system&nbsp;and&nbsp;every&nbsp;thread&nbsp;just&nbsp;reads&nbsp;an&nbsp;entire&nbsp;file&nbsp;passed&nbsp;as&nbsp;parameter:&lt;br&gt;<br>
------------------------------------&lt;br&gt;using&nbsp;System;<br>
&lt;br&gt;using&nbsp;System.IO;<br>
&lt;br&gt;using&nbsp;System.Threading;<br>
&lt;br&gt;&amp;nbsp;<br>
&lt;br&gt;namespace&nbsp;MultipleReader<br>
&lt;br&gt;{<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;class&nbsp;Program<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;static&nbsp;void&nbsp;Main(string[]&nbsp;args)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Thread[]&nbsp;Threads&nbsp;=&nbsp;new&nbsp;Thread[Environment.ProcessorCount];<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;for&nbsp;(int&nbsp;Idx&nbsp;=&nbsp;0;&nbsp;Idx&nbsp;&amp;lt;&nbsp;Threads.Length;&nbsp;Idx++)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;MyThread&nbsp;T&nbsp;=&nbsp;new&nbsp;MyThread(args[0]);<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Threads[Idx]&nbsp;=&nbsp;new&nbsp;Thread(new&nbsp;ThreadStart(T.Process));<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;foreach&nbsp;(Thread&nbsp;T&nbsp;in&nbsp;Threads)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;T.Start();<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;foreach&nbsp;(Thread&nbsp;T&nbsp;in&nbsp;Threads)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;T.Join();<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}<br>
&lt;br&gt;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;class&nbsp;MyThread<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;private&nbsp;string&nbsp;FileName;<br>
&lt;br&gt;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;public&nbsp;MyThread(string&nbsp;FileName)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;this.FileName&nbsp;=&nbsp;FileName;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}<br>
&lt;br&gt;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;public&nbsp;void&nbsp;Process()<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;string&nbsp;Str;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;using&nbsp;(StreamReader&nbsp;SR&nbsp;=&nbsp;new&nbsp;StreamReader(FileName))<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;((Str&nbsp;=&nbsp;SR.ReadLine())&nbsp;!=&nbsp;null)&nbsp;;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}<br>
&lt;br&gt;}&nbsp;&lt;br&gt;------------------------------------&lt;br&gt;When&nbsp;this&nbsp;program&nbsp;is&nbsp;run&nbsp;using&nbsp;a&nbsp;large&nbsp;text&nbsp;file&nbsp;as&nbsp;a&nbsp;parameter&nbsp;(a&nbsp;~600&nbsp;megs&nbsp;file,&nbsp;to&nbsp;make&nbsp;the&nbsp;reading&nbsp;last&nbsp;in&nbsp;the&nbsp;order&nbsp;of&nbsp;tens&nbsp;of&nbsp;seconds)&nbsp;the&nbsp;same&nbsp;behavior&nbsp;is&nbsp;observed.&nbsp;Is&nbsp;this&nbsp;normal?&nbsp;What&nbsp;is&nbsp;causing&nbsp;this&nbsp;behavior?&nbsp;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;use&nbsp;all&nbsp;the&nbsp;processors&nbsp;at&nbsp;full&nbsp;capacity?&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;<br>
&lt;br&gt;The&nbsp;file&nbsp;is&nbsp;fully&nbsp;cached&nbsp;(cat&nbsp;file&nbsp;/dev/null)&nbsp;on&nbsp;RAM&nbsp;(4G&nbsp;RAM&nbsp;on&nbsp;this&nbsp;PC)&nbsp;before&nbsp;the&nbsp;program&nbsp;is&nbsp;started.&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Yanko&lt;br&gt;<br>

</tt>
