<tt>
&lt;P&gt;hello&nbsp;sir,&lt;BR&gt;With&nbsp;your&nbsp;advice&nbsp;I&nbsp;update&nbsp;my&nbsp;redhat9&nbsp;to&nbsp;fedral4(kernel&nbsp;2.6.11),&nbsp;but&nbsp;the&nbsp;socket&nbsp;still&nbsp;can't&nbsp;be&nbsp;set&nbsp;timeout&nbsp;property.&nbsp;What&nbsp;is&nbsp;wrong&nbsp;with&nbsp;it?&nbsp;And&nbsp;I&nbsp;also&nbsp;have&nbsp;a&nbsp;problem&nbsp;with&nbsp;Process.GetProcesses(),&nbsp;it&nbsp;can't&nbsp;get&nbsp;all&nbsp;processes&nbsp;in&nbsp;current&nbsp;machine.&lt;BR&gt;Would&nbsp;you&nbsp;do&nbsp;me&nbsp;a&nbsp;favor&nbsp;to&nbsp;help&nbsp;me&nbsp;again&nbsp;please?&nbsp;Thank&nbsp;you&nbsp;very&nbsp;much!&lt;BR&gt;Here&nbsp;is&nbsp;the&nbsp;source&nbsp;code:&lt;/P&gt;<br>
&lt;P&gt;using&nbsp;System;&lt;BR&gt;using&nbsp;System.Net.Sockets;&lt;BR&gt;using&nbsp;System.Net;&lt;BR&gt;using&nbsp;System.Runtime.InteropServices;&lt;BR&gt;using&nbsp;System.IO;&lt;BR&gt;using&nbsp;System.Diagnostics;&lt;BR&gt;namespace&nbsp;CommTest&lt;BR&gt;{&lt;BR&gt;&amp;nbsp;class&nbsp;Class1&lt;BR&gt;&amp;nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;[STAThread]&lt;BR&gt;&amp;nbsp;&amp;nbsp;static&nbsp;void&nbsp;Main(string[]&nbsp;args)&lt;BR&gt;&amp;nbsp;&amp;nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;//it&nbsp;can't&nbsp;work&nbsp;in&nbsp;fedral&nbsp;core&nbsp;4(kernel&nbsp;2.6.11),but&nbsp;works&nbsp;well&nbsp;in&nbsp;winXP&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Socket&nbsp;TCPSocket=new&nbsp;Socket(AddressFamily.InterNetwork,SocketType.Stream,ProtocolType.Tcp);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;//following&nbsp;2&nbsp;functions&nbsp;cause&nbsp;a&nbsp;exception:non-block&nbsp;socket&nbsp;would&nbsp;block&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;TCPSocket.SetSocketOption(SocketOptionLevel.Socket,SocketOptionName.SendTimeout,1000);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;TCPSocket.SetSocketOption(SocketOptionLevel.Socket,SocketOptionName.ReceiveTimeout,1000);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;IPAddress&nbsp;ConnIP=IPAddress.Parse(&quot;127.0.0.1&quot;);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;IPEndPoint&nbsp;SensorServer=new&nbsp;IPEndPoint(ConnIP,6000);&lt;B<br>
&nbsp;R&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;TCPSocket.Bind(SensorServer);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;TCPSocket.Listen(1);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Console.WriteLine(&quot;CommServ&nbsp;is&nbsp;listening...&quot;);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Socket&nbsp;AcceptSocket=TCPSocket.Accept();//throw&nbsp;a&nbsp;exception:non-block&nbsp;socket&nbsp;would&nbsp;block&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Console.WriteLine(&quot;CommClient&nbsp;is&nbsp;accepted...&quot;);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(AcceptSocket.Connected)&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;byte[]&nbsp;RcvBuf=new&nbsp;byte[1024];&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;AcceptSocket.Receive(RcvBuf);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Process[]&nbsp;Ps=Process.GetProcesses();//It&nbsp;dosen't&nbsp;work,&nbsp;only&nbsp;get&nbsp;itself&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;foreach(Process&nbsp;p&nbsp;in&nbsp;Ps)&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Console.WriteLine(p.ProcessName);//only&nbsp;output&nbsp;itself,&nbsp;not&nbsp;all&nbsp;processes&nbsp;in&nbsp;current&nbsp;machine,Why?&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;AcceptSocket.Send(RcvBuf);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;AcceptSocket.Close();&lt;BR&gt;&amp;nbsp<br>
&nbsp;;&amp;nbsp;&amp;nbsp;TCPSocket.Close();&lt;BR&gt;&amp;nbsp;&amp;nbsp;}&lt;BR&gt;&amp;nbsp;}&lt;BR&gt;}&lt;BR&gt;&lt;/P&gt;&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href='http://click.21cn.com/urlhitcounter3.php3?url=http://vgo.21cn.com!freemail_text&amp;key=MV8w&amp;rd=1'&nbsp;target='_blank'&gt;&lt;img&nbsp;src='http://mail.21cn.com/ads/Channel/sj_vgo_540x60.gif'&nbsp;width='540'&nbsp;height='60'&nbsp;border='0'&gt;&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>

</tt>
