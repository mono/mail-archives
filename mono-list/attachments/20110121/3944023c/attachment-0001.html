<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;10pt;<br>
font-family:Tahoma<br>
}<br>
--&gt;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;<br>
&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Tahoma&quot;&nbsp;size=&quot;2&quot;&gt;Tymek,&lt;/font&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Tahoma;&nbsp;font-size:&nbsp;10pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Tahoma;&nbsp;font-size:&nbsp;10pt;&nbsp;&quot;&gt;I&nbsp;believe&nbsp;there&nbsp;may&nbsp;be&nbsp;an&nbsp;outstanding&nbsp;issue&nbsp;with&nbsp;trying&nbsp;to&nbsp;import&nbsp;certificates&nbsp;using&nbsp;mozroots&nbsp;at&nbsp;the&nbsp;&lt;b&gt;MACHINE&lt;/b&gt;&nbsp;level.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Tahoma;&nbsp;font-size:&nbsp;10pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Tahoma;&nbsp;font-size:&nbsp;10pt;&nbsp;&quot;&gt;In&nbsp;my&nbsp;experience,&nbsp;the&nbsp;following&nbsp;command&nbsp;worked&nbsp;when&nbsp;run&nbsp;as&nbsp;the&nbsp;&lt;b&gt;USER&lt;/b&gt;&nbsp;that&nbsp;will&nbsp;run&nbsp;the&nbsp;application:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Tahoma;&nbsp;font-size:&nbsp;10pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;webkit-indent-blockquote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;40px;&nbsp;border-top-style:&nbsp;none;&nbsp;border-right-style:&nbsp;none;&nbsp;border-bottom-style:&nbsp;none;&nbsp;border-left-style:&nbsp;none;&nbsp;border-width:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;font-family:&nbsp;Tahoma;&nbsp;font-size:&nbsp;10pt;&nbsp;&quot;&gt;&lt;div&gt;&lt;i&gt;[PATH]/bin/mono&nbsp;[PATH]/mozroots.exe&nbsp;--import&nbsp;--sync&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Tahoma&quot;&nbsp;size=&quot;2&quot;&gt;Regards,&lt;/font&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Tahoma&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Tahoma&quot;&nbsp;size=&quot;2&quot;&gt;DevUp!&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Tahoma;&nbsp;font-size:&nbsp;10pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;hr&nbsp;id=&quot;stopSpelling&quot;&gt;Date:&nbsp;Thu,&nbsp;20&nbsp;Jan&nbsp;2011&nbsp;12:34:50&nbsp;+0800&lt;br&gt;From:&nbsp;tym.majewski@nearmap.com&lt;br&gt;To:&nbsp;mono-list@lists.ximian.com&lt;br&gt;Subject:&nbsp;[Mono-list]&nbsp;HTTPS:&nbsp;'Invalid&nbsp;certificate&nbsp;received&nbsp;from&nbsp;server.'&nbsp;and&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmozroots&lt;br&gt;&lt;br&gt;Hello&nbsp;gurus,&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;Mono&nbsp;2.6.7&nbsp;Ubuntu&nbsp;&lt;br&gt;&lt;br&gt;Problem:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;I&nbsp;<br>
cannot&nbsp;connect&nbsp;to&nbsp;https&nbsp;pages&nbsp;(using&nbsp;HttpWebRequest)&nbsp;from&nbsp;MONO&nbsp;ASP&nbsp;and&nbsp;I<br>
&nbsp;cannot&nbsp;(well,&nbsp;maybe&nbsp;I'm&nbsp;not&nbsp;doing&nbsp;it&nbsp;right)&nbsp;display&nbsp;installed&nbsp;x509&nbsp;<br>
certs.&lt;br&gt;<br>
&lt;br&gt;Error&nbsp;message:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Failed&nbsp;to&nbsp;submit&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;http://encrypted.google.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;encrypted.google.com&lt;/a&gt;<br>
&nbsp;form&nbsp;System.Net.WebException:&nbsp;Error&nbsp;getting&nbsp;response&nbsp;stream&nbsp;(Write:&nbsp;The<br>
&nbsp;authentication&nbsp;or&nbsp;decryption&nbsp;has&nbsp;failed.):&nbsp;SendFailure&nbsp;---&amp;gt;&nbsp;<br>
System.IO.IOException:&nbsp;The&nbsp;authentication&nbsp;or&nbsp;decryption&nbsp;has&nbsp;failed.&nbsp;<br>
---&amp;gt;&nbsp;Mono.Security.Protocol.Tls.&lt;div&nbsp;id=&quot;ecx:ze&quot;&gt;TlsException:&nbsp;Invalid&nbsp;certificate&nbsp;received&nbsp;from&nbsp;server.&nbsp;Error&nbsp;code:&nbsp;0xffffffff800b010a&lt;br&gt;<br>
&lt;br&gt;Extra&nbsp;info:&lt;br&gt;1.&nbsp;I&nbsp;restarted&nbsp;mono&nbsp;several&nbsp;times.&nbsp;&lt;br&gt;2.&nbsp;If&nbsp;I&nbsp;provide&nbsp;my&nbsp;own&nbsp;ServicePointManager.ServerCertificateValidationCallback&nbsp;validator&nbsp;and&nbsp;return&nbsp;true,&nbsp;the&nbsp;handshake&nbsp;goes&nbsp;through.&lt;br&gt;3.&nbsp;Connecting&nbsp;to&nbsp;example&nbsp;pages&nbsp;(paypal,&nbsp;google&nbsp;etc)&nbsp;from&nbsp;my&nbsp;Firefox&nbsp;doesn't&nbsp;show&nbsp;any&nbsp;issues.&lt;br&gt;<br>
<br>
4.&nbsp;Connecting&nbsp;to&nbsp;various&nbsp;pages&nbsp;with&nbsp;http://&nbsp;(not&nbsp;s)&nbsp;works&nbsp;fine.&lt;br&gt;5.&nbsp;I&nbsp;imported&nbsp;the&nbsp;std&nbsp;root&nbsp;certs&nbsp;with&nbsp;mozroots:&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;$sudo&nbsp;mozroots&nbsp;--import&nbsp;--machine&nbsp;--sync&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Mozilla&nbsp;Roots&nbsp;Importer&nbsp;-&nbsp;version&nbsp;2.6.7.0&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Download&nbsp;and&nbsp;import&nbsp;trusted&nbsp;root&nbsp;certificates&nbsp;from&nbsp;Mozilla's&nbsp;LXR.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Copyright&nbsp;2002,&nbsp;2003&nbsp;Motus&nbsp;Technologies.&nbsp;Copyright&nbsp;2004-2008&nbsp;Novell.&nbsp;BSD&nbsp;licensed.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Downloading&nbsp;from&nbsp;'&lt;a&nbsp;href=&quot;http://lxr.mozilla.org/seamonkey/source/security/nss/lib/ckfw/builtins/certdata.txt'.&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lxr.mozilla.org/seamonkey/source/security/nss/lib/ckfw/builtins/certdata.txt'.&lt;/a&gt;..&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Importing&nbsp;certificates&nbsp;into&nbsp;machine&nbsp;store...&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;140&nbsp;new&nbsp;root&nbsp;certificates&nbsp;were&nbsp;added&nbsp;to&nbsp;your&nbsp;trust&nbsp;store.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Import&nbsp;process&nbsp;completed.&lt;br&gt;&lt;br&gt;I&nbsp;can&nbsp;see&nbsp;the&nbsp;certs&nbsp;are&nbsp;there:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;$ls&nbsp;/usr/share/.mono/certs/Trust&nbsp;|&nbsp;wc&nbsp;-l&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;140&lt;br&gt;&lt;br&gt;&lt;br&gt;I&nbsp;tried&nbsp;to&nbsp;look&nbsp;at&nbsp;the&nbsp;installed&nbsp;certs&nbsp;but&nbsp;I&nbsp;always&nbsp;get&nbsp;Count&nbsp;=&nbsp;0:&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;X509Store&nbsp;storeMachine&nbsp;=&nbsp;new&nbsp;X509Store(StoreLocation.LocalMachine);<br>
//I&nbsp;also&nbsp;tried&nbsp;StoreLocation.CurrentUser&nbsp;also&nbsp;with&nbsp;no&nbsp;success.&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;storeMachine.Open(OpenFlags.ReadOnly);<br>
//BTW.&nbsp;Is&nbsp;this&nbsp;necessary&nbsp;at&nbsp;all?&lt;br&gt;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;X509Certificate2Collection&nbsp;storecollection2&nbsp;=&nbsp;(X509Certificate2Collection)storeMachine.Certificates;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Console.WriteLine(&quot;Number&nbsp;of&nbsp;X509&nbsp;certs&nbsp;Machine:&nbsp;{0}&quot;,&nbsp;storecollection2.Count);<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;foreach&nbsp;(X509Certificate2&nbsp;x509&nbsp;in&nbsp;storecollection2)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Console.WriteLine(&quot;certificate&nbsp;name:&nbsp;{0}&quot;,&nbsp;x509.Subject);<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&lt;br&gt;&lt;br&gt;Thanks&nbsp;in&nbsp;advance&nbsp;for&nbsp;any&nbsp;help&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Tymek&nbsp;Majewski&lt;br&gt;Software&nbsp;Developer&lt;br&gt;NearMap.com&lt;br&gt;&lt;br&gt;<br>
&lt;br&gt;_______________________________________________<br>
Mono-list&nbsp;maillist&nbsp;&nbsp;-&nbsp;&nbsp;Mono-list@lists.ximian.com<br>
http://lists.ximian.com/mailman/listinfo/mono-list&lt;/div&gt;&lt;/div&gt;&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
