<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mono vs mint misbehaviour
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stef%40iguana.be">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004670.html">
   <LINK REL="Next"  HREF="004674.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mono vs mint misbehaviour
   </H1>
    <B>Stef Van Dessel
    </B> 
    <A HREF="mailto:stef%40iguana.be"
       TITLE="[Mono-list] mono vs mint misbehaviour">stef@iguana.be
       </A><BR>
    <I>Fri, 5 Apr 2002 00:37:14 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="004670.html">[Mono-list] finding  glib2 and pkg-config on checktime.
</A></li>
        <LI> Next message: <A HREF="004674.html">[Mono-list] Concatenation Bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4680">[ date ]</a>
              <a href="thread.html#4680">[ thread ]</a>
              <a href="subject.html#4680">[ subject ]</a>
              <a href="author.html#4680">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've been writing a small application in C# lately, and I stumbled
upon something strange. I've &quot;reduced&quot; the fault to this:

using System;

namespace whatever
{
	class Application
	{
		static void Main(string[] args) {
			long temp = 0x00;
			// Console.WriteLine(&quot;{0:X}&quot;, temp);
			// this fails with mono, not with mint
			for (int i = 0; i &lt; 2; i++) {
		  			temp += ((long) 0x01 &lt;&lt; i);
			}
			Console.WriteLine(&quot;{0:X}&quot;, temp);
		}
	}
}

Output with mint: (good)
[<A HREF="mailto:stef@weepee">stef@weepee</A> stef]$ mint TestCase3.exe 
3

Output with mono: (bad)
[<A HREF="mailto:stef@weepee">stef@weepee</A> stef]$ mono TestCase3.exe 
2
RESULT: 0

It looks like the byte shifting is not happening for whatever reason.

The workaround is to replace:
@@ -14 +14,2 @@
-		  			temp += ((long) 0x01 &lt;&lt; i);
+					long t = (long) 0x01 &lt;&lt; i;
+		  			temp += t;

This works with both the jit and the interpreter.

Both these versions also compile fine with csc - A csc compiled 
executable also misbehaves on mono and not with mint.

stef



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004670.html">[Mono-list] finding  glib2 and pkg-config on checktime.
</A></li>
	<LI> Next message: <A HREF="004674.html">[Mono-list] Concatenation Bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4680">[ date ]</a>
              <a href="thread.html#4680">[ thread ]</a>
              <a href="subject.html#4680">[ subject ]</a>
              <a href="author.html#4680">[ author ]</a>
         </LI>
       </UL>
</body></html>
