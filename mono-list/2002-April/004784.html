<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] suggestion: should we rename mcs.exe?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:Greg%20Haerr%22%20%3Cgreg%40censoft.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004695.html">
   <LINK REL="Next"  HREF="004693.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] suggestion: should we rename mcs.exe?
   </H1>
    <B>Greg Haerr
    </B> 
    <A HREF="mailto:Greg%20Haerr%22%20%3Cgreg%40censoft.com"
       TITLE="[Mono-list] suggestion: should we rename mcs.exe?">Greg Haerr&quot; &lt;greg@censoft.com
       </A><BR>
    <I>Sat, 6 Apr 2002 14:54:28 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="004695.html">[Mono-list] suggestion: should we rename mcs.exe?
</A></li>
        <LI> Next message: <A HREF="004693.html">[Mono-list] RE: suggestion: should we rename mcs.exe?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4784">[ date ]</a>
              <a href="thread.html#4784">[ thread ]</a>
              <a href="subject.html#4784">[ subject ]</a>
              <a href="author.html#4784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

------=_NextPart_000_017D_01C1DD7A.F34DDF00
Content-Type: text/plain;
	charset=&quot;iso-8859-1&quot;
Content-Transfer-Encoding: 7bit

:<i> (it hands %1, %2, ... %9 to mint. Has anyone a solution to hand higher
</I>:<i> parameters too?)
</I>
Here's two C programs to eliminate the .bat files, which suffer
from increasing your PATH environment size every time
they execute, eventually the shell will run out of environment space.
Any number of parameters can be included.  This uses
mcs.exe renamed to monomcs.exe. 

There needs to be a way of having knowing the mono
installation directory, currently this is hardcoded.  Thoughts
on using an environment variable?

Regards,

Greg



:<i> 
</I>:<i> On linux this is the same with a sh-file.
</I>:<i> Wouldn't it make sense to rename mcs.exe generally to libmcs.exe (or
</I>:<i> something like this)?
</I>:<i> 
</I>:<i> 
</I>:<i> - The linux-mcs-wrapper is included in mono - I think we should include
</I>:<i> mcs.bat in the install folder, too.
</I>:<i> 
</I>:<i> 
</I>:<i> mcs.bat:
</I>:<i> mint.exe libmcs.exe %1 %2 %3 %4 %5 %6 %7 %8 %9
</I>:<i>
</I>
------=_NextPart_000_017D_01C1DD7A.F34DDF00
Content-Type: application/octet-stream;
	name=&quot;mcs.c&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename=&quot;mcs.c&quot;

/*
 * mcs wrapper for windows
 * 
 * 4/6/2002 Greg Haerr
 */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define MINT	&quot;monomint.exe&quot;
#define MCS		&quot;monomcs.exe&quot;
#define PATH	&quot;c:\\mono-0.10\\install\\bin&quot;
#define LIB		&quot;c:\\mono-0.10\\install\\lib&quot;

int
main(int ac, char **av)
{
	char *p;
	char **newav;
	int  i;
	char newpath[256];
	char mcspath[256];

	/* set PATH=*/
	if ((p = getenv(&quot;PATH&quot;)) == NULL)
		p = &quot;&quot;;
	sprintf(newpath, &quot;PATH=%s;%s;%s&quot;, PATH, LIB, p);
	putenv(newpath);

	/* copy args up one*/
	newav = malloc((ac+1)*sizeof(char **));
	if (!newav) {
		printf(&quot;No mem for args\n&quot;);
		exit(1);
	}
	for(i=ac+1; i&gt;0; --i)
		newav[i] = av[i-1];

	/* run &quot;[path]monomint [path]monomcs.exe [args]*/
	sprintf(newpath, &quot;%s\\%s&quot;, PATH, MINT);
	newav[0] = newpath;
	sprintf(mcspath, &quot;%s\\%s&quot;, PATH, MCS);
	newav[1] = mcspath;
	execv(newpath, newav);
	printf(&quot;Can't find %s\n&quot;, newpath);
	exit(1);
}

------=_NextPart_000_017D_01C1DD7A.F34DDF00
Content-Type: application/octet-stream;
	name=&quot;mint.c&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename=&quot;mint.c&quot;

/*
 * mint wrapper for windows
 * 
 * 4/6/2002 Greg Haerr
 */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define PROGRAM	&quot;monomint.exe&quot;
#define PATH	&quot;c:\\mono-0.10\\install\\bin&quot;
#define LIB		&quot;c:\\mono-0.10\\install\\lib&quot;

int
main(int ac, char **av)
{
	char *p;
	char newpath[256];

	/* set PATH=*/
	if ((p = getenv(&quot;PATH&quot;)) == NULL)
		p = &quot;&quot;;
	sprintf(newpath, &quot;PATH=%s;%s;%s&quot;, PATH, LIB, p);
	putenv(newpath);

	/* run &quot;[path]monomint [args]&quot;*/
	sprintf(newpath, &quot;%s\\%s&quot;, PATH, PROGRAM);
	av[0] = newpath;
	execv(newpath, av);
	printf(&quot;Can't find %s\n&quot;, newpath);
	exit(1);
}

------=_NextPart_000_017D_01C1DD7A.F34DDF00--



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004695.html">[Mono-list] suggestion: should we rename mcs.exe?
</A></li>
	<LI> Next message: <A HREF="004693.html">[Mono-list] RE: suggestion: should we rename mcs.exe?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4784">[ date ]</a>
              <a href="thread.html#4784">[ thread ]</a>
              <a href="subject.html#4784">[ subject ]</a>
              <a href="author.html#4784">[ author ]</a>
         </LI>
       </UL>
</body></html>
