<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: unicode wrapper
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:Greg%20Haerr%22%20%3Cgreg%40censoft.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004792.html">
   <LINK REL="Next"  HREF="004822.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: unicode wrapper
   </H1>
    <B>Greg Haerr
    </B> 
    <A HREF="mailto:Greg%20Haerr%22%20%3Cgreg%40censoft.com"
       TITLE="[Mono-list] Re: unicode wrapper">Greg Haerr&quot; &lt;greg@censoft.com
       </A><BR>
    <I>Sat, 6 Apr 2002 20:32:17 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="004792.html">[Mono-list] Re: unicode wrapper
</A></li>
        <LI> Next message: <A HREF="004822.html">[Mono-list] Re: unicode wrapper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4795">[ date ]</a>
              <a href="thread.html#4795">[ thread ]</a>
              <a href="subject.html#4795">[ subject ]</a>
              <a href="author.html#4795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>:<i> &gt; What happens when you link directly?
</I>:<i> 
</I>:<i> Nothing. It does not.
</I>:<i> I tried to do so, but ld just ignores symbols exported from the library.
</I>:<i> With MS link it works by placing unicows.lib before any other libraries in
</I>:<i> list, so symbols from unicows override corresponding symbols from say
</I>:<i> kernel32.
</I>

I get it now, you're saying that if mint is linked using MS' link
then by putting unicows.lib first it forces CreateFileW resolution
through that library rather than kernel32.lib.  MS recommends
that /NOD:kernel32.lib /NOD:user32.lib etc be placed on
the link line to turn off default library searches.  But when
ld is used to link mint.exe, then you've got to use your hack
to force the resolution to your unimono.dll, which binds with unicows.lib.
Are you linking unimono.dll with MS link?

Do you think -nostdlib needs to be specified with ld?


:<i> Note that in this case you cannot use dll for linkage, you must use library
</I>:<i> file, because it contains some code that is linked statically, and performs
</I>:<i> delay loading of DLL.
</I>
I read about this, the library code loads the unicode layer for 
Win9x and ME systems, and calls the original unicode function
for NT/2k/XP systems.



:<i> Wrapper is not the best solution, since it adds some overhead and wastes
</I>:<i> memory, so if someone will investigate the issue that would be great.
</I>
I'll look into this, but I'm stuck with a win98 box here, the winXP
box is in another location.  I suspect that it's a makefile ld link command
line ordering problem...  It would be nice to have an option in mono
to create mint/mono using the MS unicows library so that it could
run on win9x systems.  (the unicows.dll is redistributable)

Regards,

Greg





</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004792.html">[Mono-list] Re: unicode wrapper
</A></li>
	<LI> Next message: <A HREF="004822.html">[Mono-list] Re: unicode wrapper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4795">[ date ]</a>
              <a href="thread.html#4795">[ thread ]</a>
              <a href="subject.html#4795">[ subject ]</a>
              <a href="author.html#4795">[ author ]</a>
         </LI>
       </UL>
</body></html>
