<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: unicode wrapper
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:serge%40wildwestsoftware.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004777.html">
   <LINK REL="Next"  HREF="004795.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: unicode wrapper
   </H1>
    <B>Serge
    </B> 
    <A HREF="mailto:serge%40wildwestsoftware.com"
       TITLE="[Mono-list] Re: unicode wrapper">serge@wildwestsoftware.com
       </A><BR>
    <I>Sun, 7 Apr 2002 04:23:36 +0300</I>
    <P><UL>
        <LI> Previous message: <A HREF="004777.html">[Mono-list] Re: unicode wrapper
</A></li>
        <LI> Next message: <A HREF="004795.html">[Mono-list] Re: unicode wrapper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4792">[ date ]</a>
              <a href="thread.html#4792">[ thread ]</a>
              <a href="subject.html#4792">[ subject ]</a>
              <a href="author.html#4792">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Why can't you just link the non-recompiled
</I>&gt;<i> mono with unicows.lib and have the original
</I>&gt;<i> CreateFileW resolve through unicows.dll?
</I>
I don't know, really :-)

&gt;<i> What happens when you link directly?
</I>
Nothing. It does not.
I tried to do so, but ld just ignores symbols exported from the library.
With MS link it works by placing unicows.lib before any other libraries in
list, so symbols from unicows override corresponding symbols from say
kernel32.
Note that in this case you cannot use dll for linkage, you must use library
file, because it contains some code that is linked statically, and performs
delay loading of DLL.
Wrapper is not the best solution, since it adds some overhead and wastes
memory, so if someone will investigate the issue that would be great.

&gt;<i> Is the thread2 failure because of your call to DisableThreadLibraryCalls
</I>
No, it is not. That's just to ensure that dll entry code won't be invoked
for each thread. Notice that we don't have any initialization code (not even
process-level) so we don't need these calls.
Actual failure happens in Monitor::Pulse -&gt;
(icall)Monitor_test_synchronized:
object-&gt;synchronisation-&gt;tid is 0.


Sergey






</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004777.html">[Mono-list] Re: unicode wrapper
</A></li>
	<LI> Next message: <A HREF="004795.html">[Mono-list] Re: unicode wrapper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4792">[ date ]</a>
              <a href="thread.html#4792">[ thread ]</a>
              <a href="subject.html#4792">[ subject ]</a>
              <a href="author.html#4792">[ author ]</a>
         </LI>
       </UL>
</body></html>
