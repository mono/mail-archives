<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mono wrappers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:groith%40tcrz.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004818.html">
   <LINK REL="Next"  HREF="004821.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mono wrappers
   </H1>
    <B>Guenther Roith
    </B> 
    <A HREF="mailto:groith%40tcrz.net"
       TITLE="[Mono-list] mono wrappers">groith@tcrz.net
       </A><BR>
    <I>Sun, 7 Apr 2002 12:46:05 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="004818.html">[Mono-list] mono and NGPT pthreads on linux
</A></li>
        <LI> Next message: <A HREF="004821.html">[Mono-list] Unicode on Win9x
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4809">[ date ]</a>
              <a href="thread.html#4809">[ thread ]</a>
              <a href="subject.html#4809">[ subject ]</a>
              <a href="author.html#4809">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

------=_NextPart_000_0009_01C1DE32.2E688F60
Content-Type: text/plain;
	charset=&quot;iso-8859-1&quot;
Content-Transfer-Encoding: 7bit

Greg yesterday sent me two c-wrappers for mono and mcs to replace the
bat-solution I use in mono_setup (and I'm sure you use .bats, too for
calling mcs.exe)

They only work if mcs.exe and mint.exe are in c:\mono-0.10\instal\bin and
the libs in c:\mono-0.10\instal\lib (but you can change that in the source)
and renamed to monomcs.exe and monomint.exe (to avoid confusion).

They work on win 98, however they don't do on win 2k:

mcs.exe works, but behaves a bit strange (e.g. it's required to press ENTER
before it quits, if I run it from the shell)

mint.exe does completely not work on win 2k.

Has anybody a solution? I've attached the programs.

------=_NextPart_000_0009_01C1DE32.2E688F60
Content-Type: application/octet-stream;
	name=&quot;mint.c&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename=&quot;mint.c&quot;

/*
 * mint wrapper for windows
 * 
 * 4/6/2002 Greg Haerr
 */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define PROGRAM	&quot;monomint.exe&quot;
#define PATH	&quot;c:\\mono-0.10\\install\\bin&quot;
#define LIB		&quot;c:\\mono-0.10\\install\\lib&quot;

int
main(int ac, char **av)
{
	char *p;
	char newpath[256];

	/* set PATH=*/
	if ((p = getenv(&quot;PATH&quot;)) == NULL)
		p = &quot;&quot;;
	sprintf(newpath, &quot;PATH=%s;%s;%s&quot;, PATH, LIB, p);
	putenv(newpath);

	/* run &quot;[path]monomint [args]&quot;*/
	sprintf(newpath, &quot;%s\\%s&quot;, PATH, PROGRAM);
	av[0] = newpath;
	execv(newpath, av);
	printf(&quot;Can't find %s\n&quot;, newpath);
	exit(1);
}

------=_NextPart_000_0009_01C1DE32.2E688F60
Content-Type: application/octet-stream;
	name=&quot;mcs.c&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename=&quot;mcs.c&quot;

/*
 * mcs wrapper for windows
 * 
 * 4/6/2002 Greg Haerr
 */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define MINT	&quot;monomint.exe&quot;
#define MCS		&quot;monomcs.exe&quot;
#define PATH	&quot;c:\\mono-0.10\\install\\bin&quot;
#define LIB		&quot;c:\\mono-0.10\\install\\lib&quot;

int
main(int ac, char **av)
{
	char *p;
	char **newav;
	int  i;
	char newpath[256];
	char mcspath[256];

	/* set PATH=*/
	if ((p = getenv(&quot;PATH&quot;)) == NULL)
		p = &quot;&quot;;
	sprintf(newpath, &quot;PATH=%s;%s;%s&quot;, PATH, LIB, p);
	putenv(newpath);

	/* copy args up one*/
	newav = malloc((ac+1)*sizeof(char **));
	if (!newav) {
		printf(&quot;No mem for args\n&quot;);
		exit(1);
	}
	for(i=ac+1; i&gt;0; --i)
		newav[i] = av[i-1];

	/* run &quot;[path]monomint [path]monomcs.exe [args]*/
	sprintf(newpath, &quot;%s\\%s&quot;, PATH, MINT);
	newav[0] = newpath;
	sprintf(mcspath, &quot;%s\\%s&quot;, PATH, MCS);
	newav[1] = mcspath;
	execv(newpath, newav);
	printf(&quot;Can't find %s\n&quot;, newpath);
	exit(1);
}

------=_NextPart_000_0009_01C1DE32.2E688F60--



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004818.html">[Mono-list] mono and NGPT pthreads on linux
</A></li>
	<LI> Next message: <A HREF="004821.html">[Mono-list] Unicode on Win9x
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4809">[ date ]</a>
              <a href="thread.html#4809">[ thread ]</a>
              <a href="subject.html#4809">[ subject ]</a>
              <a href="author.html#4809">[ author ]</a>
         </LI>
       </UL>
</body></html>
