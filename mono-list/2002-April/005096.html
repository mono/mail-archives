<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] perl script -- alternative?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:dcarrera%40math.toronto.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="005094.html">
   <LINK REL="Next"  HREF="005109.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] perl script -- alternative?
   </H1>
    <B>Daniel Carrera
    </B> 
    <A HREF="mailto:dcarrera%40math.toronto.edu"
       TITLE="[Mono-list] perl script -- alternative?">dcarrera@math.toronto.edu
       </A><BR>
    <I>Thu, 18 Apr 2002 04:41:45 -0400 (EDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="005094.html">[Mono-list] perl script -- alternative?
</A></li>
        <LI> Next message: <A HREF="005109.html">[Mono-list] perl script -- alternative?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5096">[ date ]</a>
              <a href="thread.html#5096">[ thread ]</a>
              <a href="subject.html#5096">[ subject ]</a>
              <a href="author.html#5096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to <A HREF="mailto:mime@docserver.cac.washington.edu">mime@docserver.cac.washington.edu</A> for more info.

---2140912637-914566036-1019119305=:173346
Content-Type: TEXT/PLAIN; charset=US-ASCII

&gt;<i> It would be smart to add following things:
</I>&gt;<i> - '[MonoTODO]' in front of the properties/methods/events
</I>&gt;<i> - public events
</I>&gt;<i> - a summary node for the class
</I>&gt;<i> - maybe a possibility to create the property/method/event without [MonoTODO]
</I>&gt;<i> and notimplementedexception (so it is ready for implementation).
</I>&gt;<i>
</I>&gt;<i> Looking forward to try it out.
</I>&gt;<i>
</I>&gt;<i> Best,
</I>&gt;<i> Jaak
</I>
Thanks Jaak, Those were very good suggestions.  I believe that I have
addressed them for the most part (still working on the summary part).  I
just wrote the script and I think that it works well.  I'm attaching it
so that people can try it (and suggest changes).  I hope that nobody
minds the attachment.

Here is a sample input file (in the directory System.Windows.Forms):

/* * * * * * * * * * *   Begin Text File   * * * * * * * * */

Daniel Carrera (<A HREF="mailto:dcarrera@math.toronto.edu">dcarrera@math.toronto.edu</A>)
public class Form : ContainerControl

/// &lt;summary&gt;
///    This is a summary.
/// &lt;/summary&gt;

//
//  --- Public Properties
//
=public

IButtonControl AcceptButton{gs}
static Form ActiveForm{g}
Form ActiveMdiChild{g}

=public bool
AutoScale{gs}
IsMidiChild{gs}
IsMidiContainer{gs}
KeyPreview{gs}
MaximizeBox{gs}
Modal{g}

//
//  --- Public Methods
//
void Activate()

//
//  --- Public Events
//
event EventHandler Activated

/* * * * * * * * * * *  End Text File 	* * * * * * * * * * * */

A few notes:

1)  The script respects blank lines and C# comments.

2) '=some text' makes 'some text' precede every declaration until the next
   '='.  To stop this type a line with just an = sign and nothing else.

3) '{gs}' will be replaced by the 'get' and 'set' lines (see below).
   The script simply looks for the letters 'g' and 's' inside the
   brackets.  Therefore, '{gs}', '{get; set}', '{GET}' will all work.

4) You can write multi-line code like-so:
override IntPtr HookProc(	\
        IntPtr hWnd,    	\
        int msg,        	\
        IntPtr wparam,  	\
        IntPtr lparam   	\
)
My script will concatenate the extra white space.


To produce the output type:
./autogen.pl Form.template

This will make a file called 'Form.cs', as well as send the output to
STDOUT.  The filename is taken from the class name you give it.

As suggested, the output contains the '[MonoTODO]' lines as well.  Also,
as suggested, you can suppress those, as well as the
NotImplementedException with:

./autogen.pl --noTODO Form.template


Finally, this markup also addresses the 'public events' suggestion since
there is no distinction for methods, properties, etc.

Here is the output of the program:

//
// tmp.Form
//
// Author:
//   stubbed out by Daniel Carrera (<A HREF="mailto:dcarrera@math.toronto.edu">dcarrera@math.toronto.edu</A>)
//
// (C) 2002 Ximian, Inc
//

namespace tmp
{
        public public class Form : ContainerControl
        {

                /// &lt;summary&gt;
                /// This is a summary.
                /// &lt;/summary&gt;

                //
                // --- Public Properties
                //

                [MonoTODO]
                public IButtonControl AcceptButton
                {
                        get { throw new NotImplementedException (); }
                        set { throw new NotImplementedException (); }
                }
                [MonoTODO]
                public static Form ActiveForm
                {
                        get { throw new NotImplementedException (); }
                }
                [MonoTODO]
                public Form ActiveMdiChild
                {
                        get { throw new NotImplementedException (); }
                }

                [MonoTODO]
                public bool AutoScale
                {
                        get { throw new NotImplementedException (); }
                        set { throw new NotImplementedException (); }
                }
                [MonoTODO]
                public bool IsMidiChild
                {
                        get { throw new NotImplementedException (); }
                        set { throw new NotImplementedException (); }
                }
                [MonoTODO]
                public bool IsMidiContainer
                {
                        get { throw new NotImplementedException (); }
                        set { throw new NotImplementedException (); }
                }
                [MonoTODO]
                public bool KeyPreview
                {
                        get { throw new NotImplementedException (); }
                        set { throw new NotImplementedException (); }
                }
                [MonoTODO]
                public bool MaximizeBox
                {
                        get { throw new NotImplementedException (); }
                        set { throw new NotImplementedException (); }
                }
                [MonoTODO]
                public bool Modal
                {
                        get { throw new NotImplementedException (); }
                }


                //
                // --- Public Methods
                //
                [MonoTODO]
                public bool void Activate()
                {
                        throw new NotImplementedException ();
                }

                //
                // --- Public Events
                //
                [MonoTODO]
                public bool event EventHandler Activated
                {
                        throw new NotImplementedException ();
                }


        }
}



Cheers,
Daniel.



On Thu, 18 Apr 2002, Jaak Simm wrote:

&gt;<i> I like the idea.
</I>&gt;<i> It would be smart to add following things:
</I>&gt;<i> - '[MonoTODO]' in front of the properties/methods/events
</I>&gt;<i> - public events
</I>&gt;<i> - a summary node for the class
</I>&gt;<i> - maybe a possibility to create the property/method/event without [MonoTODO]
</I>&gt;<i> and notimplementedexception (so it is ready for implementation).
</I>&gt;<i>
</I>&gt;<i> Looking forward to try it out.
</I>&gt;<i>
</I>&gt;<i> Best,
</I>&gt;<i> Jaak
</I>&gt;<i>
</I>&gt;<i> Daniel Carrera wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; I will certainly comply with whatever rules Mono sets.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have another idea.  Not as useful as the first, but I'm sure it's
</I>&gt;<i> &gt; legal:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I can come up with some sort of &quot;markup&quot; that people can type the classes
</I>&gt;<i> &gt; into.  It'd be designed to minimize typing.  Then my program would convert
</I>&gt;<i> &gt; that markup to the actual stubbs.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I might need help desgning an efficient markup.
</I>&gt;<i> &gt; The markup file (in the System.Windows.Forms directory) might be
</I>&gt;<i> &gt; something like this:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Daniel Carrera (<A HREF="mailto:dcarrera@math.toronto.edu">dcarrera@math.toronto.edu</A>)
</I>&gt;<i> &gt; abstract class FileDialog : CommonDialog
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; public prop [
</I>&gt;<i> &gt; bool AddExtension {get set}
</I>&gt;<i> &gt; virtual bool CheckFileExists {g s}
</I>&gt;<i> &gt; ]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; protected methods [
</I>&gt;<i> &gt; void Dispose()
</I>&gt;<i> &gt; virtual object GetService(Type service)
</I>&gt;<i> &gt; ]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt;From this my script would generate:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; //
</I>&gt;<i> &gt; // System.Windows.Forms.FileDialog
</I>&gt;<i> &gt; //
</I>&gt;<i> &gt; // Author:
</I>&gt;<i> &gt; //   stubbed out by Daniel Carrera (<A HREF="mailto:dcarrera@math.toronto.edu">dcarrera@math.toronto.edu</A>)
</I>&gt;<i> &gt; //
</I>&gt;<i> &gt; // (C) 2002 Ximian, Inc
</I>&gt;<i> &gt; //
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; namespace System.Windows.Forms
</I>&gt;<i> &gt; {
</I>&gt;<i> &gt;         /// &lt;summary&gt;
</I>&gt;<i> &gt;         /// ToDo note:
</I>&gt;<i> &gt;         ///  - Nothing is implemented
</I>&gt;<i> &gt;         /// &lt;/summary&gt;
</I>&gt;<i> &gt;         public abstract class FileDialog : CommonDialog
</I>&gt;<i> &gt;         {
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;                 //
</I>&gt;<i> &gt;                 //  --- Public Properties
</I>&gt;<i> &gt;                 //
</I>&gt;<i> &gt;                 public bool AddExtension
</I>&gt;<i> &gt;                 {
</I>&gt;<i> &gt;                        get { throw new NotImplementedException (); }
</I>&gt;<i> &gt;                        set { throw new NotImplementedException (); }
</I>&gt;<i> &gt;                 }
</I>&gt;<i> &gt;                 public virtual bool CheckFileExists
</I>&gt;<i> &gt;                 {
</I>&gt;<i> &gt;                        get { throw new NotImplementedException (); }
</I>&gt;<i> &gt;                        set { throw new NotImplementedException (); }
</I>&gt;<i> &gt;                 }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;                 //
</I>&gt;<i> &gt;                 //  --- Protected Methods
</I>&gt;<i> &gt;                 //
</I>&gt;<i> &gt;                 protected void Dispose()
</I>&gt;<i> &gt;                 {
</I>&gt;<i> &gt;                         throw new NotImplementedException ();
</I>&gt;<i> &gt;                 }
</I>&gt;<i> &gt;                 protected virtual object GetService(Type service)
</I>&gt;<i> &gt;                 {
</I>&gt;<i> &gt;                         throw new NotImplementedException ();
</I>&gt;<i> &gt;                 }
</I>&gt;<i> &gt;         }
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This is much less powerful than the one I made already.  However, I
</I>&gt;<i> &gt; thought that if we have to do 3000 classes it might still be worth it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thoughts on this?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Daniel.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 17 Apr 2002, Miguel de Icaza wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Manually typing in the stubs, and bug fixing as we go should be fine.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Do not attempt to use any automatic mechanisms.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Miguel.
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; We have never copy/pasted code.  I have always used one machine to read
</I>&gt;<i> &gt; &gt; the prototypes, and another to type it in (logistically, thats the only
</I>&gt;<i> &gt; &gt; way I could do it ;-), which is why you find so many little mistakes in
</I>&gt;<i> &gt; &gt; the base classes ;-)
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Miguel
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-list maillist  -  <A HREF="mailto:Mono-list@ximian.com">Mono-list@ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>
---2140912637-914566036-1019119305=:173346
Content-Type: APPLICATION/x-perl; name=&quot;autogen.pl&quot;
Content-Transfer-Encoding: BASE64
Content-ID: &lt;<A HREF="mailto:Pine.A41.4.30.0204180441450.173346@coxeter.math.toronto.edu">Pine.A41.4.30.0204180441450.173346@coxeter.math.toronto.edu</A>&gt;
Content-Description: Create stubbs from markup
Content-Disposition: attachment; filename=&quot;autogen.pl&quot;

IyEvdXNyL2Jpbi9wZXJsIC13CnVzZSBHZXRvcHQ6Okxvbmc7CgoKIwojIENv
bW1hbmQtbGluZSBvcHRpb25zLgojCm15ICRUT0RPID0gMTsgIyBEZWZhdWx0
cyB0byAndHJ1ZScuCkdldE9wdGlvbnMgKCAnVE9ETyEnICA9PiBcJFRPRE8g
KTsKCiMKIyAgT2J0YWluIHRoZSBhdXRob3IsIGNsYXNzIGFuZCBuYW1lc3Bh
Y2UuCiMKd2hpbGUoIGNob21wKCRhdXRob3IgPSA8PikgKSB7IGxhc3QgaWYg
JGF1dGhvciA9fiAvXFMvIH0Kd2hpbGUoIGNob21wKCRjbGFzcyAgPSA8Pikg
KSB7IGxhc3QgaWYgJGNsYXNzICA9fiAvXFMvIH0KCiRjbGFzc19kZWZpbml0
aW9uID0gJGNsYXNzOwokY2xhc3MgPX4gcy9ccyo6LiovLzsKQGNsYXNzX2Zp
ZWxkcyA9IHNwbGl0KCAvIC8sICRjbGFzcyk7CiRjbGFzcyA9IHBvcCBAY2xh
c3NfZmllbGRzOwoKQHB3ZCA9IHNwbGl0KCIvIiwgJEVOVntQV0R9KTsKJG5h
bWVzcGFjZSA9IHBvcCBAcHdkOwoKJGFwcGVuZD0nJzsKCm9wZW4oT1VULCJ8
IHRlZSAkY2xhc3MuY3MiKTsKc2VsZWN0IE9VVDsKJHwgPSAxOyAgICMgdGhp
cyBzZXRzIG91dHB1dCB0byB0aGUgbGFzdCBzZWxlY3RlZCBoYW5kbGUgdG8g
YmUgdW5idWZmZXJlZApzZWxlY3QgU1RET1VUOwoKIwojICBQcmludCB0aGUg
aGVhZGVyLgojCgpwcmludCBPVVQgPDxFT0gKLy8KLy8gJG5hbWVzcGFjZS4k
Y2xhc3MKLy8KLy8gQXV0aG9yOgovLyAgIHN0dWJiZWQgb3V0IGJ5ICRhdXRo
b3IKLy8KLy8gKEMpIDIwMDIgWGltaWFuLCBJbmMKLy8KCm5hbWVzcGFjZSAk
bmFtZXNwYWNlCnsKICAgICAgICBwdWJsaWMgJGNsYXNzX2RlZmluaXRpb24K
ICAgICAgICB7CkVPSAo7CgoKIwojICBSZWFkIGFsbCB0aGUgc3Vic2VxdWVu
dCBsaW5lcyBpbnRvIGFuIGFycmF5LgojICBJZiBhIGxpbmUgZW5kcyBpbiAi
XCIsIEl0J2xsIGJlIGludGVycHJldGVkIGFzIHRoZSB0ZXh0IGNvbnRpbnVp
bmcKIyAgb250byB0aGUgbmV4dCBsaW5lLgokdGV4dCA9ICcnOwp3aGlsZSg8
PikgewoJY2hvbXA7CglpZiAoL1xcJC8pIHsKCQljaG9wOwoJCSR0ZXh0IC49
ICRfOwoJfSBlbHNlIHsKCQkkdGV4dCAuPSAkXzsKCQlwdXNoIEBsaW5lcywg
JHRleHQ7CgkJJHRleHQgPSAnJzsKCX0KfQoKCiMKIyAgUHJpbnQgdGhlIHBy
b3BlcnRpZXMsIGNsYXNzZXMsIGV0Yy4KIwokZXhjZXB0aW9uID0gInRocm93
IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbiAoKTsiOwpmb3JlYWNoICRs
aW5lIChAbGluZXMpIHsKCSRsaW5lID1+IHMvXHMrLyAvZzsgCSAgICAgIyBj
YXRlbmF0ZSBzcGFjZXMgdG8gb25lIHNwYWNlLgoKCXVubGVzcyAoJGxpbmUg
PX4gL1xTLykgeyAjIHNraXAgYmxhbmsgbGluZXMKCQlwcmludCBPVVQgIlxu
IjsKCQluZXh0OwoJfQoJaWYgKCRsaW5lID1+IG1bXlxzKi8vXSkgeyAgICAj
IEMjIGNvbW1lbnRzLgoJCXByaW50IE9VVCAiXHRcdCRsaW5lXG4iOwoJCW5l
eHQ7Cgl9CglpZiAoJGxpbmUgPX4gbVtePV0pIHsJICAgICAjID1wdWJsaWMs
ID1wcm90ZWN0ZWQsIGV0YwoJCWlmICgkbGluZSA9fiBtW149KC4rKV0pIHsg
JGFwcGVuZCA9ICIkMSAiIH0KCQllbHNlCQkgCXsgJGFwcGVuZCA9ICcnIH0K
CQluZXh0OwoJfQoKCSMKCSMgSWYgd2UgZ2V0IHRoaXMgZmFyIHRoYW4gd2Ug
aGF2ZSByZWFsIGNvZGUuCgkjCglpZiAoICRsaW5lID1+IHMveyguKil9XHMq
Ly8gKSB7CQoJCSRjb250ZW50cyA9ICQxOwoJCXByaW50IE9VVCAiXHRcdFtN
b25vVE9ET11cbiIgaWYgJFRPRE87CgkJcHJpbnQgT1VUICJcdFx0JGFwcGVu
ZCRsaW5lXG5cdFx0e1xuIjsKCQlpZiAoJGNvbnRlbnRzID1+IC9nL2kpIHsg
CgkJCXByaW50IE9VVCAiXHRcdFx0Z2V0IHsgIiwgKCRUT0RPPyAkZXhjZXB0
aW9uOicnKSwiIH1cbiIgCgkJfQoJCWlmICgkY29udGVudHMgPX4gL3MvaSkg
eyAKCQkJcHJpbnQgT1VUICJcdFx0XHRzZXQgeyAiLCAoJFRPRE8/ICRleGNl
cHRpb246JycpLCIgfVxuIiAKCQl9CgkJcHJpbnQgT1VUICJcdFx0fVxuIjsK
CQkJCgl9IGVsc2UgewoJCXByaW50IE9VVCAiXHRcdFtNb25vVE9ET11cbiIg
aWYgJFRPRE87CgkJcHJpbnQgT1VUICJcdFx0JGFwcGVuZCRsaW5lXG4iLgoJ
CQkgICJcdFx0e1xuIi4KCQkJICAiXHRcdFx0Ii4oJFRPRE8/JGV4Y2VwdGlv
bjonJykuIlxuIi4KCQkJICAiXHRcdH1cbiI7Cgl9Cn0KCnByaW50IE9VVCAi
XHR9XG59XG4iOwpjbG9zZShPVVQpOwo=
---2140912637-914566036-1019119305=:173346--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005094.html">[Mono-list] perl script -- alternative?
</A></li>
	<LI> Next message: <A HREF="005109.html">[Mono-list] perl script -- alternative?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5096">[ date ]</a>
              <a href="thread.html#5096">[ thread ]</a>
              <a href="subject.html#5096">[ subject ]</a>
              <a href="author.html#5096">[ author ]</a>
         </LI>
       </UL>
</body></html>
