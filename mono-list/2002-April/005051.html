<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] library location problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono%40baselabs.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="005047.html">
   <LINK REL="Next"  HREF="005037.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] library location problem
   </H1>
    <B>Christophe VG
    </B> 
    <A HREF="mailto:mono%40baselabs.org"
       TITLE="[Mono-list] library location problem">mono@baselabs.org
       </A><BR>
    <I>16 Apr 2002 19:37:31 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="005047.html">[Mono-list] library location problem
</A></li>
        <LI> Next message: <A HREF="005037.html">[Mono-list] Stubbing out classes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5051">[ date ]</a>
              <a href="thread.html#5051">[ thread ]</a>
              <a href="subject.html#5051">[ subject ]</a>
              <a href="author.html#5051">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2002-04-16 at 18:59, Daniel Carrera wrote:
&gt;<i> You are not missing the point. :-)
</I>
pfieuw, that's a relief ;-)
 
&gt;<i> There is already a way to solve the above problem.  In addition to the
</I>&gt;<i> current directory and the standard directories, Mono looks in all the
</I>&gt;<i> directries indicated in the LD_LIBRARY_PATH variable.
</I>
I thought that too ... then I must be doing something wrong here ...

The setup : a module and a subdir with a test

[<A HREF="mailto:ntt@taurus">ntt@taurus</A> test]$ ls
ExampleModule.cs  t
[<A HREF="mailto:ntt@taurus">ntt@taurus</A> test]$ ls t
test-1.cs

Compiling the module

[<A HREF="mailto:ntt@taurus">ntt@taurus</A> test]$ mcs --target library ExampleModule.cs 
RESULT: 0

Compiling the test with a absolute (just to be sure) reference

[<A HREF="mailto:ntt@taurus">ntt@taurus</A> test]$ pwd 
/tmp/test
[<A HREF="mailto:ntt@taurus">ntt@taurus</A> test]$ mcs -r /tmp/test/ExampleModule.dll t/test-1.cs 
RESULT: 0

Okay, time to run and fail (this is expected)

[<A HREF="mailto:ntt@taurus">ntt@taurus</A> test]$ mono t/test-1.exe 

** (process:21553): WARNING **: Could not find assembly ExampleModule
/usr/lib/ExampleModule.dll
Can not open image t/test-1.exe

Setting the LD_LIBRARY_PATH

[<A HREF="mailto:ntt@taurus">ntt@taurus</A> test]$ export LD_LIBRARY_PATH=/tmp/test/
[<A HREF="mailto:ntt@taurus">ntt@taurus</A> test]$ mono t/test-1.exe 

** (process:21576): WARNING **: Could not find assembly ExampleModule
/usr/lib/ExampleModule.dll
Can not open image t/test-1.exe

still fails ?!

Let's try an strace to see where he actaully goes looking for the lib

(cut off lines for cleaner mail)
...
access(&quot;ExampleModule&quot;, F_OK)           = -1 ENOENT (No such file or
access(&quot;t/ExampleModule&quot;, F_OK)         = -1 ENOENT (No such file or
access(&quot;t/ExampleModule.dll&quot;, F_OK)     = -1 ENOENT (No such file or
access(&quot;/usr/lib/ExampleModule&quot;, F_OK)  = -1 ENOENT (No such file or
access(&quot;/usr/lib/ExampleModule.dll&quot;, F_OK) = -1 ENOENT (No such file or
access(&quot;/usr/lib//usr/lib/ExampleModule.dll&quot;, F_OK) = -1 ENOENT (No such
access(&quot;/usr/lib//usr/lib/ExampleModule.dll.dll&quot;, F_OK) = -1 ENOENT (No
access(&quot;/usr/lib//usr/lib/ExampleModule.dll&quot;, F_OK) = -1 ENOENT (No such
brk(0x816a000)                          = 0x816a000
open(&quot;/usr/lib//usr/lib/ExampleModule.dll.dll&quot;, O_RDONLY|O_LARGEFILE) =
-1 ENOENT (No such file or directory)

What I find remarkable is that everywhere mono looks both for
ExampleModule AND ExmapleModule.dll, but not the first time (cwd). 

I would have expected given the example output above to see a second
line something like this:

access(&quot;ExampleModule.dll&quot;, F_OK)        = ...

Secondly I don't see any of the LD_LIBRARY_PATH being used for finding
the libary.

&gt;<i> In my case, I *do* want my own library directory.  Thus, I have this line
</I>&gt;<i> in my .bashrc file:
</I>&gt;<i> LD_LIBRARY_PATH=/home/daniel/lib
</I>
So what am I missing here, because it seems to work for you ?!!

Thanks
Christophe


-- 
Supporting the Mono project, and helping you...

  <A HREF="http://mono.baselabs.org">http://mono.baselabs.org</A>              <A HREF="http://mono.baselabs.org/CSAM">http://mono.baselabs.org/CSAM</A>
             ***                                     ***
&quot;First steps&quot; building guides,        CSAM the C Sharp Archived Modules
daily Mono RPMS, C# tutorial,...







</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005047.html">[Mono-list] library location problem
</A></li>
	<LI> Next message: <A HREF="005037.html">[Mono-list] Stubbing out classes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5051">[ date ]</a>
              <a href="thread.html#5051">[ thread ]</a>
              <a href="subject.html#5051">[ subject ]</a>
              <a href="author.html#5051">[ author ]</a>
         </LI>
       </UL>
</body></html>
