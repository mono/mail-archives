<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] [PATCH] System.XML build fixes and initial namespace support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jason%40injektilo.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003107.html">
   <LINK REL="Next"  HREF="003055.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] [PATCH] System.XML build fixes and initial namespace support
   </H1>
    <B>Jason Diamond
    </B> 
    <A HREF="mailto:jason%40injektilo.org"
       TITLE="[Mono-list] [PATCH] System.XML build fixes and initial namespace support">jason@injektilo.org
       </A><BR>
    <I>Sun, 10 Feb 2002 11:27:25 -0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="003107.html">[Mono-list] HTML Mockup for Class Lib Todo's
</A></li>
        <LI> Next message: <A HREF="003055.html">[Mono-list] [PATCH] System.XML build fixes and initial
 namespace support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3044">[ date ]</a>
              <a href="thread.html#3044">[ thread ]</a>
              <a href="subject.html#3044">[ subject ]</a>
              <a href="author.html#3044">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

------=_NextPart_000_000A_01C1B225.EA6A1780
Content-Type: text/plain;
	charset=&quot;iso-8859-1&quot;
Content-Transfer-Encoding: 7bit

2002-02-10  Jason Diamond  &lt;<A HREF="mailto:jason@injektilo.org">jason@injektilo.org</A>&gt;

 * System.XML.build: Renamed the System.Xml.dll assembly to 
 System.XML.dll to match Microsoft.

 * System.XML.build, Test/System.XML_test.build: Added tasks to 
 clean .dll and .pdb files.

 * System.XML.build, Test/System.XML_test.build: Copy System.XML.dll 
 to Test directory and reference that. This makes it so our tests 
 test our code and not Microsoft's.

 * System.Xml/XmlTextReader.cs: Added support for parsing prefixes 
 and local names.

 * Test/Test.cs: Updated all tests to test the prefix and local name 
 properties.


------=_NextPart_000_000A_01C1B225.EA6A1780
Content-Type: application/octet-stream;
	name=&quot;xml1.patch&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename=&quot;xml1.patch&quot;

? xml1.patch=0A=
Index: ChangeLog=0A=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
RCS file: /mono/mcs/class/System.XML/ChangeLog,v=0A=
retrieving revision 1.2=0A=
diff -u -r1.2 ChangeLog=0A=
--- ChangeLog	23 Jan 2002 19:19:33 -0000	1.2=0A=
+++ ChangeLog	10 Feb 2002 19:30:52 -0000=0A=
@@ -1,3 +1,21 @@=0A=
+2002-02-10  Jason Diamond  &lt;<A HREF="mailto:jason@injektilo.org">jason@injektilo.org</A>&gt;=0A=
+=0A=
+	* System.XML.build: Renamed the System.Xml.dll assembly to =0A=
+	System.XML.dll to match Microsoft.=0A=
+=0A=
+	* System.XML.build, Test/System.XML_test.build: Added tasks to =0A=
+	clean .dll and .pdb files.=0A=
+=0A=
+	* System.XML.build, Test/System.XML_test.build: Copy System.XML.dll =0A=
+	to Test directory and reference that. This makes it so our tests =0A=
+	test our code and not Microsoft's.=0A=
+=0A=
+	* System.Xml/XmlTextReader.cs: Added support for parsing prefixes =0A=
+	and local names.=0A=
+=0A=
+	* Test/Test.cs: Updated all tests to test the prefix and local name =0A=
+	properties.=0A=
+=0A=
 2002-01-23  Dick Porter  &lt;<A HREF="mailto:dick@ximian.com">dick@ximian.com</A>&gt;=0A=
 =0A=
 	* System.Xml/XmlNode.cs: Fixed IndexerName attribute so it=0A=
Index: System.XML.build=0A=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
RCS file: /mono/mcs/class/System.XML/System.XML.build,v=0A=
retrieving revision 1.3=0A=
diff -u -r1.3 System.XML.build=0A=
--- System.XML.build	7 Dec 2001 10:53:20 -0000	1.3=0A=
+++ System.XML.build	10 Feb 2002 19:30:52 -0000=0A=
@@ -1,20 +1,20 @@=0A=
 &lt;?xml version=3D&quot;1.0&quot; encoding=3D&quot;iso-8859-1&quot;?&gt;=0A=
 =0A=
-&lt;!-- NAnt build file for System.Xml.dll --&gt;=0A=
+&lt;!-- NAnt build file for System.XML.dll --&gt;=0A=
 =0A=
-&lt;project name=3D&quot;System.Xml&quot; default=3D&quot;build&quot;&gt;=0A=
+&lt;project name=3D&quot;System.XML&quot; default=3D&quot;build&quot;&gt;=0A=
 	&lt;property name=3D&quot;debug&quot; value=3D&quot;false&quot;/&gt;=0A=
 =0A=
 	&lt;target name=3D&quot;build&quot;&gt;=0A=
 		&lt;mkdir dir=3D&quot;../lib&quot;/&gt;=0A=
-		&lt;csc target=3D&quot;library&quot; output=3D&quot;../lib/System.Xml.dll&quot; =
debug=3D&quot;${debug}&quot;&gt;=0A=
+		&lt;csc target=3D&quot;library&quot; output=3D&quot;../lib/System.XML.dll&quot; =
debug=3D&quot;${debug}&quot;&gt;=0A=
 			&lt;arg value=3D&quot;/nowarn:1595&quot;/&gt;=0A=
-			&lt;arg value=3D&quot;/unsafe&quot;/&gt;=0A=
 			&lt;sources&gt;=0A=
 				&lt;includes name=3D&quot;**/*.cs&quot;/&gt; =0A=
 				&lt;excludes name=3D&quot;Test/**&quot;/&gt;=0A=
 			&lt;/sources&gt;=0A=
 		&lt;/csc&gt;=0A=
+		&lt;copy file=3D&quot;../lib/System.XML.dll&quot; tofile=3D&quot;Test/System.XML.dll&quot;/&gt;=0A=
 		&lt;nant basedir=3D&quot;Test&quot; target=3D&quot;build&quot;/&gt;=0A=
 	&lt;/target&gt;=0A=
 =0A=
@@ -24,5 +24,7 @@=0A=
 =0A=
 	&lt;target name=3D&quot;clean&quot;&gt;=0A=
 		&lt;nant basedir=3D&quot;Test&quot; target=3D&quot;clean&quot;/&gt;=0A=
+		&lt;delete file=3D&quot;../lib/System.XML.dll&quot; failonerror=3D&quot;false&quot;/&gt;=0A=
+		&lt;delete file=3D&quot;../lib/System.XML.pdb&quot; failonerror=3D&quot;false&quot;/&gt;=0A=
 	&lt;/target&gt;=0A=
 &lt;/project&gt;=0A=
Index: System.Xml/XmlTextReader.cs=0A=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
RCS file: /mono/mcs/class/System.XML/System.Xml/XmlTextReader.cs,v=0A=
retrieving revision 1.2=0A=
diff -u -r1.2 XmlTextReader.cs=0A=
--- System.Xml/XmlTextReader.cs	19 Jul 2001 19:21:59 -0000	1.2=0A=
+++ System.Xml/XmlTextReader.cs	10 Feb 2002 19:30:56 -0000=0A=
@@ -270,8 +270,7 @@=0A=
 		{
 			get
 			{
-				// TODO: implement me.
-				return null;
+				return localName;
 			}
 		}
=20
@@ -341,8 +340,7 @@=0A=
 		{
 			get
 			{
-				// TODO: implement me.
-				return null;
+				return prefix;
 			}
 		}
=20
@@ -562,6 +560,8 @@=0A=
=20
 		private XmlNodeType nodeType;
 		private string name;
+		private string prefix;
+		private string localName;
 		private bool isEmptyElement;
 		private string value;
 		private Hashtable attributes;
@@ -588,6 +588,8 @@=0A=
=20
 			nodeType =3D XmlNodeType.None;
 			name =3D String.Empty;
+			prefix =3D String.Empty;
+			localName =3D string.Empty;
 			isEmptyElement =3D false;
 			value =3D String.Empty;
 			attributes =3D new Hashtable();
@@ -624,6 +626,19 @@=0A=
 			if (clearAttributes)
 			{
 				ClearAttributes();
+			}
+
+			int indexOfColon =3D name.IndexOf(':');
+
+			if (indexOfColon =3D=3D -1)
+			{
+				prefix =3D String.Empty;
+				localName =3D name;
+			}
+			else
+			{
+				prefix =3D name.Substring(0, indexOfColon);
+				localName =3D name.Substring(indexOfColon + 1);
 			}
 		}
=20
Index: Test/System.XML_test.build=0A=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
RCS file: /mono/mcs/class/System.XML/Test/System.XML_test.build,v=0A=
retrieving revision 1.2=0A=
diff -u -r1.2 System.XML_test.build=0A=
--- Test/System.XML_test.build	8 Nov 2001 11:35:50 -0000	1.2=0A=
+++ Test/System.XML_test.build	10 Feb 2002 19:30:56 -0000=0A=
@@ -10,14 +10,14 @@=0A=
 =0A=
 	&lt;target name=3D&quot;build&quot;&gt;=0A=
 		&lt;csc target=3D&quot;library&quot; output=3D&quot;System.XML_test.dll&quot; =
debug=3D&quot;${debug}&quot;&gt;=0A=
+			&lt;arg value=3D&quot;/nowarn:1595&quot;/&gt;=0A=
 			&lt;sources&gt;=0A=
 				&lt;includes name=3D&quot;**/*.cs&quot;/&gt;=0A=
 			&lt;/sources&gt;=0A=
 			&lt;references basedir=3D&quot;..\..\..\nunit&quot;&gt;=0A=
 				&lt;includes name=3D&quot;NUnitCore.dll&quot;/&gt;=0A=
 			&lt;/references&gt;=0A=
-			&lt;arg value=3D&quot;/r:..\..\lib\System.XML.dll&quot;/&gt;=0A=
-			&lt;arg value=3D&quot;/nowarn:1595&quot;/&gt;=0A=
+			&lt;arg value=3D&quot;/r:.\System.XML.dll&quot;/&gt;=0A=
 		&lt;/csc&gt;=0A=
 	&lt;/target&gt;=0A=
 =0A=
@@ -26,6 +26,8 @@=0A=
 	&lt;/target&gt;=0A=
 =0A=
 	&lt;target name=3D&quot;clean&quot;&gt;=0A=
+		&lt;delete file=3D&quot;System.XML.dll&quot; failonerror=3D&quot;false&quot;/&gt;=0A=
 		&lt;delete file=3D&quot;System.XML_test.dll&quot; failonerror=3D&quot;false&quot;/&gt;=0A=
+		&lt;delete file=3D&quot;System.XML_test.pdb&quot; failonerror=3D&quot;false&quot;/&gt;=0A=
 	&lt;/target&gt;=0A=
 &lt;/project&gt;=0A=
Index: Test/Test.cs=0A=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
RCS file: /mono/mcs/class/System.XML/Test/Test.cs,v=0A=
retrieving revision 1.1=0A=
diff -u -r1.1 Test.cs=0A=
--- Test/Test.cs	2 Sep 2001 18:12:17 -0000	1.1=0A=
+++ Test/Test.cs	10 Feb 2002 19:30:59 -0000=0A=
@@ -34,6 +34,8 @@=0A=
 			int depth,
 			bool isEmptyElement,
 			string name,
+			string prefix,
+			string localName,
 			string value,
 			int attributeCount)
 		{
@@ -44,11 +46,44 @@=0A=
 			Assert(xmlReader.NodeType =3D=3D nodeType);
 			Assert(xmlReader.Depth =3D=3D depth);
 			Assert(xmlReader.IsEmptyElement =3D=3D isEmptyElement);
-			Assert(xmlReader.Name =3D=3D name);
+
+			Assert(
+				String.Format(
+					&quot;name was {0}, expected {1}&quot;,
+					xmlReader.Name,
+					name),
+				xmlReader.Name =3D=3D name);
+
+			Assert(
+				String.Format(
+					&quot;prefix was {0}, expected {1}&quot;,
+					xmlReader.Prefix,
+					prefix),
+				xmlReader.Prefix =3D=3D prefix);
+
+			Assert(
+				String.Format(
+					&quot;localName was {0}, expected {1}&quot;,
+					xmlReader.LocalName,
+					localName),
+				xmlReader.LocalName =3D=3D localName);
+
 			Assert(xmlReader.HasValue =3D=3D (value !=3D String.Empty));
 			Assert(xmlReader.Value =3D=3D value);
-			Assert(xmlReader.HasAttributes =3D=3D (attributeCount &gt; 0));
-			Assert(xmlReader.AttributeCount =3D=3D attributeCount);
+
+			Assert(
+				String.Format(
+					&quot;hasAttributes was {0}, expected {1}&quot;,
+					xmlReader.HasAttributes,
+					(attributeCount &gt; 0)),
+				xmlReader.HasAttributes =3D=3D (attributeCount &gt; 0));
+
+			Assert(
+				String.Format(
+					&quot;attributeCount was {0}, expected {1}&quot;,
+					xmlReader.AttributeCount,
+					attributeCount),
+				xmlReader.AttributeCount =3D=3D attributeCount);
 		}
=20
 		private void AssertAttribute(
@@ -86,6 +121,8 @@=0A=
 				0, // depth
 				true, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -107,6 +144,8 @@=0A=
 				0, //depth
 				true, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -128,6 +167,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -138,6 +179,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -159,6 +202,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -169,6 +214,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -190,6 +237,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -200,6 +249,8 @@=0A=
 				1, //depth
 				true, // isEmptyElement
 				&quot;bar&quot;, // name
+				String.Empty, // prefix
+				&quot;bar&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -210,6 +261,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -231,6 +284,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -241,6 +296,8 @@=0A=
 				1, //depth
 				false, // isEmptyElement
 				String.Empty, // name
+				String.Empty, // prefix
+				String.Empty, // localName
 				&quot;bar&quot;, // value
 				0 // attributeCount
 			);
@@ -251,6 +308,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -272,6 +331,8 @@=0A=
 				0, //depth
 				true, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				1 // attributeCount
 			);
@@ -299,6 +360,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				1 // attributeCount
 			);
@@ -315,6 +378,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -336,6 +401,8 @@=0A=
 				0, //depth
 				true, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				2 // attributeCount
 			);
@@ -369,6 +436,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				&quot;bar&quot;, // value
 				0 // attributeCount
 			);
@@ -379,6 +448,8 @@=0A=
 				0, //depth
 				true, // isEmptyElement
 				&quot;baz&quot;, // name
+				String.Empty, // prefix
+				&quot;baz&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -400,6 +471,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				String.Empty, // name
+				String.Empty, // prefix
+				String.Empty, // localName
 				&quot;foo&quot;, // value
 				0 // attributeCount
 			);
@@ -410,6 +483,8 @@=0A=
 				0, //depth
 				true, // isEmptyElement
 				&quot;bar&quot;, // name
+				String.Empty, // prefix
+				&quot;bar&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -431,6 +506,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -441,6 +518,8 @@=0A=
 				1, //depth
 				false, // isEmptyElement
 				String.Empty, // name
+				String.Empty, // prefix
+				String.Empty, // localName
 				&quot;&lt;&gt;&amp;'\&quot;&quot;, // value
 				0 // attributeCount
 			);
@@ -451,6 +530,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -472,6 +553,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -482,6 +565,8 @@=0A=
 				1, //depth
 				false, // isEmptyElement
 				&quot;bar&quot;, // name
+				String.Empty, // prefix
+				&quot;bar&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -492,6 +577,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -513,6 +600,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -523,6 +612,8 @@=0A=
 				1, //depth
 				false, // isEmptyElement
 				String.Empty, // name
+				String.Empty, // prefix
+				String.Empty, // localName
 				&quot;bar&quot;, // value
 				0 // attributeCount
 			);
@@ -533,6 +624,8 @@=0A=
 				1, //depth
 				false, // isEmptyElement
 				&quot;baz&quot;, // name
+				String.Empty, // prefix
+				&quot;baz&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -543,6 +636,8 @@=0A=
 				1, //depth
 				false, // isEmptyElement
 				String.Empty, // name
+				String.Empty, // prefix
+				String.Empty, // localName
 				&quot;quux&quot;, // value
 				0 // attributeCount
 			);
@@ -553,6 +648,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -574,6 +671,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -584,6 +683,8 @@=0A=
 				1, //depth
 				false, // isEmptyElement
 				String.Empty, // name
+				String.Empty, // prefix
+				String.Empty, // localName
 				&quot;FOO&quot;, // value
 				0 // attributeCount
 			);
@@ -594,6 +695,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -615,6 +718,8 @@=0A=
 				0, //depth
 				true, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				1 // attributeCount
 			);
@@ -642,6 +747,8 @@=0A=
 				0, //depth
 				true, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				1 // attributeCount
 			);
@@ -669,6 +776,8 @@=0A=
 				0, //depth
 				true, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				1 // attributeCount
 			);
@@ -696,6 +805,8 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);
@@ -706,6 +817,8 @@=0A=
 				1, //depth
 				false, // isEmptyElement
 				String.Empty, // name
+				String.Empty, // prefix
+				String.Empty, // localName
 				&quot;&lt;&gt;&amp;&quot;, // value
 				0 // attributeCount
 			);
@@ -716,6 +829,31 @@=0A=
 				0, //depth
 				false, // isEmptyElement
 				&quot;foo&quot;, // name
+				String.Empty, // prefix
+				&quot;foo&quot;, // localName
+				String.Empty, // value
+				0 // attributeCount
+			);
+
+			AssertEndDocument(xmlReader);
+		}
+
+		public void TestEmptyElementInNamespace()
+		{
+			string xml =3D @&quot;&lt;foo:bar /&gt;&quot;;
+			XmlReader xmlReader =3D
+				new XmlTextReader(new StringReader(xml));
+
+			AssertStartDocument(xmlReader);
+
+			AssertNode(
+				xmlReader, // xmlReader
+				XmlNodeType.Element, // nodeType
+				0, // depth
+				true, // isEmptyElement
+				&quot;foo:bar&quot;, // name
+				&quot;foo&quot;, // prefix
+				&quot;bar&quot;, // localName
 				String.Empty, // value
 				0 // attributeCount
 			);

------=_NextPart_000_000A_01C1B225.EA6A1780--



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003107.html">[Mono-list] HTML Mockup for Class Lib Todo's
</A></li>
	<LI> Next message: <A HREF="003055.html">[Mono-list] [PATCH] System.XML build fixes and initial
 namespace support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3044">[ date ]</a>
              <a href="thread.html#3044">[ thread ]</a>
              <a href="subject.html#3044">[ subject ]</a>
              <a href="author.html#3044">[ author ]</a>
         </LI>
       </UL>
</body></html>
