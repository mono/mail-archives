<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] PInvoke to libgda
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:danmorg%40sc.rr.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002986.html">
   <LINK REL="Next"  HREF="002990.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] PInvoke to libgda
   </H1>
    <B>Daniel Morgan
    </B> 
    <A HREF="mailto:danmorg%40sc.rr.com"
       TITLE="[Mono-list] PInvoke to libgda">danmorg@sc.rr.com
       </A><BR>
    <I>Thu, 7 Feb 2002 18:57:03 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="002986.html">[Mono-list] RuntimeHelpers?
</A></li>
        <LI> Next message: <A HREF="002990.html">[Mono-list] System.Data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2989">[ date ]</a>
              <a href="thread.html#2989">[ thread ]</a>
              <a href="subject.html#2989">[ subject ]</a>
              <a href="author.html#2989">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Adam,

I hope you don't mind, I couldn't help resist reposting this to the
mono-list. ;-)

-= Daniel

----- Original Message -----
From: &quot;Adam Treat&quot; &lt;<A HREF="mailto:manyoso@yahoo.com">manyoso@yahoo.com</A>&gt;
To: &quot;Daniel Morgan&quot; &lt;<A HREF="mailto:danmorg@sc.rr.com">danmorg@sc.rr.com</A>&gt;
Sent: Thursday, February 07, 2002 6:42 PM
Subject: Re: [Mono-list] PInvoke Test


&gt;<i> &gt; Do you have an example you care to share with us of how you connected to
</I>a
&gt;<i> &gt; database using libgda through C#?  I am definitely most interested in
</I>&gt;<i> &gt; working on this.
</I>&gt;<i>
</I>&gt;<i> Yah, I haven't actually been doing anything with libgda, I am working on
</I>&gt;<i> binding the Qt toolkit to c#...  But, I took a stab at some PInvoke calls
</I>to
&gt;<i> libgda-common just to get you started.  See below.  Hope it helps.
</I>&gt;<i>
</I>&gt;<i> &gt; I would like to use csc.exe on Linux, but Red Hat Linux does not support
</I>&gt;<i> &gt; NTFS out of the box.  That would be really cool if I could though -- not
</I>&gt;<i> &gt; having to switch back and forth between Windows and Linux -- just stay
</I>in
&gt;<i> &gt; Linux and make C# programs.
</I>&gt;<i>
</I>&gt;<i> I have a windows partition that I installed specifically to work on Mono.
</I>&gt;<i> But, I grew tired of working in windows so I set up wine to use csc.  It
</I>is
&gt;<i> so much nicer than monkeying with the windows command line ;-)
</I>&gt;<i>
</I>&gt;<i> cheers,
</I>&gt;<i>
</I>&gt;<i> adam
</I>&gt;<i>
</I>&gt;<i> // libgda PInvoke example with Mono's mint on linux.
</I>&gt;<i>
</I>&gt;<i> using System;
</I>&gt;<i> using System.Runtime.InteropServices;
</I>&gt;<i> public class libgda
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i> [DllImport(&quot;libgda-common.so.0&quot;, EntryPoint=&quot;gda_init&quot;)]
</I>&gt;<i> public static extern void gda_init(
</I>&gt;<i> [MarshalAs(UnmanagedType.LPStr)] string app_id,
</I>&gt;<i> [MarshalAs(UnmanagedType.LPStr)] string version,
</I>&gt;<i> ref int nargs,
</I>&gt;<i> [MarshalAs(UnmanagedType.LPStr)] string args);
</I>&gt;<i> //ref IntPtr args);
</I>&gt;<i>
</I>&gt;<i> public static int Main(string[] argv)
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i> // Notice, I am faking it when it comes to the command line args.  This
</I>&gt;<i> // is where the Marshal class would come in handy (See below)
</I>&gt;<i> int argc = 1;
</I>&gt;<i> gda_init(&quot;app&quot;, &quot;version&quot;, ref argc, &quot;my_argument&quot;);
</I>&gt;<i> return 0;
</I>&gt;<i>
</I>&gt;<i> // This is what you really want, unfortunately the mint
</I>&gt;<i> // interpreter does not have support for the full Marshal class
</I>&gt;<i> // so you'll have to wait for that in order to pass char *args[] to it.
</I>&gt;<i> // But, this should at least get you up and running.
</I>&gt;<i> //int argc = argv.Length;
</I>&gt;<i> //IntPtr args = Marshal.StringToHGlobalAnsi(argv);
</I>&gt;<i> //gda_init(&quot;app, &quot;version&quot;, ref argc, ref args);
</I>&gt;<i> }
</I>&gt;<i> }
</I>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002986.html">[Mono-list] RuntimeHelpers?
</A></li>
	<LI> Next message: <A HREF="002990.html">[Mono-list] System.Data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2989">[ date ]</a>
              <a href="thread.html#2989">[ thread ]</a>
              <a href="subject.html#2989">[ subject ]</a>
              <a href="author.html#2989">[ author ]</a>
         </LI>
       </UL>
</body></html>
