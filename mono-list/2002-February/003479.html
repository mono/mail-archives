<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Quick question reguarding local allocation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:shark%40blueyonder.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003478.html">
   <LINK REL="Next"  HREF="003480.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Quick question reguarding local allocation
   </H1>
    <B>adc
    </B> 
    <A HREF="mailto:shark%40blueyonder.co.uk"
       TITLE="[Mono-list] Quick question reguarding local allocation">shark@blueyonder.co.uk
       </A><BR>
    <I>Tue, 26 Feb 2002 00:34:06 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="003478.html">[Mono-list] Quick question reguarding local allocation
</A></li>
        <LI> Next message: <A HREF="003480.html">[Mono-list] Quick question reguarding local allocation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3479">[ date ]</a>
              <a href="thread.html#3479">[ thread ]</a>
              <a href="subject.html#3479">[ subject ]</a>
              <a href="author.html#3479">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25 Feb 2002 18:09:11 -0600
Ravi Pratap M &lt;<A HREF="mailto:ravi@ximian.com">ravi@ximian.com</A>&gt; wrote:

&gt;<i> Hi there, 
</I>&gt;<i> 
</I>&gt;<i> On Mon, 2002-02-25 at 18:03, adc wrote:
</I>&gt;<i> &gt; Does the mono C# compiler squeeze the (IL) locals into as few as
</I>&gt;<i> &gt;possible?
</I>&gt;<i> &gt; By this I mean if two locals which would otherwise have been outputted
</I>&gt;<i> &gt;are never simultaneously live does mcs squeeze these two locals into
</I>&gt;<i> &gt;one?
</I>&gt;<i> 
</I>&gt;<i> 	IIRC, no we don't do any kind of optimization on the locals yet - in
</I>&gt;<i> fact, our plan is to worry about optimizing our code only when we are
</I>&gt;<i> done with all the bug-fixing and feature completion :-)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 	But you are welcome to submit a patch though ;-)
</I>&gt;<i> 
</I>&gt;<i> 
</I>
Thanks for the very swift response. I guessed that this would be the case, the reason I asked was from a pretty selfish perspective in that I am currently writing for my 4rth year project a compiler which takes IL and produces native code, currently my register allocator is very simple (it simply assigns a register to each local and stack slot that it can and spills the rest, the arguments are simply placed on the (real) machine's stack), and I plan to discuss in the dissertation (which is all I am actually marked on) whether there would be a marked improvement if a proper register allocator were used. The stack slots generally (as far as I can make out) have to be live simultaneously (unless their values are taken off with the pop IL instruction which as far as I can make out isnt' used very often). So I'm not sure that a great advantage can be made by a more intelligent register allocator. Obviously some of the locals and the stack slots could still be merged, however the peephole optimser does at least take care of removing some of the move instruction between the (registers representing) the stack and the locals so the gain there would be too great either.


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003478.html">[Mono-list] Quick question reguarding local allocation
</A></li>
	<LI> Next message: <A HREF="003480.html">[Mono-list] Quick question reguarding local allocation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3479">[ date ]</a>
              <a href="thread.html#3479">[ thread ]</a>
              <a href="subject.html#3479">[ subject ]</a>
              <a href="author.html#3479">[ author ]</a>
         </LI>
       </UL>
</body></html>
