<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono builds for Mac OS X, rwlock fix and project
 files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ryan_wilhm%40yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003358.html">
   <LINK REL="Next"  HREF="003344.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono builds for Mac OS X, rwlock fix and project
 files
   </H1>
    <B>Ryan Wilhm
    </B> 
    <A HREF="mailto:ryan_wilhm%40yahoo.com"
       TITLE="[Mono-list] Mono builds for Mac OS X, rwlock fix and project
 files">ryan_wilhm@yahoo.com
       </A><BR>
    <I>Tue, 19 Feb 2002 13:07:45 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="003358.html">[Mono-list] Cygwin Build Problems
</A></li>
        <LI> Next message: <A HREF="003344.html">[Mono-list] Nightly builds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3342">[ date ]</a>
              <a href="thread.html#3342">[ thread ]</a>
              <a href="subject.html#3342">[ subject ]</a>
              <a href="author.html#3342">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Before I leave, I thought I'd take a quick and dirty stab at a
pthread_rwlock workaround. (I basically did it the same way the recursive
mutex fix was done. I haven't really done any unit testing so I can't vouch
for it's usefulness...) I also thought I'd make my build available, in case
anybody wanted to give it a shot. As it stands, it builds but is
functionally broken.

RWLock Workaround-
<A HREF="http://homepage.mac.com/r_wilhm/.cv/r_wilhm/Public/Mono_Stuff/mono_rwlock_fi">http://homepage.mac.com/r_wilhm/.cv/r_wilhm/Public/Mono_Stuff/mono_rwlock_fi</A>
x.tar.gz-binhex.hqx

Build-
<A HREF="http://homepage.mac.com/r_wilhm/.cv/r_wilhm/Public/Mono_Stuff/Mono_0.8_MacOS">http://homepage.mac.com/r_wilhm/.cv/r_wilhm/Public/Mono_Stuff/Mono_0.8_MacOS</A>
X.tar.gz-binhex.hqx

Thanks,
Ryan


On 2/19/02 7:37 AM, &quot;Ryan Wilhm&quot; &lt;<A HREF="mailto:ryan_wilhm@yahoo.com">ryan_wilhm@yahoo.com</A>&gt; wrote:

&gt;<i> Thanks, Jeff! I pulled down a snapshot of Mono last night from CVS and
</I>&gt;<i> managed to get it to build. Sort of. The major caveat is that, in addition
</I>&gt;<i> to not supporting Pthread recursive mutexes, it also doesn't support
</I>&gt;<i> read/write locks. I checked out Apple's developer site and found a bugfix
</I>&gt;<i> request that details the functionality missing from the Pthread OpenGroup
</I>&gt;<i> spec in OS X:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.opensource.apple.com/bugs/X/Libraries/2686231.html">http://www.opensource.apple.com/bugs/X/Libraries/2686231.html</A>
</I>&gt;<i> 
</I>&gt;<i> To get things to build in the interim, I just wrote stubs for the methods
</I>&gt;<i> that io-layer/events.c calls. (So in other words, don't have much confidence
</I>&gt;<i> that the build will work as expected... :) I'm going to be gone on vacation
</I>&gt;<i> for a week starting tomorrow, but I'd be happy to give an implementation a
</I>&gt;<i> shot when I get back next week.
</I>&gt;<i> 
</I>&gt;<i> Everything else was just build massaging... Off the top of my head:
</I>&gt;<i> 
</I>&gt;<i> - I set configure.in to target the ppc arch for powerpc-*-darwin*
</I>&gt;<i> - For any problematic header dependencies, I just used #if(n)def
</I>&gt;<i> __APPLE__/#endif to resolve
</I>&gt;<i> - I did end up removing EDOTDOT and ENOMEDIUM
</I>&gt;<i> - I ended up needing to manually compiling monoberg.c... I needed to add the
</I>&gt;<i> -no-cpp-precomp and a library include flag that wasn't carried forward
</I>&gt;<i> during Makefile generation
</I>&gt;<i> - I also added the empty read/write lock stub file into the io-layer
</I>&gt;<i> Makefile.am and Makefile.in files so I didn't have to hand crank the
</I>&gt;<i> Makefile every time might need to reconfigure...
</I>&gt;<i> 
</I>&gt;<i> That's about it...
</I>&gt;<i> 
</I>&gt;<i> Thanks again for the help!
</I>&gt;<i> Ryan
</I>&gt;<i> 
</I>&gt;<i> 
</I>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003358.html">[Mono-list] Cygwin Build Problems
</A></li>
	<LI> Next message: <A HREF="003344.html">[Mono-list] Nightly builds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3342">[ date ]</a>
              <a href="thread.html#3342">[ thread ]</a>
              <a href="subject.html#3342">[ subject ]</a>
              <a href="author.html#3342">[ author ]</a>
         </LI>
       </UL>
</body></html>
