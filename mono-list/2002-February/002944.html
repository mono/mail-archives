<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Needed: randomness for System.Guid.NewGuid.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:duco%40lorentz.xs4all.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002943.html">
   <LINK REL="Next"  HREF="002951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Needed: randomness for System.Guid.NewGuid.
   </H1>
    <B>Duco Fijma
    </B> 
    <A HREF="mailto:duco%40lorentz.xs4all.nl"
       TITLE="[Mono-list] Needed: randomness for System.Guid.NewGuid.">duco@lorentz.xs4all.nl
       </A><BR>
    <I>06 Feb 2002 00:18:33 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="002943.html">[Mono-list] Enormous diffs
</A></li>
        <LI> Next message: <A HREF="002951.html">[Mono-list] Needed: randomness for System.Guid.NewGuid.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2944">[ date ]</a>
              <a href="thread.html#2944">[ thread ]</a>
              <a href="subject.html#2944">[ subject ]</a>
              <a href="author.html#2944">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Currently, I'm implementing the System.Guid class. There is a single
method left to be left implemented: &quot;Guid.NewGuid&quot;, which generates new 
&quot;random&quot;  Guids.

When I voluntered for the System.Guid class some time ago, Miguel wrote:

&gt;<i>For some bits of System.Guid maybe you will want to use an
</I>&gt;<i>`internalcall' (we can implement this for you) to retrieve things like
</I>&gt;<i>the ethernet address.
</I>&gt;<i>
</I>&gt;<i>Let me know what do you need, and we will implement.
</I>&gt;<i>
</I>&gt;<i>Miguel.
</I>
Well, here I am :-). I have no real experience accessing the &quot;underlying
metal&quot; in Mono/C#, so I would like to share some thoughts on the
strategy to follow when generating Guids and the way to access the bits
of randomness needed.

I had in mind the following strategy for implementing Guid's:
 
- When a network adapter is present, its hardware-address is used to
provide for the last 6 bytes of the GUID.
- When &quot;real&quot; random numbers are available (such as &quot;/dev/urandom&quot; on
Linux), these are used to fill the (remaining) bytes and we are done.
- If &quot;just&quot; pseudo random numbers are available, the (remaining) bytes
of the GUID are populated using a this pseudo random number generator in
combination with a clock. If available, some high-resolution clock is
used for this purpose.

The HW-address has to be made available via some InternalCall, or am I 
missing the point here and should I be able to retrieve this via
&quot;System.Net.Sockets&quot; in some way?

Access to high-quality random numbers could be integrated into
System.Random. Alternatively, we could choose to leave System.Random a
pseudo random number generator (like the Microsoft class library
documentation suggests) and let System.Guid access a &quot;/dev/urandom&quot;-like
device via some InteralCall or via direct file access of &quot;/dev/urandom&quot;.
The latter obviously won't work under Windows, I have no idea whether an
alternative is available under that OS. I think I would prefer 
platform-specific things like this to be hidden behind an InternalCall.

For the clocks, something likewise holds. We could choose to &quot;guarantee&quot;
that System.DateTime has a resolution of 1ms or better (Microsoft's
implementation does NOT make such a guarantee) or to have some
alternative access (InternallCall?) to a high resultion clock.

Any thoughts? How will we combine efforts to implement the bits needed?

Regards,

Duco





</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002943.html">[Mono-list] Enormous diffs
</A></li>
	<LI> Next message: <A HREF="002951.html">[Mono-list] Needed: randomness for System.Guid.NewGuid.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2944">[ date ]</a>
              <a href="thread.html#2944">[ thread ]</a>
              <a href="subject.html#2944">[ subject ]</a>
              <a href="author.html#2944">[ author ]</a>
         </LI>
       </UL>
</body></html>
