<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: some System.XML bugfixes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ginga%40kit.hi-ho.ne.jp">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="010024.html">
   <LINK REL="Next"  HREF="010026.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: some System.XML bugfixes
   </H1>
    <B>ginga(A.E.)
    </B> 
    <A HREF="mailto:ginga%40kit.hi-ho.ne.jp"
       TITLE="[Mono-list] Re: some System.XML bugfixes">ginga@kit.hi-ho.ne.jp
       </A><BR>
    <I>Sun, 01 Dec 2002 22:52:51 +0900</I>
    <P><UL>
        <LI> Previous message: <A HREF="010024.html">[Mono-list] Re: some System.XML bugfixes
</A></li>
        <LI> Next message: <A HREF="010026.html">[Mono-list] Bug in mono floating point computation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10025">[ date ]</a>
              <a href="thread.html#10025">[ thread ]</a>
              <a href="subject.html#10025">[ subject ]</a>
              <a href="author.html#10025">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello.

This is my error that I simply missed 'CreateNavigator(XmlNode).'
I think ville, Tim and Rafael are right, and please forget my previous
argument about 'non-inherited classes' problem. Sorry to disturb.

As to the report from ville ([Mono-list] XmlDocument.cs),
XmlDataDocument.cs (line 277) will become OK when changed from
'protected internal override' to 'protected override.'

Then you'll not be able to call CreateNavigator(XmlNode) in other
classes of System.Data.dll. But you can write like this:
  internal XPathNavigator CreateNavigatorInternal(XmlNode n)
  {
    // write what you want to do.
  }
  protected override XPathNavigator CreateNavigatorInternal(XmlNode n)
  {
    return CreateNavigatorInternal(n);
  }

If no other problems remain, then I'll fix up my mistake.
(I don't think bug 34797 is either mcs bug or C# spec bug.)

Attached to bottom is the message Tim (unexpected to) sent to me.
Tim says that it's ok to forward. (Thanks.)

# I don't think MS spec is doctrine. So I went into ECMA spec.

Thanks,

-- A.Enomoto

&gt;<i> &gt; Hello.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; This is especially true since XmlDocument and XmlDataDocument are
</I>&gt;<i> &gt; &gt; in different assemblies.  Unless, maybe the second CreateNavigator
</I>&gt;<i> &gt; &gt; should be virtual instead of override.  Since CreateNavigator is
</I>&gt;<i> &gt; &gt; protected internal in XmlDocument, would it be true that XmlDataDocument
</I>&gt;<i> &gt; &gt; shouldn't even see that definition?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; First of all, in relate to the specification, I missed that
</I>&gt;<i> &gt; XmlDataDocument don't have the declaration of CreateNavigator.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I would tend to agree with you. But 'public' and 'internal protected'
</I>&gt;<i> &gt; are importantly different when third parties (users) wanted to
</I>&gt;<i> &gt; call such methods from non-inherited classes.
</I>&gt;<i> &gt; 'public' methods can be called, but 'internal protected' methods can't. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So I think 'public virtual' is better than 'internal protected.'
</I>&gt;<i> 
</I>&gt;<i> Well, that all depends on whether you actually want users to be able
</I>&gt;<i> to call the method, right?  What do you mean by &quot;better&quot;?  In terms
</I>&gt;<i> of Mono, to me, &quot;better&quot; means &quot;closer to the Microsoft .NET implementation&quot;,
</I>&gt;<i> not what feels better.  Sometimes the two are the same, but not always.
</I>&gt;<i>  
</I>&gt;<i> &gt; BTW, MS document says that XmlNode.CreateNavigator() is 'public':
</I>&gt;<i> &gt; <A HREF="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/f">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/f</A>
</I>&gt;<i> &gt; rlrfsystemxmlxmlnodeclasscreatenavigatortopic.asp
</I>&gt;<i> &gt; (With VB.NET syntax, it is explicitly declared as 'NotOverridable')
</I>&gt;<i> 
</I>&gt;<i> Yes, that's a different CreateNavigator.  Note that the one in XmlNode
</I>&gt;<i> has no arguments.  The one defined as protected internal in XmlDocument
</I>&gt;<i> and as protected in XmlDataDocument has an XmlNode argument.
</I>&gt;<i> 
</I>&gt;<i> &gt; And I couldn't find the ECMA specification's definition for XmlDocument
</I>&gt;<i> &gt; class. Please tell me where that API specification is...
</I>&gt;<i> &gt; <A HREF="http://www.ecma.ch/ecma1/STAND/ecma-335.htm">http://www.ecma.ch/ecma1/STAND/ecma-335.htm</A>
</I>&gt;<i> &gt; <A HREF="ftp://ftp.ecma.ch/ecma-st/Ecma-335-xml.zip">ftp://ftp.ecma.ch/ecma-st/Ecma-335-xml.zip</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I can't find why this method is not virtual. If MS developers
</I>&gt;<i> &gt; didn't have to override it, they might leave it 'public.'
</I>&gt;<i> &gt; But on the other hand, 'InsertAfter' is overridable, and then
</I>&gt;<i> &gt; 'CreateNavigator' should be 'public virtual' too.
</I>&gt;<i> &gt; Or if they have rational reason they don't want to override it, then
</I>&gt;<i> &gt; it should be 'public.'
</I>&gt;<i> 
</I>&gt;<i> I think you may be a bit confused here.  The XmlNode definition
</I>&gt;<i> of CreateNavigator has a different signature than the one we
</I>&gt;<i> are talking about which is overridden in XmlDataDocument.
</I>&gt;<i> 
</I>&gt;<i> I'm not aware of where the ECMA specification is.  The XmlDocument
</I>&gt;<i> is described in the .NET Framework SDK documentation.
</I>&gt;<i> 
</I>&gt;<i> &gt; Anyway, some bugfixes are required.
</I>&gt;<i> &gt; Thanks.
</I>&gt;<i> 
</I>&gt;<i> Yes, but what they are is unclear at present.  If we could implement
</I>&gt;<i> it the same as the .NET specification, that would be ideal, but it seems
</I>&gt;<i> that that spec is incorrect, since implementing it that way would cause
</I>&gt;<i> the compiler to fail.  Someone needs to somehow identify the correct
</I>&gt;<i> protection levels.  I would think, as I said, that the correct situation
</I>&gt;<i> is to have the XmlDocument definition protected instead of protected
</I>&gt;<i> internal, but I don't know for certain.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Tim Coleman &lt;<A HREF="mailto:tim@timcoleman.com">tim@timcoleman.com</A>&gt;                       [43.43 N 80.45 W]
</I>&gt;<i> BMath, Honours Combinatorics and Optimization, University of Waterloo
</I>&gt;<i> Software Developer, Global Services, Open Text Corporation
</I>&gt;<i> &quot;Under capitalism, man exploits man.  Under communism, it's just the
</I>&gt;<i>  opposite.&quot; -- J.K. Galbraith
</I>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="010024.html">[Mono-list] Re: some System.XML bugfixes
</A></li>
	<LI> Next message: <A HREF="010026.html">[Mono-list] Bug in mono floating point computation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10025">[ date ]</a>
              <a href="thread.html#10025">[ thread ]</a>
              <a href="subject.html#10025">[ subject ]</a>
              <a href="author.html#10025">[ author ]</a>
         </LI>
       </UL>
</body></html>
