<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] [PATCH] &quot;protected internal&quot; semantics
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jarek%40atm.com.pl">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="010400.html">
   <LINK REL="Next"  HREF="010408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] [PATCH] &quot;protected internal&quot; semantics
   </H1>
    <B>Jaroslaw Kowalski
    </B> 
    <A HREF="mailto:jarek%40atm.com.pl"
       TITLE="[Mono-list] [PATCH] &quot;protected internal&quot; semantics">jarek@atm.com.pl
       </A><BR>
    <I>Sun, 15 Dec 2002 22:52:32 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="010400.html">[Mono-list] [PATCH] &quot;protected internal&quot; semantics
</A></li>
        <LI> Next message: <A HREF="010408.html">[Mono-list] [PATCH] &quot;protected internal&quot; semantics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10406">[ date ]</a>
              <a href="thread.html#10406">[ thread ]</a>
              <a href="subject.html#10406">[ subject ]</a>
              <a href="author.html#10406">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just wanted to compile large part of my code with MCS and found this
problem, so I've made some investigation to fix it.

Yes, the patch is supposed to make MCS more compliant with CSC's behaviour
by disallowing some invalid code to compile and preventing some invalid
error message.

After patch a1.cs and b1.cs should fail to compile while a0.cs and b0.cs
should compile just fine.

I hope that the patch doesn't break any existing code ;-)

Jarek
----- Original Message -----
From: &quot;Miguel de Icaza&quot; &lt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&gt;
To: &quot;Jaroslaw Kowalski&quot; &lt;<A HREF="mailto:jarek@atm.com.pl">jarek@atm.com.pl</A>&gt;
Cc: &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
Sent: Sunday, December 15, 2002 9:54 AM
Subject: Re: [Mono-list] [PATCH] &quot;protected internal&quot; semantics


&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> &gt; Today I've reported an MCS error where it wasn't possible to override
</I>&gt;<i> &gt; &quot;protected internal&quot; method with method declared as &quot;protected&quot; in
</I>another
&gt;<i> &gt; assembly.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Here's my attempt to fix it: I've added some conditions in &quot;decl.cs&quot;
</I>(patch
&gt;<i> &gt; included) and some mini test to check this functionality (second and
</I>fourth
&gt;<i> &gt; compilations should fail under both mcs and csc)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can you please verify the patch and commit if it's ok (I'm using
</I>read-only
&gt;<i> &gt; CVS access)
</I>&gt;<i>
</I>&gt;<i> I ran your test, and tried to compile it with CSC, and CSC reported:
</I>&gt;<i>
</I>&gt;<i> a1.cs(11,26): error CS0507:'C.Test1()': cannot change access modifiers
</I>when overriding 'protected internal' inherited member 'A.Test1()'
&gt;<i> a1.cs(3,35): (Location of symbol related to previous error)
</I>&gt;<i> b1.cs(3,35): error CS0507:'B0.Test1()': cannot change access modifiers
</I>when overriding 'protected' inherited member 'A.Test1()'
&gt;<i> a0.dll:         (Location of symbol related to previous error)
</I>&gt;<i>
</I>&gt;<i> When compiled with MCS I got:
</I>&gt;<i>
</I>&gt;<i> ^Pmono$ mcs /t:library a1.cs
</I>&gt;<i> a1.cs(11) error CS0507: `C.Test1': can't change the access modifiers
</I>&gt;<i> when overriding inherited member `A.Test1'
</I>&gt;<i> Compilation failed: 1 error(s), 0 warnings
</I>&gt;<i> mono$ mcs /r:a0.dll /t:library b0.cs
</I>&gt;<i> b0.cs(3) error CS0507: `B1.Test1': can't change the access modifiers
</I>&gt;<i> when overriding inherited member `A.Test1'
</I>&gt;<i> Compilation failed: 1 error(s), 0 warnings
</I>&gt;<i> mono$ mcs /r:a0.dll /t:library b1.cs
</I>&gt;<i> Block is: 65552
</I>&gt;<i> Compilation succeeded
</I>&gt;<i>
</I>&gt;<i> Does your patch move us to compliancy with CSC?  It seems like it would,
</I>&gt;<i> but I want to confirm that ;-)
</I>&gt;<i>
</I>&gt;<i> Miguel
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@ximian.com">Mono-list@ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="010400.html">[Mono-list] [PATCH] &quot;protected internal&quot; semantics
</A></li>
	<LI> Next message: <A HREF="010408.html">[Mono-list] [PATCH] &quot;protected internal&quot; semantics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10406">[ date ]</a>
              <a href="thread.html#10406">[ thread ]</a>
              <a href="subject.html#10406">[ subject ]</a>
              <a href="author.html#10406">[ author ]</a>
         </LI>
       </UL>
</body></html>
