<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mono on NetBSD
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:sab%40zeekuschrist.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="010339.html">
   <LINK REL="Next"  HREF="010338.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mono on NetBSD
   </H1>
    <B>Scott Aaron Bamford
    </B> 
    <A HREF="mailto:sab%40zeekuschrist.com"
       TITLE="[Mono-list] mono on NetBSD">sab@zeekuschrist.com
       </A><BR>
    <I>Sat, 14 Dec 2002 20:04:47 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="010339.html">[Mono-list] mono on NetBSD
</A></li>
        <LI> Next message: <A HREF="010338.html">[Mono-list] C# Generics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10369">[ date ]</a>
              <a href="thread.html#10369">[ thread ]</a>
              <a href="subject.html#10369">[ subject ]</a>
              <a href="author.html#10369">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

--Multipart_Sat__14_Dec_2002_20:04:47_+0000_08c8e600
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

On Fri, 13 Dec 2002 13:23:03 -0800
Juli Mallett &lt;<A HREF="mailto:jmallett@FreeBSD.ORG">jmallett@FreeBSD.ORG</A>&gt; wrote:

&gt;<i> * De: Scott Aaron Bamford &lt;<A HREF="mailto:sab@zeekuschrist.com">sab@zeekuschrist.com</A>&gt; [ Data: 2002-12-13 ]
</I>&gt;<i> 	[ Subjecte: [Mono-list] mono on NetBSD ]
</I>&gt;<i> &gt; Plus a few changes to the build system that would probably end up in a NetBSD pkgsrc package.  Anyone had any success with mono on NetBSD?  Does the above seem sensible enough or have I missed something in mono's use of sem_*?  Can easirly provide full patch for anyone whos interested in helping me knock this little error on the head.  Thanks for any assitance.
</I>&gt;<i> 
</I>&gt;<i> What sort of changes to the build system?
</I>
I had just added the flags nessasry to support pthreads on NetBSD to the various makefiles while they are needed.  When I thought about it, it would be better to check for native pthreads in configure, and if it cannot find them, check for one of the pthread packages, I've had most success (in general) with GNU Pth, plus, its very easy to check for, so I've added those lines to the configure script.

&gt;<i> As for all other issues, you may want to try with 0.17 or current CVS to be
</I>&gt;<i> sure?
</I>
Okay, I got the cvs copy, reapplied my changes, and any others that needed to be done, and with the change to the configure script it compiles &quot;out of the box&quot; now on NetBSD.  Not been able to test if I still get the problem when using the compiled mono now because I don't have all the libraries (from runtime/) installed, and I have nothing to bootstrap a mcs with, any ideas?

Anyhow, patch attached that adds the above pthread checking to configure.in and that uses pthread_mutex's if semaphore.h cannot be found, and thus sem_* cannot be used.  Will that always DTRT or are there systems where semaphore.h is not present but sem_* still is?  Could someone with cvs access review and commit, thanks.  And thanks for anyone with ideas about where I can get/make the neassary runtime libs without a version of mcs?

 - Scott

                                             &amp;
         _.-'&quot;''--..___.(&quot;\-''-'&quot;)           i         . O
 ('.__.' .(     )  .-'   (   6_6'  -------- |#| ------ o -  ,,'''''', ------- 
  '-..-'' .' _.' (   -.   '(._Y_)       ____| |____    .  ,'         ) ,',   |
 |        ', '._  \  \_-.._ `--'.._    | # #: :# # |     (  O  &lt;&lt;&lt;&lt;&lt;  ' &lt;    |
 |          '-.!)) '.(il)   ''-.(li)   | # _____ # |      ',,     ,,,) ','   |
 |                                     |___ilili___|         ',,,'           |
  ----- <A HREF="mailto:sab@zeekuschrist.com">sab@zeekuschrist.com</A> ------------------------- <A HREF="mailto:sab@posix.org.uk">sab@posix.org.uk</A> -----


--Multipart_Sat__14_Dec_2002_20:04:47_+0000_08c8e600
Content-Type: application/octet-stream;
 name=&quot;semtopthread.20021214.patch&quot;
Content-Disposition: attachment;
 filename=&quot;semtopthread.20021214.patch&quot;
Content-Transfer-Encoding: base64

ZGlmZiAtcnUgLi4vbW9uby5vcmlnL2NvbmZpZ3VyZS5pbiAuL2NvbmZpZ3VyZS5pbgotLS0gLi4v
bW9uby5vcmlnL2NvbmZpZ3VyZS5pbglNb24gRGVjICA5IDE4OjIyOjQ4IDIwMDIKKysrIC4vY29u
ZmlndXJlLmluCVNhdCBEZWMgMTQgMTg6MDU6MDIgMjAwMgpAQCAtMTYzLDYgKzE2MywxOSBAQAog
CQk7OwogZXNhYwogCitkbmwgU2VlIGlmIGF1dG9jb25mIGNhbiBmaW5kIGEgcHRocmVhZCBpbXBs
ZW1lbnRhdGlvbgorZG5sIElmIGl0IGNhbm5vdCB0aGVuIHNlZSBvZiBwdGggaXMgaW5zdGFsbGVk
LCBpZiBzbyB1c2UgdGhhdAorQUNfQ0hFQ0tfSEVBREVSKHB0aHJlYWQuaCwgRk9VTkRfUFRIUkVB
RF9IPXllcywgRk9VTkRfUFRIUkVBRF9IPW5vKQoraWYgdGVzdCAieCRGT1VORF9QVEhSRUFEX0gi
ID0gInhubyIgOyB0aGVuCisJQUNfUEFUSF9QUk9HKFBUSF9DT05GSUcsIHB0aHJlYWQtY29uZmln
LCBubykKKwlpZiB0ZXN0ICJ4JFBUSF9DT05GSUciID0gInhubyIgOyB0aGVuCisJCUFDX01TR19F
UlJPUihbWW91IG5lZWQgZWl0aGVyIG5hdGl2ZSBwdGhyZWFkcyBvciBHTlUgcHRoXSkKKwllbHNl
CisJCUNGTEFHUz0iJENGTEFHUyBgcHRocmVhZC1jb25maWcgLS1jZmxhZ3NgIgorCQlMREZMQUdT
PSIkTERGTEFHUyBgcHRocmVhZC1jb25maWcgLS1saWJzYCIKKwlmaQorZmkKKwogaWYgdGVzdCB4
JHBsYXRmb3JtX3dpbjMyID0geG5vOyB0aGVuCiAJZG5sICoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogCWRubCAqKiogQ2hl
Y2sgZm9yIGxhcmdlIGZpbGUgc3VwcG9ydCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAq
KioKZGlmZiAtcnUgLi4vbW9uby5vcmlnL21vbm8vaW8tbGF5ZXIvdGltZWQtdGhyZWFkLmMgLi9t
b25vL2lvLWxheWVyL3RpbWVkLXRocmVhZC5jCi0tLSAuLi9tb25vLm9yaWcvbW9uby9pby1sYXll
ci90aW1lZC10aHJlYWQuYwlXZWQgTm92IDIwIDEyOjMyOjQwIDIwMDIKKysrIC4vbW9uby9pby1s
YXllci90aW1lZC10aHJlYWQuYwlTYXQgRGVjIDE0IDE4OjEwOjU4IDIwMDIKQEAgLTExMSw3ICsx
MTEsMTIgQEAKIAltb25vX211dGV4X2luaXQoJnRocmVhZC0+am9pbl9tdXRleCwgTlVMTCk7CiAJ
cHRocmVhZF9jb25kX2luaXQoJnRocmVhZC0+ZXhpdF9jb25kLCBOVUxMKTsKIAl0aHJlYWQtPmNy
ZWF0ZV9mbGFncyA9IGNyZWF0ZV9mbGFnczsKKyNpZmRlZiBIQVZFX1NFTUFQSE9SRV9ICiAJc2Vt
X2luaXQgKCZ0aHJlYWQtPnN1c3BlbmRfc2VtLCAwLCAwKTsKKyNlbHNlCisgICAgICAgIHB0aHJl
YWRfbXV0ZXhfaW5pdCAoJnRocmVhZC0+c3VzcGVuZF9zZW0sIE5VTEwpOworI2VuZGlmCisKIAl0
aHJlYWQtPnN0YXJ0X3JvdXRpbmUgPSBzdGFydF9yb3V0aW5lOwogCXRocmVhZC0+ZXhpdF9yb3V0
aW5lID0gZXhpdF9yb3V0aW5lOwogCXRocmVhZC0+YXJnID0gYXJnOwpAQCAtMTQxLDcgKzE0Niwx
MiBAQAogCiAJbW9ub19tdXRleF9pbml0KCZ0aHJlYWQtPmpvaW5fbXV0ZXgsIE5VTEwpOwogCXB0
aHJlYWRfY29uZF9pbml0KCZ0aHJlYWQtPmV4aXRfY29uZCwgTlVMTCk7CisKKyNpZmRlZiBIQVZF
X1NFTUFQSE9SRV9ICiAJc2VtX2luaXQgKCZ0aHJlYWQtPnN1c3BlbmRfc2VtLCAwLCAwKTsKKyNl
bHNlCisgICAgICAgIHB0aHJlYWRfbXV0ZXhfaW5pdCAoJnRocmVhZC0+c3VzcGVuZF9zZW0sIE5V
TEwpOworI2VuZGlmCiAJdGhyZWFkLT5leGl0X3JvdXRpbmUgPSBleGl0X3JvdXRpbmU7CiAJdGhy
ZWFkLT5leGl0X3VzZXJkYXRhID0gZXhpdF91c2VyZGF0YTsKIAl0aHJlYWQtPmV4aXRzdGF0dXMg
PSAwOwpAQCAtMTk1LDcgKzIwNSwxMiBAQAogewogCW1vbm9fbXV0ZXhfZGVzdHJveSAoJnRocmVh
ZC0+am9pbl9tdXRleCk7CiAJcHRocmVhZF9jb25kX2Rlc3Ryb3kgKCZ0aHJlYWQtPmV4aXRfY29u
ZCk7CisKKyNpZmRlZiBIQVZFX1NFTUFQSE9SRV9ICiAJc2VtX2Rlc3Ryb3kgKCZ0aHJlYWQtPnN1
c3BlbmRfc2VtKTsKKyNlbHNlCisgICAgICAgIHB0aHJlYWRfbXV0ZXhfZGVzdHJveSAoJnRocmVh
ZC0+c3VzcGVuZF9zZW0pOworI2VuZGlmCiAJCiAJZ19mcmVlKHRocmVhZCk7CiB9CkBAIC0yMjgs
MTAgKzI0MywxOSBAQAogCQlleGl0ICgtMSk7CiAJfQogCQorI2lmZGVmIEhBVkVfU0VNQVBIT1JF
X0gKIAlzZW1fd2FpdCAoJnRocmVhZC0+c3VzcGVuZF9zZW0pOworI2Vsc2UKKyAgICAgICAgcHRo
cmVhZF9tdXRleF9sb2NrICgmdGhyZWFkLT5zdXNwZW5kX3NlbSk7CisjZW5kaWYKKwogfQogCiB2
b2lkIF93YXBpX3RpbWVkX3RocmVhZF9yZXN1bWUgKFRpbWVkVGhyZWFkICp0aHJlYWQpCiB7Cisj
aWZkZWYgSEFWRV9TRU1BUEhPUkVfSAogCXNlbV9wb3N0ICgmdGhyZWFkLT5zdXNwZW5kX3NlbSk7
CisjZWxzZQorCXB0aHJlYWRfbXV0ZXhfdW5sb2NrICgmdGhyZWFkLT5zdXNwZW5kX3NlbSk7Cisj
ZW5kaWYKIH0KZGlmZiAtcnUgLi4vbW9uby5vcmlnL21vbm8vaW8tbGF5ZXIvdGltZWQtdGhyZWFk
LmggLi9tb25vL2lvLWxheWVyL3RpbWVkLXRocmVhZC5oCi0tLSAuLi9tb25vLm9yaWcvbW9uby9p
by1sYXllci90aW1lZC10aHJlYWQuaAlGcmkgTm92IDE1IDEzOjQxOjQxIDIwMDIKKysrIC4vbW9u
by9pby1sYXllci90aW1lZC10aHJlYWQuaAlTYXQgRGVjIDE0IDE4OjAxOjA4IDIwMDIKQEAgLTI1
LDcgKzI1LDExIEBACiAJbW9ub19tdXRleF90IGpvaW5fbXV0ZXg7CiAJcHRocmVhZF9jb25kX3Qg
ZXhpdF9jb25kOwogCWd1aW50MzIgY3JlYXRlX2ZsYWdzOworI2lmZGVmIEhBVkVfU0VNQVBIT1JF
X0gKIAlzZW1fdCBzdXNwZW5kX3NlbTsKKyNlbHNlCisgICAgICAgIHB0aHJlYWRfbXV0ZXhfdCBz
dXNwZW5kX3NlbTsKKyNlbmRpZgogCWd1aW50MzIgKCpzdGFydF9yb3V0aW5lKShncG9pbnRlciBh
cmcpOwogCXZvaWQgKCpleGl0X3JvdXRpbmUpKGd1aW50MzIgZXhpdHN0YXR1cywgZ3BvaW50ZXIg
dXNlcmRhdGEpOwogCWdwb2ludGVyIGFyZzsK

--Multipart_Sat__14_Dec_2002_20:04:47_+0000_08c8e600--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="010339.html">[Mono-list] mono on NetBSD
</A></li>
	<LI> Next message: <A HREF="010338.html">[Mono-list] C# Generics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10369">[ date ]</a>
              <a href="thread.html#10369">[ thread ]</a>
              <a href="subject.html#10369">[ subject ]</a>
              <a href="author.html#10369">[ author ]</a>
         </LI>
       </UL>
</body></html>
