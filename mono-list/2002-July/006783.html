<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] late linking &amp; dynamic invocation ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:michael%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="006779.html">
   <LINK REL="Next"  HREF="006787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] late linking &amp; dynamic invocation ...
   </H1>
    <B>Michael Meeks
    </B> 
    <A HREF="mailto:michael%40ximian.com"
       TITLE="[Mono-list] late linking &amp; dynamic invocation ...">michael@ximian.com
       </A><BR>
    <I>05 Jul 2002 08:40:18 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="006779.html">[Mono-list] late linking &amp; dynamic invocation ...
</A></li>
        <LI> Next message: <A HREF="006787.html">[Mono-list] late linking &amp; dynamic invocation ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6783">[ date ]</a>
              <a href="thread.html#6783">[ thread ]</a>
              <a href="subject.html#6783">[ subject ]</a>
              <a href="author.html#6783">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Miguel,

On Thu, 2002-07-04 at 21:21, Miguel de Icaza wrote:
&gt;<i>    I am having a bit of trouble understanding what the problem is that
</I>&gt;<i> you are trying to solve in the discussion about delegates.  
</I>
	:-) well - there were 2 issues that got rather confused I think.

&gt;<i>    For any &quot;callback&quot; function that you might want to call from your
</I>&gt;<i> code, you will need to have a delegate definition
</I>
	I'm relatively resigned to that.

&gt;<i> this is just part of
</I>&gt;<i> the contract of the signature, so implementors can create methods
</I>&gt;<i> conforming to this definition.
</I>
	Right [ although this is not really necessary IMHO ].

&gt;<i> &gt; 	a) declare your method - with signature:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 		void myAllocateHandler (Widget     w,
</I>&gt;<i> &gt; 				        Allocation a,
</I>&gt;<i> &gt; 					Object     closure)
</I>&gt;<i> &gt; 		{ ... }
</I>...
&gt;<i> &gt; 	c) re-type the method signature [ in some mangled form ] in the
</I>&gt;<i> &gt; 	   name of the delegate on connection:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 		object.connect (new FooWidgetAllocationObject 
</I>&gt;<i> &gt; 			(myAllocateHandler));
</I>&gt;<i> 
</I>&gt;<i> You do not retype the signature, instead you use the delegate name:
</I>&gt;<i> 
</I>&gt;<i> 	object += new FooWidgetAllocation (myAllocationHandler)
</I>&gt;<i> 
</I>&gt;<i> So there are two sides of the problem:
</I>&gt;<i> 
</I>&gt;<i> 	* The &quot;definition&quot; side, which consists of a delegate
</I>&gt;<i> 	  declaration.
</I>&gt;<i> 
</I>&gt;<i> 	* The &quot;user&quot; side, which consists of doing the object +=
</I>&gt;<i> 	  new DelegateName (Function).
</I>
	Ok - the problem is quite simple. In order to reasonably disambiguate
the 'DelegateName' you need to mangle the types into the delegate name,
in a signal handling system there will be a lot of these, thus:

	new DelegateName (fn) -&gt; new DelegateLongIntShortString 
				(my_long_int_short_string_method);

	Do you now see that I typed the signature twice ? [ ok so it takes a
leap of imagination to see that my_long_int_short_string_method is an
arbitrary name for a method of that signature ].

	The tragedy of this all is that I don't care at all about the type of
the delegate, and the method I pass it to will instantly discard that
information -&gt; a generic 'Delegate' reference so, doing all this
redundant typing seems a total waste.

	In short - I want a way to generically create a Delegate with the right
signature from a method; so that we can then generically invoke it later
[ nicely typed signal emissions ].

	In short, it's the tragedy of this:

	Delegate *del = new DelegateLongIntShortString 
				(my_long_int_short_string_method);

	I want to be able to do:

	Delegate *del = new Delegate (my_long_int_short_string_method);

	or better, have an auto-coercion built into the method signature so
that one doesn't have to type &quot;new&quot; anything :-)

	Does that make it clearer ? it's not a matter of type safety, but
linguistic style it seems to me [ and possibly compiler simplicity as
well ;-].
 
	Regards,

		Michael.

-- 
 <A HREF="mailto:mmeeks@gnu.org">mmeeks@gnu.org</A>  &lt;&gt;&lt;, Pseudo Engineer, itinerant idiot



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="006779.html">[Mono-list] late linking &amp; dynamic invocation ...
</A></li>
	<LI> Next message: <A HREF="006787.html">[Mono-list] late linking &amp; dynamic invocation ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6783">[ date ]</a>
              <a href="thread.html#6783">[ thread ]</a>
              <a href="subject.html#6783">[ subject ]</a>
              <a href="author.html#6783">[ author ]</a>
         </LI>
       </UL>
</body></html>
