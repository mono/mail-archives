<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] [PATCH] Const fold for AddressOf/Indirect
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:miguel%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="007355.html">
   <LINK REL="Next"  HREF="007339.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] [PATCH] Const fold for AddressOf/Indirect
   </H1>
    <B>Miguel de Icaza
    </B> 
    <A HREF="mailto:miguel%40ximian.com"
       TITLE="[Mono-list] [PATCH] Const fold for AddressOf/Indirect">miguel@ximian.com
       </A><BR>
    <I>28 Jul 2002 18:14:50 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="007355.html">[Mono-list] [PATCH] Const fold for AddressOf/Indirect
</A></li>
        <LI> Next message: <A HREF="007339.html">[Mono-list] mono 0.13 stable for windows released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7367">[ date ]</a>
              <a href="thread.html#7367">[ thread ]</a>
              <a href="subject.html#7367">[ subject ]</a>
              <a href="author.html#7367">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> &gt; Here is a trivial patch to fix a crash which I discovered when trying to
</I>&gt;<i> &gt; stress the parser.  Unary expressions '&amp; 1' and '* 1' (AddressOf and
</I>&gt;<i> &gt; Indirect) currently crash mcs when it tries to perform constant
</I>&gt;<i> &gt; folding.  Shall I apply to CVS?  
</I>&gt;<i> 
</I>&gt;<i> This patch is actually incorrect, because it is not valid to take the
</I>&gt;<i> address of a constant, so this code should emit the corresponding error
</I>&gt;<i> instead of silently generating incorrect code.
</I>
I have now reworked this piece of code.  Now it no longer assumes that
constant reduction will always succeed (as this bug showed).  But now,
constant reduction for unary operators will return a flag indicating
whether this reduction is possible or not, instead of the current
behavior.

This also means that a number of other tests that previously were not
done for constants will be performed.

Miguel


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="007355.html">[Mono-list] [PATCH] Const fold for AddressOf/Indirect
</A></li>
	<LI> Next message: <A HREF="007339.html">[Mono-list] mono 0.13 stable for windows released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7367">[ date ]</a>
              <a href="thread.html#7367">[ thread ]</a>
              <a href="subject.html#7367">[ subject ]</a>
              <a href="author.html#7367">[ author ]</a>
         </LI>
       </UL>
</body></html>
