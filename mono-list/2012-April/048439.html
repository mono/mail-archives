<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] slow HttpWebRequest.BeginGetResponse for Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20slow%20HttpWebRequest.BeginGetResponse%20for%20Mono&In-Reply-To=%3C4f7f2009.6266b40a.5a3a.ffff8f28%40mx.google.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048438.html">
   <LINK REL="Next"  HREF="048441.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] slow HttpWebRequest.BeginGetResponse for Mono</H1>
    <B>Kriss</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20slow%20HttpWebRequest.BeginGetResponse%20for%20Mono&In-Reply-To=%3C4f7f2009.6266b40a.5a3a.ffff8f28%40mx.google.com%3E"
       TITLE="[Mono-list] slow HttpWebRequest.BeginGetResponse for Mono">kriss.sonic at gmail.com
       </A><BR>
    <I>Fri Apr  6 16:55:28 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="048438.html">[Mono-list] How to build mono framework with debug info?
</A></li>
        <LI>Next message: <A HREF="048441.html">[Mono-list] bigger (vs .net) memory usage (GC bug or design?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48439">[ date ]</a>
              <a href="thread.html#48439">[ thread ]</a>
              <a href="subject.html#48439">[ subject ]</a>
              <a href="author.html#48439">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

 

I am developing a kind of http proxy, which heavily uses the HttpWebRequest
class. I develop on VS and test on 2 virtual machines: one Windows 2008R2
(with .NET4), one Ubuntu 11.10 (with Mono 2.10.5).

 

While HttpWebRequest.GetResponse is equally fast on both platforms and is
equivalent to HttpWebRequest.BeginGetResponse of .NET4, I observed that
Mono's implementation of HttpWebRequest.BeginGetResponse is much slower, by
an order of 1,5 to 2 times. For a single request, that would be unnoticeable
but for a proxy which keeps calling the method, this becomes an issue and
even lead to timeouts.

 

I have a test application if you want to reproduce the issue (but it seems
the mailing list do not accept attachment - just email me so that I can send
it to you). Run &quot;HttpWebRequestTest.exe&quot; to use the async mode and
&quot;HttpWebRequestTest.exe false&quot; to run the sync mode. The urls to get and the
number of thread to use may be changed in the .config file. On my two test
machines with the provided list of urls, I get an average of 350ms for
GetResponse (.NET &amp; Mono) and for BeginGetResponse (.NET), but of 600 ms for
BeginGetResponse on Mono.

 

Does anybody have any idea about what's wrong? 

 

Best regards

Kriss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20120406/6f8296ba/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20120406/6f8296ba/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048438.html">[Mono-list] How to build mono framework with debug info?
</A></li>
	<LI>Next message: <A HREF="048441.html">[Mono-list] bigger (vs .net) memory usage (GC bug or design?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48439">[ date ]</a>
              <a href="thread.html#48439">[ thread ]</a>
              <a href="subject.html#48439">[ subject ]</a>
              <a href="author.html#48439">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
