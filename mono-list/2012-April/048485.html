<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] A problem about WCF interoperation between mono and MS .Net
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20A%20problem%20about%20WCF%20interoperation%20between%20mono%20and%0A%20MS%20.Net&In-Reply-To=%3C4F9517E0.10708%40veritas-vos-liberabit.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048484.html">
   <LINK REL="Next"  HREF="048490.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] A problem about WCF interoperation between mono and MS .Net</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20A%20problem%20about%20WCF%20interoperation%20between%20mono%20and%0A%20MS%20.Net&In-Reply-To=%3C4F9517E0.10708%40veritas-vos-liberabit.com%3E"
       TITLE="[Mono-list] A problem about WCF interoperation between mono and MS .Net">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Mon Apr 23 08:50:40 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="048484.html">[Mono-list] A problem about WCF interoperation between mono and MS	.Net
</A></li>
        <LI>Next message: <A HREF="048490.html">[Mono-list] installing Mono 2.10+ in Ubuntu 8.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48485">[ date ]</a>
              <a href="thread.html#48485">[ thread ]</a>
              <a href="subject.html#48485">[ subject ]</a>
              <a href="author.html#48485">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>One possibility idea is this: interoperability wise, WCF sucks when 
there is generic types by adding hash-based suffix on the element names. 
So, give explicit name on the dictionary object by subclassing it or 
whatever. If it still doesn't work, I have no idea.

Atsushi Eno

hayate wrote:
&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> These days I've been struggling with a problem: a Windows silverlight 
</I>&gt;<i> app cannot deserialize the data from a WCF service under Mono, which 
</I>&gt;<i> later leads to my discovery.
</I>&gt;<i>
</I>&gt;<i> When serializing and deserializing some dictionary style data, it 
</I>&gt;<i> seems the MS .Net implementation does not work well with Mono imp, I 
</I>&gt;<i> made a simple case to demo this:
</I>&gt;<i>
</I>&gt;<i> Say I have a WCF service like this:
</I>&gt;<i> // WCF service contract
</I>&gt;<i> [ServiceContract]
</I>&gt;<i> public interface IAnswerService
</I>&gt;<i> {
</I>&gt;<i>   [OperationContract]
</I>&gt;<i>   Dictionary&lt;int, List&lt;string&gt;&gt; Ask ();
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> public class AnswerService : IAnswerService
</I>&gt;<i> {
</I>&gt;<i>   public Dictionary&lt;int, List&lt;string&gt;&gt; Ask ()
</I>&gt;<i>   {
</I>&gt;<i>           var d = new Dictionary&lt;int, List&lt;string&gt;&gt;() {  {42, new 
</I>&gt;<i> List&lt;string&gt;(){&quot;universe&quot;, &quot;life&quot;}}  };
</I>&gt;<i>
</I>&gt;<i>       return d;
</I>&gt;<i>   }
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> public class Test
</I>&gt;<i> {
</I>&gt;<i>   public static void Main (string [] args)
</I>&gt;<i>   {
</I>&gt;<i>         var baseAddress = new Uri(&quot;<A HREF="http://localhost:8080/Answer.svc">http://localhost:8080/Answer.svc</A>&quot;);
</I>&gt;<i>         var host = new ServiceHost (typeof (AnswerService));
</I>&gt;<i>         var binding = new BasicHttpBinding ();
</I>&gt;<i>         host.AddServiceEndpoint(typeof(IAnswerService), binding, 
</I>&gt;<i> baseAddress);
</I>&gt;<i>         host.Open ();
</I>&gt;<i>
</I>&gt;<i>         Console.WriteLine (&quot;Type [CR] to stop...&quot;);
</I>&gt;<i>         Console.ReadLine ();
</I>&gt;<i>         host.Close ();
</I>&gt;<i>   }
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> Note the data structure is Dictionary&lt;int, List&lt;string&gt;&gt;. Then I made 
</I>&gt;<i> a console client to read the data. The problem is, if I run the client 
</I>&gt;<i> under mono, everything is OK, if I run it under MS .Net, nothing is 
</I>&gt;<i> read. If I change the data structure to things like Dictionary&lt;int, 
</I>&gt;<i> string&gt;, everything works as expected.
</I>&gt;<i>
</I>&gt;<i> sum it up:
</I>&gt;<i> server under Mono &lt;====not work====&gt; client under MS .Net
</I>&gt;<i> server under Mono &lt;=====work=====&gt;  client under Mono
</I>&gt;<i> server under MS .Net &lt;=====work=====&gt; client under MS .Net
</I>&gt;<i> server under MS .Net &lt;=====work=====&gt; client under Mono
</I>&gt;<i>
</I>&gt;<i> only one case does not work.
</I>&gt;<i>
</I>&gt;<i> Any ideas?
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048484.html">[Mono-list] A problem about WCF interoperation between mono and MS	.Net
</A></li>
	<LI>Next message: <A HREF="048490.html">[Mono-list] installing Mono 2.10+ in Ubuntu 8.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48485">[ date ]</a>
              <a href="thread.html#48485">[ thread ]</a>
              <a href="subject.html#48485">[ subject ]</a>
              <a href="author.html#48485">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
