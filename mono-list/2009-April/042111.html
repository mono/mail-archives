<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Why are extension method dependent on .NET 3.5?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Why%20are%20extension%20method%20dependent%20on%20.NET%203.5%3F&In-Reply-To=e962983d0904161618w37b7686el651d7928029e0179%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042110.html">
   <LINK REL="Next"  HREF="042112.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Why are extension method dependent on .NET 3.5?</H1>
    <B>Dan Shryock</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Why%20are%20extension%20method%20dependent%20on%20.NET%203.5%3F&In-Reply-To=e962983d0904161618w37b7686el651d7928029e0179%40mail.gmail.com"
       TITLE="[Mono-list] Why are extension method dependent on .NET 3.5?">dan.shryock at gmail.com
       </A><BR>
    <I>Thu Apr 16 19:42:07 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="042110.html">[Mono-list] Why are extension method dependent on .NET 3.5?
</A></li>
        <LI>Next message: <A HREF="042112.html">[Mono-list] Why are extension method dependent on .NET 3.5?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42111">[ date ]</a>
              <a href="thread.html#42111">[ thread ]</a>
              <a href="subject.html#42111">[ subject ]</a>
              <a href="author.html#42111">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2009/4/16 Ji&#345;&#237; Z&#225;rev&#250;ck&#253; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">zarevucky.jiri at gmail.com</A>&gt;:
&gt;<i> Hello, I don't know whether there is some technological concept behind
</I>&gt;<i> this, but I always found that fact very annoying.
</I>&gt;<i> As far as I know, extension methods are purely a syntactic sugar,
</I>&gt;<i> aren't they? As such, there should be no runtime dependence on the
</I>&gt;<i> .NET 3.5, because everything I write using an extension method can be
</I>&gt;<i> very simply written as a normal static call. Neither should it have
</I>&gt;<i> (e.g. there is no reason for) compile-time dependence on
</I>&gt;<i> System.Core.dll. Can someone explain to me, then, why is it dependent?
</I>
The reason for requiring .NET 3.5 is because of the dependency on
System.Core.dll

The reason for the dependency on System.Core.dll is that the compile
needs some way to mark a method as an extension method when you add
the &quot;this&quot; keyword to the argument.  Having the keyword in the source
isn't enough because there are libraries which provide extension
methods, so there needs to be some sort of metadata attached to that
parameter for the compiler to know about the difference.  The metadata
that the compiler attaches is the attribute
[System.Runtime.CompilerServices.ExtensionAttribute] which happens to
reside in System.Core.dll thus causing the dependency on both that dll
and the 3.5 runtime.

Having said all of that, you can get arround the problem by providing
your own implementation of
System.Runtime.CompilerServices.ExtensionAttribute like this:

using System;

namespace System.Runtime.CompilerServices{
	public class ExtensionAttribute:Attribute{}
	}

By itself that isn't enough because it will conflict with
System.Core.dll, so you have to remove that dependency.  For gmcs, I
have done that by adding the -noconfig parameter to the compiler, and
then manually adding in all default assemblies that you use, including
-reference:System.dll which is normally automatically referenced.

Hope this explaination helps.

Dan
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042110.html">[Mono-list] Why are extension method dependent on .NET 3.5?
</A></li>
	<LI>Next message: <A HREF="042112.html">[Mono-list] Why are extension method dependent on .NET 3.5?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42111">[ date ]</a>
              <a href="thread.html#42111">[ thread ]</a>
              <a href="subject.html#42111">[ subject ]</a>
              <a href="author.html#42111">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
