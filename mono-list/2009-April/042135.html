<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] GAC question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20GAC%20question&In-Reply-To=23126929.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042134.html">
   <LINK REL="Next"  HREF="042138.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] GAC question</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20GAC%20question&In-Reply-To=23126929.post%40talk.nabble.com"
       TITLE="[Mono-list] GAC question">robertj at gmx.net
       </A><BR>
    <I>Sun Apr 19 17:36:13 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="042134.html">[Mono-list] GAC question
</A></li>
        <LI>Next message: <A HREF="042138.html">[Mono-list] GAC question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42135">[ date ]</a>
              <a href="thread.html#42135">[ thread ]</a>
              <a href="subject.html#42135">[ subject ]</a>
              <a href="author.html#42135">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

the crash you've experienced can only happen if I18N.dll is corrupt
Since this assembly is not vital, removing the GAC directory has
no immediate influence on your app. That's why it seems to work when
the GAC is missing.


fozzie wrote:
&gt;<i> bump.. I'm trying to use a 3rd party dll from within a mono VM embedded in a
</I>&gt;<i> windows application. I restored the GAC directory name and used gacutil to
</I>&gt;<i> register the dll using a strong name. But as soon as i run mono_jit_exec the
</I>&gt;<i> crash occurs. It doesn't occur if the GAC directory is missing.
</I>&gt;<i> 
</I>&gt;<i> The method variable in ves_icall_get_parameter_info() has its name field set
</I>&gt;<i> to &quot;get_PrimaryManager&quot;. Looking further into method:
</I>&gt;<i> method.klass.image.name =
</I>&gt;<i> &quot;c:\AAA\git\1.5.8_bullet\mono\lib\mono\gac\I18N\2.0.0.0__0738eb9f132ed756\I18N.dll&quot;
</I>&gt;<i> method.klass.name = &quot;Manager&quot;
</I>&gt;<i> method.klass.name_space = &quot;I18N.Common&quot;
</I>&gt;<i> 
</I>&gt;<i> I'm using gmcs.bat to compile, but i'm just specifying the input and output
</I>&gt;<i> files. Am i getting a version mismatch somewhere?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> fozzie wrote:
</I>&gt;&gt;<i> hi all..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm getting a crash stack when i run the teste project with the test.cs
</I>&gt;&gt;<i> sample:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 	mono.dll!mono_class_from_mono_type(_MonoType * type=0x00000013)  Line
</I>&gt;<i> 4711 + 0x3 bytes	C
</I>&gt;&gt;<i>  	mono.dll!ves_icall_get_parameter_info(_MonoMethod * method=0x01aee028,
</I>&gt;&gt;<i> _MonoReflectionMethod * member=0x0012f864)  Line 1644 + 0x18 bytes	C
</I>&gt;&gt;<i>  	02203260()	
</I>&gt;&gt;<i>  	mono.dll!mono_get_lmf_addr()  Line 2159 + 0xe bytes	C
</I>&gt;&gt;<i>  	02203249()	
</I>&gt;&gt;<i>  	mono.dll!mono_thread_current()  Line 1302 + 0xe bytes	C
</I>&gt;&gt;<i>  	mono.dll!mono_thread_interruption_checkpoint_request(int
</I>&gt;&gt;<i> bypass_abort_protection=0)  Line 3667	C
</I>&gt;&gt;<i>  	00000001()	
</I>&gt;&gt;<i>  	mono.dll!mono_thread_current()  Line 1302 + 0xe bytes	C
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The output is as follows:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 'teste.exe': Loaded
</I>&gt;&gt;<i> 'C:\cygwin\usr\src\mono\mono\msvc\Win32_Debug_eglib\bin\teste.exe',
</I>&gt;&gt;<i> Symbols loaded.
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\ntdll.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\kernel32.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded
</I>&gt;&gt;<i> 'C:\cygwin\usr\src\mono\mono\msvc\Win32_Debug_eglib\bin\mono.dll', Symbols
</I>&gt;&gt;<i> loaded.
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\version.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\msvcrt.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\ws2_32.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\advapi32.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\rpcrt4.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\nsi.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\psapi.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\winmm.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\user32.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\gdi32.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\ole32.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\oleaut32.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\oleacc.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\shell32.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\shlwapi.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded
</I>&gt;&gt;<i> 'C:\Windows\winsxs\x86_microsoft.vc90.debugcrt_1fc8b3b9a1e18e3b_9.0.21022.8_none_96748342450f6aa2\msvcr90d.dll',
</I>&gt;&gt;<i> Symbols loaded.
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\imm32.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\msctf.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\lpk.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\usp10.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded
</I>&gt;&gt;<i> 'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.6001.18000_none_5cdbaa5a083979cc\comctl32.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'ImageAtBase0x1d0000', No symbols loaded.
</I>&gt;&gt;<i> 'teste.exe': Unloaded 'ImageAtBase0x1d0000'
</I>&gt;&gt;<i> 'teste.exe': Loaded 'C:\Windows\System32\mscoree.dll'
</I>&gt;&gt;<i> 'teste.exe': Loaded
</I>&gt;&gt;<i> 'C:\cygwin\usr\src\mono\mono\msvc\Win32_Debug_eglib\test.exe', Binary was
</I>&gt;&gt;<i> not built with debug information.
</I>&gt;&gt;<i> 'teste.exe': Loaded
</I>&gt;&gt;<i> 'C:\cygwin\usr\src\mono\mono\msvc\Win32_Debug_eglib\lib\mono\1.0\mscorlib.dll',
</I>&gt;&gt;<i> Binary was not built with debug information.
</I>&gt;&gt;<i> 'teste.exe': Loaded
</I>&gt;&gt;<i> 'C:\cygwin\usr\src\mono\mono\msvc\Win32_Debug_eglib\lib\mono\gac\I18N\1.0.5000.0__0738eb9f132ed756\I18N.dll',
</I>&gt;&gt;<i> Binary was not built with debug information.
</I>&gt;&gt;<i> First-chance exception at 0x1019dea9 (mono.dll) in teste.exe: 0xC0000005:
</I>&gt;&gt;<i> Access violation reading location 0x00000017.
</I>&gt;&gt;<i> Unhandled exception at 0x1019dea9 (mono.dll) in teste.exe: 0xC0000005:
</I>&gt;&gt;<i> Access violation reading location 0x00000017.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The weird thing is that the program works when i rename the lib\mono\gac
</I>&gt;&gt;<i> subdirectory to something else before running it. Can someone explain this
</I>&gt;&gt;<i> behavior? An intermingling of windows and mono code, perhaps?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> thanks!
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042134.html">[Mono-list] GAC question
</A></li>
	<LI>Next message: <A HREF="042138.html">[Mono-list] GAC question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42135">[ date ]</a>
              <a href="thread.html#42135">[ thread ]</a>
              <a href="subject.html#42135">[ subject ]</a>
              <a href="author.html#42135">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
