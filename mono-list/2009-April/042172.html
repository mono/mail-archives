<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Checking memory leak
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Checking%20memory%20leak&In-Reply-To=49EFADC5.6070200%40loopback.ath.cx">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042171.html">
   <LINK REL="Next"  HREF="042173.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Checking memory leak</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Checking%20memory%20leak&In-Reply-To=49EFADC5.6070200%40loopback.ath.cx"
       TITLE="[Mono-list] Checking memory leak">kumpera at gmail.com
       </A><BR>
    <I>Wed Apr 22 20:03:50 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="042171.html">[Mono-list] Checking memory leak
</A></li>
        <LI>Next message: <A HREF="042173.html">[Mono-list] Checking memory leak
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42172">[ date ]</a>
              <a href="thread.html#42172">[ thread ]</a>
              <a href="subject.html#42172">[ subject ]</a>
              <a href="author.html#42172">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Wed, Apr 22, 2009 at 8:52 PM, Ishwor Gurung &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">ishwor at loopback.ath.cx</A>&gt;wrote:

&gt;<i> Hi list,
</I>&gt;<i>
</I>&gt;<i> Whats an appropriate way to check for memory leak of a mono application?
</I>&gt;<i>
</I>&gt;<i> I googled around with some example using valgrind for mono app but
</I>&gt;<i> couldn't find any concrete examples. What I've essentially done so far
</I>&gt;<i> using valgrind is:
</I>&gt;<i> $ valgrind --tool=memcheck --leak-check=full --show-reachable=yes mono
</I>&gt;<i> ./ConnectUTest.exe
</I>&gt;<i>
</I>&gt;<i> This however, always produces memory leak (~14k/test on five runs so far):
</I>&gt;<i>
</I>&gt;<i> ==15141== LEAK SUMMARY:
</I>&gt;<i> ==15141==    definitely lost: 14,408 bytes in 760 blocks.
</I>&gt;<i> ==15141==    indirectly lost: 2,496 bytes in 126 blocks.
</I>&gt;<i> ==15141==      possibly lost: 12,460 bytes in 419 blocks.
</I>&gt;<i> ==15141==    still reachable: 2,569,056 bytes in 16,726 blocks.
</I>&gt;<i> ==15141==         suppressed: 0 bytes in 0 blocks.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Is this something I should worry about in itself or let the Mono's GC
</I>&gt;<i> do its job with the memory and not worry about memory leaks? Can
</I>&gt;<i> someone confirm if these are even a real memory leak (the one above
</I>&gt;<i> with 14,408 bytes gone!)?
</I>&gt;<i>
</I>&gt;<i> Thanks.
</I>


Valgrind is the best too to dig for memory leaks. But it will only report
problems of
unmanaged memory leaks. For managed memory, just trust the GC.

Mono is supposed to do a clean shutdown, but we still have some small
non-important
fix leaks on things like support code. All of them leak a fixed set of
memory at startup.

Anyway, the best way to go is if your attach your valgrind file so I can
take a look.

Cheers,
Rodrigo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20090422/35312600/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20090422/35312600/attachment.html</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042171.html">[Mono-list] Checking memory leak
</A></li>
	<LI>Next message: <A HREF="042173.html">[Mono-list] Checking memory leak
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42172">[ date ]</a>
              <a href="thread.html#42172">[ thread ]</a>
              <a href="subject.html#42172">[ subject ]</a>
              <a href="author.html#42172">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
