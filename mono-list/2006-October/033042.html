<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Compile Error (System.Diagnostics.Stopwatch)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Compile%20Error%20%28System.Diagnostics.Stopwatch%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033041.html">
   <LINK REL="Next"  HREF="033044.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Compile Error (System.Diagnostics.Stopwatch)</H1>
    <B>Tim Riley</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Compile%20Error%20%28System.Diagnostics.Stopwatch%29&In-Reply-To="
       TITLE="[Mono-list] Compile Error (System.Diagnostics.Stopwatch)">riltim at gmail.com
       </A><BR>
    <I>Thu Oct 19 11:19:02 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="033041.html">[Mono-list] ASP 2.0 File Uploads?
</A></li>
        <LI>Next message: <A HREF="033044.html">[Mono-list] Compile Error (System.Diagnostics.Stopwatch)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33042">[ date ]</a>
              <a href="thread.html#33042">[ thread ]</a>
              <a href="subject.html#33042">[ subject ]</a>
              <a href="author.html#33042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Using: Mono 1.1.18, Windows XP

A buddy of mine wrote a small C# app for testing the speed of text reversing
loops to find which method is most efficient. It compiles fine using .NET
2.0 but when I try to compile it using Mono 1.1.18 I get the following two
errors.

reverse_test_mono.cs(99,16): error CS0246: The type or namespace name
'Stopwatch' could not be found. Are you missing a using directive or an
assembly reference?
reverse_test_mono.cs(99,44): error CS0246: The type or namespace name
'Stopwatch' could not be found. Are you missing a using directive or an
assembly reference?

When I use Lutz Roeder's .NET Reflector on mono's System.dll found in the
&quot;lib\mono\2.0&quot; directory I can drill down to &quot;System.Diagnostics.Stopwatch&quot;
so I assume it should be available if I reference &quot;System&quot; when trying to
compile.

I am issuing this command to compile:
mcs -reference:System reverse_test_mono.cs

and here is the code:
#####################Code#####################
using System;
using System.Text;
using System.Diagnostics;

namespace CADLABS
{
    interface IReversable { string Reverse( string text ); }

    class Class1 : IReversable
    {
        public string Reverse( string text )
        {
            if ( text == null || text.Length &lt; 2 ) return text;
            char[] chars = text.ToCharArray();
            Array.Reverse( chars );
            return new string( chars );
        }

        public override string ToString() { return &quot;Class1&quot;; }
    }

    class Class2 : IReversable
    {
        public string Reverse( string text )
        {
            if ( text == null || text.Length &lt; 2 ) return text;
            char[] chars = new char[ text.Length ];
            for ( int i = 0, j = chars.GetUpperBound( 0 ) ; -1 &lt; j ; )
                chars[ i++ ] = text[ j-- ];
            return new string( chars );
        }

        public override string ToString() { return &quot;Class2&quot;; }
    }

    class Class3 : IReversable
    {
        public string Reverse( string text )
        {
            if ( text == null || text.Length &lt; 2 ) return text;
            StringBuilder sb = new StringBuilder( text );
            for ( int i = 0, j = text.Length - 1 ; -1 &lt; j ; )
                sb[ i++ ] = text[ j-- ];
            return sb.ToString();
        }

        public override string ToString() { return &quot;Class3&quot;; }
    }

    class Class4 : IReversable
    {
        //  Glenn's code

        public string Reverse( string s )
        {
            // mp added following line to even the field
            if ( s == null || s.Length &lt; 2 ) return s;
            // Allocate buffer...
            char[] reversedString = new char[ s.Length ];
            // Calculate length ONLY ONCE, NOT each time thru 'for' loop...
            int limit = s.Length / 2;
            for ( int i = 0, j = s.Length - 1 ; i &lt;= limit ; i++, j-- )
            {
                reversedString[ i ] = s[ j ];
                reversedString[ j ] = s[ i ];
            }
            return new string( reversedString );
        }

        public override string ToString() { return &quot;Class4&quot;; }
    }

    class Class5 : IReversable
    {
        //  probably a bad interprettation of Cornbread's code
        //  not using pointers but using the triple xor technique

        public string Reverse( string text )
        {
            if ( text == null || text.Length &lt; 2 ) return text;
            char[] chars = text.ToCharArray();
            int j = chars.GetUpperBound(0);

            for ( int i = 0 ; i &lt; j ; i++, j-- )
            {
                chars[ i ] ^= chars[ j ];
                chars[ j ] ^= chars[ i ];
                chars[ i ] ^= chars[ j ];
            }

            return new string( chars );
        }

        public override string ToString() { return &quot;Class5&quot;; }
    }

    class Testing
    {
        static Stopwatch _stopwatch  = new Stopwatch();

        public static void Test( IReversable x, string text, int iterations
)
        {
            string result;

            _stopwatch.Reset();
            _stopwatch.Start();

            for ( int i = 0 ; i &lt; iterations ; i++ )
                result = x.Reverse( text );

            _stopwatch.Stop();

            Console.WriteLine(
                &quot;{0}.Reverse took {1} milliseconds ({2} chars, {3}
iterations).&quot;,
                x.ToString(),
                _stopwatch.ElapsedMilliseconds,
                text.Length,
                iterations
            );
        }

        public static void Main()
        {

            IReversable[] irTests = new IReversable[ 5 ];

            irTests[ 0 ] = new Class1();
            irTests[ 1 ] = new Class2();
            irTests[ 2 ] = new Class3();
            irTests[ 3 ] = new Class4();
            irTests[ 4 ] = new Class5();

            //  test 'em ==========================================

            string text = &quot;0123456789abcdef&quot;;
            int iterations = 1000000;

            foreach ( IReversable irTest in irTests )
                Test( irTest, text, iterations );

            Console.WriteLine();

            //  test 'em ==========================================

            for ( int i = 0 ; i &lt; 6 ; i++ )
                text = text + text;

            iterations = iterations / 10;

            foreach ( IReversable irTest in irTests )
                Test( irTest, text, iterations );

            Console.WriteLine();

            //  test 'em ==========================================

            for ( int i = 0 ; i &lt; 6 ; i++ )
                text = text + text;

            iterations = iterations / 100;

            foreach ( IReversable irTest in irTests )
                Test( irTest, text, iterations );

            Console.ReadKey();
        }
    }
}
#####################Code#####################
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20061019/d545eec6/attachment-0001.html">http://lists.ximian.com/pipermail/mono-list/attachments/20061019/d545eec6/attachment-0001.html</A> 
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033041.html">[Mono-list] ASP 2.0 File Uploads?
</A></li>
	<LI>Next message: <A HREF="033044.html">[Mono-list] Compile Error (System.Diagnostics.Stopwatch)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33042">[ date ]</a>
              <a href="thread.html#33042">[ thread ]</a>
              <a href="subject.html#33042">[ subject ]</a>
              <a href="author.html#33042">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
