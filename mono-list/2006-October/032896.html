<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mkbundle on windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20mkbundle%20on%20windows&In-Reply-To=20061005105608.22628.qmail%40web30605.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032895.html">
   <LINK REL="Next"  HREF="032900.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mkbundle on windows</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20mkbundle%20on%20windows&In-Reply-To=20061005105608.22628.qmail%40web30605.mail.mud.yahoo.com"
       TITLE="[Mono-list] mkbundle on windows">robertj at gmx.net
       </A><BR>
    <I>Thu Oct  5 07:15:28 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="032895.html">[Mono-list] mkbundle on windows
</A></li>
        <LI>Next message: <A HREF="032900.html">[Mono-list] Portability Layer and MonoDevelop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32896">[ date ]</a>
              <a href="thread.html#32896">[ thread ]</a>
              <a href="subject.html#32896">[ subject ]</a>
              <a href="author.html#32896">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Travis,

LD_LIBRARY_PATH=/usr/lib/mono/1.0 is wrong. It should
be $prefix/lib of your 1.1.17 installation, probably
/usr/lib.

Robert

Travis Staloch wrote:
&gt;<i> Robert,
</I>&gt;<i> 
</I>&gt;<i> I've created a shell script to set the LD_LIBRARY_PATH 
</I>&gt;<i> environment var before running my bundled app.  Here's 
</I>&gt;<i> how I set LD_LIBRARY_PATH: 
</I>&gt;<i> 
</I>&gt;<i> #!/bin/sh
</I>&gt;<i> LD_LIBRARY_PATH=/usr/lib/mono/1.0
</I>&gt;<i> export LD_LIBRARY_PATH
</I>&gt;<i> ...
</I>&gt;<i> 
</I>&gt;<i> I also tried to make another shell script which similarly 
</I>&gt;<i> sets LD_LIBRARY_PATH before mkbundling.  
</I>&gt;<i> 
</I>&gt;<i> In both cases, I'm still getting the same error message 
</I>&gt;<i> reported.  I guess I'll try to verify that the 1.13 
</I>&gt;<i> version is uninstalled.  
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> --Travis
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Robert Jordan 
</I>&gt;<i>     robertj at gmx.net
</I>&gt;<i>     Thu Oct  5 04:05:10 EDT 2006
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Your bundled application seems to load libmono.so of 1.1.13.
</I>&gt;<i> Assure that the old Mono is not in the way (by setting LD_LIBRARY_PATH
</I>&gt;<i> or uninstalling it).
</I>&gt;<i> 
</I>&gt;<i> Robert
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Travis Staloch &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">twostepted at yahoo.com</A>&gt; wrote: Does anyone have any idea what this mono error message means on my Fedora 5 box?
</I>&gt;&gt;<i> Corlib not in sync with this runtime: expected corlib version 49, found 54.
</I>&gt;<i> 
</I>&gt;<i> I see the message when I try running an app I mkbundled on the same box.  
</I>&gt;<i> 
</I>&gt;<i> At one time, I had a previous version of mono installed (1.13 I think) and then reinstalled by compiling from 1.1.17 source.  
</I>&gt;<i> 
</I>&gt;<i> Thanks for any advice,
</I>&gt;<i> 
</I>&gt;<i> --Travis
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Travis Staloch &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">twostepted at yahoo.com</A>&gt; wrote: Robert,
</I>&gt;<i> 
</I>&gt;<i> Thanks again for your help.  mkbundle was able to complete on my linux box, creating an .out file which I renamed to .exe and tried to run it.  I get an error relating to the expected mscorlib version.  Here it is
</I>&gt;&gt;<i> ./MyInstallerBundle.exe
</I>&gt;<i> Corlib not in sync with this runtime: expected corlib version 49, found  54.
</I>&gt;<i> Download a newer corlib or a newer runtime at <A HREF="http://www.go-mono.com/daily.">http://www.go-mono.com/daily.</A>
</I>&gt;<i> 
</I>&gt;<i> Any ideas?
</I>&gt;<i> 
</I>&gt;<i> --Travis
</I>&gt;<i> 
</I>&gt;<i> Robert Jordan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">robertj at gmx.net</A>&gt; wrote: Hi Travis,
</I>&gt;<i> 
</I>&gt;<i> I'm not sure whether any non-critical (critical as in security,
</I>&gt;<i> data loss, etc.) patches will be accepted for the stable (1.1.13)
</I>&gt;<i> branch, but I'll try to get them in.
</I>&gt;<i> 
</I>&gt;<i> Robert
</I>&gt;<i> 
</I>&gt;<i> Travis Staloch wrote:
</I>&gt;&gt;<i> Thanks alot Robert.  I was wondering if I should use that one.  BTW,
</I>&gt;&gt;<i> did you mention when  that version of mkbundle.exe will be applied to
</I>&gt;&gt;<i> the current stable mono branch?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --Travis
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Robert Jordan  wrote: Hi Travis,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That's the same problem like in Windows. Copy mkbundle.exe I sent you
</I>&gt;&gt;<i> in the folder with the assemblies you want to bundle and call it  like
</I>&gt;&gt;<i> this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> mono mkbundle.exe ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Robert
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Travis Staloch wrote:
</I>&gt;&gt;&gt;<i> Hey Robert,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I've been trying to use mkbundle now on my linux FC5 box and seem
</I>&gt;&gt;&gt;<i> to be getting an error with it.  The app itself runs fine on linux
</I>&gt;&gt;&gt;<i> after making some changes to the dllmap entries in 
</I>&gt;&gt;&gt;<i> /usr/local/etc/mono/config.   However when I use try to run the 
</I>&gt;&gt;&gt;<i> mkbundle command below, I get the error listed below.  (The error 
</I>&gt;&gt;&gt;<i> says that it can't seem to find my InstallerCommon.dll which is in 
</I>&gt;&gt;&gt;<i> the same directory  as MyInstaller.exe).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks for any advice.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --Travis
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> mono /usr/local/lib/mono/1.0/mkbundle.exe -z --deps --config-dir
</I>&gt;&gt;&gt;&gt;<i> . MyInstaller.exe
</I>&gt;&gt;&gt;<i> (BTW, I've tried leaving off the '--config-dir .' switch too).
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i> Unhandled Exception: System.IO.FileNotFoundException: 
</I>&gt;&gt;&gt;<i> InstallerCommon, Version=1.0.2336.677, Culture=neutral : 
</I>&gt;&gt;&gt;<i> InstallerCommon, Version=1.0.2336.677, Culture=neutral at &lt;0x00000&gt;
</I>&gt;&gt;&gt;<i>  at (wrapper managed-to-native) System.AppDomain:LoadAssembly 
</I>&gt;&gt;&gt;<i> (string,System.Security.Policy.Evidence,bool) at 
</I>&gt;&gt;&gt;<i> System.AppDomain.Load (System.Reflection.AssemblyName assemblyRef, 
</I>&gt;&gt;&gt;<i> System.Security.Policy.Evidence assemblySecurity) [0x00000] at 
</I>&gt;&gt;&gt;<i> (wrapper remoting-invoke-with-check) System.AppDomain:Load 
</I>&gt;&gt;&gt;<i>  (System.Reflection.AssemblyName,System.Security.Policy.Evidence) at
</I>&gt;&gt;&gt;<i>  System.AppDomain.Load (System.Reflection.AssemblyName assemblyRef)
</I>&gt;&gt;&gt;<i>  [0x00000] at (wrapper remoting-invoke-with-check) 
</I>&gt;&gt;&gt;<i> System.AppDomain:Load (System.Reflection.AssemblyName) at 
</I>&gt;&gt;&gt;<i> System.Reflection.Assembly.Load (System.Reflection.AssemblyName 
</I>&gt;&gt;&gt;<i> assemblyRef)  [0x00000] at MakeBundle.QueueAssembly 
</I>&gt;&gt;&gt;<i> (System.Collections.ArrayList files, System.String codebase) 
</I>&gt;&gt;&gt;<i> [0x00000] at MakeBundle.Main (System.String[] args) [0x00000]
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Robert Jordan  wrote: Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If you bundle you app on a Linux 2.4 system, the binary should work
</I>&gt;&gt;&gt;<i>  an all systems.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The problem on Linux are the native dependencies (GLib, GTK) that
</I>&gt;&gt;&gt;<i> you have to deliver. I can't help you with that, because I never
</I>&gt;&gt;&gt;<i> did it myself.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> You may  try to put them in the private &quot;lib&quot; dir of your
</I>&gt;&gt;&gt;<i> application and change LD_LIBRARY_PATH from inside of a launcher
</I>&gt;&gt;&gt;<i> script to point to this lib dir.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Robert
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --------------------------------- Get your own web address for just
</I>&gt;&gt;&gt;<i>  $1.99/1st yr. We'll help. Yahoo! Small Business.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i>  --------------------------------- Talk is cheap. Use Yahoo!
</I>&gt;&gt;<i> Messenger to make PC-to-Phone calls.  Great rates starting at 1&#239;&#191;&#189;/min.
</I>&gt;<i> 
</I>&gt;<i>     
</I>&gt;<i> 
</I>&gt;<i> ---------------------------------
</I>&gt;<i> Do you Yahoo!?
</I>&gt;<i>   Get on board. You're invited to try the new Yahoo! Mail.
</I>&gt;<i>     
</I>&gt;<i> 
</I>&gt;<i> ---------------------------------
</I>&gt;<i>  All-new Yahoo! Mail - Fire up a more powerful email and get things done faster.
</I>&gt;<i> 
</I>&gt;<i>  		
</I>&gt;<i> ---------------------------------
</I>&gt;<i> Get your email and more, right on the  new Yahoo.com 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032895.html">[Mono-list] mkbundle on windows
</A></li>
	<LI>Next message: <A HREF="032900.html">[Mono-list] Portability Layer and MonoDevelop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32896">[ date ]</a>
              <a href="thread.html#32896">[ thread ]</a>
              <a href="subject.html#32896">[ subject ]</a>
              <a href="author.html#32896">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
