<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] io-layer naming issues on OSX.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20io-layer%20naming%20issues%20on%20OSX.&In-Reply-To=419D06A8-7D7F-4374-B9EC-E2345082E6A7%40web.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033139.html">
   <LINK REL="Next"  HREF="033142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] io-layer naming issues on OSX.</H1>
    <B>Andreas F&#228;rber</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20io-layer%20naming%20issues%20on%20OSX.&In-Reply-To=419D06A8-7D7F-4374-B9EC-E2345082E6A7%40web.de"
       TITLE="[Mono-list] io-layer naming issues on OSX.">andreas.faerber at web.de
       </A><BR>
    <I>Tue Oct 24 12:24:33 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="033139.html">[Mono-list] Resource Question
</A></li>
        <LI>Next message: <A HREF="033142.html">[Mono-list] io-layer naming issues on OSX.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33140">[ date ]</a>
              <a href="thread.html#33140">[ thread ]</a>
              <a href="subject.html#33140">[ subject ]</a>
              <a href="author.html#33140">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;<i> Am 17.10.2006 um 23:52 schrieb Robert Jordan:
</I>&gt;<i>
</I>&gt;&gt;<i> That's rather a cookbook than a self-containing test case ;-)
</I>&gt;&gt;<i> Please provide the complete Xcode project.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I tried an own Cocoa app and a Cocoa bundle. Both were working,
</I>&gt;&gt;<i> the latter with the environ 'trick'. So before starting to rename
</I>&gt;&gt;<i> those symbols, I'd like to be convinced that it can't be fixed by
</I>&gt;&gt;<i> removing/adding some smart linker option.
</I>&gt;<i>
</I>&gt;<i> Attached is a new simplified Xcode project, compiled on PowerPC for  
</I>&gt;<i> ppc, which works on ppc but not on i386 when re-compiled on Intel  
</I>&gt;<i> for i386. Installation instructions still apply but otherwise &quot;self- 
</I>&gt;<i> contained&quot; and hopefully self-explaining!
</I>&gt;<i>
</I>&gt;<i> Btw, as a side effect changing the linker option indeed resulted in  
</I>&gt;<i> an additional warning for _GetCurrentThread appearing.
</I>
So far I haven't received any feedback on the test case I submitted...

I have done the following in the meantime:
- manually applied Allan Hsu's patch to allow compiling on Intel OS X  
w/ Xcode 2.4 (compiled, but test still failed)
- manually applied your symbols.h etc. patch - compiled, but test  
still fails!

(didn't find a way to apply the patch automagically; svn diff only  
creates one and svn help wasn't helpful)

I re-ran autogen.sh, then make, then make install; I removed the  
Mono.framework reference in the Xcode project and replaced it with a  
reference to libmono.dylib in the new Mono. The plugin was cleanly  
compiled for each Mono. And I tried a second time using make clean,  
make, make install.

So all in all until now the patches and suggestions have helped build  
Mono at all on Intel, improve the quality of embedding Mono on OS X  
by eliminating the _environ error and the duplicate symbols warnings  
- but unfortunately my plugin's mono_thread_attach assertion failure  
persists.

Your symbols.h patch did appear to rename the functions via #defines,  
no? [what did your remark above about starting to rename mean then?]  
It should no longer be a name clash now, or could it still be? If my  
test case for some reason does work on your system then I'd really  
like to hear about it! Maybe I missed something.

Andreas
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033139.html">[Mono-list] Resource Question
</A></li>
	<LI>Next message: <A HREF="033142.html">[Mono-list] io-layer naming issues on OSX.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33140">[ date ]</a>
              <a href="thread.html#33140">[ thread ]</a>
              <a href="subject.html#33140">[ subject ]</a>
              <a href="author.html#33140">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
