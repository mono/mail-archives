<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Enhancements to type-reflector
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jonpryor%40vt.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="008047.html">
   <LINK REL="Next"  HREF="008054.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Enhancements to type-reflector
   </H1>
    <B>Jonathan Pryor
    </B> 
    <A HREF="mailto:jonpryor%40vt.edu"
       TITLE="[Mono-list] Enhancements to type-reflector">jonpryor@vt.edu
       </A><BR>
    <I>02 Sep 2002 11:36:45 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="008047.html">[Mono-list] Enhancements to type-reflector
</A></li>
        <LI> Next message: <A HREF="008054.html">[Mono-list] Enhancements to type-reflector
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8053">[ date ]</a>
              <a href="thread.html#8053">[ thread ]</a>
              <a href="subject.html#8053">[ subject ]</a>
              <a href="author.html#8053">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Incredible.  I put the source into CVS last night, and I'm already
getting patches. :-)

To answer your questions, it both compiles and works under Mono.  Not
always as well as I'd like: --output=reflection doesn't work under Mono,
and other parts cause exceptions under Mono (grep for ShowMonoBroken and
MONO_BROKEN in the source).  However, it works reasonably well under
Mono at the moment, and I've found it useful for uncovering Mono runtime
(which I need to enter into bugzilla, such as the behavior of the &quot;x&quot;
format specifier on enumerations, which doesn't work reliably).

However, regarding your patch, I don't like it long-term, mostly as it
special-cases a lot of Attribute classes.  Ideally, I would use
reflection on the attribute, and display the values of all public
properties and fields, similar in spirit to:

	[MyAttribute(Foo=&quot;a&quot;, Bar=&quot;b&quot;, Baz=42, Qux=MyEnum.Quux)]

The downside is that this wouldn't necessarily be valid C# source code. 
Some properties are read-only, as their value is set by positional
parameters.  Other constructor values might not be available through
properties, so these would be missing.

However, the above mechanism would allow for all Properties to be
displayed, and presents enough information to be useful.  It is also
generic, and doesn't require special casing for each possible attribute
type.

There are two problems with this solution, however: (1) it isn't written
yet (on my todo list), and (2) it would require reflection, the same
uses as --output=reflection.  This doesn't work as desired under Mono at
present, but I hope that it will work properly soon.

Thanks,
 - Jon

On Mon, 2002-09-02 at 10:07, Steinar Herland wrote:
&gt;<i> I made some changes to the
</I>&gt;<i> mcs/tools/type-reflector/CSharpTypeDisplayer.cs (only tested using
</I>&gt;<i> MS.NET)
</I>&gt;<i> 
</I>&gt;<i> - Does this also compile / work on mono?
</I>&gt;<i> - Sorry - I haven't figured out (yet) how to do a diff against the cvs.
</I>&gt;<i> If this change is ok, can someone please commit the changes I made?
</I>&gt;<i> 
</I>&gt;<i> After the changes type-reflector.exe prints more complete attribute
</I>&gt;<i> constructors:
</I>&gt;<i> 
</I>&gt;<i> $ type-reflector.exe --output=c# DataColumn
</I>&gt;<i> 
</I>&gt;<i> returns:
</I>&gt;<i> 
</I>&gt;<i> [System.ComponentModel.DefaultPropertyAttribute(&quot;ColumnName&quot;)]
</I>&gt;<i> [System.ComponentModel.ToolboxItemAttribute(&quot;&quot;)]
</I>&gt;<i> [System.Reflection.DefaultMemberAttribute(&quot;Item&quot;)]
</I>&gt;<i> [System.ComponentModel.DesignTimeVisibleAttribute]
</I>&gt;<i> [System.ComponentModel.EditorAttribute(&quot;Microsoft.VSDesigner.Data.Design
</I>&gt;<i> .DataColumnEditor&quot;, &quot;System.Drawing.Design.UITypeEditor&quot;)]
</I>&gt;<i> [System.ComponentModel.DesignerAttribute(&quot;System.Windows.Forms.Design.Co
</I>&gt;<i> mponentDocumentDesigner&quot;, &quot;System.ComponentModel.Design.IRootDesigner&quot;)]
</I>&gt;<i> [System.ComponentModel.DesignerCategoryAttribute(&quot;Component&quot;)]
</I>&gt;<i> [System.ComponentModel.TypeConverterAttribute(&quot;System.ComponentModel.Com
</I>&gt;<i> ponentConverter&quot;)]
</I>&gt;<i> class      System.Data.DataColumn
</I>&gt;<i>   {
</I>&gt;<i>   }
</I>&gt;<i>  .
</I>&gt;<i> .
</I>&gt;<i>  .
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Steinar
</I>&gt;<i> 
</I>




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="008047.html">[Mono-list] Enhancements to type-reflector
</A></li>
	<LI> Next message: <A HREF="008054.html">[Mono-list] Enhancements to type-reflector
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8053">[ date ]</a>
              <a href="thread.html#8053">[ thread ]</a>
              <a href="subject.html#8053">[ subject ]</a>
              <a href="author.html#8053">[ author ]</a>
         </LI>
       </UL>
</body></html>
