<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Extending the singleton pattern in C#
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gaurav.vaish%40amsoft.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="008238.html">
   <LINK REL="Next"  HREF="008240.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Extending the singleton pattern in C#
   </H1>
    <B>Gaurav Vaish
    </B> 
    <A HREF="mailto:gaurav.vaish%40amsoft.net"
       TITLE="[Mono-list] Extending the singleton pattern in C#">gaurav.vaish@amsoft.net
       </A><BR>
    <I>Wed, 11 Sep 2002 16:58:22 +0530</I>
    <P><UL>
        <LI> Previous message: <A HREF="008238.html">[Mono-list] Extending the singleton pattern in C#
</A></li>
        <LI> Next message: <A HREF="008240.html">[Mono-list] NAnt source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8239">[ date ]</a>
              <a href="thread.html#8239">[ thread ]</a>
              <a href="subject.html#8239">[ subject ]</a>
              <a href="author.html#8239">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Hello Gaurav,
</I>
Hi there,

    Let me see if I am able to do a little more for you.

&gt;<i> 2.. I meant !extensible in the way that the current solution only provides
</I>&gt;<i> one default ctor, so one user cannot instantiate the Singleton instance
</I>&gt;<i> with his/her defined data.
</I>&gt;<i> I'm looking for smth like:
</I>&gt;<i> public static readonly Instance = new Singleton
</I>&gt;<i> (user-defined data extracted from custom attributes).
</I>&gt;<i> Hope you understand now my &quot;extensibility&quot; problem :-)
</I>
public class Singleton
{
    private static Singleton instance = null;

    private property type1 prop1;
    private property type2 prop2;

    private Singleton()
    {
        // do something. Throw an exception!
    }

    private Singleton(type1 one, type2 two)
    {
        this.prop1 = one;
        this.prop1 = two;
        // do something with prop1 and prop2
        // throw an exception if necessary.
    }

    public static Singleton GetSingleton(type1 one, type2 two)
    {
        if(instance == null)
            instance = new Singleton(one, two);
        return instance;
    }
}

    The parameters that you were passing to &quot;Attribute&quot; can now be passed to
the method.
    Well, I don't think you can demand more than this, or can you? ;-)

&gt;<i> 3.. Your solution does not satisfy me. Yes, I'm looking for more (2).
</I>
    Let me know if you are still hungry. :-)


Happy hacking,
Gaurav
<A HREF="http://mastergaurav.virtualave.net/iitk">http://mastergaurav.virtualave.net/iitk</A>
----------------------------
&gt;<i>
</I>&gt;<i> Best.
</I>&gt;<i>
</I>&gt;<i> Alexandru Pruteanu
</I>&gt;<i> Faculty of Computer Science
</I>&gt;<i> Iasi, Romania
</I>&gt;<i> <A HREF="http://students.infoiasi.ro/~orion">http://students.infoiasi.ro/~orion</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; sealed class Singleton
</I>&gt;<i> &gt; {
</I>&gt;<i> &gt; public static readonly Instance = new Singleton ();
</I>&gt;<i> &gt; private Singleton () {...}
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt; class Test {Singleton obj = Singleton.Instance;}
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; However, this technique does not seem to be so extensible, since
</I>&gt;<i> &gt; there's
</I>&gt;<i>
</I>&gt;<i>     What do you mean by &quot;extensible&quot;? It's not quite clear here.
</I>&gt;<i>
</I>&gt;<i> &gt; no way to overload the private constructor (well, yes, but useless).
</I>&gt;<i>
</I>&gt;<i>     Why useless?
</I>&gt;<i>     It's simpler than using attributes:
</I>&gt;<i>
</I>&gt;<i> class Singleton
</I>&gt;<i> {
</I>&gt;<i>     public static type1 prop1;
</I>&gt;<i>     public static type2 prop2;
</I>&gt;<i>
</I>&gt;<i>     private static Singleton instance = null;
</I>&gt;<i>
</I>&gt;<i>     private Singleton()
</I>&gt;<i>     {
</I>&gt;<i>         // do something with prop1 and prop2.
</I>&gt;<i>     }
</I>&gt;<i>
</I>&gt;<i>     public static Singleton Instance
</I>&gt;<i>     {
</I>&gt;<i>         get
</I>&gt;<i>         {
</I>&gt;<i>             if(instance == null)
</I>&gt;<i>             {
</I>&gt;<i>                 instance = new Singleton();
</I>&gt;<i>             }
</I>&gt;<i>             return instance;
</I>&gt;<i>         }
</I>&gt;<i>     }
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     I think this should satisfy you. Or are you looking for something
</I>&gt;<i> more?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Happy hacking,
</I>&gt;<i> Gaurav
</I>&gt;<i> <A HREF="http://mastergaurav.virtualave.net/iitk">http://mastergaurav.virtualave.net/iitk</A>
</I>&gt;<i> ----------------------------
</I>&gt;<i>
</I>&gt;<i> &gt; One solution could be provided using attributes, e.g.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; class FooAttribute : Attribute
</I>&gt;<i> &gt; {
</I>&gt;<i> &gt; // whatever info I need
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt; and later on,
</I>&gt;<i> &gt; class Test
</I>&gt;<i> &gt; {
</I>&gt;<i> &gt; [Foo (...)]
</I>&gt;<i> &gt; Singleton obj;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; public Test ()
</I>&gt;<i> &gt; {
</I>&gt;<i> &gt; obj = Singleton.Instance;
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; My question is: how can I access (or transfer) the Foo declared data
</I>&gt;<i> &gt; in my
</I>&gt;<i> Singleton
</I>&gt;<i> &gt; instance constructor? If that's not possible, do you have any other
</I>&gt;<i> suggestions
</I>&gt;<i> &gt; on extending my singleton? There might be other solutions, but I don't
</I>&gt;<i> catch'em.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Best,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Alexandru Pruteanu
</I>&gt;<i> &gt; Faculty of Computer Science
</I>&gt;<i> &gt; Iasi, Romania
</I>&gt;<i> &gt; <A HREF="http://students.infoiasi.ro/~orion">http://students.infoiasi.ro/~orion</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-list maillist  -  <A HREF="mailto:Mono-list@ximian.com">Mono-list@ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://students.infoiasi.ro/~orion">http://students.infoiasi.ro/~orion</A>
</I>&gt;<i>
</I>&gt;<i>
</I>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="008238.html">[Mono-list] Extending the singleton pattern in C#
</A></li>
	<LI> Next message: <A HREF="008240.html">[Mono-list] NAnt source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8239">[ date ]</a>
              <a href="thread.html#8239">[ thread ]</a>
              <a href="subject.html#8239">[ subject ]</a>
              <a href="author.html#8239">[ author ]</a>
         </LI>
       </UL>
</body></html>
