<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] ICodeCompiler.CompileAssemblyFromSourceBatch failure
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20ICodeCompiler.CompileAssemblyFromSourceBatch%20failure&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038912.html">
   <LINK REL="Next"  HREF="038865.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] ICodeCompiler.CompileAssemblyFromSourceBatch failure</H1>
    <B>Carl Cerecke</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20ICodeCompiler.CompileAssemblyFromSourceBatch%20failure&In-Reply-To="
       TITLE="[Mono-list] ICodeCompiler.CompileAssemblyFromSourceBatch failure">carl.cerecke at telogis.com
       </A><BR>
    <I>Tue Jun 17 21:40:21 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="038912.html">[Mono-list] Mono Licensing for Dedicated/Embedded Devices
</A></li>
        <LI>Next message: <A HREF="038865.html">[Mono-list] ICodeCompiler.CompileAssemblyFromSourceBatch failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38864">[ date ]</a>
              <a href="thread.html#38864">[ thread ]</a>
              <a href="subject.html#38864">[ subject ]</a>
              <a href="author.html#38864">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have an unusual failure when calling
ICodeCompiler.CompileAssemblyFromSourceBatch. The compile works
correctly when called from a mono .exe, but does not when the same
.exe is called via the mono embedded calls.

This works on the command-line:
&gt;<i> mono mtest.exe
</I>
This code (using mono embedded libs) fails (never gets to printf):
int main(int argc, char *argv[]) {

    domain = mono_jit_init(&quot;mtest.exe&quot;);
    assembly = mono_domain_assembly_open (domain, &quot;mtest.exe&quot;);
    mono_jit_exec(domain, assembly, argc, argv);
    printf(&quot;Ran mtest.exe\n&quot;);

The error message is:
Directory '/tmp/178d00f6' not found.

The successful CLI execution yeilds the strace (different run,
different tmpfile):
...
stat64(&quot;/tmp/437a94b0&quot;, 0xbf84c06c)     = -1 ENOENT (No such file or directory)
lstat64(&quot;/tmp/437a94b0&quot;, 0xbf84c06c)    = -1 ENOENT (No such file or directory)
access(&quot;/tmp&quot;, F_OK)                    = 0
mkdir(&quot;/tmp/437a94b0&quot;, 0700)            = 0
stat64(&quot;/tmp/437a94b0/4f5bba7d.tmp&quot;, 0xbf84bfc4) = -1 ENOENT (No such
file or directory)
lstat64(&quot;/tmp/437a94b0/4f5bba7d.tmp&quot;, 0xbf84bfc4) = -1 ENOENT (No such
file or directory)
access(&quot;/tmp/437a94b0&quot;, F_OK)           = 0
stat64(&quot;/tmp/437a94b0&quot;, {st_mode=S_IFDIR|0700, st_size=4096, ...}) = 0
lstat64(&quot;/tmp/437a94b0&quot;, {st_mode=S_IFDIR|0700, st_size=4096, ...}) = 0
stat64(&quot;/tmp/437a94b0/4f5bba7d.tmp&quot;, 0xbf84bfb0) = -1 ENOENT (No such
file or directory)
lstat64(&quot;/tmp/437a94b0/4f5bba7d.tmp&quot;, 0xbf84bfb0) = -1 ENOENT (No such
file or directory)
access(&quot;/tmp/437a94b0&quot;, F_OK)           = 0
open(&quot;/tmp/437a94b0/4f5bba7d.tmp&quot;, O_RDWR|O_CREAT|O_EXCL|O_LARGEFILE, 0644) = 16
...

but the strace from running the failed code never does anything with
/tmp after the access() sycall.

The code that does the CompileAssemblyFromSourceBatch() is in a .dll
that mtest.exe loads.

What am I missing in the init of mono that prevents it from compiling
source on the fly? Everything else that I've tried with embedded mono
seems to work OK.

Cheers,
Carl
-- 
Carl Cerecke, PhD
Senior Software Engineer

Telogis, Intelligent Location Technology
Level 2, Building 2
1 Show Place
Addington
CHRISTCHURCH
New Zealand

Phone: +64 03 339 2825 ext 208
Fax: +64 03 339 4537
Email: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">carl.cerecke at telogis.com</A>

This message (including any attachments) contains confidential
information intended for a specific individual and purpose, and is
protected by law. If you are not the intended recipient, you should
delete this message and are hereby notified that any disclosure,
copying, or distribution of this message, or the taking of any action
based on it, is strictly prohibited.
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038912.html">[Mono-list] Mono Licensing for Dedicated/Embedded Devices
</A></li>
	<LI>Next message: <A HREF="038865.html">[Mono-list] ICodeCompiler.CompileAssemblyFromSourceBatch failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38864">[ date ]</a>
              <a href="thread.html#38864">[ thread ]</a>
              <a href="subject.html#38864">[ subject ]</a>
              <a href="author.html#38864">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
