<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] ICodeCompiler.CompileAssemblyFromSourceBatch failure
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20ICodeCompiler.CompileAssemblyFromSourceBatch%20failure&In-Reply-To=g3aek3%24364%241%40ger.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038866.html">
   <LINK REL="Next"  HREF="038897.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] ICodeCompiler.CompileAssemblyFromSourceBatch failure</H1>
    <B>Carl Cerecke</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20ICodeCompiler.CompileAssemblyFromSourceBatch%20failure&In-Reply-To=g3aek3%24364%241%40ger.gmane.org"
       TITLE="[Mono-list] ICodeCompiler.CompileAssemblyFromSourceBatch failure">carl.cerecke at telogis.com
       </A><BR>
    <I>Wed Jun 18 16:50:28 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="038866.html">[Mono-list] ICodeCompiler.CompileAssemblyFromSourceBatch failure
</A></li>
        <LI>Next message: <A HREF="038897.html">[Mono-list]  Mono VM security (like SecurityManager in java)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38870">[ date ]</a>
              <a href="thread.html#38870">[ thread ]</a>
              <a href="subject.html#38870">[ subject ]</a>
              <a href="author.html#38870">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Robert! All working now.

I had to include mono-config.h like this:

extern &quot;C&quot; {
#include &lt;mono/metadata/mono-config.h&gt;
}

Cheers,
Carl.

On Wed, Jun 18, 2008 at 7:48 PM, Robert Jordan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">robertj at gmx.net</A>&gt; wrote:
&gt;<i> Carl Cerecke wrote:
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have an unusual failure when calling
</I>&gt;&gt;<i> ICodeCompiler.CompileAssemblyFromSourceBatch. The compile works
</I>&gt;&gt;<i> correctly when called from a mono .exe, but does not when the same
</I>&gt;&gt;<i> .exe is called via the mono embedded calls.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This works on the command-line:
</I>&gt;&gt;&gt;<i> mono mtest.exe
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This code (using mono embedded libs) fails (never gets to printf):
</I>&gt;&gt;<i> int main(int argc, char *argv[]) {
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     domain = mono_jit_init(&quot;mtest.exe&quot;);
</I>&gt;<i>
</I>&gt;<i> You must call this after mono_jit_init ():
</I>&gt;<i>
</I>&gt;<i> mono_config_parse (NULL);
</I>&gt;<i>
</I>&gt;&gt;<i>     assembly = mono_domain_assembly_open (domain, &quot;mtest.exe&quot;);
</I>&gt;&gt;<i>     mono_jit_exec(domain, assembly, argc, argv);
</I>&gt;&gt;<i>     printf(&quot;Ran mtest.exe\n&quot;);
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Robert
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>


-- 
Carl Cerecke, PhD
Senior Software Engineer

Telogis, Intelligent Location Technology
Level 2, Building 2
1 Show Place
Addington
CHRISTCHURCH
New Zealand

Phone: +64 03 339 2825 ext 208
Fax: +64 03 339 4537
Email: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">carl.cerecke at telogis.com</A>

This message (including any attachments) contains confidential
information intended for a specific individual and purpose, and is
protected by law.  If you are not the intended recipient, you should
delete this message and are hereby notified that any disclosure,
copying, or distribution of this message, or the taking of any action
based on it, is strictly prohibited.
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038866.html">[Mono-list] ICodeCompiler.CompileAssemblyFromSourceBatch failure
</A></li>
	<LI>Next message: <A HREF="038897.html">[Mono-list]  Mono VM security (like SecurityManager in java)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38870">[ date ]</a>
              <a href="thread.html#38870">[ thread ]</a>
              <a href="subject.html#38870">[ subject ]</a>
              <a href="author.html#38870">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
