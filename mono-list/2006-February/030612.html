<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] XmlSchemaSet Problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20XmlSchemaSet%20Problem&In-Reply-To=43E868F6.1040209%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030611.html">
   <LINK REL="Next"  HREF="030613.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] XmlSchemaSet Problem</H1>
    <B>Kent Boogaart</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20XmlSchemaSet%20Problem&In-Reply-To=43E868F6.1040209%40ximian.com"
       TITLE="[Mono-list] XmlSchemaSet Problem">kentcb at internode.on.net
       </A><BR>
    <I>Tue Feb  7 05:12:23 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="030611.html">[Mono-list] XmlSchemaSet Problem
</A></li>
        <LI>Next message: <A HREF="030613.html">[Mono-list] Using Jasper Reports with the help of IKVM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30612">[ date ]</a>
              <a href="thread.html#30612">[ thread ]</a>
              <a href="subject.html#30612">[ subject ]</a>
              <a href="author.html#30612">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Atsushi,

Thanks for the quick reply. I have logged the bug (#77489) as requested.

Thanks,
Kent


-----Original Message-----
From: Atsushi Eno [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">atsushi at ximian.com</A>] 
Sent: Tuesday, 7 February 2006 8:02 PM
To: Kent Boogaart
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list at lists.ximian.com</A>
Subject: Re: [Mono-list] XmlSchemaSet Problem

Hi,

Mhm, yes it's not kind of usage I've expected. I'll take care of
this bug. Can you please file this bug on bugzilla.ximian.com ?

Current codebase is based on old XmlSchema.Compile(), so it is
likely to happen that mono fails to compile it (and MS
implementation should be correct there).

Thanks,
Atsushi Eno


Kent Boogaart wrote:
&gt;<i> Hi all, 
</I>&gt;<i> 
</I>&gt;<i> I've come across a problem with the XmlSchemaSet that presents itself on
</I>&gt;<i> mono, but not on MS .NET. Essentially, adding multiple schemas to the set
</I>&gt;<i> does not permit them to &quot;see eachother&quot; without imports / includes. I
</I>&gt;<i> believe this is a bug in mono, since the documentation for XmlSchemaSet
</I>&gt;<i> states:
</I>&gt;<i> 
</I>&gt;<i> &quot;Compiled schemas generate a single logical schema, a &quot;set&quot; of schemas.
</I>Any
&gt;<i> imported schemas within a schema that are added to the set are directly
</I>&gt;<i> added to the set themselves. This means that all types are available to
</I>all
&gt;<i> schemas.&quot;
</I>&gt;<i> 
</I>&gt;<i> Here is a simple repro for the problem. Works fine on MS.NET but yields an
</I>&gt;<i> error on mono:
</I>&gt;<i> 
</I>&gt;<i> -------------------------------------------------- 
</I>&gt;<i> using System; 
</I>&gt;<i> using System.Collections.Generic; 
</I>&gt;<i> using System.IO; 
</I>&gt;<i> using System.Text; 
</I>&gt;<i> using System.Xml; 
</I>&gt;<i> using System.Xml.Schema; 
</I>&gt;<i> 
</I>&gt;<i> namespace SchemaRepro 
</I>&gt;<i> { 
</I>&gt;<i>         class Program 
</I>&gt;<i>         { 
</I>&gt;<i>                 private const string schema1 = @&quot;&lt;?xml version=&quot;&quot;1.0&quot;&quot;
</I>&gt;<i> encoding=&quot;&quot;utf-8&quot;&quot; ?&gt; 
</I>&gt;<i> &lt;xsd:schema id=&quot;&quot;Base.Schema&quot;&quot; elementFormDefault=&quot;&quot;qualified&quot;&quot;
</I>&gt;<i> xmlns:xsd=&quot;&quot;<A HREF="http://www.w3.org/2001/XMLSchema&quot;&quot;">http://www.w3.org/2001/XMLSchema&quot;&quot;</A>&gt; 
</I>&gt;<i>         &lt;xsd:complexType name=&quot;&quot;itemBase&quot;&quot; abstract=&quot;&quot;true&quot;&quot;&gt; 
</I>&gt;<i>                 &lt;xsd:attribute name=&quot;&quot;id&quot;&quot; type=&quot;&quot;xsd:string&quot;&quot;
</I>&gt;<i> use=&quot;&quot;required&quot;&quot;/&gt; 
</I>&gt;<i>                 &lt;xsd:attribute name=&quot;&quot;type&quot;&quot; type=&quot;&quot;xsd:string&quot;&quot;
</I>&gt;<i> use=&quot;&quot;required&quot;&quot;/&gt; 
</I>&gt;<i>         &lt;/xsd:complexType&gt; 
</I>&gt;<i> &lt;/xsd:schema&gt; 
</I>&gt;<i> &quot;; 
</I>&gt;<i> 
</I>&gt;<i>                 private const string schema2 = @&quot;&lt;?xml version=&quot;&quot;1.0&quot;&quot;
</I>&gt;<i> encoding=&quot;&quot;utf-8&quot;&quot; ?&gt; 
</I>&gt;<i> &lt;xsd:schema id=&quot;&quot;Sub.Schema&quot;&quot; elementFormDefault=&quot;&quot;qualified&quot;&quot;
</I>&gt;<i> xmlns:xsd=&quot;&quot;<A HREF="http://www.w3.org/2001/XMLSchema&quot;&quot;">http://www.w3.org/2001/XMLSchema&quot;&quot;</A>&gt; 
</I>&gt;<i>         &lt;xsd:complexType name=&quot;&quot;item&quot;&quot;&gt; 
</I>&gt;<i>                 &lt;xsd:complexContent&gt; 
</I>&gt;<i>                         &lt;xsd:extension base=&quot;&quot;itemBase&quot;&quot;&gt; 
</I>&gt;<i>                                 &lt;xsd:attribute name=&quot;&quot;itemName&quot;&quot;
</I>&gt;<i> type=&quot;&quot;xsd:string&quot;&quot; use=&quot;&quot;required&quot;&quot;/&gt; 
</I>&gt;<i>                         &lt;/xsd:extension&gt; 
</I>&gt;<i>                 &lt;/xsd:complexContent&gt; 
</I>&gt;<i>         &lt;/xsd:complexType&gt; 
</I>&gt;<i> &lt;/xsd:schema&gt; 
</I>&gt;<i> &quot;; 
</I>&gt;<i> 
</I>&gt;<i>                 static void Main(string[] args) 
</I>&gt;<i>                 { 
</I>&gt;<i>                         XmlSchemaSet schemas = new XmlSchemaSet(); 
</I>&gt;<i>                         schemas.Add(XmlSchema.Read(new
</I>&gt;<i> StringReader(schema1), null)); 
</I>&gt;<i>                         schemas.Add(XmlSchema.Read(new
</I>&gt;<i> StringReader(schema2), null)); 
</I>&gt;<i>                         schemas.ValidationEventHandler +=
</I>&gt;<i> schemas_ValidationEventHandler; 
</I>&gt;<i>                         schemas.Compile(); 
</I>&gt;<i>                         Console.WriteLine(); 
</I>&gt;<i>                         Console.WriteLine(&quot;Press any key&quot;); 
</I>&gt;<i>                         Console.ReadKey(); 
</I>&gt;<i>                 } 
</I>&gt;<i> 
</I>&gt;<i>                 static void schemas_ValidationEventHandler(object sender,
</I>&gt;<i> ValidationEventArgs e) 
</I>&gt;<i>                 { 
</I>&gt;<i>                         Console.WriteLine(&quot;Message: {0}&quot;, e.Message); 
</I>&gt;<i>                         Console.WriteLine(&quot;Severity: {0}&quot;, e.Severity); 
</I>&gt;<i>                         Console.WriteLine(&quot;Stack Trace: {0}&quot;,
</I>&gt;<i> e.Exception.StackTrace); 
</I>&gt;<i>                 } 
</I>&gt;<i>         } 
</I>&gt;<i> } 
</I>&gt;<i> -------------------------------------------------- 
</I>&gt;<i> 
</I>&gt;<i> As you can see, schema2 attempts to extend a type defined in schema1 but
</I>is
&gt;<i> unable to see that type when running on mono.
</I>&gt;<i> 
</I>&gt;<i> Thanks for any help, 
</I>&gt;<i> Kent 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> 
</I>
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030611.html">[Mono-list] XmlSchemaSet Problem
</A></li>
	<LI>Next message: <A HREF="030613.html">[Mono-list] Using Jasper Reports with the help of IKVM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30612">[ date ]</a>
              <a href="thread.html#30612">[ thread ]</a>
              <a href="subject.html#30612">[ subject ]</a>
              <a href="author.html#30612">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
