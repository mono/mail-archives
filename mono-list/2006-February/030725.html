<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] DataGrid difference to .NET
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20DataGrid%20difference%20to%20.NET&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030736.html">
   <LINK REL="Next"  HREF="030732.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] DataGrid difference to .NET</H1>
    <B>winzen at online.de</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20DataGrid%20difference%20to%20.NET&In-Reply-To="
       TITLE="[Mono-list] DataGrid difference to .NET">winzen at online.de
       </A><BR>
    <I>Mon Feb 20 09:59:29 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="030736.html">[Mono-list] stacktrace and path.combine
</A></li>
        <LI>Next message: <A HREF="030732.html">[Mono-list] DataGrid difference to .NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30725">[ date ]</a>
              <a href="thread.html#30725">[ thread ]</a>
              <a href="subject.html#30725">[ subject ]</a>
              <a href="author.html#30725">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everybody,

i'm using DataGrids with dynamic DataTables in an ASP.NET application. I encountered a small problem when DataGrids show different behaviour in Mono compared to MS.NET (bug on MS side?). When i bind a DataTable with strange column names (including special characters like &quot;.&quot;) to a DataGrid Mono throws an exception and MS.NET does not.

Here is a small NUnit test to demonstrate the problem:

[Test]
public void DataGridWithStrangeColumnNames() {
  DataTable testTable = createTable(new string[] {&quot;test / 5x&quot;,
    &quot;eps.mul(%)&quot;, &quot;yearX&quot;, &quot;jahr_2000&quot;});
  testTable.Rows.Add(new object[] {&quot;EPS adj.test&quot;, &quot;47&quot;, &quot;0&quot;, &quot;a&quot;});
  DataGrid grid = new DataGrid();
  grid.AutoGenerateColumns = true;
  grid.DataSource = testTable;
  grid.DataBind();
}

private DataTable createTable(string[] fields) {
  DataTable table = new DataTable();
  foreach (string column in fields) {
    table.Columns.Add(column);
  }
  return table;
}

CU
Jochen Winzen

P.S. This is the error message:

OS Version: Unix 2.6.8.2    Mono Version: 1.1.4322.2032

.......................................F.........................
Tests run: 64, Failures: 1, Not run: 0, Time: 4.182289 seconds

Failures:
1) TestFacade.DataGridWithStrangeColumnNames : System.Web.HttpException : Property eps not found in System.Data.DataRowView
in &lt;0x0015a&gt; System.Web.UI.DataBinder:GetPropertyValue (System.Object container, System.String propName)
in &lt;0x000ac&gt; System.Web.UI.DataBinder:Eval (System.Object container, System.String expression)
in &lt;0x0005b&gt; System.Web.UI.WebControls.BoundColumn:GetValueFromItem (System.Web.UI.WebControls.DataGridItem item)
in &lt;0x0006e&gt; System.Web.UI.WebControls.BoundColumn:ItemDataBinding (System.Object sender, System.EventArgs e)
in (wrapper delegate-invoke) System.MulticastDelegate:invoke_void_object_EventArgs (object,System.EventArgs)
in &lt;0x00117&gt; System.Web.UI.Control:OnDataBinding (System.EventArgs e)
in &lt;0x00013&gt; System.Web.UI.Control:DataBind ()
in &lt;0x0005a&gt; System.Web.UI.Control:DataBindChildren ()
in &lt;0x0001e&gt; System.Web.UI.Control:DataBind ()
in &lt;0x0010b&gt; System.Web.UI.WebControls.DataGrid:CreateItem (Int32 item_index, Int32 data_source_index, ListItemType type, Boolean data_bind, System.Object data_item, System.Web.UI.WebControls.PagedDataSource paged)
in &lt;0x00420&gt; System.Web.UI.WebControls.DataGrid:CreateControlHierarchy (Boolean useDataSource)
in &lt;0x00095&gt; System.Web.UI.WebControls.BaseDataList:DataBind ()
in &lt;0x0013c&gt; Mescor.WebCliver.BusinessModel.Company.TestCompanyFacade:DataGridWithStrangeColumnNames ()
in &lt;0x00000&gt; &lt;unknown method&gt;
in (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (object,object[])
in &lt;0x0008d&gt; System.Reflection.MonoMethod:Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture)
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030736.html">[Mono-list] stacktrace and path.combine
</A></li>
	<LI>Next message: <A HREF="030732.html">[Mono-list] DataGrid difference to .NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30725">[ date ]</a>
              <a href="thread.html#30725">[ thread ]</a>
              <a href="subject.html#30725">[ subject ]</a>
              <a href="author.html#30725">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
