<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono: TLS. normal versus __thread
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jonpryor%40vt.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="026366.html">
   <LINK REL="Next"  HREF="026423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono: TLS. normal versus __thread
   </H1>
    <B>Jonathan Pryor
    </B> 
    <A HREF="mailto:jonpryor%40vt.edu"
       TITLE="[Mono-list] Mono: TLS. normal versus __thread">jonpryor@vt.edu
       </A><BR>
    <I>Fri, 25 Mar 2005 06:49:13 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="026366.html">[Mono-list] Mono: TLS. normal versus __thread
</A></li>
        <LI> Next message: <A HREF="026423.html">[Mono-list] Mono: TLS. normal versus __thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26380">[ date ]</a>
              <a href="thread.html#26380">[ thread ]</a>
              <a href="subject.html#26380">[ subject ]</a>
              <a href="author.html#26380">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2005-03-24 at 07:28 -0500, Jonathan Pryor wrote:
&gt;<i> On Thu, 2005-03-24 at 00:17 +0100, Michael Rasmussen wrote:
</I>&gt;<i> &gt; It apparently seems to course problems when using Mono.Posix.fork.
</I>&gt;<i> &gt; My self compiled version under Debian runs flawlessly while giving these
</I>&gt;<i> &gt; errors under Fedora Core and Suse:
</I>&gt;<i> 
</I>&gt;<i> Don't call Syscall.fork unless you really know what you're doing...
</I>&gt;<i> 
</I>&gt;<i> (Someone correct me if the following is wrong...)
</I>
After chatting with lupus on IRC, I'm apparently wrong.  Not completely
wrong, just mostly wrong...

In short, you do need to be careful about calling fork(2), but only as
careful as any C program would need to be.  Threads aren't copied when
the process forks, for example.

Consequently, a fork(2) followed immediately by an exec(2) should be
safe.  Doing anything else is getting into unknown territory: if you do
something that depends on a standard mono process, things get &quot;iffy&quot;
fast.

Thus, I'm not sure why you're getting differences between normal TLS and
__thread behaviors.

 - Jon



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="026366.html">[Mono-list] Mono: TLS. normal versus __thread
</A></li>
	<LI> Next message: <A HREF="026423.html">[Mono-list] Mono: TLS. normal versus __thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26380">[ date ]</a>
              <a href="thread.html#26380">[ thread ]</a>
              <a href="subject.html#26380">[ subject ]</a>
              <a href="author.html#26380">[ author ]</a>
         </LI>
       </UL>
</body></html>
