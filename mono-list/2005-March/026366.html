<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono: TLS. normal versus __thread
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mir%40miras.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="026364.html">
   <LINK REL="Next"  HREF="026380.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono: TLS. normal versus __thread
   </H1>
    <B>Michael Rasmussen
    </B> 
    <A HREF="mailto:mir%40miras.org"
       TITLE="[Mono-list] Mono: TLS. normal versus __thread">mir@miras.org
       </A><BR>
    <I>Thu, 24 Mar 2005 15:16:12 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="026364.html">[Mono-list] Mono: TLS. normal versus __thread
</A></li>
        <LI> Next message: <A HREF="026380.html">[Mono-list] Mono: TLS. normal versus __thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26366">[ date ]</a>
              <a href="thread.html#26366">[ thread ]</a>
              <a href="subject.html#26366">[ subject ]</a>
              <a href="author.html#26366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-Oyft0E1ZNkJVMO4aZgRW
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

tor, 24 03 2005 kl. 07:28 -0500, skrev Jonathan Pryor:

&gt;<i> Don't call Syscall.fork unless you really know what you're doing...
</I>&gt;<i>=20
</I>&gt;<i> (Someone correct me if the following is wrong...)
</I>&gt;<i>=20
</I>&gt;<i> The problem is that Mono is implemented in terms of the Win32 API.  This
</I>&gt;<i> allows portability between Windows and Unix (io-layer implements a Win32
</I>&gt;<i> subset for Unix platforms).  But in order to be efficient at some tasks,
</I>&gt;<i> some data must be shared between all mono tasks.  This data is in the
</I>&gt;<i> ~/.wapi directory.
</I>&gt;<i>=20
</I>Well in my case the hole point is to be able to start an application and
the be able to fork it to the background running as a daemon. I find it
hard to see this as a dangerous task?

The problem occurs when mono is compiled with the option TLS normal.
When mono is compiled with the option TLS __thread it works as expected.

&gt;<i> PS: lupus: Is there any scenario where it's actually *safe* to call
</I>&gt;<i> fork?  I'm wondering if I should remove fork(2) and exec(2) from
</I>&gt;<i> Mono.Unix.Syscall...  Alternatively, is there someway to protected
</I>&gt;<i> ~/.wapi so that fork(2) can be safely called?
</I>
Forking as process to run as daemon should in my opinion be a safe task.

Hilsen/Regards
Michael Rasmussen

Get my public GnuPG keys:
michael  rasmussen  cc
<A HREF="http://keyserver.veridis.com:11371/pks/lookup?op=3Dget&search=3D0xD3C9A00E">http://keyserver.veridis.com:11371/pks/lookup?op=3Dget&amp;search=3D0xD3C9A00E</A>
mir  datanom  net
<A HREF="http://keyserver.veridis.com:11371/pks/lookup?op=3Dget&search=3D0xE501F51C">http://keyserver.veridis.com:11371/pks/lookup?op=3Dget&amp;search=3D0xE501F51C</A>
mir  miras  org
<A HREF="http://keyserver.veridis.com:11371/pks/lookup?op=3Dget&search=3D0xE3E80917">http://keyserver.veridis.com:11371/pks/lookup?op=3Dget&amp;search=3D0xE3E80917</A>
--------------------------------------------------------------
I'll burn my books.
-- Christopher Marlowe



--=-Oyft0E1ZNkJVMO4aZgRW
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: Dette er en digitalt underskrevet brevdel

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.0 (GNU/Linux)

iD8DBQBCQsusVErYVePoCRcRAjZnAJ4opQ/vvT2Ah7hGM2tQFyvuX+EOZwCgmAfV
h691ebQg3FJS9BBWWhdcU1k=
=H2mm
-----END PGP SIGNATURE-----

--=-Oyft0E1ZNkJVMO4aZgRW--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="026364.html">[Mono-list] Mono: TLS. normal versus __thread
</A></li>
	<LI> Next message: <A HREF="026380.html">[Mono-list] Mono: TLS. normal versus __thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26366">[ date ]</a>
              <a href="thread.html#26366">[ thread ]</a>
              <a href="subject.html#26366">[ subject ]</a>
              <a href="author.html#26366">[ author ]</a>
         </LI>
       </UL>
</body></html>
