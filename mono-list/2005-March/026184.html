<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Datasets passed between methods loses data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:atsushi%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="026180.html">
   <LINK REL="Next"  HREF="026179.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Datasets passed between methods loses data
   </H1>
    <B>Atsushi Eno
    </B> 
    <A HREF="mailto:atsushi%40ximian.com"
       TITLE="[Mono-list] Datasets passed between methods loses data">atsushi@ximian.com
       </A><BR>
    <I>Mon, 07 Mar 2005 19:07:26 +0900</I>
    <P><UL>
        <LI> Previous message: <A HREF="026180.html">[Mono-list] Datasets passed between methods loses data
</A></li>
        <LI> Next message: <A HREF="026179.html">[Mono-list] fix for gtk# bug - Fedora Core 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26184">[ date ]</a>
              <a href="thread.html#26184">[ thread ]</a>
              <a href="subject.html#26184">[ subject ]</a>
              <a href="author.html#26184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Actually it depends on the content of &quot;server.log&quot; since the XML
structure is not determined only with that code. If that log file
contains only simple text (BTW that code is really not recommended
because it will raise an XmlException if there is broken XML
fragment), it won't return any XML content, since that simple text
content is not mapped to any DataTable, nor the &quot;root&quot; element is
not regarded as a DataTable.

DataSet is not such universal XML store. It just holds such contents
that is mappable to table set structure and ReadXml() ignores
other content. Just FYI, MS.NET also ignores the text content.

Atsushi Eno

anthony whalley wrote:
&gt;<i> Hi All 
</I>&gt;<i> 
</I>&gt;<i> I am writing an application that marshells a log4net 
</I>&gt;<i> file into a dataset and then passes the dataset
</I>&gt;<i> over to another method. I am using v 1.1.4 from the 
</I>&gt;<i> RPMs on Suse 9.2 and below is the code.
</I>&gt;<i> However when I test the dataset returned it 
</I>&gt;<i> has only a root node even though before
</I>&gt;<i> it is passed it has all the data inside it. 
</I>&gt;<i> I have solved the prolem for now by passing over
</I>&gt;<i> the data as a string type and marhalling the 
</I>&gt;<i> data there but wondered if I should
</I>&gt;<i> report it as a bug?? 
</I>&gt;<i> 
</I>&gt;<i> public class obj{
</I>&gt;<i> 		public DataSet GetLogFile()
</I>&gt;<i> 		{
</I>&gt;<i> 			DataSet ds = new DataSet() ;
</I>&gt;<i> 			try 
</I>&gt;<i> 			{
</I>&gt;<i> 				string _logLocation = Environment.CurrentDirectory + Path.DirectorySeparatorChar + &quot;server.log&quot; ;
</I>&gt;<i> 				Stream stm = File.Open(_logLocation, FileMode.Open, FileAccess.Read, FileShare.ReadWrite) ;
</I>&gt;<i> 				
</I>&gt;<i> 				StreamReader str = new StreamReader(stm) ;
</I>&gt;<i> 				ds.ReadXml(new StringReader(&quot;&lt;root xmlns:log4net='<A HREF="http://logging.apache.org/log4net/LogSchema'">http://logging.apache.org/log4net/LogSchema'</A>&gt;&quot; + 
</I>&gt;<i> 					str.ReadToEnd() + 
</I>&gt;<i> 					&quot;&lt;/root&gt;&quot;)) ;
</I>&gt;<i> 				str.Close();
</I>&gt;<i> 				stm.Close();
</I>&gt;<i> 				
</I>&gt;<i> 			}
</I>&gt;<i> 			catch(Exception e)
</I>&gt;<i> 			{
</I>&gt;<i> 				log.Error(&quot;Get log file error&quot;, e) ; 
</I>&gt;<i> 			}
</I>&gt;<i> 			return ds ;
</I>&gt;<i> 		}
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> public class otherObj
</I>&gt;<i> {
</I>&gt;<i> 
</I>&gt;<i>   obj o = new obj() ;
</I>&gt;<i>   DataSet ds = new DataSet() ;
</I>&gt;<i>   public void testxml(){
</I>&gt;<i>   ds = o.GetLogFile() ;
</I>&gt;<i>   Console.WriteLine(ds.GetXml()); //returns &lt;root /&gt;
</I>&gt;<i> }
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> 
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="026180.html">[Mono-list] Datasets passed between methods loses data
</A></li>
	<LI> Next message: <A HREF="026179.html">[Mono-list] fix for gtk# bug - Fedora Core 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26184">[ date ]</a>
              <a href="thread.html#26184">[ thread ]</a>
              <a href="subject.html#26184">[ subject ]</a>
              <a href="author.html#26184">[ author ]</a>
         </LI>
       </UL>
</body></html>
