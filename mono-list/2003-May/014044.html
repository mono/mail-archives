<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Making code conditional on &quot;not running on mono&quot;?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lupus%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014039.html">
   <LINK REL="Next"  HREF="014025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Making code conditional on &quot;not running on mono&quot;?
   </H1>
    <B>Paolo Molaro
    </B> 
    <A HREF="mailto:lupus%40ximian.com"
       TITLE="[Mono-list] Making code conditional on &quot;not running on mono&quot;?">lupus@ximian.com
       </A><BR>
    <I>Mon, 19 May 2003 11:52:22 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="014039.html">[Mono-list] Making code conditional on &quot;not running on mono&quot;?
</A></li>
        <LI> Next message: <A HREF="014025.html">[Mono-list] Making code conditional on &quot;not running on mono&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14044">[ date ]</a>
              <a href="thread.html#14044">[ thread ]</a>
              <a href="subject.html#14044">[ subject ]</a>
              <a href="author.html#14044">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/16/03 Stuart Ballard wrote:
&gt;<i> &gt;We do somthing similar in nant. Except we use #ifdef mono.
</I>&gt;<i> &gt;Another way to test if you are on windows it to check the value of 
</I>&gt;<i> &gt;DirectorySeperatorchar. That won't help if you're trying to test for 
</I>&gt;<i> &gt;mono since you cold be on mono on wondows.
</I>&gt;<i> 
</I>&gt;<i> Hey cool, I didn't know that C# had a preprocessor :)
</I>&gt;<i> 
</I>&gt;<i> Question to the Mono developers: Would it be worth making &quot;/d:mono&quot; or 
</I>&gt;<i> &quot;/d:mcs&quot; a default in mcs? That would make it possible to write code 
</I>&gt;<i> that compiles differently on Mono without having to specialcase your 
</I>&gt;<i> build scripts.
</I>&gt;<i> 
</I>&gt;<i> (this seems analagous to the fact that you can assume things like 
</I>&gt;<i> &quot;#ifdef linux&quot; and &quot;#ifdef gcc&quot; in C and get meaningful results without 
</I>&gt;<i> having to explicitly -D them on the commandline)
</I>
Note: mcs already defines a symbol you can use to do different things if
you're compiling with mcs (it has nothing to do with the binary being
then run with mono or another runtime, so it's useless for your purpouse).

Using something like /d:mono is not a good idea either, unless you think
of it like a temporary workaround. Almost always, you should do a
runtime check instead, so that you can build a single binary that works
on all the runtimes. Also, don't forget to file bug reports for the
issues you find in bugzilla, so that we know they need fixing.
Once the bug is fixed or the feature is implemented, your code will take
advantage of it without modifications.

lupus

-- 
-----------------------------------------------------------------
<A HREF="mailto:lupus@debian.org">lupus@debian.org</A>                                     debian/rules
<A HREF="mailto:lupus@ximian.com">lupus@ximian.com</A>                             Monkeys do it better

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014039.html">[Mono-list] Making code conditional on &quot;not running on mono&quot;?
</A></li>
	<LI> Next message: <A HREF="014025.html">[Mono-list] Making code conditional on &quot;not running on mono&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14044">[ date ]</a>
              <a href="thread.html#14044">[ thread ]</a>
              <a href="subject.html#14044">[ subject ]</a>
              <a href="author.html#14044">[ author ]</a>
         </LI>
       </UL>
</body></html>
