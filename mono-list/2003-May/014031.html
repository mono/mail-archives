<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] RE: Mono-list digest, Vol 1 #973 - 13 msgs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:avi_farah%40hotmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014070.html">
   <LINK REL="Next"  HREF="014032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] RE: Mono-list digest, Vol 1 #973 - 13 msgs
   </H1>
    <B>Avi Farah
    </B> 
    <A HREF="mailto:avi_farah%40hotmail.com"
       TITLE="[Mono-list] RE: Mono-list digest, Vol 1 #973 - 13 msgs">avi_farah@hotmail.com
       </A><BR>
    <I>Sat, 17 May 2003 12:16:55 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="014070.html">[Mono-list] LAMESPEC?:
 System.Diagnostics.DiagnosticsConfigurationHandler
</A></li>
        <LI> Next message: <A HREF="014032.html">[Mono-list] Re: Mono-list digest, Vol 1 #973 - 13 msgs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14031">[ date ]</a>
              <a href="thread.html#14031">[ thread ]</a>
              <a href="subject.html#14031">[ subject ]</a>
              <a href="author.html#14031">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I would love to work on it.  Where will I find specs for it?

Cheers,
Avi

-----Original Message-----
From: <A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>
[mailto:<A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>] On Behalf Of
<A HREF="mailto:mono-list-request@lists.ximian.com">mono-list-request@lists.ximian.com</A>
Sent: Saturday, May 17, 2003 4:02 AM
To: <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
Subject: Mono-list digest, Vol 1 #973 - 13 msgs

Send Mono-list mailing list submissions to
	<A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>

To subscribe or unsubscribe via the World Wide Web, visit
	<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
or, via email, send a message with subject or body 'help' to
	<A HREF="mailto:mono-list-request@lists.ximian.com">mono-list-request@lists.ximian.com</A>

You can reach the person managing the list at
	<A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A>

When replying, please edit your Subject line so it is more specific
than &quot;Re: Contents of Mono-list digest...&quot;


Today's Topics:

   1. XmlValidatingReader class?? (Dominik Fretz)
   2. How to select a GUI implementation? (J. Perkins)
   3. Re: XmlValidatingReader class?? (<A HREF="mailto:ginga@kit.hi-ho.ne.jp">ginga@kit.hi-ho.ne.jp</A>)
   4. Re: Is there a documentation generator for mono? (Miguel de Icaza)
   5. Re: How to select a GUI implementation? (Jonathan Pryor)
   6. Re: How to select a GUI implementation? (J. Perkins)
   7. wine monostub error -&gt; mono_domain_assembly_open
(=3D?ISO-8859-1?Q?=3D22Ing=3D2E_Ernesto_P=3DE9rez_Est=3DE9vez=3D22?=3D)
   8. wine monostub error - Update
(=3D?ISO-8859-1?Q?=3D22Ing=3D2E_Ernesto_P=3DE9rez_Est=3DE9vez=3D22?=3D)
   9. Missing warning? (Maurizio Colucci)
  10. Re: Re: XmlValidatingReader class?? (Dominik Fretz)
  11. Wine installation problem (Adam W Root)
  12. Re: Making code conditional on &quot;not running on mono&quot;? (Aleksey
Demakov)
  13. Re: Making code conditional on &quot;not running on mono&quot;? (Stuart =
Ballard)

--__--__--

Message: 1
Date: Fri, 16 May 2003 17:27:27 +0200
From: Dominik Fretz &lt;<A HREF="mailto:lists@roboto.ch">lists@roboto.ch</A>&gt;
To: <A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>
Subject: [Mono-list] XmlValidatingReader class??

hi

I just encounterd that the XmlValidatingReader exists but isn't really=20
implemented.

Since #D needs it, we should have it for the porting effort of #D to =
mono.

Anybody working on it or could lend a hand by implementing it?

thx

Dominik



--__--__--

Message: 2
Date: Fri, 16 May 2003 11:35:10 -0400
From: &quot;J. Perkins&quot; &lt;<A HREF="mailto:jason@379.com">jason@379.com</A>&gt;
To: mono-list &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
Subject: [Mono-list] How to select a GUI implementation?

Alexandre has been hard at work building a quite nice back-end system=20
for SWF and System.Drawing. He can support multiple native GUI libraries =

including Wine and Gtk. The last piece of the puzzle is choose which=20
implementation to use at runtime. There's two pieces to consider here.=20
First, which implementation should be used as the default on a given=20
system, and second how can the user change the default if they don't=20
like it?

For the first, could we add a new switch to configure that adds a symbol =

to the builds of SWF and SD? Like USE_WINE or USE_GTK or similar. I=20
tried looking at the build scripts myself, but being a Windows/IDE guy I =

couldn't make sense of them. Once this is in place, the package=20
maintainers could choose the appropriate implementation for their target =

platform.

For the second, we thought we would check an environment variable, maybe =

&quot;MONO_GUI&quot;. If it was set (MONO_GUI=3Dgtk for instance) we would =
override=20
the default implementation in favor of Gtk.

How does this sound to everyone? I don't know if Alexandre knows how to=20
make the changes to configure so we might need some help there. The=20
environment variable we could go ahead and add now. Then we'd need to=20
package maintainers to choose the right implementation when they do=20
their release builds.

Jason
379



--__--__--

Message: 3
Date: Sat, 17 May 2003 01:28:59 +0900
From: <A HREF="mailto:ginga@kit.hi-ho.ne.jp">ginga@kit.hi-ho.ne.jp</A>
To: Dominik Fretz &lt;<A HREF="mailto:lists@roboto.ch">lists@roboto.ch</A>&gt;
Cc: <A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>
Subject: [Mono-list] Re: XmlValidatingReader class??

Hello,

&gt;<i> I just encounterd that the XmlValidatingReader exists but isn't really =
</I>
&gt;<i> implemented.
</I>&gt;<i> Since #D needs it, we should have it for the porting effort of #D to =
</I>mono.
&gt;<i> Anybody working on it or could lend a hand by implementing it?
</I>
At least I had not, and I'll be grateful if you are interested in
implementing it:)  BTW, XmlValidatingReader has some aspects for
validation or contributing information set. Do you know what part=20
of them #D requires?

  - DTD
  - XML Schema
  - XDR ... ah, they won't use it :-)

DTD parser and DTD objects are available in XmlTextReader (though=20
it is somewhat ad-hoc) to use implied attributes or to implement
ID/IDREFs for DOM. FYI.

  Atsushi Eno


--__--__--

Message: 4
Subject: Re: [Mono-list] Is there a documentation generator for mono?
From: Miguel de Icaza &lt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&gt;
To: Charles-Louis &lt;<A HREF="mailto:charlouis.mono@wanadoo.be">charlouis.mono@wanadoo.be</A>&gt;
Cc: Mono Devel &lt;<A HREF="mailto:mono-devel-list@lists.ximian.com">mono-devel-list@lists.ximian.com</A>&gt;,
	Gtk Sharp List &lt;<A HREF="mailto:gtk-sharp-list@lists.ximian.com">gtk-sharp-list@lists.ximian.com</A>&gt;,
	Mono List &lt;<A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>&gt;
Organization:=20
Date: 16 May 2003 13:16:01 -0400

Resending my ownb mail

&gt;<i> Hello,
</I>&gt;<i>=20
</I>&gt;<i> &gt; I'd like to know if it's possible to generate the documentation of =
</I>my
&gt;<i> &gt; own assemblies based on the .NET comment type (i.e. the =
</I>&quot;///&lt;summary&gt;&quot;
&gt;<i> &gt; comments) with mono under Linux.
</I>&gt;<i>=20
</I>&gt;<i> Gaurav has some experimental patches to do this, but I would like to
</I>&gt;<i> merge those into the main compiler.
</I>&gt;<i>=20
</I>&gt;<i> Currently the approach we are using is a bit different: you generate a
</I>&gt;<i> stub ECMA-XML document, and then you fill it out.  Which works for
</I>&gt;<i> things like gtk-sharp.
</I>&gt;<i>=20
</I>&gt;<i> Miguel
</I>--=20
Miguel de Icaza &lt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&gt;

--__--__--

Message: 5
Subject: Re: [Mono-list] How to select a GUI implementation?
From: Jonathan Pryor &lt;<A HREF="mailto:jonpryor@vt.edu">jonpryor@vt.edu</A>&gt;
To: &quot;J. Perkins&quot; &lt;<A HREF="mailto:jason@379.com">jason@379.com</A>&gt;
Cc: Mono List &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
Organization:=20
Date: 16 May 2003 13:21:08 -0400

You could take a look at what Type Reflector does.  It supports both
Gtk# and SWF front-ends, as well as a console front end.  Type Reflector
is in the type-reflector CVS module and the mono-tools CVS module.

It's approach is a bit of a hack, but I've found it to work well.

Type Reflector has two levels of support: compile-time and run-time.  By
default, all front-ends are built.  If this fails (due to missing
assemblies, e.g. Gtk# isn't installed), it'll fall-back and attempt to
rebuild with a different set of front-ends.  The problem with this
approach is it could result in a combinatoric explosion of build
choices, but with only 2 &quot;optional&quot; front-ends (SWF &amp; Gtk#) this isn't
too bad.

The next level is run-time selection.  Type Reflector uses an
application configuration file (type-reflector.exe.config) which has an
&lt;appSettings/&gt; tag, which contains a &quot;displayer-order&quot; key.  This key
contains an ordering (space-delimited) of the front-ends to try to use.=20
An environment variable could be used instead.  At runtime, each entry
is instantiated; the first displayer that instantiates is the one that
is used.  This permits all GUI front-ends to fail, resulting in console
output.

Thus, the default GUI is the first entry in the &quot;displayer-order&quot; key.=20
The user can modify this by editing the .config file (non-ideal, though
the App could include functionality to edit the .config file or use an
IsolatedStorage file for per-user settings).

 - Jon

On Fri, 2003-05-16 at 11:35, J. Perkins wrote:
&gt;<i> Alexandre has been hard at work building a quite nice back-end system=20
</I>&gt;<i> for SWF and System.Drawing. He can support multiple native GUI =
</I>libraries=20
&gt;<i> including Wine and Gtk. The last piece of the puzzle is choose which=20
</I>&gt;<i> implementation to use at runtime. There's two pieces to consider here. =
</I>
&gt;<i> First, which implementation should be used as the default on a given=20
</I>&gt;<i> system, and second how can the user change the default if they don't=20
</I>&gt;<i> like it?
</I>&gt;<i>=20
</I>&gt;<i> For the first, could we add a new switch to configure that adds a =
</I>symbol=20
&gt;<i> to the builds of SWF and SD? Like USE_WINE or USE_GTK or similar. I=20
</I>&gt;<i> tried looking at the build scripts myself, but being a Windows/IDE guy =
</I>I=20
&gt;<i> couldn't make sense of them. Once this is in place, the package=20
</I>&gt;<i> maintainers could choose the appropriate implementation for their =
</I>target=20
&gt;<i> platform.
</I>&gt;<i>=20
</I>&gt;<i> For the second, we thought we would check an environment variable, =
</I>maybe=20
&gt;<i> &quot;MONO_GUI&quot;. If it was set (MONO_GUI=3Dgtk for instance) we would =
</I>override=20
&gt;<i> the default implementation in favor of Gtk.
</I>&gt;<i>=20
</I>&gt;<i> How does this sound to everyone? I don't know if Alexandre knows how =
</I>to=20
&gt;<i> make the changes to configure so we might need some help there. The=20
</I>&gt;<i> environment variable we could go ahead and add now. Then we'd need to=20
</I>&gt;<i> package maintainers to choose the right implementation when they do=20
</I>&gt;<i> their release builds.
</I>&gt;<i>=20
</I>&gt;<i> Jason
</I>&gt;<i> 379
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>

--__--__--

Message: 6
Date: Fri, 16 May 2003 14:00:29 -0400
From: &quot;J. Perkins&quot; &lt;<A HREF="mailto:jason@379.com">jason@379.com</A>&gt;
To: &quot;Mono List&quot; &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
Subject: Re: [Mono-list] How to select a GUI implementation?

Jonathan raises some good points. Does Mono have a .config file for=20
system settings? Perhaps we could have an ordered list of GUI=20
implementations, which an advanced user could change. The package=20
builders could provide a list for the target platform (for example, the=20
RH RPMS could specify Gtk, then Qt, then Wine perhaps, the Windows=20
installer would just use a Win32 implementation). That would be more=20
foolproof I think, since it allows for a fallback behavior in case the=20
preferred toolkit isn't available, and it would not require any changes=20
to the current build system.

Also, we should probably throw a NotImplementedException if no=20
implementation is available for the current system.

Jason
379


Jonathan Pryor wrote:
&gt;<i> Type Reflector has two levels of support: compile-time and run-time.  =
</I>By
&gt;<i> default, all front-ends are built.  If this fails (due to missing
</I>&gt;<i> assemblies, e.g. Gtk# isn't installed), it'll fall-back and attempt to
</I>&gt;<i> rebuild with a different set of front-ends.  The problem with this
</I>&gt;<i> approach is it could result in a combinatoric explosion of build
</I>&gt;<i> choices, but with only 2 &quot;optional&quot; front-ends (SWF &amp; Gtk#) this isn't
</I>&gt;<i> too bad.
</I>&gt;<i>=20
</I>&gt;<i> The next level is run-time selection.  Type Reflector uses an
</I>&gt;<i> application configuration file (type-reflector.exe.config) which has =
</I>an
&gt;<i> &lt;appSettings/&gt; tag, which contains a &quot;displayer-order&quot; key.  This key
</I>&gt;<i> contains an ordering (space-delimited) of the front-ends to try to =
</I>use.=20
&gt;<i> An environment variable could be used instead.  At runtime, each entry
</I>&gt;<i> is instantiated; the first displayer that instantiates is the one that
</I>&gt;<i> is used.  This permits all GUI front-ends to fail, resulting in =
</I>console
&gt;<i> output.
</I>


--__--__--

Message: 7
Date: Fri, 16 May 2003 16:46:51 -0500
From: =
=3D?ISO-8859-1?Q?=3D22Ing=3D2E_Ernesto_P=3DE9rez_Est=3DE9vez=3D22?=3D
&lt;<A HREF="mailto:info@ernestoperez.com">info@ernestoperez.com</A>&gt;
To: <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
Subject: [Mono-list] wine monostub error -&gt; mono_domain_assembly_open

Hi and sorry if this is a simple question.

I have spent two days trying to setup mono to work with=20
System.Windows.Forms without success

I'm following this recipe:
<A HREF="http://monoevo.sourceforge.net/mono/SWF.txt">http://monoevo.sourceforge.net/mono/SWF.txt</A>

And using the latest stable sources from mono, wine and gc

I will describe what happens when I follow SWF.txt steps:

1 and 2- Wine installs ok, no problem at all. BTW I run wine under user: =

wine and I'm able to open notepad, etc.
3- gc installs ok
4- ok

At this point I realized that to acomplish point 5 I've to compile and=20
install mono. Ok, I did it
./configure --with-gc=3Dno
make
and I got some errors regarding gc_typed.h and gc.h
(oh, yes: I tried ./configure --without-gc as well)

Finally I copied from ~/gc/include/gc.h and gc_typed.h to =
/usr/local/include

I guess the problem is here but didn't find a way to overcome the=20
problem with gc.h

I also got a message about -lgc not found. I removed all references to=20
-lgc in the makefiles and it finally compiled ok.

5- all paths were ok.

I typed make in that directory and got an error regarding it couldn't=20
finr mono.pc
PKG_CONFIG_PATH=3D/usr/local/lib/pkgconfig
export PKG_CONFIG_PATH
make again and no problems. It compiled.

(I don't know if the make should be issued from the mcs root or from=20
mcs/classes/System.Windows.Forms/System.Windows.Forms)

6- ok,

monowinehooks.so  and runwine  were copied to /usr/local/bin/mono

7- added ok the lines.

8- su - wine
wine monostub

and I got:
Could not stat /mnt/fd0 (No such file or directory), ignoring drive A:
Could not stat /cdrom (No such file or directory), ignoring drive D:
wine: cannot open builtin library for 'C:\WINDOWS\SYSTEM\monostub.exe':
/usr/local/lib/wine/monostub.exe.so: undefined symbol:
mono_domain_assembly_open

I have tried installing mono via rpm with no success.

I compiled everything in a recently installed machine (no mono from rpm =
nor
nothing) and no success.


I really don't know what's happening. And I'm interested in trying to =
run a
simple app compiled in .NET windows.




--=20
This message has been scanned for viruses and
dangerous content by InetCheckMail, and is
believed to be clean.

***************** DISCLAIMER *******************

The information in this e-mail is intended to be=20
confidential and only for the use of the individual
or entity to whom it is addressed.

Any retention, dissemination, distribution or copying
of this message is strictly prohibited and sanctioned=20
by law.=20

Opinions, criteria and other information in this message
that do not relate to the official business of our=20
company shall be understood as neither given nor endorsed
by it.=20

www.novadevices.com

***************************************************


--__--__--

Message: 8
Date: Fri, 16 May 2003 17:02:49 -0500
From: =
=3D?ISO-8859-1?Q?=3D22Ing=3D2E_Ernesto_P=3DE9rez_Est=3DE9vez=3D22?=3D
&lt;<A HREF="mailto:info@ernestoperez.com">info@ernestoperez.com</A>&gt;
To: <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
Subject: [Mono-list] wine monostub error - Update

Checking the compile for monostub I found this:

No package 'monoold' found
monostub.o: In function `main_thread_handler':
/usr/src/mcs/class/System.Windows.Forms/System.Windows.Forms/monostub.c:8=
3:=20
undefined reference to `mono_domain_assembly_open'
/usr/src/mcs/class/System.Windows.Forms/System.Windows.Forms/monostub.c:9=
5:=20
undefined reference to `mono_jit_exec'
monostub.o: In function `WinMain':
/usr/src/mcs/class/System.Windows.Forms/System.Windows.Forms/monostub.c:1=
19:

undefined reference to `mono_config_parse'
/usr/src/mcs/class/System.Windows.Forms/System.Windows.Forms/monostub.c:1=
22:

undefined reference to `mono_jit_init'
/usr/src/mcs/class/System.Windows.Forms/System.Windows.Forms/monostub.c:1=
77:

undefined reference to `mono_runtime_exec_managed_code'
/usr/src/mcs/class/System.Windows.Forms/System.Windows.Forms/monostub.c:1=
86:

undefined reference to `mono_jit_cleanup'
gcc -fPIC -I. -I/usr/local/include/wine -I/usr/X11R6/include -rdynamic=20
-g -c -Wall monowinehooks.c
gcc -shared -W1,soname,monowinehooks.so -o monowinehooks.so=20
monowinehooks.o -lc -ldl

Where is monoold? I can't find it in the system.

thanks!
epe


--=20
This message has been scanned for viruses and
dangerous content by InetCheckMail, and is
believed to be clean.

***************** DISCLAIMER *******************

The information in this e-mail is intended to be=20
confidential and only for the use of the individual
or entity to whom it is addressed.

Any retention, dissemination, distribution or copying
of this message is strictly prohibited and sanctioned=20
by law.=20

Opinions, criteria and other information in this message
that do not relate to the official business of our=20
company shall be understood as neither given nor endorsed
by it.=20

www.novadevices.com

***************************************************


--__--__--

Message: 9
From: Maurizio Colucci &lt;<A HREF="mailto:seguso.forever@tin.it">seguso.forever@tin.it</A>&gt;
To: mono-list &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
Date: Sat, 17 May 2003 00:07:23 +0200
Subject: [Mono-list] Missing warning?

Hello,


It would be nice if mcs gave a warning (or error?) whenever you=20
forget to initialize a readonly field.

The microsoft compiler does it, I seem to recall.

regards,

Maurizio





--__--__--

Message: 10
Date: Sat, 17 May 2003 00:21:50 +0200
From: Dominik Fretz &lt;<A HREF="mailto:lists@roboto.ch">lists@roboto.ch</A>&gt;
To: <A HREF="mailto:ginga@kit.hi-ho.ne.jp">ginga@kit.hi-ho.ne.jp</A>
Cc: <A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>
Subject: Re: [Mono-list] Re: XmlValidatingReader class??

<A HREF="mailto:ginga@kit.hi-ho.ne.jp">ginga@kit.hi-ho.ne.jp</A> wrote:

&gt;<i> At least I had not, and I'll be grateful if you are interested in
</I>&gt;<i> implementing it:)  BTW, XmlValidatingReader has some aspects for
</I>&gt;<i> validation or contributing information set. Do you know what part=20
</I>&gt;<i> of them #D requires?
</I>&gt;<i>=20
</I>&gt;<i>   - DTD
</I>&gt;<i>   - XML Schema
</I>&gt;<i>   - XDR ... ah, they won't use it :-)
</I>&gt;<i>=20
</I>&gt;<i> DTD parser and DTD objects are available in XmlTextReader (though=20
</I>&gt;<i> it is somewhat ad-hoc) to use implied attributes or to implement
</I>&gt;<i> ID/IDREFs for DOM. FYI.
</I>
Hi

Badly I didn't have time at the moment to implement it and I must say, I =

wouldn't hava any clue how to do something like this currently :-/

They use XML Schema.

I Taked to the Main Developper and he tels me that this part isn't a=20
showstopper, we can to without it currently. I'll loking to workaround=20
it, and probbably i have time in the end of june or in july, so there is =

a really smal chance that i'm starting on it.

Dominik




--__--__--

Message: 11
From: Adam W Root &lt;<A HREF="mailto:rootad@engr.orst.edu">rootad@engr.orst.edu</A>&gt;
To: <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
Organization:=20
Date: 16 May 2003 20:41:17 -0700
Subject: [Mono-list] Wine installation problem

Hello. I'm trying to get wine working so I can contribute to the SWF
effort, but during my install (using tools/wineinstall from source
package) i see and error like

wine: chdir to /tmp/.wine-adam/server-302-212022 : No such file or
directory

Why isn't the install creating it if it needs it?

Thanks,

Adam


--__--__--

Message: 12
Date: Sat, 17 May 2003 13:07:29 +0700
From: Aleksey Demakov &lt;<A HREF="mailto:avd@openlinksw.com">avd@openlinksw.com</A>&gt;
Organization: OpenLink Software
To: Stuart Ballard &lt;<A HREF="mailto:stuart.ballard@corp.fast.net">stuart.ballard@corp.fast.net</A>&gt;
Cc: <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
Subject: Re: [Mono-list] Making code conditional on &quot;not running on =
mono&quot;?

Stuart Ballard wrote:
&gt;<i> I have a C# program which uses some classes (specifically=20
</I>&gt;<i> System.DirectoryServices) that aren't implemented in Mono. The code in =
</I>
&gt;<i> question is not critical to the application and the majority of the=20
</I>&gt;<i> functionality would work fine if it wasn't there. I can't remove the=20
</I>&gt;<i> code entirely (because in some cases we actually do need the=20
</I>&gt;<i> functionality) but I can't compile on Mono with it present, because =
</I>the=20
&gt;<i> classes aren't found.
</I>&gt;<i>=20
</I>&gt;<i> Is there any way I can avoid having to have two different copies of =
</I>the=20
&gt;<i> source code, one for Mono without the feature and one for MS.NET with=20
</I>&gt;<i> the feature included?
</I>&gt;<i>=20
</I>&gt;<i> Thanks,
</I>&gt;<i> Stuart.
</I>
If it's ok to have a separate assembly for each platform
you can use conditional compilation as follows:

...
#if M0NO
   Console.WriteLine (&quot;Platform: Mono&quot;);
#else
   Console.WriteLine (&quot;Platform: .NET&quot;);
#endif
...

And don't forget to compile it with mcs /d:MONO :).

If you want to have not only common source code but also
single assembly for all platforms then use a runtime check.
This one worked fine for me:

...
Type enumType =3D typeof (PlatformID);
if (Enum.IsDefined (enumType, &quot;Unix&quot;))
{
   if (Environment.OSVersion.Platform =3D=3D (PlatformID) Enum.Parse=20
(enumType, &quot;Unix&quot;))
     Console.WriteLine (&quot;Platform: Mono on Unix&quot;);
   else
     Console.WriteLine (&quot;Platform: Mono on Win32&quot;);
}
else
   Console.WriteLine (&quot;Platform: .NET&quot;);
...

Regards,
Aleksey


--__--__--

Message: 13
Date: Fri, 16 May 2003 11:29:57 -0400
From: Stuart Ballard &lt;<A HREF="mailto:stuart.ballard@corp.fast.net">stuart.ballard@corp.fast.net</A>&gt;
To: Ian MacLean &lt;<A HREF="mailto:ianm@ActiveState.com">ianm@ActiveState.com</A>&gt;
Cc: Theo Spears &lt;<A HREF="mailto:mono@terrarium.f9.co.uk">mono@terrarium.f9.co.uk</A>&gt;, <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
Subject: Re: [Mono-list] Making code conditional on &quot;not running on =
mono&quot;?

Ian MacLean wrote:
&gt;<i> We do somthing similar in nant. Except we use #ifdef mono.
</I>&gt;<i> Another way to test if you are on windows it to check the value of=20
</I>&gt;<i> DirectorySeperatorchar. That won't help if you're trying to test for=20
</I>&gt;<i> mono since you cold be on mono on wondows.
</I>
Hey cool, I didn't know that C# had a preprocessor :)

Question to the Mono developers: Would it be worth making &quot;/d:mono&quot; or=20
&quot;/d:mcs&quot; a default in mcs? That would make it possible to write code=20
that compiles differently on Mono without having to specialcase your=20
build scripts.

(this seems analagous to the fact that you can assume things like=20
&quot;#ifdef linux&quot; and &quot;#ifdef gcc&quot; in C and get meaningful results without=20
having to explicitly -D them on the commandline)

Stuart.

--=20
Stuart Ballard, Senior Web Developer
FASTNET - Web Solutions
(215) 283-2300, ext. 126
www.fast.net



--__--__--

_______________________________________________
Mono-list mailing list
<A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>


End of Mono-list Digest

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014070.html">[Mono-list] LAMESPEC?:
 System.Diagnostics.DiagnosticsConfigurationHandler
</A></li>
	<LI> Next message: <A HREF="014032.html">[Mono-list] Re: Mono-list digest, Vol 1 #973 - 13 msgs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14031">[ date ]</a>
              <a href="thread.html#14031">[ thread ]</a>
              <a href="subject.html#14031">[ subject ]</a>
              <a href="author.html#14031">[ author ]</a>
         </LI>
       </UL>
</body></html>
