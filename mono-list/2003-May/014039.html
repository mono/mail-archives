<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Making code conditional on &quot;not running on mono&quot;?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:miguel%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="014030.html">
   <LINK REL="Next"  HREF="014044.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Making code conditional on &quot;not running on mono&quot;?
   </H1>
    <B>Miguel de Icaza
    </B> 
    <A HREF="mailto:miguel%40ximian.com"
       TITLE="[Mono-list] Making code conditional on &quot;not running on mono&quot;?">miguel@ximian.com
       </A><BR>
    <I>18 May 2003 17:08:39 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="014030.html">[Mono-list] Making code conditional on &quot;not running on mono&quot;?
</A></li>
        <LI> Next message: <A HREF="014044.html">[Mono-list] Making code conditional on &quot;not running on mono&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14039">[ date ]</a>
              <a href="thread.html#14039">[ thread ]</a>
              <a href="subject.html#14039">[ subject ]</a>
              <a href="author.html#14039">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> &gt; We do somthing similar in nant. Except we use #ifdef mono.
</I>&gt;<i> &gt; Another way to test if you are on windows it to check the value of 
</I>&gt;<i> &gt; DirectorySeperatorchar. That won't help if you're trying to test for 
</I>&gt;<i> &gt; mono since you cold be on mono on wondows.
</I>&gt;<i> 
</I>&gt;<i> Hey cool, I didn't know that C# had a preprocessor :)
</I>&gt;<i> 
</I>&gt;<i> Question to the Mono developers: Would it be worth making &quot;/d:mono&quot; or 
</I>&gt;<i> &quot;/d:mcs&quot; a default in mcs? That would make it possible to write code 
</I>&gt;<i> that compiles differently on Mono without having to specialcase your 
</I>&gt;<i> build scripts.
</I>&gt;<i> 
</I>&gt;<i> (this seems analagous to the fact that you can assume things like 
</I>&gt;<i> &quot;#ifdef linux&quot; and &quot;#ifdef gcc&quot; in C and get meaningful results without 
</I>&gt;<i> having to explicitly -D them on the commandline)
</I>
Although we do have such define (__MonoCS__ as pointed out in the
thread elsewhere), its use is highly discouraged.

It can be used to workaround bugs in the Mono C# compiler, but should
not be used as a portability tool.  In principle your code should
dynamically determine the host OS and deal with it appropriately.

If you are willing to have two separate builds (one for Windows, and
one for Mono).  The __MonoCS__ is not the right tool to use either,
because this only flags whether the compiler being used is the Mono
one, not what platform the code is targeting.

Miguel.

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="014030.html">[Mono-list] Making code conditional on &quot;not running on mono&quot;?
</A></li>
	<LI> Next message: <A HREF="014044.html">[Mono-list] Making code conditional on &quot;not running on mono&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14039">[ date ]</a>
              <a href="thread.html#14039">[ thread ]</a>
              <a href="subject.html#14039">[ subject ]</a>
              <a href="author.html#14039">[ author ]</a>
         </LI>
       </UL>
</body></html>
