<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Which postgres client library?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:fxjrlists%40yahoo.com.br">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="013910.html">
   <LINK REL="Next"  HREF="013915.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Which postgres client library?
   </H1>
    <B>Francisco Figueiredo Jr.
    </B> 
    <A HREF="mailto:fxjrlists%40yahoo.com.br"
       TITLE="[Mono-list] Which postgres client library?">fxjrlists@yahoo.com.br
       </A><BR>
    <I>Sun, 11 May 2003 11:33:06 -0300 (ART)</I>
    <P><UL>
        <LI> Previous message: <A HREF="013910.html">[Mono-list] Building Mono - GLib2 Issues
</A></li>
        <LI> Next message: <A HREF="013915.html">[Mono-list] Regression tests: we need contributors.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13911">[ date ]</a>
              <a href="thread.html#13911">[ thread ]</a>
              <a href="subject.html#13911">[ subject ]</a>
              <a href="author.html#13911">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Stuart Ballard wrote:

&gt;<i>Off the top of my head:
</I>
&gt;<i>string sql = &quot;select * from table where name = :name&quot;;
</I>&gt;<i>string testValue = &quot;TestValue&quot;;
</I>&gt;<i>NpgsqlConnection conn = new NpgsqlConnection(connStr);
</I>&gt;<i>NpgsqlCommand cmd = new NpgsqlCommand(sql, conn);
</I>&gt;<i>NpgsqlParameter param = new NpgsqlParameter();
</I>&gt;<i>param.ParameterName = &quot;name&quot;;
</I>&gt;<i>param.DbType = DbType.String;
</I>&gt;<i>param.Size = testValue.Length;
</I>&gt;<i>param.Value = testValue;
</I>&gt;<i>cmd.Parameters.Add(param);
</I>&gt;<i>NpgsqlDataReader dr = cmd.ExecuteReader();
</I>&gt;<i>...
</I>


Yes, we were with this problems, but thanks Stuart Ballard which provided us
with his test cases, and later another one about inserting DBNull values
everything is working with the latests cvs code.
Mail thread can be found at: 
&lt;<A HREF="http://gborg.postgresql.org/pipermail/npgsql-general/2003-May/000446.html">http://gborg.postgresql.org/pipermail/npgsql-general/2003-May/000446.html</A>&gt;


&gt;<i>&quot;You can reduce your lines-of-code count by passing the name, type and 
</I>&gt;<i>size to the constructor of NpgsqlParameter but I forget what the exact 
</I>&gt;<i>order of arguments is. Or you can do what I do, which is write a 
</I>&gt;<i>function to create a parameter with a particular name, type, size and 
</I>&gt;<i>value so it all happens in one line.
</I>
&gt;<i>The benefit of this is supposedly that it's type-safe and you don't need 
</I>&gt;<i>to worry about quoting your parameter values, and the DB provider can 
</I>&gt;<i>optimise it by only sending the query once and sending different sets of 
</I>&gt;<i>parameters for the query. It looks like the Npgsql provider isn't 
</I>&gt;<i>implementing it correctly, though.
</I>

On server versions 7.3+ you can use the Prepare method of the command object
exactly to do this. It uses the prepare support to create a plan of the query
and later just sends the values in the parameters.


&gt;<i>Does anyone know if there are any plans to update Mono's Npgsql to their 
</I>&gt;<i>latest CVS?
</I>
I'm taking care of this right now. I'm justing clarifying a possible license
issue because Npgsql uses a port of MD5.cs from Postgresql code. This file was
contributed because the lack of its support in the .Net Compact Framework 
which could be a possible target of Npgsql and also because an transformation
of the return was needed also. Please check full story at:
&lt;<A HREF="http://gborg.postgresql.org/pipermail/npgsql-hackers/2003-February/000005.html">http://gborg.postgresql.org/pipermail/npgsql-hackers/2003-February/000005.html</A>&gt;
 
Again, thanks Stuart for helping us tracking this bugs.


=====
Regards,
Francisco Figueiredo Jr.
---
&quot;My grandfather once told me that there are two kinds of people: those
who work and those who take the credit. He told me to try to be in the
first group; there was less competition there.&quot;
- Indira Gandhi

_______________________________________________________________________
Yahoo! Mail
O melhor e-mail gratuito da internet: 6MB de espaço, antivírus, acesso POP3, filtro contra spam. 
<A HREF="http://br.mail.yahoo.com/">http://br.mail.yahoo.com/</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="013910.html">[Mono-list] Building Mono - GLib2 Issues
</A></li>
	<LI> Next message: <A HREF="013915.html">[Mono-list] Regression tests: we need contributors.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13911">[ date ]</a>
              <a href="thread.html#13911">[ thread ]</a>
              <a href="subject.html#13911">[ subject ]</a>
              <a href="author.html#13911">[ author ]</a>
         </LI>
       </UL>
</body></html>
