<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] patch: GetObjectData &amp; constructor for serialization support System.Net. WebProxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cesar%40ciencias.unam.mx">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="007681.html">
   <LINK REL="Next"  HREF="007690.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] patch: GetObjectData &amp; constructor for serialization support System.Net. WebProxy
   </H1>
    <B>Cesar Octavio López Nataren
    </B> 
    <A HREF="mailto:cesar%40ciencias.unam.mx"
       TITLE="[Mono-list] patch: GetObjectData &amp; constructor for serialization support System.Net. WebProxy">cesar@ciencias.unam.mx
       </A><BR>
    <I>Mon, 12 Aug 2002 15:37:04 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="007681.html">[Mono-list] FW: gtk# for Windows
</A></li>
        <LI> Next message: <A HREF="007690.html">[Mono-list] SharpZipLib and NCvsLib compiles under mono.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7688">[ date ]</a>
              <a href="thread.html#7688">[ thread ]</a>
              <a href="subject.html#7688">[ subject ]</a>
              <a href="author.html#7688">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a MIME-formatted message.  If you see this text it means that your
mail software cannot handle MIME-formatted messages.

--=_0_84850_1029184624
Content-Type: text/plain; format=flowed; charset=iso-8859-1
Content-Transfer-Encoding: 7bit

Hello, here's a small patch for the implementation
of the serialization support (implements ISerializable) for 
System.Net.WebProxy.
I attach the xml obtained when you serialize a WebProxy with MS .Net
(for name compatibility) 

Best regards mono:: team.
(feedback welcome) 

cesar 

--=_0_84850_1029184624
Content-Disposition: attachment; filename=&quot;System.Net.WebProxy.xml&quot;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;; name=&quot;System.Net.WebProxy.xml&quot;
Content-Transfer-Encoding: quoted-printable

&lt;SOAP-ENV:Envelope xmlns:xsi=3D&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance=">http://www.w3.org/2001/XMLSchema-instance=</A>
&quot; xmlns:xsd=3D&quot;<A HREF="http://www.w3.org/2001/XMLSchema"">http://www.w3.org/2001/XMLSchema&quot;</A> xmlns:SOAP-ENC=3D&quot;http:/=
/schemas.xmlsoap.org/soap/encoding/&quot; xmlns:SOAP-ENV=3D&quot;<A HREF="http://schemas.xml=">http://schemas.xml=</A>
soap.org/soap/envelope/&quot; xmlns:clr=3D&quot;<A HREF="http://schemas.microsoft.com/soap/e=">http://schemas.microsoft.com/soap/e=</A>
ncoding/clr/1.0&quot; SOAP-ENV:encodingStyle=3D&quot;<A HREF="http://schemas.xmlsoap.org/soa=">http://schemas.xmlsoap.org/soa=</A>
p/encoding/&quot;&gt;=0D
&lt;SOAP-ENV:Body&gt;=0D
&lt;a1:WebProxy id=3D&quot;ref-1&quot; xmlns:a1=3D&quot;<A HREF="http://schemas.microsoft.com/clr/ns=">http://schemas.microsoft.com/clr/ns=</A>
assem/System.Net/System%2C%20Version%3D1.0.3300.0%2C%20Culture%3Dneutral%=
2C%20PublicKeyToken%3Db77a5c561934e089&quot;&gt;=0D
&lt;_BypassOnLocal&gt;true&lt;/_BypassOnLocal&gt;=0D
&lt;_ProxyAddress href=3D&quot;#ref-3&quot;/&gt;=0D
&lt;_BypassList xsi:type=3D&quot;xsd:anyType&quot; xsi:null=3D&quot;1&quot;/&gt;=0D
&lt;/a1:WebProxy&gt;=0D
&lt;a2:Uri id=3D&quot;ref-3&quot; xmlns:a2=3D&quot;<A HREF="http://schemas.microsoft.com/clr/nsassem=">http://schemas.microsoft.com/clr/nsassem=</A>
/System/System%2C%20Version%3D1.0.3300.0%2C%20Culture%3Dneutral%2C%20Publ=
icKeyToken%3Db77a5c561934e089&quot;&gt;=0D
&lt;AbsoluteUri id=3D&quot;ref-4&quot;&gt;<A HREF="http://address/</AbsoluteUri">http://address/&lt;/AbsoluteUri</A>&gt;=0D
&lt;/a2:Uri&gt;=0D
&lt;/SOAP-ENV:Body&gt;=0D
&lt;/SOAP-ENV:Envelope&gt;=0D

--=_0_84850_1029184624
Content-Disposition: attachment; filename=&quot;WebProxy.diff&quot;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;; name=&quot;WebProxy.diff&quot;
Content-Transfer-Encoding: 7bit

Index: WebProxy.cs
===================================================================
RCS file: /mono/mcs/class/System/System.Net/WebProxy.cs,v
retrieving revision 1.3
diff -u -r1.3 WebProxy.cs
--- WebProxy.cs	21 May 2002 15:56:21 -0000	1.3
+++ WebProxy.cs	12 Aug 2002 20:26:29 -0000
@@ -62,10 +62,15 @@
 			CheckBypassList ();
 		}
 		
-		[MonoTODO]
+
 		protected WebProxy (SerializationInfo serializationInfo, StreamingContext streamingContext) 
 		{
-			throw new NotImplementedException ();
+			if (serializationInfo == null)
+				throw new ArgumentNullException ();
+
+			BypassProxyOnLocal = serializationInfo.GetBoolean (&quot;_BypassOnLocal&quot;);
+			Address = (System.Uri) serializationInfo.GetValue (&quot;_ProxyAddress&quot;, typeof (Uri));
+			BypassList = (string []) serializationInfo.GetValue (&quot;_BypassList&quot;, typeof (string []));
 		}
 		
 		// Properties
@@ -163,11 +168,13 @@
 			}
 		}
 
-		[MonoTODO]		
+
 		void ISerializable.GetObjectData (SerializationInfo serializationInfo,
 		                                  StreamingContext streamingContext)
 		{
-			throw new NotImplementedException ();
+			serializationInfo.AddValue (&quot;_BypassOnLocal&quot;, BypassProxyOnLocal);
+			serializationInfo.AddValue (&quot;_ProxyAddress&quot;, Address, typeof (Uri));
+			serializationInfo.AddValue (&quot;_BypassList&quot;, BypassList, typeof (string []));
 		}
 		
 		// Private Methods
@@ -191,4 +198,4 @@
 			return new Uri (address);
 		}
 	}
-}
\ No newline at end of file
+}

--=_0_84850_1029184624--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="007681.html">[Mono-list] FW: gtk# for Windows
</A></li>
	<LI> Next message: <A HREF="007690.html">[Mono-list] SharpZipLib and NCvsLib compiles under mono.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7688">[ date ]</a>
              <a href="thread.html#7688">[ thread ]</a>
              <a href="subject.html#7688">[ subject ]</a>
              <a href="author.html#7688">[ author ]</a>
         </LI>
       </UL>
</body></html>
