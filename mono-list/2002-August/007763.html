<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] patch: ctr and GetObjectData for NameObjectCollectionBase
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cesar%40ciencias.unam.mx">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="007772.html">
   <LINK REL="Next"  HREF="007764.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] patch: ctr and GetObjectData for NameObjectCollectionBase
   </H1>
    <B>Cesar Octavio López Nataren
    </B> 
    <A HREF="mailto:cesar%40ciencias.unam.mx"
       TITLE="[Mono-list] patch: ctr and GetObjectData for NameObjectCollectionBase">cesar@ciencias.unam.mx
       </A><BR>
    <I>Thu, 15 Aug 2002 15:08:02 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="007772.html">[Mono-list] Is nant being used by mono ?
</A></li>
        <LI> Next message: <A HREF="007764.html">[Mono-list] Build error on linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7763">[ date ]</a>
              <a href="thread.html#7763">[ thread ]</a>
              <a href="subject.html#7763">[ subject ]</a>
              <a href="author.html#7763">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a MIME-formatted message.  If you see this text it means that your
mail software cannot handle MIME-formatted messages.

--=_0_29639_1029442082
Content-Type: text/plain; format=flowed; charset=iso-8859-1
Content-Transfer-Encoding: 7bit

Best regards mono:: team. 

cesar 

--=_0_29639_1029442082
Content-Disposition: attachment; filename=&quot;NameObjectCollectionBaseChangeLogEntry.diff&quot;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;; name=&quot;NameObjectCollectionBaseChangeLogEntry.diff&quot;
Content-Transfer-Encoding: 7bit

Index: NameObjectCollectionBase.cs
===================================================================
RCS file: /mono/mcs/class/System/System.Collections.Specialized/NameObjectCollectionBase.cs,v
retrieving revision 1.7
diff -u -r1.7 NameObjectCollectionBase.cs
--- NameObjectCollectionBase.cs	23 Jul 2002 03:47:46 -0000	1.7
+++ NameObjectCollectionBase.cs	15 Aug 2002 19:52:54 -0000
@@ -1,5 +1,5 @@
 /**
- * System.Collections.Specialized.NamaValueCollection class implementation
+ * System.Collections.Specialized.NameValueCollection class implementation
  * 
  * Author: Gleb Novodran
  */
@@ -202,8 +202,19 @@
 		}
 		protected NameObjectCollectionBase( SerializationInfo info, StreamingContext context )
 		{
-			throw new Exception(&quot;Not implemented yet&quot;);
+			int i, tmpCount;
+
+			this.IsReadOnly = (bool) info.GetValue (&quot;ReadOnly&quot;, typeof (bool));
+			this.m_hashprovider = (IHashCodeProvider) info.GetValue (&quot;HashProvider&quot;, typeof (IHashCodeProvider));
+			this.m_comparer = (IComparer) info.GetValue (&quot;Comparer&quot;, typeof (IComparer));
+			tmpCount = (int) info.GetValue (&quot;Count&quot;, typeof (int));		
+			string [] tmpKeys = (string []) info.GetValue (&quot;Keys&quot;, typeof (string []));
+			object [] tmpObjs = (object []) info.GetValue (&quot;Values&quot;, typeof (object []));
+		
+			for (i = 0; i &lt; tmpCount; i++)
+				BaseAdd (tmpKeys [i], tmpObjs [i]);
 		}
+
 		protected NameObjectCollectionBase( int capacity, IHashCodeProvider hashProvider, IComparer comparer )
 		{
 			m_readonly = false;
@@ -249,9 +260,14 @@
 		// GetHashCode
 		
 		// ISerializable
-		public virtual void /*ISerializable*/ GetObjectData( SerializationInfo info, StreamingContext context )
+		public virtual void GetObjectData( SerializationInfo info, StreamingContext context )
 		{
-			throw new Exception(&quot;Not implemented yet&quot;);
+			info.AddValue (&quot;ReadOnly&quot;, this.IsReadOnly, typeof (bool));
+			info.AddValue (&quot;HashProvider&quot;, this.HashCodeProvider, typeof (IHashCodeProvider));
+			info.AddValue (&quot;Comparer&quot;, this.Comparer , typeof (IComparer));
+			info.AddValue (&quot;Count&quot;, this.Count, typeof (int));
+			info.AddValue (&quot;Keys&quot;, this.BaseGetAllKeys (), typeof (string []));
+			info.AddValue (&quot;Values&quot;, this.BaseGetAllValues () , typeof (object [])); 
 		}
 
 		// ICollection
Index: ChangeLog
===================================================================
RCS file: /mono/mcs/class/System/System.Collections.Specialized/ChangeLog,v
retrieving revision 1.13
diff -u -r1.13 ChangeLog
--- ChangeLog	23 Jul 2002 03:47:46 -0000	1.13
+++ ChangeLog	15 Aug 2002 19:58:07 -0000
@@ -1,3 +1,7 @@
+2002-08-15  Cesar Octavio Lopez Nataren &lt;<A HREF="mailto:cesar@ciencias.unam.mx">cesar@ciencias.unam.mx</A>&gt;
+	* NameObjectCollectionBase.cs: implemented the ctr and GetObjectData method 
+	needed for ISerializable implementation.
+
 2002-07-22  Tim Coleman &lt;<A HREF="mailto:tim@timcoleman.com">tim@timcoleman.com</A>&gt;
 	* NameObjectCollectionBase.cs: added iterator stubb to 
 		NameObjectCollectionBase.KeysCollection

--=_0_29639_1029442082--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="007772.html">[Mono-list] Is nant being used by mono ?
</A></li>
	<LI> Next message: <A HREF="007764.html">[Mono-list] Build error on linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7763">[ date ]</a>
              <a href="thread.html#7763">[ thread ]</a>
              <a href="subject.html#7763">[ subject ]</a>
              <a href="author.html#7763">[ author ]</a>
         </LI>
       </UL>
</body></html>
