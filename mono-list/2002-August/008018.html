<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] building the embed test for windows ( before Re:
 Mono Release 0.15 Binaries for Win32
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jason%40379.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="008017.html">
   <LINK REL="Next"  HREF="008027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] building the embed test for windows ( before Re:
 Mono Release 0.15 Binaries for Win32
   </H1>
    <B>J. Perkins
    </B> 
    <A HREF="mailto:jason%40379.com"
       TITLE="[Mono-list] building the embed test for windows ( before Re:
 Mono Release 0.15 Binaries for Win32">jason@379.com
       </A><BR>
    <I>Thu, 29 Aug 2002 08:28:57 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="008017.html">[Mono-list] building the embed test for windows ( before Re: Mono Release 0.15 Binaries for Win32
</A></li>
        <LI> Next message: <A HREF="008027.html">[Mono-list] Re: building the embed test for windows ( before Re: Mono Release 0.15 Binaries for Win32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8018">[ date ]</a>
              <a href="thread.html#8018">[ thread ]</a>
              <a href="subject.html#8018">[ subject ]</a>
              <a href="author.html#8018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>tei wrote:
&gt;<i> C --&gt; game engine (sound, render, etc..), main .exe (quake.exe)
</I>&gt;<i> C# --&gt; game logic ( game rules, phisic of entitys, etc.. ), user .dll ( progsdat.dll )
</I>&gt;<i> 
</I>&gt;<i> runtime mono + engine + user mods (c#) + free medias =  free games
</I>
I am doing something very similar to this...well, exactly like this.
However, instead of building mono directly into my application, I
have a &quot;bootloader&quot; app that execve()'s the mono executable. So the
user enters a command like:

    &gt; mygame.exe mymod   ||  ./mygame mymod

The 'mygame' executable then...

   1) tries to run 'mymod' directly: execv(&quot;mymod&quot;, argv); If the app
      is running on windows and MS .NET is installed, or if it's
      running on Linux and the user has registered Mono or P.NET with
      the kernel, this will succeed, else...

   2) Try to run 'mono mymod', using the system search path. If mono
      is installed on the system, this will succeed, else...

   3) Try to launch mono from a special directory, I use &quot;runtime&quot;,
      so 'runtime/mono mymod'.

I highly recommend this approach. I can ship a version of mono with
my app, but it will only get used if there is not a newer version
already installed on the system. The user can upgrade their runtime
without having to upgrade my app. And when .NET becomes ubiquitous,
as I believe it will, I can just remove mono from my install.

Jason
379



&gt;<i> 
</I>&gt;<i> * For the C# I have not problem, users can download mono and build is .dll file without problem.
</I>&gt;<i> * For the engine, I have not problem, I can build from gcc friendly sources or wait something
</I>&gt;<i> ready to work with VC++ friendly sources. The problem is...
</I>&gt;<i> 
</I>&gt;<i> ..I need &lt;mono/jit/jit.h&gt; compiled for windows. I have failed to build mono with the
</I>&gt;<i> latest cygwin (no glib2). I have installed the latest mingw, may help? ( I dont know how to
</I>&gt;<i> compile mono with mingw ).
</I>&gt;<i> 
</I>&gt;<i> What I need to build the embed test in windows?
</I>&gt;<i> How I can do this?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Miguel, Sergei, Thanks for the help.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Tei
</I>&gt;<i> 
</I>&gt;<i>  - - -
</I>&gt;<i> 
</I>&gt;<i> [..]
</I>&gt;<i> 
</I>&gt;<i> S&gt; Again this is probably a more specific version of the same question, but here is some
</I>&gt;<i> S&gt; info about running VC++ binaries compiled for CIL target under Mono.
</I>&gt;<i> S&gt; It's possible, but requires a couple of extra things:
</I>&gt;<i> S&gt;     * Micorosoft.VisualC.dll - some attributes and custom mods used by VC++
</I>&gt;<i> S&gt;        (not yet in CVS, but included in my Win32 binary build);
</I>&gt;<i> S&gt;     * System.Runtime.CompilerServices.CallConv* classes, custom mods (same here);
</I>&gt;<i> 
</I>&gt;<i> S&gt; Until recently there was a tiny bug in custom mods reader, so Mono was entering infinite-loop
</I>&gt;<i> S&gt; when loading binaries produced by VC++, this was the main showstopper and it's already fixed.
</I>&gt;<i> S&gt; For some reason it's necessary to disassemble those binaries, then assemble them again,
</I>&gt;<i> S&gt; Mono still refuses to load original binaries (I will look into this issue later).
</I>&gt;<i> S&gt; Also, it's necessary to use appropriate compiler switches to ensure that there is no native
</I>&gt;<i> S&gt; code in the resulting assemblies, and entry point is set to IL code (for EXEs).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> S&gt; All in all, it's already possible to compile C++ code with VisualC compiler and then run
</I>&gt;<i> S&gt; the binary on Linux under Mono. This is very nice, IMO :-)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> S&gt; Sergey
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> S&gt; ----- Original Message -----
</I>&gt;<i> S&gt; From: &quot;Miguel de Icaza&quot; &lt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&gt;
</I>&gt;<i> S&gt; To: &quot;tei&quot; &lt;<A HREF="mailto:421621@ingta.unizar.es">421621@ingta.unizar.es</A>&gt;
</I>&gt;<i> S&gt; Cc: &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
</I>&gt;<i> S&gt; Sent: Wednesday, August 28, 2002 7:09 PM
</I>&gt;<i> S&gt; Subject: Re: [Mono-list] Re: Mono Release 0.15 Binaries for Win32
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i>hey,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>And, is this supported for other compilers?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Maybe, as long as they generate CLI code and as long as we do not have
</I>&gt;&gt;&gt;<i>bugs.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>Will be posible to compile apps with embed stuff with MSVC++?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I have not tested any C++ code, but I would certainly appreciate some
</I>&gt;&gt;&gt;<i>samples running on Mono.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>How I can make OpenGL apps with C#?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Use one of the GL bindings (Mark's are on CVS and aim for more
</I>&gt;&gt;&gt;<i>completeness, or you can try the more mature CSGL).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Miguel
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@ximian.com">Mono-list@ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="008017.html">[Mono-list] building the embed test for windows ( before Re: Mono Release 0.15 Binaries for Win32
</A></li>
	<LI> Next message: <A HREF="008027.html">[Mono-list] Re: building the embed test for windows ( before Re: Mono Release 0.15 Binaries for Win32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8018">[ date ]</a>
              <a href="thread.html#8018">[ thread ]</a>
              <a href="subject.html#8018">[ subject ]</a>
              <a href="author.html#8018">[ author ]</a>
         </LI>
       </UL>
</body></html>
