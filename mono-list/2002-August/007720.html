<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] patch Regex: GetObjectData &amp; ctr for ISerializable impl.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cesar%40ciencias.unam.mx">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="007719.html">
   <LINK REL="Next"  HREF="007721.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] patch Regex: GetObjectData &amp; ctr for ISerializable impl.
   </H1>
    <B>Cesar Octavio López Nataren
    </B> 
    <A HREF="mailto:cesar%40ciencias.unam.mx"
       TITLE="[Mono-list] patch Regex: GetObjectData &amp; ctr for ISerializable impl.">cesar@ciencias.unam.mx
       </A><BR>
    <I>Wed, 14 Aug 2002 00:33:32 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="007719.html">[Mono-list] patch SoapFault: GetObjectData &amp; ctr for ISerializable imp.
</A></li>
        <LI> Next message: <A HREF="007721.html">[Mono-list] mcs won't allow implementation of interfaces with static methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7720">[ date ]</a>
              <a href="thread.html#7720">[ thread ]</a>
              <a href="subject.html#7720">[ subject ]</a>
              <a href="author.html#7720">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a MIME-formatted message.  If you see this text it means that your
mail software cannot handle MIME-formatted messages.

--=_0_3127_1029303212
Content-Type: text/plain; format=flowed; charset=iso-8859-1
Content-Transfer-Encoding: 7bit

In this patch I used the ToString () member method to store the
&quot;pattern&quot; (I'm not sure If this is the correct type that must be used, but 
at least I could use the base constructor to build back ;)) 

Great work &amp; Best regards mono:: team! 

cesar 

--=_0_3127_1029303212
Content-Disposition: attachment; filename=&quot;regex_SoapSerialization.xml&quot;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;; name=&quot;regex_SoapSerialization.xml&quot;
Content-Transfer-Encoding: quoted-printable

&lt;SOAP-ENV:Envelope xmlns:xsi=3D&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance=">http://www.w3.org/2001/XMLSchema-instance=</A>
&quot; xmlns:xsd=3D&quot;<A HREF="http://www.w3.org/2001/XMLSchema"">http://www.w3.org/2001/XMLSchema&quot;</A> xmlns:SOAP-ENC=3D&quot;http:/=
/schemas.xmlsoap.org/soap/encoding/&quot; xmlns:SOAP-ENV=3D&quot;<A HREF="http://schemas.xml=">http://schemas.xml=</A>
soap.org/soap/envelope/&quot; xmlns:clr=3D&quot;<A HREF="http://schemas.microsoft.com/soap/e=">http://schemas.microsoft.com/soap/e=</A>
ncoding/clr/1.0&quot; SOAP-ENV:encodingStyle=3D&quot;<A HREF="http://schemas.xmlsoap.org/soa=">http://schemas.xmlsoap.org/soa=</A>
p/encoding/&quot;&gt;=0D
&lt;SOAP-ENV:Body&gt;=0D
&lt;a1:Regex id=3D&quot;ref-1&quot; xmlns:a1=3D&quot;<A HREF="http://schemas.microsoft.com/clr/nsass=">http://schemas.microsoft.com/clr/nsass=</A>
em/System.Text.RegularExpressions/System%2C%20Version%3D1.0.3300.0%2C%20C=
ulture%3Dneutral%2C%20PublicKeyToken%3Db77a5c561934e089&quot;&gt;=0D
&lt;pattern id=3D&quot;ref-3&quot;&gt;cEsAr&lt;/pattern&gt;=0D
&lt;options xsi:type=3D&quot;a1:RegexOptions&quot; xmlns:a1=3D&quot;<A HREF="http://schemas.microsof=">http://schemas.microsof=</A>
t.com/clr/nsassem/System.Text.RegularExpressions/System%2C%20Version%3D1.=
0.3300.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3Db77a5c561934e089&quot;&gt;C=
ompiled&lt;/options&gt;=0D
&lt;/a1:Regex&gt;=0D
&lt;/SOAP-ENV:Body&gt;=0D
&lt;/SOAP-ENV:Envelope&gt;=0D

--=_0_3127_1029303212
Content-Disposition: attachment; filename=&quot;regex.diff&quot;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;; name=&quot;regex.diff&quot;
Content-Transfer-Encoding: 7bit

Index: regex.cs
===================================================================
RCS file: /mono/mcs/class/System/System.Text.RegularExpressions/regex.cs,v
retrieving revision 1.8
diff -u -r1.8 regex.cs
--- regex.cs	31 Jul 2002 16:41:39 -0000	1.8
+++ regex.cs	14 Aug 2002 05:29:43 -0000
@@ -172,6 +172,12 @@
 			}
 		}
 
+
+		public Regex (SerializationInfo info, StreamingContext context) :
+			this (info.GetString (&quot;pattern&quot;), 
+			      (RegexOptions) info.GetValue (&quot;options&quot;, typeof (RegexOptions))) {			
+		}
+
 		// public instance properties
 		
 		public RegexOptions Options {
@@ -337,7 +343,8 @@
 		// ISerializable interface
 
 		public void GetObjectData (SerializationInfo info, StreamingContext context) {
-			throw new Exception (&quot;Not implemented.&quot;);
+			info.AddValue (&quot;pattern&quot;, this.ToString (), typeof (string));
+			info.AddValue (&quot;options&quot;, this.Options, typeof (RegexOptions));
 		}
 
 		// internal

--=_0_3127_1029303212--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="007719.html">[Mono-list] patch SoapFault: GetObjectData &amp; ctr for ISerializable imp.
</A></li>
	<LI> Next message: <A HREF="007721.html">[Mono-list] mcs won't allow implementation of interfaces with static methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7720">[ date ]</a>
              <a href="thread.html#7720">[ thread ]</a>
              <a href="subject.html#7720">[ subject ]</a>
              <a href="author.html#7720">[ author ]</a>
         </LI>
       </UL>
</body></html>
