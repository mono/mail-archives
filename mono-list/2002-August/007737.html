<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mcs won't allow implementation of interfaces with static methods
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:serge%40wildwestsoftware.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="007736.html">
   <LINK REL="Next"  HREF="007740.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mcs won't allow implementation of interfaces with static methods
   </H1>
    <B>Serge
    </B> 
    <A HREF="mailto:serge%40wildwestsoftware.com"
       TITLE="[Mono-list] mcs won't allow implementation of interfaces with static methods">serge@wildwestsoftware.com
       </A><BR>
    <I>Thu, 15 Aug 2002 04:06:19 +0300</I>
    <P><UL>
        <LI> Previous message: <A HREF="007736.html">[Mono-list] mcs won't allow implementation of interfaces with static methods
</A></li>
        <LI> Next message: <A HREF="007740.html">[Mono-list] mcs won't allow implementation of interfaces with static methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7737">[ date ]</a>
              <a href="thread.html#7737">[ thread ]</a>
              <a href="subject.html#7737">[ subject ]</a>
              <a href="author.html#7737">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> static methods are not allowed on interfaces
</I>
This is not allowed in C# but actually allowed in metadata.
See Part II, 11 Semantics of Interfaces
&quot;Interfaces may have static fields and methods, but they shall not have instance fields or methods.&quot;

However, I believe, CSC issues error message as well in this case (when trying to implement interface with static methods).
So perhaps MCS behaviour is correct as well.

However, it seems that CSC has another error in this respect (I'm not 100% sure at the moment).

Consider the following ILASM code that has static member in interface.
(This could be achieved with MC++ as well, I believe).

.assembly StaticIfc {}

.class interface public auto ansi StaticIfc {
     .method public static int32 GetInt() cil managed {
          ldc.i4 0xACDC
          ret
     }
}

.class public auto ansi StaticImpl {
     .method public static int32 GetInt() cil managed {
          call int32 StaticIfc::GetInt()
          ret
     }
}


Now the following will compile correctly with CSC:

 public static void Main() {
    Console.WriteLine(&quot;0x{0:X}&quot;, StaticImpl.GetInt());
 }

While this will produce invalid code:

    Console.WriteLine(&quot;0x{0:X}&quot;, StaticIfc.GetInt());

It seems that MCS produces correct code in both cases.


Sergey


----- Original Message ----- 
From: &quot;Martin Baulig&quot; &lt;<A HREF="mailto:martin@gnome.org">martin@gnome.org</A>&gt;
To: &quot;Jeroen Frijters&quot; &lt;<A HREF="mailto:mono@jeroen.nu">mono@jeroen.nu</A>&gt;
Cc: &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
Sent: Thursday, August 15, 2002 2:36 AM
Subject: Re: [Mono-list] mcs won't allow implementation of interfaces with static methods


&gt;<i> &quot;Jeroen Frijters&quot; &lt;<A HREF="mailto:mono@jeroen.nu">mono@jeroen.nu</A>&gt; writes:
</I>&gt;<i> 
</I>&gt;<i> &gt; When I have a C# class that tries to implement an interface (created
</I>&gt;<i> &gt; with ILASM) that contains a static method, mcs gives an error saying
</I>&gt;<i> &gt; that I should implement the static method (which obviously doesn't make
</I>&gt;<i> &gt; sense).
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I don't understand what you're trying to do: static methods are not
</I>&gt;<i> allowed on interfaces, that'd be an error CS0106.  MCS currently
</I>&gt;<i> doesn't report that error but abort with a parsing error instead since
</I>&gt;<i> its parser won't recognize `static' as a keyword if it's used on an
</I>&gt;<i> interface method.
</I>&gt;<i> 
</I>&gt;<i> ====
</I>&gt;<i> using System;
</I>&gt;<i> 
</I>&gt;<i> interface A
</I>&gt;<i> {
</I>&gt;<i> static void Test ();
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> class X : A
</I>&gt;<i> {
</I>&gt;<i> public static void Test ()
</I>&gt;<i> {
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> static void Main ()
</I>&gt;<i> {
</I>&gt;<i> }
</I>&gt;<i> }
</I>&gt;<i> ====
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Martin Baulig
</I>&gt;<i> <A HREF="mailto:martin@gnome.org">martin@gnome.org</A>
</I>&gt;<i> 
</I>





</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="007736.html">[Mono-list] mcs won't allow implementation of interfaces with static methods
</A></li>
	<LI> Next message: <A HREF="007740.html">[Mono-list] mcs won't allow implementation of interfaces with static methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7737">[ date ]</a>
              <a href="thread.html#7737">[ thread ]</a>
              <a href="subject.html#7737">[ subject ]</a>
              <a href="author.html#7737">[ author ]</a>
         </LI>
       </UL>
</body></html>
