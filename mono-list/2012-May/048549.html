<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono 2.0 issues in Ubuntu - where is the problem and how will it be fixed?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Mono%202.0%20issues%20in%20Ubuntu%20-%20where%20is%20the%20problem%0A%20and%20how%20will%20it%20be%20fixed%3F&In-Reply-To=%3C4FAD408B.1090602%40veritas-vos-liberabit.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048547.html">
   <LINK REL="Next"  HREF="048550.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono 2.0 issues in Ubuntu - where is the problem and how will it be fixed?</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Mono%202.0%20issues%20in%20Ubuntu%20-%20where%20is%20the%20problem%0A%20and%20how%20will%20it%20be%20fixed%3F&In-Reply-To=%3C4FAD408B.1090602%40veritas-vos-liberabit.com%3E"
       TITLE="[Mono-list] Mono 2.0 issues in Ubuntu - where is the problem and how will it be fixed?">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Fri May 11 16:38:35 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="048547.html">[Mono-list] Mono 2.0 issues in Ubuntu - where is the problem and how will it be fixed?
</A></li>
        <LI>Next message: <A HREF="048550.html">[Mono-list] Mono 2.0 issues in Ubuntu - where is the problem and how will it be fixed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48549">[ date ]</a>
              <a href="thread.html#48549">[ thread ]</a>
              <a href="subject.html#48549">[ subject ]</a>
              <a href="author.html#48549">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

IBBoard wrote:
&gt;<i> But if I force my app to run under the 4.0 runtime using a switch then
</I>&gt;<i> it works without error (as far as I've seen). That implies that there
</I>&gt;<i> might something that could be handled, possibly by Mono or possibly by
</I>&gt;<i> Ubuntu if it isn't appropriate for Mono itself to do it.
</I>This does not imply there is something that could be automatically handled.
It is just because some code is compiled to use Type.op_inequality() 
(which only exists in 4.0) in gtk-sharp.dll, while the app entrypoint 
loaded 2.0 mscorlib.dll. It is CLI design that only one mscorlib is loaded.
If you run your app as in 4.0, the entrypoint loads 4.0 mscorlib and 
Type.op_inequality() is there, hence that error never happens.
The mono runtime is not at the position to determine whether your app 
won't run on 2.0 or not.

&gt;<i> Someone in Ubuntu might have decided that GTK# for .Net 4.0 only might
</I>&gt;<i> have been a &quot;feature&quot; and hence not a bug when 2.0 apps won't work,
</I>&gt;<i> but it seems like a very badly planned and unnecessary change.
</I>
That sounds wrong to me. Reasons:
- ABI compatibility is supported only each of 2.0 and 4.0. No one 
(Microsoft or Mono) assured cross-ABI compatibility.
- Whether Ubuntu supports 2.0, 4.0 or both, especially for each 
&quot;application&quot; package (here gtk# is an &quot;application&quot; as compared to the 
mono &quot;framework&quot;), is totally up to its target apps. They don't ship 
primary apps in 2.0, so they don't ship their deps in 2.0 profile.
- It is like Windows and .NET 1.1. People don't complain that Microsoft 
does not ship .NET 1.1 in the latest OSes. By not shipping 1.1, any 1.1 
apps could be broken like yours.

&gt;<i> The script I have appears to work for now, but I'd prefer a better way
</I>&gt;<i> to detect when to add the fix to the command-line (something that does
</I>&gt;<i> feature detection rather than OS detection, and so will work across
</I>&gt;<i> derivatives and other OSes that go the same route). If anyone has any
</I>&gt;<i> suggestions or scripts then I'd be glad to hear them.
</I>&gt;<i>
</I>&gt;<i> Recompiling for .Net 4 or rebuilding GTK# just for the sake of Ubuntu
</I>&gt;<i> just seems unnecessary.
</I>2.0 will be deprecated and will vanish from mono later, like we killed 
1.1 profile in the past. Building for 4.0 is absolutely the right direction.

And this rather sounds like &quot;I don't want to build 2.0 packages, so you 
build 2.0 packages for me instead&quot; ...

Atsushi Eno

&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> IBBoard
</I>&gt;<i>
</I>&gt;<i> On 11 May 2012 09:00, Atsushi Eno&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">atsushieno at veritas-vos-liberabit.com</A>&gt;  wrote:
</I>&gt;&gt;<i> Hello,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To my understanding, Ubuntu does not support GTK# for .NET 2.0 based mono
</I>&gt;&gt;<i> runtime, which is not a bug. You are trying to run an app with insufficient
</I>&gt;&gt;<i> software components on an OS. If you want to use the feature that the OS
</I>&gt;&gt;<i> does not provide, you'll have to provide that by yourself, like it wouldn't
</I>&gt;&gt;<i> make sense to bug Microsoft that WP7 does not ship with System.Data.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (In other words, while .NET 2.0 could be the LCD, gtk# on .NET 2.0 is not .)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I believe you could build and provide gtk# which is based on .NET 2.0
</I>&gt;&gt;<i> profile. Putting package for public would help Ubuntu users. Or
</I>&gt;&gt;<i> Ubuntu/Debian people may already have such packages apart from official
</I>&gt;&gt;<i> repos. AFAIR there are some &quot;2.0-cil&quot; packages in Ubuntu.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Atsushi Eno
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> IBBoard wrote:
</I>&gt;&gt;&gt;<i> It appears there is a problem with running older .Net apps on the latest
</I>&gt;&gt;&gt;<i> versions of Ubuntu. If you compile for .Net 2.0 (perhaps because that is
</I>&gt;&gt;&gt;<i> your lowest common denominator, because you are working cross-platform and
</I>&gt;&gt;&gt;<i> you know some people will still be using WinXP without the huge .Net 3/3.5/4
</I>&gt;&gt;&gt;<i> updates) and run it on Ubuntu then you currently get an instant crash with a
</I>&gt;&gt;&gt;<i> message like &quot;Missing method System.Type::op_Inequality(Type,Type) in
</I>&gt;&gt;&gt;<i> assembly /usr/lib/mono/2.0/mscorlib.dll, referenced in assembly
</I>&gt;&gt;&gt;<i> /usr/lib/mono/gac/gtk-sharp/2.12.0.0__35e10195dab3c99f/gtk-sharp.dll&quot;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It looks like this problem is quite prevalent and problematic
</I>&gt;&gt;&gt;<i> (<A HREF="https://bugs.launchpad.net/ubuntu/+source/mono/+bug/882501,">https://bugs.launchpad.net/ubuntu/+source/mono/+bug/882501,</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://stackoverflow.com/questions/10473868/mono-gtk-hello-world-failing-missing-method,">http://stackoverflow.com/questions/10473868/mono-gtk-hello-world-failing-missing-method,</A>
</I>&gt;&gt;&gt;<i> and the rest of Google). The two fixes people have are &quot;recompile&quot; (only an
</I>&gt;&gt;&gt;<i> option if you're *only* targeting Ubuntu and want to use v4.0) or &quot;add the
</I>&gt;&gt;&gt;<i> --runtime=v4.0 switch&quot; to force a 2.0 app to run as 4.0.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Based on the assembly mentioned in error and what I've picked up online,
</I>&gt;&gt;&gt;<i> am I right in understanding that this is a purely Ubuntu-caused problem
</I>&gt;&gt;&gt;<i> because GTK# is now build with the .Net 4.0-compatible compiler? Is there
</I>&gt;&gt;&gt;<i> any way they can fix this, or are we stuck with it? And are there any
</I>&gt;&gt;&gt;<i> sensible and non-hackish ways to work around this in the meantime?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm working on my own Bash wrapper at the moment to fix this only when
</I>&gt;&gt;&gt;<i> necessary
</I>&gt;&gt;&gt;<i> (<A HREF="http://dev.ibboard.co.uk/repos/IBDev-IBBoard.WarFoundry.GUI.GTK/files/tip/WarFoundry.sh">http://dev.ibboard.co.uk/repos/IBDev-IBBoard.WarFoundry.GUI.GTK/files/tip/WarFoundry.sh</A>)
</I>&gt;&gt;&gt;<i> but I'm sure there must be better ways to do it.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks.
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048547.html">[Mono-list] Mono 2.0 issues in Ubuntu - where is the problem and how will it be fixed?
</A></li>
	<LI>Next message: <A HREF="048550.html">[Mono-list] Mono 2.0 issues in Ubuntu - where is the problem and how will it be fixed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48549">[ date ]</a>
              <a href="thread.html#48549">[ thread ]</a>
              <a href="subject.html#48549">[ subject ]</a>
              <a href="author.html#48549">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
