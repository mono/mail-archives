<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] How to detect which version of Mono a library is compiled with?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20How%20to%20detect%20which%20version%20of%20Mono%20a%20library%20is%0A%20compiled%20with%3F&In-Reply-To=%3C4FB405D6.9020606%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048564.html">
   <LINK REL="Next"  HREF="048557.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] How to detect which version of Mono a library is compiled with?</H1>
    <B>IBBoard</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20How%20to%20detect%20which%20version%20of%20Mono%20a%20library%20is%0A%20compiled%20with%3F&In-Reply-To=%3C4FB405D6.9020606%40gmail.com%3E"
       TITLE="[Mono-list] How to detect which version of Mono a library is compiled with?">ibboard at gmail.com
       </A><BR>
    <I>Wed May 16 19:53:58 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="048564.html">[Mono-list] How to detect which version of Mono a library is compiled with?
</A></li>
        <LI>Next message: <A HREF="048557.html">[Mono-list] .ctor () is too complex.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48565">[ date ]</a>
              <a href="thread.html#48565">[ thread ]</a>
              <a href="subject.html#48565">[ subject ]</a>
              <a href="author.html#48565">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/05/12 19:23, Jonathan Pryor wrote:
&gt;<i> On May 11, 2012, at 2:54 PM, IBBoard wrote:
</I>&gt;&gt;<i> What I want is a less hack-ish run script (currently using Bash). The proper way to do it is to check for features rather than string matching and version checking (which caused lots of JavaScript issues with people doing IE version checks badly). Is there a way to probe the profile that a Mono library was compiled with from Bash, without the ...-dev package being installed?
</I>&gt;<i>
</I>&gt;<i> `monodis --assemblyref` will tell you which assemblies an assembly references, including version numbers, but (1) I don't know if monodis is in a -dev package or not (I imagine it is), and (2) I'm not sure that would actually help you, as you'd need to &quot;somehow&quot; find an assembly to run monodis against. Running it against your app won't help -- you know it's a 2.0 app -- so you'd presumably want System.dll or gtk-sharp.dll or something, and how do you find the appropriate path for _that_?
</I>&gt;<i>
</I>&gt;<i> I'd suggest a different hack:
</I>&gt;<i>
</I>&gt;<i> 	bindir=$(dirname `which mono`)
</I>&gt;<i> 	if [ -d &quot;$bindir/../lib/mono/2.0&quot; ]; then
</I>&gt;<i> 		# you have the 2.0 runtime...
</I>&gt;<i> 	else
</I>&gt;<i> 		# you don't; try for the 4.0 runtime and use `mono --runtime`...
</I>&gt;<i> 	fi
</I>&gt;<i>
</I>&gt;<i> You may also need to check for lib64 in addition to lib (iirc Fedora likes lib64).
</I>&gt;<i>
</I>&gt;<i> In general, if $prefix/lib/mono/2.0 exists, then the 2.0 profile exists.
</I>&gt;<i>
</I>&gt;<i>   - Jon
</I>&gt;<i>
</I>&gt;<i>
</I>
I've just checked on openSUSE and monodis is provided by mono-devel, so 
unfortunately not everyone would have that (even if I could work out how 
to reliably check the gtk-sharp.dll!)

I'll look at checking profiles or something similar, but I'm not sure 
that'll work - I've got 4.0 on openSUSE but using 2.0 works, and you can 
install 2.0 on Ubuntu, you just don't seem to be able to use any 
libraries outside of core.

Looking at the contents of gtk-sharp2 on openSUSE (rpm -q --filesbypkg 
gtk-sharp2), I can see .pc files, but a) I'm not sure there is anything 
specific enough to be useful in them and b) might other distros ship 
them in -devel packages?

I feel like there should be a neater solution here - a way to check 
dependencies without just falling over in an ugly heap - but maybe there 
are just too many uncertainties and inconsistencies.

Thanks.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048564.html">[Mono-list] How to detect which version of Mono a library is compiled with?
</A></li>
	<LI>Next message: <A HREF="048557.html">[Mono-list] .ctor () is too complex.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48565">[ date ]</a>
              <a href="thread.html#48565">[ thread ]</a>
              <a href="subject.html#48565">[ subject ]</a>
              <a href="author.html#48565">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
