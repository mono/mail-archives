<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Async sockets and memory leaks in BeginSend
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Async%20sockets%20and%20memory%20leaks%20in%20BeginSend&In-Reply-To=%3C1337885203753-4649533.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048586.html">
   <LINK REL="Next"  HREF="048595.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Async sockets and memory leaks in BeginSend</H1>
    <B>xplicit</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Async%20sockets%20and%20memory%20leaks%20in%20BeginSend&In-Reply-To=%3C1337885203753-4649533.post%40n4.nabble.com%3E"
       TITLE="[Mono-list] Async sockets and memory leaks in BeginSend">svg at ngs.ru
       </A><BR>
    <I>Thu May 24 18:46:43 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="048586.html">[Mono-list] Async sockets and memory leaks in BeginSend
</A></li>
        <LI>Next message: <A HREF="048595.html">[Mono-list] Async sockets and memory leaks in BeginSend
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48594">[ date ]</a>
              <a href="thread.html#48594">[ thread ]</a>
              <a href="subject.html#48594">[ subject ]</a>
              <a href="author.html#48594">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you for you suggestion.

SocketAsyncResult has Dispose method in it's implementation, but how could I
call Dispose on SocketAsyncResult if this class is internal? BeginSend
returns IAsyncResult interface, which does not have Dispose in the interface
definition. 

I found some old posts in the internet about similar issue with
OverlappedAsyncResult (internal implementation of IAsyncResult in BeginSend
in .NET). They told, that in .NET 1.1 there was a memory leak in similar
scenarious, because buffer was pinned and memory could not be defragmented
by GC. Also, they told, that in .NET 2.0 such issue was fixed. 

They recommended  to pool buffers to prevent reallocating them in memory. I
followed this advice and removed creation of SendStateObject from the Send
function.  Creation SendStateObject only one time per each client in class
constructor helped me to minimize memory leaks, so they now not so huge, but
still present. 



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Async-sockets-and-memory-leaks-in-BeginSend-tp4648844p4649533.html">http://mono.1490590.n4.nabble.com/Async-sockets-and-memory-leaks-in-BeginSend-tp4648844p4649533.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048586.html">[Mono-list] Async sockets and memory leaks in BeginSend
</A></li>
	<LI>Next message: <A HREF="048595.html">[Mono-list] Async sockets and memory leaks in BeginSend
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48594">[ date ]</a>
              <a href="thread.html#48594">[ thread ]</a>
              <a href="subject.html#48594">[ subject ]</a>
              <a href="author.html#48594">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
