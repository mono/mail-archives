<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Consuming WebService
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Consuming%20WebService&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045791.html">
   <LINK REL="Next"  HREF="045793.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Consuming WebService</H1>
    <B>Nicky.Hochmuth</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Consuming%20WebService&In-Reply-To="
       TITLE="[Mono-list] Consuming WebService">nicky.hochmuth at fhnw.ch
       </A><BR>
    <I>Fri Sep 17 08:17:27 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="045791.html">[Mono-list] Can't upgrade monodevelop
</A></li>
        <LI>Next message: <A HREF="045793.html">[Mono-list]  reflector and contributing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45792">[ date ]</a>
              <a href="thread.html#45792">[ thread ]</a>
              <a href="subject.html#45792">[ subject ]</a>
              <a href="author.html#45792">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello Mono-Community

I developed a Silverlight application (with VS for Windows)that presents
some data received from a WebService. I also host and develop the concerning
WebService.

The WebService is written in Java (javax.jws.*) and is running on a Sun
GlassFish Enterprise Server v2.1.1.
and is working fine for Java, .Net and Silverligth clients.

You will find the WebService here: 
<A HREF="http://147.86.9.121:48148/WRCServer/ContaminantService?WSDL">http://147.86.9.121:48148/WRCServer/ContaminantService?WSDL</A>
<A HREF="http://147.86.9.121:48148/WRCServer/ContaminantService?WSDL">http://147.86.9.121:48148/WRCServer/ContaminantService?WSDL</A> 

And the required clientaccesspolicy.xml here: 
<A HREF="http://147.86.9.121:48148/clientaccesspolicy.xml">http://147.86.9.121:48148/clientaccesspolicy.xml</A>
<A HREF="http://147.86.9.121:48148/clientaccesspolicy.xml">http://147.86.9.121:48148/clientaccesspolicy.xml</A> 

The deployment descriptor (web.xml) is very basic and contains the
following:

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance&quot;">http://www.w3.org/2001/XMLSchema-instance&quot;</A>
xmlns=&quot;<A HREF="http://java.sun.com/xml/ns/javaee&quot;">http://java.sun.com/xml/ns/javaee&quot;</A>
xmlns:web=&quot;<A HREF="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;">http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</A>
xsi:schemaLocation=&quot;<A HREF="http://java.sun.com/xml/ns/javaee">http://java.sun.com/xml/ns/javaee</A>
<A HREF="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;">http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</A> id=&quot;WebApp_ID&quot;
version=&quot;2.5&quot;&gt;
  &lt;display-name&gt;WRC&lt;/display-name&gt;
  &lt;welcome-file-list&gt;
    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
  &lt;/welcome-file-list&gt;

&lt;/web-app&gt;


The problem is that the WebService communication with a Mono-Client does not
work and also the Silverligth-App. does not communicate with the service in
the Moonligth plugIn.

I created a mono-client with:

wsdl2 <A HREF="http://147.86.9.121:48148/WRCServer/ContaminantService?WSDL">http://147.86.9.121:48148/WRCServer/ContaminantService?WSDL</A>

compiled it with:

gmcs /target:library ContaminantService.cs -r:System.Web.Services


I wrote the following test application: wrctest.cs


using System;
 
class WRCTest
{
	public static void Main (string [] args)
	{
		ContaminantService Service1 = new ContaminantService();
		
		Service1.aliveCompleted += new aliveCompletedEventHandler(alive);
		Service1.getRangeCompleted += new getRangeCompletedEventHandler(range);

		Console.WriteLine(&quot;Service URL: &quot;+Service1.Url);		

		//Service1.aliveAsync();
		
		//create a user state / not really necessary
		DateTime userState = DateTime.Now;
		Console.WriteLine(&quot;State: &quot;+userState);
		
		//call the service for H20 with userState
		Service1.getRangeAsync(&quot;H2O&quot;,userState);
		
		//wait for replay
		Console.ReadLine();

	}

	private static void alive(object sender, aliveCompletedEventArgs args)
	{
		Console.Write(&quot;Service alive response: &quot;);
		Console.WriteLine(args.Result);
	}

	private static void range(object sender, getRangeCompletedEventArgs args)
	{
		Console.Write(&quot;Service range response: &quot;);
		Console.WriteLine(args.Result.contaminantName);
	}
}


and compiled it with: 

gmcs /r:ContaminantService.dll wrctest.cs

the application (running with &quot;mono wrctest.exe&quot; on a xubuntu OS) does not
behave like expected.

I call the the WebMethod (getRange(String)) only once but the
getRangeCompleted event is fired twice but without any result. 
The output is:


Service URL: <A HREF="http://147.86.9.121:48148/WRCServer/ContaminantService">http://147.86.9.121:48148/WRCServer/ContaminantService</A>
State: 9/17/2010 2:06:42 PM
Service range response: Service range response:


The expected result would be a complex type providing additional
informations for the input (H2O).
Also if i call the Alive() WebMethod that should return the basic bool
(true) result nothing is happen.

If i copy and run the wrctest.exe to a WinXp OS i receive at least a
NullReferenceException

Service URL: <A HREF="http://147.86.9.121:48148/WRCServer/ContaminantService">http://147.86.9.121:48148/WRCServer/ContaminantService</A>
State: 17.09.2010 11:53:14
Service range response:
Unbehandelte Ausnahme: System.NullReferenceException: Der Objektverweis
wurde ni
cht auf eine Objektinstanz festgelegt.
   bei WRCTest.range(Object sender, getRangeCompletedEventArgs args)
   bei ContaminantService.OngetRangeCompleted(Object arg)
   bei System.Threading._ThreadPoolWaitCallback.WaitCallback_Context(Object
state)
   bei System.Threading.ExecutionContext.Run(ExecutionContext
executionContext, ContextCallback callback, Object state)
   bei
System.Threading._ThreadPoolWaitCallback.PerformWaitCallbackInternal(_ThreadPoolWaitCallback
tpWaitCallBack)
   bei System.Threading._ThreadPoolWaitCallback.PerformWaitCallback(Object
state)


Has anybody an idea what is wrong? Do I build the mono-client in a wrong way
or do I have to configure the WebService in an other way?

Thank you all in advanced for your kind assistance.

Best regards
Nicky Hochmuth


-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Consuming-WebService-tp2543783p2543783.html">http://mono.1490590.n4.nabble.com/Consuming-WebService-tp2543783p2543783.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045791.html">[Mono-list] Can't upgrade monodevelop
</A></li>
	<LI>Next message: <A HREF="045793.html">[Mono-list]  reflector and contributing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45792">[ date ]</a>
              <a href="thread.html#45792">[ thread ]</a>
              <a href="subject.html#45792">[ subject ]</a>
              <a href="author.html#45792">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
