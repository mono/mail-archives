<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] UDP and ICMP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:boykin%40pobox.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="018144.html">
   <LINK REL="Next"  HREF="018152.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] UDP and ICMP
   </H1>
    <B>P Oscar Boykin
    </B> 
    <A HREF="mailto:boykin%40pobox.com"
       TITLE="[Mono-list] UDP and ICMP">boykin@pobox.com
       </A><BR>
    <I>Thu, 5 Feb 2004 00:40:06 -0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="018144.html">[Mono-list] UDP and ICMP
</A></li>
        <LI> Next message: <A HREF="018152.html">[Mono-list] UDP and ICMP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18145">[ date ]</a>
              <a href="thread.html#18145">[ thread ]</a>
              <a href="subject.html#18145">[ subject ]</a>
              <a href="author.html#18145">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--jI8keyz6grp/JLjh
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

See, that's the problem.

I really don't care about getting the ICMP message, or sending it.  I
just want my NON-ROOT user to know that the host he is sending a UDP
packet to is responding with &quot;destination unreachable&quot; packets.

There has to be (or rather should be) a way for a non-root user to know
that the packets are not being received.  Otherwise, what good is the
ICMP message in the first place.

In my opinion, it would be nice if it went something like this:

If an ICMP message is sent, telling that a previous UDP packet was not
received, the ReceiveFrom method in socket should throw an exception the
next time it is called, and it should give this information.  But I
guess it does not matter what I think, it only matters what the API
does.

I am still hoping someone can tell me a way for a non-root user to get
access to this information.

Thanks,
POB.

On Thu, Feb 05, 2004 at 07:11:16AM +0100, Giuseppe Greco wrote:
&gt;<i> ... and of course, the application should be run
</I>&gt;<i> as root.
</I>&gt;<i>=20
</I>&gt;<i> j3d.
</I>&gt;<i>=20
</I>&gt;<i> &gt; Hello All.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am using using mono to send udp packets between two hosts.  At some
</I>&gt;<i> &gt; point, one host may go offline.  If I watch the network (using ethereal)
</I>&gt;<i> &gt; I see the UDP packet go from A-&gt;B, and host B responds with a ICMP
</I>&gt;<i> &gt; destination unreachable packet.  However, I don't see how I can get
</I>&gt;<i> &gt; access to that packet in my application.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I was hoping that SendTo or ReceiveFrom could throw exceptions, but I
</I>&gt;<i> &gt; don't believe that is how they work.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I also tried to make a separate socket to listen for the ICMP packets,
</I>&gt;<i> &gt; but under Linux and Mono 0.30, I get an exception when I try to create
</I>&gt;<i> &gt; the socket to listen for ICMP messages:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Unhandled Exception: System.Net.Sockets.SocketException: Access denied
</I>&gt;<i> &gt; in (unmanaged) /usr/local/lib/libmono.so.0(mono_raise_exception+0x1f)
</I>&gt;<i> &gt; [0x4009176f]
</I>&gt;<i> &gt; in (unmanaged) /usr/local/lib/libmono.so.0 [0x400b1d7d]
</I>&gt;<i> &gt; in &lt;0x00054&gt; System.Net.Sockets.Socket:.ctor
</I>&gt;<i> &gt; (System.Net.Sockets.AddressFamily,System.Net.Sockets.SocketType,System.=
</I>Net.Sockets.ProtocolType)
&gt;<i> &gt; in &lt;0x000d3&gt; Gnucla.UdpEdgeListener:.ctor (int)
</I>&gt;<i> &gt; in &lt;0x001b0&gt; Gnucla.EchoTest:Main (string[])
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can anyone suggest a method that host A can see that host B is no longer
</I>&gt;<i> &gt; listening without doing it at the application layer?  I just want the
</I>&gt;<i> &gt; ICMP packet to have an effect.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks.
</I>&gt;<i> &gt; POB
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; <A HREF="mailto:boykin@pobox.com">boykin@pobox.com</A>    <A HREF="http://pobox.com/~boykin">http://pobox.com/~boykin</A>    jabber:
</I>&gt;<i> &gt; <A HREF="mailto:johnynek@jabber.org">johnynek@jabber.org</A>
</I>&gt;<i> &gt; fingerprint=3DD250 4AD9 4544 B7D2 A17C  911D D608 D387 6718 D75F
</I>&gt;<i> &gt; fix copyright:
</I>&gt;<i> &gt; <A HREF="http://cyberlaw.stanford.edu/lessig/blog/archives/EAFAQ.html">http://cyberlaw.stanford.edu/lessig/blog/archives/EAFAQ.html</A>
</I>&gt;<i> &gt;
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>&gt;<i> ----------------------------------------
</I>&gt;<i> Giuseppe Greco
</I>&gt;<i>=20
</I>&gt;<i> ::agamura::
</I>&gt;<i>=20
</I>&gt;<i> phone:  +41 (0)91 604 67 65
</I>&gt;<i> mobile: +41 (0)76 390 60 32
</I>&gt;<i> email:  <A HREF="mailto:giuseppe.greco@agamura.com">giuseppe.greco@agamura.com</A>
</I>&gt;<i> web:    www.agamura.com
</I>&gt;<i> ----------------------------------------
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
--=20
<A HREF="mailto:boykin@pobox.com">boykin@pobox.com</A>    <A HREF="http://pobox.com/~boykin">http://pobox.com/~boykin</A>    jabber: <A HREF="mailto:johnynek@jabber.org">johnynek@jabber.org</A>
fingerprint=3DD250 4AD9 4544 B7D2 A17C  911D D608 D387 6718 D75F
fix copyright: <A HREF="http://cyberlaw.stanford.edu/lessig/blog/archives/EAFAQ.html">http://cyberlaw.stanford.edu/lessig/blog/archives/EAFAQ.html</A>

--jI8keyz6grp/JLjh
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.2 (GNU/Linux)

iD8DBQFAIgFl1gjTh2cY118RAlSaAKCSax+Ifl5q8GNsOP8qoH1zIF80+gCeLR5B
eXXsBtPlM9fh9A7bJDlhN8M=
=K7R4
-----END PGP SIGNATURE-----

--jI8keyz6grp/JLjh--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="018144.html">[Mono-list] UDP and ICMP
</A></li>
	<LI> Next message: <A HREF="018152.html">[Mono-list] UDP and ICMP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18145">[ date ]</a>
              <a href="thread.html#18145">[ thread ]</a>
              <a href="subject.html#18145">[ subject ]</a>
              <a href="author.html#18145">[ author ]</a>
         </LI>
       </UL>
</body></html>
