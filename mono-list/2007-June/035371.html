<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Enable/disable Paste menu item
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Enable/disable%20Paste%20menu%20item&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035372.html">
   <LINK REL="Next"  HREF="035418.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Enable/disable Paste menu item</H1>
    <B>Andrus</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Enable/disable%20Paste%20menu%20item&In-Reply-To="
       TITLE="[Mono-list] Enable/disable Paste menu item">kobruleht2 at hot.ee
       </A><BR>
    <I>Mon Jun 18 05:54:47 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="035372.html">[Mono-list] Why is MONO network streaming much slower than	.NET?
</A></li>
        <LI>Next message: <A HREF="035418.html">[Mono-list] Enable/disable Paste menu item
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35371">[ date ]</a>
              <a href="thread.html#35371">[ thread ]</a>
              <a href="subject.html#35371">[ subject ]</a>
              <a href="author.html#35371">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I need to automatically enable/disable Paste menu item in MONO .NET 2 
Winform Edit menu.

<A HREF="http://www.yoda.arachsys.com/csharp/faq/#clipboard">http://www.yoda.arachsys.com/csharp/faq/#clipboard</A>  explains how to 
implement this using p/invoke.

How to implement this functionality in MONO WinForms in Linux ?

Andrus.


<A HREF="http://www.yoda.arachsys.com/csharp/faq/#clipboard">http://www.yoda.arachsys.com/csharp/faq/#clipboard</A> contains:


How can I monitor changes to the Clipboard contents (e.g. to enable/disable 
items on the Edit menu, depending on whether there is something to paste)?

Import the SetClipboardViewer API function, and call it in your 
initialisation code, passing the handle of your form. The form will then 
receive WM_DRAWCLIPBOARD messages, which you can handle in WndProc.

using System.Runtime.InteropServices;
...
[DllImport(&quot;user32.dll&quot;)]
public static extern int SetClipboardViewer(int hWnd);
private const int WM_DRAWCLIPBOARD = 776;

// ... somewhere in initialisation code ...
SetClipboardViewer(this.Handle.ToInt32());

protected override void WndProc(ref Message m)
{
  // Process the message normally
  base.WndProc(ref m);

  if (m.Msg == WM_DRAWCLIPBOARD)
  {
     // ... respond to Clipboard changes ...
  }
}

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035372.html">[Mono-list] Why is MONO network streaming much slower than	.NET?
</A></li>
	<LI>Next message: <A HREF="035418.html">[Mono-list] Enable/disable Paste menu item
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35371">[ date ]</a>
              <a href="thread.html#35371">[ thread ]</a>
              <a href="subject.html#35371">[ subject ]</a>
              <a href="author.html#35371">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
