<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Exceptions and error codes.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tum%40veridicus.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="013093.html">
   <LINK REL="Next"  HREF="013059.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Exceptions and error codes.
   </H1>
    <B>Thong (Tum) Nguyen
    </B> 
    <A HREF="mailto:tum%40veridicus.com"
       TITLE="[Mono-list] Exceptions and error codes.">tum@veridicus.com
       </A><BR>
    <I>Wed, 26 Mar 2003 04:09:21 +1200</I>
    <P><UL>
        <LI> Previous message: <A HREF="013093.html">[Mono-list] Exceptions and error codes.
</A></li>
        <LI> Next message: <A HREF="013059.html">[Mono-list] Exceptions and error codes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13122">[ date ]</a>
              <a href="thread.html#13122">[ thread ]</a>
              <a href="subject.html#13122">[ subject ]</a>
              <a href="author.html#13122">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Miguel,

There are definitely examples where exceptions can slow down your code.
The thing is, how often would those cases appear in the real world, and
when they do appear would they be a hotspot?

WRT your example...

If you're expecting many of the lines to contain non-integers then it
would make sense to seek an alternative method because you're then using
exceptions to notify you of a situation that you *normally* expect.  The
problem isn't that Int32.Parse throws exceptions, it's because you're
using Int32.Parse in a way that wasn't intended.  Int32.Parse isn't
designed for testing whether something is an int or not.  Int32.Parse
expects to be given valid input most of the time and fails (with an
exception) when you (or the user) &quot;accidentally&quot; give it invalid input.
In your example, it looks like a non-int line isn't invalid input but
simply alternate input.

Since the loop appears to be a meaty part of the program my solution
would be to use a tokenizer.

^Tum

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="mailto:mono-list-admin@lists.ximian.com">mono-list-admin@lists.ximian.com</A> [mailto:mono-list-
</I>&gt;<i> <A HREF="mailto:admin@lists.ximian.com">admin@lists.ximian.com</A>] On Behalf Of Miguel de Icaza
</I>&gt;<i> Sent: Monday, 24 March 2003 3:43 p.m.
</I>&gt;<i> To: <A HREF="mailto:tum@veridicus.com">tum@veridicus.com</A>
</I>&gt;<i> Cc: <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-list] Exceptions and error codes.
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i>     You do raise interesting points.
</I>&gt;<i> 
</I>&gt;<i>     The problem with exceptions is that throwing and catching an
</I>&gt;<i> exception is an expensive operation.  Using an exception as a
</I>mechanism
&gt;<i> to return a failure error, when failure is likely to happen is
</I>&gt;<i> inefficient.
</I>&gt;<i> 
</I>&gt;<i>     Contrast `likely to happen error' with `exceptional condition:
</I>&gt;<i> internal error, or unlikely error to happen'.
</I>&gt;<i> 
</I>&gt;<i>     Lets consider a sample: a program that uses Int32.Parse to detect
</I>&gt;<i> whether an integer is available, or maybe a string command exists, and
</I>&gt;<i> we are parsing, say, a million records:
</I>&gt;<i> 
</I>&gt;<i> 	for (i = 0; i &lt; one_million; i++){
</I>&gt;<i> 		string line = readline ();
</I>&gt;<i> 		try {
</I>&gt;<i> 			v = Int32.Parse (line);
</I>&gt;<i> 			handle_numberic_argument ();
</I>&gt;<i> 		} catch {
</I>&gt;<i> 			ParseCommand (line);
</I>&gt;<i> 		}
</I>&gt;<i> 	}
</I>&gt;<i> 
</I>&gt;<i>     This is so bad, that you probably want to rewrite the code to
</I>&gt;<i> pro-actively avoid parsing things that are known not to be integers.
</I>&gt;<i> 
</I>&gt;<i>     It is easy to turn an error-code API into an exception-throwing
</I>API
&gt;<i> with no performance loss.   The opposite is not possible.
</I>&gt;<i> 
</I>&gt;<i> Miguel
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> 
</I>&gt;<i> ---
</I>&gt;<i> Incoming mail is certified Virus Free.
</I>&gt;<i> Checked by AVG anti-virus system (<A HREF="http://www.grisoft.com">http://www.grisoft.com</A>).
</I>&gt;<i> Version: 6.0.461 / Virus Database: 260 - Release Date: 10/03/2003
</I>&gt;<i> 
</I>
---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (<A HREF="http://www.grisoft.com">http://www.grisoft.com</A>).
Version: 6.0.461 / Virus Database: 260 - Release Date: 10/03/2003
 


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="013093.html">[Mono-list] Exceptions and error codes.
</A></li>
	<LI> Next message: <A HREF="013059.html">[Mono-list] Exceptions and error codes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13122">[ date ]</a>
              <a href="thread.html#13122">[ thread ]</a>
              <a href="subject.html#13122">[ subject ]</a>
              <a href="author.html#13122">[ author ]</a>
         </LI>
       </UL>
</body></html>
