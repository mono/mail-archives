<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Exceptions and error codes.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:piersh%40friskit.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="013122.html">
   <LINK REL="Next"  HREF="013060.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Exceptions and error codes.
   </H1>
    <B>Piers Haken
    </B> 
    <A HREF="mailto:piersh%40friskit.com"
       TITLE="[Mono-list] Exceptions and error codes.">piersh@friskit.com
       </A><BR>
    <I>Thu, 20 Mar 2003 12:59:19 -0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="013122.html">[Mono-list] Exceptions and error codes.
</A></li>
        <LI> Next message: <A HREF="013060.html">[Mono-list] Exceptions and error codes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13059">[ date ]</a>
              <a href="thread.html#13059">[ thread ]</a>
              <a href="subject.html#13059">[ subject ]</a>
              <a href="author.html#13059">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Thong Nguyen [mailto:<A HREF="mailto:tum@veridicus.com">tum@veridicus.com</A>]=20
</I>&gt;<i> Sent: Thursday, March 20, 2003 12:14 PM
</I>&gt;<i> To: <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
</I>&gt;<i> Subject: [Mono-list] Exceptions and error codes.
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>&gt;<i> Hiya guys,
</I>&gt;<i>=20
</I>&gt;<i> I recently read some recommendations on the GTK# mailing list=20
</I>&gt;<i> regarding the use of exceptions.
</I>
You make some good arguments, but I think most of it is irrelevant
since, in order to remain compatible with .NET, Mono must behave the
same way with respect to returning (or not) exceptions. The MSDN docs
describe exactly what exceptions/return codes File.Exists and File.Open
should return, Mono should do the same (unless the docs are in error). A
lot of work has already been done on this. You'll notice that many of
the test cases test whether or not the correct exception is being
returned.

Of course, for new class libraries many of your arguments are valid.
Although I'd argue that the case for exceptions in .NET isn't as
clear-cut as you propose.

For example, since you're not required to declare the exceptions that a
method throws, it's just as easy to miss handling an exception as it is
to miss handling a return code. The argument that it's easy to forget to
handle a return code is purely subjective. I've been writing COM code in
C++ since '95 and I've found that it's quite simple to get into the
habit of checking the result of every call and doing it in a way that's
readable. In fact I often find that code that explicitly checks return
codes for each call is easier to read than code that relies on catch
blocks, since you know exactly which error handling code is associated
with each call. Catch locks are fine if you want to apply the same
exception handling code to a whole bunch of code, but as soon as you
have to nest them they become unwieldy.

For example, compare:

try
{
	DoSomething ();
	try
	{
		DoSomethingElse ();
		// some more code here...
	}
	catch (Exception e)
	{
		// handle exception in DoSomething ()
	}
}
Catch (Exception e)
{
	// handle exception in DoSomethingElse ()
}

With

HRESULT hr;
if (FAILED (hr =3D DoSomething ()))
{
	// handle error in DoSomething ()
}
else if (FAILED (hr =3D DoSomethingElse ()))
{
	// handle error in DoSomethingElse ()
}
else
{
	// some more code here...
}



Or, if you don't need nested catch blocks:


HRESULT hr;
if (FAILED (hr =3D DoSomething ()) ||
    FAILED (hr =3D DoSomethingElse ()))
{
	// handle error
}
else
{
	// some more code here...
}

Or, if you prefer your error handling to be at the end:

HRESULT hr;
if (SUCCEEDED (hr =3D DoSomething ()) &amp;&amp;
    SUCCEEDED (hr =3D DoSomethingElse ()))
{
	// some more code here...
}
else
{
	// handle error
}

Piers.

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="013122.html">[Mono-list] Exceptions and error codes.
</A></li>
	<LI> Next message: <A HREF="013060.html">[Mono-list] Exceptions and error codes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13059">[ date ]</a>
              <a href="thread.html#13059">[ thread ]</a>
              <a href="subject.html#13059">[ subject ]</a>
              <a href="author.html#13059">[ author ]</a>
         </LI>
       </UL>
</body></html>
