<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Exceptions and error codes.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:philippe.lavoie%40cactus.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="013148.html">
   <LINK REL="Next"  HREF="013121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Exceptions and error codes.
   </H1>
    <B>Philippe Lavoie
    </B> 
    <A HREF="mailto:philippe.lavoie%40cactus.ca"
       TITLE="[Mono-list] Exceptions and error codes.">philippe.lavoie@cactus.ca
       </A><BR>
    <I>Tue, 25 Mar 2003 10:19:25 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="013148.html">[Mono-list] PPC atomic functions
</A></li>
        <LI> Next message: <A HREF="013121.html">[Mono-list] Exceptions and error codes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13114">[ date ]</a>
              <a href="thread.html#13114">[ thread ]</a>
              <a href="subject.html#13114">[ subject ]</a>
              <a href="author.html#13114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think the original point made was that unless you have profiling
information to back up any claim that &quot;this part of the software&quot; will
slow you down. Then use a mechanism which will make your code more
maintainable.

The example below clearly has performance issues. However if the
function handle_number_argument below takes 100 ms to process, the 5 or
10 extra lines of assembly added by the try/catch becomes meaningless in
terms of overall performance. You'd better spend your time improving
that function then rewriting the parser of Int32.

Sometimes, it could be best to improve the JIT to better handle embedded
try/catch statements :)

Just another way of looking at it. I don't think there is a &quot;one and
true&quot; way. It's all a grey area when you start to mix performance /
maintainability / readability / philosophy, etc.

Phil=20

-----Original Message-----
From: Miguel de Icaza [mailto:<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>]=20
Sent: Sunday, March 23, 2003 10:43 PM
To: <A HREF="mailto:tum@veridicus.com">tum@veridicus.com</A>
Cc: <A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>
Subject: Re: [Mono-list] Exceptions and error codes.

Hello,

    You do raise interesting points.

    The problem with exceptions is that throwing and catching an
exception is an expensive operation.  Using an exception as a mechanism
to return a failure error, when failure is likely to happen is
inefficient.

    Contrast `likely to happen error' with `exceptional condition:
internal error, or unlikely error to happen'. =20

    Lets consider a sample: a program that uses Int32.Parse to detect
whether an integer is available, or maybe a string command exists, and
we are parsing, say, a million records:

	for (i =3D 0; i &lt; one_million; i++){
		string line =3D readline ();
		try {
			v =3D Int32.Parse (line);
			handle_numberic_argument ();
		} catch {
			ParseCommand (line);
		}
	}

    This is so bad, that you probably want to rewrite the code to
pro-actively avoid parsing things that are known not to be integers.

    It is easy to turn an error-code API into an exception-throwing API
with no performance loss.   The opposite is not possible.

Miguel
_______________________________________________
Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="013148.html">[Mono-list] PPC atomic functions
</A></li>
	<LI> Next message: <A HREF="013121.html">[Mono-list] Exceptions and error codes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13114">[ date ]</a>
              <a href="thread.html#13114">[ thread ]</a>
              <a href="subject.html#13114">[ subject ]</a>
              <a href="author.html#13114">[ author ]</a>
         </LI>
       </UL>
</body></html>
