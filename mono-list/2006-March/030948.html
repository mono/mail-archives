<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono.Unix.Native.Syscall.readlink memory corruption
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono.Unix.Native.Syscall.readlink%20memory%20corruption&In-Reply-To=BAY22-DAV69AC82609D7E6C027540BA3E10%40phx.gbl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030947.html">
   <LINK REL="Next"  HREF="030949.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono.Unix.Native.Syscall.readlink memory corruption</H1>
    <B>Andreas F&#228;rber</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono.Unix.Native.Syscall.readlink%20memory%20corruption&In-Reply-To=BAY22-DAV69AC82609D7E6C027540BA3E10%40phx.gbl"
       TITLE="[Mono-list] Mono.Unix.Native.Syscall.readlink memory corruption">andreas.faerber at web.de
       </A><BR>
    <I>Tue Mar 14 07:08:53 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="030947.html">[Mono-list] Mono.Unix.Native.Syscall.readlink memory corruption
</A></li>
        <LI>Next message: <A HREF="030949.html">[Mono-list] Mono.Unix.Native.Syscall.readlink memory corruption
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30948">[ date ]</a>
              <a href="thread.html#30948">[ thread ]</a>
              <a href="subject.html#30948">[ subject ]</a>
              <a href="author.html#30948">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;&gt;<i> On a related note:  if a C function mallocs some memory and returns a
</I>&gt;&gt;<i> pointer
</I>&gt;&gt;<i> to that memory, does p/invoke free the memory once marshalling is
</I>&gt;&gt;<i> complete?
</I>&gt;<i>
</I>&gt;<i> No. There is simply no way to automatically determine whether it
</I>&gt;<i> should be
</I>&gt;<i> freed and there is even less chance to determine how (using what
</I>&gt;<i> function)
</I>&gt;<i> it should be freed.
</I>&gt;<i>
</I>&gt;<i> If you want to do so you have to use an IntPtr that you can free
</I>&gt;<i> manually.
</I>&gt;<i> Note that you can alternatively use a custom marshaler but you have to do
</I>&gt;<i> the same with a more complex and probably more proper design.
</I>This is not entirely true. A returned string is actually automatically
freed when marshalled as string (as opposed to IntPtr). In that case
Mono does not determine whether it should be freed, it simply frees it.

Andreas
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030947.html">[Mono-list] Mono.Unix.Native.Syscall.readlink memory corruption
</A></li>
	<LI>Next message: <A HREF="030949.html">[Mono-list] Mono.Unix.Native.Syscall.readlink memory corruption
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30948">[ date ]</a>
              <a href="thread.html#30948">[ thread ]</a>
              <a href="subject.html#30948">[ subject ]</a>
              <a href="author.html#30948">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
