<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mod_mono: Win32 IO returned ERROR_NO_MORE_FILES (was	RE: Problem with files in apache-temp-aspnet-0)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mod_mono%3A%20Win32%20IO%20returned%20ERROR_NO_MORE_FILES%20%28was%0A%09RE%3A%20Problem%20with%20files%20in%20apache-temp-aspnet-0%29&In-Reply-To=4758F587.40003%40ndatech.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037166.html">
   <LINK REL="Next"  HREF="037294.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mod_mono: Win32 IO returned ERROR_NO_MORE_FILES (was	RE: Problem with files in apache-temp-aspnet-0)</H1>
    <B>Kevin Flanagan</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mod_mono%3A%20Win32%20IO%20returned%20ERROR_NO_MORE_FILES%20%28was%0A%09RE%3A%20Problem%20with%20files%20in%20apache-temp-aspnet-0%29&In-Reply-To=4758F587.40003%40ndatech.it"
       TITLE="[Mono-list] Mod_mono: Win32 IO returned ERROR_NO_MORE_FILES (was	RE: Problem with files in apache-temp-aspnet-0)">kevin.flanagan at bom.co.uk
       </A><BR>
    <I>Sun Dec  9 16:15:49 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="037166.html">[Mono-list] Problem with files in apache-temp-aspnet-0
</A></li>
        <LI>Next message: <A HREF="037294.html">[Mono-list] Mono 1.2.6/mod_mono: still getting Win32 IO returned	ERROR_NO_MORE_FILES
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37194">[ date ]</a>
              <a href="thread.html#37194">[ thread ]</a>
              <a href="subject.html#37194">[ subject ]</a>
              <a href="author.html#37194">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It might well be the same problem in fact, Nicola - stopping tmpwatch
running hasn't helped. So, I figured I'd tried upgrading from 1.2.4 to
1.2.5.1

That causes a different problem - the site won't run at all (500 Internal
Server Error). Looking at error_log, this seems to be where things go wrong:

System.IO.IOException: Win32 IO returned ERROR_NO_MORE_FILES. Path:
/var/www/vho
sts/queningtonbookclub.com/httpdocs
  at System.IO.Directory.GetFileSystemEntries (System.String path,
System.String
 pattern, FileAttributes mask, FileAttributes attrs) [0x00000]
  at System.IO.Directory.GetFiles (System.String path, System.String
pattern) [0
x00000]
  at System.IO.DirectoryInfo.GetFiles (System.String pattern) [0x00000]
  at (wrapper remoting-invoke-with-check) System.IO.DirectoryInfo:GetFiles
(stri
ng)
  at Mono.WebServer.ModMonoWorker.CheckDirectory (System.IO.DirectoryInfo
info)
[0x00000]
  at Mono.WebServer.ModMonoWorker.GetOrCreateApplication (System.String
vhost, I
nt32 port, System.String filepath, System.String virt) [0x00000]
  at Mono.WebServer.ModMonoWorker.InnerRun (System.Object state) [0x00000]
  at Mono.WebServer.ModMonoWorker.Run (System.Object state) [0x00000]
[Sun Dec 09 21:00:35 2007] [error] (70014)End of file found: read_data
failed
[Sun Dec 09 21:00:35 2007] [error] Command stream corrupted, last command
was -1

Reverting back to 1.2.4, everything works fine.

Anyone know what the problem might be here?

Kevin.


-----Message d'origine-----
De : Nicola Dell'Amico [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">webring at ndatech.it</A>]
Envoy&#233; : 07 December 2007 07:26
&#192; : Kevin Flanagan
Cc : <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list at lists.ximian.com</A>
Objet : Re: [Mono-list] Problem with files in apache-temp-aspnet-0


Kevin Flanagan wrote:
&gt;<i> Bah - suppose this kind of thing is only to be expected moving from one
</I>&gt;<i> distro to another. Yes, tmpwatch was set to run daily on /tmp. Stopping
</I>that
&gt;<i> seems likely to sort it.
</I>&gt;<i>
</I>&gt;<i> Thanks.
</I>&gt;<i>
</I>&gt;<i> Kevin.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -----Message d'origine-----
</I>&gt;<i> De : Marek Habersack [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">grendello at gmail.com</A>]
</I>&gt;<i> Envoye : 06 December 2007 22:22
</I>&gt;<i> A : Kevin Flanagan
</I>&gt;<i> Cc : <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list at lists.ximian.com</A>
</I>&gt;<i> Objet : Re: [Mono-list] Problem with files in apache-temp-aspnet-0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, 6 Dec 2007 22:13:56 -0000, &quot;Kevin Flanagan&quot;
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">kevin.flanagan at bom.co.uk</A>&gt;
</I>&gt;<i> scribbled:
</I>&gt;<i>
</I>&gt;&gt;<i> Environment: Mono 1.2.4, mod_mono 1.2.4, Fedora Core 5, ASP.NET 1.1,
</I>&gt;&gt;<i> Apache/2.2.2 running virtual domains configured with Plesk 8.2.0 and
</I>&gt;&gt;<i> autohosting with mod_mono.conf
</I>&gt;<i> [snip]
</I>&gt;&gt;<i> Bottom line is, what's going on with the compiled files, and why do I end
</I>&gt;<i> up
</I>&gt;&gt;<i> with that error page?
</I>&gt;<i> My guess is you have a cronjob which periodically (once a week?) cleans up
</I>&gt;<i> your /tmp directory and its subdirectories. Hunt around /etc/cron* for
</I>&gt;<i> clues.
</I>&gt;<i>
</I>&gt;<i> best regards,
</I>&gt;<i>
</I>&gt;<i> marek
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
Hi Kevin,

I hope you have solved but It sounds like the issue I coped with some
time ago.
I opened a bug (<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=324783">https://bugzilla.novell.com/show_bug.cgi?id=324783</A>) for
that and now it seems to be fixed on rev 1.2.5.1
I haven't tested 1.2.5.1 yet. I 'm still on rev 1.2.3.1, which works
fine for me .... it seems an issue with rev 1.2.4 and, FC5, Apache 2.2.2
... your configuration and mine seems look like the same.

In my test case rev 1.2.3.1 works fine while 1.2.4 gives the error, and
without any modification to cron jobs.

Nicola

----
<A HREF="http://www.ndatech.it">http://www.ndatech.it</A>


</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037166.html">[Mono-list] Problem with files in apache-temp-aspnet-0
</A></li>
	<LI>Next message: <A HREF="037294.html">[Mono-list] Mono 1.2.6/mod_mono: still getting Win32 IO returned	ERROR_NO_MORE_FILES
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37194">[ date ]</a>
              <a href="thread.html#37194">[ thread ]</a>
              <a href="subject.html#37194">[ subject ]</a>
              <a href="author.html#37194">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
