<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] random reflection crashes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20random%20reflection%20crashes&In-Reply-To=20071203111700.5ad02238%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037112.html">
   <LINK REL="Next"  HREF="037117.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] random reflection crashes</H1>
    <B>Scott Fluto</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20random%20reflection%20crashes&In-Reply-To=20071203111700.5ad02238%40gmail.com"
       TITLE="[Mono-list] random reflection crashes">Scott.Fluto at cmgl.ca
       </A><BR>
    <I>Mon Dec  3 10:24:49 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="037112.html">[Mono-list] When Code-Behind pages get recompiled?
</A></li>
        <LI>Next message: <A HREF="037117.html">[Mono-list] DLLNotFoundException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37113">[ date ]</a>
              <a href="thread.html#37113">[ thread ]</a>
              <a href="subject.html#37113">[ subject ]</a>
              <a href="author.html#37113">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We randomly get the flowing system crash runing our unit test under mono and Im not sure if anyhow has run across it. IT doesnt happen all the time but something like once in 10 times, something like that. This is the error we get:


** ERROR **: file reflection.c: line 9694 (mono_reflection_lookup_dynamic_token): assertion failed: (obj)
aborting...
Stacktrace:

  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteObject (System.IO.BinaryWriter,long,object) [0x0012a] in /home/scott/monosrc/mono-1.2.6/mcs/class/corlib/System.Runtime.Serialization.Formatters.Binary/ObjectWriter.cs:361
  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteObject (System.IO.BinaryWriter,long,object) [0x0012a] in /home/scott/monosrc/mono-1.2.6/mcs/class/corlib/System.Runtime.Serialization.Formatters.Binary/ObjectWriter.cs:361
  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteObjectInstance (System.IO.BinaryWriter,object,bool) [0x00062] in /home/scott/monosrc/mono-1.2.6/mcs/class/corlib/System.Runtime.Serialization.Formatters.Binary/ObjectWriter.cs:293
  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteQueuedObjects (System.IO.BinaryWriter) [0x00005] in /home/scott/monosrc/mono-1.2.6/mcs/class/corlib/System.Runtime.Serialization.Formatters.Binary/ObjectWriter.cs:271
  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteObjectGraph (System.IO.BinaryWriter,object,System.Runtime.Remoting.Messaging.Header[]) [0x0001f] in /home/scott/monosrc/mono-1.2.6/mcs/class/corlib/System.Runtime.Serialization.Formatters.Binary/ObjectWriter.cs:256
  at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize (System.IO.Stream,object,System.Runtime.Remoting.Messaging.Header[]) [0x000a4] in /home/scott/monosrc/mono-1.2.6/mcs/class/corlib/System.Runtime.Serialization.Formatters.Binary/BinaryFormatter.cs:230
  at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize (System.IO.Stream,object) [0x00000] in /home/scott/monosrc/mono-1.2.6/mcs/class/corlib/System.Runtime.Serialization.Formatters.Binary/BinaryFormatter.cs:209
  at System.Runtime.Remoting.RemotingServices.SerializeCallData (object) [0x00032] in /home/scott/monosrc/mono-1.2.6/mcs/class/corlib/System.Runtime.Remoting/RemotingServices.cs:782
  at (wrapper xdomain-invoke) NUnit.Core.EventListener.TestFinished (NUnit.Core.TestCaseResult) &lt;0xffffffff&gt;
  at NUnit.Core.TestFinishedEvent.Send (NUnit.Core.EventListener) &lt;0x00028&gt;
  at NUnit.Core.EventPump.PumpThreadProc () &lt;0x00067&gt;
  at (wrapper delegate-invoke) System.MulticastDelegate.invoke_void () &lt;0xffffffff&gt;
  at (wrapper runtime-invoke) System.OutOfMemoryException.runtime_invoke_void (object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

        mono [0x524871]
        /lib64/libpthread.so.0 [0x3e9ee0dd20]
        /lib64/libc.so.6(gsignal+0x35) [0x3e9e2305b5]
        /lib64/libc.so.6(abort+0x110) [0x3e9e232060]
        /lib64/libglib-2.0.so.0(g_log+0) [0x3ea4a35050]
        /lib64/libglib-2.0.so.0(g_log+0x83) [0x3ea4a350d3]
        /lib64/libglib-2.0.so.0(g_assert_warning+0x76) [0x3ea4a35156]
        mono [0x45f05e]
        mono [0x4532a2]
        mono(mono_field_from_token+0x3b) [0x484f9b]
        mono [0x500dbc]
        mono [0x5104b7]
        mono [0x511c39]
        mono [0x43e0c2]
        [0x4000015b]

Debug info from gdb:


can anyone shed some light on this?

thanks

scott
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037112.html">[Mono-list] When Code-Behind pages get recompiled?
</A></li>
	<LI>Next message: <A HREF="037117.html">[Mono-list] DLLNotFoundException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37113">[ date ]</a>
              <a href="thread.html#37113">[ thread ]</a>
              <a href="subject.html#37113">[ subject ]</a>
              <a href="author.html#37113">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
