<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] XML-RPC listener produces exception on Mono,	but works on .NET (&quot;Cannot be changed after headers are sent&quot;)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20XML-RPC%20listener%20produces%20exception%20on%20Mono%2C%0A%09but%20works%20on%20.NET%20%28%22Cannot%20be%20changed%20after%20headers%20are%20sent%22%29&In-Reply-To=1198014380.7273.20.camel%40WM_ADAM1.morrison.iserv.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037337.html">
   <LINK REL="Next"  HREF="037339.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] XML-RPC listener produces exception on Mono,	but works on .NET (&quot;Cannot be changed after headers are sent&quot;)</H1>
    <B>Alan McGovern</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20XML-RPC%20listener%20produces%20exception%20on%20Mono%2C%0A%09but%20works%20on%20.NET%20%28%22Cannot%20be%20changed%20after%20headers%20are%20sent%22%29&In-Reply-To=1198014380.7273.20.camel%40WM_ADAM1.morrison.iserv.net"
       TITLE="[Mono-list] XML-RPC listener produces exception on Mono,	but works on .NET (&quot;Cannot be changed after headers are sent&quot;)">alan.mcgovern at gmail.com
       </A><BR>
    <I>Tue Dec 18 17:03:52 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="037337.html">[Mono-list] XML-RPC listener produces exception on Mono,	but works on .NET	(&quot;Cannot be changed after headers are sent&quot;)
</A></li>
        <LI>Next message: <A HREF="037339.html">[Mono-list] threads-types.h missing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37338">[ date ]</a>
              <a href="thread.html#37338">[ thread ]</a>
              <a href="subject.html#37338">[ subject ]</a>
              <a href="author.html#37338">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Technically, you should write the headers before you write the content. That
means you need to set content type and all that *before* you write the
actual data to the response stream. I came across this one recently myself
and filed a bug:

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=343915">https://bugzilla.novell.com/show_bug.cgi?id=343915</A>

Unfortunately it looks like the default MS.NET behavior is buggy, in that it
lets you set content type even though the headers are already sent and the
receiver will never see that new value.

Alan.

On Dec 18, 2007 9:46 PM, Adam Tauno Williams &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">adam at morrison-ind.com</A>&gt; wrote:

&gt;<i> I've created an XML-RPC service using the CookComputing XML-RPC assembly
</I>&gt;<i> as described at - <A HREF="http://www.cookcomputing.com/blog/archives/000572.html">http://www.cookcomputing.com/blog/archives/000572.html</A>
</I>&gt;<i>
</I>&gt;<i> But it doesn't work [correctly] under Mono 1.2.6 whereas it does work
</I>&gt;<i> in .NET.  See -
</I>&gt;<i> <A HREF="http://tech.groups.yahoo.com/group/XMLRPCNET/message/970">http://tech.groups.yahoo.com/group/XMLRPCNET/message/970</A>
</I>&gt;<i>
</I>&gt;<i> On Mono I get -
</I>&gt;<i> Cannot be changed after headers are sent.
</I>&gt;<i>  at System.Net.HttpListenerResponse.set_ContentType (System.String
</I>&gt;<i> value) [0x00039]
</I>&gt;<i> in /tmp/monobuild/build/BUILD/mono-1.2.6
</I>&gt;<i> /mcs/class/System/System.Net/HttpListenerResponse.cs:110
</I>&gt;<i>  at
</I>&gt;<i>
</I>&gt;<i> Whitemice.Hexagonal.RPCResponse.CookComputing.XmlRpc.IHttpResponse.set_ContentType(
</I>&gt;<i> System.String value) [0x00000] in
</I>&gt;<i> /home/awilliam/Works/Hexagonal/RPCResponse.cs:21
</I>&gt;<i>  at CookComputing.XmlRpc.XmlRpcHttpServerProtocol.HandleHttpRequest
</I>&gt;<i> (IHttpRequest httpReq, IHttpResponse httpResp) [0x00000]
</I>&gt;<i>  - every time a request is processed,  although the client does receive
</I>&gt;<i> the response.
</I>&gt;<i>
</I>&gt;<i> The author of the XML-RPC assembly has verified that it works on .NET
</I>&gt;<i> and fails on Mono, see -
</I>&gt;<i> <A HREF="http://tech.groups.yahoo.com/group/XMLRPCNET/message/971">http://tech.groups.yahoo.com/group/XMLRPCNET/message/971</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20071218/829e274a/attachment-0001.html">http://lists.ximian.com/pipermail/mono-list/attachments/20071218/829e274a/attachment-0001.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037337.html">[Mono-list] XML-RPC listener produces exception on Mono,	but works on .NET	(&quot;Cannot be changed after headers are sent&quot;)
</A></li>
	<LI>Next message: <A HREF="037339.html">[Mono-list] threads-types.h missing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37338">[ date ]</a>
              <a href="thread.html#37338">[ thread ]</a>
              <a href="subject.html#37338">[ subject ]</a>
              <a href="author.html#37338">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
