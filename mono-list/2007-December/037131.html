<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] TCPClient not normal bevaiour
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20TCPClient%20not%20normal%20bevaiour&In-Reply-To=1196771265.1681.12.camel%40negro">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037130.html">
   <LINK REL="Next"  HREF="037132.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] TCPClient not normal bevaiour</H1>
    <B>Alan McGovern</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20TCPClient%20not%20normal%20bevaiour&In-Reply-To=1196771265.1681.12.camel%40negro"
       TITLE="[Mono-list] TCPClient not normal bevaiour">alan.mcgovern at gmail.com
       </A><BR>
    <I>Tue Dec  4 16:07:53 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="037130.html">[Mono-list] TCPClient not normal bevaiour
</A></li>
        <LI>Next message: <A HREF="037132.html">[Mono-list] TCPClient not normal bevaiour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37131">[ date ]</a>
              <a href="thread.html#37131">[ thread ]</a>
              <a href="subject.html#37131">[ subject ]</a>
              <a href="author.html#37131">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Attach a compilable testcase so the behavior can be checked. That'll make it
easier to spot the issue. The only thing i'd say is that the way you've
created the streamwriter is probably the most bizarre way i've ever seen.
It's identical to this:

StreamWriter writer = new StreamWriter(socket.GetStream());

except you're creating two additional streamwriters for some unknown reason.
The additional bytes could be a byte order mark. What happens if you do a
.Receive() in c#, do you get just the 5 bytes?

Alan.

On Dec 4, 2007 12:27 PM, Phillip N. &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">pneumann at gmail.com</A>&gt; wrote:

&gt;<i> Dear mono's..
</I>&gt;<i>
</I>&gt;<i> Im using a simple tcpclient as follows:
</I>&gt;<i>
</I>&gt;<i> TcpClient socket = new TcpClient(host, 5038);
</I>&gt;<i> StreamWriter writer = new StreamWriter(
</I>&gt;<i> new StreamWriter(socket.GetStream(), Encoding.Default).BaseStream,
</I>&gt;<i> new StreamWriter(socket.GetStream(), Encoding.Default).Encoding
</I>&gt;<i> );
</I>&gt;<i>
</I>&gt;<i> writer.Write(&quot;GET /&quot;);
</I>&gt;<i> writer.Flush();
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> im throwing the request to 'socat' to see whats flying around, and see
</I>&gt;<i> the folowing output:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; 2007/12/04 12:08:46.497805  length=3 from=0 to=2
</I>&gt;<i> ...&gt; 2007/12/04 12:08:46.500647  length=5 from=3 to=7
</I>&gt;<i> GET /
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Wich are two requests, one 3 bytes, and the other 5 bytes long. the last
</I>&gt;<i> one if correct, but the first one, i dont know where/why is it comming
</I>&gt;<i> from.
</I>&gt;<i>
</I>&gt;<i> What do you think could be the problem?
</I>&gt;<i>
</I>&gt;<i> This happends just on this particular mashine, wich is a FreeBSD/i386
</I>&gt;<i> one. (mono 1.2.5.1)
</I>&gt;<i> It does work fine on windows, linux and freebsd/amd64.
</I>&gt;<i>
</I>&gt;<i> For testing i had mono 1.2.6 installed in here, but wiped it out
</I>&gt;<i> completly, i see nothong laying around for 1.2.6. Just see 1.2.5.1 bits.
</I>&gt;<i>
</I>&gt;<i> Any information about what could couse this, would be helpful
</I>&gt;<i>
</I>&gt;<i> thanks!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Phillip N. &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">pneumann at gmail.com</A>&gt;
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20071204/a7a79901/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20071204/a7a79901/attachment.html</A> 
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037130.html">[Mono-list] TCPClient not normal bevaiour
</A></li>
	<LI>Next message: <A HREF="037132.html">[Mono-list] TCPClient not normal bevaiour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37131">[ date ]</a>
              <a href="thread.html#37131">[ thread ]</a>
              <a href="subject.html#37131">[ subject ]</a>
              <a href="author.html#37131">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
