<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] ThreadStatic attribute not working?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jeyoung%40priscimon.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="025932.html">
   <LINK REL="Next"  HREF="025938.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] ThreadStatic attribute not working?
   </H1>
    <B>Eddy Young
    </B> 
    <A HREF="mailto:jeyoung%40priscimon.com"
       TITLE="[Mono-list] ThreadStatic attribute not working?">jeyoung@priscimon.com
       </A><BR>
    <I>Tue, 22 Feb 2005 17:19:04 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="025932.html">[Mono-list] Re: [Gtk-sharp-list] Append and retrieve a row from a Gtk.TreeView
</A></li>
        <LI> Next message: <A HREF="025938.html">[Mono-list] ThreadStatic attribute not working?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25930">[ date ]</a>
              <a href="thread.html#25930">[ thread ]</a>
              <a href="subject.html#25930">[ subject ]</a>
              <a href="author.html#25930">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

This is my first post here, so I may be putting this on the wrong list, in
which case please let me know.

The ThreadAttribute does not seem to be working properly on Windows, Linux
and Mac OS X. In the following code, s2 returns a null value when compiled
with Mono, but returns the correct value when compiled with MS .NET.

--- CODE BEGIN ---

using System;

public class ThreadStaticTest
{
	public static void Main(string[] args)
	{
		string s1 = &quot;abc&quot;;

		TestRegistry.Current = s1;

		string s2 = TestRegistry.Current;

		Console.WriteLine(s2 != null);
	}
}

class TestRegistry
{
	[ThreadStatic]
	private static string _testString;

	public static string Current
	{
		get { return _testString; }

		set { _testString = value; }
	}
}

--- CODE END ---

I would very much appreciate to know if this is a bug or by design. 

Regards.
-- 
<A HREF="http://coding.mu">http://coding.mu</A>
<A HREF="http://priscimon.com/blog">http://priscimon.com/blog</A>


-------------------------------------------------
This mail sent through IMP: <A HREF="http://horde.org/imp/">http://horde.org/imp/</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="025932.html">[Mono-list] Re: [Gtk-sharp-list] Append and retrieve a row from a Gtk.TreeView
</A></li>
	<LI> Next message: <A HREF="025938.html">[Mono-list] ThreadStatic attribute not working?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25930">[ date ]</a>
              <a href="thread.html#25930">[ thread ]</a>
              <a href="subject.html#25930">[ subject ]</a>
              <a href="author.html#25930">[ author ]</a>
         </LI>
       </UL>
</body></html>
