<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] corrupted tiff file on ppc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20corrupted%20tiff%20file%20on%20ppc&In-Reply-To=5fe9674f0811141630rc9ec36bua8696c9ebca92043%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040308.html">
   <LINK REL="Next"  HREF="040318.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] corrupted tiff file on ppc</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20corrupted%20tiff%20file%20on%20ppc&In-Reply-To=5fe9674f0811141630rc9ec36bua8696c9ebca92043%40mail.gmail.com"
       TITLE="[Mono-list] corrupted tiff file on ppc">sebastien.pouliot at gmail.com
       </A><BR>
    <I>Fri Nov 14 19:33:11 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="040308.html">[Mono-list] corrupted tiff file on ppc
</A></li>
        <LI>Next message: <A HREF="040318.html">[Mono-list]  Sync Framework on Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40309">[ date ]</a>
              <a href="thread.html#40309">[ thread ]</a>
              <a href="subject.html#40309">[ subject ]</a>
              <a href="author.html#40309">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 2008-11-14 at 16:30 -0800, Dan Shryock wrote:
&gt;<i> Does anybody have any ideas why a simple jpg to tiff conversion leads
</I>&gt;<i> to a corrupted tiff file on OSX 10.4 PPC?
</I>
Looks like an endianess bug, probably inside libgdiplus. Please fill a
report on bugzilla.novell.com

Thanks
Sebastien

&gt;<i> 
</I>&gt;<i> I'm using the following code:
</I>&gt;<i> 
</I>&gt;<i> using System;
</I>&gt;<i> using System.Drawing;
</I>&gt;<i> using System.Drawing.Imaging;
</I>&gt;<i> public class Test{
</I>&gt;<i> 	public static void Main(string[] args){
</I>&gt;<i> 		using(var photo = new Bitmap(args[0])){
</I>&gt;<i> 			using(var output = new FileStream(args[0]+&quot;.tiff&quot;, FileMode.Create)){
</I>&gt;<i> 				output.SetLength(0);
</I>&gt;<i> 				photo.Save(output,ImageFormat.Tiff);
</I>&gt;<i> 			}
</I>&gt;<i> 		}
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> The resulting tiff file is unreadable when produced by mono 2.0.1 on
</I>&gt;<i> osx, and works just fine using mono 1.9.1 on linux.
</I>&gt;<i> 
</I>&gt;<i> When I compare the two files using &quot;cmp -l good.tiff bad.tiff&quot; the
</I>&gt;<i> output I receive is:
</I>&gt;<i>       1 111 115
</I>&gt;<i>       2 111 115
</I>&gt;<i>       3  52   0
</I>&gt;<i>       4   0  52
</I>&gt;<i>       5  10   0
</I>&gt;<i>       6 300   0
</I>&gt;<i>       7  22   0
</I>&gt;<i>      19  20 377
</I>&gt;<i>    2579  30 377
</I>&gt;<i>    5139  43 377
</I>&gt;<i>    7699  51 377
</I>&gt;<i>   10259  47 377
</I>&gt;<i>   12819  43 377
</I>&gt;<i>   15379  43 377
</I>&gt;<i>   17939  46 377
</I>&gt;<i>   20499   0 377
</I>&gt;<i>   23059 120 377
</I>&gt;<i>   25619 117 377
</I>&gt;<i>   28179  50 377
</I>&gt;<i>   30739  63 377
</I>&gt;<i>   33299  37 377
</I>&gt;<i>   35859   3 377
</I>&gt;<i>   38419  44 377
</I>&gt;<i> &lt;&lt;snip&gt;&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The interesting thing is that after the first 7 bytes, the bad value
</I>&gt;<i> is always listed as 377, and the offset between bad bytes is 2560.
</I>&gt;<i> 
</I>&gt;<i> So this seems like a bug in mono, but I wanted to ask just to make
</I>&gt;<i> sure that I'm not doing anything stupid.  Thanks!
</I>&gt;<i> 
</I>&gt;<i> Dan
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040308.html">[Mono-list] corrupted tiff file on ppc
</A></li>
	<LI>Next message: <A HREF="040318.html">[Mono-list]  Sync Framework on Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40309">[ date ]</a>
              <a href="thread.html#40309">[ thread ]</a>
              <a href="subject.html#40309">[ subject ]</a>
              <a href="author.html#40309">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
