<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Getting Strange Exceptions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Getting%20Strange%20Exceptions&In-Reply-To=20226582.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040090.html">
   <LINK REL="Next"  HREF="040093.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Getting Strange Exceptions</H1>
    <B>Christian Papauschek</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Getting%20Strange%20Exceptions&In-Reply-To=20226582.post%40talk.nabble.com"
       TITLE="[Mono-list] Getting Strange Exceptions">cp at inode.at
       </A><BR>
    <I>Sun Nov  2 08:57:13 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="040090.html">[Mono-list] Looking for advice on accessing MySQL database
</A></li>
        <LI>Next message: <A HREF="040093.html">[Mono-list] upgrading to mono 1.9 fails Error: Missing Dependency: libexif.so.9 is needed by package libgdiplus0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40092">[ date ]</a>
              <a href="thread.html#40092">[ thread ]</a>
              <a href="subject.html#40092">[ subject ]</a>
              <a href="author.html#40092">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I was able to reproduce the error on Mono 2.0.1 Win32, it seems that it is
some kind of threading problem. Mono starts throwing strange exceptions from
the core library methods (like the Dictionary or Hashtable Exceptions),
which my program prints into a debug log file. Then the mono runtime crashes
altogether.

The output when mono crashes differs - sometimes for example it seems to
crash allocating memory for a String. I need so simplify my application in
order to get an idea whats causing this.

Has anyone an idea where to start debugging a threading related problem? My
application heavily uses database connections (MySql) and IO (File and Tcp
Networking). I am not sure where to start simplifying.

Thank you,
Chris



Christian Papauschek wrote:
&gt;<i> 
</I>&gt;<i> I have encountered strange Exceptions with my spamfilter core application.
</I>&gt;<i> 
</I>&gt;<i> [1] System.IndexOutOfRangeException: Array index is out of range.
</I>&gt;<i> at System.Collections.Generic.Dictionary`2[System.String,System.Byte].Add
</I>&gt;<i> (System.String key, Byte value) [0x00000] 
</I>&gt;<i> 
</I>&gt;<i> [2] MySql.Data.MySqlClient.MySqlException: You have an error in your SQL
</I>&gt;<i> syntax; check the manual that corresponds to your MySQL server version for
</I>&gt;<i> the right syntax to use near 'Fragen Sie sich, welches Kasino seinen
</I>&gt;<i> Mitgliedern den h chsten Bonus auszahlt? ' at line 1
</I>&gt;<i> 
</I>&gt;<i> Now [2] is obviously not a correct SQL Query, but this is NOT what I pass
</I>&gt;<i> to the MySqlClient as Query in my application! This String is used at a
</I>&gt;<i> different place in my application - it must be some kind of memory
</I>&gt;<i> corruption.
</I>&gt;<i> 
</I>&gt;<i> At first the Exceptions look like problems coming from multithreading,
</I>&gt;<i> however I looked at the code again and it seems impossible that multiple
</I>&gt;<i> threads access the object where the errors occur.
</I>&gt;<i> 
</I>&gt;<i> It is the same with the Dictionary Exception [1]. This usually happens if
</I>&gt;<i> one thread modifies a Dictionary, and another tries to read from it.
</I>&gt;<i> However, in this case the Dictionary is a local variable and is never
</I>&gt;<i> passed to another Thread, and no other Thread access to this Object! The
</I>&gt;<i> section of code that uses this Dictionary is overlookable and i am very
</I>&gt;<i> sure that no threading is involved.
</I>&gt;<i> 
</I>&gt;<i> I am using a self-compiled Mono-2.0.1 on Debian/Linux
</I>&gt;<i> I am not using any native libraries, only the MySql connector which is
</I>&gt;<i> written completely in C#
</I>&gt;<i> 
</I>&gt;<i> Thanks to anyone who can point me into the right direction of looking for
</I>&gt;<i> the real problem. I have worked with .NET since many years, and on Mono a
</I>&gt;<i> few months, and really dont know where to start.
</I>&gt;<i> 
</I>&gt;<i> -- Chris
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://www.nabble.com/Getting-Strange-Exceptions-tp20226582p20289964.html">http://www.nabble.com/Getting-Strange-Exceptions-tp20226582p20289964.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040090.html">[Mono-list] Looking for advice on accessing MySQL database
</A></li>
	<LI>Next message: <A HREF="040093.html">[Mono-list] upgrading to mono 1.9 fails Error: Missing Dependency: libexif.so.9 is needed by package libgdiplus0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40092">[ date ]</a>
              <a href="thread.html#40092">[ thread ]</a>
              <a href="subject.html#40092">[ subject ]</a>
              <a href="author.html#40092">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
