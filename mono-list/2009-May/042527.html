<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Building a new control, Need a starting point
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Building%20a%20new%20control%2C%20Need%20a%20starting%20point&In-Reply-To=76ee17420905110054m4c45a1eer678e9d8f77cf4df8%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042416.html">
   <LINK REL="Next"  HREF="042419.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Building a new control, Need a starting point</H1>
    <B>Michael Hutchinson</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Building%20a%20new%20control%2C%20Need%20a%20starting%20point&In-Reply-To=76ee17420905110054m4c45a1eer678e9d8f77cf4df8%40mail.gmail.com"
       TITLE="[Mono-list] Building a new control, Need a starting point">m.j.hutchinson at gmail.com
       </A><BR>
    <I>Fri May 22 18:08:55 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="042416.html">[Mono-list] Building a new control, Need a starting point
</A></li>
        <LI>Next message: <A HREF="042419.html">[Mono-list] Exception on telnet
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42527">[ date ]</a>
              <a href="thread.html#42527">[ thread ]</a>
              <a href="subject.html#42527">[ subject ]</a>
              <a href="author.html#42527">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, May 11, 2009 at 3:54 AM, Joshua Hayworth
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">joshua at hayworthfamily.com</A>&gt; wrote:
&gt;<i> Hello there,
</I>&gt;<i>
</I>&gt;<i> Disclaimer: I'm a mono newbie. My day job is in a Windows/.NET dev shop.
</I>&gt;<i>
</I>&gt;<i> I'd like to attempt to build an outliner control (very similar to the one
</I>&gt;<i> you would see in the opml editor [<A HREF="http://editor.opml.org/]">http://editor.opml.org/]</A>).
</I>&gt;<i>
</I>&gt;<i> Under normal circumstances I might inherit from
</I>&gt;<i> System.Windows.Forms.Control, override the OnPaint method, and go from
</I>&gt;<i> there.
</I>&gt;<i>
</I>&gt;<i> If I was to write the control with the intention of using the GTK#
</I>&gt;<i> libraries, where would be a good place to start? Is there any existing
</I>&gt;<i> controls (without DllImports) that I could take a look at as an example?
</I>
There are a number of controls around, e.g. big ones like
MonoDevelop's Mono.TextEditor, Banshee's ListView, etc, or smaller
ones like MD's Toolbox.

Or a really simple one that just wraps text to a fixed width, breaking
on camel case:
<A HREF="http://anonsvn.mono-project.com/viewvc/trunk/monodevelop/main/src/core/MonoDevelop.Components/MonoDevelop.Components/FixedWidthWrapLabel.cs?view=markup">http://anonsvn.mono-project.com/viewvc/trunk/monodevelop/main/src/core/MonoDevelop.Components/MonoDevelop.Components/FixedWidthWrapLabel.cs?view=markup</A>

You can just subclass Widget, but if you subclass DrawingArea it sets
up a GdkWindow for you. If you need input, your widget needs a
GdkWindow; If not, you just paint onto some portion of the parent's
GdkWindow. IIRC when creating the GdkWindow you have to pass a mask of
the kinds of events you want to subscribe to - mouse, keyboard, DnD,
etc.

You need to handle the width request and allocation events to handle
layout -- you need to handle whatever allocation you get, regardless
of what you requested. Then handle the expose event to do the
painting. If your widget has requested mouse, keyboard, DnD, etc
events, you can handle those events too (all of this using the On*
overrides, of course).

-- 
Michael Hutchinson
<A HREF="http://mjhutchinson.com">http://mjhutchinson.com</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042416.html">[Mono-list] Building a new control, Need a starting point
</A></li>
	<LI>Next message: <A HREF="042419.html">[Mono-list] Exception on telnet
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42527">[ date ]</a>
              <a href="thread.html#42527">[ thread ]</a>
              <a href="subject.html#42527">[ subject ]</a>
              <a href="author.html#42527">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
