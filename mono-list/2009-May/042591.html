<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] System.Net.CookieContainer adding inappropriate $Port attribute to cookies?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20System.Net.CookieContainer%20adding%20inappropriate%20%24Port%0A%20attribute%20to%20cookies%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042590.html">
   <LINK REL="Next"  HREF="042572.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] System.Net.CookieContainer adding inappropriate $Port attribute to cookies?</H1>
    <B>benanhalt</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20System.Net.CookieContainer%20adding%20inappropriate%20%24Port%0A%20attribute%20to%20cookies%3F&In-Reply-To="
       TITLE="[Mono-list] System.Net.CookieContainer adding inappropriate $Port attribute to cookies?">ben.anhalt at gmail.com
       </A><BR>
    <I>Wed May 27 19:50:17 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="042590.html">[Mono-list]  using gmcs to emit code?
</A></li>
        <LI>Next message: <A HREF="042572.html">[Mono-list]  mod mono and Apache is hanging :/
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42591">[ date ]</a>
              <a href="thread.html#42591">[ thread ]</a>
              <a href="subject.html#42591">[ subject ]</a>
              <a href="author.html#42591">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
According to RFC 2965 if the port attribute is absent from the Set-Cookie
header, it must also be absent from the corresponding Cookie request header. 
&gt;<i>From paragraph 3.3.4:
</I>
&quot;...the port attribute MUST be present if the
Port attribute was present in the Set-Cookie2 header, and it MUST
have the same value, if any.  Otherwise, if the Port attribute was
absent from the Set-Cookie2 header, the attribute likewise MUST be
omitted from the Cookie request header.&quot;

The current behavior of System.Net.CookieContainer is such that when cookies
are added to the container, the method Cook(Uri uri, Cookie cookie)
unconditionally sets the attribute cookie.Port to uri.Port.ToString() unless
uri.IsDefaultPort.

This seems contrary to the RFC, but I'm no expert and perhaps this is the
expected behavior in most real applications.  I did run into some difficulty
with it in a context where the server was not expecting the $Port attribute
and rejected the cookies as invalid. So, I thought I would bring it up for
more knowledgeable folks to take a look at.

Thanks. 




-- 
View this message in context: <A HREF="http://www.nabble.com/System.Net.CookieContainer-adding-inappropriate-%24Port-attribute-to-cookies--tp23752882p23752882.html">http://www.nabble.com/System.Net.CookieContainer-adding-inappropriate-%24Port-attribute-to-cookies--tp23752882p23752882.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042590.html">[Mono-list]  using gmcs to emit code?
</A></li>
	<LI>Next message: <A HREF="042572.html">[Mono-list]  mod mono and Apache is hanging :/
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42591">[ date ]</a>
              <a href="thread.html#42591">[ thread ]</a>
              <a href="subject.html#42591">[ subject ]</a>
              <a href="author.html#42591">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
