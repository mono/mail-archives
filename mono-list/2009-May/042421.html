<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list]  Mono.WebServer2 Problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%20Mono.WebServer2%20Problems&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042425.html">
   <LINK REL="Next"  HREF="042422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list]  Mono.WebServer2 Problems</H1>
    <B>willisterman</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%20Mono.WebServer2%20Problems&In-Reply-To="
       TITLE="[Mono-list]  Mono.WebServer2 Problems">craig.willis at myknowledgemap.com
       </A><BR>
    <I>Tue May 12 10:17:47 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="042425.html">[Mono-list] GridView AccessibleHeader
</A></li>
        <LI>Next message: <A HREF="042422.html">[Mono-list] Mono.WebServer2 Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42421">[ date ]</a>
              <a href="thread.html#42421">[ thread ]</a>
              <a href="subject.html#42421">[ subject ]</a>
              <a href="author.html#42421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Afternoon,
  I've been using the Mono.WebServer2 to embed a ASP.NET application server
within my application, to allow me to run my ASP.NET site on XP Home, and
when an application is running at the root, &quot;/&quot;, everything works fine, but
if I place an application after the root &quot;/app&quot;, for example, the aspx page
runs, but no static content is loaded, and any requests to static content
throw this:

SocketException: An existing connection was forcibly closed by the remote
host
   at System.Net.Sockets.Socket.Send(Byte[] buffer, Int32 offset, Int32
size, So
cketFlags socketFlags)
   at System.Net.Sockets.NetworkStream.Write(Byte[] buffer, Int32 offset,
Int32
size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Write(Byte[] buffer, Int32 offset,
Int32
size)
   at Mono.WebServer.XSPWorker.Write(Byte[] buffer, Int32 position, Int32
size)
System.InvalidOperationException: Failed to map the path
'/App_Themes/Default/fo
rm.css'.

Server stack trace:
   at System.Web.Hosting.HostingEnvironment.MapPathActual(VirtualPath
virtualPat
h, Boolean permitNull)
   at System.Web.Hosting.HostingEnvironment.MapPathInternal(VirtualPath
virtualP
ath)
   at System.Web.Hosting.MapPathBasedVirtualPathProvider.FileExists(String
virtu
alPath)
   at Mono.WebServer.Paths.VirtualPathExists(IApplicationHost appHost,
String ve
rb, String uri)
   at Mono.WebServer.Paths.GetPathsFromUri(IApplicationHost appHost, String
verb
, String uri, String&amp; realUri, String&amp; pathInfo)
   at Mono.WebServer.XSPWorkerRequest..ctor(Int32 requestId,
XSPRequestBroker re
questBroker, IApplicationHost appHost, EndPoint localEP, EndPoint remoteEP,
Stri
ng verb, String path, String queryString, String protocol, Byte[]
inputBuffer, I
ntPtr socket, Boolean secure)
   at Mono.WebServer.XSPApplicationHost.ProcessRequest(Int32 reqId, Int64
localE
PAddr, Int32 localEPPort, Int64 remoteEPAdds, Int32 remoteEPPort, String
verb, S
tring path, String queryString, String protocol, Byte[] inputBuffer, String
redi
rect, IntPtr socket, SslInformations ssl)
   at
System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(
IntPtr md, Object[] args, Object server, Int32 methodPtr, Boolean
fExecuteInCont
ext, Object[]&amp; outArgs)
   at
System.Runtime.Remoting.Messaging.StackBuilderSink.PrivateProcessMessage(R
untimeMethodHandle md, Object[] args, Object server, Int32 methodPtr,
Boolean fE
xecuteInContext, Object[]&amp; outArgs)
   at
System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMes
sage msg, Int32 methodPtr, Boolean fExecuteInContext)

The application is very simple, just:

XSPWebSource websource = new XSPWebSource(System.Net.IPAddress.Any, port,
multipleApps);
                    Console.WriteLine(&quot;Starting on Port: &quot; + port+&quot;,
Multiple Apps: &quot;+multipleApps.ToString());                    
                    WebAppServer = new ApplicationServer(websource);

                    //Populate Webserver with found applications
                    foreach (XmlNode app in list)
                    {
                        string vdir = app.Attributes[&quot;VDir&quot;].Value;
                        string rdir = app.Attributes[&quot;RelPath&quot;].Value;
                        string cmdLine = port + &quot;:&quot; + vdir + &quot;:&quot; + rdir;
                        
                        //rdir requires full app path
                        WebAppServer.AddApplication(&quot;&quot;, port, vdir,
System.IO.Path.GetFullPath(rdir));
                        
                        Console.WriteLine(&quot;Adding Application: &quot; + cmdLine);
                        icoMenu.MenuItems.Add(vdir).Click += new
EventHandler(Program_Click);
                    }

                    MenuItem separatorItem = new MenuItem();
                    separatorItem.Text = &quot;-&quot;;
                    icoMenu.MenuItems.Add(separatorItem);
                    icoMenu.MenuItems.Add(&quot;&amp;Toggle Console&quot;).Click += new
EventHandler(Program_Click);
                    icoMenu.MenuItems.Add(&quot;E&amp;xit&quot;).Click += new
EventHandler(Program_Click);
                    ico.ContextMenu = icoMenu;
                    WebAppServer.Start(true);

Are there any configuration options I am missing to get this to work?  

Also, on a seperate note, I need to place the Mono.Webserver2.dll in the bin
folder of any website used by the app, or it will not load that website,
complaining about missing the dll.
-- 
View this message in context: <A HREF="http://www.nabble.com/Mono.WebServer2-Problems-tp23503460p23503460.html">http://www.nabble.com/Mono.WebServer2-Problems-tp23503460p23503460.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042425.html">[Mono-list] GridView AccessibleHeader
</A></li>
	<LI>Next message: <A HREF="042422.html">[Mono-list] Mono.WebServer2 Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42421">[ date ]</a>
              <a href="thread.html#42421">[ thread ]</a>
              <a href="subject.html#42421">[ subject ]</a>
              <a href="author.html#42421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
