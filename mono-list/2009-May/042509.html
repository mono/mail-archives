<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Unable to set JPEG Quality to 100% in Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Unable%20to%20set%20JPEG%20Quality%20to%20100%25%20in%20Mono&In-Reply-To=23657867.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042507.html">
   <LINK REL="Next"  HREF="042508.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Unable to set JPEG Quality to 100% in Mono</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Unable%20to%20set%20JPEG%20Quality%20to%20100%25%20in%20Mono&In-Reply-To=23657867.post%40talk.nabble.com"
       TITLE="[Mono-list] Unable to set JPEG Quality to 100% in Mono">sebastien.pouliot at gmail.com
       </A><BR>
    <I>Thu May 21 15:43:35 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="042507.html">[Mono-list]  Unable to set JPEG Quality to 100% in Mono
</A></li>
        <LI>Next message: <A HREF="042508.html">[Mono-list] Smaller Mono Mac Installers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42509">[ date ]</a>
              <a href="thread.html#42509">[ thread ]</a>
              <a href="subject.html#42509">[ subject ]</a>
              <a href="author.html#42509">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2009-05-21 at 12:35 -0700, szamil wrote:
&gt;<i> Hi! 
</I>&gt;<i> 
</I>&gt;<i> I need to save my bitmap to jpeg with 100% quality (lowest
</I>&gt;<i> compression). I use this code: 
</I>&gt;<i> 
</I>&gt;<i> Bitmap bmp = new Bitmap(w,h);
</I>&gt;<i> BitmapData bmpdata = bmp.LockBits(new Rectangle, 0, 0, w, h), ImageLockMode.WriteOnly, PixelFormat.Format24bppRgb);
</I>&gt;<i> //Filling image with data - works for sure
</I>&gt;<i> bmp.UnlockBits(bmpdata);
</I>&gt;<i> 
</I>&gt;<i> ImageCodecInfo[] codecs = ImageCodecInfo.GetImageEncoders();
</I>&gt;<i> ImageCodecInfo myCodec=null;
</I>&gt;<i> foreach(ImageCodecInfo codec in codecs)
</I>&gt;<i> {
</I>&gt;<i> 	if(codec.MimeType == &quot;image/jpeg&quot;)
</I>&gt;<i> 	{
</I>&gt;<i> 		myCodec = codec;
</I>&gt;<i> 		break;
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> if(myCodec == null)
</I>&gt;<i> 	throw new Exception(&quot;no jpeg codec found?!&quot;);
</I>&gt;<i> 
</I>&gt;<i> EncoderParameters eps = new EncoderParameters(1);
</I>&gt;<i> eps.Param[0] = new EncoderParameter( Encoder.Quality, 100L );
</I>&gt;<i> 
</I>&gt;<i> bmp.Save(&quot;myfile.jpg&quot;, myCodec, eps );
</I>&gt;<i> bmp.Dispose();
</I>&gt;<i> The problem is that whatever I set in EncodeParameter I always get
</I>&gt;<i> same - compressed image. Does anyone know why? Is it bug of
</I>&gt;<i> implemetation System.Drawing? 
</I>&gt;<i> 
</I>&gt;<i> The code was testen in .NET and worked fine. My configuration:
</I>&gt;<i> openSUSE 11.1 with Mono 2.4 
</I>&gt;<i> 
</I>&gt;<i> I would appreciate your help! 
</I>
I do not recall this one in particular but not every encoding parameters
are availabl inside libgdiplus. In part because they are not well
documented, in part because no one implemented them (expect the ones
that were required for something specific).

You can fill a bug in bugzilla.novell.com (Mono class library,
libgdiplus) but I greatly encourage you to contribute such a specific
case, since enhancement-priority bugs are unlikely to be fixed soon.

Sebastien

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042507.html">[Mono-list]  Unable to set JPEG Quality to 100% in Mono
</A></li>
	<LI>Next message: <A HREF="042508.html">[Mono-list] Smaller Mono Mac Installers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42509">[ date ]</a>
              <a href="thread.html#42509">[ thread ]</a>
              <a href="subject.html#42509">[ subject ]</a>
              <a href="author.html#42509">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
