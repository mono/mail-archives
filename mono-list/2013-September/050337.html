<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] sgen error when using large SOAP proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20sgen%20error%20when%20using%20large%20SOAP%20proxy&In-Reply-To=%3C17313C22-2D6D-4C27-8443-549A0A8194F1%40asme.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="050370.html">
   <LINK REL="Next"  HREF="050338.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] sgen error when using large SOAP proxy</H1>
    <B>David Curylo</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20sgen%20error%20when%20using%20large%20SOAP%20proxy&In-Reply-To=%3C17313C22-2D6D-4C27-8443-549A0A8194F1%40asme.org%3E"
       TITLE="[Mono-list] sgen error when using large SOAP proxy">curylod at asme.org
       </A><BR>
    <I>Thu Sep 26 18:07:58 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="050370.html">[Mono-list] Is FileLogTraceListener supported in 3.2.3?
</A></li>
        <LI>Next message: <A HREF="050338.html">[Mono-list] sgen error when using large SOAP proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50337">[ date ]</a>
              <a href="thread.html#50337">[ thread ]</a>
              <a href="subject.html#50337">[ subject ]</a>
              <a href="author.html#50337">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have an application that must load a very large SOAP proxy with hundreds of classes.  Under boehm GC, I'm able to load the application, but when running under sgen my application crashes immediately with a SIGABRT.  I'm able to get a stack trace under sgen to this effect:

* Assertion: should not be reached at sgen-scan-object.h:111

Stacktrace:

  at &lt;unknown&gt; &lt;0xffffffff&gt;
  at (wrapper managed-to-native) System.MonoCustomAttrs.GetCustomAttributesInternal (System.Reflection.ICustomAttributeProvider,System.Type,bool) &lt;IL 0x0000f, 0xffffffff&gt;
  at System.MonoCustomAttrs.GetCustomAttributesBase (System.Reflection.ICustomAttributeProvider,System.Type,bool) [0x00019] in /home/abuild/rpmbuild/BUILD/mono-3.2.1/mcs/class/corlib/System/MonoCustomAttrs.cs:101
  at System.MonoCustomAttrs.GetCustomAttributes (System.Reflection.ICustomAttributeProvider,bool) [0x00017] in /home/abuild/rpmbuild/BUILD/mono-3.2.1/mcs/class/corlib/System/MonoCustomAttrs.cs:274
  at System.MonoType.GetCustomAttributes (bool) [0x00000] in /home/abuild/rpmbuild/BUILD/mono-3.2.1/mcs/class/corlib/System/MonoType.cs:573
  at System.Xml.Serialization.XmlAttributes..ctor (System.Reflection.ICustomAttributeProvider) [0x00032] in /home/abuild/rpmbuild/BUILD/mono-3.2.1/mcs/class/System.XML/System.Xml.Serialization/XmlAttributes.cs:64
&#8230;more of stack trace is available if you want.

The cause seems to be that the sgen GC is having to do too much collection while processing the large type library.  Trying these options:

export MONO_GC_PARAMS=&quot;major=marksweep-conc,minor=split,alloc-ratio=100,nursery-size=128m,max-heap-size=2048m,evacuation-threshold=0&quot;

seems like it would make the nursery much larger so it can handle the large type library.  However, doing so leads me to this error:

Assertion at sgen-nursery-allocator.c:293, condition `fragment-&gt;fragment_end &gt; fragment-&gt;fragment_start' not met

I'm stuck at this point.  Any suggestions?
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="050370.html">[Mono-list] Is FileLogTraceListener supported in 3.2.3?
</A></li>
	<LI>Next message: <A HREF="050338.html">[Mono-list] sgen error when using large SOAP proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50337">[ date ]</a>
              <a href="thread.html#50337">[ thread ]</a>
              <a href="subject.html#50337">[ subject ]</a>
              <a href="author.html#50337">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
