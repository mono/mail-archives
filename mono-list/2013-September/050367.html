<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Invalid IL code exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Invalid%20IL%20code%20exception&In-Reply-To=%3CCACmR%2BBBC4LorzpA-GhmM_J%2BHwBBd5pP00CpnR7F_wK4Yr5%3DOeQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="050323.html">
   <LINK REL="Next"  HREF="050325.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Invalid IL code exception</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Invalid%20IL%20code%20exception&In-Reply-To=%3CCACmR%2BBBC4LorzpA-GhmM_J%2BHwBBd5pP00CpnR7F_wK4Yr5%3DOeQ%40mail.gmail.com%3E"
       TITLE="[Mono-list] Invalid IL code exception">kumpera at gmail.com
       </A><BR>
    <I>Tue Sep 24 22:04:25 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="050323.html">[Mono-list] Invalid IL code exception
</A></li>
        <LI>Next message: <A HREF="050325.html">[Mono-list] Invalid IL code exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50367">[ date ]</a>
              <a href="thread.html#50367">[ thread ]</a>
              <a href="subject.html#50367">[ subject ]</a>
              <a href="author.html#50367">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Run mono with --security=verifiable and it will run with the proper code
verifier.

It does look like those assemblies have been using obfuscation tools that
produce assemblies that are too broken for mono to handle.


On Tue, Sep 24, 2013 at 5:49 PM, Dilshod Tadjibaev &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">dilshod at gmail.com</A>&gt;wrote:

&gt;<i> Hello everyone,
</I>&gt;<i>
</I>&gt;<i> I am trying to make Foxit.PDF and PDFTron to work in mono linux but I am
</I>&gt;<i> getting this errors when initializing the library.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This is what I get when I run with Foxit.PDF:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Instance {System.InvalidProgramException: Invalid IL code in
</I>&gt;<i> Foxit.PDF.Merger.PdfDocument:e (): IL_001f: pop            at
</I>&gt;<i> Foxit.PDF.Merger.PdfDocument..ctor (zz93.i4 A_0, System.String A_1)
</I>&gt;<i> [0x00000] in &lt;filename unknown&gt;:0    at Foxit.PDF.Merger.PdfDocument..ctor
</I>&gt;<i> (System.String filePath) [0x00000] in &lt;filename unknown&gt;:0    at
</I>&gt;<i> foxit.MainClass.Main (System.String[] args) [0x00011] in
</I>&gt;<i> /home/dilshod/source-code/Foxit-demo/Foxit_PDF_SDK_For_NET_v1_0_0_21154/solution/foxit/foxit/Program.cs:14
</I>&gt;<i> } System.InvalidProgramException
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This is what I get when I run with PDFTron:
</I>&gt;<i>
</I>&gt;<i> Unhandled Exception:
</I>&gt;<i> System.InvalidProgramException: Invalid IL code in
</I>&gt;<i> pdftron.PDFNet:Initialize (): IL_000a: call      0x0600094e
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   at PDFATestCS.Class1.Main (System.String[] args) [0x00001] in
</I>&gt;<i> /home/dilshod/source-code/PDFNet64DotNet4/Samples/PDFATest/CS/PDFATest.cs:28
</I>&gt;<i> [ERROR] FATAL UNHANDLED EXCEPTION: System.InvalidProgramException: Invalid
</I>&gt;<i> IL code in pdftron.PDFNet:Initialize (): IL_000a: call      0x0600094e
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   at PDFATestCS.Class1.Main (System.String[] args) [0x00001] in
</I>&gt;<i> /home/dilshod/source-code/PDFNet64DotNet4/Samples/PDFATest/CS/PDFATest.cs:28
</I>&gt;<i> The application was terminated by a signal: SIGHUP
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I am suspecting there is some sort of unmanaged code in both of them.
</I>&gt;<i>
</I>&gt;<i> Here is the head of monodis Foxit.PDF.40.dll output:
</I>&gt;<i>
</I>&gt;<i> .assembly extern mscorlib
</I>&gt;<i> {
</I>&gt;<i>   .ver 4:0:0:0
</I>&gt;<i>   .publickeytoken = (B7 7A 5C 56 19 34 E0 89 ) // .z\V.4..
</I>&gt;<i> }
</I>&gt;<i> .assembly extern System.Drawing
</I>&gt;<i> {
</I>&gt;<i>   .ver 4:0:0:0
</I>&gt;<i>   .publickeytoken = (B0 3F 5F 7F 11 D5 0A 3A ) // .?_....:
</I>&gt;<i> }
</I>&gt;<i> .assembly extern System
</I>&gt;<i> {
</I>&gt;<i>   .ver 4:0:0:0
</I>&gt;<i>   .publickeytoken = (B7 7A 5C 56 19 34 E0 89 ) // .z\V.4..
</I>&gt;<i> }
</I>&gt;<i> .assembly extern System.Web
</I>&gt;<i> {
</I>&gt;<i>   .ver 4:0:0:0
</I>&gt;<i>   .publickeytoken = (B0 3F 5F 7F 11 D5 0A 3A ) // .?_....:
</I>&gt;<i> }
</I>&gt;<i> .assembly extern System.Configuration
</I>&gt;<i> {
</I>&gt;<i>   .ver 4:0:0:0
</I>&gt;<i>   .publickeytoken = (B0 3F 5F 7F 11 D5 0A 3A ) // .?_....:
</I>&gt;<i> }
</I>&gt;<i> .assembly extern System.Security
</I>&gt;<i> {
</I>&gt;<i>   .ver 4:0:0:0
</I>&gt;<i>   .publickeytoken = (B0 3F 5F 7F 11 D5 0A 3A ) // .?_....:
</I>&gt;<i> }
</I>&gt;<i> .assembly 'Foxit.PDF.40'
</I>&gt;<i> {
</I>&gt;<i>   .custom instance void class
</I>&gt;<i> [mscorlib]System.Reflection.AssemblyTrademarkAttribute::'.ctor'(string) =
</I>&gt;<i>  (01 00 00 00 00 ) // .....
</I>&gt;<i>
</I>&gt;<i>   .custom instance void class
</I>&gt;<i> [mscorlib]System.Reflection.AssemblyTitleAttribute::'.ctor'(string) =  (
</I>&gt;<i>  01 00 26 46 6F 78 69 74 20 50 44 46 20 66 6F 72   // ..&amp;Foxit PDF for
</I>&gt;<i> 20 2E 4E 45 54 20 53 44 4B 20 28 46 72 61 6D 65   //  .NET SDK (Frame
</I>&gt;<i>  77 6F 72 6B 20 34 2E 30 29 00 00                ) // work 4.0)..
</I>&gt;<i>
</I>&gt;<i>   .custom instance void class
</I>&gt;<i> [mscorlib]System.Reflection.AssemblyCompanyAttribute::'.ctor'(string) =  (
</I>&gt;<i> 01 00 11 46 6F 78 69 74 20 43 6F 72 70 6F 72 61   // ...Foxit Corpora
</I>&gt;<i>  74 69 6F 6E 00 00                               ) // tion..
</I>&gt;<i>
</I>&gt;<i>   .custom instance void class
</I>&gt;<i> [mscorlib]System.Runtime.CompilerServices.RuntimeCompatibilityAttribute::'.ctor'()
</I>&gt;<i> =  (
</I>&gt;<i> 01 00 01 00 54 02 16 57 72 61 70 4E 6F 6E 45 78   // ....T..WrapNonEx
</I>&gt;<i>  63 65 70 74 69 6F 6E 54 68 72 6F 77 73 01       ) // ceptionThrows.
</I>&gt;<i>
</I>&gt;<i>   .custom instance void class
</I>&gt;<i> [mscorlib]System.Runtime.CompilerServices.CompilationRelaxationsAttribute::'.ctor'(int32)
</I>&gt;<i> =  (01 00 08 00 00 00 00 00 ) // ........
</I>&gt;<i>
</I>&gt;<i>   .custom instance void class
</I>&gt;<i> [mscorlib]System.Security.AllowPartiallyTrustedCallersAttribute::'.ctor'()
</I>&gt;<i> =  (01 00 00 00 ) // ....
</I>&gt;<i>
</I>&gt;<i>   .custom instance void class
</I>&gt;<i> [mscorlib]System.Reflection.AssemblyCopyrightAttribute::'.ctor'(string) =  (
</I>&gt;<i>  01 00 3F 43 6F 70 79 72 69 67 68 74 20 28 63 29   // ..?Copyright (c)
</I>&gt;<i> 20 32 30 31 32 20 46 6F 78 69 74 20 43 6F 72 70   //  2012 Foxit Corp
</I>&gt;<i>  6F 72 61 74 69 6F 6E 2C 20 32 30 30 31 20 2D 20   // oration, 2001 -
</I>&gt;<i> 32 30 31 32 20 63 65 54 65 20 53 6F 66 74 77 61   // 2012 ceTe Softwa
</I>&gt;<i>  72 65 00 00                                     ) // re..
</I>&gt;<i>
</I>&gt;<i>   .custom instance void class DotfuscatorAttribute::'.ctor'(string, int32)
</I>&gt;<i> =  (
</I>&gt;<i> 01 00 18 33 36 35 38 38 3A 31 3A 30 3A 34 2E 39   // ...36588:1:0:4.9
</I>&gt;<i>  2E 37 30 30 30 2E 33 32 30 37 32 00 00 00 00 00   // .7000.32072.....
</I>&gt;<i> 00                                              ) // .
</I>&gt;<i>
</I>&gt;<i>   .custom instance void class
</I>&gt;<i> [mscorlib]System.CLSCompliantAttribute::'.ctor'(bool) =  (01 00 01 00 00 )
</I>&gt;<i> // .....
</I>&gt;<i>
</I>&gt;<i>   .custom instance void class
</I>&gt;<i> [mscorlib]System.Reflection.AssemblyProductAttribute::'.ctor'(string) =  (
</I>&gt;<i>  01 00 16 46 6F 78 69 74 20 50 44 46 20 66 6F 72   // ...Foxit PDF for
</I>&gt;<i> 20 2E 4E 45 54 20 53 44 4B 00 00                ) //  .NET SDK..
</I>&gt;<i>
</I>&gt;<i>   .custom instance void class
</I>&gt;<i> [mscorlib]System.Reflection.AssemblyDescriptionAttribute::'.ctor'(string) =
</I>&gt;<i>  (
</I>&gt;<i>  01 00 42 50 72 6F 67 72 61 6D 61 74 69 63 61 6C   // ..BProgramatical
</I>&gt;<i> 6C 79 20 63 72 65 61 74 65 20 61 6E 64 20 6D 61   // ly create and ma
</I>&gt;<i>  6E 69 70 75 6C 61 74 65 20 50 44 46 20 64 6F 63   // nipulate PDF doc
</I>&gt;<i> 75 6D 65 6E 74 73 2E 20 28 42 75 69 6C 64 20 32   // uments. (Build 2
</I>&gt;<i>  31 31 35 34 29 00 00                            ) // 1154)..
</I>&gt;<i>
</I>&gt;<i>    .hash algorithm 0x00008004
</I>&gt;<i>   .ver  1:0:0:40
</I>&gt;<i>   .publickey = (
</I>&gt;<i>  00 24 00 00 04 80 00 00 94 00 00 00 06 02 00 00   // .$..............
</I>&gt;<i> 00 24 00 00 52 53 41 31 00 04 00 00 01 00 01 00   // .$..RSA1........
</I>&gt;<i>  07 36 AA 1E 61 10 C4 95 4D EA 24 56 FF F3 3B EB   // .6..a...M.$V..;.
</I>&gt;<i> B0 7D 85 4B 7A 62 F9 A2 F3 C4 45 53 86 BC C5 DF   // .}.Kzb....ES....
</I>&gt;<i>  02 D3 8C F5 AC 5D 1B 8A 26 27 26 0B 12 6B B9 39   // .....]..&amp;'&amp;..k.9
</I>&gt;<i> 89 39 44 2A 6D CF F9 F1 9B 0D C6 0D C0 F1 23 35   // .9D*m.........#5
</I>&gt;<i>  D4 80 0E 32 30 AE B5 46 60 2D 96 4B 17 CC 3D B6   // ...20..F`-.K..=.
</I>&gt;<i> 24 6D 30 60 93 72 97 0F 7C 90 BA E6 95 98 18 64   // $m0`.r..|......d
</I>&gt;<i>  D5 BF 65 D6 84 45 8F C1 04 92 D7 40 34 86 C6 E9   // <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">..e..E..... at 4...</A>
</I>&gt;<i> 13 B2 64 2D FE 7E B0 EF 7C 01 60 E8 F1 84 A1 A7 ) // ..d-.~..|.`.....
</I>&gt;<i> }
</I>&gt;<i> .module Foxit.PDF.40.dll // GUID = {8F28163B-91FE-4F47-A5DD-ABAD2B03EAC7}
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   .class public auto ansi sealed beforefieldinit DotfuscatorAttribute
</I>&gt;<i>   extends [mscorlib]System.Attribute
</I>&gt;<i>   {
</I>&gt;<i>     .custom instance void class
</I>&gt;<i> [mscorlib]System.AttributeUsageAttribute::'.ctor'(valuetype
</I>&gt;<i> [mscorlib]System.AttributeTargets) =  (01 00 01 00 00 00 00 00 ) // ........
</I>&gt;<i>
</I>&gt;<i>     .custom instance void class
</I>&gt;<i> [mscorlib]System.Runtime.InteropServices.ComVisibleAttribute::'.ctor'(bool)
</I>&gt;<i> =  (01 00 00 00 00 ) // .....
</I>&gt;<i>
</I>&gt;<i>     .field  private  string a
</I>&gt;<i>     .field  private  int32 c
</I>&gt;<i>
</I>&gt;<i>     // method line 1
</I>&gt;<i>     .method public hidebysig specialname rtspecialname
</I>&gt;<i>            instance default void '.ctor' (string a, int32 c)  cil managed
</I>&gt;<i>     {
</I>&gt;<i>         // Method begins at RVA 0xf25c
</I>&gt;<i>  // Code size 21 (0x15)
</I>&gt;<i> .maxstack 2
</I>&gt;<i>  IL_0000:  ldarg.0
</I>&gt;<i> IL_0001:  dup
</I>&gt;<i>  IL_0002:  call instance void class [mscorlib]System.Attribute::'.ctor'()
</I>&gt;<i> IL_0007:  ldarg.1
</I>&gt;<i>  IL_0008:  stfld string DotfuscatorAttribute::a
</I>&gt;<i> IL_000d:  ldarg.0
</I>&gt;<i>  IL_000e:  ldarg.2
</I>&gt;<i> IL_000f:  stfld int32 DotfuscatorAttribute::c
</I>&gt;<i>  IL_0014:  ret
</I>&gt;<i>     } // end of method DotfuscatorAttribute::.ctor
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   ~ Dilshod
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20130924/a0e14407/attachment-0001.html">http://lists.ximian.com/pipermail/mono-list/attachments/20130924/a0e14407/attachment-0001.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="050323.html">[Mono-list] Invalid IL code exception
</A></li>
	<LI>Next message: <A HREF="050325.html">[Mono-list] Invalid IL code exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50367">[ date ]</a>
              <a href="thread.html#50367">[ thread ]</a>
              <a href="subject.html#50367">[ subject ]</a>
              <a href="author.html#50367">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
