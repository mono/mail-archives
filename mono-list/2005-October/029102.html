<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Jon's reply : Parameter passing using PInvoke
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Jon%27s%20reply%20%3A%20Parameter%20passing%20using%20PInvoke&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029101.html">
   <LINK REL="Next"  HREF="029104.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Jon's reply : Parameter passing using PInvoke</H1>
    <B>Shankari</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Jon%27s%20reply%20%3A%20Parameter%20passing%20using%20PInvoke&In-Reply-To="
       TITLE="[Mono-list] Jon's reply : Parameter passing using PInvoke">shankari82 at yahoo.com
       </A><BR>
    <I>Wed Oct 19 20:15:32 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="029101.html">[Mono-list] Parameter passing using PInvoke
</A></li>
        <LI>Next message: <A HREF="029104.html">[Mono-list] SSL and WebServices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29102">[ date ]</a>
              <a href="thread.html#29102">[ thread ]</a>
              <a href="subject.html#29102">[ subject ]</a>
              <a href="author.html#29102">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>here is Jon's answer to my queries. Any more insights
or clarifications are welcome.

&gt;<i>   : I have a structure in my C# code. If
</I>&gt;<i> in my invocation, I pass a reference to this
</I>&gt;<i> structure.  I want to know the size of the struct in
</I>&gt;<i> mono. I guess it pushes the &quot;address&quot; on to the
</I>stack.
&gt;<i> But I want the size of the struct pointed to by the
</I>&gt;<i> address.
</I>&gt;<i> 
</I>&gt;<i> Is there any way to get this.
</I>
System.Runtime.InteropServices.Marshal.SizeOf(). :-)

Though there's an important question: is this through
P/Invoke or
through an icall interface?  And is it a C# struct or
a C# class?

For P/Invoke it doesn't matter, but for icalls the
class will have the
standard object header, which is 8 bytes in size IIRC.

&gt;<i> mono_marshal_type_size doesnt seem to be the right
</I>&gt;<i> function..
</I>
Why not?

&gt;<i> I dereferenced the pointer at the
</I>emit_native_wrapper
&gt;<i> level  as *(sig-&gt;params[i])-&gt;data.klass and the
</I>&gt;<i> instance size is shown as 24. where as my structre
</I>is
&gt;<i> just has 4 in values i.e 16.
</I>
Either your structure has padding issues, or you're
within an icall
interface passing a reference type, thus you'd have
the object header 
to
contend with.

&gt;<i> If I need to copy this structure by value ...what
</I>size
&gt;<i> should I be using = 16 or instance size of 24??
</I>&gt;<i> If it is 16 : How can we get this in *mono* (not at
</I>&gt;<i> the C# program level).
</I>
I lack the knowledge to answer this.

 - Jon



		
__________________________________ 
Yahoo! Music Unlimited 
Access over 1 million songs. Try it free.
<A HREF="http://music.yahoo.com/unlimited/">http://music.yahoo.com/unlimited/</A>
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029101.html">[Mono-list] Parameter passing using PInvoke
</A></li>
	<LI>Next message: <A HREF="029104.html">[Mono-list] SSL and WebServices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29102">[ date ]</a>
              <a href="thread.html#29102">[ thread ]</a>
              <a href="subject.html#29102">[ subject ]</a>
              <a href="author.html#29102">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
