<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Reflection odd exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Reflection%20odd%20exception&In-Reply-To=1129718243.7621.14.camel%40terminator">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029092.html">
   <LINK REL="Next"  HREF="029094.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Reflection odd exception</H1>
    <B>Elliott Draper</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Reflection%20odd%20exception&In-Reply-To=1129718243.7621.14.camel%40terminator"
       TITLE="[Mono-list] Reflection odd exception">el at eldiablo.co.uk
       </A><BR>
    <I>Wed Oct 19 06:42:57 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="029092.html">[Mono-list] Reflection odd exception
</A></li>
        <LI>Next message: <A HREF="029094.html">[Mono-list] Reflection odd exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29093">[ date ]</a>
              <a href="thread.html#29093">[ thread ]</a>
              <a href="subject.html#29093">[ subject ]</a>
              <a href="author.html#29093">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'd hazard a guess and say it's because you don't have a reference to 
the relevant Gdk assemblies, or they can't be found in the path, gac 
etc. As such when it's creating this object, it's coming unstuck because 
that class is using a type that it can't find, hence when you change it 
to using types it can find (object, EventArgs), there's no problem.

Either way, you can check the inner exception of that exception to get 
the exact error. It'll tell you in there what the problem is, and 
whether it is in fact a problem with the call using that type, or 
whether I'm way off the mark and it's something completely different :-)

Let me know how you get on.

Cheers,
-= El =-

Carlos Ble wrote:

&gt;<i>Hi!
</I>&gt;<i>Iam working with reflection by loading some clases dinamically. This is
</I>&gt;<i>a piece of &quot;pseudo&quot; code:
</I>&gt;<i>System.Object[] paramsObj = new System.Object[] {...params...};
</I>&gt;<i>Assembly assembly = Assembly.GetExecutingAssembly();
</I>&gt;<i>System.Object childWin =       
</I>&gt;<i>  AppDomain.CurrentDomain.CreateInstanceAndUnwrap(assembly.FullName,    
</I>&gt;<i>  managerClass,true, BindingFlags.Instance|BindingFlags.Public,
</I>&gt;<i>  null, paramsObj, null, null, null);
</I>&gt;<i>
</I>&gt;<i>Everything works fine but one of the classes to load has this method:
</I>&gt;<i>
</I>&gt;<i>bool OnWinDeleteEvent (Gdk.Event e) // Instead of (object o, EventArgs
</I>&gt;<i>e).
</I>&gt;<i>{
</I>&gt;<i>  ...
</I>&gt;<i>  return true;
</I>&gt;<i>}
</I>&gt;<i>
</I>&gt;<i>I can compile all successfull but in runtime, CreateInstanceAndUnwrap
</I>&gt;<i>call launchs this exception: 
</I>&gt;<i>
</I>&gt;<i>Exception has been thrown by the target of an invocation.
</I>&gt;<i>in &lt;0x0010e&gt; System.Reflection.MonoCMethod:Invoke (System.Object obj,
</I>&gt;<i>BindingFlags invokeAttr, System.Reflection.Binder binder,
</I>&gt;<i>System.Object[] parameters, System.Globalization.CultureInfo culture)
</I>&gt;<i>in &lt;0x0001c&gt; System.Reflection.MonoCMethod:Invoke (BindingFlags
</I>&gt;<i>invokeAttr, System.Reflection.Binder binder, System.Object[] parameters,
</I>&gt;<i>System.Globalization.CultureInfo culture)
</I>&gt;<i>in &lt;0x00200&gt; System.Activator:CreateInstance (System.Type type,
</I>&gt;<i>BindingFlags bindingAttr, System.Reflection.Binder binder,
</I>&gt;<i>System.Object[] args, System.Globalization.CultureInfo culture,
</I>&gt;<i>System.Object[] activationAttributes)
</I>&gt;<i>in &lt;0x0005b&gt; System.Activator:CreateInstance (System.String
</I>&gt;<i>assemblyName, System.String typeName, Boolean ignoreCase, BindingFlags
</I>&gt;<i>bindingAttr, System.Reflection.Binder binder, System.Object[] args,
</I>&gt;<i>System.Globalization.CultureInfo culture, System.Object[]
</I>&gt;<i>activationAttributes, System.Security.Policy.Evidence securityInfo)
</I>&gt;<i>in &lt;0x0002d&gt; System.AppDomain:CreateInstance (System.String
</I>&gt;<i>assemblyName, System.String typeName, Boolean ignoreCase, BindingFlags
</I>&gt;<i>bindingAttr, System.Reflection.Binder binder, System.Object[] args,
</I>&gt;<i>System.Globalization.CultureInfo culture, System.Object[]
</I>&gt;<i>activationAttributes, System.Security.Policy.Evidence
</I>&gt;<i>securityAttributes)
</I>&gt;<i>in (wrapper remoting-invoke-with-check) System.AppDomain:CreateInstance
</I>&gt;<i>(string,string,bool,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo,object[],System.Security.Policy.Evidence)
</I>&gt;<i>in &lt;0x0002e&gt; System.AppDomain:CreateInstanceAndUnwrap (System.String
</I>&gt;<i>assemblyName, System.String typeName, Boolean ignoreCase, BindingFlags
</I>&gt;<i>bindingAttr, System.Reflection.Binder binder, System.Object[] args,
</I>&gt;<i>System.Globalization.CultureInfo culture, System.Object[]
</I>&gt;<i>activationAttributes, System.Security.Policy.Evidence
</I>&gt;<i>securityAttributes)
</I>&gt;<i>in (wrapper remoting-invoke-with-check)
</I>&gt;<i>System.AppDomain:CreateInstanceAndUnwrap
</I>&gt;<i>(string,string,bool,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo,object[],System.Security.Policy.Evidence)
</I>&gt;<i>
</I>&gt;<i>If I change arguments to (object o, EventArgs e), it works fine. Can
</I>&gt;<i>somebody write some comments about this behaviour?.
</I>&gt;<i>
</I>&gt;<i>Thanks
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>  
</I>&gt;<i>
</I>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029092.html">[Mono-list] Reflection odd exception
</A></li>
	<LI>Next message: <A HREF="029094.html">[Mono-list] Reflection odd exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29093">[ date ]</a>
              <a href="thread.html#29093">[ thread ]</a>
              <a href="subject.html#29093">[ subject ]</a>
              <a href="author.html#29093">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
