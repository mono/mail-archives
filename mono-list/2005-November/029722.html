<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Validation of XML
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Validation%20of%20XML&In-Reply-To=905767980511300422l2d918fe0kfc27e9ee6c2fae1b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029714.html">
   <LINK REL="Next"  HREF="029724.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Validation of XML</H1>
    <B>Herman Vega</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Validation%20of%20XML&In-Reply-To=905767980511300422l2d918fe0kfc27e9ee6c2fae1b%40mail.gmail.com"
       TITLE="[Mono-list] Validation of XML">hvegax at gmail.com
       </A><BR>
    <I>Wed Nov 30 14:36:09 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="029714.html">[Mono-list] Validation of XML
</A></li>
        <LI>Next message: <A HREF="029724.html">[Mono-list] Re: Validation of XML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29722">[ date ]</a>
              <a href="thread.html#29722">[ thread ]</a>
              <a href="subject.html#29722">[ subject ]</a>
              <a href="author.html#29722">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All...

I need to validate an Xml content and I have two ways:

* Using DTD file.
* Using XSD schema file.

The problem is that i have a DTD file that it's ok, work fine with
xmllint validation program. but my implementation with DTD Validation
don't work with mono. I decide to work with XSD validation schema and
work fine for me. Now i can validate a xml  against XSD schema file
very well with mono.

But here it's the new problem... when i generate a XSD schema file
from XML using xsd.exe this generate a wrong XSD Schema file.


Now the 2 ways...  (1) how i can generate a valid XSD schema file from
Xml (not manual) or (2) how i can validate a Xml using valid DTD file?

I attached the source files that I'm still working

The error using DTD validation:

$ mono -V
Mono JIT compiler version 1.1.8.2, (C) 2002-2005 Novell, Inc and
Contributors. www.mono-project.com
        TLS:           __thread
        GC:            Included Boehm (with typed GC)
        SIGSEGV      : normal
        Globalization: norma

$ mcs --version
Mono C# compiler version 1.1.8.0

$ mono ValidateXml.exe DTD activities.dtd activities.xml

Unhandled Exception: System.Xml.XmlException: Unexpected declaration
markup was found. <A HREF="file:///home/hvega/ticedu/xml/TestXml/activities.dtd">file:///home/hvega/ticedu/xml/TestXml/activities.dtd</A>
Line 2, position 3.

Regards

&gt;&gt;<i> Begin ValidateXml.cs &lt;&lt;
</I>
using System;
using System.IO;
using System.Xml;
using System.Xml.Schema;

namespace ValidationSample
{
  class Sample
  {
    public static void Main (string [] args)
    {
        XmlTextReader tr = new XmlTextReader (args[2]);
        XmlValidatingReader vr = new XmlValidatingReader (tr);
	
	if (args[0] == &quot;DTD&quot;)
  		// for DTD validation
        	vr.ValidationType = ValidationType.DTD;
	else if (args[0] == &quot;XSD&quot;)
        	// form schema XSD validation
	        vr.ValidationType = ValidationType.Schema;
	
	vr.Schemas.Add(string.Empty, args[1]);
        vr.ValidationEventHandler +=
	new ValidationEventHandler (ValidationHandler);

        while (vr.Read ());
        Console.WriteLine (&quot;End Validation&quot;);
    }

    public static void ValidationHandler (object sender,
					  ValidationEventArgs args)
    {
      Console.WriteLine (&quot;***Validation error&quot;);
      Console.WriteLine (&quot;\tSeverity:{0}&quot;, args.Severity);
      Console.WriteLine (&quot;\tMessage  :{0}&quot;, args.Message);
    }
  }
}

&gt;&gt;<i> End ValidateXml.cs &lt;&lt;
</I>
&gt;&gt;<i> begin activity.dtd &lt;&lt;
</I>&lt;!-- top-level element --&gt;
&lt;!ELEMENT activityfile (plan)&gt;

&lt;!-- a single plan has a set of modules --&gt;
&lt;!ELEMENT plan (name,acronym,allduration,description,designers,resource,planprogression,module+)&gt;
&lt;!ATTLIST plan
  id CDATA #REQUIRED&gt;
&lt;!ELEMENT name (#PCDATA)&gt;
&lt;!ELEMENT acronym (#PCDATA)&gt;
&lt;!ELEMENT description (#PCDATA)&gt;
&lt;!ELEMENT designers (designer*)&gt;
&lt;!ELEMENT designer (#PCDATA)&gt;
&lt;!ELEMENT allduration (#PCDATA)&gt;
&lt;!ATTLIST allduration
  unit CDATA &quot;months&quot;&gt;

&lt;!-- --&gt;
&lt;!ELEMENT module (name, resource, moduleplanification,
moduleprogression, notes,(activity|module)*)&gt;
&lt;!ATTLIST module
  id CDATA #REQUIRED&gt;

&lt;!-- A resource is provided by link or external store --&gt;
&lt;!ELEMENT resource (#PCDATA)&gt;
&lt;!ATTLIST resource type (link|external) &quot;link&quot;&gt;

&lt;!ELEMENT notes (note*)&gt;
&lt;!ELEMENT note (name,date,description)&gt;
&lt;!ATTLIST note
  type (public|private) #REQUIRED&gt;
&lt;!ELEMENT date (#PCDATA)&gt;

&lt;!-- --&gt;
&lt;!-- A single activity (a set of elements) --&gt;
&lt;!ELEMENT activity (name,resource,role,planification,progression,advices,notes)&gt;
&lt;!ATTLIST activity
  id CDATA #REQUIRED&gt;

&lt;!-- The type of role (use|consult|produce|execute) --&gt;
&lt;!ELEMENT role EMPTY&gt;
&lt;!ATTLIST role
  type (none|use|consult|produce|execute) &quot;none&quot;&gt;

&lt;!ELEMENT planification (duration,period,evaluation,interaction,jobs,datelimit)&gt;
&lt;!-- duration of the whole activity --&gt;
&lt;!ELEMENT duration EMPTY&gt;
&lt;!ATTLIST duration
  hour CDATA &quot;0&quot;
  min  CDATA &quot;0&quot;&gt;
&lt;!-- Planification of time between start and finish the activity --&gt;
&lt;!ELEMENT period EMPTY&gt;
&lt;!ATTLIST period
  min CDATA &quot;0&quot;
  max CDATA &quot;0&quot;
  unit CDATA &quot;months&quot;&gt;
&lt;!-- Percentage of advance --&gt;
&lt;!ELEMENT evaluation (#PCDATA)&gt;
&lt;!-- Kind of interaction --&gt;
&lt;!ELEMENT interaction (team?,group?)&gt;
&lt;!ELEMENT team EMPTY&gt;
&lt;!ELEMENT group EMPTY&gt;
&lt;!-- # of jobs to be sent --&gt;
&lt;!ELEMENT jobs (#PCDATA)&gt;
&lt;!-- Last date to get the activity done --&gt;
&lt;!ELEMENT datelimit (#PCDATA)&gt;

&lt;!ELEMENT planprogression (complete)&gt;
&lt;!ATTLIST planprogression
  type (bymodules|sequential|parallel|byoptions) &quot;bymodules&quot;&gt;

&lt;!ELEMENT moduleplanification (duration,period,evaluation,interaction
,groupwork)&gt;
&lt;!ELEMENT groupwork EMPTY&gt;
&lt;!ATTLIST groupwork
  hour CDATA &quot;0&quot;
  min CDATA &quot;0&quot;&gt;

&lt;!ELEMENT moduleprogression (weight,complete)&gt;
&lt;!ATTLIST moduleprogression
  type (bymodules|sequential|parallel|byoptions) &quot;bymodules&quot;&gt;
&lt;!ELEMENT complete EMPTY&gt;
&lt;!ATTLIST complete
  count CDATA &quot;0&quot;
  total CDATA &quot;0&quot; &gt;

&lt;!ELEMENT progression (weight,release,validation)&gt;
&lt;!ELEMENT weight (#PCDATA)&gt;
&lt;!ELEMENT release (manual?,automatic?)&gt;
&lt;!ELEMENT manual EMPTY&gt;
&lt;!ELEMENT automatic EMPTY&gt;
&lt;!ATTLIST automatic
  hour CDATA &quot;0&quot;
  min  CDATA &quot;0&quot;
  sec  CDATA &quot;50&quot;&gt;
&lt;!ELEMENT validation (#PCDATA)&gt;

&lt;!ELEMENT advices (advice*)&gt;
&lt;!ELEMENT advice (title,description,resource)&gt;
&lt;!ATTLIST advice
  id CDATA #REQUIRED&gt;
&lt;!ELEMENT title (#PCDATA)&gt;



&gt;&gt;<i> end activity.dtd &lt;&lt;
</I>
&gt;&gt;<i> begin acivity.xml &lt;&lt;
</I>-
	&lt;plan id=&quot;1&quot;&gt;
&lt;name&gt;Plan Name&lt;/name&gt;
&lt;acronym/&gt;
&lt;allduration unit=&quot;months&quot;&gt; &lt;/allduration&gt;
&lt;description&gt; &lt;/description&gt;
&lt;designers&gt;
  &lt;/designers&gt;
&lt;resource type=&quot;link&quot;&gt; &lt;/resource&gt;
-
	&lt;planprogression type=&quot;sequential&quot;&gt;
&lt;complete count=&quot;0&quot; total=&quot;0&quot;/&gt;
&lt;/planprogression&gt;
-
	&lt;module id=&quot;1&quot;&gt;
&lt;name&gt;Mod.1 Name Modulo 1&lt;/name&gt;
&lt;resource type=&quot;link&quot;&gt; &lt;/resource&gt;
-
	&lt;moduleplanification&gt;
&lt;duration hour=&quot;0&quot; min=&quot;0&quot;/&gt;
&lt;period min=&quot;0&quot; max=&quot;0&quot; unit=&quot;0&quot;/&gt;
&lt;evaluation&gt; &lt;/evaluation&gt;
-
	&lt;interaction&gt;
&lt;team/&gt;
&lt;/interaction&gt;
&lt;groupwork hour=&quot;0&quot; min=&quot;0&quot;/&gt;
&lt;/moduleplanification&gt;
-
	&lt;moduleprogression type=&quot;bymodules&quot;&gt;
&lt;weight&gt; &lt;/weight&gt;
&lt;complete count=&quot;0&quot; total=&quot;0&quot;/&gt;
&lt;validation&gt; &lt;/validation&gt;
&lt;/moduleprogression&gt;
&lt;advices&gt;
    &lt;/advices&gt;
&lt;notes&gt;
    &lt;/notes&gt;
-
	&lt;activity id=&quot;1&quot;&gt;
&lt;name&gt;Activity 1&lt;/name&gt;
&lt;resource type=&quot;link&quot;&gt; &lt;/resource&gt;
&lt;role type=&quot;use&quot;/&gt;
-
	&lt;planification&gt;
&lt;duration hour=&quot;0&quot; min=&quot;0&quot;/&gt;
&lt;period min=&quot;0&quot; max=&quot;0&quot; unit=&quot;months&quot;/&gt;
&lt;evaluation&gt; &lt;/evaluation&gt;
&lt;interaction/&gt;
&lt;jobs&gt; &lt;/jobs&gt;
&lt;datelimit&gt; &lt;/datelimit&gt;
&lt;/planification&gt;
-
	&lt;progression&gt;
&lt;weight&gt; &lt;/weight&gt;
-
	&lt;release&gt;
&lt;manual/&gt;
&lt;automatic hour=&quot;0&quot; min=&quot;0&quot; sec=&quot;0&quot;/&gt;
&lt;/release&gt;
&lt;validation&gt; &lt;/validation&gt;
&lt;/progression&gt;
&lt;advices&gt;
      &lt;/advices&gt;
&lt;notes&gt;
      &lt;/notes&gt;
&lt;/activity&gt;
&lt;/module&gt;
&lt;/plan&gt;

&gt;&gt;<i> End activity.xml &lt;&lt;
</I>
--
 ,''`.   Herman Vega Jara &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">hvega at alumnos.ubiobio.cl</A>&gt;
 : :' :  Ing. ejec. Comp. e Inf. at UBB rlz!
 `. `'  <A HREF="http://gbtcr.chileforge.cl">http://gbtcr.chileforge.cl</A>
   `-
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029714.html">[Mono-list] Validation of XML
</A></li>
	<LI>Next message: <A HREF="029724.html">[Mono-list] Re: Validation of XML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29722">[ date ]</a>
              <a href="thread.html#29722">[ thread ]</a>
              <a href="subject.html#29722">[ subject ]</a>
              <a href="author.html#29722">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
