<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: mono-service
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Re%3A%20mono-service&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029260.html">
   <LINK REL="Next"  HREF="029259.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: mono-service</H1>
    <B>Bradley, Peter</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Re%3A%20mono-service&In-Reply-To="
       TITLE="[Mono-list] Re: mono-service">PBradley at uwic.ac.uk
       </A><BR>
    <I>Tue Nov  1 08:21:58 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="029260.html">[Mono-list] should I use NAnt?
</A></li>
        <LI>Next message: <A HREF="029259.html">[Mono-list] Re: mono-service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29257">[ date ]</a>
              <a href="thread.html#29257">[ thread ]</a>
              <a href="subject.html#29257">[ subject ]</a>
              <a href="author.html#29257">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I wonder if I might be forgiven for responding to myself in order to ask one (hopefully final) question about mono-service?

Following the discussion here, I checked out some Windows services I've written and everything seems fine except for one thing.  The services I write are to host remote objects.  As a matter of policy we configure .NET remoting using configuration files.  Therefore host services contain a call to RemotingConfiguration.Configure(&quot;config.file.name&quot;).

Under Windows, the config file must be copied to the WINDOWS\System32 (or WINNT\System32) directory for it to be found by the service.  Where should the config file be located under Mono in order for the daemon to find it?

Thanks for your patience.


Peter


-----Original Message-----
From: J&#246;rg Rosenkranz [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">joergr at voelcker.com</A>] 
Sent: 01 November 2005 12:52
To: Bradley, Peter; Robert Jordan; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list at lists.ximian.com</A>
Subject: RE: [Mono-list] Re: mono-service

Hi Peter,

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list-bounces at lists.ximian.com</A> 
</I>&gt;<i> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">mono-list-bounces at lists.ximian.com</A>] On Behalf Of 
</I>&gt;<i> Bradley, Peter
</I>&gt;<i> Sent: Tuesday, November 01, 2005 1:26 PM
</I>&gt;<i> 
</I>&gt;<i> My post was not intended as a criticism of the man page, and I'm very
</I>&gt;<i> sorry if it appeared to be so.  Perhaps I should have been 
</I>&gt;<i> clearer, but
</I>&gt;<i> what I was really saying that what (I think) is needed is a HowTo.
</I>
Yes I think this is true. There needs to be something in the Wiki.

To answer some of your questions:

&gt;<i> Does the process to be run as a daemon have to inherit from
</I>&gt;<i> System.ServiceProcess.ServiceBase?  Does it guarantee that the
</I>&gt;<i> OnStart(), OnStop(), OnPause(), and OnContinue() methods get called as
</I>&gt;<i> appropriate?  
</I>
The service has to be implemented according to the MS docs:
<A HREF="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfsystemserviceprocessservicebaseclasstopic.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfsystemserviceprocessservicebaseclasstopic.asp</A>
and
<A HREF="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfsystemserviceprocessservicebaseclassruntopic1.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfsystemserviceprocessservicebaseclassruntopic1.asp</A>

Short: It needs to be inherited from ServiceBase and it needs to call 
ServiceBase.Run in it's Main method.

&gt;<i> What does one have to do make the service start 
</I>&gt;<i> up at boot
</I>&gt;<i> time and run without a user logged in?  (Your script is a 
</I>&gt;<i> great help in
</I>&gt;<i> that regard.  Thanks).  What user does the service run as?  
</I>
It runs as the user you are starting mono-service with. You
are responsible for switching the user in the start script.
Examples of start scripts should be in the Wiki/Doc/etc. too.
Maybe that's tootoo distribution specific to put it into SVN?

&gt;<i> What changes
</I>&gt;<i> (if any) are required to assemblies written as Windows 
</I>&gt;<i> services to make
</I>&gt;<i> sure they can run as daemons?
</I>
There are no changes needed if the assemblies are written
with the normal portability rules in mind. Mono-service 
should mimic the behaviour of MS' implementation as close 
as possible.

&gt;<i> The OP obviously has trouble getting the OnStart() method 
</I>&gt;<i> running.  The
</I>&gt;<i> reason why might be contained in the answers to the questions I make
</I>&gt;<i> above.
</I>
Yes :-)

&gt;<i> I'm perfectly happy to put my money where my mouth is as far as
</I>&gt;<i> producing a HowTo is concerned.  Once I've got a daemon 
</I>&gt;<i> running, I'll be
</I>&gt;<i> only too happy to explain how it was done.  But I may need my hand
</I>&gt;<i> holding a little in the meantime :)
</I>
The man page is very basic and contains only information about 
handling of services. There should be an article about implementation
of services too. I would be happy if you write a howto down.
Please ask if you have any questions.

Joerg.
_______________________________________________
Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029260.html">[Mono-list] should I use NAnt?
</A></li>
	<LI>Next message: <A HREF="029259.html">[Mono-list] Re: mono-service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29257">[ date ]</a>
              <a href="thread.html#29257">[ thread ]</a>
              <a href="subject.html#29257">[ subject ]</a>
              <a href="author.html#29257">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
