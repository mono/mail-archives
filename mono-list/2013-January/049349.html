<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] AES/CFB Stream Cipher Problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20AES/CFB%20Stream%20Cipher%20Problem&In-Reply-To=%3C50E3B0D8.20309%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="049331.html">
   <LINK REL="Next"  HREF="049361.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] AES/CFB Stream Cipher Problem</H1>
    <B>Drew DeVault</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20AES/CFB%20Stream%20Cipher%20Problem&In-Reply-To=%3C50E3B0D8.20309%40gmail.com%3E"
       TITLE="[Mono-list] AES/CFB Stream Cipher Problem">sircmpwn at gmail.com
       </A><BR>
    <I>Wed Jan  2 04:00:24 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="049331.html">[Mono-list] MySql.Data problems
</A></li>
        <LI>Next message: <A HREF="049361.html">[Mono-list] AES/CFB Stream Cipher Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49349">[ date ]</a>
              <a href="thread.html#49349">[ thread ]</a>
              <a href="subject.html#49349">[ subject ]</a>
              <a href="author.html#49349">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm having an issue with Mono that does not appear on Microsoft.NET, 
related to AES/CFB encryption with no padding. Firstly, here's my Mono 
version:

Mono JIT compiler version 2.10.8.1 (Debian 2.10.8.1-1ubuntu2.2)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. 
www.mono-project.com
         TLS:           __thread
         SIGSEGV:       altstack
         Notifications: epoll
         Architecture:  amd64
         Disabled:      none
         Misc:          softdebug
         LLVM:          supported, not enabled.
         GC:            Included Boehm (with typed GC and Parallel Mark)

Secondly, I would like to find a solution that does indeed work on this 
version of Mono, because most of my users are on the same version. The 
problem comes
from using a CryptoStream with a RijndaelManaged cipher. I have attached 
a proof of concept to the email, along with the results of running it on 
Windows with
Microsoft.NET and on Linux Mint 12 with Mono.

The AesStream in the example comes from this project: 
<A HREF="https://github.com/SirCmpwn/Craft.Net/blob/master/Craft.Net/AesStream.cs">https://github.com/SirCmpwn/Craft.Net/blob/master/Craft.Net/AesStream.cs</A>

In short, on Microsoft.NET, writing to the CryptoStream does indeed 
encrypt the data properly, where on Mono, no data is written, and an
IndexOutOfBoundsException is thrown when trying to read the encrypted data.

Drew DeVault
-------------- next part --------------
A non-text attachment was scrubbed...
Name: AesProof.zip
Type: application/zip
Size: 4255 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20130101/dcb9fd97/attachment.zip">http://lists.ximian.com/pipermail/mono-list/attachments/20130101/dcb9fd97/attachment.zip</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="049331.html">[Mono-list] MySql.Data problems
</A></li>
	<LI>Next message: <A HREF="049361.html">[Mono-list] AES/CFB Stream Cipher Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49349">[ date ]</a>
              <a href="thread.html#49349">[ thread ]</a>
              <a href="subject.html#49349">[ subject ]</a>
              <a href="author.html#49349">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
