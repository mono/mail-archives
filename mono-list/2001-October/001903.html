<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Class library developers: locking issues to keep in
 mind
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:miguel%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001907.html">
   <LINK REL="Next"  HREF="001908.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Class library developers: locking issues to keep in
 mind
   </H1>
    <B>Miguel de Icaza
    </B> 
    <A HREF="mailto:miguel%40ximian.com"
       TITLE="[Mono-list] Class library developers: locking issues to keep in
 mind">miguel@ximian.com
       </A><BR>
    <I>28 Oct 2001 07:40:14 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="001907.html">[Mono-list] Class library developers: locking issues to keep inmind
</A></li>
        <LI> Next message: <A HREF="001908.html">[Mono-list] Class library developers: locking issues to keep in	mind
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1903">[ date ]</a>
              <a href="thread.html#1903">[ thread ]</a>
              <a href="subject.html#1903">[ subject ]</a>
              <a href="author.html#1903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2001-10-28 at 05:20, Alexander Klyubin wrote:
&gt;<i> I don't know that much about .NET memory model as of Java's one, but in 
</I>&gt;<i> Java the code with on-demand locking you provided is called 
</I>&gt;<i> Double-checked Locking (DCL). The problem with it is that it is not 
</I>&gt;<i> guaranteed to work in all JVMs as synchronizing memory thread's own 
</I>&gt;<i> local memory with shared main memory accessible to all threads can work 
</I>&gt;<i> differently in different JVMs. Maybe memory model is organized 
</I>&gt;<i> differently in .NET languages compared to Java. But as similarity 
</I>&gt;<i> between C# and Java is realy big, I suspect memory model should be quite 
</I>&gt;<i> similar if not the same.
</I>
This is a good point.

The problem comes not from the language, but from modern computer
architectures in SMP scenarios (the second link in your post goes into
detail about this)

Sadly none of the articles offers a good solution to the problem. Maybe
we need to discuss with the .NET people the semantics of lock in C# (we
could have explicit read/write barriers generated) or use volatiles.

Miguel.


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001907.html">[Mono-list] Class library developers: locking issues to keep inmind
</A></li>
	<LI> Next message: <A HREF="001908.html">[Mono-list] Class library developers: locking issues to keep in	mind
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1903">[ date ]</a>
              <a href="thread.html#1903">[ thread ]</a>
              <a href="subject.html#1903">[ subject ]</a>
              <a href="author.html#1903">[ author ]</a>
         </LI>
       </UL>
</body></html>
