<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Handling SIGRT* signals
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Handling%20SIGRT%2A%20signals&In-Reply-To=E961123C01E7E94AA29163941172913E071399CA%40mail1.dundee.realtimeworlds.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040655.html">
   <LINK REL="Next"  HREF="040705.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Handling SIGRT* signals</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Handling%20SIGRT%2A%20signals&In-Reply-To=E961123C01E7E94AA29163941172913E071399CA%40mail1.dundee.realtimeworlds.com"
       TITLE="[Mono-list] Handling SIGRT* signals">jonpryor at vt.edu
       </A><BR>
    <I>Wed Dec 10 14:21:05 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="040655.html">[Mono-list] Handling SIGRT* signals
</A></li>
        <LI>Next message: <A HREF="040705.html">[Mono-list]  Type conversion trouble
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40656">[ date ]</a>
              <a href="thread.html#40656">[ thread ]</a>
              <a href="subject.html#40656">[ subject ]</a>
              <a href="author.html#40656">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2008-12-10 at 17:33 +0000, <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">tim.jenks at realtimeworlds.com</A> wrote:
&gt;<i> I have been looking over the UnixSignal class hoping to Wait on a
</I>&gt;<i> SIGRT signal raised by a native library. Unfortunately, I can only
</I>&gt;<i> create UnixSignal instances to handle signals defined in the Signum
</I>&gt;<i> enumerator and not Signals &gt;= SIGRTMIN.
</I>&gt;<i>
</I>&gt;<i> Is there a way to handle SIGRT* signals in Mono currently?
</I>
It isn't currently supported because it's not trivial to support.  It's
not difficult either, but I haven't carved out enough time to support it
yet.

The fundamental problem is that Signum CANNOT hold a realtime signal.
This is so because:

1. Signum contains platform-independent values.  Consequently, any
Signum values need to be mapped at runtime to the appropriate
platform-specific values, but...

2. There is not a concrete set of realtime signals.

All POSIX ensures is that the lowest realtime signal is SIGRTMIN, the
highest signal is SIGRTMAX, and that SIGRTMAX-SIGRTMIN &gt;= 8 (according
to signal(7)).

So we could provide a Signum value for SIGRTMIN, but I don't think it
would be sensible to support SIGRTMAX or any of the values betwen
SIGRTMIN &amp; SIGRTMAX.

So what's instead needed is an alternate mechanism for realtime signals,
e.g. add a new type:

        public struct RealTimeSignal {
          public RealTimeSignal (int offset);
          public int Offset {get;}
        }

such that `new RealTimeSignal(N)' is equivalent to `SIGRTMIN+N'.  Then,
we need only overload members that accept Signum such as
Stdlib.SetSignalAction() and the UnixSignal constructor to accept
RealTimeSignal instances in addition to Signum values.

Then lots of plumbing work to ensure that The Right Thing happens, as
currently the UnixSignal constructor/etc. go through the mapping code to
convert Signum values to their actual runtime values, while for
RealTimeSignals we'd need to grab the runtime value of SIGRTMIN and add
Offset to it, with an additional runtime check that
SIGRTMIN + Offset &lt;= SIGRTMAX.

That said, it shouldn't be too difficult to implement this, but I'm
sufficiently swamped that I won't get to it anytime soon, so if you'd
like to cook up a patch I'd love to review it...

 - Jon


</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040655.html">[Mono-list] Handling SIGRT* signals
</A></li>
	<LI>Next message: <A HREF="040705.html">[Mono-list]  Type conversion trouble
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40656">[ date ]</a>
              <a href="thread.html#40656">[ thread ]</a>
              <a href="subject.html#40656">[ subject ]</a>
              <a href="author.html#40656">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
