<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Problems with arrays over 4gb on 64 bit Itanium
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Problems%20with%20arrays%20over%204gb%20on%2064%20bit%20Itanium&In-Reply-To=c0e953420812100610h71f1b733r29078dc6b0a34cc9%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040647.html">
   <LINK REL="Next"  HREF="040640.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Problems with arrays over 4gb on 64 bit Itanium</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Problems%20with%20arrays%20over%204gb%20on%2064%20bit%20Itanium&In-Reply-To=c0e953420812100610h71f1b733r29078dc6b0a34cc9%40mail.gmail.com"
       TITLE="[Mono-list] Problems with arrays over 4gb on 64 bit Itanium">kumpera at gmail.com
       </A><BR>
    <I>Wed Dec 10 09:28:53 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="040647.html">[Mono-list] Problems with arrays over 4gb on 64 bit Itanium
</A></li>
        <LI>Next message: <A HREF="040640.html">[Mono-list] Mono code style guide with Visual Studio settings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40648">[ date ]</a>
              <a href="thread.html#40648">[ thread ]</a>
              <a href="subject.html#40648">[ subject ]</a>
              <a href="author.html#40648">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That's exactly your problem, arrays in mono can't be more than 2^31 elements
or use more than 4GB of memory.

What you need is big array support but it's not complete and the original
contribution was against amd64.

If you really need this, finishing it is not a big task and you can just
hack your way into the runtime.


On Wed, Dec 10, 2008 at 12:10 PM, Christian Prokopp &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">prokopp at gmail.com</A>&gt;wrote:

&gt;<i> Dear John,
</I>&gt;<i>
</I>&gt;<i> A very good thought. I tried and compiled my version with
</I>&gt;<i> --enable-big-arrays and had no success. In fact my array index size seems to
</I>&gt;<i> be limited to (2^31)-1. If I try to create an array of bool or byte of 2^32
</I>&gt;<i> or bigger I get a System.OverflowException. If I try and create an array of
</I>&gt;<i> that size with double I get an OutOfMemoryException instead of the overflow.
</I>&gt;<i>
</I>&gt;<i> It appears that big arrays are still not fully working (
</I>&gt;<i> <A HREF="http://go-mono.com/forums/#nabble-td19839697">http://go-mono.com/forums/#nabble-td19839697</A>). Anyone has an idea when
</I>&gt;<i> they will work and if that solves my original out of memory problem?
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Christian
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2008/12/10 Dallman, John &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">john.dallman at siemens.com</A>&gt;
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; Thanks for the idea Alan but the big array switch is for array index
</I>&gt;&gt;<i> &gt; size over 32bit. In my case the index is smaller (factor 8 because I
</I>&gt;&gt;<i> &gt; use double) but the memory the array data covers exceeds 4gb and that
</I>&gt;&gt;<i> &gt; raises the problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Try it anyway. On a byte-addressed machine like Itanium, using an
</I>&gt;&gt;<i> integer as an index for an array of doubles will result in the
</I>&gt;&gt;<i> integer being multiplied by eight before it's added to the base
</I>&gt;&gt;<i> address of the array. So the addressing will actually be in terms
</I>&gt;&gt;<i> of bytes. And the big array switch could well be documented in
</I>&gt;&gt;<i> terms of the memory being addressed, which is what really matters.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> John Dallman
</I>&gt;&gt;<i> Parasolid Porting Engineer
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20081210/aaba1f5f/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20081210/aaba1f5f/attachment.html</A> 
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040647.html">[Mono-list] Problems with arrays over 4gb on 64 bit Itanium
</A></li>
	<LI>Next message: <A HREF="040640.html">[Mono-list] Mono code style guide with Visual Studio settings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40648">[ date ]</a>
              <a href="thread.html#40648">[ thread ]</a>
              <a href="subject.html#40648">[ subject ]</a>
              <a href="author.html#40648">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
