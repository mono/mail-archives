<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Assembly.GetExecutingAssembly weirdness on amd64
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Assembly.GetExecutingAssembly%20weirdness%20on%20amd64&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030122.html">
   <LINK REL="Next"  HREF="030126.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Assembly.GetExecutingAssembly weirdness on amd64</H1>
    <B>Marek Habersack</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Assembly.GetExecutingAssembly%20weirdness%20on%20amd64&In-Reply-To="
       TITLE="[Mono-list] Assembly.GetExecutingAssembly weirdness on amd64">grendel at caudium.net
       </A><BR>
    <I>Fri Dec 30 06:52:53 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="030122.html">[Mono-list] Re: Mono in Solaris
</A></li>
        <LI>Next message: <A HREF="030126.html">[Mono-list] MonoDevelop Completion Trouble !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30124">[ date ]</a>
              <a href="thread.html#30124">[ thread ]</a>
              <a href="subject.html#30124">[ subject ]</a>
              <a href="author.html#30124">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

  The Evolve toolbar source (<A HREF="http://www.codeproject.com/aspnet/CrossBrowserToolbar.asp">http://www.codeproject.com/aspnet/CrossBrowserToolbar.asp</A>)
contains code that lives in two source files:

items/ToolbarImage.cs:

protected override void OnPreRender(EventArgs e)
{
  if (this.RenderRollOverScripts)
  {
     if (log.IsDebugEnabled)
        log.DebugFormat(&quot;Executing assembly: {0}&quot;, Assembly.GetExecutingAssembly());
     RollOverHandler.RegisterRollOverScript(this);
  }

  base.OnPreRender (e);
}

util/RollOverHandler.cs:

public static void RegisterRollOverScript(Control renderedControl)
{
   Page page = renderedControl.Page;
   ...
   ResourceManager manager = new ResourceManager(&quot;Evolve.Web.UI.Toolbar.JavaScript&quot;, Assembly.GetExecutingAssembly());
   if (log.IsDebugEnabled) 
     log.DebugFormat(&quot;Executing assembly: {0}; manager: {1}&quot;, Assembly.GetExecutingAssembly(), manager);
          
   String script = manager.GetResourceSet(System.Globalization.CultureInfo.CurrentCulture, true, true).GetString(&quot;LibraryScript&quot;);
   ...
}

And on x86 both debug messages show the assembly name correctly as
Evolve.Web.UI.Toolbar. However on amd64, the 2nd message claims that the
currently executing assembly name is mscorlib (which breaks the control,
causing an exception and a backtrace). Anybody has any idea what might it
be? Could it be that the RegisterRollOverScript method is executed in a
different thread, one that's associated with mscorlib (just wild-guessing,
as I have no idea)?

Both machines use the same version of mono (current svn)
libc amd64: 2.3.5 (debian/testing, debian version 8.1), no tls
libc x86: 2.3.5 (ubuntu/dapper, ubuntu version 1ubuntu17), tls enabled
kernel amd64: 2.6.14.2
kernel x86: 2.6.15

tia,

marek
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030122.html">[Mono-list] Re: Mono in Solaris
</A></li>
	<LI>Next message: <A HREF="030126.html">[Mono-list] MonoDevelop Completion Trouble !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30124">[ date ]</a>
              <a href="thread.html#30124">[ thread ]</a>
              <a href="subject.html#30124">[ subject ]</a>
              <a href="author.html#30124">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
