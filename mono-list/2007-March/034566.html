<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] [mono-list] Merging compiled SVN with	installed	version.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%5Bmono-list%5D%20Merging%20compiled%20SVN%20with%0A%09installed%09version.&In-Reply-To=7d157d580703131212h20d64cf2r76cd704c8da80da3%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034562.html">
   <LINK REL="Next"  HREF="034567.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] [mono-list] Merging compiled SVN with	installed	version.</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%5Bmono-list%5D%20Merging%20compiled%20SVN%20with%0A%09installed%09version.&In-Reply-To=7d157d580703131212h20d64cf2r76cd704c8da80da3%40mail.gmail.com"
       TITLE="[Mono-list] [mono-list] Merging compiled SVN with	installed	version.">sebastien.pouliot at gmail.com
       </A><BR>
    <I>Tue Mar 13 16:06:17 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="034562.html">[Mono-list] [mono-list] Merging compiled SVN with installed version.
</A></li>
        <LI>Next message: <A HREF="034567.html">[Mono-list] [mono-list] Merging compiled SVN with installed	version.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34566">[ date ]</a>
              <a href="thread.html#34566">[ thread ]</a>
              <a href="subject.html#34566">[ subject ]</a>
              <a href="author.html#34566">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Eric,

a few (very partial) answers...

On Tue, 2007-03-13 at 13:12 -0600, Eric Morgan wrote:
&gt;<i> Hey all,
</I>&gt;<i> 
</I>&gt;<i> (sorry, long)
</I>&gt;<i> 
</I>&gt;<i> So, our software is using mono so we can offer our C# code on linux.
</I>&gt;<i> We've had lots of issues with mono installations, as they vary from
</I>&gt;<i> customer to customer.  Additionally, we've found that people that
</I>&gt;<i> install mono as root, or in a non local prefix (like.. /usr/) there
</I>&gt;<i> ends up being weird permission errors.
</I>
Sorry there's not enough details to help. It doesn't sounds like a
common (known) bug so you better fill one at bugzilla.ximian.com with
instructions on how to repeat this.

&gt;<i>   Additionally, for some of our code, we need to write to the
</I>&gt;<i> executing directory, which is actually mono... 
</I>
Well you shouldn't be writing there ;-) and I'm not sure how you got
there (bad scripts ?). You may have to write to the *current* directory
(the one of the .exe you're running) and this one may (or not) have the
required permissions to allow this.

&gt;<i> Anyway, we're bundling our own version of mono that's the generic x86
</I>&gt;<i> linux distribution.  We've done a local install, and we have many
</I>&gt;<i> scripts to run our program so it uses the supplied version of mono and
</I>&gt;<i> configurations.  The problem is, there's some fixes in SVN we'd really
</I>&gt;<i> like to have, and we don't know how long before another official
</I>&gt;<i> release will be.  So, I compiled the SVN code with a prefix of our
</I>&gt;<i> local installation, and just had it make install into that directory.
</I>&gt;<i> Everything seemed fine at first, but I started noticing some issues
</I>&gt;<i> with our MDI relating to X11.  My question is, do I need to link
</I>&gt;<i> everything differently, so it's using the dependencies in our local
</I>&gt;<i> installation instead of the ones installed by my distribution?  
</I>
Maybe not everything, but yes some things. For example(*) you must
ensure that the libgdiplus.so being loaded is the one that match the
System.Drawing.dll you use (on which System.Windows.Forms.dll depends).
If not then you may experience bugs, crash, rain, lost of sleep...

(*) that's just one example

&gt;<i> Is there some configuration I'm doing wrong?  
</I>
Maybe, maybe not (can't be sure without a test case).

While cherry-picking patches is possible it also has a lot of potential
pitfalls. You better have a very good understanding of the software and
it's options (or wait for the next official release).

&gt;<i> Is this an inherantly bad idea?  
</I>
IMO yes. At best you'll be getting a &quot;unique&quot; configuration (with unique
bugs). At worse it won't work and no one will be able to duplicate it
(i.e. help you).

&gt;<i> Or is there a regression issue with MDI and X11 that I'm bumping
</I>&gt;<i> into? 
</I>
Maybe some people noticed something similar? but I didn't.

The best way to find out is to try your code on a fully synchronized
mono version, e.g. SVN HEAD (both mono, mcs and libgdiplus). If it works
then it's a result of your customized version, if not it's probably a
regression (and a new bug report should be opened to ensure this is
fixed prior to the next official release).

&gt;<i> First, if we have a window open and we open a second window, some of
</I>&gt;<i> the control don't render properly on the second window.  The window
</I>&gt;<i> now on the foreground just won't draw properly and you can actually
</I>&gt;<i> see part of the previous window drawn on the top window, which stays
</I>&gt;<i> drawn even if you move or resize the top window .  Sometimes it can
</I>&gt;<i> recieve events and operate OK, but the more we work in that window the
</I>&gt;<i> more things break down.  Different controls start to draw strange,
</I>&gt;<i> refreshing doesn't work, there's stuff that doesn't even GET drawn.
</I>&gt;<i> The exact same window, if I open it first, works perfectly.  It's only
</I>&gt;<i> when *any* window is opened as a second MDI document.  Switching
</I>&gt;<i> windows works fine. 
</I>&gt;<i> 
</I>&gt;<i> Second, when I close that top window, I get utterly spammed with X11
</I>&gt;<i> errors.  I truncated the stacktrace, I can send if you want, but it's
</I>&gt;<i> a pretty generic one.  The error is:
</I>&gt;<i> X11 Error encountered:
</I>&gt;<i>  Error: BadWindow (invalid Window parameter) 
</I>&gt;<i>  Request:     7 (X_ReparentWindow)
</I>&gt;<i>  Resource ID: 0x3C05C40
</I>&gt;<i>  Serial:      189634
</I>&gt;<i>  Hwnd:        Hwnd, Mapped:True ClientWindow:0x3C05C40,
</I>&gt;<i> WholeWindow:0x3C05C3F, Parent:[Hwnd, Mapped:True
</I>&gt;<i> ClientWindow:0x3C05C32, WholeWindow:0x3C05C31, Parent:[Hwnd,
</I>&gt;<i> Mapped:True ClientWindow:0x3C05C30, WholeWindow:0x3C05C2F,
</I>&gt;<i> Parent:[Hwnd, Mapped:True ClientWindow:0x3C05C2A,
</I>&gt;<i> WholeWindow:0x3C05C29, Parent:[Hwnd, Mapped:True
</I>&gt;<i> ClientWindow:0x3C05C28, WholeWindow:0x3C05C27, Parent:[Hwnd,
</I>&gt;<i> Mapped:True ClientWindow:0x3C05C24, WholeWindow:0x3C05C23,
</I>&gt;<i> Parent:[Hwnd, Mapped:True ClientWindow:0x3C05C20,
</I>&gt;<i> WholeWindow:0x3C05C1F, Parent:[Hwnd, Mapped:True
</I>&gt;<i> ClientWindow:0x3C05C1E, WholeWindow:0x3C05C1D, Parent:[Hwnd,
</I>&gt;<i> Mapped:True ClientWindow:0x3C05BF2, WholeWindow:0x3C05BF1,
</I>&gt;<i> Parent:[&lt;null&gt;]]]]]]]]]
</I>&gt;<i>  Control:     System.Windows.Forms.GroupBox, Text: Diagnostic
</I>&gt;<i>   (STACKTRACE)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Any Advice?  
</I>
In doubt open a new bug report with a, as small as possible, test case
with source code.

&gt;<i> Thanks for the help and sorry about the long email.  
</I>
You should send SWF-related questions to mono-winforms-list instead of
mono-list or more general development questions to mono-devel-list.
<A HREF="http://www.mono-project.com/Mailing_Lists">http://www.mono-project.com/Mailing_Lists</A>

&gt;<i> I didn't want to just submit a bug report, because it may not even be
</I>&gt;<i> a bug.
</I>
Don't worry we can close such reports as NOTABUG ;-)

&gt;<i>   I want to double check here. 
</I>

&gt;<i> Eric Morgan
</I>&gt;<i> Renegade Geophysics
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>-- 
Sebastien Pouliot  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">sebastien at ximian.com</A>&gt;
Blog: <A HREF="http://pages.infinit.net/ctech/">http://pages.infinit.net/ctech/</A>

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034562.html">[Mono-list] [mono-list] Merging compiled SVN with installed version.
</A></li>
	<LI>Next message: <A HREF="034567.html">[Mono-list] [mono-list] Merging compiled SVN with installed	version.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34566">[ date ]</a>
              <a href="thread.html#34566">[ thread ]</a>
              <a href="subject.html#34566">[ subject ]</a>
              <a href="author.html#34566">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
