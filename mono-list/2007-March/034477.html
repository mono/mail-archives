<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Combining JIT and interpreter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Combining%20JIT%20and%20interpreter&In-Reply-To=1173193100.29620.14.camel%40erandi.dom">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034475.html">
   <LINK REL="Next"  HREF="034483.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Combining JIT and interpreter</H1>
    <B>Jonathan Chambers</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Combining%20JIT%20and%20interpreter&In-Reply-To=1173193100.29620.14.camel%40erandi.dom"
       TITLE="[Mono-list] Combining JIT and interpreter">joncham at gmail.com
       </A><BR>
    <I>Tue Mar  6 10:16:37 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="034475.html">[Mono-list] Combining JIT and interpreter
</A></li>
        <LI>Next message: <A HREF="034483.html">[Mono-list] Combining JIT and interpreter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34477">[ date ]</a>
              <a href="thread.html#34477">[ thread ]</a>
              <a href="subject.html#34477">[ subject ]</a>
              <a href="author.html#34477">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I added some updates to two of the tasks below.

On 3/6/07, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">miguel at novell.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> &gt; Any suggestions as to what these other things could be ?
</I>&gt;<i>
</I>&gt;<i> Here are some:
</I>&gt;<i>
</I>&gt;<i>         * Implement generic code sharing (this is when the compiler
</I>&gt;<i>           detects that the generated code for two different
</I>&gt;<i>           instantiations of a generic method would have the same
</I>&gt;<i>           code).
</I>&gt;<i>
</I>&gt;<i>         * Precompilation (AOT) support for new platforms.
</I>&gt;<i>
</I>&gt;<i>         * Win64 port.
</I>

This is underway. There are a few issues.

* First, the runtime will need to be built with MSVC as gcc (and the rest of
the cygwin toolchain) is not ported to Win64. This means we can either drive
MSVC using the current autotools/cygwin build process, or just use VS to
build runtime. Right now, it looks much easier to just use VS so this is the
approach I am taking. I'll setup some scripts to copy files to correct
location after build so that mcs tree can be built using the MSVC built
runtime.

* As for actually porting runtime code, a few tasks I can think of or
started include generally cleaning up the vcproj files, fixing any
trucations if they exist (sizeof(long) == 4 on Win64), removing inline
assembly (64-bit MSVC does not support this), modifying the JIT to handle
the Win64 calling convention (there is only one AFAIK).

* The other big task is making sure all the dependent libraries, mainly
libgc and glib, exist on Win64. I started working on libgc (the newer
releases ship with vcproj files), but I think little work has been done in
this area. For glib, there is a currently active thread on the gtk mailing
list right now where someone else is building glib on Win64 so I'm hoping
this is done by the time I need it.


        * Complete the Mono verifier (we have tests that are failing
&gt;<i>           in the verifier directory).
</I>&gt;<i>
</I>&gt;<i>         * Add XPCOM or UNO support to Mono in addition to the current
</I>&gt;<i>           Mainsoft COM support (coordinate with Jonathan Chambers).
</I>

* XPCOM support should be very trivial to add, at least on Win/Linux
x86/x86-64 platforms. Mainly, it just needs someone interested in this to
try it and report any problems. I spent a few hours last weekend to see if I
could use the COM Interop infrastructure to traverse the Mozilla DOM and I
could. The main issues are where XPCOM differs from MS COM, like strings and
the actual component creation mechanism.


There are other tasks here:
&gt;<i>
</I>&gt;<i>         <A HREF="http://www.mono-project.com/Todo">http://www.mono-project.com/Todo</A>
</I>&gt;<i>
</I>&gt;<i> And here:
</I>&gt;<i>
</I>&gt;<i>         <A HREF="http://www.mono-project.com/StudentProjects">http://www.mono-project.com/StudentProjects</A>
</I>&gt;<i>
</I>&gt;<i> Miguel.
</I>&gt;<i>
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt; -Aram
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Mar 5, 2007, at 5:05 PM, Miguel de Icaza wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;&gt; I am trying to modify Mono to have the interpreter and JIT compiler
</I>&gt;<i> &gt; &gt;&gt; run at the same time. The idea is to have some parts interpreted
</I>&gt;<i> &gt; &gt;&gt; while others compiled. Does mono already do this ? Are there
</I>&gt;<i> &gt; &gt;&gt; mechanisms in place for this ?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; It does not do it.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; There is no mechanism to do it.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; This seems like a lot of work, there might be better things to do that
</I>&gt;<i> &gt; &gt; would give you better bang for your buck though.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Miguel.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20070306/9e084ea0/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20070306/9e084ea0/attachment.html</A> 
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034475.html">[Mono-list] Combining JIT and interpreter
</A></li>
	<LI>Next message: <A HREF="034483.html">[Mono-list] Combining JIT and interpreter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34477">[ date ]</a>
              <a href="thread.html#34477">[ thread ]</a>
              <a href="subject.html#34477">[ subject ]</a>
              <a href="author.html#34477">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
