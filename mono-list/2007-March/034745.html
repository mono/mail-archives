<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] interacting with external libraries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20interacting%20with%20external%20libraries&In-Reply-To=6BD74C41-FB93-4860-9BCD-172FDC8C91CE%40his.se">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034743.html">
   <LINK REL="Next"  HREF="034722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] interacting with external libraries</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20interacting%20with%20external%20libraries&In-Reply-To=6BD74C41-FB93-4860-9BCD-172FDC8C91CE%40his.se"
       TITLE="[Mono-list] interacting with external libraries">jonpryor at vt.edu
       </A><BR>
    <I>Tue Mar 27 06:51:31 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="034743.html">[Mono-list] interacting with external libraries
</A></li>
        <LI>Next message: <A HREF="034722.html">[Mono-list] Installations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34745">[ date ]</a>
              <a href="thread.html#34745">[ thread ]</a>
              <a href="subject.html#34745">[ subject ]</a>
              <a href="author.html#34745">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 2007-03-23 at 18:19 +0100, Svetoslav Marinov wrote:
&gt;<i> Is there a way to convert an &quot;.a&quot; library into &quot;.so&quot; one? In case I  
</I>&gt;<i> cannot use the libTimbl.a directly.
</I>
No.  First, there's the file format issue -- .a files are generated by
ar(1) and cannot be loaded by ld.so(8), while .so files are generated by
the compiler and are (1) executable (`/lib/libc.so.6` is a valid
command), and (2) can be loaded by ld.so(8) and dlopen(3).  Neither of
these attributes is true for .a files.

So you cannot use .a files from [DllImport] methods, only .so files.

You can turn a .a file into a .so file though, by e.g.:

	gcc -shared -o libfoo.so libfoo.a

But then we get to the other problem: .so files need to be linked
from .o files which have -fpic specified, so they contain
position-independent code (this allows the .so to be located anywhere in
memory, with no fixed addresses -- required for shared libraries).  .a
files are (typically) linked from .o files which do NOT have -fpic
specified.

If you know that your .a file contains -fpic compiled code (or you're on
a platform where all code is position-independent -- the gcc man page
lists RS/6000 is one such platform), this will work, but in all
likelihood it will NOT, in which case the only thing you can do is
rebuild the entire library, ensuring that -fpic is specified when
creating each .o file.

 - Jon


</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034743.html">[Mono-list] interacting with external libraries
</A></li>
	<LI>Next message: <A HREF="034722.html">[Mono-list] Installations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34745">[ date ]</a>
              <a href="thread.html#34745">[ thread ]</a>
              <a href="subject.html#34745">[ subject ]</a>
              <a href="author.html#34745">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
