<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] What do I do with my images...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20What%20do%20I%20do%20with%20my%20images...&In-Reply-To=12783c860703031650r55fde0depce8f7ba0706661aa%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034442.html">
   <LINK REL="Next"  HREF="034445.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] What do I do with my images...</H1>
    <B>David Anes</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20What%20do%20I%20do%20with%20my%20images...&In-Reply-To=12783c860703031650r55fde0depce8f7ba0706661aa%40mail.gmail.com"
       TITLE="[Mono-list] What do I do with my images...">david.anes at gmail.com
       </A><BR>
    <I>Sun Mar  4 09:24:47 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="034442.html">[Mono-list] What do I do with my images...
</A></li>
        <LI>Next message: <A HREF="034445.html">[Mono-list] What do I do with my images...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34444">[ date ]</a>
              <a href="thread.html#34444">[ thread ]</a>
              <a href="subject.html#34444">[ subject ]</a>
              <a href="author.html#34444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi again Jos&#233;:
Ok, let's say you have a file named &quot;MyBitmap.bmp&quot; and you have embedded it
into the assembly.

The firt you need to do is to get a reference to the assembly. If you are
retrieving the image from the same assembly where the code is executing, you
can use:

Assembly as = Assembly.GetExecutingAssembly();

With the assembly, you can inspect what resources you have. The easiest way
is to get a list of files embedded using:

string[] resource_names = as..GetManifestResourceNames();

Then you can get a stream to the embedded resource you want:

Stream s = as..GetManifestResourceStream( res_name )

where &quot;res_name&quot; is a resource name that you got previously. This way you
get a stream to the embedded resource. Now, you can read the stream (or do
whatever you need).

For example:

Bitmap bmp = new Bitmap( as.GetManifestResourceStream( &quot;MyBitmap.bmp&quot;) );

You need to take into account the way MonoDevelop and VisualStudio take care
of embeded resources, because the names of the file of the resource does not
always match the name in the resource. MonoDevelop, for example, uses the
name of the resource directly (this way, the latest line of code I've
written is actually valid), but VisualStudio uses the &quot;Default Namespace
Name&quot; in the project to prepent it to the resources. So you can end up with
a &quot;this.is.mi.namespace.MyBitmap.bmp&quot; instead. This is the reason to inspect
resource names before you actually try to get a stream for them.

Another problem you may find, is the way to load back the resources, because
you have a stream, instead a physical file. Librsvg allows you to load
directly from a memory chunk, instead of a file, so try this way instead to
load directly from an on-disk file.

Cheers,
David Anes.




2007/3/4, David Anes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">david.anes at gmail.com</A>&gt;:
&gt;<i>
</I>&gt;<i> Hi Jos&#233;.
</I>&gt;<i>
</I>&gt;<i> Sorry to reply only to you, it was clearly a mistake.
</I>&gt;<i>
</I>&gt;<i> It's a bit later here in Spain, so tomorrow I will give you some tips and
</I>&gt;<i> hints so you can get back the images from resources. It is not needed to
</I>&gt;<i> have paths, simply get a stream to the resource a read it back.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> David Anes.
</I>&gt;<i>
</I>&gt;<i> 2007/3/4, Jos&#233; Pablo Fern&#225;ndez &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">pupeno at pupeno.com</A>&gt;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hello David,
</I>&gt;<i> &gt; Thank you for your reply, I hope you don't mind that I put the thread
</I>&gt;<i> &gt; back
</I>&gt;<i> &gt; into the mailing list, I believe this can be useful for other people (or
</I>&gt;<i> &gt; myself, in a couple of months when I won't have this mail anymore and
</I>&gt;<i> &gt; it'll
</I>&gt;<i> &gt; be in the archives).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Saturday March 3 2007 16:21, David Anes wrote:
</I>&gt;<i> &gt; &gt; Hi Pablo,
</I>&gt;<i> &gt; &gt; Embed the images into the assembly as resources,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I believe I have already done that. I've added the images as deployable
</I>&gt;<i> &gt; resources in MonoDevelop. When I have to pick an icon for example, I can
</I>&gt;<i> &gt; click in the Resources tab and see my images there. Is that enough?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; and load back the images at runtime.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can you give me any hints about how this is done?
</I>&gt;<i> &gt; Note: the images are SVG and are loaded my own code (wrapper around
</I>&gt;<i> &gt; Cairo and
</I>&gt;<i> &gt; Rsvg). Having a class/method resolving the absolute path having only a
</I>&gt;<i> &gt; relative path (like &quot;images/blah.svg&quot;) would be the best, but if I can
</I>&gt;<i> &gt; get
</I>&gt;<i> &gt; the file as a kind of object, then I'll figure it out how to use that
</I>&gt;<i> &gt; object.
</I>&gt;<i> &gt; I've played a bit with ResourceManager because I understand that is the
</I>&gt;<i> &gt; class
</I>&gt;<i> &gt; for this, but I couldn't get anywhere.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thank you.
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Jos&#233; Pablo Fern&#225;ndez &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">pupeno at pupeno.com</A>&gt; (<A HREF="http://pupeno.com">http://pupeno.com</A>)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20070304/3d0656af/attachment-0001.html">http://lists.ximian.com/pipermail/mono-list/attachments/20070304/3d0656af/attachment-0001.html</A> 
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034442.html">[Mono-list] What do I do with my images...
</A></li>
	<LI>Next message: <A HREF="034445.html">[Mono-list] What do I do with my images...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34444">[ date ]</a>
              <a href="thread.html#34444">[ thread ]</a>
              <a href="subject.html#34444">[ subject ]</a>
              <a href="author.html#34444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
