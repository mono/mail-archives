<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] File IO error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mike%40mikegray.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="005573.html">
   <LINK REL="Next"  HREF="005581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] File IO error
   </H1>
    <B>Mike Gray
    </B> 
    <A HREF="mailto:mike%40mikegray.org"
       TITLE="[Mono-list] File IO error">mike@mikegray.org
       </A><BR>
    <I>Tue, 07 May 2002 16:30:26 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="005573.html">[Mono-list] Re: People distributing Mono for Windows. (Pavel Cholakov)
</A></li>
        <LI> Next message: <A HREF="005581.html">[Mono-list] File IO error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5574">[ date ]</a>
              <a href="thread.html#5574">[ thread ]</a>
              <a href="subject.html#5574">[ subject ]</a>
              <a href="author.html#5574">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I believe the reason these tests are still not working is that they are 
trying to access/create/delete/etc. files in &quot;filetest&quot; directory.  Since 
this doesn't exist, well, they are failing as expected. :)

Here is a patch to FileTest.cs that uses the &quot;resources&quot; directory you 
created instead of &quot;filetest&quot;.  With this patch, all of the tests written 
(which is not many at this point, but I will work on that over time) do run 
and work.

Index: FileTest.cs
===================================================================
RCS file: /mono/mcs/class/corlib/Test/System.IO/FileTest.cs,v
retrieving revision 1.2
diff -u -r1.2 FileTest.cs
--- FileTest.cs	7 May 2002 10:27:53 -0000	1.2
+++ FileTest.cs	7 May 2002 20:25:22 -0000
@@ -30,6 +30,7 @@

		protected override void TearDown ()
		{
+		        File.Delete (&quot;resources/baz&quot;);
		}

		public static ITest Suite
@@ -39,40 +40,54 @@

		public void TestExists ()
		{
-			Assert (&quot;File filetest/test should exist&quot;, File.Exists 
(&quot;filetest/test&quot;));
-		}
+			Assert (&quot;File resources/AFile.txt should exist&quot;, File.Exists 
(&quot;resources/AFile.txt&quot;));
+                        Assert (&quot;File resources/doesnotexist should not 
exist&quot;, !File.Exists (&quot;resources/doesnotexist&quot;));
+                }

		public void TestCreate ()
		{
-			File.Create (&quot;filetest/foo&quot;);
-			Assert (&quot;File should exist&quot;, File.Exists (&quot;filetest/foo&quot;));
+			FileStream stream = File.Create (&quot;resources/foo&quot;);
+			Assert (&quot;File should exist&quot;, File.Exists (&quot;resources/foo&quot;));
+			stream.Close ();
		}

		public void TestCopy ()
		{
-			File.Copy (&quot;filetest/foo&quot;, &quot;filetest/bar&quot;, false);
-			Assert (&quot;File foo should exist&quot;, File.Exists (&quot;filetest/foo&quot;));
-			Assert (&quot;File bar should exist&quot;, File.Exists (&quot;filetest/bar&quot;));
+			File.Copy (&quot;resources/AFile.txt&quot;, &quot;resources/bar&quot;, false);
+			Assert (&quot;File AFile.txt should still exist&quot;, File.Exists 
(&quot;resources/AFile.txt&quot;));
+			Assert (&quot;File bar should exist after File.Copy&quot;, File.Exists 
(&quot;resources/bar&quot;));
		}

		public void TestDelete ()
		{
-			File.Delete (&quot;filetest/foo&quot;);
-			Assert (&quot;File should not exist&quot;, !File.Exists (&quot;filetest/foo&quot;));
+                        Assert (&quot;File resources/foo should exist for 
TestDelete to succeed&quot;, File.Exists (&quot;resources/foo&quot;));
+                        try {
+                                File.Delete (&quot;resources/foo&quot;);
+                        } catch (Exception e) {
+                                Fail (&quot;Unable to delete resources/foo: e=&quot; 
+ e.ToString());
+                        }
+			Assert (&quot;File resources/foo should not exist after File.Delete&quot;, 
!File.Exists (&quot;resources/foo&quot;));
		}

		public void TestMove ()
		{
-			Assert (&quot;File filetest/bar should exist&quot;, File.Exists (&quot;filetest/bar&quot;));
-			File.Move (&quot;filetest/bar&quot;, &quot;filetest/baz&quot;);
-			Assert (&quot;File filetest/bar should not exist&quot;, !File.Exists 
(&quot;filetest/bar&quot;));
-			Assert (&quot;File filetest/baz should exist&quot;, File.Exists (&quot;filetest/baz&quot;));
+			Assert (&quot;File resources/bar should exist&quot;, File.Exists 
(&quot;resources/bar&quot;));
+			File.Move (&quot;resources/bar&quot;, &quot;resources/baz&quot;);
+			Assert (&quot;File resources/bar should not exist&quot;, !File.Exists 
(&quot;resources/bar&quot;));
+			Assert (&quot;File resources/baz should exist&quot;, File.Exists 
(&quot;resources/baz&quot;));
		}

		public void TestOpen ()
		{
+                        try {
+                                FileStream stream = File.Open 
(&quot;resources/AFile.txt&quot;, FileMode.Open);
+                        } catch (Exception e) {
+                                Fail (&quot;Unable to open resources/AFile.txt: 
e=&quot; + e.ToString());
+                        }
+
+                        /* Exception tests */
			try {
-				FileStream stream = File.Open(&quot;filedoesnotexist&quot;, FileMode.Open);
+				FileStream stream = File.Open (&quot;filedoesnotexist&quot;, FileMode.Open);
				Fail (&quot;File 'filedoesnotexist' should not exist&quot;);
			} catch (FileNotFoundException) {
				// do nothing, this is what we expect


Let me know if this is what you had in mind for the resources directory or 
if you had something else going forward...

Mike Gray


&gt;<i>From: &quot;Nick Drochak&quot; &lt;<A HREF="mailto:ndrochak@gol.com">ndrochak@gol.com</A>&gt;
</I>&gt;<i>To: &lt;<A HREF="mailto:mike@mikegray.org">mike@mikegray.org</A>&gt;, &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
</I>&gt;<i>Subject: RE: [Mono-list] File IO error
</I>&gt;<i>Date: Wed, 8 May 2002 01:14:47 +0900
</I>&gt;<i>
</I>&gt;|<i> | Anyway, just saw a response from Dan Lewis so I will leave it
</I>&gt;|<i> | to him since
</I>&gt;|<i> | he likely knows way more than I do.  Here is the patch to the
</I>&gt;|<i> | unit test:
</I>&gt;|<i> |
</I>&gt;|<i>
</I>&gt;|<i> Mike,
</I>&gt;|<i>
</I>&gt;|<i> Thanks for the patches.  I've added them to CVS (slightly modified).
</I>&gt;|<i> These IO tests are using files that are expected to be there, mostly
</I>&gt;|<i> source files in CVS, but this isn't very reliable when tested
</I>&gt;|<i> on Linux.
</I>&gt;|<i>
</I>&gt;<i>
</I>&gt;<i>Also wanted to mention that these tests are reporting errors when run
</I>&gt;<i>against MS.NET, so if you have the SDK it would be helpful if you could
</I>&gt;<i>track down those errors too.
</I>&gt;<i>
</I>&gt;<i>Thanks,
</I>&gt;<i>Nick D.
</I>&gt;<i>
</I>&gt;<i>
</I>



_________________________________________________________________
Send and receive Hotmail on your mobile device: <A HREF="http://mobile.msn.com">http://mobile.msn.com</A>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005573.html">[Mono-list] Re: People distributing Mono for Windows. (Pavel Cholakov)
</A></li>
	<LI> Next message: <A HREF="005581.html">[Mono-list] File IO error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5574">[ date ]</a>
              <a href="thread.html#5574">[ thread ]</a>
              <a href="subject.html#5574">[ subject ]</a>
              <a href="author.html#5574">[ author ]</a>
         </LI>
       </UL>
</body></html>
