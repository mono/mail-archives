<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> FW: [Mono-list] Buffering for StreamWriter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:dmarsh%40mimeo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="005755.html">
   <LINK REL="Next"  HREF="005782.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>FW: [Mono-list] Buffering for StreamWriter
   </H1>
    <B>Marsh, Drew
    </B> 
    <A HREF="mailto:dmarsh%40mimeo.com"
       TITLE="FW: [Mono-list] Buffering for StreamWriter">dmarsh@mimeo.com
       </A><BR>
    <I>Thu, 16 May 2002 16:16:06 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="005755.html">[Mono-list] Buffering for StreamWriter
</A></li>
        <LI> Next message: <A HREF="005782.html">FW: [Mono-list] Buffering for StreamWriter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5757">[ date ]</a>
              <a href="thread.html#5757">[ thread ]</a>
              <a href="subject.html#5757">[ subject ]</a>
              <a href="author.html#5757">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dan Lewis [mailto:<A HREF="mailto:dihlewis@yahoo.co.uk">dihlewis@yahoo.co.uk</A>] wrote:

&gt;<i> In an interview, Anders Hejlsberg said that the using
</I>&gt;<i> construct wasn't in his initial design for C#. He said he 
</I>&gt;<i> added it after the Microsoft developers writing the class 
</I>&gt;<i> libraries asked for a more structured way to control an 
</I>&gt;<i> object's lifetime (maybe they were C++ developers that missed 
</I>&gt;<i> their trusty RAII
</I>&gt;<i> idiom)
</I>
Yup... the &quot;using&quot; resource management construct didn't actually make it
into the language until after Beta1 I believe. There was all sorts of
debating over the keyword because &quot;using&quot; already meant something in the
language (i.e. declaring what namespaces you're using), but the word made
such sense in terms of resource management too, so it stuck.

&gt;<i> As you say, you could do without it by using a
</I>&gt;<i> try-catch-finally construct. The using construct gives the C# 
</I>&gt;<i> compiler and developer clearer semantics for a common 
</I>&gt;<i> programming idiom 
</I>
Exactly.

&gt;<i> - much like foreach does for the for loop.
</I>
Actually, foreach does something different than a for loop would. It calls
IEnumerable::GetEnumerator() and uses the semantics of the IEnumerator
interface to iterate the items in the container. Whereas for would index
into the container each time. Depending on the container, one might be
faster than the other. For example, there's actually an optimization in the
MS JIT right now for arrays, where if you for over an array like so:

&lt;codeSnippet language=&quot;C#&quot;&gt;
int[] myArray = new int[] { 1, 2, 3 };

for(int index = 0; index &lt; myArray.Length; index++)
{
	Console.WriteLine(myArray[index]);
}
&lt;/codeSnippet&gt;

The JIT will do away with bounds checking which will obviously result in a
signifigant performance increase. Gunnerson claims 5x faster than foreach in
his example[1]. It's all about the explicit use of .Length in the
conditional of the for statement.

In the future it's been said that the C# compiler itself will detect a
foreach on an array and instead emit a for loop in IL so that users don't
need to know about this little JIT optimization trick.

Later,
Drew
.NET MVP

[1] Under the subheading &quot;Use For Loops for String Iteration-version 1&quot;:
<A HREF="http://www.msdnaa.net/interchange/preview.asp?PeerID=862#perform">http://www.msdnaa.net/interchange/preview.asp?PeerID=862#perform</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005755.html">[Mono-list] Buffering for StreamWriter
</A></li>
	<LI> Next message: <A HREF="005782.html">FW: [Mono-list] Buffering for StreamWriter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5757">[ date ]</a>
              <a href="thread.html#5757">[ thread ]</a>
              <a href="subject.html#5757">[ subject ]</a>
              <a href="author.html#5757">[ author ]</a>
         </LI>
       </UL>
</body></html>
