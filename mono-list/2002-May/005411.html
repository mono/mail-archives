<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mcs using System.Remoting.dll on XP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:miguel%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="005409.html">
   <LINK REL="Next"  HREF="005415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mcs using System.Remoting.dll on XP
   </H1>
    <B>Miguel de Icaza
    </B> 
    <A HREF="mailto:miguel%40ximian.com"
       TITLE="[Mono-list] mcs using System.Remoting.dll on XP">miguel@ximian.com
       </A><BR>
    <I>01 May 2002 09:06:47 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="005409.html">[Mono-list] mono-build-w32.sh has warnings
</A></li>
        <LI> Next message: <A HREF="005415.html">[Mono-list] mcs using System.Remoting.dll on XP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5411">[ date ]</a>
              <a href="thread.html#5411">[ thread ]</a>
              <a href="subject.html#5411">[ subject ]</a>
              <a href="author.html#5411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> but I am not able to compile using mcs.  Any ideas?  I don't see the dll in the
</I>&gt;<i> mono directory, so I am assuming it isn't finished yet.  I tried to link with
</I>&gt;<i> the MS dll, but I receive the following error:  
</I>&gt;<i> 
</I>&gt;<i> C:\My Documents\Project\Programming\mono\test\Chat\ChatServer&gt;mcs --target exe
</I>&gt;<i> -r System.Runtime.Remoting.dll FileName.cs
</I>&gt;<i> 
</I>&gt;<i> (process:3572): ** WARNING **: Could not find assembly System.Drawing
</I>&gt;<i> c:/mono-0.10/install/lib\System.Drawing.dll
</I>&gt;<i> 
</I>&gt;<i> (process:3572): ** WARNING **: Could not find assembly System.Web
</I>&gt;<i> c:/mono-0.10/install/lib\System.Web.dll
</I>
My guess is that `mcs' there is not the native .NET executable, but the
mcs that is using the Mono runtime.  When running with the .NET runtime
you will get the assemblies from the .NET distribution, if you run with
our runtime you will get our assemblies.

What this indicates is that mcs above is some kind of wrapper (maybe a
.bat file?) that will not allow you to use the real mcs.  

If you use the real mcs, you should not have these problems. 

That being said: yes, we need our Mono runtime at some point to
implement the GAC and be able to use assemblies installed in the GAC,
currently we have kind of our &quot;own private GAC&quot; by having assemblies
copied manually into the $prefix/lib directory. 

Far from ideal, I know, and this is something we will look into
implementing later. 

&gt;<i> I compiled the exe using the mcs produced dlls and the csc compiler, everything
</I>&gt;<i> compiled fine, but it broke with the following error when I ran the app:
</I>&gt;<i> 
</I>&gt;<i> Unhandled Exception: System.BadImageFormatException: The format of the file
</I>&gt;<i> 'ChatServerLib' is invalid.
</I>&gt;<i> File name: &quot;ChatServerLib&quot;
</I>&gt;<i>    at ChatServer.ChatServer.Main(String[] args)
</I>
This is a known problem.  We know that we are currently generating
executables that can not be consumed by .NET or Rotor.  We need people
to help us track down this problem.  I think many problems have been
solved, but there are a few missing.  We need to pinpoint what is it
that we are generating incorrectly.

&gt;<i> Any suggestions?  Thanks in advance and my apologies if I should be posing this
</I>&gt;<i> question elsewhere.  
</I>
You posted in the right place.  Thanks for your feedback as well.

Miguel


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005409.html">[Mono-list] mono-build-w32.sh has warnings
</A></li>
	<LI> Next message: <A HREF="005415.html">[Mono-list] mcs using System.Remoting.dll on XP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5411">[ date ]</a>
              <a href="thread.html#5411">[ thread ]</a>
              <a href="subject.html#5411">[ subject ]</a>
              <a href="author.html#5411">[ author ]</a>
         </LI>
       </UL>
</body></html>
