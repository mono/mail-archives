<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Service do not start
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Service%20do%20not%20start&In-Reply-To=32196942.61249383450269.JavaMail.root%40sip.voip.pt">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043173.html">
   <LINK REL="Next"  HREF="043108.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Service do not start</H1>
    <B>Sergio C. Charrua</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Service%20do%20not%20start&In-Reply-To=32196942.61249383450269.JavaMail.root%40sip.voip.pt"
       TITLE="[Mono-list] Service do not start">sergio.charrua at voip.pt
       </A><BR>
    <I>Tue Aug  4 07:04:06 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="043173.html">[Mono-list] Re lated to VBNC compiler
</A></li>
        <LI>Next message: <A HREF="043108.html">[Mono-list] Service do not start
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43107">[ date ]</a>
              <a href="thread.html#43107">[ thread ]</a>
              <a href="subject.html#43107">[ subject ]</a>
              <a href="author.html#43107">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all!

i've been developing som Windows Services, using VS2005/2008 with no problems at all. Everything compiles correctly, Moma says everything is 100% correct, and everything run in windows (XP, Server, etc...).
I've a CentOS 5.3 server running Mono since last September, and before upgrading from Mono 1.9 to latest 2.4.2.2, the same Windows Service was running correctly. 
All that this service does is listen to a TCP IP Port, receive some data, and answers back. As i said, it used to work perfectly, until i upgraded to Version 2.4.2.2 . 
the strangest thing yet is that no error messages, no log events, nothing is catching the execption. I've even made a Logger class that logs everything to a text file, and it doesn't even catch any messages. No .lock file is created, nothing at all
So my guess is that the Service is not starting/working at all.

the start.sh file is as follows:
#!/bin/bash
export LD_LIBRARY_PATH=/usr/local/lib/;
mono-service2 -l:/etc/GameServer/gameserver.lock -m:GameServer ServerService.exe

if i do the following command:
mono --debug --trace ServerService.exe

i get :

[0x1118f0: 0.00000 0] ENTER: (wrapper runtime-invoke) object:runtime_invoke_void__this___object (object,intptr,intpt
r,intptr)([System.OutOfMemoryException:0x52fc0], 0xbffeb7d0, (nil), 0x594120, )
[0x1118f0: 0.00008 1] ENTER: System.OutOfMemoryException:.ctor (string)(this:0x52fc0[System.OutOfMemoryException Ser
verService.exe], [STRING:0x51fc8:Out of memory], )
[0x1118f0: 0.00014 2] ENTER: System.SystemException:.ctor (string)(this:0x52fc0[System.OutOfMemoryException ServerSe
rvice.exe], [STRING:0x51fc8:Out of memory], )
[0x1118f0: 0.00019 3] ENTER: System.Exception:.ctor (string)(this:0x52fc0[System.OutOfMemoryException ServerService.
exe], [STRING:0x51fc8:Out of memory], )
[0x1118f0: 0.00020 3] LEAVE: System.Exception:.ctor (string)
[0x1118f0: 0.00021 2] LEAVE: System.SystemException:.ctor (string)
[0x1118f0: 0.00022 1] LEAVE: System.OutOfMemoryException:.ctor (string)
[0x1118f0: 0.00023 0] LEAVE: (wrapper runtime-invoke) object:runtime_invoke_void__this___object (object,intptr,intpt
r,intptr)[OBJECT:(nil)]
[0x1118f0: 0.00033 0] ENTER: (wrapper runtime-invoke) object:runtime_invoke_void__this___object (object,intptr,intpt
r,intptr)([System.NullReferenceException:0x52f88], 0xbffeb7d0, (nil), 0x5941f8, )
[0x1118f0: 0.00034 1] ENTER: System.NullReferenceException:.ctor (string)(this:0x52f88[System.NullReferenceException
 ServerService.exe], [STRING:0x54ed8:A null value was found where an object instance was required], )
[0x1118f0: 0.00036 2] ENTER: System.SystemException:.ctor (string)(this:0x52f88[System.NullReferenceException Server
Service.exe], [STRING:0x54ed8:A null value was found where an object instance was required], )
[0x1118f0: 0.00037 3] ENTER: System.Exception:.ctor (string)(this:0x52f88[System.NullReferenceException ServerServic
e.exe], [STRING:0x54ed8:A null value was found where an object instance was required], )
[0x1118f0: 0.00038 3] LEAVE: System.Exception:.ctor (string)
[0x1118f0: 0.00039 2] LEAVE: System.SystemException:.ctor (string)
[0x1118f0: 0.00039 1] LEAVE: System.NullReferenceException:.ctor (string)
[0x1118f0: 0.00040 0] LEAVE: (wrapper runtime-invoke) object:runtime_invoke_void__this___object (object,intptr,intpt
r,intptr)[OBJECT:(nil)]
[0x1118f0: 0.00052 0] ENTER: (wrapper runtime-invoke) object:runtime_invoke_void__this___object (object,intptr,intpt
r,intptr)([System.StackOverflowException:0x52f50], 0xbffeb7d0, (nil), 0x594240, )
[0x1118f0: 0.00053 1] ENTER: System.StackOverflowException:.ctor (string)(this:0x52f50[System.StackOverflowException
 ServerService.exe], [STRING:0x55f50:The requested operation caused a stack overflow.], )
[0x1118f0: 0.00054 2] ENTER: System.SystemException:.ctor (string)(this:0x52f50[System.StackOverflowException Server
Service.exe], [STRING:0x55f50:The requested operation caused a stack overflow.], )

BUT the server has 4Gb RAM, and actually has 700Mb free physical memory...so Memory cannot be a problem...

I repeat, the service used to work 100% in Mono 1.9 ... 

Any ideias?

TIA

Sergio Coelho Charrua 
Project Manager &amp; Software Engineer 
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">sergio.charrua at voip.pt</A> 
www.voip.pt 


</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043173.html">[Mono-list] Re lated to VBNC compiler
</A></li>
	<LI>Next message: <A HREF="043108.html">[Mono-list] Service do not start
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43107">[ date ]</a>
              <a href="thread.html#43107">[ thread ]</a>
              <a href="subject.html#43107">[ subject ]</a>
              <a href="author.html#43107">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
