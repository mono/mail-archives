<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] [Mono-dev] Mono 2.4.2.2: too many roots set &amp; other	errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%5BMono-dev%5D%20Mono%202.4.2.2%3A%20too%20many%20roots%20set%20%26%20other%0A%09errors&In-Reply-To=295e750a0908011228k4977f7aeifda3deb18c68552%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043094.html">
   <LINK REL="Next"  HREF="043097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] [Mono-dev] Mono 2.4.2.2: too many roots set &amp; other	errors</H1>
    <B>Maxim</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20%5BMono-dev%5D%20Mono%202.4.2.2%3A%20too%20many%20roots%20set%20%26%20other%0A%09errors&In-Reply-To=295e750a0908011228k4977f7aeifda3deb18c68552%40mail.gmail.com"
       TITLE="[Mono-list] [Mono-dev] Mono 2.4.2.2: too many roots set &amp; other	errors">makska at yandex.ru
       </A><BR>
    <I>Mon Aug  3 06:46:08 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="043094.html">[Mono-list] [Mono-dev] Mono 2.4.2.2: too many roots set &amp; other	errors
</A></li>
        <LI>Next message: <A HREF="043097.html">[Mono-list] [Mono-dev] Mono 2.4.2.2: too many roots set &amp; other	errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43096">[ date ]</a>
              <a href="thread.html#43096">[ thread ]</a>
              <a href="subject.html#43096">[ subject ]</a>
              <a href="author.html#43096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Zoltan!

Thanks for answer!

I look at SVN logs and can't find r139249 in branch
/source/branches/mono-2-4-2/ between r139258 and r138662.
So, could you tell me please, is this bug fixed in Mono 2.4.2.2 or in
Mono 2.4.2.3? If only in latest, I'll just upgrade mono. Otherwise it
may be a new bug.

With best wishes,
Maxim Karavaev

Zoltan Varga wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i>   This is a known problem, but it should happen only under windows. It
</I>&gt;<i> should be fixed in
</I>&gt;<i>  SVN HEAD and the mono 2.4 branch (r139249). Unfortunately, there is
</I>&gt;<i> no workaround.
</I>&gt;<i>
</I>&gt;<i>                          Zoltan
</I>&gt;<i>
</I>&gt;<i> On Sat, Aug 1, 2009 at 7:38 PM, Maxim &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">makska at yandex.ru</A>
</I>&gt;<i> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">makska at yandex.ru</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     Hello!
</I>&gt;<i>
</I>&gt;<i>     I've upgraded mono on production server for about week ago and got
</I>&gt;<i>     trouble:
</I>&gt;<i>     several times (up to two per day) I've found error in apache
</I>&gt;<i>     error_log file:
</I>&gt;<i>     Too many root sets
</I>&gt;<i>
</I>&gt;<i>     Stacktrace:
</I>&gt;<i>
</I>&gt;<i>      at (wrapper managed-to-native)
</I>&gt;<i>     object.__icall_wrapper_mono_delegate_begin_invoke (object,intptr)
</I>&gt;<i>     &lt;0x00048&gt;
</I>&gt;<i>      at (wrapper managed-to-native)
</I>&gt;<i>     object.__icall_wrapper_mono_delegate_begin_invoke (object,intptr)
</I>&gt;<i>     &lt;0xffffffff&gt;
</I>&gt;<i>      at (wrapper delegate-begin-invoke)
</I>&gt;<i>     System.Threading.WaitCallback.begin_invoke_IAsyncResult__this___object_AsyncCallback_object
</I>&gt;<i>     (object,System.AsyncCallback,object) &lt;0xffffffff&gt;
</I>&gt;<i>      at System.Threading.ThreadPool.QueueUserWorkItem
</I>&gt;<i>     (System.Threading.WaitCallback,object) &lt;0x0001f&gt;
</I>&gt;<i>      at System.Threading.Timer.SchedulerThread () &lt;0x003c7&gt;
</I>&gt;<i>      at (wrapper runtime-invoke) object.runtime_invoke_void__this__
</I>&gt;<i>     (object,intptr,intptr,intptr) &lt;0xffffffff&gt;
</I>&gt;<i>
</I>&gt;<i>     Native stacktrace:
</I>&gt;<i>
</I>&gt;<i>        /opt/mono/bin/mono [0x47e7a0]
</I>&gt;<i>        /lib64/libpthread.so.0 [0x3e3e60e4c0]
</I>&gt;<i>        /lib64/libc.so.6(gsignal+0x35) [0x3e3da30215]
</I>&gt;<i>        /lib64/libc.so.6(abort+0x110) [0x3e3da31cc0]
</I>&gt;<i>        /opt/mono/bin/mono [0x574553]
</I>&gt;<i>        /opt/mono/bin/mono [0x572fc5]
</I>&gt;<i>        /opt/mono/bin/mono [0x572f29]
</I>&gt;<i>        /opt/mono/bin/mono [0x50a18e]
</I>&gt;<i>        /opt/mono/bin/mono [0x4fee6c]
</I>&gt;<i>        /opt/mono/bin/mono [0x502ef5]
</I>&gt;<i>        /opt/mono/bin/mono [0x4c1083]
</I>&gt;<i>        [0x40d34038]
</I>&gt;<i>
</I>&gt;<i>     Debug info from gdb:
</I>&gt;<i>
</I>&gt;<i>     =================================================================
</I>&gt;<i>     Got a SIGABRT while executing native code. This usually indicates
</I>&gt;<i>     a fatal error in the mono runtime or one of the native libraries
</I>&gt;<i>     used by your application.
</I>&gt;<i>     =================================================================
</I>&gt;<i>
</I>&gt;<i>     and a lots of errors after it, for example:
</I>&gt;<i>     [Sat Aug 01 20:12:04 2009] [error] (104)Connection reset by peer:
</I>&gt;<i>     read_data failed
</I>&gt;<i>     [Sat Aug 01 20:12:04 2009] [error] (70014)End of file found: read_data
</I>&gt;<i>     failed
</I>&gt;<i>     [Sat Aug 01 20:12:04 2009] [error] Command stream corrupted, last
</I>&gt;<i>     command was -1
</I>&gt;<i>     [Sat Aug 01 20:12:04 2009] [notice] child pid 17038 exit signal
</I>&gt;<i>     Segmentation fault (11)
</I>&gt;<i>
</I>&gt;<i>     After it all mono applications returns no data (nagios: HTTP
</I>&gt;<i>     CRITICAL -
</I>&gt;<i>     No data received from host).
</I>&gt;<i>     Only restart of apache make application healthy again.
</I>&gt;<i>
</I>&gt;<i>     Also there are a lot of errors in error_log (almost every second), but
</I>&gt;<i>     it seems like no relation to this crash:
</I>&gt;<i>     [Sat Aug 01 14:12:05 2009] [crit] (13)Permission denied: Failed to
</I>&gt;<i>     attach to existing dashboard, and removing dashboard file
</I>&gt;<i>     '/tmp/mod_mono_dashboard_XXGLOBAL_1' failed (Operation not permitted).
</I>&gt;<i>     Further action impossible.
</I>&gt;<i>
</I>&gt;<i>     How I set up mod_mono and apache (with mono 2.0.1 it works just
</I>&gt;<i>     fine. It
</I>&gt;<i>     seems like 2.0.1 is most stable release for me) :
</I>&gt;<i>     mod_mono.conf:
</I>&gt;<i>        LoadModule mono_module /usr/lib64/httpd/modules/mod_mono.so
</I>&gt;<i>        MonoAutoApplication enabled
</I>&gt;<i>
</I>&gt;<i>        MonoMaxActiveRequests 70
</I>&gt;<i>        MonoMaxWaitingRequests 500
</I>&gt;<i>        MonoServerPath &quot;/opt/mono/bin/mod-mono-server2&quot;
</I>&gt;<i>
</I>&gt;<i>        AddType application/x-asp-net .aspx
</I>&gt;<i>     ....
</I>&gt;<i>        DirectoryIndex index.aspx
</I>&gt;<i>     -------------------
</I>&gt;<i>
</I>&gt;<i>     For heavy loaded sites (about 20 on this server) I have separated
</I>&gt;<i>     mod_mono server instances and vhosts like this:
</I>&gt;<i>     &lt;VirtualHost *:80&gt;
</I>&gt;<i>        ServerName mysite.com &lt;<A HREF="http://mysite.com">http://mysite.com</A>&gt;
</I>&gt;<i>        AddMonoApplications mysite.com &lt;<A HREF="http://mysite.com">http://mysite.com</A>&gt;
</I>&gt;<i>     &quot;mysite.com:/:/home/myuser/www/mysite.com &lt;<A HREF="http://mysite.com">http://mysite.com</A>&gt;&quot;
</I>&gt;<i>        MonoServerPath mysite.com &lt;<A HREF="http://mysite.com">http://mysite.com</A>&gt;
</I>&gt;<i>     &quot;/opt/mono/bin/mod-mono-server2&quot;
</I>&gt;<i>        &lt;Location /&gt;
</I>&gt;<i>            AddHandler mono .aspx .ascx .config .axd .asax .ashx .asmx .dll
</I>&gt;<i>            MonoSetServerAlias mysite.com &lt;<A HREF="http://mysite.com">http://mysite.com</A>&gt;
</I>&gt;<i>        &lt;/Location&gt;
</I>&gt;<i>        MonoAutoApplication disabled
</I>&gt;<i>        MonoSetEnv MONO_THREADS_PER_CPU=2000
</I>&gt;<i>        MonoMaxActiveRequests 75
</I>&gt;<i>        MonoMaxWaitingRequests 200
</I>&gt;<i>     ....
</I>&gt;<i>     &lt;/VirtualHost&gt;
</I>&gt;<i>
</I>&gt;<i>     For all other websites (for about 80) I have one instance of mod_mono
</I>&gt;<i>     server and hosts like this, with no special mono directives (I suppose
</I>&gt;<i>     mono auto applications work here):
</I>&gt;<i>     &lt;VirtualHost *:80&gt;
</I>&gt;<i>        ServerName mysite.com &lt;<A HREF="http://mysite.com">http://mysite.com</A>&gt;
</I>&gt;<i>     ....
</I>&gt;<i>     &lt;/VirtualHost&gt;
</I>&gt;<i>
</I>&gt;<i>     So could anyone give me please advice how to fix this problem?
</I>&gt;<i>     Or how to set up mod_mono in more stable way?
</I>&gt;<i>
</I>&gt;<i>     All the best,
</I>&gt;<i>     Maxim Karavaev
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     Mono-devel-list mailing list
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043094.html">[Mono-list] [Mono-dev] Mono 2.4.2.2: too many roots set &amp; other	errors
</A></li>
	<LI>Next message: <A HREF="043097.html">[Mono-list] [Mono-dev] Mono 2.4.2.2: too many roots set &amp; other	errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43096">[ date ]</a>
              <a href="thread.html#43096">[ thread ]</a>
              <a href="subject.html#43096">[ subject ]</a>
              <a href="author.html#43096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
