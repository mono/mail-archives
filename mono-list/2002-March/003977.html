<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] GetTypeCode for Enum
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ndrochak%40gol.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004020.html">
   <LINK REL="Next"  HREF="003979.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] GetTypeCode for Enum
   </H1>
    <B>Nick Drochak
    </B> 
    <A HREF="mailto:ndrochak%40gol.com"
       TITLE="[Mono-list] GetTypeCode for Enum">ndrochak@gol.com
       </A><BR>
    <I>Mon, 11 Mar 2002 08:06:27 +0900</I>
    <P><UL>
        <LI> Previous message: <A HREF="004020.html">[Mono-list] LCC and CIL
</A></li>
        <LI> Next message: <A HREF="003979.html">[Mono-list] GetTypeCode for Enum
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3977">[ date ]</a>
              <a href="thread.html#3977">[ thread ]</a>
              <a href="subject.html#3977">[ subject ]</a>
              <a href="author.html#3977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In a continuing effort to get the Nunit tests compiled with corlib, I
found that Enum.cs does not yet implement GetTypeCode().  My patch for
it is below.  It's probably overly naïve, so I'd appreciate feedback.

This method is one of the IConvertible methods needed for Enum, however,
most of the that interface's methods are not public in Enum. So, the way
it's defined the type system probably won't find this method on the
interface like it should. 

I'm not sure how to add the interface to the class without having to
define all the To*() methods as public at the same time.

Maybe all this complication was the reason that method wasn't there in
the first place :)


Thanks,
Nick D.

Index: Enum.cs
===================================================================
RCS file: /cvs/public/mcs/class/corlib/System/Enum.cs,v
retrieving revision 1.14
diff -u -r1.14 Enum.cs
--- Enum.cs	2002/03/01 14:41:46	1.14
+++ Enum.cs	2002/03/10 19:08:50
@@ -27,8 +27,15 @@
 		}
 	};
 
-	[MonoTODO]
+	[MonoTODO(&quot;Needs IFormattable, IConvertible and
[Serializable]&quot;)]
 	public abstract class Enum : ValueType, IComparable {
+
+		[CLSCompliant(false)]
+		public TypeCode GetTypeCode () {
+			MonoEnumInfo info;
+			MonoEnumInfo.GetInfo (this.GetType (), out
info);
+			return Type.GetTypeCode (info.utype);
+		}
 
 		[MethodImplAttribute(MethodImplOptions.InternalCall)]
 		private extern object get_value ();




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004020.html">[Mono-list] LCC and CIL
</A></li>
	<LI> Next message: <A HREF="003979.html">[Mono-list] GetTypeCode for Enum
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3977">[ date ]</a>
              <a href="thread.html#3977">[ thread ]</a>
              <a href="subject.html#3977">[ subject ]</a>
              <a href="author.html#3977">[ author ]</a>
         </LI>
       </UL>
</body></html>
