<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Binfmt (was: [Mono-list] RESULT: 0 from mono, not from mint.)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:funwithpnet%40yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004475.html">
   <LINK REL="Next"  HREF="004430.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Binfmt (was: [Mono-list] RESULT: 0 from mono, not from mint.)
   </H1>
    <B>t3rmin4t0r
    </B> 
    <A HREF="mailto:funwithpnet%40yahoo.com"
       TITLE="Binfmt (was: [Mono-list] RESULT: 0 from mono, not from mint.)">funwithpnet@yahoo.com
       </A><BR>
    <I>Fri, 29 Mar 2002 15:34:49 +0530</I>
    <P><UL>
        <LI> Previous message: <A HREF="004475.html">[Mono-list] RESULT: 0 from mono, not from mint.
</A></li>
        <LI> Next message: <A HREF="004430.html">[Mono-list] Viewing Shared Source CLI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4464">[ date ]</a>
              <a href="thread.html#4464">[ thread ]</a>
              <a href="subject.html#4464">[ subject ]</a>
              <a href="author.html#4464">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Mar 28, 2002 at 04:30:21PM +0100, Peter M. Lemmen wrote:
&gt;<i> The second script, exewrapper.sh, uses the c program, ismonobin, to find out
</I>&gt;<i> wether the given binary is a mono binary and should be executed with the mono
</I>&gt;<i> JIT. This should be easily extendable for DosEmu and Wine. (But I am totally
</I>&gt;<i> unfamiliar with those projects.)
</I>
    AAH !, and I spent all these days wondering how to get Linux to check
the above 128 byte for 'P' &amp; 'E' header . The wrapper idea never even 
entered my mind !. (the PE magic is more than 128 bytes -- and I got 
stuck there).

    I was cursing those &quot;this cannot be run.....&quot; message for all my
trouble with binfmt ! (coz it is the filler that pushes PE header out
of binfmt_misc's magic range).

&gt;<i> The c program, ismonobin, checks the full first 64 bytes of the binary against
</I>&gt;<i> the fingerprint I gathered yesterday.
</I>
    This does not really check for a Mono binary (this is the standard EXE
headers). The base address of the PE header is stored in an int32 from 
64'th byte. After reading this, you must check for the bytes 'P','E','\0',
'\0' at the base address from the start of file. Then it's a PE image 
(DLL or EXE). Then read isDLL (base address+18) for the isDLL information
(ie 0x2000 for dll). 

    After it gets through this, it's a PE executable by header. I'll fix
this up soon enough.

&gt;<i> (I'm a VB programmer by trade, so this all included a lot of guesswork on my
</I>&gt;<i> part...)
</I>    
    Guesswork is what hackers do the best !.
 
 t3rmin4t0r.
-- 
******************DISCLAIMER******************
*      not yet another Mono contributor      *
**********************************************


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004475.html">[Mono-list] RESULT: 0 from mono, not from mint.
</A></li>
	<LI> Next message: <A HREF="004430.html">[Mono-list] Viewing Shared Source CLI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4464">[ date ]</a>
              <a href="thread.html#4464">[ thread ]</a>
              <a href="subject.html#4464">[ subject ]</a>
              <a href="author.html#4464">[ author ]</a>
         </LI>
       </UL>
</body></html>
