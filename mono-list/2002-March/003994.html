<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] JIT patch for stabs debugging
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lupus%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003991.html">
   <LINK REL="Next"  HREF="003972.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] JIT patch for stabs debugging
   </H1>
    <B>Paolo Molaro
    </B> 
    <A HREF="mailto:lupus%40ximian.com"
       TITLE="[Mono-list] JIT patch for stabs debugging">lupus@ximian.com
       </A><BR>
    <I>Mon, 11 Mar 2002 10:28:01 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="003991.html">[Mono-list] JIT patch for stabs debugging
</A></li>
        <LI> Next message: <A HREF="003972.html">[Mono-list] JIT patch for stabs debugging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3994">[ date ]</a>
              <a href="thread.html#3994">[ thread ]</a>
              <a href="subject.html#3994">[ subject ]</a>
              <a href="author.html#3994">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/10/02 Martin Baulig wrote:
&gt;<i> &gt; No, this is wrong: if you restart mono, all the infos in the stab file
</I>&gt;<i> &gt; are wrong. It may have happened that in two runs the same method was
</I>&gt;<i> &gt; assigned the same address by malloc, but you can't rely on it:-)
</I>&gt;<i> &gt; I don't know if a recent gdb allows to unload a debug object, if it
</I>&gt;<i> &gt; still doesn't, you need to quit and restart gdb as well (and recompile
</I>&gt;<i> &gt; the stabs each time you start mono).
</I>&gt;<i> 
</I>&gt;<i> Sure, that's right. The problem is that SIGABRT usually is normally a
</I>&gt;<i> deadly signal for a process - so you can't run &quot;mono --stabs --debug&quot;
</I>&gt;<i> in a shell. On the other hand, running it in gdb to create the stabs
</I>&gt;<i> files is very inconvenient since you must hit enter each time it
</I>&gt;<i> reaches a breakpoint.
</I>
Can't you just use mono --stabs (without --debug) if you simply want to
have a look at the stab information? Note, though, that as soon as the
process that generated the stabs is finished, the data becomes useless
for debugging the app (but it can be useful to debug the stabs support
itself for types etc.).

&gt;<i> In most situations, running mono several times with the same stabs
</I>&gt;<i> file should work fine as long as the program flow stays the same - for
</I>&gt;<i> instance, you have a test case which takes no user input and always
</I>&gt;<i> produces the same output. There, being able to restart the program
</I>&gt;<i> with different --debug arguments can be very useful.
</I>
This is the wrong way to do it: it's like saving the address returned by
malloc() in a file, quitting the program, restarting, calling malloc()
again throwing away the result and using the value saved before in the
file. This doesn't work, you should not rely on such ugly kludges.

Please don't commit to cvs controversial changes until you can convince
the list that reusing the result of malloc() in a different process is
safe (you'll have a hard time at that...).

I just read the gdb manual: you can use the symbol-file command without
arguments to discard previous symbol information, so there is no reason
to add unsafe kludges to the JIT code.

lupus

-- 
-----------------------------------------------------------------
<A HREF="mailto:lupus@debian.org">lupus@debian.org</A>                                     debian/rules
<A HREF="mailto:lupus@ximian.com">lupus@ximian.com</A>                             Monkeys do it better


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003991.html">[Mono-list] JIT patch for stabs debugging
</A></li>
	<LI> Next message: <A HREF="003972.html">[Mono-list] JIT patch for stabs debugging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3994">[ date ]</a>
              <a href="thread.html#3994">[ thread ]</a>
              <a href="subject.html#3994">[ subject ]</a>
              <a href="author.html#3994">[ author ]</a>
         </LI>
       </UL>
</body></html>
