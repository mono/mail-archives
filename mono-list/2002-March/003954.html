<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Changing GetHashCode return value
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:serge%40wildwestsoftware.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003953.html">
   <LINK REL="Next"  HREF="003959.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Changing GetHashCode return value
   </H1>
    <B>Serge
    </B> 
    <A HREF="mailto:serge%40wildwestsoftware.com"
       TITLE="[Mono-list] Changing GetHashCode return value">serge@wildwestsoftware.com
       </A><BR>
    <I>Sat, 9 Mar 2002 16:19:15 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="003953.html">[Mono-list] Buggy Me Rules!
</A></li>
        <LI> Next message: <A HREF="003959.html">[Mono-list] Array Class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3954">[ date ]</a>
              <a href="thread.html#3954">[ thread ]</a>
              <a href="subject.html#3954">[ subject ]</a>
              <a href="author.html#3954">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The code below demonstrates how to &quot;manually&quot; change the value returned by
the default implementation of Object.GetHashCode() under .NET runtime.
This trick is absolutely useless in practice, but still looks funny, so here
it is.
Also, may be useful to understand what's going on behind the scenes.

----------
// csc /unsafe change_hash.cs

using System;
using System.Runtime.InteropServices;

class HashChange {
   unsafe public static void Main (string [] args) {
     object o = new object();

     GCHandle gch = GCHandle.Alloc(o);
     int* p_handle = (int*) (IntPtr) gch;
     int* p_obj = *(int**)p_handle;
     int* p_hash = p_obj - 1;
     *p_hash = 0x123;
     gch.Free();

     Console.WriteLine(&quot;0x{0}&quot;, o.GetHashCode().ToString(&quot;X&quot;));
   }
}
----------

It will print 0x123 or whatever value you will write to *p_hash.
Some values will crash the runtime though ;-)


Sergey






</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003953.html">[Mono-list] Buggy Me Rules!
</A></li>
	<LI> Next message: <A HREF="003959.html">[Mono-list] Array Class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3954">[ date ]</a>
              <a href="thread.html#3954">[ thread ]</a>
              <a href="subject.html#3954">[ subject ]</a>
              <a href="author.html#3954">[ author ]</a>
         </LI>
       </UL>
</body></html>
