<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] (MacOSX) Requesting porting guide clarifications
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ryan_wilhm%40yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003641.html">
   <LINK REL="Next"  HREF="003654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] (MacOSX) Requesting porting guide clarifications
   </H1>
    <B>Ryan Wilhm
    </B> 
    <A HREF="mailto:ryan_wilhm%40yahoo.com"
       TITLE="[Mono-list] (MacOSX) Requesting porting guide clarifications">ryan_wilhm@yahoo.com
       </A><BR>
    <I>Fri, 01 Mar 2002 08:06:36 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="003641.html">[Mono-list] BitConverter lamespec
</A></li>
        <LI> Next message: <A HREF="003654.html">[Mono-list] (MacOSX) Requesting porting guide clarifications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3653">[ date ]</a>
              <a href="thread.html#3653">[ thread ]</a>
              <a href="subject.html#3653">[ subject ]</a>
              <a href="author.html#3653">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks! Follow-ups below. Also, things are progressing... I'm able to build
the mono-0.9 drop now, though I'm having some quirks with the glib gmodule
loading, so mint isn't really able to run yet. (I guess Apple decided to
make the distinction between shared libraries and loadable modules, whereas
Linux ELF systems treat shared code as something that can be used as a
library and for dynamic loading *and* unloading... After dinking the glib
build to set the suffix to '.bundle' for Darwin systems and compiling
against dlcompat, glib seemed happy, but I'm not really sure if that's all
that needs to be done...)

On 2/28/02 12:27 PM, &quot;Miguel de Icaza&quot; &lt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&gt; wrote:

&gt;&gt;<i> 1. Re: The current guidelines
</I>&gt;&gt;<i> Am I correct in assuming that I don't need to mess with the PPC arch
</I>&gt;&gt;<i> implementation? I know this is currently underway for PPC based Linux
</I>&gt;&gt;<i> distros, but I'm assuming the CLI bytecode to native code should map 1:1
</I>&gt;&gt;<i> irregardless. I'm also proceeding under the assumption that porting the JIT
</I>&gt;&gt;<i> is not really a concern at the moment, and that I should focus on making
</I>&gt;&gt;<i> sure the interpreter works first and foremost.
</I>&gt;<i> 
</I>&gt;<i> Yes, this is correct.  Most of the low-level PPC work has been now
</I>&gt;<i> completed by Radek Doulik now.  The areas that might need work are at
</I>&gt;<i> the Unix porting level, and they could encompass some of these:
</I>&gt;<i> 
</I>&gt;<i> * Threads, but we believe Jeff's work on Solaris should have
</I>&gt;<i>  taken care of most of the portability issues.
</I>&gt;<i> 
</I>
Yes, this was a tremendous help. (He was also nice enough to help me get
started. :)

The last issue with this was that Darwin/OS X doesn't support pthread_rwlock
operations. (Required by events.c in io-layer.) I remembered that the
O'Reily Pthreads book had a read/write locking implementation in it as an
example, so I basically rehashed that as a placeholder for now. Jeff
mentioned the portable thread library from GNU as something to look into...

&gt;<i> * Signal handling (we need information about the signal, and how
</I>&gt;<i>  to modify registers after we catch a signal for example, and
</I>&gt;<i>  to unwind the stack).  This might be different in Linux than
</I>&gt;<i>  the Mac OS X. 
</I>&gt;<i> 
</I>&gt;&gt;<i> 2. Specifying platform specific behavior in the code
</I>&gt;&gt;<i> There have been a few problems that I fixed by using macros. Is that cool?
</I>&gt;&gt;<i> Apple has defined &quot;__APPLE__&quot; in it's headers, so I've been using that to
</I>&gt;&gt;<i> single out OS X platform fixes. Is this cool? Would it be more appropriate
</I>&gt;&gt;<i> to define a macro specific to the Mono build to tag OS X behavior? Or, is
</I>&gt;&gt;<i> this totally wrong?
</I>&gt;<i> 
</I>&gt;<i> This works, but we would surely like to look at what you are ifdefing
</I>&gt;<i> out.  Sometimes the best way to port is to &quot;probe&quot; for the capability,
</I>&gt;<i> rather than the vendor.  If you probe for the capability, you can also
</I>&gt;<i> simplify the life of other people porting to other systems, but most
</I>&gt;<i> importantly, if your vendor revisits its interface and decides to
</I>&gt;<i> add/remove features in the future, recompiling Mono will take advantage
</I>&gt;<i> of these features.
</I>&gt;<i> 
</I>
Thanks, I didn't think to look at either of these things. For the second,
I'll probably keep the macros for the moment until things work, but will
definitely revisit this before submitting a patch.

Thanks, again!
Ryan




_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at <A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A>




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003641.html">[Mono-list] BitConverter lamespec
</A></li>
	<LI> Next message: <A HREF="003654.html">[Mono-list] (MacOSX) Requesting porting guide clarifications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3653">[ date ]</a>
              <a href="thread.html#3653">[ thread ]</a>
              <a href="subject.html#3653">[ subject ]</a>
              <a href="author.html#3653">[ author ]</a>
         </LI>
       </UL>
</body></html>
