<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] interop delegate/callback problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bob%40thestuff.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002046.html">
   <LINK REL="Next"  HREF="002049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] interop delegate/callback problem
   </H1>
    <B>Bob Smith
    </B> 
    <A HREF="mailto:bob%40thestuff.net"
       TITLE="[Mono-list] interop delegate/callback problem">bob@thestuff.net
       </A><BR>
    <I>Tue, 13 Nov 2001 13:19:38 -0500 (EST)</I>
    <P><UL>
        <LI> Previous message: <A HREF="002046.html">[Mono-list] interop delegate/callback problem
</A></li>
        <LI> Next message: <A HREF="002049.html">[Mono-list]  delegate: more problem &amp; solution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2048">[ date ]</a>
              <a href="thread.html#2048">[ thread ]</a>
              <a href="subject.html#2048">[ subject ]</a>
              <a href="author.html#2048">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I beleave I saw somewhere in the microsoft documentation that a delegate
gets pined on the first call to a c function and then is unpined on the
first time the delegate gets called by the c function. This meens that if
the c function calls the delegate a second time, the delegate might have
been moved by the garbage collector after the first call. I think you have
to explicitly pin the delegate if you want the delegate to work for things
that need to call the callback multiple times like GTK Signals.

On Tue, 13 Nov 2001, Lloyd Dupont wrote:

&gt;<i> Hello fellow users !
</I>&gt;<i> Any who wants to look at my bug ?
</I>&gt;<i>
</I>&gt;<i> i create a C struct with some function pointer (in fact C# delegate)
</I>&gt;<i> and reference it in C# as an IntPtr.
</I>&gt;<i>
</I>&gt;<i> later i execute some interop function taking my struct as an argument
</I>&gt;<i> and calling my function pointer.
</I>&gt;<i> strangely, after a few call, there is strange error, such as (most
</I>&gt;<i> curious) NullReferenceException when returning from my C# delegate
</I>&gt;<i> callback to my C code....
</I>&gt;<i>
</I>&gt;<i> i join you my project so you could test....
</I>&gt;<i> anyone has any idea ?
</I>&gt;<i>
</I>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002046.html">[Mono-list] interop delegate/callback problem
</A></li>
	<LI> Next message: <A HREF="002049.html">[Mono-list]  delegate: more problem &amp; solution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2048">[ date ]</a>
              <a href="thread.html#2048">[ thread ]</a>
              <a href="subject.html#2048">[ subject ]</a>
              <a href="author.html#2048">[ author ]</a>
         </LI>
       </UL>
</body></html>
