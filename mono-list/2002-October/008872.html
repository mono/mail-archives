<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: dynamic optimizations in Mono JIT
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lupus%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="008856.html">
   <LINK REL="Next"  HREF="008860.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: dynamic optimizations in Mono JIT
   </H1>
    <B>Paolo Molaro
    </B> 
    <A HREF="mailto:lupus%40ximian.com"
       TITLE="[Mono-list] Re: dynamic optimizations in Mono JIT">lupus@ximian.com
       </A><BR>
    <I>Tue, 8 Oct 2002 17:28:14 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="008856.html">[Mono-list] Re: dynamic optimizations in Mono JIT
</A></li>
        <LI> Next message: <A HREF="008860.html">[Mono-list] monodis for Mono 0.15 Windows version?\
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8872">[ date ]</a>
              <a href="thread.html#8872">[ thread ]</a>
              <a href="subject.html#8872">[ subject ]</a>
              <a href="author.html#8872">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/07/02 Dietmar Maurer wrote:
&gt;<i> On Sun, 2002-10-06 at 01:29, James Roberts wrote:
</I>&gt;<i> &gt; The ideal goal of the project would be to continuously 
</I>&gt;<i> &gt; improve application performance using a lightweight profiler 
</I>&gt;<i> &gt; in conjunction with on-line translator/optimizer.  However, 
</I>&gt;<i> &gt; since this is only a semester project, it would be sufficient 
</I>&gt;<i> &gt; to persue only a subset of those goals (e.g. a novel 
</I>&gt;<i> &gt; lightweight profiling technique, or simply an interesting 
</I>&gt;<i> &gt; feedback directed optimization for byte code translation).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I was wondering if you had any pending problems or project 
</I>&gt;<i> &gt; ideas in the Mono JIT which fell into this category and which 
</I>&gt;<i> &gt; would be feasible for a medium-sized class project.  
</I>&gt;<i> &gt; Likewise, I would greatly appreciate any pointers that you 
</I>&gt;<i> &gt; could give me regarding the high-level implementation of the 
</I>&gt;<i> &gt; Mono JIT.
</I>
As dietmar told you, we have a profiling interface, but that is
more directed at profiling applications that run in mono rather than
to instrument the code to recompile or optimize the generated code.

We're very interested in feedback directed optimizations (either
online, like, when running the program) or offline (run the programs a
few times collecting profile information and save them somewhere: the
next time the JIT runs it knows what methods it should fully optimize
from the start). This kind of profiling will be very valuable for us,
since we're writing a new JIT compiler that has more optimizations
than the current one and some of them may be too slow to enable by
default for all the methods. I guess you can still experiment with the
current JIT, by disabling gloabl register allocation by default
and using it only when recompiling methods that profiling shows to 
be hotspots.

Are you interested more in collecting profile data or in optimizing the
code?
In the first case you can either use simple counters or (more
interesting) use something like oprofile to collect info (oprofile uses
the hw cpu counters). I'm personally more interested in seeing profile
data collected for jitted programs with oprofile.

If you're interested in optimiing the code once hotspots have been
identified, you can:
1) tune the jit knobs to produce better code (global reg allocation)
2) write more optimizations for the jit.
3) enhance the binary code directly (interesting but less useful)

For item 2 I suggest waiting a few weeks for the new jit to come into
existance since that will be more easily improved (and I guess you
need time to design and collect profile data first anyway...).

lupus

-- 
-----------------------------------------------------------------
<A HREF="mailto:lupus@debian.org">lupus@debian.org</A>                                     debian/rules
<A HREF="mailto:lupus@ximian.com">lupus@ximian.com</A>                             Monkeys do it better


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="008856.html">[Mono-list] Re: dynamic optimizations in Mono JIT
</A></li>
	<LI> Next message: <A HREF="008860.html">[Mono-list] monodis for Mono 0.15 Windows version?\
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8872">[ date ]</a>
              <a href="thread.html#8872">[ thread ]</a>
              <a href="subject.html#8872">[ subject ]</a>
              <a href="author.html#8872">[ author ]</a>
         </LI>
       </UL>
</body></html>
