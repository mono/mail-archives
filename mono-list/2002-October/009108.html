<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] SqlBinary
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:vi64pa%40koti.soon.fi">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="009104.html">
   <LINK REL="Next"  HREF="009115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] SqlBinary
   </H1>
    <B>ville
    </B> 
    <A HREF="mailto:vi64pa%40koti.soon.fi"
       TITLE="[Mono-list] SqlBinary">vi64pa@koti.soon.fi
       </A><BR>
    <I>Wed, 16 Oct 2002 20:27:58 +0300</I>
    <P><UL>
        <LI> Previous message: <A HREF="009104.html">[Mono-list] Crypto Unit tests on linux
</A></li>
        <LI> Next message: <A HREF="009115.html">[Mono-list] SqlBinary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9108">[ date ]</a>
              <a href="thread.html#9108">[ thread ]</a>
              <a href="subject.html#9108">[ subject ]</a>
              <a href="author.html#9108">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--------------Boundary-00=_MI43WZMFHWJDWLHU962N
Content-Type: text/plain;
  charset=&quot;us-ascii&quot;
Content-Transfer-Encoding: quoted-printable


Here is a testclass for SqlBinary. I have tested it with windows and one =
error=20
occur: The MSDN says that if the index parameter (SqlBinary indexer)=20
indicates a position byond the length of the byte array it should throw=20
SqlNullvalueException but with windows it throws IndexOutOfRangeException=
=2E

I hope you can understand my english .-p

ville

--------------Boundary-00=_MI43WZMFHWJDWLHU962N
Content-Type: text/x-c++src;
  charset=&quot;us-ascii&quot;;
  name=&quot;SqlBinaryTest.cs&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename=&quot;SqlBinaryTest.cs&quot;

//
// SqlBinaryTest.cs - NUnit Test Cases for System.Data.SqlTypes.SqlBinary
//
// Ville Palo (<A HREF="mailto:vi64pa@koti.soon.fi">vi64pa@koti.soon.fi</A>)
//
// (C) Ville Palo 2002
// 

using NUnit.Framework;
using System;
using System.Data.SqlTypes;

namespace MonoTests.System.Data.SqlTypes
{
        public class SqlBinaryTest : TestCase {
	
		SqlBinary Test1;
		SqlBinary Test2;
		SqlBinary Test3;

		public SqlBinaryTest() : base (&quot;System.Data.SqlTypes.SqlBinary&quot;) {}
		public SqlBinaryTest(string name) : base(name) {}

		protected override void TearDown() {}

		protected override void SetUp() 
		{
                        byte [] b1 = new Byte [2];
                        byte [] b2 = new Byte [3];
                        byte [] b3 = new Byte [2];

			b1 [0] = 240;
			b1 [1] = 15;
			b2 [0] = 10;
			b2 [1] = 10;
			b2 [2] = 10;
			b3 [0] = 240;
			b3 [1] = 15;

			Test1 = new SqlBinary(b1);
			Test2 = new SqlBinary(b2);
			Test3 = new SqlBinary(b3);
		}

		public static ITest Suite {
			get {
				return new TestSuite(typeof(SqlBinary));
			}
		}

		// Test constructor
		public void TestCreate()
		{
			byte [] b = new byte [3];                        
			SqlBinary Test = new SqlBinary (b);
                        Assert (&quot;#A01&quot;, !(Test.IsNull)); 
		}

		// Test public fields
		public void TestPublicFields()
		{
			Assert (&quot;#B01&quot;, SqlBinary.Null.IsNull);
		}

		// Test properties
		public void TestProperties()
		{
			byte [] b = new byte [2];
			b [0] = 64;
			b [1] = 128;

			SqlBinary TestBinary = new SqlBinary (b);

			// IsNull
			Assert (&quot;#C01&quot;, SqlBinary.Null.IsNull);

			// Item
                        AssertEquals (&quot;#C02&quot;, (byte)128, TestBinary [1]);
                        AssertEquals (&quot;#C03&quot;, (byte)64, TestBinary [0]);

                        // FIXME: MSDN says that should throw SqlNullValueException
                        // but throws IndexOutOfRangeException
                        try {
                                byte test = TestBinary [TestBinary.Length];
				Fail (&quot;#C04&quot;);
			} catch (Exception e) {
				AssertEquals (&quot;#C05&quot;, typeof (SqlNullValueException),
					    e.GetType ());
			}
                 
			try {
				byte test = SqlBinary.Null [2];
				Fail (&quot;#C06&quot;);
			} catch (Exception e) {
				AssertEquals (&quot;#C07&quot;, typeof (SqlNullValueException),
					    e.GetType ());
			}

			// Length
                        AssertEquals (&quot;#C08&quot;, 2, TestBinary.Length);    

			try {
				int test = SqlBinary.Null.Length;
				Fail (&quot;#C09&quot;);
			} catch (Exception e) {
				AssertEquals (&quot;#C10&quot;, typeof (SqlNullValueException),
					    e.GetType ());
			}

			// Value
                        AssertEquals (&quot;#C11&quot;, (byte)128, TestBinary [1]);
                        AssertEquals (&quot;#C12&quot;, (byte)64, TestBinary [0]);               

			try {
                                Byte [] test = SqlBinary.Null.Value;
				Fail (&quot;#C13&quot;);
			} catch (Exception e) {
				AssertEquals (&quot;#C14&quot;, typeof (SqlNullValueException),
					    e.GetType ());
			}
		}

		// Methods 

		public void TestComparisonMethods()
		{
			// GreaterThan
			Assert (&quot;#D01&quot;, SqlBinary.GreaterThan (Test1, Test2).Value);
                        Assert (&quot;#D02&quot;, SqlBinary.GreaterThan (Test3, Test2).Value);
			Assert (&quot;#D03&quot;, !SqlBinary.GreaterThan (Test2, Test1).Value);
			
			// GreaterThanOrEqual
			Assert (&quot;#D04&quot;, SqlBinary.GreaterThanOrEqual (Test1, Test2).Value);
                        Assert (&quot;#D05&quot;, SqlBinary.GreaterThanOrEqual (Test1, Test2).Value);
			Assert (&quot;#D06&quot;, !SqlBinary.GreaterThanOrEqual (Test2, Test1).Value);

			// LessThan
			Assert (&quot;#D07&quot;, !SqlBinary.LessThan (Test1, Test2).Value);
			Assert (&quot;#D08&quot;, !SqlBinary.LessThan (Test3, Test2).Value);
			Assert (&quot;#D09&quot;, SqlBinary.LessThan (Test2, Test1).Value);

			// LessThanOrEqual
			Assert (&quot;#D10&quot;, !SqlBinary.LessThanOrEqual (Test1, Test2).Value);
                        Assert (&quot;#D11&quot;, SqlBinary.LessThanOrEqual (Test3, Test1).Value);
                        Assert (&quot;#D12&quot;, SqlBinary.LessThanOrEqual (Test2, Test1).Value);

			// Equals
                        Assert (&quot;#D13&quot;, !Test1.Equals (Test2));
                        Assert (&quot;#D14&quot;, !Test3.Equals (Test2));
                        Assert (&quot;#D15&quot;, Test3.Equals (Test1));

			// NotEquals
			Assert (&quot;#D16&quot;, SqlBinary.NotEquals (Test1, Test2).Value);
                        Assert (&quot;#D17&quot;, !SqlBinary.NotEquals (Test3, Test1).Value);
			Assert (&quot;#D18&quot;, SqlBinary.NotEquals (Test2, Test1).Value);
		}


		public void TestCompareTo()
		{
                        SqlString TestString = new SqlString (&quot;This is a test&quot;);
			
                        Assert (&quot;#E01&quot;, Test1.CompareTo(Test2) &gt; 0);
                        Assert (&quot;#E02&quot;, Test2.CompareTo(Test1) &lt; 0);
                        Assert (&quot;#E03&quot;, Test1.CompareTo(Test3) == 0);
			
			try {
                                Test1.CompareTo (TestString);
                                Fail (&quot;#E04&quot;);
			} catch(Exception e) {
                                AssertEquals (&quot;#E05&quot;, typeof (ArgumentException), e.GetType ());
			}			
		}

		public void TestGetHashCode()
		{
			AssertEquals (&quot;#F01&quot;, Test1.GetHashCode (), Test1.GetHashCode ());
			Assert (&quot;#F02&quot;, Test2.GetHashCode () !=  Test1.GetHashCode ());
		}

		public void TestGetType()
		{
			AssertEquals(&quot;#G01&quot;, &quot;System.Data.SqlTypes.SqlBinary&quot;, 
				     Test1.GetType().ToString());			
		}

		public void TestConcat()
		{			
			SqlBinary TestBinary;

			TestBinary = SqlBinary.Concat (Test2, Test3);
                        AssertEquals (&quot;H01&quot;, (byte)15, TestBinary [4]);

			TestBinary = SqlBinary.Concat (Test1, Test2);
                        AssertEquals (&quot;#H02&quot;, (byte)240, TestBinary [0]);
                        AssertEquals (&quot;#H03&quot;, (byte)15, TestBinary [1]);
		}

		public void TestToSqlGuid()
		{
                        SqlBinary TestBinary = new SqlBinary (new byte [16]);
                        SqlGuid TestGuid = TestBinary.ToSqlGuid ();
                        Assert (&quot;#I01&quot;, !TestGuid.IsNull);
		}

		public void TestToString()
		{
                        AssertEquals (&quot;#J01&quot;, &quot;SqlBinary(3)&quot;, Test2.ToString ());
                        AssertEquals (&quot;#J02&quot;, &quot;SqlBinary(2)&quot;, Test1.ToString ());              
		}

		// OPERATORS

		public void TestAdditionOperator()
		{
			SqlBinary TestBinary = Test1 + Test2;
                        AssertEquals (&quot;#K01&quot;, (byte)240, TestBinary [0]);
                        AssertEquals (&quot;#K02&quot;, (byte)15, TestBinary [1]);
		}

		public void TestComparisonOperators()
		{
			// Equality
                        Assert (&quot;#L01&quot;, !(Test1 == Test2).Value);
                        Assert (&quot;#L02&quot;, (Test3 == Test1).Value);

			// Greater than
                        Assert (&quot;#L03&quot;, (Test1 &gt; Test2).Value);
                        Assert (&quot;#L04&quot;, !(Test3 &gt; Test1).Value);

			// Greater than or equal
                        Assert (&quot;#L05&quot;, (Test1 &gt;= Test2).Value);
                        Assert (&quot;#L06&quot;, (Test3 &gt;= Test2).Value);

			// Inequality
                        Assert (&quot;#L07&quot;, (Test1 != Test2).Value);
                        Assert (&quot;#L08&quot;, !(Test3 != Test1).Value);

			// Less than
                        Assert (&quot;#L09&quot;, !(Test1 &lt; Test2).Value);
                        Assert (&quot;#L10&quot;, !(Test3 &lt; Test2).Value);

			// Less than or equal
                        Assert (&quot;#L11&quot;, !(Test1 &lt;= Test2).Value);
                        Assert (&quot;#L12&quot;, (Test3 &lt;= Test1).Value);
		}

		public void TestSqlBinaryToByteArray() 
		{
			byte [] TestByteArray = (Byte[])Test1;
			AssertEquals (&quot;#M01&quot;, (byte)240, TestByteArray[0]);			
		}

		public void TestSqlGuidToSqlBinary()
		{
                        byte [] TestByteArray = new Byte [16];
			TestByteArray [0] = 15;
			TestByteArray [1] = 200;
			SqlGuid TestGuid = new SqlGuid (TestByteArray);
			
			SqlBinary TestBinary = (SqlBinary)TestGuid;
                        AssertEquals (&quot;#N01&quot;, (byte)15, TestBinary [0]);
		}

		public void TestByteArrayToSqlBinary()
		{
                        byte [] TestByteArray = new Byte [2];
			TestByteArray [0] = 15;
			TestByteArray [1] = 200;
			SqlBinary TestBinary = (SqlBinary)TestByteArray;
                        AssertEquals (&quot;#O1&quot;, (byte)15, TestBinary [0]);
		}
	}
}


--------------Boundary-00=_MI43WZMFHWJDWLHU962N--



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="009104.html">[Mono-list] Crypto Unit tests on linux
</A></li>
	<LI> Next message: <A HREF="009115.html">[Mono-list] SqlBinary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9108">[ date ]</a>
              <a href="thread.html#9108">[ thread ]</a>
              <a href="subject.html#9108">[ subject ]</a>
              <a href="author.html#9108">[ author ]</a>
         </LI>
       </UL>
</body></html>
