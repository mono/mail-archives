<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Patch for corlib/System.Security.Policy/Evidence.cs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jacksonh%40telus.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="009171.html">
   <LINK REL="Next"  HREF="009166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Patch for corlib/System.Security.Policy/Evidence.cs
   </H1>
    <B>Jackson Harper
    </B> 
    <A HREF="mailto:jacksonh%40telus.net"
       TITLE="[Mono-list] Patch for corlib/System.Security.Policy/Evidence.cs">jacksonh@telus.net
       </A><BR>
    <I>Sun, 20 Oct 2002 20:21:38 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="009171.html">[Mono-list] patents on ISO/ECMA C#
</A></li>
        <LI> Next message: <A HREF="009166.html">[Mono-list] laus stultitia
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9198">[ date ]</a>
              <a href="thread.html#9198">[ thread ]</a>
              <a href="subject.html#9198">[ subject ]</a>
              <a href="author.html#9198">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

------=_NextPart_000_0021_01C27876.4B648C70
Content-Type: text/plain;
	charset=&quot;iso-8859-1&quot;
Content-Transfer-Encoding: 7bit

Here is my patch for corlib\System.Security.Policy\Evidence.cs

Changelog Entry:

Implemented most methods.

------=_NextPart_000_0021_01C27876.4B648C70
Content-Type: application/octet-stream;
	name=&quot;Evidence.cs.patch&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename=&quot;Evidence.cs.patch&quot;

Index: Evidence.cs=0A=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
RCS file: /mono/mcs/class/corlib/System.Security.Policy/Evidence.cs,v=0A=
retrieving revision 1.4=0A=
diff -u -r1.4 Evidence.cs=0A=
--- Evidence.cs	1 Apr 2002 20:22:40 -0000	1.4=0A=
+++ Evidence.cs	21 Oct 2002 03:15:49 -0000=0A=
@@ -1,27 +1,169 @@=0A=
-// System.Security.Policy.Evidence=0A=
-//=0A=
-// Authors:=0A=
-//  Sean MacIsaac (<A HREF="mailto:macisaac@ximian.com">macisaac@ximian.com</A>)=0A=
-//  Nick Drochak (<A HREF="mailto:ndrochak@gol.com">ndrochak@gol.com</A>)=0A=
-//=0A=
-// (C) 2001 Ximian, Inc.=0A=
-=0A=
-using System.Collections;=0A=
-=0A=
-namespace System.Security.Policy=0A=
-{=0A=
-	[MonoTODO]=0A=
-	[Serializable]=0A=
-	public sealed class Evidence=0A=
-	{=0A=
-		=0A=
-		[MonoTODO]=0A=
-		public Evidence () {=0A=
-		}=0A=
-=0A=
-		[MonoTODO]=0A=
-		public IEnumerator GetHostEnumerator() {=0A=
-			throw new NotImplementedException();=0A=
-		}=0A=
-	}=0A=
-}=0A=
+// System.Security.Policy.Evidence
+//
+// Authors:
+//  Sean MacIsaac (<A HREF="mailto:macisaac@ximian.com">macisaac@ximian.com</A>)
+//  Nick Drochak (<A HREF="mailto:ndrochak@gol.com">ndrochak@gol.com</A>)
+//  Jackson Harper (<A HREF="mailto:Jackson@LatitudeGeo.com">Jackson@LatitudeGeo.com</A>)
+//
+// (C) 2001 Ximian, Inc.
+
+using System;
+using System.Collections;
+
+namespace System.Security.Policy {
+
+	[MonoTODO]
+	public sealed class Evidence : ICollection, IEnumerable {
+
+	=09
+		private ArrayList  mHostEvidenceList      =3D  new ArrayList();=09
+		private ArrayList  mAssemblyEvidenceList  =3D  new ArrayList();
+	=09
+		public Evidence ()=20
+		{
+		}
+
+		public Evidence( Evidence evidence )=20
+		{
+			Merge( evidence );=09
+		}
+
+		public Evidence( object[] hostEvidence, object[] assemblyEvidence )=20
+		{
+			if ( null !=3D hostEvidence )
+				mHostEvidenceList.AddRange( hostEvidence );
+			if ( null !=3D assemblyEvidence )
+				mAssemblyEvidenceList.AddRange( assemblyEvidence );
+		}
+	=09
+		//
+		// Public Properties
+		//
+=09
+		public int Count {
+			get {
+				return ( mHostEvidenceList.Count + mAssemblyEvidenceList.Count );
+			}
+		}
+
+		public bool IsReadOnly {
+			get{
+				return false;
+			}
+		}
+	=09
+		public bool IsSynchronized {
+			get {
+				return false;
+			}
+		}
+
+		[MonoTODO]
+		public bool Locked {
+			get {
+				throw new NotImplementedException();
+			}
+			set {
+				throw new NotImplementedException();
+			}
+		}=09
+
+		public object SyncRoot {
+			get {
+				return this;
+			}
+		}
+
+		//
+		// Public Methods
+		//
+
+		public void AddAssembly( object id )=20
+		{
+			mAssemblyEvidenceList.Add( id );
+		}
+
+		[MonoTODO(&quot;If Locked is true and the code that calls this method does =
not have SecurityPermissionFlag.ControlEvidence a SecurityException =
should be thrown&quot;)]
+		public void AddHost( object id )=20
+		{
+			mHostEvidenceList.Add( id );
+		}
+
+		public void CopyTo( Array array, int index )=20
+		{
+			if ( mHostEvidenceList.Count &gt; 0 )=20
+				mHostEvidenceList.CopyTo( array, index );
+			if ( mAssemblyEvidenceList.Count &gt; 0 )=20
+				mAssemblyEvidenceList.CopyTo( array, index + =
mHostEvidenceList.Count );
+		}
+
+		public IEnumerator GetEnumerator()=20
+		{
+			return new EvidenceEnumerator( mHostEvidenceList.GetEnumerator(),=20
+						       mAssemblyEvidenceList.GetEnumerator() );
+		}
+
+		public IEnumerator GetAssemblyEnumerator()=20
+		{
+			return mAssemblyEvidenceList.GetEnumerator();
+		}
+
+		public IEnumerator GetHostEnumerator()=20
+		{
+			return mHostEvidenceList.GetEnumerator();
+		}
+
+		public void Merge( Evidence evidence )=20
+		{
+			IEnumerator	hostenum , assemblyenum;
+		=09
+			hostenum =3D evidence.GetHostEnumerator();
+			while( hostenum.MoveNext() ) {
+				AddHost( hostenum.Current );
+			}
+
+			assemblyenum =3D evidence.GetAssemblyEnumerator();
+			while( assemblyenum.MoveNext() ) {
+				AddAssembly( assemblyenum.Current );
+			}
+		}
+=09
+		private class EvidenceEnumerator : IEnumerator {
+		=09
+			private IEnumerator	mCurrentEnum, mHostEnum, mAssemblyEnum;	=09
+=09
+			public EvidenceEnumerator( IEnumerator hostenum, IEnumerator =
assemblyenum )=20
+			{
+				mHostEnum =3D hostenum;
+				mAssemblyEnum =3D assemblyenum;
+				mCurrentEnum =3D mHostEnum;		=09
+			}
+
+			public bool MoveNext()=20
+			{
+				bool 	ret =3D mCurrentEnum.MoveNext();
+			=09
+				if ( !ret &amp;&amp; mHostEnum =3D=3D mCurrentEnum ) {
+					mCurrentEnum =3D mAssemblyEnum;
+					ret =3D mAssemblyEnum.MoveNext();
+				}
+
+				return ret;
+			}
+
+			public void Reset()=20
+			{
+				mHostEnum.Reset();
+				mAssemblyEnum.Reset();
+				mCurrentEnum =3D mHostEnum;
+			}
+
+			public object Current {
+				get {
+					return mCurrentEnum.Current;
+				}
+			}
+		}
+
+	}
+}

------=_NextPart_000_0021_01C27876.4B648C70--




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="009171.html">[Mono-list] patents on ISO/ECMA C#
</A></li>
	<LI> Next message: <A HREF="009166.html">[Mono-list] laus stultitia
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9198">[ date ]</a>
              <a href="thread.html#9198">[ thread ]</a>
              <a href="subject.html#9198">[ subject ]</a>
              <a href="author.html#9198">[ author ]</a>
         </LI>
       </UL>
</body></html>
