<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono, Windows Forms, and Headless operation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Mono%2C%20Windows%20Forms%2C%20and%20Headless%20operation&In-Reply-To=%3Cn6oo4m%24dss%241%40ger.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052006.html">
   <LINK REL="Next"  HREF="052009.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono, Windows Forms, and Headless operation</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Mono%2C%20Windows%20Forms%2C%20and%20Headless%20operation&In-Reply-To=%3Cn6oo4m%24dss%241%40ger.gmane.org%3E"
       TITLE="[Mono-list] Mono, Windows Forms, and Headless operation">robertj at gmx.net
       </A><BR>
    <I>Fri Jan  8 16:29:17 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="052006.html">[Mono-list] Mono, Windows Forms, and Headless operation
</A></li>
        <LI>Next message: <A HREF="052009.html">[Mono-list] Mono, Windows Forms, and Headless operation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52007">[ date ]</a>
              <a href="thread.html#52007">[ thread ]</a>
              <a href="subject.html#52007">[ subject ]</a>
              <a href="author.html#52007">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07.01.2016 22:24, George, Glover E ERDC-RDE-ITL-MS wrote:
&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> We&#8217;re currently porting a Windows Forms Application to Mono, and have
</I>&gt;<i> generally had great success.  However, we have now hit a critical
</I>&gt;<i> decision point, and were hoping for some guidance on the best route
</I>&gt;<i> forward.   If we don&#8217;t have X11, mono fails to run Windows Forms code
</I>&gt;<i> with the following error:
</I>&gt;<i>
</I>&gt;<i> From: System.Windows.Forms, at: Void .ctor(), Error Message: The type
</I>&gt;<i> initializer for
</I>&gt;<i> 'System.Windows.Forms.WindowsFormsSynchronizationContext' threw an
</I>&gt;<i> exception.
</I>&gt;<i>
</I>&gt;<i> Question First: The main question I had for the Mono list is this.
</I>&gt;<i> Is it possible to have mono run Windows Forms code without trying to
</I>&gt;<i> open X11 (I.e. headless mode)?  What triggers mono to request an X11
</I>&gt;<i> display? Is it the project type?  Is it the call to an object that
</I>&gt;<i> inherits from a Windows Forms control?  I don&#8217;t need to see the form,
</I>&gt;<i> but if I&#8217;m using BackgroundWorkers, I need the form's event handler,
</I>&gt;<i> don&#8217;t I?
</I>

BackgroundWorker does not depend upon System.Windows.Forms, i.e.
it can use it headless.

The exception you're experiencing is caused by the synchronization
context set and used by WinForms.

Supposing that you don't need any kind of synchronization, you
may want to replace the synchronization context with a simple
one.

I don't know if the most simple one 
(System.Threading.SynchronizationContext)
would be enough or if you have to subclass it. Have a look
at its sources and at
System.Windows.Forms.WindowsFormsSynchronizationContext.

Robert

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052006.html">[Mono-list] Mono, Windows Forms, and Headless operation
</A></li>
	<LI>Next message: <A HREF="052009.html">[Mono-list] Mono, Windows Forms, and Headless operation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52007">[ date ]</a>
              <a href="thread.html#52007">[ thread ]</a>
              <a href="subject.html#52007">[ subject ]</a>
              <a href="author.html#52007">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
