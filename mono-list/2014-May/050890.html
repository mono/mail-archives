<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Null task exception when doing ContinueWith
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Null%20task%20exception%20when%20doing%20ContinueWith&In-Reply-To=%3CCALwbK7QP02QnVc1dZB26jh2fVBoV2y5u2nO1JjyYMpYp%3D_0EPg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="050889.html">
   <LINK REL="Next"  HREF="050891.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Null task exception when doing ContinueWith</H1>
    <B>Giuliano Barberi</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Null%20task%20exception%20when%20doing%20ContinueWith&In-Reply-To=%3CCALwbK7QP02QnVc1dZB26jh2fVBoV2y5u2nO1JjyYMpYp%3D_0EPg%40mail.gmail.com%3E"
       TITLE="[Mono-list] Null task exception when doing ContinueWith">gbarberi at aotaonline.com
       </A><BR>
    <I>Fri May  2 15:03:14 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="050889.html">[Mono-list] Null task exception when doing ContinueWith
</A></li>
        <LI>Next message: <A HREF="050891.html">[Mono-list] Mono-list Digest, Vol 108, Issue 24
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50890">[ date ]</a>
              <a href="thread.html#50890">[ thread ]</a>
              <a href="subject.html#50890">[ subject ]</a>
              <a href="author.html#50890">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm gonna try to isolate the issue but I haven't been able to reproduce it
in dev and only seen it in prod. Problem is without the stacktrace it's
hard to know where the problem is coming from. I'm wondering if anyone has
seen something similar or knows any case where the exception may be null.
If not, I'm gonna keep trying to reproduce it.


On Fri, May 2, 2014 at 9:24 AM, Rodrigo Kumpera &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">kumpera at gmail.com</A>&gt; wrote:

&gt;<i> Can you provide with a test case that shows this behavior? If so, please
</I>&gt;<i> file a bug report.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Fri, May 2, 2014 at 7:17 AM, Giuliano Barberi &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">gbarberi at aotaonline.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hey guys I'm seeing something strange. It could totally be user error but
</I>&gt;&gt;<i> I can't seem to figure it out.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am doing this on some tasks that I never await in order to get the
</I>&gt;&gt;<i> exception:
</I>&gt;&gt;<i>         public static Task CatchUnhandledException(this Task task)
</I>&gt;&gt;<i>         {
</I>&gt;&gt;<i>             return task.ContinueWith(continuation =&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Engine.UnhandledExceptionHandler(continuation.Exception),
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> TaskContinuationOptions.ExecuteSynchronously |
</I>&gt;&gt;<i> TaskContinuationOptions.OnlyOnFaulted);
</I>&gt;&gt;<i>         }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> and the Engine.UnhandledExceptionHandler just logs the exception.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What's strange is that the exception is null and also doing
</I>&gt;&gt;<i> an Environment.StackTrace in the handler also yields nothing. I do have
</I>&gt;&gt;<i> --debug with the mdb files so I would suspect to get the full stacktrace. I
</I>&gt;&gt;<i> never saw this issue when I was running on .NET runtime but I also have
</I>&gt;&gt;<i> added more async code since so I'm not sure if it's something with Mono or
</I>&gt;&gt;<i> my app. I just can't find anything online and the documentation for Tasks
</I>&gt;&gt;<i> says that if it's faulted state there will be an exception.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Giuliano Barberi
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>

-- 
Giuliano Barberi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20140502/e6088cfd/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20140502/e6088cfd/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="050889.html">[Mono-list] Null task exception when doing ContinueWith
</A></li>
	<LI>Next message: <A HREF="050891.html">[Mono-list] Mono-list Digest, Vol 108, Issue 24
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50890">[ date ]</a>
              <a href="thread.html#50890">[ thread ]</a>
              <a href="subject.html#50890">[ subject ]</a>
              <a href="author.html#50890">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
