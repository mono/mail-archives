<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: XmlDocument Load method bug ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ginga%40kit.hi-ho.ne.jp">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="017244.html">
   <LINK REL="Next"  HREF="017317.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: XmlDocument Load method bug ?
   </H1>
    <B>Atsushi Eno
    </B> 
    <A HREF="mailto:ginga%40kit.hi-ho.ne.jp"
       TITLE="[Mono-list] Re: XmlDocument Load method bug ?">ginga@kit.hi-ho.ne.jp
       </A><BR>
    <I>Wed, 10 Dec 2003 01:21:43 +0900</I>
    <P><UL>
        <LI> Previous message: <A HREF="017244.html">[Mono-list] Re: [Mono-devel-list] XmlDocument Load method bug
 ?
</A></li>
        <LI> Next message: <A HREF="017317.html">[Mono-list] Re: XmlDocument Load method bug ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17256">[ date ]</a>
              <a href="thread.html#17256">[ thread ]</a>
              <a href="subject.html#17256">[ subject ]</a>
              <a href="author.html#17256">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.
--------------060100030402060201060903
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hello,

Hmm, then please try this patch for XmlUrlResolver.cs (in fact it is 
nothing but reverting the latest fix, maybe needed because of recent Uri 
behavior change). Sorry to say, but today and tomorrow I had and will 
have little time to test enough. That tricky code block was added when I 
received the same or similar problem related to this problem.

Thanks,
Atsushi Eno

Francisco Figueiredo Jr. wrote:
&gt;<i> Atsushi Eno wrote:
</I>&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> After installing today's mono daily I've reinstalled monodoc and I 
</I>&gt;&gt;&gt;&gt;<i> get this error (I guess this is from XmlDocument.Load Method):
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Some people reported similar bug. Looks the latest System.Uri has 
</I>&gt;&gt;&gt;<i> some problem. First I'll file a bugzilla, and then, look into that 
</I>&gt;&gt;&gt;<i> problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Now fixed in cvs.
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> Hi Atsushi.
</I>&gt;<i> 
</I>&gt;<i> Thanks for the fix.
</I>&gt;<i> 
</I>&gt;<i> Monodoc is working again, but I still get errors with NAnt.
</I>&gt;<i> It seems that it eats up the /home in the path.
</I>&gt;<i> 
</I>&gt;<i> Here is the stack trace I get when trying to build NAnt from cvs with 
</I>&gt;<i> latest mono and mcs from cvs:
</I>&gt;<i> 
</I>&gt;<i> Note that the path is missing the /home part.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> System.IO.FileNotFoundException: Could not find file 
</I>&gt;<i> &quot;/fxjr/Desenvolvimento/CVSRepositories/nant/NAnt.build&quot;
</I>&gt;<i> in &lt;0x002fa&gt; System.IO.FileStream:.ctor 
</I>&gt;<i> (string,System.IO.FileMode,System.IO.FileAccess,System.IO.FileShare,int,bool) 
</I>&gt;<i> 
</I>&gt;<i> in &lt;0x00043&gt; System.IO.FileStream:.ctor 
</I>&gt;<i> (string,System.IO.FileMode,System.IO.FileAccess,System.IO.FileShare)
</I>&gt;<i> in &lt;0x00081&gt; (wrapper remoting-invoke-with-check) 
</I>&gt;<i> System.IO.FileStream:.ctor 
</I>&gt;<i> (string,System.IO.FileMode,System.IO.FileAccess,System.IO.FileShare)
</I>&gt;<i> in &lt;0x0014c&gt; System.Xml.XmlUrlResolver:GetEntity 
</I>&gt;<i> (System.Uri,string,System.Type)in &lt;0x00110&gt; 
</I>&gt;<i> Mono.Xml.Native.XmlInputStream:.ctor 
</I>&gt;<i> (string,bool,System.Xml.XmlResolver,string)
</I>&gt;<i> in &lt;0x0008f&gt; (wrapper remoting-invoke-with-check) 
</I>&gt;<i> Mono.Xml.Native.XmlInputStream:.ctor 
</I>&gt;<i> (string,bool,System.Xml.XmlResolver,string)
</I>&gt;<i> in &lt;0x00036&gt; Mono.Xml.Native.XmlStreamReader:.ctor 
</I>&gt;<i> (string,bool,System.Xml.XmlResolver,string)
</I>&gt;<i> in &lt;0x00018&gt; Mono.Xml.Native.XmlStreamReader:.ctor 
</I>&gt;<i> (string,System.Xml.XmlResolver,string)
</I>&gt;<i> in &lt;0x0007b&gt; (wrapper remoting-invoke-with-check) 
</I>&gt;<i> Mono.Xml.Native.XmlStreamReader:.ctor 
</I>&gt;<i> (string,System.Xml.XmlResolver,string)
</I>&gt;<i> in &lt;0x0003b&gt; System.Xml.XmlTextReader:.ctor 
</I>&gt;<i> (string,System.Xml.XmlNameTable)
</I>&gt;<i> in &lt;0x00039&gt; System.Xml.XmlTextReader:.ctor (string)
</I>&gt;<i> in &lt;0x00195&gt; NAnt.Core.LocationMap:Add (System.Xml.XmlDocument)
</I>&gt;<i> in &lt;0x00076&gt; NAnt.Core.Project:InitializeProjectDocument 
</I>&gt;<i> (System.Xml.XmlDocument)
</I>&gt;<i> in &lt;0x00270&gt; NAnt.Core.Project:Execute ()
</I>&gt;<i> in &lt;0x00173&gt; NAnt.Core.Project:Run ()
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thanks in advance.
</I>&gt;<i> 
</I>&gt;<i> Francisco Figueiredo Jr.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> 
</I>

--------------060100030402060201060903
Content-Type: text/plain;
 name=&quot;XmlUrlResolver.patch&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;XmlUrlResolver.patch&quot;

Index: XmlUrlResolver.cs
===================================================================
RCS file: /cvs/public/mcs/class/System.XML/System.Xml/XmlUrlResolver.cs,v
retrieving revision 1.13
diff -u -r1.13 XmlUrlResolver.cs
--- XmlUrlResolver.cs	7 Dec 2003 15:03:54 -0000	1.13
+++ XmlUrlResolver.cs	9 Dec 2003 16:09:27 -0000
@@ -76,12 +76,11 @@
 					relativeUri.StartsWith (&quot;file:&quot;))
 					return new Uri (relativeUri);
 				else
-					return new Uri (Path.GetFullPath (relativeUri));
-
-				// extraneous &quot;/a&quot; is required because current Uri stuff 
-				// seems ignorant of difference between &quot;.&quot; and &quot;./&quot;. 
-				// I'd be appleciate if it is fixed with better solution.
-//				return new Uri (new Uri (Path.GetFullPath (&quot;./a&quot;)), EscapeRelativeUriBody (relativeUri));
+					// extraneous &quot;/a&quot; is required because current Uri stuff 
+					// seems ignorant of difference between &quot;.&quot; and &quot;./&quot;. 
+					// I'd be appleciate if it is fixed with better solution.
+//					return new Uri (Path.GetFullPath (relativeUri));
+					return new Uri (new Uri (Path.GetFullPath (&quot;./a&quot;)), EscapeRelativeUriBody (relativeUri));
 			}
 
 			if (relativeUri == null)

--------------060100030402060201060903--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="017244.html">[Mono-list] Re: [Mono-devel-list] XmlDocument Load method bug
 ?
</A></li>
	<LI> Next message: <A HREF="017317.html">[Mono-list] Re: XmlDocument Load method bug ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17256">[ date ]</a>
              <a href="thread.html#17256">[ thread ]</a>
              <a href="subject.html#17256">[ subject ]</a>
              <a href="author.html#17256">[ author ]</a>
         </LI>
       </UL>
</body></html>
