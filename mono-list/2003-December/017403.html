<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Patch for System.Data.Common.DbDataProvider.cs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:smalinin%40amurnet.ru">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="017394.html">
   <LINK REL="Next"  HREF="017450.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Patch for System.Data.Common.DbDataProvider.cs
   </H1>
    <B>Sergei Malinin
    </B> 
    <A HREF="mailto:smalinin%40amurnet.ru"
       TITLE="[Mono-list] Patch for System.Data.Common.DbDataProvider.cs">smalinin@amurnet.ru
       </A><BR>
    <I>Tue, 23 Dec 2003 19:23:12 +1000</I>
    <P><UL>
        <LI> Previous message: <A HREF="017394.html">[Mono-list] Mono develop !
</A></li>
        <LI> Next message: <A HREF="017450.html">[Mono-list] Patch for System.Data.Common.DbDataProvider.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17403">[ date ]</a>
              <a href="thread.html#17403">[ thread ]</a>
              <a href="subject.html#17403">[ subject ]</a>
              <a href="author.html#17403">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.
--------------000303080806060007060002
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hi All,

I have created the patch for System.Data.Common.DbDataProvider.cs,
based on my problems with Mono implementation.

I found the next problems, when I testing our ADO.NET providers under
the Mono enviroment.

1) 'DbDataProvider' implementaion doesn't properly handle the
'MissingSchemaAction' property, when MissingSchemaAction == 
MissingSchemaAction.AddWithKey
  When I call the DbDataAdapter.Fill(DataSet, string); method, it doesn't properly
  add the primary key information.
  Sample: DataAdapterUpdate1.cs

2) 'DbDataProvider' implementaion doesn't properly handle the 
DbDataAdapter.Update(DataSet, string);
This method doesn't properly call DataRow.AcceptChanges(), when CommandBuilder 
is used.
  Sample: CmdBuilder1.cs

3) The method DbDataProvider.FillSchema(DataSet, SchemaType.Source, string);
doesn't properly fill information about the primary keys.
   Sample: DbDataAdapterFillSchema1.cs

All samples works without any problem under the MS.NET Framework.
For recreating of my samples, you can use the our OpenLink ADO.NET provider
for MS SQL Server:
provider =&gt;  <A HREF="http://download.openlinksw.com/uda/open51/ntl5nsql.zip">http://download.openlinksw.com/uda/open51/ntl5nsql.zip</A>
documentation=&gt; <A HREF="http://download.openlinksw.com/uda/open51/opldocu_lt.taz">http://download.openlinksw.com/uda/open51/opldocu_lt.taz</A>

The sql script for table creation:
  create_table.sql

Samples:
   DataAdapterUpdate1.cs
   CmdBuilder1.cs
   DbDataAdapterFillSchema1.cs

Build script:
   build.bat

All problems, that were described above, were fixed.
The patch is attached also.
patch =&gt;  System.Data.Common.DbDataProvider.diff


-- 
Best Regards,
Sergei Malinin
UDA Product Development
OpenLink Software
Email: 	<A HREF="mailto:smalinin@openlinksw.com">smalinin@openlinksw.com</A>   <A HREF="mailto:smalinin@amurnet.ru">smalinin@amurnet.ru</A>
Web: <A HREF="http://www.openlinksw.com">http://www.openlinksw.com</A>
Universal Data Access &amp; Data Integration Technology Providers

--------------000303080806060007060002
Content-Type: text/plain;
 name=&quot;System.Data.Common.DbDataAdapter.diff&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;System.Data.Common.DbDataAdapter.diff&quot;

? System.Data.Common.DbDataAdapter.diff
Index: DbDataAdapter.cs
===================================================================
RCS file: /mono/mcs/class/System.Data/System.Data.Common/DbDataAdapter.cs,v
retrieving revision 1.35
diff -u -r1.35 DbDataAdapter.cs
--- DbDataAdapter.cs	17 Dec 2003 01:59:11 -0000	1.35
+++ DbDataAdapter.cs	23 Dec 2003 09:44:40 -0000
@@ -362,6 +362,8 @@
 		
 		protected virtual int Fill (DataSet dataSet, int startRecord, int maxRecords, string srcTable, IDbCommand command, CommandBehavior behavior) 
 		{
+			if (MissingSchemaAction == MissingSchemaAction.AddWithKey)
+			    behavior |= CommandBehavior.KeyInfo;
 			CommandBehavior commandBehavior = behavior;
 			if (command.Connection.State == ConnectionState.Closed) {
 				command.Connection.Open ();
@@ -516,8 +518,7 @@
 				// generate DataSetColumnName from DataTableMapping, if any
 				string dsColumnName = realSourceColumnName;
 				DataTableMapping tableMapping = null;
-				if (schemaType == SchemaType.Mapped)
-					tableMapping = DataTableMappingCollection.GetTableMappingBySchemaAction (TableMappings, table.TableName, table.TableName, MissingMappingAction); 
+				tableMapping = DataTableMappingCollection.GetTableMappingBySchemaAction (TableMappings, table.TableName, table.TableName, MissingMappingAction); 
 				if (tableMapping != null) 
 				{
 					
@@ -552,7 +553,7 @@
 				}
 				readerIndex++;
 			}
-			if (MissingSchemaAction == MissingSchemaAction.AddWithKey &amp;&amp; primaryKey.Count &gt; 0)
+			if (primaryKey.Count &gt; 0)
 				table.PrimaryKey = (DataColumn[])(primaryKey.ToArray(typeof (DataColumn)));
 
 			return mapping;
@@ -697,7 +698,6 @@
 
 						parameter.Value = row [dsColumnName, rowVersion];
 					}
-					row.AcceptChanges ();
 				}
 
 				if (command.Connection.State == ConnectionState.Closed) 
@@ -711,6 +711,7 @@
 						throw new DBConcurrencyException(&quot;Concurrency violation: the &quot; + commandName +&quot;Command affected 0 records.&quot;);
 					updateCount += tmp;
 					OnRowUpdated (CreateRowUpdatedEvent (row, command, statementType, tableMapping));
+					row.AcceptChanges ();
 				}
 				catch (Exception e)
 				{

--------------000303080806060007060002
Content-Type: text/plain;
 name=&quot;CmdBuilder1.cs&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;CmdBuilder1.cs&quot;

namespace Tests
{

using System;
using System.Data;
using System.Data.Common;
using System.Diagnostics;
using SQLServer = OpenLink.Data.SQLServer;

public class CmdBuilder1
{
  static string connStr = &quot;SVT=SQLServer2000;DATABASE=pubs;UID=sa;Server=pcwin;PWD=;&quot;;

  public static void Main()
  {
    CmdBuilder1 myCmdBuilder1 = new CmdBuilder1();
    myCmdBuilder1.Run();
  }

  public void Run()
  {
      IDbConnection myConnection;
      DbDataAdapter myOPLDataAdapter;
      DbDataAdapter myOPLDataAdapter1;
      System.ComponentModel.Component myCommandBuilder; 

      myConnection = new SQLServer.OPLConnection (connStr);
      myOPLDataAdapter = new SQLServer.OPLDataAdapter 
            (&quot;select * from UCSCustomers&quot;, (SQLServer.OPLConnection) myConnection);
      myOPLDataAdapter1 = new SQLServer.OPLDataAdapter
            (&quot;select * from UCSOrders&quot;, (SQLServer.OPLConnection) myConnection);

      // Create command builder. 
      // This line automatically generates the update commands for you, so you
      // don't have to provide or create your own.
      myCommandBuilder 
	    = new SQLServer.OPLCommandBuilder ((SQLServer.OPLDataAdapter)myOPLDataAdapter);

    // Restore database to it's original condition so test app will work 
    // correctly.
    Cleanup();

    try
    {
      DataSet myDataSet = new DataSet();
      DataRow myDataRow;

      // Set the MissingSchemaAction property to AddWithKey because Fill 
      // will not cause primary key &amp; unique key information to be retrieved
      // unless AddWithKey is specified.
      myOPLDataAdapter.MissingSchemaAction = MissingSchemaAction.AddWithKey;
      myOPLDataAdapter1.MissingSchemaAction = MissingSchemaAction.AddWithKey;

      myOPLDataAdapter.Fill(myDataSet,&quot;Customers&quot;);
      Console.WriteLine(&quot;Loaded data from Customers table into dataset.&quot;);

      myOPLDataAdapter1.Fill(myDataSet,&quot;Orders&quot;);
      Console.WriteLine(&quot;Loaded data from Orders table into dataset.&quot;);

      // Add relation
      myDataSet.Relations.Add(&quot;CustOrders&quot;,
      myDataSet.Tables[&quot;Customers&quot;].Columns[&quot;CustomerID&quot;],
      myDataSet.Tables[&quot;Orders&quot;].Columns[&quot;CustomerID&quot;]);


      // Edit row value
      myDataSet.Tables[&quot;Customers&quot;].Rows[0][&quot;ContactName&quot;]=&quot;Peach&quot;;

      // Add row
      myDataRow = myDataSet.Tables[&quot;Customers&quot;].NewRow();
      myDataRow[&quot;CustomerID&quot;] =&quot;NewID&quot;;
      myDataRow[&quot;ContactName&quot;] = &quot;New Name&quot;;
      myDataRow[&quot;CompanyName&quot;] = &quot;New Company Name&quot;;
      myDataSet.Tables[&quot;Customers&quot;].Rows.Add(myDataRow);
      Console.WriteLine(
	  	  &quot;Inserted new row (CustomerID='NewID') into &quot; + 
		  &quot;Dataset table 'Customers'.&quot;);

      // Add row
      myDataRow = myDataSet.Tables[&quot;Customers&quot;].NewRow();
      myDataRow[&quot;CustomerID&quot;] =&quot;NUID2&quot;;
      myDataRow[&quot;ContactName&quot;] = &quot;New Name2&quot;;
      myDataRow[&quot;CompanyName&quot;] = &quot;New Company Name2&quot;;
      myDataSet.Tables[&quot;Customers&quot;].Rows.Add(myDataRow);
      Console.WriteLine(
	  	  &quot;Inserted new row (CustomerID='NUID2') into &quot; + 
		  &quot;Dataset table 'Customers'.&quot;);


      // Update database with OPLDataAdapter
      myOPLDataAdapter.Update(myDataSet, &quot;Customers&quot;);
      Console.WriteLine(&quot;Propagated DataAdapter changes to database.&quot;);

      // Delete row
      DataRow[] myDataRows = 
	      myDataSet.Tables[&quot;Customers&quot;].Select(&quot;CustomerID='NUID2'&quot;);
	  myDataRows[0].Delete();
      Console.WriteLine(
	  	  &quot;Deleted row (CustomerID='NUID2') from &quot; + 
		  &quot;Dataset table 'Customers'.&quot;);

      // Propagate row deletion to database with OPLDataAdapter
      myOPLDataAdapter.Update(myDataSet, &quot;Customers&quot;);
      Console.WriteLine(&quot;Propagated DataAdapter deletion to database.&quot;);

      Console.WriteLine(&quot;DataSet processing has completed successfully!&quot;);
    }
    catch(Exception e)
    {
      Console.WriteLine(e.ToString());
    }
  }

  public void Cleanup()
  {
    IDbConnection myConnection;

    myConnection = new SQLServer.OPLConnection (connStr);

    try
    {
      myConnection.Open();
      IDbCommand CleanupCommand = myConnection.CreateCommand ();
      CleanupCommand.CommandText = 
	  &quot;DELETE FROM UCSCustomers WHERE CustomerID = 'NewID'&quot;;
      CleanupCommand.ExecuteNonQuery();
    }
    catch (Exception e)
    {
      Console.WriteLine(e.ToString());
    }
    finally
    {
      myConnection.Close();
    }
  }
}

}

--------------000303080806060007060002
Content-Type: text/plain;
 name=&quot;DataAdapterFillSchema1.cs&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;DataAdapterFillSchema1.cs&quot;

namespace Tests
{

using System;
using System.Data;
using System.Data.Common;
using SQLServer = OpenLink.Data.SQLServer;

public class DataAdapterFillSchema1
{
  static string connStr = &quot;SVT=SQLServer2000;DATABASE=pubs;UID=sa;Server=pcwin;PWD=;&quot;;

  public static void Main ()
  {
    DataAdapterFillSchema1 myDataAdapter = new DataAdapterFillSchema1 ();
    myDataAdapter.Run ();
  }

  public void Run ()
  {
    IDbConnection m_connection;

    m_connection = new SQLServer.OPLConnection (connStr);

    IDbCommand selectCmd = m_connection.CreateCommand ();
    selectCmd.CommandText = &quot;SELECT CustomerID, CompanyName FROM UCSCustomers&quot;;
    selectCmd.CommandTimeout = 30;

    DbDataAdapter custDA;

    custDA = new SQLServer.OPLDataAdapter ((SQLServer.OPLCommand) selectCmd);

    DataSet custDS = new DataSet();

    // The Fill method does not add schema information to the DataSet by default. 
    // To populate a DataSet with existing primary key constraint information from
    // a data source, you can either call the FillSchema method of the DataAdapter, 
    // or set the MissingSchemaAction property of the DataAdapter to AddWithKey 
    // before calling Fill.

    // SchemaType.Source =&gt; Ignore any table mappings on the DataAdapter. 
    // Configure the DataSet using the incoming schema without applying 
    // any transformations

    // The FillSchema method retrieves the schema from the data source using the 
    // SelectCommand. It adds a DataTable to the destination DataSet, adds columns 
    // to the DataColumnCollection of the DataTable, and configures the following DataColumn 
    // properties:
    //	 AllowDBNull, MaxLength, ReadOnly, Unique.
    //   FillSchema also configures the PrimaryKey and Constraints properties.

    DataTable[] rDataTbl;

    rDataTbl = custDA.FillSchema (custDS, SchemaType.Source, &quot;Customers&quot;);

    foreach (DataTable dt in rDataTbl)
    {
	Console.WriteLine (&quot;Table name: {0}&quot;, dt.TableName);

	// Get details of any primary keys
	DataColumn[] primaryKeyCols = dt.PrimaryKey;
	if (1 != primaryKeyCols.Length)
 	  Console.WriteLine(&quot;FAIL: # of columns comprising primary key wrong {0} != {1}&quot;,
		1, primaryKeyCols.Length);

	Console.WriteLine (&quot;Primary key details:&quot;);
	Console.WriteLine(&quot;\tNo. of columns comprising key = &quot; + primaryKeyCols.Length);
	Console.WriteLine(&quot;\tComponent columns of primary key:&quot;);
	for (int i = 0; i &lt; primaryKeyCols.Length; i++)
	{
		// Allow for DBMSes which don't support mixed-case identifiers.
		if (String.Compare(&quot;CUSTOMERID&quot;, primaryKeyCols[i].ColumnName.ToUpper()) != 0)
		  Console.WriteLine(&quot;FAIL: Primary key wrong {0} != {1}&quot;,
			&quot;CUSTOMERID&quot;, primaryKeyCols[i].ColumnName.ToUpper());
		Console.WriteLine(&quot;\t\t&quot; + primaryKeyCols[i].ColumnName + &quot;  (&quot; + 
			primaryKeyCols[i].DataType + &quot;)&quot;);
	}
    }
  }

}

}

--------------000303080806060007060002
Content-Type: text/plain;
 name=&quot;DataAdapterUpdate1.cs&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;DataAdapterUpdate1.cs&quot;

namespace Tests
{

using System;
using System.Data;
using System.Data.Common;
using SQLServer = OpenLink.Data.SQLServer;

public class DataAdapterUpdate1
{
  static string connStr = &quot;SVT=SQLServer2000;DATABASE=pubs;UID=sa;Server=pcwin;PWD=;&quot;;

  public static void Main ()
  {
    DataAdapterUpdate1 myDataAdapter = new DataAdapterUpdate1 ();
    myDataAdapter.Run ();
  }

  public void Run ()
  {
    IDbConnection myConnection;
    DbDataAdapter myDataAdapter;

    myConnection = new SQLServer.OPLConnection (connStr);
    myDataAdapter = new SQLServer.OPLDataAdapter(
    	    &quot;Select * from UCSRegions&quot;, (SQLServer.OPLConnection) myConnection);

    IDataParameter workParam = null;

    // Restore database to it's original condition so sample will work correctly.
    Cleanup ();

    // Build the insert Command
    ((IDbDataAdapter)myDataAdapter).InsertCommand = myConnection.CreateCommand ();
    ((IDbDataAdapter)myDataAdapter).InsertCommand.CommandText = &quot;insert into UCSRegions (RegionID, RegionDescription) VALUES (?, ?)&quot;;

    workParam = ((IDbDataAdapter)myDataAdapter).InsertCommand.CreateParameter ();
    workParam.ParameterName = &quot;RegionID&quot;;
    workParam.DbType = DbType.Int32;
    workParam.SourceColumn = &quot;RegionID&quot;;
    workParam.SourceVersion = DataRowVersion.Current;
    ((IDbDataAdapter)myDataAdapter).InsertCommand.Parameters.Add(workParam); 


    workParam = ((IDbDataAdapter)myDataAdapter).InsertCommand.CreateParameter ();
    workParam.ParameterName = &quot;RegionDescription&quot;;
    workParam.DbType = DbType.String;
    workParam.SourceColumn = &quot;RegionDescription&quot;;
    workParam.SourceVersion = DataRowVersion.Current;
    ((IDbDataAdapter)myDataAdapter).InsertCommand.Parameters.Add (workParam);

    // Build the update command
    ((IDbDataAdapter)myDataAdapter).UpdateCommand = myConnection.CreateCommand ();
    ((IDbDataAdapter)myDataAdapter).UpdateCommand.CommandText = &quot;update UCSRegions set RegionDescription = ? WHERE RegionID = ?&quot; ; 

    workParam = ((IDbDataAdapter)myDataAdapter).UpdateCommand.CreateParameter ();
    workParam.ParameterName = &quot;RegionDescription&quot;;
    workParam.DbType = DbType.String;
    workParam.SourceVersion = DataRowVersion.Current;
    workParam.SourceColumn = &quot;RegionDescription&quot;;
    ((IDbDataAdapter)myDataAdapter).UpdateCommand.Parameters.Add (workParam);
		
    workParam = ((IDbDataAdapter)myDataAdapter).UpdateCommand.CreateParameter ();
    workParam.ParameterName = &quot;RegionID&quot;;
    workParam.DbType = DbType.Int32;
    workParam.SourceColumn = &quot;RegionID&quot;;
    workParam.SourceVersion = DataRowVersion.Original;
    ((IDbDataAdapter)myDataAdapter).UpdateCommand.Parameters.Add (workParam);

    DataSet myDataSet = new DataSet();

    // Set the MissingSchemaAction property to AddWithKey because Fill will
    // not cause primary key &amp; unique key information to be retrieved unless
    // AddWithKey is specified.
    myDataAdapter.MissingSchemaAction = MissingSchemaAction.AddWithKey;
    myDataAdapter.Fill (myDataSet, &quot;UCSRegions&quot;);

    DataRow myDataRow1 = myDataSet.Tables[&quot;UCSRegions&quot;].Rows.Find (2);
    myDataRow1[1] = &quot;Changed this region desc&quot;;

    DataRow myDataRow2 = myDataSet.Tables[&quot;UCSRegions&quot;].NewRow ();
    myDataRow2[0] = 901;
    myDataRow2[1] = &quot;A new region&quot;;
    myDataSet.Tables[&quot;UCSRegions&quot;].Rows.Add (myDataRow2);

    try
    {
      myDataAdapter.Update(myDataSet, &quot;UCSRegions&quot;);
      Console.Write(&quot;Updating DataSet succeeded!&quot;);
    }
    catch(Exception e)
    {
      Console.Write(e.ToString());
    }
  }

  public void Cleanup()
  {
    IDbConnection myConnection;

    myConnection = new SQLServer.OPLConnection (connStr);

    try
    {
      // Restore database to it's original condition so test app will work 
      // correctly.
      myConnection.Open ();
      IDbCommand CleanupCommand = myConnection.CreateCommand ();
      CleanupCommand.CommandText = 
	&quot;DELETE FROM UCSRegions WHERE RegionID = 901&quot;;
      CleanupCommand.ExecuteNonQuery();
    }
    catch (Exception e)
    {
      Console.Write(e.ToString());
    }
    finally
    {
      myConnection.Close();
    }
  }
}

}

--------------000303080806060007060002
Content-Type: text/plain;
 name=&quot;create_table.sql&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;create_table.sql&quot;

if exists (select * from sysobjects where id = object_id('dbo.UCSCustomers') and sysstat &amp; 0xf = 3)
	drop table &quot;dbo&quot;.&quot;UCSCustomers&quot;

CREATE TABLE &quot;UCSCustomers&quot; (
	&quot;CustomerID&quot; nchar (5) NOT NULL ,
	&quot;CompanyName&quot; nvarchar (40) NOT NULL ,
	&quot;ContactName&quot; nvarchar (30) NULL ,
	&quot;ContactTitle&quot; nvarchar (30) NULL ,
	&quot;Address&quot; nvarchar (60) NULL ,
	&quot;City&quot; nvarchar (15) NULL ,
	&quot;Region&quot; nvarchar (15) NULL ,
	&quot;PostalCode&quot; nvarchar (10) NULL ,
	&quot;Country&quot; nvarchar (15) NULL ,
	&quot;Phone&quot; nvarchar (24) NULL ,
	&quot;Fax&quot; nvarchar (24) NULL ,
	CONSTRAINT &quot;PK_Customers&quot; PRIMARY KEY  CLUSTERED 
	(
		&quot;CustomerID&quot;
	)
)
GO


INSERT UCSCustomers VALUES('ALFKI','Alfreds Futterkiste','Maria Anders','Sales Representative','Obere Str. 57','Berlin',NULL,'12209','Germany','030-0074321','030-0076545')
INSERT UCSCustomers VALUES('ANATR','Ana Trujillo Emparedados y helados','Ana Trujillo','Owner','Avda. de la Constitucion 2222','Mexico D.F.',NULL,'05021','Mexico','(5) 555-4729','(5) 555-3745')
INSERT UCSCustomers VALUES('VINET','Vins et alcools Chevalier','Paul Henriot','Accounting Manager','59 rue de l''Abbaye','Reims',NULL,'51100','France','26.47.15.10','26.47.15.11')
INSERT UCSCustomers VALUES('TOMSP','Toms Spezialitaten','Karin Josephs','Marketing Manager','Luisenstr. 48','Munster',NULL,'44087','Germany','0251-031259','0251-035695')
INSERT UCSCustomers VALUES('HANAR','Hanari Carnes','Mario Pontes','Accounting Manager','Rua do Paco, 67','Rio de Janeiro','RJ','05454-876','Brazil','(21) 555-0091','(21) 555-8765')
INSERT UCSCustomers VALUES('VICTE','Victuailles en stock','Mary Saveley','Sales Agent','2, rue du Commerce','Lyon',NULL,'69004','France','78.32.54.86','78.32.54.87')
INSERT UCSCustomers VALUES('SUPRD','Supremes delices','Pascale Cartrain','Accounting Manager','Boulevard Tirou, 255','Charleroi',NULL,'B-6000','Belgium','(071) 23 67 22 20','(071) 23 67 22 21')
GO




if exists (select * from sysobjects where id = object_id('dbo.UCSOrders') and sysstat &amp; 0xf = 3)
	drop table &quot;dbo&quot;.&quot;UCSOrders&quot;

CREATE TABLE &quot;UCSOrders&quot; (
	&quot;OrderID&quot; &quot;int&quot; NOT NULL ,
	&quot;CustomerID&quot; nchar (5) NULL ,
	&quot;EmployeeID&quot; &quot;int&quot; NULL ,
	&quot;OrderDate&quot; &quot;datetime&quot; NULL ,
	&quot;RequiredDate&quot; &quot;datetime&quot; NULL ,
	&quot;ShippedDate&quot; &quot;datetime&quot; NULL ,
	&quot;ShipVia&quot; &quot;int&quot; NULL ,
	&quot;Freight&quot; &quot;money&quot; NULL ,
	&quot;ShipName&quot; nvarchar (40) NULL ,
	&quot;ShipAddress&quot; nvarchar (60) NULL ,
	&quot;ShipCity&quot; nvarchar (15) NULL ,
	&quot;ShipRegion&quot; nvarchar (15) NULL ,
	&quot;ShipPostalCode&quot; nvarchar (10) NULL ,
	&quot;ShipCountry&quot; nvarchar (15) NULL ,
	CONSTRAINT &quot;PK_Orders&quot; PRIMARY KEY  CLUSTERED 
	(
		&quot;OrderID&quot;
	),
)
GO




INSERT UCSOrders VALUES(10248, 'VINET', 5, '4/7/1996',  '8/1/1996',  '7/16/1996', 3, 32.38, 'Vins et alcools Chevalier', '59 rue de l'Abbaye', 'Reims', null, '51100', 'France')
INSERT UCSOrders VALUES(10274, 'VINET', 6, '8/6/1996',  '9/3/1996',  '8/16/1996', 1, 6.01, 'Vins et alcools Chevalier', '59 rue de l'Abbaye', 'Reims', null, '51100', 'France')
INSERT UCSOrders VALUES(10249, 'TOMSP', 6, '7/5/1996',  '8/16/1996', '7/10/1996', 1, 11.61, 'Toms Spezialitaten', 'Luisenstr. 48', 'Munster', null, '44087', 'Germany')
INSERT UCSOrders VALUES(10438, 'TOMSP', 3, '2/6/1997',  '3/6/1997',  '2/14/1997', 2, 8.24, 'Toms Spezialitaten', 'Luisenstr. 48', 'Munster', null, '44087', 'Germany')
INSERT UCSOrders VALUES(10446, 'TOMSP', 6, '2/14/1996', '3/14/1996', '2/19/1996', 1, 14.68, 'Toms Spezialitaten', 'Luisenstr. 48', 'Munster', null, '44087', 'Germany')
INSERT UCSOrders VALUES(10250, 'HANAR', 4, '7/8/1996',  '8/5/1996',  '7/12/1996', 2, 65.83, 'Hanari Carnes', 'Rua do Paco, 67', 'Rio de Janeiro', 'RJ', '05454-876', 'Brazil')
INSERT UCSOrders VALUES(10251, 'VICTE', 3, '7/8/1996',  '8/5/1996',  '7/15/1996', 1, 41.34, 'Victuailles en stock', '2, rue du Commerce', 'Lyon', null, '69004', 'France')
INSERT UCSOrders VALUES(10334, 'VICTE', 8, '10/21/1996','11/18/1996','10/28/1996', 2, 8.56, 'Victuailles en stock', '2, rue du Commerce', 'Lyon', null, '69004', 'France')
INSERT UCSOrders VALUES(10252, 'SUPRD', 4, '7/9/1996',  '8/6/1996',  '7/11/1996', 2, 51.30, 'Supremes delices', 'Boulevard Triou, 255', 'Charleroi', null, 'B-6000', 'Belgium')
INSERT UCSOrders VALUES(10643, 'ALFKI', 6, '8/25/1997', '9/22/1997', '9/2/1997', 1, 29.46, 'Alfreds Futterkiste', 'Obere Str. 57', 'Berlin', null, '12208', 'Germany')
INSERT UCSOrders VALUES(10692, 'ALFKI', 4, '10/3/1997', '10/31/1997','10/13/1997', 2, 61.02, 'Alfreds Futterkiste', 'Obere Str. 57', 'Berlin', null, '12208', 'Germany')
INSERT UCSOrders VALUES(10702, 'ALFKI', 4, '10/13/1997','11/24/1997','10/21/1997', 1, 23.94, 'Alfreds Futterkiste', 'Obere Str. 57', 'Berlin', null, '12208', 'Germany')
INSERT UCSOrders VALUES(10835, 'ALFKI', 1, '1/15/1998', '2/12/1998', '1/21/1998', 3, 69.53, 'Alfreds Futterkiste', 'Obere Str. 57', 'Berlin', null, '12208', 'Germany')
INSERT UCSOrders VALUES(10952, 'ALFKI', 1, '3/16/1998', '4/27/1998', '3/24/1998', 1, 40.42, 'Alfreds Futterkiste', 'Obere Str. 57', 'Berlin', null, '12208', 'Germany')
INSERT UCSOrders VALUES(11011, 'ALFKI', 3, '4/9/1998',  '5/7/1998',  '4/13/1998', 1, 1.21, 'Alfreds Futterkiste', 'Obere Str. 57', 'Berlin', null, '12208', 'Germany')
INSERT UCSOrders VALUES(10926, 'ANATR', 4, '3/4/1998',  '4/1/1998',  '3/11/1998', 3, 39.92, 'Ana Trujillo Emparedados y ...', 'Avda. de la Constitucion 2222', 'Mexico D.F.', null, '05021', 'Mexico')
INSERT UCSOrders VALUES(10759, 'ANATR', 3, '11/28/1997','12/26/1997','12/12/1997', 3, 11.99, 'Ana Trujillo Emparedados y ...', 'Avda. de la Constitucion 2222', 'Mexico D.F.', null, '05021', 'Mexico')
INSERT UCSOrders VALUES(10625, 'ANATR', 3, '8/8/1997',  '9/5/1997',  '8/14/1997', 1, 43.90, 'Ana Trujillo Emparedados y ...', 'Avda. de la Constitucion 2222', 'Mexico D.F.', null, '05021', 'Mexico')
INSERT UCSOrders VALUES(10308, 'ANATR', 7, '9/18/1996', '10/16/1996','9/24/1996', 3, 1.61, 'Ana Trujillo Emparedados y ...', 'Avda. de la Constitucion 2222', 'Mexico D.F.', null, '05021', 'Mexico')
GO



if exists (select * from sysobjects where id = object_id('dbo.UCSRegions') and sysstat &amp; 0xf = 3)
	drop table &quot;dbo&quot;.&quot;UCSRegions&quot;

CREATE TABLE &quot;UCSRegions&quot; (
	&quot;RegionID&quot; &quot;int&quot; NOT NULL ,
	&quot;RegionDescription&quot; nvarchar (50) NULL ,
	CONSTRAINT &quot;PK_Regions&quot; PRIMARY KEY  CLUSTERED 
	(
		&quot;RegionID&quot;
	),
)
GO


INSERT INTO UCSRegions VALUES(1, 'Eastern')
INSERT INTO UCSRegions VALUES(2, 'Western')
INSERT INTO UCSRegions VALUES(3, 'Northern')
INSERT INTO UCSRegions VALUES(4, 'Southern')
INSERT INTO UCSRegions VALUES(901, 'Alaskan wastelands')
INSERT INTO UCSRegions VALUES(100, 'MidWestern')
INSERT INTO UCSRegions VALUES(101, 'MidEastern')
GO

--------------000303080806060007060002
Content-Type: text/plain;
 name=&quot;build.bat&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;build.bat&quot;

csc /nologo /debug+ /d:DEBUG  /t:exe /R:System.dll /R:System.Data.dll /R:OpenLink.Data.SQLServer.dll /out:./CmdBuilder1.exe CmdBuilder1.cs 
csc /nologo /debug+ /d:DEBUG  /t:exe /R:System.dll /R:System.Data.dll /R:OpenLink.Data.SQLServer.dll /out:./DataAdapterUpdate1.exe DataAdapterUpdate1.cs 
csc /nologo /debug+ /d:DEBUG  /t:exe /R:System.dll /R:System.Data.dll /R:OpenLink.Data.SQLServer.dll /out:./DataAdapterFillSchema1.exe DataAdapterFillSchema1.cs 

--------------000303080806060007060002--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="017394.html">[Mono-list] Mono develop !
</A></li>
	<LI> Next message: <A HREF="017450.html">[Mono-list] Patch for System.Data.Common.DbDataProvider.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17403">[ date ]</a>
              <a href="thread.html#17403">[ thread ]</a>
              <a href="subject.html#17403">[ subject ]</a>
              <a href="author.html#17403">[ author ]</a>
         </LI>
       </UL>
</body></html>
