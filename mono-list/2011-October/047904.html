<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] WCF MessageContract soap namespace serialization issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20WCF%20MessageContract%20soap%20namespace%20serialization%20issue&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="047903.html">
   <LINK REL="Next"  HREF="047907.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] WCF MessageContract soap namespace serialization issue</H1>
    <B>Marc Bettex</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20WCF%20MessageContract%20soap%20namespace%20serialization%20issue&In-Reply-To="
       TITLE="[Mono-list] WCF MessageContract soap namespace serialization issue">bettex at epsitec.ch
       </A><BR>
    <I>Thu Oct 27 09:24:09 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="047903.html">[Mono-list] FW: https mutual athentication problem on Linux
</A></li>
        <LI>Next message: <A HREF="047907.html">[Mono-list] System.Diagnostics.Debug.Assert()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47904">[ date ]</a>
              <a href="thread.html#47904">[ thread ]</a>
              <a href="subject.html#47904">[ subject ]</a>
              <a href="author.html#47904">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am porting a windows application using WCF running on .Net so that it can
run on Mono (2.10.6) on windows and I have a problem with the serialization
of the soap messages. I use message contracts with the xml serializer and
the c# code for the objects is generated by the svcutil.exe program from
microsoft (from a wsdl and xsd files given by a third party).

My program works fine when running on .Net but when I run it on Mono, the
fields of the class tagged with [MessageContract] that are tagged with
[MessageBodyMember] are serialized with the xml namespace of the enclosing
class and not with the one declared in the [MessageBodyMember] attribute of
the field. Here is the code that I think is relevant, but the file generated
by svcutil is something like 12000 lines long and I might have missed
something.

The part with the message contract is this :



[MessageContract (WrapperName=&quot;DeclareSalary&quot;,
WrapperNamespace=&quot;<A HREF="http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationServiceTypes&quot;,">http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationServiceTypes&quot;,</A>
IsWrapped=true)]
public partial class DeclareSalaryRequest
{

	[MessageBodyMember
(Namespace=&quot;<A HREF="http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationContainer&quot;,">http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationContainer&quot;,</A>
Order=0)]
	public RequestContextType RequestContext;

	[... Other field decorated as the previous one ...]


}


The part with the relevant RequestContextType is this :


[Serializable]
[XmlType
(Namespace=&quot;<A HREF="http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationContainer&quot;">http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationContainer&quot;</A>)]
public partial class RequestContextType
{

	[XmlElement (Order=0)]
	public UserAgentType UserAgent
	{
		get
		{
			return this.userAgentField;
		}
		set
		{
			this.userAgentField = value;
		}
	}

	[... Other properties decorated as the previous one  ...]

}


The part with the relevant UserAgentType is this :


[Serializable]
[XmlType
(Namespace=&quot;<A HREF="http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationContainer&quot;">http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationContainer&quot;</A>)]
public partial class UserAgentType
{

	[...]

}

The result of the serialization on .Net (which is correct) is this :


&lt;DeclareSalary
xmlns=&quot;<A HREF="http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationServiceTypes&quot;">http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationServiceTypes&quot;</A>&gt;
  &lt;RequestContext
xmlns=&quot;<A HREF="http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationContainer&quot;">http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationContainer&quot;</A>&gt;
    &lt;UserAgent&gt;
      [...]
    &lt;/UserAgent&gt;
  &lt;/RequestContext&gt;
  [...]
&lt;/DeclareSalary&gt;


The result of the serialization on Mono (which is incorrect) is this :


&lt;DeclareSalary xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance&quot;">http://www.w3.org/2001/XMLSchema-instance&quot;</A>
xmlns:xsd=&quot;<A HREF="http://www.w3.org/2001/XMLSchema&quot;">http://www.w3.org/2001/XMLSchema&quot;</A>
xmlns=&quot;<A HREF="http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationServiceTypes&quot;">http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationServiceTypes&quot;</A>&gt;
  &lt;RequestContext&gt;
    &lt;UserAgent
xmlns=&quot;<A HREF="http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationContainer&quot;">http://www.swissdec.ch/schema/sd/20090803/SalaryDeclarationContainer&quot;</A>&gt;
      [...]
    &lt;/UserAgent&gt;
  &lt;/RequestContext&gt;
  [...]
&lt;/DeclareSalary&gt;


As you can see, the &lt;RequestContext&gt; tag should be in the namespace
[...]SalaryDeclarationContainer as given in the MessageBodyMember and in the
XmlType attributes. But on Mono it is in the namespace of the enclosing
element ([...]SalaryDeclarationServiceTypes) and its children is in the
right namespace. There are other elements at the same level as
&lt;RequestContext&gt; and they all have the exact same problem, they are in the
namespace of their enclosing element and their children are in the correct
namespace.

Any help on this issue would be greatly appreciated. I'm not sure if this is
a bug in Mono or if I'm using a feature that is not supported in Mono or if
I'm doing something wrong. Thanks in advance.

--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/WCF-MessageContract-soap-namespace-serialization-issue-tp3944420p3944420.html">http://mono.1490590.n4.nabble.com/WCF-MessageContract-soap-namespace-serialization-issue-tp3944420p3944420.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="047903.html">[Mono-list] FW: https mutual athentication problem on Linux
</A></li>
	<LI>Next message: <A HREF="047907.html">[Mono-list] System.Diagnostics.Debug.Assert()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47904">[ date ]</a>
              <a href="thread.html#47904">[ thread ]</a>
              <a href="subject.html#47904">[ subject ]</a>
              <a href="author.html#47904">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
