<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Debian Package + LibApache Mod_mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:sballard%40netreach.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="017865.html">
   <LINK REL="Next"  HREF="017873.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Debian Package + LibApache Mod_mono
   </H1>
    <B>Stuart Ballard
    </B> 
    <A HREF="mailto:sballard%40netreach.com"
       TITLE="[Mono-list] Debian Package + LibApache Mod_mono">sballard@netreach.com
       </A><BR>
    <I>Thu, 22 Jan 2004 15:38:46 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="017865.html">[Mono-list] Debian Package + LibApache Mod_mono
</A></li>
        <LI> Next message: <A HREF="017873.html">[Mono-list] Debian Package + LibApache Mod_mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17872">[ date ]</a>
              <a href="thread.html#17872">[ thread ]</a>
              <a href="subject.html#17872">[ subject ]</a>
              <a href="author.html#17872">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.
--------------050509070402070809080703
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Pablo Fischer wrote:
&gt;<i> Any bugs, please mail me :)
</I>
The debian packages at present seem to not include an /etc/init.d script 
for starting mod-mono-server.exe, so I've tried writing one myself (via 
shameless copy-n-pasting from another one on my system), and I'm not 
having much luck so far. Maybe I shouldn't be trying to run the xsp 
process as www-data, but I can't think of any better user to use. (btw, 
I did make sure that www-data could read and write the root folder I 
specified, /home/sballard/unix-ivory - obviously, that's not a good 
location to use in general, but I wanted to get something working before 
picking the perfect location).

I get the following error:

Starting XSP: mod-mono-serverListening on: /tmp/mod_mono_server
Root directory: /home/sballard/unix-ivory

Unhandled Exception: System.UnauthorizedAccessException: Access to the 
path &quot;&quot; is denied.

Server stack trace:
in &lt;0x00226&gt; System.IO.File:Delete (string)
in &lt;0x000af&gt; Mono.ASPNET.XSPApplicationHost:Start ()
in (unmanaged) /usr/lib/libmono.so.0 [0x40056adc]
in (unmanaged) /usr/lib/libmono.so.0(mono_runtime_invoke+0x35) [0x400a8dc2]
in (unmanaged) /usr/lib/libmono.so.0(mono_runtime_invoke_array+0x21b) 
[0x400a9d35]
in (unmanaged) /usr/lib/libmono.so.0 [0x400b0791]
in &lt;0x00193&gt; 
System.Runtime.Remoting.RemotingServices:InternalExecuteMessage 
(System.MarshalByRefObject,System.Runtime.Remoting.Messaging.IMethodCallMessage)


Exception rethrown at [0]:

in &lt;0x001da&gt; System.Runtime.Remoting.Proxies.RealProxy:PrivateInvoke 
(System.Runtime.Remoting.Proxies.RealProxy,System.Runtime.Remoting.Messaging.IMessage,System.Exception&amp;,object[]&amp;)
in (unmanaged) (wrapper remoting-invoke) 
Mono.ASPNET.XSPApplicationHost:Start ()
in &lt;0x00004&gt; (wrapper remoting-invoke) 
Mono.ASPNET.XSPApplicationHost:Start ()
in &lt;0x0002f&gt; (wrapper remoting-invoke-with-check) 
Mono.ASPNET.XSPApplicationHost:Start ()
in &lt;0x00344&gt; Mono.ASPNET.Server:Main (string[])

.

I've attached the non-working init.d script in case anyone's interested. 
I had to create a /var/www/.wapi directory that was chowned to www-data 
in order to get past another error caused by the fact that www-data 
doesn't have write permissions to its own home directory. Can someone 
explain why xsp doesn't use /tmp for these files?

Thanks in advance for any suggestions,
Stuart.

-- 
Stuart Ballard, Senior Web Developer
NetReach, Inc.
(215) 283-2300, ext. 126
<A HREF="http://www.netreach.com/">http://www.netreach.com/</A>

--------------050509070402070809080703
Content-Type: text/plain;
 name=&quot;local-xsp&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;local-xsp&quot;

#! /bin/sh

PATH=/sbin:/bin

test -f /usr/bin/mod-mono-server.exe || exit 0

case &quot;$1&quot; in
	start)
		echo -n &quot;Starting XSP: mod-mono-server&quot;
  		start-stop-daemon --start --quiet --chuid www-data --user www-data --group www-data --chdir /home/sballard/unix-ivory --exec /usr/bin/mod-mono-server.exe -- --applications /:. --nonstop
		echo &quot;.&quot;
  		;;
	stop)
		echo -n &quot;Stopping XSP: mod-mono-server&quot;
  		start-stop-daemon --stop --quiet --chuid www-data --user www-data --group www-data --exec /usr/bin/mod-mono-server.exe
		echo &quot;.&quot;
  		;;
	restart|force-reload)
		echo -n &quot;Restarting NTP server: ntpd... &quot;
  		start-stop-daemon --stop --quiet --chuid www-data --user www-data --group www-data --exec /usr/bin/mod-mono-server.exe
  		sleep 2
  		start-stop-daemon --start --quiet --chuid www-data --user www-data --group www-data --chdir /home/sballard/unix-ivory --exec /usr/bin/mod-mono-server.exe -- --applications /:. --nonstop
		echo &quot;done.&quot;
  		;;
	*)
  		echo &quot;Usage: /etc/init.d/local-xsp {start|stop|restart|force-reload}&quot;
  		exit 1
		;;
esac

exit 0

--------------050509070402070809080703--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="017865.html">[Mono-list] Debian Package + LibApache Mod_mono
</A></li>
	<LI> Next message: <A HREF="017873.html">[Mono-list] Debian Package + LibApache Mod_mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17872">[ date ]</a>
              <a href="thread.html#17872">[ thread ]</a>
              <a href="subject.html#17872">[ subject ]</a>
              <a href="author.html#17872">[ author ]</a>
         </LI>
       </UL>
</body></html>
