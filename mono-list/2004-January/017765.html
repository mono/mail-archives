<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] xml bug?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:dave-monolist%40earth.li">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="017759.html">
   <LINK REL="Next"  HREF="017777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] xml bug?
   </H1>
    <B>David Sheldon
    </B> 
    <A HREF="mailto:dave-monolist%40earth.li"
       TITLE="[Mono-list] xml bug?">dave-monolist@earth.li
       </A><BR>
    <I>Mon, 19 Jan 2004 23:13:19 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="017759.html">[Mono-list] xml bug?
</A></li>
        <LI> Next message: <A HREF="017777.html">[Mono-list] xml bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17765">[ date ]</a>
              <a href="thread.html#17765">[ thread ]</a>
              <a href="subject.html#17765">[ subject ]</a>
              <a href="author.html#17765">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Jan 19, 2004 at 09:06:16PM +0100, Daniel Pecos wrote:
&gt;<i> Hi!
</I>&gt;<i> 
</I>&gt;<i> I have found an issue that I don't know if it's an error or it is ok:
</I>&gt;<i> when I add an attribute named &quot;xmlns&quot; to an XmlElement, then all
</I>&gt;<i> childs that were appended to it or those that will be, all have
</I>&gt;<i> the same attribute but without content, and RemoveAttribute (&quot;xmlns&quot;)
</I>&gt;<i> does not work.
</I>

We should have rejected your XML, as you are trying to add more than one
top-level element (document element) to your document. The fact that we
don't do so is a bug. 

Now, as for the xmlns, xmlns is a special attribute, setting 
the xmlns attribute doesn't really do anything for the infoset, and the
b2 element is created in the null namespace. This is why the serialiser 
puts the xmlns=&quot;&quot; on b2, that is so that b2 is in the namespace it was
created in. 

The correct way would be to create the b and b2 elements in the probe
namespace. This way the document you serialise is what you wanted, and
you have done it correctly.

using System;
using System.Xml;

namespace p {
   public class m {
      public static void Main (string [] args) {

         XmlDocument x = new XmlDocument ();
         XmlElement a = x.CreateElement (&quot;a&quot;);
         XmlElement b = x.CreateElement (&quot;b&quot;, &quot;probe&quot;);
         x.AppendChild (a);
         a.AppendChild (b);
         XmlElement b2 = x.CreateElement (&quot;b2&quot;, &quot;probe&quot;);                           
         b.AppendChild (b2);

         Console.WriteLine (x.InnerXml);
      }
   }
}

Interestingly, your code works under MS .NET. I only need to make the
change &quot;a.AppendChild (b);&quot; instead of &quot;x.AppendChild (b);&quot;.

Eno, what do you think we should do about this?

David



-- 
And it should be the law: If you use the word `paradigm' without knowing
what the dictionary says it means, you go to jail.  No exceptions.
		-- David Jones

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="017759.html">[Mono-list] xml bug?
</A></li>
	<LI> Next message: <A HREF="017777.html">[Mono-list] xml bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17765">[ date ]</a>
              <a href="thread.html#17765">[ thread ]</a>
              <a href="subject.html#17765">[ subject ]</a>
              <a href="author.html#17765">[ author ]</a>
         </LI>
       </UL>
</body></html>
