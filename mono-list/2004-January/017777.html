<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] xml bug?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:atsushi%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="017765.html">
   <LINK REL="Next"  HREF="017789.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] xml bug?
   </H1>
    <B>Atsushi Eno
    </B> 
    <A HREF="mailto:atsushi%40ximian.com"
       TITLE="[Mono-list] xml bug?">atsushi@ximian.com
       </A><BR>
    <I>Tue, 20 Jan 2004 15:54:52 +0900</I>
    <P><UL>
        <LI> Previous message: <A HREF="017765.html">[Mono-list] xml bug?
</A></li>
        <LI> Next message: <A HREF="017789.html">[Mono-list] xml bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17777">[ date ]</a>
              <a href="thread.html#17777">[ thread ]</a>
              <a href="subject.html#17777">[ subject ]</a>
              <a href="author.html#17777">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> We should have rejected your XML, as you are trying to add more than one
</I>&gt;<i> top-level element (document element) to your document. The fact that we
</I>&gt;<i> don't do so is a bug. 
</I>
Thanks for the notice. I remember that I added and reverted that check 
because once it was not done by .NET Framework 1.1 beta. Now it looks 
checked again, so I will recover that check again.

&gt;<i> Now, as for the xmlns, xmlns is a special attribute, setting 
</I>&gt;<i> the xmlns attribute doesn't really do anything for the infoset, and the
</I>&gt;<i> b2 element is created in the null namespace. This is why the serialiser 
</I>&gt;<i> puts the xmlns=&quot;&quot; on b2, that is so that b2 is in the namespace it was
</I>&gt;<i> created in. 
</I>
I think there are two way of thinking about it (because there seems no 
description about xmlns handling on W3C DOM Core specification). Well,

a) supply no xmlns for default namespace
This looks more de facto standard way. I wrote similar code with jdk 1.5 
and got the same result as MS.NET.

When we don't want to handle namespaces for classical styled xml, this 
alternative will provide better solution. Note that JAXP has explicit 
setNamespaceAware() setter
on DocumentBuilderFactory, while .NET XmlDocument doesn't have such.

This alternative results in that we can never add nodes in default 
namespace as descendants of a node in non-default namespace.

b) supply xmlns=&quot;&quot;
As David pointer out, this is consistent with Infoset. Why it is 
important? You might understand when you add one line before calling 
InnerXml:

	 Console.WriteLine (&quot;namespace URI: &quot; + b2.NamespaceURI);

And what will occur when using this InnerXml string as an input to 
XslTransform.Transform()?
Or what will occur when replacing one line:

	new XmlNodeReader (doc)

with this?:

	new XmlTextReader (doc.InnerXml)

However, it will break .NET program compatibility.


... Ok, maybe it would be better to choose alternative a) here, since 
most of .NET programmer won't expect correct default namespace handling. 
I will fix this.

Thanks,
Atsushi Eno



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="017765.html">[Mono-list] xml bug?
</A></li>
	<LI> Next message: <A HREF="017789.html">[Mono-list] xml bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17777">[ date ]</a>
              <a href="thread.html#17777">[ thread ]</a>
              <a href="subject.html#17777">[ subject ]</a>
              <a href="author.html#17777">[ author ]</a>
         </LI>
       </UL>
</body></html>
