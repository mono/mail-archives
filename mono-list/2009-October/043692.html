<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] NullReferenceException on XDocument.Load
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20NullReferenceException%20on%20XDocument.Load&In-Reply-To=3d2f29dc0910221059xc5b8d0ds2da6317857fc03d6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043691.html">
   <LINK REL="Next"  HREF="043680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] NullReferenceException on XDocument.Load</H1>
    <B>David Grant</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20NullReferenceException%20on%20XDocument.Load&In-Reply-To=3d2f29dc0910221059xc5b8d0ds2da6317857fc03d6%40mail.gmail.com"
       TITLE="[Mono-list] NullReferenceException on XDocument.Load">davidgrant at gmail.com
       </A><BR>
    <I>Thu Oct 22 14:09:31 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="043691.html">[Mono-list] NullReferenceException on XDocument.Load
</A></li>
        <LI>Next message: <A HREF="043680.html">[Mono-list] Micro Framework Porting Problem.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43692">[ date ]</a>
              <a href="thread.html#43692">[ thread ]</a>
              <a href="subject.html#43692">[ subject ]</a>
              <a href="author.html#43692">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Oct 22, 2009 at 10:59 AM, Chris Howie &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">cdhowie at gmail.com</A>&gt; wrote:
&gt;<i> On Wed, Oct 21, 2009 at 11:04 AM, David Grant &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">davidgrant at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Hi all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The following code throws a NullReferenceException in XDocument.Load
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;Uri youTubeUrl = new
</I>&gt;&gt;<i> Uri(&quot;<A HREF="http://gdata.youtube.com/feeds/api/standardfeeds/most_viewed&quot;">http://gdata.youtube.com/feeds/api/standardfeeds/most_viewed&quot;</A>);
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;WebClient wc = new WebClient();
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;XmlTextReader xr = new XmlTextReader(wc.OpenRead(youTubeUrl));
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;XDocument xdoc = XDocument.Load(xr);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> System.NullReferenceException : Object reference not set to an
</I>&gt;&gt;<i> instance of an object
</I>&gt;&gt;<i> at System.Xml.Linq.XDocument.Load (System.Xml.XmlReader reader,
</I>&gt;&gt;<i> LoadOptions options) [0x00000]
</I>&gt;&gt;<i> at System.Xml.Linq.XDocument.Load (System.Xml.XmlReader reader) [0x00000]
</I>&gt;&gt;<i> at Tests.InnerTubeServiceTest.TestCase () [0x00000]
</I>&gt;&gt;<i> at (wrapper managed-to-native)
</I>&gt;&gt;<i> System.Reflection.MonoMethod:InternalInvoke
</I>&gt;&gt;<i> (object,object[],System.Exception&amp;)
</I>&gt;&gt;<i> at System.Reflection.MonoMethod.Invoke (System.Object obj,
</I>&gt;&gt;<i> BindingFlags invokeAttr, System.Reflection.Binder binder,
</I>&gt;&gt;<i> System.Object[] parameters, System.Globalization.CultureInfo culture)
</I>&gt;&gt;<i> [0x00000]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is there something wrong with my code? Or is there a bug in mono?
</I>&gt;<i>
</I>&gt;<i> This looks like it may be a bug. &#160;Perhaps wc.OpenRead is returning null?
</I>&gt;<i>
</I>&gt;<i> That aside, is there a reason why you are not simply doing
</I>&gt;<i> XDocument.Load(&quot;<A HREF="http://gdata.youtube.com/feeds/api/standardfeeds/most_viewed&quot;">http://gdata.youtube.com/feeds/api/standardfeeds/most_viewed&quot;</A>)?
</I>&gt;<i>
</I>
You might be right wc.OpenRead might be returning null... although
you'd think new XmlTextReader(wc.OpenRead(youTubeUrl)) would throw an
exception if the argument was null. I'm not sure why I didn't do
XDocument.Load... I think I must have seen the XDocument.Load(string
str) method and assumed it took in the raw XML string but it must take
in the URI according to what you are suggesting?

Last night I ran the same code in Microsoft .NET and it worked so it
must be a bug in mono. I'd love to fix it...I compiled mono for the
first time last night and that's as far as I've gotten... Is there a
monodevelop project file for the mono libraries itself with some unit
tests?

Dave
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043691.html">[Mono-list] NullReferenceException on XDocument.Load
</A></li>
	<LI>Next message: <A HREF="043680.html">[Mono-list] Micro Framework Porting Problem.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43692">[ date ]</a>
              <a href="thread.html#43692">[ thread ]</a>
              <a href="subject.html#43692">[ subject ]</a>
              <a href="author.html#43692">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
