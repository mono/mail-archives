<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Long-running program
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Long-running%20program&In-Reply-To=4AC33D3A.8070106%40may.be">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043541.html">
   <LINK REL="Next"  HREF="043536.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Long-running program</H1>
    <B>Cliff Stanford</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Long-running%20program&In-Reply-To=4AC33D3A.8070106%40may.be"
       TITLE="[Mono-list] Long-running program">cliff at may.be
       </A><BR>
    <I>Thu Oct  1 13:03:27 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="043541.html">[Mono-list] Can't get Ahead-Of-Time compilation working
</A></li>
        <LI>Next message: <A HREF="043536.html">[Mono-list] monolinker and web apps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43531">[ date ]</a>
              <a href="thread.html#43531">[ thread ]</a>
              <a href="subject.html#43531">[ subject ]</a>
              <a href="author.html#43531">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Cliff Stanford wrote:

&gt;<i> Thanks.  Server is now running on the HEAD version and I'll be able to
</I>&gt;<i> tell you in a few days if it still crashes.
</I>
Well the program is still running 24 hours later which is a good sign.
On the other hand, it appears now to have a memory leak.

As part of the debugging I have been doing, I record changes in VM size
each minute (as reported by Process.*MemorySize64), along with the total
heap memory used (as reported by GC.GetTotalMemory(true)).

The program started yesterday with:

&gt;<i> 09-Sep-30 13:20:00.091: DEBUG [  14] &lt;Netiom.MemoryCheck  &gt; Peak Virtual Memory Size: was 95988k now 96116k (increase of 128k)
</I>&gt;<i> 09-Sep-30 13:20:00.092: DEBUG [  14] &lt;Netiom.MemoryCheck  &gt; Private Memory Size:      was 77740k now 77680k (decrease of 60k)
</I>&gt;<i> 09-Sep-30 13:20:00.092: DEBUG [  14] &lt;Netiom.MemoryCheck  &gt; Virtual Memory Size:      was 95988k now 95928k (decrease of 60k)
</I>&gt;<i> 09-Sep-30 13:20:00.125: DEBUG [  14] &lt;Netiom.MemoryCheck  &gt; Total Memory:             was 10040k now 10724k (increase of 684k)
</I>
the current status is:

&gt;<i> 09-Oct-01 18:55:24.813: DEBUG [  11] &lt;Netiom.MemoryCheck  &gt; Peak Virtual Memory Size: was 1122116k now 1122180k (increase of 64k)
</I>&gt;<i> 09-Oct-01 18:55:24.814: DEBUG [  11] &lt;Netiom.MemoryCheck  &gt; Private Memory Size:      was 1103868k now 1103932k (increase of 64k)
</I>&gt;<i> 09-Oct-01 18:55:24.814: DEBUG [  11] &lt;Netiom.MemoryCheck  &gt; Virtual Memory Size:      was 1122116k now 1122180k (increase of 64k)
</I>&gt;<i> 09-Oct-01 18:55:25.321: DEBUG [  11] &lt;Netiom.MemoryCheck  &gt; Total Memory:             was 887932k now 888068k (increase of 136k)
</I>
This looks like a GC problem to me.  Previously I found the VM size
growing but a regular call to the GC kept it down.

If I can do anything to help track this down, I'm happy to make the
source code available to the mono developers or to incorporate any other
tests suggested.

Cliff.

- --
Cliff Stanford
Might Limited                           +44 845 0045 666 (Office)
Suite 67, Dorset House                  +44 7973 616 666 (Mobile)
Duke Street, Chelmsford, CM1 1TB
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org">http://enigmail.mozdev.org</A>

iEYEARECAAYFAkrE4N4ACgkQfNTx9pWyKfxDIQCfU26fCjANwkSIna4Amu1/8idE
weYAoI1zUCT9EX4CkUVXnbXh0aVlRVTS
=hDjV
-----END PGP SIGNATURE-----

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043541.html">[Mono-list] Can't get Ahead-Of-Time compilation working
</A></li>
	<LI>Next message: <A HREF="043536.html">[Mono-list] monolinker and web apps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43531">[ date ]</a>
              <a href="thread.html#43531">[ thread ]</a>
              <a href="subject.html#43531">[ subject ]</a>
              <a href="author.html#43531">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
