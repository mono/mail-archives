<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Size of thread in Mono (65MB per thread ?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Size%20of%20thread%20in%20Mono%20%2865MB%20per%20thread%20%3F%29&In-Reply-To=%3CCACmR%2BBANK%2B8YtYDuc-f5xoSBS9AymYMXjk7xz4Gmorp6gOrWwA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="050583.html">
   <LINK REL="Next"  HREF="050582.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Size of thread in Mono (65MB per thread ?)</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Size%20of%20thread%20in%20Mono%20%2865MB%20per%20thread%20%3F%29&In-Reply-To=%3CCACmR%2BBANK%2B8YtYDuc-f5xoSBS9AymYMXjk7xz4Gmorp6gOrWwA%40mail.gmail.com%3E"
       TITLE="[Mono-list] Size of thread in Mono (65MB per thread ?)">kumpera at gmail.com
       </A><BR>
    <I>Sat Dec 21 17:28:48 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="050583.html">[Mono-list] Size of thread in Mono (65MB per thread ?)
</A></li>
        <LI>Next message: <A HREF="050582.html">[Mono-list] Stop spamming me.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50581">[ date ]</a>
              <a href="thread.html#50581">[ thread ]</a>
              <a href="subject.html#50581">[ subject ]</a>
              <a href="author.html#50581">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This sounds like a problem in your environment.

Mono, by default, creates threads with the default size of its environment.
If your setup uses 64mb stacks, that's on you.

What mono does in addition to pthread_create is to mprotect the last few
pages of the stack to implement a soft guard against stack overflow.

How much memory each pthread_create adds in your setup?



On Thu, Dec 19, 2013 at 5:09 AM, Nicolas Antoniazzi &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">nicolas.antoniazzi at gmail.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I am using Mono in a virtualized environment with 512MB of RAM.
</I>&gt;<i> I made a very simple program which starts 10 threads in a loop and
</I>&gt;<i> apparently, every time that I start a new thread, approximately 65MB of
</I>&gt;<i> memory is used.
</I>&gt;<i>
</I>&gt;<i> In my case, I can run 5 threads, but for the 6th, the program crashes
</I>&gt;<i> (without any exception). 150MB are already consumed without the use of any
</I>&gt;<i> thread.
</I>&gt;<i>
</I>&gt;<i> Is it a normal behavior?
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Nicolas Antoniazzi
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20131221/faa179c2/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20131221/faa179c2/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="050583.html">[Mono-list] Size of thread in Mono (65MB per thread ?)
</A></li>
	<LI>Next message: <A HREF="050582.html">[Mono-list] Stop spamming me.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50581">[ date ]</a>
              <a href="thread.html#50581">[ thread ]</a>
              <a href="subject.html#50581">[ subject ]</a>
              <a href="author.html#50581">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
