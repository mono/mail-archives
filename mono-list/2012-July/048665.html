<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] KeePass v2.19 portable crashes when unlocking database
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20KeePass%20v2.19%20portable%20crashes%20when%20unlocking%20database&In-Reply-To=%3C1341502504639-4650311.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048672.html">
   <LINK REL="Next"  HREF="048669.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] KeePass v2.19 portable crashes when unlocking database</H1>
    <B>iandunn</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20KeePass%20v2.19%20portable%20crashes%20when%20unlocking%20database&In-Reply-To=%3C1341502504639-4650311.post%40n4.nabble.com%3E"
       TITLE="[Mono-list] KeePass v2.19 portable crashes when unlocking database">ian_dunn at yahoo.com
       </A><BR>
    <I>Thu Jul  5 15:35:04 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="048672.html">[Mono-list] WPF and XAML implementation for Mono?
</A></li>
        <LI>Next message: <A HREF="048669.html">[Mono-list] KeePass v2.19 portable crashes when unlocking	database
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48665">[ date ]</a>
              <a href="thread.html#48665">[ thread ]</a>
              <a href="subject.html#48665">[ subject ]</a>
              <a href="author.html#48665">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I installed the portable version of KeePass 2.19 on a new Fedora 16 system
that has Mono 2.10.5 installed from the Fedora repo. Every time I try to
unlock a file, the program crashes.

Steps to reproduce: 

1) Open a file
2) ctrl-f to search for a password
3) Copy a password with ctrl-c
4) Go do other stuff
5) Come back later, database has automatically locked itself
6) Hit ctrl-l to unlock
7) Type in my master password and hit enter
8) Program pauses for a few seconds, then crashes

The console has this output in it:


System.ArgumentOutOfRangeException: Argument is out of range.
Parameter name: index
  at System.Windows.Forms.ListView+ListViewItemCollection.get_Item (Int32
index) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView.GetItemAtDisplayIndex (Int32
display_index) [0x00000] in &lt;filename unknown&gt;:0 
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.ListView:GetItemAtDisplayIndex (int)
  at System.Windows.Forms.ThemeWin32Classic.DrawListViewItems
(System.Drawing.Graphics dc, Rectangle clip, System.Windows.Forms.ListView
control) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView+ItemControl.OnPaintInternal
(System.Windows.Forms.PaintEventArgs pe) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.WmPaint (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView+ItemControl.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x00000] in &lt;filename unknown&gt;:0 
System.ArgumentOutOfRangeException: Argument is out of range.
Parameter name: index
  at System.Windows.Forms.ListView+ListViewItemCollection.get_Item (Int32
index) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView.GetItemAtDisplayIndex (Int32
display_index) [0x00000] in &lt;filename unknown&gt;:0 
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.ListView:GetItemAtDisplayIndex (int)
  at System.Windows.Forms.ThemeWin32Classic.DrawListViewItems
(System.Drawing.Graphics dc, Rectangle clip, System.Windows.Forms.ListView
control) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView+ItemControl.OnPaintInternal
(System.Windows.Forms.PaintEventArgs pe) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.WmPaint (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView+ItemControl.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x00000] in &lt;filename unknown&gt;:0 



This also happens under these similar situations:

1) Open a file
2) ctrl-f to search for a password
3) Copy a password with ctrl-c
4) Close the file
5) Open the file again
7) Type in my master password and hit enter
8) Program pauses for a few seconds, then crashes

1) Open a file
2) ctrl-f to search for a password
3) Copy a password with ctrl-c
4) Close the file
5) Open a different file
7) Type in my master password and hit enter
8) Program pauses for a few seconds, then crashes



I tried running it w/ version 4 of the framework explicitly, and now it
doesn't crash as often, but it still crashes after opening/locking a file
about 4-5 times.

mono --runtime=v4.0 /opt/keepass/KeePass.exe



System.ArgumentOutOfRangeException: Argument is out of range.
Parameter name: index
  at System.Windows.Forms.ListView+ListViewItemCollection.get_Item (Int32
index) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView.GetItemAtDisplayIndex (Int32
display_index) [0x00000] in &lt;filename unknown&gt;:0 
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.ListView:GetItemAtDisplayIndex (int)
  at System.Windows.Forms.ThemeWin32Classic.DrawListViewItems
(System.Drawing.Graphics dc, Rectangle clip, System.Windows.Forms.ListView
control) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView+ItemControl.OnPaintInternal
(System.Windows.Forms.PaintEventArgs pe) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.WmPaint (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView+ItemControl.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x00000] in &lt;filename unknown&gt;:0 
System.ArgumentOutOfRangeException: Argument is out of range.
Parameter name: index
  at System.Windows.Forms.ListView+ListViewItemCollection.get_Item (Int32
index) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView.GetItemAtDisplayIndex (Int32
display_index) [0x00000] in &lt;filename unknown&gt;:0 
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.ListView:GetItemAtDisplayIndex (int)
  at System.Windows.Forms.ThemeWin32Classic.DrawListViewItems
(System.Drawing.Graphics dc, Rectangle clip, System.Windows.Forms.ListView
control) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView+ItemControl.OnPaintInternal
(System.Windows.Forms.PaintEventArgs pe) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.WmPaint (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView+ItemControl.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x00000] in &lt;filename unknown&gt;:0 



I posted a message on the KeePass forums, and one of their developers looked
at the stack trace and said that there wasn't any KeePass code involved, so
he thought that the problem was with Mono.

--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/KeePass-v2-19-portable-crashes-when-unlocking-database-tp4650311.html">http://mono.1490590.n4.nabble.com/KeePass-v2-19-portable-crashes-when-unlocking-database-tp4650311.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048672.html">[Mono-list] WPF and XAML implementation for Mono?
</A></li>
	<LI>Next message: <A HREF="048669.html">[Mono-list] KeePass v2.19 portable crashes when unlocking	database
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48665">[ date ]</a>
              <a href="thread.html#48665">[ thread ]</a>
              <a href="subject.html#48665">[ subject ]</a>
              <a href="author.html#48665">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
