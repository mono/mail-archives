<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] XmlSerializer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lluis%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="020436.html">
   <LINK REL="Next"  HREF="020441.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] XmlSerializer
   </H1>
    <B>Lluis Sanchez
    </B> 
    <A HREF="mailto:lluis%40ximian.com"
       TITLE="[Mono-list] XmlSerializer">lluis@ximian.com
       </A><BR>
    <I>Thu, 20 May 2004 21:45:07 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="020436.html">[Mono-list] XmlSerializer
</A></li>
        <LI> Next message: <A HREF="020441.html">[Mono-list] Re: Hello
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20469">[ date ]</a>
              <a href="thread.html#20469">[ thread ]</a>
              <a href="subject.html#20469">[ subject ]</a>
              <a href="author.html#20469">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

The MS.NET XmlSerializer should cache the assemblies it generates, but
it seems that in some scenarios it does not. I don't have an answer for
this, the only thing I can say is that in Mono we always cache the
assemblies. You could also try to cache the XmlSerializer instances
yourself.

Lluis.

On dj, 2004-05-20 at 08:31, <A HREF="mailto:Willem.Smit@sanlam.co.za">Willem.Smit@sanlam.co.za</A> wrote:
&gt;<i> Hi guys
</I>&gt;<i> 
</I>&gt;<i> This mail is not mono related, but it is .Net related. The reason why I'm
</I>&gt;<i> mailing you guys is that you probably know better than any of the Microsoft
</I>&gt;<i> consultants we have here in this place and I'm sure you won't ask me $2000
</I>&gt;<i> just so I could ask you a question.
</I>&gt;<i> 
</I>&gt;<i> We put down a single sign-on solution here at work, using a
</I>&gt;<i> java/websphere/s370 backend and a .Net /c#/COM/ASP frontend. The back-end
</I>&gt;<i> works beautifully, but the appservers that the front-end runs on fall over
</I>&gt;<i> every 4-5 hours depending on load.
</I>&gt;<i> 
</I>&gt;<i> Looking at the performance counters on the box we can see that everytime a
</I>&gt;<i> user logs on using this solution, 7 assemblies gets added to the total
</I>&gt;<i> assemblies and current assemblies counters.  The number of current
</I>&gt;<i> assemblies currently loaded on our box (snapshot) is 151470.
</I>&gt;<i> 
</I>&gt;<i> I've isolated the code that creates these 7 assemblies everytime - it
</I>&gt;<i> happens during a call to the Serialize method of the XmlSerializer.
</I>&gt;<i> Now with a small little test project that serializes a simple class with a
</I>&gt;<i> few string properties, the first time you call Serialize on XmlSerializer 7
</I>&gt;<i> assemblies get created. The difference here is during the next call to
</I>&gt;<i> Serialize no more assemblies are added, it's like XmlSerializer realises
</I>&gt;<i> it's allready built objects to serialize objects of that specific type
</I>&gt;<i> allready, which in my mind seems like the right thing.
</I>&gt;<i> 
</I>&gt;<i> Now my question to you is twofold.
</I>&gt;<i> 
</I>&gt;<i> 1. What is supposed to happen when you call the Serialize method on
</I>&gt;<i> XmlSerializer ?
</I>&gt;<i>       - Do you know of a reason why XmlSerializer would create 7 assemblies
</I>&gt;<i> every time and not reuse the previous objects it built to Serialize ?
</I>&gt;<i> 2. Is this even a problem ? I mean the performance counter says there are
</I>&gt;<i> 151470 assemblies loaded into memory, but there is still more than enough
</I>&gt;<i> memory on the boxes, it's just            that every four hours things
</I>&gt;<i> start going haywire on the servers and single sign-on is the only thing
</I>&gt;<i> that's changed on the boxes. So we're thinking it's because of the reason
</I>&gt;<i>       above, but it might be totally unrelated... I'm really not sure
</I>&gt;<i> 
</I>&gt;<i> I'm in dire straights here guys, and I know this shouldn't bother you
</I>&gt;<i> because it's MS related, but I really would appreciate any help.
</I>&gt;<i> Thanx
</I>&gt;<i> Willem Smit
</I>&gt;<i> SL IT
</I>&gt;<i> 
</I>&gt;<i> ***************
</I>&gt;<i> Any views expressed in this message are those of the individual sender, and
</I>&gt;<i> Sanlam accepts no liability therefore, except where the sender specifically
</I>&gt;<i> states them to be those of Sanlam.
</I>&gt;<i> Enige sienswyses of stellings wat in hierdie boodskap uitgedruk word is dié
</I>&gt;<i> van die individuele afsender, en Sanlam aanvaar geen aanspreeklikheid
</I>&gt;<i> daarvoor nie, behalwe waar die afsender uitdruklik vermeld dat dit dié van
</I>&gt;<i> Sanlam is.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="020436.html">[Mono-list] XmlSerializer
</A></li>
	<LI> Next message: <A HREF="020441.html">[Mono-list] Re: Hello
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20469">[ date ]</a>
              <a href="thread.html#20469">[ thread ]</a>
              <a href="subject.html#20469">[ subject ]</a>
              <a href="author.html#20469">[ author ]</a>
         </LI>
       </UL>
</body></html>
