<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] NAnt config file framework problem with mono 0.91.99
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gmiyake%40carter-inc.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="020223.html">
   <LINK REL="Next"  HREF="020229.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] NAnt config file framework problem with mono 0.91.99
   </H1>
    <B>GUnit
    </B> 
    <A HREF="mailto:gmiyake%40carter-inc.com"
       TITLE="[Mono-list] NAnt config file framework problem with mono 0.91.99">gmiyake@carter-inc.com
       </A><BR>
    <I>Wed, 12 May 2004 11:25:23 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="020223.html">[Mono-list] Mono Virtual Hosts
</A></li>
        <LI> Next message: <A HREF="020229.html">[Mono-list] NAnt config file framework problem with mono 0.91.99
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20228">[ date ]</a>
              <a href="thread.html#20228">[ thread ]</a>
              <a href="subject.html#20228">[ subject ]</a>
              <a href="author.html#20228">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The latest CVS version fixed the problem with the NAnt config file 
encoding. Thx.

I am now getting the following error when trying to build with NAnt:

&quot;The current runtime framework 'mono-1.0' is not correctly configured in 
the NAnt configuration file.&quot;

This configuration file worked under mono 0.31 and I have not modified 
my NAnt version.  I tried updating
NAnt and the nant build failed with a similar error. The NAnt config 
file and error message follow.

Thanks.


NAnt configuration:
------------------------------------------
&lt;?xml version=&quot;1.0&quot; encoding=&quot;Windows-1252&quot; ?&gt;
&lt;configuration&gt;
    &lt;!-- Leave this alone. Sets up configsectionhandler section --&gt;
    &lt;configSections&gt;
        &lt;section name=&quot;nant&quot; type=&quot;NAnt.Core.ConfigurationSection, 
NAnt.Core&quot; /&gt;
        &lt;section name=&quot;log4net&quot; 
type=&quot;System.Configuration.IgnoreSectionHandler&quot; /&gt;
    &lt;/configSections&gt;
    &lt;appSettings&gt;
        &lt;!-- Used to indicate the location of the cache folder for 
shadow files --&gt;
        &lt;add key=&quot;shadowfiles.path&quot; 
value=&quot;%temp%\nunit20\ShadowCopyCache&quot; /&gt;
        &lt;!-- Used to indicate that NAnt should shadow files in a cache 
folder near the executable --&gt;
        &lt;add key=&quot;nant.shadowfiles&quot; value=&quot;False&quot; /&gt;
        &lt;!-- Used to indicate if cached files should be delete when done 
running--&gt;
        &lt;add key=&quot;nant.shadowfiles.cleanup&quot; value=&quot;False&quot; /&gt;
        &lt;!-- To enable internal log4net logging, uncomment the next line --&gt;
        &lt;!-- &lt;add key=&quot;log4net.Internal.Debug&quot; value=&quot;true&quot;/&gt; --&gt;
    &lt;/appSettings&gt;
    &lt;!-- nant config settings --&gt;
    &lt;nant&gt;
        &lt;frameworks&gt;
            &lt;platform name=&quot;unix&quot; default=&quot;auto&quot;&gt;
                &lt;framework
                    name=&quot;mono-1.0&quot;
                    family=&quot;mono&quot;
                    version=&quot;1.0&quot;
                    description=&quot;GNOME projects port of the .NET Framework&quot;
                    runtimeengine=&quot;mono&quot;
                    sdkdirectory=&quot;/usr/bin&quot;
                    frameworkdirectory=&quot;/usr/bin&quot;
                    frameworkassemblydirectory=&quot;/usr/lib&quot;
                    clrversion=&quot;${clrversion}&quot;
                    &gt;
                    &lt;extensions&gt;
                        &lt;includes name=&quot;*Tasks.dll&quot; /&gt;
                        &lt;includes name=&quot;*Tests.dll&quot; /&gt;
                        &lt;!-- exclude Microsoft.NET specific extension 
assembly --&gt;
                        &lt;excludes name=&quot;NAnt.MSNetTasks.dll&quot; /&gt;
                        &lt;!-- exclude Microsoft.NET specific test 
assembly --&gt;
                        &lt;excludes name=&quot;NAnt.MSNet.Tests.dll&quot; /&gt;
                        &lt;!-- exclude win32 specific extension assembly --&gt;
                        &lt;excludes name=&quot;NAnt.Win32Tasks.dll&quot; /&gt;
                        &lt;!-- exclude win32 specific test assembly --&gt;
                        &lt;excludes name=&quot;NAnt.Win32.Tests.dll&quot; /&gt;
                    &lt;/extensions&gt;
                    &lt;properties&gt;
                        &lt;property name=&quot;clrversion&quot; value=&quot;1.1.4322&quot; /&gt;
                    &lt;/properties&gt;
                    &lt;tasks&gt;
                        &lt;task name=&quot;al&quot;&gt;
                            &lt;attribute name=&quot;exename&quot;&gt;al&lt;/attribute&gt;
                            &lt;attribute 
name=&quot;useruntimeengine&quot;&gt;true&lt;/attribute&gt;
                        &lt;/task&gt;
                        &lt;task name=&quot;csc&quot;&gt;
                            &lt;attribute name=&quot;exename&quot;&gt;mcs&lt;/attribute&gt;
                            &lt;attribute 
name=&quot;useruntimeengine&quot;&gt;true&lt;/attribute&gt;
                        &lt;/task&gt;
                        &lt;task name=&quot;vbc&quot;&gt;
                            &lt;attribute name=&quot;exename&quot;&gt;mbas&lt;/attribute&gt;
                            &lt;attribute 
name=&quot;useruntimeengine&quot;&gt;true&lt;/attribute&gt;
                        &lt;/task&gt;
                        &lt;task name=&quot;resgen&quot;&gt;
                            &lt;attribute name=&quot;exename&quot;&gt;monoresgen&lt;/attribute&gt;
                            &lt;attribute 
name=&quot;useruntimeengine&quot;&gt;true&lt;/attribute&gt;
                        &lt;/task&gt;
                        &lt;task name=&quot;delay-sign&quot;&gt;
                            &lt;attribute name=&quot;exename&quot;&gt;monosn&lt;/attribute&gt;
                            &lt;attribute 
name=&quot;useruntimeengine&quot;&gt;true&lt;/attribute&gt;
                        &lt;/task&gt;
                    &lt;/tasks&gt;
                &lt;/framework&gt;
            &lt;/platform&gt;
            &lt;!-- Framework-neutral properties --&gt;
            &lt;properties&gt;
                &lt;!-- &lt;property name=&quot;foo&quot; value = &quot;bar&quot; /&gt; --&gt;
            &lt;/properties&gt;
            &lt;!-- Framework-neutral task configuration defaults --&gt;
            &lt;tasks&gt;
                &lt;!-- settings for individual tasks --&gt;
            &lt;/tasks&gt;
        &lt;/frameworks&gt;
        &lt;!-- Default properties --&gt;
        &lt;properties&gt;
            &lt;!-- add global properties here in the following format--&gt;
            &lt;!-- &lt;property name=&quot;foo&quot; value = &quot;bar&quot; readonly=&quot;false&quot; /&gt; --&gt;
        &lt;/properties&gt;
    &lt;/nant&gt;
 &lt;!--
        This section contains the log4net configuration settings.
                                                                                                                                                              

        By default, no messages will be logged to the log4net logging 
infrastructure.
                                                                                                                                                              

        To enable the internal logging, set the threshold attribute on 
the log4net element
        to &quot;ALL&quot;.
                                                                                                                                                              

        When internal logging is enabled, internal messages will be 
written to the
        console.
    --&gt;
    &lt;log4net threshold=&quot;ALL&quot;&gt;
        &lt;appender name=&quot;ConsoleAppender&quot; 
type=&quot;log4net.Appender.ConsoleAppender&quot;&gt;
            &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;
                &lt;param name=&quot;ConversionPattern&quot; value=&quot;[%c{2}:%m  - [%x] 
&amp;lt;%X{auth}&amp;gt;]%n&quot; /&gt;
            &lt;/layout&gt;
        &lt;/appender&gt;
        &lt;appender name=&quot;RollingLogFileAppender&quot; 
type=&quot;log4net.Appender.RollingFileAppender&quot;&gt;
            &lt;param name=&quot;File&quot; value=&quot;${APPDATA}\\NAnt\\NAnt.log&quot; /&gt;
            &lt;param name=&quot;AppendToFile&quot; value=&quot;true&quot; /&gt;
            &lt;param name=&quot;MaxSizeRollBackups&quot; value=&quot;2&quot; /&gt;
            &lt;param name=&quot;MaximumFileSize&quot; value=&quot;500KB&quot; /&gt;
            &lt;param name=&quot;RollingStyle&quot; value=&quot;Size&quot; /&gt;
            &lt;param name=&quot;StaticLogFileName&quot; value=&quot;true&quot; /&gt;
            &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;
            &lt;param name=&quot;ConversionPattern&quot; value=&quot;[%c{2}:%m  - [%x] 
&amp;lt;%X{auth}&amp;gt;]%n&quot; /&gt;
            &lt;/layout&gt;
        &lt;/appender&gt;
        &lt;!-- Setup the root category, add the appenders and set the 
default level --&gt;
        &lt;root&gt;
            &lt;!-- Only log messages with severity ERROR (or higher) --&gt;
            &lt;level value=&quot;DEBUG&quot; /&gt;
            &lt;!-- Log messages to the console --&gt;
            &lt;appender-ref ref=&quot;ConsoleAppender&quot; /&gt;
            &lt;!-- Uncomment the next line to enable logging messages to 
the NAnt.log file --&gt;
            &lt;!-- &lt;appender-ref ref=&quot;RollingLogFileAppender&quot; /&gt; --&gt;
        &lt;/root&gt;
        &lt;!-- Specify the priority for some specific categories --&gt;
        &lt;!--
        &lt;logger name=&quot;NAnt.Core.TaskBuilderCollection&quot;&gt;
            &lt;level value=&quot;DEBUG&quot; /&gt;
        &lt;/logger&gt;
        &lt;logger name=&quot;NAnt&quot;&gt;
            &lt;level value=&quot;INFO&quot; /&gt;
        &lt;/logger&gt;
        --&gt;
    &lt;/log4net&gt;
    &lt;startup&gt;
        &lt;supportedRuntime version=&quot;v1.1.4322&quot; /&gt;
        &lt;supportedRuntime version=&quot;v1.0.3705&quot; /&gt;
    &lt;/startup&gt;
&lt;/configuration&gt;

                           
NAnt error:
--------------------------------------------
nant /f:DC_IAPI.build
Compat mode: the request from 
/home/user1/mono/nant/build/mono-1.0.unix/nant-0.85-debug/bin/log4net.dll 
to load System.Data was remapped (<A HREF="http://www.go-mono.com/remap.html">http://www.go-mono.com/remap.html</A>)
Compat mode: the request from 
/home/user1/mono/nant/build/mono-1.0.unix/nant-0.85-debug/bin/log4net.dll 
to load System.Web was remapped (<A HREF="http://www.go-mono.com/remap.html">http://www.go-mono.com/remap.html</A>)
[Console.ConsoleStub:Shadowing files(False) -- cleanup=False  - [] &lt;&gt;]
[Console.ConsoleStub:Creating HelperArgs(System.String[])  - [] &lt;&gt;]
[Console.ConsoleStub:NAnt.Core Loaded: NAnt.Core, Version=0.85.1549.0, 
Culture=neutral, PublicKeyToken=null  - [] &lt;&gt;]
NAnt 0.85 (Build 0.85.1549.0; mono-1.0.unix; nightly; 3/29/2004)
Copyright (C) 2001-2004 Gerry Shaw
<A HREF="http://nant.sourceforge.net">http://nant.sourceforge.net</A>
 
[Core.Project:Error creating URI in project constructor. Moving on...   
- [] &lt;&gt;]
Exception: System.UriFormatException
Message: The format of the URI could not be determined.
Source: System
in &lt;0x00120&gt; System.Uri:Parse (string)
in &lt;0x00056&gt; (wrapper remoting-invoke-with-check) System.Uri:Parse (string)
in &lt;0x00089&gt; System.Uri:.ctor (string,bool)
in &lt;0x00012&gt; System.Uri:.ctor (string)
in &lt;0x00056&gt; (wrapper remoting-invoke-with-check) System.Uri:.ctor (string)
in &lt;0x0019e&gt; NAnt.Core.Project:.ctor (string,NAnt.Core.Level,int)

[Core.TypeFactory:Creating TaskBuilder for 'AttribTask'  - [] &lt;&gt;]
[Core.TypeFactory:Adding 'attrib' from 
/home/user1/mono/nant/build/mono-1.0.unix/nant-0.85-debug/bin/NAnt.Core.dll:NAnt.Core.Tasks.AttribTask  
- [] &lt;&gt;]
...
 BUILD FAILED
 
The current runtime framework 'mono-1.0' is not correctly configured in 
the NAnt configuration file.
 
[Core.ConsoleDriver:NAnt Build Failure  - [] &lt;&gt;]
Exception: NAnt.Core.BuildException
Message: The current runtime framework 'mono-1.0' is not correctly 
configured in the NAnt configuration file.
Source: NAnt.Core
in &lt;0x0076d&gt; NAnt.Core.ProjectSettingsLoader:ProcessFrameworks 
(System.Xml.XmlNode)
in &lt;0x00104&gt; NAnt.Core.ProjectSettingsLoader:ProcessSettings ()
in &lt;0x005cb&gt; NAnt.Core.Project:CtorHelper 
(System.Xml.XmlDocument,NAnt.Core.Level,int)
in &lt;0x0025f&gt; NAnt.Core.Project:.ctor (string,NAnt.Core.Level,int)
in &lt;0x0034a&gt; NAnt.Core.ConsoleDriver:Main (string[])
 
 
Consult the log4net output for more information.
 
Try 'nant -help' for more information
[Console.ConsoleStub:'Int32 Main(System.String[])' returned 1  - [] &lt;&gt;]
[Console.ConsoleStub:Return Code = 1  - [] &lt;&gt;]




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="020223.html">[Mono-list] Mono Virtual Hosts
</A></li>
	<LI> Next message: <A HREF="020229.html">[Mono-list] NAnt config file framework problem with mono 0.91.99
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20228">[ date ]</a>
              <a href="thread.html#20228">[ thread ]</a>
              <a href="subject.html#20228">[ subject ]</a>
              <a href="author.html#20228">[ author ]</a>
         </LI>
       </UL>
</body></html>
