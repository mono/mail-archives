<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] offtopic, but cool
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jonpryor%40vt.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="020214.html">
   <LINK REL="Next"  HREF="020241.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] offtopic, but cool
   </H1>
    <B>Jonathan Pryor
    </B> 
    <A HREF="mailto:jonpryor%40vt.edu"
       TITLE="[Mono-list] offtopic, but cool">jonpryor@vt.edu
       </A><BR>
    <I>Thu, 13 May 2004 06:54:41 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="020214.html">[Mono-list] offtopic, but cool
</A></li>
        <LI> Next message: <A HREF="020241.html">[Mono-list] offtopic, but cool
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20240">[ date ]</a>
              <a href="thread.html#20240">[ thread ]</a>
              <a href="subject.html#20240">[ subject ]</a>
              <a href="author.html#20240">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It just occurred to me, but this test is really unfair to C++. 
std::list is a linked-list, requiring a heap allocation for each node in
the list.  ArrayList and List&lt;T&gt; both use arrays for their internal
storage, and thus would require far fewer allocations.

I would suggest re-testing the C++ program, but use std::vector instead
of std::list.  std::vector is the array-based implementation, which is
supposed to provide (amortized) O(1) append time.  (Of course, std::list
also provides O(1) append and insert time, but the heap allocation per
node requirement is a killer, as opposed to the probable log(n) heap
allocations an array would require, assuming you don't pre-allocate the
array.)

Which reminds me: running the test with the List/vector pre-allocated
would be interesting, as it would help to remove the C++ heap allocator
and the GC from the performance equation, allowing us to see a better
comparison between the two models.

 - Jon

On Wed, 2004-05-12 at 07:56, Cory Nelson wrote:
&gt;<i> Just got done installing the VS.NET 2005 preview and did a small test.
</I>&gt;<i> 
</I>&gt;<i> I compared an ArrayList of Rectangles to a List&lt;Rectangle&gt;, and timed
</I>&gt;<i> inserting 1mil rects into each.  I also wrote an equivalent c++ app. 
</I>&gt;<i> Got some interesting results:
</I>&gt;<i> 
</I>&gt;<i> ArrayList: 265ms
</I>&gt;<i> List&lt;Rectangle&gt;: 62ms
</I>&gt;<i> list&lt;rect&gt;: 141ms
</I>&gt;<i> 
</I>&gt;<i> So it seems with generics .NET is finally faster than c++ (at least,
</I>&gt;<i> in this case).
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="020214.html">[Mono-list] offtopic, but cool
</A></li>
	<LI> Next message: <A HREF="020241.html">[Mono-list] offtopic, but cool
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20240">[ date ]</a>
              <a href="thread.html#20240">[ thread ]</a>
              <a href="subject.html#20240">[ subject ]</a>
              <a href="author.html#20240">[ author ]</a>
         </LI>
       </UL>
</body></html>
