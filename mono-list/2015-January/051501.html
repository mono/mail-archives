<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] System.Web.Security.Membership causes an exception on mono platform
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20System.Web.Security.Membership%20causes%20an%20exception%0A%20on%20mono%20platform&In-Reply-To=%3CCAH07y4R_HkUSdO%3DKoOq30Tnt%3DLC8pE9mMjvN0aB1zDKfjoHHOQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="051500.html">
   <LINK REL="Next"  HREF="051510.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] System.Web.Security.Membership causes an exception on mono platform</H1>
    <B>Martin Thwaites</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20System.Web.Security.Membership%20causes%20an%20exception%0A%20on%20mono%20platform&In-Reply-To=%3CCAH07y4R_HkUSdO%3DKoOq30Tnt%3DLC8pE9mMjvN0aB1zDKfjoHHOQ%40mail.gmail.com%3E"
       TITLE="[Mono-list] System.Web.Security.Membership causes an exception on mono platform">monoforum at my2cents.co.uk
       </A><BR>
    <I>Mon Jan 19 22:03:15 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="051500.html">[Mono-list] System.Web.Security.Membership causes an exception on mono platform
</A></li>
        <LI>Next message: <A HREF="051510.html">[Mono-list] System.Web.Security.Membership causes an exception on mono platform
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51501">[ date ]</a>
              <a href="thread.html#51501">[ thread ]</a>
              <a href="subject.html#51501">[ subject ]</a>
              <a href="author.html#51501">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Next suggestions...

We need to establish if you have a working mono version.

Can you install the latest packages from the mono repository?

<A HREF="http://www.mono-project.com/docs/getting-started/install/linux/#centos-fedora-and-derivatives">http://www.mono-project.com/docs/getting-started/install/linux/#centos-fedora-and-derivatives</A>

Then, try running the site using XSP directly.  Go to the directory in a
terminal window and type xsp4.

I'm really struggling to come up with reasons why a site would run MVC
methods, but won't run your site.

Could you put up your site somewhere that someone could download and try?

Thanks,
Martin

On 19 January 2015 at 14:55, Olli Heiskanen &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">ohjelmistoarkkitehti at gmail.com</A>&gt;
wrote:

&gt;<i> Thanks a million for helping Martin, I've been stuck with this for a while
</I>&gt;<i> and really need to get something working, or at least ways to dig up more
</I>&gt;<i> information. I use VS for developing on a Win8 machine, on that everything
</I>&gt;<i> works perfectly.
</I>&gt;<i>
</I>&gt;<i> And thank You Gonzalo for your suggestion, unfortunately changing
</I>&gt;<i> /boacommander to / had no effect on the errors. I have the default httpd
</I>&gt;<i> conf file, tried to disable file indexes by using Options -Indexes
</I>&gt;<i> FollowSymLinks setting under &lt;Directory /&gt; but removing -Indexes did not
</I>&gt;<i> have an effect on the errors.
</I>&gt;<i>
</I>&gt;<i> Yes, a MVC3 site created from a VS template without any changes anywhere
</I>&gt;<i> is my &quot;fresh site&quot;.
</I>&gt;<i>
</I>&gt;<i> No, I haven't gotten any websites working, only a very simple empty web
</I>&gt;<i> app without any functionality. Tried a WebForms, MVC3 and MVC4 apps so far.
</I>&gt;<i> A simple empty web app without any functionality works fine.
</I>&gt;<i>
</I>&gt;<i> On my MVC sites if I have an action link like:
</I>&gt;<i> @Html.ActionLink(&quot;About&quot;, &quot;About&quot;, &quot;Home&quot;)
</I>&gt;<i>
</I>&gt;<i> this works fine, I can navigate between pages, but whenever I'm posting a
</I>&gt;<i> form, like registering a new user or logging in, I get the &quot;Failed to map
</I>&gt;<i> path '/'&quot; -error. This seems like an extremely crucial error.
</I>&gt;<i>
</I>&gt;<i> cheers,
</I>&gt;<i> Olli
</I>&gt;<i>
</I>&gt;<i> 2015-01-18 2:17 GMT+02:00 Gonzalo Paniagua Javier &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">gonzalo.mono at gmail.com</A>&gt;
</I>&gt;<i> :
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Olli,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Your MonoApplications line is:
</I>&gt;&gt;<i>    MonoApplications boacommander &quot;/boacommander:/var/www/html/
</I>&gt;&gt;<i> boacommander&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So there is no ASP.NET application configured for /, which is the error
</I>&gt;&gt;<i> you are seeing.
</I>&gt;&gt;<i> A possible fix is to change that to read:
</I>&gt;&gt;<i>   MonoApplications boacommander &quot;/:/var/www/html/boacommander&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Or set up something else on / that just redirects to /boacommander.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Gonzalo
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Sat, Jan 17, 2015 at 2:20 AM, Olli Heiskanen &lt;
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">ohjelmistoarkkitehti at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hello,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> A little more information on this:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The actual problem is an error that says &quot;Failed to map path '/'&quot;, that
</I>&gt;&gt;&gt;<i> is what I get in an inner exception:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> System.InvalidOperationException
</I>&gt;&gt;&gt;<i> Failed to map path '/'
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  at System.Web.HttpRequest.MapPath (System.String virtualPath,
</I>&gt;&gt;&gt;<i> System.String baseVirtualDir, Boolean allowCrossAppMapping) [0x001a4] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web/HttpRequest.cs:1563
</I>&gt;&gt;&gt;<i>   at System.Web.HttpRequest.MapPath (System.String virtualPath)
</I>&gt;&gt;&gt;<i> [0x0000d] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web/HttpRequest.cs:1520
</I>&gt;&gt;&gt;<i>   at System.Web.Hosting.HostingEnvironment.MapPath (System.String
</I>&gt;&gt;&gt;<i> virtualPath) [0x00042] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web.Hosting/HostingEnvironment.cs:156
</I>&gt;&gt;&gt;<i>   at System.Web.Hosting.DefaultVirtualPathProvider.DirectoryExists
</I>&gt;&gt;&gt;<i> (System.String virtualDir) [0x00016] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web.Hosting/DefaultVirtualPathProvider.cs:59
</I>&gt;&gt;&gt;<i>   at System.Web.Configuration.WebConfigurationManager.FindWebConfig
</I>&gt;&gt;&gt;<i> (System.String path, System.Boolean&amp; inAnotherApp) [0x0001a] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web.Configuration_2.0/WebConfigurationManager.cs:592
</I>&gt;&gt;&gt;<i>   at
</I>&gt;&gt;&gt;<i> System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration
</I>&gt;&gt;&gt;<i> (System.String path, System.String site, System.String locationSubPath,
</I>&gt;&gt;&gt;<i> System.String server, System.String userName, System.String password,
</I>&gt;&gt;&gt;<i> Boolean fweb) [0x00026] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web.Configuration_2.0/WebConfigurationManager.cs:360
</I>&gt;&gt;&gt;<i>   at System.Web.Configuration.WebConfigurationManager.GetSection
</I>&gt;&gt;&gt;<i> (System.String sectionName, System.String path, System.Web.HttpContext
</I>&gt;&gt;&gt;<i> context) [0x0000d] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web.Configuration_2.0/WebConfigurationManager.cs:456
</I>&gt;&gt;&gt;<i>   at System.Web.Configuration.WebConfigurationManager.GetSection
</I>&gt;&gt;&gt;<i> (System.String sectionName, System.String path) [0x00000] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web.Configuration_2.0/WebConfigurationManager.cs:435
</I>&gt;&gt;&gt;<i>   at System.Web.Security.SqliteMembershipProvider.Initialize
</I>&gt;&gt;&gt;<i> (System.String name, System.Collections.Specialized.NameValueCollection
</I>&gt;&gt;&gt;<i> config) [0x0028b] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web.Security/SqliteMembershipProvider.cs:143
</I>&gt;&gt;&gt;<i>   at System.Web.Configuration.ProvidersHelper.InstantiateProvider
</I>&gt;&gt;&gt;<i> (System.Configuration.ProviderSettings providerSettings, System.Type
</I>&gt;&gt;&gt;<i> providerType) [0x00069] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web.Configuration_2.0/ProvidersHelper.cs:61
</I>&gt;&gt;&gt;<i>   at System.Web.Configuration.ProvidersHelper.InstantiateProviders
</I>&gt;&gt;&gt;<i> (System.Configuration.ProviderSettingsCollection configProviders,
</I>&gt;&gt;&gt;<i> System.Configuration.Provider.ProviderCollection providers, System.Type
</I>&gt;&gt;&gt;<i> providerType) [0x0003e] in
</I>&gt;&gt;&gt;<i> /usr/local/src/mono/mcs/class/System.Web/System.Web.Configuration_2.0/ProvidersHelper.cs:72
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> My Web.config does not have any custom stuff, other than a custom
</I>&gt;&gt;&gt;<i> membership provider, but the same error occurs on a fresh mvc3 site without
</I>&gt;&gt;&gt;<i> any added code or customizations.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> My apache/mod_mono configuration is directly from
</I>&gt;&gt;&gt;<i> <A HREF="http://go-mono.com/config-mod-mono/,">http://go-mono.com/config-mod-mono/,</A> without any change, here it is:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Alias /boacommander &quot;/var/www/html/boacommander&quot;
</I>&gt;&gt;&gt;<i>   MonoServerPath boacommander &quot;/usr/bin/mod-mono-server4&quot;
</I>&gt;&gt;&gt;<i>   MonoDebug boacommander true
</I>&gt;&gt;&gt;<i>   MonoSetEnv boacommander MONO_IOMAP=all
</I>&gt;&gt;&gt;<i>   MonoApplications boacommander
</I>&gt;&gt;&gt;<i> &quot;/boacommander:/var/www/html/boacommander&quot;
</I>&gt;&gt;&gt;<i>   &lt;Location &quot;/boacommander&quot;&gt;
</I>&gt;&gt;&gt;<i>     Allow from all
</I>&gt;&gt;&gt;<i>     Order allow,deny
</I>&gt;&gt;&gt;<i>     MonoSetServerAlias boacommander
</I>&gt;&gt;&gt;<i>     SetHandler mono
</I>&gt;&gt;&gt;<i>     SetOutputFilter DEFLATE
</I>&gt;&gt;&gt;<i>     SetEnvIfNoCase Request_URI &quot;\.(?:gif|jpe?g|png)$&quot; no-gzip dont-vary
</I>&gt;&gt;&gt;<i>   &lt;/Location&gt;
</I>&gt;&gt;&gt;<i>   &lt;IfModule mod_deflate.c&gt;
</I>&gt;&gt;&gt;<i>     AddOutputFilterByType DEFLATE text/html text/plain text/xml
</I>&gt;&gt;&gt;<i> text/javascript
</I>&gt;&gt;&gt;<i>   &lt;/IfModule&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I have observed this error on mono versions 3.10.0, 3.10.1 and 3.12.0,
</I>&gt;&gt;&gt;<i> all compiled from git branches.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Based on my searches for a solution, I've seen some posts where this
</I>&gt;&gt;&gt;<i> error occurs on a windows platform and a workaround is to run Visual Studio
</I>&gt;&gt;&gt;<i> as administrator. This is not what I can do as the error does not occur on
</I>&gt;&gt;&gt;<i> my windows platform, and apache process is run as root.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Still I feel this might be a configuration issue, as it has something to
</I>&gt;&gt;&gt;<i> do with path mapping. So far though, I've not found a configuration change
</I>&gt;&gt;&gt;<i> that would solve the issue.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> cheers,
</I>&gt;&gt;&gt;<i> Olli
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2015-01-13 17:50 GMT+02:00 Olli Heiskanen &lt;
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">ohjelmistoarkkitehti at gmail.com</A>&gt;:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hello,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I'm trying to deploy a MVC3 site on a CentOS server using mono and
</I>&gt;&gt;&gt;&gt;<i> mod_mono on apache. After a week of agonizing installations and
</I>&gt;&gt;&gt;&gt;<i> configurations, I got the site up, but a MembershipProvider still acts up.
</I>&gt;&gt;&gt;&gt;<i> My mono version is 3.10.0, installed from source and got from a git branch.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> While the code works fine on a windows machine, in a mono environment I
</I>&gt;&gt;&gt;&gt;<i> get an exception while trying to log in, at the row below:
</I>&gt;&gt;&gt;&gt;<i> if (Membership.ValidateUser(userid, password))
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> The exception message is:
</I>&gt;&gt;&gt;&gt;<i> An exception was thrown by the type initializer for
</I>&gt;&gt;&gt;&gt;<i> System.Web.Security.Membership
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> The stack trace does not tell much:
</I>&gt;&gt;&gt;&gt;<i>   at boa.BoaCommander.Controllers.AccountController.VerifyUser
</I>&gt;&gt;&gt;&gt;<i> (System.String userid, System.String password, Boolean rememberme)
</I>&gt;&gt;&gt;&gt;<i> [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> In my Web.config I have the membership provider defined like this:
</I>&gt;&gt;&gt;&gt;<i> &lt;membership defaultProvider=&quot;BoaMembershipProvider&quot;&gt;
</I>&gt;&gt;&gt;&gt;<i>   &lt;providers&gt;
</I>&gt;&gt;&gt;&gt;<i> &lt;add name=&quot;BoaMembershipProvider&quot;
</I>&gt;&gt;&gt;&gt;<i> type=&quot;BoaCommander.Providers.BoaMembershipProvider&quot;
</I>&gt;&gt;&gt;&gt;<i> connectionStringName=&quot;BoaMySqlConnection&quot; applicationName=&quot;BOA&quot;
</I>&gt;&gt;&gt;&gt;<i> passwordFormat=&quot;Hashed&quot;/&gt;
</I>&gt;&gt;&gt;&gt;<i>   &lt;/providers&gt;
</I>&gt;&gt;&gt;&gt;<i> &lt;/membership&gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> ... and the class BoaMembershipProvider inherits MembershipProvider.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> What can I do to fix this problem? I'd appreciate Your comments.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> cheers,
</I>&gt;&gt;&gt;&gt;<i> Olli
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20150119/5a87ed89/attachment-0001.html">http://lists.ximian.com/pipermail/mono-list/attachments/20150119/5a87ed89/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="051500.html">[Mono-list] System.Web.Security.Membership causes an exception on mono platform
</A></li>
	<LI>Next message: <A HREF="051510.html">[Mono-list] System.Web.Security.Membership causes an exception on mono platform
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51501">[ date ]</a>
              <a href="thread.html#51501">[ thread ]</a>
              <a href="subject.html#51501">[ subject ]</a>
              <a href="author.html#51501">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
