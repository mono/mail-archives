<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Stack variable alignment on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Stack%20variable%20alignment%20on%20Windows&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045324.html">
   <LINK REL="Next"  HREF="045329.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Stack variable alignment on Windows</H1>
    <B>Adam Miles</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Stack%20variable%20alignment%20on%20Windows&In-Reply-To="
       TITLE="[Mono-list] Stack variable alignment on Windows">amiles at gmail.com
       </A><BR>
    <I>Wed Jun 16 21:18:42 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="045324.html">[Mono-list] How to use Sqlite provider in Mono
</A></li>
        <LI>Next message: <A HREF="045329.html">[Mono-list] Stack variable alignment on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45325">[ date ]</a>
              <a href="thread.html#45325">[ thread ]</a>
              <a href="subject.html#45325">[ subject ]</a>
              <a href="author.html#45325">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I'm new to Mono this week and decided to give it a go by porting a C++
raytracer I have written using SSE into C# using Mono.Simd. However on
looking at the assembler generated by Mono it appears all the Simd code is
using movups everywhere rather than movaps because all my Vector4f stack
variables are not 16 byte aligned contrary to what I read here: 
<A HREF="http://tirania.org/blog/archive/2008/Nov-03.html">http://tirania.org/blog/archive/2008/Nov-03.html</A>
<A HREF="http://tirania.org/blog/archive/2008/Nov-03.html">http://tirania.org/blog/archive/2008/Nov-03.html</A>  

It says from Mono 2.2 stack variables are 16 byte aligned, but I'm using
2.6.5 and find that not to be the case. Does this apply only to certain
platforms / CPU architectures?

I'm using Mono 2.6.5 on Windows 7 64bit.

Repro using unsafe code:

Vector4f a = new Vector4f();

if (((int)&amp;a) % 16 != 0)
{
    Console.WriteLine(&quot;Unaligned&quot;);
}
-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Stack-variable-alignment-on-Windows-tp2258096p2258096.html">http://mono.1490590.n4.nabble.com/Stack-variable-alignment-on-Windows-tp2258096p2258096.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045324.html">[Mono-list] How to use Sqlite provider in Mono
</A></li>
	<LI>Next message: <A HREF="045329.html">[Mono-list] Stack variable alignment on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45325">[ date ]</a>
              <a href="thread.html#45325">[ thread ]</a>
              <a href="subject.html#45325">[ subject ]</a>
              <a href="author.html#45325">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
