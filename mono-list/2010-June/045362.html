<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Some issues with mono 2.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Some%20issues%20with%20mono%202.0&In-Reply-To=49083468.8000202%40yandex.ru">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045361.html">
   <LINK REL="Next"  HREF="045363.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Some issues with mono 2.0</H1>
    <B>dugc</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Some%20issues%20with%20mono%202.0&In-Reply-To=49083468.8000202%40yandex.ru"
       TITLE="[Mono-list] Some issues with mono 2.0">dugald at dolce.co.uk
       </A><BR>
    <I>Fri Jun 25 06:27:03 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="045361.html">[Mono-list] Mono + Webcam (cross-platform solution)?
</A></li>
        <LI>Next message: <A HREF="045363.html">[Mono-list] Some issues with mono 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45362">[ date ]</a>
              <a href="thread.html#45362">[ thread ]</a>
              <a href="subject.html#45362">[ subject ]</a>
              <a href="author.html#45362">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Hi Maxim,

I stumbled across your posts as I am having similar problems.  All of the
traffic for my site is beteen 8.50am and 9.05am (it is a meal preorder
system) and my users are losing patience as it keeps going down during peak
traffic.  Frustratingly the server's (2 x Quad core CPUs, 8GB ram, RAID 5)
CPU and RAM use is very low.

I get a lot of this on my logs (sometimes once a day, sometimes 30 times a
day):

System.Threading.ThreadAbortException: Thread was being aborted

Server stack trace: 
  at Mono.WebServer.BaseApplicationHost.ProcessRequest
(Mono.WebServer.MonoWorkerRequest mwr) [0x00000] 
  at Mono.WebServer.ModMonoApplicationHost.ProcessRequest (Int32 reqId,
System.String verb, System.String queryString, System.String path,
System.String protocol, System.String localAddress, Int32 serverPort,
System.String remoteAddress, Int32 remotePort, System.String remoteName,
System.String[] headers, System.String[] headerValues) [0x00000] 
  at (wrapper remoting-invoke-with-check)
Mono.WebServer.ModMonoApplicationHost:ProcessRequest
(int,string,string,string,string,string,int,string,int,string,string[],string[])
  at (wrapper xdomain-dispatch)
Mono.WebServer.ModMonoApplicationHost:ProcessRequest
(object,byte[]&amp;,byte[]&amp;,int,string,string,string,string,string,int,string,int,string,string[],string[])

Exception rethrown at [0]: 

  at (wrapper xdomain-invoke)
Mono.WebServer.ModMonoApplicationHost:ProcessRequest
(int,string,string,string,string,string,int,string,int,string,string[],string[])
  at (wrapper remoting-invoke-with-check)
Mono.WebServer.ModMonoApplicationHost:ProcessRequest
(int,string,string,string,string,string,int,string,int,string,string[],string[])
  at Mono.WebServer.ModMonoWorker.InnerRun (System.Object state) [0x00000] 
  at Mono.WebServer.ModMonoWorker.Run (System.Object state) [0x00000] 

Some morning nothing works (can't get the login page) and some mornings the
login comes up but it just times out when you try to login.  It is always
the case that non-ASP.NET pages (.html pages) can load fine.  I have tried
various settings and currently have this set up:

MonoSetEnv MONO_THREADS_PER_CPU=1000
MonoMaxActiveRequests 250
MonoMaxWaitingRequests 250

But it is still crashing almost every morning, leading to a lot of lost
sales.  Changing MaxActive and MaxWaiting doesn't seem to make much
difference - when it starts to go wrong, it will crash whatever the queue
length is.  

I am running Mono 1.9.1 on Ubuntu 8.10, using Apache (pre-fork) 2.2.9.  I
have to use prefork as I run phpMyAdmin on the server and php requires it. 
Does this make much of a difference? I heard that the 'worker' version might
be better for mono?

I would appreciate it if you could let me know how you are getting on with
this now - and if it is fixed, what version of mono sorted the problem.  I
hope to upgrade the server to Ubuntu 10.04 and Mono 2.4 but I am worried
that this will be insufficient to resolve my problems.

Thanks,  Dugald
-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Some-issues-with-mono-2-0-tp1503708p2268260.html">http://mono.1490590.n4.nabble.com/Some-issues-with-mono-2-0-tp1503708p2268260.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045361.html">[Mono-list] Mono + Webcam (cross-platform solution)?
</A></li>
	<LI>Next message: <A HREF="045363.html">[Mono-list] Some issues with mono 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45362">[ date ]</a>
              <a href="thread.html#45362">[ thread ]</a>
              <a href="subject.html#45362">[ subject ]</a>
              <a href="author.html#45362">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
