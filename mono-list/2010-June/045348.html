<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Stack variable alignment on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Stack%20variable%20alignment%20on%20Windows&In-Reply-To=1276811247814-2259520.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045329.html">
   <LINK REL="Next"  HREF="045326.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Stack variable alignment on Windows</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Stack%20variable%20alignment%20on%20Windows&In-Reply-To=1276811247814-2259520.post%40n4.nabble.com"
       TITLE="[Mono-list] Stack variable alignment on Windows">kumpera at gmail.com
       </A><BR>
    <I>Mon Jun 21 09:34:58 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="045329.html">[Mono-list] Stack variable alignment on Windows
</A></li>
        <LI>Next message: <A HREF="045326.html">[Mono-list] [Blatant Alias Abuse] Anyone want to help out with a	coding problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45348">[ date ]</a>
              <a href="thread.html#45348">[ thread ]</a>
              <a href="subject.html#45348">[ subject ]</a>
              <a href="author.html#45348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jun 17, 2010 at 6:47 PM, Adam Miles &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">amiles at gmail.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> The more I read what little documentation there is on variable alignment
</I>&gt;<i> the
</I>&gt;<i> more I realise I might have misunderstood what is guaranteed. The guarantee
</I>&gt;<i> appears to be that the top of the stack frame is 16 byte aligned, not
</I>&gt;<i> necessarily every variable on the stack. So the variable at the top (?) of
</I>&gt;<i> the stack is 16 byte aligned however if the top variable is a float, the
</I>&gt;<i> next variable will be on a 4 byte boundary, not 16.
</I>&gt;<i>
</I>&gt;<i> Where I've passed 3 Vector4f's by reference into a function it has pushed
</I>&gt;<i> my
</I>&gt;<i> stack allocated Vector4 12 bytes along (presumably a 'ref' variable is 4
</I>&gt;<i> bytes on the stack, like a pointer). I could pass all Vector4f's by value,
</I>&gt;<i> but even then you couldn't also pass a float as well.
</I>&gt;<i>
</I>&gt;<i> Assuming I've understood this correct (that's a big if), Mono.Simd is going
</I>&gt;<i> to suffer quite poor performance with all the unavoidable unaligned loads
</I>&gt;<i> and there's nothing that the user can do to work around it.
</I>&gt;<i>
</I>&gt;<i>
</I>Support for 16bytes aligned locals/parameters is planned, but due to how
much work we have on our hands right now, it's hard to tell when it will
be done.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20100621/37030fd2/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20100621/37030fd2/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045329.html">[Mono-list] Stack variable alignment on Windows
</A></li>
	<LI>Next message: <A HREF="045326.html">[Mono-list] [Blatant Alias Abuse] Anyone want to help out with a	coding problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45348">[ date ]</a>
              <a href="thread.html#45348">[ thread ]</a>
              <a href="subject.html#45348">[ subject ]</a>
              <a href="author.html#45348">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
