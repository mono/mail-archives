<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Stack variable alignment on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Stack%20variable%20alignment%20on%20Windows&In-Reply-To=1276737522530-2258096.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045325.html">
   <LINK REL="Next"  HREF="045348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Stack variable alignment on Windows</H1>
    <B>Adam Miles</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Stack%20variable%20alignment%20on%20Windows&In-Reply-To=1276737522530-2258096.post%40n4.nabble.com"
       TITLE="[Mono-list] Stack variable alignment on Windows">amiles at gmail.com
       </A><BR>
    <I>Thu Jun 17 17:47:27 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="045325.html">[Mono-list] Stack variable alignment on Windows
</A></li>
        <LI>Next message: <A HREF="045348.html">[Mono-list] Stack variable alignment on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45329">[ date ]</a>
              <a href="thread.html#45329">[ thread ]</a>
              <a href="subject.html#45329">[ subject ]</a>
              <a href="author.html#45329">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
The more I read what little documentation there is on variable alignment the
more I realise I might have misunderstood what is guaranteed. The guarantee
appears to be that the top of the stack frame is 16 byte aligned, not
necessarily every variable on the stack. So the variable at the top (?) of
the stack is 16 byte aligned however if the top variable is a float, the
next variable will be on a 4 byte boundary, not 16.

Where I've passed 3 Vector4f's by reference into a function it has pushed my
stack allocated Vector4 12 bytes along (presumably a 'ref' variable is 4
bytes on the stack, like a pointer). I could pass all Vector4f's by value,
but even then you couldn't also pass a float as well.

Assuming I've understood this correct (that's a big if), Mono.Simd is going
to suffer quite poor performance with all the unavoidable unaligned loads
and there's nothing that the user can do to work around it.
-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Stack-variable-alignment-on-Windows-tp2258096p2259520.html">http://mono.1490590.n4.nabble.com/Stack-variable-alignment-on-Windows-tp2258096p2259520.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045325.html">[Mono-list] Stack variable alignment on Windows
</A></li>
	<LI>Next message: <A HREF="045348.html">[Mono-list] Stack variable alignment on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45329">[ date ]</a>
              <a href="thread.html#45329">[ thread ]</a>
              <a href="subject.html#45329">[ subject ]</a>
              <a href="author.html#45329">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
