<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Serializable object with Non-Serializable Fields	--&gt; SerializationException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Serializable%20object%20with%20Non-Serializable%20Fields%0A%09--%3E%20SerializationException&In-Reply-To=hu5nhp%24dab%241%40dough.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045244.html">
   <LINK REL="Next"  HREF="045242.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Serializable object with Non-Serializable Fields	--&gt; SerializationException</H1>
    <B>Jacek Ru&#380;yczka</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Serializable%20object%20with%20Non-Serializable%20Fields%0A%09--%3E%20SerializationException&In-Reply-To=hu5nhp%24dab%241%40dough.gmane.org"
       TITLE="[Mono-list] Serializable object with Non-Serializable Fields	--&gt; SerializationException">stacheldraht at interia.pl
       </A><BR>
    <I>Wed Jun  2 09:58:50 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="045244.html">[Mono-list] Serializable object with Non-Serializable Fields --	&gt; SerializationException
</A></li>
        <LI>Next message: <A HREF="045242.html">[Mono-list] Error during Apache/Mono shutdown
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45246">[ date ]</a>
              <a href="thread.html#45246">[ thread ]</a>
              <a href="subject.html#45246">[ subject ]</a>
              <a href="author.html#45246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am Mittwoch 02 Juni 2010 15:49:51 schrieb Robert Jordan:
&gt;<i> It's neither [Serializable] nor MarshalByRefObject:
</I>&gt;<i> 
</I>I've already removed [Serializable]. Sorry. :-(

&gt;<i> This is simply doomed to fails. DBConnection should be split
</I>&gt;<i> in 2 parts: one that can be safely set from the client
</I>&gt;<i> side (e.g. the connection string and other basic parameters)
</I>&gt;<i> and one that does the rest on the server (creating the
</I>&gt;<i> actual DB connection etc.).
</I>&gt;<i> 
</I>I've now found out a solution: The whole serializing stuff was because the 
DBConnectionHandler was generated on the client side and then passed to the 
PrintReceipt object, which in turn requires serialization. This was done 
intentionally to make the remote server as slim as possible. But I didn't take 
the side affects into account.

Now my class looks like this:

	public class PrintReceipt : MarshalByRefObject, IBatchJob
	{
		private DBConnectionHandler handler;
		private string              uri         = &quot;&quot;;
		private string              description = &quot;Beleg (ausgenommen Mahnung) 
erstellen&quot;;
		
		public PrintReceipt()
		{
			if (ServerInfo.isVerbose) Console.WriteLine
				(DateTime.Now.ToString() +  &quot;: Serverobjekt PrintReceipt initialisiert.&quot;);
		}
		
		public string URI {
			get {
				return this.uri;
			}
			set {
				this.uri = value;
			}
		}
		
		public string Description {
			get {
				return this.description;
			}
		}
		
		public string [] BackendConnectionParameters {
			set {
				this.handler = new DBConnectionHandler(value);
			}
		}

		// Remainder omitted.
	}

Thank you very much for your hints.

Regards
Jacek Ru&#380;yczka

----------------------------------------------------------------------
Chcesz aparat fotograficzny? U nas mozesz go wygrac!
Sprawdz &gt;&gt;&gt; <A HREF="http://linkint.pl/f2709">http://linkint.pl/f2709</A>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045244.html">[Mono-list] Serializable object with Non-Serializable Fields --	&gt; SerializationException
</A></li>
	<LI>Next message: <A HREF="045242.html">[Mono-list] Error during Apache/Mono shutdown
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45246">[ date ]</a>
              <a href="thread.html#45246">[ thread ]</a>
              <a href="subject.html#45246">[ subject ]</a>
              <a href="author.html#45246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
