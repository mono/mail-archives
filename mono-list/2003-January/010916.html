<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Javascript and Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:miguel%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="010908.html">
   <LINK REL="Next"  HREF="010923.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Javascript and Mono
   </H1>
    <B>Miguel de Icaza
    </B> 
    <A HREF="mailto:miguel%40ximian.com"
       TITLE="[Mono-list] Javascript and Mono">miguel@ximian.com
       </A><BR>
    <I>06 Jan 2003 12:59:32 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="010908.html">[Mono-list] Javascript and Mono
</A></li>
        <LI> Next message: <A HREF="010923.html">[Mono-list] Javascript and Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10916">[ date ]</a>
              <a href="thread.html#10916">[ thread ]</a>
              <a href="subject.html#10916">[ subject ]</a>
              <a href="author.html#10916">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> Looking at the .NET class libraries &amp; compilers (and what's in mono CVS) 
</I>&gt;<i> I see the following:
</I>&gt;<i> 
</I>&gt;<i> Microsoft.CSharp/JScript/VisualBasic/Vsa/Win32
</I>&gt;<i> 
</I>&gt;<i> Is it correct to assume that Microsoft.CSharp/JScript/VisualBasic contain:
</I>&gt;<i> * runtime for JScript and VisualBasic
</I>&gt;<i> * compilation / code generation classes (for all)
</I>
I would have to take a deeper look at this, but here is more or less
what is included:

	* A command line compiler (jsc).

	* An embeddable compiler (so you can compile code on the
	  flight and run it).

	* An interface to expose some of your internals and let JScript
	  consume them.

	* A CodeDOM &quot;provider&quot;, that would let you generate javascript
	  code from the CodeDOM API.

The embeddable compiler is required, because even if you compile the
code in advance:

	jsc proggie.js

proggie.js might need to dynamically evaluate some code, so the
resulting code will actually call into the compiler.

My suggestion on how to make Janet a jsc replacement is to start by
slowly adding the command line handling (for jsc.exe) so it remains
compatible;  Writing the backend that uses reflection.emit to generate
the code, and as we go, compare the output of our compiler with their
compiler.

The last step is important because their compiler will likely call into
the runtime for &quot;support&quot; methods and functions.  To allow full
compatibility, we need to have those methods as well, and use those
methods as well (this is to achieve the `copy js-program.exe to linux
and run').

Writing compilers with Reflection.Emit is not only easy, but a lot of
fun, so you should not be worried about it.  Trust me, its the easiest
way of writing a compiler ever.  Every kid in the block assumes you are
some kind of master of the universe. 

&gt;<i> If so, is this being done yet? (and why is Microsoft.VisualBasic and 
</I>&gt;<i> Microsoft.CSharp not in the same parent directory?)
</I>
I do not understand this question ;-)

&gt;<i> I assume the Microsoft.VisualBasic/CSharp/JScript will function in a 
</I>&gt;<i> similar way, is that correct? (is there code in CSharp/VisualBasic we 
</I>&gt;<i> can re-use for JScript?)
</I>
I am not sure about what lives in Microsoft.CSharp;  But what lives in
Microsoft.VisualBasic is runtime support.  

For example, when the compiler finds &quot;a + b&quot; in Visual Basic, a number
of things might happen:

	a and b are known types.
	one of a or b is a known type.
	none of them are a known type.

Depending on that information the compiler will try to call the best
method.  Lets assume (for simplicity) that they might be integers:

	a and b integers: generate IL code directly.

	a or b unknown: generate &quot;call Microsoft.VisualBasic.AddTwoThings&quot;

`AddTwoThings' is just a helper function.  And the whole assembly is
packed with helper functions that the compiler uses.

C# uses very very very few helper functions from assemblies.

&gt;<i> ps. how are we going to name the mono JScript compiler?
</I>
`janet' or `jsc' for the command line compiler sounds good.  

&gt;<i> ps2. I assume we are also prototyping this compiler in the janet module 
</I>&gt;<i> (so I need to add new directories)?
</I>
Yes, this should be done in the janet module.

Miguel


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="010908.html">[Mono-list] Javascript and Mono
</A></li>
	<LI> Next message: <A HREF="010923.html">[Mono-list] Javascript and Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10916">[ date ]</a>
              <a href="thread.html#10916">[ thread ]</a>
              <a href="subject.html#10916">[ subject ]</a>
              <a href="author.html#10916">[ author ]</a>
         </LI>
       </UL>
</body></html>
