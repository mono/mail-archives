<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Confusion with ADO connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:vputz%40nyx.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="011236.html">
   <LINK REL="Next"  HREF="011247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Confusion with ADO connections
   </H1>
    <B>Victor B. Putz
    </B> 
    <A HREF="mailto:vputz%40nyx.net"
       TITLE="[Mono-list] Confusion with ADO connections">vputz@nyx.net
       </A><BR>
    <I>Tue, 14 Jan 2003 14:29:52 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="011236.html">[Mono-list] Mono.System.XML.csproj
</A></li>
        <LI> Next message: <A HREF="011247.html">[Mono-list] Confusion with ADO connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11243">[ date ]</a>
              <a href="thread.html#11243">[ thread ]</a>
              <a href="subject.html#11243">[ subject ]</a>
              <a href="author.html#11243">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I was excited to install the Mono 0.18 rh8 packages, but have some
confusion which I haven't been able to solve.

First, very minor: the rh8 packages install the machine.config file into
/etc/mono/machine.config, but when running the xsp microserver, it looks
for machine.config in /usr/etc/mono/machine.config; not certain why.

Second: When using the xsp microserver, I simply cannot get dbpage2.aspx
to work correctly, but this appears to be a problem with the basic
database connection functionality, not XSP.  The problem with the
database is that somewhere along the way, an exception is being
generated when a connection is opened: &quot;Argument cannot be null&quot;.

I wrote a wee little c# program to test this:


      ***
      using System;
      using System.Data;
      //using System.Data.SqlClient;
      using Mono.Data.PostgreSqlClient;

      class SqlTest
        {
          public static void Main ( String[] args )
            {
              PgSqlConnection cnc;
              cnc = new PgSqlConnection();
              string connectionString = &quot;host=localhost;dbname=monotest;user=monotest;password=monotest&quot;;
              cnc.ConnectionString = connectionString;

              try
                {
                  cnc.Open();
                }
              catch ( Exception e2 )
                {
                  System.Console.WriteLine( e2.Message );
                }
              System.Console.WriteLine( &quot;Test!&quot; );
            }
        };
      ***

This, of course, simply opens the connection, does nothing with it, and
prints &quot;Test!&quot; --which seems to indicate a connection was successfully
made, at least.  However, when you change the above to

      ***
      using System;
      using System.Data;
      using System.Data.SqlClient;
      //using Mono.Data.PostgreSqlClient;

      class SqlTest
        {
          public static void Main ( String[] args )
            {
              //PgSqlConnection cnc;
              //cnc = new PgSqlConnection();

              SqlConnection cnc;

              string connectionString = &quot;host=localhost;dbname=monotest;user=monotest;password=monotest&quot;;

              cnc = new SqlConnection(connectionString);

      //	cnc.ConnectionString = connectionString;

              try
                {
                  cnc.Open();
                }
              catch ( Exception e2 )
                {
                  System.Console.WriteLine( e2.Message );
                }
              System.Console.WriteLine( &quot;Test!&quot; );
            }
        };
      ***

... you get the same exception: &quot;Argument cannot be null&quot;--which is the
same problem I had with dbpage2.aspx.

I have tried modifying dbpage2.aspx to use Mono.Data.PostgreSqlClient
directly (instead of System.Data.SqlClient), with zero luck; since
server.exe (the xsp microserver) doesn't show compilation messages,
diagnosing has been tricky, but it seems to completely disregard any &lt;%@
Import ...@&gt; directives that involve Mono.Data.PostgreSqlClient.

The dbpage1.aspx file, which dynamically loads the
Mono.Data.PostgreSqlClient assembly by brute force, has more luck (it
seems to connect, at least, and is having permission problems, but
that's progress).

It's very confusing.  I'm intrigued by the possibility of .net on Mono,
but since I can't get the database interactivity working, I'm at
something of a loss.  Any suggestions?  Should I stick with manual
loading of the assembly as per dbpage1.aspx?

--&gt;VPutz



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="011236.html">[Mono-list] Mono.System.XML.csproj
</A></li>
	<LI> Next message: <A HREF="011247.html">[Mono-list] Confusion with ADO connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11243">[ date ]</a>
              <a href="thread.html#11243">[ thread ]</a>
              <a href="subject.html#11243">[ subject ]</a>
              <a href="author.html#11243">[ author ]</a>
         </LI>
       </UL>
</body></html>
