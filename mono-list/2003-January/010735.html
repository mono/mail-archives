<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] [PATCH] running NAnt-0.6 on linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:karaznie%40acn.waw.pl">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="010777.html">
   <LINK REL="Next"  HREF="010736.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] [PATCH] running NAnt-0.6 on linux
   </H1>
    <B>Artur Karazniewicz
    </B> 
    <A HREF="mailto:karaznie%40acn.waw.pl"
       TITLE="[Mono-list] [PATCH] running NAnt-0.6 on linux">karaznie@acn.waw.pl
       </A><BR>
    <I>Wed, 01 Jan 2003 14:13:14 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="010777.html">[Mono-list] compiling myodbc app on linux
</A></li>
        <LI> Next message: <A HREF="010736.html">[Mono-list] [PATCH] running NAnt-0.6 on linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10735">[ date ]</a>
              <a href="thread.html#10735">[ thread ]</a>
              <a href="subject.html#10735">[ subject ]</a>
              <a href="author.html#10735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.
--------------090009080203000607080508
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hello,

Here is a patch allows use NAnt-0.6 (mono/mcs/nant) on linux with mono.
I tested it with mono class library and looks like it works. But there
is little one problem - looks like mono's XML parser does not like
XML node naming &quot;win32icon&quot; - I dont why - sorry System.Xml is too
huge to analyze for me. But since mcs hasn't win32icon switch (??)
I've moved this parametre from CompilerBase.cs Task (which is base class 
form CscTask and McsTask) to CscTask.cs - so now You can't
use win32icon parameter in NAnt mcs tasks. Maybe developers of 
System.Xml should look why this statement

XmlNode.SelectSingleNode( &quot;@win32icon&quot; ) fails with XML parser
exception.

regards,
Artur.

--------------090009080203000607080508
Content-Type: text/plain;
 name=&quot;NAnt.diff&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;NAnt.diff&quot;

? NAnt.diff
? src/NAnt.diff
Index: src/NAnt.exe
===================================================================
RCS file: /mono/mcs/nant/src/NAnt.exe,v
retrieving revision 1.1
diff -r1.1 NAnt.exe
Binary files /tmp/cvslIxnEa and NAnt.exe differ
Index: src/Task.cs
===================================================================
RCS file: /mono/mcs/nant/src/Task.cs,v
retrieving revision 1.1
diff -r1.1 Task.cs
157c157
&lt;                         ValidatorAttribute[] validators = (ValidatorAttribute[]) Attribute.GetCustomAttributes(fieldInfo, typeof(ValidatorAttribute));
---
&gt;<i>                         Attribute[] validators = Attribute.GetCustomAttributes(fieldInfo, typeof(ValidatorAttribute));
</I>159c159
&lt;                             string errorMessage = validator.Validate(fieldInfo.GetValue(this));
---
&gt;<i>                             string errorMessage = ((ValidatorAttribute)validator).Validate(fieldInfo.GetValue(this));
</I>Index: src/Tasks/CompilerBase.cs
===================================================================
RCS file: /mono/mcs/nant/src/Tasks/CompilerBase.cs,v
retrieving revision 1.2
diff -r1.2 CompilerBase.cs
46,48d45
&lt;         [TaskAttribute(&quot;win32icon&quot;)]
&lt;         string _win32icon = null;
&lt; 
65d61
&lt;         public string Win32Icon     { get { return _win32icon; } }
144,146d139
&lt;                     }
&lt;                     if (Win32Icon != null) {
&lt; 			WriteOption(writer, &quot;win32icon&quot;, Win32Icon);
Index: src/Tasks/CscTask.cs
===================================================================
RCS file: /mono/mcs/nant/src/Tasks/CscTask.cs,v
retrieving revision 1.2
diff -r1.2 CscTask.cs
32a33,38
&gt;<i> 	[TaskAttribute(&quot;win32icon&quot;)]
</I>&gt;<i> 	string _win32icon = null;
</I>&gt;<i> 
</I>&gt;<i> 	public string Win32Icon     { get { return _win32icon; } }
</I>&gt;<i>   
</I>&gt;<i> 
</I>37c43,46
&lt;             }
---
&gt;<i>             } 
</I>&gt;<i> 	    if (Win32Icon != null) {
</I>&gt;<i> 		WriteOption(writer, &quot;win32icon&quot;, Win32Icon);
</I>&gt;<i> 	    }
</I>
--------------090009080203000607080508--



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="010777.html">[Mono-list] compiling myodbc app on linux
</A></li>
	<LI> Next message: <A HREF="010736.html">[Mono-list] [PATCH] running NAnt-0.6 on linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10735">[ date ]</a>
              <a href="thread.html#10735">[ thread ]</a>
              <a href="subject.html#10735">[ subject ]</a>
              <a href="author.html#10735">[ author ]</a>
         </LI>
       </UL>
</body></html>
