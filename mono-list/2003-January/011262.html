<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tomi.pakarinen%40welho.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="011240.html">
   <LINK REL="Next"  HREF="011241.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Performance
   </H1>
    <B>Tomi Pakarinen
    </B> 
    <A HREF="mailto:tomi.pakarinen%40welho.com"
       TITLE="[Mono-list] Performance">tomi.pakarinen@welho.com
       </A><BR>
    <I>15 Jan 2003 21:59:19 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="011240.html">[Mono-list] Performance
</A></li>
        <LI> Next message: <A HREF="011241.html">[Mono-list] xsp error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11262">[ date ]</a>
              <a href="thread.html#11262">[ thread ]</a>
              <a href="subject.html#11262">[ subject ]</a>
              <a href="author.html#11262">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> Hi.

I compared Portable.NET &amp; Mono with this test. I got some quite
intresting results.
 

 Mono 0.18
 Pnet 0.5.0
 Amd 1.33 GHz

patope:~/Projects/mono/omat% cscc perf.cs -o perf_pnet.exe
patope:~/Projects/mono/omat% mcs perf.cs -o perf_mono.exe
Compilation succeeded

patope:~/Projects/mono/omat% mono perf_mono.exe
Time taken: 00:00:03.3260720
Time taken: 00:00:03.2472450
Time taken: 00:00:03.2428290

patope:~/Projects/mono/omat% mono perf_pnet.exe
Time taken: 00:00:02.5166270
Time taken: 00:00:02.4324730
Time taken: 00:00:02.4951060

patope:~/Projects/mono/omat% ilrun perf_mono.exe
Time taken: 00:00:43.953031
patope:~/Projects/mono/omat% ilrun perf_pnet.exe
Time taken: 00:00:44.827609

   Is Pnet's ilrun interpreter?


ildasm perf_mono.exe
        ...
        ?L210d:
                ldloc.1
                ldc.i4.1
                add
                stloc.2           
                ldloc.2           
                stloc.1
        ?L2113:
                ldloc.1
                ldc.i4     1000000000
                blt        ?L210d


ildasm perf_pnet.exe
        ...
        ?L2066:
                ldloc.1
                ldc.i4.1
                add
                stloc.1
        ?L206a:
                ldloc.1
                ldc.i4     1000000000
                blt.s      ?L2066
         ...


 Here is some disassembly from mono's jit compiler.

mono -d perf_mono.exe
....
  29:   be 00 00 00 00          mov    $0x0,%esi
  2e:   e9 07 00 00 00          jmp    3a &lt;.PerformanceTester_Main+0x3a&gt;
  33:   8b c6                   mov    %esi,%eax
  35:   40                      inc    %eax
  36:   8b d8                   mov    %eax,%ebx
  38:   8b f3                   mov    %ebx,%esi
  3a:   81 fe 00 ca 9a 3b       cmp    $0x3b9aca00,%esi
  40:   0f 8c ed ff ff ff       jl     33 &lt;.PerformanceTester_Main+0x33&gt;
....


mono -d perf_pnet.exe
00000000 &lt;.PerformanceTester_Main&gt;:
....
  29:   be 00 00 00 00          mov    $0x0,%esi
  2e:   e9 01 00 00 00          jmp    34 &lt;.PerformanceTester_Main+0x34&gt;
  33:   46                      inc    %esi
  34:   81 fe 00 ca 9a 3b       cmp    $0x3b9aca00,%esi
  3a:   0f 8c f3 ff ff ff       jl     33 &lt;.PerformanceTester_Main+0x33&gt;
....



Tomi.


On Tue, 2003-01-14 at 23:51, Simon Ask Ulsnes wrote:
&gt;<i> You all probably know this already, but I thought it was quite funny to write a tiny performance test program to see if there was any difference between Mono and Microsoft .NET Framework 1.0.3705. There was:
</I>&gt;<i> 
</I>&gt;<i> Red Hat Linux 8.0 running Mono 0.18: Approx. 7.2 seconds
</I>&gt;<i> Windows XP running MS .NET Framework 1.0.3705: Approx 5.02 seconds
</I>&gt;<i> 
</I>&gt;<i> My program basically counts 1 million and prints out how long it took.
</I>&gt;<i> 
</I>&gt;<i> The test was performed on my computer, which is an Athlon 650 Mhz.
</I>&gt;<i> 
</I>&gt;<i> Many of you will probably consider this information irrelevant, but I think it is a little interesting.
</I>&gt;<i> I don't know whether the difference of about 2 seconds is because one was on Linux and the other on Windows or because one was with Mono and the other was on .NET Framework.
</I>&gt;<i> 
</I>&gt;<i> Source attached...
</I>&gt;<i> 
</I>&gt;<i> // Simon
</I>&gt;<i> // This sentence no verb.
</I>&gt;<i> ----
</I>&gt;<i> 
</I>
&gt;<i> using System;
</I>&gt;<i> 
</I>&gt;<i> public class PerformanceTester
</I>&gt;<i> {
</I>&gt;<i> 	public static void Main(string[] args)
</I>&gt;<i> 	{
</I>&gt;<i> 		DateTime dstart = DateTime.Now;
</I>&gt;<i> 		int i = 0;
</I>&gt;<i> 		while (i&lt;1000000000)
</I>&gt;<i> 		{
</I>&gt;<i> 			i++;
</I>&gt;<i> 		}
</I>&gt;<i> 		Console.WriteLine(&quot;Time taken: &quot;+DateTime.Now.Subtract(dstart).ToString());
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="011240.html">[Mono-list] Performance
</A></li>
	<LI> Next message: <A HREF="011241.html">[Mono-list] xsp error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11262">[ date ]</a>
              <a href="thread.html#11262">[ thread ]</a>
              <a href="subject.html#11262">[ subject ]</a>
              <a href="author.html#11262">[ author ]</a>
         </LI>
       </UL>
</body></html>
