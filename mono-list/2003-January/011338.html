<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Binary serialization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:miguel%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="011337.html">
   <LINK REL="Next"  HREF="011403.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Binary serialization
   </H1>
    <B>Miguel de Icaza
    </B> 
    <A HREF="mailto:miguel%40ximian.com"
       TITLE="[Mono-list] Binary serialization">miguel@ximian.com
       </A><BR>
    <I>17 Jan 2003 11:10:35 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="011337.html">[Mono-list] Binary serialization
</A></li>
        <LI> Next message: <A HREF="011403.html">[Mono-list] Binary serialization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11338">[ date ]</a>
              <a href="thread.html#11338">[ thread ]</a>
              <a href="subject.html#11338">[ subject ]</a>
              <a href="author.html#11338">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Lluis,

&gt;<i> I've just commited the implementation of BinaryFormatter and other
</I>&gt;<i> support classes. Now Mono has support for binary serialization!!
</I>
Your documentation work is amazing!   The research you have done is
amazing.  I will comment later on as well.
 
&gt;<i> I've attached a document that describes the format. There are some
</I>&gt;<i> gaps in some tables of codes, so if you find a meaning for the missing
</I>&gt;<i> codes, please contact me and I'll update the document.
</I>
Is it possible to check the document in CVS as well?

&gt;<i> However, it does not mean that mono serialization is fully compatible
</I>&gt;<i> with microsoft's runtime. Although the format is the same, objects may
</I>&gt;<i> have a different internal structure. For example, mono's ArrayList
</I>&gt;<i> stores elements in an object array named dataArray, while in MS
</I>&gt;<i> runtime, it is named _items. An ArrayList serialized using mono is
</I>&gt;<i> currently not deserializable with MS and vice-versa. I think it
</I>&gt;<i> happens the same with many other classes, and changing all of them may
</I>&gt;<i> be a lot of work.
</I>
If it is just a matter of the fields having compatible names, it might
be worth just changing the names in our implementation.  It would be
more difficult if we need more fields to be serialized though.

We should try things one at a time, and see how far we can get. 

&gt;<i> Another difference is how primitive types are serialized. I've noticed
</I>&gt;<i> that MS uses the codes of the enum TypeCode to identify primitive
</I>&gt;<i> types. I did the same, but the codes of mono's TypeCode enum are
</I>&gt;<i> different, so the formatter gets confused when reading values of an
</I>&gt;<i> object serialized with MS runtime. I've also seen that decimal values
</I>&gt;<i> are serialized using a different format. However, this should be easy
</I>&gt;<i> to solve.
</I>
This seems like a bug in our runtime.  The TypeCode enumeration should
in principle have the same values.  If it does not, that is our
mistake.  Do you know which values are wrong?  (Or all of it?)

&gt;<i> Now, I'll try to plug this into Remoting ;-)
</I>
Excellent work Lluis, excellent.

Miguel


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="011337.html">[Mono-list] Binary serialization
</A></li>
	<LI> Next message: <A HREF="011403.html">[Mono-list] Binary serialization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11338">[ date ]</a>
              <a href="thread.html#11338">[ thread ]</a>
              <a href="subject.html#11338">[ subject ]</a>
              <a href="author.html#11338">[ author ]</a>
         </LI>
       </UL>
</body></html>
