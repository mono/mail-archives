<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Marshalling array of structs?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jason%40379.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="011745.html">
   <LINK REL="Next"  HREF="011733.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Marshalling array of structs?
   </H1>
    <B>J. Perkins
    </B> 
    <A HREF="mailto:jason%40379.com"
       TITLE="[Mono-list] Marshalling array of structs?">jason@379.com
       </A><BR>
    <I>30 Jan 2003 16:15:50 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="011745.html">[Mono-list] RE: System.Xml.Serialization.XmlSerializer
</A></li>
        <LI> Next message: <A HREF="011733.html">[Mono-list] mono-hackers --&gt; mono-devel-list
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11727">[ date ]</a>
              <a href="thread.html#11727">[ thread ]</a>
              <a href="subject.html#11727">[ subject ]</a>
              <a href="author.html#11727">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A general C# question, hope it isn't out of place here but I haven't had
much success with the MS folks.

I have a function that takes a generic array (I am using System.Array
right now but I can change that if needed) as a parameter. I know that
it is an array of structs with the LayoutKind.Sequential attribute, but
I don't know their exact format. I can get the stride and length of the
array, so I know how many bytes it takes up. Now I need to copy the
contents of the array to either unmanaged memory or a byte array. I can
call out to a C function if necessary. For the life of me I can't figure
out how to do it. I have tried Marshal.StructureToPtr(),
Buffer.BlockCopy(), and all kinds of MarshalAs attributes but I always
get some type of casting or argument exception complaining about a lack
of layout information.

Has anyone accomplished this, and if so how the heck did you do it? It
seems like it should be possible. Thanks for any advice.

Jason
379




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="011745.html">[Mono-list] RE: System.Xml.Serialization.XmlSerializer
</A></li>
	<LI> Next message: <A HREF="011733.html">[Mono-list] mono-hackers --&gt; mono-devel-list
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11727">[ date ]</a>
              <a href="thread.html#11727">[ thread ]</a>
              <a href="subject.html#11727">[ subject ]</a>
              <a href="author.html#11727">[ author ]</a>
         </LI>
       </UL>
</body></html>
