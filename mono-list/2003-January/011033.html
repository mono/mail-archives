<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] VFAT vs Unix filesystems...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:simon%40psionics.demon.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="011013.html">
   <LINK REL="Next"  HREF="011034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] VFAT vs Unix filesystems...
   </H1>
    <B>Simon Waite
    </B> 
    <A HREF="mailto:simon%40psionics.demon.co.uk"
       TITLE="[Mono-list] VFAT vs Unix filesystems...">simon@psionics.demon.co.uk
       </A><BR>
    <I>Wed, 8 Jan 2003 22:46:09 -0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="011013.html">[Mono-list] VFAT vs Unix filesystems...
</A></li>
        <LI> Next message: <A HREF="011034.html">[Mono-list] VFAT vs Unix filesystems...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11033">[ date ]</a>
              <a href="thread.html#11033">[ thread ]</a>
              <a href="subject.html#11033">[ subject ]</a>
              <a href="author.html#11033">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I maintain the premise that dumbing down the DLL search method is a
&quot;Bad Idea&quot;(tm) - depending on which strategy you use to lookup
MyAssembly.dll.

For instance a malicious user could insert MYASSEMBLY.DLL into the 
search path, and override the assembly the app is taking. - Possibly
with disasterous concequences.

Of course the most likely story is that someone will accidently have
this problem, and spend days figuring it out. Regardless if you do 
dumb down the FS in mono ,leaving it as-is presents a similar problem
it has to be written in the documentation in LARGE LETTERS.

As for GAC, I'm not even sure any discussion documents wrt unix 
implementations are even about. I know for one, that I'd not want
mono being suid and handling all the assemblies for a cache.

The most likely case being is something like a .mono/gac directory
for each user, with a /var/share/mono/gac for system-wide officially
sanctioned assemblies - maybe.


Just my 2p

-S

----- Original Message ----- 
From: &quot;Jonathan Pryor&quot; &lt;<A HREF="mailto:jonpryor@vt.edu">jonpryor@vt.edu</A>&gt;
To: &quot;Pablo Baena&quot; &lt;<A HREF="mailto:pbaena@uol.com.ar">pbaena@uol.com.ar</A>&gt;
Cc: &quot;Mono List&quot; &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;
Sent: Wednesday, January 08, 2003 4:14 PM
Subject: Re: [Mono-list] VFAT vs Unix filesystems...


&gt;<i> My two cents (since everyone else has already given theirs...)
</I>&gt;<i> 
</I>&gt;<i> Mono should be case-insensitive for all assembly name lookups.
</I>&gt;<i> 
</I>&gt;<i> Why?  Compatibility.  And it makes sense.  Here's why.
</I>&gt;<i> 
</I>&gt;<i> Long term (IIRC) we'll be following .NET.  Which means we'll have the
</I>&gt;<i> concept of shared assemblies (located in the Global Assembly Cache
</I>&gt;<i> (GAC)) and non-shared assemblies, located in the same directory (or a
</I>&gt;<i> sub-directory) as the executable.
</I>&gt;<i> 
</I>&gt;<i> The GAC stores an assemblies version, locale, public key, etc., along
</I>&gt;<i> with the assemblies file name.  This allows multiple different vendors
</I>&gt;<i> to have a shared assembly with the same name (e.g. MySharedAssembly.dll)
</I>&gt;<i> installed at the same time, since the public key *must* be different
</I>&gt;<i> (different vendors).  Likewise for two different versions of a shared
</I>&gt;<i> assembly from the same vendor: the version will be different, so you'll
</I>&gt;<i> have to store multiple copies.
</I>&gt;<i> 
</I>&gt;<i> End result: for shared assemblies, you can't just use case-sensitive
</I>&gt;<i> name comparisons anyway, since you need to take the version, public key,
</I>&gt;<i> etc. into consideration.  For shared assemblies, case-insensitive name
</I>&gt;<i> comparisons are the least of our worries, so we can always use
</I>&gt;<i> case-insensitive searches.
</I>&gt;<i> 
</I>&gt;<i> That leaves local/non-shared assemblies.  Since these will be in the
</I>&gt;<i> application's directory, we could argue that name casing is irrelevant,
</I>&gt;<i> so just use case-sensitive names.  However, when would case-sensitive
</I>&gt;<i> names be important for a single executable?  When you have
</I>&gt;<i> ``Assembly.dll'' and ``assembly.dll'' used by the same program.  Unless
</I>&gt;<i> they're in different sub-directories, this likely won't operate properly
</I>&gt;<i> under .NET since Windows will only see one of those files, not both. 
</I>&gt;<i> Plus, it would be brain-dead/stupid for a developer to do that, so I
</I>&gt;<i> don't see much point in supporting that behavior.
</I>&gt;<i> 
</I>&gt;<i> So, *long-term*, I think case-insensitive searches should be the
</I>&gt;<i> default.  However, before we get there we need to implement GAC support
</I>&gt;<i> and the rest of the assembly-loading algorithms.
</I>&gt;<i> 
</I>&gt;<i> Short term, stick with the current behavior.  We should focus on correct
</I>&gt;<i> long-term behavior instead of worrying about short-term hacks.
</I>&gt;<i> 
</I>&gt;<i>  - Jon
</I>&gt;<i> 
</I>&gt;<i> On Tue, 2003-01-07 at 20:21, Pablo Baena wrote:
</I>&gt;<i> &gt; I've noticed that when a .NET assembly is referenced on a program
</I>&gt;<i> &gt; running on Windows, the casing of the assembly name is ignored, thus
</I>&gt;<i> &gt; when running the compiled program on Unix (or any real OS :O), Mono
</I>&gt;<i> &gt; will fail to load the assembly if only one character differs on the
</I>&gt;<i> &gt; case.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Am I clear on this? Just to clarify my stupid english: 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have a Classpath.dll on Windows. I compile the program with:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; mcs /r:classpath chachacha.cs
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; which ends successfully.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Then when I run the prog in Linux, mono fails because it doesn't find
</I>&gt;<i> &gt; classpath.dll, and this is solved renaming the dll, but this is just
</I>&gt;<i> &gt; annoying.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Fill a bug report I should?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; -- 
</I>&gt;<i> &gt; Pablo Baena &lt;<A HREF="mailto:pbaena@uol.com.ar">pbaena@uol.com.ar</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@ximian.com">Mono-list@ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="011013.html">[Mono-list] VFAT vs Unix filesystems...
</A></li>
	<LI> Next message: <A HREF="011034.html">[Mono-list] VFAT vs Unix filesystems...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11033">[ date ]</a>
              <a href="thread.html#11033">[ thread ]</a>
              <a href="subject.html#11033">[ subject ]</a>
              <a href="author.html#11033">[ author ]</a>
         </LI>
       </UL>
</body></html>
