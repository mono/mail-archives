<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] RE: [Mono-hackers-list] Testing .config files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:nmatrixdotnet%40msn.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="010854.html">
   <LINK REL="Next"  HREF="010852.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] RE: [Mono-hackers-list] Testing .config files
   </H1>
    <B>NMatrix Open Source
    </B> 
    <A HREF="mailto:nmatrixdotnet%40msn.com"
       TITLE="[Mono-list] RE: [Mono-hackers-list] Testing .config files">nmatrixdotnet@msn.com
       </A><BR>
    <I>Sun, 05 Jan 2003 00:41:00 -0300</I>
    <P><UL>
        <LI> Previous message: <A HREF="010854.html">[Mono-list] running the corlib unit tests under linux
</A></li>
        <LI> Next message: <A HREF="010852.html">[Mono-list] RE: [Mono-hackers-list] Testing .config files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10849">[ date ]</a>
              <a href="thread.html#10849">[ thread ]</a>
              <a href="subject.html#10849">[ subject ]</a>
              <a href="author.html#10849">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I may be wrong, but I think this approach won't work because &quot;internal&quot; 
means accessible only from the current assembly (I'm pretty sure). It 
doesn't matter the namespace, AFAIK.
I faced the same problem with other projects, and I only could add the test 
classes inside a #if DEBUG region and put them in the same assembly they 
test. This way, the tests can be called from outside only in debug builds, 
but they can access any internal members of the assembly classes.

Daniel

&gt;<i>From: &quot;Nick Drochak&quot; &lt;<A HREF="mailto:ndrochak@gol.com">ndrochak@gol.com</A>&gt;
</I>&gt;<i>To: &quot;Jonathan Pryor&quot; &lt;<A HREF="mailto:jonpryor@vt.edu">jonpryor@vt.edu</A>&gt;, &quot;Mono List&quot; &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;, 
</I>&gt;<i>   &quot;Mono Hackers&quot; &lt;<A HREF="mailto:mono-hackers-list@ximian.com">mono-hackers-list@ximian.com</A>&gt;
</I>&gt;<i>Subject: RE: [Mono-hackers-list] Testing .config files
</I>&gt;<i>Date: Sat, 4 Jan 2003 00:23:21 -1000
</I>&gt;<i>
</I>&gt;|<i>  -----Original Message-----
</I>&gt;|<i>  From: <A HREF="mailto:mono-hackers-list-admin@ximian.com">mono-hackers-list-admin@ximian.com</A>
</I>&gt;|<i>  [mailto:<A HREF="mailto:mono-hackers-list-admin@ximian.com">mono-hackers-list-admin@ximian.com</A>]On Behalf Of Jonathan Pryor
</I>&gt;|<i>  Sent: Friday, December 20, 2002 10:37 AM
</I>&gt;|<i>  To: Mono List; Mono Hackers
</I>&gt;|<i>  Subject: [Mono-hackers-list] Testing .config files
</I>&gt;|<i>
</I>&gt;|<i>
</I>&gt;|<i>  While trying to write test cases for TraceSwitch's, I ran across an
</I>&gt;|<i>  issue I had asked about before (on December 12)...and received no
</I>&gt;|<i>  response.  Here's hoping that a second plea will help.
</I>&gt;|<i>
</I>&gt;|<i>  Does anybody have any ideas on how to test the behavior/handling of
</I>&gt;|<i>  application .config files?
</I>&gt;|<i>
</I>&gt;<i>
</I>&gt;<i>Hi Jonathan,
</I>&gt;<i>
</I>&gt;<i>I'm on vacation right now, and can't try it myself, but here's my ideas
</I>&gt;<i>which come from basic unit testing methodogies:
</I>&gt;<i>
</I>&gt;<i>1) The problem lies in the design (as implemented) of the Switch class.  It
</I>&gt;<i>uses a DiagnosticsConfiguration class to get the setting value, which in
</I>&gt;<i>turn probably opens and reads a file. If it were possible to specify at
</I>&gt;<i>runtime which class to use to get the value, then any IDictionary would do.
</I>&gt;<i>For example, if we add an internal property &quot;Dictionary&quot; to Switch to hold
</I>&gt;<i>an IDictionary then GetConfigFileSetting() would use that property instead
</I>&gt;<i>of the &quot;d&quot; variable it currently uses.  We could set the initial value of
</I>&gt;<i>Dictionary to DiagnosticsConfiguration.Settings [&quot;switches&quot;]. I beleive an
</I>&gt;<i>internal property can be accessed by any other class in the same namespace?
</I>&gt;<i>
</I>&gt;<i>2) If so, the unit test class's namespace could be &quot;System.Diagnostics&quot; so
</I>&gt;<i>that it could change the value of the TraceSwitch's internal Dictionary
</I>&gt;<i>property (which it inherited from Switch).  We would use a &quot;mock&quot; settings
</I>&gt;<i>dictionary object that we could pre-load with the values we want it to
</I>&gt;<i>provide to TraceSwitch.
</I>&gt;<i>
</I>&gt;<i>This avoids the problem completely of reading acutal config files, which is
</I>&gt;<i>not really the responsibility of TraceSwitch anyway.  We just want to check
</I>&gt;<i>a that those boolean properties behave correctly, etc. It also avoids nasty
</I>&gt;<i>AppDomain stuff, which is really overkill for this simple unit test also.
</I>&gt;<i>
</I>&gt;<i>If you want more ideas on this &quot;mock object&quot; testing pattern or other info
</I>&gt;<i>on unit testing in general, check out www.junit.org.
</I>&gt;<i>
</I>&gt;<i>I'll try some of this when I get back from vacation if you don't get a
</I>&gt;<i>chance to, or if I've been completely incomprehensible :)
</I>&gt;<i>
</I>&gt;<i>Regards,
</I>&gt;<i>Nick D.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mono-hackers-list maillist  -  <A HREF="mailto:Mono-hackers-list@ximian.com">Mono-hackers-list@ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-hackers-list">http://lists.ximian.com/mailman/listinfo/mono-hackers-list</A>
</I>

_________________________________________________________________
Add photos to your e-mail with MSN 8. Get 2 months FREE*. 
<A HREF="http://join.msn.com/?page=features/featuredemail">http://join.msn.com/?page=features/featuredemail</A>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="010854.html">[Mono-list] running the corlib unit tests under linux
</A></li>
	<LI> Next message: <A HREF="010852.html">[Mono-list] RE: [Mono-hackers-list] Testing .config files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10849">[ date ]</a>
              <a href="thread.html#10849">[ thread ]</a>
              <a href="subject.html#10849">[ subject ]</a>
              <a href="author.html#10849">[ author ]</a>
         </LI>
       </UL>
</body></html>
