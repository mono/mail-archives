<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] RE: [Mono-hackers-list] Testing .config files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ndrochak%40gol.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="010861.html">
   <LINK REL="Next"  HREF="010837.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] RE: [Mono-hackers-list] Testing .config files
   </H1>
    <B>Nick Drochak
    </B> 
    <A HREF="mailto:ndrochak%40gol.com"
       TITLE="[Mono-list] RE: [Mono-hackers-list] Testing .config files">ndrochak@gol.com
       </A><BR>
    <I>Sat, 4 Jan 2003 00:23:21 -1000</I>
    <P><UL>
        <LI> Previous message: <A HREF="010861.html">[Mono-list] how to use AnonCVS access in the Windows NT ?
</A></li>
        <LI> Next message: <A HREF="010837.html">[Mono-list] RE: [Mono-hackers-list] Testing .config files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10827">[ date ]</a>
              <a href="thread.html#10827">[ thread ]</a>
              <a href="subject.html#10827">[ subject ]</a>
              <a href="author.html#10827">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>|<i>  -----Original Message-----
</I>|<i>  From: <A HREF="mailto:mono-hackers-list-admin@ximian.com">mono-hackers-list-admin@ximian.com</A>
</I>|<i>  [mailto:<A HREF="mailto:mono-hackers-list-admin@ximian.com">mono-hackers-list-admin@ximian.com</A>]On Behalf Of Jonathan Pryor
</I>|<i>  Sent: Friday, December 20, 2002 10:37 AM
</I>|<i>  To: Mono List; Mono Hackers
</I>|<i>  Subject: [Mono-hackers-list] Testing .config files
</I>|<i>
</I>|<i>
</I>|<i>  While trying to write test cases for TraceSwitch's, I ran across an
</I>|<i>  issue I had asked about before (on December 12)...and received no
</I>|<i>  response.  Here's hoping that a second plea will help.
</I>|<i>
</I>|<i>  Does anybody have any ideas on how to test the behavior/handling of
</I>|<i>  application .config files?
</I>|<i>
</I>
Hi Jonathan,

I'm on vacation right now, and can't try it myself, but here's my ideas
which come from basic unit testing methodogies:

1) The problem lies in the design (as implemented) of the Switch class.  It
uses a DiagnosticsConfiguration class to get the setting value, which in
turn probably opens and reads a file. If it were possible to specify at
runtime which class to use to get the value, then any IDictionary would do.
For example, if we add an internal property &quot;Dictionary&quot; to Switch to hold
an IDictionary then GetConfigFileSetting() would use that property instead
of the &quot;d&quot; variable it currently uses.  We could set the initial value of
Dictionary to DiagnosticsConfiguration.Settings [&quot;switches&quot;]. I beleive an
internal property can be accessed by any other class in the same namespace?

2) If so, the unit test class's namespace could be &quot;System.Diagnostics&quot; so
that it could change the value of the TraceSwitch's internal Dictionary
property (which it inherited from Switch).  We would use a &quot;mock&quot; settings
dictionary object that we could pre-load with the values we want it to
provide to TraceSwitch.

This avoids the problem completely of reading acutal config files, which is
not really the responsibility of TraceSwitch anyway.  We just want to check
a that those boolean properties behave correctly, etc. It also avoids nasty
AppDomain stuff, which is really overkill for this simple unit test also.

If you want more ideas on this &quot;mock object&quot; testing pattern or other info
on unit testing in general, check out www.junit.org.

I'll try some of this when I get back from vacation if you don't get a
chance to, or if I've been completely incomprehensible :)

Regards,
Nick D.



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="010861.html">[Mono-list] how to use AnonCVS access in the Windows NT ?
</A></li>
	<LI> Next message: <A HREF="010837.html">[Mono-list] RE: [Mono-hackers-list] Testing .config files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10827">[ date ]</a>
              <a href="thread.html#10827">[ thread ]</a>
              <a href="subject.html#10827">[ subject ]</a>
              <a href="author.html#10827">[ author ]</a>
         </LI>
       </UL>
</body></html>
