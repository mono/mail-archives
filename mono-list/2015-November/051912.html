<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] mono embedding in c++: how to get a array from C#	code?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20mono%20embedding%20in%20c%2B%2B%3A%20how%20to%20get%20a%20array%20from%20C%23%0A%09code%3F&In-Reply-To=%3C3FC1226E-4089-4A95-B346-13C464A456D1%40mugginsoft.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="051911.html">
   <LINK REL="Next"  HREF="051915.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] mono embedding in c++: how to get a array from C#	code?</H1>
    <B>Jonathan Mitchell</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20mono%20embedding%20in%20c%2B%2B%3A%20how%20to%20get%20a%20array%20from%20C%23%0A%09code%3F&In-Reply-To=%3C3FC1226E-4089-4A95-B346-13C464A456D1%40mugginsoft.com%3E"
       TITLE="[Mono-list] mono embedding in c++: how to get a array from C#	code?">jonathan at mugginsoft.com
       </A><BR>
    <I>Mon Nov  9 10:04:23 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="051911.html">[Mono-list] mono embedding in c++: how to get a array from C#	code?
</A></li>
        <LI>Next message: <A HREF="051915.html">[Mono-list] Looking for mono expert to help debug a hanging process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51912">[ date ]</a>
              <a href="thread.html#51912">[ thread ]</a>
              <a href="subject.html#51912">[ subject ]</a>
              <a href="author.html#51912">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On 9 Nov 2015, at 00:22, sunsflower &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">ssfxtr at outlook.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> and how can I pass a pointer to mono?...
</I>&gt;<i> &lt;code&gt;
</I>&gt;<i> stuct test
</I>&gt;<i> {
</I>&gt;<i>        int index;
</I>&gt;<i>        string name;
</I>&gt;<i> };
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> MonoMethod* method = mono_class_get_method_from_name(klass, &quot;testfunc&quot;, 2);
</I>&gt;<i> MonoException* ex;
</I>&gt;<i> typedef int(__stdcall *func)(MonoObject*, test*, MonoException**);
</I>&gt;<i> func f1 = (func)(mono_method_get_unmanaged_thunk(method));
</I>&gt;<i> test t1;
</I>&gt;<i> &lt;/code&gt;
</I>&gt;<i> something like this? but C# won't accept a pointer except in unsafe context.
</I>&gt;<i> is there some other way of doing this - to read from a pointer to a struct
</I>&gt;<i> in C# and change it? or should I just pass the struct as a value?
</I>&gt;<i> 
</I>I am not quite sure what your intention is here.
The managed struct is of course a value type.
Try passing your struct reference like so (MonoObject *)&amp;x
I think that a struct returned by a method is a MonoObject * that you can access using normal field and property accessors.

If curious, you could glance at the following - it&#8217;s Obj-C not C++ but it might help.
<A HREF="https://github.com/ThesaurusSoftware/Dubrovnik/blob/master/Framework/XCode/Utility/DBInvoke.m">https://github.com/ThesaurusSoftware/Dubrovnik/blob/master/Framework/XCode/Utility/DBInvoke.m</A>
<A HREF="https://github.com/ThesaurusSoftware/Dubrovnik/blob/master/Framework/XCode/Dubrovnik%20Unit%20Tests/DBUReferenceObject.m">https://github.com/ThesaurusSoftware/Dubrovnik/blob/master/Framework/XCode/Dubrovnik%20Unit%20Tests/DBUReferenceObject.m</A>

I agree that Mono is great but the embedded API is quite opaque and the headers and overall level of documentation is minimalist to say the least.
It does make for quite a steep learning curve but the community is genuinely helpful.


</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="051911.html">[Mono-list] mono embedding in c++: how to get a array from C#	code?
</A></li>
	<LI>Next message: <A HREF="051915.html">[Mono-list] Looking for mono expert to help debug a hanging process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51912">[ date ]</a>
              <a href="thread.html#51912">[ thread ]</a>
              <a href="subject.html#51912">[ subject ]</a>
              <a href="author.html#51912">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
