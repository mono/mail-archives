<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: The Mauve unicode testcase and VM performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:sballard%40netreach.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="019571.html">
   <LINK REL="Next"  HREF="019567.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: The Mauve unicode testcase and VM performance
   </H1>
    <B>Stuart Ballard
    </B> 
    <A HREF="mailto:sballard%40netreach.com"
       TITLE="[Mono-list] Re: The Mauve unicode testcase and VM performance">sballard@netreach.com
       </A><BR>
    <I>Tue, 13 Apr 2004 14:55:03 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="019571.html">[Mono-list] Gladify SqlSharpGtk
</A></li>
        <LI> Next message: <A HREF="019567.html">[Mono-list] Re: The Mauve unicode testcase and VM performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19552">[ date ]</a>
              <a href="thread.html#19552">[ thread ]</a>
              <a href="subject.html#19552">[ subject ]</a>
              <a href="author.html#19552">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mark Wielaard wrote:
&gt;<i> You then still need the original &quot;exe&quot; for execution.
</I>&gt;<i> The man page says about --aot:
</I>&gt;<i> 
</I>&gt;<i> 	This  option is used to precompile the CIL code in the specified
</I>&gt;<i> 	assembly to native code.  The generated code is stored in a file
</I>&gt;<i> 	with  the extension .so.  This file will be automatically picked
</I>&gt;<i> 	up by the runtime when the assembly is executed.
</I>&gt;<i> 
</I>&gt;<i> 	This pre-compiles the methods,  but  the  original  assembly  is
</I>&gt;<i> 	still  required to execute as this one contains the metadata and
</I>&gt;<i> 	exception information which is not  availble  on  the  generated
</I>&gt;<i> 	file.   When  precompiling  code, you might want to compile with
</I>&gt;<i> 	all optimizations (-O=all).  Pre-compiled code is position inde-
</I>&gt;<i> 	pendent code.
</I>&gt;<i>         
</I>&gt;<i>      load  test  overhead  total
</I>&gt;<i> Old: 1703  1292  3174      6169
</I>&gt;<i> New: 2944  1337   624      4905
</I>&gt;<i> Oat: 2944  1312   626      4882
</I>&gt;<i> 
</I>&gt;<i> So that doesn't seem to help in this case (or I did something wrong and
</I>&gt;<i> it isn't picking up the mauve.exe.so after all).
</I>
Did you try --aot'ing classpath.dll, IK.VM.NET.dll etc?

I'd imagine that this particular microbenchmark spends a large 
proportion of its time inside classpath itself, suggesting that merely 
JITing the mauve part wouldn't help much.

The man page you cited says that --aot &quot;precompiles the CIL code in the 
specified assembly&quot;. In .NET terminology, each dll or exe is a separate 
assembly. So I take that doc to imply that you need to separately AOT 
each dll as well as the exe itself.

Interestingly, my installation of mono (from debian sid) doesn't even 
come with its own libraries AOT'd. I'd have thought that you'd get the 
best performance by AOT'ing *all* the libraries, including (and 
especially) the low-level platform ones such as System.dll and 
System.Xml.dll.

CC'ing mono-list for any insight they might have into why (or why not) 
you might want to AOT the platform libraries...

Stuart.

-- 
Stuart Ballard, Senior Web Developer
NetReach, Inc.
(215) 283-2300, ext. 126
<A HREF="http://www.netreach.com/">http://www.netreach.com/</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="019571.html">[Mono-list] Gladify SqlSharpGtk
</A></li>
	<LI> Next message: <A HREF="019567.html">[Mono-list] Re: The Mauve unicode testcase and VM performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19552">[ date ]</a>
              <a href="thread.html#19552">[ thread ]</a>
              <a href="subject.html#19552">[ subject ]</a>
              <a href="author.html#19552">[ author ]</a>
         </LI>
       </UL>
</body></html>
