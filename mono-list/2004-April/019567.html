<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re: The Mauve unicode testcase and VM performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mark%40klomp.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="019552.html">
   <LINK REL="Next"  HREF="019556.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re: The Mauve unicode testcase and VM performance
   </H1>
    <B>Mark Wielaard
    </B> 
    <A HREF="mailto:mark%40klomp.org"
       TITLE="[Mono-list] Re: The Mauve unicode testcase and VM performance">mark@klomp.org
       </A><BR>
    <I>Tue, 13 Apr 2004 21:10:44 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="019552.html">[Mono-list] Re: The Mauve unicode testcase and VM performance
</A></li>
        <LI> Next message: <A HREF="019556.html">[Mono-list] Re: The Mauve unicode testcase and VM performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19567">[ date ]</a>
              <a href="thread.html#19567">[ thread ]</a>
              <a href="subject.html#19567">[ subject ]</a>
              <a href="author.html#19567">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-iIMUui5gsvw2M+oqYqaD
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

Hi,

On Tue, 2004-04-13 at 20:55, Stuart Ballard wrote:
&gt;<i> Did you try --aot'ing classpath.dll, IK.VM.NET.dll etc?
</I>&gt;<i>=20
</I>&gt;<i> I'd imagine that this particular microbenchmark spends a large=20
</I>&gt;<i> proportion of its time inside classpath itself, suggesting that merely=20
</I>&gt;<i> JITing the mauve part wouldn't help much.
</I>
Should have thought about that.
Just tried it, but:

$ for i in *.dll; do mono --aot -O=3Dall $i; done
Mono Ahead of Time compiler - compiling assembly OpenSystem.Java.dll
Executing the native assembler: as /tmp/mono_aot_ZNn0Pd -o /tmp/mono_aot_ZN=
n0Pd.o
Executing the native linker: ld -shared -o OpenSystem.Java.dll.so /tmp/mono=
_aot_ZNn0Pd.o
Compiled 12 out of 12 methods (100%)
0 methods contain absolute addresses (0%)
0 methods contain wrapper references (0%)
0 methods contain lmf pointers (0%)
0 methods have other problems (0%)
AOT RESULT 0
Mono Ahead of Time compiler - compiling assembly SharpZipLib.dll
Executing the native assembler: as /tmp/mono_aot_SVrc0t -o /tmp/mono_aot_SV=
rc0t.o
Executing the native linker: ld -shared -o SharpZipLib.dll.so /tmp/mono_aot=
_SVrc0t.o
Compiled 508 out of 540 methods (94%)
31 methods contain absolute addresses (5%)
1 methods contain wrapper references (0%)
0 methods contain lmf pointers (0%)
0 methods have other problems (0%)
AOT RESULT 0
Mono Ahead of Time compiler - compiling assembly awt.dll
Executing the native assembler: as /tmp/mono_aot_DbmJ3s -o /tmp/mono_aot_Db=
mJ3s.o
Executing the native linker: ld -shared -o awt.dll.so /tmp/mono_aot_DbmJ3s.=
o
Compiled 320 out of 342 methods (93%)
0 methods contain absolute addresses (0%)
22 methods contain wrapper references (6%)
0 methods contain lmf pointers (0%)
0 methods have other problems (0%)
AOT RESULT 0
Mono Ahead of Time compiler - compiling assembly classpath.dll
Executing the native assembler: as /tmp/mono_aot_NrbGZa -o /tmp/mono_aot_Nr=
bGZa.o
Executing the native linker: ld -shared -o classpath.dll.so /tmp/mono_aot_N=
rbGZa.o
Compiled 18338 out of 18766 methods (97%)
0 methods contain absolute addresses (0%)
428 methods contain wrapper references (2%)
0 methods contain lmf pointers (0%)
0 methods have other problems (0%)
AOT RESULT 0
Mono Ahead of Time compiler - compiling assembly ik.vm.jni.dll
=20
** ERROR **: file object.c: line 466 (mono_class_vtable): assertion failed:=
 (fklass-&gt;byval_arg.type =3D=3D MONO_TYPE_PTR)
aborting...
Aborted
Mono Ahead of Time compiler - compiling assembly ik.vm.net.dll
Executing the native assembler: as /tmp/mono_aot_PGuh22 -o /tmp/mono_aot_PG=
uh22.o
Executing the native linker: ld -shared -o ik.vm.net.dll.so /tmp/mono_aot_P=
Guh22.o
Compiled 1067 out of 1092 methods (97%)
0 methods contain absolute addresses (0%)
25 methods contain wrapper references (2%)
0 methods contain lmf pointers (0%)
0 methods have other problems (0%)
AOT RESULT 0
[<A HREF="mailto:mark@elsschot">mark@elsschot</A>:~/src/mauve]
$ time echo gnu.testlet.java.lang.Character.unicode | mono mauve.exe -debug
=20
Unhandled Exception: System.TypeInitializationException: An exception was t=
hrown by the type initializer for java.io.File ---&gt; System.TypeInitializati=
onException: An exception was thrown by the type initializer for java.lang.=
System ---&gt; System.TypeInitializationException: An exception was thrown by =
the type initializer for gnu.java.io.EncodingManager ---&gt; System.TypeInitia=
lizationException: An exception was thrown by the type initializer for java=
.lang.Class ---&gt; System.ArrayTypeMismatchException: Source array type canno=
t be assigned to destination array type.
in &lt;0x000dc&gt; MethodDescriptor:FromMethodBase (System.Reflection.MethodBase)
in &lt;0x00011&gt; CompiledTypeWrapper:CreateMethodWrapper (System.Reflection.Met=
hodBase)
in &lt;0x000c9&gt; CompiledTypeWrapper:LazyPublishMembers ()
in &lt;0x00041&gt; LazyTypeWrapper:Finish ()
in &lt;0x0004d&gt; NativeCode.java.lang.VMClass:CreateClassInstance (TypeWrapper)
in &lt;0x00063&gt; NativeCode.java.lang.VMClass:getClassFromWrapper (TypeWrapper)
in &lt;0x00022&gt; NativeCode.java.lang.VMClass:getClassFromType (System.Type)
in &lt;0x00025&gt; java.lang.Object:instancehelper_getClass (object)
in &lt;0x000cd&gt; java.security.Permissions:add (java.security.Permission)
in &lt;0x00055&gt; java.lang.Class:.cctor ()
--- End of inner exception stack trace ---
=20
in &lt;0x00429&gt; gnu.java.io.EncodingManager:.cctor ()
--- End of inner exception stack trace ---
=20
in (unmanaged) gnu.java.io.EncodingManager:getEncoder (java.io.OutputStream=
)
in &lt;0x0003a&gt; java.io.OutputStreamWriter:.ctor (java.io.OutputStream)
in &lt;0x0003c&gt; java.io.PrintWriter:.ctor (java.io.OutputStream)
in &lt;0x00019&gt; java.io.PrintWriter:.ctor (java.io.OutputStream,bool)
in &lt;0x00073&gt; java.io.PrintStream:.ctor (java.io.OutputStream,bool)
in &lt;0x0006d&gt; java.lang.VMSystem:makeStandardOutputStream ()
in &lt;0x00899&gt; java.lang.System:.cctor ()
--- End of inner exception stack trace ---
=20
in (unmanaged) java.lang.System:getProperty (string)
in &lt;0x00010&gt; java.io.File:.cctor ()
--- End of inner exception stack trace ---
=20
in (unmanaged) java.io.File:.ctor (string)
in &lt;0x0003e&gt; java.io.FileReader:.ctor (string)
in &lt;0x000bf&gt; gnu.testlet.SimpleTestHarness:.ctor (bool,bool,bool)
in &lt;0x001fc&gt; gnu.testlet.SimpleTestHarness:main (string[])
=20
=20
real    0m0.519s
user    0m0.039s
sys     0m0.021s


--=-iIMUui5gsvw2M+oqYqaD
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQBAfDs0xVhZCJWr9QwRApFfAKCjw5yRMIZYFWcrUYKnLbUFCprbbACgqIBz
BwG9Qa/+5BWH9kRbrvgejLM=
=j1ow
-----END PGP SIGNATURE-----

--=-iIMUui5gsvw2M+oqYqaD--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="019552.html">[Mono-list] Re: The Mauve unicode testcase and VM performance
</A></li>
	<LI> Next message: <A HREF="019556.html">[Mono-list] Re: The Mauve unicode testcase and VM performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19567">[ date ]</a>
              <a href="thread.html#19567">[ thread ]</a>
              <a href="subject.html#19567">[ subject ]</a>
              <a href="author.html#19567">[ author ]</a>
         </LI>
       </UL>
</body></html>
