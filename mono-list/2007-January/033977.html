<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Incorrect path interpretation(gacutil)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Incorrect%20path%20interpretation%28gacutil%29&In-Reply-To=8373308.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033946.html">
   <LINK REL="Next"  HREF="033979.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Incorrect path interpretation(gacutil)</H1>
    <B>Rafael Teixeira</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Incorrect%20path%20interpretation%28gacutil%29&In-Reply-To=8373308.post%40talk.nabble.com"
       TITLE="[Mono-list] Incorrect path interpretation(gacutil)">rafael.teixeirabr at terra.com.br
       </A><BR>
    <I>Sun Jan 21 08:16:16 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="033946.html">[Mono-list] Incorrect path interpretation(gacutil)
</A></li>
        <LI>Next message: <A HREF="033979.html">[Mono-list] Incorrect path interpretation(gacutil)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33977">[ date ]</a>
              <a href="thread.html#33977">[ thread ]</a>
              <a href="subject.html#33977">[ subject ]</a>
              <a href="author.html#33977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You were right: the logic in gacutil driver, gets confused with *nix,
absolute paths.

The following patch makes it behave correctly for your case, I'll be
posting a bugzilla case and attaching the patch for review, but you can
patch locally your gacutil in the meantime.

:<i>)
</I>
Patch
-------------

Index: driver.cs
===================================================================
--- driver.cs   (revision 71418)
+++ driver.cs   (working copy)
@@ -574,7 +574,7 @@
 
                private static bool IsSwitch (string arg)
                {
-                       return (arg [0] == '-' || arg [0] == '/');
+                       return (arg [0] == '-' || (arg [0] == '/' &amp;&amp; !
arg.EndsWith(&quot;.dll&quot;) &amp;&amp; arg.IndexOf('/', 1) &lt; 0 ) );
                }
 
                private static Command GetCommand (string arg)
Index: ChangeLog
===================================================================
--- ChangeLog   (revision 71418)
+++ ChangeLog   (working copy)
@@ -1,3 +1,7 @@
+2007-01-21  Rafael Teixeira &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">rafaelteixeirabr at hotmail.com</A>&gt;
+
+       * driver.cs: accept absolute *nix paths for library names
without getting them confused with options
+
 2006-07-24  Alp Toker  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">alp at atoker.com</A>&gt;
 
        * driver.cs: Minor typo fixes in comments and informational
output.


On Mon, 2007-01-15 at 07:26 -0800, monoport wrote:
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> A Rafael D Teixeira wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; It is probably getting confused on parsing options. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; In your case it really gets confused because you have separated /i from
</I>&gt;<i> &gt; it's argument (the path to the library) with the unnecessary -f.  Try:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; mono &quot;/usr/lib/mono/lib/mono/1.0/gacutil.exe&quot; -i
</I>&gt;<i> &gt; &quot;/root/XXX/XXX/XXX/Assembly.dll&quot;
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; It should work.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Try gacutil -? (or --help), to see the somewhat expanded list of options
</I>&gt;<i> &gt; Mono's implementation has, and also the unsupported ones.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; :)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> OK, I removed the &quot;-f&quot; option
</I>&gt;<i> and again have:
</I>&gt;<i> 
</I>&gt;<i> gacutil -i /root/xxx/xxx/xxx/assembly.dll
</I>&gt;<i> Option /root/xxx/xxx/xxx/assembly.dll takes 1 argument
</I>&gt;<i> 
</I>&gt;<i> Anyone have the mono installed on Linux, plz check.
</I>&gt;<i> Is this working for you? I guess this is the bug.
</I>&gt;<i> 
</I>&gt;<i> ----
</I>&gt;<i> monoport
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033946.html">[Mono-list] Incorrect path interpretation(gacutil)
</A></li>
	<LI>Next message: <A HREF="033979.html">[Mono-list] Incorrect path interpretation(gacutil)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33977">[ date ]</a>
              <a href="thread.html#33977">[ thread ]</a>
              <a href="subject.html#33977">[ subject ]</a>
              <a href="author.html#33977">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
