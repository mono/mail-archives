<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Incorrect path interpretation(gacutil)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Incorrect%20path%20interpretation%28gacutil%29&In-Reply-To=1169385376.3441.59.camel%40fedora.webforall.com.br">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033977.html">
   <LINK REL="Next"  HREF="033981.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Incorrect path interpretation(gacutil)</H1>
    <B>Rafael Teixeira</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Incorrect%20path%20interpretation%28gacutil%29&In-Reply-To=1169385376.3441.59.camel%40fedora.webforall.com.br"
       TITLE="[Mono-list] Incorrect path interpretation(gacutil)">rafael.teixeirabr at terra.com.br
       </A><BR>
    <I>Sun Jan 21 08:27:24 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="033977.html">[Mono-list] Incorrect path interpretation(gacutil)
</A></li>
        <LI>Next message: <A HREF="033981.html">[Mono-list] Incorrect path interpretation(gacutil)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33979">[ date ]</a>
              <a href="thread.html#33979">[ thread ]</a>
              <a href="subject.html#33979">[ subject ]</a>
              <a href="author.html#33979">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>PATCH in bugzilla

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=80570">http://bugzilla.ximian.com/show_bug.cgi?id=80570</A>

On Sun, 2007-01-21 at 11:16 -0200, Rafael Teixeira wrote:
&gt;<i> You were right: the logic in gacutil driver, gets confused with *nix,
</I>&gt;<i> absolute paths.
</I>&gt;<i> 
</I>&gt;<i> The following patch makes it behave correctly for your case, I'll be
</I>&gt;<i> posting a bugzilla case and attaching the patch for review, but you can
</I>&gt;<i> patch locally your gacutil in the meantime.
</I>&gt;<i> 
</I>&gt;<i> :)
</I>&gt;<i> 
</I>&gt;<i> Patch
</I>&gt;<i> -------------
</I>&gt;<i> 
</I>&gt;<i> Index: driver.cs
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- driver.cs   (revision 71418)
</I>&gt;<i> +++ driver.cs   (working copy)
</I>&gt;<i> @@ -574,7 +574,7 @@
</I>&gt;<i>  
</I>&gt;<i>                 private static bool IsSwitch (string arg)
</I>&gt;<i>                 {
</I>&gt;<i> -                       return (arg [0] == '-' || arg [0] == '/');
</I>&gt;<i> +                       return (arg [0] == '-' || (arg [0] == '/' &amp;&amp; !
</I>&gt;<i> arg.EndsWith(&quot;.dll&quot;) &amp;&amp; arg.IndexOf('/', 1) &lt; 0 ) );
</I>&gt;<i>                 }
</I>&gt;<i>  
</I>&gt;<i>                 private static Command GetCommand (string arg)
</I>&gt;<i> Index: ChangeLog
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- ChangeLog   (revision 71418)
</I>&gt;<i> +++ ChangeLog   (working copy)
</I>&gt;<i> @@ -1,3 +1,7 @@
</I>&gt;<i> +2007-01-21  Rafael Teixeira &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">rafaelteixeirabr at hotmail.com</A>&gt;
</I>&gt;<i> +
</I>&gt;<i> +       * driver.cs: accept absolute *nix paths for library names
</I>&gt;<i> without getting them confused with options
</I>&gt;<i> +
</I>&gt;<i>  2006-07-24  Alp Toker  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">alp at atoker.com</A>&gt;
</I>&gt;<i>  
</I>&gt;<i>         * driver.cs: Minor typo fixes in comments and informational
</I>&gt;<i> output.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Mon, 2007-01-15 at 07:26 -0800, monoport wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; A Rafael D Teixeira wrote:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; It is probably getting confused on parsing options. 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; In your case it really gets confused because you have separated /i from
</I>&gt;<i> &gt; &gt; it's argument (the path to the library) with the unnecessary -f.  Try:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; mono &quot;/usr/lib/mono/lib/mono/1.0/gacutil.exe&quot; -i
</I>&gt;<i> &gt; &gt; &quot;/root/XXX/XXX/XXX/Assembly.dll&quot;
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; It should work.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Try gacutil -? (or --help), to see the somewhat expanded list of options
</I>&gt;<i> &gt; &gt; Mono's implementation has, and also the unsupported ones.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; :)
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; OK, I removed the &quot;-f&quot; option
</I>&gt;<i> &gt; and again have:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; gacutil -i /root/xxx/xxx/xxx/assembly.dll
</I>&gt;<i> &gt; Option /root/xxx/xxx/xxx/assembly.dll takes 1 argument
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Anyone have the mono installed on Linux, plz check.
</I>&gt;<i> &gt; Is this working for you? I guess this is the bug.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ----
</I>&gt;<i> &gt; monoport
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> 
</I>&gt;<i> E-mail classificado pelo Identificador de Spam Inteligente Terra.
</I>&gt;<i> Para alterar a categoria classificada, visite
</I>&gt;<i> <A HREF="http://mail.terra.com.br/protected_email/imail/imail.cgi?+_u=rafael.teixeirabr&amp;_l=1,1169385555.681673.29454.curepipe.hst.terra.com.br,5896,Des15,Des15">http://mail.terra.com.br/protected_email/imail/imail.cgi?+_u=rafael.teixeirabr&amp;_l=1,1169385555.681673.29454.curepipe.hst.terra.com.br,5896,Des15,Des15</A>
</I>&gt;<i> 
</I>&gt;<i> Esta mensagem foi verificada pelo E-mail Protegido Terra.
</I>&gt;<i> Scan engine: McAfee VirusScan / Atualizado em 19/01/2007 / Verso: 5.1.00/4943
</I>&gt;<i> Proteja o seu e-mail Terra: <A HREF="http://mail.terra.com.br/">http://mail.terra.com.br/</A>
</I>&gt;<i> 
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033977.html">[Mono-list] Incorrect path interpretation(gacutil)
</A></li>
	<LI>Next message: <A HREF="033981.html">[Mono-list] Incorrect path interpretation(gacutil)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33979">[ date ]</a>
              <a href="thread.html#33979">[ thread ]</a>
              <a href="subject.html#33979">[ subject ]</a>
              <a href="author.html#33979">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
