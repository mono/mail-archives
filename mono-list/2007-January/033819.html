<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Bug in Mono.Data.SqliteClient?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Bug%20in%20Mono.Data.SqliteClient%3F&In-Reply-To=178F487C-16F5-47E6-A127-E3A7F3889CD0%40chrisseaton.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033805.html">
   <LINK REL="Next"  HREF="033820.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Bug in Mono.Data.SqliteClient?</H1>
    <B>Thomas Zoechling</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Bug%20in%20Mono.Data.SqliteClient%3F&In-Reply-To=178F487C-16F5-47E6-A127-E3A7F3889CD0%40chrisseaton.com"
       TITLE="[Mono-list] Bug in Mono.Data.SqliteClient?">thomas.zoechling at gmx.at
       </A><BR>
    <I>Thu Jan  4 13:45:31 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="033805.html">[Mono-list] Bug in Mono.Data.SqliteClient?
</A></li>
        <LI>Next message: <A HREF="033820.html">[Mono-list] Bug in Mono.Data.SqliteClient?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33819">[ date ]</a>
              <a href="thread.html#33819">[ thread ]</a>
              <a href="subject.html#33819">[ subject ]</a>
              <a href="author.html#33819">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I tried your query and it seems to work for me.

 From Mono.Data.SqliteClient/SqliteCommand.cs:

        public SqliteDataReader ExecuteReader ()
        {
            return ExecuteReader (CommandBehavior.Default);
        }
       
        public SqliteDataReader ExecuteReader (CommandBehavior behavior)
        {
            int r;
            return ExecuteReader (behavior, true, out r);
        }
       
        public SqliteDataReader ExecuteReader (CommandBehavior behavior, 
bool want_results, out int rows_affected)
        {
            Prepare ();
           
            // The SQL string may contain multiple sql commands, so the 
main
            // thing to do is have Sqlite iterate through the commands.
            // If want_results, only the last command is returned as a
            // DataReader.  Otherwise, no command is returned as a
            // DataReader.


As you can see, the default behavior supports multiple commands.
I attached a simple test case, that contains your query.
On Mac OS 10.4.8,  mono 1.2.2.1 intel 32bit and the latest sqlite 
version my test case works as expected.
Both commands get executed, and ExecuteReader() returns a DataReader 
containing the results.

--Thomas

Chris Seaton wrote:
&gt;<i> Does anyone have experience using Mono.Data.SqliteClient?
</I>&gt;<i>
</I>&gt;<i> It works fine for me apart from when I have multiple Sql statements  
</I>&gt;<i> in a single command. If I run something like
</I>&gt;<i>
</I>&gt;<i> command = database.CreateCommand();
</I>&gt;<i> command.CommandText = &quot;update films set year = year + 10; select  
</I>&gt;<i> year, title from films where year &gt;= 1980;&quot;;
</I>&gt;<i> reader = command.ExecuteReader();
</I>&gt;<i>
</I>&gt;<i> I expect both statements to be executed and to read results from the  
</I>&gt;<i> second statement. This is what the source code seems to imply is what  
</I>&gt;<i> should happen. When I try it, only the first statement is executed.
</I>&gt;<i>
</I>&gt;<i> Any ideas?
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Chris Seaton
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>   
</I>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sqliteMultipleCommands.cs
Type: text/x-csharp
Size: 2376 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20070104/4ff239f9/attachment.bin">http://lists.ximian.com/pipermail/mono-list/attachments/20070104/4ff239f9/attachment.bin</A> 
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033805.html">[Mono-list] Bug in Mono.Data.SqliteClient?
</A></li>
	<LI>Next message: <A HREF="033820.html">[Mono-list] Bug in Mono.Data.SqliteClient?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33819">[ date ]</a>
              <a href="thread.html#33819">[ thread ]</a>
              <a href="subject.html#33819">[ subject ]</a>
              <a href="author.html#33819">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
