<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Flush FileStream to disk (fsync before 4.0 API)?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Flush%20FileStream%20to%20disk%20%28fsync%20before%204.0%20API%29%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046363.html">
   <LINK REL="Next"  HREF="046365.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Flush FileStream to disk (fsync before 4.0 API)?</H1>
    <B>Sandy Armstrong</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Flush%20FileStream%20to%20disk%20%28fsync%20before%204.0%20API%29%3F&In-Reply-To="
       TITLE="[Mono-list] Flush FileStream to disk (fsync before 4.0 API)?">sanfordarmstrong at gmail.com
       </A><BR>
    <I>Mon Dec 27 19:47:08 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="046363.html">[Mono-list] Loading symbols in GDB for a mono application
</A></li>
        <LI>Next message: <A HREF="046365.html">[Mono-list] Use Windows or Linux paths to system references when building with VS2010 for Linux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46364">[ date ]</a>
              <a href="thread.html#46364">[ thread ]</a>
              <a href="subject.html#46364">[ subject ]</a>
              <a href="author.html#46364">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Howdy,

Apparently Tomboy is one of those apps that suffers from delayed
allocation issues in ext4.  In certain shutdown scenarios this can
lead to zero-byte files for any note saved on exit.

I noticed that .NET 4 added FileStream.Flush(bool flushToDisk), which
according to the source does perform an fsync.  But given that, I must
assume that the pre-.NET 4 Flush methods do not call fsync, and I need
to maintain compatibility with older versions of Mono.  The new Flush
overload calls an internal API, MonoIO.Flush.

What is the accepted way to flush changes to disk such that an fsync
occurs?  Do I call FileStream.Flush() and then pass the handle to
Mono.Posix's fsync extern?  Am I missing something obvious that
already handles this for me?

Thanks in advance,
Sandy
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046363.html">[Mono-list] Loading symbols in GDB for a mono application
</A></li>
	<LI>Next message: <A HREF="046365.html">[Mono-list] Use Windows or Linux paths to system references when building with VS2010 for Linux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46364">[ date ]</a>
              <a href="thread.html#46364">[ thread ]</a>
              <a href="subject.html#46364">[ subject ]</a>
              <a href="author.html#46364">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
