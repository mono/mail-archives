<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] PInvoke Conventions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bsalita%40hotmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000926.html">
   <LINK REL="Next"  HREF="000676.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] PInvoke Conventions
   </H1>
    <B>Bob Salita
    </B> 
    <A HREF="mailto:bsalita%40hotmail.com"
       TITLE="[Mono-list] PInvoke Conventions">bsalita@hotmail.com
       </A><BR>
    <I>Tue, 17 Jul 2001 22:15:24 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="000926.html">[Mono-list] PInvoke Conventions
</A></li>
        <LI> Next message: <A HREF="000676.html">[Mono-list] PInvoke Conventions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#675">[ date ]</a>
              <a href="thread.html#675">[ thread ]</a>
              <a href="subject.html#675">[ subject ]</a>
              <a href="author.html#675">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>[Apologies if this is a 2nd post, hotmail upgraded this eve. Bob.]

I can forsee this will require alot of back and forth.

Every DllImport call has to be thunked, right? So wouldn't you thunk int to 
native int, long to native long?

So the prettiest definition of lseek() and lseeki64 would be:

[DllImport(&quot;libc&quot;)] long lseek(int fd, long offset, int whence);
[DllImport(&quot;libc&quot;)] long lseeki64(int fd, long offset, int whence);

Also, the C compilers definition of int and long are all important, the OS 
or hardware word size are indirect factors. Right?

Bob.

&gt;<i>I've been investigating PInvoke support for Portable.NET,
</I>&gt;<i>and I've come across some icky issues that will probably
</I>&gt;<i>affect Mono's VM as well.
</I>&gt;<i>
</I>&gt;<i>In particular, because &quot;int&quot; and &quot;long&quot; have different types
</I>&gt;<i>on different CPU's, it is difficult to write PInvoke declarations
</I>&gt;<i>in C# that will work with all Unix libc's.  The result would
</I>&gt;<i>be libraries and applications that need to be compiled
</I>&gt;<i>separately for 32-bit and 64-bit systems.
</I>&gt;<i>
</I>&gt;<i>To avoid duplication of effort, I propose we come up with a
</I>&gt;<i>common way of solving these problems.  Towards that end,
</I>&gt;<i>I have placed the following document on my Web site that
</I>&gt;<i>describes how I think this can be resolved:
</I>&gt;<i>
</I>&gt;<i><A HREF="http://www.southern-storm.com.au/pinvoke.html">http://www.southern-storm.com.au/pinvoke.html</A>
</I>&gt;<i>
</I>&gt;<i>Comments are welcome.
</I>&gt;<i>
</I>&gt;<i>Cheers,
</I>&gt;<i>
</I>&gt;<i>Rhys.
</I>

_________________________________________________________________
Get your FREE download of MSN Explorer at <A HREF="http://explorer.msn.com/intl.asp">http://explorer.msn.com/intl.asp</A>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000926.html">[Mono-list] PInvoke Conventions
</A></li>
	<LI> Next message: <A HREF="000676.html">[Mono-list] PInvoke Conventions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#675">[ date ]</a>
              <a href="thread.html#675">[ thread ]</a>
              <a href="subject.html#675">[ subject ]</a>
              <a href="author.html#675">[ author ]</a>
         </LI>
       </UL>
</body></html>
