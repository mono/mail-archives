<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> JVM misconceptions (Re: [Mono-list] Re: can you explain what you
 mean?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rweather%40zip.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000732.html">
   <LINK REL="Next"  HREF="000446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>JVM misconceptions (Re: [Mono-list] Re: can you explain what you
 mean?)
   </H1>
    <B>Rhys Weatherley
    </B> 
    <A HREF="mailto:rweather%40zip.com.au"
       TITLE="JVM misconceptions (Re: [Mono-list] Re: can you explain what you
 mean?)">rweather@zip.com.au
       </A><BR>
    <I>Mon, 16 Jul 2001 09:10:02 +1000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000732.html">JVM misconceptions (Re: [Mono-list] Re: can you explain what you mean?)
</A></li>
        <LI> Next message: <A HREF="000446.html">[Mono-list] Patch for typo on webpage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#576">[ date ]</a>
              <a href="thread.html#576">[ thread ]</a>
              <a href="subject.html#576">[ subject ]</a>
              <a href="author.html#576">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Miguel de Icaza wrote:

&gt;<i> I tried looking those up in google, on the Java VM spec from Sun, and
</I>&gt;<i> being imaginative and I can not find anything.  Maybe you can point me
</I>&gt;<i> to these?
</I>
&quot;Java Virtual Machine Specification, Second Editon&quot;, page 133 and
following.  Contains a large number of conditions that must be
satisfied for bytecode to be considered legal.  e.g. &quot;iload 5&quot; is only
legal if there are 6 or more locals AND local 5 contains a value
compatible with &quot;int&quot;.  In the case of your example code, the
relevant paragraph is:

     If an instruction can be executed along several different
     execution paths, the operand stack must have the same
     depth prior to the execution of the instruction, regardless
     of the path taken.

Because your first loop adds extra values to the stack on each
iteration, it breaks this constraint.  i.e. the stack has different
depths at the start of each loop iteration.  The bytecode verifier
will reject your example.

In addition, all methods have a maximum stack height that cannot
be exceeded.  Your example also infringes this because it is
impossible to statically determine how many values will be
pushed or popped.

&gt;<i> &gt; These restrictions don't sound any different from what the JVM
</I>&gt;<i> &gt; imposes and documents.  In fact, I suspect that Microsoft based
</I>&gt;<i> &gt; their VM on the Java VM and simply adopted the restrictions that the
</I>&gt;<i> &gt; JVM already imposes.
</I>&gt;<i>
</I>&gt;<i> I have been unable to track down any restrictions on the JVM of this
</I>&gt;<i> kind.  Please, give me a link.
</I>
I've cited the paper copy above, but the book should be somewhere
<A HREF="http://java.sun.com">http://java.sun.com</A> for download.

Cheers,

Rhys.



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000732.html">JVM misconceptions (Re: [Mono-list] Re: can you explain what you mean?)
</A></li>
	<LI> Next message: <A HREF="000446.html">[Mono-list] Patch for typo on webpage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#576">[ date ]</a>
              <a href="thread.html#576">[ thread ]</a>
              <a href="subject.html#576">[ subject ]</a>
              <a href="author.html#576">[ author ]</a>
         </LI>
       </UL>
</body></html>
