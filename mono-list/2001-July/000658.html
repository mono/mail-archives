<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] =?iso-8859-1?Q?RE:_=5BMono-list=5D_Can=B4t_compile_Mono_on_cygwin?=
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jsgray%40acm.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="000632.html">
   <LINK REL="Next"  HREF="000670.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] RE: [Mono-list] Can´t compile Mono on cygwin
   </H1>
    <B>Jan Gray
    </B> 
    <A HREF="mailto:jsgray%40acm.org"
       TITLE="[Mono-list] RE: [Mono-list] Can´t compile Mono on cygwin">jsgray@acm.org
       </A><BR>
    <I>Tue, 17 Jul 2001 14:11:39 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="000632.html">[Mono-list] Can´t compile Mono on cygwin
</A></li>
        <LI> Next message: <A HREF="000670.html">[Mono-list] RE: [Mono-list] Can´t compile Mono on cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#658">[ date ]</a>
              <a href="thread.html#658">[ thread ]</a>
              <a href="subject.html#658">[ subject ]</a>
              <a href="author.html#658">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am curious about mono, and thought I'd give it a spin.

I have had two problems building mono-0.4, and a problem with the products
of the build.

(Setup: Windows 2000 SP2 with up to date Cygwin setup (&quot;nothing to
install/update&quot;).)


1. In building glib as downloaded from
&lt;<A HREF="ftp://ftp.gtk.org/pub/gtk/v1.2/glib-1.2.10.tar.gz">ftp://ftp.gtk.org/pub/gtk/v1.2/glib-1.2.10.tar.gz</A>&gt;, there was an error in
gstrfuncs.c:

...
/bin/sh ./libtool --mode=compile
gcc -DHAVE_CONFIG_H -I. -I. -I. -DG_LOG_DOMAIN=g_log_domain_glib     -g -O2 
-Wall  -D_REENTRANT -c gstrfuncs.c
gcc -DHAVE_CONFIG_H -I. -I. -I. -DG_LOG_DOMAIN=g_log_domain_glib -g -O2 -Wal
l -D_REENTRANT -c gstrfuncs.c -o gstrfuncs.o
gstrfuncs.c: In function `g_strsignal':
gstrfuncs.c:705: conflicting types for `strsignal'
/usr/include/string.h:70: previous declaration of `strsignal'
gstrfuncs.c:705: warning: extern declaration of `strsignal' doesn't match
global one
make[2]: *** [gstrfuncs.lo] Error 1
make[2]: Leaving directory `/downloads/cygwin/glib-1.2.10'
...

This change to gstrfuncs.c seemed to allow the glib build to finish:

*** gstrfuncs.c-0	Tue Jul 17 10:56:42 2001
--- gstrfuncs.c	Tue Jul 17 10:56:52 2001
***************
*** 703,705 ****

! #ifdef HAVE_STRSIGNAL
    extern char *strsignal (int sig);
--- 703,705 ----

! #if 0
    extern char *strsignal (int sig);

What is the proper way to build glib?


2. In building mono itself, interpreter/interp.c won't compile because it
#includes alloca.h.  My install of Cygwin does not provide an alloca.h.  I
fixed that as follows:

*** mono-0.4-0/mono/interpreter/interp.c	Tue Jul 17 11:19:52 2001
--- mono-0.4/mono/interpreter/interp.c	Tue Jul 17 11:21:34 2001
***************
*** 15,17 ****
--- 15,23 ----
  #include &lt;glib.h&gt;
+ #ifdef HAVE_ALLOCA_H
  #include &lt;alloca.h&gt;
+ #else
+ #ifdef __CYGWIN__
+ #define alloca __builtin_alloca
+ #endif
+ #endif

Should these patches be necessary?


3.  Now that it is built, I tried running mono-int and monodis against a
trivial assembly whose sole class's Main() consists of one bytecode, ret.
My build appears to SIGSEGV in load_metadata_ptrs, (assembly.c line 205), at
the strncmp() of raw_metadata and &quot;BSJB&quot;.  GDB says the buffer returned by
mmap() in raw_buffer_load is an invalid address.  (However, the 'offset' and
'size' locals are correct.)  (Sorry if this is a red herring, I'm a GCC/GDB
newbie.)

Thanks for any advice.

Jan Gray, Gray Research LLC
<A HREF="mailto:jsgray@acm.org">jsgray@acm.org</A>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000632.html">[Mono-list] Can´t compile Mono on cygwin
</A></li>
	<LI> Next message: <A HREF="000670.html">[Mono-list] RE: [Mono-list] Can´t compile Mono on cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#658">[ date ]</a>
              <a href="thread.html#658">[ thread ]</a>
              <a href="subject.html#658">[ subject ]</a>
              <a href="author.html#658">[ author ]</a>
         </LI>
       </UL>
</body></html>
