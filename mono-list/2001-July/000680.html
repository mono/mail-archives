<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] PInvoke Conventions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bsalita%40hotmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000681.html">
   <LINK REL="Next"  HREF="000682.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] PInvoke Conventions
   </H1>
    <B>Bob Salita
    </B> 
    <A HREF="mailto:bsalita%40hotmail.com"
       TITLE="[Mono-list] PInvoke Conventions">bsalita@hotmail.com
       </A><BR>
    <I>Wed, 18 Jul 2001 00:37:53 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="000681.html">[Mono-list] PInvoke Conventions
</A></li>
        <LI> Next message: <A HREF="000682.html">[Mono-list] System.Collections.BitArray (and testcase!)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#680">[ date ]</a>
              <a href="thread.html#680">[ thread ]</a>
              <a href="subject.html#680">[ subject ]</a>
              <a href="author.html#680">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Let's enumerate the somewhat-plausible-or-better options:

1. Use multiple dllimport declarations, of differing ints and longs, 
controlled by condition compilation.
2. Translate ints to ints and longs to longs.
3. Create libs with metadata. Interogate metadata.
4. Use method names such as lseek32, lseek64. Create method aliases in libs.
5. Use lib names of clib32, clib64.
6. Create a new data type.
7. Use new attributes.
8. Create wrapper classes for libs. Shift problem to wrapper authors.
9. Ask ECMA for guidance.
10. Watch how Corel does it. (They'll use a 32/32).
11. Annex CDecl, StdCall, WinAPI to behave per our definition.
12. Ask Microsoft.
13. Allow specification of custom data type for individual parameters.

Seems like we should defer to ECMA.

&gt;<i> &gt; (CDecl, StdCall, WinAPI)? Does one of these match my suggestion?
</I>&gt;<i>
</I>&gt;<i>No.  They just change the x86 instructions used to make the
</I>&gt;<i>call and the order of the parameters.  e.g. flipping between
</I>&gt;<i>C and Pascal style calling conventions.  But my brain is a
</I>&gt;<i>bit rusty on this - I've been on Linux long enough to forget
</I>&gt;<i>most of that stuff, thank God. :-)
</I>
They play with the formatting of the parameters, return value, and returned 
stack address. Are you really sure that none of them translate a long into a 
native int? Sorry, I'm wishful thinking.

Bob.

_________________________________________________________________
Get your FREE download of MSN Explorer at <A HREF="http://explorer.msn.com/intl.asp">http://explorer.msn.com/intl.asp</A>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000681.html">[Mono-list] PInvoke Conventions
</A></li>
	<LI> Next message: <A HREF="000682.html">[Mono-list] System.Collections.BitArray (and testcase!)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#680">[ date ]</a>
              <a href="thread.html#680">[ thread ]</a>
              <a href="subject.html#680">[ subject ]</a>
              <a href="author.html#680">[ author ]</a>
         </LI>
       </UL>
</body></html>
