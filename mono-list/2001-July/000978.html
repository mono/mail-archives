<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Update on tasks (a compromise solution?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rdeviasse%40hotmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000973.html">
   <LINK REL="Next"  HREF="000979.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Update on tasks (a compromise solution?)
   </H1>
    <B>Robert Deviasse
    </B> 
    <A HREF="mailto:rdeviasse%40hotmail.com"
       TITLE="[Mono-list] Update on tasks (a compromise solution?)">rdeviasse@hotmail.com
       </A><BR>
    <I>Sat, 28 Jul 2001 16:33:30 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="000973.html">Subject: Re: [Mono-list] Random
</A></li>
        <LI> Next message: <A HREF="000979.html">[Mono-list] Update on tasks (a compromise solution?) &amp; Java notes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#978">[ date ]</a>
              <a href="thread.html#978">[ thread ]</a>
              <a href="subject.html#978">[ subject ]</a>
              <a href="author.html#978">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Rhys Weatherley wrote:
&gt;<i>Miguel de Icaza wrote:
</I>&gt;<i> &gt; TODO=ilasm,IL Assembler
</I>&gt;<i> &gt; ** IL Assembler.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; TODO=al,Assembly Linker
</I>&gt;<i> &gt; ** Assembly Linker.
</I>&gt;<i>
</I>&gt;<i>*sigh*
</I>&gt;<i>
</I>&gt;<i>Portable.NET 0.1.1 already has a working assembler, for
</I>&gt;<i>small examples, with full Partition II support within the next
</I>&gt;<i>couple of weeks.  A linker is about 24 hours worth of work
</I>&gt;<i>for me, because I already have 99% of the code in place and
</I>&gt;<i>just need to hook it up.
</I>&gt;<i>
</I>&gt;<i>Miguel, stop re-inventing the wheel, and start co-operating
</I>&gt;<i>with the rest of the open source .NET efforts.
</I>&gt;<i>
</I>
I agree with Miguel that ultimately, as much of the environment
should be written in C# as possible, since it makes porting quick
and easy once you have the CLI VM in place. It would also allow
more code to be shared with other pure C# groups like SharpDevel.
(As a side note, SharpDevel is writing its own pure C# parser.
Check out <A HREF="http://www.icsharpcode.net/OpenSource/SD/Forum/">http://www.icsharpcode.net/OpenSource/SD/Forum/</A> in the
&quot;Developer Discussions&quot; section under thet article &quot;Just some
FAQs, Annotations, Considerations&quot;. Maybe there's a potential
for collaboration.)

However, my professional experience tells me that although you
must *never* forget the long term goal, it's crucial to get some
sort of foundation in place quickly since that holds back a great
deal of the important high level work. It's especially important
in free software because when a project is actually usable,
people get more excited about it and contributors can directly
benefit from their contributions. Simply put, Mono can't accept
contributions from many Linux and BSD programmers until it's
available on those platforms.

If you put your time into defining good clean interfaces and you
plan for change *every step of the way*, the foundation can be
changed later with little or no impact on the higher layers.

Perhaps there's a solution that's long term idealistic, but
short term practical that Portable.Net, Mono and even SharpDevelop
can agree to? I mention SharpDevelop because they need a parser,
disassember, and debugger. Mono and Portable.Net will need to
define classes for these same things.

So, Miguel, could Rhys's work be temporarily used until all
the foundations are in place?

Rhys, relating to PInvoke. I agree 100% that implementing PInvoke
as a SWIG or autoconf type bridge written in C completely misses
the point of PInvoke. However, I also agree that PInvoke is big,
hairy, and more complex than we know how to deal with at the moment.
No matter what we implement now, it will be complex and it will
have to be changed when we come across new complications. Either
that or it will be underpowered. So perhaps we can use the suggested
PInvoke kludge (even if it's ugly and very inconvenient) until we get
more experience about what we actually need? This would allow quick
porting of the part of GTK+ that WinForms needs. We should depend
upon PInvoke as little as possible, but the little that we do need,
is crucial to getting anything done. Anyone using PInvoke will know
that the solution solution is a kludge because we can add version
numbers to the stuff that we change, as the following:

    [DllImport_v1(&quot;libc&quot;)]
    extern public static int_t stat(string pathname, out stat buf);
or

    [PosixType_v2]
    public struct off_t
    {
        private long value;

        public off_t(long x) { value = x; }

        public static operator implicit off_t(long x)
            { return new off_t(x); }
        public static operator implicit long(off_t x)
            { return x.value; }
    };

Yes, including the version is ugly ugly. That's the point.:-) The
prototype isn't important. What's important is that the C# code
*using* a struct defined as PosixType_v2 or a function defined as
DllImport_v1 doesn't have to change when the function or struct
upgrades its version. Only the C implementation (assuming this
version requires a manual bridge) of the function needs to change.

PInvoke calls of one version can only call PosixTypes of the same
version, so the complexity of supporting a few previous versions
should be linear and localized, not exponential and delocalized.

As we understand more of the issues, we can increase the version
numbers of the attributes. Code based on the old version number
doesn't have to be written right away, but when the cost of
supporting all versions is too big, some versions will be dropped.
When we're sure that we've worked out all the details, the version
numbers can be dropped, and all old version can be declared obsolete
only supported only for a limited time.

Is there any room for compromise between Portable.Net and Mono?

I apologize for being longwinded again, but I honestly don't see
why there's a conflict.

Take care,
     Robert



_________________________________________________________________
Get your FREE download of MSN Explorer at <A HREF="http://explorer.msn.com/intl.asp">http://explorer.msn.com/intl.asp</A>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000973.html">Subject: Re: [Mono-list] Random
</A></li>
	<LI> Next message: <A HREF="000979.html">[Mono-list] Update on tasks (a compromise solution?) &amp; Java notes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#978">[ date ]</a>
              <a href="thread.html#978">[ thread ]</a>
              <a href="subject.html#978">[ subject ]</a>
              <a href="author.html#978">[ author ]</a>
         </LI>
       </UL>
</body></html>
