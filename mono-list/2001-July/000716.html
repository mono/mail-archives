<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] PInvoke Conventions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rweather%40zip.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000684.html">
   <LINK REL="Next"  HREF="000685.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] PInvoke Conventions
   </H1>
    <B>Rhys Weatherley
    </B> 
    <A HREF="mailto:rweather%40zip.com.au"
       TITLE="[Mono-list] PInvoke Conventions">rweather@zip.com.au
       </A><BR>
    <I>Thu, 19 Jul 2001 09:55:18 +1000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000684.html">[Mono-list] PInvoke Conventions
</A></li>
        <LI> Next message: <A HREF="000685.html">[Mono-list] System.Collections.Stack revised
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#716">[ date ]</a>
              <a href="thread.html#716">[ thread ]</a>
              <a href="subject.html#716">[ subject ]</a>
              <a href="author.html#716">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sam Ruby wrote:

&gt;<i> If I read those conventions correctly, when run on a 64/64 system, a native
</I>&gt;<i> C function could return a 64 bit &quot;int&quot; and that would be truncated to 32
</I>&gt;<i> bits.  How are overflows handled?
</I>
Right now, they aren't - it just truncates.  The problem also occurs
in a &quot;long&quot; parameter on a 32/32 system.  Truncation is one of the
drawbacks of this system.  I just couldn't come up with any other
way to do this cleanly.

This is partly why I'd like the &quot;NativeTypeSizes(true)&quot; behaviour
to be specified explicitly, rather than being the default as Bob
suggested in an earlier message in the thread.  i.e. the programmer
has to know what they are doing and explicitly mark the PInvoke
as a potentional source of platform issues.

In practice, it may not be too big of an issue for people using
PInvoke functions.  Most PInvokes are likely to be wrapped up
tight behind some other API.  e.g. &quot;read&quot;, &quot;write&quot;, &quot;lseek&quot;, etc
will be wrapped up behind C# streams.  The stream implementor
can ensure that they handle boundary cases correctly (e.g.
by using &quot;lseek64&quot; instead of &quot;lseek&quot;).

Cheers,

Rhys.




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000684.html">[Mono-list] PInvoke Conventions
</A></li>
	<LI> Next message: <A HREF="000685.html">[Mono-list] System.Collections.Stack revised
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#716">[ date ]</a>
              <a href="thread.html#716">[ thread ]</a>
              <a href="subject.html#716">[ subject ]</a>
              <a href="author.html#716">[ author ]</a>
         </LI>
       </UL>
</body></html>
