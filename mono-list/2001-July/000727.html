<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] PInvoke Conventions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rweather%40zip.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000720.html">
   <LINK REL="Next"  HREF="000699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] PInvoke Conventions
   </H1>
    <B>Rhys Weatherley
    </B> 
    <A HREF="mailto:rweather%40zip.com.au"
       TITLE="[Mono-list] PInvoke Conventions">rweather@zip.com.au
       </A><BR>
    <I>Thu, 19 Jul 2001 11:20:53 +1000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000720.html">[Mono-list] PInvoke Conventions
</A></li>
        <LI> Next message: <A HREF="000699.html">[Mono-list] System.UriFormatException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#727">[ date ]</a>
              <a href="thread.html#727">[ thread ]</a>
              <a href="subject.html#727">[ subject ]</a>
              <a href="author.html#727">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tomas Restrepo wrote:

&gt;<i> That's correct. Personally, I don't see much need to overload it. But that
</I>&gt;<i> aside, I don't see the problem of dealing with native sized values as such a
</I>&gt;<i> big deal. While nor the ECMA, nor MS say it a lot, using P/Invoke does, in
</I>&gt;<i> more ways than one, leave platform independence out of the question.
</I>
Yep, PInvoke does make things platform-dependent.  What I'm
hoping though is that we can make it platform-dependent to
&quot;Unix in general&quot;, rather than dependent to Linux, BSD, Solaris,
AIX, etc, etc, etc.

&gt;<i> &gt; Sam, perhaps it could be adjusted slightly to say &quot;if the
</I>&gt;<i> &gt; class is marked explicit, but no explicit information is supplied,
</I>&gt;<i> &gt; then use the platform-specific conventions&quot;.
</I>&gt;<i>
</I>&gt;<i> Isn't that what SequentialLayout means, anyway?
</I>
No, SequentialLayout means the default rules for layout of the
object that is used by the CLR.  The CLR is not required to follow
the rules used by the underlying platform.  For example, C
normally packs bytes with byte-alignment, but the CLR may
choose to extend the field to a full word because it may make
loads from objects to the stack faster on some platforms.

The &quot;explict layout&quot; flag indicates that the CLR must adhere
to what it is told, and must not adjust things to suit its own
implementation requirements.

&gt;<i> The ECMA spec doesn't say it
</I>&gt;<i> out loud, but I presume it is expected to use the default packing in that
</I>&gt;<i> case. If, instead it implies a packing of 1, then one could suggest the
</I>&gt;<i> attribute is extended to support an argument telling it what packing to use,
</I>&gt;<i> which seems clearer that using explicit in this case (at least to me).
</I>
There already is a packing attribute, which turns into a &quot;ClassLayout&quot;
token in the metadata.  So, Microsoft has already dealt with that issue.

Cheers,

Rhys.




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000720.html">[Mono-list] PInvoke Conventions
</A></li>
	<LI> Next message: <A HREF="000699.html">[Mono-list] System.UriFormatException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#727">[ date ]</a>
              <a href="thread.html#727">[ thread ]</a>
              <a href="subject.html#727">[ subject ]</a>
              <a href="author.html#727">[ author ]</a>
         </LI>
       </UL>
</body></html>
