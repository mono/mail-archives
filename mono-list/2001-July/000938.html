<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] PInvoke:TNG
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rweather%40zip.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000933.html">
   <LINK REL="Next"  HREF="000988.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] PInvoke:TNG
   </H1>
    <B>Rhys Weatherley
    </B> 
    <A HREF="mailto:rweather%40zip.com.au"
       TITLE="[Mono-list] PInvoke:TNG">rweather@zip.com.au
       </A><BR>
    <I>Fri, 27 Jul 2001 11:21:52 +1000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000933.html">[Mono-list] PInvoke:TNG
</A></li>
        <LI> Next message: <A HREF="000988.html">[Mono-list] Re: Can´t compile Mono on cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#938">[ date ]</a>
              <a href="thread.html#938">[ thread ]</a>
              <a href="subject.html#938">[ subject ]</a>
              <a href="author.html#938">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sam Ruby wrote:

&gt;<i> Rhys Weatherley wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [DllImport(&quot;libc&quot;)]
</I>&gt;<i> &gt; extern unsafe public static int_t stat(string pathname, stat *buf);
</I>&gt;<i>
</I>&gt;<i> Very nice proposal.  Would the following also work?
</I>&gt;<i>
</I>&gt;<i>   [DllImport(&quot;libc&quot;)]
</I>&gt;<i>   extern public static int_t stat(string pathname, out stat buf);
</I>
Not necessarily.  This assumes that the VM uses the same
representation for managed and unmanaged pointers.  Some
VM's may use object handles for managed pointers, and
real C pointers for unmanaged pointers.  These values aren't
always going to be bit-for-bit compatible.

I'd rather not introduce a dependency that requires managed
and unmanaged pointers to have an identical representation.

It is theoretically possible that the PInvoke mechanism could
automatically convert managed to unmanaged.  But I'm wary
of that, because then how do I pass managed pointers to
a native method that actually knows about them?

Cheers,

Rhys.




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000933.html">[Mono-list] PInvoke:TNG
</A></li>
	<LI> Next message: <A HREF="000988.html">[Mono-list] Re: Can´t compile Mono on cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#938">[ date ]</a>
              <a href="thread.html#938">[ thread ]</a>
              <a href="subject.html#938">[ subject ]</a>
              <a href="author.html#938">[ author ]</a>
         </LI>
       </UL>
</body></html>
