<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] JVM performance: JVM as a basis for CLR
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rweather%40zip.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000932.html">
   <LINK REL="Next"  HREF="000883.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] JVM performance: JVM as a basis for CLR
   </H1>
    <B>Rhys Weatherley
    </B> 
    <A HREF="mailto:rweather%40zip.com.au"
       TITLE="[Mono-list] JVM performance: JVM as a basis for CLR">rweather@zip.com.au
       </A><BR>
    <I>Mon, 23 Jul 2001 10:37:39 +1000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000932.html">[Mono-list] JVM performance: JVM as a basis for CLR
</A></li>
        <LI> Next message: <A HREF="000883.html">[Mono-list] JVM performance: JVM as a basis for CLR
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#880">[ date ]</a>
              <a href="thread.html#880">[ thread ]</a>
              <a href="subject.html#880">[ subject ]</a>
              <a href="author.html#880">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tom wrote:

&gt;<i> This particular comparison is doubly important
</I>&gt;<i> because Miguel, I believe, claimed that even an
</I>&gt;<i> unoptimized CLR implementation beats Java.
</I>
Maybe it's time I posted the following:

Rhys's Laws of VM Performance:

1. It's never as fast as you think it is.
2. Benchmarks are essentially useless because
    they can be made to measure the wrong thing.
3. Comparing two different implementation
    techniques will always result in bogus figures.
4. It's never as fast as you think it is.

I've written a lot of VM's over the years, and I've
fooled myself many times into thinking I have a faster
solution than someone else.  I've usually been wrong,
but it took a while to discover that.

The reason why Miguel is seeing the Mono beat
the pants off the JVM is very simple: VM size.

The Mono VM is so small right now that it loads
very quickly and doesn't overly tax the OS's
virtual memory system.  The JVM plus class
libraries is huge in comparison.  So, I suspect
that the Fib numbers quoted earlier were
measuring load time and OS paging performance,
and not the benchmark itself.

Eventually Mono will grow in size to the point
where the size advantage will disappear.  At that
point, no amount of optimization will make the
Mono interpreter faster than the JVM.  That's
because the polymorphic instruction set requires
more clock cycles per instruction in the interpreter
than the Java instruction set, but roughly the same
number of instructions.

Changing to a JIT will improve runtime performance,
but will actually impede load time performance, due
to the overhead of re-compiling the code.  This means
that compute-bound benchmarks will run faster,
but I/O-bound benchmarks will run slower.

VM performance is a many headed beast.  Cut one
off and two more rise up in its place.  There is no
way to understand it fully, and comparisons between
different technologies are essentially meaningless.

The real question is this: is it possible to build a
VM that gives acceptable performance on the most
common applications that a user is likely to use in
practice.  Since users don't use Fib, there's really
no point optimising for it.

Cheers,

Rhys.




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000932.html">[Mono-list] JVM performance: JVM as a basis for CLR
</A></li>
	<LI> Next message: <A HREF="000883.html">[Mono-list] JVM performance: JVM as a basis for CLR
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#880">[ date ]</a>
              <a href="thread.html#880">[ thread ]</a>
              <a href="subject.html#880">[ subject ]</a>
              <a href="author.html#880">[ author ]</a>
         </LI>
       </UL>
</body></html>
