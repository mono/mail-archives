<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Managed equivalent of memset?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Managed%20equivalent%20of%20memset%3F&In-Reply-To=45DAF891.4050105%40ugent.be">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034319.html">
   <LINK REL="Next"  HREF="034321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Managed equivalent of memset?</H1>
    <B>Antonello Provenzano</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Managed%20equivalent%20of%20memset%3F&In-Reply-To=45DAF891.4050105%40ugent.be"
       TITLE="[Mono-list] Managed equivalent of memset?">antonello at deveel.com
       </A><BR>
    <I>Tue Feb 20 08:47:15 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="034319.html">[Mono-list] Managed equivalent of memset?
</A></li>
        <LI>Next message: <A HREF="034321.html">[Mono-list] Managed equivalent of memset?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34320">[ date ]</a>
              <a href="thread.html#34320">[ thread ]</a>
              <a href="subject.html#34320">[ subject ]</a>
              <a href="author.html#34320">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Frederik,

As I told you, you should think about an 'unsafe solution': unsafe is
the code you can write in a C# language, managing the memory pointers
by yourself, rather than letting the VM to do it.
For doing this you have to sign the assembly as unsafe, then you can
place blocks of 'unsafe' code (even entire classes) inside the  Mono
(or .NET) application, handling the memset by yourself.

Maybe this reply was unneeded, but from your answer I think you don't
know what 'unsafe' code is...

Cheers



On 2/20/07, Frederik Carlier &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">frederik.carlier at ugent.be</A>&gt; wrote:
&gt;<i> Antonello,
</I>&gt;<i>
</I>&gt;<i> Thanks for the reply. Maybe my terminology is a bit off -- it should
</I>&gt;<i> have been &quot;C# equivalent of memset&quot;. The struct is going to be passed to
</I>&gt;<i> unmanaged code, but I was wondering how to &quot;prepare&quot; it before passing
</I>&gt;<i> it. That is, I need a C# equivalent of the line
</I>&gt;<i> memset(m_errbuf,0,sizeof(TidyBuffer)). I tried googling, I tried looking
</I>&gt;<i> what the Marshal class has to offer, but yet didn't find any answer.
</I>&gt;<i> That's why I tried this list.
</I>&gt;<i>
</I>&gt;<i> So, can anybody offer any insight into how to convert the C++ code below
</I>&gt;<i> to C#/Interop?
</I>&gt;<i>
</I>&gt;<i> Frederik.
</I>&gt;<i>
</I>&gt;<i> Antonello Provenzano schreef:
</I>&gt;<i> &gt; Frederik,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Managed code is by definition &quot;managed&quot;, that means the memory is
</I>&gt;<i> &gt; handled by the VirtualMachine: so you can't operate on the memory
</I>&gt;<i> &gt; directly.
</I>&gt;<i> &gt; You should try to look for an &quot;unsafe&quot; (if you don't know what
</I>&gt;<i> &gt; 'unsafe' means in such context, read the manual...) solution, that
</I>&gt;<i> &gt; could be found around somewhere by googling a bit.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 2/20/07, Frederik Carlier &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">frederik.carlier at ugent.be</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; Hi,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; As a quick introduction, I'm trying to convert a C++.NET wrapper around
</I>&gt;<i> &gt;&gt; HTML Tidy to C#, because of the lack of a C++.NET compiler for Linux.
</I>&gt;<i> &gt;&gt; I'm by no means an expert in unmanaged code, but things are going well.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I am, however, hitting a problem with a struct. The C++ code that
</I>&gt;<i> &gt;&gt; initializes the struct reads as follows:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; [C++]
</I>&gt;<i> &gt;&gt; m_errbuf = new TidyBuffer;
</I>&gt;<i> &gt;&gt; memset(m_errbuf,0,sizeof(TidyBuffer));
</I>&gt;<i> &gt;&gt; tidySetErrorBuffer(m_tdoc,m_errbuf);
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Re-creating the struct and calling tidySetErrorBuffer is easy enough,
</I>&gt;<i> &gt;&gt; but what is the managed equivalent of memset? If I just 'omit' the
</I>&gt;<i> &gt;&gt; memset line, I get the following failed assertion:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; mono: src/buffio.c:184: tidyBufPutByte: Assertion `buf != ((void *)0)'
</I>&gt;<i> &gt;&gt; failed.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Frederik.
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034319.html">[Mono-list] Managed equivalent of memset?
</A></li>
	<LI>Next message: <A HREF="034321.html">[Mono-list] Managed equivalent of memset?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34320">[ date ]</a>
              <a href="thread.html#34320">[ thread ]</a>
              <a href="subject.html#34320">[ subject ]</a>
              <a href="author.html#34320">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
