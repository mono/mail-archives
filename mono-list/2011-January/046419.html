<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] passing and returning structs in native calls
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20passing%20and%20returning%20structs%20in%20native%20calls&In-Reply-To=ig7d1p%24a9n%241%40dough.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046404.html">
   <LINK REL="Next"  HREF="046421.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] passing and returning structs in native calls</H1>
    <B>Edd Barrett</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20passing%20and%20returning%20structs%20in%20native%20calls&In-Reply-To=ig7d1p%24a9n%241%40dough.gmane.org"
       TITLE="[Mono-list] passing and returning structs in native calls">vext01 at gmail.com
       </A><BR>
    <I>Mon Jan 10 08:07:29 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="046404.html">[Mono-list] passing and returning structs in native calls
</A></li>
        <LI>Next message: <A HREF="046421.html">[Mono-list] passing and returning structs in native calls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46419">[ date ]</a>
              <a href="thread.html#46419">[ thread ]</a>
              <a href="subject.html#46419">[ subject ]</a>
              <a href="author.html#46419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Fri, Jan 07, 2011 at 04:55:22PM +0100, Robert Jordan wrote:
&gt;<i> On 07.01.2011 16:19, Edd Barrett wrote:
</I>&gt;<i> &gt; Why is this? Myself and a colleague have spent a number of hours trying
</I>&gt;<i> &gt; to work this out.
</I>&gt;<i> 
</I>&gt;<i> Because returning structs by value from functions is problematic
</I>&gt;<i> in general. Try to stay away from such signatures if you want
</I>&gt;<i> portability.
</I>
I have my bindings working now, but this is interesting...

After some consideration, I see that C compilers have to do magic in order to
make it appear as though functions are returning structs bigger than the return
register size.

What confuses me however, is that whatever transformation tha occurs
here *must* be standardised (atleast on a single compiler), as the very
same transformation needs to be understood by the runtime linker when
setting up the execution image of binaries using shared objects.

Is this &quot;understanding&quot; of the ABI just not implemented in mono, or is there a
further complication. I notice the same issue in python.

-- 
Best Regards
Edd Barrett

<A HREF="http://www.theunixzoo.co.uk">http://www.theunixzoo.co.uk</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046404.html">[Mono-list] passing and returning structs in native calls
</A></li>
	<LI>Next message: <A HREF="046421.html">[Mono-list] passing and returning structs in native calls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46419">[ date ]</a>
              <a href="thread.html#46419">[ thread ]</a>
              <a href="subject.html#46419">[ subject ]</a>
              <a href="author.html#46419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
