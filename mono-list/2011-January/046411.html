<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Operator overloading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Operator%20overloading&In-Reply-To=183679.76864.qm%40web113709.mail.gq1.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046410.html">
   <LINK REL="Next"  HREF="046412.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Operator overloading</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Operator%20overloading&In-Reply-To=183679.76864.qm%40web113709.mail.gq1.yahoo.com"
       TITLE="[Mono-list] Operator overloading">jonpryor at vt.edu
       </A><BR>
    <I>Fri Jan  7 22:35:05 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="046410.html">[Mono-list] Operator overloading
</A></li>
        <LI>Next message: <A HREF="046412.html">[Mono-list] Operator overloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46411">[ date ]</a>
              <a href="thread.html#46411">[ thread ]</a>
              <a href="subject.html#46411">[ subject ]</a>
              <a href="author.html#46411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jan 7, 2011, at 8:35 PM, David Henderson wrote:
&gt;<i> OK.  I have been trying to no avail to overload the &gt; and &lt; operators on a 
</I>&gt;<i> struct I wrote.  This is extremely easy in C++, but seems to not work in C#.
</I>
You have properly overloaded operator&lt; and operator&gt;; they are not the problem.

&gt;<i> Here is the error I see at runtime:
</I>&gt;<i> 
</I>&gt;<i> Unhandled Exception: System.InvalidOperationException: The comparer threw an 
</I>&gt;<i> exception. ---&gt; System.ArgumentException: does not implement right interface
</I>
Admittedly the exception message doesn't tell you what interface is missing, but it does mention that you're not implementing an interface.

The problem is that the operators you're providing are static members, while interfaces (which the exception mentions) can only be implemented in via instance members.

In short: this isn't C++, and providing operator&lt; does NOT automatically provide comparison for your type.

Instead, you need to implement either the System.IComparable or the System.IComparable&lt;T&gt; interfaces on your type, which will allow use of Comparer&lt;T&gt;.Default (which is what System.Array.qsort() is using):

	struct lodData : IComparable&lt;lodData&gt; {
		public int CompareTo (lodData other)
		{
			if (getLOD() == other.getLOD())
				return 0;
			if (getLOD() &lt; other.getLOD())
				return -1;
			return 1;
		}
		// ...
	}

 - Jon

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046410.html">[Mono-list] Operator overloading
</A></li>
	<LI>Next message: <A HREF="046412.html">[Mono-list] Operator overloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46411">[ date ]</a>
              <a href="thread.html#46411">[ thread ]</a>
              <a href="subject.html#46411">[ subject ]</a>
              <a href="author.html#46411">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
