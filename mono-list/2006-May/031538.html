<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] full duplex sockets and threads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20full%20duplex%20sockets%20and%20threads&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031539.html">
   <LINK REL="Next"  HREF="031541.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] full duplex sockets and threads</H1>
    <B>P. Oscar Boykin</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20full%20duplex%20sockets%20and%20threads&In-Reply-To="
       TITLE="[Mono-list] full duplex sockets and threads">oscar.boykin at gmail.com
       </A><BR>
    <I>Sun May  7 13:48:29 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="031539.html">[Mono-list] Security
</A></li>
        <LI>Next message: <A HREF="031541.html">[Mono-list] full duplex sockets and threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31538">[ date ]</a>
              <a href="thread.html#31538">[ thread ]</a>
              <a href="subject.html#31538">[ subject ]</a>
              <a href="author.html#31538">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>According to this:

<A HREF="http://groups.google.com/group/comp.protocols.tcp-ip/browse_thread/thread/7f695ec1d8f83253/b11f53da207558cc?lnk=st&amp;q=sending+and+receiving+sockets+simultaneously+linux&amp;rnum=14&amp;hl=en#b11f53da207558cc">http://groups.google.com/group/comp.protocols.tcp-ip/browse_thread/thread/7f695ec1d8f83253/b11f53da207558cc?lnk=st&amp;q=sending+and+receiving+sockets+simultaneously+linux&amp;rnum=14&amp;hl=en#b11f53da207558cc</A>

It is safe to use a socket in most unices in two threads if one does only
reading and one does only writing.

Is this true of Mono/C#?

The only documentation I can find is from Socket:

&quot;All public static members of this type are safe for multithreaded
operations. No instance members are guaranteed to be thread safe.&quot;

Which I believe is boilerplate, but would imply that it might not be safe to
read in one thread and write in another.

My experiments suggest that reading in one thread and writing in another
works in mono (tested with UDP), but I am wondering if there is an
&quot;official&quot; position.  Is this unclear in the .Net class library?  Might it
stop working in the future and not be considered a bug?

The case I am working with is the following: two hosts have a socket between
them.  At any time one or the other may send data.  What is the lowest
latency way to make sure that data is sent quickly and received quickly.
Being strict about the documentation would imply it is not safe to do a
blocking read in one thread while sending in another thread.  Thus, it seems
that polling (or select) is required, both of which introduce latency.

If anyone else has some good pointers on how to use one socket to send and
receive without polling or using the asynchronous methods I would be happy
to learn of them (polling introduces latency and the asynchronous methods
often lead to deadlocks I guess due to their internal use of threadpools).

Thanks.
--
P. Oscar Boykin                            <A HREF="http://boykin.acis.ufl.edu">http://boykin.acis.ufl.edu</A>
Assistant Professor, Department of Electrical and Computer Engineering
University of Florida
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20060507/a568a471/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20060507/a568a471/attachment.html</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031539.html">[Mono-list] Security
</A></li>
	<LI>Next message: <A HREF="031541.html">[Mono-list] full duplex sockets and threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31538">[ date ]</a>
              <a href="thread.html#31538">[ thread ]</a>
              <a href="subject.html#31538">[ subject ]</a>
              <a href="author.html#31538">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
