<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Accessing an XSP hosted c# webservice via Javascript
	in mozilla?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Accessing%20an%20XSP%20hosted%20c%23%20webservice%20via%20Javascript%0A%09in%20mozilla%3F&In-Reply-To=44715AC5.7090109%40roo.k.pl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031702.html">
   <LINK REL="Next"  HREF="031726.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Accessing an XSP hosted c# webservice via Javascript
	in mozilla?</H1>
    <B>none none</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Accessing%20an%20XSP%20hosted%20c%23%20webservice%20via%20Javascript%0A%09in%20mozilla%3F&In-Reply-To=44715AC5.7090109%40roo.k.pl"
       TITLE="[Mono-list] Accessing an XSP hosted c# webservice via Javascript
	in mozilla?">lots.of.mailing.lists at gmail.com
       </A><BR>
    <I>Mon May 22 13:36:31 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="031702.html">[Mono-list] Accessing an XSP hosted c# webservice via Javascript
	in	mozilla?
</A></li>
        <LI>Next message: <A HREF="031726.html">[Mono-list] Accessing an XSP hosted c# webservice via
	Javascript in	mozilla?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31713">[ date ]</a>
              <a href="thread.html#31713">[ thread ]</a>
              <a href="subject.html#31713">[ subject ]</a>
              <a href="author.html#31713">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>the test webservice seemed to allready be running as a &quot;Document&quot;
service, changing it to RPC using [SoapRpcService] made the WSDL file
resemble much more closely the one in the mozilla examples, however it
still give the same error... could it be to do with me running the web
service on the localhost (the html containing the js is also being
accessed locally via a file:// link), do i need to set the namespace
for it to work properly?
([WebService(Namespace=&quot;<A HREF="http://www.example.com&quot;">http://www.example.com&quot;</A>)])

On 22/05/06, Micha&#322; Ziemski &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">rook at roo.k.pl</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>  Hi!
</I>&gt;<i>
</I>&gt;<i>  I've tried that some time ago. The problem was thas Mozilla uses &quot;Document&quot;
</I>&gt;<i> SOAP format.
</I>&gt;<i>  .NET however defaults to &quot;RPC&quot; SOAP.
</I>&gt;<i>
</I>&gt;<i>  Try setting [SoapDocumentService] attribute on your WebService class.
</I>&gt;<i>
</I>&gt;<i>  Michal Ziemski
</I>&gt;<i>
</I>&gt;<i>  Dnia 2006-05-22 00:38, U&#380;ytkownik none none napisa&#322;:
</I>&gt;<i>
</I>&gt;<i> Ok so I've installed XSP and I'm running the test setuo that it comes
</I>&gt;<i>  with which exposes the test service that has two methods you can use
</I>&gt;<i>  (&quot;Echo&quot; and &quot;Add&quot;). I've written a small c# app that access it and
</I>&gt;<i>  that works fine, but I'm trying to access it using javascript in a
</I>&gt;<i>  mozilla gecko based browser using the following code:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  var proxy    = null;
</I>&gt;<i>  var wsdl_uri =
</I>&gt;<i> &quot;<A HREF="http://localhost:8080/1.1/webservice/TestService.asmx?wsdl=0&quot;;">http://localhost:8080/1.1/webservice/TestService.asmx?wsdl=0&quot;;</A>
</I>&gt;<i>
</I>&gt;<i>  function setup_webservice()
</I>&gt;<i>  {
</I>&gt;<i>      try {
</I>&gt;<i>          var listener = {
</I>&gt;<i>              onLoad: function (aProxy)
</I>&gt;<i>              {
</I>&gt;<i>                  proxy = aProxy;
</I>&gt;<i>                  proxy.setListener(listener);
</I>&gt;<i>
</I>&gt;<i>                  /* the following call fails */
</I>&gt;<i>                  proxy.Add(4, 8);
</I>&gt;<i>              },
</I>&gt;<i>
</I>&gt;<i>              onError: function (aError)
</I>&gt;<i>              {
</I>&gt;<i>                  alert(&quot;An error occured!!!!!\n&quot;)
</I>&gt;<i>                  alert(aError);
</I>&gt;<i>              },
</I>&gt;<i>
</I>&gt;<i>              EchoCallback : function (result)
</I>&gt;<i>              {
</I>&gt;<i>                  alert(result);
</I>&gt;<i>              },
</I>&gt;<i>
</I>&gt;<i>              AddCallback : function (result)
</I>&gt;<i>              {
</I>&gt;<i>                  alert(result);
</I>&gt;<i>              }
</I>&gt;<i>          };
</I>&gt;<i>
</I>&gt;<i>          var factory = new WebServiceProxyFactory();
</I>&gt;<i>          factory.createProxyAsync(wsdl_uri, &quot;TestServiceSoap&quot;, &quot;&quot;, true,
</I>&gt;<i> listener);
</I>&gt;<i>      }
</I>&gt;<i>      catch (ex) {
</I>&gt;<i>          alert(ex);
</I>&gt;<i>      }
</I>&gt;<i>  }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  setting up the webservice proxy object works fine but any call to Echo
</I>&gt;<i>  or Add results in the following error:
</I>&gt;<i>
</I>&gt;<i>  Error: [Exception... &quot;Could not convert JavaScript argument arg 0
</I>&gt;<i> [TestServiceSoaphttp_003a_002f_002flocalhost_003a8080_002f1_002e1_002fwebservice_002fTestService_002easmx_003fwsdl_003d0Async.Add]&quot;
</I>&gt;<i>  nsresult: &quot;0x80570009 (NS_ERROR_XPC_BAD_CONVERT_JS)&quot;  location: &quot;JS
</I>&gt;<i>  frame :: <A HREF="file:///home/blah/blah.js">file:///home/blah/blah.js</A> :: anonymous :: line 18&quot;  data: no]
</I>&gt;<i>  Source File: <A HREF="file:///home/blah/blah.js">file:///home/blah/blah.js</A>
</I>&gt;<i>  Line: 18
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  I'm not sure if this is a problem with firefox or with xsp, the
</I>&gt;<i>  attached code is exactly the same as in the example that mozilla show
</I>&gt;<i>  where they access the Amazon web service:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.mozilla.org/projects/webservices/examples/mozilla-wsdl/index.html">http://www.mozilla.org/projects/webservices/examples/mozilla-wsdl/index.html</A>
</I>&gt;<i>
</I>&gt;<i>  Has anyone else had any luck accessing a webservice running under XSP
</I>&gt;<i>  via javascript in mozilla? or should I post this on a mozilla mailing
</I>&gt;<i>  list?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  ________________________________
</I>&gt;<i>  _______________________________________________ Mono-list
</I>&gt;<i> maillist - <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031702.html">[Mono-list] Accessing an XSP hosted c# webservice via Javascript
	in	mozilla?
</A></li>
	<LI>Next message: <A HREF="031726.html">[Mono-list] Accessing an XSP hosted c# webservice via
	Javascript in	mozilla?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31713">[ date ]</a>
              <a href="thread.html#31713">[ thread ]</a>
              <a href="subject.html#31713">[ subject ]</a>
              <a href="author.html#31713">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
