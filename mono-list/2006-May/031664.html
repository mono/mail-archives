<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Backdrop behaving different in Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Backdrop%20behaving%20different%20in%20Mono&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031660.html">
   <LINK REL="Next"  HREF="031662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Backdrop behaving different in Mono</H1>
    <B>Glen Farrell</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Backdrop%20behaving%20different%20in%20Mono&In-Reply-To="
       TITLE="[Mono-list] Backdrop behaving different in Mono">glensmono at telus.net
       </A><BR>
    <I>Wed May 17 17:48:40 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="031660.html">[Mono-list] Backdrop behaving different in Mono
</A></li>
        <LI>Next message: <A HREF="031662.html">[Mono-list] Problem test example Mono and Oracle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31664">[ date ]</a>
              <a href="thread.html#31664">[ thread ]</a>
              <a href="subject.html#31664">[ subject ]</a>
              <a href="author.html#31664">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Peter, I'm just guessing, but somehow I don't think I can send an 
attachment through this list? Anyway, a quick testcase is just create a new 
&quot;Windows Application&quot; project. Change the IsMDIContainer property of Form1 
to True. Then add this code to the constructor:

System.Drawing.Bitmap Backdrop = new Bitmap(100,100);
System.Drawing.Graphics GBack = System.Drawing.Graphics.FromImage(Backdrop);
GBack.FillRectangle(System.Drawing.Brushes.Blue,0,0,100,100);
GBack.DrawRectangle(System.Drawing.Pens.Red, 10,10,80,80);
this.BackgroundImage = Backdrop;
Anyway, I've played around with it a bit more, and found the behaviour is a 
little different then I first thought. I believe the above actually does set 
the background image for the form - but the MDI client area is drawn over 
top of that. (And if you set IsMDIContainer to False, you will see the image 
in Mono).

With a toolbar, it's actually not that the toolbar gets the image, but that 
the toolbar is transparent, showing the underlying background. Resizing the 
window makes this obvious - you'll see the image scrolling by beneath the 
toolbar.

The interesting part is that Microsoft is inconsistent here - 
BackgroundImage works, but BackColor does not (neither work for Mono). So 
possibly Mono is the one doing it correctly? Anyway, did a search for MDI 
background color, and found this:

<A HREF="http://www.codeproject.com/cs/miscctrl/mdiclientcontroller.asp">http://www.codeproject.com/cs/miscctrl/mdiclientcontroller.asp</A>

Basically, by looping through the MDI form's Controls collection, you can 
get a handle to the MDI client area. And then using that handle, set the 
BackColor ... or the BackgroundImage! And doing it this way works in both 
.Net and Mono.

So I'm happy doing it that way. Up to you if you want to consider this a 
Mono bug or a .Net bug ...

Glen.


</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031660.html">[Mono-list] Backdrop behaving different in Mono
</A></li>
	<LI>Next message: <A HREF="031662.html">[Mono-list] Problem test example Mono and Oracle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31664">[ date ]</a>
              <a href="thread.html#31664">[ thread ]</a>
              <a href="subject.html#31664">[ subject ]</a>
              <a href="author.html#31664">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
