<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Bug (?) in SqliteDataReader
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Bug%20%28%3F%29%20in%20SqliteDataReader&In-Reply-To=446BA968.4070608%40for.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031684.html">
   <LINK REL="Next"  HREF="031687.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Bug (?) in SqliteDataReader</H1>
    <B>Nikki Locke</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Bug%20%28%3F%29%20in%20SqliteDataReader&In-Reply-To=446BA968.4070608%40for.net"
       TITLE="[Mono-list] Bug (?) in SqliteDataReader">nikki at trumphurst.com
       </A><BR>
    <I>Fri May 19 06:30:04 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="031684.html">[Mono-list] Bug (?) in SqliteDataReader
</A></li>
        <LI>Next message: <A HREF="031687.html">[Mono-list] Bug (?) in SqliteDataReader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31685">[ date ]</a>
              <a href="thread.html#31685">[ thread ]</a>
              <a href="subject.html#31685">[ subject ]</a>
              <a href="author.html#31685">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Joshua Tauberer wrote:
&gt;<i> I don't think there should be a database that can't be read using any 
</I>&gt;<i> method, even if it wasn't created with Mono.Data.SqliteClient and even 
</I>&gt;<i> if it has crazy nonuniform data in columns. 
</I>
Well, it is currently possible (actually, easy) to write a data row using the 
existing Mono.Data.SqliteClient library which cannot be read back!

I have updated the code at <A HREF="http://www.trumphurst.com/Test.cs.html">http://www.trumphurst.com/Test.cs.html</A> to test this. 
I also updated the code to work with Finisar.SQLite under Microsoft .NET.

Just uncomment the line which inserts &quot;a string&quot; to demonstrate.

Basically, storing &quot;a string&quot; in a DateTime field is allowed, but causes 
subsequent queries to throw an Exception.

Note also that storing an arbitrary integer in the DateTime field does not 
result in a sensible value being returned - the integer has been converted to a 
string, then passed through DateTime.Parse().ToString().

I have tried this test code (without the &quot;a string&quot; insert) on my &quot;fixed&quot; 
library, and that throws an exception trying to convert the floating point 
number.

Trying it under Finisar.SQLite produces the same result as my &quot;fixed&quot; library - 
i.e. it throws an exception for the floating point number.

Conclusion:
The existing code does not satisfy your requirement. It does allow you to store 
and retrieve floating point numbers in DateTime fields, but not arbitrary 
strings. I don't see that is significantly better than only allowing parseable 
DateTimes in DateTime fields.

The bug in DateTime.Parse which does not correctly parse the output of 
DateTime.ToString in certain locales should also be fixed, but I have no idea 
where to start with this one, as I haven't unravelled the maze of twisty code 
which does the job. Suggestions welcome!

-- 
Nikki Locke, Trumphurst Ltd.      PC &amp; Unix consultancy &amp; programming
<A HREF="http://www.trumphurst.com/">http://www.trumphurst.com/</A>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031684.html">[Mono-list] Bug (?) in SqliteDataReader
</A></li>
	<LI>Next message: <A HREF="031687.html">[Mono-list] Bug (?) in SqliteDataReader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31685">[ date ]</a>
              <a href="thread.html#31685">[ thread ]</a>
              <a href="subject.html#31685">[ subject ]</a>
              <a href="author.html#31685">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
