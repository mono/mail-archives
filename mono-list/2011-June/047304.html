<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] csharp REPL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20csharp%20REPL&In-Reply-To=BANLkTimo2yyLCbnqM_ZmQhQoJKw52KA50w%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="047301.html">
   <LINK REL="Next"  HREF="047302.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] csharp REPL</H1>
    <B>Steve Lessard</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20csharp%20REPL&In-Reply-To=BANLkTimo2yyLCbnqM_ZmQhQoJKw52KA50w%40mail.gmail.com"
       TITLE="[Mono-list] csharp REPL">s_lessard at yahoo.com
       </A><BR>
    <I>Wed Jun 29 12:50:56 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="047301.html">[Mono-list] csharp REPL
</A></li>
        <LI>Next message: <A HREF="047302.html">[Mono-list] Mono ASP.NET MVC Virtual Path Not Found Exception?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47304">[ date ]</a>
              <a href="thread.html#47304">[ thread ]</a>
              <a href="subject.html#47304">[ subject ]</a>
              <a href="author.html#47304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It seems there is an additional obstacle to overcome before I could 
even try to get command line arguments from Environment.CommandLine.


$csharp foo bar
cs2001: Source file 
`/source/local/private/main/developer/slessard/tools/foo' not found
$csharp -foo -bar
error CS2007: Unrecognized command-line option: `-foo'


The problem is that csharp.exe complains because it doesn't recognize 
the arguments that are intended for my script. I need a way to pass in 
arguments to my script in a way that won't cause csharp.exe to complain 
about files not found or unrecognized command-line options.  The only 
solution I have been able to find is to prefix each of my script's 
command-line arguments with &quot;-d:&quot; (without the quotes) but that would 
require the script to have additional code to find and strip out the 
&quot;-d:&quot; portion of each argument (see output below.)  Is there any other 
trick that might work? I know very, very little about how the shebang 
works. Would it be possible to leverage the shebang in some crafty way? 
Would it be possible to get the shebang to convert the command line 
arguments into local environment variables named ARG1, ARG2, ..., ARGn?

The is the output I get from my script after adding code to write to 
stout all of the process's command line arguments:

$./timefromseconds -d:foo -d:bar
Environment.GetCommandLineArgs()[0] : 
'/Library/Frameworks/Mono.framework/Versions/2.10.2/lib/mono/4.0/csharp.exe'
Environment.GetCommandLineArgs()[1] : '-lib:$PWD'
Environment.GetCommandLineArgs()[2] : './timefromseconds'
Environment.GetCommandLineArgs()[3] : '-d:foo'
Environment.GetCommandLineArgs()[4] : '-d:bar'
Current Time (Total Seconds): 1309369313.60381
Current Local Time: 6/29/2011 9:41:53 AM
Current UTC Time: 6/29/2011 4:41:53 PM
 

And here's my new script code:


#!/usr/bin/env csharp -lib:$PWD

int counter = 0; foreach (string arg in 
Environment.GetCommandLineArgs()) 
Console.WriteLine(&quot;Environment.GetCommandLineArgs()[{0}] : '{1}'&quot;, 
counter++, arg);

// Initialize the &quot;epoch&quot;
// The &quot;epoch&quot; is 12:00:00 AM UTC, January 1, 1970
DateTime epoch = new DateTime().AddYears(1969).AddHours(-8);

TimeSpan nowDiff = (DateTime.Now - epoch);
System.Console.WriteLine(&quot;Current Time (Total Seconds): &quot; + 
nowDiff.TotalSeconds);
System.Console.WriteLine(&quot;Current Local Time: &quot; + 
epoch.AddSeconds(nowDiff.TotalSeconds).ToString());
System.Console.WriteLine(&quot;Current UTC Time: &quot; + 
epoch.AddSeconds(nowDiff.TotalSeconds).ToUniversalTime().ToString());








On Tue, 28 Jun 2011 20:19:32 +0200, Alex wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Arguments should be stored in Environment.CommandLine.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Alex
</I>&gt;<i> 
</I>&gt;<i> On Tue, Jun 28, 2011 at 7:58 PM, Ian Norton
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Ian.Norton-Badrul at thales-esecurity.com</A>&gt; wrote:
</I>&gt;&gt;<i> Try looking at Mono.Options (aka NDesk.Options)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> That works quite well for me.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Oh.. You don't have a main in repl that gets argv...
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Are the command line arguments stored in the environment somewhere?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Ian
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On 28 Jun 2011, at 18:59, &quot;Steve Lessard&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">s_lessard at yahoo.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I'm trying to write a shell script in C# using the csharp REPL.  The
</I>&gt;&gt;&gt;<i> script below works fine as is on OS X, but I would like to pass an
</I>&gt;&gt;&gt;<i> argument into this script. I haven't been able to find any docs on how
</I>&gt;&gt;&gt;<i> to do this and all of my experiments have turned up nothing. Is
</I>&gt;&gt;&gt;<i> there a
</I>&gt;&gt;&gt;<i> way to pass an argument into the csharp REPL?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I'm running Mono version 2.10.2 with Mono C# compiler version 4.0.0.0
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> -SteveL
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> #!/usr/bin/env csharp -lib:$PWD
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> // Initialize the &quot;epoch&quot;
</I>&gt;&gt;&gt;<i> // The &quot;epoch&quot; is 12:00:00 AM UTC, January 1, 1970
</I>&gt;&gt;&gt;<i> DateTime epoch = new DateTime().AddYears(1969).AddHours(-8);
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> TimeSpan nowDiff = (DateTime.Now - epoch);
</I>&gt;&gt;&gt;<i> System.Console.WriteLine(&quot;Current Time (Total Seconds): &quot; +
</I>&gt;&gt;&gt;<i> nowDiff.TotalSeconds);
</I>&gt;&gt;&gt;<i> System.Console.WriteLine(&quot;Current Local Time: &quot; +
</I>&gt;&gt;&gt;<i> epoch.AddSeconds(nowDiff.TotalSeconds).ToString());
</I>&gt;&gt;&gt;<i> System.Console.WriteLine(&quot;Current UTC Time: &quot; +
</I>&gt;&gt;&gt;<i> epoch.AddSeconds(nowDiff.TotalSeconds).ToUniversalTime().ToString());
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;&gt;<i> 
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="047301.html">[Mono-list] csharp REPL
</A></li>
	<LI>Next message: <A HREF="047302.html">[Mono-list] Mono ASP.NET MVC Virtual Path Not Found Exception?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47304">[ date ]</a>
              <a href="thread.html#47304">[ thread ]</a>
              <a href="subject.html#47304">[ subject ]</a>
              <a href="author.html#47304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
