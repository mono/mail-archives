<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Who is wrong, mono or microsoft
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Who%20is%20wrong%2C%20mono%20or%20microsoft&In-Reply-To=25230391.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="043355.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Who is wrong, mono or microsoft</H1>
    <B>kuse</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Who%20is%20wrong%2C%20mono%20or%20microsoft&In-Reply-To=25230391.post%40talk.nabble.com"
       TITLE="[Mono-list] Who is wrong, mono or microsoft">marcus at in-process.se
       </A><BR>
    <I>Tue Sep  1 04:48:03 EDT 2009</I>
    <P><UL>
        
        <LI>Next message: <A HREF="043355.html">[Mono-list] Who is wrong, mono or microsoft
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43354">[ date ]</a>
              <a href="thread.html#43354">[ thread ]</a>
              <a href="subject.html#43354">[ subject ]</a>
              <a href="author.html#43354">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>


SomeIrishGuy wrote:
&gt;<i> 
</I>&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i> I have been implementing a desktop application that requests information
</I>&gt;<i> from a website.
</I>&gt;<i> 
</I>&gt;<i> The particular problem is sending post information with a query string and
</I>&gt;<i> the underlying http protocol implementation
</I>&gt;<i> 
</I>&gt;<i> consider the following code snippet
</I>&gt;<i> --------------------------------------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> ASCIIEncoding encoding = new ASCIIEncoding();
</I>&gt;<i> string postData = &quot;user=&quot; + this.modem_user + &quot;&amp;pass=&quot; +
</I>&gt;<i> this.modem_password + &quot;&amp;submit=SUBMIT&quot;;
</I>&gt;<i> 
</I>&gt;<i> byte[] data = encoding.GetBytes(postData);
</I>&gt;<i> 
</I>&gt;<i> string dailyimage =
</I>&gt;<i> &quot;<A HREF="http://support.smarttelecom.ie/forums/smart_usage.php?img=daily&quot;;">http://support.smarttelecom.ie/forums/smart_usage.php?img=daily&quot;;</A>
</I>&gt;<i> HttpWebRequest requestImage2 = (HttpWebRequest)
</I>&gt;<i> WebRequest.Create(dailyimage);
</I>&gt;<i> requestImage2.CookieContainer = this.vbCookie;
</I>&gt;<i> 
</I>&gt;<i> requestImage2.Method = &quot;POST&quot;;
</I>&gt;<i> requestImage2.ContentType = &quot;application/x-www-form-urlencoded&quot;;
</I>&gt;<i> requestImage2.UserAgent = &quot;Mozilla/5.0 (X11; U; Linux i686; en-US;
</I>&gt;<i> rv:1.9.1.4pre) Gecko/20090829 Ubuntu/9.04 (jaunty) Shiretoko/3.5.4pre&quot;;
</I>&gt;<i> requestImage2.ContentLength = data.Length;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> // write POST to the stream	
</I>&gt;<i> Stream newStream = requestImage2.GetRequestStream();
</I>&gt;<i> newStream.Write(data, 0, data.Length);
</I>&gt;<i> newStream.Close();
</I>&gt;<i> 
</I>&gt;<i> // what im trying to get is the image (but the query string is being
</I>&gt;<i> ignored so this is to show the html)
</I>&gt;<i> HttpWebResponse WebResp2 = (HttpWebResponse)requestImage2.GetResponse();
</I>&gt;<i> Stream htmlStream = WebResp2.GetResponseStream();
</I>&gt;<i> StreamReader html = new StreamReader(htmlStream);
</I>&gt;<i> Console.WriteLine(html.ReadToEnd());
</I>&gt;<i> 
</I>&gt;<i> // save the image returned   (mono correctly gets the image)          
</I>&gt;<i> System.Drawing.Image webImage2 =
</I>&gt;<i> Image.FromStream(WebResp2.GetResponseStream());		
</I>&gt;<i> webImage2.Save(&quot;daily.png&quot;);
</I>&gt;<i> Console.WriteLine(&quot;saved image&quot;);
</I>&gt;<i> WebResp2.Close();
</I>&gt;<i> 
</I>&gt;<i> -------------------------------------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> this snippet sends login information in the form of POST and has GET
</I>&gt;<i> requests also in the form of a QUERY string
</I>&gt;<i> 
</I>&gt;<i> // string dailyimage =
</I>&gt;<i> &quot;<A HREF="http://support.smarttelecom.ie/forums/smart_usage.php?img=daily&quot;;">http://support.smarttelecom.ie/forums/smart_usage.php?img=daily&quot;;</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----------------------------------------------------------------------------------------------------------
</I>&gt;<i> The problem
</I>&gt;<i> -----------------------------------------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> mono sends the post information correctly and the query string is sent
</I>&gt;<i> correctly as a get request as seen in wireshark
</I>&gt;<i> 
</I>&gt;<i>  <A HREF="http://www.nabble.com/file/p25230391/mono.png">http://www.nabble.com/file/p25230391/mono.png</A> 
</I>&gt;<i> 
</I>&gt;<i> .net frame work sends the posts information but the query string is
</I>&gt;<i> ignored by the server as the TCP http protocol is POST
</I>&gt;<i> 
</I>&gt;<i> as seen here
</I>&gt;<i> 
</I>&gt;<i>  <A HREF="http://www.nabble.com/file/p25230391/microsoft.png">http://www.nabble.com/file/p25230391/microsoft.png</A> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>
I maybe not have an answear here but I want to reflect a thing that came to
my mind.
If we look at the query string:
string dailyimage =
&quot;<A HREF="http://support.smarttelecom.ie/forums/smart_usage.php?img=daily&quot;;">http://support.smarttelecom.ie/forums/smart_usage.php?img=daily&quot;;</A> 
that's for me no doubt a GET-query string, but later the HttpWebRequest
method
is set to POST (requestImage2.Method = &quot;POST&quot;;).
So my question is: Is it possible to have both GET and POST at the same
time? If not could it be that mono identifies the method from the query
string as GET and ignores the &quot;requestImage2.Method = &quot;POST&quot;&quot; ?




-- 
View this message in context: <A HREF="http://www.nabble.com/Who-is-wrong%2C-mono-or-microsoft-tp25230391p25236600.html">http://www.nabble.com/Who-is-wrong%2C-mono-or-microsoft-tp25230391p25236600.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="043355.html">[Mono-list] Who is wrong, mono or microsoft
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43354">[ date ]</a>
              <a href="thread.html#43354">[ thread ]</a>
              <a href="subject.html#43354">[ subject ]</a>
              <a href="author.html#43354">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
