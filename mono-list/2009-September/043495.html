<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mono memory usage grows but application memory looks stable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono%20memory%20usage%20grows%20but%20application%20memory%0A%20looks%20stable&In-Reply-To=3d2f29dc0908231352l5f79e150nf859cfee70699760%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043507.html">
   <LINK REL="Next"  HREF="043496.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mono memory usage grows but application memory looks stable</H1>
    <B>Manuel C.</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Mono%20memory%20usage%20grows%20but%20application%20memory%0A%20looks%20stable&In-Reply-To=3d2f29dc0908231352l5f79e150nf859cfee70699760%40mail.gmail.com"
       TITLE="[Mono-list] Mono memory usage grows but application memory looks stable">wtesto at zero.undo.it
       </A><BR>
    <I>Mon Sep 28 13:24:47 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="043507.html">[Mono-list] Long-running program
</A></li>
        <LI>Next message: <A HREF="043496.html">[Mono-list] Mono memory usage grows but application memory	looks stable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43495">[ date ]</a>
              <a href="thread.html#43495">[ thread ]</a>
              <a href="subject.html#43495">[ subject ]</a>
              <a href="author.html#43495">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Sorry for the late response.

I tried also version 2.4.2.3, it's the same. I took me a few days to find
out that a missing Close() on a GZipStream was the root of all evil. Here is
an example:

        static void Decompress()
        {
            byte[] file = File.ReadAllBytes(&quot;in.dat.gz&quot;);
            Stream stream = new GZipStream(new MemoryStream(file),
CompressionMode.Decompress);
            byte[] buffer = new byte[1024];
            while (stream.Read(buffer, 0, buffer.Length) &gt; 0);
            // stream.Close();
        }

A function similar to this is called very often in my application. Under
Windows with.Net there is no issue, but with Mono the memory usage will
increase with every call of Decompress(). I thought the deconstructor of the
stream will call the Close or Dispose method?

Greetings
Manuel


Chris Howie wrote:
&gt;<i> 
</I>&gt;<i> On Sun, Aug 2, 2009 at 4:52 PM, Manuel C.&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">wtesto at zero.undo.it</A>&gt; wrote:
</I>&gt;&gt;<i> &quot;mono -V&quot;
</I>&gt;&gt;<i> Mono JIT compiler version 1.9.1 (tarball)
</I>&gt;<i> 
</I>&gt;<i> 1.9.1 is horribly ancient.  I would not be surprised to find memory
</I>&gt;<i> leak bugs.  Try running with 2.4.2.  It's relatively easy to backport
</I>&gt;<i> the packages from squeeze to lenny.
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Chris Howie
</I>&gt;<i> <A HREF="http://www.chrishowie.com">http://www.chrishowie.com</A>
</I>&gt;<i> <A HREF="http://en.wikipedia.org/wiki/User:Crazycomputers">http://en.wikipedia.org/wiki/User:Crazycomputers</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://www.nabble.com/Mono-memory-usage-grows-but-application-memory-looks-stable-tp24782014p25649428.html">http://www.nabble.com/Mono-memory-usage-grows-but-application-memory-looks-stable-tp24782014p25649428.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043507.html">[Mono-list] Long-running program
</A></li>
	<LI>Next message: <A HREF="043496.html">[Mono-list] Mono memory usage grows but application memory	looks stable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43495">[ date ]</a>
              <a href="thread.html#43495">[ thread ]</a>
              <a href="subject.html#43495">[ subject ]</a>
              <a href="author.html#43495">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
