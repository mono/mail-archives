<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Binary shutdown takes long after Web Service call
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Binary%20shutdown%20takes%20long%20after%20Web%20Service%20call&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043418.html">
   <LINK REL="Next"  HREF="043421.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Binary shutdown takes long after Web Service call</H1>
    <B>Madars Vitolins</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Binary%20shutdown%20takes%20long%20after%20Web%20Service%20call&In-Reply-To="
       TITLE="[Mono-list] Binary shutdown takes long after Web Service call">madars.vitolins at gmail.com
       </A><BR>
    <I>Fri Sep 11 16:21:55 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="043418.html">[Mono-list] mod_mono failing
</A></li>
        <LI>Next message: <A HREF="043421.html">[Mono-list] Binary shutdown takes long after Web Service call
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43419">[ date ]</a>
              <a href="thread.html#43419">[ thread ]</a>
              <a href="subject.html#43419">[ subject ]</a>
              <a href="author.html#43419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear list,
I have problem with simple command line binary which calls web service once
at it's execution time. Its primary purpose is to execute web service once,
return result to standard output and shutdown i.e. return. Problem is that
for some reason if Web Service was executed in takes about about 1.5 second
for binary to shut down. If Web Service was not executed, then shutdown time
is OK (28 milliseconds).

Where could be problem, how can I reduce that shutdown time? I have already
tried to turn off keep a live for WS connections, but result is the same. I
am using this tool as command line access to web system, and if I am
utilizing this client in scripts, then it makes those scripts long running.
Here is some benchmark. Time markers I have added at the very beginning and
before return command.

If invoking WS, then return takes long:

$ time mono conclient.exe echo &quot;This is echo test which actually is sent to
Web Service&quot;
09.11.2009 23:20:16.508:Starting up
This is echo test which actually is sent to Web Service
09.11.2009 23:20:16.808:Shutdown - took 321 millis

real 0m1.814s
user 0m0.296s
sys 0m0.024s

Processing took 321 milliseconds, but overall it took almost 2 seconds.

Here is timing when there is not WS invoked:

$ time mono conclient.exe
09.11.2009 23:20:34.047:Starting up
SiloFX connector, (c) 2008 SiloDEV
Username in env &quot;SXUSER&quot;, Password in env &quot;SXPASS&quot;
Usage [-m&lt;module&gt;] [-c&lt;class&gt;] command
09.11.2009 23:20:34.060:Shutdown - took 25 millis

real 0m0.055s
user 0m0.048s
sys 0m0.004s


Program is written in C#
$ mono --version
Mono JIT compiler version 2.4.2 (tarball Tue Jun 23 16:32:12 EEST 2009)
Copyright (C) 2002-2008 Novell, Inc and Contributors. www.mono-project.com
TLS:           __thread
GC:            Included Boehm (with typed GC)
SIGSEGV:       altstack
Notifications: epoll
Architecture:  amd64
Disabled:      none

Thanks a lot in advance,
Madars
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-list/attachments/20090911/2a8ae950/attachment.html">http://lists.ximian.com/pipermail/mono-list/attachments/20090911/2a8ae950/attachment.html</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043418.html">[Mono-list] mod_mono failing
</A></li>
	<LI>Next message: <A HREF="043421.html">[Mono-list] Binary shutdown takes long after Web Service call
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43419">[ date ]</a>
              <a href="thread.html#43419">[ thread ]</a>
              <a href="subject.html#43419">[ subject ]</a>
              <a href="author.html#43419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
