<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] P/Invoke question...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jonpryor%40vt.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="024044.html">
   <LINK REL="Next"  HREF="024046.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] P/Invoke question...
   </H1>
    <B>Jonathan Pryor
    </B> 
    <A HREF="mailto:jonpryor%40vt.edu"
       TITLE="[Mono-list] P/Invoke question...">jonpryor@vt.edu
       </A><BR>
    <I>Mon, 25 Oct 2004 21:46:27 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="024044.html">[Mono-list] P/Invoke question...
</A></li>
        <LI> Next message: <A HREF="024046.html">[Mono-list] P/Invoke question...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24045">[ date ]</a>
              <a href="thread.html#24045">[ thread ]</a>
              <a href="subject.html#24045">[ subject ]</a>
              <a href="author.html#24045">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2004-10-25 at 19:32, Tom Shelton wrote:
&gt;<i> Ok...  I have a bit of simple c++ code that is currently residing in a WIN32
</I>&gt;<i> dll.  This code is called by a custom data provider for a proprietary
</I>&gt;<i> database (this already works on win32, we're just trying to port the
</I>&gt;<i> provider over to mono).  I have very little experience in actually creating
</I>&gt;<i> a shared library and getting it working on Linux.  I have followed a couple
</I>&gt;<i> of tutorials on line and so far, no luck.  The code compiled just fine with
</I>&gt;<i> g++, but I can't seem to install it correctly - since Mono never seems to be
</I>&gt;<i> able to find it.  Can someone point me to a good resource/tutorial on how to
</I>&gt;<i> compile/install a shared object file under red hat?  What do I have to do
</I>&gt;<i> after that so that mono can find it?
</I>
You seem to have compiling figured out, but the summary is this:

	g++ -shared -o libMYLIB.so -fpic MYFILES.cpp

The problem you seem to be having is with getting apps to find your new
library (libMYLIB.so).

See the dlopen(3), ld.so(8), and ldconfig(8) man pages for details.  The
summary is that your library needs to be located in one of:

	1.  The LD_LIBRARY_PATH environment variable (':'-delimited,
	    just like $PATH).
	2.  One of the directories listed in /etc/ld.so.conf.  You must 
	    run ldconfig(8) after modifying this file.
	3.  The /lib directory, and /usr/lib.

Libraries are searched in the above order, and the first directory
containing libMYLIB.so is used.

This generally means that you *shouldn't* rely on LD_LIBRARY_PATH except
in development, as *anyone* can add a trojaned library, thus breaking
your app.

You should also consider versioning your libraries.  Ulrich Drepper has
an excellent guide covering more than you'd ever want to know about
versioning and shared libraries, available at:

	<A HREF="http://people.redhat.com/drepper/dsohowto.pdf">http://people.redhat.com/drepper/dsohowto.pdf</A>

 - Jon



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="024044.html">[Mono-list] P/Invoke question...
</A></li>
	<LI> Next message: <A HREF="024046.html">[Mono-list] P/Invoke question...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24045">[ date ]</a>
              <a href="thread.html#24045">[ thread ]</a>
              <a href="subject.html#24045">[ subject ]</a>
              <a href="author.html#24045">[ author ]</a>
         </LI>
       </UL>
</body></html>
