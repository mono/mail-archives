<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] foreach and GetEnumerator
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rodolfocampero%40hotmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="023572.html">
   <LINK REL="Next"  HREF="023577.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] foreach and GetEnumerator
   </H1>
    <B>Rodolfo Campero
    </B> 
    <A HREF="mailto:rodolfocampero%40hotmail.com"
       TITLE="[Mono-list] foreach and GetEnumerator">rodolfocampero@hotmail.com
       </A><BR>
    <I>Mon, 04 Oct 2004 23:04:20 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="023572.html">[Mono-list] Mono hosted webservices and Visual Studio
</A></li>
        <LI> Next message: <A HREF="023577.html">[Mono-list] PDF creation library for Mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23574">[ date ]</a>
              <a href="thread.html#23574">[ thread ]</a>
              <a href="subject.html#23574">[ subject ]</a>
              <a href="author.html#23574">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I've run into a situation with foreachs and the GetEnumerator method.
The issue is reproduced with this small piece of code:

8&lt;---------------------------------------------------
using System;
using System.Collections;

public interface IMyEnumerable {
        IEnumerator GetEnumerator();
}

public class TestCol : IEnumerable, IMyEnumerable {
        IEnumerator IEnumerable.GetEnumerator() {
                Console.WriteLine(&quot;IEnumerable&quot;);
                return null;
        }

        IEnumerator IMyEnumerable.GetEnumerator() {
                Console.WriteLine(&quot;IMyEnumerable&quot;);
                return null;
        }

        public static void Main(string[] args) {
                TestCol t = new TestCol();
                try {
                        foreach(object o in t) {}
                } catch(Exception) {}
        }
}
8&lt;---------------------------------------------------

This program can be compiled using mcs, and when I run it I get:

        $ mono cols.exe
        IEnumerable

The problem is that this same piece of code won't compile in MS.NET csc
compiler (I checked my original program with version 1.1, but not this
simplified example): it complains that it can't choose between
System.Collections.IEnumerable and IMyEnumerable.

I'm rising this question because I'm not sure if this is a mono or a MS
.NET bug, because I find the spec (ECMA-334, 15.8.4) rather ambiguous.
At a given point it reads:

        &quot;A type C is said to be a collection type if it implements
        &quot;the System.IEnumerable interface or implements the collection
        &quot;pattern by meeting all of the following criteria: [...]&quot;

The thing is that it's not specified what happens when _both_ criteria
are met.

So, what do you think?

Looking forward to reading all your comments,

Rodolfo

_________________________________________________________________
Add photos to your e-mail with MSN 8. Get 2 months FREE*. 
<A HREF="http://join.msn.com/?page=features/featuredemail">http://join.msn.com/?page=features/featuredemail</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="023572.html">[Mono-list] Mono hosted webservices and Visual Studio
</A></li>
	<LI> Next message: <A HREF="023577.html">[Mono-list] PDF creation library for Mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23574">[ date ]</a>
              <a href="thread.html#23574">[ thread ]</a>
              <a href="subject.html#23574">[ subject ]</a>
              <a href="author.html#23574">[ author ]</a>
         </LI>
       </UL>
</body></html>
