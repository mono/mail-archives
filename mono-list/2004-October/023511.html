<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Mod-mono-server using too much CPU, running too many times
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antjensavwork%40hotmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="023526.html">
   <LINK REL="Next"  HREF="023512.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Mod-mono-server using too much CPU, running too many times
   </H1>
    <B>Antonio Santana
    </B> 
    <A HREF="mailto:antjensavwork%40hotmail.com"
       TITLE="[Mono-list] Mod-mono-server using too much CPU, running too many times">antjensavwork@hotmail.com
       </A><BR>
    <I>Fri, 01 Oct 2004 08:51:33 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="023526.html">[Mono-list] Is Mono ready to compete with MS .NET in
 realbusiness?
</A></li>
        <LI> Next message: <A HREF="023512.html">[Mono-list] wsdl testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23511">[ date ]</a>
              <a href="thread.html#23511">[ thread ]</a>
              <a href="subject.html#23511">[ subject ]</a>
              <a href="author.html#23511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&lt;html&gt;&lt;div style='background-color:'&gt;&lt;DIV class=RTE&gt;
&lt;P&gt;I meant to write sooner, but kept getting side tracked.&amp;nbsp; As you mentioned httpd and mod-mono-server using up 10% CPU, I looked into my machine and noticed that httpd had a root process with over 15 child processes.&amp;nbsp; Needless to say, I killed them all and restarted httpd, which only started up 1 root process and maintained itself with that one process.&amp;nbsp; Each of the httpd processes were using over 20Mb RAM and appeared to be using up a little over 10% CPU on average consistently.&amp;nbsp; I do not have people hitting this server for web requests.&amp;nbsp; This box is just my newly built &quot;Play with Linux, Apache, and Mono&quot; box.&amp;nbsp; I'm curious to know what might be going on as well that causes httpd to use up extra RAM and CPU.&lt;/P&gt;
&lt;P&gt;Thanks!&lt;BR&gt;&lt;/P&gt;
&lt;P&gt;Antonio&lt;/P&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;From: Joshua Tauberer &amp;lt;<A HREF="mailto:tauberer@for.net">tauberer@for.net</A>&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;To: mono-list &amp;lt;<A HREF="mailto:mono-list@lists.ximian.com">mono-list@lists.ximian.com</A>&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;Subject: [Mono-list] Mod-mono-server using too much CPU, running too many times 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;Date: Thu, 30 Sep 2004 16:44:09 -0400 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;Putting aside the shameless plugs for later, I have two questions 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;about mod_mono: 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;1)&amp;nbsp;&amp;nbsp;Mod-mono-server is consistently using about 10% CPU at times 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;that I know there are no pages being served.&amp;nbsp;&amp;nbsp;Does anyone have any 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;thoughts about the source of this (so I don't have to dive blindly 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;into figuring it out)? 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;Is this something that I could expect from having a lot of files in 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;the System.Web.Caching cache -- with the managed file system watcher 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;or FAM? 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;(It's Fedora Core 1, FAM 2.6.8, and Mono's 1.0.1 release.) 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;2)&amp;nbsp;&amp;nbsp;How does mod_mono work in relation to Apache's prefork module?&amp;nbsp;&amp;nbsp; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;My small understanding of prefork is httpd spawns a few child httpds 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;to do the dirty work.&amp;nbsp;&amp;nbsp;I'm seeing a few mono proceeses starting up, 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;and I don't know whether this is because each httpd child is 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;starting its own mod_mono_server, or for some other reason.&amp;nbsp;&amp;nbsp;(e.g. 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;if mod-mono-server is too busy to pick up a connection, will 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;mod_mono spawn a new mod_mono_server?) 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;Is each child httpd supposed to start its own mod_mono_server?&amp;nbsp;&amp;nbsp;Is 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;mod-mono-server able to process multiple requests concurrently?&amp;nbsp;&amp;nbsp;Is 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;the unix socket to mod-mono-server able to support connections from 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;multiple httpd children? 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;Thanks guys.&amp;nbsp;&amp;nbsp;Aside from these new issues, I've had no problems 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;getting mod_mono working.&amp;nbsp;&amp;nbsp;(This all goes to show me that playing 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;with a server in my basement and actually having people visit the 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;site are two different things...) 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;-- 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;- Joshua Tauberer 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;<A HREF="http://taubz.for.net">http://taubz.for.net</A> 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;** Nothing Unreal Exists ** 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt; 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;_______________________________________________ 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;Mono-list maillist&amp;nbsp;&amp;nbsp;-&amp;nbsp;&amp;nbsp;<A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A> 
&lt;DIV&gt;&lt;/DIV&gt;&amp;gt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A> 
&lt;DIV&gt;&lt;/DIV&gt;&lt;/div&gt;&lt;/html&gt;

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="023526.html">[Mono-list] Is Mono ready to compete with MS .NET in
 realbusiness?
</A></li>
	<LI> Next message: <A HREF="023512.html">[Mono-list] wsdl testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23511">[ date ]</a>
              <a href="thread.html#23511">[ thread ]</a>
              <a href="subject.html#23511">[ subject ]</a>
              <a href="author.html#23511">[ author ]</a>
         </LI>
       </UL>
</body></html>
