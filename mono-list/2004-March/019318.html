<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] C#isms in CodeDom core and other bugs - willing to
 fix
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lluis%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="019301.html">
   <LINK REL="Next"  HREF="019333.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] C#isms in CodeDom core and other bugs - willing to
 fix
   </H1>
    <B>Lluis Sanchez
    </B> 
    <A HREF="mailto:lluis%40ximian.com"
       TITLE="[Mono-list] C#isms in CodeDom core and other bugs - willing to
 fix">lluis@ximian.com
       </A><BR>
    <I>Tue, 30 Mar 2004 12:32:39 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="019301.html">[Mono-list] C#isms in CodeDom core and other bugs - willing to fix
</A></li>
        <LI> Next message: <A HREF="019333.html">[Mono-list] Re: [Mono-devel-list] C#isms in CodeDom core and other bugs - willing to fix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19318">[ date ]</a>
              <a href="thread.html#19318">[ thread ]</a>
              <a href="subject.html#19318">[ subject ]</a>
              <a href="author.html#19318">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On dl, 2004-03-29 at 18:00, Stuart Ballard wrote:
&gt;<i> [Originally posted to mono-list only; I got no response there. Keeping 
</I>&gt;<i> mono-list CC'd for thread-continuity, and because I'm not subscribed to 
</I>&gt;<i> mono-devel]
</I>&gt;<i> 
</I>&gt;<i> I'm working on a CodeDom provider for a language that happens to look an
</I>&gt;<i> awful lot like C#[1].
</I>&gt;<i> 
</I>&gt;<i> I thought it would be sufficient to start with Mono's
</I>&gt;<i> CSharpCodeGenerator and go through it in detail, changing each construct
</I>&gt;<i> to the equivalent in Ja^H^Hthe language I'm dealing with. This turns out
</I>&gt;<i> to actually not be sufficient, though, because in several places
</I>&gt;<i> CSharpCodeGenerator simply inherits an implementation from CodeGenerator
</I>&gt;<i> which gives C#-specific behavior. Examples of this behavior are
</I>&gt;<i> OutputTypeAttributes() and OutputMemberAccessModifier(), both of which
</I>&gt;<i> are non-abstract in CodeGenerator and give pure C# output.
</I>
Those methods are virtual, you can (should) reimplement them in your
language generator class.

&gt;<i> 
</I>&gt;<i> This seems like an incredibly bad idea that defeats the purpose of
</I>&gt;<i> having a language-independent API. I recognize that there are other good
</I>&gt;<i> reasons why the CodeDom API sucks (I've already compiled a half dozen
</I>&gt;<i> items in my wishlist of API features) but this seems to me like
</I>&gt;<i> implementation suckage, not API suckage.
</I>&gt;<i> 
</I>&gt;<i> It may be that this behavior is required to be fully compatible with a
</I>&gt;<i> sucky MS implementation. If that's the case, there should be a prominent
</I>&gt;<i> comment in the source of CodeGenerator explaining this. I'd also be
</I>&gt;<i> tempted to duplicate the methods in CSharpCodeGenerator even though
</I>&gt;<i> that's technically redundant, because it's closer to the correct
</I>&gt;<i> separation of concerns between the two classes. If not, there should at
</I>&gt;<i> least be a large comment at the top of CSharpCodeGenerator documenting
</I>&gt;<i> which methods it inherits from CodeGenerator that are C#-specific.
</I>
Some methods may emit C#-specific code by default, but since all those
methods are virtual, this is not a problem.

&gt;<i> 
</I>&gt;<i> If I produce a patch to this effect, would it be accepted? Which
</I>&gt;<i> approach should I take?
</I>&gt;<i> 
</I>&gt;<i> I've also encountered what I believe are some other bugs in
</I>&gt;<i> CSharpCodeProvider:
</I>&gt;<i> 
</I>&gt;<i> - GenerateLabeledStatement is missing a &quot;:&quot; emitted after the label
</I>&gt;<i> name, if I remember C# label syntax correctly.
</I>&gt;<i> 
</I>&gt;<i> - GenerateProperty attempts to determine whether to generate an indexer
</I>&gt;<i> or not based on whether the name is Item. This is incorrect because Item
</I>&gt;<i> is a perfectly valid name for a property, and an indexer can have a name
</I>&gt;<i> other than Item. Instead, it should use the list of parameters to the
</I>&gt;<i> property: If that list is non-empty, it's an indexer. In that case, if
</I>&gt;<i> the name *isn't* Item, it should additionally generate an
</I>&gt;<i> IndexerNameAttribute.
</I>&gt;<i> 
</I>&gt;<i> If I'm correct about these behaviors being bugs, should I produce
</I>&gt;<i> patches for them?
</I>
Please do it!

&gt;<i> 
</I>&gt;<i> By the way, on a completely unrelated note, is there a reason why Jeroen
</I>&gt;<i> Frijters' excellent IKVM blog (<A HREF="http://www.ikvm.net/">http://www.ikvm.net/</A>) isn't part of
</I>&gt;<i> Monologue? The mono roadmap describes IKVM as a goal for Mono 1.0, so
</I>&gt;<i> I'd definitely think that it's development weblog qualifies as &quot;Mono
</I>&gt;<i> related&quot;. Plus it's an excellent project that deserves more publicity
</I>&gt;<i> than it gets, and Monologue is one small way to raise its profile, at
</I>&gt;<i> least among Mono developers and users.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Stuart.
</I>&gt;<i> 
</I>&gt;<i> [1] Can you imagine what that language could *possibly* be? ;)
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="019301.html">[Mono-list] C#isms in CodeDom core and other bugs - willing to fix
</A></li>
	<LI> Next message: <A HREF="019333.html">[Mono-list] Re: [Mono-devel-list] C#isms in CodeDom core and other bugs - willing to fix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19318">[ date ]</a>
              <a href="thread.html#19318">[ thread ]</a>
              <a href="subject.html#19318">[ subject ]</a>
              <a href="author.html#19318">[ author ]</a>
         </LI>
       </UL>
</body></html>
