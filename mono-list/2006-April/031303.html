<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Xml.Serialization empty element
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Xml.Serialization%20empty%20element&In-Reply-To=1145346673.7102.5.camel%40portatil.aticatac">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031297.html">
   <LINK REL="Next"  HREF="031306.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Xml.Serialization empty element</H1>
    <B>Jonathan Gilbert</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Xml.Serialization%20empty%20element&In-Reply-To=1145346673.7102.5.camel%40portatil.aticatac"
       TITLE="[Mono-list] Xml.Serialization empty element">2a5gjx302 at sneakemail.com
       </A><BR>
    <I>Tue Apr 18 13:05:32 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="031297.html">[Mono-list] Xml.Serialization empty element
</A></li>
        <LI>Next message: <A HREF="031306.html">[Mono-list] Xml.Serialization empty element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31303">[ date ]</a>
              <a href="thread.html#31303">[ thread ]</a>
              <a href="subject.html#31303">[ subject ]</a>
              <a href="author.html#31303">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 09:51 AM 18/04/2006 +0200, Lluis wrote:
&gt;<i>El vie, 14-04-2006 a las 20:17 +0200, Dominik Zablotny escribi&#195;&#179;:
</I>&gt;&gt;<i> Hello
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I would like to represent empty XML element as a bool that is true where
</I>&gt;&gt;<i> element is present, and false  when it's not. Serialized element must be
</I>&gt;&gt;<i> empty, so DefaultValue(&quot;false&quot;) is not sufficient. For now the best way
</I>&gt;&gt;<i> I figured out is using extra class for that element and extra bool
</I>&gt;&gt;<i> property, but since this situation is quite common in my program I
</I>&gt;&gt;<i> wonder if there is a better way to do it?
</I>&gt;&gt;<i> 
</I>&gt;<i>
</I>&gt;<i>There isn't a better way. XmlSerializer does not have support for what
</I>&gt;<i>you want to do.
</I>
Just to elaborate on this (for the original poster), XML serializtion was
designed with the goal of generating XML for instances of existing data
types, and so using it for the inverse mapping -- taking an arbitrary XML
structure and mapping a hierarchy of C# data types onto it -- is something
that is not guaranteed to work. It sounds like you've done well, in that
you are successfully deserializing your XML to C# classes. When looking for
features like what you want here, though, you need to consider whether the
XML structure you want to parse could possibly be generated by XML
serialization directly from C# objects. Could a 'bool' ever get serialized
to &lt;arbitraryelement /&gt;? :-)

One approach to slightly sweeten the syntax might be to add an implicit
conversion from your dummy class to 'bool':

using System;

class Test
{
  static void Main()
  {
    Bonk q = new Bonk();

    if (q)
      Console.WriteLine(&quot;true&quot;);
    else
      Console.WriteLine(&quot;false&quot;);

    q = null;

    if (q)
      Console.WriteLine(&quot;true&quot;);
    else
      Console.WriteLine(&quot;false&quot;);
  }
}

class Bonk
{
  public static implicit operator bool (Bonk o)
  {
    return (o != null);
  }
}

Output:

true
false

Jonathan Gilbert
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031297.html">[Mono-list] Xml.Serialization empty element
</A></li>
	<LI>Next message: <A HREF="031306.html">[Mono-list] Xml.Serialization empty element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31303">[ date ]</a>
              <a href="thread.html#31303">[ thread ]</a>
              <a href="subject.html#31303">[ subject ]</a>
              <a href="author.html#31303">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
