<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Garbage collection and memory usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Garbage%20collection%20and%20memory%20usage&In-Reply-To=1145442208.7536.267.camel%40linux.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031312.html">
   <LINK REL="Next"  HREF="031389.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Garbage collection and memory usage</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Garbage%20collection%20and%20memory%20usage&In-Reply-To=1145442208.7536.267.camel%40linux.site"
       TITLE="[Mono-list] Garbage collection and memory usage">miguel at novell.com
       </A><BR>
    <I>Mon Apr 24 18:47:09 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="031312.html">[Mono-list] Garbage collection and memory usage
</A></li>
        <LI>Next message: <A HREF="031389.html">[Mono-list] Garbage collection and memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31385">[ date ]</a>
              <a href="thread.html#31385">[ thread ]</a>
              <a href="subject.html#31385">[ subject ]</a>
              <a href="author.html#31385">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> &gt; &gt; We looked at the problem, and it boils down to the fact that Mono does
</I>&gt;<i> &gt; &gt; not have a compacting GC.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; After making some tests and googling a lot, I came to the same
</I>&gt;<i> &gt; conclusion. But this only explains why the memory usage is so big, and
</I>&gt;<i> &gt; keeps growing, it doesn't explain why mono &quot;hangs&quot; and .aspx pages are
</I>&gt;<i> &gt; not processed when there is still free memory on the machine.
</I>&gt;<i> 
</I>&gt;<i> I could not reproduce the hang of Mono, but it did expose another
</I>&gt;<i> problem: I get a connection reset by peer while the large pages are
</I>&gt;<i> begin generated, we will investigate. 
</I>
We investigated this last week.

I could not reproduce the case you describe (memory being available, xsp
stopped responding to requests).  What OS are you running, version,
version of Mono and version of XSP/Mod_Mono?

As for the second problem, the one I mentioned: we found that this seems
to be caused by the CPU being too busy with the generation of the return
page to have time to close the dangling sockets. 

At least that is what it seems so far (when I used Apache Bench to flood
the machine with requests, which was the only way I would get the reset
event).

Am not sure how Apache copes with this problem, probably they have a
larger listen queue than we do.   


</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031312.html">[Mono-list] Garbage collection and memory usage
</A></li>
	<LI>Next message: <A HREF="031389.html">[Mono-list] Garbage collection and memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31385">[ date ]</a>
              <a href="thread.html#31385">[ thread ]</a>
              <a href="subject.html#31385">[ subject ]</a>
              <a href="author.html#31385">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
