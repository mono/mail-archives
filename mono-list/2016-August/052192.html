<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] [Mono-dev] Next steps for mkbundle
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.dot.net?Subject=Re%3A%20%5BMono-list%5D%20%5BMono-dev%5D%20Next%20steps%20for%20mkbundle&In-Reply-To=%3C160AF6DD3D8ECE2D.F6BE2E62-999A-4C00-BD61-0599B9A118BE%40mail.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052191.html">
   <LINK REL="Next"  HREF="052193.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] [Mono-dev] Next steps for mkbundle</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-list%40lists.dot.net?Subject=Re%3A%20%5BMono-list%5D%20%5BMono-dev%5D%20Next%20steps%20for%20mkbundle&In-Reply-To=%3C160AF6DD3D8ECE2D.F6BE2E62-999A-4C00-BD61-0599B9A118BE%40mail.outlook.com%3E"
       TITLE="[Mono-list] [Mono-dev] Next steps for mkbundle">miguel at microsoft.com
       </A><BR>
    <I>Sat Aug 20 16:24:18 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052191.html">[Mono-list] [Mono-dev] Next steps for mkbundle
</A></li>
        <LI>Next message (by thread): <A HREF="052193.html">[Mono-list] [Mono-dev] Next steps for mkbundle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52192">[ date ]</a>
              <a href="thread.html#52192">[ thread ]</a>
              <a href="subject.html#52192">[ subject ]</a>
              <a href="author.html#52192">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello James,

Thanks for the feedback.   I had not thought about that.

It is certainly possible to support it.  For AOT it would be up to you to produce the artifacts.

You could then AOT with LLVM and use regular runtime for the regular runtime.





On Sat, Aug 20, 2016 at 11:01 AM -0400, &quot;James Babcock&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-list">jimrandomh at gmail.com</A>&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/mono-list">jimrandomh at gmail.com</A>&gt;&gt; wrote:


I've got a (so far unpublished, but quite far along) project aiming to replace the traditional Unix command line (terminal, shell, tmux and miscellaneous utilities). It's predominantly C#, with a little bit of C++. One of its wishlist features is a busybox-style dependency-free binary, and a while back I made myself a hacked up mkbundle that got most of the way there, except that it still had a libc dependency and couldn't embed AOT.

So it's exciting to hear that mkbundle is getting some love! A general facility for embedding shared libraries in the bundle would be amazing for this case. Especially if it could handle both CLR DLLs and Linux shared libraries, and especially if it included the shared libraries generated by AOT compilation. If only a subset of these things work it's still useful.

On Aug 19, 2016 7:13 PM, &quot;Miguel de Icaza via Mono-devel-list&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-list">mono-devel-list at lists.dot.net</A>&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/mono-list">mono-devel-list at lists.dot.net</A>&gt;&gt; wrote:
Hello team,

I am very happy with the new hack to simplify creating bundles of applications, because we no longer need a C compiler to make these happen, and as a bonus, we now allow cross-compilation of bundles.

Just a couple of days ago, I added support for a new &quot;--18n&quot; flag that controls which encoders are shipped with the application, similar to the same setting that we surface on Xamarin.{Android,iOS,tvOS,macOS}.

The cross-compilation feature has surfaced a problem, when we bundle, we bundle using the assemblies from the system, but a VM that you can specify, and this can lead to mismatches between the C and C# code in the runtime (ie, Mono 4.0 and mscorlib 4.2).

So it seems to me that instead of just shipping Mono runtimes in our server for cross compilation, we are going to have to ship the entire set of assemblies that are part of a distribution. Perhaps all of $prefix/lib/mono/gac as well as the C runtime, and the support libraries for Mono.Posix.

Now, that is the easy part.

The part that I am debating is the part where we would like to distribute shared libraries that go with the bundled binary.   Either we can require that shared libraries be distributed side-by-side, to be a user/distribution problem, or to allow a way in mkbundle to ship those on behalf of the user/distributor.

Something like:

                mcs foo.cs  -pkg:gtk-sharp-2.0
                mkbundle -cross arm64-debian-linux-4.2.0 -shared-libs=/tmp/my-gtk-2.0-for-debain-shared-libs

Thoughts?
Miguel.

_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.dot.net/mailman/listinfo/mono-list">Mono-devel-list at lists.dot.net</A>&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/mono-list">Mono-devel-list at lists.dot.net</A>&gt;
<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list&lt;https://na01.safelinks.protection.outlook.com/?url=http%3a%2f%2flists.dot.net%2fmailman%2flistinfo%2fmono-devel-list&amp;data=01%7c01%7cmiguel%40microsoft.com%7cbaf64ef9ccc64f9bf07a08d3c90ace88%7c72f988bf86f141af91ab2d7cd011db47%7c1&amp;sdata=Zm7m%2fk5MOc5OhZAOzMcjGdXEaiApkYQx4pHs23fPjVY%3d">http://lists.dot.net/mailman/listinfo/mono-devel-list&lt;https://na01.safelinks.protection.outlook.com/?url=http%3a%2f%2flists.dot.net%2fmailman%2flistinfo%2fmono-devel-list&amp;data=01%7c01%7cmiguel%40microsoft.com%7cbaf64ef9ccc64f9bf07a08d3c90ace88%7c72f988bf86f141af91ab2d7cd011db47%7c1&amp;sdata=Zm7m%2fk5MOc5OhZAOzMcjGdXEaiApkYQx4pHs23fPjVY%3d</A>&gt;


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/mono-list/attachments/20160820/29bfc468/attachment.html">http://lists.dot.net/pipermail/mono-list/attachments/20160820/29bfc468/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052191.html">[Mono-list] [Mono-dev] Next steps for mkbundle
</A></li>
	<LI>Next message (by thread): <A HREF="052193.html">[Mono-list] [Mono-dev] Next steps for mkbundle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52192">[ date ]</a>
              <a href="thread.html#52192">[ thread ]</a>
              <a href="subject.html#52192">[ subject ]</a>
              <a href="author.html#52192">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
