<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] MySQL Connector - NUnit Issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20MySQL%20Connector%20-%20NUnit%20Issues&In-Reply-To=19161535.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039397.html">
   <LINK REL="Next"  HREF="039400.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] MySQL Connector - NUnit Issues</H1>
    <B>krdavis</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20MySQL%20Connector%20-%20NUnit%20Issues&In-Reply-To=19161535.post%40talk.nabble.com"
       TITLE="[Mono-list] MySQL Connector - NUnit Issues">KEITH.DAVIS at ZUNISOFT.COM
       </A><BR>
    <I>Tue Aug 26 09:12:55 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="039397.html">[Mono-list]  MySQL Connector - NUnit Issues
</A></li>
        <LI>Next message: <A HREF="039400.html">[Mono-list] MySQL Connector - NUnit Issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39398">[ date ]</a>
              <a href="thread.html#39398">[ thread ]</a>
              <a href="subject.html#39398">[ subject ]</a>
              <a href="author.html#39398">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I must be brain dead today. I first posted to the wrong list and then cut and
pasted it leaving out half my post.

In addition to what I posted below, I would like to know the correct way to
configure a unit test in Monodevelop for a library that needs a provider not
listed in the machine.config.  I have been googling this issue for a whole
day without any answers. It must be simple as my ASP.NET works and the test
fails (on the same machine).

Thanks in advance, and your patience with my bodged posting today!

Keith


krdavis wrote:
&gt;<i> 
</I>&gt;<i> First off I have scoured the list and found similar but not identical
</I>&gt;<i> problems to mine without a solution. Development environemnt is Ubuntu
</I>&gt;<i> 8.04, Mono 1.9.1 and Monodevelop 2.0 Alpha.
</I>&gt;<i> 
</I>&gt;<i> I have used JUnit for years and I am new NUnit and the nuances of
</I>&gt;<i> assemblies and how they are located and loaded.  I have an ASP.NET
</I>&gt;<i> application that uses a custom membership provider (w/MySQL as the
</I>&gt;<i> backend).  The provider works fine,  everything is being updated and what
</I>&gt;<i> not.  I added the following to my web.config to get my MySQL connection
</I>&gt;<i> working:
</I>&gt;<i> 
</I>&gt;<i> &lt;system.web&gt;
</I>&gt;<i> ...
</I>&gt;<i> &lt;system.data&gt;
</I>&gt;<i>     &lt;DbProviderFactories&gt;
</I>&gt;<i>       &lt;clear /&gt;
</I>&gt;<i>       &lt;add name=&quot;MySQL Data Provider&quot; invariant=&quot;MySql.Data.MySqlClient&quot;
</I>&gt;<i>            description=&quot;.Net Framework Data Provider for MySQL&quot;
</I>&gt;<i>            type=&quot;MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data,
</I>&gt;<i>                Version=5.1.6.0, Culture=neutral,
</I>&gt;<i> PublicKeyToken=c5687fc88969c44d&quot; /&gt;
</I>&gt;<i>     &lt;/DbProviderFactories&gt;
</I>&gt;<i>   &lt;/system.data&gt;
</I>&gt;<i> &lt;system.web&gt;
</I>&gt;<i> 
</I>&gt;<i> This is great and the ASP.NET app works with MySQL, now the problem. 
</I>&gt;<i> Being a good developer, I want to create some unit tests for my membership
</I>&gt;<i> provider.  I created a separate test project from my memberhip library
</I>&gt;<i> project.  I added a project reference to the membership project in my test
</I>&gt;<i> project (good, the dll will get copied to the test project).
</I>&gt;<i> 
</I>&gt;<i> In the test project I created an app.config with the above section from my
</I>&gt;<i> web.config so my NUnit test will know about the MySQL provider.  I create
</I>&gt;<i> a simple test and my membership dll (not the NUnit dll) throws:
</I>&gt;<i> 
</I>&gt;<i> Failed to find or load the registered .Net Framework Data Provider
</I>&gt;<i> 'MySql.Data.MySqlClient'. () ()
</I>&gt;<i> 
</I>&gt;<i> My NUnit project copies the app.config to the appropriate output directory
</I>&gt;<i> properly named &lt;assembly-name&gt;.dll.config.  Examining the build output
</I>&gt;<i> directory shows the NUnit dll and its corresponding config file.  I added
</I>&gt;<i> a bit of code to the nunit test and found it is not picking up the correct
</I>&gt;<i> config file for the test dll. (it was picking up another config
</I>&gt;<i> *md*.config, monodevelop maybe?) I thought the default behavior for NUnit
</I>&gt;<i> was to pick up the config if I configured the build directory with the
</I>&gt;<i> renamed dll config.
</I>&gt;<i> 
</I>&gt;<i> I tried to open the dll.confg in the unit test directly (I think that just
</I>&gt;<i> lets me query the values, it doesn't actually load the provider reference,
</I>&gt;<i> if I am wrong here, please advise). 
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://www.nabble.com/MySQL-Connector---NUnit-Issues-tp19161535p19161792.html">http://www.nabble.com/MySQL-Connector---NUnit-Issues-tp19161535p19161792.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039397.html">[Mono-list]  MySQL Connector - NUnit Issues
</A></li>
	<LI>Next message: <A HREF="039400.html">[Mono-list] MySQL Connector - NUnit Issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39398">[ date ]</a>
              <a href="thread.html#39398">[ thread ]</a>
              <a href="subject.html#39398">[ subject ]</a>
              <a href="author.html#39398">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
