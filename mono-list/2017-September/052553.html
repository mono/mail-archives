<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] JVM interactions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.dot.net?Subject=Re%3A%20%5BMono-list%5D%20JVM%20interactions&In-Reply-To=%3C317E5F31-2D92-4C70-8BFB-E6968192F76E%40vt.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052552.html">
   <LINK REL="Next"  HREF="052554.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] JVM interactions</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-list%40lists.dot.net?Subject=Re%3A%20%5BMono-list%5D%20JVM%20interactions&In-Reply-To=%3C317E5F31-2D92-4C70-8BFB-E6968192F76E%40vt.edu%3E"
       TITLE="[Mono-list] JVM interactions">jonpryor at vt.edu
       </A><BR>
    <I>Mon Sep 11 18:43:24 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052552.html">[Mono-list] JVM interactions
</A></li>
        <LI>Next message (by thread): <A HREF="052554.html">[Mono-list] Looking for netlink wrapper/library (libnl) in net (C#)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52553">[ date ]</a>
              <a href="thread.html#52553">[ thread ]</a>
              <a href="subject.html#52553">[ subject ]</a>
              <a href="author.html#52553">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you’re willing to do some work, may I suggest a third option? Java.Interop:

	<A HREF="https://github.com/xamarin/Java.Interop/">https://github.com/xamarin/Java.Interop/</A>
	<A HREF="https://gitter.im/xamarin/xamarin-android">https://gitter.im/xamarin/xamarin-android</A>

Java.Interop is the “core” JNI glue and binding generator code that Xamarin.Android uses. This means two things:

1. It works!
2. The primary platform is *Android*, not a Desktop JVM.

Java.Interop *does* contain unit tests which run on a desktop JVM. However, most development occurs on macOS and Linux. There is also at least one bug around the GC integration in there, and `tools/generator` emits C# bindings which are specific to Xamarin.Android use, not “pure” Java.Interop use.

We have plans to address those issues, but no concrete timeframe to actually do so.

All that aside…it’s difficult to suggest what you’re doing “wrong” without some form of stack trace, code, or any other avenue of investigation. “SIGSEGV in the GC” could mean *lots* of things.

 - Jon

On Sep 6, 2017, at 2:55 PM, Julian Dolby &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-list">dolby at us.ibm.com</A>&gt; wrote:
&gt;<i>  I have been trying to use C# code together with Java code, to provide program analysis of .NET code as part of WALA (<A HREF="https://github.com/wala/WALA">https://github.com/wala/WALA</A>).  Given the seeming end of work on IKVM, I have been exploring using a small amount of C++ code and JNI to bridge the two systems.  I have tried two options:
</I>&gt;<i>  
</I>&gt;<i> 1) a C++ program that create a Mono VM and a JVM, loading the needed code into both and then calls functions in the them.  The Java code contains 'native' methods that call back into C++ and from there to Mono.
</I>&gt;<i>  
</I>&gt;<i> 2) a Java program that calls C++ using JNI, which creates a Mono VM and calls code in it, passing results (integers and strings) back to Java.
</I>&gt;<i>  
</I>&gt;<i>  In both cases, I get code that works fine up to a point, and then crashes with what appears to be a segmentation fault in the Mono memory allocator.  Depending on what GC I choose, I get slightly different errors.
</I>&gt;<i>  
</I>&gt;<i>  Does anyone have a recommended recipe for doing what I need?
</I>&gt;<i>  
</I>&gt;<i>     Thanks,
</I>&gt;<i>           Julian
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.dot.net/mailman/listinfo/mono-list">Mono-list at lists.dot.net</A>
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/mono-list">http://lists.dot.net/mailman/listinfo/mono-list</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052552.html">[Mono-list] JVM interactions
</A></li>
	<LI>Next message (by thread): <A HREF="052554.html">[Mono-list] Looking for netlink wrapper/library (libnl) in net (C#)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52553">[ date ]</a>
              <a href="thread.html#52553">[ thread ]</a>
              <a href="subject.html#52553">[ subject ]</a>
              <a href="author.html#52553">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
