<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] What affects collation order in a given culture?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20What%20affects%20collation%20order%20in%20a%20given%20culture%3F&In-Reply-To=%3CCACBComFtqb1-OKiBqNwwM_E4vHXBhe12jjg5HLf5Lz8S-pbZsg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="049948.html">
   <LINK REL="Next"  HREF="049965.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] What affects collation order in a given culture?</H1>
    <B>Weeble</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20What%20affects%20collation%20order%20in%20a%20given%20culture%3F&In-Reply-To=%3CCACBComFtqb1-OKiBqNwwM_E4vHXBhe12jjg5HLf5Lz8S-pbZsg%40mail.gmail.com%3E"
       TITLE="[Mono-list] What affects collation order in a given culture?">clockworksaint at gmail.com
       </A><BR>
    <I>Mon Jun  3 12:22:36 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="049948.html">[Mono-list] How I can contribute to code
</A></li>
        <LI>Next message: <A HREF="049965.html">[Mono-list] [dblinq] Announcing DbLinq 0.20.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49952">[ date ]</a>
              <a href="thread.html#49952">[ thread ]</a>
              <a href="subject.html#49952">[ subject ]</a>
              <a href="author.html#49952">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I should preface this by saying that I don't know Mandarin, so I'm
working rather blind. I want to make sure that a list of
filenames/track names/artists/albums is sorted correctly for Chinese
users. My understanding is that the most commonly expected sort order
is based on the pinyin transcription of the characters.

I've been investigating how strings are sorted in various cultures in
.NET, and I've found that I get different results in Mono from .NET
for the &quot;zh-Hans&quot; culture. From what I've read, I think this should
just be another name for the &quot;zh-CHS&quot; culture, and I should get the
same results for both, but Mono gives me different results.

Here's a link to my short test program:

<A HREF="http://pastebin.com/kTL9QuLS">http://pastebin.com/kTL9QuLS</A>

Here's my output on .NET:

<A HREF="http://pastebin.com/D5Hp6GjA">http://pastebin.com/D5Hp6GjA</A>

On .NET, in both the zh-Hans and the zh-CHS culture, the example
strings are sorted in an order consistent with their pinyin
transcriptions, which is what I expect.

Here's my output on mono 3.0.10, running on Ubuntu:

<A HREF="http://pastebin.com/jMB0FdkP">http://pastebin.com/jMB0FdkP</A>

This time, I get the same result as for .NET with zh-CHS. However, for
zh-Hans, I get a different order. It *looks* like they're just being
ordered by unicode code-point. I am surprised that I see a different
sort order for zh-CHS from zh-Hans on the same setup, and I'm
surprised at the difference from .NET.

I tried another attempt with an older version of Mono, 2.10.8, as
distributed with Ubuntu:

<A HREF="http://pastebin.com/BmEepAmc">http://pastebin.com/BmEepAmc</A>

This gives me the expected sort order for both zh-Hans and zh-CHS, but
it also reports the culture name as being simply &quot;Chinese&quot; in each
case, instead of the expected &quot;Chinese (Simplified) Legacy&quot; and
&quot;Chinese (Simplified)&quot;.

Finally, I've summarized the results in a table:

Runtime       Requested culture   Culture display name
    Collation order for

    Chinese characters

.NET 4.0      invariant           Invariant Language (Invariant
Country)   code-point
.NET 4.0      zh-CHS              Chinese (Simplified) Legacy
    pinyin
.NET 4.0      zh-Hans             Chinese (Simplified)
    pinyin

Mono 2.8.10   invariant           Invariant Language (Invariant
Country)   code-point
Mono 2.8.10   zh-CHS              Chinese
    pinyin
Mono 2.8.10   zh-Hans             Chinese
    pinyin

Mono 3.0.10   invariant           Invariant Language (Invariant
Country)   code-point
Mono 3.0.10   zh-CHS              Chinese (Simplified) Legacy
    pinyin
Mono 3.0.10   zh-Hans             Chinese (Simplified)
    code-point(?!)

(In case the formatting is screwed up in email, here it is monospaced:
<A HREF="http://pastebin.com/SXYR7ucc">http://pastebin.com/SXYR7ucc</A> )

If you're still following me (thankyou!) I have a few questions:

1. Am I correct to expect that zh-CHS and zh-Hans should have the same
collation behaviour as each other?
2. Am I correct to expect that zh-Hans will have a pinyin-based collation order?
3. What systems/libraries are involved here? Does Mono depend on some
system library for its collation order, or does it implement this
itself? Are there particular configuration options I need to be aware
of if I am compiling mono myself?
4. How does Mono pick the default culture on its various platforms?
Will it ever pick 'zh-Hans' as the default culture? Or would it always
prefer 'zh-CHS'? I'm worried that if it defaults to 'zh-Hans' for some
Chinese users they will get a surprising and unhelpful sort order.

Regards,

Weeble.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="049948.html">[Mono-list] How I can contribute to code
</A></li>
	<LI>Next message: <A HREF="049965.html">[Mono-list] [dblinq] Announcing DbLinq 0.20.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49952">[ date ]</a>
              <a href="thread.html#49952">[ thread ]</a>
              <a href="subject.html#49952">[ subject ]</a>
              <a href="author.html#49952">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
