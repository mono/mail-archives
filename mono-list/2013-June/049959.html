<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Can this linq be optimised?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Can%20this%20linq%20be%20optimised%3F&In-Reply-To=%3C51AF6435.5010601%40brdstudio.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="049955.html">
   <LINK REL="Next"  HREF="049956.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Can this linq be optimised?</H1>
    <B>Andy York</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-list%5D%20Can%20this%20linq%20be%20optimised%3F&In-Reply-To=%3C51AF6435.5010601%40brdstudio.net%3E"
       TITLE="[Mono-list] Can this linq be optimised?">andy at brdstudio.net
       </A><BR>
    <I>Wed Jun  5 16:15:49 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="049955.html">[Mono-list] Can this linq be optimised?
</A></li>
        <LI>Next message: <A HREF="049956.html">[Mono-list] Can this linq be optimised?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49959">[ date ]</a>
              <a href="thread.html#49959">[ thread ]</a>
              <a href="subject.html#49959">[ subject ]</a>
              <a href="author.html#49959">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is this running against a database? If so you can always get the SQL 
that is generated by the LINQ statement and check it running the SQL 
statement directly against the database and checking the number of reads 
and the time. The fact that your using a distinct hints that you may be 
missing a part of the query.

Just a suggestion.

On 6/5/2013 11:15 AM, Stifu wrote:
&gt;<i> A single Substring() (to isolate the part between brackets), then a Trim()?
</I>&gt;<i> Or if the word between the brackets is not supposed to contain ANY space,
</I>&gt;<i> maybe use the Trim overload that expects a char array parameter.
</I>&gt;<i>
</I>&gt;<i> Like this (except in your LINQ query):
</I>&gt;<i> string word = &quot;(  hello    )&quot;;
</I>&gt;<i> char[] trimChars = new char[] {'(', ' ', ')'};
</I>&gt;<i> string result = word.Trim(trimChars);
</I>&gt;<i>
</I>&gt;<i> PS: if it works and is fast enough, then maybe it's good enough. It may look
</I>&gt;<i> (and actually be) inefficient, but if it doesn't affect users, don't bother
</I>&gt;<i> unless you've got time to kill. You might also be interested in double
</I>&gt;<i> checking Regex performances, but I'd expect it to be slower.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> nodoid wrote
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have a class containing ints, strings and anything else you'd expect
</I>&gt;&gt;<i> to find in a class. I create a list of the class and then extract the
</I>&gt;&gt;<i> strings and perform a Distinct() on them. That bit is easy.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Problem is this - the strings all have something in brackets. Sometimes
</I>&gt;&gt;<i> the braces have a space on the inside before and after the single word
</I>&gt;&gt;<i> inside of them and sometimes they don't.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My LINQ query looks like this
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    List
</I>&gt;&gt;<i> &lt;string&gt;
</I>&gt;&gt;<i>   tmp = (from m in cropTypes
</I>&gt;&gt;<i>                                     let cw = m.CropName
</I>&gt;&gt;<i>                                     let kw = cw.Substring(0,
</I>&gt;&gt;<i> cw.LastIndexOf(&quot;)&quot;) + 1)
</I>&gt;&gt;<i>                                   let t = kw.IndexOf('(')
</I>&gt;&gt;<i>                                   let p1 = kw.Substring(0, t)
</I>&gt;&gt;<i>                                   let p2 = kw.Substring(t, (kw.Length -
</I>&gt;&gt;<i> 1) - t + 1).Replace(&quot; &quot;, string.Empty)
</I>&gt;&gt;<i>                                   let p3 = p1 + p2
</I>&gt;&gt;<i>                                     select p3).Distinct().ToList();
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This query works fine but looks inefficient. Is there a way to rewrite
</I>&gt;&gt;<i> this to remove any spaces inside of the braces?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Paul
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> &quot;Space,&quot; it says, &quot;is big. Really big. You just won't believe how
</I>&gt;&gt;<i> vastly, hugely, mindbogglingly big it is. I mean, you may think it's a
</I>&gt;&gt;<i> long way down the road to the chemist's, but that's just peanuts to
</I>&gt;&gt;<i> space, listen...&quot;
</I>&gt;&gt;<i> Hitch Hikers Guide to the Galaxy, a truly remarkable book!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-list maillist  -
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at .ximian</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Can-this-linq-be-optimised-tp4659853p4659859.html">http://mono.1490590.n4.nabble.com/Can-this-linq-be-optimised-tp4659853p4659859.html</A>
</I>&gt;<i> Sent from the Mono - General mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -----
</I>&gt;<i> No virus found in this message.
</I>&gt;<i> Checked by AVG - www.avg.com
</I>&gt;<i> Version: 2013.0.3343 / Virus Database: 3184/6384 - Release Date: 06/04/13
</I>&gt;<i>
</I>&gt;<i>
</I>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="049955.html">[Mono-list] Can this linq be optimised?
</A></li>
	<LI>Next message: <A HREF="049956.html">[Mono-list] Can this linq be optimised?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49959">[ date ]</a>
              <a href="thread.html#49959">[ thread ]</a>
              <a href="subject.html#49959">[ subject ]</a>
              <a href="author.html#49959">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
