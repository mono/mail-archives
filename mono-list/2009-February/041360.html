<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Code optimizations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Code%20optimizations&In-Reply-To=gnmero%24n95%241%40ger.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041354.html">
   <LINK REL="Next"  HREF="041356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Code optimizations</H1>
    <B>Yoav HaCohen</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Code%20optimizations&In-Reply-To=gnmero%24n95%241%40ger.gmane.org"
       TITLE="[Mono-list] Code optimizations">yoavhacohen at gmail.com
       </A><BR>
    <I>Sat Feb 21 13:16:57 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="041354.html">[Mono-list] Code optimizations
</A></li>
        <LI>Next message: <A HREF="041356.html">[Mono-list] can't connect to Sybase SQL Anywhere 10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41360">[ date ]</a>
              <a href="thread.html#41360">[ thread ]</a>
              <a href="subject.html#41360">[ subject ]</a>
              <a href="author.html#41360">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>


Robert Jordan wrote:
&gt;<i> 
</I>&gt;<i> Yoav HaCohen wrote:
</I>&gt;&gt;<i> Here is my first idea:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Suppose we have the following code:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> [DllImport(NATIVE_LIBRARY, CallingConvention = CallingConvention.Cdecl)]
</I>&gt;&gt;<i>         private static extern void NativeFoo(int temp, out int cx, out
</I>&gt;&gt;<i> int
</I>&gt;&gt;<i> cy);
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> public System.Drawing.Point Foo()
</I>&gt;&gt;<i> {
</I>&gt;&gt;<i> 	int cx, cy;
</I>&gt;&gt;<i> 	NativeFoo(int a, out cx, out cy);
</I>&gt;&gt;<i> 	return new System.Drawing.Point(cx, cy);
</I>&gt;&gt;<i> |
</I>&gt;<i> 
</I>&gt;<i> I'm aware that you did not intend to start a discussion
</I>&gt;<i> about p/invoke, but I could not resist (1):
</I>&gt;<i> 
</I>&gt;<i> You don't want to p/invoke just to get one point out of
</I>&gt;<i> the unmanaged world. The managed/unmanaged transition
</I>&gt;<i> is too costly for this. Any optimization done by the JIT
</I>&gt;<i> after this call would be pointless.
</I>&gt;<i> 
</I>&gt;<i> When dealing with (arrays of) Point/Rectangle/Size (and other similar
</I>&gt;<i> well known structs), there is a (rather dirty) way to gain speed:
</I>&gt;<i> 
</I>&gt;<i> Define Point/Rectangle/Size as structs in the unmanaged
</I>&gt;<i> world and pass them by reference back and forth.
</I>&gt;<i> 
</I>&gt;<i> Robert
</I>&gt;<i> 
</I>&gt;<i> (1) that's why designers are using &quot;lorem ipsum&quot; paragraphs for
</I>&gt;<i> prototyping ;)
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">Mono-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

I know that it's costly to call unmanaged from managed code but there are a
good reason in this case for doing that.

Anyway, this is just an example, such cases can be also found in the managed
code.

My philosophy is that there is no &quot;pointless&quot; optimization if nothing is
required from the developer.

Yoav
-- 
View this message in context: <A HREF="http://www.nabble.com/Code-optimizations-tp22119164p22138683.html">http://www.nabble.com/Code-optimizations-tp22119164p22138683.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>




















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041354.html">[Mono-list] Code optimizations
</A></li>
	<LI>Next message: <A HREF="041356.html">[Mono-list] can't connect to Sybase SQL Anywhere 10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41360">[ date ]</a>
              <a href="thread.html#41360">[ thread ]</a>
              <a href="subject.html#41360">[ subject ]</a>
              <a href="author.html#41360">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
