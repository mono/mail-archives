<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Re moting Problem - Object reference not set to an instance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Re%20moting%20Problem%20-%20Object%20reference%20not%20set%20to%20an%0A%20instance&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043807.html">
   <LINK REL="Next"  HREF="043809.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Re moting Problem - Object reference not set to an instance</H1>
    <B>hematec</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Re%20moting%20Problem%20-%20Object%20reference%20not%20set%20to%20an%0A%20instance&In-Reply-To="
       TITLE="[Mono-list] Re moting Problem - Object reference not set to an instance">c.heurich at hematec.de
       </A><BR>
    <I>Tue Nov 10 03:21:00 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="043807.html">[Mono-list] Help with Error with difference between Opensuse 11.1 and Ubuntu 9.10
</A></li>
        <LI>Next message: <A HREF="043809.html">[Mono-list] Re moting Problem - Object reference not set to an	instance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43808">[ date ]</a>
              <a href="thread.html#43808">[ thread ]</a>
              <a href="subject.html#43808">[ subject ]</a>
              <a href="author.html#43808">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello,

i really urgent need some help!!
i'm trying to port a C# remotingproject over to mono.
The project uses a singleton SAO as a factory for the CAO (Client).

When i try to call a function (Client.AreUAlive()) at the Client i will get
a &quot;Object reference not set error&quot;.
The curios is that this is working without any problem in C# (VS 2005).

I'm using Ubuntu 9.10 and Mono JIT 2.4.2.3 x86 in a VirtualBox environment.

Is this a bug in mono or do i miss something???

Many thanks in advance.

Structure:

I'm using TCP-Channel and binary formatters.
The SAO and CAO are exposed not directly but through Interfaces
(IRemotedClientFactory &amp; IRemotedClientObject) defined in a shared DLL.
The Server holds the classes for the ClientFactory and the
RemotedClientObject (these are not shared to the client).
The client will get the clientobject by calling a function of the remoted
factory (this is because to avoid providing the clientobjects code to the
client-app).
The clientobject exposes the method and functions to the clients.


Source:

* Shared DLL *
***********
Public Interface IRemotedClientFactory
    Function Reachable() As Boolean
    Function GetClientObject(ByVal sDataSourceName As String, ByVal
sServerIP As String) As FactoryReturnObject
    Event NotifyEvent As FactoryNotificationEventHandler
End Interface

Public Interface IRemotedClientObject
    Function Execute(ByVal sCommand As String, ByVal oParams() As Object) As
Object
    Function AreUAlive() As Boolean
End Interface
...
&lt;Serializable()&gt; _
Public Class FactoryReturnObject
    Inherits MarshalByRefObject

    Public IsSuccess As Boolean = False
    Public ErrorID As Integer = -1
    Public ErrorMessage As String = &quot;&quot;
    Public ClientObject As IRemotedClientObject

    Public Sub New(ByVal oClientObject As IRemotedClientObject)
        IsSuccess = True
        ClientObject = oClientObject
    End Sub

    Public Sub New(ByVal iErrID As Integer, ByVal sErrMsg As String)
        IsSuccess = False
        ErrorID = iErrID
        ErrorMessage = sErrMsg
    End Sub
End Class


* Server *
********
public class RemotedClientFactory : MarshalByRefObject,
RemotePresenterDLL.IRemotedClientFactory
    {

        public RemotePresenterDLL.FactoryReturnObject GetClientObject(string
sClientID, string sServerIP)
        {
            // This is called by the client to get the clientobject
...
            // return object
            return new RemotePresenterDLL.FactoryReturnObject(new
RemotedClientObject(sClientIP, sClientID));
        }
...
    }


public class RemotedClientObject : MarshalByRefObject,
RemotePresenterDLL.IRemotedClientObject
    {
        public Boolean AreUAlive()
        {
            // This causes the error !!!
            return true;
        }
...
    }

* Client *
*******
// Vars
RemotePresenterDLL.IRemotedClientFactory  m_oFactory;
RemotePresenterDLL.IRemotedClientObject  m_oRemotedClient;
RemotePresenterDLL.FactoryReturnObject oFactRet;

private void Connect()
    {
...
    m_oFactory =
Activator.GetObject(typeof(RemotePresenterDLL.IRemotedClientFactory),
&quot;&lt;NameOfTCPChannel&gt;&quot;) as RemotePresenterDLL.IRemotedClientFactory;
    oFactRet = m_oFactory.GetClientObject(&lt;&gt;,&lt;&gt;);
    m_oRemotedClient = oFactRet.ClientObject;
    oFactRet.ClientObject = null; // Needs to be set under Win because of
GarbColl in Server!!

    // This call causes the error !!
    bTmp = m_oRemotedClient.AreUAlive();
   }
-- 
View this message in context: <A HREF="http://old.nabble.com/Remoting-Problem---Object-reference-not-set-to-an-instance-tp26253784p26253784.html">http://old.nabble.com/Remoting-Problem---Object-reference-not-set-to-an-instance-tp26253784p26253784.html</A>
Sent from the Mono - General mailing list archive at Nabble.com.

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043807.html">[Mono-list] Help with Error with difference between Opensuse 11.1 and Ubuntu 9.10
</A></li>
	<LI>Next message: <A HREF="043809.html">[Mono-list] Re moting Problem - Object reference not set to an	instance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43808">[ date ]</a>
              <a href="thread.html#43808">[ thread ]</a>
              <a href="subject.html#43808">[ subject ]</a>
              <a href="author.html#43808">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
