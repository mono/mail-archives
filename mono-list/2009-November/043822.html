<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] signing drivers under Linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20signing%20drivers%20under%20Linux&In-Reply-To=8bd0f97a0911101927od2d9f78we7acbe7b5b1495ec%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043819.html">
   <LINK REL="Next"  HREF="043825.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] signing drivers under Linux</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20signing%20drivers%20under%20Linux&In-Reply-To=8bd0f97a0911101927od2d9f78we7acbe7b5b1495ec%40mail.gmail.com"
       TITLE="[Mono-list] signing drivers under Linux">sebastien.pouliot at gmail.com
       </A><BR>
    <I>Wed Nov 11 08:27:45 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="043819.html">[Mono-list] signing drivers under Linux
</A></li>
        <LI>Next message: <A HREF="043825.html">[Mono-list] signing drivers under Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43822">[ date ]</a>
              <a href="thread.html#43822">[ thread ]</a>
              <a href="subject.html#43822">[ subject ]</a>
              <a href="author.html#43822">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2009-11-10 at 22:27 -0500, Mike Frysinger wrote:
&gt;<i> i have an open source package that can be entirely cross-compiled and
</I>&gt;<i> packaged up for Windows, all from under Linux.  i'm trying to now
</I>&gt;<i> integrate some drivers and the last step is the code signing.  this
</I>&gt;<i> isnt strictly mono related, but some of the aspects are integrated
</I>&gt;<i> into mono, so here i am.
</I>&gt;<i> 
</I>&gt;<i> this process can be broken down into two steps:
</I>&gt;<i>  - inf2cat: create .cat file from .inf and executable files
</I>&gt;<i>  - signtool: sign the .cat and executable files (authenticode)
</I>&gt;<i> 
</I>&gt;<i> while the signtool step was easy to convert via the signcode tool (and
</I>&gt;<i> working around ASN limitations and verisign #316337), the inf2cat step
</I>&gt;<i> isnt falling into place.  the WDK version is a .NET program, so i
</I>&gt;<i> figured it'd be easy to run through mono.
</I>&gt;<i> 
</I>&gt;<i> after manually forcing all paths to lowercase, i ended up with:
</I>&gt;<i> $ mono inf2cat.exe /driver:drivers/ /os:XP_X86,XP_X64
</I>&gt;<i> ...............................................................
</I>&gt;<i> Signability test complete.
</I>&gt;<i> 
</I>&gt;<i> Errors:
</I>&gt;<i> None
</I>&gt;<i> 
</I>&gt;<i> Warnings:
</I>&gt;<i> None
</I>&gt;<i> 
</I>&gt;<i> wintrust.dll
</I>&gt;<i> Signability test failed.
</I>&gt;<i> 
</I>&gt;<i> stracing this shows that the host library paths are searched like so:
</I>&gt;<i> ./
</I>&gt;<i> /lib/
</I>&gt;<i> /usr/lib/
</I>&gt;<i> and it looks for {lib,}wintrust.{dll,so,la} ... maybe it's using
</I>&gt;<i> libltdl ?  at any rate, even after getting this file from a Windows
</I>&gt;<i> system and sticking it into /usr/lib64/ temporarily, it still fails
</I>&gt;<i> the same way (the strace output shows that it found &amp; opened the dll
</I>&gt;<i> in question).  i'm not sure getting this tool to work isnt going to
</I>&gt;<i> happen ...
</I>
Likely not. It's a .NET application but it pinvokes into wintrust.dll
where most of authenticode resides on Windows. You can use MoMA to
detect such things (and other stuff that will affect Mono
compatibility).

&gt;<i> has anyone else tried to do this kind of thing ?  perhaps there is
</I>&gt;<i> some util out there to create a .cat file easily ... but googling for
</I>&gt;<i> things like &quot;cat&quot; or &quot;inf&quot; or &quot;mono&quot; doesnt really yield anything
</I>&gt;<i> useful.
</I>
Both tools were not required for mono - so I never made managed
alternatives to them. I'm not aware of any either but if you find some
please email the list with them (it could prove useful to others too)

Sebastien

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043819.html">[Mono-list] signing drivers under Linux
</A></li>
	<LI>Next message: <A HREF="043825.html">[Mono-list] signing drivers under Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43822">[ date ]</a>
              <a href="thread.html#43822">[ thread ]</a>
              <a href="subject.html#43822">[ subject ]</a>
              <a href="author.html#43822">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
