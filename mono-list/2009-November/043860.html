<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] Weird issue with Process.Start (works with MS .NET)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Weird%20issue%20with%20Process.Start%20%28works%20with%20MS%20.NET%29&In-Reply-To=hdgj9m%24eve%241%40ger.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043839.html">
   <LINK REL="Next"  HREF="043864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] Weird issue with Process.Start (works with MS .NET)</H1>
    <B>Gonzalo Paniagua Javier</B> 
    <A HREF="mailto:mono-list%40lists.ximian.com?Subject=%5BMono-list%5D%20Weird%20issue%20with%20Process.Start%20%28works%20with%20MS%20.NET%29&In-Reply-To=hdgj9m%24eve%241%40ger.gmane.org"
       TITLE="[Mono-list] Weird issue with Process.Start (works with MS .NET)">gonzalo.mono at gmail.com
       </A><BR>
    <I>Mon Nov 16 17:16:22 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="043839.html">[Mono-list] Weird issue with Process.Start (works with MS .NET)
</A></li>
        <LI>Next message: <A HREF="043864.html">[Mono-list] Weird issue with Process.Start (works with MS .NET)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43860">[ date ]</a>
              <a href="thread.html#43860">[ thread ]</a>
              <a href="subject.html#43860">[ subject ]</a>
              <a href="author.html#43860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2009-11-12 at 10:08 +0100, Anteru wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> got a very weird problem with Process.Start here, and I don't know where
</I>&gt;<i> to start debugging (first issues actually I ever had with Mono.) Problem
</I>&gt;<i> appears like this, I set up a ProcessStartInfo, register the
</I>&gt;<i> OutputDataReceived handler, and then I start the process using Start(),
</I>&gt;<i> but unfortunately, Start() never returns and the app just hangs. Code
</I>&gt;<i> looks like this:
</I>&gt;<i> 
</I>&gt;<i>             p.Start();
</I>&gt;<i> 		// Never comes here ...
</I>&gt;<i>             p.BeginOutputReadLine();
</I>&gt;<i> 
</I>&gt;<i> I tried it in an isolated test case, but no luck. Using the .NET Runtime
</I>&gt;<i> on Windows it works flawlessly, while it hangs _every time_ using Mono.
</I>&gt;<i> (Source code:
</I>&gt;<i> <A HREF="http://gitorious.org/network/network/blobs/master/NetWork/Task/RunBinaryTask.cs">http://gitorious.org/network/network/blobs/master/NetWork/Task/RunBinaryTask.cs</A>)
</I>&gt;<i> 
</I>&gt;<i> Might be related to the network stuff going on, or maybe because it's in
</I>&gt;<i>  a ThreadPool :/ I tried to reproduce it in a smaller test case by
</I>&gt;<i> starting a thread and trying to read (works), I also tried to run in a
</I>&gt;<i> thread pool (works also), so there must be something in the app which
</I>&gt;<i> breaks it, but I have no idea where to start debugging.
</I>&gt;<i> 
</I>&gt;<i> I checked access rights, these are fine, and running the executable
</I>&gt;<i> manually also works fine.
</I>
There's nothing in your code that could cause that problem. There's one
thing wrong though. If you redirect the standard error, you should call
BeginErrorReadLine() too or the process will block when the pipe is
filled.

-Gonzalo


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043839.html">[Mono-list] Weird issue with Process.Start (works with MS .NET)
</A></li>
	<LI>Next message: <A HREF="043864.html">[Mono-list] Weird issue with Process.Start (works with MS .NET)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43860">[ date ]</a>
              <a href="thread.html#43860">[ thread ]</a>
              <a href="subject.html#43860">[ subject ]</a>
              <a href="author.html#43860">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-list">More information about the Mono-list
mailing list</a><br>
</body></html>
