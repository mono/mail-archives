<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] MySql Data Types.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:danmorg%40sc.rr.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="009733.html">
   <LINK REL="Next"  HREF="009739.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] MySql Data Types.
   </H1>
    <B>Daniel Morgan
    </B> 
    <A HREF="mailto:danmorg%40sc.rr.com"
       TITLE="[Mono-list] MySql Data Types.">danmorg@sc.rr.com
       </A><BR>
    <I>Mon, 18 Nov 2002 07:11:32 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="009733.html">[Mono-list] MySql Data Types.
</A></li>
        <LI> Next message: <A HREF="009739.html">[Mono-list] SQL# For GTK# Screenshot using a GTK# TreeView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9736">[ date ]</a>
              <a href="thread.html#9736">[ thread ]</a>
              <a href="subject.html#9736">[ subject ]</a>
              <a href="author.html#9736">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ben,

What version of MySQL server and what version of MySQL client are you using?

The MySQL provider is based on Production version 3.23.
Currently, the provider does not support Development version 4.

In theory, it should be upwards compatible to version 4.

Eventually, we would want the provider to support 3.23, 4.x, and future
versions...

If what you provided is for MySQL version 4.x, are those MySqlEnumFieldTypes
enumerations backwards compatible with version 3.23?

If they are not, then we will have to create a separate MySQL type
conversion function for each particular version.  The provider already gets
the version of the database in the MySqlConnection class as property
ServerVersion, so you could use this to determine which conversion function
to use.

I made a mistake on the MySQL timestamp; it should be mapped to a DateTime
instead of a String.

Just like SqlClient for Microsoft SQL Server has database-specific type
classes at System.Data.SqlTypes which allows a DBNull for Int32 via
SqlInt32, a DBNull for String via SqlString, a DBNull for DateTime via
SqlDateTime, etc...   Maybe we should create MySqlTypes classes too.

Daniel

-----Original Message-----
From: <A HREF="mailto:mono-list-admin@ximian.com">mono-list-admin@ximian.com</A> [mailto:<A HREF="mailto:mono-list-admin@ximian.com">mono-list-admin@ximian.com</A>]On
Behalf Of Ben Clewett
Sent: Monday, November 18, 2002 5:14 AM
To: <A HREF="mailto:tim@timcoleman.com">tim@timcoleman.com</A>; <A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>
Subject: [Mono-list] MySql Data Types.


Thanks.  I have found the correct conversions in the existing code, below.

As the MySql code does not use the SqlDbType, neither shall I.  This
appears to be a too small subset of values for MySql.

If I then use this, the MySqlParameter is always going to work?

--------------

Correct DataType Conversion for use of MySql, from MySqlHelper.
(Systerm.Data.DbType equal or larger than MySql Types)

MySqlEnumFieldTypes	System.Data.DbType

FIELD_TYPE_DECIMAL	Decimal
FIELD_TYPE_TINY		Int16
FIELD_TYPE_SHORT	Int16
FIELD_TYPE_SHORT U	UInt16
FIELD_TYPE_LONG		Int64
FIELD_TYPE_LONG U	UInt64
FIELD_TYPE_FLOAT	Single
FIELD_TYPE_DOUBLE	Double
FIELD_TYPE_NULL		String
FIELD_TYPE_TIMESTAMP	String
FIELD_TYPE_LONGLONG	Int64
FIELD_TYPE_LONGLONG U	UInt64
FIELD_TYPE_INT24	Int64
FIELD_TYPE_INT24 U	UInt64
FIELD_TYPE_DATE		Date
FIELD_TYPE_TIME		Time
FIELD_TYPE_DATETIME	DateTime
FIELD_TYPE_YEAR		Int16
FIELD_TYPE_NEWDATE	Date
FIELD_TYPE_ENUM		Int32
FIELD_TYPE_SET		String
FIELD_TYPE_TINY_BLOB	Binary
FIELD_TYPE_MEDIUM_BLOB	Binary
FIELD_TYPE_LONG_BLOB	Binary
FIELD_TYPE_BLOB		Binary
FIELD_TYPE_VAR_STRING	String
FIELD_TYPE_STRING	String

<A HREF="mailto:tim@timcoleman.com">tim@timcoleman.com</A> wrote:

&gt;<i> Understand below that I only refer to SQL Server.  I don't know the
</I>&gt;<i> MySQL Mono.Data provider.
</I>&gt;<i>
</I>&gt;<i> &gt;I am running into a problem with the Data Types.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;The MySqlParameterCollection used the data types 'DbType'.
</I>&gt;<i> &gt;In MySqlTypes there are the types MySqlEnumFieldTypes.
</I>&gt;<i> &gt;There is also the SqlDbType in System.Data, as included in your email
</I>&gt;<i> &gt;yesterday.
</I>&gt;<i>
</I>&gt;<i> Ah, yes.  There are several different type enumerations.  If you
</I>&gt;<i> read the .NET Framework documentation closely, you may get an
</I>&gt;<i> understanding as to the difference between SqlDbType and DbType
</I>&gt;<i> in System.Data.
</I>&gt;<i>
</I>&gt;<i> SqlDbType is a set of data types used by SQL Server.  In fact,
</I>&gt;<i> most of these types are supported by SQL Server 7, with the exception
</I>&gt;<i> of SqlDbType.BigInt and SqlDbType.Variant, which are SQL Server 2000
</I>&gt;<i> types.
</I>&gt;<i>
</I>&gt;<i> But, then, what is DbType?  The way I see it, DbType is a more general
</I>&gt;<i> set of data types.  Most of these types will work with SQL Server,
</I>&gt;<i> but then, some of them won't.  For instance, DbType.UInt32 will not
</I>&gt;<i> work.  Go ahead and try to create a SqlParameter with this DbType.
</I>&gt;<i> You'll get an ArgumentException when you do.
</I>&gt;<i>
</I>&gt;<i> So, DbType is more abstract, and SqlDbType is specific to SQL Server.
</I>&gt;<i> Magically, with a SqlParameter, if you set the SqlDbType, it will
</I>&gt;<i> also set the corresponding DbType in the parameter and vice versa
</I>&gt;<i> (and, if you provide neither, both will be inferred from the type
</I>&gt;<i> of its value...I'm working on this at the moment).
</I>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="009733.html">[Mono-list] MySql Data Types.
</A></li>
	<LI> Next message: <A HREF="009739.html">[Mono-list] SQL# For GTK# Screenshot using a GTK# TreeView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9736">[ date ]</a>
              <a href="thread.html#9736">[ thread ]</a>
              <a href="subject.html#9736">[ subject ]</a>
              <a href="author.html#9736">[ author ]</a>
         </LI>
       </UL>
</body></html>
