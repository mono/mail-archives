<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] MySql Data Types.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:venu%40myvenu.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="009757.html">
   <LINK REL="Next"  HREF="009744.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] MySql Data Types.
   </H1>
    <B>Venu
    </B> 
    <A HREF="mailto:venu%40myvenu.com"
       TITLE="[Mono-list] MySql Data Types.">venu@myvenu.com
       </A><BR>
    <I>Mon, 18 Nov 2002 19:49:44 -0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="009757.html">[Mono-list] MySql Data Types.
</A></li>
        <LI> Next message: <A HREF="009744.html">[Mono-list] Editor and Designer Attribute, ISoapXsd Interface.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9758">[ date ]</a>
              <a href="thread.html#9758">[ thread ]</a>
              <a href="subject.html#9758">[ subject ]</a>
              <a href="author.html#9758">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2002-11-18 at 15:02, Daniel Morgan wrote:
&gt;<i> Ben,
</I>&gt;<i> 
</I>&gt;<i> Maybe someone from MySQL AB can tell us the correct mapping of data types.
</I>&gt;<i> What is found in the MySQL client mysql_comm.h file, what is written in
</I>&gt;<i> their docs,
</I>&gt;<i> and how to map that to a .NET data type properly.  Because what is written
</I>&gt;<i> in their docs is what people will typically use to create a table.
</I>&gt;<i> 
</I>&gt;<i> I've even considered &quot;peeking&quot; at other MySQL provider implementations
</I>&gt;<i> (Java, C, C++, or C#) to see how they do it.  The only problem is these
</I>&gt;<i> other implementations are either LGPL or GPL while the MySQL provider in
</I>&gt;<i> Mono is X11/MIT.
</I>&gt;<i> 
</I>&gt;<i> I'm not sure exactly how the types are to be mapped.  I made a guess when I
</I>&gt;<i> was creating the provider.
</I>&gt;<i> 
</I>&gt;<i> Here is my latest assumptions:
</I>&gt;<i> 
</I>&gt;<i> MySQL Type listed in  MySQL enum          DbType      MySqlType .NET Type
</I>&gt;<i> doc to be used in     enum_field_type     enum        .NET Type  in Mono
</I>&gt;<i> creating a table      in MySQL C API      in Mono     in Mono
</I>&gt;<i> Notes
</I>&gt;<i> ====================  ===============     =========== ========= =========
</I>&gt;<i> ==============
</I>&gt;<i> tinyint               FIELD_TYPE_TINY     Byte        TinyInt   Byte      1
</I>&gt;<i> byte
</I>&gt;<i> smallint              FIELD_TYPE_SHORT    Int16       SmallInt  Int16     2
</I>&gt;<i> bytes
</I>&gt;<i> mediumint             FIELD_TYPE_INT24    Int32       MediumInt Int32     3
</I>&gt;<i> bytes
</I>&gt;<i> int, integer          FIELD_TYPE_LONG     Int32       Int       Int32     4
</I>&gt;<i> bytes
</I>&gt;<i> bigint                FIELD_TYPE_LONGLONG Int64       BigInt    Int64     8
</I>&gt;<i> bytes
</I>

Looks they are all fine ..

&gt;<i> ...
</I>&gt;<i> 
</I>&gt;<i> AFAIK, FIELD_TYPE_LONG maps to 4 bytes, not 8 bytes.
</I>&gt;<i> 
</I>&gt;<i> &gt;From the MySQL docs:
</I>&gt;<i> 
</I>&gt;<i> Column type  Storage required
</I>&gt;<i> -----------  ----------------
</I>&gt;<i> TINYINT  1 byte
</I>&gt;<i> SMALLINT  2 bytes
</I>&gt;<i> MEDIUMINT  3 bytes
</I>&gt;<i> INT  4 bytes
</I>&gt;<i> INTEGER  4 bytes
</I>&gt;<i> BIGINT  8 bytes
</I>&gt;<i> FLOAT(X)  4 if X &lt;= 24 or 8 if 25 &lt;= X &lt;= 53
</I>&gt;<i> FLOAT  4 bytes
</I>&gt;<i> DOUBLE  8 bytes
</I>&gt;<i> DOUBLE PRECISION  8 bytes
</I>&gt;<i> REAL  8 bytes
</I>&gt;<i> DECIMAL(M,D)  M+2 bytes if D &gt; 0, M+1 bytes if D = 0 (D+2, if M &lt; D)
</I>&gt;<i> NUMERIC(M,D)  M+2 bytes if D &gt; 0, M+1 bytes if D = 0 (D+2, if
</I>&gt;<i> 
</I>&gt;<i> DATE  3 bytes
</I>&gt;<i> DATETIME  8 bytes
</I>&gt;<i> TIMESTAMP  4 bytes
</I>&gt;<i> TIME  3 bytes
</I>&gt;<i> YEAR  1 byte
</I>&gt;<i> 
</I>&gt;<i> CHAR(M)  M bytes, 1 &lt;= M &lt;= 255
</I>&gt;<i> VARCHAR(M)  L+1 bytes, where L &lt;= M and 1 &lt;= M &lt;= 255
</I>&gt;<i> TINYBLOB, TINYTEXT  L+1 bytes, where L &lt; 2^8
</I>&gt;<i> BLOB, TEXT  L+2 bytes, where L &lt; 2^16
</I>&gt;<i> MEDIUMBLOB, MEDIUMTEXT  L+3 bytes, where L &lt; 2^24
</I>&gt;<i> LONGBLOB, LONGTEXT  L+4 bytes, where L &lt; 2^32
</I>&gt;<i> ENUM('value1','value2',...)  1 or 2 bytes, depending on the number of
</I>&gt;<i> enumeration values (65535 values maximum)
</I>&gt;<i> SET('value1','value2',...)  1, 2, 3, 4 or 8 bytes, depending on the number
</I>&gt;<i> of set members (64 members maximum)
</I>&gt;<i> 
</I>&gt;<i> The MySQL types used in the MySqlTest were based on the MySQL documentation.
</I>&gt;<i> 
</I>&gt;<i> System.String is a series of unicode characters (System.Char), not bytes.
</I>&gt;<i> For the Binary Large Objects (BLOBs) types, it could be mapped to an array
</I>&gt;<i> of System.Byte.
</I>&gt;<i> For the Character Large Objects (CLOBs) types, it could be mapped to an
</I>&gt;<i> array of System.Char, or it could be mapped to System.String.
</I>&gt;<i> There are various classes in System.Text that can be used for encoding.
</I>&gt;<i> 
</I>&gt;<i> This is what is in the mysql_comm.h file:
</I>&gt;<i> enum enum_field_types { FIELD_TYPE_DECIMAL, FIELD_TYPE_TINY,
</I>&gt;<i> 			FIELD_TYPE_SHORT,  FIELD_TYPE_LONG,
</I>&gt;<i> 			FIELD_TYPE_FLOAT,  FIELD_TYPE_DOUBLE,
</I>&gt;<i> 			FIELD_TYPE_NULL,   FIELD_TYPE_TIMESTAMP,
</I>&gt;<i> 			FIELD_TYPE_LONGLONG,FIELD_TYPE_INT24,
</I>&gt;<i> 			FIELD_TYPE_DATE,   FIELD_TYPE_TIME,
</I>&gt;<i> 			FIELD_TYPE_DATETIME, FIELD_TYPE_YEAR,
</I>&gt;<i> 			FIELD_TYPE_NEWDATE,
</I>&gt;<i> 			FIELD_TYPE_ENUM=247,
</I>&gt;<i> 			FIELD_TYPE_SET=248,
</I>&gt;<i> 			FIELD_TYPE_TINY_BLOB=249,
</I>&gt;<i> 			FIELD_TYPE_MEDIUM_BLOB=250,
</I>&gt;<i> 			FIELD_TYPE_LONG_BLOB=251,
</I>&gt;<i> 			FIELD_TYPE_BLOB=252,
</I>&gt;<i> 			FIELD_TYPE_VAR_STRING=253,
</I>&gt;<i> 			FIELD_TYPE_STRING=254
</I>&gt;<i> };
</I>&gt;<i> 
</I>&gt;<i> #define FIELD_TYPE_CHAR FIELD_TYPE_TINY		/* For compability */
</I>&gt;<i> #define FIELD_TYPE_INTERVAL FIELD_TYPE_ENUM	/* For compability *
</I>

All above looks perfect to me. If you have any questions let me know ..

Thanks

&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="mailto:mono-list-admin@ximian.com">mono-list-admin@ximian.com</A> [mailto:<A HREF="mailto:mono-list-admin@ximian.com">mono-list-admin@ximian.com</A>]On
</I>&gt;<i> Behalf Of Ben Clewett
</I>&gt;<i> Sent: Monday, November 18, 2002 10:21 AM
</I>&gt;<i> To: Daniel Morgan
</I>&gt;<i> Cc: Mono-List; Venu
</I>&gt;<i> Subject: Re: [Mono-list] MySql Data Types.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Daniel,
</I>&gt;<i> 
</I>&gt;<i> The plot thickens.  In the MySqlTest, the following var types are used,
</I>&gt;<i> which do not appear in MySqlEnumFieldTypes:
</I>&gt;<i> 
</I>&gt;<i> MySQL Var	.NET Var
</I>&gt;<i> =========	========
</I>&gt;<i> smallint	Int16
</I>&gt;<i> mediumint	Int64
</I>&gt;<i> int		Int32
</I>&gt;<i> integer		Int32
</I>&gt;<i> bigint		Int64
</I>&gt;<i> real		Double
</I>&gt;<i> numeric		Decimal
</I>&gt;<i> char		String
</I>&gt;<i> tinytext	String
</I>&gt;<i> text		String
</I>&gt;<i> mediumtext	String
</I>&gt;<i> longtext	String
</I>&gt;<i> 
</I>&gt;<i> And the folling appear in MySqlEnumFieldTypes, but are not used in the
</I>&gt;<i> MySqlTest:
</I>&gt;<i> 
</I>&gt;<i> MySQL Var		DbType Conversion
</I>&gt;<i> =========		================
</I>&gt;<i> FIELD_TYPE_SHORT	Int16
</I>&gt;<i> FIELD_TYPE_LONG		Int64
</I>&gt;<i> FIELD_TYPE_LONGLONG	Int64
</I>&gt;<i> FIELD_TYPE_INT24	Int64
</I>&gt;<i> FIELD_TYPE_DATETIME	DateTime
</I>&gt;<i> FIELD_TYPE_YEAR		Int16
</I>&gt;<i> FIELD_TYPE_NEWDATE	Date
</I>&gt;<i> 
</I>&gt;<i> Although some of these are probably a re-naming of the first, it's
</I>&gt;<i> confusing, especially considering the number of different integers.  For
</I>&gt;<i> instance 'mediumint' is Int64.  Should this map to LONG, or LONGLONG...
</I>&gt;<i> 
</I>&gt;<i> Also I note that FIELD_TYPE_ENUM is an Int32 in the Mono code, yet the
</I>&gt;<i> underlying data type MySQL interfaces is a String.  This I would guess
</I>&gt;<i> is that FIELD_TYPE_ENUM should be created as a mirror Enumerated list as
</I>&gt;<i> used internally with MySQL.  Although I can forsee terrible bugs when
</I>&gt;<i> the Enumerated String list is edited in SQL and not the code, and
</I>&gt;<i> visa-versa.
</I>&gt;<i> 
</I>&gt;<i> The 'blob' type is also slightly worrying, as this uses String.  But
</I>&gt;<i> since this is I belive supposed to be 8-bit clean binary, then using
</I>&gt;<i> 16-bit unclean Unicode might cause problems, eg, the '\0' value.  But I
</I>&gt;<i> might be missunderstanding the System.String data type.
</I>&gt;<i> 
</I>&gt;<i> There is definitelly some fun to be had here...
</I>-- 
Regards, Venu
For technical support contracts, go to <A HREF="https://order.mysql.com">https://order.mysql.com</A>
   __  ___     ___ ____  __
  /  |/  /_ __/ __/ __ \/ /   Mr. Venu &lt;<A HREF="mailto:venu@mysql.com">venu@mysql.com</A>&gt;
 / /|_/ / // /\ \/ /_/ / /__  MySQL AB, Developer
/_/  /_/\_, /___/\___\_\___/  California, USA
       &lt;___/  www.mysql.com
 




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="009757.html">[Mono-list] MySql Data Types.
</A></li>
	<LI> Next message: <A HREF="009744.html">[Mono-list] Editor and Designer Attribute, ISoapXsd Interface.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9758">[ date ]</a>
              <a href="thread.html#9758">[ thread ]</a>
              <a href="subject.html#9758">[ subject ]</a>
              <a href="author.html#9758">[ author ]</a>
         </LI>
       </UL>
</body></html>
