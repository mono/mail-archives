<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] SqlClient update
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tim%40timcoleman.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="009564.html">
   <LINK REL="Next"  HREF="009551.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] SqlClient update
   </H1>
    <B>Tim Coleman
    </B> 
    <A HREF="mailto:tim%40timcoleman.com"
       TITLE="[Mono-list] SqlClient update">tim@timcoleman.com
       </A><BR>
    <I>Fri, 8 Nov 2002 15:29:12 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="009564.html">[Mono-list] Status update on SqlClient
</A></li>
        <LI> Next message: <A HREF="009551.html">[Mono-list] C# changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9552">[ date ]</a>
              <a href="thread.html#9552">[ thread ]</a>
              <a href="subject.html#9552">[ subject ]</a>
              <a href="author.html#9552">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Update on System.Data.SqlClient.

Many updates have happened in the last week, including
System.Data.SqlClient
and System.Data.SqlTypes.  Ville Palo has done a lot of work with the
SqlTypes, which will be used to provide native datatypes through the
SqlClient.

I can't believe how many changes have been done in the last week to
this namespace under heavy development.  Some of the highlights:
        * SqlCommand is almost done
        * Added the ability to get key information from database
        * Lots of work on the SqlCommandBuilder
        * The SqlDataAdapter is now working, more or less.  If you
          don't know what this is, and you're interested in ADO.NET,
          you should really check it out.  It is very cool.
        * Many, many bugfixes and changes to bring the interface
          in-line with .NET

Things to do:
        * Testing, testing, testing.  A question is, how do we implement
          test suites when we don't know if there is even a database
          available?  Any ideas?
        * SqlDataAdapter work will be proceeding more soon.  This is my
          area of interest at the moment.
        * Some of the classes in System.Data need to be more fully
          implemented.
        * Much, much more!

I'll leave you with a (slightly lengthy) code example.  It demonstrates
using the SqlDataAdapter to update a row in the database.  It touches
on a number of classes, so it's a pretty good example of how far we
have come.  If you have a SQL Server database, you can run it today!

--8&lt;----------------------------------------------------------

string connectionString = &quot;... Your Connection String ...&quot;;
SqlConnection connection = new SqlConnection (connectionString);
connection.Open ();

SqlCommand command = connection.CreateCommand ();

// Create a new table for testing
command.Transaction = connection.BeginTransaction ();
command.CommandText = &quot;CREATE TABLE monotest (column1 INT); INSERT INTO
monotest VALUES (31337)&quot;;
command.ExecuteNonQuery ();
command.Transaction.Commit ();

command.CommandText = &quot;SELECT * FROM monotest&quot;;
SqlDataAdapter adapter = new SqlDataAdapter (command);
SqlCommandBuilder builder = new SqlCommandBuilder (adapter);
DataTable dataTable = new DataTable (&quot;monotest&quot;);

adapter.Fill (dataTable);

// Should output &quot;31337&quot;
foreach (DataRow dataRow in dataTable.Rows) {
        Console.WriteLine (dataRow[0]);
}

// Change row 1, column 1 to &quot;123&quot;.
dataTable.Rows[0][0] = 123;

// Commit changes back to database
int updateCount = adapter.Update (dataTable);

// Should be 1
Console.WriteLine (&quot;{0} row(s) affected by update.&quot;, updateCount);

SqlDataReader reader = command.ExecuteReader ();
if (!reader.Read ())
        throw new Exception (&quot;Could not read.&quot;);

// Should output &quot;123&quot;
Console.WriteLine (reader.GetInt32 (0));
reader.Close ();

// Clean up the test table
command.Transaction = connection.BeginTransaction ();
command.CommandText = &quot;DROP TABLE monotest&quot;;
command.ExecuteNonQuery ();
command.Transaction.Commit ();

--8&lt;----------------------------------------------------------

Compile as 
mcs -r System.Data test.cs

Output:
31337
1 row(s) affected by update.
123

Cheers,

-- 
Tim Coleman &lt;<A HREF="mailto:tim@timcoleman.com">tim@timcoleman.com</A>&gt;                       [43.43 N 80.45 W]
BMath, Honours Combinatorics and Optimization, University of Waterloo
Software Developer, Global Services, Open Text Corporation
&quot;Under capitalism, man exploits man.  Under communism, it's just the
 opposite.&quot; -- J.K. Galbraith


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="009564.html">[Mono-list] Status update on SqlClient
</A></li>
	<LI> Next message: <A HREF="009551.html">[Mono-list] C# changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9552">[ date ]</a>
              <a href="thread.html#9552">[ thread ]</a>
              <a href="subject.html#9552">[ subject ]</a>
              <a href="author.html#9552">[ author ]</a>
         </LI>
       </UL>
</body></html>
