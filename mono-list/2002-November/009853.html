<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-list] GTK# Patch for TreeStore, ListStore, and TextIter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:kris%40gtk.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="009843.html">
   <LINK REL="Next"  HREF="009855.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-list] GTK# Patch for TreeStore, ListStore, and TextIter
   </H1>
    <B>Kristian Rietveld
    </B> 
    <A HREF="mailto:kris%40gtk.org"
       TITLE="[Mono-list] GTK# Patch for TreeStore, ListStore, and TextIter">kris@gtk.org
       </A><BR>
    <I>21 Nov 2002 19:18:36 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="009843.html">[Mono-list] GTK# Patch for TreeStore, ListStore, and TextIter
</A></li>
        <LI> Next message: <A HREF="009855.html">[Mono-list] GTK# Patch for TreeStore, ListStore, and TextIter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9853">[ date ]</a>
              <a href="thread.html#9853">[ thread ]</a>
              <a href="subject.html#9853">[ subject ]</a>
              <a href="author.html#9853">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2002-11-21 at 04:12, Daniel Morgan wrote:
&gt;<i> SetColumnTypes should be an array like the GTK+ 2.0 API says:
</I>
Oh blah I see now. Dunno why I was comparing this function with the
constructors .... I guess I was already sleeping...


apologies,


	Kris

&gt;<i> 
</I>&gt;<i> gtk_list_store_set_column_types ()
</I>&gt;<i> void        gtk_list_store_set_column_types (GtkListStore *list_store,
</I>&gt;<i>                                              gint n_columns,
</I>&gt;<i>                                              GType *types);
</I>&gt;<i> 
</I>&gt;<i> This function is meant primarily for GObjects that inherit from
</I>&gt;<i> GtkListStore, and should only be used when constructing a new GtkListStore.
</I>&gt;<i> It will not function after a row has been added, or a method on the
</I>&gt;<i> GtkTreeModel interface is called.
</I>&gt;<i> 
</I>&gt;<i> list_store : A GtkListStore
</I>&gt;<i> n_columns : Number of columns for the list store
</I>&gt;<i> types : An array length n of GTypes
</I>&gt;<i> 
</I>&gt;<i> It does not mention var_args.
</I>&gt;<i> 
</I>&gt;<i> This is what I am trying to create with the Gtk.Metadata for
</I>&gt;<i> ListStore.SetColumnTypes:
</I>&gt;<i> 
</I>&gt;<i> 		[DllImport (&quot;libgtk-win32-2.0-0.dll&quot;)]
</I>&gt;<i> 		static extern void gtk_list_store_set_column_types (IntPtr raw,
</I>&gt;<i> 						int n_columns, int[] types);
</I>&gt;<i> 
</I>&gt;<i> 		public void SetColumnTypes(int[] types) {
</I>&gt;<i> 			gtk_list_store_set_column_types (Handle, n_columns, types);
</I>&gt;<i> 		}
</I>&gt;<i> 
</I>&gt;<i> This works for me in the DataGrid in SQL# For GTK#.
</I>&gt;<i> 
</I>&gt;<i> The var_args you are talking about are params in C#.
</I>&gt;<i> 
</I>&gt;<i> Moreover, I think it is correct for SetColumnTypes to use an array.
</I>&gt;<i> 
</I>&gt;<i> Mike Kestner said he would test this for me, all I had to do was supply a
</I>&gt;<i> patch for him.
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="mailto:mono-list-admin@ximian.com">mono-list-admin@ximian.com</A> [mailto:<A HREF="mailto:mono-list-admin@ximian.com">mono-list-admin@ximian.com</A>]On
</I>&gt;<i> Behalf Of Kristian Rietveld
</I>&gt;<i> Sent: Wednesday, November 20, 2002 7:13 PM
</I>&gt;<i> To: Daniel Morgan
</I>&gt;<i> Cc: Mike Kestner; Mono-List
</I>&gt;<i> Subject: Re: [Mono-list] GTK# Patch for TreeStore, ListStore, and
</I>&gt;<i> TextIter
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Wed, 2002-11-20 at 20:56, Daniel Morgan wrote:
</I>&gt;<i> &gt; Hey Mike,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have a patch for gtk-sharp/sources/Gtk.metadata.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The patch has 3 fixes:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 1. for TreeStore method SetColumnTypes, make the int types parameter an
</I>&gt;<i> &gt; array.
</I>&gt;<i> &gt; 2. for ListStore method SetColumnTypes, make the int types parameter an
</I>&gt;<i> &gt; array.
</I>&gt;<i> &gt; 3. for TextIter method ForwardSearch, make the TextIter parameters
</I>&gt;<i> &gt; match_start and
</I>&gt;<i> &gt;    match_end to be out.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; For 3., I'm sure there are other &quot;search&quot; methods that need fixing, but I
</I>&gt;<i> &gt; want to see how this fix works first.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Are these okay?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt; Daniel
</I>&gt;<i> &gt; ----
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> Miguel asked me to review your patch. My comments are below
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; Index: Gtk.metadata
</I>&gt;<i> &gt; ===================================================================
</I>&gt;<i> &gt; RCS file: /cvs/public/gtk-sharp/sources/Gtk.metadata,v
</I>&gt;<i> &gt; retrieving revision 1.26
</I>&gt;<i> &gt; diff -u -r1.26 Gtk.metadata
</I>&gt;<i> &gt; --- Gtk.metadata	10 Nov 2002 10:03:51 -0000	1.26
</I>&gt;<i> &gt; +++ Gtk.metadata	20 Nov 2002 19:35:53 -0000
</I>&gt;<i> &gt; @@ -30,6 +30,25 @@
</I>&gt;<i> &gt;      &lt;/attribute&gt;
</I>&gt;<i> &gt;    &lt;/data&gt;
</I>&gt;<i> &gt;  &lt;/rule&gt;
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +&lt;rule&gt;
</I>&gt;<i> &gt; +  &lt;class name=&quot;GtkTextIter&quot;&gt;
</I>&gt;<i> &gt; +    &lt;method&gt;ForwardSearch&lt;/method&gt;
</I>&gt;<i> &gt; +  &lt;/class&gt;
</I>&gt;<i> &gt; +  &lt;data&gt;
</I>&gt;<i> &gt; +    &lt;attribute target=&quot;param&quot;&gt;
</I>&gt;<i> &gt; +      &lt;filter level=&quot;name&quot;&gt;match_start&lt;/filter&gt;
</I>&gt;<i> &gt; +      &lt;name&gt;pass_as&lt;/name&gt;
</I>&gt;<i> &gt; +      &lt;value&gt;out&lt;/value&gt;
</I>&gt;<i> &gt; +    &lt;/attribute&gt;
</I>&gt;<i> &gt; +        &lt;attribute target=&quot;param&quot;&gt;
</I>&gt;<i> &gt; +      &lt;filter level=&quot;name&quot;&gt;match_end&lt;/filter&gt;
</I>&gt;<i> &gt; +      &lt;name&gt;pass_as&lt;/name&gt;
</I>&gt;<i> &gt; +      &lt;value&gt;out&lt;/value&gt;
</I>&gt;<i> &gt; +    &lt;/attribute&gt;
</I>&gt;<i> &gt; +  &lt;/data&gt;
</I>&gt;<i> &gt; +&lt;/rule&gt;
</I>&gt;<i> &gt; +
</I>&gt;<i> 
</I>&gt;<i> This fix looks fine, I think you immediately can also commit a likewise
</I>&gt;<i> fix for BackwardSearch. (and yes, there certainly are more textiter
</I>&gt;<i> methods which need fixing ...)
</I>&gt;<i> 
</I>&gt;<i> &gt;  &lt;rule&gt;
</I>&gt;<i> &gt;    &lt;class name=&quot;GtkEditable&quot;&gt;
</I>&gt;<i> &gt;      &lt;method&gt;InsertText&lt;/method&gt;
</I>&gt;<i> &gt; @@ -59,6 +78,30 @@
</I>&gt;<i> &gt;      &lt;/attribute&gt;
</I>&gt;<i> &gt;    &lt;/data&gt;
</I>&gt;<i> &gt;  &lt;/rule&gt;
</I>&gt;<i> &gt; +&lt;rule&gt;
</I>&gt;<i> &gt; +  &lt;class name=&quot;GtkListStore&quot;&gt;
</I>&gt;<i> &gt; +    &lt;method&gt;SetColumnTypes&lt;/method&gt;
</I>&gt;<i> &gt; +  &lt;/class&gt;
</I>&gt;<i> &gt; +  &lt;data&gt;
</I>&gt;<i> &gt; +    &lt;attribute target=&quot;param&quot;&gt;
</I>&gt;<i> &gt; +      &lt;filter level=&quot;name&quot;&gt;types&lt;/filter&gt;
</I>&gt;<i> &gt; +      &lt;name&gt;array&lt;/name&gt;
</I>&gt;<i> &gt; +      &lt;value&gt;true&lt;/value&gt;
</I>&gt;<i> &gt; +  &lt;/data&gt;
</I>&gt;<i> &gt; +&lt;/rule&gt;
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +&lt;rule&gt;
</I>&gt;<i> &gt; +  &lt;class name=&quot;GtktTreeStore&quot;&gt;
</I>&gt;<i>                      ^
</I>&gt;<i> &gt; +    &lt;method&gt;SetColumnTypes&lt;/method&gt;
</I>&gt;<i> &gt; +  &lt;/class&gt;
</I>&gt;<i> &gt; +  &lt;data&gt;
</I>&gt;<i> &gt; +    &lt;attribute target=&quot;param&quot;&gt;
</I>&gt;<i> &gt; +      &lt;filter level=&quot;name&quot;&gt;types&lt;/filter&gt;
</I>&gt;<i> &gt; +      &lt;name&gt;array&lt;/name&gt;
</I>&gt;<i> &gt; +      &lt;value&gt;true&lt;/value&gt;
</I>&gt;<i> &gt; +  &lt;/data&gt;
</I>&gt;<i> &gt; +&lt;/rule&gt;
</I>&gt;<i> &gt; +
</I>&gt;<i> 
</I>&gt;<i> I'm not sure about these. I'm feeling that they are wrong. I guess they
</I>&gt;<i> need the bit of var_arg magic like the {List,Tree}Store constructors
</I>&gt;<i> have.
</I>&gt;<i> 
</I>&gt;<i> A good way to test your changes to the metadata file is to regenerate
</I>&gt;<i> the autogenned sources and look how the generated functions look like.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> regards,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 	Kris
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> (I'm feeling that I'm not being clear. If so, please tell me and I will
</I>&gt;<i> try to rewrite this message :)
</I>&gt;<i> 
</I>&gt;<i> &gt;  &lt;rule&gt;
</I>&gt;<i> &gt;    &lt;class name=&quot;GtkTreeModelSort&quot;&gt;
</I>&gt;<i> &gt;      &lt;method&gt;ConvertChildIterToIter&lt;/method&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@ximian.com">Mono-list@ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="009843.html">[Mono-list] GTK# Patch for TreeStore, ListStore, and TextIter
</A></li>
	<LI> Next message: <A HREF="009855.html">[Mono-list] GTK# Patch for TreeStore, ListStore, and TextIter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9853">[ date ]</a>
              <a href="thread.html#9853">[ thread ]</a>
              <a href="subject.html#9853">[ subject ]</a>
              <a href="author.html#9853">[ author ]</a>
         </LI>
       </UL>
</body></html>
