<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [forms-devel] How to create a IEnumerable BindableProperty
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:forms-devel%40lists.dot.net?Subject=Re%3A%20%5Bforms-devel%5D%20How%20to%20create%20a%20IEnumerable%20BindableProperty&In-Reply-To=%3CCC711372-7C9A-4813-9BB3-3B69A47DD583%40xam-consulting.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[forms-devel] How to create a IEnumerable BindableProperty</H1>
    <B>Jesse Jiang</B> 
    <A HREF="mailto:forms-devel%40lists.dot.net?Subject=Re%3A%20%5Bforms-devel%5D%20How%20to%20create%20a%20IEnumerable%20BindableProperty&In-Reply-To=%3CCC711372-7C9A-4813-9BB3-3B69A47DD583%40xam-consulting.com%3E"
       TITLE="[forms-devel] How to create a IEnumerable BindableProperty">jesse at xam-consulting.com
       </A><BR>
    <I>Tue Oct  4 23:07:57 UTC 2016</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#137">[ date ]</a>
              <a href="thread.html#137">[ thread ]</a>
              <a href="subject.html#137">[ subject ]</a>
              <a href="author.html#137">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I try to binding a property like this

public static readonly BindableProperty ItemsSourceProperty = BindableProperty.Create(&quot;ItemsSource&quot;, typeof(IEnumerable), typeof(BindablePicker), null, BindingMode.OneWay, null, new BindableProperty.BindingPropertyChangedDelegate(BindablePicker.OnItemsSourceChanged), null, null, null);

          public IEnumerable ItemsSource
        {
            get { return (IEnumerable)base.GetValue(BindablePicker.ItemsSourceProperty); }
            set { base.SetValue(BindablePicker.ItemsSourceProperty, value); }
        }

But we found that, it won’t call BindablePicker.OnItemsSourceChanged function when the property was changed in BindingContext.

I linked with Xamarin.Forms source code and found that it will call this function when I’m changing the ItemSource in BindingContext,
		internal void Unapply()
		{
			object sourceObject;
			if (_weakSource != null &amp;&amp; _weakSource.TryGetTarget(out sourceObject))
			{
				for (var i = 0; i &lt; _parts.Count - 1; i++)
				{
					BindingExpressionPart part = _parts[i];

					if (!part.IsSelf)
					{
						part.TryGetValue(sourceObject, out sourceObject);
					}

					var inpc = sourceObject as INotifyPropertyChanged;
					if (inpc != null)
						inpc.PropertyChanged -= part.ChangeHandler;
				}
			}

			_weakSource = null;
			_weakTarget = null;
		} 

But It didn’t add a new delegate to PropertyChanged in BindingContext, so after that we I raised another property change event it won’t be updated. I known there is quick way to fix that, changing BindingMode.OneWay to BindingMode.TwoWay. But it doesn’t make senesce right? Why the normal data type can work, like string, int, but IEnumerable cannot? 

Did I miss something for binding with IEnumerable, I looked into the ListView source code, it’s very complex, is there any easy way to do this?

Thanks,
Jesse Jiang | Senior Developer 

XAM Consulting - Mobile Technology Specialists

www.xam-consulting.com &lt;<A HREF="http://www.xam-consulting.com/">http://www.xam-consulting.com/</A>&gt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/forms-devel/attachments/20161005/814d9018/attachment.html">http://lists.dot.net/pipermail/forms-devel/attachments/20161005/814d9018/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#137">[ date ]</a>
              <a href="thread.html#137">[ thread ]</a>
              <a href="subject.html#137">[ subject ]</a>
              <a href="author.html#137">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/forms-devel">More information about the forms-devel
mailing list</a><br>
</body></html>
