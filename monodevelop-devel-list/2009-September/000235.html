<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-devel] Working on the monodevelop dom after 2.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Working%20on%20the%20monodevelop%20dom%20after%202.2&In-Reply-To=1254155161.29894.394.camel%40linux-nesp.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000233.html">
   <LINK REL="Next"  HREF="000236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-devel] Working on the monodevelop dom after 2.2</H1>
    <B>Mike Kr&#252;ger</B> 
    <A HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Working%20on%20the%20monodevelop%20dom%20after%202.2&In-Reply-To=1254155161.29894.394.camel%40linux-nesp.site"
       TITLE="[Monodevelop-devel] Working on the monodevelop dom after 2.2">mkrueger at novell.com
       </A><BR>
    <I>Mon Sep 28 18:09:23 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000233.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
        <LI>Next message: <A HREF="000236.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#235">[ date ]</a>
              <a href="thread.html#235">[ thread ]</a>
              <a href="subject.html#235">[ subject ]</a>
              <a href="author.html#235">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

&gt;<i> Why is it specific to .NET? I'm missing something here. The document
</I>&gt;<i> outline shows a hierarchy of items. It is so generic that it even works
</I>&gt;<i> for XML documents. The class pad is also just a hierarchy of items (for
</I>&gt;<i> the whole project in this case). The goto type dialog shows a list of
</I>&gt;<i> types in the solution. 
</I>&gt;<i> 
</I>&gt;<i> The quick member navigation shows types in the first combo, and members
</I>&gt;<i> of the types in the second one. It can easily be redefined to showing
</I>&gt;<i> 'first level items of the file' in the first combo, and 'children of the
</I>&gt;<i> active first level item' in the second combo. Or something like that.
</I>&gt;<i> 
</I>&gt;<i> I don't see anything .NET specific in all this.
</I>&gt;<i> 
</I>
Ok I've looked a bit at the source code.

Class pad:

ClassNodeBuilder, FieldNodeBuilder, MethodNodeBuilder,
NamespaceNodeBuilder etc. 

But it can be extended using the addin tree - but the things we have are
very specific. For example: I've took a look at the MethodNodeBuilder -
it doesn't build child nodes (yes there are languages with methods in
methods). Taking this example it wouldn't even work if we had a new
INewMethod interface for such a language to be build with the class pad,
because the MethodNodeBuilder that takes care of building these objects
would prevent building child nodes.

Quick Member navigation - it's not so easy to set the rules:

'showing first level items of the file' means:
+ Showing only the namespaces -&gt; no containing types (they're first
level, and will be part of the DOM as nodes)
+ Don't show inner types (they're second level at best)

'children of the active first level item' means:
+ Show the current inner type (should be in the type selector).
+ Show the current statement, if the DOM is extended and more specific
than the monodevelop DOM.

Then there are 3 navigators: types/members/regions. That doesn't make
sense for some cases (think of C, there are no members/regions). 

Document outline:
The document outline that shows the hierarchy requires that
IOutlinedDocument is implemented. A XML and MD DOM get different
implementations of this interface. It's very general:

public interface IOutlinedDocument
{
	Gtk.Widget GetOutlineWidget ();
	void ReleaseOutlineWidget ();
}

I would say that's one of the best components we have for extensibility.
Because it doesn't 'lock' into a specific model. The downside is that it
doesn't provide much to re-use. But I think we should have this sort of
extensibility for all components and let the non-.NET languages a way to
work around all pre defined structures and replace the components with
an own way. This ensures that we can't make a mistake.

btw. another thing: All pads/output function currently build on ambience
flags - but for other languages there may be different sets of flags
required for displaying the information at that point. 

&gt;<i> Yes, that's currently possible (with some tweaks). But it means that the
</I>&gt;<i> language has to implement all the DOM interfaces: IField, IMethod,
</I>&gt;<i> IType, etc, which are full of .NET specific stuff. Yes, you can just
</I>&gt;<i> throw NotSupportedException of all .NET specific methods and properties,
</I>&gt;<i> but that's just unnecessary bloat. If anything, it would be better to
</I>&gt;<i> have:
</I>
We've classes that implement the interfaces, no .NET specific
implementation is required. But the other thing is that a new languages
now would ALWAYS require to implement all DOM interfaces that are full
of .NET specific stuff. (ok could use the same base class)
You've still not told how to display a VB output, Boo output and c#
output of a reflection source when putting the output code inside the
DOM objects. I think that's not easily possible.

MD side:
Code Completion DB -&gt; Data (in which DOM format)

Language binding:
Own Dom info + wants to display code completion data from the code
completion db 

&gt;<i> That would work, although I don't see the benefit of separating data
</I>&gt;<i> from display data in non .NET languages, since there will be a 1 to 1
</I>&gt;<i> correspondence between data and display data.
</I>&gt;<i>
</I>
The benefit is that the non .NET languages can communicate with
MonoDevelop components to produce output. And that the .NET unspecific
types/members etc. could be implemented today.
Sometimes the output is altered (adding markup to names etc.) by
consuming code. Outputting the text from the DOM isn't very easy and
just a GetString () doesn't cut the edge. We've to display this
information in various tooltips/lists with different options (short name
vs. long name). Therefore the GetString () needs to get the same
parameters as ambiences.

I tend to make the monodevelop DOM stuff .NET dependent in the type
model, generalize the object model so that other .NET languages can be
supported that are more far from C#/VB.NET and have a way to do
something like the IOutlinedDocument for each component. I don't want to
make the life harder for .NET language implementors when the non .NET
language implementors get little to no gain (See above - they need to
implement their own widgets/infrastructure - regardless of what we try,
more worse they can run into dead ends when trying to re-use the
monodevelop DOM - see the class output pad method example).

Regards
Mike

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000233.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
	<LI>Next message: <A HREF="000236.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#235">[ date ]</a>
              <a href="thread.html#235">[ thread ]</a>
              <a href="subject.html#235">[ subject ]</a>
              <a href="author.html#235">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-devel-list">More information about the Monodevelop-devel-list
mailing list</a><br>
</body></html>
