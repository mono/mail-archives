<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-devel] Working on the monodevelop dom after 2.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Working%20on%20the%20monodevelop%20dom%20after%202.2&In-Reply-To=1254158854.27667.24.camel%40celestis">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000230.html">
   <LINK REL="Next"  HREF="000235.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-devel] Working on the monodevelop dom after 2.2</H1>
    <B>Lluis Sanchez Gual</B> 
    <A HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Working%20on%20the%20monodevelop%20dom%20after%202.2&In-Reply-To=1254158854.27667.24.camel%40celestis"
       TITLE="[Monodevelop-devel] Working on the monodevelop dom after 2.2">lluis at novell.com
       </A><BR>
    <I>Mon Sep 28 12:26:01 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000230.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
        <LI>Next message: <A HREF="000235.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#233">[ date ]</a>
              <a href="thread.html#233">[ thread ]</a>
              <a href="subject.html#233">[ subject ]</a>
              <a href="author.html#233">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>El dl 28 de 09 de 2009 a les 19:27 +0200, en/na Mike Kr&#252;ger va escriure:
&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i> &gt; &quot;The current DOM would also implement those interfaces, so .NET
</I>&gt;<i> &gt; languages (for which the current DOM works great) wouldn't need to
</I>&gt;<i> &gt; implement them.&quot;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; For example (and this is just an incomplete example), DomField could be
</I>&gt;<i> &gt; implemented like this:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; class DomField: IMember, INewField
</I>&gt;<i> &gt; {
</I>&gt;<i> &gt; 	public string GetDescription (SomeContext ctx)
</I>&gt;<i> &gt; 	{
</I>&gt;<i> &gt; 		return ctx.Ambience.GetString (this, someFlags);
</I>&gt;<i> &gt; 	}
</I>&gt;<i> &gt; 	...
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; C#, VB, boo and all .net languages would keep using the DOM we have
</I>&gt;<i> &gt; right now, which would implement INewField, so they don't have to be
</I>&gt;<i> &gt; changed.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On the other hand, the C++ binding could have this implementation:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; class CppField: SomeBaseClass, INewField
</I>&gt;<i> &gt; {
</I>&gt;<i> &gt; 	public string GetDescription (SomeContext ctx)
</I>&gt;<i> &gt; 	{
</I>&gt;<i> &gt; 		return cppModifiers + &quot; &quot; + type + &quot; &quot; + name;
</I>&gt;<i> &gt; 	}
</I>&gt;<i> &gt; 	...
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The C++ DOM can be arbitrarily complex and can have its own storage
</I>&gt;<i> &gt; system, but by implementing INewField, the IDE would be able to display
</I>&gt;<i> &gt; data about it. In this case it is not necessary to separate data from
</I>&gt;<i> &gt; display data, because the DOM is specific to C++, so it will always use
</I>&gt;<i> &gt; C++ syntax.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The members combo, the document outline, the class pad, the go-to-member
</I>&gt;<i> &gt; dialog and the code completion window can all be impemented based on
</I>&gt;<i> &gt; INew* interfaces which are more simple and have less implementation
</I>&gt;<i> &gt; constraints. .NET bindings would just feed those GUI components using
</I>&gt;<i> &gt; the existing DOM, which would implement INew*. Non .NET bindings would
</I>&gt;<i> &gt; just provide any DOM implementing INew*.
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> Ok and in the end we would've a .NET infrastructure that works with .NET
</I>&gt;<i> classes and a 'do it on your own' infrastructure. 
</I>
To some extent, yes. See the PyBinding case. It has its own
infrastructure for parsing, storing and querying parse information,
resolving and generating completion data. It doesn't need the .NET
infrastructure, which doesn't really fit.

&gt;<i> 
</I>&gt;<i> If you say that the document outline/class pad/go to member dialog/quick
</I>&gt;<i> member navigation can work with the INewField etc. interfaces it's
</I>&gt;<i> simply wrong, because they're the ones that already define/use a .NET
</I>&gt;<i> specfic system.
</I>
Why is it specific to .NET? I'm missing something here. The document
outline shows a hierarchy of items. It is so generic that it even works
for XML documents. The class pad is also just a hierarchy of items (for
the whole project in this case). The goto type dialog shows a list of
types in the solution. 

The quick member navigation shows types in the first combo, and members
of the types in the second one. It can easily be redefined to showing
'first level items of the file' in the first combo, and 'children of the
active first level item' in the second combo. Or something like that.

I don't see anything .NET specific in all this.

&gt;<i> 
</I>&gt;<i> Why do you think that there are always types and members, methods,
</I>&gt;<i> fields etc. - in fact every component of monodevelop would need a custom
</I>&gt;<i> entry point where a filler class can fill the contents. Builds
</I>&gt;<i> tree/context menu for the class browser, does add 'columns' to the quick
</I>&gt;<i> navigation pane etc. - at the end almost any component that shows the
</I>&gt;<i> DOM needs to be rewritten/extended to make it work. I don't know if
</I>&gt;<i> anyone will do such a deep integration.
</I>
That's the point of the INew* set of interfaces. The MD components will
extract the required information from those interfaces, so no deep
integration will be required.

&gt;<i> 
</I>&gt;<i> What you're proposing above can already be done now, by adding a c+
</I>&gt;<i> ambience that handles a c++ tree extending the current one.
</I>&gt;<i> 
</I>&gt;<i> class CppAmbience : Ambience
</I>&gt;<i> {
</I>&gt;<i> 	public override string GetString (IField field, flags)
</I>&gt;<i> 	{
</I>&gt;<i> 		CppField cppfield = (CppField)field;
</I>&gt;<i> 		return cppfield.Modifiers + &quot; &quot; + cppfield.Type + &quot; &quot; + cppfield.Name;
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> (yes this ambience won't work on a non c++ tree, but it would be
</I>&gt;<i> possible to fill for example the code completion window or quick class
</I>&gt;<i> browser with c++ objects and a c++ ambience).
</I>
Yes, that's currently possible (with some tweaks). But it means that the
language has to implement all the DOM interfaces: IField, IMethod,
IType, etc, which are full of .NET specific stuff. Yes, you can just
throw NotSupportedException of all .NET specific methods and properties,
but that's just unnecessary bloat. If anything, it would be better to
have:

class CppAmbience : Ambience
{
	public override string GetString (INode field, flags)
	{
		CppField cppfield = field as CppField;
		if (cppfield != null)
			return cppfield.Modifiers + &quot; &quot; + cppfield.Type + &quot; &quot; + cppfield.Name;
		...
	}
}

That would work, although I don't see the benefit of separating data
from display data in non .NET languages, since there will be a 1 to 1
correspondence between data and display data.

Lluis.


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000230.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
	<LI>Next message: <A HREF="000235.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#233">[ date ]</a>
              <a href="thread.html#233">[ thread ]</a>
              <a href="subject.html#233">[ subject ]</a>
              <a href="author.html#233">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-devel-list">More information about the Monodevelop-devel-list
mailing list</a><br>
</body></html>
