<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-devel] Working on the monodevelop dom after 2.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Working%20on%20the%20monodevelop%20dom%20after%202.2&In-Reply-To=1253900592.29894.141.camel%40linux-nesp.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000217.html">
   <LINK REL="Next"  HREF="000221.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-devel] Working on the monodevelop dom after 2.2</H1>
    <B>Levi Bard</B> 
    <A HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Working%20on%20the%20monodevelop%20dom%20after%202.2&In-Reply-To=1253900592.29894.141.camel%40linux-nesp.site"
       TITLE="[Monodevelop-devel] Working on the monodevelop dom after 2.2">taktaktaktaktaktaktaktaktaktak at gmail.com
       </A><BR>
    <I>Fri Sep 25 15:40:14 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000217.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
        <LI>Next message: <A HREF="000221.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#219">[ date ]</a>
              <a href="thread.html#219">[ thread ]</a>
              <a href="subject.html#219">[ subject ]</a>
              <a href="author.html#219">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> The problem we have is that we are trying to do too many things with a
</I>&gt;<i> single DOM. The MD DOM is used basically for three things:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; 1. Fill navigation widgets such as the member/type combos at the
</I>&gt;<i> &#160; &#160; &#160; &#160;top of the editor, the document outline or the class pad.
</I>&gt;<i> &#160; &#160; 2. Support code completion for .NET languages. It can be used for
</I>&gt;<i> &#160; &#160; &#160; &#160;example to resolve types across all referenced assemblies of a
</I>&gt;<i> &#160; &#160; &#160; &#160;project, no matter which language were those assemblies written
</I>&gt;<i> &#160; &#160; &#160; &#160;on.
</I>&gt;<i> &#160; &#160; 3. A general purpose DOM, used by add-ins to extract information
</I>&gt;<i> &#160; &#160; &#160; &#160;about classes and members and do something with them (for
</I>&gt;<i> &#160; &#160; &#160; &#160;example, the Stetic designer uses that to detect classes bound
</I>&gt;<i> &#160; &#160; &#160; &#160;to a designer).
</I>&gt;<i>
</I>&gt;<i> The current situation is that if a non .NET language wants to provide
</I>&gt;<i> support for 1), we are forcing the use of the MD DOM, even when it
</I>&gt;<i> really doesn't fit. And there isn't much gain with that, because that
</I>&gt;<i> language won't be really able to leverage 2) and 3). The type resolution
</I>&gt;<i> rules of the MD DOM strictly follow the .NET semantics, so it won't be
</I>&gt;<i> of much use for non .NET languages. Also, as a general purpose DOM for
</I>&gt;<i> the language it won't be really useful because it won't allow expressing
</I>&gt;<i> the particularities of the language.
</I>&gt;<i>
</I>&gt;<i> My ideas for improving the situation are the following:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160;* Create a new DOM, which would be very high level, with just the
</I>&gt;<i> &#160; &#160; &#160; &#160;information required to support 1). It would be a simple DOM,
</I>&gt;<i> &#160; &#160; &#160; &#160;intended only for displaying information to the user, not for
</I>&gt;<i> &#160; &#160; &#160; &#160;type resolution or other operations.
</I>&gt;<i> &#160; &#160; &#160;* Make it explicit that the current MD DOM is only for .NET
</I>&gt;<i> &#160; &#160; &#160; &#160;languages.
</I>&gt;<i> &#160; &#160; &#160;* Each .NET language would implement its own DOM to support code
</I>&gt;<i> &#160; &#160; &#160; &#160;completion.
</I>&gt;<i> &#160; &#160; &#160;* Generalize a bit the parser service, so we can share some of its
</I>&gt;<i> &#160; &#160; &#160; &#160;logic. We can keep the parser database as it is right now, but
</I>&gt;<i> &#160; &#160; &#160; &#160;it would be used only for .NET languages. Non .NET languages
</I>&gt;<i> &#160; &#160; &#160; &#160;would use its own DOM storage model. Maybe we wouldn't be able
</I>&gt;<i> &#160; &#160; &#160; &#160;to share much, but at least we could share the thread that
</I>&gt;<i> &#160; &#160; &#160; &#160;checks for changes and triggers parse operations or something
</I>&gt;<i> &#160; &#160; &#160; &#160;like that.
</I>
This is more or less what non-.NET languages have to do currently:
Munge some stuff into the DOM for 1), custom implementation for 2), 3)
[which is refactoring also, isn't it?] is basically impossible.

I'm on board with a unified, high-level DOM for populating
quickfinder, classpad, etc. [Zeroth bullet]
If this part is generalized enough to support native hierarchy
structures for various languages [currently missing], easily updatable
[currently exists], and easily and flexibly queryable from addin code
[currently missing], completion doesn't necessarily require its own
DOM, just some completion hooks similar to the existing ones. Things
like Goto Definition and Find References could operate at this level
as well.
Similarly, there's no reason that the same overall storage mechanism
couldn't be used for .NET and non-.NET parse databases, as long as
hooks are exposed for specializing the storage process for specific
DOM implementations.

I would LOVE to see enough assumptions neutralized that I could enable
Stetic or hook into existing refactoring operations for a specific,
arbitrary language.

-- 
<A HREF="http://homes.eff.org/~barlow/EconomyOfIdeas.html">http://homes.eff.org/~barlow/EconomyOfIdeas.html</A>
<A HREF="http://www.dreamsongs.com/MobSoftware.html">http://www.dreamsongs.com/MobSoftware.html</A>
<A HREF="http://www.gnu.org/philosophy/shouldbefree.html">http://www.gnu.org/philosophy/shouldbefree.html</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000217.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
	<LI>Next message: <A HREF="000221.html">[Monodevelop-devel] Working on the monodevelop dom after 2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#219">[ date ]</a>
              <a href="thread.html#219">[ thread ]</a>
              <a href="subject.html#219">[ subject ]</a>
              <a href="author.html#219">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-devel-list">More information about the Monodevelop-devel-list
mailing list</a><br>
</body></html>
