<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-devel] Error when installing Language Binding from	custom repository
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Error%20when%20installing%20Language%20Binding%20from%0A%09custom%20repository&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000322.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-devel] Error when installing Language Binding from	custom repository</H1>
    <B>Tomas Petricek</B> 
    <A HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Error%20when%20installing%20Language%20Binding%20from%0A%09custom%20repository&In-Reply-To="
       TITLE="[Monodevelop-devel] Error when installing Language Binding from	custom repository">tomas.petricek at gmail.com
       </A><BR>
    <I>Wed Oct 13 13:13:23 EDT 2010</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000322.html">[Monodevelop-devel] Error when installing Language Binding from custom repository
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#321">[ date ]</a>
              <a href="thread.html#321">[ thread ]</a>
              <a href="subject.html#321">[ subject ]</a>
              <a href="author.html#321">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
I've been working on an F# Language Binding for MonoDevelop and I'm
trying to create a repository, so that people can install it using the
standard tools. There are still some bugs in the Language Binding, but
when I just copy the DLL to the &quot;BackendBindings&quot; directory in
MonoDevelop folder, then it seems to work okay (it requires F# and F#
PowerPack in order to run). My testing repository is here:
<A HREF="http://www.tomasp.net/monodevelop/">http://www.tomasp.net/monodevelop/</A>

The installation from the repository seems to work fine on Linux/Mono.
The installation reports some errors with the configuration and some
exception occurs when it loads (I guess), but that looks like my bugs
that I can fix (still, it installs and you can create new projects and
everything)

However, I'm having more troubles on Windows/.NET (I'm testing it on a
clean Windows 7 machine with Gtk# and MonoDevelop installed using the
instructions from the web). When I go through the addin installation
procedure, it installs the adding and just before showing the final
dialog window (with success message and warnings), it shows an
&quot;Unhandled Exception.&quot; dialog with the following:

System.Reflection.TargetInvocationException: Exception has been thrown
by the target of an invocation.
---&gt; System.AccessViolationException: Attempted to read or write
protected memory.
This is often an indication that other memory is corrupt.

   at Gtk.Dialog.gtk_dialog_run(IntPtr raw)
   at Gtk.Dialog.Run()
   at Mono.Addins.Gui.AddinManagerDialog.OnInstall(Object sender, EventArgs e)
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._InvokeMethodFast(Object target,
Object[] arguments, SignatureStruct&amp; sig, MethodAttributes
methodAttributes, RuntimeTypeHandle typeOwner)
   at System.RuntimeMethodHandle.InvokeMethodFast(Object target,
Object[] arguments, Signature sig, MethodAttributes methodAttributes,
RuntimeTypeHandle typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj,
BindingFlags invokeAttr, Binder binder, Object[] parameters,
CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Delegate.DynamicInvokeImpl(Object[] args)
   at GLib.Signal.ClosureInvokedCB(Object o, ClosureInvokedArgs args)
   at GLib.SignalClosure.Invoke(ClosureInvokedArgs args)
   at GLib.SignalClosure.MarshalCallback(IntPtr raw_closure, IntPtr
return_val, UInt32 n_param_vals, IntPtr param_values, IntPtr
invocation_hint, IntPtr marshal_data)

I tried attaching to the process from VS debugger and it doesn't seem
to even load my &quot;FSharpBinding.dll&quot; assembly, so I'm wondering if this
could some issue in MonoDevelop itself? I tried creating a trivial
language binding in C# and that worked okay, but I was able to
reproduce the error with the repository above on two different
machines. I can also send you the generated log file from the
installation if you need more information.

I wasn't quite able to figure out what is going on (I think the
exception actually comes from Mono.Addins and I think I've seen errors
like this when accidentally accessing GUI stuff from a background
thread, but I'm not sure if that could be a problem here). Anyway,
this will be probably quite easy to find out for somebody who has
properly setup environment with debug builds of all relevant
libraries.

Thanks for your help!
Tomas Petricek

PS: I think that the Visual Studio projects in monodevelop-2.4 &quot;tag&quot;
(I used that version to make sure my adding works with latest stable
version) incorrectly reference 4.0.0 versions of Mono.Addins etc. (see
for example <A HREF="http://github.com/mono/monodevelop/blob/monodevelop-2.4/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide.csproj">http://github.com/mono/monodevelop/blob/monodevelop-2.4/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide.csproj</A>).
I tried changed that to 5.0.0 on my machine, but it didn't resolve the
issue I was having.

PS2: I noticed there was a project with the aim to implement F#
support for MonoDevelop at the GSOC this year, but I couldn't find any
outcomes of the project. Is that available somewhere? I tried
contacting the person who worked on that, but with no luck (possibly,
I just got a wrong email). Anyway, I could probably contribute my work
to that project (or the other way round) to avoid duplication of
efforts...
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000322.html">[Monodevelop-devel] Error when installing Language Binding from custom repository
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#321">[ date ]</a>
              <a href="thread.html#321">[ thread ]</a>
              <a href="subject.html#321">[ subject ]</a>
              <a href="author.html#321">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-devel-list">More information about the Monodevelop-devel-list
mailing list</a><br>
</body></html>
