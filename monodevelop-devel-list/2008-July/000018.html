<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-devel] Some new DOM guidance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Some%20new%20DOM%20guidance&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000026.html">
   <LINK REL="Next"  HREF="000020.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-devel] Some new DOM guidance</H1>
    <B>Mike Kr&#252;ger</B> 
    <A HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Some%20new%20DOM%20guidance&In-Reply-To="
       TITLE="[Monodevelop-devel] Some new DOM guidance">mkrueger at novell.com
       </A><BR>
    <I>Mon Jul 28 18:23:16 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000026.html">[Monodevelop-devel] Using SQLite as parser database
</A></li>
        <LI>Next message: <A HREF="000020.html">[Monodevelop-devel] Some new DOM guidance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18">[ date ]</a>
              <a href="thread.html#18">[ thread ]</a>
              <a href="subject.html#18">[ subject ]</a>
              <a href="author.html#18">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

Ok. I tried to make it easy to convert old dom code over to new dom
code.


Basically it's:

not longer:
using MonoDevelop.Projects.Parser;

instead:
using MonoDevelop.Projects.Dom;

not longer: &#65279;IClass instead: IType

Parser registration (with the addin tree):

&lt;Extension path = &quot;/MonoDevelop/Ide/DomParser&quot;&gt;
	&lt;Class class = &quot;&#65279;MonoDevelop.CSharpBinding.DomParser&quot; /&gt;
&lt;/Extension&gt;

The parser must extend the MonoDevelop.Projects.Dom.Parser.IParser
interface. I recommend inheriting from
MonoDevelop.Projects.Dom.Parser.AbstractParser which makes changes in
the interface more easy.

Generally I tried to move functions from some services to the objects
directly. For example - monodoc documentation could be now accessed by
System.Xml.XmlNode GetMonodocDocumentation (); instead of the
documentation service. Or the icon could be get by
string StockIcon { get; } instead of using the IconService. I'll add
more functions to the dom. The goal is to make it easier to find
functions and bring back some responsibility to the objects.


GETTING PARSE INFOS:

MonoDevelop.Ide.Gui.Document

now contains:
public ICompilationUnit &#65279;CompilationUnit {
	get;
}
In former versions the document contained only the text contents, now it
contains the most recent parse information too.


For the rest - look at:
MonoDevelop.Projects.Dom.Parser.ProjectDomService 

There you have functions like:
IParser GetParserByMime (string mimeType);
IParser GetParserByFileName (string fileName);

ICompilationUnit Parse (Project project, 
                        string fileName, 
                        string mimeType)


For projects:
&#65279;ProjectDom GetDatabaseProjectDom (Project project);
The &#65279;ProjectDom contains the project parser info (was ParserContext  in
former versions)

The Projects will contain the ProjectDom as property, but currently I
had already too many name clashes. After removing the old infrastructure
I'll do some refactorings to make the access easier. &#65279;(I could need some
input here - maybe someone has new ideas what's missing. Like
the &#65279;CompilationUnit inside the Document).

The project dom contains some functions old dom users will find very
familiar (like GetNamespaceContents, SearchType).


I've converted much old code - most is done with renaming and switch
over the usings. If you've more questions feel free to ask.

Regards
Mike














</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000026.html">[Monodevelop-devel] Using SQLite as parser database
</A></li>
	<LI>Next message: <A HREF="000020.html">[Monodevelop-devel] Some new DOM guidance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18">[ date ]</a>
              <a href="thread.html#18">[ thread ]</a>
              <a href="subject.html#18">[ subject ]</a>
              <a href="author.html#18">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-devel-list">More information about the Monodevelop-devel-list
mailing list</a><br>
</body></html>
