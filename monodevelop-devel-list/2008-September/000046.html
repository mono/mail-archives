<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Monodevelop-devel] Per-project styles &amp; policies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Per-project%20styles%20%26%20policies&In-Reply-To=aec34c770809301118s440a1595ued674343eedf0622%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000043.html">
   <LINK REL="Next"  HREF="000042.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Monodevelop-devel] Per-project styles &amp; policies</H1>
    <B>Lluis Sanchez Gual</B> 
    <A HREF="mailto:monodevelop-devel-list%40lists.ximian.com?Subject=%5BMonodevelop-devel%5D%20Per-project%20styles%20%26%20policies&In-Reply-To=aec34c770809301118s440a1595ued674343eedf0622%40mail.gmail.com"
       TITLE="[Monodevelop-devel] Per-project styles &amp; policies">lluis at novell.com
       </A><BR>
    <I>Tue Sep 30 17:20:41 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000043.html">[Monodevelop-devel] Per-project styles &amp; policies
</A></li>
        <LI>Next message: <A HREF="000042.html">[Monodevelop-devel] Per-project styles &amp; policies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46">[ date ]</a>
              <a href="thread.html#46">[ thread ]</a>
              <a href="subject.html#46">[ subject ]</a>
              <a href="author.html#46">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>El dt 30 de 09 de 2008 a les 14:18 -0400, en/na Michael Hutchinson va
escriure:
&gt;<i> On Tue, Sep 30, 2008 at 8:30 AM, Lluis Sanchez Gual &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/monodevelop-devel-list">lluis at novell.com</A>&gt; wrote:
</I>&gt;<i> &gt; El dl 29 de 09 de 2008 a les 16:51 -0400, en/na Michael Hutchinson va
</I>&gt;<i> &gt; escriure:
</I>&gt;<i> &gt;&gt; Hi everyone,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Here are my current thoughts concerning per-project styles and
</I>&gt;<i> &gt;&gt; policies, so that we can discuss it before I go ahead and implement
</I>&gt;<i> &gt;&gt; it. I also have an number of questions that are interspersed
</I>&gt;<i> &gt;&gt; throughout this email.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Rationale
</I>&gt;<i> &gt;&gt; =======
</I>&gt;<i> &gt;&gt; There are a number of settings and preferences in MD that should be
</I>&gt;<i> &gt;&gt; customisable for different solutions/projects. Basically, anything
</I>&gt;<i> &gt;&gt; that affects the style of the code you write should be able to be set
</I>&gt;<i> &gt;&gt; for a particular project, since different projects have different
</I>&gt;<i> &gt;&gt; styles and policies. I've lumped &quot;Styles and Policies&quot; together into
</I>&gt;<i> &gt;&gt; one heading since I believe they are related.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regarding styles, I want to stress that they are &quot;&#65279;anything that affects
</I>&gt;<i> &gt; the style of the code you write&quot;, which means that settings such as
</I>&gt;<i> &gt; indent mode (auto, smart) are not styles.
</I>&gt;<i> 
</I>&gt;<i> Exactly, I should have been clearer. Another example:
</I>&gt;<i> * the presence of the column ruler is a user preference
</I>&gt;<i> * the /width/ of the column ruler is a per-project setting
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; Text Editor Settings
</I>&gt;<i> &gt;&gt; ==============
</I>&gt;<i> &gt;&gt; These are the ones that most people care about -- per-mimetype
</I>&gt;<i> &gt;&gt; settings for the general text editor behaviour such as tabs-to-spaces,
</I>&gt;<i> &gt;&gt; editor width, tab width, standard headers. Some languages may add to
</I>&gt;<i> &gt;&gt; this, e.g. C# indenter behaviour, and in future things like
</I>&gt;<i> &gt;&gt; auto-formatting.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Indenter behavior and auto-formatting are not styles, and should not be
</I>&gt;<i> &gt; added to project preferences. On the other hand, formatting rules are
</I>&gt;<i> &gt; styles.
</I>&gt;<i> 
</I>&gt;<i> Yes, sorry for any ambiguity here. I meant the formatting behaviour of
</I>&gt;<i> the indenter/auto-formatter.
</I>&gt;<i> 
</I>&gt;<i> &gt; About storing styles per-mimetype, I'm not sure this is needed. It makes
</I>&gt;<i> &gt; more sense to present styles to the user organized by file type, but at
</I>&gt;<i> &gt; a higher level than mime type. For example we could present settings for
</I>&gt;<i> &gt; C#, ASP.NET, XML. Those file types could be sub-divided in mime types if
</I>&gt;<i> &gt; we really need that level of detail.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; There should also be a &quot;default&quot; style, and the
</I>&gt;<i> &gt;&gt; per-mimetype settings should override this.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; * Should we allow users to add custom mimetypes for their own file
</I>&gt;<i> &gt;&gt; formats, or just support the &quot;major&quot; text/code mimetypes registered in
</I>&gt;<i> &gt;&gt; MD?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I think we should allow binding mime types to file type categories
</I>&gt;<i> &gt; (e.g. .addin files to XML category).
</I>&gt;<i> 
</I>&gt;<i> Well, that what VS does, kinda -- it lets you bind arbitrary file
</I>&gt;<i> extensions to editors, e.g. the C#, XML, XAML editors...
</I>&gt;<i> 
</I>&gt;<i> However, if we have a panel to do something like that, it's almost
</I>&gt;<i> trivial to allow each kind to have its own style.
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; * Should we list only the mimetypes used in the project?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We should somehow filter out file types which don't make sense in a
</I>&gt;<i> &gt; given project. For example, ASP.NET styles should not be shown in a GTK#
</I>&gt;<i> &gt; project (although makes sense to show XML settings in all kind of
</I>&gt;<i> &gt; projects).
</I>&gt;<i> 
</I>&gt;<i> It won't be very easy. Since styles will mostly be edited at the
</I>&gt;<i> solution level, the solution's dialog is going to have to scan all
</I>&gt;<i> child projects for file types.
</I>
Doesn't sound that hard ;)

&gt;<i> 
</I>&gt;<i> &gt;&gt; * For each mimetype, should there be a checkbox to override the
</I>&gt;<i> &gt;&gt; &quot;default&quot; text style? Or should there be a UI for adding/removing text
</I>&gt;<i> &gt;&gt; styles to the tree?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don't know how you plan to implement the GUI. IMO, style settings
</I>&gt;<i> &gt; could be implemented just like other project settings, using option
</I>&gt;<i> &gt; panels. By changing a setting you would be overriding it. There could be
</I>&gt;<i> &gt; a button for restoring default settings.
</I>&gt;<i> 
</I>&gt;<i> Unfortunately that doesn't make the settings cascade behaviour
</I>&gt;<i> obvious. I'd prefer to have the user explicitly override the parent
</I>&gt;<i> solution's settings.
</I>
I would need to see a gui mockup to understand what you have in mind.

&gt;<i> 
</I>&gt;<i> &gt;&gt; Policies
</I>&gt;<i> &gt;&gt; ======
</I>&gt;<i> &gt;&gt; There are a number of other per-project settings that aren't quite
</I>&gt;<i> &gt;&gt; styles, but also aren't really build options or project properties.
</I>&gt;<i> &gt;&gt; I'm calling these &quot;policies&quot; for now. The only existing one is
</I>&gt;<i> &gt;&gt; changelog policies; in future, we could add settings such as &quot;pass
</I>&gt;<i> &gt;&gt; tests before checkin&quot;, &quot;check style before checkin&quot;, &quot;must include
</I>&gt;<i> &gt;&gt; changelog entry&quot;, etc.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sounds good.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Settings Infrastructure
</I>&gt;<i> &gt;&gt; ================
</I>&gt;<i> &gt;&gt; Many of these settings may need to be overridable for individual
</I>&gt;<i> &gt;&gt; projects within a solution, because a solution's projects may have
</I>&gt;<i> &gt;&gt; been imported from elsewhere with different coding style. For this
</I>&gt;<i> &gt;&gt; reason, we need an infrastructure that can be used to get the setting
</I>&gt;<i> &gt;&gt; for a project, and if the setting has not been overridden, will grab
</I>&gt;<i> &gt;&gt; the setting from the parent solution.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; * How important is this feature?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don't think it is important.
</I>&gt;<i> 
</I>&gt;<i> You don't think it's important for project to be able to override
</I>&gt;<i> solution-level settings? I've spoken with a few people who disagree --
</I>&gt;<i> the main use case seems to have been importe
</I>
I misread that paragraph. I agree it's important to have settings in the
solution and be able to override them in projects. I was thinking about
whether the full settings should be stored in the project or not, but
that's a different issue.

&gt;<i> 
</I>&gt;<i> &gt;&gt; * How many of the settings really need to be overridable at project level?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don't see why there should be a restriction on that.
</I>&gt;<i> 
</I>&gt;<i> Well, if there are settings that nobody ever wants to override, then
</I>&gt;<i> making them overridable will add unnecessary UI.
</I>
In the idea of implementation I have, you would use the same gui for
setting and for overriding properties, so that would not be a problem.

&gt;<i> 
</I>&gt;<i> &gt;&gt; * Should settings be overridable at &quot;solution folder&quot; level too, hence
</I>&gt;<i> &gt;&gt; allowing a cascade of settings?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We could do it (although it is not so important).
</I>&gt;<i> 
</I>&gt;<i> Yes, I don't think it so important, though it's probably not hard. So,
</I>&gt;<i> is it worth the effort (and UI clutter)?
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; * Should settings or group of settings be individually overridable? Or
</I>&gt;<i> &gt;&gt; should it just allow a project to override *all* settings? Does this
</I>&gt;<i> &gt;&gt; really need any granularity?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Allow overriding at file type level is probably enough.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; * Where should settings be stored? The solution file and the project
</I>&gt;<i> &gt;&gt; files? I feel this is better than a .userprefs-like file, since it
</I>&gt;<i> &gt;&gt; makes sure the settings stay with the project/solution.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It has to be stored in the project file, since the idea is to share all
</I>&gt;<i> &gt; those settings with all developers, and that would not be possible if
</I>&gt;<i> &gt; you store it in userprefs.
</I>&gt;<i> 
</I>&gt;<i> The actual .userprefs files is right out, of course, since it should
</I>&gt;<i> never be shared. I meant some kind of userprefs-like file, e.g.
</I>&gt;<i> solutionname.style, to avoid cluttering the build files. However,
</I>&gt;<i> having it in the project file so that it's impossible NOT to share it
</I>&gt;<i> :-)
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; * Should setting be duplicated in the project in case it's opened
</I>&gt;<i> &gt;&gt; without the solution? Or should the project have a flag to say that it
</I>&gt;<i> &gt;&gt; expects settings to be stored in a solution, so MD can warn when the
</I>&gt;<i> &gt;&gt; solution isn't present?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Since this is an uncommon case, I would just use the default settings.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; * What settings do we default to when opening projects that don't
</I>&gt;<i> &gt;&gt; contain settings Do we automatically add default settings to the
</I>&gt;<i> &gt;&gt; solution files? Or fall back to a set of user preferences?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; All style and policy settings should be available as user preferences.
</I>&gt;<i> &gt; Those would be the settings to use when creating a new solution.
</I>&gt;<i> 
</I>&gt;<i> Well, yes, that's a given; the user must be able to have a default
</I>&gt;<i> style for new projects. The question is whether we should write the
</I>&gt;<i> settings to the files automatically in the case where there are none
</I>&gt;<i> -- all MD-created projects should have style settings baked in upon
</I>&gt;<i> creation, but files from other sources would not.
</I>&gt;<i> 
</I>&gt;<i> It would also be nice to have a &quot;smart default&quot; mode that would infer
</I>&gt;<i> some settings (tabs/spaces) from the files.
</I>&gt;<i> 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; GUI Infrastructure
</I>&gt;<i> &gt;&gt; =============
</I>&gt;<i> &gt;&gt; It's difficult to present all of these options in the GUI in a
</I>&gt;<i> &gt;&gt; scalable way, particularly the per-mimetype editor settings
</I>&gt;<i> &gt;&gt; * Should the settings be in the main &quot;Project options&quot; dialog or a
</I>&gt;<i> &gt;&gt; separate &quot;Styles and policies&quot; dialog? The separate dialog has the
</I>&gt;<i> &gt;&gt; advantage that the same dialog can be used to edit the user's named
</I>&gt;<i> &gt;&gt; styles and default style. It would also help to not overload the
</I>&gt;<i> &gt;&gt; setting treeview in the existing project options dialog.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I think they should go in the project options dialog. We can have a
</I>&gt;<i> &gt; &quot;Coding Style&quot; category and add a subcategory for each file type.
</I>&gt;<i> 
</I>&gt;<i> Don't forget that each file type will have sub-options, so the tree
</I>&gt;<i> will be at least three deep.
</I>&gt;<i> 
</I>&gt;<i> I would like the main panel for the &quot;Coding Style&quot; category to be used
</I>&gt;<i> to add / override / load / save file types, and dynamically insert the
</I>&gt;<i> corresponding subcategories into the tree.
</I>&gt;<i> 
</I>&gt;<i> I'm still not sure how this would work for allowing the user to manage
</I>&gt;<i> styles outside of projects.
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; * Should each panel have &quot;use parent solution's style&quot;, &quot;load/save
</I>&gt;<i> &gt;&gt; named style&quot; etc options? Or should these apply to all styles?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Load/save can be done at project level. Overriding at file type level.
</I>&gt;<i> 
</I>&gt;<i> So it won't be possible to save just (e.g.) a C# style; you'd have to
</I>&gt;<i> save everything?
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; * VS has a setting panel that can be used to add &quot;file types&quot; and set
</I>&gt;<i> &gt;&gt; the editing experience that's used for them. maybe we could do
</I>&gt;<i> &gt;&gt; something similar with per-mimetype styles -- the top-level panel for
</I>&gt;<i> &gt;&gt; editor setting would contain this list, and adding a file type would
</I>&gt;<i> &gt;&gt; cause it and its options to appear in the tree. Files not handled this
</I>&gt;<i> &gt;&gt; way would fall back to the &quot;Other files&quot; style (VS has an &quot;All files&quot;
</I>&gt;<i> &gt;&gt; option which aggregates the common settings from all files, with
</I>&gt;<i> &gt;&gt; tri-state checkboxes etc, but I feel this is overcomplex).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In general, editing experience settings are not styles, they are about
</I>&gt;<i> &gt; editor behavior. However it makes sense to allow binding a mime type to
</I>&gt;<i> &gt; a known file type for which behavior and style settings can be set.
</I>&gt;<i> 
</I>&gt;<i> Yes, I meant use a similar UI but for styles, not editor experiences.
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; Named Styles
</I>&gt;<i> &gt;&gt; ==========
</I>&gt;<i> &gt;&gt; It should be possible to save a project's style, and apply this style
</I>&gt;<i> &gt;&gt; to other solutions/projects. However, I don't think it's viable or
</I>&gt;<i> &gt;&gt; desirable to synchronise these in any way. Once a project is created,
</I>&gt;<i> &gt;&gt; its settings should remain constant unless they are explicitly
</I>&gt;<i> &gt;&gt; changed.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Agreed.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I also have a number of mockups on my whiteboard which aren't so easy
</I>&gt;<i> &gt;&gt; to express in email :-)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cool, feel free to post.
</I>&gt;<i> 
</I>&gt;<i> It'll probably be better when I have some actual stetic mockups or code.
</I>&gt;<i> 
</I>
Let's discuss all this when I come back from holidays.

Lluis.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000043.html">[Monodevelop-devel] Per-project styles &amp; policies
</A></li>
	<LI>Next message: <A HREF="000042.html">[Monodevelop-devel] Per-project styles &amp; policies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46">[ date ]</a>
              <a href="thread.html#46">[ thread ]</a>
              <a href="subject.html#46">[ subject ]</a>
              <a href="author.html#46">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/monodevelop-devel-list">More information about the Monodevelop-devel-list
mailing list</a><br>
</body></html>
