<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] ( libglade ) Small issue with Gtk2::GladeXML and
	glade-3 ... text markup not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-devel%40lists.ximian.com?Subject=%5BGlade-devel%5D%20%28%20libglade%20%29%20Small%20issue%20with%20Gtk2%3A%3AGladeXML%20and%0A%09glade-3%20...%20text%20markup%20not%20working&In-Reply-To=44714865.90209%40nusconsulting.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001216.html">
   <LINK REL="Next"  HREF="001218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] ( libglade ) Small issue with Gtk2::GladeXML and
	glade-3 ... text markup not working</H1>
    <B>J. Ali Harlow</B> 
    <A HREF="mailto:glade-devel%40lists.ximian.com?Subject=%5BGlade-devel%5D%20%28%20libglade%20%29%20Small%20issue%20with%20Gtk2%3A%3AGladeXML%20and%0A%09glade-3%20...%20text%20markup%20not%20working&In-Reply-To=44714865.90209%40nusconsulting.com.au"
       TITLE="[Glade-devel] ( libglade ) Small issue with Gtk2::GladeXML and
	glade-3 ... text markup not working">ali at juiblex.co.uk
       </A><BR>
    <I>Mon May 22 14:15:34 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="001216.html">[Glade-devel] ( libglade ) Small issue with Gtk2::GladeXML and
 glade-3 ... text markup not working
</A></li>
        <LI>Next message: <A HREF="001218.html">[Glade-devel] ( libglade ) Small issue with Gtk2::GladeXML and
	glade-3 ... text markup not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1217">[ date ]</a>
              <a href="thread.html#1217">[ thread ]</a>
              <a href="subject.html#1217">[ subject ]</a>
              <a href="author.html#1217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22/05/06 06:13:09, Daniel Kasak wrote:

&gt;<i> When I try to use markup in a label ( eg to make the text bold ), I  
</I>&gt;<i> get the expected results both in the glade-3 builder, and if I view  
</I>&gt;<i> the project in the glade-2 builder, but when I use Gtk2::GladeXML to
</I>&gt;<i> construct a window based on a glade-3 xml file, the markup is not  
</I>&gt;<i> being used.
</I>
I ran into this recently. It seems to be because glade-3 is outputing  
&quot;pattern&quot; as the empty string whereas it needs to be NULL (not in the  
glade file) for GtkLabel to honour markup (or underlining). I just  
added a rule to the xslt file that I use to remove empty patterns.  
Something like this should work (untested):

&lt;xsl:transform xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform&quot;">http://www.w3.org/1999/XSL/Transform&quot;</A>  
version=&quot;1.0&quot;
     xmlns=&quot;<A HREF="http://glade.gnome.org/glade-2.0.dtd&quot;">http://glade.gnome.org/glade-2.0.dtd&quot;</A>
     exclude-result-prefixes=&quot;#default&quot;&gt;
&lt;xsl:output method=&quot;xml&quot; standalone=&quot;no&quot;
     doctype-system=&quot;<A HREF="http://glade.gnome.org/glade-2.0.dtd&quot;/">http://glade.gnome.org/glade-2.0.dtd&quot;/</A>&gt;

&lt;!-- Elide some default attributes that the DTD introduces --&gt;
&lt;xsl:template match=&quot;@context[.='no']&quot;/&gt;
&lt;xsl:template match=&quot;@translatable[.='no']&quot;/&gt;
&lt;xsl:template match=&quot;@after[.='no']&quot;/&gt;

&lt;!-- Preserve attributes --&gt;
&lt;xsl:template match=&quot;@*&quot;&gt;
   &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- Copy --&gt;
&lt;xsl:template match=&quot;*&quot;&gt;
   &lt;xsl:choose&gt;
     &lt;!-- Drop empty label patterns (from glade-3) which kill markup  
etc. --&gt;
     &lt;xsl:when test=&quot;name()='property' and @name='pattern' and  
not(text()) and parent::node()[name()='widget' and @class='GtkLabel']&quot;/
&gt;<i> 
</I>     &lt;xsl:otherwise&gt;
       &lt;xsl:copy&gt;
         &lt;xsl:apply-templates select=&quot;@*|node()&quot;/&gt;
       &lt;/xsl:copy&gt;
     &lt;/xsl:otherwise&gt;
   &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;/xsl:transform&gt;

HTH,

Ali.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001216.html">[Glade-devel] ( libglade ) Small issue with Gtk2::GladeXML and
 glade-3 ... text markup not working
</A></li>
	<LI>Next message: <A HREF="001218.html">[Glade-devel] ( libglade ) Small issue with Gtk2::GladeXML and
	glade-3 ... text markup not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1217">[ date ]</a>
              <a href="thread.html#1217">[ thread ]</a>
              <a href="subject.html#1217">[ subject ]</a>
              <a href="author.html#1217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-devel">More information about the Glade-devel
mailing list</a><br>
</body></html>
