<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] Hello Menu!!!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-devel%40lists.ximian.com?Subject=%5BGlade-devel%5D%20Hello%20Menu%21%21%21&In-Reply-To=435D022D.5040007%40gnome.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001094.html">
   <LINK REL="Next"  HREF="001096.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] Hello Menu!!!</H1>
    <B>Juan Pablo Ugarte</B> 
    <A HREF="mailto:glade-devel%40lists.ximian.com?Subject=%5BGlade-devel%5D%20Hello%20Menu%21%21%21&In-Reply-To=435D022D.5040007%40gnome.org"
       TITLE="[Glade-devel] Hello Menu!!!">xjuan_gq_nu at yahoo.com.ar
       </A><BR>
    <I>Thu Oct 27 16:01:22 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001094.html">[Glade-devel] Hello Menu!!!
</A></li>
        <LI>Next message: <A HREF="001096.html">[Glade-devel] Hello Menu!!!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1095">[ date ]</a>
              <a href="thread.html#1095">[ thread ]</a>
              <a href="subject.html#1095">[ subject ]</a>
              <a href="author.html#1095">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone...
This patch should add full load/save menu support while maintaining full
compatibility with glade-2, at least that's the idea :)

libglade assumes every path is relative to the .glade file, in fact
if you utilize glade_xml_new_from_buffer(), libglade will fail to load
pixmaps since path is NULL.
So I think setting the current directory to the project directory and
managing every file as relative should be enough for now.

It is memory leak proof.
Memprof is not working with glade (I use debian unstable)
So I have to check for every pixbuf created be destroyed using a
g_object_weak_ref in glade_property_class_make_gvalue_from_string()
And it seems to work ok.

greets

Juan Pablo

PD:

2005-10-27  Juan Pablo Ugarte &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/glade-devel">juanpablougarte at gmail.com</A>&gt;

* src/glade-app.c: glade_app_set_project() Sets the
  current/working directory to the project's directory.

* src/glade-builtins.c: Added glade_standard_boolean_spec().

* src/glade-editor-property.c: New Glade Editor Property Class
  GladeEPropPixbuf. (GdkPixbuf properties)

* src/glade-gtk.c: GtkMenuBar Load/Save Support.
  GtkImage loading fixes. glade_gtk_image_set_icon_name().
  GtkLabel added glade_gtk_label_set_label().

* src/glade-project-window.c: Added About icon.

* src/glade-project.c: glade_project_new_from_interface() make
  project's path always absolute.

* src/glade-property-class.c: Added pixbuf property support in
  glade_property_class_make_string_from_gvalue() and
  glade_property_class_make_gvalue_from_string().

* src/glade-property.c: Added pixbuf property support in
  glade_property_set_va_list() and glade_property_get_va_list().

* widgets/gtk+.xml: New classes. GtkMenuItem GtkCheckMenuItem
  GtkImageMenuItem and GtkSeparatorMenuItem.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: menu_support.patch.gz
Type: application/x-gzip
Size: 7221 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/glade-devel/attachments/20051027/f37070de/menu_support.patch.gz">http://lists.ximian.com/pipermail/glade-devel/attachments/20051027/f37070de/menu_support.patch.gz</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001094.html">[Glade-devel] Hello Menu!!!
</A></li>
	<LI>Next message: <A HREF="001096.html">[Glade-devel] Hello Menu!!!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1095">[ date ]</a>
              <a href="thread.html#1095">[ thread ]</a>
              <a href="subject.html#1095">[ subject ]</a>
              <a href="author.html#1095">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-devel">More information about the Glade-devel
mailing list</a><br>
</body></html>
