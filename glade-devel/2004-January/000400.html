<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] [glade3, patch] load library module before
 calling *_get_type ()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tommi.komulainen%40nokia.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000412.html">
   <LINK REL="Next"  HREF="000402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] [glade3, patch] load library module before
 calling *_get_type ()
   </H1>
    <B>Tommi Komulainen
    </B> 
    <A HREF="mailto:tommi.komulainen%40nokia.com"
       TITLE="[Glade-devel] [glade3, patch] load library module before
 calling *_get_type ()">tommi.komulainen@nokia.com
       </A><BR>
    <I>Fri, 09 Jan 2004 15:22:03 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="000412.html">[Glade-devel] [glade3, patch] load library module before calling *_get_type ()
</A></li>
        <LI> Next message: <A HREF="000402.html">[Glade-devel] [glade3, patch] load library module before calling *_get_type ()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#400">[ date ]</a>
              <a href="thread.html#400">[ thread ]</a>
              <a href="subject.html#400">[ subject ]</a>
              <a href="author.html#400">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2004-01-08 at 22:45, ext Joaquin Cuenca Abela wrote:

[the &quot;libglade&quot; + foo -library instead of &quot;libfoo&quot;]

&gt;<i> That's the library that it's loaded by g_module_open in the code that you
</I>&gt;<i> move with your patch, and it's unrelated to the library that contains the
</I>&gt;<i> real Foo widget.
</I>
Is it really unrelated?  It's using the widgets in the widget library
and thus needs to be linked with it, doesn't it?


&gt;<i> As you see, there's a missing piece, and it's the code that loads the
</I>&gt;<i> library that contains the Foo widget, as you need it to call the
</I>&gt;<i> foo_get_type function. That is, AFAIR, the only missing thing to make the
</I>&gt;<i> plugable widgets really work.
</I>
Hmm.. but the code that loads the library is already there, in gmodule. 
Let me try to explain.  If you don't need any wrapper code, you can just
load the library directly like you said (assuming &quot;gnomeui-2&quot; for
example - let g_module handle the prefixes and such.)

In case you do need the wrapper, you simply load the wrapper library
instead (&quot;gladegnomeui-2&quot; for example.)  Since the wrapper must depend
on the real widget library it gets automatically loaded as well in the
process.

In essence the whole module loading could actually be as simple as the
following (unless I'm missing some fundamental reason for constructing a
strictly formatted library name - I think it's just unnecessary.) 
&quot;library&quot; is verbatim the attribute value, error checking and all
ignored for brevity:

module = g_module_load (g_module_build_path (MODULES, library));
if (!module)
	module = g_module_load (g_module_build_path (NULL, library));


At least that's how I've understood g_module_open works, please correct
me if I'm wrong.


-- 
Tommi Komulainen &lt;<A HREF="mailto:tommi.komulainen@nokia.com">tommi.komulainen@nokia.com</A>&gt;

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000412.html">[Glade-devel] [glade3, patch] load library module before calling *_get_type ()
</A></li>
	<LI> Next message: <A HREF="000402.html">[Glade-devel] [glade3, patch] load library module before calling *_get_type ()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#400">[ date ]</a>
              <a href="thread.html#400">[ thread ]</a>
              <a href="subject.html#400">[ subject ]</a>
              <a href="author.html#400">[ author ]</a>
         </LI>
       </UL>
</body></html>
