<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] libglade usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:taf2%40lehigh.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000452.html">
   <LINK REL="Next"  HREF="000379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] libglade usage
   </H1>
    <B>todd
    </B> 
    <A HREF="mailto:taf2%40lehigh.edu"
       TITLE="[Glade-devel] libglade usage">taf2@lehigh.edu
       </A><BR>
    <I>Thu, 08 Jan 2004 19:31:18 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="000452.html">[Glade-devel] libglade usage
</A></li>
        <LI> Next message: <A HREF="000379.html">[Glade-devel] RE: Embedding glade in other applications (like IDE )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#397">[ date ]</a>
              <a href="thread.html#397">[ thread ]</a>
              <a href="subject.html#397">[ subject ]</a>
              <a href="author.html#397">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.
--------------030009000109030009010703
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

James Henstridge wrote:

&gt;<i> On 28/12/2003 4:58 AM, Todd Fisher wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I have a very simple libglade application.  I used glade-2.0.1 to 
</I>&gt;&gt;<i> generate a
</I>&gt;&gt;<i> .glade file which contains a gtkWindow and a GtkButton nothing else.  
</I>&gt;&gt;<i> It defines
</I>&gt;&gt;<i> two signal handlers.   A  realize and destroy signal for the 
</I>&gt;&gt;<i> GtkWindow. when i use the following as my main applicaion the realize 
</I>&gt;&gt;<i> signal handler is not
</I>&gt;&gt;<i> called.
</I>&gt;&gt;<i> #include &lt;gtk/gtk.h&gt;
</I>&gt;&gt;<i> #include &lt;glade/glade.h&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> void realize( GtkWidget *widget, gpointer null )
</I>&gt;&gt;<i> {
</I>&gt;&gt;<i>    printf( &quot;hello\n&quot; );
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i> int main( int argc, char **argv )
</I>&gt;&gt;<i> {
</I>&gt;&gt;<i>    GladeXML *xml;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    gtk_init( &amp;argc, &amp;argv );
</I>&gt;&gt;<i>    /* load the interface */
</I>&gt;&gt;<i>    xml = glade_xml_new( &quot;gui.glade&quot;, NULL, NULL );
</I>&gt;&gt;<i>    if( xml == NULL ){
</I>&gt;&gt;<i>       g_error( &quot;Failed to initialize glade_xml file&quot; );
</I>&gt;&gt;<i>        return 1;
</I>&gt;&gt;<i>      }
</I>&gt;&gt;<i>    /* connect the signals in the interface */
</I>&gt;&gt;<i>    glade_xml_signal_autoconnect( xml );
</I>&gt;&gt;<i>                                                                                                                    
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    /* start the event loop */
</I>&gt;&gt;<i>    gtk_main();
</I>&gt;&gt;<i>    return 0;
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i> compiling it with gcc -Wall -g `pkg-config libglade-2.0 --cflags 
</I>&gt;&gt;<i> --libs` testapp.c
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I expect to run the program see my window pop up and see hello 
</I>&gt;&gt;<i> printed at the terminal.
</I>&gt;&gt;<i> I get no Gtk Warnings or Errors instead.  I think its important to 
</I>&gt;&gt;<i> have this realize signal
</I>&gt;&gt;<i> handler called because I want to initialize my application here.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> any ideas?  Am i misuing the api? is this a bug in libglade?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've tested this with the lastest unstable release of libglade and a 
</I>&gt;&gt;<i> fairly recent cvs version and
</I>&gt;&gt;<i> noticed the same behavoir.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Libglade's autoconnect function looks up function names in the global 
</I>&gt;<i> symbol table.  By default, functions in the main executable do not 
</I>&gt;<i> appear there, so would not normally be visible.
</I>&gt;<i>
</I>&gt;<i> The flags returned by &quot;pkg-config --libs libglade-2.0&quot; should include 
</I>&gt;<i> a linker flag to export the apps symbols for use by things like 
</I>&gt;<i> autoconnect() (for linux systems, the flag is -Wl,--export-dynamic).
</I>&gt;<i>
</I>&gt;<i> If that all looks okay, check to see whether the handler names match 
</I>&gt;<i> up.  Is the signal handler name (as opposed to signal name) for your 
</I>&gt;<i> &quot;realize&quot; signal really &quot;realize&quot;?  (and not &quot;on_window1_realize&quot; or 
</I>&gt;<i> similar?).
</I>&gt;<i>
</I>&gt;<i> James.
</I>&gt;<i>
</I>James,
the problem is in libglade because of the order in which it creates 
widgets and connects signals the realize signal is sent before it is
connected.  The problem is easily solved as I showed above.

-todd

--------------030009000109030009010703
Content-Type: text/x-vcard; charset=utf8;
 name=&quot;taf2.vcf&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename=&quot;taf2.vcf&quot;

begin:vcard
fn:Todd Fisher
n:Fisher;Todd
email;internet:<A HREF="mailto:taf2@lehigh.edu">taf2@lehigh.edu</A>
x-mozilla-html:FALSE
version:2.1
end:vcard


--------------030009000109030009010703--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000452.html">[Glade-devel] libglade usage
</A></li>
	<LI> Next message: <A HREF="000379.html">[Glade-devel] RE: Embedding glade in other applications (like IDE )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#397">[ date ]</a>
              <a href="thread.html#397">[ thread ]</a>
              <a href="subject.html#397">[ subject ]</a>
              <a href="author.html#397">[ author ]</a>
         </LI>
       </UL>
</body></html>
