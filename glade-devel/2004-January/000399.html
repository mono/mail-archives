<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] libglade usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:james%40daa.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000398.html">
   <LINK REL="Next"  HREF="000408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] libglade usage
   </H1>
    <B>James Henstridge
    </B> 
    <A HREF="mailto:james%40daa.com.au"
       TITLE="[Glade-devel] libglade usage">james@daa.com.au
       </A><BR>
    <I>Fri, 09 Jan 2004 15:08:17 +0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="000398.html">[Glade-devel] libglade usage
</A></li>
        <LI> Next message: <A HREF="000408.html">[Glade-devel] libglade usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#399">[ date ]</a>
              <a href="thread.html#399">[ thread ]</a>
              <a href="subject.html#399">[ subject ]</a>
              <a href="author.html#399">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/01/2004 10:13 PM, Damon Chaplin wrote:

&gt;<i>On Thu, 2004-01-08 at 03:41, James Henstridge wrote:
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>Libglade's autoconnect function looks up function names in the global 
</I>&gt;&gt;<i>symbol table.  By default, functions in the main executable do not 
</I>&gt;&gt;<i>appear there, so would not normally be visible.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>The flags returned by &quot;pkg-config --libs libglade-2.0&quot; should include a 
</I>&gt;&gt;<i>linker flag to export the apps symbols for use by things like 
</I>&gt;&gt;<i>autoconnect() (for linux systems, the flag is -Wl,--export-dynamic).
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Is the autoconnect stuff known to work across all platforms now? I seem
</I>&gt;<i>to remember it was uncertain initially.
</I>&gt;<i>(I know we didn't use it in Evolution, but I can't remember why.)
</I>&gt;<i>  
</I>&gt;<i>
</I>I don't know if it works on all platforms.  I know it works on a fair 
number of them though (possibly all the interesting unix platforms, 
even).  Python uses this same feature (exporting the main app's symbols) 
to handle extension modules, so if Python works on the system, libglade 
will probably do so as well.

The one system I am not sure about is Windows.  Shared libraries are 
handled quite differently there, so I don't know the answer (I am sure 
someone does though ...).

&gt;<i>If it is reliable, are the other glade_xml_connect_* functions really
</I>&gt;<i>necessary any more? Why would you use them? I think this needs to be
</I>&gt;<i>documented better.
</I>&gt;<i>  
</I>&gt;<i>
</I>I know some people don't like the idea of libglade connecting up signals 
to arbitrary global functions in their apps.  I remember someone talking 
about loading semi-trusted .glade files off the network, and only 
wanting to allow connecting a small number of signal handlers.  Of 
course this use case isn't a very good one: loading untrusted data with 
libglade is a recipe for disaster -- libglade can instantiate arbitrary 
GObjects and set pretty much any property on those objects.

&gt;<i>I think Todd's problem is the common one where libglade has already
</I>&gt;<i>shown the widget before the signal handlers are connected, so you never
</I>&gt;<i>get the signal. The solution is to set the window's 'Visible' property
</I>&gt;<i>to FALSE in glade, and call gtk_widget_show() on it after calling
</I>&gt;<i>glade_xml_signal_autoconnect(). (But why not just call a function to
</I>&gt;<i>initialize the window instead?)
</I>&gt;<i>  
</I>&gt;<i>
</I>Yep, that is probably what his problem was.  Realize isn't really that 
great a hook for random initialisation though.  If you are using it for 
one-time initialisation tasks, then your assumptions might get broken 
once screen migration becomes popular (where the window is hidden and 
unrealized, set to use a different display and realized/shown again).

James.

-- 
Email: <A HREF="mailto:james@daa.com.au">james@daa.com.au</A>
WWW:   <A HREF="http://www.daa.com.au/~james/">http://www.daa.com.au/~james/</A>




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000398.html">[Glade-devel] libglade usage
</A></li>
	<LI> Next message: <A HREF="000408.html">[Glade-devel] libglade usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#399">[ date ]</a>
              <a href="thread.html#399">[ thread ]</a>
              <a href="subject.html#399">[ subject ]</a>
              <a href="author.html#399">[ author ]</a>
         </LI>
       </UL>
</body></html>
