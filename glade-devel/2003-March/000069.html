<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] [patch, glade3] glade_util_flash_message()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:e98cuenc%40free.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000068.html">
   <LINK REL="Next"  HREF="000070.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] [patch, glade3] glade_util_flash_message()
   </H1>
    <B>Joaquin Cuenca Abela
    </B> 
    <A HREF="mailto:e98cuenc%40free.fr"
       TITLE="[Glade-devel] [patch, glade3] glade_util_flash_message()">e98cuenc@free.fr
       </A><BR>
    <I>Sat, 29 Mar 2003 14:07:48 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="000068.html">[Glade-devel] [patch, glade3] glade_util_flash_message()
</A></li>
        <LI> Next message: <A HREF="000070.html">[Glade-devel] [patch, glade3] glade_util_flash_message()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69">[ date ]</a>
              <a href="thread.html#69">[ thread ]</a>
              <a href="subject.html#69">[ subject ]</a>
              <a href="author.html#69">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Paolo wrote:
&gt;<i> 
</I>&gt;<i> Hi!
</I>&gt;<i> 
</I>&gt;<i> The patch attached implements a utility function to display 
</I>&gt;<i> messages in the statusbar and uses it to display the &quot;Project 
</I>&gt;<i> Saved&quot; message.
</I>&gt;<i> 
</I>&gt;<i> Note: I'm not sure that this patch is ready for inclusion, so 
</I>&gt;<i> don't apply it unless you reviewed it carefully and you are 
</I>&gt;<i> confident it's ok.
</I>&gt;<i> 
</I>&gt;<i> I'm sending it out for review and maybe to get some advices, 
</I>&gt;<i> because I have at least a couple of doubts:
</I>&gt;<i> 
</I>&gt;<i> First thing, I'm not sure if I got the gtk_timeout behaviur right.
</I>&gt;<i> 
</I>&gt;<i> Second, I'm quite puzzled by this whole context_id thing used 
</I>&gt;<i> for the statusbar. I thought that assigning a different 
</I>&gt;<i> context id for each project you would get the following 
</I>&gt;<i> beahviour: suppose you save a project, a &quot;Project Saved&quot; 
</I>&gt;<i> message is displayed; then you change project (before the 
</I>&gt;<i> message is removed by the timeout); I thought that at this 
</I>&gt;<i> point the message would be hidden because in the statusbar is 
</I>&gt;<i> disaplyed the message stack relative to the current project. 
</I>&gt;<i> This does not happen, so now I wonder why I have to set up 
</I>&gt;<i> different context_ids when the resulting behavoiur is the 
</I>&gt;<i> same as when you simply pass &quot;1&quot; every time you need a context_id.
</I>
Ok, I'm sorry I didn't explained why I removed the &quot;1&quot; as context_id,
and used a real context_id as returned by gtk_statusbar_get_context_id.

Nowhere in the public documentation says that you can use a context_id
before you've allocated it with get_context_id, so just using &quot;1&quot; as
context_id was undefined behaviour.  I also skimmed a bit the source of
GtkStatusBar and I didn't say anything that imply that you can just use
&quot;1&quot;, so I put a real context_id.

Now, what's the purpose of context id?

We have several &quot;users&quot; of the status bar.  The menu wants to add
messages to the status bar, events add messages (as &quot;project saved&quot;),
etc.

Think about the following use-case:

* The user is over a menu item: We pop the latest message in the status
bar that came from the menu, and we push a new message (say &quot;Menu Item
1&quot;)
* A event happens (say auto-save): pop latest message from events, and
push a new message (say &quot;Project auto-saved&quot;).  Arm a timer to pop the
message after 2 seconds.
* The user moves to another menu item: pop latest message from the menu,
and push a new message (say &quot;Menu item 2&quot;).
* The timer fires, and it pops the latest message from events.

If you don't have a way to say where the message comes from (events or
menu, in this example), you end having:

Menu Item 1 -&gt; Project auto-saved -&gt; Menu Item 2 -&gt; Nothing

The timer would remove &quot;Menu Item 2&quot; when it should just remove &quot;Project
auto-saved&quot;.

You should also take in account that the context id doesn't have any
effect on the message displayed.  To show the messages the whole thing
just looks like a stack.  The context id it's just there to help you
push or pop the right kind of message.

I will take later a deeper look at your patch.

Thank you for your help!

Cheers,



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000068.html">[Glade-devel] [patch, glade3] glade_util_flash_message()
</A></li>
	<LI> Next message: <A HREF="000070.html">[Glade-devel] [patch, glade3] glade_util_flash_message()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69">[ date ]</a>
              <a href="thread.html#69">[ thread ]</a>
              <a href="subject.html#69">[ subject ]</a>
              <a href="author.html#69">[ author ]</a>
         </LI>
       </UL>
</body></html>
