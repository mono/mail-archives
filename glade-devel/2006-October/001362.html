<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] Draft Proposal: Supporting widgets written in	other languages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-devel%40lists.ximian.com?Subject=%5BGlade-devel%5D%20Draft%20Proposal%3A%20Supporting%20widgets%20written%20in%0A%09other%20languages&In-Reply-To=45291E5B.9020105%40tamu.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001355.html">
   <LINK REL="Next"  HREF="001363.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] Draft Proposal: Supporting widgets written in	other languages</H1>
    <B>Tristan Van Berkom</B> 
    <A HREF="mailto:glade-devel%40lists.ximian.com?Subject=%5BGlade-devel%5D%20Draft%20Proposal%3A%20Supporting%20widgets%20written%20in%0A%09other%20languages&In-Reply-To=45291E5B.9020105%40tamu.edu"
       TITLE="[Glade-devel] Draft Proposal: Supporting widgets written in	other languages">tristan.van.berkom at gmail.com
       </A><BR>
    <I>Sun Oct  8 18:43:10 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="001355.html">[Glade-devel] Glade 3 architechtural ideas
</A></li>
        <LI>Next message: <A HREF="001363.html">[Glade-devel] Draft Proposal: Supporting widgets written in	other languages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1362">[ date ]</a>
              <a href="thread.html#1362">[ thread ]</a>
              <a href="subject.html#1362">[ subject ]</a>
              <a href="author.html#1362">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yevgen Muntyan wrote:

&gt;<i> Vincent Geddes wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I agree that it would be totally unnecessary to have an adaptor for each
</I>&gt;&gt;<i> widget. I am sorry if I made that suggestion somehow.
</I>&gt;<i>
</I>&gt;<i> No you did not. I just wanted to make sure that &quot;wast amount&quot; of
</I>&gt;<i> everything and what I heard on irc wasn't what I thought it was :)
</I>&gt;<i> Sorry for being harsh, it wasn't meant to offend you or something.
</I>&gt;<i>
</I>&gt;&gt;<i> By using virtual
</I>&gt;&gt;<i> methods and generalization, we would not need to write an adaptor for
</I>&gt;&gt;<i> each and every widget. For example, a GtkBin widget could simply use a
</I>&gt;&gt;<i> GtkContainerAdaptor. This same GtkContainerAdaptor would be a subclass
</I>&gt;&gt;<i> of GtkWidgetAdaptor, and so on...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This object orientated approach would ensure that no code would need to
</I>&gt;&gt;<i> be duplicated or written unneccessarily. Hopefully this would ease your
</I>&gt;&gt;<i> concerns?
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i>
</I>&gt;<i> &quot;no code would need to be duplicated or written unneccessarily&quot;
</I>&gt;<i> sounds great to me :)
</I>&gt;<i> I can't comment on real technical stuff like GtkWidgetAdaptor
</I>&gt;<i> and GtkContainerAdaptor vs. AnyThingYouCanImagine, because,
</I>&gt;<i> as I said, I don't know what exactly is needed. I do agree that
</I>&gt;<i> something is needed :)
</I>&gt;<i>
</I>&gt;&gt;<i> This &quot;Adaptor&quot; idea is really just a refactoring of the code in
</I>&gt;&gt;<i> `glade-gtk.c' into a more object-orientated form. I don't see how else
</I>&gt;&gt;<i> we can support multiple languages in sane way.
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i>
</I>&gt;<i> When I was talking about python and GObject, I missed an
</I>&gt;<i> important detail: pygtk until 2.10 did not quite support deep
</I>&gt;<i> derivation of GObject. Namely, if you had class CClass in C,
</I>&gt;<i> then subclassed it in python with PythonClass, and then
</I>&gt;<i> subclassed it again with PythonChild, it was impossible to
</I>&gt;<i> call CClass virtual methods of PythonChild instance. So,
</I>&gt;<i> for instance if we simply require binding to provide GType,
</I>&gt;<i> python users (with pygtk &lt; 2.10) won't be able to subclass
</I>&gt;<i> PythonBindingThing. E.g. GtkContainerAdaptor could not
</I>&gt;<i> be written in python (as a subclass of GtkWidgetAdaptor
</I>&gt;<i> written in python).
</I>&gt;<i> Next, if I recall correctly my fightings with Murray Cumming,
</I>&gt;<i> C++ does not care about other languages at all, and you can't
</I>&gt;<i> create an instance of C++ type in C code (namely, g_object_new
</I>&gt;<i> won't work quite right). I might be wrong, but I believe it's very
</I>&gt;<i> possible in other languages too.
</I>&gt;<i> So, GObject is good, and we should use it when possible, but we
</I>&gt;<i> need to check bindings to see what they can. Like, in this example,
</I>&gt;<i> it might be not enough to have GType, maybe we need a virtual
</I>&gt;<i> method on Loader (or Catalog or Plugin, whatever) which would
</I>&gt;<i> create an instance given its type name. We can assume that glade
</I>&gt;<i> module is written in C, and we can assume that the module can
</I>&gt;<i> call any native code and work with native types and stuff; but we
</I>&gt;<i> can't assume the module will provide a real bridge from glade to
</I>&gt;<i> binding (it will, in one way, but that way is opposite to what glade
</I>&gt;<i> needs :) ).
</I>

Thats a good point to consider - maybe its at least possible for a
&quot;plugin bridge&quot; to get at the initialized type in the C++/python plugin
and syntheticly replicate the type in the GObject type-system in
the libgladeui memory space ?

My thoughts on this thread so far are:
   o Using an &quot;adapter class&quot; would definitly help by deffering all the
      inheritance mechanisms in glade-widget-class/glade-property-class back
      into gtk+/gobject

   o Using an adapter class in the current codebase would probably involve
      using an adapter for every widget that requires at least one 
callback or
      customized properties, it would in turn make as much sence to use 
adapter
      classes for properties as well as widgets... while this might be a 
clean design,
      in C it translates to _alot_ of unnescisary boiler plate code - so 
if the plugin were
      to be written in C - this would be a little annoying (even if you 
only need to
      override a single vfunc or constant in the parent class - you need 
to initialize
      the type manually).

   o Maybe this approach works nicely in python, I think gazpacho uses 
this adapter
      class technique - so, if it would benefit everyone - could the 
gtk+/gnome library
      plugins be written in python - even if the GTypes come from a C 
library ?
      another question in this vain is - could that be done while 
maintaining the
      portability of Glade on all gtk+ supported platforms ?

Cheers,
                                        -Tristan

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001355.html">[Glade-devel] Glade 3 architechtural ideas
</A></li>
	<LI>Next message: <A HREF="001363.html">[Glade-devel] Draft Proposal: Supporting widgets written in	other languages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1362">[ date ]</a>
              <a href="thread.html#1362">[ thread ]</a>
              <a href="subject.html#1362">[ subject ]</a>
              <a href="author.html#1362">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-devel">More information about the Glade-devel
mailing list</a><br>
</body></html>
