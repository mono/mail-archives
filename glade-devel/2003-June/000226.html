<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] Commit -- fix selection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:otaylor%40redhat.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000225.html">
   <LINK REL="Next"  HREF="000227.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] Commit -- fix selection
   </H1>
    <B>Owen Taylor
    </B> 
    <A HREF="mailto:otaylor%40redhat.com"
       TITLE="[Glade-devel] Commit -- fix selection">otaylor@redhat.com
       </A><BR>
    <I>23 Jun 2003 16:45:34 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="000225.html">[Glade-devel] Commit -- fix selection
</A></li>
        <LI> Next message: <A HREF="000227.html">[Glade-devel] I'm back.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#226">[ date ]</a>
              <a href="thread.html#226">[ thread ]</a>
              <a href="subject.html#226">[ subject ]</a>
              <a href="author.html#226">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2003-06-23 at 16:39, Joaquin Cuenca Abela wrote:
&gt;<i> Hi!
</I>&gt;<i> 
</I>&gt;<i> Owen wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On Fri, 2003-06-20 at 03:08, Joaquin Cuenca Abela wrote:
</I>&gt;<i> &gt; &gt; Just a little heads up.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I've changed how selection works.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; What was broken?
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; First, the handlers that draw the nodes:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; There were two version, one for GladeWidget, and one for 
</I>&gt;<i> &gt; &gt; GladePlaceholders. The GladeWidget one was using the 
</I>&gt;<i> &gt; GdkWindow of the 
</I>&gt;<i> &gt; &gt; widget directly, instead of using the double buffered window.  No 
</I>&gt;<i> &gt; &gt; wonder it didn't work correctly, needing the &quot;event_after&quot; hack etc.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Probably not important, but this doesn't make sense... during 
</I>&gt;<i> &gt; expose handling, the double buffered pixmap is all that is 
</I>&gt;<i> &gt; available ...
</I>&gt;<i> 
</I>&gt;<i> Then, I don't understand how all that works...
</I>&gt;<i> 
</I>&gt;<i> Let's see, I though that if you have an expose handler, you should draw
</I>&gt;<i> on the expose-&gt;window, which is the window that gdk creates just before
</I>&gt;<i> the expose event (the double buffered one).
</I>&gt;<i> 
</I>&gt;<i> The code was instead drawing on the widget-&gt;window (or on the window of
</I>&gt;<i> one ancestor).  This is the window that I called &quot;the GdkWindow of the
</I>&gt;<i> widget&quot;.  We were able to saw the nodes, just because we were not taking
</I>&gt;<i> in account the damaged region, and we were drawing at each expose the
</I>&gt;<i> whole rectangle with the nodes.  The damaged region will be redrawed
</I>&gt;<i> when the expose propagation ends with the double buffer (that we didn't
</I>&gt;<i> touch), and thus we saw the nodes everywhere except in the damaged
</I>&gt;<i> region.
</I>&gt;<i> 
</I>&gt;<i> So, am I on crack?  It makes sense for me, but I believe you much more
</I>&gt;<i> than myself on anything that concerns gtk.	
</I>
Likely what's going on is that you have a widget like GtkEntry where
the main drawing area is in a subwindow of widget-&gt;window.

Then when you get an expose on event-&gt;area, you were drawing on
widget-&gt;window with IncludeInferiors set in the GC, which *did*
draw on the real X window event-&gt;area instead of the backing pixmap
(since GDK can't intercept IncludeInferiors drawing) and then
the backing pixmap when flushed wrote over your nodes.

Regards,
					Owen



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000225.html">[Glade-devel] Commit -- fix selection
</A></li>
	<LI> Next message: <A HREF="000227.html">[Glade-devel] I'm back.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#226">[ date ]</a>
              <a href="thread.html#226">[ thread ]</a>
              <a href="subject.html#226">[ subject ]</a>
              <a href="author.html#226">[ author ]</a>
         </LI>
       </UL>
</body></html>
