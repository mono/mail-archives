<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] glade-2.0.0: win32 patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:v.caron%40zerodeux.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000205.html">
   <LINK REL="Next"  HREF="000209.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] glade-2.0.0: win32 patch
   </H1>
    <B>Vincent Caron
    </B> 
    <A HREF="mailto:v.caron%40zerodeux.net"
       TITLE="[Glade-devel] glade-2.0.0: win32 patch">v.caron@zerodeux.net
       </A><BR>
    <I>Fri, 6 Jun 2003 18:17:07 +0200 (CEST)</I>
    <P><UL>
        <LI> Previous message: <A HREF="000205.html">[Glade-devel] [PATCH/Glade-2.0.0] Re-enabling signal handler's &quot;user_data&quot;
 parameter
</A></li>
        <LI> Next message: <A HREF="000209.html">[Glade-devel] GladeCommand
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#206">[ date ]</a>
              <a href="thread.html#206">[ thread ]</a>
              <a href="subject.html#206">[ subject ]</a>
              <a href="author.html#206">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>------=_20030606181707_68967
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;
Content-Transfer-Encoding: 8bit

Hello,

attached a simple patch to help win32 (and maybe other hostile places) compilation.

* glade/main.c

  - shielded &lt;unistd.h&gt; inclusion against _WIN32
    (was already done in other places)

* glade/utils.c

  - replaced diropen() with more portable glib's g_dir_open()


BTW, where is glade 2.x CVS ? I couldn't find a matching module on cvs.gnome.org.
Thanks !

------=_20030606181707_68967
Content-Type: application/octet-stream; name=&quot;glade2_diropen.patch&quot;
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=&quot;glade2_diropen.patch&quot;

T25seSBpbiBnbGFkZTI6IGNvbmZpZy5oDQpPbmx5IGluIGdsYWRlMjogZGVidWcNCmRpZmYgLWNy
IGdsYWRlLTIuMC4wL2dsYWRlL21haW4uYyBnbGFkZTIvZ2xhZGUvbWFpbi5jDQoqKiogZ2xhZGUt
Mi4wLjAvZ2xhZGUvbWFpbi5jCVdlZCBBcHIgIDIgMTc6MDE6MDYgMjAwMw0KLS0tIGdsYWRlMi9n
bGFkZS9tYWluLmMJVGh1IEp1biAgNSAyMDo0NDowMiAyMDAzDQoqKioqKioqKioqKioqKioNCioq
KiAyMywyOSAqKioqDQotLS0gMjMsMzEgLS0tLQ0KICAjaW5jbHVkZSA8c3RyaW5nLmg+DQogICNp
bmNsdWRlIDxzeXMvdHlwZXMuaD4NCiAgI2luY2x1ZGUgPHN5cy9zdGF0Lmg+DQorICNpZm5kZWYg
X1dJTjMyDQogICNpbmNsdWRlIDx1bmlzdGQuaD4NCisgI2VuZGlmDQogIA0KICAjaW5jbHVkZSA8
Z3RrL2d0a21haW4uaD4NCiAgI2luY2x1ZGUgPGd0ay9ndGtyYy5oPg0KZGlmZiAtY3IgZ2xhZGUt
Mi4wLjAvZ2xhZGUvdXRpbHMuYyBnbGFkZTIvZ2xhZGUvdXRpbHMuYw0KKioqIGdsYWRlLTIuMC4w
L2dsYWRlL3V0aWxzLmMJV2VkIEFwciAgMiAxNjo1MzoyOCAyMDAzDQotLS0gZ2xhZGUyL2dsYWRl
L3V0aWxzLmMJRnJpIEp1biAgNiAxODoxNToyMiAyMDAzDQoqKioqKioqKioqKioqKioNCioqKiAx
NjU1LDE2NjIgKioqKg0KICB7DQogICAgR2xhZGVFcnJvciAqZXJyb3IgPSBOVUxMOw0KICAgIGdj
aGFyICpwcm9qZWN0c19kaXIsICpwcm9qZWN0X3N0cmluZywgKnN1YmRpcjsNCiEgICBESVIgKmRp
cmVjdG9yeTsNCiEgICBzdHJ1Y3QgZGlyZW50ICplbnRyeTsNCiAgICBnaW50IHByb2plY3RfbnVt
LCBtYXhfcHJvamVjdF9udW0sIHByb2plY3Rfc3RyaW5nX2xlbjsNCiAgICBnaW50IG51bV9tYXRj
aGVkLCBjaGFyc19tYXRjaGVkOw0KICANCi0tLSAxNjU1LDE2NjMgLS0tLQ0KICB7DQogICAgR2xh
ZGVFcnJvciAqZXJyb3IgPSBOVUxMOw0KICAgIGdjaGFyICpwcm9qZWN0c19kaXIsICpwcm9qZWN0
X3N0cmluZywgKnN1YmRpcjsNCiEgICBHRGlyICpkaXJlY3Rvcnk7DQohICAgY29uc3QgZ2NoYXIg
KmVudHJ5Ow0KISAgIEdFcnJvciAqZGlyX2Vycm9yID0gTlVMTDsNCiAgICBnaW50IHByb2plY3Rf
bnVtLCBtYXhfcHJvamVjdF9udW0sIHByb2plY3Rfc3RyaW5nX2xlbjsNCiAgICBnaW50IG51bV9t
YXRjaGVkLCBjaGFyc19tYXRjaGVkOw0KICANCioqKioqKioqKioqKioqKg0KKioqIDE2NjcsMTY3
OCAqKioqDQogICAgICAgc3ViZGlyZWN0b3JpZXMgbmFtZWQgJ3Byb2plY3RYWCcsIGFuZCBnZXQg
dGhlIGhpZ2hlc3QgbnVtYmVyIHVzZWQgc28NCiAgICAgICBmYXIuICovDQogICAgbWF4X3Byb2pl
Y3RfbnVtID0gMDsNCiEgICBkaXJlY3RvcnkgPSBvcGVuZGlyIChwcm9qZWN0c19kaXIpOw0KICAg
IHByb2plY3Rfc3RyaW5nID0gXygicHJvamVjdCIpOw0KICAgIHByb2plY3Rfc3RyaW5nX2xlbiA9
IHN0cmxlbiAocHJvamVjdF9zdHJpbmcpOw0KICAgIGlmIChkaXJlY3RvcnkgPT0gTlVMTCkNCiAg
ICAgIHsNCiEgICAgICAgaWYgKGVycm5vICE9IEVOT0VOVCkNCiAgCXsNCiAgCSAgZXJyb3IgPSBn
bGFkZV9lcnJvcl9uZXdfc3lzdGVtIChfKCJDb3VsZG4ndCBvcGVuIGRpcmVjdG9yeTpcbiAgJXNc
biIpLA0KICAJCQkJCSAgcHJvamVjdHNfZGlyKTsNCi0tLSAxNjY4LDE2NzkgLS0tLQ0KICAgICAg
IHN1YmRpcmVjdG9yaWVzIG5hbWVkICdwcm9qZWN0WFgnLCBhbmQgZ2V0IHRoZSBoaWdoZXN0IG51
bWJlciB1c2VkIHNvDQogICAgICAgZmFyLiAqLw0KICAgIG1heF9wcm9qZWN0X251bSA9IDA7DQoh
ICAgZGlyZWN0b3J5ID0gZ19kaXJfb3BlbiAocHJvamVjdHNfZGlyLCAwLCAmZGlyX2Vycm9yKTsN
CiAgICBwcm9qZWN0X3N0cmluZyA9IF8oInByb2plY3QiKTsNCiAgICBwcm9qZWN0X3N0cmluZ19s
ZW4gPSBzdHJsZW4gKHByb2plY3Rfc3RyaW5nKTsNCiAgICBpZiAoZGlyZWN0b3J5ID09IE5VTEwp
DQogICAgICB7DQohICAgICAgIGlmIChkaXJfZXJyb3IgIT0gTlVMTCAmJiBkaXJfZXJyb3ItPmNv
ZGUgIT0gR19GSUxFX0VSUk9SX05PRU5UKQ0KICAJew0KICAJICBlcnJvciA9IGdsYWRlX2Vycm9y
X25ld19zeXN0ZW0gKF8oIkNvdWxkbid0IG9wZW4gZGlyZWN0b3J5OlxuICAlc1xuIiksDQogIAkJ
CQkJICBwcm9qZWN0c19kaXIpOw0KKioqKioqKioqKioqKioqDQoqKiogMTY4NCwxNzA4ICoqKioN
CiAgICAgIHsNCiAgICAgICAgZm9yICg7OykNCiAgCXsNCiEgCSAgZW50cnkgPSByZWFkZGlyIChk
aXJlY3RvcnkpOw0KICANCiAgCSAgaWYgKGVudHJ5ID09IE5VTEwpDQogIAkgICAgYnJlYWs7DQog
IA0KISAJICBpZiAoIXN0cm5jbXAgKGVudHJ5LT5kX25hbWUsIHByb2plY3Rfc3RyaW5nLCBwcm9q
ZWN0X3N0cmluZ19sZW4pKQ0KICAJICAgIHsNCiAgCSAgICAgIC8qIE5vdyBzZWUgaWYgaXQgaGFz
IGEgbnVtYmVyIG9uIHRoZSBlbmQuICovDQohIAkgICAgICBudW1fbWF0Y2hlZCA9IHNzY2FuZiAo
ZW50cnktPmRfbmFtZSArIHByb2plY3Rfc3RyaW5nX2xlbiwNCiAgCQkJCSAgICAiJWklbiIsICZw
cm9qZWN0X251bSwgJmNoYXJzX21hdGNoZWQpOw0KICAJICAgICAgaWYgKG51bV9tYXRjaGVkID49
IDENCiEgCQkgICYmIGNoYXJzX21hdGNoZWQgPT0gc3RybGVuIChlbnRyeS0+ZF9uYW1lKSAtIHBy
b2plY3Rfc3RyaW5nX2xlbikNCiAgCQl7DQogIAkJICBtYXhfcHJvamVjdF9udW0gPSBNQVggKG1h
eF9wcm9qZWN0X251bSwgcHJvamVjdF9udW0pOw0KICAJCX0NCiAgCSAgICB9DQogIAl9DQogIA0K
ISAgICAgICBjbG9zZWRpciAoZGlyZWN0b3J5KTsNCiAgICAgIH0NCiAgDQogICAgbWF4X3Byb2pl
Y3RfbnVtKys7DQotLS0gMTY4NSwxNzA5IC0tLS0NCiAgICAgIHsNCiAgICAgICAgZm9yICg7OykN
CiAgCXsNCiEgCSAgZW50cnkgPSBnX2Rpcl9yZWFkX25hbWUgKGRpcmVjdG9yeSk7DQogIA0KICAJ
ICBpZiAoZW50cnkgPT0gTlVMTCkNCiAgCSAgICBicmVhazsNCiAgDQohIAkgIGlmICghc3RybmNt
cCAoZW50cnksIHByb2plY3Rfc3RyaW5nLCBwcm9qZWN0X3N0cmluZ19sZW4pKQ0KICAJICAgIHsN
CiAgCSAgICAgIC8qIE5vdyBzZWUgaWYgaXQgaGFzIGEgbnVtYmVyIG9uIHRoZSBlbmQuICovDQoh
IAkgICAgICBudW1fbWF0Y2hlZCA9IHNzY2FuZiAoZW50cnkgKyBwcm9qZWN0X3N0cmluZ19sZW4s
DQogIAkJCQkgICAgIiVpJW4iLCAmcHJvamVjdF9udW0sICZjaGFyc19tYXRjaGVkKTsNCiAgCSAg
ICAgIGlmIChudW1fbWF0Y2hlZCA+PSAxDQohIAkJICAmJiBjaGFyc19tYXRjaGVkID09IHN0cmxl
biAoZW50cnkpIC0gcHJvamVjdF9zdHJpbmdfbGVuKQ0KICAJCXsNCiAgCQkgIG1heF9wcm9qZWN0
X251bSA9IE1BWCAobWF4X3Byb2plY3RfbnVtLCBwcm9qZWN0X251bSk7DQogIAkJfQ0KICAJICAg
IH0NCiAgCX0NCiAgDQohICAgICAgIGdfZGlyX2Nsb3NlIChkaXJlY3RvcnkpOw0KICAgICAgfQ0K
ICANCiAgICBtYXhfcHJvamVjdF9udW0rKzsNCk9ubHkgaW4gZ2xhZGUyOiBnbGFkZTIubmNiDQpP
bmx5IGluIGdsYWRlMjogZ2xhZGUyLnNsbg0KT25seSBpbiBnbGFkZTI6IGdsYWRlMi5zdW8NCk9u
bHkgaW4gZ2xhZGUyOiBnbGFkZTIudmNwcm9qDQo=
------=_20030606181707_68967--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000205.html">[Glade-devel] [PATCH/Glade-2.0.0] Re-enabling signal handler's &quot;user_data&quot;
 parameter
</A></li>
	<LI> Next message: <A HREF="000209.html">[Glade-devel] GladeCommand
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#206">[ date ]</a>
              <a href="thread.html#206">[ thread ]</a>
              <a href="subject.html#206">[ subject ]</a>
              <a href="author.html#206">[ author ]</a>
         </LI>
       </UL>
</body></html>
