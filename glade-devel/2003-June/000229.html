<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] I'm back.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:e98cuenc%40free.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000228.html">
   <LINK REL="Next"  HREF="000230.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] I'm back.
   </H1>
    <B>Joaquin Cuenca Abela
    </B> 
    <A HREF="mailto:e98cuenc%40free.fr"
       TITLE="[Glade-devel] I'm back.">e98cuenc@free.fr
       </A><BR>
    <I>Wed, 25 Jun 2003 00:18:40 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="000228.html">[Glade-devel] I'm back.
</A></li>
        <LI> Next message: <A HREF="000230.html">[Glade-devel] I'm back.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#229">[ date ]</a>
              <a href="thread.html#229">[ thread ]</a>
              <a href="subject.html#229">[ subject ]</a>
              <a href="author.html#229">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

Paolo wrote: 
&gt;<i> 
</I>&gt;<i> On Tue, 2003-06-24 at 04:39, Archit Baweja wrote:
</I>&gt;<i> &gt; -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> &gt; Hash: SHA1
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hey guys
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Well with school over for the summers, I've got time on my 
</I>&gt;<i> hands. So 
</I>&gt;<i> &gt; how about some thing to work on. Anything lacking in glade3 
</I>&gt;<i> that might 
</I>&gt;<i> &gt; need attention?
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> Great to have you working on glade3 again!
</I>&gt;<i> 
</I>&gt;<i> Some of the things that come to my mind are:
</I>&gt;<i> 
</I>[snip]
&gt;<i> 
</I>&gt;<i> 3 - handle the placeholder tag properly: IMHO this is biggest 
</I>&gt;<i> problem right now. I think I have understood the problem but 
</I>&gt;<i> fixing it requires quite a bit of changes and I haven't come 
</I>&gt;<i> to a working solution. Explanation of what I found follows 
</I>&gt;<i> for those who want to give it a shot (note however that maybe 
</I>&gt;<i> I'm totally wrong...) The problem is that we don't have 
</I>&gt;<i> placeholders in our main tree structure (the one made of 
</I>&gt;<i> GladeWidget-&gt;parent and
</I>&gt;<i> GladeWidget-&gt;children) so when we save a file to xml we don't generate
</I>&gt;<i> the &lt;placeholder&gt; tags. This screws various things, first of 
</I>&gt;<i> all the compatibility with glade-2, but also other things: 
</I>&gt;<i> for example try to create a window, add a vbox to it, add a 
</I>&gt;<i> button to the second slot of the vbox, save the file and 
</I>&gt;<i> exit... now reopen glade-3 and open that
</I>&gt;<i> file: the button will be at the wrong place.
</I>&gt;<i> The best solution IMHO is to make GladePlaceholder a 
</I>&gt;<i> GladeWidget and include it in the tree structure instead of 
</I>
I don't quite agree.  GladePlaceholder is a GtkWidget, so if you want to
also make GladePlaceholder a GladeWidget, then GladeWidget should also
be GtkWidget, and that doesn't makes sense.

&gt;<i> making it a special case. But how? The more radical solution 
</I>&gt;<i> would be to make GladeWidget a GObject instead of a simple 
</I>&gt;<i> structure, but I'm not sure that it makes sense. In this case 
</I>&gt;<i> GladePlaceholder would be a subclass of GladeWidget. Another 
</I>&gt;<i> approach (the one I tried, without finishing it) is to make 
</I>&gt;<i> glade_placeholder_new return a GladeWidget, something like:
</I>
What I was thinking is instead to just change the logic of
glade_widget_write.
Right now, it looks on the list of childrens of the GladeWidget.
Instead, look at the list of children of the GtkWidget with
gtk_container_get_children (only if it's a container), and then for each
children, we have 3 possibilities:

1) it's a widget with an associated GladeWidget
2) it's a placeholder
3) neither of these

In case 1, we just keep with the current logic (redoing
glade_widget_write, etc.), in case 2, we print the &lt;placeholder/&gt;, and
in case 3, we just ignore the widget.

I've coded it &amp; committed.  The only that I'm lacking is printing the
packing properties of the placeholder, I will do it tomorrow if nobody
beats me.  Btw, we should also not print a property if it's equal to the
default value, as right now we're quite verbose.

Cheers,



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000228.html">[Glade-devel] I'm back.
</A></li>
	<LI> Next message: <A HREF="000230.html">[Glade-devel] I'm back.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#229">[ date ]</a>
              <a href="thread.html#229">[ thread ]</a>
              <a href="subject.html#229">[ subject ]</a>
              <a href="author.html#229">[ author ]</a>
         </LI>
       </UL>
</body></html>
