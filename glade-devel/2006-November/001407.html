<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] GladeBinding + Actions patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glade-devel%40lists.ximian.com?Subject=%5BGlade-devel%5D%20GladeBinding%20%2B%20Actions%20patch&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001404.html">
   <LINK REL="Next"  HREF="001408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] GladeBinding + Actions patch</H1>
    <B>Juan Pablo Ugarte</B> 
    <A HREF="mailto:glade-devel%40lists.ximian.com?Subject=%5BGlade-devel%5D%20GladeBinding%20%2B%20Actions%20patch&In-Reply-To="
       TITLE="[Glade-devel] GladeBinding + Actions patch">juanpablougarte at gmail.com
       </A><BR>
    <I>Tue Nov 14 16:41:53 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="001404.html">[Glade-devel] Hi, pleased to meet you
</A></li>
        <LI>Next message: <A HREF="001408.html">[Glade-devel] Source code generation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1407">[ date ]</a>
              <a href="thread.html#1407">[ thread ]</a>
              <a href="subject.html#1407">[ subject ]</a>
              <a href="author.html#1407">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>from glade-binding.c

GladeBindings are glade's modules to add support for others languages.
The principal objective is to be able to support widgets written in
other language than C.

The bindings modules provides this functionality to the core trought a
couple of obligatory functions.

GladeBindingInitFunc glade_binding_init() to initialize the binding and
GladeBindingLibraryLoadFunc glade_binding_library_load() to load a
library written in language supported by the binding.

You can add Scripting capability to the core by providing 
GladeBindingRunScriptFunc glade_binding_run_script() and/or
GladeBindingConsoleNewFunc glade_binding_console_new()

The core will search for script in two different directories,
datadir/package/scripts/ and g_get_user_config_dir()/package/scripts/

The hierarchy in those directories should be binding_name/gtype_name/ *
For example if you want to add a python script to GtkContainers you can
do it by installing the script file in 
g_get_user_config_dir()/glade3/scripts/python/GtkContainer/Delete_Children.py

This will add a context menu item for any GtkContainer called &quot;Delete
Children&quot; that will trigger GtkContainer's widget adaptor
&quot;action-activated::Delete_Children&quot; signal.

********
Also you can specify actions in the catalog file :)

&lt;action id=&quot;action&quot; label=&quot;Action&quot; stock=&quot;stock-id&quot;/&gt;
&lt;action-group id=&quot;group-id&quot; label=&quot;Label&quot; stock=&quot;stock-id&quot;&gt;
  &lt;action id=&quot;action2&quot; label=&quot;Action 2&quot; stock=&quot;stock-id&quot;/&gt;
&lt;/action-group&gt;

This was you can connect to the adaptor's &quot;action-activated::action-id&quot;
signal to perform such action :)

hmmm may i could split the path in two, GladeBinding and GWAAction but i
am to lazy to do it if it is not entirely necessary :)

greets

Juan Pablo

pd:
ChangeLog

* configure.in: Added python/pygtk checks.

* src/Makefile.am: added glade-binding.[ch] and BUILD_PYTHON rules

* src/glade-app.[ch]:
  o added glade_scripts_dir and glade_bindings_dir globals
  o added new function glade_app_get_project_by_name()
  o loading / unloading bindings.

* src/glade-catalog.c: support for loading catalogs supported by
  bindings, added language member to GladeCatalog.

* src/glade-paths.sh.in: added GLADE_BINDINGSDIR and GLADE_SCRIPTSDIR.

* src/glade-popup.c: added support for GWAAction
  (shows context actions as menu items)

* src/glade-project-window.c: added window which a console for each
  GladeBinding that provide a console.

* glade-python-support.[defs override]: files used by pygtk-codegen-2.0
  to create glade-python-support.c (GladeWidgetAdaptor wrappers)

* glade-python.c GladeBinding plugin for python language.

* src/glade-widget-adaptor.[ch]:
  o added &quot;action-activated&quot; signal
  o added GWAAction support.
  o added glade_create_reason_get_type() so the enum can be exposed in
    bindings as a GEnum.
  o gwa_derive_adaptor_for_type() now checks if the adaptor is already
    registered, because catalogs plugins could register adaptors when
    are loaded. (This is how python's catalog works)
  o setup binding scripts as actions.
  o added glade_widget_adaptor_emit_action_activated()
    (used in glade-popup.c)

* src/glade.h: added GLADE_TAG_LANGUAGE, GLADE_TAG_ACTION_GROUP,
  GLADE_TAG_ACTION, GLADE_TAG_STOCK, glade_scripts_dir and
  glade_bindings_dir.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: binding_actions.patch.gz
Type: application/x-gzip
Size: 18797 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/glade-devel/attachments/20061114/3d2d7c5e/attachment-0001.gz">http://lists.ximian.com/pipermail/glade-devel/attachments/20061114/3d2d7c5e/attachment-0001.gz</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pythontest.xml
Type: application/xml
Size: 413 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/glade-devel/attachments/20061114/3d2d7c5e/attachment-0001.rdf">http://lists.ximian.com/pipermail/glade-devel/attachments/20061114/3d2d7c5e/attachment-0001.rdf</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pythontest.py
Type: text/x-python
Size: 961 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/glade-devel/attachments/20061114/3d2d7c5e/attachment-0001.py">http://lists.ximian.com/pipermail/glade-devel/attachments/20061114/3d2d7c5e/attachment-0001.py</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001404.html">[Glade-devel] Hi, pleased to meet you
</A></li>
	<LI>Next message: <A HREF="001408.html">[Glade-devel] Source code generation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1407">[ date ]</a>
              <a href="thread.html#1407">[ thread ]</a>
              <a href="subject.html#1407">[ subject ]</a>
              <a href="author.html#1407">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/glade-devel">More information about the Glade-devel
mailing list</a><br>
</body></html>
