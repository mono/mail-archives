<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] Glade 2.6 : toolbar widget, warning with gtk_image_new_from_stock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bhuisgen%40wanadoo.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000733.html">
   <LINK REL="Next"  HREF="000735.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] Glade 2.6 : toolbar widget, warning with gtk_image_new_from_stock
   </H1>
    <B>Boris HUISGEN
    </B> 
    <A HREF="mailto:bhuisgen%40wanadoo.fr"
       TITLE="[Glade-devel] Glade 2.6 : toolbar widget, warning with gtk_image_new_from_stock">bhuisgen@wanadoo.fr
       </A><BR>
    <I>Tue, 25 May 2004 17:20:09 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="000733.html">[Glade-devel] Fix for annoyingly small font for the GladePalette window.
</A></li>
        <LI> Next message: <A HREF="000735.html">[Glade-devel] Glade 2.6 : toolbar widget, warning with
 gtk_image_new_from_stock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#734">[ date ]</a>
              <a href="thread.html#734">[ thread ]</a>
              <a href="subject.html#734">[ subject ]</a>
              <a href="author.html#734">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,


A small problem occurs with toolbar buttons / icons in Glade 2.6. When I
compile source, some errors are noticed like this :

interface.cc: In function `GtkWidget* create_main_window()':
interface.cc:299: invalid conversion from `gint' to `GtkIconSize'
interface.cc:307: invalid conversion from `gint' to `GtkIconSize'
interface.cc: In function `GtkWidget* create_configeditor_dialog()':
interface.cc:2978: invalid conversion from `gint' to `GtkIconSize'
make[3]: *** [interface.o] Error 1

The problem is related to function gtk_image_new_from_stock () : her
second parameter has type 'GtkIconSize' and not 'gint'.

Here is the code generated by glade 2.6 :

&gt;<i>   GtkWidget *toolbar_main;
</I>&gt;<i>   gint tmp_toolbar_icon_size;
</I>&gt;<i>   GtkWidget *tmp_image;
</I>&gt;<i>   GtkWidget *button_redirect;
</I>&gt;<i> 
</I>&gt;<i>   toolbar_main = gtk_toolbar_new ();
</I>&gt;<i>   gtk_widget_show (toolbar_main);
</I>&gt;<i>   gtk_box_pack_start (GTK_BOX (vbox1), toolbar_main, FALSE, FALSE, 0);
</I>&gt;<i>   gtk_toolbar_set_style (GTK_TOOLBAR (toolbar_main),
</I>&gt;<i> GTK_TOOLBAR_BOTH_HORIZ);
</I>&gt;<i>   tmp_toolbar_icon_size = gtk_toolbar_get_icon_size (GTK_TOOLBAR
</I>&gt;<i> (toolbar_main));
</I>&gt;<i> 
</I>&gt;<i>   tmp_image = gtk_image_new_from_stock (&quot;gtk-yes&quot;,
</I>&gt;<i> tmp_toolbar_icon_size);
</I>&gt;<i>   gtk_widget_show (tmp_image);
</I>&gt;<i>   button_redirect = (GtkWidget*) gtk_tool_button_new (tmp_image,
</I>&gt;<i> _(&quot;Redirect&quot;));
</I>&gt;<i>   gtk_widget_show (button_redirect);
</I>&gt;<i>   gtk_container_add (GTK_CONTAINER (toolbar_main), button_redirect);
</I>&gt;<i>   gtk_tool_item_set_tooltip (GTK_TOOL_ITEM (button_redirect),
</I>&gt;<i> tooltips, _(&quot;Redirect the domain&quot;), NULL);
</I>&gt;<i>   gtk_tool_item_set_is_important (GTK_TOOL_ITEM (button_redirect),
</I>&gt;<i> TRUE);
</I>

Now the corrected code (simply fixed at line 2) :

&gt;<i>   GtkWidget *toolbar_main;
</I>&gt;<i>   GtkIconSize tmp_toolbar_icon_size;
</I>&gt;<i>   GtkWidget *tmp_image;
</I>&gt;<i>   GtkWidget *button_redirect;
</I>&gt;<i> 
</I>&gt;<i>   toolbar_main = gtk_toolbar_new ();
</I>&gt;<i>   gtk_widget_show (toolbar_main);
</I>&gt;<i>   gtk_box_pack_start (GTK_BOX (vbox1), toolbar_main, FALSE, FALSE, 0);
</I>&gt;<i>   gtk_toolbar_set_style (GTK_TOOLBAR (toolbar_main),
</I>&gt;<i> GTK_TOOLBAR_BOTH_HORIZ);
</I>&gt;<i>   tmp_toolbar_icon_size = gtk_toolbar_get_icon_size (GTK_TOOLBAR
</I>&gt;<i> (toolbar_main));
</I>&gt;<i> 
</I>&gt;<i>   tmp_image = gtk_image_new_from_stock (&quot;gtk-yes&quot;,
</I>&gt;<i> tmp_toolbar_icon_size);
</I>&gt;<i>   gtk_widget_show (tmp_image);
</I>&gt;<i>   button_redirect = (GtkWidget*) gtk_tool_button_new (tmp_image,
</I>&gt;<i> _(&quot;Redirect&quot;));
</I>&gt;<i>   gtk_widget_show (button_redirect);
</I>&gt;<i>   gtk_container_add (GTK_CONTAINER (toolbar_main), button_redirect);
</I>&gt;<i>   gtk_tool_item_set_tooltip (GTK_TOOL_ITEM (button_redirect),
</I>&gt;<i> tooltips, _(&quot;Redirect the domain&quot;), NULL);
</I>&gt;<i>   gtk_tool_item_set_is_important (GTK_TOOL_ITEM (button_redirect),
</I>&gt;<i> TRUE);
</I>

Thanks to correct this in the next release :)


-- 
Boris HUISGEN

Email : <A HREF="mailto:bhuisgen@wanadoo.fr">bhuisgen@wanadoo.fr</A>
Site Web : <A HREF="http://unlimit.homedns.org">http://unlimit.homedns.org</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000733.html">[Glade-devel] Fix for annoyingly small font for the GladePalette window.
</A></li>
	<LI> Next message: <A HREF="000735.html">[Glade-devel] Glade 2.6 : toolbar widget, warning with
 gtk_image_new_from_stock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#734">[ date ]</a>
              <a href="thread.html#734">[ thread ]</a>
              <a href="subject.html#734">[ subject ]</a>
              <a href="author.html#734">[ author ]</a>
         </LI>
       </UL>
</body></html>
