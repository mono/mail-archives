<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] [patch, glade3] cleanup popup menu
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:e98cuenc%40free.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000147.html">
   <LINK REL="Next"  HREF="000154.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] [patch, glade3] cleanup popup menu
   </H1>
    <B>Joaquin Cuenca Abela
    </B> 
    <A HREF="mailto:e98cuenc%40free.fr"
       TITLE="[Glade-devel] [patch, glade3] cleanup popup menu">e98cuenc@free.fr
       </A><BR>
    <I>Sun, 11 May 2003 22:37:49 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="000147.html">[Glade-devel] [patch, glade3] cleanup popup menu
</A></li>
        <LI> Next message: <A HREF="000154.html">[Glade-devel] [patch, glade3] insensitive Cut,Copy etc in popup menu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#150">[ date ]</a>
              <a href="thread.html#150">[ thread ]</a>
              <a href="subject.html#150">[ subject ]</a>
              <a href="author.html#150">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Paolo!

I've committed your changes, plus some fixes to cut &amp; paste.

The problems that I was seeing with cut &amp; paste were due to the
finalization function of the cut command.  It was destroying the widget
cutted, but we only do the finalization if we were destroying the cut
command.  To reach this point the user should undo a cut command, and
then do another action (thus removing the upper part of the undo stack).
But if the cut command had been undoed, the cutted widget is again in
use, so we can't destroy it.

There was also a little problem with the paste command, as if you tried
to paste &quot;button1&quot; over &quot;window1&quot;, the paste command tried to paste
&quot;window1&quot; (instead of pasting &quot;button1&quot;).

Now cut &amp; paste is working flawsely on my system.

Archit, are these the problems that you were experiencing a while ago
with cut &amp; paste?

Paolo, making the menu items insensitive when the action is not allowed
will give you several love points ;-)

Thank you for your work!

Cheers,

P.S.:  Sorry, still no time to look at your close project patch

Paolo wrote:
&gt;<i> Hi!
</I>&gt;<i> 
</I>&gt;<i> The patch attached cleans up the popup menu making it saner 
</I>&gt;<i> (IMHO before the code worked by chance since the &quot;activate&quot; 
</I>&gt;<i> event was connected to functions with different prototypes 
</I>&gt;<i> from that of the event handler). Beside the Cut, Copy etc in 
</I>&gt;<i> the popup ended up calling different functions from those in 
</I>&gt;<i> the main menu bar. Last but not least, after the patch popup 
</I>&gt;<i> menu items have stock icons and mnemonics :) .
</I>&gt;<i> 
</I>&gt;<i> Here are the changes to make review easier:
</I>&gt;<i> 
</I>&gt;<i> - remove glade_widget_copy and friends: some codepaths (e.g. 
</I>&gt;<i> the main menu bar) didn't call these, while others (e.g the 
</I>&gt;<i> popup menu) did; since they only called glade_command_copy 
</I>&gt;<i> etc, which is what was used in the other places, remove them 
</I>&gt;<i> and their occurences.
</I>&gt;<i> 
</I>&gt;<i> - provide proper callbacks for the popup menu items: e.g. 
</I>&gt;<i> glade_popup_cut_cb etc; also move in popup.c the 
</I>&gt;<i> placeholder_paste_callback which was only used here.
</I>&gt;<i> 
</I>&gt;<i> - improve glade_popup_append_item so that it handles 
</I>&gt;<i> mnemonics and icons, beside using g_object_set_data is not 
</I>&gt;<i> needed anymore.
</I>&gt;<i> 
</I>&gt;<i> hope it makes sense
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ciao
</I>&gt;<i> 	paolo
</I>&gt;<i> 
</I>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000147.html">[Glade-devel] [patch, glade3] cleanup popup menu
</A></li>
	<LI> Next message: <A HREF="000154.html">[Glade-devel] [patch, glade3] insensitive Cut,Copy etc in popup menu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#150">[ date ]</a>
              <a href="thread.html#150">[ thread ]</a>
              <a href="subject.html#150">[ subject ]</a>
              <a href="author.html#150">[ author ]</a>
         </LI>
       </UL>
</body></html>
