<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] [patch, glade3] rework widget creation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:e98cuenc%40free.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000174.html">
   <LINK REL="Next"  HREF="000176.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] [patch, glade3] rework widget creation
   </H1>
    <B>Joaquin Cuenca Abela
    </B> 
    <A HREF="mailto:e98cuenc%40free.fr"
       TITLE="[Glade-devel] [patch, glade3] rework widget creation">e98cuenc@free.fr
       </A><BR>
    <I>Sat, 31 May 2003 21:16:29 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="000174.html">[Glade-devel] [patch, glade3] rework widget creation
</A></li>
        <LI> Next message: <A HREF="000176.html">[Glade-devel] [patch, glade3] small cleanup in gpw_refresh_undo_redo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#190">[ date ]</a>
              <a href="thread.html#190">[ thread ]</a>
              <a href="subject.html#190">[ subject ]</a>
              <a href="author.html#190">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, I finally got the time to review the patch.

I was a bit hesitant at the beginning, as glade_command_{create,delete}
were not supposed to create or delete the widget, but just account for a
created or deleted widget on the project, but the change of meaning
makes sense, as the other glade_command_* really execute the action that
they are supposed to account for.

I just removed the glade_command_create_toplevel function, as it look a
bit too ad hoc to me, so I keep the creation of a widget with only
glade_command_create.

I also applied your no-warn patch, along with a fix to release allocated
GladeWidgets (not related to your code).

I will review your other patches asap.

Thank you for your work!

Cheers,

&gt;<i> -----Message d'origine-----
</I>&gt;<i> De : <A HREF="mailto:glade-devel-admin@lists.ximian.com">glade-devel-admin@lists.ximian.com</A>=20
</I>&gt;<i> [mailto:<A HREF="mailto:glade-devel-admin@lists.ximian.com">glade-devel-admin@lists.ximian.com</A>] De la part de=20
</I>&gt;<i> paolo borelli
</I>&gt;<i> Envoy=E9 : vendredi 23 mai 2003 18:35
</I>&gt;<i> =C0 : <A HREF="mailto:glade-devel@lists.ximian.com">glade-devel@lists.ximian.com</A>
</I>&gt;<i> Objet : [Glade-devel] [patch, glade3] rework widget creation
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>&gt;<i> Hi!
</I>&gt;<i>=20
</I>&gt;<i> The attached patch is a rework of how a GladeWidget is created.=20
</I>&gt;<i> After the patch the code path to create a widget IMHO makes=20
</I>&gt;<i> more sense and matches better the one of widget deletion: the=20
</I>&gt;<i> fundamental change is that galde_command_create calls=20
</I>&gt;<i> glade_widget_new_from_class to create a widget and then adds=20
</I>&gt;<i> it to the project instead of being called by it.
</I>&gt;<i>=20
</I>&gt;<i> The patch isn't small and touches various files, so I'm going=20
</I>&gt;<i> to explain the changes in detail below.
</I>&gt;<i>=20
</I>&gt;<i> * glade-command.c: glade_command_create now takes the widget=20
</I>&gt;<i> class and the placeholder it should replace as args; it=20
</I>&gt;<i> creates the widget with glade_widget_new_from_class. Toplevel=20
</I>&gt;<i> widget are created with glade_command_create_toplevel.
</I>&gt;<i>=20
</I>&gt;<i> * glade-placeholder.c: the placeholder (if present) is passed=20
</I>&gt;<i> to glade_command_create and then is passed on till=20
</I>&gt;<i> create_execute which takes care of replacing it, this way we=20
</I>&gt;<i> can delete glade_placeholder_replace_widget and simply call=20
</I>&gt;<i> glade_command_create.
</I>&gt;<i>=20
</I>&gt;<i> * glade-widget.c: glade_widget_new now only take the widget=20
</I>&gt;<i> class as argument; glade_new_from_class takes also a project=20
</I>&gt;<i> arg so special casing for toplevels (which don't have=20
</I>&gt;<i> parent-&gt;project) is not needed anymore. I also deleted=20
</I>&gt;<i> glade_widget_new_from_class_name since it was not used=20
</I>&gt;<i> anywhere and a bad idea to begin with (if ever needed just=20
</I>&gt;<i> get the class from its name and then call=20
</I>&gt;<i> glade_widget_new_from_class).
</I>&gt;<i>=20
</I>&gt;<i> * glade_project_window.c: use glade_command_create_toplevel
</I>&gt;<i>=20
</I>&gt;<i> * glade_property.c: fix up the caller of=20
</I>&gt;<i> glade_widget_new_from_class (I was a little unsure about this=20
</I>&gt;<i> little change since I am not familiar with property.c, but I=20
</I>&gt;<i> noticed that even if before widget-&gt;project was not=20
</I>&gt;<i> explicitly passed to the called function, there was a=20
</I>&gt;<i> g_return_if_fail (GLADE_IS_PROJECT (parent-&gt;project))... )
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>&gt;<i> It seems to work here, but at the moment adding widget to=20
</I>&gt;<i> vbox etc it's broken so the patch isn't tested a lot, if you=20
</I>&gt;<i> see any problems let me know.
</I>&gt;<i>=20
</I>&gt;<i> Sorry for being so verbose, I hope it all makes sense and it=20
</I>&gt;<i> doesn't conflict with your current work.
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>&gt;<i> ciao
</I>&gt;<i> 	paolo
</I>&gt;<i>=20
</I>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000174.html">[Glade-devel] [patch, glade3] rework widget creation
</A></li>
	<LI> Next message: <A HREF="000176.html">[Glade-devel] [patch, glade3] small cleanup in gpw_refresh_undo_redo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#190">[ date ]</a>
              <a href="thread.html#190">[ thread ]</a>
              <a href="subject.html#190">[ subject ]</a>
              <a href="author.html#190">[ author ]</a>
         </LI>
       </UL>
</body></html>
