<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] [patch, glade3] placeholder.c cleanup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pborelli%40katamail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000189.html">
   <LINK REL="Next"  HREF="000149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] [patch, glade3] placeholder.c cleanup
   </H1>
    <B>paolo borelli
    </B> 
    <A HREF="mailto:pborelli%40katamail.com"
       TITLE="[Glade-devel] [patch, glade3] placeholder.c cleanup">pborelli@katamail.com
       </A><BR>
    <I>29 May 2003 17:37:56 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="000189.html">[Glade-devel] [patch, glade3] rework widget creation
</A></li>
        <LI> Next message: <A HREF="000149.html">[Glade-devel] Extending glade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#188">[ date ]</a>
              <a href="thread.html#188">[ thread ]</a>
              <a href="subject.html#188">[ subject ]</a>
              <a href="author.html#188">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-Y/k/S6T6bOF9uKbCTUx1
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi!

Attached is a trivial patch that moves glade_placeholder_fill_empty ()
to glade-widget.c where it really belongs, as a matter of fact it's only
used there so we can make it static.

By the way, these two quite long functions in placeholder.c
- glade_placeholder_get_from_properties
- glade_placeholder_remove_all
are not used anywhere. Are they just leftovers that can be deleted, or
do you think they may turn useful later? 

ciao
	paolo

--=-Y/k/S6T6bOF9uKbCTUx1
Content-Disposition: attachment; filename=mv_fill_empty.patch
Content-Type: text/x-patch; name=mv_fill_empty.patch; charset=UTF-8
Content-Transfer-Encoding: 7bit

diff -upr gnome2/glade3/ChangeLog glade3/ChangeLog
--- gnome2/glade3/ChangeLog	2003-05-24 17:41:46.000000000 +0200
+++ glade3/ChangeLog	2003-05-29 11:45:23.000000000 +0200
@@ -1,3 +1,9 @@
+2003-05-29  Paolo Borelli  &lt;<A HREF="mailto:pborelli@katamail.com">pborelli@katamail.com</A>&gt;
+
+	* src/glade-placeholder.c: move glade_placeholder_fill_empty to
+	glade-widget.c where it belongs.
+	* src/glade-widget.c: add glade_widget_fill_empty.
+
 2003-05-23  Joaquin Cuenca Abela  &lt;<A HREF="mailto:e98cuenc@yahoo.com">e98cuenc@yahoo.com</A>&gt;
 
 	* src/glade-placeholder.c: Make the placeholder work better on any
diff -upr gnome2/glade3/src/glade-placeholder.c glade3/src/glade-placeholder.c
--- gnome2/glade3/src/glade-placeholder.c	2003-05-24 17:41:46.000000000 +0200
+++ glade3/src/glade-placeholder.c	2003-05-29 11:39:21.000000000 +0200
@@ -595,35 +602,3 @@ glade_placeholder_remove_all (GtkWidget 
 
 }
 
-void
-glade_placeholder_fill_empty (GtkWidget *widget)
-{
-	GList *children;
-	gboolean empty = TRUE;
-
-	if (!GTK_IS_CONTAINER (widget))
-		return;
-	
-	/* fill with placeholders the containers that are inside of this container */
-	children = gtk_container_get_children (GTK_CONTAINER (widget));
-
-	/* loop over the children of this container, and fill them with placeholders */
-	while (children != NULL) {
-		glade_placeholder_fill_empty (GTK_WIDGET (children-&gt;data));
-		children = children-&gt;next;
-		empty = FALSE;
-	}
-
-	if (empty) {
-		/* retrieve the desired number of placeholders that this widget should hold */
-		int nb_children = GPOINTER_TO_INT (g_object_get_data (G_OBJECT (widget), &quot;glade_nb_placeholders&quot;));
-		int i;
-
-		if (nb_children == 0 &amp;&amp; GTK_IS_BIN (widget))
-			nb_children = 1;
-
-		for (i = nb_children; i &gt; 0; i--)
-			gtk_container_add (GTK_CONTAINER (widget), glade_placeholder_new ());
-	}
-}
-
diff -upr gnome2/glade3/src/glade-placeholder.h glade3/src/glade-placeholder.h
--- gnome2/glade3/src/glade-placeholder.h	2003-05-24 17:41:46.000000000 +0200
+++ glade3/src/glade-placeholder.h	2003-05-29 11:45:43.000000000 +0200
@@ -30,7 +30,6 @@ gboolean glade_placeholder_is (GtkWidget
 
 void glade_placeholder_remove_all (GtkWidget *widget);
 
-void glade_placeholder_fill_empty (GtkWidget *widget);
 
 G_END_DECLS
 
Binary files gnome2/glade3/src/glade-utils.o and glade3/src/glade-utils.o differ
diff -upr gnome2/glade3/src/glade-widget.c glade3/src/glade-widget.c
--- gnome2/glade3/src/glade-widget.c	2003-05-24 17:41:46.000000000 +0200
+++ glade3/src/glade-widget.c	2003-05-29 11:39:20.000000000 +0200
@@ -793,6 +793,38 @@ glade_widget_new_full (GladeProject *pro
 	return widget;
 }
 
+static void
+glade_widget_fill_empty (GtkWidget *widget)
+{
+	GList *children;
+	gboolean empty = TRUE;
+
+	if (!GTK_IS_CONTAINER (widget))
+		return;
+	
+	/* fill with placeholders the containers that are inside of this container */
+	children = gtk_container_get_children (GTK_CONTAINER (widget));
+
+	/* loop over the children of this container, and fill them with placeholders */
+	while (children != NULL) {
+		glade_widget_fill_empty (GTK_WIDGET (children-&gt;data));
+		children = children-&gt;next;
+		empty = FALSE;
+	}
+
+	if (empty) {
+		/* retrieve the desired number of placeholders that this widget should hold */
+		int nb_children = GPOINTER_TO_INT (g_object_get_data (G_OBJECT (widget), &quot;glade_nb_placeholders&quot;));
+		int i;
+
+		if (nb_children == 0 &amp;&amp; GTK_IS_BIN (widget))
+			nb_children = 1;
+
+		for (i = nb_children; i &gt; 0; i--)
+			gtk_container_add (GTK_CONTAINER (widget), glade_placeholder_new ());
+	}
+}
+
 static GtkWidget *
 glade_widget_append_query (GtkWidget *table,
 			   GladePropertyClass *property_class,
@@ -982,7 +1014,7 @@ glade_widget_new_from_class_full (GladeW
 
 	/* If we are a container, add the placeholders */
 	if (g_type_is_a (class-&gt;type,  GTK_TYPE_CONTAINER))
-		glade_placeholder_fill_empty (widget-&gt;widget);
+		glade_widget_fill_empty (widget-&gt;widget);
 	
 	if (result) 
 		glade_property_query_result_destroy (result);
@@ -1515,7 +1548,9 @@ glade_widget_apply_properties_from_hash 
 }
 
 static gboolean
-glade_widget_new_child_from_node (GladeXmlNode *node, GladeProject *project, GladeWidget *parent)
+glade_widget_new_child_from_node (GladeXmlNode *node,
+				  GladeProject *project,
+				  GladeWidget *parent)
 {
 	GladeXmlNode *child_node;
 	GladeXmlNode *child_properties;
@@ -1600,7 +1635,7 @@ glade_widget_new_child_from_node (GladeX
 		g_value_unset (&amp;string_value);
 	}
 	
-	glade_placeholder_fill_empty (parent-&gt;widget);
+	glade_widget_fill_empty (parent-&gt;widget);
 
 	return TRUE;
 }

--=-Y/k/S6T6bOF9uKbCTUx1--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000189.html">[Glade-devel] [patch, glade3] rework widget creation
</A></li>
	<LI> Next message: <A HREF="000149.html">[Glade-devel] Extending glade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#188">[ date ]</a>
              <a href="thread.html#188">[ thread ]</a>
              <a href="subject.html#188">[ subject ]</a>
              <a href="author.html#188">[ author ]</a>
         </LI>
       </UL>
</body></html>
