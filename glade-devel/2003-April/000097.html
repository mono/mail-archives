<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Glade-devel] [patch, glade3] fix assert in glade-placeholder.c
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pborelli%40katamail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000096.html">
   <LINK REL="Next"  HREF="000098.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Glade-devel] [patch, glade3] fix assert in glade-placeholder.c
   </H1>
    <B>paolo borelli
    </B> 
    <A HREF="mailto:pborelli%40katamail.com"
       TITLE="[Glade-devel] [patch, glade3] fix assert in glade-placeholder.c">pborelli@katamail.com
       </A><BR>
    <I>16 Apr 2003 16:44:38 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="000096.html">[Glade-devel] [patch, glade3] wrap widget page in a scrolled window
</A></li>
        <LI> Next message: <A HREF="000098.html">[Glade-devel] Commit -- win32 port of glade3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#97">[ date ]</a>
              <a href="thread.html#97">[ thread ]</a>
              <a href="subject.html#97">[ subject ]</a>
              <a href="author.html#97">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-huLIKs1rE4NMQlMj4lkV
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi!

If you create a new window and the select the placeholder you get:

(glade-3:1073): Glade-CRITICAL **: file glade-placeholder.c: line 303
(glade_placeholder_clear_selection_nodes): assertion `GLADE_IS_WIDGET
(placeholder)' failed

The attached patch fixes it (unless the patch is wrong and it's just
hiding the problem)

ciao
	paolo

--=-huLIKs1rE4NMQlMj4lkV
Content-Disposition: attachment; filename=fix_assert.patch
Content-Type: text/x-patch; name=fix_assert.patch; charset=UTF-8
Content-Transfer-Encoding: 7bit

diff -upr gnome2/glade3/ChangeLog glade3/ChangeLog
--- gnome2/glade3/ChangeLog	2003-04-03 18:44:13.000000000 +0200
+++ glade3/ChangeLog	2003-04-16 16:33:13.000000000 +0200
@@ -1,3 +1,7 @@
+2003-04-16  Paolo Borelli &lt;<A HREF="mailto:pborelli@katamail.com">pborelli@katamail.com</A>&gt;
+
+	* src/glade-placeholder.c: fix an assertion.
+
 2003-04-02  Joaquin Cuenca Abela  &lt;<A HREF="mailto:e98cuenc@yahoo.com">e98cuenc@yahoo.com</A>&gt;
 
 	* src/glade-menu-editor.c: Fix the segfault when adding a new menu item.
diff -upr gnome2/glade3/src/glade-placeholder.c glade3/src/glade-placeholder.c
--- gnome2/glade3/src/glade-placeholder.c	2002-05-02 11:11:09.000000000 +0200
+++ glade3/src/glade-placeholder.c	2003-04-16 15:11:04.000000000 +0200
@@ -333,7 +335,8 @@ glade_placeholder_on_button_press_event 
 			 * Else set the current placeholder as selected,
 			 * so that Paste from the Main Menu works.
 			 */
-			glade_placeholder_clear_selection_nodes (gpw-&gt;active_placeholder);
+			if (gpw-&gt;active_placeholder != NULL)
+				glade_placeholder_clear_selection_nodes (gpw-&gt;active_placeholder);
 			gpw-&gt;active_placeholder = placeholder;
 			glade_placeholder_draw_selection_nodes (placeholder);
 		}

--=-huLIKs1rE4NMQlMj4lkV--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000096.html">[Glade-devel] [patch, glade3] wrap widget page in a scrolled window
</A></li>
	<LI> Next message: <A HREF="000098.html">[Glade-devel] Commit -- win32 port of glade3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#97">[ date ]</a>
              <a href="thread.html#97">[ thread ]</a>
              <a href="subject.html#97">[ subject ]</a>
              <a href="author.html#97">[ author ]</a>
         </LI>
       </UL>
</body></html>
