<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] set_Value seems to be having a problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20set_Value%20seems%20to%20be%20having%20a%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002324.html">
   <LINK REL="Next"  HREF="002326.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] set_Value seems to be having a problem</H1>
    <B>PFJ</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20set_Value%20seems%20to%20be%20having%20a%20problem&In-Reply-To="
       TITLE="[Mono-winforms-list] set_Value seems to be having a problem">paul at all-the-johnsons.co.uk
       </A><BR>
    <I>Tue Apr 18 07:16:45 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002324.html">[Mono-winforms-list] ImageList in Mono 1.1.15
</A></li>
        <LI>Next message: <A HREF="002326.html">[Mono-winforms-list] set_Value seems to be having a problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2325">[ date ]</a>
              <a href="thread.html#2325">[ thread ]</a>
              <a href="subject.html#2325">[ subject ]</a>
              <a href="author.html#2325">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have a small image viewer which has been working for quite a while
now. However, I've just come to run it and it throws up an error after
loading a jpeg

Unhandled Exception: System.ArgumentException: '-214783648' not a valid
value for 'Value'. 'Value' should be between 'Minimum' and 'Maximum'
&lt;in 0x00163&gt; System.Windows.Forms.ScrollBar:set_Value(Int32 value)

The jpeg is a valid jpeg (displays in eye of gnome)

Any ideas what is happening? Source code and throwback is attached.

As always, I'm happy to BZ this and admit now that the problem could
either be in my head, on my machine, or not be anything at all because
I'm a twit at times.

mono compiled from source (svn) at about 10.30 British Summer Time

TTFN

Paul

8--&gt;
/*
 * ImageViewer.cs - Simple MDI-based image viewer.
 *
 * Copyright (C) 2003  Southern Storm Software, Pty Ltd.
 *
 * This program is free software, you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY, without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program, if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307
USA
 */

using System;
using System.IO;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Windows.Forms;

public class ImageViewer : Form
{
	private ImageViewer()
	{
		MenuItem openMenuItem = new MenuItem(&quot;Open&quot;);
		MenuItem quitMenuItem = new MenuItem(&quot;Quit&quot;);
		MenuItem fileMenuItem =
			new MenuItem(&quot;File&quot;, new MenuItem[]
				{openMenuItem, quitMenuItem});
		MainMenu mainMenu = new MainMenu(new MenuItem[] { fileMenuItem });
		Menu = mainMenu;

		Size = new Size(600, 500);
		Text = &quot;DotGNU Image Viewer&quot;;
		IsMdiContainer = true;

		openMenuItem.Click += new EventHandler(OpenClicked);
		quitMenuItem.Click += new EventHandler(QuitClicked);
	}

	private void OpenClicked(Object sender, EventArgs e)
	{
		OpenFileDialog dialog = new OpenFileDialog();
		dialog.Filter =
			&quot;All image files (*.bmp, *.jpg, *.png, *.gif, *.ico, *.cur)&quot; +
			&quot;|*.bmp;*.jpg;*.png;*.gif;*.ico;*.cur&quot; +
			&quot;|BMP files (*.bmp)|*.bmp&quot; +
			&quot;|JPEG files (*.jpg)|*.jpg&quot; +
			&quot;|PNG files (*.png)|*.png&quot; +
			&quot;|GIF files (*.gif)|*.gif&quot; +
			&quot;|Icon files (*.ico)|*.ico&quot; +
			&quot;|Cursor files (*.cur)|*.cur&quot; +
			&quot;|All files (*.*)|*.*&quot;;
		if(dialog.ShowDialog(this) == DialogResult.OK)
		{
			Bitmap image;
			try
			{
				image = new Bitmap(dialog.FileName);
			}
			catch(Exception)
			{
				MessageBox.Show
					(String.Format(&quot;Unknown image format for \&quot;{0}\&quot;&quot;,
								   dialog.FileName),
					 &quot;Error&quot;, MessageBoxButtons.OK, MessageBoxIcon.Hand);
				image = null;
			}
			if(image != null)
			{
				ImageWindow window = new ImageWindow
					(dialog.FileName, image);
				window.MdiParent = this;
				window.Visible = true;
			}
		}
	}

	private void QuitClicked(Object sender, EventArgs e)
	{
		Close();
	}

	protected override bool ProcessDialogKey(Keys keyData)
	{
		if(keyData == (Keys.Control | Keys.O))
		{
			OpenClicked(this, EventArgs.Empty);
			return true;
		}
		return base.ProcessDialogKey(keyData);
	}

	public static void Main(String[] args)
	{
		ImageViewer form = new ImageViewer();
		Application.Run(form);
	}

}

internal class ImageWindow : Form
{
	private Image image;

	public ImageWindow(String filename, Image image)
	{
		this.image = image;
		ClientSize = image.Size;
		Text = Path.GetFileName(filename);
	}

	protected override void OnPaint(PaintEventArgs args)
	{
		args.Graphics.DrawImage(image, 0, 0);
	}

}


Unhandled Exception: System.ArgumentException: '-2147483648' is not a
valid value for 'Value'. 'Value' should be between 'Minimum' and
'Maximum'
in &lt;0x00163&gt; System.Windows.Forms.ScrollBar:set_Value (Int32 value)
in (wrapper remoting-invoke-with-check)
System.Windows.Forms.ScrollBar:set_Value (int)
in &lt;0x00131&gt; System.Windows.Forms.MdiClient:CalcHBar (Int32 left, Int32
right, Int32 right_edge, Boolean vert_vis)
in &lt;0x007d7&gt; System.Windows.Forms.MdiClient:SizeScrollBars ()
in &lt;0x0000a&gt; System.Windows.Forms.MdiClient:FormLocationChanged
(System.Object sender, System.EventArgs e)
in (wrapper delegate-invoke)
System.MulticastDelegate:invoke_void_object_EventArgs
(object,System.EventArgs)
in &lt;0x0002e&gt; System.Windows.Forms.Control:OnLocationChanged
(System.EventArgs e)
in &lt;0x0016a&gt; System.Windows.Forms.Control:UpdateBounds (Int32 x, Int32
y, Int32 width, Int32 height, Int32 clientWidth, Int32 clientHeight)
in &lt;0x00149&gt; System.Windows.Forms.Control:UpdateBounds ()
in &lt;0x00375&gt; System.Windows.Forms.Control:WndProc
(System.Windows.Forms.Message m)
in &lt;0x0000d&gt; System.Windows.Forms.ScrollableControl:WndProc
(System.Windows.Forms.Message m)
in &lt;0x0000d&gt; System.Windows.Forms.ContainerControl:WndProc
(System.Windows.Forms.Message m)
in &lt;0x00370&gt; System.Windows.Forms.Form:WndProc
(System.Windows.Forms.Message m)
in &lt;0x00014&gt; System.Windows.Forms.Control+ControlNativeWindow:WndProc
(System.Windows.Forms.Message m)
in &lt;0x0011e&gt; System.Windows.Forms.NativeWindow:WndProc (IntPtr hWnd, Msg
msg, IntPtr wParam, IntPtr lParam)
in &lt;0x00013&gt; System.Windows.Forms.XplatUIX11:SendMessage (IntPtr hwnd,
Msg message, IntPtr wParam, IntPtr lParam)
in &lt;0x0024e&gt; System.Windows.Forms.XplatUIX11:SetVisible (IntPtr handle,
Boolean visible)
in &lt;0x0001a&gt; System.Windows.Forms.XplatUI:SetVisible (IntPtr handle,
Boolean visible)
in &lt;0x0007d&gt; System.Windows.Forms.Control:SetVisibleCore (Boolean value)
in &lt;0x0000f&gt; System.Windows.Forms.Form:SetVisibleCore (Boolean value)
in &lt;0x00013&gt; System.Windows.Forms.Control:set_Visible (Boolean value)
in (wrapper remoting-invoke-with-check)
System.Windows.Forms.Control:set_Visible (bool)
in &lt;0x00144&gt; ImageViewer:OpenClicked (System.Object sender,
System.EventArgs e)
in (wrapper delegate-invoke)
System.MulticastDelegate:invoke_void_object_EventArgs
(object,System.EventArgs)
in &lt;0x0001d&gt; System.Windows.Forms.MenuItem:OnClick (System.EventArgs e)
in &lt;0x00010&gt; System.Windows.Forms.MenuItem:PerformClick ()
in (wrapper remoting-invoke-with-check)
System.Windows.Forms.MenuItem:PerformClick ()
in &lt;0x00377&gt; System.Windows.Forms.MenuTracker:OnClick
(System.Windows.Forms.MouseEventArgs args)
in &lt;0x00e61&gt; System.Windows.Forms.Form:WndProc
(System.Windows.Forms.Message m)
in &lt;0x00014&gt; System.Windows.Forms.Control+ControlNativeWindow:WndProc
(System.Windows.Forms.Message m)
in &lt;0x0011e&gt; System.Windows.Forms.NativeWindow:WndProc (IntPtr hWnd, Msg
msg, IntPtr wParam, IntPtr lParam)
in &lt;0x00016&gt; System.Windows.Forms.XplatUIX11:DispatchMessage
(System.Windows.Forms.MSG msg)
in &lt;0x00015&gt; System.Windows.Forms.XplatUI:DispatchMessage
(System.Windows.Forms.MSG msg)
in &lt;0x005fe&gt; System.Windows.Forms.Application:RunLoop (Boolean Modal,
System.Windows.Forms.ApplicationContext context)
in &lt;0x00024&gt; System.Windows.Forms.Application:Run
(System.Windows.Forms.Form mainForm)
in &lt;0x00024&gt; ImageViewer:Main (System.String[] args)
&lt;--8

-- 
&quot;Logic, my dear Zoe, is merely the ability to be wrong with authority&quot; -
Dr Who

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002324.html">[Mono-winforms-list] ImageList in Mono 1.1.15
</A></li>
	<LI>Next message: <A HREF="002326.html">[Mono-winforms-list] set_Value seems to be having a problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2325">[ date ]</a>
              <a href="thread.html#2325">[ thread ]</a>
              <a href="subject.html#2325">[ subject ]</a>
              <a href="author.html#2325">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
