<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Patch for CPDrawComboButton
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jba-mono%40optusnet.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001353.html">
   <LINK REL="Next"  HREF="001355.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Patch for CPDrawComboButton
   </H1>
    <B>jba
    </B> 
    <A HREF="mailto:jba-mono%40optusnet.com.au"
       TITLE="[Mono-winforms-list] Patch for CPDrawComboButton">jba-mono@optusnet.com.au
       </A><BR>
    <I>Tue, 01 Feb 2005 00:14:00 +1100</I>
    <P><UL>
        <LI> Previous message: <A HREF="001353.html">[Mono-winforms-list] Displaying Form in Another Assembly
</A></li>
        <LI> Next message: <A HREF="001355.html">[Mono-winforms-list] Patch for CPDrawComboButton
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1354">[ date ]</a>
              <a href="thread.html#1354">[ thread ]</a>
              <a href="subject.html#1354">[ subject ]</a>
              <a href="author.html#1354">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-Jqzf+nm888LMzDUd7suM
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hey guys,

I know jordi is working on ComboBox at the moment, so I didn't know if I
could commit this change. It makes the combo button render properly when
pushed (like in windows).

In actuality the same kind of painting fixes that were applied to the
button classes need to be applied here.

So am I right to apply ?

Regards,

JBA.
P.S. patch was created in Maintenance.Windows.Forms folder

--=-Jqzf+nm888LMzDUd7suM
Content-Disposition: attachment; filename=CPComboButtonPushedFix.patch
Content-Type: text/x-patch; name=CPComboButtonPushedFix.patch; charset=UTF-8
Content-Transfer-Encoding: 7bit

Index: System.Windows.Forms/ThemeWin32Classic.cs
===================================================================
--- System.Windows.Forms/ThemeWin32Classic.cs	(revision 39835)
+++ System.Windows.Forms/ThemeWin32Classic.cs	(working copy)
@@ -3622,7 +3622,10 @@
 				ControlPaint.DrawBorder(graphics, rectangle, ColorButtonShadow, ButtonBorderStyle.Solid);
 			} else {
 				if ((state &amp; (ButtonState.Pushed | ButtonState.Checked))!=0) {
-					CPDrawBorder3D(graphics, rectangle, Border3DStyle.Sunken, Border3DSide.Left | Border3DSide.Top | Border3DSide.Right | Border3DSide.Bottom, ColorButtonFace);
+					// this needs to render like a pushed button - jba
+					// CPDrawBorder3D(graphics, rectangle, Border3DStyle.Sunken, Border3DSide.Left | Border3DSide.Top | Border3DSide.Right | Border3DSide.Bottom, ColorButtonFace);
+					Rectangle trace_rectangle = new Rectangle(rectangle.X, rectangle.Y, Math.Max (rectangle.Width-1, 0), Math.Max (rectangle.Height-1, 0));
+					graphics.DrawRectangle (ResPool.GetPen (ControlPaint.Dark (ColorButtonFace)), trace_rectangle);
 				} else {
 					CPDrawBorder3D(graphics, rectangle, Border3DStyle.Raised, Border3DSide.Left | Border3DSide.Top | Border3DSide.Right | Border3DSide.Bottom, ColorButtonFace);
 				}

--=-Jqzf+nm888LMzDUd7suM--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001353.html">[Mono-winforms-list] Displaying Form in Another Assembly
</A></li>
	<LI> Next message: <A HREF="001355.html">[Mono-winforms-list] Patch for CPDrawComboButton
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1354">[ date ]</a>
              <a href="thread.html#1354">[ thread ]</a>
              <a href="subject.html#1354">[ subject ]</a>
              <a href="author.html#1354">[ author ]</a>
         </LI>
       </UL>
</body></html>
