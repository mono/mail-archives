<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list]
	System.Windows.Forms.Form:PaintEventHandleris called only when you
	increase the form
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%0A%09System.Windows.Forms.Form%3APaintEventHandleris%20called%20only%20when%20you%0A%09increase%20the%20form&In-Reply-To=4368D8AC.5060403%40silvertalon.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002117.html">
   <LINK REL="Next"  HREF="002122.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list]
	System.Windows.Forms.Form:PaintEventHandleris called only when you
	increase the form</H1>
    <B>Jonathan Gilbert</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%0A%09System.Windows.Forms.Form%3APaintEventHandleris%20called%20only%20when%20you%0A%09increase%20the%20form&In-Reply-To=4368D8AC.5060403%40silvertalon.net"
       TITLE="[Mono-winforms-list]
	System.Windows.Forms.Form:PaintEventHandleris called only when you
	increase the form">2a5gjx302 at sneakemail.com
       </A><BR>
    <I>Wed Nov  2 19:29:33 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002117.html">[Mono-winforms-list]
	System.Windows.Forms.Form:	PaintEventHandler is called only when you
	increase the form
</A></li>
        <LI>Next message: <A HREF="002122.html">[Mono-winforms-list]System.Windows.Forms.Form:PaintEventHandleris
	called only when youincrease the form
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2121">[ date ]</a>
              <a href="thread.html#2121">[ thread ]</a>
              <a href="subject.html#2121">[ subject ]</a>
              <a href="author.html#2121">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 10:18 AM 02/11/2005 -0500, Robert Havens wrote:
[snip]
&gt;<i> [..] But DO NOT paint from anywhere else.
</I>
To the best of my knowledge, the use of 'Refresh()' or code such as:

using (Graphics g = base.CreateGraphics())
{
  g.DrawWhatever(..);
  ...
}

..is not only legal but considered best practice for applications whose
display changes frequently. While GUI widgets cannot be altered outside of
the UI thread, System.Drawing has no such restriction and places only a few
requirements, mostly of the form that two threads may not be using the same
object concurrently. Mono has supported painting by means of
CreateGraphics() or Refresh() for a long time, and I regularly test
applications of mine which use this technique.

The reason these methods of painting are preferable to Refresh() is that
the message used by Invalidate() goes onto the same queue as any other
window message, including keyboard &amp; mouse events. If it takes long enough
to repaint the display for more than one subsequent input event to be
generated, the system quickly degenerates with increasingly large numbers
of input events separating the paint messages. The framerate needlessly
drops, essentially to zero given busy enough input. Using Refresh() or
CreateGraphics(), on the other hand, provides for immediate lag-free update
of the display.

In general, also, Refresh() is preferable to CreateGraphics() for anything
other than simple bitmap blitting because it respects
ControlStyles.DoubleBuffer, passing a Graphics to the OnPaint event which
draws off-screen.

In the specific case of the OnSizeChanged event, it is probably better to
use Invalidate() unless you have some special reason to force a full
repaint on every single mouse movement. If you can draw quickly enough,
doing so could produce an aesthetically pleasing animated scaling effect.
If you aren't concerned so much with that, though, you will use far less
CPU time by using Invalidate() (or, better, by having the framework call it
for you by setting ControlStyles.ResizeRedraw when the control is created).

Jonathan Gilbert
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002117.html">[Mono-winforms-list]
	System.Windows.Forms.Form:	PaintEventHandler is called only when you
	increase the form
</A></li>
	<LI>Next message: <A HREF="002122.html">[Mono-winforms-list]System.Windows.Forms.Form:PaintEventHandleris
	called only when youincrease the form
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2121">[ date ]</a>
              <a href="thread.html#2121">[ thread ]</a>
              <a href="subject.html#2121">[ subject ]</a>
              <a href="author.html#2121">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
