<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] System.Windows.Forms.XplatUI ---&gt; &gt; System.Net.Sockets.SocketException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms%40zurgy.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001629.html">
   <LINK REL="Next"  HREF="001631.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] System.Windows.Forms.XplatUI ---&gt; &gt; System.Net.Sockets.SocketException
   </H1>
    <B>Ben Lamb
    </B> 
    <A HREF="mailto:mono-winforms%40zurgy.org"
       TITLE="[Mono-winforms-list] System.Windows.Forms.XplatUI ---&gt; &gt; System.Net.Sockets.SocketException">mono-winforms@zurgy.org
       </A><BR>
    <I>Tue, 3 May 2005 22:32:22 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="001629.html">[Mono-winforms-list] Double Buffering
</A></li>
        <LI> Next message: <A HREF="001631.html">FIXED! [Mono-winforms-list] System.Windows.Forms.XplatUI ---&gt; System.Net.Sockets.SocketException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1630">[ date ]</a>
              <a href="thread.html#1630">[ thread ]</a>
              <a href="subject.html#1630">[ subject ]</a>
              <a href="author.html#1630">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Peter,

Hmm, I don't think it's Mono problem. By default DISPLAY is set to :0.0

If I set it to localhost:0.0 or localhost:0 I don't get the error but I don't 
see any windows or dialogs appear. The program appears to run as if I put 
some WriteLine statements before the MessageBox these are output to the 
console. Finally it times out with:

Unhandled Exception: System.TypeInitializationException: An exception was 
thrown by the type initializer for System.Windows.Forms.XplatUI ---&gt; 
System.ArgumentNullException: Could not open display (X-Server required. 
Check you DISPLAY environment variable)
Parameter name: Display
in &lt;0x005fb&gt; System.Windows.Forms.XplatUIX11:SetDisplay (IntPtr 
display_handle)
in &lt;0x00098&gt; System.Windows.Forms.XplatUIX11:.ctor ()

[rest of stacktrace skipped]

After changing DISPLAY if I try to run xhost + it pauses for ages before 
returning:

xhost:  unable to open display &quot;localhost:0.0&quot;

It would appear that X is configured slightly oddly under Kubuntu, I imagine, 
as you suggest, the permissions are broken somewhere. The loopback interface 
seems to be misconfigured, for example, I couldn't ping localhost or 
127.0.0.1. Assigning an IP of 127.0.0.1 to lo made ping work but didn't help 
X.

Oh, the reason for the same error under 1.1.6 was because I'd upgraded 
System.Windows.Forms to one of the nightly builds available on the Mono 
website in my mono 1.1.6 installation before compiling everything SVN.

Thanks for your ideas. Please do you have any further suggestions on what bits 
of the X config might be broken?

Thanks,

Ben.


&gt;<i> Are you sure you got the *same* error with 1.1.6? Or maybe just also an
</I>&gt;<i> error, but a different one. The one you post might be related to the new IO
</I>&gt;<i> layer, but I don't think that was available in 1.1.6 yet. If it is indeed
</I>&gt;<i> the same, it might be related to what your DISPLAY variable is set to.
</I>&gt;<i> The error you are getting is WSAEADDRNOTAVAIL: This error occurs when an
</I>&gt;<i> application attempts to connect to a remote host, and the address is not
</I>&gt;<i> available from the local system
</I>&gt;<i>
</I>&gt;<i> Are you sure that you can talk/have the rights to/etc whatever transport
</I>&gt;<i> you are trying to use (dependent on your display var).
</I>&gt;<i>
</I>&gt;<i> Sorry to be so vague, but I don't have much to go on.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>   Peter
</I>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001629.html">[Mono-winforms-list] Double Buffering
</A></li>
	<LI> Next message: <A HREF="001631.html">FIXED! [Mono-winforms-list] System.Windows.Forms.XplatUI ---&gt; System.Net.Sockets.SocketException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1630">[ date ]</a>
              <a href="thread.html#1630">[ thread ]</a>
              <a href="subject.html#1630">[ subject ]</a>
              <a href="author.html#1630">[ author ]</a>
         </LI>
       </UL>
</body></html>
