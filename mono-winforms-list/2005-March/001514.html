<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] libgdiplus/System.Drawing patch:  native support for indexed Bitmaps
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:dan%40astusa.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001513.html">
   <LINK REL="Next"  HREF="001515.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] libgdiplus/System.Drawing patch:  native support for indexed Bitmaps
   </H1>
    <B>Dan Maltes
    </B> 
    <A HREF="mailto:dan%40astusa.com"
       TITLE="[Mono-winforms-list] libgdiplus/System.Drawing patch:  native support for indexed Bitmaps">dan@astusa.com
       </A><BR>
    <I>Wed, 16 Mar 2005 16:19:17 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="001513.html">[Mono-winforms-list] libgdiplus/System.Drawing patch:  native support for indexed Bitmaps
</A></li>
        <LI> Next message: <A HREF="001515.html">[Mono-winforms-list] libgdiplus/System.Drawing patch:  native support for indexed Bitmaps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1514">[ date ]</a>
              <a href="thread.html#1514">[ thread ]</a>
              <a href="subject.html#1514">[ subject ]</a>
              <a href="author.html#1514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>LibTIFF for instance: <A HREF="http://libtiff.maptools.org/">http://libtiff.maptools.org/</A>

-Dan 

-----Original Message-----
From: <A HREF="mailto:mono-winforms-list-admin@lists.ximian.com">mono-winforms-list-admin@lists.ximian.com</A>
[mailto:<A HREF="mailto:mono-winforms-list-admin@lists.ximian.com">mono-winforms-list-admin@lists.ximian.com</A>] On Behalf Of Dan Maltes
Sent: Wednesday, March 16, 2005 4:15 PM
To: 'Jonathan Gilbert'; <A HREF="mailto:mono-winforms-list@lists.ximian.com">mono-winforms-list@lists.ximian.com</A>
Subject: RE: [Mono-winforms-list] libgdiplus/System.Drawing patch: native
support for indexed Bitmaps

Any chance there is existing TIFF loading code available that could be used
with permission in Mono?  Could save time.

Dan Maltes

-----Original Message-----
From: <A HREF="mailto:mono-winforms-list-admin@lists.ximian.com">mono-winforms-list-admin@lists.ximian.com</A>
[mailto:<A HREF="mailto:mono-winforms-list-admin@lists.ximian.com">mono-winforms-list-admin@lists.ximian.com</A>] On Behalf Of Jonathan
Gilbert
Sent: Wednesday, March 16, 2005 3:35 PM
To: <A HREF="mailto:mono-winforms-list@lists.ximian.com">mono-winforms-list@lists.ximian.com</A>
Subject: Re: [Mono-winforms-list] libgdiplus/System.Drawing patch: native
support for indexed Bitmaps

At 02:08 PM 16/03/2005 -0300, Fabian Luque wrote:
&gt;&gt;<i> Probably the cleanest way to remove the warning, without making the 
</I>&gt;&gt;<i> code do an extra assignment when it doesn't have to, is to add a 
</I>&gt;&gt;<i> 'default' block that sets it to 'NULL':
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>         default: default_palette = NULL;
</I>&gt;<i>
</I>&gt;<i>After making this change, libgdiplus compiled just fine.
</I>&gt;<i>
</I>&gt;<i>Now, when I open my 1bpp TIFF file and the save it to PNG I'm still 
</I>&gt;<i>getting a 32bpp 180 KB file instead of a 1bpp file around 80 KB.
</I>
The problem here is that because the TIFF format is massive and complex, I
decided to postpone indexed TIFF loading support for a later patch. This
patch does not alter the way the TIFF codec loads TIFF files, and as such
they are upsampled to 32bpp at load time. Then, when you go to save the
Bitmap, the PNG codec says &quot;hmm, this is a 32-bpp RGB Bitmap object, so I'll
make a 24-bit RGB PNG file&quot;.

Is it possible for you to pre-convert the TIFFs to another format, like BMP
or PNG, or is this the whole point of what you were trying to accomplish
using System.Drawing? :-)

Jonathan Gilbert

_______________________________________________
Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>



_______________________________________________
Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001513.html">[Mono-winforms-list] libgdiplus/System.Drawing patch:  native support for indexed Bitmaps
</A></li>
	<LI> Next message: <A HREF="001515.html">[Mono-winforms-list] libgdiplus/System.Drawing patch:  native support for indexed Bitmaps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1514">[ date ]</a>
              <a href="thread.html#1514">[ thread ]</a>
              <a href="subject.html#1514">[ subject ]</a>
              <a href="author.html#1514">[ author ]</a>
         </LI>
       </UL>
</body></html>
