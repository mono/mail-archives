<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] OpenFileDialog throwing ArgumentNullException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:eric.sowell%40lexelsoftware.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001551.html">
   <LINK REL="Next"  HREF="001560.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] OpenFileDialog throwing ArgumentNullException
   </H1>
    <B>Eric Sowell
    </B> 
    <A HREF="mailto:eric.sowell%40lexelsoftware.com"
       TITLE="[Mono-winforms-list] OpenFileDialog throwing ArgumentNullException">eric.sowell@lexelsoftware.com
       </A><BR>
    <I>Tue, 29 Mar 2005 00:02:03 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="001551.html">[Mono-winforms-list] OpenFileDialog throwing ArgumentNullException
</A></li>
        <LI> Next message: <A HREF="001560.html">[Mono-winforms-list] Mono 1.1.5 and Winform OSX Performance?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1552">[ date ]</a>
              <a href="thread.html#1552">[ thread ]</a>
              <a href="subject.html#1552">[ subject ]</a>
              <a href="author.html#1552">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The issue is re-created simply by invoking an OpenFileDialog as you did 
in your example. If you run it with the Mono runtime you get the error 
that you posted. However, if I run it with the Microsoft runtime I get a 
different message:

An unhandled exception of type 
'System.Resources.MissingManifestResourceException' occurred in mscorlib.dll

Additional information: Could not find any resources appropriate for the 
specified culture (or the neutral culture) in the given assembly.  Make 
sure &quot;System.Windows.Forms.resources&quot; was correctly embedded or linked 
into assembly &quot;System.Windows.Forms&quot;.
baseName: System.Windows.Forms  locationInfo: &lt;null&gt;  resource file 
name: System.Windows.Forms.resources  assembly: System.Windows.Forms, 
Version=0.0.0.0, Culture=neutral, PublicKeyToken=null

I built the project and stepped through the code in Visual Studio and, 
as the stack trace really tells us anyway, in line 1403 of FileDialog 
the code is trying to load an image called &quot;paper&quot; which is in some 
resource file somewhere. The problem is caused because the code can't 
find the resource file/can't load the images, because if you step in to 
the code you'll see at line 400 of ImageList that the list (if you're 
still debugging) has not images in it, and so retrieves a null 
reference. At least, that's what I'm seeing :). And, fyi, if you didn't 
know already, the Managed.Windows.Forms code can be opened, built, and 
worked on inside of Visual Studio. There is a solution file 
(\mono\trunk\mcs\class\Managed.Windows.Forms) ready for you to use. 
You'll have to add a number of files to the project for it to compile 
correctly, but it only takes a couple minutes to find the files. I just 
try to compile and see what blows up, and then add the files it can't find.

So, though the differences could be explained in another way, it seems 
that the error is being thrown by MS's runtime as a 
MissingManifestResourceException but by the Mono runtime it is not, and 
is retrieving a null value without throwing said exception, which then 
causes the ImageList in the FileDialog to throw an exception because it 
is getting a null image reference.

Of course, that isn't the root cause. The root cause is a missing 
resource, it seems. That I just don't know how to fix. Anybody out there 
know that?


Environment:
Running Windows XP
When running Mono runtime, working off of the 1.1.4 installation.
When running using Microsoft's runtime, I'm using the mono SWF library 
instead of the MS, pulled just about an hour ago from svn.


Eric Sowell


Bill Medland wrote:

&gt;<i>On March 28, 2005 04:55 pm, Trimble, Nathan G wrote:
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>I realize some people on this list may know the status of various
</I>&gt;&gt;<i>controls at any given moment, but I imagine there are also some lurkers
</I>&gt;&gt;<i>on the list who may just be trying to learn a little bit about mono.
</I>&gt;&gt;<i>I'm pretty decent with C# but not real knowledgeable with mono.  If you
</I>&gt;&gt;<i>could post a little code along with your questions I might be able to
</I>&gt;&gt;<i>try running it too.  Just a thought.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Well, Since &quot; Test program simply declares an OpenFileDialog&quot; is clearly not 
</I>&gt;<i>explicit enough:
</I>&gt;<i>class ofd01 {
</I>&gt;<i>    public static void Main () {
</I>&gt;<i>        System.Windows.Forms.OpenFileDialog ofd = new 
</I>&gt;<i>System.Windows.Forms.OpenFileDialog();
</I>&gt;<i>        System.Console.WriteLine (&quot;Hello, World&quot;);
</I>&gt;<i>    }
</I>&gt;<i>}
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>Sincerely,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Nate Trimble
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>-----Original Message-----
</I>&gt;&gt;<i>From: <A HREF="mailto:mono-winforms-list-admin@lists.ximian.com">mono-winforms-list-admin@lists.ximian.com</A>
</I>&gt;&gt;<i>[mailto:<A HREF="mailto:mono-winforms-list-admin@lists.ximian.com">mono-winforms-list-admin@lists.ximian.com</A>] On Behalf Of Bill
</I>&gt;&gt;<i>Medland
</I>&gt;&gt;<i>Sent: Monday, March 28, 2005 4:37 PM
</I>&gt;&gt;<i>To: <A HREF="mailto:mono-winforms-list@lists.ximian.com">mono-winforms-list@lists.ximian.com</A>
</I>&gt;&gt;<i>Subject: [Mono-winforms-list] OpenFileDialog throwing
</I>&gt;&gt;<i>ArgumentNullException
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Can anyone tell me, is this me doing something wrong or is it a current
</I>&gt;&gt;<i>bug in the code?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>(Assuming I am doing the build properly) mono is the current version
</I>&gt;&gt;<i>updated 10 minutes ago.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Test program simply declares an OpenFileDialog
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Program throws:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Unhandled Exception: System.ArgumentNullException: Cannot add null image
</I>&gt;&gt;<i>Parameter name: value in &lt;0x00104&gt;
</I>&gt;&gt;<i>System.Windows.Forms.ImageList+ImageCollection:Add
</I>&gt;&gt;<i>(System.Drawing.Image value)
</I>&gt;&gt;<i>in &lt;0x001a6&gt; System.Windows.Forms.MWFFileView:.ctor () in (wrapper
</I>&gt;&gt;<i>remoting-invoke-with-check) System.Windows.Forms.MWFFileView:.ctor
</I>&gt;&gt;<i>()
</I>&gt;&gt;<i>in &lt;0x00236&gt; System.Windows.Forms.FileDialog+FileDialogPanel:.ctor
</I>&gt;&gt;<i>(System.Windows.Forms.FileDialog fileDialog) in (wrapper
</I>&gt;&gt;<i>remoting-invoke-with-check) FileDialogPanel:.ctor
</I>&gt;&gt;<i>(System.Windows.Forms.FileDialog)
</I>&gt;&gt;<i>in &lt;0x000ad&gt; System.Windows.Forms.OpenFileDialog:.ctor () in (wrapper
</I>&gt;&gt;<i>remoting-invoke-with-check) System.Windows.Forms.OpenFileDialog:.ctor ()
</I>&gt;&gt;<i>in &lt;0x00024&gt; ofd01:Main ()
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>--
</I>&gt;&gt;<i>Bill Medland
</I>&gt;&gt;<i>mailto:<A HREF="mailto:billmedland@mercuryspeed.com">billmedland@mercuryspeed.com</A>
</I>&gt;&gt;<i><A HREF="http://webhome.idirect.com/~kbmed">http://webhome.idirect.com/~kbmed</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
</I>&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
</I>&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001551.html">[Mono-winforms-list] OpenFileDialog throwing ArgumentNullException
</A></li>
	<LI> Next message: <A HREF="001560.html">[Mono-winforms-list] Mono 1.1.5 and Winform OSX Performance?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1552">[ date ]</a>
              <a href="thread.html#1552">[ thread ]</a>
              <a href="subject.html#1552">[ subject ]</a>
              <a href="author.html#1552">[ author ]</a>
         </LI>
       </UL>
</body></html>
