Index: class/Managed.Windows.Forms/System.Windows.Forms/ChangeLog
===================================================================
--- class/Managed.Windows.Forms/System.Windows.Forms/ChangeLog	(revision 146079)
+++ class/Managed.Windows.Forms/System.Windows.Forms/ChangeLog	(working copy)
@@ -1,3 +1,9 @@
+2009-11-12	Tom Hindle <tom_hindle@sil.org>
+	* XplatUIX11.cs: Move Keyboard.FocusIn method call in GetMessage
+	so XIM has focus before calling SendMessage with WM_SETFOCUS. This
+	allows changing the scim keyboards in the focus handing of winform
+	controls.
+
 2009-11-11  Carlos Alberto Cortez <calberto.cortez@gmail.com>
 
 	* DataGrid.cs: Add a new internal property to get the maximum possible
Index: class/Managed.Windows.Forms/System.Windows.Forms/XplatUIX11.cs
===================================================================
--- class/Managed.Windows.Forms/System.Windows.Forms/XplatUIX11.cs	(revision 144586)
+++ class/Managed.Windows.Forms/System.Windows.Forms/XplatUIX11.cs	(working copy)
@@ -4395,8 +4395,8 @@
 						}
 						goto ProcessNextMessage;
 					}
+					Keyboard.FocusIn (FocusWindow);
 					SendMessage(FocusWindow, Msg.WM_SETFOCUS, IntPtr.Zero, IntPtr.Zero);
-					Keyboard.FocusIn (FocusWindow);
 					goto ProcessNextMessage;
 				}
 
