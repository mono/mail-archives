<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Weird issues reading pixels of jpg	file	on	osx
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Weird%20issues%20reading%20pixels%20of%20jpg%09file%09on%0A%09osx&In-Reply-To=1156982913.26675.211.camel%40poupou.home">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002462.html">
   <LINK REL="Next"  HREF="002463.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Weird issues reading pixels of jpg	file	on	osx</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Weird%20issues%20reading%20pixels%20of%20jpg%09file%09on%0A%09osx&In-Reply-To=1156982913.26675.211.camel%40poupou.home"
       TITLE="[Mono-winforms-list] Weird issues reading pixels of jpg	file	on	osx">sebastien at ximian.com
       </A><BR>
    <I>Thu Aug 31 08:25:26 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002462.html">[Mono-winforms-list] Weird issues reading pixels of jpg file	on	osx
</A></li>
        <LI>Next message: <A HREF="002463.html">Atsushi~&#164;p&#170;&#176;&#175;W&#186;&#235;&#166;b&#177;J&#170;&#217;&#164;&#196;&#164;&#222;&#190;&#199;&#169;n&#170;&#186;&#168;k&#170;B&#164;&#205;...&#172;&#221;&#166;&#252;&#179;&#230;&#175;&#194;&#161;&#227;&#161;&#227;&#189;&#214;&#170;&#190;&#178;]&#166;&#168;&#179;o&#188;&#203;XD 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2464">[ date ]</a>
              <a href="thread.html#2464">[ thread ]</a>
              <a href="subject.html#2464">[ subject ]</a>
              <a href="author.html#2464">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Dan,

It may be unrelated to endian issues (but I still like your answers,
multiple problems are common ;-) as I also found out differences between
Mono on Linux i386 and Windows. 

It seems, in my test case, that the first two lines of the decoded jpeg
aren't correct. In the first line all 2nd and 4th bytes are identical,
while on the second line all 3rd and 4th bytes are identical (on the
mono side, the 4th byte being correct). All other lines looks correct
(but needs more investigation).

I'm re-enabling the JpegCodec unit tests (not sure why they were
commented, the ChangeLog says &quot;fixed&quot;) and adding new test cases.

Thanks for noticing this.

On Wed, 2006-08-30 at 20:08 -0400, Sebastien Pouliot wrote:
&gt;<i> Hello Dan,
</I>&gt;<i> 
</I>&gt;<i> Did the same code worked on a previous version of Mono ? (if so which
</I>&gt;<i> version ?) or are you testing this for the first time ?
</I>&gt;<i> 
</I>&gt;<i> Because I recently fixed many endian issues affecting Mac OS X (and
</I>&gt;<i> other architectures). It is possible that one of them has broken
</I>&gt;<i> something else :-(
</I>&gt;<i> 
</I>&gt;<i> I'll try to build a similar test case using one of the embedded bitmap
</I>&gt;<i> files we have in the unit tests and see how to bots reacts to it.
</I>&gt;<i> 
</I>&gt;<i> On Wed, 2006-08-30 at 15:56 -0700, Dan Shryock wrote:
</I>&gt;<i> &gt; When attempting to read the pixel bytes of a jpg on osx (using the
</I>&gt;<i> &gt; 1.1.17 build just released) I am getting different results on windows
</I>&gt;<i> &gt; versus osx.  Does anybody have any ideas why I am getting these
</I>&gt;<i> &gt; different results?  Any information is very appreciated.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Dan
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The code being used is as follows:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Bitmap bmp = new Bitmap(&quot;file.jpg&quot;);
</I>&gt;<i> &gt; BitmapData bmpdata = bmp.LockBits(new Rectangle(0,0,bmp.Width,
</I>&gt;<i> &gt; bmp.Height),ImageLockMode.ReadOnly,PixelFormat.Format24bppRgb);
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; unsafe{
</I>&gt;<i> &gt; 	byte* scandata = (byte*) bmpdata.Scan0;
</I>&gt;<i> &gt; 	for(int i=0; i&lt;30; i++){
</I>&gt;<i> &gt; 		Console.WriteLine(scandata[i]);
</I>&gt;<i> &gt; 	}
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; and the results using mono on windows are:
</I>&gt;<i> &gt; 187
</I>&gt;<i> &gt; 144
</I>&gt;<i> &gt; 77
</I>&gt;<i> &gt; 187
</I>&gt;<i> &gt; 144
</I>&gt;<i> &gt; 77
</I>&gt;<i> &gt; 186
</I>&gt;<i> &gt; 144
</I>&gt;<i> &gt; 75
</I>&gt;<i> &gt; 188
</I>&gt;<i> &gt; 143
</I>&gt;<i> &gt; 75
</I>&gt;<i> &gt; 188
</I>&gt;<i> &gt; 144
</I>&gt;<i> &gt; 73
</I>&gt;<i> &gt; 189
</I>&gt;<i> &gt; 145
</I>&gt;<i> &gt; 74
</I>&gt;<i> &gt; 192
</I>&gt;<i> &gt; 147
</I>&gt;<i> &gt; 74
</I>&gt;<i> &gt; 192
</I>&gt;<i> &gt; 147
</I>&gt;<i> &gt; 74
</I>&gt;<i> &gt; 192
</I>&gt;<i> &gt; 150
</I>&gt;<i> &gt; 75
</I>&gt;<i> &gt; 191
</I>&gt;<i> &gt; 149
</I>&gt;<i> &gt; 74
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; while the results on osx are:
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 77
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 77
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 144
</I>&gt;<i> &gt; 75
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 143
</I>&gt;<i> &gt; 75
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 73
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 188
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 188
</I>&gt;<i> &gt; 144
</I>&gt;<i> &gt; 255
</I>&gt;<i> &gt; 189
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-winforms-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">Mono-winforms-list at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>-- 
Sebastien Pouliot  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">sebastien at ximian.com</A>&gt;
Blog: <A HREF="http://pages.infinit.net/ctech/">http://pages.infinit.net/ctech/</A>

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002462.html">[Mono-winforms-list] Weird issues reading pixels of jpg file	on	osx
</A></li>
	<LI>Next message: <A HREF="002463.html">Atsushi~&#164;p&#170;&#176;&#175;W&#186;&#235;&#166;b&#177;J&#170;&#217;&#164;&#196;&#164;&#222;&#190;&#199;&#169;n&#170;&#186;&#168;k&#170;B&#164;&#205;...&#172;&#221;&#166;&#252;&#179;&#230;&#175;&#194;&#161;&#227;&#161;&#227;&#189;&#214;&#170;&#190;&#178;]&#166;&#168;&#179;o&#188;&#203;XD 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2464">[ date ]</a>
              <a href="thread.html#2464">[ thread ]</a>
              <a href="subject.html#2464">[ subject ]</a>
              <a href="author.html#2464">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
