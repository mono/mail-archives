<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] [PATCH] ListView sorting fixes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20%5BPATCH%5D%20ListView%20sorting%20fixes&In-Reply-To=1157042477.3541.52.camel%40linux-bh3a.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002470.html">
   <LINK REL="Next"  HREF="002459.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] [PATCH] ListView sorting fixes</H1>
    <B>Gert Driesen</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20%5BPATCH%5D%20ListView%20sorting%20fixes&In-Reply-To=1157042477.3541.52.camel%40linux-bh3a.site"
       TITLE="[Mono-winforms-list] [PATCH] ListView sorting fixes">gert.driesen at telenet.be
       </A><BR>
    <I>Thu Aug 31 14:05:13 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002470.html">[Mono-winforms-list] [PATCH] ListView sorting fixes
</A></li>
        <LI>Next message: <A HREF="002459.html">[Mono-winforms-list] NullReferenceException	callingSWF.Control.set_AccessibleRole
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2471">[ date ]</a>
              <a href="thread.html#2471">[ thread ]</a>
              <a href="subject.html#2471">[ subject ]</a>
              <a href="author.html#2471">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Mike Kestner [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mkestner at novell.com</A>]
</I>&gt;<i> Sent: donderdag 31 augustus 2006 18:41
</I>&gt;<i> To: Gert Driesen
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-winforms-list] [PATCH] ListView sorting fixes
</I>&gt;<i> 
</I>&gt;<i> On Tue, 2006-08-29 at 21:42 +0200, Gert Driesen wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; The bugs I came across in MS.NET are:
</I>&gt;<i> &gt; - .NET 1.1: once set, modifying Sorting does not have any effect for
</I>&gt;<i> &gt; SmallIcon and LargeIcon views unless a custom IComparer is set. This
</I>&gt;<i> &gt; is fixed in .NET 2.0.
</I>&gt;<i> &gt; - .NET 2.0: setting Sorting to None also discards the custom
</I>&gt;<i> &gt; IComparer, if set.
</I>&gt;<i> 
</I>&gt;<i> Heh.  Nice detective work.  We might as well maintain bug compat on
</I>&gt;<i> this stuff.
</I>&gt;<i> 
</I>&gt;<i> &gt; Is it ok to send patches to this list or should they go to the
</I>&gt;<i> &gt; devel-list ?
</I>&gt;<i> 
</I>&gt;<i> This list is fine for patches.
</I>&gt;<i> 
</I>&gt;<i> This is beautiful work.  Thanks for providing such a detailed test
</I>&gt;<i> suite in addition to the code.
</I>&gt;<i> 
</I>&gt;<i> Comments:
</I>&gt;<i> 
</I>&gt;<i> - Considerable whitespace change in the beginning of the patch.  Please
</I>&gt;<i> try to remove as much of that as possible.
</I>
Done.

&gt;<i> - Test bug79076 never Asserts or has no Exception expected attr.  What
</I>&gt;<i> is it testing?
</I>
Before the fix for bug #79076, that code used to result in an InvalidOperationException.

&gt;<i> - In the ItemComparer, the coding standard for fields would indicate
</I>&gt;<i> 'sort_order', not '_sortOrder'.
</I>
Ok, I'll modify this. Can you send me a link to that coding standard ?

&gt;<i> - AFAICT, the two instances where Sort (false) occurs are immediately
</I>&gt;<i> followed by a call to Redraw.  So other than the overloading conflict
</I>&gt;<i> issue is there a reason for the redraw parameter on that new Sort
</I>&gt;<i> overload?
</I>
What the Sort (bool) overload is called from Sort (), redrawing is only necessary if sorting was actually performed.

I'm not sure if you really want to force a redraw from ListViewItemCollection.Add and ListViewItemCollection.AddRange, if not we can just remove the Sort (bool) overload and the explicit Redraw calls from ListViewItemCollection (as the listview will be redrawn in Sort () if sorting is performed).

I'll look into your request for additional selection unit tests, and post an updated patch when ready.

Gert

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002470.html">[Mono-winforms-list] [PATCH] ListView sorting fixes
</A></li>
	<LI>Next message: <A HREF="002459.html">[Mono-winforms-list] NullReferenceException	callingSWF.Control.set_AccessibleRole
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2471">[ date ]</a>
              <a href="thread.html#2471">[ thread ]</a>
              <a href="subject.html#2471">[ subject ]</a>
              <a href="author.html#2471">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
