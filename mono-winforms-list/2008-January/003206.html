<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Windows Forms on Mac OS X
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Windows%20Forms%20on%20Mac%20OS%20X&In-Reply-To=8EBA0C0F-A2E5-44D7-89C0-F51D52CF508F%40planet.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003204.html">
   <LINK REL="Next"  HREF="003207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Windows Forms on Mac OS X</H1>
    <B>Erik Renes</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Windows%20Forms%20on%20Mac%20OS%20X&In-Reply-To=8EBA0C0F-A2E5-44D7-89C0-F51D52CF508F%40planet.nl"
       TITLE="[Mono-winforms-list] Windows Forms on Mac OS X">keenriser at planet.nl
       </A><BR>
    <I>Wed Jan  9 07:34:29 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003204.html">[Mono-winforms-list] Windows Forms on Mac OS X
</A></li>
        <LI>Next message: <A HREF="003207.html">[Mono-winforms-list] Windows Forms on Mac OS X
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3206">[ date ]</a>
              <a href="thread.html#3206">[ thread ]</a>
              <a href="subject.html#3206">[ subject ]</a>
              <a href="author.html#3206">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Everyone,
A short status update ...

Meanwhile I have succesfully installed cairo using macports, then I  
have dllmapped the libcairo to the one installed by macports by  
editing the config file in the Mono.Framework etc/ directory:
&lt;dllmap dll=&quot;libcairo-2.dll&quot; target=&quot;/opt/local/lib/libcairo.dylib&quot;  
os=&quot;osx&quot;/&gt;

This caused the windows forms application to work, however, only in  
the second instance of X11. Let me elaborate:
First I start my test.exe using 'mono test.exe', then X11 pops up in  
the dock and does not do anything. If I quit the running X11 instance  
(right click on X in the dock and click Quit) it immediately comes  
back after closing down. Directly after, the messagebox is being shown  
as expected.

I can now run Windows Forms apps normally, however if I close this  
second instance of X11, I have to repeat the procedure to get it  
working again.
Now for development this is not so much of an issue, but runtime  
deployment I don't think any user would want to do this just to run  
one app.

Does anyone have any suggestions that I can try to make it work as  
intended? (or is this intended?) I have read something about a native  
driver for winforms, is it enabled by default in Mono 1.2.6 on Mac OS  
X? If not, maybe this is something for me to try out, if anyone could  
tell me how to enable it?

Best Regards,
Erik Renes

On Jan 9, 2008, at 9:41 AM, Erik Renes wrote:

&gt;<i> &lt;test.cs&gt;
</I>&gt;<i>
</I>&gt;<i> Hi All,
</I>&gt;<i>
</I>&gt;<i> I am currently trying to get a windows forms application to run on  
</I>&gt;<i> Mac OS X 10.5.1 (clean Mac OS X install, clean Mono install with the  
</I>&gt;<i> Mac OS X package from the website), however, it seems that there is  
</I>&gt;<i> something wrong with my setup. I have created a test application  
</I>&gt;<i> that does nothing but show a messagebox (attached: test.cs).
</I>&gt;<i>
</I>&gt;<i> The moment I do anything with windows forms, my application hangs.
</I>&gt;<i> I have used the --trace mono option to check where it goes wrong,  
</I>&gt;<i> the following happens the first time I run the application:
</I>&gt;<i>
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . ENTER:  
</I>&gt;<i> System.Windows.Forms.XplatUIX11:.ctor ()(this: 
</I>&gt;<i> 0x1d31050[System.Windows.Forms.XplatUIX11 test.exe], )
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . ENTER:  
</I>&gt;<i> System.Windows.Forms.XplatUIDriver:.ctor ()(this: 
</I>&gt;<i> 0x1d31050[System.Windows.Forms.XplatUIX11 test.exe], )
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . LEAVE:  
</I>&gt;<i> System.Windows.Forms.XplatUIDriver:.ctor ()
</I>&gt;<i>
</I>&gt;<i> [ ... lots of initialization ... ]
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . ENTER: (wrapper managed-to- 
</I>&gt;<i> native) System.Windows.Forms.XplatUIX11:XInitThreads ()()
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . LEAVE: (wrapper managed-to- 
</I>&gt;<i> native) System.Windows.Forms.XplatUIX11:XInitThreads ()result=1
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . ENTER: (wrapper managed-to- 
</I>&gt;<i> native) System.Windows.Forms.XplatUIX11:XOpenDisplay (intptr)(0x0, )
</I>&gt;<i>
</I>&gt;<i> After the XOpenDisplay, my application does not proceed.
</I>&gt;<i> Then I try to run it again (the previous application is closed, but  
</I>&gt;<i> X11 is still running) and get the following hang:
</I>&gt;<i>
</I>&gt;<i> ENTER: System.Environment:GetEnvironmentVariable (string)([STRING: 
</I>&gt;<i> 0x1822aa0:MONO_GDIP_USE_COCOA_BACKEND], )
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> ENTER: (wrapper managed-to-native)  
</I>&gt;<i> System.Security.SecurityManager:get_SecurityEnabled ()()
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> LEAVE: (wrapper managed-to-native)  
</I>&gt;<i> System.Security.SecurityManager:get_SecurityEnabled ()FALSE
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> ENTER: (wrapper managed-to-native)  
</I>&gt;<i> System.Environment:internalGetEnvironmentVariable (string)([STRING: 
</I>&gt;<i> 0x1822aa0:MONO_GDIP_USE_COCOA_BACKEND], )
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> LEAVE: (wrapper managed-to-native)  
</I>&gt;<i> System.Environment:internalGetEnvironmentVariable (string) 
</I>&gt;<i> [STRING:null],
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> LEAVE: System.Environment:GetEnvironmentVariable (string) 
</I>&gt;<i> [STRING:null],
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> ENTER: System.Environment:get_OSVersion ()()
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> LEAVE: System.Environment:get_OSVersion ()[System.OperatingSystem: 
</I>&gt;<i> 0x1d2bf00]
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> ENTER: System.Drawing.GdiplusStartupInput:MakeGdiplusStartupInput () 
</I>&gt;<i> (VALUERET:0xbfffe1b4, )
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> LEAVE: System.Drawing.GdiplusStartupInput:MakeGdiplusStartupInput () 
</I>&gt;<i> [01,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,]
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> ENTER: System.Drawing.GdiplusStartupOutput:MakeGdiplusStartupOutput  
</I>&gt;<i> ()(VALUERET:0xbfffe19c, )
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> LEAVE: System.Drawing.GdiplusStartupOutput:MakeGdiplusStartupOutput  
</I>&gt;<i> ()[00,00,00,00,00,00,00,00,]
</I>&gt;<i> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  
</I>&gt;<i> ENTER: (wrapper managed-to-native)  
</I>&gt;<i> System.Drawing.GDIPlus:GdiplusStartup  
</I>&gt;<i> (ulong 
</I>&gt;<i> &amp;,System 
</I>&gt;<i> .Drawing.GdiplusStartupInput&amp;,System.Drawing.GdiplusStartupOutput&amp;) 
</I>&gt;<i> ([BYREF:0x8fafa4], [BYREF:0xbfffe1a4], [BYREF:0xbfffe194], )
</I>&gt;<i>
</I>&gt;<i> It seems that the initialization of GDIPlus does not complete  
</I>&gt;<i> succesfully.
</I>&gt;<i>
</I>&gt;<i> I have found threads on the OS X list suggesting that I should use a  
</I>&gt;<i> dll map to tell mono where my X11 is resided, however, this is  
</I>&gt;<i> already installed by default with the mono OS X package. What I  
</I>&gt;<i> think might be the problem - I'm not sure - is that I don't have  
</I>&gt;<i> Cairo installed. If this is indeed a problem, can anyone suggest a  
</I>&gt;<i> way to install this and make mono aware of it?
</I>&gt;<i>
</I>&gt;<i> I would be happy to receive any suggestions on how to troubleshoot  
</I>&gt;<i> this issue, as I have never used a mac for development before.
</I>&gt;<i>
</I>&gt;<i> Best Regards,
</I>&gt;<i> Erik Renes_______________________________________________
</I>&gt;<i> Mono-winforms-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">Mono-winforms-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20080109/4659f22b/attachment-0001.html">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20080109/4659f22b/attachment-0001.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003204.html">[Mono-winforms-list] Windows Forms on Mac OS X
</A></li>
	<LI>Next message: <A HREF="003207.html">[Mono-winforms-list] Windows Forms on Mac OS X
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3206">[ date ]</a>
              <a href="thread.html#3206">[ thread ]</a>
              <a href="subject.html#3206">[ subject ]</a>
              <a href="author.html#3206">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
