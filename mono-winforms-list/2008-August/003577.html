<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Scrolling performance isues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Scrolling%20performance%20isues&In-Reply-To=d2ebeadd0808011354y1380ca25t5a7a58dec2c5df6c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003564.html">
   <LINK REL="Next"  HREF="003582.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Scrolling performance isues</H1>
    <B>Carlos Alberto Cortez</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Scrolling%20performance%20isues&In-Reply-To=d2ebeadd0808011354y1380ca25t5a7a58dec2c5df6c%40mail.gmail.com"
       TITLE="[Mono-winforms-list] Scrolling performance isues">calberto.cortez at gmail.com
       </A><BR>
    <I>Thu Aug  7 15:17:44 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003564.html">[Mono-winforms-list] Scrolling performance isues
</A></li>
        <LI>Next message: <A HREF="003582.html">[Mono-winforms-list] Scrolling performance isues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3577">[ date ]</a>
              <a href="thread.html#3577">[ thread ]</a>
              <a href="subject.html#3577">[ subject ]</a>
              <a href="author.html#3577">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hey Chris

Comments below.

&gt;<i> 
</I>&gt;<i> I'm also not sure flushing the paint queue before doing the XCopyArea
</I>&gt;<i> (suggestion 1 above) will be enough either.  It's very easy to imagine
</I>&gt;<i> a scenario where you're scrolling and we do another ScrollWindow
</I>&gt;<i> before all the GraphicsExpose events have been received.  We really do
</I>&gt;<i> need to block things somehow.  And it'll be more than just blocking
</I>&gt;<i> the message queue - we'll need to actually stop the thread if there's
</I>&gt;<i> a call to ScrollWindow (or anything else that ends up copying) until
</I>&gt;<i> the GraphicsExposes have been handled.
</I>
I went and began to review our code and wondering how to do it the
proper way - then went to Gtk+ scrolling code once more, and then could
see that the gtk textbox was handling the scroll itself (it seems the
algorithm is what's called 'smooth scrolling', not sure). 

The idea is that after each request to scroll, they call XIfEvent to
wait for GraphicsExpose/NoExpose events on the scrolled window, blocking
the thread until they get one of them (so you can invalidate or exit the
loop), and adding a expose operation on the window.

I implemented this today for our implementation and it seems to work
just fine, and it seems it follows your idea ;-)

Take a look and tell what you think.
Carlos.

PD - The patch is a test, so needs to be beautified still ;-) But should
work.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xplatx11-changes.patch
Type: text/x-patch
Size: 4412 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20080807/f4ba2d77/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20080807/f4ba2d77/attachment-0001.bin</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003564.html">[Mono-winforms-list] Scrolling performance isues
</A></li>
	<LI>Next message: <A HREF="003582.html">[Mono-winforms-list] Scrolling performance isues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3577">[ date ]</a>
              <a href="thread.html#3577">[ thread ]</a>
              <a href="subject.html#3577">[ subject ]</a>
              <a href="author.html#3577">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
