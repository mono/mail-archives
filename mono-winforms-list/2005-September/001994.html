<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Win32ShellIcon preview
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Win32ShellIcon%20preview&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001993.html">
   <LINK REL="Next"  HREF="001995.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Win32ShellIcon preview</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Win32ShellIcon%20preview&In-Reply-To="
       TITLE="[Mono-winforms-list] Win32ShellIcon preview">kornelpal at hotmail.com
       </A><BR>
    <I>Wed Sep 14 11:35:30 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001993.html">[Mono-winforms-list] Implementing file icons on Windows
</A></li>
        <LI>Next message: <A HREF="001995.html">[Mono-winforms-list] MacPack Update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1994">[ date ]</a>
              <a href="thread.html#1994">[ thread ]</a>
              <a href="subject.html#1994">[ subject ]</a>
              <a href="author.html#1994">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I found a solution that requires a bit more system resources but can be done
without modifying ImageList. This solution copies icons from system image
list but maintains a Hashtable to map system image list indexes to the
managed imagelist.

I modified the driver to handle system icons as well.

Note that I want to move well known (Desktop, My Computer, ...) icons to
driver as well so this is a preview-only patch.

ListView seems to be extremely bugous on Windows and I wasn't able to
display a FileDialog on Mono because the process stars to eat all the memory
(including virtual memory) and all the CPU time but displays no window.

Using .NET Framework I was able to test the dialog but it is very bugous.

Furthermore the current ImageList is copying image instead of storing the
original ones like MS.NET does and this results in the loss of
alpha-blending of icons.

Please comment this preview implementation.

Korn&#233;l
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Win32ShellIcon.diff
Type: application/octet-stream
Size: 12095 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20050914/0ffacf58/Win32ShellIcon-0001.obj">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20050914/0ffacf58/Win32ShellIcon-0001.obj</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001993.html">[Mono-winforms-list] Implementing file icons on Windows
</A></li>
	<LI>Next message: <A HREF="001995.html">[Mono-winforms-list] MacPack Update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1994">[ date ]</a>
              <a href="thread.html#1994">[ thread ]</a>
              <a href="subject.html#1994">[ subject ]</a>
              <a href="author.html#1994">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
