<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] GetPositionFromCharIndex
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20GetPositionFromCharIndex&In-Reply-To=1179195259.17184.3.camel%40grr.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002882.html">
   <LINK REL="Next"  HREF="002884.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] GetPositionFromCharIndex</H1>
    <B>Maser, Dan</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20GetPositionFromCharIndex&In-Reply-To=1179195259.17184.3.camel%40grr.site"
       TITLE="[Mono-winforms-list] GetPositionFromCharIndex">Dan.Maser at inin.com
       </A><BR>
    <I>Tue May 15 09:38:23 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002882.html">[Mono-winforms-list] GetPositionFromCharIndex
</A></li>
        <LI>Next message: <A HREF="002884.html">[Mono-winforms-list] GetPositionFromCharIndex
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2883">[ date ]</a>
              <a href="thread.html#2883">[ thread ]</a>
              <a href="subject.html#2883">[ subject ]</a>
              <a href="author.html#2883">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
  Ahh, excellent!  Many thanks for your time and effort on these
methods.

  Here's what I have on my list that involves TextBox controls left to
be done:

* In my app I have some text boxes with the read-only flag set.  As
expected, those text boxes ignore typed keys.  However, if I select some
text, then right-click, then pick 'Delete' from the context menu the
text from the textbox is deleted.  I think the 'Delete' option on the
context menu should be greyed when the textbox is read-only.

* The textbox doesn't seem to honor the new 2.0 ContextMenuStrip.  In my
app I assigned a ContextMenuStrip to the textbox control.  But when I
right click it, some kind of default context menu strip is shown always
and my custom one is never shown.  I also noted that the textbox's
'ContextMenu' property is null, so it's not a mistake with the
ContextMenu overriding the 'ContextMenuStrip'.   From what I can tell
the proper behavior is:
	1. the 'ContextMenuStrip' should be honored if non-null
	2. the 'ContextMenu' property should be honored if non-null
	3. search the parent windows for a non-null 'ContextMenuStrip or
'ContextMenu' and show that if non-null.
	4. if none of the windows to the base parent have a context
menu, then show the default textbox context menu with the
Copy/Paste/Delete choices.

* I Have these two bugs that I filed about TextBoxes still in the 'NEW'
state:
<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=81598">http://bugzilla.ximian.com/show_bug.cgi?id=81598</A>
<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=81616">http://bugzilla.ximian.com/show_bug.cgi?id=81616</A>
 

   Again, thanks for your time and effort!


-----Original Message-----
From: Jackson Harper [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">jackson at ximian.com</A>] 
Sent: Monday, May 14, 2007 9:14 PM
To: Maser, Dan
Cc: monkeyx; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list at lists.ximian.com</A>
Subject: RE: [Mono-winforms-list] GetPositionFromCharIndex

On Mon, 2007-05-14 at 20:57 -0400, Maser, Dan wrote:
&gt;<i>   Would it make sense to also implement the 
</I>&gt;<i> 
</I>&gt;<i> GetFirstCharIndexFromLine
</I>&gt;<i> 
</I>&gt;<i>   function while you're in that code and working with the position
</I>&gt;<i> variables?  My app uses that function but has it's feature
</I>conditionally
&gt;<i> compiled out right now.   
</I>
It would.  Which is why I did :-).

Those four similarly named functions are all implemented now.  I'll be
working on finishing off the rest of the 2.0 text control functions this
week. 

Are there any in particular that you are using, that you would like to
see implemented?

Cheers,
Jackson


&gt;<i> Regards,
</I>&gt;<i>    Dan
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list-bounces at lists.ximian.com</A>
</I>&gt;<i> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list-bounces at lists.ximian.com</A>] On Behalf Of
</I>&gt;<i> Jackson Harper
</I>&gt;<i> Sent: Monday, May 14, 2007 5:16 PM
</I>&gt;<i> To: monkeyx
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-winforms-list] GetPositionFromCharIndex
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Just an FYI.
</I>&gt;<i> 
</I>&gt;<i> This method is now implemented in the SVN version of winforms.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Jackson
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Thu, 2007-05-10 at 12:46 -0700, monkeyx wrote:
</I>&gt;<i> &gt; I am having some problems getting GetPositionFromCharIndex to work
</I>on
&gt;<i> Mono
</I>&gt;<i> &gt; 1.2.3 and libgdiplus 1.2.3
</I>&gt;<i> &gt; Tested issue on Ubuntu 7.04 and Suse 10.2 using even built sources
</I>on
&gt;<i> Centos
</I>&gt;<i> &gt; 5 all give same error.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have shown code and crash error below, has anyone else seen this
</I>&gt;<i> error or
</I>&gt;<i> &gt; advise me on how I can help fix it!
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;           if (e.KeyCode == Keys.OemPeriod &amp;&amp; e.Shift == true)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;            {
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;                index = richTextBox1.SelectionStart;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; // This line appears to be causing crash
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;                pt = richTextBox1.GetPositionFromCharIndex(index);
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;                pt.X += richTextBox1.Location.X;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;                pt.Y += richTextBox1.Location.Y;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;                lstboxEdit.Location = pt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;                lstboxEdit.Visible = true;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;            }
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; This is summary of crash error
</I>&gt;<i> &gt; ** (lpOED.exe:6904): WARNING **: Missing method
</I>&gt;<i> &gt; System.Windows.Forms.TextBoxBase::GetPositionFromCharIndex(int) in
</I>&gt;<i> assembly
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>/usr/lib/mono/gac/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.
&gt;<i> Windows.Forms.dll,
</I>&gt;<i> &gt; referenced in assembly /media/MightyDrive/lpOED.exe
</I>&gt;<i> &gt; System.MissingMethodException: Method not found:
</I>&gt;<i> &gt; 'System.Windows.Forms.TextBoxBase.GetPositionFromCharIndex'.
</I>&gt;<i> &gt;   at &lt;0x00000&gt; &lt;unknown method&gt;
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-winforms-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">Mono-winforms-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002882.html">[Mono-winforms-list] GetPositionFromCharIndex
</A></li>
	<LI>Next message: <A HREF="002884.html">[Mono-winforms-list] GetPositionFromCharIndex
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2883">[ date ]</a>
              <a href="thread.html#2883">[ thread ]</a>
              <a href="subject.html#2883">[ subject ]</a>
              <a href="author.html#2883">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
