<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] What ImageList bugs do we need?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20What%20ImageList%20bugs%20do%20we%20need%3F&In-Reply-To=BAY22-DAV105C55641B7B875BD90692A3740%40phx.gbl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002092.html">
   <LINK REL="Next"  HREF="002094.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] What ImageList bugs do we need?</H1>
    <B>Pavel Bansky</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20What%20ImageList%20bugs%20do%20we%20need%3F&In-Reply-To=BAY22-DAV105C55641B7B875BD90692A3740%40phx.gbl"
       TITLE="[Mono-winforms-list] What ImageList bugs do we need?">levap at bansky.net
       </A><BR>
    <I>Sun Oct 23 04:50:20 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002092.html">[Mono-winforms-list] What ImageList bugs do we need?
</A></li>
        <LI>Next message: <A HREF="002094.html">[Mono-winforms-list] What ImageList bugs do we need?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2093">[ date ]</a>
              <a href="thread.html#2093">[ thread ]</a>
              <a href="subject.html#2093">[ subject ]</a>
              <a href="author.html#2093">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good job Korn&#233;l,

I prefer bugs to be fixed. Direction of &quot;poting&quot; apps is usually from 
MS.NET to Mono, and in this direction corected bugs will be no problem.

cheers

  Pavel


Korn&#233;l P&#225;l wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Now ImageList should be functionally compatible with MS.NET. The only thing
</I>&gt;<i> it cannot support is a native image list handle.
</I>&gt;<i> 
</I>&gt;<i> But MS.NET ImageList seems to be poorly designed and in addition has a lot
</I>&gt;<i> of bugs.
</I>&gt;<i> 
</I>&gt;<i> There are three bugs that are so critical that I have corrected them:
</I>&gt;<i> 
</I>&gt;<i> 1) MS.NET 1.x shares the same HIMAGELIST between ImageLists that were
</I>&gt;<i> initialized from the same ImageListStreamer and doesn't update ImageSize 
</I>&gt;<i> and
</I>&gt;<i> ColorDepth that are treated as bugs and MS.NET 2.0 behavior is implemented.
</I>&gt;<i> 
</I>&gt;<i> 2) MS.NET 2.0 initializes TransparentColor to Color.Transparent in
</I>&gt;<i> constructors but ResetTransparentColor and ShouldSerializeTransparentColor
</I>&gt;<i> default to Color.LightGray that is treated as a bug.
</I>&gt;<i> 
</I>&gt;<i> 3) MS.NET 2.0 does not clear keys when handle is destroyed that is treated
</I>&gt;<i> as a bug.
</I>&gt;<i> 
</I>&gt;<i> And there are some other bug that I implemented as feature:
</I>&gt;<i> 
</I>&gt;<i> 4) Image strips are counted as a single item in the return value of Add and
</I>&gt;<i> AddStrip until handle is created.
</I>&gt;<i> 
</I>&gt;<i> 5) When ImageSize was changed after adding image strips Count will return
</I>&gt;<i> invalid values based on old ImageSize but when creating handle either
</I>&gt;<i> ArgumentException will be thrown or image strip will be added according to
</I>&gt;<i> the new ImageSize. This can result in image count difference that can 
</I>&gt;<i> result
</I>&gt;<i> in exceptions in methods that use Count before creating handle. In addition
</I>&gt;<i> this can result in the loss of sync with keys. When doing the same after
</I>&gt;<i> handle was created there are no problems as handle will be recreated after
</I>&gt;<i> changing ImageSize that results in the loss of images added previously.
</I>&gt;<i> 
</I>&gt;<i> 6) When last IndexOfKey was successful and the same key was assigned to an
</I>&gt;<i> image with a lower index than the last result and the key of the last 
</I>&gt;<i> result
</I>&gt;<i> equals to key argument the last result is returned.
</I>&gt;<i> 
</I>&gt;<i> And ImageList has some other poorly designed methods that aren't bugs but
</I>&gt;<i> their behavior is documented as comments in source code.
</I>&gt;<i> 
</I>&gt;<i> Bug 1) can causes defective behavior particulary because thread safety
</I>&gt;<i> issues.
</I>&gt;<i> Bug 2) prevents Color.LightGray from being used as TransparentColor.
</I>&gt;<i> Bug 3) makes keys useless after handle recreation.
</I>&gt;<i> Bug 4) makes return value of Add methods useless.
</I>&gt;<i> Bug 5) makes ImageSize changing incompatible with image strips and can 
</I>&gt;<i> cause
</I>&gt;<i> very defective behavior when using image strips.
</I>&gt;<i> Bug 6) makes IndexOfKey behavior inconsistent.
</I>&gt;<i> 
</I>&gt;<i> All the above bugs can cause extreme ImageList behavior but who know 
</I>&gt;<i> whether
</I>&gt;<i> some people are assume this behavior.
</I>&gt;<i> 
</I>&gt;<i> My questions is that do we need any of these bugs as features? And do you
</I>&gt;<i> mind if I correct bugs 4-6?
</I>&gt;<i> 
</I>&gt;<i> Korn&#233;l
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-winforms-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">Mono-winforms-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>&gt;<i> 
</I>
-- 
__________________________________________________________

Pavel B&#225;nsk&#253;
levap at bansky.net                        I write code...
__________________________________________________________
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002092.html">[Mono-winforms-list] What ImageList bugs do we need?
</A></li>
	<LI>Next message: <A HREF="002094.html">[Mono-winforms-list] What ImageList bugs do we need?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2093">[ date ]</a>
              <a href="thread.html#2093">[ thread ]</a>
              <a href="subject.html#2093">[ subject ]</a>
              <a href="author.html#2093">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
