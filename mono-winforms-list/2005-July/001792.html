<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] MWF painting VERY slow compared to .NET
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20MWF%20painting%20VERY%20slow%20compared%20to%20.NET&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001791.html">
   <LINK REL="Next"  HREF="001793.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] MWF painting VERY slow compared to .NET</H1>
    <B>Peter De Jager</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20MWF%20painting%20VERY%20slow%20compared%20to%20.NET&In-Reply-To="
       TITLE="[Mono-winforms-list] MWF painting VERY slow compared to .NET">peterdj at telkomsa.net
       </A><BR>
    <I>Wed Jul 27 05:33:50 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001791.html">[Mono-winforms-list] System.Windows.Forms test
</A></li>
        <LI>Next message: <A HREF="001793.html">[Mono-winforms-list] MWF painting VERY slow compared to .NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1792">[ date ]</a>
              <a href="thread.html#1792">[ thread ]</a>
              <a href="subject.html#1792">[ subject ]</a>
              <a href="author.html#1792">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>When painting a bitmap to a Form and measuring the frame rate, I get vastly
different figures on .NET vs. Mono. E.g. on .NET I get 114 fps while under
mono it's only 4.5 fps (on the same hardware). What's even stranger is that
I get the same (4.5 fps) figure on a PowerPC Mac mini (1.42 GHz G4, 167MHz
bus) and an Intel box (dual 3GHz Xeon, 533MHz bus). Both systems are running
Fedora Core 4. I thought that perhaps it relates to video drivers but I
installed the latest ATI driver on my Xeon box (Radeon 9800 Pro) and there
is still no difference.

Something else is that on WMF, the background is always painted even though
I override OnPaintBackground of my Form with an empty implementation, e.g.:

protected override void OnPaintBackground(PaintEventArgs e) { }

On Windows, this prevents the Form from repainting the background, thus
speeding up painting and reducing flicker, while MWF always appears to
repaint the background.

I've done (very limited) testing on Gtk (Glade), and it appears to be fast
on Linux (comparable to System.Windows.Forms on .NET), but while being fast
on Linux, Glade is MUCH slower on Windows (I don't have exact figures but
it's very noticable).

Is the MWF implementation likely to increase in speed (by 20 times!) as it
matures, or should I use Gtk for Linux / OS X and System.Windows.Forms for
Windows? I was hoping that I could use a single code base for all platforms
(which has been the case so far).

Don't take this the wrong way, I don't mean to be critical. I think it's
great that there is a managed implementation of Windows Forms, but at 20
times slower it renders my Windows applications unusable under Mono.

Thanks
Pete.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001791.html">[Mono-winforms-list] System.Windows.Forms test
</A></li>
	<LI>Next message: <A HREF="001793.html">[Mono-winforms-list] MWF painting VERY slow compared to .NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1792">[ date ]</a>
              <a href="thread.html#1792">[ thread ]</a>
              <a href="subject.html#1792">[ subject ]</a>
              <a href="author.html#1792">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
