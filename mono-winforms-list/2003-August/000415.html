<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] more gtk look stuff
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:james%40linuxaus.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000414.html">
   <LINK REL="Next"  HREF="000416.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] more gtk look stuff
   </H1>
    <B>James Gregory
    </B> 
    <A HREF="mailto:james%40linuxaus.com"
       TITLE="[Mono-winforms-list] more gtk look stuff">james@linuxaus.com
       </A><BR>
    <I>04 Aug 2003 18:11:55 +1000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000414.html">[Mono-winforms-list] more gtk look stuff
</A></li>
        <LI> Next message: <A HREF="000416.html">[Mono-winforms-list] more gtk look stuff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#415">[ date ]</a>
              <a href="thread.html#415">[ thread ]</a>
              <a href="subject.html#415">[ subject ]</a>
              <a href="author.html#415">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2003-08-04 at 17:58, Roderick Colenbrander wrote:
&gt;<i> Hi James,
</I>&gt;<i> 
</I>&gt;<i> Some time ago I emailed with you about this too, congratulations so far.
</I>&gt;<i> Perhaps it is time now to start a full wine theming thread. Perhaps on 
</I>&gt;<i> wine-devel too.
</I>&gt;<i> 
</I>&gt;<i> The Wine guys love to have some way of theming too. The simple color changing 
</I>&gt;<i> stuff is the first step. Just hacking Wine to make it look like GTK is not 
</I>&gt;<i> the correct solution and will about sure never make it back in real Wine. It 
</I>&gt;<i> won't work for all controls and it is really a hack.
</I>
An increasingly common hack it seems. I chose it because I figured it
would be the fastest to see results on, but agreed it isn't the best
solution.

&gt;<i> 
</I>&gt;<i> The real solution is to do what WindowsXP is doing. XP is using a special 
</I>&gt;<i> theme library called &quot;uxtheme.dll&quot;. It can be accessed directly from an app 
</I>&gt;<i> but most apps don't use it directly. WindowsXP's control related dlls use it 
</I>&gt;<i> too. XP uses two sets of comctl32 and friends. One &quot;old&quot; one and one with 
</I>&gt;<i> theming. The comctl32 and other dlls then contain some options to enable 
</I>&gt;<i> theming and contain some area in which you can draw. I looked into it a bit 
</I>&gt;<i> in the past. Not sure how it fully works but this is the real way to go.
</I>
I've heard this. Unfortunately I don't have a copy of windows XP to play
with, but that's what the wine guys said when I raised this.

So you're suggesting that the uxtheme.dll be written to render stuff
with GTK? Does that mean replacing x11drv with a gdkdrv so that there
are GdkDrawables to draw on? If so we're not really departing that far
from the hacky solution -- it's just a bit more compartmentalised.

James.

&gt;<i> 
</I>&gt;<i> So in short on XP the core dlls are patched to use uxtheme.dll for theming.
</I>&gt;<i> 
</I>&gt;<i> Lets hope this triggers a full thread :)
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Roderick Colenbrander
</I>&gt;<i> 
</I>&gt;<i> Op maandag 4 augustus 2003 09:10, schreef James Gregory:
</I>&gt;<i> &gt; Hi all,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I posted ages ago about wanting to work on the wine GTK look part of the
</I>&gt;<i> &gt; mono project. It's been a while, but I have actually made some progress.
</I>&gt;<i> &gt; I have code now which will set wine's colours to match the GTK theme
</I>&gt;<i> &gt; (well some of the colours, the rest of them is just a case of me having
</I>&gt;<i> &gt; time and patience to finish it). The other achievement was to get a
</I>&gt;<i> &gt; GdkWindow from the XID that Wine uses to display stuff and map a Gtk
</I>&gt;<i> &gt; Button to it. Alas the button is not as yet displaying, which is why I'm
</I>&gt;<i> &gt; writing. The problem as I see it is simply that the gtk main loop isn't
</I>&gt;<i> &gt; running, so whatever it is that actually draws the button inside the
</I>&gt;<i> &gt; expose event in a normal gtk app just isn't running. The patch is a bit
</I>&gt;<i> &gt; of a mess, but if there's interest I'd love to get some feedback from
</I>&gt;<i> &gt; someone who knows the internals of gtk/gdk a bit better. I'm sure that
</I>&gt;<i> &gt; after I'm over this hurdle, the rest will be far faster and simpler to
</I>&gt;<i> &gt; implement.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; James.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>&gt;<i> 
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000414.html">[Mono-winforms-list] more gtk look stuff
</A></li>
	<LI> Next message: <A HREF="000416.html">[Mono-winforms-list] more gtk look stuff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#415">[ date ]</a>
              <a href="thread.html#415">[ thread ]</a>
              <a href="subject.html#415">[ subject ]</a>
              <a href="author.html#415">[ author ]</a>
         </LI>
       </UL>
</body></html>
