<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] NotifyIcon and ContextMenu redrawing	issues ingnome
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20NotifyIcon%20and%20ContextMenu%20redrawing%0A%09issues%20ingnome&In-Reply-To=006c01c814c3%2430835230%240302a8c0%40alanpc1">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003090.html">
   <LINK REL="Next"  HREF="003092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] NotifyIcon and ContextMenu redrawing	issues ingnome</H1>
    <B>Erik Renes</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20NotifyIcon%20and%20ContextMenu%20redrawing%0A%09issues%20ingnome&In-Reply-To=006c01c814c3%2430835230%240302a8c0%40alanpc1"
       TITLE="[Mono-winforms-list] NotifyIcon and ContextMenu redrawing	issues ingnome">keenriser at planet.nl
       </A><BR>
    <I>Tue Oct 23 02:17:08 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003090.html">[Mono-winforms-list] NotifyIcon and ContextMenu redrawing	issues ingnome
</A></li>
        <LI>Next message: <A HREF="003092.html">[Mono-winforms-list]  WinForms on Linux/MacOSX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3091">[ date ]</a>
              <a href="thread.html#3091">[ thread ]</a>
              <a href="subject.html#3091">[ subject ]</a>
              <a href="author.html#3091">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Andy, 

 

I think that is exactly the problem I am facing. I agree with your comment
over there that this bug is definitely not a duplicate of 324344, so it is
unfortunate that it has been closed. 

 

I also think I could come up with some extremely dirty workaround, until the
bug is fixed (unfortunately the internals of XplatUIX11 are not really my
thing). That's something I'd have to do outside of company time though, I'll
let you know when I've come up with something. (I have an idea, and it may
well be the evilest code ever written).

 

Thanks again,

Erik 

 

From: Andy Hume [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">andyhume32 at yahoo.co.uk</A>] 
Sent: maandag 22 oktober 2007 17:50
To: 'Erik Renes'; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list at lists.ximian.com</A>
Subject: RE: [Mono-winforms-list] NotifyIcon and ContextMenu redrawing
issues ingnome

 

Sound like  &lt;<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=324237">https://bugzilla.novell.com/show_bug.cgi?id=324237</A>&gt;
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=324237">https://bugzilla.novell.com/show_bug.cgi?id=324237</A> -- &quot;NotifyIcon does not
send Paint events on X11&quot;.  You shouldn't need to do anything special in
your code if this was fixed. :-,(

 

Andy

 

 


  _____  


From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list-bounces at lists.ximian.com</A>] On Behalf Of Erik Renes
Sent: 22 October 2007 12:53
To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list at lists.ximian.com</A>
Subject: [Mono-winforms-list] NotifyIcon and ContextMenu redrawing issues
ingnome

Hi all, 

 

I'm not sure if this is the correct mailing list for reporting an issue such
as this, however it seems appropriate. 

 

When creating a test application that contains a windows form, a notify icon
and a context menu, I noticed that the notify icon does not get redrawn if
my context menu overlaps it partially. Other tray applications (network
manager, sound volume) seem to have worked around the issue by placing their
context menus _below_ the icon, instead of at the place where the mouse
click occurs. 

 

I have tried to reassign the same icon to the icon property every second, so
as to trigger a redraw - I just thought of maybe assigning a different icon
every second, haven't tested that yet, will do tonight -, which had no
effect. I also tried making the icon invisible, and then visible, that
works, however it is very noticeable by the user and is therefore not really
usable.

 

I am currently leaning towards finding some 'invalidateRect' function (which
would probably mean going native) or using custom code to place my context
menu below my notify icon. Both of which I think should not be necessary, as
the same code runs correctly on windows/mono. Are there other applications
that use notifyicons out there who have solved this issue before? Additional
info: I'm have seen this on Suse and Ubuntu, both running in a VM, perhaps
it is the vmware vga driver that is to blame? 

 

Thank you for any help, 

 

Best regards,

Erik Renes.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20071023/e30ead24/attachment.html">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20071023/e30ead24/attachment.html</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003090.html">[Mono-winforms-list] NotifyIcon and ContextMenu redrawing	issues ingnome
</A></li>
	<LI>Next message: <A HREF="003092.html">[Mono-winforms-list]  WinForms on Linux/MacOSX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3091">[ date ]</a>
              <a href="thread.html#3091">[ thread ]</a>
              <a href="subject.html#3091">[ subject ]</a>
              <a href="author.html#3091">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
