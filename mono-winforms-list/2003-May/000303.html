<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] RE: [Mono-list] Windows.Forms
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ryabchuk%40yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000306.html">
   <LINK REL="Next"  HREF="000308.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] RE: [Mono-list] Windows.Forms
   </H1>
    <B>Aleksey Ryabchuk
    </B> 
    <A HREF="mailto:ryabchuk%40yahoo.com"
       TITLE="[Mono-winforms-list] RE: [Mono-list] Windows.Forms">ryabchuk@yahoo.com
       </A><BR>
    <I>Thu, 22 May 2003 07:29:46 -0700 (PDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="000306.html">[Mono-winforms-list] RE: [Mono-list] Windows.Forms
</A></li>
        <LI> Next message: <A HREF="000308.html">[Mono-winforms-list] RE: [Mono-list] Windows.Forms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#303">[ date ]</a>
              <a href="thread.html#303">[ thread ]</a>
              <a href="subject.html#303">[ subject ]</a>
              <a href="author.html#303">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello !

WinForms does not need Wine to work on Win32 :-) 
May be you set SFW = 1 before running application ?
If so you don't need to do it. You will get a few
warnings about missing libxxx.dll.so, but that's ok.
You also need the latest runtime from CVS, there were
some fixed made regarding calling conventions
recenlty.

Regards
Aleksey

--- Urs Muff &lt;<A HREF="mailto:umuff@quark.com">umuff@quark.com</A>&gt; wrote:
&gt;<i> How come Windows.Forms does not work on Win32
</I>&gt;<i> without Wine?  
</I>&gt;<i> That does not really make sense to me.  
</I>&gt;<i> Isn't Wine supposed to emulate Win32?
</I>&gt;<i> Can't the assembly detect what OS its running and
</I>&gt;<i> the either use Wine, or
</I>&gt;<i> just directly use the kernel?  
</I>&gt;<i> Why are the DLL-names hard coded using libxxx.dll.so
</I>&gt;<i> naming conventions
</I>&gt;<i> [since I get an error message that libxxx.dll.so.dll
</I>&gt;<i> is missing]?  
</I>&gt;<i> Isn't that platform specific and a general issue for
</I>&gt;<i> any share
</I>&gt;<i> library/PInvoke and should only use xxx, and then
</I>&gt;<i> depending on the platform
</I>&gt;<i> it gets expanded to libxxx.dll.so on Unix [actually
</I>&gt;<i> why not libxxx.so, since
</I>&gt;<i> java does that too], or to xxx.dll on Win32.
</I>&gt;<i> 
</I>&gt;<i> I guess those might be just stupid questions, but to
</I>&gt;<i> me the design choices
</I>&gt;<i> are not apparent and/or transparent...
</I>&gt;<i> 
</I>&gt;<i> - URS C. MUFF
</I>&gt;<i> SOFTWARE ARCHITECT	- RESEARCH LAB
</I>&gt;<i> QUARK INC.
</I>&gt;<i> 
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: Philip Van Hoof
</I>&gt;<i> [mailto:<A HREF="mailto:spamfrommailing@freax.org">spamfrommailing@freax.org</A>]
</I>&gt;<i> &gt; Sent: Wednesday, May 21, 2003 8:01 PM
</I>&gt;<i> &gt; To: <A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>; Mono Winforms
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hi there,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; After a lot of trying and trying .. I got the
</I>&gt;<i> System.Windows.Forms using
</I>&gt;<i> &gt; libWine working.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Now that it works .. you can find the prove that a
</I>&gt;<i> newbie Mono developer
</I>&gt;<i> &gt; can get these wine patches working (after trying
</I>&gt;<i> for an hour or two)
</I>&gt;<i> &gt; here : <A HREF="http://www.freax.be/MyFirstSWFOnMono.png">http://www.freax.be/MyFirstSWFOnMono.png</A> 
</I>&gt;<i> ;-)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; tadaaa!!
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Note that my test.cs-file was created using VS.NET
</I>&gt;<i> (2003). It is a
</I>&gt;<i> &gt; standard Windows Forms application with no extra
</I>&gt;<i> components added.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I compiled it with something like ..
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; mcs test.cs /r:System.Windows.Forms.dll
</I>&gt;<i> /r:System.Drawing.dll
</I>&gt;<i> &gt; /r:System.Data.dll
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Some other problems that I ran into :
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 1) You must read the file
</I>&gt;<i> wine-shared-20030519/wine/README, not just the
</I>&gt;<i> &gt; instructions on the website ! Those online
</I>&gt;<i> instructions will install a
</I>&gt;<i> &gt; wine-binary. This is 'not' what you need in order
</I>&gt;<i> to get
</I>&gt;<i> &gt; System.Windows.Forms working. (Thanks to Miguel
</I>&gt;<i> who explained this to me
</I>&gt;<i> &gt; on IRC, hehe -I should read before doing things, I
</I>&gt;<i> know-)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 2) It does not hurt if you did installed it the
</I>&gt;<i> wrong way first (except
</I>&gt;<i> &gt; that now your current wine installation has been
</I>&gt;<i> overwritten, hehe
</I>&gt;<i> &gt; -great, my KaZaaLite does not work anymore-). But
</I>&gt;<i> then make sure that
</I>&gt;<i> &gt; you distclean/clean the patched wine source before
</I>&gt;<i> recompiling using
</I>&gt;<i> &gt; &quot;make wine-shared&quot;. Else the -DMONO wont be
</I>&gt;<i> compiled in each library.
</I>&gt;<i> &gt; (it took me 45 minutes to figure out why it was
</I>&gt;<i> not working and why
</I>&gt;<i> &gt; running &quot;mono test.exe&quot; was showing me the &quot;how to
</I>&gt;<i> use&quot;-help of wine
</I>&gt;<i> &gt; after it initialized System.Windows.Forms. Well
</I>&gt;<i> not cleaning that
</I>&gt;<i> &gt; sourcetree was the reason).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 3) I had to make a symlink from libwinnt.dll.so to
</I>&gt;<i> libntdll.dll.so. For
</I>&gt;<i> &gt; some reason the build created libwinnt.dll.so in
</I>&gt;<i> stead of
</I>&gt;<i> &gt; libntdll.dll.so which is the library that Mono
</I>&gt;<i> will load once it
</I>&gt;<i> &gt; detected that System.Windows.Forms will be used.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ln -s /usr/lib/libwinnt.dll.so
</I>&gt;<i> /usr/lib/libntdll.dll.so
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Maybe that symlink is totally wrong .. well, here,
</I>&gt;<i> it does work this
</I>&gt;<i> &gt; way...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 4) I also had to rebuild mono and mcs from scratch
</I>&gt;<i> and from CVS. Yes
</I>&gt;<i> &gt; that means rebuilding your corlib.dll too. I guess
</I>&gt;<i> most of you guys know
</I>&gt;<i> &gt; how to build mcs. If not try something like this :
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; * Install mono (and mono-devel) from RPM or using
</I>&gt;<i> apt-get
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; * export
</I>&gt;<i>
</I>CVSROOT=':pserver:<A HREF="mailto:anonymous@anoncvs.go-mono.com">anonymous@anoncvs.go-mono.com</A>:/mono'
&gt;<i> &amp;&amp; cvs
</I>&gt;<i> &gt; -z3 co mono mcs &amp;&amp; cd mcs &amp;&amp; make -f makefile.gnu
</I>&gt;<i> ; cd ../mono &amp;&amp;
</I>&gt;<i> &gt; ./autogen.sh --prefix=/usr &amp;&amp; make &amp;&amp; make install
</I>&gt;<i> &amp;&amp; cd ../mcs &amp;&amp; cp
</I>&gt;<i> &gt; class/lib/corlib.dll /usr/lib ; make -f
</I>&gt;<i> makefile.gnu &amp;&amp; make -f
</I>&gt;<i> &gt; makefile.gnu install prefix=/usr
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 5) Back to the wine-sources: In stead of running
</I>&gt;<i> &quot;./configure&quot; I had to
</I>&gt;<i> &gt; use &quot;./configure --prefix=/usr&quot; (which is also the
</I>&gt;<i> prefix that I used to
</I>&gt;<i> &gt; install mono on my development desktop-computer).
</I>&gt;<i> This way all
</I>&gt;<i> &gt; .dll.so-files are installed in /usr/lib/ in stead
</I>&gt;<i> of /usr/local/lib/.
</I>&gt;<i> &gt; Don't worry about your wine-installation .. the
</I>&gt;<i> fine guys at openlinksw
</I>&gt;<i> &gt; have renamed the files.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 6) Run &quot;export SWF=1&quot; before starting an
</I>&gt;<i> application (or put it in your
</I>&gt;<i> &gt; profile or startup-scripts)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Okay, have fun :)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Philip Van Hoof a.k.a. freax
</I>&gt;<i> &gt; me at freax dot org
</I>&gt;<i> &gt; <A HREF="http://www.freax.be">http://www.freax.be</A> -- <A HREF="http://www.freax.eu.org">http://www.freax.eu.org</A> --
</I>&gt;<i> <A HREF="http://www.freax.org">http://www.freax.org</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-list maillist  -  <A HREF="mailto:Mono-list@lists.ximian.com">Mono-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-list">http://lists.ximian.com/mailman/listinfo/mono-list</A>
</I>

__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
<A HREF="http://search.yahoo.com">http://search.yahoo.com</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000306.html">[Mono-winforms-list] RE: [Mono-list] Windows.Forms
</A></li>
	<LI> Next message: <A HREF="000308.html">[Mono-winforms-list] RE: [Mono-list] Windows.Forms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#303">[ date ]</a>
              <a href="thread.html#303">[ thread ]</a>
              <a href="subject.html#303">[ subject ]</a>
              <a href="author.html#303">[ author ]</a>
         </LI>
       </UL>
</body></html>
