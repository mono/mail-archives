<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Re: [Mono-list] Windows.Forms
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:m.hearn%40signal.qinetiq.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000295.html">
   <LINK REL="Next"  HREF="000301.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Re: [Mono-list] Windows.Forms
   </H1>
    <B>Mike Hearn
    </B> 
    <A HREF="mailto:m.hearn%40signal.qinetiq.com"
       TITLE="[Mono-winforms-list] Re: [Mono-list] Windows.Forms">m.hearn@signal.qinetiq.com
       </A><BR>
    <I>22 May 2003 09:02:36 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="000295.html">[Mono-winforms-list] Re: [Mono-list] Windows.Forms
</A></li>
        <LI> Next message: <A HREF="000301.html">[Mono-winforms-list] Re: [Mono-list] Windows.Forms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#297">[ date ]</a>
              <a href="thread.html#297">[ thread ]</a>
              <a href="subject.html#297">[ subject ]</a>
              <a href="author.html#297">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Vlad,

What is the plan for keeping up to date with Wine CVS? Otherwise I am
worried that maybe if Mono/Wine gets too out of date, there will be
conflicts over the configuration files, registry databases, font metric
caches and so on.

thanks -mike

(ps - congrats on making it work! :)

On Thu, 2003-05-22 at 04:36, Vlad Kaluzhny wrote:
&gt;<i> Hello All.
</I>&gt;<i> 
</I>&gt;<i> Hello Philip. I appreciate  your feeback on my efforts. Thanks a lot.
</I>&gt;<i> 
</I>&gt;<i> It is nice to hear , that you have been able to run SWF using the shared
</I>&gt;<i> libraries.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; ... You must read the file  wine-shared-20030519/wine/README.
</I>&gt;<i> 
</I>&gt;<i>    You are absolutely corect. README file is the source of more detail
</I>&gt;<i> instructions.
</I>&gt;<i>    Meantime if you run &quot;make&quot; or &quot;make all&quot; you will get Wine AND shared
</I>&gt;<i> libs.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  &gt; 3) I had to make a symlink from libwinnt.dll.so to libntdll.dll.so.
</I>&gt;<i> 
</I>&gt;<i>    The matter is that at the wine installation the link is installing of
</I>&gt;<i> libntdll.dll.so on ntdll.dll.so
</I>&gt;<i>    (libntdll.dll.so -&gt; wine/ntdll.dll.so)  for WINE PURPOSES.
</I>&gt;<i>     Therefore you should not make link libwinnt.dll.so -&gt; libntdll.dll.so -
</I>&gt;<i> this will cause
</I>&gt;<i>     errors , because libntdll.dll.so is belonging to Wine only
</I>&gt;<i>     (I wondered why have you been able to run GUI application in this case,
</I>&gt;<i> because
</I>&gt;<i>     this may cause the crash).
</I>&gt;<i>     Actually this is my fault - I have not informed Miguel about the new
</I>&gt;<i> name of this
</I>&gt;<i>     library. NOW I gonna inform all of you - when you will link  the shared
</I>&gt;<i> libraries,
</I>&gt;<i>     be aware, that libntdll.dll.so  is not the case now. instead of this you
</I>&gt;<i> should
</I>&gt;<i>     use libwinnt.dll.so .
</I>&gt;<i> 
</I>&gt;<i> &gt; Don't worry about your wine-installation .. the fine guys at openlinksw
</I>&gt;<i> &gt; have renamed the files.
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i>  Actually I have been  concerned about the probable conflicts between
</I>&gt;<i> Wine and win32api  shared libraries. I hope I solved this problem
</I>&gt;<i> and tested both of them on probable  interference. I did not find any.
</I>&gt;<i> 
</I>&gt;<i> I apprecite your feedback again.
</I>&gt;<i> 
</I>&gt;<i> I will apprecite   any feedback from anybody :-)
</I>&gt;<i> 
</I>&gt;<i> Regards, Vlad Kaluzhny.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ----- Original Message -----
</I>&gt;<i> From: &quot;Philip Van Hoof&quot; &lt;<A HREF="mailto:spamfrommailing@freax.org">spamfrommailing@freax.org</A>&gt;
</I>&gt;<i> To: &lt;<A HREF="mailto:mono-list@ximian.com">mono-list@ximian.com</A>&gt;; &quot;Mono Winforms&quot; &lt;<A HREF="mailto:mono-winforms-list@ximian.com">mono-winforms-list@ximian.com</A>&gt;
</I>&gt;<i> Sent: Thursday, May 22, 2003 09:01
</I>&gt;<i> Subject: [Mono-winforms-list] Re: [Mono-list] Windows.Forms
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi there,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; After a lot of trying and trying .. I got the System.Windows.Forms using
</I>&gt;<i> &gt; libWine working.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Now that it works .. you can find the prove that a newbie Mono developer
</I>&gt;<i> &gt; can get these wine patches working (after trying for an hour or two)
</I>&gt;<i> &gt; here : <A HREF="http://www.freax.be/MyFirstSWFOnMono.png">http://www.freax.be/MyFirstSWFOnMono.png</A>  ;-)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; tadaaa!!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Note that my test.cs-file was created using VS.NET (2003). It is a
</I>&gt;<i> &gt; standard Windows Forms application with no extra components added.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I compiled it with something like ..
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; mcs test.cs /r:System.Windows.Forms.dll /r:System.Drawing.dll
</I>&gt;<i> &gt; /r:System.Data.dll
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Some other problems that I ran into :
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 1) You must read the file wine-shared-20030519/wine/README, not just the
</I>&gt;<i> &gt; instructions on the website ! Those online instructions will install a
</I>&gt;<i> &gt; wine-binary. This is 'not' what you need in order to get
</I>&gt;<i> &gt; System.Windows.Forms working. (Thanks to Miguel who explained this to me
</I>&gt;<i> &gt; on IRC, hehe -I should read before doing things, I know-)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2) It does not hurt if you did installed it the wrong way first (except
</I>&gt;<i> &gt; that now your current wine installation has been overwritten, hehe
</I>&gt;<i> &gt; -great, my KaZaaLite does not work anymore-). But then make sure that
</I>&gt;<i> &gt; you distclean/clean the patched wine source before recompiling using
</I>&gt;<i> &gt; &quot;make wine-shared&quot;. Else the -DMONO wont be compiled in each library.
</I>&gt;<i> &gt; (it took me 45 minutes to figure out why it was not working and why
</I>&gt;<i> &gt; running &quot;mono test.exe&quot; was showing me the &quot;how to use&quot;-help of wine
</I>&gt;<i> &gt; after it initialized System.Windows.Forms. Well not cleaning that
</I>&gt;<i> &gt; sourcetree was the reason).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 3) I had to make a symlink from libwinnt.dll.so to libntdll.dll.so. For
</I>&gt;<i> &gt; some reason the build created libwinnt.dll.so in stead of
</I>&gt;<i> &gt; libntdll.dll.so which is the library that Mono will load once it
</I>&gt;<i> &gt; detected that System.Windows.Forms will be used.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ln -s /usr/lib/libwinnt.dll.so /usr/lib/libntdll.dll.so
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Maybe that symlink is totally wrong .. well, here, it does work this
</I>&gt;<i> &gt; way...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 4) I also had to rebuild mono and mcs from scratch and from CVS. Yes
</I>&gt;<i> &gt; that means rebuilding your corlib.dll too. I guess most of you guys know
</I>&gt;<i> &gt; how to build mcs. If not try something like this :
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; * Install mono (and mono-devel) from RPM or using apt-get
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; * export CVSROOT=':pserver:<A HREF="mailto:anonymous@anoncvs.go-mono.com">anonymous@anoncvs.go-mono.com</A>:/mono' &amp;&amp; cvs
</I>&gt;<i> &gt; -z3 co mono mcs &amp;&amp; cd mcs &amp;&amp; make -f makefile.gnu ; cd ../mono &amp;&amp;
</I>&gt;<i> &gt; /autogen.sh --prefix=/usr &amp;&amp; make &amp;&amp; make install &amp;&amp; cd ../mcs &amp;&amp; cp
</I>&gt;<i> &gt; class/lib/corlib.dll /usr/lib ; make -f makefile.gnu &amp;&amp; make -f
</I>&gt;<i> &gt; makefile.gnu install prefix=/usr
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 5) Back to the wine-sources: In stead of running &quot;./configure&quot; I had to
</I>&gt;<i> &gt; use &quot;./configure --prefix=/usr&quot; (which is also the prefix that I used to
</I>&gt;<i> &gt; install mono on my development desktop-computer). This way all
</I>&gt;<i> &gt; dll.so-files are installed in /usr/lib/ in stead of /usr/local/lib/.
</I>&gt;<i> &gt; Don't worry about your wine-installation .. the fine guys at openlinksw
</I>&gt;<i> &gt; have renamed the files.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 6) Run &quot;export SWF=1&quot; before starting an application (or put it in your
</I>&gt;<i> &gt; profile or startup-scripts)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Okay, have fun :)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Philip Van Hoof a.k.a. freax
</I>&gt;<i> &gt; me at freax dot org
</I>&gt;<i> &gt; <A HREF="http://www.freax.be">http://www.freax.be</A> -- <A HREF="http://www.freax.eu.org">http://www.freax.eu.org</A> -- <A HREF="http://www.freax.org">http://www.freax.org</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>-- 
Mike Hearn &lt;<A HREF="mailto:m.hearn@signal.qinetiq.com">m.hearn@signal.qinetiq.com</A>&gt;
QinetiQ - Malvern Technology Center


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000295.html">[Mono-winforms-list] Re: [Mono-list] Windows.Forms
</A></li>
	<LI> Next message: <A HREF="000301.html">[Mono-winforms-list] Re: [Mono-list] Windows.Forms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#297">[ date ]</a>
              <a href="thread.html#297">[ thread ]</a>
              <a href="subject.html#297">[ subject ]</a>
              <a href="author.html#297">[ author ]</a>
         </LI>
       </UL>
</body></html>
