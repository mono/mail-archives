<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Winforms 'Listview' problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Winforms%20%27Listview%27%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003272.html">
   <LINK REL="Next"  HREF="003274.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Winforms 'Listview' problem</H1>
    <B>Paul Berry</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Winforms%20%27Listview%27%20problem&In-Reply-To="
       TITLE="[Mono-winforms-list] Winforms 'Listview' problem">tall_paulb at hotmail.com
       </A><BR>
    <I>Fri Mar 14 16:28:50 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003272.html">[Mono-winforms-list] patch for enabling primitive XIM text input
</A></li>
        <LI>Next message: <A HREF="003274.html">[Mono-winforms-list] Winforms 'Listview' problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3273">[ date ]</a>
              <a href="thread.html#3273">[ thread ]</a>
              <a href="subject.html#3273">[ subject ]</a>
              <a href="author.html#3273">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is there a known issue with the listview control under mono?  Specifically, in the drawing of the listview?

I have an application that runs fine under .net on windows, but under mono on OS X or Linux it crashes whenever the listview control is redrawn after adding my items to it.

If 'owner draw' is enabled (so the items aren't drawn, but still added) it works fine.  If I'm on a different tab when I add items it works fine...until I switch to the tab with the listview on it.  

This is the error I'm getting:

Unhandled Exception: System.ArgumentException: A null reference or invalid value was found [GDI+ status: InvalidParameter]
  at System.Drawing.GDIPlus.CheckStatus (Status status) [0x00000] 
  at System.Drawing.Image.get_Width () [0x00000] 
  at (wrapper remoting-invoke-with-check) System.Drawing.Image:get_Width ()
  at System.Windows.Forms.ImageList+ImageCollection.CreateImage (System.Drawing.Image value, Color transparentColor) [0x00000] 
  at System.Windows.Forms.ImageList+ImageCollection.AddItemInternal (System.Windows.Forms.ImageListItem item) [0x00000] 
  at System.Windows.Forms.ImageList+ImageCollection.CreateHandle () [0x00000] 
  at System.Windows.Forms.ImageList+ImageCollection.GetImage (Int32 index) [0x00000] 
  at System.Windows.Forms.ImageList.Draw (System.Drawing.Graphics g, Int32 x, Int32 y, Int32 index) [0x00000] 
  at System.Windows.Forms.ImageList.Draw (System.Drawing.Graphics g, Point pt, Int32 index) [0x00000] 
  at (wrapper remoting-invoke-with-check) System.Windows.Forms.ImageList:Draw (System.Drawing.Graphics,System.Drawing.Point,int)
  at System.Windows.Forms.ThemeWin32Classic.DrawListViewItem (System.Drawing.Graphics dc, System.Windows.Forms.ListView control, System.Windows.Forms.ListViewItem item) [0x00000] 
  at System.Windows.Forms.ThemeWin32Classic.DrawListViewItems (System.Drawing.Graphics dc, Rectangle clip, System.Windows.Forms.ListView control) [0x00000] 
  at System.Windows.Forms.ListView+ItemControl.OnPaintInternal (System.Windows.Forms.PaintEventArgs pe) [0x00000] 
  at System.Windows.Forms.Control.WmPaint (System.Windows.Forms.Message&amp; m) [0x00000] 
  at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message&amp; m) [0x00000] 
  at System.Windows.Forms.ListView+ItemControl.WndProc (System.Windows.Forms.Message&amp; m) [0x00000] 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage (System.Windows.Forms.Message&amp; m) [0x00000] 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc (System.Windows.Forms.Message&amp; m) [0x00000] 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr wParam, IntPtr lParam) [0x00000] 
  at System.Windows.Forms.XplatUICarbon.DispatchMessage (System.Windows.Forms.MSG&amp; msg) [0x00000] 
  at System.Windows.Forms.XplatUI.DispatchMessage (System.Windows.Forms.MSG&amp; msg) [0x00000] 
  at System.Windows.Forms.Application.RunLoop (Boolean Modal, System.Windows.Forms.ApplicationContext context) [0x00000] 
  at System.Windows.Forms.Application.Run (System.Windows.Forms.ApplicationContext context) [0x00000] 
  at System.Windows.Forms.Application.Run (System.Windows.Forms.Form mainForm) [0x00000] 
  at WindowsApplication1.Program.Main () [0x00000]

_________________________________________________________________
Share what Santa brought you
<A HREF="https://www.mycooluncool.com">https://www.mycooluncool.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20080314/7aa004ce/attachment.html">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20080314/7aa004ce/attachment.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003272.html">[Mono-winforms-list] patch for enabling primitive XIM text input
</A></li>
	<LI>Next message: <A HREF="003274.html">[Mono-winforms-list] Winforms 'Listview' problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3273">[ date ]</a>
              <a href="thread.html#3273">[ thread ]</a>
              <a href="subject.html#3273">[ subject ]</a>
              <a href="author.html#3273">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
