<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] patch for enabling primitive XIM text input
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20patch%20for%20enabling%20primitive%20XIM%20text%20input&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003278.html">
   <LINK REL="Next"  HREF="003273.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] patch for enabling primitive XIM text input</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20patch%20for%20enabling%20primitive%20XIM%20text%20input&In-Reply-To="
       TITLE="[Mono-winforms-list] patch for enabling primitive XIM text input">atsushi at ximian.com
       </A><BR>
    <I>Fri Mar 14 13:49:05 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003278.html">[Mono-winforms-list] Winforms on Mac OSX troubles
</A></li>
        <LI>Next message: <A HREF="003273.html">[Mono-winforms-list] Winforms 'Listview' problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3272">[ date ]</a>
              <a href="thread.html#3272">[ thread ]</a>
              <a href="subject.html#3272">[ subject ]</a>
              <a href="author.html#3272">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi guys,

I've lately solved couple of puzzles around XIM and I can enter
characters from XIM now.
I had couple of extra changes (from my experimental fixes), so I reduced
the changes and
now it is trimmed down to the attached patch, which should be without
any side effect.

Can someone review it or can I apply these changes? Those XIM support
work will go on
as there should be couple more of improvements, but incremental changes
would be
better (at least for me :).

After these changes, we'll still need:
- better Preedit/Status support (currently it has been
PreeditNothing/StatusNothing).
- some fixage for some IM engine for preedit window (I disabled one
XMapWindow() that
is however required for &quot;atokx3&quot; or iiimf).
- add some context menu items for international text input to TextBox
and RichTextBox.

I have some prepared answers for possible questions:
- I needed to change StringBuilder argument to byte[] in
Xutf8LookupString() because it returns
length in UTF-8 bytes and the string length cannot be retrieved with
StringBuilder.
- I had to move EnsureKeyboardInitialized() to very early stage i.e.
X11Keyboard.ctor()
because the late initialization somehow caused missing IM startup sometimes.
- XFilterEvent() is required for non-KeyPress/KeyRelease event for some
(or every?) IM engine(s)
especially as for ClientMessageEvent.

Atsushi Eno

-------------- next part --------------
A non-text attachment was scrubbed...
Name: xim-20080314.patch
Type: text/x-patch
Size: 9150 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20080315/a630557f/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20080315/a630557f/attachment-0001.bin</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003278.html">[Mono-winforms-list] Winforms on Mac OSX troubles
</A></li>
	<LI>Next message: <A HREF="003273.html">[Mono-winforms-list] Winforms 'Listview' problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3272">[ date ]</a>
              <a href="thread.html#3272">[ thread ]</a>
              <a href="subject.html#3272">[ subject ]</a>
              <a href="author.html#3272">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
