<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] swf
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:adyler%40winisp.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001087.html">
   <LINK REL="Next"  HREF="001089.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] swf
   </H1>
    <B>gennady wexler
    </B> 
    <A HREF="mailto:adyler%40winisp.net"
       TITLE="[Mono-winforms-list] swf">adyler@winisp.net
       </A><BR>
    <I>Sat, 30 Oct 2004 08:42:37 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="001087.html">[Mono-winforms-list] swf
</A></li>
        <LI> Next message: <A HREF="001089.html">[Mono-winforms-list] swf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1088">[ date ]</a>
              <a href="thread.html#1088">[ thread ]</a>
              <a href="subject.html#1088">[ subject ]</a>
              <a href="author.html#1088">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>yes I am on the mac. :) mac os x 10.3, darwin 7.5, gcc 3.3 to be exact. the
standard package.

thanks for fixing the removing of .so from libraries names. it now declares
this error, which is expected?..

Unhandled Exception: System.TypeInitializationException: An exception was
thrown by the type initializer for System.Windows.Forms.XplatUI ---&gt;
System.DllNotFoundException: libX11
in &lt;0x000d8&gt; (wrapper managed-to-native)
System.Windows.Forms.XplatUIX11:XOpenDisplay (intptr)
in &lt;0x000c0&gt; System.Windows.Forms.XplatUIX11:.ctor ()
in &lt;0x0006c&gt; System.Windows.Forms.XplatUIX11:GetInstance ()
in &lt;0x0004c&gt; System.Windows.Forms.XplatUI:.cctor ()
--- End of inner exception stack trace -

adding mapping to translate libX11 to libX11.dylib appears to bypass this
particular error (which proves mono does not default to .dylib - not sure
whats the best treat here), however nothing gets displayed - no windows.

source for Form1 is in mcs/class/System.Windows.Forms/Samples, I trimmed it
to exclude controls which SWF does not know about it.

should it at least show a window?

all I get is this:

apple:~/mono/cvs/mcs/class/System.Windows.Forms/Samples adyler$ mono
Form1.exe
#region #line XplatUI Constructor called


On 10/30/04 3:30 AM, &quot;Peter Dennis Bartok&quot; &lt;<A HREF="mailto:peter@novonyx.com">peter@novonyx.com</A>&gt; wrote:

&gt;<i> Well, looks like you're on a Mac. I seem to remember that there was an issue
</I>&gt;<i> with having mono default to .dylib for shared libs, but I could be wrong and
</I>&gt;<i> confusing this with something else. Either way, I just removed the .so
</I>&gt;<i> ending from the DllImports in CVS, that shouldn't have been there. That
</I>&gt;<i> should help the automatic mapping mechanism. Also, if that doesn't work you
</I>&gt;<i> can try to manually map the dl through the config file.
</I>&gt;<i> 
</I>&gt;<i> Peter
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: &quot;gennady wexler&quot; &lt;<A HREF="mailto:adyler@winisp.net">adyler@winisp.net</A>&gt;
</I>&gt;<i> To: &quot;Peter Dennis Bartok&quot; &lt;<A HREF="mailto:peter@novonyx.com">peter@novonyx.com</A>&gt;; &quot;Paul&quot;
</I>&gt;<i> &lt;<A HREF="mailto:paul@all-the-johnsons.co.uk">paul@all-the-johnsons.co.uk</A>&gt;; &quot;mono-winforms&quot;
</I>&gt;<i> &lt;<A HREF="mailto:mono-winforms-list@lists.ximian.com">mono-winforms-list@lists.ximian.com</A>&gt;
</I>&gt;<i> Date: Friday, 29 October, 2004 22:58
</I>&gt;<i> Subject: Re: [Mono-winforms-list] swf
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> you are sure the problem is with whether X is running or not? we cant seem
</I>&gt;&gt;<i> to find this dll at all. I get exact same call stack from under X term
</I>&gt;&gt;<i> session. any idea where this dll lives and why it is not there?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> the only things I have in my X11 lib folder are these. are we missing
</I>&gt;&gt;<i> mapping? where does the mapping suppose to be defined for this to work?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> lrwxr-xr-x   1 root  wheel       15 21 Aug 00:34 libSM.dylib -&gt;
</I>&gt;&gt;<i> libSM.6.0.dylib
</I>&gt;&gt;<i> -rw-r--r--   1 root  wheel   995424  2 Mar  2004 libX11.6.2.dylib
</I>&gt;&gt;<i> lrwxr-xr-x   1 root  wheel       16 21 Aug 00:34 libX11.6.dylib -&gt;
</I>&gt;&gt;<i> libX11.6.2.dylib
</I>&gt;&gt;<i> -rw-r--r--   1 root  wheel  1572168  2 Mar  2004 libX11.a
</I>&gt;&gt;<i> lrwxr-xr-x   1 root  wheel       16 21 Aug 00:34 libX11.dylib -&gt;
</I>&gt;&gt;<i> libX11.6.2.dylib
</I>&gt;&gt;<i> -rw-r--r--   1 root  admin     9972  2 Mar  2004 libXRes.1.0.dylib
</I>&gt;&gt;<i> lrwxr-xr-x   1 root  wheel       17 21 Aug 00:34 libXRes.1.dylib -&gt;
</I>&gt;&gt;<i> libXRes.1.0.dylib
</I>&gt;&gt;<i> -rw-r--r--   1 root  wheel     5072  2 Mar  2004 libXRes.a
</I>&gt;&gt;<i> lrwxr-xr-x   1 root  wheel       17 21 Aug 00:34 libXRes.dylib -&gt;
</I>&gt;&gt;<i> libXRes.1.0.dylib
</I>&gt;&gt;<i> -rw-r--r--   1 root  wheel    33132  2 Mar  2004 libXTrap.6.4.dylib
</I>&gt;&gt;<i> lrwxr-xr-x   1 root  wheel       18 21 Aug 00:34 libXTrap.6.dylib -&gt;
</I>&gt;&gt;<i> libXTrap.6.4.dylib
</I>&gt;&gt;<i> -rw-r--r--   1 root  wheel    39804  2 Mar  2004 libXTrap.a
</I>&gt;&gt;<i> lrwxr-xr-x   1 root  wheel       18 21 Aug 00:34 libXTrap.dylib -&gt;
</I>&gt;&gt;<i> libXTrap.6.4.dylib
</I>&gt;&gt;<i> -rw-r--r--   1 root  wheel    13844  2 Mar  2004 libXau.a
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> apple:~/mono/cvs/mcs/class/System.Windows.Forms/Samples adyler$
</I>&gt;&gt;<i> mono --debug
</I>&gt;&gt;<i> Form1.exe
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Unhandled Exception: System.TypeInitializationException: An exception was
</I>&gt;&gt;<i> thrown by the type initializer for System.Windows.Forms.XplatUI ---&gt;
</I>&gt;&gt;<i> System.DllNotFoundException: libX11.so
</I>&gt;&gt;<i> in &lt;0x000d8&gt; (wrapper managed-to-native)
</I>&gt;&gt;<i> System.Windows.Forms.XplatUIX11:XOpenDisplay (intptr)
</I>&gt;&gt;<i> in [0x00032] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> XplatUIX11.cs:138) System.Windows.Forms.XplatUIX11:.ctor ()
</I>&gt;&gt;<i> in [0x0001b] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> XplatUIX11.cs:172) System.Windows.Forms.XplatUIX11:GetInstance ()
</I>&gt;&gt;<i> in [0x0001e] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> XplatUI.cs:183) System.Windows.Forms.XplatUI:.cctor ()
</I>&gt;&gt;<i> --- End of inner exception stack trace ---
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> in (unmanaged) System.Windows.Forms.XplatUI:get_DefaultClassName ()
</I>&gt;&gt;<i> in [0x00043] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> Control.cs:1776) System.Windows.Forms.Control:get_CreateParams ()
</I>&gt;&gt;<i> in [0x00043] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> Control.cs:1776) System.Windows.Forms.Control:get_CreateParams ()
</I>&gt;&gt;<i> in [0x00001] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> Form.cs:184) FormParentWindow:get_CreateParams ()
</I>&gt;&gt;<i> in [0x00087] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> Control.cs:757) System.Windows.Forms.Control:.ctor ()
</I>&gt;&gt;<i> in [0x00001] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> Form.cs:158) FormParentWindow:.ctor (System.Windows.Forms.Form)
</I>&gt;&gt;<i> in &lt;0x00094&gt; (wrapper remoting-invoke-with-check) FormParentWindow:.ctor
</I>&gt;&gt;<i> (System.Windows.Forms.Form)
</I>&gt;&gt;<i> in [0x00013] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> Form.cs:498) System.Windows.Forms.Form:get_CreateParams ()
</I>&gt;&gt;<i> in [0x00087] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> Control.cs:757) System.Windows.Forms.Control:.ctor ()
</I>&gt;&gt;<i> in [0x00001] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> ScrollableControl.cs:217) System.Windows.Forms.ScrollableControl:.ctor ()
</I>&gt;&gt;<i> in [0x00001] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> ContainerControl.cs:46) System.Windows.Forms.ContainerControl:.ctor ()
</I>&gt;&gt;<i> in [0x00001] (at
</I>&gt;&gt;<i> /Users/adyler/mono/cvs/mcs/class/Managed.Windows.Forms/System.Windows.Forms/
</I>&gt;&gt;<i> Form.cs:302) System.Windows.Forms.Form:.ctor ()
</I>&gt;&gt;<i> in &lt;0x00020&gt; WindowsApplication1.Form1:.ctor ()
</I>&gt;&gt;<i> in &lt;0x0007c&gt; (wrapper remoting-invoke-with-check)
</I>&gt;&gt;<i> WindowsApplication1.Form1:.ctor ()
</I>&gt;&gt;<i> in &lt;0x0002c&gt; WindowsApplication1.Form1:Main ()
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> apple:~/mono/cvs/mcs/class/System.Windows.Forms/Samples adyler$
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On 10/27/04 11:20 PM, &quot;Peter Dennis Bartok&quot; &lt;<A HREF="mailto:peter@novonyx.com">peter@novonyx.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> But surely, this isn't a mono problem? If the X server isn't running
</I>&gt;&gt;&gt;&gt;<i> (say a machine is set to runlevel 3), then the libraries won't be loaded
</I>&gt;&gt;&gt;&gt;<i> either. An X session won't be started so the best that can happen is an
</I>&gt;&gt;&gt;&gt;<i> exception is thrown. As I've said though, the error report would vary
</I>&gt;&gt;&gt;&gt;<i> between platforms...
</I>&gt;&gt;&gt;<i> Well, it's not a Mono problem per se, no, if you want to display via X
</I>&gt;&gt;&gt;<i> you
</I>&gt;&gt;&gt;<i> need an X-Server. But, the libs will load just fine even if no X-Server
</I>&gt;&gt;&gt;<i> is
</I>&gt;&gt;&gt;<i> run on the machine where they are being loaded. After all, just loading
</I>&gt;&gt;&gt;<i> they
</I>&gt;&gt;&gt;<i> won't know if there's an X-Server running or not, and X-servers can be
</I>&gt;&gt;&gt;<i> remote.
</I>&gt;&gt;&gt;<i> We're just not handling the fact that we can't open the display, and that
</I>&gt;&gt;&gt;<i> is
</I>&gt;&gt;&gt;<i> ultimately a Mono/MWF problem. All we need to do is deal with
</I>&gt;&gt;&gt;<i> XOpenDisplay
</I>&gt;&gt;&gt;<i> returning null, instead of just assuming it didn't. At that point we can
</I>&gt;&gt;&gt;<i> choose to throw an exception or even just display an error message and
</I>&gt;&gt;&gt;<i> exit
</I>&gt;&gt;&gt;<i> the app. Simple fix. In fact, so simple, I just fixed it in the head CVS
</I>&gt;&gt;&gt;<i> version :-)
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Cheers,
</I>&gt;&gt;&gt;<i>   Peter
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-winforms-list maillist  -  <A HREF="mailto:Mono-winforms-list@lists.ximian.com">Mono-winforms-list@lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001087.html">[Mono-winforms-list] swf
</A></li>
	<LI> Next message: <A HREF="001089.html">[Mono-winforms-list] swf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1088">[ date ]</a>
              <a href="thread.html#1088">[ thread ]</a>
              <a href="subject.html#1088">[ subject ]</a>
              <a href="author.html#1088">[ author ]</a>
         </LI>
       </UL>
</body></html>
