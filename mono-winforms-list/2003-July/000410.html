<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Re: Help with Wine patched library on Linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:paul.butcher%40asa.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000406.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Re: Help with Wine patched library on Linux
   </H1>
    <B>Paul Butcher
    </B> 
    <A HREF="mailto:paul.butcher%40asa.co.uk"
       TITLE="[Mono-winforms-list] Re: Help with Wine patched library on Linux">paul.butcher@asa.co.uk
       </A><BR>
    <I>Thu, 31 Jul 2003 14:00:56 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="000406.html">[Mono-winforms-list] Help with Wine patched library on Linux
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#410">[ date ]</a>
              <a href="thread.html#410">[ thread ]</a>
              <a href="subject.html#410">[ subject ]</a>
              <a href="author.html#410">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the help - that got me some way further but still no window is 
showing.  I did the following

1.  win32server -p originally reported could not find libwin32.so - I realised 
/usr/local/lib was not in LD_LIBRARY_PATH.  With this corrected it runs OK.

2.  Then when I ran mono with example SWF app I got:
  Warning: no valid DOS drive found, check your configuration file.
  Warning: could not find wine config [Drive x] entry for current working
   directory ....; starting in windows directory.
  Invalid path L&quot;c:\\windows&quot; for L&quot;windows&quot; directory: does not exist
  Perhaps you have not properly edited or created your Wine configuration
  file. This is (supposed to be) '/people/paulb/.wine/config'

So I realised I had no valid .wine directory or config file.  I created a 
default one using my full wine build (an old one from 2001) together with the 
required fake_windows dir etc.

3.  Then on running mono I get instead:
  Warning: Language 'en_GB' was not found, retrying without country name...
  Warning: Language 'en' was not recognized, defaulting to English

and then the app hangs - no window appears but mono does not exit either.

How should wine be setup to run with these patched shared libs?

PS I meant SWF=1 in my original e-mail - just a typo!

Paul Butcher


On July 31st, 2003 <A HREF="mailto:rodolfocampero@hotmail.com">rodolfocampero@hotmail.com</A> wrote:
&gt;<i> Paul,
</I>&gt;<i> Try executing
</I>&gt;<i> $ win32server -p
</I>&gt;<i> before calling your program (1.works for me; 2.don't remember the exact name 
</I>&gt;<i> of the executable, look in &lt;prefix&gt;/bin).
</I>&gt;<i> The environment variable is SWF.
</I>&gt;<i> 
</I>&gt;&gt;<i>From: Paul Butcher &lt;<A HREF="mailto:paul.butcher@asa.co.uk">paul.butcher@asa.co.uk</A>&gt;
</I>&gt;&gt;<i>Organization: ASA Ltd.
</I>&gt;&gt;<i>To: <A HREF="mailto:mono-winforms-list@lists.ximian.com">mono-winforms-list@lists.ximian.com</A>
</I>&gt;&gt;<i>Date: Wed, 30 Jul 2003 17:23:37 +0100
</I>&gt;&gt;<i>Subject: [Mono-winforms-list] Help with Wine patched library on Linux
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Having seen the patched wine libs were now on the mono download page I 
</I>&gt;&gt;<i>wanted
</I>&gt;&gt;<i>to finally try the System.Windows.Forms assembly, but I can't get it to 
</I>&gt;&gt;<i>run.
</I>&gt;&gt;<i>Any help appreciated:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Here's what I've done:
</I>&gt;&gt;<i>1. Downloaded wine-20030318.tar.gz and patches from the wine patch site
</I>&gt;&gt;<i>(ibiblio) and built and installed according to instructions there.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>(NB There is a source code error after patching in line 695 where a 
</I>&gt;&gt;<i>variable
</I>&gt;&gt;<i>HMODULE module is declared after other statements which is not allowed in 
</I>&gt;&gt;<i>C.
</I>&gt;&gt;<i>I swapped lines 694 and 695 to cure.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>2. Rebuilt mono-0.25 from sources (using my currently installed version 
</I>&gt;&gt;<i>from
</I>&gt;&gt;<i>an RPM caused mono errors finding the various wine .dll.so files)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>3.  Built simple SWT example using mcs.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>4.  Run using mono - reports the following and then EXITS leaving three
</I>&gt;&gt;<i>threads running and no window appears:
</I>&gt;&gt;<i>   MonoWin32: Initializing WineLib
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I tried setting env var 'SWT=1' as suggested in some places but this made 
</I>&gt;&gt;<i>no
</I>&gt;&gt;<i>difference.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I notice the wine-patch archive includes patches to mono to build a monogui
</I>&gt;&gt;<i>stub - is this still required?  (I couldn't get it to build; automake
</I>&gt;&gt;<i>reported errors following instructions to patch mono)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>My system is a SuSE 8.0 Linux with SMP kernel.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Paul Butcher
</I>&gt;&gt;<i>ALTON,Hants, England
</I>


This communication is confidential to the intended recipient(s). If you are not that person you are not permitted to make use of the information and you are requested to notify the sender immediately of its receipt then destroy the copy in your possession. Any views or opinions expressed are those of the originator and may not represent those of Advanced System Architectures Ltd.

*** This Email Has Been Virus Checked ***


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000406.html">[Mono-winforms-list] Help with Wine patched library on Linux
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#410">[ date ]</a>
              <a href="thread.html#410">[ thread ]</a>
              <a href="subject.html#410">[ subject ]</a>
              <a href="author.html#410">[ author ]</a>
         </LI>
       </UL>
</body></html>
