<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] [PATCH] Additional locking in Carbon XplatUI	driver
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20%5BPATCH%5D%20Additional%20locking%20in%20Carbon%20XplatUI%0A%09driver&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004017.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] [PATCH] Additional locking in Carbon XplatUI	driver</H1>
    <B>Dick Porter</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20%5BPATCH%5D%20Additional%20locking%20in%20Carbon%20XplatUI%0A%09driver&In-Reply-To="
       TITLE="[Mono-winforms-list] [PATCH] Additional locking in Carbon XplatUI	driver">dick at acm.org
       </A><BR>
    <I>Thu Apr 30 06:50:40 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004017.html">[Mono-winforms-list] Finding x and y position in a picture box
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4018">[ date ]</a>
              <a href="thread.html#4018">[ thread ]</a>
              <a href="subject.html#4018">[ subject ]</a>
              <a href="author.html#4018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All

I've observed NullReferenceExceptions from
System.Windows.Forms.XplatUICarbon.GetMessage() (specifically,
MessageQueue.Dequeue() inside GetMessage was randomly returning nulls)
and tracked it down to the locking around MessageQueue.  This patch
ensures that MessageQueue is locked whenever it is modified, completely
curing the exceptions for me.

Is this OK to check into HEAD?

- Dick

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mwf-diff
Type: text/x-patch
Size: 2905 bytes
Desc: 
Url : <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090430/dade65ff/attachment.bin">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090430/dade65ff/attachment.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090430/dade65ff/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090430/dade65ff/attachment-0001.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004017.html">[Mono-winforms-list] Finding x and y position in a picture box
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4018">[ date ]</a>
              <a href="thread.html#4018">[ thread ]</a>
              <a href="subject.html#4018">[ subject ]</a>
              <a href="author.html#4018">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
