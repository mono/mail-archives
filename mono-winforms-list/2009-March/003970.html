<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] [PATCH] Synchronized Activation of windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20%5BPATCH%5D%20Synchronized%20Activation%20of%20windows&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003969.html">
   <LINK REL="Next"  HREF="003971.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] [PATCH] Synchronized Activation of windows</H1>
    <B>Carlos Alberto Cortez</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20%5BPATCH%5D%20Synchronized%20Activation%20of%20windows&In-Reply-To="
       TITLE="[Mono-winforms-list] [PATCH] Synchronized Activation of windows">calberto.cortez at gmail.com
       </A><BR>
    <I>Wed Mar 25 03:28:02 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003969.html">[Mono-winforms-list] [Patch] CausesValidation handling
</A></li>
        <LI>Next message: <A HREF="003971.html">[Mono-winforms-list] A&amp;O Carlos Alberto Cortez, 2009-03-25
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3970">[ date ]</a>
              <a href="thread.html#3970">[ thread ]</a>
              <a href="subject.html#3970">[ subject ]</a>
              <a href="author.html#3970">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey

While trying to fix #413898, I found that we are not activating the related
form when setting Form.Visible to true, as opposed to .net (we actually do
that in Application.RunLoop, however, which is used by both
Application.Run() and Form.ShowDialog()).

An additional problem is the fact that trying to activate the form when made
visible (Form.SetVisibleCore in this case) is not a guarantee of receiving
the WM_ACTIVATE message in time before the form gets closed (not a problem
in both Application.Run and Form.ShowDialog), specially because we have to
send a message to the window manager, then wait for a X message, then
internally process in our own winforms queue.

So after trying several approachs, I came up with the simple attached patch,
that basically adds a synchronized version of the XplatUI.Activate method,
which in X11 sends the appropriate message to the window manager and then
sits to wait till we have processed it. Even if simple, and could run all
the test suite, I'm not very sure, because a synchronized call sounds
dangerous, and because I thought that maybe somebody could know why we
hadn't something like this before ;-).

Thoughts?
Carlos.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090325/e78f4f32/attachment.html">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090325/e78f4f32/attachment.html</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: activate-synch.patch
Type: text/x-patch
Size: 3160 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090325/e78f4f32/attachment.bin">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090325/e78f4f32/attachment.bin</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003969.html">[Mono-winforms-list] [Patch] CausesValidation handling
</A></li>
	<LI>Next message: <A HREF="003971.html">[Mono-winforms-list] A&amp;O Carlos Alberto Cortez, 2009-03-25
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3970">[ date ]</a>
              <a href="thread.html#3970">[ thread ]</a>
              <a href="subject.html#3970">[ subject ]</a>
              <a href="author.html#3970">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
