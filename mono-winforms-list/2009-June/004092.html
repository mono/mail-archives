<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Clipboard.SetDataObject() doing nothing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Clipboard.SetDataObject%28%29%20doing%20nothing&In-Reply-To=1c146860906060229g37a030eckb1aad25537a79a8f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004072.html">
   <LINK REL="Next"  HREF="004074.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Clipboard.SetDataObject() doing nothing</H1>
    <B>Christoph Teuber</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Clipboard.SetDataObject%28%29%20doing%20nothing&In-Reply-To=1c146860906060229g37a030eckb1aad25537a79a8f%40mail.gmail.com"
       TITLE="[Mono-winforms-list] Clipboard.SetDataObject() doing nothing">christoph.teuber at gmx.li
       </A><BR>
    <I>Fri Jun 19 17:40:56 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004072.html">[Mono-winforms-list] Clipboard.SetDataObject() doing nothing
</A></li>
        <LI>Next message: <A HREF="004074.html">[Mono-winforms-list] PrintPreviewControl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4092">[ date ]</a>
              <a href="thread.html#4092">[ thread ]</a>
              <a href="subject.html#4092">[ subject ]</a>
              <a href="author.html#4092">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

thanks for doing this, but unfortunately it still doesn't seem to work.
I tried

Mono JIT compiler version 136402 (tarball Thu Jun 18 16:14:38 CEST 2009)

and pasting an image to the clipboard has no effect.

I did append a small test application to demonstrate the behaviour. The
.exe-Version has been compiled with VisualStudio 2008.

It has two buttons to load an image and puts it into the clipboard (a
file called &quot;test.jpg&quot; needs to be in the program directory). After
pasting the image, the formats are listed in a combobox and selecting
one of them loads the clipboard contents into the picturebox above.
Under Windows, this works without problems.

Under mono on Ubuntu 9.04, no format will be found after storing the
data. Another strange thing is, that old clipboard contents reappears if
the formats are listed again. If text is in the clipboard before the
image is stored, it seems to be gone because listing the formats results
in 0 entries. Listing them for a second time, returns the old string
formats as results. Even clearing the clipboard doesn't work.

System.Drawing.Image implements ISerializable, so this can't be the
problem.

Concerning large objects in the clipboard, I think you're wrong. Under
Windows, there is no problem with cutting some detail out of a picture,
pasting it into the clipboard, copying it over the net and pasting it
into another application on the remote computer. No path is used there.

Greetings
Christoph

Carlos Alberto Cortez wrote:
&gt;<i> Hey!
</I>&gt;<i>
</I>&gt;<i> Sorry for the late answer. Basically in trunk we now support custom
</I>&gt;<i> formats in the Clipboard - observe, however that only types
</I>&gt;<i> implementing ISerializable can properly be 'copied/pasted'.
</I>&gt;<i>
</I>&gt;<i> Anyway, just as a general recommendation, you should avoid putting any
</I>&gt;<i> large object in the Clipboard as possible - for example, both Windows
</I>&gt;<i> and Gnome, when copying/pasting pictures usually only put the path in
</I>&gt;<i> the clipboard, and then they proceed to use that path when needed.
</I>&gt;<i>
</I>&gt;<i> About the protocol, probably you can keep your eyes out of it ;-) The
</I>&gt;<i> basic answer to your issues, is that the used protocol is old and is
</I>&gt;<i> not as unified -format wise- as you could expect. The basic
</I>&gt;<i> interaction between them is basically compatible with text -as you can
</I>&gt;<i> copy text between apps and even window managers and toolkits- but
</I>&gt;<i> *usually* other types should be used as application-dependant.
</I>&gt;<i>
</I>&gt;<i> If you want to take a look at the protocol, read
</I>&gt;<i> <A HREF="http://www.freedesktop.org/wiki/Specifications/ClipboardsWiki">http://www.freedesktop.org/wiki/Specifications/ClipboardsWiki</A> and
</I>&gt;<i> <A HREF="http://www.jwz.org/doc/x-cut-and-paste.html">http://www.jwz.org/doc/x-cut-and-paste.html</A>
</I>&gt;<i>
</I>&gt;<i> Carlos.
</I>&gt;<i>
</I>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MonoCliptest.exe
Type: application/x-ms-dos-executable
Size: 10752 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090619/d6c670db/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090619/d6c670db/attachment-0001.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MonoCliptest.zip
Type: application/zip
Size: 5503 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090619/d6c670db/attachment-0001.zip">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20090619/d6c670db/attachment-0001.zip</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004072.html">[Mono-winforms-list] Clipboard.SetDataObject() doing nothing
</A></li>
	<LI>Next message: <A HREF="004074.html">[Mono-winforms-list] PrintPreviewControl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4092">[ date ]</a>
              <a href="thread.html#4092">[ thread ]</a>
              <a href="subject.html#4092">[ subject ]</a>
              <a href="author.html#4092">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
