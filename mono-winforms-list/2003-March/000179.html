<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Window class registration, Aleksey Ryabchuk's suggestions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:vkaluzhny%40openlinksw.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000177.html">
   <LINK REL="Next"  HREF="000180.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Window class registration, Aleksey Ryabchuk's suggestions
   </H1>
    <B>Vlad Kaluzhny
    </B> 
    <A HREF="mailto:vkaluzhny%40openlinksw.co.uk"
       TITLE="[Mono-winforms-list] Window class registration, Aleksey Ryabchuk's suggestions">vkaluzhny@openlinksw.co.uk
       </A><BR>
    <I>Mon, 24 Mar 2003 17:58:50 +0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="000177.html">[Mono-winforms-list] Final changes re Window registration
 procedure
</A></li>
        <LI> Next message: <A HREF="000180.html">FW: [Mono-winforms-list] Final changes re Window registration procedure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#179">[ date ]</a>
              <a href="thread.html#179">[ thread ]</a>
              <a href="subject.html#179">[ subject ]</a>
              <a href="author.html#179">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.

----- Original Message -----
From: &quot;Aleksey Ryabchuk&quot; &lt;<A HREF="mailto:ryabchuk@yahoo.com">ryabchuk@yahoo.com</A>&gt;
To: &lt;<A HREF="mailto:mono-winforms-list@lists.ximian.com">mono-winforms-list@lists.ximian.com</A>&gt;
Sent: Monday, March 24, 2003 17:11
Subject: Re: [Mono-winforms-list] Final changes re Window
registrationprocedure


&gt;<i> Some remarks ...
</I>&gt;<i>
</I>&gt;<i> regarding this change:
</I>&gt;<i>
</I>&gt;<i> /* there was  variable name duplication - we have it
</I>&gt;<i> as member of parent class. <A HREF="mailto:vkaluzhny@openlinksw.co.uk">vkaluzhny@openlinksw.co.uk</A>
</I>&gt;<i> */
</I>&gt;<i> createParams = new CreateParams ();
</I>&gt;<i>
</I>&gt;<i> I don't think that the base class, namely ButtonBase,
</I>&gt;<i> should declare that field at all. It should override
</I>&gt;<i> CreateParams property, create new instance of
</I>&gt;<i> CreateParams class and set properties common to all
</I>&gt;<i> ButtonBase-derived classes. Derived classes should
</I>&gt;<i> call the base.CreateParams. Otherwise, I don't see any
</I>&gt;<i> reason why ButtonBase overrides this property at all,
</I>&gt;<i> if it does not do anything useful.
</I>

Aleksey,  Honesty to say, this field was not created  by me.
I just fixed the bug, because presence of two copies
(as class member and local variable) of the same
variable  caused the situation, when on one place  the value
is designating to one copy, and on other place is  using the value
of another copy. I guess i've got what I mean.
I think the same, that CreateParams varaible as the member of
ButtonBase class is not required here.

&gt;<i> Regarding GetCurrentThreadId, I'm really wondering how
</I>&gt;<i> it can be absent in Wine, if a quick look at the
</I>&gt;<i> Wine's sources shows that it is being used throughout
</I>&gt;<i> the Wine's code. Though I'm not a Wine user and may be
</I>&gt;<i> mistaken.
</I>&gt;<i>
</I>&gt;<i> Regarding your RegisterClass function... I believe
</I>&gt;<i> that the Hashtable container is not appropriate here.
</I>&gt;<i> May be it's better to use some set-like container.
</I>&gt;<i> What sense does it make to put &quot;this&quot; pointer in
</I>&gt;<i> hashtable ? I'm afraid that it will result in not
</I>&gt;<i> GC-ing of some NativeWindow instances
</I>
Hashtable is a good place to hold the indexed data.
other code is more complicated.

You are correct, &quot;this&quot; is not a good flag.  I will use use another  flag
value.

Meantime, the used  approach,  I think, to register class is opitmazed
and nothing  can be improved over there. I guess :-)

&gt;&gt;<i>Again, you
</I>&gt;<i> say that we should use constants from
</I>&gt;<i> win32functions.cs for window class names, but may be
</I>&gt;<i> we have to do it for names like &quot;BUTTON&quot;, &quot;STATIC&quot;,
</I>&gt;<i> etc. as well. Just for consistency purpose.
</I>
In fact you are correct, this is  convenient. I will implement this then

&gt;<i> wbr
</I>&gt;<i> ary
</I>&gt;<i>
</I>&gt;<i> --- Vlad Kaluzhny &lt;<A HREF="mailto:vkaluzhny@openlinksw.co.uk">vkaluzhny@openlinksw.co.uk</A>&gt; wrote:
</I>&gt;<i> &gt; Hi.
</I>&gt;<i> &gt; After analizing of the guys wishes, I have modified
</I>&gt;<i> &gt; the Window Class
</I>&gt;<i> &gt; registration.
</I>&gt;<i> &gt; The only suggestion - use the class names, which are
</I>&gt;<i> &gt; described in Win32
</I>&gt;<i> &gt; class
</I>&gt;<i> &gt; (I put them in win32functions.cs file). Or add there
</I>&gt;<i> &gt; your class name, if you
</I>&gt;<i> &gt; need it.
</I>&gt;<i> &gt; This will avoid the class names duplications with
</I>&gt;<i> &gt; small and/or  capital
</I>&gt;<i> &gt; chars mixture.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; And Second,  be attentive when specify the
</I>&gt;<i> &gt; CreateParams.ClassStyle value.
</I>&gt;<i> &gt; It is simply duplication of class being registered,
</I>&gt;<i> &gt; when you have the same
</I>&gt;<i> &gt; style for
</I>&gt;<i> &gt; different classes. Another to say - when assign new
</I>&gt;<i> &gt; class name, take care,
</I>&gt;<i> &gt; that
</I>&gt;<i> &gt; it have the style, which  is not specified for
</I>&gt;<i> &gt; another  window class.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards, Vlad
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> &gt; ATTACHMENT part 2 application/octet-stream
</I>&gt;<i> name=res2.diff
</I>&gt;<i>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000177.html">[Mono-winforms-list] Final changes re Window registration
 procedure
</A></li>
	<LI> Next message: <A HREF="000180.html">FW: [Mono-winforms-list] Final changes re Window registration procedure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#179">[ date ]</a>
              <a href="thread.html#179">[ thread ]</a>
              <a href="subject.html#179">[ subject ]</a>
              <a href="author.html#179">[ author ]</a>
         </LI>
       </UL>
</body></html>
