<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] General hello
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:m.hearn%40signal.qinetiq.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000097.html">
   <LINK REL="Next"  HREF="000101.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] General hello
   </H1>
    <B>Mike Hearn
    </B> 
    <A HREF="mailto:m.hearn%40signal.qinetiq.com"
       TITLE="[Mono-winforms-list] General hello">m.hearn@signal.qinetiq.com
       </A><BR>
    <I>10 Mar 2003 09:03:46 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000097.html">[Mono-winforms-list] General hello
</A></li>
        <LI> Next message: <A HREF="000101.html">[Mono-winforms-list] Monostub for Wine SWF
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100">[ date ]</a>
              <a href="thread.html#100">[ thread ]</a>
              <a href="subject.html#100">[ subject ]</a>
              <a href="author.html#100">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Then we have the issue with the pthread API: currently the issue, I
</I>&gt;<i> think, is that mono uses some pthread functions not implemented by wine
</I>&gt;<i> and they are currently stubbed to allow the dynamic linker to work.
</I>
I can investigate if you like, but as I said I think the main threading
problem is that Wine doesn't use pthreads, it uses its own version,
because pure pthreads doesn't provide good enough support for certain
windows features. Now that NPTL is being phased in, Wine is busted in
all distros using the new glibc - Phoebe for instance.

As you can imagine, that's a cause for concern for us. Alexandre is now
busy porting Wine to the new NPTL/glibc threading system, so it'll
continue to work on newer distros.

As part of that, I believe it should become possible to link wine
against pthreads with few or no problems. I'll double-check, but that's
the impression I got from the mailing list.

&gt;<i> What I think can solve the problem is to have a libwine build that
</I>&gt;<i> doesn't include any of the normal emulation stuff, but just what is
</I>&gt;<i> needed to provvide the drawing and windowing API. 
</I>
What is &quot;normal emulation stuff&quot;? The implementation of the
GDI/USER/COMCTRL libraries depends on NTDLL etc etc, just as it would in
Windows. That's why it's a nearly exact emulation. Pulling in the
controls library involves pulling in many other parts of Wine.

&gt;<i> I guess there may be
</I>&gt;<i> several dependencies issues and it may not be easy to do: we'd like the
</I>&gt;<i> input from the wine developers on this.
</I>
Most wine dependancies are dynamically loaded these days (ie freetype),
the actual &quot;hard&quot; dependancy list is remarkably small, basically X11
support and glibc:

<A HREF="http://www.winehq.com/news/?view=160#Wine's%20Library%20Dependencies">http://www.winehq.com/news/?view=160#Wine's%20Library%20Dependencies</A>

&gt;<i> Note that if only those chunks of code are included, we would be able to
</I>&gt;<i> dynamically load the modified libwine when the System.Windows.Forms
</I>&gt;<i> assembly is referenced and there should be no need for the separate
</I>&gt;<i> libpthread implementation or the %fs tricks wine needs to provide to
</I>&gt;<i> execute windows binaries.
</I>
I think it makes more sense to try and have the whole of wine available
if you need it, that way assemblies using P/Invoke for other Win32 API
calls will still work (in theory).

I'll check up on what the implications for Alexandres current threading
work really are with respect to you guys, and get back to you.

thanks -mike


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000097.html">[Mono-winforms-list] General hello
</A></li>
	<LI> Next message: <A HREF="000101.html">[Mono-winforms-list] Monostub for Wine SWF
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100">[ date ]</a>
              <a href="thread.html#100">[ thread ]</a>
              <a href="subject.html#100">[ subject ]</a>
              <a href="author.html#100">[ author ]</a>
         </LI>
       </UL>
</body></html>
