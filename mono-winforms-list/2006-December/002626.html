<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] dpi patch for libgdiplus
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20dpi%20patch%20for%20libgdiplus&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002625.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] dpi patch for libgdiplus</H1>
    <B>Chris Toshok</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20dpi%20patch%20for%20libgdiplus&In-Reply-To="
       TITLE="[Mono-winforms-list] dpi patch for libgdiplus">toshok at ximian.com
       </A><BR>
    <I>Fri Dec 29 17:28:13 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002625.html">[Mono-winforms-list] [PATCH] Theme.DefaultFont
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2626">[ date ]</a>
              <a href="thread.html#2626">[ thread ]</a>
              <a href="subject.html#2626">[ subject ]</a>
              <a href="author.html#2626">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>the reason for this change is to make gert's recent font patch work
properly.

As jackson mentioned, we switched from 8.25 to 8.0 fonts for MWF to
maintain the correct sizing on X11.  The trouble with this is that the
measurements used to generate the value &quot;8.0&quot; were specific to the DPI
of the monitor Peter used for the work.  And the change only works for
the default font, not for any that the user specifically requests.

Xft defaults to 96dpi, the same as windows, which gives us a problem,
since our displays are (in general) higher dpi than that.  We're not
looking to be consistent across other linux applications for the same
font size.  We're looking for the winforms UI's to be consistent across
platforms.  Since designers can (and do) include hardcoded pixel sizes,
we need to scale the font sizes on X, and the default dpi of 96 was
resulting in no scaling.

This change results in the following output when measuring the string
&quot;hi there&quot; on both linux and windows, using the DefaultFont of 8.25pt:

linux: {Width=41, Height=14}
windows: {Width=41.37711, Height=13.8252}

which is &quot;close enough&quot;.

Chris
-------------- next part --------------
A non-text attachment was scrubbed...
Name: libgdiplus-dpi.diff
Type: text/x-patch
Size: 1387 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20061229/fdafaaa4/attachment.bin">http://lists.ximian.com/pipermail/mono-winforms-list/attachments/20061229/fdafaaa4/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002625.html">[Mono-winforms-list] [PATCH] Theme.DefaultFont
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2626">[ date ]</a>
              <a href="thread.html#2626">[ thread ]</a>
              <a href="subject.html#2626">[ subject ]</a>
              <a href="author.html#2626">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
