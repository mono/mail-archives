<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-winforms-list] Porting application that calls windows andother DLLs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Porting%20application%20that%20calls%20windows%0A%20andother%20DLLs&In-Reply-To=B043FD61A001424599674F50FC89C2D7192DB7D8A4%40ININMAIL.i3domain.inin.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003812.html">
   <LINK REL="Next"  HREF="003814.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-winforms-list] Porting application that calls windows andother DLLs</H1>
    <B>Roderick Colenbrander</B> 
    <A HREF="mailto:mono-winforms-list%40lists.ximian.com?Subject=%5BMono-winforms-list%5D%20Porting%20application%20that%20calls%20windows%0A%20andother%20DLLs&In-Reply-To=B043FD61A001424599674F50FC89C2D7192DB7D8A4%40ININMAIL.i3domain.inin.com"
       TITLE="[Mono-winforms-list] Porting application that calls windows andother DLLs">thunderbird2k at gmx.net
       </A><BR>
    <I>Thu Dec 18 18:53:20 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003812.html">[Mono-winforms-list] Porting application that calls windows andother DLLs
</A></li>
        <LI>Next message: <A HREF="003814.html">[Mono-winforms-list] Running a MWF app on solaris
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3813">[ date ]</a>
              <a href="thread.html#3813">[ thread ]</a>
              <a href="subject.html#3813">[ subject ]</a>
              <a href="author.html#3813">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The way we recommend in case of Wine (I'm a Wine dev) is to use the win32 version of mono on Wine and run your app that way. Then you should be able to pinvoke win32 dlls if win32 mono allows that which I believe it can. Note that a lot of apps also try to mix windows.forms with legacy gdi32/user32 calls which won't work due to the managed windows.forms implementation.

Roderick

&gt;<i>   Correct.  Once in a while I see some emails about Wine and such but I
</I>&gt;<i> don't recall anyone ever saying that they've gotten it to work; mostly it's
</I>&gt;<i> once in a while that someone asks if it *can* work and pretty much the
</I>&gt;<i> situation is &quot;if you have to ask - then you don't know near enough to ever get
</I>&gt;<i> it working.&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Matthew Donaldson [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">matthew at datadeliverance.com</A>] 
</I>&gt;<i> Sent: Thursday, December 18, 2008 4:20 PM
</I>&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list at lists.ximian.com</A>; Maser, Dan
</I>&gt;<i> Subject: RE: [Mono-winforms-list] Porting application that calls windows
</I>&gt;<i> andother DLLs
</I>&gt;<i> 
</I>&gt;<i> Thanks, that's encouraging news.  But you definitely have to compile the
</I>&gt;<i> DLLs for Linux don't you - I'm right in assuming that pinvoke on Mono won't
</I>&gt;<i> call into native Windows DLLs?
</I>&gt;<i> 
</I>&gt;<i> +--------------------------------------------------------------------------+
</I>&gt;<i> | Matthew Donaldson             <A HREF="http://www.datadeliverance.com">http://www.datadeliverance.com</A>            
</I>&gt;<i> |
</I>&gt;<i> | Data Deliverance Pty. Ltd.    Email: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">matthew at datadeliverance.com</A>        
</I>&gt;<i> |
</I>&gt;<i> | 30 Musgrave Ave.              Phone: +61 8 8265 7976            _       
</I>&gt;<i> |
</I>&gt;<i> | Banksia Park                  Fax:   +61 8 8265 0032     John  / \/     
</I>&gt;<i> |
</I>&gt;<i> | South Australia 5091                                     3:16  \_/\     
</I>&gt;<i> |
</I>&gt;<i> +--------------------------------------------------------------------------+
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  On Fri 19/12/08  1:07 AM , &quot;Maser, Dan&quot; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">Dan.Maser at inin.com</A> sent:
</I>&gt;<i> &gt; In my mono application I have PInvokes that run on both Windows and
</I>&gt;<i> Linux
</I>&gt;<i> &gt; and in my experience it works and you don't even have to change the
</I>&gt;<i> source
</I>&gt;<i> &gt; code from &quot;.dll&quot; to &quot;.so&quot;.  If you put the module name
</I>&gt;<i> &gt; only in the source code then the right thing happens.  The MS.NET knowns
</I>&gt;<i> to
</I>&gt;<i> &gt; append &quot;.dll&quot; when looking for the file and Mono knows to try
</I>&gt;<i> &gt; both &quot;.dll&quot; and &quot;.so&quot; when running on Linux.
</I>&gt;<i> &gt; Additionally, I think there's something about an xml file you can put in
</I>&gt;<i> &gt; the same directory as your assembly that acts as a mapping where you can
</I>&gt;<i> &gt; tell mono &quot;when looking for foo.dll you should try bar.so&quot; that
</I>&gt;<i> &gt; you can use if you don't want the Windows and Linux libraries to have
</I>&gt;<i> the
</I>&gt;<i> &gt; same name.
</I>&gt;<i> &gt; Of course you have to pay close attention to using the correct
</I>&gt;<i> decorations
</I>&gt;<i> &gt; for calling conventions on both libraries.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list-bounces at lists.ximian.com</A>
</I>&gt;<i> [<A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list-bounces at lists.ximian.com</A>] On Behalf
</I>&gt;<i> &gt; Of mcgdSent: Thursday, December 18, 2008 5:42 AM
</I>&gt;<i> &gt; To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">mono-winforms-list at lists.ximian.comSubject</A>: [Mono-winforms-list]
</I>&gt;<i> Porting application that calls windows and
</I>&gt;<i> &gt; other DLLs
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I've been asked to try and get a .NET 1.1 application working under
</I>&gt;<i> Mono.
</I>&gt;<i> &gt; It makes quite a few Windows API calls, but also calls several other
</I>&gt;<i> &gt; DLLsusing PInvoke.  Most of these DLLs can probably be recompiled under
</I>&gt;<i> &gt; Linux,but probably not all.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt;From looking around, it seems that it's not
</I>&gt;<i> &gt; possible to call Windows DLLsvia PInvoke using Mono, but I wanted to
</I>&gt;<i> make sure this is the case. 
</I>&gt;<i> &gt; Someonementioned something called &quot;ctypes&quot; as a way of doing this, but
</I>&gt;<i> &gt; this seemsto be a Python thing.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'd appreciate input on what my options might be available here, and
</I>&gt;<i> &gt; whetherit's worth trying to go further.  A few other specific questions
</I>&gt;<i> -
</I>&gt;<i> &gt; answersor URLs appreciated:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; - Is there any way at all to get the equivalent of calls into
</I>&gt;<i> User32.dll? 
</I>&gt;<i> &gt; Most of these are in User32.dll.  The application is very
</I>&gt;<i> &gt; GUI-intensive.
</I>&gt;<i> &gt; - Is it possible to use Wine to run the DLLs?  I've seen references to
</I>&gt;<i> &gt; thisidea, but I don't think I've found anything concrete.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; - If the other DLLs could be recompiled into .so files under Linux, can
</I>&gt;<i> &gt; Iuse PInvoke without changing anything except &quot;.dll&quot; into
</I>&gt;<i> &gt; &quot;.so&quot;, or doparameter names and types need to be changed too?  (i.e.
</I>&gt;<i> would this
</I>&gt;<i> &gt; possiblybe a significant porting effort in its own right?)
</I>&gt;<i> &gt; -- 
</I>&gt;<i> &gt; View this message in context:
</I>&gt;<i> <A HREF="http://www.nabble.com/Porting-application-that-calls-windows-an">http://www.nabble.com/Porting-application-that-calls-windows-an</A>
</I>&gt;<i> &gt; d-other-DLLs-tp21071161p21071161.htmlSent from the Mono - WinForms
</I>&gt;<i> mailing list archive at Nabble.com.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-winforms-list maillist  - 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">Mono-winforms-list at lists.ximian.comhttp</A>://lists.ximian.com/mailman/listinfo/mono-winforms-list
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> ---- Message sent via Adam Internet WebMail  - <A HREF="http://www.adam.com.au/">http://www.adam.com.au/</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-winforms-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">Mono-winforms-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">http://lists.ximian.com/mailman/listinfo/mono-winforms-list</A>
</I>
-- 
Sensationsangebot verl&#228;ngert: GMX FreeDSL - Telefonanschluss + DSL 
f&#252;r nur 16,37 Euro/mtl.!* <A HREF="http://dsl.gmx.de/?ac=OM.AD.PD003K1308T4569a">http://dsl.gmx.de/?ac=OM.AD.PD003K1308T4569a</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003812.html">[Mono-winforms-list] Porting application that calls windows andother DLLs
</A></li>
	<LI>Next message: <A HREF="003814.html">[Mono-winforms-list] Running a MWF app on solaris
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3813">[ date ]</a>
              <a href="thread.html#3813">[ thread ]</a>
              <a href="subject.html#3813">[ subject ]</a>
              <a href="author.html#3813">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-winforms-list">More information about the Mono-winforms-list
mailing list</a><br>
</body></html>
