<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] Quick Look support in MonoMac
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20Quick%20Look%20support%20in%20MonoMac&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003731.html">
   <LINK REL="Next"  HREF="003763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] Quick Look support in MonoMac</H1>
    <B>Frank Krueger</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20Quick%20Look%20support%20in%20MonoMac&In-Reply-To="
       TITLE="[Mono-osx] Quick Look support in MonoMac">fak at kruegersystems.com
       </A><BR>
    <I>Thu Jan 20 00:46:01 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003731.html">[Mono-osx] Patch upper case first letters in appkit.cs
</A></li>
        <LI>Next message: <A HREF="003763.html">[Mono-osx] Quick Look support in MonoMac
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3736">[ date ]</a>
              <a href="thread.html#3736">[ thread ]</a>
              <a href="subject.html#3736">[ subject ]</a>
              <a href="author.html#3736">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I am writing to inquire into the inclusion of QuickLook bundles into MonoMac
apps.

QuickLook bundles are little plugins loaded by the Quick Look daemon in OS X
to generate thumbnails and previews of documents. The are little Mach-O
executables that implement 4 functions. These functions are supposed to be
written in a re-entrant fashion since they will be used over and over on
possibly 1 thread. (This behavior can be prevented, but it would be best if
we support it.)

Thread safety:
<A HREF="http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Articles/QLImplementationOverview.html%23//apple_ref/doc/uid/TP40005020-CH6-SW1">http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Articles/QLImplementationOverview.html%23//apple_ref/doc/uid/TP40005020-CH6-SW1</A>

It would be a wonderful dream world if I could create an assembly that
contains a class that implements those 4 functions and have that packaged up
into a bundle and included in my MonoMac app.

Any thoughts on how much work it would be to create such a packager?

Below are some notes I gathered while looking into what exactly the
generator bundle is composed of.


Create Quick Look Plug-in
=========================
1. Xcode -&gt; New Project -&gt; System Plug-in -&gt; Quick Look Plug-in
2. Name it &quot;Alpha&quot;


Output
======

<A HREF="http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Articles/QLProjectConfig.html%23//apple_ref/doc/uid/TP40005020-CH5-SW7">http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Articles/QLProjectConfig.html%23//apple_ref/doc/uid/TP40005020-CH5-SW7</A>

Alpha.qlgenerator
Contents
Info.plist
MacOS
Alpha
Resources
English.lproj
InfoPlist.strings


Alpha
=====

Architectures:          Standard (32/64-bit Universal)
Base SDK:               Mac OS X 10.6
Valid Architectures:    i386 ppc ppc64 ppc7400 ppc970 x86_64

File Type: MH_BUNDLE
Flags: MH_NOUNDEFS | MH_DYLDLINK | MH_TWOLEVEL

Implements the following functions:

OSStatus GeneratePreviewForURL(void *thisInterface, QLPreviewRequestRef
preview, CFURLRef url, CFStringRef contentTypeUTI, CFDictionaryRef options)
{
    return noErr;
}

void CancelPreviewGeneration(void* thisInterface, QLPreviewRequestRef
preview)
{
}

OSStatus GenerateThumbnailForURL(void *thisInterface, QLThumbnailRequestRef
thumbnail, CFURLRef url, CFStringRef contentTypeUTI, CFDictionaryRef
options, CGSize maxSize)
{
    return noErr;
}

void CancelThumbnailGeneration(void* thisInterface, QLThumbnailRequestRef
thumbnail)
{
}


Installation
============

You can store a Quick Look generator in an application bundle (in
MyApp.app/Contents/Library/QuickLook/) or in one of the standard file-system
locations:

* ~/Library/QuickLook&#8212;third party generators, accessible only to logged-in
user
* /Library/QuickLook&#8212;third party generators, accessible to all users of the
system
* /System/Library/QuickLook&#8212;Apple-provided generators, accessible to all
users of the system
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20110119/bcfafc8c/attachment.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20110119/bcfafc8c/attachment.html</A> 
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003731.html">[Mono-osx] Patch upper case first letters in appkit.cs
</A></li>
	<LI>Next message: <A HREF="003763.html">[Mono-osx] Quick Look support in MonoMac
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3736">[ date ]</a>
              <a href="thread.html#3736">[ thread ]</a>
              <a href="subject.html#3736">[ subject ]</a>
              <a href="author.html#3736">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
