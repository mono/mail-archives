<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] [MonoMac] patch for MM-addin, Existing Framework
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20patch%20for%20MM-addin%2C%20Existing%20Framework&In-Reply-To=AANLkTike-uLRBXU%3DVybcJNcKyU9q-smZ-w4qSuFo59Gc%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003796.html">
   <LINK REL="Next"  HREF="003789.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] [MonoMac] patch for MM-addin, Existing Framework</H1>
    <B>Michael Hutchinson</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20patch%20for%20MM-addin%2C%20Existing%20Framework&In-Reply-To=AANLkTike-uLRBXU%3DVybcJNcKyU9q-smZ-w4qSuFo59Gc%40mail.gmail.com"
       TITLE="[Mono-osx] [MonoMac] patch for MM-addin, Existing Framework">m.j.hutchinson at gmail.com
       </A><BR>
    <I>Thu Jan 27 15:58:12 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003796.html">[Mono-osx] [MonoMac] patch for MM-addin, Existing Framework
</A></li>
        <LI>Next message: <A HREF="003789.html">[Mono-osx] [MonoMac] patch for MM-addin, Existing Framework
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3797">[ date ]</a>
              <a href="thread.html#3797">[ thread ]</a>
              <a href="subject.html#3797">[ subject ]</a>
              <a href="author.html#3797">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jan 27, 2011 at 9:12 AM, Duane Wandless &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">duane at wandless.net</A>&gt; wrote:
&gt;<i> Throwing may be better if the framework is missing. &#160;I can be convinced.
</I>&gt;<i> No symlinking for now.
</I>&gt;<i> The &quot;relative path&quot; option is only while developing and has no impact when
</I>&gt;<i> running. &#160;Once installed into Contents\Frameworks the reference is always
</I>&gt;<i> relative to the app location.
</I>
Not sure what you mean by this, what is the &quot;relative path option&quot;?

&gt;<i> Incorporated most of your suggestions, out of time now have to get back to
</I>&gt;<i> the day job. &#160;Also added the ability for the project pad to update as
</I>&gt;<i> frameworks are added/deleted. &#160;This is the same basic method Web References
</I>&gt;<i> uses.
</I>&gt;<i> Did not move the generation of the file to OnBuild. &#160;But it is better about
</I>&gt;<i> not requiring a build every time.
</I>
I think there's a misunderstanding here. I didn't mean you should move
to to MonoMacProject.OnBuild. It's already *in*
MonoMacBuildExtension.OnBuild. I meant it should move to the point in
MonoMacBuildExtension.OnBuild before base.OnBuild, since base.OnBuild
is where the compilation happens.

The BuildExtension chain concept isn't obvious and isn't really
documented. Basically, MD creates a set of all the BuildExtensions
that are valid for the current project, ordered by their position in
the addin tree, and creates a &quot;chain&quot; - the base implementation of
each virtual method in the BuildExtension calls the next class in the
chain. Somewhere way down in the chain past the MonoMacBuildExtension,
there's a BuildExtension subclass where OnBuild actually does the
compilation. So code in MonoMacBuildExtension.OnBuild that's before
the base.OnBuild call is run before the compile, and code after the
base.OnBuild call is run after the compile. Does that make sense?

&gt;<i> The generated path in the dlopen call is almost correct. &#160;Currently it is
</I>&gt;<i> the FULL path to the &lt;proj&gt;.app\Contents\Frameworks location. &#160;Which is
</I>&gt;<i> incorrect. &#160;The call to dlopen should be relative to the .app's location.
</I>&gt;<i> Including the new files.
</I>&gt;<i> Even though I disagree in part to the overuse of var I did modify this code
</I>&gt;<i> to use it more.
</I>&gt;<i> I disagree with using var when the type is known. &#160;To me that is exactly
</I>&gt;<i> when you should not use var and diminishes one of C#'s benefits, strong name
</I>&gt;<i> typing. &#160;At least from readability.
</I>&gt;<i> I agree with this summary from&#160;<A HREF="http://www.infoq.com/news/2008/05/CSharp-var:">http://www.infoq.com/news/2008/05/CSharp-var:</A>
</I>&gt;<i>
</I>&gt;<i> Overuse of var can make source code less readable for others. It is
</I>&gt;<i> recommended to use var only when it is necessary, that is, when the variable
</I>&gt;<i> will be used to store an anonymous type or a collection of anonymous types.
</I>&gt;<i>
</I>&gt;<i> For example this line is completely vague:
</I>&gt;<i> var ls = conf.LaunchScript;
</I>&gt;<i> I do not know what ls is. &#160;What is a LaunchScript, oh if I hover over it I
</I>&gt;<i> see it is a FilePath. &#160;To be me that would much more readable and useful as:
</I>&gt;<i> FilePath ls = conf.LaunchScript;
</I>&gt;<i> That makes the code clear just from a glance. &#160;Otherwise I have to research
</I>&gt;<i> to determine the type. &#160;Maybe if you limit the use to var foo = new Foo ().
</I>&gt;<i> &#160;But not everywhere especially when the assignment is vague.
</I>
I definitely agree in principle, that's why I said &quot;when the type is
obvious from the assignment&quot;. When it is obvious, var makes the code
more readable :)

Though as you noticed above, I sometimes get lazy when type is obvious to me...

- Michael

-- 
Michael Hutchinson
<A HREF="http://mjhutchinson.com">http://mjhutchinson.com</A>
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003796.html">[Mono-osx] [MonoMac] patch for MM-addin, Existing Framework
</A></li>
	<LI>Next message: <A HREF="003789.html">[Mono-osx] [MonoMac] patch for MM-addin, Existing Framework
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3797">[ date ]</a>
              <a href="thread.html#3797">[ thread ]</a>
              <a href="subject.html#3797">[ subject ]</a>
              <a href="author.html#3797">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
