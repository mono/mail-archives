<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] [MonoMac] MM Add-in templates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20MM%20Add-in%20templates&In-Reply-To=AANLkTi%3D%2BLsV7k0xnaF1qOVsAhtxnKWJXTwR%2BQO9doRnr%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003885.html">
   <LINK REL="Next"  HREF="003903.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] [MonoMac] MM Add-in templates</H1>
    <B>kjpou</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20MM%20Add-in%20templates&In-Reply-To=AANLkTi%3D%2BLsV7k0xnaF1qOVsAhtxnKWJXTwR%2BQO9doRnr%40mail.gmail.com"
       TITLE="[Mono-osx] [MonoMac] MM Add-in templates">kjpou at pt.lu
       </A><BR>
    <I>Sat Jan 29 02:48:08 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003885.html">[Mono-osx] [MonoMac] MM Add-in templates
</A></li>
        <LI>Next message: <A HREF="003903.html">[Mono-osx] [MonoMac] MM Add-in templates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3892">[ date ]</a>
              <a href="thread.html#3892">[ thread ]</a>
              <a href="subject.html#3892">[ subject ]</a>
              <a href="author.html#3892">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael

See below the responses.

On 1/28/11 8:03 PM, Michael Hutchinson wrote:
&gt;<i> I see, so you are defining the class in the nib file, not just using
</I>&gt;<i> it. There are two problems with this:
</I>&gt;<i> * you cannot use your custom view in more than one nib file, since the
</I>&gt;<i> register will be generated in both vases.
</I>&gt;<i> * the C# namespace of the nib's designer class and the the custom view
</I>&gt;<i> will have to match.
</I>&gt;<i> * the class is partial across two locations with no intuitive relationship.
</I>Yes that is correct.  Also for my short samples it was a lot easier to 
do it that way.

&gt;<i> The &quot;correct&quot; solution to this is nonpartial class with register
</I>&gt;<i> attribute, but in order to work completely smoothly it would
</I>&gt;<i> necessitate two nontrivial features:
</I>&gt;<i> * have MD synch classes defined in C# code into the nib files.
</I>This would be more Apple'ish for people coming over to MM from Obj-c.  I 
personally do not see a problem with the way it is implemented now.  
Actually I kind of like it.  It is not as automated as XCode but I 
personally feel more in control.  The only thing I see is the namespace 
problem.  I have not done a large project yet with MM so am limited here.

&gt;<i> * have the MD code generator use the project type database to resolve
</I>&gt;<i> obj-c types to types registered in C# in the project and libraries,
</I>&gt;<i> not just MonoMac.dll (I have some proof of concept code for this if
</I>&gt;<i> anyone else want to take it on).
</I>&gt;<i>
</I>That could be as well.

The problem I see with it is that once you start adding outlets and 
actions on a custom NSView from IB they automatically get registered in 
the designer.  For example a custom NSView called MyBackView  I did not 
define the MyBackView as a subclass of NSView in the Nib file just 
changed the type to be MyBackView.  The following is what is generated 
in the designer class.

     // Should subclass MonoMac.Foundation.NSObject
     [MonoMac.Foundation.Register(&quot;MyBackView&quot;)]
     public partial class MyBackView {

         private global::MonoMac.AppKit.NSButton __mt_myButton;

         private global::MonoMac.AppKit.NSTextField __mt_myLabel;

         #pragma warning disable 0169
         [MonoMac.Foundation.Export(&quot;buttonAction:&quot;)]
         partial void buttonAction (MonoMac.AppKit.NSButton sender);

         [MonoMac.Foundation.Export(&quot;myButtonAction:&quot;)]
         partial void myButtonAction (MonoMac.AppKit.NSButton sender);

         [MonoMac.Foundation.Connect(&quot;myButton&quot;)]
         private global::MonoMac.AppKit.NSButton myButton {
             get {
                 this.__mt_myButton = 
((global::MonoMac.AppKit.NSButton)(this.GetNativeField(&quot;myButton&quot;)));
                 return this.__mt_myButton;
             }
             set {
                 this.__mt_myButton = value;
                 this.SetNativeField(&quot;myButton&quot;, value);
             }
         }

         [MonoMac.Foundation.Connect(&quot;myLabel&quot;)]
         private global::MonoMac.AppKit.NSTextField myLabel {
             get {
                 this.__mt_myLabel = 
((global::MonoMac.AppKit.NSTextField)(this.GetNativeField(&quot;myLabel&quot;)));
                 return this.__mt_myLabel;
             }
             set {
                 this.__mt_myLabel = value;
                 this.SetNativeField(&quot;myLabel&quot;, value);
             }
         }
     }

When you say non trivial in my opinion it is going to take a rethink of 
the whole process.  I do not know how it is all glued together so am not 
able to see the whole picture.

When we start going outside of IB we are going to have to start doing 
all of this in code by hand.

An option could be have two different templates.  One for use cases such 
as this and another for when you want to create a non partial class to 
be used programatically.  Would that be confusing for developers?  Maybe 
maybe not.

Kenneth
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003885.html">[Mono-osx] [MonoMac] MM Add-in templates
</A></li>
	<LI>Next message: <A HREF="003903.html">[Mono-osx] [MonoMac] MM Add-in templates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3892">[ date ]</a>
              <a href="thread.html#3892">[ thread ]</a>
              <a href="subject.html#3892">[ subject ]</a>
              <a href="author.html#3892">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
