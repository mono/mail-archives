<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] IOKit Enumeration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20IOKit%20Enumeration&In-Reply-To=4803F4EB.7070405%406bit.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001312.html">
   <LINK REL="Next"  HREF="001315.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] IOKit Enumeration</H1>
    <B>Geoff Norton</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20IOKit%20Enumeration&In-Reply-To=4803F4EB.7070405%406bit.com"
       TITLE="[Mono-osx] IOKit Enumeration">gnorton at novell.com
       </A><BR>
    <I>Mon Apr 14 23:21:33 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001312.html">[Mono-osx] IOKit Enumeration
</A></li>
        <LI>Next message: <A HREF="001315.html">[Mono-osx] IOKit Enumeration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1313">[ date ]</a>
              <a href="thread.html#1313">[ thread ]</a>
              <a href="subject.html#1313">[ subject ]</a>
              <a href="author.html#1313">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Josh,

On 14-Apr-08, at 8:20 PM, Joshua Perry wrote:

&gt;<i> Hey guys,
</I>&gt;<i>
</I>&gt;<i> I haven't had much time to work on this the last few months, but this
</I>&gt;<i> weekend I was finally able to enumerate RS232 ports using P/Invoke to
</I>&gt;<i> IOKit/CoreFoundation.  This would work for enumerating any items in  
</I>&gt;<i> the
</I>&gt;<i> IOKit database but I want to add support for
</I>&gt;<i> System.IO.Ports.SerialPort.GetPortNames() to Mono for OSX.  This works
</I>&gt;<i> quite well with any FTDI type chips that provide a virtual com-port  
</I>&gt;<i> for
</I>&gt;<i> communication, which is a common method of USB enabling devices.
</I>&gt;<i>
</I>
Great.

&gt;<i> I do a lot of embedded development and talking to our hardware is
</I>&gt;<i> important, and in future products we would like to ship software for  
</I>&gt;<i> OSX
</I>&gt;<i> on Mono.
</I>&gt;<i>
</I>
What do you guys make (for my personal curiousity) ?

&gt;<i> So before I start integrating this code into my local checkout, I  
</I>&gt;<i> wanted
</I>&gt;<i> to ask what the best method is for adding this to the Mono  
</I>&gt;<i> codebase.  Is
</I>&gt;<i> there a define for managed code on OSX builds?  I've noticed that a  
</I>&gt;<i> lot
</I>&gt;<i> of places a runtime check is used against  
</I>&gt;<i> Environment.OSVersion.Platform
</I>&gt;<i> to decide which logic to execute, is this the preferred method in
</I>&gt;<i> managed code as opposed to conditional compilation?
</I>&gt;<i>
</I>
There is a check you can lift in XplatUI.cs from Managed.Windows.Forms.

&gt;<i> Also, I have made some base classes that I use to manage reference
</I>&gt;<i> counting and to make the P/Invoke to CoreFoundation objects and IOKit
</I>&gt;<i> objects easier (e.g. CFString, CFMutableDictionary, IOObject).  Is  
</I>&gt;<i> there
</I>&gt;<i> an OSX helper library similar to PosixHelper that this code would go  
</I>&gt;<i> in?
</I>&gt;<i>
</I>
Generally we'd push stuff like that down into unmanaged code, I'm  
pretty sure the existing serial implementation has some unmanaged code  
so cleaning up the interface to be generic icalls and then  
implementing platform specific stuff in io-layer is (probably)  
better.  Note I havn't looked at the code yet, so this may not hold  
true.

-g

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001312.html">[Mono-osx] IOKit Enumeration
</A></li>
	<LI>Next message: <A HREF="001315.html">[Mono-osx] IOKit Enumeration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1313">[ date ]</a>
              <a href="thread.html#1313">[ thread ]</a>
              <a href="subject.html#1313">[ subject ]</a>
              <a href="author.html#1313">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
