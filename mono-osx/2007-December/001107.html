<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] OSX vs Linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20OSX%20vs%20Linux&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001106.html">
   <LINK REL="Next"  HREF="001108.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] OSX vs Linux</H1>
    <B>Gavin Landon</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20OSX%20vs%20Linux&In-Reply-To="
       TITLE="[Mono-osx] OSX vs Linux">Gavin.Landon at ignitetech.com
       </A><BR>
    <I>Tue Dec 18 12:54:35 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001106.html">[Mono-osx] OSX vs Linux
</A></li>
        <LI>Next message: <A HREF="001108.html">[Mono-osx] Cocoa#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1107">[ date ]</a>
              <a href="thread.html#1107">[ thread ]</a>
              <a href="subject.html#1107">[ subject ]</a>
              <a href="author.html#1107">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the help..  This is what I came out with that works out side
of the WaitForExit, which doesn't work on OSX or Linux, but I'll
continue to work on that..   

-----------------------
using System.Runtime.InteropServices;	//mono referenced
using Mono.Unix;

static public void RunIt(string sFile, string sParm, bool bWaitForExit)
{
	//works with URL's, Executables, and File Associations for all
three platforms.

	bool bUseShellExecute = true;
	try
	{
		string os = OSInfo.DetectOS();
		
		if(os==&quot;OSX&quot;)
		{
			sParm = &quot;-t &quot; + sFile;
			sFile = &quot;open&quot;;
			bUseShellExecute = false;
		}
		
		if(os==&quot;Linux&quot;)
		{
			sParm = sFile;
			sFile = &quot;xdg-open&quot;;
			bUseShellExecute = false;
		}

		Process proc = new Process();
		proc.StartInfo.FileName = sFile;
		proc.StartInfo.Arguments = sParm;
		proc.StartInfo.UseShellExecute = bUseShellExecute;
		proc.StartInfo.RedirectStandardOutput = false;
		proc.Start();
		
		if(bWaitForExit)
			proc.WaitForExit();
		
	} catch (Exception ec) {
		Common.LogError(&quot;Error, \&quot;&quot; + ec.Message.ToString() +
&quot;\&quot; while running &quot; + sFile + &quot;.\n\n&quot;+ec.ToString());
	}
}

[DllImport (&quot;libc&quot;)]
static extern int uname (IntPtr buf);

static public string DetectOS ()
{
	string style;
	if (!IsUnix) {
		return &quot;Windows&quot;;
	}

	IntPtr buf = UnixMarshal.AllocHeap(8192);
	if (uname (buf) != 0){
		return &quot;Warning: Unable to detect OS&quot;;
	}
	string os = Marshal.PtrToStringAnsi (buf);
	if (os == &quot;Darwin&quot;)
		style = &quot;OSX&quot;;
	else
		style = os;

	UnixMarshal.FreeHeap(buf);
	
	return style;
}

static bool IsUnix {
	get {
		int p = (int) Environment.OSVersion.Platform;
		return ((p == 4) || (p == 128));
	}
}
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001106.html">[Mono-osx] OSX vs Linux
</A></li>
	<LI>Next message: <A HREF="001108.html">[Mono-osx] Cocoa#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1107">[ date ]</a>
              <a href="thread.html#1107">[ thread ]</a>
              <a href="subject.html#1107">[ subject ]</a>
              <a href="author.html#1107">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
