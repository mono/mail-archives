<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] Getting Mono to work with Apache in Mac OS X Leopard
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20Getting%20Mono%20to%20work%20with%20Apache%20in%20Mac%20OS%20X%20Leopard&In-Reply-To=C9F9D4B9-7220-47AC-94A4-F266EF74B591%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002427.html">
   <LINK REL="Next"  HREF="002432.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] Getting Mono to work with Apache in Mac OS X Leopard</H1>
    <B>Asle Benoni</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20Getting%20Mono%20to%20work%20with%20Apache%20in%20Mac%20OS%20X%20Leopard&In-Reply-To=C9F9D4B9-7220-47AC-94A4-F266EF74B591%40gmail.com"
       TITLE="[Mono-osx] Getting Mono to work with Apache in Mac OS X Leopard">asle.benoni at gmail.com
       </A><BR>
    <I>Fri Aug 14 13:45:21 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002427.html">[Mono-osx] Getting Mono to work with Apache in Mac OS X Leopard
</A></li>
        <LI>Next message: <A HREF="002432.html">[Mono-osx] (DESPERATE!!) Getting Mono to work with Apache in Mac OS	X Leopard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2428">[ date ]</a>
              <a href="thread.html#2428">[ thread ]</a>
              <a href="subject.html#2428">[ subject ]</a>
              <a href="author.html#2428">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
I think I progressed much here. I was able to uninstall old packages  
so that I could be X64 packages. First of all I think the clue was to  
get uninstall and install libtool and glib2. What a mess it was, I  
don' even remember now all I did.


Anyway I downloaded mod_mono source and did the configure stuff but it  
fails on make  with this error. I am not sure how to fix it:

at the end of the ./configure ...........
..........
/libglib-2.0.dylib /opt/local/lib/libintl.dylib /opt/local/lib/ 
libiconv.dylib  -m64
ld: in /opt/local/lib/libz.1.dylib, file is not of required architecture
collect2: ld returned 1 exit status
make[1]: *** [mod_mono.la] Error 1
make: *** [all-recursive] Error 1


So it says that dylib should be X_64 I guess and not i386 ?? How do I  
fix that?


/asle


Den 14. aug.. 2009 kl. 15.33 skrev Asle Benoni:

&gt;<i> Hello,
</I>&gt;<i> Thanks for a very clear installation instruction. I am trying to do  
</I>&gt;<i> this in the correct order. I already had installed Macports and  
</I>&gt;<i> tried to install glib and libtool.
</I>&gt;<i> I first got this message when trying to uninstall:
</I>&gt;<i>
</I>&gt;<i> Error: Target org.macports.activate returned: Image error: Another  
</I>&gt;<i> version of this port (glib2 @2.20.2_0) is already active.
</I>&gt;<i> Error: Status 1 encountered during processing.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> So I uninstalled:
</I>&gt;<i> sh-3.2# sudo port uninstall glib2 libtool
</I>&gt;<i> ---&gt;  The following versions of glib2 are currently installed:
</I>&gt;<i> ---&gt;  	glib2 @2.20.2_0 (active)
</I>&gt;<i> ---&gt;  	glib2 @2.20.4_0
</I>&gt;<i> Error: port uninstall failed: Registry error: Please specify the  
</I>&gt;<i> full version as recorded in the port registry.
</I>&gt;<i>
</I>&gt;<i> sh-3.2# sudo port uninstall glib2 @2.20.4_0  libtool
</I>&gt;<i> ---&gt;  Uninstalling glib2 @2.20.4_0
</I>&gt;<i> ---&gt;  Deactivating libtool @2.2.6a_0
</I>&gt;<i> ---&gt;  Uninstalling libtool @2.2.6a_0
</I>&gt;<i>
</I>&gt;<i> sh-3.2# port clean glib2
</I>&gt;<i>
</I>&gt;<i> But what am I doing wrong here since it fails now to install glib2  
</I>&gt;<i> and libtool:
</I>&gt;<i>
</I>&gt;<i> sh-3.2# sudo port install glib2 libtool
</I>&gt;<i> ---&gt;  Fetching glib2
</I>&gt;<i> ---&gt;  Verifying checksum(s) for glib2
</I>&gt;<i> ---&gt;  Extracting glib2
</I>&gt;<i> ---&gt;  Applying patches to glib2
</I>&gt;<i> ---&gt;  Configuring glib2
</I>&gt;<i> ---&gt;  Configuring glib2 for architecture i386
</I>&gt;<i> ---&gt;  Configuring glib2 for architecture x86_64
</I>&gt;<i> Error: Target org.macports.configure returned: configure failure:  
</I>&gt;<i> shell command &quot; cd &quot;/opt/local/var/macports/build/ 
</I>&gt;<i> _opt_local_var_macports_sources_rsync 
</I>&gt;<i> .macports.org_release_ports_devel_glib2/work/glib-2.20.4-x86_64&quot;  
</I>&gt;<i> &amp;&amp; ./configure --prefix=/opt/local --enable-static --disable- 
</I>&gt;<i> dependency-tracking  &quot; returned error 1
</I>&gt;<i> Command output: checking dependency style of /usr/bin/gcc-4.0...  
</I>&gt;<i> (cached) none
</I>&gt;<i> checking how to run the C preprocessor... /usr/bin/cpp-4.0
</I>&gt;<i> checking for c++... /usr/bin/g++-4.0
</I>&gt;<i> checking whether we are using the GNU C++ compiler... yes
</I>&gt;<i> checking whether /usr/bin/g++-4.0 accepts -g... yes
</I>&gt;<i> checking dependency style of /usr/bin/g++-4.0... none
</I>&gt;<i> checking for gcc... (cached) /usr/bin/gcc-4.0
</I>&gt;<i> checking whether we are using the GNU C compiler... (cached) yes
</I>&gt;<i> checking whether /usr/bin/gcc-4.0 accepts -g... (cached) yes
</I>&gt;<i> checking for /usr/bin/gcc-4.0 option to accept ISO C89... (cached)  
</I>&gt;<i> none needed
</I>&gt;<i> checking dependency style of /usr/bin/gcc-4.0... (cached) none
</I>&gt;<i> checking whether /usr/bin/gcc-4.0 and cc understand -c and -o  
</I>&gt;<i> together... yes
</I>&gt;<i> checking for a BSD-compatible install... /usr/bin/install -c
</I>&gt;<i> checking for special C compiler options needed for large files... no
</I>&gt;<i> checking for _FILE_OFFSET_BITS value needed for large files... no
</I>&gt;<i> checking for pkg-config... /opt/local/bin/pkg-config
</I>&gt;<i> checking for gawk... (cached) gawk
</I>&gt;<i> checking for perl5... /opt/local/bin/perl
</I>&gt;<i> checking for indent... indent
</I>&gt;<i> checking for /opt/local/bin/perl... /opt/local/bin/perl
</I>&gt;<i> checking for a Python interpreter with version &gt;= 2.4... python
</I>&gt;<i> checking for python... /opt/local/bin/python
</I>&gt;<i> checking for python version... 2.6
</I>&gt;<i> checking for python platform... darwin
</I>&gt;<i> checking for python script directory... ${prefix}/lib/python2.6/site- 
</I>&gt;<i> packages
</I>&gt;<i> checking for python extension module directory... ${exec_prefix}/lib/ 
</I>&gt;<i> python2.6/site-packages
</I>&gt;<i> checking for iconv_open... no
</I>&gt;<i> checking for libiconv_open in -liconv... no
</I>&gt;<i> checking for iconv_open in -liconv... no
</I>&gt;<i> configure: error: *** No iconv() implementation found in C library  
</I>&gt;<i> or libiconv
</I>&gt;<i>
</I>&gt;<i> Error: Status 1 encountered during processing.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Glad for any help!
</I>&gt;<i>
</I>&gt;<i> /asle
</I>&gt;<i>
</I>&gt;<i> Den 24. juli. 2009 kl. 17.02 skrev eto:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've been using mod_mono sweetness on OSX using the built-in apache  
</I>&gt;&gt;<i> server
</I>&gt;&gt;<i> for over a year now.  I really wish they'd just compile mod_mono  
</I>&gt;&gt;<i> with the
</I>&gt;&gt;<i> osx binaries..  I've tried to get fastcgi working to no avail..  
</I>&gt;&gt;<i> though I
</I>&gt;&gt;<i> hear that fastcgi doesn't work well on apache even on linux.. *shrug*
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There's many issues getting a mod_mono running with the built-in os  
</I>&gt;&gt;<i> x apache
</I>&gt;&gt;<i> server in leopard.  First, leopard has 64-bit apache where the mono  
</I>&gt;&gt;<i> binaries
</I>&gt;&gt;<i> are 32-bit.  Second, is that the latest mod_mono now requires glib,  
</I>&gt;&gt;<i> where it
</I>&gt;&gt;<i> did not before (My working copy of mod_mono was woefully out of  
</I>&gt;&gt;<i> date but I
</I>&gt;&gt;<i> was happy).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Anyway, after much trials and tribulations, I've been able to build &amp;
</I>&gt;&gt;<i> install the latest mod_mono and use the packaged 2.4.2.2  
</I>&gt;&gt;<i> mono .dmg's (for
</I>&gt;&gt;<i> easy upgrades) using these steps:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1) Ensure you have the standard mono os x binaries installed (I am  
</I>&gt;&gt;<i> currently
</I>&gt;&gt;<i> using 2.4.2.2)
</I>&gt;&gt;<i> 1) Install MacPorts
</I>&gt;&gt;<i> 2) Edit /opt/local/etc/macports/macports.conf and add (or change)  
</I>&gt;&gt;<i> this line
</I>&gt;&gt;<i> to:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> universal_archs i386 x86_64
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Note: If you already have macports installed without this, you'll  
</I>&gt;&gt;<i> have to
</I>&gt;&gt;<i> re-install all related ports.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 3) Edit /opt/local/etc/macports/variants.conf and add:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> +universal
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2) Install glib2 and libtool in MacPorts:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> sudo port install glib2 libtool
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 4) download (latest) mod_mono source or check out from svn
</I>&gt;&gt;<i> 5) modify src/mod_mono.c and comment out this line (if it exists)  
</I>&gt;&gt;<i> as it
</I>&gt;&gt;<i> borks on leopard:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> // sigaddset (&amp;sigset, SIGPWR);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 6) Then time to build &amp; install mod_mono:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> PKG_CONFIG_PATH=&quot;/opt/local/lib/pkgconfig&quot; CFLAGS=&quot;-m64&quot; ./configure
</I>&gt;&gt;<i> --prefix=/Library/Frameworks/Mono.framework/Versions/Current
</I>&gt;&gt;<i> make
</I>&gt;&gt;<i> sudo make install
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 7) add these lines to your /etc/apache2/httpd.conf:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Include /etc/apache2/mod_mono.conf
</I>&gt;&gt;<i> MonoServerPath
</I>&gt;&gt;<i> /Library/Frameworks/Mono.framework/Versions/Current/bin/mod-mono- 
</I>&gt;&gt;<i> server2
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> c'est voila!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> wharrell wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Okay, I'm not sure if mono is even capable of doing this or not  
</I>&gt;&gt;&gt;<i> but I'm
</I>&gt;&gt;&gt;<i> going to ask.  I've work with PHP for awhile and I'm spoiled.  OS  
</I>&gt;&gt;&gt;<i> X comes
</I>&gt;&gt;&gt;<i> with PHP pre-installed all you have to do is turn it on.  I need  
</I>&gt;&gt;&gt;<i> to learn
</I>&gt;&gt;&gt;<i> ASP.NET so I have to get this running now.  I've tried working  
</I>&gt;&gt;&gt;<i> with these
</I>&gt;&gt;&gt;<i> instructions,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="http://mono-project.com/Mod_mono">http://mono-project.com/Mod_mono</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> but after download packages and trying to configure each of them  
</I>&gt;&gt;&gt;<i> they
</I>&gt;&gt;&gt;<i> always say I'm missing a variety of different things and it  
</I>&gt;&gt;&gt;<i> seemingly is
</I>&gt;&gt;&gt;<i> just spinning in circles.  SO, HELP!!!!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If anyone can provide me with a step-by-step instructional to  
</I>&gt;&gt;&gt;<i> install and
</I>&gt;&gt;&gt;<i> run mono on my mac so that I can begin testing my .aspx pages I  
</I>&gt;&gt;&gt;<i> would much
</I>&gt;&gt;&gt;<i> appreciate it.
</I>&gt;&gt;&gt;<i> Thanks
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> View this message in context: <A HREF="http://www.nabble.com/Getting-Mono-to-work-with-Apache-in-Mac-OS-X-Leopard-tp24629121p24646201.html">http://www.nabble.com/Getting-Mono-to-work-with-Apache-in-Mac-OS-X-Leopard-tp24629121p24646201.html</A>
</I>&gt;&gt;<i> Sent from the Mono - OSX mailing list archive at Nabble.com.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-osx mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">Mono-osx at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">http://lists.ximian.com/mailman/listinfo/mono-osx</A>
</I>&gt;<i>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20090814/07534e78/attachment-0001.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20090814/07534e78/attachment-0001.html</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002427.html">[Mono-osx] Getting Mono to work with Apache in Mac OS X Leopard
</A></li>
	<LI>Next message: <A HREF="002432.html">[Mono-osx] (DESPERATE!!) Getting Mono to work with Apache in Mac OS	X Leopard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2428">[ date ]</a>
              <a href="thread.html#2428">[ thread ]</a>
              <a href="subject.html#2428">[ subject ]</a>
              <a href="author.html#2428">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
