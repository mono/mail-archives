<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] NSPasteboardItemDataProvider
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=Re%3A%20%5BMono-osx%5D%20NSPasteboardItemDataProvider&In-Reply-To=%3CA3DE9D61-AF78-4C7B-A7A7-A575DD11F320%40elevenworks.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004707.html">
   <LINK REL="Next"  HREF="004709.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] NSPasteboardItemDataProvider</H1>
    <B>Jon Lipsky</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=Re%3A%20%5BMono-osx%5D%20NSPasteboardItemDataProvider&In-Reply-To=%3CA3DE9D61-AF78-4C7B-A7A7-A575DD11F320%40elevenworks.com%3E"
       TITLE="[Mono-osx] NSPasteboardItemDataProvider">jon.lipsky at elevenworks.com
       </A><BR>
    <I>Tue Jan 17 17:40:09 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="004707.html">[Mono-osx] Create window at runtime
</A></li>
        <LI>Next message: <A HREF="004709.html">[Mono-osx] Having a hard time bundling my app as a mac app due to &quot;System.MissingMethodException: Default constructor not found for type System.Configuration.ExeConfigurationHost&#8221;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4708">[ date ]</a>
              <a href="thread.html#4708">[ thread ]</a>
              <a href="subject.html#4708">[ subject ]</a>
              <a href="author.html#4708">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

Has anyone been able to successfully use NSPasteboardItemDataProvider within MonoMac?

Here is snippet that shows (a stripped down version) what I'm trying to do:

var item = new NSPasteboardItem();
var provider = new TDMMImageProvider();
item.SetDataProviderForTypes(provider,new string[] { &quot;public.png&quot; });


Here is what TDMMImageProvider looks like (stripped down):

public class TDMMImageProvider : NSPasteboardItemDataProvider
{
	public override void ProvideDataForType (NSPasteboard pasteboard, NSPasteboardItem item, string type)
	{
		System.Console.WriteLine(&quot;TDMMImageProvider.ProvideDataForType(pasteboard:{0}, item:{1}, type:{2})&quot;, pasteboard, item, type);
	}	
		
	public override void FinishedWithDataProvider (NSPasteboard pasteboard)
	{
		System.Console.WriteLine(&quot;TDMMImageProvider.FinishedWithDataProvider(pasteboard:{0})&quot;, pasteboard);
	}
}


When I execute the above, I see the following output in the console:
2012-01-17 09:25:17.077 TouchDrawForMac[14757:1007] Pasteboard item data provider &lt;Elevenworks.TouchDraw.Clipboard.TDMMImageProvider: 0x1e3b740&gt; must conform to NSPasteboardItemDataProviderProtocol


I have looked at the definition for &quot;NSPasteboardItemDataProvider&quot; in the MonoMac source code and it appears to be mapped correctly, so I'm not sure why I'm getting this message.  I've also tried changing the class above to extend from NSObject, and then added the [Export] annotations myself; however I got the same result.


Also, it appears to me that the &quot;NSPasteboard.WriteObjects&quot; method should be accepting arguments of type &quot;NSObject[]&quot; instead of &quot;NSPasteboardReading[]&quot; so that you can send it instances of &quot;NSPasteboardItem&quot; (which implement the NSPasteboardReading and NSPasteboardWriting protocol in the underlying obj-c classes.)

In the meantime, I'm working around this by using a &quot;Messaging.void_objc_msgSend_intptr&quot; call; however it appears to me this method signature should be changed/updated.

Thanks for any insight anyone can give.

Best Regards,
Jon...




</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004707.html">[Mono-osx] Create window at runtime
</A></li>
	<LI>Next message: <A HREF="004709.html">[Mono-osx] Having a hard time bundling my app as a mac app due to &quot;System.MissingMethodException: Default constructor not found for type System.Configuration.ExeConfigurationHost&#8221;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4708">[ date ]</a>
              <a href="thread.html#4708">[ thread ]</a>
              <a href="subject.html#4708">[ subject ]</a>
              <a href="author.html#4708">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
