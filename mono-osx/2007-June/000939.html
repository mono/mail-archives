<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] mono_parse_config not working?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20mono_parse_config%20not%20working%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000938.html">
   <LINK REL="Next"  HREF="000940.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] mono_parse_config not working?</H1>
    <B>Pedro Gutierrez</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20mono_parse_config%20not%20working%3F&In-Reply-To="
       TITLE="[Mono-osx] mono_parse_config not working?">pgutierrez at etsii.upm.es
       </A><BR>
    <I>Tue Jun 26 21:08:02 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000938.html">[Mono-osx] Active Directory Infinite Loop
</A></li>
        <LI>Next message: <A HREF="000940.html">[Mono-osx] Fwd:  mono_parse_config not working?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#939">[ date ]</a>
              <a href="thread.html#939">[ thread ]</a>
              <a href="subject.html#939">[ subject ]</a>
              <a href="author.html#939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm trying to embed mono but mono_parse_config is not working as  
expected. According to the mono docs I should do the following:

mono_assembly_setrootdir (libPath);
mono_set_config_dir (etcPath); //
mono_config_parse (NULL);

Before calling mono_jit_init. libPath and etcPath point to:
/Library/Frameworks/Mono.framework/Versions/1.2.4/lib
/Library/Frameworks/Mono.framework/Versions/1.2.4/etc
respectively.

the above code FAILS on the third line with the following output:
** ERROR **: file loader.c: line 1809 (mono_loader_lock): assertion  
failed: (ret == 0)
aborting...

If I provide a filename (mono_config_parse (&quot;config&quot;);) it will run  
BUT the config file will not be loaded, and msvcrt will not be  
redirected to libc.dylib. Is there any way to find out if the config  
file is being processed? It doesn't matter which filename I use, the  
mono_config_parser will not fail unless I give it a NULL.

I'm working with mono 1.2.4 on a MacBook Pro CD.

Any ideas? Is this a bug or am I doing something wrong? Any known  
workarounds?

Regards,

Pedro

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20070627/f188f23b/attachment.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20070627/f188f23b/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000938.html">[Mono-osx] Active Directory Infinite Loop
</A></li>
	<LI>Next message: <A HREF="000940.html">[Mono-osx] Fwd:  mono_parse_config not working?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#939">[ date ]</a>
              <a href="thread.html#939">[ thread ]</a>
              <a href="subject.html#939">[ subject ]</a>
              <a href="author.html#939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
