<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] Official Mono 3.2.4 release on OS X is able to run invalid PE images oO
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=Re%3A%20%5BMono-osx%5D%20Official%20Mono%203.2.4%20release%20on%20OS%20X%20is%20able%20to%20run%0A%20invalid%20PE%20images%20oO&In-Reply-To=%3C1387738508513-4661606.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005263.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] Official Mono 3.2.4 release on OS X is able to run invalid PE images oO</H1>
    <B>Asido</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=Re%3A%20%5BMono-osx%5D%20Official%20Mono%203.2.4%20release%20on%20OS%20X%20is%20able%20to%20run%0A%20invalid%20PE%20images%20oO&In-Reply-To=%3C1387738508513-4661606.post%40n4.nabble.com%3E"
       TITLE="[Mono-osx] Official Mono 3.2.4 release on OS X is able to run invalid PE images oO">asido4 at gmail.com
       </A><BR>
    <I>Sun Dec 22 18:55:08 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="005263.html">[Mono-osx] How to uninstall MonoFramework-2.6.7 ?
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5265">[ date ]</a>
              <a href="thread.html#5265">[ thread ]</a>
              <a href="subject.html#5265">[ subject ]</a>
              <a href="author.html#5265">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a PE image with data like in the image bellow. By looking at it I
recognize patterns of normal PE image - ME is almoast MZ and the bytes at
0x90 could be &quot;This program cannot be run in DOS mode&quot; stuff, which could be
encoded in some way. In the middle of the file I can recognize proper .NET
assembly metatable information - &quot;BSJB&quot; following correct #~, #Strings, #US,
#GUID, #Blob data.

Windows PE loader doesn't run the file. Both official Mono 3.2.4 release and
my attempt to build mono from sources just displays &quot;File does not contain a
valid CIL image&quot; message regardless if DISABLE_VERIFIER preprocessor is set
or not. And this is expected behavior since it just won't pass through this
line: <A HREF="https://github.com/mono/mono/blob/master/mono/metadata/image.c#L858">https://github.com/mono/mono/blob/master/mono/metadata/image.c#L858</A>

To my surprise installing official Mono 3.2.4 MRE release on OS X and
executing 'mono ./broken.exe' executes it without any issues. Can anyone
provide me insight on what is going on? Is this some special file format for
OS X? How Mono OS X builds are configured so that I could reproduce this
behavior with my own built Mono from sources?

&lt;<A HREF="http://mono.1490590.n4.nabble.com/file/n4661606/me.png">http://mono.1490590.n4.nabble.com/file/n4661606/me.png</A>&gt; 



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Official-Mono-3-2-4-release-on-OS-X-is-able-to-run-invalid-PE-images-oO-tp4661606.html">http://mono.1490590.n4.nabble.com/Official-Mono-3-2-4-release-on-OS-X-is-able-to-run-invalid-PE-images-oO-tp4661606.html</A>
Sent from the Mono - OSX mailing list archive at Nabble.com.
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005263.html">[Mono-osx] How to uninstall MonoFramework-2.6.7 ?
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5265">[ date ]</a>
              <a href="thread.html#5265">[ thread ]</a>
              <a href="subject.html#5265">[ subject ]</a>
              <a href="author.html#5265">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
