<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] MonoMac [Target]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20MonoMac%20%5BTarget%5D&In-Reply-To=o2ud57001c11004252054ofb23df8ape578840450fb2b7%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002872.html">
   <LINK REL="Next"  HREF="002876.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] MonoMac [Target]</H1>
    <B>Geoff Norton</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20MonoMac%20%5BTarget%5D&In-Reply-To=o2ud57001c11004252054ofb23df8ape578840450fb2b7%40mail.gmail.com"
       TITLE="[Mono-osx] MonoMac [Target]">gnorton at novell.com
       </A><BR>
    <I>Sun Apr 25 23:57:40 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002872.html">[Mono-osx] MonoMac [Target]
</A></li>
        <LI>Next message: <A HREF="002876.html">[Mono-osx] MonoMac [Target]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2873">[ date ]</a>
              <a href="thread.html#2873">[ thread ]</a>
              <a href="subject.html#2873">[ subject ]</a>
              <a href="author.html#2873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We need new generator support for extension methods to support this properly, however this has a few issues since categories are only applied at link time, so we'd need to ensure that the dependent native library is in the process space before applying the extension methods, or, ensure that we link the requisite library into the proc if the extensions are used.

Something to mull

-g

On 2010-04-25, at 11:54 PM, Duane Wandless wrote:

&gt;<i> I'm experimenting with how to generate various constructs from the header files.  Here is a common pattern:
</I>&gt;<i> 
</I>&gt;<i> Inside AppKit\NSTextAttachment.cs there is this:
</I>&gt;<i> @interface NSMutableAttributedString (NSMutableAttributedStringAttachmentConveniences)
</I>&gt;<i> - (void)updateAttachmentsFromPath:(NSString *)path;
</I>&gt;<i> @end
</I>&gt;<i> 
</I>&gt;<i> Which I tried to bind like this (ignoring making the C# method name better):
</I>&gt;<i>   //- (void)updateAttachmentsFromPath:(NSString *)path;
</I>&gt;<i>   [Export (&quot;updateAttachmentsFromPath:&quot;)]
</I>&gt;<i>   void UpdateAttachmentsFromPath ([Target] NSMutableAttributedString  obj, NSString path);
</I>&gt;<i> 
</I>&gt;<i> Which produced this:
</I>&gt;<i> [Export (&quot;updateAttachmentsFromPath:&quot;)]
</I>&gt;<i> public virtual void UpdateAttachmentsFromPath (NSMutableAttributedString obj, NSString path)
</I>&gt;<i> {
</I>&gt;<i>    if (obj == null)
</I>&gt;<i>       throw new ArgumentNullException (&quot;obj&quot;);
</I>&gt;<i>    if (path == null)
</I>&gt;<i>       throw new ArgumentNullException (&quot;path&quot;);
</I>&gt;<i>    if (IsDirectBinding) {
</I>&gt;<i>       MonoMac.ObjCRuntime.Messaging.void_objc_msgSend_IntPtr (obj.Handle, selUpdateAttachmentsFromPath, path.Handle);
</I>&gt;<i>    } else {
</I>&gt;<i>       MonoMac.ObjCRuntime.Messaging.void_objc_msgSendSuper_IntPtr (this.SuperHandle, sel  UpdateAttachmentsFromPath, path.Handle)
</I>&gt;<i> ;
</I>&gt;<i>    }
</I>&gt;<i> }                
</I>&gt;<i> 
</I>&gt;<i> (I do no think the generated code for when IsDirectBinding == false is correct.  But that is a side issue.)
</I>&gt;<i> 
</I>&gt;<i> Is this the correct binding?  I would of course have to call:
</I>&gt;<i> NSTextAttachment textAttachment;
</I>&gt;<i> textAttachment.UpdateAttachmentsFromPath(attributedStringObj, path);
</I>&gt;<i> 
</I>&gt;<i> Or would I rather call:
</I>&gt;<i> attributedStringObj.UpdateAttachmentsFromPath(path);
</I>&gt;<i> 
</I>&gt;<i> In my parser I have the ability of adding this method directly on NSMutableAttributedString, the 2nd example.  Another option would be to create an extension method to NSMutableAttributedString when parsing NSTextAttachment.  Maybe the generator should create:
</I>&gt;<i> 
</I>&gt;<i> public static class NSMutableAttributedStringAttachmentConveniences
</I>&gt;<i> {
</I>&gt;<i>    public static void UpdateAttachmentsFromPath(this NSMutableAttributedString obj, NSString path)
</I>&gt;<i>    { ...
</I>&gt;<i>    }
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> So I know how to modify the parser what is the preferred solution?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Duane
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-osx mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">Mono-osx at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">http://lists.ximian.com/mailman/listinfo/mono-osx</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20100425/2b62d2c7/attachment.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20100425/2b62d2c7/attachment.html</A> 
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002872.html">[Mono-osx] MonoMac [Target]
</A></li>
	<LI>Next message: <A HREF="002876.html">[Mono-osx] MonoMac [Target]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2873">[ date ]</a>
              <a href="thread.html#2873">[ thread ]</a>
              <a href="subject.html#2873">[ subject ]</a>
              <a href="author.html#2873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
