<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] DBNotificationCenter, my silly little idea
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20DBNotificationCenter%2C%20my%20silly%20little%20idea&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000799.html">
   <LINK REL="Next"  HREF="000801.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] DBNotificationCenter, my silly little idea</H1>
    <B>R. Tyler Ballance</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20DBNotificationCenter%2C%20my%20silly%20little%20idea&In-Reply-To="
       TITLE="[Mono-osx] DBNotificationCenter, my silly little idea">tyler at bleepconsulting.com
       </A><BR>
    <I>Wed Jan 24 14:04:00 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000799.html">[Mono-osx] leopard + dumbarton
</A></li>
        <LI>Next message: <A HREF="000801.html">[Mono-osx] DBNotificationCenter, my silly little idea
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#800">[ date ]</a>
              <a href="thread.html#800">[ thread ]</a>
              <a href="subject.html#800">[ subject ]</a>
              <a href="author.html#800">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Now that Allan has committed the static method and property support  
to the Dumbarton tree, I was wondering if you guys would give me some  
feedback on my notification bridge that I've been hacking up as to  
whether I should retrofit it to include it with Dumbarton.

I just whipped up the flowchart I've got sketched out in my legal pad  
here: <A HREF="http://www.bleepconsulting.com/files/DBNotificationCenter.pdf">http://www.bleepconsulting.com/files/DBNotificationCenter.pdf</A>


Basically the idea is this, C# classes generate DBNotification  
objects, and call DBNotificationCenter.Instance.PostNotification 
(notification);

PostNotification will properly serialize the object into a valid  
apple-plist (got this code fully working this morning) which  
DBNotificationCenter uses to write out to the socket it's writing to,  
and the Cocoa DBNotificationHandler reads from.

The Cocoa DBNotificationHandler then uses  
[NSPropertyListSerialization propertyListFromData:] to deserialize  
the data read from the unix socket, and essentially rearrange objects  
to appropriately fit into an NSNotification which would then be  
posted to the main thread of the application (contemplating adding a  
bool property in DBNotification (C#) to turn this on and off).

I'm not 100% done with it for my own project, but I think it would  
fit best in Dumbarton instead of sitting inside some of my own silly  
DLLs ;)


What do you guys think?


Cheers

p.s. I'm not bridging C# events because of (a) I don't like C#'s  
event model (b) I think event bridging would be substantially more  
complicated than basically serializing objects over a unix socket

R. Tyler Ballance: Custom Mac and Linux Development at bleep. consulting
contact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">tyler at bleepconsulting.com</A> | jabber: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">tyler at jabber.geekisp.com</A>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20070124/82721ade/attachment.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20070124/82721ade/attachment.html</A> 
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000799.html">[Mono-osx] leopard + dumbarton
</A></li>
	<LI>Next message: <A HREF="000801.html">[Mono-osx] DBNotificationCenter, my silly little idea
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#800">[ date ]</a>
              <a href="thread.html#800">[ thread ]</a>
              <a href="subject.html#800">[ subject ]</a>
              <a href="author.html#800">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
