<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] Monitoring external processes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20Monitoring%20external%20processes&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001611.html">
   <LINK REL="Next"  HREF="001613.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] Monitoring external processes</H1>
    <B>Andrew Coupe</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20Monitoring%20external%20processes&In-Reply-To="
       TITLE="[Mono-osx] Monitoring external processes">Andrew at eVirtualStudio.com
       </A><BR>
    <I>Wed Oct  1 07:51:41 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001611.html">[Mono-osx] Monitoring external processes
</A></li>
        <LI>Next message: <A HREF="001613.html">[Mono-osx] Not require Mono install for a DLL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1612">[ date ]</a>
              <a href="thread.html#1612">[ thread ]</a>
              <a href="subject.html#1612">[ subject ]</a>
              <a href="author.html#1612">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for responding.  I've tried using the Waitforexit but it makes no difference.  The code below works fine on Mono 2.0 or .NET on Windows.  It only fails on the Mac.  The runtime error, which occurs when the Process.start method executes is:

mono(333,0xa000ed88) malloc: ***  Deallocation of a pointer not malloced: 0x1a5898; This could be a double free(), or free() called with the middle of an allocated block; Try setting environment variable MallocHelp to see tools to help debug

The error is easy to reproduce. Any Process.Start command generates the error.  Once this error occurs Mono thinks the process has ended.

Thanks for any insight you have.

Regards
Andrew Coupe
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">andrew at eVirtualStudio.com</A>

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">pablosantosluac at terra.es</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">pablosantosluac at terra.es</A>] 
Sent: Wednesday, October 01, 2008 6:25 AM
To: Andrew Coupe
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">mono-osx at lists.ximian.com</A>
Subject: Re: [Mono-osx] Monitoring external processes

You have a WaitForExit() method, don't you??

Andrew Coupe escribi&#243;:
&gt;<i>
</I>&gt;<i> Hi all
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;<i> I need to detect when the user closes a process that my application 
</I>&gt;<i> launches.  The following code works fine under .NET and Mono 2.0 on 
</I>&gt;<i> Windows but does not work on the Mac OS.  On the mac, the process 
</I>&gt;<i> correctly starts the texeditor app.  The problem is that HasExited 
</I>&gt;<i> incorrectly returns true immediately even though the window has not 
</I>&gt;<i> been closed.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;<i> Dim Progname As String = 
</I>&gt;<i> Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory) 
</I>&gt;<i> + m_PATHDELIMITER + &quot;Myfile.txt&quot;
</I>&gt;<i>
</I>&gt;<i>         Dim DAWproc As New Process()
</I>&gt;<i>
</I>&gt;<i>             With DAWproc.StartInfo
</I>&gt;<i>
</I>&gt;<i>                 .FileName = Progname
</I>&gt;<i>
</I>&gt;<i>                 .Verb = &quot;Open&quot;
</I>&gt;<i>
</I>&gt;<i>                 .CreateNoWindow = True
</I>&gt;<i>
</I>&gt;<i>             End With
</I>&gt;<i>
</I>&gt;<i>             DAWproc.Start()
</I>&gt;<i>
</I>&gt;<i>             While Not DAWproc.HasExited
</I>&gt;<i>
</I>&gt;<i>             End While
</I>&gt;<i>
</I>&gt;<i>             MessageBox.Show(&quot;App Closed&quot;)
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;<i> I&#8217;ve already tried using GetProcessbyname but, according to other 
</I>&gt;<i> threads on this forum,  it appears that this function is not 
</I>&gt;<i> functioning correctly under Mono either.  Can anyone suggest how I can 
</I>&gt;<i> accomplish this seemingly simple task in a reliable way that works on 
</I>&gt;<i> both Mac and Windows?
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;<i> Thanks in advance.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-osx mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">Mono-osx at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">http://lists.ximian.com/mailman/listinfo/mono-osx</A>
</I>&gt;<i>   
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001611.html">[Mono-osx] Monitoring external processes
</A></li>
	<LI>Next message: <A HREF="001613.html">[Mono-osx] Not require Mono install for a DLL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1612">[ date ]</a>
              <a href="thread.html#1612">[ thread ]</a>
              <a href="subject.html#1612">[ subject ]</a>
              <a href="author.html#1612">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
