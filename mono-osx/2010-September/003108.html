<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] MonoMac.dll depends on System.Drawing.dll?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20MonoMac.dll%20depends%20on%20System.Drawing.dll%3F&In-Reply-To=D63E08F0-D35B-46D7-BD36-C369E76417B1%40by-rite.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003107.html">
   <LINK REL="Next"  HREF="003110.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] MonoMac.dll depends on System.Drawing.dll?</H1>
    <B>Inspired Mars</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20MonoMac.dll%20depends%20on%20System.Drawing.dll%3F&In-Reply-To=D63E08F0-D35B-46D7-BD36-C369E76417B1%40by-rite.net"
       TITLE="[Mono-osx] MonoMac.dll depends on System.Drawing.dll?">inspiredmars at gmail.com
       </A><BR>
    <I>Wed Sep  8 14:36:56 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003107.html">[Mono-osx]  Re: MonoMac.dll depends on System.Drawing.dll?
</A></li>
        <LI>Next message: <A HREF="003110.html">[Mono-osx] MonoMac.dll depends on System.Drawing.dll?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3108">[ date ]</a>
              <a href="thread.html#3108">[ thread ]</a>
              <a href="subject.html#3108">[ subject ]</a>
              <a href="author.html#3108">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think I haven't explained the issue well enough.

Namespace aliases will not fix this, as mentioned before.



Here is a picture:



MyApp

+ MonoMac.dll (reference)

   + System.Drawing.dll (reference)

     - System.Drawing.PointF

     - MonoMac.CoreGraphics.CGContext

       {

           AddLines(System.Drawing.PointF[]);

       }

     - System.Drawing.Graphics

      {

          void AddLines(System.Drawing.PointF[] points)

          {

             // This implementation is broken on MonoMac, since winforms is
not supported.

          }

      }

+ Types exposed by MyApp

  - System.Drawing.PointF

  - System.Drawing.Graphics

   {

      private CGContext CGContext {get; set;}

      void AddLines(System.Drawing.PointF[] points)

      {

          This.CGContext.AddLines(points);

      }

   }



Thus, our wrapper for Graphics.AddLines cannot use our definition of PointF
because

CGContext expects the definition inside System.Drawing.dll.

But our wrapper also cannot use the definition inside System.Drawing.dll
because

referencing that dll means we cannot have a wrapper by that name to begin
with,

since the dll defines exactly the same wrapper.



The solution here is to not have these useless types included by reference
into MonoMac,

and to follow what MonoTouch does and directly define Point, Size,
Rectangle, PointF, SizeF, RectangleF

in MonoMac.dll. Then, our app would use these definitions and the rest of
the System.Drawing wrappers

our app defines would work.



Net: This is a very simple fix to implement in MonoMac, and MonoTouch
already works this way.



Thanks


On Wed, Sep 8, 2010 at 11:22 AM, Lee V. Andrus &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">landrus2 at by-rite.net</A>&gt; wrote:

&gt;<i> Using directives can also be used to create aliases for specific types
</I>&gt;<i> without exposing the whole namespace.  Like this:
</I>&gt;<i>
</I>&gt;<i>  using PointF = System.Drawing.PointF;
</I>&gt;<i>
</I>&gt;<i> I'm sure it's a pain to put so much at the top of every file because
</I>&gt;<i> C# doesn't have #include or typedef.  But this can reduce the solution
</I>&gt;<i> to boilerplate.  You may even be able to incorporate it into your
</I>&gt;<i> standard header.
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20100908/0025c765/attachment.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20100908/0025c765/attachment.html</A> 
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003107.html">[Mono-osx]  Re: MonoMac.dll depends on System.Drawing.dll?
</A></li>
	<LI>Next message: <A HREF="003110.html">[Mono-osx] MonoMac.dll depends on System.Drawing.dll?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3108">[ date ]</a>
              <a href="thread.html#3108">[ thread ]</a>
              <a href="subject.html#3108">[ subject ]</a>
              <a href="author.html#3108">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
