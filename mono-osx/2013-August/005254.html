<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] IOException: Sharing violation on path
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=Re%3A%20%5BMono-osx%5D%20IOException%3A%20Sharing%20violation%20on%20path&In-Reply-To=%3CCA%2BQtKb1BCQp1Kk-Rr%2BNfdKXY3KHgvv8v5W-y59yTHdTZUkorFQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005256.html">
   <LINK REL="Next"  HREF="005257.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] IOException: Sharing violation on path</H1>
    <B>Phi Le</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=Re%3A%20%5BMono-osx%5D%20IOException%3A%20Sharing%20violation%20on%20path&In-Reply-To=%3CCA%2BQtKb1BCQp1Kk-Rr%2BNfdKXY3KHgvv8v5W-y59yTHdTZUkorFQ%40mail.gmail.com%3E"
       TITLE="[Mono-osx] IOException: Sharing violation on path">iamphi at gmail.com
       </A><BR>
    <I>Thu Aug 22 19:57:27 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="005256.html">[Mono-osx] ObjC library run from Mono always returns null
</A></li>
        <LI>Next message: <A HREF="005257.html">[Mono-osx] Stackoverflow Exception when i call Application.Exit()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5254">[ date ]</a>
              <a href="thread.html#5254">[ thread ]</a>
              <a href="subject.html#5254">[ subject ]</a>
              <a href="author.html#5254">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We have a .NET 4 application that uses mono 2.10.9 (packaged with the app)
on OSX.  We get the error &quot;Sharing violation on path...&quot; often, but haven't
been able to do anything about it.  We cannot reproduce the problem in
house, and we use our released product frequently on OSX.  This error does
not happen on Windows (this trace pattern).  We see this happening on 10.6,
10.7, and 10.8.  We are not aware of any file stream being leaked, not
closed.
Older version the application had this problem too. In the past, the
application has been packaged with mono 2.10.4 and 2.10.7.  The current
version uses mono 2.10.9 with sgen garbage collector.

Can we get information about this exception with respect to OSX, and
suggestions on how to reproduce and debug the issue?

Here are file of interest with respect to mono 2.10.7:
<A HREF="https://github.com/mono/mono/blob/2.10.7/mcs/class/corlib/System.IO/FileStream.cs#L196">https://github.com/mono/mono/blob/2.10.7/mcs/class/corlib/System.IO/FileStream.cs#L196</A>
    line 196: constructor of interest

<A HREF="https://github.com/mono/mono/blob/2.10.7/mcs/class/corlib/System.IO/MonoIO.cs#L135">https://github.com/mono/mono/blob/2.10.7/mcs/class/corlib/System.IO/MonoIO.cs#L135</A>
  line 135: GetException returns the &quot;Sharing violation on path {0}&quot;
exception

<A HREF="https://github.com/mono/mono/blob/2.10.7/mono/io-layer/io.c">https://github.com/mono/mono/blob/2.10.7/mono/io-layer/io.c</A>
  numberous place sets the ERROR_SHARING_VIOLATION error code

<A HREF="https://github.com/mono/mono/blob/2.10.7/mono/io-layer/error.h">https://github.com/mono/mono/blob/2.10.7/mono/io-layer/error.h</A>

<A HREF="https://github.com/mono/mono/blob/2.10.7/mono/io-layer/error.c#L209">https://github.com/mono/mono/blob/2.10.7/mono/io-layer/error.c#L209</A>
  line 209: WAPI related

Thank you,

Phi

Message: Sharing violation on path
/Users/username/Library/Caches/Axure-6-5-Standard/415E/1A95/Page/59/976f597f5ae84df18886bfa2cf90d959/976f597f5ae84df18886bfa2cf90d959.rppkg
Type: System.IO.IOException
Source: mscorlib

at System.IO.FileStream..ctor (System.String path, FileMode mode,
FileAccess access, FileShare share, Int32 bufferSize, Boolean anonymous,
FileOptions options)
at System.IO.FileStream..ctor (System.String path, FileMode mode,
FileAccess access, FileShare share, Int32 bufferSize)
at (wrapper remoting-invoke-with-check) System.IO.FileStream:.ctor
(string,System.IO.FileMode,System.IO.FileAccess,System.IO.FileShare,int)
at System.IO.File.Create (System.String path, Int32 bufferSize)
at System.IO.File.Create (System.String path)
at System.IO.FileInfo.Create ()
at (wrapper remoting-invoke-with-check) System.IO.FileInfo:Create ()
at Axure.Platform.Mac.Storage.MXFileStorage.Create (Guid dataId,
System.String category)
at Axure.DocumentModel.Saving.DocumentFile.c (Guid A_0, System.String A_1)
at Axure.DocumentModel.Saving.DocumentFile.a
(Axure.DocumentModel.PackageObject A_0, Boolean A_1,
System.Collections.Generic.Dictionary`2&amp; A_2)
at Axure.DocumentModel.Saving.DocumentFile.SavePackages (ICollection
packages, Boolean saveAllExternalObjects)
at (wrapper synchronized)
Axure.DocumentModel.Saving.DocumentFile:SavePackages
(System.Collections.ICollection,bool)
at Axure.DocumentModel.Saving.DocumentFile.SavePackage
(Axure.DocumentModel.PackageObject obj)
at (wrapper synchronized)
Axure.DocumentModel.Saving.DocumentFile:SavePackage
(Axure.DocumentModel.PackageObject)
at Axure.Client.UbiquityClientForm.b (Axure.DocumentModel.PackageObject A_0)
at Axure.Client.UbiquityClientForm.CommitOuterObject (Boolean clearEditors)
at Axure.Client.UbiquityClientForm.CommitOuterObject ()
at Axure.Client.Menus.FileEditMenus.az (System.Object A_0, System.EventArgs
A_1)
at (wrapper delegate-invoke) &lt;Module&gt;:invoke_void__this___object_EventArgs
(object,System.EventArgs)
at Axure.Platform.Component.Commands.CommandInfo.OnValueChanged
(System.EventArgs e)
at Axure.Platform.Component.Commands.CommandInfo.set_Value (System.Object
value)
at Axure.Platform.Component.Commands.ButtonCommandInfo.set_Value
(System.Object value)
at
Axure.Platform.Mac.Controls.MXMenuDecorator+NSMenuItemEventManager.onAction
(MObjc.NSObject sender)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20130822/7ca425f2/attachment.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20130822/7ca425f2/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005256.html">[Mono-osx] ObjC library run from Mono always returns null
</A></li>
	<LI>Next message: <A HREF="005257.html">[Mono-osx] Stackoverflow Exception when i call Application.Exit()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5254">[ date ]</a>
              <a href="thread.html#5254">[ thread ]</a>
              <a href="subject.html#5254">[ subject ]</a>
              <a href="author.html#5254">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
