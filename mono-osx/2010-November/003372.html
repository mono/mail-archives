<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] [MonoMac] Frequent SIGSEGVs in ObjCRuntime.Messaging	with WebView
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20Frequent%20SIGSEGVs%20in%20ObjCRuntime.Messaging%0A%09with%20WebView&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003380.html">
   <LINK REL="Next"  HREF="003373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] [MonoMac] Frequent SIGSEGVs in ObjCRuntime.Messaging	with WebView</H1>
    <B>Alexander Shulgin</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20Frequent%20SIGSEGVs%20in%20ObjCRuntime.Messaging%0A%09with%20WebView&In-Reply-To="
       TITLE="[Mono-osx] [MonoMac] Frequent SIGSEGVs in ObjCRuntime.Messaging	with WebView">alexander.shulgin at yessoftware.com
       </A><BR>
    <I>Tue Nov 23 12:44:04 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003380.html">[Mono-osx] ibtool seems to be gone after update
</A></li>
        <LI>Next message: <A HREF="003373.html">[Mono-osx] [MonoMac] Frequent SIGSEGVs in ObjCRuntime.Messaging with WebView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3372">[ date ]</a>
              <a href="thread.html#3372">[ thread ]</a>
              <a href="subject.html#3372">[ subject ]</a>
              <a href="author.html#3372">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've started getting a lot of these SIGSEGVs recently, so I'd be glad 
for some help on tracking them down.

Some details: we have a C# app on OS X with Carbon(!) event loop (you 
can spot it in the native stack trace below), which uses MonoMac to bind 
some Cocoa views, currently only WebView.

Everything is just fine, except I get like 4 crashes out of 5 runs now.

I've took a brief look at MonoMac_Disposer but didn't find anything fishy.

I was using mono-2.8.0, so I've upgraded to 2.8.1, but this didn't 
change a thing.  Also, I'm using up-to-date monomac &amp; maccore checkouts 
from github.

What can I try to debug this problem?

--
Regards,
Alex

PS: and here is a typical stack trace:

   at (wrapper managed-to-native) 
MonoMac.ObjCRuntime.Messaging.void_objc_msgSendSuper (intptr,intptr) 
&lt;0x00003&gt;
   at (wrapper managed-to-native) 
MonoMac.ObjCRuntime.Messaging.void_objc_msgSendSuper (intptr,intptr) 
&lt;0x00003&gt;
   at MonoMac.Foundation.NSObject/MonoMac_Disposer.Drain 
(MonoMac.Foundation.NSObject) [0x00026] in 
/Users/user/Projects/mono/monomac/src/Foundation/NSObject.cs:345
   at (wrapper dynamic-method) 
object.dab36271-63bc-440c-b34e-0fba4a320f8d 
(MonoMac.Foundation.NSObject,MonoMac.ObjCRuntime.Selector,MonoMac.Foundation.NSObject) 
&lt;IL 0x0000c, 0x00030&gt;
   at (wrapper native-to-managed) 
object.dab36271-63bc-440c-b34e-0fba4a320f8d 
(MonoMac.Foundation.NSObject,MonoMac.ObjCRuntime.Selector,MonoMac.Foundation.NSObject) 
&lt;IL 0x00065, 0x000df&gt;

Native stacktrace:

	0   mono                                0x000c8f5a 
mono_handle_native_sigsegv + 343
	1   mono                                0x0000ffa5 
mono_sigsegv_signal_handler + 306
	2   libSystem.B.dylib                   0x981e946b _sigtramp + 43
	3   ???                                 0xffffffff 0x0 + 4294967295
	4   WebKit                              0x92d2287a -[WebArchive 
dealloc] + 42
	5   ???                                 0x1740796c 0x0 + 390101356
	6   ???                                 0x1aa246ad 0x0 + 446842541
	7   ???                                 0x02e2d0d9 0x0 + 48419033
	8   ???                                 0x02e17ee8 0x0 + 48332520
	9   Foundation                          0x99398db9 
__NSThreadPerformPerform + 506
	10  CoreFoundation                      0x94c7d4cb 
__CFRunLoopDoSources0 + 1563
	11  CoreFoundation                      0x94c7af8f __CFRunLoopRun + 1071
	12  CoreFoundation                      0x94c7a464 CFRunLoopRunSpecific 
+ 452
	13  CoreFoundation                      0x94c7a291 CFRunLoopRunInMode + 97
	14  HIToolbox                           0x96416f9c 
RunCurrentEventLoopInMode + 392
	15  HIToolbox                           0x96416c8d 
ReceiveNextEventCommon + 158
	16  HIToolbox                           0x9659f130 _AcquireNextEvent + 54
	17  HIToolbox                           0x96594dec 
RunApplicationEventLoop + 228
	18  ???                                 0x02f798a3 0x0 + 49780899
	19  ???                                 0x02a82df0 0x0 + 44576240
	20  ???                                 0x004cbf34 0x0 + 5029684
	21  ???                                 0x004cc1e4 0x0 + 5030372
	22  mono                                0x0000fd70 
mono_jit_runtime_invoke + 1339
	23  mono                                0x001de701 mono_runtime_invoke 
+ 138
	24  mono                                0x001e08ac 
mono_runtime_exec_main + 669
	25  mono                                0x001dfc96 
mono_runtime_run_main + 814
	26  mono                                0x0009c762 mono_jit_exec + 200
	27  mono                                0x0009c99c main_thread_handler 
+ 558
	28  mono                                0x0009ecd3 mono_main + 7577
	29  mono                                0x00003a95 
mono_main_with_options + 539
	30  mono                                0x00003b1c main + 49
	31  mono                                0x0000384e start + 54

Debug info from gdb:

/tmp/mono-gdb-commands.eb91K4:1: Error in sourced command file:
unable to debug self

</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003380.html">[Mono-osx] ibtool seems to be gone after update
</A></li>
	<LI>Next message: <A HREF="003373.html">[Mono-osx] [MonoMac] Frequent SIGSEGVs in ObjCRuntime.Messaging with WebView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3372">[ date ]</a>
              <a href="thread.html#3372">[ thread ]</a>
              <a href="subject.html#3372">[ subject ]</a>
              <a href="author.html#3372">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
