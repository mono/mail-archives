<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] MSIL: Ldfld problems under Mac OS X / Mono, probably Mono bug
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20MSIL%3A%20Ldfld%20problems%20under%20Mac%20OS%20X%20/%20Mono%2C%0A%20probably%20Mono%20bug&In-Reply-To=1323977221395-4201442.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004671.html">
   <LINK REL="Next"  HREF="004673.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] MSIL: Ldfld problems under Mac OS X / Mono, probably Mono bug</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20MSIL%3A%20Ldfld%20problems%20under%20Mac%20OS%20X%20/%20Mono%2C%0A%20probably%20Mono%20bug&In-Reply-To=1323977221395-4201442.post%40n4.nabble.com"
       TITLE="[Mono-osx] MSIL: Ldfld problems under Mac OS X / Mono, probably Mono bug">kumpera at gmail.com
       </A><BR>
    <I>Thu Dec 15 14:41:42 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004671.html">[Mono-osx] MSIL: Ldfld problems under Mac OS X / Mono,	probably Mono bug
</A></li>
        <LI>Next message: <A HREF="004673.html">[Mono-osx] Implementing Tao on Mac OS X
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4672">[ date ]</a>
              <a href="thread.html#4672">[ thread ]</a>
              <a href="subject.html#4672">[ subject ]</a>
              <a href="author.html#4672">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please file a bug report and attach a minimal working test case.

What it looks like is that JInt is abusing some MS'ism in IL. As passing
null to ldfld and expect it to not raise an exception.

On Thu, Dec 15, 2011 at 5:27 PM, lu4 &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">lu4 at online.ua</A>&gt; wrote:

&gt;<i> Hi I'm using 3rd party library JInt (the JavaScript interpriter) which was
</I>&gt;<i> working fine until I've switched to Mac OS X, after that I keep on getting
</I>&gt;<i> ArgumentNullExceptions, after some investigation I've found out that JInt
</I>&gt;<i> uses dynamic code generation for making some sort of Js-Clr bridge. This
</I>&gt;<i> method has the following instructions in the end:
</I>&gt;<i>
</I>&gt;<i> code.Emit(OpCodes.Ldnull);
</I>&gt;<i> FieldInfo fieldInfo = typeof(JsUndefined).GetField(&quot;Instance&quot;);
</I>&gt;<i> code.Emit(OpCodes.Ldfld, fieldInfo);
</I>&gt;<i>
</I>&gt;<i> Here's how these lines are executed It is clearly seen that fieldInfo
</I>&gt;<i> argument is not null, though when it comes to executing these lines, notice
</I>&gt;<i> that LDFLD has no argument! My current statement that will get executed
</I>&gt;<i> is Ldnull, I performing &quot;Step In&quot;(Over Ldnull) and BANG exception occurs
</I>&gt;<i> over Ldfld (Full size screenshot here &lt;<A HREF="http://i.stack.imgur.com/rpTvd.png">http://i.stack.imgur.com/rpTvd.png</A>&gt;):
</I>&gt;<i> Any suggestions?
</I>&gt;<i> ------------------------------
</I>&gt;<i> View this message in context: MSIL: Ldfld problems under Mac OS X / Mono,
</I>&gt;<i> probably Mono bug&lt;<A HREF="http://mono.1490590.n4.nabble.com/MSIL-Ldfld-problems-under-Mac-OS-X-Mono-probably-Mono-bug-tp4201442p4201442.html">http://mono.1490590.n4.nabble.com/MSIL-Ldfld-problems-under-Mac-OS-X-Mono-probably-Mono-bug-tp4201442p4201442.html</A>&gt;
</I>&gt;<i> Sent from the Mono - OSX mailing list archive&lt;<A HREF="http://mono.1490590.n4.nabble.com/Mono-OSX-f1546893.html">http://mono.1490590.n4.nabble.com/Mono-OSX-f1546893.html</A>&gt;at Nabble.com.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-osx mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">Mono-osx at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">http://lists.ximian.com/mailman/listinfo/mono-osx</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20111215/ddf9e1db/attachment-0001.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20111215/ddf9e1db/attachment-0001.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004671.html">[Mono-osx] MSIL: Ldfld problems under Mac OS X / Mono,	probably Mono bug
</A></li>
	<LI>Next message: <A HREF="004673.html">[Mono-osx] Implementing Tao on Mac OS X
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4672">[ date ]</a>
              <a href="thread.html#4672">[ thread ]</a>
              <a href="subject.html#4672">[ subject ]</a>
              <a href="author.html#4672">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
