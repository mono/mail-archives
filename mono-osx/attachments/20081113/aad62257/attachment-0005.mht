[From nobody Thu Nov 13 15:10:34 2008
Return-Path: &lt;miguel@novell.com&gt;
X-Original-To: dick@hagbard.apathetic.discordia.org.uk
Delivered-To: dick@hagbard.apathetic.discordia.org.uk
Received: from hagbard.apathetic.discordia.org.uk
	(hagbard.apathetic.discordia.org.uk [127.0.0.1]) by
	hagbard.apathetic.discordia.org.uk (Postfix) with ESMTP id 1AFDB11AC086
	for &lt;dick@hagbard.apathetic.discordia.org.uk&gt;;
	Thu, 13 Nov 2008 17:35:47 +0000 (GMT)
X-Original-To: dick@ximian.com
Received: from skeptopotamus.ximian.com [130.57.169.16] by
	hagbard.apathetic.discordia.org.uk with POP3 (fetchmail-6.3.6) for
	&lt;dick@hagbard.apathetic.discordia.org.uk&gt; (single-drop);
	Thu, 13 Nov 2008 17:35:47 +0000 (GMT)
Received: from herald.ximian.com (frontgate.ximian.com [130.57.169.19]) by
	skeptopotamus.ximian.com (Postfix) with ESMTP id BBAE17406E2 for
	&lt;dick@ximian.com&gt;; Thu, 13 Nov 2008 12:32:10 -0500 (EST)
Received: by herald.ximian.com (Postfix, from userid 2601) id A3D0670033;
	Thu, 13 Nov 2008 12:32:10 -0500 (EST)
Received: from victor.provo.novell.com (victor.provo.novell.com
	[137.65.250.26]) by herald.ximian.com (Postfix) with ESMTP id
	02CA47002B
	for &lt;dick@ximian.com&gt;; Thu, 13 Nov 2008 12:32:09 -0500 (EST)
Received: from [164.99.121.39] (prv-ext-foundry1.gns.novell.com
	[137.65.251.240]) by victor.provo.novell.com with ESMTP;
	Thu, 13 Nov 2008 10:32:03 -0700
Subject: Re: Blast from the past ;-)
From: Miguel de Icaza &lt;miguel@novell.com&gt;
To: Dick Porter &lt;dick@ximian.com&gt;
In-Reply-To: &lt;1226583266.19172.496.camel@hagbard.apathetic.discordia.org.uk&gt;
References: &lt;1226451258.4483.141.camel@erandi.site&gt;
	(sfid-20081112_005912_784345_4C95AEE4)
	&lt;1226583266.19172.496.camel@hagbard.apathetic.discordia.org.uk&gt;
Content-Type: text/plain
Organization: Novell, Inc.
Date: Thu, 13 Nov 2008 12:30:45 -0500
Message-Id: &lt;1226597445.4483.230.camel@erandi.site&gt;
	(sfid-20081113_173547_328068_F5F192DB)
Mime-Version: 1.0
X-Mailer: Evolution 2.22.1.1
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on frontgate.ximian.com
X-Spam-Level: 
X-Spam-Status: No, score=0.7 required=5.0 tests=AWL version=3.0.3
X-CRM114-Version: 20070301-BlameBaltar ( TRE 0.7.5 (LGPL) ) MR-BD9991E2
X-CRM114-CacheID: sfid-20081113_173547_328068_F5F192DB
X-CRM114-Status: GOOD (  17.20  )
X-Hagbard-Spambayes-Classification: ham; 0.00
X-Evolution-Source: mbox:///var/mail/dick
Content-Transfer-Encoding: quoted-printable

Hello Dick,

    Bummer.=20

    I agree that this is a major downside and we should not pay the
penalty for it every time.   Would you mind posting this to the mailing
list (mono-osx) so at least there is a googable track record of this?

Miguel.

&gt; On Tue, 2008-11-11 at 19:54 -0500, Miguel de Icaza wrote:
&gt; &gt; Hey Dick!
&gt; &gt;=20
&gt; &gt;     Would you mind taking a look at this problem?
&gt;=20
&gt; It appears that macosx does not like having the same file descriptor in
&gt; multiple 'struct pollfd's in a single call to poll(2).  I'm guessing
&gt; that the last one set overrides the previous ones (in the test case
&gt; here, that means the errors one wins.)
&gt;=20
&gt; See the attached test case in C.  The select version works on linux and
&gt; macos; the poll version breaks on macos when the pollfds aren't merged,
&gt; and works when they are.
&gt;=20
&gt; To fix this, we can try and merge the pollfds in the Select icall (by
&gt; scanning the previously assigned pollfds, potentially O(n^2)), or we
&gt; could just chalk it up to another incompatibility.
&gt;=20
&gt; - Dick
&gt;=20
]