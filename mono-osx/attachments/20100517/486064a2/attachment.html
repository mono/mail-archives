<tt>
Hello,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Preliminary&nbsp;question:&nbsp;why&nbsp;don&amp;#39;t&nbsp;you&nbsp;use&nbsp;the&nbsp;NAnt&nbsp;tasks&nbsp;(&amp;lt;mkappl/&amp;gt;&nbsp;and&nbsp;&amp;lt;mkbundle/&amp;gt;)&nbsp;available&nbsp;in&nbsp;Monobjc&nbsp;?&nbsp;They&nbsp;are&nbsp;supposed&nbsp;to&nbsp;do&nbsp;all&nbsp;the&nbsp;dirty&nbsp;stuff&nbsp;for&nbsp;you&nbsp;(native&nbsp;library&nbsp;gathering,&nbsp;relocation,&nbsp;remapping,&nbsp;etc.).&nbsp;There&nbsp;is&nbsp;even&nbsp;a&nbsp;tutorial&nbsp;for&nbsp;that: &lt;a&nbsp;href=&quot;http://www.monobjc.net/index.php?page=redistribution&quot;&gt;http://www.monobjc.net/index.php?page=redistribution&lt;/a&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;the&nbsp;GLib&nbsp;problem,&nbsp;this&nbsp;is&nbsp;a&nbsp;regression&nbsp;from&nbsp;2.6.3.&nbsp;The&nbsp;pkg-config&nbsp;file&nbsp;for&nbsp;Mono&nbsp;is&nbsp;incomplete,&nbsp;as&nbsp;the&nbsp;2.6&nbsp;branch&nbsp;still&nbsp;depends&nbsp;on&nbsp;GLib.&nbsp;You&nbsp;can&nbsp;quick-fix&nbsp;this&nbsp;issue&nbsp;by&nbsp;copying&nbsp;the&nbsp;&amp;quot;mono.pc&amp;quot;&nbsp;file&nbsp;from&nbsp;the&nbsp;2.6.3&nbsp;installation.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&nbsp;Laurent&nbsp;Etiemble.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2010/5/14&nbsp;dgdw&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:david.drysdale-wilson@linn.co.uk&quot;&gt;david.drysdale-wilson@linn.co.uk&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
&lt;br&gt;<br>
Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;in&nbsp;the&nbsp;process&nbsp;of&nbsp;trying&nbsp;to&nbsp;produce&nbsp;a&nbsp;Mac&nbsp;application&nbsp;that&nbsp;can&nbsp;be&nbsp;run&lt;br&gt;<br>
without&nbsp;the&nbsp;need&nbsp;for&nbsp;our&nbsp;users&nbsp;to&nbsp;first&nbsp;install&nbsp;mono&nbsp;-&nbsp;However&nbsp;I&nbsp;am&nbsp;running&lt;br&gt;<br>
into&nbsp;a&nbsp;lot&nbsp;of&nbsp;issues&nbsp;and&nbsp;I&nbsp;hope&nbsp;that&nbsp;someone&nbsp;here&nbsp;will&nbsp;be&nbsp;able&nbsp;ti&nbsp;give&nbsp;me&lt;br&gt;<br>
some&nbsp;pointers&nbsp;as&nbsp;to&nbsp;what&nbsp;I&nbsp;am&nbsp;doing&nbsp;wrong.&lt;br&gt;<br>
&lt;br&gt;<br>
My&nbsp;development&nbsp;environment&nbsp;is&nbsp;a&nbsp;Mac&nbsp;with&nbsp;Snow&nbsp;Leopard&nbsp;10.6.3,&nbsp;Mono&nbsp;2.6.4&nbsp;and&lt;br&gt;<br>
Monobjc&nbsp;2.0.492.0&nbsp;and&nbsp;XCode&nbsp;3.2.1.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;far&nbsp;I&nbsp;have&nbsp;managed&nbsp;to&nbsp;create&nbsp;a&nbsp;working&nbsp;Mac&nbsp;application&nbsp;by&nbsp;creating&nbsp;the&lt;br&gt;<br>
appropriate&nbsp;.app&nbsp;directory&nbsp;structure,&nbsp;populated&nbsp;it&nbsp;with&nbsp;the&nbsp;required&lt;br&gt;<br>
assemblies,&nbsp;exe,&nbsp;pInfo&nbsp;and&nbsp;shell&nbsp;script&nbsp;(which&nbsp;invokes&nbsp;my&nbsp;exe&nbsp;with&nbsp;mono).&lt;br&gt;<br>
The&nbsp;next&nbsp;step&nbsp;is&nbsp;to&nbsp;remove&nbsp;the&nbsp;need&nbsp;to&nbsp;have&nbsp;mono&nbsp;installed.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;first&nbsp;issue&nbsp;I&nbsp;had&nbsp;with&nbsp;mkbundle2&nbsp;is&nbsp;that&nbsp;the&nbsp;compilation&nbsp;of&nbsp;the&nbsp;auto&lt;br&gt;<br>
generated&nbsp;assembly&nbsp;fails&nbsp;with&nbsp;the&nbsp;following&nbsp;errors,&lt;br&gt;<br>
&lt;br&gt;<br>
as&nbsp;-o&nbsp;temp.o&nbsp;temp.s&lt;br&gt;<br>
temp.s:2:unknown&nbsp;section&nbsp;type:&nbsp;symbol_stubs&lt;br&gt;<br>
temp.s:2:Rest&nbsp;of&nbsp;line&nbsp;ignored.&nbsp;1st&nbsp;junk&nbsp;character&nbsp;valued&nbsp;at&nbsp;112&nbsp;(p).&lt;br&gt;<br>
&amp;lt;snip&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;saw&nbsp;a&nbsp;post&nbsp;about&nbsp;this&nbsp;issue&nbsp;(it&nbsp;appears&nbsp;to&nbsp;be&nbsp;an&nbsp;issue&nbsp;of&nbsp;the&nbsp;assembler&lt;br&gt;<br>
requiring&nbsp;information&nbsp;about&nbsp;the&nbsp;architecture&nbsp;to&nbsp;compile&nbsp;against),&nbsp;so&nbsp;I&nbsp;set&lt;br&gt;<br>
the&nbsp;AS&nbsp;environment&nbsp;variable&nbsp;to&nbsp;&amp;#39;as&nbsp;-arch&nbsp;i386&amp;#39;.&nbsp;Next&nbsp;the&nbsp;compilation&nbsp;fails&lt;br&gt;<br>
with&nbsp;the&nbsp;following&nbsp;errors,&lt;br&gt;<br>
&lt;br&gt;<br>
cc&nbsp;-g&nbsp;a.out&nbsp;-Wall&nbsp;temp.c&nbsp;&amp;#39;pkg-config&nbsp;--cflags&nbsp;--libs&nbsp;mono&amp;#39;&nbsp; temp.o&lt;br&gt;<br>
temp.c:&nbsp;In&nbsp;function&nbsp;&amp;#39;install_dll_config_files&amp;#39;:&lt;br&gt;<br>
temp.c:47:&nbsp;warning:&nbsp;pointer&nbsp;targets&nbsp;in&nbsp;passing&nbsp;argument&nbsp;2&nbsp;of&lt;br&gt;<br>
&amp;#39;mono_register_config_for_assembly&amp;#39;&nbsp;differ&nbsp;in&nbsp;signedness&lt;br&gt;<br>
ld:&nbsp;warning:&nbsp;in&lt;br&gt;<br>
/Library/Frameworks/Mono.framework/Versions/2.6.4/lib/libmono.dylib,&nbsp;file&nbsp;is&lt;br&gt;<br>
not&nbsp;of&nbsp;required&nbsp;architecture&lt;br&gt;<br>
&amp;lt;snip&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;I&nbsp;set&nbsp;the&nbsp;CC&nbsp;environment&nbsp;variable&nbsp;to&nbsp;&amp;#39;cc&nbsp;-arch&nbsp;i386&amp;#39;.&nbsp;Now&nbsp;the&nbsp;compilation&lt;br&gt;<br>
fails&nbsp;with&nbsp;the&nbsp;following&nbsp;errors,&lt;br&gt;<br>
&lt;br&gt;<br>
cc&nbsp;-g&nbsp;a.out&nbsp;-Wall&nbsp;temp.c&nbsp;&amp;#39;pkg-config&nbsp;--cflags&nbsp;--libs&nbsp;mono&amp;#39;&nbsp; temp.o&lt;br&gt;<br>
In&nbsp;file&nbsp;included&nbsp;from&nbsp;temp.c:2&lt;br&gt;<br>
/Library/Frameworks/Mono.framework/Versions/2.6.4/include/mono-1.0/mono/metadata/assembly.h:4:18:&lt;br&gt;<br>
error:&nbsp;glib.h:&nbsp;No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory&lt;br&gt;<br>
&amp;lt;snip&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;output&nbsp;from&nbsp;&amp;#39;pkg-config&nbsp;--cflags&nbsp;--libs&nbsp;mono&amp;#39;&nbsp;gives,&lt;br&gt;<br>
&lt;br&gt;<br>
-D_THREAD_SAFE&lt;br&gt;<br>
-I/Library/Frameworks/Mono.framework/Versions/2.6.4/include/mono-1.0&lt;br&gt;<br>
-pthread&nbsp;-L/Library/Frameworks/Mono.framework/Versions/2.6.4/lib/&nbsp;-lmono&lt;br&gt;<br>
-lpthread&nbsp;-lm&lt;br&gt;<br>
&lt;br&gt;<br>
No&nbsp;mention&nbsp;of&nbsp;glib,&nbsp;so&nbsp;I&nbsp;looked&nbsp;in&nbsp;the&nbsp;mono.pc&nbsp;file&nbsp;in&lt;br&gt;<br>
/Library/Frameworks/Mono.framework/Versions/2.6.4/lib/pkgconfig/&nbsp;and&lt;br&gt;<br>
discovered&nbsp;the&nbsp;line&nbsp;&amp;#39;Requires:&nbsp;glib-2.0&nbsp;gthread-2.0&nbsp;was&nbsp;commented&nbsp;out.&nbsp;I&lt;br&gt;<br>
uncommented&nbsp;the&nbsp;line&nbsp;and&nbsp;finally&nbsp;mkbundle2&nbsp;produces&nbsp;a&nbsp;compiled&nbsp;version&nbsp;of&nbsp;my&lt;br&gt;<br>
exe.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;next&nbsp;step&nbsp;is&nbsp;the&nbsp;use&nbsp;otool&nbsp;to&nbsp;get&nbsp;a&nbsp;list&nbsp;of&nbsp;the&nbsp;mono&nbsp;libraries&nbsp;my&lt;br&gt;<br>
compiled&nbsp;executable&nbsp;is&nbsp;dependent&nbsp;on,&nbsp;move&nbsp;them&nbsp;to&nbsp;the&nbsp;Frameworks&nbsp;directory&lt;br&gt;<br>
in&nbsp;my&nbsp;.app&nbsp;directory&nbsp;and&nbsp;fix&nbsp;up&nbsp;the&nbsp;libraries&nbsp;and&nbsp;compiled&nbsp;executable&lt;br&gt;<br>
library&nbsp;references&nbsp;using&nbsp;install_name_tool.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;theory&nbsp;this&nbsp;.app&nbsp;should&nbsp;now&nbsp;run&nbsp;without&nbsp;mono&nbsp;installed.&nbsp;On&nbsp;launching&nbsp;the&lt;br&gt;<br>
application&nbsp;I&nbsp;get&nbsp;a&nbsp;brief&nbsp;glimpse&nbsp;of&nbsp;the&nbsp;main&nbsp;form&nbsp;and&nbsp;then&nbsp;it&nbsp;closes,&nbsp;so&nbsp;I&lt;br&gt;<br>
am&nbsp;close&nbsp;but&nbsp;not&nbsp;there&nbsp;yet.&nbsp;On&nbsp;launching&nbsp;from&nbsp;a&nbsp;terminal&nbsp;it&nbsp;appears&nbsp;that&nbsp;my&lt;br&gt;<br>
application&nbsp;depends&nbsp;on&nbsp;libgdiplus.dylib&nbsp;-&nbsp;However&nbsp;otool&nbsp;does&nbsp;not&nbsp;show&nbsp;this&lt;br&gt;<br>
to&nbsp;be&nbsp;the&nbsp;case,&nbsp;so&nbsp;I&nbsp;am&nbsp;now&nbsp;completely&nbsp;stumped&nbsp;as&nbsp;to&nbsp;what&nbsp;the&nbsp;next&nbsp;step&nbsp;is&lt;br&gt;<br>
in&nbsp;order&nbsp;to&nbsp;get&nbsp;this&nbsp;external&nbsp;dependency&nbsp;resolved.&nbsp;Does&nbsp;anyone&nbsp;have&nbsp;any&nbsp;idea&lt;br&gt;<br>
of&nbsp;how&nbsp;to&nbsp;correct&nbsp;this&nbsp;problem&nbsp;or&nbsp;a&nbsp;work&nbsp;around?&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;for&nbsp;any&nbsp;help,&lt;br&gt;<br>
David&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;--&lt;br&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/Redistributable-Mac-OSX-app-without-mono-using-mkbundle2-tp2216423p2216423.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://mono.1490590.n4.nabble.com/Redistributable-Mac-OSX-app-without-mono-using-mkbundle2-tp2216423p2216423.html&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>
Sent&nbsp;from&nbsp;the&nbsp;Mono&nbsp;-&nbsp;OSX&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-osx&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-osx@lists.ximian.com&quot;&gt;Mono-osx@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-osx&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-osx&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
