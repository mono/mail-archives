<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#ffffff&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;currently&nbsp;using&nbsp;MonoMac&nbsp;to&nbsp;port&nbsp;a&nbsp;Windows&nbsp;application&nbsp;to&nbsp;Mac&nbsp;OS<br>
&nbsp;&nbsp;&nbsp;&nbsp;X.&nbsp;Recently&nbsp;I've&nbsp;started&nbsp;building&nbsp;MonoMac&nbsp;myself&nbsp;from&nbsp;the&nbsp;sources&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;github,&nbsp;and&nbsp;had&nbsp;started&nbsp;to&nbsp;get&nbsp;NullReferenceExceptions&nbsp;at&nbsp;seemingly<br>
&nbsp;&nbsp;&nbsp;&nbsp;random&nbsp;times.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;cause&nbsp;was&nbsp;apparently<br>
&nbsp;&nbsp;&nbsp;&nbsp;MonoMac.ObjCRuntime.Runtime.GetNSObject(IntPtr),&nbsp;which&nbsp;was&nbsp;changed&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;ago&nbsp;to&nbsp;return&nbsp;null&nbsp;if&nbsp;the&nbsp;WeakReference&nbsp;to&nbsp;the&nbsp;managed<br>
&nbsp;&nbsp;&nbsp;&nbsp;NSObject&nbsp;held&nbsp;in&nbsp;the&nbsp;object_map&nbsp;has&nbsp;been&nbsp;garbage&nbsp;collected&nbsp;-&nbsp;see<br>
&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;commit:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://github.com/mono/monomac/commit/2482fd3eef1ac5825146456a5b9c99ec7609fee6&quot;&gt;https://github.com/mono/monomac/commit/2482fd3eef1ac5825146456a5b9c99ec7609fee6&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;commit&nbsp;message&nbsp;says&nbsp;that&nbsp;it&nbsp;is&nbsp;OK&nbsp;to&nbsp;return&nbsp;null&nbsp;because&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;callers&nbsp;check&nbsp;for&nbsp;it,&nbsp;but&nbsp;as&nbsp;far&nbsp;as&nbsp;I&nbsp;can&nbsp;tell&nbsp;this&nbsp;does&nbsp;not&nbsp;seem&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;the&nbsp;case.&nbsp;NSArray.ArrayFromHandle(IntPtr)&nbsp;is&nbsp;one&nbsp;example,&nbsp;but<br>
&nbsp;&nbsp;&nbsp;&nbsp;GetNSObject(IntPtr)&nbsp;is&nbsp;public&nbsp;so&nbsp;I&nbsp;presume&nbsp;any&nbsp;application&nbsp;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;could&nbsp;call&nbsp;it&nbsp;and&nbsp;expect&nbsp;not&nbsp;to&nbsp;get&nbsp;null&nbsp;back.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;managed&nbsp;to&nbsp;fix&nbsp;the&nbsp;problem&nbsp;in&nbsp;my&nbsp;application&nbsp;by&nbsp;changing<br>
&nbsp;&nbsp;&nbsp;&nbsp;monomac/src/ObjCRuntime/Runtime.cs&nbsp;as&nbsp;shown&nbsp;in&nbsp;the&nbsp;attached&nbsp;diff.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;searched&nbsp;the&nbsp;bug&nbsp;database&nbsp;and&nbsp;the&nbsp;web&nbsp;and&nbsp;couldn't&nbsp;find&nbsp;any<br>
&nbsp;&nbsp;&nbsp;&nbsp;reference&nbsp;to&nbsp;this&nbsp;problem,&nbsp;which&nbsp;surprised&nbsp;me&nbsp;and&nbsp;made&nbsp;me&nbsp;wonder&nbsp;if<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;doing&nbsp;something&nbsp;wrong&nbsp;-&nbsp;I'm&nbsp;a&nbsp;complete&nbsp;newbie&nbsp;when&nbsp;it&nbsp;comes&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;git(hub)!&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;of&nbsp;the&nbsp;correct&nbsp;procedure&nbsp;for&nbsp;dealing&nbsp;with&nbsp;problems&nbsp;like<br>
&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;-&nbsp;should&nbsp;I&nbsp;submit&nbsp;a&nbsp;bug&nbsp;report?&nbsp;(I'm&nbsp;not&nbsp;sure&nbsp;whether&nbsp;that's<br>
&nbsp;&nbsp;&nbsp;&nbsp;only&nbsp;for&nbsp;official&nbsp;releases)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks&nbsp;for&nbsp;your&nbsp;patience,&nbsp;any&nbsp;help&nbsp;would&nbsp;be&nbsp;greatly&nbsp;appreciated!&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Dan&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&gt;&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
