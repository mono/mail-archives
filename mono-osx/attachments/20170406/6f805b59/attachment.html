<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=Windows-1252&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;style=&quot;display:none;&quot;&gt;&lt;!--&nbsp;P&nbsp;{margin-top:0;margin-bottom:0;}&nbsp;--&gt;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;id=&quot;divtagdefaultwrapper&quot;&nbsp;style=&quot;font-size:12pt;color:#000000;font-family:Calibri,Arial,Helvetica,sans-serif;&quot;&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;I'm&nbsp;trying&nbsp;to&nbsp;make&nbsp;a&nbsp;video&nbsp;player&nbsp;that&nbsp;renders&nbsp;on&nbsp;an&nbsp;OpenGL&nbsp;texture.&nbsp;&nbsp;I&nbsp;want&nbsp;to&nbsp;make&nbsp;a&nbsp;portable&nbsp;application&nbsp;so&nbsp;I'm&nbsp;using&nbsp;OpenTK,&nbsp;and&nbsp;on&nbsp;MacOS&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;use&nbsp;QTMovie&nbsp;to&nbsp;draw&nbsp;the&nbsp;video&nbsp;frame&nbsp;in&nbsp;a&nbsp;texture&nbsp;(on&nbsp;Windows&nbsp;I&nbsp;use&nbsp;VLC&nbsp;and&nbsp;works<br>
&nbsp;well,&nbsp;on&nbsp;Linux&nbsp;I'm&nbsp;try&nbsp;to&nbsp;use&nbsp;GStremer).&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;The&nbsp;video&nbsp;is&nbsp;rendered&nbsp;correctly,&nbsp;but&nbsp;I&nbsp;think&nbsp;there&nbsp;is&nbsp;a&nbsp;problem&nbsp;when&nbsp;try&nbsp;to&nbsp;get&nbsp;frames&nbsp;from&nbsp;QTMovie&nbsp;because&nbsp;this&nbsp;operation&nbsp;occurs&nbsp;in&nbsp;a&nbsp;thread&nbsp;that&nbsp;is&nbsp;not&nbsp;the&nbsp;main&nbsp;application&nbsp;thread.&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;The&nbsp;audio&nbsp;and&nbsp;video&nbsp;tracks&nbsp;are&nbsp;very&nbsp;slow,&nbsp;and&nbsp;many&nbsp;frame&nbsp;are&nbsp;skipped.&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;To&nbsp;rendere&nbsp;video&nbsp;I&nbsp;use&nbsp;two&nbsp;functions:&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;public&nbsp;void&nbsp;UpdateTexture()&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;{&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;double&nbsp;td=(double)mMovie.CurrentTime.TimeValue/(double)mMovie.Duration.TimeValue;&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;this.MoviePosition=(int)((double)this.MovieDuration*td);;&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;this.frameCount=(int)((1000/(double)this.frameRate)*(double)this.MoviePosition);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;if(this.frameCount!=this.lastFrameCount)&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;{&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;this.lastFrameCount=this.frameCount;&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;using(var&nbsp;imageData=mMovie.CurrentFrameImage.AsTiff())&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;{&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;var&nbsp;imgRep=NSBitmapImageRep.ImageRepFromData(imageData)asNSBitmapImageRep;&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;var&nbsp;imageProps=newNSDictionary();&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;var&nbsp;data=imgRep.RepresentationUsingTypeProperties(NSBitmapImageFileType.Bmp,imageProps);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;this.tetxure1.CreateTextureFromBitmap(newBitmap(data.AsStream()));&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;}&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;}&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;}&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;public&nbsp;void&nbsp;DrawImage(System.Drawing.RectangletmpRect,intBlendValue)&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;{&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;if(!this.isOpen)&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;return;&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;this.UpdateTexture();&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.MatrixMode(MatrixMode.Texture);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.LoadIdentity();&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.MatrixMode(MatrixMode.Modelview);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.Enable(EnableCap.CullFace);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.Enable(EnableCap.Texture2D);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.Enable(EnableCap.Blend);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.BlendFunc(BlendingFactorSrc.SrcAlpha,BlendingFactorDest.OneMinusSrcAlpha);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.BindTexture(TextureTarget.Texture2D,this.tetxure1.TextureID);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.Begin(BeginMode.Quads);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;PointF&nbsp;Pt1=Scr2OpenGL(tmpRect.Left,tmpRect.Bottom);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.TexCoord2(0.0f,1.0f);GL.Vertex2(Pt1.X,Pt1.Y);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;PointF&nbsp;Pt2=Scr2OpenGL(tmpRect.Right,tmpRect.Bottom);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.TexCoord2(1.0f,1.0f);GL.Vertex2(Pt2.X,Pt2.Y);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;PointF&nbsp;Pt3=Scr2OpenGL(tmpRect.Right,tmpRect.Top);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.TexCoord2(1.0f,0.0f);GL.Vertex2(Pt3.X,Pt3.Y);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;PointF&nbsp;Pt4=Scr2OpenGL(tmpRect.Left,tmpRect.Top);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.TexCoord2(0.0f,0.0f);GL.Vertex2(Pt4.X,Pt4.Y);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.Disable(EnableCap.Blend);&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&lt;/span&gt;GL.End();&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;}&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;I&nbsp;read&nbsp;that&nbsp;to&nbsp;use&nbsp;QTMovie&nbsp;in&nbsp;a&nbsp;background&nbsp;thread&nbsp;I&nbsp;can&nbsp;follow&nbsp;the&nbsp;instructions&nbsp;in&nbsp;Technical&nbsp;Note&nbsp;TN2138,&nbsp;but&nbsp;I’m&nbsp;not&nbsp;an&nbsp;expert&nbsp;in&nbsp;Cocoa&nbsp;and&nbsp;objC&nbsp;programming&nbsp;and&nbsp;I&nbsp;can't&nbsp;understand&nbsp;how&nbsp;to&nbsp;use&nbsp;it&nbsp;in&nbsp;c&nbsp;#.&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;Can&nbsp;anyone&nbsp;give&nbsp;me&nbsp;some&nbsp;advice&nbsp;on&nbsp;how&nbsp;to&nbsp;solve&nbsp;this&nbsp;problem?&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
