<tt>
&lt;HTML&gt;&lt;BODY&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-khtml-nbsp-mode:&nbsp;space;&nbsp;-khtml-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Hi,&lt;BR&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;I'm&nbsp;trying&nbsp;to&nbsp;run&nbsp;some&nbsp;OpenGL&nbsp;samples&nbsp;on&nbsp;my&nbsp;MacBook&nbsp;Pro&nbsp;(CD),&nbsp;with&nbsp;mono 1.2.3.1,&nbsp;Tao&nbsp;Framework&nbsp;(2.0&nbsp;RC1)&nbsp;and&nbsp;cocoa-sharp.&nbsp;The&nbsp;only&nbsp;problem,&nbsp;so&nbsp;far,&nbsp;has&nbsp;been&nbsp;within&nbsp;the&nbsp;code&nbsp;for&nbsp;loading&nbsp;a&nbsp;bitmap&nbsp;as&nbsp;a&nbsp;texture.&nbsp;I&nbsp;created&nbsp;a&nbsp;256x256&nbsp;bitmap&nbsp;with&nbsp;an&nbsp;uniform&nbsp;background&nbsp;color&nbsp;(RGB&nbsp;values&nbsp;=&nbsp;33,&nbsp;66,&nbsp;99),&nbsp;but&nbsp;it&nbsp;does&nbsp;not&nbsp;load&nbsp;correctly.&nbsp;The&nbsp;problem&nbsp;is&nbsp;the&nbsp;array&nbsp;of&nbsp;bytes&nbsp;returned&nbsp;by&nbsp;the&nbsp;LockBits&nbsp;function.&nbsp;See&nbsp;the&nbsp;sample&nbsp;code:&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;//&nbsp;load&nbsp;the&nbsp;bmp&lt;/DIV&gt;&lt;DIV&gt;Drawing.Bitmap&nbsp;bitmap&nbsp;=&nbsp;new&nbsp;Drawing.Bitmap&nbsp;(&quot;oneColor.bmp&quot;);&lt;/DIV&gt;&lt;DIV&gt;//&nbsp;test&nbsp;that&nbsp;the&nbsp;bmp&nbsp;has&nbsp;been&nbsp;loaded&nbsp;correctly&lt;/DIV&gt;&lt;DIV&gt;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;10;&nbsp;++i)&nbsp;{&lt;/DIV&gt;&lt;DIV&gt;&lt;SPAN&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/SPAN&gt;Drawing.Color&nbsp;pixelColor&nbsp;= &lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Ayuthaya&quot;&nbsp;size=&quot;2&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;10px;&quot;&gt;bitmap.GetPixel&nbsp;(&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#FF0000&quot;&gt;i&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Ayuthaya&quot;&nbsp;size=&quot;2&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;10px;&quot;&gt;,&nbsp;0);&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Ayuthaya&quot;&nbsp;size=&quot;2&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;10px;&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/SPAN&gt;Console.WriteLine&nbsp;(&quot;RGB&nbsp;=&nbsp;{0}&nbsp;{1}&nbsp;{2}&nbsp;&quot;&nbsp;,&nbsp;pixelColor.R, pixelColor.G, pixelColor.B);&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Ayuthaya&quot;&nbsp;size=&quot;2&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;10px;&quot;&gt;}&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&gt;//&nbsp;so&nbsp;far&nbsp;so&nbsp;good,&nbsp;it&nbsp;prints&nbsp;the&nbsp;correct&nbsp;RGB&nbsp;values&nbsp;for&nbsp;10&nbsp;pixels&nbsp;(have&nbsp;tested&nbsp;it&nbsp;with&nbsp;the&nbsp;whole&nbsp;bitmap)&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;//&nbsp;to&nbsp;load&nbsp;a&nbsp;bitmap&nbsp;as&nbsp;a&nbsp;texture&nbsp;I&nbsp;need&nbsp;an&nbsp;IntPtr&nbsp;to&nbsp;the&nbsp;bytes,&nbsp;so&nbsp;a&nbsp;BitmapData&nbsp;object&nbsp;must&nbsp;be&nbsp;created&lt;/DIV&gt;&lt;DIV&gt;Drawing.Rectangle&nbsp;rect&nbsp;=&nbsp;new&nbsp;Drawing.Rectangle&nbsp;(0,&nbsp;0,&nbsp;bitmap.Width&nbsp;-&nbsp;1,&nbsp;bitmap.Height&nbsp;-&nbsp;1); //&nbsp;a&nbsp;Rect&nbsp;with&nbsp;the&nbsp;bitmap&nbsp;dimensions&nbsp;is&nbsp;needed&lt;/DIV&gt;&lt;DIV&gt;//&nbsp;lock&nbsp;bits&nbsp;for&nbsp;read-only&nbsp;operations&nbsp;with&nbsp;a&nbsp;specific&nbsp;format&nbsp;RGB,&nbsp;24&nbsp;bits&nbsp;no&nbsp;alpha&lt;/DIV&gt;&lt;DIV&gt;Drawing.Imaging.BitmapData&nbsp;bdata;&lt;/DIV&gt;&lt;DIV&gt;bdata =&nbsp;bitmap.LockBits(rect,&nbsp;Drawing.Imaging.ImageLockMode.ReadOnly,&nbsp;Drawing.Imaging.PixelFormat.Format24bppRgb);&lt;/DIV&gt;&lt;DIV&gt;//&nbsp;test&nbsp;the&nbsp;first&nbsp;150&nbsp;locked&nbsp;bytes&lt;/DIV&gt;&lt;DIV&gt;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;150;&nbsp;++i) &lt;/DIV&gt;&lt;DIV&gt;&lt;SPAN&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/SPAN&gt;Console.Write&nbsp;(Marshal.ReadByte&nbsp;(bdata.Scan0,&nbsp;i).ToString&nbsp;()&nbsp;+&nbsp;&quot;,&nbsp;&quot;);&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;The&nbsp;result&nbsp;is&nbsp;(formatted&nbsp;to&nbsp;show&nbsp;that&nbsp;a&nbsp;pattern&nbsp;exists):&lt;/DIV&gt;&lt;DIV&gt;99,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,255,33,255,&lt;/DIV&gt;&lt;DIV&gt;99,255,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,255,33,255,&lt;/DIV&gt;&lt;DIV&gt;99,255,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,255,&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;99,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,255,33,255,&lt;/DIV&gt;&lt;DIV&gt;99,255,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,255,33,255,&lt;/DIV&gt;&lt;DIV&gt;99,255,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,255,&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;99,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,255,33,255,&lt;/DIV&gt;&lt;DIV&gt;99,255,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,255,33,255,&lt;/DIV&gt;&lt;DIV&gt;99,255,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,33,255,255,&lt;/DIV&gt;&lt;DIV&gt;99,66,255,&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;I&nbsp;know&nbsp;that&nbsp;BMP&nbsp;files&nbsp;store&nbsp;BGR&nbsp;instead&nbsp;of&nbsp;RGB&nbsp;values,&nbsp;but&nbsp;this&nbsp;values&nbsp;do&nbsp;not&nbsp;make&nbsp;sense.&nbsp;I&nbsp;also&nbsp;tried&nbsp;with PixelFormat.Format32bppRgb&nbsp;and PixelFormat.Format32bppArgb,&nbsp;a&nbsp;slightly&nbsp;different&nbsp;pattern&nbsp;is&nbsp;printed,&nbsp;but&nbsp;it&nbsp;does&nbsp;have&nbsp;those&nbsp;255&nbsp;values&nbsp;all&nbsp;over&nbsp;the&nbsp;place.&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;Am&nbsp;I&nbsp;doing&nbsp;something&nbsp;wrong&nbsp;or&nbsp;is&nbsp;it&nbsp;a&nbsp;bug?&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;I&nbsp;can&nbsp;work&nbsp;around&nbsp;this&nbsp;&quot;bug&quot;&nbsp;with&nbsp;cocoa-sharp:&nbsp;creating&nbsp;a NSBitmapImageRep&nbsp;and&nbsp;reading&nbsp;its bitmapData&nbsp;property,&nbsp;which&nbsp;returns&nbsp;the&nbsp;correct&nbsp;values.&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;Regards,&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;Pedro&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;
</tt>
