<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] MonoMac: NSUrlConnection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20MonoMac%3A%20NSUrlConnection&In-Reply-To=AANLkTikG4_Z4yCfaEnde8VvOcUrVmUhDfAN8PBeg3iKt%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003021.html">
   <LINK REL="Next"  HREF="003023.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] MonoMac: NSUrlConnection</H1>
    <B>Duane Wandless</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20MonoMac%3A%20NSUrlConnection&In-Reply-To=AANLkTikG4_Z4yCfaEnde8VvOcUrVmUhDfAN8PBeg3iKt%40mail.gmail.com"
       TITLE="[Mono-osx] MonoMac: NSUrlConnection">duane at wandless.net
       </A><BR>
    <I>Sat Jul 17 12:40:29 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003021.html">[Mono-osx] MonoMac: NSUrlConnection
</A></li>
        <LI>Next message: <A HREF="003023.html">[Mono-osx] MonoMac: patch to add NSFileManager NSUrlDownload
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3022">[ date ]</a>
              <a href="thread.html#3022">[ thread ]</a>
              <a href="subject.html#3022">[ subject ]</a>
              <a href="author.html#3022">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok... the current handwritten method for SendSynchronousRequest does not
work.  I know it is not currently public but I wanted to figure out the
correct solution.

If you try to access the NSError object after, an exception is raised.
 Attached is a set of changes that will set the NSError object correctly.

You call it like this:
            NSURLResponse respUrl;
            NSError respErr = new NSError(NSObjectFlag.Empty);

            NSData data = NSUrlConnection.SendSynchronousRequest(m_urlReq,
out respUrl, respErr);

And the respErr.Handle is changed in the SendSync..Request method.  At least
for NSError you are required to pass the NSObjectFlag.Empty.

I think the binding should be the preferred solution.  So the attached diff
also changes the name of the selector so it does not clash with the binding.

And again the binding is:
[Static, Export (&quot;sendSynchronousRequest:returningResponse:error:&quot;)]
NSData SendSynchronousRequest (NSUrlRequest request, out NSUrlResponse
response, out NSError error);

Thanks,
Duane


On Sat, Jul 17, 2010 at 12:12 PM, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">miguel at novell.com</A>&gt; wrote:

&gt;<i>
</I>&gt;&gt;<i> The ByRefPostProcessing change I already submitted for generator.cs works
</I>&gt;&gt;<i> for binding NSError** as out NSError.  However it has one side affect that
</I>&gt;&gt;<i> you cannot choose to ignore the parameter.  Which I believe was at least
</I>&gt;&gt;<i> part of the motivation for the handwritten method.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The motivation was to have a working binding and this code is shared with
</I>&gt;<i> MonoTouch, so I want to keep it that way.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> I have the beginnings of a modification to generator.cs to bind NSError**
</I>&gt;&gt;<i> as ref NSError, instead of out NSError.  With this you are required to pass
</I>&gt;&gt;<i> in an object, but if you pass null the parameter is ignored.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> We are not going to support passing null for cases where we need an out or
</I>&gt;<i> ref.
</I>&gt;<i>
</I>&gt;<i> Miguel
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20100717/a011c255/attachment.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20100717/a011c255/attachment.html</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nsurlconnection.changes
Type: application/octet-stream
Size: 1579 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20100717/a011c255/attachment.obj">http://lists.ximian.com/pipermail/mono-osx/attachments/20100717/a011c255/attachment.obj</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003021.html">[Mono-osx] MonoMac: NSUrlConnection
</A></li>
	<LI>Next message: <A HREF="003023.html">[Mono-osx] MonoMac: patch to add NSFileManager NSUrlDownload
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3022">[ date ]</a>
              <a href="thread.html#3022">[ thread ]</a>
              <a href="subject.html#3022">[ subject ]</a>
              <a href="author.html#3022">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
