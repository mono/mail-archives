<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] Gtk# StatusIcon and Events
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20Gtk%23%20StatusIcon%20and%20Events&In-Reply-To=1279663411664-2296337.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003027.html">
   <LINK REL="Next"  HREF="003036.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] Gtk# StatusIcon and Events</H1>
    <B>KenKen</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20Gtk%23%20StatusIcon%20and%20Events&In-Reply-To=1279663411664-2296337.post%40n4.nabble.com"
       TITLE="[Mono-osx] Gtk# StatusIcon and Events">kenneth at hexad.dk
       </A><BR>
    <I>Sat Jul 24 05:29:41 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003027.html">[Mono-osx] Gtk# StatusIcon and Events
</A></li>
        <LI>Next message: <A HREF="003036.html">[Mono-osx] Gtk# StatusIcon and Events
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3035">[ date ]</a>
              <a href="thread.html#3035">[ thread ]</a>
              <a href="subject.html#3035">[ subject ]</a>
              <a href="author.html#3035">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I was asked off-list how to show the Gtk# NotifyIcon in one thread and run
WinForms in another.
The relevant source code can be found here (LGPL license):
<A HREF="http://code.google.com/p/duplicati/source/browse/sandboxes/Kenneth/MacSupport/Duplicati/GUI/TrayIconWrapper.cs">http://code.google.com/p/duplicati/source/browse/sandboxes/Kenneth/MacSupport/Duplicati/GUI/TrayIconWrapper.cs</A>

The code uses reflection to work with Gtk#, so the project can compile
without having Gtk# installed, and the comments show what the code would
look like without reflection.

Line 64 is commented out as that function is in a separate module. The
module should compile using the standard mscorlib and winforms dependencies.

It works by creating a proxy-like interface to a TrayIcon, and can be used
with &quot;TrayIcon icon = new TrayIcon();&quot; replaced by &quot;TrayIconWrapper icon =
new TrayIconWrapper(form);&quot;.

The trouble parts are line 156 and line 169 which do not get invoked while
on Mac. Everything else seems to work, but the code must call the Exit()
function to shutdown the Gtk# event loop.

I am planning to write a simple test without all the thread stuff, so I can
determine if it is a general problem, or related to my workaround.

Regards, Kenneth

-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Gtk-StatusIcon-and-Events-tp2295916p2300983.html">http://mono.1490590.n4.nabble.com/Gtk-StatusIcon-and-Events-tp2295916p2300983.html</A>
Sent from the Mono - OSX mailing list archive at Nabble.com.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003027.html">[Mono-osx] Gtk# StatusIcon and Events
</A></li>
	<LI>Next message: <A HREF="003036.html">[Mono-osx] Gtk# StatusIcon and Events
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3035">[ date ]</a>
              <a href="thread.html#3035">[ thread ]</a>
              <a href="subject.html#3035">[ subject ]</a>
              <a href="author.html#3035">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
