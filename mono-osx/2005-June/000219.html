<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] First Run.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20First%20Run.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000218.html">
   <LINK REL="Next"  HREF="000220.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] First Run.</H1>
    <B>Sean</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20First%20Run.&In-Reply-To="
       TITLE="[Mono-osx] First Run.">sean at tinfoilhat.ca
       </A><BR>
    <I>Fri Jun 10 02:53:00 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000218.html">[Mono-osx] Mono add-ons directory?
</A></li>
        <LI>Next message: <A HREF="000220.html">[Mono-osx] First Run.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#219">[ date ]</a>
              <a href="thread.html#219">[ thread ]</a>
              <a href="subject.html#219">[ subject ]</a>
              <a href="author.html#219">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

First of all I'm new to both Apple's and C#.
I've been asked to look into porting a C# application from VS.net to  
Mono.  To do that I have to first learn C# and decided to play around  
a bit.  I wrote up a small 'hello world' application and it works  
fine in Windows but it doesn't on OS X.

The program is trivial and I'm using the same compile command on both  
Windows and OS X.
I've installed mono-1.1.7 via the downloadable package.

Source for my test.cs:
using System.Windows.Forms;

class HellowWindowsForms {
         static void Main() {
                 System.Windows.Forms.MessageBox.Show(&quot;C# on OS X&quot;);
         }
}

My makefile:
test.app: test.exe
         macpack -a:test.exe -o:. -m:1 -n:test

test.exe: test.cs
         mcs test.cs -r:System.Windows.Forms.dll

clean:
         rm -rf test.app test.exe

I tried just running it like I do in windows:
     mono Test.exe

But I get the following error:
sean-codys-powerbook-g4-15:~/Documents/c# sean$ mono test.exe

Unhandled Exception: System.TypeInitializationException: An exception  
was thrown by the type initializer for MessageBoxForm ---&gt;  
System.Reflection.TargetInvocationException: Exception has been  
thrown by the target of an invocation. ---&gt;  
System.TypeInitializationException: An exception was thrown by the  
type initializer for System.Drawing.GDIPlus ---&gt;  
System.DllNotFoundException: /Library/Frameworks/Mono.framework/ 
Versions/1.1.7/lib/libgdiplus.dylib
in (wrapper managed-to-native) System.Drawing.GDIPlus:GdiplusStartup  
(ulong&amp;,System.Drawing.GdiplusStartupInput&amp;,System.Drawing.GdiplusStartu 
pOutput&amp;)
in &lt;0x0011c&gt; System.Drawing.GDIPlus:.cctor ()--- End of inner  
exception stack trace ---

in &lt;0x00000&gt; &lt;unknown method&gt;
in &lt;0x00110&gt; System.Drawing.Image:InitFromStream (System.IO.Stream  
stream)
in &lt;0x0010c&gt; System.Drawing.Image:InitFromStream (System.IO.Stream  
stream)
in (wrapper remoting-invoke-with-check)  
System.Drawing.Image:InitFromStream (System.IO.Stream)
in &lt;0x00164&gt; System.Drawing.Bitmap:.ctor  
(System.Runtime.Serialization.SerializationInfo info,  
StreamingContext context)
in &lt;0x00000&gt; &lt;unknown method&gt;
in (wrapper managed-to-native)  
System.Reflection.MonoCMethod:InternalInvoke (object,object[])
in &lt;0x000c8&gt; System.Reflection.MonoCMethod:Invoke (System.Object obj,  
BindingFlags invokeAttr, System.Reflection.Binder binder,  
System.Object[] parameters, System.Globalization.CultureInfo  
culture)--- End of inner exception stack trace ---

in &lt;0x00168&gt; System.Reflection.MonoCMethod:Invoke (System.Object obj,  
BindingFlags invokeAttr, System.Reflection.Binder binder,  
System.Object[] parameters, System.Globalization.CultureInfo culture)
in &lt;0x00048&gt; System.Reflection.MethodBase:Invoke (System.Object obj,  
System.Object[] parameters)
in &lt;0x00308&gt; System.Runtime.Serialization.ObjectRecord:LoadData  
(System.Runtime.Serialization.ObjectManager manager,  
ISurrogateSelector selector, StreamingContext context)
in &lt;0x00184&gt; System.Runtime.Serialization.ObjectManager:DoFixups ()
in &lt;0x00070&gt;  
System.Runtime.Serialization.Formatters.Binary.ObjectReader:ReadNextObje 
ct (System.IO.BinaryReader reader)
in &lt;0x000fc&gt;  
System.Runtime.Serialization.Formatters.Binary.ObjectReader:ReadObjectGr 
aph (System.IO.BinaryReader reader, Boolean readHeaders,  
System.Object result, System.Runtime.Remoting.Messaging.Header[]  
headers)
in &lt;0x001b8&gt;  
System.Runtime.Serialization.Formatters.Binary.BinaryFormatter:Deseriali 
ze (System.IO.Stream serializationStream,  
System.Runtime.Remoting.Messaging.HeaderHandler handler)
in &lt;0x0002c&gt;  
System.Runtime.Serialization.Formatters.Binary.BinaryFormatter:Deseriali 
ze (System.IO.Stream serializationStream)
in &lt;0x007d8&gt; System.Resources.ResourceReader:ResourceValue (Int32 index)
in &lt;0x00044&gt; System.Resources.ResourceReader 
+ResourceEnumerator:get_Value ()
in &lt;0x000ec&gt; System.Resources.ResourceSet:ReadResources ()
in &lt;0x00074&gt; System.Resources.ResourceSet:GetObject (System.String  
name, Boolean ignoreCase)
in &lt;0x000d4&gt; System.Resources.ResourceManager:GetObject  
(System.String name, System.Globalization.CultureInfo culture)
in &lt;0x00034&gt; System.Resources.ResourceManager:GetObject  
(System.String name)
in &lt;0x00038&gt; System.Windows.Forms.Locale:GetResource (System.String  
name)
in &lt;0x00028&gt; System.Windows.Forms.MessageBox+MessageBoxForm:.cctor  
()--- End of inner exception stack trace ---

in &lt;0x00000&gt; &lt;unknown method&gt;
in &lt;0x00058&gt; System.Windows.Forms.MessageBox:Show (System.String text)
in &lt;0x00054&gt; System.Windows.Forms.MessageBox:Show (System.String text)
in &lt;0x00014&gt; HellowWindowsForms:Main ()

I thought maybe I was missing a parameter or something in either the  
compile or the invocation but I tried the same code and commands on  
my PC and it works just fine and the message box just pops up.

With some searching I found the following link:
<A HREF="http://galactus.ximian.com/pipermail/mono-list/2005-February/026053.html">http://galactus.ximian.com/pipermail/mono-list/2005-February/026053.html</A>
<A HREF="http://www.mail-archive.com/mono-winforms-list@lists.ximian.com/">http://www.mail-archive.com/mono-winforms-list@lists.ximian.com/</A> 
msg00137.html

I added:
export DYLD_LIBRARY_PATH=/Library/Frameworks/Mono.framework/Versions/ 
1.1.7/lib
to my shell environment and remade the 'binary'.

Then I ran test.app via:
open ./test.app

The following errors occurred:
sean-codys-powerbook-g4-15:~/Documents/c# sean$ open ./test.app
dyld: Symbol not found: __cg_jpeg_resync_to_restart
   Referenced from: /System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/ImageIO
   Expected in: /Library/Frameworks/Mono.framework/Versions/1.1.7/ 
lib//libJPEG.dylib

Trace/BPT trap

I look a look in the library path and noticed I do have libjpeg.dylib  
but not libJPEG.dylib.  I thought this was a 'case sensitive' issue  
so I tried making a symlink but 'ln' wouldn't allow me to as it said  
the file already existed (which it only does in lowercase instance).

Any ideas what I can try next?
I apologize for being clueless with not only C# but with OS X as well.

-- 
Sean




</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000218.html">[Mono-osx] Mono add-ons directory?
</A></li>
	<LI>Next message: <A HREF="000220.html">[Mono-osx] First Run.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#219">[ date ]</a>
              <a href="thread.html#219">[ thread ]</a>
              <a href="subject.html#219">[ subject ]</a>
              <a href="author.html#219">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
