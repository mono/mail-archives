<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] NObjective and Inheritance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20NObjective%20and%20Inheritance&In-Reply-To=22092432.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002013.html">
   <LINK REL="Next"  HREF="002025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] NObjective and Inheritance</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20NObjective%20and%20Inheritance&In-Reply-To=22092432.post%40talk.nabble.com"
       TITLE="[Mono-osx] NObjective and Inheritance">kumpera at gmail.com
       </A><BR>
    <I>Wed Feb 18 21:31:11 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002013.html">[Mono-osx] NObjective and Inheritance
</A></li>
        <LI>Next message: <A HREF="002025.html">[Mono-osx]  Compiling Ent. Library on OSX and Mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2014">[ date ]</a>
              <a href="thread.html#2014">[ thread ]</a>
              <a href="subject.html#2014">[ subject ]</a>
              <a href="author.html#2014">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Feb 18, 2009 at 10:48 PM, Eugeny Grishul
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">eugeny.grishul at gmail.com</A>&gt;wrote:

&gt;<i>
</I>&gt;<i> Hi Martin!
</I>&gt;<i>
</I>&gt;<i> 2Rodrigo:
</I>&gt;<i> &gt;Encoding a OO type hierarchy using valuetypes is plain wrong.
</I>&gt;<i> What about C++? Each class and struct is a value type but with inheritance
</I>&gt;<i> ability (and some others). Are programmers that designing their apps in C++
</I>&gt;<i> wrong?. Value types is most efficient way to combine memory management
</I>&gt;<i> schemes of Objective-C and Mono (see perftest on NObjective's main page).
</I>

&gt;<i>From a type safe perspective, subtyping and valuetypes simply don't match.
</I>C++
is a good example of an incredibly broken language - type slicing is a good
example
of how brain-dead the language is when it comes to type safety.

The core issue is that subtyping requires reference semantics to be safe and
provable correct.

Correctness comes first of performance.


&gt;<i> Some of users told me that they don't want to attach to the Objective-C
</I>&gt;<i> object using managed counterpart, but want work with it as raw pointer.
</I>&gt;<i> Only
</I>&gt;<i> value types can provide such ability.
</I>&gt;<i>
</I>
Well, they can always use IntPtr for that. No need for any hackery.


&gt;<i> &gt;It's not a bug in mono, the CLR is designed this way and there is no
</I>&gt;<i> compeling reason to implement such broken behavior.
</I>&gt;<i> Mono bug is crashes while accessing of virtual methods of boxed object that
</I>&gt;<i> not derived from ValueType/Enum. CLR ( CLR = MS CLI implementation ) able
</I>&gt;<i> to
</I>&gt;<i> run such code and I have no idea why Mono JIT team can't emulate such
</I>&gt;<i> behaviour. Also CLR runtime verifier accepts such code coz it's VALID CIL
</I>&gt;<i> (but not verifiable).
</I>&gt;<i>
</I>
This is simply not true. A simple example shows you the opposite [1]. The
issue
is that your're abusing the CTS and the standard make guarantees on what
happens
when executing such code.

But OTOH, we are always open to contributions from the community in case you
want to fix mono.



&gt;<i>
</I>&gt;<i> Mono internally used a thousands of different hacks so using of vtypes not
</I>&gt;<i> directly inherited from ValueType/Enum isn't criminal.
</I>&gt;<i>
</I>

This is not an argument, it's an excuse.

Cheers,
Rodrigo


[1] As for:
public interface Foo {
    int Value();
}

public struct Bar : Foo {
    int val;
    public Bar(int x) { this.val = x; }

    public int Value() {
        return val;
    }
}

public class Driver {
    static void Main () {
        Foo f = new Bar (10);
        Console.WriteLine (f.Value ());

    }
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20090218/8e61473b/attachment.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20090218/8e61473b/attachment.html</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002013.html">[Mono-osx] NObjective and Inheritance
</A></li>
	<LI>Next message: <A HREF="002025.html">[Mono-osx]  Compiling Ent. Library on OSX and Mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2014">[ date ]</a>
              <a href="thread.html#2014">[ thread ]</a>
              <a href="subject.html#2014">[ subject ]</a>
              <a href="author.html#2014">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
