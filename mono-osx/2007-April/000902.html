<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] An open letter to the OS X Mono group.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20An%20open%20letter%20to%20the%20OS%20X%20Mono%20group.&In-Reply-To=20070407053047.GC25514%40mindpirate.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000901.html">
   <LINK REL="Next"  HREF="000903.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] An open letter to the OS X Mono group.</H1>
    <B>Andreas F&#228;rber</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20An%20open%20letter%20to%20the%20OS%20X%20Mono%20group.&In-Reply-To=20070407053047.GC25514%40mindpirate.local"
       TITLE="[Mono-osx] An open letter to the OS X Mono group.">andreas.faerber at web.de
       </A><BR>
    <I>Sat Apr  7 07:49:07 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000901.html">[Mono-osx] An open letter to the OS X Mono group.
</A></li>
        <LI>Next message: <A HREF="000903.html">[Mono-osx] An open letter to the OS X Mono group.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#902">[ date ]</a>
              <a href="thread.html#902">[ thread ]</a>
              <a href="subject.html#902">[ subject ]</a>
              <a href="author.html#902">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Am 07.04.2007 um 07:30 schrieb Louis R. Marascio:

&gt;<i> Andreas Frber &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">andreas.faerber at web.de</A>&gt; wrote:
</I>&gt;&gt;<i> Is System.IO.FileSystemWatcher not a supported feature then? As
</I>&gt;&gt;<i> reported, it is not working fine:
</I>&gt;&gt;<i> <A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=80564">http://bugzilla.ximian.com/show_bug.cgi?id=80564</A>
</I>&gt;&gt;<i> Yet no-one is showing any interest in helping me fix this for Mac OS
</I>&gt;&gt;<i> X... I needed to move part of my application to a Solaris server
</I>&gt;&gt;<i> instead.
</I>&gt;<i>
</I>&gt;<i> For some reason I've been spending my Friday night poking at this bug
</I>&gt;<i> trying to determine some type of pattern.
</I>&gt;<i>
</I>&gt;<i> It appears that Created and Deleted events are generated properly but
</I>&gt;<i> Changed events are not. For example, using your test case I get no
</I>&gt;<i> Changed events. I wrote a stand alone program to monitor the current
</I>&gt;<i> directory and if I run that program and then cat or echo into a file,
</I>&gt;<i> no Changed event fires; however, if I use vi to edit a file and then
</I>&gt;<i> save it I do get a Changed event. Go figure...
</I>&gt;<i>
</I>&gt;<i> I'll attach my additional test program and notes to the bug.
</I>
Thanks.

My findings seemed to indicate that the root of these problems was  
deeper than the firing of the managed events: Using test code I  
shared with Geoff a change to a file (length, contents, last write)  
did not trigger a kevent event on the directory's file descriptor. I  
would be fine with a solution like in my test implementation where I  
determine whether a directory or a single file should be monitored  
and then use the respective file descriptor for kevent.

The remaining problem then is: How do we handle wildcards? Currently  
we have a 1:1 mapping of FileSystemWatchers to file descriptors. But  
what if a user wants to monitor a directory with hundreds of files?  
The commented out part of my test implementation shows that we are  
limited to 255 open file descriptors in whole. According to my  
reading this is what Linux software like inotify and the like handle  
- but nothing comparable seems to be available for OS X except some  
hacky ways of accessing the undocumented internals of Tiger's  
Spotlight engine. And Finder's FSNotify seems to be an even worse way  
of detecting changes. So kevent seems to be our best bet for now -  
it's just the question of how to use it.

I remember reading a reference to XSP in the ChangeLog so this is  
likely to affect Mono's ASP.NET implementation, not just some  
minor .NET based applications.

Andreas
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000901.html">[Mono-osx] An open letter to the OS X Mono group.
</A></li>
	<LI>Next message: <A HREF="000903.html">[Mono-osx] An open letter to the OS X Mono group.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#902">[ date ]</a>
              <a href="thread.html#902">[ thread ]</a>
              <a href="subject.html#902">[ subject ]</a>
              <a href="author.html#902">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
