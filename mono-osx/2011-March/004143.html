<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] [MonoMac] Random casting related crashes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20Random%20casting%20related%20crashes&In-Reply-To=9BE467ED-E3D7-4BBB-ABF9-792861CB580A%40joemattiello.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004142.html">
   <LINK REL="Next"  HREF="004145.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] [MonoMac] Random casting related crashes</H1>
    <B>Geoff Norton</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20Random%20casting%20related%20crashes&In-Reply-To=9BE467ED-E3D7-4BBB-ABF9-792861CB580A%40joemattiello.com"
       TITLE="[Mono-osx] [MonoMac] Random casting related crashes">gnorton at novell.com
       </A><BR>
    <I>Wed Mar  9 12:31:36 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004142.html">[Mono-osx] [MonoMac] Random casting related crashes
</A></li>
        <LI>Next message: <A HREF="004145.html">[Mono-osx] Accessing MainWindowController from MainWindow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4143">[ date ]</a>
              <a href="thread.html#4143">[ thread ]</a>
              <a href="subject.html#4143">[ subject ]</a>
              <a href="author.html#4143">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Could you please make a test case and file a bug so I can take a look?

Thanks

-g

On 2011-03-09, at 11:58 AM, Mattiello Joseph wrote:

&gt;<i> Over the course of testing a new app written with a MonoMac GUI we've been experiencing sporadic crashes apparently related to invalid type casting. We haven't been able to pin point an exact source so I'm curious if others have experienced the same issue or have any thoughts.
</I>&gt;<i> 
</I>&gt;<i> This has been occurring over the course of a couple of months and we regularly update our libs Mono from binary releases and MonoMac from git.
</I>&gt;<i> 
</I>&gt;<i> Some examples:
</I>&gt;<i> 	#1 &amp; #2 are in event loops and get fired very frequently and only a handful of crashes have been reported, so the occurrences are somewhat rare but often enough to be of concern.
</I>&gt;<i> 
</I>&gt;<i> 1)
</I>&gt;<i> 
</I>&gt;<i>               	NSEventMask mask = NSEventMask.AnyEvent;
</I>&gt;<i>                 NSApplication app = NSApplication.SharedApplication;
</I>&gt;<i>     
</I>&gt;<i>                 NSEvent evt = app.NextEvent(mask, NSDate.DistantPast, NSRunLoop.NSDefaultRunLoopMode, true);
</I>&gt;<i>    Exception Source:      MonoMac
</I>&gt;<i>    Exception Type:        System.InvalidCastException
</I>&gt;<i>    Exception Target Site: NSApplication.NextEvent
</I>&gt;<i>    Exception Message:     Cannot cast from source type to destination type.
</I>&gt;<i>    Exception Data:        none
</I>&gt;<i> 
</I>&gt;<i>    --[ Stack Trace ]------------
</I>&gt;<i>    MonoMac.AppKit.NSApplication.NextEvent(NSEventMask mask, NSDate expiration, String mode, Boolean deqFlag)
</I>&gt;<i> 
</I>&gt;<i> 2)
</I>&gt;<i> 
</I>&gt;<i>   NSApplication.SharedApplication.NextEvent(NSEventMask.AnyEvent,
</I>&gt;<i>                                                                   NSDate.FromTimeIntervalSinceNow((double)wait / 1000.0),
</I>&gt;<i>                                                                   NSRunLoop.NSDefaultRunLoopMode,
</I>&gt;<i>                                                                   false);
</I>&gt;<i> 
</I>&gt;<i>    Exception Source:      MonoMac
</I>&gt;<i>    Exception Type:        System.InvalidCastException
</I>&gt;<i>    Exception Target Site: NSDate.FromTimeIntervalSinceNow
</I>&gt;<i>    Exception Message:     Cannot cast from source type to destination type.
</I>&gt;<i>    Exception Data:        none
</I>&gt;<i> 
</I>&gt;<i>    --[ Stack Trace ]------------
</I>&gt;<i>    MonoMac.Foundation.NSDate.FromTimeIntervalSinceNow(Double secs)
</I>&gt;<i> 
</I>&gt;<i> 3)
</I>&gt;<i>        foreach (string path in NSWorkspace.SharedWorkspace.MountedLocalVolumePaths)
</I>&gt;<i> 
</I>&gt;<i>    Exception Source:      MonoMac
</I>&gt;<i>    Exception Type:        System.InvalidCastException
</I>&gt;<i>    Exception Target Site: NSWorkspace.get_NotificationCenter
</I>&gt;<i>    Exception Message:     Cannot cast from source type to destination type.
</I>&gt;<i>    Exception Data:        none
</I>&gt;<i> 
</I>&gt;<i>    --[ Stack Trace ]------------
</I>&gt;<i>    MonoMac.AppKit.NSWorkspace.get_NotificationCenter()
</I>&gt;<i> 
</I>&gt;<i> Thanks for any feedback
</I>&gt;<i> -Joe
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-osx mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">Mono-osx at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">http://lists.ximian.com/mailman/listinfo/mono-osx</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-osx/attachments/20110309/267239c1/attachment.html">http://lists.ximian.com/pipermail/mono-osx/attachments/20110309/267239c1/attachment.html</A> 
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004142.html">[Mono-osx] [MonoMac] Random casting related crashes
</A></li>
	<LI>Next message: <A HREF="004145.html">[Mono-osx] Accessing MainWindowController from MainWindow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4143">[ date ]</a>
              <a href="thread.html#4143">[ thread ]</a>
              <a href="subject.html#4143">[ subject ]</a>
              <a href="author.html#4143">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
