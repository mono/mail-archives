<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] [MonoMac] A few new patches
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20A%20few%20new%20patches&In-Reply-To=AANLkTi%3De1qrK%3DPhS-k-ZfBBeMqd08RayGp6RrSyv5qdC%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004162.html">
   <LINK REL="Next"  HREF="004176.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] [MonoMac] A few new patches</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20A%20few%20new%20patches&In-Reply-To=AANLkTi%3De1qrK%3DPhS-k-ZfBBeMqd08RayGp6RrSyv5qdC%40mail.gmail.com"
       TITLE="[Mono-osx] [MonoMac] A few new patches">miguel at novell.com
       </A><BR>
    <I>Mon Mar 14 13:53:16 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004162.html">[Mono-osx] [MonoMac] A few new patches
</A></li>
        <LI>Next message: <A HREF="004176.html">[Mono-osx] [MonoMac] A few new patches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4165">[ date ]</a>
              <a href="thread.html#4165">[ thread ]</a>
              <a href="subject.html#4165">[ subject ]</a>
              <a href="author.html#4165">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Regan,

    Thanks for this fabulous list of patches:

&gt;<i> 1) The monomac build from git is broken (at least for me: OSX 10.6.6, mono
</I>&gt;<i> 2.10.1.0). Seems some changes
</I>&gt;<i> to&#160;maccore/src/CoreMedia/CMSampleBuffer.cs&#160;requires CoreMedia on
</I>&gt;<i> monomac,&#160;However CoreMedia is not a public framework on OSX.
</I>&gt;<i> &#160;coremedia.patch (for monomac) fixes this by adding a path in
</I>&gt;<i> monomac/src/Constants.cs&#160;to a private framework, but it may be better to
</I>&gt;<i> revisit CMSampleBuffer.cs.
</I>
Applied.

&gt;<i> 2) NSFileManager.patch&#160;(for maccore)&#160;adds the 'Url' methods to the
</I>&gt;<i> NSFileManager type in maccore/src/foundation.cs and some supporting enums.
</I>&gt;<i> &#160;These are new in iOS 4, and have been attributed with [Since(4,0)], however
</I>&gt;<i> if you would prefer to only have them in monomac, I can surround with an
</I>&gt;<i> #ifdef
</I>
Applied.

&gt;<i> 3) I think I finally understand the Drag/Drop classes for monomac, and have
</I>&gt;<i> provided dragging.patch&#160;(for monomac)&#160;with the appropriate changes to
</I>&gt;<i> appkit.cs. &#160;In essence the messages that are sent to delegates that might
</I>&gt;<i> respond to 'drag events' are sent an object that implements NSDraggingInfo.
</I>&gt;<i> &#160;NSDraggingInfo is a protocol, but implementing this as a [Model] does not
</I>&gt;<i> work because this object is not created by clients, and the runtime cannot
</I>&gt;<i> cast the actual object created by appkit to the C# class. &#160;Drag and Drop
</I>&gt;<i> Programming Topics for Cocoa&#160;mentions that the&#160;system creates an
</I>&gt;<i> undocumented NSDragDestination object which implements&#160;NSDraggingInfo.
</I>&gt;<i> &#160;Since the docs refer to NSDraggingInfo and not NSDragDestination, and since
</I>&gt;<i> NSDraggingInfo is a more descriptive name, it is used in appkit.cs, and the
</I>&gt;<i> Name attribute is used to register NSDraggingInfo to NSDragDestination. &#160;I
</I>&gt;<i> tested this with NSDraggingDestination and NSBrowserDelegate, and all seems
</I>&gt;<i> well. &#160;It could be improved by privatizing the constructors for
</I>&gt;<i> NSDraggingInfo.
</I>
Could you contribute a sample that shows this?

The other thing to keep in mind is that this is an area that got
revisited in Lion, would you mind checking the documentation for Lion,
because I get the feeling that they improved things in this area.

&gt;<i> 5) sample.patch eliminates some warnings and errors from the monomac
</I>&gt;<i> samples. &#160;It relies on NSFileManager.patch. &#160;pretty minor stuff, but it is
</I>&gt;<i> nice to have samples that build without warnings/errors. &#160;There is an issue
</I>&gt;<i> with the macdoc sample, but It may be specific to me. &#160;The sample gives
</I>&gt;<i> errors when built from the command line (make/mdtools), but builds fine from
</I>&gt;<i> MonoDevelop.
</I>
The removal of the timer means that we can call destroy when the timer
gets GCed, so it would terminate the timer after a GC pass.

Miguel
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004162.html">[Mono-osx] [MonoMac] A few new patches
</A></li>
	<LI>Next message: <A HREF="004176.html">[Mono-osx] [MonoMac] A few new patches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4165">[ date ]</a>
              <a href="thread.html#4165">[ thread ]</a>
              <a href="subject.html#4165">[ subject ]</a>
              <a href="author.html#4165">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
