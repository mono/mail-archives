<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] MonoMac and OpenTK?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20MonoMac%20and%20OpenTK%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003948.html">
   <LINK REL="Next"  HREF="003951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] MonoMac and OpenTK?</H1>
    <B>ajselvig</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20MonoMac%20and%20OpenTK%3F&In-Reply-To="
       TITLE="[Mono-osx] MonoMac and OpenTK?">ajselvig at gmail.com
       </A><BR>
    <I>Thu Feb  3 23:23:04 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003948.html">[Mono-osx] Packager System version targets?
</A></li>
        <LI>Next message: <A HREF="003951.html">[Mono-osx] MonoMac and OpenTK?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3949">[ date ]</a>
              <a href="thread.html#3949">[ thread ]</a>
              <a href="subject.html#3949">[ subject ]</a>
              <a href="author.html#3949">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Has anyone had any success using MonoMac with an NSOpenGLView (assumedly
along with OpenTK)? I made a naive attempt at getting to work by subclassing
NSOpenGLView, creating an OpenTK dummy context in PrepareOpenGL(), and
calling some rendering code in Update(). However, I haven't been able to get
this to do anything except: 
 - throw a NullReferenceException in the first OpenTK call, or
 - throw a System.InvalidOperationException: No GraphicsContext is current
on the calling thread.

The subclass code I'm using is below. Has anyone had any luck integrating
these two? If someone can get me pointed in the right direction, I'd be
interested in contributing a tutorial once I get it working.

Thanks.

	public class GlView : NSOpenGLView
	{
		public GlView() : base(new RectangleF(0, 0, 200, 200),
NSOpenGLView.DefaultPixelFormat)
		{
			
		}
		
		public GraphicsContext Context {
			get;
			set;
		}
		
		public override void PrepareOpenGL()
		{
			base.PrepareOpenGL();
			OpenGLContext.MakeCurrentContext();
			
			// this throws: NullReferenceException
			Context = GraphicsContext.CreateDummyContext(new
ContextHandle(OpenGLContext.CGLContextObj));
			
			// this throws: No GraphicsContext is current on the calling thread
			//Context = GraphicsContext.CreateDummyContext();
		}
		
		public override void Reshape()
		{
			base.Reshape();
			GL.Clear(ClearBufferMask.ColorBufferBit);
			
		}
		
		public override void Update ()
		{
			base.Update ();
			OpenGLContext.MakeCurrentContext();
			
			Console.WriteLine (&quot;update&quot;);
			
			GL.MatrixMode(MatrixMode.Modelview);
			GL.LoadIdentity();
			
			GL.Color3(1f, 0f, 0f);
			GL.Begin(BeginMode.Lines);
			GL.Vertex2(0, 0);
			GL.Vertex2(150, 100);
			GL.End();
		}		
	}
-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/MonoMac-and-OpenTK-tp3259455p3259455.html">http://mono.1490590.n4.nabble.com/MonoMac-and-OpenTK-tp3259455p3259455.html</A>
Sent from the Mono - OSX mailing list archive at Nabble.com.
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003948.html">[Mono-osx] Packager System version targets?
</A></li>
	<LI>Next message: <A HREF="003951.html">[Mono-osx] MonoMac and OpenTK?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3949">[ date ]</a>
              <a href="thread.html#3949">[ thread ]</a>
              <a href="subject.html#3949">[ subject ]</a>
              <a href="author.html#3949">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
