<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-osx] [MonoMac] MM Add-in templates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20MM%20Add-in%20templates&In-Reply-To=AANLkTikwbfEV-%2BGTYJbxf8OLOyGt9hCQqW90b%2BsW-PZe%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="003912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-osx] [MonoMac] MM Add-in templates</H1>
    <B>kjpou</B> 
    <A HREF="mailto:mono-osx%40lists.ximian.com?Subject=%5BMono-osx%5D%20%5BMonoMac%5D%20MM%20Add-in%20templates&In-Reply-To=AANLkTikwbfEV-%2BGTYJbxf8OLOyGt9hCQqW90b%2BsW-PZe%40mail.gmail.com"
       TITLE="[Mono-osx] [MonoMac] MM Add-in templates">kjpou at pt.lu
       </A><BR>
    <I>Tue Feb  1 00:08:59 EST 2011</I>
    <P><UL>
        
        <LI>Next message: <A HREF="003912.html">[Mono-osx] [MonoMac] MM Add-in templates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3911">[ date ]</a>
              <a href="thread.html#3911">[ thread ]</a>
              <a href="subject.html#3911">[ subject ]</a>
              <a href="author.html#3911">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael

For my understanding.

So instead of creating the MyCustomView.cs directly in project structure 
itself that is then overridden we will create an MyCustomView.cs file 
within the NIB file structure?  So to actually see the MyCustomView.cs 
file you would have the following:

 &gt;MainWindow.xib
--&gt;MainWindow.cs
--&gt;MainWindow.xib.designer.cs
--&gt;MainWindowController.cs
--&gt;MyCustomView.cs

Like that?

Kenneth


On 1/31/11 8:05 PM, Michael Hutchinson wrote:
&gt;<i> On Sat, Jan 29, 2011 at 2:48 AM, kjpou&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-osx">kjpou at pt.lu</A>&gt;  wrote:
</I>&gt;&gt;<i> Michael
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> See below the responses.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 1/28/11 8:03 PM, Michael Hutchinson wrote:
</I>&gt;&gt;&gt;<i> I see, so you are defining the class in the nib file, not just using
</I>&gt;&gt;&gt;<i> it. There are two problems with this:
</I>&gt;&gt;&gt;<i> * you cannot use your custom view in more than one nib file, since the
</I>&gt;&gt;&gt;<i> register will be generated in both vases.
</I>&gt;&gt;&gt;<i> * the C# namespace of the nib's designer class and the the custom view
</I>&gt;&gt;&gt;<i> will have to match.
</I>&gt;&gt;&gt;<i> * the class is partial across two locations with no intuitive
</I>&gt;&gt;&gt;<i> relationship.
</I>&gt;&gt;<i> Yes that is correct.  Also for my short samples it was a lot easier to do it
</I>&gt;&gt;<i> that way.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The &quot;correct&quot; solution to this is nonpartial class with register
</I>&gt;&gt;&gt;<i> attribute, but in order to work completely smoothly it would
</I>&gt;&gt;&gt;<i> necessitate two nontrivial features:
</I>&gt;&gt;&gt;<i> * have MD synch classes defined in C# code into the nib files.
</I>&gt;&gt;<i> This would be more Apple'ish for people coming over to MM from Obj-c.  I
</I>&gt;&gt;<i> personally do not see a problem with the way it is implemented now.
</I>&gt;&gt;<i>   Actually I kind of like it.  It is not as automated as XCode but I
</I>&gt;&gt;<i> personally feel more in control.  The only thing I see is the namespace
</I>&gt;&gt;<i> problem.  I have not done a large project yet with MM so am limited here.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> * have the MD code generator use the project type database to resolve
</I>&gt;&gt;&gt;<i> obj-c types to types registered in C# in the project and libraries,
</I>&gt;&gt;&gt;<i> not just MonoMac.dll (I have some proof of concept code for this if
</I>&gt;&gt;&gt;<i> anyone else want to take it on).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> That could be as well.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The problem I see with it is that once you start adding outlets and actions
</I>&gt;&gt;<i> on a custom NSView from IB they automatically get registered in the
</I>&gt;&gt;<i> designer.  For example a custom NSView called MyBackView  I did not define
</I>&gt;&gt;<i> the MyBackView as a subclass of NSView in the Nib file just changed the type
</I>&gt;&gt;<i> to be MyBackView.  The following is what is generated in the designer class.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     // Should subclass MonoMac.Foundation.NSObject
</I>&gt;&gt;<i>     [MonoMac.Foundation.Register(&quot;MyBackView&quot;)]
</I>&gt;&gt;<i>     public partial class MyBackView {
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         private global::MonoMac.AppKit.NSButton __mt_myButton;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         private global::MonoMac.AppKit.NSTextField __mt_myLabel;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         #pragma warning disable 0169
</I>&gt;&gt;<i>         [MonoMac.Foundation.Export(&quot;buttonAction:&quot;)]
</I>&gt;&gt;<i>         partial void buttonAction (MonoMac.AppKit.NSButton sender);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         [MonoMac.Foundation.Export(&quot;myButtonAction:&quot;)]
</I>&gt;&gt;<i>         partial void myButtonAction (MonoMac.AppKit.NSButton sender);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         [MonoMac.Foundation.Connect(&quot;myButton&quot;)]
</I>&gt;&gt;<i>         private global::MonoMac.AppKit.NSButton myButton {
</I>&gt;&gt;<i>             get {
</I>&gt;&gt;<i>                 this.__mt_myButton =
</I>&gt;&gt;<i> ((global::MonoMac.AppKit.NSButton)(this.GetNativeField(&quot;myButton&quot;)));
</I>&gt;&gt;<i>                 return this.__mt_myButton;
</I>&gt;&gt;<i>             }
</I>&gt;&gt;<i>             set {
</I>&gt;&gt;<i>                 this.__mt_myButton = value;
</I>&gt;&gt;<i>                 this.SetNativeField(&quot;myButton&quot;, value);
</I>&gt;&gt;<i>             }
</I>&gt;&gt;<i>         }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         [MonoMac.Foundation.Connect(&quot;myLabel&quot;)]
</I>&gt;&gt;<i>         private global::MonoMac.AppKit.NSTextField myLabel {
</I>&gt;&gt;<i>             get {
</I>&gt;&gt;<i>                 this.__mt_myLabel =
</I>&gt;&gt;<i> ((global::MonoMac.AppKit.NSTextField)(this.GetNativeField(&quot;myLabel&quot;)));
</I>&gt;&gt;<i>                 return this.__mt_myLabel;
</I>&gt;&gt;<i>             }
</I>&gt;&gt;<i>             set {
</I>&gt;&gt;<i>                 this.__mt_myLabel = value;
</I>&gt;&gt;<i>                 this.SetNativeField(&quot;myLabel&quot;, value);
</I>&gt;&gt;<i>             }
</I>&gt;&gt;<i>         }
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When you say non trivial in my opinion it is going to take a rethink of the
</I>&gt;&gt;<i> whole process.  I do not know how it is all glued together so am not able to
</I>&gt;&gt;<i> see the whole picture.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When we start going outside of IB we are going to have to start doing all of
</I>&gt;&gt;<i> this in code by hand.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> An option could be have two different templates.  One for use cases such as
</I>&gt;&gt;<i> this and another for when you want to create a non partial class to be used
</I>&gt;&gt;<i> programatically.  Would that be confusing for developers?  Maybe maybe not.
</I>&gt;<i> The thing I have a problem with is that the class is effectively
</I>&gt;<i> defined by a nib and the nib's designer code file, yet its other part
</I>&gt;<i> is kept completely separate from them. It would be *much* better if it
</I>&gt;<i> were grouped under the nib file.
</I>&gt;<i>
</I>&gt;<i> Maybe you could add a context menu command to nib files that would
</I>&gt;<i> offer to add a partial class file for any classes defined in the nib
</I>&gt;<i> that did not already have non-designer parts. This would be a much
</I>&gt;<i> more solid approach IMO, and not very hard to implement.
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="003912.html">[Mono-osx] [MonoMac] MM Add-in templates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3911">[ date ]</a>
              <a href="thread.html#3911">[ thread ]</a>
              <a href="subject.html#3911">[ subject ]</a>
              <a href="author.html#3911">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-osx">More information about the Mono-osx
mailing list</a><br>
</body></html>
