<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;<br>
&lt;div&gt;Hey&nbsp;guys,&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
Exposing&nbsp;signal&nbsp;handlers&nbsp;from&nbsp;managed&nbsp;code&nbsp;is&nbsp;always&nbsp;the&nbsp;wrong&nbsp;solution.<br>
&lt;div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;If&nbsp;we're&nbsp;crashing&nbsp;in&nbsp;the&nbsp;runtime,&nbsp;a&nbsp;managed&nbsp;code&nbsp;signal&nbsp;handler&nbsp;has&nbsp;very&nbsp;little&nbsp;chance&nbsp;of&nbsp;works.&nbsp;It's&nbsp;a&nbsp;scenario&nbsp;we&nbsp;will&nbsp;never&nbsp;even&nbsp;consider&nbsp;supporting.&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;guess&nbsp;the&nbsp;simple&nbsp;solution&nbsp;is&nbsp;to&nbsp;add&nbsp;an&nbsp;embedding&nbsp;API&nbsp;call&nbsp;that&nbsp;queues&nbsp;signal&nbsp;handlers&lt;/div&gt;<br>
&lt;div&gt;to&nbsp;be&nbsp;called&nbsp;first&nbsp;before&nbsp;chaining&nbsp;to&nbsp;the&nbsp;OS&nbsp;one.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;--&lt;/div&gt;<br>
&lt;div&gt;Rodrigo&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;signature&gt;Sent&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;https://link.nylas.com/link/d48tmovljcet4a9zmfuetdrqy/local-32fb72b2-e621/0?redirect=https%3A%2F%2Fnylas.com%2Fn1%3Fref%3Dn1&quot;&gt;<br>
Nylas&nbsp;N1&lt;/a&gt;,&nbsp;the&nbsp;extensible,&nbsp;open&nbsp;source&nbsp;mail&nbsp;client.&lt;/signature&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;img&nbsp;class=&quot;n1-open&quot;&nbsp;width=&quot;0&quot;&nbsp;height=&quot;0&quot;&nbsp;style=&quot;border:0;&nbsp;width:0;&nbsp;height:0;&quot;&nbsp;src=&quot;https://link.nylas.com/open/d48tmovljcet4a9zmfuetdrqy/local-32fb72b2-e621&quot;&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&nbsp;nylas-quote&nbsp;nylas-quote-id-dqvnsdiu1imlhgb6a8i4wrbyv&quot;&gt;&lt;br&gt;<br>
On&nbsp;Sep&nbsp;16&nbsp;2016,&nbsp;at&nbsp;12:00&nbsp;pm,&nbsp;Rolf&nbsp;Kvinge&nbsp;via&nbsp;android-devel&nbsp;&lt;android-devel@lists.dot.net&gt;&nbsp;wrote:<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;p&gt;Hi,&lt;/p&gt;<br>
&lt;p&gt;&gt;&nbsp;On&nbsp;16/09/16&nbsp;19:22,&nbsp;&quot;Miguel&nbsp;de&nbsp;Icaza&quot;&nbsp;&lt;miguel@microsoft.com&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Hello,&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Thanks&nbsp;for&nbsp;getting&nbsp;these&nbsp;proposals&nbsp;out&nbsp;Rolf.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;am&nbsp;not&nbsp;a&nbsp;fan&nbsp;of&nbsp;any&nbsp;of&nbsp;the&nbsp;provided&nbsp;options.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;We&nbsp;have&nbsp;two&nbsp;issues&nbsp;here:&nbsp;Mono&nbsp;is&nbsp;doing&nbsp;the&nbsp;right&nbsp;thing&nbsp;by&nbsp;supporting&nbsp;“chained&nbsp;handlers”,&nbsp;but&nbsp;many&nbsp;of&nbsp;these&nbsp;libraries&nbsp;can&nbsp;not&nbsp;chain&nbsp;signal&nbsp;handlers.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Let&nbsp;me&nbsp;propose&nbsp;that&nbsp;we&nbsp;add&nbsp;a&nbsp;pair&nbsp;of&nbsp;methods,&nbsp;to&nbsp;undo&nbsp;the&nbsp;signal&nbsp;handling&nbsp;setup,&nbsp;and&nbsp;to&nbsp;restore&nbsp;the&nbsp;handling&nbsp;setup&nbsp;and&nbsp;surface&nbsp;those&nbsp;to&nbsp;managed&nbsp;code.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;code&nbsp;for&nbsp;things&nbsp;like&nbsp;HockeyApp&nbsp;would&nbsp;become:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Mono.UndoSignalHandlingSetup&nbsp;();&nbsp;//&nbsp;SIGSEGV&nbsp;points&nbsp;back&nbsp;to&nbsp;original&nbsp;handlers&lt;br&gt;<br>
&gt;&nbsp;HockeyAppInstallHandlers&nbsp;();&nbsp;//&nbsp;SIGSEGV&nbsp;now&nbsp;points&nbsp;to&nbsp;HockeyApp&nbsp;handlers&lt;br&gt;<br>
&gt;&nbsp;Mono.InstallSignalHandlers&nbsp;();&nbsp;//&nbsp;SIGSEGV&nbsp;now&nbsp;points&nbsp;to&nbsp;Mono&nbsp;handler,&nbsp;that&nbsp;have&nbsp;chained&nbsp;capabilities&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;Undo/Install&nbsp;is&nbsp;necessary&nbsp;for&nbsp;the&nbsp;rare&nbsp;case&nbsp;of&nbsp;a&nbsp;library&nbsp;that&nbsp;can&nbsp;do&nbsp;proper&nbsp;chaining&nbsp;and&nbsp;might&nbsp;want&nbsp;to&nbsp;chain&nbsp;to&nbsp;another&nbsp;handler,&nbsp;so&nbsp;they&nbsp;would&nbsp;not&nbsp;chain&nbsp;back&nbsp;to&nbsp;Mono.&lt;/p&gt;<br>
&lt;p&gt;I&nbsp;think&nbsp;this&nbsp;could&nbsp;work.&lt;/p&gt;<br>
&lt;p&gt;Another&nbsp;advantage&nbsp;is&nbsp;that&nbsp;it&nbsp;would&nbsp;not&nbsp;require&nbsp;any&nbsp;code&nbsp;changes&nbsp;in&nbsp;the&nbsp;products,&nbsp;only&nbsp;Mono.&lt;/p&gt;<br>
&lt;p&gt;I&nbsp;can&nbsp;have&nbsp;a&nbsp;look&nbsp;at&nbsp;implementing&nbsp;(and&nbsp;testing)&nbsp;this,&nbsp;unless&nbsp;the&nbsp;runtime&nbsp;team&nbsp;wants&nbsp;to&nbsp;do&nbsp;it?&lt;/p&gt;<br>
&lt;p&gt;Rolf&lt;/p&gt;<br>
&lt;p&gt;_______________________________________________&lt;br&gt;<br>
macios-devel&nbsp;mailing&nbsp;list&lt;br&gt;<br>
macios-devel@lists.dot.net&lt;br&gt;<br>
https://na01.safelinks.protection.outlook.com/?url=http%3a%2f%2flists.dot.net%2fmailman%2flistinfo%2fmacios-devel&amp;data=02%7c01%7crokumper%40microsoft.com%7cdb0fbc77d5194f580a0708d3de63babf%7c72f988bf86f141af91ab2d7cd011db47%7c1%7c0%7c636096492348073849&amp;sdata=W2Ib2LSRJDMd08Q6%2bfz7MRUXAw9gmpZaWQyvZxMOr8g%3d&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
android-devel&nbsp;mailing&nbsp;list&lt;br&gt;<br>
android-devel@lists.dot.net&lt;br&gt;<br>
https://na01.safelinks.protection.outlook.com/?url=http%3a%2f%2flists.dot.net%2fmailman%2flistinfo%2fandroid-devel&amp;data=02%7c01%7crokumper%40microsoft.com%7cdb0fbc77d5194f580a0708d3de63babf%7c72f988bf86f141af91ab2d7cd011db47%7c1%7c0%7c636096492348073849&amp;sdata=PkmNNDSW3Ec6oNM19Z%2bz3h1uq%2f9ZEZu3O6m1B3NvN2A%3d&lt;/p&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
