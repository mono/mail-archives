<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [macios-devel] [Mono-dev] [android-devel] Signal-chaining &amp;	crash reporters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:macios-devel%40lists.dot.net?Subject=Re%3A%20%5Bmacios-devel%5D%20%5BMono-dev%5D%20%5Bandroid-devel%5D%20Signal-chaining%20%26%0A%09crash%20reporters&In-Reply-To=%3CCACmR%2BBBjgD8KS9%3DokXqLZAqc-krcV_KacfQrut1sVU5WT3nBKg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000037.html">
   <LINK REL="Next"  HREF="000027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[macios-devel] [Mono-dev] [android-devel] Signal-chaining &amp;	crash reporters</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:macios-devel%40lists.dot.net?Subject=Re%3A%20%5Bmacios-devel%5D%20%5BMono-dev%5D%20%5Bandroid-devel%5D%20Signal-chaining%20%26%0A%09crash%20reporters&In-Reply-To=%3CCACmR%2BBBjgD8KS9%3DokXqLZAqc-krcV_KacfQrut1sVU5WT3nBKg%40mail.gmail.com%3E"
       TITLE="[macios-devel] [Mono-dev] [android-devel] Signal-chaining &amp;	crash reporters">kumpera at gmail.com
       </A><BR>
    <I>Mon Sep 26 23:22:09 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000037.html">[macios-devel] [android-devel] Signal-chaining &amp; crash reporters
</A></li>
        <LI>Next message (by thread): <A HREF="000027.html">[macios-devel] [Mono-dev]  Signal-chaining &amp; crash reporters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38">[ date ]</a>
              <a href="thread.html#38">[ thread ]</a>
              <a href="subject.html#38">[ subject ]</a>
              <a href="author.html#38">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Rolf,

Looks good. Documentation goes into mono-project.com.

--
Rodrigo


On Fri, Sep 23, 2016 at 5:28 AM, Rolf Kvinge via Mono-devel-list &lt;
<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">mono-devel-list at lists.dot.net</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I've tried implementing this, here's a Mono PR for it:
</I>&gt;<i> <A HREF="https://github.com/mono/mono/pull/3624">https://github.com/mono/mono/pull/3624</A>
</I>&gt;<i>
</I>&gt;<i> I'm not where to document the new managed API though.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Rolf
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sent from Outlook &lt;<A HREF="http://aka.ms/weboutlook">http://aka.ms/weboutlook</A>&gt;
</I>&gt;<i> ------------------------------
</I>&gt;<i> *From:* Rodrigo Kumpera
</I>&gt;<i> *Sent:* Thursday, September 22, 2016 11:05:07 PM
</I>&gt;<i> *To:* Miguel de Icaza; Rolf Kvinge
</I>&gt;<i> *Cc:* <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">macios-devel at lists.dot.net</A>; <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">mono-devel-list at lists.dot.net</A>;
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">android-devel at lists.dot.net</A>
</I>&gt;<i>
</I>&gt;<i> *Subject:* Re: [android-devel] [macios-devel] Signal-chaining &amp; crash
</I>&gt;<i> reporters
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hey,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Given Rolf’s constraints, I don’t think we can do reasonably better than
</I>&gt;<i> your proposal.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> Rodrigo
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From: *Miguel de Icaza &lt;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">miguel at microsoft.com</A>&gt;
</I>&gt;<i> *Date: *Tuesday, September 20, 2016 at 6:01 AM
</I>&gt;<i> *To: *Rolf Kvinge &lt;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">Rolf.Kvinge at microsoft.com</A>&gt;, Rodrigo Kumpera &lt;
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">rokumper at microsoft.com</A>&gt;
</I>&gt;<i> *Cc: *&quot;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">macios-devel at lists.dot.net</A>&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">macios-devel at lists.dot.net</A>&gt;, &quot;
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">mono-devel-list at lists.dot.net</A>&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">mono-devel-list at lists.dot.net</A>&gt;, &quot;
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">android-devel at lists.dot.net</A>&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">android-devel at lists.dot.net</A>&gt;
</I>&gt;<i> *Subject: *Re: [android-devel] [macios-devel] Signal-chaining &amp; crash
</I>&gt;<i> reporters
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My proposal addressed that, the downside is that there is a window at
</I>&gt;<i> startup where the runtime will not catch exceptions properly.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think it is fair to document the limitation of the technique in those
</I>&gt;<i> scenarios.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From: *Rolf Kvinge &lt;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">Rolf.Kvinge at microsoft.com</A>&gt;
</I>&gt;<i> *Date: *Tuesday, September 20, 2016 at 5:17 AM
</I>&gt;<i> *To: *Rodrigo Kumpera &lt;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">rokumper at microsoft.com</A>&gt;
</I>&gt;<i> *Cc: *Miguel de Icaza &lt;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">miguel at microsoft.com</A>&gt;, &quot;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">macios-devel at lists.dot.net</A>&quot;
</I>&gt;<i> &lt;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">macios-devel at lists.dot.net</A>&gt;, &quot;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">mono-devel-list at lists.dot.net</A>&quot; &lt;
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">mono-devel-list at lists.dot.net</A>&gt;, &quot;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">android-devel at lists.dot.net</A>&quot; &lt;
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">android-devel at lists.dot.net</A>&gt;
</I>&gt;<i> *Subject: *Re: [android-devel] [macios-devel] Signal-chaining &amp; crash
</I>&gt;<i> reporters
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi Rodrigo,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think we should first decide how we want to expose this in managed code,
</I>&gt;<i> since using your idea I don't see any options besides those I initially
</I>&gt;<i> proposed (and which Miguel didn't like).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> One of the problems is that there's a lot of people involved here:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 1) The native library that detects crashes and collects crash information.
</I>&gt;<i> On iOS this is typically PLCrashReporter [1].
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2) Companies that build native crash reporting solutions on top of
</I>&gt;<i> libraries from 1). On iOS this is HockeyApp, Insights, Crittercism,
</I>&gt;<i> Flurry (which all use PLCrashReporter I believe), Crashlytics (which is not
</I>&gt;<i> using PLCrashReporter, they wrote their own replacement [2]), etc.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 3) The managed bindings for the products in 2). Some of these we maintain
</I>&gt;<i> ourselves (in the component store - Crittercism [3]), some are maintained
</I>&gt;<i> by those companies themselves (HockeyApp [4]), and some I believe are
</I>&gt;<i> community supported/written.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 4) Us.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 5) The app (developer).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ideally whatever we come up with should require changes from as few of
</I>&gt;<i> these as possible, the best case scenario being #3 only (besides ourselves
</I>&gt;<i> of course). Any changes to #1 will likely require changes to #2 as well.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Rolf
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> [1] <A HREF="https://plcrashreporter.org">https://plcrashreporter.org</A>
</I>&gt;<i>
</I>&gt;<i> [2] <A HREF="http://stackoverflow.com/questions/14041789/comparison-">http://stackoverflow.com/questions/14041789/comparison-</A>
</I>&gt;<i> between-testflight-live-quincykit-and-crashlytics#comment19667280_14103776
</I>&gt;<i>
</I>&gt;<i> [3] <A HREF="https://components.xamarin.com/gettingstarted/crittercism">https://components.xamarin.com/gettingstarted/crittercism</A>
</I>&gt;<i>
</I>&gt;<i> [4] <A HREF="https://github.com/bitstadium/HockeySDK-Xamarin">https://github.com/bitstadium/HockeySDK-Xamarin</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sent from Outlook &lt;<A HREF="http://aka.ms/weboutlook">http://aka.ms/weboutlook</A>&gt;
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> *From:* Rodrigo Kumpera
</I>&gt;<i> *Sent:* Monday, September 19, 2016 8:51:02 PM
</I>&gt;<i> *To:* Rolf Kvinge
</I>&gt;<i> *Cc:* Miguel de Icaza; <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">macios-devel at lists.dot.net</A>;
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">mono-devel-list at lists.dot.net</A>; <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">android-devel at lists.dot.net</A>
</I>&gt;<i> *Subject:* Re: [android-devel] [macios-devel] Signal-chaining &amp; crash
</I>&gt;<i> reporters
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hey Rolf,
</I>&gt;<i>
</I>&gt;<i> On your suggestion, I’m not sure that’s exactly what we want.
</I>&gt;<i> Even though we can ask user to do signal chaining themselves, I don’t
</I>&gt;<i> think it’s necessary. I don’t think we should be promoting the broken
</I>&gt;<i> design of posix signals around. ;)
</I>&gt;<i> Another thing is that this design is not portable and exposes a bit too
</I>&gt;<i> much of mono internals.
</I>&gt;<i>
</I>&gt;<i> What about this: <A HREF="https://gist.github.com/569e860dd7e73bde0d8d098f95143662">https://gist.github.com/569e860dd7e73bde0d8d098f95143662</A>
</I>&gt;<i>
</I>&gt;<i> It probably won’t compile as I normalized the signature of
</I>&gt;<i> mono_handle_native_sigsegv with other similar functions.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Rodrigo
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 9/19/16, 3:25 AM, &quot;Rolf Kvinge&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">Rolf.Kvinge at microsoft.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Hi,
</I>&gt;<i>
</I>&gt;<i>     &gt; From: Rodrigo Kumpera
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Hey guys,
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;  Exposing signal handlers from managed code is always the wrong
</I>&gt;<i> solution.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; If we're crashing in the runtime, a managed code signal handler has
</I>&gt;<i> very little chance of works. It's a scenario we will never even consider
</I>&gt;<i> supporting.
</I>&gt;<i>
</I>&gt;<i>     This is not about exposing signal handlers to managed code, the signal
</I>&gt;<i> handlers we want called are always in native code.
</I>&gt;<i>
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; I guess the simple solution is to add an embedding API call that
</I>&gt;<i> queues signal handlers
</I>&gt;<i>     &gt; to be called first before chaining to the OS one.
</I>&gt;<i>
</I>&gt;<i>     Something like this: <A HREF="https://gist.github.com/rolfbjarne/">https://gist.github.com/rolfbjarne/</A>
</I>&gt;<i> 6aab59c1609f33402d195f9c34e9f99b?
</I>&gt;<i>
</I>&gt;<i>     Rolf
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/macios-devel">Mono-devel-list at lists.dot.net</A>
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">http://lists.dot.net/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/macios-devel/attachments/20160926/f83850b1/attachment.html">http://lists.dot.net/pipermail/macios-devel/attachments/20160926/f83850b1/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000037.html">[macios-devel] [android-devel] Signal-chaining &amp; crash reporters
</A></li>
	<LI>Next message (by thread): <A HREF="000027.html">[macios-devel] [Mono-dev]  Signal-chaining &amp; crash reporters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38">[ date ]</a>
              <a href="thread.html#38">[ thread ]</a>
              <a href="subject.html#38">[ subject ]</a>
              <a href="author.html#38">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/macios-devel">More information about the macios-devel
mailing list</a><br>
</body></html>
