<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Tao-list] Need help with custom gl*Pointer {SOLVED}
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Need%20help%20with%20custom%20gl%2APointer%20%7BSOLVED%7D&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000091.html">
   <LINK REL="Next"  HREF="000098.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Tao-list] Need help with custom gl*Pointer {SOLVED}</H1>
    <B>dany2222 at libero.it</B> 
    <A HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Need%20help%20with%20custom%20gl%2APointer%20%7BSOLVED%7D&In-Reply-To="
       TITLE="[Tao-list] Need help with custom gl*Pointer {SOLVED}">dany2222 at libero.it
       </A><BR>
    <I>Mon Jun 27 13:22:00 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000091.html">[Tao-list] Devil OpenGl sample
</A></li>
        <LI>Next message: <A HREF="000098.html">[Tao-list] Need help with custom gl*Pointer {SOLVED}
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92">[ date ]</a>
              <a href="thread.html#92">[ thread ]</a>
              <a href="subject.html#92">[ subject ]</a>
              <a href="author.html#92">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I finally managed to
solve my problem, so
since I think this
can be helpful for
many guys, I decided
to write this:
I was trying to pass
an array of
structures (both
managed types) to
the OpenGl functions
gl*Pointer...
unfortunally, even
if my structure was
sequential and I
used MarshalAs
attributre in my
bindings, geometry
was correct (I don't
know why, though),
but normals and
texture coords were
not correct... I
decided to change my
custom bindings in
this way:
		#region
glColorPointer
functions
		/// &lt;summary&gt;
		/// Override used
to support color
array with ColorF
elements.
		/// &lt;/summary&gt;
		/// &lt;param
name=&quot;size&quot;&gt;Number
of components per
color (must be
4).&lt;/param&gt;
		/// &lt;param
name=&quot;type&quot;&gt;Specifies
the data type of
each color component
in the array (must
be
GL_FLOAT).&lt;/param&gt;
		/// &lt;param
name=&quot;stride&quot;&gt;Specifies
the byte offset
between consecutive
colors (must be
0).&lt;/param&gt;
		/// &lt;param
name=&quot;pointer&quot;&gt;Array
of colors.&lt;/param&gt;
	
[DllImport(&quot;opengl32.dll&quot;,
EntryPoint=&quot;glColorPointer&quot;),
SuppressUnmanagedCodeSecurity,
CLSCompliantAttribute(true)]
		public static
extern void
glColorPointer (int
size, int type, int
stride, ref ColorF
pointer);
		#endregion

		#region
glTexCoordPointer
functions
		/// &lt;summary&gt;
		/// Override used
to support texture
coordinates array
with Vector2F
elements.
		/// &lt;/summary&gt;
		/// &lt;param
name=&quot;size&quot;&gt;Number
of components per
color (must be
2).&lt;/param&gt;
		/// &lt;param
name=&quot;type&quot;&gt;Specifies
the data type of
each texture
coordinates
component in the
array (must be
GL_FLOAT).&lt;/param&gt;
		/// &lt;param
name=&quot;stride&quot;&gt;Specifies
the byte offset
between consecutive
texture coordinates
(must be 0).&lt;/param&gt;
		/// &lt;param
name=&quot;pointer&quot;&gt;Array
of texture
coordinates.&lt;/param&gt;
	
[DllImport(&quot;opengl32.dll&quot;,
EntryPoint=&quot;glTexCoordPointer&quot;),
SuppressUnmanagedCodeSecurity,
CLSCompliantAttribute(true)]
		public static
extern void
glTexCoordPointer
(int size, int type,
int stride, ref
Vector2F pointer);
		#endregion

		#region
glNormalPointer
functions
		/// &lt;summary&gt;
		/// Override used
to support normals
array with Vector3F
elements.
		/// &lt;/summary&gt;
		/// &lt;param
name=&quot;type&quot;&gt;Specifies
the data type of
each normal
component in the
array (must be
GL_FLOAT).&lt;/param&gt;
		/// &lt;param
name=&quot;stride&quot;&gt;Specifies
the byte offset
between consecutive
normals (must be
0).&lt;/param&gt;
		/// &lt;param
name=&quot;pointer&quot;&gt;Array
of normals.&lt;/param&gt;
	
[DllImport(&quot;opengl32.dll&quot;,
EntryPoint=&quot;glNormalPointer&quot;),
SuppressUnmanagedCodeSecurity,
CLSCompliantAttribute(true)]
		public static
extern void
glNormalPointer (int
type, int stride,
ref Vector3F
pointer);
		#endregion

		#region
glVertexPointer
functions
		/// &lt;summary&gt;
		/// Override used
to support texture
coordinates array
with Vector3F
elements.
		/// &lt;/summary&gt;
		/// &lt;param
name=&quot;size&quot;&gt;Number
of components per
color (must be
3).&lt;/param&gt;
		/// &lt;param
name=&quot;type&quot;&gt;Specifies
the data type of
each vertex
component in the
array (must be
GL_FLOAT).&lt;/param&gt;
		/// &lt;param
name=&quot;stride&quot;&gt;Specifies
the byte offset
between consecutive
vertices (must be
0).&lt;/param&gt;
		/// &lt;param
name=&quot;pointer&quot;&gt;Array
of vertices.&lt;/param&gt;
	
[DllImport(&quot;opengl32.dll&quot;,
EntryPoint=&quot;glVertexPointer&quot;),
SuppressUnmanagedCodeSecurity,
CLSCompliantAttribute(true)]
		public static
extern void
glVertexPointer (int
size, int type, int
stride, ref Vector3F
pointer);
		#endregion

Using references...
obviusly to pass
data I needed to do
such things:
VGl.glVertexPointer(3,Gl.GL_FLOAT,0,ref
this.m_Vertices[0]);

That made the
thing... now
everything is
correct... even if I
would like to find
someone who could
explain me... what
was the problem, and
why it's working
now...

Wouldn't be a good
idea providing an
example in the TAO
samples to use
custom structures
with
glInterleavedArray,
gl*Pointer etc like
functions? I suppose
that sometimes would
be better to create
custom bindings
instead of
marshaling custom
data structures to
TAO bindings... does
it make sense?



____________________________________________________________
6X velocizzare la tua navigazione a 56k? 6X Web Accelerator di Libero!
Scaricalo su INTERNET GRATIS 6X <A HREF="http://www.libero.it">http://www.libero.it</A>


</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000091.html">[Tao-list] Devil OpenGl sample
</A></li>
	<LI>Next message: <A HREF="000098.html">[Tao-list] Need help with custom gl*Pointer {SOLVED}
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92">[ date ]</a>
              <a href="thread.html#92">[ thread ]</a>
              <a href="subject.html#92">[ subject ]</a>
              <a href="author.html#92">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://galactus.ximian.com/mailman/listinfo/tao-list">More information about the Tao-list
mailing list</a><br>
</body></html>
