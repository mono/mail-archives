<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Tao-list] Problem with callbacks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Problem%20with%20callbacks&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000535.html">
   <LINK REL="Next"  HREF="000537.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Tao-list] Problem with callbacks</H1>
    <B>Michael Lam</B> 
    <A HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Problem%20with%20callbacks&In-Reply-To="
       TITLE="[Tao-list] Problem with callbacks">arrow014 at gmail.com
       </A><BR>
    <I>Fri Jun  3 11:08:57 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000535.html">[Tao-list] RE: tao cg bindings
</A></li>
        <LI>Next message: <A HREF="000537.html">[Tao-list] testing the list
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#536">[ date ]</a>
              <a href="thread.html#536">[ thread ]</a>
              <a href="subject.html#536">[ subject ]</a>
              <a href="author.html#536">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey all,

I'm doing some research on C# and OpenGL with the hopes of finding an 
effective solution for using them together in a fairly large project. The 
Tao Framework appears to be exactly what I'm looking for, but I'm having 
some problems with it. I managed to get it compiled with VS .NET 2003 and it 
appears to work, but programs using Tao sometimes fail when I run them. I 
have determined that the reshape and input callbacks are causing the problem 
(or at least that their presence in code is directly tied to the problems).

Here's the code from the Redbook cube example:

public static void Main(string[] args) 
{
Glut.glutInit();
Glut.glutInitDisplayMode(Glut.GLUT_SINGLE | Glut.GLUT_RGB);
Glut.glutInitWindowSize(500, 500);
Glut.glutInitWindowPosition(100, 100);
Glut.glutCreateWindow(&quot;Cube&quot;);
Init();
Glut.glutDisplayFunc(new Glut.DisplayCallback(Display));

//Glut.glutKeyboardFunc(new Glut.KeyboardCallback(Keyboard));
//Glut.glutReshapeFunc(new Glut.ReshapeCallback(Reshape));

Glut.glutMainLoop();
}

The display callback appears to work fine. Commenting out the two lines as 
shown causes the program to run, but then I obviously see nothing because 
reshape is not being called. Adding a Reshape(500,500); call to the init 
function allows me to see the cube but this doesn't fix the bigger problem 
of the callback not working.

When I uncomment the reshape callback statement, the program immediately 
gives the following error upon execution with the break arrow pointing to 
the bracket after glutMainLoop():

&quot;An unhandled exception of type 'System.NullReferenceException' occurred in 
taotest4.exe
Additional information: Object reference not set to an instance of an 
object.&quot;

When I uncomment the keyboard callback statement, the program locks up when 
you press a key, with the standard Windows &quot;send error report/don't send&quot; 
error: &quot;taotest4.exe has encountered a problem and needs to close. We are 
sorry for the inconvenience.&quot; Clicking Debug results in the following 
message:

&quot;An exception 'Unhandled Win32 Exception' has occurred in taotest4.exe.
However, a debugger that cannot handle the exception type is already 
attached to the process.&quot;

I'm currently running Windows XP Professional SP2 on a Compaq Presario X1000 
laptop (1.4Ghz w/ 512 MB RAM &amp; ATI Mobility Radeon 9200) and have tried this 
with both Visual Studio .NET 2003 and .NET 2005 Beta 2. I get similar 
problems with both packages (VS .NET 2005 gives me an 
AccessViolationException at the glutMainLoop() call if the reshape callback 
is uncommented) . I have also tried this with other examples from Redbook as 
well as some of my own custom code and the results are consistent across all 
examples. The same error that I get with the keyboard callback in the above 
example also manifests itself when I try to use the mouse and motion 
callbacks.

I have sucessfully worked with Glut and OpenGL before in both Windows (w/ 
Visual Studio) and Linux using C++. I'm guessing that I'm missing some 
option somewhere for C#, but I'm not sure where to look for the solution.

Any help would be greatly appreciated. Thanks!

-- Michael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/tao-list/attachments/20050603/fa04ff7c/attachment-0001.html">http://lists.ximian.com/pipermail/tao-list/attachments/20050603/fa04ff7c/attachment-0001.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000535.html">[Tao-list] RE: tao cg bindings
</A></li>
	<LI>Next message: <A HREF="000537.html">[Tao-list] testing the list
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#536">[ date ]</a>
              <a href="thread.html#536">[ thread ]</a>
              <a href="subject.html#536">[ subject ]</a>
              <a href="author.html#536">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://galactus.ximian.com/mailman/listinfo/tao-list">More information about the Tao-list
mailing list</a><br>
</body></html>
