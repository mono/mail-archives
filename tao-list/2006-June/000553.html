<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Tao-list] Can't get texturing to work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Can%27t%20get%20texturing%20to%20work&In-Reply-To=448B2696.3060601%40comcast.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000552.html">
   <LINK REL="Next"  HREF="000554.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Tao-list] Can't get texturing to work</H1>
    <B>Lukas Marsalek</B> 
    <A HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Can%27t%20get%20texturing%20to%20work&In-Reply-To=448B2696.3060601%40comcast.net"
       TITLE="[Tao-list] Can't get texturing to work">l.marsalek at seznam.cz
       </A><BR>
    <I>Sun Jun 11 12:09:11 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000552.html">[Tao-list] Can't get texturing to work
</A></li>
        <LI>Next message: <A HREF="000554.html">[Tao-list] Can't get texturing to work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#553">[ date ]</a>
              <a href="thread.html#553">[ thread ]</a>
              <a href="subject.html#553">[ subject ]</a>
              <a href="author.html#553">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Brad,

I guess you are missing initialization of some default texture parameters.
Put the following into your initialization method right before you start to
generate the texture data.
 
Gl.glBindTexture(Gl.GL_TEXTURE_2D, YOUR TEXTURE ID)
Gl.glTexParameteri(Gl.GL_TEXTURE_2D, Gl.GL_TEXTURE_MIN_FILTER,
Gl.GL_NEAREST);
Gl.glTexParameteri(Gl.GL_TEXTURE_2D, Gl.GL_TEXTURE_MAG_FILTER,
Gl.GL_NEAREST);
Gl.glTexParameteri(Gl.GL_TEXTURE_2D, Gl.GL_TEXTURE_WRAP_S, Gl.GL_CLAMP);
Gl.glTexParameteri(Gl.GL_TEXTURE_2D, Gl.GL_TEXTURE_WRAP_T, Gl.GL_CLAMP);

You can of course set different values than clamping and nearest neighbour.
Just be sure to call it with some parameters.

Hope it helps,
Lukas


&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">tao-list-bounces at lists.ximian.com</A> [mailto:tao-list-
</I>&gt;<i> <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">bounces at lists.ximian.com</A>] On Behalf Of Brad
</I>&gt;<i> Sent: Saturday, June 10, 2006 10:08 PM
</I>&gt;<i> To: <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">tao-list at lists.ximian.com</A>
</I>&gt;<i> Subject: [Tao-list] Can't get texturing to work
</I>&gt;<i> 
</I>&gt;<i> I'm using Gtk#, GtkGLArea#, and Tao to create an OpenGL application. But
</I>&gt;<i> no matter what I do I can't get texturing to work. It always just binds
</I>&gt;<i> that white default texture. I wrote a simple test program that
</I>&gt;<i> demonstrates the behavior. Am I doing something wrong or is there some
</I>&gt;<i> kind of bug in one of the libraries I'm using?
</I>&gt;<i> 
</I>&gt;<i> I hate doing code dumps, but I've been scratching my head on this for a
</I>&gt;<i> couple days now. Here we go:
</I>&gt;<i> 
</I>&gt;<i> using System;
</I>&gt;<i> using System.Drawing;
</I>&gt;<i> using Gtk;
</I>&gt;<i> using GtkSharp;
</I>&gt;<i> 
</I>&gt;<i> using GtkGL;
</I>&gt;<i> using Tao.OpenGl;
</I>&gt;<i> 
</I>&gt;<i> namespace test
</I>&gt;<i> {
</I>&gt;<i>     public class MainForm : Window
</I>&gt;<i>     {
</I>&gt;<i>         public static void Main()
</I>&gt;<i>         {
</I>&gt;<i>             Application.Init();
</I>&gt;<i> 
</I>&gt;<i>             new MainForm(&quot;testing&quot;);
</I>&gt;<i> 
</I>&gt;<i>             Application.Run ();
</I>&gt;<i>         }
</I>&gt;<i> 
</I>&gt;<i>         public MainForm(string title) : base(title)
</I>&gt;<i>         {
</I>&gt;<i>             SetDefaultSize (400, 250);
</I>&gt;<i> 
</I>&gt;<i>             glArea = new GLArea(attrlist);
</I>&gt;<i> 
</I>&gt;<i>             // Set some event handlers
</I>&gt;<i>             glArea.ExposeEvent += glArea_Exposed;
</I>&gt;<i>             glArea.Realized += glArea_Realized;
</I>&gt;<i>             glArea.ConfigureEvent += glArea_Configure;
</I>&gt;<i> 
</I>&gt;<i>             Add (glArea);
</I>&gt;<i>             ShowAll ();
</I>&gt;<i> 
</I>&gt;<i>         }
</I>&gt;<i> 
</I>&gt;<i>         void glArea_Realized(object o, EventArgs e)
</I>&gt;<i>         {
</I>&gt;<i>             if (glArea.MakeCurrent() == 0)
</I>&gt;<i>                 return;
</I>&gt;<i> 
</I>&gt;<i>             Gl.glEnable(Gl.GL_TEXTURE_2D);
</I>&gt;<i>             Gl.glShadeModel(Gl.GL_SMOOTH);
</I>&gt;<i>             Gl.glClearColor(1.0f, 0.0f, 0.0f, 0.0f);
</I>&gt;<i> 
</I>&gt;<i>             Gl.glCullFace(Gl.GL_BACK);
</I>&gt;<i>             Gl.glFrontFace(Gl.GL_CCW);
</I>&gt;<i>             //Gl.glEnable(Gl.GL_CULL_FACE);
</I>&gt;<i> 
</I>&gt;<i>             Gl.glHint(Gl.GL_PERSPECTIVE_CORRECTION_HINT, Gl.GL_NICEST);
</I>&gt;<i> 
</I>&gt;<i>             Gl.glGenTextures(1, out texture);
</I>&gt;<i>             Gl.glBindTexture(Gl.GL_TEXTURE_2D, texture);
</I>&gt;<i> 
</I>&gt;<i>             Random r = new Random();
</I>&gt;<i>             byte[] image = new byte[512 * 512 * 3];
</I>&gt;<i>             for (int i = 0; i &lt; 512 * 512; i++)
</I>&gt;<i>             {
</I>&gt;<i>                 image[i * 3 + 0] = (byte)r.Next(0, 255);
</I>&gt;<i>                 image[i * 3 + 1] = (byte)r.Next(0, 255);
</I>&gt;<i>                 image[i * 3 + 2] = (byte)r.Next(0, 255);
</I>&gt;<i>             }
</I>&gt;<i> 
</I>&gt;<i>             Gl.glTexImage2D(Gl.GL_TEXTURE_2D, 0, Gl.GL_RGB, 512, 512, 0,
</I>&gt;<i> Gl.GL_BGR_EXT, Gl.GL_UNSIGNED_BYTE, image);
</I>&gt;<i>         }
</I>&gt;<i> 
</I>&gt;<i>         // this is basically a &quot;resize&quot; event
</I>&gt;<i>         void glArea_Configure(object o, EventArgs e)
</I>&gt;<i>         {
</I>&gt;<i>             if (glArea.MakeCurrent() == 0)
</I>&gt;<i>                 return;
</I>&gt;<i> 
</I>&gt;<i>             int width = glArea.Allocation.Width;
</I>&gt;<i>             int height = glArea.Allocation.Height;
</I>&gt;<i> 
</I>&gt;<i>             if (height == 0) height = 1;
</I>&gt;<i> 
</I>&gt;<i>             Console.WriteLine(&quot;Setting width to &quot; + width + &quot;, &quot; +
</I>&gt;<i> height);
</I>&gt;<i> 
</I>&gt;<i>             Gl.glViewport(0, 0, width, height);
</I>&gt;<i> 
</I>&gt;<i>             Gl.glMatrixMode(Gl.GL_PROJECTION);
</I>&gt;<i>             Gl.glLoadIdentity();
</I>&gt;<i> 
</I>&gt;<i>             Glu.gluPerspective(75.0f, (float)width / height, 1.0f,
</I>&gt;<i> 100.0f);
</I>&gt;<i> 
</I>&gt;<i>             Gl.glMatrixMode(Gl.GL_MODELVIEW);
</I>&gt;<i>             Gl.glLoadIdentity();
</I>&gt;<i>         }
</I>&gt;<i> 
</I>&gt;<i>         // redraw!
</I>&gt;<i>         void glArea_Exposed(object o, EventArgs e)
</I>&gt;<i>         {
</I>&gt;<i>             if (glArea.MakeCurrent() == 0)
</I>&gt;<i>                 return;
</I>&gt;<i> 
</I>&gt;<i>             int width = glArea.Allocation.Width;
</I>&gt;<i>             int height = glArea.Allocation.Height;
</I>&gt;<i> 
</I>&gt;<i>             Gl.glLoadIdentity();
</I>&gt;<i> 
</I>&gt;<i>             Render();
</I>&gt;<i> 
</I>&gt;<i>             glArea.SwapBuffers();
</I>&gt;<i> 
</I>&gt;<i>             Gl.glClear(Gl.GL_COLOR_BUFFER_BIT | Gl.GL_DEPTH_BUFFER_BIT);
</I>&gt;<i>         }
</I>&gt;<i> 
</I>&gt;<i>         public void Render()
</I>&gt;<i>         {
</I>&gt;<i>             int width = glArea.Allocation.Width;
</I>&gt;<i>             int height = glArea.Allocation.Height;
</I>&gt;<i> 
</I>&gt;<i>             Gl.glEnable(Gl.GL_TEXTURE_2D);
</I>&gt;<i>             Gl.glBindTexture(Gl.GL_TEXTURE_2D, texture);
</I>&gt;<i> 
</I>&gt;<i>             Gl.glMatrixMode(Gl.GL_PROJECTION);
</I>&gt;<i>             Gl.glPushMatrix();
</I>&gt;<i>             Gl.glLoadIdentity();
</I>&gt;<i> 
</I>&gt;<i>             Gl.glOrtho(0, width, height, 0, 0, 1000);
</I>&gt;<i> 
</I>&gt;<i>             Gl.glMatrixMode(Gl.GL_MODELVIEW);
</I>&gt;<i>             Gl.glPushMatrix();
</I>&gt;<i>             Gl.glLoadIdentity();
</I>&gt;<i> 
</I>&gt;<i>             float x = 0;
</I>&gt;<i>             float y = 0;
</I>&gt;<i> 
</I>&gt;<i>             float ph = 100;
</I>&gt;<i>             float pw = 100;
</I>&gt;<i> 
</I>&gt;<i>             Gl.glBegin(Gl.GL_QUADS); {
</I>&gt;<i>                 Gl.glTexCoord2f(0,1.0f); Gl.glVertex3f(x, y + ph, 0);
</I>&gt;<i>                 Gl.glTexCoord2f(1.0f, 1.0f); Gl.glVertex3f(x + pw, y +
</I>&gt;<i> ph, 0);
</I>&gt;<i>                 Gl.glTexCoord2f(1.0f,0); Gl.glVertex3f(x + pw, y, 0);
</I>&gt;<i>                 Gl.glTexCoord2f(0,0); Gl.glVertex3f(x, y, 0);
</I>&gt;<i>             } Gl.glEnd();
</I>&gt;<i> 
</I>&gt;<i>             Gl.glPopMatrix();
</I>&gt;<i>             Gl.glMatrixMode(Gl.GL_PROJECTION);
</I>&gt;<i>             Gl.glPopMatrix();
</I>&gt;<i>             Gl.glMatrixMode(Gl.GL_MODELVIEW);
</I>&gt;<i>         }
</I>&gt;<i> 
</I>&gt;<i>         private uint texture;
</I>&gt;<i> 
</I>&gt;<i>         private GLArea glArea;
</I>&gt;<i> 
</I>&gt;<i>         private int[] attrlist = {
</I>&gt;<i>             (int)GtkGL._GDK_GL_CONFIGS.Rgba,
</I>&gt;<i>             (int)GtkGL._GDK_GL_CONFIGS.RedSize,8,
</I>&gt;<i>             (int)GtkGL._GDK_GL_CONFIGS.GreenSize,8,
</I>&gt;<i>             (int)GtkGL._GDK_GL_CONFIGS.BlueSize,8,
</I>&gt;<i>             (int)GtkGL._GDK_GL_CONFIGS.DepthSize,16,
</I>&gt;<i>             (int)GtkGL._GDK_GL_CONFIGS.Doublebuffer,
</I>&gt;<i>             (int)GtkGL._GDK_GL_CONFIGS.None,
</I>&gt;<i>           };
</I>&gt;<i>     }
</I>&gt;<i> }
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Tao-list mailing list
</I>&gt;<i> <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">Tao-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">http://galactus.ximian.com/mailman/listinfo/tao-list</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000552.html">[Tao-list] Can't get texturing to work
</A></li>
	<LI>Next message: <A HREF="000554.html">[Tao-list] Can't get texturing to work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#553">[ date ]</a>
              <a href="thread.html#553">[ thread ]</a>
              <a href="subject.html#553">[ subject ]</a>
              <a href="author.html#553">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://galactus.ximian.com/mailman/listinfo/tao-list">More information about the Tao-list
mailing list</a><br>
</body></html>
