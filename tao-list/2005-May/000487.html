<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Tao-list] Build process
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Build%20process&In-Reply-To=OFACCF05D3.4294B777-ON88257007.00766B0D-88257007.00771E52%40capgroup.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000486.html">
   <LINK REL="Next"  HREF="000484.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Tao-list] Build process</H1>
    <B>Vladimir Vukicevic</B> 
    <A HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Build%20process&In-Reply-To=OFACCF05D3.4294B777-ON88257007.00766B0D-88257007.00771E52%40capgroup.com"
       TITLE="[Tao-list] Build process">vladimirv at gmail.com
       </A><BR>
    <I>Fri May 20 17:50:42 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000486.html">[Tao-list] Build process
</A></li>
        <LI>Next message: <A HREF="000484.html">[Tao-list] Re: Tao complains about missing entry point in
	freeglut.dll
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#487">[ date ]</a>
              <a href="thread.html#487">[ thread ]</a>
              <a href="subject.html#487">[ subject ]</a>
              <a href="author.html#487">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/20/05, <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">David_Hudson at capgroup.com</A> &lt;<A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">David_Hudson at capgroup.com</A>&gt; wrote:
&gt;<i> The directory structure looks good. The only thing I would change would be
</I>&gt;<i> that  the dist directory not permanently contain any items. Any docs, libs
</I>&gt;<i> etc should go into another directory: /doc, /lib, /bin etc. That makes it
</I>&gt;<i> very easy to do a 'make clean' - all you have to do is delete the dist dir
</I>&gt;<i> and you are done. This does mean that a build script would have to copy lib
</I>&gt;<i> and docs from their primary dirs into the dist dir. In practive this is no
</I>&gt;<i> problem though. I use this kind of directory structure for SdlDotNet and it
</I>&gt;<i> makes releases a lot easier. You can just zip up the directory to release
</I>&gt;<i> it for example.
</I>
I agree; I wasn't even thinking to check dist into svn, but to just
have the build system create the dir and doc/lib/bin subdirs as part
of the build.  Do you think we should build in the primary dir, or
build directly to dist?  Right now I have things building straight to
dist/lib -- e.g., if you type &quot;make&quot; in src/Tao.OpenIL, you'll get
../../dist/lib/Tao.OpenIL.dll.  Do you think we should build
Tao.OpenIL.dll in src/Tao.OpenIL, and then just copy over?

&gt;<i> Let me know when you want  me to jump in. I have started to work with
</I>&gt;<i> premake ot generate some make files. I am not convinced if it will work for
</I>&gt;<i> Tao though. Still have to see...
</I>
Let me know how premake works out -- Tao's build is relatively simple,
so I'm a little worried about any build tool that has problems with it
;)  But if you do get things working sanely, it might be a good idea
to provide premake files, and let people generate VS projects and
stuff from that.  (So we'd ship just makefiles and the premake bits as
part of the source dist.)

    - Vlad

&gt;<i> 
</I>&gt;<i>              Vladimir
</I>&gt;<i>              Vukicevic
</I>&gt;<i>              &lt;<A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">vladimirv at gmail.</A>                                          To
</I>&gt;<i>              com&gt;                      David Hudson/INV/CG/<A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">CAPITAL at CG</A>
</I>&gt;<i>                                                                         cc
</I>&gt;<i>              05/20/2005 02:22          <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">tao-list at galactus.ximian.com</A>
</I>&gt;<i>              PM                                                    Subject
</I>&gt;<i>                                        Re: [Tao-list] Build process
</I>&gt;<i> 
</I>&gt;<i>              Please respond to
</I>&gt;<i>                  Vladimir
</I>&gt;<i>                  Vukicevic
</I>&gt;<i>              &lt;<A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">vladimirv at gmail.</A>
</I>&gt;<i>                    com&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hi Dave,
</I>&gt;<i> 
</I>&gt;<i> I was just going to send a message to the list about the build
</I>&gt;<i> process, but you beat me to the punch ;)  I agree with you on both
</I>&gt;<i> counts -- I'd definitely like to simplify the directory structure, and
</I>&gt;<i> also make it easy to build on both windows and mono/unix platforms.
</I>&gt;<i> 
</I>&gt;<i> For the directory structure, I was thinking something along these lines:
</I>&gt;<i> 
</I>&gt;<i> tao/
</I>&gt;<i>   src/
</I>&gt;<i>     Tao.OpenGl/
</I>&gt;<i>     Tao.DevIL/
</I>&gt;<i>     ..
</I>&gt;<i>   examples/
</I>&gt;<i>     ..
</I>&gt;<i>     NeHe.Lesson18/
</I>&gt;<i>     ..
</I>&gt;<i>   dist/
</I>&gt;<i>     lib/
</I>&gt;<i>     doc/
</I>&gt;<i>     bin/
</I>&gt;<i> 
</I>&gt;<i> The subdirs of src would contain all the bits relevant to that
</I>&gt;<i> particular library -- all he source files, the documentation/license
</I>&gt;<i> bits, the strong name files, etc.  For examples, it might be better to
</I>&gt;<i> introduce another level into the tree, something like a NeHe dir with
</I>&gt;<i> Lesson1, Lesson2, etc. subirs underneath... but it may not be
</I>&gt;<i> necessary.
</I>&gt;<i> 
</I>&gt;<i> Everything would build to the dist/ dir -- all the .dll and
</I>&gt;<i> .dll.config bits would go to dist/lib, all the examples would build to
</I>&gt;<i> dist/bin, and documentation and other stuff would go to dist/doc.  The
</I>&gt;<i> built &quot;dist&quot; dir would be what what's distributed as a binary release.
</I>&gt;<i> 
</I>&gt;<i> For the actual build system, I'd really like to have a vanilla GNU
</I>&gt;<i> make-based build system in place for linux/OSX (and windows, if cygwin
</I>&gt;<i> is installed), and a second one that can be used if GNU make isn't
</I>&gt;<i> available.  Including VS.NET Solution and Project files should cover
</I>&gt;<i> all of Tao users (since chances are everyone will have either make or
</I>&gt;<i> VS.NET available), but using premake instead of VS.NET might be an
</I>&gt;<i> alternative.  Depending on the format of the makefiles that premake
</I>&gt;<i> generates, we might be able to just include the generated makefiles in
</I>&gt;<i> the source dist..
</I>&gt;<i> 
</I>&gt;<i> I actually rearranged things (locally, not in svn yet) according to
</I>&gt;<i> the above dir structure and implemented the simple makefile build
</I>&gt;<i> system (with support for .net 1.1 and mono 1.1), but I really want to
</I>&gt;<i> fix the OpenGL library building issues before going forward with it..
</I>&gt;<i> I've been trying 3-4 ways to find a cross-platform way to merge the
</I>&gt;<i> generated OpenGL extension bits with the extension loader core into
</I>&gt;<i> one assembly and running up with problems in the tools. =/
</I>&gt;<i> 
</I>&gt;<i> Anyway, that's what I came up with in a burst of motivation last
</I>&gt;<i> night... I'm open to drastic changes or strong disagreement, so let me
</I>&gt;<i> know what you think!
</I>&gt;<i> 
</I>&gt;<i>     - Vlad
</I>&gt;<i> 
</I>&gt;<i> On 5/20/05, <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">David_Hudson at capgroup.com</A> &lt;<A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">David_Hudson at capgroup.com</A>&gt; wrote:
</I>&gt;<i> &gt; Hi Everyone,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It is good to see a mailing list for Tao!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Concerning the build process,  I helped write the NAnt build scripts
</I>&gt;<i> (Randy
</I>&gt;<i> &gt; did most of the work)  and I wrote the dnpb scripts but their time has
</I>&gt;<i> come
</I>&gt;<i> &gt; to be replaced/revised/whatever.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I would like to head up revising the build process or collaborate with
</I>&gt;<i> the
</I>&gt;<i> &gt; person who is doing it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; NAnt does not run well on Mono and many Linux users have expressed
</I>&gt;<i> concern
</I>&gt;<i> &gt; about how to build Tao. Also, there is a lack of documentation on the
</I>&gt;<i> &gt; build; many people don't even know where to start.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; A couple of  points to consider for a new build process besides the ones
</I>&gt;<i> &gt; mentioned on the Wiki:
</I>&gt;<i> &gt; * Simplify the directory structure. There are too many directories to
</I>&gt;<i> &gt; navigate for the build and for users. It can get very confusing.
</I>&gt;<i> &gt; * Consider using Premake (<A HREF="http://premake.sourceforge.net">http://premake.sourceforge.net</A>). It is simliar
</I>&gt;<i> to
</I>&gt;<i> &gt; DNPB but can be used to create GNU Make files as well as VS files. I will
</I>&gt;<i> &gt; test this out  for the Tao.Sdl build.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; anything I can do to help, just let me know.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Dave
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Tao-list mailing list
</I>&gt;<i> &gt; <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">Tao-list at galactus.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">http://galactus.ximian.com/mailman/listinfo/tao-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000486.html">[Tao-list] Build process
</A></li>
	<LI>Next message: <A HREF="000484.html">[Tao-list] Re: Tao complains about missing entry point in
	freeglut.dll
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#487">[ date ]</a>
              <a href="thread.html#487">[ thread ]</a>
              <a href="subject.html#487">[ subject ]</a>
              <a href="author.html#487">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://galactus.ximian.com/mailman/listinfo/tao-list">More information about the Tao-list
mailing list</a><br>
</body></html>
