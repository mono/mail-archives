<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Tao-list] Re: calling convention business
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Re%3A%20calling%20convention%20business&In-Reply-To=20050522160003.B35FB1D0052%40lists.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000497.html">
   <LINK REL="Next"  HREF="000504.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Tao-list] Re: calling convention business</H1>
    <B>David_Hudson at capgroup.com</B> 
    <A HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Re%3A%20calling%20convention%20business&In-Reply-To=20050522160003.B35FB1D0052%40lists.ximian.com"
       TITLE="[Tao-list] Re: calling convention business">David_Hudson at capgroup.com
       </A><BR>
    <I>Mon May 23 10:34:42 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000497.html">[Tao-list] Integrating Tao to .NET 1.1
</A></li>
        <LI>Next message: <A HREF="000504.html">[Tao-list] Re: calling convention business
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#495">[ date ]</a>
              <a href="thread.html#495">[ thread ]</a>
              <a href="subject.html#495">[ subject ]</a>
              <a href="author.html#495">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes. This is the problem with building Tao.Sdl  on Linux. The
Tao.Postprocess has to be used in conjunction with a custom attribute to
update the IL with the correct Calling Convention. Until Mono has a
properly working ildasm/ilasm there are not many options. The most
important feature that the problem affects is the ChannelFinished callback.
When a sound on a channel finishes, the callback fires and passes the
channel number, allowing you to call a method based on the channel number.
This does not work with the default calling convention. As a result, you
have to build Tao.Sdl on Windows and copy it to Linux.

Maybe we just remove the postprocess portion from the Linux build, put this
issue in the Tao.Sdl readme and say it does not work when you build on
Linux. At least Tao.Sdl would build on Linux which seems to be the more
pressing issue.

I can change this in the NAnt script. Of course this leads to the next
issue: why doesn't NAnt work on Mono 1.1.7??? :-)

Dave
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Today's Topics:
</I>&gt;<i>
</I>&gt;<i>    1. calling convention business (Vladimir Vukicevic)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Sun, 22 May 2005 01:37:14 -0700
</I>&gt;<i> From: Vladimir Vukicevic &lt;<A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">vladimirv at gmail.com</A>&gt;
</I>&gt;<i> Subject: [Tao-list] calling convention business
</I>&gt;<i> To: <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">tao-list at galactus.ximian.com</A>
</I>&gt;<i> Message-ID: &lt;<A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">9540d01050522013750dd0fb1 at mail.gmail.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=ISO-8859-1
</I>&gt;<i>
</I>&gt;<i> It seems that we may not be able to end up with a single set of
</I>&gt;<i> libraries that will run on all platforms; I forgot that SDL explicitly
</I>&gt;<i> uses cdecl for some delegates on WIN32.  There are still alternatives
</I>&gt;<i> for someone wishing to ship a single binary (e.g. use Glfw and OpenAL
</I>&gt;<i> instead of SDL), so maybe that's not so bad.
</I>&gt;<i>
</I>&gt;<i> I think SDL is the only culprit, thankfully; the other libraries use
</I>&gt;<i> the platform-native calling convention everywhere.
</I>&gt;<i>
</I>&gt;<i> Any ideas about what to do with SDL?  Should we just ship 2 separate
</I>&gt;<i> dlls in the binary dist and include a README.SDL explaining what's up?
</I>&gt;<i>  Someone really wanting to use SDL could probably set up a
</I>&gt;<i> script/batch file for launching to copy the right dlls into place
</I>&gt;<i> before launching their app.
</I>&gt;<i>
</I>&gt;<i>     - Vlad
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Tao-list mailing list
</I>&gt;<i> <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">Tao-list at galactus.ximian.com</A>
</I>&gt;<i> <A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">http://galactus.ximian.com/mailman/listinfo/tao-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> End of Tao-list Digest, Vol 1, Issue 3
</I>&gt;<i> **************************************
</I>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000497.html">[Tao-list] Integrating Tao to .NET 1.1
</A></li>
	<LI>Next message: <A HREF="000504.html">[Tao-list] Re: calling convention business
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#495">[ date ]</a>
              <a href="thread.html#495">[ thread ]</a>
              <a href="subject.html#495">[ subject ]</a>
              <a href="author.html#495">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://galactus.ximian.com/mailman/listinfo/tao-list">More information about the Tao-list
mailing list</a><br>
</body></html>
