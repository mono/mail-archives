<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Tao-list] Crash using glGetShaderInfoLog
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Crash%20using%20glGetShaderInfoLog&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000245.html">
   <LINK REL="Next"  HREF="000247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Tao-list] Crash using glGetShaderInfoLog</H1>
    <B>Eric Zeitler</B> 
    <A HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Crash%20using%20glGetShaderInfoLog&In-Reply-To="
       TITLE="[Tao-list] Crash using glGetShaderInfoLog">ezeitler at psl.nmsu.edu
       </A><BR>
    <I>Fri Nov 18 15:39:26 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000245.html">[Tao-list] strange results in opengl + seeking for a gtkglext
	wrapper
</A></li>
        <LI>Next message: <A HREF="000247.html">[Tao-list] Crash using glGetShaderInfoLog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#246">[ date ]</a>
              <a href="thread.html#246">[ thread ]</a>
              <a href="subject.html#246">[ subject ]</a>
              <a href="author.html#246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'd been previously using a personally tweaked Tao build so that 
glGetInfoLog, glGetShaderInfoLog and glGetProgramInfoLog used the 
signature glGet*InfoLog (int shader, int maxLength, out length, 
StringBuilder infoLog).  With the current 1.2.0 signature glGet*InfoLog 
(int shader, int maxLength, out length, out string infoLog), the 
application will exit when the method is called without any error 
messages from the VM or exceptions being thrown.  The reason for this is 
that this call assumes the user has allocated maxLength storage at the 
location specified by the infoLog pointer.  Attached is a patch I've 
made to my local copy, I'm not sure if the auto-generated stuff works 
correctly as I don't have python installed, but the changes to Gl.cs 
made it work for me.

--Eric Zeitler
-------------- next part --------------
Index: src/Tao.OpenGl/gen/typemap.xml
===================================================================
--- src/Tao.OpenGl/gen/typemap.xml	(revision 53244)
+++ src/Tao.OpenGl/gen/typemap.xml	(working copy)
@@ -96,6 +96,8 @@
 
   &lt;!-- why can't you just use String? --&gt;
   &lt;type name=&quot;Char&quot;&gt;
+    &lt;!-- for shader infoLog which assumes you've allocated space for the string --&gt;
+    &lt;mapto language=&quot;c#&quot; if_out=&quot;1&quot; if_array=&quot;1&quot; type=&quot;StringBuilder&quot; /&gt;
     &lt;mapto language=&quot;c#&quot; if_array=&quot;1&quot; type=&quot;string&quot; /&gt;
   &lt;/type&gt;
 
Index: src/Tao.OpenGl/Gl.cs
===================================================================
--- src/Tao.OpenGl/Gl.cs	(revision 53244)
+++ src/Tao.OpenGl/Gl.cs	(working copy)
@@ -8273,19 +8273,35 @@
     public static IntPtr ext__GL_ARB_shader_objects__glGetInfoLogARB = IntPtr.Zero;
 
     [OpenGLExtensionImport(&quot;GL_ARB_shader_objects&quot;, &quot;glGetInfoLogARB&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(true)]
+&lt;&lt;&lt;&lt;&lt;&lt;&lt; .mine
+    public static void glGetInfoLogARB (int obj, int maxLength, out int length, StringBuilder infoLog) {
+=======
     public static void glGetInfoLogARB (int obj, int maxLength, out int length, IntPtr infoLog) {
+&gt;&gt;&gt;&gt;&gt;&gt;&gt; .r53244
       throw new NotImplementedException();
     }
     [OpenGLExtensionImport(&quot;GL_ARB_shader_objects&quot;, &quot;glGetInfoLogARB&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(false)]
+&lt;&lt;&lt;&lt;&lt;&lt;&lt; .mine
+    public static void glGetInfoLogARB (uint obj, int maxLength, out int length, StringBuilder infoLog) {
+=======
     public static void glGetInfoLogARB (uint obj, int maxLength, out int length, IntPtr infoLog) {
+&gt;&gt;&gt;&gt;&gt;&gt;&gt; .r53244
       throw new NotImplementedException();
     }
     [OpenGLExtensionImport(&quot;GL_ARB_shader_objects&quot;, &quot;glGetInfoLogARB&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(true)]
+&lt;&lt;&lt;&lt;&lt;&lt;&lt; .mine
+    public static void glGetInfoLogARB (int obj, int maxLength, [Out] int [] length, StringBuilder infoLog) {
+=======
     public static void glGetInfoLogARB (int obj, int maxLength, [Out] int [] length, IntPtr infoLog) {
+&gt;&gt;&gt;&gt;&gt;&gt;&gt; .r53244
       throw new NotImplementedException();
     }
     [OpenGLExtensionImport(&quot;GL_ARB_shader_objects&quot;, &quot;glGetInfoLogARB&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(false)]
+&lt;&lt;&lt;&lt;&lt;&lt;&lt; .mine
+    public static void glGetInfoLogARB (uint obj, int maxLength, [Out] int [] length, StringBuilder infoLog) {
+=======
     public static void glGetInfoLogARB (uint obj, int maxLength, [Out] int [] length, IntPtr infoLog) {
+&gt;&gt;&gt;&gt;&gt;&gt;&gt; .r53244
       throw new NotImplementedException();
     }
 
@@ -40265,37 +40281,21 @@
     public static IntPtr ext__GL_VERSION_2_0__glGetProgramInfoLog = IntPtr.Zero;
 
     [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetProgramInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(true)]
-    public static void glGetProgramInfoLog (int program, int bufSize, out int length, out string infoLog) {
+    public static void glGetProgramInfoLog (int program, int bufSize, out int length, StringBuilder infoLog) {
       throw new NotImplementedException();
     }
     [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetProgramInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(false)]
-    public static void glGetProgramInfoLog (uint program, int bufSize, out int length, out string infoLog) {
+    public static void glGetProgramInfoLog (uint program, int bufSize, out int length, StringBuilder infoLog) {
       throw new NotImplementedException();
     }
     [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetProgramInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(true)]
-    public static void glGetProgramInfoLog (int program, int bufSize, [Out] int [] length, out string infoLog) {
+    public static void glGetProgramInfoLog (int program, int bufSize, [Out] int [] length, StringBuilder infoLog) {
       throw new NotImplementedException();
     }
     [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetProgramInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(false)]
-    public static void glGetProgramInfoLog (uint program, int bufSize, [Out] int [] length, out string infoLog) {
+    public static void glGetProgramInfoLog (uint program, int bufSize, [Out] int [] length, StringBuilder infoLog) {
       throw new NotImplementedException();
     }
-    [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetProgramInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(true)]
-    public static void glGetProgramInfoLog (int program, int bufSize, out int length, [Out] string [] infoLog) {
-      throw new NotImplementedException();
-    }
-    [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetProgramInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(false)]
-    public static void glGetProgramInfoLog (uint program, int bufSize, out int length, [Out] string [] infoLog) {
-      throw new NotImplementedException();
-    }
-    [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetProgramInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(true)]
-    public static void glGetProgramInfoLog (int program, int bufSize, [Out] int [] length, [Out] string [] infoLog) {
-      throw new NotImplementedException();
-    }
-    [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetProgramInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(false)]
-    public static void glGetProgramInfoLog (uint program, int bufSize, [Out] int [] length, [Out] string [] infoLog) {
-      throw new NotImplementedException();
-    }
 
     [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetShaderiv&quot;)]
     public static IntPtr ext__GL_VERSION_2_0__glGetShaderiv = IntPtr.Zero;
@@ -40321,37 +40321,21 @@
     public static IntPtr ext__GL_VERSION_2_0__glGetShaderInfoLog = IntPtr.Zero;
 
     [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetShaderInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(true)]
-    public static void glGetShaderInfoLog (int shader, int bufSize, out int length, out string infoLog) {
+    public static void glGetShaderInfoLog (int shader, int bufSize, out int length, StringBuilder infoLog) {
       throw new NotImplementedException();
     }
     [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetShaderInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(false)]
-    public static void glGetShaderInfoLog (uint shader, int bufSize, out int length, out string infoLog) {
+    public static void glGetShaderInfoLog (uint shader, int bufSize, out int length, StringBuilder infoLog) {
       throw new NotImplementedException();
     }
     [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetShaderInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(true)]
-    public static void glGetShaderInfoLog (int shader, int bufSize, [Out] int [] length, out string infoLog) {
+    public static void glGetShaderInfoLog (int shader, int bufSize, [Out] int [] length, StringBuilder infoLog) {
       throw new NotImplementedException();
     }
     [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetShaderInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(false)]
-    public static void glGetShaderInfoLog (uint shader, int bufSize, [Out] int [] length, out string infoLog) {
+    public static void glGetShaderInfoLog (uint shader, int bufSize, [Out] int [] length, StringBuilder infoLog) {
       throw new NotImplementedException();
     }
-    [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetShaderInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(true)]
-    public static void glGetShaderInfoLog (int shader, int bufSize, out int length, [Out] string [] infoLog) {
-      throw new NotImplementedException();
-    }
-    [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetShaderInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(false)]
-    public static void glGetShaderInfoLog (uint shader, int bufSize, out int length, [Out] string [] infoLog) {
-      throw new NotImplementedException();
-    }
-    [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetShaderInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(true)]
-    public static void glGetShaderInfoLog (int shader, int bufSize, [Out] int [] length, [Out] string [] infoLog) {
-      throw new NotImplementedException();
-    }
-    [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetShaderInfoLog&quot;), SuppressUnmanagedCodeSecurity, CLSCompliantAttribute(false)]
-    public static void glGetShaderInfoLog (uint shader, int bufSize, [Out] int [] length, [Out] string [] infoLog) {
-      throw new NotImplementedException();
-    }
 
     [OpenGLExtensionImport(&quot;GL_VERSION_2_0&quot;, &quot;glGetShaderSource&quot;)]
     public static IntPtr ext__GL_VERSION_2_0__glGetShaderSource = IntPtr.Zero;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000245.html">[Tao-list] strange results in opengl + seeking for a gtkglext
	wrapper
</A></li>
	<LI>Next message: <A HREF="000247.html">[Tao-list] Crash using glGetShaderInfoLog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#246">[ date ]</a>
              <a href="thread.html#246">[ thread ]</a>
              <a href="subject.html#246">[ subject ]</a>
              <a href="author.html#246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://galactus.ximian.com/mailman/listinfo/tao-list">More information about the Tao-list
mailing list</a><br>
</body></html>
