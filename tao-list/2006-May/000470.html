<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Tao-list] Printing a screenshot
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Printing%20a%20screenshot&In-Reply-To=018f01c6760c%24086a7f00%246401a8c0%40jordans">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000469.html">
   <LINK REL="Next"  HREF="000471.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Tao-list] Printing a screenshot</H1>
    <B>Alexander Kolliopoulos</B> 
    <A HREF="mailto:tao-list%40lists.ximian.com?Subject=%5BTao-list%5D%20Printing%20a%20screenshot&In-Reply-To=018f01c6760c%24086a7f00%246401a8c0%40jordans"
       TITLE="[Tao-list] Printing a screenshot">akolliop at gmail.com
       </A><BR>
    <I>Fri May 12 19:07:28 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000469.html">[Tao-list] Printing a screenshot
</A></li>
        <LI>Next message: <A HREF="000471.html">[Tao-list] Printing a screenshot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#470">[ date ]</a>
              <a href="thread.html#470">[ thread ]</a>
              <a href="subject.html#470">[ subject ]</a>
              <a href="author.html#470">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jordan, I have been using the following method to make screenshots.
The Scan0 member of a Bitmap is really a pointer to its pixel data, so
you can use it as an argument to glReadPixels without unsafe code. The
Width and Height properties are defined in my class, you might want to
pass them in as parameters instead. I hope this helps.

-Alex


public Bitmap CopyColorBuffer()
{
    Bitmap bitmap = new Bitmap(Width, Height);
    BitmapData bitmapData = bitmap.LockBits(new Rectangle(0, 0,
bitmap.Width, bitmap.Height),
        System.Drawing.Imaging.ImageLockMode.WriteOnly,
        System.Drawing.Imaging.PixelFormat.Format24bppRgb);

    Gl.glReadPixels(0, 0, bitmap.Width, bitmap.Height, Gl.GL_BGR_EXT,
Gl.GL_UNSIGNED_BYTE, bitmapData.Scan0);

    bitmap.UnlockBits(bitmapData);
    bitmap.RotateFlip(RotateFlipType.RotateNoneFlipY);

    return bitmap;
}


On 5/12/06, Jordan Sparks &lt;<A HREF="http://galactus.ximian.com/mailman/listinfo/tao-list">jsparks at free-dental.com</A>&gt; wrote:
&gt;<i> Any suggestions on how to print a screenshot of the SimpleOpenGlControl?  I
</I>&gt;<i> assume I will need to use glReadPixels() to copy the pixels from the frame
</I>&gt;<i> buffer to a memory array, and then convert that to an Image.  The problem is
</I>&gt;<i> that there is no sample code for glReadPixels() in the RedBook.  And even if
</I>&gt;<i> there was, it would not be in C#.  I have never used pointers in my life,
</I>&gt;<i> and glReadPixels() requires a pointer to an array.  Does this mean that I
</I>&gt;<i> will have to allow unsafe mode?  I don't want to do that.  So my current
</I>&gt;<i> strategy is going to be to learn how to use pointers and to keep trying it
</I>&gt;<i> from that angle.  But I'm concerned that I'm doing it completely wrong.
</I>&gt;<i> What's the best way?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Jordan Sparks
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000469.html">[Tao-list] Printing a screenshot
</A></li>
	<LI>Next message: <A HREF="000471.html">[Tao-list] Printing a screenshot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#470">[ date ]</a>
              <a href="thread.html#470">[ thread ]</a>
              <a href="subject.html#470">[ subject ]</a>
              <a href="author.html#470">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://galactus.ximian.com/mailman/listinfo/tao-list">More information about the Tao-list
mailing list</a><br>
</body></html>
