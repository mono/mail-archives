<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Patch for System.IO.Ports.SerialPort ReadLinefunction
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%20for%20System.IO.Ports.SerialPort%20ReadLinefunction&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025567.html">
   <LINK REL="Next"  HREF="025579.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Patch for System.IO.Ports.SerialPort ReadLinefunction</H1>
    <B>Michael Mattess</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%20for%20System.IO.Ports.SerialPort%20ReadLinefunction&In-Reply-To="
       TITLE="[Mono-dev] Patch for System.IO.Ports.SerialPort ReadLinefunction">MichaelMattess at rauland.com.au
       </A><BR>
    <I>Mon Nov  5 20:56:55 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="025567.html">[Mono-dev] Patch for System.IO.Ports.SerialPort	ReadLine	function
</A></li>
        <LI>Next message: <A HREF="025579.html">[Mono-dev] Patch for System.IO.Ports.SerialPort ReadLinefunction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25574">[ date ]</a>
              <a href="thread.html#25574">[ thread ]</a>
              <a href="subject.html#25574">[ subject ]</a>
              <a href="author.html#25574">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Miguel,

 

Yes using the ReadTo function does make the most sense as it is a special case of the operation.

 

I had a look at the ReadTo function and I think it is broken.  It assumes that it is in the initial state (IE current is 0) when it encounters the beginning of the string it is reading to.  So if we are reading to &quot;ababZ&quot; and the input is &quot;abababZfoo&quot; it will read past the &quot;ababZ&quot;.  

 

It was because of this that I put the 'state-driven' approach into the too hard / too complex basket when I wrote my initial function.  But thinking about it further the ReadTo function could be extended to keep multiple states (ie a list of 'current' offsets).  One for each time a potential beginning of the string we are looking for is encountered.  I have attached a file with such an extended ReadTo function.

 

 Let me know your thought.

 

Regards

Michael

 

 


________________________________

From: Miguel de Icaza [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at novell.com</A>]
Sent: Tue 06.11.2007 02:06
To: Michael Mattess
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Patch for System.IO.Ports.SerialPort ReadLinefunction



Hello,

    My ReadLine routine is broken, it did not append data that was only
partially part of the ReadLine.   While I was fixing it, I noticed that
we already have a routine that did this correctly (ReadTo).

    So am going to just change the code to be:

        ReadTo (new_line).

Miguel.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071106/b8e46c4f/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071106/b8e46c4f/attachment.html</A> 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: ReadToFunction.txt
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071106/b8e46c4f/attachment.txt">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071106/b8e46c4f/attachment.txt</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025567.html">[Mono-dev] Patch for System.IO.Ports.SerialPort	ReadLine	function
</A></li>
	<LI>Next message: <A HREF="025579.html">[Mono-dev] Patch for System.IO.Ports.SerialPort ReadLinefunction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25574">[ date ]</a>
              <a href="thread.html#25574">[ thread ]</a>
              <a href="subject.html#25574">[ subject ]</a>
              <a href="author.html#25574">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
