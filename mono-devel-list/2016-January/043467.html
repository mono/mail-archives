<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Unable to use System.Console from embedded
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Unable%20to%20use%20System.Console%20from%20embedded&In-Reply-To=%3C1452699361870-4667301.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043466.html">
   <LINK REL="Next"  HREF="043468.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Unable to use System.Console from embedded</H1>
    <B>Chase</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Unable%20to%20use%20System.Console%20from%20embedded&In-Reply-To=%3C1452699361870-4667301.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] Unable to use System.Console from embedded">kiro.roo at gmail.com
       </A><BR>
    <I>Wed Jan 13 15:36:01 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="043466.html">[Mono-dev] Unable to use System.Console from embedded
</A></li>
        <LI>Next message: <A HREF="043468.html">[Mono-dev] Unable to use System.Console from embedded
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43467">[ date ]</a>
              <a href="thread.html#43467">[ thread ]</a>
              <a href="subject.html#43467">[ subject ]</a>
              <a href="author.html#43467">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Elmar Haneke wrote
&gt;<i> Is it on MS-Windows?
</I>&gt;<i> 
</I>&gt;<i> In this case you have to build an console application else there is no
</I>&gt;<i> Console at all.
</I>
I am running this on Windows 7.

The application is not being run as a console app, however the standard
output is being piped to a log file where we are able to receive all cout
and fprintf statements.

After doing a bit of digging last night I found that Mono was outputting
this statement when the System.Console.Write was being executed.
&quot;Assertion at f:\mono-master\mono\metadata\marshal.c:8912, condition
`enter_method' not met&quot;

I looked a bit into the mono code and the &quot;enter_method&quot; appears to be
something that deals with thread locking, which I think the system didn't
init or wasn't able to find.  Though I'm not very familiar with the inner
workings it suggests that something in the setup is not right.

Below is the code I'm using to init the framework.


&gt;<i> //Set dirs
</I>&gt;<i> string rootPath = UtAppInterface::getWorkingDirectory();
</I>&gt;<i> mono_set_dirs((rootPath + &quot;\\mono\\lib\\&quot;).c_str(), (rootPath +
</I>&gt;<i> &quot;\\mono\\ect\\&quot;).c_str());
</I>&gt;<i> 
</I>&gt;<i> //Create domains
</I>&gt;<i> mainDomain = mono_jit_init(&quot;MainDomain&quot;);
</I>&gt;<i> 
</I>&gt;<i> //Open
</I>&gt;<i> MonoAssembly* assembly = mono_domain_assembly_open(mainDomain, (rootPath +
</I>&gt;<i> &quot;\\mono\\App.exe&quot;).c_str());
</I>&gt;<i> if(!assembly)
</I>&gt;<i> 	return false;
</I>&gt;<i> 
</I>&gt;<i> //Execute
</I>&gt;<i> int argc = 1;
</I>&gt;<i> char* argv = &quot;App.exe&quot;;
</I>&gt;<i> auto retval = mono_jit_exec(mainDomain, assembly, argc, &amp;argv);
</I>
The App.exe is quite simple.


&gt;<i> using System;
</I>&gt;<i> 
</I>&gt;<i> namespace App
</I>&gt;<i> {
</I>&gt;<i> 	public class MyClass
</I>&gt;<i> 	{
</I>&gt;<i> 		static void Main(string[] args)
</I>&gt;<i> 		{
</I>&gt;<i> 			System.Console.Write (&quot;Hello World&quot;);
</I>&gt;<i> 		}
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>




--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Unable-to-use-System-Console-from-embedded-tp4667299p4667301.html">http://mono.1490590.n4.nabble.com/Unable-to-use-System-Console-from-embedded-tp4667299p4667301.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043466.html">[Mono-dev] Unable to use System.Console from embedded
</A></li>
	<LI>Next message: <A HREF="043468.html">[Mono-dev] Unable to use System.Console from embedded
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43467">[ date ]</a>
              <a href="thread.html#43467">[ thread ]</a>
              <a href="subject.html#43467">[ subject ]</a>
              <a href="author.html#43467">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
