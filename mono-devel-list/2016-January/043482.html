<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Strange build problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Strange%20build%20problem&In-Reply-To=%3CCALH18MHNiEh4a8U_OcYAE4yLYNfM9Pc-_szpBq8OysOdtBk9-Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043476.html">
   <LINK REL="Next"  HREF="043478.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Strange build problem</H1>
    <B>Alexander K&#246;plinger</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Strange%20build%20problem&In-Reply-To=%3CCALH18MHNiEh4a8U_OcYAE4yLYNfM9Pc-_szpBq8OysOdtBk9-Q%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Strange build problem">alexander.koeplinger at xamarin.com
       </A><BR>
    <I>Fri Jan 22 16:54:34 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="043476.html">[Mono-dev] Strange build problem
</A></li>
        <LI>Next message: <A HREF="043478.html">[Mono-dev] Data protection failed exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43482">[ date ]</a>
              <a href="thread.html#43482">[ thread ]</a>
              <a href="subject.html#43482">[ subject ]</a>
              <a href="author.html#43482">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>For the benefit of future readers: this turned out to be gcc compiler bugs
in the versions we were using.

On nealef-s390x-1 we are using gcc 4.4.7. Neale sent
<A HREF="https://github.com/mono/mono/pull/2488">https://github.com/mono/mono/pull/2488</A> to workaround this problem which
worked fine there.
However, it broke the build on nealef-s390x-2 with gcc 4.3.4 (which was
working fine before!) with the exact same error that the patch fixed on the
other machine. So Neale sent another PR to fix both:
<A HREF="https://github.com/mono/mono/pull/2494">https://github.com/mono/mono/pull/2494</A>

I've now reenabled both s390x Jenkins workers again and the build seems
happy :)

- Alex

2016-01-20 15:02 GMT+01:00 Alexander K&#246;plinger &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">alexander.koeplinger at xamarin.com</A>&gt;:

&gt;<i> Hey,
</I>&gt;<i>
</I>&gt;<i> Are you sure you&#8217;re running this on the nealef-s390x-2 machine and not
</I>&gt;<i> nealef-s390x-1 ?
</I>&gt;<i> This sounds exactly like the problem with the ancient gcc we ran into on
</I>&gt;<i> the -1 machine, that&#8217;s why we&#8217;re only using the -2 machine on Jenkins now.
</I>&gt;<i>
</I>&gt;<i> In fact, my IRC log shows we discussed this back in October 2015:
</I>&gt;<i>
</I>&gt;<i> &lt;directhex&gt; neale: still no success compiling on nealef-s390x-1, with -O2
</I>&gt;<i> &lt;directhex&gt;
</I>&gt;<i> <A HREF="https://jenkins.mono-project.com/job/z/label=centos-s390x/2065/parsed_console/log_content.html#ERROR1">https://jenkins.mono-project.com/job/z/label=centos-s390x/2065/parsed_console/log_content.html#ERROR1</A>
</I>&gt;<i> &lt;directhex&gt; System/AndroidPlatform.cs(66,246): error CS1525: Unexpected
</I>&gt;<i> symbol `end-of-file', expecting `end-of-file'
</I>&gt;<i> &lt;directhex&gt; ._.
</I>&gt;<i> &lt;neale&gt; directhex: At least it got rid of the inline errors problem ;-)
</I>&gt;<i> &lt;directhex&gt; yes this is technically true
</I>&gt;<i> &lt;neale&gt; I've never seen this particular problem before
</I>&gt;<i> &lt;directhex&gt; maybe a checkout problem? want to delete the workspace?
</I>&gt;<i> &lt;neale&gt; The z workspace?
</I>&gt;<i> &lt;akoeplinger&gt; hmm, it affects all files that are completely #ifdefed out
</I>&gt;<i> &lt;neale&gt; Yup
</I>&gt;<i> &lt;directhex&gt; neale: yes
</I>&gt;<i> &lt;neale&gt; z gone\
</I>&gt;<i> &lt;directhex&gt; it's renamed to &quot;z&quot; because the same job also handles windows
</I>&gt;<i> builds, and windows has a silly low PATH_MAX
</I>&gt;<i> &lt;directhex&gt; which the old name was causing errors for
</I>&gt;<i> &lt;neale&gt; Ah
</I>&gt;<i> &lt;directhex&gt; so single-char job names if they run on windows
</I>&gt;<i> &lt;neale&gt; I ran a build in
</I>&gt;<i> /home/jenkins/workspace/test-mono-mainline-communityarchitectures/label/centos-s390x
</I>&gt;<i> (From Sep28) and forced a recompile of Android.cs which has the same ifdef
</I>&gt;<i> situation and the build was clean.
</I>&gt;<i> &lt;directhex&gt; that job name is the old &quot;z&quot; job
</I>&gt;<i> &lt;directhex&gt; see, very long name, poor windows
</I>&gt;<i> &lt;neale&gt; Understood, just wanted to point out that a build used to work for
</I>&gt;<i> those files
</I>&gt;<i>
</I>&gt;<i> AFAIK we never got past that problem on the -1 machine, so we just stopped
</I>&gt;<i> using it.
</I>&gt;<i>
</I>&gt;<i> - Alex
</I>&gt;<i>
</I>&gt;<i> &gt; Am 20.01.2016 um 03:13 schrieb Neale Ferguson &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">neale at sinenomine.net</A>&gt;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Re: bugzilla 37781
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On the same virtual machine in which the Jenkins bot successfully builds
</I>&gt;<i> &gt; mono, I am encountering failures of an unusual type. Thinking it might be
</I>&gt;<i> &gt; a hangover to something in the account&#8217;s home directory, I created a
</I>&gt;<i> &gt; completely new account, cloned from master, configured and built. It
</I>&gt;<i> craps
</I>&gt;<i> &gt; out with the following:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; MCS     [build] mscorlib.dll
</I>&gt;<i> &gt; Assembly/AssemblyInfo.cs(33,5): error CS8025: Parsing error
</I>&gt;<i> &gt; System/AndroidPlatform.cs(66,246): error CS1525: Unexpected symbol
</I>&gt;<i> &gt; `end-of-file', expecting `end-of-file'
</I>&gt;<i> &gt; System/Console.iOS.cs(127,246): error CS1525: Unexpected symbol
</I>&gt;<i> &gt; `end-of-file', expecting `end-of-file'
</I>&gt;<i> &gt; System/Guid.MonoTouch.cs(24,253): error CS1525: Unexpected symbol
</I>&gt;<i> &gt; `end-of-file', expecting `end-of-file'
</I>&gt;<i> &gt; System/TimeZoneInfo.Android.cs(737,246): error CS1525: Unexpected symbol
</I>&gt;<i> &gt; `end-of-file', expecting `end-of-file'
</I>&gt;<i> &gt; System/TimeZoneInfo.MonoTouch.cs(109,246): error CS1525: Unexpected
</I>&gt;<i> symbol
</I>&gt;<i> &gt; `end-of-file', expecting `end-of-file'
</I>&gt;<i> &gt; System.Globalization/RegionInfo.MonoTouch.cs(54,246): error CS1525:
</I>&gt;<i> &gt; Unexpected symbol `end-of-file', expecting `end-of-file'
</I>&gt;<i> &gt; System.IO/LogcatTextWriter.cs(80,246): error CS1525: Unexpected symbol
</I>&gt;<i> &gt; `end-of-file', expecting `end-of-file'
</I>&gt;<i> &gt; System.Security/SecurityManager_mobile.cs(215,246): error CS1525:
</I>&gt;<i> &gt; Unexpected symbol `end-of-file', expecting `end-of-file'
</I>&gt;<i> &gt; System.Security.Cryptography/CryptoConfig.fullaot.cs(239,246): error
</I>&gt;<i> &gt; CS1525: Unexpected symbol `end-of-file', expecting `end-of-file'
</I>&gt;<i> &gt;
</I>&gt;<i> ../../../external/referencesource/mscorlib/system/resources/__hresults.cs(2
</I>&gt;<i> &gt; 6,246): error CS1525: Unexpected symbol `end-of-file', expecting
</I>&gt;<i> &gt; `end-of-file'
</I>&gt;<i> &gt;
</I>&gt;<i> ../../../external/referencesource/mscorlib/system/resources/looselylinkedre
</I>&gt;<i> &gt; sourcereference.cs(89,246): error CS1525: Unexpected symbol
</I>&gt;<i> `end-of-file',
</I>&gt;<i> &gt; expecting `end-of-file'
</I>&gt;<i> &gt; Compilation failed: 12 error(s), 0 warnings
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am at a loss to work out WTF is happening. I like the way the error
</I>&gt;<i> &gt; message keeps a straight face when it complains about encountering
</I>&gt;<i> &gt; &#8220;end-of-file&#8221; symbol when it was really expecting &#8220;end-of-file&#8221;!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Any suggestions about where to look?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Neale
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20160122/c2554b22/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20160122/c2554b22/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043476.html">[Mono-dev] Strange build problem
</A></li>
	<LI>Next message: <A HREF="043478.html">[Mono-dev] Data protection failed exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43482">[ date ]</a>
              <a href="thread.html#43482">[ thread ]</a>
              <a href="subject.html#43482">[ subject ]</a>
              <a href="author.html#43482">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
