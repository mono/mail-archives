<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] sgen + ConditionalWeakTable&lt;,&gt; crashes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20sgen%20%2B%20ConditionalWeakTable%3C%2C%3E%20crashes&In-Reply-To=CAAAqxPpMe1YPTcTO70THbDLAtbGWxTuOTX%2BwyO1zpeKXNgkGWg%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038113.html">
   <LINK REL="Next"  HREF="038114.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] sgen + ConditionalWeakTable&lt;,&gt; crashes</H1>
    <B>Brian Luczkiewicz</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20sgen%20%2B%20ConditionalWeakTable%3C%2C%3E%20crashes&In-Reply-To=CAAAqxPpMe1YPTcTO70THbDLAtbGWxTuOTX%2BwyO1zpeKXNgkGWg%40mail.gmail.com"
       TITLE="[Mono-dev] sgen + ConditionalWeakTable&lt;,&gt; crashes">brian at sooloos.com
       </A><BR>
    <I>Sat Oct  1 12:19:37 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="038113.html">[Mono-dev] sgen + ConditionalWeakTable&lt;,&gt; crashes
</A></li>
        <LI>Next message: <A HREF="038114.html">[Mono-dev] Socket.Accept() causes [1]+  Stopped
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38118">[ date ]</a>
              <a href="thread.html#38118">[ thread ]</a>
              <a href="subject.html#38118">[ subject ]</a>
              <a href="author.html#38118">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>While attempting to reproduce this, I ran into another
ConditionalWeakTable/sgen bug + entered it into the bug tracker. Unsure if
this is related to the segv or not:

<A HREF="http://bugzilla.xamarin.com/show_bug.cgi?id=1175">http://bugzilla.xamarin.com/show_bug.cgi?id=1175</A>



On Sat, Oct 1, 2011 at 12:51 AM, Brian Luczkiewicz &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">brian at sooloos.com</A>&gt;wrote:

&gt;<i> Before I track down a tiny repro case for this and file a formal bug
</I>&gt;<i> report, I wanted to check and see if these stack traces look like any known
</I>&gt;<i> bugs.
</I>&gt;<i>
</I>&gt;<i> We've recently added usage of ConditionalWeakTable&lt;,&gt; api to our codebase.
</I>&gt;<i> We are now seeing some crashes in the mono runtime. The crashes appear to be
</I>&gt;<i> sgen specific.
</I>&gt;<i>
</I>&gt;<i> The stack traces look like this:
</I>&gt;<i>
</I>&gt;<i> Stacktrace:
</I>&gt;<i>
</I>&gt;<i>   at (wrapper managed-to-native) object.__icall_wrapper_mono_object_castclass (object,intptr) &lt;IL 0x00022, 0xffffffff&gt;
</I>&gt;<i>   at System.Runtime.CompilerServices.ConditionalWeakTable`2.TryGetValue (TKey,TValue&amp;) [0x00083] in /private/tmp/monobuild/build/BUILD/mono-2.10.5/mcs/cl... stack frames of our application code ...
</I>&gt;<i>   at Application.Main (string[]) [0x00622] in /Projects/sooloos/sooloos/Client/Desktop/main.cs:266
</I>&gt;<i>   at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_void_object (object,intptr,intptr,intptr) &lt;IL 0x00050, 0xffffffff&gt;
</I>&gt;<i>
</I>&gt;<i> Native stacktrace:
</I>&gt;<i>
</I>&gt;<i>     0   Sooloos                             0x000bc1d6 mono_handle_native_sigsegv + 422
</I>&gt;<i>     1   Sooloos                             0x000049fe mono_sigsegv_signal_handler + 334
</I>&gt;<i>     2   libsystem_c.dylib                   0x98cd559b _sigtramp + 43
</I>&gt;<i>     3   ???                                 0xffffffff 0x0 + 4294967295
</I>&gt;<i>     4   Sooloos                             0x0016be1c mono_image_lock + 29
</I>&gt;<i>     5   Sooloos                             0x0016bf55 mono_image_property_insert + 17
</I>&gt;<i>     6   Sooloos                             0x00135659 mono_class_set_failure + 84
</I>&gt;<i>     7   Sooloos                             0x0012c745 mono_class_init + 709
</I>&gt;<i>     8   Sooloos                             0x001331c4 mono_class_is_assignable_from + 109
</I>&gt;<i>     9   Sooloos                             0x001cc1bf mono_object_isinst + 118
</I>&gt;<i>     10  Sooloos                             0x0007b549 mono_object_castclass + 57
</I>&gt;<i>     11  ???                                 0x004bb8e8 0x0 + 4962536
</I>&gt;<i>     12  ???                                 0x0c848794 0x0 + 210012052
</I>&gt;<i>     13  ???                                 0x096fc710 0x0 + 158320400
</I>&gt;<i>     14  ???                                 0x077aaa80 0x0 + 125479552
</I>&gt;<i>     15  ???                                 0x109fdf74 0x0 + 278912884
</I>&gt;<i>     16  ???                                 0x109fdf34 0x0 + 278912820
</I>&gt;<i>     17  ???                                 0x109b5b8b 0x0 + 278616971
</I>&gt;<i>     18  ???                                 0x109b42e8 0x0 + 278610664
</I>&gt;<i>     19  ???                                 0x109dfb8e 0x0 + 278789006
</I>&gt;<i>     20  ???                                 0x109fb090 0x0 + 278900880
</I>&gt;<i>     21  ???                                 0x109fae70 0x0 + 278900336
</I>&gt;<i>     22  ???                                 0x109dfb8e 0x0 + 278789006
</I>&gt;<i>     23  ???                                 0x109fb090 0x0 + 278900880
</I>&gt;<i>     24  ???                                 0x109fae70 0x0 + 278900336
</I>&gt;<i>     25  ???                                 0x109dfb8e 0x0 + 278789006
</I>&gt;<i>     26  ???                                 0x109fb090 0x0 + 278900880
</I>&gt;<i>     27  ???                                 0x137edc24 0x0 + 327080996
</I>&gt;<i>     28  ???                                 0x109dfb8e 0x0 + 278789006
</I>&gt;<i>     29  ???                                 0x109fb090 0x0 + 278900880
</I>&gt;<i>     30  ???                                 0x109fae70 0x0 + 278900336
</I>&gt;<i>     31  ???                                 0x109dfb8e 0x0 + 278789006
</I>&gt;<i>     32  ???                                 0x109fb090 0x0 + 278900880
</I>&gt;<i>     33  ???                                 0x109fae70 0x0 + 278900336
</I>&gt;<i>     34  ???                                 0x109dfb8e 0x0 + 278789006
</I>&gt;<i>     35  ???                                 0x109fb090 0x0 + 278900880
</I>&gt;<i>     36  ???                                 0x109fae70 0x0 + 278900336
</I>&gt;<i>     37  ???                                 0x109dfb8e 0x0 + 278789006
</I>&gt;<i>     38  ???                                 0x109fb090 0x0 + 278900880
</I>&gt;<i>     39  ???                                 0x109fae70 0x0 + 278900336
</I>&gt;<i>     40  ???                                 0x109dfb8e 0x0 + 278789006
</I>&gt;<i>     41  ???                                 0x109fb090 0x0 + 278900880
</I>&gt;<i>     42  ???                                 0x109dfb8e 0x0 + 278789006
</I>&gt;<i>     43  ???                                 0x109fb090 0x0 + 278900880
</I>&gt;<i>     44  ???                                 0x109fae70 0x0 + 278900336
</I>&gt;<i>     45  ???                                 0x109dfb8e 0x0 + 278789006
</I>&gt;<i>     46  ???                                 0x109de264 0x0 + 278782564
</I>&gt;<i>     47  ???                                 0x0ca05744 0x0 + 211834692
</I>&gt;<i>     48  ???                                 0x0ca05506 0x0 + 211834118
</I>&gt;<i>     49  ???                                 0x004b32b4 0x0 + 4928180
</I>&gt;<i>     50  ???                                 0x004b35a3 0x0 + 4928931
</I>&gt;<i>     51  Sooloos                             0x00010724 mono_jit_runtime_invoke + 164
</I>&gt;<i>     52  Sooloos                             0x001c7815 mono_runtime_invoke + 137
</I>&gt;<i>     53  Sooloos                             0x001ca0f4 mono_runtime_exec_main + 669
</I>&gt;<i>     54  Sooloos                             0x001c942e mono_runtime_run_main + 843
</I>&gt;<i>     55  Sooloos                             0x0008caf0 mono_main + 8576
</I>&gt;<i>     56  Sooloos                             0x00002eb5 start + 53
</I>&gt;<i>     57  ???
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20111001/e70c00ec/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20111001/e70c00ec/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038113.html">[Mono-dev] sgen + ConditionalWeakTable&lt;,&gt; crashes
</A></li>
	<LI>Next message: <A HREF="038114.html">[Mono-dev] Socket.Accept() causes [1]+  Stopped
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38118">[ date ]</a>
              <a href="thread.html#38118">[ thread ]</a>
              <a href="subject.html#38118">[ subject ]</a>
              <a href="author.html#38118">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
