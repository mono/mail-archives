<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] SGen improved and looking for testers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20SGen%20improved%20and%20looking%20for%20testers&In-Reply-To=f54ff3e80912140902p6c29cd6ar6f80a0fdb8de368c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035035.html">
   <LINK REL="Next"  HREF="035037.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] SGen improved and looking for testers</H1>
    <B>Jonathan Gagnon</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20SGen%20improved%20and%20looking%20for%20testers&In-Reply-To=f54ff3e80912140902p6c29cd6ar6f80a0fdb8de368c%40mail.gmail.com"
       TITLE="[Mono-dev] SGen improved and looking for testers">jonathan.gagnon at croesus.com
       </A><BR>
    <I>Fri May 21 12:59:28 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="035035.html">[Mono-dev] [PATCH] Android Support [1/4]
</A></li>
        <LI>Next message: <A HREF="035037.html">[Mono-dev] SGen improved and looking for testers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35036">[ date ]</a>
              <a href="thread.html#35036">[ thread ]</a>
              <a href="subject.html#35036">[ subject ]</a>
              <a href="author.html#35036">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Mark,

I did some tests with May 19th tarballs and I'm impressed to see that the
memory usage in one of my test is a lot lower when using sgen compared to
boehm.

Stability also seemed to be great until I got a segmentation fault.  Here's
the call stack in case you can get something out of it:

#0  0x081c2d12 in copy_object_no_checks (obj=0xf780fd98) at sgen-gc.c:2082
#1  0x081c3a84 in major_copy_or_mark_object (obj_slot=0xf189c348) at
sgen-major-copying.c:384
#2  0x081c4180 in major_scan_object (start=&lt;value optimized out&gt;) at
sgen-scan-object.h:81
#3  0x081c595d in major_collection (reason=0x82b3b2d &quot;minor overflow&quot;) at
sgen-gc.c:2335
#4  0x081c666a in minor_collect_or_expand_inner (size=4096) at
sgen-gc.c:3602
#5  0x081c68c5 in mono_gc_alloc_obj_nolock (vtable=0x8383cf0, size=&lt;value
optimized out&gt;) at sgen-gc.c:4148
#6  0x081c6b0c in mono_gc_alloc_vector (vtable=0x8383cf0, size=32,
max_length=4) at sgen-gc.c:4272
#7  0xf79df5ab in ?? ()
#8  0x08383cf0 in ?? ()
#9  0x00000020 in ?? ()
#10 0x00000004 in ?? ()
#11 0x082d869c in nursery_size ()
#12 0xf2935928 in ?? ()
#13 0x088360b0 in ?? ()
#14 0xf2935958 in ?? ()
#15 0x081c0103 in register_for_finalization (obj=0xf78016b8,
user_data=0xf7801718, generation=&lt;value optimized out&gt;)
    at sgen-gc.c:4901
#16 0xf79dca25 in ?? ()
#17 0x08383cf0 in ?? ()
#18 0x00000020 in ?? ()
#19 0x00000004 in ?? ()
#20 0x08140f50 in object_register_finalizer (obj=0xf78016b8,
callback=0xf2935948) at gc.c:302
#21 0xf55ccb40 in ?? ()
#22 0x08383cf0 in ?? ()
#23 0x00000004 in ?? ()
#24 0x00000000 in ?? ()

The process that crashed is multi-threaded and is doing heavy
allocations/deallocations.  It's loading data from a database and doing
calculations.
 
Jonathan

-----Message d'origine-----
De&#160;: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] De la part de Mark Probst
Envoy&#233;&#160;: Monday, December 14, 2009 12:03 PM
&#192;&#160;: mono-devel-list
Objet&#160;: [Mono-dev] SGen improved and looking for testers

Hello everybody,

SGen, our new garbage collector, has improved quite a bit since my
last plea for testers about a month ago, so here I go again...  We've
improved stability, performance, and, most importantly, memory
consumption, to the point where SGen now uses less memory than Boehm
for the (not too complex) workloads we're testing it with.
Performance isn't there yet, and it's still not as stable as Boehm,
but I'd like to ask developers who want to help us to give it a try
and to give us feedback and bug reports.  I'm especially interested in
cases where it crashes and in cases where it uses (significantly) more
memory than Boehm.

It's still only available for Linux on AMD64 and x86.  To enable it,
configure mono with &quot;--with-gc=sgen --enable-minimal=aot&quot; and, if you
have a line starting with &quot;ENABLE_AOT&quot; in mcs/build/config.make,
comment it out or delete it.

Thanks!

Mark
_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
No virus found in this incoming message.
Checked by AVG - www.avg.com 
Version: 9.0.716 / Virus Database: 270.14.100/2554 - Release Date: 12/14/09
02:37:00

</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035035.html">[Mono-dev] [PATCH] Android Support [1/4]
</A></li>
	<LI>Next message: <A HREF="035037.html">[Mono-dev] SGen improved and looking for testers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35036">[ date ]</a>
              <a href="thread.html#35036">[ thread ]</a>
              <a href="subject.html#35036">[ subject ]</a>
              <a href="author.html#35036">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
