<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [Patch] TreeView, TreeNode, TreeNodeCollection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPatch%5D%20TreeView%2C%20TreeNode%2C%20TreeNodeCollection&In-Reply-To=45B15FB9.9060400%40jpobst.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022192.html">
   <LINK REL="Next"  HREF="022194.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [Patch] TreeView, TreeNode, TreeNodeCollection</H1>
    <B>Alan McGovern</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPatch%5D%20TreeView%2C%20TreeNode%2C%20TreeNodeCollection&In-Reply-To=45B15FB9.9060400%40jpobst.com"
       TITLE="[Mono-dev] [Patch] TreeView, TreeNode, TreeNodeCollection">alan.mcgovern at gmail.com
       </A><BR>
    <I>Sat Jan 20 10:54:13 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022192.html">[Mono-dev] TextBoxBase Out of Memory Problem
</A></li>
        <LI>Next message: <A HREF="022194.html">[Mono-dev] Will Mono/WinForms be the next HTHML/CSS mess?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22193">[ date ]</a>
              <a href="thread.html#22193">[ thread ]</a>
              <a href="subject.html#22193">[ subject ]</a>
              <a href="author.html#22193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Heya,

I'm on holidays in italy right now, so i havent had a chance to work on
stuff for the last week. I'll be home again tomorrow, so there should be a
patch ready (including nunits) by next saturday, all going well.

Alan.

On 1/20/07, Jonathan Pobst &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monkey at jpobst.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hey Alan, I haven't seen you around in a while and wanted to make sure
</I>&gt;<i> TreeNode.Name got into 1.2.3 due to how high it appears on the moma
</I>&gt;<i> reports, so I committed that part of your patch and wrote the relevant
</I>&gt;<i> test.
</I>&gt;<i>
</I>&gt;<i> I'm not writing the tests for the collection part, so I'll need those
</I>&gt;<i> before I commit the other stuff.  :)
</I>&gt;<i>
</I>&gt;<i> Obviously, the performance concerns are valid, but I'll take an
</I>&gt;<i> inefficient implementation over no implementation if you are unable to
</I>&gt;<i> make it use something better than a linear search.
</I>&gt;<i>
</I>&gt;<i> Also, have you made any headway on the TreeNode ContextMenu(Strip)
</I>&gt;<i> stuff?  It also shows pretty high on moma, so if you don't have time to
</I>&gt;<i> do that, I'll probably write it.
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i> jpobst
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Alan McGovern wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This is my first patch, so i want to make sure that everything is
</I>&gt;<i> &gt; alright before i go committing. I will provide NUnit tests for the new
</I>&gt;<i> &gt; functionality (i'll post the tests here) if everything looks good with
</I>&gt;<i> &gt; the patch.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I just implemented some of the .NET 2.0 methods which are missing which
</I>&gt;<i> &gt; i would like to have. They're nothing major. Also, how would i go about
</I>&gt;<i> &gt; implementing the ContextMenu stuff. Is there an example of how i can do
</I>&gt;<i> &gt; this? I'm not 100% sure how to do it :p
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Index:
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/TreeNode.cs
</I>&gt;<i> &gt; ===================================================================
</I>&gt;<i> &gt; ---
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/TreeNode.cs
</I>&gt;<i> (revision 69123)
</I>&gt;<i> &gt; +++
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/TreeNode.cs
</I>&gt;<i> (working copy)
</I>&gt;<i> &gt; @@ -54,6 +54,9 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;               internal IntPtr handle;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; +#if NET_2_0
</I>&gt;<i> &gt; +             private string name = string.Empty;
</I>&gt;<i> &gt; +#endif
</I>&gt;<i> &gt;               #endregion      // Fields
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;               #region Internal Constructors
</I>&gt;<i> &gt; @@ -352,6 +355,18 @@
</I>&gt;<i> &gt;                       }
</I>&gt;<i> &gt;               }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; +#if NET_2_0
</I>&gt;<i> &gt; +             public string Name
</I>&gt;<i> &gt; +             {
</I>&gt;<i> &gt; +                     get { return this.name; }
</I>&gt;<i> &gt; +                     set
</I>&gt;<i> &gt; +                     {
</I>&gt;<i> &gt; +                             // Value should never be null as per spec
</I>&gt;<i> &gt; +                             this.name = (value == null) ? string.Empty: value;
</I>&gt;<i> &gt; +                     }
</I>&gt;<i> &gt; +             }
</I>&gt;<i> &gt; +#endif
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt;               public TreeNode NextNode {
</I>&gt;<i> &gt;                       get {
</I>&gt;<i> &gt;                               if (parent == null)
</I>&gt;<i> &gt; Index:
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/TreeNodeCollection.cs
</I>&gt;<i> &gt; ===================================================================
</I>&gt;<i> &gt; ---
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/TreeNodeCollection.cs
</I>&gt;<i> (revision 69123)
</I>&gt;<i> &gt; +++
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/TreeNodeCollection.cs
</I>&gt;<i> (working copy)
</I>&gt;<i> &gt; @@ -95,6 +95,20 @@
</I>&gt;<i> &gt;                       }
</I>&gt;<i> &gt;               }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; +             #if NET_2_0
</I>&gt;<i> &gt; +             public virtual TreeNode this[string key]
</I>&gt;<i> &gt; +             {
</I>&gt;<i> &gt; +                     get
</I>&gt;<i> &gt; +                     {
</I>&gt;<i> &gt; +                             if(string.IsNullOrEmpty(key))
</I>&gt;<i> &gt; +                                             return null;
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +                             int index = IndexOfKey(key);
</I>&gt;<i> &gt; +                             return (index == -1) ? null : this[index];
</I>&gt;<i> &gt; +                     }
</I>&gt;<i> &gt; +             }
</I>&gt;<i> &gt; +             #endif
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt;               public virtual TreeNode Add (string text)
</I>&gt;<i> &gt;               {
</I>&gt;<i> &gt;                       TreeNode res = new TreeNode (text);
</I>&gt;<i> &gt; @@ -442,6 +456,43 @@
</I>&gt;<i> &gt;                               return (res == 0 ? l.Index - r.Index :
</I>&gt;<i> res);
</I>&gt;<i> &gt;                       }
</I>&gt;<i> &gt;               }
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +#if NET_2_0
</I>&gt;<i> &gt; +             public virtual int IndexOfKey(string key)
</I>&gt;<i> &gt; +             {
</I>&gt;<i> &gt; +                     if (string.IsNullOrEmpty(key))
</I>&gt;<i> &gt; +                             return -1;
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +                             // We do a case insensitive comparison to
</I>&gt;<i> find the key
</I>&gt;<i> &gt; +                     for (int i = 0; i &lt; nodes.Count; i++)
</I>&gt;<i> &gt; +                             if (string.Equals(nodes.Name, name,
</I>&gt;<i> StringComparison.CurrentCultureIgnoreCase))
</I>&gt;<i> &gt; +                                     return i;
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +                     return -1;
</I>&gt;<i> &gt; +        }
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +             public virtual bool ContainsKey(string name)
</I>&gt;<i> &gt; +             {
</I>&gt;<i> &gt; +                     return (IndexOfKey(name) != -1);
</I>&gt;<i> &gt; +             }
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +             public virtual void RemoveByKey(string key)
</I>&gt;<i> &gt; +             {
</I>&gt;<i> &gt; +                     int index = -1;
</I>&gt;<i> &gt; +                     for (int i = 0; i &lt; nodes.Count; i++)
</I>&gt;<i> &gt; +                     {
</I>&gt;<i> &gt; +                             if (!string.Equals(nodes[i].Name,key,
</I>&gt;<i> StringComparison.CurrentCultureIgnoreCase))
</I>&gt;<i> &gt; +                                     continue;
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +                             index = i;
</I>&gt;<i> &gt; +                             break;
</I>&gt;<i> &gt; +                     }
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt; +                     if (index != -1)
</I>&gt;<i> &gt; +                             RemoveAt(index);
</I>&gt;<i> &gt; +             }
</I>&gt;<i> &gt; +#endif
</I>&gt;<i> &gt;       }
</I>&gt;<i> &gt;  }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Index:
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/TreeView.cs
</I>&gt;<i> &gt; ===================================================================
</I>&gt;<i> &gt; ---
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/TreeView.cs
</I>&gt;<i> (revision 69123)
</I>&gt;<i> &gt; +++
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/TreeView.cs
</I>&gt;<i> (working copy)
</I>&gt;<i> &gt; @@ -549,6 +549,15 @@
</I>&gt;<i> &gt;                       return root_node.GetNodeCount (include_subtrees);
</I>&gt;<i> &gt;               }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; +             #if NET_2_0
</I>&gt;<i> &gt; +             public void Sort()
</I>&gt;<i> &gt; +             {
</I>&gt;<i> &gt; +                     // Just call the pre-existing methods to sort the
</I>&gt;<i> treeview.
</I>&gt;<i> &gt; +                     // I assume it'll sort correctly.
</I>&gt;<i> &gt; +                     this.Sorted = true;
</I>&gt;<i> &gt; +             }
</I>&gt;<i> &gt; +        #endif
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt;               public override string ToString () {
</I>&gt;<i> &gt;                       int count = Nodes.Count;
</I>&gt;<i> &gt;                       if (count &lt;= 0)
</I>&gt;<i> &gt; Index:
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ChangeLog
</I>&gt;<i> &gt; ===================================================================
</I>&gt;<i> &gt; ---
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ChangeLog
</I>&gt;<i> (revision 69123)
</I>&gt;<i> &gt; +++
</I>&gt;<i> C:/programming/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ChangeLog
</I>&gt;<i> (working copy)
</I>&gt;<i> &gt; @@ -1,3 +1,9 @@
</I>&gt;<i> &gt; +2007-1-09 Alan McGovern &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">alan.mcgovern at gmail.com</A>&gt;
</I>&gt;<i> &gt; +     * TreeNode.cs
</I>&gt;<i> &gt; +     * TreeView.cs
</I>&gt;<i> &gt; +     * TreeNodeCollection.cs
</I>&gt;<i> &gt; +     - Added some new .NET 2.0 methods
</I>&gt;<i> &gt; +
</I>&gt;<i> &gt;  2006-12-06  Jackson Harper  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jackson at ximian.com</A>&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;       * TextControl.cs: Make this operation undoable.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070120/c8b43f0b/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070120/c8b43f0b/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022192.html">[Mono-dev] TextBoxBase Out of Memory Problem
</A></li>
	<LI>Next message: <A HREF="022194.html">[Mono-dev] Will Mono/WinForms be the next HTHML/CSS mess?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22193">[ date ]</a>
              <a href="thread.html#22193">[ thread ]</a>
              <a href="subject.html#22193">[ subject ]</a>
              <a href="author.html#22193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
