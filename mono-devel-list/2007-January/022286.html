<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] NetBSD patches
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20NetBSD%20patches&In-Reply-To=45BE1BD8.20705%40sublimeintervention.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022283.html">
   <LINK REL="Next"  HREF="022289.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] NetBSD patches</H1>
    <B>Zoltan Varga</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20NetBSD%20patches&In-Reply-To=45BE1BD8.20705%40sublimeintervention.com"
       TITLE="[Mono-dev] NetBSD patches">vargaz at gmail.com
       </A><BR>
    <I>Mon Jan 29 12:05:16 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022283.html">[Mono-dev] NetBSD patches
</A></li>
        <LI>Next message: <A HREF="022289.html">[Mono-dev] NetBSD patches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22286">[ date ]</a>
              <a href="thread.html#22286">[ thread ]</a>
              <a href="subject.html#22286">[ subject ]</a>
              <a href="author.html#22286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The non-libgc changes are ok to check in.

           Zoltan

On 1/29/07, kangaroo &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">grompf at sublimeintervention.com</A>&gt; wrote:
&gt;<i> I'm obviously having a difficult morning with this.
</I>&gt;<i>
</I>&gt;<i> Round 3 :)
</I>&gt;<i>
</I>&gt;<i> -g
</I>&gt;<i>
</I>&gt;<i> kangaroo wrote:
</I>&gt;<i> &gt; Bah,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   My apologies for that.  I just did a svn diff of my tree and autogen
</I>&gt;<i> &gt; makes those changes to tests-config on bsd.  I wouldn't have committed it :)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Here's an updated patch that fixes that; as well as moves the
</I>&gt;<i> &gt; MONO_ARCH_USE_SIGACTION to the right place.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -g
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Zoltan Varga wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Hi,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; The non libgc changes seem ok to check in, except the mono/tests/tests-config
</I>&gt;<i> &gt;&gt; change, which seems to break other archs.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;             Zoltan
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On 1/29/07, kangaroo &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">grompf at sublimeintervention.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I spent some time this weekend forward porting the patches from the
</I>&gt;<i> &gt;&gt;&gt; netbsd pkgsrc repository (created by recht, drochner, rillig of NetBSD).
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Mono trunk with these patches compiles on netbsd and runs.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; The changes are primarly to the gc; however there are some in mono to
</I>&gt;<i> &gt;&gt;&gt; deal with differences in the ucontext structure.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; -g
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Index: libgc/include/gc_pthread_redirects.h
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- libgc/include/gc_pthread_redirects.h        (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ libgc/include/gc_pthread_redirects.h        (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -74,7 +74,10 @@
</I>&gt;<i> &gt;&gt;&gt;  # define pthread_join GC_pthread_join
</I>&gt;<i> &gt;&gt;&gt;  # define pthread_detach GC_pthread_detach
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; -#ifndef GC_DARWIN_THREADS
</I>&gt;<i> &gt;&gt;&gt; +#ifndef GC_DARWIN_THREADS
</I>&gt;<i> &gt;&gt;&gt; +# ifdef GC_NETBSD_THREADS
</I>&gt;<i> &gt;&gt;&gt; +#  undef pthread_sigmask
</I>&gt;<i> &gt;&gt;&gt; +# endif
</I>&gt;<i> &gt;&gt;&gt;  # define pthread_sigmask GC_pthread_sigmask
</I>&gt;<i> &gt;&gt;&gt;  # define dlopen GC_dlopen
</I>&gt;<i> &gt;&gt;&gt;  #endif
</I>&gt;<i> &gt;&gt;&gt; Index: libgc/include/gc_config_macros.h
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- libgc/include/gc_config_macros.h    (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ libgc/include/gc_config_macros.h    (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -56,7 +56,7 @@
</I>&gt;<i> &gt;&gt;&gt;         defined(GC_IRIX_THREADS) || defined(GC_LINUX_THREADS) || \
</I>&gt;<i> &gt;&gt;&gt;         defined(GC_HPUX_THREADS) || defined(GC_OSF1_THREADS) || \
</I>&gt;<i> &gt;&gt;&gt;         defined(GC_DGUX386_THREADS) || defined(GC_DARWIN_THREADS) || \
</I>&gt;<i> &gt;&gt;&gt; -       defined(GC_AIX_THREADS) || \
</I>&gt;<i> &gt;&gt;&gt; +       defined(GC_AIX_THREADS) || defined(GC_NETBSD_THREADS) || \
</I>&gt;<i> &gt;&gt;&gt;          (defined(GC_WIN32_THREADS) &amp;&amp; defined(__CYGWIN32__))
</I>&gt;<i> &gt;&gt;&gt;  #   define GC_PTHREADS
</I>&gt;<i> &gt;&gt;&gt;  # endif
</I>&gt;<i> &gt;&gt;&gt; Index: libgc/include/private/gc_priv.h
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- libgc/include/private/gc_priv.h     (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ libgc/include/private/gc_priv.h     (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -1956,7 +1956,7 @@
</I>&gt;<i> &gt;&gt;&gt;    /* in Linux glibc, but it's not exported.)  Thus we continue to use  */
</I>&gt;<i> &gt;&gt;&gt;    /* the same hard-coded signals we've always used.                    */
</I>&gt;<i> &gt;&gt;&gt;  #  if !defined(SIG_SUSPEND)
</I>&gt;<i> &gt;&gt;&gt; -#   if defined(GC_LINUX_THREADS) || defined(GC_DGUX386_THREADS)
</I>&gt;<i> &gt;&gt;&gt; +#   if defined(GC_LINUX_THREADS) || defined(GC_DGUX386_THREADS) || defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt;  #    if defined(SPARC) &amp;&amp; !defined(SIGPWR)
</I>&gt;<i> &gt;&gt;&gt;         /* SPARC/Linux doesn't properly define SIGPWR in &lt;signal.h&gt;.
</I>&gt;<i> &gt;&gt;&gt;          * It is aliased to SIGLOST in asm/signal.h, though.            */
</I>&gt;<i> &gt;&gt;&gt; Index: libgc/configure.in
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- libgc/configure.in  (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ libgc/configure.in  (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -151,6 +151,14 @@
</I>&gt;<i> &gt;&gt;&gt;           AC_DEFINE(PARALLEL_MARK)
</I>&gt;<i> &gt;&gt;&gt;         fi
</I>&gt;<i> &gt;&gt;&gt;         ;;
</I>&gt;<i> &gt;&gt;&gt; +     *-*-netbsd*)
</I>&gt;<i> &gt;&gt;&gt; +       AC_DEFINE(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt; +       AC_DEFINE(THREAD_LOCAL_ALLOC)
</I>&gt;<i> &gt;&gt;&gt; +       if test &quot;${enable_parallel_mark}&quot; = yes; then
</I>&gt;<i> &gt;&gt;&gt; +         AC_DEFINE(PARALLEL_MARK)
</I>&gt;<i> &gt;&gt;&gt; +       fi
</I>&gt;<i> &gt;&gt;&gt; +       AC_DEFINE(THREAD_LOCAL_ALLOC)
</I>&gt;<i> &gt;&gt;&gt; +       ;;
</I>&gt;<i> &gt;&gt;&gt;       *-*-osf*)
</I>&gt;<i> &gt;&gt;&gt;         AC_DEFINE(GC_OSF1_THREADS)
</I>&gt;<i> &gt;&gt;&gt;          if test &quot;${enable_parallel_mark}&quot; = yes; then
</I>&gt;<i> &gt;&gt;&gt; Index: libgc/pthread_stop_world.c
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- libgc/pthread_stop_world.c  (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ libgc/pthread_stop_world.c  (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -111,6 +111,7 @@
</I>&gt;<i> &gt;&gt;&gt;  #  endif
</I>&gt;<i> &gt;&gt;&gt;  #endif
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt;  sem_t GC_suspend_ack_sem;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  static void _GC_suspend_handler(int sig)
</I>&gt;<i> &gt;&gt;&gt; @@ -220,6 +221,7 @@
</I>&gt;<i> &gt;&gt;&gt;      GC_printf1(&quot;In GC_restart_handler for 0x%lx\n&quot;, pthread_self());
</I>&gt;<i> &gt;&gt;&gt;  #endif
</I>&gt;<i> &gt;&gt;&gt;  }
</I>&gt;<i> &gt;&gt;&gt; +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  # ifdef IA64
</I>&gt;<i> &gt;&gt;&gt;  #   define IF_IA64(x) x
</I>&gt;<i> &gt;&gt;&gt; @@ -295,12 +297,14 @@
</I>&gt;<i> &gt;&gt;&gt;        ABORT(&quot;Collecting from unknown thread.&quot;);
</I>&gt;<i> &gt;&gt;&gt;  }
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt;  void GC_restart_handler(int sig)
</I>&gt;<i> &gt;&gt;&gt;  {
</I>&gt;<i> &gt;&gt;&gt;         int old_errno = errno;
</I>&gt;<i> &gt;&gt;&gt;         _GC_restart_handler (sig);
</I>&gt;<i> &gt;&gt;&gt;         errno = old_errno;
</I>&gt;<i> &gt;&gt;&gt;  }
</I>&gt;<i> &gt;&gt;&gt; +#endif
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  /* We hold allocation lock.  Should do exactly the right thing if the  */
</I>&gt;<i> &gt;&gt;&gt;  /* world is stopped.  Should not fail if it isn't.                     */
</I>&gt;<i> &gt;&gt;&gt; @@ -309,6 +313,28 @@
</I>&gt;<i> &gt;&gt;&gt;      pthread_push_all_stacks();
</I>&gt;<i> &gt;&gt;&gt;  }
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; +#if defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt; +/*
</I>&gt;<i> &gt;&gt;&gt; + * Get the stack start address for the specified address.
</I>&gt;<i> &gt;&gt;&gt; + */
</I>&gt;<i> &gt;&gt;&gt; +int
</I>&gt;<i> &gt;&gt;&gt; +np_stackinfo(pthread_t p, void **addr)
</I>&gt;<i> &gt;&gt;&gt; +{
</I>&gt;<i> &gt;&gt;&gt; +       pthread_attr_t attr;
</I>&gt;<i> &gt;&gt;&gt; +       int ret = -1;
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +       if (pthread_attr_init(&amp;attr))
</I>&gt;<i> &gt;&gt;&gt; +               return -1;
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +       if (!pthread_attr_get_np(p, &amp;attr))
</I>&gt;<i> &gt;&gt;&gt; +               if (!pthread_attr_getstackaddr(&amp;attr, addr))
</I>&gt;<i> &gt;&gt;&gt; +                       ret = 0;
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +       pthread_attr_destroy(&amp;attr);
</I>&gt;<i> &gt;&gt;&gt; +       return ret;
</I>&gt;<i> &gt;&gt;&gt; +}
</I>&gt;<i> &gt;&gt;&gt; +#endif
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt;  /* There seems to be a very rare thread stopping problem.  To help us  */
</I>&gt;<i> &gt;&gt;&gt;  /* debug that, we save the ids of the stopping thread. */
</I>&gt;<i> &gt;&gt;&gt;  pthread_t GC_stopping_thread;
</I>&gt;<i> &gt;&gt;&gt; @@ -334,6 +360,7 @@
</I>&gt;<i> &gt;&gt;&gt;              if (p -&gt; stop_info.last_stop_count == GC_stop_count) continue;
</I>&gt;<i> &gt;&gt;&gt;             if (p -&gt; thread_blocked) /* Will wait */ continue;
</I>&gt;<i> &gt;&gt;&gt;              n_live_threads++;
</I>&gt;<i> &gt;&gt;&gt; +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt;             #if DEBUG_THREADS
</I>&gt;<i> &gt;&gt;&gt;               GC_printf1(&quot;Sending suspend signal to 0x%lx\n&quot;, p -&gt; id);
</I>&gt;<i> &gt;&gt;&gt;             #endif
</I>&gt;<i> &gt;&gt;&gt; @@ -349,6 +376,23 @@
</I>&gt;<i> &gt;&gt;&gt;                  default:
</I>&gt;<i> &gt;&gt;&gt;                      ABORT(&quot;pthread_kill failed&quot;);
</I>&gt;<i> &gt;&gt;&gt;              }
</I>&gt;<i> &gt;&gt;&gt; +#else
</I>&gt;<i> &gt;&gt;&gt; +           #if DEBUG_THREADS
</I>&gt;<i> &gt;&gt;&gt; +             GC_printf1(&quot;Suspending 0x%lx ...\n&quot;, p -&gt; id);
</I>&gt;<i> &gt;&gt;&gt; +           #endif
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +               if(pthread_suspend_np(p -&gt; id) != 0)
</I>&gt;<i> &gt;&gt;&gt; +                       GC_printf1(&quot;Could not susend thread... 0x%lx\n&quot;, p -&gt; id);
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +               /* Right now, this is not enough. Retreiving the stack base address is not the correct */
</I>&gt;<i> &gt;&gt;&gt; +               /* info to give to the GC, but since there is no way to get the current stack pointer  */
</I>&gt;<i> &gt;&gt;&gt; +               /* for the suspended thread, base pointer will have to be enough. Mono seems to be     */
</I>&gt;<i> &gt;&gt;&gt; +               /* happy with it so... */
</I>&gt;<i> &gt;&gt;&gt; +               if(np_stackinfo(p -&gt; id, &amp;(p -&gt; stop_info.stack_ptr)) != 0)
</I>&gt;<i> &gt;&gt;&gt; +                       GC_err_printf1(&quot;Could not get thread stack address... 0x%lx\n&quot;, p -&gt; id);
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +        n_live_threads--;
</I>&gt;<i> &gt;&gt;&gt; +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i> &gt;&gt;&gt;          }
</I>&gt;<i> &gt;&gt;&gt;        }
</I>&gt;<i> &gt;&gt;&gt;      }
</I>&gt;<i> &gt;&gt;&gt; @@ -368,6 +412,7 @@
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;      n_live_threads = GC_suspend_all();
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt;        if (GC_retry_signals) {
</I>&gt;<i> &gt;&gt;&gt;           unsigned long wait_usecs = 0;  /* Total wait since retry.     */
</I>&gt;<i> &gt;&gt;&gt;  #        define WAIT_UNIT 3000
</I>&gt;<i> &gt;&gt;&gt; @@ -405,6 +450,8 @@
</I>&gt;<i> &gt;&gt;&gt;               }
</I>&gt;<i> &gt;&gt;&gt;           }
</I>&gt;<i> &gt;&gt;&gt;      }
</I>&gt;<i> &gt;&gt;&gt; +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt;      #if DEBUG_THREADS
</I>&gt;<i> &gt;&gt;&gt;        GC_printf1(&quot;World stopped from 0x%lx\n&quot;, pthread_self());
</I>&gt;<i> &gt;&gt;&gt;      #endif
</I>&gt;<i> &gt;&gt;&gt; @@ -456,6 +503,7 @@
</I>&gt;<i> &gt;&gt;&gt;              if (p -&gt; flags &amp; FINISHED) continue;
</I>&gt;<i> &gt;&gt;&gt;             if (p -&gt; thread_blocked) continue;
</I>&gt;<i> &gt;&gt;&gt;              n_live_threads++;
</I>&gt;<i> &gt;&gt;&gt; +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt;             #if DEBUG_THREADS
</I>&gt;<i> &gt;&gt;&gt;               GC_printf1(&quot;Sending restart signal to 0x%lx\n&quot;, p -&gt; id);
</I>&gt;<i> &gt;&gt;&gt;             #endif
</I>&gt;<i> &gt;&gt;&gt; @@ -471,10 +519,18 @@
</I>&gt;<i> &gt;&gt;&gt;                  default:
</I>&gt;<i> &gt;&gt;&gt;                      ABORT(&quot;pthread_kill failed&quot;);
</I>&gt;<i> &gt;&gt;&gt;              }
</I>&gt;<i> &gt;&gt;&gt; +#else
</I>&gt;<i> &gt;&gt;&gt; +           #if DEBUG_THREADS
</I>&gt;<i> &gt;&gt;&gt; +             GC_printf1(&quot;Resuming Thread 0x%lx\n&quot;, p -&gt; id);
</I>&gt;<i> &gt;&gt;&gt; +           #endif
</I>&gt;<i> &gt;&gt;&gt; +               pthread_resume_np(p -&gt; id);
</I>&gt;<i> &gt;&gt;&gt; +               n_live_threads--;
</I>&gt;<i> &gt;&gt;&gt; +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i> &gt;&gt;&gt;          }
</I>&gt;<i> &gt;&gt;&gt;        }
</I>&gt;<i> &gt;&gt;&gt;      }
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt;      #if DEBUG_THREADS
</I>&gt;<i> &gt;&gt;&gt;      GC_printf0 (&quot;All threads signaled&quot;);
</I>&gt;<i> &gt;&gt;&gt;      #endif
</I>&gt;<i> &gt;&gt;&gt; @@ -487,6 +543,7 @@
</I>&gt;<i> &gt;&gt;&gt;             }
</I>&gt;<i> &gt;&gt;&gt;         }
</I>&gt;<i> &gt;&gt;&gt;      }
</I>&gt;<i> &gt;&gt;&gt; +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;      #if DEBUG_THREADS
</I>&gt;<i> &gt;&gt;&gt;        GC_printf0(&quot;World started\n&quot;);
</I>&gt;<i> &gt;&gt;&gt; @@ -504,6 +561,8 @@
</I>&gt;<i> &gt;&gt;&gt;  }
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  static void pthread_stop_init() {
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt;      struct sigaction act;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;      if (sem_init(&amp;GC_suspend_ack_sem, 0, 0) != 0)
</I>&gt;<i> &gt;&gt;&gt; @@ -544,6 +603,16 @@
</I>&gt;<i> &gt;&gt;&gt;                GC_printf0(&quot;Will retry suspend signal if necessary.\n&quot;);
</I>&gt;<i> &gt;&gt;&gt;           }
</I>&gt;<i> &gt;&gt;&gt;  #     endif
</I>&gt;<i> &gt;&gt;&gt; +#else
</I>&gt;<i> &gt;&gt;&gt; +    struct sigaction act;
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +    act.sa_flags = SA_RESTART;
</I>&gt;<i> &gt;&gt;&gt; +    if (sigfillset(&amp;act.sa_mask) != 0) {
</I>&gt;<i> &gt;&gt;&gt; +       ABORT(&quot;sigfillset() failed&quot;);
</I>&gt;<i> &gt;&gt;&gt; +    }
</I>&gt;<i> &gt;&gt;&gt; +    GC_remove_allowed_signals(&amp;act.sa_mask);
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i> &gt;&gt;&gt;  }
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  /* We hold the allocation lock.        */
</I>&gt;<i> &gt;&gt;&gt; Index: libgc/pthread_support.c
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- libgc/pthread_support.c     (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ libgc/pthread_support.c     (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -67,8 +67,8 @@
</I>&gt;<i> &gt;&gt;&gt;  # endif
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  # if (defined(GC_DGUX386_THREADS) || defined(GC_OSF1_THREADS) || \
</I>&gt;<i> &gt;&gt;&gt; -      defined(GC_DARWIN_THREADS) || defined(GC_AIX_THREADS)) \
</I>&gt;<i> &gt;&gt;&gt; -      &amp;&amp; !defined(USE_PTHREAD_SPECIFIC)
</I>&gt;<i> &gt;&gt;&gt; +      defined(GC_DARWIN_THREADS) || defined(GC_AIX_THREADS)) || \
</I>&gt;<i> &gt;&gt;&gt; +      defined(GC_NETBSD_THREADS) &amp;&amp; !defined(USE_PTHREAD_SPECIFIC)
</I>&gt;<i> &gt;&gt;&gt;  #   define USE_PTHREAD_SPECIFIC
</I>&gt;<i> &gt;&gt;&gt;  # endif
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; @@ -126,8 +126,13 @@
</I>&gt;<i> &gt;&gt;&gt;  # include &lt;sys/sysctl.h&gt;
</I>&gt;<i> &gt;&gt;&gt;  #endif /* GC_DARWIN_THREADS */
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; +#if defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt; +# include &lt;sys/param.h&gt;
</I>&gt;<i> &gt;&gt;&gt; +# include &lt;sys/sysctl.h&gt;
</I>&gt;<i> &gt;&gt;&gt; +#endif
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt;  #if defined(GC_DGUX386_THREADS)
</I>&gt;<i> &gt;&gt;&gt;  # include &lt;sys/dg_sys_info.h&gt;
</I>&gt;<i> &gt;&gt;&gt;  # include &lt;sys/_int_psem.h&gt;
</I>&gt;<i> &gt;&gt;&gt; @@ -1013,7 +1018,7 @@
</I>&gt;<i> &gt;&gt;&gt;           GC_nprocs = sysconf(_SC_NPROC_ONLN);
</I>&gt;<i> &gt;&gt;&gt;           if (GC_nprocs &lt;= 0) GC_nprocs = 1;
</I>&gt;<i> &gt;&gt;&gt;  #       endif
</I>&gt;<i> &gt;&gt;&gt; -#       if defined(GC_DARWIN_THREADS) || defined(GC_FREEBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt; +#       if defined(GC_DARWIN_THREADS) || defined(GC_FREEBSD_THREADS) || defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt;           int ncpus = 1;
</I>&gt;<i> &gt;&gt;&gt;           size_t len = sizeof(ncpus);
</I>&gt;<i> &gt;&gt;&gt;           sysctl((int[2]) {CTL_HW, HW_NCPU}, 2, &amp;ncpus, &amp;len, NULL, 0);
</I>&gt;<i> &gt;&gt;&gt; Index: libgc/specific.c
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- libgc/specific.c    (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ libgc/specific.c    (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -13,7 +13,7 @@
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  #include &quot;private/gc_priv.h&quot; /* For GC_compare_and_exchange, GC_memory_barrier */
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; -#if defined(GC_LINUX_THREADS)
</I>&gt;<i> &gt;&gt;&gt; +#if defined(GC_LINUX_THREADS) || defined(GC_NETBSD_THREADS)
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  #include &quot;private/specific.h&quot;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Index: libgc/dyn_load.c
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- libgc/dyn_load.c    (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ libgc/dyn_load.c    (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -75,6 +75,11 @@
</I>&gt;<i> &gt;&gt;&gt;  #   include &lt;dlfcn.h&gt;
</I>&gt;<i> &gt;&gt;&gt;  #   include &lt;link.h&gt;
</I>&gt;<i> &gt;&gt;&gt;  #endif
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +#ifdef NETBSD
</I>&gt;<i> &gt;&gt;&gt; +#include &lt;dlfcn.h&gt;
</I>&gt;<i> &gt;&gt;&gt; +#endif
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt;  #ifdef SUNOS4
</I>&gt;<i> &gt;&gt;&gt;  #   include &lt;dlfcn.h&gt;
</I>&gt;<i> &gt;&gt;&gt;  #   include &lt;link.h&gt;
</I>&gt;<i> &gt;&gt;&gt; @@ -519,6 +524,31 @@
</I>&gt;<i> &gt;&gt;&gt;                  break;
</I>&gt;<i> &gt;&gt;&gt;              }
</I>&gt;<i> &gt;&gt;&gt;          }
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +#if defined(NETBSD)
</I>&gt;<i> &gt;&gt;&gt; +#undef dlopen
</I>&gt;<i> &gt;&gt;&gt; +#undef dlsym
</I>&gt;<i> &gt;&gt;&gt; +#undef dlclose
</I>&gt;<i> &gt;&gt;&gt; +               /* This is a hack. For now, it seems that NetBSD 2.0 does not provide
</I>&gt;<i> &gt;&gt;&gt; +                  a _DYNAMIC with the neccessary DT_DEBUG information. A simple dlopen(0, RTLD_LAZY)
</I>&gt;<i> &gt;&gt;&gt; +                  does the job. Maybe a NetBSD guru could explain this...
</I>&gt;<i> &gt;&gt;&gt; +            */
</I>&gt;<i> &gt;&gt;&gt; +               if(cachedResult == 0) {
</I>&gt;<i> &gt;&gt;&gt; +                       void* startupSyms = dlopen(0, RTLD_LAZY);
</I>&gt;<i> &gt;&gt;&gt; +                       dp = (ElfW(Dyn)*)dlsym(startupSyms, &quot;_DYNAMIC&quot;);
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +                       for(; (tag = dp-&gt;d_tag) != 0; dp++ ) {
</I>&gt;<i> &gt;&gt;&gt; +                               if( tag == DT_DEBUG ) {
</I>&gt;<i> &gt;&gt;&gt; +                                       struct link_map *lm
</I>&gt;<i> &gt;&gt;&gt; +                                                       = ((struct r_debug *)(dp-&gt;d_un.d_ptr))-&gt;r_map;
</I>&gt;<i> &gt;&gt;&gt; +                                       if( lm != 0 ) cachedResult = lm-&gt;l_next; /* might be NIL */
</I>&gt;<i> &gt;&gt;&gt; +                                       break;
</I>&gt;<i> &gt;&gt;&gt; +                               }
</I>&gt;<i> &gt;&gt;&gt; +                       }
</I>&gt;<i> &gt;&gt;&gt; +
</I>&gt;<i> &gt;&gt;&gt; +                       dlclose(startupSyms);
</I>&gt;<i> &gt;&gt;&gt; +               }
</I>&gt;<i> &gt;&gt;&gt; +#endif
</I>&gt;<i> &gt;&gt;&gt;      }
</I>&gt;<i> &gt;&gt;&gt;      return cachedResult;
</I>&gt;<i> &gt;&gt;&gt;  }
</I>&gt;<i> &gt;&gt;&gt; Index: mono/io-layer/collection.c
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- mono/io-layer/collection.c  (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ mono/io-layer/collection.c  (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -60,7 +60,7 @@
</I>&gt;<i> &gt;&gt;&gt;         g_assert (ret == 0);
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  #ifdef HAVE_PTHREAD_ATTR_SETSTACKSIZE
</I>&gt;<i> &gt;&gt;&gt; -#ifdef __FreeBSD__
</I>&gt;<i> &gt;&gt;&gt; +#if defined(__FreeBSD__) || defined(__NetBSD__)
</I>&gt;<i> &gt;&gt;&gt;         ret = pthread_attr_setstacksize (&amp;attr, 65536);
</I>&gt;<i> &gt;&gt;&gt;  #else
</I>&gt;<i> &gt;&gt;&gt;         ret = pthread_attr_setstacksize (&amp;attr, PTHREAD_STACK_MIN);
</I>&gt;<i> &gt;&gt;&gt; Index: mono/mini/mini-x86.h
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- mono/mini/mini-x86.h        (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ mono/mini/mini-x86.h        (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -53,6 +53,10 @@
</I>&gt;<i> &gt;&gt;&gt;  #define MONO_ARCH_SIGSEGV_ON_ALTSTACK
</I>&gt;<i> &gt;&gt;&gt;  #define MONO_ARCH_USE_SIGACTION
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; +#else
</I>&gt;<i> &gt;&gt;&gt; +#ifdef __NetBSD__
</I>&gt;<i> &gt;&gt;&gt; +#define MONO_ARCH_USE_SIGACTION
</I>&gt;<i> &gt;&gt;&gt; +#endif
</I>&gt;<i> &gt;&gt;&gt;  #endif /* HAVE_WORKING_SIGALTSTACK */
</I>&gt;<i> &gt;&gt;&gt;  #endif /* !PLATFORM_WIN32 */
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; @@ -153,6 +157,16 @@
</I>&gt;<i> &gt;&gt;&gt;         #define UCONTEXT_REG_ESI(ctx) ((ctx)-&gt;uc_mcontext-&gt;ss.esi)
</I>&gt;<i> &gt;&gt;&gt;         #define UCONTEXT_REG_EDI(ctx) ((ctx)-&gt;uc_mcontext-&gt;ss.edi)
</I>&gt;<i> &gt;&gt;&gt;         #define UCONTEXT_REG_EIP(ctx) ((ctx)-&gt;uc_mcontext-&gt;ss.eip)
</I>&gt;<i> &gt;&gt;&gt; +#elif defined(__NetBSD__)
</I>&gt;<i> &gt;&gt;&gt; +       #define UCONTEXT_REG_EAX(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EAX])
</I>&gt;<i> &gt;&gt;&gt; +       #define UCONTEXT_REG_EBX(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EBX])
</I>&gt;<i> &gt;&gt;&gt; +       #define UCONTEXT_REG_ECX(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_ECX])
</I>&gt;<i> &gt;&gt;&gt; +       #define UCONTEXT_REG_EDX(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EDX])
</I>&gt;<i> &gt;&gt;&gt; +       #define UCONTEXT_REG_EBP(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EBP])
</I>&gt;<i> &gt;&gt;&gt; +       #define UCONTEXT_REG_ESP(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_ESP])
</I>&gt;<i> &gt;&gt;&gt; +       #define UCONTEXT_REG_ESI(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_ESI])
</I>&gt;<i> &gt;&gt;&gt; +       #define UCONTEXT_REG_EDI(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EDI])
</I>&gt;<i> &gt;&gt;&gt; +       #define UCONTEXT_REG_EIP(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EIP])
</I>&gt;<i> &gt;&gt;&gt;  #else
</I>&gt;<i> &gt;&gt;&gt;         #define UCONTEXT_REG_EAX(ctx) ((ctx)-&gt;uc_mcontext.gregs [REG_EAX])
</I>&gt;<i> &gt;&gt;&gt;         #define UCONTEXT_REG_EBX(ctx) ((ctx)-&gt;uc_mcontext.gregs [REG_EBX])
</I>&gt;<i> &gt;&gt;&gt; Index: mono/tests/tests-config
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- mono/tests/tests-config     (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ mono/tests/tests-config     (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -1,5 +1,5 @@
</I>&gt;<i> &gt;&gt;&gt;  &lt;configuration&gt;
</I>&gt;<i> &gt;&gt;&gt; -       &lt;dllmap dll=&quot;cygwin1.dll&quot; target=&quot;libc.so.6&quot; /&gt;
</I>&gt;<i> &gt;&gt;&gt; -       &lt;dllmap dll=&quot;libc&quot; target=&quot;libc.so.6&quot; /&gt;
</I>&gt;<i> &gt;&gt;&gt; +       &lt;dllmap dll=&quot;cygwin1.dll&quot; target=&quot;libc.so.12&quot; /&gt;
</I>&gt;<i> &gt;&gt;&gt; +       &lt;dllmap dll=&quot;libc&quot; target=&quot;libc.so.12&quot; /&gt;
</I>&gt;<i> &gt;&gt;&gt;  &lt;/configuration&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Index: configure.in
</I>&gt;<i> &gt;&gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt;&gt; --- configure.in        (revision 71775)
</I>&gt;<i> &gt;&gt;&gt; +++ configure.in        (working copy)
</I>&gt;<i> &gt;&gt;&gt; @@ -82,14 +82,16 @@
</I>&gt;<i> &gt;&gt;&gt;                 ;;
</I>&gt;<i> &gt;&gt;&gt;         *-*-*netbsd*)
</I>&gt;<i> &gt;&gt;&gt;                 platform_win32=no
</I>&gt;<i> &gt;&gt;&gt; -               CPPFLAGS=&quot;$CPPFLAGS -D_REENTRANT&quot;
</I>&gt;<i> &gt;&gt;&gt; +               CPPFLAGS=&quot;$CPPFLAGS -D_REENTRANT -DGC_NETBSD_THREADS -D_GNU_SOURCE&quot;
</I>&gt;<i> &gt;&gt;&gt;                 libmono_cflags=&quot;-D_REENTRANT&quot;
</I>&gt;<i> &gt;&gt;&gt;                 LDFLAGS=&quot;$LDFLAGS -pthread&quot;
</I>&gt;<i> &gt;&gt;&gt;                 CPPFLAGS=&quot;$CPPFLAGS -DPLATFORM_BSD&quot;
</I>&gt;<i> &gt;&gt;&gt;                 libmono_ldflags=&quot;-pthread&quot;
</I>&gt;<i> &gt;&gt;&gt;                 need_link_unlink=yes
</I>&gt;<i> &gt;&gt;&gt; -               libdl=
</I>&gt;<i> &gt;&gt;&gt; -               libgc_threads=no
</I>&gt;<i> &gt;&gt;&gt; +               libdl=&quot;-ldl /libexec/ld.elf_so&quot;
</I>&gt;<i> &gt;&gt;&gt; +               libgc_threads=pthreads
</I>&gt;<i> &gt;&gt;&gt; +               with_tls=__thread
</I>&gt;<i> &gt;&gt;&gt; +               with_sigaltstack=no
</I>&gt;<i> &gt;&gt;&gt;                 ;;
</I>&gt;<i> &gt;&gt;&gt;  # these flags will work for all versions of -STABLE
</I>&gt;<i> &gt;&gt;&gt;  #
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt; Mono-devel-list mailing list
</I>&gt;<i> &gt;&gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Mono-devel-list mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Index: libgc/include/gc_pthread_redirects.h
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- libgc/include/gc_pthread_redirects.h        (revision 71807)
</I>&gt;<i> +++ libgc/include/gc_pthread_redirects.h        (working copy)
</I>&gt;<i> @@ -74,7 +74,10 @@
</I>&gt;<i>  # define pthread_join GC_pthread_join
</I>&gt;<i>  # define pthread_detach GC_pthread_detach
</I>&gt;<i>
</I>&gt;<i> -#ifndef GC_DARWIN_THREADS
</I>&gt;<i> +#ifndef GC_DARWIN_THREADS
</I>&gt;<i> +# ifdef GC_NETBSD_THREADS
</I>&gt;<i> +#  undef pthread_sigmask
</I>&gt;<i> +# endif
</I>&gt;<i>  # define pthread_sigmask GC_pthread_sigmask
</I>&gt;<i>  # define dlopen GC_dlopen
</I>&gt;<i>  #endif
</I>&gt;<i> Index: libgc/include/gc_config_macros.h
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- libgc/include/gc_config_macros.h    (revision 71807)
</I>&gt;<i> +++ libgc/include/gc_config_macros.h    (working copy)
</I>&gt;<i> @@ -56,7 +56,7 @@
</I>&gt;<i>         defined(GC_IRIX_THREADS) || defined(GC_LINUX_THREADS) || \
</I>&gt;<i>         defined(GC_HPUX_THREADS) || defined(GC_OSF1_THREADS) || \
</I>&gt;<i>         defined(GC_DGUX386_THREADS) || defined(GC_DARWIN_THREADS) || \
</I>&gt;<i> -       defined(GC_AIX_THREADS) || \
</I>&gt;<i> +       defined(GC_AIX_THREADS) || defined(GC_NETBSD_THREADS) || \
</I>&gt;<i>          (defined(GC_WIN32_THREADS) &amp;&amp; defined(__CYGWIN32__))
</I>&gt;<i>  #   define GC_PTHREADS
</I>&gt;<i>  # endif
</I>&gt;<i> Index: libgc/include/private/gc_priv.h
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- libgc/include/private/gc_priv.h     (revision 71807)
</I>&gt;<i> +++ libgc/include/private/gc_priv.h     (working copy)
</I>&gt;<i> @@ -1956,7 +1956,7 @@
</I>&gt;<i>    /* in Linux glibc, but it's not exported.)  Thus we continue to use  */
</I>&gt;<i>    /* the same hard-coded signals we've always used.                    */
</I>&gt;<i>  #  if !defined(SIG_SUSPEND)
</I>&gt;<i> -#   if defined(GC_LINUX_THREADS) || defined(GC_DGUX386_THREADS)
</I>&gt;<i> +#   if defined(GC_LINUX_THREADS) || defined(GC_DGUX386_THREADS) || defined(GC_NETBSD_THREADS)
</I>&gt;<i>  #    if defined(SPARC) &amp;&amp; !defined(SIGPWR)
</I>&gt;<i>         /* SPARC/Linux doesn't properly define SIGPWR in &lt;signal.h&gt;.
</I>&gt;<i>          * It is aliased to SIGLOST in asm/signal.h, though.            */
</I>&gt;<i> Index: libgc/configure.in
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- libgc/configure.in  (revision 71807)
</I>&gt;<i> +++ libgc/configure.in  (working copy)
</I>&gt;<i> @@ -151,6 +151,14 @@
</I>&gt;<i>           AC_DEFINE(PARALLEL_MARK)
</I>&gt;<i>         fi
</I>&gt;<i>         ;;
</I>&gt;<i> +     *-*-netbsd*)
</I>&gt;<i> +       AC_DEFINE(GC_NETBSD_THREADS)
</I>&gt;<i> +       AC_DEFINE(THREAD_LOCAL_ALLOC)
</I>&gt;<i> +       if test &quot;${enable_parallel_mark}&quot; = yes; then
</I>&gt;<i> +         AC_DEFINE(PARALLEL_MARK)
</I>&gt;<i> +       fi
</I>&gt;<i> +       AC_DEFINE(THREAD_LOCAL_ALLOC)
</I>&gt;<i> +       ;;
</I>&gt;<i>       *-*-osf*)
</I>&gt;<i>         AC_DEFINE(GC_OSF1_THREADS)
</I>&gt;<i>          if test &quot;${enable_parallel_mark}&quot; = yes; then
</I>&gt;<i> Index: libgc/pthread_stop_world.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- libgc/pthread_stop_world.c  (revision 71807)
</I>&gt;<i> +++ libgc/pthread_stop_world.c  (working copy)
</I>&gt;<i> @@ -111,6 +111,7 @@
</I>&gt;<i>  #  endif
</I>&gt;<i>  #endif
</I>&gt;<i>
</I>&gt;<i> +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i>  sem_t GC_suspend_ack_sem;
</I>&gt;<i>
</I>&gt;<i>  static void _GC_suspend_handler(int sig)
</I>&gt;<i> @@ -220,6 +221,7 @@
</I>&gt;<i>      GC_printf1(&quot;In GC_restart_handler for 0x%lx\n&quot;, pthread_self());
</I>&gt;<i>  #endif
</I>&gt;<i>  }
</I>&gt;<i> +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i>
</I>&gt;<i>  # ifdef IA64
</I>&gt;<i>  #   define IF_IA64(x) x
</I>&gt;<i> @@ -295,12 +297,14 @@
</I>&gt;<i>        ABORT(&quot;Collecting from unknown thread.&quot;);
</I>&gt;<i>  }
</I>&gt;<i>
</I>&gt;<i> +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i>  void GC_restart_handler(int sig)
</I>&gt;<i>  {
</I>&gt;<i>         int old_errno = errno;
</I>&gt;<i>         _GC_restart_handler (sig);
</I>&gt;<i>         errno = old_errno;
</I>&gt;<i>  }
</I>&gt;<i> +#endif
</I>&gt;<i>
</I>&gt;<i>  /* We hold allocation lock.  Should do exactly the right thing if the  */
</I>&gt;<i>  /* world is stopped.  Should not fail if it isn't.                     */
</I>&gt;<i> @@ -309,6 +313,28 @@
</I>&gt;<i>      pthread_push_all_stacks();
</I>&gt;<i>  }
</I>&gt;<i>
</I>&gt;<i> +#if defined(GC_NETBSD_THREADS)
</I>&gt;<i> +/*
</I>&gt;<i> + * Get the stack start address for the specified address.
</I>&gt;<i> + */
</I>&gt;<i> +int
</I>&gt;<i> +np_stackinfo(pthread_t p, void **addr)
</I>&gt;<i> +{
</I>&gt;<i> +       pthread_attr_t attr;
</I>&gt;<i> +       int ret = -1;
</I>&gt;<i> +
</I>&gt;<i> +       if (pthread_attr_init(&amp;attr))
</I>&gt;<i> +               return -1;
</I>&gt;<i> +
</I>&gt;<i> +       if (!pthread_attr_get_np(p, &amp;attr))
</I>&gt;<i> +               if (!pthread_attr_getstackaddr(&amp;attr, addr))
</I>&gt;<i> +                       ret = 0;
</I>&gt;<i> +
</I>&gt;<i> +       pthread_attr_destroy(&amp;attr);
</I>&gt;<i> +       return ret;
</I>&gt;<i> +}
</I>&gt;<i> +#endif
</I>&gt;<i> +
</I>&gt;<i>  /* There seems to be a very rare thread stopping problem.  To help us  */
</I>&gt;<i>  /* debug that, we save the ids of the stopping thread. */
</I>&gt;<i>  pthread_t GC_stopping_thread;
</I>&gt;<i> @@ -334,6 +360,7 @@
</I>&gt;<i>              if (p -&gt; stop_info.last_stop_count == GC_stop_count) continue;
</I>&gt;<i>             if (p -&gt; thread_blocked) /* Will wait */ continue;
</I>&gt;<i>              n_live_threads++;
</I>&gt;<i> +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i>             #if DEBUG_THREADS
</I>&gt;<i>               GC_printf1(&quot;Sending suspend signal to 0x%lx\n&quot;, p -&gt; id);
</I>&gt;<i>             #endif
</I>&gt;<i> @@ -349,6 +376,23 @@
</I>&gt;<i>                  default:
</I>&gt;<i>                      ABORT(&quot;pthread_kill failed&quot;);
</I>&gt;<i>              }
</I>&gt;<i> +#else
</I>&gt;<i> +           #if DEBUG_THREADS
</I>&gt;<i> +             GC_printf1(&quot;Suspending 0x%lx ...\n&quot;, p -&gt; id);
</I>&gt;<i> +           #endif
</I>&gt;<i> +
</I>&gt;<i> +               if(pthread_suspend_np(p -&gt; id) != 0)
</I>&gt;<i> +                       GC_printf1(&quot;Could not susend thread... 0x%lx\n&quot;, p -&gt; id);
</I>&gt;<i> +
</I>&gt;<i> +               /* Right now, this is not enough. Retreiving the stack base address is not the correct */
</I>&gt;<i> +               /* info to give to the GC, but since there is no way to get the current stack pointer  */
</I>&gt;<i> +               /* for the suspended thread, base pointer will have to be enough. Mono seems to be     */
</I>&gt;<i> +               /* happy with it so... */
</I>&gt;<i> +               if(np_stackinfo(p -&gt; id, &amp;(p -&gt; stop_info.stack_ptr)) != 0)
</I>&gt;<i> +                       GC_err_printf1(&quot;Could not get thread stack address... 0x%lx\n&quot;, p -&gt; id);
</I>&gt;<i> +
</I>&gt;<i> +        n_live_threads--;
</I>&gt;<i> +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i>          }
</I>&gt;<i>        }
</I>&gt;<i>      }
</I>&gt;<i> @@ -368,6 +412,7 @@
</I>&gt;<i>
</I>&gt;<i>      n_live_threads = GC_suspend_all();
</I>&gt;<i>
</I>&gt;<i> +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i>        if (GC_retry_signals) {
</I>&gt;<i>           unsigned long wait_usecs = 0;  /* Total wait since retry.     */
</I>&gt;<i>  #        define WAIT_UNIT 3000
</I>&gt;<i> @@ -405,6 +450,8 @@
</I>&gt;<i>               }
</I>&gt;<i>           }
</I>&gt;<i>      }
</I>&gt;<i> +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i> +
</I>&gt;<i>      #if DEBUG_THREADS
</I>&gt;<i>        GC_printf1(&quot;World stopped from 0x%lx\n&quot;, pthread_self());
</I>&gt;<i>      #endif
</I>&gt;<i> @@ -456,6 +503,7 @@
</I>&gt;<i>              if (p -&gt; flags &amp; FINISHED) continue;
</I>&gt;<i>             if (p -&gt; thread_blocked) continue;
</I>&gt;<i>              n_live_threads++;
</I>&gt;<i> +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i>             #if DEBUG_THREADS
</I>&gt;<i>               GC_printf1(&quot;Sending restart signal to 0x%lx\n&quot;, p -&gt; id);
</I>&gt;<i>             #endif
</I>&gt;<i> @@ -471,10 +519,18 @@
</I>&gt;<i>                  default:
</I>&gt;<i>                      ABORT(&quot;pthread_kill failed&quot;);
</I>&gt;<i>              }
</I>&gt;<i> +#else
</I>&gt;<i> +           #if DEBUG_THREADS
</I>&gt;<i> +             GC_printf1(&quot;Resuming Thread 0x%lx\n&quot;, p -&gt; id);
</I>&gt;<i> +           #endif
</I>&gt;<i> +               pthread_resume_np(p -&gt; id);
</I>&gt;<i> +               n_live_threads--;
</I>&gt;<i> +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i>          }
</I>&gt;<i>        }
</I>&gt;<i>      }
</I>&gt;<i>
</I>&gt;<i> +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i>      #if DEBUG_THREADS
</I>&gt;<i>      GC_printf0 (&quot;All threads signaled&quot;);
</I>&gt;<i>      #endif
</I>&gt;<i> @@ -487,6 +543,7 @@
</I>&gt;<i>             }
</I>&gt;<i>         }
</I>&gt;<i>      }
</I>&gt;<i> +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i>
</I>&gt;<i>      #if DEBUG_THREADS
</I>&gt;<i>        GC_printf0(&quot;World started\n&quot;);
</I>&gt;<i> @@ -504,6 +561,8 @@
</I>&gt;<i>  }
</I>&gt;<i>
</I>&gt;<i>  static void pthread_stop_init() {
</I>&gt;<i> +
</I>&gt;<i> +#if !defined(GC_NETBSD_THREADS)
</I>&gt;<i>      struct sigaction act;
</I>&gt;<i>
</I>&gt;<i>      if (sem_init(&amp;GC_suspend_ack_sem, 0, 0) != 0)
</I>&gt;<i> @@ -544,6 +603,16 @@
</I>&gt;<i>                GC_printf0(&quot;Will retry suspend signal if necessary.\n&quot;);
</I>&gt;<i>           }
</I>&gt;<i>  #     endif
</I>&gt;<i> +#else
</I>&gt;<i> +    struct sigaction act;
</I>&gt;<i> +
</I>&gt;<i> +    act.sa_flags = SA_RESTART;
</I>&gt;<i> +    if (sigfillset(&amp;act.sa_mask) != 0) {
</I>&gt;<i> +       ABORT(&quot;sigfillset() failed&quot;);
</I>&gt;<i> +    }
</I>&gt;<i> +    GC_remove_allowed_signals(&amp;act.sa_mask);
</I>&gt;<i> +
</I>&gt;<i> +#endif /* !GC_NETBSD_THREADS */
</I>&gt;<i>  }
</I>&gt;<i>
</I>&gt;<i>  /* We hold the allocation lock.        */
</I>&gt;<i> Index: libgc/pthread_support.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- libgc/pthread_support.c     (revision 71807)
</I>&gt;<i> +++ libgc/pthread_support.c     (working copy)
</I>&gt;<i> @@ -67,8 +67,8 @@
</I>&gt;<i>  # endif
</I>&gt;<i>
</I>&gt;<i>  # if (defined(GC_DGUX386_THREADS) || defined(GC_OSF1_THREADS) || \
</I>&gt;<i> -      defined(GC_DARWIN_THREADS) || defined(GC_AIX_THREADS)) \
</I>&gt;<i> -      &amp;&amp; !defined(USE_PTHREAD_SPECIFIC)
</I>&gt;<i> +      defined(GC_DARWIN_THREADS) || defined(GC_AIX_THREADS)) || \
</I>&gt;<i> +      defined(GC_NETBSD_THREADS) &amp;&amp; !defined(USE_PTHREAD_SPECIFIC)
</I>&gt;<i>  #   define USE_PTHREAD_SPECIFIC
</I>&gt;<i>  # endif
</I>&gt;<i>
</I>&gt;<i> @@ -126,8 +126,13 @@
</I>&gt;<i>  # include &lt;sys/sysctl.h&gt;
</I>&gt;<i>  #endif /* GC_DARWIN_THREADS */
</I>&gt;<i>
</I>&gt;<i> +#if defined(GC_NETBSD_THREADS)
</I>&gt;<i> +# include &lt;sys/param.h&gt;
</I>&gt;<i> +# include &lt;sys/sysctl.h&gt;
</I>&gt;<i> +#endif
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> +
</I>&gt;<i>  #if defined(GC_DGUX386_THREADS)
</I>&gt;<i>  # include &lt;sys/dg_sys_info.h&gt;
</I>&gt;<i>  # include &lt;sys/_int_psem.h&gt;
</I>&gt;<i> @@ -1013,7 +1018,7 @@
</I>&gt;<i>           GC_nprocs = sysconf(_SC_NPROC_ONLN);
</I>&gt;<i>           if (GC_nprocs &lt;= 0) GC_nprocs = 1;
</I>&gt;<i>  #       endif
</I>&gt;<i> -#       if defined(GC_DARWIN_THREADS) || defined(GC_FREEBSD_THREADS)
</I>&gt;<i> +#       if defined(GC_DARWIN_THREADS) || defined(GC_FREEBSD_THREADS) || defined(GC_NETBSD_THREADS)
</I>&gt;<i>           int ncpus = 1;
</I>&gt;<i>           size_t len = sizeof(ncpus);
</I>&gt;<i>           sysctl((int[2]) {CTL_HW, HW_NCPU}, 2, &amp;ncpus, &amp;len, NULL, 0);
</I>&gt;<i> Index: libgc/specific.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- libgc/specific.c    (revision 71807)
</I>&gt;<i> +++ libgc/specific.c    (working copy)
</I>&gt;<i> @@ -13,7 +13,7 @@
</I>&gt;<i>
</I>&gt;<i>  #include &quot;private/gc_priv.h&quot; /* For GC_compare_and_exchange, GC_memory_barrier */
</I>&gt;<i>
</I>&gt;<i> -#if defined(GC_LINUX_THREADS)
</I>&gt;<i> +#if defined(GC_LINUX_THREADS) || defined(GC_NETBSD_THREADS)
</I>&gt;<i>
</I>&gt;<i>  #include &quot;private/specific.h&quot;
</I>&gt;<i>
</I>&gt;<i> Index: libgc/dyn_load.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- libgc/dyn_load.c    (revision 71807)
</I>&gt;<i> +++ libgc/dyn_load.c    (working copy)
</I>&gt;<i> @@ -75,6 +75,11 @@
</I>&gt;<i>  #   include &lt;dlfcn.h&gt;
</I>&gt;<i>  #   include &lt;link.h&gt;
</I>&gt;<i>  #endif
</I>&gt;<i> +
</I>&gt;<i> +#ifdef NETBSD
</I>&gt;<i> +#include &lt;dlfcn.h&gt;
</I>&gt;<i> +#endif
</I>&gt;<i> +
</I>&gt;<i>  #ifdef SUNOS4
</I>&gt;<i>  #   include &lt;dlfcn.h&gt;
</I>&gt;<i>  #   include &lt;link.h&gt;
</I>&gt;<i> @@ -519,6 +524,31 @@
</I>&gt;<i>                  break;
</I>&gt;<i>              }
</I>&gt;<i>          }
</I>&gt;<i> +
</I>&gt;<i> +#if defined(NETBSD)
</I>&gt;<i> +#undef dlopen
</I>&gt;<i> +#undef dlsym
</I>&gt;<i> +#undef dlclose
</I>&gt;<i> +               /* This is a hack. For now, it seems that NetBSD 2.0 does not provide
</I>&gt;<i> +                  a _DYNAMIC with the neccessary DT_DEBUG information. A simple dlopen(0, RTLD_LAZY)
</I>&gt;<i> +                  does the job. Maybe a NetBSD guru could explain this...
</I>&gt;<i> +            */
</I>&gt;<i> +               if(cachedResult == 0) {
</I>&gt;<i> +                       void* startupSyms = dlopen(0, RTLD_LAZY);
</I>&gt;<i> +                       dp = (ElfW(Dyn)*)dlsym(startupSyms, &quot;_DYNAMIC&quot;);
</I>&gt;<i> +
</I>&gt;<i> +                       for(; (tag = dp-&gt;d_tag) != 0; dp++ ) {
</I>&gt;<i> +                               if( tag == DT_DEBUG ) {
</I>&gt;<i> +                                       struct link_map *lm
</I>&gt;<i> +                                                       = ((struct r_debug *)(dp-&gt;d_un.d_ptr))-&gt;r_map;
</I>&gt;<i> +                                       if( lm != 0 ) cachedResult = lm-&gt;l_next; /* might be NIL */
</I>&gt;<i> +                                       break;
</I>&gt;<i> +                               }
</I>&gt;<i> +                       }
</I>&gt;<i> +
</I>&gt;<i> +                       dlclose(startupSyms);
</I>&gt;<i> +               }
</I>&gt;<i> +#endif
</I>&gt;<i>      }
</I>&gt;<i>      return cachedResult;
</I>&gt;<i>  }
</I>&gt;<i> Index: mono/io-layer/collection.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- mono/io-layer/collection.c  (revision 71807)
</I>&gt;<i> +++ mono/io-layer/collection.c  (working copy)
</I>&gt;<i> @@ -60,7 +60,7 @@
</I>&gt;<i>         g_assert (ret == 0);
</I>&gt;<i>
</I>&gt;<i>  #ifdef HAVE_PTHREAD_ATTR_SETSTACKSIZE
</I>&gt;<i> -#ifdef __FreeBSD__
</I>&gt;<i> +#if defined(__FreeBSD__) || defined(__NetBSD__)
</I>&gt;<i>         ret = pthread_attr_setstacksize (&amp;attr, 65536);
</I>&gt;<i>  #else
</I>&gt;<i>         ret = pthread_attr_setstacksize (&amp;attr, PTHREAD_STACK_MIN);
</I>&gt;<i> Index: mono/mini/mini-x86.h
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- mono/mini/mini-x86.h        (revision 71807)
</I>&gt;<i> +++ mono/mini/mini-x86.h        (working copy)
</I>&gt;<i> @@ -43,7 +43,7 @@
</I>&gt;<i>
</I>&gt;<i>  #endif /* PLATFORM_WIN32 */
</I>&gt;<i>
</I>&gt;<i> -#if defined( __linux__) || defined(__sun) || defined(__APPLE__)
</I>&gt;<i> +#if defined( __linux__) || defined(__sun) || defined(__APPLE__) || defined(__NetBSD__)
</I>&gt;<i>  #define MONO_ARCH_USE_SIGACTION
</I>&gt;<i>  #endif
</I>&gt;<i>
</I>&gt;<i> @@ -153,6 +153,16 @@
</I>&gt;<i>         #define UCONTEXT_REG_ESI(ctx) ((ctx)-&gt;uc_mcontext-&gt;ss.esi)
</I>&gt;<i>         #define UCONTEXT_REG_EDI(ctx) ((ctx)-&gt;uc_mcontext-&gt;ss.edi)
</I>&gt;<i>         #define UCONTEXT_REG_EIP(ctx) ((ctx)-&gt;uc_mcontext-&gt;ss.eip)
</I>&gt;<i> +#elif defined(__NetBSD__)
</I>&gt;<i> +       #define UCONTEXT_REG_EAX(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EAX])
</I>&gt;<i> +       #define UCONTEXT_REG_EBX(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EBX])
</I>&gt;<i> +       #define UCONTEXT_REG_ECX(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_ECX])
</I>&gt;<i> +       #define UCONTEXT_REG_EDX(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EDX])
</I>&gt;<i> +       #define UCONTEXT_REG_EBP(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EBP])
</I>&gt;<i> +       #define UCONTEXT_REG_ESP(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_ESP])
</I>&gt;<i> +       #define UCONTEXT_REG_ESI(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_ESI])
</I>&gt;<i> +       #define UCONTEXT_REG_EDI(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EDI])
</I>&gt;<i> +       #define UCONTEXT_REG_EIP(ctx) ((ctx)-&gt;uc_mcontext.__gregs [_REG_EIP])
</I>&gt;<i>  #else
</I>&gt;<i>         #define UCONTEXT_REG_EAX(ctx) ((ctx)-&gt;uc_mcontext.gregs [REG_EAX])
</I>&gt;<i>         #define UCONTEXT_REG_EBX(ctx) ((ctx)-&gt;uc_mcontext.gregs [REG_EBX])
</I>&gt;<i> Index: configure.in
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- configure.in        (revision 71807)
</I>&gt;<i> +++ configure.in        (working copy)
</I>&gt;<i> @@ -82,14 +82,16 @@
</I>&gt;<i>                 ;;
</I>&gt;<i>         *-*-*netbsd*)
</I>&gt;<i>                 platform_win32=no
</I>&gt;<i> -               CPPFLAGS=&quot;$CPPFLAGS -D_REENTRANT&quot;
</I>&gt;<i> +               CPPFLAGS=&quot;$CPPFLAGS -D_REENTRANT -DGC_NETBSD_THREADS -D_GNU_SOURCE&quot;
</I>&gt;<i>                 libmono_cflags=&quot;-D_REENTRANT&quot;
</I>&gt;<i>                 LDFLAGS=&quot;$LDFLAGS -pthread&quot;
</I>&gt;<i>                 CPPFLAGS=&quot;$CPPFLAGS -DPLATFORM_BSD&quot;
</I>&gt;<i>                 libmono_ldflags=&quot;-pthread&quot;
</I>&gt;<i>                 need_link_unlink=yes
</I>&gt;<i> -               libdl=
</I>&gt;<i> -               libgc_threads=no
</I>&gt;<i> +               libdl=&quot;-ldl /libexec/ld.elf_so&quot;
</I>&gt;<i> +               libgc_threads=pthreads
</I>&gt;<i> +               with_tls=__thread
</I>&gt;<i> +               with_sigaltstack=no
</I>&gt;<i>                 ;;
</I>&gt;<i>  # these flags will work for all versions of -STABLE
</I>&gt;<i>  #
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022283.html">[Mono-dev] NetBSD patches
</A></li>
	<LI>Next message: <A HREF="022289.html">[Mono-dev] NetBSD patches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22286">[ date ]</a>
              <a href="thread.html#22286">[ thread ]</a>
              <a href="subject.html#22286">[ subject ]</a>
              <a href="author.html#22286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
