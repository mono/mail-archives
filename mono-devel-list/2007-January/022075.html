<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Patch to add missing v2 System.Exception constructors,	and HResult consistency
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%20to%20add%20missing%20v2%20System.Exception%20constructors%2C%0A%09and%20HResult%20consistency&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022094.html">
   <LINK REL="Next"  HREF="022077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Patch to add missing v2 System.Exception constructors,	and HResult consistency</H1>
    <B>Andy Hume</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%20to%20add%20missing%20v2%20System.Exception%20constructors%2C%0A%09and%20HResult%20consistency&In-Reply-To="
       TITLE="[Mono-dev] Patch to add missing v2 System.Exception constructors,	and HResult consistency">andyhume32 at yahoo.co.uk
       </A><BR>
    <I>Wed Jan 10 15:00:09 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022094.html">[Mono-dev] thiscall calling convention
</A></li>
        <LI>Next message: <A HREF="022077.html">[Mono-dev] Patch to add missing v2 System.Exception	constructors, and HResult consistency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22075">[ date ]</a>
              <a href="thread.html#22075">[ thread ]</a>
              <a href="subject.html#22075">[ subject ]</a>
              <a href="author.html#22075">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A project of mine uses #ctor(String,Exception) on ObjectDisposedException, so I looked at adding that, and any other similar constructors missing as per the class status report.

I also spotted inconsistent setting of HResult, and fixed those too.  For instance, ArgumentNullException sets HResult only in three out of the four constuctors; not setting it in the v2 (String,Exception) one -- and correctly not in the Serialization constructor.


So, I fixed the remaining missing (String,Exception) constructors in corlib (2 of), and fixed the Hresult setting in all exceptions there (4 of).

The remaining Exception constructor omission listed was InvalidCastException.ctor(System.String, System.Int32).  MSDN says:
&quot;This constructor supplies an HRESULT value that is accessible to inheritors of the InvalidCastException class, via the protected HResult property of the Exception class.&quot;
I added that method too, setting the HResult property from the Int32 argument.


I attach a patch for all that.  A caveat though, as I expect setting up the build environment may take me some time on my Windows box, I added all the corlib files into a Visual Studio project and compiled it there...  So no further testing could be  done...  Don't know whether that's of any use, or just trouble. :-,(

Andy


	
	
		
___________________________________________________________ 
All new Yahoo! Mail &quot;The new Interface is stunning in its simplicity and ease of use.&quot; - PC Magazine 
<A HREF="http://uk.docs.yahoo.com/nowyoucan.html">http://uk.docs.yahoo.com/nowyoucan.html</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022094.html">[Mono-dev] thiscall calling convention
</A></li>
	<LI>Next message: <A HREF="022077.html">[Mono-dev] Patch to add missing v2 System.Exception	constructors, and HResult consistency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22075">[ date ]</a>
              <a href="thread.html#22075">[ thread ]</a>
              <a href="subject.html#22075">[ subject ]</a>
              <a href="author.html#22075">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
