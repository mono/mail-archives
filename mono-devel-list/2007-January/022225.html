<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] A significant number of Mono classes are not (binary) compatible with their .Net equivalents?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20A%20significant%20number%20of%20Mono%20classes%20are%20not%20%28binary%29%0A%20compatible%20with%20their%20.Net%20equivalents%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022224.html">
   <LINK REL="Next"  HREF="022226.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] A significant number of Mono classes are not (binary) compatible with their .Net equivalents?</H1>
    <B>Lionel Cuir</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20A%20significant%20number%20of%20Mono%20classes%20are%20not%20%28binary%29%0A%20compatible%20with%20their%20.Net%20equivalents%3F&In-Reply-To="
       TITLE="[Mono-dev] A significant number of Mono classes are not (binary) compatible with their .Net equivalents?">lionel_email at aulofee.com
       </A><BR>
    <I>Thu Jan 25 06:22:09 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022224.html">[Mono-dev] [Mono-list] serial port problem
</A></li>
        <LI>Next message: <A HREF="022226.html">[Mono-dev] A significant number of Mono classes are not	(binary) compatible with their .Net equivalents?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22225">[ date ]</a>
              <a href="thread.html#22225">[ thread ]</a>
              <a href="subject.html#22225">[ subject ]</a>
              <a href="author.html#22225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

My intention is not to raise an useless debate (no 'trolling'), and I 
sincerely hope I'm misleading somewhere...

It seems there are many many classes in Mono that are not fully 
compatible - to be more precise binary compatible - with their 
equivalents in the .Net framework (the fact you work with Mono on Linux 
or Windows does not matter). By binary compatible, I mean to binary 
serialize a class in Mono and to deserialize in .Net, or vice-versa. 
This is a simple but much needed need when two systems must communicate 
with each other (over network or with file exchange).

To give some figures, I've created a sample test application and ran it 
on System.dll: over 430 types, approx. 68 instantiated and serialized 
with .Net throw an exception when deserialized with Mono.

Where does the problem come from?
Binary serialization works by creating an internal dictionary which 
stores the names of the object's serialized fields and their values. At 
deserialization, we use the names in the tables, matchs them against the 
name of the class of the framework (Mono or .Net) and restore the value.

The problem is simple but concrete: .Net and Mono developers have not 
use the same name for their fields. Hence the exceptions thrown.

The solution (very time consuming): we should review all serializable 
classes and make their fields' names match those of the .Net framework.

Once more, I sincerely hope that I'm misleading somewhere, because I 
don't think the review of all that classes is anybody's cup of tea...

Regards,

Lionel


Attached files:
--------------
1. The test application mentioned above. It's far from perfect (some 
exceptions thrown are due to the fact it's quickly coded) but gives a 
fair view of the problem. If you want to run the test application 
against another assembly than System.dll, just look for the line 
SerializeMostAssemblyTypesAndWriteToFiles(typeof(Guid).Assembly); and 
replace typeof(Guid).Assembly with a reference to the assembly you want 
to test.
    Usage:
    &quot;Aulofee.SerializationTester write&quot;  to inspect an assembly, 
instantiate its exporable serializable types and serialize them into 
some files.
    This generates a log file &quot;log_write.txt&quot;
    &quot;Aulofee.SerializationTester read&quot;  to read all the files generated 
above an deserialize their content.
    This generates a log file &quot;log_read.txt&quot;
  

2. The two logs generated when deserializing the files generated with 
the test app, one generated with .Net, the other with Mono (on Linux).

-- 
Lionel Cuir
PDG
Aulof&#233;e
tel: +33.(0)6.99.24.38.04
mail: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lionel.cuir at aulofee.com</A>
web: <A HREF="http://www.aulofee.com">http://www.aulofee.com</A>

*Centralisez et automatisez la supervision de vos syst&#232;mes d'information 
avec Aliz&#233;:*
* s&#233;curit&#233;/corr&#233;lation de logs * inventaire/d&#233;tection de parc * 
reporting * cartographie r&#233;seau *
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070125/6f660160/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070125/6f660160/attachment.html</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SerializationTester.zip
Type: application/zip
Size: 4239 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070125/6f660160/attachment.zip">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070125/6f660160/attachment.zip</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logs.zip
Type: application/zip
Size: 11673 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070125/6f660160/attachment-0001.zip">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070125/6f660160/attachment-0001.zip</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022224.html">[Mono-dev] [Mono-list] serial port problem
</A></li>
	<LI>Next message: <A HREF="022226.html">[Mono-dev] A significant number of Mono classes are not	(binary) compatible with their .Net equivalents?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22225">[ date ]</a>
              <a href="thread.html#22225">[ thread ]</a>
              <a href="subject.html#22225">[ subject ]</a>
              <a href="author.html#22225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
