<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] A significant number of Mono classes are not (binary) compatible with their .Net equivalents?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20A%20significant%20number%20of%20Mono%20classes%20are%20not%0A%20%28binary%29%20compatible%20with%20their%20.Net%20equivalents%3F&In-Reply-To=45B892E1.3090904%40aulofee.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022228.html">
   <LINK REL="Next"  HREF="022229.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] A significant number of Mono classes are not (binary) compatible with their .Net equivalents?</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20A%20significant%20number%20of%20Mono%20classes%20are%20not%0A%20%28binary%29%20compatible%20with%20their%20.Net%20equivalents%3F&In-Reply-To=45B892E1.3090904%40aulofee.com"
       TITLE="[Mono-dev] A significant number of Mono classes are not (binary) compatible with their .Net equivalents?">robertj at gmx.net
       </A><BR>
    <I>Thu Jan 25 07:21:45 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022228.html">[Mono-dev] A significant number of Mono classes are	not	(binary) compatible with their .Net equivalents?
</A></li>
        <LI>Next message: <A HREF="022229.html">[Mono-dev] A significant number of Mono classes are not (binary) compatible with their .Net equivalents?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22227">[ date ]</a>
              <a href="thread.html#22227">[ thread ]</a>
              <a href="subject.html#22227">[ subject ]</a>
              <a href="author.html#22227">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;<i> It seems there are many many classes in Mono that are not fully 
</I>&gt;<i> compatible - to be more precise binary compatible - with their 
</I>&gt;<i> equivalents in the .Net framework (the fact you work with Mono on Linux 
</I>&gt;<i> or Windows does not matter). By binary compatible, I mean to binary 
</I>&gt;<i> serialize a class in Mono and to deserialize in .Net, or vice-versa. 
</I>&gt;<i> This is a simple but much needed need when two systems must communicate 
</I>&gt;<i> with each other (over network or with file exchange).
</I>&gt;<i> 
</I>&gt;<i> To give some figures, I've created a sample test application and ran it 
</I>&gt;<i> on System.dll: over 430 types, approx. 68 instantiated and serialized 
</I>&gt;<i> with .Net throw an exception when deserialized with Mono.
</I>&gt;<i> 
</I>&gt;<i> Where does the problem come from?
</I>&gt;<i> Binary serialization works by creating an internal dictionary which 
</I>&gt;<i> stores the names of the object's serialized fields and their values. At 
</I>&gt;<i> deserialization, we use the names in the tables, matchs them against the 
</I>&gt;<i> name of the class of the framework (Mono or .Net) and restore the value.
</I>&gt;<i> 
</I>&gt;<i> The problem is simple but concrete: .Net and Mono developers have not 
</I>&gt;<i> use the same name for their fields. Hence the exceptions thrown.
</I>
The problem is not simple at all. Mono's developers didn't
decompile MS.NET. They've implemented the classes from reading
the docs of the public API. Since serialization is reflecting on
private members, it is inherently very implementation specific.

You may have a look at the System.Drawing.Color class to
see what a mess serialization could be when the implementation
details differ too much.

&gt;<i> Once more, I sincerely hope that I'm misleading somewhere, because I 
</I>&gt;<i> don't think the review of all that classes is anybody's cup of tea...
</I>
You got this right, although you seem to test the .NET 2.0 API
which is still incomplete and still in development.

Note that serialization is problematic in general, even on MS.NET
(just try to deserialize data written by 2.0 with an 1.1 application).
My strong opinion (regardless of the framework) is to not rely on
serialization for types you didn't implement yourself, excepting
some basic corlib types like collections.

Robert


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022228.html">[Mono-dev] A significant number of Mono classes are	not	(binary) compatible with their .Net equivalents?
</A></li>
	<LI>Next message: <A HREF="022229.html">[Mono-dev] A significant number of Mono classes are not (binary) compatible with their .Net equivalents?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22227">[ date ]</a>
              <a href="thread.html#22227">[ thread ]</a>
              <a href="subject.html#22227">[ subject ]</a>
              <a href="author.html#22227">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
