<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] new test framework works on dotnet
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20new%20test%20framework%20works%20on%20dotnet&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018632.html">
   <LINK REL="Next"  HREF="018636.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] new test framework works on dotnet</H1>
    <B>Andrew Skiba</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20new%20test%20framework%20works%20on%20dotnet&In-Reply-To="
       TITLE="[Mono-dev] new test framework works on dotnet">andrews at mainsoft.com
       </A><BR>
    <I>Sun May 21 12:23:37 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018632.html">[Mono-dev] RE: improved patch for ApplyTheme
</A></li>
        <LI>Next message: <A HREF="018636.html">[Mono-dev] Re: Remoting Type Load Exception - After Upgrading	from .NET 1.1 to 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18635">[ date ]</a>
              <a href="thread.html#18635">[ thread ]</a>
              <a href="subject.html#18635">[ subject ]</a>
              <a href="author.html#18635">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I succeeded to reproduce the hang on linux, this is kill -QUIT result
during hang

Full thread dump:

&quot;&quot; tid=0x0xb7db66c0 this=0x0x21e40:
in (wrapper managed-to-native)
System.Threading.WaitHandle:WaitOne_internal (intptr,int,bool) &lt;0x4&gt;
in (wrapper managed-to-native)
System.Threading.WaitHandle:WaitOne_internal (intptr,int,bool)
&lt;0xffffffe5&gt;
in System.Threading.WaitHandle:WaitOne () (at
/home/andrews/monobuild/mcs/class/corlib/System.Threading/WaitHandle.cs:
178)
in
System.Web.HttpApplication:System.Web.IHttpAsyncHandler.EndProcessReques
t (System.IAsyncResult) (at
/home/andrews/monobuild/mcs/class/System.Web/System.Web/HttpApplication.
cs:1116)
in System.Web.HttpRuntime:RealProcessRequest (object) (at
/home/andrews/monobuild/mcs/class/System.Web/System.Web/HttpRuntime.cs:2
66)
in System.Web.HttpRuntime:ProcessRequest (System.Web.HttpWorkerRequest)
(at
/home/andrews/monobuild/mcs/class/System.Web/System.Web/HttpRuntime.cs:2
92)
in NunitWeb.MyHost:DoRun (string,System.Delegate,object) (at
/home/andrews/monobuild/mcs/class/System.Web/Test/mainsoft/NunitWeb/Nuni
tWeb/MyHost.cs:41)
in (wrapper remoting-invoke-with-check) NunitWeb.MyHost:DoRun
(string,System.Delegate,object) &lt;0xffffe98c&gt;
in (wrapper xdomain-dispatch) NunitWeb.MyHost:DoRun
(object,byte[]&amp;,byte[]&amp;,string) &lt;0x1ed6c&gt;
in (wrapper xdomain-invoke) NunitWeb.MyHost:DoRun
(string,System.Delegate,object) &lt;0xb63f22ec&gt;
in (wrapper managed-to-native)
System.Reflection.MonoMethod:InternalInvoke (object,object[])
&lt;0xb6dd3004&gt;
in (wrapper xdomain-dispatch) NUnit.Core.RemoteTestRunner:Run
(object,byte[]&amp;,byte[]&amp;) &lt;0xb6730f34&gt;
in (wrapper xdomain-invoke) NUnit.Core.RemoteTestRunner:Run
(NUnit.Core.EventListener) &lt;0x4&gt;
in (wrapper xdomain-invoke) NUnit.Core.RemoteTestRunner:Run
(NUnit.Core.EventListener) &lt;0x919b&gt;
in NUnit.Util.TestDomain:Run (NUnit.Core.EventListener) &lt;0x83&gt;
in NUnit.Console.ConsoleUi:Execute (NUnit.Util.ConsoleOptions) &lt;0x3d4&gt;
in NUnit.Console.ConsoleUi:Main (string[]) &lt;0x127&gt;
in (wrapper runtime-invoke) System.Object:runtime_invoke_int_string[]
(object,intptr,intptr,intptr) &lt;0x50b6a957&gt;

&quot;&quot; tid=0x0xb63babb0 this=0x0x4e2240:
in (wrapper managed-to-native)
System.Threading.WaitHandle:WaitOne_internal (intptr,int,bool) &lt;0x4&gt;
in (wrapper managed-to-native)
System.Threading.WaitHandle:WaitOne_internal (intptr,int,bool)
&lt;0xffdcd8bc&gt;
in System.Threading.WaitHandle:WaitOne (int,bool) (at
/home/andrews/monobuild/mcs/class/corlib/System.Threading/WaitHandle.cs:
186)
in Runner:Start () (at
/home/andrews/monobuild/mcs/class/corlib/System.Threading/Timer.cs:142)
in (wrapper delegate-invoke) System.MulticastDelegate:invoke_void ()
&lt;0x3fc48&gt;
in (wrapper runtime-invoke) System.Object:runtime_invoke_void
(object,intptr,intptr,intptr) &lt;0x51d1f757&gt;

&quot;&quot; tid=0x0xb619abb0 this=0x0x4e2180:
in (wrapper managed-to-native) System.Threading.Thread:Sleep_internal
(int) &lt;0x4&gt;
in (wrapper managed-to-native) System.Threading.Thread:Sleep_internal
(int) &lt;0xffffffae&gt;
in System.Threading.Thread:Sleep (int) (at
/home/andrews/monobuild/mcs/class/corlib/System.Threading/Thread.cs:279)
in System.IO.FAMWatcher:Monitor () (at
/home/andrews/monobuild/mcs/class/System/System.IO/FAMWatcher.cs:250)
in (wrapper delegate-invoke) System.MulticastDelegate:invoke_void ()
&lt;0x3fc48&gt;
in (wrapper runtime-invoke) System.Object:runtime_invoke_void
(object,intptr,intptr,intptr) &lt;0x51d1f757&gt;

&gt;<i> 
</I>&gt;<i> Hello Miguel,
</I>&gt;<i>  
</I>&gt;<i> Thank you for your response. I forgot to mention that I used 
</I>&gt;<i> cygwin to run mono, if that matters. When I sent QUIT to the 
</I>&gt;<i> Mono process, it terminated, with message about core dump, 
</I>&gt;<i> but core dump was not created. I did not manage to try it on 
</I>&gt;<i> Linux today, I'll try to do that on Sunday.
</I>&gt;<i>  
</I>&gt;<i> Also I was not clear enough about the Sleep work around. With 
</I>&gt;<i> sleep, there is no hang problem, when I said that 'some tests 
</I>&gt;<i> still fail', I meant that they did not pass some assert. So 
</I>&gt;<i> right now hang problem does not block my work.
</I>&gt;<i>  
</I>&gt;<i> Andrew.
</I>&gt;<i> 
</I>&gt;<i> ________________________________
</I>&gt;<i> 
</I>&gt;<i> From: Miguel de Icaza [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at ximian.com</A>]
</I>&gt;<i> Sent: Wed 5/17/2006 4:14 PM
</I>&gt;<i> To: Andrew Skiba
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-dev] new test framework works on dotnet
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> &gt; Some tests pass on Mono, but some of them need more effort. 
</I>&gt;<i> Sometimes 
</I>&gt;<i> &gt; mono vm stucks, I worked around that by adding Sleep at the 
</I>&gt;<i> beginning 
</I>&gt;<i> &gt; of each test. Some tests still fail.
</I>&gt;<i> 
</I>&gt;<i> Mhm, very strange.
</I>&gt;<i> 
</I>&gt;<i> Could you send a QUIT signal to the Mono process when it 
</I>&gt;<i> hangs?  This will help pinpoint.
</I>&gt;<i> 
</I>&gt;<i> &gt; I added a custom target run-nunitweb-ondotnet and 
</I>&gt;<i> run-nunitweb-onmono 
</I>&gt;<i> &gt; to the makefile to run only the tests which use the new framework.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So I'm looking for the help to make them all pass on mono, 
</I>&gt;<i> so we can 
</I>&gt;<i> &gt; run them as a part of a build.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Andrew.
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> --
</I>&gt;<i> Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at ximian.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018632.html">[Mono-dev] RE: improved patch for ApplyTheme
</A></li>
	<LI>Next message: <A HREF="018636.html">[Mono-dev] Re: Remoting Type Load Exception - After Upgrading	from .NET 1.1 to 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18635">[ date ]</a>
              <a href="thread.html#18635">[ thread ]</a>
              <a href="subject.html#18635">[ subject ]</a>
              <a href="author.html#18635">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
