<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> AW: [Mono-dev] Mono remoting on an embedded arm system
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=AW%3A%20%5BMono-dev%5D%20Mono%20remoting%20on%20an%20embedded%20arm%20system&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018612.html">
   <LINK REL="Next"  HREF="018626.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>AW: [Mono-dev] Mono remoting on an embedded arm system</H1>
    <B>FALE(Leopold Faschalek)</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=AW%3A%20%5BMono-dev%5D%20Mono%20remoting%20on%20an%20embedded%20arm%20system&In-Reply-To="
       TITLE="AW: [Mono-dev] Mono remoting on an embedded arm system">FALE at skidata.com
       </A><BR>
    <I>Thu May 18 05:25:20 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018612.html">FW: [Mono-dev] new test framework works on dotnet
</A></li>
        <LI>Next message: <A HREF="018626.html">AW: [Mono-dev] Mono remoting on an embedded arm system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18608">[ date ]</a>
              <a href="thread.html#18608">[ thread ]</a>
              <a href="subject.html#18608">[ subject ]</a>
              <a href="author.html#18608">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Von: Miguel de Icaza [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at ximian.com</A>] 
</I>&gt;<i> Gesendet: Donnerstag, 18. Mai 2006 01:15
</I>&gt;<i> An: FALE(Leopold Faschalek)
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Betreff: Re: [Mono-dev] Mono remoting on an embedded arm system
</I>&gt;<i> 
</I>&gt;<i> hello,
</I>&gt;<i> 
</I>&gt;<i> &gt; we are running mono 1.1.14 on an embedded arm system with remoting 
</I>&gt;<i> &gt; services to communicate with a host system.
</I>&gt;<i> 
</I>&gt;<i> This does not ring any bells;   Could you cook a small test 
</I>&gt;<i> case, maybe
</I>&gt;<i> include the exception, stack traces produced?
</I>&gt;<i> 
</I>Hello,

I have made 3 runs with different debug/trace options
1) # mono --debug server.exe
2) # mono --trace=CommonLib --debug server.exe
3) # mono --trace=N:System.Runtime.Remoting --debug server.exe

In the 3. trace you see that RemotingServices:InternalExecute() which
has a 
try/catch block, doesn't resume execution.

Could you give me information to produce more infos on the exception
handling?

I append also the 3 sourcefiles

Greetings Leopold


========================================== OUTPUT 1
==============================================
# mono --debug server.exe
creating channel at port 9000
registering channel
Starting Server
Server serving at port 9000...
InfoDisplay.Show was called
toDevice called

Unhandled Exception: System.Exception: Hello World!
in [0x00042] (at /CommonLib.cs:25) CommonLib.InfoDisplay:toDevice (Byte
bitsToSet)
in [0x0000c] (at /CommonLib.cs:12) CommonLib.InfoDisplay:Show (Byte
bitsToSet)
in &lt;0x00000&gt; &lt;unknown method&gt;

========================================== OUTPUT 2
==============================================
# mono --trace=CommonLib server.exe
ENTER: (wrapper remoting-invoke-with-check) CommonLib.InfoDisplay:.ctor
()() ip: (nil)
. ENTER: CommonLib.InfoDisplay:.ctor ()() ip: (nil)
. LEAVE: CommonLib.InfoDisplay:.ctor ()
LEAVE: (wrapper remoting-invoke-with-check) CommonLib.InfoDisplay:.ctor
()
creating channel at port 9000
EXCEPTION handling: FormatException
EXCEPTION handling: FormatException
EXCEPTION handling: FormatException
registering channel
Starting Server
Server serving at port 9000...
ENTER: CommonLib.InfoDisplay:Show (byte)() ip: (nil)
InfoDisplay.Show was called
. ENTER: CommonLib.InfoDisplay:toDevice (byte)() ip: (nil)
toDevice called
EXCEPTION handling: Exception

Unhandled Exception: System.Exception: Hello World!
in &lt;0x000e0&gt; CommonLib.InfoDisplay:toDevice (Byte bitsToSet)
in &lt;0x00057&gt; CommonLib.InfoDisplay:Show (Byte bitsToSet)
in &lt;0x00000&gt; &lt;unknown method&gt;
========================================== OUTPUT 3
==============================================
# mono --trace=N:System.Runtime.Remoting --debug server.exe
&lt;snip/&gt;
ENTER: System.Runtime.Remoting.RemotingServices:SetMessageTargetIdentity
(System.Runtime.Remoting.Messaging.IMessage,)
LEAVE: System.Runtime.Remoting.RemotingServices:SetMessageTargetIdentity
(System.Runtime.Remoting.Messaging.IMessage,)
ENTER: System.Runtime.Remoting.RemotingServices:GetMessageTargetIdentity
(System.Runtime.Remoting.Messaging.IMessage))
LEAVE: System.Runtime.Remoting.RemotingServices:GetMessageTargetIdentity
(System.Runtime.Remoting.Messaging.IMessage)]
ENTER: System.Runtime.Remoting.ServerIdentity:get_Context ()() ip: (nil)
LEAVE: System.Runtime.Remoting.ServerIdentity:get_Context
()[System.Runtime.Remoting.Contexts.Context:0x291fc0]
ENTER: System.Runtime.Remoting.ServerIdentity:get_Context ()() ip: (nil)
LEAVE: System.Runtime.Remoting.ServerIdentity:get_Context
()[System.Runtime.Remoting.Contexts.Context:0x291fc0]
ENTER: System.Runtime.Remoting.RemotingServices:GetMessageTargetIdentity
(System.Runtime.Remoting.Messaging.IMessage))
LEAVE: System.Runtime.Remoting.RemotingServices:GetMessageTargetIdentity
(System.Runtime.Remoting.Messaging.IMessage)]
ENTER:
System.Runtime.Remoting.ClientActivatedIdentity:SyncObjectProcessMessage
(System.Runtime.Remoting.Messaging.IM)
. ENTER: (wrapper managed-to-native)
System.Runtime.Remoting.RemotingServices:IsTransparentProxy (object)()
ip: (nil)
. LEAVE: (wrapper managed-to-native)
System.Runtime.Remoting.RemotingServices:IsTransparentProxy
(object)FALSE
. ENTER:
System.Runtime.Remoting.RemotingServices:GetMessageTargetIdentity
(System.Runtime.Remoting.Messaging.IMessag)
. LEAVE:
System.Runtime.Remoting.RemotingServices:GetMessageTargetIdentity
(System.Runtime.Remoting.Messaging.IMessag]
. ENTER: System.Runtime.Remoting.ServerIdentity:get_Lease ()() ip: (nil)
. LEAVE: System.Runtime.Remoting.ServerIdentity:get_Lease
()[System.Runtime.Remoting.Lifetime.Lease:0x25be40]
. ENTER:
System.Runtime.Remoting.RemotingServices:GetMessageTargetIdentity
(System.Runtime.Remoting.Messaging.IMessag)
. LEAVE:
System.Runtime.Remoting.RemotingServices:GetMessageTargetIdentity
(System.Runtime.Remoting.Messaging.IMessag]
. ENTER: System.Runtime.Remoting.Identity:NotifyServerDynamicSinks
(bool,System.Runtime.Remoting.Messaging.IMessage,b)
. LEAVE: System.Runtime.Remoting.Identity:NotifyServerDynamicSinks
(bool,System.Runtime.Remoting.Messaging.IMessage,b)
. ENTER: System.Runtime.Remoting.RemotingServices:InternalExecuteMessage
(System.MarshalByRefObject,System.Runtime.Re)
. . ENTER: (wrapper managed-to-native)
System.Runtime.Remoting.RemotingServices:InternalExecute
(System.Reflection.Me)
InfoDisplay.Show was called
toDevice called
EXCEPTION handling: Exception

Unhandled Exception: System.Exception: Hello World!
in [0x00042] (at /CommonLib.cs:25) CommonLib.InfoDisplay:toDevice (Byte
bitsToSet)
in [0x0000c] (at /CommonLib.cs:12) CommonLib.InfoDisplay:Show (Byte
bitsToSet)
in &lt;0x00000&gt; &lt;unknown method&gt;
. . . ENTER: System.Runtime.Remoting.ServerIdentity:get_Lease ()() ip:
(nil)
. . . LEAVE: System.Runtime.Remoting.ServerIdentity:get_Lease
()[System.Runtime.Remoting.Lifetime.Lease:0x25be40]
. . . ENTER: System.Runtime.Remoting.ServerIdentity:get_Lease ()() ip:
(nil)
. . . LEAVE: System.Runtime.Remoting.ServerIdentity:get_Lease
()[System.Runtime.Remoting.Lifetime.Lease:0x25be40]

==================================== client.cs
===================================
using System;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Tcp;
using CommonLib;

namespace InfoDisplayClient
{
        class Client 
        {
                static void Main () 
                {
                        //TcpChannel ch = new TcpChannel(0);
                        //ChannelServices.RegisterChannel (ch);
                        string serverIP = &quot;127.0.0.1&quot;;
                        if
(System.Environment.GetCommandLineArgs().Length==2)
                                serverIP
=System.Environment.GetCommandLineArgs()[1];
                        Console.WriteLine(&quot;Getting an InfoDisplay
instance from &quot;+serverIP+&quot;:9000/test.rem&quot;);
                        try
                        {
                                object remOb = 
 
Activator.GetObject(typeof(InfoDisplay),&quot;<A HREF="tcp://&quot;+serverIP+&quot;:9000/test.re">tcp://&quot;+serverIP+&quot;:9000/test.re</A>
m&quot;);
                                if (remOb==null)
                                        Console.WriteLine(&quot;remOb=null&quot;);
                                else
                                {
                                        Console.WriteLine(&quot;got an
instance, calling Show&quot;);
                                        InfoDisplay display =
(InfoDisplay)remOb;
                                        display.Show(10);
                                }
                        }
                        catch (Exception e)
                        {
                                Console.WriteLine(&quot;Exception occured:
&quot;+e.ToString());
                        }
                }
        }
}
===================================== server.cs
===================================
using System;
using System.Net;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Tcp;
using CommonLib;


namespace InfoDisplayServer
{
        class App
        {
                [STAThread]
                static void Main(string[] args)
                {
/*
                        IPHostEntry he = Dns.GetHostByName(&quot;localhost&quot;);
                        Console.WriteLine(&quot;{0}&quot;,he);
                        string[] aliases = he.Aliases;
                        IPAddress[] adresses = he.AddressList;
                        for (int i=0; i&lt;adresses.Length; i++)
                                Console.WriteLine(&quot;Alias {0} ==
{1}&quot;,aliases[i],adresses[i]);
*/
                        try
                        {
                                InfoDisplay infoDisplay = new
InfoDisplay();
                                // infoDisplay.Show(65);

                                Console.WriteLine(&quot;creating channel at
port 9000&quot;);
                                TcpChannel ch = new TcpChannel(9000);

                                Console.WriteLine(&quot;registering
channel&quot;);
                                ChannelServices.RegisterChannel (ch);

                                Console.WriteLine(&quot;Starting Server&quot;);
 
RemotingServices.Marshal(infoDisplay,&quot;test.rem&quot;);

                                Console.WriteLine(&quot;Server serving at
port 9000...&quot;);
                                Console.ReadLine();

                                ch.StopListening (null);
                        }
                        catch (Exception e)
                        {
                                System.Console.WriteLine(e.ToString());
                        }
                }
        }
}
================================== CommonLib.cs
==================================
using System;
using System.IO;

namespace CommonLib
{
        public class InfoDisplay : MarshalByRefObject
        {
                public void Show(byte bitsToSet)
                {
                        Console.WriteLine(&quot;InfoDisplay.Show was
called&quot;);
                        this.toDevice(bitsToSet);
                }
                protected void toDevice(byte bitsToSet)
                {
                        Console.WriteLine(&quot;toDevice called&quot;);

                        throw new System.Exception(&quot;Hello World!&quot;);
                }
        }
}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018612.html">FW: [Mono-dev] new test framework works on dotnet
</A></li>
	<LI>Next message: <A HREF="018626.html">AW: [Mono-dev] Mono remoting on an embedded arm system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18608">[ date ]</a>
              <a href="thread.html#18608">[ thread ]</a>
              <a href="subject.html#18608">[ subject ]</a>
              <a href="author.html#18608">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
