<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] 400 bad request when forwarding to xsp
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20400%20bad%20request%20when%20forwarding%20to%20xsp&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018483.html">
   <LINK REL="Next"  HREF="018502.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] 400 bad request when forwarding to xsp</H1>
    <B>Carlos Solorzano</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20400%20bad%20request%20when%20forwarding%20to%20xsp&In-Reply-To="
       TITLE="[Mono-dev] 400 bad request when forwarding to xsp">carlos at applianz.com
       </A><BR>
    <I>Sat May  6 04:48:21 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018483.html">[Mono-dev] Re: AppDomain from unmanaged code and handle_thunk
</A></li>
        <LI>Next message: <A HREF="018502.html">[Mono-dev] Patch for FileStream.cs (correct exception message)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18484">[ date ]</a>
              <a href="thread.html#18484">[ thread ]</a>
              <a href="subject.html#18484">[ subject ]</a>
              <a href="author.html#18484">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have XSP running on a machine behind a firewall/router. I have the  
XSP port forwarded.

I have web pages and web services.

When calling from the LAN, webservices work and web pages work, all  
being called with a web browser or .net code.

When calling from the outside world web pages appear to work fine but  
some web services do not work. The web services fail with a 400 bad  
request WebException when calling from .net code and when calling  
from a web browser I just get &quot;Error: ConnectFailure&quot;. This only  
happens if coming from outside the LAN through the port forward.   
Also the web browser only fails to make the webservice call using  
POST as the method, if it uses GET as the method then the webservice  
works just fine.

I have reproduced this on mono/xsp 1.1.10 and 1.1.13, I have yet to  
try it on 1.1.15

The error I get on code is:

Exception: System.Net.WebException
Message: The request failed with HTTP status 400: Bad Request.
Source: System.Web.Services
    at  
System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse 
(SoapClientMessage message, WebResponse response, Stream  
responseStream, Boolean asyncCall)
    at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke 
(String methodName, Object[] parameters)

I tried reading the response stream and got:


Exception: System.Net.WebException
Message: The request was aborted: The connection was closed  
unexpectedly.
Source: System
    at System.Net.ConnectStream.BeginRead(Byte[] buffer, Int32  
offset, Int32 size, AsyncCallback callback, Object state)
    at System.Net.ConnectStream.Read(Byte[] buffer, Int32 offset,  
Int32 size)
    at System.IO.Stream.ReadByte()



Anyone else seen this?

--Carlos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018483.html">[Mono-dev] Re: AppDomain from unmanaged code and handle_thunk
</A></li>
	<LI>Next message: <A HREF="018502.html">[Mono-dev] Patch for FileStream.cs (correct exception message)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18484">[ date ]</a>
              <a href="thread.html#18484">[ thread ]</a>
              <a href="subject.html#18484">[ subject ]</a>
              <a href="author.html#18484">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
