<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Ambiguous matching in method resolution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Ambiguous%20matching%20in%20method%20resolution&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018741.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Ambiguous matching in method resolution</H1>
    <B>pablosantosluac at terra.es</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Ambiguous%20matching%20in%20method%20resolution&In-Reply-To="
       TITLE="[Mono-dev] Ambiguous matching in method resolution">pablosantosluac at terra.es
       </A><BR>
    <I>Wed May 31 17:41:31 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018741.html">[Mono-dev] Ambiguous matching in method resolution
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18742">[ date ]</a>
              <a href="thread.html#18742">[ thread ]</a>
              <a href="subject.html#18742">[ subject ]</a>
              <a href="author.html#18742">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>And more info yet.

The methods that seem to have trouble are the following:

- The server is &quot;publishing&quot; several interfaces under different &quot;service 
names&quot; by remoting.

- There are methods with the same name and different signatures on different 
interfaces.

- These methods are the ones causing trouble (not even overloaded methods on 
the same interface, but methods with the same name on different ones)

We are publishing the objects (typecasting to the interfaces we want to 
export) through the Marshall facility (not RegisterWellKnown...) so we 
control the objects lifetime ourselves...


pablo

----- Original Message ----- 
From: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">pablosantosluac at terra.es</A>&gt;
Cc: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Sent: Wednesday, May 31, 2006 11:03 PM
Subject: Re: [Mono-dev] Ambiguous matching in method resolution


&gt;<i> Well, and the server is not detecting any exception (we have a sink 
</I>&gt;<i> catching all the possible raised exceptions).
</I>&gt;<i>
</I>&gt;<i> So, I don't understand why, but it seems the client side is generating 
</I>&gt;<i> different proxies depending on the server... and when they are both on 
</I>&gt;<i> Linux/mono it fails...
</I>&gt;<i>
</I>&gt;<i> The first problem I detected was solved renaming one method (even that it 
</I>&gt;<i> was not a problem with the server in .NET), but now it seems lots more 
</I>&gt;<i> would need to be renamed... :-(
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----- Original Message ----- 
</I>&gt;<i> From: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">pablosantosluac at terra.es</A>&gt;
</I>&gt;<i> To: &quot;Rafael Teixeira&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monoman at gmail.com</A>&gt;
</I>&gt;<i> Cc: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i> Sent: Wednesday, May 31, 2006 10:55 PM
</I>&gt;<i> Subject: Re: [Mono-dev] Ambiguous matching in method resolution
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Well, I have a little more information now. I located the problem (I was 
</I>&gt;&gt;<i> not correctly handling the stack trace nor the --trace option), and it 
</I>&gt;&gt;<i> seems to have problems with certain methods defined in an interface used 
</I>&gt;&gt;<i> through remoting.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What I don't understand is that the client works correctly on linux 
</I>&gt;&gt;<i> against a windows server (mono - .NET), but fails in the linux - linux 
</I>&gt;&gt;<i> scenario... Lots of remote method calls failing with the ambiguous 
</I>&gt;&gt;<i> matching exception...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ----- Original Message ----- 
</I>&gt;&gt;<i> From: &quot;Rafael Teixeira&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monoman at gmail.com</A>&gt;
</I>&gt;&gt;<i> To: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">pablosantosluac at terra.es</A>&gt;
</I>&gt;&gt;<i> Cc: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;&gt;<i> Sent: Wednesday, May 31, 2006 8:49 PM
</I>&gt;&gt;<i> Subject: Re: [Mono-dev] Ambiguous matching in method resolution
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Pablo and mscorlib hackers,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Strange as that message is only found in the AmbiguousMatchException
</I>&gt;&gt;&gt;<i> default constructor, that is called inside Reflection, and inside
</I>&gt;&gt;&gt;<i> MonoType (an internal class) inside corlib.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> So that exception would be normally thrown out, and generate a stack
</I>&gt;&gt;&gt;<i> trace. Unless the MonoType GetConstructorImpl method (probable
</I>&gt;&gt;&gt;<i> culprit) is being called from unmanaged code, that doesn't properly
</I>&gt;&gt;&gt;<i> handle exceptions (or can't in that particular situation).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It looks like there's a logic error in that method. If you are asking
</I>&gt;&gt;&gt;<i> for a parameterless constructor (by passing a null for the 'types'
</I>&gt;&gt;&gt;<i> array parameter), if it counts more than one constructor, REGARDLESS
</I>&gt;&gt;&gt;<i> OF THE NUMBER OF PARAMETERS EACH CONSTRUCTOR EXPECT, that matches the
</I>&gt;&gt;&gt;<i> bindingflags, it will throw that exception.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I think that it should first make sure it counts only methods that
</I>&gt;&gt;&gt;<i> expect the same number and type of parameters, before entering that
</I>&gt;&gt;&gt;<i> if.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Some mscorlib hacker please take a look at that.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Pablo,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Probably you have more than one constructor with the same visibility
</I>&gt;&gt;&gt;<i> as the parameterless constructor in some of your classes, to cause
</I>&gt;&gt;&gt;<i> that exception, but as I think that is a common pattern, probably it
</I>&gt;&gt;&gt;<i> is combined with some other factors I can't guess without a
</I>&gt;&gt;&gt;<i> stacktrace, :(
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hope it helps,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 5/31/06, <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">pablosantosluac at terra.es</A> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">pablosantosluac at terra.es</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I have an application that is correctly running with .NET, but as soon 
</I>&gt;&gt;&gt;&gt;<i> as I
</I>&gt;&gt;&gt;&gt;<i> run it with mono (1.1.15) on Linux I get the following message:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Error: Ambiguous matching in method resolution.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I tried to recompile with mono on Linux with debug info, but I can't 
</I>&gt;&gt;&gt;&gt;<i> get any
</I>&gt;&gt;&gt;&gt;<i> more information, neither with --trace.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> What can I do to locate the problem?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -- 
</I>&gt;&gt;&gt;<i> Rafael &quot;Monoman&quot; Teixeira
</I>&gt;&gt;&gt;<i> ---------------------------------------
</I>&gt;&gt;&gt;<i> As I'm currently working a lot with Java and even fixing Java VMs
</I>&gt;&gt;&gt;<i> (JamVM/Kaffe) and GNU Classpath code, I think I may partly borrow the
</I>&gt;&gt;&gt;<i> title (Javaman) from my friend Bruno Souza and become the
</I>&gt;&gt;&gt;<i> MonoNJavaMan. Yeah, I may currently be crazier than usual...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018741.html">[Mono-dev] Ambiguous matching in method resolution
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18742">[ date ]</a>
              <a href="thread.html#18742">[ thread ]</a>
              <a href="subject.html#18742">[ subject ]</a>
              <a href="author.html#18742">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
