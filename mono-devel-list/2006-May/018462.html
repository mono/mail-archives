<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] framework for system.web tests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20framework%20for%20system.web%20tests&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018523.html">
   <LINK REL="Next"  HREF="018467.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] framework for system.web tests</H1>
    <B>Andrew Skiba</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20framework%20for%20system.web%20tests&In-Reply-To="
       TITLE="[Mono-dev] framework for system.web tests">andrews at mainsoft.com
       </A><BR>
    <I>Thu May  4 05:31:01 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018523.html">[Mono-dev] Re: Please Help : Leak of wapi handles
</A></li>
        <LI>Next message: <A HREF="018467.html">[Mono-dev] framework for system.web tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18462">[ date ]</a>
              <a href="thread.html#18462">[ thread ]</a>
              <a href="subject.html#18462">[ subject ]</a>
              <a href="author.html#18462">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello.

I created a simple framework that might help in creating unit tests for
system.web, and want to contribute it. When we tryed to write test for
SiteMapPath.Render, we saw that it needs many things from HttpContext.
Now it's possible to create a method that will run in a web context,
looking like:

	public static void TestMapSitePath (HttpContext context, object
param)
	{
		Control c = new System.Web.UI.WebControls.MapSitePath
();
		c.Page = new Page ();
		using (HtmlTextWriter htw = new HtmlTextWriter
(context.Response.Output)) {
			c.RenderControl (htw);
		}
	}

and to call it like this:

	string res = NunitWeb.Helper.Run (TestMapSitePath, null));

the result can be used in a regular nunit assert:

	Assert.AreEqual (@&quot;&lt;span&gt;&lt;a href=&quot;&quot;#_SkipLink&quot;&quot;&gt;&lt;img alt=&quot;&quot;Skip
Navigation Links&quot;&quot; height=&quot;&quot;0&quot;&quot; width=&quot;&quot;0&quot;&quot;
src=&quot;&quot;/NunitWeb/WebResource.axd?d=HkJ8fQo6w7kxQaySxHq4Lg2&amp;amp;t=63279744
5633148088&quot;&quot; style=&quot;&quot;border-width:0px;&quot;&quot; /&gt;&lt;/a&gt;&lt;a
id=&quot;&quot;_SkipLink&quot;&quot;&gt;&lt;/a&gt;&lt;/span&gt;&quot;, res);

This framework works good on dotnet, but unfortunately, on mono there is
bug with web.config. I reproduced it, and reported here:
<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=78256.">http://bugzilla.ximian.com/show_bug.cgi?id=78256.</A> When it's fixed I hope
we will be able to use this framework on mono, too.

Is it OK to commmit this framework to sys.web/Tests ?

Regards,
Andrew.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: NunitWeb.csproj
Type: application/octet-stream
Size: 3769 bytes
Desc: NunitWeb.csproj
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060504/eb87485d/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060504/eb87485d/attachment.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Web.config
Type: application/octet-stream
Size: 338 bytes
Desc: Web.config
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060504/eb87485d/attachment-0001.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060504/eb87485d/attachment-0001.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Helper.cs
Type: application/octet-stream
Size: 2309 bytes
Desc: Helper.cs
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060504/eb87485d/attachment-0002.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060504/eb87485d/attachment-0002.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MyHandler.cs
Type: application/octet-stream
Size: 621 bytes
Desc: MyHandler.cs
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060504/eb87485d/attachment-0003.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060504/eb87485d/attachment-0003.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MyHost.cs
Type: application/octet-stream
Size: 1667 bytes
Desc: MyHost.cs
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060504/eb87485d/attachment-0004.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060504/eb87485d/attachment-0004.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018523.html">[Mono-dev] Re: Please Help : Leak of wapi handles
</A></li>
	<LI>Next message: <A HREF="018467.html">[Mono-dev] framework for system.web tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18462">[ date ]</a>
              <a href="thread.html#18462">[ thread ]</a>
              <a href="subject.html#18462">[ subject ]</a>
              <a href="author.html#18462">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
