<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] JaCIL Project
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20JaCIL%20Project&In-Reply-To=44717176.9080409%40evain.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018642.html">
   <LINK REL="Next"  HREF="018645.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] JaCIL Project</H1>
    <B>Eyal Alaluf</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20JaCIL%20Project&In-Reply-To=44717176.9080409%40evain.net"
       TITLE="[Mono-dev] JaCIL Project">eyala at mainsoft.com
       </A><BR>
    <I>Mon May 22 05:04:28 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018642.html">[Mono-dev] JaCIL Project
</A></li>
        <LI>Next message: <A HREF="018645.html">[Mono-dev] JaCIL Project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18643">[ date ]</a>
              <a href="thread.html#18643">[ thread ]</a>
              <a href="subject.html#18643">[ subject ]</a>
              <a href="author.html#18643">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are now in the middle of a rewrite and in this rewrite we are using Cecil and ASM
(via IKVM). The version of the converter in the product was written in C++.

On Mon, 22 May 2006, Jb Evain wrote:

&gt;<i> Date: Mon, 22 May 2006 10:08:22 +0200
</I>&gt;<i> From: Jb Evain &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono at evain.net</A>&gt;
</I>&gt;<i> To: Eyal Alaluf &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">eyala at mainsoft.com</A>&gt;
</I>&gt;<i> Cc: Zac Bowling &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">zac at zacbowling.com</A>&gt;,
</I>&gt;<i>     Andreas Nahr &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ClassDevelopment at a-softtech.com</A>&gt;,
</I>&gt;<i>     Mono Developers &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i> Subject: Re: [Mono-dev] JaCIL Project
</I>&gt;<i> 
</I>&gt;<i> Hi Eyal,
</I>&gt;<i>
</I>&gt;<i> Are you guys still using Cecil to read the CIL code?
</I>&gt;<i>
</I>&gt;<i> Jb
</I>&gt;<i>
</I>&gt;<i> Eyal Alaluf wrote:
</I>&gt;&gt;<i> Hi, all.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Just regarding feasibility and practicality - there is already a product 
</I>&gt;&gt;<i> implementing
</I>&gt;&gt;<i> this idea.
</I>&gt;&gt;<i> Not coincidently, the product is implemented by my company (Mainsoft) and 
</I>&gt;&gt;<i> is called
</I>&gt;&gt;<i> Grasshopper. You can access our DevZone at &lt;<A HREF="http://dev.mainsoft.com">http://dev.mainsoft.com</A>&gt;
</I>&gt;&gt;<i> As the guy who already implemented the conversion from .Net byte code to 
</I>&gt;&gt;<i> JBC, I
</I>&gt;&gt;<i> can tell you that all the managed opcodes of .Net are implemented in our 
</I>&gt;&gt;<i> converter.
</I>&gt;&gt;<i> The product implements .Net 1.1 and We are currently working on .Net 2.0 
</I>&gt;&gt;<i> (i.e. Generics).
</I>&gt;&gt;<i> As for performance, it's not a slam dunk but we managed to get comparable 
</I>&gt;&gt;<i> performance
</I>&gt;&gt;<i> with .Net on large customer projects (ISV ASP.Net projects of &gt; 100K 
</I>&gt;&gt;<i> lines).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Eyal.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Sun, 21 May 2006, Zac Bowling wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Date: Sun, 21 May 2006 20:03:03 -0500
</I>&gt;&gt;&gt;<i> From: Zac Bowling &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">zac at zacbowling.com</A>&gt;
</I>&gt;&gt;&gt;<i> To: Almann T. Goo &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">almann.goo at gmail.com</A>&gt;
</I>&gt;&gt;&gt;<i> Cc: Andreas Nahr &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ClassDevelopment at a-softtech.com</A>&gt;,
</I>&gt;&gt;&gt;<i>     Mono Developers &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;&gt;&gt;<i> Subject: Re: [Mono-dev] JaCIL Project
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> This might be off the radar but what about translating internal members 
</I>&gt;&gt;&gt;<i> and attribute data?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> ----
</I>&gt;&gt;&gt;<i> Zac Bowling &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">zac at zacbowling.com</A>&gt;
</I>&gt;&gt;&gt;<i> <A HREF="http://www.zacbowling.com/">http://www.zacbowling.com/</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Almann T. Goo wrote:
</I>&gt;&gt;&gt;&gt;<i> On 5/21/06, *Andreas Nahr* &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ClassDevelopment at a-softtech.com</A> 
</I>&gt;&gt;&gt;&gt;<i> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ClassDevelopment at a-softtech.com</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i>     The hard part is likely that CIL has lots of construcs that Java
</I>&gt;&gt;&gt;&gt;<i>     bytecode does not have. Just to name a few common/important ones:
</I>&gt;&gt;&gt;&gt;<i>     Generics, Pointers and Pointer arithmetic, unchecked exceptions,
</I>&gt;&gt;&gt;&gt;<i>     events, delegates, ...
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Just a note, from the JVM point of view, all exceptions are unchecked. 
</I>&gt;&gt;&gt;&gt;<i> The JVM &quot;has&quot; checked exceptions in the same way that it &quot;has&quot; 
</I>&gt;&gt;&gt;&gt;<i> generics; they are represented as meta-data in the class file but 
</I>&gt;&gt;&gt;&gt;<i> actually are not used by the JVM itself.  It is only the compiler that 
</I>&gt;&gt;&gt;&gt;<i> deals with this. And a lot of exceptions in the Java are unchecked, 
</I>&gt;&gt;&gt;&gt;<i> the whole &quot;Error&quot; and &quot;RuntimeException&quot; hierarchy for instance.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i>     How are you planning to solve that problem?
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> The simple answer is that I'm not--at least not right now.  I am 
</I>&gt;&gt;&gt;&gt;<i> trying to keep the scope maintainable and as such have explicitly laid 
</I>&gt;&gt;&gt;&gt;<i> out what minimal set of CLI features that I am supporting in my 
</I>&gt;&gt;&gt;&gt;<i> project proposal. Now, despite bowing out of implementing such 
</I>&gt;&gt;&gt;&gt;<i> features right now, I have given such things considerable thought and 
</I>&gt;&gt;&gt;&gt;<i> I have no doubt that most of them can be implemented--it is the cost 
</I>&gt;&gt;&gt;&gt;<i> of implementation that is probably the big question.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Let me address you question a little more specifically, it is a good 
</I>&gt;&gt;&gt;&gt;<i> one.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i>     * Generics will be tough, I hate to cop out and type erase like
</I>&gt;&gt;&gt;&gt;<i>       Java does, but that could be one implementation option.
</I>&gt;&gt;&gt;&gt;<i>     * Regarding un-managed pointers, there are ways you can emulate
</I>&gt;&gt;&gt;&gt;<i>       this, but because of the JVM programming model, it will come at
</I>&gt;&gt;&gt;&gt;<i>       a cost.
</I>&gt;&gt;&gt;&gt;<i>           o Others have dealt with this by doing things like paging
</I>&gt;&gt;&gt;&gt;<i>             with arrays--NestedVM (IVME '04), does this for the memory
</I>&gt;&gt;&gt;&gt;<i>             model of a MIPS R2000 ISA which it emulates.
</I>&gt;&gt;&gt;&gt;<i>           o This is not in my radar yet, because I think it would be a
</I>&gt;&gt;&gt;&gt;<i>             huge win just to support the verifiable subset of CIL. 
</I>&gt;&gt;&gt;&gt;<i> Un-managed pointers are not in this subset.
</I>&gt;&gt;&gt;&gt;<i>     * Regarding managed pointers, I will likely employ a boxing
</I>&gt;&gt;&gt;&gt;<i>       technique to do this.  Managed method pointers could be handled
</I>&gt;&gt;&gt;&gt;<i>       by using reflection.
</I>&gt;&gt;&gt;&gt;<i>           o These will of course take a performance hit (especially if
</I>&gt;&gt;&gt;&gt;<i>             reflection is involved), but at least we can have it.
</I>&gt;&gt;&gt;&gt;<i>     * Delegates are classes with methods from the programming model
</I>&gt;&gt;&gt;&gt;<i>       point of view  (there are CLI rules with regard to what can be
</I>&gt;&gt;&gt;&gt;<i>       in a delegate's definition, however).
</I>&gt;&gt;&gt;&gt;<i>           o With regard to the run-time provided method
</I>&gt;&gt;&gt;&gt;<i>             implementations in a delegate, one approach could be to
</I>&gt;&gt;&gt;&gt;<i>             actually emit the implementation of the delegate methods.
</I>&gt;&gt;&gt;&gt;<i>     * Events and properties are really just meta-data &quot;sugar&quot;, there
</I>&gt;&gt;&gt;&gt;<i>       are no CIL instructions associated with them specifically and
</I>&gt;&gt;&gt;&gt;<i>       they look like methods in the programming model.
</I>&gt;&gt;&gt;&gt;<i>     * Although you didn't list these, here are a couple of other 
</I>&gt;&gt;&gt;&gt;<i> items.
</I>&gt;&gt;&gt;&gt;<i>           o I am actually very concerned with &quot;newslot&quot; methods,
</I>&gt;&gt;&gt;&gt;<i>             non-virtual instance method calls, and explicit interface
</I>&gt;&gt;&gt;&gt;<i>             method definition for near term future work.  This will
</I>&gt;&gt;&gt;&gt;<i>             undoubtedly be a pain to implement; there is a lot of
</I>&gt;&gt;&gt;&gt;<i>             opportunity to make really inefficient implementations.
</I>&gt;&gt;&gt;&gt;<i>           o Tail calls will be another really tough thing to implement
</I>&gt;&gt;&gt;&gt;<i>             since the JVM programming model does not have native
</I>&gt;&gt;&gt;&gt;<i>             support for tail recursive calls.  This is probably not a
</I>&gt;&gt;&gt;&gt;<i>             highly used CLI feature anyhow (Unless you are a Scheme
</I>&gt;&gt;&gt;&gt;<i>             compiler), so it is not really on my radar at the moment
</I>&gt;&gt;&gt;&gt;<i>             because there are much larger fish to fry before I wrestle
</I>&gt;&gt;&gt;&gt;<i>             with that.  A lot of literature on the subject--some kind
</I>&gt;&gt;&gt;&gt;<i>             of trampolining implementation may be a way to support 
</I>&gt;&gt;&gt;&gt;<i> this.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Here is a link to my proposal--it more clearly defines the scope for 
</I>&gt;&gt;&gt;&gt;<i> the first phase of this project.
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://www.cs.rit.edu/~atg2335/project/proposal.pdf">http://www.cs.rit.edu/~atg2335/project/proposal.pdf</A> 
</I>&gt;&gt;&gt;&gt;<i> &lt;<A HREF="http://www.cs.rit.edu/%7Eatg2335/project/proposal.pdf">http://www.cs.rit.edu/%7Eatg2335/project/proposal.pdf</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> I hate labeling a lot of these items as &quot;future work&quot;, but we have to 
</I>&gt;&gt;&gt;&gt;<i> start somewhere manageable.  Note that future work is not the same 
</I>&gt;&gt;&gt;&gt;<i> thing as &quot;never planning on implementing&quot;, so any insight on these 
</I>&gt;&gt;&gt;&gt;<i> issues are always appreciated.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;&gt;<i> Almann
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> -- 
</I>&gt;&gt;&gt;&gt;<i> Almann T. Goo
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">almann.goo at gmail.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">almann.goo at gmail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> ------------------------------------------------------------------------
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018642.html">[Mono-dev] JaCIL Project
</A></li>
	<LI>Next message: <A HREF="018645.html">[Mono-dev] JaCIL Project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18643">[ date ]</a>
              <a href="thread.html#18643">[ thread ]</a>
              <a href="subject.html#18643">[ subject ]</a>
              <a href="author.html#18643">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
