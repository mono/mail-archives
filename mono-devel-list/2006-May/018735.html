<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [patch] System.Web.HttpApplication.InitOnce
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5Bpatch%5D%20System.Web.HttpApplication.InitOnce&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018734.html">
   <LINK REL="Next"  HREF="018736.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [patch] System.Web.HttpApplication.InitOnce</H1>
    <B>Andrew Skiba</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5Bpatch%5D%20System.Web.HttpApplication.InitOnce&In-Reply-To="
       TITLE="[Mono-dev] [patch] System.Web.HttpApplication.InitOnce">andrews at mainsoft.com
       </A><BR>
    <I>Wed May 31 11:13:32 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018734.html">[Mono-dev] [PATCH] System.Data API signature fixes
</A></li>
        <LI>Next message: <A HREF="018736.html">[Mono-dev] Newlines and startup scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18735">[ date ]</a>
              <a href="thread.html#18735">[ thread ]</a>
              <a href="subject.html#18735">[ subject ]</a>
              <a href="author.html#18735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

While running in custom web hosting of NunitWeb I got a
NullReferenceException from TemplateParser.cs:118. The problem is that
HttpContext.Current is null. It's hard to reproduce in a small
standalone test, though. So I attach the stacktrace of my exception
together with the patch that fixes it. The fix changes the flow only
when HttpContext.Current is null, but probably it should set it always,
what do you guys think?

Also I found an interesting blog entry on the of HttpContext.Current
handling on dotnet:
<A HREF="http://piers7.blogspot.com/2005/11/threadstatic-callcontext-and_02.html">http://piers7.blogspot.com/2005/11/threadstatic-callcontext-and_02.html</A>

Any idea about how to create a testcase for the flow like in my
stacktrace will be appretiated.

If no one objects, I will commit.

Andrew.
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: stacktrace.txt
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060531/b12a89b4/attachment.txt">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060531/b12a89b4/attachment.txt</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: HttpApplication.patch
Type: application/octet-stream
Size: 599 bytes
Desc: HttpApplication.patch
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060531/b12a89b4/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060531/b12a89b4/attachment.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018734.html">[Mono-dev] [PATCH] System.Data API signature fixes
</A></li>
	<LI>Next message: <A HREF="018736.html">[Mono-dev] Newlines and startup scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18735">[ date ]</a>
              <a href="thread.html#18735">[ thread ]</a>
              <a href="subject.html#18735">[ subject ]</a>
              <a href="author.html#18735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
