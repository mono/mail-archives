<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] minimal mono embedding profile - hpc twist
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20minimal%20mono%20embedding%20profile%20-%20hpc%20twist&In-Reply-To=%3C2643C62F-2F96-484A-8DFE-3DB2D39CCB31%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039651.html">
   <LINK REL="Next"  HREF="039654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] minimal mono embedding profile - hpc twist</H1>
    <B>Jonathan Shore</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20minimal%20mono%20embedding%20profile%20-%20hpc%20twist&In-Reply-To=%3C2643C62F-2F96-484A-8DFE-3DB2D39CCB31%40gmail.com%3E"
       TITLE="[Mono-dev] minimal mono embedding profile - hpc twist">jonathan.shore at gmail.com
       </A><BR>
    <I>Wed Oct  3 19:41:33 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039651.html">[Mono-dev] minimal mono embedding profile - hpc twist
</A></li>
        <LI>Next message: <A HREF="039654.html">[Mono-dev] minimal mono embedding profile - hpc twist
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39653">[ date ]</a>
              <a href="thread.html#39653">[ thread ]</a>
              <a href="subject.html#39653">[ subject ]</a>
              <a href="author.html#39653">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Oct 3, 2012, at 2:57 PM, Rodrigo Kumpera wrote:

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Wed, Oct 3, 2012 at 1:59 PM, sebastian &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastian at palladiumconsulting.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Finally, we may want to tweak the parameters sent to the LLVM compiler to optimize for runtime speed, even at the cost of very slow compilation.
</I>&gt;<i> 
</I>&gt;<i> Tweaking llvm parameters require changing mono's source code and pretty much voids any guarantees that the resulting code will work.
</I>&gt;<i> A lot of LLVM optimizations for some reasons produce bad code when used with mono. Zoltan can better explain this, I guess.
</I>
I am very interested in this topic as well.   Squeezing the most performance I can for numerical work is important for my application. 

Sebastian, I am not sure what sorts of algorithms you are running, but there are a number of flags one can use, such as -O=unsafe and inlining directives that get mono --llvm very close to GCC compiled C / C++ code for numerical algorithms.   I've found that with careful structuring get within 5-10% of C speed.

However, Mono (and the MS VM, I believe) are not all that aggressive with inlining.   Many of the situations that would like to inline are somewhat complex to detect / guard.   Mono (and I believe the MS .NET runtime) will not attempt to inline calls in various settings, such as if is virtual.   There would have to be conditional code generated for the situations where a call would need to be virtual and where it could be known to be a concrete terminal type.  

A more general question to the Mono team, does the mono-llvm fork pull in new functionality from the LLVM project from time to time?  Should we expect to be able to take advantage of the new optimisations (for example the deeper vectorization work in progress) when they become available?    I recall that there were a number of deficiencies with the LLVM that required a lot of scaffolding in order to interoperate with the mono runtime.   Curious whether the LLVM foks have thought to address these so that could make more direct use of core LLVM in the future?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20121003/eca327ed/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20121003/eca327ed/attachment-0001.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039651.html">[Mono-dev] minimal mono embedding profile - hpc twist
</A></li>
	<LI>Next message: <A HREF="039654.html">[Mono-dev] minimal mono embedding profile - hpc twist
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39653">[ date ]</a>
              <a href="thread.html#39653">[ thread ]</a>
              <a href="subject.html#39653">[ subject ]</a>
              <a href="author.html#39653">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
