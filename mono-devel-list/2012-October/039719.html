<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] ASP.NET Web API on Mono 3.0 (Could not load type	'System.Web.Http.WebHost.HttpControllerHandler')
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20ASP.NET%20Web%20API%20on%20Mono%203.0%20%28Could%20not%20load%20type%0A%09%27System.Web.Http.WebHost.HttpControllerHandler%27%29&In-Reply-To=%3CCA%2B1gSViZfLx6fAP__LZ52KfgjouNWvzb53DGZ_eN4sUPmU%2BmRA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039717.html">
   <LINK REL="Next"  HREF="039720.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] ASP.NET Web API on Mono 3.0 (Could not load type	'System.Web.Http.WebHost.HttpControllerHandler')</H1>
    <B>Rafael Teixeira</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20ASP.NET%20Web%20API%20on%20Mono%203.0%20%28Could%20not%20load%20type%0A%09%27System.Web.Http.WebHost.HttpControllerHandler%27%29&In-Reply-To=%3CCA%2B1gSViZfLx6fAP__LZ52KfgjouNWvzb53DGZ_eN4sUPmU%2BmRA%40mail.gmail.com%3E"
       TITLE="[Mono-dev] ASP.NET Web API on Mono 3.0 (Could not load type	'System.Web.Http.WebHost.HttpControllerHandler')">monoman at gmail.com
       </A><BR>
    <I>Wed Oct 24 11:35:35 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039717.html">[Mono-dev] ASP.NET Web API on Mono 3.0 (Could not load type	'System.Web.Http.WebHost.HttpControllerHandler')
</A></li>
        <LI>Next message: <A HREF="039720.html">[Mono-dev] ASP.NET Web API on Mono 3.0 (Could not load type	'System.Web.Http.WebHost.HttpControllerHandler')
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39719">[ date ]</a>
              <a href="thread.html#39719">[ thread ]</a>
              <a href="subject.html#39719">[ subject ]</a>
              <a href="author.html#39719">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Daniel,

Well at
<A HREF="https://github.com/mono/mono/blob/master/mcs/class/System.Net.Http/System.Net.Http/HttpMessageInvoker.cs">https://github.com/mono/mono/blob/master/mcs/class/System.Net.Http/System.Net.Http/HttpMessageInvoker.cs</A>
one
can see that such class is part of Mono and stable for at least 5 months,
so it surely should be found in Mono 3.0 but from your log it seems that
your server is loading a copy found on your bin directory, that may be
outdated...

*Mono: Assembly Loader probing location:
'/var/www/WebApiTest/bin/System.Net.Http.dll'.
Mono: Assembly Loader shadow-copied assembly to:
'/tmp/root-temp-aspnet-0/2956977a/assembly/shadow/ebec392e/785c7991_93b040bf_00000001/System.Net.Http.dll'.
*
So please get rid of your copy of System.Net.Http.dll, and it should work.

In the other hand surely IHostBufferPolicySelector is missing from
<A HREF="https://github.com/mono/mono/blob/master/mcs/class/System.Web.Http/System.Web.Http.dll.sources.">https://github.com/mono/mono/blob/master/mcs/class/System.Web.Http/System.Web.Http.dll.sources.</A>
Maybe this is newer than the open sourced files from Microsoft being used
in that part of Mono.

Please open an issue for this second problem, probably the aspnetstack
needs to be refreshed, although this may appear only in the 4.5 profile,
I'm not sure what are the .NET platform requirements for ASP.NET Web API.

Fun,

Rafael &quot;Monoman&quot; Teixeira
---------------------------------------
&quot;The most exciting phrase to hear in science, the one that heralds new
discoveries, is not 'Eureka!' (I found it!) but 'That's funny ...'&quot;
Isaac Asimov
US science fiction novelist &amp; scholar (1920 - 1992)


On Wed, Oct 24, 2012 at 2:03 AM, Daniel Lo Nigro &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lists at dan.cx</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Just rediscovered the MONO_LOG_LEVEL=&quot;debug&quot; environment variable. Here's
</I>the log from my app: <A HREF="http://sprunge.us/eXOV.">http://sprunge.us/eXOV.</A> I think these might be
related, but of course I could be totally wrong:
&gt;<i> Mono: The class System.Web.Http.Hosting.IHostBufferPolicySelector could
</I>not be loaded, used in System.Web.Http, Version=4.0.0.0, Culture=neutral,
PublicKeyToken=31bf3856ad364e35
&gt;<i> Mono: The class System.Net.Http.HttpMessageInvoker could not be loaded,
</I>used in System.Net.Http, Version=2.0.0.0, Culture=neutral,
PublicKeyToken=b03f5f7f11d50a3a
&gt;<i>
</I>&gt;<i> Thoughts?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Oct 24, 2012 at 2:23 PM, Daniel Lo Nigro &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lists at dan.cx</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm trying to get ASP.NET WebApi working on Mono 3.0, and am getting
</I>&gt;&gt;<i> the following error:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> System.TypeLoadException: Could not load type
</I>&gt;&gt;<i> 'System.Web.Http.WebHost.HttpControllerHandler' from assembly
</I>&gt;&gt;<i> 'System.Web.Http.WebHost, Version=4.0.0.0, Culture=neutral,
</I>&gt;&gt;<i> PublicKeyToken=31bf3856ad364e35'.
</I>&gt;&gt;<i>   at (wrapper managed-to-native) System.Type:type_is_assignable_from
</I>&gt;&gt;<i> (System.Type,System.Type)
</I>&gt;&gt;<i>   at System.Type.IsAssignableFrom (System.Type c) [0x00096] in
</I>&gt;&gt;<i> /usr/local/src/mono-3.0.0/mcs/class/corlib/System/Type.cs:902
</I>&gt;&gt;<i>   at System.Web.Mvc.AreaRegistration.IsAreaRegistrationType
</I>&gt;&gt;<i> (System.Type type) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;<i>   at
</I>System.Web.Mvc.TypeCacheUtil+&lt;&gt;c__DisplayClass1.&lt;FilterTypesInAssemblies&gt;b__0
&gt;&gt;<i> (System.Type type) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;<i>   at
</I>System.Linq.Enumerable+&lt;CreateWhereIterator&gt;c__Iterator35`1[System.Type].MoveNext
&gt;&gt;<i> () [0x00059] in
</I>&gt;&gt;<i>
</I>/usr/local/src/mono-3.0.0/mcs/class/System.Core/System.Linq/Enumerable.cs:3030
&gt;&gt;<i>   at System.Collections.Generic.List`1[System.Type].AddEnumerable
</I>&gt;&gt;<i> (IEnumerable`1 enumerable) [0x00013] in
</I>&gt;&gt;<i>
</I>/usr/local/src/mono-3.0.0/mcs/class/corlib/System.Collections.Generic/List.cs:134
&gt;&gt;<i>   at System.Collections.Generic.List`1[System.Type]..ctor
</I>&gt;&gt;<i> (IEnumerable`1 collection) [0x0002f] in
</I>&gt;&gt;<i>
</I>/usr/local/src/mono-3.0.0/mcs/class/corlib/System.Collections.Generic/List.cs:69
&gt;&gt;<i>   at System.Linq.Enumerable.ToList[Type] (IEnumerable`1 source)
</I>&gt;&gt;<i> [0x00006] in
</I>/usr/local/src/mono-3.0.0/mcs/class/System.Core/System.Linq/Enumerable.cs:2867
&gt;&gt;<i>   at System.Web.Mvc.TypeCacheUtil.GetFilteredTypesFromAssemblies
</I>&gt;&gt;<i> (System.String cacheName, System.Predicate`1 predicate, IBuildManager
</I>&gt;&gt;<i> buildManager) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;<i>   at System.Web.Mvc.AreaRegistration.RegisterAllAreas
</I>&gt;&gt;<i> (System.Web.Routing.RouteCollection routes, IBuildManager
</I>&gt;&gt;<i> buildManager, System.Object state) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;<i>   at System.Web.Mvc.AreaRegistration.RegisterAllAreas (System.Object
</I>&gt;&gt;<i> state) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;<i>   at System.Web.Mvc.AreaRegistration.RegisterAllAreas () [0x00000] in
</I>&gt;&gt;<i> &lt;filename unknown&gt;:0
</I>&gt;&gt;<i>   at Daniel15.WebApiTest.WebApiApplication.Application_Start ()
</I>&gt;&gt;<i> [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;&gt;<i>   at (wrapper managed-to-native)
</I>&gt;&gt;<i> System.Reflection.MonoMethod:InternalInvoke
</I>&gt;&gt;<i> (System.Reflection.MonoMethod,object,object[],System.Exception&amp;)
</I>&gt;&gt;<i>   at System.Reflection.MonoMethod.Invoke (System.Object obj,
</I>&gt;&gt;<i> BindingFlags invokeAttr, System.Reflection.Binder binder,
</I>&gt;&gt;<i> System.Object[] parameters, System.Globalization.CultureInfo culture)
</I>&gt;&gt;<i> [0x000d5] in
</I>/usr/local/src/mono-3.0.0/mcs/class/corlib/System.Reflection/MonoMethod.cs:229
&gt;&gt;<i>
</I>&gt;&gt;<i> Followed by this error:
</I>&gt;&gt;<i> System.TypeLoadException:
</I>&gt;&gt;<i> A type load exception has occurred.
</I>&gt;&gt;<i> Description: HTTP 500.Error processing request.
</I>&gt;&gt;<i> Details: Non-web exception. Exception origin (name of application or
</I>&gt;&gt;<i> object): Daniel15.WebApiTest.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Are there additional debug flags I can use to determine what's causing
</I>&gt;&gt;<i> this and why it's unable to load the type? I'm using Mono 3.0
</I>&gt;&gt;<i> (compiled from source) and xsp/fastcgi-mono-server4 (latest Git
</I>&gt;&gt;<i> version)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks in advance!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20121024/cd1828bc/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20121024/cd1828bc/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039717.html">[Mono-dev] ASP.NET Web API on Mono 3.0 (Could not load type	'System.Web.Http.WebHost.HttpControllerHandler')
</A></li>
	<LI>Next message: <A HREF="039720.html">[Mono-dev] ASP.NET Web API on Mono 3.0 (Could not load type	'System.Web.Http.WebHost.HttpControllerHandler')
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39719">[ date ]</a>
              <a href="thread.html#39719">[ thread ]</a>
              <a href="subject.html#39719">[ subject ]</a>
              <a href="author.html#39719">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
