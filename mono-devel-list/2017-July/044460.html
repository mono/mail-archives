<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono Weather Report 2017-07-13
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20Weather%20Report%202017-07-13&In-Reply-To=%3C9C769E47-6240-4048-BB88-71736F5C6882%40microsoft.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044459.html">
   <LINK REL="Next"  HREF="044461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono Weather Report 2017-07-13</H1>
    <B>Alexander Köplinger</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20Weather%20Report%202017-07-13&In-Reply-To=%3C9C769E47-6240-4048-BB88-71736F5C6882%40microsoft.com%3E"
       TITLE="[Mono-dev] Mono Weather Report 2017-07-13">alkpli at microsoft.com
       </A><BR>
    <I>Thu Jul 13 17:39:42 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044459.html">[Mono-dev] Bundled mono Certificate Store
</A></li>
        <LI>Next message (by thread): <A HREF="044461.html">[Mono-dev] unaligned.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44460">[ date ]</a>
              <a href="thread.html#44460">[ thread ]</a>
              <a href="subject.html#44460">[ subject ]</a>
              <a href="author.html#44460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Joe,

#0: <A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=47053">https://bugzilla.xamarin.com/show_bug.cgi?id=47053</A> was fixed by a PR recently (it's already marked as closed in bugzilla).

#2: was crashing corlib tests due to a new test I added which exposed a memory corruption bug in the Windows implementation of mono_w32file_get_disk_free_space, it was fixed by <A HREF="https://github.com/mono/mono/pull/5196">https://github.com/mono/mono/pull/5196</A> so this shouldn't show up in the next report hopefully :)

- Alex


On 13 Jul 2017, at 19:31, Joe Stroman &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">jostrom at microsoft.com</A>&lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">jostrom at microsoft.com</A>&gt;&gt; wrote:


Salutations, all. Xamarin Release Engineering here with this week’s edition of the Mono Weather Report.



Here are the top failures currently making Jenkins builds unstable:

0. Disabled tests



The following Bugzillas represent tests that have been temporarily disabled because otherwise they are failing every time:



<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=47053">https://bugzilla.xamarin.com/show_bug.cgi?id=47053</A>
<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=47054">https://bugzilla.xamarin.com/show_bug.cgi?id=47054</A>



1. MonoTests.DebuggerTests.Dispose [New]

Occurred 4 times on Linux.


MESSAGE:
                                                  Expected: 3
  But was:  134

TearDown : Mono.Debugger.Soft.VMDisconnectedException : Exception of type 'Mono.Debugger.Soft.VMDisconnectedException' was thrown.
                                                +++++++++++++++++++
                                                STACK TRACE:
                                                  at MonoTests.DebuggerTests.Dispose () [0x00043] in /mnt/jenkins/workspace/test-mono-mainline-linux/label/ubuntu-1404-amd64/mcs/class/Mono.Debugger.Soft/Test/dtest.cs:2339
  at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&amp;)
  at System.Reflection.MonoMethod.Invoke (System.Object obj, System.Reflection.BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00032] in /mnt/jenkins/workspace/test-mono-mainline-linux/label/ubuntu-1404-amd64/mcs/class/corlib/System.Reflection/MonoMethod.cs:305


<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-amd64/2646/testReport/">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-amd64/2646/testReport/</A>
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-i386/2645/testReport/">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-i386/2645/testReport/</A>

2. MonoTests.System.Threading.ThreadApartmentTest.GetStackTraces [New]

Occurred 12 times on Windows. Not much information I can glean from the the logs.


/cygdrive/d/j/workspace/z/label/w32/scripts/ci/babysitter: Saw crash in test case MonoTests.System.Threading.ThreadApartmentTest.GetStackTraces (failure #1 of 0 allowed). Will halt testing.


<A HREF="https://jenkins.mono-project.com/job/z/label=w32/5269/testReport">https://jenkins.mono-project.com/job/z/label=w32/5269/testReport</A>
<A HREF="https://jenkins.mono-project.com/job/z/label=w32/5268/testReport/">https://jenkins.mono-project.com/job/z/label=w32/5268/testReport/</A>

3. MonoTests.System.Net&lt;<A HREF="http://monotests.system.net/">http://monotests.system.net/</A>&gt;.HttpRequestStreamTest.CanRead [New]

Occurred 5 times on Windows.

Stacktrace:


MESSAGE:
                                                System.AggregateException : One or more errors occurred.
  ----&gt; System.Net&lt;<A HREF="http://system.net/">http://system.net/</A>&gt;.Sockets.SocketException : An operation was attempted on something that is not a socket.

                                                +++++++++++++++++++
                                                STACK TRACE:
                                                  at System.Threading.Tasks.Task.ThrowIfExceptional (System.Boolean includeTaskCanceledExceptions) [0x00013] in D:\j\workspace\z\label\w64\mcs\class\referencesource\mscorlib\system\threading\Tasks\Task.cs:2159
  at System.Threading.Tasks.Task.Wait (System.Int32 millisecondsTimeout, System.Threading.CancellationToken cancellationToken) [0x00043] in D:\j\workspace\z\label\w64\mcs\class\referencesource\mscorlib\system\threading\Tasks\Task.cs:3189
  at System.Threading.Tasks.Task.Wait (System.Int32 millisecondsTimeout) [0x00000] in D:\j\workspace\z\label\w64\mcs\class\referencesource\mscorlib\system\threading\Tasks\Task.cs:3130
  at MonoTests.Helpers.SocketResponder.Dispose () [0x0002e] in D:\j\workspace\z\label\w64\mcs\class\test-helpers\SocketResponder.cs:82


<A HREF="https://jenkins.mono-project.com/job/z/label=w64/5267/testReport/">https://jenkins.mono-project.com/job/z/label=w64/5267/testReport/</A>
<A HREF="https://jenkins.mono-project.com/job/z/label=w64/5270/testReport/">https://jenkins.mono-project.com/job/z/label=w64/5270/testReport/</A>



4. Test failure in MonoTests.Microsoft.Build.Execution.BuildSubmissionTest.EndBuildWaitsForSubmissionCompletion [Existing]

Occurred 9 times this week across the Linux Intel lanes.



The stack is a bit different than last time:


MESSAGE:
                                                  #2
  Expected: greater than or equal to 00:00:01
  But was:  00:00:00.9544900

                                                +++++++++++++++++++
                                                STACK TRACE:
                                                  at MonoTests.Microsoft.Build.Execution.BuildSubmissionTest.EndBuildWaitsForSubmissionCompletion () [0x000d8] in /mnt/jenkins/workspace/test-mono-mainline-linux/label/ubuntu-1404-amd64/mcs/class/Microsoft.Build/Test/Microsoft.Build.Execution/BuildSubmissionTest.cs:110
  at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&amp;)
  at System.Reflection.MonoMethod.Invoke (System.Object obj, System.Reflection.BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00032] in /mnt/jenkins/workspace/test-mono-mainline-linux/label/ubuntu-1404-amd64/mcs/class/corlib/System.Reflection/MonoMethod.cs:305



New Examples:
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-amd64/2635/testReport/(root">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-amd64/2635/testReport/(root</A>)/BuildSubmissionTest/EndBuildWaitsForSubmissionCompletion/
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-i386/2646/testReport/(root">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-i386/2646/testReport/(root</A>)/BuildSubmissionTest/EndBuildWaitsForSubmissionCompletion/



Old Examples:
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-i386/2582/testReport/(root">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-i386/2582/testReport/(root</A>)/BuildSubmissionTest/EndBuildWaitsForSubmissionCompletion/
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-i386/2580/testReport/(root">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-i386/2580/testReport/(root</A>)/BuildSubmissionTest/EndBuildWaitsForSubmissionCompletion_2/





5. Unknown failure while running make -w -C acceptance-tests check-ms-test-suite [New]


Occurred 4 times this week exclusively on Mac Intel64.


Stacktrace:

  at &lt;unknown&gt; &lt;0xffffffff&gt;
  at (wrapper managed-to-native) System.Diagnostics.StackTrace.get_trace (System.Exception,int,bool) [0x00009] in &lt;a8bf745e28114234b19230c06c2d30f5&gt;:0
  at System.Diagnostics.StackTrace..ctor (System.Exception,int,bool) [0x0002c] in &lt;a8bf745e28114234b19230c06c2d30f5&gt;:0
  at System.Diagnostics.StackTrace..ctor (System.Exception,bool) [0x00004] in &lt;a8bf745e28114234b19230c06c2d30f5&gt;:0
  at System.Environment.GetStackTrace (System.Exception,bool) [0x0000e] in &lt;a8bf745e28114234b19230c06c2d30f5&gt;:0
  at System.Exception.GetStackTrace (bool) [0x0003a] in &lt;a8bf745e28114234b19230c06c2d30f5&gt;:0
  at System.Exception.ToString (bool,bool) [0x00083] in &lt;a8bf745e28114234b19230c06c2d30f5&gt;:0
  at System.Exception.ToString () [0x00003] in &lt;a8bf745e28114234b19230c06c2d30f5&gt;:0
  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_object__this__ (object,intptr,intptr,intptr) [0x00020] in &lt;a8bf745e28114234b19230c06c2d30f5&gt;:0


<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-amd64/6714/parsed_console/log_content.html#WARNING1">https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-amd64/6714/parsed_console/log_content.html#WARNING1</A>
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-amd64/6703/parsed_console/log_content.html#WARNING1">https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-amd64/6703/parsed_console/log_content.html#WARNING1</A>



6. Regression in MonoTests.System.Threading.WaitHandleTest.WaitAnyWithSecondMutexAbandoned [Existing]



Occurred 2 times this week exclusively on Windows.



   MESSAGE:
                                                System.ApplicationException : Mutex is not owned
                                                +++++++++++++++++++
                                                STACK TRACE:
                                                  at System.Threading.Mutex.ReleaseMutex () [0x00018] in D:\j\workspace\z\label\w64\mcs\class\corlib\System.Threading\Mutex.cs:207
  at (wrapper remoting-invoke-with-check) System.Threading.Mutex:ReleaseMutex ()
  at MonoTests.System.Threading.WaitHandleTest.WaitAnyWithSecondMutexAbandoned () [0x00170] in D:\j\workspace\z\label\w64\mcs\class\corlib\Test\System.Threading\WaitHandleTest.cs:519
  at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&amp;)
  at System.Reflection.MonoMethod.Invoke (System.Object obj, System.Reflection.BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00032] in D:\j\workspace\z\label\w64\mcs\class\corlib\System.Reflection\MonoMethod.cs:305



Examples:
<A HREF="https://jenkins.mono-project.com/job/z/label=w64/5206/testReport/(root">https://jenkins.mono-project.com/job/z/label=w64/5206/testReport/(root</A>)/WaitHandleTest/WaitAnyWithSecondMutexAbandoned/
<A HREF="https://jenkins.mono-project.com/job/z/label=w32/5205/testReport/(root">https://jenkins.mono-project.com/job/z/label=w32/5205/testReport/(root</A>)/WaitHandleTest/WaitAnyWithSecondMutexAbandoned/
<A HREF="https://jenkins.mono-project.com/job/z/label=w32/5206/testReport/(root">https://jenkins.mono-project.com/job/z/label=w32/5206/testReport/(root</A>)/WaitHandleTest/WaitAnyWithSecondMutexAbandoned/





7. Error compiling runtime tests [Existing]



Running `make -w -C mono/tests -j4 tests` on Windows failed 3 times and Mac Intel64 this week:



* Assertion at ..\mono\utils\mono-threads.c:707, condition `info' not met



make[2]: *** [Makefile:1628: exception7.exe] Error 127
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory '/cygdrive/d/j/workspace/z/label/w64/mono/tests'
make[1]: *** [Makefile:1680: compile-tests] Error 2
make[1]: Leaving directory '/cygdrive/d/j/workspace/z/label/w64/mono/tests'



Examples:
<A HREF="https://jenkins.mono-project.com/job/z/label=w64/5203/parsed_console/log_content.html#WARNING1">https://jenkins.mono-project.com/job/z/label=w64/5203/parsed_console/log_content.html#WARNING1</A>
<A HREF="https://jenkins.mono-project.com/job/z/label=w64/5207/parsed_console/log_content.html#WARNING1">https://jenkins.mono-project.com/job/z/label=w64/5207/parsed_console/log_content.html#WARNING1</A>
<A HREF="https://jenkins.mono-project.com/job/z/label=w64/5209/parsed_console/log_content.html#WARNING1">https://jenkins.mono-project.com/job/z/label=w64/5209/parsed_console/log_content.html#WARNING1</A>
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-amd64/6706/parsed_console/log_content.html#WARNING1">https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-amd64/6706/parsed_console/log_content.html#WARNING1</A>



8. MonoTests.System.Net&lt;<A HREF="http://monotests.system.net/">http://monotests.system.net/</A>&gt;.Sockets.SocketTest.SendAsyncFile [Existing]

Filed as <A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=43172">https://bugzilla.xamarin.com/show_bug.cgi?id=43172</A> , currently unassigned.




This has been failing for a very long time. It used to only occurs on Linux but on Linux it fails over 20% of the time. (It has also been seen on Android.) It is possible this is only an issue in CI (see akoeplinger note in bug).



The failure is consistent and looks like:



                                                MESSAGE:
                                                System.Exception : Could not abort registered blocking threads before closing socket.
Thread StackTrace:
  at System.Net&lt;<A HREF="http://system.net/">http://system.net/</A>&gt;.Sockets.SafeSocketHandle.RegisterForBlockingSyscall () [0x00057] in /mnt/jenkins/workspace/test-mono-mainline-linux/label/ubuntu-1404-amd64/mcs/class/System/System.Net&lt;<A HREF="http://system.net/">http://system.net/</A>&gt;.Sockets/SafeSocketHandle.cs:114
  at System.Net&lt;<A HREF="http://system.net/">http://system.net/</A>&gt;.Sockets.Socket.SendFile_internal (System.Net&lt;<A HREF="http://system.net/">http://system.net/</A>&gt;.Sockets.SafeSocketHandle safeHandle, System.String filename, System.Byte[] pre_buffer, System.Byte[] post_buffer,System.Net&lt;<A HREF="http://system.net/">http://system.net/</A>&gt;.Sockets.TransmitFileOptions flags) [0x00000] in /mnt/jenkins/workspace/test-mono-mainline-linux/label/ubuntu-1404-amd64/mcs/class/System/System.Net&lt;<A HREF="http://system.net/">http://system.net/</A>&gt;.Sockets/Socket.cs:2944
  at System.Net&lt;<A HREF="http://system.net/">http://system.net/</A>&gt;.Sockets.Socket.SendFile (System.String fileName, System.Byte[] preBuffer, System.Byte[] postBuffer, System.Net&lt;<A HREF="http://system.net/">http://system.net/</A>&gt;.Sockets.TransmitFileOptions flags) [0x00028] in /mnt/jenkins/workspace/test-mono-mainline-linux/label/ubuntu-1404-amd64/mcs/class/System/System.Net&lt;<A HREF="http://system.net/">http://system.net/</A>&gt;.Sockets/Socket.cs:2893
[snip]



Recent Examples:
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=debian-8-armel/2577/testReport/(root">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=debian-8-armel/2577/testReport/(root</A>)/SocketTest/SendAsyncFile/
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-i386/2578/testReport/(root">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-i386/2578/testReport/(root</A>)/SocketTest/SendAsyncFile/
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=debian-8-armhf/2580/testReport/(root">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=debian-8-armhf/2580/testReport/(root</A>)/SocketTest/SendAsyncFile/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/mono-devel-list/attachments/20170713/9380b358/attachment-0001.html">http://lists.dot.net/pipermail/mono-devel-list/attachments/20170713/9380b358/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044459.html">[Mono-dev] Bundled mono Certificate Store
</A></li>
	<LI>Next message (by thread): <A HREF="044461.html">[Mono-dev] unaligned.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44460">[ date ]</a>
              <a href="thread.html#44460">[ thread ]</a>
              <a href="subject.html#44460">[ subject ]</a>
              <a href="author.html#44460">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
