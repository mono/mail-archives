<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] io-layer/shared.c and HP's MAP_SHARED rules
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20io-layer/shared.c%20and%20HP%27s%20MAP_SHARED%20rules&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001096.html">
   <LINK REL="Next"  HREF="001105.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] io-layer/shared.c and HP's MAP_SHARED rules</H1>
    <B>Bernie Solomon</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20io-layer/shared.c%20and%20HP%27s%20MAP_SHARED%20rules&In-Reply-To="
       TITLE="[Mono-devel-list] io-layer/shared.c and HP's MAP_SHARED rules">bernard at ugsolutions.com
       </A><BR>
    <I>Thu Jun 12 17:36:31 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="001096.html">[Mono-devel-list] Introduction
</A></li>
        <LI>Next message: <A HREF="001105.html">[Mono-devel-list] io-layer/shared.c and HP's MAP_SHARED rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1097">[ date ]</a>
              <a href="thread.html#1097">[ thread ]</a>
              <a href="subject.html#1097">[ subject ]</a>
              <a href="author.html#1097">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have been having a bit of difficulty getting mint going again on HP using
the latest code from CVS. It was failing inside the shared handle code. This
is because HP has some funny rules about MAP_SHARED (which aren't easy to
understand). Basically all mappings need to be consistent across all
processes. I have made things work by hacking out all of the remapping that
happens in the shared handle processing and just allocating some fixed
chunks (which I presume is what was happening in 0.24 when this worked). I
suspect that what has to happen in order to grow the shared mapped chunk is
that every process has to unmap it, the file needs to be grown, and then
every process remaps it as the new size - not that I have tried this because
I haven't fully understood what is going on - and I have no idea whether the
current protocol between clients and daemon can support this.

What I'd like to know is a few things: what happens if the shared handle
stuff is disabled? what doesn't work? If it is necessary is it reasonable to
have some configuration where the shared areas are just allocated at fixed
size and left alone after startup - at least on HP? What limits would thie
cause? Or perhaps things could be changed to use multiple files rather than
ones that grow and new files are allocated as needed which would avoid the
remapping problem as only new mappings would need adding?

Any thoughts would be appreciated

Bernie Solomon


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001096.html">[Mono-devel-list] Introduction
</A></li>
	<LI>Next message: <A HREF="001105.html">[Mono-devel-list] io-layer/shared.c and HP's MAP_SHARED rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1097">[ date ]</a>
              <a href="thread.html#1097">[ thread ]</a>
              <a href="subject.html#1097">[ subject ]</a>
              <a href="author.html#1097">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
