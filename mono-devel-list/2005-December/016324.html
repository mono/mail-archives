<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Validation%20for%20%3Cxsl%3Aoutput%3E%20attributes.&In-Reply-To=43ACB845.9030406%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016317.html">
   <LINK REL="Next"  HREF="016230.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.</H1>
    <B>Gert Driesen</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Validation%20for%20%3Cxsl%3Aoutput%3E%20attributes.&In-Reply-To=43ACB845.9030406%40ximian.com"
       TITLE="[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.">gert.driesen at telenet.be
       </A><BR>
    <I>Sat Dec 24 04:44:25 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016317.html">[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
</A></li>
        <LI>Next message: <A HREF="016230.html">[Mono-dev] RemObjects support Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16324">[ date ]</a>
              <a href="thread.html#16324">[ thread ]</a>
              <a href="subject.html#16324">[ subject ]</a>
              <a href="author.html#16324">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> 

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Atsushi Eno [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at ximian.com</A>] 
</I>&gt;<i> Sent: zaterdag 24 december 2005 3:54
</I>&gt;<i> To: Gert Driesen
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> attributes.
</I>&gt;<i> 
</I>&gt;<i> Atsushi Eno wrote:
</I>&gt;<i> &gt; Gert Driesen wrote:
</I>&gt;<i> &gt;&gt;  
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt;&gt; From: Atsushi Eno [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at ximian.com</A>] Sent: vrijdag 23 
</I>&gt;<i> &gt;&gt;&gt; december 2005 20:31
</I>&gt;<i> &gt;&gt;&gt; To: Gert Driesen
</I>&gt;<i> &gt;&gt;&gt; Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> &gt;&gt;&gt; Subject: Re: [Mono-dev] [PATCH] Validation for 
</I>&gt;<i> &lt;xsl:output&gt; attributes.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Gert Driesen wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt; Comments inline
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf Of 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Atsushi Eno
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Sent: dinsdag 20 december 2005 6:26
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; To: Gert Driesen
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Subject: Re: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; attributes.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Hi,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; The attached patch implements validation for &lt;xsl:output&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; attributes, and
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; adds unit tests.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Thanks!
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; I've also added some unit tests for XsltCompileException 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; and XslException.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Some test are marked NotWorking, due to bugs in Mono (for 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; which I'll report
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; bug reports later).
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Some comments:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;     - You can try Mainsoft XSLT standalone tests. Go to
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;       Test/System.Xml.Xsl/standalone and run &quot;make 
</I>&gt;<i> run-test&quot;, then
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;       you can find some regressions.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;     - Your code that checks attributes is good.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;     - &quot;indent&quot; in xsl:output is &quot;yes&quot; by default when the output
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;       method is &quot;html&quot;, unlike when it is &quot;xml&quot; (&quot;no&quot;). 
</I>&gt;<i> That's why
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;       we have string value instead of boolean in 
</I>&gt;<i> XslOutput class.
</I>&gt;<i> &gt;&gt;&gt;&gt; I now use an enum for this internally, which allows us to 
</I>&gt;<i> &gt;&gt;&gt; continue exposing
</I>&gt;<i> &gt;&gt;&gt;&gt; Intend as a bool.
</I>&gt;<i> &gt;&gt;&gt; Please checkin this change as well. Some of Mainsoft XSLT tests
</I>&gt;<i> &gt;&gt;&gt; started to fail after r54780.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Hmm, that change was part of r54780. I tried to run the 
</I>&gt;<i> Mainsoft XSLT 
</I>&gt;<i> &gt;&gt; tests,
</I>&gt;<i> &gt;&gt; but patching of testsuite/TESTS/catalog-fixed.xml failed for some 
</I>&gt;<i> &gt;&gt; reason :(
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Then you could just ask me to see it, instead of ignoring it.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt; I've just added two more tests for XML/HTML indentation 
</I>&gt;<i> (indent explictly
</I>&gt;<i> &gt;&gt; set to yes/no, and default value) that work fine on both 
</I>&gt;<i> Mono and MS.NET
</I>&gt;<i> &gt;&gt; 1.x/2.0.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Can you tell me what failures you get in the Mainsoft XSLT tests ?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 1) output_output05 : Different.
</I>&gt;<i> &gt; 2) BVTs_bvt098 : Different.
</I>&gt;<i> &gt; 3) ForwardComp__91848 : Unexpected exception:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Especially 3) tells that previous solution was better (did you ever
</I>&gt;<i> &gt; think about forward compatibility?):
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; System.Xml.Xsl.XsltCompileException: 
</I>&gt;<i> &gt; 
</I>&gt;<i> <A HREF="file:///C:/cygwin/home/atsushi/svn/mcs/class/System.XML/Test/S">file:///C:/cygwin/home/atsushi/svn/mcs/class/System.XML/Test/S</A>
</I>&gt;<i> ystem.Xml.Xsl/s 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> tandalone_tests/testsuite/TESTS/MSFT_Conformance_Tests/Forward
</I>&gt;<i> Comp/91848.xsl(4,40) 
</I>&gt;<i> &gt; :
</I>&gt;<i> &gt;  ---&gt; System.Xml.Xsl.XsltException: 'sure' is an invalid value for 
</I>&gt;<i> &gt; 'indent' attribute.--- End of inner exception stack trace ---
</I>&gt;<i> 
</I>&gt;<i> Forgot to say: I'm suggesting not to have another enumeration, but to 
</I>&gt;<i> revert the code as it was.
</I>
I submitted my initial patch the the mono-dev list, and you definitely
reviewed this part.

Our behaviour now matches that of MSFT, is that bad ? We now have unit tests
that validate our behaviour and that of MSFT (as these unit tests now pass
on both implementations).

You're saying that the MSFT implementation is not forward compatible, so I'd
suggest filing a bug report with them. If they ever change the
implementation, you'll immediately know as the unit tests will start
failing.

If our implementation does not match that of MSFT, then you can't have any
unit tests that allow you to discover this.

&gt;<i> Another reason that string is better than enumeration (like
</I>&gt;<i> Yes/No/Default/Other I guess) is that it becomes a mess when someone
</I>&gt;<i> or ourself want to reuse the code to implement his or her own XSLT
</I>&gt;<i> implementation that supports custom output.&#181;
</I>
Again, I just followed the behaviour of the MS implementation here, and got
your approval for the validation changes.

I really must be missing something here. If you don't want me to work on
this, you could've said so from the start ...

Gert


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016317.html">[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
</A></li>
	<LI>Next message: <A HREF="016230.html">[Mono-dev] RemObjects support Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16324">[ date ]</a>
              <a href="thread.html#16324">[ thread ]</a>
              <a href="subject.html#16324">[ subject ]</a>
              <a href="author.html#16324">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
