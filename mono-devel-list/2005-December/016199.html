<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [patch] emit small seh clauses
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5Bpatch%5D%20emit%20small%20seh%20clauses&In-Reply-To=1134604321.27678.33.camel%40omega.res.cmu.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016198.html">
   <LINK REL="Next"  HREF="016200.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [patch] emit small seh clauses</H1>
    <B>Jb Evain</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5Bpatch%5D%20emit%20small%20seh%20clauses&In-Reply-To=1134604321.27678.33.camel%40omega.res.cmu.edu"
       TITLE="[Mono-dev] [patch] emit small seh clauses">mono at evain.net
       </A><BR>
    <I>Wed Dec 14 19:14:14 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016198.html">[Mono-dev] [patch] emit small seh clauses
</A></li>
        <LI>Next message: <A HREF="016200.html">[Mono-dev] [patch] emit small seh clauses
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16199">[ date ]</a>
              <a href="thread.html#16199">[ thread ]</a>
              <a href="subject.html#16199">[ subject ]</a>
              <a href="author.html#16199">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Thanks for the feedback, here is a revised patch.

Jb
-------------- next part --------------
A non-text attachment was scrubbed...
Name: reflection.patch
Type: application/octet-stream
Size: 8649 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051215/8e061406/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051215/8e061406/attachment.obj</A> 
-------------- next part --------------

On Dec 15, 2005, at 12:52 AM, Ben Maurer wrote:

&gt;<i> Some style fyi's
</I>&gt;<i>
</I>&gt;<i> On Wed, 2005-12-14 at 22:47 +0100, Jb Evain wrote:
</I>&gt;&gt;<i> Index: reflection.c
</I>&gt;&gt;<i> ===================================================================
</I>&gt;&gt;<i> --- reflection.c        (revision 54370)
</I>&gt;&gt;<i> +++ reflection.c        (working copy)
</I>&gt;&gt;<i> @@ -820,6 +820,24 @@
</I>&gt;&gt;<i>         return num_clauses;
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> +static gboolean
</I>&gt;&gt;<i> +method_use_fat_seh (MonoReflectionILGen *ilgen)
</I>&gt;&gt;<i> +{
</I>&gt;&gt;<i> +       guint32 i;
</I>&gt;&gt;<i> +       gboolean fat_header = FALSE;
</I>&gt;&gt;<i> +       MonoILExceptionInfo *ex_info;
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i> +       for (i = 0; i &lt; mono_array_length (ilgen-&gt;ex_handlers); i+ 
</I>&gt;&gt;<i> +) {
</I>&gt;&gt;<i> +               ex_info = (MonoILExceptionInfo *) mono_array_addr  
</I>&gt;&gt;<i> (ilgen-&gt;ex_handlers, MonoILExceptionInfo, i);
</I>&gt;<i>
</I>&gt;<i> This cast is not needed (the macro takes care of it). Also, it'd be a
</I>&gt;<i> bit nicer to declare the ex_info variable inside the for loop.
</I>&gt;<i>
</I>&gt;&gt;<i> +               if (ex_info-&gt;len &gt; 255) {
</I>&gt;&gt;<i> +                       fat_header = TRUE;
</I>&gt;&gt;<i> +                       break;
</I>&gt;&gt;<i> +               }
</I>&gt;<i>
</I>&gt;<i> For style, you could just put return TRUE here.
</I>&gt;&gt;<i> +       }
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i> +       return fat_header;
</I>&gt;&gt;<i> +}
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i>  static MonoExceptionClause*
</I>&gt;&gt;<i>  method_encode_clauses (MonoDynamicImage *assembly,  
</I>&gt;&gt;<i> MonoReflectionILGen *ilgen, guint32 num_clauses)
</I>&gt;&gt;<i>  {
</I>&gt;&gt;<i> @@ -876,7 +894,6 @@
</I>&gt;&gt;<i>         gint32 max_stack, i;
</I>&gt;&gt;<i>         gint32 num_locals = 0;
</I>&gt;&gt;<i>         gint32 num_exception = 0;
</I>&gt;&gt;<i> -       gint maybe_small;
</I>&gt;&gt;<i>         guint32 fat_flags;
</I>&gt;&gt;<i>         char fat_header [12];
</I>&gt;&gt;<i>         guint32 int_value;
</I>&gt;&gt;<i> @@ -914,32 +931,20 @@
</I>&gt;&gt;<i>         }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         stream_data_align (&amp;assembly-&gt;code);
</I>&gt;&gt;<i> +       /* check if we can emit a small method header */
</I>&gt;&gt;<i> +       if ((!num_locals) &amp;&amp; (!num_exception) &amp;&amp; (max_stack &lt;= 8)  
</I>&gt;&gt;<i> &amp;&amp; (code_size &lt; 64)) {
</I>&gt;&gt;<i> +               flags = (code_size &lt;&lt; 2) | METHOD_HEADER_TINY_FORMAT;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -       /* check for exceptions, maxstack, locals */
</I>&gt;&gt;<i> -       maybe_small = (max_stack &lt;= 8) &amp;&amp; (!num_locals) &amp;&amp; (! 
</I>&gt;&gt;<i> num_exception);
</I>&gt;&gt;<i> -       if (maybe_small) {
</I>&gt;&gt;<i> -               if (code_size &lt; 64 &amp;&amp; !(code_size &amp; 1)) {
</I>&gt;&gt;<i> -                       flags = (code_size &lt;&lt; 2) | 0x2;
</I>&gt;&gt;<i> -               } else if (code_size &lt; 32 &amp;&amp; (code_size &amp; 1)) {
</I>&gt;&gt;<i> -                       flags = (code_size &lt;&lt; 2) | 0x6; /*  
</I>&gt;&gt;<i> LAMESPEC: see metadata.c */
</I>&gt;&gt;<i> -               } else {
</I>&gt;&gt;<i> -                       goto fat_header;
</I>&gt;&gt;<i> -               }
</I>&gt;&gt;<i>                 idx = mono_image_add_stream_data (&amp;assembly-&gt;code,  
</I>&gt;&gt;<i> &amp;flags, 1);
</I>&gt;&gt;<i>                 /* add to the fixup todo list */
</I>&gt;&gt;<i>                 if (mb-&gt;ilgen &amp;&amp; mb-&gt;ilgen-&gt;num_token_fixups)
</I>&gt;&gt;<i>                         mono_g_hash_table_insert (assembly- 
</I>&gt;&gt;<i> &gt;token_fixups, mb-&gt;ilgen, GUINT_TO_POINTER (idx + 1));
</I>&gt;&gt;<i>                 mono_image_add_stream_data (&amp;assembly-&gt;code,  
</I>&gt;&gt;<i> mono_array_addr (code, char, 0), code_size);
</I>&gt;&gt;<i>                 return assembly-&gt;text_rva + idx;
</I>&gt;&gt;<i> -       }
</I>&gt;&gt;<i> -fat_header:
</I>&gt;&gt;<i> +       }
</I>&gt;&gt;<i>         if (num_locals)
</I>&gt;&gt;<i>                 local_sig = MONO_TOKEN_SIGNATURE | encode_locals  
</I>&gt;&gt;<i> (assembly, mb-&gt;ilgen);
</I>&gt;&gt;<i> -       /*
</I>&gt;&gt;<i> -        * FIXME: need to set also the header size in fat_flags.
</I>&gt;&gt;<i> -        * (and more sects and init locals flags)
</I>&gt;&gt;<i> -        */
</I>&gt;&gt;<i> -       fat_flags =  0x03;
</I>&gt;&gt;<i> +       fat_flags = METHOD_HEADER_FAT_FORMAT;
</I>&gt;&gt;<i>         if (num_exception)
</I>&gt;&gt;<i>                 fat_flags |= METHOD_HEADER_MORE_SECTS;
</I>&gt;&gt;<i>         if (mb-&gt;init_locals)
</I>&gt;&gt;<i> @@ -956,67 +961,91 @@
</I>&gt;&gt;<i>         /* add to the fixup todo list */
</I>&gt;&gt;<i>         if (mb-&gt;ilgen &amp;&amp; mb-&gt;ilgen-&gt;num_token_fixups)
</I>&gt;&gt;<i>                 mono_g_hash_table_insert (assembly-&gt;token_fixups,  
</I>&gt;&gt;<i> mb-&gt;ilgen, GUINT_TO_POINTER (idx + 12));
</I>&gt;&gt;<i> -
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i>         mono_image_add_stream_data (&amp;assembly-&gt;code,  
</I>&gt;&gt;<i> mono_array_addr (code, char, 0), code_size);
</I>&gt;&gt;<i>         if (num_exception) {
</I>&gt;&gt;<i>                 unsigned char sheader [4];
</I>&gt;&gt;<i>                 MonoILExceptionInfo * ex_info;
</I>&gt;&gt;<i>                 MonoILExceptionBlock * ex_block;
</I>&gt;&gt;<i> +               gboolean fat_header;
</I>&gt;&gt;<i>                 int j;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                 stream_data_align (&amp;assembly-&gt;code);
</I>&gt;&gt;<i> -               /* always use fat format for now */
</I>&gt;&gt;<i> -               sheader [0] = METHOD_HEADER_SECTION_FAT_FORMAT |  
</I>&gt;&gt;<i> METHOD_HEADER_SECTION_EHTABLE;
</I>&gt;&gt;<i> -               num_exception *= 6 * sizeof (guint32);
</I>&gt;&gt;<i> -               num_exception += 4; /* include the size of the  
</I>&gt;&gt;<i> header */
</I>&gt;&gt;<i> -               sheader [1] = num_exception &amp; 0xff;
</I>&gt;&gt;<i> -               sheader [2] = (num_exception &gt;&gt; 8) &amp; 0xff;
</I>&gt;&gt;<i> -               sheader [3] = (num_exception &gt;&gt; 16) &amp; 0xff;
</I>&gt;&gt;<i> -               mono_image_add_stream_data (&amp;assembly-&gt;code,  
</I>&gt;&gt;<i> sheader, 4);
</I>&gt;&gt;<i> -               /* fat header, so we are already aligned */
</I>&gt;&gt;<i> +               fat_header = method_use_fat_seh (mb-&gt;ilgen);
</I>&gt;&gt;<i> +               if (fat_header) {
</I>&gt;&gt;<i> +                       sheader [0] =  
</I>&gt;&gt;<i> METHOD_HEADER_SECTION_FAT_FORMAT | METHOD_HEADER_SECTION_EHTABLE;
</I>&gt;&gt;<i> +                       num_exception *= 6 * sizeof (guint32);
</I>&gt;&gt;<i> +                       num_exception += 4; /* include the size of  
</I>&gt;&gt;<i> the header */
</I>&gt;&gt;<i> +                       sheader [1] = num_exception &amp; 0xff;
</I>&gt;&gt;<i> +                       sheader [2] = (num_exception &gt;&gt; 8) &amp; 0xff;
</I>&gt;&gt;<i> +                       sheader [3] = (num_exception &gt;&gt; 16) &amp; 0xff;
</I>&gt;&gt;<i> +               } else {
</I>&gt;&gt;<i> +                       sheader [0] = METHOD_HEADER_SECTION_EHTABLE;
</I>&gt;&gt;<i> +                       num_exception *= 12;
</I>&gt;&gt;<i> +                       num_exception += 4;
</I>&gt;&gt;<i> +                       sheader [1] = num_exception;
</I>&gt;&gt;<i> +                       sheader [2] = sheader [3] = 0;
</I>&gt;&gt;<i> +               }
</I>&gt;&gt;<i> +               mono_image_add_stream_data (&amp;assembly-&gt;code, (char  
</I>&gt;&gt;<i> *) sheader, 4);
</I>&gt;&gt;<i>                 /* reverse order */
</I>&gt;&gt;<i>                 for (i = mono_array_length (mb-&gt;ilgen- 
</I>&gt;&gt;<i> &gt;ex_handlers) - 1; i &gt;= 0; --i) {
</I>&gt;&gt;<i> -                       ex_info = (MonoILExceptionInfo *) 
</I>&gt;&gt;<i> mono_array_addr (mb-&gt;ilgen-&gt;ex_handlers, MonoILExceptionInfo, i);
</I>&gt;&gt;<i> -                       if (ex_info-&gt;handlers) {
</I>&gt;&gt;<i> -                               int finally_start = ex_info-&gt;start  
</I>&gt;&gt;<i> + ex_info-&gt;len;
</I>&gt;&gt;<i> -                               for (j = 0; j &lt; mono_array_length  
</I>&gt;&gt;<i> (ex_info-&gt;handlers); ++j) {
</I>&gt;&gt;<i> -                                       guint32 val;
</I>&gt;&gt;<i> -                                       ex_block =  
</I>&gt;&gt;<i> (MonoILExceptionBlock*)mono_array_addr (ex_info-&gt;handlers,  
</I>&gt;&gt;<i> MonoILExceptionBlock, j);
</I>&gt;&gt;<i> +                       ex_info = (MonoILExceptionInfo *)  
</I>&gt;&gt;<i> mono_array_addr (mb-&gt;ilgen-&gt;ex_handlers, MonoILExceptionInfo, i);
</I>&gt;&gt;<i> +                       if (!ex_info-&gt;handlers)
</I>&gt;&gt;<i> +                               g_error (&quot;No clauses for ex info  
</I>&gt;&gt;<i> block %d&quot;, i);
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i> +               for (j = 0; j &lt; mono_array_length (ex_info- 
</I>&gt;&gt;<i> &gt;handlers); ++j) {
</I>&gt;&gt;<i> +                       guint32 val32;
</I>&gt;&gt;<i> +                       ex_block = (MonoILExceptionBlock *)  
</I>&gt;&gt;<i> mono_array_addr (ex_info-&gt;handlers, MonoILExceptionBlock, j);
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i> +                               if (fat_header) {
</I>&gt;&gt;<i>                                         /* the flags */
</I>&gt;&gt;<i> -                                       val = GUINT32_TO_LE  
</I>&gt;&gt;<i> (ex_block-&gt;type);
</I>&gt;&gt;<i> -                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char*)&amp;val, sizeof (guint32));
</I>&gt;&gt;<i> +                                       val32 = GUINT32_TO_LE  
</I>&gt;&gt;<i> (ex_block-&gt;type);
</I>&gt;&gt;<i> +                               mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char *) &amp;val32, sizeof (guint32));
</I>&gt;<i>
</I>&gt;<i> There is a tabs/space issue here.
</I>&gt;&gt;<i>                                         /* try offset */
</I>&gt;&gt;<i> -                                       val = GUINT32_TO_LE  
</I>&gt;&gt;<i> (ex_info-&gt;start);
</I>&gt;&gt;<i> -                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char*)&amp;val, sizeof (guint32));
</I>&gt;&gt;<i> -                                       /* need fault, too,  
</I>&gt;&gt;<i> probably */
</I>&gt;&gt;<i> -                                       if (ex_block-&gt;type ==  
</I>&gt;&gt;<i> MONO_EXCEPTION_CLAUSE_FINALLY)
</I>&gt;&gt;<i> -                                               val =  
</I>&gt;&gt;<i> GUINT32_TO_LE (finally_start - ex_info-&gt;start);
</I>&gt;&gt;<i> -                                       else
</I>&gt;&gt;<i> -                                               val =  
</I>&gt;&gt;<i> GUINT32_TO_LE (ex_info-&gt;len);
</I>&gt;&gt;<i> -                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char*)&amp;val, sizeof (guint32));
</I>&gt;&gt;<i> +                                       val32 = GUINT32_TO_LE  
</I>&gt;&gt;<i> (ex_info-&gt;start);
</I>&gt;&gt;<i> +                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char *) &amp;val32, sizeof (guint32));
</I>&gt;&gt;<i> +                                       /* try len */
</I>&gt;&gt;<i> +                                       val32 = GUINT32_TO_LE  
</I>&gt;&gt;<i> (ex_info-&gt;len);
</I>&gt;&gt;<i> +                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char *) &amp;val32, sizeof (guint32));
</I>&gt;&gt;<i>                                         /* handler offset */
</I>&gt;&gt;<i> -                                       val = GUINT32_TO_LE  
</I>&gt;&gt;<i> (ex_block-&gt;start);
</I>&gt;&gt;<i> -                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char*)&amp;val, sizeof (guint32));
</I>&gt;&gt;<i> +                                       val32 = GUINT32_TO_LE  
</I>&gt;&gt;<i> (ex_block-&gt;start);
</I>&gt;&gt;<i> +                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char *) &amp;val32, sizeof (guint32));
</I>&gt;&gt;<i>                                         /* handler len */
</I>&gt;&gt;<i> -                                       val = GUINT32_TO_LE  
</I>&gt;&gt;<i> (ex_block-&gt;len);
</I>&gt;&gt;<i> -                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char*)&amp;val, sizeof (guint32));
</I>&gt;&gt;<i> -                                       finally_start = ex_block- 
</I>&gt;&gt;<i> &gt;start + ex_block-&gt;len;
</I>&gt;&gt;<i> -                                       if (ex_block-&gt;extype) {
</I>&gt;&gt;<i> -                                               val =  
</I>&gt;&gt;<i> mono_metadata_token_from_dor (mono_image_typedef_or_ref (assembly,  
</I>&gt;&gt;<i> ex_block-&gt;extype-&gt;type));
</I>&gt;&gt;<i> -                                       } else {
</I>&gt;&gt;<i> -                                               if (ex_block-&gt;type  
</I>&gt;&gt;<i> == MONO_EXCEPTION_CLAUSE_FILTER)
</I>&gt;&gt;<i> -                                                       val =  
</I>&gt;&gt;<i> ex_block-&gt;filter_offset;
</I>&gt;&gt;<i> -                                               else
</I>&gt;&gt;<i> -                                                       val = 0;
</I>&gt;&gt;<i> -                                       }
</I>&gt;&gt;<i> -                                       val = GUINT32_TO_LE (val);
</I>&gt;&gt;<i> -                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char*)&amp;val, sizeof (guint32));
</I>&gt;&gt;<i> -                                       /*g_print (&quot;out clause %d:  
</I>&gt;&gt;<i> from %d len=%d, handler at %d, %d, finally_start=%d, ex_info- 
</I>&gt;&gt;<i> &gt;start=%d, ex_info-&gt;len=%d, ex_block-&gt;type=%d, j=%d, i=%d\n&quot;,
</I>&gt;&gt;<i> -                                                        
</I>&gt;&gt;<i> clause.flags, clause.try_offset, clause.try_len,  
</I>&gt;&gt;<i> clause.handler_offset, clause.handler_len, finally_start, ex_info- 
</I>&gt;&gt;<i> &gt;start, ex_info-&gt;len, ex_block-&gt;type, j, i);*/
</I>&gt;&gt;<i> +                                       val32 = GUINT32_TO_LE  
</I>&gt;&gt;<i> (ex_block-&gt;len);
</I>&gt;&gt;<i> +                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char *) &amp;val32, sizeof (guint32));
</I>&gt;&gt;<i> +                               } else {
</I>&gt;&gt;<i> +                                       gint8 val8;
</I>&gt;&gt;<i> +                                       guint16 val16;
</I>&gt;&gt;<i> +                                       /* the flags */
</I>&gt;&gt;<i> +                                       val16 = GUINT16_TO_LE  
</I>&gt;&gt;<i> ((guint16) ex_block-&gt;type);
</I>&gt;&gt;<i> +                               mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char *) &amp;val16, sizeof (guint16));
</I>&gt;<i>
</I>&gt;<i> There is a tabs/space issue here.
</I>&gt;&gt;<i> +                                       /* try offset */
</I>&gt;&gt;<i> +                                       val16 = GUINT16_TO_LE  
</I>&gt;&gt;<i> ((guint16) ex_info-&gt;start);
</I>&gt;&gt;<i> +                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char *) &amp;val16, sizeof (guint16));
</I>&gt;&gt;<i> +                                       /* try len */
</I>&gt;&gt;<i> +                                       val8 = (gint) ex_info-&gt;len;
</I>&gt;&gt;<i> +                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char *) &amp;val8, sizeof (gint8));
</I>&gt;&gt;<i> +                                       /* handler offset */
</I>&gt;&gt;<i> +                                       val16 = GUINT16_TO_LE  
</I>&gt;&gt;<i> ((guint16) ex_block-&gt;start);
</I>&gt;&gt;<i> +                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char *) &amp;val16, sizeof (guint16));
</I>&gt;&gt;<i> +                                       /* handler len */
</I>&gt;&gt;<i> +                                       val8 = (gint) ex_block-&gt;len;
</I>&gt;&gt;<i> +                                       mono_image_add_stream_data  
</I>&gt;&gt;<i> (&amp;assembly-&gt;code, (char *) &amp;val8, sizeof (gint8));
</I>&gt;&gt;<i> +                       }
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i> +                       if (ex_block-&gt;extype) {
</I>&gt;&gt;<i> +                                       val32 =  
</I>&gt;&gt;<i> mono_metadata_token_from_dor (mono_image_typedef_or_ref (assembly,  
</I>&gt;&gt;<i> ex_block-&gt;extype-&gt;type));
</I>&gt;&gt;<i> +                               } else {
</I>&gt;&gt;<i> +                                       if (ex_block-&gt;type ==  
</I>&gt;&gt;<i> MONO_EXCEPTION_CLAUSE_FILTER)
</I>&gt;&gt;<i> +                                               val32 = ex_block- 
</I>&gt;&gt;<i> &gt;filter_offset;
</I>&gt;&gt;<i> +                                       else
</I>&gt;&gt;<i> +                                               val32 = 0;
</I>&gt;<i>
</I>&gt;<i> Also a weird tabs/spaces indentation issue here. And you should  
</I>&gt;<i> probably
</I>&gt;<i> use an else if clause rather than the extra level of indentation.
</I>&gt;<i>
</I>&gt;<i> -- Ben
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016198.html">[Mono-dev] [patch] emit small seh clauses
</A></li>
	<LI>Next message: <A HREF="016200.html">[Mono-dev] [patch] emit small seh clauses
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16199">[ date ]</a>
              <a href="thread.html#16199">[ thread ]</a>
              <a href="subject.html#16199">[ subject ]</a>
              <a href="author.html#16199">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
