<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Validation%20for%20%3Cxsl%3Aoutput%3E%20attributes.&In-Reply-To=43AD519D.4070007%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016322.html">
   <LINK REL="Next"  HREF="016309.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.</H1>
    <B>Gert Driesen</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Validation%20for%20%3Cxsl%3Aoutput%3E%20attributes.&In-Reply-To=43AD519D.4070007%40ximian.com"
       TITLE="[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.">gert.driesen at telenet.be
       </A><BR>
    <I>Sat Dec 24 10:07:52 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016322.html">[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
</A></li>
        <LI>Next message: <A HREF="016309.html">HA: [Mono-dev] System.Threading.Thread:MemoryBarrier() and XSP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16323">[ date ]</a>
              <a href="thread.html#16323">[ thread ]</a>
              <a href="subject.html#16323">[ subject ]</a>
              <a href="author.html#16323">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> 

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Atsushi Eno [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at ximian.com</A>] 
</I>&gt;<i> Sent: zaterdag 24 december 2005 14:48
</I>&gt;<i> To: Gert Driesen
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> attributes.
</I>&gt;<i> 
</I>&gt;<i> Gert Driesen wrote:
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt; From: Atsushi Eno [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at ximian.com</A>] 
</I>&gt;<i> &gt;&gt; Sent: zaterdag 24 december 2005 11:16
</I>&gt;<i> &gt;&gt; To: Gert Driesen
</I>&gt;<i> &gt;&gt; Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> &gt;&gt; Subject: Re: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> &gt;&gt; attributes.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Gert Driesen wrote:
</I>&gt;<i> &gt;&gt;&gt; I submitted my initial patch the the mono-dev list, and you 
</I>&gt;<i> &gt;&gt; definitely
</I>&gt;<i> &gt;&gt;&gt; reviewed this part.
</I>&gt;<i> &gt;&gt; It is incorrect. It was the first reply I precisely 
</I>&gt;<i> pointed out that
</I>&gt;<i> &gt;&gt; HTML output is broken here, and after my reply you committed what
</I>&gt;<i> &gt;&gt; you haven't posted.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Our behaviour now matches that of MSFT, is that bad ? We 
</I>&gt;<i> &gt;&gt; now have unit tests
</I>&gt;<i> &gt;&gt;&gt; that validate our behaviour and that of MSFT (as these unit 
</I>&gt;<i> &gt;&gt; tests now pass
</I>&gt;<i> &gt;&gt;&gt; on both implementations).
</I>&gt;<i> &gt;&gt;  &gt;
</I>&gt;<i> &gt;&gt;&gt; You're saying that the MSFT implementation is not forward 
</I>&gt;<i> &gt;&gt; compatible, so I'd
</I>&gt;<i> &gt;&gt;&gt; suggest filing a bug report with them. If they ever change the
</I>&gt;<i> &gt;&gt;&gt; implementation, you'll immediately know as the unit tests 
</I>&gt;<i> will start
</I>&gt;<i> &gt;&gt;&gt; failing.
</I>&gt;<i> &gt;&gt; The standalone tests deny what you say. Note that our 
</I>&gt;<i> standalone tests
</I>&gt;<i> &gt;&gt; are using whatever MS.NET outputs. Thus, there is 
</I>&gt;<i> something your code
</I>&gt;<i> &gt;&gt; does not match with MS.NET, or MS.NET has changed their 
</I>&gt;<i> &gt;&gt; implementation.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; (BTW I never said that MS implementation is not forward 
</I>&gt;<i> compatible.)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I guess MS does perform the same level of validation if the 
</I>&gt;<i> version is not
</I>&gt;<i> &gt; equal to 1.0.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Problem is that I cannot seem to succeed in executing the 
</I>&gt;<i> standalone XSLT
</I>&gt;<i> &gt; test suite :(
</I>&gt;<i> 
</I>&gt;<i> Yes; Sorry for the inconvenience. It just doesn't build fine under
</I>&gt;<i> LF environment (you could still try cygwin environment as I as well
</I>&gt;<i> as Mainsoft guys used to do).
</I>
No problem, I'll tests it later (after x-mas).

&gt;<i> I made a quick fix (attached) which is however untested under
</I>&gt;<i> Windows (this time) since the latest svn seems broken to run
</I>&gt;<i> NUnit tests.
</I>
I'm working on linux, so that's not a problem.

&gt;<i> After this patch there are still some failing tests
</I>&gt;<i> which incorrectly expects Plants.xml and Outputtest.xml (you will
</I>&gt;<i> understand what am saying here after seeing the test results).
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt;&gt; If our implementation does not match that of MSFT, then you 
</I>&gt;<i> &gt;&gt; can't have any
</I>&gt;<i> &gt;&gt;&gt; unit tests that allow you to discover this.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Another reason that string is better than enumeration (like
</I>&gt;<i> &gt;&gt;&gt;&gt; Yes/No/Default/Other I guess) is that it becomes a mess 
</I>&gt;<i> &gt;&gt; when someone
</I>&gt;<i> &gt;&gt;&gt;&gt; or ourself want to reuse the code to implement his or 
</I>&gt;<i> her own XSLT
</I>&gt;<i> &gt;&gt;&gt;&gt; implementation that supports custom output.&#181;
</I>&gt;<i> &gt;&gt;&gt; Again, I just followed the behaviour of the MS 
</I>&gt;<i> &gt;&gt; implementation here, and got
</I>&gt;<i> &gt;&gt;&gt; your approval for the validation changes.
</I>&gt;<i> &gt;&gt; What I asked is to fix the problem and commit. You might 
</I>&gt;<i> have thought
</I>&gt;<i> &gt;&gt; you *fixed* it, but it is not right. Thus am asking you to 
</I>&gt;<i> revert it.
</I>&gt;<i> &gt;&gt; I don't see any reason that you should stick to the broken changes.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'll see if I can find time to look into the broken 
</I>&gt;<i> changes. With broken I
</I>&gt;<i> &gt; mean broken compared to the MSFT implementation. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Is that ok for you ? If not, it might be best to revert all 
</I>&gt;<i> validation
</I>&gt;<i> &gt; changes.
</I>&gt;<i> 
</I>&gt;<i> Unless you find something soon, no, please just revert &quot;indent&quot;
</I>&gt;<i> part from enum to string (it is the best that everyone would agree.)
</I>
It doesn't make sense to just revert the &quot;indent&quot; part. Forward
compatibility does not just apply to the intend attribute.

I've added some tests to XslTransformTests that &quot;prove&quot; this.  

Can you tell me how I can access the XSLT version (as defined on the
&lt;stylesheet&gt; document element) from XslOutput to make the validations
optional if the version is different from &quot;1.0&quot; ?
 
&gt;<i> &gt;&gt;&gt; I really must be missing something here. If you don't want 
</I>&gt;<i> &gt;&gt; me to work on
</I>&gt;<i> &gt;&gt;&gt; this, you could've said so from the start ...
</I>&gt;<i> &gt;&gt; There is no reason you should feel you are rejected. I just keep
</I>&gt;<i> &gt;&gt; pointing out that your fix is not right.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Ok. Point taken.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt; (I, of course, don't like the altitude that compatibility 
</I>&gt;<i> is God and
</I>&gt;<i> &gt;&gt; it can throw better behavior away. I'm not here to 
</I>&gt;<i> reinvent MS bugs.)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I agree with you. We should not implement MS bugs, but we 
</I>&gt;<i> should stick to
</I>&gt;<i> &gt; their implementation as close as possible (as this will 
</I>&gt;<i> allow tests to pass
</I>&gt;<i> &gt; on both implementations, therefore allowing us to catch 
</I>&gt;<i> regressions/changes
</I>&gt;<i> &gt; in both implementations).
</I>&gt;<i> 
</I>&gt;<i> I don't think you agreed with me on this case. You are still 
</I>&gt;<i> saying that
</I>&gt;<i> showing empty message is better than &quot;XSLT compile error&quot; 
</I>&gt;<i> because it is
</I>&gt;<i> MS compatible. Am not interested in &quot;general&quot; thoughts since I am sure
</I>&gt;<i> that we will never agree.
</I>
You might be right on that one ! just kidding ;-)

I agree that an empty message is not good, but you must also agree that
creating an Exception with an empty message is not good (and should not be
done anyway). So, I really think this is an academical discussion. You don't
want an XsltCompileException with no message ? Ok, then just pass in a
message in the ctor. Easy, no ?

I agree that we should not duplicate bugs, but I don't think this is really
a bug ... but lets not start the discussion all over again ;-) lol

Gert


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016322.html">[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
</A></li>
	<LI>Next message: <A HREF="016309.html">HA: [Mono-dev] System.Threading.Thread:MemoryBarrier() and XSP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16323">[ date ]</a>
              <a href="thread.html#16323">[ thread ]</a>
              <a href="subject.html#16323">[ subject ]</a>
              <a href="author.html#16323">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
