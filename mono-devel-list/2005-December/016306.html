<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Validation%20for%20%3Cxsl%3Aoutput%3E%20attributes.&In-Reply-To=43ACB69C.9050206%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016303.html">
   <LINK REL="Next"  HREF="016299.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.</H1>
    <B>Gert Driesen</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Validation%20for%20%3Cxsl%3Aoutput%3E%20attributes.&In-Reply-To=43ACB69C.9050206%40ximian.com"
       TITLE="[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.">gert.driesen at telenet.be
       </A><BR>
    <I>Sat Dec 24 04:29:29 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016303.html">[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
</A></li>
        <LI>Next message: <A HREF="016299.html">[Mono-dev] [PATCH] Don't use IsModuleOnly in mcs for /target:module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16306">[ date ]</a>
              <a href="thread.html#16306">[ thread ]</a>
              <a href="subject.html#16306">[ subject ]</a>
              <a href="author.html#16306">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> 

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> 
</I>&gt;<i> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf 
</I>&gt;<i> Of Atsushi Eno
</I>&gt;<i> Sent: zaterdag 24 december 2005 3:47
</I>&gt;<i> To: Gert Driesen
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> attributes.
</I>&gt;<i> 
</I>&gt;<i> Gert Driesen wrote:
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt; From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> 
</I>&gt;<i> &gt;&gt; [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf 
</I>&gt;<i> &gt;&gt; Of Atsushi Eno
</I>&gt;<i> &gt;&gt; Sent: vrijdag 23 december 2005 19:29
</I>&gt;<i> &gt;&gt; To: Gert Driesen
</I>&gt;<i> &gt;&gt; Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt; Subject: RE: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> &gt;&gt; attributes.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt;&gt;&gt; From: Atsushi Eno [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at ximian.com</A>] 
</I>&gt;<i> &gt;&gt;&gt;&gt; Sent: vrijdag 23 december 2005 18:54
</I>&gt;<i> &gt;&gt;&gt;&gt; To: Gert Driesen
</I>&gt;<i> &gt;&gt;&gt;&gt; Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> &gt;&gt;&gt;&gt; Subject: RE: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt; attributes.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Comments inline 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Of Atsushi Eno
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Sent: dinsdag 20 december 2005 6:26
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; To: Gert Driesen
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Subject: Re: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; attributes.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Hi,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; The attached patch implements validation for &lt;xsl:output&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; attributes, and
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; adds unit tests.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Thanks!
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; I've also added some unit tests for XsltCompileException 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; and XslException.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Some test are marked NotWorking, due to bugs in Mono (for 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; which I'll report
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; bug reports later).
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Some comments:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	- You can try Mainsoft XSLT standalone tests. Go to
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  Test/System.Xml.Xsl/standalone and run &quot;make 
</I>&gt;<i> &gt;&gt; run-test&quot;, then
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  you can find some regressions.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	- Your code that checks attributes is good.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	- &quot;indent&quot; in xsl:output is &quot;yes&quot; by default 
</I>&gt;<i> &gt;&gt; when the output
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  method is &quot;html&quot;, unlike when it is &quot;xml&quot; 
</I>&gt;<i> &gt;&gt; (&quot;no&quot;). That's why
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  we have string value instead of boolean in 
</I>&gt;<i> &gt;&gt; XslOutput class.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; I now use an enum for this internally, which allows us to 
</I>&gt;<i> &gt;&gt;&gt;&gt; continue exposing
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Intend as a bool.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	- unindent cases in switches, i.e.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 		switch (foo) {
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 		case bar:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 			...
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Done.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	- The reason why you marked [NotWorking] on
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  XsltExceptionTests.Constructor2() is because
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 		xsltException = new XsltException 
</I>&gt;<i> &gt;&gt; ((string) null,cause);
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 		Assert.AreEqual (string.Empty, 
</I>&gt;<i> &gt;&gt; xsltException.Message);
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  &quot;fails&quot;, right? Hmm, It's still okay to keep 
</I>&gt;<i> &gt;&gt; this test, but
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  I don't think it is kind of thing we should 
</I>&gt;<i> &gt;&gt; fix. Having empty
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  message for an exception does not make sense.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  I guess, most of the reason in NotWorking are 
</I>&gt;<i> &gt;&gt; like that. If
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  so, you don't have to file bugs for them. 
</I>&gt;<i> &gt;&gt; Just add some
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 	  comments in the sources.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; I've fixes these &quot;bugs&quot;, and all tests now pass.
</I>&gt;<i> &gt;&gt;&gt;&gt; Lemme say again, &quot;it is not kind of thing we should fix&quot;. 
</I>&gt;<i> &gt;&gt; After your
</I>&gt;<i> &gt;&gt;&gt;&gt; fix,
</I>&gt;<i> &gt;&gt;&gt;&gt; no one can understand what is going on from the Message property.
</I>&gt;<i> &gt;&gt;&gt; If you actually specify a zero-length or null message, then 
</I>&gt;<i> &gt;&gt; this not really
</I>&gt;<i> &gt;&gt;&gt; that odd behaviour. No ?
</I>&gt;<i> &gt;&gt; No. Your test reports like
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; expected &lt;null&gt;
</I>&gt;<i> &gt;&gt; but actually &lt;&quot;XSLT compile error ...&quot;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; that is, it expects not to explain that it is XSLT compile 
</I>&gt;<i> error, but
</I>&gt;<i> &gt;&gt; not to tell
</I>&gt;<i> &gt;&gt; anything. Why on earth it could be better?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'm not saying that an empty (or null) message is better. 
</I>&gt;<i> But I'm saying
</I>&gt;<i> &gt; that it makes sense that if you construct an exception with 
</I>&gt;<i> a null or
</I>&gt;<i> &gt; zero-length message, you actually get a zero-length message.
</I>&gt;<i> 
</I>&gt;<i> You are saying the same idea with different words.
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; BTW it should not be the reason you could change code in 
</I>&gt;<i> &gt;&gt; advance without
</I>&gt;<i> &gt;&gt; further discussion. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; All I did was, instead of reporting a bug report, I fixed 
</I>&gt;<i> the &quot;issue&quot;
</I>&gt;<i> &gt; myself. I got the impression that you did not consider it 
</I>&gt;<i> to be an important
</I>&gt;<i> &gt; bug (and I agree that its not), and that you wanted me to 
</I>&gt;<i> file a bug report
</I>&gt;<i> &gt; as a reminder (for when you'd have time to fix it). I 
</I>&gt;<i> thought I'd help you
</I>&gt;<i> &gt; by &quot;fixing&quot; it myself ... But well, guess not :(
</I>&gt;<i> 
</I>&gt;<i> You wrote a lot of helpful tests here and there, but it's 
</I>&gt;<i> not. Also this
</I>&gt;<i> &quot;bug&quot; is usually not worthy of spending much words. You committed 
</I>&gt;<i> changes without further discussion, which is a bad sign.
</I>
The only way to ensure compatibility, and to discover (undocumented) changes
between versions of .NET is by following the MS implementation as close as
possible. Only then can you have meaningful tests (that pass on both Mono
and MS.NET), which allow you to catch regressions/changes in either
implementation.

I don't want to waste more time of my vacation on this, so why don't you
just rollback all my changes ... I'm sure that would please you the most.

Regards

Gert


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016303.html">[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
</A></li>
	<LI>Next message: <A HREF="016299.html">[Mono-dev] [PATCH] Don't use IsModuleOnly in mcs for /target:module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16306">[ date ]</a>
              <a href="thread.html#16306">[ thread ]</a>
              <a href="subject.html#16306">[ subject ]</a>
              <a href="author.html#16306">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
