<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Dropping privileges in linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Dropping%20privileges%20in%20linux&In-Reply-To=6e837a390512210022m74599ff3m30614376df22fb8c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016269.html">
   <LINK REL="Next"  HREF="016272.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Dropping privileges in linux</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Dropping%20privileges%20in%20linux&In-Reply-To=6e837a390512210022m74599ff3m30614376df22fb8c%40mail.gmail.com"
       TITLE="[Mono-dev] Dropping privileges in linux">robertj at gmx.net
       </A><BR>
    <I>Wed Dec 21 05:36:18 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016269.html">[Mono-dev] Dropping privileges in linux
</A></li>
        <LI>Next message: <A HREF="016272.html">[Mono-dev] Dropping privileges in linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16270">[ date ]</a>
              <a href="thread.html#16270">[ thread ]</a>
              <a href="subject.html#16270">[ subject ]</a>
              <a href="author.html#16270">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Georgi,

&gt;<i> I am looking for a way to drop privileges of an assembly started as
</I>&gt;<i> 'root' to a normal user. I found two possible solutions, but didn't
</I>&gt;<i> succeed with either of them ...
</I>&gt;<i> 
</I>&gt;<i> a) Using Syscall
</I>&gt;<i> 
</I>&gt;<i>    Syscall.setgid(1000);
</I>&gt;<i>    Syscall.setuid(1000);
</I>&gt;<i> 
</I>&gt;<i>    there 1000 is the uid and gid of an existing user.
</I>&gt;<i> 
</I>&gt;<i> b) Using WindowsIdentity the way it is described here:
</I>&gt;<i> 
</I>&gt;<i>    <A HREF="http://pages.infinit.net/ctech/20040405-1133.html">http://pages.infinit.net/ctech/20040405-1133.html</A>
</I>&gt;<i> 
</I>&gt;<i> In either way I get a 'Segmentation fault' when I execute the
</I>&gt;<i> assembly. I think there are some kind of memory permissions involved,
</I>&gt;<i> because when I strace the execution of the assembly I see that the
</I>&gt;<i> actual seuid and setgid calls are executed.
</I>&gt;<i> 
</I>&gt;<i> Can anyone give me some hint what I'm doing wrong, or a way to surroud
</I>&gt;<i> the problem? I'm running Debian 3.1 with mono 1.1.10.
</I>
Both (a) and (b) work for me. You may delete root's .wapi
directory and retry. If it still doesn't work, please post the
native stack trace you can obtain with gdb.

Robert


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016269.html">[Mono-dev] Dropping privileges in linux
</A></li>
	<LI>Next message: <A HREF="016272.html">[Mono-dev] Dropping privileges in linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16270">[ date ]</a>
              <a href="thread.html#16270">[ thread ]</a>
              <a href="subject.html#16270">[ subject ]</a>
              <a href="author.html#16270">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
