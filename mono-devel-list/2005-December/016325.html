<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Validation%20for%20%3Cxsl%3Aoutput%3E%20attributes.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016336.html">
   <LINK REL="Next"  HREF="016328.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.</H1>
    <B>Gert Driesen</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Validation%20for%20%3Cxsl%3Aoutput%3E%20attributes.&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.">gert.driesen at telenet.be
       </A><BR>
    <I>Sat Dec 24 13:25:56 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016336.html">[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
</A></li>
        <LI>Next message: <A HREF="016328.html">[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16325">[ date ]</a>
              <a href="thread.html#16325">[ thread ]</a>
              <a href="subject.html#16325">[ subject ]</a>
              <a href="author.html#16325">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>... and here's the patch ;-) 

Sorry for the noise !

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Gert Driesen [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">gert.driesen at telenet.be</A>] 
</I>&gt;<i> Sent: zaterdag 24 december 2005 19:24
</I>&gt;<i> To: 'Atsushi Eno'
</I>&gt;<i> Cc: '<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>'
</I>&gt;<i> Subject: RE: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> attributes.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: Atsushi Eno [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at ximian.com</A>] 
</I>&gt;<i> &gt; Sent: zaterdag 24 december 2005 17:27
</I>&gt;<i> &gt; To: Gert Driesen
</I>&gt;<i> &gt; Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> &gt; Subject: RE: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> &gt; attributes.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; It indeed is &quot;indent&quot; part matter. Anyways you don't have to touch
</I>&gt;<i> &gt; the code anymore. I fixed the bug. There is no failing NUnit tests
</I>&gt;<i> &gt; and no more regressions in standalone tests now.
</I>&gt;<i> 
</I>&gt;<i> It also applies to &quot;standalone&quot; and &quot;omit-xml-declaration&quot; 
</I>&gt;<i> attributes (see the new tests I added to XslTransformTests), 
</I>&gt;<i> and extranous attributes.
</I>&gt;<i> 
</I>&gt;<i> &gt; As I said, checking attributes on xsl:output and reject extraneous
</I>&gt;<i> &gt; ones is indeed good, so I didn't want to revert the entire changes.
</I>&gt;<i> 
</I>&gt;<i> We still needed some additional changes to achieve forwards 
</I>&gt;<i> compatibility. Patch attached.
</I>&gt;<i> 
</I>&gt;<i> &gt; So, now that all problems should have gone, I hope you have a merry
</I>&gt;<i> &gt; X'mas (it's a bit too late for me and Santa does not seem coming to
</I>&gt;<i> &gt; this bad boy ;-)
</I>&gt;<i> 
</I>&gt;<i> Lol
</I>&gt;<i> 
</I>&gt;<i> One more question: apart from lack of support for forwards 
</I>&gt;<i> compatibility (which is not directly related/limited to 
</I>&gt;<i> &quot;indent&quot; attribute), what was buggy about my change for 
</I>&gt;<i> indent attribute ?
</I>&gt;<i> 
</I>&gt;<i> Gert
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; From: Atsushi Eno [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at ximian.com</A>] 
</I>&gt;<i> &gt; &gt; &gt; Sent: zaterdag 24 december 2005 14:48
</I>&gt;<i> &gt; &gt; &gt; To: Gert Driesen
</I>&gt;<i> &gt; &gt; &gt; Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> &gt; &gt; &gt; Subject: Re: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> &gt; &gt; &gt; attributes.
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; Gert Driesen wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; From: Atsushi Eno [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at ximian.com</A>] 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; Sent: zaterdag 24 december 2005 11:16
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; To: Gert Driesen
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; Subject: Re: [Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; attributes.
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; Gert Driesen wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; I submitted my initial patch the the mono-dev list, and you 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; definitely
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; reviewed this part.
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; It is incorrect. It was the first reply I precisely 
</I>&gt;<i> &gt; &gt; &gt; pointed out that
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; HTML output is broken here, and after my reply you 
</I>&gt;<i> &gt; committed what
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; you haven't posted.
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; Our behaviour now matches that of MSFT, is that bad ? We 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; now have unit tests
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; that validate our behaviour and that of MSFT (as these unit 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; tests now pass
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; on both implementations).
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;  &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; You're saying that the MSFT implementation is not forward 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; compatible, so I'd
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; suggest filing a bug report with them. If they ever 
</I>&gt;<i> change the
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; implementation, you'll immediately know as the unit tests 
</I>&gt;<i> &gt; &gt; &gt; will start
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; failing.
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; The standalone tests deny what you say. Note that our 
</I>&gt;<i> &gt; &gt; &gt; standalone tests
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; are using whatever MS.NET outputs. Thus, there is 
</I>&gt;<i> &gt; &gt; &gt; something your code
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; does not match with MS.NET, or MS.NET has changed their 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; implementation.
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; (BTW I never said that MS implementation is not forward 
</I>&gt;<i> &gt; &gt; &gt; compatible.)
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; I guess MS does perform the same level of validation if the 
</I>&gt;<i> &gt; &gt; &gt; version is not
</I>&gt;<i> &gt; &gt; &gt; &gt; equal to 1.0.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; Problem is that I cannot seem to succeed in executing the 
</I>&gt;<i> &gt; &gt; &gt; standalone XSLT
</I>&gt;<i> &gt; &gt; &gt; &gt; test suite :(
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; Yes; Sorry for the inconvenience. It just doesn't build 
</I>&gt;<i> fine under
</I>&gt;<i> &gt; &gt; &gt; LF environment (you could still try cygwin environment as 
</I>&gt;<i> &gt; I as well
</I>&gt;<i> &gt; &gt; &gt; as Mainsoft guys used to do).
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; No problem, I'll tests it later (after x-mas).
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; I made a quick fix (attached) which is however untested under
</I>&gt;<i> &gt; &gt; &gt; Windows (this time) since the latest svn seems broken to run
</I>&gt;<i> &gt; &gt; &gt; NUnit tests.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I'm working on linux, so that's not a problem.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; After this patch there are still some failing tests
</I>&gt;<i> &gt; &gt; &gt; which incorrectly expects Plants.xml and Outputtest.xml 
</I>&gt;<i> (you will
</I>&gt;<i> &gt; &gt; &gt; understand what am saying here after seeing the test results).
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; If our implementation does not match that of MSFT, then you 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; can't have any
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; unit tests that allow you to discover this.
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt;&gt; Another reason that string is better than enumeration (like
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt;&gt; Yes/No/Default/Other I guess) is that it becomes a mess 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; when someone
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt;&gt; or ourself want to reuse the code to implement his or 
</I>&gt;<i> &gt; &gt; &gt; her own XSLT
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt;&gt; implementation that supports custom output.&#181;
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; Again, I just followed the behaviour of the MS 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; implementation here, and got
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; your approval for the validation changes.
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; What I asked is to fix the problem and commit. You might 
</I>&gt;<i> &gt; &gt; &gt; have thought
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; you *fixed* it, but it is not right. Thus am asking you to 
</I>&gt;<i> &gt; &gt; &gt; revert it.
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; I don't see any reason that you should stick to the 
</I>&gt;<i> &gt; broken changes.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; I'll see if I can find time to look into the broken 
</I>&gt;<i> &gt; &gt; &gt; changes. With broken I
</I>&gt;<i> &gt; &gt; &gt; &gt; mean broken compared to the MSFT implementation. 
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; Is that ok for you ? If not, it might be best to revert all 
</I>&gt;<i> &gt; &gt; &gt; validation
</I>&gt;<i> &gt; &gt; &gt; &gt; changes.
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; Unless you find something soon, no, please just revert &quot;indent&quot;
</I>&gt;<i> &gt; &gt; &gt; part from enum to string (it is the best that everyone 
</I>&gt;<i> &gt; would agree.)
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; It doesn't make sense to just revert the &quot;indent&quot; part. Forward
</I>&gt;<i> &gt; &gt; compatibility does not just apply to the intend attribute.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I've added some tests to XslTransformTests that &quot;prove&quot; this.  
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Can you tell me how I can access the XSLT version (as 
</I>&gt;<i> defined on the
</I>&gt;<i> &gt; &gt; &lt;stylesheet&gt; document element) from XslOutput to make the 
</I>&gt;<i> &gt; validations
</I>&gt;<i> &gt; &gt; optional if the version is different from &quot;1.0&quot; ?
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; I really must be missing something here. If you don't want 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; me to work on
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt;&gt; this, you could've said so from the start ...
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; There is no reason you should feel you are rejected. I 
</I>&gt;<i> &gt; just keep
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; pointing out that your fix is not right.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; Ok. Point taken.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; (I, of course, don't like the altitude that compatibility 
</I>&gt;<i> &gt; &gt; &gt; is God and
</I>&gt;<i> &gt; &gt; &gt; &gt;&gt; it can throw better behavior away. I'm not here to 
</I>&gt;<i> &gt; &gt; &gt; reinvent MS bugs.)
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; I agree with you. We should not implement MS bugs, but we 
</I>&gt;<i> &gt; &gt; &gt; should stick to
</I>&gt;<i> &gt; &gt; &gt; &gt; their implementation as close as possible (as this will 
</I>&gt;<i> &gt; &gt; &gt; allow tests to pass
</I>&gt;<i> &gt; &gt; &gt; &gt; on both implementations, therefore allowing us to catch 
</I>&gt;<i> &gt; &gt; &gt; regressions/changes
</I>&gt;<i> &gt; &gt; &gt; &gt; in both implementations).
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; I don't think you agreed with me on this case. You are still 
</I>&gt;<i> &gt; &gt; &gt; saying that
</I>&gt;<i> &gt; &gt; &gt; showing empty message is better than &quot;XSLT compile error&quot; 
</I>&gt;<i> &gt; &gt; &gt; because it is
</I>&gt;<i> &gt; &gt; &gt; MS compatible. Am not interested in &quot;general&quot; thoughts 
</I>&gt;<i> &gt; since I am sure
</I>&gt;<i> &gt; &gt; &gt; that we will never agree.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; You might be right on that one ! just kidding ;-)
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I agree that an empty message is not good, but you must 
</I>&gt;<i> &gt; also agree that
</I>&gt;<i> &gt; &gt; creating an Exception with an empty message is not good 
</I>&gt;<i> &gt; (and should not be
</I>&gt;<i> &gt; &gt; done anyway). So, I really think this is an academical 
</I>&gt;<i> &gt; discussion. You don't
</I>&gt;<i> &gt; &gt; want an XsltCompileException with no message ? Ok, then 
</I>&gt;<i> &gt; just pass in a
</I>&gt;<i> &gt; &gt; message in the ctor. Easy, no ?
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I agree that we should not duplicate bugs, but I don't 
</I>&gt;<i> &gt; think this is really
</I>&gt;<i> &gt; &gt; a bug ... but lets not start the discussion all over again ;-) lol
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Gert
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: xsl.diff
Type: application/octet-stream
Size: 3071 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051224/f51b7f2d/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051224/f51b7f2d/attachment.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016336.html">[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
</A></li>
	<LI>Next message: <A HREF="016328.html">[Mono-dev] [PATCH] Validation for &lt;xsl:output&gt; attributes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16325">[ date ]</a>
              <a href="thread.html#16325">[ thread ]</a>
              <a href="subject.html#16325">[ subject ]</a>
              <a href="author.html#16325">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
