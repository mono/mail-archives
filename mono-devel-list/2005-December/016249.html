<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] serialization of structured data in ArrayList
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20serialization%20of%20structured%20data%20in%20ArrayList&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016248.html">
   <LINK REL="Next"  HREF="016250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] serialization of structured data in ArrayList</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20serialization%20of%20structured%20data%20in%20ArrayList&In-Reply-To="
       TITLE="[Mono-dev] serialization of structured data in ArrayList">kornelpal at hotmail.com
       </A><BR>
    <I>Mon Dec 19 05:26:14 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016248.html">[Mono-dev] serialization of structured data in ArrayList
</A></li>
        <LI>Next message: <A HREF="016250.html">[Mono-dev] serialization of structured data in ArrayList
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16249">[ date ]</a>
              <a href="thread.html#16249">[ thread ]</a>
              <a href="subject.html#16249">[ subject ]</a>
              <a href="author.html#16249">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I never tried to serialize an ArrayList, but I think you had better to
serialize a strongly typed array of Car objects. An ArrayList is a too
complex structure. If you need an ArrayList on both sides of serialization,
you can use the constructor of ArrayList that takes an ICollection. Arrays
are ICollections so you can pass the received Car[] to the ArrayList
constructor.

Korn&#233;l

----- Original Message -----
From: &quot;mirek&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Miroslav.Binas at cnl.tuke.sk</A>&gt;
To: &quot;mirek&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Miroslav.Binas at cnl.tuke.sk</A>&gt;
Cc: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Sent: Monday, December 19, 2005 10:56 AM
Subject: Re: [Mono-dev] serialization of structured data in ArrayList


&gt;<i> when i compile the code below and i run it, i've got the following
</I>&gt;<i> exception:
</I>&gt;<i>
</I>&gt;<i> Unhandled Exception: System.InvalidOperationException: The type Car was
</I>&gt;<i> not expected. Use the XmlInclude or SoapInclude attribute to specify
</I>&gt;<i> types that are not known statically.
</I>&gt;<i>
</I>&gt;<i> can you help me, how can i solve it? how to serialize the non primitive
</I>&gt;<i> type (ArrayList with the instances of the Car class)?
</I>&gt;<i>
</I>&gt;<i> thanks
</I>&gt;<i>
</I>&gt;<i> mirek
</I>&gt;<i> mirek wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> try to compile this code:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> using System;
</I>&gt;&gt;<i> using System.IO;
</I>&gt;&gt;<i> using System.Collections;
</I>&gt;&gt;<i> using System.Xml.Serialization;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> public class Car
</I>&gt;&gt;<i> {
</I>&gt;&gt;<i>  public string type;
</I>&gt;&gt;<i>  public int price;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  public Car( string type, int price )
</I>&gt;&gt;<i>  {
</I>&gt;&gt;<i>     this.type = type;
</I>&gt;&gt;<i>     this.price = price;
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> public class Config
</I>&gt;&gt;<i> {
</I>&gt;&gt;<i>  static string filename = &quot;.configrc&quot;;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  public ArrayList list;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  public Config()
</I>&gt;&gt;<i>  {
</I>&gt;&gt;<i>     list = new ArrayList();
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  public void Add( string type, int price )
</I>&gt;&gt;<i>  {
</I>&gt;&gt;<i>     Car car = new Car( type, price );
</I>&gt;&gt;<i>     list.Add( car );
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  public void Save( Config config )
</I>&gt;&gt;<i>  {
</I>&gt;&gt;<i>     using (FileStream fs = new FileStream(filename, FileMode.Create)) {
</I>&gt;&gt;<i>        XmlSerializer serializer = new XmlSerializer(typeof(Config));
</I>&gt;&gt;<i>        serializer.Serialize(fs, config);
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> class App
</I>&gt;&gt;<i> {
</I>&gt;&gt;<i>  public static void Main()
</I>&gt;&gt;<i>  {
</I>&gt;&gt;<i>     Config config = new Config();
</I>&gt;&gt;<i>     config.Add( &quot;truck&quot;, 200 );
</I>&gt;&gt;<i>     config.Add( &quot;pickup&quot;, 100 );
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Console.WriteLine( &quot;hello&quot; );
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     config.Save( config );
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> mirek
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Robert Jordan wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> mirek wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> hello
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> i try to use serialization for storing of configuration in my app.
</I>&gt;&gt;&gt;&gt;<i> the problem is, i've got some data stored in ArrayList, and they are
</I>&gt;&gt;&gt;&gt;<i> not primitive types - they are instances of classes or some structs.
</I>&gt;&gt;&gt;&gt;<i> so it looks like this:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  [Serializable]
</I>&gt;&gt;&gt;&gt;<i>  public class Entry
</I>&gt;&gt;&gt;&gt;<i>  {
</I>&gt;&gt;&gt;&gt;<i>     public string type;
</I>&gt;&gt;&gt;&gt;<i>     public int price;
</I>&gt;&gt;&gt;&gt;<i>   }
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  [Serializable]
</I>&gt;&gt;&gt;&gt;<i>  public class CConfiguration
</I>&gt;&gt;&gt;&gt;<i>  {
</I>&gt;&gt;&gt;&gt;<i>     ...
</I>&gt;&gt;&gt;&gt;<i>     public ArrayList vehicle;
</I>&gt;&gt;&gt;&gt;<i>     ...
</I>&gt;&gt;&gt;&gt;<i>   }
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   // in my app...
</I>&gt;&gt;&gt;&gt;<i>   Entry e = new Entry();
</I>&gt;&gt;&gt;&gt;<i>   e.type = &quot;truck&quot;;
</I>&gt;&gt;&gt;&gt;<i>   e.price = 200;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   vehicle.Add( e );
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> but it doesnt work. how can i do that?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What doesn't work? Did your get an exception? If so, which one?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Robert
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> e-mail: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mirek at host.sk</A>
</I>&gt;<i> icq: 113397932
</I>&gt;<i> jabber: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mirek_b at jabber.sk</A>
</I>&gt;<i> homepage: <A HREF="http://www.intrak.sk/~binas">http://www.intrak.sk/~binas</A>
</I>&gt;<i>
</I>&gt;<i> english:
</I>&gt;<i> Please avoid sending me Word or PowerPoint attachments.
</I>&gt;<i> See <A HREF="http://www.fsf.org/philosophy/no-word-attachments.html">http://www.fsf.org/philosophy/no-word-attachments.html</A>
</I>&gt;<i>
</I>&gt;<i> slovak:
</I>&gt;<i> prosim, neposielajte mi prilohy vo formatoch .doc a .ppt (power point)
</I>&gt;<i> precitajte si <A HREF="http://www.fsf.org/philosophy/no-word-attachments.cs.html">http://www.fsf.org/philosophy/no-word-attachments.cs.html</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016248.html">[Mono-dev] serialization of structured data in ArrayList
</A></li>
	<LI>Next message: <A HREF="016250.html">[Mono-dev] serialization of structured data in ArrayList
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16249">[ date ]</a>
              <a href="thread.html#16249">[ thread ]</a>
              <a href="subject.html#16249">[ subject ]</a>
              <a href="author.html#16249">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
