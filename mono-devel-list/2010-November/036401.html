<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] WCF: Contracts with Interface hierarchy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20WCF%3A%20Contracts%20with%20Interface%20hierarchy&In-Reply-To=4CA2DEC1.90505%40veritas-vos-liberabit.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036399.html">
   <LINK REL="Next"  HREF="036402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] WCF: Contracts with Interface hierarchy</H1>
    <B>Karsten Fourmont</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20WCF%3A%20Contracts%20with%20Interface%20hierarchy&In-Reply-To=4CA2DEC1.90505%40veritas-vos-liberabit.com"
       TITLE="[Mono-dev] WCF: Contracts with Interface hierarchy">fourmont at gmx.de
       </A><BR>
    <I>Sun Nov 28 12:58:29 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="036399.html">[Mono-dev] [PATCH]
</A></li>
        <LI>Next message: <A HREF="036402.html">[Mono-dev] DLL -&gt; System.BadImageFormatException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36401">[ date ]</a>
              <a href="thread.html#36401">[ thread ]</a>
              <a href="subject.html#36401">[ subject ]</a>
              <a href="author.html#36401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Atsushi,

thank you for the &quot;WCF Interface Hierarchy&quot; fix. Works great...

well unless you have a Microsoft.NET client and a Mono server.

Then you get (in the Mono server):

System.ServiceModel.ActionNotSupportedException: Action 
'<A HREF="http://tempuri.org/IFoo/Foo'">http://tempuri.org/IFoo/Foo'</A> did not match any operations in the target 
contract   at 
System.ServiceModel.Dispatcher.ListenerLoopManager.FindEndpointDispatcher (
System.ServiceModel.Channels.Message message) [0x00000] in &lt;filename 
unknown&gt;:0
   at System.ServiceModel.Dispatcher.ListenerLoopManager.ProcessInput 
(IInputChan
nel input, System.ServiceModel.Channels.Message message) [0x00000] in 
&lt;filename
unknown&gt;:0

It seems the naming scheme differs.

I tested it with 2.8.1 and the System.ServiceModel.dll from daily builds 
(seems your patch didn't make it into 2.8.1). Hope it's not this 
combination that causes the issue.

Here's some testcode. Invoke without arguments using Mono to start the 
server and then with &quot;-client&quot; using MS.NET to reproduce the error. 
Runinng both client and server with Mono works fine.

------------8&lt;-----------------------
using System;
using System.ServiceModel;

namespace TestServer
{
     [ServiceContract]
     interface IServiceInterface : IFoo
     {
     }
     [ServiceContract]
     interface IFoo : IBar
     {
         [OperationContract] string Foo();
     }

     [ServiceContract]
     interface IBar
     {
         [OperationContract] string FooBar();
     }

     class TestWcf : IServiceInterface
     {
         public string FooBar()
         {
             return &quot;FooBar&quot;;
         }

         public string Foo()
         {
             return &quot;Foo&quot;;
         }

         private static readonly Uri addrress = new 
Uri(&quot;net.<A HREF="tcp://localhost:9999/test&quot;">tcp://localhost:9999/test&quot;</A>);

         public static ServiceHost TestServer()
         {
             var host = new ServiceHost(typeof(TestWcf), addrress);
             host.AddServiceEndpoint(typeof(IServiceInterface), new 
NetTcpBinding(SecurityMode.None), addrress);
             host.Open();
             return host;
         }

         public static void TestClient()
         {
             ChannelFactory&lt;IServiceInterface&gt; factory = new 
ChannelFactory&lt;IServiceInterface&gt;(new NetTcpBinding(SecurityMode.None), 
addrress.ToString());
             var channel = factory.CreateChannel();
             Console.WriteLine(channel.Foo());
             Console.WriteLine(channel.FooBar());
             factory.Close();
         }

         static void Main(string[] args)
         {
             if (args.Length &gt; 0 &amp;&amp; args[0] == &quot;-client&quot;)
             {
                 Console.WriteLine(&quot;Running client&quot;);
                 TestClient();
             }
             else
             {
                 TestServer();
                 Console.WriteLine(&quot;Running server. Hit key&quot;);
                 Console.ReadKey();
             }
         }

     }
}



































</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036399.html">[Mono-dev] [PATCH]
</A></li>
	<LI>Next message: <A HREF="036402.html">[Mono-dev] DLL -&gt; System.BadImageFormatException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36401">[ date ]</a>
              <a href="thread.html#36401">[ thread ]</a>
              <a href="subject.html#36401">[ subject ]</a>
              <a href="author.html#36401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
