<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Deadlock Detection in Mono Libraries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Deadlock%20Detection%20in%20Mono%20Libraries&In-Reply-To=1289226792.18928.39.camel%40lina.magi.jprl.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036255.html">
   <LINK REL="Next"  HREF="036254.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Deadlock Detection in Mono Libraries</H1>
    <B>Arun K</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Deadlock%20Detection%20in%20Mono%20Libraries&In-Reply-To=1289226792.18928.39.camel%40lina.magi.jprl.com"
       TITLE="[Mono-dev] Deadlock Detection in Mono Libraries">arun.k at iiitb.net
       </A><BR>
    <I>Tue Nov  9 02:11:18 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="036255.html">[Mono-dev] Deadlock Detection in Mono Libraries
</A></li>
        <LI>Next message: <A HREF="036254.html">[Mono-dev] USB Support in Mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36260">[ date ]</a>
              <a href="thread.html#36260">[ thread ]</a>
              <a href="subject.html#36260">[ subject ]</a>
              <a href="author.html#36260">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Pryor,

Thanks for the info and the reference.
The version of mono I used is 2.4.2.3 build 2008, but since our analysis is
at a preliminary stage, the version is of not much concern.

At the moment we only look at methods that are decorated with the
MethodImplOptions.
Synchronized attribute. Going further we would be looking at the
'lock(object)' constructs as well in our analysis. I will update you on my
future findings.
Thanks you once again.

-Arun


On Mon, Nov 8, 2010 at 8:03 PM, Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jonpryor at vt.edu</A>&gt; wrote:

&gt;<i> On Mon, 2010-11-08 at 07:35 +0530, Arun K wrote:
</I>&gt;<i> &gt; I am performing a static analysis on the mono 2.4.x libraries.
</I>&gt;<i>
</I>&gt;<i> 2.4.x?  How old!  (We're up to 2.8 now...)
</I>&gt;<i>
</I>&gt;<i> &gt; The aim of this analysis is to detect potential deadlock scenarios
</I>&gt;<i> &gt; within the libraries. As a first step, I wanted to find if any
</I>&gt;<i> &gt; synchronized method invokes another synchronized method either
</I>&gt;<i> &gt; directly or eventually
</I>&gt;<i>
</I>&gt;<i> Thus, the *most* important question: How do you define &quot;synchronized&quot;?
</I>&gt;<i>
</I>&gt;<i> My guess is that your definition is a method with the attribute:
</I>&gt;<i>
</I>&gt;<i>        [MethodImpl (MethodImplOptions.Synchronized)]
</I>&gt;<i>
</I>&gt;<i> If this is the case, the problem you're encountering is that this is
</I>&gt;<i> explicitly counter to .NET documentation, e.g. [0, 1]:
</I>&gt;<i>
</I>&gt;<i>        Generally, it is best to avoid locking on a public type, or on
</I>&gt;<i>        object instances beyond the control of your application. For
</I>&gt;<i>        example, lock(this) can be problematic if the instance can be
</I>&gt;<i>        accessed publicly, because code beyond your control may lock on
</I>&gt;<i>        the object as well. This could create deadlock situations where
</I>&gt;<i>        two or more threads wait for the release of the same object.
</I>&gt;<i>
</I>&gt;<i> .NET guidelines advocate declaring a *private* object instance and
</I>&gt;<i> locking on that, instead of using Synchronized methods. [2]
</I>&gt;<i>
</I>&gt;<i> In short, if you see [MethodImpl (MethodImplOptions.Synchronized)],
</I>&gt;<i> you're either looking at compatibility with .NET, or you're looking at a
</I>&gt;<i> probable bug.
</I>&gt;<i>
</I>&gt;<i>  - Jon
</I>&gt;<i>
</I>&gt;<i> [0] <A HREF="http://msdn.microsoft.com/en-us/library/ms173179.aspx">http://msdn.microsoft.com/en-us/library/ms173179.aspx</A>
</I>&gt;<i> [1] <A HREF="http://msdn.microsoft.com/en-us/library/ms182290(VS.80">http://msdn.microsoft.com/en-us/library/ms182290(VS.80</A>).aspx&lt;<A HREF="http://msdn.microsoft.com/en-us/library/ms182290%28VS.80%29.aspx">http://msdn.microsoft.com/en-us/library/ms182290%28VS.80%29.aspx</A>&gt;
</I>&gt;<i> [2] My guess is that the only reason you can lock on System.Object and
</I>&gt;<i> not some more restricted type is for Java compatibility...which is the
</I>&gt;<i> ~same reason that .NET arrays are covariant.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101109/ba99d75f/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101109/ba99d75f/attachment.html</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036255.html">[Mono-dev] Deadlock Detection in Mono Libraries
</A></li>
	<LI>Next message: <A HREF="036254.html">[Mono-dev] USB Support in Mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36260">[ date ]</a>
              <a href="thread.html#36260">[ thread ]</a>
              <a href="subject.html#36260">[ subject ]</a>
              <a href="author.html#36260">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
