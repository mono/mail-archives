<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] String::Equals Performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20String%3A%3AEquals%20Performance&In-Reply-To=000b01c46156%246d447060%246464a8c0%40ansuria">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006808.html">
   <LINK REL="Next"  HREF="006814.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] String::Equals Performance</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20String%3A%3AEquals%20Performance&In-Reply-To=000b01c46156%246d447060%246464a8c0%40ansuria"
       TITLE="[Mono-devel-list] String::Equals Performance">bmaurer at ximian.com
       </A><BR>
    <I>Sat Jul  3 20:25:20 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="006808.html">[Mono-devel-list] OpenOffice and Mono C#
</A></li>
        <LI>Next message: <A HREF="006814.html">[Mono-devel-list] String::Equals Performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6809">[ date ]</a>
              <a href="thread.html#6809">[ thread ]</a>
              <a href="subject.html#6809">[ subject ]</a>
              <a href="author.html#6809">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>(I assume you did not mean to continue the OOo thread)

On Sat, 2004-07-03 at 19:35, Andreas Nahr wrote:
&gt;<i> this is a patch to speedup the Equals - Function of String.
</I>&gt;<i> Perfomance gain is from about 10% for a small string with few needed
</I>&gt;<i> compares to more that 300% for a string with 100 chars length that is equal.
</I>
One thing that I found while working on this function was that we often
had mispredicted branches because of the

if (...)
   return false

construct. One thing you might want to try is replacing that with:

if (...)
	goto rfalse;

...

rfalse: return false;

Just doing that got me a fairly large boost on the existing code base.

Also, please attach your benchmarks. I would like to be able to
reproduce your numbers on my box.

-- Ben 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006808.html">[Mono-devel-list] OpenOffice and Mono C#
</A></li>
	<LI>Next message: <A HREF="006814.html">[Mono-devel-list] String::Equals Performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6809">[ date ]</a>
              <a href="thread.html#6809">[ thread ]</a>
              <a href="subject.html#6809">[ subject ]</a>
              <a href="author.html#6809">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
