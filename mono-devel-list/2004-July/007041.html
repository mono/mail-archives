<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] make install problems on gentoo system
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20make%20install%20problems%20on%20gentoo%20system&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007082.html">
   <LINK REL="Next"  HREF="007043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] make install problems on gentoo system</H1>
    <B>Chris Nuernberger</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20make%20install%20problems%20on%20gentoo%20system&In-Reply-To="
       TITLE="[Mono-devel-list] make install problems on gentoo system">cnuernberger at extendthereach.com
       </A><BR>
    <I>Sat Jul 17 17:21:32 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007082.html">[Mono-devel-list] System.Web exception
</A></li>
        <LI>Next message: <A HREF="007043.html">[Mono-devel-list] make install problems on gentoo system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7041">[ date ]</a>
              <a href="thread.html#7041">[ thread ]</a>
              <a href="subject.html#7041">[ subject ]</a>
              <a href="author.html#7041">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks, simply using prefix=/usr worked like a charm.

Whether I should or shouldn't have to edit any makefile.am files is
irrelevant; automake fails with errors having to do with the '!'
conditionals if I don't.  The syntax is completely correct according to the
GNU documentation, but the automake that gets installed on gentoo systems if
you keep them updated chokes with three different makefile.am files.  The
one in mono/mini, one in runtime, and one other.  Here are the errors I
get...
./autogen.sh --prefix=/usr
Running libtoolize...
Running aclocal  ...
Running autoheader...
autoheader-2.59: WARNING: Using auxiliary files such as `acconfig.h',
`config.h.bot'
autoheader-2.59: WARNING: and `config.h.top', to define templates for
`config.h.in'
autoheader-2.59: WARNING: is deprecated and discouraged.
autoheader-2.59: 
autoheader-2.59: WARNING: Using the third argument of `AC_DEFINE' and
autoheader-2.59: WARNING: `AC_DEFINE_UNQUOTED' allows to define a template
without
autoheader-2.59: WARNING: `acconfig.h':
autoheader-2.59: 
autoheader-2.59: WARNING:   AC_DEFINE([NEED_FUNC_MAIN], 1,
autoheader-2.59: 		[Define if a function `main' is needed.])
autoheader-2.59: 
autoheader-2.59: WARNING: More sophisticated templates can also be produced,
see the
autoheader-2.59: WARNING: documentation.
Running automake --gnu  ...
mono/mini/Makefile.am:173: invalid unused variable name:
`nodist_libmono_la_SOURCES'
runtime/Makefile.am:39: endif without if
runtime/net_2_0/Makefile.am:79: warning: automake does not support
conditional definition of gac_assemblies in EXTRA_DIST
runtime/net_2_0/Makefile.am:19: warning: automake does not support
conditional definition of MONO_CSHARP_DEBUGGER in gac_assemblies_list
runtime/net_2_0/Makefile.am:77: warning: automake does not support
conditional definition of local_mscorlib in corlib_DATA
**Error**: automake failed.

versions of stuff are...
automake/aclocal: 1.4-p6
autoheader/autoconf: 2.59 

Now if I fix those problems (don't ask how, just local fixes), and run make
bootstrap, I come across these errors:
creating libmono.la
(cd .libs &amp;&amp; rm -f libmono.la &amp;&amp; ln -s ../libmono.la
libmono.la)
/bin/sh ../../libtool --mode=link gcc  -g -O2
-fno-strict-aliasing -g -Wall -Wunused
-Wmissing-prototypes -Wmissing-declarations
-Wstrict-prototypes  -Wmissing-prototypes
-Wnested-externs -Wpointer-arith -Wno-cast-qual
-Wcast-align -Wwrite-strings  -o mono -export-dynamic
main.o libmono.la                      -pthread
-lgthread-2.0 -lglib-2.0                      
-Wl,--export-dynamic -lgmodule-2.0 -ldl -lglib-2.0  
-lm                -lpthread -lm -L/usr/lib -licui18n
-licuuc -licudata -lpthread -lm -lnsl -lpthread -lm
-lrt
gcc -g -O2 -fno-strict-aliasing -g -Wall -Wunused
-Wmissing-prototypes -Wmissing-declarations
-Wstrict-prototypes -Wmissing-prototypes
-Wnested-externs -Wpointer-arith -Wno-cast-qual
-Wcast-align -Wwrite-strings -o .libs/mono main.o
-Wl,--export-dynamic -Wl,--export-dynamic 
./.libs/libmono.so -L/usr/lib
/usr/lib/libgthread-2.0.so /usr/lib/libgmodule-2.0.so
-ldl /usr/lib/libglib-2.0.so -licui18n -licuuc
-licudata -lnsl -lpthread -lm -lrt
./.libs/libmono.so: undefined reference to `mono_burg_init'
./.libs/libmono.so: undefined reference to `mono_burg_nts'
./.libs/libmono.so: undefined reference to `mono_burg_kids'
./.libs/libmono.so: undefined reference to `mono_burg_label'
./.libs/libmono.so: undefined reference to `mono_burg_rule'
./.libs/libmono.so: undefined reference to `mono_burg_func'
./.libs/libmono.so: undefined reference to `mono_burg_arity'
collect2: ld returned 1 exit status
make[2]: *** [mono] Error 1
make[2]: Leaving directory
`/home/chris/dev/csharp/mono/mono/mini'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory
`/home/chris/dev/csharp/mono/mono'
make: *** [mono-do-runtime-only] Error 1

Now I fix these errors by editing the Makefile.am (again) to ensure that
inssel.c and .h are compiled into the mono shared lib (probably related to
the fix I did for:
mono/mini/Makefile.am:173: invalid unused variable name:
`nodist_libmono_la_SOURCES'
) and then things compile and I can install.  

Then it installs and works fine.  sweet.  Looks like the only real problem
is something to do with automake. 

Chris

-----Original Message-----
From: Todd Berman [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">tberman at off.net</A>]
Sent: Saturday, July 17, 2004 11:20 AM
To: Chris Nuernberger
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-devel-list] make install problems on gentoo system


On Sat, 2004-07-17 at 11:17 -0600, Chris Nuernberger wrote:
&gt;<i> I can (after editing some of the makefile.am files) build completely from
</I>&gt;<i> CVS on my gentoo system.  The works correctly, but whatever scripts are
</I>&gt;<i> generating files are not working quite correctly, because the mcs script
</I>&gt;<i> points to the wrong location.  Here is my configure line:
</I>&gt;<i> ./configure --prefix=/usr --libdir=/usr/lib --bindir=/usr/bin
</I>
build with ./configure --prefix=/usr

and you shouldnt need to edit any of the makefile.am files.

--Todd

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007082.html">[Mono-devel-list] System.Web exception
</A></li>
	<LI>Next message: <A HREF="007043.html">[Mono-devel-list] make install problems on gentoo system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7041">[ date ]</a>
              <a href="thread.html#7041">[ thread ]</a>
              <a href="subject.html#7041">[ subject ]</a>
              <a href="author.html#7041">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
