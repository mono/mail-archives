<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Code Access Security (CAS) Plans
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Code%20Access%20Security%20%28CAS%29%20Plans&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007173.html">
   <LINK REL="Next"  HREF="007174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Code Access Security (CAS) Plans</H1>
    <B>Eran Sandler</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Code%20Access%20Security%20%28CAS%29%20Plans&In-Reply-To="
       TITLE="[Mono-devel-list] Code Access Security (CAS) Plans">esandler at netvision.net.il
       </A><BR>
    <I>Sat Jul 24 06:58:48 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007173.html">[Mono-devel-list] Code Access Security (CAS) Plans
</A></li>
        <LI>Next message: <A HREF="007174.html">[Mono-devel-list] Security enhancement in Framework 2.0 Plans
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7180">[ date ]</a>
              <a href="thread.html#7180">[ thread ]</a>
              <a href="subject.html#7180">[ subject ]</a>
              <a href="author.html#7180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sebastien,

I'd like to contribute to the CAS plans.

I have extensive experience in .NET on Windows (dating back to the early
beta days of the .NET framework) and also exntesive knowledge in Windows'
APIs. I'm a bit new to programming in Linux so it will be a good oppertunity
to write some Linux code :-)

I have dealt with CAS in MS .NET and am familiar with the concepts and some
of the implementation.

I wanted to contribute to Mono a few times before but someone always beat me
up to take responsibility to a certain code part :-)

Contact me and tell me if there is anything special you think I should do,
otherwise I'll just pick up a topic from the ones you have outlined and see
what I can do to help in it :-)

Eran Sandler

----- Original Message -----
From: &quot;S&#233;bastien Pouliot&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at videotron.ca</A>&gt;
To: &quot;Mono-Devel-List&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Sent: Friday, July 23, 2004 9:23 PM
Subject: [Mono-devel-list] Code Access Security (CAS) Plans


&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> Here's the high-level plan to implement CAS in the next releases of Mono.
</I>&gt;<i> Comments and contributors are welcome :-).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> * Goals
</I>&gt;<i>         The first version of CAS, to be included in Mono 1.2, will
</I>&gt;<i>         probably be incomplete because a great deal of time will be
</I>&gt;<i>         required to ensure that all required permissions are placed
</I>&gt;<i>         correctly in the class libraries [1].
</I>&gt;<i>
</I>&gt;<i>         Mono 1.2 goal is to include, as much as possible, a completely
</I>&gt;<i>         working CAS engine - which will be available as a preview
</I>&gt;<i>         (default to off). In order to reduce the rework required for Fx
</I>&gt;<i>         2.0 features later (for Mono 2.0) they will be added (and hidden
</I>&gt;<i>         when required) immediately - unless they do not affect the core
</I>&gt;<i>         engine.
</I>&gt;<i>
</I>&gt;<i>         Mono 2.0 goal for CAS will be optimizations and completeness.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> * Dependencies
</I>&gt;<i>
</I>&gt;<i>         CAS relies on:
</I>&gt;<i>                 * valid and verified assemblies - unsafe and unmanaged
</I>code
&gt;<i> can
</I>&gt;<i>         bypass CAS (which is why they require full-trust to execute);
</I>&gt;<i>                 * cooperation from the JIT when inlining methods (i.e.
</I>&gt;<i> loosing
</I>&gt;<i>         stack frames);
</I>&gt;<i>
</I>&gt;<i> CAS also share some infrastructure with some other Fx features,
</I>&gt;<i>         like:
</I>&gt;<i>
</I>&gt;<i> * Strongnames
</I>&gt;<i> * not really CAS related (but reused by CAS)
</I>&gt;<i>                 * but completely part of Mono 1.0 either ;)
</I>&gt;<i>
</I>&gt;<i>         * Role Based Access Control (RBAC)
</I>&gt;<i> * Almost (except Windows 2003 specific stuff) complete
</I>&gt;<i>                 wrt 1.1 API (see System.Security.Principal)
</I>&gt;<i> * Only missing declarative permissions support, which
</I>&gt;<i>                 involves decoding security attributes and producing
</I>&gt;<i>                 appropriate code
</I>&gt;<i>                 <A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=52693">http://bugzilla.ximian.com/show_bug.cgi?id=52693</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> * Main Work Items
</I>&gt;<i>
</I>&gt;<i>         * Evidences
</I>&gt;<i>
</I>&gt;<i>         The runtime must expose evidences for loaded assemblies (and
</I>&gt;<i>         application domains). The exposed evidences can vary by host
</I>&gt;<i>         (e.g. some evidences are only used for web applications - hence
</I>&gt;<i>         only a web server needs to supply it).
</I>&gt;<i>         <A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=53548">http://bugzilla.ximian.com/show_bug.cgi?id=53548</A>
</I>&gt;<i>
</I>&gt;<i>         Evidences includes (in Fx 1.1):
</I>&gt;<i>                 * ApplicationDirectory;
</I>&gt;<i>                 * Hash (our current implementation isn't correct);
</I>&gt;<i>                 * PermissionRequestEvidence;
</I>&gt;<i>         * Publisher (Authenticode);
</I>&gt;<i>                 * Site;
</I>&gt;<i>                 * StrongName;
</I>&gt;<i>                 * Url;
</I>&gt;<i>                 * Zone
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         * Policy Resolution
</I>&gt;<i>
</I>&gt;<i>         This occurs when policy files (XML) are resolved with the
</I>&gt;<i>         supplied evidences. This results in a set of granted (and
</I>&gt;<i>         denied) permissions for the assembly.
</I>&gt;<i>
</I>&gt;<i>         Some command line tools (caspol) and, hopefully, some
</I>&gt;<i>         (contributed) GUI tools are gonna be needed to edit security
</I>&gt;<i>         policies.
</I>&gt;<i>
</I>&gt;<i>         Most of code for dealing with policies is located in the
</I>&gt;<i>         namespaces:
</I>&gt;<i>                * System.Security
</I>&gt;<i>                * System.Security.Policy
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> * Stack-walk
</I>&gt;<i>
</I>&gt;<i>         Each CAS demand requires a stack walk to ensure every callers
</I>&gt;<i>         has the required permissions before accessing a protected
</I>&gt;<i>         resource. Stack walks must also deal with fun stuff like
</I>&gt;<i>         threads, delegates and app-domains.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         * Code Identity
</I>&gt;<i>
</I>&gt;<i> Code Identity Permissions are a good starting point because they
</I>&gt;<i>         are assembly level permissions (i.e. they do not requires to be
</I>&gt;<i>         implemented everywhere in all assemblies). They are also the
</I>&gt;<i>         most common, and most understood, CAS feature (as they have been
</I>&gt;<i>         in use for mobile code for many years).
</I>&gt;<i>
</I>&gt;<i>         Code identity permissions contains &quot;Identity&quot; in their names and
</I>&gt;<i>         includes (very similar to evidences ;):
</I>&gt;<i>                 * PublisherIdentityPermission;
</I>&gt;<i>                 * SiteIdentityPermission;
</I>&gt;<i>                 * StrongNameIdentityPermission;
</I>&gt;<i>                 * UrlIdentityPermission;
</I>&gt;<i>                 * ZoneIdentityPermission
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         * Attributes
</I>&gt;<i>
</I>&gt;<i>         There are also some &quot;normal&quot; (non security) attributes that
</I>&gt;<i>         affects code generation (JIT) and the runtime:
</I>&gt;<i>
</I>&gt;<i> * AllowPartiallyTrustedCallersAttribute: Add LinkDemand
</I>&gt;<i>                 for FullTrust for strongnamed assemblies that do not
</I>&gt;<i>                 have the attribute.
</I>&gt;<i>
</I>&gt;<i> * SuppressUnmanagedCodeSecurityAttribute: JIT (link)
</I>&gt;<i>                 check but no runtime check for unmanaged calls.
</I>&gt;<i>                 * UnverifiableCodeAttribute: Should be present when
</I>&gt;<i>                 unverifiable code is present in an assembly.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         * Class library
</I>&gt;<i>
</I>&gt;<i>         All other (non-identity permissions) also need to be implemented
</I>&gt;<i>         and used to protect their resources.
</I>&gt;<i>
</I>&gt;<i>         Most of the permissions resides in corlib, in
</I>&gt;<i>         System.Security.Permissions namespace, but there are some
</I>&gt;<i>         Permission-derived classes in almost all other assemblies.
</I>&gt;<i>
</I>&gt;<i> Other classes, mainly in System.Security and
</I>&gt;<i>         System.Security.Policy namespaces are also required for the CAS
</I>&gt;<i>         engine, while others may not be CAS-related.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> * Testing framework
</I>&gt;<i>
</I>&gt;<i>         Implementing CAS will requires far more code to test it properly
</I>&gt;<i>         than to implement it.
</I>&gt;<i>
</I>&gt;<i>         * Unit tests
</I>&gt;<i>
</I>&gt;<i> NUnit can be used to test individual classes - outside their CAS
</I>&gt;<i>         usage. This includes validating IPermission's Interset,
</I>&gt;<i>         IsSubsetOf and Union and the XML [de|en]coding.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         * Policy-based tests
</I>&gt;<i>
</I>&gt;<i>         Ideally a (relatively) small set of assemblies should be
</I>&gt;<i>         executed with different policies (resulting in different
</I>&gt;<i>         results).
</I>&gt;<i>
</I>&gt;<i>         This approach may not work well with NUnit (as the results will
</I>&gt;<i>         be different depending of the policies). A scripted approach,
</I>&gt;<i>         generating XML/HTML results, is a possible alternative.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> * Guidelines
</I>&gt;<i>
</I>&gt;<i>         Finally some guidelines will need to be published to help all
</I>&gt;<i>         mono contributors using CAS, even indirectly, effectively. For
</I>&gt;<i>         examples:
</I>&gt;<i>
</I>&gt;<i>         * How to implement and test IPermission classes (right now
</I>&gt;<i>         classes have different patterns);
</I>&gt;<i>
</I>&gt;<i>         * When/How to use the framework permissions; and
</I>&gt;<i>
</I>&gt;<i>         * Correct use of CodeAccessPermission.Assert
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> * Contributors
</I>&gt;<i>         As you can see CAS requires all kind of skills (JIT, runtime,
</I>&gt;<i>         class library, tests, CLI/GUI tools...). Some people have
</I>&gt;<i>         expressed interest in helping to implement CAS.
</I>&gt;<i>
</I>&gt;<i>         * Benjamin Wootton (depends on new job)
</I>&gt;<i>         * Alexis Christoforides
</I>&gt;<i>
</I>&gt;<i>         Other people are welcomed.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> * Notes
</I>&gt;<i>
</I>&gt;<i> [1] Because of the internal differences between the Mono .NET
</I>&gt;<i> implementation and Microsoft .NET implementation, permissions will
</I>&gt;<i> probably be a little different (as the resource to protect won't be
</I>&gt;<i> exactly the sames). We can &quot;over&quot;-protect some resources to match MS
</I>&gt;<i> implementation (e.g. require unmanaged code permission even if our code
</I>&gt;<i> doesn't use unmanaged code) but we cannot &quot;under&quot;-protect resources
</I>&gt;<i> (e.g. the opposite case). Otherwise CAS would be useless.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sebastien Pouliot
</I>&gt;<i> <A HREF="http://pages.infinit.net/ctech/poupou.html">http://pages.infinit.net/ctech/poupou.html</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007173.html">[Mono-devel-list] Code Access Security (CAS) Plans
</A></li>
	<LI>Next message: <A HREF="007174.html">[Mono-devel-list] Security enhancement in Framework 2.0 Plans
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7180">[ date ]</a>
              <a href="thread.html#7180">[ thread ]</a>
              <a href="subject.html#7180">[ subject ]</a>
              <a href="author.html#7180">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
