<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Patch for Thread.GetNamedDataSlot
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patch%20for%20Thread.GetNamedDataSlot&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007004.html">
   <LINK REL="Next"  HREF="007011.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Patch for Thread.GetNamedDataSlot</H1>
    <B>S&#233;bastien Robitaille</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patch%20for%20Thread.GetNamedDataSlot&In-Reply-To="
       TITLE="[Mono-devel-list] Patch for Thread.GetNamedDataSlot">sebastien.robitaille at croesus.com
       </A><BR>
    <I>Wed Jul 14 21:14:15 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007004.html">[Mono-devel-list] Serial port access under Linux?
</A></li>
        <LI>Next message: <A HREF="007011.html">[Mono-devel-list] Patch for Thread.GetNamedDataSlot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7009">[ date ]</a>
              <a href="thread.html#7009">[ thread ]</a>
              <a href="subject.html#7009">[ subject ]</a>
              <a href="author.html#7009">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

here is another patch to review.

The problem: Thread.GetNamedDataSlot is not thread-safe. There is an exception thrown if multiple threads are calling this method at
the same time.

The exception is also thrown when using Remoting with multiple threads
(because GetNamedDataSlot is used by
System.Runtime.Remoting.Messaging.CallContext:SetCurrentCallContext)

The proposed patch was also added to the bug report #61582 in the &quot;diff -u&quot; format :-)

Regards
S&#233;bas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Thread.cs.patch
Type: application/octet-stream
Size: 958 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040714/ba1d4382/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040714/ba1d4382/attachment.obj</A> 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: GetNamedDataSlotTest.cs
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040714/ba1d4382/attachment.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040714/ba1d4382/attachment.pl</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007004.html">[Mono-devel-list] Serial port access under Linux?
</A></li>
	<LI>Next message: <A HREF="007011.html">[Mono-devel-list] Patch for Thread.GetNamedDataSlot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7009">[ date ]</a>
              <a href="thread.html#7009">[ thread ]</a>
              <a href="subject.html#7009">[ subject ]</a>
              <a href="author.html#7009">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
