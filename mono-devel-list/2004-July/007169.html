<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] some bogus code that makes mcs throw an exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20some%20bogus%20code%20that%20makes%20mcs%20throw%20an%20exception&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007099.html">
   <LINK REL="Next"  HREF="007096.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] some bogus code that makes mcs throw an exception</H1>
    <B>Sean Neakums</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20some%20bogus%20code%20that%20makes%20mcs%20throw%20an%20exception&In-Reply-To="
       TITLE="[Mono-devel-list] some bogus code that makes mcs throw an exception">sneakums at zork.net
       </A><BR>
    <I>Wed Jul 21 06:59:34 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007099.html">[Mono-devel-list] System.Data indexes redesign
</A></li>
        <LI>Next message: <A HREF="007096.html">[Mono-devel-list] Idea: Bittorrent and Mono.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7169">[ date ]</a>
              <a href="thread.html#7169">[ thread ]</a>
              <a href="subject.html#7169">[ subject ]</a>
              <a href="author.html#7169">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>$ dpkg -s mono-mcs | grep ^Version:
Version: 1.0-1
$ mcs --version
Mono C# compiler version 1.0.0.0
$ cat foo.cs
using System;
using System.Collections;

class foo {
	private static void Up(Hashtable h, String x, String y)
	{
		try {
			h[x + &quot;/&quot; + y] = h[x + &quot;/&quot; + y]++;
		} catch {
			h[x + &quot;/&quot; + y] = 1;
		}
	}

	public static void Main()
	{
		Hashtable y = new Hashtable ();
		Up(y, &quot;foo&quot;, &quot;bar&quot;);
		Up(y, &quot;foo&quot;, &quot;bar&quot;);
	}
}
$ mcs foo.cs
Exception caught by the compiler while compiling:
   Block that caused the problem begin at: foo.cs: (5)
                     Block being compiled: [foo.cs: (7),foo.cs: (9)]
System.InvalidCastException: Cannot cast from source type to destination type.
	in StringConcat.Emit (Mono.CSharp.EmitContext)
	in EmptyCast.Emit (Mono.CSharp.EmitContext)
	in Argument.Emit (Mono.CSharp.EmitContext)
	in Invocation.EmitArguments (Mono.CSharp.EmitContext, System.Reflection.MethodBase, System.Collections.ArrayList)
	in Invocation.EmitCall (Mono.CSharp.EmitContext, bool, bool, Mono.CSharp.Expression, System.Reflection.MethodBase, System.Collections.ArrayList, Mono.CSharp.Location)
	in IndexerAccess.EmitAssign (Mono.CSharp.EmitContext, Mono.CSharp.Expression)
	in UnaryMutator.EmitCode (Mono.CSharp.EmitContext, bool)
	in UnaryMutator.Emit (Mono.CSharp.EmitContext)
	in Argument.Emit (Mono.CSharp.EmitContext)
	in Invocation.EmitArguments (Mono.CSharp.EmitContext, System.Reflection.MethodBase, System.Collections.ArrayList)
	in Invocation.EmitCall (Mono.CSharp.EmitContext, bool, bool, Mono.CSharp.Expression, System.Reflection.MethodBase, System.Collections.ArrayList, Mono.CSharp.Location)
	in IndexerAccess.EmitAssign (Mono.CSharp.EmitContext, Mono.CSharp.Expression)
	in Assign.Emit (Mono.CSharp.EmitContext, bool)
	in Assign.EmitStatement (Mono.CSharp.EmitContext)
	in StatementExpression.DoEmit (Mono.CSharp.EmitContext)
	in Statement.Emit (Mono.CSharp.EmitContext)
	in Block.DoEmit (Mono.CSharp.EmitContext)
	in Block.Emit (Mono.CSharp.EmitContext)
	in Try.DoEmit (Mono.CSharp.EmitContext)
	in Statement.Emit (Mono.CSharp.EmitContext)
	in Block.DoEmit (Mono.CSharp.EmitContext)
	in Block.Emit (Mono.CSharp.EmitContext)
	in EmitContext.EmitTopBlock (Mono.CSharp.Block, Mono.CSharp.InternalParameters, Mono.CSharp.Location)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007099.html">[Mono-devel-list] System.Data indexes redesign
</A></li>
	<LI>Next message: <A HREF="007096.html">[Mono-devel-list] Idea: Bittorrent and Mono.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7169">[ date ]</a>
              <a href="thread.html#7169">[ thread ]</a>
              <a href="subject.html#7169">[ subject ]</a>
              <a href="author.html#7169">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
