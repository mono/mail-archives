<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] String::Equals Performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20String%3A%3AEquals%20Performance&In-Reply-To=002001c46201%2484524510%246464a8c0%40ansuria">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006821.html">
   <LINK REL="Next"  HREF="006815.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] String::Equals Performance</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20String%3A%3AEquals%20Performance&In-Reply-To=002001c46201%2484524510%246464a8c0%40ansuria"
       TITLE="[Mono-devel-list] String::Equals Performance">bmaurer at ximian.com
       </A><BR>
    <I>Sun Jul  4 16:20:28 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="006821.html">[Mono-devel-list] String::Equals Performance
</A></li>
        <LI>Next message: <A HREF="006815.html">[Mono-devel-list] OpenOffice and Mono C#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6822">[ date ]</a>
              <a href="thread.html#6822">[ thread ]</a>
              <a href="subject.html#6822">[ subject ]</a>
              <a href="author.html#6822">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2004-07-04 at 16:00, Andreas Nahr wrote:
&gt;<i> &gt; Some notes:
</I>&gt;<i> &gt;       * Why the regression on `10, neq, first char'? Alot of that goes
</I>&gt;<i> &gt;         away with -O=all, but still something to look at.
</I>&gt;<i> 
</I>&gt;<i> This seems very strange, could you attach the benchmark. Maybe it's a bug in
</I>&gt;<i> the bench ;)
</I>Ooops. Forgot to attach.

&gt;<i> &gt;       * Ditto with `0 char, eq'
</I>&gt;<i> 
</I>&gt;<i> The old code had a shortcut for this case which I removed because it should
</I>&gt;<i> be a rather seldom case
</I>&gt;<i> 
</I>&gt;<i> There is another removed 'shortcut' (sort of) which is for strings with
</I>&gt;<i> exactly one char. These are also slightly slower now.
</I>
Ok.

&gt;<i> &gt;       * You should not run this benchmark against the 1.0 release. Right
</I>&gt;<i> &gt;         after 1.0, I added a optimization to the jit which makes
</I>&gt;<i> &gt;         get_OffsetToStringData an intrinsic. This makes the statement
</I>&gt;<i> &gt;         fixed (char* a = b) much faster -- and that is the only way to
</I>&gt;<i> &gt;         get the data from a string if you are not inside the string
</I>&gt;<i> &gt;         class.
</I>&gt;<i> 
</I>&gt;<i> I'm only working from within the string class. But if a new prebuilt version
</I>&gt;<i> comes I'll use it ;)
</I>
Well, generally its better if you can test the two methods in the same
execution (as in my attached benchmark). It makes things easier to
reproduce. It also allows you to run on the msft runtime.

-- Ben
-------------- next part --------------
A non-text attachment was scrubbed...
Name: streq.cs
Type: text/x-csharp
Size: 3539 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040704/aa7d53e1/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040704/aa7d53e1/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006821.html">[Mono-devel-list] String::Equals Performance
</A></li>
	<LI>Next message: <A HREF="006815.html">[Mono-devel-list] OpenOffice and Mono C#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6822">[ date ]</a>
              <a href="thread.html#6822">[ thread ]</a>
              <a href="subject.html#6822">[ subject ]</a>
              <a href="author.html#6822">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
