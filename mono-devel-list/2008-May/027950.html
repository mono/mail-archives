<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] fix for bug in XmlSchema
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20fix%20for%20bug%20in%20XmlSchema&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027979.html">
   <LINK REL="Next"  HREF="027951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] fix for bug in XmlSchema</H1>
    <B>James Fitzsimons</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20fix%20for%20bug%20in%20XmlSchema&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] fix for bug in XmlSchema">james.fitzsimons at gmail.com
       </A><BR>
    <I>Sun May 18 13:01:40 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027979.html">[Mono-dev] [PATCH] fix for functional incompatibility in	HierarchicalDataBoundControl
</A></li>
        <LI>Next message: <A HREF="027951.html">[Mono-dev] [PATCH] fix for bug in XmlSchema
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27950">[ date ]</a>
              <a href="thread.html#27950">[ thread ]</a>
              <a href="subject.html#27950">[ subject ]</a>
              <a href="author.html#27950">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

While porting Spring.NET to run on Mono on linux I have discovered a small
bug in the GetResolvedUri method of the XmlSchema class.

I have a custom XmlResolver which was getting passed an incorrectly
formatted Uri by the XmlSchema class. My uri was of the form
<A HREF="asembly://Spring.Core/Spring.Objects.Factory.Xml/spring-objects-1.1.xsd,">asembly://Spring.Core/Spring.Objects.Factory.Xml/spring-objects-1.1.xsd,</A> and
was returned to me as
<A HREF="asembly://spring.core/Spring.Objects.Factory.Xml/spring-objects-1.1.xsd">asembly://spring.core/Spring.Objects.Factory.Xml/spring-objects-1.1.xsd</A> by
the GetResolvedUri method. The casing is a problem as Spring.Core is the
assembly name and mono won't find an assembly called spring.core.dll. The
one line patch changes the GetResolvedUri to return the OriginalString under
the .NET 2.0 profile which solves this problem. This is the same behaviour
as the Microsoft.NET framework.

I've included a test case as well, the attached schema file is needed for
the test.

Cheers,
James Fitzsimons
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080518/8e917820/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080518/8e917820/attachment-0001.html</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: XmlSchema.patch
Type: text/x-diff
Size: 3167 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080518/8e917820/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080518/8e917820/attachment-0001.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: resolveUriSchema.xsd
Type: application/octet-stream
Size: 808 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080518/8e917820/attachment-0001.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080518/8e917820/attachment-0001.obj</A> 
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027979.html">[Mono-dev] [PATCH] fix for functional incompatibility in	HierarchicalDataBoundControl
</A></li>
	<LI>Next message: <A HREF="027951.html">[Mono-dev] [PATCH] fix for bug in XmlSchema
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27950">[ date ]</a>
              <a href="thread.html#27950">[ thread ]</a>
              <a href="subject.html#27950">[ subject ]</a>
              <a href="author.html#27950">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
