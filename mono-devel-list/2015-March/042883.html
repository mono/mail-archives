<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Some MSBuild porting progress
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Some%20MSBuild%20porting%20progress&In-Reply-To=%3CCANqeOFpGrrOqUoACj%3D2GGuyLQ9MmgCeN1zKXAKvQ_AmP%2BZEMnA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042880.html">
   <LINK REL="Next"  HREF="042885.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Some MSBuild porting progress</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Some%20MSBuild%20porting%20progress&In-Reply-To=%3CCANqeOFpGrrOqUoACj%3D2GGuyLQ9MmgCeN1zKXAKvQ_AmP%2BZEMnA%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Some MSBuild porting progress">miguel at xamarin.com
       </A><BR>
    <I>Sat Mar 28 14:32:40 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042880.html">[Mono-dev] Some MSBuild porting progress
</A></li>
        <LI>Next message: <A HREF="042885.html">[Mono-dev] Some MSBuild porting progress
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42883">[ date ]</a>
              <a href="thread.html#42883">[ thread ]</a>
              <a href="subject.html#42883">[ subject ]</a>
              <a href="author.html#42883">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Question: does XS/MD depend on Microsoft.Build.Engine.dll?

Because we only would need it if the IDE needed it, and in that case,
hopefully we could replace it?

But the idea is to make &quot;xbuild&quot; the script just use the new msbuild.

Miguel

On Sat, Mar 28, 2015 at 12:02 AM, Atsushi Enomoto &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at xamarin.com</A>&gt;
wrote:

&gt;<i> Microsoft.Build.dll is the (relatively) new build engine which
</I>&gt;<i> obsoleted Microsoft.Build.Engine.dll. The deprecated one is not in the
</I>&gt;<i> msbuild repo and that's what we use in xbuild.
</I>&gt;<i>
</I>&gt;<i> Atsushi Eno
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Sat, Mar 28, 2015 at 4:48 AM, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at xamarin.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I was under the impression that there were different versions of the
</I>&gt;<i> MSBuild
</I>&gt;<i> &gt; API?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; But I guess we implement the right one?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; My main concern was not breaking MonoDevelop, so if we do not break it,
</I>&gt;<i> we
</I>&gt;<i> &gt; should be fine.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Let me know when you think you are ready, and we should incorporate
</I>&gt;<i> MSBuild
</I>&gt;<i> &gt; into Mono's current build setup.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Miguel
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Fri, Mar 27, 2015 at 3:31 PM, Lluis Sanchez &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lluis at xamarin.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; El 27/03/2015, a les 19:41, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at xamarin.com</A>&gt; va
</I>&gt;<i> &gt;&gt; escriure:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Hello Lluis,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I think once we are happy with msbuild, that we should build msbuild as
</I>&gt;<i> &gt;&gt; part of the standard Mono build process and ship the resulting
</I>&gt;<i> libraries and
</I>&gt;<i> &gt;&gt; script.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; My only concern is whether the public API surface that msbuild has is
</I>&gt;<i> able
</I>&gt;<i> &gt;&gt; to replace the assemblies that we currently install on the GAC.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Yes, it does. The assemblies are Microsoft.Build,
</I>&gt;<i> &gt;&gt; Microsoft.Build.Framework, Microsoft.Build.Tasks and
</I>&gt;<i> &gt;&gt; Microsoft.Build.Utilities. We have partial implementations of those in
</I>&gt;<i> Mono.
</I>&gt;<i> &gt;&gt; The msbuild repo fully implements all of them.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; We can also use the .targets files included in the msbuild repo. I&#8217;ve
</I>&gt;<i> been
</I>&gt;<i> &gt;&gt; able to mostly build MD using the new libraries and using both Mono&#8217;s
</I>&gt;<i> &gt;&gt; targets files and MS&#8217;s targets files. There are a few issues in both
</I>&gt;<i> cases
</I>&gt;<i> &gt;&gt; that should not be hard to fix.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; If it does, then we can get rid of our implementation, if not, we might
</I>&gt;<i> &gt;&gt; have to keep both around until we get everyone out of the xbuild
</I>&gt;<i> &gt;&gt; implementation.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Miguel
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Fri, Mar 27, 2015 at 2:33 PM, Lluis Sanchez &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lluis at xamarin.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; There is a new xplat branch in the msbuild repo with many fixes to make
</I>&gt;<i> &gt;&gt;&gt; it work on Mono. I&#8217;ve been doing additional fixes and I could make it
</I>&gt;<i> work
</I>&gt;<i> &gt;&gt;&gt; to build the MonoDevelop solution (some Exec tasks are failing though,
</I>&gt;<i> due
</I>&gt;<i> &gt;&gt;&gt; to missing path conversions). I posted my fixes as PRs to the main
</I>&gt;<i> repo, and
</I>&gt;<i> &gt;&gt;&gt; I keep a branch with all of them in my own repo
</I>&gt;<i> &gt;&gt;&gt; (<A HREF="https://github.com/slluis/msbuild/tree/fix-xplat">https://github.com/slluis/msbuild/tree/fix-xplat</A>).
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; What&#8217;s the plan for integrating it into Mono?
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; El 19/03/2015, a les 20:40, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at xamarin.com</A>&gt; va
</I>&gt;<i> &gt;&gt;&gt; escriure:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Hey guys,
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I used the work from Alex to get started, and did some work on my own.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I posted all the patches to github.com/mono/msbuild
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; When using it to bootstrap building itself, it is not breaking at
</I>&gt;<i> &gt;&gt;&gt; invoking NuGet.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I am out of the office until next week, so I think this is as far I
</I>&gt;<i> will
</I>&gt;<i> &gt;&gt;&gt; get.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Miguel
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150328/195bcf85/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150328/195bcf85/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042880.html">[Mono-dev] Some MSBuild porting progress
</A></li>
	<LI>Next message: <A HREF="042885.html">[Mono-dev] Some MSBuild porting progress
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42883">[ date ]</a>
              <a href="thread.html#42883">[ thread ]</a>
              <a href="subject.html#42883">[ subject ]</a>
              <a href="author.html#42883">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
