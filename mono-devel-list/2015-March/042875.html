<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Is mono ready for backend deployment?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Is%20mono%20ready%20for%20backend%20deployment%3F&In-Reply-To=%3CCABkOF6Te1s_G-O-E6V975NdoAbNP5%3DrHGXy0cz5PBpP1WPZKEA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042863.html">
   <LINK REL="Next"  HREF="042877.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Is mono ready for backend deployment?</H1>
    <B>Gelin Yan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Is%20mono%20ready%20for%20backend%20deployment%3F&In-Reply-To=%3CCABkOF6Te1s_G-O-E6V975NdoAbNP5%3DrHGXy0cz5PBpP1WPZKEA%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Is mono ready for backend deployment?">dynamicgl at gmail.com
       </A><BR>
    <I>Fri Mar 27 07:29:34 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042863.html">[Mono-dev] Is mono ready for backend deployment?
</A></li>
        <LI>Next message: <A HREF="042877.html">[Mono-dev] Is mono ready for backend deployment?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42875">[ date ]</a>
              <a href="thread.html#42875">[ thread ]</a>
              <a href="subject.html#42875">[ subject ]</a>
              <a href="author.html#42875">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Mar 26, 2015 at 9:41 PM, Edward Ned Harvey (mono) &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">edward.harvey.mono at clevertrove.com</A>&gt; wrote:

&gt;<i> &gt; From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> [mailto:mono-devel-list-
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bounces at lists.ximian.com</A>] On Behalf Of Gelin Yan
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    A few years ago, I tried to port one of our server from .net to mono.
</I>&gt;<i> At the
</I>&gt;<i> &gt; time. Mono 2.8 was just out. My server use socket (tcp almost) &amp; thread
</I>&gt;<i> &gt; pools heavily.
</I>&gt;<i>
</I>&gt;<i> You're making a blanket statement, &quot;ready.&quot;   My blanket response is:
</I>&gt;<i> Yes.  Mono is ready.*
</I>&gt;<i>
</I>&gt;<i> * Going into a little more detail, no matter what, you must acknowledge
</I>&gt;<i> that there are major architectural differences between Windows, BSD, Linux,
</I>&gt;<i> etc.  Mono and .Net are enormous, and there *are* differences, and there
</I>&gt;<i> always will be.  So you can never say &quot;It's ready&quot; meaning 100% compatible
</I>&gt;<i> and bug-free.  (Guess what, in my experience, I've found about equal
</I>&gt;<i> numbers of MS bugs and Mono bugs.)  What you can do instead, is to develop
</I>&gt;<i> and test on multiple platforms, and anyplace where something is different,
</I>&gt;<i> solve the problem.
</I>&gt;<i>
</I>&gt;<i> I personally develop a commercial product, that has windows/mac/linux
</I>&gt;<i> client and server components, doing a lot of SSL communications over
</I>&gt;<i> unreliable network connections.  We develop code on .Net, test on mono, and
</I>&gt;<i> for the non-GUI server backend stuff, around 99% of the code simply works
</I>&gt;<i> without any modifications.  We run into occasional snags, like, managing
</I>&gt;<i> the SSL certs differently on each platform, and privilege escalation to
</I>&gt;<i> bind port 443, and stuff like that, which are intrinsically different on
</I>&gt;<i> different platforms.  FileSystemWatcher works perfectly on windows &amp; linux,
</I>&gt;<i> but the BSD implementation of kevent/kqueue is fundamentally flawed and
</I>&gt;<i> will never work, so FSWatcher simply doesn't work (reliably) on macs.  We
</I>&gt;<i> had to get Xam.Mac and use FSEvents.  Also, mutexes and inter-process
</I>&gt;<i> signalling, and file locking - we've had to do work in order to support
</I>&gt;<i> multi-platforms, due to fundamental differences in the different
</I>&gt;<i> platforms.  It's impossible for mono (or anything not running on windows)
</I>&gt;<i> to implement file locking as designed in the MS API.  Differences of
</I>&gt;<i> filesystem charset, path separator character, etc.  Dramatic difference in
</I>&gt;<i> RSA key generation, and absent support for EC keys...  To name a few of the
</I>&gt;<i> areas that are different between .Net and mono.
</I>&gt;<i>
</I>&gt;<i> You might be like I was originally - assuming .Net was better - but I have
</I>&gt;<i> found in many regards, neither .Net nor Mono is better.  They each are
</I>&gt;<i> better in specific ways, and the number and severity of differences doesn't
</I>&gt;<i> add up to a clear &quot;one is better.&quot;  For example, I found that .Net's
</I>&gt;<i> implementation of RSA key generation greatly outperforms mono's
</I>&gt;<i> implementation, but mono does a lazy key generation which means 99% of the
</I>&gt;<i> time you can completely skip key generation (depending on your usage
</I>&gt;<i> model).  And there's a huge list like that.  Dramatic performance
</I>&gt;<i> differences in SHA and stuff.
</I>&gt;<i>
</I>&gt;<i> We make heavy use of tcp sockets and threadpool, as well as manually
</I>&gt;<i> managed threads.  Threadpool:  No issues whatsoever.  Tcp:  the timeout
</I>&gt;<i> setting doesn't work unless you set it at the right time ... I forget ...
</I>&gt;<i> after the connection is established?  I forget, but I could look it up.  We
</I>&gt;<i> decided to manually manage the tcp timeouts.  (Not difficult; every time we
</I>&gt;<i> create a TcpClient, create a timer, and when we receive bytes, consider
</I>&gt;<i> resetting the timer).  Whatever you do, frigging *don't* call Dispose on a
</I>&gt;<i> SslStream.  On heavily used linux servers, we had to increase the number of
</I>&gt;<i> tcp sockets in kernel - I could look up details if needed -
</I>&gt;<i>
</I>&gt;<i> So I would say ultimately, Tcp:  Barely any issues, which were easily
</I>&gt;<i> managed.  Unfortunately, SslStream was (and still is) not easily managed,
</I>&gt;<i> if you happen to want a mono SslStream server.  But you didn't say SSL; you
</I>&gt;<i> said TCP sockets.  ;-)
</I>&gt;<i>
</I>
Hi Edward

    Thanks for sharing your experience. I am not saying .net is better. It
can't be due to .net and mono are different things. A possible reason that
people comparing these two frameworks is .net was there first.

   About bugs related to tcp&amp;socket, I remembered there were two types of
async styles:

1. use IAsyncResult
&amp;
2.  SocketAsyncEventArgs (MS favors this style &amp; claims it outperforms the
first one).

Unfortunately, at the time, mono crashed each time after a few seconds of
pressing tests. (IAsyncResult was slightly better,
it lasted a bit longer).

   I had no idea what happened and I ever posted a mail in the mail list,
sure without any response.

   I guessed mono users might be more interested in use it for other
purposes instead of backend.

Another problem is related to the gc. I have some codes crashed on mono due
to OOM and I found out mono couldn't handle
that until I call System.GC.Collect() manually. The same, sgen was just out
and failed on the tests.

   Due to I haven't seen any problem on .Net (It doesn't mean .net is bug
free), so I considered mono runtime was not that stable for a heavy load
environment. That's why I finally decided not to use it in production. I
still keep an eye on mono due to I like C# and Linux too. I don't use BSD
Like system, so thank for sharing about how mono works and what's problem
on BSD Like OS.

   By the way, Do you have any info about tuning GC on mono?  When I
searched &quot;mono, gc tuning&quot; on google,  only a few results came out and a
little bit outdated.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150327/a9500c72/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150327/a9500c72/attachment.html</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042863.html">[Mono-dev] Is mono ready for backend deployment?
</A></li>
	<LI>Next message: <A HREF="042877.html">[Mono-dev] Is mono ready for backend deployment?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42875">[ date ]</a>
              <a href="thread.html#42875">[ thread ]</a>
              <a href="subject.html#42875">[ subject ]</a>
              <a href="author.html#42875">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
