<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] System.Net and SynchronizationContext
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20System.Net%20and%20SynchronizationContext&In-Reply-To=%3CBN3PR0801MB11540BB13213631FF03023C8FA1C0%40BN3PR0801MB1154.namprd08.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042819.html">
   <LINK REL="Next"  HREF="042823.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] System.Net and SynchronizationContext</H1>
    <B>Edward Ned Harvey (mono)</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20System.Net%20and%20SynchronizationContext&In-Reply-To=%3CBN3PR0801MB11540BB13213631FF03023C8FA1C0%40BN3PR0801MB1154.namprd08.prod.outlook.com%3E"
       TITLE="[Mono-dev] System.Net and SynchronizationContext">edward.harvey.mono at clevertrove.com
       </A><BR>
    <I>Fri Mar  6 11:42:36 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042819.html">[Mono-dev] System.Net and SynchronizationContext
</A></li>
        <LI>Next message: <A HREF="042823.html">[Mono-dev] System.Net and SynchronizationContext
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42820">[ date ]</a>
              <a href="thread.html#42820">[ thread ]</a>
              <a href="subject.html#42820">[ subject ]</a>
              <a href="author.html#42820">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> [mailto:mono-devel-list-
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bounces at lists.ximian.com</A>] On Behalf Of Federico Di Gregorio
</I>&gt;<i> 
</I>&gt;<i> I have discovered that the Mono implementation of WebClient doesn't
</I>&gt;<i> behave as described in this MSDN article:
</I>
It seems, the class status page for WebClient indicates as you've said - is a known issue - Many of the Async methods are marked as broken or incomplete.
<A HREF="http://go-mono.com/status/status.aspx?reference=4.5&amp;profile=4.5&amp;assembly=System">http://go-mono.com/status/status.aspx?reference=4.5&amp;profile=4.5&amp;assembly=System</A>

So the solution is to workaround until it's fixed.


&gt;<i> I can probably provide some patches but I don't know if there are plans
</I>&gt;<i> to replace that code with the one MS open sourced.
</I>
That is the big operative question.


&gt;<i> As a side note, inspecting the code I found that in quite a lot of
</I>&gt;<i> places Mono doesn't implement the &quot;event handler&quot; pattern correctly doing:
</I>&gt;<i> 
</I>&gt;<i> if (Event != null)
</I>&gt;<i>      Event(args);
</I>&gt;<i> 
</I>&gt;<i> instead of:
</I>&gt;<i> 
</I>&gt;<i> var e = Event;
</I>&gt;<i> if (e != null)
</I>&gt;<i>      e(args);
</I>
I agree that the pattern you've suggested is the better pattern, to avoid NullReferenceException in a race condition.  I don't see anything &quot;official&quot; out there suggesting this pattern; in fact, all the example code I see from msdn and elsewhere uses the former pattern.  Your post is the first time I've heard of the new pattern, and I'm going to use it from now on.  Hopefully nobody objects to the suggested new pattern, and hopefully those changes are acceptable, but if not, maybe you can find something official suggesting the new pattern.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042819.html">[Mono-dev] System.Net and SynchronizationContext
</A></li>
	<LI>Next message: <A HREF="042823.html">[Mono-dev] System.Net and SynchronizationContext
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42820">[ date ]</a>
              <a href="thread.html#42820">[ thread ]</a>
              <a href="subject.html#42820">[ subject ]</a>
              <a href="author.html#42820">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
