<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Improve compiler generated class handling and ReferenceEquality comparer.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Improve%20compiler%20generated%20class%20handling%0A%20and%20ReferenceEquality%20comparer.&In-Reply-To=4B8B8D0A.7050606%40seznam.cz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034235.html">
   <LINK REL="Next"  HREF="034237.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Improve compiler generated class handling and ReferenceEquality comparer.</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Improve%20compiler%20generated%20class%20handling%0A%20and%20ReferenceEquality%20comparer.&In-Reply-To=4B8B8D0A.7050606%40seznam.cz"
       TITLE="[Mono-dev] [PATCH] Improve compiler generated class handling and ReferenceEquality comparer.">kornelpal at gmail.com
       </A><BR>
    <I>Mon Mar  1 05:41:23 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="034235.html">[Mono-dev] [PATCH] Improve compiler generated class handling and ReferenceEquality comparer.
</A></li>
        <LI>Next message: <A HREF="034237.html">[Mono-dev] [PATCH] Improve compiler generated class handling and ReferenceEquality comparer.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34236">[ date ]</a>
              <a href="thread.html#34236">[ thread ]</a>
              <a href="subject.html#34236">[ subject ]</a>
              <a href="author.html#34236">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Marek,

&gt;&gt;<i> Emit and close top level compiler generated classes as well.
</I>&gt;<i> They are already closed.
</I>
Most of the compiler generated classes are nested types and those are 
closed.

On the other hand DynamicExpressionStatement.StaticDataClass in 
dynamic.cs is a top level compiler generated class.

Currently it is closed by using 
RootContext.RegisterCompilerGeneratedType that is very ugly hack because 
  that is closing the TypeBuilder rather than the compiler generated 
class instance that skips the whole infrastructure.

In my opinion RootContext.RegisterCompilerGeneratedType is intended for 
compiler generated TypeBuilders that have no higher level representation 
that is not the case for compiler generated classes.

 &gt;&gt; Don't make compiler generated classes sealed by default.
 &gt; What is benefit of not doing that?

This is also related to the same class because that was explicitly 
removing the sealed modifier to enable the static modifier.

Although currently only a single compiler generated class benefits from 
both of these modifications I don't see any drawbacks and in my opinion 
the changes result in a more properly designed compiler generated class 
infrastructure.

Korn&#233;l
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034235.html">[Mono-dev] [PATCH] Improve compiler generated class handling and ReferenceEquality comparer.
</A></li>
	<LI>Next message: <A HREF="034237.html">[Mono-dev] [PATCH] Improve compiler generated class handling and ReferenceEquality comparer.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34236">[ date ]</a>
              <a href="thread.html#34236">[ thread ]</a>
              <a href="subject.html#34236">[ subject ]</a>
              <a href="author.html#34236">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
