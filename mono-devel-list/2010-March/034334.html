<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mcs build changes for moonlight
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mcs%20build%20changes%20for%20moonlight&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034345.html">
   <LINK REL="Next"  HREF="034346.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mcs build changes for moonlight</H1>
    <B>Jb Evain</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mcs%20build%20changes%20for%20moonlight&In-Reply-To="
       TITLE="[Mono-dev] mcs build changes for moonlight">jb at nurv.fr
       </A><BR>
    <I>Fri Mar 12 10:23:07 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="034345.html">[Mono-dev] ilasm on Linux/SPARC64
</A></li>
        <LI>Next message: <A HREF="034346.html">[Mono-dev] mcs build changes for moonlight
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34334">[ date ]</a>
              <a href="thread.html#34334">[ thread ]</a>
              <a href="subject.html#34334">[ subject ]</a>
              <a href="author.html#34334">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear all,

Originally, in the Mono build, the MonoTouch profile was based on the
Moonlight profile (net_2_1), making it hard to differentiate when we
were in a Moonlight or in a MonoTouch specific code path. It led to
some patterns such as:

#if NET_2_1 &amp;&amp; !MONOTOUCH

for Moonlight only code. Mix that with NET_4_0 defines and you get
some annoying pre-processor directives.

Now that MonoTouch is a profile of its own, I decided to renamed the
net_2_1 profile to moonlight for explicitness's sake. I've attached
patches for mcs, mono and moon to deal with the change. Note that they
don't preserve the svn moves.

The moonlight profile now defines MOONLIGHT, and it can be used in the
BCL code to simplify pre-processor directives, which I'll address
after this.

If for some reason the Moonlight hackers are emotionally attached to
the net_2_1 profile, or judge that the change is too broad for this
matter, now that MonoTouch is a profile of its own, the net_2_1 build
can simply define MOONLIGHT as well and we'll be able to simplify the
directives too.

So, what's it gonna be?

-- 
Jb Evain  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jb at nurv.fr</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: moonlight_mcs.diff
Type: text/x-patch
Size: 92312 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100312/d643bedf/attachment-0003.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100312/d643bedf/attachment-0003.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: moonlight_mono.diff
Type: text/x-patch
Size: 6787 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100312/d643bedf/attachment-0004.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100312/d643bedf/attachment-0004.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: moonlight_moon.diff
Type: text/x-patch
Size: 1117 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100312/d643bedf/attachment-0005.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100312/d643bedf/attachment-0005.bin</A> 
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034345.html">[Mono-dev] ilasm on Linux/SPARC64
</A></li>
	<LI>Next message: <A HREF="034346.html">[Mono-dev] mcs build changes for moonlight
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34334">[ date ]</a>
              <a href="thread.html#34334">[ thread ]</a>
              <a href="subject.html#34334">[ subject ]</a>
              <a href="author.html#34334">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
