<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Npgsql possible bug
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Npgsql%20possible%20bug&In-Reply-To=20031226112728.GA24309%40wanadoo.es">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003371.html">
   <LINK REL="Next"  HREF="003379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Npgsql possible bug</H1>
    <B>Francisco Figueiredo Jr.</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Npgsql%20possible%20bug&In-Reply-To=20031226112728.GA24309%40wanadoo.es"
       TITLE="[Mono-devel-list] Npgsql possible bug">fxjrlists at yahoo.com.br
       </A><BR>
    <I>Sat Dec 27 19:09:35 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003371.html">[Mono-devel-list] Npgsql possible bug
</A></li>
        <LI>Next message: <A HREF="003379.html">[Mono-devel-list] Npgsql possible bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3378">[ date ]</a>
              <a href="thread.html#3378">[ thread ]</a>
              <a href="subject.html#3378">[ subject ]</a>
              <a href="author.html#3378">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> --- <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">yoros at wanadoo.es</A> escreveu: &gt; On Thu, Dec 25, 2003 at 11:37:06PM +0100,
Jaroslaw Kowalski wrote:
&gt;<i> &gt; Hi all!
</I>&gt;<i> &gt; 
</I>
Hi Jaroslaw!

&gt;<i> &gt; This is my first post to nant-devel-list, so please excuse any &quot;formal&quot;
</I>&gt;<i> &gt; mistakes. I'm in progress of porting my O/R mapping solution to
</I>&gt;<i> &gt; Mono/PostgreSQL and I've encountered the bug in Npgsql. Is this the right
</I>&gt;<i> &gt; list to report this problem to?
</I>&gt;<i> &gt; 
</I>
Yeap. This list is the right place to report it.
Also, there are the npgsql-general and npgsql-hackers list at gborg:
<A HREF="http://gborg.postgresql.org/mailman/listinfo/npgsql">http://gborg.postgresql.org/mailman/listinfo/npgsql</A>

&gt;<i> &gt; The problem is related to the fact that NpgsqlCommand calls
</I>&gt;<i> &gt; connection.Dispose() in it's Dispose method. This causes problems with
</I>&gt;<i> &gt; constructs like the following, which are legal in MS.NET with MSSQL:
</I>
&gt;<i> 
</I>&gt;<i> Yes, that code shouldn't be there but when we use NpgsqlDataAdapter with
</I>&gt;<i> DataSet, DataTable, etc... the connection is not closed:
</I>&gt;<i> 
</I>&gt;<i> 	LOG:  pq_recvbuf: unexpected EOF on client connection
</I>&gt;<i> 
</I>&gt;<i> I think that when a command is disposed, it's underlying connection
</I>&gt;<i> shouldn't be disposed too but the physical connection can be closed and
</I>&gt;<i> the connection changes its inner state. In this way the connection can
</I>&gt;<i> be reopenend...
</I>&gt;<i> 
</I>&gt;<i> Please take care of what I said and, if you have time...
</I>&gt;<i> 
</I>
I also think the connection shouldn't be disposing the connection. As, Jaroslaw
said, you could use the connection with other commands.

Unfortunately I'm not using my development machine right now, and so, I can't
check it better, but I think we may be missing something in the
NpgsqlDataAdapter to close the connection when using commands, maybe specifing
the CloseConnection behavior as Jaroslaw said.

As soon as I get back to my development machine I will check that.
 
Regards,

Francisco Figueiredo Jr.


Yahoo! Mail - 6MB, anti-spam e antiv&#237;rus gratuito. Crie sua conta agora:
<A HREF="http://mail.yahoo.com.br">http://mail.yahoo.com.br</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003371.html">[Mono-devel-list] Npgsql possible bug
</A></li>
	<LI>Next message: <A HREF="003379.html">[Mono-devel-list] Npgsql possible bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3378">[ date ]</a>
              <a href="thread.html#3378">[ thread ]</a>
              <a href="subject.html#3378">[ subject ]</a>
              <a href="author.html#3378">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
