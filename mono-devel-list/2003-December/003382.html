<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Releasing connections from pool
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Releasing%20connections%20from%20pool&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003398.html">
   <LINK REL="Next"  HREF="003383.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Releasing connections from pool</H1>
    <B>Francisco Figueiredo Jr.</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Releasing%20connections%20from%20pool&In-Reply-To="
       TITLE="[Mono-devel-list] Releasing connections from pool">fxjrlists at yahoo.com.br
       </A><BR>
    <I>Sun Dec 28 09:23:28 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003398.html">[Mono-devel-list] Re: [PATCH] Async bugs with Sockets
</A></li>
        <LI>Next message: <A HREF="003383.html">[Mono-devel-list] Releasing connections from pool
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3382">[ date ]</a>
              <a href="thread.html#3382">[ thread ]</a>
              <a href="subject.html#3382">[ subject ]</a>
              <a href="author.html#3382">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi all!

I'm working in getting connection pool in Npgsql.

But I'm facing a little problem I wasn't aware before:

When I close the connection, if it is being pooled, I return it back to 
pool. Ok, but what happens when the client program exits? I mean, if it 
specify Npgsql to use a pool, it opens a connection, close it and so 
exits, who will release the connection from the pool?

I know that the Stream object handle the unmanaged tcp connection and on 
its dispose(false) method it will release the unmanaged connection 
cleanly, but even with this, Postgresql still logs about receiving eof 
from the client connection.

I was checking the bytefx and sqlclient code about connection pool and I 
couldn't see anything about this too. So I suppose that with their code 
this also happens.

Pedro, guys, do you have any idea about that?

I was thinking about some way to register an eventhandler which would 
notice me about the app domain unloading where I could check the 
connection pool and release any connection there is in it.

Would this be possible? There may be some other clearer solution?

Thanks in advance.

Regards,

Francisco Figueiredo Jr.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003398.html">[Mono-devel-list] Re: [PATCH] Async bugs with Sockets
</A></li>
	<LI>Next message: <A HREF="003383.html">[Mono-devel-list] Releasing connections from pool
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3382">[ date ]</a>
              <a href="thread.html#3382">[ thread ]</a>
              <a href="subject.html#3382">[ subject ]</a>
              <a href="author.html#3382">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
