<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] a jit bug?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20a%20jit%20bug%3F&In-Reply-To=1070553678.13525.13.camel%40gordon.oo.cdl2000.co.id">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003195.html">
   <LINK REL="Next"  HREF="003197.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] a jit bug?</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20a%20jit%20bug%3F&In-Reply-To=1070553678.13525.13.camel%40gordon.oo.cdl2000.co.id"
       TITLE="[Mono-devel-list] a jit bug?">lupus at ximian.com
       </A><BR>
    <I>Thu Dec  4 11:12:29 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003195.html">[Mono-devel-list] a jit bug?
</A></li>
        <LI>Next message: <A HREF="003197.html">[Mono-devel-list] a jit bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3196">[ date ]</a>
              <a href="thread.html#3196">[ thread ]</a>
              <a href="subject.html#3196">[ subject ]</a>
              <a href="author.html#3196">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/04/03 Mohammad DAMT wrote:
&gt;<i> The attached files can be compiled by mcs, but the jit will abort with
</I>&gt;<i> message as described below. However it can be run by mint.
</I>&gt;<i> 
</I>&gt;<i> config: mono+mcs from cvs today
</I>&gt;<i> 
</I>&gt;<i> [<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mdamt at gordon</A> tmp]$ mcs test.cs
</I>&gt;<i> Compilation succeeded
</I>&gt;<i> [<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mdamt at gordon</A> tmp]$ mint test.exe
</I>&gt;<i> Sada
</I>&gt;<i> [<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mdamt at gordon</A> tmp]$ mono test.exe
</I>&gt;<i>  
</I>&gt;<i> ** ERROR **: Invalid IL code at IL0020 in
</I>&gt;<i> Weirdo.Weirdo:ProblematicSwitch (string): IL_0020: br        IL_005c
</I>
It is a bug in mcs.
mint doesn't do the consistency checks the jit does, so it executes the
code even if it's incorrect.

&gt;<i> aborting...
</I>&gt;<i> Aborted
</I>&gt;<i> 
</I>&gt;<i> and this is the il codes:
</I>&gt;<i>     // method line 2
</I>&gt;<i>     .method private
</I>&gt;<i>            instance default string 'ProblematicSwitch' (string 'param') 
</I>&gt;<i> cil managed
</I>&gt;<i>     {
</I>&gt;<i>         .param [1]
</I>&gt;<i>         // Method begins at RVA 0x20f4
</I>&gt;<i>         // Code size 92 (0x5c)
</I>&gt;<i>         .maxstack 5
</I>&gt;<i>         .locals init (
</I>&gt;<i>                 string  V_0)
</I>[...]
&gt;<i>         IL_0020:  br IL_005c
</I>[...]
&gt;<i>         IL_0057:  br IL_005c
</I>&gt;<i>  
</I>&gt;<i>     } // end of method Weirdo::instance default string
</I>&gt;<i> 'ProblematicSwitch' (string 'param')
</I>
As you see there is no IL_005c label where the code cna jump to.

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003195.html">[Mono-devel-list] a jit bug?
</A></li>
	<LI>Next message: <A HREF="003197.html">[Mono-devel-list] a jit bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3196">[ date ]</a>
              <a href="thread.html#3196">[ thread ]</a>
              <a href="subject.html#3196">[ subject ]</a>
              <a href="author.html#3196">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
