<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] reading stream bug..
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20reading%20stream%20bug..&In-Reply-To=005301c3c630%2479dc33b0%24148ccf0a%40rao">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003335.html">
   <LINK REL="Next"  HREF="003344.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] reading stream bug..</H1>
    <B>S&#233;bastien Pouliot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20reading%20stream%20bug..&In-Reply-To=005301c3c630%2479dc33b0%24148ccf0a%40rao"
       TITLE="[Mono-devel-list] reading stream bug..">spouliot at videotron.ca
       </A><BR>
    <I>Sat Dec 20 15:07:51 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003335.html">[Mono-devel-list] reading stream bug..
</A></li>
        <LI>Next message: <A HREF="003344.html">[Mono-devel-list] reading stream bug..
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3340">[ date ]</a>
              <a href="thread.html#3340">[ thread ]</a>
              <a href="subject.html#3340">[ subject ]</a>
              <a href="author.html#3340">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Subba Rao,

A quick patch to your problem would be to change the line
					while((len = CryptStream.Read(Buffer,0,1023)) != 0)
into
					while((len = CryptStream.Read(Buffer,0,1024)) != 0)

because (a) your buffer is 1024 bytes and (b) more important it's a multiple
of the block size.
This will work with both MS.NET and Mono (Linux and Windows).

The bug is probably due to the fact that CryptoStream don't return the good
value - which mix up the calculations.

&gt;&gt;<i> &gt; in windows using framework 1.4 it works fine..
</I>
framework 1.4 ? are you sending this from the future ? ;-)

If you find anything else please report it into bugzilla
<A HREF="http://bugzilla.ximian.com/enter_bug.cgi?product=Mono%2FClass%20Libraries">http://bugzilla.ximian.com/enter_bug.cgi?product=Mono%2FClass%20Libraries</A>
so the issue is not lost (e.g. during xmas vacations). It's also easier (for
the reporter) to be notified when the issue is fixed.

BTW the image is beautiful but a little big to send to a mailing list.

Thanks,
Sebastien Pouliot
Security Architect, Motus Technologies, <A HREF="http://www.motus.com">http://www.motus.com</A>
work: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at motus.com</A>
home: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at videotron.ca</A>
blog: <A HREF="http://pages.infinit.net/ctech/poupou.html">http://pages.infinit.net/ctech/poupou.html</A>


-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>]On Behalf Of Subba Rao
Thirumoorthy
Sent: 19 d&#233;cembre 2003 08:03
To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: [Mono-devel-list] reading stream bug..



&gt;<i> &gt;
</I>&gt;<i> &gt; this is a problem i encountered
</I>&gt;<i> &gt; my system spec is as follows
</I>&gt;<i> &gt; redhat 7.3 mono 0.29 --&gt;installed from source
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; i created a program that can encrypt or decrypt a file
</I>&gt;<i> &gt; the file must be in the same directory as the program.
</I>&gt;<i> &gt; the problem is when i decrypt i get the following error
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; System.Byte[] FinalDecrypt(System.Byte[], Int32, Int32)
</I>&gt;<i> &gt; mscorlib
</I>&gt;<i> &gt; Array index is out of range
</I>
problem is that, when reading from the crypt stream to the buffer it reads
&gt;<i> as 1023-1008 while in windows its consistatnt 1023
</I>this is in relative to the IV, it gets padded..
can you please tell me how to solve this problem by reading correctly from
the buffer..??


&gt;<i> &gt; in windows using framework 1.4 it works fine..
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; i attach the source code for my program..
</I>&gt;<i> &gt; btw, just comment/or uncomment accordingly in the main for encrypt or
</I>&gt;<i> &gt; decrypt
</I>&gt;<i> &gt; make sure the file is in the same directory..
</I>&gt;<i> &gt; hope u can give me some pointers..
</I>&gt;<i> &gt; appreciate ur help
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; regards,
</I>&gt;<i> &gt; Subba Rao Thirumoorthy
</I>&gt;<i> &gt; Network Research Group
</I>&gt;<i> &gt; University of Malaysia
</I>&gt;<i> &gt;
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003335.html">[Mono-devel-list] reading stream bug..
</A></li>
	<LI>Next message: <A HREF="003344.html">[Mono-devel-list] reading stream bug..
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3340">[ date ]</a>
              <a href="thread.html#3340">[ thread ]</a>
              <a href="subject.html#3340">[ subject ]</a>
              <a href="author.html#3340">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
