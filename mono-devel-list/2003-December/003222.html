<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] How to implement Trace?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20How%20to%20implement%20Trace%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003221.html">
   <LINK REL="Next"  HREF="003223.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] How to implement Trace?</H1>
    <B>Pedro Santos</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20How%20to%20implement%20Trace%3F&In-Reply-To="
       TITLE="[Mono-devel-list] How to implement Trace?">pre at oninetspeed.pt
       </A><BR>
    <I>Sat Dec  6 17:14:36 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003221.html">[Mono-devel-list] Patches for NT Authentication in SqlClient
</A></li>
        <LI>Next message: <A HREF="003223.html">[Mono-devel-list] XmlDocument Load method bug ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3222">[ date ]</a>
              <a href="thread.html#3222">[ thread ]</a>
              <a href="subject.html#3222">[ subject ]</a>
              <a href="author.html#3222">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I was trying to implement the TraceContext class that enables tracing.
This class recieves a HttpContext, and I get the page casting the
IHttpHandler given by the Handler proprety. Now I have the page, and I
have a DataSet container with the messages, but... Where do I append it?

Having the Page, I added a delegate to the PreRender event, that is
triggered just before the page rendering. The ideia was to access the
page children controls, and add a WebControl - having the previous
DataSet has the DataSource. Simply like this:
Controls.AddAt(Controls.Count, mycontrol);

However, the control is not shown. It appears that the Page render
method is built when compiling, and do not check at runtime the control
children. This is because, insted of having Literal controls with the
text, the method simply writes to the buffer the text. Well, this is not
how it is explained in Essential ASP .NET, but both Mono and the win
asp.net do it this way. Is it for performance?

So I have this problem. When tracing is enabled, I would like to add a
div element just before &lt;/bod&gt;&lt;/html&gt; with the trace results. It must be
done some other way... if we cannot add controls to the Page in runtime,
where can we add it?

Maybe in some event from the HttpApplication just before sending the
request back, erasing &lt;/body&gt;&lt;/html&gt; from the stream and adding the
trace content. And maybe rearrange the HTTP header Content-length with
the new value.

Opinions?

-- 
Pedro Santos &lt;www.psantos.net&gt;
&quot;Si minor plus est ergo nihil sunt omnia...&quot;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20031206/3c29623e/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20031206/3c29623e/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003221.html">[Mono-devel-list] Patches for NT Authentication in SqlClient
</A></li>
	<LI>Next message: <A HREF="003223.html">[Mono-devel-list] XmlDocument Load method bug ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3222">[ date ]</a>
              <a href="thread.html#3222">[ thread ]</a>
              <a href="subject.html#3222">[ subject ]</a>
              <a href="author.html#3222">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
