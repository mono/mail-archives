<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] RFC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20RFC&In-Reply-To=sfe0c930.061%40prv-mail25.provo.novell.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003310.html">
   <LINK REL="Next"  HREF="003312.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] RFC</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20RFC&In-Reply-To=sfe0c930.061%40prv-mail25.provo.novell.com"
       TITLE="[Mono-devel-list] RFC">bmaurer at users.sourceforge.net
       </A><BR>
    <I>Thu Dec 18 00:20:32 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003310.html">[Mono-devel-list] RFC
</A></li>
        <LI>Next message: <A HREF="003312.html">[Mono-devel-list] AnonCVS vs. ximian cvs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3311">[ date ]</a>
              <a href="thread.html#3311">[ thread ]</a>
              <a href="subject.html#3311">[ subject ]</a>
              <a href="author.html#3311">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> -			string defRelationName = &quot;Relation&quot;;
</I>&gt;<i> -			for (int index = 1; Contains (defRelationName); ++index) {
</I>&gt;<i> +			int index = 1;
</I>&gt;<i> +			string defRelationName = &quot;Relation&quot; +index;
</I>&gt;<i> +			for (; Contains (defRelationName); ++index) {
</I>&gt;<i>  				defRelationName = &quot;Relation&quot; + index;
</I>
Ok, thats just ugly and unreadable. In general, for loops should only be
used for:
      * for (int i = 0; i &lt; count; i++)
      * for (Link l = head; l != null; l = l.Next)
Other than that, please just use while ().

&gt;<i> +			try{
</I>&gt;<i> +				if (ignoreCase)
</I>&gt;<i> +					ciProvider = new CaseInsensitiveHashCodeProvider(_dataTable.Locale);
</I>&gt;<i> +			}
</I>&gt;<i> +			catch (Exception e)
</I>&gt;<i> +			{
</I>&gt;<i> +				//TODO remove try catch block after CaseInsensitiveHashCodeProvider is implemented 
</I>&gt;<i> +			}
</I>
We really should not be working around things like this. They tend to be
forgotten. Your best bet is to make a default impl of the insensitive
provider. Honestly, it does not matter if it can only handle a-z and
ignores all funky languages with accents, etc. Better to have a
workaround deep down that is easy to rip out and replace with good code
than tons of workarounds in our codebase that we must code for.

Also, some general coding style comments:

Mono's style is the following:

using System;
using System.IO;

namespace Mono.Blah.Foo {
	class Bar {
		int blah;
		int foo;
		
		void PrivateMethod ()
		{
			if (blah &lt; 0)
				foo = 1;
			else
				foo = 0;

			if (foo + blah == 1) {
				PublicMethod (foo ++);
				blah --;
			}
		}

		public void PublicMethod ()
		{
			try {
				...
			} catch (IOException e) {
				...
			} catch (Exception e) {
				...
			}
		}
	}
}

Note how the braces for each statment are done, compare:
class Foo {
}

to

public void Foo ()
{
}

to

if (foo) {
}

You should try to keep to these styles.

Also, do a + b not a+b. Do a [foo], not a[foo]. foo () not foo().

When you make a pretty major change like this, it helps if you can send
a nice changelog, detailing the specific changes made to each method.
This helps a reviewer (like myself) focus on what you are trying to do.

Also, adding comments to new code is a great idea, always strive to have
the cleanest code in the file you are changing.

A bugfix like this should have an NUnit test to go along, and you should
make sure it passes in MS. Again, even if the test coverage is not 100%
for the existing code, try to cover yourself 100% (it helps us not blame
you).

I realize the coding style stuff is not fun, but it is hard to work
together on cvs without a unified coding style.

-- Ben




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003310.html">[Mono-devel-list] RFC
</A></li>
	<LI>Next message: <A HREF="003312.html">[Mono-devel-list] AnonCVS vs. ximian cvs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3311">[ date ]</a>
              <a href="thread.html#3311">[ thread ]</a>
              <a href="subject.html#3311">[ subject ]</a>
              <a href="author.html#3311">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
