<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] about Metada
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20about%20Metada&In-Reply-To=1059047692.17550.3.camel%40alambix.local.igalia.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001641.html">
   <LINK REL="Next"  HREF="001651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] about Metada</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20about%20Metada&In-Reply-To=1059047692.17550.3.camel%40alambix.local.igalia.com"
       TITLE="[Mono-devel-list] about Metada">lupus at ximian.com
       </A><BR>
    <I>Thu Jul 24 08:35:29 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="001641.html">[Mono-devel-list] about Metada
</A></li>
        <LI>Next message: <A HREF="001651.html">[Mono-devel-list] Re: Mono XmlNode.InnerText
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1642">[ date ]</a>
              <a href="thread.html#1642">[ thread ]</a>
              <a href="subject.html#1642">[ subject ]</a>
              <a href="author.html#1642">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/24/03 Fernando Diaz wrote:
&gt;<i> Can anybody relate me the use of the fields of these structs?
</I>&gt;<i> 
</I>&gt;<i> typedef struct {
</I>&gt;<i>         MonoType        *type;
</I>
Type of the field.

&gt;<i>         int              offset;
</I>
Offset where field is stored: if it is an instance field, it's the
offset from the start of the object, if it's static, it's from the
start of the memory chunk allocated for statics for the class
(the data pointer in MonoVTable).

&gt;<i>         const char      *name;
</I>
Obvious.

&gt;<i>         const char      *data;
</I>
Pointer to the data (from the RVA address, valid only for fields with
the has rva flag).

&gt;<i>         MonoClass       *parent;
</I>
Type where the field was defined.

&gt;<i>         MonoConstant    *def_value;
</I>
If the field is constant, pointer to the metadata where the constant
value can be loaded.

&gt;<i> } MonoClassField;
</I>&gt;<i> 
</I>&gt;<i> Where is the data of objects storage? In data of this struct or in data
</I>&gt;<i> of MonoVTable struct? Or are the same pointers?
</I>
MonoClassField is just a runtime representation of the metadata for
field, it doesn't contain the data directly.
Static fields are stored in MonoVTable-&gt;data.
Instance fields are allocated in the objects after the object header:


-----		&lt;----- start of object
vtable 		&lt;----- pointer for MonoVTable for the object's class
syncblock	&lt;----- lock/unlock support
first field
second field
...

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001641.html">[Mono-devel-list] about Metada
</A></li>
	<LI>Next message: <A HREF="001651.html">[Mono-devel-list] Re: Mono XmlNode.InnerText
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1642">[ date ]</a>
              <a href="thread.html#1642">[ thread ]</a>
              <a href="subject.html#1642">[ subject ]</a>
              <a href="author.html#1642">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
