<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] problem with passing RuntimeTypeHandle args to the runtime
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20problem%20with%20passing%20RuntimeTypeHandle%20args%20to%20the%20runtime&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001661.html">
   <LINK REL="Next"  HREF="001680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] problem with passing RuntimeTypeHandle args to the runtime</H1>
    <B>Laurent Morichetti</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20problem%20with%20passing%20RuntimeTypeHandle%20args%20to%20the%20runtime&In-Reply-To="
       TITLE="[Mono-devel-list] problem with passing RuntimeTypeHandle args to the runtime">l_m at pacbell.net
       </A><BR>
    <I>Sat Jul 26 21:31:20 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="001661.html">[Mono-devel-list] Enum class not serializable
</A></li>
        <LI>Next message: <A HREF="001680.html">[Mono-devel-list] problem with passing RuntimeTypeHandle args to the runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1663">[ date ]</a>
              <a href="thread.html#1663">[ thread ]</a>
              <a href="subject.html#1663">[ subject ]</a>
              <a href="author.html#1663">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I'm having a problem with the trampoline code when passing a
RuntimeTypeHandle argument. It is assumed by the callee method that a
RuntimeTypeHandle is equivalent to a MonoType*.

On most platforms this assumption is correct but on HP-UX IPF 32bit (big
endian) it is not.

The calling convention on IPF states that aggregate types (if ordering is
big endian) are passed left aligned while scalar types are passed right
aligned. For (struct { int a; int b}) where a == 1 and b == 2 the argument
would be 0x0000000100000002, for (struct { int a; } where a == 1 the
argument would be 0x0000000100000000 and for (MonoType*) the argument would
be 0x00000000XXXXXXXX.

Now if I take the example of Type:internal_from_handle (RuntimeTypeHandle)
the trampoline code is going to encode the argument as 0xXXXXXXXX00000000
(vt:{IntPtr}) but the callee method (ves_icall_type_from_handle (MonoType*)
is expecting 0x00000000XXXXXXXX.


Should the trampoline code convert a RuntimeTypeHandle vt argument to a
scalar argument or should it be handled by the runtime? If handled by the
trampoline code, is there any other types assumed to be equivalent to their
unboxed representation?

Thanks,
-Laurent


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001661.html">[Mono-devel-list] Enum class not serializable
</A></li>
	<LI>Next message: <A HREF="001680.html">[Mono-devel-list] problem with passing RuntimeTypeHandle args to the runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1663">[ date ]</a>
              <a href="thread.html#1663">[ thread ]</a>
              <a href="subject.html#1663">[ subject ]</a>
              <a href="author.html#1663">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
