<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] overriding return type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20overriding%20return%20type&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001665.html">
   <LINK REL="Next"  HREF="001667.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] overriding return type</H1>
    <B>alan jenkins</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20overriding%20return%20type&In-Reply-To="
       TITLE="[Mono-devel-list] overriding return type">Alan.Jenkins at phonecoop.coop
       </A><BR>
    <I>Sun Jul 27 12:12:40 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="001665.html">[Mono-devel-list] overriding return type
</A></li>
        <LI>Next message: <A HREF="001667.html">[Mono-devel-list] overriding return type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1666">[ date ]</a>
              <a href="thread.html#1666">[ thread ]</a>
              <a href="subject.html#1666">[ subject ]</a>
              <a href="author.html#1666">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i> I guess this thread is finished then
</I>&lt;cringe&gt;

I have examined the compiler source, and the only thing which prevents the use 
of covariant return types is
 
mcs/class.cs(2316) : void Method.CheckBase(TypeContainer container)

It is trivial to alter the method to allow covariant return types, and only 
complain when the return type of the overriding method can't be implicity 
cast to the original return type.  This doesn't seem to break anything - the 
class library compiles fine using the modified compiler.  Assemblies 
containing methods with covariant return types (compiled with the modified 
compiler) can be referenced from assemblies compiled with the original 
compiler (e.g. mono_new covariant.cs; mono_old -r covariant.exe old.cs).

As an alternative to requiring an option to enable it, it might be better to 
have the feature enabled by default, but emit warnings about the portability 
of the C# code when covariant return types are encountered.

I ask the list again:  would you be willing to see the compiler changed in 
such a way?  It appears to be a trivial piece of code which would break 
nothing.

Um... I think I could write the patch myself - it'd only be about 20 lines of 
code in the compiler, plus a test, but I am an absolute C# &amp; Mono newbie.  
Though I would like to think I could work with large projects without 
stepping on other peoples toes, I haven't actually contributed to a project 
before.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001665.html">[Mono-devel-list] overriding return type
</A></li>
	<LI>Next message: <A HREF="001667.html">[Mono-devel-list] overriding return type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1666">[ date ]</a>
              <a href="thread.html#1666">[ thread ]</a>
              <a href="subject.html#1666">[ subject ]</a>
              <a href="author.html#1666">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
