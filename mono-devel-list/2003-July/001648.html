<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] overriding return type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20overriding%20return%20type&In-Reply-To=200307231739.13814.Alan.Jenkins%40phonecoop.coop">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001647.html">
   <LINK REL="Next"  HREF="001649.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] overriding return type</H1>
    <B>Jacob Eggleston</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20overriding%20return%20type&In-Reply-To=200307231739.13814.Alan.Jenkins%40phonecoop.coop"
       TITLE="[Mono-devel-list] overriding return type">jacobmono at yahoo.com
       </A><BR>
    <I>Fri Jul 25 08:46:41 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="001647.html">[Mono-devel-list] overriding return type
</A></li>
        <LI>Next message: <A HREF="001649.html">[Mono-devel-list] overriding return type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1648">[ date ]</a>
              <a href="thread.html#1648">[ thread ]</a>
              <a href="subject.html#1648">[ subject ]</a>
              <a href="author.html#1648">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm sure there are better experts on OO programing
here that can explain better, but here's why I don't
believe this is conceptually provided for in OOP. If I
have a peice of code that knows about example2, I can
safely test to see if the return value from the
overrided method() can be upcast to example2.
Conversely, if I have a peice of code that has a
reference to an example2 object (downcast as
example1), and calls method() on that object it would
get back an example2 object, causing an error.

for example, expanding on your example code:

public example1 MyExample;
public void ProcessExample()
{
	// this would result in a &quot;cannot implicitly cast&quot;
error if the 
	// return value is of type example2
	example1 NewExampleObject = MyExample.method();
}

Setting MyExample to a downcast example2 from some
external code works fine. But when the ProcessExample
method calls method(), your example code would return
an example2 object. I believe implicit casts are
allowed in VB, but not in C#, resulting in an error
when the program tries to asign a return value of
example2 to a variable of type example1.

Regards,
Jacob Eggleston

--- Alan Jenkins &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Alan.Jenkins at phonecoop.coop</A>&gt; wrote:
&gt;<i> I would like to be able to override the return type
</I>&gt;<i> of a method, to a subclass 
</I>&gt;<i> of the previous type, like so:
</I>&gt;<i> 
</I>&gt;<i> class example1
</I>&gt;<i> {
</I>&gt;<i> 	virtual example1 method()
</I>&gt;<i> 	{
</I>&gt;<i> 		return new example1();
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> class example2 : example1
</I>&gt;<i> {
</I>&gt;<i> 	override example2 method()
</I>&gt;<i> 	{
</I>&gt;<i> 		return new example2();
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> (please excuse quality of code, indent etc, due to
</I>&gt;<i> being newbie)
</I>&gt;<i> 
</I>&gt;<i> In my opinion this is a useful feature for an object
</I>&gt;<i> orientated language - I 
</I>&gt;<i> think it would be wrong for &quot;example2.method()&quot; to
</I>&gt;<i> return an instance of 
</I>&gt;<i> &quot;example2&quot; cast to &quot;example1&quot;, because code that
</I>&gt;<i> used these classes might 
</I>&gt;<i> have to cast the &quot;example2&quot; instance back to its
</I>&gt;<i> proper type again, without 
</I>&gt;<i> any guarantee that it was actually a casted
</I>&gt;<i> &quot;example2&quot; instance and not just 
</I>&gt;<i> an &quot;example1&quot; instance.
</I>&gt;<i> 
</I>&gt;<i> I'm sure that this feature does no harm to a
</I>&gt;<i> language - &quot;example2&quot; does not 
</I>&gt;<i> break the contract expressed in &quot;example1&quot; - and it
</I>&gt;<i> doesn't complicate the 
</I>&gt;<i> language.
</I>&gt;<i> 
</I>&gt;<i> I understand that this it is possible to do this
</I>&gt;<i> with the .NET runtime - that 
</I>&gt;<i> you can craft CIL which will do the same as my
</I>&gt;<i> example - but that the C# 
</I>&gt;<i> compiler does not allow it.
</I>&gt;<i> 
</I>&gt;<i> Am I mistaken?  Would it be possible to add support
</I>&gt;<i> for this feature (possibly 
</I>&gt;<i> as an command-line option or an option when
</I>&gt;<i> compiling the compiler)?  Do you 
</I>&gt;<i> agree that such a feature is desirable?  Would you
</I>&gt;<i> be willing to add this 
</I>&gt;<i> feature, given that it would create incompatibility
</I>&gt;<i> with MS's .NET?  Is there 
</I>&gt;<i> the will to code it?
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>
</I><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>


__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
<A HREF="http://sitebuilder.yahoo.com">http://sitebuilder.yahoo.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001647.html">[Mono-devel-list] overriding return type
</A></li>
	<LI>Next message: <A HREF="001649.html">[Mono-devel-list] overriding return type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1648">[ date ]</a>
              <a href="thread.html#1648">[ thread ]</a>
              <a href="subject.html#1648">[ subject ]</a>
              <a href="author.html#1648">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
