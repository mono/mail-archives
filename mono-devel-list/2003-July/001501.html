<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Mono Interpreter: Dietmar's idea.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Mono%20Interpreter%3A%20Dietmar%27s%20idea.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001507.html">
   <LINK REL="Next"  HREF="001522.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Mono Interpreter: Dietmar's idea.</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Mono%20Interpreter%3A%20Dietmar%27s%20idea.&In-Reply-To="
       TITLE="[Mono-devel-list] Mono Interpreter: Dietmar's idea.">miguel at ximian.com
       </A><BR>
    <I>Mon Jul 14 13:08:43 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="001507.html">[Mono-devel-list] String constants and localization
</A></li>
        <LI>Next message: <A HREF="001522.html">[Mono-devel-list] Mono Interpreter: Dietmar's idea.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1501">[ date ]</a>
              <a href="thread.html#1501">[ thread ]</a>
              <a href="subject.html#1501">[ subject ]</a>
              <a href="author.html#1501">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey guys,

   I just saw some commits from Zoltan to the interpreter to speed it
up, and that reminded me of a proof-of-concept work that Dietmar did
with the old JIT engine that might be useful again.

   Our interpreter is not very fast, because it has to track type
information on the stack, for certain opcodes, like this:

	ldc.i4.1
	ldc.i4.2
	add

    That will be an integer add, while:

	ldc.r4 1.0
	ldc.r3 2.0
	add

    Would be a 4-byte floating point addition.

    What Dietmar did before, is that he made the interpreter work not on
the original CIL byte sequence, but on the forest-of-trees that we
generated later.

    With the new JIT, we have a structure like this:

	CIL -&gt; IR1 (forest of trees) -&gt; IR2 (list of instructions) -&gt; native code

    So it occurs to me that we could plug an interpreter for the IR2
set of operations, this would have many benefits: it would reuse many
of the optimizations we perform on IR1 and IR2, and it would reuse more
of the JIT code.

Miguel

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001507.html">[Mono-devel-list] String constants and localization
</A></li>
	<LI>Next message: <A HREF="001522.html">[Mono-devel-list] Mono Interpreter: Dietmar's idea.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1501">[ date ]</a>
              <a href="thread.html#1501">[ thread ]</a>
              <a href="subject.html#1501">[ subject ]</a>
              <a href="author.html#1501">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
