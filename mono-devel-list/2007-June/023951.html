<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Error in UnixGroupInfo
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Error%20in%20UnixGroupInfo&In-Reply-To=019801c7b3fb%24768f6260%2463ae2720%24%40com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023949.html">
   <LINK REL="Next"  HREF="023944.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Error in UnixGroupInfo</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Error%20in%20UnixGroupInfo&In-Reply-To=019801c7b3fb%24768f6260%2463ae2720%24%40com"
       TITLE="[Mono-dev] Error in UnixGroupInfo">jonpryor at vt.edu
       </A><BR>
    <I>Thu Jun 21 08:31:23 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023949.html">[Mono-dev] Error in UnixGroupInfo
</A></li>
        <LI>Next message: <A HREF="023944.html">[Mono-dev] __wapi_thread_set_termination_details
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23951">[ date ]</a>
              <a href="thread.html#23951">[ thread ]</a>
              <a href="subject.html#23951">[ subject ]</a>
              <a href="author.html#23951">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2007-06-21 at 13:58 +0200, Rolf Bjarne Kvinge wrote:
&gt;<i> &gt; Con: All but one property would now be able to throw an exception,
</I>&gt;<i> &gt; while previously they wouldn't.  So currently-working &quot;broken&quot; code like
</I>&gt;<i> &gt; this: 
</I>&gt;<i> &gt; 	UnixGroupInfo g = ...
</I>&gt;<i> &gt; 	foreach (UnixUserInfo u in g.GetMembers ()) {
</I>&gt;<i> &gt; 		Console.WriteLine (&quot;User: {0}; Home: {1}&quot;,
</I>&gt;<i> &gt; 			u.UserName, u.HomeDirectory);
</I>&gt;<i> &gt; 	}
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> Maybe I missed something, but won't g.GetMembers () throw an 'invalid
</I>&gt;<i> username' exception now for this scenario?
</I>&gt;<i> 
</I>&gt;<i> In which case this code is already broken and will continue to be broken
</I>&gt;<i> with this solution...
</I>
Yes, and no.  It's a matter of what the resulting exception is.

Currently, the above will generate an ArgumentException on
mis-configured systems.  Certainly this isn't the most desirable
exception type to be throwing, but at least the developer can narrow
down the problem.

Solution (2) would throw either a NullReferenceException -- implying
that the developer did something wrong when they really didn't -- or it
would throw an InvalidOperationException.  As exceptions go,
InvalidOperationException is certainly better than NRE, but it still
implies that the developer did something wrong when, at a cursory glance
at the code, they didn't.

A NRE or IOE could be avoided by adding an IsValid property to
UnixUserInfo, but now this bloats the API.  If there were other
scenarios where it would be useful to deliberately create an &quot;invalid&quot;
UnixUserInfo instance, that would be great, but I think that's already
supported through the UnixUserInfo(Mono.Unix.Native.Passwd) constructor
instance (which allows the UnixUserInfo to return arbitrary information
-- and using this constructor would be the easiest way to get
NullReferenceException behavior from chained use of the UnixUserInfo
properties, but again, NRE's aren't very nice).

 - Jon



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023949.html">[Mono-dev] Error in UnixGroupInfo
</A></li>
	<LI>Next message: <A HREF="023944.html">[Mono-dev] __wapi_thread_set_termination_details
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23951">[ date ]</a>
              <a href="thread.html#23951">[ thread ]</a>
              <a href="subject.html#23951">[ subject ]</a>
              <a href="author.html#23951">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
