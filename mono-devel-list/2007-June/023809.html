<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] PATCH: Make Process.Start() use the same	'mono'runtime
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20PATCH%3A%20Make%20Process.Start%28%29%20use%20the%20same%0A%09%27mono%27runtime&In-Reply-To=f41uce%24q0v%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023805.html">
   <LINK REL="Next"  HREF="023813.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] PATCH: Make Process.Start() use the same	'mono'runtime</H1>
    <B>Jonathan Gilbert</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20PATCH%3A%20Make%20Process.Start%28%29%20use%20the%20same%0A%09%27mono%27runtime&In-Reply-To=f41uce%24q0v%241%40sea.gmane.org"
       TITLE="[Mono-dev] PATCH: Make Process.Start() use the same	'mono'runtime">2a5gjx302 at sneakemail.com
       </A><BR>
    <I>Mon Jun  4 20:31:51 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023805.html">[Mono-dev] PATCH: Make Process.Start() use the same 'mono'	runtime
</A></li>
        <LI>Next message: <A HREF="023813.html">[Mono-dev] PATCH: Make Process.Start() use the	same	'mono'runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23809">[ date ]</a>
              <a href="thread.html#23809">[ thread ]</a>
              <a href="subject.html#23809">[ subject ]</a>
              <a href="author.html#23809">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 10:57 PM 6/4/2007 +0200, Robert Jordan wrote:
&gt;<i>Oh, now I see that the patch is actually changing WAPI's CreateProcess.
</I>&gt;<i>
</I>&gt;<i>This means that it won't work on Windows, where the native
</I>&gt;<i>native CreateProcess is called instead.
</I>&gt;<i>
</I>&gt;<i>I think it's better to implement this in System.Diagnostics.Process
</I>&gt;<i>using an icall that exposes argv[0].
</I>
I still prefer the environment variable approach. Are there any serious
disadvantages? Here are some additional thoughts:

- My understanding is that adding icalls is generally considered undesirable.
- If it isn't going to work to have the code inside CreateProcess, then if
it is implemented using an environment variable, the code for detecting CLR
binaries can be 100% managed. The only downside is that the logic for
determining the full path to the binary then needs to be duplicated, but it
needs to be duplicated anyway if the implementation can't be inside
CreateProcess, and if this is done in managed code, it can take advantage
of things like Path.GetFullName().
- Tools can be written to compare behaviour and/or performance of .NET
applications across different runtimes. For instance, on UNIX, code aware
of the behaviour could select between mono and DotGNU by setting the
environment variable. Similarly, on Windows, code could select between mono
and the MS .NET framework by clearing and re-setting the environment
variable. Also, on any platform, performance comparisons could be easily
done in an automated fashion between different versions of mono installed
side-by-side.

Shall I rework the patch to do the check directly inside
System.Diagnostics.Process.Start?

Also, is there any advantage in keeping the code in both places, so that
anybody directly calling into io-layer can take advantage of the change as
well? Is there any disadvantage for leaving it there for those few?

Jonathan Gilbert

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023805.html">[Mono-dev] PATCH: Make Process.Start() use the same 'mono'	runtime
</A></li>
	<LI>Next message: <A HREF="023813.html">[Mono-dev] PATCH: Make Process.Start() use the	same	'mono'runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23809">[ date ]</a>
              <a href="thread.html#23809">[ thread ]</a>
              <a href="subject.html#23809">[ subject ]</a>
              <a href="author.html#23809">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
