<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Tiny System.Web.UI.WebControls.DataGrid bug
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Tiny%20System.Web.UI.WebControls.DataGrid%20bug&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023915.html">
   <LINK REL="Next"  HREF="023914.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Tiny System.Web.UI.WebControls.DataGrid bug</H1>
    <B>Sorin Peste</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Tiny%20System.Web.UI.WebControls.DataGrid%20bug&In-Reply-To="
       TITLE="[Mono-dev] Tiny System.Web.UI.WebControls.DataGrid bug">neaorin at gmail.com
       </A><BR>
    <I>Sat Jun 16 08:45:32 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023915.html">[Mono-dev] Help needed: Mono unstable after domain unload
</A></li>
        <LI>Next message: <A HREF="023914.html">[Mono-dev] Class to render simple HTML to e.g. PostScript?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23913">[ date ]</a>
              <a href="thread.html#23913">[ thread ]</a>
              <a href="subject.html#23913">[ subject ]</a>
              <a href="author.html#23913">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I've come across a tiny bug in the ASP.NET DataGrid control. I am
testing with Mono 1.2.4 on openSUSE.

Short Description:

When setting DataGrid.EditItemIndex to a nonnegative value in order to
make a row editable, text boxes for all empty string values in the
respective row contain the string '&amp;nbsp;' instead of being, well,
empty. The .NET Framework does not have this problem.

Steps to reproduce:

1. Put the two files (.aspx and .cs, see below) into a Mono ASP.NET
application
2. Build your application, then bring up the DataGridNbspTest.aspx page
in your browser
3. Click the 'Edit' link for the first row (the one with the empty
value). The TextBox in the 'value' column will contain the string '&amp;nbsp;'.

Test Files:

A. DataGridNbspTest.aspx

&lt;%@ Page language=&quot;c#&quot; Codebehind=&quot;DataGridNbspTest.aspx.cs&quot;
AutoEventWireup=&quot;false&quot; Inherits=&quot;DataGridNbspBug.DataGridNbspTest&quot; %&gt;
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot; &gt;
&lt;HTML&gt;
    &lt;body&gt;
        &lt;form id=&quot;Form1&quot; method=&quot;post&quot; runat=&quot;server&quot;&gt;
            &lt;asp:DataGrid id=&quot;DataGrid1&quot; runat=&quot;server&quot;
AutoGenerateColumns=&quot;False&quot;&gt;
                &lt;Columns&gt;
                    &lt;asp:BoundColumn DataField=&quot;Key&quot;
HeaderText=&quot;key&quot;&gt;&lt;/asp:BoundColumn&gt;
                    &lt;asp:BoundColumn DataField=&quot;Value&quot;
HeaderText=&quot;value&quot;&gt;&lt;/asp:BoundColumn&gt;
                    &lt;asp:EditCommandColumn ButtonType=&quot;LinkButton&quot;
UpdateText=&quot;Update&quot; CancelText=&quot;Cancel&quot;
EditText=&quot;Edit&quot;&gt;&lt;/asp:EditCommandColumn&gt;
                &lt;/Columns&gt;
            &lt;/asp:DataGrid&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/HTML&gt;

B. DataGridNbspTest.aspx.cs

using System;
using System.Collections;
 
namespace DataGridNbspBug
{
    public class DataGridNbspTest : System.Web.UI.Page
    {
        protected System.Web.UI.WebControls.DataGrid DataGrid1;
     
        private void Page_Load(object sender, System.EventArgs e)
        {
            if (!IsPostBack)
                ShowData();
        }
 
        private void ShowData() 
        {
            Hashtable hashtable = new Hashtable();
            hashtable.Add(&quot;EmptyValueKey&quot;, String.Empty);
            hashtable.Add(&quot;SomeKey&quot;, &quot;SomeValue&quot;);
            DataGrid1.DataSource = hashtable;
            DataBind();
        }
 
        private void DataGrid1_EditCommand(object source,
System.Web.UI.WebControls.DataGridCommandEventArgs e)
        {
            DataGrid1.EditItemIndex = e.Item.ItemIndex;
            ShowData();
        }
 
        #region Web Form Designer generated code
        override protected void OnInit(EventArgs e)
        {
            InitializeComponent();
            base.OnInit(e);
        }
         
        private void InitializeComponent()
        {    
            this.DataGrid1.EditCommand += new
System.Web.UI.WebControls.DataGridCommandEventHandler(this.DataGrid1_EditCommand);

            this.Load += new System.EventHandler(this.Page_Load);
 
        }
        #endregion
    }
}


Sorin

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023915.html">[Mono-dev] Help needed: Mono unstable after domain unload
</A></li>
	<LI>Next message: <A HREF="023914.html">[Mono-dev] Class to render simple HTML to e.g. PostScript?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23913">[ date ]</a>
              <a href="thread.html#23913">[ thread ]</a>
              <a href="subject.html#23913">[ subject ]</a>
              <a href="author.html#23913">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
