<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Dictionary`2: optimized and serialization-compatible	with MS.net
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Dictionary%602%3A%20optimized%20and%20serialization-compatible%0A%09with%20MS.net&In-Reply-To=8cca42d80706111049g7267b371tf57c6efe94ed8256%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023869.html">
   <LINK REL="Next"  HREF="023887.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Dictionary`2: optimized and serialization-compatible	with MS.net</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Dictionary%602%3A%20optimized%20and%20serialization-compatible%0A%09with%20MS.net&In-Reply-To=8cca42d80706111049g7267b371tf57c6efe94ed8256%40mail.gmail.com"
       TITLE="[Mono-dev] Dictionary`2: optimized and serialization-compatible	with MS.net">kumpera at gmail.com
       </A><BR>
    <I>Mon Jun 11 13:50:18 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023869.html">[Mono-dev] Porting to linux - replacement for winmm.dll
</A></li>
        <LI>Next message: <A HREF="023887.html">[Mono-dev] Dictionary`2: optimized	and	serialization-compatible	with MS.net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23881">[ date ]</a>
              <a href="thread.html#23881">[ thread ]</a>
              <a href="subject.html#23881">[ subject ]</a>
              <a href="author.html#23881">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I don't know much about C# generics, but isn't it possible to use partial
specialization like in c++ templates? If the type uses the built-in
object.Equals/HashCode, then the performance penalty of not caching the
HashCode would be really small.

Another issue, no transformation is applied to the HashCode() result. This
is really troublesome in case of small integer keys which will fill the
first slots and cause a a big amount of collisions. The
System.Text.RegularExpressions is a good example, as most unicode characters
are smaller than 32.000, all falling into the first bucket until the table
groups larger than 67. It that's not the case, sorry for my naive analysis.

Cheers,
Rodrigo



On 6/11/07, Juraj Skripsky &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">js at hotfeet.ch</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> On Mon, 2007-06-11 at 18:27 +0200, Juraj Skripsky wrote:
</I>&gt;<i> &gt; For key types with slow Equals() methods (e.g. String.Equals, whose
</I>&gt;<i> &gt; running time is proportional to the length of the matching substring),
</I>&gt;<i> &gt; the slow down will always be substantial.
</I>&gt;<i>
</I>&gt;<i> Forget the part about the proportional running time - it's true only for
</I>&gt;<i> strings with the same length (and without ref equality).
</I>&gt;<i>
</I>&gt;<i> This is not my day...
</I>&gt;<i>
</I>&gt;<i> Juraj
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070611/5718b24e/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070611/5718b24e/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023869.html">[Mono-dev] Porting to linux - replacement for winmm.dll
</A></li>
	<LI>Next message: <A HREF="023887.html">[Mono-dev] Dictionary`2: optimized	and	serialization-compatible	with MS.net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23881">[ date ]</a>
              <a href="thread.html#23881">[ thread ]</a>
              <a href="subject.html#23881">[ subject ]</a>
              <a href="author.html#23881">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
