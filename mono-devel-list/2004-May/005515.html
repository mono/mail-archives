<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] System.Data.OracleClient
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20System.Data.OracleClient&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005514.html">
   <LINK REL="Next"  HREF="005527.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] System.Data.OracleClient</H1>
    <B>J&#246;rg Rosenkranz</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20System.Data.OracleClient&In-Reply-To="
       TITLE="[Mono-devel-list] System.Data.OracleClient">joergr at voelcker.com
       </A><BR>
    <I>Fri May  7 04:05:38 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005514.html">[Mono-devel-list] Html32TextWriter
</A></li>
        <LI>Next message: <A HREF="005527.html">[Mono-devel-list] System.Data.OracleClient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5515">[ date ]</a>
              <a href="thread.html#5515">[ thread ]</a>
              <a href="subject.html#5515">[ subject ]</a>
              <a href="author.html#5515">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Eduard,

-----Original Message-----
From: Eduard Nesiba [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">eduard.nesiba at monetplus.cz</A>] 
Sent: Thursday, May 06, 2004 9:08 PM
To: J&#246;rg Rosenkranz
Subject: Re: [Mono-devel-list] System.Data.OracleClient




Does System.Data.OracleClient under MS.NET behave the same way?

  

Yes, it does. 

Then this would be OK to commit. Otherwise we would break compatibility between MS.NET and Mono.    

- statement char set conversion

    



Please do not convert back to Encoding.Default. The encoding 

Oracle uses is defined by the environment variable NLS_LANG.

Encoding.Default requires this variable to be set to the right encoding

for the current system. Using the current implementation you 

simply set

	

	NLS_LANG=AMERICAN_AMERICA.UTF8



and character conversion works regardless of the encoding the

local system uses. If we want a really clean implementation we have

to choose the encoding for statements and results according to NLS_LANG.



  

OK. But if we want output/input in other code page (we are using ISO8859-2) we must do this char set conversion.
Tested on Linux a Windows and everything fine according NLS_LANG settings.

 

We are using ISO-8859-1 on our systems to handle german umlauts. This works fine because UTF8
is only used as encoding between Oracle and the client. Using DefaultEncoding the setting of 
NLS_LANG depends on the local encoding settings. It has to be set to EE8ISO8859P2  on your 
systems and  WE8ISO8859P1 on our systems to allow non ASCII characters. Using the current
implementation it can always be set to UTF8 regardless of the character set the OS uses.
 
The best way to handle this would be to check NLS_LANG and use the configured encoding
in System.Data.OracleClient. I don't know if there is an easy way to do the mapping of Oracle
character set names to Mono encodings other than a big mapping table.  Maybe something like:
 
string enc;
 
switch ( oracleEncoding ) {
    case &quot;WE8ISO8859P1&quot;:    enc = &quot;iso-8859-1&quot;; break;
    case &quot;EE8ISO8859P2&quot;:    enc = &quot;iso-8859-2&quot;; break;
    ...
    default: enc = &quot;utf-8&quot;; break;    // UTF8 as fallback
}
 
Encoding oracleEncoding = Encoding.GetEncoding(enc);
 
You can find the Oracle char set names in the &quot;Database Globalization Support Guide&quot;.
 
Joerg.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040507/caa53fde/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040507/caa53fde/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005514.html">[Mono-devel-list] Html32TextWriter
</A></li>
	<LI>Next message: <A HREF="005527.html">[Mono-devel-list] System.Data.OracleClient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5515">[ date ]</a>
              <a href="thread.html#5515">[ thread ]</a>
              <a href="subject.html#5515">[ subject ]</a>
              <a href="author.html#5515">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
