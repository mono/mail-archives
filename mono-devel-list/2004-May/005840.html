<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Automated builds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Automated%20builds&In-Reply-To=007301c43d61%246df1c620%242000a8c0%40jarekxp">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005827.html">
   <LINK REL="Next"  HREF="005706.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Automated builds</H1>
    <B>Fawad Halim</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Automated%20builds&In-Reply-To=007301c43d61%246df1c620%242000a8c0%40jarekxp"
       TITLE="[Mono-devel-list] Automated builds">fawad at fawad.net
       </A><BR>
    <I>Wed May 19 08:29:29 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005827.html">[Mono-devel-list] Automated builds
</A></li>
        <LI>Next message: <A HREF="005706.html">[Mono-devel-list] Automated builds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5840">[ date ]</a>
              <a href="thread.html#5840">[ thread ]</a>
              <a href="subject.html#5840">[ subject ]</a>
              <a href="author.html#5840">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
    Replies inline:
   

Jaroslaw Kowalski wrote:

&gt;<i>1. &quot;My&quot; setup is not actually mine. I took mcs/tools/tinderbox/tinderbox.sh
</I>&gt;<i>and modified it slightly to work in my environment + I completely replaced
</I>&gt;<i>&quot;build_mono&quot; procedure according to new build system. I use master Makefile
</I>&gt;<i>that directs the build file just because it does quite a good job of
</I>&gt;<i>detecting and propagating failures.
</I>&gt;<i>  
</I>&gt;<i>
</I>I'm thinking we use your Makefile for doing the actual build, and 
buildbot to  orchestrate and log it.

&gt;<i>2. It would be good to run some unit tests along with the build. I suggest
</I>&gt;<i>running all nunit tests + testing xsp/mod_mono by wget'ting some test pages,
</I>&gt;<i>making sure they don't return 500 or 404 and comparing the output against
</I>&gt;<i>some patterns.
</I>&gt;<i>  
</I>&gt;<i>
</I>Once we have the initial install, adding stuff to the build targets is 
trivial. We just send a SIGHUP to the build clients.

&gt;<i>3. I can provide 2 machines for running the automated builds:
</I>&gt;<i>
</I>&gt;<i>Fedora Core 2/Athlon 1GHz
</I>&gt;<i>Fedora Core 1/Athlon XP/1800+ on top of colinux (www.colinux.org)
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;<i>4. I haven't looked into buildbot, but the automated build system needs to
</I>&gt;<i>be
</I>&gt;<i>
</I>&gt;<i>a) automated ;-)
</I>&gt;<i>  
</I>&gt;<i>
</I>Check. Quite automated. Triggered by CVS

&gt;<i>b) 100% repeatable - it must ALWAYS start from scratch and never rely on
</I>&gt;<i>partial builds
</I>&gt;<i>  
</I>&gt;<i>
</I>I looked at your script and the current system seems to be halfway 
there. It deletes the build directory and copies the CVS checkout 
directory again. We can merge stuff from your file to bring it full circle.

&gt;<i>I suggest following procedure:
</I>&gt;<i>
</I>&gt;<i>    1) restore a clean, known-to-work copy of entire mono tree. I usually do
</I>&gt;<i>&quot;rm -rf /opt/mono/*&quot; before that. Alternatively RPMs can be used here.
</I>&gt;<i>    2) get a clean, fresh CVS
</I>&gt;<i>    3) reconfig, make bootstrap &amp;&amp; make install
</I>&gt;<i>    4) remove non-CVS files (using cvsclean.pl or similar)
</I>&gt;<i>    5) reconfigure and make mono/mcs again which makes sure that the
</I>&gt;<i>just-installed environment is able to recompile itself
</I>&gt;<i>    6) Once 2-6 are successful, save the current mono as the new
</I>&gt;<i>known-to-work copy for future use.
</I>&gt;<i>  
</I>&gt;<i>
</I>Got it. I'll just have to play around with this procedure myself to 
verify that it works.

&gt;<i>Jarek
</I>&gt;<i>
</I>
Regards
-fawad

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005827.html">[Mono-devel-list] Automated builds
</A></li>
	<LI>Next message: <A HREF="005706.html">[Mono-devel-list] Automated builds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5840">[ date ]</a>
              <a href="thread.html#5840">[ thread ]</a>
              <a href="subject.html#5840">[ subject ]</a>
              <a href="author.html#5840">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
