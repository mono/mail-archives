<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] PATCH: XSP/mod_mono virtual hosts + advanced configuration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20PATCH%3A%20XSP/mod_mono%20virtual%20hosts%20%2B%20advanced%20configuration&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005923.html">
   <LINK REL="Next"  HREF="005534.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] PATCH: XSP/mod_mono virtual hosts + advanced configuration</H1>
    <B>Jaroslaw Kowalski</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20PATCH%3A%20XSP/mod_mono%20virtual%20hosts%20%2B%20advanced%20configuration&In-Reply-To="
       TITLE="[Mono-devel-list] PATCH: XSP/mod_mono virtual hosts + advanced configuration">jaak at zd.com.pl
       </A><BR>
    <I>Thu May  6 15:54:02 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005923.html">[Mono-devel-list] wchar vs char?
</A></li>
        <LI>Next message: <A HREF="005534.html">[Mono-devel-list] PATCH: XSP/mod_mono virtual hosts + advanced	configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5500">[ date ]</a>
              <a href="thread.html#5500">[ thread ]</a>
              <a href="subject.html#5500">[ subject ]</a>
              <a href="author.html#5500">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi guys!

Some time ago I posted a patch that adds virtual hosts support to
mod-mono-server and xsp. This (among others) makes it possible to run
multiple applications stored in root &quot;/&quot; vpath (useful in hosting
environments).

In the meantime I improved configuration methods which now allow for easier
management. You can now store your application definitions in XML files
which will be loaded at XSP/mod-mono-server.exe startup. I also fixed some
issue that prevented the patch from running on current CVS.

New patch version is attached.

RUNNING MOD_MONO:

Below is a quick and dirty guide for running multiple ASP.NET virtual hosts
with mod_mono:

1. Configure apache to handle each virtual host (see the httpd manual for
instructions)

2. Prepare one or more XML descriptor files like this and save them in some
folder with an extension '.webapp':

--------------------------
&lt;web-application&gt;
        &lt;name&gt;Root&lt;/name&gt;
        &lt;vpath&gt;/&lt;/vpath&gt;
        &lt;path&gt;/home/mono/public_html/html&lt;/path&gt;
        &lt;vhost&gt;my.host.name&lt;/vhost&gt;
        &lt;vport&gt;8888&lt;/vport&gt;
&lt;/web-application&gt;
--------------------------

Note that you can put multiple &lt;web-application&gt; tags in a single '.webapp'
file by adding a common root.

3. Once you have the file(s) in the folder, run:

$ mono mod-mono-server.exe --verbose --appconfigdir /path/to/folder

You should see something similar to:

Adding applications from *.webapp files in directory
'/home/mono/applications'
Adding applications from config file '/home/mono/applications/ma.webapp'
Registering application:
    Host:          ma.zzz.net
    Port:          any
    Virtual path:  /
    Physical path: /home/mono/zzz/html
Adding applications from config file '/home/mono/applications/root.webapp'
Registering application:
    Host:          any
    Port:          any
    Virtual path:  /
    Physical path: /home/mono/public_html/html
....

Which verifies you that the applications are configured correctly.

4. Connect to your vhost using your favourite browser and check if it's
running ok.

You may want to try various configuration methods. Available are:

- command line (same as today, except that it adds
[vhost:[vport:]]vpath:path support.
- single configuration file
- configuration directory (all '*.webapp' files in this directory are read
at startup)

Run &quot;mod-mono-server.exe --help&quot; for more information.

NOTE: Everything has been tested with 'mod_mono' on Fedora Core 1 and may or
may not work with XSP and/or other configurations. Some features aren't
supported yet (port-based virtual hosts) but they are not so common and I
have no idea how to get the necessary port information.

I'm awaiting your opinion.

Jarek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vhosts.patch
Type: application/octet-stream
Size: 15317 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040506/97e9c3ec/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040506/97e9c3ec/attachment.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005923.html">[Mono-devel-list] wchar vs char?
</A></li>
	<LI>Next message: <A HREF="005534.html">[Mono-devel-list] PATCH: XSP/mod_mono virtual hosts + advanced	configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5500">[ date ]</a>
              <a href="thread.html#5500">[ thread ]</a>
              <a href="subject.html#5500">[ subject ]</a>
              <a href="author.html#5500">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
