<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] mod_mono on Mac OS X?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20mod_mono%20on%20Mac%20OS%20X%3F&In-Reply-To=011201c4391c%247b7f3be0%242000a8c0%40jarekxp">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005697.html">
   <LINK REL="Next"  HREF="005701.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] mod_mono on Mac OS X?</H1>
    <B>Sean A Corfield</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20mod_mono%20on%20Mac%20OS%20X%3F&In-Reply-To=011201c4391c%247b7f3be0%242000a8c0%40jarekxp"
       TITLE="[Mono-devel-list] mod_mono on Mac OS X?">sean at corfield.org
       </A><BR>
    <I>Thu May 13 15:33:46 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005697.html">[Mono-devel-list] Automated builds
</A></li>
        <LI>Next message: <A HREF="005701.html">[Mono-devel-list] mod_mono on Mac OS X?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5699">[ date ]</a>
              <a href="thread.html#5699">[ thread ]</a>
              <a href="subject.html#5699">[ subject ]</a>
              <a href="author.html#5699">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I installed Mono Beta 1 on my PowerBook yesterday and was very 
impressed at how smoothly that went and how fast the compiler and 
runtime are. Nice work.

I wanted to install mod_mono so I downloaded and built xsp and mod_mono 
however, the install fails for mod_mono. I emailed Gonzalo and Daniel 
about it and they suggested I post here asking for pointers.

The problem seems to be that libmod_mono.so is not built on OS X 10.3. 
libmod_mono.0.0.0.dylib is built OK - it seems that an extra step is 
needed to convert this to a &quot;Mach-O bundled ppc&quot; called libmod_mono.so 
- any pointers?

Here's the dialog between myself and Gonzalo that explains the problem 
and the analysis so far:

El jue, 13-05-2004 a las 06:15, Sean A Corfield escribi&#243;:
&gt;<i> Hi guys,
</I>&gt;<i>
</I>&gt;<i> I just installed Mono Beta 1 on my PowerBook and wanted to get mod_mono
</I>&gt;<i> running (with Apache 1.3). The make/install of xsp went just fine. The
</I>&gt;<i> make of mod_mono seemed to go fine but it didn't make
</I>&gt;<i> src/.libs/libmod_mono.so so the install failed.
</I>&gt;<i>
</I>&gt;<i> I looked through the makefiles and couldn't see any references to
</I>&gt;<i> libmod_mono.so except for the clean targets and the apxs line so it's
</I>&gt;<i> not surprising that libmod_mono.so did not get built.
</I>&gt;<i>
</I>&gt;<i> Any idea why the configured makefiles for OS X wouldn't try to build
</I>&gt;<i> libmod_mono.so?
</I>
Can you do a 'find -name \*.so' in mod_mono and tell me if it's there?

-Gonzalo

El jue, 13-05-2004 a las 06:33, Sean A Corfield escribi&#243;:
&gt;<i> Hi Gonzalo,
</I>&gt;<i>
</I>&gt;<i> Thanx for the swift response...
</I>&gt;<i>
</I>&gt;<i> On May 12, 2004, at 9:24 PM, Gonzalo Paniagua Javier wrote:
</I>&gt;&gt;<i> Can you do a 'find -name \*.so' in mod_mono and tell me if it's there?
</I>&gt;<i>
</I>&gt;<i> Nope, no .so files at all.
</I>&gt;<i>
</I>&gt;<i> Here's the output of make / make install for mod_mono:
</I>&gt;<i>
</I>&gt;<i> [Sean-Corfields-PowerBook-G4:~scorfiel/Desktop/mod_mono-0.9] root# make
</I>&gt;<i> Making all in src
</I>&gt;<i> source='mod_mono.c' object='mod_mono.lo' libtool=yes \
</I>&gt;<i> depfile='.deps/mod_mono.Plo' tmpdepfile='.deps/mod_mono.TPlo' \
</I>&gt;<i> depmode=gcc3 /bin/sh ../depcomp \
</I>&gt;<i> /bin/sh ../libtool --mode=compile gcc -DHAVE_CONFIG_H -I. -I.
</I>&gt;<i> -I../include  -DPREFIX=\&quot;/opt/local\&quot;    -g -O2 -I/usr/include/httpd
</I>&gt;<i> -DAPACHE13 -DEAPI -c -o mod_mono.lo `test -f 'mod_mono.c' || echo
</I>&gt;<i> './'`mod_mono.c
</I>&gt;<i> mkdir .libs
</I>&gt;<i> gcc -DHAVE_CONFIG_H -I. -I. -I../include -DPREFIX=\&quot;/opt/local\&quot; -g -O2
</I>&gt;<i> -I/usr/include/httpd -DAPACHE13 -DEAPI -c mod_mono.c -MT mod_mono.lo
</I>&gt;<i> -MD -MP -MF .deps/mod_mono.TPlo  -fno-common -DPIC -o .libs/mod_mono.lo
</I>&gt;<i> gcc -DHAVE_CONFIG_H -I. -I. -I../include -DPREFIX=\&quot;/opt/local\&quot; -g -O2
</I>&gt;<i> -I/usr/include/httpd -DAPACHE13 -DEAPI -c mod_mono.c -MT mod_mono.lo
</I>&gt;<i> -MD -MP -MF .deps/mod_mono.TPlo -o mod_mono.o &gt;/dev/null 2&gt;&amp;1
</I>&gt;<i> mv -f .libs/mod_mono.lo mod_mono.lo
</I>&gt;<i> /bin/sh ../libtool --mode=link gcc  -g -O2 -I/usr/include/httpd
</I>&gt;<i> -DAPACHE13 -DEAPI   -o libmod_mono.la -rpath /opt/local/lib
</I>&gt;<i> mod_mono.lo
</I>&gt;<i> rm -fr .libs/libmod_mono.la .libs/libmod_mono.* .libs/libmod_mono.*
</I>&gt;<i> gcc -r -keep_private_externs -nostdlib -o
</I>&gt;<i> .libs/libmod_mono.0.0.0.dylib-master.o  mod_mono.lo &amp;&amp; gcc -dynamiclib
</I>&gt;<i> -flat_namespace -undefined suppress -o .libs/libmod_mono.0.0.0.dylib
</I>&gt;<i> .libs/libmod_mono.0.0.0.dylib-master.o  -lc -install_name
</I>&gt;<i> /opt/local/lib/libmod_mono.0.dylib -compatibility_version 1
</I>&gt;<i> -current_version 1.0
</I>&gt;<i> (cd .libs &amp;&amp; rm -f libmod_mono.0.dylib &amp;&amp; ln -s libmod_mono.0.0.0.dylib
</I>&gt;<i> libmod_mono.0.dylib)
</I>&gt;<i> (cd .libs &amp;&amp; rm -f libmod_mono.dylib &amp;&amp; ln -s libmod_mono.0.0.0.dylib
</I>&gt;<i> libmod_mono.dylib)
</I>&gt;<i> ar cru .libs/libmod_mono.a  mod_mono.o
</I>&gt;<i> ranlib .libs/libmod_mono.a
</I>&gt;<i> creating libmod_mono.la
</I>&gt;<i> (cd .libs &amp;&amp; rm -f libmod_mono.la &amp;&amp; ln -s ../libmod_mono.la
</I>&gt;<i> libmod_mono.la)
</I>&gt;<i> Making all in man
</I>&gt;<i> make[1]: Nothing to be done for `all'.
</I>&gt;<i> make[1]: Nothing to be done for `all-am'.
</I>&gt;<i> [Sean-Corfields-PowerBook-G4:~scorfiel/Desktop/mod_mono-0.9] root# make
</I>&gt;<i> install
</I>&gt;<i> Making install in src
</I>&gt;<i> /usr/sbin/apxs -i -a -n mono .libs/libmod_mono.so
</I>&gt;<i> [activating module `mono' in /private/etc/httpd/httpd.conf]
</I>&gt;<i> cp .libs/libmod_mono.so /usr/libexec/httpd/libmod_mono.so
</I>&gt;<i> cp: .libs/libmod_mono.so: No such file or directory
</I>&gt;<i> apxs:Break: Command failed with rc=1
</I>&gt;<i> make[1]: *** [install] Error 1
</I>&gt;<i> make: *** [install-recursive] Error 1
</I>&gt;<i> [Sean-Corfields-PowerBook-G4:~scorfiel/Desktop/mod_mono-0.9] root#
</I>
Oh, seems like it's one of those dylib files. Can you check the name of
other apache modules you have? Also send me the output of find -name
\*dylib\* in mod_mono.

Thanks.

-Gonzalo



El jue, 13-05-2004 a las 16:56, Sean A Corfield escribi&#243;:
&gt;<i> On May 13, 2004, at 12:30 AM, Gonzalo Paniagua Javier wrote:
</I>&gt;&gt;<i> Oh, seems like it's one of those dylib files. Can you check the name 
</I>&gt;&gt;<i> of
</I>&gt;&gt;<i> other apache modules you have? Also send me the output of find -name
</I>&gt;&gt;<i> \*dylib\* in mod_mono.
</I>&gt;<i>
</I>&gt;<i> That's what I thought initially but those are all of type:
</I>&gt;<i>
</I>&gt;<i> Mach-O dynamically linked shared library ppc
</I>&gt;<i>
</I>&gt;<i> whereas the Apache modules are all of type:
</I>&gt;<i>
</I>&gt;<i> Mach-O bundle ppc
</I>&gt;<i>
</I>&gt;<i> so I guess there's a missing step in the make process for Mac OS X?
</I>&gt;<i>
</I>&gt;<i> Here's the file information:
</I>
We need someone with PPP-fu (or at least that owns a PPC) to do smoe
magic in the makefiles. Can you post your problem to mono-devel list
telling about your findings? (or better yet: fix it if you can :).

Thanks.

-Gonzalo


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005697.html">[Mono-devel-list] Automated builds
</A></li>
	<LI>Next message: <A HREF="005701.html">[Mono-devel-list] mod_mono on Mac OS X?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5699">[ date ]</a>
              <a href="thread.html#5699">[ thread ]</a>
              <a href="subject.html#5699">[ subject ]</a>
              <a href="author.html#5699">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
