<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] PATCH: monolite-bootstrap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20PATCH%3A%20monolite-bootstrap&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005858.html">
   <LINK REL="Next"  HREF="005842.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] PATCH: monolite-bootstrap</H1>
    <B>Jaroslaw Kowalski</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20PATCH%3A%20monolite-bootstrap&In-Reply-To="
       TITLE="[Mono-devel-list] PATCH: monolite-bootstrap">jaak at zd.com.pl
       </A><BR>
    <I>Thu May 20 03:08:37 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005858.html">[Mono-devel-list] PATCH: monolite-bootstrap
</A></li>
        <LI>Next message: <A HREF="005842.html">[Mono-devel-list] [PATCH]Character set conversion in System.Data.OracleClient (was: System.Data.OracleClient)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5859">[ date ]</a>
              <a href="thread.html#5859">[ thread ]</a>
              <a href="subject.html#5859">[ subject ]</a>
              <a href="author.html#5859">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Can you adapt the patch and commit it yourself? I'm rather busy today and
tomorrow and Miguel asked me to commit.

I'm not sure about the System.XML stuff. I assume that if it works for a
fresh CVS checkout it must be fine. System.XML is a dependency of System so
it must be always present.

Jarek
----- Original Message ----- 
From: &quot;Raja R Harinath&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">rharinath at novell.com</A>&gt;
To: &quot;Jaroslaw Kowalski&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jaak at zd.com.pl</A>&gt;
Cc: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>&gt;
Sent: Thursday, May 20, 2004 8:26 AM
Subject: Re: [Mono-devel-list] PATCH: monolite-bootstrap


&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> &quot;Jaroslaw Kowalski&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jaak at zd.com.pl</A>&gt; writes:
</I>&gt;<i>
</I>&gt;<i> &gt; Hi guys!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I've developed a patch that provides 2 additional targets for
</I>&gt;<i> &gt; bootstrapping mono:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; $ make monolite-bootstrap
</I>&gt;<i> [snip]
</I>&gt;<i> &gt; May I commit it ?
</I>&gt;<i>
</I>&gt;<i> I don't know how you want to do it: I can work on 'make faststrap' and
</I>&gt;<i> hopefully check it in tomorrow, or monday.  If you want to have a
</I>&gt;<i> monolite-bootstrap before that, I guess you can check in something for
</I>&gt;<i> the time being.
</I>&gt;<i>
</I>&gt;<i> &gt; -.PHONY: tmpinst-dir tmpinst-runtime bootstrap stage1 stage2 stage3
</I>stage1-mono stage1-mcs bootstrap-clean bootstrap-check
&gt;<i> &gt; +.PHONY: tmpinst-dir tmpinst-runtime bootstrap stage1 stage2 stage3
</I>stage1-mono stage1-$(BOOTSTRAP_MODE) bootstrap-clean bootstrap-check
&gt;<i>
</I>&gt;<i> Just add stage1-monolite to this.  Don't use BOOTSTRAP_MODE here.
</I>&gt;<i>
</I>&gt;<i> &gt; +stage1-local-monolite:
</I>&gt;<i> &gt; + rm -f $(mcs_topdir)/mcs/mcs.exe
</I>$(mcs_topdir)/class/lib/default/mscorlib.dll
&gt;<i> &gt; + rm -f $(mcs_topdir)/class/lib/default/System.dll
</I>$(mcs_topdir)/class/lib/default/System.Xml.dll
&gt;<i> &gt; + cd $(mcs_topdir)/jay &amp;&amp; $(MAKE)
</I>&gt;<i> &gt; + rm -rf monolite_download
</I>&gt;<i> &gt; + mkdir monolite_download
</I>&gt;<i> &gt; + cd monolite_download &amp;&amp; cp ../../monolite-latest.tar.gz . &amp;&amp; tar zxvf
</I>monolite-latest.tar.gz
&gt;<i> &gt; + cp monolite_download/monolite-*/*.dll $(mcs_topdir)/class/lib/default/
</I>&gt;<i> &gt; + cp monolite_download/monolite-*/mcs.exe $(mcs_topdir)/mcs/mcs.exe
</I>&gt;<i> &gt; + rm -rf monolite_download
</I>&gt;<i>
</I>&gt;<i> OK.  Call this stage1-monolite.  But, once I put in 'make faststrap',
</I>&gt;<i> this'll become 'tmpinst-runtime', and can directly put stuff into
</I>&gt;<i> _tmpinst/lib.
</I>&gt;<i>
</I>&gt;<i> &gt;  # Use stage1 'mcs', 'mscorlib.dll' and 'System.dll' to build fuller
</I>versions
&gt;<i> &gt; @@ -77,6 +101,7 @@
</I>&gt;<i> &gt;  cd $$mcs_topdir/mcs &amp;&amp; $(MAKE) PROFILE=default ; \
</I>&gt;<i> &gt;  cd $$mcs_topdir/class/corlib &amp;&amp; $(MAKE) PROFILE=default ; \
</I>&gt;<i> &gt;  cd $$mcs_topdir/class/System &amp;&amp; $(MAKE) PROFILE=default ; \
</I>&gt;<i> &gt; + cd $$mcs_topdir/class/System.XML &amp;&amp; $(MAKE) PROFILE=default ; \
</I>&gt;<i> &gt;  cd $$mcs_topdir/class/Mono.CSharp.Debugger &amp;&amp; $(MAKE) PROFILE=default
</I>&gt;<i> &gt;  $(MAKE) tmpinst-runtime
</I>&gt;<i>
</I>&gt;<i> Re-run the build in System after System.XML.
</I>&gt;<i>
</I>&gt;<i> &gt; @@ -106,7 +131,7 @@
</I>&gt;<i> &gt;  tmpinst-runtime:
</I>&gt;<i> &gt;  tmpinst=`cd _tmpinst &amp;&amp; pwd` &amp;&amp; \
</I>&gt;<i> &gt;  mv -f $(mcs_topdir)/mcs/mcs.exe $$tmpinst/lib &amp;&amp; \
</I>&gt;<i> &gt; - mv -f $(mcs_topdir)/class/lib/default/mscorlib.dll
</I>$(mcs_topdir)/class/lib/default/System.dll $$tmpinst/lib &amp;&amp; \
&gt;<i> &gt; + mv -f $(mcs_topdir)/class/lib/default/mscorlib.dll
</I>$(mcs_topdir)/class/lib/default/System.dll
$(mcs_topdir)/class/lib/default/System.Xml.dll $$tmpinst/lib &amp;&amp; \
&gt;<i> &gt;  if test -f $(mcs_topdir)/class/lib/default/Mono.CSharp.Debugger.dll;
</I>then \
&gt;<i> &gt;    mv -f $(mcs_topdir)/class/lib/default/Mono.CSharp.Debugger.dll
</I>$$tmpinst/lib ; else : ; fi
&gt;<i>
</I>&gt;<i> I think you need to put in a check for the existance of System.Xml.dll,
</I>&gt;<i> before moving it.
</I>&gt;<i>
</I>&gt;<i> In the mcs/ tree:
</I>&gt;<i>
</I>&gt;<i> &gt; Index: Makefile
</I>&gt;<i> &gt; ===================================================================
</I>&gt;<i> &gt; RCS file: /cvs/public/mcs/Makefile,v
</I>&gt;<i> &gt; retrieving revision 1.12
</I>&gt;<i> &gt; diff -u -r1.12 Makefile
</I>&gt;<i> &gt; --- Makefile 17 May 2004 08:52:42 -0000 1.12
</I>&gt;<i> &gt; +++ Makefile 19 May 2004 10:43:06 -0000
</I>&gt;<i> &gt; @@ -1,5 +1,5 @@
</I>&gt;<i> &gt;  thisdir := .
</I>&gt;<i> &gt; -SUBDIRS := build jay mcs class mbas nunit20 monoresgen ilasm tools
</I>tests errors docs
&gt;<i> &gt; +SUBDIRS := build jay mcs monoresgen class mbas nunit20 ilasm tools
</I>tests errors docs
&gt;<i> &gt;  OVERRIDE_BARE_TARGETS = hells yeah
</I>&gt;<i> &gt;  include build/rules.make
</I>&gt;<i>
</I>&gt;<i> Then, monoresgen has to be compiled with BOOT_COMPILE instead of
</I>&gt;<i> CSCOMPILE.  This may need some tinkering with build/executable.make.
</I>&gt;<i>
</I>&gt;<i> &gt; Index: build/profiles/default.make
</I>&gt;<i> &gt; ===================================================================
</I>&gt;<i> &gt; RCS file: /cvs/public/mcs/build/profiles/default.make,v
</I>&gt;<i> &gt; retrieving revision 1.10
</I>&gt;<i> &gt; diff -u -r1.10 default.make
</I>&gt;<i> &gt; --- build/profiles/default.make 27 Apr 2004 06:00:57 -0000 1.10
</I>&gt;<i> &gt; +++ build/profiles/default.make 19 May 2004 10:43:07 -0000
</I>&gt;<i> &gt; @@ -20,6 +20,7 @@
</I>&gt;<i> &gt;  else
</I>&gt;<i> &gt;  MCS = $(PLATFORM_RUNTIME) $(BOOTSTRAP_MCS)
</I>/lib:$(topdir)/class/lib/$(PROFILE)
&gt;<i> &gt;  endif
</I>&gt;<i> &gt; +RESGEN = MONO_PATH=&quot;$(topdir)/class/lib/$(PROFILE):$$MONO_PATH&quot;
</I>$(RUNTIME) --debug $(topdir)/monoresgen/monoresgen.exe
&gt;<i>
</I>&gt;<i> To match the style of the rest, put
</I>&gt;<i>
</I>&gt;<i>   INTERNAL_RESGEN = $(RUNTIME) $(topdir)/monoresgen/monoresgen.exe
</I>&gt;<i>
</I>&gt;<i> in rules.make, and just use
</I>&gt;<i>
</I>&gt;<i>   MONO_PATH=$(topdir)/class/lib/$(PROFILE):$$MONO_PATH $(INTERNAL_RESGEN)
</I>$&lt;
&gt;<i>
</I>&gt;<i> in Npgsql/Makefile.
</I>&gt;<i>
</I>&gt;<i> - Hari
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005858.html">[Mono-devel-list] PATCH: monolite-bootstrap
</A></li>
	<LI>Next message: <A HREF="005842.html">[Mono-devel-list] [PATCH]Character set conversion in System.Data.OracleClient (was: System.Data.OracleClient)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5859">[ date ]</a>
              <a href="thread.html#5859">[ thread ]</a>
              <a href="subject.html#5859">[ subject ]</a>
              <a href="author.html#5859">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
