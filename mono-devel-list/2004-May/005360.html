<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Mono JIT on Mac OS X
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Mono%20JIT%20on%20Mac%20OS%20X&In-Reply-To=4197E00C-9D37-11D8-999C-000A95A833E0%40quark.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005320.html">
   <LINK REL="Next"  HREF="005325.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Mono JIT on Mac OS X</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Mono%20JIT%20on%20Mac%20OS%20X&In-Reply-To=4197E00C-9D37-11D8-999C-000A95A833E0%40quark.com"
       TITLE="[Mono-devel-list] Mono JIT on Mac OS X">lupus at ximian.com
       </A><BR>
    <I>Tue May  4 06:02:24 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005320.html">[Mono-devel-list] Mono JIT on Mac OS X
</A></li>
        <LI>Next message: <A HREF="005325.html">[Mono-devel-list] TYPO: runtime/Makefile.am
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5360">[ date ]</a>
              <a href="thread.html#5360">[ thread ]</a>
              <a href="subject.html#5360">[ subject ]</a>
              <a href="author.html#5360">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/03/04 Urs C Muff wrote:
&gt;<i> Mono (CVS 5/3/04 9AM MST remove all -O2 in configure, config.status)
</I>
To remove -O2 you should just run configure with CFLAGS set to empty or
-g in the env:
	CFLAGS=-g ./condigure ...
Disabling -O2 should not be needed anymore, though: I fixed a bug in the
jit which could corrupt values on the stack, recompiled with -O2 and
it's working as well as with just -g.

&gt;<i> - Still can't use mono for mcs --&gt; (Null pointer exception in 
</I>&gt;<i> Mono.CSharp.Driver:parse (Mono.CSharp.SourceFile): after error error 
</I>&gt;<i> CS2001: Source file '' could not be opened [that error does not occur 
</I>&gt;<i> with mint)
</I>
We need you to provide more info on this one. It works for me, miguel
and apparently other people, too. Do you have local patches in your
tree? Could you try disabling ICU? 
When does that error message happen? The mcs module has hundreds of
thousands of lines of code: it would be useful if you provided more
info, at least what assembly/program it's trying to compile.
Make also sure you don't have old stale versions of mono or the
assemblies around.

&gt;<i> Failed tests:
</I>&gt;<i> 
</I>&gt;<i> exception6.exe
</I>
Some ovf handling, not very important.

&gt;<i> pinvoke2.exe
</I>&gt;<i> pinvoke3.exe
</I>&gt;<i> pinvoke11.exe
</I>&gt;<i> pinvoke17.exe
</I>
Haven't investigated those yet.

&gt;<i> appdomain1.exe
</I>&gt;<i> appdomain3.exe
</I>&gt;<i> delegate1.exe
</I>&gt;<i> delegate2.exe
</I>&gt;<i> delegate3.exe
</I>&gt;<i> remoting4.exe
</I>&gt;<i> thread5.exe
</I>&gt;<i> threadpool.exe
</I>&gt;<i> threadpool1.exe
</I>
In some cases there are bugs in the stack unwinding code. Some of these
tests fails for me on x86 as well, though.

&gt;<i> vararg.exe
</I>
vararg support is not yet implemented on ppc.

&gt;<i> cpblkTest.exe
</I>&gt;<i> qt-instance.exe
</I>&gt;<i> bug-29859.exe
</I>&gt;<i> even-odd.exe
</I>
Those tests execute correctly. The issue is that they are miscompiled,
the JIT detects the code is invalid and reports an error. Note they are
miscompiled both when ilasm is run with mono and mint, so I doubt it's a
jit bug. Jackson mentioned it may be an endianess issue in PEAPI
(mcs/class/PEAPI/PEAPI.cs). If you monodis the programs you'll see
.maxstack is set to 0 in most of the methods.
So, people who run MacOSX or anybody running mono on a big-endian
machine, here's your chance for a little debugging and fixing. No jit
expertise required, no powerpc assembly to stare at, just good (old?)
C# code!

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005320.html">[Mono-devel-list] Mono JIT on Mac OS X
</A></li>
	<LI>Next message: <A HREF="005325.html">[Mono-devel-list] TYPO: runtime/Makefile.am
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5360">[ date ]</a>
              <a href="thread.html#5360">[ thread ]</a>
              <a href="subject.html#5360">[ subject ]</a>
              <a href="author.html#5360">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
