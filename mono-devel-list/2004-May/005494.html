<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] GAC and third party libraries: post Beta	planning.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GAC%20and%20third%20party%20libraries%3A%20post%20Beta%0A%09planning.&In-Reply-To=1083842612.12594.9.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005473.html">
   <LINK REL="Next"  HREF="005476.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] GAC and third party libraries: post Beta	planning.</H1>
    <B>Mike Kestner</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GAC%20and%20third%20party%20libraries%3A%20post%20Beta%0A%09planning.&In-Reply-To=1083842612.12594.9.camel%40localhost.localdomain"
       TITLE="[Mono-devel-list] GAC and third party libraries: post Beta	planning.">mkestner at ximian.com
       </A><BR>
    <I>Thu May  6 13:27:34 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005473.html">[Mono-devel-list] GAC and third party libraries: post Beta	planning.
</A></li>
        <LI>Next message: <A HREF="005476.html">[Mono-devel-list] GAC and third party libraries: post Beta planning.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5494">[ date ]</a>
              <a href="thread.html#5494">[ thread ]</a>
              <a href="subject.html#5494">[ subject ]</a>
              <a href="author.html#5494">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2004-05-06 at 06:23, Jonathan Pryor wrote:

&gt;<i> Short version: The RPM packages don't place the shared assemblies
</I>&gt;<i> directly into the GAC.  Instead, they place them under:
</I>&gt;<i> 
</I>&gt;<i> 	/usr/share/&lt;project-name&gt;
</I>&gt;<i> 
</I>&gt;<i> During RPM install, the post-install script would call gacutil /i
</I>
We discussed this approach on a conference call at one point over the
weekend, but it's all a blur to me now as to why we didn't go that way.

I personally like this approach.  Not only does it solve the
distribution problem, I think it solves several problems gracefully on
UNIX.  Here's how I see it in action for Gtk#:

The pc files can be generated at configure time because they don't
depend on gacutil to probe the *built* assembly for an install path. 
Instead, you just path to prefix/share/package for each assembly on your
libs variable.  All building happens through a prefix that can be
completely independent of the mono installation prefix.

On make install, we install all the dlls, dll.configs, and pc files to
the prefix and run gacutil /user /i  to install the dlls to the user gac
for testing.  The remaining challenge here is how to deal with people
who want to build from source instead of using packages, but install to
the system gac.  

We could probably deal with this via MAINTAINER_MODE so that when
building from cvs we use gacutil /user, but with tarballs we install to
the system gac.  Todd's idea of having a fallback for gacutil that
checks if privs are available for the system gac install and if not,
uses the user gac, would work for people who want to install from source
without root privs.

Also, what happens if both the user gac and the system gac have
gtk-sharp dll version 1.0.0.0?  If the system gac is preferred, then we
can work around the problem by bumping the assembly version for bugfix
testing, which we should probably be doing anyway once we've released
1.0.

-- 
Mike Kestner &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mkestner at ximian.com</A>&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005473.html">[Mono-devel-list] GAC and third party libraries: post Beta	planning.
</A></li>
	<LI>Next message: <A HREF="005476.html">[Mono-devel-list] GAC and third party libraries: post Beta planning.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5494">[ date ]</a>
              <a href="thread.html#5494">[ thread ]</a>
              <a href="subject.html#5494">[ subject ]</a>
              <a href="author.html#5494">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
