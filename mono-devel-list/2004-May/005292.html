<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] GAC (design) issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GAC%20%28design%29%20issues&In-Reply-To=000a01c430ed%243ffca1c0%24d9071fac%40ordab.ordab.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005291.html">
   <LINK REL="Next"  HREF="005294.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] GAC (design) issues</H1>
    <B>Todd Berman</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GAC%20%28design%29%20issues&In-Reply-To=000a01c430ed%243ffca1c0%24d9071fac%40ordab.ordab.com"
       TITLE="[Mono-devel-list] GAC (design) issues">tberman at sevenl.net
       </A><BR>
    <I>Mon May  3 05:15:57 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005291.html">[Mono-devel-list] GAC (design) issues
</A></li>
        <LI>Next message: <A HREF="005294.html">[Mono-devel-list] GAC (design) issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5292">[ date ]</a>
              <a href="thread.html#5292">[ thread ]</a>
              <a href="subject.html#5292">[ subject ]</a>
              <a href="author.html#5292">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2004-03-05 at 11:01 +0200, Gert Driesen wrote:
&gt;<i> ----- Original Message -----
</I>&gt;<i> From: &quot;Todd Berman&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">tberman at sevenl.net</A>&gt;
</I>&gt;<i> To: &quot;Gert Driesen&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">gert.driesen at pandora.be</A>&gt;
</I>&gt;<i> Cc: &quot;Ian MacLean&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ianm at activestate.com</A>&gt;; &quot;Carl-Adam Brengesj&#246;&quot;
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ca.brengesjo at telia.com</A>&gt;; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i> Sent: Monday, May 03, 2004 10:44 AM
</I>&gt;<i> Subject: Re: [Mono-devel-list] GAC (design) issues
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; On Mon, 2004-03-05 at 10:14 +0200, Gert Driesen wrote:
</I>&gt;<i> &gt; &gt; ----- Original Message -----
</I>&gt;<i> &gt; &gt; From: &quot;Todd Berman&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">tberman at sevenl.net</A>&gt;
</I>&gt;<i> &gt; &gt; To: &quot;Gert Driesen&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">gert.driesen at pandora.be</A>&gt;
</I>&gt;<i> &gt; &gt; Cc: &quot;Ian MacLean&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ianm at activestate.com</A>&gt;; &quot;Carl-Adam Brengesj&#246;&quot;
</I>&gt;<i> &gt; &gt; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ca.brengesjo at telia.com</A>&gt;; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i> &gt; &gt; Sent: Monday, May 03, 2004 8:53 AM
</I>&gt;<i> &gt; &gt; Subject: Re: [Mono-devel-list] GAC (design) issues
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; or just mcs /r:System.Data
</I>&gt;<i> &gt; have you guys even tested this? I can say that MonoDevelop (arguably the
</I>&gt;<i> &gt; largest mono project available right now) compiles, and runs *perfectly*
</I>&gt;<i> &gt; with this gac setup. the build system required *no* changes, and the
</I>&gt;<i> &gt; only changes required to the runtime was *changing* gac assumptions that
</I>&gt;<i> &gt; #D makes about the windows GAC.
</I>&gt;<i> 
</I>&gt;<i> Have you guys tested having multiple versions of a single assembly in the
</I>&gt;<i> GAC, and referencing a specific version ?  No, because it won't work (right
</I>&gt;<i> now) ... What else is there to test ?
</I>&gt;<i> 
</I>
As you said, it doesnt work right now, but since *nothing* uses this,
its not such a big deal to have it working.

&gt;<i> &gt; Well, then do: mcs /r:System.Data, Version=whatever when (and not if)
</I>&gt;<i> &gt; that gets implemented. For now its not there, but it will be.
</I>&gt;<i> 
</I>&gt;<i> Sure, that will improve portability of make files, or other build scripts :(
</I>&gt;<i> 
</I>
Its no less portable than:

export PATH=&quot;C:\Some\Win32\Path\To\Required\.NET\SDK&quot; make

which is what you *need* to do *always* with the ms framework.

&gt;<i> &gt; Ok, here is what I don't get. We implement it the same as MS, what we
</I>&gt;<i> &gt; dont do is replicate every implementation detail of their SDK. Note,
</I>&gt;<i> &gt; thats the SDK not the framework itself.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; And no, any other existing .NET tool that operates on assembly
</I>&gt;<i> &gt; references will not be affected assuming they are writing proper code.
</I>&gt;<i> &gt; In fact, MCS itself is most likely going to change from using that
</I>&gt;<i> &gt; LoadFromGac method to something else to be even more correct, however
</I>&gt;<i> &gt; the implementation itself is being worked out.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; For the 7th time (slight exaggeration), will you *PLEASE* explain why
</I>&gt;<i> &gt; getting the absolute path to the assembly is so important to you? You
</I>&gt;<i> &gt; keep explaining that you need it, without explaining why you need it. In
</I>&gt;<i> &gt; my (intentionally uninformed, as you wont explain) opinion, you are
</I>&gt;<i> &gt; doing something that takes advantage of the ms.net sdk's implementation
</I>&gt;<i> &gt; details (like pathing) and are irritated that you might have to refit
</I>&gt;<i> &gt; that code to actually work properly.
</I>&gt;<i> 
</I>&gt;<i> Todd, I'm definitely not irritated ... Sorry if I sound irritated .... Again
</I>&gt;<i> I just want to ensure Mono (and applications targeting Mono) stay portable,
</I>&gt;<i> both at runtime and at compile time ...
</I>&gt;<i> 
</I>&gt;<i> &gt; I would love to be wrong, please help me understand.
</I>&gt;<i> 
</I>&gt;<i> Its quite simple : its all about having portable build scripts (whether its
</I>&gt;<i> make or NAnt, or whatever) ...
</I>&gt;<i> 
</I>
As I said, make seems to handle this change just fine (as evidenced by
MD building with *no* changes). So at this point its NAnt.

So lets discuss the NAnt issue in specific, as this seems to be
completely local to NAnt, and not something affecting other
applications.

Keep in mind that my nant experience is very limited (no offense to nant
meant at all, just a fact). The last time i even looked at nant it
required setting some variables in a .exe.config file with locations
such as /usr/bin and /usr/lib to get it working. Has this changed?

If not, that seems to be your root problem. First of all, (and this
would obviously require some shell script frontend to nant), all of that
info can be gleaned via pkg-config at runtime, so there should be no
need for that.

Now. Assuming everything is the same, it seems that before you worry
about making portable build scripts, you need to worry about making
portable assumptions. As assuming that the path is the only way to
specify the framework version you want doesn't seem portable.

And yet again, I still dont see why you need the path to the assembly
absolutely. I would assume that your xml format for references is
something like:

&lt;reference name=&quot;AssemblyName&quot; version=&quot;0.0.0.0&quot; pubtoken=&quot;something&quot;
culture=&quot;somethingelse&quot;/&gt;

or potentially those are all optional, with an option filename
attribute.

I dont understand how there would be any problem adapting the
information given there to generate a commandline that works for mcs,
and csc given any subset of that data.

However, on the other hand, if your reference setup basically takes the
name, and tacks it onto the end of whatever is put in as the
frameworkDirectory in the config file, *THAT* is the portability
problem, not the mono GAC implementation.

&gt;<i> Gert
</I>&gt;<i> 
</I>
--Todd


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005291.html">[Mono-devel-list] GAC (design) issues
</A></li>
	<LI>Next message: <A HREF="005294.html">[Mono-devel-list] GAC (design) issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5292">[ date ]</a>
              <a href="thread.html#5292">[ thread ]</a>
              <a href="subject.html#5292">[ subject ]</a>
              <a href="author.html#5292">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
