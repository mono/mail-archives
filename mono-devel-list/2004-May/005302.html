<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] GAC (design) issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GAC%20%28design%29%20issues&In-Reply-To=40964246.3000903%40activestate.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005303.html">
   <LINK REL="Next"  HREF="005304.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] GAC (design) issues</H1>
    <B>Joshua Tauberer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GAC%20%28design%29%20issues&In-Reply-To=40964246.3000903%40activestate.com"
       TITLE="[Mono-devel-list] GAC (design) issues">tauberer at for.net
       </A><BR>
    <I>Mon May  3 09:36:30 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005303.html">[Mono-devel-list] GAC (design) issues
</A></li>
        <LI>Next message: <A HREF="005304.html">[Mono-devel-list] GAC (design) issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5302">[ date ]</a>
              <a href="thread.html#5302">[ thread ]</a>
              <a href="subject.html#5302">[ subject ]</a>
              <a href="author.html#5302">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ian MacLean wrote:
&gt;<i>  From my understanding of things .net compiler references should 
</I>&gt;<i> *always* be file paths. The assembly probing mechanism is intended for 
</I>&gt;<i> *runtime* resolution of assemblies not compile time references.
</I>
Great point.

I don't usually speak up on these issues, but is there any reason not to 
do it both ways (actually all four ways)?

It's obviously important (now obvious to me thanks to Ian) to be able to 
reference an assembly by path name.  If a /r is an absolute path, look 
for the assembly at that location.  This would be compatibile with MS. 
(e.g. /r:/usr/lib/whatever/System.dll)

Next, if the assembly is exactly the name of one of the core framework 
assemblies that MS places in the same directory as csc, load the 
appropriate version of the assembly from the GAC.  (The one that 
corresponds to the version of the invoked mcs, or something.)  This 
maintains compatibility with MS (and is a nice feature to boot).  (e.g. 
/r:System.dll)

Next, if the /r is a relative path, look for the assembly relative to 
the current directory.  (e.g. /r:./System.dll or /r:YourAssembly.dll)

Finally, if the /r specifies an assembly name, load it from the GAC with 
the normal GAC rules.  (e.g. /r:System[, Version=blah])

In the few minutes I've thought about it, it seems to me it would work 
well and not break anything, and also not require multiple copies of 
anything (provided absolute paths into the GAC work).  Apologies if I've 
missed something obvious, of course.

-- 
- Joshua Tauberer

<A HREF="http://taubz.for.net">http://taubz.for.net</A>

** Nothing Unreal Exists **



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005303.html">[Mono-devel-list] GAC (design) issues
</A></li>
	<LI>Next message: <A HREF="005304.html">[Mono-devel-list] GAC (design) issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5302">[ date ]</a>
              <a href="thread.html#5302">[ thread ]</a>
              <a href="subject.html#5302">[ subject ]</a>
              <a href="author.html#5302">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
