<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] more ppc atomic.h cleanups
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20more%20ppc%20atomic.h%20cleanups&In-Reply-To=3eb0429d050413113160f659f0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011585.html">
   <LINK REL="Next"  HREF="011612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] more ppc atomic.h cleanups</H1>
    <B>Eyal Alaluf</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20more%20ppc%20atomic.h%20cleanups&In-Reply-To=3eb0429d050413113160f659f0%40mail.gmail.com"
       TITLE="[Mono-devel-list] more ppc atomic.h cleanups">eyala at mainsoft.com
       </A><BR>
    <I>Thu Apr 14 03:21:26 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011585.html">[Mono-devel-list] more ppc atomic.h cleanups
</A></li>
        <LI>Next message: <A HREF="011612.html">[Mono-devel-list] more ppc atomic.h cleanups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11596">[ date ]</a>
              <a href="thread.html#11596">[ thread ]</a>
              <a href="subject.html#11596">[ subject ]</a>
              <a href="author.html#11596">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, all.

Shouldn't the interlocked API's implementation use sync &amp; isync for the memory
barriers?
At least in C++, we have seen many cases where people implemented their own
mutexes using interlocked APIs. Now on multiple CPU system and PPC in
particular a mutex needs to flush the memory barriers so two diferent threads
sharing the same data will be synchronized if they use the mutex properly.

Eyal.

On Wed, 13 Apr 2005, David Waite wrote:

&gt;<i> Date: Wed, 13 Apr 2005 12:31:50 -0600
</I>&gt;<i> From: David Waite &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">dwaite at gmail.com</A>&gt;
</I>&gt;<i> To: Mono Development List &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i> Subject: [Mono-devel-list] more ppc atomic.h cleanups
</I>&gt;<i>
</I>&gt;<i> Attached is a patch that performs cleanups of atomic.h for the ppc architecture:
</I>&gt;<i>
</I>&gt;<i> * InterlockedIncrement, InterlockedDecrement: use one fewer register,
</I>&gt;<i> avoid initialization and remove extra addition/subtraction at the end
</I>&gt;<i> * InterlockedExchange: remove tmp initialization, rename tmp to result
</I>&gt;<i> to be consistant with other methods
</I>&gt;<i>
</I>&gt;<i> -David Waite
</I>&gt;<i>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: atomic-ppc-cleanups.diff
Type: application/octet-stream
Size: 1730 bytes
Desc: 
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050414/7cb6ab75/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050414/7cb6ab75/attachment.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011585.html">[Mono-devel-list] more ppc atomic.h cleanups
</A></li>
	<LI>Next message: <A HREF="011612.html">[Mono-devel-list] more ppc atomic.h cleanups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11596">[ date ]</a>
              <a href="thread.html#11596">[ thread ]</a>
              <a href="subject.html#11596">[ subject ]</a>
              <a href="author.html#11596">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
