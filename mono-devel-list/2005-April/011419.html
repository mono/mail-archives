<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] UDP 40%+ loss
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20UDP%2040%25%2B%20loss&In-Reply-To=e7eeb2305040415043c74040b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011402.html">
   <LINK REL="Next"  HREF="011384.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] UDP 40%+ loss</H1>
    <B>marcusmonaghan at f2s.com</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20UDP%2040%25%2B%20loss&In-Reply-To=e7eeb2305040415043c74040b%40mail.gmail.com"
       TITLE="[Mono-devel-list] UDP 40%+ loss">marcusmonaghan at f2s.com
       </A><BR>
    <I>Tue Apr  5 14:32:52 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011402.html">[Mono-devel-list] UDP 40%+ loss
</A></li>
        <LI>Next message: <A HREF="011384.html">[Mono-devel-list] Re: CodeDom in Compiler.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11419">[ date ]</a>
              <a href="thread.html#11419">[ thread ]</a>
              <a href="subject.html#11419">[ subject ]</a>
              <a href="author.html#11419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sunny,

That's what I'm going to look into next. First I wanted to see if there was a
way of upping the buffer at an OS level. I did some research and found that by
default Suse sets the receive buffer to 112640 (and this gets doubled to
225280). Which really isn't a lot. I have up'd this and seen improved
performance.

The next thing I'm going to do is look into queues. If I was going to do this on
Windows I would probably put it into a MSMQ. Do you or anyone else know of
something I can use under linux?

Regards,
Marcus

Quoting Sunny &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sloncho at gmail.com</A>&gt;:

&gt;<i> On Apr 4, 2005 4:39 PM, <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">marcusmonaghan at f2s.com</A> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">marcusmonaghan at f2s.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; Some more information:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It seems my testing was slightly incorrect. I still think there is a
</I>&gt;<i> problem but
</I>&gt;<i> &gt; not with mono. When I did my initial testing I used a program on one
</I>&gt;<i> machine to
</I>&gt;<i> &gt; send 51000 messages on a broadcast group. I then had two programs running,
</I>&gt;<i> the
</I>&gt;<i> &gt; first was the C program and the second was the c# program. When I checked
</I>&gt;<i> the
</I>&gt;<i> &gt; results I checked the output of the C program (the file that was generated)
</I>&gt;<i> and
</I>&gt;<i> &gt; the count of messages generated by the c# program. I accidentally checked
</I>&gt;<i> the
</I>&gt;<i> &gt; input file instead of the output file and thus thought the C program wasn't
</I>&gt;<i> &gt; missing any messages. However, after running the test several more times I
</I>&gt;<i> have
</I>&gt;<i> &gt; discovered that the C program is actually missing data, probably more data
</I>&gt;<i> than
</I>&gt;<i> &gt; the c# program. This is to be expected as the C program is doing a lot more
</I>&gt;<i> &gt; work. So I think I can safely say that c# and mono on linux is just as bad
</I>&gt;<i> as C
</I>&gt;<i> &gt; :)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; However, the interesting thing is that running the same C program on
</I>&gt;<i> Unixware
</I>&gt;<i> &gt; (and i'm doubly sure) doesn't miss a message. Infact on Unixware it seems
</I>&gt;<i> to
</I>&gt;<i> &gt; buffer the messages automatically. I can see that when the sending process
</I>&gt;<i> &gt; finishes the C program is still receiving and keeps receiving for about
</I>&gt;<i> 1min
</I>&gt;<i> &gt; 45secs.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So I'm off to investigate the differences between Linux (Suse 9.2 Pro) and
</I>&gt;<i> &gt; Unixware.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks Jason for replying!!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Kind regards,
</I>&gt;<i> &gt; Marcus
</I>&gt;<i>
</I>&gt;<i> Hi Marcus,
</I>&gt;<i> If I had to deal with it, I'll put all the processing in a separate
</I>&gt;<i> thread, or will use async invocation (using the thread pool to save
</I>&gt;<i> cycles not creating my own threads) to deal with the input, thus
</I>&gt;<i> freeing the receiving loop only to get the data.
</I>&gt;<i>
</I>&gt;<i> Sunny
</I>&gt;<i> --
</I>&gt;<i> Get Firefox
</I>&gt;<i> <A HREF="http://www.spreadfirefox.com/?q=affiliates&amp;id=10745&amp;t=85">http://www.spreadfirefox.com/?q=affiliates&amp;id=10745&amp;t=85</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>

Regards,
Marcus

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011402.html">[Mono-devel-list] UDP 40%+ loss
</A></li>
	<LI>Next message: <A HREF="011384.html">[Mono-devel-list] Re: CodeDom in Compiler.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11419">[ date ]</a>
              <a href="thread.html#11419">[ thread ]</a>
              <a href="subject.html#11419">[ subject ]</a>
              <a href="author.html#11419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
