<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: CodeDom in Compiler.cs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20CodeDom%20in%20Compiler.cs&In-Reply-To=425135D7.7060901%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011419.html">
   <LINK REL="Next"  HREF="011385.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: CodeDom in Compiler.cs</H1>
    <B>Andrew Skiba</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20CodeDom%20in%20Compiler.cs&In-Reply-To=425135D7.7060901%40ximian.com"
       TITLE="[Mono-devel-list] Re: CodeDom in Compiler.cs">andrews at mainsoft.com
       </A><BR>
    <I>Mon Apr  4 11:35:26 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011419.html">[Mono-devel-list] UDP 40%+ loss
</A></li>
        <LI>Next message: <A HREF="011385.html">[Mono-devel-list] Re: CodeDom in Compiler.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11384">[ date ]</a>
              <a href="thread.html#11384">[ thread ]</a>
              <a href="subject.html#11384">[ subject ]</a>
              <a href="author.html#11384">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Atsushi Eno wrote:
&gt;&gt;<i> Yes, that's what I meant. Other similar thing is at 
</I>&gt;&gt;<i> System.Xml.Schema/BuiltInDatatype.cs:36. Does it really need 
</I>&gt;&gt;<i> System.Security.Cryptography?
</I>&gt;<i> 
</I>&gt;<i> Yes. It uses FromBase64Transform.
</I>&gt;<i> 
</I>
I see that FromBase64Transform was inserted there at svn revision 22077. 
What was the rationale of that fix? Why is FromBase64String better than 
Convert.FromBase64String? This is the relevant part of the patch:

--- System.Xml.Schema/ChangeLog (revision 22076)
+++ System.Xml.Schema/ChangeLog (revision 22077)
@@ -1,3 +1,15 @@
+2004-01-14  David Sheldon &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">dave-mono at earth.li</A>&gt;
+
+        * BuiltInDatatype.cs:
+          XsdBase64Binary - Added Length, and used more direct, less fussy,
+              Base64 decoder.

--- System.Xml.Schema/BuiltInDatatype.cs        (revision 22076)
+++ System.Xml.Schema/BuiltInDatatype.cs        (revision 22077)
@@ -12,6 +12,7 @@
  using System.Xml;
  using System.Xml.Schema;
  using System.Globalization;
+using System.Security.Cryptography;

  namespace Mono.Xml.Schema
  {
@@ -1126,21 +1094,83 @@
                 public override object ParseValue (string s,
                         XmlNameTable nameTable, XmlNamespaceManager nsmgr)
                 {
-                       return Convert.FromBase64String (Normalize (s));
+                       // If it isnt ASCII it isnt valid base64 data
+                       byte[] inArr = new 
System.Text.ASCIIEncoding().GetBytes(s);
+                       FromBase64Transform t = new FromBase64Transform();
+                       return t.TransformFinalBlock(inArr, 0, 
inArr.Length);
                 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011419.html">[Mono-devel-list] UDP 40%+ loss
</A></li>
	<LI>Next message: <A HREF="011385.html">[Mono-devel-list] Re: CodeDom in Compiler.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11384">[ date ]</a>
              <a href="thread.html#11384">[ thread ]</a>
              <a href="subject.html#11384">[ subject ]</a>
              <a href="author.html#11384">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
