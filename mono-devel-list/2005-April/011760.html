<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Assembly Manipulation Libraries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Assembly%20Manipulation%20Libraries&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011764.html">
   <LINK REL="Next"  HREF="011762.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Assembly Manipulation Libraries</H1>
    <B>Jim Purbrick</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Assembly%20Manipulation%20Libraries&In-Reply-To="
       TITLE="[Mono-devel-list] Assembly Manipulation Libraries">jimpurbrick at yahoo.co.uk
       </A><BR>
    <I>Thu Apr 28 07:57:16 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011764.html">[Mono-devel-list] Re: Regarding file sharing in .NET and Mono
</A></li>
        <LI>Next message: <A HREF="011762.html">[Mono-devel-list] Assembly Manipulation Libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11760">[ date ]</a>
              <a href="thread.html#11760">[ thread ]</a>
              <a href="subject.html#11760">[ subject ]</a>
              <a href="author.html#11760">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm currently looking at implementing thread migration
by injecting stack saving and loading code in to
methods in a similar way to the JavaGoX and
PicoThreads systems.

I want to implement the mechanism as a bytecode
translator so it will be able to work with any
language that targets the CLR. I'm currently looking
for C/C++ or C# libraries for manipulating CLR
assemblies. If you know of any, I'd really like to
hear about them.

The most promising library I've found so far is the
RAIL .NET instrumentation framework
<A HREF="http://rail.dei.uc.pt/">http://rail.dei.uc.pt/</A> which is built on top of the
Mono.PEToolkit and Reflection.Emit and allows high
level OO manipulation of assemblies. I've got the
examples working under .NET, but get errors when
running it under Mono 1.1.4 on Windows in
System.Reflection.Assembly:GetModulesInternal. Has
anyone got RAIL running on Mono? Here's the full stack
trace:

Unhandled Exception: System.NullReferenceException:
Object reference not set to
an instance of an object
in (unmanaged) 004C5AC4
in &lt;0x00004&gt; (wrapper managed-to-native)
System.Reflection.Assembly:GetModulesIn
ternal ()
in [0x00001] (at
C:\cygwin\download\mono-1.1.4\mcs\class\corlib\System.Reflectio
n\Assembly.cs:582)
System.Reflection.Assembly:GetModules (bool)
in [0x0002e] (at
C:\cygwin\download\mono-1.1.4\mcs\class\corlib\System.Reflectio
n\Assembly.cs:568)
System.Reflection.Assembly:GetModule (string)
in &lt;0x00051&gt; Rail.Reflect.TypeResolver:ResolveRModule
(Rail.Reflect.RModuleDef,s
tring)
in &lt;0x00636&gt; Rail.Reflect.RAssemblyDef:ReturnAssembly
(string)
in &lt;0x00038&gt;
Rail.Reflect.RAssemblyDef:RunAndSaveAssembly
(object[])
in [0x0000d] (at
C:\Work\RAIL\examples\RailTester.cs:340)
AssemblyReading.RailTe
ster:RunAndSaveAssembly ()
in [0x00007] (at
C:\Work\RAIL\examples\RailTester.cs:358)
AssemblyReading.RailTe
ster:.ctor (string)
in [0x00003] (at
C:\Work\RAIL\examples\RailTester.cs:363)
AssemblyReading.RailTe
ster:Main (string[])

Send instant messages to your online friends <A HREF="http://uk.messenger.yahoo.com">http://uk.messenger.yahoo.com</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011764.html">[Mono-devel-list] Re: Regarding file sharing in .NET and Mono
</A></li>
	<LI>Next message: <A HREF="011762.html">[Mono-devel-list] Assembly Manipulation Libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11760">[ date ]</a>
              <a href="thread.html#11760">[ thread ]</a>
              <a href="subject.html#11760">[ subject ]</a>
              <a href="author.html#11760">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
