<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Patches for FreeBSD (and other BSD flavors,	likely)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patches%20for%20FreeBSD%20%28and%20other%20BSD%20flavors%2C%0A%09likely%29&In-Reply-To=424F33E2.6090808%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011335.html">
   <LINK REL="Next"  HREF="011350.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Patches for FreeBSD (and other BSD flavors,	likely)</H1>
    <B>Tom McLaughlin</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patches%20for%20FreeBSD%20%28and%20other%20BSD%20flavors%2C%0A%09likely%29&In-Reply-To=424F33E2.6090808%40gmail.com"
       TITLE="[Mono-devel-list] Patches for FreeBSD (and other BSD flavors,	likely)">tmclaugh at sdf.lonestar.org
       </A><BR>
    <I>Sat Apr  2 20:29:59 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011335.html">[Mono-devel-list] Patches for FreeBSD (and other BSD flavors, likely)
</A></li>
        <LI>Next message: <A HREF="011350.html">[Mono-devel-list] Patches for FreeBSD (and other BSD flavors, likely)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11336">[ date ]</a>
              <a href="thread.html#11336">[ thread ]</a>
              <a href="subject.html#11336">[ subject ]</a>
              <a href="author.html#11336">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2005-04-03 at 03:08 +0200, Bill Middleton wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i>   I've got a working svn build on FreeBSD now, and include a patch.  
</I>&gt;<i> There are (were) several issues with getting the svn source to build 
</I>&gt;<i> under FreeBSD:
</I>&gt;<i> 
</I>&gt;<i> 1. BSD sigcontext{} structure has its members named sc_* (sc_eax, 
</I>&gt;<i> sc_ebx, sc_ecx, etc.).  A set of #define's was introduced some time back 
</I>&gt;<i> in mini-x86.h to map these BSD sigcontext{}members to the  more standard 
</I>&gt;<i> names (eax, ebx, ecx, etc), but recent changes to exceptions-x86.c, 
</I>&gt;<i> mini-x86.c and others (see patch) neglected to use the #define'd 
</I>&gt;<i> conventions.   Whenever a MonoContext{} member is accessed, it needs to 
</I>&gt;<i> be accessed using the #define'd names (SC_EAX, SC_EBX, etc) to avoid 
</I>&gt;<i> breaking *bsd* in the future. 
</I>&gt;<i> 
</I>&gt;<i> 2. libgc fixes include FREEBSD in the sigaction()'s where appropriate, 
</I>&gt;<i> and also change the suspend and restart signals for threads to STOP and 
</I>&gt;<i> CONT (from USR1 and USR2), which are the signals supported by the 
</I>&gt;<i> current pthreads implementation for FreeBSD.   These libgc changes were 
</I>&gt;<i> taken directly from the FreeBSD ports patches for Mono 1.0.6, and also 
</I>&gt;<i> include a small dyn_load.c change to test for ELF word size.  All are 
</I>&gt;<i> specific to FreeBSD.
</I>&gt;<i> 
</I>&gt;<i> I hope I've done this right, the patchfile is attached and appended.  
</I>&gt;<i> Your feedback is welcome. 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Regards, and thanks for your work on Mono.
</I>&gt;<i> 
</I>&gt;<i> Bill Middleton
</I>&gt;<i> 
</I>
THANK YOU!  I'll start adding these patches to my FreeBSD Mono port
tonight or tomorrow.  I have a Mono 1.1.x port (lang/mono-devel) sitting
in my CVS for leading up to the switch over to Mono 1.2 in the FreeBSD
ports tree.  Feel free to take a look at the rest of the patches still
in CVS here:

<A HREF="http://forge.novell.com/modules/xfmod/cvs/cvsbrowse.php/bsd-sharp/FreeBSD-ports/lang/mono-devel/files/">http://forge.novell.com/modules/xfmod/cvs/cvsbrowse.php/bsd-sharp/FreeBSD-ports/lang/mono-devel/files/</A>

I inherited the Mono port because I wanted to learn C# and have an up to
date and maintained port available in the ports tree.  Fixing the
existing bugs are over my head unfortunately.  Most of the existing
patches are from NetBSD's port and have been there for some time.  Not
sure how correct they are so I never attempted to submit them upstream.
If you're a FreeBSD user, feel free to join the mailing list I have for
Mono on FreeBSD, you can get to it from the link in my sig.  And thank
you again!

Tom

-- 

BSD# Project - Porting Mono to FreeBSD
<A HREF="http://forge.novell.com/modules/xfmod/project/?bsd-sharp">http://forge.novell.com/modules/xfmod/project/?bsd-sharp</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011335.html">[Mono-devel-list] Patches for FreeBSD (and other BSD flavors, likely)
</A></li>
	<LI>Next message: <A HREF="011350.html">[Mono-devel-list] Patches for FreeBSD (and other BSD flavors, likely)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11336">[ date ]</a>
              <a href="thread.html#11336">[ thread ]</a>
              <a href="subject.html#11336">[ subject ]</a>
              <a href="author.html#11336">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
