<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Comparing against null
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Comparing%20against%20null&In-Reply-To=b323bb98050409020055b2d934%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011500.html">
   <LINK REL="Next"  HREF="011464.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Comparing against null</H1>
    <B>Jonathan Gilbert</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Comparing%20against%20null&In-Reply-To=b323bb98050409020055b2d934%40mail.gmail.com"
       TITLE="[Mono-devel-list] Comparing against null">2a5gjx302 at sneakemail.com
       </A><BR>
    <I>Sat Apr  9 10:47:13 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011500.html">[Mono-devel-list] Comparing against null
</A></li>
        <LI>Next message: <A HREF="011464.html">[Mono-devel-list] Comparing against null
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11504">[ date ]</a>
              <a href="thread.html#11504">[ thread ]</a>
              <a href="subject.html#11504">[ subject ]</a>
              <a href="author.html#11504">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 11:00 AM 09/04/2005 +0200, Michal Moskal wrote:
&gt;<i>On Apr 9, 2005 1:07 AM, Jonathan Gilbert &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">2a5gjx302 at sneakemail.com</A>&gt; wrote:
</I>&gt;&gt;<i> :-), simply because nobody has mentioned it yet, that there IS an official
</I>&gt;&gt;<i> way to always do a reference check: ReferenceEquals(a, b). I do not know if
</I>&gt;&gt;<i> the JIT recognizes when this compares against null and simplifies it to
</I>&gt;&gt;<i> brtrue/brfalse, but it seems like an obvious -- and simple -- thing to do
</I>&gt;&gt;<i> (just need to be careful that the user hasn't created their own 'new'
</I>&gt;&gt;<i> static ReferenceEquals function).
</I>&gt;<i>
</I>&gt;<i>Well, there is an easier way, which is clearly optimized:
</I>&gt;<i>
</I>&gt;<i>  (object)foo == (object)bar
</I>
Whether this is easier in a matter of opinion :-) Firstly, it is actually 1
byte longer than calling ReferenceEquals (unless you put a space after the
function name, in which case the length is the same). Secondly, and more
importantly, it is immediately evident to the casual reader what
ReferenceEquals(a, b) means. It requires knowledge of the language in
sufficient depth to realize that overloaded operators are typed at
compile-time and that 'object' does not overload its '==' operator.

Also, even knowing this, it isn't obvious that either of
Object::ReferenceEquals and Object::operator== will be optimized when
comparing against null. It is probable, of course, but it isn't required by
the language specification.

There is no reason to not optimize both :-) ReferenceEquals exists
precisely to bypass the overloaded operator, and probably a good fraction
of the time, it's because people don't want to pass 'null' into
operator==(). (Whether they should or shouldn't be is a different matter
altogether :-)

The bottom line is, I tend to write my code for readability, and I find:

if (ReferenceEquals(a, null))

..more readable than:

if (null != (object)a)

:<i>-)
</I>
Jonathan Gilbert


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011500.html">[Mono-devel-list] Comparing against null
</A></li>
	<LI>Next message: <A HREF="011464.html">[Mono-devel-list] Comparing against null
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11504">[ date ]</a>
              <a href="thread.html#11504">[ thread ]</a>
              <a href="subject.html#11504">[ subject ]</a>
              <a href="author.html#11504">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
