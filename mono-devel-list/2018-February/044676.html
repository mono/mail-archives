<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] soft debug
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20soft%20debug&In-Reply-To=%3CCAJR-0p-FXZZZxUGK8YUe3o2K_Ygie_xQ_uD3fNZ_avGRgF-RAg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044675.html">
   <LINK REL="Next"  HREF="044678.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] soft debug</H1>
    <B>Zoltan Varga</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20soft%20debug&In-Reply-To=%3CCAJR-0p-FXZZZxUGK8YUe3o2K_Ygie_xQ_uD3fNZ_avGRgF-RAg%40mail.gmail.com%3E"
       TITLE="[Mono-dev] soft debug">vargaz at gmail.com
       </A><BR>
    <I>Tue Feb 27 14:26:26 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044675.html">[Mono-dev] soft debug
</A></li>
        <LI>Next message (by thread): <A HREF="044678.html">[Mono-dev] MONO_ARCH_EXPLICIT_NULL_CHECKS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44676">[ date ]</a>
              <a href="thread.html#44676">[ thread ]</a>
              <a href="subject.html#44676">[ subject ]</a>
              <a href="author.html#44676">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

  There is no reply, only the requests sent from the debugger to the
debuggee have a reply.

              Zoltan

On Tue, Feb 27, 2018 at 8:45 AM, pierre &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">pierre.saunier at ppmodeler.com</A>&gt;
wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Parsing the code of Mono.Debugger.Soft there is one thing I cannot figure
</I>&gt;<i> out:
</I>&gt;<i>
</I>&gt;<i> what is the expected reply when the debugger receives an event (command
</I>&gt;<i> set: 64, command: 100)? The command packet contains a list of events, each
</I>&gt;<i> with its own unique req_id (and there is an id in the header of the command
</I>&gt;<i> packet).
</I>&gt;<i>
</I>&gt;<i> If I reply with a  reply with no additional data with no error (and no
</I>&gt;<i> attached data), the application crashes... and I am not using the req_id of
</I>&gt;<i> each event.
</I>&gt;<i>
</I>&gt;<i> Where can I find either the description of the reply I should send or the
</I>&gt;<i> code that is doing it?
</I>&gt;<i>
</I>&gt;<i> and I think there is a bug:
</I>&gt;<i>
</I>&gt;<i> in the file mono &lt;<A HREF="https://github.com/mono/mono">https://github.com/mono/mono</A>&gt;/mono
</I>&gt;<i> &lt;<A HREF="https://github.com/mono/mono/tree/master/mono">https://github.com/mono/mono/tree/master/mono</A>&gt;/mini
</I>&gt;<i> &lt;<A HREF="https://github.com/mono/mono/tree/master/mono/mini">https://github.com/mono/mono/tree/master/mono/mini</A>&gt;/*debugger-agent.c*,
</I>&gt;<i> in the function process_event, line 3747, there is:
</I>&gt;<i>
</I>&gt;<i> case EVENT_KIND_VM_START:
</I>&gt;<i>      buffer_add_domainid (&amp;buf, mono_get_root_domain ());
</I>&gt;<i>      break;
</I>&gt;<i>
</I>&gt;<i> but in
</I>&gt;<i> mono &lt;<A HREF="https://github.com/mono/mono">https://github.com/mono/mono</A>&gt;/mcs
</I>&gt;<i> &lt;<A HREF="https://github.com/mono/mono/tree/master/mcs">https://github.com/mono/mono/tree/master/mcs</A>&gt;/class
</I>&gt;<i> &lt;<A HREF="https://github.com/mono/mono/tree/master/mcs/class">https://github.com/mono/mono/tree/master/mcs/class</A>&gt;/Mono.Debugger.Soft
</I>&gt;<i> &lt;<A HREF="https://github.com/mono/mono/tree/master/mcs/class/Mono.Debugger.Soft">https://github.com/mono/mono/tree/master/mcs/class/Mono.Debugger.Soft</A>&gt;/
</I>&gt;<i> Mono.Debugger.Soft
</I>&gt;<i> &lt;<A HREF="https://github.com/mono/mono/tree/master/mcs/class/Mono.Debugger.Soft/Mono.Debugger.Soft">https://github.com/mono/mono/tree/master/mcs/class/Mono.Debugger.Soft/Mono.Debugger.Soft</A>&gt;
</I>&gt;<i> /Connection.cs, line 1318:
</I>&gt;<i>   if (kind == EventKind.VM_START) {
</I>&gt;<i>    events [i] = new EventInfo (etype, req_id) { ThreadId = thread_id };
</I>&gt;<i>    //EventHandler.VMStart (req_id, thread_id, null);
</I>&gt;<i>    }...
</I>&gt;<i>
</I>&gt;<i> while it shouold be:
</I>&gt;<i>
</I>&gt;<i> if (kind == EventKind.VM_START) {
</I>&gt;<i>   long id = r.ReadId ();
</I>&gt;<i>   events [i] = new EventInfo (etype, req_id) { ThreadId = thread_id };
</I>&gt;<i>   ....
</I>&gt;<i>
</I>&gt;<i> it is not causing trouble because the VM_START is always sent alone, but
</I>&gt;<i> if this change, decoding the next events will have troubles....
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> thanks in advance,
</I>&gt;<i>
</I>&gt;<i> Pierre
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.dot.net</A>
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">http://lists.dot.net/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/mono-devel-list/attachments/20180227/9efa4d45/attachment.html">http://lists.dot.net/pipermail/mono-devel-list/attachments/20180227/9efa4d45/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044675.html">[Mono-dev] soft debug
</A></li>
	<LI>Next message (by thread): <A HREF="044678.html">[Mono-dev] MONO_ARCH_EXPLICIT_NULL_CHECKS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44676">[ date ]</a>
              <a href="thread.html#44676">[ thread ]</a>
              <a href="subject.html#44676">[ subject ]</a>
              <a href="author.html#44676">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
