<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Embedding Mono: multiple calls to mono_jit_init
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Embedding%20Mono%3A%20multiple%20calls%20to%20mono_jit_init&In-Reply-To=BANLkTim%2BHkO6aEB3BwZy5aL0Bk4nPodhNQ%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037555.html">
   <LINK REL="Next"  HREF="037560.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Embedding Mono: multiple calls to mono_jit_init</H1>
    <B>Ivo Smits</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Embedding%20Mono%3A%20multiple%20calls%20to%20mono_jit_init&In-Reply-To=BANLkTim%2BHkO6aEB3BwZy5aL0Bk4nPodhNQ%40mail.gmail.com"
       TITLE="[Mono-dev] Embedding Mono: multiple calls to mono_jit_init">Ivo at UFO-Net.nl
       </A><BR>
    <I>Fri May 13 10:01:52 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037555.html">[Mono-dev] Embedding Mono: multiple calls to mono_jit_init
</A></li>
        <LI>Next message: <A HREF="037560.html">[Mono-dev] Embedding Mono: multiple calls to mono_jit_init
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37556">[ date ]</a>
              <a href="thread.html#37556">[ thread ]</a>
              <a href="subject.html#37556">[ subject ]</a>
              <a href="author.html#37556">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wikipedia described how this can be done:
<A HREF="http://en.wikipedia.org/wiki/Dynamic_loading#In_C.2FC.2B.2B">http://en.wikipedia.org/wiki/Dynamic_loading#In_C.2FC.2B.2B</A>

It's not so difficult at all. You just need to create function pointer 
variables for the functions you want to call, then use dlopen(...) to 
open the mono library, and dlsym(...) to lookup a symbol.

However, do you really need to cleanup/unload the mono runtime? You 
could use a global variable to indicate whether the mono runtime has 
been initialized before, and if it is you don't initialize the runtime 
again. You don't need to unload the runtime itself. If you want to get 
rid of what's running, you can probably unload the assembly and 
application domain.

--
Ivo

Op 13-5-2011 15:30, Zoltan Varga schreef:
&gt;<i> You need to use mono's shared library libmono.so, and somehow make the 
</I>&gt;<i> OS load/unload it. Its not easy to do, but doable.
</I>&gt;<i>
</I>&gt;<i>                            Zoltan
</I>&gt;<i>
</I>&gt;<i> On Fri, May 13, 2011 at 2:43 PM, MartinAlexander 
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">martin.arvidsson at gmail.com</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">martin.arvidsson at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     How do you mean? I think this is what I am doing now . I admit I
</I>&gt;<i>     was unclear
</I>&gt;<i>     but the commercial application is written in native C++ and calls
</I>&gt;<i>     my native
</I>&gt;<i>     library (dll/so). In OnInit I call mono_jit_init and in OnUninit I
</I>&gt;<i>     call
</I>&gt;<i>     mono_jit_cleanup.
</I>&gt;<i>
</I>&gt;<i>     --
</I>&gt;<i>     View this message in context:
</I>&gt;<i>     <A HREF="http://mono.1490590.n4.nabble.com/Embedding-Mono-multiple-calls-to-mono-jit-init-tp3519842p3520110.html">http://mono.1490590.n4.nabble.com/Embedding-Mono-multiple-calls-to-mono-jit-init-tp3519842p3520110.html</A>
</I>&gt;<i>     Sent from the Mono - Dev mailing list archive at Nabble.com.
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     Mono-devel-list mailing list
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20110513/dec16bf6/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20110513/dec16bf6/attachment-0001.html</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037555.html">[Mono-dev] Embedding Mono: multiple calls to mono_jit_init
</A></li>
	<LI>Next message: <A HREF="037560.html">[Mono-dev] Embedding Mono: multiple calls to mono_jit_init
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37556">[ date ]</a>
              <a href="thread.html#37556">[ thread ]</a>
              <a href="subject.html#37556">[ subject ]</a>
              <a href="author.html#37556">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
