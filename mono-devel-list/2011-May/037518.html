<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [Mono-patches] [mono/mono] [6 commits] 67234d21: [utils] Added lock-free queue and allocator.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BMono-patches%5D%20%5Bmono/mono%5D%20%5B6%20commits%5D%2067234d21%3A%0A%20%5Butils%5D%20Added%20lock-free%20queue%20and%20allocator.&In-Reply-To=20110501185124.4C55222128%40mono.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037516.html">
   <LINK REL="Next"  HREF="037519.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [Mono-patches] [mono/mono] [6 commits] 67234d21: [utils] Added lock-free queue and allocator.</H1>
    <B>Vincent Povirk</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BMono-patches%5D%20%5Bmono/mono%5D%20%5B6%20commits%5D%2067234d21%3A%0A%20%5Butils%5D%20Added%20lock-free%20queue%20and%20allocator.&In-Reply-To=20110501185124.4C55222128%40mono.ximian.com"
       TITLE="[Mono-dev] [Mono-patches] [mono/mono] [6 commits] 67234d21: [utils] Added lock-free queue and allocator.">madewokherd at gmail.com
       </A><BR>
    <I>Wed May  4 01:00:28 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037516.html">[Mono-dev] Status of COM interop
</A></li>
        <LI>Next message: <A HREF="037519.html">[Mono-dev] scratchbox devkit?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37518">[ date ]</a>
              <a href="thread.html#37518">[ thread ]</a>
              <a href="subject.html#37518">[ subject ]</a>
              <a href="author.html#37518">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This commit broke my cross-compile for Windows:

libtool: compile:  i586-mingw32msvc-gcc -DHAVE_CONFIG_H -I.
-I../../../mono/utils -I../.. -I../../.. -I../../../mono
-I../../../libgc/include -I../../../eglib/src -I../../eglib/src
-DWINVER=0x0500 -D_WIN32_WINNT=0x0500 -D_WIN32_IE=0x0501 -D_UNICODE
-DUNICODE -DWIN32_THREADS -DFD_SETSIZE=1024 -D__default_codegen__ -g
-O2 -fno-strict-aliasing -Wdeclaration-after-statement -g -Wall
-Wunused -Wmissing-prototypes -Wmissing-declarations
-Wstrict-prototypes -Wmissing-prototypes -Wnested-externs
-Wpointer-arith -Wno-cast-qual -Wwrite-strings
-mno-tls-direct-seg-refs -MT lock-free-queue.lo -MD -MP -MF
.deps/lock-free-queue.Tpo -c ../../../mono/utils/lock-free-queue.c
-DDLL_EXPORT -DPIC -o .libs/lock-free-queue.o
../../../mono/utils/lock-free-queue.c:51:22: error: sys/mman.h: No
such file or directory
In file included from ../../../mono/io-layer/wapi.h:16,
                 from ../../../mono/io-layer/atomic.h:25,
                 from ../../../mono/utils/lock-free-queue.c:55:
../../../mono/io-layer/io.h:88:1: warning: &quot;MAX_PATH&quot; redefined
In file included from ../../../mono/utils/lock-free-queue.c:49:
/usr/lib/gcc/i586-mingw32msvc/4.4.4/../../../../i586-mingw32msvc/include/stdlib.h:45:1:
warning: this is the location of the previous definition
In file included from ../../../mono/io-layer/wapi.h:20,
                 from ../../../mono/io-layer/atomic.h:25,
                 from ../../../mono/utils/lock-free-queue.c:55:
../../../mono/io-layer/critical-sections.h:14:21: error: pthread.h: No
such file or directory
In file included from ../../../mono/io-layer/critical-sections.h:16,
                 from ../../../mono/io-layer/wapi.h:20,
                 from ../../../mono/io-layer/atomic.h:25,
                 from ../../../mono/utils/lock-free-queue.c:55:
../../../mono/io-layer/mono-mutex.h:165: error: expected &#8216;=&#8217;, &#8216;,&#8217;,
&#8216;;&#8217;, &#8216;asm&#8217; or &#8216;__attribute__&#8217; before &#8216;mono_mutex_t&#8217;
../../../mono/io-layer/mono-mutex.h:166: error: expected &#8216;=&#8217;, &#8216;,&#8217;,
&#8216;;&#8217;, &#8216;asm&#8217; or &#8216;__attribute__&#8217; before &#8216;mono_cond_t&#8217;
In file included from ../../../mono/io-layer/wapi.h:20,
                 from ../../../mono/io-layer/atomic.h:25,
                 from ../../../mono/utils/lock-free-queue.c:55:
../../../mono/io-layer/critical-sections.h:25: error: expected
specifier-qualifier-list before &#8216;mono_mutex_t&#8217;
In file included from ../../../mono/io-layer/wapi.h:25,
                 from ../../../mono/io-layer/atomic.h:25,
                 from ../../../mono/utils/lock-free-queue.c:55:
../../../mono/io-layer/processes.h:172: warning: function declaration
isn&#8217;t a prototype
../../../mono/io-layer/processes.h:182: warning: function declaration
isn&#8217;t a prototype
make[4]: *** [lock-free-queue.lo] Error 1
make[4]: Leaving directory `/home/meh/work/mono/build-cross-wine/mono/utils'
make[3]: *** [all] Error 2
make[3]: Leaving directory `/home/meh/work/mono/build-cross-wine/mono/utils'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/meh/work/mono/build-cross-wine/mono'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/meh/work/mono/build-cross-wine'
make: *** [all] Error 2


On Sun, May 1, 2011 at 1:51 PM, Mark Probst (<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mark.probst at gmail.com</A>)
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-patches at lists.ximian.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> &#160; Branch: refs/heads/master
</I>&gt;<i> &#160; &#160; Home: <A HREF="https://github.com/mono/mono">https://github.com/mono/mono</A>
</I>&gt;<i>
</I>&gt;<i> &#160; Commit: 67234d2111adde8fe647293d6f5b5bf181db3965
</I>&gt;<i> &#160; Author: Mark Probst &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mark.probst at gmail.com</A>&gt;
</I>&gt;<i> &#160; &#160; Date: 05/01/2011 14:49:07
</I>&gt;<i> &#160; &#160; &#160;URL: <A HREF="https://github.com/mono/mono/commit/67234d2111adde8fe647293d6f5b5bf181db3965">https://github.com/mono/mono/commit/67234d2111adde8fe647293d6f5b5bf181db3965</A>
</I>&gt;<i>
</I>&gt;<i> [utils] Added lock-free queue and allocator.
</I>&gt;<i>
</I>&gt;<i> Changed paths:
</I>&gt;<i> &#160;M mono/utils/Makefile.am
</I>&gt;<i> Added paths:
</I>&gt;<i> &#160;A mono/utils/lock-free-alloc.c
</I>&gt;<i> &#160;A mono/utils/lock-free-alloc.h
</I>&gt;<i> &#160;A mono/utils/lock-free-queue.c
</I>&gt;<i> &#160;A mono/utils/lock-free-queue.h
</I>&gt;<i>
</I>&lt;snip&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037516.html">[Mono-dev] Status of COM interop
</A></li>
	<LI>Next message: <A HREF="037519.html">[Mono-dev] scratchbox devkit?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37518">[ date ]</a>
              <a href="thread.html#37518">[ thread ]</a>
              <a href="subject.html#37518">[ subject ]</a>
              <a href="author.html#37518">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
