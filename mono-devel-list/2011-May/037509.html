<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Apache 2.2.3 and mod_mono 2.10.1 is memory leaking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Apache%202.2.3%20and%20mod_mono%202.10.1%20is%20memory%20leaking&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037530.html">
   <LINK REL="Next"  HREF="037510.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Apache 2.2.3 and mod_mono 2.10.1 is memory leaking</H1>
    <B>Nicklas Overgaard</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Apache%202.2.3%20and%20mod_mono%202.10.1%20is%20memory%20leaking&In-Reply-To="
       TITLE="[Mono-dev] Apache 2.2.3 and mod_mono 2.10.1 is memory leaking">nicklas at isharp.dk
       </A><BR>
    <I>Mon May  2 16:01:08 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037530.html">[Mono-dev] StackOverflow on System.Delegate.Equals
</A></li>
        <LI>Next message: <A HREF="037510.html">[Mono-dev] System.Threading.Monitor::Exit fails in latest trees
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37509">[ date ]</a>
              <a href="thread.html#37509">[ thread ]</a>
              <a href="subject.html#37509">[ subject ]</a>
              <a href="author.html#37509">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

We have just launched a webshop into production based on apache 2.2 with
mono 2.10. Over the weekend and today, we have noticed that Apache is
slowly consuming all of the available memory on the system. This
resulted in a hard crash of our linux server, leaving us unable to
communicate with it though HTTP and SSH.

After a restart, the problem sort of just continued. Over the past 5
hours, 1.3 GB of memory has went into the void. The mod_mono control
panel looks a bit funny - it reports the following:

&lt;control panel output&gt;
1280 22003s /ShowProduct.aspx?relationID=303
-256 1304366136s /Help.aspx
-256 1304366136s /Overview.aspx?cat=20
-256 1304366136s /ShowModule.aspx?mod=Order&amp;action=orderview&amp;id=30003959
&lt;/control panel output&gt;

It seems as if four threads are somehow stuck. The &quot;seconds&quot; counter
just keeps increasing along with the memory usage.

Does anyone have ideas on how to troubleshoot this in the production
system without causing total havoc? We would like to be able to serve
customer requests :)

I stumbled upon the following pages while digging through google:
<A HREF="http://www.mono-project.com/Debugging#Using_Valgrind_on_Mono">http://www.mono-project.com/Debugging#Using_Valgrind_on_Mono</A>
<A HREF="http://www.mono-project.com/Profiler">http://www.mono-project.com/Profiler</A> (for performing heap shots)

But i'm not quite sure how to configure apache to execute the websites
in the correct manner, collecting enough information to troubleshoot,
while still being able to serve requests.

Any help is greatly appreciated.

Best regards,

Nicklas Overgaard

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037530.html">[Mono-dev] StackOverflow on System.Delegate.Equals
</A></li>
	<LI>Next message: <A HREF="037510.html">[Mono-dev] System.Threading.Monitor::Exit fails in latest trees
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37509">[ date ]</a>
              <a href="thread.html#37509">[ thread ]</a>
              <a href="subject.html#37509">[ subject ]</a>
              <a href="author.html#37509">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
