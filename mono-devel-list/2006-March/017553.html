<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Re: UnixRegistryApi question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Re%3A%20UnixRegistryApi%20question&In-Reply-To=44136712.1040409%40cornetdesign.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017552.html">
   <LINK REL="Next"  HREF="017554.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Re: UnixRegistryApi question</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Re%3A%20UnixRegistryApi%20question&In-Reply-To=44136712.1040409%40cornetdesign.com"
       TITLE="[Mono-dev] Re: UnixRegistryApi question">robertj at gmx.net
       </A><BR>
    <I>Sat Mar 11 23:10:53 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017552.html">[Mono-dev] UnixRegistryApi question
</A></li>
        <LI>Next message: <A HREF="017554.html">[Mono-dev] Re: UnixRegistryApi question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17553">[ date ]</a>
              <a href="thread.html#17553">[ thread ]</a>
              <a href="subject.html#17553">[ subject ]</a>
              <a href="author.html#17553">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Cory,

&gt;<i> public static void ClearKey( RegistryKey key )
</I>&gt;<i> {
</I>&gt;<i>     foreach( string name in key.GetValueNames() )
</I>&gt;<i>         key.DeleteValue( name );
</I>&gt;<i>      foreach( string name in key.GetSubKeyNames() )
</I>&gt;<i>         key.DeleteSubKeyTree( name );
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Does this look to you all to be a bug in the UnixRegistryApi, or 
</I>&gt;<i> something innocuous like an invalid name? The code that is calling 
</I>&gt;<i> ClearKey verifies that the RegistryKey it is passing in isn't null. Any 
</I>&gt;<i> pointers would be appreciated. Thanks!
</I>
There is a bug in UnixRegistryAp.DeleteValue ().
The current implementation is actually deleting the entry with
the specified value and not the entry with the specified name.
Because values are not always strings, you got this
InvalidCastException.

I'm attaching a patch.

Robert
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: UnixRegistryApi.diff
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060312/bcd8e8aa/attachment.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060312/bcd8e8aa/attachment.pl</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017552.html">[Mono-dev] UnixRegistryApi question
</A></li>
	<LI>Next message: <A HREF="017554.html">[Mono-dev] Re: UnixRegistryApi question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17553">[ date ]</a>
              <a href="thread.html#17553">[ thread ]</a>
              <a href="subject.html#17553">[ subject ]</a>
              <a href="author.html#17553">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
