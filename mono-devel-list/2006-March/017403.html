<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] New managed code for unmanaged (Win32) resource	handling (SRE, PEAPI, MCS)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20New%20managed%20code%20for%20unmanaged%20%28Win32%29%20resource%0A%09handling%20%28SRE%2C%20PEAPI%2C%20MCS%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017404.html">
   <LINK REL="Next"  HREF="017450.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] New managed code for unmanaged (Win32) resource	handling (SRE, PEAPI, MCS)</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20New%20managed%20code%20for%20unmanaged%20%28Win32%29%20resource%0A%09handling%20%28SRE%2C%20PEAPI%2C%20MCS%29&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] New managed code for unmanaged (Win32) resource	handling (SRE, PEAPI, MCS)">kornelpal at hotmail.com
       </A><BR>
    <I>Fri Mar  3 10:48:57 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017404.html">[Mono-dev] performance regression with your r56160 with generic	method calls
</A></li>
        <LI>Next message: <A HREF="017450.html">[Mono-dev] [PATCH] New managed code for unmanaged (Win32) resource	handling (SRE, PEAPI, MCS)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17403">[ date ]</a>
              <a href="thread.html#17403">[ thread ]</a>
              <a href="subject.html#17403">[ subject ]</a>
              <a href="author.html#17403">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

This patch adds a fully managed and object oriented unmanaged (Win32)
resource handling internal infractructure to the class library. The most
important change is that it implements the /resource command line option of
ilasm in PEAPI.

I revorked DefineUnmanagedResource and DefineVersionInfoResource methods to
be fully MS.NET compatible. Including resource blob support.

In addition I replaced the previous unamaged implementation with the same
unmanaged code that is used in PEAPI. This has the following advantages:
- Named resource identifiers are supported
- Very large .res files are supported because resources are not retained in
memory
- Has exactly the same behavior as MS cvtres.exe that is used by the MS
runtime and csc.exe as well including the some tests and exceptions thrown
by the wrapper code of MS runtime.

I removed the internal DefineIconResource method and moved it's
functionality to mcs compiler that now uses DefineUnmanagedResource.

DefineVersionInfoResource and mcs no generate two differend and MS.NET
compatible version info resource files.

For the details please have a look at the code.

I treat these three modified units as a single because they show the usage
of my work as well.

Note that there will be no Win32 icon support in al, bmcs and gmcs until
modifications done in mcs will be ported. Also note that the mcs patch can
be used in gmcs without modifications.

Please review and approve the patch.

Korn&#233;l
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Mono.UnmanagedResources.tar.gz
Type: application/x-gzip
Size: 31878 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060303/342c4466/attachment.gz">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060303/342c4466/attachment.gz</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017404.html">[Mono-dev] performance regression with your r56160 with generic	method calls
</A></li>
	<LI>Next message: <A HREF="017450.html">[Mono-dev] [PATCH] New managed code for unmanaged (Win32) resource	handling (SRE, PEAPI, MCS)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17403">[ date ]</a>
              <a href="thread.html#17403">[ thread ]</a>
              <a href="subject.html#17403">[ subject ]</a>
              <a href="author.html#17403">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
