<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] New (faster) Implementaiton for managed CharCopy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20New%20%28faster%29%20Implementaiton%20for%20managed%20CharCopy&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017871.html">
   <LINK REL="Next"  HREF="017654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] New (faster) Implementaiton for managed CharCopy</H1>
    <B>Andreas Nahr</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20New%20%28faster%29%20Implementaiton%20for%20managed%20CharCopy&In-Reply-To="
       TITLE="[Mono-dev] New (faster) Implementaiton for managed CharCopy">ClassDevelopment at A-SoftTech.com
       </A><BR>
    <I>Fri Mar 17 19:09:20 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017871.html">[Mono-dev] Running mono on RHELv3
</A></li>
        <LI>Next message: <A HREF="017654.html">[Mono-dev] Hebrew Calendar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17645">[ date ]</a>
              <a href="thread.html#17645">[ thread ]</a>
              <a href="subject.html#17645">[ subject ]</a>
              <a href="author.html#17645">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Note to self: Wait a few minutes before sending your posts in case you have 
forgotten something ;)

Just wanted to say that I do not get the &quot;strange Result&quot; if I compile with 
csc (which somehow makes it even more strange ;)

Test: Length: 0, Source: 0, Dest: 1
  memcopy      : 563
  CharCopy     : 344
  CC autoalign : 437
  CC aligned   : 359
Test: Length: 1, Source: 0, Dest: 1
  memcopy      : 563
  CharCopy     : 375
  CC autoalign : 437
  CC aligned   : 360
Test: Length: 100, Source: 0, Dest: 1
  memcopy      : 1531
  CharCopy     : 922
  CC autoalign : 969
  CC aligned   : 1187
Test: Length: 10000, Source: 0, Dest: 1
  memcopy      : 906
  CharCopy     : 547
  CC autoalign : 532
  CC aligned   : 781

Andreas

&gt;&gt;<i> Quick summary: with one exception (which I ABSOLUTELY don't understand 
</I>&gt;&gt;<i> why)
</I>&gt;&gt;<i> ALL new Implementations are always faster, sometimes more than twice as 
</I>&gt;&gt;<i> fast
</I>&gt;&gt;<i> as current. The best overall is CharCopy autoalign. However I'm not sure 
</I>&gt;&gt;<i> if
</I>&gt;&gt;<i> this would work on non-x86 Platforms, but CC aligned should always work 
</I>&gt;&gt;<i> if I
</I>&gt;&gt;<i> understand the alignment issues right.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Test: Length: 100, Source: 0, Dest: 1
</I>&gt;&gt;<i>  memcopy      : 984
</I>&gt;&gt;<i>  CharCopy     : 625
</I>&gt;&gt;<i>  CC autoalign : 641
</I>&gt;&gt;<i>  CC aligned   : 890                  &lt;----------------------------------
</I>&gt;&gt;<i> Already weired
</I>&gt;&gt;<i> Test: Length: 10000, Source: 0, Dest: 1
</I>&gt;&gt;<i>  memcopy      : 547
</I>&gt;&gt;<i>  CharCopy     : 469
</I>&gt;&gt;<i>  CC autoalign : 469
</I>&gt;&gt;<i>  CC aligned   : 687                  &lt;----------------------------------
</I>&gt;&gt;<i> Extremely strange
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> However somebody who understands more about alignment than me (+ mono
</I>&gt;&gt;<i> unmanaged internals) has to look over it.
</I>&gt;&gt;<i> It should then be simple to replace the current implementation.
</I>&gt;&gt;<i> The Microbenchmark containing the Implementation is attached.
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017871.html">[Mono-dev] Running mono on RHELv3
</A></li>
	<LI>Next message: <A HREF="017654.html">[Mono-dev] Hebrew Calendar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17645">[ date ]</a>
              <a href="thread.html#17645">[ thread ]</a>
              <a href="subject.html#17645">[ subject ]</a>
              <a href="author.html#17645">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
