<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] BUG in System.Web.HttpResponse
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20BUG%20in%20System.Web.HttpResponse&In-Reply-To=48DEBC587E81FE428B886EA7E0F6116C4731AD%40marklar.aabenesoft.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017435.html">
   <LINK REL="Next"  HREF="017444.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] BUG in System.Web.HttpResponse</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20BUG%20in%20System.Web.HttpResponse&In-Reply-To=48DEBC587E81FE428B886EA7E0F6116C4731AD%40marklar.aabenesoft.com"
       TITLE="[Mono-dev] [PATCH] BUG in System.Web.HttpResponse">miguel at ximian.com
       </A><BR>
    <I>Mon Mar  6 14:52:49 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017435.html">[Mono-dev] [PATCH] BUG in System.Web.HttpResponse
</A></li>
        <LI>Next message: <A HREF="017444.html">[Mono-dev] xsp error (temporary interruption)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17441">[ date ]</a>
              <a href="thread.html#17441">[ thread ]</a>
              <a href="subject.html#17441">[ subject ]</a>
              <a href="author.html#17441">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> Which works fine in MS's Framework.  In Mono, however, it gives an error
</I>&gt;<i> saying &quot;CacheControl property only allows `public', `private' or
</I>&gt;<i> no-cache, for different uses, use Response.AppendHeader&quot;.  First, this
</I>&gt;<i> is an incompatibility with MS.  Secondly, Response.AddHeader calls
</I>&gt;<i> Response.AppendHeader in Mono, which sets the CacheControl property,
</I>&gt;<i> which throws this exception.  So there is a logic loop.  I propose the
</I>&gt;<i> following change to the AppendHeader method, starting on line 419:
</I>
You have found an incompatibility, but the fix is not to remove the
check, but to change the code so it can cope with multiple options being
set on the Cache-Control header.

Your work around might work for you, but there are more interactions in
the code which I would not want to modify without having an updated test
suite.

See the tests in mcs/class/System.Web/Test/standalone/response

Please resubmit when you have a proper fix, with tests.

Miguel.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017435.html">[Mono-dev] [PATCH] BUG in System.Web.HttpResponse
</A></li>
	<LI>Next message: <A HREF="017444.html">[Mono-dev] xsp error (temporary interruption)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17441">[ date ]</a>
              <a href="thread.html#17441">[ thread ]</a>
              <a href="subject.html#17441">[ subject ]</a>
              <a href="author.html#17441">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
