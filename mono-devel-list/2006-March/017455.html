<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] New managed code for unmanaged (Win32)	resourcehandling (SRE, PEAPI, MCS)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20New%20managed%20code%20for%20unmanaged%20%28Win32%29%0A%09resourcehandling%20%28SRE%2C%20PEAPI%2C%20MCS%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017450.html">
   <LINK REL="Next"  HREF="017462.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] New managed code for unmanaged (Win32)	resourcehandling (SRE, PEAPI, MCS)</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20New%20managed%20code%20for%20unmanaged%20%28Win32%29%0A%09resourcehandling%20%28SRE%2C%20PEAPI%2C%20MCS%29&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] New managed code for unmanaged (Win32)	resourcehandling (SRE, PEAPI, MCS)">kornelpal at hotmail.com
       </A><BR>
    <I>Mon Mar  6 20:25:23 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017450.html">[Mono-dev] [PATCH] New managed code for unmanaged (Win32) resource	handling (SRE, PEAPI, MCS)
</A></li>
        <LI>Next message: <A HREF="017462.html">[Mono-dev] [PATCH] New managed code for unmanaged (Win32)	resourcehandling (SRE, PEAPI, MCS)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17455">[ date ]</a>
              <a href="thread.html#17455">[ thread ]</a>
              <a href="subject.html#17455">[ subject ]</a>
              <a href="author.html#17455">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Note that SRE and PEAPI parts were not discussed yet so I am waiting
comments on those parts from component owners.

&gt;<i> Well, I would prefer to use the memory solution.
</I>&gt;<i> 1. It's faster
</I>&gt;<i> 2. It's easier to implement, no problems with file removing, creating,
</I>&gt;<i> locking, etc.
</I>&gt;<i> 3. I don't believe that anyone will link more than 10 MB resource file.
</I>
I think this is an important feature of my resource handling infrastructure
because you can use large resources if you want. But note that FileStream
provides it's own buffering over OS file cache, so you will notice no (or
little) difference for resource files smaller than 4K as they are retained
in memory by FileStream in fact. But note that only SRE is involved in this
question as mcs does no actual resource conversion.

&gt;<i> 1. You don't need to use string.Format as Report.Error accepts variable
</I>&gt;<i> arguments.
</I>
OK.

&gt;<i> 2.  Please provide error tests for as many new error codes as possible.
</I>
There are a lot of possible errors, but they are mapped to the same error
code. BTW can I place invalid .ico and .res files in errors directory where
the .cs files are?

&gt;<i> I prefer this method of code sharing instead of copying all the sources
</I>&gt;<i> to every file. Please use reflection to get instance of your internal
</I>&gt;<i> classes. I know you are using several fields, so if you really need them
</I>&gt;<i> then a solution can be to introduce interface e.g. IResource with all
</I>&gt;<i> required properties and methods and distribute only this interface file
</I>&gt;<i> across. Of course, you will need some factory method to create this
</I>&gt;<i> interface but that is the trivial part.
</I>
The Resource Table generation code is included only in SRE. Also note that
there are at least 7 classes (including DefaultResource that is the only one
directly used by mcs) that are not included in SRE as mcs generates
different default resource than SRE. And a lot of classes required by
resource converter are not included in mcs as resource conversion is
performed by SRE rather than mcs.

I belive that it's better not to extend SRE with internal methods intended
to public use if it can be achieved using public methods available in MS.NET
as well. Whats the point of doing what you suggest?

&gt;<i> +        private static void CreateDefaultResource (string fileName)
</I>&gt;<i> Try to move this method to CodeGen.Assembly class.
</I>
OK.

&gt;<i> +            return ((languageId &lt;&lt; 16) | codePage).ToString(upperCase ?
</I>&gt;<i> &quot;X8&quot; : &quot;x8&quot;, CultureInfo.InvariantCulture);
</I>&gt;<i> Please use constants instead of X8, x8
</I>
I don't really understand what you mean on using constants.

&gt;<i> Please use style
</I>&gt;<i>
</I>&gt;<i> if (this.iconFileName == null)
</I>&gt;<i>    return;
</I>
OK.

Korn&#233;l


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017450.html">[Mono-dev] [PATCH] New managed code for unmanaged (Win32) resource	handling (SRE, PEAPI, MCS)
</A></li>
	<LI>Next message: <A HREF="017462.html">[Mono-dev] [PATCH] New managed code for unmanaged (Win32)	resourcehandling (SRE, PEAPI, MCS)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17455">[ date ]</a>
              <a href="thread.html#17455">[ thread ]</a>
              <a href="subject.html#17455">[ subject ]</a>
              <a href="author.html#17455">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
