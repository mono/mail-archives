<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] GDI+ and GetNearestColor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20GDI%2B%20and%20GetNearestColor&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017422.html">
   <LINK REL="Next"  HREF="017443.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] GDI+ and GetNearestColor</H1>
    <B>Zac Bowling</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20GDI%2B%20and%20GetNearestColor&In-Reply-To="
       TITLE="[Mono-dev] GDI+ and GetNearestColor">zac at zacbowling.com
       </A><BR>
    <I>Sun Mar  5 21:37:28 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017422.html">[Mono-dev] Big untested patch for S.Runtime.InteropServices
</A></li>
        <LI>Next message: <A HREF="017443.html">[Mono-dev] GDI+ and GetNearestColor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17423">[ date ]</a>
              <a href="thread.html#17423">[ thread ]</a>
              <a href="subject.html#17423">[ subject ]</a>
              <a href="author.html#17423">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey guys,

Here is a little patch I'm using to get some 3rd party controls working 
with SWF. They seem to be calling the NearestColor in System.Drawing 
(translates to GdipGetNearestColor) which is suppost to look up the 
closest color on the current system palette. Lots of documentation 
about this being useful on Windows CE and how it will return a color 
that work on the screen (like if you got a 8 tone monochrome screen) 
but on Windows it doesn't give much detail on what it does exactly 
underneath. Returning Ok instead of NotImplemented (which causes an 
exception when it returns to the managed layer) and just passing back 
the same color in this function it receives (in the argb pointer), I 
haven't seen any issues I from my testing. I don't think we can 
implement this to easy like Win32 can.



Index: src/graphics.c
===================================================================
--- src/graphics.c      (revision 57498)
+++ src/graphics.c      (working copy)
@@ -4043,7 +4043,7 @@
GpStatus
GdipGetNearestColor (GpGraphics *graphics, ARGB *argb)
{
-       return NotImplemented;
+       return Ok;
}

GpStatus

-- 
Zac Bowling
<A HREF="http://zacbowling.com/">http://zacbowling.com/</A>





----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017422.html">[Mono-dev] Big untested patch for S.Runtime.InteropServices
</A></li>
	<LI>Next message: <A HREF="017443.html">[Mono-dev] GDI+ and GetNearestColor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17423">[ date ]</a>
              <a href="thread.html#17423">[ thread ]</a>
              <a href="subject.html#17423">[ subject ]</a>
              <a href="author.html#17423">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
