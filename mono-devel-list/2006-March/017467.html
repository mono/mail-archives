<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] New managed code for unmanaged	(Win32)resourcehandling (SRE, PEAPI, MCS)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20New%20managed%20code%20for%20unmanaged%0A%09%28Win32%29resourcehandling%20%28SRE%2C%20PEAPI%2C%20MCS%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017462.html">
   <LINK REL="Next"  HREF="017476.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] New managed code for unmanaged	(Win32)resourcehandling (SRE, PEAPI, MCS)</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20New%20managed%20code%20for%20unmanaged%0A%09%28Win32%29resourcehandling%20%28SRE%2C%20PEAPI%2C%20MCS%29&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] New managed code for unmanaged	(Win32)resourcehandling (SRE, PEAPI, MCS)">kornelpal at hotmail.com
       </A><BR>
    <I>Tue Mar  7 17:17:00 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017462.html">[Mono-dev] [PATCH] New managed code for unmanaged (Win32)	resourcehandling (SRE, PEAPI, MCS)
</A></li>
        <LI>Next message: <A HREF="017476.html">[Mono-dev] [PATCH] New managed code for unmanaged	(Win32)resourcehandling (SRE, PEAPI, MCS)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17467">[ date ]</a>
              <a href="thread.html#17467">[ thread ]</a>
              <a href="subject.html#17467">[ subject ]</a>
              <a href="author.html#17467">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;<i> My concern was not about speed, but about reliability. I just don't
</I>&gt;<i> believe it is worthwhile
</I>&gt;<i> to utilize file system when it can be done in memory.
</I>&gt;<i> Are you sure that the filename will be unique even when you run several
</I>&gt;<i> instances of mcs simultaneously ?
</I>
Now I understand that we did not understand each other previously regarding
this question.:) I was speaking about .res to resource table conversion
while you were speaking about the resource file generated by mcs.

Several moths ago I wanted to modify GetTempFileName to use a 16-bit suffix
to be fully MS.NET compatible but the result of the debate was to keep the
32-bit one as Linux has a single temp directory while Windows has per-user
temp directories so a 16-bit suffix were possiblie insufficient while a
32-bit is likely to be enough. So I belive that mcs can obtain a unique file
name. If not I think it is GetTempFileName that should be modified.

I prefer using temporary resource files because this way we don't need
non-public Mono-only functionality in SRE as we can use the public
DefineUnmanagedResource method. I think that it's reliable.

&gt;<i> Yes, you can place there any files which you require for your test case.
</I>&gt;<i> It's good practice to use same file name as is name of test file, just
</I>&gt;<i> add some prefix.
</I>
OK. Is it OK if I upload some tests for these expected error codes to SVN
before they are available in mcs?

&gt;<i> You are saying that all these files are not used by corlib ?
</I>&gt;<i> ... (file names)
</I>
Please have a look at the modified corlib.dll.sources, PEAPI.dll.sources and
mcs.exe.sources and you will see what files are needed by these assemblies.
There are no unnecessary classes included in any of these lists so you can
compare them.

There are some basic, infrastructural classes like ResourceNode and
ResourceStream that are common. PEAPI only uses .res to resource table
conversion classes. mcs only uses .res generation classes with version info
and icon support. SRE is the most compilcated it can convert .res to
resource table and generate version info resource but that version info
resource is a bit different than the one that is generated by mcs. So SRE
has no icon support that means that mcs uses about 7 files that are not used
by SRE. And of course a lot of files used by SRE are not required by mcs
that are about 14 files.

Note that unlike mcs that has a lot of classes in a single file I followed
one class per source file desing in Mono.UnmanagedResources this is why
there are so many source files.

&gt;<i> I just don't know what these x8 and X8 strings are. If you declare
</I>&gt;<i> constant with some explanatory name
</I>&gt;<i> it will be easier to understand what they are used for.
</I>
These are standard numeric format strings so I don't think they should be
documented or explained using constants. x8 is the number in hexadecimal
with 8 digits at least (zero padded) in lower case. X8 is the same in upper
case.

As these format strings are passed directly to int.ToString() it isn't
cryptic. I belive that these format strings are self-explanatory. I think
providing some explanation is like providing explanation for {0}in
string.Format(&quot;some {0} inserted&quot;, &quot;text&quot;).

For more information please refer to
<A HREF="http://msdn.microsoft.com/library/en-us/cpguide/html/cpconstandardnumericformatstrings.asp">http://msdn.microsoft.com/library/en-us/cpguide/html/cpconstandardnumericformatstrings.asp</A>

Korn&#233;l


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017462.html">[Mono-dev] [PATCH] New managed code for unmanaged (Win32)	resourcehandling (SRE, PEAPI, MCS)
</A></li>
	<LI>Next message: <A HREF="017476.html">[Mono-dev] [PATCH] New managed code for unmanaged	(Win32)resourcehandling (SRE, PEAPI, MCS)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17467">[ date ]</a>
              <a href="thread.html#17467">[ thread ]</a>
              <a href="subject.html#17467">[ subject ]</a>
              <a href="author.html#17467">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
