<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] System.Web.Mail and TLS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20System.Web.Mail%20and%20TLS&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017700.html">
   <LINK REL="Next"  HREF="017690.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] System.Web.Mail and TLS</H1>
    <B>Vladimir Krasnov</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20System.Web.Mail%20and%20TLS&In-Reply-To="
       TITLE="[Mono-dev] System.Web.Mail and TLS">vladimirk at mainsoft.com
       </A><BR>
    <I>Tue Mar 21 13:17:01 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017700.html">[Mono-dev] Re: C-&gt;C#, exceptions ...
</A></li>
        <LI>Next message: <A HREF="017690.html">[Mono-dev] System.Web.Mail and TLS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17689">[ date ]</a>
              <a href="thread.html#17689">[ thread ]</a>
              <a href="subject.html#17689">[ subject ]</a>
              <a href="author.html#17689">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I'm working now on sending email over SSL connection using
System.Web.Mail API. This feature requires connection to SMTP server to
be changed to SSL connection after EHLO command. I've implemented method
ChangeToSSLSocket (look attached patch), but I always get a
TlsException, even if I have well known certificate from trusted CA.

Unhandled Exception: System.Web.HttpException: The authentication or
decryption has failed. ---&gt; System.IO.IOException: The authentication or
decryption has failed. ---&gt; Mono.Security.Protocol.Tls.TlsException:
Invalid certificate received form server.

Please take a look at this code and suggest what to do.

Vladimir Krasnov.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: SmtpClient.cs.patch
Type: application/octet-stream
Size: 6025 bytes
Desc: SmtpClient.cs.patch
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060321/b97f53ce/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060321/b97f53ce/attachment.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SmtpStream.cs.patch
Type: application/octet-stream
Size: 2045 bytes
Desc: SmtpStream.cs.patch
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060321/b97f53ce/attachment-0001.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060321/b97f53ce/attachment-0001.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017700.html">[Mono-dev] Re: C-&gt;C#, exceptions ...
</A></li>
	<LI>Next message: <A HREF="017690.html">[Mono-dev] System.Web.Mail and TLS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17689">[ date ]</a>
              <a href="thread.html#17689">[ thread ]</a>
              <a href="subject.html#17689">[ subject ]</a>
              <a href="author.html#17689">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
