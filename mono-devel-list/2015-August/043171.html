<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Compiling Mono with debug symbols to diagnose an issue with embedded Mono 4.0.2.5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Compiling%20Mono%20with%20debug%20symbols%20to%20diagnose%20an%0A%20issue%20with%20embedded%20Mono%204.0.2.5&In-Reply-To=%3CCACmR%2BBCMFFCGkyGeTjFFWEp7M8skivcF30rczcY489osLTTuwQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043157.html">
   <LINK REL="Next"  HREF="043156.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Compiling Mono with debug symbols to diagnose an issue with embedded Mono 4.0.2.5</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Compiling%20Mono%20with%20debug%20symbols%20to%20diagnose%20an%0A%20issue%20with%20embedded%20Mono%204.0.2.5&In-Reply-To=%3CCACmR%2BBCMFFCGkyGeTjFFWEp7M8skivcF30rczcY489osLTTuwQ%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Compiling Mono with debug symbols to diagnose an issue with embedded Mono 4.0.2.5">kumpera at gmail.com
       </A><BR>
    <I>Fri Aug  7 20:43:38 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="043157.html">[Mono-dev] Compiling Mono with debug symbols to diagnose an	issue with embedded Mono 4.0.2.5
</A></li>
        <LI>Next message: <A HREF="043156.html">[Mono-dev] Embedded mono crash on exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43171">[ date ]</a>
              <a href="thread.html#43171">[ thread ]</a>
              <a href="subject.html#43171">[ subject ]</a>
              <a href="author.html#43171">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is caused because your mono was built with a bad TLS model and the
runtime is unable to find
the required offset.

Rebuild it using --with-tls=pthread should workaround your issue until
someone figures out what's wrong with
your setup.

On mixed mode debugging. It's incredibly complicated and there are no plans
to support it in the immediate future.

--
Rodrigo




On Tue, Aug 4, 2015 at 3:26 AM, &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Jean-Michel.Perraud at csiro.au</A>&gt; wrote:

&gt;<i> I have an R package with embedded Mono, on Linux, that is working on Mono
</I>&gt;<i> 3.12.x series but broken since  Mono 4.0.x.
</I>&gt;<i> Crashes with:
</I>&gt;<i>     Assertion at sgen-alloc.c:774, condition `tlab_next_addr_offset != -1'
</I>&gt;<i> not met
</I>&gt;<i>
</I>&gt;<i> Repro and details at <A HREF="https://github.com/jmp75/rClr/issues/7,">https://github.com/jmp75/rClr/issues/7,</A> but optional
</I>&gt;<i> for this present question.
</I>&gt;<i>
</I>&gt;<i> What I am after is to step in debug mode through Mono, to diagnose and
</I>&gt;<i> hopefully figure out a fix, but could not find a procedure to:
</I>&gt;<i>
</I>&gt;<i> * build/install mono from source (I know that) but with debug symbols
</I>&gt;<i> * If the above is done, can I use MonoDevelop or other graphical front-end
</I>&gt;<i> to attach to the process with embedded Mono and step through code with GDB.
</I>&gt;<i> I can already attach  MonoDevelop to the R process and catch the crash, but
</I>&gt;<i> the call stack is devoid of info and reference to the source code
</I>&gt;<i> (presumably lacking the former debug symbols?)
</I>&gt;<i>
</I>&gt;<i> Any advice on how to go about it is welcome. I hope we can do better than
</I>&gt;<i> command line gdb.
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150807/9a26f57f/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150807/9a26f57f/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043157.html">[Mono-dev] Compiling Mono with debug symbols to diagnose an	issue with embedded Mono 4.0.2.5
</A></li>
	<LI>Next message: <A HREF="043156.html">[Mono-dev] Embedded mono crash on exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43171">[ date ]</a>
              <a href="thread.html#43171">[ thread ]</a>
              <a href="subject.html#43171">[ subject ]</a>
              <a href="author.html#43171">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
