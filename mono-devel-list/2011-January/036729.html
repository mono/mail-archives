<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Problem when running winforms app on arm processor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Problem%20when%20running%20winforms%20app%20on%20arm%20processor&In-Reply-To=20A55A12-F7EB-4084-B43C-D3117597B3BA%40novell.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036721.html">
   <LINK REL="Next"  HREF="036620.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Problem when running winforms app on arm processor</H1>
    <B>Matt Johnson</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Problem%20when%20running%20winforms%20app%20on%20arm%20processor&In-Reply-To=20A55A12-F7EB-4084-B43C-D3117597B3BA%40novell.com"
       TITLE="[Mono-dev] Problem when running winforms app on arm processor">mj1856 at hotmail.com
       </A><BR>
    <I>Fri Jan 14 20:15:56 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="036721.html">[Mono-dev] Problem when running winforms app on arm processor
</A></li>
        <LI>Next message: <A HREF="036620.html">[Mono-dev] (70014)End of file found: read_data failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36729">[ date ]</a>
              <a href="thread.html#36729">[ thread ]</a>
              <a href="subject.html#36729">[ subject ]</a>
              <a href="author.html#36729">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Geoff,

 

I think this is what you asked for.  Let me know if something looks funny -
I'm new to gdb.

 

 

Breakpoint 1, mono_arch_patch_callsite (

    method_start=0x4153c048 &quot;\r\300\240&quot;, &lt;incomplete sequence \341&gt;, 

    code_ptr=0x4153c0cc &quot;&quot;, 

    addr=0x419759f8 &quot;\r\300\240\341`Y-\351H\320M\342\r\260\240&quot;, &lt;incomplete
sequence \341&gt;) at tramp-arm.c:48

48                           g_assert_not_reached ();

(gdb) x/6i code-16

   0x4153c088:     add        r0, r0, #3670016 ; 0x380000

   0x4153c08c:     ldr          r0, [r0]

   0x4153c090:     cmp       r0, #0

   0x4153c094:     bne        0x4153c0d8

   0x4153c098:     mov       r0, #17

   0x4153c09c:     ldr          r12, [pc, #0]        ; 0x4153c0a4

(gdb)

 

 

Thanks,

Matt

 

 

From: Geoff Norton [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">gnorton.novell at gmail.com</A>] On Behalf Of Geoff
Norton
Sent: Friday, January 14, 2011 10:03 AM
To: Matt Johnson
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Problem when running winforms app on arm processor

 

Matt,

 

  We cannot replicate this problem, so you'll need to help narrow down the
field.  Can you get the gdb output of

 

x/6i code-16

 

when gdb is at tramp-arm.c line 48?

 

Thanks

 

-g

 

On 2011-01-14, at 11:28 AM, Matt Johnson wrote:





PLEA FOR URGENT HELP

 

Almost 7 weeks and not a single response on this except to confirm that
another is also having the problem.

 

Is there no one that can shed light on what is going on here?  I cannot run
any winforms apps on an arm processor without hitting the assertion in
tramp-arm.c.

 

I am willing to help in any way I can, but I'm not an assembly language
programmer, nor am I familiar with reasons behind the patching that is going
on in the arm trampoline, so I really need some assistance.

 

Thank You.

Matt

 

From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf Of Matt Johnson
Sent: Monday, January 03, 2011 10:24 AM
To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Problem when running winforms app on arm processor

 

No, I have no resolution yet.  I have simplified my winforms test
application such that it is a single form with a single text &quot;hello world&quot;
label and no code logic whatsoever.  It crashes in the exact same manner.

 

One point I am unclear on is that I read in some old posts that the thumb
instruction set is not supported.  I am not compiling with thumb enabled,
but I am using a toolchain that targets armv4t instead of straight armv4.  I
actually found it very difficult to even find an &quot;non-t&quot; toolchain out there
- I'd have to compile one from scratch if this is the problem.  I don't see
how it could be though.  Especially since it is only winforms apps that are
failing.

 

Can someone with some expertise with the arm trampoline please chime in
here?  It is fairly urgent.

 

Thanks,

Matt

 

From: Jae Kim [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jkim0130 at gmail.com</A>] 
Sent: Friday, December 17, 2010 10:52 AM
To: mj1856
Subject: Re: [Mono-dev] Problem when running winforms app on arm processor

 

Hi Matt,

 

Did you ever resolve this?  I'm experiencing the same problem.

 

Thanks,

Jae

On Mon, Nov 29, 2010 at 7:44 PM, mj1856 &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mj1856 at hotmail.com</A>&gt; wrote:


I have cross compiled mono 2.8 with libgdiplus for the s3c2410 processor I
am
running. It is an arm920t (armv4t architecture).  I use scratchbox with a
recent codesourcery toolchain.

I have two test applications that I wrote in visual studio targeting .net
2.0.  The first is a console app with a basic &quot;Hello world&quot;.  It works
perfectly.  The second is a winforms app with a single form that has a
simple label that gets updated with a timer control to show the current date
and time. (basically a digital clock).  Running it, I get the following
error:

* Assertion: should not be reached at tramp-arm.c:48

Checking /mono/mini/tramp-arm.c, the function in question is
mono_arch_patch_callsite, which has two blocks of code, where one of them is
supposed to run.  I'm not sure exactly what it's checking here, but neither
block gets executed, so it hits the assertion.  Can anyone shed some light
on what might be the problem?

One note that may or may not be of interest, but because the codesourcery
toolchain is multilib, I have to specify -march=armv4t on the CFLAGS passed
to configure mono.  This appears to be working, as my console app works
fine.

I do have a running X server, which I've tested with other native apps, so I
know at least that part is functional.

Thanks,
Matt
--
View this message in context:
<A HREF="http://mono.1490590.n4.nabble.com/Problem-when-running-winforms-app-on-arm-p">http://mono.1490590.n4.nabble.com/Problem-when-running-winforms-app-on-arm-p</A>
rocessor-tp3064820p3064820.html
Sent from the Mono - Dev mailing list archive at Nabble.com.
_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>

 

_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20110114/e27af06a/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20110114/e27af06a/attachment-0001.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036721.html">[Mono-dev] Problem when running winforms app on arm processor
</A></li>
	<LI>Next message: <A HREF="036620.html">[Mono-dev] (70014)End of file found: read_data failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36729">[ date ]</a>
              <a href="thread.html#36729">[ thread ]</a>
              <a href="subject.html#36729">[ subject ]</a>
              <a href="author.html#36729">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
