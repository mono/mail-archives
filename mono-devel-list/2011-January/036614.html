<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Is it possible to use .NET TeamFoundation libraries on Linux mono?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Is%20it%20possible%20to%20use%20.NET%20TeamFoundation%20libraries%0A%20on%20Linux%20mono%3F&In-Reply-To=1293867991534-3170015.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036612.html">
   <LINK REL="Next"  HREF="036615.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Is it possible to use .NET TeamFoundation libraries on Linux mono?</H1>
    <B>CodeSlinger</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Is%20it%20possible%20to%20use%20.NET%20TeamFoundation%20libraries%0A%20on%20Linux%20mono%3F&In-Reply-To=1293867991534-3170015.post%40n4.nabble.com"
       TITLE="[Mono-dev] Is it possible to use .NET TeamFoundation libraries on Linux mono?">dkolb at emdeon.com
       </A><BR>
    <I>Sat Jan  1 16:42:22 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="036612.html">[Mono-dev] Is it possible to use .NET TeamFoundation libraries on	Linux mono?
</A></li>
        <LI>Next message: <A HREF="036615.html">[Mono-dev] Is it possible to use .NET TeamFoundation libraries on Linux mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36614">[ date ]</a>
              <a href="thread.html#36614">[ thread ]</a>
              <a href="subject.html#36614">[ subject ]</a>
              <a href="author.html#36614">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Well I was not so far able to use the actual .NET 4 assemblies on Linux mono
but I did get the below app, that gets the latest changeset for a branch,
working on both Windows and Linux, using the opentf libraries. Sure would
like to see the openrt libraries get updated since they do not support the
newer classes and signatures (see my comments).

The below code runs on both systems if reference the openrt assemblies.

using System;
using System.Net;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.VersionControl.Client;

namespace GetTfsChangeset
{
    class Program
    {
        static void Main(string[] args)
        {
            string lPath = &quot;$/MyBranch/Main&quot;;

            //string lServer = &quot;MyServer.com&quot;; // this works in Windows but
not in Linux
            //string lServer = &quot;<A HREF="http://xxx.xx.xx.xxx:8080&quot;;">http://xxx.xx.xx.xxx:8080&quot;;</A> // this works in
both
            string lServer = &quot;<A HREF="http://MyServer.com:8080&quot;;">http://MyServer.com:8080&quot;;</A> // this works in
both

            // all of these work on windows and indeed fails if pw is bad -
are supposedly obsolete though! Linux needs the last one with the domain!
            //TeamFoundationServer tfs = new TeamFoundationServer(lServer);
            //TeamFoundationServer tfs = new TeamFoundationServer(lServer,
new NetworkCredential(&quot;user&quot;, &quot;password&quot;));
            //TeamFoundationServer tfs = new TeamFoundationServer(lServer,
new NetworkCredential(&quot;user&quot;, &quot;password&quot;, &quot;domain&quot;));
            //VersionControlServer vcs =
(VersionControlServer)tfs.GetService(typeof(VersionControlServer));

            // this does not work with the openrt libraries - mismatch of
parameters - and does not give obsolete errors on Linux
            TeamFoundationServer tfs =
TeamFoundationServerFactory.GetServer(lServer, new NetworkCredential(&quot;user&quot;,
&quot;password&quot;, &quot;domain&quot;));
            VersionControlServer vcs =
(VersionControlServer)tfs.GetService(typeof(VersionControlServer));

            // this is the newer way to do it but the class is apparently
not avail in the Linux openrt libraries
            //TfsTeamProjectCollection tfscoll = new
TfsTeamProjectCollection(new Uri(lServer), new NetworkCredential(&quot;user&quot;,
&quot;password&quot;));
            //VersionControlServer vcs =
(VersionControlServer)tfscoll.GetService(typeof(VersionControlServer));

            // get the changesets - currently stops after one which should
be the latest
            IEnumerable changesets = vcs.QueryHistory(lPath,
VersionSpec.Latest, 0, RecursionType.Full, null, null, null, 1, false,
false);

            Console.WriteLine(&quot;Changesets for path '{0}'.&quot;, lPath);
            foreach (Changeset changeset in changesets)
            {
                Console.WriteLine(&quot;Changeset id {0}, Comment '{1}'.&quot;,
changeset.ChangesetId, changeset.Comment);
            }

            Console.WriteLine(&quot;Hit ENTER to exit...&quot;);
            Console.ReadLine();
        }
    }
}


-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Is-it-possible-to-use-NET-TeamFoundation-libraries-on-Linux-mono-tp3170015p3170471.html">http://mono.1490590.n4.nabble.com/Is-it-possible-to-use-NET-TeamFoundation-libraries-on-Linux-mono-tp3170015p3170471.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036612.html">[Mono-dev] Is it possible to use .NET TeamFoundation libraries on	Linux mono?
</A></li>
	<LI>Next message: <A HREF="036615.html">[Mono-dev] Is it possible to use .NET TeamFoundation libraries on Linux mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36614">[ date ]</a>
              <a href="thread.html#36614">[ thread ]</a>
              <a href="subject.html#36614">[ subject ]</a>
              <a href="author.html#36614">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
