<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] WCF in Mono 2.6.7
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20WCF%20in%20Mono%202.6.7&In-Reply-To=4D33ECDC.5030800%40veritas-vos-liberabit.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036738.html">
   <LINK REL="Next"  HREF="036746.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] WCF in Mono 2.6.7</H1>
    <B>joelcaner</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20WCF%20in%20Mono%202.6.7&In-Reply-To=4D33ECDC.5030800%40veritas-vos-liberabit.com"
       TITLE="[Mono-dev] WCF in Mono 2.6.7">joelcaner at gmail.com
       </A><BR>
    <I>Mon Jan 17 11:04:36 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="036738.html">[Mono-dev] WCF in Mono 2.6.7
</A></li>
        <LI>Next message: <A HREF="036746.html">[Mono-dev] Exception in runtime-invoke Wrapper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36739">[ date ]</a>
              <a href="thread.html#36739">[ thread ]</a>
              <a href="subject.html#36739">[ subject ]</a>
              <a href="author.html#36739">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I think that the error: Bad request is because  I need to configure
the XmlDictionaryReaderQuotas.
Can you tell me how you do that in Mono?

By the way, I upgraded to Mono 2.8.

Cheers,

On Mon, Jan 17, 2011 at 2:17 AM, Atsushi Eno-2 [via Mono] &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ml-node+3220791-556167135-208427 at n4.nabble.com</A>&lt;ml-node%<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">2B3220791-556167135-208427 at n4.nabble.com</A>&gt;
&gt;<i> wrote:
</I>
&gt;<i> You might want to read this:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://nirajrules.wordpress.com/2009/08/03/mtom-vs-streaming-vs-compression-%E2%80%93-large-attachments-over-wcf/">http://nirajrules.wordpress.com/2009/08/03/mtom-vs-streaming-vs-compression-%E2%80%93-large-attachments-over-wcf/</A>
</I>&gt;<i>
</I>&gt;<i> Atsushi Eno
</I>&gt;<i>
</I>&gt;<i> (2011/01/15 22:19), Joel Caner wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Thank you for your reply. Can you tell me if there is another way to send
</I>&gt;<i>
</I>&gt;<i> &gt; large data/file then?..can you provide an example of a client and
</I>&gt;<i> service?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thank you again for your time.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: Atsushi Eno [mailto:[hidden email]&lt;<A HREF="http://user/SendEmail.jtp?type=node&amp;node=3220791&amp;i=0">http://user/SendEmail.jtp?type=node&amp;node=3220791&amp;i=0</A>&gt;]
</I>&gt;<i>
</I>&gt;<i> &gt; Sent: Saturday, January 15, 2011 3:11 AM
</I>&gt;<i> &gt; To: joelcaner
</I>&gt;<i> &gt; Cc: [hidden email]&lt;<A HREF="http://user/SendEmail.jtp?type=node&amp;node=3220791&amp;i=1">http://user/SendEmail.jtp?type=node&amp;node=3220791&amp;i=1</A>&gt;
</I>&gt;<i> &gt; Subject: Re: [Mono-dev] WCF in Mono 2.6.7
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Not sure where the actual error occurs without stack trace, but 2.6 is
</I>&gt;<i> &gt; too old
</I>&gt;<i> &gt; for WCF to try anyways.
</I>&gt;<i> &gt; And Mtom is almost untested so it will cause any kind of problem (never
</I>&gt;<i> &gt; expected that there are actually people who use it).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Atsushi Eno
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; (2011/01/14 23:37), joelcaner wrote:
</I>&gt;<i> &gt;&gt; I am having trouble getting WCF working on Mono in Suse Linux 11.3
</I>&gt;<i> &gt;&gt; I have the client as follow:
</I>&gt;<i> &gt;&gt; BasicHttpBinding binding = new BasicHttpBinding();
</I>&gt;<i> &gt;&gt;               binding.Security.Mode = BasicHttpSecurityMode.None;
</I>&gt;<i> &gt;&gt;               binding.TransferMode = TransferMode.Streamed;
</I>&gt;<i> &gt;&gt;               binding.MessageEncoding = WSMessageEncoding.Mtom;
</I>&gt;<i> &gt;&gt;               binding.MaxReceivedMessageSize = int.MaxValue;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               EndpointAddress address = new
</I>&gt;<i> &gt;&gt; EndpointAddress(&quot;<A HREF="http://localhost:5800/DataUploader&quot;">http://localhost:5800/DataUploader&quot;</A>);
</I>&gt;<i> &gt;&gt;               ChannelFactory&lt;IDataUploader&gt;   channel = new
</I>&gt;<i> &gt;&gt; ChannelFactory&lt;IDataUploader&gt;(binding, address);
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               IDataUploader uploader = channel.CreateChannel();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               try
</I>&gt;<i> &gt;&gt;               {
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                   uploader.Upload(File.Open(@&quot;G:\anthem-1.5.2.zip&quot;,
</I>&gt;<i> &gt;&gt; FileMode.Open, FileAccess.Read));
</I>&gt;<i> &gt;&gt;                   Console.WriteLine(&quot;File uploaded to the server&quot;);
</I>&gt;<i> &gt;&gt;                   Console.ReadLine();
</I>&gt;<i> &gt;&gt;               }
</I>&gt;<i> &gt;&gt;               catch (Exception ex)
</I>&gt;<i> &gt;&gt;               {
</I>&gt;<i> &gt;&gt;                   Console.Write(ex.Message);
</I>&gt;<i> &gt;&gt;                   Console.ReadLine();
</I>&gt;<i> &gt;&gt;               }
</I>&gt;<i> &gt;&gt;               finally
</I>&gt;<i> &gt;&gt;               {
</I>&gt;<i> &gt;&gt;                   ((IClientChannel)uploader).Close();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I have the following interface:
</I>&gt;<i> &gt;&gt; [ServiceContract]
</I>&gt;<i> &gt;&gt;       interface IDataUploader
</I>&gt;<i> &gt;&gt;       {
</I>&gt;<i> &gt;&gt;           [OperationContract]
</I>&gt;<i> &gt;&gt;           void Upload(Stream data);
</I>&gt;<i> &gt;&gt;       }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Now the service is as follow on DataUploader.cs:
</I>&gt;<i> &gt;&gt; class DataUploader : IDataUploader
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;       {
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;           #region IDataUploader Members
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;           public void Upload(Stream data)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;           {
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               string xmlFile = @&quot;c:\temp\uploadedfile&quot; + &quot;.zip&quot;;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               using (FileStream fs = new FileStream(xmlFile,
</I>&gt;<i> &gt; FileMode.Create))
</I>&gt;<i> &gt;&gt;               {
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                   int bufferSize = 1 * 1024 * 1024; // 1MB buffer
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                   byte[] buffer = new byte[bufferSize];
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                   int bytes;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                   while ((bytes = data.Read(buffer, 0, bufferSize))&gt;
</I>&gt;<i> 0)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                   {
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                       fs.Write(buffer, 0, bytes);
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                       fs.Flush();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;                   }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;           }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;            #endregion
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;       }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Now on IDataUploader.cs:
</I>&gt;<i> &gt;&gt; [ServiceContract]
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;       interface IDataUploader
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;       {
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;           [OperationContract]
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;           void Upload(Stream data);
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;       }
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On the main.cs I have:
</I>&gt;<i> &gt;&gt; public static void Main (string[] args)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; {
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; ServiceHost host = new
</I>&gt;<i> &gt; ServiceHost(typeof(DataUploader));
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               BasicHttpBinding binding = new BasicHttpBinding();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; binding.Security.Mode = BasicHttpSecurityMode.None;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               binding.TransferMode = TransferMode.Streamed;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; binding.MessageEncoding = WSMessageEncoding.Mtom;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               binding.MaxReceivedMessageSize = int.MaxValue;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               host.AddServiceEndpoint(typeof(IDataUploader), binding,
</I>&gt;<i> new
</I>&gt;<i> &gt;&gt; Uri(&quot;<A HREF="http://localhost:5800/DataUploader&quot;">http://localhost:5800/DataUploader&quot;</A>));
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               ServiceBehaviorAttribute attribute =
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> (ServiceBehaviorAttribute)host.Description.Behaviors[typeof(ServiceBehaviorA
</I>&gt;<i>
</I>&gt;<i> &gt; ttribute)];
</I>&gt;<i> &gt;&gt;               attribute.ConcurrencyMode = ConcurrencyMode.Multiple;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               attribute.InstanceContextMode =
</I>&gt;<i> InstanceContextMode.Single;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; attribute.IncludeExceptionDetailInFaults = true;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               ServiceThrottlingBehavior throttling = new
</I>&gt;<i> &gt;&gt; ServiceThrottlingBehavior();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               throttling.MaxConcurrentSessions = 24;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               throttling.MaxConcurrentCalls = 24;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               host.Description.Behaviors.Add(throttling);
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               host.Open();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               Console.WriteLine(&quot;Service Hosted ...&quot;);
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               Console.ReadKey();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;               host.Close();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; }
</I>&gt;<i> &gt;&gt; I have both client and service running on the same system. I get an
</I>&gt;<i> error:
</I>&gt;<i> &gt;&gt; Object reference not set to an instance of an object error. When I run a
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; client on a windows system and the service on the linux system I get
</I>&gt;<i> &quot;bad
</I>&gt;<i> &gt;&gt; request(400) error. Can someone help me understand what I am missing?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> [hidden email] &lt;<A HREF="http://user/SendEmail.jtp?type=node&amp;node=3220791&amp;i=2">http://user/SendEmail.jtp?type=node&amp;node=3220791&amp;i=2</A>&gt;
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>  View message @
</I>&gt;<i> <A HREF="http://mono.1490590.n4.nabble.com/WCF-in-Mono-2-6-7-tp3217763p3220791.html">http://mono.1490590.n4.nabble.com/WCF-in-Mono-2-6-7-tp3217763p3220791.html</A>
</I>&gt;<i> To unsubscribe from WCF in Mono 2.6.7, click here&lt;<A HREF="http://mono.1490590.n4.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=3217763&amp;code=am9lbGNhbmVyQGdtYWlsLmNvbXwzMjE3NzYzfC0xNzczOTczNjM4">http://mono.1490590.n4.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=3217763&amp;code=am9lbGNhbmVyQGdtYWlsLmNvbXwzMjE3NzYzfC0xNzczOTczNjM4</A>&gt;.
</I>&gt;<i>
</I>&gt;<i>
</I>
-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/WCF-in-Mono-2-6-7-tp3217763p3221227.html">http://mono.1490590.n4.nabble.com/WCF-in-Mono-2-6-7-tp3217763p3221227.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20110117/07cc0c62/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20110117/07cc0c62/attachment-0001.html</A> 
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036738.html">[Mono-dev] WCF in Mono 2.6.7
</A></li>
	<LI>Next message: <A HREF="036746.html">[Mono-dev] Exception in runtime-invoke Wrapper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36739">[ date ]</a>
              <a href="thread.html#36739">[ thread ]</a>
              <a href="subject.html#36739">[ subject ]</a>
              <a href="author.html#36739">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
