<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Support 2-args Socket ctor added in .NET 4.5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Support%202-args%20Socket%20ctor%20added%20in%20.NET%204.5&In-Reply-To=%3CDUB130-W466D5F885B3CC791EC17F5E8900%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042191.html">
   <LINK REL="Next"  HREF="042197.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Support 2-args Socket ctor added in .NET 4.5</H1>
    <B>Alexander K&#246;plinger</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Support%202-args%20Socket%20ctor%20added%20in%20.NET%204.5&In-Reply-To=%3CDUB130-W466D5F885B3CC791EC17F5E8900%40phx.gbl%3E"
       TITLE="[Mono-dev] Support 2-args Socket ctor added in .NET 4.5">alex.koeplinger at outlook.com
       </A><BR>
    <I>Sat Oct 25 16:58:30 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="042191.html">[Mono-dev] Support 2-args Socket ctor added in .NET 4.5
</A></li>
        <LI>Next message: <A HREF="042197.html">[Mono-dev] Support 2-args Socket ctor added in .NET 4.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42192">[ date ]</a>
              <a href="thread.html#42192">[ thread ]</a>
              <a href="subject.html#42192">[ subject ]</a>
              <a href="author.html#42192">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>To answer your ASP.NET vNext questions: 
The &quot;web&quot; in &quot;k web&quot; is a custom command defined in project.json, usually it invokes Microsoft.AspNet.Server.WebListener which builds upon the Windows-only http.sys, it's not intended to be run on other platforms. That's why there are other hosting options, like the new webserver they're writing called Kestrel which builds on top of libuv (like Node.js) and works cross-platform. Many samples also feature a &quot;k kestrel&quot; command which invokes this server (assuming you have libuv 1.0 installed).
 
By &quot;slimmed down stuff&quot; I think you're referring to the new CoreCLR (which enables side-by-side deployment, class libs inside your app, etc.).
This is only one of the options though, you can also use &quot;standard&quot; .NET (with machine-wide class libs), or likewise Mono to run ASP.NET vNext applications. CoreCLR is intended to be Windows-only too from what I've heard, as it doesn't make much sense for Mono (you can already do side-by-side deployment of Mono).
So in essence, ASP.NET vNext on Mono just uses the normal class libs - that's why they need those implementations.
 
-- Alex

 
Date: Sat, 25 Oct 2014 17:31:30 +0100
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monoforum at my2cents.co.uk</A>
To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">muo at muo.jp</A>
CC: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Support 2-args Socket ctor added in .NET 4.5

Hi Kei,

This looks like a good now (one small coding change I've just added).  Note that I'm not someone who can approve the patch, just an enthusiastic volunteer.

Does this mean that the &quot;k web&quot; commandline for the vNext example site (Music store) works after the patch?  Something I was trying for a while but never got it working.

I was under the impression that to use the slimmed down vNext stuff it had to use everything from their myGet repository, so I'm not sure where the mono class libraries would help with that?  That said, implementing stuff in mono will likely benefit someone at some point, so it's definitely worthwhile.

Thanks,
Martin

On 25 October 2014 15:38, Kei Nakazawa &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">muo at muo.jp</A>&gt; wrote:
Hello,

I noticed some test code of Kestrel (web server for ASP.NET vNext) fails to compile on Linux hosts.

/kestrel/test/Microsoft.AspNet.Server.KestrelTests/EngineTests.cs(325,34): error CS1729: 'Socket' does not contain a constructor that takes 2 arguments
ref: <A HREF="https://github.com/aspnet/KestrelHttpServer/blob/dev/test/Microsoft.AspNet.Server.KestrelTests/EngineTests.cs#L325">https://github.com/aspnet/KestrelHttpServer/blob/dev/test/Microsoft.AspNet.Server.KestrelTests/EngineTests.cs#L325</A>

It's because 2 args ctor is a new one introduced in .NET 4.5 and not currently exist on Mono. I found a bugzilla entry mentioning this issue: <A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=20048">https://bugzilla.xamarin.com/show_bug.cgi?id=20048</A> and dug Mono code for finding solutions.

After couple of minutes of investigation, I gave up to write a &quot;clean&quot; dual stack (IPv4/v6) support and wrote a simple proxy ctor:
<A HREF="https://github.com/mono/mono/pull/1364/files">https://github.com/mono/mono/pull/1364/files</A> (Thanks @martinjt for reviewing my pull-req.)

As I don't see any demands for IPv4/v6 dual stack support around ASP.NET vNext community, I believe hard-coding protocol version to v4 is just enough and better than nothing at least for now (of course, full support of dual stack would be great).

Any comments/feedback are welcomed.

Regards, Kei.


_______________________________________________

Mono-devel-list mailing list

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>





_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A> 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141025/2deda33a/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141025/2deda33a/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042191.html">[Mono-dev] Support 2-args Socket ctor added in .NET 4.5
</A></li>
	<LI>Next message: <A HREF="042197.html">[Mono-dev] Support 2-args Socket ctor added in .NET 4.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42192">[ date ]</a>
              <a href="thread.html#42192">[ thread ]</a>
              <a href="subject.html#42192">[ subject ]</a>
              <a href="author.html#42192">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
