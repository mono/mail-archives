<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [Gtk-sharp-list] Solve duplicate Cairo# library	bindings issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20%5BGtk-sharp-list%5D%20Solve%20duplicate%20Cairo%23%20library%0A%09bindings%20issue&In-Reply-To=%3C542F1205.9060708%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042010.html">
   <LINK REL="Next"  HREF="042012.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [Gtk-sharp-list] Solve duplicate Cairo# library	bindings issue</H1>
    <B>Antonius Riha</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20%5BGtk-sharp-list%5D%20Solve%20duplicate%20Cairo%23%20library%0A%09bindings%20issue&In-Reply-To=%3C542F1205.9060708%40gmail.com%3E"
       TITLE="[Mono-dev] [Gtk-sharp-list] Solve duplicate Cairo# library	bindings issue">antoniusriha at gmail.com
       </A><BR>
    <I>Fri Oct  3 21:15:49 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="042010.html">[Mono-dev] Updating aspnetwebstack
</A></li>
        <LI>Next message: <A HREF="042012.html">[Mono-dev] Custom Code Writer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42011">[ date ]</a>
              <a href="thread.html#42011">[ thread ]</a>
              <a href="subject.html#42011">[ subject ]</a>
              <a href="author.html#42011">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi everyone,
First of all, thank you Bertrand for your detailed answer. Since this
issue concerns both, the gtk-sharp and mono dev communities, I've
added the respective mailing lists in CC. I've also noticed that Jo
Shields has been assigned to the bug I reported on the mono class
libraries component [1]. In this email I'd like to explain what I'd
like to change about the current situation of cairo-sharp/Mono.Cairo.

Currently, the .NET/mono cairo bindings exist in two places: In the
mono repository and in the gtk-sharp repository. The two code bases
are fairly similar, but are not the same. I think both projects (mono
and gtk-sharp) would profit, if the cairo code bases would be merged
together into a single repository, because f.i. it wouldn't be
necessary to fix issues in 2 places. Hence, my bug reports [1] and [2].

To fix this issue, I suggest to put cairo-sharp into its own
repository on github. But instead of making it a standalone package
with all the implications (like releases and distro packages), I'd
make it a source code only repository with minimal build
infrastructure to facilitate development (i.e. MonoDevelop project
files). When doing that I would also make sure not to lose any git
history by using git-subtree on the mono and gtk-sharp repositories.
cairo-sharp would be included as a git submodule in mono and gtk-sharp
and both projects should be able to include it in their respective
build systems. Since we would be using git submodules, each project
could choose for itself, which commit ref to include.

About licensing: Bertrand reported that cairo-sharp in the gtk-sharp
repository is licensed under MIT/X11, according to the Debian
copyright file. Since both code bases use the same license, we
wouldn't have any problems merging them license-wise and the resulting
repository would also be licensed under MIT/X11.

I'd prepare the repository and the necessary pull requests for both
projects in my spare time, which would be mainly on weekends. I'd also
take on the maintenance duties for the new cairo-sharp repository,
which would mainly be reviewing and merging PRs.

Before starting work, I'd like to get confirmation from the mono side.
- From the gtk-sharp side, there are no fundamental objections AFAICT.

- - antonius


[1] <A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=22976">https://bugzilla.xamarin.com/show_bug.cgi?id=22976</A>
[2] <A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=22975">https://bugzilla.xamarin.com/show_bug.cgi?id=22975</A>

On 2014-10-02 22:05, Bertrand Lorentz wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> Sorry for not replying earlier, I did file this under &quot;need to
</I>&gt;<i> think about it&quot; but then...
</I>&gt;<i> 
</I>&gt;<i> From what I know, cairo-sharp was only included in gtk-sharp for
</I>&gt;<i> the case when Mono.Cairo is not available [1]. Which means when
</I>&gt;<i> building or using gtk-sharp with the .NET Framework, so on Windows.
</I>&gt;<i> I guess nobody wants to build the whole of mono just to get a
</I>&gt;<i> single assembly.
</I>&gt;<i> 
</I>&gt;<i> From what I saw in the git history, up until work on GTK+ 3
</I>&gt;<i> started, the API of the 2 code bases were aligned, and code was
</I>&gt;<i> copied liberally from one to another. Then, when Mike Kestner
</I>&gt;<i> started working on binding GTK+ 3, he needed new API from cairo
</I>&gt;<i> 1.10, which he added in cairo sharp. Later, that API got merged
</I>&gt;<i> into Mono.Cairo, and it should be available in mono 3.8.0.
</I>&gt;<i> 
</I>&gt;<i> I've been working on making gtk-sharp default on using Mono.Cairo
</I>&gt;<i> if mono
</I>&gt;&gt;<i> = 3.8 is available, but I haven't had the time to finish that
</I>&gt;&gt;<i> yet.
</I>&gt;<i> 
</I>&gt;<i> My position right now is that any changes should go to Mono.Cairo
</I>&gt;<i> first, and then be copied into cairo-sharp.
</I>&gt;<i> 
</I>&gt;<i> I'd have no objection to spinning off cairo-sharp in it's own git
</I>&gt;<i> repo. But I won't be able to maintain it. For gtk-sharp we just
</I>&gt;<i> need an easy way to get cairo bindings on Windows, either through a
</I>&gt;<i> git submodule, or an external dependency. So I guess this depends
</I>&gt;<i> on the opinion of the Mono team. Have you contacted them about this
</I>&gt;<i> (other than the bug ) ?
</I>&gt;<i> 
</I>&gt;<i> I'm not sure there's any relicensing of cairo-sharp needed:
</I>&gt;<i> although the whole of gtk-sharp is indicated as licensed under the
</I>&gt;<i> LGPL, all the .cs files under cairo/ appear to have an MIT/X11
</I>&gt;<i> header. And those files originate from Mono.Cairo anyways. In
</I>&gt;<i> addition, the Debian copyright file for gtk-sharp 2.99.3  [2] also 
</I>&gt;<i> states cairo/* is MIT/X11, and those guys know their licensing.
</I>&gt;<i> 
</I>&gt;<i> I hope this helps,
</I>&gt;<i> 
</I>&gt;<i> -- Bertrand
</I>&gt;<i> 
</I>&gt;<i> [1] See the initial commit at 
</I>&gt;<i> <A HREF="https://github.com/mono/gtk-sharp/commit/81e6815080">https://github.com/mono/gtk-sharp/commit/81e6815080</A>
</I>&gt;<i> 
</I>&gt;<i> [2] 
</I>&gt;<i> <A HREF="http://metadata.ftp-master.debian.org/changelogs//main/g/gtk-sharp3/gtk-sharp3_2.99.3-2_copyright">http://metadata.ftp-master.debian.org/changelogs//main/g/gtk-sharp3/gtk-sharp3_2.99.3-2_copyright</A>
</I>&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Tue, Sep 30, 2014 at 7:45 AM, Antonius Riha
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">antoniusriha at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Does no one have an opinion on this?
</I>&gt;<i> 
</I>&gt;<i> On 2014-09-14 13:02, Antonius Riha wrote:
</I>&gt;&gt;&gt;&gt;<i> Hi gtk-sharp community, I'm currently looking into the issue
</I>&gt;&gt;&gt;&gt;<i> that the cairo library binding code exists in 2 different
</I>&gt;&gt;&gt;&gt;<i> places: Once in the gtk-sharp repository and the second time
</I>&gt;&gt;&gt;&gt;<i> in the class libraries of the mono repository. In my opinion,
</I>&gt;&gt;&gt;&gt;<i> the 2 code bases are very similar and should be merged and
</I>&gt;&gt;&gt;&gt;<i> put into a separate repository. I've filed 2 bugs with the
</I>&gt;&gt;&gt;&gt;<i> respective components, see [1] and [2] for details.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Since the cairo bindings are not distributed as a standalone 
</I>&gt;&gt;&gt;&gt;<i> package (but with gtk-sharp and mono), an eventual new
</I>&gt;&gt;&gt;&gt;<i> cairo-sharp git repository should only be used as a simple
</I>&gt;&gt;&gt;&gt;<i> source code container with a minimal MSBuild build
</I>&gt;&gt;&gt;&gt;<i> infrastructure for development. This repository can be
</I>&gt;&gt;&gt;&gt;<i> included in gtk-sharp and mono as git submodule. Since its
</I>&gt;&gt;&gt;&gt;<i> not a package per se, it doesn't make sense to set up an
</I>&gt;&gt;&gt;&gt;<i> autotools build system, which would just add to the repo
</I>&gt;&gt;&gt;&gt;<i> overhead.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> There are some issues with this task. Primarily, the two
</I>&gt;&gt;&gt;&gt;<i> libraries are licensed differently: The mono version it
</I>&gt;&gt;&gt;&gt;<i> licensed as MIT/X11, whereas the gtk-sharp version is under
</I>&gt;&gt;&gt;&gt;<i> LGPLv2. For merging the code, it would be best, if both had
</I>&gt;&gt;&gt;&gt;<i> the same license. Since the mono class libraries are
</I>&gt;&gt;&gt;&gt;<i> distributed as MIT/X11, I would suggest to attempt to
</I>&gt;&gt;&gt;&gt;<i> relicense the Cairo# portion of the gtk-sharp repository as
</I>&gt;&gt;&gt;&gt;<i> MIT/X11.[3]
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> My questions to he community are: * Are there any other
</I>&gt;&gt;&gt;&gt;<i> opinions about this issue, or whether this is actually an
</I>&gt;&gt;&gt;&gt;<i> issue? * Which would be the necessary steps to relicense the
</I>&gt;&gt;&gt;&gt;<i> Cairo# protion of the code as MIT/X11?
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> - antonius
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> [1] <A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=22975">https://bugzilla.xamarin.com/show_bug.cgi?id=22975</A>
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> [2] <A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=22976">https://bugzilla.xamarin.com/show_bug.cgi?id=22976</A>
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> [3] About the gtk-sharp package license: Since (to my
</I>&gt;&gt;&gt;&gt;<i> knowledge) you can relicense MIT/X11 code as LGPLv2 without
</I>&gt;&gt;&gt;&gt;<i> consent of the code owners (but not the other way around), I
</I>&gt;&gt;&gt;&gt;<i> think it would be no problem to put the entire package
</I>&gt;&gt;&gt;&gt;<i> (including the imported submodule Cairo#) under LGPLv2. (Note
</I>&gt;&gt;&gt;&gt;<i> though that IANAL.)
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________ Gtk-sharp-list
</I>&gt;&gt;<i> maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Gtk-sharp-list at lists.ximian.com</A> 
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQEcBAEBAgAGBQJULxIFAAoJEI2lsCv1vbcL8R0IAKxM3qd2u1gJ6+fifOKXevIE
N3NVzpP5l/+ZXRpAQXm3yuFVgbpTPEBbfnXLCDtyqUJQjS6e4XzuUiFYiCXGc7ME
TJF5KSBo0gKnmM+mTBhx2H5VV/SkkICkB68fioDz1XmkbXSnIbU5oWUL9yehaJp0
tc6FqltQW9ax36H5c2t2hyI1f/G6U7n7oRn8pBDSGod64ulsveZlJf+WW1b2pK56
fk/j8a5nHCvRhF9eJnK0e3L7Sv9aaa8HxsroGQBiGAkhJ+H6qdogjImJI7AHPbf1
e/Y/EMTN+OObLhoL0DWOQgViuz52cheDIBxtTFS6rIAzNx1Ls+haK7IAjiDEU8s=
=hLmW
-----END PGP SIGNATURE-----
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042010.html">[Mono-dev] Updating aspnetwebstack
</A></li>
	<LI>Next message: <A HREF="042012.html">[Mono-dev] Custom Code Writer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42011">[ date ]</a>
              <a href="thread.html#42011">[ thread ]</a>
              <a href="subject.html#42011">[ subject ]</a>
              <a href="author.html#42011">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
