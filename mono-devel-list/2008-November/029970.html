<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] One more shell script patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20One%20more%20shell%20script%20patch&In-Reply-To=20081125221802.729bf852.ksmakoto%40dd.iij4u.or.jp">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029969.html">
   <LINK REL="Next"  HREF="029976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] One more shell script patch</H1>
    <B>KISHIMOTO, Makoto</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20One%20more%20shell%20script%20patch&In-Reply-To=20081125221802.729bf852.ksmakoto%40dd.iij4u.or.jp"
       TITLE="[Mono-dev] One more shell script patch">ksmakoto at dd.iij4u.or.jp
       </A><BR>
    <I>Tue Nov 25 09:22:42 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029969.html">[Mono-dev] One more shell script patch
</A></li>
        <LI>Next message: <A HREF="029976.html">[Mono-dev] tuner, csharplib and --with-moonlight=no
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29970">[ date ]</a>
              <a href="thread.html#29970">[ thread ]</a>
              <a href="subject.html#29970">[ subject ]</a>
              <a href="author.html#29970">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> One more patch for shell script.
</I>&gt;<i> &quot;seq&quot; command doesn't available in non GNU system, and
</I>&gt;<i> modification for bourne shell.
</I>
Sorry, this is more safe shell function version.

Index: mono/mono/tests/make_imt_test.sh
===================================================================
--- mono/mono/tests/make_imt_test.sh	(revision 119943)
+++ mono/mono/tests/make_imt_test.sh	(working copy)
@@ -1,12 +1,23 @@
-#! /bin/bash
+#!/bin/sh
 
 LOW=2000
 HIGH=2000
 
-function create_iface () {
+iota() {
+	(
+		i=$1
+		while [ $i -le $2 ]
+		do
+			echo $i
+			i=`expr $i + 1`
+		done
+	)
+}
+
+create_iface() {
 	COUNT=$1
 	echo &quot;public interface Iface_$COUNT {&quot;
-	for i in `seq 1 $COUNT`;
+	for i in `iota 1 $COUNT`;
 	do
 		echo &quot;	int Method_$i (int a, int b, int c, int d);&quot;
 	done 
@@ -15,10 +26,10 @@
 }
 
 
-function create_impl () {
+create_impl() {
 	COUNT=$1
 	echo &quot;public class Impl_$COUNT : Iface_$COUNT {&quot;
-	for i in `seq 1 $COUNT`;
+	for i in `iota 1 $COUNT`;
 	do
 		echo &quot;	public virtual int Method_$i (int a, int b, int c, int d) { return a - b - c - d + ${i}; }&quot;
 	done 
@@ -27,7 +38,7 @@
 }
 
 
-function create_static_part () {
+create_static_part() {
 	IFACE=$1
 	echo &quot;	static Iface_$IFACE var_$IFACE = new Impl_$IFACE ();&quot;
 	echo &quot;	static int Test_$IFACE () {
@@ -35,7 +46,7 @@
 		int r;
 	&quot;
 
-	for i in `seq 1 $IFACE`;
+	for i in `iota 1 $IFACE`;
 	do	
 		echo &quot;		if ((r = var_${IFACE}.Method_$i (10,5,3,2)) != ${i}) {
 			Console.WriteLine(\&quot;iface $IFACE method $i returned {0}\&quot;, r);
@@ -49,7 +60,7 @@
 }
 
 
-function test_iface () {
+test_iface() {
 	IFACE=$1
 	echo &quot;		res |= Test_$IFACE ();&quot;
 }
@@ -61,7 +72,7 @@
 
 &quot;
 
-for i in `seq $LOW $HIGH`;
+for i in `iota $LOW $HIGH`;
 do
 	create_iface $i
 	create_impl $i
@@ -75,7 +86,7 @@
 &quot;
 
 
-for i in `seq $LOW $HIGH`;
+for i in `iota $LOW $HIGH`;
 do
 	create_static_part $i
 done
@@ -87,7 +98,7 @@
 		int res = 0;&quot;
 
 
-for i in `seq $LOW $HIGH`;
+for i in `iota $LOW $HIGH`;
 do
 	test_iface  $i
 done
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029969.html">[Mono-dev] One more shell script patch
</A></li>
	<LI>Next message: <A HREF="029976.html">[Mono-dev] tuner, csharplib and --with-moonlight=no
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29970">[ date ]</a>
              <a href="thread.html#29970">[ thread ]</a>
              <a href="subject.html#29970">[ subject ]</a>
              <a href="author.html#29970">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
