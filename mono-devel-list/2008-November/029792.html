<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Ideas for Mono on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Ideas%20for%20Mono%20on%20Windows&In-Reply-To=17c2d80b0811111410w2a9bbdacpe45c752fa67572cc%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029790.html">
   <LINK REL="Next"  HREF="029794.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Ideas for Mono on Windows</H1>
    <B>Jonathan Pobst</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Ideas%20for%20Mono%20on%20Windows&In-Reply-To=17c2d80b0811111410w2a9bbdacpe45c752fa67572cc%40mail.gmail.com"
       TITLE="[Mono-dev] Ideas for Mono on Windows">monkey at jpobst.com
       </A><BR>
    <I>Tue Nov 11 19:02:21 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029790.html">[Mono-dev] Ideas for Mono on Windows
</A></li>
        <LI>Next message: <A HREF="029794.html">[Mono-dev] Ideas for Mono on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29792">[ date ]</a>
              <a href="thread.html#29792">[ thread ]</a>
              <a href="subject.html#29792">[ subject ]</a>
              <a href="author.html#29792">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Jonathan,

I'm glad to hear that you have the runtime building nicely on Windows. 
In my spare time, I have been playing with making an MSBuild script for 
the managed pieces, and was hoping you might have something similar for 
the unmanaged part.  (Which I know nothing about.)

The route I took (and this is my first time playing with MSBuild) was to 
write an McsTask that simply calls (g)mcs with the same command line as 
the make system.  In this way, I simply use the existing .sources files. 
  This may be an easier scenario to achieve than switching over to 
.csproj files, as it allows people to continue doing things the way they 
always have.

It would be nice to have all platforms build with xbuild, but if that's 
not possible, at least the burden of maintaining two build systems this 
way is a lot less than if we tried to maintain changes to .csproj files.

Jonathan


Jonathan Chambers wrote:
&gt;<i> Hello All,
</I>&gt;<i>       Mono on Windows has never been easy. However, lately things to 
</I>&gt;<i> have continually gotten worse (or I and others have just gotten more 
</I>&gt;<i> annoyed). Setting up an environment takes a lot of effort for a normal 
</I>&gt;<i> windows developer. Cygwin and the whole Makefile based process is very 
</I>&gt;<i> foreign for Windows developers. Not to mention the busted make in cygwin 
</I>&gt;<i> and cygwin issues on Vista (amd64). Most people have had enough interest 
</I>&gt;<i> in building mono on windows that they took the time to work things out 
</I>&gt;<i> (usually at least a day). But that's just the first time; try setting 
</I>&gt;<i> everything up again on a different machine or updating your cygwin and 
</I>&gt;<i> things start over.
</I>&gt;<i> 
</I>&gt;<i> I see the basic issues as:
</I>&gt;<i> 
</I>&gt;<i> 1) Cygwin development environment is less than ideal. It's foreign to 
</I>&gt;<i> most Windows developers and is a barrier to entry for most people.
</I>&gt;<i> 2) Debugging is mostly impossible. gdb seems to provide little help on 
</I>&gt;<i> Windows (echoed by others on #monodev)
</I>&gt;<i> 3) Compilation takes forever. I am working on a Dual Quad Core machine 
</I>&gt;<i> (8 cores) at 3.6 Ghz. The mono build process still takes hours on my 
</I>&gt;<i> machine. This may be aggravated by virus scanners or other similar 
</I>&gt;<i> software, but the fact remains that all Windows users run virus scanners.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> As to not just be a complainer, I am offering some suggestions/ideas and 
</I>&gt;<i> hoping for others to do the same (or at least critique mine ;-)). Before 
</I>&gt;<i> I offer any suggestions, I think we need to balance between two things. 
</I>&gt;<i> One is making life easy for the mono build/package team to produce a 
</I>&gt;<i> Windows product. It's not real easy now, but we shouldn't make it any 
</I>&gt;<i> harder. The second thing is making life easy for those who wish to 
</I>&gt;<i> work/contribute to mono on Windows. This second item is tough at this point.
</I>&gt;<i> 
</I>&gt;<i> 1) We should consider using MSVC as the default compiler for C code on 
</I>&gt;<i> Windows. I can compile the entire Visual Studio solution for the runtime 
</I>&gt;<i> in minutes. It takes 20-30 seconds if I do a parallel build. We can also 
</I>&gt;<i> use the Visual Studio debugger on Windows, which IMO is betten than gdb 
</I>&gt;<i> on Windows.
</I>&gt;<i> 
</I>&gt;<i> 2) Two propositions for the class libraries have been mentioned 
</I>&gt;<i> previously. One is a lightweight, 'managed make' system that could be 
</I>&gt;<i> run easily on windows in place of all the build infrastructure provided 
</I>&gt;<i> by cgywin. This obviously allows us to keep using Makefiles on other 
</I>&gt;<i> platforms and keep a unified build process, but requires someone write 
</I>&gt;<i> the tool (and maintain it). Another option is to moved to MSBuild/xbuild 
</I>&gt;<i> for the class libraries. This would change the build process on all 
</I>&gt;<i> platforms, and require some fixing of our current xbuild tool. 
</I>&gt;<i> MSYS/MinGW has also been mentioned, but I don't consider that much 
</I>&gt;<i> better than Cygwin. I attempted to get it working one time, but gave up 
</I>&gt;<i> after a few days of hacking.
</I>&gt;<i> 
</I>&gt;<i> Simply opening a csproj file for a class library, hacking on it, testing 
</I>&gt;<i> under .Net and mono, and then contributing the changes seems a like a 
</I>&gt;<i> good goal to aim for in regards to contributors. The build/packaging 
</I>&gt;<i> guys can respond with what they are looking for on Windows.
</I>&gt;<i> 
</I>&gt;<i> Any thoughts/responses on making mono better on Windows is appreciated.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Jonathan
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029790.html">[Mono-dev] Ideas for Mono on Windows
</A></li>
	<LI>Next message: <A HREF="029794.html">[Mono-dev] Ideas for Mono on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29792">[ date ]</a>
              <a href="thread.html#29792">[ thread ]</a>
              <a href="subject.html#29792">[ subject ]</a>
              <a href="author.html#29792">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
