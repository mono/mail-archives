<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev]  Simple web service test with windows authentication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Simple%20web%20service%20test%20with%20windows%20authentication&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030022.html">
   <LINK REL="Next"  HREF="029990.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev]  Simple web service test with windows authentication</H1>
    <B>marcos b</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Simple%20web%20service%20test%20with%20windows%20authentication&In-Reply-To="
       TITLE="[Mono-dev]  Simple web service test with windows authentication">marcosb at internet.com.uy
       </A><BR>
    <I>Wed Nov 26 12:39:41 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030022.html">[Mono-dev] Typed dataset serialization still failing in mono 2.0.1
</A></li>
        <LI>Next message: <A HREF="029990.html">[Mono-dev] Simple web service test with windows authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29983">[ date ]</a>
              <a href="thread.html#29983">[ thread ]</a>
              <a href="subject.html#29983">[ subject ]</a>
              <a href="author.html#29983">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I'm trying to do a web service invocation using mono. The web service is
hosted on my machine using iis. Windows authentication is used in the
web.config and in iis.
The test runs ok using .net environment but throws an Unauthorized exception
when using mono.

I don't know if this is a bug or I'm missing something...

Thanks in advance

        [Test]
        public void WebServiceTest()
        {
            WS.Service1 s=new app.WS.Service1();
            //s.UseDefaultCredentials = true;    //Also throws an exception
            //s.Credentials = CredentialCache.DefaultCredentials;  //Also
throws an exception
            s.Credentials = new NetworkCredential(&quot;myLogin&quot;, &quot;12345678&quot;,
&quot;myDomain&quot;);
            Assert.AreEqual(s.Add(3,5),8);
        }

Exception
detail-----------------------------------------------------------------------------

TestCase 'app.MonoWebTests.WebServiceTest'
failed: System.Net.WebException : The request failed with HTTP status 401:
Unauthorized
	at System.Web.Services.Protocols.SoapHttpClientProtocol.ReceiveResponse
(System.Net.WebResponse response,
System.Web.Services.Protocols.SoapClientMessage message,
System.Web.Services.Protocols.SoapExtension[] extensions) [0x00000] 
	at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke
(System.String method_name, System.Object[] parameters) [0x00000] 
	at app.WS.Service1.Sumar (Int32 a, Int32 b) [0x00000] 
	at (wrapper remoting-invoke-with-check) app.WS.Service1:Sumar (int,int)
	at app.MonoWebTests.WebServiceTest () [0x00000] 
	at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke
(object,object[],System.Exception&amp;)
	at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags
invokeAttr, System.Reflection.Binder binder, System.Object[] parameters,
System.Globalization.CultureInfo culture) [0x00000] 

-- 
View this message in context: <A HREF="http://www.nabble.com/Simple-web-service-test-with-windows-authentication-tp20705699p20705699.html">http://www.nabble.com/Simple-web-service-test-with-windows-authentication-tp20705699p20705699.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030022.html">[Mono-dev] Typed dataset serialization still failing in mono 2.0.1
</A></li>
	<LI>Next message: <A HREF="029990.html">[Mono-dev] Simple web service test with windows authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29983">[ date ]</a>
              <a href="thread.html#29983">[ thread ]</a>
              <a href="subject.html#29983">[ subject ]</a>
              <a href="author.html#29983">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
