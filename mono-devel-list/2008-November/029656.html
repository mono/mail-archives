<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] System.Unix.Native.Syscall.fork is commented out
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20System.Unix.Native.Syscall.fork%20is%20commented%20out&In-Reply-To=1225927200.9186.128.camel%40lina.magi.jprl.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029655.html">
   <LINK REL="Next"  HREF="029657.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] System.Unix.Native.Syscall.fork is commented out</H1>
    <B>Avery Pennarun</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20System.Unix.Native.Syscall.fork%20is%20commented%20out&In-Reply-To=1225927200.9186.128.camel%40lina.magi.jprl.com"
       TITLE="[Mono-dev] System.Unix.Native.Syscall.fork is commented out">apenwarr at gmail.com
       </A><BR>
    <I>Wed Nov  5 18:22:56 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029655.html">[Mono-dev] System.Unix.Native.Syscall.fork is commented out
</A></li>
        <LI>Next message: <A HREF="029657.html">[Mono-dev] System.Unix.Native.Syscall.fork is commented out
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29656">[ date ]</a>
              <a href="thread.html#29656">[ thread ]</a>
              <a href="subject.html#29656">[ subject ]</a>
              <a href="author.html#29656">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Nov 5, 2008 at 6:20 PM, Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jonpryor at vt.edu</A>&gt; wrote:
&gt;<i> On Wed, 2008-11-05 at 22:13 +0000, James Mansion wrote:
</I>&gt;&gt;<i> Jonathan Pryor wrote:
</I>&gt;&gt;<i> &gt; That still wouldn't work, as *before* Main() is invoked there are
</I>&gt;&gt;<i> &gt; already multiple threads running.  You might not have the unknown lock
</I>&gt;&gt;<i> &gt; state issue, but you will have the runtime assuming that threads exist
</I>&gt;&gt;<i> &gt; which won't exist in the child process.  Oops.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> Isn't this an opportunity for 'embedding mono' with an explicit
</I>&gt;&gt;<i> dynamic load of the mono runtime, so the main that runs is a C program
</I>&gt;&gt;<i> that detaches first and sorts itself out and then loads up and
</I>&gt;&gt;<i> initialises the mono runtime?
</I>&gt;<i>
</I>&gt;<i> Yes, though this would be outside of Mono.Posix's scope and thus would
</I>&gt;<i> require that you write &amp; maintain a C &quot;bootstrap&quot; program...
</I>&gt;<i>
</I>&gt;<i> Not difficult, but not entirely in C# either.
</I>
Also, people often forget that daemons are supposed to do their setup
and *then* fork into the background, not fork into the background
right away.  For example, when you start syslogd, you have a right to
expect that /dev/log will be listening by the time it forks into the
background.  Otherwise you could lose syslog messages produced after
it forks but before it starts listening on its socket.

Since presumably any sockets would be set up from the C# side of the
program, using a C wrapper would be a little complicated.

Avery
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029655.html">[Mono-dev] System.Unix.Native.Syscall.fork is commented out
</A></li>
	<LI>Next message: <A HREF="029657.html">[Mono-dev] System.Unix.Native.Syscall.fork is commented out
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29656">[ date ]</a>
              <a href="thread.html#29656">[ thread ]</a>
              <a href="subject.html#29656">[ subject ]</a>
              <a href="author.html#29656">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
