<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Fix for Membership.{Encrypt, Decrypt}Password
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Fix%20for%20Membership.%7BEncrypt%2C%20Decrypt%7DPassword&In-Reply-To=20061121113735.0cc8bde4%40beowulf">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021461.html">
   <LINK REL="Next"  HREF="021465.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Fix for Membership.{Encrypt, Decrypt}Password</H1>
    <B>Konstantin Triger</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Fix%20for%20Membership.%7BEncrypt%2C%20Decrypt%7DPassword&In-Reply-To=20061121113735.0cc8bde4%40beowulf"
       TITLE="[Mono-dev] [PATCH] Fix for Membership.{Encrypt, Decrypt}Password">kostat at mainsoft.com
       </A><BR>
    <I>Tue Nov 21 06:54:40 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021461.html">[Mono-dev] [PATCH] Fix for Membership.{Encrypt,Decrypt}Password
</A></li>
        <LI>Next message: <A HREF="021465.html">[Mono-dev] [PATCH] Fix for Membership.{Encrypt, Decrypt}Password
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21463">[ date ]</a>
              <a href="thread.html#21463">[ thread ]</a>
              <a href="subject.html#21463">[ subject ]</a>
              <a href="author.html#21463">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Marek,

You are actually adding 2 protected properties, thus changing the public interface (BTW, Algorithm is never used).

Caching algorithm is error prone since someone (in the future) may mistakenly use it as an algorithm instead of calling GetAlg(iv).

I think caching algorithmIVSize only (if we need caching at all) would be better.

Regards,
Kosta

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf Of Marek Habersack
Sent: Tuesday, November 21, 2006 12:38 PM
To: Mono Development List
Subject: [Mono-dev] [PATCH] Fix for Membership.{Encrypt,Decrypt}Password

Hello,

  Attached is a diff which reimplements the two methods mentioned in
the subject. The current implementation would break if the password
passed was larger than the symmetric algorithm block size and it
wouldn't take into account the IV embedded into the encrypted password
when decrypting. Also, it assumet the IV (salt) size to be 16 bytes,
which isn't forward-compatible. The reimplementation uses CryptoStream
and the size of the algorithm's IV to fix both of the problems.
  At first I thought that embedding the IV in the password passed to
{Encrypt,Decrypt}Password is incorrect according to the MS.NET
documentation, but the tests show that it's the documentation that's
wrong. 
  The diff also touches SqlMembershipProvider to account for the
salt size fix above. Please review,

best regards,

marek

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021461.html">[Mono-dev] [PATCH] Fix for Membership.{Encrypt,Decrypt}Password
</A></li>
	<LI>Next message: <A HREF="021465.html">[Mono-dev] [PATCH] Fix for Membership.{Encrypt, Decrypt}Password
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21463">[ date ]</a>
              <a href="thread.html#21463">[ thread ]</a>
              <a href="subject.html#21463">[ subject ]</a>
              <a href="author.html#21463">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
