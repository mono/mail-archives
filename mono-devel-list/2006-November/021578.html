<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Windows Shell
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Windows%20Shell&In-Reply-To=8f851ec20611290853g125e7747hbe32235670ea12f0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021576.html">
   <LINK REL="Next"  HREF="021585.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Windows Shell</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Windows%20Shell&In-Reply-To=8f851ec20611290853g125e7747hbe32235670ea12f0%40mail.gmail.com"
       TITLE="[Mono-dev] Windows Shell">miguel at ximian.com
       </A><BR>
    <I>Wed Nov 29 13:10:54 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021576.html">[Mono-dev] Windows Shell
</A></li>
        <LI>Next message: <A HREF="021585.html">[Mono-dev] Windows Shell
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21578">[ date ]</a>
              <a href="thread.html#21578">[ thread ]</a>
              <a href="subject.html#21578">[ subject ]</a>
              <a href="author.html#21578">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> Yes, I agree with your assesment.
</I>&gt;<i>  
</I>&gt;<i> As for duplicating the Windows Shell API, it would need to be
</I>&gt;<i> abstracted quite significantly, as it is the single worst API I have
</I>&gt;<i> used, and very much tied to the win32 implementation. 
</I>
I would create an abstraction for what you are trying to solve, and have
one implementation call into the Windows space, and another that we do
to map into the Linux world.

This is what we have in mind.

Miguel.

&gt;<i> How does one go about getting the Moma results?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>         My opinion, but what I think we need to achieve, and how to
</I>&gt;<i>         get there is 
</I>&gt;<i>         roughly:
</I>&gt;<i>         
</I>&gt;<i>         - Get the Moma results of P/Invoke calls, sorted by call
</I>&gt;<i>         frequency.
</I>&gt;<i>         - For each one:
</I>&gt;<i>            - Try to figure out why it's being called (what the user is
</I>&gt;<i>         trying to
</I>&gt;<i>         accomplish, which is not always easy or possible)
</I>&gt;<i>            - Determine if there is something already in the managed
</I>&gt;<i>         API that we
</I>&gt;<i>         should be pointing users to.
</I>&gt;<i>            - If not, design a .Net style function that accomplishes
</I>&gt;<i>         what the
</I>&gt;<i>         user is trying to do (which may or may not look like the Win32
</I>&gt;<i>         API call)
</I>&gt;<i>            - *!!* Document on the wiki every API call we examine, and
</I>&gt;<i>         what the 
</I>&gt;<i>         suggested replacement is.
</I>&gt;<i>         
</I>&gt;<i>         Another route is to simply duplicate the exact Win32 API
</I>&gt;<i>         syntax and try
</I>&gt;<i>         to make it perform the same on *nix.  This route would
</I>&gt;<i>         probably be
</I>&gt;<i>         easier for porters, at the expense of new users who would
</I>&gt;<i>         prefer to 
</I>&gt;<i>         accomplish the task without learning Win32 API.  (IMO, a
</I>&gt;<i>         large, large
</I>&gt;<i>         percentage of .Net developers have no desire to touch Win32,
</I>&gt;<i>         think VB.)
</I>&gt;<i>         
</I>&gt;<i>         Most likely, it would be a mix of both.  SendMessage would be
</I>&gt;<i>         a pretty 
</I>&gt;<i>         straight call, whereas GetIconFromFile could be made easier to
</I>&gt;<i>         use.
</I>&gt;<i>         Place all the results in a .dll called Mono.Compatibility or
</I>&gt;<i>         Mono.Platform or something.  Position it as both a library to
</I>&gt;<i>         help
</I>&gt;<i>         people porting to Mono, as well as an abstraction layer to
</I>&gt;<i>         make the 
</I>&gt;<i>         Win32 easier for .Net people.
</I>&gt;<i>         
</I>&gt;<i>         Jon
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021576.html">[Mono-dev] Windows Shell
</A></li>
	<LI>Next message: <A HREF="021585.html">[Mono-dev] Windows Shell
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21578">[ date ]</a>
              <a href="thread.html#21578">[ thread ]</a>
              <a href="subject.html#21578">[ subject ]</a>
              <a href="author.html#21578">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
