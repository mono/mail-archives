<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Strange crash when building SVN Head
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Strange%20crash%20when%20building%20SVN%20Head&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021254.html">
   <LINK REL="Next"  HREF="021249.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Strange crash when building SVN Head</H1>
    <B>Ivan N. Zlatev</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Strange%20crash%20when%20building%20SVN%20Head&In-Reply-To="
       TITLE="[Mono-dev] Strange crash when building SVN Head">contact at i-nz.net
       </A><BR>
    <I>Mon Nov  6 20:33:25 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021254.html">[Mono-dev] ARM exceptions
</A></li>
        <LI>Next message: <A HREF="021249.html">[Mono-dev] Assembly.GetEntryAssembly() returns null
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21248">[ date ]</a>
              <a href="thread.html#21248">[ thread ]</a>
              <a href="subject.html#21248">[ subject ]</a>
              <a href="author.html#21248">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just updated to SVN Head (revision 67420) and I got this crash when
building with a week old svn checkout. It occured only once, after
that everything built fine. Backtrace below.

make[8]: Entering directory `/svn/mono/mcs/tools/genxs'
MONO_PATH=&quot;../../class/lib/default:$MONO_PATH&quot;
/svn/mono/mono/runtime/mono-wrapper  ../../class/lib/default/mcs.exe
/codepage:65001 -r:System.Xml.dll  -d:NET_1_1 -d:ONLY_1_1 -debug
-target:exe -out:genxs.exe   @genxs.exe.sources

** (../../class/lib/default/mcs.exe:15834): WARNING **: implement me 0x00


** ERROR **: file class.c: line 3402 (mono_class_from_mono_type):
should not be reached
aborting...

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================

Stacktrace:


Native stacktrace:

        /svn/mono/mono/mono/mini/mono(mono_handle_native_sigsegv+0xde)
[0x815e82e]
        [0xffffe440]
        /lib/libc.so.6(abort+0x103) [0xb7d8bea3]
        /opt/gnome/lib/libglib-2.0.so.0(g_logv+0x46d) [0xb7eed1bd]
        /opt/gnome/lib/libglib-2.0.so.0(g_log+0x35) [0xb7eed205]
        /opt/gnome/lib/libglib-2.0.so.0(g_assert_warning+0x76) [0xb7eed286]
        /svn/mono/mono/mono/mini/mono(mono_class_from_mono_type+0x71)
[0x80f4c41]
        /svn/mono/mono/mono/mini/mono(mono_compile_create_var+0x86) [0x812daf6]
        /svn/mono/mono/mono/mini/mono [0x8149050]
        /svn/mono/mono/mono/mini/mono [0x814aaf1]
        /svn/mono/mono/mono/mini/mono [0x814b115]
        /svn/mono/mono/mono/mini/mono [0x80aede3]
        /svn/mono/mono/mono/mini/mono [0x811c041]
        /svn/mono/mono/mono/mini/mono [0x80aef99]
        /svn/mono/mono/mono/mini/mono [0x80c91a4]
        /svn/mono/mono/mono/mini/mono [0x810fede]
        /svn/mono/mono/mono/mini/mono [0x8126365]
        /lib/libpthread.so.0 [0xb7eac34b]
        /lib/libc.so.6(__clone+0x5e) [0xb7e1f65e]

Debug info from gdb:

Using host libthread_db library &quot;/lib/libthread_db.so.1&quot;.
[Thread debugging using libthread_db enabled]
[New Thread -1210705600 (LWP 15834)]
[New Thread -1219490912 (LWP 15893)]
[New Thread -1219408992 (LWP 15892)]
0x0812bacd in emit_state (cfg=0x8233a18, state=0x83a0d2c, goal=3)
    at mini.c:9553
9553                    if ((state-&gt;tree-&gt;ssa_op == MONO_SSA_STORE) &amp;&amp;
(state-&gt;left-&gt;tree-&gt;opcode == OP_REGVAR)) {
  3 Thread -1219408992 (LWP 15892)  0xffffe410 in __kernel_vsyscall ()
  2 Thread -1219490912 (LWP 15893)  0xffffe410 in __kernel_vsyscall ()
  1 Thread -1210705600 (LWP 15834)  0x0812bacd in emit_state (cfg=0x8233a18,
    state=0x83a0d2c, goal=3) at mini.c:9553

Thread 3 (Thread -1219408992 (LWP 15892)):
#0  0xffffe410 in __kernel_vsyscall ()
#1  0xb7eb2b26 in __nanosleep_nocancel () from /lib/libpthread.so.0
#2  0x080fc804 in collection_thread (unused=0x0) at collection.c:34
#3  0xb7eac34b in start_thread () from /lib/libpthread.so.0
#4  0xb7e1f65e in clone () from /lib/libc.so.6

Thread 2 (Thread -1219490912 (LWP 15893)):
#0  0xffffe410 in __kernel_vsyscall ()
#1  0xb7eb22db in __read_nocancel () from /lib/libpthread.so.0
#2  0xb7f0e6fb in g_spawn_command_line_async ()
   from /opt/gnome/lib/libglib-2.0.so.0
#3  0xb7f0ea04 in g_spawn_sync () from /opt/gnome/lib/libglib-2.0.so.0
#4  0xb7f0ed6c in g_spawn_command_line_sync ()
   from /opt/gnome/lib/libglib-2.0.so.0
#5  0x0815e8c0 in mono_handle_native_sigsegv (signal=6, ctx=0xb74ff85c)
    at mini-exceptions.c:1073
#6  &lt;signal handler called&gt;
#7  0xffffe410 in __kernel_vsyscall ()
#8  0xb7d8a7d0 in raise () from /lib/libc.so.6
#9  0xb7d8bea3 in abort () from /lib/libc.so.6
#10 0xb7eed1bd in g_logv () from /opt/gnome/lib/libglib-2.0.so.0
#11 0xb7eed205 in g_log () from /opt/gnome/lib/libglib-2.0.so.0
#12 0xb7eed286 in g_assert_warning () from /opt/gnome/lib/libglib-2.0.so.0
#13 0x080f4c41 in mono_class_from_mono_type (type=0x14764) at class.c:3402
#14 0x0812daf6 in mono_compile_create_var (cfg=0x0, type=0x14764, opcode=320)
    at mini.c:1592
#15 0x08149050 in mini_method_compile (method=0x848fc8c, opts=5335551,
    domain=0x21ed8, run_cctors=&lt;value optimized out&gt;,
    compile_aot=&lt;value optimized out&gt;, parts=0) at mini.c:9476
#16 0x0814aaf1 in mono_jit_compile_method (method=0x848fc8c) at mini.c:10388
#17 0x0814b115 in mono_jit_runtime_invoke (method=0x82513ec, obj=0x52eb0,
    params=0x0, exc=0xb7500308) at mini.c:10655
#18 0x080aede3 in run_finalize (obj=0x52eb0, data=0x0) at gc.c:103
#19 0x0811c041 in GC_invoke_finalizers () at finalize.c:787
#20 0x080aef99 in finalizer_thread (unused=0x0) at gc.c:838
#21 0x080c91a4 in start_wrapper (data=0x82202a0) at threads.c:313
#22 0x0810fede in thread_start_routine (args=0xb789a3b4) at threads.c:253
#23 0x08126365 in GC_start_routine (arg=0x22f40) at pthread_support.c:1357
#24 0xb7eac34b in start_thread () from /lib/libpthread.so.0
#25 0xb7e1f65e in clone () from /lib/libc.so.6

Thread 1 (Thread -1210705600 (LWP 15834)):
#0  0x0812bacd in emit_state (cfg=0x8233a18, state=0x83a0d2c, goal=3)
    at mini.c:9553
#1  0x0812bb0f in emit_state (cfg=0x8233a18, state=0x83a0cfc, goal=2)
    at mini.c:9567
#2  0x0812bb0f in emit_state (cfg=0x8233a18, state=0x83a0ccc, goal=2)
    at mini.c:9567
#3  0x0812bb0f in emit_state (cfg=0x8233a18, state=0x83a0c6c, goal=1)
    at mini.c:9567
#4  0x081494d6 in mini_method_compile (method=0x8298af4, opts=5335551,
    domain=0x21ed8, run_cctors=&lt;value optimized out&gt;,
    compile_aot=&lt;value optimized out&gt;, parts=0) at mini.c:9659
#5  0x0814aaf1 in mono_jit_compile_method (method=0x8298af4) at mini.c:10388
#6  0x0807dfba in mono_magic_trampoline (regs=0xbfd86960,
    code=0xb71d302c &quot;\203&amp;#65535;\b\213&amp;#1592;T\037\006&quot;, m=0x8298af4,
tramp=0x0)
    at mini-trampolines.c:27
#7  0xb7f55032 in ?? ()
#8  0xbfd86960 in ?? ()
#9  0xb71d302c in ?? ()
#10 0x08298af4 in ?? ()
#11 0x00000000 in ?? ()
0x0812bacd      9553                    if ((state-&gt;tree-&gt;ssa_op ==
MONO_SSA_STORE) &amp;&amp; (state-&gt;left-&gt;tree-&gt;opcode == OP_REGVAR)) {

make[8]: *** [genxs.exe] Aborted
make[8]: Leaving directory `/svn/mono/mcs/tools/genxs'
make[7]: *** [do-all] Error 2
make[7]: Leaving directory `/svn/mono/mcs/tools/genxs'
make[6]: *** [all-recursive] Error 1
make[6]: Leaving directory `/svn/mono/mcs/tools'
make[5]: *** [all-recursive] Error 1
make[5]: Leaving directory `/svn/mono/mcs'
make[4]: *** [profile-do--default--all] Error 2
make[4]: Leaving directory `/svn/mono/mcs'
make[3]: *** [profiles-do--all] Error 2
make[3]: Leaving directory `/svn/mono/mcs'
make[2]: *** [all-local] Error 2
make[2]: Leaving directory `/svn/mono/mono/runtime'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/svn/mono/mono'
make: *** [all] Error 2
make[8]: Entering directory `/svn/mono/mcs/tools/genxs'
MONO_PATH=&quot;../../class/lib/default:$MONO_PATH&quot;
/svn/mono/mono/runtime/mono-wrapper  ../../class/lib/default/mcs.exe
/codepage:65001 -r:System.Xml.dll  -d:NET_1_1 -d:ONLY_1_1 -debug
-target:exe -out:genxs.exe   @genxs.exe.sources

** (../../class/lib/default/mcs.exe:15834): WARNING **: implement me 0x00


** ERROR **: file class.c: line 3402 (mono_class_from_mono_type):
should not be reached
aborting...

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================

Stacktrace:


Native stacktrace:

        /svn/mono/mono/mono/mini/mono(mono_handle_native_sigsegv+0xde)
[0x815e82e]
        [0xffffe440]
        /lib/libc.so.6(abort+0x103) [0xb7d8bea3]
        /opt/gnome/lib/libglib-2.0.so.0(g_logv+0x46d) [0xb7eed1bd]
        /opt/gnome/lib/libglib-2.0.so.0(g_log+0x35) [0xb7eed205]
        /opt/gnome/lib/libglib-2.0.so.0(g_assert_warning+0x76) [0xb7eed286]
        /svn/mono/mono/mono/mini/mono(mono_class_from_mono_type+0x71)
[0x80f4c41]
        /svn/mono/mono/mono/mini/mono(mono_compile_create_var+0x86) [0x812daf6]
        /svn/mono/mono/mono/mini/mono [0x8149050]
        /svn/mono/mono/mono/mini/mono [0x814aaf1]
        /svn/mono/mono/mono/mini/mono [0x814b115]
        /svn/mono/mono/mono/mini/mono [0x80aede3]
        /svn/mono/mono/mono/mini/mono [0x811c041]
        /svn/mono/mono/mono/mini/mono [0x80aef99]
        /svn/mono/mono/mono/mini/mono [0x80c91a4]
        /svn/mono/mono/mono/mini/mono [0x810fede]
        /svn/mono/mono/mono/mini/mono [0x8126365]
        /lib/libpthread.so.0 [0xb7eac34b]
        /lib/libc.so.6(__clone+0x5e) [0xb7e1f65e]

Debug info from gdb:

Using host libthread_db library &quot;/lib/libthread_db.so.1&quot;.
[Thread debugging using libthread_db enabled]
[New Thread -1210705600 (LWP 15834)]
[New Thread -1219490912 (LWP 15893)]
[New Thread -1219408992 (LWP 15892)]
0x0812bacd in emit_state (cfg=0x8233a18, state=0x83a0d2c, goal=3)
    at mini.c:9553
9553                    if ((state-&gt;tree-&gt;ssa_op == MONO_SSA_STORE) &amp;&amp;
(state-&gt;left-&gt;tree-&gt;opcode == OP_REGVAR)) {
  3 Thread -1219408992 (LWP 15892)  0xffffe410 in __kernel_vsyscall ()
  2 Thread -1219490912 (LWP 15893)  0xffffe410 in __kernel_vsyscall ()
  1 Thread -1210705600 (LWP 15834)  0x0812bacd in emit_state (cfg=0x8233a18,
    state=0x83a0d2c, goal=3) at mini.c:9553

Thread 3 (Thread -1219408992 (LWP 15892)):
#0  0xffffe410 in __kernel_vsyscall ()
#1  0xb7eb2b26 in __nanosleep_nocancel () from /lib/libpthread.so.0
#2  0x080fc804 in collection_thread (unused=0x0) at collection.c:34
#3  0xb7eac34b in start_thread () from /lib/libpthread.so.0
#4  0xb7e1f65e in clone () from /lib/libc.so.6

Thread 2 (Thread -1219490912 (LWP 15893)):
#0  0xffffe410 in __kernel_vsyscall ()
#1  0xb7eb22db in __read_nocancel () from /lib/libpthread.so.0
#2  0xb7f0e6fb in g_spawn_command_line_async ()
   from /opt/gnome/lib/libglib-2.0.so.0
#3  0xb7f0ea04 in g_spawn_sync () from /opt/gnome/lib/libglib-2.0.so.0
#4  0xb7f0ed6c in g_spawn_command_line_sync ()
   from /opt/gnome/lib/libglib-2.0.so.0
#5  0x0815e8c0 in mono_handle_native_sigsegv (signal=6, ctx=0xb74ff85c)
    at mini-exceptions.c:1073
#6  &lt;signal handler called&gt;
#7  0xffffe410 in __kernel_vsyscall ()
#8  0xb7d8a7d0 in raise () from /lib/libc.so.6
#9  0xb7d8bea3 in abort () from /lib/libc.so.6
#10 0xb7eed1bd in g_logv () from /opt/gnome/lib/libglib-2.0.so.0
#11 0xb7eed205 in g_log () from /opt/gnome/lib/libglib-2.0.so.0
#12 0xb7eed286 in g_assert_warning () from /opt/gnome/lib/libglib-2.0.so.0
#13 0x080f4c41 in mono_class_from_mono_type (type=0x14764) at class.c:3402
#14 0x0812daf6 in mono_compile_create_var (cfg=0x0, type=0x14764, opcode=320)
    at mini.c:1592
#15 0x08149050 in mini_method_compile (method=0x848fc8c, opts=5335551,
    domain=0x21ed8, run_cctors=&lt;value optimized out&gt;,
    compile_aot=&lt;value optimized out&gt;, parts=0) at mini.c:9476
#16 0x0814aaf1 in mono_jit_compile_method (method=0x848fc8c) at mini.c:10388
#17 0x0814b115 in mono_jit_runtime_invoke (method=0x82513ec, obj=0x52eb0,
    params=0x0, exc=0xb7500308) at mini.c:10655
#18 0x080aede3 in run_finalize (obj=0x52eb0, data=0x0) at gc.c:103
#19 0x0811c041 in GC_invoke_finalizers () at finalize.c:787
#20 0x080aef99 in finalizer_thread (unused=0x0) at gc.c:838
#21 0x080c91a4 in start_wrapper (data=0x82202a0) at threads.c:313
#22 0x0810fede in thread_start_routine (args=0xb789a3b4) at threads.c:253
#23 0x08126365 in GC_start_routine (arg=0x22f40) at pthread_support.c:1357
#24 0xb7eac34b in start_thread () from /lib/libpthread.so.0
#25 0xb7e1f65e in clone () from /lib/libc.so.6

Thread 1 (Thread -1210705600 (LWP 15834)):
#0  0x0812bacd in emit_state (cfg=0x8233a18, state=0x83a0d2c, goal=3)
    at mini.c:9553
#1  0x0812bb0f in emit_state (cfg=0x8233a18, state=0x83a0cfc, goal=2)
    at mini.c:9567
#2  0x0812bb0f in emit_state (cfg=0x8233a18, state=0x83a0ccc, goal=2)
    at mini.c:9567
#3  0x0812bb0f in emit_state (cfg=0x8233a18, state=0x83a0c6c, goal=1)
    at mini.c:9567
#4  0x081494d6 in mini_method_compile (method=0x8298af4, opts=5335551,
    domain=0x21ed8, run_cctors=&lt;value optimized out&gt;,
    compile_aot=&lt;value optimized out&gt;, parts=0) at mini.c:9659
#5  0x0814aaf1 in mono_jit_compile_method (method=0x8298af4) at mini.c:10388
#6  0x0807dfba in mono_magic_trampoline (regs=0xbfd86960,
    code=0xb71d302c &quot;\203&amp;#65535;\b\213&amp;#1592;T\037\006&quot;, m=0x8298af4,
tramp=0x0)
    at mini-trampolines.c:27
#7  0xb7f55032 in ?? ()
#8  0xbfd86960 in ?? ()
#9  0xb71d302c in ?? ()
#10 0x08298af4 in ?? ()
#11 0x00000000 in ?? ()
0x0812bacd      9553                    if ((state-&gt;tree-&gt;ssa_op ==
MONO_SSA_STORE) &amp;&amp; (state-&gt;left-&gt;tree-&gt;opcode == OP_REGVAR)) {

make[8]: *** [genxs.exe] Aborted
make[8]: Leaving directory `/svn/mono/mcs/tools/genxs'
make[7]: *** [do-all] Error 2
make[7]: Leaving directory `/svn/mono/mcs/tools/genxs'
make[6]: *** [all-recursive] Error 1
make[6]: Leaving directory `/svn/mono/mcs/tools'
make[5]: *** [all-recursive] Error 1
make[5]: Leaving directory `/svn/mono/mcs'
make[4]: *** [profile-do--default--all] Error 2
make[4]: Leaving directory `/svn/mono/mcs'
make[3]: *** [profiles-do--all] Error 2
make[3]: Leaving directory `/svn/mono/mcs'
make[2]: *** [all-local] <A HREF="Errohttp://i-nz.net/r">Errohttp://i-nz.net/r</A> 2
make[2]: Leaving directory `/svn/mono/mono/runtime'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/svn/mono/mono'
make: *** [all] Error 2
-- 
Ivan N. Zlatev

Web: <A HREF="http://www.i-nZ.net">http://www.i-nZ.net</A>
&quot;It's all some kind of whacked out conspiracy.&quot;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021254.html">[Mono-dev] ARM exceptions
</A></li>
	<LI>Next message: <A HREF="021249.html">[Mono-dev] Assembly.GetEntryAssembly() returns null
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21248">[ date ]</a>
              <a href="thread.html#21248">[ thread ]</a>
              <a href="subject.html#21248">[ subject ]</a>
              <a href="author.html#21248">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
