<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] fork() in Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20fork%28%29%20in%20Mono&In-Reply-To=%3C971dbc0b-10f3-d1a3-ac28-8be87934ee5e%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044558.html">
   <LINK REL="Next"  HREF="044560.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] fork() in Mono</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20fork%28%29%20in%20Mono&In-Reply-To=%3C971dbc0b-10f3-d1a3-ac28-8be87934ee5e%40gmx.net%3E"
       TITLE="[Mono-dev] fork() in Mono">robertj at gmx.net
       </A><BR>
    <I>Mon Dec  4 12:06:31 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044558.html">[Mono-dev] fork() in Mono
</A></li>
        <LI>Next message (by thread): <A HREF="044560.html">[Mono-dev] CodeDomProvider calls mcs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44559">[ date ]</a>
              <a href="thread.html#44559">[ thread ]</a>
              <a href="subject.html#44559">[ subject ]</a>
              <a href="author.html#44559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04.12.2017 02:23, Gene Thomas wrote:
&gt;<i> What happens specifically?|fork()|starts a process, it does not shut 
</I>&gt;<i> anything down?|fork()|should just work, does it not (effectively (copy 
</I>&gt;<i> on write)) copy the entire VM which then each shuts down 
</I>&gt;<i> independently?|fork()|does work in Python on Unix (multiprocessing module).
</I>&gt;<i> 
</I>&gt;<i> |fork()|is powerful, it supports using processes as an alternative to 
</I>&gt;<i> threads. One can not test for a one in a million race 
</I>&gt;<i> condition.|System.Diagnostics.Process|only replaces|fork()|then|exec()|. 
</I>&gt;<i> I wish to use|fork()|to support replicated processes, starting with a 
</I>&gt;<i> complete copy of the application's state greatly simplifies this.
</I>
You may want to look at fork(2)'s specs, especially to those parts
regarding multithreading.

The forked child will start with one running thread only, etc.

This means that W/out some kind of advanced runtime support
for fork(2), you won't go very far. The GC and other service
threads won't run anymore, etc.

For toying around, you can test fork(2) even w/out Mono.Posix:

---
using System;
using System.Runtime.InteropServices;

class Program {
	[DllImport(&quot;libc&quot;)]
	public static extern int fork();

	public static void Main()
	{
		int pid = fork();
		if (pid == -1) {
			Console.WriteLine(&quot;fork failed&quot;);
		} else if (pid == 0) {
			Console.WriteLine (&quot;child&quot;);
		} else
			Console.WriteLine (&quot;parent, child's pid={0}&quot;, pid);
	}
}
---

Robert

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044558.html">[Mono-dev] fork() in Mono
</A></li>
	<LI>Next message (by thread): <A HREF="044560.html">[Mono-dev] CodeDomProvider calls mcs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44559">[ date ]</a>
              <a href="thread.html#44559">[ thread ]</a>
              <a href="subject.html#44559">[ subject ]</a>
              <a href="author.html#44559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
