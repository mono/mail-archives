<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] SerialPort auto-inserts carriage return
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20SerialPort%20auto-inserts%20carriage%20return&In-Reply-To=19468589.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029133.html">
   <LINK REL="Next"  HREF="029137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] SerialPort auto-inserts carriage return</H1>
    <B>Petit Eric</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20SerialPort%20auto-inserts%20carriage%20return&In-Reply-To=19468589.post%40talk.nabble.com"
       TITLE="[Mono-dev] SerialPort auto-inserts carriage return">surfzoid at gmail.com
       </A><BR>
    <I>Sun Sep 14 12:52:25 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029133.html">[Mono-dev]  SerialPort auto-inserts carriage return
</A></li>
        <LI>Next message: <A HREF="029137.html">[Mono-dev] SerialPort auto-inserts carriage return
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29134">[ date ]</a>
              <a href="thread.html#29134">[ thread ]</a>
              <a href="subject.html#29134">[ subject ]</a>
              <a href="author.html#29134">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/9/13 mikaelwikman &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mail at mikaelwikman.se</A>&gt;:
&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Im using a System.IO.Ports.SerialPort to communicate with an embedded system
</I>&gt;<i> currently being developed where i work. The ES uses a binary protocol, so
</I>&gt;<i> the data is not ascii and do not use newlines.
</I>&gt;<i>
</I>&gt;<i> The strange thing is this; For every byte with the value 10 (linefeed) an
</I>&gt;<i> extra byte with value 13 (carriage return) is inserted into the stream im
</I>&gt;<i> reading from, totally messes up the protocol.
</I>&gt;<i>
</I>&gt;<i> So: &lt;10&gt; becomes &lt;13&gt;&lt;10&gt;, and also &lt;13&gt;&lt;10&gt; becomes &lt;13&gt;&lt;13&gt;&lt;10&gt;.
</I>&gt;<i>
</I>&gt;<i> I'm running Linux, the code has not been tested using .NET
</I>&gt;<i>
</I>&gt;<i> Some of my code:
</I>&gt;<i>
</I>&gt;<i>            SerialPort serialB = new SerialPort()
</I>&gt;<i>
</I>&gt;<i>            serialB.BaudRate = 115200;
</I>&gt;<i>            serialB.DtrEnable = true;
</I>&gt;<i>            serialB.PortName = &quot;/dev/ttyUSB0&quot;;
</I>&gt;<i>            serialB.ReadTimeout = 5;
</I>&gt;<i>
</I>&gt;<i>            (...)
</I>&gt;<i>
</I>&gt;<i>            byte[] data = new byte[serialB.BytesToRead];
</I>&gt;<i>            serialB.Read(data, 0, serialB.BytesToRead);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm thinking this is either a bug or there is some setting which turns this
</I>&gt;<i> off. Appreciate any help, thanks!
</I>There is really long time i used serial port, but from my memory there
is something like serialB.EndOfLine no ?
in this case yu just need to set it null
also with ASCII there was readline or read, so read normaly don't add
endline, en so after UTF8.getbyte(str)
Also for reading purpose i suggest you to use the serial port event,
data receveid (need callback of async task)

&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://www.nabble.com/SerialPort-auto-inserts-carriage-return-tp19468589p19468589.html">http://www.nabble.com/SerialPort-auto-inserts-carriage-return-tp19468589p19468589.html</A>
</I>&gt;<i> Sent from the Mono - Dev mailing list archive at Nabble.com.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>


-- 

Cordially.

Small Eric Quotations of the days:
---------------------------------------------------------------------------
If one day one reproaches you that your work is not a work of
professional, say you that:
Amateurs built the arch of Noah, and professionals the Titanic.
---------------------------------------------------------------------------

Few people are done for independence, it is the privilege of the powerful ones.
---------------------------------------------------------------------------

No key was wounded during the drafting of this message.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029133.html">[Mono-dev]  SerialPort auto-inserts carriage return
</A></li>
	<LI>Next message: <A HREF="029137.html">[Mono-dev] SerialPort auto-inserts carriage return
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29134">[ date ]</a>
              <a href="thread.html#29134">[ thread ]</a>
              <a href="subject.html#29134">[ subject ]</a>
              <a href="author.html#29134">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
