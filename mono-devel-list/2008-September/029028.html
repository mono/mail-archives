<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev]  Stable MySQL Connector/NET for Mono on Linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Stable%20MySQL%20Connector/NET%20for%20Mono%20on%20Linux&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029025.html">
   <LINK REL="Next"  HREF="029026.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev]  Stable MySQL Connector/NET for Mono on Linux</H1>
    <B>ebbtepi</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Stable%20MySQL%20Connector/NET%20for%20Mono%20on%20Linux&In-Reply-To="
       TITLE="[Mono-dev]  Stable MySQL Connector/NET for Mono on Linux">boaz at plum.co.za
       </A><BR>
    <I>Tue Sep  2 05:42:05 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029025.html">[Mono-dev] Remoting - can't pass an object reference in call between windows and mono.
</A></li>
        <LI>Next message: <A HREF="029026.html">[Mono-dev] WinForms or GTK# Forms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29028">[ date ]</a>
              <a href="thread.html#29028">[ thread ]</a>
              <a href="subject.html#29028">[ subject ]</a>
              <a href="author.html#29028">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

I have using MySQL Connector/NET (MySql.Data.Dll) to connect to MySQL from
my Mono app which runs on Fedora Core 7.

My program has about 150 simultaneous users (it's a chat server) and queries
the database a fair bit.

It crashes anywhere from 10 minutes to 2 hours running with this error:

Stacktrace:

  at (wrapper managed-to-native) System.Buffer.BlockCopyInternal
(System.Array,int,System.Array,int,int) &lt;0x00004&gt;
  at (wrapper managed-to-native) System.Buffer.BlockCopyInternal
(System.Array,int,System.Array,int,int) &lt;0xffffffff&gt;
recvd cmd: 6 (252191)
  at System.IO.BufferedStream.Read (byte[],int,int) [0x00175] in
/root/mono-1.9.1/mono-1.9.1/mcs/class/corlib/System.IO/BufferedStream.cs:244
  at System.IO.BufferedStream.ReadByte () [0x0000d] in
/root/mono-1.9.1/mono-1.9.1/mcs/class/corlib/System.IO/BufferedStream.cs:181
  at MySql.Data.MySqlClient.MySqlStream.LoadPacket () &lt;0x0001e&gt;
  at MySql.Data.MySqlClient.MySqlStream.OpenPacket () &lt;0x00041&gt;
  at MySql.Data.MySqlClient.NativeDriver.ReadResult (ulong&amp;,long&amp;) &lt;0x0003f&gt;
  at MySql.Data.MySqlClient.MySqlDataReader.GetResultSet () &lt;0x0003e&gt;
  at MySql.Data.MySqlClient.MySqlDataReader.NextResult () &lt;0x00072&gt;
  at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader
(System.Data.CommandBehavior) &lt;0x0057d&gt;
  at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader () &lt;0x0000c&gt;
  at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery () &lt;0x0002f&gt;
  at webtunnel.Database.Query
(string,System.Collections.ArrayList,bool,bool,int,string,string) [0x00156]
in /www/CMS/servers/webtunnel/Database.cs:117
  at webtunnel.Database.ExecuteNonQuery
(string,System.Collections.ArrayList) [0x00000] in
/www/CMS/servers/webtunnel/Database.cs:139
  at webtunnel.Channel.RemoveUser (webtunnel.User) [0x00065] in
/www/CMS/servers/webtunnel/Channel.cs:578
  at webtunnel.Channel.UserPart (webtunnel.User,int,string,string) [0x00000]
in /www/CMS/servers/webtunnel/Channel.cs:96
  at webtunnel.Server.DisconnectUser
(webtunnel.User,int,System.Collections.ArrayList) [0x000cc] in
/www/CMS/servers/webtunnel/Server.cs:200
  at webtunnel.UserWrite.HandleWrite () [0x00137] in
/www/CMS/servers/webtunnel/UserWrite.cs:56
  at (wrapper runtime-invoke) System.Object.runtime_invoke_void
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

        /usr/local/bin/mono [0x816a5af]
        /usr/local/bin/mono [0x807dcf1]
        [0x110440]
        [0x412313]
        [0x3ec87f2]
        [0x3ecae02]
        [0x3ecac97]
        [0x3ecaac2]
        [0x652e278]
        [0x652e117]
        [0x652d99b]
        [0x652b266]
        [0x652acd5]
        [0x6532ef8]
        [0x65356ff]
        [0x65352db]
        [0x35c4e86]
        [0x35c4bf1]
        [0x73a53d6]
        [0x3179aa1]
        [0x46e8a9]
        /usr/local/bin/mono(mono_runtime_delegate_invoke+0x36) [0x80c6d26]
        /usr/local/bin/mono [0x80d282d]
        /usr/local/bin/mono [0x8109ef2]
        /usr/local/bin/mono [0x8120a55]
        /lib/libpthread.so.0 [0x32144b]
        /lib/libc.so.6(clone+0x5e) [0x26480e]


I've tried using connector/net 1.0.7, 1.0.9, 5.0.3... still same problem

Any ideas? I've been stumped for months.
-- 
View this message in context: <A HREF="http://www.nabble.com/Stable-MySQL-Connector-NET-for-Mono-on-Linux-tp19267056p19267056.html">http://www.nabble.com/Stable-MySQL-Connector-NET-for-Mono-on-Linux-tp19267056p19267056.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029025.html">[Mono-dev] Remoting - can't pass an object reference in call between windows and mono.
</A></li>
	<LI>Next message: <A HREF="029026.html">[Mono-dev] WinForms or GTK# Forms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29028">[ date ]</a>
              <a href="thread.html#29028">[ thread ]</a>
              <a href="subject.html#29028">[ subject ]</a>
              <a href="author.html#29028">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
