<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Patch: Bugfix for a constrained. issue with generic code	sharing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%3A%20Bugfix%20for%20a%20constrained.%20issue%20with%20generic%20code%0A%09sharing&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029276.html">
   <LINK REL="Next"  HREF="029278.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Patch: Bugfix for a constrained. issue with generic code	sharing</H1>
    <B>Mark Probst</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%3A%20Bugfix%20for%20a%20constrained.%20issue%20with%20generic%20code%0A%09sharing&In-Reply-To="
       TITLE="[Mono-dev] Patch: Bugfix for a constrained. issue with generic code	sharing">mark.probst at gmail.com
       </A><BR>
    <I>Tue Sep 30 15:44:10 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029276.html">[Mono-dev] close on exec
</A></li>
        <LI>Next message: <A HREF="029278.html">[Mono-dev] close on exec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29277">[ date ]</a>
              <a href="thread.html#29277">[ thread ]</a>
              <a href="subject.html#29277">[ subject ]</a>
              <a href="author.html#29277">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

Jonathan found a generic code sharing bug connected with the
constrained. prefix, which this patch fixes.  I don't know what the
original reasoning behind the inflation with the class context was, but
it seems to be wrong, since the method is taken out of that class, so
it's already inflated with that class's context.  When handling open
types it becomes a problem, though, like in the test case:

	  constrained. valuetype Gen`1&lt;!T&gt;
          callvirt instance int32 class IGen`1&lt;!T&gt;::bla()

Here the method will be Gen`1&lt;!T&gt;::bla(), with T being the second
generic argument (i.e. !1).  If this method is inflated with the context
of Gen`1&lt;!T&gt; an error occurs because Gen`1&lt;!T&gt; only has one generic
argument.  And even if it had two, it might be the wrong one.

Mark

-------------- next part --------------
A non-text attachment was scrubbed...
Name: constrained.diff
Type: text/x-patch
Size: 5441 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080930/f0cdb173/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080930/f0cdb173/attachment-0001.bin</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029276.html">[Mono-dev] close on exec
</A></li>
	<LI>Next message: <A HREF="029278.html">[Mono-dev] close on exec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29277">[ date ]</a>
              <a href="thread.html#29277">[ thread ]</a>
              <a href="subject.html#29277">[ subject ]</a>
              <a href="author.html#29277">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
