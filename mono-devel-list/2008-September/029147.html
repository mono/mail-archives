<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono support on Fedora, Ubuntu, Solaris, etc.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono%20support%20on%20Fedora%2C%20Ubuntu%2C%20Solaris%2C%20etc.&In-Reply-To=1221513411.8091.18.camel%40PB3.Linux">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029146.html">
   <LINK REL="Next"  HREF="029148.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono support on Fedora, Ubuntu, Solaris, etc.</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono%20support%20on%20Fedora%2C%20Ubuntu%2C%20Solaris%2C%20etc.&In-Reply-To=1221513411.8091.18.camel%40PB3.Linux"
       TITLE="[Mono-dev] Mono support on Fedora, Ubuntu, Solaris, etc.">jonpryor at vt.edu
       </A><BR>
    <I>Mon Sep 15 17:56:01 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029146.html">[Mono-dev] Mono support on Fedora, Ubuntu, Solaris, etc.
</A></li>
        <LI>Next message: <A HREF="029148.html">[Mono-dev] Mono support on Fedora, Ubuntu, Solaris, etc.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29147">[ date ]</a>
              <a href="thread.html#29147">[ thread ]</a>
              <a href="subject.html#29147">[ subject ]</a>
              <a href="author.html#29147">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2008-09-15 at 22:16 +0100, Paul wrote:
&gt;<i> For Fedora/RedHat users, the rule for 64 bit users is that code goes
</I>&gt;<i> in /usr/lib64 rather than /usr/lib. Mono has quite a few packages which
</I>&gt;<i> proports to move code to the correct libdir, but has things hardcoded as
</I>&gt;<i> $(prefix)/lib rather than $(libdir) within config (and even source)
</I>&gt;<i> files.
</I>&gt;<i> 
</I>&gt;<i> To Fedora/RedHat users, this is a 100% no-no.
</I>
Where should IL be placed?  Platform-independent IL, at that (e.g.
monodoc.dll, System.Core.dll, etc.)?  openSUSE places this
under /usr/lib, even on 64-bit platforms (which admittedly is rather
odd).  What does Fedora suggest?

(It's not as if this is unique to Mono, either, as Java, Perl, Python,
and others will all have lots of platform-independent code...)

I tried looking at Fedora's wiki, but it's no help -- what directory is
%{buildroot}%{gemdir} (as used in Ruby) or %{_javadir} (Java)?  I have
no idea.

&gt;<i> Another no-no is the packaging of prebuilt libraries. For example, why
</I>&gt;<i> does MD come with mono-cecil prebuilt when there is no good reason for
</I>&gt;<i> not using the version supplied by mono itself?
</I>
There is a good reason.  A very good reason.  It makes the MD
development independent of the mono development.

More specifically, Mono.Cecil (and *lots* of other libraries) has NO
STABLE ABI.  Meaning Mono.Cecil could change in a completely
incompatible way *tomorrow*, theoretically.  This is intentional, as
Mono.Cecil is still under development, and bug fixes and optimizations
may require incompatible changes to the API/ABI, among other things.

In short, it's entirely possible for someone to make a change to
Mono.Cecil in mcs and inadvertently break MD.  This is BAD.

Gnome's libegg, should you remember it, was in the same boat: no
guaranteed stable ABI.

So we have three choices here:

1. Declare Mono.Cecil as ABI-stable.  (This would effect *every*
possibly-shared assembly, such as Mono.Fuse, NDesk.Options, Mono.Rocks,
etc., etc.  And as maintainer of at least two of those, I flat out
*refuse* to declare them ABI stable at this point in time.)

I'm not the Mono.Cecil maintainer, but I'm quite sure this isn't an
option.

2. Bundle the binary Mono.Cecil.dll, and build against that.  This is
what MD is currently doing, in accordance with:

<A HREF="http://www.mono-project.com/Guidelines:Application_Deployment#Libraries_with_Unstable_APIs">http://www.mono-project.com/Guidelines:Application_Deployment#Libraries_with_Unstable_APIs</A>

3. Bundle Mono.Cecil's source with MD.  I fail to see how this is an
effective change from (2), except it increases compile time and disk
space (source &gt;&gt; binary).

So, short of a &quot;don't use any unstable assemblies&quot; (to which I respond
&quot;you're on crack!&quot;), what do you propose as the alternative here?  How
*should* apps use unstable source/libraries?

What I really find fascinating is:

<A HREF="http://fedoraproject.org/wiki/Packaging/Mono">http://fedoraproject.org/wiki/Packaging/Mono</A>

Where it says that using unstable libraries is &quot;extremely poor
practice,&quot; but doesn't actually deign to provide us with an alternative
(aside from the implicit &quot;don't use unstable libraries&quot;).

Tough.

Until such time as humanity is able to design software *correctly* the
*first* time, there WILL be unstable libraries.  Attempting to ignore
their presence is a JOKE, and not a particularly good one.

 - Jon


</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029146.html">[Mono-dev] Mono support on Fedora, Ubuntu, Solaris, etc.
</A></li>
	<LI>Next message: <A HREF="029148.html">[Mono-dev] Mono support on Fedora, Ubuntu, Solaris, etc.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29147">[ date ]</a>
              <a href="thread.html#29147">[ thread ]</a>
              <a href="subject.html#29147">[ subject ]</a>
              <a href="author.html#29147">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
