<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] windows.forms crash under osX using darwinports
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20windows.forms%20crash%20under%20osX%20using%20darwinports&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016484.html">
   <LINK REL="Next"  HREF="016519.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] windows.forms crash under osX using darwinports</H1>
    <B>Daniel Oberhoff</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20windows.forms%20crash%20under%20osX%20using%20darwinports&In-Reply-To="
       TITLE="[Mono-dev] windows.forms crash under osX using darwinports">daniel at danieloberhoff.de
       </A><BR>
    <I>Tue Jan  3 18:24:07 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="016484.html">[Mono-dev] Re: Need testers for Mono's C# generics compiler.
</A></li>
        <LI>Next message: <A HREF="016519.html">[Mono-dev] windows.forms crash under osX using darwinports
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16449">[ date ]</a>
              <a href="thread.html#16449">[ thread ]</a>
              <a href="subject.html#16449">[ subject ]</a>
              <a href="author.html#16449">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

I just tried this simple example:

using System;
using System.Windows.Forms;

public class test {
         public static void Main() {
                 MessageBox.Show(&quot;Hello World&quot;);
         }
}

I got mono with all libs from darwinports. After fixing the dllmap  
in /opt/local/etc/mono/config I got it to run, but it crashes
somewhere in memory management :(. I append a fairly detailed  
Crashreport from the osX CrashReporter below.

Daniel

0   libSystem.B.dylib   	0x90009280 szone_calloc + 936
1   libSystem.B.dylib   	0x90008e74 calloc + 660
2   libglib-2.0.0.dylib 	0x00633d34 g_malloc0 + 72 (icplusplus.c:28)
3   mono                	0x00016e64 calculate_sizes + 60 (mini-ppc.c: 
423)
4   mono                	0x0001847c mono_arch_call_opcode + 76 (mini- 
ppc.c:851)
5   mono                	0x0008be5c mono_emit_method_call_full + 140  
(mini.c:2182)
6   mono                	0x00093b50 mono_method_to_ir + 25932 (mini.c: 
2112)
7   mono                	0x000a2208 mini_method_compile + 660 (mini.c: 
9201)
8   mono                	0x000a3768 mono_jit_compile_method_with_opt  
+ 848 (mini.c:9565)
9   mono                	0x000b7004 ppc_magic_trampoline + 40 (tramp- 
ppc.c:94)
10  &lt;&lt;00000000&gt;&gt; 	0x01801314 0 + 25170708
11  &lt;&lt;00000000&gt;&gt; 	0x03148b04 0 + 51677956
12  &lt;&lt;00000000&gt;&gt; 	0x03147318 0 + 51671832
13  &lt;&lt;00000000&gt;&gt; 	0x03146908 0 + 51669256
14  &lt;&lt;00000000&gt;&gt; 	0x007d48b8 0 + 8210616
15  mono                	0x0004ebe0 mono_runtime_class_init + 464  
(object.c:261)
16  mono                	0x000a3950 mono_jit_compile_method_with_opt  
+ 1336 (mini.c:9616)
17  mono                	0x000b7004 ppc_magic_trampoline + 40 (tramp- 
ppc.c:94)
18  &lt;&lt;00000000&gt;&gt; 	0x01801314 0 + 25170708
19  &lt;&lt;00000000&gt;&gt; 	0x028e7158 0 + 42889560
20  &lt;&lt;00000000&gt;&gt; 	0x007d48b8 0 + 8210616
21  mono                	0x0004ebe0 mono_runtime_class_init + 464  
(object.c:261)
22  mono                	0x000a3950 mono_jit_compile_method_with_opt  
+ 1336 (mini.c:9616)
23  mono                	0x000b7004 ppc_magic_trampoline + 40 (tramp- 
ppc.c:94)
24  &lt;&lt;00000000&gt;&gt; 	0x01801314 0 + 25170708
25  &lt;&lt;00000000&gt;&gt; 	0x028c1650 0 + 42735184
26  &lt;&lt;00000000&gt;&gt; 	0x028c146c 0 + 42734700
27  &lt;&lt;00000000&gt;&gt; 	0x028186e8 0 + 42043112
28  &lt;&lt;00000000&gt;&gt; 	0x007d48b8 0 + 8210616
29  mono                	0x0004ebe0 mono_runtime_class_init + 464  
(object.c:261)
30  mono                	0x000a3950 mono_jit_compile_method_with_opt  
+ 1336 (mini.c:9616)
31  mono                	0x000b7004 ppc_magic_trampoline + 40 (tramp- 
ppc.c:94)
32  &lt;&lt;00000000&gt;&gt; 	0x01801314 0 + 25170708
33  &lt;&lt;00000000&gt;&gt; 	0x02817bac 0 + 42040236
34  &lt;&lt;00000000&gt;&gt; 	0x02817678 0 + 42038904
35  &lt;&lt;00000000&gt;&gt; 	0x02816f8c 0 + 42037132
36  &lt;&lt;00000000&gt;&gt; 	0x02816874 0 + 42035316
37  &lt;&lt;00000000&gt;&gt; 	0x028166c0 0 + 42034880
38  &lt;&lt;00000000&gt;&gt; 	0x028162b8 0 + 42033848
39  &lt;&lt;00000000&gt;&gt; 	0x028159b0 0 + 42031536
40  &lt;&lt;00000000&gt;&gt; 	0x007d47dc 0 + 8210396
41  &lt;&lt;00000000&gt;&gt; 	0x007d46c0 0 + 8210112
42  &lt;&lt;00000000&gt;&gt; 	0x007d1ce0 0 + 8199392
43  &lt;&lt;00000000&gt;&gt; 	0x007d1c08 0 + 8199176
44  mono                	0x0004f864 mono_runtime_exec_main + 300  
(object.c:2040)
45  mono                	0x00052598 mono_runtime_run_main + 544  
(object.c:1897)
46  mono                	0x000046c8 mono_main + 4656 (driver.c:941)
47  mono                	0x000027fc _start + 344 (crt.c:272)
48  mono                	0x000026a0 start + 60

Thread 1:
0   libSystem.B.dylib   	0x90040258 mach_wait_until + 8
1   libSystem.B.dylib   	0x90040020 nanosleep + 384
2   mono                	0x000dc8a4 collection_thread + 48  
(collection.c:43)
3   libSystem.B.dylib   	0x9002b200 _pthread_body + 96

Thread 2:
0   libSystem.B.dylib   	0x90053f68 semaphore_timedwait_signal_trap + 8
1   libSystem.B.dylib   	0x90053dc8 pthread_cond_timedwait + 672
2   mono                	0x00072b34 timedwait_signal_poll_cond + 120  
(handles.c:1185)
3   mono                	0x000745d4  
_wapi_handle_timedwait_signal_handle + 296 (handles.c:1249)
4   mono                	0x000804cc WaitForSingleObjectEx + 428  
(wait.c:179)
5   mono                	0x0002bc0c finalizer_thread + 100 (gc.c:752)
6   mono                	0x0006f804 start_wrapper + 192 (threads.c:305)
7   mono                	0x0007fc64 timed_thread_start_routine + 208  
(timed-thread.c:134)
8   libSystem.B.dylib   	0x9002b200 _pthread_body + 96

Thread 0 crashed with PPC Thread State 64:
   srr0: 0x0000000090009280 srr1:  
0x000000000200f930                        vrsave: 0x0000000000000000
     cr: 0x84024444          xer: 0x0000000020000004   lr:  
0x0000000090008f94  ctr: 0x0000000090008ed8
     r0: 0x000000000000002c   r1: 0x00000000bfffde70   r2:  
0x000000000331b3e0   r3: 0x0000000001800038
     r4: 0x0000000000000000   r5: 0x000000000000002c   r6:  
0x00000000ffffffff   r7: 0x0000000000000001
     r8: 0x000000000000fffd   r9: 0x000000000000002c  r10:  
0x0000000000000368  r11: 0x0000000003302004
    r12: 0x0000000090008ed8  r13: 0x000000000321b358  r14:  
0x000000000321ada0  r15: 0x000000000321af90
    r16: 0x0000000000000026  r17: 0x0000000000000000  r18:  
0x000000000321b34b  r19: 0x00000000018cb340
    r20: 0x00000000018cb340  r21: 0x0000000000000000  r22:  
0x000000000321b346  r23: 0x0000000000000001
    r24: 0x0000000000000003  r25: 0x0000000000000030  r26:  
0x000000000000001f  r27: 0x0000000001800000
    r28: 0x000000000321b3e0  r29: 0x000000000321b410  r30:  
0x000000000321ec00  r31: 0x0000000090008ee4

Binary Images Description:
     0x1000 -   0x13afff mono 	/opt/local/bin/mono
   0x40e000 -   0x425fff libgc.1.dylib 	/opt/local/lib/libgc.1.dylib
   0x46a000 -   0x46cfff libgthread-2.0.0.dylib 	/opt/local/lib/ 
libgthread-2.0.0.dylib
   0x470000 -   0x471fff libgmodule-2.0.0.dylib 	/opt/local/lib/ 
libgmodule-2.0.0.dylib
   0x474000 -   0x47bfff libintl.3.dylib 	/opt/local/lib/libintl.3.dylib
   0x605000 -   0x6a3fff libglib-2.0.0.dylib 	/opt/local/lib/ 
libglib-2.0.0.dylib
   0x6bc000 -   0x792fff libiconv.2.dylib 	/opt/local/lib/libiconv. 
2.dylib
0x230c000 -  0x23c4fff libgdiplus.dylib 	/opt/local/lib/libgdiplus.dylib
0x23e9000 -  0x23effff libXrender.1.dylib 	/opt/local/lib/libXrender. 
1.dylib
0x243b000 -  0x245bfff libfontconfig.1.dylib 	/opt/local/lib/ 
libfontconfig.1.dylib
0x24ba000 -  0x24cbfff libz.1.dylib 	/opt/local/lib/libz.1.dylib
0x24cf000 -  0x24ebfff libexpat.0.dylib 	/opt/local/lib/libexpat.0.dylib
0x251c000 -  0x256ffff libfreetype.6.dylib 	/opt/local/lib/ 
libfreetype.6.dylib
0x26bf000 -  0x2707fff libtiff.3.dylib 	/opt/local/lib/libtiff.3.dylib
0x2796000 -  0x27b2fff libjpeg.62.dylib 	/opt/local/lib/libjpeg.62.dylib
0x27b9000 -  0x27befff libungif.4.dylib 	/opt/local/lib/libungif.4.dylib
0x27ce000 -  0x2803fff libpng12.0.dylib 	/opt/local/lib/libpng12.0.dylib
0x2908000 -  0x2ccefff libgtk-x11-2.0.dylib 	/opt/local/lib/libgtk- 
x11-2.0.dylib
0x2d89000 -  0x2da4fff libgdk_pixbuf-2.0.0.dylib 	/opt/local/lib/ 
libgdk_pixbuf-2.0.0.dylib
0x2dac000 -  0x2e4afff libgdk-x11-2.0.0.dylib 	/opt/local/lib/libgdk- 
x11-2.0.0.dylib
0x2e6e000 -  0x2e8cfff libpangoft2-1.0.0.dylib 	/opt/local/lib/ 
libpangoft2-1.0.0.dylib
0x2f08000 -  0x2f0cfff libpangocairo-1.0.0.dylib 	/opt/local/lib/ 
libpangocairo-1.0.0.dylib
0x2f1f000 -  0x2f37fff libatk-1.0.0.dylib 	/opt/local/lib/ 
libatk-1.0.0.dylib
0x2f44000 -  0x2f7bfff libcairo.2.dylib 	/opt/local/lib/libcairo.2.dylib
0x3045000 -  0x3074fff libpango-1.0.0.dylib 	/opt/local/lib/ 
libpango-1.0.0.dylib
0x30d8000 -  0x3114fff libgobject-2.0.0.dylib 	/opt/local/lib/ 
libgobject-2.0.0.dylib
0x8fe00000 - 0x8fe54fff dyld 44.2	/usr/lib/dyld
0x90000000 - 0x901b3fff libSystem.B.dylib 	/usr/lib/libSystem.B.dylib
0x9020b000 - 0x9020ffff libmathCommon.A.dylib 	/usr/lib/system/ 
libmathCommon.A.dylib
0x9073a000 - 0x90813fff com.apple.CoreFoundation 6.4.4 (368.25)	/ 
System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
CoreFoundation
0x9085e000 - 0x90960fff libicucore.A.dylib 	/usr/lib/libicucore.A.dylib
0x909ba000 - 0x90a3efff libobjc.A.dylib 	/usr/lib/libobjc.A.dylib
0x90aed000 - 0x90afffff libauto.dylib 	/usr/lib/libauto.dylib
0x913ac000 - 0x913b4fff libgcc_s.1.dylib 	/usr/lib/libgcc_s.1.dylib
0x913b9000 - 0x913d9fff libmx.A.dylib 	/usr/lib/libmx.A.dylib
0x9b135000 - 0x9b144fff libICE.6.dylib 	/usr/X11R6/lib/libICE.6.dylib
0x9b14b000 - 0x9b150fff libSM.6.dylib 	/usr/X11R6/lib/libSM.6.dylib
0x9d856000 - 0x9d91efff libX11.6.dylib 	/usr/X11R6/lib/libX11.6.dylib
0x9d95e000 - 0x9d969fff libXext.6.dylib 	/usr/X11R6/lib/libXext.6.dylib
0x9d99b000 - 0x9d99cfff libXinerama.1.dylib 	/usr/X11R6/lib/ 
libXinerama.1.dylib
0x9d9d4000 - 0x9d9d5fff libXrandr.2.dylib 	/usr/X11R6/lib/libXrandr. 
2.dylib
0x9d9d8000 - 0x9d9ddfff libXrender.1.dylib 	/usr/X11R6/lib/libXrender. 
1.dylib

Model: PowerBook3,5, BootROM 4.5.3f2, 1 processors, PowerPC G4   
(3.2), 867 MHz, 768 MB
Graphics: ATY,RV250M9, ATY,RV250M9, AGP, 32 MB
Memory Module: SODIMM0/J16TOP, 256 MB, SDRAM, PC133U-333
Memory Module: SODIMM1/J16BOTTOM, 512 MB, SDRAM, PC133U-333
AirPort: AirPort, 9.52
Modem: MicroDash, UCJ, V.92, 1.0F, APPLE VERSION 2.6.6
Network Service: AirPort, AirPort, en1
PCI Card: TXN,PCI1410-02, cardbus, PC Card
Parallel ATA Device: HTS541040G9AT00, 37.26 GB
Parallel ATA Device: MATSHITACD-RW  CW-8121, 571.76 MB
USB Device: Kensington PocketMouse Pro, Kensington, Up to 1.5 Mb/sec,  
500 mA

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFDuweYGFh1JarMK+8RAocIAJ9qKGcQXp3sdK8s5msdNiA3/q/U1gCfVUpg
N2ahNyANzaYMr7tsTWWuH20=
=THgI
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016484.html">[Mono-dev] Re: Need testers for Mono's C# generics compiler.
</A></li>
	<LI>Next message: <A HREF="016519.html">[Mono-dev] windows.forms crash under osX using darwinports
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16449">[ date ]</a>
              <a href="thread.html#16449">[ thread ]</a>
              <a href="subject.html#16449">[ subject ]</a>
              <a href="author.html#16449">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
