<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] problems executing mono embed on osx
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20problems%20executing%20mono%20embed%20on%20osx&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016721.html">
   <LINK REL="Next"  HREF="016720.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] problems executing mono embed on osx</H1>
    <B>Davide Morelli</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20problems%20executing%20mono%20embed%20on%20osx&In-Reply-To="
       TITLE="[Mono-dev] problems executing mono embed on osx">davide.morelli at parser.it
       </A><BR>
    <I>Fri Jan 20 12:35:42 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="016721.html">[Mono-dev] parser
</A></li>
        <LI>Next message: <A HREF="016720.html">[Mono-dev] parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16714">[ date ]</a>
              <a href="thread.html#16714">[ thread ]</a>
              <a href="subject.html#16714">[ subject ]</a>
              <a href="author.html#16714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi List,

I'm developing an extension to pd (<A HREF="http://puredata.info/">http://puredata.info/</A>) which lets 
developers write pd pluings in C#... it is a C software embedding mono.

I have a strange issue on OSX that I really can't understand...
If I compile my software using last mono package taken from 
<A HREF="http://www.mono-project.com/Downloads">http://www.mono-project.com/Downloads</A> (but I was told that previous packages 
have the same issue) my code will compile without problems but mono will 
fail to load when I call mono_jit_init()
If I do the same with a mono installed from fink everything works fine..

here is the source code of my application:
<A HREF="http://cvs.sourceforge.net/viewcvs.py/pure-data/externals/clr/clr.c?rev=1.9&amp;view=auto">http://cvs.sourceforge.net/viewcvs.py/pure-data/externals/clr/clr.c?rev=1.9&amp;view=auto</A>
mono is loaded and initialized in the mono_load() function

I'd really want this software compilable with a packaged version of mono (as 
installing it with fink is not handy..)

Anybody know why I have this problem?

thanks,
Davide.

follows a snap of the error report

Date/Time:      2006-01-19 15:57:09.724 +0000
OS Version:     10.4.3 (Build 8F46)
Report Version: 3

Command: pd
Path:    /Applications/Pd-0.38.4-extended-RC4.app/Contents/Resources/
Scripts/../bin/pd
Parent:  Pd [3141]

Version: ??? (???)

PID:    3142
Thread: 0

Exception:  EXC_BAD_ACCESS (0x0001)
Codes:      KERN_PROTECTION_FAILURE (0x0002) at 0x00000004

Thread 0 Crashed:
0   com.apple.HIServices          0x917f4308 GetCurrentProcess + 88
1   libmono.0.dylib               0x013ed6e0 mono_thread_init + 152
(threads.c:1807)
2   libmono.0.dylib               0x0137c2d8 mono_runtime_init + 176
(appdomain.c:101)
3   libmono.0.dylib               0x013127b4 mini_init + 2476
(mini.c:10443)
4   libmono.0.dylib               0x0133344c mono_jit_init + 32
(driver.c:1070)
5   clr.pd_darwin                 0x0071d4e0 clr_setup + 152
(bundle1.s:283)
6   pd                            0x0003d9d4 sys_load_lib_alt + 840
(s_loader.c:193)
7   pd                            0x00032874 new_anything + 120
(m_class.c:565)
8   pd                            0x00032f74 pd_typedmess + 1172
(m_class.c:790)
9   pd                            0x00035f28 binbuf_eval + 996
(m_binbuf.c:582)
10  pd                            0x00008af0 canvas_objtext + 108
(g_text.c:95)
11  pd                            0x00008cbc canvas_obj + 124
(g_text.c:145)
12  pd                            0x00032f74 pd_typedmess + 1172
(m_class.c:790)
13  pd                            0x00035f28 binbuf_eval + 996
(m_binbuf.c:582)
14  pd                            0x00038008 binbuf_evalfile + 204
(m_binbuf.c:1202)
15  pd                            0x00038070 glob_evalfile + 52
(m_binbuf.c:1217)
16  pd                            0x00032e90 pd_typedmess + 944
(m_class.c:773)
17  pd                            0x00035f28 binbuf_eval + 996
(m_binbuf.c:582)
18  pd                            0x0003b690 socketreceiver_read +
460 (s_inter.c:510)
19  pd                            0x0003ae14 sys_domicrosleep + 320
(s_inter.c:167)
20  pd                            0x00039454 m_scheduler + 740
(m_sched.c:485)
21  pd                            0x0000207c _start + 392 (crt.c:267)
22  dyld                          0x8fe01048 _dyld_start + 60

[...] 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016721.html">[Mono-dev] parser
</A></li>
	<LI>Next message: <A HREF="016720.html">[Mono-dev] parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16714">[ date ]</a>
              <a href="thread.html#16714">[ thread ]</a>
              <a href="subject.html#16714">[ subject ]</a>
              <a href="author.html#16714">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
