<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] MS.NET compatible Path.GetTempFileName
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20MS.NET%20compatible%20Path.GetTempFileName&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016499.html">
   <LINK REL="Next"  HREF="016501.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] MS.NET compatible Path.GetTempFileName</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20MS.NET%20compatible%20Path.GetTempFileName&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] MS.NET compatible Path.GetTempFileName">kornelpal at hotmail.com
       </A><BR>
    <I>Fri Jan  6 18:22:28 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="016499.html">[Mono-dev] [PATCH] MS.NET compatible Path.GetTempFileName
</A></li>
        <LI>Next message: <A HREF="016501.html">[Mono-dev] [PATCH] MS.NET compatible Path.GetTempFileName
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16500">[ date ]</a>
              <a href="thread.html#16500">[ thread ]</a>
              <a href="subject.html#16500">[ subject ]</a>
              <a href="author.html#16500">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;<i> How about just appending &quot;.tmp&quot; to the temp file name while
</I>&gt;<i> still using ints for the pattern?
</I>
I don't insist on 16-bit numbers if you (other people) belive that 16-bits
are few and we need 32-bits I will accept it.

But if we want to provide the same behavior as MS.NET we have to use 16-bit
numbers. When I created the test case (attached to my previous message) and
runned it I realized that is't quite unlikely to have 65536 temp files at
the same time and in fact the global (system scoped) counter that is used by
GetTempFileName (Win32) is very unlikely to overflow (go back to 0 in this
case) altough the same counter is used regardless of file name prefix. If
someone wants to disable GetTempFileName by creating all possible file names
he can do with any arbitary count of bits as well.

I don't know whether anyone relies on the fact that counter is 16-bit only
but I think 16-bit is enough to count temporary files and in addition we can
provide an MS.NET compatible file naming pattern.

Note that Ben pointed out (in a private e-mail) that MS.NET 2.0 has a more
specific documentation that MS.NET 1.1:
<A HREF="http://msdn2.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx">http://msdn2.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx</A>

Korn&#233;l

----- Original Message -----
From: &quot;Robert Jordan&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">robertj at gmx.net</A>&gt;
To: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Sent: Saturday, January 07, 2006 12:01 AM
Subject: Re: [Mono-dev] [PATCH] MS.NET compatible Path.GetTempFileName


&gt;<i> Korn&#233;l,
</I>&gt;<i>
</I>&gt;&gt;<i> The only thing I cannot understand it the fact that if I submit a patch
</I>&gt;&gt;<i> that
</I>&gt;&gt;<i> corrects an MS.NET bug in Mono it is rejected or isn't welcomed altought
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> same is true for a patch that implements an MS.NET bug.
</I>&gt;<i>
</I>&gt;<i> Well, in your first mail you did't explain why on earth mono
</I>&gt;<i> have to mimic the same weird ushort tmpUUUU.tmp pattern :-)
</I>&gt;<i>
</I>&gt;<i> In your second mail you told us that just the extension is important.
</I>&gt;<i>
</I>&gt;<i> How about just appending &quot;.tmp&quot; to the temp file name while
</I>&gt;<i> still using ints for the pattern?
</I>&gt;<i>
</I>&gt;<i> Robert
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016499.html">[Mono-dev] [PATCH] MS.NET compatible Path.GetTempFileName
</A></li>
	<LI>Next message: <A HREF="016501.html">[Mono-dev] [PATCH] MS.NET compatible Path.GetTempFileName
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16500">[ date ]</a>
              <a href="thread.html#16500">[ thread ]</a>
              <a href="subject.html#16500">[ subject ]</a>
              <a href="author.html#16500">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
