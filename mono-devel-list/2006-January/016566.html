<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Creating AppDomains From Embedded Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Creating%20AppDomains%20From%20Embedded%20Mono&In-Reply-To=dq21ln%24n8p%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016558.html">
   <LINK REL="Next"  HREF="016570.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Creating AppDomains From Embedded Mono</H1>
    <B>Jim Purbrick</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Creating%20AppDomains%20From%20Embedded%20Mono&In-Reply-To=dq21ln%24n8p%241%40sea.gmane.org"
       TITLE="[Mono-dev] Creating AppDomains From Embedded Mono">jimpurbrick at yahoo.co.uk
       </A><BR>
    <I>Wed Jan 11 08:12:25 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="016558.html">[Mono-dev] Creating AppDomains From Embedded Mono
</A></li>
        <LI>Next message: <A HREF="016570.html">[Mono-dev] Creating AppDomains From Embedded Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16566">[ date ]</a>
              <a href="thread.html#16566">[ thread ]</a>
              <a href="subject.html#16566">[ subject ]</a>
              <a href="author.html#16566">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Robert/Everyone,

&gt;<i> You can and *should* invoke the managed
</I>&gt;<i> AppDomain methods to load and unload domains. 
</I>&gt;<i> You don't need an intermediate managed assembly 
</I>&gt;<i> to do that (untested):
</I>&gt;<i> 
</I>&gt;<i> MonoAppDomain*
</I>&gt;<i> createDomain (char *name) ....
</I>&gt;<i>
</I>&gt;<i> void
</I>&gt;<i> unloadDomain (MonoAppDomain *domain) ...
</I>
That gets me a MonoAppDomain*, which I can presumably
use to call AppDomain.Load(Byte[]) to load a script's
assembly, which will be unloaded (along with JIT
output etc.) when I call unloadDomain?

How do I turn the MonoAppDomain in to a MonoDomain
required by mono_object_new, mono_string_new etc.?
That is what my intermediate managed assemblies were
doing: executing an assembly in the new domain which
would call mono_domain_get() to get me a MonoDomain*
for the new MonoAppDomain.

Do I even need a MonoDomain* for the new
MonoAppDomain? At the moment I try to allocate any
objects used by a script in the AppDomain that I
loaded the script's assembly in to, but I suppose I
could allocate the other objects in the root domain.
Would there be any problems doing this? My concern
would be that the root domain would end up loading the
script's assembly which I then couldn't unload.

Cheers,

Jim.


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail <A HREF="http://uk.messenger.yahoo.com">http://uk.messenger.yahoo.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016558.html">[Mono-dev] Creating AppDomains From Embedded Mono
</A></li>
	<LI>Next message: <A HREF="016570.html">[Mono-dev] Creating AppDomains From Embedded Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16566">[ date ]</a>
              <a href="thread.html#16566">[ thread ]</a>
              <a href="subject.html#16566">[ subject ]</a>
              <a href="author.html#16566">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
