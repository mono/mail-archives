<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Re: [Mono-dev] Lazy man&#180;s Command Line Parser - Revisited
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%3D%3FUTF-8%3FQ%3FRe%3A_%5BMono-dev%5D_Lazy_man%3DC2%3DB4s_Command_Line_Parser_-_Revisited%3F%3D&In-Reply-To=43C6438A.0BEE.002D.0%40novell.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016595.html">
   <LINK REL="Next"  HREF="016598.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Re: [Mono-dev] Lazy man&#180;s Command Line Parser - Revisited</H1>
    <B>Rafael Teixeira</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%3D%3FUTF-8%3FQ%3FRe%3A_%5BMono-dev%5D_Lazy_man%3DC2%3DB4s_Command_Line_Parser_-_Revisited%3F%3D&In-Reply-To=43C6438A.0BEE.002D.0%40novell.com"
       TITLE="Re: [Mono-dev] Lazy man&#180;s Command Line Parser - Revisited">monoman at gmail.com
       </A><BR>
    <I>Thu Jan 12 09:37:14 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="016595.html">[Mono-dev] Lazy man&#180;s Command Line Parser - Revisited
</A></li>
        <LI>Next message: <A HREF="016598.html">[Mono-dev] SqlDataAdapter Update Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16601">[ date ]</a>
              <a href="thread.html#16601">[ thread ]</a>
              <a href="subject.html#16601">[ subject ]</a>
              <a href="author.html#16601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just a thing I have the impression you didn't understand about
Mono.GetOptions, everything is driven by Attributes, you only have to
inherit from the base class for some convenience things like the
automatic --help page. So in that regard your solution is nearly the
same thing.

Just and example:

-----------------
public class CatLikeOptions : Options
{
        [Option(&quot;display TAB characters as ^I&quot;, 'T', &quot;show-tabs&quot;)]
        public bool ShowTabs;

        [Option(&quot;display $ at end of each line&quot;, 'E', &quot;show-ends&quot;)]
        public bool ShowLineEnds;

        [Option(&quot;use ^ and M- notation, except for LFD and TAB&quot;, 'v',
&quot;show-nonp rinting&quot;)]
        public bool ShowNonPrinting;

        [Option(&quot;equivalent to -vE&quot;, 'e', null)]
        public bool ShowLineEndsAndNonPrinting { set { ShowLineEnds =
ShowNonPri nting = value; } }

        [Option(&quot;equivalent to -vT&quot;, 't', null)]
        public bool ShowLineEndsAndTabs { set { ShowTabs =
ShowNonPrinting = val ue; } }

        [Option(&quot;equivalent to -vET&quot;, 'A', &quot;show-all&quot;)]
        public bool showAll { set { ShowTabs = ShowLineEnds =
ShowNonPrinting = value; } }

        [Option(&quot;number nonblank output lines&quot;, 'b', &quot;number-nonblank&quot;)]
        public bool NumberNonBlank;

        [Option(&quot;number all output lines&quot;, 'n', &quot;number&quot;)]
        public bool NumberAllLines;

        [Option(&quot;never more than one single blank line&quot;, 's', &quot;squeeze-blank&quot;)]
        public bool SqueezeBlankLines;

        [Option(&quot;(ignored)&quot;, 'u', null)]
        public bool Ignored;

        [Option(&quot;output version information and exit&quot;, &quot;version&quot;)]
        public override WhatToDoNext DoAbout()
        {
                return base.DoAbout();
        }

        [Option(&quot;display this help and exit&quot;, &quot;help&quot;)]
        public override WhatToDoNext DoHelp()
        {
                return base.DoHelp();
        }

        [KillOption]
        public override WhatToDoNext DoHelp2() { return WhatToDoNext.GoAhead; }

        [KillOption]
        public override WhatToDoNext DoUsage() { return WhatToDoNext.GoAhead; }

        public CatLikeOptions(string[] args) : base(args) {}

        protected override void InitializeOtherDefaults()
        {
                ParsingMode = OptionsParsingMode.Both |
OptionsParsingMode.GNU_D oubleDash;
                BreakSingleDashManyLettersIntoManyOptions = true;
        }

}

public class Driver {

        public static int Main (string[] args)
        {
                CatLikeOptions options = new CatLikeOptions(args);
        }
}
-----------------

If you run this program this way, you'll get:

-----------------
:<i> mono mcat.exe --help
</I>mcat  1.0.0.0 - (c)2005 Rafael Teixeira
Simulated cat-like program

Usage: mcat [options] [FILE]...
Concatenate FILE(s), or standard input, to standard output.
Options:
  -A --show-all          equivalent to -vET
  -b --number-nonblank   number nonblank output lines
  -e                     equivalent to -vE
  -E --show-ends         display $ at end of each line
  -n --number            number all output lines
  -s --squeeze-blank     never more than one single blank line
  -t                     equivalent to -vT
  -T --show-tabs         display TAB characters as ^I
  -u                     (ignored)
  -v --show-nonprinting  use ^ and M- notation, except for LFD and TAB
     --help              display this help and exit
     --version           output version information and exit

With no FILE, or when FILE is -, read standard input.

Please report bugs to &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">rafaelteixeirabr at hotmail.com</A>&gt;

-----------------

So one have to really write less  than 10 lines of 'imperative' code
to accomplish all that.

Nayway, thanks for your efforts and code, I think many programmers
will find it useful.

Regards,

On 1/12/06, Oscar Forero &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">oforero at novell.com</A>&gt; wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I discussed on IRC some points over my parser in the mono channel; more or less seems that the people do not want to
</I>&gt;<i> know anything about it; and that many are happy with Mono.GetOptions.
</I>&gt;<i>
</I>&gt;<i> I still think mine is a superior solution, simple because it does a lot more that Mono.GetOptions; some of the negative
</I>&gt;<i> comments and my answers to them:
</I>&gt;<i>
</I>&gt;<i> 1. Is not intuitive: Well following a naming convention and/or using Attributes is pretty easy, and should be at least
</I>&gt;<i> as easy as extending a class.
</I>&gt;<i>
</I>&gt;<i> 2. It takes a lot of reading to know which parameters are supported: Well not really, if you want to know how to use a
</I>&gt;<i> program, let it run with out command line and the help will tell you how it work, if you want to know which parameters
</I>&gt;<i> are supported by a given operation go to the method. It is that easy, now i agree you can have a quicker overview over
</I>&gt;<i> all the parameters in the application with Mono.GetOptions, but if you need to know which parameters are use in a given
</I>&gt;<i> operation you have to read yourself through a lot of If s see what method is being call, go there and read some more.
</I>&gt;<i>
</I>&gt;<i> 3. It is not maintainable, if you need to add a parameter (the same) to many operations you need to go to every method
</I>&gt;<i> and add it by hand: Well that is actually a problem, but i already have a solution for that, and is call
</I>&gt;<i> ExpandableParameters, you can use any class with public fields an default public constructor as a method parameter, if
</I>&gt;<i> you mark the method parameter as [Expandable] it will use that class to add more parameters to the operation, and you
</I>&gt;<i> will get an instance of the object with the fields properly filled. Now i know that public fields are not really the
</I>&gt;<i> best way to do it, but it was the fastest way to probe the concept. I will like to know if there is any interest in
</I>&gt;<i> having support for properties instead of fields.
</I>&gt;<i>
</I>&gt;<i> I think this last addition solved the biggest name problem with it, in that way you can have a centralized object where
</I>&gt;<i> the parameters are, with the advantage that you can have different classes grouping parameters, not only one. And is
</I>&gt;<i> still possible to get the command dispatching saving you having to write all that if chains, and using control
</I>&gt;<i> booleans.
</I>&gt;<i>
</I>&gt;<i> Take a look on the OnExample method of the example code.
</I>&gt;<i>
</I>&gt;<i> regards,
</I>&gt;<i>
</I>&gt;<i> Oscar.
</I>&gt;<i>
</I>&gt;<i> PS: Next add is support for serialized objects as parameters.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

--
Rafael &quot;Monoman&quot; Teixeira
---------------------------------------
As I'm currently working a lot with Java and even fixing Java VMs
(JamVM/Kaffe) and GNU Classpath code, I think I may partly borrow the
title (Javaman) from my friend Bruno Souza and become the
MonoNJavaMan. Yeah, I may currently be crazier than usual...
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016595.html">[Mono-dev] Lazy man&#180;s Command Line Parser - Revisited
</A></li>
	<LI>Next message: <A HREF="016598.html">[Mono-dev] SqlDataAdapter Update Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16601">[ date ]</a>
              <a href="thread.html#16601">[ thread ]</a>
              <a href="subject.html#16601">[ subject ]</a>
              <a href="author.html#16601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
