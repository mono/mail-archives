<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono's handling of Structs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono%27s%20handling%20of%20Structs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015967.html">
   <LINK REL="Next"  HREF="015971.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono's handling of Structs</H1>
    <B>Bill Six</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono%27s%20handling%20of%20Structs&In-Reply-To="
       TITLE="[Mono-dev] Mono's handling of Structs">billsix316 at yahoo.com
       </A><BR>
    <I>Tue Nov 22 23:40:48 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015967.html">[Mono-dev] Mono on IRIX
</A></li>
        <LI>Next message: <A HREF="015971.html">[Mono-dev] Mono's handling of Structs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15969">[ date ]</a>
              <a href="thread.html#15969">[ thread ]</a>
              <a href="subject.html#15969">[ subject ]</a>
              <a href="author.html#15969">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm new to C#, but it was my understanding that a
struct does not need a call to the constructor before
its use, in the same way that all other primitives
(ints, floats, etc) don't.

MCS and GMCS seem to require that a constructor is
called before the struct can be used.  For instance,
the code at the bottom of this email won't compile, as
the error says &quot;Use of unassigned local variable p2&quot;

If instead of
                Position p2;
you use 
                Position p2 = new Postion();
it will compile fine.


Is this a bug in the mono compiler?  Should it
automatically know that a declaration of a struct
implies calling the default constructor?  If so I will
spend time looking through the Mono compiler to fix
it, as I've wanted to look through the code anyways.


Test.cs..........................................



using System;
 
public struct Position
{
        public Position(int x, int y)
        {
                this.myx = x;
                this.myy = y;
        } 

        public override string ToString()
        {
                return String.Format(&quot;{0} {1}&quot;, myx,
myy);
        }
 

        public int x {
                get{
                         return myx;
                }
                set{
                        this.myx = value;
                }
        }

        public int y {
                get{
                         return myy;
                }
                set{
                        this.myy = value;
                }
        }

        private int myx ;
        private int myy;
}

public class Test
{
        public static void Main(string[] args)
        {
                Position p = new Position(1,2);
                Console.WriteLine(p);


                // Mono compiler gives an error here
                Position p2;
                p2.x = 5;
                p2.y = 7;
                Console.WriteLine(p2);

        }

}

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
<A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015967.html">[Mono-dev] Mono on IRIX
</A></li>
	<LI>Next message: <A HREF="015971.html">[Mono-dev] Mono's handling of Structs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15969">[ date ]</a>
              <a href="thread.html#15969">[ thread ]</a>
              <a href="subject.html#15969">[ subject ]</a>
              <a href="author.html#15969">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
