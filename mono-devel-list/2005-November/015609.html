<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] To split or not to split Mono?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20To%20split%20or%20not%20to%20split%20Mono%3F&In-Reply-To=1131070247.15666.54.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015608.html">
   <LINK REL="Next"  HREF="015638.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] To split or not to split Mono?</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20To%20split%20or%20not%20to%20split%20Mono%3F&In-Reply-To=1131070247.15666.54.camel%40localhost.localdomain"
       TITLE="[Mono-dev] To split or not to split Mono?">bmaurer at ximian.com
       </A><BR>
    <I>Thu Nov  3 21:56:10 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015608.html">[Mono-dev] To split or not to split Mono?
</A></li>
        <LI>Next message: <A HREF="015638.html">[Mono-dev] To split or not to split Mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15609">[ date ]</a>
              <a href="thread.html#15609">[ thread ]</a>
              <a href="subject.html#15609">[ subject ]</a>
              <a href="author.html#15609">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2005-11-03 at 21:10 -0500, Jonathan Pryor wrote:
&gt;<i> As for the build system, it would be nice if we could have a mono-build
</I>&gt;<i> module that was inserted into every checkout into a `build' directory
</I>&gt;<i> &quot;as if&quot; through CVS' ampersand modules.  This would allow a manner of
</I>&gt;<i> consistency across all modules without needing to manually update each
</I>&gt;<i> copy individually, resulting in incompatibilities.  svn has a similar
</I>&gt;<i> mechanism via the svn:externals property; see:
</I>&gt;<i> 
</I>&gt;<i>         <A HREF="http://svnbook.red-bean.com/en/1.1/svn-book.html#svn-ch-7-sect-3">http://svnbook.red-bean.com/en/1.1/svn-book.html#svn-ch-7-sect-3</A>
</I>&gt;<i> 
</I>&gt;<i> I'm not sure how well svn:externals works in practice though.  In
</I>&gt;<i> particular the &quot;feature&quot; that svn:externals refers to a URL is rather
</I>&gt;<i> annoying, as it means we'd have to use a URL that anonymous users can
</I>&gt;<i> access, implying that we could only update the build system by updating
</I>&gt;<i> the mono-build module (and not via any of the existing checkouts).  It
</I>&gt;<i> also undermines the ability to have multiple anonymous svn repositories.
</I>&gt;<i> It's something to consider anyway.
</I>
The primary problem with this is the fact that its a url, you lose a bit
of stuff by doing it (like the ability to easily make atomic commits
without referencing the &quot;real&quot; build directory).

I'd suggest we do:

/
	build
	mono-core
	mono-data

Most people will check out /, which will give them a fully buildable
directory (in fact, there could be a master makefile in here or
something). If somebody really wants to save on disk space, they can
check out build and mono-core in a directory (much like one checks out
mono and mcs).

A few comments about the directory layout you choose:


&gt;<i>   - mono-winforms (GUI support)
</I>&gt;<i>     - assembly
</I>&gt;<i>       - System.Drawing
</I>&gt;<i>       - System.Windows.Forms (from mcs/class/Managed.Windows.Forms)
</I>&gt;<i>     - libgdiplus (instead of a separate module, since these are tied)
</I>
Other modules depend on s.drawing, it would either need to be moved into
mono-core or its own module. Also, SWF only needs to be build once while
libgdiplus needs to be build once per arch: since swf is more rapily
changing its a plus to have it in a xplatform module.


&gt;<i>   - mono-mscompat (non-core Microsoft-compatibility assemblies)
</I>&gt;<i>     - assembly
</I>&gt;<i>       - System.Transactions
</I>&gt;<i>       - Microsoft.* (Build, VisualBasic, Web.Atlas, etc.)
</I>&gt;<i>     - tools
</I>&gt;<i>       - xbuild
</I>
I think the plan gets a bit icky around here. Consider when we get to a
point where we support the vb compiler. Clearly, we will want to apply
the same policy we do to mcs: keep it stable. In effect, we will want to
have the &quot;default&quot; configuration pull a more stable branch of vb. At the
same time Atlas might be alive and jumping, we'll want to give people
new versions every month with lots of changes. So we'll have to pull vb
out or something.

The point is, in many ways we are looking at two kinds of splits: 1)
splits across logical lines 2) splits across maintenance policy lines.
We need to come up with a way that developers can see split 2 and users
see split 1.

I'd note that the split you are coming up with looks suspiciously like
our rpm split. The rpm splits already cover the logical splits the way
our users see them. In some ways, I'd like to leave the rpm split alone
(this has been debated since prehistoric times, the current setup is the
3rd or so iteration) and only change the way we build mono. All we'd
need is some sort of control file that says &quot;for the stable build, get
mono, mcs from branches/stable, and winforms from trunk&quot; or something.

-- Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015608.html">[Mono-dev] To split or not to split Mono?
</A></li>
	<LI>Next message: <A HREF="015638.html">[Mono-dev] To split or not to split Mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15609">[ date ]</a>
              <a href="thread.html#15609">[ thread ]</a>
              <a href="subject.html#15609">[ subject ]</a>
              <a href="author.html#15609">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
