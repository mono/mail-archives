<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] unsafe C# code not working under mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20unsafe%20C%23%20code%20not%20working%20under%20mono&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015982.html">
   <LINK REL="Next"  HREF="015984.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] unsafe C# code not working under mono</H1>
    <B>Marek Habersack</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20unsafe%20C%23%20code%20not%20working%20under%20mono&In-Reply-To="
       TITLE="[Mono-dev] unsafe C# code not working under mono">grendel at caudium.net
       </A><BR>
    <I>Fri Nov 25 05:14:23 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015982.html">[Mono-dev] localization problem?
</A></li>
        <LI>Next message: <A HREF="015984.html">[Mono-dev] windows shares
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15983">[ date ]</a>
              <a href="thread.html#15983">[ thread ]</a>
              <a href="subject.html#15983">[ subject ]</a>
              <a href="author.html#15983">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everybody,

  I've been recently implementing CAPTCHA for a customer and I had come
across the article @codeproject (<A HREF="http://www.codeproject.com/aspnet/WSCaptcha.asp">http://www.codeproject.com/aspnet/WSCaptcha.asp</A>)
which implements quite a nice version of it. Since I didn't want a service
but just a simple HttpHandler module, I wrote one that integrated the
graphics generation code from the above article. Among the source files I
used is the Filters.cs which you can find in the article's src zip (or in
another article at <A HREF="http://www.codeproject.com/cs/media/displacementfilters.asp">http://www.codeproject.com/cs/media/displacementfilters.asp</A>). 
  The code in that file uses unsafe code blocks to manipulate bitmaps. Everything 
compiles fine and my handler module generates images with text on them. The
problem is that the code (compiled by mcs) doesn't produce the graphics
effects when running under mono (under Ubuntu) but DOES generate the effects 
when ran under MS .Net 1.1 (using the same handler .dll compiled by mcs).
  I have attached samples of the graphics generated by the same DLL under
both environments. The source code to the handler is available at
<A HREF="http://grendel.thanes.org/monocode/Captcha.tar.bz2.">http://grendel.thanes.org/monocode/Captcha.tar.bz2.</A>
  Does anyone have an idea of what might be going on? At first I thought
that mcs was generating incorrect code, but then seeing that the same binary
works under MS .Net and doesn't under mono I figured it must be a runtime
problem.
  The version of mono I'm using is (daily updated) SVN HEAD.

thanks in advance,

marek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CaptchaImage.aspx-mono.jpeg
Type: image/jpeg
Size: 3433 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051125/1b01b945/attachment.jpeg">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051125/1b01b945/attachment.jpeg</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CaptchaImage.aspx-ms_dotnet_1.1.jpeg
Type: image/jpeg
Size: 3433 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051125/1b01b945/attachment-0001.jpeg">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051125/1b01b945/attachment-0001.jpeg</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051125/1b01b945/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051125/1b01b945/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015982.html">[Mono-dev] localization problem?
</A></li>
	<LI>Next message: <A HREF="015984.html">[Mono-dev] windows shares
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15983">[ date ]</a>
              <a href="thread.html#15983">[ thread ]</a>
              <a href="subject.html#15983">[ subject ]</a>
              <a href="author.html#15983">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
