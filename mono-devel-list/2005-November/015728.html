<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] mod_mono: startup problems with Apache 1.3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20mod_mono%3A%20startup%20problems%20with%20Apache%201.3&In-Reply-To=dl4uhh%24fnp%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015726.html">
   <LINK REL="Next"  HREF="015731.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] mod_mono: startup problems with Apache 1.3</H1>
    <B>Joshua Tauberer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20mod_mono%3A%20startup%20problems%20with%20Apache%201.3&In-Reply-To=dl4uhh%24fnp%241%40sea.gmane.org"
       TITLE="[Mono-dev] [PATCH] mod_mono: startup problems with Apache 1.3">tauberer at for.net
       </A><BR>
    <I>Sat Nov 12 10:19:09 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015726.html">[Mono-dev] [PATCH] mod_mono: startup problems with Apache 1.3
</A></li>
        <LI>Next message: <A HREF="015731.html">[Mono-dev] [PATCH] mod_mono: startup problems with Apache 1.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15728">[ date ]</a>
              <a href="thread.html#15728">[ thread ]</a>
              <a href="subject.html#15728">[ subject ]</a>
              <a href="author.html#15728">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Robert Jordan wrote:
&gt;<i> The attached patch fixes the problem by not starting
</I>&gt;<i> xsp from apache's child_init handler. It's now started
</I>&gt;<i> on demand during the first request.
</I>
How about something more 'creative' to only start mod-mono-server once. 
  One of the preforked processes should decide that it's going to be the 
one to do the initial forking.  I can't find a way for a child process 
to figure out if it's, e.g., the first-spawned process, but that would 
be a nice way to do it.

Or, they can all check for the presence of &quot;/tmp/mod_mono-forker&quot; (or 
some name determined by the pid of the main apache process?), read a pid 
in it, if the pid is valid then it's the pid of the process doing 
forking, otherwise write its own pid in it and do forking (with all of 
that locked properly, and deleting the file on shutdown).

-- 
- Joshua Tauberer

<A HREF="http://taubz.for.net">http://taubz.for.net</A>

** Nothing Unreal Exists **



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015726.html">[Mono-dev] [PATCH] mod_mono: startup problems with Apache 1.3
</A></li>
	<LI>Next message: <A HREF="015731.html">[Mono-dev] [PATCH] mod_mono: startup problems with Apache 1.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15728">[ date ]</a>
              <a href="thread.html#15728">[ thread ]</a>
              <a href="subject.html#15728">[ subject ]</a>
              <a href="author.html#15728">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
