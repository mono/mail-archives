<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Compiling mono on windows for developing (not	running)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Compiling%20mono%20on%20windows%20for%20developing%20%28not%0A%09running%29&In-Reply-To=%3C53732785.1050704%40dynamicdevices.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041479.html">
   <LINK REL="Next"  HREF="041450.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Compiling mono on windows for developing (not	running)</H1>
    <B>Alex J Lennon</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Compiling%20mono%20on%20windows%20for%20developing%20%28not%0A%09running%29&In-Reply-To=%3C53732785.1050704%40dynamicdevices.co.uk%3E"
       TITLE="[Mono-dev] Compiling mono on windows for developing (not	running)">ajlennon at dynamicdevices.co.uk
       </A><BR>
    <I>Wed May 14 08:21:25 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="041479.html">[Mono-dev] Compiling mono on windows for developing (not	running)
</A></li>
        <LI>Next message: <A HREF="041450.html">[Mono-dev] DynamicModuleHelper and HttpApplication	RegisterModule methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41486">[ date ]</a>
              <a href="thread.html#41486">[ thread ]</a>
              <a href="subject.html#41486">[ subject ]</a>
              <a href="author.html#41486">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 13/05/2014 23:26, Martin Thwaites wrote:
&gt;<i> Hi Alex,
</I>&gt;<i>
</I>&gt;<i> I've been giving your tutorial ago, and I have some things that may be
</I>&gt;<i> good to add...
</I>&gt;<i>
</I>&gt;<i> firstly, I'm building from git, and I checked it out using the visual
</I>&gt;<i> studio clone.  I think this lead to a line endings error, so you need
</I>&gt;<i> to run the script in a way that uses them properly.  I found that if
</I>&gt;<i> you run it with &quot;bash -x -o igncr autogen.sh --prefix=&quot;c:\monoinstall&quot;
</I>&gt;<i> --with-preview=yes&quot; it seems to do the trick.
</I>&gt;<i>
</I>
Hi Martin, I spotted your comment on there :) I'm glad you found it
useful and many thanks for the feedback. I will make sure to get that
incorporated shortly. You also reminded me to add that the path root
should not contain spaces or the build will fail, and I believe that
building as a user with a space in the name may also cause problems.

I have also taken Bryan's comment in an earlier thread on-board, on
automating the Cygwin package pull-down. I will aim to put a noddy
script together to do this when I get a chance.

&gt;<i> I've now come across another error that you may be able to help with:
</I>&gt;<i> === configuring in eglib
</I>&gt;<i> (/cygdrive/c/Users/Martin/Source/Repos/mono/eglib)
</I>&gt;<i> configure: WARNING: no configuration information is in eglib
</I>&gt;<i> === configuring in libgc
</I>&gt;<i> (/cygdrive/c/Users/Martin/Source/Repos/mono/libgc)
</I>&gt;<i> configure: running /bin/sh ./configure --disable-option-checking
</I>&gt;<i> '--prefix=/usr/local'  '--host=i686-pc-mingw32'
</I>&gt;<i> 'host_alias=i686-pc-mingw32' 'CPPFLAGS_FOR_EGLIB=' 'CFLAGS_FOR_EGLIB='
</I>&gt;<i> '--disable-embed-check' '--with-libgc-threads=win32'
</I>&gt;<i> '--enable-win32-dllmain=yes' '--enable-parallel-mark'
</I>&gt;<i> 'CPPFLAGS_FOR_LIBGC=-DWINVER=0x0500 -D_WIN32_WINNT=0x0500
</I>&gt;<i> -D_WIN32_IE=0x0501 -D_UNICODE -DUNICODE -DWIN32_THREADS
</I>&gt;<i> -DFD_SETSIZE=1024' 'CFLAGS_FOR_LIBGC= -g -mno-tls-direct-seg-refs
</I>&gt;<i> -DGC_BUILD -DGC_NOT_DLL' --cache-file=/dev/null --srcdir=.
</I>&gt;<i> /bin/sh: ./configure: No such file or directory
</I>&gt;<i> configure: error: ./configure failed for libgc
</I>&gt;<i>
</I>
I don't have a good answer for you here I am afraid. However the fact
that you're seeing problems in eglib and libgc relating to configuration
is interesting as I have had ongoing problems here too when trying to
cross-compile for ARM targets. I mentioned some of this in an earlier
thread - <A HREF="http://bit.ly/1gCDDXv">http://bit.ly/1gCDDXv</A>

To cut a long story short, when we're cross-compiling with
Yocto/OpenEmbedded we may have three different sets of relevant Mono
tools (at least). There's whatever the user has installed on their host
system for their own use. Then there's a 'native' Mono which is built as
a pre-cursor to building Mono to run on the configured target i.e. two
step build as per <A HREF="http://bit.ly/1v3bqCs">http://bit.ly/1v3bqCs</A>

What I've been seeing is that the standard autotools templating results
in incorrect dependencies on the host Mono installation rather that the
native/target Mono.

This can cause build failures depending on which particular version of
Mono is actually installed on the host.

I worked through this with a guy who was trying to build on Linux Mint
with Mono installed, and which seemed to bring it out into the open for us.

The solution was for me to modify the acinclude.m4 templates before I do
the configuration to make sure they are specifying the correct prefixed
libtool rather than defaulting to whatever is about on the build machine -

 ${S}/autogen.sh --verbose || bbnote &quot;${PN} failed to autogen.sh&quot;
    sed -e &quot;s|slash\}libtool|slash\}${HOST_SYS}-libtool|&quot; -i acinclude.m4
    sed -e &quot;s|slash\}libtool|slash\}../${HOST_SYS}-libtool|&quot; -i
libgc/acinclude.m4
    sed -e &quot;s|slash\}libtool|slash\}../${HOST_SYS}-libtool|&quot; -i
eglib/acinclude.m4
    sed -e &quot;s|r/libtool|r/${HOST_SYS}-libtool|&quot; -i runtime/mono-wrapper.in
    sed -e &quot;s|r/libtool|r/${HOST_SYS}-libtool|&quot; -i
runtime/monodis-wrapper.in

<A HREF="http://git.yoctoproject.org/cgit/cgit.cgi/meta-mono/tree/recipes-mono/mono/mono-3.4.0.inc">http://git.yoctoproject.org/cgit/cgit.cgi/meta-mono/tree/recipes-mono/mono/mono-3.4.0.inc</A>

This may or may not be related to what you are seeing...

Best Regards,

Alex

&gt;<i> I'm now at a loss.
</I>&gt;<i>
</I>&gt;<i> As I've stated before, what I'm looking to do is be able to develop
</I>&gt;<i> mono (not develop with) in Visual Studio.  Maybe the stuff the Miguel
</I>&gt;<i> is doing will help, but I just had a bit of time so thought I'd give
</I>&gt;<i> your stuff ago.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Martin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 5 May 2014 03:52, Alex J Lennon &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ajlennon at dynamicdevices.co.uk</A>
</I>&gt;<i> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ajlennon at dynamicdevices.co.uk</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     On 05/05/2014 03:44, Konaju Games (Dev) wrote:
</I>&gt;<i>
</I>&gt;<i>     &gt; With Cygwin, there is one change to make to etc/fstab before
</I>&gt;<i>     starting
</I>&gt;<i>     &gt; a build.  You need to add noacl to the cygdrive mount.  Without this
</I>&gt;<i>     &gt; change, any files created by a Win32 process outside of Cygwin will
</I>&gt;<i>     &gt; result in Cygwin having no permissions to do anything with the
</I>&gt;<i>     files.
</I>&gt;<i>     &gt;
</I>&gt;<i>     <A HREF="http://georgik.sinusgear.com/2012/07/14/how-to-fix-incorrect-cygwin-permission-inwindows-7/">http://georgik.sinusgear.com/2012/07/14/how-to-fix-incorrect-cygwin-permission-inwindows-7/</A>
</I>&gt;<i>     &gt;
</I>&gt;<i>
</I>&gt;<i>     Thanks, I'll have a look and see if that addresses the issue I was
</I>&gt;<i>     seeing with having /usr/local mounting during the build.
</I>&gt;<i>
</I>&gt;<i>     Regards, Alex
</I>&gt;<i>
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     Mono-devel-list mailing list
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140514/fbcc7b11/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140514/fbcc7b11/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041479.html">[Mono-dev] Compiling mono on windows for developing (not	running)
</A></li>
	<LI>Next message: <A HREF="041450.html">[Mono-dev] DynamicModuleHelper and HttpApplication	RegisterModule methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41486">[ date ]</a>
              <a href="thread.html#41486">[ thread ]</a>
              <a href="subject.html#41486">[ subject ]</a>
              <a href="author.html#41486">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
