<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] System.Net.FtpWebRequest
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20System.Net.FtpWebRequest&In-Reply-To=7fb63959050626012434297c4e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012815.html">
   <LINK REL="Next"  HREF="012857.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] System.Net.FtpWebRequest</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20System.Net.FtpWebRequest&In-Reply-To=7fb63959050626012434297c4e%40mail.gmail.com"
       TITLE="[Mono-devel-list] [PATCH] System.Net.FtpWebRequest">miguel at ximian.com
       </A><BR>
    <I>Sun Jun 26 14:28:06 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012815.html">[Mono-devel-list] [PATCH] System.Net.FtpWebRequest
</A></li>
        <LI>Next message: <A HREF="012857.html">[Mono-devel-list] [PATCH] System.Net.FtpWebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12826">[ date ]</a>
              <a href="thread.html#12826">[ thread ]</a>
              <a href="subject.html#12826">[ subject ]</a>
              <a href="author.html#12826">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

   Excellent work Martin.

   I have attached a few comments:

&gt;<i> 4.) I did XML doc for it all - don't know how much that helps....
</I>
In Mono we tend not to use the inline-XML documentation, and instead we
put the documentation on a separate file.   Could you resend the code
without XML comments?

The comments we can reuse in Monodoc (install your new libraries, and
run the monodocer command).

&gt;<i> 5.) I haven't modified it so that you don't need to do .RegisterPrefix
</I>&gt;<i> (and am not sure how either)
</I>
Am confused about that.

&gt;<i> The main classes (FtpAsyncResult, FtpWebRequest, FtpWebResponse, FtpEnums)
</I>&gt;<i> FtpTest.cs - a usage example - takes ftp:// or ftps:// as cmd line arg
</I>&gt;<i> and connects, lists the dir etc...
</I>&gt;<i> FtpWebRequestTest.cs - a VERY basic test class - it will test you
</I>&gt;<i> didn't completely break it but not much else yet - I'll do more later.
</I>
I have not looked very closely to the code, but a few things are worth
mentioning:

	* The abort code does not prepare the socket to send an
	  Out-of-Band message before it sends the abort.

	* The abort code I think is &quot;ABOR&quot;, not &quot;ABORT&quot;

	* Although there are properties for setting binary transfer,
	  there does not seem to be any code to actually change the
	  transfer mode, since the default in most servers is ASCII
	  this probably will cause trouble.

	* When changing properties of a connection, maybe the code
	  should queue changes (unless the MS.NET implementation does
	  it differently), for example, it should be possible to
	  change the binary mode while a transfer is in progress.

	  On the next operation, it could send all of the pending
	  changes down the line.

	* The code does not seem to handle broken communications,
	  for instance, consider the &quot;SendCommand&quot; routine, it 
	  should probably loop around:

           net.Write(sendBuffer, 0, sendBuffer.GetLength(0));                                                              

	  And catch errors;  And if an error happens while sending
	  the command or receiving the reply, it should throw the
	  proper exception (or try to recover, not sure what MS
	  does here).

I have attached the source code to the ftp client that is used in the
Midnight Commander which might be useful as a reference for
miss-behaving ftp sites.  The code has extra stuff that you can safely
ignore, but the underlying ftp client should be a good reference.

Miguel.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ftpfs.c
Type: text/x-csrc
Size: 53184 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050626/0538ee68/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050626/0538ee68/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012815.html">[Mono-devel-list] [PATCH] System.Net.FtpWebRequest
</A></li>
	<LI>Next message: <A HREF="012857.html">[Mono-devel-list] [PATCH] System.Net.FtpWebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12826">[ date ]</a>
              <a href="thread.html#12826">[ thread ]</a>
              <a href="subject.html#12826">[ subject ]</a>
              <a href="author.html#12826">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
