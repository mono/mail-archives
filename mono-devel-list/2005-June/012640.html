<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Tests for System.DirectoryServices
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Tests%20for%20System.DirectoryServices&In-Reply-To=LNEAJLBKIAFKOPHEICIDKEIEEMAA.spouliot%40videotron.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012642.html">
   <LINK REL="Next"  HREF="012660.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Tests for System.DirectoryServices</H1>
    <B>Boris Kirzner</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Tests%20for%20System.DirectoryServices&In-Reply-To=LNEAJLBKIAFKOPHEICIDKEIEEMAA.spouliot%40videotron.ca"
       TITLE="[Mono-devel-list] Tests for System.DirectoryServices">borisk at mainsoft.com
       </A><BR>
    <I>Sun Jun 19 11:26:55 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012642.html">[Mono-devel-list] Patch for System.DirectoryServices
</A></li>
        <LI>Next message: <A HREF="012660.html">[Mono-devel-list] Tests for System.DirectoryServices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12640">[ date ]</a>
              <a href="thread.html#12640">[ thread ]</a>
              <a href="subject.html#12640">[ subject ]</a>
              <a href="author.html#12640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello S&#233;bastien,
I've finished implementing the default ldap server feature (currently 
waiting for devlist approval) and I've also made an example for defining 
default ldap server configuration.(attached are an example file and the 
proposed patch for the case you missed my mail to the devlist).

The main point if the change is: if user does not specifies a path of an 
entry, the entry should point to default ldap server on the network 
(actually, to default naming context of the default ldap server). The 
default naming context can be retrieved from the server rootDse entry, 
so the only information we need to provide a desired functionality is a 
default ldap server host and port.

User does not have to provide his own configuration: the default 
configuration (absence of user configuration file) means &quot;use 
localhost:389&quot;. User _can_ overwrite this with his own values using app 
config or machine config.

Is the &quot;root&quot; System.DirectoryServices is the best place to place an 
example and the explanation file?
Should also user configuration file reside there (since, for example, 
the tests run by default in this directory).

The second point is that DirectoryServices tests require environment 
variable of (some, not necessary the default) ldap server to run on.
So, the tests logic can possibly be: if no environment variable present, 
test prints warning message and silently passes(or, maybe, fails?). If 
someone wants to run this tests, he should define both environment 
variable and a user configuration file (or configure the host running 
these tests to act also as a default ldap server)

What do you think about this?

Thanks,
Boris

S&#233;bastien Pouliot wrote:

&gt;<i>Hello Boris,
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>I understand that use of machine.config or app.config is far from ideal,
</I>&gt;&gt;<i>but at least it can provide us with a basic solution.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>When things gets too complicated people quit. I don't think many people are
</I>&gt;<i>gonna be runned the LDAP tests but I wouldn't want to discourage anyone. So
</I>&gt;<i>the easier the better ;-)
</I>&gt;<i>
</I>&gt;<i>Why don't keep the environment variable (very simple) and point it to a
</I>&gt;<i>configuration file (XML or plain ASCII) ?
</I>&gt;<i>
</I>&gt;<i>That would mean:
</I>&gt;<i>
</I>&gt;<i>* that, by default, all non-network tests in System.DirectoryServices.dll
</I>&gt;<i>will be executed (here I'm thinking about the few permissions tests already
</I>&gt;<i>present _and_ future CAS tests);
</I>&gt;<i>
</I>&gt;<i>* it would be possible to check into SVN a configuration sample file that
</I>&gt;<i>any user can copy (so it won't get in conflict with SVN) and edit;
</I>&gt;<i>
</I>&gt;<i>* it would be possible to have multiple configuration files, e.g. if you
</I>&gt;<i>want to test against different LDAP servers (machine or software);
</I>&gt;<i>
</I>&gt;<i>* all configuration could be done in a single place whatever the
</I>&gt;<i>runtime/version you are using.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>Do you think there is a better way to provide a &quot;default&quot; behavior,
</I>&gt;&gt;<i>either at DirectoryServices or Ldap level, such that it will be easily
</I>&gt;&gt;<i>configured for each client application?
</I>&gt;&gt;<i>The trivial solution - default is &quot;<A HREF="LDAP://localhost:389&quot;,">LDAP://localhost:389&quot;,</A> does not looks
</I>&gt;&gt;<i>satisfactory and, in addition, does not provides a solution for base dsn.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Without a valid configuration file I would simply ignore all tests
</I>&gt;<i>(requiring a server). This is similar to what I'm doing for the CAS tests.
</I>&gt;<i>If someone doesn't exclude them (default for &quot;make run-test&quot;) and doesn't
</I>&gt;<i>supply --security to the mono runtime, then they are all ignore (and nicely
</I>&gt;<i>nunit still shows them as ignored when they aren't excluded).
</I>&gt;<i>
</I>&gt;<i>Sebastien Pouliot
</I>&gt;<i>home: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at videotron.ca</A>
</I>&gt;<i>blog: <A HREF="http://pages.infinit.net/ctech/poupou.html">http://pages.infinit.net/ctech/poupou.html</A>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>
-- 
Boris Kirzner
Mainsoft Corporation
<A HREF="http://www.mainsoft.com">http://www.mainsoft.com</A>

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: directoryservices.diff
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050619/512adfa4/attachment.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050619/512adfa4/attachment.pl</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: App.config
Type: text/xml
Size: 539 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050619/512adfa4/attachment.xml">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050619/512adfa4/attachment.xml</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012642.html">[Mono-devel-list] Patch for System.DirectoryServices
</A></li>
	<LI>Next message: <A HREF="012660.html">[Mono-devel-list] Tests for System.DirectoryServices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12640">[ date ]</a>
              <a href="thread.html#12640">[ thread ]</a>
              <a href="subject.html#12640">[ subject ]</a>
              <a href="author.html#12640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
