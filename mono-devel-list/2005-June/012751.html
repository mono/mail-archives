<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Fwd: Re: [Fwd: Re: [Mono-devel-list] System.Data.DataSet.ReadXml	reimplementation]]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BFwd%3A%20Re%3A%20%5BFwd%3A%20Re%3A%20%5BMono-devel-list%5D%20System.Data.DataSet.ReadXml%0A%09reimplementation%5D%5D&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012747.html">
   <LINK REL="Next"  HREF="012763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Fwd: Re: [Fwd: Re: [Mono-devel-list] System.Data.DataSet.ReadXml	reimplementation]]</H1>
    <B>Konstantin Triger</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BFwd%3A%20Re%3A%20%5BFwd%3A%20Re%3A%20%5BMono-devel-list%5D%20System.Data.DataSet.ReadXml%0A%09reimplementation%5D%5D&In-Reply-To="
       TITLE="[Fwd: Re: [Fwd: Re: [Mono-devel-list] System.Data.DataSet.ReadXml	reimplementation]]">kostat at mainsoft.com
       </A><BR>
    <I>Thu Jun 23 11:00:39 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012747.html">[Mono-devel-list] configure.in patch
</A></li>
        <LI>Next message: <A HREF="012763.html">[Fwd: Re: [Fwd: Re: [Mono-devel-list] System.Data.DataSet.ReadXml	reimplementation]]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12751">[ date ]</a>
              <a href="thread.html#12751">[ thread ]</a>
              <a href="subject.html#12751">[ subject ]</a>
              <a href="author.html#12751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Eno,

I don't see it in mailing list so resending.

I made the changes we talked about, bt it turns out they probably won't 
make a big diff (see attached patch)

The problem is that I have to collect almost always:
XmlReadMode.InferSchema: in order to be able to skip if &quot;schema&quot; is found.
XmlReadMode.Auto: as I don't know what's gonna be.
XmlReadMode.DiffGram: wait for diffgram - very uncommon case, but have a 
test (MonoTests.System.Data.DataSetTest.ReadWriteXmlDiffGram).
XmlReadMode.IgnoreSchema: to be able to ignore the schema if it's found.

 From the other side in most cases the schema or diffgram element will 
be as root or its child, so nothing would be collected anyway.

Regards,
Konstantin Triger



Atsushi Eno wrote:

&gt;<i> Hello Konstantin,
</I>&gt;<i>
</I>&gt;<i> Konstantin Triger wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Eno,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I committed the code before I saw your comments on Boris email. 
</I>&gt;&gt;<i> Actually I missed it at all and Boris forwarded it to me. In any case 
</I>&gt;&gt;<i> I didn't want to ignore it and would like, with your help, create the 
</I>&gt;&gt;<i> best implementation possible.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The new implementation solves some bugs, little bit cleaner as it 
</I>&gt;&gt;<i> does not have &quot;gotos&quot;, but performs worse. I think that with a very 
</I>&gt;&gt;<i> small effort it can perform better. I really need your help to make 
</I>&gt;&gt;<i> this change safe.
</I>&gt;&gt;<i> Can you please give your opinion on an assumption that right after 
</I>&gt;&gt;<i> the schema must reside data? If you agree, with a small change I can 
</I>&gt;&gt;<i> make a real perf improvement and we will have a really better 
</I>&gt;&gt;<i> implementation.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I don't think you could quote my post without seeing it. Anyways,
</I>&gt;<i> Am not seeing what you see. Maybe it would be the best if you
</I>&gt;<i> post testcases that shows why the patch is required. Next, the
</I>&gt;<i> patch has several changes in one file. There are things that could
</I>&gt;<i> be justified and that might not be. They do not look tied
</I>&gt;<i> together, so it is better if they are split.
</I>&gt;<i>
</I>&gt;<i> Without them I don't think any of discussions can go efficiently.
</I>&gt;<i> Depending on the testcases that performant way might not be
</I>&gt;<i> possible. As long as I know MS.NET implementation is so cheap
</I>&gt;<i> that always reads document into DOM or something.
</I>&gt;<i>
</I>&gt;<i> If XML schema is the document root, then there is no data content.
</I>&gt;<i> Existing implementation did handle content schema (at least it was
</I>&gt;<i> designed to do that) as long as it is the top-level content of the 
</I>&gt;<i> document element. I am not aware of practical cases that such
</I>&gt;<i> schemas in further depth are consumed (since 99.999% of .NET
</I>&gt;<i> DataSet users is not likely to have such documents).
</I>&gt;<i>
</I>&gt;<i> Atsushi Eno
</I>



-- 
Regards,
Konstantin Triger

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: DataSet.cs.rxml.diff
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050623/aff12620/attachment.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050623/aff12620/attachment.pl</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012747.html">[Mono-devel-list] configure.in patch
</A></li>
	<LI>Next message: <A HREF="012763.html">[Fwd: Re: [Fwd: Re: [Mono-devel-list] System.Data.DataSet.ReadXml	reimplementation]]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12751">[ date ]</a>
              <a href="thread.html#12751">[ thread ]</a>
              <a href="subject.html#12751">[ subject ]</a>
              <a href="author.html#12751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
