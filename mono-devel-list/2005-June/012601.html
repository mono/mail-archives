<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Why not to use gettext ()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Why%20not%20to%20use%20gettext%20%28%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012596.html">
   <LINK REL="Next"  HREF="012557.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Why not to use gettext ()</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Why%20not%20to%20use%20gettext%20%28%29&In-Reply-To="
       TITLE="[Mono-devel-list] Why not to use gettext ()">kornelpal at hotmail.com
       </A><BR>
    <I>Fri Jun 17 03:41:31 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012596.html">[Mono-devel-list] Default:ChangeType, MonoType,	dynamically loaded assemblies and MonoCMethod:Invoke on constructors
</A></li>
        <LI>Next message: <A HREF="012557.html">[Mono-devel-list] test not-wf-sa-030
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12601">[ date ]</a>
              <a href="thread.html#12601">[ thread ]</a>
              <a href="subject.html#12601">[ subject ]</a>
              <a href="author.html#12601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From: Ben Maurer
</I>&gt;<i> On Fri, 2005-06-17 at 00:29 +0200, Andreas Nahr wrote:
</I>&gt;&gt;<i> ResourceManager would need to construct a hashtable using more that
</I>&gt;&gt;<i> 500.000
</I>&gt;&gt;<i> function calls (resulting in a high number of million or even billion
</I>&gt;&gt;<i> operations) consuming about 1-2MB of ADDITIONAL RAM (additional to the
</I>&gt;&gt;<i> strings, assuming identifier length of 10-20 chars). This would be
</I>&gt;&gt;<i> managed
</I>&gt;&gt;<i> ram, so the GC would need to run several times to bring that all up to
</I>&gt;&gt;<i> gen
</I>&gt;&gt;<i> 3.
</I>&gt;&gt;<i> Gettext would be even worse (if using hash-lookup), but shines when not
</I>&gt;&gt;<i> translated (will the exceptions get translated anyways?)
</I>&gt;<i>
</I>&gt;<i> Any solution that actually loads everything into memory at startup is
</I>&gt;<i> horrible. We need a solution that uses memory mappable files.
</I>
I think the only impact of localization can be memory usage. I am not afraid
of CPU usage because usually it does only lookup and GetText is rarely
called. I think throwing an Exeption, then catching it and running
finalyzers needs much more CPU time than looking up the message and we never
wanted to drop exception handling.

By the way if you worry about memory usage a custom ResourceSet
implementation that has no Hashtable but looks up string resource every time
they are requested can be implemented.

In fact ResouceManager of MS.NET uses an internal ResourceSet implementation
that loads each resource only when needed. Note that it saves them in a
Hashtable to make next load faster but if we want to we don't have to do the
same. (I obtained these informations just using reflection on the
ResourceSet returned by ResourceManager.GetResourceSet).

Korn&#233;l


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012596.html">[Mono-devel-list] Default:ChangeType, MonoType,	dynamically loaded assemblies and MonoCMethod:Invoke on constructors
</A></li>
	<LI>Next message: <A HREF="012557.html">[Mono-devel-list] test not-wf-sa-030
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12601">[ date ]</a>
              <a href="thread.html#12601">[ thread ]</a>
              <a href="subject.html#12601">[ subject ]</a>
              <a href="author.html#12601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
