<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Monoco, couroutines and Mono.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Monoco%2C%20couroutines%20and%20Mono.&In-Reply-To=49E632D6.5000401%40mansionfamily.plus.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031797.html">
   <LINK REL="Next"  HREF="031804.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Monoco, couroutines and Mono.</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Monoco%2C%20couroutines%20and%20Mono.&In-Reply-To=49E632D6.5000401%40mansionfamily.plus.com"
       TITLE="[Mono-dev] Monoco, couroutines and Mono.">kumpera at gmail.com
       </A><BR>
    <I>Wed Apr 15 15:48:09 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="031797.html">[Mono-dev] Monoco, couroutines and Mono.
</A></li>
        <LI>Next message: <A HREF="031804.html">[Mono-dev] Monoco, couroutines and Mono.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31799">[ date ]</a>
              <a href="thread.html#31799">[ thread ]</a>
              <a href="subject.html#31799">[ subject ]</a>
              <a href="author.html#31799">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi James,

On Wed, Apr 15, 2009 at 4:17 PM, James Mansion &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">james at mansionfamily.plus.com</A>
&gt;<i> wrote:
</I>
&gt;<i> Tomi Valkeinen wrote:
</I>&gt;<i> &gt; I think you mean OS thread. The coroutines are nothing special, they
</I>&gt;<i> &gt; are similar to any other jitted code that mono produces.
</I>&gt;<i> Well, except that the core has some knowledge of them now, right?
</I>&gt;<i> &gt; And thus the stack has to be the normal continuous OS stack.
</I>&gt;<i> Thus?  Why? You probably need to pin stack areas, but why can't you
</I>&gt;<i> malloc (or mmap) some new space
</I>&gt;<i> and place a stack in it?  I think you'll find that Steve Dekorte's
</I>&gt;<i> libcoro does that. If you are prepared to
</I>&gt;<i> forgo guard pages and the like (or roll your own handler) then I don't
</I>&gt;<i> see why the stack pointer absolutely
</I>&gt;<i> has to be where you expect.  And in fact the gubbins that normally gets
</I>&gt;<i> pushed to the main CPU stack
</I>&gt;<i> can get pushed to a fully software stack anyway, just as you do on RISC
</I>&gt;<i> systems with no push/pop
</I>&gt;<i> abstraction.  The stack pointer is just a pointer, after all.
</I>&gt;<i>
</I>&gt;<i> James
</I>&gt;<i>
</I>
Such stackless[1] design is quite more complicated as doing stack
attach/detach
isn't trivial. Spaghetti stacks have their issues that this design avoids.

The good news is that such change would not require messing with the API, so
if this feature
gets enough traction and someone from the community decides to sponsor such
optimization
it would be doable without breaking existing users.

[1]stackless in the sense that it doesn't strictly use the C stack
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090415/9db9257a/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090415/9db9257a/attachment.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031797.html">[Mono-dev] Monoco, couroutines and Mono.
</A></li>
	<LI>Next message: <A HREF="031804.html">[Mono-dev] Monoco, couroutines and Mono.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31799">[ date ]</a>
              <a href="thread.html#31799">[ thread ]</a>
              <a href="subject.html#31799">[ subject ]</a>
              <a href="author.html#31799">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
