<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono.Addins in Monodoc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono.Addins%20in%20Monodoc&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026173.html">
   <LINK REL="Next"  HREF="026178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono.Addins in Monodoc</H1>
    <B>Lluis Sanchez</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono.Addins%20in%20Monodoc&In-Reply-To="
       TITLE="[Mono-dev] Mono.Addins in Monodoc">lluis at ximian.com
       </A><BR>
    <I>Tue Dec 18 11:30:56 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="026173.html">[Mono-dev] Integrating heap-shot in the new logging profiler
</A></li>
        <LI>Next message: <A HREF="026178.html">[Mono-dev] Mono.Addins in Monodoc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26175">[ date ]</a>
              <a href="thread.html#26175">[ thread ]</a>
              <a href="subject.html#26175">[ subject ]</a>
              <a href="author.html#26175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

For some time I've been thinking about changes required in Monodoc,
especially regarding how Monodoc creates the documentation tree and
locates the available documentation. I'm posting my ideas here because
Mike told me that he is going to spend some time fixing Monodoc, so
maybe those ideas are a good starting point for the changes to be made.

My idea is to use Mono.Addins to handle all extensibility of Monodoc.
There would be at least two extension points:

      * Documentation providers: classes implementing the Provider
        class: ecma, man, error, etc. Some abstraction work will be
        needed, since Provider and HelpSource object creation is
        hard-coded right now. 
      * Documentation sources: New document nodes to show in the
        documentation tree. It would replace the existing monodoc.xml
        file and the sources subdir.

The use of add-ins for registering new documentation sources probably
requires some more explanation. Here is an example of how the extension
point might look like:

&lt;Addin id=&quot;Core&quot; namespace=&quot;Monodoc&quot; version=&quot;2.0&quot; isroot=&quot;true&quot;&gt;
	&lt;!-- Declaration of the extension point for help sources --&gt;
	&lt;ExtensionPoint path=&quot;/Monodoc/HelpSources&quot;&gt;
		&lt;ExtensionNode name=&quot;Node&quot; type=&quot;Monodoc.Node&quot; /&gt;
	&lt;/ExtensionPoint&gt;
	...
	&lt;Extension path=&quot;/Monodoc/HelpSources&quot;&gt;
		&lt;!-- Some default documentation sources, included in Monodoc --&gt;
		&lt;Node id=&quot;classlib&quot; label=&quot;Class Library&quot; provider=&quot;ecma&quot; file=&quot;netdocs&quot; /&gt;
		&lt;Node id=&quot;classlib-mono&quot; label=&quot;Mono Libraries&quot; provider=&quot;ecma&quot; file=&quot;Mono&quot; /&gt;
		&lt;Node id=&quot;ecmaspec&quot; label=&quot;C# Language Specification&quot; provider=&quot;ecmaspec&quot; file=&quot;ecma334&quot; /&gt;
		&lt;Node id=&quot;dev-tools&quot; label=&quot;Mono Development Tools&quot; /&gt;
		&lt;Node id=&quot;various&quot; label=&quot;Various&quot;&gt;
			&lt;Node id=&quot;classlib-nunit&quot; label=&quot;NUnit Libraries&quot; provider=&quot;ecma&quot; file=&quot;nunit-docs&quot; /&gt;
		&lt;/Node&gt;
	&lt;/Extension&gt;
&lt;/Addin&gt;

So, given this extension point and that set of nodes defined by Monodoc,
here are some examples of documentation source add-ins:

&lt;!-- Add-in which register MonoDevelop api documentation --&gt;
&lt;Addin id=&quot;MonoDevelop&quot; namespace=&quot;Monodoc.Sources&quot;&gt;
	&lt;Dependencies&gt;
		&lt;Addin id=&quot;Core&quot; version=&quot;2.0&quot; /&gt;
	&lt;/Dependencies&gt;
	&lt;Runtime&gt;
		&lt;!-- Files included in the add-in --&gt;
		&lt;Import file=&quot;monodevelop-reference.tree&quot; /&gt;
		&lt;Import file=&quot;monodevelop-reference.zip&quot; /&gt;
	&lt;/Runtime&gt;
	&lt;Extension path=&quot;/Monodoc/HelpSources&quot;&gt; 
		&lt;!-- Registers the new node, specifying the provider and source file --&gt;
		&lt;Node id=&quot;monodevelop&quot; label=&quot;MonoDevelop API&quot; provider=&quot;ecma&quot; file=&quot;monodevelop-reference&quot; /&gt;
	&lt;/Extension&gt;
&lt;/Addin&gt;

Notice that add-ins don't need to be implemented in assemblies. An
add-in can just be a set of files. In the example the add-in would be
composed by:

      * Monodoc.Sources.MonoDevelop.addin.xml (with the content above)
      * monodevelop-reference.tree
      * monodevelop-reference-zip


Another example:

&lt;Addin id=&quot;MonoProfiler&quot; namespace=&quot;Monodoc.Sources&quot;&gt;
	&lt;Dependencies&gt;
		&lt;Addin id=&quot;Core&quot; version=&quot;2.0&quot; /&gt;
	&lt;/Dependencies&gt;
	&lt;Runtime&gt;
		&lt;Import file=&quot;mono-profiler.tree&quot; /&gt;
		&lt;Import file=&quot;mono-profiler.zip&quot; /&gt;
		&lt;Import file=&quot;mono-profiler-man.tree&quot; /&gt;
		&lt;Import file=&quot;mono-profiler-man.zip&quot; /&gt;
	&lt;/Runtime&gt;
	&lt;Extension path=&quot;/Monodoc/HelpSources&quot;&gt; 
		&lt;!-- Registers a new node --&gt;
		&lt;Node id=&quot;profiler&quot; label=&quot;Mono Profiler API&quot; provider=&quot;ecma&quot; file=&quot;mono-profiler&quot; /&gt;
	&lt;/Extension&gt;
	&lt;Extension path=&quot;/Monodoc/HelpSources/dev-tools&quot;&gt;
		&lt;!-- Register a new child node of dev-tools --&gt;
		&lt;Node id=&quot;profiler-tool&quot; label=&quot;Mono Profiler&quot; provider=&quot;man&quot; file=&quot;mono-profiler-man&quot; /&gt;
	&lt;/Extension&gt;
&lt;/Addin&gt;

What's nice about using Mono.Addins for all this?

      * Monodoc can leverage all add-in management functionality that
        Mono.Addins provides. We could setup an online repository with
        documentation add-ins and let the user choose which
        documentation to install.
      * There would be more flexibility about where to put the
        documentation sources. Add-ins can be installed at system level
        or in the user home directory.
      * Documentation sources can include or &quot;pull&quot; the documentation
        providers needed to visualize them. Since all are add-ins, a
        documentation source add-in can declare dependencies on other
        source or provider add-ins.
      * If we share the same add-in space with MonoDevelop, we can
        publish MD add-ins which include documentation. For example, the
        MonoDevelop Boo add-in might include documentation about Boo,
        and that documentation would be visible in Monodoc even if the
        add-in was installed using the MonoDevelop add-in manager.

Lluis.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026173.html">[Mono-dev] Integrating heap-shot in the new logging profiler
</A></li>
	<LI>Next message: <A HREF="026178.html">[Mono-dev] Mono.Addins in Monodoc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26175">[ date ]</a>
              <a href="thread.html#26175">[ thread ]</a>
              <a href="subject.html#26175">[ subject ]</a>
              <a href="author.html#26175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
