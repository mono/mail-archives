<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] String.GetHashCode()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20String.GetHashCode%28%29&In-Reply-To=117799f00711301723s1b91766fr1c7e273f0a415c11%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025879.html">
   <LINK REL="Next"  HREF="025915.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] String.GetHashCode()</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20String.GetHashCode%28%29&In-Reply-To=117799f00711301723s1b91766fr1c7e273f0a415c11%40mail.gmail.com"
       TITLE="[Mono-dev] String.GetHashCode()">robertj at gmx.net
       </A><BR>
    <I>Sat Dec  1 08:35:24 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="025879.html">[Mono-dev] InterOp problems with 1.2.6pre2
</A></li>
        <LI>Next message: <A HREF="025915.html">[Mono-dev] String.GetHashCode()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25880">[ date ]</a>
              <a href="thread.html#25880">[ thread ]</a>
              <a href="subject.html#25880">[ subject ]</a>
              <a href="author.html#25880">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alan McGovern wrote:
&gt;<i> A thought struck me while i was dozing on the plane on the way home from the
</I>&gt;<i> summit.
</I>&gt;<i> 
</I>&gt;<i> Since strings are immutable, shouldn't it be possible to compute the
</I>&gt;<i> hashcode once and store it rather than recomputing it over and over again?
</I>&gt;<i> Is there some really obvious reason that i can't think of that would make
</I>&gt;<i> this a bad idea?
</I>
This idea already came up a couple of years ago (2002 or so).

If memory serves (I was not able find the thread in the archives),
the drawback was the additional &quot;gint32&quot; that every MonoString*
will get, regardless how small it is.

Someone (Paolo?) pointed out that adding this field will increase
the average string size by some unacceptable amount.

Therefore, the optimization should consider the string length
and append the hash code after the string's bytes
only if its length is greater than some amount (1K or so).

Robert


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025879.html">[Mono-dev] InterOp problems with 1.2.6pre2
</A></li>
	<LI>Next message: <A HREF="025915.html">[Mono-dev] String.GetHashCode()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25880">[ date ]</a>
              <a href="thread.html#25880">[ thread ]</a>
              <a href="subject.html#25880">[ subject ]</a>
              <a href="author.html#25880">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
