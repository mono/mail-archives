<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] System.Threading.Parallel
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20System.Threading.Parallel&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026101.html">
   <LINK REL="Next"  HREF="026259.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] System.Threading.Parallel</H1>
    <B>Andreas F&#228;rber</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20System.Threading.Parallel&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] System.Threading.Parallel">andreas.faerber at web.de
       </A><BR>
    <I>Thu Dec 13 17:34:42 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="026101.html">[Mono-dev] MoMA: Changes in 1.2.6 Version
</A></li>
        <LI>Next message: <A HREF="026259.html">[Mono-dev] [PATCH] System.Threading.Parallel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26088">[ date ]</a>
              <a href="thread.html#26088">[ thread ]</a>
              <a href="subject.html#26088">[ subject ]</a>
              <a href="author.html#26088">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Attached is a patch adding the System.Threading.Parallel assembly, an  
optional part of the ECMA-335 standard (Annex G). The initial  
implementation is single-threaded, as permitted by the standard. All  
my test cases pass. Please review.

Am I correct to use the ecma.pub key for this ECMA-only assembly?

And am I seeing correctly that the ECMA docs do not document protected  
methods? I used &quot;internal protected&quot; to be on the safe side for now.

There are some comments inline, documenting where I needed to  
interpret the standard. For instance, the standard says an exception  
should be rethrown in EndRun, which I am doing now, but this of course  
hides the original source of the exception, so maybe we should not  
rethrow it but throw some new exception with it as InnerException?


To completely support the &quot;Parallel&quot; Library, in addition the  
ParallelEnvironment class would need to be implemented inside corlib.  
But with Microsoft not having supported it, relying on its presence  
would keep users from deploying this assembly to .NET. The proposed  
implementation therefore uses conditional sections where  
ParallelEnvironment should theoretically be used.

Adding that class to corlib might require a new icall for  
ParallelEnvironment,RecommendedMaxThreads (to discover the number of  
processors/cores), and if so I assume the corlib version would need to  
be incremented?

Thanks,

Andreas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: System.Threading.Parallel.diff
Type: application/octet-stream
Size: 30011 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071213/df43cdbe/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071213/df43cdbe/attachment.obj</A> 
-------------- next part --------------



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026101.html">[Mono-dev] MoMA: Changes in 1.2.6 Version
</A></li>
	<LI>Next message: <A HREF="026259.html">[Mono-dev] [PATCH] System.Threading.Parallel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26088">[ date ]</a>
              <a href="thread.html#26088">[ thread ]</a>
              <a href="subject.html#26088">[ subject ]</a>
              <a href="author.html#26088">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
