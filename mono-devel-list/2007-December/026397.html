<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Perform bounds check on table decode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Perform%20bounds%20check%20on%20table%20decode&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026412.html">
   <LINK REL="Next"  HREF="026398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Perform bounds check on table decode</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Perform%20bounds%20check%20on%20table%20decode&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] Perform bounds check on table decode">kumpera at gmail.com
       </A><BR>
    <I>Sun Dec 30 16:58:07 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="026412.html">[Mono-dev] Mono performance benchmark results
</A></li>
        <LI>Next message: <A HREF="026398.html">[Mono-dev] [PATCH] Perform bounds check on table decode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26397">[ date ]</a>
              <a href="thread.html#26397">[ thread ]</a>
              <a href="subject.html#26397">[ subject ]</a>
              <a href="author.html#26397">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

The attached patch adds an assert in both mono_metadata_decode_row(_col). I
think it's better to assert than access random data.

On the other hard, functions that decode metadata tables must perform such
checks and raise the apropriate error. The attached patch fixes that for
mono_get_method_from_token, which is what I have tests for now. Most of this
bounds checking could be done in mono_method_to_ir, which would avoid
tripping into the metadata stuff.

Just one thing, the test requires that my previous patch to ilasm be
applied.


Rodrigo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071230/918e9fd3/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071230/918e9fd3/attachment.html</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: token_bounds_check.diff
Type: text/x-patch
Size: 932 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071230/918e9fd3/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071230/918e9fd3/attachment.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: invalid_ldftn_invalid_token_out_of_bounds.il
Type: text/x-msil
Size: 794 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071230/918e9fd3/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071230/918e9fd3/attachment-0001.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026412.html">[Mono-dev] Mono performance benchmark results
</A></li>
	<LI>Next message: <A HREF="026398.html">[Mono-dev] [PATCH] Perform bounds check on table decode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26397">[ date ]</a>
              <a href="thread.html#26397">[ thread ]</a>
              <a href="subject.html#26397">[ subject ]</a>
              <a href="author.html#26397">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
