<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Refactoring of WebClient
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Refactoring%20of%20WebClient&In-Reply-To=DA63C6E8B207E748B20D46DFED7B772D049E9E58%40dhost002-45.dex002.intermedia.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026168.html">
   <LINK REL="Next"  HREF="026173.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Refactoring of WebClient</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Refactoring%20of%20WebClient&In-Reply-To=DA63C6E8B207E748B20D46DFED7B772D049E9E58%40dhost002-45.dex002.intermedia.net"
       TITLE="[Mono-dev] [PATCH] Refactoring of WebClient">miguel at novell.com
       </A><BR>
    <I>Tue Dec 18 12:44:02 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="026168.html">[Mono-dev]   [PATCH] Refactoring of WebClient
</A></li>
        <LI>Next message: <A HREF="026173.html">[Mono-dev] Integrating heap-shot in the new logging profiler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26179">[ date ]</a>
              <a href="thread.html#26179">[ thread ]</a>
              <a href="subject.html#26179">[ subject ]</a>
              <a href="author.html#26179">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> I did a refactoring for the WebClient class for compatibility purpose
</I>&gt;<i> (The type IntPtr is not supported in JAVA PROFILE).
</I>&gt;<i> 
</I>&gt;<i> Please review and approve.
</I>
This patch does not seem to touch on anything related to IntPtr, it
seems to depend on the compiler capturing variables (userToken for
example) and referencing variables instead of using the extra argument
to the thread to do so.

I had a mental note that we probably need to Clone the data (or at least
things like Uris) in WebClient because the async versions of these
methods just keep a reference to it, and the parent might modify the Uri
while the other thread is running.

So basically, I think that depending on captured variables here will
just exacerbate the problem (using references to objects that we really
should not be referencing) and yet, this is not an issue about IntPtr.

Please explain.

Miguel.
&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026168.html">[Mono-dev]   [PATCH] Refactoring of WebClient
</A></li>
	<LI>Next message: <A HREF="026173.html">[Mono-dev] Integrating heap-shot in the new logging profiler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26179">[ date ]</a>
              <a href="thread.html#26179">[ thread ]</a>
              <a href="subject.html#26179">[ subject ]</a>
              <a href="author.html#26179">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
