<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mono CodeDom problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono%20CodeDom%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026283.html">
   <LINK REL="Next"  HREF="026284.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mono CodeDom problem</H1>
    <B>buhochileno at gmail.com</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono%20CodeDom%20problem&In-Reply-To="
       TITLE="[Mono-dev] mono CodeDom problem">buhochileno at gmail.com
       </A><BR>
    <I>Thu Dec 20 15:31:13 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="026283.html">[Mono-dev] gtk# propertygrid question
</A></li>
        <LI>Next message: <A HREF="026284.html">[Mono-dev] mono CodeDom problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26281">[ date ]</a>
              <a href="thread.html#26281">[ thread ]</a>
              <a href="subject.html#26281">[ subject ]</a>
              <a href="author.html#26281">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Guys:

I have this code from a example of a simple code generator with CodeDom 
(from here <A HREF="http://www.15seconds.com/issue/020917.htm">http://www.15seconds.com/issue/020917.htm</A> , I list the code 
at end of the message), but with mono I only get the using and namespace 
declarations...I see in the status page of mono that the codedom is 
allmost complete, do you have some examples?

thanks

Mauricio

    using System;
    using System.CodeDom;
    using System.CodeDom.Compiler;
    using System.Reflection;
    using System.IO;
    using Microsoft.CSharp;
    using Microsoft.VisualBasic;

   namespace CodeDomPartOne
  {
   ///
   /// Summary description for Briefcase.
   ///
   public class Briefcase
   {
   //Member Variables          private string m_strFileName;      
private string m_Suffix = &quot;.cs&quot;;

   public Briefcase(string strFileName)
   {
       m_strFileName = strFileName;          }            public void 
CreateCodeDomBriefcase()
   {
    //Initialize CodeDom Variables
           //para windows
    //Stream s = File.Open(&quot;c:\\&quot; + m_strFileName + m_Suffix, 
FileMode.Create);
       //para linux
    Stream s = File.Open(&quot;&quot; + m_strFileName + m_Suffix, FileMode.Create);

           StreamWriter sw = new StreamWriter(s);
              CSharpCodeProvider cscProvider = new CSharpCodeProvider();
    ICodeGenerator cscg = cscProvider.CreateGenerator(sw);               
CodeGeneratorOptions cop = new CodeGeneratorOptions();              
    //Create Class Using Statements
    CodeSnippetCompileUnit csu1 = new CodeSnippetCompileUnit(&quot;using 
System&quot;);
    CodeSnippetCompileUnit csu2 = new CodeSnippetCompileUnit(&quot;using 
System.IO&quot;);       cscg.GenerateCodeFromCompileUnit(csu1, sw, cop);
    cscg.GenerateCodeFromCompileUnit(csu2, sw, cop);
    sw.WriteLine();
              //Create Class Namespaces
    CodeNamespace cnsCodeDom = new CodeNamespace(&quot;CodeDom&quot;);            
                            //Create Class Declaration
    CodeTypeDeclaration ctd = new CodeTypeDeclaration();
    ctd.IsClass = true;           ctd.Name = &quot;Briefcase&quot;;
    ctd.TypeAttributes = TypeAttributes.Public;
              //Create Class Member Fields       
sw.WriteLine();                   CodeMemberField cmfBriefcaseName = new 
CodeMemberField(&quot;string&quot;,&quot;m_BriefcaseName&quot;);
    cmfBriefcaseName.Attributes = 
MemberAttributes.Private;                   
ctd.Members.Add(cmfBriefcaseName);                         
CodeMemberField cmfBriefcaseTitle = new CodeMemberField(&quot;string&quot;, 
&quot;m_BriefcaseTitle&quot;);
    cmfBriefcaseTitle.Attributes = MemberAttributes.Private;
    ctd.Members.Add(cmfBriefcaseTitle);                                 
CodeMemberField cmfBriefcaseID = new CodeMemberField(&quot;int&quot;, 
&quot;m_cmfBriefcaseID&quot;);
    cmfBriefcaseID.Attributes = MemberAttributes.Private;               
ctd.Members.Add(cmfBriefcaseID);

    CodeMemberField cmfBriefcaseSectionID = new CodeMemberField(&quot;int&quot;, 
&quot;m_BriefcaseSectionID&quot;);
    cmfBriefcaseSectionID.Attributes = MemberAttributes.Private;       
ctd.Members.Add(cmfBriefcaseSectionID);

    CodeMemberField cmfBriefcaseFolderID = new CodeMemberField(&quot;int&quot;, 
&quot;m_BriefcaseFolderID&quot;);
    cmfBriefcaseFolderID.Attributes = MemberAttributes.Private;
    ctd.Members.Add(cmfBriefcaseFolderID);

    CodeMemberField cmfBriefcaseItemID = new CodeMemberField(&quot;int&quot;, 
&quot;m_BriefcaseItemID&quot;);
    cmfBriefcaseItemID.Attributes = MemberAttributes.Private;
    ctd.Members.Add(cmfBriefcaseItemID);                  
    //Create Class Constructor                   CodeConstructor ccon = 
new CodeConstructor();
    ccon.Attributes = MemberAttributes.Public;
    ccon.Statements.Add(new CodeSnippetStatement(&quot;//&quot;));
    ccon.Statements.Add(new CodeSnippetStatement(&quot;// TODO: Add 
constructor logic here&quot;));
    ccon.Statements.Add(new CodeSnippetStatement(&quot;//&quot;));                
      ctd.Members.Add(ccon);                      
    //Create Class BriefcaseName Property
    CodeMemberProperty mpBriefcaseName = new CodeMemberProperty();
    mpBriefcaseName.Attributes = MemberAttributes.Private;
    mpBriefcaseName.Type = new CodeTypeReference(&quot;string&quot;);
    mpBriefcaseName.Name = &quot;BriefcaseName&quot;;                   
mpBriefcaseName.HasGet = true;               
mpBriefcaseName.GetStatements.Add(new CodeSnippetExpression(&quot;return 
m_BriefcaseName&quot;));
    mpBriefcaseName.HasSet = true;
    mpBriefcaseName.SetStatements.Add(new 
CodeSnippetExpression(&quot;m_BriefcaseName = value&quot;));
    ctd.Members.Add(mpBriefcaseName);                         //Create 
Class BriefcaseTitle Property
    CodeMemberProperty mpBriefcaseTitle = new CodeMemberProperty();
    mpBriefcaseTitle.Attributes = MemberAttributes.Private;
    mpBriefcaseTitle.Type = new CodeTypeReference(&quot;string&quot;);
    mpBriefcaseTitle.Name = &quot;BriefcaseTitle&quot;;               
mpBriefcaseTitle.HasGet = true;
     mpBriefcaseTitle.GetStatements.Add(new 
CodeSnippetExpression(&quot;return m_BriefcaseTitle&quot;));
     mpBriefcaseTitle.HasSet = true;
     mpBriefcaseTitle.SetStatements.Add(new 
CodeSnippetExpression(&quot;m_BriefcaseTitle = value&quot;));
     ctd.Members.Add(mpBriefcaseTitle);

     //Create Class BriefcaseID Property
     CodeMemberProperty mpBriefcaseID = new CodeMemberProperty();
     mpBriefcaseID.Attributes = MemberAttributes.Private;
     mpBriefcaseID.Type = new CodeTypeReference(&quot;int&quot;);
     mpBriefcaseID.Name = &quot;BriefcaseID&quot;;            mpBriefcaseID.HasGet 
= true;
     mpBriefcaseID.GetStatements.Add(new 
CodeSnippetExpression(&quot;m_BriefcaseID&quot;));
     mpBriefcaseID.HasSet = true;
     mpBriefcaseID.SetStatements.Add(new 
CodeSnippetExpression(&quot;m_BriefcaseID = value&quot;));
     ctd.Members.Add(mpBriefcaseID);

     //Create Class BriefcaseSection Property
     CodeMemberProperty mpBriefcaseSection = new CodeMemberProperty();
     mpBriefcaseSection.Attributes = MemberAttributes.Private;
     mpBriefcaseSection.Type = new CodeTypeReference(&quot;int&quot;);
     mpBriefcaseSection.Name = &quot;BriefcaseSection&quot;;                    
mpBriefcaseSection.HasGet = true;
     mpBriefcaseSection.GetStatements.Add(new CodeSnippetExpression
         (&quot;return m_BriefcaseSectionID&quot;));
     mpBriefcaseSection.HasSet = true;
     mpBriefcaseSection.SetStatements.Add(new CodeSnippetExpression
         (&quot;m_BriefcaseSectionID = value&quot;));
     ctd.Members.Add(mpBriefcaseSection);

     //Create Class BriefcaseFolder Property
     CodeMemberProperty mpBriefcaseFolder = new CodeMemberProperty();
     mpBriefcaseFolder.Attributes = MemberAttributes.Private;
     mpBriefcaseFolder.Type = new CodeTypeReference(&quot;int&quot;);
     mpBriefcaseFolder.Name = &quot;BriefcaseFolder&quot;;                
mpBriefcaseFolder.HasGet = true;
     mpBriefcaseFolder.GetStatements.Add(new 
CodeSnippetExpression(&quot;return m_BriefcaseFlderID&quot;));
     mpBriefcaseFolder.HasSet = true;
     mpBriefcaseFolder.SetStatements.Add(new 
CodeSnippetExpression(&quot;m_BriefcaseFolderID = value&quot;));
     ctd.Members.Add(mpBriefcaseFolder);

     //Create Class BriefcaseItem Property
     CodeMemberProperty mpBriefcaseItem = new CodeMemberProperty();
     mpBriefcaseItem.Attributes = MemberAttributes.Private;
     mpBriefcaseItem.Type = new CodeTypeReference(&quot;string&quot;);
     mpBriefcaseItem.Name = &quot;BriefcaseItem&quot;;            
mpBriefcaseItem.HasGet = true;
     mpBriefcaseItem.GetStatements.Add(new CodeSnippetExpression(&quot;return 
m_BriefcaseItemID&quot;));
     mpBriefcaseItem.HasSet = true;
     mpBriefcaseItem.SetStatements.Add(new 
CodeSnippetExpression(&quot;m_BriefcaseItemID = value&quot;));
     ctd.Members.Add(mpBriefcaseItem);          
     //Create Class GetBriefcaseName Method
     CodeMemberMethod mtd1 = new CodeMemberMethod();
     mtd1.Name = &quot;GetBriefcaseName&quot;;
     mtd1.ReturnType = new CodeTypeReference(&quot;String&quot;);
     mtd1.Attributes = MemberAttributes.Public;
     mtd1.Statements.Add(new CodeSnippetStatement(&quot;return 
BriefcaseName;&quot;));
     ctd.Members.Add(mtd1);
           //Create Class GetBriefcaseTitle Method
     CodeMemberMethod mtd2 = new CodeMemberMethod();
     mtd2.Name = &quot;GetBriefcaseTitle&quot;;
     mtd2.ReturnType = new CodeTypeReference(&quot;String&quot;);
     mtd2.Attributes = MemberAttributes.Public;
     mtd2.Statements.Add(new CodeSnippetStatement(&quot;return 
BriefcaseTitle;&quot;));
     ctd.Members.Add(mtd2);

     //Create Class GetBriefcaseID Method
     CodeMemberMethod mtd3 = new CodeMemberMethod();
     mtd3.Name = &quot;GetBriefcaseID&quot;;
     mtd3.ReturnType = new CodeTypeReference(&quot;Int&quot;);
     mtd3.Attributes = MemberAttributes.Public;
     mtd3.Statements.Add(new CodeSnippetStatement(&quot;return BriefcaseID;&quot;));
     ctd.Members.Add(mtd3);

     //Create Class GetBriefcaseSection Method
     CodeMemberMethod mtd4 = new CodeMemberMethod();
     mtd4.Name = &quot;GetBriefcaseSectionID&quot;;
     mtd4.ReturnType = new CodeTypeReference(&quot;Int&quot;);
     mtd4.Attributes = MemberAttributes.Public;
     mtd4.Statements.Add(new CodeSnippetStatement(&quot;return 
BriefcaseSectionID;&quot;));
     ctd.Members.Add(mtd4);

     //Create Class GetBriefcaseFolder Method
     CodeMemberMethod mtd5 = new CodeMemberMethod();
     mtd5.Name = &quot;GetBriefcaseFolderID&quot;;
     mtd5.ReturnType = new CodeTypeReference(&quot;Int&quot;);
     mtd5.Attributes = MemberAttributes.Public;
     mtd5.Statements.Add(new CodeSnippetStatement(&quot;return 
BriefcaseFolderID;&quot;));
     ctd.Members.Add(mtd5);

     //Create Class GetBriefcaseItem Method
     CodeMemberMethod mtd6 = new CodeMemberMethod();
     mtd6.Name = &quot;GetBriefcaseItemID&quot;;                mtd6.ReturnType = 
new CodeTypeReference(&quot;Int&quot;);
     mtd6.Attributes = MemberAttributes.Public;
     mtd6.Statements.Add(new CodeSnippetStatement(&quot;return 
BriefcaseItemID;&quot;));
     ctd.Members.Add(mtd6);
     //Generate Source Code File
     cscg.GenerateCodeFromNamespace(cnsCodeDom, sw, cop);

     //Close StreamWriter
     sw.Close();
     s.Close();
 }
}
}



namespace CodeDomPartOne
{
   class MainClass
   {
       public static void Main(string[] args)
       {
           Console.WriteLine(&quot;Hello CodeDom&quot;);
           Briefcase myBriefCase = new Briefcase(&quot;generado&quot;);
           myBriefCase.CreateCodeDomBriefcase();
           for(;;){}
                     }
   }
}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026283.html">[Mono-dev] gtk# propertygrid question
</A></li>
	<LI>Next message: <A HREF="026284.html">[Mono-dev] mono CodeDom problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26281">[ date ]</a>
              <a href="thread.html#26281">[ thread ]</a>
              <a href="subject.html#26281">[ subject ]</a>
              <a href="author.html#26281">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
