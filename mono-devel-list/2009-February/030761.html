<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Generic Variance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Generic%20Variance&In-Reply-To=8cca42d80902020450k68453186o485fa50141d26f6a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030760.html">
   <LINK REL="Next"  HREF="030762.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Generic Variance</H1>
    <B>lunchtimemama at gmail.com</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Generic%20Variance&In-Reply-To=8cca42d80902020450k68453186o485fa50141d26f6a%40mail.gmail.com"
       TITLE="[Mono-dev] Generic Variance">lunchtimemama at gmail.com
       </A><BR>
    <I>Mon Feb  2 08:54:21 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="030760.html">[Mono-dev] Generic Variance
</A></li>
        <LI>Next message: <A HREF="030762.html">[Mono-dev] Generic Variance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30761">[ date ]</a>
              <a href="thread.html#30761">[ thread ]</a>
              <a href="subject.html#30761">[ subject ]</a>
              <a href="author.html#30761">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> 1)mono_class_has_variant_generic_params (MonoClass *klass)
</I>&gt;<i> Don't move functions around together with patches that add functionality.  
</I>Cleanups, when justifiable, are ok but must
&gt;<i> be done on a separate refactoring only patch. On this case, please just  
</I>add a forward declaration on the top.

Will do

&gt;<i> 2)mono_class_is_assignable_from
</I>&gt;<i> Don't do unneeded changes to existing conditions that just make your  
</I>patch harder to read. By merging the two conditions your
&gt;<i> patch got huge for no reason at all. Please revert this change so the  
</I>patch is smaller.

The chunk of code was extracted into the mono_class_is_variant_of method  
because it is also needed in mono_class_interface_offset. Duplicating the  
code in both places would just cause problems in the long-run.

&gt;<i> 3)mono_class_interface_offset
</I>&gt;<i> This function is used to define layout of classes, vtables and the such.  
</I>You patch lacks neither a proper Changelog notice on why this change is  
needed or tests that evidence it.

Tests are a bit of a chicken-and-egg problem. They can't be written in C#  
until it has variance support (there is a patch for that on the list which  
Marek is handling), and the C# patch has tests which require these VM  
changes. I _could_ write a test in IL, but that would take me a while. The  
changes to mono_class_interface_offset look for a legal variant of the  
supplied interface if nothing was found with the binary search. How  
specific do you want me to be in the ChangeLog?

I'll have a new patch soon. Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090202/1b9894b2/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090202/1b9894b2/attachment-0001.html</A> 
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030760.html">[Mono-dev] Generic Variance
</A></li>
	<LI>Next message: <A HREF="030762.html">[Mono-dev] Generic Variance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30761">[ date ]</a>
              <a href="thread.html#30761">[ thread ]</a>
              <a href="subject.html#30761">[ subject ]</a>
              <a href="author.html#30761">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
