<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] unixOdbc System.Data.Obdc and Output parameters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20unixOdbc%20System.Data.Obdc%20and%20Output%20parameters&In-Reply-To=601572.6772.qm%40web30807.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031039.html">
   <LINK REL="Next"  HREF="031042.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] unixOdbc System.Data.Obdc and Output parameters</H1>
    <B>Bartolomeo Nicolotti</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20unixOdbc%20System.Data.Obdc%20and%20Output%20parameters&In-Reply-To=601572.6772.qm%40web30807.mail.mud.yahoo.com"
       TITLE="[Mono-dev] unixOdbc System.Data.Obdc and Output parameters">bnicolotti at siapcn.it
       </A><BR>
    <I>Fri Feb 13 13:16:45 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="031039.html">[Mono-dev] unixOdbc System.Data.Obdc and Output parameters
</A></li>
        <LI>Next message: <A HREF="031042.html">[Mono-dev] unixOdbc System.Data.Obdc and Output parameters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31040">[ date ]</a>
              <a href="thread.html#31040">[ thread ]</a>
              <a href="subject.html#31040">[ subject ]</a>
              <a href="author.html#31040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
With this code:

				string comandoAS2=&quot;{CALL GIANLUCA.provacs( ? )}&quot;;
				OdbcCommand command2 = conn.CreateCommand();
				command2.CommandText= comandoAS2;
				command2.CommandType=CommandType.StoredProcedure;

				OdbcParameter param1 = command2.Parameters.Add(&quot;@PAR1&quot;, OdbcType.Char,
2);
				param1.Direction= ParameterDirection.InputOutput;
				param1.Value=&quot;AA&quot;;
				
				System.Console.WriteLine(&quot;Eseguo:&quot;+comandoAS2);
				command2.ExecuteNonQuery();

and this OdbcCommand.Prepare:

		void Prepare()
		{
			System.Console.WriteLine(&quot;OdbcCommand.Prepare: begins!&quot;);
			ReAllocStatment ();
			
			OdbcReturn ret;

			System.Console.WriteLine(&quot;OdbcCommand.Prepare: Just before
libodbc.SQLPrepare&quot;);
			ret = libodbc.SQLPrepare(hstmt, CommandText, CommandText.Length);
			System.Console.WriteLine(&quot;OdbcCommand.Prepare: Just after
libodbc.SQLPrepare&quot;);

			if ((ret!=OdbcReturn.Success) &amp;&amp; (ret!=OdbcReturn.SuccessWithInfo)){
				System.Console.WriteLine(&quot;OdbcCommand.Prepare: Throwing
connection.CreateOdbcException&quot;);
				throw connection.CreateOdbcException (OdbcHandleType.Stmt, hstmt);
			}
			prepared = true;
			System.Console.WriteLine(&quot;OdbcCommand.Prepare: ends!&quot;);
		}

when running I get:

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">siap at LxPC54</A>:~/dwn/src/test$ mono helloODBCCommand.exe Dunkel siapbn siapbn75
GIANLUCA
Hello, Dunkel
Eseguo:CALL QGPL.WBC022(9)
ExecuteNonQuery
ExecSQL.Parameters.Count:0
ExecSQL not prepared || Parameters.Count &gt;0 
Eseguo:{CALL GIANLUCA.provacs( ? )}
ExecuteNonQuery
ExecSQL.Parameters.Count:1
Just before Prepare
OdbcCommand.Prepare: begins!
OdbcCommand.Prepare: Just before libodbc.SQLPrepare
OdbcCommand.Prepare: Just after libodbc.SQLPrepare
OdbcCommand.Prepare: Throwing connection.CreateOdbcException
System.Data.Odbc.OdbcException: ERROR [42S02] [unixODBC][IBM][iSeries Access
ODBC Driver][DB2 UDB]SQL0204 - PROVACS in GIANLUCA di tipo *N non trovato.
  at System.Data.Odbc.OdbcCommand.Prepare () [0x00000] 
  at (wrapper remoting-invoke-with-check)
System.Data.Odbc.OdbcCommand:Prepare ()
  at System.Data.Odbc.OdbcCommand.ExecSQL (System.String sql) [0x00000] 
  at System.Data.Odbc.OdbcCommand.ExecuteNonQuery (Boolean freeHandle)
[0x00000] 
  at System.Data.Odbc.OdbcCommand.ExecuteNonQuery () [0x00000] 
  at (wrapper remoting-invoke-with-check)
System.Data.Odbc.OdbcCommand:ExecuteNonQuery ()
  at helloODBC.Main (System.String[] args) [0x00000] 

The message means that libodbc.SQLPrepare searches for a no parameters
PROVACS stored procedure

If I use

string comandoAS2=&quot;{CALL GIANLUCA.provacs( 'AA' )}&quot;;

the program is executed correctly


Daniel Morgan-3 wrote:
&gt;<i> 
</I>&gt;<i> Did you forget the curly braces surrounding the call?
</I>&gt;<i> 
</I>&gt;<i> cmd.CommandText = &quot;{? = call usp_TestParameters (?, ?)}&quot;;
</I>&gt;<i> 
</I>&gt;<i> You also have to manually add your own parameters.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --- On Fri, 2/13/09, Bartolomeo Nicolotti &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bnicolotti at siapcn.it</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> From: Bartolomeo Nicolotti &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bnicolotti at siapcn.it</A>&gt;
</I>&gt;&gt;<i> Subject: Re: [Mono-dev] unixOdbc System.Data.Obdc and Output parameters
</I>&gt;&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> Date: Friday, February 13, 2009, 11:46 AM
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> yes, I'm trying that way, adding some debugging
</I>&gt;&gt;<i> System.Console.WriteLine in
</I>&gt;&gt;<i> the OdbcCommand.cs and I got:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">siap at LxPC54</A>:~/dwn/src/test$ mono helloODBCCommand.exe 
</I>&gt;&gt;<i> Hello, Dunkel
</I>&gt;&gt;<i> Eseguo:CALL QGPL.WBC022(9)
</I>&gt;&gt;<i> ExecuteNonQuery
</I>&gt;&gt;<i> ExecSQL.Parameters.Count:0
</I>&gt;&gt;<i> ExecSQL not prepared || Parameters.Count &gt;0 
</I>&gt;&gt;<i> Eseguo:CALL GIANLUCA.PROVACS(?)
</I>&gt;&gt;<i> ExecuteNonQuery
</I>&gt;&gt;<i> ExecSQL.Parameters.Count:1
</I>&gt;&gt;<i> Just before Prepare
</I>&gt;&gt;<i> OdbcCommand.Prepare: begins!
</I>&gt;&gt;<i> OdbcCommand.Prepare: Just before libodbc.SQLPrepare
</I>&gt;&gt;<i> OdbcCommand.Prepare: Just after libodbc.SQLPrepare
</I>&gt;&gt;<i> OdbcCommand.Prepare: Throwing
</I>&gt;&gt;<i> connection.CreateOdbcException
</I>&gt;&gt;<i> System.Data.Odbc.OdbcException: ERROR [42S02]
</I>&gt;&gt;<i> [unixODBC][IBM][iSeries Access
</I>&gt;&gt;<i> ODBC Driver][DB2 UDB]SQL7967 - PREPARAZIONE
</I>&gt;&gt;<i> dell'istruzione
</I>&gt;&gt;<i> QZ905CB2A97A726000 completata.
</I>&gt;&gt;<i>   at System.Data.Odbc.OdbcCommand.Prepare () [0x00000] 
</I>&gt;&gt;<i>   at (wrapper remoting-invoke-with-check)
</I>&gt;&gt;<i> System.Data.Odbc.OdbcCommand:Prepare ()
</I>&gt;&gt;<i>   at System.Data.Odbc.OdbcCommand.ExecSQL (System.String
</I>&gt;&gt;<i> sql) [0x00000] 
</I>&gt;&gt;<i>   at System.Data.Odbc.OdbcCommand.ExecuteNonQuery (Boolean
</I>&gt;&gt;<i> freeHandle)
</I>&gt;&gt;<i> [0x00000] 
</I>&gt;&gt;<i>   at System.Data.Odbc.OdbcCommand.ExecuteNonQuery ()
</I>&gt;&gt;<i> [0x00000] 
</I>&gt;&gt;<i>   at (wrapper remoting-invoke-with-check)
</I>&gt;&gt;<i> System.Data.Odbc.OdbcCommand:ExecuteNonQuery ()
</I>&gt;&gt;<i>   at helloODBC.Main (System.String[] args) [0x00000] 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> the message :
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> PREPARAZIONE dell'istruzione QZ905CB2A97A726000
</I>&gt;&gt;<i> completata
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> translated in English is:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> PREPARING of instruction QZ905CB2A97A726000 completed
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> really strange ... the exception is thrown in
</I>&gt;&gt;<i> OdbcCommand.cs, with some
</I>&gt;&gt;<i> debug WriteLine:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 		void Prepare()
</I>&gt;&gt;<i> 		{
</I>&gt;&gt;<i> 			System.Console.WriteLine(&quot;OdbcCommand.Prepare:
</I>&gt;&gt;<i> begins!&quot;);
</I>&gt;&gt;<i> 			ReAllocStatment ();
</I>&gt;&gt;<i> 			
</I>&gt;&gt;<i> 			OdbcReturn ret;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 			System.Console.WriteLine(&quot;OdbcCommand.Prepare: Just
</I>&gt;&gt;<i> before
</I>&gt;&gt;<i> libodbc.SQLPrepare&quot;);
</I>&gt;&gt;<i> 			ret = libodbc.SQLPrepare(hstmt, CommandText,
</I>&gt;&gt;<i> CommandText.Length);
</I>&gt;&gt;<i> 			System.Console.WriteLine(&quot;OdbcCommand.Prepare: Just
</I>&gt;&gt;<i> after
</I>&gt;&gt;<i> libodbc.SQLPrepare&quot;);
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 			if ((ret!=OdbcReturn.Success) &amp;&amp;
</I>&gt;&gt;<i> (ret!=OdbcReturn.SuccessWithInfo)){
</I>&gt;&gt;<i> 				System.Console.WriteLine(&quot;OdbcCommand.Prepare:
</I>&gt;&gt;<i> Throwing
</I>&gt;&gt;<i> connection.CreateOdbcException&quot;);
</I>&gt;&gt;<i> 				throw connection.CreateOdbcException
</I>&gt;&gt;<i> (OdbcHandleType.Stmt, hstmt);
</I>&gt;&gt;<i> 			}
</I>&gt;&gt;<i> 			prepared = true;
</I>&gt;&gt;<i> 			System.Console.WriteLine(&quot;OdbcCommand.Prepare:
</I>&gt;&gt;<i> ends!&quot;);
</I>&gt;&gt;<i> 		}
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Daniel Morgan-3 wrote:
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; Maybe System.Data.Odbc should be modified to use the
</I>&gt;&gt;<i> ODBC call procedure
</I>&gt;&gt;<i> &gt; syntax when calling a stored procedure using the
</I>&gt;&gt;<i> CommandType of
</I>&gt;&gt;<i> &gt; StoredProcedure.
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; The ODBC call procedure syntax is enclosed with curly
</I>&gt;&gt;<i> braces.  It has the
</I>&gt;&gt;<i> &gt; keyword call, the procedure name, parentheses, and
</I>&gt;&gt;<i> commas separating the
</I>&gt;&gt;<i> &gt; parameters.  Of course, a question mark and equals
</I>&gt;&gt;<i> signs indicates a
</I>&gt;&gt;<i> &gt; return parameter.
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; {? = call usp_TestParameters (?, ?)}
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; <A HREF="http://support.microsoft.com/kb/310130">http://support.microsoft.com/kb/310130</A>
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; --- On Fri, 2/13/09, Bartolomeo Nicolotti
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bnicolotti at siapcn.it</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt;&gt; From: Bartolomeo Nicolotti
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bnicolotti at siapcn.it</A>&gt;
</I>&gt;&gt;<i> &gt;&gt; Subject: [Mono-dev]  unixOdbc System.Data.Obdc and
</I>&gt;&gt;<i> Output parameters
</I>&gt;&gt;<i> &gt;&gt; To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> &gt;&gt; Date: Friday, February 13, 2009, 9:24 AM
</I>&gt;&gt;<i> &gt;&gt; Hi,
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; I'm trying unixodbc with System.Data.ODBC
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; I can do select, see this file 
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://www.nabble.com/file/p21997273/helloODBC.cs">http://www.nabble.com/file/p21997273/helloODBC.cs</A>
</I>&gt;&gt;<i> &gt;&gt; helloODBC.cs , but I've
</I>&gt;&gt;<i> &gt;&gt; some problems with out parameters of stored
</I>&gt;&gt;<i> procedueres.
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; With this file 
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> <A HREF="http://www.nabble.com/file/p21997273/helloODBCCommand.cs">http://www.nabble.com/file/p21997273/helloODBCCommand.cs</A>
</I>&gt;&gt;<i> &gt;&gt; helloODBCCommand.cs  I get:
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; Hello, Dunkel
</I>&gt;&gt;<i> &gt;&gt; Eseguo:CALL QGPL.WBC022(9)
</I>&gt;&gt;<i> &gt;&gt; Eseguo:CALL GIANLUCA.PROVACS
</I>&gt;&gt;<i> &gt;&gt; System.Data.Odbc.OdbcException: ERROR [42000]
</I>&gt;&gt;<i> &gt;&gt; [unixODBC][IBM][iSeries Access
</I>&gt;&gt;<i> &gt;&gt; ODBC Driver][DB2 UDB]SQL0104 - Token GIANLUCA non
</I>&gt;&gt;<i> valido.
</I>&gt;&gt;<i> &gt;&gt; Token validi: (
</I>&gt;&gt;<i> &gt;&gt; END GET SET CALL DROP FREE HOLD LOCK OPEN WITH
</I>&gt;&gt;<i> ALTER.
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; It seems that setting the CommandType to
</I>&gt;&gt;<i> StoredProcedure
</I>&gt;&gt;<i> &gt;&gt; has no effect, as
</I>&gt;&gt;<i> &gt;&gt; one can also see from the source of mono (I've
</I>&gt;&gt;<i> &gt;&gt; installed mono from source)
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> /home/siap/dwn/src/mono/mono-2.2/mcs/class/System.Data/System.Data.Odbc/OdbcCommand
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; the ExecuteNonQuery member function call ExecSQL
</I>&gt;&gt;<i> that
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; private int ExecuteNonQuery (bool freeHandle) 
</I>&gt;&gt;<i> &gt;&gt; 		{
</I>&gt;&gt;<i> &gt;&gt; ...
</I>&gt;&gt;<i> &gt;&gt; 			ExecSQL(CommandText);
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; ExecSQL is:
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; 		private void ExecSQL (string sql)
</I>&gt;&gt;<i> &gt;&gt; 		{
</I>&gt;&gt;<i> &gt;&gt; 			OdbcReturn ret;
</I>&gt;&gt;<i> &gt;&gt; 			if (! prepared &amp;&amp; Parameters.Count
</I>&gt;&gt;<i> &lt;= 0) {
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; 				ReAllocStatment ();
</I>&gt;&gt;<i> &gt;&gt; 				
</I>&gt;&gt;<i> &gt;&gt; 				ret = libodbc.SQLExecDirect (hstmt, sql,
</I>&gt;&gt;<i> &gt;&gt; libodbc.SQL_NTS);
</I>&gt;&gt;<i> &gt;&gt; 				if ((ret != OdbcReturn.Success) &amp;&amp;
</I>&gt;&gt;<i> (ret !=
</I>&gt;&gt;<i> &gt;&gt; OdbcReturn.SuccessWithInfo)
</I>&gt;&gt;<i> &gt;&gt; &amp;&amp;
</I>&gt;&gt;<i> &gt;&gt; 				    (ret != OdbcReturn.NoData))
</I>&gt;&gt;<i> &gt;&gt; 					throw connection.CreateOdbcException
</I>&gt;&gt;<i> &gt;&gt; (OdbcHandleType.Stmt, hstmt);
</I>&gt;&gt;<i> &gt;&gt; 				return;
</I>&gt;&gt;<i> &gt;&gt; 			}
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; 			if (!prepared)
</I>&gt;&gt;<i> &gt;&gt; 				Prepare();
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; 			BindParameters ();
</I>&gt;&gt;<i> &gt;&gt; 			ret = libodbc.SQLExecute (hstmt);
</I>&gt;&gt;<i> &gt;&gt; 			if (ret != OdbcReturn.Success &amp;&amp; ret !=
</I>&gt;&gt;<i> &gt;&gt; OdbcReturn.SuccessWithInfo)
</I>&gt;&gt;<i> &gt;&gt; 				throw connection.CreateOdbcException
</I>&gt;&gt;<i> &gt;&gt; (OdbcHandleType.Stmt, hstmt);
</I>&gt;&gt;<i> &gt;&gt; 		}
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; Should I use prepared to BindParameters?
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; How can I get the output parameter of a Stored
</I>&gt;&gt;<i> Procedure?
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; Many thanks
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; Best regards
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; Bartolomeo Nicolotti wrote:
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; Da: 	Daniel Morgan
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monodanmorg at yahoo.com</A>&gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; Have you considered using ODBC provider
</I>&gt;&gt;<i> instead?
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; System.Data.Odbc namespace is included in
</I>&gt;&gt;<i> System.Data
</I>&gt;&gt;<i> &gt;&gt; assembly.
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; You can use iodbc or unixodbc on linux. 
</I>&gt;&gt;<i> There's
</I>&gt;&gt;<i> &gt;&gt; commercial odbc solutions
</I>&gt;&gt;<i> &gt;&gt; &gt; for linux too.
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; <A HREF="http://mono-project.com/ODBC">http://mono-project.com/ODBC</A>
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; <A HREF="http://www.unixodbc.com/doc/db2.html">http://www.unixodbc.com/doc/db2.html</A>
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; Novell maintains System.Data.Odbc; however, I
</I>&gt;&gt;<i> do not
</I>&gt;&gt;<i> &gt;&gt; think anyone is
</I>&gt;&gt;<i> &gt;&gt; &gt; maintaining IBM.Data.DB2 in Mono.
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; --- On Wed, 2/11/09, Bartolomeo Nicolotti
</I>&gt;&gt;<i> &gt;&gt; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bnicolotti at siapcn.it</A>&gt; wrote:
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; Bartolomeo Nicolotti wrote:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; IBM.Data.DB2.DB2Exception: Unable to
</I>&gt;&gt;<i> allocate
</I>&gt;&gt;<i> &gt;&gt; statement handle
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; by Bartolomeo Nicolotti :: Rate this
</I>&gt;&gt;<i> Message:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Reply | Reply to Author | View Threaded |
</I>&gt;&gt;<i> Show
</I>&gt;&gt;<i> &gt;&gt; Only this Message
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Hello,
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; I've installed mono, and xsp (not yet
</I>&gt;&gt;<i> &gt;&gt; mod_mono) on ubuntu following the
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; instruction here:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;<i> <A HREF="http://ubuntuforums.org/showthread.php?t=803743">http://ubuntuforums.org/showthread.php?t=803743</A>
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; in view of using mod_mono together with
</I>&gt;&gt;<i> php on
</I>&gt;&gt;<i> &gt;&gt; ubuntu server 8.04, to
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; migrate a web service that access a
</I>&gt;&gt;<i> db2/as400
</I>&gt;&gt;<i> &gt;&gt; database.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; I've also installed db2exc from
</I>&gt;&gt;<i> ubuntu
</I>&gt;&gt;<i> &gt;&gt; repository as said here:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; <A HREF="http://www.ubuntu.com/partners/ibm/db2">http://www.ubuntu.com/partners/ibm/db2</A>
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; I can compile a test program that does a
</I>&gt;&gt;<i> query to
</I>&gt;&gt;<i> &gt;&gt; the db:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> <A HREF="http://www.nabble.com/file/p21953488/helloDB2.cs">http://www.nabble.com/file/p21953488/helloDB2.cs</A>
</I>&gt;&gt;<i> &gt;&gt; helloDB2.cs 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">siap at LxPC54</A>:~/src/test$ gmcs
</I>&gt;&gt;<i> &gt;&gt; -r:/usr/lib/mono/1.0/IBM.Data.DB2.dll
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; -r:/usr/lib/mono/2.0/System.Data.dll
</I>&gt;&gt;<i> helloDB2.cs
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; but when I execute it:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">siap at LxPC54</A>:~/src/test$ sudo
</I>&gt;&gt;<i> MONO_LOG_LEVEL=debug
</I>&gt;&gt;<i> &gt;&gt; mono helloDB2.exe bart
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; ....
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Assembly Ref addref
</I>&gt;&gt;<i> System.Data
</I>&gt;&gt;<i> &gt;&gt; 0x8362e10 -&gt; System.Xml
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 0x83719d8: 2
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Hello, bart
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport attempting to load:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport loading location:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2.so'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Searching for
</I>&gt;&gt;<i> 'SQLAllocHandle'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLAllocHandle'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Found as
</I>&gt;&gt;<i> 'SQLAllocHandle'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport attempting to load:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport loading location:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2.so'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Searching for
</I>&gt;&gt;<i> 'SQLAllocHandle'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLAllocHandle'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Found as
</I>&gt;&gt;<i> 'SQLAllocHandle'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Bart
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; not useLibCli
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Bart
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; not useLibCli
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport attempting to load:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport loading location:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2.so'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Searching for
</I>&gt;&gt;<i> &gt;&gt; 'SQLDriverConnectW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLDriverConnectWW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLDriverConnectWW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLDriverConnectW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Found as
</I>&gt;&gt;<i> 'SQLDriverConnectW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport attempting to load:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport loading location:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2.so'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Searching for
</I>&gt;&gt;<i> &gt;&gt; 'SQLDriverConnectW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLDriverConnectWW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLDriverConnectWW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLDriverConnectW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Found as
</I>&gt;&gt;<i> 'SQLDriverConnectW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport attempting to load:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport loading location:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2.so'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Searching for
</I>&gt;&gt;<i> 'SQLGetInfoW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLGetInfoWW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLGetInfoWW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing 'SQLGetInfoW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Found as
</I>&gt;&gt;<i> 'SQLGetInfoW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport attempting to load:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport loading location:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2.so'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Searching for
</I>&gt;&gt;<i> 'SQLGetInfoW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLGetInfoWW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLGetInfoWW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing 'SQLGetInfoW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Found as
</I>&gt;&gt;<i> 'SQLGetInfoW'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport attempting to load:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport loading location:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2.so'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Searching for
</I>&gt;&gt;<i> 'SQLGetDiagRec'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLGetDiagRec'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Found as
</I>&gt;&gt;<i> 'SQLGetDiagRec'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport attempting to load:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: DllImport loading location:
</I>&gt;&gt;<i> &gt;&gt; 'libdb2.so'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Searching for
</I>&gt;&gt;<i> 'SQLGetDiagRec'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Probing
</I>&gt;&gt;<i> 'SQLGetDiagRec'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Mono-INFO: Found as
</I>&gt;&gt;<i> 'SQLGetDiagRec'.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Bart
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; not useLibCli
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Unhandled Exception:
</I>&gt;&gt;<i> IBM.Data.DB2.DB2Exception:
</I>&gt;&gt;<i> &gt;&gt; ERROR [08003] [IBM][CLI
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Driver] CLI0106E  Connection is closed.
</I>&gt;&gt;<i> &gt;&gt; SQLSTATE=08003
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; InternalExecuteNonQuery: Unable to
</I>&gt;&gt;<i> allocate
</I>&gt;&gt;<i> &gt;&gt; statement handle.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt;   at
</I>&gt;&gt;<i> IBM.Data.DB2.DB2Command.AllocateStatement
</I>&gt;&gt;<i> &gt;&gt; (System.String location)
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; [0x00000]
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt;   at
</I>&gt;&gt;<i> &gt;&gt; IBM.Data.DB2.DB2Command.ExecuteNonQueryInternal
</I>&gt;&gt;<i> &gt;&gt; (CommandBehavior
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; behavior) [0x00000]
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt;   at
</I>&gt;&gt;<i> IBM.Data.DB2.DB2Command.ExecuteReader
</I>&gt;&gt;<i> &gt;&gt; (CommandBehavior behavior)
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; [0x00000]
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt;   at
</I>&gt;&gt;<i> IBM.Data.DB2.DB2Command.ExecuteReader ()
</I>&gt;&gt;<i> &gt;&gt; [0x00000]
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt;   at (wrapper remoting-invoke-with-check)
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; IBM.Data.DB2.DB2Command:ExecuteReader ()
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt;   at HelloWorldDb2.Main (System.String[]
</I>&gt;&gt;<i> args)
</I>&gt;&gt;<i> &gt;&gt; [0x00000] 
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; &gt; 
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; -- 
</I>&gt;&gt;<i> &gt;&gt; View this message in context:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> <A HREF="http://www.nabble.com/IBM.Data.DB2.DB2Exception%3A-Unable-to-allocate-statement-handle-tp21953488p21997273.html">http://www.nabble.com/IBM.Data.DB2.DB2Exception%3A-Unable-to-allocate-statement-handle-tp21953488p21997273.html</A>
</I>&gt;&gt;<i> &gt;&gt; Sent from the Mono - Dev mailing list archive at
</I>&gt;&gt;<i> &gt;&gt; Nabble.com.
</I>&gt;&gt;<i> &gt;&gt; 
</I>&gt;&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;&gt;<i> &gt;&gt; Mono-devel-list mailing list
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt;       
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; Mono-devel-list mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> &gt; 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> View this message in context:
</I>&gt;&gt;<i> <A HREF="http://www.nabble.com/IBM.Data.DB2.DB2Exception%3A-Unable-to-allocate-statement-handle-tp21953488p22000241.html">http://www.nabble.com/IBM.Data.DB2.DB2Exception%3A-Unable-to-allocate-statement-handle-tp21953488p22000241.html</A>
</I>&gt;&gt;<i> Sent from the Mono - Dev mailing list archive at
</I>&gt;&gt;<i> Nabble.com.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>       
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://www.nabble.com/IBM.Data.DB2.DB2Exception%3A-Unable-to-allocate-statement-handle-tp21953488p22002053.html">http://www.nabble.com/IBM.Data.DB2.DB2Exception%3A-Unable-to-allocate-statement-handle-tp21953488p22002053.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.

</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031039.html">[Mono-dev] unixOdbc System.Data.Obdc and Output parameters
</A></li>
	<LI>Next message: <A HREF="031042.html">[Mono-dev] unixOdbc System.Data.Obdc and Output parameters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31040">[ date ]</a>
              <a href="thread.html#31040">[ thread ]</a>
              <a href="subject.html#31040">[ subject ]</a>
              <a href="author.html#31040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
