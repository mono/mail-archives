<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev]  Trouble running subversion builds in OSX
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Trouble%20running%20subversion%20builds%20in%20OSX&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030962.html">
   <LINK REL="Next"  HREF="030921.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev]  Trouble running subversion builds in OSX</H1>
    <B>David Mitchell</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Trouble%20running%20subversion%20builds%20in%20OSX&In-Reply-To="
       TITLE="[Mono-dev]  Trouble running subversion builds in OSX">dmitchell at logos.com
       </A><BR>
    <I>Mon Feb  9 14:30:28 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="030962.html">[Mono-dev] Thread shutdown hook patch
</A></li>
        <LI>Next message: <A HREF="030921.html">[Mono-dev] fix for compilation error in socket-io.c for systems that don't support IPv6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30919">[ date ]</a>
              <a href="thread.html#30919">[ thread ]</a>
              <a href="subject.html#30919">[ subject ]</a>
              <a href="author.html#30919">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I've been trying to build/run a copy of Mono from Subversion so that I can
test how some recent fixes, but the version that I've built is now crashing
hard in unrelated areas.

I'm using a Mac Pro running OS X 10.5.5, and I've reverted to revision
122917 (tagged as mono-2-2), so the code I'm running should be largely the
same as the packaged release. I'm trying to run tests for Wintellect's
PowerCollections (available at <A HREF="http://www.codeplex.com/PowerCollections">http://www.codeplex.com/PowerCollections</A>)
using version 2.4 of MbUnit (available at
<A HREF="http://code.google.com/p/mb-unit/downloads/list">http://code.google.com/p/mb-unit/downloads/list</A>).

If I use my packaged version of Mono, running MbUnit as follows:

mono /path/to/MbUnit.Cons.exe /v
/ft:Wintellect.PowerCollections.Tests.ListBaseTests UnitTests.exe

works just fine (32 tests, 32 successes, assuming that
QuickGraph.Algorithms.dll, QuickGraph.dll, TestFu.dll, and
MbUnit.Framework.dll are all available). However, if I run it in the copy
that I built, this is my output:

---

Parsed arguments:
-- Parsed Arguments
Files:
	UnitTests.exe
Assembly paths:
Report folder: 
Report Name Format: mbunit-{0}{1}
Report types:
Show reports: False
Filter Category: 
Exclude Category: 
Filter Author: 
Filter Namespace: 
Filter Type: Wintellect.PowerCollections.Tests.ListBaseTests
Verbose: True
ShadowCopyFiles: False

Start time: 11:06 AM
[info] Loading test assemblies
[info] Starting execution
[info] Sorting assemblies by dependencies
[info] Setting up fixture colors
[info] Loading UnitTests
[info] Found  32 tests
[info] Running fixtures.
[success] ListBaseTests.ReadOnlyListBase
[success] ListBaseTests.ReadWriteListBase
**
ERROR:mini-exceptions.c:770:get_exception_catch_class: assertion failed:
(mono_class_has_parent_and_ignore_generics (class, method_container_class))
Stacktrace:

  at (wrapper managed-to-native) System.Threading.Thread.Join_internal
(int,intptr) &lt;0x00004&gt;
  at (wrapper managed-to-native) System.Threading.Thread.Join_internal
(int,intptr) &lt;0xffffffff&gt;
  at System.Threading.Thread.Join (System.TimeSpan) &lt;0x00052&gt;
  at MbUnit.Core.Remoting.FixtureRunnerBase.RunFixture (MbUnit.Core.Fixture)
&lt;0x00146&gt;
  at MbUnit.Core.Remoting.DependencyFixtureRunner.RunFixtures () &lt;0x00303&gt;
  at MbUnit.Core.Remoting.FixtureRunnerBase.Run
(MbUnit.Core.Remoting.FixtureExplorer,MbUnit.Core.Reports.Serialization.ReportListener)
&lt;0x000e0&gt;
  at MbUnit.Core.Remoting.RemoteTestEngine.RunPipes () &lt;0x000a1&gt;
  at (wrapper runtime-invoke) object.runtime_invoke_void__this__
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;
  at (wrapper managed-to-native)
System.Runtime.Remoting.RemotingServices.InternalExecute
(System.Reflection.MethodBase,object,object[],object[]&amp;) &lt;0x00004&gt;
  at (wrapper managed-to-native)
System.Runtime.Remoting.RemotingServices.InternalExecute
(System.Reflection.MethodBase,object,object[],object[]&amp;) &lt;0xffffffff&gt;
  at System.Runtime.Remoting.RemotingServices.InternalExecuteMessage
(System.MarshalByRefObject,System.Runtime.Remoting.Messaging.IMethodCallMessage)
&lt;0x001ae&gt;
  at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x000c6&gt;
  at
System.Runtime.Remoting.Messaging.ServerObjectTerminatorSink.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x00060&gt;
  at System.Runtime.Remoting.Lifetime.LeaseSink.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x0002d&gt;
  at
System.Runtime.Remoting.ClientActivatedIdentity.SyncObjectProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x00073&gt;
  at
System.Runtime.Remoting.Messaging.ServerContextTerminatorSink.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x00153&gt;
  at System.Runtime.Remoting.Contexts.CrossContextChannel.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x000c4&gt;
  at System.Runtime.Remoting.Channels.ChannelServices.SyncDispatchMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x0003d&gt;
  at System.AppDomain.ProcessMessageInDomain
(byte[],System.Runtime.Remoting.Messaging.CADMethodCallMessage,byte[]&amp;,System.Runtime.Remoting.Messaging.CADMethodReturnMessage&amp;)
&lt;0x00076&gt;
  at (wrapper remoting-invoke-with-check)
System.AppDomain.ProcessMessageInDomain
(byte[],System.Runtime.Remoting.Messaging.CADMethodCallMessage,byte[]&amp;,System.Runtime.Remoting.Messaging.CADMethodReturnMessage&amp;)
&lt;0xffffffff&gt;
  at
System.Runtime.Remoting.Channels.CrossAppDomainSink.ProcessMessageInDomain
(byte[],System.Runtime.Remoting.Messaging.CADMethodCallMessage) &lt;0x00050&gt;
  at (wrapper runtime-invoke)
object.runtime_invoke_CrossAppDomainSink/ProcessMessageRes_object_object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;
  at (wrapper managed-to-native) System.Reflection.MonoMethod.InternalInvoke
(object,object[],System.Exception&amp;) &lt;0x00004&gt;
  at (wrapper managed-to-native) System.Reflection.MonoMethod.InternalInvoke
(object,object[],System.Exception&amp;) &lt;0xffffffff&gt;
  at System.AppDomain.InvokeInDomainByID
(int,System.Reflection.MethodInfo,object,object[]) &lt;0x00069&gt;
  at System.Runtime.Remoting.Channels.CrossAppDomainSink.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x000f4&gt;
  at System.Runtime.Remoting.Proxies.RemotingProxy.Invoke
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x00321&gt;
  at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke
(System.Runtime.Remoting.Proxies.RealProxy,System.Runtime.Remoting.Messaging.IMessage,System.Exception&amp;,object[]&amp;)
&lt;0x0030f&gt;
  at (wrapper runtime-invoke)
object.runtime_invoke_object_object_object_intptr_intptr
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;
  at (wrapper managed-to-native)
object.__icall_wrapper_mono_remoting_wrapper (intptr,intptr) &lt;0x00004&gt;
  at (wrapper managed-to-native)
object.__icall_wrapper_mono_remoting_wrapper (intptr,intptr) &lt;0xffffffff&gt;
  at (wrapper remoting-invoke)
MbUnit.Core.Remoting.RemoteTestEngine.RunPipes () &lt;0xffffffff&gt;
  at (wrapper xdomain-invoke) MbUnit.Core.Remoting.RemoteTestEngine.RunPipes
() &lt;0xffffffff&gt;
  at MbUnit.Core.Graph.TestDomainDependencyGraph.RunTests () &lt;0x0067f&gt;
  at MbUnit.Core.Cons.MainClass.Main () &lt;0x00276&gt;
  at MbUnit.Core.Cons.MainClass.Main (string[]) &lt;0x00166&gt;
  at MbUnit.Cons.ConsoleClass.Main (string[]) &lt;0x0004e&gt;
  at (wrapper runtime-invoke)
MbUnit.Cons.ConsoleClass.runtime_invoke_int_object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

	0   mono                                0x00081921
mono_handle_native_sigsegv + 241
	1   libSystem.B.dylib                   0x9708c09b _sigtramp + 43
	2   ???                                 0xffffffff 0x0 + 4294967295
	3   libSystem.B.dylib                   0x970778e0
pthread_cond_timedwait$UNIX2003 + 72
	4   mono                                0x00179a04
_wapi_handle_timedwait_signal_handle + 164
	5   mono                                0x001a1268 WaitForSingleObjectEx +
408
	6   mono                                0x0015d410
ves_icall_System_Threading_Thread_Join_internal + 192
	7   ???                                 0x2353ad06 0x0 + 592686342
	8   ???                                 0x2353a913 0x0 + 592685331
	9   ???                                 0x2353a1d7 0x0 + 592683479
	10  ???                                 0x235399ac 0x0 + 592681388
	11  ???                                 0x235361f1 0x0 + 592667121
	12  ???                                 0x23536032 0x0 + 592666674
	13  ???                                 0x2321a7a0 0x0 + 589408160
	14  mono                                0x00133728
mono_runtime_invoke_array + 600
	15  mono                                0x000e9716
mono_method_needs_static_rgctx_invoke + 25318
	16  ???                                 0x2325868e 0x0 + 589661838
	17  ???                                 0x232581c7 0x0 + 589660615
	18  ???                                 0x23257c0f 0x0 + 589659151
	19  ???                                 0x23257ab9 0x0 + 589658809
	20  ???                                 0x2325794e 0x0 + 589658446
	21  ???                                 0x2325767c 0x0 + 589657724
	22  ???                                 0x232575b4 0x0 + 589657524
	23  ???                                 0x23256d75 0x0 + 589655413
	24  ???                                 0x232545ae 0x0 + 589645230
	25  ???                                 0x2321bb3f 0x0 + 589413183
	26  ???                                 0x2321ba94 0x0 + 589413012
	27  ???                                 0x2321b939 0x0 + 589412665
	28  ???                                 0x2321b7ef 0x0 + 589412335
	29  mono                                0x00133728
mono_runtime_invoke_array + 600
	30  mono                                0x000e922c
mono_method_needs_static_rgctx_invoke + 24060
	31  ???                                 0x231cc02e 0x0 + 589086766
	32  ???                                 0x23242c2a 0x0 + 589573162
	33  ???                                 0x2323466d 0x0 + 589514349
	34  ???                                 0x23233f92 0x0 + 589512594
	35  ???                                 0x23233380 0x0 + 589509504
		36  ???                                 0x23232ff9 0x0 + 589508601
	37  mono                                0x0012fb57 mono_remoting_invoke +
87
	38  mono                                0x000fed21
mono_marshal_method_from_wrapper + 2273
	39  ???                                 0x232469e3 0x0 + 589588963
	40  ???                                 0x234b92d2 0x0 + 592155346
	41  ???                                 0x23245fdf 0x0 + 589586399
	42  ???                                 0x234b6b90 0x0 + 592145296
	43  ???                                 0x00793f5f 0x0 + 7946079
	44  ???                                 0x0078c867 0x0 + 7915623
	45  ???                                 0x0047e2ff 0x0 + 4711167
	46  ???                                 0x0047e20b 0x0 + 4710923
	47  mono                                0x001312b1 mono_runtime_exec_main +
385
	48  mono                                0x00135543 mono_runtime_run_main +
339
	49  mono                                0x000662e3 mono_main + 6083
	50  mono                                0x00001b26 start + 54

Debug info from gdb:


=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================


Debug info from gdb:


=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

---

For reference, here is the output of mono --version for the copy I built:

Mono JIT compiler version 2.3 (/trunk/mono r122917 Mon Feb  9 09:40:17 PST
2009)
Copyright (C) 2002-2008 Novell, Inc and Contributors. www.mono-project.com
	TLS:           normal
	GC:            Included Boehm (with typed GC)
	SIGSEGV:       normal
	Notification:  Thread + polling
	Architecture:  x86
	Disabled:      none

and here it is for my packaged version:

Mono JIT compiler version 2.2 (tarball Fri Jan  9 10:45:07 MST 2009)
Copyright (C) 2002-2008 Novell, Inc and Contributors. www.mono-project.com
	TLS:           normal
	GC:            Included Boehm (with typed GC)
	SIGSEGV:       normal
	Notification:  Thread + polling
	Architecture:  x86
	Disabled:      none

Does anyone know what I might be doing wrong or how I might correct the
issues that I'm experiencing? Is there any additional information that I can
supply that might be of use?

Thanks,
--Dave
-- 
View this message in context: <A HREF="http://www.nabble.com/Trouble-running-subversion-builds-in-OSX-tp21919017p21919017.html">http://www.nabble.com/Trouble-running-subversion-builds-in-OSX-tp21919017p21919017.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.

</PRE>

















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030962.html">[Mono-dev] Thread shutdown hook patch
</A></li>
	<LI>Next message: <A HREF="030921.html">[Mono-dev] fix for compilation error in socket-io.c for systems that don't support IPv6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30919">[ date ]</a>
              <a href="thread.html#30919">[ thread ]</a>
              <a href="subject.html#30919">[ subject ]</a>
              <a href="author.html#30919">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
