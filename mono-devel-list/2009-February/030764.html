<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Enable TLS for PPC32/64
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Enable%20TLS%20for%20PPC32/64&In-Reply-To=1233164810.17601.18.camel%40spokane1.rchland.ibm.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030827.html">
   <LINK REL="Next"  HREF="031213.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Enable TLS for PPC32/64</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Enable%20TLS%20for%20PPC32/64&In-Reply-To=1233164810.17601.18.camel%40spokane1.rchland.ibm.com"
       TITLE="[Mono-dev] [PATCH] Enable TLS for PPC32/64">lupus at ximian.com
       </A><BR>
    <I>Mon Feb  2 09:53:48 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="030827.html">[Mono-dev] signal.c cross-thread access
</A></li>
        <LI>Next message: <A HREF="031213.html">[Mono-dev] [PATCH] Enable TLS for PPC32/64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30764">[ date ]</a>
              <a href="thread.html#30764">[ thread ]</a>
              <a href="subject.html#30764">[ subject ]</a>
              <a href="author.html#30764">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/28/09 Steven Munroe wrote:
&gt;<i> if there WAS a problem will some chip in the past we address that
</I>&gt;<i> separately. But this changes are important to the server class machines
</I>&gt;<i> and I have carefully crafted this patch to only optimize for the case
</I>&gt;<i> where we know (from the auxv) what the hardware actually is.
</I>&gt;<i> 
</I>&gt;<i> Don't penalize the latest hardware for the sins of the a chip that no
</I>&gt;<i> one makes any more...
</I>
You're asking us to accept a possibly risky change without providing any
numbers on the benefits (which is what I requested in my mail).
Right now the only numbers I have are this: when profiling mono on ppc I
have never seen the icache flush function appear anywhere near the first
few pages of hot code. As you say the change is &quot;important&quot; you won't
have any difficulty in providing hard numbers and system information
where mono gets a speedup with the change (running something like mono
--compile-all /usr/local/lib/mono/2.0/gmcs.exe may be your best bet
for exercising the icache flushing, but any relevant benchmark using
mono you can come up with is fine).
If you're looking at improving the speed of mono on ppc I can suggest
many other things which will provide significant speedups (like for
example remove FORCE_INDIR_CALL in mini-ppc.c).

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030827.html">[Mono-dev] signal.c cross-thread access
</A></li>
	<LI>Next message: <A HREF="031213.html">[Mono-dev] [PATCH] Enable TLS for PPC32/64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30764">[ date ]</a>
              <a href="thread.html#30764">[ thread ]</a>
              <a href="subject.html#30764">[ subject ]</a>
              <a href="author.html#30764">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
