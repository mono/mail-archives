<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] HttpWebResponse ConnectStream blocks on empty stream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20HttpWebResponse%20ConnectStream%20blocks%20on%20empty%20stream&In-Reply-To=005301c98854%242ac51800%24804f4800%24%40driesen%40telenet.be">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030863.html">
   <LINK REL="Next"  HREF="030874.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] HttpWebResponse ConnectStream blocks on empty stream</H1>
    <B>Gert Driesen</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20HttpWebResponse%20ConnectStream%20blocks%20on%20empty%20stream&In-Reply-To=005301c98854%242ac51800%24804f4800%24%40driesen%40telenet.be"
       TITLE="[Mono-dev] HttpWebResponse ConnectStream blocks on empty stream">gert.driesen at telenet.be
       </A><BR>
    <I>Fri Feb  6 08:19:05 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="030863.html">[Mono-dev] HttpWebResponse ConnectStream blocks on empty stream
</A></li>
        <LI>Next message: <A HREF="030874.html">[Mono-dev] HttpWebResponse ConnectStream blocks on empty stream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30866">[ date ]</a>
              <a href="thread.html#30866">[ thread ]</a>
              <a href="subject.html#30866">[ subject ]</a>
              <a href="author.html#30866">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gonzalo,

It's related to the keep-alive timeout, which is 15 seconds.

Also, the NoContentLength test in HttpWebRequestTest still does not pass;
probably it's just my test that sucks though.

Gert

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf Of Gert Driesen
Sent: vrijdag 6 februari 2009 13:12
To: 'Gonzalo Paniagua Javier'; 'Arne Claassen'
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] HttpWebResponse ConnectStream blocks on empty stream

Hey Gonzalo,

This does not appear to be fixed in SVN HEAD.
It always takes 15 seconds (while I've explicitly set the ReadWriteTimeout
to 50 seconds) to get the zero length response.

I'm testing this on Windows.
I get the exact same behavior on Linux with an older revision of Mono.
I'll update my Linux version after I've added unit tests or standalone tests
for a few more fixes.

Gert

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf Of Gonzalo
Paniagua Javier
Sent: woensdag 4 februari 2009 4:45
To: Arne Claassen
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] HttpWebResponse ConnectStream blocks on empty stream

On Tue, 2009-02-03 at 09:29 -0800, Arne Claassen wrote:
&gt;<i> I've been having a problem with HttpWebResponse locking up on
</I>&gt;<i> GetResponseSream and BeingGetResponseStream never returning on
</I>&gt;<i> responses that have no content-length header and no content. On .NET
</I>&gt;<i> this will return immediately, but on mono (1.9.1, 2.0.1 and 2.02) the
</I>&gt;<i> read will block only to be killed if the request itself has a timeout.
</I>&gt;<i> A simple repro is to his a site, get it's Etag/LastModified and hit it
</I>&gt;<i> again for the 304 response which should have no content. However
</I>&gt;<i> getting that response stream still shouldn't lock up.
</I>
This issue has already been fixed. I don't know if it made it to 2.2,
but the fix will be for sure in the upcoming 2.4.

-Gonzalo



_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>

Internal Virus Database is out of date.
Checked by AVG - <A HREF="http://www.avg.com">http://www.avg.com</A> 
Version: 8.0.176 / Virus Database: 270.10.15/1923 - Release Date: 1/29/2009
7:13 AM

_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>

Internal Virus Database is out of date.
Checked by AVG - <A HREF="http://www.avg.com">http://www.avg.com</A> 
Version: 8.0.176 / Virus Database: 270.10.15/1923 - Release Date: 1/29/2009
7:13 AM

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030863.html">[Mono-dev] HttpWebResponse ConnectStream blocks on empty stream
</A></li>
	<LI>Next message: <A HREF="030874.html">[Mono-dev] HttpWebResponse ConnectStream blocks on empty stream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30866">[ date ]</a>
              <a href="thread.html#30866">[ thread ]</a>
              <a href="subject.html#30866">[ subject ]</a>
              <a href="author.html#30866">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
