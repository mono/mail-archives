<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Current 'xbuild' status
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Current%20%27xbuild%27%20status&In-Reply-To=23a15590902110855y6dbd24d7lf03b577f058b768e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030954.html">
   <LINK REL="Next"  HREF="030959.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Current 'xbuild' status</H1>
    <B>Jonathan Chambers</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Current%20%27xbuild%27%20status&In-Reply-To=23a15590902110855y6dbd24d7lf03b577f058b768e%40mail.gmail.com"
       TITLE="[Mono-dev] Current 'xbuild' status">joncham at gmail.com
       </A><BR>
    <I>Wed Feb 11 12:10:27 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="030954.html">[Mono-dev] Current 'xbuild' status
</A></li>
        <LI>Next message: <A HREF="030959.html">[Mono-dev] Current 'xbuild' status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30956">[ date ]</a>
              <a href="thread.html#30956">[ thread ]</a>
              <a href="subject.html#30956">[ subject ]</a>
              <a href="author.html#30956">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have seen this repeatedly and have not been able to figure out why (unless
it's just old things lying around). If you look in your GAC, somewhere you
will have 2 versions of some assembly that both are 2.0.0.xxx. The current
resolve logic chokes on this trying to add a duplicate key to a dictionary.
It probably shouldn't fail but I can't figure out why there are two
assemblies with similar version numbers.
If you modify the code in xbuild where it is populating the dictionary you
can output the duplicate assembly. In fact, I'll try and add code that
outputs the duplicate assembly and handle the error case better.

Thanks,
Jonathan

On Wed, Feb 11, 2009 at 11:55 AM, Leszek Ciesielski &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">skolima at gmail.com</A>&gt;wrote:

&gt;<i> When I forced msbuild 2.0 and regenerated the project, xbuild bails
</I>&gt;<i> out on ResolveAssemblyReferences. Log attached.
</I>&gt;<i>
</I>&gt;<i> On Wed, Feb 11, 2009 at 5:35 PM, Jonathan Chambers &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">joncham at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt; I am guessing xbuild is only supporting 2.0 for now. I am not sure how
</I>&gt;<i> much
</I>&gt;<i> &gt; effort is needed to support 3.5/2008 projects.
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt; Jonathan
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Wed, Feb 11, 2009 at 11:28 AM, Leszek Ciesielski &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">skolima at gmail.com</A>&gt;
</I>&gt;<i> &gt; wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; using today's svn version, .proj file generated with &quot;set
</I>&gt;<i> &gt;&gt; MSBuildEmitSolution=1&quot; trick:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; [mono] ~/mono_svn/EVEMon @ xbuild EVEMonCSharp.sln.proj
</I>&gt;<i> &gt;&gt; XBuild Engine Version 0.1
</I>&gt;<i> &gt;&gt; Mono, Version 2.5.0.0
</I>&gt;<i> &gt;&gt; Copyright (C) Marek Sieradzki 2005. All rights reserved.
</I>&gt;<i> &gt;&gt; MSBUILD: error MSBUILD0000:
</I>&gt;<i> &gt;&gt; /root/mono_svn/EVEMon/EVEMonCSharp.sln.proj: Could not load file or
</I>&gt;<i> &gt;&gt; assembly 'Microsoft.Build.Tasks.v3.5' or one of its dependencies. The
</I>&gt;<i> &gt;&gt; system cannot find the file specified.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; (project is EVEMon, from
</I>&gt;<i> &gt;&gt; <A HREF="svn://evemon.battleclinic.com/EVEMon/EVEMon/trunk">svn://evemon.battleclinic.com/EVEMon/EVEMon/trunk</A>)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Thu, Feb 5, 2009 at 11:23 AM, Ankit Jain &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">radical at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; &gt; xbuild (svn) can't directly handle .sln files right now. But it can
</I>&gt;<i> &gt;&gt; &gt; build the temporary .proj that msbuild
</I>&gt;<i> &gt;&gt; &gt; generates for .sln files.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;   We can build the .sln.proj  with multiple projects. Its not
</I>&gt;<i> &gt;&gt; &gt; complete yet though.
</I>&gt;<i> &gt;&gt; &gt;   Currently, it generates the resources, satellite assemblies,
</I>&gt;<i> &gt;&gt; &gt;   resolves gac/assembly references, compiles, but doesn't deploy
</I>&gt;<i> &gt;&gt; &gt;   the referenced assemblies etc to the right location. But most of
</I>&gt;<i> &gt;&gt; &gt;   this will be work in the .targets .
</I>&gt;<i> &gt;&gt; &gt;   It should be easy to write a sln-&gt; proj convertor.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; List of msbuild features from msdn (
</I>&gt;<i> &gt;&gt; &gt; <A HREF="http://msdn.microsoft.com/en-us/library/ms171452.aspx">http://msdn.microsoft.com/en-us/library/ms171452.aspx</A> )
</I>&gt;<i> &gt;&gt; &gt; &#8226; Items
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Supported. These are used all over the place, so seems to work
</I>&gt;<i> &gt;&gt; &gt; fine for current test cases
</I>&gt;<i> &gt;&gt; &gt; &#8226; Properties
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Likewise
</I>&gt;<i> &gt;&gt; &gt; &#8226; Targets
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Implemented
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Including dependency checking, in the form of input/output list,
</I>&gt;<i> &gt;&gt; &gt; &quot;DependsOnTargets&quot; etc
</I>&gt;<i> &gt;&gt; &gt; &#8226; Tasks
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Implemented
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Most of the functionality in msbuild files are based on using
</I>&gt;<i> &gt;&gt; &gt; tasks. Custom tasks can be loaded
</I>&gt;<i> &gt;&gt; &gt; &#8226; Advanced Concepts
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Logging
</I>&gt;<i> &gt;&gt; &gt;      &#8227; Implemented. But its not being used throughout the system
</I>&gt;<i> &gt;&gt; &gt; right now to report errors/warnings.
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Batching (
</I>&gt;<i> &gt;&gt; &gt; <A HREF="http://msdn.microsoft.com/en-us/library/ms171473(VS.80">http://msdn.microsoft.com/en-us/library/ms171473(VS.80</A>).aspx )
</I>&gt;<i> &gt;&gt; &gt;      &#8227; Very important feature
</I>&gt;<i> &gt;&gt; &gt;      &#8227; Both task and target batching have been implemented, and seem
</I>&gt;<i> &gt;&gt; &gt; to be working fine
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Transforms (
</I>&gt;<i> <A HREF="http://msdn.microsoft.com/en-us/library/ms171476.aspx">http://msdn.microsoft.com/en-us/library/ms171476.aspx</A> )
</I>&gt;<i> &gt;&gt; &gt;      &#8227; Supported
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Using multiple processors (
</I>&gt;<i> &gt;&gt; &gt; <A HREF="http://msdn.microsoft.com/en-us/library/bb383805.aspx">http://msdn.microsoft.com/en-us/library/bb383805.aspx</A> )
</I>&gt;<i> &gt;&gt; &gt;      &#8227; Nothing has been done for this yet
</I>&gt;<i> &gt;&gt; &gt; &#8226; Building for Specific .NET Frameworks (
</I>&gt;<i> &gt;&gt; &gt; <A HREF="http://msdn.microsoft.com/en-us/library/bb397456.aspx">http://msdn.microsoft.com/en-us/library/bb397456.aspx</A> )
</I>&gt;<i> &gt;&gt; &gt;   &#8728; I've added some preliminary support for TargetFramework* stuff,
</I>&gt;<i> &gt;&gt; &gt; but this will need more work
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Similar work done in monodevelop should prove useful here
</I>&gt;<i> &gt;&gt; &gt; &#8226;  Others
</I>&gt;<i> &gt;&gt; &gt;   &#8728; Project references, assembly, gac references are resolved
</I>&gt;<i> &gt;&gt; &gt;      &#8227; I committed kinda preliminary code for this, which works fine
</I>&gt;<i> &gt;&gt; &gt; in the simple test cases (eg. pdn3) that I tried
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Ofcourse, most of this hasn't been tested extensively. I try to write
</I>&gt;<i> &gt;&gt; &gt; reasonable number of tests for the stuff
</I>&gt;<i> &gt;&gt; &gt; that I'm touching, but real testing would happen once the targets
</I>&gt;<i> &gt;&gt; &gt; files are more complete and we try real
</I>&gt;<i> &gt;&gt; &gt; world projects.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Would be nice to start trying this out and get feedback/bug reports :)
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; I'll be on vacation till end of next week, but will try to reply to
</I>&gt;<i> &gt;&gt; &gt; mails.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; -Ankit
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; --
</I>&gt;<i> &gt;&gt; &gt; Blog : <A HREF="http://www.ankitjain.org/blog">http://www.ankitjain.org/blog</A>
</I>&gt;<i> &gt;&gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt;&gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Mono-devel-list mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090211/3f42fad1/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090211/3f42fad1/attachment.html</A> 
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030954.html">[Mono-dev] Current 'xbuild' status
</A></li>
	<LI>Next message: <A HREF="030959.html">[Mono-dev] Current 'xbuild' status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30956">[ date ]</a>
              <a href="thread.html#30956">[ thread ]</a>
              <a href="subject.html#30956">[ subject ]</a>
              <a href="author.html#30956">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
