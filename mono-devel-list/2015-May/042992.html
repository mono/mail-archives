<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Building from Source Fails with mcs: Command not found (Mono-devel-list Digest, Vol 121, Issue 19) (Mono-devel-list Digest, Vol 121, Issue 20)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Building%20from%20Source%20Fails%20with%20mcs%3A%20Command%20not%0A%20found%20%28Mono-devel-list%20Digest%2C%20Vol%20121%2C%20Issue%2019%29%20%28Mono-devel-list%20Digest%2C%0A%20Vol%20121%2C%20Issue%2020%29&In-Reply-To=%3CCAJ7DczFF7i9wp816KkvMLhCzNAeiuODrS3T%3DxB0bt7E0X%3D8sFA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042991.html">
   <LINK REL="Next"  HREF="042993.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Building from Source Fails with mcs: Command not found (Mono-devel-list Digest, Vol 121, Issue 19) (Mono-devel-list Digest, Vol 121, Issue 20)</H1>
    <B>Dan Liew</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Building%20from%20Source%20Fails%20with%20mcs%3A%20Command%20not%0A%20found%20%28Mono-devel-list%20Digest%2C%20Vol%20121%2C%20Issue%2019%29%20%28Mono-devel-list%20Digest%2C%0A%20Vol%20121%2C%20Issue%2020%29&In-Reply-To=%3CCAJ7DczFF7i9wp816KkvMLhCzNAeiuODrS3T%3DxB0bt7E0X%3D8sFA%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Building from Source Fails with mcs: Command not found (Mono-devel-list Digest, Vol 121, Issue 19) (Mono-devel-list Digest, Vol 121, Issue 20)">dan at su-root.co.uk
       </A><BR>
    <I>Fri May 22 13:35:15 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042991.html">[Mono-dev] Building from Source Fails with mcs: Command	not	found (Mono-devel-list Digest, Vol 121,	Issue 19) (Mono-devel-list Digest, Vol 121, Issue 20)
</A></li>
        <LI>Next message: <A HREF="042993.html">[Mono-dev] Building from Source Fails with mcs: Command not	found (Mono-devel-list Digest, Vol 121,	Issue 19) (Mono-devel-list Digest, Vol 121, Issue 20)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42992">[ date ]</a>
              <a href="thread.html#42992">[ thread ]</a>
              <a href="subject.html#42992">[ subject ]</a>
              <a href="author.html#42992">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22 May 2015 at 14:21, Cyd Haselton &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">chaselton at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On May 22, 2015 7:34:16 AM CDT, Jo Shields &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">directhex at apebox.org</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>On 22/05/15 01:16, cyd wrote:
</I>&gt;&gt;&gt;<i> Let me back up a few steps before I start troublehooting this.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Does the monolite build of mono 4.0 support ARM...specifically ARMv7?
</I>&gt;&gt;<i> If
</I>&gt;&gt;&gt;<i> so, are there any modifications I need to make before running 'make
</I>&gt;&gt;<i>&amp;&amp; make
</I>&gt;&gt;&gt;<i> install?'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Monolite is CPU-agnostic. It's just bytecode. Mono 4 supports ARMv7, so
</I>&gt;&gt;<i>the question is what instructions are triggering SIGILL
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>Mono-devel-list mailing list
</I>&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i> Running 'strace -v -o mono.log make check', then 'cat mono.log | grep -B 12 SIGILL' yields:
</I>&gt;<i>
</I>&gt;<i> mprotect(0x40085000, 4096, PROT_READ)   = 0
</I>&gt;<i> getrlimit(RLIMIT_STACK, {rlim_cur=8192*1024, rlim_max=RLIM_INFINITY}) = 0
</I>&gt;<i> gettid()                                = 10243
</I>&gt;<i> syscall_983045(0x40086f24, 0xffffffb8, 0, 0x40086f24, 0x40087154, 0, 0xbeaec0d0, 0xf0005, 0x4008715c, 0xbe2ed000, 0, 0, 0, 0xbeaec070, 0x4007e254, 0x4007eaa4, 0x60000010, 0x40086f24, 0, 0, 0xc764, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0) = 0
</I>&gt;<i> mmap2(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, 0, 0) = 0x40089000madvise(0x40089000, 8192, 0xc /* MADV_??? */) = -1 EINVAL (Invalid argument)
</I>&gt;<i> sigaltstack({ss_sp=0x40089000, ss_flags=0, ss_size=8192}, NULL) = 0
</I>&gt;<i> sigaction(SIGABRT, {0x40076a71, [], SA_STACK|SA_RESTART|SA_SIGINFO}, NULL, 0x1dd9028) = 0
</I>&gt;<i> sigaction(SIGBUS, {0x40076a71, [], SA_STACK|SA_RESTART|SA_SIGINFO}, NULL, 0x1dd9028) = 0
</I>&gt;<i> sigaction(SIGFPE, {0x40076a71, [], SA_STACK|SA_RESTART|SA_SIGINFO}, NULL, 0x1dd9028) = 0
</I>&gt;<i> sigaction(SIGILL, {0x40076a71, [], SA_STACK|SA_RESTART|SA_SIGINFO}, NULL, 0x1dd9028) = 0
</I>&gt;<i>
</I>&gt;<i> I have zero experience reading straces but if I had to guess it looks like a function is making an invalid memory call.
</I>
Isn't the sigaction there setting up the signal handler for SIGILL? If
so this is probably the wrong part to be looking at. I'm slightly
confused by the sigaction written here because it's taking four
arguments but sigaction only takes three (I'm not great at reading the
output of strace either).

Another way to debug this is run the program under gdb and make sure
you set it up to intercept SIGILL. When gdb catches SIGILL you can
walk through the stack and also examine the assembly to see if
anything looks suspect to you.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042991.html">[Mono-dev] Building from Source Fails with mcs: Command	not	found (Mono-devel-list Digest, Vol 121,	Issue 19) (Mono-devel-list Digest, Vol 121, Issue 20)
</A></li>
	<LI>Next message: <A HREF="042993.html">[Mono-dev] Building from Source Fails with mcs: Command not	found (Mono-devel-list Digest, Vol 121,	Issue 19) (Mono-devel-list Digest, Vol 121, Issue 20)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42992">[ date ]</a>
              <a href="thread.html#42992">[ thread ]</a>
              <a href="subject.html#42992">[ subject ]</a>
              <a href="author.html#42992">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
