<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Not building on s390x
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Not%20building%20on%20s390x&In-Reply-To=%3CD1723870.29777%25neale%40sinenomine.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042953.html">
   <LINK REL="Next"  HREF="042948.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Not building on s390x</H1>
    <B>Neale Ferguson</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Not%20building%20on%20s390x&In-Reply-To=%3CD1723870.29777%25neale%40sinenomine.net%3E"
       TITLE="[Mono-dev] Not building on s390x">neale at sinenomine.net
       </A><BR>
    <I>Fri May  8 13:55:01 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042953.html">[Mono-dev] MDAC missing error on CentOS
</A></li>
        <LI>Next message: <A HREF="042948.html">[Mono-dev] ECDSA support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42944">[ date ]</a>
              <a href="thread.html#42944">[ thread ]</a>
              <a href="subject.html#42944">[ subject ]</a>
              <a href="author.html#42944">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
 I cloned from master and now my s390x build fails on the corlib build
(the second one after basic). It is crashing in get of CurrentThread. The
sequence of code that is now being produced is odd:

1  tls_get R17 &lt;-
        2  load_membase R18 &lt;- [R17 + 0x60]
        3  load_membase R19 &lt;- [R18 + 0x80]
        4  load_membase R21 &lt;- [R19 + 0x3]

It is steps 3 &amp; 4 that are problematic. Firstly, it gets a null pointer
when it loads R19. Even if it got a correct value the next step is quite
strange. I am not sure how it is getting a displacement of 3.

The 3.10.1 sequence, for example, looks like this:

1  tls_get R17 &lt;-
        2  load_membase R18 &lt;- [R17 + 0x60]
        3  load_membase R19 &lt;- [R18 + 0x0]
        4  load_membase R21 &lt;- [R19 + 0x68]

What should I look at to work out why this new sequence is being produced?

Neale



</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042953.html">[Mono-dev] MDAC missing error on CentOS
</A></li>
	<LI>Next message: <A HREF="042948.html">[Mono-dev] ECDSA support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42944">[ date ]</a>
              <a href="thread.html#42944">[ thread ]</a>
              <a href="subject.html#42944">[ subject ]</a>
              <a href="author.html#42944">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
