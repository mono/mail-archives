<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Tests for ParseRouteInfo
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Tests%20for%20ParseRouteInfo&In-Reply-To=%3CCANqeOFpxLH29bLTWm%2Bdp9W5%3De3zxU84pP_5zfafGGW_3b1KJtw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042639.html">
   <LINK REL="Next"  HREF="042641.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Tests for ParseRouteInfo</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Tests%20for%20ParseRouteInfo&In-Reply-To=%3CCANqeOFpxLH29bLTWm%2Bdp9W5%3De3zxU84pP_5zfafGGW_3b1KJtw%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Tests for ParseRouteInfo">miguel at xamarin.com
       </A><BR>
    <I>Thu Jan 15 15:16:08 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042639.html">[Mono-dev] Tests for ParseRouteInfo
</A></li>
        <LI>Next message: <A HREF="042641.html">[Mono-dev] Tests for ParseRouteInfo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42640">[ date ]</a>
              <a href="thread.html#42640">[ thread ]</a>
              <a href="subject.html#42640">[ subject ]</a>
              <a href="author.html#42640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Considering that we do not even have a test, I think it would be nice to
turn one of the samples on the git discussion into the test.   While not
100% robust, we could check that at least *one* of the interfaces has a
gateway, and perhaps make this into a soft failure for those that do not
actually have a network with a gateway when running the tests.

Miguel

using System;

using System.Net;

using System.Net.NetworkInformation;


public class Test

{

    public static void Main()

    {

        DisplayGatewayAddresses();

    }


    public static void DisplayGatewayAddresses()

    {

        Console.WriteLine(&quot;Gateways&quot;);

        NetworkInterface[] adapters  =
NetworkInterface.GetAllNetworkInterfaces();

        foreach (NetworkInterface adapter in adapters)

        {

            IPInterfaceProperties adapterProperties =
adapter.GetIPProperties();

            GatewayIPAddressInformationCollection addresses =
adapterProperties.GatewayAddresses;

            Console.WriteLine(adapter.Description);

            if (addresses.Count &gt;0)

            {

                foreach (GatewayIPAddressInformation address in addresses)

                {

                    Console.WriteLine(&quot;  Gateway Address
......................... : {0}&quot;,

                        address.Address.ToString());

                }

                Console.WriteLine();

            }

        }

    }

}

On Thu, Jan 15, 2015 at 8:58 AM, Ben Woods &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">woodsb02 at gmail.com</A>&gt; wrote:

&gt;<i> Mono is not able to get the system gateway address on Mac OSX or BSD when
</I>&gt;<i> performing GetIPProperties on an a NetworkInterface. This is due to the
</I>&gt;<i> mono class libraries solely utilising the /proc/net/route file, which is
</I>&gt;<i> only available on Linux.
</I>&gt;<i>
</I>&gt;<i> I have submitted a pull request to fix this here:
</I>&gt;<i> <A HREF="https://github.com/mono/mono/pull/1404">https://github.com/mono/mono/pull/1404</A>
</I>&gt;<i>
</I>&gt;<i> The last comment on the pull request is that the code looks good, but it
</I>&gt;<i> would be nice to have a test added to the regression test suite. As I
</I>&gt;<i> understand it, the test code would reside
</I>&gt;<i> in mcs/class/System/Test/System.Net.NetworkInformation.
</I>&gt;<i>
</I>&gt;<i> What do you think the test would look like? Seeing as mono does not
</I>&gt;<i> support setting the routing table, only reading it, it is difficult to
</I>&gt;<i> assert that the default gateway would be.
</I>&gt;<i>
</I>&gt;<i> Perhaps simply that the code executes without error, regardless of the
</I>&gt;<i> result, even if it is empty (it is possible for a system to not have a
</I>&gt;<i> default route, after all).
</I>&gt;<i>
</I>&gt;<i> Thoughts?
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> From: Benjamin Woods
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">woodsb02 at gmail.com</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150115/c4303a25/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150115/c4303a25/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042639.html">[Mono-dev] Tests for ParseRouteInfo
</A></li>
	<LI>Next message: <A HREF="042641.html">[Mono-dev] Tests for ParseRouteInfo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42640">[ date ]</a>
              <a href="thread.html#42640">[ thread ]</a>
              <a href="subject.html#42640">[ subject ]</a>
              <a href="author.html#42640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
