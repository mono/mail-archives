<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] What will happen if Dispose() hangs?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20What%20will%20happen%20if%20Dispose%28%29%20hangs%3F&In-Reply-To=%3CBN3PR0801MB115450BDAD862154A0C5D6B5FA320%40BN3PR0801MB1154.namprd08.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042721.html">
   <LINK REL="Next"  HREF="042712.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] What will happen if Dispose() hangs?</H1>
    <B>Edward Ned Harvey (mono)</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20What%20will%20happen%20if%20Dispose%28%29%20hangs%3F&In-Reply-To=%3CBN3PR0801MB115450BDAD862154A0C5D6B5FA320%40BN3PR0801MB1154.namprd08.prod.outlook.com%3E"
       TITLE="[Mono-dev] What will happen if Dispose() hangs?">edward.harvey.mono at clevertrove.com
       </A><BR>
    <I>Tue Jan 27 04:12:24 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042721.html">[Mono-dev] Re. PR 1501: Mark hot functions in the runtime.
</A></li>
        <LI>Next message: <A HREF="042712.html">[Mono-dev] What will happen if Dispose() hangs?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42709">[ date ]</a>
              <a href="thread.html#42709">[ thread ]</a>
              <a href="subject.html#42709">[ subject ]</a>
              <a href="author.html#42709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>When I call SslStream.Dispose(), the thread simply hangs indefinitely.  (Well, I didn't wait forever; only a few minutes, which is longer than the underlying TcpClient timeout periods.)

Obviously this is a bug, but my question is - What if I simply ignore the problem, and don't call Dispose, and just drop reference to the SslStream?  Presumably the GC will call finalizer, which will then call Dispose().  Will the GC thread also hang?  Will it put mono into a bad state?  What could possibly go wrong?

Possibly related - I observed that when I set TcpClient read &amp; write timeouts, they seem to have no effect.  Set to 60000 (60sec), wait a few minutes on a Read or Write (actually BeginRead/EndRead, or synchronous Write) and nothing happens.  Thread just blocks indefinitely or the end method is never called.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150127/5bdb5e59/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150127/5bdb5e59/attachment.html</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042721.html">[Mono-dev] Re. PR 1501: Mark hot functions in the runtime.
</A></li>
	<LI>Next message: <A HREF="042712.html">[Mono-dev] What will happen if Dispose() hangs?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42709">[ date ]</a>
              <a href="thread.html#42709">[ thread ]</a>
              <a href="subject.html#42709">[ subject ]</a>
              <a href="author.html#42709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
