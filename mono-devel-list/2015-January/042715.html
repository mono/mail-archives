<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] What will happen if Dispose() hangs?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20What%20will%20happen%20if%20Dispose%28%29%20hangs%3F&In-Reply-To=%3CBN3PR0801MB1154858671854F61F1D276E1FA320%40BN3PR0801MB1154.namprd08.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042714.html">
   <LINK REL="Next"  HREF="042716.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] What will happen if Dispose() hangs?</H1>
    <B>Edward Ned Harvey (mono)</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20What%20will%20happen%20if%20Dispose%28%29%20hangs%3F&In-Reply-To=%3CBN3PR0801MB1154858671854F61F1D276E1FA320%40BN3PR0801MB1154.namprd08.prod.outlook.com%3E"
       TITLE="[Mono-dev] What will happen if Dispose() hangs?">edward.harvey.mono at clevertrove.com
       </A><BR>
    <I>Tue Jan 27 17:56:41 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042714.html">[Mono-dev] What will happen if Dispose() hangs?
</A></li>
        <LI>Next message: <A HREF="042716.html">[Mono-dev] What will happen if Dispose() hangs?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42715">[ date ]</a>
              <a href="thread.html#42715">[ thread ]</a>
              <a href="subject.html#42715">[ subject ]</a>
              <a href="author.html#42715">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> [mailto:mono-devel-list-
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bounces at lists.ximian.com</A>] On Behalf Of Robert Jordan
</I>&gt;<i> 
</I>&gt;<i> You may want to look up how a sane IDisposable pattern has to be
</I>&gt;<i> sensibly implemented in .NET. You'll find out that Dispose()
</I>&gt;<i> shouldn't be called from a finalizer.
</I>
Uhmm...  You got that wrong.  Here is the recommended pattern:
<A HREF="https://msdn.microsoft.com/en-us/library/b1yfkh5e(v=vs.110">https://msdn.microsoft.com/en-us/library/b1yfkh5e(v=vs.110</A>).aspx

Basically, *always* call Dispose(false) from the finalizer, if present, but avoid having a finalizer unless you need one.

Fortunately, it looks like SslStream has no finalizer, so I guess the GC will never call any variant of SslStream.Dispose.  So I guess it's no problem.


&gt;<i> A blocking finalizer will hang the GC, but it looks like SslStream is
</I>&gt;<i> implementing finalization correctly:
</I>
Finalization seems to be correct.  But Dispose hangs.  Doesn't seem to be the fault of SslStream, but one of the dispose methods that gets called, either directly or indirectly, from the SslStream Dispose method.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042714.html">[Mono-dev] What will happen if Dispose() hangs?
</A></li>
	<LI>Next message: <A HREF="042716.html">[Mono-dev] What will happen if Dispose() hangs?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42715">[ date ]</a>
              <a href="thread.html#42715">[ thread ]</a>
              <a href="subject.html#42715">[ subject ]</a>
              <a href="author.html#42715">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
