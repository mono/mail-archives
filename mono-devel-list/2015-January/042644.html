<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Tests for ParseRouteInfo
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Tests%20for%20ParseRouteInfo&In-Reply-To=%3CCAOc73CD9kfQSFfvkOzmGFJwi9479uEqPh2my8GTsYa-H-RL6CQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042643.html">
   <LINK REL="Next"  HREF="042645.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Tests for ParseRouteInfo</H1>
    <B>Ben Woods</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Tests%20for%20ParseRouteInfo&In-Reply-To=%3CCAOc73CD9kfQSFfvkOzmGFJwi9479uEqPh2my8GTsYa-H-RL6CQ%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Tests for ParseRouteInfo">woodsb02 at gmail.com
       </A><BR>
    <I>Sat Jan 17 05:37:11 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042643.html">[Mono-dev] Tests for ParseRouteInfo
</A></li>
        <LI>Next message: <A HREF="042645.html">[Mono-dev]  Fork of certmgr - any ideas?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42644">[ date ]</a>
              <a href="thread.html#42644">[ thread ]</a>
              <a href="subject.html#42644">[ subject ]</a>
              <a href="author.html#42644">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>OK, I have now added regression tests to my pull request.
<A HREF="https://github.com/mono/mono/pull/1404">https://github.com/mono/mono/pull/1404</A>

Could someone please check whether this is good to commit now?

Cheers,
Ben


--
From: Benjamin Woods
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">woodsb02 at gmail.com</A>

On 15 January 2015 at 23:33, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at xamarin.com</A>&gt; wrote:

&gt;<i> It does not need to print to console.
</I>&gt;<i>
</I>&gt;<i> Ignore the soft failure, let us jsut assert if there is no gateway (the
</I>&gt;<i> soft failure part of my email was written before I changed my mind, and
</I>&gt;<i> forgot to remove it).
</I>&gt;<i>
</I>&gt;<i> Miguel
</I>&gt;<i>
</I>&gt;<i> On Thu, Jan 15, 2015 at 10:28 AM, Ben Woods &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">woodsb02 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Should a test really print to the Console? Presumably this should be
</I>&gt;&gt;<i> adapted to detect if there is at least one valid route?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also, what does a &quot;soft failure&quot; look like? Is there an example already
</I>&gt;&gt;<i> in the mono source?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for your help.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> From: Benjamin Woods
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">woodsb02 at gmail.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 15 January 2015 at 23:16, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at xamarin.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hello,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Considering that we do not even have a test, I think it would be nice to
</I>&gt;&gt;&gt;<i> turn one of the samples on the git discussion into the test.   While not
</I>&gt;&gt;&gt;<i> 100% robust, we could check that at least *one* of the interfaces has a
</I>&gt;&gt;&gt;<i> gateway, and perhaps make this into a soft failure for those that do not
</I>&gt;&gt;&gt;<i> actually have a network with a gateway when running the tests.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Miguel
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> using System;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> using System.Net;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> using System.Net.NetworkInformation;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> public class Test
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> {
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     public static void Main()
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     {
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>         DisplayGatewayAddresses();
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     public static void DisplayGatewayAddresses()
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     {
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>         Console.WriteLine(&quot;Gateways&quot;);
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>         NetworkInterface[] adapters  =
</I>&gt;&gt;&gt;<i> NetworkInterface.GetAllNetworkInterfaces();
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>         foreach (NetworkInterface adapter in adapters)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>         {
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>             IPInterfaceProperties adapterProperties =
</I>&gt;&gt;&gt;<i> adapter.GetIPProperties();
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>             GatewayIPAddressInformationCollection addresses =
</I>&gt;&gt;&gt;<i> adapterProperties.GatewayAddresses;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>             Console.WriteLine(adapter.Description);
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>             if (addresses.Count &gt;0)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>             {
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                 foreach (GatewayIPAddressInformation address in
</I>&gt;&gt;&gt;<i> addresses)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                 {
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                     Console.WriteLine(&quot;  Gateway Address
</I>&gt;&gt;&gt;<i> ......................... : {0}&quot;,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                         address.Address.ToString());
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                 }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                 Console.WriteLine();
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>             }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>         }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Thu, Jan 15, 2015 at 8:58 AM, Ben Woods &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">woodsb02 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Mono is not able to get the system gateway address on Mac OSX or BSD
</I>&gt;&gt;&gt;&gt;<i> when performing GetIPProperties on an a NetworkInterface. This is due to
</I>&gt;&gt;&gt;&gt;<i> the mono class libraries solely utilising the /proc/net/route file, which
</I>&gt;&gt;&gt;&gt;<i> is only available on Linux.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I have submitted a pull request to fix this here:
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://github.com/mono/mono/pull/1404">https://github.com/mono/mono/pull/1404</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> The last comment on the pull request is that the code looks good, but
</I>&gt;&gt;&gt;&gt;<i> it would be nice to have a test added to the regression test suite. As I
</I>&gt;&gt;&gt;&gt;<i> understand it, the test code would reside
</I>&gt;&gt;&gt;&gt;<i> in mcs/class/System/Test/System.Net.NetworkInformation.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> What do you think the test would look like? Seeing as mono does not
</I>&gt;&gt;&gt;&gt;<i> support setting the routing table, only reading it, it is difficult to
</I>&gt;&gt;&gt;&gt;<i> assert that the default gateway would be.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Perhaps simply that the code executes without error, regardless of the
</I>&gt;&gt;&gt;&gt;<i> result, even if it is empty (it is possible for a system to not have a
</I>&gt;&gt;&gt;&gt;<i> default route, after all).
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thoughts?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;<i> From: Benjamin Woods
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">woodsb02 at gmail.com</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150117/8c87daed/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150117/8c87daed/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042643.html">[Mono-dev] Tests for ParseRouteInfo
</A></li>
	<LI>Next message: <A HREF="042645.html">[Mono-dev]  Fork of certmgr - any ideas?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42644">[ date ]</a>
              <a href="thread.html#42644">[ thread ]</a>
              <a href="subject.html#42644">[ subject ]</a>
              <a href="author.html#42644">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
