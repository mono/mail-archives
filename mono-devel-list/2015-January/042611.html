<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] SafeFileHandle
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20SafeFileHandle&In-Reply-To=%3CCAC9RQtg83OTi3epcqG6GFYCkNfura4DO67JD1ft2NNBx%2BQBJUg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042610.html">
   <LINK REL="Next"  HREF="042612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] SafeFileHandle</H1>
    <B>Greg Young</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20SafeFileHandle&In-Reply-To=%3CCAC9RQtg83OTi3epcqG6GFYCkNfura4DO67JD1ft2NNBx%2BQBJUg%40mail.gmail.com%3E"
       TITLE="[Mono-dev] SafeFileHandle">gregoryyoung1 at gmail.com
       </A><BR>
    <I>Mon Jan 12 22:42:36 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042610.html">[Mono-dev] SafeFileHandle
</A></li>
        <LI>Next message: <A HREF="042612.html">[Mono-dev] SafeFileHandle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42611">[ date ]</a>
              <a href="thread.html#42611">[ thread ]</a>
              <a href="subject.html#42611">[ subject ]</a>
              <a href="author.html#42611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have one I can file. I figured it was something on my side though.

Could it be the FileHandle closing itself later for a second time? Are
there other scenarios aside from close this can happen on?

In general SafeFileHandle is pretty painful to use since none of the
definitions support it.

Want me to create an issue?

Greg

On Tue, Jan 13, 2015 at 12:32 AM, Zoltan Varga &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">vargaz at gmail.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i>   This is a bug, it shouldn't happen. If you have some kind of reproducible
</I>&gt;<i> test case, please file a bug report with it.
</I>&gt;<i>
</I>&gt;<i>             Zoltan
</I>&gt;<i>
</I>&gt;<i> On Mon, Jan 12, 2015 at 5:28 PM, Greg Young &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">gregoryyoung1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _wapi_handle_unref_full: Attempting to unref unused handle 0x8a
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I seem to be getting this message from the runtime not sure what could
</I>&gt;&gt;<i> be causing it. From some googling this appears to happen when you
</I>&gt;&gt;<i> close a file handle multiple times.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The only place close is called is :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> protected override void Dispose(bool disposing)
</I>&gt;&gt;<i>         {
</I>&gt;&gt;<i>             if(_handle == null) return;
</I>&gt;&gt;<i>             Flush();
</I>&gt;&gt;<i>             _handle.Close();
</I>&gt;&gt;<i>             _handle = null;
</I>&gt;&gt;<i>            &lt;snip&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Not sure how it could be called multiple times. I don't get any issues
</I>&gt;&gt;<i> on the CLR.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Any ideas?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Greg
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Studying for the Turing test
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


-- 
Studying for the Turing test
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042610.html">[Mono-dev] SafeFileHandle
</A></li>
	<LI>Next message: <A HREF="042612.html">[Mono-dev] SafeFileHandle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42611">[ date ]</a>
              <a href="thread.html#42611">[ thread ]</a>
              <a href="subject.html#42611">[ subject ]</a>
              <a href="author.html#42611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
