<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono.Posix Cross Compiling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Mono.Posix%20Cross%20Compiling&In-Reply-To=%3CCAC9RQtjhu6OrRNWMWp0syxOx1PwgnJzZR7X2q5b3bVgx1H-WmA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042587.html">
   <LINK REL="Next"  HREF="042567.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono.Posix Cross Compiling</H1>
    <B>Greg Young</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Mono.Posix%20Cross%20Compiling&In-Reply-To=%3CCAC9RQtjhu6OrRNWMWp0syxOx1PwgnJzZR7X2q5b3bVgx1H-WmA%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Mono.Posix Cross Compiling">gregoryyoung1 at gmail.com
       </A><BR>
    <I>Wed Jan  7 14:52:23 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="042587.html">[Mono-dev] Mono.Posix Cross Compiling
</A></li>
        <LI>Next message: <A HREF="042567.html">[Mono-dev] End line/column information in symbol files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42586">[ date ]</a>
              <a href="thread.html#42586">[ thread ]</a>
              <a href="subject.html#42586">[ subject ]</a>
              <a href="author.html#42586">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry the question was already answered above but let me restate the issue.

The issue is compiling between ms build and xbuild as the mono.posix
reference should only be there in Unix (windows uses win api calls)

Above is a good solution (conditional reference) which works. I know we
could manually add a binary reference to mono.posix.dll and then not use it
but that just feels wrong. The conditional reference is exactly what we
were looking for and works like a charm now!

The alternative we were looking at was copy/pasting syscalls.cs which is
also ugly :)

Greg

On Wednesday, January 7, 2015, Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jonpryor at vt.edu</A>&gt; wrote:

&gt;<i> On Jan 5, 2015, at 6:08 PM, Greg Young &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">gregoryyoung1 at gmail.com</A>
</I>&gt;<i> &lt;javascript:;&gt;&gt; wrote:
</I>&gt;<i> &gt; Have anyone used mono.posix or mono.unix.native in a cross compiling
</I>&gt;<i> scenario where you have to support visual studio builds? How did you handle
</I>&gt;<i> this? I don't seem to be able to do a platform specific reference.
</I>&gt;<i>
</I>&gt;<i> What's the problem? Mono.Posix.dll is MIT/X11; simply bundle the assembly
</I>&gt;<i> with your code, along with MonoPosixHelper.dll (just copy from the Mono
</I>&gt;<i> install).
</I>&gt;<i>
</I>&gt;<i> Furthermore, Mono.Unix.Native.Stdlib should work as-is on Windows (it uses
</I>&gt;<i> MSVCRT.dll).
</I>&gt;<i>
</I>&gt;<i> You will need to be careful not to actually use Syscall/etc. on Windows,
</I>&gt;<i> but due to the lazy nature of the JIT this should be reasonably
</I>&gt;<i> straightforward:
</I>&gt;<i>
</I>&gt;<i>         if (running on Unix)
</I>&gt;<i>                 MethodWhichUsesSyscall ();
</I>&gt;<i>         ...
</I>&gt;<i>
</I>&gt;<i> MethodWhichUsesSyscall() won't be JIT'd unless executed, so any references
</I>&gt;<i> to e.g. Syscall will be lazily evaluated, allowing things to work on
</I>&gt;<i> Windows.
</I>&gt;<i>
</I>&gt;<i>  - Jon
</I>&gt;<i>
</I>&gt;<i>
</I>
-- 
Studying for the Turing test
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150107/cf9a4098/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20150107/cf9a4098/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042587.html">[Mono-dev] Mono.Posix Cross Compiling
</A></li>
	<LI>Next message: <A HREF="042567.html">[Mono-dev] End line/column information in symbol files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42586">[ date ]</a>
              <a href="thread.html#42586">[ thread ]</a>
              <a href="subject.html#42586">[ subject ]</a>
              <a href="author.html#42586">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
