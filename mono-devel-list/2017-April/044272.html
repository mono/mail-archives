<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] AppDomain leak?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20AppDomain%20leak%3F&In-Reply-To=%3C78BA6ED7-DD1A-45F8-8B65-268E7B81EDD9%40accenture.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044271.html">
   <LINK REL="Next"  HREF="044273.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] AppDomain leak?</H1>
    <B>john.ocallaghan at accenture.com</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20AppDomain%20leak%3F&In-Reply-To=%3C78BA6ED7-DD1A-45F8-8B65-268E7B81EDD9%40accenture.com%3E"
       TITLE="[Mono-dev] AppDomain leak?">john.ocallaghan at accenture.com
       </A><BR>
    <I>Tue Apr 11 13:20:35 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044271.html">[Mono-dev] you'll love that
</A></li>
        <LI>Next message (by thread): <A HREF="044273.html">[Mono-dev] Mono in Ubuntu thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44272">[ date ]</a>
              <a href="thread.html#44272">[ thread ]</a>
              <a href="subject.html#44272">[ subject ]</a>
              <a href="author.html#44272">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Hi All

I am using Mono version 4.8.0.524 and have noticed a memory leak each time I create/unload an AppDomain. I have managed to localise the leak down to running the code from this bug report:
<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=30849">https://bugzilla.xamarin.com/show_bug.cgi?id=30849</A>

Basically run AppDomain Create/Unload in a tight loop with garbage collection.

Looking at the heap usage I can see it grow by about 1MB on each Create/Unload. Eventually it will oom.

Note: I am running mono in a docker container and am using the cAdvisor docker to watch the heap usage on my mono container. I don’t think that should have an effect but thought it was worth mentioning.

I have tried using both sgen and boehms GC but am seeing the same behaviour with both.

Has anyone else seen this?
Many thanks!
John



Accenture Global Solutions Limited, 3 Grand Canal Plaza, Grand Canal Street Upper, Dublin 4
This e-mail and any files transmitted with it are confidential and are intended solely for the use of the individual or entity to which they are addressed. If you have received this e-mail in error, please notify the sender immediately and delete the original. Communications with Accenture or any of its group companies (“Accenture”), including telephone calls and e-mails, may be monitored by our systems for quality control and/or evidential purposes. Accenture does not accept service by e-mail of court proceedings, other processes or formal notices of any kind. Private company limited by shares registered in Ireland, Number 554978

________________________________

This message is for the designated recipient only and may contain privileged, proprietary, or otherwise confidential information. If you have received it in error, please notify the sender immediately and delete the original. Any other use of the e-mail by you is prohibited. Where allowed by local law, electronic communications with Accenture and its affiliates, including e-mail and instant messaging (including content), may be scanned by our systems for the purposes of information security and assessment of internal compliance with Accenture policy.
______________________________________________________________________________________

www.accenture.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/mono-devel-list/attachments/20170411/89103a42/attachment.html">http://lists.dot.net/pipermail/mono-devel-list/attachments/20170411/89103a42/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044271.html">[Mono-dev] you'll love that
</A></li>
	<LI>Next message (by thread): <A HREF="044273.html">[Mono-dev] Mono in Ubuntu thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44272">[ date ]</a>
              <a href="thread.html#44272">[ thread ]</a>
              <a href="subject.html#44272">[ subject ]</a>
              <a href="author.html#44272">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
