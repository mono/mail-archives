<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mixed Mode Assemblies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mixed%20Mode%20Assemblies&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037776.html">
   <LINK REL="Next"  HREF="037778.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mixed Mode Assemblies</H1>
    <B>arkain</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mixed%20Mode%20Assemblies&In-Reply-To="
       TITLE="[Mono-dev] Mixed Mode Assemblies">kingmph at gmail.com
       </A><BR>
    <I>Thu Jul  7 11:55:58 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037776.html">[Mono-dev] WindowsAuthenticationModule status and plans
</A></li>
        <LI>Next message: <A HREF="037778.html">[Mono-dev] Mixed Mode Assemblies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37777">[ date ]</a>
              <a href="thread.html#37777">[ thread ]</a>
              <a href="subject.html#37777">[ subject ]</a>
              <a href="author.html#37777">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I understand the reasons why the developers chose to leave out support for
developing mixed-mode assemblies using mono: the lack of cross-platform
compatibility in such assemblies. However, I would argue that such things
are not a consideration for those who would choose to develop such
assemblies.

Consider something. When a developer want's to do mixed-mode development,
it's almost invariably because there is some functionality, usually in a
platform-specific native library, that the developer want's access to in a
.NET language. Likewise, when a developer wants to use P/Invoke, the same
logic applies. That also means that the resulting assembly will be of little
to no use unless all platforms that the assembly will be used on will have
an appropriate version of the same native library available. In either case,
it's up to the developer to be aware of such issues. I would no more expect
a mixed-mode assembly to work cross platform than I would a native
executable. Listing such as the reason to leave out this functionality
denies the very reason why it was included in Microsoft's implementation.

Without a doubt, every case where I've wanted/needed to use C++.NET has been
to create a mixed mode assembly with the intent of creating a clean,
optimized .NET interface for some piece of unmanaged code. If P/Invoke and
System.Runtime.InteropServices formed a complete solution for importing
native functionality into .NET, then I doubt Microsoft would have bothered
allowing for mixed-mode assemblies at all. However, there are a great many
things that cannot be cleanly handled using P/Invoke when it comes to
importing library functionality. One such case I encountered was a library
with functions that returned char* containing buffered data if it existed,
NULL if no data existed, or -1 on error. With C++.NET, I separated the
single return value into a return code and an out parameter, relieving me of
the need to convert IntPtr's into 2 different things on the .NET side. I'm
not claiming that this couldn't have been done without mixed-mode, but I am
saying that the mixed mode-solution was superior. Things become even more
interesting when the parameter list of the native function includes either
(...) or (va_list). While .NET's params keyword helps, there's often a much
more elegant solution that can be devised using mixed-mode code.

Put in short, P/Invoke is just fine for importing a few functions every now
and again, but when a native library of code needs to be exposed, nothing
beats mixed mode using C++.NET. The absence of this functionality from mono
is an oversight that most certainly should be corrected.

--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Mixed-Mode-Assemblies-tp3651901p3651901.html">http://mono.1490590.n4.nabble.com/Mixed-Mode-Assemblies-tp3651901p3651901.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037776.html">[Mono-dev] WindowsAuthenticationModule status and plans
</A></li>
	<LI>Next message: <A HREF="037778.html">[Mono-dev] Mixed Mode Assemblies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37777">[ date ]</a>
              <a href="thread.html#37777">[ thread ]</a>
              <a href="subject.html#37777">[ subject ]</a>
              <a href="author.html#37777">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
