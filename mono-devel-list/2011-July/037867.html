<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] XmlTextReader problems in mono 2.10.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20XmlTextReader%20problems%20in%20mono%202.10.2&In-Reply-To=SNT104-W331FA8B479DE55C7E7BC939F330%40phx.gbl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037864.html">
   <LINK REL="Next"  HREF="037868.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] XmlTextReader problems in mono 2.10.2</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20XmlTextReader%20problems%20in%20mono%202.10.2&In-Reply-To=SNT104-W331FA8B479DE55C7E7BC939F330%40phx.gbl"
       TITLE="[Mono-dev] XmlTextReader problems in mono 2.10.2">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Mon Jul 25 10:48:34 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037864.html">[Mono-dev] XmlTextReader problems in mono 2.10.2
</A></li>
        <LI>Next message: <A HREF="037868.html">[Mono-dev] Mono and dotConnect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37867">[ date ]</a>
              <a href="thread.html#37867">[ thread ]</a>
              <a href="subject.html#37867">[ subject ]</a>
              <a href="author.html#37867">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just confirmed that it does not reproduce (I am pretty sure it must
not, as such problematic error would have flooded this list). If you
still think there is bug, come up with the problematic test xml stream
and corresponding code that creates the actual &quot;IFXstream&quot;.

Atsushi Eno

&gt;<i> Hi,
</I>&gt;<i> I'm having problems reading UTF-8 encoded XML files, only in mono on
</I>&gt;<i> Linux and MacOSX (2.10.2 and 2.10.1 respectively). 2.10.2 on Windows 7
</I>&gt;<i> 64 bit runs just fine, as does .NET
</I>&gt;<i>
</I>&gt;<i> The issue is that the XmlTextReader can't open an XML file with UTF-8
</I>&gt;<i> encoding, it comes up with an old error, '?&gt;' is Expected as
</I>&gt;<i> Mono.Xml2.XmlTextReader.Expect.
</I>&gt;<i>
</I>&gt;<i> This seems true of any Xml file, as long as it is UTF-8 encoded, which
</I>&gt;<i> I need for multiple language support, as I need translations inside
</I>&gt;<i> the single XMl file.
</I>&gt;<i>
</I>&gt;<i> I am using the following code to initialise the XmlTextReader:
</I>&gt;<i>
</I>&gt;<i>             XmlReaderSettings settings = new XmlReaderSettings();
</I>&gt;<i>                               settings.ConformanceLevel = ConformanceLevel.Auto;
</I>&gt;<i>                               settings.IgnoreWhitespace = true;
</I>&gt;<i>                               settings.IgnoreComments = true;
</I>&gt;<i>                               settings.ValidationType = ValidationType.None;
</I>&gt;<i>  
</I>&gt;<i>                               XmlReader reader = XmlReader.Create(IFXstream, settings);            
</I>&gt;<i>  
</I>&gt;<i>             XmlDocument IFXmodel = new XmlDocument();
</I>&gt;<i>             IFXmodel.Load(reader);
</I>&gt;<i> Setting the ConformanceLevel.Auto fixed it running in Mono on Windows,
</I>&gt;<i> but still left it broken on Linux and MacOSX.
</I>&gt;<i>
</I>&gt;<i> I tried converting the files to UTF-32, but then I just get a
</I>&gt;<i> NullReferenceException.
</I>&gt;<i>
</I>&gt;<i> Converting to Western ISO won't work as gedit reports there are
</I>&gt;<i> characters in the file that will be lost in the conversion.
</I>&gt;<i>
</I>&gt;<i> Any thoughts?
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Euan.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037864.html">[Mono-dev] XmlTextReader problems in mono 2.10.2
</A></li>
	<LI>Next message: <A HREF="037868.html">[Mono-dev] Mono and dotConnect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37867">[ date ]</a>
              <a href="thread.html#37867">[ thread ]</a>
              <a href="subject.html#37867">[ subject ]</a>
              <a href="author.html#37867">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
