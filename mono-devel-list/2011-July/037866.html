<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Non-TCP/IP socket access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Non-TCP/IP%20socket%20access&In-Reply-To=7CA23323EFCD45729380A252A16F7025%40alanpc1">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037865.html">
   <LINK REL="Next"  HREF="037877.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Non-TCP/IP socket access</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Non-TCP/IP%20socket%20access&In-Reply-To=7CA23323EFCD45729380A252A16F7025%40alanpc1"
       TITLE="[Mono-dev] Non-TCP/IP socket access">robertj at gmx.net
       </A><BR>
    <I>Mon Jul 25 10:26:43 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037865.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
        <LI>Next message: <A HREF="037877.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37866">[ date ]</a>
              <a href="thread.html#37866">[ thread ]</a>
              <a href="subject.html#37866">[ subject ]</a>
              <a href="author.html#37866">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25.07.2011 15:24, Andy Hume wrote:

&gt;<i> Currently other socket types are blocked.  This occurs because the
</I>&gt;<i> mapping functions will return an error if asked to handle a different
</I>&gt;<i> address family.  For instance see convert_family at
</I>&gt;<i> mono/metadata/socket-io.c[3], when given an unknown value will skip it
</I>&gt;<i> and return -1, similarly for the other direction convert_to_mono_family
</I>&gt;<i> returns AddressFamily_Unknown.  For Connect and Bind, they use
</I>&gt;<i> create_sockaddr_from_object which for an unknown family returns:
</I>&gt;<i> 		*error = WSAEAFNOSUPPORT;
</I>&gt;<i>
</I>&gt;<i> Hence why I can't use Socket directly currently. :-,(
</I>
They are really blocked on purpose, but this is not set in stone.

You could, for example, provide patches that, for unknown
(but not limited to) AFs, simply assume that the specified
sockaddr is of the generic type &quot;struct sockaddr_storage&quot;
(see RFC 2553). All Unixes (including OSX) and even Windows
support this type.

What we'd need is a platform dependent SocketAddress to
sockaddr_storage mapping in the runtime.

Robert

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037865.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
	<LI>Next message: <A HREF="037877.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37866">[ date ]</a>
              <a href="thread.html#37866">[ thread ]</a>
              <a href="subject.html#37866">[ subject ]</a>
              <a href="author.html#37866">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
