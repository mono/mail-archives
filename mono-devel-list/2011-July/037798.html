<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mixed Mode Assemblies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mixed%20Mode%20Assemblies&In-Reply-To=4E182B7D.3010704%40hailmail.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037796.html">
   <LINK REL="Next"  HREF="037799.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mixed Mode Assemblies</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mixed%20Mode%20Assemblies&In-Reply-To=4E182B7D.3010704%40hailmail.net"
       TITLE="[Mono-dev] Mixed Mode Assemblies">robertj at gmx.net
       </A><BR>
    <I>Sat Jul  9 08:05:32 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037796.html">[Mono-dev] Mixed Mode Assemblies
</A></li>
        <LI>Next message: <A HREF="037799.html">[Mono-dev] Mixed Mode Assemblies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37798">[ date ]</a>
              <a href="thread.html#37798">[ thread ]</a>
              <a href="subject.html#37798">[ subject ]</a>
              <a href="author.html#37798">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09.07.2011 12:20, Quandary wrote:
&gt;<i> It's true that p/Invoke + InterOp services do not form a complete solution.
</I>&gt;<i> However, creating a interface in managed code across platforms isn't
</I>&gt;<i> very difficult.
</I>&gt;<i>
</I>&gt;<i> All you need to do is to pack a x86&amp;x64&amp;ARM&amp;PPC Linux&amp;Windows&amp;Mac
</I>&gt;<i> version of the native dll into the .NET dll's ressources, then stream
</I>&gt;<i> the respective assembly out on the calling of the constructor, and
</I>&gt;<i> create an abstract class, where you create an instance for the
</I>&gt;<i> respective platform (for example because of structs, where on x64, there
</I>&gt;<i> are different sizes of long + int on Windows&amp;  Linux/UNIX), which you
</I>&gt;<i> can then invoke as an interface.
</I>
Extracting and loading native libraries at run-time won't work
correctly on sane systems, unless you somehow manage to (1)
extract them into a path already configured as a library path,
(2) using absolute paths in DllImport attributes, (3) generating
DllImport code at run-time or (4) loading the libs and their
exports w/out DllImport's help (dlopen, LoadLibrary etc.).

That's why nobody is using such an approach in real world,
at least not under Unix. Using &lt;dllmap&gt; or a starter shell
script that sets the LD path is by far less complex (a
matter of minutes to develop).

Robert

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037796.html">[Mono-dev] Mixed Mode Assemblies
</A></li>
	<LI>Next message: <A HREF="037799.html">[Mono-dev] Mixed Mode Assemblies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37798">[ date ]</a>
              <a href="thread.html#37798">[ thread ]</a>
              <a href="subject.html#37798">[ subject ]</a>
              <a href="author.html#37798">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
