<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Non-TCP/IP socket access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Non-TCP/IP%20socket%20access&In-Reply-To=FDD9BE0AF4AC4738AAC346A29DA14710%40alanpc1">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037853.html">
   <LINK REL="Next"  HREF="037857.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Non-TCP/IP socket access</H1>
    <B>Ivo Smits</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Non-TCP/IP%20socket%20access&In-Reply-To=FDD9BE0AF4AC4738AAC346A29DA14710%40alanpc1"
       TITLE="[Mono-dev] Non-TCP/IP socket access">Ivo at UFO-Net.nl
       </A><BR>
    <I>Fri Jul 22 12:04:29 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037853.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
        <LI>Next message: <A HREF="037857.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37856">[ date ]</a>
              <a href="thread.html#37856">[ thread ]</a>
              <a href="subject.html#37856">[ subject ]</a>
              <a href="author.html#37856">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Op 22-7-2011 17:05, Andy Hume schreef:
&gt;<i> That was the most beautiful ugly thing I've seen in a long time. :-)
</I>&gt;<i> Unfortunately I haven't managed to get it to work:
</I>&gt;<i> 1) Try [DllImport(&quot;__Internal&quot;)] extern int _wapi_socket(..)
</I>&gt;<i> Swallowed Exception: System.EntryPointNotFoundException: _wapi_socket
</I>&gt;<i>
</I>&gt;<i> 2) Try [DllImport(&quot;mono-2.0&quot;)] extern int _wapi_socket(..)
</I>&gt;<i> Swallowed Exception: System.EntryPointNotFoundException: _wapi_socket
</I>&gt;<i>
</I>If I remember correctly, the class name including it's namespace may 
need to be the same. I have used a similar 'hack' with the file I/O to 
create an unbuffered stream I/O wrapper. I've used the 
[MethodImplAttribute(MethodImplOptions.InternalCall)] attribute there; 
just copy-pasted from the Mono sourcecode. Also, shouldn't the return 
value be an IntPtr rather than an int?

However, looking at the mono code, there are no checks in the managed 
part of the Socket construction. Did I miss anything, is it in the 
unmanaged code perhaps? Have you tried to use the managed Socket 
constructor, and optionally cast an integer value to the 
AddressFamily/ProtocolType? You could then retrieve the socket handle 
and make the bind/connect calls.

--
Ivo
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037853.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
	<LI>Next message: <A HREF="037857.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37856">[ date ]</a>
              <a href="thread.html#37856">[ thread ]</a>
              <a href="subject.html#37856">[ subject ]</a>
              <a href="author.html#37856">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
