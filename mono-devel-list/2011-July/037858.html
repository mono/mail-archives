<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mixed Mode Assemblies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mixed%20Mode%20Assemblies&In-Reply-To=4E28AE8D.5080801%40UFO-Net.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037845.html">
   <LINK REL="Next"  HREF="037803.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mixed Mode Assemblies</H1>
    <B>Tom Spink</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mixed%20Mode%20Assemblies&In-Reply-To=4E28AE8D.5080801%40UFO-Net.nl"
       TITLE="[Mono-dev] Mixed Mode Assemblies">tspink at gmail.com
       </A><BR>
    <I>Fri Jul 22 13:57:02 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037845.html">[Mono-dev] Mixed Mode Assemblies
</A></li>
        <LI>Next message: <A HREF="037803.html">[Mono-dev] Mono 2.10.2 TargetFrameworkAttribute
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37858">[ date ]</a>
              <a href="thread.html#37858">[ thread ]</a>
              <a href="subject.html#37858">[ subject ]</a>
              <a href="author.html#37858">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ivo,

On 21 July 2011 23:56, Ivo Smits &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Ivo at ufo-net.nl</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> That doesn't give the full power of Mixed Mode assemblies, but I think
</I>&gt;<i> it's definitely an interesting approach with many potential uses.
</I>&gt;<i> Especially, I think, when replacing existing libraries or building
</I>&gt;<i> plugins or extensions for existing software.
</I>

Absolutely - something, as I've mentioned, I think needs to be done at the
compiler level.


&gt;<i> I would rather skip the rewriting, and just start with a simple 'if
</I>&gt;<i> (!initialized) initialize();' and leave the code unpatched. Doesn't cost
</I>&gt;<i> much (especially considering the rest of the code) and works independent
</I>&gt;<i> of the compiler/platform.
</I>&gt;<i>
</I>
I just /hate/ unnecessary tests, and the test will ONLY be valid once, then
it's just extra overhead.  I've implemented a form of runtime code patching,
in the current source - but since it's very much x86-32 specific, it could
be turned off for other architectures, and a simple test with hard-coded
branch predictions built in could be used instead.  Bear in mind, this code
is platform specific anyway - it's native!


&gt;<i> What happens if either the namespace or class name contains dots? Are
</I>&gt;<i> they converted to underscores? Also, I think it might be interesting to
</I>&gt;<i> be able to override these generated names, perhaps using (custom) code
</I>&gt;<i> attributes, to help in replacing or implementing existing libraries,
</I>&gt;<i> plugins, ... Attributes might also be useful to specify how variables
</I>&gt;<i> should be marshaled.
</I>&gt;<i>
</I>
Well, currently, there is no generator - so that's completely open for
discussion!  I love the idea of attributes to assist the generator, and
marshalling hints would definitely be helpful.


&gt;<i> Also, I think that eventually the 'reverse interop code' could be
</I>&gt;<i> generated from an assembly file by using the Reflection framework. You
</I>&gt;<i> could make the code generator a managed application.
</I>&gt;<i>
</I>
Oh without a doubt!  It would too much of a duplication of effort to go
around parsing the metadata tables.  I wrote a simple PE/CLI parser as an
exercise (to keep me occupied one Friday night!) and parsing those tables is
just rotten!

Ivo


-- Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20110722/da93da9e/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20110722/da93da9e/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037845.html">[Mono-dev] Mixed Mode Assemblies
</A></li>
	<LI>Next message: <A HREF="037803.html">[Mono-dev] Mono 2.10.2 TargetFrameworkAttribute
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37858">[ date ]</a>
              <a href="thread.html#37858">[ thread ]</a>
              <a href="subject.html#37858">[ subject ]</a>
              <a href="author.html#37858">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
