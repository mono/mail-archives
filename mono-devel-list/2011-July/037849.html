<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Non-TCP/IP socket access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Non-TCP/IP%20socket%20access&In-Reply-To=j0bnoc%244hm%241%40dough.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037848.html">
   <LINK REL="Next"  HREF="037850.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Non-TCP/IP socket access</H1>
    <B>Andy Hume</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Non-TCP/IP%20socket%20access&In-Reply-To=j0bnoc%244hm%241%40dough.gmane.org"
       TITLE="[Mono-dev] Non-TCP/IP socket access">andyhume32 at yahoo.co.uk
       </A><BR>
    <I>Fri Jul 22 09:00:36 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037848.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
        <LI>Next message: <A HREF="037850.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37849">[ date ]</a>
              <a href="thread.html#37849">[ thread ]</a>
              <a href="subject.html#37849">[ subject ]</a>
              <a href="author.html#37849">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> 
</I>&gt;<i> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf 
</I>&gt;<i> Of Robert Jordan
</I>&gt;<i> Sent: 22 July 2011 12:43
</I>&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-dev] Non-TCP/IP socket access
</I>&gt;<i> 
</I>&gt;<i> On 22.07.2011 13:08, Andy Hume wrote:
</I>&gt;<i> &gt; Presumably I can't convert my fd to a wapi handle somehow...  So is 
</I>&gt;<i> &gt; that plan not going to work? :-,(
</I>&gt;<i> 
</I>&gt;<i> It won't work. The whole socket machinery assumes type 
</I>&gt;<i> AF_UNIX or AF_INET. If you set a fd of some other address 
</I>&gt;<i> family type, a lot of nasty things could happen if this check 
</I>&gt;<i> wasn't there.
</I>&gt;<i> 
</I>&gt;<i> Get/SetSocketOptions, Local/RemoteEndPoint etc. simply don't 
</I>&gt;<i> cope with other AF types. They would return garbage at best.
</I>&gt;<i>
</I>I actually don't need to call any of those functions -- and if I were I
could just P/Invoke them...[1] :-,(  

The bit I obviously don't want to have to write myself is anything to do
with I/O.  That's a huge amount of difficult work and its all there and
working in Mono and would work for my (SOCK_STREAM) socket if I could
just create the socket somehow. :-,(

All I need is that wapi handle...[2]  Do we think it's impossible to
access it.

Andy


__Footnotes

[1]  Actually, since
<A HREF="https://github.com/mono/mono/commit/4ca63a4b2ac7dfd24f2ba7311afe6c83e4b1">https://github.com/mono/mono/commit/4ca63a4b2ac7dfd24f2ba7311afe6c83e4b1</A>
ced0 the restriction on the types of sockaddr/EndPoint has beem removed
in the managed code.  Now the Prototype Pattern is used to allow the
managed code to return arbitrary sub-types of EndPoint class.  In
get_LocalEndPoint/RemoteEndPoint/etc(?) the EndPoint previously used by
the caller for Bind/Connect is used as the prototype to convert the byte
array returned from the call to getpeername etc, e.g.
     return seed_endpoint.Create (sa);

So the restriction in the runtime could be removed too.  That's what the
behaviour is on MSFT (both desktop and NETCF).  I have working Bluetooth
and IrDA sockets there.  So it's a shame they're blocked on Mono.  But
that's perhaps for a later discussion...

[2] Or for sockets on Mono _not_ to block access for a different family
values.  And then I could use the I/O functions at least([1]).

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037848.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
	<LI>Next message: <A HREF="037850.html">[Mono-dev] Non-TCP/IP socket access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37849">[ date ]</a>
              <a href="thread.html#37849">[ thread ]</a>
              <a href="subject.html#37849">[ subject ]</a>
              <a href="author.html#37849">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
