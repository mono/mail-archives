<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono vs. Net Core and p/invoke to native libraries	on multiple OS/platforms
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20vs.%20Net%20Core%20and%20p/invoke%20to%20native%20libraries%0A%09on%20multiple%20OS/platforms&In-Reply-To=%3CB18FFFED-BC8C-4354-8C1A-678AF14206DB%40asme.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044074.html">
   <LINK REL="Next"  HREF="044078.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono vs. Net Core and p/invoke to native libraries	on multiple OS/platforms</H1>
    <B>David Curylo</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20vs.%20Net%20Core%20and%20p/invoke%20to%20native%20libraries%0A%09on%20multiple%20OS/platforms&In-Reply-To=%3CB18FFFED-BC8C-4354-8C1A-678AF14206DB%40asme.org%3E"
       TITLE="[Mono-dev] Mono vs. Net Core and p/invoke to native libraries	on multiple OS/platforms">curylod at asme.org
       </A><BR>
    <I>Mon Dec  5 15:05:28 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044074.html">[Mono-dev] Mono vs. Net Core and p/invoke to native libraries on	multiple OS/platforms
</A></li>
        <LI>Next message (by thread): <A HREF="044078.html">[Mono-dev] Mono vs. Net Core and p/invoke to native libraries	on multiple OS/platforms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44075">[ date ]</a>
              <a href="thread.html#44075">[ thread ]</a>
              <a href="subject.html#44075">[ subject ]</a>
              <a href="author.html#44075">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On .NET Core, you determine the platform like this (full namespaces since this is a new spot):

System.Runtime.InteropServices.RuntimeInformation.IsOSPlatform(System.Runtime.InteropServices.OSPlatform.Windows);
System.Runtime.InteropServices.RuntimeInformation.IsOSPlatform(System.Runtime.InteropServices.OSPlatform.Linux);
System.Runtime.InteropServices.RuntimeInformation.IsOSPlatform(System.Runtime.InteropServices.OSPlatform.OSX);

As far as a configuration to map to libraries with different names per platform, I don’t believe there is a solution yet, but hope someone can prove me wrong.  It would be messy to have multiple “extern” methods decorated with the different platform-specific names and call the appropriate method based on the “IsOSPlatform” checks above, but I guess that would work.


&gt;<i> On Dec 4, 2016, at 10:47 PM, Daniel Morgan &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">linqdan2000 at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> How do I determine what operating system/platform
</I>&gt;<i> .net core is running on?
</I>&gt;<i> 
</I>&gt;<i> On Mono, you could handle different library names and file extensions via a config file for the library.  .net framework does not have this.  Not sure about .net core.
</I>&gt;<i> 
</I>&gt;<i> Example, i have a library foo.dll on Windows, libfooclient.so on Linux and libfoo.dynlib on macOS.   
</I>&gt;<i> 
</I>&gt;<i> I ported mono's old Odbc to .net core.  Porting the .Net Reference implementation would be better, but this was an effort so we could connect to data sources with no .net core data access provider like IBM DB2 now.
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://github.com/LinqDan/Mono.Data.OdbcCore">https://github.com/LinqDan/Mono.Data.OdbcCore</A> &lt;<A HREF="https://github.com/LinqDan/Mono.Data.OdbcCore">https://github.com/LinqDan/Mono.Data.OdbcCore</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> Same thing with the oracle client i ported, i need to modify it to work on Linux too.
</I>&gt;<i> 
</I>&gt;<i> Any suggestions?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Daniel
</I>&gt;<i> 
</I>&gt;<i> danmorg on GimpNet IRC
</I>&gt;<i> 
</I>&gt;<i> Begin forwarded message:
</I>&gt;<i> 
</I>&gt;&gt;<i> From: Daniel Morgan &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">linqdan2000 at gmail.com</A> &lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">linqdan2000 at gmail.com</A>&gt;&gt;
</I>&gt;&gt;<i> Date: November 11, 2016 at 9:44:42 AM EST
</I>&gt;&gt;<i> To: <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">mono-devel-list at lists.dot.net</A> &lt;mailto:<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">mono-devel-list at lists.dot.net</A>&gt;
</I>&gt;&gt;<i> Subject: Oracle .net core provider
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I took Mono Project's System.Data.OracleClient implementation and modified it for .net core.  It works on .net core via visual studio 2015 on a Windows 10 64-bit machine with a local Oracle 12c database.  Feel free to fork it.  
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> This was done in one evening to get it to build and run.  It will need to be reviewed and cleaned up.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Some notes:
</I>&gt;&gt;<i> - string.Copy does not exist in .net core so i just called ToString or set a reference.  So, i need to re-visit that code in oci define handles and parameters.
</I>&gt;&gt;<i> - no DataTable so a lot of code for getting schema and db data adapter was commented.
</I>&gt;&gt;<i> - string.Compare(string, string, bool, globalization) did not exist but Compare(string, string, bool does.
</I>&gt;&gt;<i> - remove all design-time component attributes 
</I>&gt;&gt;<i> - added various usings for the different namespaces for some stuff
</I>&gt;&gt;<i> - added reference to System.Data.Common
</I>&gt;&gt;<i> - I may have added SqlClient as well for SqlTypes.INullable.  Added other references to satisfy errors.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> <A HREF="https://github.com/LinqDan/oracleclientcore">https://github.com/LinqDan/oracleclientcore</A> &lt;<A HREF="https://github.com/LinqDan/oracleclientcore">https://github.com/LinqDan/oracleclientcore</A>&gt;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> <A HREF="https://blogs.msdn.microsoft.com/dotnet/2016/11/09/net-core-data-access/">https://blogs.msdn.microsoft.com/dotnet/2016/11/09/net-core-data-access/</A> &lt;<A HREF="https://blogs.msdn.microsoft.com/dotnet/2016/11/09/net-core-data-access/">https://blogs.msdn.microsoft.com/dotnet/2016/11/09/net-core-data-access/</A>&gt;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> What would it take to build a EF Core provider for Oracle?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Been awhile since i played with Mono.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.dot.net</A>
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">http://lists.dot.net/mailman/listinfo/mono-devel-list</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/mono-devel-list/attachments/20161205/1e2fea4d/attachment.html">http://lists.dot.net/pipermail/mono-devel-list/attachments/20161205/1e2fea4d/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044074.html">[Mono-dev] Mono vs. Net Core and p/invoke to native libraries on	multiple OS/platforms
</A></li>
	<LI>Next message (by thread): <A HREF="044078.html">[Mono-dev] Mono vs. Net Core and p/invoke to native libraries	on multiple OS/platforms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44075">[ date ]</a>
              <a href="thread.html#44075">[ thread ]</a>
              <a href="subject.html#44075">[ subject ]</a>
              <a href="author.html#44075">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
