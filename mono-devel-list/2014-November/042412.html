<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Using .so file in Android Library Project and then using it in an Android App
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Using%20.so%20file%20in%20Android%20Library%20Project%20and%20then%0A%20using%20it%20in%20an%20Android%20App&In-Reply-To=%3CCAOvAbOK0Ss_BNNqedO5M1Bk8DDXBcbiVm_0E5i6LM3%2B3DEUn1Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042410.html">
   <LINK REL="Next"  HREF="042413.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Using .so file in Android Library Project and then using it in an Android App</H1>
    <B>Burhan Eyuboglu</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Using%20.so%20file%20in%20Android%20Library%20Project%20and%20then%0A%20using%20it%20in%20an%20Android%20App&In-Reply-To=%3CCAOvAbOK0Ss_BNNqedO5M1Bk8DDXBcbiVm_0E5i6LM3%2B3DEUn1Q%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Using .so file in Android Library Project and then using it in an Android App">burhaneyuboglu at gmail.com
       </A><BR>
    <I>Wed Nov 26 16:08:23 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="042410.html">[Mono-dev] Fwd: Using .so file in Android Library Project and then using it in an Android App
</A></li>
        <LI>Next message: <A HREF="042413.html">[Mono-dev] Using .so file in Android Library Project and then using it in an Android App
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42412">[ date ]</a>
              <a href="thread.html#42412">[ thread ]</a>
              <a href="subject.html#42412">[ subject ]</a>
              <a href="author.html#42412">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have created a lib file in the resources folder, and armeabi-v7a folder
in the lib file and put the libcyusb.so there. When I look at the csproj
file, it has changed like that:

&lt;ItemGroup&gt;
    &lt;AndroidEmbeddedJavaLibrary
Include=&quot;Resources\lib\armeabi-v7a\libcyusb.so&quot; /&gt;


However, I'm still getting &quot; can not load dll&quot; error:

[monodroid-debug] Trying to initialize the debugger with options:
--debugger-agent=transport=dt_socket,loglevel=0,address=127.0.0.1:8852
,server=y,embedding=1
[libc] WARNING: generic atexit() called from legacy shared library
[Mono] Image addref mscorlib[0x5ac6bfe0] -&gt; mscorlib.dll[0x5ace0fa0]: 1
[Mono] AOT module 'mscorlib.dll.so' not found: Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/mscorlib.dll.so&quot; not found
[Mono] Assembly mscorlib[0x5ac6bfe0] added to domain RootDomain, ref_count=1
[Mono] Assembly Loader probing location:
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/LibraryDenemesi.dll'.
[Mono] Image addref LibraryDenemesi[0x5c771638] -&gt;
/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/LibraryDenemesi.dll[0x5bb190f0]:
2
[Mono] Assembly LibraryDenemesi[0x5c771638] added to domain RootDomain,
ref_count=1
[Mono] AOT module
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/
LibraryDenemesi.dll.so' not found: Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib//storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/
LibraryDenemesi.dll.so&quot; not found
[Mono] Assembly Loader loaded assembly from location:
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/LibraryDenemesi.dll'.
[Mono] Config attempting to parse:
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/LibraryDenemesi.dll.config'.
[Mono] Config attempting to parse:
'/Users/builder/data/lanes/monodroid-mlion-monodroid-4.20-series/ba9bbbdd/source/monodroid/builds/install/mono-armv7/etc/mono/assemblies/LibraryDenemesi/LibraryDenemesi.config'.
[Mono] Image addref CypressLibrary[0x5ac25fb0] -&gt;
CypressLibrary.dll[0x5bb1a420]: 1
[Mono] Assembly CypressLibrary[0x5ac25fb0] added to domain RootDomain,
ref_count=1
[Mono] AOT module 'CypressLibrary.dll.so' not found: Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/CypressLibrary.dll.so&quot; not
found
[monodroid-gc] GREF GC Threshold: 46800
[Mono] Image addref Mono.Android[0x5aa93670] -&gt;
Mono.Android.dll[0x5ace36c8]: 1
[Mono] Assembly Mono.Android[0x5aa93670] added to domain RootDomain,
ref_count=1
[Mono] AOT module 'Mono.Android.dll.so' not found: Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/Mono.Android.dll.so&quot; not
found
[Mono] Assembly Ref addref Mono.Android[0x5aa93670] -&gt;
mscorlib[0x5ac6bfe0]: 2
[Mono] Image addref System.Core[0x5aceeb28] -&gt; System.Core.dll[0x59bb3240]:
1
[Mono] Assembly System.Core[0x5aceeb28] added to domain RootDomain,
ref_count=1
[Mono] AOT module 'System.Core.dll.so' not found: Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/System.Core.dll.so&quot; not
found
[Mono] Assembly Ref addref Mono.Android[0x5aa93670] -&gt;
System.Core[0x5aceeb28]: 2
[Mono] Assembly Ref addref System.Core[0x5aceeb28] -&gt; mscorlib[0x5ac6bfe0]:
3
[Mono] Assembly Ref addref LibraryDenemesi[0x5c771638] -&gt;
Mono.Android[0x5aa93670]: 2
[Mono] DllImport attempting to load: '__Internal'.
[Mono] DllImport loaded library '(null)'.
[Mono] DllImport searching in: '__Internal' ('(null)').
[Mono] Searching for '_monodroid_gc_wait_for_bridge_processing'.
[Mono] Probing '_monodroid_gc_wait_for_bridge_processing'.
[Mono] Found as '_monodroid_gc_wait_for_bridge_processing'.
[Mono] DllImport searching in: '__Internal' ('(null)').
[Mono] Searching for '_monodroid_get_identity_hash_code'.
[Mono] Probing '_monodroid_get_identity_hash_code'.
[Mono] Found as '_monodroid_get_identity_hash_code'.
Loaded assembly: MonoDroidConstructors [External]
[Mono] Assembly Ref addref LibraryDenemesi[0x5c771638] -&gt;
mscorlib[0x5ac6bfe0]: 4
[Mono] DllImport searching in: '__Internal' ('(null)').
[Mono] Searching for '_monodroid_gref_log_new'.
[Mono] Probing '_monodroid_gref_log_new'.
[Mono] Found as '_monodroid_gref_log_new'.
[Mono] Assembly Loader probing location:
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/CypressDenemeLibrary.dll'.
[Mono] Image addref CypressDenemeLibrary[0x5f6dd4f8] -&gt;
/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/CypressDenemeLibrary.dll[0x5f6dd150]:
2
[Mono] Assembly CypressDenemeLibrary[0x5f6dd4f8] added to domain
RootDomain, ref_count=1
[Mono] AOT module
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/
CypressDenemeLibrary.dll.so' not found: Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib//storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/
CypressDenemeLibrary.dll.so&quot; not found
[Mono] Assembly Loader loaded assembly from location:
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/CypressDenemeLibrary.dll'.
[Mono] Config attempting to parse:
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/CypressDenemeLibrary.dll.config'.
[Mono] Config attempting to parse:
'/Users/builder/data/lanes/monodroid-mlion-monodroid-4.20-series/ba9bbbdd/source/monodroid/builds/install/mono-armv7/etc/mono/assemblies/CypressDenemeLibrary/CypressDenemeLibrary.config'.
[Mono] Assembly Ref addref LibraryDenemesi[0x5c771638] -&gt;
CypressDenemeLibrary[0x5f6dd4f8]: 2
[Mono] Assembly Ref addref CypressDenemeLibrary[0x5f6dd4f8] -&gt;
mscorlib[0x5ac6bfe0]: 5
[Mono] DllImport attempting to load: 'libcyusb.so'.
[Mono] DllImport error loading library
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/libcyusb.so':
'Cannot load library: load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib//storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/libcyusb.so&quot;
not found'.
[Mono] DllImport error loading library
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/libcyusb.so':
'Cannot load library: load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib//storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/libcyusb.so&quot;
not found'.
[Mono] DllImport error loading library 'libcyusb.so': 'Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/libcyusb.so&quot; not found'.
[Mono] DllImport error loading library 'libcyusb.so': 'Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/libcyusb.so&quot; not found'.
[Mono] DllImport error loading library 'libcyusb.so': 'Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/libcyusb.so&quot; not found'.
[Mono] DllImport unable to load library 'Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/libcyusb.so&quot; not found'.
Loaded assembly:
/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/CypressDenemeLibrary.dll
[External]
[MoreInfoHPW_ViewGroup] Parent view is not a TextView
[Mono] DllImport searching in: '__Internal' ('(null)').
[Mono] Searching for '_monodroid_gref_log_delete'.
[Mono] Probing '_monodroid_gref_log_delete'.
[Mono] Found as '_monodroid_gref_log_delete'.
[Mono] DllImport attempting to load: 'libcyusb.so'.
[Mono] DllImport error loading library
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/libcyusb.so':
'Cannot load library: load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib//storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/libcyusb.so&quot;
not found'.
[Mono] DllImport error loading library
'/storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/libcyusb.so':
'Cannot load library: load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib//storage/emulated/0/Android/data/LibraryDenemesi.LibraryDenemesi/files/.__override__/libcyusb.so&quot;
not found'.
[Mono] DllImport error loading library 'libcyusb.so': 'Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/libcyusb.so&quot; not found'.
[Mono] DllImport error loading library 'libcyusb.so': 'Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/libcyusb.so&quot; not found'.
[Mono] DllImport error loading library 'libcyusb.so': 'Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/libcyusb.so&quot; not found'.
[Mono] DllImport unable to load library 'Cannot load library:
load_library(linker.cpp:746): library
&quot;/data/data/LibraryDenemesi.LibraryDenemesi/lib/libcyusb.so&quot; not found'.
[Mono] Assembly Ref addref CypressDenemeLibrary[0x5f6dd4f8] -&gt;
Mono.Android[0x5aa93670]: 3
[Mono] DllImport attempting to load: '/system/lib/liblog.so'.
[Mono] DllImport loaded library '/system/lib/liblog.so'.
[Mono] DllImport searching in: '/system/lib/liblog.so'
('/system/lib/liblog.so').
[Mono] Searching for '__android_log_print'.
[Mono] Probing '__android_log_print'.
[Mono] Found as '__android_log_print'.
System.DllNotFoundException: libcyusb.so
  at (wrapper managed-to-native) DataDeneme:libusb_init ()
  at LibraryDenemesi.MainActivity.OnCreate (Android.OS.Bundle bundle)
[0x0004e] in
c:\Users\Sercan\Documents\Projects\LibraryDenemesi\LibraryDenemesi\MainActivity.cs:34
[libEGL] loaded /system/lib/egl/libEGL_mali.so
[libEGL] loaded /system/lib/egl/libGLESv1_CM_mali.so
[libEGL] loaded /system/lib/egl/libGLESv2_mali.so
[] Device driver API match
[] Device driver API version: 17
[] User space API version: 17
[] mali: REVISION=Linux-r3p1-01rel1 BUILD_DATE=Fri May 10 18:36:49 KST 2013
[OpenGLRenderer] Enabling debug mode 0



2014-11-26 12:28 GMT+02:00 Burhan Eyuboglu &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">burhaneyuboglu at gmail.com</A>&gt;:

&gt;<i>
</I>&gt;<i> ---------- Forwarded message ----------
</I>&gt;<i> From: Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jonpryor at vt.edu</A>&gt;
</I>&gt;<i> Date: 2014-11-25 17:47 GMT+02:00
</I>&gt;<i> Subject: Re: [Mono-dev] Using .so file in Android Library Project and then
</I>&gt;<i> using it in an Android App
</I>&gt;<i> To: Burhan Eyuboglu &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">burhaneyuboglu at gmail.com</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Nov 25, 2014, at 7:17 AM, Burhan Eyuboglu &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">burhaneyuboglu at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; I was trying to import with wrong name : &quot;cylibusb&quot;. My library's name
</I>&gt;<i> is libcyusb.so.
</I>&gt;<i> &gt; You said that libcyusb.so should be in the .apk files in the previous
</I>&gt;<i> mails, however I open the apk files (armeabi-v7a) and copy the libcyusb.so
</I>&gt;<i> into them and run the application,then it gives same error and when I look
</I>&gt;<i> at apk files after runining, there is no libcyusb.so in them.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; How can I put libcyusb.so to the lib/armeabi-v7a?
</I>&gt;<i>
</I>&gt;<i> You need to add libcyusb.so to your project with a Build action of
</I>&gt;<i> AndroidNativeLibrary.
</I>&gt;<i>
</I>&gt;<i> When adding libcyusb.so to your project, it must be located in a directory
</I>&gt;<i> that matches the ABI, e.g. you should have a
</I>&gt;<i> native-libs\armeabi-v7a\libcyusb.so file, and add that file to your project
</I>&gt;<i> with a Build action of AndroidNativeLibrary.
</I>&gt;<i>
</I>&gt;<i>  - Jon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I need .so file with AndroidLibraryProject not with
</I>&gt;<i> AndroidApplicationProject, and in the AndroidLibraryProject, there is no
</I>&gt;<i> lib or lib/armeabi-v7a folder. Where can I put libcyusb.so?
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141126/897b2fa2/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141126/897b2fa2/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042410.html">[Mono-dev] Fwd: Using .so file in Android Library Project and then using it in an Android App
</A></li>
	<LI>Next message: <A HREF="042413.html">[Mono-dev] Using .so file in Android Library Project and then using it in an Android App
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42412">[ date ]</a>
              <a href="thread.html#42412">[ thread ]</a>
              <a href="subject.html#42412">[ subject ]</a>
              <a href="author.html#42412">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
