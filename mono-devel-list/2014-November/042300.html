<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono &amp; .Net difference - handling xs:extension please	help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20%26%20.Net%20difference%20-%20handling%20xs%3Aextension%20please%0A%09help&In-Reply-To=%3C1415776510946-4664552.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042299.html">
   <LINK REL="Next"  HREF="042302.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono &amp; .Net difference - handling xs:extension please	help</H1>
    <B>MarLOne</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20%26%20.Net%20difference%20-%20handling%20xs%3Aextension%20please%0A%09help&In-Reply-To=%3C1415776510946-4664552.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] Mono &amp; .Net difference - handling xs:extension please	help">InfoSeeker002 at gmail.com
       </A><BR>
    <I>Wed Nov 12 07:15:10 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="042299.html">[Mono-dev] SetThreadPriority patch for mono-3.2.8
</A></li>
        <LI>Next message: <A HREF="042302.html">[Mono-dev] Mono &amp; .Net difference - handling xs:extension	please help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42300">[ date ]</a>
              <a href="thread.html#42300">[ thread ]</a>
              <a href="subject.html#42300">[ subject ]</a>
              <a href="author.html#42300">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Not sure if this issue has been raised as it is driving me nuts as another
Mono/.Net runtime behavior differences.

I have a xml schema called FamilyTree2.xsd  FamilyTree2.xsd
&lt;<A HREF="http://mono.1490590.n4.nabble.com/file/n4664552/FamilyTree2.xsd">http://mono.1490590.n4.nabble.com/file/n4664552/FamilyTree2.xsd</A>&gt;  . This
has been validate in Eclipse's Xsd Editor.

Then I have an instance document created using this schema and is called
FamilyTree2SimplePerson.xml  FamilyTree2SimplePerson.xml
&lt;<A HREF="http://mono.1490590.n4.nabble.com/file/n4664552/FamilyTree2SimplePerson.xml">http://mono.1490590.n4.nabble.com/file/n4664552/FamilyTree2SimplePerson.xml</A>&gt;  

I then use xsd.exe in Mono runtime 2.10.8.1 to generate a C# class from the
schema. I then use the following code to deserialize the instance document
into an person object:
        [Test]
        public void TestSimplePerson ()
        {
            const String testFile = &quot;FamilyTree2SimplePerson.xml&quot;;
            String fileName = Path.Combine( Constants.DataFilesDirectory,
testFile );
            Assert.IsTrue( File.Exists( fileName ) );
            
            LMar.Demo.person p = null;
            using( Stream input = File.OpenRead( fileName ) )
            {
                XmlReaderSettings rs = new XmlReaderSettings();
                rs.Schemas = new XmlSchemaSet();
                rs.Schemas.Add( SchemaLoaders.FamilyTree2 );
                rs.ValidationType = ValidationType.Schema;
                
                using( XmlReader reader = XmlReader.Create( input, rs ) )
                {
                    XmlSerializer ser = new XmlSerializer( typeof(
LMar.Demo.person ) );
                    p = ser.Deserialize( reader ) as LMar.Demo.person;  //
XmlSchemaValiationException
                    Assert.IsNotNull( p );
                }
            }

The schema is embedded into the assembly as embedded resource,

The exception message is as follows:
System.Xml.Schema.XmlSchemaValiationException: XmlSchema error: Attribute
declaration was not found for name XML Line 6, Position 12.

person is the base class of spouse which uses the xs:extension to define it
in the schema. This error message points to the name for the spouse object. 

I believe this is a Mono &amp; MS .Net incompatibility runtime error for the
following reasons:
1) The instance document has been validated by Eclipse xsd/xml editor as
well as online validator. In fact the instance document was created by
Eclipse xml editor.
2) The same code ( the xsd generated code produced in .Net and Mono appear
to be the same) shown above runs without error in MS .Net and retrieving all
the values.

Has anyone discovered this error? It is a simple usage of xs:extension, a
very commonly used construct and should not cause any incompatibility. 

It is so disheartening to see superficial compatibility while beneath the
surface so much differences. Is there a site that lists this kind of runtime
incompatibility for people wanting to use Mono as serious tool? Every time I
push Mono, I end up in a hole like this as I have encountered time and time
again incompatibilities.

Is there some quirky flags in the XmlReaderSettings to get this going in
Mono? 

Thanks.

MarL




--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Mono-Net-difference-handling-xs-extension-please-help-tp4664552.html">http://mono.1490590.n4.nabble.com/Mono-Net-difference-handling-xs-extension-please-help-tp4664552.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042299.html">[Mono-dev] SetThreadPriority patch for mono-3.2.8
</A></li>
	<LI>Next message: <A HREF="042302.html">[Mono-dev] Mono &amp; .Net difference - handling xs:extension	please help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42300">[ date ]</a>
              <a href="thread.html#42300">[ thread ]</a>
              <a href="subject.html#42300">[ subject ]</a>
              <a href="author.html#42300">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
