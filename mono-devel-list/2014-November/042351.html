<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Crash course on bringing .NET open sourced code to	Mono.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Crash%20course%20on%20bringing%20.NET%20open%20sourced%20code%20to%0A%09Mono.&In-Reply-To=%3CCANqeOFrAmhxuuWBDmO4%2BZqarJq04BLrdqffmcWCYNp2WrGBexQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042350.html">
   <LINK REL="Next"  HREF="042353.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Crash course on bringing .NET open sourced code to	Mono.</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Crash%20course%20on%20bringing%20.NET%20open%20sourced%20code%20to%0A%09Mono.&In-Reply-To=%3CCANqeOFrAmhxuuWBDmO4%2BZqarJq04BLrdqffmcWCYNp2WrGBexQ%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Crash course on bringing .NET open sourced code to	Mono.">miguel at xamarin.com
       </A><BR>
    <I>Sat Nov 15 15:58:06 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="042350.html">[Mono-dev] Crash course on bringing .NET open sourced code to	Mono.
</A></li>
        <LI>Next message: <A HREF="042353.html">[Mono-dev] Crash course on bringing .NET open sourced code to	Mono.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42351">[ date ]</a>
              <a href="thread.html#42351">[ thread ]</a>
              <a href="subject.html#42351">[ subject ]</a>
              <a href="author.html#42351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Let me give more color on the situation.

Tasks:

   - *Not building the 2.0 Profile*: while this is a very simple change, it
   currently breaks the F# compilation.   I have to dig out the reasons, I can
   not remember why, but it does.  Something related to MSBuild targets or
   something.

   - *Removal of the #ifdef junk for old profiles: *this will make it hard
   to merge our changes later, so I rather not have to do this for now.   In
   addition, a tool was used, so we can just use the tool in the future.

   - *Adding .NET Reference Code to Mono:* for all the bits that have
   started trickling out, we can use the approach described earlier.   I
   should probably formalize the process in a document.   This does not really
   require either one of the previous tasks, in general, it is easy to add
   #ifs temporarily.

In addition to the list mentioned before, we also need to formalize/review
the following:

   - *DEFINE use in .NET's code:* we can not just take the code blindly, we
   need to review that every file that is incorporated also defines the proper
   defines in the build, or we would end up with a build that is not correct.

   - *Put together a priority list:* this is merely a list of the most
   valuable pieces of code that we want to incorporate into Mono.   The ones
   that bring the most bang for the buck to the Mono community.

   *Note:* this is independent of anyone picking a task they care about,
   and just running with it.   This is just a public list of things we should
   look into.

   - *Process to port Windows code:* there seems to be a lot more native
   code that I even expected.   So in many cases, we can not blindly copy the
   code without regressing at a later time.   So each replacement need to be
   evaluated.   Let us put together a checklist.

I am taking care of the kids on the weekend, but will start writing some of
these in the nights and hope to publish on Monday on the web site.   Then
anyone can contribute to the guidelines by making changes to the website
module on github.

Miguel

On Sat, Nov 15, 2014 at 10:37 AM, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at xamarin.com</A>&gt;
wrote:

&gt;<i> Hey,
</I>&gt;<i>
</I>&gt;<i> It is a tangential problem.
</I>&gt;<i>
</I>&gt;<i> The big problem with removing the profile right now, is that removing it
</I>&gt;<i> causes F# to fail building.
</I>&gt;<i>
</I>&gt;<i> We are trying to fix that.
</I>&gt;<i>
</I>&gt;<i> Miguel
</I>&gt;<i>
</I>&gt;<i> On Sat, Nov 15, 2014 at 10:05 AM, Kornel Pal &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">kornelpal at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>  Given these obstacles, I think that going forward with the originally
</I>&gt;&gt;<i> announced plan of removing non-4.5 profile support from the current Mono
</I>&gt;&gt;<i> code base - without introducing MS code yet - would make the gradual
</I>&gt;&gt;<i> adoption of MS code much easer.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 11/15/2014 2:11 PM, Miguel de Icaza wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It hasn't.   When we do, we will announce.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  Two issues: we worked with reference source and the github push is only
</I>&gt;&gt;<i> slowly getting the bits.   And the second is that the layout they are
</I>&gt;&gt;<i> pushing is different.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Saturday, November 15, 2014, Martin Thwaites &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monoforum at my2cents.co.uk</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> So has it been merged yet?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  I'm going to look at the Buffer stuff I shy'd away from before.  Then
</I>&gt;&gt;&gt;<i> look at the MachineKey.Protect stuff to implement the things I missed.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  I've got a separate question around the mismatch in conventions, but
</I>&gt;&gt;&gt;<i> I'll ask that on a different thread.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  I'm struggling to contain my excitement at the moment!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  Thanks,
</I>&gt;&gt;&gt;<i> Martin
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 15 November 2014 13:03, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at xamarin.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hello,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  We worked only on System.Configuration, regex, the crypto and web
</I>&gt;&gt;&gt;&gt;<i> stack.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  The rest you can do, including the web stack.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  I took a look at asp.net.   I think in the long term we want to
</I>&gt;&gt;&gt;&gt;<i> replace most of it, but it needs to be done in stages, as it still contains
</I>&gt;&gt;&gt;&gt;<i> a bunch of native stuff.m
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  Miguel
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Saturday, November 15, 2014, Martin Thwaites &lt;
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monoforum at my2cents.co.uk</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Hi Miguel,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Is there an ETA on merging your &quot;large fork&quot;.  I don't want to get
</I>&gt;&gt;&gt;&gt;&gt;<i> started on anything that you guys have already done?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Or could you tell us which areas to stay away from for now?
</I>&gt;&gt;&gt;&gt;&gt;<i> Personally, I would want to look at some of the system.web things.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thanks
</I>&gt;&gt;&gt;&gt;&gt;<i> Martin
</I>&gt;&gt;&gt;&gt;&gt;<i> On 15 Nov 2014 03:07, &quot;Miguel de Icaza&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at xamarin.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Hey guys,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  Sami reached out to me, and was wondering how to get started in
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> bringing some code to Mono, in particular WCF to Mono.   So I wrote this
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> small guide for newcomers.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  I would say it takes a couple of steps:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>    - Build your own local version of Mono on Linux.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>    - Make sure it works &quot;mcs&quot; should be able to run after installing
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>    it.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>    - Run a trivial self-hosted WCF server/client
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>    - Make a trivial change to the WCF class library, and install
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>    this version to test you can make changes locally and have them run:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>       - cd mono/mcs/class/System.ServiceModel
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>       - Make changes
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>       - make install
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>       - Run your test again in another window
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>       - Repeat
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>    - Make sure you can run the test suite:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>       - cd mono/mcs/class/System.ServiceModel
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>       - make run-test-local
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Once you are ready, you can start importing code.   Ideally, you want
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> to go for high-value targets: the most buggy parts of Mono's stack (you can
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> check bugzilla for reports on memory usage, bugs).   Or you can pick a
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> missing feature.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  To import code, modify the relevant &quot;.sources&quot; file in the
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> System.ServiceModel directory (where you ran the test) and replace a local
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> file, with a reference to the &quot;referencesource&quot;.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  Chances are, you will need to make changes to the &quot;referencesource&quot;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> code, since a lot of it is Windows specific.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  Miguel
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> On Fri, Nov 14, 2014 at 5:25 PM, Sami Ben Grine &lt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">SBen-Grine at axarosenberg.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>  Sweet &#8211; is there anything I can do to make progress?
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> I am somewhat ignorant about Mono but I am pretty ok with .NET and
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Linux.
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> thanks
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">listMono-devel-list at lists.ximian.comhttp</A>://lists.ximian.com/mailman/listinfo/mono-devel-list
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141115/6d4e85d0/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141115/6d4e85d0/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042350.html">[Mono-dev] Crash course on bringing .NET open sourced code to	Mono.
</A></li>
	<LI>Next message: <A HREF="042353.html">[Mono-dev] Crash course on bringing .NET open sourced code to	Mono.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42351">[ date ]</a>
              <a href="thread.html#42351">[ thread ]</a>
              <a href="subject.html#42351">[ subject ]</a>
              <a href="author.html#42351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
