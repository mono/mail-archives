<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Flag-ing security actions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Flag-ing%20security%20actions&In-Reply-To=1100624273.29655.85.camel%40pollux.novell">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008864.html">
   <LINK REL="Next"  HREF="008866.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Flag-ing security actions</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Flag-ing%20security%20actions&In-Reply-To=1100624273.29655.85.camel%40pollux.novell"
       TITLE="[Mono-devel-list] Flag-ing security actions">bmaurer at ximian.com
       </A><BR>
    <I>Tue Nov 16 22:01:39 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008864.html">[Mono-devel-list] Flag-ing security actions
</A></li>
        <LI>Next message: <A HREF="008866.html">[Mono-devel-list] Re: [Mono-patches] r36124 - trunk/mono/mono/mini
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8874">[ date ]</a>
              <a href="thread.html#8874">[ thread ]</a>
              <a href="subject.html#8874">[ subject ]</a>
              <a href="author.html#8874">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2004-11-16 at 11:57 -0500, Sebastien Pouliot wrote:
&gt;<i> So I'm trying to reduce... There are 4 (well for class/method) times
</I>&gt;<i> when actions needs to be categorized:
</I>&gt;<i> 
</I>&gt;<i> * load time;
</I>&gt;<i> 	- check for [NonCas]InheritanceDemand[Choice] actions;
</I>&gt;<i> * JIT time (2);
</I>&gt;<i> 	- check for [NonCas]LinkDemand[Choice] actions;
</I>&gt;<i> 	- generate code for [NonCas]Demand[Choice] actions;
</I>&gt;<i> * Run time
</I>&gt;<i> 	- check for stack modifiers: Assert, Deny and PermitOnly
</I>&gt;<i> 
</I>&gt;<i> Still too much but...
</I>&gt;<i> 
</I>&gt;<i> Load time is less problematic because
</I>&gt;<i> - it happens only once;
</I>&gt;<i> - it happens first and always (so it's great place to set the flags ;-)
</I>&gt;<i> 
</I>&gt;<i> JIT code generation also only happen once (well if the method gets
</I>&gt;<i> JITted) so doing a &quot;full lookup&quot; in the metadata wouldn't be &quot;too bad&quot;.
</I>
Yeah, perf is not really an issue there (well, as long as you keep
things sane :-).

&gt;<i> So it could be squeezed into 2 bits like this:
</I>&gt;<i> 
</I>&gt;<i> HasSecurity and bit 0 -&gt; [NonCas]LinkDemand[Choice]
</I>&gt;<i> HasSecurity and bit 1 -&gt; Stack modifiers (Assert | Deny | PermitOnly)
</I>
The jit info structure could be used to hold these bits. That structure
is created for fewer methods (only those which are jitted...). Since you
don't need to cache this information for Jit/Load time, it is ok to use
this structure.


And, there just so happens to be a space in the jit info for 31 bools!
What more could one ask for?

-- 
Ben Maurer &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bmaurer at ximian.com</A>&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008864.html">[Mono-devel-list] Flag-ing security actions
</A></li>
	<LI>Next message: <A HREF="008866.html">[Mono-devel-list] Re: [Mono-patches] r36124 - trunk/mono/mono/mini
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8874">[ date ]</a>
              <a href="thread.html#8874">[ thread ]</a>
              <a href="subject.html#8874">[ subject ]</a>
              <a href="author.html#8874">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
