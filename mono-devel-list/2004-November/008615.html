<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Thread.CurrentCulture and appdomains
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Thread.CurrentCulture%20and%20appdomains&In-Reply-To=295e750a04103008561cd25d62%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008613.html">
   <LINK REL="Next"  HREF="008619.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Thread.CurrentCulture and appdomains</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Thread.CurrentCulture%20and%20appdomains&In-Reply-To=295e750a04103008561cd25d62%40mail.gmail.com"
       TITLE="[Mono-devel-list] Thread.CurrentCulture and appdomains">lupus at ximian.com
       </A><BR>
    <I>Tue Nov  2 09:11:07 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008613.html">[Mono-devel-list] Current state of mono-debugger
</A></li>
        <LI>Next message: <A HREF="008619.html">[Mono-devel-list] Thread.CurrentCulture and appdomains
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8615">[ date ]</a>
              <a href="thread.html#8615">[ thread ]</a>
              <a href="subject.html#8615">[ subject ]</a>
              <a href="author.html#8615">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/30/04 Zoltan Varga wrote:
&gt;<i> Since getting the current culture occurs far more often then setting/modifying
</I>&gt;<i> it, the per-domain CultureInfo objects could be cached somehow. The problem 
</I>&gt;<i> with this approach is that these caches need to be invalidated if a new culture
</I>&gt;<i> is set or the contents of the culture changes. The former can be detected 
</I>&gt;<i> since it involves a call to Thread:set_CurrentCulture, while the later cannot.
</I>&gt;<i> On solution to this problem is to modify the CurrentCulture class to report
</I>&gt;<i> changes to the Thread (s) that point to it. But user created custom CultureInfo
</I>&gt;<i> subclasses would not be able to do this. Assuming custom subclasses are rarely 
</I>&gt;<i> used, caching could be disabled in this case.
</I>
Does the culture propagate to the calling appdomain:
	appdomain1: culture a
	-&gt; appdomain2
		change culture tu b and return
	appdomain1: culture a or b?

Anyway, I think the culture needs to be marshaled when going from
an appdomain to the other. You can take advantage of the IsReadOnly
property to enable the cache.
Thread.CurrentCulture needs to be fast so it's better to shift the cost 
to appdomain transitions.

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008613.html">[Mono-devel-list] Current state of mono-debugger
</A></li>
	<LI>Next message: <A HREF="008619.html">[Mono-devel-list] Thread.CurrentCulture and appdomains
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8615">[ date ]</a>
              <a href="thread.html#8615">[ thread ]</a>
              <a href="subject.html#8615">[ subject ]</a>
              <a href="author.html#8615">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
