<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Mono on AIX preliminary status report  [Virus checked]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Mono%20on%20AIX%20preliminary%20status%20report%20%20%5BVirus%20checked%5D&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009124.html">
   <LINK REL="Next"  HREF="009128.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Mono on AIX preliminary status report  [Virus checked]</H1>
    <B>Winfried.Harbecke at Extern.Sparkassen-Informatik.de</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Mono%20on%20AIX%20preliminary%20status%20report%20%20%5BVirus%20checked%5D&In-Reply-To="
       TITLE="[Mono-devel-list] Mono on AIX preliminary status report  [Virus checked]">Winfried.Harbecke at Extern.Sparkassen-Informatik.de
       </A><BR>
    <I>Tue Nov 30 02:17:27 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009124.html">[Mono-devel-list] AIX ports of Mono?
</A></li>
        <LI>Next message: <A HREF="009128.html">[Mono-devel-list] Re: [Mono-patches] r36815 - trunk/mcs/tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9126">[ date ]</a>
              <a href="thread.html#9126">[ thread ]</a>
              <a href="subject.html#9126">[ subject ]</a>
              <a href="author.html#9126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just a status report in case someone else runs into the same problems I ran
into (I want to avoid my research results getting lost.    :-)

There is some evidence supporting the diagnosis that the segmentation
faults in glib
regression tests resulted from incorrectly linked shared/static libraries
and executables:

      1) the crashes in strtod-test occurred in procedure descriptor
      dereferencing &quot;glue&quot; code, which differs between shared and static
linking

      2) debugging the code preceeding the crash, I see a faulty procedure
      descriptor within setlocale(2)

      3) apparently there are two versions of setlocale linked into the
binary,
      one from libc, the other from librtl

      4) strtod-test does not crash when executed in an AIX 5.1 (GCC, AIX
as/ld)
      environment with binary or source glib from

<A HREF="http://www-1.ibm.com/servers/aix/products/aixos/linux/download.html">http://www-1.ibm.com/servers/aix/products/aixos/linux/download.html</A>
      and
            <A HREF="http://gnome.bullfreeware.com/new_index.html:">http://gnome.bullfreeware.com/new_index.html:</A>

                  gettext-0.10.39-2
                  zlib-1.1.4-1
                  zlib-devel-1.1.4-1
                  glib2-2.4.0-2
                  glib2-devel-2.4.0-2

      5) the AIX toolbox README

<A HREF="ftp://ftp.software.ibm.com/aix/freeSoftware/aixtoolbox/README.txt">ftp://ftp.software.ibm.com/aix/freeSoftware/aixtoolbox/README.txt</A>
      indicates that glib had to be linked with run time linking enabled in
order to
      handle circular library dependencies

Actually, the glib autoconf setup has a lot of AIX specific machinery
dealing with
AIX ld idiosyncrasies, which from my perspective an AIX mono port has to
mimic.
Basically, shared and static libraries should not be mixed (i.e. since some
libraries
must be shared, they all should be), library objects must be linked with
&quot;-G&quot;, and
executables must be linked with &quot;-brtl&quot;. As far as I can tell, the glib
autoconf setup
follows these lines when configured with
      LDFLAGS=&quot;-Wl,-brtl&quot; ./configure

There is still some work ahead like figuring out if there are relevant
autoconf setup
patches for AIX prior to glib2-2.4.0-2 and if there are AIX specific
autoconf extensions
that were used by the glib autoconf setup which have to be ported to the
mono
autoconf setup. Once that is done, I would like to develop a clean set of
patches
for AIX 5.1/GCC without the trampoline extensions referred to in earlier
postings
by &lt;bernard at ugs dot com&gt; in order to separate the dirty work from the
substantial.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009124.html">[Mono-devel-list] AIX ports of Mono?
</A></li>
	<LI>Next message: <A HREF="009128.html">[Mono-devel-list] Re: [Mono-patches] r36815 - trunk/mcs/tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9126">[ date ]</a>
              <a href="thread.html#9126">[ thread ]</a>
              <a href="subject.html#9126">[ subject ]</a>
              <a href="author.html#9126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
