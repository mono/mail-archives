<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono&#8217;s new TLS provider
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20%3D%3Futf-8%3Fq%3FMono%3DE2%3D80%3D99s_new_TLS_provider%3F%3D&In-Reply-To=%3CCAMHWd167nc0XdpHJvu7kCo2GhRU%2BfZdsoomUEN%2B3kx5qVWuxQQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043349.html">
   <LINK REL="Next"  HREF="043351.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono&#8217;s new TLS provider</H1>
    <B>Martin Baulig</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20%3D%3Futf-8%3Fq%3FMono%3DE2%3D80%3D99s_new_TLS_provider%3F%3D&In-Reply-To=%3CCAMHWd167nc0XdpHJvu7kCo2GhRU%2BfZdsoomUEN%2B3kx5qVWuxQQ%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Mono&#8217;s new TLS provider">martin.baulig at xamarin.com
       </A><BR>
    <I>Mon Oct 26 22:01:10 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="043349.html">[Mono-dev] Link errors with mono-llvm
</A></li>
        <LI>Next message: <A HREF="043351.html">[Mono-dev] Clarifying the relationship between docs/ and the website
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43350">[ date ]</a>
              <a href="thread.html#43350">[ thread ]</a>
              <a href="subject.html#43350">[ subject ]</a>
              <a href="author.html#43350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

As described by Miguel in the &#8220;State of Tls in Mono
&lt;<A HREF="http://tirania.org/blog/archive/2015/Aug-27.html">http://tirania.org/blog/archive/2015/Aug-27.html</A>&gt;&#8221; [1] we have been
working on a new TLS implementation for Mono, one that would upgrade our
TLS stack, and one that would allow us to reuse some of the higher level
pieces from Microsoft&#8217;s networking stack, read that post for more details
on the scope of the project.

Mono&#8217;s master branch now has the ability to load alternative TLS
implementations.   We added this code so we can start testing our new TLS
implementation side-by-side the code that is in use today, and also so that
we can provide both platform-specific backends or allow developers to
choose a different TLS implementation (like BoringSSL, OpenSSL or Amazon&#8217;s
s2n).

This is achieved by making our SSL transport pluggable, this allows
HttpWebRequest and other classes to use the new TLS stack.

Today, a regular Mono checkout will default to the existing Mono SSL/TLS
implementation which supports a number of ciphers and TLS levels up to 1.0,
so nothing has changed and we have one alternative implementation
available: mono-tls.

mono-tls is a purely managed implementation of TLS 1.0, 1.1 and 1.2
(filling the gap that we had).   To use it, you need to build the mono-tls
&lt;<A HREF="https://github.com/mono/mono-tls">https://github.com/mono/mono-tls</A>&gt; [2] module, once this is build, you will
have to reference the following libraries: Mono.Security.NewTls,
Mono.Security.NewTls.Interface, Mono.Security.Providers.NewTls.

Once you have these, you should add this code to your main program:

      MonoTlsProviderFactory.InstallProvider (new NewTlsProvider ());

Then uses of HttpWebRequest, FtpWebRequest and the Smtp client will all use
the new TLS stack.

More details are available in the architecture document [3].

TLS State

While we have added an extensive test suite to this new TLS implementation
and tested this against a wide variety of TLS servers and configurations,
we have not completed a security audit of its implementation.   While we
have taken every step to ensure that we follow all the best practices when
implementing a security stack, we want to get this code reviewed by third
parties, and we want to complete a comprehensive security audit of the code
before we would even consider transitioning this as the default.

Future Work - Pluggability/SslStream

We are going to be making the SslStream the proxy endpoint, for two
reasons: (a) it would make SslStream usable with the new provider interface
and (b) it would simplify some of the special code that lives in different
places in the class libraries to use the new TLS implementation.

We will also likely introduce a MONO_TLS_PROVIDER environment variable that
controls the implementation, so that we make it easier to test the
implementations during the testing phase.

Future Work - Other Providers

We are currently developing a provider for Apple platforms that will use
Apple&#8217;s unmanaged SSL implementation, and we will be adding an
implementation that use Google&#8217;s BoringSSL.   The idea being that on Apple,
you get to use the system provided implementation, and on other platforms,
we use the Google maintained one.

Please let me know if you have any questions, comments, feedback.   In
particular, we would like to get you to find security holes in the
implementation.  We can offer a Xamarin shirt or a Xamarin monkey as a
prize for finding holes in the new implementation.

References

[1] <A HREF="http://tirania.org/blog/archive/2015/Aug-27.html">http://tirania.org/blog/archive/2015/Aug-27.html</A>

[2] <A HREF="http://github.com/mono/mono-tls">http://github.com/mono/mono-tls</A>

[3] <A HREF="https://github.com/mono/mono-tls/blob/master/ARCHITECTURE.md">https://github.com/mono/mono-tls/blob/master/ARCHITECTURE.md</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20151026/9eaa6dc2/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20151026/9eaa6dc2/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043349.html">[Mono-dev] Link errors with mono-llvm
</A></li>
	<LI>Next message: <A HREF="043351.html">[Mono-dev] Clarifying the relationship between docs/ and the website
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43350">[ date ]</a>
              <a href="thread.html#43350">[ thread ]</a>
              <a href="subject.html#43350">[ subject ]</a>
              <a href="author.html#43350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
