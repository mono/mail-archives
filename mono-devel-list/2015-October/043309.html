<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Having a problem with signed XML files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Having%20a%20problem%20with%20signed%20XML%20files&In-Reply-To=%3C1444300965335-4666719.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043317.html">
   <LINK REL="Next"  HREF="043318.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Having a problem with signed XML files</H1>
    <B>Numpsy</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Having%20a%20problem%20with%20signed%20XML%20files&In-Reply-To=%3C1444300965335-4666719.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] Having a problem with signed XML files">webby at beardmouse.org.uk
       </A><BR>
    <I>Thu Oct  8 10:42:45 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="043317.html">[Mono-dev]	System.DirectoryServices.DirectoryEntry.ObjectSecurity property
</A></li>
        <LI>Next message: <A HREF="043318.html">[Mono-dev] System.Diagnostics.Process behaves differently in and outside of a NUnit test case
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43309">[ date ]</a>
              <a href="thread.html#43309">[ thread ]</a>
              <a href="subject.html#43309">[ subject ]</a>
              <a href="author.html#43309">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,
I have a Windows product that uses signed XML files which I'm trying to get
running under Mono on OSX, and I'm running into a verification failure at
runtime.
I'm pretty hazy about how the internals of this stuff works, but debugging
through it, the issue seems to be occurring in
System.Security.Cryptography.Xml.SignedXml.GetReferenceHash(), due to the
call to FixupNamespaceNodes added @

<A HREF="https://github.com/mono/mono/commit/b2f49647aaa8a62b90c21db8211cbe15723dd132#diff-92a9806a06b3715be52b2894cb7546d6R326">https://github.com/mono/mono/commit/b2f49647aaa8a62b90c21db8211cbe15723dd132#diff-92a9806a06b3715be52b2894cb7546d6R326</A>

Which takes the XML in the form

&lt;Object Id=&quot;LICENCES&quot;&gt;
    &lt;ArrayOfString xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot;
xmlns:xsd=&quot;<A HREF="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</A>&quot; xmlns=&quot;&quot;&gt;
      &lt;string&gt;1234&lt;/string&gt;
      ...
    &lt;/ArrayOfString&gt;
&lt;/Object&gt;

And copies the xmlns attributes on the ArrayOfString node onto the Object
node. If I skip over the FixupNamespaceNodes call, it all appears to work.

Anyone have any thoughts on how to proceed with this? The 'I haven't solved
the puzzle on why it is needed though.' comment on the commit doesn't fill
me with confidence :-(

Thanks,
Richard Webb



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Having-a-problem-with-signed-XML-files-tp4666719.html">http://mono.1490590.n4.nabble.com/Having-a-problem-with-signed-XML-files-tp4666719.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043317.html">[Mono-dev]	System.DirectoryServices.DirectoryEntry.ObjectSecurity property
</A></li>
	<LI>Next message: <A HREF="043318.html">[Mono-dev] System.Diagnostics.Process behaves differently in and outside of a NUnit test case
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43309">[ date ]</a>
              <a href="thread.html#43309">[ thread ]</a>
              <a href="subject.html#43309">[ subject ]</a>
              <a href="author.html#43309">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
