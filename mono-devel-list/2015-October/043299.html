<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] How to use lib64 in mono 4.3?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20How%20to%20use%20lib64%20in%20mono%204.3%3F&In-Reply-To=%3CCANqeOFpFu%3D92nMCP5d-NKkGpA42oMj-9iOEbnHbmDjb7mT5HBg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043297.html">
   <LINK REL="Next"  HREF="043300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] How to use lib64 in mono 4.3?</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20How%20to%20use%20lib64%20in%20mono%204.3%3F&In-Reply-To=%3CCANqeOFpFu%3D92nMCP5d-NKkGpA42oMj-9iOEbnHbmDjb7mT5HBg%40mail.gmail.com%3E"
       TITLE="[Mono-dev] How to use lib64 in mono 4.3?">miguel at xamarin.com
       </A><BR>
    <I>Tue Oct  6 17:24:56 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="043297.html">[Mono-dev] How to use lib64 in mono 4.3?
</A></li>
        <LI>Next message: <A HREF="043300.html">[Mono-dev] How to use lib64 in mono 4.3?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43299">[ date ]</a>
              <a href="thread.html#43299">[ thread ]</a>
              <a href="subject.html#43299">[ subject ]</a>
              <a href="author.html#43299">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, that looks like an issue with your Autoconf installation (did you run
autogen, or is this the one we ship)?

In any case the challenge is that your lib64 directory needs to be listed
in your ld.so.conf, otherwise calls to dlopen will fail.

On Tue, Oct 6, 2015 at 12:17 PM, <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">psantosl at codicesoftware.com</A> &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">psantosl at codicesoftware.com</A>&gt; wrote:

&gt;<i> Hi again,
</I>&gt;<i>
</I>&gt;<i> I'll try to be clearer this time, I think I was too cryptic before :)
</I>&gt;<i>
</I>&gt;<i> I just built my mono from latest now this way:
</I>&gt;<i>
</I>&gt;<i> $ ./configure --prefix=/home/pablo/monobin-4.3-head &amp;&amp; make &amp;&amp; make install
</I>&gt;<i>
</I>&gt;<i> $ mono --version
</I>&gt;<i> Mono JIT compiler version 4.3.0 (master/020a7c6 Tue Oct  6 18:06:22 CEST
</I>&gt;<i> 2015)
</I>&gt;<i> Copyright (C) 2002-2014 Novell, Inc, Xamarin Inc and Contributors.
</I>&gt;<i> www.mono-project.com
</I>&gt;<i>     TLS:           __thread
</I>&gt;<i>     SIGSEGV:       altstack
</I>&gt;<i>     Notifications: epoll
</I>&gt;<i>     Architecture:  amd64
</I>&gt;<i>     Disabled:      none
</I>&gt;<i>     Misc:          softdebug
</I>&gt;<i>     LLVM:          supported, not enabled.
</I>&gt;<i>     GC:            sgen
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have this program:
</I>&gt;<i>
</I>&gt;<i> $ cat Program.cs
</I>&gt;<i> using System;
</I>&gt;<i>
</I>&gt;<i> using Mono.Unix;
</I>&gt;<i>
</I>&gt;<i> namespace testunixdirinfo
</I>&gt;<i> {
</I>&gt;<i>     class MainClass
</I>&gt;<i>     {
</I>&gt;<i>         public static void Main (string[] args)
</I>&gt;<i>         {
</I>&gt;<i>             UnixDirectoryInfo dir = new UnixDirectoryInfo (args [0]);
</I>&gt;<i>         }
</I>&gt;<i>     }
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> Then I build my program:
</I>&gt;<i>
</I>&gt;<i> $ mcs Program.cs -r Mono.Posix.dll
</I>&gt;<i>
</I>&gt;<i> And run it and get this:
</I>&gt;<i>
</I>&gt;<i> $ mono Program.exe .
</I>&gt;<i>
</I>&gt;<i> Unhandled Exception:
</I>&gt;<i> System.TypeInitializationException: The type initializer for
</I>&gt;<i> 'Mono.Unix.Native.Syscall' threw an exception. ---&gt;
</I>&gt;<i> System.DllNotFoundException: */home/pablo/monobin-4.**3*
</I>&gt;<i> *-head/lib/libMonoPosixHelper.so*
</I>&gt;<i>   at (wrapper managed-to-native) Mono.Unix.Native.Syscall:get_at_fdcwd ()
</I>&gt;<i>   at Mono.Unix.Native.Syscall..cctor () &lt;0x41356870 + 0x0002b&gt; in
</I>&gt;<i> &lt;filename unknown&gt;:0
</I>&gt;<i>   --- End of inner exception stack trace ---
</I>&gt;<i>   at Mono.Unix.UnixDirectoryInfo.GetCurrentDirectory () &lt;0x41356550 +
</I>&gt;<i> 0x0008f&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>   at Mono.Unix.UnixPath._GetFullPath (System.String path) &lt;0x41356430 +
</I>&gt;<i> 0x0002b&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>   at Mono.Unix.UnixPath.GetFullPath (System.String path) &lt;0x413563f0 +
</I>&gt;<i> 0x0000f&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>   at Mono.Unix.UnixFileSystemInfo..ctor (System.String path) &lt;0x41355f80 +
</I>&gt;<i> 0x00053&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>   at Mono.Unix.UnixDirectoryInfo..ctor (System.String path) &lt;0x41355f50 +
</I>&gt;<i> 0x00013&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>   at testunixdirinfo.MainClass.Main (System.String[] args) &lt;0x41355d40 +
</I>&gt;<i> 0x00043&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i> [ERROR] FATAL UNHANDLED EXCEPTION: System.TypeInitializationException: The
</I>&gt;<i> type initializer for 'Mono.Unix.Native.Syscall' threw an exception. ---&gt;
</I>&gt;<i> System.DllNotFoundException:
</I>&gt;<i> /home/pablo/monobin-4.2/lib/libMonoPosixHelper.so
</I>&gt;<i>   at (wrapper managed-to-native) Mono.Unix.Native.Syscall:get_at_fdcwd ()
</I>&gt;<i>   at Mono.Unix.Native.Syscall..cctor () &lt;0x41356870 + 0x0002b&gt; in
</I>&gt;<i> &lt;filename unknown&gt;:0
</I>&gt;<i>   --- End of inner exception stack trace ---
</I>&gt;<i>   at Mono.Unix.UnixDirectoryInfo.GetCurrentDirectory () &lt;0x41356550 +
</I>&gt;<i> 0x0008f&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>   at Mono.Unix.UnixPath._GetFullPath (System.String path) &lt;0x41356430 +
</I>&gt;<i> 0x0002b&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>   at Mono.Unix.UnixPath.GetFullPath (System.String path) &lt;0x413563f0 +
</I>&gt;<i> 0x0000f&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>   at Mono.Unix.UnixFileSystemInfo..ctor (System.String path) &lt;0x41355f80 +
</I>&gt;<i> 0x00053&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>   at Mono.Unix.UnixDirectoryInfo..ctor (System.String path) &lt;0x41355f50 +
</I>&gt;<i> 0x00013&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>   at testunixdirinfo.MainClass.Main (System.String[] args) &lt;0x41355d40 +
</I>&gt;<i> 0x00043&gt; in &lt;filename unknown&gt;:0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It doesn't find the libMonoPosixHelper.so under &quot;lib&quot; because it is
</I>&gt;<i> actually under lib64 (I just built my mono with make, nothing special :-S).
</I>&gt;<i>
</I>&gt;<i> $ ls /home/pablo/monobin-4.3-head/
</I>&gt;<i> bin/     etc/     include/ lib/     lib64/   share/
</I>&gt;<i>
</I>&gt;<i> $ ls /home/pablo/monobin-4.3-head/lib64/
</I>&gt;<i> libikvm-native.a           libMonoPosixHelper.la
</I>&gt;<i> libmono-profiler-log.so
</I>&gt;<i> libikvm-native.la          libMonoPosixHelper.so
</I>&gt;<i> libmono-profiler-log.so.0
</I>&gt;<i> libikvm-native.so          libmono-profiler-aot.a
</I>&gt;<i> libmono-profiler-log.so.0.0.0
</I>&gt;<i> libmono-2.0.a              libmono-profiler-aot.la
</I>&gt;<i> libmonosgen-2.0.a
</I>&gt;<i> libmono-2.0.la             libmono-profiler-aot.so
</I>&gt;<i> libmonosgen-2.0.la
</I>&gt;<i> libmono-2.0.so             libmono-profiler-aot.so.0
</I>&gt;<i> libmonosgen-2.0.so
</I>&gt;<i> libmono-2.0.so.1           libmono-profiler-aot.so.0.0.0
</I>&gt;<i> libmonosgen-2.0.so.1
</I>&gt;<i> libmono-2.0.so.1.0.0       libmono-profiler-iomap.a
</I>&gt;<i> libmonosgen-2.0.so.1.0.0
</I>&gt;<i> libmonoboehm-2.0.a         libmono-profiler-iomap.la
</I>&gt;<i> libMonoSupportW.a
</I>&gt;<i> libmonoboehm-2.0.la        libmono-profiler-iomap.so
</I>&gt;<i> libMonoSupportW.la
</I>&gt;<i> libmonoboehm-2.0.so        libmono-profiler-iomap.so.0
</I>&gt;<i> libMonoSupportW.so
</I>&gt;<i> libmonoboehm-2.0.so.1      libmono-profiler-iomap.so.0.0.0  mono
</I>&gt;<i> libmonoboehm-2.0.so.1.0.0  libmono-profiler-log.a           pkgconfig
</I>&gt;<i> libMonoPosixHelper.a       libmono-profiler-log.la
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm obviously doing something wrong, but I'd love to know what should I do
</I>&gt;<i> to configure it correctly. (BTW, just copying lib64 inside lib makes it
</I>&gt;<i> work, but I guess this is not the way to do it :P).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks again!
</I>&gt;<i>
</I>&gt;<i> pablo
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 10/5/2015 22:42, Miguel de Icaza wrote:
</I>&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I do not follow, what &quot;new lib64&quot; thing?   That sounds like a packaging
</I>&gt;<i> issue, more than a Mono issue.
</I>&gt;<i>
</I>&gt;<i> Miguel.
</I>&gt;<i>
</I>&gt;<i> On Mon, Oct 5, 2015 at 12:44 PM, &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">psantosl at codicesoftware.com</A>&gt;
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">psantosl at codicesoftware.com</A> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">psantosl at codicesoftware.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We're having trouble understanding the new lib64 thing in mono 4.3 (we're
</I>&gt;&gt;<i> trying to move Plastic SCM to 4.3 now).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A simple app like this one:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> using Mono.Unix;
</I>&gt;&gt;<i> namespace testunixdirinfo
</I>&gt;&gt;<i> {
</I>&gt;&gt;<i>     class MainClass
</I>&gt;&gt;<i>     {
</I>&gt;&gt;<i>         public static void Main(string[] args)
</I>&gt;&gt;<i>         {
</I>&gt;&gt;<i>             UnixDirectoryInfo dir = new UnixDirectoryInfo(args[0]);
</I>&gt;&gt;<i>         }
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Fails saying it can't find lib/libMonoPosixHelper.so, which is now under
</I>&gt;&gt;<i> lib64 instead.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It is easy to fix just moving it under lib inside your mono binaries, but
</I>&gt;&gt;<i> I guess this is not the right way to do it :confounded:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is the build we're using Mono JIT compiler version 4.3.0
</I>&gt;&gt;<i> (explicit/b6dfce6.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> pablo
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20151006/56911d06/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20151006/56911d06/attachment-0001.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043297.html">[Mono-dev] How to use lib64 in mono 4.3?
</A></li>
	<LI>Next message: <A HREF="043300.html">[Mono-dev] How to use lib64 in mono 4.3?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43299">[ date ]</a>
              <a href="thread.html#43299">[ thread ]</a>
              <a href="subject.html#43299">[ subject ]</a>
              <a href="author.html#43299">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
