<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] GSoC - AST Verifier for C# compiler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20GSoC%20-%20AST%20Verifier%20for%20C%23%20compiler&In-Reply-To=%3C4F7418A0.5090201%40xamarin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038703.html">
   <LINK REL="Next"  HREF="038697.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] GSoC - AST Verifier for C# compiler</H1>
    <B>Mike Kr&#252;ger</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20GSoC%20-%20AST%20Verifier%20for%20C%23%20compiler&In-Reply-To=%3C4F7418A0.5090201%40xamarin.com%3E"
       TITLE="[Mono-dev] GSoC - AST Verifier for C# compiler">mkrueger at xamarin.com
       </A><BR>
    <I>Thu Mar 29 08:09:04 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038703.html">[Mono-dev] GSoC - AST Verifier for C# compiler
</A></li>
        <LI>Next message: <A HREF="038697.html">[Mono-dev] System.Json is ready to be replaced
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38709">[ date ]</a>
              <a href="thread.html#38709">[ thread ]</a>
              <a href="subject.html#38709">[ subject ]</a>
              <a href="author.html#38709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I would like to have whitespaces (and EOL as other special node) in the 
ast as well as non compileable stuff as maybe TextNode, but that kills 
performance even more. Doing pre processor directives and comments with 
the specials bag and inserting them afterwards slows done the parse 
process much. But they are semantically required (XmlDocs, #define etc.) 
- and they are included in the AST, therefore it's all done on this 
side. (Except there is some kind of comment/pre processor directive 
missing there)

Would be easier if we had a lexer that was build for generating such AST 
(btw. I think it may be possible to do it and use mcs as parser, but 
that's another story).

Doing that for whitespaces isn't worth it atm - to have all information 
about a file you need the CompilationUnit AND the text. It's possible to 
get the whitespace information (that's the space between two nodes. 
GetTextBetween (curNode.EndLocation, curNode.NextNode.StartLocation) 
gives you that. (And lastNode.EndLocation - document.EndLocation is the 
unparseable text). That is the major difference between us and rolyn,
but not a major drawback IMO the original text is always available.

The NRefactory version of mcs has some patches to make such thing as 
NRefactory possible. We try to keep the change set low, but #1 prio is 
that it works for monodevelop features.

Regards
Mike

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> some more questions:
</I>&gt;<i> I see that NRefactory doesn't deal with whitespace at all and
</I>&gt;<i> processes comments and preprocessor directives using SpecialsBag
</I>&gt;<i> that's not present in Mono.CSharp.
</I>&gt;<i> Can I ignore whitespace too? And does that mean I have to add (or copy
</I>&gt;<i> from NRefactory) support for comments and preprocessor directives to
</I>&gt;<i> the AST?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Petr Onderka
</I>&gt;<i>
</I>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038703.html">[Mono-dev] GSoC - AST Verifier for C# compiler
</A></li>
	<LI>Next message: <A HREF="038697.html">[Mono-dev] System.Json is ready to be replaced
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38709">[ date ]</a>
              <a href="thread.html#38709">[ thread ]</a>
              <a href="subject.html#38709">[ subject ]</a>
              <a href="author.html#38709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
