<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [db|sql]metal using a custom DbSchemaLoader ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20%5Bdb%7Csql%5Dmetal%20using%20a%20custom%20DbSchemaLoader%20%3F&In-Reply-To=%3CFC3D99BB-BD42-41E9-ACEC-E416805A466A%40vt.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038652.html">
   <LINK REL="Next"  HREF="038654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [db|sql]metal using a custom DbSchemaLoader ?</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20%5Bdb%7Csql%5Dmetal%20using%20a%20custom%20DbSchemaLoader%20%3F&In-Reply-To=%3CFC3D99BB-BD42-41E9-ACEC-E416805A466A%40vt.edu%3E"
       TITLE="[Mono-dev] [db|sql]metal using a custom DbSchemaLoader ?">jonpryor at vt.edu
       </A><BR>
    <I>Thu Mar  8 18:56:15 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038652.html">[Mono-dev] [db|sql]metal using a custom DbSchemaLoader ?
</A></li>
        <LI>Next message: <A HREF="038654.html">[Mono-dev] Does any work translate MONO-IR back to MSIL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38653">[ date ]</a>
              <a href="thread.html#38653">[ thread ]</a>
              <a href="subject.html#38653">[ subject ]</a>
              <a href="author.html#38653">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mar 8, 2012, at 8:16 AM, Cyrille Ch&#233;p&#233;lov wrote:
&gt;<i>     Would a patch removing the &quot;#if !MONO_STRICT .. public&quot; condition from ISchemaLoader &amp; common implementations be accepted in Mono System.Data.Linq ?
</I>
No.

&gt;<i> I notice Mono's S.D.Linq already leaks some bits from DbLinq.Util
</I>
Then that's a bug. Mono's System.Data.Linq.dll shouldn't export anything not present in .NET.

What you should instead do is use DbLinq &quot;proper&quot; and bundle it with your app instead of using System.Data.Linq.dll. This will give you proper access to all that DbLinq provides, without making things horribly confusing if/when you run your app on .NET.

&gt;<i>     DbLinq.Vendor.DbSchemaLoader's MapDbType method has a smell in its &quot;switch/case&quot; statement. Apparently, that has been written much earlier than the availability of a proper SchemaLoader child class per provider.  So in effect, all type names from all dialects are tested against every database, regardless of the provider. Wouldn't it be sensible to push down the type tests into each provider ? I would like to do this.
</I>
I'd personally prefer to nuke that type from orbit and instead require that everything use DbSchemaLoader, as that asks the ADO.NET provider to do the database-type &lt;-&gt; managed type mappings, instead of hardcoding it within DbLinq itself. Far saner, and it's what the DbLinq.SqlServer provider does. (The DbLinq.Sqlite provider can also work with it.)

This should also be taken upstream with DbLinq...which is nigh unmaintained at this point. :-(

Yet another of the million things that should be done...

 - Jon

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038652.html">[Mono-dev] [db|sql]metal using a custom DbSchemaLoader ?
</A></li>
	<LI>Next message: <A HREF="038654.html">[Mono-dev] Does any work translate MONO-IR back to MSIL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38653">[ date ]</a>
              <a href="thread.html#38653">[ thread ]</a>
              <a href="subject.html#38653">[ subject ]</a>
              <a href="author.html#38653">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
