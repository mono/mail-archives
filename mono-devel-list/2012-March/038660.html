<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] bug 3860 - DirectoryInfo.GetFileSystemInfos returns a subdirectory that has unicode chars with the incorrect name
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20bug%203860%20-%20DirectoryInfo.GetFileSystemInfos%20returns%20a%0A%20subdirectory%20that%20has%20unicode%20chars%20with%20the%20incorrect%20name&In-Reply-To=%3C84DD5FE37A599D439AFD71AD5F760AA070340648%40EXMBX08.netplexity.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038659.html">
   <LINK REL="Next"  HREF="038661.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] bug 3860 - DirectoryInfo.GetFileSystemInfos returns a subdirectory that has unicode chars with the incorrect name</H1>
    <B>Jared Watts</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20bug%203860%20-%20DirectoryInfo.GetFileSystemInfos%20returns%20a%0A%20subdirectory%20that%20has%20unicode%20chars%20with%20the%20incorrect%20name&In-Reply-To=%3C84DD5FE37A599D439AFD71AD5F760AA070340648%40EXMBX08.netplexity.local%3E"
       TITLE="[Mono-dev] bug 3860 - DirectoryInfo.GetFileSystemInfos returns a subdirectory that has unicode chars with the incorrect name">jared at symform.com
       </A><BR>
    <I>Mon Mar 12 19:11:50 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038659.html">[Mono-dev] System.Runtime.Remoting.Channels.Tcp upgrade to Async
</A></li>
        <LI>Next message: <A HREF="038661.html">[Mono-dev] bug 3860 - DirectoryInfo.GetFileSystemInfos returns a subdirectory that has unicode chars with the incorrect name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38660">[ date ]</a>
              <a href="thread.html#38660">[ thread ]</a>
              <a href="subject.html#38660">[ subject ]</a>
              <a href="author.html#38660">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I opened bug 3860&lt;<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=3860">https://bugzilla.xamarin.com/show_bug.cgi?id=3860</A>&gt; earlier today, but I&#8217;m curious if anyone on the dev list has run into a similar issue or knows of a workaround.
<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=3860">https://bugzilla.xamarin.com/show_bug.cgi?id=3860</A>

Basically, on Mac OS X, Directory.CreateDirectory is used to create a sub directory with Unicode chars in the path (&#12505;&#12540;&#12488;&#12540;&#12532;&#12455;&#12531;).  When that directory is retrieved with DirectoryInfo.GetFileSystemInfos, the Name property is different than what it was created with.

The attached .out file has the output from the sample repro program after it was run on Mac OS X.

If you want to build the attached repro program:
csc /t:exe /out:UnicodeFileRepro.exe Program.cs

Thanks for any debugging ideas/workarounds!

- jared
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120312/cc082c8d/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120312/cc082c8d/attachment.html</A>&gt;
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Program.cs
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120312/cc082c8d/attachment.ksh">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120312/cc082c8d/attachment.ksh</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: unicode-file-repro.out
Type: application/octet-stream
Size: 202 bytes
Desc: unicode-file-repro.out
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120312/cc082c8d/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120312/cc082c8d/attachment.obj</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038659.html">[Mono-dev] System.Runtime.Remoting.Channels.Tcp upgrade to Async
</A></li>
	<LI>Next message: <A HREF="038661.html">[Mono-dev] bug 3860 - DirectoryInfo.GetFileSystemInfos returns a subdirectory that has unicode chars with the incorrect name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38660">[ date ]</a>
              <a href="thread.html#38660">[ thread ]</a>
              <a href="subject.html#38660">[ subject ]</a>
              <a href="author.html#38660">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
