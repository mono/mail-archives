<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Detecting Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Detecting%20Mono&In-Reply-To=002001c3f4af%2487522e70%242000a8c0%40jarekxp">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004065.html">
   <LINK REL="Next"  HREF="004071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Detecting Mono</H1>
    <B>Charlie Poole</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Detecting%20Mono&In-Reply-To=002001c3f4af%2487522e70%242000a8c0%40jarekxp"
       TITLE="[Mono-devel-list] Detecting Mono">cpoole at pooleconsulting.com
       </A><BR>
    <I>Mon Feb 16 12:52:48 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="004065.html">[Mono-devel-list] Detecting Mono
</A></li>
        <LI>Next message: <A HREF="004071.html">[Mono-devel-list] Detecting Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4070">[ date ]</a>
              <a href="thread.html#4070">[ thread ]</a>
              <a href="subject.html#4070">[ subject ]</a>
              <a href="author.html#4070">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jarek,

Elaborating on my earlier reply to Nick - Nunit itself /is/ one of those
apps that runs on multiple platforms and needs this facility. Currently,
we detect Win98 /in/ the test for AssemblyWatcher and just pass it if we
are on that platform. This seems better to me than ignoring, as yellow
is just another kind of red to me. :-)

That's where the logic comes from for simply leaving things out of the
test tree if they are for some other platform: they can never be run,
and none of the three colors really makes sense.

Now that I think of it, an ignore type check is probably at least as
common as a positive check. The syntax I was imagining was something
like:

	[Platform(&quot;net-1.0,net-1.1&quot;)]

Perhaps an alternative would be to also support

	[Platform( Exclude=&quot;mono&quot; )]

Charlie Poole
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">cpoole at pooleconsulting.com</A>



&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A> 
</I>&gt;<i> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>] On Behalf Of 
</I>&gt;<i> Jaroslaw Kowalski
</I>&gt;<i> Sent: Monday, February 16, 2004 9:09 AM
</I>&gt;<i> To: Nick Drochak; 'Charlie Poole'; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Cc: ! nant
</I>&gt;<i> Subject: Re: [Mono-devel-list] Detecting Mono
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; It'd be great if we had some attributes like &quot;IgnoreDotNet&quot; and
</I>&gt;<i> &quot;IgnoreMono&quot;
</I>&gt;<i> &gt; with which we could decorate a test to avoid running tests 
</I>&gt;<i> on specific 
</I>&gt;<i> &gt; CLR's.  My quick hack to the code would be to change
</I>&gt;<i> &gt; TestCaseBuilder.HasIgnoreAttribute() check for the full 
</I>&gt;<i> Ignore, or see
</I>&gt;<i> what
</I>&gt;<i> &gt; runtime we are on and check for the specific attributes accordingly.
</I>&gt;<i> 
</I>&gt;<i> How about using a textual name of the plaftorm for this 
</I>&gt;<i> purpose? The naming schema could be adopted from NAnt, e.g:
</I>&gt;<i> 
</I>&gt;<i> net-1.0
</I>&gt;<i> net-1.1
</I>&gt;<i> net-1.2
</I>&gt;<i> netcf-1.0
</I>&gt;<i> sscli-1.0
</I>&gt;<i> mono-1.0
</I>&gt;<i> 
</I>&gt;<i> This way we could even employ some wildcards. Like &quot;mono-1.*&quot; 
</I>&gt;<i> to represent any mono v1.x.
</I>&gt;<i> 
</I>&gt;<i> Same thing should apply to OSes (&quot;platforms&quot; in NAnt 
</I>&gt;<i> terminology). One should be able to run the test on a 
</I>&gt;<i> particular OS or platform. For example if your test uses 
</I>&gt;<i> filesystemwatcher it shouldn't be ran on Win95.
</I>&gt;<i> 
</I>&gt;<i> Some ideas below:
</I>&gt;<i> 
</I>&gt;<i> [Test]
</I>&gt;<i> [IgnoreOnFramework(&quot;net-1.0&quot;)]
</I>&gt;<i> void A()
</I>&gt;<i> {
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> [Test]
</I>&gt;<i> [IgnoreOnFramework(&quot;net-1.1&quot;)] // this would not run on .NET 
</I>&gt;<i> 1.1 void B() { }
</I>&gt;<i> 
</I>&gt;<i> [Test]
</I>&gt;<i> [IgnoreOnFramework(&quot;net-1.*&quot;)]    // this would not run on ALL .NET
</I>&gt;<i> platforms
</I>&gt;<i> void C()
</I>&gt;<i> {
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> [Test]
</I>&gt;<i> [IgnoreOnPlatform(Platform.Win32)]    // this would not run on Win32
</I>&gt;<i> platforms
</I>&gt;<i> void D()
</I>&gt;<i> {
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> [Test]
</I>&gt;<i> [IgnoreOnPlatform(Platform.Unix)]    // this would not run on 
</I>&gt;<i> Unix platforms
</I>&gt;<i> void E()
</I>&gt;<i> {
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> [Test]
</I>&gt;<i> [RunOnPlatform(Platform.Win32)]    // this would run only on 
</I>&gt;<i> Win32 platforms
</I>&gt;<i> void F()
</I>&gt;<i> {
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> [Test]
</I>&gt;<i> [RunOnFramework(&quot;mono-1.*&quot;)]    // this would run only on Mono
</I>&gt;<i> void G()
</I>&gt;<i> {
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> There are more (open source) tools that target multiple 
</I>&gt;<i> platforms/oses. I think it would be great to have some 
</I>&gt;<i> agreement on this attribute usage. For example in NAnt we're 
</I>&gt;<i> discussing the possibility of implementing os-specific or 
</I>&gt;<i> platform-specific tasks,types or functions in a single 
</I>&gt;<i> codebase. We've tentatively decided that using such 
</I>&gt;<i> attributes is a way to go.
</I>&gt;<i> 
</I>&gt;<i> BTW. I think that the &quot;excluded because of the framework/os&quot; 
</I>&gt;<i> status shouldn't be the same thing as &quot;ignored&quot; in NUnit. 
</I>&gt;<i> Tests are &quot;ignored&quot; because they are known to temporarily 
</I>&gt;<i> fail, while RunOn... and IgnoreOn... means something different here.
</I>&gt;<i> 
</I>&gt;<i> Jarek
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A> 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-">http://lists.ximian.com/mailman/listinfo/mono-</A>&gt; devel-list
</I>&gt;<i> 
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004065.html">[Mono-devel-list] Detecting Mono
</A></li>
	<LI>Next message: <A HREF="004071.html">[Mono-devel-list] Detecting Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4070">[ date ]</a>
              <a href="thread.html#4070">[ thread ]</a>
              <a href="subject.html#4070">[ subject ]</a>
              <a href="author.html#4070">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
