<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] New compiler--CIL/CTS questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20New%20compiler--CIL/CTS%20questions&In-Reply-To=AC4E9FFE068E2147A9E0568EB7A94D2C5CA2%40ibt-server1.iBankTech.NET">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004047.html">
   <LINK REL="Next"  HREF="004067.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] New compiler--CIL/CTS questions</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20New%20compiler--CIL/CTS%20questions&In-Reply-To=AC4E9FFE068E2147A9E0568EB7A94D2C5CA2%40ibt-server1.iBankTech.NET"
       TITLE="[Mono-devel-list] New compiler--CIL/CTS questions">lupus at ximian.com
       </A><BR>
    <I>Mon Feb 16 07:37:52 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="004047.html">[Mono-devel-list] New compiler--CIL/CTS questions
</A></li>
        <LI>Next message: <A HREF="004067.html">[Mono-devel-list] New compiler--CIL/CTS questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4058">[ date ]</a>
              <a href="thread.html#4058">[ thread ]</a>
              <a href="subject.html#4058">[ subject ]</a>
              <a href="author.html#4058">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/14/04 Chris Capel wrote:
&gt;<i> As to your suggested solution: the problem is that Lisp doesn't have a
</I>&gt;<i> run-time/compile-time distinction. The compiler and library are the same,
</I>&gt;<i> and linked to the final executable. The compiler, to be a real Lisp, has to
</I>&gt;<i> assume that any function definitions are being done at run-time. I'm not sure
</I>&gt;<i> I understood what you were aiming for--the compiler generating C# code?
</I>
No, he presented the pseudo code (in C#) that you would be generating at
runtime using Reflection.Emit to implement closures in the CLI.

&gt;<i> I assume that you meant I would emit these types at runtime. Even still,
</I>&gt;<i> (though I appreciate your example) your code is little more than mapping
</I>&gt;<i> lisp primitives through a consideribly dense layer of object-oriented code,
</I>&gt;<i> which goes against the purported point of the CLI, which is to allow lots of
</I>&gt;<i> different languages to be implemented in a common runtime environment,
</I>
Why do you care about the implementation? It's like complaining that
many functional systems are implemented through &quot;a considerably dense layer 
of C code and assembly&quot;. The CLI offers a fairly comprehensive instruction
set and some runtime methods: using them you can implement C#, VB,
javascript, cobol, scheme, python, java etc... Sure, some of the
implementations may incur a speed hit when implemented on the CLR,
because of the need to implement special semantics that differ from the
expected ones. But the hit is most of the time reasonable if you're
willing to spend some time on the compiler (and it's repaid by being
able to easily interface with code written in other languages).
I guess what you're looking for is a runtime that implements lisp
primitives, so you can write your lisp compiler almost with no code:-)
That's nice, but you wouldn't get any interoperability and any of the
above languages would run a lot slower on that VM.
If you have proposals for how to integrate 'lisp primitives' with teh
CLR, please, present them as many people here would love to discuss the
issues. Just complaining that the CLR doesn't provide lisp primitives
(when they can most likely be easily implemented with Re.Emit...) is not
helpful (last time I checked hw lisp machines are not in much use nowadays, 
maybe there are a few reasons...).

&gt;<i> Oh, I dunno. It's debateable. Developing a new compiler for mono could be
</I>&gt;<i> considered mono related. The fact that it would work on any CLI compliant
</I>&gt;<i> runtime is incidental. Besides, I didn't see any more appropriate mono-* list,
</I>&gt;<i> and I figure you people have implemented a runtime, so you must be pretty
</I>&gt;<i> familiar with it.
</I>
I think mono-devel is appropriate for discussing how to make the mono and
the CLR better at handling different languages.

&gt;<i> &gt; Take a look at the DynamicMethod class from Net 1.2
</I>&gt;<i>  
</I>&gt;<i> Thanks, Zoltan. Do you know if this class performs well enough to be used
</I>&gt;<i> as the primary function-calling mechanism of a language?
</I>
Function calls are a little more costly with delegates than with direct
calls (usually 2-3 times slower for empty methods): if your functions
actually do something it's not much of an issues (of course, where it
matters, you could build smarts in your compiler to do away with the
otherhead).

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004047.html">[Mono-devel-list] New compiler--CIL/CTS questions
</A></li>
	<LI>Next message: <A HREF="004067.html">[Mono-devel-list] New compiler--CIL/CTS questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4058">[ date ]</a>
              <a href="thread.html#4058">[ thread ]</a>
              <a href="subject.html#4058">[ subject ]</a>
              <a href="author.html#4058">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
