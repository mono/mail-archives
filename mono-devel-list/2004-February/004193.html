<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Managed Char class/ structure implementation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Managed%20Char%20class/%20structure%20implementation&In-Reply-To=001001c3f801%24fe327040%246464a8c0%40ansuria">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004175.html">
   <LINK REL="Next"  HREF="004177.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Managed Char class/ structure implementation</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Managed%20Char%20class/%20structure%20implementation&In-Reply-To=001001c3f801%24fe327040%246464a8c0%40ansuria"
       TITLE="[Mono-devel-list] Managed Char class/ structure implementation">lupus at ximian.com
       </A><BR>
    <I>Sat Feb 21 10:59:27 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="004175.html">[Mono-devel-list] Managed Char class/ structure implementation
</A></li>
        <LI>Next message: <A HREF="004177.html">[Mono-devel-list] Exiting a console application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4193">[ date ]</a>
              <a href="thread.html#4193">[ thread ]</a>
              <a href="subject.html#4193">[ subject ]</a>
              <a href="author.html#4193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/20/04 Andreas Nahr wrote:
&gt;<i> Its features are now:
</I>&gt;<i> - completely standalone (uses no internalcalls)
</I>&gt;<i> - extremely fast (about 250% to up to 1000% faster than Mono AND MS impl.)
</I>&gt;<i> - eats LOADS of memory
</I>&gt;<i> 
</I>&gt;<i> and thats also the problem... How much memory usage might be acceptable? Is
</I>
The concept is good: I actually wanted to try something like that, by
having GLib expose its internal data tables so we could have avoided the
icalls, but I doubt the GLib maintainers would ever expose the internal
details.
As you guessed, the memory requirements of your approach are not
acceptable, though: roughtly 100 KB of managed memory is a lot.
Thre is a way that would make it ok: instead of having the arrays in
managed memory, we could store them as readonly data in the runtime
and have the Char class use unsafe pointers to them. This requires the
use of unsafe {} constructs, but it's just as fast and the memory
is not duplicated, but mmapped readonly for all the mono processes.
I would also drop the NumericData array: it's very sparse and
GetNumericValue() doesn't look like a method that would need to be so
fast.

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004175.html">[Mono-devel-list] Managed Char class/ structure implementation
</A></li>
	<LI>Next message: <A HREF="004177.html">[Mono-devel-list] Exiting a console application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4193">[ date ]</a>
              <a href="thread.html#4193">[ thread ]</a>
              <a href="subject.html#4193">[ subject ]</a>
              <a href="author.html#4193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
