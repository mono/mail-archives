<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mono numerical performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono%20numerical%20performance&In-Reply-To=1321817299.1957.9.camel%40ubuntu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038287.html">
   <LINK REL="Next"  HREF="038277.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mono numerical performance</H1>
    <B>Jonathan Shore</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono%20numerical%20performance&In-Reply-To=1321817299.1957.9.camel%40ubuntu"
       TITLE="[Mono-dev] mono numerical performance">jonathan.shore at gmail.com
       </A><BR>
    <I>Sun Nov 20 15:20:43 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="038287.html">[Mono-dev] mono numerical performance
</A></li>
        <LI>Next message: <A HREF="038277.html">[Mono-dev] building mono with llvm support from git repositories	(missing llvm header?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38289">[ date ]</a>
              <a href="thread.html#38289">[ thread ]</a>
              <a href="subject.html#38289">[ subject ]</a>
              <a href="author.html#38289">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Nov 20, 2011, at 2:28 PM, Konrad M. Kruczy&#324;ski wrote:

&gt;<i> Maybe that's the reason there is no local readonly in the C# language -
</I>&gt;<i> local variables are easily trackable. As to those used in closures (as
</I>&gt;<i> mentioned by Jonathan) - as far as I know, they aren't local variables
</I>&gt;<i> actually but rather fields in compiler-generated class which represents
</I>&gt;<i> closure.
</I>
Yes you are right, closures represent an immutable snapshot of state and hence do not present additional complications.   Being less familiar with C#, was thinking that a delegate could track a mutable dependency.   Of course it could refer to object references, where the object internals mutate during the invocation.

A more tricky problem, one that I think is handled in the JVM, is when indices are calculated within a loop, for instance  array [col * nrows + row]  in a matrix class.   Assuming a loop over rows and columns, a compiler would need to determine that the condition (col * nrows + row) &lt; array.Length is invariant.

&gt;<i> Btw, about the documenting intent part - some of these cases may
</I>&gt;<i> probably be covered by the Code Contracts.
</I>
Contracts can be nice.  And in addition to &quot;documenting&quot; and restricting behavior, could also be used by a JIT to determine efficient code generation based on a more constrained problem.   

The .NET Code Contracts library seems more like an extension of Debug.Assert(), perhaps a bit too verbose.   It would have been interesting to have added a terser form perhaps as part of the language as some languages have done.    Not sure whether MS .NET VM is prepared to make use of this information or not, or is purely doing a boolean check in these methods and throwing an assertion exception.


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038287.html">[Mono-dev] mono numerical performance
</A></li>
	<LI>Next message: <A HREF="038277.html">[Mono-dev] building mono with llvm support from git repositories	(missing llvm header?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38289">[ date ]</a>
              <a href="thread.html#38289">[ thread ]</a>
              <a href="subject.html#38289">[ subject ]</a>
              <a href="author.html#38289">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
