<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Resolving RVA of method calls in external libraries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Resolving%20RVA%20of%20method%20calls%20in%20external%20libraries&In-Reply-To=e08d115a0606070904i4bdfc353ja328eb433f0296d1%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018825.html">
   <LINK REL="Next"  HREF="018826.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Resolving RVA of method calls in external libraries</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Resolving%20RVA%20of%20method%20calls%20in%20external%20libraries&In-Reply-To=e08d115a0606070904i4bdfc353ja328eb433f0296d1%40mail.gmail.com"
       TITLE="[Mono-dev] Resolving RVA of method calls in external libraries">jonpryor at vt.edu
       </A><BR>
    <I>Thu Jun  8 07:22:31 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018825.html">[Mono-dev] Resolving RVA of method calls in external libraries
</A></li>
        <LI>Next message: <A HREF="018826.html">[Mono-Dev] Cecil bug with Custom Attributes with enum parameters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18838">[ date ]</a>
              <a href="thread.html#18838">[ thread ]</a>
              <a href="subject.html#18838">[ subject ]</a>
              <a href="author.html#18838">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2006-06-07 at 13:04 -0300, Joey Libby wrote:
&gt;<i> Hi, I was wondering if anyone could explaint to me how the metadata
</I>&gt;<i> tokens that point to a method in an external library are resolved to
</I>&gt;<i> find the metadata entry for that method in the given library and from
</I>&gt;<i> that the RVA of the method. All I currently see is that there is a
</I>&gt;<i> reference to the name and library name in the metadata of the main cli
</I>&gt;<i> program. Thanks in advance. 
</I>
The RVA of the target method is never resolved by mono.  The RVA of the
target method is resolved by the operating system's dynamic linker, and
an RVA may in fact never be involved (IIRC ELF doesn't use RVAs, so the
RVA terminology is incorrect under most Unix platforms).

What instead happens is that the method name + library name are
extracted from the assembly metadata, the specified library is loaded
(ultimately via dlopen(3) or LoadLibrary()), and the specified method is
retrieved (ultimately via dlsym(3) or GetProcAddress()).  Mono doesn't
actually using any of these APIs, but instead uses the GModule API
(g_module_open(), g_module_name(), etc.), which in turn uses these
underlying APIs.

 - Jon



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018825.html">[Mono-dev] Resolving RVA of method calls in external libraries
</A></li>
	<LI>Next message: <A HREF="018826.html">[Mono-Dev] Cecil bug with Custom Attributes with enum parameters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18838">[ date ]</a>
              <a href="thread.html#18838">[ thread ]</a>
              <a href="subject.html#18838">[ subject ]</a>
              <a href="author.html#18838">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
