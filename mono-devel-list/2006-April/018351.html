<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Compiling LDAP on mono 1.1.15 on windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Compiling%20LDAP%20on%20mono%201.1.15%20on%20windows&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018359.html">
   <LINK REL="Next"  HREF="018352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Compiling LDAP on mono 1.1.15 on windows</H1>
    <B>Justin Dearing</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Compiling%20LDAP%20on%20mono%201.1.15%20on%20windows&In-Reply-To="
       TITLE="[Mono-dev] Compiling LDAP on mono 1.1.15 on windows">zippy1981 at gmail.com
       </A><BR>
    <I>Sun Apr 23 08:57:35 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018359.html">[Mono-dev] Patches. One exception raising and alot of	xmldoc	cleanups.
</A></li>
        <LI>Next message: <A HREF="018352.html">[Mono-dev] Stack traces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18351">[ date ]</a>
              <a href="thread.html#18351">[ thread ]</a>
              <a href="subject.html#18351">[ subject ]</a>
              <a href="author.html#18351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Folks,

First of all I wrote build_mono.bat  based on build.bat with a
modified compile line from muild.sh to get it to build. I ran this
from the &quot;mono command prompt&quot; shortcut that setups a command line
envirorment for mono. Code is below:

=======================================================

@echo off
if not exist lib   md lib
if not exist doc   md doc

if exist lib\Novell.Directory.Ldap.dll del lib\Novell.Directory.Ldap.dll

echo &quot;Building resources...&quot;
call resgen Novell.Directory.Ldap\Novell.Directory.Ldap.UtilClass\ExceptionMessages.txt
lib\ExceptionMessages.resources

call resgen Novell.Directory.Ldap\Novell.Directory.Ldap.UtilClass\ResultCodeMessages.txt
lib\ResultCodeMessages.resources
echo &quot;Generating lib\Novell.Directory.Ldap.dll..&quot;
mcs -debug /noconfig /target:library /r:mscorlib.dll /r:System.dll
-resource:.\lib\ResultCodeMessages.resources
-resource:.\lib\ExceptionMessages.resources
-nowarn:0219,1570,1572,1574,1587 /doc:.\doc\comments.xml
/out:.\lib\Novell.Directory.Ldap.dll
@Novell.Directory.Ldap.dll.sources


del lib\ResultCodeMessages.resources
del lib\ExceptionMessages.resources

=======================================================

I put the call in front of the resgen because it stops after te first
resgen without it. I guess resgen in mono is a batch file wrapper
around something else. I didnt bother to check as it wasn't
particularly important. I replaced all the `pwd` with &quot;.&quot; in the path
references. I then replaced the -g with -debug as apprently -g was
depreciated.


I tried compiling Novells LDAP library on windows out of their cvs and
got several Error CS3011. The message text for that error is &quot;only
CLS-compliant members can be abstract&quot;

It seems that if you give an interface an attributre of 
[CLSCompliant(true)] in mono, you have to explicitly do so for each
member. I find it funny that the novell CsharpLdap library needs some
modification to  compile on mono so its possible I;m doing something
else wrong. but apply this patch inside of
&quot;CsharpLDAP/Novell.Directory.LDAP/Novell.Directory.Ldap.Asn1/&quot; to get
it to compile on mono for windows with my batch file.


==================================================================

diff -c /cygdrive/c/src/CsharpLDAP/Novell.Directory.LDAP/Novell.Directory.Ldap.Asn1/Asn1Encoder.cs
./Asn1Encoder.cs
*** /cygdrive/c/src/CsharpLDAP/Novell.Directory.LDAP/Novell.Directory.Ldap.Asn1/Asn1Encoder.cs	Sat
Dec 13 03:58:20 2003
--- ./Asn1Encoder.cs	Sun Apr 23 07:28:39 2006
***************
*** 65,70 ****
--- 65,71 ----
  			/// &lt;param name=&quot;out&quot;&gt;The output stream onto which the ASN.1 object is

  			/// to be encoded

  			/// &lt;/param&gt;

+ 			[CLSCompliantAttribute(true)]

  			void  encode(Asn1Boolean b, System.IO.Stream out_Renamed);

  			

  			/// &lt;summary&gt; Encode an Asn1Numeric directly to a stream.

***************
*** 81,86 ****
--- 82,88 ----
  			/// &lt;param name=&quot;out&quot;&gt;The output stream onto which the ASN.1 object is

  			/// to be encoded

  			/// &lt;/param&gt;

+ 			[CLSCompliantAttribute(true)]

  			void  encode(Asn1Numeric n, System.IO.Stream out_Renamed);

  			

  			/* Asn1 TYPE NOT YET SUPPORTED

***************
*** 98,103 ****
--- 100,106 ----
  			/// &lt;param name=&quot;out&quot;&gt;The output stream onto which the ASN.1 object is

  			/// to be encoded

  			/// &lt;/param&gt;

+ 			[CLSCompliantAttribute(true)]

  			void  encode(Asn1Null n, System.IO.Stream out_Renamed);

  			

  			/* Asn1 TYPE NOT YET SUPPORTED

***************
*** 115,120 ****
--- 118,124 ----
  			/// &lt;param name=&quot;out&quot;&gt;The output stream onto which the ASN.1 object is

  			/// to be encoded

  			/// &lt;/param&gt;

+ 			[CLSCompliantAttribute(true)]

  			void  encode(Asn1OctetString os, System.IO.Stream out_Renamed);

  			

  			/* Asn1 TYPE NOT YET SUPPORTED

***************
*** 141,146 ****
--- 145,151 ----
  			/// &lt;param name=&quot;out&quot;&gt;The output stream onto which the ASN.1 object is

  			/// to be encoded

  			/// &lt;/param&gt;

+ 			[CLSCompliantAttribute(true)]

  			void  encode(Asn1Structured c, System.IO.Stream out_Renamed);

  			

  			/// &lt;summary&gt; Encode an Asn1Tagged directly to a stream.

***************
*** 152,157 ****
--- 157,163 ----
  			/// &lt;param name=&quot;out&quot;&gt;The output stream onto which the ASN.1 object is

  			/// to be encoded

  			/// &lt;/param&gt;

+ 			[CLSCompliantAttribute(true)]

  			void  encode(Asn1Tagged t, System.IO.Stream out_Renamed);

  			

  			/* Encoders for ASN.1 useful types

***************
*** 169,174 ****
--- 175,181 ----
  			/// &lt;param name=&quot;out&quot;&gt;The output stream onto which the ASN.1 object is

  			/// to be encoded

  			/// &lt;/param&gt;

+ 			[CLSCompliantAttribute(true)]

  			void  encode(Asn1Identifier id, System.IO.Stream out_Renamed);

  		}

  }

diff -c /cygdrive/c/src/CsharpLDAP/Novell.Directory.LDAP/Novell.Directory.Ldap.Asn1/Asn1Object.cs
./Asn1Object.cs
*** /cygdrive/c/src/CsharpLDAP/Novell.Directory.LDAP/Novell.Directory.Ldap.Asn1/Asn1Object.cs	Sat
Nov 15 05:01:04 2003
--- ./Asn1Object.cs	Sun Apr 23 07:30:05 2006
***************
*** 60,65 ****
--- 60,66 ----
  		/// &lt;param name=&quot;out&quot;&gt;The output stream onto which the encoded

  		/// Asn1Object will be placed.

  		/// &lt;/param&gt;

+ 		[CLSCompliantAttribute(true)]

  		abstract public void  encode(Asn1Encoder enc, System.IO.Stream out_Renamed);

  		

  		/// &lt;summary&gt; Returns the identifier for this Asn1Object as an
Asn1Identifier.

Common subdirectories:
/cygdrive/c/src/CsharpLDAP/Novell.Directory.LDAP/Novell.Directory.Ldap.Asn1/CVS
and ./CVS
Only in .: Novell.Directory.Ldap.Asn1.patch

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018359.html">[Mono-dev] Patches. One exception raising and alot of	xmldoc	cleanups.
</A></li>
	<LI>Next message: <A HREF="018352.html">[Mono-dev] Stack traces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18351">[ date ]</a>
              <a href="thread.html#18351">[ thread ]</a>
              <a href="subject.html#18351">[ subject ]</a>
              <a href="author.html#18351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
