<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Re: DeadLock Problem in ASP.NET (GAMIN)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Re%3A%20DeadLock%20Problem%20in%20ASP.NET%20%28GAMIN%29&In-Reply-To=e2qe4r%24efj%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018401.html">
   <LINK REL="Next"  HREF="018315.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Re: DeadLock Problem in ASP.NET (GAMIN)</H1>
    <B>Hubert FONGARNAND</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Re%3A%20DeadLock%20Problem%20in%20ASP.NET%20%28GAMIN%29&In-Reply-To=e2qe4r%24efj%241%40sea.gmane.org"
       TITLE="[Mono-dev] Re: DeadLock Problem in ASP.NET (GAMIN)">informatique.internet at fiducial.fr
       </A><BR>
    <I>Fri Apr 28 04:34:32 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018401.html">[Mono-dev] Re: DeadLock Problem in ASP.NET (GAMIN)
</A></li>
        <LI>Next message: <A HREF="018315.html">[Mono-dev] Mono Continuations and MicroThreads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18408">[ date ]</a>
              <a href="thread.html#18408">[ thread ]</a>
              <a href="subject.html#18408">[ subject ]</a>
              <a href="author.html#18408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Robert,

I've tried to reproduce your bug... but i can't: 
by me it works well, i've launched http_load several times and there's
no locks:

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">hubert at hublinux</A> ~/essai_prg/http_load-12mar2006 $ ./http_load -parallel
100 -seconds 10 ./url
4165 fetches, 100 max parallel, 845495 bytes, in 10.0046 seconds
203 mean bytes/connection
416.308 fetches/sec, 84510.5 bytes/sec
msecs/connect: 0.466466 mean, 33.449 max, 0.05 min
msecs/first-response: 235.528 mean, 6545.72 max, 70.354 min
HTTP response codes:
  code 200 -- 4165

My bug, is not related  to server load, but it's related to compilation
of many aspx page... My bug appears only if gamin is used!


Le jeudi 27 avril 2006 &#224; 14:40 +0200, Robert Jordan a &#233;crit :

&gt;<i> Hubert FONGARNAND wrote:
</I>&gt;<i> &gt; Hi Gonzalo,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I've investigated on my &quot;deadlock&quot; problem. It seems that this problem
</I>&gt;<i> &gt; comes from GAMIN.
</I>&gt;<i> &gt; I explain:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'm running a big (more than 50 aspx, ascx) web application. If I run a
</I>&gt;<i> &gt; precompilation page (see the attached aspx.cs)
</I>&gt;<i> &gt; Mono, will compile about 20 pages, and will lock forever... 
</I>&gt;<i> &gt; If you send a SIGQUIT to mod_mono_server you will obtain that some
</I>&gt;<i> &gt; thread do :
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; - &quot;&quot; tid=0x0xb646bbb0 this=0x0x3893c0:
</I>&gt;<i> &gt;   - in (wrapper managed-to-native)
</I>&gt;<i> &gt; System.IO.FAMWatcher:gamin_MonitorDirectory
</I>&gt;<i> &gt; (System.IO.FAMConnection&amp;,string,System.IO.FAMRequest&amp;,intptr) &lt;0x4&gt;
</I>&gt;<i> &gt; - in (wrapper managed-to-native)
</I>&gt;<i> &gt; System.IO.FAMWatcher:gamin_MonitorDirectory
</I>&gt;<i> &gt; (System.IO.FAMConnection&amp;,string,System.IO.FAMRequest&amp;,intptr)
</I>&gt;<i> &gt; &lt;0xffffffbf&gt;
</I>&gt;<i> &gt;   - in System.IO.FAMWatcher:FAMMonitorDirectory
</I>&gt;<i> &gt; (System.IO.FAMConnection&amp;,string,System.IO.FAMRequest&amp;,intptr) &lt;0x1f&gt;
</I>&gt;<i> &gt;   - in System.IO.FAMWatcher:StartMonitoringDirectory
</I>&gt;<i> &gt; (System.IO.FAMData,bool) &lt;0x7d&gt;
</I>&gt;<i> &gt;   - in System.IO.FAMWatcher:StartDispatching
</I>&gt;<i> &gt; (System.IO.FileSystemWatcher) &lt;0x192&gt;
</I>&gt;<i> &gt;   - in System.IO.FileSystemWatcher:Start () &lt;0x17&gt;
</I>&gt;<i> &gt;   - in System.IO.FileSystemWatcher:set_EnableRaisingEvents (bool) &lt;0x27&gt;
</I>&gt;<i> &gt;   - in (wrapper remoting-invoke-with-check)
</I>&gt;<i> &gt; System.IO.FileSystemWatcher:set_EnableRaisingEvents (bool) &lt;0xffba2006&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So the gamin_MonitorDirectory will never end and block all the other
</I>&gt;<i> &gt; thread...
</I>&gt;<i> &gt; The only way to force compilation contunation is to kill gam_server....
</I>&gt;<i> &gt; The compilation will continue, compile 5 page, and will block again!!
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I've tried to remove gamin from my linux...
</I>&gt;<i> &gt; and suprise!!!
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; It work well, without gamin!
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Is there a way to tell mono, not to use gamin, for FAMWatcher, even if
</I>&gt;<i> &gt; gamin is installed?
</I>&gt;<i> &gt; My version of gamin, is the last one: 0.1.7
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Set the env var MONO_MANAGED_WATCHER=1
</I>&gt;<i> 
</I>&gt;<i> BTW, can you reproduce this one?
</I>&gt;<i> <A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=78029">http://bugzilla.ximian.com/show_bug.cgi?id=78029</A>
</I>&gt;<i> 
</I>&gt;<i> It's a similar (?) compilation issue that occurs even with the
</I>&gt;<i> default managed watcher.
</I>&gt;<i> 
</I>&gt;<i> Robert
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>_______________________________________________
Ce message et les &#233;ventuels documents joints peuvent contenir des informations confidentielles.
Au cas o&#249; il ne vous serait pas destin&#233;, nous vous remercions de bien vouloir le supprimer et en aviser imm&#233;diatement l'exp&#233;diteur. Toute utilisation de ce message non conforme &#224; sa destination, toute diffusion ou publication, totale ou partielle et quel qu'en soit le moyen est formellement interdite.
Les communications sur internet n'&#233;tant pas s&#233;curis&#233;es, l'int&#233;grit&#233; de ce message n'est pas assur&#233;e et la soci&#233;t&#233; &#233;mettrice ne peut &#234;tre tenue pour responsable de son contenu.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060428/89232c3c/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060428/89232c3c/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018401.html">[Mono-dev] Re: DeadLock Problem in ASP.NET (GAMIN)
</A></li>
	<LI>Next message: <A HREF="018315.html">[Mono-dev] Mono Continuations and MicroThreads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18408">[ date ]</a>
              <a href="thread.html#18408">[ thread ]</a>
              <a href="subject.html#18408">[ subject ]</a>
              <a href="author.html#18408">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
