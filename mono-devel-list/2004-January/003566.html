<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] Default attribute removal in XmlElement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Default%20attribute%20removal%20in%20XmlElement&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003545.html">
   <LINK REL="Next"  HREF="003574.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] Default attribute removal in XmlElement</H1>
    <B>Boris Kirzner</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Default%20attribute%20removal%20in%20XmlElement&In-Reply-To="
       TITLE="[Mono-devel-list] [PATCH] Default attribute removal in XmlElement">borisk at mainsoft.com
       </A><BR>
    <I>Tue Jan 13 04:23:32 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="003545.html">[Mono-devel-list] Zero Length Arrays
</A></li>
        <LI>Next message: <A HREF="003574.html">[Mono-devel-list] [PATCH] Default attribute removal in XmlElement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3566">[ date ]</a>
              <a href="thread.html#3566">[ thread ]</a>
              <a href="subject.html#3566">[ subject ]</a>
              <a href="author.html#3566">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Description of Problem:
- If the removed attribute is known to have a default value, an 
attribute should immediately appear containing the default value.
- Re-setting an attribute to its default value requires that the 
attribute be deleted. New attribute with its Specified property set to 
False should be created.

Steps to reproduce the problem :
1. Create DTD file defining some node having default attribute value.
2. Create XML file referencing the DTD, with node inside that attribute 
value having default in DTD is not explicitly specified.
3. Load XML document into XmlDocument
4. Remove the attribute
4. Inspect Value and Specified properties of the attribute.

Actual result :
System.NullReferenceException: A null value was found where an object 
instance was required in &lt;0x00128&gt;

Expected result :
Yes
False

Enclosed is a small test case and a patch.

Thank you in advance,

Boris Kirzner
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Class1.cs
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040113/5582c6ac/attachment.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040113/5582c6ac/attachment.pl</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: staff.xml
Type: text/xml
Size: 210 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040113/5582c6ac/attachment.xml">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040113/5582c6ac/attachment.xml</A> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040113/5582c6ac/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040113/5582c6ac/attachment.html</A> 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: XmlAttributeCollection.cs.diff
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040113/5582c6ac/attachment-0001.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040113/5582c6ac/attachment-0001.pl</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003545.html">[Mono-devel-list] Zero Length Arrays
</A></li>
	<LI>Next message: <A HREF="003574.html">[Mono-devel-list] [PATCH] Default attribute removal in XmlElement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3566">[ date ]</a>
              <a href="thread.html#3566">[ thread ]</a>
              <a href="subject.html#3566">[ subject ]</a>
              <a href="author.html#3566">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
