<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Problem with P/Invoke
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Problem%20with%20P/Invoke&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003853.html">
   <LINK REL="Next"  HREF="003863.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Problem with P/Invoke</H1>
    <B>Carlos Alberto Cortez Guevara</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Problem%20with%20P/Invoke&In-Reply-To="
       TITLE="[Mono-devel-list] Problem with P/Invoke">carlos at unixmexico.org
       </A><BR>
    <I>Fri Jan 30 14:16:55 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="003853.html">[Mono-devel-list] PrivateBinPath, serialization and pinvoke bug...
</A></li>
        <LI>Next message: <A HREF="003863.html">[Mono-devel-list] Problem with P/Invoke
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3854">[ date ]</a>
              <a href="thread.html#3854">[ thread ]</a>
              <a href="subject.html#3854">[ subject ]</a>
              <a href="author.html#3854">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I was playing with some P/Invoke samples, and I found that the next code
doesn't work perfect.

I'm loading the strncpy function from the standard library (libc), and
the first call works perfect. However, in the second call (and third,
..) it doesn't work.

Is this a bug?

Regards,
Carlos.

-- 
--------------------------------------------------
/* The definition of myself */
using Cortez;
using GeniusIntelligence;

public class Carlos : Human, IGenius, ILinuxUser {

	static void Main () {
		Me.Think();
	}

}

--------------------------------------------------
-------------- next part --------------
//
// P/Invoke Sample
//
//

using System;
using System.Runtime.InteropServices;
using System.Text;

 public class Sample {

	 [DllImport (&quot;libc&quot;)]
	 private static extern string strncpy (StringBuilder dest, string src, int length);

	 public static void Main ()
	 {

		 StringBuilder sb = new StringBuilder (50);
		 string src = &quot;This message should be printed&quot;;
		 
		 for (int i = 1; i &lt;= src.Length; i++) {
			 strncpy (sb, src, i);
			 Console.WriteLine (sb);
		 }

	 }

 }

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003853.html">[Mono-devel-list] PrivateBinPath, serialization and pinvoke bug...
</A></li>
	<LI>Next message: <A HREF="003863.html">[Mono-devel-list] Problem with P/Invoke
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3854">[ date ]</a>
              <a href="thread.html#3854">[ thread ]</a>
              <a href="subject.html#3854">[ subject ]</a>
              <a href="author.html#3854">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
