<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Initial connection pool in Npgsql
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Initial%20connection%20pool%20in%20Npgsql&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003673.html">
   <LINK REL="Next"  HREF="003678.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Initial connection pool in Npgsql</H1>
    <B>Francisco Figueiredo Jr.</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Initial%20connection%20pool%20in%20Npgsql&In-Reply-To="
       TITLE="[Mono-devel-list] Initial connection pool in Npgsql">fxjrlists at yahoo.com.br
       </A><BR>
    <I>Sat Jan 17 13:15:39 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="003673.html">[Mono-devel-list] possible bug in S.R.E., class.c::mono_class_setup_vtable()
</A></li>
        <LI>Next message: <A HREF="003678.html">[Mono-devel-list] Callling convention for interop call-backs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3676">[ date ]</a>
              <a href="thread.html#3676">[ thread ]</a>
              <a href="subject.html#3676">[ subject ]</a>
              <a href="author.html#3676">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I just updated some code on both gborg and mono cvs to add some initial 
connection pool for Npgsql.
This code also has many patches from Pedro Martinez about command 
builder. Thanks Pedro.


To use connection pool, you have to provide the following info in the 
connection string:
MinPoolSize and MaxPoolSize.

For now, just the MinPoolSize is being used and just as a flag to use 
connection pool.

Please, grab the latest code and give it a try and let me know if you 
get any problems.

WARNING: There is only a drawback in this new connection pool code:
you will start to get some logs in server about unexpected EOF:
LOG:  unexpected EOF on client connection

This is because when I open the connection in pool, when client closes 
the connection it is put back in pool. If client closes the connection 
and exits, there is no way I can go and release the connection. So the 
unmanaged socket is closed without sending the 'X' message to server and 
it thinks the connection was dropped and logs the message.

In all my tests I didn't find any problems with this approach. Please, 
also, let me know if you find any problems with that.


-- 
Regards,

Francisco Figueiredo Jr.
Membro Fundador do Projeto MonoBrasil - MonoBrasil Project Founding Member


-------------
&quot;Science without religion is lame;
religion without science is blind.&quot;

                   ~ Albert Einstein

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003673.html">[Mono-devel-list] possible bug in S.R.E., class.c::mono_class_setup_vtable()
</A></li>
	<LI>Next message: <A HREF="003678.html">[Mono-devel-list] Callling convention for interop call-backs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3676">[ date ]</a>
              <a href="thread.html#3676">[ thread ]</a>
              <a href="subject.html#3676">[ subject ]</a>
              <a href="author.html#3676">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
