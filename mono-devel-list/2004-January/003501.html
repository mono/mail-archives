<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Native code in mcs &amp; Mono.Posix
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Native%20code%20in%20mcs%20%26%20Mono.Posix&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003500.html">
   <LINK REL="Next"  HREF="003499.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Native code in mcs &amp; Mono.Posix</H1>
    <B>Bernie Solomon</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Native%20code%20in%20mcs%20%26%20Mono.Posix&In-Reply-To="
       TITLE="[Mono-devel-list] Native code in mcs &amp; Mono.Posix">bernard at ugsolutions.com
       </A><BR>
    <I>Thu Jan  8 18:41:22 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="003500.html">[Mono-devel-list] Native code in mcs &amp; Mono.Posix
</A></li>
        <LI>Next message: <A HREF="003499.html">[Mono-devel-list] Native code in mcs &amp; Mono.Posix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3501">[ date ]</a>
              <a href="thread.html#3501">[ thread ]</a>
              <a href="subject.html#3501">[ subject ]</a>
              <a href="author.html#3501">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My question seemed to generate quite a bit of discussion...

I can understand cairo is different and anyway it works better because it
checks for cairo itself being installed via pkg-config.

The Mono.Posix stuff however seems a little different and it is harder for
the makefiles to decide whether to build or not - so I think it just has to
work. If it stays where it is then perhaps use of libtool is one way - or
the sort of makefile parameterization I started - or moving the native code
elsewhere - at least the native code that does the flag mapping - the libc
imports themselves are more portable anyway (assuming you use a dllmap for
libc if necessary). Or lupus suggested removal of the helper lib completely
but I wasn't quite sure how yet keeping IL portable.

It did make me think of the question of what is the policy of portability of
managed DLLs across platforms (other than Windows). I'd assumed that any
library DLL should work across all Unix platforms and only the native
libraries change. Though of course some functionality might not work at run
time - such as IPV6 at present - but the IL is identical. This makes me
think some form of mapping of constants is needed in this case as they
aren't guaranteed to be the same across platform... (though no doubt many
are in practice)

For the moment I'll continue with the makefile parameterization as that is
least change until a better solution is decided upon.

Bernie

----- Original Message ----- 
From: &quot;Miguel de Icaza&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at ximian.com</A>&gt;
To: &quot;Peter Williams&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">peter at newton.cx</A>&gt;
Cc: &quot;Bernie Solomon&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bernard at ugsolutions.com</A>&gt;;
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Sent: Thursday, January 08, 2004 7:59 AM
Subject: Re: [Mono-devel-list] Native code in mcs &amp; Mono.Posix


&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> &gt; On Wed, 2004-01-07 at 22:17, Miguel de Icaza wrote:
</I>&gt;<i> &gt; &gt; The reason for the code to live in mcs, is that the C code that is
</I>&gt;<i> &gt; &gt; compiled needs to know about the values defined in the C# world.  So
</I>the
&gt;<i> &gt; &gt; solution is to use a C# program with attributes, and from this we
</I>&gt;<i> &gt; &gt; generate the C code that gets compiled.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Does anything in the MCS module actually use Mono.Posix? If it were
</I>&gt;<i> &gt; possible, I think it would make sense to move Mono.Posix into its own
</I>&gt;<i> &gt; module and write a quick configure script for it. The gdiplus code, on
</I>&gt;<i> &gt; the other hand, is not generated from C# land, so it could go into the
</I>&gt;<i> &gt; mono/ module perhaps.
</I>&gt;<i>
</I>&gt;<i> Not Mono, but other people do.  To establish Unix-based transport
</I>&gt;<i> sockets instead of the IP end points that Microsoft supports.
</I>&gt;<i>
</I>&gt;<i> Also, typically applications end up pinvoking Chown/chmod/etc on their
</I>&gt;<i> own, so it made sense to provide this functionality there.
</I>&gt;<i>
</I>&gt;<i> I do not want to move the cairo code to mono, because it adds too many
</I>&gt;<i> dependencies there, and today we are treating cairo/System.Drawing as an
</I>&gt;<i> optional feature (it is not working stably anyways, and is being
</I>&gt;<i> redone).
</I>&gt;<i>
</I>&gt;<i> Miguel
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003500.html">[Mono-devel-list] Native code in mcs &amp; Mono.Posix
</A></li>
	<LI>Next message: <A HREF="003499.html">[Mono-devel-list] Native code in mcs &amp; Mono.Posix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3501">[ date ]</a>
              <a href="thread.html#3501">[ thread ]</a>
              <a href="subject.html#3501">[ subject ]</a>
              <a href="author.html#3501">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
