<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] mono and .net web services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20mono%20and%20.net%20web%20services&In-Reply-To=1074137175.31960.24.camel%40khan">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003612.html">
   <LINK REL="Next"  HREF="003620.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] mono and .net web services</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20mono%20and%20.net%20web%20services&In-Reply-To=1074137175.31960.24.camel%40khan"
       TITLE="[Mono-devel-list] mono and .net web services">jonpryor at vt.edu
       </A><BR>
    <I>Thu Jan 15 07:36:55 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="003612.html">[Mono-devel-list] mono and .net web services
</A></li>
        <LI>Next message: <A HREF="003620.html">[Mono-devel-list] mono and .net web services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3615">[ date ]</a>
              <a href="thread.html#3615">[ thread ]</a>
              <a href="subject.html#3615">[ subject ]</a>
              <a href="author.html#3615">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alas, I can only answer one of your questions...

On Wed, 2004-01-14 at 22:26, Daniel Pinto de Mello e Silva wrote:
&lt;snip/&gt;
&gt;<i> The web-service ASMX file is being interpreted just fine in the first
</I>&gt;<i> IIS server.  From its WSDL file Mono's wsdl tool created a client
</I>&gt;<i> proxy.  The proxy library (compiled with Mono's mcs) is placed in the
</I>&gt;<i> second IIS server.
</I>
&lt;snip/&gt;

&gt;<i> Are .Net assemblies compiled with Mono's mcs supposed to work under
</I>&gt;<i> Microsoft's VM and IIS?
</I>
The answer is a resounding maybe.

Yes, the IL generated by mcs will execute properly under .NET and IIS.

Unfortunately, IL isn't the only concern.  The other concern (and the
primary concern in this case) is the behavior with shared assemblies.

First of all, mcs doesn't (AFAIK) place the public key token from the
assemblies it's linked against into the generated file.  Which means you
can't have two shared Foo.dll's, signed by different companies, and have
Mono/mcs load the correct Foo.dll.  (Not that this is a problem, as with
the current design of Mono -- with no GAC -- there could only be one
Foo.dll in $prefix/lib, which is the default search directory, so you
can't really have two Foo.dll's installed anyway...)

Even if this were fixed, there's the second issue.  You're compiling
under Linux, so you'll be compiling against Mono's
System.Web.Services.dll, which will (most assuredly) have a different
public key token than Microsoft's System.Web.Services.dll.  Thus, even
with properly generated IL referencing the &quot;correct&quot; strongly-named
Assembly, you'd be referencing Mono's assembly, not Microsoft's.

There are two solutions to your problem:
(1) Copy Mono's System.Web.Services.dll into the same directory as the
proxy library.  Since Mono's System.Web.Services.dll is a private
Assembly and is in the same directory as your proxy library (which is
effectively referencing a private assembly, as it lacks the public key
token information needed for shared assemblies), your proxy should now
load properly.  The (possible) problem is that you'll be using Mono's
System.Web.Services.dll, not Microsoft's, which may not be desired.

(2) Compile all your code with csc.exe on a Windows box.  csc.exe knows
about shared assemblies, and will properly reference against the
appropriate .NET libraries.

This is likely to remain a problem into the future, even after mcs gets
proper public-key-token support and Mono gets a GAC.  As long as
Microsoft and Mono use different public/private keys for assembly
signing, .NET will want to use the Mono assemblies when executing
mono/mcs-generated assemblies.  Such is the price of strong versioning. 
Compatibility is largely one-way: Mono can execute most .NET-generated
programs, but .NET might not be able to handle the Mono-generated ones.

 - Jon



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003612.html">[Mono-devel-list] mono and .net web services
</A></li>
	<LI>Next message: <A HREF="003620.html">[Mono-devel-list] mono and .net web services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3615">[ date ]</a>
              <a href="thread.html#3615">[ thread ]</a>
              <a href="subject.html#3615">[ subject ]</a>
              <a href="author.html#3615">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
