<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] RE: Code Access Security
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20RE%3A%20Code%20Access%20Security&In-Reply-To=0HRT00BBJ26923%40VL-MO-MR002.ip.videotron.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003749.html">
   <LINK REL="Next"  HREF="003735.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] RE: Code Access Security</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20RE%3A%20Code%20Access%20Security&In-Reply-To=0HRT00BBJ26923%40VL-MO-MR002.ip.videotron.ca"
       TITLE="[Mono-devel-list] RE: Code Access Security">spouliot at videotron.ca
       </A><BR>
    <I>Thu Jan 22 16:30:20 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="003749.html">[Mono-devel-list] NpgsqlConnection Continually Closing
</A></li>
        <LI>Next message: <A HREF="003735.html">[Mono-devel-list] Corlib test cases
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3733">[ date ]</a>
              <a href="thread.html#3733">[ thread ]</a>
              <a href="subject.html#3733">[ subject ]</a>
              <a href="author.html#3733">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Ben,

&gt;<i> I understand this all pretty well now, at least with imperative demands.
</I>I
&gt;<i> think I'm right in believing that declarative is harder.
</I>
Not really different except declarative:
- are called before the method is called (much better from a security point
of view);
- must be called from the runtime (in order to be called before the method);
- are more &quot;static&quot; because they can't change them once compiled (e.g. a
filename must be hardcoded with it's path);

&gt;<i> I thought about starting to write a caspol to manipulate these policy
</I>files
&gt;<i> - I'm going some dummy data in the Policy classes to proceed.  Might as
</I>well
&gt;<i> build this in C#.
</I>
Sure. Without this tool CAS won't be very usable. You should try early to
separate the UI (CLI/GUI) from the policy code because (someday) both a CLI
and a GUI will be required.

&gt;<i> Also is there anything I should consider as to how the
</I>&gt;<i> runtime should load these files,
</I>
I think the only place the files should be loaded is from PolicyLevel which
is called from SecurityManager. Some code is present in CVS for loading
policies.

&gt;<i> where they should be stored etc?
</I>
They are sensitive files and should be stored with machine.config (which is
another very sensitive file).

&gt;<i> There are
</I>&gt;<i> also going to be interesting mappings between some MS permission concepts
</I>&gt;<i> and those in Unix, presumably.
</I>
Yes, some permissions will be more affected than others.

&gt;<i> Finally, I also need to get a specification together of what exactly is
</I>&gt;<i> required for CAS, and identify a point where I have the basic thing - and
</I>&gt;<i> what constitutes the extensions.
</I>
CAS is pretty much a block in itself. Some work can be done around it but
sooner or later you must jump in it. Some parts won't make sense until the
other parts are also present (e.g. the class library has a lot of stuff that
won't be useful until CAS is present). However this isn't a reason to stop
doing any part of it - else we'll enter the egg/chicken problem (which BTW
was solved as birds evolved from reptiles which also comes from eggs - but
that's another recursive story ;-).

If you want a (IMHO useful) CAS subset you could implement it wrt the kind
of permissions, like:
1.	The Principal permissions
(<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=52693">http://bugzilla.ximian.com/show_bug.cgi?id=52693</A>)
2.	The Code Identity permissions (applicable only to assembly)
3.	The other permissions

OTOH you could just choose an area that need to be updated/modified/tested
for CAS, like:
1.	The class library
2.	The runtime
3.	The tools

&gt;<i> I'd appreciate if I could hack this out
</I>&gt;<i> with other members on the list...
</I>
Sorry if there hasn't been much answers yet - remember that CAS isn't
planned for Mono 1.0 release.
You can also join us on IRC if you want to talk about somes ideas / problems
/ bugs that you may have.

&gt;<i> Just wanted to check I'm on the right path.
</I>
I still hear you, so you can't be very far ;)


Sebastien Pouliot
home: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at videotron.ca</A>
blog: <A HREF="http://pages.infinit.net/ctech/poupou.html">http://pages.infinit.net/ctech/poupou.html</A>

-----Original Message-----
From: Benjamin Wootton [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">benjaminwootton at hotpop.com</A>]
Sent: 20 janvier 2004 15:28
To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at videotron.ca</A>
Cc: 'Mono Development'
Subject: RE: Code Access Security


Thanks for reply.  I'm now actively working on this, so dare say I will have
lots of questions!

&gt;<i> &gt; I've been implementing CodeAccessPermission.Demand.
</I>&gt;<i>
</I>&gt;<i> Without some runtime support this won't be easy to do, fix or test - I
</I>&gt;<i> know
</I>&gt;<i> as a tried a little ;)
</I>
I understand this all pretty well now, at least with imperative demands.  I
think I'm right in believing that declarative is harder.

Thanks for the explanation of policies etc.  Presumably CAS builds up the
policy objects based on the information in the security config files:
<A HREF="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpguide/htm">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpguide/htm</A>
l/cpconsecurityconfigurationfiles.asp

I thought about starting to write a caspol to manipulate these policy files
- I'm going some dummy data in the Policy classes to proceed.  Might as well
build this in C#.  Also is there anything I should consider as to how the
runtime should load these files, where they should be stored etc?  There are
also going to be interesting mappings between some MS permission concepts
and those in Unix, presumably.

Finally, I also need to get a specification together of what exactly is
required for CAS, and identify a point where I have the basic thing - and
what constitutes the extensions.  I'd appreciate if I could hack this out
with other members on the list...

Just wanted to check I'm on the right path.

Thanks
Ben




&gt;<i> E.g. (again incomplete)
</I>&gt;<i>
</I>&gt;<i> - The runtime is asked to load an assembly from
</I>&gt;<i> &quot;<A HREF="http://www.go-mono.com/mono.dll&quot;;">http://www.go-mono.com/mono.dll&quot;;</A>
</I>&gt;<i> - The runtime add an URL evidence for &quot;<A HREF="http://www.go-mono.com/mono.dll&quot;">http://www.go-mono.com/mono.dll&quot;</A> to
</I>&gt;<i> the assembly;
</I>&gt;<i> - The URL is then used to determine a SecurityZone (using
</I>&gt;<i> Zone.CreateFromURL
</I>&gt;<i> and re-using IE settings) which results in Internet;
</I>&gt;<i> - The PermissionSet for Internet can then be applied.
</I>&gt;<i> - If a method ask for a FileIOPermission then &quot;CAS&quot; will check if the
</I>&gt;<i> Internet permission set and refuse the operation.
</I>&gt;<i>
</I>&gt;<i> However if the mono.dll had a strongname (e.g. from Ximian) a Code Groups
</I>&gt;<i> could give the assembly a different set of permissions (like FullTrust).
</I>&gt;<i>
</I>&gt;<i> &gt; For instance, we can define code groups and membership conditions in MS
</I>&gt;<i> &gt; at the various levels, but how do the class libraries come into it?
</I>&gt;<i>
</I>&gt;<i> The &quot;CAS engine&quot; resides in the runtime for both performance and security
</I>&gt;<i> (isolation). But to make CAS extendable most of objects it works with are
</I>&gt;<i> implemented in managed code (in the class library).
</I>&gt;<i>
</I>&gt;<i> &gt; Do they just reflect the policy as granted by the local system, so that
</I>&gt;<i> &gt; we can work with this programmatically?  If this is the case, should
</I>&gt;<i> there
</I>&gt;<i> &gt; be a PermissionSet in there somewhere representing the final grant set?
</I>&gt;<i>
</I>&gt;<i> That's the job of CAS to resolve it all ;) with the help from the class
</I>&gt;<i> library.
</I>&gt;<i> However it can be &quot;a&quot; final grant set - as every assembly can have
</I>&gt;<i> different
</I>&gt;<i> trust level inside an application domain
</I>&gt;<i>
</I>&gt;<i> &gt; Any insights you can give into this would be very much appreciated!
</I>&gt;<i>
</I>&gt;<i> Have a look at bugzilla #52693
</I>&gt;<i> (<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=52693">http://bugzilla.ximian.com/show_bug.cgi?id=52693</A>). This may be easier to
</I>&gt;<i> do
</I>&gt;<i> (but still a big step) and make it more easier to complete CAS afterward.
</I>&gt;<i>
</I>&gt;<i> BTW please keep your bugzilla entry
</I>&gt;<i> (<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=52606">http://bugzilla.ximian.com/show_bug.cgi?id=52606</A>) updated with your work
</I>&gt;<i> (I
</I>&gt;<i> bookmarked it) or keep a blog about your work. It's the best way for
</I>&gt;<i> everyone (not just me) to see what's happening with CAS.
</I>&gt;<i>
</I>&gt;<i> Cya
</I>&gt;<i>
</I>&gt;<i> Sebastien Pouliot
</I>&gt;<i> Security Architect, Motus Technologies, <A HREF="http://www.motus.com">http://www.motus.com</A>
</I>&gt;<i> work: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at motus.com</A>
</I>&gt;<i> home: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at videotron.ca</A>
</I>&gt;<i> blog: <A HREF="http://pages.infinit.net/ctech/poupou.html">http://pages.infinit.net/ctech/poupou.html</A>
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Ben [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">benjaminwootton at hotpop.com</A>]
</I>&gt;<i> Sent: 12 janvier 2004 03:24
</I>&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at videotron.ca</A>
</I>&gt;<i> Subject: RE: Code Access Security
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sorry to contact you again.  I've been implementing
</I>&gt;<i> CodeAccessPermission.Demand.  I've been trying to work out this evening
</I>&gt;<i> how
</I>&gt;<i> System.Security.Policy, Evidence and Code Groups fit together.  I
</I>&gt;<i> understand
</I>&gt;<i> them in isolation, but I'm not sure how they fit into the rest of the
</I>&gt;<i> framework.
</I>&gt;<i>
</I>&gt;<i> For instance, we can define code groups and membership conditions in MS at
</I>&gt;<i> the various levels, but how do the class libraries come into it?  Do they
</I>&gt;<i> just reflect the policy as granted by the local system, so that we can
</I>&gt;<i> work
</I>&gt;<i> with this programmatically?  If this is the case, should there be a
</I>&gt;<i> PermissionSet in there somewhere representing the final grant set?
</I>&gt;<i>
</I>&gt;<i> Any insights you can give into this would be very much appreciated!
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i> Ben
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From: Ben [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">benjaminwootton at hotpop.com</A>]
</I>&gt;<i> Sent: Saturday, January 10, 2004 11:47 PM
</I>&gt;<i> To: '<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at videotron.ca</A>'
</I>&gt;<i> Subject: Code Access Security
</I>&gt;<i>
</I>&gt;<i> You posted to mono-devel last week about code access security.  I tried to
</I>&gt;<i> reply, but I'm not sure if it got through or not.
</I>&gt;<i>
</I>&gt;<i> I'm currently implementing parts of it.  I wanted to check we were not
</I>&gt;<i> duplicating any work, and also to see if you had any insights into how you
</I>&gt;<i> think this should be done.
</I>&gt;<i>
</I>&gt;<i> I'm currently making sure that permissions are correctly represented in
</I>&gt;<i> the
</I>&gt;<i> assembly metadata.  At the moment, Security permissions are just shown as
</I>&gt;<i> normal custom attributes.
</I>&gt;<i>
</I>&gt;<i> Ben
</I>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003749.html">[Mono-devel-list] NpgsqlConnection Continually Closing
</A></li>
	<LI>Next message: <A HREF="003735.html">[Mono-devel-list] Corlib test cases
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3733">[ date ]</a>
              <a href="thread.html#3733">[ thread ]</a>
              <a href="subject.html#3733">[ subject ]</a>
              <a href="author.html#3733">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
