<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Trampolines...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Trampolines...&In-Reply-To=62297.207.180.207.254.1109172428.squirrel%40webmail.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010637.html">
   <LINK REL="Next"  HREF="010660.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Trampolines...</H1>
    <B>Willibald Krenn</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Trampolines...&In-Reply-To=62297.207.180.207.254.1109172428.squirrel%40webmail.ximian.com"
       TITLE="[Mono-devel-list] Trampolines...">Willibald.Krenn at gmx.at
       </A><BR>
    <I>Wed Feb 23 10:57:33 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010637.html">[Mono-devel-list] Trampolines...
</A></li>
        <LI>Next message: <A HREF="010660.html">[Mono-devel-list] Trampolines...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10638">[ date ]</a>
              <a href="thread.html#10638">[ thread ]</a>
              <a href="subject.html#10638">[ subject ]</a>
              <a href="author.html#10638">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ben Maurer schrieb:
&gt;<i> I guess that would work. Is the cost of doing an unbox trampoline showing
</I>&gt;<i> up in any sort of profile on a non-pendantic test case?
</I>
Well, honestly, I don't think the speedup will be noticeable. There's 
probably more potential in memory savings(?), as we would not have to 
allocate e.g. 24 bytes on AMD64 per unbox trampoline.
The main advantage I see is that when stepping through JIT compiled code 
(with gdb), there is one trampoline less. Besides that it's also easier 
to deal with the unbox trampolines, as you just have to subtract/add a 
fixed number (offset) to get the unbox 'tramp' or the 'real' method.

BTW: The unbox trampolines can't show up anywhere (IIRC) because no 
MonoJitInfo is saved for them..

I think that removing an imm64 load followed by a jump and improving 
code locality is no bad improvement. I'll try to come up with a patch 
shortly, so we can discuss this in more detail.

Willi


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010637.html">[Mono-devel-list] Trampolines...
</A></li>
	<LI>Next message: <A HREF="010660.html">[Mono-devel-list] Trampolines...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10638">[ date ]</a>
              <a href="thread.html#10638">[ thread ]</a>
              <a href="subject.html#10638">[ subject ]</a>
              <a href="author.html#10638">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
