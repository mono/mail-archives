<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: not-so-good patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20not-so-good%20patch&In-Reply-To=420B311C.1070100%40mainsoft.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010446.html">
   <LINK REL="Next"  HREF="010405.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: not-so-good patch</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20not-so-good%20patch&In-Reply-To=420B311C.1070100%40mainsoft.com"
       TITLE="[Mono-devel-list] Re: not-so-good patch">atsushi at ximian.com
       </A><BR>
    <I>Thu Feb 10 12:49:15 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010446.html">[Mono-devel-list] MSVC port in progress, a couple questions
</A></li>
        <LI>Next message: <A HREF="010405.html">[Mono-devel-list] NUnit and Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10392">[ date ]</a>
              <a href="thread.html#10392">[ thread ]</a>
              <a href="subject.html#10392">[ subject ]</a>
              <a href="author.html#10392">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Andrew,

Ok, and actually after fixing XML declaration output, the rest of
the patch fixes some (well, many) diffs while introducing more new
differentiated results (which does not look like just attribute
ordering but removes expected namespace declarations).

Redesigning is not a big deal. I think we anyways have to change
whitespace handling too. So what I need here is the list of the
problem we have. And next, how to fix, hopefully with patches.

As one point the discussion you pointed out makes sense, yes. If
for now only that point, let's fix the patch not to break other
results.

Atsushi Eno

Andrew Skiba wrote:
&gt;<i> Hello, Atsushi.
</I>&gt;<i> 
</I>&gt;<i> My patch is not so good, because it fixes what is easier to fix, instead 
</I>&gt;<i> of fixing the bad design. Let me explain how I think namespaces should 
</I>&gt;<i> be processed in XSLT. All processing should be done only on the output 
</I>&gt;<i> tree. It's irrelevant when an element is evaluated, what matters is what 
</I>&gt;<i> they write to the output. For example xsl:if sometimes will not write 
</I>&gt;<i> anything. Today when user declares a namespace, it's processed by the 
</I>&gt;<i> first construction that comes after it. In the following example it's 
</I>&gt;<i> xsl:variable.
</I>&gt;<i> 
</I>&gt;<i> &lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform&quot;">http://www.w3.org/1999/XSL/Transform&quot;</A> 
</I>&gt;<i> version=&quot;1.0&quot; xmlns:n1=&quot;n1&quot;&gt;
</I>&gt;<i> 
</I>&gt;<i> &lt;xsl:variable name=&quot;v&quot;&gt;
</I>&gt;<i>     &lt;ccc/&gt;
</I>&gt;<i> &lt;/xsl:variable&gt;
</I>&gt;<i> 
</I>&gt;<i> &lt;xsl:template match=&quot;/&quot; xmlns:n2=&quot;n2&quot;&gt;
</I>&gt;<i>     &lt;aaa xmlns:n3=&quot;n3&quot;&gt;
</I>&gt;<i>         &lt;bbb xmlns:n4=&quot;n4&quot; xmlns:n1=&quot;n1&quot;/&gt;
</I>&gt;<i>     &lt;/aaa&gt;
</I>&gt;<i>     &lt;xsl:copy-of select=&quot;$v&quot;/&gt;
</I>&gt;<i> &lt;/xsl:template&gt;
</I>&gt;<i> &lt;/xsl:stylesheet&gt;
</I>&gt;<i> 
</I>&gt;<i> outputs
</I>&gt;<i> 
</I>&gt;<i> &lt;aaa xmlns:n3=&quot;n3&quot;&gt;
</I>&gt;<i>   &lt;bbb xmlns:n4=&quot;n4&quot; xmlns:n1=&quot;n1&quot; /&gt;
</I>&gt;<i> &lt;/aaa&gt;
</I>&gt;<i> &lt;ccc xmlns:n1=&quot;n1&quot; /&gt;
</I>&gt;<i> 
</I>&gt;<i> instead of
</I>&gt;<i> 
</I>&gt;<i> &lt;aaa xmlns:ns1=&quot;ns1&quot; xmlns:n2=&quot;n2&quot; xmlns:n3=&quot;n3&quot;&gt;
</I>&gt;<i>     &lt;bbb xmlns:ns4=&quot;ns4&quot; /&gt;
</I>&gt;<i> &lt;/aaa&gt;
</I>&gt;<i> &lt;ccc xmlns:ns1=&quot;ns1&quot; /&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> If you add here included and imported stylesheets with other namespaces 
</I>&gt;<i> declared in them, the situation will be much worse.
</I>&gt;<i> 
</I>&gt;<i> But namespace processing should look simple.
</I>&gt;<i> 
</I>&gt;<i> 1. On the compilation stage every compiled element gets the full list of 
</I>&gt;<i> all namespaces, declared in it and its parents.
</I>&gt;<i> 2. When an element is written to the output, it gets the list of the 
</I>&gt;<i> compiled element that writes it.
</I>&gt;<i> 3. From the list of namespaces you hide standard ones and those that 
</I>&gt;<i> were already written for the parents in the output tree. The rest you 
</I>&gt;<i> write out.
</I>&gt;<i> 
</I>&gt;<i> Nothing complicated. I don't mention here namespaces that come from 
</I>&gt;<i> attributes and the input XML, as their processing does not change my idea.
</I>&gt;<i> 
</I>&gt;<i> Andrew Skiba.
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010446.html">[Mono-devel-list] MSVC port in progress, a couple questions
</A></li>
	<LI>Next message: <A HREF="010405.html">[Mono-devel-list] NUnit and Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10392">[ date ]</a>
              <a href="thread.html#10392">[ thread ]</a>
              <a href="subject.html#10392">[ subject ]</a>
              <a href="author.html#10392">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
