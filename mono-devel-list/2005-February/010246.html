<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] Cleanup of MonoClass member usage in	metadata
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Cleanup%20of%20MonoClass%20member%20usage%20in%0A%09metadata&In-Reply-To=20050131182159.GJ25807%40debian.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010242.html">
   <LINK REL="Next"  HREF="010249.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] Cleanup of MonoClass member usage in	metadata</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Cleanup%20of%20MonoClass%20member%20usage%20in%0A%09metadata&In-Reply-To=20050131182159.GJ25807%40debian.org"
       TITLE="[Mono-devel-list] [PATCH] Cleanup of MonoClass member usage in	metadata">bmaurer at ximian.com
       </A><BR>
    <I>Wed Feb  2 18:40:10 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010242.html">[Mono-devel-list] Compiling on os x 10.2.8
</A></li>
        <LI>Next message: <A HREF="010249.html">[Mono-devel-list] Capturing Shell Output:	System.Diagnostics.Process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10246">[ date ]</a>
              <a href="thread.html#10246">[ thread ]</a>
              <a href="subject.html#10246">[ subject ]</a>
              <a href="author.html#10246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2005-01-31 at 19:21 +0100, Paolo Molaro wrote:
&gt;<i> On 01/31/05 Ben Maurer wrote:
</I>&gt;<i> &gt;       * The code is cleaner and easier to understand. This is especially
</I>&gt;<i> &gt;         true in some areas where the old code would loop through all the
</I>&gt;<i> &gt;         MonoMethod's or MonoField's looking for one with a specific
</I>&gt;<i> &gt;         name. We now use the helper method in these cases. Even in areas
</I>&gt;<i> &gt;         where the code can not be replaced with a more general function,
</I>&gt;<i> &gt;         it is still quite a bit cleaner 
</I>&gt;<i> 
</I>&gt;<i> I think it's fine to commit the chunks that replace manual search
</I>&gt;<i> by name with the helper functions.
</I>
This has been done (mostly by Zoltan).

&gt;<i> The other changes are not committable as is, because you use an ugly
</I>&gt;<i> coding pattern when you could use a nice one. You set the iter to NULL
</I>&gt;<i> far away from where it is used, with lots of unrelated stuff in
</I>&gt;<i> between. The correct way to use the iterators is with a for loop:
</I>&gt;<i> 
</I>&gt;<i> 	for (iter = NULL; (m = mono_class_get_methods (klass, &amp;iter)); ) {
</I>&gt;<i> 		...
</I>&gt;<i> 	}
</I>&gt;<i> or, when using while:
</I>&gt;<i> 	iter = NULL;
</I>&gt;<i> 	while ((m = mono_class_get_methods (klass, &amp;iter))) {
</I>&gt;<i> 		...
</I>&gt;<i> 	}
</I>I've done this. In cases where the decl of iter was above the while
loop, I just did the assignment in the decl. Attached is the new
version.

-- Ben
-------------- next part --------------
A non-text attachment was scrubbed...
Name: metadata-class-members-cleanup.patch
Type: text/x-patch
Size: 30814 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050202/1d7936db/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050202/1d7936db/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010242.html">[Mono-devel-list] Compiling on os x 10.2.8
</A></li>
	<LI>Next message: <A HREF="010249.html">[Mono-devel-list] Capturing Shell Output:	System.Diagnostics.Process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10246">[ date ]</a>
              <a href="thread.html#10246">[ thread ]</a>
              <a href="subject.html#10246">[ subject ]</a>
              <a href="author.html#10246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
