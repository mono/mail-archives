<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] Avoid loading field metadata for enums
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Avoid%20loading%20field%20metadata%20for%20enums&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010582.html">
   <LINK REL="Next"  HREF="010696.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] Avoid loading field metadata for enums</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Avoid%20loading%20field%20metadata%20for%20enums&In-Reply-To="
       TITLE="[Mono-devel-list] [PATCH] Avoid loading field metadata for enums">bmaurer at ximian.com
       </A><BR>
    <I>Sat Feb 19 15:31:47 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010582.html">[Mono-devel-list] Re: Solaris x86 and flags
</A></li>
        <LI>Next message: <A HREF="010696.html">[Mono-devel-list] Comments for NumberFormatter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10559">[ date ]</a>
              <a href="thread.html#10559">[ thread ]</a>
              <a href="subject.html#10559">[ subject ]</a>
              <a href="author.html#10559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey guys,

This is a patch that avoids loading all the MonoClassField's, etc, for
enums. I took advantage of the fact that both csc and mcs put __value as
the first field in a class. This patch looks for that to be the first
member, and if it is, will use the type of the field to find the
underlying type.

It correctly falls back on the old code in the case that there is some
wacked out compiler that does not do this.

This patch gives a nice kickback on monodoc:

Before:
&gt;<i> [<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">benm at omega</A> benm]$ ps u -C mono
</I>&gt;<i> USER       PID %CPU %MEM   VSZ  RSS TTY      STAT START   TIME COMMAND
</I>&gt;<i> benm     15237  0.0  1.9 34152 19968 pts/6   S+   14:36   0:00 mono /home/benm/install/lib/monodoc/browser.exe
</I>
After:
&gt;<i> [<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">benm at omega</A> benm]$ ps u -C mono
</I>&gt;<i> USER       PID %CPU %MEM   VSZ  RSS TTY      STAT START   TIME COMMAND
</I>&gt;<i> benm     15243  0.0  1.9 34260 19740 pts/6   S+   14:36   0:00 /home/benm/msvn/mono/mono/mini/mono /home/benm/install/lib/monodoc/browser.exe
</I>
-- Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010582.html">[Mono-devel-list] Re: Solaris x86 and flags
</A></li>
	<LI>Next message: <A HREF="010696.html">[Mono-devel-list] Comments for NumberFormatter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10559">[ date ]</a>
              <a href="thread.html#10559">[ thread ]</a>
              <a href="subject.html#10559">[ subject ]</a>
              <a href="author.html#10559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
