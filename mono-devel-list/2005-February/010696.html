<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Comments for NumberFormatter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Comments%20for%20NumberFormatter&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010559.html">
   <LINK REL="Next"  HREF="010697.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Comments for NumberFormatter</H1>
    <B>Andreas Nahr</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Comments%20for%20NumberFormatter&In-Reply-To="
       TITLE="[Mono-devel-list] Comments for NumberFormatter">ClassDevelopment at A-SoftTech.com
       </A><BR>
    <I>Sat Feb 26 17:13:35 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010559.html">[Mono-devel-list] [PATCH] Avoid loading field metadata for enums
</A></li>
        <LI>Next message: <A HREF="010697.html">[Mono-devel-list] Comments for NumberFormatter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10696">[ date ]</a>
              <a href="thread.html#10696">[ thread ]</a>
              <a href="subject.html#10696">[ subject ]</a>
              <a href="author.html#10696">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I checked through the new NumberFormatter Class and found a few points that 
could perhaps be improved:

* The internal class Numberstore contains things like that at several 
places:
if (v &gt;= 1000000000000000000)
					i = 18;
				else if (v &gt;= 100000000000000000)
					i = 17;
				else if (v &gt;= 10000000000000000)
					i = 16;
...
I Think it would make sense to revert the order here because a) in real 
world small numbers are more common than large ones. This code is called 
from other functions which deliver e.g. an byte, which surely never can get 
this big.

* NumberFormatter contains several private classes. Some (all?) could likely 
be converted to structs which should help improve performance and reduce 
memory usage.

* There are several places were Strings are used but Chars could be used 
instead (like &quot; &quot;)

* The following line in FormatExponential is really hard to read and should 
be refactored:
return string.Concat (&quot;0&quot;, precision &gt; 0 ? &quot;.&quot; + new string ('0', precision) 
:<i> &quot;&quot;, upper ? &quot;E&quot; : &quot;e&quot;, nfi.PositiveSign, &quot;000&quot;);
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010559.html">[Mono-devel-list] [PATCH] Avoid loading field metadata for enums
</A></li>
	<LI>Next message: <A HREF="010697.html">[Mono-devel-list] Comments for NumberFormatter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10696">[ date ]</a>
              <a href="thread.html#10696">[ thread ]</a>
              <a href="subject.html#10696">[ subject ]</a>
              <a href="author.html#10696">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
