<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: XSLT patches reviewed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20XSLT%20patches%20reviewed&In-Reply-To=4209CFD3.4010109%40mainsoft.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010358.html">
   <LINK REL="Next"  HREF="010363.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: XSLT patches reviewed</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20XSLT%20patches%20reviewed&In-Reply-To=4209CFD3.4010109%40mainsoft.com"
       TITLE="[Mono-devel-list] Re: XSLT patches reviewed">atsushi at ximian.com
       </A><BR>
    <I>Wed Feb  9 05:43:01 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010358.html">[Mono-devel-list] Re: XSLT patches reviewed
</A></li>
        <LI>Next message: <A HREF="010363.html">[Mono-devel-list] Re: XSLT patches reviewed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10361">[ date ]</a>
              <a href="thread.html#10361">[ thread ]</a>
              <a href="subject.html#10361">[ subject ]</a>
              <a href="author.html#10361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;&gt;<i>xslnumber.patch
</I>&gt;&gt;<i>	I need more precise understanding about number formatting
</I>&gt;&gt;<i>	which is expected in XSLT spec (or please point the related
</I>&gt;&gt;<i>	spec section number in your patch).
</I>&gt;<i> 
</I>&gt;<i> The idea here was to pass test which checks large number for grouping
</I>&gt;<i> sizes. The standard does not limit grouping sizes to MAX_INT, so to
</I>&gt;<i> parse numbers like 10000000000000000 you can use decimal type.
</I>
Ok. It is implementation dependent, but I'll commit because it
differentiates behavior between MS and mono. It is now in svn.

&gt;&gt;<i>xsforeach.patch
</I>&gt;&gt;<i>	I need clarification on the purpose of this patch.
</I>&gt;&gt;<i>	Performance?
</I>&gt;<i> 
</I>&gt;<i> No, null reference bug. XSLT standard does not forbid you to write
</I>&gt;<i> &lt;xsl:for-each /&gt; You can see that children is null in this case, so
</I>&gt;<i> children.Evaluate () will crash.
</I>
I see. Now this fix is in svn.

&gt;&gt;<i>xslstylesheet.patch
</I>&gt;&gt;<i>locationpathpattern.patch
</I>&gt;&gt;<i>	I need clarification on the purpose of these patches.
</I>&gt;&gt;<i>	With OASIS's stable archive I could not find any improvements.
</I>&gt;<i> 
</I>&gt;<i> May be the tests that are improved by this patch are noised by minor
</I>&gt;<i> differences. I wrote XmlNormalizer which allows you to cut different
</I>&gt;<i> nodes from XML, so you can see more important differences and ignore
</I>&gt;<i> less important. Have the source in the attachment.
</I>
OK. Maybe I had better incorporate this normalizer with the test
runner. Let me check again after the work has done.

&gt;<i> xslstylesheet.patch fixes the bug if you redefine namespace-alias a few
</I>&gt;<i> times for a same identifier. You don't want to create a new namespace
</I>&gt;<i> alias, so you replace the previous one.
</I>
OK, so MS implementation had chosen to recover from the error, in the
way specified in the spec 7.7.1. This fix is now in svn.

&gt;<i> locationpathpattern.patch fixes a bug that was triggered not by this
</I>&gt;<i> test suite, but by some Serializer as best as I can remember. At least
</I>&gt;<i> in one of the cases when you give '*' it becomes an empty string, so
</I>&gt;<i> this check was necessary.
</I>
Yes, looks so, as long as I saw XPath Tokenizer. This fix is now in svn.

&gt;&gt;<i>xmlwriteremitter.patch
</I>&gt;&gt;<i>	I should reject this patch. It is enough to invoke
</I>&gt;&gt;<i>	String.Replace() just once (because it replaces all
</I>&gt;&gt;<i>	the matching string occurence). Also, two WriteComment()
</I>&gt;&gt;<i>	without object creation is better than allocating another
</I>&gt;&gt;<i>	string object in general.
</I>&gt;<i> 
</I>&gt;<i> This patch was fixes Comment_Comment_LineOfAllHyphens test. If it was
</I>&gt;<i> enough to call String.Replace() just once the test would succed from the
</I>&gt;<i> beginning.
</I>
My first comment for .Replace() was invalid. I'll checkin the first fix.

&gt;&gt;<i>whitespacenodes.patch
</I>&gt;&gt;<i>	Let me read the spec in depth. Without related spec section
</I>&gt;&gt;<i>	it is impossible to determine if the patch is fine (and that
</I>&gt;&gt;<i>	part is one of the difficult part of XSLT).
</I>&gt;<i> 
</I>&gt;<i> This patch fixes null reference exception. It does not change whitespace
</I>&gt;<i> outputting. Exception happens with test IDs BVTs_bvt083 and BVTs_bvt001.
</I>
It broke Variables_GlobalVarHaveLocalVarDefinedWithin.rst, so am
pending this patch yet.

&gt;<i> This class was not a part of any our test suite, I wrote quick and dirty
</I>&gt;<i> to start with something. So you will surely need to tune it to be
</I>&gt;<i> somewhat useful.
</I>
It was already useful in the first form ;-) I checked in your test
prerequisists and put a result collection to my web repositry.

&gt;&gt;<i>I believe all the rest part of the patch is in svn, but tell me if
</I>&gt;&gt;<i>there was missing. In general very nice patches :-)
</I>&gt;<i> 
</I>&gt;<i> Big pleasure to hear it.
</I>
Thanks again for those patches and followups!

Atsushi Eno

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010358.html">[Mono-devel-list] Re: XSLT patches reviewed
</A></li>
	<LI>Next message: <A HREF="010363.html">[Mono-devel-list] Re: XSLT patches reviewed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10361">[ date ]</a>
              <a href="thread.html#10361">[ thread ]</a>
              <a href="subject.html#10361">[ subject ]</a>
              <a href="author.html#10361">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
