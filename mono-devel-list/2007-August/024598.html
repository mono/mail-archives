<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Marshalling: Bug in StructLayout?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Marshalling%3A%20Bug%20in%20StructLayout%3F&In-Reply-To=295e750a0708181434j6c14c224v99daad1af524b151%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024594.html">
   <LINK REL="Next"  HREF="024592.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Marshalling: Bug in StructLayout?</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Marshalling%3A%20Bug%20in%20StructLayout%3F&In-Reply-To=295e750a0708181434j6c14c224v99daad1af524b151%40mail.gmail.com"
       TITLE="[Mono-dev] Marshalling: Bug in StructLayout?">lupus at ximian.com
       </A><BR>
    <I>Mon Aug 20 04:16:08 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024594.html">[Mono-dev] Marshalling: Bug in StructLayout?
</A></li>
        <LI>Next message: <A HREF="024592.html">[Mono-dev] Marshalling: Bug in StructLayout?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24598">[ date ]</a>
              <a href="thread.html#24598">[ thread ]</a>
              <a href="subject.html#24598">[ subject ]</a>
              <a href="author.html#24598">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/18/07 Zoltan Varga wrote:
&gt;<i>   This is indeed a mono bug. We align structures smaller than sizeof(void*) to
</I>&gt;<i> sizeof(void*) because the JIT memcpy/memset routines require it. So your
</I>&gt;<i> AVRational struct has an min alignment of 8 bytes. The workaround for now is to
</I>&gt;<i> declare AVRational as having explicit layout.
</I>
This hack should be enabled only on the architectures that have broken
alignment handling like sparc and arm (and eventually the issue with the
memcpy alignment for those archs need fixing).

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024594.html">[Mono-dev] Marshalling: Bug in StructLayout?
</A></li>
	<LI>Next message: <A HREF="024592.html">[Mono-dev] Marshalling: Bug in StructLayout?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24598">[ date ]</a>
              <a href="thread.html#24598">[ thread ]</a>
              <a href="subject.html#24598">[ subject ]</a>
              <a href="author.html#24598">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
