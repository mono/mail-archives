<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Compiling mono on embedded platform fails (ppc32)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Compiling%20mono%20on%20embedded%20platform%20fails%20%28ppc32%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024521.html">
   <LINK REL="Next"  HREF="024601.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Compiling mono on embedded platform fails (ppc32)</H1>
    <B>Johannes Paschold</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Compiling%20mono%20on%20embedded%20platform%20fails%20%28ppc32%29&In-Reply-To="
       TITLE="[Mono-dev] Compiling mono on embedded platform fails (ppc32)">oldpasch at gmail.com
       </A><BR>
    <I>Tue Aug 14 11:45:53 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024521.html">[Mono-dev] Crypto secure random numbers
</A></li>
        <LI>Next message: <A HREF="024601.html">[Mono-dev] Compiling mono on embedded platform fails (ppc32)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24524">[ date ]</a>
              <a href="thread.html#24524">[ thread ]</a>
              <a href="subject.html#24524">[ subject ]</a>
              <a href="author.html#24524">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Andreas,

thanks for your last mail.
To get more specific: I have 2 problems:

First one: Is exactly the same like this:

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=58453">http://bugzilla.ximian.com/show_bug.cgi?id=58453</A>

thats why i reopened this bug from state NEEDINFO.

To make things short: exceptions-ppc.c expects a specific ucontext
struct layout which does not fit to mine. So this is probably a
problem on older systems?
Despite of that it should be possible to change the code to fit my
ucontext.h if one knows WHAT to change and in which way.

2. monoburg crashes with Segmentation fault.

I compiled and installed pkgconfig, bison and glib 2.12 (all necessary
dependencies for mono) and do a simple:
./configure (everything goes fine)
make

make aborts when executing the built monoburg binary:
./monoburg ./sample.brg &gt; sample.c

to solve this i just put in a sample.c from a different compilation
(on ppc32 too) not knowing what side effects this could raise.
Is crashing of monoburg a known problem somewhere?

Regards jOe


&gt;<i> Hello Johannes,
</I>&gt;<i>
</I>&gt;<i> Am 08.08.2007 um 17:44 schrieb Johannes Paschold:
</I>&gt;<i>
</I>&gt;<i> &gt; i have a problem compiling mono on my embedded linux
</I>&gt;<i>
</I>&gt;<i> &gt; I compiled and installed bison, pkg-config and glib 2.4.8 and
</I>&gt;<i> &gt; configured mono successfully.
</I>&gt;<i> &gt; When running make, compilation fails with the below error message:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; exceptions-ppc.c:486: warning: unused variable `p'
</I>&gt;<i> &gt; exceptions-ppc.c:506: warning: `offset' might be used uninitialized
</I>&gt;<i> &gt; in this function
</I>&gt;<i> &gt; exceptions-ppc.c:590: warning: visibility attribute not supported
</I>&gt;<i> &gt; in this configuration; ignored
</I>&gt;<i> &gt; exceptions-ppc.c: In function `mono_jit_walk_stack':
</I>&gt;<i> &gt; exceptions-ppc.c:640: warning: visibility attribute not supported
</I>&gt;<i> &gt; in this configuration; ignored
</I>&gt;<i> &gt; exceptions-ppc.c: In function `ves_icall_get_frame_info':
</I>&gt;<i> &gt; exceptions-ppc.c:711: warning: visibility attribute not supported
</I>&gt;<i> &gt; in this configuration; ignored
</I>&gt;<i> &gt; exceptions-ppc.c: In function `mono_arch_handle_exception':
</I>&gt;<i> &gt; exceptions-ppc.c:756: structure has no member named `uc_regs'
</I>&gt;<i> &gt; exceptions-ppc.c:757: structure has no member named `uc_regs'
</I>&gt;<i> &gt; exceptions-ppc.c:758: structure has no member named `uc_regs'
</I>&gt;<i> &gt; exceptions-ppc.c:759: structure has no member named `uc_regs'
</I>&gt;<i> &gt; exceptions-ppc.c :765: structure has no member named `uc_regs'
</I>&gt;<i> &gt; exceptions-ppc.c:766: structure has no member named `uc_regs'
</I>&gt;<i> &gt; exceptions-ppc.c:767: structure has no member named `uc_regs'
</I>&gt;<i> &gt; exceptions-ppc.c:768: structure has no member named `uc_regs'
</I>&gt;<i> &gt; exceptions-ppc.c: In function `mono_arch_ip_from_context':
</I>&gt;<i> &gt; exceptions-ppc.c:776: structure has no member named `uc_regs'
</I>&gt;<i> &gt; make[4]: *** [exceptions-ppc.lo] Error 1
</I>&gt;<i> &gt; make[4]: Leaving directory `/tmp/mono- 1.2.4/mono/mini'
</I>&gt;<i> &gt; make[3]: *** [all] Error 2
</I>&gt;<i> &gt; make[3]: Leaving directory `/tmp/mono-1.2.4/mono/mini'
</I>&gt;<i> &gt; make[2]: *** [all-recursive] Error 1
</I>&gt;<i> &gt; make[2]: Leaving directory `/tmp/mono-1.2.4/mono'
</I>&gt;<i> &gt; make[1]: *** [all-recursive] Error 1
</I>&gt;<i> &gt; make[1]: Leaving directory `/tmp/mono-1.2.4'
</I>&gt;<i> &gt; make: *** [all] Error 2
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I found only 3 hits with google which gave me no solution for that
</I>&gt;<i> &gt; problem. Does anyone can help me out with that problem? Is it ppc
</I>&gt;<i> &gt; specific?
</I>&gt;<i>
</I>&gt;<i> Maybe your embedded platform is ppc64 based? For Linux/ppc64 the
</I>&gt;<i> signal structs are different when compiling 64-bit (they did work
</I>&gt;<i> unchanged 32-bit on Debian Linux/ppc64). Unfortunately some breaking
</I>&gt;<i> changes were introduced since my latest patch snapshot (the relevant
</I>&gt;<i> code was moved to new functions) and I haven't updated it in Bugzilla
</I>&gt;<i> yet with no-one showing any interest in it.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=81455">http://bugzilla.ximian.com/show_bug.cgi?id=81455</A>
</I>&gt;<i>
</I>&gt;<i> However, if you do confirm that you are on ppc64 it will likely not
</I>&gt;<i> work with only the struct changes applied but feel free to contribute
</I>&gt;<i> to my port effort, I'd appreciate that.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Is it possible to build mono from the sources without having a mono
</I>&gt;<i> &gt; installation? The readme says this should be possible if it's an
</I>&gt;<i> &gt; official release (which 1.2.4 i think is?) and not a snapshot.
</I>&gt;<i>
</I>&gt;<i> Short answer: yes. The source tarball bootstraps itself automatically
</I>&gt;<i> when mcs is not available, and for SVN the README has info on getting
</I>&gt;<i> the latest monolite.
</I>&gt;<i>
</I>&gt;<i> Andreas
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024521.html">[Mono-dev] Crypto secure random numbers
</A></li>
	<LI>Next message: <A HREF="024601.html">[Mono-dev] Compiling mono on embedded platform fails (ppc32)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24524">[ date ]</a>
              <a href="thread.html#24524">[ thread ]</a>
              <a href="subject.html#24524">[ subject ]</a>
              <a href="author.html#24524">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
