<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] managed code wrappers (exceptions &amp; garbage	collection across pinvoke barriers)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20managed%20code%20wrappers%20%28exceptions%20%26%20garbage%0A%09collection%20across%20pinvoke%20barriers%29&In-Reply-To=295e750a0708251357j3ac674b8we43fc6433fb1a7b9%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024691.html">
   <LINK REL="Next"  HREF="024693.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] managed code wrappers (exceptions &amp; garbage	collection across pinvoke barriers)</H1>
    <B>Sebastian Good</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20managed%20code%20wrappers%20%28exceptions%20%26%20garbage%0A%09collection%20across%20pinvoke%20barriers%29&In-Reply-To=295e750a0708251357j3ac674b8we43fc6433fb1a7b9%40mail.gmail.com"
       TITLE="[Mono-dev] managed code wrappers (exceptions &amp; garbage	collection across pinvoke barriers)">sebastian at palladiumconsulting.com
       </A><BR>
    <I>Sat Aug 25 17:26:59 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024691.html">[Mono-dev] managed code wrappers (exceptions &amp; garbage	collection across pinvoke barriers)
</A></li>
        <LI>Next message: <A HREF="024693.html">[Mono-dev] managed code wrappers (exceptions &amp; garbage	collection across pinvoke barriers)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24692">[ date ]</a>
              <a href="thread.html#24692">[ thread ]</a>
              <a href="subject.html#24692">[ subject ]</a>
              <a href="author.html#24692">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have not attempted to run a memory profiler on my example, but the
brute-force method of letting the code run in a loop causes the process to
eventually run out of memory. What is the recommended way to debug these
leaks? On the suspicion it was actually just the managed copy of the input
string that was never having a chance to collect, I even ran the mono
garbage collector explicitly. (Such silly ideas don't usually pan out -- and
this was no exception.)

On 8/25/07, Zoltan Varga &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">vargaz at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>                                     Hi,
</I>&gt;<i>
</I>&gt;<i>   The input parameter is converted by the runtime from ut8 to a managed
</I>&gt;<i> string
</I>&gt;<i> object, which is handled by the GC, so there should be no leak there. The
</I>&gt;<i> result
</I>&gt;<i> is converted from a managed string object to ut8, and the caller should
</I>&gt;<i> free it
</I>&gt;<i> using g_free (). So your example code should work without a leak.
</I>&gt;<i>
</I>&gt;<i>                Zoltan
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070825/960c0395/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070825/960c0395/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024691.html">[Mono-dev] managed code wrappers (exceptions &amp; garbage	collection across pinvoke barriers)
</A></li>
	<LI>Next message: <A HREF="024693.html">[Mono-dev] managed code wrappers (exceptions &amp; garbage	collection across pinvoke barriers)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24692">[ date ]</a>
              <a href="thread.html#24692">[ thread ]</a>
              <a href="subject.html#24692">[ subject ]</a>
              <a href="author.html#24692">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
