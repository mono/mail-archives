<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Proposed changes to	mono/mcs/class/corlib/Mono/DataConverter.cs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Proposed%20changes%20to%0A%09mono/mcs/class/corlib/Mono/DataConverter.cs&In-Reply-To=%3CCAD-QL2o178PiAjD%2BvdYp4Nt-wp7zrP7FVe10%3DRkkZtc0KFQjzw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042502.html">
   <LINK REL="Next"  HREF="042491.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Proposed changes to	mono/mcs/class/corlib/Mono/DataConverter.cs</H1>
    <B>Michael McGlothlin</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Proposed%20changes%20to%0A%09mono/mcs/class/corlib/Mono/DataConverter.cs&In-Reply-To=%3CCAD-QL2o178PiAjD%2BvdYp4Nt-wp7zrP7FVe10%3DRkkZtc0KFQjzw%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Proposed changes to	mono/mcs/class/corlib/Mono/DataConverter.cs">mike.mcglothlin at gmail.com
       </A><BR>
    <I>Tue Dec  9 03:54:08 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="042502.html">[Mono-dev] Event logging under Mono
</A></li>
        <LI>Next message: <A HREF="042491.html">[Mono-dev] Proposed changes to	mono/mcs/class/corlib/Mono/DataConverter.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42490">[ date ]</a>
              <a href="thread.html#42490">[ thread ]</a>
              <a href="subject.html#42490">[ subject ]</a>
              <a href="author.html#42490">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Couldn't figure out how to get Xamarin Studio to create an actual patch
file after trying, and failing, to push a change with git. It appears this
is the correct place to post this?

I usually put most of my code in PCL and then call it from platform
specific code so I'm trying to make DataConverter happy as PCL.

To make DataConverter compile as PCL I had to change Encoding.UTF7 to
Encoding.GetEncoding ( &quot;utf-7&quot; ) and the numeric calls to 12000 and 12001
on GetEncoding() to the string-based &quot;utf-32&quot; and &quot;uff-32BE&quot;. These three
changes had to be made twice as there are two variants using this same
code. I also changed ArrayList to List&lt;object&gt; to make PCL happy.



case '7':
e = Encoding.GetEncoding (&quot;utf-7&quot;);
n = 1;
break;
case '3':
e = Encoding.GetEncoding (&quot;utf-32&quot;);
n = 4;
break;
case '4':
e = Encoding.GetEncoding (&quot;utf-32BE&quot;);
n = 4;
break;



static public IList Unpack (string description, byte[] buffer, int
startIndex)
{
DataConverter conv = CopyConv;
var result = new List&lt;object&gt; ();
int idx = startIndex;
bool align = false;
int repeat = 0, n;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141208/0d7c2255/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141208/0d7c2255/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DataConverter.cs
Type: application/octet-stream
Size: 46079 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141208/0d7c2255/attachment-0001.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141208/0d7c2255/attachment-0001.obj</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042502.html">[Mono-dev] Event logging under Mono
</A></li>
	<LI>Next message: <A HREF="042491.html">[Mono-dev] Proposed changes to	mono/mcs/class/corlib/Mono/DataConverter.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42490">[ date ]</a>
              <a href="thread.html#42490">[ thread ]</a>
              <a href="subject.html#42490">[ subject ]</a>
              <a href="author.html#42490">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
