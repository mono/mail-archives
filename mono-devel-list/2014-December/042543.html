<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Open source .Net, and TLS 1.1 &amp; 1.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Open%20source%20.Net%2C%20and%20TLS%201.1%20%26%201.2&In-Reply-To=%3CBN3PR0801MB1154AF8B5FA3D280EAE1C3A2FA6C0%40BN3PR0801MB1154.namprd08.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042540.html">
   <LINK REL="Next"  HREF="042548.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Open source .Net, and TLS 1.1 &amp; 1.2</H1>
    <B>Edward Ned Harvey (mono)</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Open%20source%20.Net%2C%20and%20TLS%201.1%20%26%201.2&In-Reply-To=%3CBN3PR0801MB1154AF8B5FA3D280EAE1C3A2FA6C0%40BN3PR0801MB1154.namprd08.prod.outlook.com%3E"
       TITLE="[Mono-dev] Open source .Net, and TLS 1.1 &amp; 1.2">edward.harvey.mono at clevertrove.com
       </A><BR>
    <I>Tue Dec 16 19:40:56 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="042540.html">[Mono-dev] Open source .Net, and TLS 1.1 &amp; 1.2
</A></li>
        <LI>Next message: <A HREF="042548.html">[Mono-dev] Open source .Net, and TLS 1.1 &amp; 1.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42543">[ date ]</a>
              <a href="thread.html#42543">[ thread ]</a>
              <a href="subject.html#42543">[ subject ]</a>
              <a href="author.html#42543">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> [mailto:mono-devel-list-
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bounces at lists.ximian.com</A>] On Behalf Of Edward Ned Harvey (mono)
</I>&gt;<i> 
</I>&gt;<i> &gt; From: Miguel de Icaza [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at xamarin.com</A>]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We would love a test case to add to the test suite.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We are building a new test suite as part of this work anyways.
</I>&gt;<i> 
</I>&gt;<i> This is almost done.  Granted it is microscopic in scope - the test I've written
</I>&gt;<i> tests only for the case that I know fails; it's far from being a generalized test
</I>&gt;<i> for the SslStream class as a whole.
</I>
Well, this grew up more than expected.  I started writing a unit test, and discovered the behavior is variable based on the existence or non-existence of intermediates and roots on *both* the client and server...  Which means in order to test it thoroughly, the client &amp; server cannot be on the same machine...  So it's really not a unit test.  Even more dramatically, the behavior depends on whether the server &amp; client are windows or mono.  So ultimately this test requires 4 machines (2 windows and 2 mono) with 16 tests run on each combination.

I wrote a compatibility testing project.
<A HREF="https://github.com/rahvee/MonoSslStreamServerBug">https://github.com/rahvee/MonoSslStreamServerBug</A>

In this project, I created a junk root CA, an junk intermediate CA, and a junk server cert, suitable for publishing and testing.  I also tested, offline, pasting some real root CA, intermediate, and real commercially signed certs, and found the behavior of real certs from real CA's to be consistent with the results of these generated junk certs.

There are ultimately 2 bugs causing mono to fail - (1)  The server doesn't send the chain to the client.  And (2) the client fails to build a chain from available certs, even if all the necessary certs are available to the client.  I noticed &quot;mcs/class/Mono.Security/Mono.Security.X509/X509Chain.cs&quot; doesn't use the intermediate store at all, when using the &quot;Build()&quot; method to build a chain.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042540.html">[Mono-dev] Open source .Net, and TLS 1.1 &amp; 1.2
</A></li>
	<LI>Next message: <A HREF="042548.html">[Mono-dev] Open source .Net, and TLS 1.1 &amp; 1.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42543">[ date ]</a>
              <a href="thread.html#42543">[ thread ]</a>
              <a href="subject.html#42543">[ subject ]</a>
              <a href="author.html#42543">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
