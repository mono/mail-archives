<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] proxygen bindings
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20proxygen%20bindings&In-Reply-To=%3CCAPH5wFrDvmLHxoA8Rum_eAFj%2BoT%3DSBZdJRxi0ZYKRVr%2BJXZAuA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042476.html">
   <LINK REL="Next"  HREF="042477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] proxygen bindings</H1>
    <B>Nikita Tsukanov</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20proxygen%20bindings&In-Reply-To=%3CCAPH5wFrDvmLHxoA8Rum_eAFj%2BoT%3DSBZdJRxi0ZYKRVr%2BJXZAuA%40mail.gmail.com%3E"
       TITLE="[Mono-dev] proxygen bindings">keks9n at gmail.com
       </A><BR>
    <I>Wed Dec  3 17:59:30 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="042476.html">[Mono-dev] Porting System.Numerics from referencesource, approaches for copying code?
</A></li>
        <LI>Next message: <A HREF="042477.html">[Mono-dev] proxygen bindings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42475">[ date ]</a>
              <a href="thread.html#42475">[ thread ]</a>
              <a href="subject.html#42475">[ subject ]</a>
              <a href="author.html#42475">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello. Have you guys heard of the proxygen (
<A HREF="https://github.com/facebook/proxygen/">https://github.com/facebook/proxygen/</A> ) - an HTTP stack library recently
released by Facebook? It supports HTTP, SPDY, websockets and will support
HTTP/2.0 later.

I was playing around with it and created some initial bindings that allow
to write code like this:
<A HREF="https://github.com/kekekeks/prowingen/blob/master/managed/Sandbox/Program.cs">https://github.com/kekekeks/prowingen/blob/master/managed/Sandbox/Program.cs</A>

It performs rather good, I've got 41K requests/sec on my laptop, but
obliviously needs a lot more work for production use.

1) Is anyone interested in this sort of thing? I was initially planning to
implement an OWIN server on top of proxygen, but now I'm not so sure, since
I'm currently using my wrapper to libevent's HTTP server (
<A HREF="https://github.com/kekekeks/evhttp-sharp/">https://github.com/kekekeks/evhttp-sharp/</A> ) and quite happy with it's
performance which is almost the same (up to 38K rps on the same machine,
both benchmarks without thread pooling). The only thing it lacks is
websocket support, but I can live with that. Proxygen also can't be
compiled for Windows platform at all, so that server will be mono-only.

2) Does anyone have benchmark data on Kestrel? When I hammer it with ab or
wrk it just hangs and stops responding to any requests. If it can keep up
with proxygen in terms of performance, such bindings would be useless.

3) Is there any way to speed up interop calls? When I replace C++ handler
implementation with managed one that does essentially the same thing, the
performance drops drastically, i. e. from 130K to 40K rps). Currently I'm
using COM as a bridge ( with some basic infrastructure
native-&gt;managedimplementation -
<A HREF="https://github.com/kekekeks/prowingen/blob/master/native/include/com.h">https://github.com/kekekeks/prowingen/blob/master/native/include/com.h</A> ).
Is there a better way?

Regards,
Nikita
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141203/7b8c5d4a/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20141203/7b8c5d4a/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042476.html">[Mono-dev] Porting System.Numerics from referencesource, approaches for copying code?
</A></li>
	<LI>Next message: <A HREF="042477.html">[Mono-dev] proxygen bindings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42475">[ date ]</a>
              <a href="thread.html#42475">[ thread ]</a>
              <a href="subject.html#42475">[ subject ]</a>
              <a href="author.html#42475">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
