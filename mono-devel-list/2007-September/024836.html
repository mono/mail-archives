<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] MailDefinition patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20MailDefinition%20patch&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024860.html">
   <LINK REL="Next"  HREF="024837.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] MailDefinition patch</H1>
    <B>Dumitru Ban</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20MailDefinition%20patch&In-Reply-To="
       TITLE="[Mono-dev] MailDefinition patch">dban at dako.ro
       </A><BR>
    <I>Wed Sep  5 05:56:24 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024860.html">[Mono-dev] [PATCH] AppDomain.AssemblyResolve event	differences	between Mono and MS.NET
</A></li>
        <LI>Next message: <A HREF="024837.html">[Mono-dev] MailDefinition patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24836">[ date ]</a>
              <a href="thread.html#24836">[ thread ]</a>
              <a href="subject.html#24836">[ subject ]</a>
              <a href="author.html#24836">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>RE: [Mono-dev] MailDefinition patchHi,

Is anyone reviewing and applying this patch?

Thanks &amp; best regards,
Dumi.
  ----- Original Message ----- 
  From: Dumitru Ban 
  To: Konstantin Triger ; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A> 
  Sent: Wednesday, August 15, 2007 11:58 AM
  Subject: Re: [Mono-dev] MailDefinition patch


  Hi,

  Attached is a patch for the problem described below. Please review and apply it.

  Thanks &amp; best regards,
  Dumi.
    ----- Original Message ----- 
    From: Konstantin Triger 
    To: Dumitru Ban ; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A> 
    Sent: Saturday, June 30, 2007 8:07 PM
    Subject: RE: [Mono-dev] MailDefinition patch


    Hey Dumi,

    I would suggest looking into some code in Sys.Web, which has similar issues, i.e. XmlSiteMapProvider. It loads its data from the file and probably solves the problems you face. If appropriate, you may consider refactoring and using same functions for file loading for both cases.

    Regarding permissions (or any other IO problem), I think, the relevant exception should be thrown (nothing special needs to be done, the exception will be thrown when the file will be accessed). As usual, you may verify this by creating similar conditions on MS .net.

    Regards,
    Konstantin Triger



    -----Original Message-----
    From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> on behalf of Dumitru Ban
    Sent: Thu 6/28/2007 15:41
    To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
    Subject: Re: [Mono-dev] MailDefinition patch

    Hi again,

    Any thoughts? Any ideas?

    Thanks &amp; best regards,
    Dumi.
      ----- Original Message -----
      From: Dumitru Ban
      To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
      Sent: Tuesday, May 29, 2007 11:14 AM
      Subject: [Mono-dev] MailDefinition patch


      Hi,

      I'm trying to create a patch for the MailDefinition (System.Web.UI.WebControls) and I'm not sure what's the best way to do it. The problem is in the CreateMailMessage (string recipients, IDictionary replacements, Control owner) method. If the BodyFileName is present and it's rooted everything works fine. If it's not rooted, it is combined with the owner's TemplateSourceDirectory. And this is not working :(

      I'm using the MailDefinition from a CreateUserWizard. Both the aspx containing the CreateUserWizard and the mail file are in the same directory, &quot;users&quot;. If I set the BodyFileName for the wizard to &quot;~/users/createaccount.txt&quot;, the combined path is something like this: &quot;/myapp/~/users/createaccount.txt&quot;. And this is because there's no check for &quot;~/&quot;.

      If I set the BodyFileName to &quot;createaccount.txt&quot;, the combined path is something like this: &quot;/myapp/users/createaccount.txt&quot;. This one looks fine, except that it's a virtual path and the StreamReader in the CreateMailMessage is looking for a physical path.

      How should be the mail file accessed? Using virtual paths or physical paths? Also, what about the permissions of the mail file?

      P.S. Attached is a sample error.

      Thanks &amp; best regards,
      Dumi.




      __________ NOD32 2294 (20070528) Information __________

      This message was checked by NOD32 antivirus system.
      <A HREF="http://www.eset.com">http://www.eset.com</A>



    ------------------------------------------------------------------------------


      _______________________________________________
      Mono-devel-list mailing list
      <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
      <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>



      __________ NOD32 2294 (20070528) Information __________

      This message was checked by NOD32 antivirus system.
      <A HREF="http://www.eset.com">http://www.eset.com</A>





    __________ NOD32 2364 (20070629) Information __________

    This message was checked by NOD32 antivirus system.
    <A HREF="http://www.eset.com">http://www.eset.com</A>



------------------------------------------------------------------------------


  _______________________________________________
  Mono-devel-list mailing list
  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>



  __________ NOD32 2462 (20070815) Information __________

  This message was checked by NOD32 antivirus system.
  <A HREF="http://www.eset.com">http://www.eset.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070905/cfbf64a6/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070905/cfbf64a6/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024860.html">[Mono-dev] [PATCH] AppDomain.AssemblyResolve event	differences	between Mono and MS.NET
</A></li>
	<LI>Next message: <A HREF="024837.html">[Mono-dev] MailDefinition patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24836">[ date ]</a>
              <a href="thread.html#24836">[ thread ]</a>
              <a href="subject.html#24836">[ subject ]</a>
              <a href="author.html#24836">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
