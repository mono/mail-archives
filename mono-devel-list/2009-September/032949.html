<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] BinaryReader does not reset decoder
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20BinaryReader%20does%20not%20reset%20decoder&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032959.html">
   <LINK REL="Next"  HREF="033068.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] BinaryReader does not reset decoder</H1>
    <B>Martin Dvo&#345;&#225;k</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20BinaryReader%20does%20not%20reset%20decoder&In-Reply-To="
       TITLE="[Mono-dev] BinaryReader does not reset decoder">155144 at gmail.com
       </A><BR>
    <I>Wed Sep  9 10:31:34 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032959.html">[Mono-dev] libtool blowing up
</A></li>
        <LI>Next message: <A HREF="033068.html">[Mono-dev] BinaryReader does not reset decoder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32949">[ date ]</a>
              <a href="thread.html#32949">[ thread ]</a>
              <a href="subject.html#32949">[ subject ]</a>
              <a href="author.html#32949">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
While looking at the source code of System.IO.BinaryReader [1] I
noticed it reuses char decoder and I'm just wondering whether it is ok
that the BinaryReader does not reset its internal state before the
loop in ReadString method. What if the code fails e.g. on line 498
(sb.Append...) while the decoder contains fallback data. Next time
ReadString is called, it will fail because decoder will try to use
fallback data from previous call to ReadString. Or am I missing
something here?
Thanks, Martin

[1]
<A HREF="http://anonsvn.mono-project.com/viewvc/trunk/mcs/class/corlib/System.IO/BinaryReader.cs?revision=115560&amp;view=markup">http://anonsvn.mono-project.com/viewvc/trunk/mcs/class/corlib/System.IO/BinaryReader.cs?revision=115560&amp;view=markup</A>
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032959.html">[Mono-dev] libtool blowing up
</A></li>
	<LI>Next message: <A HREF="033068.html">[Mono-dev] BinaryReader does not reset decoder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32949">[ date ]</a>
              <a href="thread.html#32949">[ thread ]</a>
              <a href="subject.html#32949">[ subject ]</a>
              <a href="author.html#32949">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
