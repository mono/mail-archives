<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Assembly loader load several times the same dll
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Assembly%20loader%20load%20several%20times%20the%20same%20dll&In-Reply-To=MAILSERVEROjIL2jpWk00000511%40mail.apsystems.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033078.html">
   <LINK REL="Next"  HREF="033079.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Assembly loader load several times the same dll</H1>
    <B>APS</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Assembly%20loader%20load%20several%20times%20the%20same%20dll&In-Reply-To=MAILSERVEROjIL2jpWk00000511%40mail.apsystems.it"
       TITLE="[Mono-dev] Assembly loader load several times the same dll">dev.malst at apsystems.it
       </A><BR>
    <I>Tue Sep 22 10:02:50 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033078.html">[Mono-dev] Assembly loader load several times the same dll
</A></li>
        <LI>Next message: <A HREF="033079.html">[Mono-dev] rev. 142338 not compiling..**Error**: automake failed.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33092">[ date ]</a>
              <a href="thread.html#33092">[ thread ]</a>
              <a href="subject.html#33092">[ subject ]</a>
              <a href="author.html#33092">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I checked better the log file and I noticed that after have loaded 
and added all the bin assemblies to the domain it starts with web 
pages and every time it loads a new ascx/ascx file there's a log like that:

Mono-INFO: Assembly Loader probing location: 
'/tmp/apache-temp-aspnet-0/ddd13fb8/App_Web_6d545f95.dll'.
Mono-INFO: Image addref App_Web_6d545f95 0x2aaab828ebb0 -&gt; 
/tmp/apache-temp-aspnet-0/ddd13fb8/App_Web_6d545f95.dll 0x2aaab8229e00: 2

Mono-INFO: Assembly App_Web_6d545f95 0x2aaab828ebb0 added to domain 
8ce83063, ref_count=1

Mono-INFO: Assembly Loader loaded assembly from location: 
'/tmp/apache-temp-aspnet-0/ddd13fb8/App_Web_6d545f95.dll'.
Mono-INFO: Config attempting to parse: 
'/tmp/apache-temp-aspnet-0/ddd13fb8/App_Web_6d545f95.dll.config'.
Mono-INFO: Config attempting to parse: 
'/usr/local/etc/mono/assemblies/App_Web_6d545f95/App_Web_6d545f95.config'.
Mono-INFO: Config attempting to parse: 
'/var/www/.mono/assemblies/App_Web_6d545f95/App_Web_6d545f95.config'.
Mono-INFO: Assembly Ref addref App_Web_6d545f95 0x2aaab828ebb0 -&gt; 
WebSicDotNet 0x11dbdd00: 3

then it starts probing form System libraries and it apparently it found them

Mono-INFO: Assembly Loader probing location: 
'/usr/local/lib/mono/gac/System/2.0.0.0__b77a5c561934e089/System.dll'.
Mono-INFO: Assembly Loader probing location: 
'/usr/local/lib/mono/gac/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll'.
Mono-INFO: Assembly Loader probing location: 
'/usr/local/lib/mono/gac/System.Data/2.0.0.0__b77a5c561934e089/System.Data.dll'.
Mono-INFO: Assembly Loader probing location: 
'/usr/local/lib/mono/gac/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll'.
Mono-INFO: Assembly Loader probing location: 
'/usr/local/lib/mono/gac/System.Web/2.0.0.0__b03f5f7f11d50a3a/System.Web.dll'.
Mono-INFO: Assembly Loader probing location: 
'/usr/local/lib/mono/gac/System.Web.Services/2.0.0.0__b03f5f7f11d50a3a/System.Web.Services.dll'.
Mono-INFO: Assembly Loader probing location: 
'/usr/local/lib/mono/gac/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll'.

And then it starts looking for all the files in bin directory and for 
every file it makes something like

Mono-INFO: Assembly Loader probing location: 
'/var/www/hypersic/bin/APS.API.dll'.
Mono-INFO: Assembly Loader shadow-copied assembly to: 
'/tmp/apache-temp-aspnet-0/ddd13fb8/assembly/shadow/dcbea906/bc9b83ee_60252ae8_00000001/APS.API.dll'.
Mono-INFO: Assembly Loader probing location: 
'/var/www/hypersic/bin/APS.BaseClasses.dll'.
Mono-INFO: Assembly Loader shadow-copied assembly to: 
'/tmp/apache-temp-aspnet-0/ddd13fb8/assembly/shadow/97cc1381/f7e93969_60252ae8_00000001/APS.BaseClasses.dll'.
Mono-INFO: Assembly Loader probing location: 
'/var/www/hypersic/bin/APS.Chart.dll'.
Mono-INFO: Assembly Loader shadow-copied assembly to: 
'/tmp/apache-temp-aspnet-0/ddd13fb8/assembly/shadow/f7c1e34a/97e4c9a2_60252ae8_00000001/APS.Chart.dll'.

and so on, for the thousands of files placed inside the bin directory.
It seems to me that there's some problem cause all the files seems 
missing even if they are there. Could you help me? Maybe some 
permission problem?

At 18.04 21/09/2009, APS wrote:
&gt;<i>This it's clear to me but I've only one application and running it 
</I>&gt;<i>(with or without batch compilation) I can see in logs that an 
</I>&gt;<i>assembly is added to domain the first time it's found
</I>&gt;<i>
</I>&gt;<i>Mono-INFO: Assembly Loader probing location: 
</I>&gt;<i>'/var/www/hypersic/bin/templatelibrary.dll'.
</I>&gt;<i>Mono-INFO: Assembly Loader shadow-copied assembly to: 
</I>&gt;<i>'/tmp/apache-temp-aspnet-0/ddd13fb8/assembly/shadow/3c8e4077/5cab6a9f_60252ae8_00000001/templatelibrary.dll'.
</I>&gt;<i>Mono-INFO: Image addref templatelibrary 0x3367100 -&gt; 
</I>&gt;<i>/tmp/apache-temp-aspnet-0/ddd13fb8/assembly/shadow/3c8e4077/5cab6a9f_60252ae8_00000001/templatelibrary.dll 
</I>&gt;<i>0x3365ab0: 2
</I>&gt;<i>
</I>&gt;<i>Mono-INFO: Assembly templatelibrary 0x3367100 added to domain 
</I>&gt;<i>8ce83063, ref_count=1
</I>&gt;<i>
</I>&gt;<i>Mono-INFO: Assembly Loader loaded assembly from location: 
</I>&gt;<i>'/var/www/hypersic/bin/templatelibrary.dll'.
</I>&gt;<i>Mono-INFO: Config attempting to parse: 
</I>&gt;<i>'/tmp/apache-temp-aspnet-0/ddd13fb8/assembly/shadow/3c8e4077/5cab6a9f_60252ae8_00000001/templatelibrary.dll.config'.
</I>&gt;<i>Mono-INFO: Config attempting to parse: 
</I>&gt;<i>'/usr/local/etc/mono/assemblies/templatelibrary/templatelibrary.config'.
</I>&gt;<i>Mono-INFO: Config attempting to parse: 
</I>&gt;<i>'/var/www/.mono/assemblies/templatelibrary/templatelibrary.config'.
</I>&gt;<i>
</I>&gt;<i>but after that I have many log entries like tha and the same 
</I>&gt;<i>assembly appears more than one time.
</I>&gt;<i>
</I>&gt;<i>Mono-INFO: Assembly Loader probing location: 
</I>&gt;<i>'/var/www/hypersic/bin/templatelibrary.dll'.
</I>&gt;<i>Mono-INFO: Assembly Loader shadow-copied assembly to: 
</I>&gt;<i>'/tmp/apache-temp-aspnet-0/ddd13fb8/assembly/shadow/3c8e4077/5cab6a9f_60252ae8_00000001/templatelibrary.dll'.
</I>&gt;<i>
</I>&gt;<i>As I have slow-loading issues and most of the loading time is spent 
</I>&gt;<i>in this second type of log entries, I would like to know if it's a 
</I>&gt;<i>standard behaviour or it's a mistake due to some conifguration error.
</I>&gt;<i>Thanks again.
</I>&gt;<i>
</I>&gt;<i>At 14.31 21/09/2009, you wrote:
</I>&gt;&gt;<i>On Mon, 2009-09-21 at 14:06 +0200, APS wrote:
</I>&gt;&gt;<i> &gt; No hints?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Each assembly is loaded once per application domain and each asp.net
</I>&gt;&gt;<i>application runs in its own domain...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>-Gonzalo
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>--
</I>&gt;&gt;<i>Il messaggio e' stato analizzato alla ricerca di virus o
</I>&gt;&gt;<i>contenuti pericolosi da MailScanner, ed e'
</I>&gt;&gt;<i>risultato non infetto.
</I>&gt;<i>
</I>&gt;<i>--
</I>&gt;<i>Il messaggio e' stato analizzato alla ricerca di virus o
</I>&gt;<i>contenuti pericolosi da &lt;<A HREF="http://www.mailscanner.info/">http://www.mailscanner.info/</A>&gt;MailScanner, ed e'
</I>&gt;<i>risultato non infetto.
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mono-devel-list mailing list
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090922/6b378370/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090922/6b378370/attachment.html</A> 
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033078.html">[Mono-dev] Assembly loader load several times the same dll
</A></li>
	<LI>Next message: <A HREF="033079.html">[Mono-dev] rev. 142338 not compiling..**Error**: automake failed.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33092">[ date ]</a>
              <a href="thread.html#33092">[ thread ]</a>
              <a href="subject.html#33092">[ subject ]</a>
              <a href="author.html#33092">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
