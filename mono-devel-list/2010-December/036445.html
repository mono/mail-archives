<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Fwd: Problem with WCF and IEnumerable as return type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Fwd%3A%20Problem%20with%20WCF%20and%20IEnumerable%20as%20return%20type&In-Reply-To=AANLkTikWxayY_jZzTJ-Q_Rj0QrHvL7pw4qb8a3F1DPGH%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036443.html">
   <LINK REL="Next"  HREF="036451.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Fwd: Problem with WCF and IEnumerable as return type</H1>
    <B>Chakotey STME</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Fwd%3A%20Problem%20with%20WCF%20and%20IEnumerable%20as%20return%20type&In-Reply-To=AANLkTikWxayY_jZzTJ-Q_Rj0QrHvL7pw4qb8a3F1DPGH%40mail.gmail.com"
       TITLE="[Mono-dev] Fwd: Problem with WCF and IEnumerable as return type">chakoteystme at gmail.com
       </A><BR>
    <I>Tue Dec  7 02:14:50 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="036443.html">[Mono-dev] Generic type parameter member lookup bug in 2.8.1
</A></li>
        <LI>Next message: <A HREF="036451.html">[Mono-dev] Fwd: Problem with WCF and IEnumerable as return type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36445">[ date ]</a>
              <a href="thread.html#36445">[ thread ]</a>
              <a href="subject.html#36445">[ subject ]</a>
              <a href="author.html#36445">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This problem still exists.

Does anyone have an idea?


---------- Forwarded message ----------
From: Chakotey STME &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">chakoteystme at gmail.com</A>&gt;
Date: 2010/11/30
Subject: Problem with WCF and IEnumerable as return type
To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>


Hello,

I have a problem with WCF.

If I have this service contract:

&lt;ServiceContract()&gt; _
Public Interface IHelloService
&#160; &#160;&lt;OperationContract()&gt; _
&#160; &#160;Function Greet(ByVal name As String) As IEnumerable(Of Objekt)
End Interface

This Service:
Imports System.ServiceModel

Module Module1
&#160; &#160;Sub Main()
&#160; &#160; &#160; &#160;Dim host As ServiceHost = New ServiceHost(GetType(HelloService))
&#160; &#160; &#160; &#160;host.Open()
&#160; &#160;End Sub
End Module

The implementaion of HelloService of the Service:
Imports Contracts

Public Class HelloService
&#160; &#160;Implements IHelloService
&#160; &#160;Public Function Greet(ByVal name As String) As IEnumerable(Of
Objekt) Implements IHelloService.Greet
&#160; &#160; &#160; &#160;Dim myObjekt As Objekt = New Objekt
&#160; &#160; &#160; &#160;Dim myObjekt2 As Objekt = New Objekt

&#160; &#160; &#160; &#160;myObjekt.text = &quot;Hallo&quot;
&#160; &#160; &#160; &#160;myObjekt.number = 3 + name.Length

&#160; &#160; &#160; Dim list As IList(Of Objekt) = New List(Of Objekt)

&#160; &#160; &#160; &#160;list.Add(myObjekt)
&#160; &#160; &#160; &#160;list.Add(myObjekt2)

&#160; &#160; &#160; &#160;Return list

&#160; &#160;End Function

End Class


And this client:
Imports System.ServiceModel
Imports Contracts

Module Module1

&#160; &#160;Sub Main()
&#160; &#160; &#160; &#160;Dim binding = New BasicHttpBinding()
&#160; &#160; &#160; &#160;Dim address = New EndpointAddress(&quot;<A HREF="http://192.168.100.110:8080&quot;">http://192.168.100.110:8080&quot;</A>)
&#160; &#160; &#160; &#160;Dim client = New HelloClient(binding, address)
&#160; &#160; &#160; &#160;Dim myObjekt = client.Greet(&quot;name&quot;)

&#160; &#160; &#160; &#160;Console.ReadLine()
&#160; &#160;End Sub
End Module

The implementation of HelloService from the client:

Imports System.ServiceModel
Imports System.ServiceModel.Channels
Imports System.Runtime.Serialization
Imports Contracts

Public Class HelloClient
&#160; &#160;Inherits ClientBase(Of IHelloService)
&#160; &#160;Implements IHelloService
&#160; &#160;Public Sub New(ByVal binding As Binding, ByVal address As EndpointAddress)
&#160; &#160; &#160; &#160;MyBase.New(binding, address)
&#160; &#160;End Sub

&#160; &#160;Public Function Greet(ByVal name As String) As IEnumerable(Of
Objekt) Implements IHelloService.Greet
&#160; &#160; &#160; &#160;Return Channel.Greet(name)
&#160; &#160;End Function
End Class


I execute the service and execute the client.
I get this Exception:
Exception Non-empty prefix must be mapped to non-empty namespace URI.
&#160;at System.Xml.XmlTextWriter.WriteEndAttribute () [0x00000] in
&lt;filename unknown&gt;:0
&#160;at System.Xml.XmlSimpleDictionaryWriter.WriteEndAttribute ()
[0x00000] in &lt;filename unknown&gt;:0
&#160;at System.Xml.XmlWriter.WriteAttributeString (System.String prefix,
System.String localName, System.String ns, System.String value)
[0x00000] in &lt;filename unknown&gt;:0
&#160;at System.Xml.XmlDictionaryWriter.WriteXmlnsAttribute (System.String
prefix, System.String namespaceUri) [0x00000] in &lt;filename unknown&gt;:0
&#160;at System.Runtime.Serialization.DataContractSerializer.WriteStartObject
(System.Xml.XmlDictionaryWriter writer, System.Object graph) [0x00000]
in &lt;filename unknown&gt;:0
&#160;at System.Runtime.Serialization.XmlObjectSerializer.WriteObject
(System.Xml.XmlDictionaryWriter writer, System.Object graph) [0x00000]
in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Dispatcher.DataContractMessagesFormatter+DataContractBodyWriter.WriteMessagePart
(System.Xml.XmlDictionaryWriter writer,
System.ServiceModel.Description.MessageBodyDescription desc,
System.ServiceModel.Description.MessagePartDescription partDesc,
System.Object obj) [0x00000] in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Dispatcher.DataContractMessagesFormatter+DataContractBodyWriter.OnWriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename
unknown&gt;:0
&#160;at System.ServiceModel.Channels.BodyWriter.WriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename
unknown&gt;:0
&#160;at System.ServiceModel.Channels.SimpleMessage.OnWriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename
unknown&gt;:0
&#160;at System.ServiceModel.Channels.Message.WriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename
unknown&gt;:0
&#160;at System.ServiceModel.Channels.Message.WriteBody
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename
unknown&gt;:0
&#160;at System.ServiceModel.Channels.Message.OnWriteMessage
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename
unknown&gt;:0
&#160;at System.ServiceModel.Channels.Message.WriteMessage
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename
unknown&gt;:0
&#160;at System.ServiceModel.Channels.TextMessageEncoder.WriteMessage
(System.ServiceModel.Channels.Message message, System.IO.Stream
stream) [0x00000] in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Channels.HttpRequestContext.ProcessReply
(System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000]
in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Channels.HttpRequestContextBase.Reply
(System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000]
in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Dispatcher.MessageProcessingContext.Reply
(Boolean useTimeout) [0x00000] in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Dispatcher.OperationInvokerHandler.Reply
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc, Boolean
useTimeout) [0x00000] in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Dispatcher.OperationInvokerHandler.ProcessRequest
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc)
[0x00000] in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Dispatcher.BaseRequestProcessorHandler.ProcessRequestChain
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc)
[0x00000] in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Dispatcher.BaseRequestProcessorHandler.ProcessRequestChain
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc)
[0x00000] in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Dispatcher.BaseRequestProcessorHandler.ProcessRequestChain
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc)
[0x00000] in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Dispatcher.HandlersChain.ProcessRequestChain
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc)
[0x00000] in &lt;filename unknown&gt;:0
&#160;at System.ServiceModel.Dispatcher.BaseRequestProcessor.ProcessRequest
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc)
[0x00000] in &lt;filename unknown&gt;:0



If I change the return type in the contracts, the client and the
service, from IEnumerable(of objekt) to IList(Of objekt) it works!

Why can't I use IEnumerable as return type?

thanks

chakoteystme
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036443.html">[Mono-dev] Generic type parameter member lookup bug in 2.8.1
</A></li>
	<LI>Next message: <A HREF="036451.html">[Mono-dev] Fwd: Problem with WCF and IEnumerable as return type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36445">[ date ]</a>
              <a href="thread.html#36445">[ thread ]</a>
              <a href="subject.html#36445">[ subject ]</a>
              <a href="author.html#36445">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
