<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Internet code which is fine under .NET, but dies on mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Internet%20code%20which%20is%20fine%20under%20.NET%2C%20but%20dies%20on%20mono&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037124.html">
   <LINK REL="Next"  HREF="037119.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Internet code which is fine under .NET, but dies on mono</H1>
    <B>Paul Johnson</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Internet%20code%20which%20is%20fine%20under%20.NET%2C%20but%20dies%20on%20mono&In-Reply-To="
       TITLE="[Mono-dev] Internet code which is fine under .NET, but dies on mono">paul at all-the-johnsons.co.uk
       </A><BR>
    <I>Fri Mar 11 07:56:58 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="037124.html">[Mono-dev] 'monodis mscorlib.dll' fails.
</A></li>
        <LI>Next message: <A HREF="037119.html">[Mono-dev] Internet code which is fine under .NET,	but dies on mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37118">[ date ]</a>
              <a href="thread.html#37118">[ thread ]</a>
              <a href="subject.html#37118">[ subject ]</a>
              <a href="author.html#37118">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have a bit of a problem with some come which works and builds fine under
VS2010 (targetting .NET 2) but returns a problem under mono on my linux box
(using 2.10.1) - here is the code

&lt;--
        private void btnTranslate_Click(object sender, EventArgs e)
        {
            string result = string.Empty;
            string url = string.Format(&quot;
<A HREF="https://www.googleapis.com/language/translate/v2?key={0}&amp;q={1}&amp;source={2}&amp;target={3}">https://www.googleapis.com/language/translate/v2?key={0}&amp;q={1}&amp;source={2}&amp;target={3}</A>
&quot;,
                key, txtTranslate.Text, data.from, data.to);
            try
            {
                WebRequest req = HttpWebRequest.Create(url);
                if (data.useproxy == true)
                    {
                        WebProxy myproxy = new WebProxy(data.proxyval,
data.proxyPort);
                        myproxy.BypassProxyOnLocal = false;
                        req.Proxy = myproxy;
                    }
                req.Method = &quot;GET&quot;;

                using (WebResponse res = req.GetResponse())
                {
                    using (StreamReader sr = new
StreamReader(res.GetResponseStream(), Encoding.UTF8))
                    {
                        result = sr.ReadToEnd();
                    }
                }
            }
            catch (Exception er)
            {
                MessageBox.Show(er.Message, &quot;Network error&quot;,
MessageBoxButtons.OK);
                return;
            }
--&gt;

The code will fire up fine under mono, but fails to communicate with the
google service complaining that it was able decode the returned string or
the end of the string has been found,

Any ideas or do I need to put this into the mono BZ?

The binary can be found at <A HREF="http://www.all-the-johnsons.co.uk/translate.exe">http://www.all-the-johnsons.co.uk/translate.exe</A>

TTFN

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20110311/759aabd7/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20110311/759aabd7/attachment.html</A> 
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037124.html">[Mono-dev] 'monodis mscorlib.dll' fails.
</A></li>
	<LI>Next message: <A HREF="037119.html">[Mono-dev] Internet code which is fine under .NET,	but dies on mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37118">[ date ]</a>
              <a href="thread.html#37118">[ thread ]</a>
              <a href="subject.html#37118">[ subject ]</a>
              <a href="author.html#37118">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
