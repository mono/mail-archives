<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] System.Web: DataGrid and PagedDataSource- Paging is not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20System.Web%3A%20DataGrid%20and%20PagedDataSource-%20Paging%20is%20not%20working&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002728.html">
   <LINK REL="Next"  HREF="002729.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] System.Web: DataGrid and PagedDataSource- Paging is not working</H1>
    <B>Mohammad DAMT</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20System.Web%3A%20DataGrid%20and%20PagedDataSource-%20Paging%20is%20not%20working&In-Reply-To="
       TITLE="[Mono-devel-list] System.Web: DataGrid and PagedDataSource- Paging is not working">md at mt.web.id
       </A><BR>
    <I>Tue Oct 28 22:02:14 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002728.html">[Mono-devel-list] RE: patch for: Non ASCIIcharactersinfilenames/ command line parameters
</A></li>
        <LI>Next message: <A HREF="002729.html">[Mono-devel-list] Remoting and XSPApplicationHost
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2731">[ date ]</a>
              <a href="thread.html#2731">[ thread ]</a>
              <a href="subject.html#2731">[ subject ]</a>
              <a href="author.html#2731">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=50285">http://bugzilla.ximian.com/show_bug.cgi?id=50285</A>

Paging in DataGrid is not working in these areas:
- LastPage value is wrong
- Changing page with PagerStyle.NumericPages by clicking the page number
will not change the DataGrid.CurrentPageIndex

Steps to reproduce the problem:
1. run the sample file

Actual Results:
1. Click the &quot;&gt;&quot; link to advance the page until the end of the page, it
will an exception &quot;DataGrid_Invalid_Current_PageIndex: MyDataGrid&quot;
2. if we click &quot;Show numeric page navigation buttons&quot; the PagerStyle will
change to NumericPages, but if we click the link, it will not work

Expected Results:
1. Only subset of dataset displayed honoring PageSize property
2. Page link should work and will change CurrentPageIndex

How often does this happen? 
always

Additional Information:
mcs/class from cvs 20031029 09:44GMT+07

--
Mohammad DAMT &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mdamt at bisnisweb.com</A>&gt;
<A HREF="http://www.bisnisweb.com">http://www.bisnisweb.com</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: paged_datagrid.diff
Type: text/x-patch
Size: 762 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20031029/2d3a409c/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20031029/2d3a409c/attachment.bin</A> 
-------------- next part --------------
&lt;%@ Page Language=&quot;C#&quot; AutoEventWireup=&quot;True&quot; %&gt;
&lt;%@ Import Namespace=&quot;System.Data&quot; %&gt;
 
 &lt;html&gt;
 &lt;script language=&quot;C#&quot; runat=&quot;server&quot;&gt;
 
    ICollection CreateDataSource() 
    {
       DataTable dt = new DataTable();
       DataRow dr;
 
       dt.Columns.Add(new DataColumn(&quot;IntegerValue&quot;, typeof(Int32)));
       dt.Columns.Add(new DataColumn(&quot;StringValue&quot;, typeof(string)));
       dt.Columns.Add(new DataColumn(&quot;DateTimeValue&quot;, typeof(string)));
       dt.Columns.Add(new DataColumn(&quot;BoolValue&quot;, typeof(bool)));
 
       for (int i = 0; i &lt; 100; i++) 
       {
          dr = dt.NewRow();
 
          dr[0] = i;
          dr[1] = &quot;Item &quot; + i.ToString();
          dr[2] = DateTime.Now.ToShortDateString();
          dr[3] = (i % 2 != 0) ? true : false;
 
          dt.Rows.Add(dr);
       }
 
       DataView dv = new DataView(dt);
       return dv;
    }
 
    void Page_Load(Object sender, EventArgs e) 
    {
       if (chk1.Checked)
          MyDataGrid.PagerStyle.Mode = PagerMode.NumericPages;
       else 
          MyDataGrid.PagerStyle.Mode = PagerMode.NextPrev;
 
       BindGrid();
    }
 
    void MyDataGrid_Page(Object sender, DataGridPageChangedEventArgs e) 
    {
       MyDataGrid.CurrentPageIndex = e.NewPageIndex;
       BindGrid();
    }
 
    void BindGrid() 
    {
       MyDataGrid.DataSource = CreateDataSource();
       MyDataGrid.DataBind();
       ShowStats();
    }
 
    void ShowStats() 
    {
       lblEnabled.Text = &quot;AllowPaging is &quot; + MyDataGrid.AllowPaging;
       lblCurrentIndex.Text = &quot;CurrentPageIndex is &quot; + MyDataGrid.CurrentPageIndex;
       lblPageCount.Text = &quot;PageCount is &quot; + MyDataGrid.PageCount;
       lblPageSize.Text = &quot;PageSize is &quot; + MyDataGrid.PageSize;
    }
 
 
 &lt;/script&gt;
 
 &lt;body&gt;
 
    &lt;h3&gt;DataGrid Paging Example&lt;/h3&gt;
 
    &lt;form runat=server&gt;
 
       &lt;asp:DataGrid id=&quot;MyDataGrid&quot; runat=&quot;server&quot;        
			AllowPaging=&quot;True&quot;
            PageSize=&quot;10&quot;
            OnPageIndexChanged=&quot;MyDataGrid_Page&quot;
            BorderColor=&quot;black&quot;
            BorderWidth=&quot;1&quot;
            GridLines=&quot;Both&quot;
            CellPadding=&quot;3&quot;
            CellSpacing=&quot;0&quot;
            Font-Name=&quot;Verdana&quot;
            Font-Size=&quot;8pt&quot;&gt;

            &lt;PagerStyle Mode=&quot;NumericPages&quot;
                        HorizontalAlign=&quot;Right&quot;&gt;
            &lt;/PagerStyle&gt;


            &lt;HeaderStyle BackColor=&quot;#aaaadd&quot;&gt;
            &lt;/HeaderStyle&gt;

            &lt;AlternatingItemStyle BackColor=&quot;#eeeeee&quot;&gt;
            &lt;/AlternatingItemStyle&gt;

       &lt;/asp:DataGrid&gt;
 
       &lt;p&gt;
 
       &lt;asp:Checkbox id=&quot;chk1&quot; runat=&quot;server&quot;
            Text=&quot;Show numeric page navigation buttons&quot;
            Font-Name=&quot;Verdana&quot;
            Font-Size=&quot;8pt&quot;
            AutoPostBack=&quot;true&quot;/&gt;
 
       &lt;p&gt;
 
       &lt;table bgcolor=&quot;#eeeeee&quot; cellpadding=&quot;6&quot;&gt;
          &lt;tr&gt;
             &lt;td nowrap&gt;
                
 
                   &lt;asp:Label id=&quot;lblEnabled&quot; 
                        runat=&quot;server&quot;/&gt;&lt;br&gt;
                   &lt;asp:Label id=&quot;lblCurrentIndex&quot; 
                        runat=&quot;server&quot;/&gt;&lt;br&gt;
                   &lt;asp:Label id=&quot;lblPageCount&quot; 
                        runat=&quot;server&quot;/&gt;&lt;br&gt;
                   &lt;asp:Label id=&quot;lblPageSize&quot; 
                        runat=&quot;server&quot;/&gt;&lt;br&gt;
 
                
             &lt;/td&gt;
          &lt;/tr&gt;
       &lt;/table&gt;
 
    &lt;/form&gt;
 
 &lt;/body&gt;
 &lt;/html&gt;
   
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002728.html">[Mono-devel-list] RE: patch for: Non ASCIIcharactersinfilenames/ command line parameters
</A></li>
	<LI>Next message: <A HREF="002729.html">[Mono-devel-list] Remoting and XSPApplicationHost
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2731">[ date ]</a>
              <a href="thread.html#2731">[ thread ]</a>
              <a href="subject.html#2731">[ subject ]</a>
              <a href="author.html#2731">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
