<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: Potential GAC implementation ideas.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20Potential%20GAC%20implementation%20ideas.&In-Reply-To=003e01c39a32%24ab277d00%248500a8c0%40proton">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002700.html">
   <LINK REL="Next"  HREF="002711.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: Potential GAC implementation ideas.</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20Potential%20GAC%20implementation%20ideas.&In-Reply-To=003e01c39a32%24ab277d00%248500a8c0%40proton"
       TITLE="[Mono-devel-list] Re: Potential GAC implementation ideas.">jonpryor at vt.edu
       </A><BR>
    <I>Fri Oct 24 19:35:34 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002700.html">[Mono-devel-list] Re: Potential GAC implementation ideas.
</A></li>
        <LI>Next message: <A HREF="002711.html">[Mono-devel-list] Re: Potential GAC implementation ideas.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2709">[ date ]</a>
              <a href="thread.html#2709">[ thread ]</a>
              <a href="subject.html#2709">[ subject ]</a>
              <a href="author.html#2709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The Linux solution to your scenario would be to place MySuperLib.dll
into it's own RPM, and NOT duplicate it across your other 3 packages. 
Each of your 3 packages would have the MySuperLib.dll RPM as a
dependency.

The benefit to this is that MySuperLib.dll won't be removed until all 3
packages are also removed.

The downside is that, if MySuperLib.dll is included in anyone else's
packages, and they're not using the same MySuperLib.dll RPM package as a
dependency, things break quickly.

They break quickly because RPM must know what files belong to what
package.  You cannot have the same file be present in &gt; 1 package. 
Thus, if you either (a) don't use a MySuperLib.dll RPM package for your
own packages, or (b) someone bundles and attempts to install
MySuperLib.dll from their own RPM, you'll get file conflicts, and RPM
will refuse to install the new package.

This is, shall we say, undesirable, and provides further evidence that
directly placing the shared assembly into the GAC at RPM install time
(i.e. NOT using gacutil.exe) is not a good solution.

Along similar lines (thinking about the removal of packages),
gacutil.exe should probably place a copy of the assembly into the GAC,
and not use sym-links.  This way, if a package containing a
shared-assembly is removed, you won't have broken sym-links to worry
about, and the GAC will remain consistent.

 - Jon

On Fri, 2003-10-24 at 09:28, Todd Berman wrote:
&gt;<i> Just as a small RPM aside, out of curiosity, lets say that I have a shared
</I>&gt;<i> assembly called 'MySuperLib.dll' that 3 packages I create use, and to make
</I>&gt;<i> sure there are no unsatisfied dependencies, they all packaged it.
</I>&gt;<i> 
</I>&gt;<i> I go ahead and install all 3 directly into the gac, now, when I later remove
</I>&gt;<i> one, is the lib I installed directly into the gac because it is part of the
</I>&gt;<i> package list for that rpm? If so, packaging libraries this way is horribly
</I>&gt;<i> broken. If not, then it seems like it might work.
</I>&gt;<i> 
</I>&gt;<i> And to address this question about the 'need' for the gacutil.exe, well, to
</I>&gt;<i> me, we are attempting to create a workalike to .net. Now, .net has a
</I>&gt;<i> gacutil.exe which they use to install assemblies into the gac, so that is
</I>&gt;<i> part of the workalike.
</I>&gt;<i> 
</I>&gt;<i> In fact, .net has 2 main ways of installing something into the gac:
</I>&gt;<i> 
</I>&gt;<i> 1) gacutil.exe (not recommended, requires the .net framework sdk)
</I>&gt;<i> 2) Windows Installer (recommended, no requirement on the .net framework, and
</I>&gt;<i> if somehow the assembly gets removed, and an app needs it, if you have the
</I>&gt;<i> .msi around it will get inserted automagically.)
</I>&gt;<i> 
</I>&gt;<i> Now, until inserting an assembly into the GAC becomes a first class member
</I>&gt;<i> of the RPM/DEB/etc world, the gacutil.exe is really the only 'proper' way of
</I>&gt;<i> doing it.
</I>&gt;<i> 
</I>&gt;<i> As I have said before, please understand that most libraries don't need to
</I>&gt;<i> be in the GAC, and if, as a packager you want to use it out of conveniences
</I>&gt;<i> sake, I would recommend actually creating a shell script to run the .exe
</I>&gt;<i> (akin to the mcs script) that sets MONO_PATH to where you installed your
</I>&gt;<i> packages private libraries.
</I>&gt;<i> 
</I>&gt;<i> --Todd
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002700.html">[Mono-devel-list] Re: Potential GAC implementation ideas.
</A></li>
	<LI>Next message: <A HREF="002711.html">[Mono-devel-list] Re: Potential GAC implementation ideas.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2709">[ date ]</a>
              <a href="thread.html#2709">[ thread ]</a>
              <a href="subject.html#2709">[ subject ]</a>
              <a href="author.html#2709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
