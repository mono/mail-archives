<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Garbage Collection problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Garbage%20Collection%20problem&In-Reply-To=1064971824.14820.27.camel%40melchior.magi">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002265.html">
   <LINK REL="Next"  HREF="002259.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Garbage Collection problem</H1>
    <B>Michael Poole</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Garbage%20Collection%20problem&In-Reply-To=1064971824.14820.27.camel%40melchior.magi"
       TITLE="[Mono-devel-list] Garbage Collection problem">mdpoole at troilus.org
       </A><BR>
    <I>Wed Oct  1 21:53:55 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002265.html">[Mono-devel-list] Some thoughts on the windows build
</A></li>
        <LI>Next message: <A HREF="002259.html">[Mono-devel-list] SciMark Performance with Compilers and Runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2258">[ date ]</a>
              <a href="thread.html#2258">[ thread ]</a>
              <a href="subject.html#2258">[ subject ]</a>
              <a href="author.html#2258">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jonpryor at vt.edu</A>&gt; writes:

&gt;<i> This is just a guess, but I don't think this is easily solvable.
</I>&gt;<i>
</I>&gt;<i> Unix platforms use sbrk(2) to allocate additional memory from the
</I>&gt;<i> Operating System.  I don't know of any mechanism to *release* the
</I>&gt;<i> allocated memory back to the OS.
</I>&gt;<i>
</I>&gt;<i> Once memory is allocated for a process, there is no way (that I know of)
</I>&gt;<i> to release it.
</I>&gt;<i>
</I>&gt;<i> Thus, even after a garbage collection, the GC heap may be fully
</I>&gt;<i> collected, even empty (i.e. containing no user-allocated objects), but
</I>&gt;<i> without a means for the OS to reclaim space, the actual memory used
</I>&gt;<i> *cannot* decrease.
</I>&gt;<i>
</I>&gt;<i> Please correct me if I'm wrong.
</I>
On Linux, rather than use sbrk(), you can anonymously mmap pages from
/dev/zero to allocate pages at arbitrary locations.  When you are done
with them, you can unmap them and the pages go away.  It becomes
inefficient if you operate at places other than the end of your
allocate space, since the kernel needs to create a new VM region.

glibc 2.x on Linux does mmap /dev/zero for allocations; I do not know
if it ever releases that memory.  Some apps (thankfully including
XEmacs) take steps to make sure unused memory is given back to the
kernel.

I imagine that other recent Unix-like OSes have similar mechanisms,
but I have no first-hand knowledge of them.

Michael Poole

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002265.html">[Mono-devel-list] Some thoughts on the windows build
</A></li>
	<LI>Next message: <A HREF="002259.html">[Mono-devel-list] SciMark Performance with Compilers and Runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2258">[ date ]</a>
              <a href="thread.html#2258">[ thread ]</a>
              <a href="subject.html#2258">[ subject ]</a>
              <a href="author.html#2258">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
