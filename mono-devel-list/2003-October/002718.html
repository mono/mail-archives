<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Install locations on unix was :  [Mono-devel-list] Re:	Potential GAC implementation ideas.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Install%20locations%20on%20unix%20was%20%3A%20%20%5BMono-devel-list%5D%20Re%3A%0A%09Potential%20GAC%20implementation%20ideas.&In-Reply-To=3F9C96B9.8040905%40activestate.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002716.html">
   <LINK REL="Next"  HREF="002720.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Install locations on unix was :  [Mono-devel-list] Re:	Potential GAC implementation ideas.</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Install%20locations%20on%20unix%20was%20%3A%20%20%5BMono-devel-list%5D%20Re%3A%0A%09Potential%20GAC%20implementation%20ideas.&In-Reply-To=3F9C96B9.8040905%40activestate.com"
       TITLE="Install locations on unix was :  [Mono-devel-list] Re:	Potential GAC implementation ideas.">jonpryor at vt.edu
       </A><BR>
    <I>Mon Oct 27 08:31:23 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002716.html">Install locations on unix was :  [Mono-devel-list] Re: Potential GAC implementation ideas.
</A></li>
        <LI>Next message: <A HREF="002720.html">[Mono-devel-list] Re: Install locations on unix was :  Re:   Potential GAC implementation ideas.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2718">[ date ]</a>
              <a href="thread.html#2718">[ thread ]</a>
              <a href="subject.html#2718">[ subject ]</a>
              <a href="author.html#2718">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The obvious solution is to do both! :-)

Which is sort of the only sane approach, as well.

For .NET compatibility, the app and its private assemblies must be in
the same directory (assuming that you don't create your own AppDomain,
change it's setup, etc.), or in a /bin sub-directory.

So, by default, you'd have a directory with:

	myapp.exe
	mylib1.dll
	mylib2.dll
	...

So, what's the sanest way to place this on Linux, while maintaining .NET
compatibility for assembly loading?  Place the app in
/usr/share/apps/&lt;appname/&gt;:

	/usr/share/apps/myapp/myapp.exe
	/usr/share/apps/myapp/mylib1.dll
	/usr/share/apps/myapp/mylib2.dll
	/usr/share/apps/myapp/...

Of course, you want an easy way to start your program, so create a file,
/usr/bin/myapp, with contents similar to:

	#!/bin/sh
	mono /usr/share/apps/myapp/myapp.exe

Or, use a symlink (assuming that binfmt_misc is installed).

You're done.  Most of this can be accomplished with a ZIP file, which
just contains myapp.exe &amp; its libraries.  Installation consists of
unzipping the ZIP into the appropriate directory (wherever you want),
and creating the script.

Creating an RPM that does that should be fairly trivial.

 - Jon

	


On Sun, 2003-10-26 at 22:53, Ian MacLean wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Assume I'm application developer. I have an assembly that is quite private
</I>&gt;<i> &gt;for me, i.e. I see no particular reason anybody else would use it. So I
</I>&gt;<i> &gt;place it in /usr/share/apps/foobar/mydll.dll, or something like this. How
</I>&gt;<i> &gt;do I tell where this DLL resides to the runtime? My app wouldn't reside
</I>&gt;<i> &gt;in /usr/share/apps/foobar/foobar.exe, since in UNIX world it should
</I>&gt;<i> &gt;go to /usr/bin/foobar.exe. 
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> Does this hold for .net apps ? Should they really install to 
</I>&gt;<i> /usr/bin/foobar.exe ? If you deploy a java app as a runnable jar its not 
</I>&gt;<i> usually added to /usr/bin so why should a .net exe assembly be any 
</I>&gt;<i> different ? A .net exe assembly has more in common with a runnable jar 
</I>&gt;<i> than a traditional binary - the fact that it comes packaged in a windows 
</I>&gt;<i> PE file is purely a convenience for running on a windows platform.
</I>&gt;<i> I think the java approach is a good model here. Multi platform java apps 
</I>&gt;<i> usually have the same directory structure across platforms ( the root 
</I>&gt;<i> will be different obviously ) and then they provide some sort of native 
</I>&gt;<i> stub for launching on each platform - a shell script for *nix and a 
</I>&gt;<i> small compiled exe launcher for windows. Given that the bulk of ms .net 
</I>&gt;<i> apps will be designed with the assumption that library assemblies ( dlls 
</I>&gt;<i> ) will reside in the same directory or a subdirectory ( or gac ) does it 
</I>&gt;<i> make sense to make this the reccomended install policy for mono apps as 
</I>&gt;<i> well rather than forcing a /usr/bin install ?
</I>&gt;<i> The ms.net assembly probing mechanism also relys on this same directory 
</I>&gt;<i> assumption looking first in the GAC, then the containing dir of the 
</I>&gt;<i> calling exe then subdirs and so forth. I'm not sure if this is going to 
</I>&gt;<i> be emulated on mono or not. However having different assembly resolution 
</I>&gt;<i> algotithms across platforms could lead to some interesting bugs going 
</I>&gt;<i> forward.
</I>&gt;<i> 
</I>&gt;<i> Ian
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002716.html">Install locations on unix was :  [Mono-devel-list] Re: Potential GAC implementation ideas.
</A></li>
	<LI>Next message: <A HREF="002720.html">[Mono-devel-list] Re: Install locations on unix was :  Re:   Potential GAC implementation ideas.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2718">[ date ]</a>
              <a href="thread.html#2718">[ thread ]</a>
              <a href="subject.html#2718">[ subject ]</a>
              <a href="author.html#2718">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
