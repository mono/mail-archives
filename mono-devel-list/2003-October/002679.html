<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: Potential GAC implementation ideas.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20Potential%20GAC%20implementation%20ideas.&In-Reply-To=20031023230139.GA30598%40roke.freak">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002677.html">
   <LINK REL="Next"  HREF="002682.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: Potential GAC implementation ideas.</H1>
    <B>Todd Berman</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20Potential%20GAC%20implementation%20ideas.&In-Reply-To=20031023230139.GA30598%40roke.freak"
       TITLE="[Mono-devel-list] Re: Potential GAC implementation ideas.">tberman at gentoo.org
       </A><BR>
    <I>Thu Oct 23 19:17:49 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002677.html">[Mono-devel-list] Re: Potential GAC implementation ideas.
</A></li>
        <LI>Next message: <A HREF="002682.html">[Mono-devel-list] Re: Potential GAC implementation ideas.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2679">[ date ]</a>
              <a href="thread.html#2679">[ thread ]</a>
              <a href="subject.html#2679">[ subject ]</a>
              <a href="author.html#2679">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On Thu, Oct 23, 2003 at 06:33:32PM -0400, Todd Berman wrote:
</I>&gt;<i> &gt; Now, the more recent and long part of this thread is about how a
</I>&gt;<i> packager
</I>&gt;<i> &gt; can get his assembly to the gac.
</I>&gt;<i> 
</I>&gt;<i> For package managers:
</I>&gt;<i> 
</I>&gt;<i> a) gacutil should provide mode in which it will install just DLLs (not
</I>&gt;<i>    run ngen), and won't install it in / but in specified directory. This
</I>&gt;<i>    is best set with environment variable, GACUTIL_DESTDIR or something
</I>&gt;<i>    like this.
</I>
Gacutil will not ngen assemblies ever. A tool called ngen.exe or similar
will do this.
 
&gt;<i> b) and second mode in which it will traverse it's directories and look
</I>&gt;<i>    for assemblies that are not ngened and ngen them
</I>
Gacutil will not ever do this, ngen does this

&gt;<i> c) third mode in which it will look for ngened assemblies that have no
</I>&gt;<i>    corresponding DLL anymore.
</I>
Again, different tool.

&gt;<i> ngened images are stored somewhere in /var/lib/monogac and rpm doesn't
</I>&gt;<i> touch them.
</I>&gt;<i> 
</I>&gt;<i> This way rpm spec could look like this (I assume very similar setting
</I>&gt;<i> for debs):
</I>&gt;<i> 
</I>&gt;<i> %install
</I>&gt;<i> # project Makefile has usual &quot;gacutil /i foo.dll&quot; call, but
</I>&gt;<i> $GACUTIL_DESTDIR
</I>&gt;<i> # tells it not to run ngen and to use
</I>&gt;<i> # $GACUTIL_DESTDIR/usr/share/monogac/$version/$name/whatever and not
</I>&gt;<i> # /usr/share/monogac/$version/$name/whatever.
</I>&gt;<i> 
</I>&gt;<i> GACUTIL_DESTDIR=$RPM_BUILD_ROOT make install
</I>&gt;<i> 
</I>&gt;<i> %post
</I>&gt;<i> gacutil --ngen
</I>&gt;<i> 
</I>&gt;<i> %postun
</I>&gt;<i> gacutil --clean-ngen
</I>&gt;<i> 
</I>&gt;<i> %files
</I>&gt;<i> /usr/share/monogac/*
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Different setting could be that pre-ngened binaries come with RPMS, this
</I>&gt;<i> would be harder to support I suppouse.
</I>
RPMs should never ship with ngen'd binaries as they are OS, arch, and
runtime specific, that's just a asking for disaster :P


So, basically what you are saying, is you want whatever code that goes to
implement the GAC respect the fakeroot that you use to build the RPM? If so
I wouldn't worry to much, as something like that will surely exist for
making RPMs of mono itself.

Now, I still wouldn't endorse the use of it, it could have potential issues
down the road if the GAC format changes.

As well, you need to evaluate what the GAC is for, its not a place to store
ALL your assemblies, just a place to store versioned shared assemblies.

--Todd


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002677.html">[Mono-devel-list] Re: Potential GAC implementation ideas.
</A></li>
	<LI>Next message: <A HREF="002682.html">[Mono-devel-list] Re: Potential GAC implementation ideas.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2679">[ date ]</a>
              <a href="thread.html#2679">[ thread ]</a>
              <a href="subject.html#2679">[ subject ]</a>
              <a href="author.html#2679">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
