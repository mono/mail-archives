<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: AppDomain unloading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20AppDomain%20unloading&In-Reply-To=freemail.20030920211154.46877%40fm4.freemail.hu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002592.html">
   <LINK REL="Next"  HREF="002594.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: AppDomain unloading</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20AppDomain%20unloading&In-Reply-To=freemail.20030920211154.46877%40fm4.freemail.hu"
       TITLE="[Mono-devel-list] Re: AppDomain unloading">lupus at ximian.com
       </A><BR>
    <I>Tue Oct 21 06:00:35 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002592.html">[Mono-devel-list] Re: AppDomain unloading
</A></li>
        <LI>Next message: <A HREF="002594.html">[Mono-devel-list] [Patch] Minor corrections in System.Drawing.Printing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2599">[ date ]</a>
              <a href="thread.html#2599">[ thread ]</a>
              <a href="subject.html#2599">[ subject ]</a>
              <a href="author.html#2599">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/20/03 Varga Zoltan wrote:
&gt;<i> Paolo Molaro &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>&gt; &#237;rta:
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; We need to force a GC and finalization run before
</I>&gt;<i> unloading. At that
</I>&gt;<i> &gt; point, all the objects that belong to the domain and need
</I>&gt;<i> finalization
</I>&gt;<i> &gt; are force-finalized, even if they are still reachable. We
</I>&gt;<i> need a sort of
</I>&gt;<i> &gt; callback in libgc to get the list of objects. We also
</I>&gt;<i> won't allow the
</I>&gt;<i> &gt; objects to be marked for finalization again.
</I>&gt;<i> 
</I>&gt;<i>  This could work, but it creates problems, since objects
</I>&gt;<i> will be finalized
</I>&gt;<i> in a random order, meaning an object will be finalized
</I>&gt;<i> before the
</I>&gt;<i> objects whose finalization depends on this object being alive.
</I>
Yes, there is no guarantee on the order of finalization in this case,
not even the MS runtime guarantees it (IIRC one of the MS bloggers wrote
that they added some hacks so that Console.WriteLine would work, but
that's it).

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002592.html">[Mono-devel-list] Re: AppDomain unloading
</A></li>
	<LI>Next message: <A HREF="002594.html">[Mono-devel-list] [Patch] Minor corrections in System.Drawing.Printing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2599">[ date ]</a>
              <a href="thread.html#2599">[ thread ]</a>
              <a href="subject.html#2599">[ subject ]</a>
              <a href="author.html#2599">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
