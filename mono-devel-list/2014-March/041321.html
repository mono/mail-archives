<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Register allocation and overlapping registers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Register%20allocation%20and%20overlapping%20registers&In-Reply-To=%3C1395764612140-4662363.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041322.html">
   <LINK REL="Next"  HREF="041323.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Register allocation and overlapping registers</H1>
    <B>SilentBob</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Register%20allocation%20and%20overlapping%20registers&In-Reply-To=%3C1395764612140-4662363.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] Register allocation and overlapping registers">cinnamondonkey at gmail.com
       </A><BR>
    <I>Tue Mar 25 16:23:32 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="041322.html">[Mono-dev] crash with nunit
</A></li>
        <LI>Next message: <A HREF="041323.html">[Mono-dev] Register allocation and overlapping registers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41321">[ date ]</a>
              <a href="thread.html#41321">[ thread ]</a>
              <a href="subject.html#41321">[ subject ]</a>
              <a href="author.html#41321">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, 

I'm hoping someone can provide some insight into how the cross-compiler
handles allocating registers when the registers overlap. 

I'm looking at a case on ARM where the following code: 

    double d = 7.2199997900000001;
    float f = (f)d; 

Results in: 

    vcvt.f32.f64 s4, d2

Because the 'd' registers are made up of pairs of 's' registers (in this
case d2 overlaps with s4 and s5) there is the potential for collision as in
this case. The end result is that d2 changes as s4 is updated. It would be
fine if it was not for d2 then being used immediately by the next
instruction. 

mono_local_regalloc () in mini-codegen.c seems to be translating
'float_conv_to_r4 R25 &lt;- R24' and ending up with dreg = 4 and sreg1 = 4 this
eventually gets emitted as above. 

Thank you in advance for all help. 

Regards, 
Shaun





--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Register-allocation-and-overlapping-registers-tp4662363.html">http://mono.1490590.n4.nabble.com/Register-allocation-and-overlapping-registers-tp4662363.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041322.html">[Mono-dev] crash with nunit
</A></li>
	<LI>Next message: <A HREF="041323.html">[Mono-dev] Register allocation and overlapping registers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41321">[ date ]</a>
              <a href="thread.html#41321">[ thread ]</a>
              <a href="subject.html#41321">[ subject ]</a>
              <a href="author.html#41321">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
