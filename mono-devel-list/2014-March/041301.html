<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Inconsistent value in System.Diagnostics.DefaultTraceListener.AssertUiEnabled
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Inconsistent%20value%20in%0A%20System.Diagnostics.DefaultTraceListener.AssertUiEnabled&In-Reply-To=%3CDF7BBEC9-2E12-490C-8F85-125BD827E8E7%40vt.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041269.html">
   <LINK REL="Next"  HREF="041251.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Inconsistent value in System.Diagnostics.DefaultTraceListener.AssertUiEnabled</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Inconsistent%20value%20in%0A%20System.Diagnostics.DefaultTraceListener.AssertUiEnabled&In-Reply-To=%3CDF7BBEC9-2E12-490C-8F85-125BD827E8E7%40vt.edu%3E"
       TITLE="[Mono-dev] Inconsistent value in System.Diagnostics.DefaultTraceListener.AssertUiEnabled">jonpryor at vt.edu
       </A><BR>
    <I>Thu Mar 20 20:15:39 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="041269.html">[Mono-dev] Inconsistent value in System.Diagnostics.DefaultTraceListener.AssertUiEnabled
</A></li>
        <LI>Next message: <A HREF="041251.html">[Mono-dev] Performance Problems on Mono with F# (maybe C#) Asyncs /	Tasks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41301">[ date ]</a>
              <a href="thread.html#41301">[ thread ]</a>
              <a href="subject.html#41301">[ subject ]</a>
              <a href="author.html#41301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mar 14, 2014, at 8:42 AM, MarLOne &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">InfoSeeker002 at gmail.com</A>&gt; wrote:
&gt;<i> The function System.Diagnostics.Debug.Assert(bool, string) is not at fault as I have disassembled the Mono code. The fault lies in the property value of *System.Diagnostics.DefaultTraceListener.AssertUiEnabled* which is default to *false* in *Mono* while in *CLR's runtime code* it is default to *true*.
</I>
This behavior is unlikely to change until:

1. We determine a way to reliably (portably!) determine if there is an &quot;interactive&quot; user so that the GUI is not shown in Server context. .NET has the Environment.UserInteractive property for this purpose:

	<A HREF="http://msdn.microsoft.com/en-us/library/system.environment.userinteractive(v=vs.110">http://msdn.microsoft.com/en-us/library/system.environment.userinteractive(v=vs.110</A>).aspx

Unfortunately, it isn't implemented in Mono (it just returns `false`), never has been implemented, and I have no idea _how_ to implement it off Windows:

	<A HREF="https://github.com/mono/mono/blob/master/mcs/class/corlib/System/Environment.cs#L297">https://github.com/mono/mono/blob/master/mcs/class/corlib/System/Environment.cs#L297</A>

Until this is fixed, DefaultTraceListener.AssertUiEnabled CANNOT be True. (Not unless you want some random headless Server to be trying to connect to the GUI, halting all operations...)

2. It relies on loading System.Windows.Forms.dll via Reflection at runtime. What should happen when that assembly isn't available, as will be the case in Xamarin.Android, Xamarin.iOS, Xamarin.Mac, and various embedded platforms that include Mono's BCL (MonoGame, Unity3D, etc.)?

What _will_ happen is the UI won't be displayed and (in the MOBILE profile) the error message will be logged to stdout.

YOU know in what environments your app will run; the core libraries do not. Therefore, YOU can alter default behaviors as you see fit, e.g. by explicitly setting DefaultTraceeListener.AssertUiEnabled=true (either in code or in a .exe.config file), or by adding a new TraceListener which aborts the process on failure.

 - Jon

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041269.html">[Mono-dev] Inconsistent value in System.Diagnostics.DefaultTraceListener.AssertUiEnabled
</A></li>
	<LI>Next message: <A HREF="041251.html">[Mono-dev] Performance Problems on Mono with F# (maybe C#) Asyncs /	Tasks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41301">[ date ]</a>
              <a href="thread.html#41301">[ thread ]</a>
              <a href="subject.html#41301">[ subject ]</a>
              <a href="author.html#41301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
