<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Question about issue building basic.exe and mscorlib paths
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Question%20about%20issue%20building%20basic.exe%20and%20mscorlib%0A%20paths&In-Reply-To=%3C5316F468.8010607%40dynamicdevices.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041223.html">
   <LINK REL="Next"  HREF="041224.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Question about issue building basic.exe and mscorlib paths</H1>
    <B>Alex J Lennon</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Question%20about%20issue%20building%20basic.exe%20and%20mscorlib%0A%20paths&In-Reply-To=%3C5316F468.8010607%40dynamicdevices.co.uk%3E"
       TITLE="[Mono-dev] Question about issue building basic.exe and mscorlib paths">ajlennon at dynamicdevices.co.uk
       </A><BR>
    <I>Wed Mar  5 09:54:48 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="041223.html">[Mono-dev] Question about issue building basic.exe and mscorlib	paths
</A></li>
        <LI>Next message: <A HREF="041224.html">[Mono-dev] Microsoft search for developers to create cross-platform opensource gaming-framework
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41236">[ date ]</a>
              <a href="thread.html#41236">[ thread ]</a>
              <a href="subject.html#41236">[ subject ]</a>
              <a href="author.html#41236">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 02/03/2014 13:54, Zoltan Varga wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i>   mono requires an existing mono installation to work, and will only
</I>&gt;<i> fall back to monolite if it is missing. If you want it to use
</I>&gt;<i> monolite, then remove the existing mono installation from the PATH.
</I>&gt;<i>
</I>&gt;<i>                     Zoltan
</I>&gt;<i>
</I>&gt;<i>
</I>
Hi Zoltan,

Thanks for the response.

I'm not sure I understand you. There is already a monolite/basic.exe
present in the Mono archive.

The build environment is building another basic.exe

The problem seems to be that a dependency is being introduced on the
wrong mscorlib by the basic
profile makefile, which is what I was attempting to address (?)

Best Regards,

Alex

&gt;<i> On Sun, Mar 2, 2014 at 8:24 AM, Alex J Lennon
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ajlennon at dynamicdevices.co.uk</A> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ajlennon at dynamicdevices.co.uk</A>&gt;&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i>     Hi,
</I>&gt;<i>
</I>&gt;<i>     I'm updating a recipe for Yocto/Openembedded layer, meta-mono, which
</I>&gt;<i>     cross-compiles Mono 3.2.8 for embedded Linux targets.
</I>&gt;<i>
</I>&gt;<i>     I am using an Ubuntu 12.04 LTS host for build and previously this has
</I>&gt;<i>     worked well with the default mono support available in precise,
</I>&gt;<i>     version
</I>&gt;<i>     2.10 I think.
</I>&gt;<i>
</I>&gt;<i>     (NB the Yocto  build environment shouldn't have any external
</I>&gt;<i>     dependencies on the  host version of mono as it is building its own
</I>&gt;<i>     native, host, build  prior to the cross-compiled build).
</I>&gt;<i>
</I>&gt;<i>     When I updated the host to use Mono  3.2.1 from ppa:directhex/monoxide
</I>&gt;<i>     for some other work I was doing, I started getting unexpected build
</I>&gt;<i>     problems with the meta-mono recipe.
</I>&gt;<i>
</I>&gt;<i>     &gt;From what I've been able to track down, what is happening is that the
</I>&gt;<i>     build process is building basic/basic.exe from the basic profile. I'm
</I>&gt;<i>     not sure why this is happening as we already have the bootstrap
</I>&gt;<i>     basic.exe in monolite.
</I>&gt;<i>
</I>&gt;<i>     This new basic.exe should have a dependency on the apropriate
</I>&gt;<i>     mscorlib.dl that is being built with it, but instead has a
</I>&gt;<i>     dependency on
</I>&gt;<i>     an external mscorlib.dll on the host. With Mono 3.2.1 installed this
</I>&gt;<i>     dependency is on /usr/lib/mono/4.5/mscorlib.dll
</I>&gt;<i>
</I>&gt;<i>     As a result of this dependency when the new basic.exe is executed
</I>&gt;<i>     we get
</I>&gt;<i>     various warnings of the form,
</I>&gt;<i>
</I>&gt;<i>     ../corlib/Mono/DataConverter.cs(759,25): warning CS0436: The type
</I>&gt;<i>     `Mono.DataConverter' conflicts with the imported type of same name'.
</I>&gt;<i>     Ignoring the imported type definition
</I>&gt;<i>     ../../build/common/MonoTODOAttribute.cs(38,17): (Location of the
</I>&gt;<i>     symbol
</I>&gt;<i>     related to previous warning)
</I>&gt;<i>     /usr/lib/mono/4.5/mscorlib.dll (Location of the symbol related to
</I>&gt;<i>     previous warning)
</I>&gt;<i>
</I>&gt;<i>     Then an error
</I>&gt;<i>
</I>&gt;<i>     MCS     [build] mscorlib.dll
</I>&gt;<i>     Unhandled Exception:
</I>&gt;<i>     System.TypeLoadException: Could not load type
</I>&gt;<i>     'Mono.CSharp.CommandLineParser' from assembly 'basic, Version=3.2.8.0,
</I>&gt;<i>     Culture=neutral, PublicKeyToken=null'.
</I>&gt;<i>     [ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: Could not
</I>&gt;<i>     load type 'Mono.CSharp.CommandLineParser' from assembly 'basic,
</I>&gt;<i>     Version=3.2.8.0, Culture=neutral, PublicKeyToken=null'.
</I>&gt;<i>     make[8]: *** [../../class/lib/build/tmp/mscorlib.dll] Error 1
</I>&gt;<i>
</I>&gt;<i>     I took a look at the basic profile make file for missing paths and I
</I>&gt;<i>     think it may be missing the required dependency path. When I added
</I>&gt;<i>     this
</I>&gt;<i>     in the build works,
</I>&gt;<i>
</I>&gt;<i>     --- 3.2.8-r0/mcs/build/profiles/basic.make.org
</I>&gt;<i>     &lt;<A HREF="http://basic.make.org">http://basic.make.org</A>&gt;  2014-03-01
</I>&gt;<i>     17:51:52.904670729 +0000
</I>&gt;<i>     +++ 3.2.8-r0/mcs/build/profiles/basic.make      2014-03-01
</I>&gt;<i>     17:46:50.476669939 +0000
</I>&gt;<i>     @@ -12,7 +12,7 @@
</I>&gt;<i>      PROFILE_RUNTIME = $(with_mono_path_monolite) $(RUNTIME)
</I>&gt;<i>      BOOTSTRAP_MCS = $(PROFILE_RUNTIME) $(RUNTIME_FLAGS)
</I>&gt;<i>     $(MONOLITE_MCS) -sdk:2
</I>&gt;<i>      else
</I>&gt;<i>     -PROFILE_RUNTIME = $(EXTERNAL_RUNTIME)
</I>&gt;<i>     +PROFILE_RUNTIME = ${with_mono_path) $(EXTERNAL_RUNTIME)
</I>&gt;<i>      BOOTSTRAP_MCS = $(EXTERNAL_MCS)
</I>&gt;<i>      endif
</I>&gt;<i>
</I>&gt;<i>     Could somebody please comment on whether this makes sense? If so
</I>&gt;<i>     I'd be
</I>&gt;<i>     happy to provide the patch to you in whatever format is required.
</I>&gt;<i>
</I>&gt;<i>     Thanks &amp; Best Regards,
</I>&gt;<i>
</I>&gt;<i>     Alex Lennon
</I>&gt;<i>     Dynamic Devices Ltd
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     Mono-devel-list mailing list
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i>     <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
-- 

Dynamic Devices Ltd &lt;<A HREF="http://www.dynamicdevices.co.uk/">http://www.dynamicdevices.co.uk/</A>&gt;

Alex J Lennon / Director
1 Queensway, Liverpool L22 4RA

mobile: +44 (0)7956 668178

Linkedin &lt;<A HREF="http://www.linkedin.com/in/alexjlennon">http://www.linkedin.com/in/alexjlennon</A>&gt; Skype
&lt;skype:alexjlennon?add&gt;

This e-mail message may contain confidential or legally privileged
information and is intended only for the use of the intended
recipient(s). Any unauthorized disclosure, dissemination, distribution,
copying or the taking of any action in reliance on the information
herein is prohibited. E-mails are not secure and cannot be guaranteed to
be error free as they can be intercepted, amended, or contain viruses.
Anyone who communicates with us by e-mail is deemed to have accepted
these risks. Company Name is not responsible for errors or omissions in
this message and denies any responsibility for any damage arising from
the use of e-mail. Any opinion and other statement contained in this
message and any attachment are solely those of the author and do not
necessarily represent those of the company.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140305/eb210e02/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140305/eb210e02/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ddlogo-4.png
Type: image/png
Size: 3997 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140305/eb210e02/attachment.png">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140305/eb210e02/attachment.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: linkedin.png
Type: image/png
Size: 631 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140305/eb210e02/attachment-0001.png">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140305/eb210e02/attachment-0001.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: skype.png
Type: image/png
Size: 800 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140305/eb210e02/attachment-0002.png">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140305/eb210e02/attachment-0002.png</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041223.html">[Mono-dev] Question about issue building basic.exe and mscorlib	paths
</A></li>
	<LI>Next message: <A HREF="041224.html">[Mono-dev] Microsoft search for developers to create cross-platform opensource gaming-framework
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41236">[ date ]</a>
              <a href="thread.html#41236">[ thread ]</a>
              <a href="subject.html#41236">[ subject ]</a>
              <a href="author.html#41236">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
