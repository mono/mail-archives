<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Bug with Ssl cert validation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Bug%20with%20Ssl%20cert%20validation&In-Reply-To=%3C19713c5d76fc47e9bb3f37b7e19ab539%40BL2PR08MB451.namprd08.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041257.html">
   <LINK REL="Next"  HREF="041259.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Bug with Ssl cert validation</H1>
    <B>Edward Ned Harvey (mono)</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Bug%20with%20Ssl%20cert%20validation&In-Reply-To=%3C19713c5d76fc47e9bb3f37b7e19ab539%40BL2PR08MB451.namprd08.prod.outlook.com%3E"
       TITLE="[Mono-dev] Bug with Ssl cert validation">edward.harvey.mono at clevertrove.com
       </A><BR>
    <I>Tue Mar 18 10:33:53 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="041257.html">[Mono-dev] Fwd:  Bug with Ssl cert validation
</A></li>
        <LI>Next message: <A HREF="041259.html">[Mono-dev] Bug with Ssl cert validation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41258">[ date ]</a>
              <a href="thread.html#41258">[ thread ]</a>
              <a href="subject.html#41258">[ subject ]</a>
              <a href="author.html#41258">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From: Sebastien Pouliot [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastien.pouliot at gmail.com</A>]
</I>&gt;<i> 
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; var mySslStream = new SslStream (client.GetStream(), false,
</I>&gt;&gt;<i> ValidateServerCertificate);
</I>&gt;<i> 
</I>&gt;<i> if you read the source [1] (or look at the API compatibility page [2]) you'll see
</I>&gt;<i> that this .ctor is decorated with
</I>&gt;<i> 
</I>&gt;<i> [MonoTODO&#160;(&quot;userCertificateValidationCallback&#160;is&#160;not&#160;passed&#160;X509Chain&#160;and
</I>&gt;<i> SslPolicyErrors&#160;correctly&quot;)]
</I>&gt;<i> 
</I>&gt;<i> Changing it to
</I>&gt;<i> 
</I>&gt;<i> var mySslStream = new SslStream (client.GetStream(), false);
</I>&gt;<i> 
</I>&gt;<i> *and* having run `mozroots` will work.
</I>
Thank you for this information, but it causes me an equally significant problem.  I need to accept the server cert if it passes validation with mozroots, but if that fails, then I need to get user input to determine if they'll accept the cert.

I guess the best way to do this will be to first create the SslStream and AuthenticateAsClient, and  simply wait to see if it succeeds.  If it fails, then throw it away, create a new SslStream with RemoteCertificateValidationCallback, and ignore the X509Chain and  SslPolicyErrors, just simply present the certificate to user.

Any better ideas?

Thanks again, for your very prompt and helpful response.   :-)
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041257.html">[Mono-dev] Fwd:  Bug with Ssl cert validation
</A></li>
	<LI>Next message: <A HREF="041259.html">[Mono-dev] Bug with Ssl cert validation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41258">[ date ]</a>
              <a href="thread.html#41258">[ thread ]</a>
              <a href="subject.html#41258">[ subject ]</a>
              <a href="author.html#41258">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
