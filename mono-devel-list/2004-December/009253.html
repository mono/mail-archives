<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Consolidate output of monodis with input of ilasm
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Consolidate%20output%20of%20monodis%20with%20input%20of%20ilasm&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009251.html">
   <LINK REL="Next"  HREF="009308.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Consolidate output of monodis with input of ilasm</H1>
    <B>Kamil Skalski</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Consolidate%20output%20of%20monodis%20with%20input%20of%20ilasm&In-Reply-To="
       TITLE="[Mono-devel-list] Consolidate output of monodis with input of ilasm">nazgul at nemerle.org
       </A><BR>
    <I>Sun Dec  5 20:54:41 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009251.html">[Mono-devel-list] Patch for updated Npgsql info in Postgresql.html of website.
</A></li>
        <LI>Next message: <A HREF="009308.html">[Mono-devel-list] Consolidate output of monodis with input of	ilasm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9253">[ date ]</a>
              <a href="thread.html#9253">[ thread ]</a>
              <a href="subject.html#9253">[ subject ]</a>
              <a href="author.html#9253">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello!

I was working on some cases for 
<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=69720">http://bugzilla.ximian.com/show_bug.cgi?id=69720</A>

I noticed that it already works for mcs.exe, but there were many problems with 
mscorlib.dll
With provided patches the situation gets better, but there are still two 
issues with mscorlib:

1)         /// FIXME: .NET ildasm generates different things in (..)
 { FIELD_ATTRIBUTE_HAS_FIELD_MARSHAL,        &quot;marshal (interface) &quot; },
I don't know the specs of what should be put inside of (..) and how to obtain 
this information from mono structures

2) There are problems during compilation of mscorlib, because it uses types 
like System.String and System.Object without [someassembly] specifier and 
current implementation of ilasm gives it PrimitiveTypeRef, which is not good. 
There are places in code, where ITypeRef is casted to TypeRef and then 
everything dies with InvalidCastException.

Could anyoune review the patches, maybe fix the missing parts and commit it to 
svn?
Probably after succes with it, some regression tests should be created to 
validate if every assembly can be monodis -&gt; ilasmed.

-- 
Kamil Skalski
<A HREF="http://nemerle.org">http://nemerle.org</A> developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ilasm.diff
Type: text/x-diff
Size: 8517 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041206/5b60857d/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041206/5b60857d/attachment.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: monodis.diff
Type: text/x-diff
Size: 5747 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041206/5b60857d/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041206/5b60857d/attachment-0001.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009251.html">[Mono-devel-list] Patch for updated Npgsql info in Postgresql.html of website.
</A></li>
	<LI>Next message: <A HREF="009308.html">[Mono-devel-list] Consolidate output of monodis with input of	ilasm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9253">[ date ]</a>
              <a href="thread.html#9253">[ thread ]</a>
              <a href="subject.html#9253">[ subject ]</a>
              <a href="author.html#9253">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
