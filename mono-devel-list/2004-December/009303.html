<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Pinvoking windows dll on linux?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Pinvoking%20windows%20dll%20on%20linux%3F&In-Reply-To=BAY20-F322EE9EACF284E9F24E0E1BFB60%40phx.gbl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009301.html">
   <LINK REL="Next"  HREF="009304.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Pinvoking windows dll on linux?</H1>
    <B>Jonathan Gilbert</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Pinvoking%20windows%20dll%20on%20linux%3F&In-Reply-To=BAY20-F322EE9EACF284E9F24E0E1BFB60%40phx.gbl"
       TITLE="[Mono-devel-list] Pinvoking windows dll on linux?">2a5gjx302 at sneakemail.com
       </A><BR>
    <I>Wed Dec  8 08:53:25 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009301.html">[Mono-devel-list] Pinvoking windows dll on linux?
</A></li>
        <LI>Next message: <A HREF="009304.html">[Mono-devel-list] [PATCH] CAS declarative stack modifiers - affects JIT ports!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9303">[ date ]</a>
              <a href="thread.html#9303">[ thread ]</a>
              <a href="subject.html#9303">[ subject ]</a>
              <a href="author.html#9303">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 10:34 PM 07/12/2004 -0800, Lehel Kovach wrote:
&gt;<i>Is it possible to use DllImport to call a function from a 
</I>&gt;<i>windows-native-code dll on Linux if the Linux machine has something like 
</I>&gt;<i>Wine installed, or would this take some hacking?
</I>
It would take severe hacking. As I understand it (it was explained on one
of these lists a loooooooong time ago), libgc and WINE both want their own
thread extensions, and the two do not currently mix. What would be needed
would be a sort of hybrid: WINE with libgc built into it. The GC internals
would probably need to change somewhat, but if the public interface stayed
the same, it should in theory be possible to set up mono to run as a
process adjunct to WINE, using WINE's libgc and the combined threading.
Then, WINE's Win32 API could be used to load Win32 DLLs and invoke methods
within them.

The WINE/libgc threading incompatibility was found while the WINE-based
System.Windows.Forms implementation was still being pursued. WINElib
provided a partial fix to the &quot;how can WINE be used without taking over the
entire process&quot; problem, but problems between libgc-controlled threads and
WINE-controlled threads became apparent. WINElib wasn't even a particularly
safe hack of WINE, and the WINE maintainers refused to consider adding it
to the main WINE distribution. It was these difficulties, I believe, that
caused the WINE-based implementation to be ditched.

All this, by the way, is just regurgitation of something I read in a
message written by someone else a year or two ago; it's possible the facts
aren't quite right or that I have remembered it incorrectly :-) Still, it
should give you somewhere to start from (at the very least, an ancient
message to search for with more specific details of the problem).

Jonathan Gilbert


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009301.html">[Mono-devel-list] Pinvoking windows dll on linux?
</A></li>
	<LI>Next message: <A HREF="009304.html">[Mono-devel-list] [PATCH] CAS declarative stack modifiers - affects JIT ports!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9303">[ date ]</a>
              <a href="thread.html#9303">[ thread ]</a>
              <a href="subject.html#9303">[ subject ]</a>
              <a href="author.html#9303">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
