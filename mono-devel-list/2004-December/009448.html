<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] HttpWorkerRequest
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20HttpWorkerRequest&In-Reply-To=1103143649.32726.5.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009447.html">
   <LINK REL="Next"  HREF="009453.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] HttpWorkerRequest</H1>
    <B>Joe Audette</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20HttpWorkerRequest&In-Reply-To=1103143649.32726.5.camel%40localhost.localdomain"
       TITLE="[Mono-devel-list] HttpWorkerRequest">joe_audette at yahoo.com
       </A><BR>
    <I>Wed Dec 15 16:26:18 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009447.html">[Mono-devel-list] HttpWorkerRequest
</A></li>
        <LI>Next message: <A HREF="009453.html">[Mono-devel-list] HttpWorkerRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9448">[ date ]</a>
              <a href="thread.html#9448">[ thread ]</a>
              <a href="subject.html#9448">[ subject ]</a>
              <a href="author.html#9448">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gonzalo,
 
Do you agree that this method:
HttpWorkerRequest GetWorkerRequest(HttpContext context) 
 { 
 
 IServiceProvider provider = (IServiceProvider)HttpContext.Current; 

return (HttpWorkerRequest)provider.GetService(typeof(HttpWorkerRequest));  
 } 
 
should return  either XSPWorkerRequest or ModMonoWorkerRequest and calling
.GetPreLoadedEntityBody()  or ReadEntityBody() on either of these objects should not return null
 
Its a missing feature somewhere isn't it? Bottom line the code works on windows and is not using any P/Invoke stuff, just managed code, so if not a bug then a missing feature that is needed to make mono more compatible.
 
Should I enter bugzilla or not? I wrote to the author of the HttpUpload module to get him to help me articulate what is needed and was planning to enter a bugzilla.
 
Yes I thought the code was using HttpWorkerRequest and didn't realize it was using a subclass but whatever subclass is returned from the method above should be capable of returning something more useful than null when you call its methods, that is what happens on windows. 
 
I am not the author of the code, but I'm doing the best I can to show you that something is wrong or it would work on mono as it does on windows.  It is very useful code to be able to have controlled upload of large files with a progress indicator, it will be a shame if only windows installations of my app can take advantage of that feature.
 
Best Regards,
 
Joe



Gonzalo Paniagua Javier &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">gonzalo at ximian.com</A>&gt; wrote:
On Wed, 2004-12-15 at 17:37 -0200, Rafael Teixeira wrote:
&gt;<i> Well this is some internal class from the .NET implementation as it
</I>&gt;<i> isn't documented in MSDN.
</I>&gt;<i> 
</I>&gt;<i> In Mono we have some subclass of MonoWorkerRequest (either
</I>&gt;<i> XSPWorkerRequest or ModMonoWorkerRequest). These classes are the ones
</I>&gt;<i> that return null for GetPreLoadedEntityBody().
</I>&gt;<i> 
</I>&gt;<i> Could you please fill a bugzilla, giving some more details of what is
</I>&gt;<i> expected to come in the byte array, and pointing to implement in those
</I>&gt;<i> classes (or the superclass), please. I would do it for you, by I run
</I>&gt;<i> out of time just now.
</I>
As I said before, there is no bug here. It's just that Joe is using that
ISAPIWorkerRequestOutOfProc class and he thought it was
HttpWorkerRequest.

-Gonzalo


_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>


<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">joe_audette at yahoo.com</A>
<A HREF="http://www.joeaudette.com">http://www.joeaudette.com</A>
<A HREF="http://www.mojoportal.com">http://www.mojoportal.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041215/c2367314/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041215/c2367314/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009447.html">[Mono-devel-list] HttpWorkerRequest
</A></li>
	<LI>Next message: <A HREF="009453.html">[Mono-devel-list] HttpWorkerRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9448">[ date ]</a>
              <a href="thread.html#9448">[ thread ]</a>
              <a href="subject.html#9448">[ subject ]</a>
              <a href="author.html#9448">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
