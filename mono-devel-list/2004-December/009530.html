<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] CAS - Patch - Code generation for declarative security demands
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20CAS%20-%20Patch%20-%20Code%20generation%20for%20declarative%20security%20demands&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009536.html">
   <LINK REL="Next"  HREF="009534.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] CAS - Patch - Code generation for declarative security demands</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20CAS%20-%20Patch%20-%20Code%20generation%20for%20declarative%20security%20demands&In-Reply-To="
       TITLE="[Mono-devel-list] CAS - Patch - Code generation for declarative security demands">sebastien at ximian.com
       </A><BR>
    <I>Tue Dec 21 14:25:38 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009536.html">[Mono-devel-list] Bug: XmlParserContext BaseURI is null
</A></li>
        <LI>Next message: <A HREF="009534.html">[Mono-devel-list] System.Drawing.Font question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9530">[ date ]</a>
              <a href="thread.html#9530">[ thread ]</a>
              <a href="subject.html#9530">[ subject ]</a>
              <a href="author.html#9530">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Another CAS patch before xmas...

Declarative demands (i.e. Demand, NonCasDemand and DemandChoice) must be
executed before the method code. So the JIT has to check every method it
compile to see if declarative demands are applicable.

This patch add code to mono_method_to_ir to:
1. detect if declarative security attributes are applicable to the
compiled method (attribute on the method or it's class);
2. check if the security action is Demand, NonCasDemand or DemandChoice;
3. get the applicable (method level as priority over class level
actions) permissions set informations (pointer and size) from metadata.
4. generate a call for present actions


Attached to this email are the patch to mono (mini.c) and two additional
files (in metadata) for the security manager (currently limited to
initialization).

-- 
Sebastien Pouliot  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastien at ximian.com</A>&gt;
blog: <A HREF="http://pages.infinit.net/ctech/poupou.html">http://pages.infinit.net/ctech/poupou.html</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mono.20041221.diff
Type: text/x-patch
Size: 3748 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041221/5b042b83/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041221/5b042b83/attachment.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: security-manager.c
Type: text/x-csrc
Size: 1019 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041221/5b042b83/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041221/5b042b83/attachment-0001.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: security-manager.h
Type: text/x-chdr
Size: 1124 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041221/5b042b83/attachment-0002.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041221/5b042b83/attachment-0002.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009536.html">[Mono-devel-list] Bug: XmlParserContext BaseURI is null
</A></li>
	<LI>Next message: <A HREF="009534.html">[Mono-devel-list] System.Drawing.Font question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9530">[ date ]</a>
              <a href="thread.html#9530">[ thread ]</a>
              <a href="subject.html#9530">[ subject ]</a>
              <a href="author.html#9530">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
