<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Compressing the `CategoryData' table
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Compressing%20the%20%60CategoryData%27%20table&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009554.html">
   <LINK REL="Next"  HREF="009553.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Compressing the `CategoryData' table</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Compressing%20the%20%60CategoryData%27%20table&In-Reply-To="
       TITLE="[Mono-devel-list] Compressing the `CategoryData' table">bmaurer at ximian.com
       </A><BR>
    <I>Thu Dec 23 16:00:02 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009554.html">[Mono-devel-list] DllImport with multiple shared libraries
</A></li>
        <LI>Next message: <A HREF="009553.html">[Mono-devel-list] Serial Port (System.IO.Ports.SerialPort) implementation submission
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9552">[ date ]</a>
              <a href="thread.html#9552">[ thread ]</a>
              <a href="subject.html#9552">[ subject ]</a>
              <a href="author.html#9552">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey guys,

Right now, the CategoryData table, located in
metadata/char-conversions.h takes up 64 kb of space in the Mono
executable. I have attached a program that generates a more compact
representation of this table. My version requires only 6 kb to store.
The only cost of this representation is that 3 indirections, rather than
1 are needed. Also, a few shifts, etc must be done. I haven't taken a
look at exactly the extra cost of this method. But I am assuming that
this routine is not going to be very perf critical.

The attached file makes a C# representation of my new structure.
Obviously, I will port this to C; I just wanted to do some quick
testing.

I found the segment length of 256 and stride length of 8 to be the
shortest combo, by trial and error.

I'd appreciate any comments on my technique, and any possible
improvements.

This technique could also be applied to the other data tables in Char.

-- Ben
-------------- next part --------------
A non-text attachment was scrubbed...
Name: char-table-encode.cs.gz
Type: application/x-gzip
Size: 4070 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041223/7417b337/attachment.gz">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20041223/7417b337/attachment.gz</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009554.html">[Mono-devel-list] DllImport with multiple shared libraries
</A></li>
	<LI>Next message: <A HREF="009553.html">[Mono-devel-list] Serial Port (System.IO.Ports.SerialPort) implementation submission
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9552">[ date ]</a>
              <a href="thread.html#9552">[ thread ]</a>
              <a href="subject.html#9552">[ subject ]</a>
              <a href="author.html#9552">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
