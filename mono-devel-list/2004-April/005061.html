<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Embed xml files with mcs / get embedded xml file from Assembly with GetManifestResourceStream()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Embed%20xml%20files%20with%20mcs%20/%20get%20embedded%20xml%20file%20from%20Assembly%20with%20GetManifestResourceStream%28%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005059.html">
   <LINK REL="Next"  HREF="005071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Embed xml files with mcs / get embedded xml file from Assembly with GetManifestResourceStream()</H1>
    <B>Hinrich Aue</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Embed%20xml%20files%20with%20mcs%20/%20get%20embedded%20xml%20file%20from%20Assembly%20with%20GetManifestResourceStream%28%29&In-Reply-To="
       TITLE="[Mono-devel-list] Embed xml files with mcs / get embedded xml file from Assembly with GetManifestResourceStream()">h_aue at gmx.de
       </A><BR>
    <I>Tue Apr 20 09:22:26 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005059.html">[Mono-devel-list] [PATCH] Environment.GetFolderPath
</A></li>
        <LI>Next message: <A HREF="005071.html">[Mono-devel-list] Ayuda en ASP.NET - MYSQL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5061">[ date ]</a>
              <a href="thread.html#5061">[ thread ]</a>
              <a href="subject.html#5061">[ subject ]</a>
              <a href="author.html#5061">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I compiled the db layer of A .NET Application written with VisualStudio with 
mono.
The first Problem is that it seems the author embedded several xml files in 
the assemblies, and read them from the assembly during runtime:


Code #############################################
private void PrepareAllAdapters()
		{
			XmlDocument objXML = new XmlDocument();
			
objXML.Load(Assembly.GetExecutingAssembly().GetManifestResourceStream(&quot;MultimediaKnowledgeBase.DataAccessLayer.configadaptersearch.xml&quot;));
			
PrepareAdapter(objXML.SelectSingleNode(&quot;adapters/adapter[@name='category']&quot;), 
m_objAdapterCategory);
			
PrepareAdapter(objXML.SelectSingleNode(&quot;adapters/adapter[@name='booleansearch']&quot;), 
m_objAdapterBooleanSearch);
			
PrepareAdapter(objXML.SelectSingleNode(&quot;adapters/adapter[@name='regularexpression']&quot;), 
m_objAdapterRegExSearch);
			
PrepareAdapter(objXML.SelectSingleNode(&quot;adapters/adapter[@name='categorydocument']&quot;), 
m_objAdapterCategoryDocument);
			
PrepareAdapter(objXML.SelectSingleNode(&quot;adapters/adapter[@name='refreshdocument']&quot;), 
m_objAdapterRefreshDocument);
		}

 #############################################

When I start the Program, and use the above funktion (which I have to do 
during Init) I get following exception:

Exception ##########################################

Unhandled Exception: System.TypeInitializationException: An exception was 
thrown by the type initializer for 
MultimediaKnowledgeBase.DataAccessLayer.SearchHelper ---&gt; 
System.NullReferenceException: Object reference not set to an instance of an 
object
in &lt;0x0006a&gt; Mono.Xml.Native.XmlInputStream:Initialize (System.IO.Stream)
in &lt;0x00056&gt; (wrapper remoting-invoke-with-check) 
Mono.Xml.Native.XmlInputStream:Initialize (System.IO.Stream)
in &lt;0x00040&gt; Mono.Xml.Native.XmlInputStream:.ctor (System.IO.Stream)
in &lt;0x00056&gt; (wrapper remoting-invoke-with-check) 
Mono.Xml.Native.XmlInputStream:.ctor (System.IO.Stream)
in &lt;0x0002b&gt; Mono.Xml.Native.XmlStreamReader:.ctor (System.IO.Stream)
in &lt;0x00056&gt; (wrapper remoting-invoke-with-check) 
Mono.Xml.Native.XmlStreamReader:.ctor (System.IO.Stream)
in &lt;0x0002b&gt; System.Xml.XmlTextReader:.ctor (System.IO.Stream)
in &lt;0x00026&gt; System.Xml.XmlDocument:Load (System.IO.Stream)
in &lt;0x0005a&gt; 
MultimediaKnowledgeBase.DataAccessLayer.SearchHelper:PrepareAllAdapters ()
in &lt;0x000cd&gt; MultimediaKnowledgeBase.DataAccessLayer.SearchHelper:.ctor ()
in &lt;0x0001e&gt; MultimediaKnowledgeBase.DataAccessLayer.SearchHelper:.cctor ()
--- End of inner exception stack trace ---

in (unmanaged) MKBTest:Main (string[])
##########################################

I embedded the xml files with the 
	-resource:FILE[,ID]     Embed FILE as a resource
option.
Is that correct? What is the ID for (I don't use ID)?
Or are there features missing in mono?

Thanks
	Hinrich.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005059.html">[Mono-devel-list] [PATCH] Environment.GetFolderPath
</A></li>
	<LI>Next message: <A HREF="005071.html">[Mono-devel-list] Ayuda en ASP.NET - MYSQL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5061">[ date ]</a>
              <a href="thread.html#5061">[ thread ]</a>
              <a href="subject.html#5061">[ subject ]</a>
              <a href="author.html#5061">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
