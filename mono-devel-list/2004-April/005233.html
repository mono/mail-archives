<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] GAC (design) issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GAC%20%28design%29%20issues&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005226.html">
   <LINK REL="Next"  HREF="005236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] GAC (design) issues</H1>
    <B>Gert Driesen</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GAC%20%28design%29%20issues&In-Reply-To="
       TITLE="[Mono-devel-list] GAC (design) issues">gert.driesen at pandora.be
       </A><BR>
    <I>Fri Apr 30 05:06:21 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005226.html">[Mono-devel-list] trouble compiling gmcs
</A></li>
        <LI>Next message: <A HREF="005236.html">[Mono-devel-list] patch for pinvoke1.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5233">[ date ]</a>
              <a href="thread.html#5233">[ thread ]</a>
              <a href="subject.html#5233">[ subject ]</a>
              <a href="author.html#5233">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jackson,

In my opinion, the current implementation of GAC in mono has three (major?)
issues :

1. Mono system assemblies are no longer copied to a lib directory directory
where developers can explicitly reference a certain version of a system
assembly using a full path.  Can this please be put back in ?  Moreover,
wouldn't it be better to have a lib/mono/&lt;mono version&gt; directory (where
&lt;mono version&gt; is actually a major version.minor version number for major
releases, so 1.0 or 2.0 for now)  ?

You'd get the following directory structure :

lib\
    mono\
        gac\
            System\
                1.0.5000.0__b77a5c561934e089\
                    System.dll
            ....
        1.0\
            System.dll
            ....
        2.0\
bin\
    mono\
        1.0\
        2.0\

This is similar to what MS does.

Currently, removing a system assembly from the GAC will remove it completely
from your system, as its only stored in the GAC.  this would be resolved too
when these assemblies are stored in the GAC and in a Mono (version-specific)
lib directory.

2. In order to compile applications referencing system assemblies using mcs,
mcs was updated to allow unqualified assembly references to be resolved
using the  GAC (see Mono.CSharp.Driver.LoadAssemblyFromGac).  I assume this
change was only introduced to copy with the fact that system assemblies are
now only stored in the GAC, so resolving issue 1 would remove the need for
this change to mcs.

3. As part of mcs clean, assembies are removed from the gac using the
basename of the assembly, eg to remove System.Data, Version=1.0.5000.0,
Culture=neutral, PublicKeyToken=b77a5c561934e089 from the GAC, the following
command is executed :

    gacutil /u System.Data

This could cause other versions of the System.Data assembly to be removed
from the GAC too. We should always use the fully qualified assembly names to
remove assemblies from the GAC.

Regards,

Gert


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005226.html">[Mono-devel-list] trouble compiling gmcs
</A></li>
	<LI>Next message: <A HREF="005236.html">[Mono-devel-list] patch for pinvoke1.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5233">[ date ]</a>
              <a href="thread.html#5233">[ thread ]</a>
              <a href="subject.html#5233">[ subject ]</a>
              <a href="author.html#5233">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
