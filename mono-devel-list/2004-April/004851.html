<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Patch for String.Equals
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patch%20for%20String.Equals&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004850.html">
   <LINK REL="Next"  HREF="004853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Patch for String.Equals</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patch%20for%20String.Equals&In-Reply-To="
       TITLE="[Mono-devel-list] Patch for String.Equals">05mauben at hawken.edu
       </A><BR>
    <I>Mon Apr  5 10:31:49 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="004850.html">[Mono-devel-list] Patch for String.Equals
</A></li>
        <LI>Next message: <A HREF="004853.html">[Mono-devel-list] Patch for String.Equals
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4851">[ date ]</a>
              <a href="thread.html#4851">[ thread ]</a>
              <a href="subject.html#4851">[ subject ]</a>
              <a href="author.html#4851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>oops, sorry it is sizeof (char)/sizeof (void*)

The problem with long ops is that we cant optimize as much for them. The
burg rules are simply not there. the benefit seen from this may actually
be from unrolling the loop. It is possible that better performance (on
the 32 bit) would be obtained by just doing two integer compares.

I can take a look at the code we are generating later...

&gt;&gt;&gt;<i> Michal Moskal &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">malekith at pld-linux.org</A>&gt; 04/05/04 10:27 AM &gt;&gt;&gt;
</I>On Mon, Apr 05, 2004 at 07:43:07AM -0400, Ben Maurer wrote:
&gt;<i> To optimize for both platforms, the native integer size should be
</I>used.
&gt;<i> You can do this by casting the char* to a void**, and using
</I>&gt;<i> string.Length * sizeof (char*) / sizeof (void**).
</I>
As far as I can tell sizeof(char*)==sizeof(void**), at least in C on all
sane platforms. So the code above isn't very helpful.

Anyway if the long compares doesn't hurt performance on x86, why avoid
it?

-- 
:<i> Michal Moskal :: <A HREF="http://www.kernel.pl/~malekith">http://www.kernel.pl/~malekith</A> :: GCS !tv h e&gt;+++ b++
</I>:<i> When in doubt, use brute force. -- Ken Thompson :: UL++++$ C++ E--- a?
</I>_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004850.html">[Mono-devel-list] Patch for String.Equals
</A></li>
	<LI>Next message: <A HREF="004853.html">[Mono-devel-list] Patch for String.Equals
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4851">[ date ]</a>
              <a href="thread.html#4851">[ thread ]</a>
              <a href="subject.html#4851">[ subject ]</a>
              <a href="author.html#4851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
