<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Proposal: Library Loading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Proposal%3A%20Library%20Loading&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004988.html">
   <LINK REL="Next"  HREF="004992.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Proposal: Library Loading</H1>
    <B>Ferdinand Prantl</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Proposal%3A%20Library%20Loading&In-Reply-To="
       TITLE="[Mono-devel-list] Proposal: Library Loading">ferdinand.prantl at ixos.de
       </A><BR>
    <I>Wed Apr 14 08:06:33 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="004988.html">[Mono-devel-list] [RFA] Fix Bugzilla #56463
</A></li>
        <LI>Next message: <A HREF="004992.html">[Mono-devel-list] Question regarding implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4993">[ date ]</a>
              <a href="thread.html#4993">[ thread ]</a>
              <a href="subject.html#4993">[ subject ]</a>
              <a href="author.html#4993">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hallo Jordi and Jon, 

&gt;<i> From: Jordi Mas [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jordi at ximian.com</A>] 
</I>&gt;<i> On dc, 2004-04-14 at 03:25, Jonathan Pryor wrote:
</I>&gt;<i> &gt; On Tue, 2004-04-13 at 21:07, Vladimir Vukicevic wrote:
</I>&gt;<i> &gt; &gt; On Tue, 2004-04-13 at 17:52, Jonathan Pryor wrote:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 1.  What happens if there are multiple major versions 
</I>&gt;<i> of libfoo.so
</I>&gt;<i> &gt; &gt; &gt;     installed: libfoo.so.1 and libfoo.so.2?  Which gets 
</I>&gt;<i> loaded?  At
</I>&gt;<i> &gt; &gt; &gt;     present, whichever libfoo-devel package was 
</I>&gt;<i> installed, which may be
</I>&gt;<i> &gt; &gt; &gt;     ABI-incompatible with what the assembly was written 
</I>&gt;<i> against.  Oops.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; What happens if I have one assembly that needs libfoo.so.1, and 
</I>&gt;<i> &gt; &gt; another that wants libfoo.so.2?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Then we're screwed. :-)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On the plus side, this can't happen on Windows since 
</I>&gt;<i> Windows doesn't 
</I>&gt;<i> &gt; support versioned libraries...
</I>&gt;<i> 
</I>&gt;<i> Hello Jon,
</I>&gt;<i> 
</I>&gt;<i> Just to mention that there is an optional VERSION resource that any
</I>&gt;<i> win32 binary can contain, in fact many do have a VERSION resource.
</I>
[snip]

Actually, the VERSION resource can be used only passively, one can read it
and behave some way (rewrite a file or not). There is no support for it in
the OS dll loader. With lack of symbolic and hard links on windows it is not
alone usable to introduce a library versioning system. Hard links are
supported on NTFS 5 and higher, but similar library versioning concept from
un*xes is not used, from the historical reason. (There is posibility to use
implement a system locally in an application, which will dynamically load a
dll, test its version and then go to another one as described somewhere, but
then we'd have .NET :-)

Microsoft introduced dll versionning for WIndows 2000 and higher, which
brings a library versioning system controlled by the OS configuration,
something like .NET, also with a new API methods, but it is used probly by
Microsoft themselves (try to peek into WinSxS) ...

The native library versioning concepts are very different on both platforms
and that is why I like more the non-intrusive solution with conf.d than the
new attribute for DllImport. Im nakes the versioning also externally
configurable without recompiling or somehow modifying the assembly. The
attribute &quot;version&quot; can be optional and even then used only if the platform
supports it (if not, maybe warn about it, or check the version at least, if
possible).

Ferda

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004988.html">[Mono-devel-list] [RFA] Fix Bugzilla #56463
</A></li>
	<LI>Next message: <A HREF="004992.html">[Mono-devel-list] Question regarding implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4993">[ date ]</a>
              <a href="thread.html#4993">[ thread ]</a>
              <a href="subject.html#4993">[ subject ]</a>
              <a href="author.html#4993">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
