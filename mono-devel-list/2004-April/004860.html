<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] Faster array bounds checking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Faster%20array%20bounds%20checking&In-Reply-To=1080848780.21728.36.camel%40Ben">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004855.html">
   <LINK REL="Next"  HREF="004813.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] Faster array bounds checking</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Faster%20array%20bounds%20checking&In-Reply-To=1080848780.21728.36.camel%40Ben"
       TITLE="[Mono-devel-list] [PATCH] Faster array bounds checking">lupus at ximian.com
       </A><BR>
    <I>Mon Apr  5 15:01:38 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="004855.html">[Mono-devel-list] [PATCH] Faster array bounds checking
</A></li>
        <LI>Next message: <A HREF="004813.html">[Mono-devel-list] [PATCH] Opcode decomposition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4860">[ date ]</a>
              <a href="thread.html#4860">[ thread ]</a>
              <a href="subject.html#4860">[ subject ]</a>
              <a href="author.html#4860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/01/04 Ben Maurer wrote:
&gt;<i> The attached patch makes mini use the compare reg,membase operation when
</I>&gt;<i> it is doing array bounds checking. so, rather than:
</I>
Looks fine to commit with a changelog entry.

&gt;<i> The speedup was pretty big for a simple test case:
</I>
Completely non-reproducible. This kind of optimization can't make
this difference. Iff you measured this correctly, you're probably seeing
the effect of branch target alignment in loops which happens to favour
one of the two programs because the different code size changes the
alignment. On my system the patch gives a 0.5 % speedup
on your test, which is roughly what is expected. tests/sieve.exe has a
2% slowdown instead (likely for the same reason, since the code with the
patch or without is basically the same as far as the processor is
concerned: the only advantage of the patch is to reduce slightly the
code size which will eventually help).

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004855.html">[Mono-devel-list] [PATCH] Faster array bounds checking
</A></li>
	<LI>Next message: <A HREF="004813.html">[Mono-devel-list] [PATCH] Opcode decomposition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4860">[ date ]</a>
              <a href="thread.html#4860">[ thread ]</a>
              <a href="subject.html#4860">[ subject ]</a>
              <a href="author.html#4860">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
