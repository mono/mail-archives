<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] GC doesn't work correctly when using destructors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GC%20doesn%27t%20work%20correctly%20when%20using%20destructors&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005092.html">
   <LINK REL="Next"  HREF="005118.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] GC doesn't work correctly when using destructors</H1>
    <B>Friedrich Priewasser</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GC%20doesn%27t%20work%20correctly%20when%20using%20destructors&In-Reply-To="
       TITLE="[Mono-devel-list] GC doesn't work correctly when using destructors">priewasser at gmx.at
       </A><BR>
    <I>Thu Apr 22 08:53:57 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="005092.html">[Mono-devel-list] [ANN] Firebird ADO.NET Data Provider 1.6 Beta 2 released
</A></li>
        <LI>Next message: <A HREF="005118.html">[Mono-devel-list] GC doesn't work correctly when using	destructors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5093">[ date ]</a>
              <a href="thread.html#5093">[ thread ]</a>
              <a href="subject.html#5093">[ subject ]</a>
              <a href="author.html#5093">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

In the following program the garbage collecter doesn't collect anything 
(and so doesn't call the destructor) before the program ends (at the end 
of the program ~T() is called!). Because of this the program needs about 
150 MB RAM while executing. Without the destructor the GC works fine and 
the program needs (allmost) no memory. By the way, calling the GC manually 
changes nothing.


public class Test{
	public static void Main(){
		T t;
		for (int i=0;i&lt;2000000;i++){
			t=new T();
			//if(i%10000==0) System.GC.Collect();
		}
		
		//System.Console.Read();
	}
}

public class T{
	~T(){
		//System.Console.Write(&quot;T&quot;);
	}
}


Any idea why the GC dosen't free the &quot;T&quot;-objects before shutting down the 
runtime?
	
	Friedrich

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005092.html">[Mono-devel-list] [ANN] Firebird ADO.NET Data Provider 1.6 Beta 2 released
</A></li>
	<LI>Next message: <A HREF="005118.html">[Mono-devel-list] GC doesn't work correctly when using	destructors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5093">[ date ]</a>
              <a href="thread.html#5093">[ thread ]</a>
              <a href="subject.html#5093">[ subject ]</a>
              <a href="author.html#5093">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
