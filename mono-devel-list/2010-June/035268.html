<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] arm fpu runtime selection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20arm%20fpu%20runtime%20selection&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035267.html">
   <LINK REL="Next"  HREF="035269.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] arm fpu runtime selection</H1>
    <B>Geoff Norton</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20arm%20fpu%20runtime%20selection&In-Reply-To="
       TITLE="[Mono-dev] arm fpu runtime selection">gnorton at novell.com
       </A><BR>
    <I>Sun Jun 20 00:20:11 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="035267.html">[Mono-dev] Trying to run teste.exe
</A></li>
        <LI>Next message: <A HREF="035269.html">[Mono-dev] arm fpu runtime selection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35268">[ date ]</a>
              <a href="thread.html#35268">[ thread ]</a>
              <a href="subject.html#35268">[ subject ]</a>
              <a href="author.html#35268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Its valuable for us to be able to jit to different FPU's based on cpu capabilities, rather than a runtime compile, particularly on arm.  As such I've started porting things over to being runtime selectable.  I've attached a patch which reworks most of mini, and am looking for comments on the approach before continuing, VFP seems to be working but there are a few known issues:

#1: soft float currently has some regressions, I'm still tracking down exactly where, if it pops out please let me know
#2: We dont detect cpu capabilities at runtime yet, its driven off an env var, maybe we should emit and test small functions and catch the sigill on startup?  input would be nice here
#3: How do we handle the aot case, perhaps we introduce a new aot flag for fpu mode?

Thanks

-g
-------------- next part --------------
A non-text attachment was scrubbed...
Name: arm-fpu-select.diff
Type: application/octet-stream
Size: 59181 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100620/73c8f092/attachment-0001.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100620/73c8f092/attachment-0001.obj</A> 
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035267.html">[Mono-dev] Trying to run teste.exe
</A></li>
	<LI>Next message: <A HREF="035269.html">[Mono-dev] arm fpu runtime selection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35268">[ date ]</a>
              <a href="thread.html#35268">[ thread ]</a>
              <a href="subject.html#35268">[ subject ]</a>
              <a href="author.html#35268">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
