<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Foreing thread lifecycle tracking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Foreing%20thread%20lifecycle%20tracking&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033672.html">
   <LINK REL="Next"  HREF="033790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Foreing thread lifecycle tracking</H1>
    <B>Laurent Etiemble</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Foreing%20thread%20lifecycle%20tracking&In-Reply-To="
       TITLE="[Mono-dev] Foreing thread lifecycle tracking">laurent.etiemble at monobjc.net
       </A><BR>
    <I>Tue Dec  8 12:21:22 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033672.html">[Mono-dev] [patch] ILGenerator.Emit(OpCode,	LocalBuilder) with non variable 	related opcode
</A></li>
        <LI>Next message: <A HREF="033790.html">[Mono-dev] Foreing thread lifecycle tracking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33673">[ date ]</a>
              <a href="thread.html#33673">[ thread ]</a>
              <a href="subject.html#33673">[ subject ]</a>
              <a href="author.html#33673">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I am starting this thread in order to find a solution to an issue
encountered with Mono and described in this bug entry
(<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=537764">https://bugzilla.novell.com/show_bug.cgi?id=537764</A>).

Short Summary: On Mac OS X, Mono is using POSIX pthread functions to
hook to TSD (Thread Specific Data) in order to track the lifecycle of
foreign thread (thread not created by the Mono runtime). Under some
circumstances, a native-to-managed call can lead to inconsistent state
in the Garbage Collector.

As recommended by Geoff, I am starting a discussion about new public
API to support the notification of thread death/creation in the Mono
runtime:
- How thread tracking can be done so Mono does not miss thread death ?
- What about providing callback functions that override Mono default
behavior ? They will be set during the Mono bootstrapping.

Any comments or ideas are welcome.

Regards, Laurent Etiemble.
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033672.html">[Mono-dev] [patch] ILGenerator.Emit(OpCode,	LocalBuilder) with non variable 	related opcode
</A></li>
	<LI>Next message: <A HREF="033790.html">[Mono-dev] Foreing thread lifecycle tracking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33673">[ date ]</a>
              <a href="thread.html#33673">[ thread ]</a>
              <a href="subject.html#33673">[ subject ]</a>
              <a href="author.html#33673">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
