<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] TypeForwardedFrom
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20TypeForwardedFrom&In-Reply-To=%3C5166F122.5010102%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040299.html">
   <LINK REL="Next"  HREF="040301.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] TypeForwardedFrom</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20TypeForwardedFrom&In-Reply-To=%3C5166F122.5010102%40gmx.net%3E"
       TITLE="[Mono-dev] TypeForwardedFrom">robertj at gmx.net
       </A><BR>
    <I>Thu Apr 11 17:21:38 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040299.html">[Mono-dev] TypeForwardedFrom
</A></li>
        <LI>Next message: <A HREF="040301.html">[Mono-dev] TypeForwardedFrom
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40300">[ date ]</a>
              <a href="thread.html#40300">[ thread ]</a>
              <a href="subject.html#40300">[ subject ]</a>
              <a href="author.html#40300">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Neale,

Rename &amp; Modify WriteAssembly to take a Type argument:

public int WriteTypeAssembly (BinaryWriter writer, Type type)
{
	return WriteAssemblyName (writer, type.GetAssemblyName ());
}

(GetAssemblyName () is the extension from my first post)

Then change all call sites such that they pass the type directly
instead type.Assembly to WriteTypeAssembly. Don't forget
CodeGenerator.cs, where things get nastier due to IL code
generation ;)

Robert


On 11.04.2013 17:48, Neale Ferguson wrote:
&gt;<i> Thanks again and apologies for peppering you with questions. In
</I>&gt;<i> WriteAssemblyName() it retrieves the AssemblyFullName so I'm not sure how I
</I>&gt;<i> can get the forwarded name without the associated Type value.
</I>&gt;<i>
</I>&gt;<i> Neale
</I>&gt;<i>
</I>&gt;<i> On 4/11/13 10:04 AM, &quot;Robert Jordan&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">robertj at gmx.net</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Neale,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The icall's declaration:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> mono/metadata/icall-def.h:ICALL(ASSEM_23, &quot;get_fullname&quot;,
</I>&gt;&gt;<i> ves_icall_System_Reflection_Assembly_get_fullName)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The function:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> mono/metadata/icall.c:ves_icall_System_Reflection_Assembly_get_fullName
</I>&gt;&gt;<i> (MonoReflectionAssembly *assembly)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I won't add this overhead to the Assembly class because it's a Type
</I>&gt;&gt;<i> feature after all. You can handle this locally in ObjectWriter,
</I>&gt;&gt;<i> as this is the only place where TypeForwardedFrom is used at all.
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040299.html">[Mono-dev] TypeForwardedFrom
</A></li>
	<LI>Next message: <A HREF="040301.html">[Mono-dev] TypeForwardedFrom
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40300">[ date ]</a>
              <a href="thread.html#40300">[ thread ]</a>
              <a href="subject.html#40300">[ subject ]</a>
              <a href="author.html#40300">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
