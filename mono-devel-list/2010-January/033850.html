<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Fundamental performance problems with Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Fundamental%20performance%20problems%20with%20Mono&In-Reply-To=21C24B5F488E484BACDD5B7BA2FCAC95014B899E%40normxdc02.nucsafe.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033835.html">
   <LINK REL="Next"  HREF="033820.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Fundamental performance problems with Mono</H1>
    <B>Thad Thompson</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Fundamental%20performance%20problems%20with%20Mono&In-Reply-To=21C24B5F488E484BACDD5B7BA2FCAC95014B899E%40normxdc02.nucsafe.com"
       TITLE="[Mono-dev] Fundamental performance problems with Mono">TThompson at Nucsafe.com
       </A><BR>
    <I>Sun Jan 10 15:15:12 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="033835.html">[Mono-dev] Fundamental performance problems with Mono
</A></li>
        <LI>Next message: <A HREF="033820.html">[Mono-dev] Fundamental performance problems with Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33850">[ date ]</a>
              <a href="thread.html#33850">[ thread ]</a>
              <a href="subject.html#33850">[ subject ]</a>
              <a href="author.html#33850">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>As a follow up, here is a patched version of BufferManager.cs along with
its currently missing unit test that provides a correct (albeit slow)
default manager. It essentially just hands back normally allocated and
garbage collected memory. At some point in the future it could be
augmented with pooled managers which would help give the desired
performance boost.

-Thad

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf Of Thad
Thompson
Sent: Friday, January 08, 2010 4:23 PM
To: Miguel de Icaza
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Fundamental performance problems with Mono

Hi Miguel,
The purpose of System.ServiceModel.Channels.BufferManager in WCF is to
allocate buffers from a pool. The current implementation in Mono is
marked [MonoTODO] and only returns a single buffer. Not only does it not
manage a pool, but each invocation of TakeBuffer returns a reference to
its single internal buffer which would probably cause any consumer of
this class to crash and burn when run on Mono.

Regards,
-Thad

-----Original Message-----
From: Miguel de Icaza [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at novell.com</A>] 
Sent: Friday, January 08, 2010 4:06 PM
To: Thad Thompson
Cc: zvikag; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Fundamental performance problems with Mono

Hello Thad,

&gt;<i> If you do decide to go with managed buffers you'll need to implement
</I>&gt;<i> your own (or find a good library) as the WCF BufferManager in Mono
</I>won't
&gt;<i> really do what you want.
</I>
Can you describe what are the limitations in Mono's Buffer Manager?

Miguel.

_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: BufferManager.cs.patch
Type: application/octet-stream
Size: 6360 bytes
Desc: BufferManager.cs.patch
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100110/ac816c74/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100110/ac816c74/attachment.obj</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033835.html">[Mono-dev] Fundamental performance problems with Mono
</A></li>
	<LI>Next message: <A HREF="033820.html">[Mono-dev] Fundamental performance problems with Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33850">[ date ]</a>
              <a href="thread.html#33850">[ thread ]</a>
              <a href="subject.html#33850">[ subject ]</a>
              <a href="author.html#33850">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
