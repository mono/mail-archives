<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] A couple of comm patches
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20A%20couple%20of%20comm%20patches&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033805.html">
   <LINK REL="Next"  HREF="033807.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] A couple of comm patches</H1>
    <B>Thad Thompson</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20A%20couple%20of%20comm%20patches&In-Reply-To="
       TITLE="[Mono-dev] A couple of comm patches">TThompson at Nucsafe.com
       </A><BR>
    <I>Tue Jan  5 14:58:58 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="033805.html">[Mono-dev] Mono 2.6.1 does not run on Windows 2000
</A></li>
        <LI>Next message: <A HREF="033807.html">[Mono-dev] Upgrade external virt server to ESXi on Thursday, Jan 7th,	2010
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33806">[ date ]</a>
              <a href="thread.html#33806">[ thread ]</a>
              <a href="subject.html#33806">[ subject ]</a>
              <a href="author.html#33806">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
The native backend to the Socket implementation in Mono has fairly tight
checks on the protocol parameters handed to the low level socket. While
this catches problem early, it also prevents external extension of those
parameters. In my particular case, I'd like to access the Bluetooth
socket interface in Linux, but passing down an AddressFamily of
AF_BLUETOOTH gets caught in socket-io.c when it goes to convert the .NET
enum to the integer constant. One approach to solve this is to
re-implement a native socket interface, which is the approach taken by
the Monotooth project. However, I'd hate to give up the mature socket
handling classes and backend that Mono provides.    

To work around this, I'm submitting a patch which maps these values
through directly if they're not defined in the base framework. This
allows the use of the fully managed socket stack for writing against the
backend OS sockets. If the values passed down really are invalid, then
the consumer will catch a SocketException coming back from the OS
anyway. IMHO, there a bit more that could be trimmed, but I tried to
stay fairly conservative.

Also, the serial port speed is currently capped at 230400 baud. It would
be handy to be able to drive that a bit faster. Attached is a patch
which raises the cap to 460800.

Feedback welcome...

-Thad

-------------- next part --------------
A non-text attachment was scrubbed...
Name: fast-serial.patch
Type: application/octet-stream
Size: 308 bytes
Desc: fast-serial.patch
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100105/47f8218a/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100105/47f8218a/attachment.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: socket-io.patch
Type: application/octet-stream
Size: 2449 bytes
Desc: socket-io.patch
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100105/47f8218a/attachment-0001.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100105/47f8218a/attachment-0001.obj</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033805.html">[Mono-dev] Mono 2.6.1 does not run on Windows 2000
</A></li>
	<LI>Next message: <A HREF="033807.html">[Mono-dev] Upgrade external virt server to ESXi on Thursday, Jan 7th,	2010
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33806">[ date ]</a>
              <a href="thread.html#33806">[ thread ]</a>
              <a href="subject.html#33806">[ subject ]</a>
              <a href="author.html#33806">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
