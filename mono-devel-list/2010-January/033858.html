<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] New Language Integration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20New%20Language%20Integration&In-Reply-To=3ad759111001110937x3e738bf1n27db457aac087bab%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033856.html">
   <LINK REL="Next"  HREF="033846.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] New Language Integration</H1>
    <B>Rafael Teixeira</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20New%20Language%20Integration&In-Reply-To=3ad759111001110937x3e738bf1n27db457aac087bab%40mail.gmail.com"
       TITLE="[Mono-dev] New Language Integration">monoman at gmail.com
       </A><BR>
    <I>Mon Jan 11 13:42:05 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="033856.html">[Mono-dev] New Language Integration
</A></li>
        <LI>Next message: <A HREF="033846.html">[Mono-dev] BufferedStream.ReadByte and WriteByte are extremely	inefficient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33858">[ date ]</a>
              <a href="thread.html#33858">[ thread ]</a>
              <a href="subject.html#33858">[ subject ]</a>
              <a href="author.html#33858">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'll try to summarize it:

The Mono VM is basically the same for all the platforms supported.
There's just some IFDEFs around, mostly in the native code part, for
MacOSX, and configuration macros to enable building it for that
platform (OS plus CPU choices);

The native part of Mono, is contained in a big library (libmono), and
contains, among others,  three fundamental pieces:
1) an OS abstraction layer
2) the JIT (Just In Time) compiler that translates IL to native code on the fly
3) the GC (Garbage Collector) that manages memory allocated to hold
objects' contents.

Above this native underpinning lies the biggest part of Mono, it's
class library, which is mostly managed code written in C#, or managed
wrappers over native libraries. This part is huge I mean more than 3
million lines of C# code, taking comments out (see
<A HREF="http://www.ohloh.net/p/mono/analyses/latest">http://www.ohloh.net/p/mono/analyses/latest</A>).

Particularly for MacOSX, the P/Invoke mechanism that enables easily
wrapping native C code was used to further build integration with
Objective-C, allowing wrapping of Objective-C objects and use of its
Selectors.

MonoDevelop has also a layered design with a platform layer that tries
to abstract some OS specifics like having the Out-Of-Window-Top-Menu
in the Mac and the In-Window-Main-Menu in Linux and Windows.

If your desire is to write a new language that works in Mono, you can
almost forget to deal with MacOSX specifics, and just code against the
class library that abstracts the OS and CPU and makes your code
binary-portable both the code in your compiler as the code it
generates when compiling. That is what I recommend you to do, unless
you are trying to do an &quot;Objective-C#&quot; type of language that would try
to integrate more easily with Objective-C libraries and frameworks,
and so would be platform-specific.

Another thing not clearly stated in your questioning is if you would
like to also integrate your compiler/language in MonoDevelop, to
enable developing applications/libraries written in your language
using MonoDevelop's IDE. That is kind of another project to develop an
Addin that can be installed in MonoDevelop to support your language.
This addin can be developed with any managed language, including your
own, and can range in features from simple templating of projects and
building integration, to full code completion on editing and GTK#
designer integration.

Well know I invite your to Google Mono's and MSDN's sites on the key
subjects I outlined above, and start some new threads on the list with
some more specific questions.

Have fun,




Rafael &quot;Monoman&quot; Teixeira
---------------------------------------
&quot;To be creative means to be in love with life. You can be creative
only if you love life enough that you want to enhance its beauty, you
want to bring a little more music to it, a little more poetry to it, a
little more dance to it.&quot;
Osho



On Mon, Jan 11, 2010 at 3:37 PM, London Disney
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">disney.london at googlemail.com</A>&gt; wrote:
&gt;<i> @ Rafael
</I>&gt;<i>
</I>&gt;<i> Thanks for the information. It was very useful indeed.
</I>&gt;<i>
</I>&gt;<i> I'll need to learn about the IL, which I think I can find lots of
</I>&gt;<i> resources out there.
</I>&gt;<i>
</I>&gt;<i> But I also like to understand, a bit more, how the Mono VM for
</I>&gt;<i> MacOSX works; could you show me what resources are good please?
</I>&gt;<i> The Mono Hackers page on the wiki is very old...
</I>&gt;<i>
</I>&gt;<i> I can start building the VM but then that doesnt give me much
</I>&gt;<i> information about the design ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, Jan 11, 2010 at 4:34 PM, Rafael Teixeira &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monoman at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi London,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> First answering your latest question: Yes, Monodevelop is mostly written
</I>&gt;&gt;<i> in C#.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Back to what I could understand as your main question:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To write a compiler for a new language that will run on Mono/,NET, you
</I>&gt;&gt;<i> can:
</I>&gt;&gt;<i> -1- Write it in C#, or another Managed Language. The main advantage
</I>&gt;&gt;<i> here is to have access to libraries that already do the hard work of
</I>&gt;&gt;<i> generating the binaries (IL code) that your compiler should produce.
</I>&gt;&gt;<i> Additionally if you choose C#, you can look at some good compilers
</I>&gt;&gt;<i> already written with like Mono's own C# compiler (mcs) or Boo's
</I>&gt;&gt;<i> compiler (booc).
</I>&gt;&gt;<i> -2- Write it with some non-managed but well supported language, like
</I>&gt;&gt;<i> C/C++/Objective-C/Java. It is quite harder to generate managed-code
</I>&gt;&gt;<i> binaries this way.
</I>&gt;&gt;<i> -3- Write it with your own language (that was what we at Mono did with
</I>&gt;&gt;<i> our C# compiler), but that mandates that you have some other compiler
</I>&gt;&gt;<i> for your language available to &quot;bootstrap&quot; the process (we used MS's
</I>&gt;&gt;<i> csc in Windows until the point that mcs could compile itself at which
</I>&gt;&gt;<i> point we switched to use a previous stable version of mcs to build the
</I>&gt;&gt;<i> newer versions).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For a totally new language, you probably could use a mix of 1 and 3:
</I>&gt;&gt;<i> build a minimal compiler in some stable language and them use it to
</I>&gt;&gt;<i> build a compiler in your own new language. That was the intent with
</I>&gt;&gt;<i> Boo, but AFAIK Boo devs could not find time yet to migrate the
</I>&gt;&gt;<i> compiler from C# to Boo, itself.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Another take on an educational project, you could use Boo
</I>&gt;&gt;<i> extensibility features to cook a derived-tailored-improved language
</I>&gt;&gt;<i> (Boo makes it easy to write DSLs Domain Specific Languages).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hope it helps,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Rafael &quot;Monoman&quot; Teixeira
</I>&gt;&gt;<i> ---------------------------------------
</I>&gt;&gt;<i> &quot;To be creative means to be in love with life. You can be creative
</I>&gt;&gt;<i> only if you love life enough that you want to enhance its beauty, you
</I>&gt;&gt;<i> want to bring a little more music to it, a little more poetry to it, a
</I>&gt;&gt;<i> little more dance to it.&quot;
</I>&gt;&gt;<i> Osho
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Mon, Jan 11, 2010 at 7:56 AM, London Disney
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">disney.london at googlemail.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; That thread has lots of useful information actually but I might
</I>&gt;&gt;<i> &gt; have confused you. We use Mono/C# to make addins don't we?
</I>&gt;&gt;<i> &gt; I like to go a bit deeper to C/C++/ObjC level in MacOSX.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; What I was asking in my first email was something mentioned
</I>&gt;&gt;<i> &gt; in this page:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; <A HREF="http://www.mono-project.com/Contributing">http://www.mono-project.com/Contributing</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; at the end it says &quot;The educational way is an interesting one...&quot;.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I was looking for an &quot;educational&quot; project and so my question
</I>&gt;&gt;<i> &gt; was if you could show me a road map to get started on something
</I>&gt;&gt;<i> &gt; like that.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I am interested in &quot;a compiler for a new language&quot; but
</I>&gt;&gt;<i> &gt; &quot;Mono VM extensions in C&quot; or
</I>&gt;&gt;<i> &gt; &quot;improving Mono performance&quot; are also very educational...
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Let me&#160;put it this way: How did you write C# itself before it existed ?
</I>&gt;&gt;<i> &gt; That's what I like to learn.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I guess my source of confusion is that MonoDevelop is written
</I>&gt;&gt;<i> &gt; entirely or mostly in C# ? Is that right ?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; On Mon, Jan 11, 2010 at 5:34 AM, Michael Hutchinson
</I>&gt;&gt;<i> &gt; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">m.j.hutchinson at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; On Sun, Jan 10, 2010 at 7:47 PM, London Disney
</I>&gt;&gt;<i> &gt;&gt; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">disney.london at googlemail.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt;&gt; &gt; @Michael
</I>&gt;&gt;<i> &gt;&gt; &gt; Hi
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; I'm not intending to be a Mono user. Getting involved with Mono
</I>&gt;&gt;<i> &gt;&gt; &gt; and MonoDevelop under MacOSX is what I am after.
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; I chose implementing a front-end because it can get me involved
</I>&gt;&gt;<i> &gt;&gt; &gt; a lot -- or may be I'm wrong? This can, say, tell me how to alter
</I>&gt;&gt;<i> &gt;&gt; &gt; some part of the implementation to suit my needs.
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; So do you have a better suggestion ?
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Just to clarify, do you mean a MonoDevelop addin as a frontend for an
</I>&gt;&gt;<i> &gt;&gt; existing language, or a new compiler?
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; If the former, you may find
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/pipermail/monodevelop-list/2010-January/011003.html">http://lists.ximian.com/pipermail/monodevelop-list/2010-January/011003.html</A>
</I>&gt;&gt;<i> &gt;&gt; useful (and the preceding thread on the MonoDevelop list).
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; --
</I>&gt;&gt;<i> &gt;&gt; Michael Hutchinson
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://mjhutchinson.com">http://mjhutchinson.com</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; Mono-devel-list mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033856.html">[Mono-dev] New Language Integration
</A></li>
	<LI>Next message: <A HREF="033846.html">[Mono-dev] BufferedStream.ReadByte and WriteByte are extremely	inefficient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33858">[ date ]</a>
              <a href="thread.html#33858">[ thread ]</a>
              <a href="subject.html#33858">[ subject ]</a>
              <a href="author.html#33858">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
