<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: Dynamically changing classes?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20Dynamically%20changing%20classes%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002153.html">
   <LINK REL="Next"  HREF="002155.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: Dynamically changing classes?</H1>
    <B>Thomas Sondergaard</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20Dynamically%20changing%20classes%3F&In-Reply-To="
       TITLE="[Mono-devel-list] Re: Dynamically changing classes?">thomas at thomassondergaard.com
       </A><BR>
    <I>Wed Sep 24 19:24:01 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002153.html">[Mono-devel-list] Dynamically changing classes?
</A></li>
        <LI>Next message: <A HREF="002155.html">[Mono-devel-list] Re: Dynamically changing classes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2154">[ date ]</a>
              <a href="thread.html#2154">[ thread ]</a>
              <a href="subject.html#2154">[ subject ]</a>
              <a href="author.html#2154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Problem: it doesn't handle updating existing class instances.  Thus,
</I>&gt;<i> this may be unsuitable for some situations.
</I>
Yes it is a trick and it is nasty. I think it is fair to conclude that the
current class model in .net is not friendly to the idea of classes that
change their interface and/or implementation at runtime.


&gt;<i> Why add a new CIL instruction, when you can just do it yourself?
</I>&gt;<i>
</I>&gt;<i> interface IDynamicLanguage {
</I>&gt;<i> public object Invoke (string message, object[] args);
</I>&gt;<i> }
</I>
That looks oddly familiar. This is from my ScriptingExtensions project,
which I use for rubydotnet, my ruby/.net language binding.

namespace ScriptingExtensions {

    public interface IObject {

        object send(string message, object[] args);

    }

    public interface IProc {

        object call(object[] args);

    }

}

&gt;<i> Just have all your internal classes implement IDynamicLanguage, and you
</I>&gt;<i> get the same functionality as &quot;send_msg&quot;.  There's no particular reason
</I>&gt;<i> why this has to be in CIL, as opposed to doing it yourself (above).
</I>
Not really, by implementing this 'in .net' not as .net you are bound to
execute a lot slower. Imagine compiling this ruby function to .net

class ACLass
    def invokeSomeMethodsOnArg(arg)
        arg.doThis
        arg.doThat
        arg.AlsoThis
    end
end

Ruby is dynamically type so arg can be any type. This means that the only
way to invoke doThis, doThat and AlsoThis is using the reflection API, e.g.
using arg.GetType().InvokeMember(&quot;doThis&quot;, ....). This will be very slow.
Not only because of the services rendered I think, but because of the layers
of abstraction, which could be done away with if the CLR supported the
concept. The abomination known as method overloading adds complexity to this
issue, unfortunately.

&gt;<i> The ways outlined above would work, but they're not necessarily the
</I>&gt;<i> *best* way to do it.  I'm not sure what the best way is, and I'm not
</I>&gt;<i> sure anyone else knows either, for that matter.
</I>&gt;<i>
</I>&gt;<i> Thus, research and experimentation are required. :-)
</I>
So true.

Thomas




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002153.html">[Mono-devel-list] Dynamically changing classes?
</A></li>
	<LI>Next message: <A HREF="002155.html">[Mono-devel-list] Re: Dynamically changing classes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2154">[ date ]</a>
              <a href="thread.html#2154">[ thread ]</a>
              <a href="subject.html#2154">[ subject ]</a>
              <a href="author.html#2154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
