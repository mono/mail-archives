<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Patch for timezone handling in icall.c
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patch%20for%20timezone%20handling%20in%20icall.c&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002023.html">
   <LINK REL="Next"  HREF="002025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Patch for timezone handling in icall.c</H1>
    <B>Bernie Solomon</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patch%20for%20timezone%20handling%20in%20icall.c&In-Reply-To="
       TITLE="[Mono-devel-list] Patch for timezone handling in icall.c">bernard at ugsolutions.com
       </A><BR>
    <I>Mon Sep  8 16:34:24 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002023.html">[Mono-devel-list] Mono on win32 as a mingw binary
</A></li>
        <LI>Next message: <A HREF="002025.html">[Mono-devel-list] GC error when compiling CVS gtk-sharp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2024">[ date ]</a>
              <a href="thread.html#2024">[ thread ]</a>
              <a href="subject.html#2024">[ subject ]</a>
              <a href="author.html#2024">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I attach a patch to timezone handling for machines that don't have
tm_gmtoff.
The old use of timezone wasn't correct and more importantly didn't account
of the time at which the offset was requested.

I was also comparing against Windows behaviour and found problems there
too so this also should fix the Windows implementation as well.
GetNow used to return local time and not UTC time and also
didn't handle the result of GetTimeZoneInformation correctly. Since I have
only tested in one time zone I don't know if this can actually return
absolute dates for start/end daylight time - but this handles the
&quot;first thursday in month&quot; type date which is what is returned for me and
should work if absolute dates are returned as well.

Bernie Solomon
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: icall.diff.txt
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20030908/49734dd1/attachment.txt">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20030908/49734dd1/attachment.txt</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002023.html">[Mono-devel-list] Mono on win32 as a mingw binary
</A></li>
	<LI>Next message: <A HREF="002025.html">[Mono-devel-list] GC error when compiling CVS gtk-sharp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2024">[ date ]</a>
              <a href="thread.html#2024">[ thread ]</a>
              <a href="subject.html#2024">[ subject ]</a>
              <a href="author.html#2024">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
