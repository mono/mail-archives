<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Unexpected compiler errors when using &quot;as&quot; keyword
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Unexpected%20compiler%20errors%20when%20using%20%22as%22%20keyword&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028807.html">
   <LINK REL="Next"  HREF="028820.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Unexpected compiler errors when using &quot;as&quot; keyword</H1>
    <B>Aaron Colwell</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Unexpected%20compiler%20errors%20when%20using%20%22as%22%20keyword&In-Reply-To="
       TITLE="[Mono-dev] Unexpected compiler errors when using &quot;as&quot; keyword">acolwell at shelfari.com
       </A><BR>
    <I>Tue Aug 12 15:23:52 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028807.html">[Mono-dev] Broken build -- x86_64
</A></li>
        <LI>Next message: <A HREF="028820.html">[Mono-dev] Unexpected compiler errors when using &quot;as&quot; keyword
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28819">[ date ]</a>
              <a href="thread.html#28819">[ thread ]</a>
              <a href="subject.html#28819">[ subject ]</a>
              <a href="author.html#28819">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've been trying to port some C# code to mono and encountered a difference
with
how gmcs &amp; Visual Studio handle the &quot;as&quot; keyword. The code below is a simple
repro
case that demonstrates the problem.

using System;

namespace AsStringProblem
{
 class MainClass
 {
  public static void Main(string[] args)
  {
   object o = &quot;Hello World&quot;;
   Console.WriteLine(o as string  + &quot;blah&quot;);   // A. Error in Mono
   Console.WriteLine((o as string)  + &quot;blah&quot;); // B. Ok
   Console.WriteLine(&quot;blah&quot; + o as string);    // C. Ok

  }
 }
}

It may seem like an odd case, but we typically use constructs like this when
constructing strings from DataRow fields.

I've spent some quality time looking at parser output and the grammar and
I'm
having a hard time understanding why C works, but A doesn't. I'm also
confused
why C works at all since my interpretation of the grammar seems to imply
that
only putting &quot;as&quot; clauses in parenthesis will make them compatible with an
additive-expression.

So here are my questions:
1. Is this a known issue and is someone working on it?
2. Is my interpretation of the grammar(as specified in cs-parser.jay and/or
in the ECMA-334 spec) correct
   and A &amp; C shouldn't work ?
3. Does anyone have suggestions on how I can get A to work. (I have a lot of
instances of these and it would
   make me sad to have to put () around all them).

Any help would be greatly appreciated.

Thanks,
Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080812/d8539442/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080812/d8539442/attachment-0001.html</A> 
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028807.html">[Mono-dev] Broken build -- x86_64
</A></li>
	<LI>Next message: <A HREF="028820.html">[Mono-dev] Unexpected compiler errors when using &quot;as&quot; keyword
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28819">[ date ]</a>
              <a href="thread.html#28819">[ thread ]</a>
              <a href="subject.html#28819">[ subject ]</a>
              <a href="author.html#28819">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
