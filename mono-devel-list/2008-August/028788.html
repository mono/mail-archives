<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] ASP.NET MVC and Mono problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20ASP.NET%20MVC%20and%20Mono%20problems&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028778.html">
   <LINK REL="Next"  HREF="028789.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] ASP.NET MVC and Mono problems</H1>
    <B>Nik Radford</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20ASP.NET%20MVC%20and%20Mono%20problems&In-Reply-To="
       TITLE="[Mono-dev] ASP.NET MVC and Mono problems">nik at terminaldischarge.net
       </A><BR>
    <I>Sun Aug 10 11:38:16 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028778.html">[Mono-dev] shared library wrapper question
</A></li>
        <LI>Next message: <A HREF="028789.html">[Mono-dev] ASP.NET MVC and Mono problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28788">[ date ]</a>
              <a href="thread.html#28788">[ thread ]</a>
              <a href="subject.html#28788">[ subject ]</a>
              <a href="author.html#28788">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi guys,
    I've just come up against something thats driving me a bit batty, 
and I was hoping someone might have some insight.

Basically I've created a ASP.NET MVC application with intentions of 
running it on Mono. The application also uses nhibernate 1.2 and 
spring.net, and I'm using pre-compiled &quot;published&quot; site under mono

I'm using the SVN version of mono (updated today), which, runs the MVC 
template project fine, however when running my project I get the 
following error :-


  Server Error in '/' Application

------------------------------------------------------------------------


    /Compilation Error/

*Description: *Error compiling a resource required to service this 
request. Review your source file and modify it to fix this error.

*Compiler Error Message: *|: ** 
(/usr/local/lib/mono/2.0/gmcs.exe:17151): WARNING **: The following 
assembly referenced from 
/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/cc1f1df5/42ce9f96_8ed18263_00000001/MvcContrib.dll 
could not be loaded:|

~/Global.asax
Show Detailed Compiler Output:

||<i>
</I>
gmcs /target:library /debug+ /optimize- /warn:0 /out:&quot;/tmp/apache-temp-aspnet-0/ec569924/App_global.asax.46df7bb.dll&quot; /r:&quot;/usr/local/lib/mono/gac/System/2.0.0.0__b77a5c561934e089/System.dll&quot; /r:&quot;/usr/local/lib/mono/gac/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll&quot; /r:&quot;/usr/local/lib/mono/gac/System.Data/2.0.0.0__b77a5c561934e089/System.Data.dll&quot; /r:&quot;/usr/local/lib/mono/gac/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll&quot; /r:&quot;/usr/local/lib/mono/gac/System.Web/2.0.0.0__b03f5f7f11d50a3a/System.Web.dll&quot; /r:&quot;/usr/local/lib/mono/gac/System.Web.Services/2.0.0.0__b03f5f7f11d50a3a/System.Web.Services.dll&quot; /r:&quot;/usr/local/lib/mono/gac/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll&quot; /r:&quot;/usr/local/lib/mono/gac/System.Core/3.5.0.0__b77a5c561934e089/System.Core.dll&quot; /r:&quot;/usr/local/lib/mono/gac/System.Xml.Linq/3.5.0.0__b77a5c561934e089/System.Xml.Linq.dll&quot; /r:&quot;/usr/local/lib/mono/gac/System.Data.Linq/3.5.0.0__b77a5c561934e089/System.Data.Linq.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/cde6c21b/43374078_8ed18263_00000001/Castle.DynamicProxy.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/8d842e52/0355ac31_8ed18263_00000001/Common.Logging.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/218bab8f/af5a29ec_8ed18263_00000001/Iesi.Collections.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/0af3bf72/84223d11_8ed18263_00000001/MvcContrib.Spring.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/cc1f1df5/42ce9f96_8ed18263_00000001/MvcContrib.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/04e2c4cc/8a3346af_8ed18263_00000001/MySql.Data.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/eedf2b9a/600ea9f9_8ed18263_00000001/NHibernate.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/a19d874f/2f4c052c_8ed18263_00000001/Newtonsoft.Json.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/487d5ac1/c6acd8a2_8ed18263_00000001/NikRadfordBlog.Controllers.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/4638a0a1/c8e922c2_8ed18263_00000001/NikRadfordBlog.Core.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/ccb3e32c/4262614f_8ed18263_00000001/NikRadfordBlog.Data.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/22ba833e/ac6b015d_8ed18263_00000001/NikRadfordBlog.Web.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/e8f94a39/6628c85a_8ed18263_00000001/ProjectBase.Core.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/6f748cc4/e1a50ea7_8ed18263_00000001/ProjectBase.Data.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/06f246a6/8823c4c5_8ed18263_00000001/ProjectBase.Web.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/8ed13017/0000b274_8ed18263_00000001/Spring.Aop.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/216f40d6/afbec2b5_8ed18263_00000001/Spring.Core.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/7e7394de/f0a216bd_8ed18263_00000001/Spring.Data.NHibernate12.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/a7ea8361/293b0102_8ed18263_00000001/Spring.Data.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/08c48869/86150a0a_8ed18263_00000001/Spring.Web.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/748111dc/fa5093bf_8ed18263_00000001/System.Web.Abstractions.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/133f36d7/9deeb4b4_8ed18263_00000001/System.Web.Mvc.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/7b1a3e43/f5cbbc20_8ed18263_00000001/System.Web.Routing.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/4338d70d/cde9556e_8ed18263_00000001/antlr.runtime.dll&quot; /r:&quot;/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/eb593da3/6588bfc0_8ed18263_00000001/log4net.dll&quot;   -- &quot;/tmp/apache-temp-aspnet-0/ec569924/App_global.asax.46df7bb_0.cs&quot; 


** (/usr/local/lib/mono/2.0/gmcs.exe:17151): WARNING **: The following assembly referenced from /tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/cc1f1df5/42ce9f96_8ed18263_00000001/MvcContrib.dll could not be loaded:
     Assembly:   System.Web.Mvc    (assemblyref_index=0)
     Version:    1.0.0.0
     Public Key: 31bf3856ad364e35
The assembly was not found in the Global Assembly Cache, a path listed in the MONO_PATH environment variable, or in the location of the executing assembly (/tmp/apache-temp-aspnet-0/ec569924/assembly/shadow/cc1f1df5/42ce9f96_8ed18263_00000001).


** (/usr/local/lib/mono/2.0/gmcs.exe:17151): WARNING **: Could not load file or assembly 'System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies.

** (/usr/local/lib/mono/2.0/gmcs.exe:17151): WARNING **: Could not load file or assembly 'System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies.
Stacktrace:

  at (wrapper managed-to-native) System.Reflection.Assembly.GetTypes (bool) &lt;0x00004&gt;
  at (wrapper managed-to-native) System.Reflection.Assembly.GetTypes (bool) &lt;0xffffffff&gt;
  at System.Reflection.Assembly.GetExportedTypes () &lt;0x00012&gt;
  at Mono.CSharp.RootNamespace.ComputeNamespaces (System.Reflection.Assembly) &lt;0x00136&gt;
  at Mono.CSharp.GlobalRootNamespace.AddAssemblyReference (System.Reflection.Assembly) &lt;0x00095&gt;
  at Mono.CSharp.Driver.LoadAssembly (string,string,bool) &lt;0x00450&gt;
  at Mono.CSharp.Driver.LoadAssembly (string,bool) &lt;0x00011&gt;
  at Mono.CSharp.Driver.LoadReferences () &lt;0x001bf&gt;
  at Mono.CSharp.Driver.Compile () &lt;0x000eb&gt;
  at Mono.CSharp.Driver.Main (string[]) &lt;0x0005a&gt;
  at (wrapper runtime-invoke) Mono.CSharp.Driver.runtime_invoke_int_string[] (object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

	/usr/local/bin/mono [0x806e4da]
	/usr/local/bin/mono [0x8089901]
	[0xb7f6c440]
	/usr/local/bin/mono [0x80ba0c6]
	/usr/local/bin/mono [0x80bb21f]
	/usr/local/bin/mono [0x80bce3b]
	/usr/local/bin/mono(mono_class_init+0x332) [0x80bd1d2]
	/usr/local/bin/mono(mono_type_get_object+0xd2) [0x8107d22]
	/usr/local/bin/mono [0x8118671]
	/usr/local/bin/mono [0x811c444]
	[0xb7056017]
	[0xb7055fe3]
	[0xb70550c7]
	[0xb7054f76]
	[0xb70538f1]
	[0xb705349a]
	[0xb70531c0]
	[0xb78f89c4]
	[0xb78f043b]
	[0xb78ec1cd]
	/usr/local/bin/mono(mono_runtime_exec_main+0x160) [0x812cba0]
	/usr/local/bin/mono(mono_runtime_run_main+0x173) [0x812e063]
	/usr/local/bin/mono(mono_main+0xe35) [0x805c295]
	/usr/local/bin/mono [0x805aec2]
	/lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe0) [0xb7d0d450]
	/usr/local/bin/mono [0x805ae31]

Debug info from gdb:


=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

      

------------------------------------------------------------------------
*Version information: * Mono Version: 2.0.50727.1433; ASP.NET Version: 
2.0.50727.1433


Now, System.Web.Mvc is within the bin folder of my website as this 'ls' 
output shows:-

antlr.runtime.dll       
MvcContrib.Spring.dll          
NikRadfordBlog.Core.dll 
ProjectBase.Core.dll 
Spring.Aop.dll               
System.Web.Mvc.dll
Castle.DynamicProxy.dll 
MySql.Data.dll                 
NikRadfordBlog.Core.pdb 
ProjectBase.Core.pdb 
Spring.Core.dll              
System.Web.Routing.dll
Common.Logging.dll      
Newtonsoft.Json.dll            
NikRadfordBlog.Data.dll 
ProjectBase.Data.dll 
Spring.Data.dll
Iesi.Collections.dll    
NHibernate.dll                 
NikRadfordBlog.Data.pdb 
ProjectBase.Data.pdb 
Spring.Data.NHibernate12.dll
log4net.dll             
NikRadfordBlog.Controllers.dll 
NikRadfordBlog.Web.dll  
ProjectBase.Web.dll  
Spring.Web.dll
MvcContrib.dll          
NikRadfordBlog.Controllers.pdb 
NikRadfordBlog.Web.pdb  
ProjectBase.Web.pdb  
System.Web.Abstractions.dll

Heres my virtual host setup in Apache 2 (this same setup works for the 
MVC template project)

&lt;VirtualHost *:80&gt;
        ServerName blog.nikradford.co.uk
        ServerAdmin <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">nik at terminaldischarge.net</A>
        DocumentRoot /home/nradford/WebSites/blog.nikradford.co.uk
        DirectoryIndex Default.aspx

        MonoAutoApplication disabled
        SetHandler mono
        MonoServerPath /usr/local/bin/mod-mono-server2
        Monoapplications &quot;/:/home/nradford/WebSites/blog.nikradford.co.uk&quot;

        &lt;Directory /home/nradford/WebSites/blog.nikradford.co.uk&gt;
                Order allow,deny
                Allow from all
                Deny from none
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;

Any ideas anyone?

Thanks in advance,

Nik.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080810/3fc75e0a/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080810/3fc75e0a/attachment-0001.html</A> 
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028778.html">[Mono-dev] shared library wrapper question
</A></li>
	<LI>Next message: <A HREF="028789.html">[Mono-dev] ASP.NET MVC and Mono problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28788">[ date ]</a>
              <a href="thread.html#28788">[ thread ]</a>
              <a href="subject.html#28788">[ subject ]</a>
              <a href="author.html#28788">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
