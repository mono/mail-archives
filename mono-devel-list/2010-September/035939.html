<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] libgdiplus drawing performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20libgdiplus%20drawing%20performance&In-Reply-To=1285489991348-1537624.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035954.html">
   <LINK REL="Next"  HREF="035946.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] libgdiplus drawing performance</H1>
    <B>oken</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20libgdiplus%20drawing%20performance&In-Reply-To=1285489991348-1537624.post%40n4.nabble.com"
       TITLE="[Mono-dev] libgdiplus drawing performance">okenjian at 163.com
       </A><BR>
    <I>Sun Sep 26 04:33:11 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="035954.html">[Mono-dev] Process SIGSEGV on Mono 2.8p6
</A></li>
        <LI>Next message: <A HREF="035946.html">[Mono-dev] libgdiplus drawing performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35939">[ date ]</a>
              <a href="thread.html#35939">[ thread ]</a>
              <a href="subject.html#35939">[ subject ]</a>
              <a href="author.html#35939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
#define VS(fun) \
do{\
	GpStatus status = fun; \
	if (Ok != status) \
	{\
		assert(!&quot;invalid status&quot;);\
		return status;\
	}\
}while(0)
int width = 1000;
	int height = 1000;
	GpStatus status = Ok;
	BYTE *scan0 = NULL;

	VS(GdipCreateBitmapFromScan0(width, height, width * 4,
PixelFormat32bppARGB, scan0, &amp;m_bmp));
	VS(GdipGetImageGraphicsContext(m_bmp, &amp;m_pGraphics));
	VS(GdipGraphicsClear(m_pGraphics, 0xffffffff));

	VS(GdipCreatePen1(0xa0f0a000, (REAL)2.0, UnitPixel, &amp;m_pPen));
	VS(GdipCreateSolidFill(0xa00000ff, &amp;m_pSolidBrush));

VS(GdipSetPenColor(m_pPen, 0xff0000ff));

	for (int i = 0; i &lt; nTimes ; i++)
	{
		VS(GdipDrawLine(m_pGraphics, m_pPen, 100, 100, 500, 500));
	}

I also find that libgdiplus's performance is slow.
In my example, drawing 1000 lines takes me 5,000ms!
I find it that most of the time is consumed by &quot;cairo_stroke&quot; in
stroke_graphics_with_pen (GpGraphics *graphics, GpPen *pen).
I am calling libgdiplus's API under wine!
How to improve the performance?
-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/libgdiplus-drawing-performance-tp1537623p2714158.html">http://mono.1490590.n4.nabble.com/libgdiplus-drawing-performance-tp1537623p2714158.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035954.html">[Mono-dev] Process SIGSEGV on Mono 2.8p6
</A></li>
	<LI>Next message: <A HREF="035946.html">[Mono-dev] libgdiplus drawing performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35939">[ date ]</a>
              <a href="thread.html#35939">[ thread ]</a>
              <a href="subject.html#35939">[ subject ]</a>
              <a href="author.html#35939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
