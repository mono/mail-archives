<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Process SIGSEGV on Mono 2.8p6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Process%20SIGSEGV%20on%20Mono%202.8p6&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035938.html">
   <LINK REL="Next"  HREF="035937.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Process SIGSEGV on Mono 2.8p6</H1>
    <B>Chuck Esterbrook</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Process%20SIGSEGV%20on%20Mono%202.8p6&In-Reply-To="
       TITLE="[Mono-dev] Process SIGSEGV on Mono 2.8p6">chuck.esterbrook at gmail.com
       </A><BR>
    <I>Sat Sep 25 13:09:15 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="035938.html">[Mono-dev] Preview builds ignoring config parameters
</A></li>
        <LI>Next message: <A HREF="035937.html">[Mono-dev] Process SIGSEGV on Mono 2.8p6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35936">[ date ]</a>
              <a href="thread.html#35936">[ thread ]</a>
              <a href="subject.html#35936">[ subject ]</a>
              <a href="author.html#35936">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I took Mono 2.8 preview 6 for Mac for a test drive on Mac OS X 10.6.4.
I have a .NET/Mono compiler that is self-hosting, meaning that it
compiles itself, like so:

$ cd cobra-workspace
$ mono Snapshot/cobra.exe -c -ert:yes cobra.cobra -files:files-to-compile.text

Which works fine under Mono 2.4 and 2.6, but under 2.8p6 gives:

Stacktrace:

  at (wrapper managed-to-native)
System.Diagnostics.Process.Process_free_internal
(System.Diagnostics.Process*,intptr) &lt;0x00003&gt;
  at (wrapper managed-to-native)
System.Diagnostics.Process.Process_free_internal
(System.Diagnostics.Process*,intptr) &lt;0x00003&gt;
  at System.Diagnostics.Process.Dispose (bool) &lt;0x000ca&gt;
  at System.Diagnostics.Process.Finalize () &lt;0x00013&gt;
  at (wrapper runtime-invoke)
object.runtime_invoke_virtual_void__this__
(object,intptr,intptr,intptr) &lt;0x0003d&gt;

Native stacktrace:

	0   mono                                0x000c8cb6
mono_handle_native_sigsegv + 343
	1   mono                                0x0001059a
mono_sigsegv_signal_handler + 306
	2   libSystem.B.dylib                   0x982f71fb _sigtramp + 43
	3   ???                                 0xffffffff 0x0 + 4294967295
	4   mono                                0x0024319a _wapi_handle_unref + 159
	5   mono                                0x00243a17 CloseHandle + 93
	6   mono                                0x001e79d0
ves_icall_System_Diagnostics_Process_Process_free_internal + 17
	7   ???                                 0x01ec80cf 0x0 + 32276687
	8   ???                                 0x01ec7fdb 0x0 + 32276443
	9   ???                                 0x01ec7d7c 0x0 + 32275836
	10  ???                                 0x01ec7b8e 0x0 + 32275342
	11  mono                                0x00170182 mono_gc_run_finalize + 941
	12  mono                                0x00282dd8 GC_invoke_finalizers + 161
	13  mono                                0x00140961
mono_gc_invoke_finalizers + 20
	14  mono                                0x00171de0 finalizer_thread + 420
	15  mono                                0x0021da40 start_wrapper + 600
	16  mono                                0x0025b65f thread_start_routine + 194
	17  mono                                0x0028c833 GC_start_routine + 107
	18  libSystem.B.dylib                   0x982be81d _pthread_start + 345
	19  libSystem.B.dylib                   0x982be6a2 thread_start + 34

Debug info from gdb:

Phase: Reading libraries
Reading assembly:  mscorlib, Version=2.0.0.0, Culture=neutral,
PublicKeyToken=b77a5c561934e089
              at:
/Library/Frameworks/Mono.framework/Versions/2.8/lib/mono/2.0/mscorlib.dll
  Reading type RegistryKey in namespace &quot;Microsoft.Win32&quot;
/tmp/mono-gdb-commands.pb1OMT:1: Error in sourced command file:
unable to debug self

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================

Abort trap

# end of output

My environment looks fairly normal:

$  env | grep -i mono
MONO_ROOT=/Library/Frameworks/Mono.framework/Versions/Current
PATH=.:~/bin:/usr/local/bin:/usr/local/mysql/bin:/Library/Frameworks/Python.framework/Versions/2.5/bin:/Library/Frameworks/Python.framework/Versions/Current/bin:/Library/Frameworks/Mono.framework/Versions/Current/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/opt/subversion/bin
$  l /Library/Frameworks/Mono.framework/Versions/Current
lrwxr-xr-x  1 root  admin  3 Sep 25 09:56
/Library/Frameworks/Mono.framework/Versions/Current@ -&gt; 2.8

I'll keep digging and see if I can reproduce in smaller program. In
the mean time, has anyone seen this or know what might be wrong?


-Chuck
-- 
<A HREF="http://charles-esterbrook.com/">http://charles-esterbrook.com/</A>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035938.html">[Mono-dev] Preview builds ignoring config parameters
</A></li>
	<LI>Next message: <A HREF="035937.html">[Mono-dev] Process SIGSEGV on Mono 2.8p6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35936">[ date ]</a>
              <a href="thread.html#35936">[ thread ]</a>
              <a href="subject.html#35936">[ subject ]</a>
              <a href="author.html#35936">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
