<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mono-Interop with Native Libraries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono-Interop%20with%20Native%20Libraries&In-Reply-To=253797.6935.qm%40web120504.mail.ne1.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035815.html">
   <LINK REL="Next"  HREF="035823.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mono-Interop with Native Libraries</H1>
    <B>Rafael Teixeira</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono-Interop%20with%20Native%20Libraries&In-Reply-To=253797.6935.qm%40web120504.mail.ne1.yahoo.com"
       TITLE="[Mono-dev] mono-Interop with Native Libraries">monoman at gmail.com
       </A><BR>
    <I>Fri Sep  3 08:13:19 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="035815.html">[Mono-dev] mono-Interop with Native Libraries
</A></li>
        <LI>Next message: <A HREF="035823.html">[Mono-dev] mono-Interop with Native Libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35819">[ date ]</a>
              <a href="thread.html#35819">[ thread ]</a>
              <a href="subject.html#35819">[ subject ]</a>
              <a href="author.html#35819">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You can always try to &quot;massage&quot; (kind of parse) the struct as the default
marshalling will pass to your native function, if you don't direct the
process with attributes.

It comes with all types of risks, and is complex, so I *strongly recommend
that you don't go that way*.

The highest risk is that without the [StructLayout(LayoutKind.Sequential)]
the compiler is free to rearrange the order of the fields to make things as
compact as possible but obeying to the alignment requirements of
the architecture, so things vary wildly along time and across
architectures/OSes.

Hope it helps,

Rafael &quot;Monoman&quot; Teixeira
---------------------------------------
&quot;We live in a world operated by science and technology. We have also
arranged things so that almost no one understands science and technology.
This is a prescription for disaster. We might get away with it for a while,
but sooner or later this combustible mixture of ignorance and power is going
to blow up in our faces.&quot;
-Carl Sagan


On Fri, Sep 3, 2010 at 5:58 AM, marcus julius &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">marcusjls at yahoo.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I've just started reading about Interop with Native Libraries in C# and
</I>Mono, so before I started doing something I want to ask more experienced
people as a last resort.
&gt;<i>
</I>&gt;<i> I wanna send a managed class (which extends another class, has another
</I>class as a field and some methods) to unmanaged C++ side.
&gt;<i>
</I>&gt;<i> The question is, is there a way to do this without preparing the class for
</I>marshaling using something like these?
&gt;<i>
</I>&gt;<i> [StructLayout(LayoutKind.Sequential)]
</I>&gt;<i> [MarshalAs(UnmanagedType.LPWStr)]
</I>&gt;<i> etc.
</I>&gt;<i>
</I>&gt;<i> Thanks.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100903/0b30d33e/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100903/0b30d33e/attachment-0001.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035815.html">[Mono-dev] mono-Interop with Native Libraries
</A></li>
	<LI>Next message: <A HREF="035823.html">[Mono-dev] mono-Interop with Native Libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35819">[ date ]</a>
              <a href="thread.html#35819">[ thread ]</a>
              <a href="subject.html#35819">[ subject ]</a>
              <a href="author.html#35819">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
