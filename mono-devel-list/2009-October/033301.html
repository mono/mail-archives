<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [Patch] Make Boehm GC stack scanning less aggressive
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPatch%5D%20Make%20Boehm%20GC%20stack%20scanning%20less%20aggressive&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033298.html">
   <LINK REL="Next"  HREF="033314.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [Patch] Make Boehm GC stack scanning less aggressive</H1>
    <B>Dick Porter</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPatch%5D%20Make%20Boehm%20GC%20stack%20scanning%20less%20aggressive&In-Reply-To="
       TITLE="[Mono-dev] [Patch] Make Boehm GC stack scanning less aggressive">dporter at codicesoftware.com
       </A><BR>
    <I>Tue Oct 20 10:44:55 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033298.html">[Mono-dev] Override casting behavior?
</A></li>
        <LI>Next message: <A HREF="033314.html">[Mono-dev] [Patch] Make Boehm GC stack scanning less aggressive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33301">[ date ]</a>
              <a href="thread.html#33301">[ thread ]</a>
              <a href="subject.html#33301">[ subject ]</a>
              <a href="author.html#33301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all

The attached patch makes the stack marking in libgc much less
aggressive.  Instead of marking every object that happens to be pointed
to by random numbers, it uses the descriptor-based scanning function
instead.

I think this is safe for mono, as (as was pointed out to me) every
allocation has a descriptor.

It fixes the stress-test that David posted a week or two ago, and in the
real world it allows our server to free up much more memory.  It has
been tested on a production server.

Comments?

- Dick

-------------- next part --------------
A non-text attachment was scrubbed...
Name: gc-stack-diff
Type: text/x-patch
Size: 950 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20091020/56ace2c0/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20091020/56ace2c0/attachment.bin</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033298.html">[Mono-dev] Override casting behavior?
</A></li>
	<LI>Next message: <A HREF="033314.html">[Mono-dev] [Patch] Make Boehm GC stack scanning less aggressive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33301">[ date ]</a>
              <a href="thread.html#33301">[ thread ]</a>
              <a href="subject.html#33301">[ subject ]</a>
              <a href="author.html#33301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
