<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mkbundle + System.Text.GetEncoding =	NotSupportedException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mkbundle%20%2B%20System.Text.GetEncoding%20%3D%0A%09NotSupportedException&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033384.html">
   <LINK REL="Next"  HREF="033386.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mkbundle + System.Text.GetEncoding =	NotSupportedException</H1>
    <B>Alex Shulgin</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mkbundle%20%2B%20System.Text.GetEncoding%20%3D%0A%09NotSupportedException&In-Reply-To="
       TITLE="[Mono-dev] mkbundle + System.Text.GetEncoding =	NotSupportedException">alexander.shulgin at yessoftware.com
       </A><BR>
    <I>Sat Oct 31 11:27:41 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033384.html">[Mono-dev] Generics on 2.4.3 (possible regression from 2.0.1)
</A></li>
        <LI>Next message: <A HREF="033386.html">[Mono-dev] mkbundle + System.Text.GetEncoding =	NotSupportedException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33385">[ date ]</a>
              <a href="thread.html#33385">[ thread ]</a>
              <a href="subject.html#33385">[ subject ]</a>
              <a href="author.html#33385">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

In the following scenario with mono-2.4 I get &quot;CodePage XXX not 
supported&quot; when trying to run mkbundle-d test program on a 'clean' box 
(w/o mono installed):

$ cat codepage.cs
using System;
using System.Text;

namespace test {
	public static class Program {
		public static void Main() {
			Console.WriteLine(&quot;Hello, world.&quot;);

			Encoding enc = Encoding.GetEncoding(1251);
			Console.WriteLine(&quot;enc: {0}&quot;, enc);
		}
	}
}

$ gmcs codepage.cs

$ mkbundle2 --deps --static codepage.exe -o codepage
OS is: Linux
Note that statically linking the LGPL Mono runtime has more licensing 
restrictions than dynamically linking.
See <A HREF="http://www.mono-project.com/Licensing">http://www.mono-project.com/Licensing</A> for details on licensing.
Sources: 1 Auto-dependencies: True
    embedding: /home/alexs/tmp/mkbundle/codepage.exe
    embedding: /usr/local/lib/mono/2.0/mscorlib.dll
Compiling:
as -o temp.o temp.s
cc -o codepage -Wall `pkg-config --cflags mono` temp.c  `pkg-config 
--libs-only-L mono` -Wl,-Bstatic -lmono -Wl,-Bdynamic `pkg-config 
--libs-only-l mono | sed -e &quot;s/\-lmono //&quot;` temp.o
Done

$ ./codepage
Hello, world.
enc: I18N.Other.CP1251

This is OK.  Now I want to emulate 'clean' box by removing all lib files 
(I have mono in /usr/local):

$ ( cd /usr/local; sudo mv lib lib~ )

$ ./codepage
Hello, world.

Unhandled Exception: System.NotSupportedException: CodePage 1251 not 
supported
   at System.Text.Encoding.GetEncoding (Int32 codepage) [0x00000]
   at test.Program.Main () [0x00000]

So, I've identified that cp1251 lives in I18N.Other.dll.  How do I make 
mkbundle package that assembly?

I've tried adding -r:I18N or -r:I18N.Other when compiling with gmcs, but 
it mkbundle still doesn't pick it up and the end result is the same.

Help please!

--
Alex
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033384.html">[Mono-dev] Generics on 2.4.3 (possible regression from 2.0.1)
</A></li>
	<LI>Next message: <A HREF="033386.html">[Mono-dev] mkbundle + System.Text.GetEncoding =	NotSupportedException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33385">[ date ]</a>
              <a href="thread.html#33385">[ thread ]</a>
              <a href="subject.html#33385">[ subject ]</a>
              <a href="author.html#33385">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
