<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Behavior change in XmlWriterSettings/XmlTextWriter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Behavior%20change%20in%20XmlWriterSettings/XmlTextWriter&In-Reply-To=%3C560A19AE.3000707%40veritas-vos-liberabit.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043281.html">
   <LINK REL="Next"  HREF="043283.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Behavior change in XmlWriterSettings/XmlTextWriter</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Behavior%20change%20in%20XmlWriterSettings/XmlTextWriter&In-Reply-To=%3C560A19AE.3000707%40veritas-vos-liberabit.com%3E"
       TITLE="[Mono-dev] Behavior change in XmlWriterSettings/XmlTextWriter">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Tue Sep 29 04:55:10 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="043281.html">[Mono-dev] Behavior change in XmlWriterSettings/XmlTextWriter
</A></li>
        <LI>Next message: <A HREF="043283.html">[Mono-dev] Behavior change in XmlWriterSettings/XmlTextWriter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43282">[ date ]</a>
              <a href="thread.html#43282">[ thread ]</a>
              <a href="subject.html#43282">[ subject ]</a>
              <a href="author.html#43282">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You have no reason to be afraid of asking Microsoft to change the
behavior. I cannot find any justification to just ask Mono to change
things against Microsoft code behavior without asking Microsoft about it.

Atsushi Eno

On 2015&#24180;09&#26376;29&#26085; 01:15, Martin Potter wrote:
&gt;<i> I wasn&#8217;t aware that the MSDN .NET documentation was viewed as being
</I>&gt;<i> platform specific documentation.
</I>&gt;<i> 
</I>&gt;<i> I am not sure how this is a Microsoft bug so much as an issue with the
</I>&gt;<i> fact they did not consider it being run on other platforms. Given that
</I>&gt;<i> Mono is cross-platform, whereas Microsoft&#8217;s implementation is not, and
</I>&gt;<i> Mono has made other changes to the reference source (which is very Windows
</I>&gt;<i> specific) to provide consistency across platforms it is unclear as to why
</I>&gt;<i> the previous behavior of using \r\n (prior to the switch to the reference
</I>&gt;<i> source) is incorrect.
</I>&gt;<i> 
</I>&gt;<i> &#8213; Martin
</I>&gt;<i> 
</I>&gt;<i> On 9/28/15, 9:58 AM, &quot;Atsushi Eno&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> MSDN documentation describes the behavior how .NET Framework works on
</I>&gt;&gt;<i> Windows, hence it says \r\n. As the referencesource is explicitly
</I>&gt;&gt;<i> implemented, it is NOT the case on non-Windows platform.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you are unhappy about Microsoft behavior, you should file a bug to
</I>&gt;&gt;<i> Microsoft. referencesource is not for reporting issues though (as its
</I>&gt;&gt;<i> README explicitly says so).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Atsushi Eno
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 2015&#24180;09&#26376;28&#26085; 23:15, Martin Potter wrote:
</I>&gt;&gt;&gt;<i> The default for XamlWriterSettings NewLineChars was changed from &quot;\r\n&quot;
</I>&gt;&gt;&gt;<i> to
</I>&gt;&gt;&gt;<i> &quot;\n&quot; when you imported the reference source and is what is present on
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> 4.2 branch. This is not what the previous behavior was, nor what the
</I>&gt;&gt;&gt;<i> documentation on MSDN,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="https://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.new">https://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.new</A>
</I>&gt;&gt;&gt;<i> li
</I>&gt;&gt;&gt;<i> nechars(v=vs.110).aspx, states.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &quot;The character string to use for line breaks. This can be set to any
</I>&gt;&gt;&gt;<i> string value. However, to ensure valid XML, you should specify only
</I>&gt;&gt;&gt;<i> valid
</I>&gt;&gt;&gt;<i> white space characters, such as space characters, tabs, carriage
</I>&gt;&gt;&gt;<i> returns,
</I>&gt;&gt;&gt;<i> or line feeds. The default is \r\n (carriage return, new line).&quot;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &#8213; Martin
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 9/28/15, 8:08 AM, &quot;Atsushi Eno&quot;
</I>&gt;&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;
</I>&gt;&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Current Microsoft-based implementation is the correct one and it's been
</I>&gt;&gt;&gt;&gt;<i> there in post-4.0 versions.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Atsushi Eno
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On 2015&#24180;09&#26376;28&#26085; 22:46, Martin Potter wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i> Atsushi,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Were you (or someone else) going to get this fixed before 4.2 is ready
</I>&gt;&gt;&gt;&gt;&gt;<i> to
</I>&gt;&gt;&gt;&gt;&gt;<i> ship?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thank you,
</I>&gt;&gt;&gt;&gt;&gt;<i> Martin
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> On 9/8/15, 8:03 PM, &quot;Atsushi Eno&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;
</I>&gt;&gt;&gt;&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> I had no idea when that commit was made, but that change was wrong.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Microsoft behavior is the one we should use in that case.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Atsushi Eno
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> On 2015&#24180;09&#26376;09&#26085; 01:50, Martin Potter wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Way back in 2012, this commit
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://github.com/mono/mono/commit/9215ddf7ade5f0f0f54c2adb7b165e4e3">https://github.com/mono/mono/commit/9215ddf7ade5f0f0f54c2adb7b165e4e3</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> e7
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 74
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 33b
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> &lt;<A HREF="https://github.com/LogosBible/mono/commit/9215ddf7ade5f0f0f54c2adb7b">https://github.com/LogosBible/mono/commit/9215ddf7ade5f0f0f54c2adb7b</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 16
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 5e
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 4e3e77433b&gt; changed
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> the default newline in XmlWriterSettings to be &quot;\r\n&#8221; to be
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> compatible
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> with MS (which some of our tests rely on). It appears that when the
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> reference source was imported in
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://github.com/mono/mono/commit/4990b4c47b8fe1b219c64884fad98d586">https://github.com/mono/mono/commit/4990b4c47b8fe1b219c64884fad98d586</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 15
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 46
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> a05#diff-5561e6ab8de20ec168dcb1f7b415b353,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> it was changed back to be platform specific. Was this an intentional
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> change?
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Thank you,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Martin
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043281.html">[Mono-dev] Behavior change in XmlWriterSettings/XmlTextWriter
</A></li>
	<LI>Next message: <A HREF="043283.html">[Mono-dev] Behavior change in XmlWriterSettings/XmlTextWriter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43282">[ date ]</a>
              <a href="thread.html#43282">[ thread ]</a>
              <a href="subject.html#43282">[ subject ]</a>
              <a href="author.html#43282">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
