<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Use UTF-8 encoding for source files in mcs tree	and for ChangeLogs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Use%20UTF-8%20encoding%20for%20source%20files%20in%20mcs%20tree%0A%09and%20for%20ChangeLogs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019887.html">
   <LINK REL="Next"  HREF="019874.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Use UTF-8 encoding for source files in mcs tree	and for ChangeLogs</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Use%20UTF-8%20encoding%20for%20source%20files%20in%20mcs%20tree%0A%09and%20for%20ChangeLogs&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] Use UTF-8 encoding for source files in mcs tree	and for ChangeLogs">kornelpal at gmail.com
       </A><BR>
    <I>Wed Aug 16 09:52:26 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019887.html">[Mono-dev] Visual Basic upgrade.
</A></li>
        <LI>Next message: <A HREF="019874.html">[Mono-dev] [PATCH] Use UTF-8 encoding for source files in mcs tree	and for ChangeLogs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19871">[ date ]</a>
              <a href="thread.html#19871">[ thread ]</a>
              <a href="subject.html#19871">[ subject ]</a>
              <a href="author.html#19871">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Note that I posted the patch for mcs tree uncompressed but it was too large 
and hasn't been approved to the list yet so I resend it zipped.

Currently source files (*.cs; *.vb) use different encodings:
- ASCII
- Latin 1
- UTF-8 (without BOM)
- UTF-8 (with BOM)

The same is true for ChangeLogs but there were mixed encodings as well.

Our mcs compile doen't recongnize UTF-8 without BOM so those files are
incorrectly compiled if they were in Latin 1.

All of our source files should use the same encoding to be consistent that
makes code more maintainable as well. UTF-8 without BOM seems to be a good
solution as it provides support for every possible Unicode character so this
is a long-term solution for the problem.

I used the attached Latin1ToUtf8.cs to convert the encoding of source files
but I revised each modified character to make sure that the file was
converted from the right encoding to UTF-8.

Additional modifications:

mcs/build/config-default.make: Use UTF-8 as the default encoding for
compilers
mcs/class/Managed.Windows.Forms/Makefile: Removed CODEPAGE as UTF-8 is the
default
mcs/class/Microsoft.VisualBasic/Makefile: Removed CODEPAGE as UTF-8 is the
default

Replaced unnecessary (same visual character) non-ASCII characters with ASCII
characters in:
mcs/class/Mono.GetOptions/GetOptTest/GetOptTester.cs
mcs/class/System.Drawing/Test/DrawingTest/Exocortex.DSP/src/ComplexF.cs
mcs/class/System.Drawing/Test/DrawingTest/Exocortex.DSP/src/Complex.cs
mcs/class/Microsoft.VisualBasic/Test/standalone/6797.vb

Note that removig BOM and the above replacements resulted in 129 more ASCII
files that were non-ASCII because of BOM or non-ASCII characters.

I think that there are no side effects of these patches but comments are
welcome.

Please review and approve the patches.

Korn&#233;l 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: changelog-utf8.zip
Type: application/x-zip-compressed
Size: 13521 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060816/29e41a9a/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060816/29e41a9a/attachment.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mcs-utf8.zip
Type: application/x-zip-compressed
Size: 18408 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060816/29e41a9a/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060816/29e41a9a/attachment-0001.bin</A> 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Latin1ToUtf8.cs
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060816/29e41a9a/attachment.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060816/29e41a9a/attachment.pl</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019887.html">[Mono-dev] Visual Basic upgrade.
</A></li>
	<LI>Next message: <A HREF="019874.html">[Mono-dev] [PATCH] Use UTF-8 encoding for source files in mcs tree	and for ChangeLogs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19871">[ date ]</a>
              <a href="thread.html#19871">[ thread ]</a>
              <a href="subject.html#19871">[ subject ]</a>
              <a href="author.html#19871">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
