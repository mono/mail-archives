<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] local file based EventLog implementation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20local%20file%20based%20EventLog%20implementation&In-Reply-To=000c01c6bae0%24cf40d110%246dc27330%24%40driesen%40telenet.be">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019702.html">
   <LINK REL="Next"  HREF="019708.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] local file based EventLog implementation</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20local%20file%20based%20EventLog%20implementation&In-Reply-To=000c01c6bae0%24cf40d110%246dc27330%24%40driesen%40telenet.be"
       TITLE="[Mono-dev] local file based EventLog implementation">atsushi at ximian.com
       </A><BR>
    <I>Tue Aug  8 13:46:53 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019702.html">[Mono-dev] local file based EventLog implementation
</A></li>
        <LI>Next message: <A HREF="019708.html">[Mono-dev] local file based EventLog implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19707">[ date ]</a>
              <a href="thread.html#19707">[ thread ]</a>
              <a href="subject.html#19707">[ subject ]</a>
              <a href="author.html#19707">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Gert,

Thanks for the comments.

Gert Driesen wrote:
&gt;<i> 
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> [mailto:mono-devel-list-
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bounces at lists.ximian.com</A>] On Behalf Of Atsushi Eno
</I>&gt;&gt;<i> Sent: maandag 7 augustus 2006 3:58
</I>&gt;&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> Subject: [Mono-dev] local file based EventLog implementation
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> During a consultation with a local customer I recently noticed that we
</I>&gt;&gt;<i> don't have EventLog implementation, while a basic framework has existed
</I>&gt;&gt;<i> for years, which was intended to have some different implementations.
</I>&gt;&gt;<i> Hence I implemented pretty simple stupid one, which works only for
</I>&gt;&gt;<i> local machine.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I modified some of existing framework as it does not seem to support
</I>&gt;&gt;<i> multiple implementation in reality.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To use this code, set MONO_LOCAL_EVENTLOG_DIR =
</I>&gt;&gt;<i> /path/to/yourfavoritedir to point the location for aggregated event
</I>&gt;&gt;<i> logs.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The usage sample I have is like:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 	EventLog log = new EventLog (&quot;enolog&quot;, &quot;.&quot;, &quot;logg&quot;);
</I>&gt;&gt;<i> 	Console.WriteLine (log.Log);
</I>&gt;&gt;<i> 	foreach (EventLogEntry e in log.Entries)
</I>&gt;&gt;<i> 		Console.WriteLine (e.Message);
</I>&gt;&gt;<i> 	log.WriteEntry (&quot;My test message.&quot;);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It is really a hack. Any improvements or suggestions would be
</I>&gt;&gt;<i> appreciated. If no one is taking care of EventLog stuff, I'll checkin
</I>&gt;&gt;<i> the code by myself.
</I>&gt;<i> 
</I>&gt;<i> I'm not sure if it's really necessary to have a separate EventLogFactory
</I>&gt;<i> abstraction, we could use a similar approach to the one used for the
</I>&gt;<i> Registry API;  meaning, define an interface and implementations of that
</I>&gt;<i> interface and have EventLog pick the implementation for doing all the work
</I>&gt;<i> (except for basic argument checks and stuff). Ofcourse, feel free to ignore
</I>&gt;<i> my remarks as I'm glad we now have at least an implementation thanks to you
</I>&gt;<i> ;-)
</I>
I'm just curious, what's the benefit of your interface proposal over
factory methods? My guess is that we would end up to summarize common
code base into an abstract class, which will look like existing 
EventLogImpl.

&gt;<i> We might also use the Registry API for registering/deleting/querying event
</I>&gt;<i> sources (on both linux and windows) to match the Win32 event log, which
</I>&gt;<i> AFAIK uses HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\EventLog to
</I>&gt;<i> store that info.
</I>
Yeah, I didn't spend time to learn about the Win API / Registry, but
if someone spare time to implement registry based sources it'd be cool.

&gt;<i> That way we would only need to implement reading/writing event log entries
</I>&gt;<i> itself in a platform specific way, and we could use your implementation for
</I>&gt;<i> linux (and perhaps for the time being also for windows).
</I>
Or, on windows we could just use windows event log API (if exists).

Atsushi Eno

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019702.html">[Mono-dev] local file based EventLog implementation
</A></li>
	<LI>Next message: <A HREF="019708.html">[Mono-dev] local file based EventLog implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19707">[ date ]</a>
              <a href="thread.html#19707">[ thread ]</a>
              <a href="subject.html#19707">[ subject ]</a>
              <a href="author.html#19707">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
