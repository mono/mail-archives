<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] reg: HTTPS file transfer.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20reg%3A%20HTTPS%20file%20transfer.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019935.html">
   <LINK REL="Next"  HREF="019957.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] reg: HTTPS file transfer.</H1>
    <B>Mahinderkar, Jitender K (GE Infra,	Energy)</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20reg%3A%20HTTPS%20file%20transfer.&In-Reply-To="
       TITLE="[Mono-dev] reg: HTTPS file transfer.">jitender.mahinderkar at ge.com
       </A><BR>
    <I>Fri Aug 18 11:30:12 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019935.html">[Mono-dev] mono doc
</A></li>
        <LI>Next message: <A HREF="019957.html">[Mono-dev] reg: HTTPS file transfer.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19946">[ date ]</a>
              <a href="thread.html#19946">[ thread ]</a>
              <a href="subject.html#19946">[ subject ]</a>
              <a href="author.html#19946">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Yngve Zackrisson,
 
I have gone through this newgroup and would like to know something on
HTTPS file transfer.
 
Is it possible to upload the xml files using HTTPS on a linus based
machine?
 
Is it possible to write a C# code for this functionality?
 
Could you please share your code so that I can implement the upload
functionality.
 
regards,  

Jitender Kumar Mahinderkar

 

 
 

[Mono-dev] Remitting through HTTPS


Yngve Zackrisson yngve.zackrisson at mobila-kontoret.se
&lt;mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Remo
thing%20through%20HTTPS&amp;In-Reply-To=1126806892.31892.35.camel%40localhos
t.localdomain&gt; 
Mon Oct 10 05:17:14 EDT 2005 

*	Previous message: [Mono-dev] Can't find older binaries
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/015235.h">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/015235.h</A>
tml&gt; 
*	Next message: [Mono-dev] Remothing through HTTPS
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/015268.h">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/015268.h</A>
tml&gt; 
*	Messages sorted by: [ date ]
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/date.htm">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/date.htm</A>
l#15225&gt;  [ thread ]
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/thread.h">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/thread.h</A>
tml#15225&gt;  [ subject ]
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/subject.">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/subject.</A>
html#15225&gt;  [ author ]
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/author.h">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/author.h</A>
tml#15225&gt;  

  _____  

Hallo Sebastien,
 
Great news!
 
I have got HTTPS working through .NET Remoting 
with Win32 MS .NET on the client side 
and Linux Mono on the server side.
 
The changes I had to do in Mono was in 
the library  System.Runtime.Remoting.Channels.Http and 
in the source HttpServer.cs.
 
Everything seems to work fine now, 
even upload of large files. 
 
Thank You very much for your support.
 
If you want the solution I send you the source.
 
 
 
Regards 
 
 
 
Yngve Zackrisson.
 
 
 
On Thu, 2005-09-15 at 19:54, Sebastien Pouliot wrote:
&gt;<i> Hello Yngve,
</I>&gt;<i> 
</I>&gt;<i> On Thu, 2005-15-09 at 19:46 +0200, Yngve Zackrisson wrote:
</I>&gt;<i> &gt; Sorry bothering again but I have more questions / troubles.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; &gt;    Is there any other way to get the key?.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; You can get a list of the private keys (there can be more than
</I>one)
&gt;<i> &gt; &gt; available in the PKCS#12 file by using the Keys property.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 1) Just a clarification. 
</I>&gt;<i> &gt;    The Keys is a ArrayList of RSA objects (key.RSA). Right ?.
</I>&gt;<i> 
</I>&gt;<i> No. Actually yes but that may change in the future (e.g. DSA, DH...)
</I>so
&gt;<i> be vigilant.
</I>&gt;<i> 
</I>&gt;<i> &gt; 2) I did not mention that I also wanted the X509Certificate 
</I>&gt;<i> &gt;    from the PKCS#12 file in Mono / Linux.
</I>&gt;<i> &gt;    I can get that through the Mono PKCS12 class, 
</I>&gt;<i> &gt;    but the type is Mono.Security.X509.X509Certificate.
</I>&gt;<i> &gt;    Mono's SslServerStream's constructor (for instance) requires 
</I>&gt;<i> &gt;    System.Security.Cryptography.X509Certificates.X509Certificate.
</I>&gt;<i> &gt;    Is there any conversion function between these types ?.
</I>&gt;<i> 
</I>&gt;<i> No. You must revert the certificate to a byte array (GetRawCertData
</I>&gt;<i> method or Raw property) and reconstruct it.
</I>&gt;<i>  
</I>&gt;<i> &gt; 3) When using the PKCS12 on Win32 i got an exception in mscorlib.
</I>&gt;<i> &gt;    Does Mono.Security.dll requires a special corlib or is 
</I>&gt;<i> &gt;    the error a configuration error ?.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    Below is the details of the error (manually  retyped):
</I>&gt;<i> &gt;    &gt;&gt;&gt;
</I>&gt;<i> &gt;    An unhandled exception of type 'System.TypeLoadException' occured
</I>in 
&gt;<i> &gt;    mono.security.dll
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    Additional information: Could not load type 
</I>&gt;<i> &gt;    System.Security.Cryptography.HMAC from assembly mscorlib, 
</I>&gt;<i> &gt;    Version = 1.0.500.0, Cuture=neutral, 
</I>&gt;<i> &gt;    PublicKeyToken=b77a5c561934e089.
</I>&gt;<i> 
</I>&gt;<i> The HMAC class only exists in fx 2.0.
</I>&gt;<i> Where did you get that Mono.Security ? or how was it compiled ?
</I>&gt;<i> 
</I>&gt;<i> &gt;    On the console I got (manually retyped): 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    Unhandled Exception: System.TypeLoadException: Could not load
</I>type   
&gt;<i> &gt;    System.Security.Cryptography.HMAC from assembly mscorlib,    
</I>&gt;<i> &gt;    version=1.0.5000.0, Culture=neutral,
</I>PublicKeyToken=b77a5c561934e089.
&gt;<i> &gt;       at Mono.Security.X509.pkcs12.MAC(Byte[] password, Byte[] salt,
</I>
&gt;<i> &gt;    Int32 iterations, Byte[] data)
</I>&gt;<i> &gt;       at Mono.Security.X509.PKCS12.Decode(Byte[] data)
</I>&gt;<i> &gt;       at Mono.Security.X509.LoadFromFile(String filename, String    
</I>&gt;<i> &gt;    password) 
</I>&gt;<i> &gt;       at SslHttpServer.SslHttpServer.Main(String[] args) in    
</I>&gt;<i> &gt;    c:\SharpDevelop Projects\HTTPS-PKCS12-Tunnel\MonoSslHttpServer\ 
</I>&gt;<i> &gt;    Main.cs:line 40    
</I>&gt;<i> &gt;    Press any key to continue . . . 
</I>&gt;<i> &gt;    &lt;&lt;&lt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Regards 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      
</I>&gt;<i> &gt; // Yngve Zackrisson.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; &gt; B) Server certificate to the Mono / Linux store: 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    Just checking if I got things right:
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    I user the command: 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    $ mono /usr/lib/mono/certmgr.exe -add -c -m CA cacert.cer 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    $ mono /usr/lib/mono/certmgr.exe -add -c -m Trust
</I>server-certkey.cer 
&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; You should have a certmgr script (that calls mono on the installed
</I>&gt;<i> &gt; &gt; certmgr.exe) that would be simpler to type.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    to load the CA cert (cacert.cer with in DER format) and 
</I>&gt;<i> &gt; &gt; &gt;    to load the server cert 
</I>&gt;<i> &gt; &gt; &gt;    (server certificate request are first signed and 
</I>&gt;<i> &gt; &gt; &gt;    then the server-cert.pem and server-key.pem are concatenated 
</I>&gt;<i> &gt; &gt; &gt;    with the cat command to server-certkey.pem 
</I>&gt;<i> &gt; &gt; &gt;    witch is then converted to server-certkey.cer in DER format).
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; ???
</I>&gt;<i> &gt; &gt; server-cert.pem should contain your server certificate.
</I>&gt;<i> &gt; &gt; DON'T CONCATENATE your private key with it. The certificate store
</I>isn't
&gt;<i> &gt; &gt; designed to keep private keys safe.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    The CN should be the same as hostname.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; yes
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    Do you find any error in the above procedure?
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; No. The Trust is done on a self-signed (root) certificate - which
</I>is
&gt;<i> &gt; &gt; generally a CA certificate (non self signed certificates goes into
</I>the
&gt;<i> &gt; &gt; CA store).
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; _Assuming_ that your CA certificate is self-signed then all you
</I>have to
&gt;<i> &gt; &gt; do is:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; certmgr -add -c -m cacert.cer
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; The server certificate doesn't have to be in the store as you
</I>supply it
&gt;<i> &gt; &gt; to the server.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    Does the Mono SSL handle incomming httprequests automatically
</I>
&gt;<i> &gt; &gt; &gt;    or do I have to handle (for instance) the authentication in 
</I>&gt;<i> &gt; &gt; &gt;    the custom channel? (If so, any code to look at? XSP?).
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Mono's SSL doesn't (directly) understand HTTP - it sits lower in
</I>the
&gt;<i> &gt; &gt; network stack.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Recent XSP versions are SSL enabled.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; C) Client side certificate handling in Win32.
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    I use
</I>&quot;HttpWebRequest.ClientCertificates.Add(x509Certificate)&quot; 
&gt;<i> &gt; &gt; &gt;    to set the client certificate.
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    Below you wrote: 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; Using client certificates in this (remoting) setup may prove a
</I>little
&gt;<i> &gt; &gt; &gt; &gt; more challenging as Fx1.x X509Certificate class has no notion
</I>of a
&gt;<i> &gt; &gt; &gt; &gt; private key associated with the certificate. This may be fixed
</I>by doing
&gt;<i> &gt; &gt; &gt; &gt; a custom remoting channel that use Mono.Security.dll (where
</I>you'll have
&gt;<i> &gt; &gt; &gt; &gt; a callback to supply the private key for your client
</I>certificate).
&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    
</I>&gt;<i> &gt; &gt; &gt;    Since I am no expert in this area (just have to try to be one
</I>
&gt;<i> &gt; &gt; &gt;    due to the current lack of SSL security .NET Remoting) 
</I>&gt;<i> &gt; &gt; &gt;    I just wonder if anyone can direct me to what to do.
</I>&gt;<i> &gt; &gt; &gt;    I have read (implemented) the MS articles about custom
</I>channels 
&gt;<i> &gt; &gt; &gt;    and MS authentication, so I pretty much understand custom
</I>channels. 
&gt;<i> &gt; &gt; &gt;    I ques that it is only the authentication I have to try to 
</I>&gt;<i> &gt; &gt; &gt;    implement in the custom channel?
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; and I'm no expert in remoting ;-) but I would try setting up a
</I>&quot;classic&quot;
&gt;<i> &gt; &gt; SSL channel first - then worry about about client certificates. At
</I>least
&gt;<i> &gt; &gt; at this stage you'll have some code to show to get more help.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt;    Are there any open source code (.NET Mono C#) - about 
</I>&gt;<i> &gt; &gt; &gt;    client side certificate authentication - I can download and
</I>read?.
&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; The XSP version released with 1.1.9 supports client-side
</I>certificates.
&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; Regards 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; Yngve Zackrisson
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; On Wed, 2005-09-07 at 13:39, Sebastien Pouliot wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; Hello Yngve,
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; On Wed, 2005-07-09 at 11:15 +0200, Yngve Zackrisson wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Hi all.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; I am doing an remoting application 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; and have a Win32 Client with MS .NET v1.1
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; and a Linux (Fedora Core 3 x86) Server with Mono 1.1.8.3.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; The different clients will call the remote objects methods 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; on the server. 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Among other things the clients will upload a file to the
</I>server. 
&gt;<i> &gt; &gt; &gt; &gt; &gt; I (now) only uses &quot;normal&quot; calls to upload a file - 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; no &quot;callbacks&quot; any more.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; The server will be located at our place.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; The clients will be users of &quot;services&quot;, running on our
</I>server.
&gt;<i> &gt; &gt; &gt; &gt; &gt; The remote objects is currently hosted by an Console
</I>application, 
&gt;<i> &gt; &gt; &gt; &gt; &gt; but is planned to be hosted by a Windows service (on Linux /
</I>Mono :-)).
&gt;<i> &gt; &gt; &gt; &gt; &gt; I have gotten this working with HTTP.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; I now will try to do this with HTTPS (on port 443), 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; to get a secure tunnel between the client and the server.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; We would like to use SSL with both encryption and
</I>authentication, 
&gt;<i> &gt; &gt; &gt; &gt; &gt; through x509 certificates.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; The certificates should (preferable) be self signed.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;From my testings and readings I have found that: 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 1) My Win32 client uses Tls.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 2) The Win32 client certificates should be:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;    a) Set in the ClientCertificates property of the
</I>HttpWebRequest.
&gt;<i> &gt; &gt; &gt; &gt; &gt;    b) The client certificate must be installed in 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;       the LOCAL_MACHINE registry hive.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;    (Se: KB895971 at
</I><A HREF="http://support.microsoft.com/?kbid=895971">http://support.microsoft.com/?kbid=895971</A>).
&gt;<i> &gt; &gt; &gt; &gt; &gt; 3) .NET prefer the DER format (called .cer) 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;    but may also use the .p12 format.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 4) From the Microsoft .NET documentation, 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;    I have found support only for certificate authentication 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;    through ASP.NET/IIS-hosting - In MS .NET v1.1.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 5) There is some support for SSL in Mono, 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;    and I have succeeded to install certificates in Mono
</I>through certmgr 
&gt;<i> &gt; &gt; &gt; &gt; &gt;    (but I may have done it wrong. No real test yet).
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; What I wonder is weather this approach gonna work with .NET
</I>Remoting 
&gt;<i> &gt; &gt; &gt; &gt; &gt; and with different Win32 MS .NET clients calling a Linux
</I>Mono server?.
&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; Using client certificates in this (remoting) setup may prove a
</I>little
&gt;<i> &gt; &gt; &gt; &gt; more challenging as Fx1.x X509Certificate class has no notion
</I>of a
&gt;<i> &gt; &gt; &gt; &gt; private key associated with the certificate. This may be fixed
</I>by doing
&gt;<i> &gt; &gt; &gt; &gt; a custom remoting channel that use Mono.Security.dll (where
</I>you'll have
&gt;<i> &gt; &gt; &gt; &gt; a callback to supply the private key for your client
</I>certificate).
&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Do I have to customize any part of the SSL handshake?.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; No. SSL/TLS is a negotiating protocol. You supply the
</I>certificates and
&gt;<i> &gt; &gt; &gt; &gt; the rest gets done (well pretty much).
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; More details on SSL are available in the FAQ
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://www.mono-project.com/FAQ:_Security">http://www.mono-project.com/FAQ:_Security</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; On the remote objects methods, I would like to have 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; access checks on the users .NET Roles.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Is it possible to impersonate the principal and add .NET
</I>Roles 
&gt;<i> &gt; &gt; &gt; &gt; &gt; to that principal when the remote objects is hosted in 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; a Console application or a Windows service (in Linux /
</I>Mono)?.
&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; You can't impersonate (in the win32 way) if your communication
</I>channel
&gt;<i> &gt; &gt; &gt; &gt; doesn't support it (e.g. SSPI) - so this works only for _some_
</I>win32
&gt;<i> &gt; &gt; &gt; &gt; stuff.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; You can always &quot;mimic&quot; the impersonation by transferring the
</I>identity in
&gt;<i> &gt; &gt; &gt; &gt; a custom remoting channel (and setting the IPrincipal of the
</I>remote
&gt;<i> &gt; &gt; &gt; &gt; object yourself). There are a lot of example for doing this on
</I>the net.
&gt;<i> &gt; &gt; &gt; &gt; Alternatively you can create a new IPrincipal instance based
</I>on the
&gt;<i> &gt; &gt; &gt; &gt; client certificate used by client client.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; Lastly when using roles be sure to use imperative demands
</I>(e.g.
&gt;<i> &gt; &gt; &gt; &gt; IPrincipal.IsInRole) and not declarative security attributes
</I>&gt;<i> &gt; &gt; &gt; &gt; (PrincipalPermission) unless you activate the security manager
</I>&gt;<i> &gt; &gt; &gt; &gt; (--security).
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://www.mono-project.com/CAS">http://www.mono-project.com/CAS</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Further, I am not really sure about how to set up the
</I>certificates 
&gt;<i> &gt; &gt; &gt; &gt; &gt; on the Mono server for SSL.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; See the FAQ and/or do a &quot;man certmgr&quot; in a terminal.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; I assume the the certificates should be placed in the
</I>machine store.
&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; That depends on what will be using the certificate.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; I have the certificates in DER (.cer) format.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Should the CA certificate be placed in the CA store 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; or in the Trust store?. Any more to think about?.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; Self-signed certificates goes to the trusted store.
</I>&gt;<i> &gt; &gt; &gt; &gt; The CA store is for intermediate CA certificates.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; I assume that the server certificate should be placed 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; in the Trust store (of the machine store).
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; I hope this is right.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; The machine store is handy if you don't know under which
</I>identity (user)
&gt;<i> &gt; &gt; &gt; &gt; your program is gonna be executed (or if it may be executed by
</I>multiple
&gt;<i> &gt; &gt; &gt; &gt; users on the same system). Otherwise keep your stuff in the
</I>user store.
&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I> 
  _____  

size=2 width=&quot;100%&quot; align=center&gt; 

*	Previous message: [Mono-dev] Can't find older binaries
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/015235.h">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/015235.h</A>
tml&gt; 
*	Next message: [Mono-dev] Remothing through HTTPS
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/015268.h">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/015268.h</A>
tml&gt; 
*	Messages sorted by: [ date ]
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/date.htm">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/date.htm</A>
l#15225&gt;  [ thread ]
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/thread.h">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/thread.h</A>
tml#15225&gt;  [ subject ]
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/subject.">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/subject.</A>
html#15225&gt;  [ author ]
&lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2005-October/author.h">http://lists.ximian.com/pipermail/mono-devel-list/2005-October/author.h</A>
tml#15225&gt;  

  _____  

More information about the Mono-devel-list mailing list
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>&gt; 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060818/5ca4d458/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060818/5ca4d458/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019935.html">[Mono-dev] mono doc
</A></li>
	<LI>Next message: <A HREF="019957.html">[Mono-dev] reg: HTTPS file transfer.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19946">[ date ]</a>
              <a href="thread.html#19946">[ thread ]</a>
              <a href="subject.html#19946">[ subject ]</a>
              <a href="author.html#19946">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
