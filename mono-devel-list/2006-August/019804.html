<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] EventLog implementation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20EventLog%20implementation&In-Reply-To=000901c6be00%24018293d0%240487bb70%24%40driesen%40telenet.be">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019798.html">
   <LINK REL="Next"  HREF="019805.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] EventLog implementation</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20EventLog%20implementation&In-Reply-To=000901c6be00%24018293d0%240487bb70%24%40driesen%40telenet.be"
       TITLE="[Mono-dev] [PATCH] EventLog implementation">atsushi at ximian.com
       </A><BR>
    <I>Sun Aug 13 09:32:12 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019798.html">[Mono-dev] [PATCH] EventLog implementation
</A></li>
        <LI>Next message: <A HREF="019805.html">[Mono-dev] [PATCH] EventLog implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19804">[ date ]</a>
              <a href="thread.html#19804">[ thread ]</a>
              <a href="subject.html#19804">[ subject ]</a>
              <a href="author.html#19804">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Gert,

Here are my thoughts:

	- As I mentioned at #mono, Current code end up to have
	  *no* implementation from the point of already-built
	  System.dll. There should be ways to enable local file
	  impl. and winapi impl. without rebuilding System.dll
	  Using environment variable would be mandatory. Having
	  configuration section would be optional goodness.

	- You don't mention that which you are targetting exactly
	  when you talk about registry stuff, so I'm guessing
	  the worst case i.e. you are also trying to make changes
	  on local file based implementation with related to get
	  log store.
	  I prefer having different option i.e. current environment
	  variable based solution, than *totally* relying on the
	  registry, since it would rather make debugging difficult
	  than reducing little coding cost.

	- Other than above, I support your plan. Thanks also to
	  latexer, it became pretty cute.

Atsushi Eno

Gert Driesen wrote:
&gt;<i> Hi Atsushi,
</I>&gt;<i> 
</I>&gt;<i> As we discussed on #mono, I've made modifications to the UnixRegistry API to
</I>&gt;<i> create the following registry hives in /var/lib/mono/registry instead of
</I>&gt;<i> &lt;profile&gt;/.mono/registry:
</I>&gt;<i> 
</I>&gt;<i> 	- HKEY_CURRENT_CONFIG
</I>&gt;<i> 	- HKEY_CLASSES_ROOT
</I>&gt;<i> 	- HKEY_DYN_DATA
</I>&gt;<i> 	- HKEY_LOCAL_MACHINE
</I>&gt;<i> 	- HKEY_PERFORMANCE_DATA
</I>&gt;<i> 	- HKEY_USERS (not to be mistaken with HKEY_CURRENT_USER)
</I>&gt;<i> 
</I>&gt;<i> By default, the owner (admin) has full control (rwx) while everony else has
</I>&gt;<i> read&amp;execute permission.
</I>&gt;<i> 
</I>&gt;<i> That allows us to share machine-level registry information between different
</I>&gt;<i> users, while preventing write access to this information by non-admins.
</I>&gt;<i> 
</I>&gt;<i> As a result of this change, eventlog registration information is now also
</I>&gt;<i> shared between different users, and event logs can now no longer be created
</I>&gt;<i> by non-admins. This matches the behavior on MS.NET.
</I>&gt;<i> 
</I>&gt;<i> The event entries created by the UnixEventLog implementation are now
</I>&gt;<i> persisted in /var/lib/mono/eventlog, and access rights on this directory are
</I>&gt;<i> rwx for everyone, while only giving file owners the right to delete files
</I>&gt;<i> (using +t special bit).
</I>&gt;<i> 
</I>&gt;<i> This should anyone to write entries to an event log once it has been created
</I>&gt;<i> (by an admin).
</I>&gt;<i> 
</I>&gt;<i> Does this match what we've discussed ? If so, I'll post the corresponding
</I>&gt;<i> patch to the devel-list later today (or tomorrow).
</I>&gt;<i> 
</I>&gt;<i> Once you've acknowledged the basics of the patch, I'll run the UnixRegistry
</I>&gt;<i> API changes by Miguel as he's the author of the API.
</I>&gt;<i> 
</I>&gt;<i> Gert
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019798.html">[Mono-dev] [PATCH] EventLog implementation
</A></li>
	<LI>Next message: <A HREF="019805.html">[Mono-dev] [PATCH] EventLog implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19804">[ date ]</a>
              <a href="thread.html#19804">[ thread ]</a>
              <a href="subject.html#19804">[ subject ]</a>
              <a href="author.html#19804">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
