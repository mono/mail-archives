<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Keep-alive connection with Remoting?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Keep-alive%20connection%20with%20Remoting%3F&In-Reply-To=44DA10F6.4050208%40clix.pt">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019740.html">
   <LINK REL="Next"  HREF="019752.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Keep-alive connection with Remoting?</H1>
    <B>Rafael Teixeira</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Keep-alive%20connection%20with%20Remoting%3F&In-Reply-To=44DA10F6.4050208%40clix.pt"
       TITLE="[Mono-dev] Keep-alive connection with Remoting?">monoman at gmail.com
       </A><BR>
    <I>Wed Aug  9 16:01:57 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019740.html">[Mono-dev] Keep-alive connection with Remoting?
</A></li>
        <LI>Next message: <A HREF="019752.html">[Mono-dev] Keep-alive connection with Remoting?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19744">[ date ]</a>
              <a href="thread.html#19744">[ thread ]</a>
              <a href="subject.html#19744">[ subject ]</a>
              <a href="author.html#19744">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You have to choose the server state-model and configure the Lifetime
policy in the server. The default even for the singleton state-model
is to kill the server object after a few minutes and recreate on the
next request from the client.

It is a design-for-scalability decision MS did for remoting, as
long-living server objects (and also connections) are some of the
worst enemies of scalability.

As you said scalability is a concern for you, I need to warn that you
are actively working against it by choosing persistent connections,
and long-living server objects.

My experience is that persistent connections put a ceiling (and a
really low one) on how much you can scale, something like a few
hundred to a thousand simultaneous connections depending in the OS and
network I/O efficiency of the hardware.

Long-living server objects strain memory usage and thus garbage
collection (even causing server hiccups), when you try to scale up,
but surely, how fast it breaks is dependent on the memory consumption
of all the chain of objects needed by your server object to service a
request, so it is more tied to your specific implementation than the
persistent connections issue.

Just some facts I learned from a long life is this business, and that
I teach my post-graduation students in return.

Hope it helps,

On 8/9/06, Ympostor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ympostor at clix.pt</A>&gt; wrote:
&gt;<i> Ympostor wrote:
</I>&gt;<i> &gt;&gt; It's probably better to contact the author for a true OSS license.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Well, if I port it completely to the 2.0 stack (...)
</I>&gt;<i>
</I>&gt;<i> Finally I have totally ported it to 2.0 and fixed it a little bit so as
</I>&gt;<i> to use more interfaces (and then not having the server implementation as
</I>&gt;<i> a reference in the client).
</I>&gt;<i>
</I>&gt;<i> However, I am making some tests and I come out with strange behaviours
</I>&gt;<i> with the demo: after 5 or some more minutes of idle connection, the
</I>&gt;<i> server looses the proxy references to the clients and removes their
</I>&gt;<i> remoting object automatically (without using any written code) and
</I>&gt;<i> silently from the array, without giving exceptions neither in the server
</I>&gt;<i> nor in the clients.
</I>&gt;<i>
</I>&gt;<i> I have already overriden the InitializeLifetimeService method of the
</I>&gt;<i> MarshalByRefObject client class (returning null), but this doesn't fix it.
</I>&gt;<i>
</I>&gt;<i> Anybody has an idea of what can be going on? Or tell me a way to debug
</I>&gt;<i> it? I can send the modified sources in case anyone asks me for them.
</I>&gt;<i>
</I>&gt;<i> Regards.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>

-- 
Rafael &quot;Monoman&quot; Teixeira
---------------------------------------
&quot;The reasonable man adapts himself to the world; the unreasonable one
persists in trying to adapt the world to himself. Therefore all
progress depends on the unreasonable man.&quot; George Bernard Shaw

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019740.html">[Mono-dev] Keep-alive connection with Remoting?
</A></li>
	<LI>Next message: <A HREF="019752.html">[Mono-dev] Keep-alive connection with Remoting?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19744">[ date ]</a>
              <a href="thread.html#19744">[ thread ]</a>
              <a href="subject.html#19744">[ subject ]</a>
              <a href="author.html#19744">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
