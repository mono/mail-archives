<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] SIGSEGV with large nursery size
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20SIGSEGV%20with%20large%20nursery%20size&In-Reply-To=%3CD40895F1-30FB-4E6E-B8FF-964FAE18102D%40microsoft.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044001.html">
   <LINK REL="Next"  HREF="044005.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] SIGSEGV with large nursery size</H1>
    <B>Vlad Brezae</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20SIGSEGV%20with%20large%20nursery%20size&In-Reply-To=%3CD40895F1-30FB-4E6E-B8FF-964FAE18102D%40microsoft.com%3E"
       TITLE="[Mono-dev] SIGSEGV with large nursery size">vlbrez at microsoft.com
       </A><BR>
    <I>Wed Nov  2 15:28:55 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044001.html">[Mono-dev] SIGSEGV with large nursery size
</A></li>
        <LI>Next message (by thread): <A HREF="044005.html">[Mono-dev] SIGSEGV with large nursery size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44004">[ date ]</a>
              <a href="thread.html#44004">[ thread ]</a>
              <a href="subject.html#44004">[ subject ]</a>
              <a href="author.html#44004">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Burkhard,

         This should be fixed on master by [1].

          Is there any reason to use such big nursery sizes ? Is this a workaround for the stack overflow problem that you submitted earlier ?

          You could also consider using the minor=split params, in order to delay promotion to the major heap.

Vlad


[1] <A HREF="https://github.com/mono/mono/commit/5ee7b3fef5a9a8df0d7c1ec4358f06a393023d46">https://github.com/mono/mono/commit/5ee7b3fef5a9a8df0d7c1ec4358f06a393023d46</A>
       

On 02/11/2016, 13:47, &quot;Mono-devel-list on behalf of Burkhard Linke&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.dot.net</A> on behalf of <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">blinke at CeBiTec.Uni-Bielefeld.DE</A>&gt; wrote:

    Hi,
    
    
    I'm trying to run mono with very large nursery sizes due to a large 
    number of temporary objects created in an application. Using 
    MONO_GC_PARAMS=nursery-size=2g runs fine; increasing the size to 4g 
    results in a SIGSEGV:
    
    
    $ MONO_GC_PARAMS=nursery-size=4g gdb --args /usr/bin/mono &lt;some application&gt;
    
    ....
    
    Reading symbols from /usr/bin/mono...(no debugging symbols found)...done.
    (gdb) run
    Starting program: /usr/bin/mono &lt;some application&gt;
    
    ... (gdb thread start messages)
    
    ... (application prints usage message since no further options are given)
    
    Program received signal SIGSEGV, Segmentation fault.
    0x0000000000612cf5 in ?? ()
    (gdb)  bt
    #0  0x0000000000612cf5 in ?? ()
    #1  0x0000000000603875 in ?? ()
    #2  0x0000000000624188 in ?? ()
    #3  0x0000000000603a0e in ?? ()
    #4  0x0000000000604c42 in ?? ()
    #5  0x0000000000604f6e in ?? ()
    #6  0x0000000000607678 in ?? ()
    #7  0x0000000000607d44 in ?? ()
    #8  0x00000000006081e9 in ?? ()
    #9  0x00000000005bc32c in mono_domain_finalize ()
    #10 0x00000000004245c4 in ?? ()
    #11 0x0000000000545f5b in ?? ()
    #12 0x000000004008e602 in ?? ()
    #13 0x00007fffffffd8c0 in ?? ()
    #14 0x00007fffffffd8b0 in ?? ()
    #15 0x00000000009d4c98 in ?? ()
    #16 0x00007fffffffd8b0 in ?? ()
    #17 0x0000000040011310 in ?? ()
    #18 0x00000000009f9950 in ?? ()
    #19 0x00007ffff42660e8 in ?? ()
    #20 0x00007fffffffd430 in ?? ()
    #21 0x00007fffffffccd0 in ?? ()
    #22 0x0000000040086b12 in ?? ()
    #23 0x00007ffff42601d0 in ?? ()
    #24 0x0000000000000000 in ?? ()
    
    I've also seen other failures in other applications, but these are 
    harder to reproduce. Is there some kind of upper limit for the nursery size?
    
    
    Regards,
    
    Burkhard
    
    _______________________________________________
    Mono-devel-list mailing list
    <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.dot.net</A>
    <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fmono-devel-list&amp;data=02%7C01%7Cvlbrez%40microsoft.com%7C17dee4b164ed48291dfa08d403160c76%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636136840634496224&amp;sdata=Goo51xVTBLWnNEiJj9aaP6pNXLqDYGBm2Dk16I7VDz8%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fmono-devel-list&amp;data=02%7C01%7Cvlbrez%40microsoft.com%7C17dee4b164ed48291dfa08d403160c76%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636136840634496224&amp;sdata=Goo51xVTBLWnNEiJj9aaP6pNXLqDYGBm2Dk16I7VDz8%3D&amp;reserved=0</A>
    

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044001.html">[Mono-dev] SIGSEGV with large nursery size
</A></li>
	<LI>Next message (by thread): <A HREF="044005.html">[Mono-dev] SIGSEGV with large nursery size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44004">[ date ]</a>
              <a href="thread.html#44004">[ thread ]</a>
              <a href="subject.html#44004">[ subject ]</a>
              <a href="author.html#44004">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
