<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Amazon Lambda With Mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Amazon%20Lambda%20With%20Mono&In-Reply-To=%3C1479821200917-4669222.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044041.html">
   <LINK REL="Next"  HREF="044040.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Amazon Lambda With Mono</H1>
    <B>james.wheeler.pe</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Amazon%20Lambda%20With%20Mono&In-Reply-To=%3C1479821200917-4669222.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] Amazon Lambda With Mono">james.wheeler.pe at gmail.com
       </A><BR>
    <I>Tue Nov 22 13:26:40 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044041.html">[Mono-dev] [Mono-list] Mono embedded : EXC_BAD_ACCESS calling mono_object_hash() on MonoDomain *
</A></li>
        <LI>Next message (by thread): <A HREF="044040.html">[Mono-dev] Amazon Lambda With Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44039">[ date ]</a>
              <a href="thread.html#44039">[ thread ]</a>
              <a href="subject.html#44039">[ subject ]</a>
              <a href="author.html#44039">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thought I posted this yesterday but can't find it.

Forgive me if it shows up twice.

We have a lot of C# code that we would like to run under Amazon Lambda.

Mono would seem to be the most effective way to achieve this.

I have been able to get simple applications to run but things fail
when I try to use libraries that ultimately make a call via WebRequest.

Here is a partial stack trace....

libc :   at (wrapper managed-to-native) System.Platform:uname (intptr)
  at System.Platform.CheckOS () [0x00022] in
&lt;bd46d4d4f7964dfa9beea098499ab597&gt;:0 
  at System.Platform.get_IsMacOS () [0x0000a] in
&lt;bd46d4d4f7964dfa9beea098499ab597&gt;:0 
  at System.Net.WebRequest.GetSystemWebProxy () [0x00149] in
&lt;bd46d4d4f7964dfa9beea098499ab597&gt;:0 
  at System.Net.WebRequest.GetDefaultWebProxy () [0x0003f] in
&lt;bd46d4d4f7964dfa9beea098499ab597&gt;:0 
  at System.Net.WebRequest.get_DefaultWebProxy () [0x00024] in
&lt;bd46d4d4f7964dfa9beea098499ab597&gt;:0 
  at System.Net.GlobalProxySelection.get_Select () [0x00000] in
&lt;bd46d4d4f7964dfa9beea098499ab597&gt;:0 
  at System.Net.HttpWebRequest..ctor (System.Uri uri) [0x0008d] in
&lt;bd46d4d4f7964dfa9beea098499ab597&gt;:0 
  at (wrapper remoting-invoke-with-check) System.Net.HttpWebRequest:.ctor
(System.Uri)
  at System.Net.HttpRequestCreator.Create (System.Uri uri) [0x00000] in
&lt;bd46d4d4f7964dfa9beea098499ab597&gt;:0 
  at System.Net.WebRequest.Create (System.Uri requestUri) [0x00022] in
&lt;bd46d4d4f7964dfa9beea098499ab597&gt;:0 
  at Amazon.Runtime.Internal.HttpRequest..ctor (System.Uri requestUri)
[0x00006] in &lt;5fa4eac2df714faba4a923294bf63545&gt;:0 
  at Amazon.Runtime.Internal.HttpWebRequestFactory.CreateHttpRequest
(System.Uri requestUri) [0x00000] in &lt;5fa4eac2df714f
aba4a923294bf63545&gt;:0 
  at Amazon.Runtime.Internal.HttpHandler`1[TRequestContent].CreateWebRequest
(Amazon.Runtime.IRequestContext requestConte
xt) [0x0000e] in &lt;5fa4eac2df714faba4a923294bf63545&gt;:0 
  at Amazon.Runtime.Internal.HttpHandler`1[TRequestContent].InvokeSync
(Amazon.Runtime.IExecutionContext executionContext
) [0x00020] in &lt;5fa4eac2df714faba4a923294bf63545&gt;:0 
  at Amazon.Runtime.Internal.PipelineHandler.InvokeSync
(Amazon.Runtime.IExecutionContext executionContext) [0x0000e] in 
&lt;5fa4eac2df714faba4a923294bf63545&gt;:0 
  at Amazon.Runtime.Internal.Unmarshaller.InvokeSync
(Amazon.Runtime.IExecutionContext executionContext) [0x00000] in &lt;5f
a4eac2df714faba4a923294bf63545&gt;:0 
  at Amazon.Runtime.Internal.PipelineHandler.InvokeSync
(Amazon.Runtime.IExecutionContext executionContext) [0x0000e] in 
&lt;5fa4eac2df714faba4a923294bf63545&gt;:0 
  at Amazon.SQS.Internal.ValidationResponseHandler.InvokeSync
(Amazon.Runtime.IExecutionContext executionContext) [0x0000
0] in &lt;77e6e07db95447a7b69000e72919cece&gt;:0 
  at Amazon.Runtime.Internal.PipelineHandler.InvokeSync
(Amazon.Runtime.IExecutionContext executionContext) [0x0000e] in 
&lt;5fa4eac2df714faba4a923294bf63545&gt;:0 

On the machine I used to create the package to deploy to Amazon Lambda I
have mono installed and on this machine all the applications work
flawlessly.

Installing mono for Amazon Lambda is not an option.

I used mkbundle --deps .... to build the package to deploy to Amazon Lambda.

For a while I suspected that the issue might be due to a missing or empty
mono certificate store.  However I implemented the ICertificatePolicy
interface and accepted everything and that has no affect.

I'd really like to get this working because Amazon Lambda has many practical
benefits.

Any help or suggestions would be greatly appreciated.

Also, and don't know if this is related or relevant, but I cannot get the
--static flag to work with mkbundle.  The link stage always fails saying it
cannot find -lmono-2.0.



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Amazon-Lambda-With-Mono-tp4669222.html">http://mono.1490590.n4.nabble.com/Amazon-Lambda-With-Mono-tp4669222.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044041.html">[Mono-dev] [Mono-list] Mono embedded : EXC_BAD_ACCESS calling mono_object_hash() on MonoDomain *
</A></li>
	<LI>Next message (by thread): <A HREF="044040.html">[Mono-dev] Amazon Lambda With Mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44039">[ date ]</a>
              <a href="thread.html#44039">[ thread ]</a>
              <a href="subject.html#44039">[ subject ]</a>
              <a href="author.html#44039">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
