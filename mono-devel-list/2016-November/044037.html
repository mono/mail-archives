<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [Mono-list] Mono embedded : EXC_BAD_ACCESS calling mono_object_hash() on MonoDomain *
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20%5BMono-list%5D%20Mono%20embedded%20%3A%20EXC_BAD_ACCESS%20calling%0A%20mono_object_hash%28%29%20on%20MonoDomain%20%2A&In-Reply-To=%3C90C83EB2-EDBD-4327-9931-1964903070C0%40mugginsoft.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044038.html">
   <LINK REL="Next"  HREF="044041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [Mono-list] Mono embedded : EXC_BAD_ACCESS calling mono_object_hash() on MonoDomain *</H1>
    <B>Jonathan Mitchell</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20%5BMono-list%5D%20Mono%20embedded%20%3A%20EXC_BAD_ACCESS%20calling%0A%20mono_object_hash%28%29%20on%20MonoDomain%20%2A&In-Reply-To=%3C90C83EB2-EDBD-4327-9931-1964903070C0%40mugginsoft.com%3E"
       TITLE="[Mono-dev] [Mono-list] Mono embedded : EXC_BAD_ACCESS calling mono_object_hash() on MonoDomain *">lists at mugginsoft.com
       </A><BR>
    <I>Tue Nov 22 11:12:47 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044038.html">[Mono-dev] Mono-on-Emscripten (JavaScript) experiment
</A></li>
        <LI>Next message (by thread): <A HREF="044041.html">[Mono-dev] [Mono-list] Mono embedded : EXC_BAD_ACCESS calling mono_object_hash() on MonoDomain *
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44037">[ date ]</a>
              <a href="thread.html#44037">[ thread ]</a>
              <a href="subject.html#44037">[ subject ]</a>
              <a href="author.html#44037">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On 22 Nov 2016, at 00:45, Jon Purdy &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">jopur at microsoft.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> A MonoDomain is not a MonoObject—they have very different internal representations. MonoDomain does internally contain a field (“domain”) of type MonoAppDomain*, which is compatible with MonoObject*, but I don’t think we expose this. What problem are you trying to solve?
</I>&gt;<i> 
</I>Thanks for that. It sounds like MonoAppDomain is what I am after.

I am trying to register for the System.AppDomain.UnhandledException event.
I use an Obj-C bridge (<A HREF="https://github.com/ThesaurusSoftware/Dubrovnik">https://github.com/ThesaurusSoftware/Dubrovnik</A>) to hook up managed events to static native callback functions.
In order to do this I need a MonoObject * representation of the managed object.

It looks as if the public embedded API is deficient in this case.
We do have 

appdomain.c
MONO_API MonoDomain *
mono_domain_from_appdomain (MonoAppDomain *appdomain);

but there is no function the supplies MonoDomain-&gt;domain.

I think this means that System.AppDomain is effectively off limits for the embedded API as without access to a MonoObject * we cannot query methods etc or invoke the runtime.

At a pinch I could do what I need in managed code but I will try and add the required accessor to appdomain.c and see how I get on.
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044038.html">[Mono-dev] Mono-on-Emscripten (JavaScript) experiment
</A></li>
	<LI>Next message (by thread): <A HREF="044041.html">[Mono-dev] [Mono-list] Mono embedded : EXC_BAD_ACCESS calling mono_object_hash() on MonoDomain *
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44037">[ date ]</a>
              <a href="thread.html#44037">[ thread ]</a>
              <a href="subject.html#44037">[ subject ]</a>
              <a href="author.html#44037">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
