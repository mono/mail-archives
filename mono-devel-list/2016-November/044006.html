<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono CI weather report 11/2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20CI%20weather%20report%2011/2&In-Reply-To=%3CF816EC09-7A44-4A9F-B571-D2C05A252E0C%40microsoft.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044011.html">
   <LINK REL="Next"  HREF="044012.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono CI weather report 11/2</H1>
    <B>Andi McClure</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20CI%20weather%20report%2011/2&In-Reply-To=%3CF816EC09-7A44-4A9F-B571-D2C05A252E0C%40microsoft.com%3E"
       TITLE="[Mono-dev] Mono CI weather report 11/2">anmccl at microsoft.com
       </A><BR>
    <I>Wed Nov  2 18:54:16 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044011.html">[Mono-dev] SIGSEGV with large nursery size
</A></li>
        <LI>Next message (by thread): <A HREF="044012.html">[Mono-dev] Future of Mono on XBox One
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44006">[ date ]</a>
              <a href="thread.html#44006">[ thread ]</a>
              <a href="subject.html#44006">[ subject ]</a>
              <a href="author.html#44006">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What this is: The Mono team has a CI (continuous integration) system which builds and runs automated tests on every commit checked in to git (specifically the master branch). We have a test log viewer&lt;<A HREF="https://jenkins.mono-project.com/view/All/job/jenkins-testresult-viewer/Test_Result_View/">https://jenkins.mono-project.com/view/All/job/jenkins-testresult-viewer/Test_Result_View/</A>&gt; on Jenkins that tracks the results (currently only accessible to github project admins, sorry). Once a week (though various recent events have disrupted this scheduleâ€¦) I sweep through and write an email with a list of the most frequently-failing automated tests.

We have recently had a couple problems which are causing entire-lane test failures, so there will be a little less detail this week.

Here are the top failures currently making Jenkins builds fail:

1. Linux/ARM64 lane segfaults

Around October 19, something changed on the ARM64 builder and we started seeing a variety of strange, 100% consistent failures on both master and 4.8.0-branch. Post-October-19, the errors occured on the builder even if one checked out and rebuilt a pre-October-19 build. Yesterday we changed the ARM64 builder configuration to be more like the other builders; this caused ALL the &quot;October 19&quot; failures to disappear, and be replaced with a different set of about 12 failures per test run, all segfaults, about half of which occur consistently on every commit. Zoltan Varga is looking into this.

2. Mac/Intel32 lane BoringSSL failures

Since adding BoringSSL to Mono, we've been getting a set of about ten or twenty failures under MonoTests.System.Security.Cryptography.X509Certificates on every build, on 32-bit mac only. This might be a configuration issue on the 32-bit mac builders. This might not matter to the release (the 4.8.0 public release for mac might not even include BoringSSL, since on MacOS AppleTLS is preferred). Martin Baulig would probably be the person to address this, alternately, we could give in and disable the BTLS tests on Mac.

3. ThreadAbortException in System.Threading.Timer+Scheduler.SchedulerThread  (the &quot;List`1 issue&quot;)

Filed as <A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=43320">https://bugzilla.xamarin.com/show_bug.cgi?id=43320</A> , currently assigned to Rodrigo.

This occurs in many different places but the crash message always looks the same.

Unhandled Exception:
System.TypeInitializationException: The type initializer for 'System.Collections.Generic.List`1' threw an exception. ---&gt; System.Threading.ThreadAbortException
   --- End of inner exception stack trace ---
  at System.Threading.Timer+Scheduler.SchedulerThread () [0x0000f] in &lt;filename unknown&gt;:0
  at System.Threading.ThreadHelper.ThreadStart_Context (System.Object state) [0x00017] in &lt;filename unknown&gt;:0
  at System.Threading.ExecutionContext.RunInternal (System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, System.Object state, System.Boolean preserveSyncCtx) [0x0008d] in &lt;filename unknown&gt;:0
  at System.Threading.ExecutionContext.Run (System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, System.Object state, System.Boolean preserveSyncCtx) [0x00000] in &lt;filename unknown&gt;:0
  at System.Threading.ExecutionContext.Run (System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, System.Object state) [0x00031] in &lt;filename unknown&gt;:0
  at System.Threading.ThreadHelper.ThreadStart () [0x0000b] in &lt;filename unknown&gt;:0
[MVID] 0deb57f9de664ff681556c641423618d 0,1,2,3,4,5
[ERROR] FATAL UNHANDLED EXCEPTION: Nested exception trying to figure out what went wrong

Some places this failure is seen include MonoTests.gshared.generic-marshalbyref.2.exe, MonoTests.runtime.bug-415577.exe, and as an unknown-test failure when a test suite (such as mcs/class/corlib) is shutting down.

Recent example:

<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=debian-8-armel/1109/testReport/MonoTests/gshared/generic_marshalbyref_2_exe/">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=debian-8-armel/1109/testReport/MonoTests/gshared/generic_marshalbyref_2_exe/</A>

Older examples:

<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-amd64/1039/testReport/MonoTests/gshared/generic_marshalbyref_2_exe/">https://jenkins.mono-project.com/job/test-mono-mainline-linux/label=ubuntu-1404-amd64/1039/testReport/MonoTests/gshared/generic_marshalbyref_2_exe/</A>
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-amd64/4606/testReport/MonoTests/gshared/generic_marshalbyref_2_exe_3/">https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-amd64/4606/testReport/MonoTests/gshared/generic_marshalbyref_2_exe_3/</A>
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-amd64/4607/testReport/MonoTests/gshared/generic_marshalbyref_2_exe/">https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-amd64/4607/testReport/MonoTests/gshared/generic_marshalbyref_2_exe/</A>
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-i386/4608/testReport/MonoTests/runtime/bug_415577_exe/">https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-i386/4608/testReport/MonoTests/runtime/bug_415577_exe/</A>
<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-i386/4656/parsed_console/log_content.html#WARNING1">https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-i386/4656/parsed_console/log_content.html#WARNING1</A> (test shutdown)


4. AppDomain.internalUnload hang

Filed as <A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=45337">https://bugzilla.xamarin.com/show_bug.cgi?id=45337</A> , not assigned. During one of the sgen domain unload tests on mac, we often see a hang (followed by a segfault when the process is force quit). The stack we see is:

  at (wrapper managed-to-native) System.AppDomain.InternalUnload (int) &lt;0x00012&gt;
  at System.AppDomain.Unload (System.AppDomain) &lt;0x0002c&gt;

At one time there was a theory this would possibly be fixed if we merged <A HREF="https://github.com/mono/mono/pull/3364">https://github.com/mono/mono/pull/3364</A> .

Recent example (more examples in Bugzilla)

<A HREF="https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-i386/5165/testReport/MonoTests/sgen-regular-tests-ms/sgen_domain_unload_exe_timedout/">https://jenkins.mono-project.com/job/test-mono-mainline/label=osx-i386/5165/testReport/MonoTests/sgen-regular-tests-ms/sgen_domain_unload_exe_timedout/</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/mono-devel-list/attachments/20161102/d3fc3307/attachment-0001.html">http://lists.dot.net/pipermail/mono-devel-list/attachments/20161102/d3fc3307/attachment-0001.html</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044011.html">[Mono-dev] SIGSEGV with large nursery size
</A></li>
	<LI>Next message (by thread): <A HREF="044012.html">[Mono-dev] Future of Mono on XBox One
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44006">[ date ]</a>
              <a href="thread.html#44006">[ thread ]</a>
              <a href="subject.html#44006">[ subject ]</a>
              <a href="author.html#44006">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
