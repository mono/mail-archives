<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] TLS 1.2 to ship in Mono 4.8 + Discussion Topic
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20TLS%201.2%20to%20ship%20in%20Mono%204.8%20%2B%20Discussion%20Topic&In-Reply-To=%3CA498F034-F6A6-4DB6-AB3F-4F7EE252DA31%40microsoft.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044070.html">
   <LINK REL="Next"  HREF="044061.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] TLS 1.2 to ship in Mono 4.8 + Discussion Topic</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20TLS%201.2%20to%20ship%20in%20Mono%204.8%20%2B%20Discussion%20Topic&In-Reply-To=%3CA498F034-F6A6-4DB6-AB3F-4F7EE252DA31%40microsoft.com%3E"
       TITLE="[Mono-dev] TLS 1.2 to ship in Mono 4.8 + Discussion Topic">miguel at microsoft.com
       </A><BR>
    <I>Wed Nov 30 15:52:41 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044070.html">[Mono-dev] Future of Mono's .NET Code Sharing
</A></li>
        <LI>Next message (by thread): <A HREF="044061.html">[Mono-dev] TLS 1.2 to ship in Mono 4.8 + Discussion Topic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44060">[ date ]</a>
              <a href="thread.html#44060">[ thread ]</a>
              <a href="subject.html#44060">[ subject ]</a>
              <a href="author.html#44060">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello team,

The next stable release of Mono will be Mono 4.8, we have created a branch for it called mono-4.8.0-branch that you can get from Git.

This version currently includes our new TLS 1.2 support, based on Google’s BoringSSL stack [1].   This will be used on Android, Linux, Unix, Windows and temporarily for some scenarios when you build on MacOS [2].

As things stand right now, the stack is opt-in, and requires users to set the MONO_TLS_PROVIDER to the value btls, on bash, that looks like this:

export MONO_TLS_PROVIDER=btls

To test if things are working, run this command:

MONO_TLS_PROVIDER=btls csharp -e 'Console.WriteLine (new System.Net.WebClient ().DownloadString (&quot;<A HREF="https://www.howsmyssl.com/">https://www.howsmyssl.com/</A>&quot;).IndexOf (&quot;1.2&quot;))'

The BoringSSL stack uses a new certificate file format, so you need to run the tool “btls-cert-sync” on your system.

If you see this error from the above command:

System.Net.WebException: Error: TrustFailure (Ssl error:1000007d:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED) ---&gt; Mono.Btls.MonoBtlsException: Ssl error:1000007d:SSLroutines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED

It means that you do not have the certificates in the new format.   Run the tool “btls-cert-sync” to convert your existing root certificates into the new file format.   If “btls-cert-sync” complains that “The Old Trust Store does not exist”, you first need to tell Mono how to find these certificates, this page describes how to do it:

<A HREF="http://www.mono-project.com/docs/faq/security/">http://www.mono-project.com/docs/faq/security/</A>

That said.

I was thinking that perhaps this should be the default, and not an opt-in feature, but instead an opt-out feature, so that we could by default ship TLS 1.2 enabled, and if we run into a problem, users facing the problems could set MONO_TLS_PROVIDER to “legacy”.   Thoughts?

Miguel.

[1] BoringSSL stack is a modified version of OpenTLS that Google uses for Chrome and Android, that they maintain and which has some settings altered to increase the security defaults.

[2] When you get Mono from us, we bundle the AppleTLS provider in Mono.   Currently this TLS provider is part of “Xamarin.Mac” and involves an ugly circular dependency.  We are working to eliminate that, so the default compilation from source in the future will give you AppleTLS without having to resort to complex dances.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/mono-devel-list/attachments/20161130/594c1acc/attachment.html">http://lists.dot.net/pipermail/mono-devel-list/attachments/20161130/594c1acc/attachment.html</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044070.html">[Mono-dev] Future of Mono's .NET Code Sharing
</A></li>
	<LI>Next message (by thread): <A HREF="044061.html">[Mono-dev] TLS 1.2 to ship in Mono 4.8 + Discussion Topic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44060">[ date ]</a>
              <a href="thread.html#44060">[ thread ]</a>
              <a href="subject.html#44060">[ subject ]</a>
              <a href="author.html#44060">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
