<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] disabled shared handles
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20disabled%20shared%20handles&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023657.html">
   <LINK REL="Next"  HREF="023642.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] disabled shared handles</H1>
    <B>Joachim Ante</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20disabled%20shared%20handles&In-Reply-To="
       TITLE="[Mono-dev] disabled shared handles">joe at otee.dk
       </A><BR>
    <I>Tue May 22 12:10:29 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023657.html">[Mono-dev] Mono for Symbian
</A></li>
        <LI>Next message: <A HREF="023642.html">[Mono-dev] System.Drawing.Printing bugfixes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23629">[ date ]</a>
              <a href="thread.html#23629">[ thread ]</a>
              <a href="subject.html#23629">[ subject ]</a>
              <a href="author.html#23629">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am trying to build a mono dylib using the disable shared handles  
flag in configure.
But i am getting an assert when starting up mono inside of mini_init.

I get the same assert when running make, while mcs is compiling class  
libraries.

I first thought mcs might require shared handles, so i built the  
compiler first with shared handles enabled, then built the mono dylib  
we are embedding with shared handles disabled.

Is there something else i need to do to make this  work?

I built from the 1.2.4 source drop on a ppc mac os x machine.

Best regards,
Joachim Ante

** ERROR **: file handles.c: line 286 (_wapi_handle_new_shared):  
assertion failed: (thr_ret == 0)
aborting...

#0  0x9004796c in kill ()
#1  0x9012dc14 in abort ()
#2  0x1a021400 in g_logv (log_domain=0x0,  
log_level=G_LOG_LEVEL_ERROR, format=0x20121368 &quot;file %s: line %d (% 
s): assertion failed: (%s)&quot;, args1=0xbffff4c4 &quot; \023??&quot;) at  
gmessages.c:490
#3  0x1a0214b0 in g_log (log_domain=0x0, log_level=0,  
format=0xa0004170 &quot;&quot;) at gmessages.c:509
#4  0x200e8458 in _wapi_handle_new_shared (type=WAPI_HANDLE_PROCESS,  
handle_specific=0xbffff5c0) at handles.c:286
#5  0x200e8814 in _wapi_handle_new (type=WAPI_HANDLE_PROCESS,  
handle_specific=0xbffff5c0) at handles.c:428
#6  0x200f2fd8 in process_set_current () at processes.c:1091
#7  0x200f037c in mono_once (once=0x20194d54, once_init=0x200f2ed0  
&lt;process_set_current&gt;) at mono-mutex.c:80
#8  0x200f3094 in MonoGetCurrentProcess () at processes.c:1111
#9  0x2005aff4 in mono_runtime_init (domain=0x28c8f00,  
start_cb=0x20019294 &lt;mono_thread_start_cb&gt;, attach_cb=0x20019310  
&lt;mono_thread_attach_cb&gt;) at appdomain.c:110
#10 0x2001ed98 in mini_init (filename=0x7ee118 &quot;UnityEngine Root&quot;,  
runtime_version=0x28c8f00 &quot;&quot;) at mini.c:12017
#11 0x000c06e4 in __Z22InitializeMonoFromMainRKSsS1_ () at /Users/joe/ 
unity-2/Runtime/Mono/MonoManager.cpp:1681
#12 0x0011724c in main () at /Users/joe/unity-2/Editor/Src/main.mm:24

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023657.html">[Mono-dev] Mono for Symbian
</A></li>
	<LI>Next message: <A HREF="023642.html">[Mono-dev] System.Drawing.Printing bugfixes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23629">[ date ]</a>
              <a href="thread.html#23629">[ thread ]</a>
              <a href="subject.html#23629">[ subject ]</a>
              <a href="author.html#23629">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
