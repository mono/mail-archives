<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] FastCGI, was: Silverlight early implementation thoughts.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20FastCGI%2C%0A%20was%3A%20Silverlight%20early%20implementation%20thoughts.&In-Reply-To=f1nup6%246cr%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023531.html">
   <LINK REL="Next"  HREF="023493.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] FastCGI, was: Silverlight early implementation thoughts.</H1>
    <B>Marek Habersack</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20FastCGI%2C%0A%20was%3A%20Silverlight%20early%20implementation%20thoughts.&In-Reply-To=f1nup6%246cr%241%40sea.gmane.org"
       TITLE="[Mono-dev] FastCGI, was: Silverlight early implementation thoughts.">grendello at gmail.com
       </A><BR>
    <I>Tue May  8 02:57:46 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023531.html">[Mono-dev] mod_mono, fast_cgi and configuration.
</A></li>
        <LI>Next message: <A HREF="023493.html">[Mono-dev] FastCGI,	was: Silverlight early implementation thoughts.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23491">[ date ]</a>
              <a href="thread.html#23491">[ thread ]</a>
              <a href="subject.html#23491">[ subject ]</a>
              <a href="author.html#23491">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 07 May 2007 21:29:49 +0200, Robert Jordan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">robertj at gmx.net</A>&gt; scribbled:

&gt;<i> Hey,
</I>Hey Robert,

[snip]
&gt;<i> &gt;&gt; One requirement that I have is that the FastCGI bridge supports
</I>&gt;<i> &gt;&gt; auto-configuration, or some other easy form of configuration.
</I>&gt;<i> &gt; Yep, that will be part of the implementation, although I believe it is more
</I>&gt;<i> &gt; a feature of xsp itself than a bridge.
</I>&gt;<i> 
</I>&gt;<i> I doubt FastCGI would be easier to configure.
</I>I believe in quite the contrary :)

&gt;<i> 
</I>&gt;<i> Let's have a look at a typical FastCGI configuration:
</I>&gt;<i> 
</I>&gt;<i> FastCgiServer /usr/lib/mono/www/mono-fastcgi-server
</I>&gt;<i> &lt;Directory /usr/lib/mono/www/&gt;
</I>&gt;<i> 	SetHandler fastcgi-script
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i> Alias /aspnet-app-name /usr/lib/mono/www/mono-fastcgi-server
</I>&gt;<i> 
</I>&gt;<i> If the whole URL namespace should be consumed by mono
</I>&gt;<i> (e.g. to enable ASP.NET application auto-confguration),
</I>&gt;<i> the apache config gets even worse:
</I>&gt;<i> 
</I>&gt;<i> FastCgiServer /usr/lib/mono/www/mono-fastcgi-server
</I>&gt;<i> &lt;Directory /usr/lib/mono/www/&gt;
</I>&gt;<i> 	SetHandler fastcgi-script
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i> Alias /mono-global-handler /usr/lib/mono/www/mono-fastcgi-server
</I>&gt;<i> Action mono-handler /mono-global-handler
</I>&gt;<i> SetHandler mono-handler
</I>This is still much easier to cope with than mod_mono abrakadabra, IMHO :)
Even if some people will consider it to be harder, the configuration above is
specific to apache only and with FastCGI we will be able to use any other
webserver that supports the protocol. This is, in my eyes, the biggest
advantage of having such bridge (in addition to using a standard,
well-supported protocol to handle the requests).

&gt;<i> Configuring an application-to-mono-process mapping, easily
</I>&gt;<i> to achieve with mod_mono, will become a nightmare with FastCGI.
</I>&gt;<i> Moreover, the config snippets above must be inserted in
</I>&gt;<i> every vhost, otherwise the vhosts will share the same
</I>&gt;<i> mono-fastcgi-server process.
</I>That's not entirely true. Please read

<A HREF="http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html#FastCgiWrapper">http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html#FastCgiWrapper</A>

With the help of the above you can create a dynamic setup that suits your needs.
Also, the FastCGI server process receives full information about the request,
therefore virtual server handling can be done on the mono/xsp side by
configuring just one vhost in apache to answer on any and all IP numbers we
want to service and dealing with vhost dispatch after apache hands the
connection to us.

&gt;<i> And since HttpResponse.TransmitFile won't be as efficient as it
</I>&gt;<i> used to be under mod_mono (which simply passes the file name
</I>&gt;<i> to apache), even more apache config voodoo is required (and that's
</I>&gt;<i> the best case).
</I>We don't need to go that way, I think. It must be remembered that we won't be
apache-specific anymore - so any webserver-specific hacks should be forbidden
anyway. If the performance of HttpResponse.TransmitFile is not enough, we can
improve it (I don't know if it uses sendfile(2), but if it doesn't - we should
make it use that syscall and the performance should be better than with
apache. There are also other OS-specific tricks we can use, like the new
splice (2) syscall in Linux).

best regards,

marek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070508/2d7d38a7/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070508/2d7d38a7/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023531.html">[Mono-dev] mod_mono, fast_cgi and configuration.
</A></li>
	<LI>Next message: <A HREF="023493.html">[Mono-dev] FastCGI,	was: Silverlight early implementation thoughts.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23491">[ date ]</a>
              <a href="thread.html#23491">[ thread ]</a>
              <a href="subject.html#23491">[ subject ]</a>
              <a href="author.html#23491">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
