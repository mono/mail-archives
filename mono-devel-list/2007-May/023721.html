<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] MailDefinition patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20MailDefinition%20patch&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023720.html">
   <LINK REL="Next"  HREF="023722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] MailDefinition patch</H1>
    <B>Dumitru Ban</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20MailDefinition%20patch&In-Reply-To="
       TITLE="[Mono-dev] MailDefinition patch">dban at dako.ro
       </A><BR>
    <I>Tue May 29 04:14:18 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023720.html">[Mono-dev] Unit test results
</A></li>
        <LI>Next message: <A HREF="023722.html">[Mono-dev] patch for mono runtime / libgc to support debugger on OSX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23721">[ date ]</a>
              <a href="thread.html#23721">[ thread ]</a>
              <a href="subject.html#23721">[ subject ]</a>
              <a href="author.html#23721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm trying to create a patch for the MailDefinition (System.Web.UI.WebControls) and I'm not sure what's the best way to do it. The problem is in the CreateMailMessage (string recipients, IDictionary replacements, Control owner) method. If the BodyFileName is present and it's rooted everything works fine. If it's not rooted, it is combined with the owner's TemplateSourceDirectory. And this is not working :(

I'm using the MailDefinition from a CreateUserWizard. Both the aspx containing the CreateUserWizard and the mail file are in the same directory, &quot;users&quot;. If I set the BodyFileName for the wizard to &quot;~/users/createaccount.txt&quot;, the combined path is something like this: &quot;/myapp/~/users/createaccount.txt&quot;. And this is because there's no check for &quot;~/&quot;.

If I set the BodyFileName to &quot;createaccount.txt&quot;, the combined path is something like this: &quot;/myapp/users/createaccount.txt&quot;. This one looks fine, except that it's a virtual path and the StreamReader in the CreateMailMessage is looking for a physical path.

How should be the mail file accessed? Using virtual paths or physical paths? Also, what about the permissions of the mail file?

P.S. Attached is a sample error.

Thanks &amp; best regards,
Dumi.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070529/07818203/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070529/07818203/attachment.html</A> 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: maildefinition.txt
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070529/07818203/attachment.txt">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070529/07818203/attachment.txt</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023720.html">[Mono-dev] Unit test results
</A></li>
	<LI>Next message: <A HREF="023722.html">[Mono-dev] patch for mono runtime / libgc to support debugger on OSX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23721">[ date ]</a>
              <a href="thread.html#23721">[ thread ]</a>
              <a href="subject.html#23721">[ subject ]</a>
              <a href="author.html#23721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
