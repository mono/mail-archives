<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] The State Of Mono Assembly Verification?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20The%20State%20Of%20Mono%20Assembly%20Verification%3F&In-Reply-To=20060216212805.12129.qmail%40web25002.mail.ukl.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017174.html">
   <LINK REL="Next"  HREF="017193.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] The State Of Mono Assembly Verification?</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20The%20State%20Of%20Mono%20Assembly%20Verification%3F&In-Reply-To=20060216212805.12129.qmail%40web25002.mail.ukl.yahoo.com"
       TITLE="[Mono-dev] The State Of Mono Assembly Verification?">lupus at ximian.com
       </A><BR>
    <I>Fri Feb 17 05:31:45 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017174.html">[Mono-dev] The State Of Mono Assembly Verification?
</A></li>
        <LI>Next message: <A HREF="017193.html">[Mono-dev] The State Of Mono Assembly Verification?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17185">[ date ]</a>
              <a href="thread.html#17185">[ thread ]</a>
              <a href="subject.html#17185">[ subject ]</a>
              <a href="author.html#17185">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/16/06 Jim Purbrick wrote:
&gt;<i> OK, I've uploaded a first batch of ~230
</I>&gt;<i> verifier tests based on ECMA-335 III here:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://homepage.ntlworld.com/james.purbrick/VerifierTests.tar">http://homepage.ntlworld.com/james.purbrick/VerifierTests.tar</A>
</I>
Thanks ! This is a good start.
I looked a a few of them and they look fine.

&gt;<i> I'd appreciate it if you could take a look and let me
</I>&gt;<i> know if they look OK, especially the III,3.1 and
</I>&gt;<i> III,3.3 tests which I'll mechanically copy and modify
</I>&gt;<i> to make most of the remaining tests. Feel free to
</I>
I'd like this to be done a bit differently. Take the existing tests
you made and change (for example for the 3.1 ones)
add with &lt;BINARY_NUM_OP&gt;. Then a little script will
copy and replace and create tests for each of a list of opcodes.
This way, we only have to check N test case + the list of opcodes
(+ the script, of course;-), instead of checking N * numopcodes tests.

This pattern should be used as much as possible: there are many
tests that look the same but apply to a number of similar opcodes
and we want the test to check all the cases for all the opcodes
while keeping the test source readable.
It would be good to put different kind of tests in different
directories, too.

&gt;<i> Most of these tests assemble with both Mono and MS
</I>&gt;<i> ILASM except in the cases where the CIL is so borked
</I>&gt;<i> that it doesn't make sense (I've left these tests in
</I>&gt;<i> for completeness though).
</I>
We should put these in a separate directory, so that later we
can make our ilasm compile them, maybe with a special command line flag.

&gt;<i> Happily most of the tests are caught by the Mono
</I>&gt;<i> runtime which reports that invalid CIL has been found
</I>&gt;<i> and aborts (Mono 1.1.13). There are cases that cause
</I>&gt;<i> the runtime to crash and others which just run
</I>&gt;<i> silently though.
</I>
I used this makefile as a starting point:

compile: *.cil
	for i in *.cil; do ilasm $$i; done

test:
	for i in *.exe; do mono $$i &gt;/dev/null 2&gt;/dev/null &amp;&amp; echo $$i &quot;NOT ok&quot;; done

We'll take a look at the ilasm failures (it is also important that ilasm
doesn't leave behind 0-length files when it fails).
I will probably add a mono option like --debug-expect-exception=System.InvalidProgramException
so we can more easily check for cases where mono exits with an error and
when it exits because of the correct exception.

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017174.html">[Mono-dev] The State Of Mono Assembly Verification?
</A></li>
	<LI>Next message: <A HREF="017193.html">[Mono-dev] The State Of Mono Assembly Verification?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17185">[ date ]</a>
              <a href="thread.html#17185">[ thread ]</a>
              <a href="subject.html#17185">[ subject ]</a>
              <a href="author.html#17185">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
