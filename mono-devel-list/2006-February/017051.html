<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Linking errors in mono build
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Linking%20errors%20in%20mono%20build&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017064.html">
   <LINK REL="Next"  HREF="017063.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Linking errors in mono build</H1>
    <B>Brian Crowell</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Linking%20errors%20in%20mono%20build&In-Reply-To="
       TITLE="[Mono-dev] Linking errors in mono build">mono-devel at fluggo.com
       </A><BR>
    <I>Thu Feb  9 11:39:47 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017064.html">[Mono-dev] RE: New test suite for System.Web.dll (fwd)
</A></li>
        <LI>Next message: <A HREF="017063.html">[Mono-dev] Linking errors in mono build
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17051">[ date ]</a>
              <a href="thread.html#17051">[ thread ]</a>
              <a href="subject.html#17051">[ subject ]</a>
              <a href="author.html#17051">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Various parts of the mono build process are failing on my installation. Building 
it raw first runs into a link error in making pedump:

****
./.libs/libmonoruntime.a(assembly.o)(.text+0x881): In function 
`mono_assemblies_init':
/home/dsl/mono-1.1.13.2/mono/metadata/assembly.c:481: undefined reference to 
`mono_set_rootdir'
collect2: ld returned 1 exit status
make: *** [pedump] Error 1
****

Investigation shows that the unix path of libmonoos.a was built, but was not 
being used, hence the missing mono_set_rootdir function.

Copying mono/os/unix/.libs/libmonoos.a to mono/os/.libs/libmonoos.a solves that 
problem, but not much further down the line, a whole mess of linker errors 
occurs while building mono itself:

****
gcc -I../.. -I../../libgc/include -I/usr/local/include/glib-2.0 
-I/usr/local/lib/glib-2.0/include -I/usr/local/include/glib-2.0 
-I/usr/local/lib/glib-2.0/include -g -O2 -fno-strict-aliasing -g -Wall -Wunused 
-Wmissing-prototypes -Wmissing-declarations -Wstrict-prototypes 
-Wmissing-prototypes -Wnested-externs -Wpointer-arith -Wno-cast-qual 
-Wcast-align -Wwrite-strings -o mono -Wl,-version-script=./ldscript.mono main.o 
-Wl,--export-dynamic -Wl,--export-dynamic  ./.libs/libmono-static.a 
-L/usr/local/lib ../os/.libs/libmonoos.a -pthread 
/usr/local/lib/libgthread-2.0.so /usr/local/lib/libgmodule-2.0.so -ldl 
/usr/local/lib/libglib-2.0.so -lnsl -lpthread -lm -lrt
./.libs/libmono-static.a(driver.o)(.text+0x320): In function `mini_regression':
/home/dsl/mono-1.1.13.20060208/mono/mini/driver.c:290: undefined reference to 
`mono_image_get_table_rows'
./.libs/libmono-static.a(driver.o)(.text+0x349):/home/dsl/mono-1.1.13.20060208/mono/mini/driver.c:291: 
undefined reference to `mono_get_method'
./.libs/libmono-static.a(driver.o)(.text+0x357):/home/dsl/mono-1.1.13.20060208/mono/mini/driver.c:292: 
undefined reference to `mono_class_init'
./.libs/libmono-static.a(driver.o)(.text+0x3f2):/home/dsl/mono-1.1.13.20060208/mono/mini/driver.c:311: 
undefined reference to `mono_image_get_filename'
****

This appears to be because of a missing reference to 
mono/metadata/.libs/libmonoruntime.a. I'm afraid I'm not familiar with the whole 
automake business, so this one may take me awhile to fix on my own.

Can anyone help me figure out what's going on here? Please?

--Brian

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017064.html">[Mono-dev] RE: New test suite for System.Web.dll (fwd)
</A></li>
	<LI>Next message: <A HREF="017063.html">[Mono-dev] Linking errors in mono build
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17051">[ date ]</a>
              <a href="thread.html#17051">[ thread ]</a>
              <a href="subject.html#17051">[ subject ]</a>
              <a href="author.html#17051">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
