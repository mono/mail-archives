<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] 1147 Ways To Break A Runtime
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%201147%20Ways%20To%20Break%20A%20Runtime&In-Reply-To=20060222154052.GI25823%40debian.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017297.html">
   <LINK REL="Next"  HREF="017310.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] 1147 Ways To Break A Runtime</H1>
    <B>Jim Purbrick</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%201147%20Ways%20To%20Break%20A%20Runtime&In-Reply-To=20060222154052.GI25823%40debian.org"
       TITLE="[Mono-dev] 1147 Ways To Break A Runtime">jimpurbrick at yahoo.co.uk
       </A><BR>
    <I>Wed Feb 22 21:04:50 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017297.html">[Mono-dev] 1076 Ways To Break A Runtime
</A></li>
        <LI>Next message: <A HREF="017310.html">[Mono-dev] 1147 Ways To Break A Runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17309">[ date ]</a>
              <a href="thread.html#17309">[ thread ]</a>
              <a href="subject.html#17309">[ subject ]</a>
              <a href="author.html#17309">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Paolo/All,

New archive here:

<A HREF="http://homepage.ntlworld.com/james.purbrick/VerifierTests6.tar">http://homepage.ntlworld.com/james.purbrick/VerifierTests6.tar</A>

I've added tests for loading overlapped fields, boxing
byref types and other exotica, tidied up the scripts
so they are much clearer and simpler and fixed a load
of tests. All the tests bar those which reference
non-existent fields and methods now assemble with Mono
ilasm and all the resultant exes give (only) the
expected verification errors when run through MS
peverify /IL (although MS peverify seems fine about
stack merging native ints with int32s and loading
initonly fields).

&gt;<i> Would you mind extracting the IL template source in
</I>&gt;<i> their own files? Maybe something called 
</I>&gt;<i> testtype.iltmpl. This way it's easier to look at 
</I>&gt;<i> them.
</I>
Hmm, I like having the templates in the scripts to
keep  them encapsulated and I think it's easier to
keep the markers in the templates and substitution
commands in sync that way. I've added some white space
between the script commands and templates in the
scripts though, so it's easier to see the CIL now.

&gt;<i> Note that at least some templetes are invalid:
</I>&gt;<i> in make_bin_test.sh the signature of Main() is
</I>&gt;<i> parametrized, but this is not allowed, since only no
</I>
&gt;<i> args or string[] is accepted.
</I>
I think I've fixed this now.

&gt;<i> The attached Makefile is what I temporarily use
</I>
I don't think I got the attachment. I've hacked
together some scripts for now. I'll leave the decision
as to how you want to integrate the tests with the
Mono SVN tree up to you.

&gt;<i> Or, another option that would make testing much
</I>&gt;<i> faster: instead of having independent il programs, 
</I>&gt;<i> make them compile to a library and generate a C# 
</I>&gt;<i> driver program that calls each function with a try
</I>{}
&gt;<i> catch (ExpectedException) {} clause. This can't be 
</I>&gt;<i> done for all the tests, though ...
</I>
It also makes it more difficult to run through other
external verifiers or runtime verifiers which don't
through the same exception. I think it's useful to be
able to compare results from the different verifiers,
so I think we should keep the tests as separate CIL
files.

&gt;<i> It is always possible to merge two references to
</I>&gt;<i> Object. This doesn't mean that the later uses of 
</I>&gt;<i> this object are verifiable. Say that a callvirt is 
</I>&gt;<i> done on the object to MyMethod (): this call won't 
</I>&gt;<i> be verifiable, because Object doesn't define a 
</I>&gt;<i> MyMethod () method. Hope this clears things up.
</I>
Yes, thanks. I'm going to need a test that's a bit
more involved than the current 10 line CIL snippets
for this one... ;-)

&gt;<i> Not sure what you mean by slot type. The type of the
</I>&gt;<i> target field/local/etc must be compatible with the 
</I>&gt;<i> stack type of the values that is going to be stored 
</I>&gt;<i> to it.
</I>
Yes. I needed to read partition I to clear this up.
I,8.7 says that values either need to be assignment
compatible with locations or it needs to be possible
to coerce the value so it is compatible. So, I need
another set of tests for assignment compatibility.
I'll do those tomorrow.

Cheers,

Jim.


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail <A HREF="http://uk.messenger.yahoo.com">http://uk.messenger.yahoo.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017297.html">[Mono-dev] 1076 Ways To Break A Runtime
</A></li>
	<LI>Next message: <A HREF="017310.html">[Mono-dev] 1147 Ways To Break A Runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17309">[ date ]</a>
              <a href="thread.html#17309">[ thread ]</a>
              <a href="subject.html#17309">[ subject ]</a>
              <a href="author.html#17309">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
