<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] a question on ThreadAbortException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20a%20question%20on%20ThreadAbortException&In-Reply-To=e4aa78cf0602240913l3de878ccm5a1d15fdbb32eff8%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017325.html">
   <LINK REL="Next"  HREF="017333.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] a question on ThreadAbortException</H1>
    <B>Brian Crowell</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20a%20question%20on%20ThreadAbortException&In-Reply-To=e4aa78cf0602240913l3de878ccm5a1d15fdbb32eff8%40mail.gmail.com"
       TITLE="[Mono-dev] a question on ThreadAbortException">mono-devel at fluggo.com
       </A><BR>
    <I>Fri Feb 24 12:30:38 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017325.html">[Mono-dev] a question on ThreadAbortException
</A></li>
        <LI>Next message: <A HREF="017333.html">[Mono-dev] I would like to help out!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17327">[ date ]</a>
              <a href="thread.html#17327">[ thread ]</a>
              <a href="subject.html#17327">[ subject ]</a>
              <a href="author.html#17327">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>huangyi wrote:
&gt;<i> My project need to run and schedule many scripts written by user (and 
</I>&gt;<i> user can write code like &quot;while(true) ;&quot;), because the number of scripts 
</I>&gt;<i> is huge, so i use a single thread running all the scripts.so i need a 
</I>&gt;<i> function just like Abort() to interrupt the current script (if time out) 
</I>&gt;<i> and go on to run next script, but i don't know how to implement that in 
</I>&gt;<i> c/c++.
</I>
I'll warn you about something: The ThreadAbortException wasn't designed to be 
caught and ignored. According to specs, it will be thrown again at the end of 
any catch block that catches it. To cancel the thread abort, you would have to 
call the Thread.ResetAbort() method inside whatever catch block you use.

But therein lies another problem. If the user's scripting language supports it, 
the user can set up his own ThreadAbortException handler and either call 
Thread.Abort() or refuse to leave the catch block.

The .NET Framework 2.0 includes explicit support for what's called a &quot;rude 
thread abort&quot; which kills a thread and only guarantees that certain special 
finally blocks will be run, and no others. Does Mono have something similar?

I've considered this problem for running user scripts and concluded that 
whatever scripting language the user uses must allow me to define what a user 
can do, including setting up exception handlers and defining what external code 
is available (to limit access to Thread.ResetAbort()). I know there are 
scripting engines out there like that, but none comes to mind.

Does anyone have any recommendations?

--Brian

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017325.html">[Mono-dev] a question on ThreadAbortException
</A></li>
	<LI>Next message: <A HREF="017333.html">[Mono-dev] I would like to help out!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17327">[ date ]</a>
              <a href="thread.html#17327">[ thread ]</a>
              <a href="subject.html#17327">[ subject ]</a>
              <a href="author.html#17327">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
