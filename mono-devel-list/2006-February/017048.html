<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] DriveInfo
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20DriveInfo&In-Reply-To=1139485725.26918.28.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017045.html">
   <LINK REL="Next"  HREF="017038.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] DriveInfo</H1>
    <B>Christopher Bergstr&#246;m</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20DriveInfo&In-Reply-To=1139485725.26918.28.camel%40localhost.localdomain"
       TITLE="[Mono-dev] DriveInfo">cbergstrom at netsyncro.com
       </A><BR>
    <I>Thu Feb  9 10:42:34 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017045.html">[Mono-dev] DriveInfo
</A></li>
        <LI>Next message: <A HREF="017038.html">[Mono-dev] Nullable types assignment crashes reflection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17048">[ date ]</a>
              <a href="thread.html#17048">[ thread ]</a>
              <a href="subject.html#17048">[ subject ]</a>
              <a href="author.html#17048">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jonathan Pryor wrote:

&gt;<i>On Thu, 2006-02-09 at 14:40 +1300, Thong Nguyen wrote:
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>I notice that there is already a UnixDriveInfo.  I'm implementing a
</I>&gt;&gt;<i>System.IO.DriveInfo that currently just reflects on UnixDriveInfo.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>As a sanity check, you should make sure your DriveInfo members reflect
</I>&gt;<i>the final .NET 2.0 DriveInfo members.  I wrote UnixDriveInfo during one
</I>&gt;<i>of the .NET 2.0 betas, so it's entirely possible that they added/changed
</I>&gt;<i>the members.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>UnixDriveInfo currently doesn't do any &quot;DriveType&quot; detection -- is there a
</I>&gt;&gt;<i>reliable POSIX way of detecting the &quot;type&quot; of a disk (cdrom, ram, etc).
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>If I knew of one, I'd have used it. :-)
</I>&gt;<i>
</I>&gt;<i>I'd love to know an answer to this one.  This information might be
</I>&gt;<i>available via some ioctl(2) call, and if that's true you'll have more
</I>&gt;<i>trouble than me, since you'll need to add the appropriate Win32 calls to
</I>&gt;<i>I/O layer and use an internal call, since mscorlib.dll can't depend on
</I>&gt;<i>Mono.Posix.dll...
</I>&gt;<i>  
</I>&gt;<i>
</I>The source for hdparm and sdparm will probably show which sys calls are 
being used to get info.

hdparm -I /dev/hdx
hdparm -i /dev/hdx

&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>UnixDriveInfo.GetDrives reads fstab which doesn't work with disks mounted
</I>&gt;&gt;<i>but not listed in fstab (disks mounted manually or by automount).  Anyone
</I>&gt;&gt;<i>got any good proposals on the best way to handle this?
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>HAL?  Alas, that isn't POSIX; it's only used by Gnome afaik.
</I>&gt;<i>
</I>&gt;<i>This is another area that doesn't seem to be well supported by POSIX.
</I>&gt;<i>  
</I>&gt;<i>
</I>eh?
cat /etc/mtab
cat /proc/mounts

Shows which drives are currently mounted.
(If proc wasn't copied and running under a chroot you won't be able to 
get it, but this may* be rare.)

there is a basic assumptions..

/dev/hdx = ata device
/dev/sdx = scsi device
/dev/md = software raid something (I might be mistaken on this.)

sata depending on the driver being used can end up being hdx or sdx

Hope this was helpful

C.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017045.html">[Mono-dev] DriveInfo
</A></li>
	<LI>Next message: <A HREF="017038.html">[Mono-dev] Nullable types assignment crashes reflection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17048">[ date ]</a>
              <a href="thread.html#17048">[ thread ]</a>
              <a href="subject.html#17048">[ subject ]</a>
              <a href="author.html#17048">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
