<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Possible problem with Console in 1.1.18
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Possible%20problem%20with%20Console%20in%201.1.18&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021036.html">
   <LINK REL="Next"  HREF="021039.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Possible problem with Console in 1.1.18</H1>
    <B>Susan Mackay</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Possible%20problem%20with%20Console%20in%201.1.18&In-Reply-To="
       TITLE="[Mono-dev] Possible problem with Console in 1.1.18">susanmackay at optusnet.com.au
       </A><BR>
    <I>Fri Oct 20 08:02:12 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021036.html">[Mono-dev] [PATCH] mod_mono configurable umask value
</A></li>
        <LI>Next message: <A HREF="021039.html">[Mono-dev] Parameter names and class status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21060">[ date ]</a>
              <a href="thread.html#21060">[ thread ]</a>
              <a href="subject.html#21060">[ subject ]</a>
              <a href="author.html#21060">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>(MacBook Pro, Intel processors, OS X V10.4.8, Mono 1.1.18 from the
MonoFramework-1.1.18_0.macos10.novell.x86.dmg distribution image)

I wrote the following trivial program:


================================
using System;

namespace InstallTest
{
    public class InstallTest
    {
        public static void Main()
        {
            // Insert your code here
            Console.WriteLine( &quot;Goodbye, Forever!&quot;);
            return;
        }
    }
}
===============================

When I tried to use gmcs to compile and then use Mono to run this (actually
within the Xcode environment on OS X which simply creates a sub-process
attached to a pseudo-terminal) I get the following errors:

=================================
Unhandled Exception: System.TypeInitializationException: An exception was
thrown by the type initializer for System.Console ---&gt;
System.NullReferenceException: Object reference not set to an instance of an
object
  at System.TermInfoDriver.Init () [0x00000]
  at System.ConsoleDriver.Init () [0x00000]
  at System.Console..cctor () [0x00000] --- End of inner exception stack
trace ---

  at &lt;0x00000&gt; &lt;unknown method&gt;
  at InstallTest.InstallTest.Main () [0x00000]
[39;49m

==================================

I also wrote the following test program:

====================
using System;
using System.Diagnostics;

namespace RunTest
{
    public class RunTest
    {
        public static int Main()
        {
            Process proc = new Process();
            proc.StartInfo.FileName = &quot;/usr/bin/Mono&quot;;
            proc.StartInfo.Arguments = &quot;InstallTest.exe&quot;;
            proc.StartInfo.UseShellExecute = false;
            proc.StartInfo.RedirectStandardOutput = false;
            proc.Start();
            proc.WaitForExit();
            return 4;
        }
    }
}
=====================

which returns the same error message but followed by the &quot;...has exited with
status 4&quot; message, which indicates the error message is coming from the
sub-process. If I comment out the 'Start()' and 'WaitForExit()' lines the
program runs and returns the exit status of '4' as expected.

Also if I compile with mcs instead of gmcs, then I get the expected
behaviour from the original program.

When I try this from the 'standard' terminal emulator I get the expected
output in all situations.

I note that the release notes state that a new Console module was added that
was supposed to fix problems with redirection. (By the way, the original
program code worked fine under 1.1.17 with both mcs and gmcs)

Is this a bug?

Thanks

Susan



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021036.html">[Mono-dev] [PATCH] mod_mono configurable umask value
</A></li>
	<LI>Next message: <A HREF="021039.html">[Mono-dev] Parameter names and class status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21060">[ date ]</a>
              <a href="thread.html#21060">[ thread ]</a>
              <a href="subject.html#21060">[ subject ]</a>
              <a href="author.html#21060">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
