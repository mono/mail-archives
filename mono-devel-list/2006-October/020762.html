<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Patch to StructureReader.cs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%20to%20StructureReader.cs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020761.html">
   <LINK REL="Next"  HREF="020763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Patch to StructureReader.cs</H1>
    <B>Eyal Alaluf</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%20to%20StructureReader.cs&In-Reply-To="
       TITLE="[Mono-dev] Patch to StructureReader.cs">eyala at mainsoft.com
       </A><BR>
    <I>Wed Oct  4 12:21:28 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020761.html">[Mono-dev] Patch for AssemblyNameReference Parse method
</A></li>
        <LI>Next message: <A HREF="020763.html">[Mono-dev] Patch to StructureReader.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20762">[ date ]</a>
              <a href="thread.html#20762">[ thread ]</a>
              <a href="subject.html#20762">[ subject ]</a>
              <a href="author.html#20762">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, JB.

In StructureReader.cs under the rare case when the assembly contains more then
1 module the module that is read should also be visited by the StructureReader
otherwise we get exceptions.
The DLL that showed this was either System.EnterpriseServices.dll or one
of the DLLs it uses.
Please let me know if you have any comments before I commit.

Eyal.
-------------- next part --------------
Index: Mono.Cecil/StructureReader.cs

===================================================================

--- Mono.Cecil/StructureReader.cs	(revision 66216)

+++ Mono.Cecil/StructureReader.cs	(working copy)

@@ -232,6 +232,7 @@

 							modext.Mvid = module.Image.MetadataRoot.Streams.GuidHeap [mr.Mvid];
 
 							modules.Add (modext);
+							modext.Accept(this);
 						} catch (ReflectionException) {
 							throw;
 						} catch (Exception e) {
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020761.html">[Mono-dev] Patch for AssemblyNameReference Parse method
</A></li>
	<LI>Next message: <A HREF="020763.html">[Mono-dev] Patch to StructureReader.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20762">[ date ]</a>
              <a href="thread.html#20762">[ thread ]</a>
              <a href="subject.html#20762">[ subject ]</a>
              <a href="author.html#20762">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
