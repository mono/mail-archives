<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Global register allocator in JIT
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Global%20register%20allocator%20in%20JIT&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020905.html">
   <LINK REL="Next"  HREF="020857.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Global register allocator in JIT</H1>
    <B>Sergey Tikhonov</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Global%20register%20allocator%20in%20JIT&In-Reply-To="
       TITLE="[Mono-dev] Global register allocator in JIT">tsv at solvo.ru
       </A><BR>
    <I>Tue Oct 10 16:24:24 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020905.html">[Mono-dev] .NET Micro Framework Platform
</A></li>
        <LI>Next message: <A HREF="020857.html">[Mono-dev] Global register allocator in JIT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20850">[ date ]</a>
              <a href="thread.html#20850">[ thread ]</a>
              <a href="subject.html#20850">[ subject ]</a>
              <a href="author.html#20850">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I am trying to make global register allocator to work on Alpha mono 
port. It started to use dedicated global registers, but
I could not get an idea how it supposed to work. For example:
DUMP BLOCK 2:
 (beq[B3B4] (compare (and (or (long_conv_to_i4 (ldind.i 
regvar[alpha_r12])) (long_conv_to_i4 (ldind.i regvar[alpha_r13]))) 
iconst[3]) iconst[0]))
uses alpha_r12 and alpha_r13 registers that hold args passed to a method 
(so far good). But this code is translated to:
LOCAL REGALLOC: BASIC BLOCK: 2
        1  move R34 &lt;- alpha_r12
        2  conv.i4 R33 &lt;- R34
        3  move R36 &lt;- alpha_r13
        4  conv.i4 R35 &lt;- R36
        5  int_or R32 &lt;- R33 R35
        6  int_and_imm R31 &lt;- R32
        7  alpha_cmp_imm_eq R31
        8  int_bne_un
Now it start to use local registers to do conv.i4 conversion. Why it can 
use allocated global regs as source regs for conv opcode?
Should peephole pass to handle this? (but it would get complex :( ) How 
it should work?

Thank you,
Sergey.

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">tsv at solvo.ru</A>
Solvo Ltd.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020905.html">[Mono-dev] .NET Micro Framework Platform
</A></li>
	<LI>Next message: <A HREF="020857.html">[Mono-dev] Global register allocator in JIT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20850">[ date ]</a>
              <a href="thread.html#20850">[ thread ]</a>
              <a href="subject.html#20850">[ subject ]</a>
              <a href="author.html#20850">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
