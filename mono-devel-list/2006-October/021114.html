<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Managed DirectX
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Managed%20DirectX&In-Reply-To=4540E632.2060200%40fluggo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021112.html">
   <LINK REL="Next"  HREF="021115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Managed DirectX</H1>
    <B>Jon Chambers</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Managed%20DirectX&In-Reply-To=4540E632.2060200%40fluggo.com"
       TITLE="[Mono-dev] Managed DirectX">joncham at gmail.com
       </A><BR>
    <I>Thu Oct 26 13:05:32 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021112.html">[Mono-dev] Managed DirectX
</A></li>
        <LI>Next message: <A HREF="021115.html">[Mono-dev] Managed DirectX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21114">[ date ]</a>
              <a href="thread.html#21114">[ thread ]</a>
              <a href="subject.html#21114">[ subject ]</a>
              <a href="author.html#21114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you're asking about the performance of the current COM Interop
implementation, I don't have many answers. It has not been optimized at all
currently. A brief benchmark showed COM Interop on mono running at about 5x
slower than on .Net. I'm sure that will get better if I spend some time
working on that (but I'd rather get some other features working first). I
don't know how this compares to the icall example you posted.

Remember though, there is a lot of stuff that goes on beyond emitting a
calli instruction. Proper reference counting, type marshalling, casting/QI,
preserving identity, etc. Right now, a COM Interop call involves the
overhead of an equivalent pinvoke call, plus some other stuff for mapping
managed call signature to COM signature, reference counting, retrieving
function pointer from vtable at call time, preserving identity of Runtime
Callable Wrappers (so each COM object is only represented by one managed
wrapper), etc.

- Jonathan

On 10/26/06, Brian Crowell &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel at fluggo.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Jon Chambers wrote:
</I>&gt;<i> &gt; interop assemblies. If you want to try anything out on mono, you will
</I>&gt;<i> &gt; need to build you interop assemblies with .Net (either by hand or via
</I>&gt;<i> &gt; tlbimp). If you need any other help let me know.
</I>&gt;<i>
</I>&gt;<i> All right, I went back and found the COM import examples in the .NET
</I>&gt;<i> documentation. I had read this stuff once, but I hadn't ever tried it out.
</I>&gt;<i> Managed to get an IDirect3D9 interface definition working in pure C#.
</I>&gt;<i>
</I>&gt;<i> That lends some possibility to doing the whole thing in C#. *Now* my
</I>&gt;<i> question is how this performs. How do runtime-callable-wrappers perform,
</I>&gt;<i> compared to doing the icall shown in the previous IL listing?
</I>&gt;<i>
</I>&gt;<i> --Brian
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20061026/0f5ac51b/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20061026/0f5ac51b/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021112.html">[Mono-dev] Managed DirectX
</A></li>
	<LI>Next message: <A HREF="021115.html">[Mono-dev] Managed DirectX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21114">[ date ]</a>
              <a href="thread.html#21114">[ thread ]</a>
              <a href="subject.html#21114">[ subject ]</a>
              <a href="author.html#21114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
