<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Next Gendarme release(s)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Next%20Gendarme%20release%28s%29&In-Reply-To=5ce88b280609290354m160e7720l922bdce159687a53%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020695.html">
   <LINK REL="Next"  HREF="020696.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Next Gendarme release(s)</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Next%20Gendarme%20release%28s%29&In-Reply-To=5ce88b280609290354m160e7720l922bdce159687a53%40mail.gmail.com"
       TITLE="[Mono-dev] Next Gendarme release(s)">sebastien at ximian.com
       </A><BR>
    <I>Fri Sep 29 09:42:54 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020695.html">[Mono-dev] Next Gendarme release(s)
</A></li>
        <LI>Next message: <A HREF="020696.html">[Mono-dev] Help on fixing bug...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20697">[ date ]</a>
              <a href="thread.html#20697">[ thread ]</a>
              <a href="subject.html#20697">[ subject ]</a>
              <a href="author.html#20697">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Christian,

On Fri, 2006-09-29 at 12:54 +0200, Christian Birkl wrote:
&gt;<i> Hi Sebastien,
</I>&gt;<i> 
</I>&gt;<i> 2006/9/13, Sebastien Pouliot <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastien at ximian.com</A>: 
</I>&gt;<i>         
</I>&gt;<i>         Last note: I plan on releasing another Gendarme version at, or
</I>&gt;<i>         after,
</I>&gt;<i>         the meeting - possibly including some participants feedback.
</I>&gt;<i>         Let me know 
</I>&gt;<i>         if you have bigger changes ready before mid-October.
</I>&gt;<i>  
</I>&gt;<i> I'd like to see the following changes in the next gendarme release
</I>&gt;<i> (well, I guess not all will make it ;-) - some are cosmetic, some make
</I>&gt;<i> rule writing more easier imho, ...)
</I>&gt;<i>  
</I>&gt;<i> 1) new ctor overloads for Location
</I>&gt;<i>  
</I>&gt;<i> - Location (AssemblyDefinition)
</I>&gt;<i> - Location (ModuleDefinition)
</I>&gt;<i> - Location (TypeReference)
</I>&gt;<i> - Location (MethodDefinition)
</I>&gt;<i> - Location (MethodDefinition, Instruction ins)
</I>&gt;<i>  
</I>&gt;<i> Currently nearly every rule builds the location strings by themselves
</I>&gt;<i> (new Location(method.DeclaringType.FullName, method.Name,
</I>&gt;<i> insn.Offset)). Imho those new overloads make the code more readable by
</I>&gt;<i> writing code like new Location (method, ins) or new Location (type).
</I>
It makes sense to have helper ctors. Please provide a patch and it
should go quickly into SVN ;-)

&gt;<i> 2) message texts should be stored in &lt;assembly&gt;.xml
</I>&gt;<i>  
</I>&gt;<i> An example: UseStringEmptyRule.cs: Message msg = new Message
</I>&gt;<i> (&quot;instance of an empty string has been found.&quot;, loc,
</I>&gt;<i> MessageType.Warning). But on the other side rule problem and solution
</I>&gt;<i> are stored in the rule information xml file. This is just a &quot;to be
</I>&gt;<i> consistent&quot; change, but perhaps will help you later to bring i8n to
</I>&gt;<i> gendarme. A proposal:
</I>&gt;<i>  
</I>&gt;<i> &lt;rule&gt;
</I>&gt;<i>   &lt;problem&gt;...&lt;/problem&gt;
</I>&gt;<i>   &lt;solution&gt;...&lt;/solution&gt;
</I>&gt;<i>   &lt;messages&gt;
</I>&gt;<i>      &lt;message Id=&quot;instance-found&quot;&gt;instance of an empty string has been
</I>&gt;<i> found.&lt;/message&gt;
</I>&gt;<i>   &lt;/messages&gt;
</I>&gt;<i> &lt;/rule&gt;
</I>&gt;<i>  
</I>&gt;<i> Code: new Message (&quot;instance-found&quot;, new Location (method, ins));
</I>
Using the XML files for string was my original idea. However I'm not
sure about that anymore. It's definitively something I want to talk with
some folks at the mono meeting. Ideally we would find a way to make it
easy (or at least identical) to i18n the rules, framework and all
(present and future) runners.

Any comments are welcome on the subject (and feel free to email me a
patch to the gendarme TODO file so we don't forget about this).

&gt;<i> 3) Remove the full qualified assembly name inside rule information
</I>&gt;<i> file.
</I>&gt;<i>  
</I>&gt;<i> Currently each rule stores its assembly name via a Makefile
</I>&gt;<i> preconditioned attribute
</I>&gt;<i> (Type=&quot;Gendarme.Rules.Performance.EmptyDestructorRule,
</I>&gt;<i> Gendarme.Rules.Performance, Version=@VERSION@, Culture=neutral,
</I>&gt;<i> PublicKeyToken=null&quot;). As proposed before this may not be necessary if
</I>&gt;<i> you don't want to load your rules from the GAC (which imho will never
</I>&gt;<i> happen). By just specifying Type and/or AssemblyName you could drop
</I>&gt;<i> the Makefile dependency and let other developers easier work with
</I>&gt;<i> these files. It's not very &quot;sexy&quot; to modify those files manually if
</I>&gt;<i> you are using a IDE (like Visual Studio or #Develop).
</I>
You're probably right. Still it's a change I prefer to wait implementing
until we have a (or many ;-) GUI runners (so we don't end up changing
this many times over many versions).

(please feel free to email me a patch to the gendarme TODO file).

&gt;<i> 4) Redefine &quot;Rule Failure&quot; and &quot;Rule Success&quot;
</I>&gt;<i>  
</I>&gt;<i> With the current framework it is possible to create a violation by
</I>&gt;<i> just returning an empty collection. IMHO each violation should have a
</I>&gt;<i> location to make tracking down the source easier. My proposal is that
</I>&gt;<i> rule &quot;fails&quot; if one or more messages are returned by the CheckXXX
</I>&gt;<i> methods. 
</I>
Yes, it make sense. Actually the current implementation is mixed between
this (new rules) and a boolean (old rules)...

&gt;<i> On a side node, I don't like the &quot;static RuleFailure&quot; and
</I>&gt;<i> &quot;RuleSuccess&quot; properties which imho can be dropped if the above change
</I>&gt;<i> may be accepted.
</I>
That part was added to ease old (boolean) rules migration with the API
change - i.e. it can be removed once all rules are updated to the latest
API. Patches are welcome to complete this migration (and remove the
helpers).

&gt;<i> As always, RFC :-)
</I>
Thanks!

&gt;<i> Christian
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>-- 
Sebastien Pouliot  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastien at ximian.com</A>&gt;
Blog: <A HREF="http://pages.infinit.net/ctech/">http://pages.infinit.net/ctech/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020695.html">[Mono-dev] Next Gendarme release(s)
</A></li>
	<LI>Next message: <A HREF="020696.html">[Mono-dev] Help on fixing bug...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20697">[ date ]</a>
              <a href="thread.html#20697">[ thread ]</a>
              <a href="subject.html#20697">[ subject ]</a>
              <a href="author.html#20697">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
