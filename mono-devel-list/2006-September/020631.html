<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Cannot compile mono or mcs, please help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Cannot%20compile%20mono%20or%20mcs%2C%20please%20help&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020637.html">
   <LINK REL="Next"  HREF="020639.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Cannot compile mono or mcs, please help</H1>
    <B>David Piepgrass</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Cannot%20compile%20mono%20or%20mcs%2C%20please%20help&In-Reply-To="
       TITLE="[Mono-dev] Cannot compile mono or mcs, please help">qwertie256 at gmail.com
       </A><BR>
    <I>Mon Sep 25 21:07:42 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020637.html">[Mono-dev] [PATCH] System.Security: Remove &quot;hack&quot;	from	KeyInfoX509Data
</A></li>
        <LI>Next message: <A HREF="020639.html">[Mono-dev] Cannot compile mono or mcs, please help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20631">[ date ]</a>
              <a href="thread.html#20631">[ thread ]</a>
              <a href="subject.html#20631">[ subject ]</a>
              <a href="author.html#20631">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>As a school project, I have decided to add unit checking to C# using
annotations in comments. With this feature, you would potentially be able to
write code like this...

double average(IList&lt;double&gt; list)
{
    double total = 0;
    for (int i = 0; i &lt; list.Count; i++)
        total += list[i];
    return total / list.Count;
}

...and the compiler could automatically deduce that the return value has the
same units as the elements of the list.

Similarly you could write this function with an annotation in a comment...

double get_volume_of_sphere(double radius)
    // units: radius metres, return metres^3
{
    return (4.0/3.0*PI) * (radius*radius);
}

...and the compiler could automatically detect the unit error in the
formula. It could also work with polymorphic units like so:

double get_volume_of_sphere(double radius)
    // units: radius d1, return d1^3
    // (&quot;d1&quot; represents any unit, e.g. feet, millimetres, etc.)

I was hoping I could use gmcs as a starting point, assuming I could figure
out how the code works.  Unfortunately, I can't even figure it out well
enough to compile it.

I have tried the following compiling methods (on Win32):

1) Checking out the mcs tree from Subversion and using mcs.sln and gmcs.sln.
This is a non-starter. In the case of mcs, cs-parser.cs and Consts.cs are
missing; and in the case of gmcs, MOST of the source files are missing!

2) Following the instructions to build mono.
- I downloaded mono-1.1.17.1.tar.gz from <A HREF="http://go-mono.com/sources-latest/">http://go-mono.com/sources-latest/</A>
- I downloaded Cygwin and installed all the dependencies mentioned in the
&quot;Windows Compilation&quot; section at <A HREF="http://www.mono-project.com/Compiling_Mono,">http://www.mono-project.com/Compiling_Mono,</A>
including the &quot;other dependencies&quot;.
- I ran do-install-zip-pkgs according to the instructions, and it seemed to
work.
- I ran ./configure in the main folder, mono-1.1.17.1. It failed while
attempting to run &quot;/lib/cpp&quot; (/lib/cpp did not exist) so I installed g++
from the cygwin setup program. It failed again and I ended up installing
glib and pkgconfig from the cygwin setup program. I tried again and it
seemed to work.
- I ran &quot;make&quot; within the main folder, mono-1.1.17.1. After 5 or 10 minutes
it failed with (IIRC!) &quot;[sample.c] Error 128&quot;.
- I ran env.sh (the instructions aren't clear about the need to run this).
- I ran &quot;make&quot; again.  After about 10 minutes it failed with this output:

---------------------------------------------------------------------
Making all in mini
make[3]: Entering directory `/cygdrive/d/Dev/University/ENCM599/mono-
1.1.17.1/mono/mini'
../../mono/monoburg/monoburg -c 1 -p -e ./inssel.brg ./inssel-float.brg./inssel-
long32.brg ./inssel-x86.brg -d inssel.h
 -s inssel.c
make[3]: *** [inssel.c] Error 128
make[3]: Leaving directory `/cygdrive/d/Dev/University/ENCM599/mono-
1.1.17.1/mono/mini'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/cygdrive/d/Dev/University/ENCM599/mono-
1.1.17.1/mono'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/cygdrive/d/Dev/University/ENCM599/mono-1.1.17.1
'
make: *** [all] Error 2
---------------------------------------------------------------------

3) Compiling the mcs directory only.
- I ran &quot;make&quot; in the mcs folder, but it failed quickly.  The output (shown
below) suggests an error in the grammar, which is surely not the real
problem.

---------------------------------------------------------------------
make[2]: Entering directory `/cygdrive/d/Dev/University/ENCM599/mono-
1.1.17.1/mcs/mcs'
../jay/jay -ctv &lt; ../jay/skeleton.cs cs-parser.jay &gt; jay-tmp.out &amp;&amp; mv
jay-tmp.out cs-parser.cs
../jay/jay: 5 rules never reduced
../jay/jay: 30 shift/reduce conflicts, 1 reduce/reduce conflict.
Creating ../build/deps/mcs.exe.response ...
make[2]: *** No rule to make target
`../class/Mono.CompilerServices.SymbolWriter/MonoSymbolFile.cs', needed by
`../class
/lib/default/mcs.exe'.  Stop.
make[2]: Leaving directory `/cygdrive/d/Dev/University/ENCM599/mono-
1.1.17.1/mcs/mcs'
make[1]: *** [do-all] Error 2
make[1]: Leaving directory `/cygdrive/d/Dev/University/ENCM599/mono-
1.1.17.1/mcs/mcs'
make: *** [all-recursive] Error 1
---------------------------------------------------------------------

At this point I feel like my best best is manual compilation, but I am very
puzzled.

- Why can't I find the Jay, the &quot;C# port of yacc&quot;?  The &quot;mcs/jay&quot; folder
only contains a C program.  I think Jay is required to build cs-parser.cs,
right?
- What is Consts.cs and how does one build it?
- Why are so many source files missing from gmcs in Subversion?
- Why doesn't mono-1.1.17.1.tar.gz contain a gmcs directory at all?

Finally, I would like the opinion of this list. Is modifying gmcs a good
approach for my project, or should I attempt to make my own unit-checking
tool?  The latter would require writing a C# parser and partial semantic
analyzer, which is probably very hard; but on the other hand, it may (or may
not) be very hard to integrate unit checking into gmcs.

-- 
- David
<A HREF="http://qwertie.net">http://qwertie.net</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060925/eb87ef71/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060925/eb87ef71/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020637.html">[Mono-dev] [PATCH] System.Security: Remove &quot;hack&quot;	from	KeyInfoX509Data
</A></li>
	<LI>Next message: <A HREF="020639.html">[Mono-dev] Cannot compile mono or mcs, please help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20631">[ date ]</a>
              <a href="thread.html#20631">[ thread ]</a>
              <a href="subject.html#20631">[ subject ]</a>
              <a href="author.html#20631">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
