<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] patch for System.Net/WebException.cs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20patch%20for%20System.Net/WebException.cs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020533.html">
   <LINK REL="Next"  HREF="020575.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] patch for System.Net/WebException.cs</H1>
    <B>Andrew Skiba</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20patch%20for%20System.Net/WebException.cs&In-Reply-To="
       TITLE="[Mono-dev] patch for System.Net/WebException.cs">andrews at mainsoft.com
       </A><BR>
    <I>Mon Sep 18 08:31:05 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020533.html">[Mono-dev] Specifying culture, version, etc, for gmcs
</A></li>
        <LI>Next message: <A HREF="020575.html">[Mono-dev] patch for System.Net/WebException.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20535">[ date ]</a>
              <a href="thread.html#20535">[ thread ]</a>
              <a href="subject.html#20535">[ subject ]</a>
              <a href="author.html#20535">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello.

The following code reveils 2 problems in subj: wrong initial value for
Status, and incompatibility with .Net serialization. To check the
latter, run test on .net, rename out.xml into in.xml and run test on
mono. After applying the patch the test passes and initial value for
Status is the same.

using System;
using System.Runtime.Serialization.Formatters.Soap;
using System.Net;
using System.IO;

namespace dumb_GH20
{
	class Program
	{
		static void Main (string[] args)
		{
			WebException def = new WebException ();
			Console.Out.Write (def.Status);
			WebException e = new WebException (&quot;message&quot;,
new Exception (&quot;inner&quot;), WebExceptionStatus.PipelineFailure,
				null);
			SoapFormatter f = new SoapFormatter ();
			FileStream fs = new FileStream (&quot;out.xml&quot;,
FileMode.CreateNew);
			f.Serialize (fs, e);

			WebException e1 = (WebException) f.Deserialize
(new FileStream (&quot;in.xml&quot;, FileMode.Open));
		}

	}
}

Thank you.
Andrew.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: WebException.patch
Type: application/octet-stream
Size: 1120 bytes
Desc: WebException.patch
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060918/6714ec1d/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060918/6714ec1d/attachment.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020533.html">[Mono-dev] Specifying culture, version, etc, for gmcs
</A></li>
	<LI>Next message: <A HREF="020575.html">[Mono-dev] patch for System.Net/WebException.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20535">[ date ]</a>
              <a href="thread.html#20535">[ thread ]</a>
              <a href="subject.html#20535">[ subject ]</a>
              <a href="author.html#20535">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
