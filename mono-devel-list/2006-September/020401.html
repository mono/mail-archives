<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Message Box running NUnit tests under Mono 1.1.17
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Message%20Box%20running%20NUnit%20tests%20under%20Mono%201.1.17&In-Reply-To=17c2d80b0609100634h19e511d1q54c11f5791f98154%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020414.html">
   <LINK REL="Next"  HREF="020361.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Message Box running NUnit tests under Mono 1.1.17</H1>
    <B>Charlie Poole</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Message%20Box%20running%20NUnit%20tests%20under%20Mono%201.1.17&In-Reply-To=17c2d80b0609100634h19e511d1q54c11f5791f98154%40mail.gmail.com"
       TITLE="[Mono-dev] Message Box running NUnit tests under Mono 1.1.17">charlie at nunit.com
       </A><BR>
    <I>Sun Sep 10 16:40:00 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020414.html">[Mono-dev] Message Box running NUnit tests under Mono 1.1.17
</A></li>
        <LI>Next message: <A HREF="020361.html">[Mono-dev] [Mono-list] Mono Winforms Team: we are hiring.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20401">[ date ]</a>
              <a href="thread.html#20401">[ thread ]</a>
              <a href="subject.html#20401">[ subject ]</a>
              <a href="author.html#20401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>As it happens, we're currently running our tests in a separate AppDomain per
test assembly. Two of them require Windows forms but only one of them - the
second to run - throws up the MessageBox. So I think your theory makes
sense.
 
I'll put together a small test case.
 
Charlie


  _____  

From: Jon Chambers [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">joncham at gmail.com</A>] 
Sent: Sunday, September 10, 2006 6:34 AM
To: Charlie Poole
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Message Box running NUnit tests under Mono 1.1.17


Charlie,
     I think I understand the problem. The XplatUIWin32 registers a window
class shared by all the SWF windows. RegisterClass can only be called once
for a specific window name per process. XplatUI is a singleton, but that's
per app domain. I'm guessing you're loading MWF into multiple domains within
the same process. If I get a chance today, I'll try and fix it. I guess
we'll need to change the window name per app domain, because you can have
multiple domains existing, and each one needs to register a window class
with it's own callback. 

- Jonathan


On 9/10/06, Charlie Poole &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">charlie at nunit.com</A>&gt; wrote: 

Hi All,

Running the NUnit tests under Mono 1.1.17 on Windows XP, a message
box appears with the caption &quot;Oops&quot; and message
&quot;Could not register the SWFClass window class, win32 error 0&quot;

This happens when running the tests of the window gui, either
under the gui or from the console. In the case of the console,
this additional message appears in the console output
&quot;Mono System.Windows.Forms Assembly [$auto_build_revision$]

In the case of the gui, clicking on Run a second time causes
the gui to silently exit.

Any suggestions? Could this be a configuration problem, or
is it a bug?

Charlie 



_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060910/7eca85f9/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20060910/7eca85f9/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020414.html">[Mono-dev] Message Box running NUnit tests under Mono 1.1.17
</A></li>
	<LI>Next message: <A HREF="020361.html">[Mono-dev] [Mono-list] Mono Winforms Team: we are hiring.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20401">[ date ]</a>
              <a href="thread.html#20401">[ thread ]</a>
              <a href="subject.html#20401">[ subject ]</a>
              <a href="author.html#20401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
