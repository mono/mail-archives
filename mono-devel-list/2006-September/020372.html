<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Building Mono on Linux/Alpha
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Building%20Mono%20on%20Linux/Alpha&In-Reply-To=1157646545.22187.16.camel%40erandi.dom">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020370.html">
   <LINK REL="Next"  HREF="020373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Building Mono on Linux/Alpha</H1>
    <B>Massimiliano Mantione</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Building%20Mono%20on%20Linux/Alpha&In-Reply-To=1157646545.22187.16.camel%40erandi.dom"
       TITLE="[Mono-dev] Building Mono on Linux/Alpha">massi at ximian.com
       </A><BR>
    <I>Fri Sep  8 00:33:56 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020370.html">[Mono-dev] Building Mono on Linux/Alpha
</A></li>
        <LI>Next message: <A HREF="020373.html">[Mono-dev] Building Mono on Linux/Alpha
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20372">[ date ]</a>
              <a href="thread.html#20372">[ thread ]</a>
              <a href="subject.html#20372">[ subject ]</a>
              <a href="author.html#20372">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2006-09-07 at 12:29 -0400, Miguel de Icaza wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> &gt; I have some questions about mono_local_regalloc. Is it possible to tell 
</I>&gt;<i> &gt; its logic right now not to reuse the same
</I>&gt;<i> &gt; physical register in the same instruction? Alpha has &quot;a lot&quot; of 
</I>&gt;<i> &gt; registers and experience some penalty if the same
</I>&gt;<i> &gt; register is used in the same or next instruction when results of 
</I>&gt;<i> &gt; previous instruction are not needed for next. For example:
</I>&gt;<i> 
</I>&gt;<i> This is a design consideration that might be worth including in the next
</I>&gt;<i> register allocator.
</I>
Interesting...

This also looks relatively easy to do, I will take it into account.
I say &quot;relatively easy&quot; because the new regalloc, unlike the previous
one,
is able (and willing) to split liveness ranges at each definition, so
that
in practice each definition of the same vreg could go into a different
hard register if necessary (of course if this does not introduce too
many
useless &quot;resolution&quot; moves at BB boundaries).

Just to be sure I got it right: when there is more than one free
register
to choose from, all else being equal, the regalloc should favor
registers
that have been freed earlier instead of later.
Handling free registers like a FIFO queue during the linear allocation
should be enough to do this trick: at BB boundaries the heuristic could
fail, but elsewhere it should do exactly what Sergey asked.
Of course, if a special/particular register is needed, the regalloc can
walk the queue and pick what it needs, this is just to get you the idea.

Comments?

Ciao,
  Massi



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020370.html">[Mono-dev] Building Mono on Linux/Alpha
</A></li>
	<LI>Next message: <A HREF="020373.html">[Mono-dev] Building Mono on Linux/Alpha
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20372">[ date ]</a>
              <a href="thread.html#20372">[ thread ]</a>
              <a href="subject.html#20372">[ subject ]</a>
              <a href="author.html#20372">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
