<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] About Sebastien blog &quot;Gendarme gains XML  support, more...&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20About%20Sebastien%20blog%20%22Gendarme%20gains%20XML%20%20support%2C%0A%20more...%22&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020554.html">
   <LINK REL="Next"  HREF="020553.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] About Sebastien blog &quot;Gendarme gains XML  support, more...&quot;</H1>
    <B>Jonathan Gilbert</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20About%20Sebastien%20blog%20%22Gendarme%20gains%20XML%20%20support%2C%0A%20more...%22&In-Reply-To="
       TITLE="[Mono-dev] About Sebastien blog &quot;Gendarme gains XML  support, more...&quot;">2a5gjx302 at sneakemail.com
       </A><BR>
    <I>Mon Sep 18 15:34:02 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020554.html">[Mono-dev] C# to x86 assembly code?
</A></li>
        <LI>Next message: <A HREF="020553.html">[Mono-dev] Fwd:  About Sebastien blog &quot;Gendarme gains XML support,	more...&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20551">[ date ]</a>
              <a href="thread.html#20551">[ thread ]</a>
              <a href="subject.html#20551">[ subject ]</a>
              <a href="author.html#20551">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 01:32 PM 18/09/2006 -0300, Rafael Teixeira wrote:
&gt;&gt;<i>From the high number of UseStringEmptyRule hits in the example report,
</I>&gt;<i>I think we can add some magic to gmcs/mcs, so that when run with
</I>&gt;<i>-optimize it could automatically generate:
</I>&gt;<i>
</I>&gt;<i>x = String.Empty;
</I>&gt;<i>
</I>&gt;<i>from any
</I>&gt;<i>
</I>&gt;<i>x = &quot;&quot;;
</I>&gt;<i>
</I>&gt;<i>it finds. And after that we should compile all mono managed libs with
</I>&gt;<i>optimization turned on.
</I>&gt;<i>
</I>&gt;<i>Just a bit of my craziness...  :)
</I>
I'm a bit confused by this suggestion. My understanding is that at assembly
load time, the JIT interns all string literals that are present in the
module, canonicalizing them, and that therefore the two statements above
are 100% identical, semantically at least. For instance,

class MainClass
{
  static void Main()
  {
    string from_literal = &quot;&quot;;
    System.Console.WriteLine(
      ReferenceEquals(from_literal, string.Empty));
  }
}

This sample program outputs &quot;True&quot;. This automatic interning of strings is
crucial for string 'switch' blocks to work. Also, it seems to me that 'x =
&quot;&quot;' will perform better (on the order of a couple of clock cycles) than 'x
= string.Empty', since the former is resolved to a constant assignment (a
constant value, really, propagated to the use of variable 'x') at JIT time
while the latter, barring some special-case optimization in the JIT, will
get translated to a load from a static field.

I also happen to think that 'x = &quot;&quot;' is more readable than 'x =
string.Empty'. :-)

Do you know of a compelling reason to use 'x = string.Empty' over 'x = &quot;&quot;'?

Jonathan Gilbert

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020554.html">[Mono-dev] C# to x86 assembly code?
</A></li>
	<LI>Next message: <A HREF="020553.html">[Mono-dev] Fwd:  About Sebastien blog &quot;Gendarme gains XML support,	more...&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20551">[ date ]</a>
              <a href="thread.html#20551">[ thread ]</a>
              <a href="subject.html#20551">[ subject ]</a>
              <a href="author.html#20551">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
