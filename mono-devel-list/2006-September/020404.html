<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Nullable types and &quot;as&quot; operator
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Nullable%20types%20and%20%22as%22%20operator&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020396.html">
   <LINK REL="Next"  HREF="020405.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Nullable types and &quot;as&quot; operator</H1>
    <B>Michael Schurter</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Nullable%20types%20and%20%22as%22%20operator&In-Reply-To="
       TITLE="[Mono-dev] Nullable types and &quot;as&quot; operator">michael at synthesyssolutions.com
       </A><BR>
    <I>Sun Sep 10 23:30:35 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020396.html">[Mono-dev] [PATCH] ServiceController implementation (Windows only)
</A></li>
        <LI>Next message: <A HREF="020405.html">[Mono-dev] bug in xsd.exe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20404">[ date ]</a>
              <a href="thread.html#20404">[ thread ]</a>
              <a href="subject.html#20404">[ subject ]</a>
              <a href="author.html#20404">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The following code compiles and executes using MS.NET, but not Mono:

// START

using System;

public class NullableInt
{
         public static void Main()
         {
                 object x = null;

                 int? y = x as int?;  /* Causes CS0077 */

                 Console.WriteLine(&quot;y: '{0}'&quot;, y);
                 Console.WriteLine(&quot;y.HasValue: '{0}'&quot;, y.HasValue);
         }
}

// END

Produces the following compiler error using gmcs (TRUNK, revision 65212):

test.cs(9,14): error CS0077: The as operator must be used with a 
reference type (`int?' is a value type)
Compilation failed: 1 error(s), 0 warnings

Runtime output in Windows using MS.NET:

y: ''
y.HasValue: 'False'

I found this Mono bug related to Nullable types, but it appears to be 
different:
<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=79013">http://bugzilla.ximian.com/show_bug.cgi?id=79013</A>

I first noticed this bug when trying to compile a large project which 
uses the syntax: &quot;as int?&quot; or &quot;as bool?&quot; in a few key places.

-- 
Michael Schurter
Synthesys Solutions

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020396.html">[Mono-dev] [PATCH] ServiceController implementation (Windows only)
</A></li>
	<LI>Next message: <A HREF="020405.html">[Mono-dev] bug in xsd.exe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20404">[ date ]</a>
              <a href="thread.html#20404">[ thread ]</a>
              <a href="subject.html#20404">[ subject ]</a>
              <a href="author.html#20404">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
