<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] HandleRef regression in mono 1.2.3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20HandleRef%20regression%20in%20mono%201.2.3&In-Reply-To=23a15590702090718y5b982827y287ae7686cafc4b7%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022475.html">
   <LINK REL="Next"  HREF="022487.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] HandleRef regression in mono 1.2.3</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20HandleRef%20regression%20in%20mono%201.2.3&In-Reply-To=23a15590702090718y5b982827y287ae7686cafc4b7%40mail.gmail.com"
       TITLE="[Mono-dev] HandleRef regression in mono 1.2.3">miguel at novell.com
       </A><BR>
    <I>Sat Feb 10 22:44:40 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022475.html">[Mono-dev] HandleRef regression in mono 1.2.3
</A></li>
        <LI>Next message: <A HREF="022487.html">[Mono-dev] HandleRef regression in mono 1.2.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22485">[ date ]</a>
              <a href="thread.html#22485">[ thread ]</a>
              <a href="subject.html#22485">[ subject ]</a>
              <a href="author.html#22485">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> my team has been using HandleRef for marshaling (as mono
</I>&gt;<i> <A HREF="http://www.mono-project.com/Interop_with_Native_Libraries">http://www.mono-project.com/Interop_with_Native_Libraries</A> and msdn
</I>&gt;<i> <A HREF="http://msdn2.microsoft.com/en-us/library/system.runtime.interopservices.handleref.aspx">http://msdn2.microsoft.com/en-us/library/system.runtime.interopservices.handleref.aspx</A>
</I>&gt;<i> suggest) for quite a long time. To our surprise, HandleRef no longer
</I>&gt;<i> works with the new release of mono.
</I>
There is no regression, since HandleRef was never implemented in the
Marshaller.   Either you just started using it, or you were getting
corrupted data all along. 

That being said, it will be available in Mono 1.2.4, I have just
implemented it.

&gt;<i> Everything works fine with 2.0 profile. On 1.0, when I pass a
</I>&gt;<i> HandleRef to a native library expecting a pointer, marshaller feeds
</I>&gt;<i> garbage to the native code. The problem occurs both on linux and
</I>&gt;<i> windows. And yes, I can work around this problem by replacing
</I>&gt;<i> HandleRef by plain IntPtr's, but that's not the point, is it?
</I>&gt;<i> 
</I>&gt;<i> I was also quite surprised by this bugzilla entry:
</I>&gt;<i> <A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=80515">http://bugzilla.ximian.com/show_bug.cgi?id=80515</A> Does this mean that
</I>&gt;<i> the maintainer of interop stack is aware of the regression?
</I>
I only recently discovered that we lacked support for this (while going
through some Moma reports, as a couple of P/Invoke signatures had it,
and I found out we did not support it).

Miguel.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022475.html">[Mono-dev] HandleRef regression in mono 1.2.3
</A></li>
	<LI>Next message: <A HREF="022487.html">[Mono-dev] HandleRef regression in mono 1.2.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22485">[ date ]</a>
              <a href="thread.html#22485">[ thread ]</a>
              <a href="subject.html#22485">[ subject ]</a>
              <a href="author.html#22485">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
