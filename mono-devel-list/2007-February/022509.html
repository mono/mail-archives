<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use locale-dependent decimal separator
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20ASP.NET%20-%20make%20FontUnit%20NOT%20use%0A%20locale-dependent%20decimal%20separator&In-Reply-To=000601c74d17%246ab19d00%244014d700%24%40driesen%40telenet.be">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022483.html">
   <LINK REL="Next"  HREF="022531.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use locale-dependent decimal separator</H1>
    <B>Marek Habersack</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20ASP.NET%20-%20make%20FontUnit%20NOT%20use%0A%20locale-dependent%20decimal%20separator&In-Reply-To=000601c74d17%246ab19d00%244014d700%24%40driesen%40telenet.be"
       TITLE="[Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use locale-dependent decimal separator">grendello at gmail.com
       </A><BR>
    <I>Mon Feb 12 08:32:27 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022483.html">[Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use	locale-dependent decimal separator
</A></li>
        <LI>Next message: <A HREF="022531.html">[Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use	locale-dependent decimal separator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22509">[ date ]</a>
              <a href="thread.html#22509">[ thread ]</a>
              <a href="subject.html#22509">[ subject ]</a>
              <a href="author.html#22509">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 10 Feb 2007 14:28:54 +0100, &quot;Gert Driesen&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">gert.driesen at telenet.be</A>&gt;
scribbled:

&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> [mailto:mono-devel-list-
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bounces at lists.ximian.com</A>] On Behalf Of Marek Habersack
</I>&gt;<i> &gt; Sent: zaterdag 10 februari 2007 6:20
</I>&gt;<i> &gt; To: Mono Development List
</I>&gt;<i> &gt; Subject: [Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use locale-
</I>&gt;<i> &gt; dependent decimal separator
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   The attached diff fixes the issue mentioned in the subject. Currently
</I>&gt;<i> &gt; mono will fail to parse font-size=0.Xem (etc) correctly if the current
</I>&gt;<i> &gt; thread culture is set to a locale that uses , as the decimal point
</I>&gt;<i> &gt; separator (e.g. de, pl). Please review, thanks
</I>&gt;<i> 
</I>&gt;<i> This does not match the MS behavior. I've added a unit test to
</I>&gt;<i> FontUnitTest.cs to verify this, and fixed FontUnit.ToString() to use the
</I>&gt;<i> current locale.
</I>Alas, this doesn't fix the problem. Please run xsp2 with the attached test file
- you will get an exception thrown, because the Unit constructor cannot parse
the passed 0.9em value with cultures which have a decimal separator different
to a dot. In other words, Unit (and FontUnit) in mono right now expect
culture-dependent input while it gets the CSS decimal font size, which will
always use the dot as a separator. ASP.NET parser uses the FontUnit(string)
constructor - and that one, in turn, invokes the FontUnit(string, CultureInfo)
one. By saying that the behavior is not MS-compatible, are you claiming that
Microsoft parse the 0.9em value and turn it into locale-specific form (e.g.
0,9em) before passing it to the first FontUnit constructor above?

regards,

marek

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070212/6bb2591a/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070212/6bb2591a/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022483.html">[Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use	locale-dependent decimal separator
</A></li>
	<LI>Next message: <A HREF="022531.html">[Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use	locale-dependent decimal separator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22509">[ date ]</a>
              <a href="thread.html#22509">[ thread ]</a>
              <a href="subject.html#22509">[ subject ]</a>
              <a href="author.html#22509">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
