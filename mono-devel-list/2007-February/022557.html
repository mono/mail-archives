<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use locale-dependent decimal separator
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20ASP.NET%20-%20make%20FontUnit%20NOT%20use%0A%20locale-dependent%20decimal%20separator&In-Reply-To=006701c74ee9%241a93d170%244fbb7450%24%40driesen%40telenet.be">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022532.html">
   <LINK REL="Next"  HREF="022482.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use locale-dependent decimal separator</H1>
    <B>Marek Habersack</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20ASP.NET%20-%20make%20FontUnit%20NOT%20use%0A%20locale-dependent%20decimal%20separator&In-Reply-To=006701c74ee9%241a93d170%244fbb7450%24%40driesen%40telenet.be"
       TITLE="[Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use locale-dependent decimal separator">grendello at gmail.com
       </A><BR>
    <I>Thu Feb 15 08:51:40 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022532.html">[Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use locale-dependent decimal separator
</A></li>
        <LI>Next message: <A HREF="022482.html">[Mono-dev] [PATCH] ASP.NET 2.0 - implement assembly mappings for	mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22557">[ date ]</a>
              <a href="thread.html#22557">[ thread ]</a>
              <a href="subject.html#22557">[ subject ]</a>
              <a href="author.html#22557">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 12 Feb 2007 22:02:28 +0100, &quot;Gert Driesen&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">gert.driesen at telenet.be</A>&gt;
scribbled:

[snip]
&gt;<i> &gt; - you will get an exception thrown, because the Unit constructor cannot
</I>&gt;<i> &gt; parse the passed 0.9em value with cultures which have a decimal
</I>&gt;<i> &gt; separator different to a dot. In other words, Unit (and FontUnit) in
</I>&gt;<i> &gt; mono right now expect culture-dependent input while it gets the CSS
</I>&gt;<i> &gt; decimal font size, which will always use the dot as a separator.
</I>&gt;<i> &gt; ASP.NET parser uses the FontUnit(string) constructor - and that one, in
</I>&gt;<i> &gt; turn, invokes the FontUnit(string, CultureInfo) one. By saying that the
</I>&gt;<i> &gt; behavior is not MS-compatible, are you claiming that Microsoft parse
</I>&gt;<i> &gt; the 0.9em value and turn it into locale-specific form (e.g.
</I>&gt;<i> &gt; 0,9em) before passing it to the first FontUnit constructor above?
</I>&gt;<i> 
</I>&gt;<i> Apparently, MS uses FontUnitConverter.ConvertFromInvariantString to parse
</I>&gt;<i> the value:
</I>&gt;<i> 
</I>&gt;<i> [FormatException]: The numeric part ('3,5') of '3,5em' cannot be parsed as a
</I>[snip]
The difference between us and MS.NET was that we did the parsing also on the
runtime. The attached diff fixes the issue by generating different code on the
runtime. Please review, thanks

marek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: FontUnit_culture.diff
Type: text/x-patch
Size: 1574 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070215/7fd8a04b/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070215/7fd8a04b/attachment.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070215/7fd8a04b/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070215/7fd8a04b/attachment-0001.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022532.html">[Mono-dev] [PATCH] ASP.NET - make FontUnit NOT use locale-dependent decimal separator
</A></li>
	<LI>Next message: <A HREF="022482.html">[Mono-dev] [PATCH] ASP.NET 2.0 - implement assembly mappings for	mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22557">[ date ]</a>
              <a href="thread.html#22557">[ thread ]</a>
              <a href="subject.html#22557">[ subject ]</a>
              <a href="author.html#22557">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
