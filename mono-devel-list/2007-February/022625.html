<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] signcode on the fly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20signcode%20on%20the%20fly&In-Reply-To=74721f460702202047w4a0b3470j6a444ce3308a2bf4%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022623.html">
   <LINK REL="Next"  HREF="022626.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] signcode on the fly</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20signcode%20on%20the%20fly&In-Reply-To=74721f460702202047w4a0b3470j6a444ce3308a2bf4%40mail.gmail.com"
       TITLE="[Mono-dev] signcode on the fly">sebastien.pouliot at gmail.com
       </A><BR>
    <I>Wed Feb 21 07:26:00 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022623.html">[Mono-dev] signcode on the fly
</A></li>
        <LI>Next message: <A HREF="022626.html">[Mono-dev] signcode on the fly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22625">[ date ]</a>
              <a href="thread.html#22625">[ thread ]</a>
              <a href="subject.html#22625">[ subject ]</a>
              <a href="author.html#22625">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2007-02-21 at 10:17 +0530, viraj wrote:
&gt;<i> i'm on debian etch, and mono -V says..
</I>&gt;<i> 
</I>&gt;<i> Mono JIT compiler version 1.2.2.1, (C) 2002-2006 Novell, Inc and
</I>&gt;<i> Contributors. www.mono-project.com
</I>&gt;<i>         TLS:           normal
</I>&gt;<i>         GC:            Included Boehm (with typed GC)
</I>&gt;<i>         SIGSEGV:       normal
</I>&gt;<i>         Disabled:      none
</I>&gt;<i> 
</I>&gt;<i> by the way, i found this article..
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://projects.zillabit.com/authenticode.html">http://projects.zillabit.com/authenticode.html</A>
</I>&gt;<i> 
</I>&gt;<i> scroll down to 'Working around problems with PVK password', as per
</I>&gt;<i> this article, it can be fixed by commenting out certain lines and
</I>&gt;<i> recompiling the signcode.cs. or as an alternative workaround, it
</I>&gt;<i> suggest a .pvk file without a password.
</I>
Nice article but it could have been a lot shorter with another bug
report and a few other questions.

&gt;<i> i'm still struggling with both the solutions because i have no
</I>&gt;<i> experience in mcs compiler. :) any help would be highly appreciated!
</I>
Depends on how much time you have. 

The first solution is a little more complex to build and will result in
a signcode tool that works only with password protected PVK.

The second solution is simpler but will unprotect, by removing the
password, your PVK file (not that the PVK format is considerate very
secure). This new PVK (same key, no password) will be usable with Mono's
signcode tool.

A third solution is to wait for the next release of Mono which should
have a fix for this (hopefully filled) bug.

&gt;<i> thanks a lot.
</I>
Please fill a bug entry into bugzilla.ximian.com (include a link to the
article) and tell me which solution would work better for you.

Thanks

&gt;<i> 
</I>&gt;<i> ~viraj
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 2/20/07, Sebastien Pouliot &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastien.pouliot at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; On Tue, 2007-02-20 at 19:10 +0530, viraj wrote:
</I>&gt;<i> &gt; &gt; hi all,
</I>&gt;<i> &gt; &gt; yes, i just verified it by creating a test certificate with makecert.
</I>&gt;<i> &gt; &gt; It signed my code without a problem. so the problem is the 'encrypted
</I>&gt;<i> &gt; &gt; pvk file', thank you for your hint Rafael!
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; even though i have the password for the .pvk file, it seems 'signcode'
</I>&gt;<i> &gt; &gt; binary does not accept a password on it's input (man signcode)? am i
</I>&gt;<i> &gt; &gt; correct?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Signcode should ask you your password when it detects an encrypted PVK
</I>&gt;<i> &gt; file.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What version of Mono are you using ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; with 'signtool' (MS Platform SDK), it accepts the password, is there a
</I>&gt;<i> &gt; &gt; 'signtool' equivalent in Mono?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; thanks again
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; ~viraj
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On 2/20/07, Rafael Teixeira &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monoman at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; Hi Viraj,
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Just my inexperienced view on the problem:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; It seems that your pvk is encrypted, and you need to provide a
</I>&gt;<i> &gt; &gt; &gt; password for signcode to use it, but I also don't know how. An
</I>&gt;<i> &gt; &gt; &gt; alternative is to use an unencripted pvk file.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; :)
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; On 2/20/07, viraj &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">kalinga at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; hi all,
</I>&gt;<i> &gt; &gt; &gt; &gt; i'm trying to signcode a win32 executable on Linux, using Mono's signcode.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; when i issue the command..
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; signcode -spc myspcfromthawte.spc -v mypvkfromthawte.pvk -n &quot;My App -
</I>&gt;<i> &gt; &gt; &gt; &gt; Quick Demo&quot; -t &quot;<A HREF="http://timestamp.verisign.com/scripts/timstamp.dll&quot;">http://timestamp.verisign.com/scripts/timstamp.dll&quot;</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; quickDemo.exe
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; it says..
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Mono SignCode - version 1.2.2.1
</I>&gt;<i> &gt; &gt; &gt; &gt; Sign assemblies and PE files using Authenticode(tm).
</I>&gt;<i> &gt; &gt; &gt; &gt; Copyright 2002, 2003 Motus Technologies. Copyright 2004-2006 Novell.
</I>&gt;<i> &gt; &gt; &gt; &gt; BSD licensed.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Unhandled Exception:
</I>&gt;<i> &gt; &gt; &gt; &gt; System.Security.Cryptography.CryptographicException: Invalid data
</I>&gt;<i> &gt; &gt; &gt; &gt; and/or password
</I>&gt;<i> &gt; &gt; &gt; &gt;   at Mono.Security.Authenticode.PrivateKey..ctor (System.Byte[] data,
</I>&gt;<i> &gt; &gt; &gt; &gt; System.String password) [0x00000]
</I>&gt;<i> &gt; &gt; &gt; &gt;   at Mono.Security.Authenticode.PrivateKey.CreateFromFile
</I>&gt;<i> &gt; &gt; &gt; &gt; (System.String filename, System.String password) [0x00000]
</I>&gt;<i> &gt; &gt; &gt; &gt;   at Mono.Security.Authenticode.PrivateKey.CreateFromFile
</I>&gt;<i> &gt; &gt; &gt; &gt; (System.String filename) [0x00000]
</I>&gt;<i> &gt; &gt; &gt; &gt;   at Mono.Tools.SignCode.GetPrivateKey (System.String keyfile,
</I>&gt;<i> &gt; &gt; &gt; &gt; System.Security.Cryptography.CspParameters csp) [0x00000]
</I>&gt;<i> &gt; &gt; &gt; &gt;   at Mono.Tools.SignCode.Main (System.String[] args) [0x00000]
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; couldn't trace a similar error message on internet.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; am i missing any parameters? or what should be the correct syntax of
</I>&gt;<i> &gt; &gt; &gt; &gt; the command.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; thanks a lot.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; ~viraj
</I>&gt;<i> &gt; &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; --
</I>&gt;<i> &gt; &gt; &gt; Rafael &quot;Monoman&quot; Teixeira
</I>&gt;<i> &gt; &gt; &gt; ---------------------------------------
</I>&gt;<i> &gt; &gt; &gt; &quot;The reasonable man adapts himself to the world; the unreasonable one
</I>&gt;<i> &gt; &gt; &gt; persists in trying to adapt the world to himself. Therefore all
</I>&gt;<i> &gt; &gt; &gt; progress depends on the unreasonable man.&quot; George Bernard Shaw
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>-- 
Sebastien Pouliot  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastien at ximian.com</A>&gt;
Blog: <A HREF="http://pages.infinit.net/ctech/">http://pages.infinit.net/ctech/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022623.html">[Mono-dev] signcode on the fly
</A></li>
	<LI>Next message: <A HREF="022626.html">[Mono-dev] signcode on the fly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22625">[ date ]</a>
              <a href="thread.html#22625">[ thread ]</a>
              <a href="subject.html#22625">[ subject ]</a>
              <a href="author.html#22625">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
