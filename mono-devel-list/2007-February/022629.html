<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Problems with DOM serialization to XHTML
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Problems%20with%20DOM%20serialization%20to%20XHTML&In-Reply-To=1172078987.3551.30.camel%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022628.html">
   <LINK REL="Next"  HREF="022631.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Problems with DOM serialization to XHTML</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Problems%20with%20DOM%20serialization%20to%20XHTML&In-Reply-To=1172078987.3551.30.camel%40localhost"
       TITLE="[Mono-dev] Problems with DOM serialization to XHTML">atsushi at ximian.com
       </A><BR>
    <I>Wed Feb 21 13:25:08 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022628.html">[Mono-dev] Problems with DOM serialization to XHTML
</A></li>
        <LI>Next message: <A HREF="022631.html">[Mono-dev] Problems with DOM serialization to XHTML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22629">[ date ]</a>
              <a href="thread.html#22629">[ thread ]</a>
              <a href="subject.html#22629">[ subject ]</a>
              <a href="author.html#22629">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

You might want to use this special XmlWriter:
<A HREF="http://svn.myrealbox.com/source/trunk/mono/web/web/XhtmlWriter.cs">http://svn.myrealbox.com/source/trunk/mono/web/web/XhtmlWriter.cs</A>

disclaimer: it is almost a hack without lots of verification, so
there could be things that need fixes. By overriding XmlWriter like
this, it is relatively easy to customize outputs.

Atsushi Eno

Federico Di Gregorio wrote:
&gt;<i> Hi *,
</I>&gt;<i> 
</I>&gt;<i> this is my first post to this list so, please, feel free to tell me (in
</I>&gt;<i> private) about policies and to redirect me to the right place if I am
</I>&gt;<i> out of topic. Thank you.
</I>&gt;<i> 
</I>&gt;<i> We are having some problems serializing an XmlDocument (DOM) that
</I>&gt;<i> represents an XHTML document into valid indented XHTML. The problem is
</I>&gt;<i> that the serialization code breaks empty tags adding a NL/CR between the
</I>&gt;<i> open and the closed tag, adding significant whitespace and making it
</I>&gt;<i> non-empty. So, for example, if a tag like:
</I>&gt;<i> 
</I>&gt;<i> &lt;img src=&quot;...&quot;&gt;&lt;/img&gt;
</I>&gt;<i> 
</I>&gt;<i> is parsed (note that even not in the &lt;img... /&gt; form, it is a perfectly
</I>&gt;<i> valid, closed tag) a different one is output when the document is
</I>&gt;<i> serialized:
</I>&gt;<i> 
</I>&gt;<i> &lt;img src=&quot;...&quot;&gt;
</I>&gt;<i> &lt;/img&gt;
</I>&gt;<i> 
</I>&gt;<i> That is not valid XHTML anymore. A very simple solution would be to not
</I>&gt;<i> break empty tags (XmlElement.IsEmpty == true) or even shorten them into
</I>&gt;<i> the &lt;.../&gt; form (this probably would output invalid XHTML too but would
</I>&gt;<i> be easily fixable in the code manipulating the DOM while the current
</I>&gt;<i> problem has no apparent solution in the application code.)
</I>&gt;<i> 
</I>&gt;<i> Or am I simply doing it the wrong way? :D
</I>&gt;<i> 
</I>&gt;<i> federico
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022628.html">[Mono-dev] Problems with DOM serialization to XHTML
</A></li>
	<LI>Next message: <A HREF="022631.html">[Mono-dev] Problems with DOM serialization to XHTML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22629">[ date ]</a>
              <a href="thread.html#22629">[ thread ]</a>
              <a href="subject.html#22629">[ subject ]</a>
              <a href="author.html#22629">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
