<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Walking all managed objects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Walking%20all%20managed%20objects&In-Reply-To=C595A4C1-30CA-48EA-8096-006C54BB9423%40otee.dk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024012.html">
   <LINK REL="Next"  HREF="024015.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Walking all managed objects</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Walking%20all%20managed%20objects&In-Reply-To=C595A4C1-30CA-48EA-8096-006C54BB9423%40otee.dk"
       TITLE="[Mono-dev] Walking all managed objects">kumpera at gmail.com
       </A><BR>
    <I>Mon Jul  2 16:46:33 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024012.html">[Mono-dev] Walking all managed objects
</A></li>
        <LI>Next message: <A HREF="024015.html">[Mono-dev] Walking all managed objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24013">[ date ]</a>
              <a href="thread.html#24013">[ thread ]</a>
              <a href="subject.html#24013">[ subject ]</a>
              <a href="author.html#24013">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Joachim,

Heap walking is not supported AFAIK. You could, in theory, implement this
feature by extending the garbage collector, but this would require some big
mono hacking, which I think you should avoid.

&gt;<i>From the performance point of view, using finalizer is make for sense for
</I>what you require, since the GC only have to worry about a small bunch of
objects and your application won't perform full heap scan, which is a
operation with a high cost. Using finalizer should be even better once mono
ships with sgen as default. Sgen is a generational garbage collector and
most of time it only scans a fraction of the heap. This means that it would
process finalizers at a lower cost than performing the full heap scans you
have sugested.

Anyway, it's not a good practice to rely on the GC to perform resources
management, as it doesn't provide any hard guarantees about when they will
be freed. This could lead to file descriptor exaction or sub-optimal system
performance. The best way is to let the application do manual resource
management. It's not that hard and produces better result. In your example,
it could have a queue that it's processed at specific times.

Cheers,
Rodrigo Kumpera



On 7/2/07, Joachim Ante &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">joe at otee.dk</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Is there any way from managed or unmanaged code to iterate through
</I>&gt;<i> all allocated managed objects?
</I>&gt;<i> I presume the Garbage collector must have this data somewhere?
</I>&gt;<i>
</I>&gt;<i> I basically want to see which objects are being referenced and then
</I>&gt;<i> unload some unmanaged data based on it.
</I>&gt;<i> I don't want to override the finalizer for performance reasons. In
</I>&gt;<i> our situation there are specific times where i can just spend a bunch
</I>&gt;<i> of time on cleanup.
</I>&gt;<i>
</I>&gt;<i> Joachim Ante
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070702/59923acf/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070702/59923acf/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024012.html">[Mono-dev] Walking all managed objects
</A></li>
	<LI>Next message: <A HREF="024015.html">[Mono-dev] Walking all managed objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24013">[ date ]</a>
              <a href="thread.html#24013">[ thread ]</a>
              <a href="subject.html#24013">[ subject ]</a>
              <a href="author.html#24013">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
