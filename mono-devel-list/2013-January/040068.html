<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] A bug in System.Xml blocking Entity Framework usage, #6653.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20A%20bug%20in%20System.Xml%20blocking%20Entity%20Framework%20usage%2C%0A%20%236653.&In-Reply-To=%3C5109F55E.4090509%40veritas-vos-liberabit.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040057.html">
   <LINK REL="Next"  HREF="040058.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] A bug in System.Xml blocking Entity Framework usage, #6653.</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20A%20bug%20in%20System.Xml%20blocking%20Entity%20Framework%20usage%2C%0A%20%236653.&In-Reply-To=%3C5109F55E.4090509%40veritas-vos-liberabit.com%3E"
       TITLE="[Mono-dev] A bug in System.Xml blocking Entity Framework usage, #6653.">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Thu Jan 31 04:38:54 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040057.html">[Mono-dev] A bug in System.Xml blocking Entity Framework usage,	#6653.
</A></li>
        <LI>Next message: <A HREF="040058.html">[Mono-dev] Empty IEnumerable Implementation Crashes C# Compiler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40068">[ date ]</a>
              <a href="thread.html#40068">[ thread ]</a>
              <a href="subject.html#40068">[ subject ]</a>
              <a href="author.html#40068">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the heads up. Yes there was. The problem with that bug report 
is that it does not bother to try to minimize the schema. It is actually 
so annoying task. Now I've trimmed down to 35 lines out from 1000.

&lt;how to do it&gt;

There are many extraneous schema components and type definitions that 
are irrelevant to the actual bug. Fortunately there is repro code that 
is useful to
see if your attempt to reduce extraneous components works or not.

Removing huge type definitions likely fails to keep &quot;broken&quot; schema. I'd 
start with cosmetic parts that however enable further type removal, 
which are:

- remove &lt;attribute&gt; and &lt;attributeGroupRef&gt; : they end up to free some 
&lt;simpleType&gt;s and &lt;attributeGroup&gt;s.
- remove particles in &lt;sequence&gt;, &lt;choice&gt;, &lt;all&gt; and &lt;group&gt; : 
similarly, but they could also free some &lt;complexType&gt;s too.

Then you can start trimming &lt;simpleType&gt;, &lt;complexType&gt;, &lt;group&gt; and 
&lt;attributeGroup&gt; elements, which will significantly reduce the lines of 
schema.

----

I'll have another look when I got another spare time (it took a while to 
do this reduction, so I stop it here so far), but now that the repro is 
smaller, anyone could also try to fix System.Xml.dll from mono source, 
namely mcs/class/System.XML/System.Xml.Schema. It is likely that some 
part of it need to resolve recursive reference nicely.
But it also seems very complicated that I can't say if it's fixable 
easily or anytime soon. Making changes in the schema itself or disabling 
schema validation somewhere should be much easier.

Atsushi Eno

Oleg wrote:
&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> There is a 5 months old bug #6653 
</I>&gt;<i> &lt;<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=6653">https://bugzilla.xamarin.com/show_bug.cgi?id=6653</A>&gt; and discussions on 
</I>&gt;<i> StackOverflow about troubles with Entity Framework when it loads 
</I>&gt;<i> metadata from xml model:
</I>&gt;<i>
</I>&gt;<i>   * How to setup Entity Framework / SQL Server with Mono
</I>&gt;<i>     &lt;<A HREF="http://stackoverflow.com/questions/13624065/how-to-setup-entity-framework-sql-server-with-mono">http://stackoverflow.com/questions/13624065/how-to-setup-entity-framework-sql-server-with-mono</A>&gt;
</I>&gt;<i>
</I>&gt;<i>   * NullReferenceException with EF6 on Mono 3.0.3
</I>&gt;<i>     &lt;<A HREF="http://stackoverflow.com/questions/14582318/nullreferenceexception-with-ef6-on-mono-3-0-3">http://stackoverflow.com/questions/14582318/nullreferenceexception-with-ef6-on-mono-3-0-3</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Could anyone say, is a date when it will be fixed predictable? It 
</I>&gt;<i> would be very helpful to know it and plan own migration work.
</I>&gt;<i>
</I>&gt;<i> Now it looks like this defect blocks most of real life cases of Entity 
</I>&gt;<i> Framework usage and this way blocks number of migration initiatives.
</I>&gt;<i>
</I>&gt;<i> P.S. What can I do to contribute to this issue resolution? Does it 
</I>&gt;<i> makes sense to create separate bug about Entity Framework or attach 
</I>&gt;<i> sample not working project to existing one?
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> View this message in context: A bug in System.Xml blocking Entity 
</I>&gt;<i> Framework usage, #6653. 
</I>&gt;<i> &lt;<A HREF="http://mono.1490590.n4.nabble.com/A-bug-in-System-Xml-blocking-Entity-Framework-usage-6653-tp4658345.html">http://mono.1490590.n4.nabble.com/A-bug-in-System-Xml-blocking-Entity-Framework-usage-6653-tp4658345.html</A>&gt;
</I>&gt;<i> Sent from the Mono - Dev mailing list archive 
</I>&gt;<i> &lt;<A HREF="http://mono.1490590.n4.nabble.com/Mono-Dev-f1517221.html">http://mono.1490590.n4.nabble.com/Mono-Dev-f1517221.html</A>&gt; at Nabble.com.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040057.html">[Mono-dev] A bug in System.Xml blocking Entity Framework usage,	#6653.
</A></li>
	<LI>Next message: <A HREF="040058.html">[Mono-dev] Empty IEnumerable Implementation Crashes C# Compiler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40068">[ date ]</a>
              <a href="thread.html#40068">[ thread ]</a>
              <a href="subject.html#40068">[ subject ]</a>
              <a href="author.html#40068">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
