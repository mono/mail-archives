<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Microsoft.Build: The parameter 'FrameworkVersion45Path' was not found for the 'GetFrameworkPath' task
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Microsoft.Build%3A%20The%20parameter%0A%20%27FrameworkVersion45Path%27%20was%20not%20found%20for%20the%20%27GetFrameworkPath%27%20task&In-Reply-To=%3CCAAWtsQwurzjYUeDbDAZYsK%3Dc-QQXttDHH2t5brDxw%2BgRexBp0w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040078.html">
   <LINK REL="Next"  HREF="040085.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Microsoft.Build: The parameter 'FrameworkVersion45Path' was not found for the 'GetFrameworkPath' task</H1>
    <B>Robin Neatherway</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Microsoft.Build%3A%20The%20parameter%0A%20%27FrameworkVersion45Path%27%20was%20not%20found%20for%20the%20%27GetFrameworkPath%27%20task&In-Reply-To=%3CCAAWtsQwurzjYUeDbDAZYsK%3Dc-QQXttDHH2t5brDxw%2BgRexBp0w%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Microsoft.Build: The parameter 'FrameworkVersion45Path' was not found for the 'GetFrameworkPath' task">robin.neatherway at gmail.com
       </A><BR>
    <I>Thu Jan 31 16:48:13 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040078.html">[Mono-dev] Microsoft.Build: The parameter 'FrameworkVersion45Path' was not found for the 'GetFrameworkPath' task
</A></li>
        <LI>Next message: <A HREF="040085.html">[Mono-dev] Microsoft.Build: The parameter 'FrameworkVersion45Path' was not found for the 'GetFrameworkPath' task
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40084">[ date ]</a>
              <a href="thread.html#40084">[ thread ]</a>
              <a href="subject.html#40084">[ subject ]</a>
              <a href="author.html#40084">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

The small script I gave at the top is sufficient to observe the behaviour.
If you put it in a file, say &quot;Script.fsx&quot; and run it with `fsharpi
Script.fsx`, you will be able to reproduce the behaviour. Likewise for the
GetFrameworkPath fragment (once the DLLs have been loaded with #r). Would a
compilable version be more helpful?

I had another look in my lib/mono/4.5 directory and found that the
Microsoft.Build.* DLLs there are symlinks to the gac 4.0 versions:

  lib/mono/4.5 $ ls -l Microsoft.Build.*
lrwxrwxrwx 1   68 Jan 30 18:50 Microsoft.Build.dll -&gt;
../gac/Microsoft.Build/4.0.0.0__b03f5f7f11d50a3a/Microsoft.Build.dll*
lrwxrwxrwx 1   82 Jan 30 18:50 Microsoft.Build.Engine.dll -&gt;
../gac/Microsoft.Build.Engine/4.0.0.0__b03f5f7f11d50a3a/Microsoft.Build.Engine.dll*
lrwxrwxrwx 1   88 Jan 30 18:50 Microsoft.Build.Framework.dll -&gt;
../gac/Microsoft.Build.Framework/4.0.0.0__b03f5f7f11d50a3a/Microsoft.Build.Framework.dll*
lrwxrwxrwx 1   90 Jan 30 19:26 Microsoft.Build.Tasks.v4.0.dll -&gt;
../gac/Microsoft.Build.Tasks.v4.0/4.0.0.0__b03f5f7f11d50a3a/Microsoft.Build.Tasks.v4.0.dll*
lrwxrwxrwx 1   98 Jan 30 18:50 Microsoft.Build.Utilities.v4.0.dll -&gt;
../gac/Microsoft.Build.Utilities.v4.0/4.0.0.0__b03f5f7f11d50a3a/Microsoft.Build.Utilities.v4.0.dll*

However the DLLs in lib/mono/4.0 are not symlinks, they are normal files.
The ones in the GAC are the same as those that are in class/lib/net_4_5/
after building, while the other files in lib/mono/4.0 are the same as those
in class/lib/net_4_0

Perhaps this is the source of the problem.

Robin


On Thu, Jan 31, 2013 at 3:29 PM, Marek Safar &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">marek.safar at gmail.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> This is most likely Mono bug in how we load Task libraries. It'll load the
</I>&gt;<i> version from folder where Microsoft.Common.targets is which is incorrect in
</I>&gt;<i> your case because it's 4.0 version and not 4.5. Some kind of self contained
</I>&gt;<i> sample how F# is using Microsoft.Build* would be useful.
</I>&gt;<i>
</I>&gt;<i> Marek
</I>&gt;<i>
</I>&gt;<i>  I'm trying to execute the ResolveAssemblyReferences task using the
</I>&gt;&gt;<i> Microsoft.Build namespace. This (F#) project builds nicely from the command
</I>&gt;&gt;<i> line using xbuild, so the logic is capable. The project file can be found
</I>&gt;&gt;<i> here:
</I>&gt;&gt;<i> <A HREF="https://github.com/fsharp/fsharpbinding/blob/master/FSharp.AutoComplete/FSharp.AutoComplete.fsproj">https://github.com/fsharp/fsharpbinding/blob/master/FSharp.AutoComplete/FSharp.AutoComplete.fsproj</A> and
</I>&gt;&gt;<i> has TargetFrameworkVersion set to 4.5. If I change TargetFrameworkVersion
</I>&gt;&gt;<i> to 4.0, it works.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I downloaded mono from github and am running the latest version: Mono JIT
</I>&gt;&gt;<i> compiler version 3.0.4 (master/e5fba9d Wed Jan 30 18:38:48 GMT 2013). I
</I>&gt;&gt;<i> also tried with 3.0.3, with the same effect.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The following fsi script is what I am using:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> #r &quot;Microsoft.Build.Engine&quot;
</I>&gt;&gt;<i> #r &quot;Microsoft.Build.Framework&quot;
</I>&gt;&gt;<i> #r &quot;Microsoft.Build.Tasks.v4.0&quot;
</I>&gt;&gt;<i> open Microsoft.Build.BuildEngine
</I>&gt;&gt;<i> open Microsoft.Build.Framework
</I>&gt;&gt;<i> open Microsoft.Build.Tasks
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> let p = new Project()
</I>&gt;&gt;<i> let cl = new ConsoleLogger(LoggerVerbosity.Diagnostic)
</I>&gt;&gt;<i> p.ParentEngine.RegisterLogger(cl)
</I>&gt;&gt;<i> p.Load(&quot;FSharp.AutoComplete.fsproj&quot;)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> p.Build([|&quot;ResolveAssemblyReferences&quot;|])
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> which results in:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;path&gt;/FSharp.AutoComplete.fsproj (ResolveAssemblyReferences) -&gt;
</I>&gt;&gt;<i> /home/scratch/local_mono/lib/mono/4.0/Microsoft.Common.targets
</I>&gt;&gt;<i> (GetFrameworkPaths target) -&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /home/scratch/local_mono/lib/mono/4.0/Microsoft.Common.targets: error :
</I>&gt;&gt;<i> Error executing task GetFrameworkPath: The parameter
</I>&gt;&gt;<i> 'FrameworkVersion45Path' was not found for the 'GetFrameworkPath' task.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I found that the framework path for 4.5 doesn't seem to be defined:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> let gfp = GetFrameworkPath()
</I>&gt;&gt;<i> gfp.FrameworkVersion45Path
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> error FS0039: The field, constructor or member 'FrameworkVersion45Path'
</I>&gt;&gt;<i> is not defined
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Although in
</I>&gt;&gt;<i> mcs/class/Microsoft.Build.Tasks/Microsoft.Build.Tasks/GetFrameworkPath.cs
</I>&gt;&gt;<i> has a #if NET_4_5 around FrameworkVersion45Path, and .NET 4.5 is definitely
</I>&gt;&gt;<i> enabled in the configure script, and I have a fully populated lib/mono/4.5
</I>&gt;&gt;<i> directory.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I also found that the Engine toolsets do not include 4.5. I tried adding
</I>&gt;&gt;<i> it manually, but this didn't help.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think this is a bug, and would appreciate any hints in tracking it down.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> Robin Neatherway
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130131/a8f40ae2/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130131/a8f40ae2/attachment-0001.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040078.html">[Mono-dev] Microsoft.Build: The parameter 'FrameworkVersion45Path' was not found for the 'GetFrameworkPath' task
</A></li>
	<LI>Next message: <A HREF="040085.html">[Mono-dev] Microsoft.Build: The parameter 'FrameworkVersion45Path' was not found for the 'GetFrameworkPath' task
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40084">[ date ]</a>
              <a href="thread.html#40084">[ thread ]</a>
              <a href="subject.html#40084">[ subject ]</a>
              <a href="author.html#40084">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
