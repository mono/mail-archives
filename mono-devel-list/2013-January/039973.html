<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] MonoJIT&amp;LLVM  Crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20MonoJIT%26LLVM%20%20Crash&In-Reply-To=%3C1357295230728-4657981.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039974.html">
   <LINK REL="Next"  HREF="039975.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] MonoJIT&amp;LLVM  Crash</H1>
    <B>C.Wallace</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20MonoJIT%26LLVM%20%20Crash&In-Reply-To=%3C1357295230728-4657981.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] MonoJIT&amp;LLVM  Crash">151388520 at qq.com
       </A><BR>
    <I>Fri Jan  4 10:27:11 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="039974.html">[Mono-dev] Upcoming pull request; Generating csproj files and compiling Mono in Visual Studio
</A></li>
        <LI>Next message: <A HREF="039975.html">[Mono-dev] how to build mono 3.0.x on windows (64 bit)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39973">[ date ]</a>
              <a href="thread.html#39973">[ thread ]</a>
              <a href="subject.html#39973">[ subject ]</a>
              <a href="author.html#39973">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I want to use Embeded Mono powered by LLVM.so I Get the Master Version Code
Mono ,and LLVM-Mono Version from GIT.But,when Use the LLVM Version DLL, the
samples crashed.the crash On the: Funtions : bool
FPPassManager::runOnFunction(Function &amp;F)     {     
PassManagerPrettyStackEntry X(FP, F);      TimeRegion
PassTimer(getPassTimer(FP));  --&gt; LocalChanged |= FP-&gt;runOnFunction(F);   
}the FP is the last pass,and it is a BasicCallGraph, so It did not have a
runOnFunction impl,so,the ESP has been breaken.I am a beginner of MONO&amp;LLVM,
so, i can`t understand why the passMannger Handle the MoudelPass and
FunctionPass as same. and the MoudelPass did not have a runOnFuntion impl.Is
The Code Version i get wrong? or the LLVM Config should be wrong?when i add
a Kind check,as below,it seems work.-&gt;&gt;if(FP-&gt;getPassKind() != PT_Module)   
{      PassManagerPrettyStackEntry X(FP, F);      TimeRegion
PassTimer(getPassTimer(FP));      LocalChanged |= FP-&gt;runOnFunction(F);   
}but i get worst perfomance.LLVM Verison(My Modify Version) cost double time
more than the Org Verison(With out LLVM).My Test Code is   static void
Test2()    {        int i, j, N;        double step, x_i, sum;        double
interval_begin = 0.0;        double interval_end = 2.0 *
3.141592653589793238;        for (j = 2; j &lt; 27; j++)        {            N
= 1 &lt;&lt; j;            step = (interval_end - interval_begin) / N;           
sum = Math.Abs(Math.Sin(interval_begin)) * step / 2.0;            for (i =
1; i &lt; N; i++)            {                x_i = i * step;               
sum += Math.Abs(Math.Sin(x_i)) * step;            }            sum +=
Math.Abs(Math.Sin(interval_end)) * step / 2.0;        }    } 



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/MonoJIT-LLVM-Crash-tp4657981.html">http://mono.1490590.n4.nabble.com/MonoJIT-LLVM-Crash-tp4657981.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130104/602ecb49/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130104/602ecb49/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039974.html">[Mono-dev] Upcoming pull request; Generating csproj files and compiling Mono in Visual Studio
</A></li>
	<LI>Next message: <A HREF="039975.html">[Mono-dev] how to build mono 3.0.x on windows (64 bit)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39973">[ date ]</a>
              <a href="thread.html#39973">[ thread ]</a>
              <a href="subject.html#39973">[ subject ]</a>
              <a href="author.html#39973">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
