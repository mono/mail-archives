<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Random mono apache errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Random%20mono%20apache%20errors&In-Reply-To=%3CCAB1r_%2BVBxyA%2B3rs1nCC8hdhh40Pt2qGnr9Y5bZK9odVj%3DomRGw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040761.html">
   <LINK REL="Next"  HREF="040754.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Random mono apache errors</H1>
    <B>Daniel Lo Nigro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Random%20mono%20apache%20errors&In-Reply-To=%3CCAB1r_%2BVBxyA%2B3rs1nCC8hdhh40Pt2qGnr9Y5bZK9odVj%3DomRGw%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Random mono apache errors">lists at dan.cx
       </A><BR>
    <I>Mon Aug 26 12:02:35 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040761.html">[Mono-dev] Random mono apache errors
</A></li>
        <LI>Next message: <A HREF="040754.html">[Mono-dev] Failing to compile mono on Windows cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40762">[ date ]</a>
              <a href="thread.html#40762">[ thread ]</a>
              <a href="subject.html#40762">[ subject ]</a>
              <a href="author.html#40762">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> 1. Use the open source way, find and fix it myself and hope that we will
</I>&gt;<i> have this change in the official mono one day.
</I>

I've fixed a few bugs with Mono (most around the ASP.NET routing
implementation) and I've found that the Mono developers are pretty good
with pull requests. If you do a good fix, it's very likely to make it into
a release of Mono. The 3.x series is having more frequent releases compared
to the 2.10.x series.


On Mon, Aug 26, 2013 at 8:16 PM, Vladimir Dimitrov
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">vlad.dimitrov at gmail.com</A>&gt;wrote:

&gt;<i>  Almost the same thing just happened again. I got this error when calling
</I>&gt;<i> a web service on the apache/mono server:
</I>&gt;<i>
</I>&gt;<i> System.Exception: INTERNAL configuration error: failed to get
</I>&gt;<i> configuration 'system.diagnostics'
</I>&gt;<i>   at System.Diagnostics.DiagnosticsConfiguration.get_Settings () [0x00000]
</I>&gt;<i> in &lt;filename unknown&gt;:0
</I>&gt;<i>   at System.Diagnostics.TraceImpl.InitOnce () [0x00000] in &lt;filename
</I>&gt;<i> unknown&gt;:0
</I>&gt;<i>   at System.Diagnostics.TraceImpl.get_Listeners () [0x00000] in &lt;filename
</I>&gt;<i> unknown&gt;:0
</I>&gt;<i>   at System.Diagnostics.TraceImpl.get_ListenersSyncRoot () [0x00000] in
</I>&gt;<i> &lt;filename unknown&gt;:0
</I>&gt;<i>   at System.Diagnostics.TraceImpl.WriteLine (System.String message)
</I>&gt;<i> [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i>   at System.Diagnostics.Debug.WriteLine (System.String format,
</I>&gt;<i> System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i>   at Warehouse.Data.Str.WriteDebugMessage (System.String message,
</I>&gt;<i> System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i>   at Warehouse.Portal.Sync.Api.SyncPoll.GetCommand (System.Byte[] encIV,
</I>&gt;<i> System.Byte[] encKey, System.Byte[] encParams) [0x00000] in &lt;filename
</I>&gt;<i> unknown&gt;:0
</I>&gt;<i>   at (wrapper managed-to-native)
</I>&gt;<i> System.Reflection.MonoMethod:InternalInvoke
</I>&gt;<i> (System.Reflection.MonoMethod,object,object[],System.Exception&amp;)
</I>&gt;<i>   at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags
</I>&gt;<i> invokeAttr, System.Reflection.Binder binder, System.Object[] parameters,
</I>&gt;<i> System.Globalization.CultureInfo culture) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i>
</I>&gt;<i> after &quot;sudo service apache2 restart&quot; everything continued to work properly.
</I>&gt;<i> Something causes the configuration to become messed up in (what looks
</I>&gt;<i> like) random or heavy load situations and this makes everything go south.
</I>&gt;<i>
</I>&gt;<i> Unfortunately it looks like this part of mono is not in the primary (or
</I>&gt;<i> maybe in no) focus for the Xamarin team so my best bet here is to:
</I>&gt;<i> 1. Use the open source way, find and fix it myself and hope that we will
</I>&gt;<i> have this change in the official mono one day.
</I>&gt;<i> 2. Move to a Windows server with IIS which I know is not a secondary focus
</I>&gt;<i> for MS.
</I>&gt;<i>
</I>&gt;<i> - Vladimir
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 21.8.2013 &#1075;. 16:16 &#1095;., Vladimir Dimitrov wrote:
</I>&gt;<i>
</I>&gt;<i> I got to this point in the sources too, but I have no idea what I can do
</I>&gt;<i> or why didn't many other people got the same problem?
</I>&gt;<i>
</I>&gt;<i> On 21.8.2013 &#1075;. 15:20 &#1095;., Rafael Teixeira wrote:
</I>&gt;<i>
</I>&gt;<i> From sources (
</I>&gt;<i> <A HREF="https://github.com/mono/mono/blob/master/mcs/class/System.Web.Services/System.Web.Services.Protocols/SoapDocumentationHandler.cs">https://github.com/mono/mono/blob/master/mcs/class/System.Web.Services/System.Web.Services.Protocols/SoapDocumentationHandler.cs</A>
</I>&gt;<i> ):
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 			if (key == &quot;wsdl&quot; || key == &quot;schema&quot; || key == &quot;code&quot; || key == &quot;disco&quot;)
</I>&gt;<i> 				return;
</I>&gt;<i>
</I>&gt;<i> #if NET_2_0
</I>&gt;<i>
</I>&gt;<i> 			string help = WebServicesSection.Current.WsdlHelpGenerator.Href;
</I>&gt;<i> 			string path = Path.GetDirectoryName (ConfigurationManager.OpenMachineConfiguration().FilePath);
</I>&gt;<i> #else
</I>&gt;<i>
</I>&gt;<i> 			string help = WSConfig.Instance.WsdlHelpPage;
</I>&gt;<i> 			string path = Path.GetDirectoryName (WSConfig.Instance.ConfigFilePath);
</I>&gt;<i> #endif
</I>&gt;<i> 			*...*
</I>&gt;<i> 			string physPath = Path.Combine (path, help);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  So probably WebServicesSection.Current.WsdlHelpGenerator.Href is
</I>&gt;<i> returning null or ConfigurationManager.OpenMachineConfiguration().FilePath
</I>&gt;<i> is returning null.
</I>&gt;<i>
</I>&gt;<i>  For the first case, as this is read from current configuration which can
</I>&gt;<i> be reread from time to time as any part of the configuration chain changes
</I>&gt;<i> it is possible that either some of those MonoTodos in
</I>&gt;<i> <A HREF="https://github.com/mono/mono/blob/master/mcs/class/System.Web.Services/System.Web.Services.Configuration/WsdlHelpGeneratorElement.cs?source=cc">https://github.com/mono/mono/blob/master/mcs/class/System.Web.Services/System.Web.Services.Configuration/WsdlHelpGeneratorElement.cs?source=cc</A> are
</I>&gt;<i> making things flaky:
</I>&gt;<i>
</I>&gt;<i>                  [MonoTODO (&quot;probably verifies the Href property here, after deserializing?&quot;)]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 		protected override void DeserializeElement (XmlReader reader, bool serializeCollectionKey)
</I>&gt;<i> 		{
</I>&gt;<i> 			base.DeserializeElement (reader, serializeCollectionKey);
</I>&gt;<i> 		}
</I>&gt;<i> 		[MonoTODO]
</I>&gt;<i> 		protected override void Reset (ConfigurationElement parentElement)
</I>&gt;<i> 		{
</I>&gt;<i> 			base.Reset (parentElement);
</I>&gt;<i> 		}
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  or some locking is missing to avoid reading an incomplete current
</I>&gt;<i> configuration instance...
</I>&gt;<i>
</I>&gt;<i>  As for the second case after much navigating through sources it comes
</I>&gt;<i> down to calling an internal call 'string get_machine_config_path ()'
</I>&gt;<i> which I don't have time now to try to explore...
</I>&gt;<i>
</I>&gt;<i>  Hope it helps,
</I>&gt;<i>
</I>&gt;<i> Rafael Teixeira
</I>&gt;<i> O..:.)oooo
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Aug 21, 2013 at 8:05 AM, Vladimir Dimitrov &lt;
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">vlad.dimitrov at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hey guys,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have worked with mono for almost 7 years but I recently got involved in
</I>&gt;&gt;<i> a project that used mono web services and apache together on Linux.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The problem is that as the load on the service started to rise we started
</I>&gt;&gt;<i> getting different errors which appear in random intervals.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> One of the errors is described here:
</I>&gt;&gt;<i> <A HREF="https://bugzilla.novell.com/show_bug.cgi?id=522631">https://bugzilla.novell.com/show_bug.cgi?id=522631</A> (not by me). And
</I>&gt;&gt;<i> attempting to fix it I added some configuration that caused another error
</I>&gt;&gt;<i> to appear once: <A HREF="http://img577.imageshack.us/img577/4473/44in.png">http://img577.imageshack.us/img577/4473/44in.png</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The only common spot between the errors seem to be the configuration.
</I>&gt;&gt;<i> Looks like at some point it becomes invalid. This sometimes happens after
</I>&gt;&gt;<i> the service gets restarted, but sometimes it happens while the service is
</I>&gt;&gt;<i> running normally. A restart of apache usually fixes the problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Does anybody else encountered something similar or have an idea what can
</I>&gt;&gt;<i> be the problem?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i>  Vladimir
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130826/f8f86fb8/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130826/f8f86fb8/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040761.html">[Mono-dev] Random mono apache errors
</A></li>
	<LI>Next message: <A HREF="040754.html">[Mono-dev] Failing to compile mono on Windows cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40762">[ date ]</a>
              <a href="thread.html#40762">[ thread ]</a>
              <a href="subject.html#40762">[ subject ]</a>
              <a href="author.html#40762">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
