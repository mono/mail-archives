<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] NancyFX self hosting (HttpListener) locking up on linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20NancyFX%20self%20hosting%20%28HttpListener%29%20locking%20up%20on%20linux&In-Reply-To=%3Czarafa.51fda95c.3588.64e674d23ea860f0%40mx1.eselect.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040651.html">
   <LINK REL="Next"  HREF="040653.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] NancyFX self hosting (HttpListener) locking up on linux</H1>
    <B>Alfred Hall</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20NancyFX%20self%20hosting%20%28HttpListener%29%20locking%20up%20on%20linux&In-Reply-To=%3Czarafa.51fda95c.3588.64e674d23ea860f0%40mx1.eselect.org%3E"
       TITLE="[Mono-dev] NancyFX self hosting (HttpListener) locking up on linux">ahall at ahall.org
       </A><BR>
    <I>Sun Aug  4 01:07:40 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040651.html">[Mono-dev] problem compiling mono
</A></li>
        <LI>Next message: <A HREF="040653.html">[Mono-dev] NancyFX self hosting (HttpListener) locking up on	linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40652">[ date ]</a>
              <a href="thread.html#40652">[ thread ]</a>
              <a href="subject.html#40652">[ subject ]</a>
              <a href="author.html#40652">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there.

I'm running the NancyFX web framework in self hosting mode which is using HttpListener which basically means I deploy an executable and run it and it will start a webserver on localhost on a TCP port of choice. I then use nginx to proxy to it.

I first ran my executable on my macbook pro and bombarded it with jmeter and it coped fine and no issues.
I then deployed on my debian wheezy 64 bit linux box running on top of KVM using mono 3.2.0 and performed the same jmeter experiment. It locks up fairly quickly and wont take any new requests. I've tried using both sgen and boehm but they behave similarly although it seems to lock up faster when using sgen. I also tried enabling&#160;MONO_DISABLE_AIO but it doesn't make any difference.

Anyone had similar issues?

I tried using self hosted ServiceStack which also uses HttpListener and had similar issues so I'm finding it unlikely that the bug is in NancyFX itself.

I tried installing mono 2.10.8 to check if this is a regression, but getting exactly the same results.

Any idea how I can debug this further or what could be going on.

Cheers,
Alf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130804/9f0e955b/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130804/9f0e955b/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040651.html">[Mono-dev] problem compiling mono
</A></li>
	<LI>Next message: <A HREF="040653.html">[Mono-dev] NancyFX self hosting (HttpListener) locking up on	linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40652">[ date ]</a>
              <a href="thread.html#40652">[ thread ]</a>
              <a href="subject.html#40652">[ subject ]</a>
              <a href="author.html#40652">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
