<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Handling locked files on Mac
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Handling%20locked%20files%20on%20Mac&In-Reply-To=%3C8b9e8c277b63e9e87197174fa8958235%40tbrf.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040712.html">
   <LINK REL="Next"  HREF="040733.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Handling locked files on Mac</H1>
    <B>rfine at tbrf.net</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Handling%20locked%20files%20on%20Mac&In-Reply-To=%3C8b9e8c277b63e9e87197174fa8958235%40tbrf.net%3E"
       TITLE="[Mono-dev] Handling locked files on Mac">rfine at tbrf.net
       </A><BR>
    <I>Wed Aug 14 00:33:46 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040712.html">[Mono-dev] adding property to mono
</A></li>
        <LI>Next message: <A HREF="040733.html">[Mono-dev] Non-sensical stack trace (possible issue with generic	sharing?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40726">[ date ]</a>
              <a href="thread.html#40726">[ thread ]</a>
              <a href="subject.html#40726">[ subject ]</a>
              <a href="author.html#40726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've written a small patch that causes 'Locked' files on Mac to be 
correctly reported as having FILE_ATTRIBUTE_READONLY set:

<A HREF="https://github.com/richard-fine/mono/commit/8ea7501dd7aec2ae9f55955cedf3a39df07762e9">https://github.com/richard-fine/mono/commit/8ea7501dd7aec2ae9f55955cedf3a39df07762e9</A>

I think it's the correct way to handle that flag. It's not 
POSIX-compliant and requires a bit of ifdeffing, but it seemed simplest; 
if there's a better way to do this, let me know. (I considered #ifdef 
UF_IMMUTABLE but it seemed worse).

Getting Mono to actually build is an ongoing nightmare for me so I've 
not been able to test it properly, plus I've screwed up my branching 
such that I can't submit it as a pull request without pulling in a ton 
of irrelevant stuff. If someone working on Mac could cherry-pick it and 
try it out, I'd appreciate it.

- Richard
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040712.html">[Mono-dev] adding property to mono
</A></li>
	<LI>Next message: <A HREF="040733.html">[Mono-dev] Non-sensical stack trace (possible issue with generic	sharing?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40726">[ date ]</a>
              <a href="thread.html#40726">[ thread ]</a>
              <a href="subject.html#40726">[ subject ]</a>
              <a href="author.html#40726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
