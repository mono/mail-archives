<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] syscall vs. sigaction
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20syscall%20vs.%20sigaction&In-Reply-To=0159660481F7D211989F0008C71EF5250396753C%40exchcts01.pqafrica.co.za">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000042.html">
   <LINK REL="Next"  HREF="000043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] syscall vs. sigaction</H1>
    <B>Dietmar Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20syscall%20vs.%20sigaction&In-Reply-To=0159660481F7D211989F0008C71EF5250396753C%40exchcts01.pqafrica.co.za"
       TITLE="[Mono-devel-list] syscall vs. sigaction">dietmar at maurer-it.com
       </A><BR>
    <I>Wed Mar 26 12:12:53 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000042.html">[Mono-devel-list] syscall vs. sigaction
</A></li>
        <LI>Next message: <A HREF="000043.html">[Mono-devel-list] List test; please ignore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#215">[ date ]</a>
              <a href="thread.html#215">[ thread ]</a>
              <a href="subject.html#215">[ subject ]</a>
              <a href="author.html#215">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The problem is that the libpthread overwrites sigaction, and does not
allow us to catch certain signals. So we need to use syscall directly to
catch the signal. Unfortunately this is very system/version dependent.

Maybe you can take a look on the implementation of libpthread on your 
system to see if it is possible to catch SIGUSR1/SIGRTMIN? What system
do you talk about? Does it have SIGRTMIN?

- Dietmar

On Thu, 2003-03-06 at 13:52, Michael Adams - CPX Tetra wrote:
&gt;<i> Hi All,
</I>&gt;<i> 
</I>&gt;<i> In  mono/jit/jit.c
</I>&gt;<i> Most of the lines:  g_assert (syscall (SYS_sigaction ....
</I>&gt;<i> have been commented out and replaced with : g_assert (sigaction ....
</I>&gt;<i> except for one line.
</I>&gt;<i> 
</I>&gt;<i> Is this one call to syscall() supposed to be there, or should it be replace
</I>&gt;<i> with the sigaction() call ?
</I>&gt;<i> 
</I>&gt;<i> I'm asking as my system doesn't have a syscall() function however
</I>&gt;<i> sigaction() works fine,
</I>&gt;<i> so I have to change this line each time I get a newer version of mono.
</I>&gt;<i> 
</I>&gt;<i> also,
</I>&gt;<i> mono/jit/codegen.h  has the include: #include &lt;sys/syscall.h&gt;
</I>&gt;<i> which my system lacks.  However, the code compiles fine if I comment this
</I>&gt;<i> include out.
</I>&gt;<i> If possible, could the configure define a _HAVE_SYS_SYSCALL_ or something ?
</I>&gt;<i> 
</I>&gt;<i> cheers
</I>&gt;<i> 
</I>&gt;<i> ----------------------------------------------------------------------------
</I>&gt;<i> ------------
</I>&gt;<i> Michael Adams
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000042.html">[Mono-devel-list] syscall vs. sigaction
</A></li>
	<LI>Next message: <A HREF="000043.html">[Mono-devel-list] List test; please ignore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#215">[ date ]</a>
              <a href="thread.html#215">[ thread ]</a>
              <a href="subject.html#215">[ subject ]</a>
              <a href="author.html#215">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
