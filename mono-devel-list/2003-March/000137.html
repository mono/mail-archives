<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] RE: A few problems with the Beginners Howto document
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20RE%3A%20A%20few%20problems%20with%20the%20Beginners%20Howto%20document&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000134.html">
   <LINK REL="Next"  HREF="000138.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] RE: A few problems with the Beginners Howto document</H1>
    <B>Vincent Sacksteder</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20RE%3A%20A%20few%20problems%20with%20the%20Beginners%20Howto%20document&In-Reply-To="
       TITLE="[Mono-devel-list] RE: A few problems with the Beginners Howto document">vincent at sacksteder.com
       </A><BR>
    <I>Tue Mar 18 10:00:57 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000134.html">[Mono-devel-list] A few problems with the Beginners Howto document
</A></li>
        <LI>Next message: <A HREF="000138.html">[Mono-devel-list] Converted tests in assembly System to NUnit 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#137">[ date ]</a>
              <a href="thread.html#137">[ thread ]</a>
              <a href="subject.html#137">[ subject ]</a>
              <a href="author.html#137">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A correction to point 4:  I now think that autoconf is behaving correctly.
Instead configure.in is at fault: there is a conflict between the
GC_WIN32_THREADS #define in gc.h and the -DGC_WIN32_THREADS option which
configure.in (line 24) passes to the compiler when testing for the presence
of header files.  Because GC_WIN32_THREADS is defined twice, gcc generates a
warning, and therefore autoconf concludes that gc.h does not exist, and
therefore the build fails.

Some possible fixes would be either to:
1. temporarily redefine the  av_cpp variable before  testing for the
presence of gc.h (i.e. line 153 of configure.in,) or:
2. see if there's some way to get gcc to not print that warning about
GC_WIN32_THREADS being defined twice.

I haven't yet tried or tested either approach.

Regards,
	Vincent Sacksteder

 -----Original Message-----
From: 	Vincent Sacksteder [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">vincent at sacksteder.com</A>]
Sent:	Monday, March 17, 2003 5:27 PM
To:	'<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>'
Subject:	A few problems with the Beginners Howto document

Dear mono community:

	Concerning the document which specifies how to get started downloading and
compiling mono on Windows,
<A HREF="http://monoevo.sourceforge.net/mono-windows/mono-beginning-windows/x53.html:">http://monoevo.sourceforge.net/mono-windows/mono-beginning-windows/x53.html:</A>

	I would like to note the following problems:
1. I was not able to get the source code from cvs until I changed the
cvsroot away from that specified in the doc. My new cvsroot statement is:
export CVSROOT=:pserver:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">anonymous at anoncvs.go-mono.com</A>:/mono
I put this in the shell script.

2. The compile failed until I changed the ACLOCAL_FLAGS variable to a value
different from that stated in the doc.  My new statement is:
export ACLOCAL_FLAGS=&quot;-I /home/install/share/aclocal&quot;
Note too that it is not immediately obvious which path to pick, since there
are many aclocal directories and files.  It would be helpful to tell the
reader how to discern which aclocal path to use.

3. Toward the end of compile/install there are many failures in copying,
which are caused by the absence of certain dlls etc.  The errors are
ignored, which I think is the right thing since they correspond to things
built from the mcs tree.  It would be helpful to note in the doc that these
errors are innocuous.

4. Due to a bug in automake/configure/gcc, currently configure is unable to
detect header files.  The mono install script automatically checks for the
presence of gc.h, and if it is not detected aborts.  Therefore the mono
install script ALWAYS fails.

  It appears that you've seen the same problem, because at the end of your
doc there is a discussion of how to do a manual install &quot;If you have noticed
problems during step 8 and the execution stops because of errors as I cannot
find that or such library or alike.&quot;

  I would suggest that until the automake bug is fixed, the following patch
to the mono install script be applied:
	a. in gc_wrapper.h, insert at the beginning a line reading:
#define HAVE_GC_GC_H
	b. in configure.in, search for the line reading:

AC_MSG_ERROR(&quot;Found libgc but not its header files! You may need to install
them by hand.&quot;)

	Replace it with the following line:

	AC_MSG_WARN([*** autoconf header bug workaround hack!])

	c. in configure.in, search for the line reading:

  	AC_MSG_ERROR(&quot;GC requested but header files not found! You may need to
install them by hand.&quot;)

	Replace it with the following line:

	AC_MSG_WARN([*** autoconf header bug workaround hack!])


With these changes in place, installation and compilation went through
succesfully for me.

I have reported the automake bug to the cygwin mailing list.

	Regards,
		Vincent Sacksteder




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000134.html">[Mono-devel-list] A few problems with the Beginners Howto document
</A></li>
	<LI>Next message: <A HREF="000138.html">[Mono-devel-list] Converted tests in assembly System to NUnit 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#137">[ date ]</a>
              <a href="thread.html#137">[ thread ]</a>
              <a href="subject.html#137">[ subject ]</a>
              <a href="author.html#137">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
