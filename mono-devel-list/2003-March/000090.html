<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Threading bug?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Threading%20bug%3F&In-Reply-To=487C7BED8BFCDD4C9B1E4EA3DCEA5FC70E1F45%40swsmsx402.isw.intel.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000088.html">
   <LINK REL="Next"  HREF="000092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Threading bug?</H1>
    <B>Simon Ask Ulsnes</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Threading%20bug%3F&In-Reply-To=487C7BED8BFCDD4C9B1E4EA3DCEA5FC70E1F45%40swsmsx402.isw.intel.com"
       TITLE="[Mono-devel-list] Threading bug?">simon at ulsnes.dk
       </A><BR>
    <I>Mon Mar 10 16:06:18 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000088.html">[Mono-devel-list] Threading bug?
</A></li>
        <LI>Next message: <A HREF="000092.html">[Mono-devel-list] Threading bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#90">[ date ]</a>
              <a href="thread.html#90">[ thread ]</a>
              <a href="subject.html#90">[ subject ]</a>
              <a href="author.html#90">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The attached program generates the attached output on my machine.
As you can probably guess from the source, the output was supposed to look like this:

&lt;OUTPUT&gt;
&lt;ctrl+c to stop&gt;
Queueing new thread...
&lt;subthread 1&gt; Sleeping 10 seconds...
Queueing new thread...
&lt;subthread 2&gt; Sleeping 10 seconds...
Queueing new thread...
&lt;subthread 3&gt; Sleeping 10 seconds...
and so on...
&lt;/OUTPUT&gt;

...but it doesn't! As you can see in my output-file, the first thread is started and runs fine, then all the other threads are queued, but they don't actually run.

If it behaves the same way on your machines, I would characterize this as a bug in the Mono threading library...

Yours sincerely,
Simon Ask Ulsnes
-------------- next part --------------
using System;
using System.Threading;

public class ThreadingTest
{
	public ThreadingTest()
	{
		Console.WriteLine(&quot;&lt;ctrl+c to stop&gt;&quot;);
		int numthreads = 0;
		while (true)
		{
			Console.WriteLine(&quot;Queueing new thread...&quot;);
			numthreads++;
			ThreadPool.QueueUserWorkItem(new WaitCallback(ThreadProcedure), numthreads);
			Thread.Sleep(1000);
		}
	}

	public void ThreadProcedure(object state)
	{
		Console.WriteLine(&quot;&lt;subthread &quot;+((int)state).ToString()+&quot;&gt; Sleeping 10 seconds...&quot;);
		Thread.Sleep(10000);
		Console.WriteLine(&quot;&lt;subthread &quot;+((int)state).ToString()+&quot;&gt; Finished.&quot;);
	}

	public static void Main(string[] args)
	{
		ThreadingTest tt = new ThreadingTest();
	}
}
-------------- next part --------------
&#239;&#187;&#191;&lt;ctrl+c to stop&gt;
Queueing new thread...
&lt;subthread 1&gt; Sleeping 10 seconds...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
&lt;subthread 1&gt; Finished.
&lt;subthread 2&gt; Sleeping 10 seconds...
&lt;subthread 3&gt; Sleeping 10 seconds...
&lt;subthread 4&gt; Sleeping 10 seconds...
&lt;subthread 5&gt; Sleeping 10 seconds...
&lt;subthread 6&gt; Sleeping 10 seconds...
&lt;subthread 7&gt; Sleeping 10 seconds...
&lt;subthread 8&gt; Sleeping 10 seconds...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
&lt;subthread 2&gt; Finished.
&lt;subthread 3&gt; Finished.
&lt;subthread 4&gt; Finished.
&lt;subthread 5&gt; Finished.
&lt;subthread 6&gt; Finished.
&lt;subthread 8&gt; Finished.
&lt;subthread 7&gt; Finished.
&lt;subthread 9&gt; Sleeping 10 seconds...
&lt;subthread 10&gt; Sleeping 10 seconds...
&lt;subthread 11&gt; Sleeping 10 seconds...
&lt;subthread 12&gt; Sleeping 10 seconds...
&lt;subthread 13&gt; Sleeping 10 seconds...
&lt;subthread 14&gt; Sleeping 10 seconds...
&lt;subthread 15&gt; Sleeping 10 seconds...
&lt;subthread 16&gt; Sleeping 10 seconds...
&lt;subthread 17&gt; Sleeping 10 seconds...
&lt;subthread 18&gt; Sleeping 10 seconds...
&lt;subthread 19&gt; Sleeping 10 seconds...
&lt;subthread 20&gt; Sleeping 10 seconds...
Queueing new thread...
&lt;subthread 21&gt; Sleeping 10 seconds...
Queueing new thread...
&lt;subthread 22&gt; Sleeping 10 seconds...
Queueing new thread...
&lt;subthread 23&gt; Sleeping 10 seconds...
Queueing new thread...
&lt;subthread 24&gt; Sleeping 10 seconds...
Queueing new thread...
Queueing new thread...
Queueing new thread...
Queueing new thread...
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000088.html">[Mono-devel-list] Threading bug?
</A></li>
	<LI>Next message: <A HREF="000092.html">[Mono-devel-list] Threading bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#90">[ date ]</a>
              <a href="thread.html#90">[ thread ]</a>
              <a href="subject.html#90">[ subject ]</a>
              <a href="author.html#90">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
