<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Issue with URL routing not properly utilising default	parameters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Issue%20with%20URL%20routing%20not%20properly%20utilising%20default%0A%09parameters&In-Reply-To=%3CCAB1r_%2BUGCbafThY02FdoHPF%3DvqKd30wXAsgq3vuCfRwrDc5iKQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039951.html">
   <LINK REL="Next"  HREF="039953.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Issue with URL routing not properly utilising default	parameters</H1>
    <B>Daniel Lo Nigro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Issue%20with%20URL%20routing%20not%20properly%20utilising%20default%0A%09parameters&In-Reply-To=%3CCAB1r_%2BUGCbafThY02FdoHPF%3DvqKd30wXAsgq3vuCfRwrDc5iKQ%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Issue with URL routing not properly utilising default	parameters">lists at dan.cx
       </A><BR>
    <I>Sat Dec 22 08:32:13 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039951.html">[Mono-dev] JIT on iOS
</A></li>
        <LI>Next message: <A HREF="039953.html">[Mono-dev] Issue with URL routing not properly utilising	default parameters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39952">[ date ]</a>
              <a href="thread.html#39952">[ thread ]</a>
              <a href="subject.html#39952">[ subject ]</a>
              <a href="author.html#39952">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm curious as to if anyone has experienced this issue before. Given the
following routes:

// Blog home page - Don't include page number in URL for first page
routes.MapRoute(
name: &quot;BlogHome&quot;,
url: &quot;blog&quot;,
defaults: new { controller = &quot;Blog&quot;, action = &quot;Index&quot;, page = 1 }
);
routes.MapRoute(
name: &quot;BlogHomePage&quot;,
url: &quot;blog/page-{page}&quot;,
defaults: new { controller = &quot;Blog&quot;, action = &quot;Index&quot; },
constraints: new { page = @&quot;\d+&quot; }
);

And this ASP.NET MVC action:
public ActionResult Index(int page = 1) { ... }

Microsoft .NET is smart enough to use the first route if you build a URL
with page = 1 (something like Url.Action(&quot;Index&quot;, &quot;Blog&quot;, new { page = 1 })
in ASP.NET MVC) and the second route when the page number isn't 1. However,
Mono is always using the second route, even when page = 1. In theory it
should be matching the first rule as it's added first (and thus should have
higher priority).

I've worked around this in my code by explicitly specifying which route to
use:

public static string BlogIndex(this UrlHelper urlHelper, int page = 1)
{
return page == 1
? urlHelper.RouteUrl(&quot;BlogHome&quot;)
:<i> urlHelper.RouteUrl(&quot;BlogHomePage&quot;, new { page = page });
</I>}

I have reported this as a bug (
<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=9116">https://bugzilla.xamarin.com/show_bug.cgi?id=9116</A>) but I'm curious as to if
it's a known issue with Mono's URL routing implementation.

I was going to try the Microsoft .NET implementation with Mono but it looks
like Microsoft's implementation is in the core System.Web assembly in .NET
4.0 (instead of being in a separate System.Web.Routing assembly)

Thanks,
 - Daniel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20121222/be862225/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20121222/be862225/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039951.html">[Mono-dev] JIT on iOS
</A></li>
	<LI>Next message: <A HREF="039953.html">[Mono-dev] Issue with URL routing not properly utilising	default parameters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39952">[ date ]</a>
              <a href="thread.html#39952">[ thread ]</a>
              <a href="subject.html#39952">[ subject ]</a>
              <a href="author.html#39952">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
