<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Performing assembly resolution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Performing%20assembly%20resolution&In-Reply-To=%3CCAAWtsQxv4b7QntHAi_PAc6eqPb%3DgD89G7f0nDvx5RxP2_VwHBA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039961.html">
   <LINK REL="Next"  HREF="039963.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Performing assembly resolution</H1>
    <B>Robin Neatherway</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Performing%20assembly%20resolution&In-Reply-To=%3CCAAWtsQxv4b7QntHAi_PAc6eqPb%3DgD89G7f0nDvx5RxP2_VwHBA%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Performing assembly resolution">robin.neatherway at gmail.com
       </A><BR>
    <I>Sat Dec 29 11:42:47 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039961.html">[Mono-dev] Thank you for your hard work :)
</A></li>
        <LI>Next message: <A HREF="039963.html">[Mono-dev] Absolute beginner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39962">[ date ]</a>
              <a href="thread.html#39962">[ thread ]</a>
              <a href="subject.html#39962">[ subject ]</a>
              <a href="author.html#39962">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I want to perform the following task:

1. Read in a project file
2. Resolve all the assembly references to full paths

This is for the purpose of integrating with the F# compiler service,
which needs to be given the full path to all required assemblies in
order to return completion information.

So given an entry like:

    &lt;Reference Include=&quot;System&quot; /&gt;

in my project file, I would like it to resolve to:

/Library/Frameworks/Mono.framework/Versions/3.0.0/lib/mono/4.5/System.dl

modulo the GAC location. If a HintPath is present, this should be respected.

Now clearly this is possible given that xbuild does it, so presumably
the machinery is all there in the Microsoft.Build namespace, but much
googling and searching through the code of xbuild and
Microsoft.Build.* haven't enabled me to come up with complete solution
yet. The best I have been able to do is to read the project file using
the Project type. Each of the references like the one to System above
gives me a BuildItem. I then create a new TaskItem from each of these
using the FinalItemSpec and do an ad hoc copy of the HintPath metadata
(if found) over to the new TaskItem. Feeding this into an instance of
ResolveAssemblyReference gives the full paths. Although it has worked
for the examples I've tried so far it feels quite brittle. For example
there may be other important metadata I'm ignoring.

So, what is the best way to do this, or are there any pointers as to
where I've missed this in the mono codebase (or monodevelop for that
matter)?

Thanks,
Robin
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039961.html">[Mono-dev] Thank you for your hard work :)
</A></li>
	<LI>Next message: <A HREF="039963.html">[Mono-dev] Absolute beginner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39962">[ date ]</a>
              <a href="thread.html#39962">[ thread ]</a>
              <a href="subject.html#39962">[ subject ]</a>
              <a href="author.html#39962">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
