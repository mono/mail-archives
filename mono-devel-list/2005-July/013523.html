<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] Profile 2.0 assembly versions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Profile%202.0%20assembly%20versions&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013536.html">
   <LINK REL="Next"  HREF="013524.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] Profile 2.0 assembly versions</H1>
    <B>Andreas Nahr</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Profile%202.0%20assembly%20versions&In-Reply-To="
       TITLE="[Mono-devel-list] [PATCH] Profile 2.0 assembly versions">ClassDevelopment at A-SoftTech.com
       </A><BR>
    <I>Thu Jul 28 18:42:51 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013536.html">[Mono-devel-list] [PATCH] Profile 2.0 assembly versions
</A></li>
        <LI>Next message: <A HREF="013524.html">[Mono-devel-list] [PATCH] Profile 2.0 assembly versions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13523">[ date ]</a>
              <a href="thread.html#13523">[ thread ]</a>
              <a href="subject.html#13523">[ subject ]</a>
              <a href="author.html#13523">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes - it would make a lot of sense to put them into a single file. However 
it would come at a cost of up to 2kb of size added to EACH assembly that 
uses Consts.

In fact I think we could do something really clever to our compiler here, 
that would also benefit for a lot of other cases.
AFAIK the compiler can already eliminate dead code. I would propose a step 
that allows the compiler to scan for dead code again AFTER constants are 
resolved. This way the compiler would be able to completely eliminate the 
Consts Class after compiling. This would also add lots of added value to 
other applications. It's quite common to use private consts and especially 
enums to structure the code and make it more readable. With the proposed 
compiler function all of these things could be thrown out at compile-time, 
which could help a lot of applications to get smaller.

We could add a compiler-switch for that like -EliminatePrivateConstants

Andreas

----- Original Message ----- 
From: &quot;Ben Maurer&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bmaurer at ximian.com</A>&gt;
To: &quot;Andreas Nahr&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ClassDevelopment at A-SoftTech.com</A>&gt;
Cc: &quot;Korn&#233;l P&#225;l&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">kornelpal at hotmail.com</A>&gt;; &quot;Miguel de Icaza&quot; 
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at ximian.com</A>&gt;; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Sent: Friday, July 29, 2005 12:11 AM
Subject: Re: [Mono-devel-list] [PATCH] Profile 2.0 assembly versions


&gt;<i> On Fri, 2005-07-29 at 00:07 +0200, Andreas Nahr wrote:
</I>&gt;&gt;<i> No Consts.cs aren't automatically generated.
</I>&gt;&gt;<i> The problem is, that several Attributes of classes in System.Web do not 
</I>&gt;&gt;<i> use
</I>&gt;&gt;<i> the consts scheme, and about one third of your (BIG) patch is just for
</I>&gt;&gt;<i> changing these Attributes.
</I>&gt;&gt;<i> We will then have to change these again later, so it might make sense do 
</I>&gt;&gt;<i> do
</I>&gt;&gt;<i> it now instead of doing it twice (and adding lots of changelog entries
</I>&gt;&gt;<i> twice).
</I>&gt;<i>
</I>&gt;<i> If we really want to be clever, and avoid doing things twice, we can put
</I>&gt;<i> this:
</I>&gt;<i>
</I>&gt;<i> internal class MonoConsts {
</I>&gt;<i> #if ...
</I>&gt;<i> public string FXVersion = ...
</I>&gt;<i> #elif ...
</I>&gt;<i> ...
</I>&gt;<i> #endif
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> in the common build directory. This way, the next time we need to target
</I>&gt;<i> another FX, we don't have to do it in 100 places.
</I>&gt;<i>
</I>&gt;<i> The Const.cs is probably still a good idea, since it is really ugly to
</I>&gt;<i> have those magic names lying around the source code.
</I>&gt;<i>
</I>&gt;<i> -- Ben
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013536.html">[Mono-devel-list] [PATCH] Profile 2.0 assembly versions
</A></li>
	<LI>Next message: <A HREF="013524.html">[Mono-devel-list] [PATCH] Profile 2.0 assembly versions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13523">[ date ]</a>
              <a href="thread.html#13523">[ thread ]</a>
              <a href="subject.html#13523">[ subject ]</a>
              <a href="author.html#13523">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
