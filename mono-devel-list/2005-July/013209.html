<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Custom Marshalling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Custom%20Marshalling&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013208.html">
   <LINK REL="Next"  HREF="013210.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Custom Marshalling</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Custom%20Marshalling&In-Reply-To="
       TITLE="[Mono-devel-list] Custom Marshalling">kornelpal at hotmail.com
       </A><BR>
    <I>Mon Jul 18 14:05:53 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013208.html">[Mono-devel-list] Custom Marshalling 
</A></li>
        <LI>Next message: <A HREF="013210.html">[Mono-devel-list] Custom Marshalling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13209">[ date ]</a>
              <a href="thread.html#13209">[ thread ]</a>
              <a href="subject.html#13209">[ subject ]</a>
              <a href="author.html#13209">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>According to my experiences by-ref (out is by-ref as well) custom marshaling
is not supported in either runtime. Could you attach please a full test code
(managed and umnanaged source code) to can I try it?

Korn&#233;l

----- Original Message -----
From: Jonathan S. Chambers


Hello All,
I am trying to use a custom marshaler in mono. The marshaling
from managed to native is working great, but my custom marshalling code
is not getting hit for the native to managed case. Here are my pinvoke
signatures:

[DllImport(@&quot;TestLib.dll&quot;, CallingConvention = CallingConvention.Cdecl)]
public extern static int
SetName([MarshalAs(UnmanagedType.CustomMarshaler, MarshalTypeRef =
typeof(StringMarshaler))]string name);

[DllImport(@&quot;TestLib.dll&quot;, CallingConvention = CallingConvention.Cdecl)]
public extern static int
GetName([MarshalAs(UnmanagedType.CustomMarshaler,MarshalTypeRef=typeof(S
tringMarshaler)), Out]out string name);

So my SetName function works fine, but when I call GetName the
MarshalNativeToManaged method on my custom marshaller is not getting
called (and it does in .Net). Any thoughts?

Thanks,
Jonathan

_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013208.html">[Mono-devel-list] Custom Marshalling 
</A></li>
	<LI>Next message: <A HREF="013210.html">[Mono-devel-list] Custom Marshalling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13209">[ date ]</a>
              <a href="thread.html#13209">[ thread ]</a>
              <a href="subject.html#13209">[ subject ]</a>
              <a href="author.html#13209">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
