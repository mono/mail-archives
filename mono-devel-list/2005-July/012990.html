<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] two questions about Mono.Security.dll
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20two%20questions%20about%20Mono.Security.dll&In-Reply-To=01e801c57dff%2445a65bb0%24147d1cac%40necas.nec.com.cn">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012974.html">
   <LINK REL="Next"  HREF="013015.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] two questions about Mono.Security.dll</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20two%20questions%20about%20Mono.Security.dll&In-Reply-To=01e801c57dff%2445a65bb0%24147d1cac%40necas.nec.com.cn"
       TITLE="[Mono-devel-list] two questions about Mono.Security.dll">spouliot at videotron.ca
       </A><BR>
    <I>Sat Jul  2 11:47:47 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012974.html">[Mono-devel-list] two questions about Mono.Security.dll
</A></li>
        <LI>Next message: <A HREF="013015.html">[Mono-devel-list] two questions about Mono.Security.dll
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12990">[ date ]</a>
              <a href="thread.html#12990">[ thread ]</a>
              <a href="subject.html#12990">[ subject ]</a>
              <a href="author.html#12990">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Liu,

&gt;<i> I am very interested in the SSL/TLS function of
</I>&gt;<i> Novell.Directory.Ldap.dll and
</I>&gt;<i> Mono.Security.dll. I have built the Novell CsharpLDAP's sample source
</I>&gt;<i> StartTLS.cs with mono1.1.8's Novell.Directory.Ldap.dll Mono.Security.dll
</I>&gt;<i> on Windows to do some test. And i found two problems about
</I>&gt;<i> Mono.Security.dll.
</I>&gt;<i>
</I>&gt;<i> &lt;1.&gt; The sample code can't work correctly. it always output 91
</I>&gt;<i> error like follows.
</I>&gt;<i> So i downloaded the Mono.Security.dll's source from
</I>&gt;<i> <A HREF="http://svn.myrealbox.com/viewcvs/trunk/mcs/class/Mono.Security/">http://svn.myrealbox.com/viewcvs/trunk/mcs/class/Mono.Security/</A>
</I>&gt;<i> to rebuild
</I>&gt;<i> the Mono.Security.dll. This sample code can work correctly with this
</I>&gt;<i> Mono.Security.dll. it seems that this problem was resolved in the
</I>&gt;<i> new sources.
</I>&gt;<i>
</I>&gt;<i> Will mono1.1.9 contain this change and when mono1.1.9 will be released ?
</I>
Yes it should (i.e. unless it cause a regression elsewhere) be in 1.1.9 but
it problably won't be in any 1.1.8.x micro releases.

Could you provide more details about the problem you encountered ? That
would help ensure the feature doesn't get broken later.

Did you try any Mono release before 1.1.8 ? If so was it working ? (i.e. is
it a regression ?)

The only fixed case I can think of is if you're using Active Directory
(which requires optional mutual authentication to works).

&gt;<i> &lt;2.&gt; I made a new root certificate and a new server certificate,
</I>&gt;<i> then did a test
</I>&gt;<i> using the above sample code, but i got
</I>&gt;<i> -2146762494(CERT_E_VALIDITYPERIODNESTING)
</I>&gt;<i> error, but the next day, i used the same certificate to do the
</I>&gt;<i> test, it successed.
</I>&gt;<i> I think it should be a bug about Valid time check. I debuged it
</I>&gt;<i> and found the
</I>&gt;<i> reason. the reason is that ValidFrom and ValidUntil were local time, and
</I>&gt;<i> current time was UTC time.
</I>&gt;<i>
</I>&gt;<i> There are two method to fix this problem, the one is modify
</I>&gt;<i> ASN1Convert::ToDateTime
</I>&gt;<i> function, changing return value to UTC time, the other one is
</I>&gt;<i> just moidify
</I>&gt;<i> X509Certificate::Parse function, changing m_from and m_until to UTC time.
</I>&gt;<i> Which one it better? If there are same problem in other place where the
</I>&gt;<i> ASN1Convert::ToDateTime be called, the first one maybe better, i think.
</I>
Yes it is. ASN.1 encoded dates are stored in UTC format. Thanks for spotting
this.
I'll be fixing this ASAP (i.e. it should also be in 1.1.9).

Thanks

Sebastien Pouliot
home: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">spouliot at videotron.ca</A>
blog: <A HREF="http://pages.infinit.net/ctech/poupou.html">http://pages.infinit.net/ctech/poupou.html</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012974.html">[Mono-devel-list] two questions about Mono.Security.dll
</A></li>
	<LI>Next message: <A HREF="013015.html">[Mono-devel-list] two questions about Mono.Security.dll
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12990">[ date ]</a>
              <a href="thread.html#12990">[ thread ]</a>
              <a href="subject.html#12990">[ subject ]</a>
              <a href="author.html#12990">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
