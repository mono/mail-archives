<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] The first (attempt	to	checkin)	managed	collation patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20The%20first%20%28attempt%0A%09to%09checkin%29%09managed%09collation%20patch&In-Reply-To=1122222153.29721.57.camel%40linux.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013373.html">
   <LINK REL="Next"  HREF="013381.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] The first (attempt	to	checkin)	managed	collation patch</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20The%20first%20%28attempt%0A%09to%09checkin%29%09managed%09collation%20patch&In-Reply-To=1122222153.29721.57.camel%40linux.site"
       TITLE="[Mono-devel-list] The first (attempt	to	checkin)	managed	collation patch">lupus at ximian.com
       </A><BR>
    <I>Mon Jul 25 05:41:55 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013373.html">[Mono-devel-list] The	first	(attempt	to	checkin)	managed	collation patch
</A></li>
        <LI>Next message: <A HREF="013381.html">[Mono-devel-list] The first (attempt to checkin) managed collation	patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13376">[ date ]</a>
              <a href="thread.html#13376">[ thread ]</a>
              <a href="subject.html#13376">[ subject ]</a>
              <a href="author.html#13376">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/24/05 Miguel de Icaza wrote:
&gt;<i> &gt; &gt; It can be done in two ways: embed the files in the mono binary like we do
</I>&gt;<i> &gt; &gt; with the char tables or load the files from where mscorlib was loaded.
</I>&gt;<i> &gt; &gt; Both are trivial to implement.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; For now I took the latter approach. That means however we need some
</I>&gt;<i> &gt; love on the build system.
</I>&gt;<i> 
</I>&gt;<i> I personally like the idea of having this data on the dll files
</I>&gt;<i> themselves more, you can embed the resources with -resource and then get
</I>&gt;<i> the same IntPtr without adding a new icall like this:
</I>&gt;<i> 
</I>&gt;<i> int size;
</I>&gt;<i> Module module;
</I>&gt;<i> IntPtr data = GetManifestResourceInternal (name, out size, out module);
</I>&gt;<i> 
</I>&gt;<i> We reuse the existing framework, do not require build system love and do
</I>&gt;<i> not have to introduce a new icall.
</I>
All of that is fine, except that you get incorrect data, since we have arrays
of shorts or ints, so we either give incorrect results on bigendian systems
or we introduce code to byteswap at runtime, needlessly slowing down the code.

The code should do what we already do for the char data: embed the arrays
in mono so the endianess is correct and there are no build systems changes.
Using managed resources for this is a net loss. Using and mmapping external files
instead of embedding them has the same (well, less) build system complexity
of embedding the correct endian files as managed resources.

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013373.html">[Mono-devel-list] The	first	(attempt	to	checkin)	managed	collation patch
</A></li>
	<LI>Next message: <A HREF="013381.html">[Mono-devel-list] The first (attempt to checkin) managed collation	patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13376">[ date ]</a>
              <a href="thread.html#13376">[ thread ]</a>
              <a href="subject.html#13376">[ subject ]</a>
              <a href="author.html#13376">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
