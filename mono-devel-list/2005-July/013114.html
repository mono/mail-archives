<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] DateTime Parameters in MSSQL Server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20DateTime%20Parameters%20in%20MSSQL%20Server&In-Reply-To=200507121527.55126.informatique.internet%40fiducial.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013113.html">
   <LINK REL="Next"  HREF="013115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] DateTime Parameters in MSSQL Server</H1>
    <B>Chris van Wyk</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20DateTime%20Parameters%20in%20MSSQL%20Server&In-Reply-To=200507121527.55126.informatique.internet%40fiducial.fr"
       TITLE="[Mono-devel-list] DateTime Parameters in MSSQL Server">chris at jib.co.za
       </A><BR>
    <I>Tue Jul 12 09:42:41 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013113.html">[Mono-devel-list] DateTime Parameters in MSSQL Server
</A></li>
        <LI>Next message: <A HREF="013115.html">[Mono-devel-list] DateTime Parameters in MSSQL Server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13114">[ date ]</a>
              <a href="thread.html#13114">[ thread ]</a>
              <a href="subject.html#13114">[ subject ]</a>
              <a href="author.html#13114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Datetime has also been giving me huge amounts of problems. 

The work around for me was to convert the item using ToString(&quot;s&quot;). If you
are going to use stored procs, you will need to modify your stored proc
parameters in the sql statement to string in stead of datetime.

I have also been able to get the Microsoft.ApplicationBlocks.Data going with
modification to specific DateTime parameter formatting.

There seems to be problems with the data adapter using the sqlhelper from
the above. I am getting concurrency errors on updates for instance. If
someone else has had concurrency errors please let me know as I have been
able to work round this, but I'm not sure if it is a bug in Mono.

I am using 1.1.7 and have not tested the above on 1.1.8

Regards
Chris


&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> [mailto:mono-devel-list-
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bounces at lists.ximian.com</A>] On Behalf Of Hubert FONGARNAND
</I>&gt;<i> Sent: 12 July 2005 03:28 PM
</I>&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Subject: [Mono-devel-list] DateTime Parameters in MSSQL Server
</I>&gt;<i> 
</I>&gt;<i> I've an issue with datetime parameters with MSSQL Server in Mono...
</I>&gt;<i> It seem's that the parameters is badly sent to the SQL Server...
</I>&gt;<i> Please test that :
</I>&gt;<i> 
</I>&gt;<i> using System;
</I>&gt;<i> using System.Data;
</I>&gt;<i> using System.Data.SqlClient;
</I>&gt;<i> 
</I>&gt;<i> class MainClass
</I>&gt;<i> {
</I>&gt;<i> 	static string cnx=&quot;user id=sa;password=sa;data
</I>&gt;<i> source=10.69.100.93;initial
</I>&gt;<i> catalog=Fiche_Produit&quot;;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 	public static void Main(string[] args)
</I>&gt;<i> 	{
</I>&gt;<i> 		Console.WriteLine(&quot;Hello World!&quot;);
</I>&gt;<i> 		SqlCommand cmd=new SqlCommand();
</I>&gt;<i> 		cmd.Connection=new SqlConnection(cnx);
</I>&gt;<i> 		cmd.CommandText=&quot;INSERT INTO essais (date) VALUES (@date)&quot;;
</I>&gt;<i> 		cmd.Parameters.Clear();
</I>&gt;<i> 
</I>&gt;<i> 	cmd.Parameters.Add(&quot;@date&quot;,SqlDbType.DateTime).Value=DateTime.Now;
</I>&gt;<i> 		cmd.Connection.Open();
</I>&gt;<i> 		cmd.ExecuteNonQuery();
</I>&gt;<i> 		cmd.Connection.Close();
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> it returns :
</I>&gt;<i> Unhandled Exception: System.Data.SqlClient.SqlException: Erreur de
</I>&gt;<i> conversion
</I>&gt;<i> du type de donn&#233;es varchar en datetime.
</I>&gt;<i> Erreur de conversion du type de donn&#233;es varchar en datetime.
</I>&gt;<i> in [0x00034]
</I>&gt;<i> (at
</I>&gt;<i> /home/hubert/mono/mcs/class/System.Data/System.Data.SqlClient/SqlConnectio
</I>&gt;<i> n.cs:266)
</I>&gt;<i> System.Data.SqlClient.SqlConnection:ErrorHandler (System.Object sender,
</I>&gt;<i> Mono.Data.Tds.Protocol.TdsInternalErrorMessageEventArgs e)
</I>&gt;<i> in (wrapper delegate-invoke)
</I>&gt;<i> System.MulticastDelegate:invoke_void_object_TdsInternalErrorMessageEventAr
</I>&gt;<i> gs
</I>&gt;<i> (object,Mono.Data.Tds.Protocol.TdsInternalErrorMessageEventArgs)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> In english : error when converting a varchar datatype into a datetime
</I>&gt;<i> 
</I>&gt;<i> thanks
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Ce message et les &#233;ventuels documents joints peuvent contenir des
</I>&gt;<i> informations confidentielles.
</I>&gt;<i> Au cas o&#249; il ne vous serait pas destin&#233;, nous vous remercions de bien
</I>&gt;<i> vouloir le supprimer et en aviser imm&#233;diatement l'exp&#233;diteur. Toute
</I>&gt;<i> utilisation de ce message non conforme &#224; sa destination, toute diffusion
</I>&gt;<i> ou publication, totale ou partielle et quel qu'en soit le moyen est
</I>&gt;<i> formellement interdite.
</I>&gt;<i> Les communications sur internet n'&#233;tant pas s&#233;curis&#233;es, l'int&#233;grit&#233; de ce
</I>&gt;<i> message n'est pas assur&#233;e et la soci&#233;t&#233; &#233;mettrice ne peut &#234;tre tenue pour
</I>&gt;<i> responsable de son contenu.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013113.html">[Mono-devel-list] DateTime Parameters in MSSQL Server
</A></li>
	<LI>Next message: <A HREF="013115.html">[Mono-devel-list] DateTime Parameters in MSSQL Server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13114">[ date ]</a>
              <a href="thread.html#13114">[ thread ]</a>
              <a href="subject.html#13114">[ subject ]</a>
              <a href="author.html#13114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
