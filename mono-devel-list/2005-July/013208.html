<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Custom Marshalling 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Custom%20Marshalling%20&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013207.html">
   <LINK REL="Next"  HREF="013209.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Custom Marshalling </H1>
    <B>Jonathan S. Chambers</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Custom%20Marshalling%20&In-Reply-To="
       TITLE="[Mono-devel-list] Custom Marshalling ">Jonathan.Chambers at ansys.com
       </A><BR>
    <I>Mon Jul 18 13:58:58 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013207.html">[Mono-devel-list] which proxy server for linux .NET Remoting
</A></li>
        <LI>Next message: <A HREF="013209.html">[Mono-devel-list] Custom Marshalling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13208">[ date ]</a>
              <a href="thread.html#13208">[ thread ]</a>
              <a href="subject.html#13208">[ subject ]</a>
              <a href="author.html#13208">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello All,
	I am trying to use a custom marshaler in mono. The marshaling
from managed to native is working great, but my custom marshalling code
is not getting hit for the native to managed case. Here are my pinvoke
signatures:

[DllImport(@&quot;TestLib.dll&quot;, CallingConvention = CallingConvention.Cdecl)]
public extern static int
SetName([MarshalAs(UnmanagedType.CustomMarshaler, MarshalTypeRef =
typeof(StringMarshaler))]string name);

[DllImport(@&quot;TestLib.dll&quot;, CallingConvention = CallingConvention.Cdecl)]
public extern static int
GetName([MarshalAs(UnmanagedType.CustomMarshaler,MarshalTypeRef=typeof(S
tringMarshaler)), Out]out string name);

So my SetName function works fine, but when I call GetName the
MarshalNativeToManaged method on my custom marshaller is not getting
called (and it does in .Net). Any thoughts?

Thanks,
Jonathan


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013207.html">[Mono-devel-list] which proxy server for linux .NET Remoting
</A></li>
	<LI>Next message: <A HREF="013209.html">[Mono-devel-list] Custom Marshalling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13208">[ date ]</a>
              <a href="thread.html#13208">[ thread ]</a>
              <a href="subject.html#13208">[ subject ]</a>
              <a href="author.html#13208">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
