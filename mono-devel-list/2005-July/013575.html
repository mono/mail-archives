<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Generics - Class Constraint
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Generics%20-%20Class%20Constraint&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013571.html">
   <LINK REL="Next"  HREF="013580.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Generics - Class Constraint</H1>
    <B>Stephen Quattlebaum</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Generics%20-%20Class%20Constraint&In-Reply-To="
       TITLE="[Mono-devel-list] Generics - Class Constraint">stephen at covidimus.net
       </A><BR>
    <I>Sat Jul 30 00:47:00 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013571.html">[Mono-devel-list] Re: [Mono-docs-list] [PATCH] Monodoc Gecko	support improved
</A></li>
        <LI>Next message: <A HREF="013580.html">[Mono-devel-list] Generics - Class Constraint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13575">[ date ]</a>
              <a href="thread.html#13575">[ thread ]</a>
              <a href="subject.html#13575">[ subject ]</a>
              <a href="author.html#13575">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Trying to compile some C# code that uses generics on mono in Linux (gentoo).
I ran across the following problem (which is probably just unimplemented
functionality).

 

       public static T QueryInterface&lt;T&gt;(object val)

            where T : class

        {

            if (val == null)

                return null;

 

            // First, see if the given object can be directly cast

            // to the requested type.  This will be a common case,

            // especially when checking for standard behavior interface

            // implementations (like IXrcDataElement).

            T tval = val as T;

            if (tval != null)

                return tval;

 

            . more .

        }

 

The error:

 

Xircle.Core/src/Core/XrcConvert.cs(118) error CS0077: The as operator should
be used with a reference type only (T is a value type)

 

Line #118 is the line that reads &quot;T tval = val as T&quot;.  Looks like gmcs isn't
honoring the 'class' constraint (where T:class).  I found this bug in
bugzilla, which seems related:

 

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=75368">http://bugzilla.ximian.com/show_bug.cgi?id=75368</A>

 

The question:  Is that bug the same problem?  If so, I'll try compiling from
SVN again (got strange errors last time I tried), since the bug is marked
resolved.  If not, is there an ETA on when GMCS will honor 'class'
constraints?

 

The gmcs I'm using is from the bitrock installer of mono 1.1.8.3.

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050729/c4f263db/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050729/c4f263db/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013571.html">[Mono-devel-list] Re: [Mono-docs-list] [PATCH] Monodoc Gecko	support improved
</A></li>
	<LI>Next message: <A HREF="013580.html">[Mono-devel-list] Generics - Class Constraint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13575">[ date ]</a>
              <a href="thread.html#13575">[ thread ]</a>
              <a href="subject.html#13575">[ subject ]</a>
              <a href="author.html#13575">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
