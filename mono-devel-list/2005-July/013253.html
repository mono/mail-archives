<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] Fix &quot;neutral&quot; sorting in DataView
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Fix%20%22neutral%22%20sorting%20in%20DataView&In-Reply-To=200507201627.43729.haisenko%40webport.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013249.html">
   <LINK REL="Next"  HREF="013255.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] Fix &quot;neutral&quot; sorting in DataView</H1>
    <B>Boris Kirzner</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Fix%20%22neutral%22%20sorting%20in%20DataView&In-Reply-To=200507201627.43729.haisenko%40webport.de"
       TITLE="[Mono-devel-list] [PATCH] Fix &quot;neutral&quot; sorting in DataView">borisk at mainsoft.com
       </A><BR>
    <I>Wed Jul 20 11:57:01 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013249.html">[Mono-devel-list] [PATCH] Fix &quot;neutral&quot; sorting in DataView
</A></li>
        <LI>Next message: <A HREF="013255.html">[Mono-devel-list] [PATCH] Fix &quot;neutral&quot; sorting in DataView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13253">[ date ]</a>
              <a href="thread.html#13253">[ thread ]</a>
              <a href="subject.html#13253">[ subject ]</a>
              <a href="author.html#13253">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Marc,

I think your patch is fixing the symptom, not the problem.
If you want to fix the problem, you probably should change DataView code 
so it always uses Sort property instead of sort private member (except 
the places this can not be done), and change the Sort get : it should 
return String.Empty if useDefaultSort is true and sort otherwise.

And it would be really gentle if you'll supply a test case for your fix.


Boris

Marc Haisenko wrote:

&gt;<i>Hi folks,
</I>&gt;<i>this simple patch fixes resetting the sorting to default sorting in a 
</I>&gt;<i>DataView. If you set the Sort property to some string and later pass it null, 
</I>&gt;<i>it should revert to &quot;no sorting&quot;. But unfortunately the old sort string is 
</I>&gt;<i>still saved and passed to the DataTable. The attached patch fixes this.
</I>&gt;<i>C'ya,
</I>&gt;<i>	Marc
</I>&gt;<i>
</I>&gt;<i>PS: Please don't forget my &quot;Fix parsing of sort strings in DataTable&quot; patch 
</I>&gt;<i>from Monday ;-)
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;<i>------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>Index: class/System.Data/System.Data/DataView.cs
</I>&gt;<i>===================================================================
</I>&gt;<i>--- class/System.Data/System.Data/DataView.cs	(revision 47468)
</I>&gt;<i>+++ class/System.Data/System.Data/DataView.cs	(working copy)
</I>&gt;<i>@@ -270,6 +270,7 @@
</I>&gt;<i> 				if (value == null) {	
</I>&gt;<i> 				/* if given value is null useDefaultSort */
</I>&gt;<i> 					useDefaultSort = true;
</I>&gt;<i>+					sort = &quot;&quot;;
</I>&gt;<i> 					/* if ApplyDefault sort is true try appling it */
</I>&gt;<i> 					if (ApplyDefaultSort == true)
</I>&gt;<i> 						PopulateDefaultSort ();
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;<i>------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mono-devel-list mailing list
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>  
</I>&gt;<i>
</I>
-- 
Boris Kirzner
Mono R&amp;D team, Mainsoft Corporation.
Blogging at <A HREF="http://boriskirzner.blogspot.com/">http://boriskirzner.blogspot.com/</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013249.html">[Mono-devel-list] [PATCH] Fix &quot;neutral&quot; sorting in DataView
</A></li>
	<LI>Next message: <A HREF="013255.html">[Mono-devel-list] [PATCH] Fix &quot;neutral&quot; sorting in DataView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13253">[ date ]</a>
              <a href="thread.html#13253">[ thread ]</a>
              <a href="subject.html#13253">[ subject ]</a>
              <a href="author.html#13253">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
