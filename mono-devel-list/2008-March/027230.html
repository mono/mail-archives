<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev]  Further improvements to toString performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Further%20improvements%20to%20toString%20performance&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027228.html">
   <LINK REL="Next"  HREF="027231.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev]  Further improvements to toString performance</H1>
    <B>Eyal Alaluf</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Further%20improvements%20to%20toString%20performance&In-Reply-To="
       TITLE="[Mono-dev]  Further improvements to toString performance">eyala at mainsoft.com
       </A><BR>
    <I>Thu Mar 20 05:46:18 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027228.html">[Mono-dev] Mono under Wine/Crossover Office
</A></li>
        <LI>Next message: <A HREF="027231.html">[Mono-dev] Further improvements to toString performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27230">[ date ]</a>
              <a href="thread.html#27230">[ thread ]</a>
              <a href="subject.html#27230">[ subject ]</a>
              <a href="author.html#27230">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, all.

The attached patch contains further improvements to the perf or ToString
of primitive types.
The perf gain is due to two changes
  1. An instance of NumberFormatter is placed as a member of the Thread
class. This allows reuse of the character array within the NumberFormat
class and to cache the lookup of the NumberFormatInfo from the current
culture which turns out to be a costly operation.
  2. The default ToString of integers has been specialized (because of
its simplicity).
The results of these improvements are:
  10,000,000 * 12345.ToString():    From 13.0 Secs to 6.3 Secs
  10,000,000 * 12345.ToString(&quot;G&quot;): From 14.7 Secs to 8.4 Secs
  10,000,000 * 0.12345.ToString():  From 27.9 Secs to 21.3 Secs
The results were made on my (a bit outdated) PC but the same
improvements were seen in newer types of machines.
I have also added the copyright and license notice.
Your comments are welcome.

Thanks, Eyal.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ToString.diff2
Type: application/octet-stream
Size: 46044 bytes
Desc: ToString.diff2
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080320/6d130180/attachment-0001.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080320/6d130180/attachment-0001.obj</A> 
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027228.html">[Mono-dev] Mono under Wine/Crossover Office
</A></li>
	<LI>Next message: <A HREF="027231.html">[Mono-dev] Further improvements to toString performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27230">[ date ]</a>
              <a href="thread.html#27230">[ thread ]</a>
              <a href="subject.html#27230">[ subject ]</a>
              <a href="author.html#27230">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
