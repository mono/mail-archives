<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] [Windows] Define version macros for Windows SDK
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20%5BWindows%5D%20Define%20version%20macros%20for%20Windows%20SDK&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027135.html">
   <LINK REL="Next"  HREF="027137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] [Windows] Define version macros for Windows SDK</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20%5BWindows%5D%20Define%20version%20macros%20for%20Windows%20SDK&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] [Windows] Define version macros for Windows SDK">kornelpal at gmail.com
       </A><BR>
    <I>Mon Mar 10 09:25:50 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027135.html">[Mono-dev] RoleManagerModule NRE
</A></li>
        <LI>Next message: <A HREF="027137.html">[Mono-dev] [PATCH] [Windows] Define version macros for Windows	SDK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27136">[ date ]</a>
              <a href="thread.html#27136">[ thread ]</a>
              <a href="subject.html#27136">[ subject ]</a>
              <a href="author.html#27136">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

This patch defines macros for Windows SDK in CFLAGS and CPPFLAGS. I used 
this because this is inherited by libgc.

Also defines UNICODE to ensure that Unicode (W) version of the functions are 
used. For some reason I was unable to find out Mono already uses Unicode 
versions of Windows API functions but libgc used ANSI (A) versions altough 
it's code is prepared for Unicode.

I removed Windows version macros from individual source files. This helps to 
maintain the entire source. Also note that if the currently specified 
version macros should be modified for later versions will most likely cause 
Mono not to run on Windows 2000. So this ensures compatibility with Windows 
2000 as well.

I also modified winconfig.h to define Windows version based on target 
platform and adjusted HAVE_GETPROCESSID and SIZEOF_VOID_P according to the 
target platform. Also udpated VERSION to &quot;1.9&quot;.

Please review and approve the patch.

Korn&#233;l 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: WindowsDefines.diff.txt
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080310/4de55086/attachment.txt">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080310/4de55086/attachment.txt</A> 
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027135.html">[Mono-dev] RoleManagerModule NRE
</A></li>
	<LI>Next message: <A HREF="027137.html">[Mono-dev] [PATCH] [Windows] Define version macros for Windows	SDK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27136">[ date ]</a>
              <a href="thread.html#27136">[ thread ]</a>
              <a href="subject.html#27136">[ subject ]</a>
              <a href="author.html#27136">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
