<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Random &quot;Internal Compiler Error&quot; with extension methods	on interfaces?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Random%20%22Internal%20Compiler%20Error%22%20with%20extension%20methods%0A%09on%20interfaces%3F&In-Reply-To=%3CCAK9xD%3Dd_DKpPgRJo0v4%3DbVKh%2B6VLZrALzvOk%2BdiYijUdQn%2BLeA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040163.html">
   <LINK REL="Next"  HREF="040109.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Random &quot;Internal Compiler Error&quot; with extension methods	on interfaces?</H1>
    <B>Jordan Earls</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Random%20%22Internal%20Compiler%20Error%22%20with%20extension%20methods%0A%09on%20interfaces%3F&In-Reply-To=%3CCAK9xD%3Dd_DKpPgRJo0v4%3DbVKh%2B6VLZrALzvOk%2BdiYijUdQn%2BLeA%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Random &quot;Internal Compiler Error&quot; with extension methods	on interfaces?">earlz at lastyearswishes.com
       </A><BR>
    <I>Sun Feb  3 02:37:57 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040163.html">[Mono-dev] Bug in mono 3.0.1 MVC3 File/FileResult
</A></li>
        <LI>Next message: <A HREF="040109.html">[Mono-dev] Random &quot;Internal Compiler Error&quot; with extension	methods on interfaces?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40108">[ date ]</a>
              <a href="thread.html#40108">[ thread ]</a>
              <a href="subject.html#40108">[ subject ]</a>
              <a href="author.html#40108">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, I've been messing with extension methods some in my open source
project. I stumbled across an internal compiler error. The full
message is this:

/home/earlz/Projects/barelymvc/BarelyMVC.Tests/Caching/CacheTest.cs(15,57):
error CS0584: Internal compiler error: Array index is out of range.
/home/earlz/Projects/barelymvc/BarelyMVC.Tests/Caching/CacheTest.cs(15,40):
error CS1928: Type `Earlz.BarelyMVC.Caching.ICacheMechanism' does not
contain a member `Setup' and the best extension method overload
`Earlz.BarelyMVC.Caching.CacheExtensions.Setup(this
Earlz.BarelyMVC.Caching.ICacheMechanism, string,
Earlz.BarelyMVC.Caching.CacheInfo)' has some invalid arguments
/home/earlz/Projects/barelymvc/BarelyMVC/bin/Debug/BarelyMVC.dll
(Location of the symbol related to previous error)

The error line looks like this:

			static TestCache()
			{
				Cacher.Setup(&quot;Testfoo&quot;, new CacheInfo()); //error here
			}
			public static ICacheMechanism Cacher=new MockCacheMechanism();

The implementation of Setup looks like this:

		public static void Setup(this ICacheMechanism cacher, string name,
CacheInfo info)
		{
			cacher.KeyInfo.Add(name, info);
		}

Obviously, this shouldn't cause a compiler error. I've tried to
reproduce it in a small test case, but I couldn't. My project is open
source though, so I could give a full solution file and point to where
the error happens

This happens on Arch linux x86-64. All packages are up to date and
`mono --version`:

[<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">earlz at EarlzAlpha</A> ~]$ mono --version
Mono JIT compiler version 2.10.8 (tarball Sat Oct  6 23:22:30 UTC 2012)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors.
www.mono-project.com
        TLS:           __thread
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  amd64
        Disabled:      none
        Misc:          softdebug
        LLVM:          supported, not enabled.
        GC:            Included Boehm (with typed GC and Parallel Mark)

I've tried compiling the git version of mono in the past but it's a
bit more... challenging than I expected, so I'm not sure I'll be able
to repro this with latest.

What should I do? Report a bug with a huge repro?

If anyone wants to see the bug in action, extract
<A HREF="http://earlz.net/static/repro.tgz">http://earlz.net/static/repro.tgz</A>
Then, open the solution file in Monodevelop and try to compile the
BarelyMVC.Tests project. You should get the error on line 15 of
CacheTest.cs (please disregard the terrible code quality, it was a bit
of an experiment :) )

Thanks,
Jordan
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040163.html">[Mono-dev] Bug in mono 3.0.1 MVC3 File/FileResult
</A></li>
	<LI>Next message: <A HREF="040109.html">[Mono-dev] Random &quot;Internal Compiler Error&quot; with extension	methods on interfaces?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40108">[ date ]</a>
              <a href="thread.html#40108">[ thread ]</a>
              <a href="subject.html#40108">[ subject ]</a>
              <a href="author.html#40108">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
