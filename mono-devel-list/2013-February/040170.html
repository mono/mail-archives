<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Entity Framework - new issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Entity%20Framework%20-%20new%20issues&In-Reply-To=%3C511ABBF1.1030208%40veritas-vos-liberabit.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040169.html">
   <LINK REL="Next"  HREF="040172.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Entity Framework - new issues</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Entity%20Framework%20-%20new%20issues&In-Reply-To=%3C511ABBF1.1030208%40veritas-vos-liberabit.com%3E"
       TITLE="[Mono-dev] Entity Framework - new issues">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Tue Feb 12 22:02:25 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040169.html">[Mono-dev] Entity Framework - new issues
</A></li>
        <LI>Next message: <A HREF="040172.html">[Mono-dev] Entity Framework - new issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40170">[ date ]</a>
              <a href="thread.html#40170">[ thread ]</a>
              <a href="subject.html#40170">[ subject ]</a>
              <a href="author.html#40170">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>yw - it still seems like some xml schema issue, namely PSVI handling in 
XmlSchemaValidatingReader (ok, less than 0.1% of people understand it).

In case you don't mind patching EF, here is mine that goes beyond that 
issue.

Atsushi Eno

&#1054;&#1083;&#1077;&#1075; wrote:
&gt;<i> Many thanks to Atsushi Eno for a solution for previous defect in 
</I>&gt;<i> System.Xml.
</I>&gt;<i>
</I>&gt;<i> But there are new issues with EF. I tried to create simplest console 
</I>&gt;<i> application (file Test.zip attached to this letter, contains 
</I>&gt;<i> MonoDevelop project), it fails with following exception:
</I>&gt;<i>
</I>&gt;<i> System.ArgumentException: An element with the same key already exists 
</I>&gt;<i> in the dictionary.
</I>&gt;<i>   at 
</I>&gt;<i> System.Collections.Generic.Dictionary`2[System.String,System.Object].Add 
</I>&gt;<i> (System.String key, System.Object value) [0x0007e] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/mcs/class/corlib/System.Collections.Generic/Dictionary.cs:423
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.TypeUsageBuilder.HandleNullableAttribute 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x00015] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/TypeUsageBuilder.cs:605
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.TypeUsageBuilder.InternalHandleAttribute 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x00010] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/TypeUsageBuilder.cs:300
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.TypeUsageBuilder.HandleAttribute 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x00000] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/TypeUsageBuilder.cs:291
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.StructuredProperty.HandleAttribute 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x00040] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/StructuredProperty.cs:227
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaElement.ParseAttribute 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x0006a] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/SchemaElement.cs:592
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaElement.Parse 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x0001d] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/SchemaElement.cs:193
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.StructuredType.HandlePropertyElement 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x00007] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/StructuredType.cs:387
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.StructuredType.HandleElement 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x0001f] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/StructuredType.cs:267
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaEntityType.HandleElement 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x00000] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/ItemType.cs:198
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaElement.ParseElement 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x0002c] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/SchemaElement.cs:746
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaElement.Parse 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x000d0] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/SchemaElement.cs:220
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.HandleEntityTypeElement 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x00007] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/Schema.cs:1023
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.HandleElement 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x0001f] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/Schema.cs:592
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaElement.ParseElement 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x0002c] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/SchemaElement.cs:746
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaElement.Parse 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x000d0] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/SchemaElement.cs:220
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.HandleTopLevelSchemaElement 
</I>&gt;<i> (System.Xml.XmlReader reader) [0x0000e] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/Schema.cs:1005
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.InternalParse 
</I>&gt;<i> (System.Xml.XmlReader sourceReader, System.String sourceLocation) 
</I>&gt;<i> [0x0021e] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/Schema.cs:210
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.Parse 
</I>&gt;<i> (System.Xml.XmlReader sourceReader, System.String sourceLocation) 
</I>&gt;<i> [0x0000f] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/Schema.cs:100
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaManager.ParseAndValidate 
</I>&gt;<i> (IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths, 
</I>&gt;<i> SchemaDataModelOption dataModel, 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.AttributeValueNotification 
</I>&gt;<i> providerNotification, 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.AttributeValueNotification 
</I>&gt;<i> providerManifestTokenNotification, 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.ProviderManifestNeeded 
</I>&gt;<i> providerManifestNeeded, IList`1&amp; schemaCollection) [0x0008a] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/SchemaManager.cs:152
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaManager.ParseAndValidate 
</I>&gt;<i> (IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths, 
</I>&gt;<i> SchemaDataModelOption dataModel, 
</I>&gt;<i> System.Data.Entity.Core.Common.DbProviderManifest providerManifest, 
</I>&gt;<i> IList`1&amp; schemaCollection) [0x0000d] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityModel/SchemaObjectModel/SchemaManager.cs:102
</I>&gt;<i>   at System.Data.Entity.Core.Metadata.Edm.EdmItemCollection.LoadItems 
</I>&gt;<i> (IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths, 
</I>&gt;<i> SchemaDataModelOption dataModelOption, 
</I>&gt;<i> System.Data.Entity.Core.Common.DbProviderManifest providerManifest, 
</I>&gt;<i> System.Data.Entity.Core.Metadata.Edm.ItemCollection itemCollection, 
</I>&gt;<i> Boolean throwOnError) [0x00002] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Metadata/EdmItemCollection.cs:245
</I>&gt;<i>   at System.Data.Entity.Core.Metadata.Edm.EdmItemCollection.Init 
</I>&gt;<i> (IEnumerable`1 xmlReaders, IEnumerable`1 filePaths, Boolean 
</I>&gt;<i> throwOnError) [0x00006] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Metadata/EdmItemCollection.cs:126
</I>&gt;<i>   at System.Data.Entity.Core.Metadata.Edm.EdmItemCollection..ctor 
</I>&gt;<i> (IEnumerable`1 xmlReaders, IEnumerable`1 filePaths, Boolean 
</I>&gt;<i> skipInitialization) [0x00023] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Metadata/EdmItemCollection.cs:41
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.Metadata.Edm.MetadataCache+EdmMetadataEntry.LoadEdmItemCollection 
</I>&gt;<i> (System.Data.Entity.Core.Metadata.Edm.MetadataArtifactLoader loader) 
</I>&gt;<i> [0x00008] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Metadata/MetadataCache.cs:653
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.Metadata.Edm.MetadataCache+EdmItemCollectionLoader.LoadItemCollection 
</I>&gt;<i> (System.Data.Entity.Core.Metadata.Edm.EdmMetadataEntry entry) 
</I>&gt;<i> [0x00000] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Metadata/MetadataCache.cs:834
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.Metadata.Edm.MetadataCache.LoadItemCollection[EdmMetadataEntry] 
</I>&gt;<i> (IItemCollectionLoader`1 itemCollectionLoader, 
</I>&gt;<i> System.Data.Entity.Core.Metadata.Edm.EdmMetadataEntry entry) [0x00037] 
</I>&gt;<i> in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Metadata/MetadataCache.cs:367
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.Metadata.Edm.MetadataCache.GetOrCreateEdmItemCollection 
</I>&gt;<i> (System.String cacheKey, 
</I>&gt;<i> System.Data.Entity.Core.Metadata.Edm.MetadataArtifactLoader loader, 
</I>&gt;<i> System.Object&amp; entryToken) [0x00020] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Metadata/MetadataCache.cs:273
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityClient.EntityConnection.LoadEdmItemCollection 
</I>&gt;<i> (System.Data.Entity.Core.Metadata.Edm.MetadataWorkspace workspace, 
</I>&gt;<i> System.Data.Entity.Core.Metadata.Edm.MetadataArtifactLoader 
</I>&gt;<i> artifactLoader) [0x0000f] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityClient/EntityConnection.cs:1053
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.EntityClient.EntityConnection.GetMetadataWorkspace 
</I>&gt;<i> (Boolean initializeAllCollections) [0x000b6] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/EntityClient/EntityConnection.cs:467
</I>&gt;<i>   at 
</I>&gt;<i> System.Data.Entity.Core.Objects.ObjectContext.RetrieveMetadataWorkspaceFromConnection 
</I>&gt;<i> () [0x00017] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Objects/ObjectContext.cs:1839
</I>&gt;<i>   at System.Data.Entity.Core.Objects.ObjectContext..ctor 
</I>&gt;<i> (System.Data.Entity.Core.EntityClient.EntityConnection connection, 
</I>&gt;<i> Boolean isConnectionConstructor, 
</I>&gt;<i> System.Data.Entity.Core.Objects.Internal.ObjectQueryExecutionPlanFactory 
</I>&gt;<i> objectQueryExecutionPlanFactory, 
</I>&gt;<i> System.Data.Entity.Core.Common.Internal.Materialization.Translator 
</I>&gt;<i> translator) [0x000bc] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Objects/ObjectContext.cs:192
</I>&gt;<i>   at System.Data.Entity.Core.Objects.ObjectContext..ctor 
</I>&gt;<i> (System.String connectionString) [0x00000] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Objects/ObjectContext.cs:114
</I>&gt;<i>   at System.Data.Entity.Core.Objects.ObjectContext..ctor 
</I>&gt;<i> (System.String connectionString, System.String defaultContainerName) 
</I>&gt;<i> [0x00000] in 
</I>&gt;<i> /usr/ports/lang/mono/work/mono-3.0.3/external/entityframework/src/EntityFramework/Core/Objects/ObjectContext.cs:134
</I>&gt;<i>   at TestModel.TestEntities..ctor () [0x00000] in 
</I>&gt;<i> /home/Test/Test/TestModel.Designer.cs:46
</I>&gt;<i>   at Test.Program.Main (System.String[] args) [0x00001] in 
</I>&gt;<i> /home/Test/Test/Program.cs:11
</I>&gt;<i>
</I>&gt;<i> Honestly, I'm going to investigate and probably rewrite my code to 
</I>&gt;<i> NHibernate, but if this sample project will be useful for someone who 
</I>&gt;<i> will try to make support of Entity Framework on Mono better, I would 
</I>&gt;<i> be glad to know it.
</I>&gt;<i>
</I>&gt;<i> With best regards,
</I>&gt;<i> Oleg
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ef-workaround.patch
Type: text/x-patch
Size: 2705 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130213/8fd6b612/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130213/8fd6b612/attachment.bin</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040169.html">[Mono-dev] Entity Framework - new issues
</A></li>
	<LI>Next message: <A HREF="040172.html">[Mono-dev] Entity Framework - new issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40170">[ date ]</a>
              <a href="thread.html#40170">[ thread ]</a>
              <a href="subject.html#40170">[ subject ]</a>
              <a href="author.html#40170">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
