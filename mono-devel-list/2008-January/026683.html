<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Aditional visibility checks for mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Aditional%20visibility%20checks%20for%20mono&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026678.html">
   <LINK REL="Next"  HREF="026688.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Aditional visibility checks for mono</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Aditional%20visibility%20checks%20for%20mono&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] Aditional visibility checks for mono">kumpera at gmail.com
       </A><BR>
    <I>Fri Jan 18 16:34:26 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026678.html">[Mono-dev] ANN: NUnitResults 1.0 Released
</A></li>
        <LI>Next message: <A HREF="026688.html">[Mono-dev] mod_mono and xsp patches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26683">[ date ]</a>
              <a href="thread.html#26683">[ thread ]</a>
              <a href="subject.html#26683">[ subject ]</a>
              <a href="author.html#26683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

The attached patch implements two missing visibility checks under mono. The
first is to fully check the visibility of the type. The second one is proper
family visibility checks, that require access to the static type of the
'this' parameter on stack. The current patch passes a full bootstrap.

Curently all tests are under the verifier suite, once the patch is approved,
I'll extract regression tests to put under mono/tests.

There is one issue with this patch thou. In some cases it's not possible to
perform the full family visibility checks. It happens when one constructor
is inlined inside another constructor and, for some reason I still don't
know, sometimes the type of the 'this' argument ends been System.Object. I
need some help on this subject as I'm trying to debug this for two days now.
It shows when compiling System.dll, for example. It was quite hard to track
this bug because all it does is to make some methods not inlinable.

Thanks,
Rodrigo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080118/3524e173/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080118/3524e173/attachment.html</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: visibility_patch.diff
Type: text/x-patch
Size: 13398 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080118/3524e173/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080118/3524e173/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026678.html">[Mono-dev] ANN: NUnitResults 1.0 Released
</A></li>
	<LI>Next message: <A HREF="026688.html">[Mono-dev] mod_mono and xsp patches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26683">[ date ]</a>
              <a href="thread.html#26683">[ thread ]</a>
              <a href="subject.html#26683">[ subject ]</a>
              <a href="author.html#26683">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
