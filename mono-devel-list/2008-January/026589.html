<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Program Option Parsing Library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Program%20Option%20Parsing%20Library&In-Reply-To=1199999407.8432.260.camel%40lina.magi.jprl.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026587.html">
   <LINK REL="Next"  HREF="026597.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Program Option Parsing Library</H1>
    <B>Jay Logue</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Program%20Option%20Parsing%20Library&In-Reply-To=1199999407.8432.260.camel%40lina.magi.jprl.com"
       TITLE="[Mono-dev] Program Option Parsing Library">jay-MonoDev at toaster.com
       </A><BR>
    <I>Thu Jan 10 17:39:24 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026587.html">[Mono-dev] Program Option Parsing Library
</A></li>
        <LI>Next message: <A HREF="026597.html">[Mono-dev] Program Option Parsing Library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26589">[ date ]</a>
              <a href="thread.html#26589">[ thread ]</a>
              <a href="subject.html#26589">[ subject ]</a>
              <a href="author.html#26589">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jonathan Pryor wrote:
&gt;<i> I don't see how an out parameter would be better than a return value,
</I>&gt;<i> especially considering that every other .Parse() method in the framework
</I>&gt;<i> actually returns a value.
</I>&gt;<i>   
</I>This is probably well into the realm of personal preference, but my 
reasoning goes like this: The primary purpose of Parse() is not to 
produce a list of the extra, non-option arguments on the command line.  
Rather it is to parse the option arguments and invoke their associated 
actions.  Thus, the non-option arguments are kind of a remainder of the 
function, rather than its result.  Using an out parameter, IMO, make 
this clearer.

This approach also allows for an overload that doesn't take an output 
array, the implication being that an exception will be thrown if any 
non-option arguments are present.
&gt;<i> However, a `bool TryParse(string[] args, out string[] result)' might be
</I>&gt;<i> useful if the use of exceptions is undesirable.  (However, w/o
</I>&gt;<i> exceptions how would the user know what the problem was?)  I'm less sure
</I>&gt;<i> about this idea.
</I>&gt;<i>   
</I>I don't like this idea personally.  You don't gain much by not throwing 
an exception (argument parsing is probably not a performance-sensitive 
operation) and
you want to make the error handling very straightforward and boilerplate 
(so people are likely to get it right).   To that end, if you do end up 
adding a special exception type, I would have the Exception.Message 
value be exactly what should appear on stderr.  E.g.:

        int verbose = 0;
        Options p = new Options () {
            { &quot;v&quot;, v =&gt; ++verbose },
            { &quot;h|?|help&quot;, v =&gt; ShowHelp () }
        };

        try {
            p.Parse(args);
        }
        catch (OptionException ex) {
            *Console.Error.WriteLine(&quot;foo: {0}&quot;, ex.Message);*
            Console.Error.WriteLine(&quot;Try 'foo --help' for more 
information&quot;);
            return 1;
        }
&gt;<i> Thank you for the suggestions.
</I>Thank you for writing this.  I will definitely be using it.

-- Jay

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080110/cf9a042f/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080110/cf9a042f/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026587.html">[Mono-dev] Program Option Parsing Library
</A></li>
	<LI>Next message: <A HREF="026597.html">[Mono-dev] Program Option Parsing Library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26589">[ date ]</a>
              <a href="thread.html#26589">[ thread ]</a>
              <a href="subject.html#26589">[ subject ]</a>
              <a href="author.html#26589">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
