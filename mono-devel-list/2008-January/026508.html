<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [Fwd: [Mono-patches] r92329	-trunk/mcs/class/System.Web/System.Web.Util]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BFwd%3A%20%5BMono-patches%5D%20r92329%0A%09-trunk/mcs/class/System.Web/System.Web.Util%5D&In-Reply-To=4781F447.6090805%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026507.html">
   <LINK REL="Next"  HREF="026511.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [Fwd: [Mono-patches] r92329	-trunk/mcs/class/System.Web/System.Web.Util]</H1>
    <B>Konstantin Triger</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BFwd%3A%20%5BMono-patches%5D%20r92329%0A%09-trunk/mcs/class/System.Web/System.Web.Util%5D&In-Reply-To=4781F447.6090805%40ximian.com"
       TITLE="[Mono-dev] [Fwd: [Mono-patches] r92329	-trunk/mcs/class/System.Web/System.Web.Util]">kostat at mainsoft.com
       </A><BR>
    <I>Mon Jan  7 04:56:48 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026507.html">[Mono-dev] [Fwd: [Mono-patches] r92329	-trunk/mcs/class/System.Web/System.Web.Util]
</A></li>
        <LI>Next message: <A HREF="026511.html">[Mono-dev] Method not found:	'System.Diagnostics.Process.get_SessionId'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26508">[ date ]</a>
              <a href="thread.html#26508">[ thread ]</a>
              <a href="subject.html#26508">[ subject ]</a>
              <a href="author.html#26508">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Eno,

Well, this is the area where I don't have enough knowledge to make a decision and prefer 'not to touch' (by leaving the decision to owners). If you are positive that RuntimeEnvironment.SystemConfigurationFile will be correct there for mono too, please commit.

Regards,
Konstantin Triger

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Atsushi Eno [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at ximian.com</A>]
</I>&gt;<i> Sent: Monday, January 07, 2008 11:44 AM
</I>&gt;<i> To: Konstantin Triger
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-dev] [Fwd: [Mono-patches] r92329 -
</I>&gt;<i> trunk/mcs/class/System.Web/System.Web.Util]
</I>&gt;<i> 
</I>&gt;<i> Hey Kosta,
</I>&gt;<i> 
</I>&gt;<i> Well, I should have exactly indicated what I saw problematic.
</I>&gt;<i> It is not about why you guys introduced TARGET_DOTNET (I guessed it
</I>&gt;<i> is for such necessary case to differentiate .NET and mono runtimes),
</I>&gt;<i> but about why you guys needed to avoid
</I>&gt;<i> RuntimeEnvironment.SystemConfigurationFile in mono (!TARGET_DOTNET).
</I>&gt;<i> 
</I>&gt;<i> I agree that you'd need TARGET_DOTNET while am glad to hear that it
</I>&gt;<i> does not happen much.
</I>&gt;<i> 
</I>&gt;<i> Atsushi Eno
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Konstantin Triger wrote:
</I>&gt;<i> &gt; Hey Eno,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I did not completely understand your comment, but let me explain the
</I>&gt;<i> background, so you will understand what Igor meant by this patch.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Usually we develop Web-related stuff in MS.Net environment, we take
</I>&gt;<i> XSP, Sys.Web from mono trunk and all the rest from MS and run 'usual'
</I>&gt;<i> console application. This perfectly works until there is something
</I>&gt;<i> incorrect from MS.Net point of view. Fortunately this does not happen
</I>&gt;<i> much, but when it does, we used TARGET_NET ifdef to differentiate.
</I>&gt;<i> Thus, under TARGET_NET ifdef we put not always production ready, but
</I>&gt;<i> MS.Net-correct code for development purposes only.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can you please explain your point, what would you propose to put in
</I>&gt;<i> ICalls.cs? If you see an option to combine paths, so the code will be
</I>&gt;<i> common for mono.Net and MS.Net it would be great.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; Konstantin Triger
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt; From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A> [mailto:mono-devel-
</I>&gt;<i> list-
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bounces at lists.ximian.com</A>] On Behalf Of Atsushi Eno
</I>&gt;<i> &gt;&gt; Sent: Monday, January 07, 2008 9:15 AM
</I>&gt;<i> &gt;&gt; To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt; Subject: [Mono-dev] [Fwd: [Mono-patches] r92329 -
</I>&gt;<i> &gt;&gt; trunk/mcs/class/System.Web/System.Web.Util]
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Is there any reason to differentiate runtime environment shown like
</I>&gt;<i> &gt;&gt; this patch? I don't think we like such approach very much,
</I>&gt;<i> especially
</I>&gt;<i> &gt;&gt; since our implementation of
</I>&gt;<i> RuntimeEnvironment.SystemConfigurationFile
</I>&gt;<i> &gt;&gt; is implemented as:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; --------
</I>&gt;<i> &gt;&gt; public static string SystemConfigurationFile {
</I>&gt;<i> &gt;&gt; 	get {
</I>&gt;<i> &gt;&gt; 		// GetMachineConfigPath is internal and not protected by
</I>&gt;<i> &gt;&gt; CAS
</I>&gt;<i> &gt;&gt; 		string path = Environment.GetMachineConfigPath ();
</I>&gt;<i> &gt;&gt; 		if (SecurityManager.SecurityEnabled) {
</I>&gt;<i> &gt;&gt; 			new FileIOPermission
</I>&gt;<i> &gt;&gt; (FileIOPermissionAccess.PathDiscovery,
</I>&gt;<i> &gt;&gt; path).Demand ();
</I>&gt;<i> &gt;&gt; 		}
</I>&gt;<i> &gt;&gt; 		return path;
</I>&gt;<i> &gt;&gt; 	}
</I>&gt;<i> &gt;&gt; }
</I>&gt;<i> &gt;&gt; --------
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; To me it looks that it just tries to skip security assertion.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Atsushi Eno
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; -------- Original Message --------
</I>&gt;<i> &gt;&gt; Subject: [Mono-patches] r92329 -
</I>&gt;<i> &gt;&gt; trunk/mcs/class/System.Web/System.Web.Util
</I>&gt;<i> &gt;&gt; Date: Sun,  6 Jan 2008 03:14:55 -0500 (EST)
</I>&gt;<i> &gt;&gt; From: Igor Zalmanovich (<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">igorz at mainsoft.com</A>)
</I>&gt;<i> &gt;&gt; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-patches-list at lists.ximian.com</A>&gt;
</I>&gt;<i> &gt;&gt; To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-patches at lists.ximian.com</A>, <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ximian.monolist at gmail.com</A>,
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-svn-patches-garchive-20758 at googlegroups.com</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Author: igorz
</I>&gt;<i> &gt;&gt; Date: 2008-01-06 03:14:55 -0500 (Sun, 06 Jan 2008)
</I>&gt;<i> &gt;&gt; New Revision: 92329
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Modified:
</I>&gt;<i> &gt;&gt;     trunk/mcs/class/System.Web/System.Web.Util/ICalls.cs
</I>&gt;<i> &gt;&gt; Log:
</I>&gt;<i> &gt;&gt; added #if TARGET_DOTNET
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Modified: trunk/mcs/class/System.Web/System.Web.Util/ICalls.cs
</I>&gt;<i> &gt;&gt; ===================================================================
</I>&gt;<i> &gt;&gt; --- trunk/mcs/class/System.Web/System.Web.Util/ICalls.cs	2008-01-06
</I>&gt;<i> &gt;&gt; 08:11:36 UTC (rev 92328)
</I>&gt;<i> &gt;&gt; +++ trunk/mcs/class/System.Web/System.Web.Util/ICalls.cs	2008-01-06
</I>&gt;<i> &gt;&gt; 08:14:55 UTC (rev 92329)
</I>&gt;<i> &gt;&gt; @@ -35,8 +35,14 @@
</I>&gt;<i> &gt;&gt;   	{
</I>&gt;<i> &gt;&gt;   		private ICalls () {}
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; +#if TARGET_DOTNET
</I>&gt;<i> &gt;&gt; +		static public string GetMachineConfigPath () {
</I>&gt;<i> &gt;&gt; +			return
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> System.Runtime.InteropServices.RuntimeEnvironment.SystemConfigurationFi
</I>&gt;<i> &gt;&gt; le;
</I>&gt;<i> &gt;&gt; +		}
</I>&gt;<i> &gt;&gt; +#else
</I>&gt;<i> &gt;&gt;   		[MethodImplAttribute(MethodImplOptions.InternalCall)]
</I>&gt;<i> &gt;&gt;   		extern static public string GetMachineConfigPath ();
</I>&gt;<i> &gt;&gt; +#endif
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;   		[MethodImplAttribute(MethodImplOptions.InternalCall)]
</I>&gt;<i> &gt;&gt;   		extern static public string GetMachineInstallDirectory ();
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Mono-patches maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-patches at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-patches">http://lists.ximian.com/mailman/listinfo/mono-patches</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Mono-devel-list mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt;
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026507.html">[Mono-dev] [Fwd: [Mono-patches] r92329	-trunk/mcs/class/System.Web/System.Web.Util]
</A></li>
	<LI>Next message: <A HREF="026511.html">[Mono-dev] Method not found:	'System.Diagnostics.Process.get_SessionId'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26508">[ date ]</a>
              <a href="thread.html#26508">[ thread ]</a>
              <a href="subject.html#26508">[ subject ]</a>
              <a href="author.html#26508">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
