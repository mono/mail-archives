<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Program Option Parsing Library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Program%20Option%20Parsing%20Library&In-Reply-To=478A6DE5.8080007%40toaster.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026632.html">
   <LINK REL="Next"  HREF="026608.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Program Option Parsing Library</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Program%20Option%20Parsing%20Library&In-Reply-To=478A6DE5.8080007%40toaster.com"
       TITLE="[Mono-dev] Program Option Parsing Library">jonpryor at vt.edu
       </A><BR>
    <I>Sun Jan 13 19:17:04 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026632.html">[Mono-dev] Program Option Parsing Library
</A></li>
        <LI>Next message: <A HREF="026608.html">[Mono-dev] Program Option Parsing Library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26638">[ date ]</a>
              <a href="thread.html#26638">[ thread ]</a>
              <a href="subject.html#26638">[ subject ]</a>
              <a href="author.html#26638">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2008-01-13 at 12:00 -0800, Jay Logue wrote:
&gt;<i> Looking good!
</I>&gt;<i> &gt; One final note: due to the above Action change, I'm using Action`2,
</I>&gt;<i> &gt; which is specific to .NET 3.5.  Localization is via Func`3, which is
</I>&gt;<i> &gt; specific to .NET 3.5.
</I>&gt;<i>
</I>&gt;<i> I guess I don't really understand why its important to use Action and 
</I>&gt;<i> Func here, verses custom types (e.g. void OptionAction&lt;T&gt;(T v, 
</I>&gt;<i> OptionContext c) ).
</I>
The combinatorial properties of intermixing delegate types.  In the
(fast approaching) functional paradigm world we're migrating to, the
fewer distinct types which represent the same concept, the better.  

(Otherwise you'll need increasing amounts of &quot;glue&quot; in order to fit two
otherwise compatible delegate instances together, when ideally they'd
either be directly callable or the compiler could work it's type
inferencing magic and write the glue code for you.  This is because you
can't simply assign one delegate instance to another delegate instance
when they share identical argument lists &amp; return types, instead you
need to use a `new' expression to convert one to the other.)

Example:

	Func&lt;string,string&gt; f = s =&gt; s;
	Converter&lt;string,string&gt; g = f; // error CS0029
	Converter&lt;string,string&gt; h = new Converter&lt;string,string&gt;(f);
	  // OK

Now try to imagine doing that within generics code.  (I don't think you
can.)

Make no mistake: there's *lots* of work going on (e.g. [0]) in bringing
ever greater amounts of functional concepts to C#, and multiple distinct
types which merely alias each other will hinder combining separately
developed pieces of code, instead of making things easier.

[0] <A HREF="http://blogs.msdn.com/wesdyer/archive/2008/01/11/the-marvels-of-monads.aspx">http://blogs.msdn.com/wesdyer/archive/2008/01/11/the-marvels-of-monads.aspx</A>

I really wish they'd added Func and the Action overloads to .NET 2.0...

&gt;<i> On a related note, could the translation delegate be simplified to 
</I>&gt;<i> Converter&lt;string, string&gt; and just used to translate the format string?
</I>
That makes a great amount of sense, actually.  Consider it done.

On a final note, Alp Toker was kind enough to offer space on ndesk.org
for hosting, so (along with a few namespace &amp; type name changes --
s/Mono.Documentation.Options/NDesk.Options.OptionSet/g) you can find
future changes at:

	<A HREF="http://git.ndesk.org/?p=ndesk-options">http://git.ndesk.org/?p=ndesk-options</A>

 - Jon



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026632.html">[Mono-dev] Program Option Parsing Library
</A></li>
	<LI>Next message: <A HREF="026608.html">[Mono-dev] Program Option Parsing Library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26638">[ date ]</a>
              <a href="thread.html#26638">[ thread ]</a>
              <a href="subject.html#26638">[ subject ]</a>
              <a href="author.html#26638">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
