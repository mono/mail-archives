<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Garbage collection for threads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Garbage%20collection%20for%20threads&In-Reply-To=1200096019.4225.33.camel%40erandi.boston.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026617.html">
   <LINK REL="Next"  HREF="026620.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Garbage collection for threads</H1>
    <B>Debajyoti Bera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Garbage%20collection%20for%20threads&In-Reply-To=1200096019.4225.33.camel%40erandi.boston.ximian.com"
       TITLE="[Mono-dev] Garbage collection for threads">dbera.web at gmail.com
       </A><BR>
    <I>Fri Jan 11 19:23:29 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026617.html">[Mono-dev] Garbage collection for threads
</A></li>
        <LI>Next message: <A HREF="026620.html">[Mono-dev] Garbage collection for threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26619">[ date ]</a>
              <a href="thread.html#26619">[ thread ]</a>
              <a href="subject.html#26619">[ subject ]</a>
              <a href="author.html#26619">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; 1)	If an application is blocked on a IO read, will the GC thread still
</I>&gt;<i> &gt; run and collect freed objects ? I thought the GC thread always runs, no
</I>&gt;<i> &gt; matter what, but it does not look like it. What is the intended behaviour
</I>&gt;<i> &gt; ? I hope the answer works for threads too i.e. if some thread is blocked,
</I>&gt;<i> &gt; will the GC clean away objects freed previously in that thread ?
</I>&gt;<i>
</I>&gt;<i> Yes, it will.
</I>
I was of the impression that mono has a separate GC thread 
which 'periodically' and on allocation pressure, goes into a collection mode. 
I was pointed out in the #monodev IRC that any thread could be the GC thread 
(which kind of implied that if some thread is blocked right after it does a 
huge allocation, those objects wont be freed) and secondly, there is no time 
based collection, but collection happens only with allocation.

If there is no time based collection, that means once extra allocations were 
made for whatever reason and shot up RSS (loosely using RSS for memory 
usage), they might still be in memory long after they are discarded and the 
RSS will still show high. This could ok for proper server apps but not for 
desktop apps where users dont mind once in a while memory usage but after the 
operation is done, they expect the memory to come down.

&gt;<i> &gt; 2) After a thread is finished and there are no references of it anywhere,
</I>&gt;<i> &gt; what is an approximate time after which the thread (and the objects
</I>&gt;<i> &gt; created in the Thread.Start method) will be freed ? 1sec/1min/10 min -
</I>&gt;<i> &gt; really I am asking if there is any way the thread could still linger in
</I>&gt;<i> &gt; the memory for a long time (long ~ 10mins or more).
</I>&gt;<i>
</I>&gt;<i> The thread object might go away, but the OS thread will continue to
</I>&gt;<i> exist.   The OS thread needs to terminate for it to be finished.
</I>
Can you elaborate a little more on that ? Just letting a thread run and die on 
its own is not enough:
  Thread thread = new Thread (new ThreadStart (Run))
  thread.Start ();
where Run() does a bunch of allocations. Do you mean I have to 
manually 'terminate' the thread after it stops running ?

- dBera

-- 
-----------------------------------------------------
Debajyoti Bera @ <A HREF="http://dtecht.blogspot.com">http://dtecht.blogspot.com</A>
beagle / KDE fan
Mandriva / Inspiron-1100 user

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026617.html">[Mono-dev] Garbage collection for threads
</A></li>
	<LI>Next message: <A HREF="026620.html">[Mono-dev] Garbage collection for threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26619">[ date ]</a>
              <a href="thread.html#26619">[ thread ]</a>
              <a href="subject.html#26619">[ subject ]</a>
              <a href="author.html#26619">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
