<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Fwd: Providing Managed Implementations for P/Invokes -	Was: [Mono-winforms-list] Caret
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Fwd%3A%20Providing%20Managed%20Implementations%20for%20P/Invokes%20-%0A%09Was%3A%20%5BMono-winforms-list%5D%20Caret&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022767.html">
   <LINK REL="Next"  HREF="022768.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Fwd: Providing Managed Implementations for P/Invokes -	Was: [Mono-winforms-list] Caret</H1>
    <B>Rafael Teixeira</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Fwd%3A%20Providing%20Managed%20Implementations%20for%20P/Invokes%20-%0A%09Was%3A%20%5BMono-winforms-list%5D%20Caret&In-Reply-To="
       TITLE="[Mono-dev] Fwd: Providing Managed Implementations for P/Invokes -	Was: [Mono-winforms-list] Caret">monoman at gmail.com
       </A><BR>
    <I>Fri Mar  9 09:33:55 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022767.html">[Mono-dev] Example of an expected execption test
</A></li>
        <LI>Next message: <A HREF="022768.html">[Mono-dev] DataGridItem.DataItem null after DataBind
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22769">[ date ]</a>
              <a href="thread.html#22769">[ thread ]</a>
              <a href="subject.html#22769">[ subject ]</a>
              <a href="author.html#22769">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Forwarding this to discuss in a broader audience.

:<i>)
</I>
---------- Forwarded message ----------
From: Rafael Teixeira &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monoman at gmail.com</A>&gt;
Date: Mar 9, 2007 11:28 AM
Subject: Re: [Mono-winforms-list] Caret
To: George Giolfan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">georgegiolfan at yahoo.com</A>&gt;
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-winforms-list at lists.ximian.com</A>


Hi George,

Interesting idea, but that kind of redirection isn't presently possible.

Mono has some logic on mapping p/invoke calls (using .config files
even for dlls) but AFAIK it is just to point to some other native
library and function entry-point, still doing the marshaling of things
as needed for the native platform.

Just extending it to allow mapping to managed implementations would
still put the burden of creating the mapping .config files/sections
for porting devs, or packagers.

A middle ground solution would be to either hardcode the mapping
inside the runtime (a magic xml file, for instance), or allow for some
&quot;exporting&quot; configuration section on .config (or some managed API) to
add the mapping by the API providing assembly, but this latest
suggestion seems risky, security-wise, because it could allow any
assembly to &quot;sequestrate&quot; some native API, even more as full CAS and
trust-management isn't working on Mono

Discussion on risks, benefits, and also code contributions to test the
premises are all welcome.

:<i>)
</I>
On 3/9/07, George Giolfan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">georgegiolfan at yahoo.com</A>&gt; wrote:
&gt;<i> If you mean implementing such functions in native code
</I>&gt;<i> is wrong, I completely agree. I was suggesting we
</I>&gt;<i> could implement Win32 functions (those that do not
</I>&gt;<i> have managed equivalents) in managed code and have
</I>&gt;<i> Mono call them when it encounters a P/Invoke (I am
</I>&gt;<i> under the impression that this is possible). This way
</I>&gt;<i> we wouldn't need to change every program we want to
</I>&gt;<i> port. There are already methods in XplatUI very
</I>&gt;<i> similar to the caret Win32 functions.
</I>&gt;<i>
</I>&gt;<i> --- Rafael Teixeira &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monoman at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Having a libuser32.so, and possibly others, to
</I>&gt;<i> &gt; enable all that
</I>&gt;<i> &gt; p/invoking seems a bit too much for me.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We should strive to keep all we can in managed-land,
</I>&gt;<i> &gt; where things are
</I>&gt;<i> &gt; naturally more portable.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Just my thinking on the subject,
</I>

-- 
Rafael &quot;Monoman&quot; Teixeira
---------------------------------------
&quot;The reasonable man adapts himself to the world; the unreasonable one
persists in trying to adapt the world to himself. Therefore all
progress depends on the unreasonable man.&quot; George Bernard Shaw

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022767.html">[Mono-dev] Example of an expected execption test
</A></li>
	<LI>Next message: <A HREF="022768.html">[Mono-dev] DataGridItem.DataItem null after DataBind
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22769">[ date ]</a>
              <a href="thread.html#22769">[ thread ]</a>
              <a href="subject.html#22769">[ subject ]</a>
              <a href="author.html#22769">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
