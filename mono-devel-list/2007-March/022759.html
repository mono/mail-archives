<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Fix shadow copy and define UNICODE on windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Fix%20shadow%20copy%20and%20define%20UNICODE%20on%20windows&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022758.html">
   <LINK REL="Next"  HREF="022760.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Fix shadow copy and define UNICODE on windows</H1>
    <B>Jonathan Chambers</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Fix%20shadow%20copy%20and%20define%20UNICODE%20on%20windows&In-Reply-To="
       TITLE="[Mono-dev] Fix shadow copy and define UNICODE on windows">joncham at gmail.com
       </A><BR>
    <I>Thu Mar  8 14:12:42 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022758.html">[Mono-dev] stack dump ** ERROR **: file monitor.c: line 464	(mono_monitor_try_enter_internal)
</A></li>
        <LI>Next message: <A HREF="022760.html">[Mono-dev] Fix shadow copy and define UNICODE on windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22759">[ date ]</a>
              <a href="thread.html#22759">[ thread ]</a>
              <a href="subject.html#22759">[ subject ]</a>
              <a href="author.html#22759">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here is a patch that fixes shadow copy on windows, and also sets UNICODE and
_UNICODE in configure.in on windows. I was getting warning in VS that some
Win32 functions we were calling was using the ANSI version (meaning UNICODE
was not getting defined in some places) even though we were passing Unicode
strings. Also, I changed a macro in mono-dl.c to a function so I could
convert the utf8 string to utf16.

One question about shadow copy, do I/we need to worry about UNC paths, i.e.
\\location\blah. My code assumes a drive letter based path, C:\ etc.

I never messed with configure.in before, so please make sure I put the
defines in the right and correctly. Also, I'll fix the vcproj's after this
patch (the need to be set to use Unicode).

Thanks,
Jonathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070308/337b3ffc/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070308/337b3ffc/attachment.html</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: unicode_patch.diff
Type: text/x-patch
Size: 6012 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070308/337b3ffc/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20070308/337b3ffc/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022758.html">[Mono-dev] stack dump ** ERROR **: file monitor.c: line 464	(mono_monitor_try_enter_internal)
</A></li>
	<LI>Next message: <A HREF="022760.html">[Mono-dev] Fix shadow copy and define UNICODE on windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22759">[ date ]</a>
              <a href="thread.html#22759">[ thread ]</a>
              <a href="subject.html#22759">[ subject ]</a>
              <a href="author.html#22759">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
