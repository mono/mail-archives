<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] System.Web.Services: support for interface service declaration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20System.Web.Services%3A%20support%20for%20interface%0A%20service%20declaration&In-Reply-To=DA63C6E8B207E748B20D46DFED7B772D813A94%40dhost002-45.dex002.intermedia.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022852.html">
   <LINK REL="Next"  HREF="022836.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] System.Web.Services: support for interface service declaration</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20System.Web.Services%3A%20support%20for%20interface%0A%20service%20declaration&In-Reply-To=DA63C6E8B207E748B20D46DFED7B772D813A94%40dhost002-45.dex002.intermedia.net"
       TITLE="[Mono-dev] [PATCH] System.Web.Services: support for interface service declaration">atsushi at ximian.com
       </A><BR>
    <I>Mon Mar 19 04:00:26 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022852.html">[Mono-dev] [PATCH] System.Web.Services: support for interface	service declaration
</A></li>
        <LI>Next message: <A HREF="022836.html">[Mono-dev] Correction to	System.Security.Cryptography.Rfc2898DeriveBytes.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22874">[ date ]</a>
              <a href="thread.html#22874">[ thread ]</a>
              <a href="subject.html#22874">[ subject ]</a>
              <a href="author.html#22874">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Kosta,

&gt;<i>         - Does this change intended to include private methods
</I>&gt;<i>           (BindingFlags.NonPublic) in a *class* as well as
</I>&gt;<i>           private interface implementation? If yes why?
</I>&gt;<i> 
</I>&gt;<i> Yes, it's intentionally, but only if they are an implementation of an 
</I>&gt;<i> interface.
</I>&gt;<i> Why? This is an MS behavior. They include methods even if the interface 
</I>&gt;<i> declared privately!
</I>
Well, what I've asked was different. I was reading the patch and
thought that if private methods with [WebMethod] in a class (where
no interfaces are involved) are exposed as web service operations.

Now I cooked such case on .NET, ran it and they are not exposed, and
tried the patch and saw that they are not exposed after your patch.
So from the result there was no such issue that I was afraid.

&gt;<i>         - I'm not sure that comparing methods in your own way is
</I>&gt;<i>           good. At least comparing ParameterInfo just by Type
</I>&gt;<i>           does not look good enough.
</I>&gt;<i> 
</I>&gt;<i> I need to check that a method is an implementation of the relevant 
</I>&gt;<i> method declared in an interface. Can you propose a correct way / point 
</I>&gt;<i> on issues in my implementation?
</I>
Hmm ok, what I was wondering was what if they have ref/out parameters
but there is not likely (or very unlikely) that could bring issues.
Operations that have the same name result in an error, and there are
very unlikely Foo(param) and Foo(out param) in the same contract.
So I stop almost pointless thoughts here.

&gt;<i>         - Is ConformanceChecker change relevant, or is this just
</I>&gt;<i>           a fix that happened to be included? If yes please commit
</I>&gt;<i>           this one individually (having test case is much better).
</I>&gt;<i> 
</I>&gt;<i> It's related, but can be separated. The issue comes because I have 2 
</I>&gt;<i> bindings to different Namespaces. In this case 'collection != null' so 
</I>&gt;<i> GetDocument returned null and conformance checking failed.
</I>
Ah, that's why.

BTW the patch broke one test case:

Failures:
1) 
System.Web.Services.Protocols.SoapHttpClientProtocolTest.OutParametersTest :
System.NullReferenceException : Object reference not set to an instance 
of an object
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke 
(System.String method_name, System.Object[] parameters) [0x00021] in 
C:\cygwin\home\atsushi\svn\mcs\class\System.Web.Services\System.Web.Services.Protocols\SoapHttpClientProtocol.cs:357
   at 
System.Web.Services.Protocols.SoapHttpClientProtocolTest+FooService.Req 
(System.String arg, System.Int32&amp; status, System.Boolean&amp; 
statusSpecified) [0x00000] in 
C:\cygwin\home\atsushi\svn\mcs\class\System.Web.Services\Test\System.Web.Services.Protocols\SoapHttpClientProtocolTest.cs:80
   at (wrapper remoting-invoke-with-check) FooService:Req 
(string,int&amp;,bool&amp;)
   at 
System.Web.Services.Protocols.SoapHttpClientProtocolTest.OutParametersTest() 
[0x0004e] in 
C:\cygwin\home\atsushi\svn\mcs\class\System.Web.Services\Test\System.Web.Services.Protocols\SoapHttpClientProtocolTest.cs:55

As long as it goes away, it could go into svn I think. Thanks again :)

Atsushi Eno

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022852.html">[Mono-dev] [PATCH] System.Web.Services: support for interface	service declaration
</A></li>
	<LI>Next message: <A HREF="022836.html">[Mono-dev] Correction to	System.Security.Cryptography.Rfc2898DeriveBytes.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22874">[ date ]</a>
              <a href="thread.html#22874">[ thread ]</a>
              <a href="subject.html#22874">[ subject ]</a>
              <a href="author.html#22874">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
