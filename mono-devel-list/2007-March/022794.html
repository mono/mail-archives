<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] wapi_shm_semaphores_init exits on startup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20wapi_shm_semaphores_init%20exits%20on%20startup&In-Reply-To=27d8d0930703112312g712b4bf4ha0aee6d621e941a5%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022791.html">
   <LINK REL="Next"  HREF="022798.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] wapi_shm_semaphores_init exits on startup</H1>
    <B>Joachim Ante</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20wapi_shm_semaphores_init%20exits%20on%20startup&In-Reply-To=27d8d0930703112312g712b4bf4ha0aee6d621e941a5%40mail.gmail.com"
       TITLE="[Mono-dev] wapi_shm_semaphores_init exits on startup">joe at otee.dk
       </A><BR>
    <I>Mon Mar 12 04:35:54 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022791.html">[Mono-dev] Reflection Emit issues
</A></li>
        <LI>Next message: <A HREF="022798.html">[Mono-dev] wapi_shm_semaphores_init exits on startup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22794">[ date ]</a>
              <a href="thread.html#22794">[ thread ]</a>
              <a href="subject.html#22794">[ subject ]</a>
              <a href="author.html#22794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

When launching Unity applications (Initializing mono at startup). The  
embedded mono exits on startup.

This is on a limited user access (It's a university teaching Unity).
I believe they have Macs running Mac OS X over a netboot drive. They  
also have access limited user accounts.

They consistently get this error.

** (process:187): CRITICAL **: _wapi_shm_semaphores_init: semget
error: No space left on device.  Try deleting some semaphores with
ipcs and ipcrm

on another machine:
** (process:226): WARNING **: _wapi_shm_semaphores_init: semctl init
error: Permission denied - trying again

** (process:226): WARNING **: _wapi_shm_semaphores_init: semget error:
Permission denied key 0x4d028412 - trying again

I also asked the user to run ipcs and the result was:

hcc-x3-13:~ art$ ipcs
Message Queues:
T     ID     KEY        MODE       OWNER    GROUP

Shared Memory:
T     ID     KEY        MODE       OWNER    GROUP

Semaphores:
T     ID     KEY        MODE       OWNER    GROUP


There is enough space on both the local hard disk and the net boot  
drive. We are using mono 1.2.0.

Any ideas what might cause this? Any ideas on how to fix it or how to  
work around it?


Did i say a that adding compile time define for ripping out iolayer  
would be really, really helpful?

* Avoiding bugs - This is not the first time we are running into an  
issue related to iolayer
* Avoid creating files unneccessarily which will not be cleaned up  
automatically. On OS X files will automatically be created in an  
invisible folder called .wapi. Some of our tech savvy end-users do  
complain about this.
* We will never need any cross application shared memory or mutexes

A compile time define could simply replace system wide mutex with a  
normal mutex...

Best regards,
Joachim Ante


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022791.html">[Mono-dev] Reflection Emit issues
</A></li>
	<LI>Next message: <A HREF="022798.html">[Mono-dev] wapi_shm_semaphores_init exits on startup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22794">[ date ]</a>
              <a href="thread.html#22794">[ thread ]</a>
              <a href="subject.html#22794">[ subject ]</a>
              <a href="author.html#22794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
