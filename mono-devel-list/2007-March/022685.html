<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Crosscompile mono on Powerquicc3 - mscorlib.dll invalid	CIL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Crosscompile%20mono%20on%20Powerquicc3%20-%20mscorlib.dll%20invalid%0A%09CIL&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="022684.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Crosscompile mono on Powerquicc3 - mscorlib.dll invalid	CIL</H1>
    <B>Jeroen.Hoet at alcatel-lucent.be</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Crosscompile%20mono%20on%20Powerquicc3%20-%20mscorlib.dll%20invalid%0A%09CIL&In-Reply-To="
       TITLE="[Mono-dev] Crosscompile mono on Powerquicc3 - mscorlib.dll invalid	CIL">Jeroen.Hoet at alcatel-lucent.be
       </A><BR>
    <I>Thu Mar  1 07:29:22 EST 2007</I>
    <P><UL>
        
        <LI>Next message: <A HREF="022684.html">[Mono-dev] SPAM-LOW: [Patch] ConfigurationFile should be	relative to the ApplicationBase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22685">[ date ]</a>
              <a href="thread.html#22685">[ thread ]</a>
              <a href="subject.html#22685">[ subject ]</a>
              <a href="author.html#22685">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

I'm trying to get Mono running on a Powerquicc3 (ppc core) processor for an
embedded platform. As a crosscompiler we use eldk4 from <A HREF="http://www.denx.de">http://www.denx.de</A>

First we crosscompiled the mono binaries for this host and second we
compile mono native(x86) to have the mcs-compiler to compile the more
higher layers of the mono-environment as descripbed in
<A HREF="http://www.mono-project.com/Mono:ARM">http://www.mono-project.com/Mono:ARM</A> (but then for ppc).

To get mono crosscompiled we generated the cpu-4g.h and inssel.h/inssel.c
files on target using crosscompiled versions of genmdesc and monoburg.

On the ppc we can run mono, where it gives us the help but nothing more.
If we try to run:
   # mono helloworld.exe
   The file /opt/mono/lib/mscorlib.dll is an invalid CIL image

What is the reason that we get this message and how can we create the
correct dll's? I even tried using the libtool script for the cross
environment using the native mcs-compiler.

Because it is an embedded environment, we have to crosscompile things on a
build machine so compiling mono on the powerquicc is not a good option.

Thanks in advance.
Regards,
Jeroen

-------
Configure options for crosscompiling:
./configure CC=ppc_85xx-gcc RANLIB=ppc_85xx-ranlib CPP=ppc_85xx-cpp
AR=ppc_85xx-ar AS=ppc_85xx-as STRIP=ppc_85xx-strip LD=ppc_85xx-ld
CXX=ppc_85xx-c++ GXX=ppc_85xx-g++ --with-tls=no --prefix=/opt/mono
cv_mono_sizeof_sunpath=104 mono_cv_uscore=set
--host=powerpc-ppc85xx-linux2.6.16 --disable-mcs-build



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="022684.html">[Mono-dev] SPAM-LOW: [Patch] ConfigurationFile should be	relative to the ApplicationBase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22685">[ date ]</a>
              <a href="thread.html#22685">[ thread ]</a>
              <a href="subject.html#22685">[ subject ]</a>
              <a href="author.html#22685">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
