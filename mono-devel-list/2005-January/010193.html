<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: [Bug 71001][Nor] Changed - xsp.exe	virtual size grows without bound -- large messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20%5BBug%2071001%5D%5BNor%5D%20Changed%20-%20xsp.exe%0A%09virtual%20size%20grows%20without%20bound%20--%20large%20messages&In-Reply-To=20050201011630.GB22851%40ducker.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010192.html">
   <LINK REL="Next"  HREF="010195.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: [Bug 71001][Nor] Changed - xsp.exe	virtual size grows without bound -- large messages</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20%5BBug%2071001%5D%5BNor%5D%20Changed%20-%20xsp.exe%0A%09virtual%20size%20grows%20without%20bound%20--%20large%20messages&In-Reply-To=20050201011630.GB22851%40ducker.org"
       TITLE="[Mono-devel-list] Re: [Bug 71001][Nor] Changed - xsp.exe	virtual size grows without bound -- large messages">bmaurer at ximian.com
       </A><BR>
    <I>Mon Jan 31 20:38:42 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010192.html">[Mono-devel-list] Re: [Bug 71001][Nor] Changed - xsp.exe virtual size grows without bound -- large messages
</A></li>
        <LI>Next message: <A HREF="010195.html">[Mono-devel-list] Re: [Bug 71001][Nor] Changed - xsp.exe virtual size grows without bound -- large messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10193">[ date ]</a>
              <a href="thread.html#10193">[ thread ]</a>
              <a href="subject.html#10193">[ subject ]</a>
              <a href="author.html#10193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2005-01-31 at 17:16 -0800, <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jrodman at mono-list.spamportal.net</A>
wrote:
&gt;<i> On Mon, Jan 31, 2005 at 08:14:27PM -0500, Ben Maurer wrote:
</I>&gt;<i> &gt; A simpler test case is:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; using System.Xml;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; class X {
</I>&gt;<i> &gt; 	static void Main ()
</I>&gt;<i> &gt; 	{
</I>&gt;<i> &gt; 		while (true) {
</I>&gt;<i> &gt; 			byte [] b = new byte [1024*1024*50];
</I>&gt;<i> &gt; 			XmlDocument d = new XmlDocument ();
</I>&gt;<i> &gt; 			d.Load (&quot;test.rdf&quot;);
</I>&gt;<i> &gt; 		}
</I>&gt;<i> &gt; 	}
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The Xml document here is a huge XML document. It ensures that data of
</I>&gt;<i> &gt; various sizes gets put on the stack. When I run this test case, the heap
</I>&gt;<i> &gt; size grows without bound (it takes a bit longer than your test case),
</I>&gt;<i> &gt; but the number of live bytes says about constant. This means that there
</I>&gt;<i> &gt; is heap fragmentation here.
</I>&gt;<i> 
</I>&gt;<i> Does the RSS of the program stay constant?  In my test case on the
</I>&gt;<i> versions of mono I have (1.0.x based) it becomes unreasonably (hundreds
</I>&gt;<i> of megabytes) large before it stabalizes.
</I>
It doesn't stabilize. Try running it for a long time.

BTW, 1.0.x based releases are going to be even worse than 1.1.x. I made
some patches in 1.1.x that make the GC much less conservative on
the .data and .bss sections of unmanaged code.

On 1.1.x you might find that it is not an issue unless you use *REALLY*
large documents. 1 mb might work fine on 1.1.

-- Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010192.html">[Mono-devel-list] Re: [Bug 71001][Nor] Changed - xsp.exe virtual size grows without bound -- large messages
</A></li>
	<LI>Next message: <A HREF="010195.html">[Mono-devel-list] Re: [Bug 71001][Nor] Changed - xsp.exe virtual size grows without bound -- large messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10193">[ date ]</a>
              <a href="thread.html#10193">[ thread ]</a>
              <a href="subject.html#10193">[ subject ]</a>
              <a href="author.html#10193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
