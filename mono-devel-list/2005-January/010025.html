<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Performance issues with security permissions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Performance%20issues%20with%20security%20permissions&In-Reply-To=1106680599.12687.273.camel%40pollux.novell">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010023.html">
   <LINK REL="Next"  HREF="010027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Performance issues with security permissions</H1>
    <B>Willibald Krenn</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Performance%20issues%20with%20security%20permissions&In-Reply-To=1106680599.12687.273.camel%40pollux.novell"
       TITLE="[Mono-devel-list] Performance issues with security permissions">Willibald.Krenn at gmx.at
       </A><BR>
    <I>Tue Jan 25 14:44:14 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010023.html">[Mono-devel-list] Performance issues with security permissions
</A></li>
        <LI>Next message: <A HREF="010027.html">[Mono-devel-list] Performance issues with security permissions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10025">[ date ]</a>
              <a href="thread.html#10025">[ thread ]</a>
              <a href="subject.html#10025">[ subject ]</a>
              <a href="author.html#10025">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sebastien Pouliot schrieb:
&gt;<i> * Sadly declarative security cannot be used everywhere. When security
</I>&gt;<i> decisions requires information only available at runtime then imperative
</I>&gt;<i> security must be used. E.g.
</I>&gt;<i> 
</I>&gt;<i> 	public static string GetEnvironmentVariable (string name)
</I>&gt;<i> 	{
</I>&gt;<i> 		new EnvironmentPermission
</I>&gt;<i> 		    (EnvironmentPermissionAccess.Read, name).Demand ();
</I>&gt;<i> 
</I>&gt;<i> 		return internalGetEnvironmentVariable (name);
</I>&gt;<i> 	}
</I>&gt;<i> 
</I>&gt;<i> * However this results in creating a lot of permission objects with a
</I>&gt;<i> very short lifetime (as Demand wont do anything useful without
</I>&gt;<i> --security). From CodeAccessPermission.cs
</I>&gt;<i> 
</I>&gt;<i>         public void Demand ()
</I>&gt;<i>         {
</I>&gt;<i>         	// note: here we're sure it's a CAS demand
</I>&gt;<i>         	if (!SecurityManager.SecurityEnabled)
</I>&gt;<i>         		return;
</I>&gt;<i>         	...
</I>&gt;<i>         }
</I>&gt;<i>         
</I>&gt;<i> * So the only thing creating the permission object does (without
</I>&gt;<i> --security) is more memory allocations, additional garbage collection...
</I>&gt;<i> All bad for Mono's performance. 
</I>

I was already thinking about adding Escape Analysis to Mono. (You 
probably know, I'm doing some Continuous Optimization work, so that 
would fit in this area).

Basically Escape Analysis is an optimization that allows the JIT to 
allocate certain objects on the stack (~alloca), thereby bypassing the 
garbage collector and taking load from the GC-system. (Java programs 
showed 21 (average) to 44 per cent speedup according to papers I read..)

However, Escape Analysis mostly is only meaningful if you do inlining 
too... (And probably devirtualization/inlining)

Dunno what others think about Escape Analysis, but if I've got enough 
time, I'll go for it. (Depends on when Paolo has the new JIT code for 
re-compileable methods ready. As I do not want to duplicate his efforts 
in this area, he kinda disposes of my schedule..)

Willi


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010023.html">[Mono-devel-list] Performance issues with security permissions
</A></li>
	<LI>Next message: <A HREF="010027.html">[Mono-devel-list] Performance issues with security permissions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10025">[ date ]</a>
              <a href="thread.html#10025">[ thread ]</a>
              <a href="subject.html#10025">[ subject ]</a>
              <a href="author.html#10025">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
