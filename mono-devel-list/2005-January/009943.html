<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] CAS support with AOT / SecurityManager default to OFF
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20CAS%20support%20with%20AOT%20/%20SecurityManager%20default%20to%20OFF&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009944.html">
   <LINK REL="Next"  HREF="009946.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] CAS support with AOT / SecurityManager default to OFF</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20CAS%20support%20with%20AOT%20/%20SecurityManager%20default%20to%20OFF&In-Reply-To="
       TITLE="[Mono-devel-list] [PATCH] CAS support with AOT / SecurityManager default to OFF">sebastien at ximian.com
       </A><BR>
    <I>Fri Jan 21 09:58:18 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="009944.html">[Mono-devel-list] binding GObjects into Mono
</A></li>
        <LI>Next message: <A HREF="009946.html">[Mono-devel-list] Solaris 9 mod_mo failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9943">[ date ]</a>
              <a href="thread.html#9943">[ thread ]</a>
              <a href="subject.html#9943">[ subject ]</a>
              <a href="author.html#9943">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

First, the patch add the missing code to make declarative demands work
with AOT (and fix another previous bug I had with AOT when class could
be uninitialized). This pass all current tests (and my own for
security).

Second, the patch move the SecuirtyManager into unmanaged code and, by
default (i.e. without --security), turns them off.

The properties are moved into unmanaged code for two reasons:

        * some unmanaged code needs to know their status (and it's
        harder/slower to call managed code to get this).
        
        * we don't want applications with the reflection rights to
        change the value (and give themselves all the rights).

without --security

        * SecurityManager.SecurityEnabled is false and cannot be changed
        to true;
        * SecurityManager.CheckExecutionRights is false and cannot be
        changed to true;

with --security

        * SecurityManager.SecurityEnabled is true and can be changed to
        false [1];
        * SecurityManager.CheckExecutionRights is true and can be
        changed to false;


[1] Under the MS runtime (at least for 1.x runtimes) turning off
security is possible but it cannot be turned back on without restarting
the application (but yes you can flip the properties as much as you like
it just wont work ;-).

-- 
Sebastien Pouliot  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastien at ximian.com</A>&gt;
blog: <A HREF="http://pages.infinit.net/ctech/poupou.html">http://pages.infinit.net/ctech/poupou.html</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: corlib.20050121.diff
Type: text/x-patch
Size: 2304 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050121/91d9602d/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050121/91d9602d/attachment.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mono.20050121.diff
Type: text/x-patch
Size: 12252 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050121/91d9602d/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050121/91d9602d/attachment-0001.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009944.html">[Mono-devel-list] binding GObjects into Mono
</A></li>
	<LI>Next message: <A HREF="009946.html">[Mono-devel-list] Solaris 9 mod_mo failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9943">[ date ]</a>
              <a href="thread.html#9943">[ thread ]</a>
              <a href="subject.html#9943">[ subject ]</a>
              <a href="author.html#9943">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
