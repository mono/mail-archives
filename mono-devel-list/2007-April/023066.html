<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] ActiveDirectoryMembershipProvider
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20ActiveDirectoryMembershipProvider&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023117.html">
   <LINK REL="Next"  HREF="023072.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] ActiveDirectoryMembershipProvider</H1>
    <B>joel reed</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20ActiveDirectoryMembershipProvider&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] ActiveDirectoryMembershipProvider">joelwreed at gmail.com
       </A><BR>
    <I>Tue Apr  3 22:09:43 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023117.html">[Mono-dev] Binding navigator patch
</A></li>
        <LI>Next message: <A HREF="023072.html">[Mono-dev] [PATCH] ActiveDirectoryMembershipProvider
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23066">[ date ]</a>
              <a href="thread.html#23066">[ thread ]</a>
              <a href="subject.html#23066">[ subject ]</a>
              <a href="author.html#23066">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The patch below enhances the usefulness of 
ActiveDirectoryMembershipProvider under mono, but may not be acceptable 
for inclusion in svn. I'm posting this in case some one else runs into a 
similar problem as I encountered.

We have a Membership Provider that derives from 
ActiveDirectoryMembershipProvider and then overrides Initialize and 
ValidateUser. Our ValidateUser method looks in web.config and either 
does an validation against AD or our legacy authentication scheme.

This works on mono (if configured to not use AD), as long as the 
Initialize method in ActiveDirectoryMembershipProvider calls 
base.Initialize. Calling base.Initialize is important as this is how 
ProviderBase sets the Name property which lets the Provider be put into 
a ProviderCollection. Without the Name, Adding the provider to the 
collection fails with a ArgumentNullException.

Currently ActiveDirectoryMembershipProvider just does a &quot;throw 
NotImplemented&quot;.

If instead we said:

mcs/class/System.Web/System.Web.Security/ActiveDirectoryMembershipProvider.cs.orig 
2007-04-03 20:59:32.000000000 -0400
+++ 
mcs/class/System.Web/System.Web.Security/ActiveDirectoryMembershipProvider.cs 
2007-04-03 20:59:50.000000000 -0400
@@ -118,7 +118,7 @@ namespace System.Web.Security {
  		[MonoTODO(&quot;Not implemented&quot;)]
  		public override void Initialize (string name, NameValueCollection 
config)
  		{
-			throw new NotImplementedException ();
+			base.Initialize(name, config);
  		}
  		
  		[MonoTODO(&quot;Not implemented&quot;)]

The class would be slightly more useful in the above scenario. Probably 
this circumvents some policy about MonoTODOs, but again just want to 
post this info somewhere for others to google. It might even improve 
things just by calling base.Initialize and then throwing, as you could 
catch that exception and still be in business. Thoughts?

jr

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023117.html">[Mono-dev] Binding navigator patch
</A></li>
	<LI>Next message: <A HREF="023072.html">[Mono-dev] [PATCH] ActiveDirectoryMembershipProvider
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23066">[ date ]</a>
              <a href="thread.html#23066">[ thread ]</a>
              <a href="subject.html#23066">[ subject ]</a>
              <a href="author.html#23066">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
