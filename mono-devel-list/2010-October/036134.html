<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] How to access XplatUI for custom controls?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20How%20to%20access%20XplatUI%20for%20custom%20controls%3F&In-Reply-To=AANLkTi%3DN%3Dgn%2BB5k3umMcK8Dog1tTzPMhbLM_0zceJ%3DXw%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036074.html">
   <LINK REL="Next"  HREF="036198.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] How to access XplatUI for custom controls?</H1>
    <B>Lionel Cuir</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20How%20to%20access%20XplatUI%20for%20custom%20controls%3F&In-Reply-To=AANLkTi%3DN%3Dgn%2BB5k3umMcK8Dog1tTzPMhbLM_0zceJ%3DXw%40mail.gmail.com"
       TITLE="[Mono-dev] How to access XplatUI for custom controls?">lionel_email at aulofee.com
       </A><BR>
    <I>Fri Oct 22 12:08:52 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="036074.html">[Mono-dev] How to access XplatUI for custom controls?
</A></li>
        <LI>Next message: <A HREF="036198.html">[Mono-dev] How to access XplatUI for custom controls?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36134">[ date ]</a>
              <a href="thread.html#36134">[ thread ]</a>
              <a href="subject.html#36134">[ subject ]</a>
              <a href="author.html#36134">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
 
So here is it. I called the assembly Mono.WinformsSupport.dll. Rename it as
you want + change the reference to the signing key to build it.
 
I've done something just a little more elaborate, as it can be used on Mono
but also with .NET. In a word, a GUI application can now use the same system
calls, independently of the runtime ( Mono / .NET) and of the OS (Windows,
Linux...). Technically, if a program (compiled with Mono.WinformsSupport)
runs on Mono, it will use XplatUI from the Mono's System.Windows.Forms dll.
But if it runs on .NET, then it will use the internal copy of XplatUIWin32
located in Mono.WinformsSupport. 
 
I didn't include any unit test as methods are either simple stubs (calling
XplatUI when on Mono) or a true copy of XplatUIWin32 (which is already
tested). Apply the diff on
mcs/class/Managed.Windows.Forms/Assembly/AssemblyInfo.cs also (add a
InternalsVisibleTo attribute to System.Windows.Forms.dll).
 
Hope it will encourage those creating GUI controls to make their controls
compatible with Mono.
 
Regards
Lionel
 
  _____  

De : <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel.novell at gmail.com</A> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel.novell at gmail.com</A>] De la part de
Miguel de Icaza
Envoy&#233; : vendredi 15 octobre 2010 17:32
&#192; : Lionel Cuir; mono-devel
Objet : Re: [Mono-dev] How to access XplatUI for custom controls?


Hello,



Right now, I'm using only a very limited subset:
GetFocus,
ResetMouseHover
ScrollWindow
 
So obviously, I could manage it manually. But I was thinking about porting
various opensource controls, available on Internet and which uses
GUI-related win32 calls (such as the ecellent DockPanel). As a lot of work
has been within XplatUI and its &quot;drivers&quot;, I was looking at reusing them. My
first idea was to ask about making all/some XplatUI's methods public. But
maybe the easier way is to extract what's needed from these classes (easier
but not smarter way though).


I would support having an extra library &quot;WinformsSupport.dll&quot; that exposes
those methods for you.   Interested in cooking the patch?

It would probably be a matter of making the [InternalsVisisbleTo:] the new
assembly, and then exposing public methods for it.

Miguel.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101022/45834dc6/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101022/45834dc6/attachment-0001.html</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Mono.WinformsSupport.zip
Type: application/octet-stream
Size: 36947 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101022/45834dc6/attachment-0002.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101022/45834dc6/attachment-0002.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: diff AssemblyInfo
Type: application/octet-stream
Size: 934 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101022/45834dc6/attachment-0003.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101022/45834dc6/attachment-0003.obj</A> 
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036074.html">[Mono-dev] How to access XplatUI for custom controls?
</A></li>
	<LI>Next message: <A HREF="036198.html">[Mono-dev] How to access XplatUI for custom controls?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36134">[ date ]</a>
              <a href="thread.html#36134">[ thread ]</a>
              <a href="subject.html#36134">[ subject ]</a>
              <a href="author.html#36134">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
