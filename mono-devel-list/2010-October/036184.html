<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono Winforms on Mac
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono%20Winforms%20on%20Mac&In-Reply-To=AANLkTi%3DuiPbztSQvSf2-%2Brd-v5xS80XpZVhAs4A%3DNYAr%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036182.html">
   <LINK REL="Next"  HREF="036185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono Winforms on Mac</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono%20Winforms%20on%20Mac&In-Reply-To=AANLkTi%3DuiPbztSQvSf2-%2Brd-v5xS80XpZVhAs4A%3DNYAr%40mail.gmail.com"
       TITLE="[Mono-dev] Mono Winforms on Mac">miguel at novell.com
       </A><BR>
    <I>Sat Oct 30 15:31:33 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="036182.html">[Mono-dev] Mono Winforms on Mac
</A></li>
        <LI>Next message: <A HREF="036185.html">[Mono-dev] Mono Winforms on Mac
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36184">[ date ]</a>
              <a href="thread.html#36184">[ thread ]</a>
              <a href="subject.html#36184">[ subject ]</a>
              <a href="author.html#36184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Ralph,

Does the Mono Project have it's own format utility? It would be nice
&gt;<i> to make all the code consistent no matter what that format is.
</I>&gt;<i>
</I>
We do not.   And I do agree with you that some of the practices on
Windows.Forms were less than ideal, reading your patch made me realize that
the Windows.Forms team created their own rules that did not really match the
Mono guidelines and that this needs to be fixed.

I am willing to change the formatting on the Windows.Forms codebase in about
half the cases that your code did, but this is secondary to getting your
patches reviewed and merged.

In general, in open source, there is an unspoken rule that you always adapt
your code to the upstream coding style.   This means that reviewing patches
can focus on the actual substance of the problem instead of having to chase
down the changes line-by-line.   The patch that I posted to the mailing list
contains the &quot;cleaned up&quot; version of your patch after I removed all
the superfluous changes that were still on it.

But we are left with a jumbo patch with large changes and no explanation of
what the change does, why it does it.   Ideally, you could resubmit the
patches on a feature-by-feature basis, this would accelerate the review.
As you noticed by the lack of participation on the thread, nobody really has
stepped up to review the jumbo patch after I cleaned it up.   The changes
are just too big as they are now.

If nobody steps up, I will add it to my own list of tasks to do, but right
now I am tied up for the next two weeks.

Miguel

&gt;<i>
</I>&gt;<i> On 10/30/10, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at novell.com</A>&gt; wrote:
</I>&gt;<i> &gt; Hello Ralph,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Have you given any consideration to providing a roadmap to your
</I>&gt;<i> changes
</I>&gt;<i> &gt; so that they can be individually reviewed?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Since you reformatted the source code, it is not possible to apply
</I>&gt;<i> the
</I>&gt;<i> &gt; patches directly, we still have to apply every change by hand and it
</I>&gt;<i> would
</I>&gt;<i> &gt; be useful to have the different patches and changes reviewed
</I>&gt;<i> independently.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Miguel
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Sat, Oct 30, 2010 at 10:34 AM, Ralph Leckett &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">rleckett at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Attached is another set of updates for Mac Mono Winforms. My .net
</I>&gt;<i> &gt;&gt; applications now work quite nicely with my changes to Mono.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; NativeWindow has been simplified to using Hwnd to provide the
</I>&gt;<i> &gt;&gt; Handle-Window lookup. I have found that storing handles in Hashtable
</I>&gt;<i> &gt;&gt; sometimes results in the handle being lost with the result being
</I>&gt;<i> &gt;&gt; zombie windows. Replacing Hashtable with a linked list solved the
</I>&gt;<i> &gt;&gt; problem. Placing the most recently used link at the head of the linked
</I>&gt;<i> &gt;&gt; list maintains efficiency.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; MS Windows places paint events at the lowest priority with all other
</I>&gt;<i> &gt;&gt; events preempting WM_PAINT. A separate queue (linked list in my case)
</I>&gt;<i> &gt;&gt; for paint events is required for Mono to duplicate this effect.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I find the exposure of method variables to outside objects without
</I>&gt;<i> &gt;&gt; using properties to be one of the poorer coding practices used in
</I>&gt;<i> &gt;&gt; Mono. Apart from that, I found Mono to be quite well written and a
</I>&gt;<i> &gt;&gt; pleasure to work on.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Ralph
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On 10/20/10, Ralph Leckett &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">rleckett at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; &gt; The namespaces in the code caused compile errors in one of my test
</I>&gt;<i> &gt;&gt; &gt; environments so I had to remove them.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Attached is an update to my updates to fix this problem:
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://bugzilla.novell.com/show_bug.cgi?id=438281">https://bugzilla.novell.com/show_bug.cgi?id=438281</A>
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Ralph
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; On 10/19/10, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at novell.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; &gt;&gt; Hello,
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;     I have created a diff file from the formatted sources that
</I>&gt;<i> removes
</I>&gt;<i> &gt;&gt; &gt;&gt; some of the other automatic changes that probably came out of some
</I>&gt;<i> &gt;&gt; &gt;&gt; refactoring tool.   The patch itself can not be used directly against
</I>&gt;<i> &gt;&gt; &gt;&gt; Mono's source code since it is still a diff from formatted to
</I>&gt;<i> &gt;&gt; &gt;&gt; formatted,
</I>&gt;<i> &gt;&gt; &gt;&gt; not from Mono to formatted.    This means that we are going to have
</I>&gt;<i> to
</I>&gt;<i> &gt;&gt; &gt;&gt; apply every patch by hand.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;     I personally like the changes that were made by the tool, like
</I>&gt;<i> &gt;&gt; &gt;&gt; dropping the gratuitous overuse of namespaces in the Managed.Winforms
</I>&gt;<i> &gt;&gt; &gt;&gt; code, and would love to plug those changes back in the future.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;     In terms of how to get the changes merged, ideally, Ralph could
</I>&gt;<i> &gt;&gt; &gt;&gt; review the attached file and provide a roadmap of what each of the
</I>&gt;<i> &gt;&gt; &gt;&gt; changes do.   There are some that I suspect wont be controversial,
</I>&gt;<i> for
</I>&gt;<i> &gt;&gt; &gt;&gt; example:
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;      * There is a refactoring of the Clipboard code, this seems
</I>&gt;<i> &gt;&gt; &gt;&gt;        straightforward, but it still needs a review.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;      * Some look like simple bug fixes, but it would be good to
</I>&gt;<i> &gt;&gt; &gt;&gt;        know what were they fixing (for example the ListView.cs
</I>&gt;<i> &gt;&gt; &gt;&gt;        changes).
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;     There are other pieces that look like they went through a lot of
</I>&gt;<i> &gt;&gt; &gt;&gt; work, and a more detailed explanation of the changes would be useful,
</I>&gt;<i> &gt;&gt; &gt;&gt; in
</I>&gt;<i> &gt;&gt; &gt;&gt; this group, I would include:
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;      * Hwnd.cs
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;      * XplatUICarbon.cs
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;     There are some that probably we can skip, like the System.Drawing
</I>&gt;<i> &gt;&gt; &gt;&gt; tracing facility.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;      The cleaned up patch is here:
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;      <A HREF="http://tirania.org/tmp/changes.gz">http://tirania.org/tmp/changes.gz</A>
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;      This is the diffstat.  aNot sure how to deal with this, perhaps
</I>&gt;<i> &gt;&gt; &gt;&gt; with a Google doc, where we can use colors to flag what is applied
</I>&gt;<i> and
</I>&gt;<i> &gt;&gt; &gt;&gt; what not?   Or perhaps we remove parts of the patch when we have
</I>&gt;<i> &gt;&gt; &gt;&gt; manually applied that bit?
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &lt;snip&gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101030/66158d78/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101030/66158d78/attachment-0001.html</A> 
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036182.html">[Mono-dev] Mono Winforms on Mac
</A></li>
	<LI>Next message: <A HREF="036185.html">[Mono-dev] Mono Winforms on Mac
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36184">[ date ]</a>
              <a href="thread.html#36184">[ thread ]</a>
              <a href="subject.html#36184">[ subject ]</a>
              <a href="author.html#36184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
