<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Status of non-full AOT on x86 mac
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Status%20of%20non-full%20AOT%20on%20x86%20mac&In-Reply-To=AANLkTineXzw2MwCYSos1Hi_0m8BUezZh7bRMw7cOoyxB%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036177.html">
   <LINK REL="Next"  HREF="036191.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Status of non-full AOT on x86 mac</H1>
    <B>Brian Luczkiewicz</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Status%20of%20non-full%20AOT%20on%20x86%20mac&In-Reply-To=AANLkTineXzw2MwCYSos1Hi_0m8BUezZh7bRMw7cOoyxB%40mail.gmail.com"
       TITLE="[Mono-dev] Status of non-full AOT on x86 mac">brian at sooloos.com
       </A><BR>
    <I>Sat Oct 30 21:59:32 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="036177.html">[Mono-dev] Status of non-full AOT on x86 mac
</A></li>
        <LI>Next message: <A HREF="036191.html">[Mono-dev] Status of non-full AOT on x86 mac
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36190">[ date ]</a>
              <a href="thread.html#36190">[ thread ]</a>
              <a href="subject.html#36190">[ subject ]</a>
              <a href="author.html#36190">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I took another look at this today and ended up committing a patch to my
github fork that enables --aot on x86 macs.

<A HREF="http://github.com/blucz/mono/commit/fb96f5d6387cc5c019fc00bfc89a25204fa14166">http://github.com/blucz/mono/commit/fb96f5d6387cc5c019fc00bfc89a25204fa14166</A>

It appears to work quite well--I was able to AOT compile a large (~0.5mloc)
codebase on osx and cut startup time by 7x for my app.

It would be great if you could review this and consider incorporating it
into the mono mainline.


Brian



On Fri, Oct 29, 2010 at 12:24 AM, Zoltan Varga &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">vargaz at gmail.com</A>&gt; wrote:

&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> On Wed, Oct 27, 2010 at 7:41 PM, Brian Luczkiewicz &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">brian at sooloos.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I have a cross-platform (osx+mono/ms.net) app that runs a large piece of
</I>&gt;&gt;<i> generated code at startup--on windows, 95% of the runtime of this code is in
</I>&gt;&gt;<i> the JIT compiler and ngen improves startup time for this app dramatically. I
</I>&gt;&gt;<i> was hoping to try out --aot and potentially see a corresponding improvement
</I>&gt;&gt;<i> in startup time on osx.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sadly, AOT is locked behind if !defined(__apple__) on x86, even on mono
</I>&gt;&gt;<i> 2.8.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. Are there plans to enable aot on x86 osx?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> No plans, the x86 support was only implemented to support google native
</I>&gt;<i> client which requires aot even on x86.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>  2. If not, what work is required to get this done? I'm not opposed to
</I>&gt;&gt;<i> getting my hands dirty.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> Probably not much work is needed, but it requires knowledge about mono
</I>&gt;<i> internals and osx assembler/linker tools, so it won't be easy.
</I>&gt;<i>
</I>&gt;<i>          Zoltan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101030/861592b0/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20101030/861592b0/attachment.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036177.html">[Mono-dev] Status of non-full AOT on x86 mac
</A></li>
	<LI>Next message: <A HREF="036191.html">[Mono-dev] Status of non-full AOT on x86 mac
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36190">[ date ]</a>
              <a href="thread.html#36190">[ thread ]</a>
              <a href="subject.html#36190">[ subject ]</a>
              <a href="author.html#36190">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
