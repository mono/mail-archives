<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] use locale_charset() from iconv instead of use	nl_langinfo (CODESET)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20use%20locale_charset%28%29%20from%20iconv%20instead%20of%20use%0A%09nl_langinfo%20%28CODESET%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036094.html">
   <LINK REL="Next"  HREF="036118.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] use locale_charset() from iconv instead of use	nl_langinfo (CODESET)</H1>
    <B>Robert Nagy</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20use%20locale_charset%28%29%20from%20iconv%20instead%20of%20use%0A%09nl_langinfo%20%28CODESET%29&In-Reply-To="
       TITLE="[Mono-dev] use locale_charset() from iconv instead of use	nl_langinfo (CODESET)">robert at openbsd.org
       </A><BR>
    <I>Tue Oct 19 07:31:53 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="036094.html">[Mono-dev] Some screenshots of Mono on Solaris
</A></li>
        <LI>Next message: <A HREF="036118.html">[Mono-dev] use locale_charset() from iconv instead of use nl_langinfo (CODESET)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36095">[ date ]</a>
              <a href="thread.html#36095">[ thread ]</a>
              <a href="subject.html#36095">[ subject ]</a>
              <a href="author.html#36095">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

Someone please have a look at <A HREF="http://github.com/mono/mono/pull/9">http://github.com/mono/mono/pull/9</A>


Use locale_charset() from iconv which will use nl_langinfo (CODESET) anyways but it will do canonicalization so we will get the correct charset name, because nl_langinfo (CODESET) can return different things on different systems. This at least fixes OpenBSD.

Without this building mono will end up in an exception because it's going to try to open codepage 646 instead of ascii because g_get_charset() returns the wrong one.

The testcode linked to system glib and eglib:
(t500 robert 17418)$ ./char-glib; ./char-eglib

ascii
646

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036094.html">[Mono-dev] Some screenshots of Mono on Solaris
</A></li>
	<LI>Next message: <A HREF="036118.html">[Mono-dev] use locale_charset() from iconv instead of use nl_langinfo (CODESET)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36095">[ date ]</a>
              <a href="thread.html#36095">[ thread ]</a>
              <a href="subject.html#36095">[ subject ]</a>
              <a href="author.html#36095">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
