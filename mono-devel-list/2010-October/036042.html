<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Memory usage differences between GC and OS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Memory%20usage%20differences%20between%20GC%20and%20OS&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036041.html">
   <LINK REL="Next"  HREF="036043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Memory usage differences between GC and OS</H1>
    <B>pablosantosluac at terra.es</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Memory%20usage%20differences%20between%20GC%20and%20OS&In-Reply-To="
       TITLE="[Mono-dev] Memory usage differences between GC and OS">pablosantosluac at terra.es
       </A><BR>
    <I>Tue Oct 12 10:12:36 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="036041.html">[Mono-dev] Mono 2.8 nonfunctional on MIPS
</A></li>
        <LI>Next message: <A HREF="036043.html">[Mono-dev] Memory usage differences between GC and OS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36042">[ date ]</a>
              <a href="thread.html#36042">[ thread ]</a>
              <a href="subject.html#36042">[ subject ]</a>
              <a href="author.html#36042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I could have titled it &quot;where my mem has gone?&quot; too :P

I've been talking to Mark Probst today regarding some issues and
questions related to general memory usage.

We've been testing sgen for months now and we're currently moving our
internal production server to Solaris/SPARC &amp; Mono/sgen
(MONO_GC_PARAMS=major=copying), after being able to complete our entire
PNUnit suite on SPARC.

Well, the point of the email is the following: something I've found
several times is a situation where GC.GetTotalMemory gives me something
like, let's say, 40Mb, then VIRT is something like 200Mb and RES is 80Mb.

Mark refreshed me that jitted and non-jitted code will be eating up
memory, then metadata and so on... and of course the GC internals with
things like free memory lists and so on. But, I think it would be great
for application developers to really understand how this is working and
where your memory is going, because the diff between 40Mb and 200Mb is
simply... huge!

Sometimes you find yourself calculating the mem your classes are going
to eat, to find out that you're &quot;spending&quot; more on the &quot;uncontrolled&quot;
part than the one you were carefully designing.

On Windows you can use things like Ants memory Profiler to help you
figuring out (and most of the time you encounter a HUGE free mem block),
but I think it would be great to understand it too on Mono and maybe
even be able to &quot;tweak it&quot; somehow...

Boehm GC had the drawback of being unable to free VIRT mem (something we
had to fight several times ourselves with Plastic and huge servers), but
fortunately that's not the case with sgen, but we still end up with big
differences between what &quot;gc thinks&quot; and what &quot;OS thinks&quot;.

Regards,

pablo


www.plasticscm.com
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036041.html">[Mono-dev] Mono 2.8 nonfunctional on MIPS
</A></li>
	<LI>Next message: <A HREF="036043.html">[Mono-dev] Memory usage differences between GC and OS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36042">[ date ]</a>
              <a href="thread.html#36042">[ thread ]</a>
              <a href="subject.html#36042">[ subject ]</a>
              <a href="author.html#36042">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
