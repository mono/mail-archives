<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mkbundle &amp; Assembly.GetEntryAssembly()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20mkbundle%20%26%20Assembly.GetEntryAssembly%28%29&In-Reply-To=%3CCAAZEOjsx0anTVcU_gbL4nHp7Kf8a54y6Q_eV1AvWXq6tMui_YQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044324.html">
   <LINK REL="Next"  HREF="044329.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mkbundle &amp; Assembly.GetEntryAssembly()</H1>
    <B>Rick Tillery</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20mkbundle%20%26%20Assembly.GetEntryAssembly%28%29&In-Reply-To=%3CCAAZEOjsx0anTVcU_gbL4nHp7Kf8a54y6Q_eV1AvWXq6tMui_YQ%40mail.gmail.com%3E"
       TITLE="[Mono-dev] mkbundle &amp; Assembly.GetEntryAssembly()">rtillerywork at gmail.com
       </A><BR>
    <I>Tue May 16 12:11:57 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044324.html">[Mono-dev] mkbundle &amp; Assembly.GetEntryAssembly()
</A></li>
        <LI>Next message (by thread): <A HREF="044329.html">[Mono-dev] mkbundle &amp; Assembly.GetEntryAssembly()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44326">[ date ]</a>
              <a href="thread.html#44326">[ thread ]</a>
              <a href="subject.html#44326">[ subject ]</a>
              <a href="author.html#44326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>An empty path would be interesting, but still not provide a path to the
actual entry point file. (I'll be trying the suggestion this morning, so
that may be the key to getting that).

But you mentioned that there is already a built-in way to access the
mkbundle'd EXE? I tried looking at the Modules returned by GetModules(),
but these similarly report nonexistent filenames. How would I go about
accessing the EXE within the bundle?

Thanks!
Rick

On May 15, 2017 10:31 PM, &quot;Robert Jordan&quot; &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">robertj at gmx.net</A>&gt; wrote:

On 16.05.2017 01:48, Rick Tillery wrote:

&gt;<i> Thanks! That looks like it might work in C# (we don't really have any C in
</I>&gt;<i> this project). I'll give it a try.
</I>&gt;<i>
</I>&gt;<i> However, I respectfully disagree that the path to the assembly is a good
</I>&gt;<i> choice. I understand that the Linux binary isn't the same as the .Net
</I>&gt;<i> assembly, but the EXE file is not there at all.
</I>&gt;<i>
</I>
&gt;<i>From the point of view of .NET Assembly APIs the EXE file *is* there.
</I>
You can access it by System.Reflection, you can load it (once more ;)
as it's already loaded). You can load resources from it, you can check its
meta data, assembly name, public key, etc.

Indeed, System.IO APIs won't see this file, but you don't
really expect that mkbundle's infrastructure is going to redirect
file access into the bundle, do you?

The only bug I can sense is how the mono runtime is reporting
the Assembly.Location of bundled assemblies. I'd rather
expect an empty string for Location as this is usually an
indicator that the assembly was loaded from a byte blob
rather than from a file.


Robert

_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.dot.net</A>
<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">http://lists.dot.net/mailman/listinfo/mono-devel-list</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/mono-devel-list/attachments/20170516/dc617c7c/attachment.html">http://lists.dot.net/pipermail/mono-devel-list/attachments/20170516/dc617c7c/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044324.html">[Mono-dev] mkbundle &amp; Assembly.GetEntryAssembly()
</A></li>
	<LI>Next message (by thread): <A HREF="044329.html">[Mono-dev] mkbundle &amp; Assembly.GetEntryAssembly()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44326">[ date ]</a>
              <a href="thread.html#44326">[ thread ]</a>
              <a href="subject.html#44326">[ subject ]</a>
              <a href="author.html#44326">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
