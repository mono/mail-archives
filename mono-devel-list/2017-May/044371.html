<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Crosscompiling Mono 5.0.0.100
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Crosscompiling%20Mono%205.0.0.100&In-Reply-To=%3CBN6PR21MB06260B39634D9FDAF7D298C8C2FC0%40BN6PR21MB0626.namprd21.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044368.html">
   <LINK REL="Next"  HREF="044372.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Crosscompiling Mono 5.0.0.100</H1>
    <B>Bernhard Urban</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Crosscompiling%20Mono%205.0.0.100&In-Reply-To=%3CBN6PR21MB06260B39634D9FDAF7D298C8C2FC0%40BN6PR21MB0626.namprd21.prod.outlook.com%3E"
       TITLE="[Mono-dev] Crosscompiling Mono 5.0.0.100">beurba at microsoft.com
       </A><BR>
    <I>Fri May 26 14:22:40 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044368.html">[Mono-dev] Crosscompiling Mono 5.0.0.100
</A></li>
        <LI>Next message (by thread): <A HREF="044372.html">[Mono-dev] Crosscompiling Mono 5.0.0.100
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44371">[ date ]</a>
              <a href="thread.html#44371">[ thread ]</a>
              <a href="subject.html#44371">[ subject ]</a>
              <a href="author.html#44371">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Angelo,

here's the proper fix: <A HREF="https://github.com/mono/mono/pull/4926/files">https://github.com/mono/mono/pull/4926/files</A>


-Bernhard
________________________________________
From: Mono-devel-list &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.dot.net</A>&gt; on behalf of Bernhard Urban via Mono-devel-list &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">mono-devel-list at lists.dot.net</A>&gt;
Sent: Wednesday, May 24, 2017 11:56:32 PM
To: Angelo Compagnucci
Cc: <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Crosscompiling Mono 5.0.0.100

Hello Angelo,

the culprit is this instruction &quot;mrc p15, 0, &lt;Rd&gt;, c13, c0, 3&quot; that we use to obtain some TLS related value. Apparently,  ARM926EJ-S doesn't implement opcode 3 for this coprocessor [1] (look at [2] for some nice overview), and also isn't required to per specification. Vlad is working on a fix. For what it's worth, your workaround is fine in your usecase.

Thanks for the report!
-Bernhard


[1] <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Finfocenter.arm.com%2Fhelp%2Findex.jsp%3Ftopic%3D%2Fcom.arm.doc.ddi0198e%2FI1002240.html&amp;data=02%7C01%7Cbeurba%40microsoft.com%7Ceeee8c40aafc4201dbad08d4a2efc4c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636312598096067089&amp;sdata=4QWLx9QSfiK301InH8WA1%2F6JY9FUMmQ4tayvOYvyHA8%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Finfocenter.arm.com%2Fhelp%2Findex.jsp%3Ftopic%3D%2Fcom.arm.doc.ddi0198e%2FI1002240.html&amp;data=02%7C01%7Cbeurba%40microsoft.com%7Ceeee8c40aafc4201dbad08d4a2efc4c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636312598096067089&amp;sdata=4QWLx9QSfiK301InH8WA1%2F6JY9FUMmQ4tayvOYvyHA8%3D&amp;reserved=0</A>
[2] <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fiphonedevwiki.net%2Findex.php%2FCoprocessors&amp;data=02%7C01%7Cbeurba%40microsoft.com%7Ceeee8c40aafc4201dbad08d4a2efc4c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636312598096067089&amp;sdata=UnoCzsowRgj30DiUiiP%2BfXagTXDd0DUfrUCKeyb8dqg%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fiphonedevwiki.net%2Findex.php%2FCoprocessors&amp;data=02%7C01%7Cbeurba%40microsoft.com%7Ceeee8c40aafc4201dbad08d4a2efc4c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636312598096067089&amp;sdata=UnoCzsowRgj30DiUiiP%2BfXagTXDd0DUfrUCKeyb8dqg%3D&amp;reserved=0</A>
________________________________________
From: Angelo Compagnucci &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">angelo.compagnucci at gmail.com</A>&gt;
Sent: Wednesday, May 24, 2017 9:26:07 AM
To: Bernhard Urban
Cc: <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Crosscompiling Mono 5.0.0.100

Dear Bernhard,

2017-05-24 7:19 GMT+02:00 Angelo Compagnucci &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">angelo.compagnucci at gmail.com</A>&gt;:
&gt;<i> Dear Bernhard,
</I>&gt;<i>
</I>&gt;<i> 2017-05-23 23:17 GMT+02:00 Bernhard Urban &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">beurba at microsoft.com</A>&gt;:
</I>&gt;&gt;<i> alas that isn't useful :(  for some reason the system fails somewhere in libc.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> can you do `thread apply all bt` in gdb? ideally, you pass `-O0 -g` as CFLAGS so you'll get proper line numbers.
</I>&gt;<i>
</I>&gt;<i> Sorry, should have of this before ...
</I>&gt;<i>
</I>&gt;<i> Here it is a complete dump from gdb:
</I>&gt;<i>
</I>&gt;<i> Debug info from gdb:
</I>&gt;<i>
</I>&gt;<i> [New LWP 122]
</I>&gt;<i> [New LWP 123]
</I>&gt;<i> [Thread debugging using libthread_db enabled]
</I>&gt;<i> Using host libthread_db library &quot;/lib/libthread_db.so.1&quot;.
</I>&gt;<i> 0xb6e7e268 in waitpid () from /lib/libpthread.so.0
</I>&gt;<i>   Id   Target Id         Frame
</I>&gt;<i> * 1    Thread 0xb6f75000 (LWP 121) &quot;mono&quot; 0xb6e7e268 in waitpid ()
</I>&gt;<i> from /lib/libpthread.so.0
</I>&gt;<i>   2    Thread 0xb67ff440 (LWP 122) &quot;SGen worker&quot; 0xb6e797e8 in
</I>&gt;<i> pthread_cond_wait@@GLIBC_2.4 () from /lib/libpthread.so.0
</I>&gt;<i>   3    Thread 0xb52a8440 (LWP 123) &quot;Finalizer&quot; 0xb6e7bd18 in
</I>&gt;<i> do_futex_wait () from /lib/libpthread.so.0
</I>&gt;<i>
</I>&gt;<i> Thread 3 (Thread 0xb52a8440 (LWP 123)):
</I>&gt;<i> #0  0xb6e7bd18 in do_futex_wait () from /lib/libpthread.so.0
</I>&gt;<i> #1  0xb6e7bde0 in sem_wait@@GLIBC_2.4 () from /lib/libpthread.so.0
</I>&gt;<i> #2  0x002b0d48 in mono_os_sem_wait (sem=0x4b9d98 &lt;finalizer_sem&gt;,
</I>&gt;<i> flags=MONO_SEM_FLAGS_ALERTABLE) at
</I>&gt;<i> ../../mono/utils/mono-os-semaphore.h:209
</I>&gt;<i> #3  0x002b131c in mono_coop_sem_wait (sem=0x4b9d98 &lt;finalizer_sem&gt;,
</I>&gt;<i> flags=MONO_SEM_FLAGS_ALERTABLE) at
</I>&gt;<i> ../../mono/utils/mono-coop-semaphore.h:40
</I>&gt;<i> #4  0x002b3684 in finalizer_thread (unused=0x0) at gc.c:907
</I>&gt;<i> #5  0x0026d004 in start_wrapper_internal (start_info=0x0,
</I>&gt;<i> stack_ptr=0xb52a7e04) at threads.c:837
</I>&gt;<i> #6  0x0026d188 in start_wrapper (data=0x50a948) at threads.c:889
</I>&gt;<i> #7  0x003c8ab4 in inner_start_thread (data=0x50a978) at mono-threads.c:1170
</I>&gt;<i> #8  0xb6e743f4 in start_thread () from /lib/libpthread.so.0
</I>&gt;<i> #9  0xb6dd6f18 in ?? () from /lib/libc.so.6
</I>&gt;<i> Backtrace stopped: previous frame identical to this frame (corrupt stack?)
</I>&gt;<i>
</I>&gt;<i> Thread 2 (Thread 0xb67ff440 (LWP 122)):
</I>&gt;<i> #0  0xb6e797e8 in pthread_cond_wait@@GLIBC_2.4 () from /lib/libpthread.so.0
</I>&gt;<i> #1  0x003a2564 in mono_os_cond_wait (cond=0x4c1bd0 &lt;work_cond&gt;,
</I>&gt;<i> mutex=0x4c1bb8 &lt;lock&gt;) at ../../mono/utils/mono-os-mutex.h:146
</I>&gt;<i> #2  0x003a3814 in thread_func (thread_data=0xb6cc0004) at sgen-thread-pool.c:129
</I>&gt;<i> #3  0xb6e743f4 in start_thread () from /lib/libpthread.so.0
</I>&gt;<i> #4  0xb6dd6f18 in ?? () from /lib/libc.so.6
</I>&gt;<i> Backtrace stopped: previous frame identical to this frame (corrupt stack?)
</I>&gt;<i>
</I>&gt;<i> Thread 1 (Thread 0xb6f75000 (LWP 121)):
</I>&gt;<i> #0  0xb6e7e268 in waitpid () from /lib/libpthread.so.0
</I>&gt;<i> #1  0x000f8dc0 in mono_handle_native_crash (signal=0x3ea5b8 &quot;SIGILL&quot;,
</I>&gt;<i> ctx=0xbedcda60, info=0xbedcd9e0) at mini-exceptions.c:2567
</I>&gt;<i> #2  0x0001f8bc in mono_sigill_signal_handler (_dummy=4,
</I>&gt;<i> _info=0xbedcd9e0, context=0xbedcda60) at mini-runtime.c:2773
</I>&gt;<i> #3  &lt;signal handler called&gt;
</I>&gt;<i> #4  mono_arch_have_fast_tls () at mini-arm.c:348
</I>&gt;<i> #5  0x0014494c in emit_save_lmf (cfg=0x513258, code=0x512da8 &quot;&quot;,
</I>&gt;<i> lmf_offset=8) at mini-arm.c:386
</I>&gt;<i> #6  0x00161f50 in mono_arch_emit_prolog (cfg=0x513258) at mini-arm.c:6414
</I>&gt;<i> #7  0x00175cac in mono_codegen (cfg=0x513258) at mini.c:2246
</I>&gt;<i> #8  0x0017a930 in mini_method_compile (method=0x511270,
</I>&gt;<i> opts=370223615, domain=0x4cc3b8, flags=JIT_FLAG_RUN_CCTORS, parts=0,
</I>&gt;<i> aot_method_index=-1) at mini.c:3866
</I>&gt;<i> #9  0x0017b7d0 in mono_jit_compile_method_inner (method=0x511270,
</I>&gt;<i> target_domain=0x4cc3b8, opt=370223615, error=0xbedce4c8) at
</I>&gt;<i> mini.c:4194
</I>&gt;<i> #10 0x0001d470 in mono_jit_compile_method_with_opt (method=0x511270,
</I>&gt;<i> opt=370223615, error=0xbedce4c8) at mini-runtime.c:1888
</I>&gt;<i> #11 0x0001d670 in mono_jit_compile_method (method=0x511270,
</I>&gt;<i> error=0xbedce4c8) at mini-runtime.c:1932
</I>&gt;<i> #12 0x002ba198 in mono_compile_method_checked (method=0x511270,
</I>&gt;<i> error=0xbedce4c8) at object.c:674
</I>&gt;<i> #13 0x0017b2fc in mono_jit_compile_method_inner (method=0x511200,
</I>&gt;<i> target_domain=0x4cc3b8, opt=370223615, error=0xbedce4c8) at
</I>&gt;<i> mini.c:4093
</I>&gt;<i> #14 0x0001d470 in mono_jit_compile_method_with_opt (method=0x511200,
</I>&gt;<i> opt=370223615, error=0xbedce4c8) at mini-runtime.c:1888
</I>&gt;<i> #15 0x0001d670 in mono_jit_compile_method (method=0x511200,
</I>&gt;<i> error=0xbedce4c8) at mini-runtime.c:1932
</I>&gt;<i> #16 0x000fc0dc in common_call_trampoline (regs=0xbedce5a8,
</I>&gt;<i> code=0xb6cafe00 &quot;&quot;, m=0x511200, vt=0x0, vtable_slot=0x0,
</I>&gt;<i> error=0xbedce4c8) at mini-trampolines.c:699
</I>&gt;<i> #17 0x000fc6d8 in mono_magic_trampoline (regs=0xbedce5a8,
</I>&gt;<i> code=0xb6cafe00 &quot;&quot;, arg=0x511200, tramp=0x4fe6c0
</I>&gt;<i> &quot;\020\345\334\276\200iO&quot;) at mini-trampolines.c:829
</I>&gt;<i> #18 0xb6cf406c in ?? ()
</I>&gt;<i> Backtrace stopped: previous frame identical to this frame (corrupt stack?)
</I>&gt;<i>
</I>&gt;<i> =================================================================
</I>&gt;<i> Got a SIGILL while executing native code. This usually indicates
</I>&gt;<i> a fatal error in the mono runtime or one of the native libraries
</I>&gt;<i> used by your application.
</I>&gt;<i> =================================================================
</I>
As a quick and dirty hack I modified the source of
mono/mini/mini-arch.c with this:

gboolean
mono_arch_have_fast_tls (void)
{
        return FALSE;
}

And everithing started working! So IMHO there is something wrong with
the new mechanism for selectiong TLS features.

Sincerely, Angelo

&gt;<i>
</I>&gt;&gt;<i> ________________________________________
</I>&gt;&gt;<i> From: Angelo Compagnucci &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">angelo.compagnucci at gmail.com</A>&gt;
</I>&gt;&gt;<i> Sent: Tuesday, May 23, 2017 11:04:01 PM
</I>&gt;&gt;<i> To: Bernhard Urban
</I>&gt;&gt;<i> Cc: <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> Subject: Re: [Mono-dev] Crosscompiling Mono 5.0.0.100
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Dearh Bernhard,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2017-05-23 19:54 GMT+02:00 Bernhard Urban &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">beurba at microsoft.com</A>&gt;:
</I>&gt;&gt;&gt;<i>  &gt;      Host:          arm-buildroot-linux-gnueabi
</I>&gt;&gt;&gt;<i>  &gt;      Target:        arm-buildroot-linux-gnueabi
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> so... you aren't actually cross-compiling, am I right?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm actually crosscompiling inside buildroot wich somewhat cheats.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> That's weird then, configure should pick up all the right settings. I'm curious to see the emitted code around the crash site. If you use gdb, something like `x/100i $pc-0x40` should do the trick.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> =================================================================
</I>&gt;&gt;<i> Got a SIGILL while executing native code. This usually indicates
</I>&gt;&gt;<i> a fatal error in the mono runtime or one of the native libraries
</I>&gt;&gt;<i> used by your application.
</I>&gt;&gt;<i> =================================================================
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thread 1 &quot;mono-sgen&quot; received signal SIGABRT, Aborted.
</I>&gt;&gt;<i> 0xb6cede50 in raise () from /lib/libc.so.6
</I>&gt;&gt;<i> (gdb) x/100i $pc-0x40
</I>&gt;&gt;<i>    0xb6cede10 &lt;ssignal+196&gt;:    andseq  r1, r1, r12, ror #8
</I>&gt;&gt;<i>    0xb6cede14 &lt;ssignal+200&gt;:
</I>&gt;&gt;<i>                 ; &lt;UNDEFINED&gt; instruction: 0x0010e2b8
</I>&gt;&gt;<i>    0xb6cede18 &lt;raise&gt;:  push    {r7, lr}
</I>&gt;&gt;<i>    0xb6cede1c &lt;raise+4&gt;:        mov     r2, r0
</I>&gt;&gt;<i>    0xb6cede20 &lt;raise+8&gt;:        bl      0xb6cd8650
</I>&gt;&gt;<i>    0xb6cede24 &lt;raise+12&gt;:       ldr     r1, [r0, #-1112]        ; 0xfffffba8
</I>&gt;&gt;<i>    0xb6cede28 &lt;raise+16&gt;:       mov     r12, r0
</I>&gt;&gt;<i>    0xb6cede2c &lt;raise+20&gt;:       cmp     r1, #0
</I>&gt;&gt;<i>    0xb6cede30 &lt;raise+24&gt;:       ldr     r0, [r0, #-1108]        ; 0xfffffbac
</I>&gt;&gt;<i>    0xb6cede34 &lt;raise+28&gt;:       bne     0xb6cede64 &lt;raise+76&gt;
</I>&gt;&gt;<i>    0xb6cede38 &lt;raise+32&gt;:       mov     r7, #224        ; 0xe0
</I>&gt;&gt;<i>    0xb6cede3c &lt;raise+36&gt;:       svc     0x00000000
</I>&gt;&gt;<i>    0xb6cede40 &lt;raise+40&gt;:       mov     r1, r0
</I>&gt;&gt;<i>    0xb6cede44 &lt;raise+44&gt;:       str     r0, [r12, #-1112]       ; 0xfffffba8
</I>&gt;&gt;<i>    0xb6cede48 &lt;raise+48&gt;:       mov     r7, #268        ; 0x10c
</I>&gt;&gt;<i>    0xb6cede4c &lt;raise+52&gt;:       svc     0x00000000
</I>&gt;&gt;<i> =&gt; 0xb6cede50 &lt;raise+56&gt;:       cmn     r0, #4096       ; 0x1000
</I>&gt;&gt;<i>    0xb6cede54 &lt;raise+60&gt;:       mov     r3, r0
</I>&gt;&gt;<i>    0xb6cede58 &lt;raise+64&gt;:       bhi     0xb6cede80 &lt;raise+104&gt;
</I>&gt;&gt;<i>    0xb6cede5c &lt;raise+68&gt;:       mov     r0, r3
</I>&gt;&gt;<i>    0xb6cede60 &lt;raise+72&gt;:       pop     {r7, pc}
</I>&gt;&gt;<i>    0xb6cede64 &lt;raise+76&gt;:       cmp     r0, #0
</I>&gt;&gt;<i> ---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
</I>&gt;&gt;<i>    0xb6cede68 &lt;raise+80&gt;:       bgt     0xb6cede48 &lt;raise+48&gt;
</I>&gt;&gt;<i>    0xb6cede6c &lt;raise+84&gt;:       bic     r3, r0, #-2147483648    ; 0x80000000
</I>&gt;&gt;<i>    0xb6cede70 &lt;raise+88&gt;:       cmp     r3, #0
</I>&gt;&gt;<i>    0xb6cede74 &lt;raise+92&gt;:       rsbne   r0, r0, #0
</I>&gt;&gt;<i>    0xb6cede78 &lt;raise+96&gt;:       moveq   r0, r1
</I>&gt;&gt;<i>    0xb6cede7c &lt;raise+100&gt;:      b       0xb6cede48 &lt;raise+48&gt;
</I>&gt;&gt;<i>    0xb6cede80 &lt;raise+104&gt;:
</I>&gt;&gt;<i>     ldr r2, [pc, #20]   ; 0xb6cede9c &lt;raise+132&gt;
</I>&gt;&gt;<i>    0xb6cede84 &lt;raise+108&gt;:      rsb     r1, r0, #0
</I>&gt;&gt;<i>    0xb6cede88 &lt;raise+112&gt;:      ldr     r2, [pc, r2]
</I>&gt;&gt;<i>    0xb6cede8c &lt;raise+116&gt;:      bl      0xb6cd8650
</I>&gt;&gt;<i>    0xb6cede90 &lt;raise+120&gt;:      mvn     r3, #0
</I>&gt;&gt;<i>    0xb6cede94 &lt;raise+124&gt;:      str     r1, [r0, r2]
</I>&gt;&gt;<i>    0xb6cede98 &lt;raise+128&gt;:      b       0xb6cede5c &lt;raise+68&gt;
</I>&gt;&gt;<i>    0xb6cede9c &lt;raise+132&gt;:      andseq  lr, r0, r8, lsr #4
</I>&gt;&gt;<i>    0xb6cedea0 &lt;killpg&gt;: cmp     r0, #0
</I>&gt;&gt;<i>    0xb6cedea4 &lt;killpg+4&gt;:       push    {lr}            ; (str lr, [sp, #-4]!)
</I>&gt;&gt;<i>    0xb6cedea8 &lt;killpg+8&gt;:       blt     0xb6cedeb8 &lt;killpg+24&gt;
</I>&gt;&gt;<i>    0xb6cedeac &lt;killpg+12&gt;:      rsb     r0, r0, #0
</I>&gt;&gt;<i>    0xb6cedeb0 &lt;killpg+16&gt;:      pop     {lr}            ; (ldr lr, [sp], #4)
</I>&gt;&gt;<i>    0xb6cedeb4 &lt;killpg+20&gt;:      b       0xb6cee120 &lt;kill&gt;
</I>&gt;&gt;<i>    0xb6cedeb8 &lt;killpg+24&gt;:
</I>&gt;&gt;<i>     ldr r3, [pc, #20]   ; 0xb6ceded4 &lt;killpg+52&gt;
</I>&gt;&gt;<i> ---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
</I>&gt;&gt;<i>    0xb6cedebc &lt;killpg+28&gt;:      bl      0xb6cd8650
</I>&gt;&gt;<i>    0xb6cedec0 &lt;killpg+32&gt;:      ldr     r3, [pc, r3]
</I>&gt;&gt;<i>    0xb6cedec4 &lt;killpg+36&gt;:      mov     r2, #22
</I>&gt;&gt;<i>    0xb6cedec8 &lt;killpg+40&gt;:      str     r2, [r0, r3]
</I>&gt;&gt;<i>    0xb6cedecc &lt;killpg+44&gt;:      mvn     r0, #0
</I>&gt;&gt;<i>    0xb6ceded0 &lt;killpg+48&gt;:      pop     {pc}            ; (ldr pc, [sp], #4)
</I>&gt;&gt;<i>    0xb6ceded4 &lt;killpg+52&gt;:
</I>&gt;&gt;<i>                 ; &lt;UNDEFINED&gt; instruction: 0x0010e1f0
</I>&gt;&gt;<i>    0xb6ceded8:  push    {r4, r5, r6, r7, lr}
</I>&gt;&gt;<i>    0xb6cededc:  ldr     r6, [pc, #324]  ; 0xb6cee028
</I>&gt;&gt;<i>    0xb6cedee0:  subs    r5, r1, #0
</I>&gt;&gt;<i>    0xb6cedee4:  sub     sp, sp, #284    ; 0x11c
</I>&gt;&gt;<i>    0xb6cedee8:  mov     r7, r0
</I>&gt;&gt;<i>    0xb6cedeec:  mov     r4, r2
</I>&gt;&gt;<i>    0xb6cedef0:  add     r6, pc, r6
</I>&gt;&gt;<i>    0xb6cedef4:  beq     0xb6cedf28
</I>&gt;&gt;<i>    0xb6cedef8:  mov     r1, r5
</I>&gt;&gt;<i>    0xb6cedefc:  ldr     r3, [r1], #4
</I>&gt;&gt;<i>    0xb6cedf00:  add     r0, sp, #12
</I>&gt;&gt;<i>    0xb6cedf04:  mov     r2, #128        ; 0x80
</I>&gt;&gt;<i>    0xb6cedf08:  str     r3, [sp]
</I>&gt;&gt;<i>    0xb6cedf0c:  bl      0xb6d3d7a0 &lt;memcpy&gt;
</I>&gt;&gt;<i>    0xb6cedf10:  ldr     r3, [r5, #132]  ; 0x84
</I>&gt;&gt;<i> ---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
</I>&gt;&gt;<i>    0xb6cedf14:  str     r3, [sp, #4]
</I>&gt;&gt;<i>    0xb6cedf18:  tst     r3, #67108864   ; 0x4000000
</I>&gt;&gt;<i>    0xb6cedf1c:  beq     0xb6cedfa8
</I>&gt;&gt;<i>    0xb6cedf20:  ldr     r3, [r5, #136]  ; 0x88
</I>&gt;&gt;<i>    0xb6cedf24:  str     r3, [sp, #8]
</I>&gt;&gt;<i>    0xb6cedf28:  cmp     r4, #0
</I>&gt;&gt;<i>    0xb6cedf2c:  addne   r2, sp, #140    ; 0x8c
</I>&gt;&gt;<i>    0xb6cedf30:  moveq   r2, r4
</I>&gt;&gt;<i>    0xb6cedf34:  cmp     r5, #0
</I>&gt;&gt;<i>    0xb6cedf38:  mov     r0, r7
</I>&gt;&gt;<i>    0xb6cedf3c:  movne   r1, sp
</I>&gt;&gt;<i>    0xb6cedf40:  moveq   r1, r5
</I>&gt;&gt;<i>    0xb6cedf44:  mov     r3, #8
</I>&gt;&gt;<i>    0xb6cedf48:  mov     r7, #174        ; 0xae
</I>&gt;&gt;<i>    0xb6cedf4c:  svc     0x00000000
</I>&gt;&gt;<i>    0xb6cedf50:  cmn     r0, #4096       ; 0x1000
</I>&gt;&gt;<i>    0xb6cedf54:  mov     r5, r0
</I>&gt;&gt;<i>    0xb6cedf58:  bhi     0xb6cee00c
</I>&gt;&gt;<i>    0xb6cedf5c:  adds    r3, r4, #0
</I>&gt;&gt;<i>    0xb6cedf60:  movne   r3, #1
</I>&gt;&gt;<i>    0xb6cedf64:  cmp     r0, #0
</I>&gt;&gt;<i>    0xb6cedf68:  movlt   r3, #0
</I>&gt;&gt;<i>    0xb6cedf6c:  cmp     r3, #0
</I>&gt;&gt;<i> ---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
</I>&gt;&gt;<i>    0xb6cedf70:  beq     0xb6cedf9c
</I>&gt;&gt;<i>    0xb6cedf74:  ldr     r3, [sp, #140]  ; 0x8c
</I>&gt;&gt;<i>    0xb6cedf78:  mov     r0, r4
</I>&gt;&gt;<i>    0xb6cedf7c:  str     r3, [r0], #4
</I>&gt;&gt;<i>    0xb6cedf80:  mov     r2, #128        ; 0x80
</I>&gt;&gt;<i>    0xb6cedf84:  add     r1, sp, #152    ; 0x98
</I>&gt;&gt;<i>    0xb6cedf88:  bl      0xb6d3d7a0 &lt;memcpy&gt;
</I>&gt;&gt;<i>    0xb6cedf8c:  ldr     r2, [sp, #144]  ; 0x90
</I>&gt;&gt;<i>    0xb6cedf90:  ldr     r3, [sp, #148]  ; 0x94
</I>&gt;&gt;<i>    0xb6cedf94:  str     r2, [r4, #132]  ; 0x84
</I>&gt;&gt;<i>    0xb6cedf98:  str     r3, [r4, #136]  ; 0x88
</I>&gt;&gt;<i>    0xb6cedf9c:  mov     r0, r5
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The file command reports:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /usr/bin/mono-sgen: ELF 32-bit LSB executable, ARM, EABI5 version 1
</I>&gt;&gt;<i> (SYSV), dynamically linked, interpreter /lib/ld-linux.so.3, for
</I>&gt;&gt;<i> GNU/Linux 2.6.16, stripped
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So the cross compilation went well.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sincerely, Angelo
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -Bernhard
</I>&gt;&gt;&gt;<i> ________________________________________
</I>&gt;&gt;&gt;<i> From: Angelo Compagnucci &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">angelo.compagnucci at gmail.com</A>&gt;
</I>&gt;&gt;&gt;<i> Sent: Tuesday, May 23, 2017 6:35:06 PM
</I>&gt;&gt;&gt;<i> To: Bernhard Urban
</I>&gt;&gt;&gt;<i> Cc: <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;<i> Subject: Re: [Mono-dev] Crosscompiling Mono 5.0.0.100
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hello Bernhard,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The recpie is this one:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ################################################################################
</I>&gt;&gt;&gt;<i> #
</I>&gt;&gt;&gt;<i> # mono
</I>&gt;&gt;&gt;<i> #
</I>&gt;&gt;&gt;<i> ################################################################################
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> MONO_VERSION = 5.0.0.100
</I>&gt;&gt;&gt;<i> MONO_SITE = <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fdownload.mono-project.com%2Fsources%2Fmono&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C25ae3075088c4b176de708d4a1f9c451%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311541495053555&amp;sdata=gh4wrnniTrAEH5C7lGkDBF8dLLusjvGNkJR9KCkHzH4%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fdownload.mono-project.com%2Fsources%2Fmono&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C25ae3075088c4b176de708d4a1f9c451%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311541495053555&amp;sdata=gh4wrnniTrAEH5C7lGkDBF8dLLusjvGNkJR9KCkHzH4%3D&amp;reserved=0</A>
</I>&gt;&gt;&gt;<i> MONO_SOURCE = mono-$(MONO_VERSION).tar.bz2
</I>&gt;&gt;&gt;<i> MONO_LICENSE = GPL-2.0 or MIT (compiler, tools), MIT (libs) or commercial
</I>&gt;&gt;&gt;<i> MONO_LICENSE_FILES = LICENSE mcs/COPYING eglib/COPYING \
</I>&gt;&gt;&gt;<i>     external/Newtonsoft.Json/Tools/7-zip/copying.txt
</I>&gt;&gt;&gt;<i> MONO_INSTALL_STAGING = YES
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ## Mono native
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> # patching configure.ac
</I>&gt;&gt;&gt;<i> MONO_AUTORECONF = YES
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> # Disable managed code (mcs folder) from building
</I>&gt;&gt;&gt;<i> MONO_CONF_OPTS = --with-mcs-docs=no \
</I>&gt;&gt;&gt;<i>     --with-ikvm-native=no \
</I>&gt;&gt;&gt;<i>     --enable-minimal=profiler,aot \
</I>&gt;&gt;&gt;<i>     --disable-mcs-build \
</I>&gt;&gt;&gt;<i>     --with-xen_opt=no \
</I>&gt;&gt;&gt;<i>     --disable-btls \
</I>&gt;&gt;&gt;<i>     --enable-static
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> # The libraries have been built by the host-mono build. Since they are
</I>&gt;&gt;&gt;<i> # architecture-independent, we simply copy them to the target.
</I>&gt;&gt;&gt;<i> define MONO_INSTALL_LIBS
</I>&gt;&gt;&gt;<i>     rsync -av --exclude=*.so --exclude=*.mdb \
</I>&gt;&gt;&gt;<i>         $(HOST_DIR)/usr/lib/mono $(TARGET_DIR)/usr/lib/
</I>&gt;&gt;&gt;<i> endef
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> MONO_POST_INSTALL_TARGET_HOOKS += MONO_INSTALL_LIBS
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ifeq ($(BR2_PACKAGE_LIBICONV),y)
</I>&gt;&gt;&gt;<i> MONO_DEPENDENCIES += libiconv
</I>&gt;&gt;&gt;<i> endif
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> MONO_DEPENDENCIES += host-mono
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ## Mono managed
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> HOST_MONO_CONF_OPTS = --with-mcs-docs=no \
</I>&gt;&gt;&gt;<i>     --disable-libraries \
</I>&gt;&gt;&gt;<i>     --with-ikvm-native=no \
</I>&gt;&gt;&gt;<i>     --enable-minimal=profiler,aot \
</I>&gt;&gt;&gt;<i>     --with-xen_opt=no \
</I>&gt;&gt;&gt;<i>     --disable-btls \
</I>&gt;&gt;&gt;<i>     --enable-static
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> # ensure monolite is used
</I>&gt;&gt;&gt;<i> HOST_MONO_MAKE_OPTS += EXTERNAL_MCS=false
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> HOST_MONO_DEPENDENCIES = host-monolite host-gettext
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> define HOST_MONO_SETUP_MONOLITE
</I>&gt;&gt;&gt;<i>     rm -rf $(@D)/mcs/class/lib/monolite
</I>&gt;&gt;&gt;<i>     (cd $(@D)/mcs/class/lib; ln -s $(HOST_DIR)/usr/lib/monolite monolite)
</I>&gt;&gt;&gt;<i> endef
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> HOST_MONO_POST_CONFIGURE_HOOKS += HOST_MONO_SETUP_MONOLITE
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> $(eval $(autotools-package))
</I>&gt;&gt;&gt;<i> $(eval $(host-autotools-package))
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The package is compiled in two phases: the first compiles host-mono,
</I>&gt;&gt;&gt;<i> which in reality only compiles the libraries using monolite. Then the
</I>&gt;&gt;&gt;<i> recipe compiles mono native.
</I>&gt;&gt;&gt;<i> All the cross compiling options is passed to the recipe by buildroot.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Configure output:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>         mcs source:    mcs
</I>&gt;&gt;&gt;<i>         C# Compiler:   roslyn
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>    Engine:
</I>&gt;&gt;&gt;<i>         Host:          arm-buildroot-linux-gnueabi
</I>&gt;&gt;&gt;<i>         Target:        arm-buildroot-linux-gnueabi
</I>&gt;&gt;&gt;<i>         GC:            sgen (concurrent by default) and Included Boehm
</I>&gt;&gt;&gt;<i> GC with typed GC and parallel mark
</I>&gt;&gt;&gt;<i>         TLS:           __thread
</I>&gt;&gt;&gt;<i>         SIGALTSTACK:   yes
</I>&gt;&gt;&gt;<i>         Engine:        Building and using the JIT
</I>&gt;&gt;&gt;<i>         BigArrays:     no
</I>&gt;&gt;&gt;<i>         DTrace:        no
</I>&gt;&gt;&gt;<i>         LLVM Back End: no (dynamically loaded: no)
</I>&gt;&gt;&gt;<i>         Interpreter:   no
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>    Libraries:
</I>&gt;&gt;&gt;<i>         .NET 4.x:        no
</I>&gt;&gt;&gt;<i>         Xamarin.Android: no
</I>&gt;&gt;&gt;<i>         Xamarin.iOS:     no
</I>&gt;&gt;&gt;<i>         Xamarin.WatchOS: no
</I>&gt;&gt;&gt;<i>         Xamarin.TVOS:    no
</I>&gt;&gt;&gt;<i>         Xamarin.Mac:     no
</I>&gt;&gt;&gt;<i>         Windows AOT:     no
</I>&gt;&gt;&gt;<i>         Orbis:           no
</I>&gt;&gt;&gt;<i>         Test profiles:   AOT Full (no), AOT Hybrid (no)
</I>&gt;&gt;&gt;<i>         JNI support:
</I>&gt;&gt;&gt;<i>         libgdiplus:      assumed to be installed
</I>&gt;&gt;&gt;<i>         zlib:
</I>&gt;&gt;&gt;<i>         BTLS:            no
</I>&gt;&gt;&gt;<i>         Disabled:      profiler,aot
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Consider that the same recipe with mono 4.8.1.0 works like expected.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Sincerely, Angelo
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2017-05-23 18:21 GMT+02:00 Bernhard Urban &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">beurba at microsoft.com</A>&gt;:
</I>&gt;&gt;&gt;&gt;<i> How does your configure line look like and what's the output?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> -Bernhard
</I>&gt;&gt;&gt;&gt;<i> ________________________________________
</I>&gt;&gt;&gt;&gt;<i> From: Angelo Compagnucci &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">angelo.compagnucci at gmail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> Sent: Tuesday, May 23, 2017 6:07:07 PM
</I>&gt;&gt;&gt;&gt;<i> To: Bernhard Urban
</I>&gt;&gt;&gt;&gt;<i> Cc: <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;&gt;<i> Subject: Re: [Mono-dev] Crosscompiling Mono 5.0.0.100
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hello Bernhard,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 2017-05-23 17:21 GMT+02:00 Bernhard Urban &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">beurba at microsoft.com</A>&gt;:
</I>&gt;&gt;&gt;&gt;&gt;<i> Hello Angelo,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> could you install gdb (or lldb) on your target?  It looks like the target device doesn't support some instructions that mono generates (hence SIGILL). It would be useful to get a native stack trace, or a disassembly around the crash site.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I have gdb but I'm not having success with a backtrace, I'll try more!
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> What CPU architecture/platform are you targeting?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Qemu versatile, so it's an ARM926EJ-S
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> That might be helpful as well: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.mono-project.com%2Fdocs%2Fdebug%2Bprofile%2Fdebug%2F&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C843ac485cb334abb79e208d4a1f5db83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311524711368693&amp;sdata=ZWTL2w5DPPR2ldn8JWj6wV5FxTGLpKSijP6VG8DpNu0%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.mono-project.com%2Fdocs%2Fdebug%2Bprofile%2Fdebug%2F&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C843ac485cb334abb79e208d4a1f5db83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311524711368693&amp;sdata=ZWTL2w5DPPR2ldn8JWj6wV5FxTGLpKSijP6VG8DpNu0%3D&amp;reserved=0</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I'm looking at it!
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thanks!
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> -Bernhard
</I>&gt;&gt;&gt;&gt;&gt;<i> ________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> From: Mono-devel-list &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.dot.net</A>&gt; on behalf of Angelo Compagnucci &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">angelo.compagnucci at gmail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;&gt;<i> Sent: Tuesday, May 23, 2017 2:43:48 PM
</I>&gt;&gt;&gt;&gt;&gt;<i> To: <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> Subject: [Mono-dev] Crosscompiling Mono 5.0.0.100
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Hello developers,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I'm trying to crosscompile mono for qemu versatile with the buildroot
</I>&gt;&gt;&gt;&gt;&gt;<i> crosscompiling system. More precisely, I'm trying to update the recipe
</I>&gt;&gt;&gt;&gt;&gt;<i> bundled with buildroot for mono 4.8.1.100.
</I>&gt;&gt;&gt;&gt;&gt;<i> I'm actually not a novice in this sort of thing, I actually
</I>&gt;&gt;&gt;&gt;&gt;<i> contributed the recipe in the first place and contributed several
</I>&gt;&gt;&gt;&gt;&gt;<i> patches to the mono build system to be cross compilable and musl
</I>&gt;&gt;&gt;&gt;&gt;<i> compatible.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Actually I have a working recipe, the same one i use for 4.8.1.100 and
</I>&gt;&gt;&gt;&gt;&gt;<i> which works, and I can successfully compile mono 5.0.0.100.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Unfortunately, compiling a simple hello world produces this error:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # mcs hello.cs
</I>&gt;&gt;&gt;&gt;&gt;<i> Stacktrace:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>   at &lt;unknown&gt; &lt;0xffffffff&gt;
</I>&gt;&gt;&gt;&gt;&gt;<i>   at Mono.SafeStringMarshal.get_Value () [0x0001a] in
</I>&gt;&gt;&gt;&gt;&gt;<i> &lt;a1ccf43d50c94435a9f0fcab25017dca&gt;:0
</I>&gt;&gt;&gt;&gt;&gt;<i>   at System.Environment.internalGetEnvironmentVariable (string)
</I>&gt;&gt;&gt;&gt;&gt;<i> [0x0000c] in &lt;a1ccf43d50c94435a9f0fcab25017dca&gt;:0
</I>&gt;&gt;&gt;&gt;&gt;<i>   at System.Environment.GetEnvironmentVariable (string) [0x00000] in
</I>&gt;&gt;&gt;&gt;&gt;<i> &lt;a1ccf43d50c94435a9f0fcab25017dca&gt;:0
</I>&gt;&gt;&gt;&gt;&gt;<i>   at Mono.CSharp.Driver.Main (string[]) [0x00000] in
</I>&gt;&gt;&gt;&gt;&gt;<i> &lt;65e20f41151e464c8d313246de15d1a3&gt;:0
</I>&gt;&gt;&gt;&gt;&gt;<i>   at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_int_object
</I>&gt;&gt;&gt;&gt;&gt;<i> (object,intptr,intptr,intptr) [0x00054] in
</I>&gt;&gt;&gt;&gt;&gt;<i> &lt;65e20f41151e464c8d313246de15d1a3&gt;:0
</I>&gt;&gt;&gt;&gt;&gt;<i> /proc/self/maps:
</I>&gt;&gt;&gt;&gt;&gt;<i> 00008000-00299000 r-xp 00000000 08:00 3367       /usr/bin/mono-sgen
</I>&gt;&gt;&gt;&gt;&gt;<i> 002a0000-002a2000 rwxp 00290000 08:00 3367       /usr/bin/mono-sgen
</I>&gt;&gt;&gt;&gt;&gt;<i> 002a2000-0033b000 rwxp 00000000 00:00 0          [heap]
</I>&gt;&gt;&gt;&gt;&gt;<i> b4c91000-b4f09000 r-xp 00000000 08:00 3263
</I>&gt;&gt;&gt;&gt;&gt;<i> /usr/lib/mono/gac/System/4.0.0.0__b77a5c561934e089/System.dll
</I>&gt;&gt;&gt;&gt;&gt;<i> b4f09000-b5000000 r-xp 00000000 08:00 2599
</I>&gt;&gt;&gt;&gt;&gt;<i> /usr/lib/mono/gac/System.Core/4.0.0.0__b77a5c561934e089/System.Core.dll
</I>&gt;&gt;&gt;&gt;&gt;<i> b5000000-b5021000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b5021000-b5100000 ---p 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b51a9000-b51aa000 ---p 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b51aa000-b52a9000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b52a9000-b5652000 r-xp 00000000 08:00 1491       /usr/lib/mono/4.5/mscorlib.dll
</I>&gt;&gt;&gt;&gt;&gt;<i> b5652000-b5800000 r-xp 00000000 08:00 1270       /usr/lib/mono/4.5/mcs.exe
</I>&gt;&gt;&gt;&gt;&gt;<i> b5800000-b6000000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6000000-b6001000 ---p 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6001000-b6c00000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6c70000-b6cf0000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6cf2000-b6d0b000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6d0b000-b6d3a000 ---p 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6d3a000-b6d4a000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6d4a000-b6e7d000 r-xp 00000000 08:00 3567       /lib/libc-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6e7d000-b6e84000 ---p 00133000 08:00 3567       /lib/libc-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6e84000-b6e86000 r-xp 00132000 08:00 3567       /lib/libc-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6e86000-b6e87000 rwxp 00134000 08:00 3567       /lib/libc-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6e87000-b6e8a000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6e8a000-b6eab000 r-xp 00000000 08:00 543        /lib/libgcc_s.so.1
</I>&gt;&gt;&gt;&gt;&gt;<i> b6eab000-b6eb2000 ---p 00021000 08:00 543        /lib/libgcc_s.so.1
</I>&gt;&gt;&gt;&gt;&gt;<i> b6eb2000-b6eb3000 rwxp 00020000 08:00 543        /lib/libgcc_s.so.1
</I>&gt;&gt;&gt;&gt;&gt;<i> b6eb3000-b6ec9000 r-xp 00000000 08:00 991        /lib/libpthread-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6ec9000-b6ed0000 ---p 00016000 08:00 991        /lib/libpthread-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6ed0000-b6ed1000 r-xp 00015000 08:00 991        /lib/libpthread-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6ed1000-b6ed2000 rwxp 00016000 08:00 991        /lib/libpthread-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6ed2000-b6ed4000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6ed4000-b6ed8000 r-xp 00000000 08:00 209        /lib/libdl-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6ed8000-b6edf000 ---p 00004000 08:00 209        /lib/libdl-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6edf000-b6ee0000 r-xp 00003000 08:00 209        /lib/libdl-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6ee0000-b6ee1000 rwxp 00004000 08:00 209        /lib/libdl-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6ee1000-b6ee7000 r-xp 00000000 08:00 1327       /lib/librt-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6ee7000-b6eee000 ---p 00006000 08:00 1327       /lib/librt-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6eee000-b6eef000 r-xp 00005000 08:00 1327       /lib/librt-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6eef000-b6ef0000 rwxp 00006000 08:00 1327       /lib/librt-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6ef0000-b6f8d000 r-xp 00000000 08:00 207        /lib/libm-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6f8d000-b6f95000 ---p 0009d000 08:00 207        /lib/libm-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6f95000-b6f96000 r-xp 0009d000 08:00 207        /lib/libm-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6f96000-b6f97000 rwxp 0009e000 08:00 207        /lib/libm-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6f97000-b6fb7000 r-xp 00000000 08:00 2447       /lib/ld-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6fb7000-b6fb8000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6fb8000-b6fb9000 rwxs 00000000 00:0c 225        /dev/shm/mono.110
</I>&gt;&gt;&gt;&gt;&gt;<i> b6fb9000-b6fba000 ---p 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6fba000-b6fbb000 r-xp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6fbb000-b6fbe000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;&gt;&gt;<i> b6fbe000-b6fbf000 r-xp 0001f000 08:00 2447       /lib/ld-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> b6fbf000-b6fc0000 rwxp 00020000 08:00 2447       /lib/ld-2.18.so
</I>&gt;&gt;&gt;&gt;&gt;<i> bec63000-bec84000 rw-p 00000000 00:00 0          [stack]
</I>&gt;&gt;&gt;&gt;&gt;<i> bee69000-bee6a000 r-xp 00000000 00:00 0          [sigpage]
</I>&gt;&gt;&gt;&gt;&gt;<i> ffff0000-ffff1000 r-xp 00000000 00:00 0          [vectors]
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Native stacktrace:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Debug info from gdb:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> mono_gdb_render_native_backtraces not supported on this platform,
</I>&gt;&gt;&gt;&gt;&gt;<i> unable to find gdb or lldb
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> =================================================================
</I>&gt;&gt;&gt;&gt;&gt;<i> Got a SIGILL while executing native code. This usually indicates
</I>&gt;&gt;&gt;&gt;&gt;<i> a fatal error in the mono runtime or one of the native libraries
</I>&gt;&gt;&gt;&gt;&gt;<i> used by your application.
</I>&gt;&gt;&gt;&gt;&gt;<i> =================================================================
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Aborted
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I've not followed too closely the latests development bits for mono 5
</I>&gt;&gt;&gt;&gt;&gt;<i> and I'm asking you some advice to understand what's going on.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thank your for your time!
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;&gt;<i> Profile: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C45f4a2e117e24f05457c08d4a1d977cd%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311402805633277&amp;sdata=5c%2B%2FVLvlqXKfMT%2FrWza5OzHG6rIOTizHCIx%2BNO5FPWc%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C45f4a2e117e24f05457c08d4a1d977cd%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311402805633277&amp;sdata=5c%2B%2FVLvlqXKfMT%2FrWza5OzHG6rIOTizHCIx%2BNO5FPWc%3D&amp;reserved=0</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.dot.net</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fmono-devel-list&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C45f4a2e117e24f05457c08d4a1d977cd%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311402805633277&amp;sdata=9BYjnZLHRW%2FzaNJWZ88dN%2BSfPka1fDh51ooKtzA2aGM%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fmono-devel-list&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C45f4a2e117e24f05457c08d4a1d977cd%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311402805633277&amp;sdata=9BYjnZLHRW%2FzaNJWZ88dN%2BSfPka1fDh51ooKtzA2aGM%3D&amp;reserved=0</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;<i> Profile: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C843ac485cb334abb79e208d4a1f5db83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311524711368693&amp;sdata=JscpGNCYRmwrNeRGtc7jza5ZRiLSC2Ll9YbpYn02hc8%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C843ac485cb334abb79e208d4a1f5db83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311524711368693&amp;sdata=JscpGNCYRmwrNeRGtc7jza5ZRiLSC2Ll9YbpYn02hc8%3D&amp;reserved=0</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Profile: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C25ae3075088c4b176de708d4a1f9c451%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311541495053555&amp;sdata=wYlpKZ7x0VxrFBN25TrRNW8OJt8%2FbwWMDPDvj6EaQSE%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C25ae3075088c4b176de708d4a1f9c451%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311541495053555&amp;sdata=wYlpKZ7x0VxrFBN25TrRNW8OJt8%2FbwWMDPDvj6EaQSE%3D&amp;reserved=0</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Profile: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C91e7175d17ba4b85b6d408d4a21f560b%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311702860949950&amp;sdata=wjU6u%2Bc%2FqEjtzxtt%2FqGYfYKBhhJ9K1wVMx5rf8t1CcU%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C91e7175d17ba4b85b6d408d4a21f560b%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311702860949950&amp;sdata=wjU6u%2Bc%2FqEjtzxtt%2FqGYfYKBhhJ9K1wVMx5rf8t1CcU%3D&amp;reserved=0</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Profile: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7Ceeee8c40aafc4201dbad08d4a2efc4c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636312598096067089&amp;sdata=z81Gsdu2jXk7IAfHZi1cqtLr%2FhOcJTc%2FrV25M7Pps6c%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7Ceeee8c40aafc4201dbad08d4a2efc4c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636312598096067089&amp;sdata=z81Gsdu2jXk7IAfHZi1cqtLr%2FhOcJTc%2FrV25M7Pps6c%3D&amp;reserved=0</A>
</I>


--
Profile: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7Ceeee8c40aafc4201dbad08d4a2efc4c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636312598096067089&amp;sdata=z81Gsdu2jXk7IAfHZi1cqtLr%2FhOcJTc%2FrV25M7Pps6c%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7Ceeee8c40aafc4201dbad08d4a2efc4c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636312598096067089&amp;sdata=z81Gsdu2jXk7IAfHZi1cqtLr%2FhOcJTc%2FrV25M7Pps6c%3D&amp;reserved=0</A>
_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.dot.net</A>
<A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fmono-devel-list&amp;data=02%7C01%7Cbeurba%40microsoft.com%7Ceeee8c40aafc4201dbad08d4a2efc4c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636312598096067089&amp;sdata=ZtNEVSOfq4kCfEB4ybaA6FOALWXQN5LMypDeWhQLrQM%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fmono-devel-list&amp;data=02%7C01%7Cbeurba%40microsoft.com%7Ceeee8c40aafc4201dbad08d4a2efc4c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636312598096067089&amp;sdata=ZtNEVSOfq4kCfEB4ybaA6FOALWXQN5LMypDeWhQLrQM%3D&amp;reserved=0</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044368.html">[Mono-dev] Crosscompiling Mono 5.0.0.100
</A></li>
	<LI>Next message (by thread): <A HREF="044372.html">[Mono-dev] Crosscompiling Mono 5.0.0.100
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44371">[ date ]</a>
              <a href="thread.html#44371">[ thread ]</a>
              <a href="subject.html#44371">[ subject ]</a>
              <a href="author.html#44371">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
