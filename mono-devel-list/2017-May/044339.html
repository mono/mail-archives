<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono native crash when we call a method Continue from	CoreCLR debugger callback.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20native%20crash%20when%20we%20call%20a%20method%20Continue%20from%0A%09CoreCLR%20debugger%20callback.&In-Reply-To=%3C1571501495374076%40web34g.yandex.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044335.html">
   <LINK REL="Next"  HREF="044341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono native crash when we call a method Continue from	CoreCLR debugger callback.</H1>
    <B>Mikhail Filippov</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20native%20crash%20when%20we%20call%20a%20method%20Continue%20from%0A%09CoreCLR%20debugger%20callback.&In-Reply-To=%3C1571501495374076%40web34g.yandex.ru%3E"
       TITLE="[Mono-dev] Mono native crash when we call a method Continue from	CoreCLR debugger callback.">mikhail at filippov.me
       </A><BR>
    <I>Sun May 21 13:41:16 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044335.html">[Mono-dev] ☑cool stuff
</A></li>
        <LI>Next message (by thread): <A HREF="044341.html">[Mono-dev] Mono native crash when we call a method Continue from CoreCLR debugger callback.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44339">[ date ]</a>
              <a href="thread.html#44339">[ thread ]</a>
              <a href="subject.html#44339">[ subject ]</a>
              <a href="author.html#44339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, all. We have a native crash in mono:

(lldb) bt
* thread #15, name = 'tid_4303', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)
  * frame #0: 0x0000000000000000
    frame #1: 0x000000010a319fe1
    frame #2: 0x0000000109300fd3
    frame #3: 0x000000010a314a96
    frame #4: 0x00000001093725a1 libmscordbi.dylib`ShimProxyCallback::QueueCreateProcess(this=0x00000001036ddcb0, args=(m_pCallback1 = 0x00000001036d8110, m_pCallback2 = 0x00000001036da7f0, m_pCallback3 = 0x00000001036da440))::CreateProcessEvent::Dispatch(ManagedEvent::DispatchArgs) at shimcallback.cpp:348
    frame #5: 0x0000000109411a88 libmscordbi.dylib`CordbProcess::DispatchRCEvent(this=0x0000000105180400) at process.cpp:4692
    frame #6: 0x000000010942ea03 libmscordbi.dylib`CordbRCEventThread::FlushQueuedEvents(this=0x00000001036d2580, process=0x0000000105180400) at process.cpp:10270
    frame #7: 0x000000010942f80d libmscordbi.dylib`CordbRCEventThread::ThreadProc(this=0x00000001036d2580) at process.cpp:10525
    frame #8: 0x000000010942fbac libmscordbi.dylib`CordbRCEventThread::ThreadProc(parameter=0x00000001036d2580) at process.cpp:10591
    frame #9: 0x0000000109dfe004 libmscordaccore.dylib`CorUnix::CPalThread::ThreadEntry(pvParam=0x0000000105182e00) at thread.cpp:1730
    frame #10: 0x00007fffcfd2b93b libsystem_pthread.dylib`_pthread_body + 180
    frame #11: 0x00007fffcfd2b887 libsystem_pthread.dylib`_pthread_start + 286
    frame #12: 0x00007fffcfd2b08d libsystem_pthread.dylib`thread_start + 13

(lldb) pmip 0x000000010a314a96
IP 0x10a314a96 at offset 0x206 of method (wrapper native-to-managed) JetBrains.Debugger.CorApi.ComInterop.ICorDebugManagedCallback:CreateProcess (intptr,intptr) (0x10a314890 0x10a314b82)[domain 0x10060e720 - JetBrains.Debugger.Mono.Tests.exe]

(lldb) pmip 0x0000000109300fd3
IP 0x109300fd3 at offset 0x63 of method JetBrains.Debugger.CorApi.ComInterop.Eventing.ManagedCallbackEventSink:JetBrains.Debugger.CorApi.ComInterop.ICorDebugManagedCallback.CreateProcess (JetBrains.Debugger.CorApi.ComInterop.ICorDebugProcess) (0x109300f70 0x109300fd8)[domain 0x10060e720 - JetBrains.Debugger.Mono.Tests.exe]

(lldb) pmip 0x000000010a319fe1
IP 0x10a319fe1 at offset 0x31 of method (wrapper cominterop-invoke) JetBrains.Debugger.CorApi.ComInterop.ICorDebugController:Continue (int) (0x10a319fb0 0x10a31a038)[domain 0x10060e720 - JetBrains.Debugger.Mono.Tests.exe]

We have a stable reproduce for its problem. We are using mono master branch. In another test case ICorDebugController:Continue worked correctly. We cannot find the reason for this behaviour.  
 Could somebody help us to debug the problem? 
-- 
Mikhail Filippov 
Software Developer
JetBrains
<A HREF="http://jetbrains.com">http://jetbrains.com</A>
“The Drive To Develop&quot;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044335.html">[Mono-dev] ☑cool stuff
</A></li>
	<LI>Next message (by thread): <A HREF="044341.html">[Mono-dev] Mono native crash when we call a method Continue from CoreCLR debugger callback.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44339">[ date ]</a>
              <a href="thread.html#44339">[ thread ]</a>
              <a href="subject.html#44339">[ subject ]</a>
              <a href="author.html#44339">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
