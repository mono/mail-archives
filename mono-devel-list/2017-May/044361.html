<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Crosscompiling Mono 5.0.0.100
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Crosscompiling%20Mono%205.0.0.100&In-Reply-To=%3CCA%2BTH9VmATwwD57qce8Gf-2xie66MerNBh6eSTBSZLMzpQ2dpnw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044360.html">
   <LINK REL="Next"  HREF="044362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Crosscompiling Mono 5.0.0.100</H1>
    <B>Angelo Compagnucci</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Crosscompiling%20Mono%205.0.0.100&In-Reply-To=%3CCA%2BTH9VmATwwD57qce8Gf-2xie66MerNBh6eSTBSZLMzpQ2dpnw%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Crosscompiling Mono 5.0.0.100">angelo.compagnucci at gmail.com
       </A><BR>
    <I>Tue May 23 21:04:01 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044360.html">[Mono-dev] Crosscompiling Mono 5.0.0.100
</A></li>
        <LI>Next message (by thread): <A HREF="044362.html">[Mono-dev] Crosscompiling Mono 5.0.0.100
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44361">[ date ]</a>
              <a href="thread.html#44361">[ thread ]</a>
              <a href="subject.html#44361">[ subject ]</a>
              <a href="author.html#44361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dearh Bernhard,

2017-05-23 19:54 GMT+02:00 Bernhard Urban &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">beurba at microsoft.com</A>&gt;:
&gt;<i>  &gt;      Host:          arm-buildroot-linux-gnueabi
</I>&gt;<i>  &gt;      Target:        arm-buildroot-linux-gnueabi
</I>&gt;<i>
</I>&gt;<i> so... you aren't actually cross-compiling, am I right?
</I>
I'm actually crosscompiling inside buildroot wich somewhat cheats.

&gt;<i> That's weird then, configure should pick up all the right settings. I'm curious to see the emitted code around the crash site. If you use gdb, something like `x/100i $pc-0x40` should do the trick.
</I>

=================================================================
Got a SIGILL while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================


Thread 1 &quot;mono-sgen&quot; received signal SIGABRT, Aborted.
0xb6cede50 in raise () from /lib/libc.so.6
(gdb) x/100i $pc-0x40
   0xb6cede10 &lt;ssignal+196&gt;:    andseq  r1, r1, r12, ror #8
   0xb6cede14 &lt;ssignal+200&gt;:
                ; &lt;UNDEFINED&gt; instruction: 0x0010e2b8
   0xb6cede18 &lt;raise&gt;:  push    {r7, lr}
   0xb6cede1c &lt;raise+4&gt;:        mov     r2, r0
   0xb6cede20 &lt;raise+8&gt;:        bl      0xb6cd8650
   0xb6cede24 &lt;raise+12&gt;:       ldr     r1, [r0, #-1112]        ; 0xfffffba8
   0xb6cede28 &lt;raise+16&gt;:       mov     r12, r0
   0xb6cede2c &lt;raise+20&gt;:       cmp     r1, #0
   0xb6cede30 &lt;raise+24&gt;:       ldr     r0, [r0, #-1108]        ; 0xfffffbac
   0xb6cede34 &lt;raise+28&gt;:       bne     0xb6cede64 &lt;raise+76&gt;
   0xb6cede38 &lt;raise+32&gt;:       mov     r7, #224        ; 0xe0
   0xb6cede3c &lt;raise+36&gt;:       svc     0x00000000
   0xb6cede40 &lt;raise+40&gt;:       mov     r1, r0
   0xb6cede44 &lt;raise+44&gt;:       str     r0, [r12, #-1112]       ; 0xfffffba8
   0xb6cede48 &lt;raise+48&gt;:       mov     r7, #268        ; 0x10c
   0xb6cede4c &lt;raise+52&gt;:       svc     0x00000000
=&gt; 0xb6cede50 &lt;raise+56&gt;:       cmn     r0, #4096       ; 0x1000
   0xb6cede54 &lt;raise+60&gt;:       mov     r3, r0
   0xb6cede58 &lt;raise+64&gt;:       bhi     0xb6cede80 &lt;raise+104&gt;
   0xb6cede5c &lt;raise+68&gt;:       mov     r0, r3
   0xb6cede60 &lt;raise+72&gt;:       pop     {r7, pc}
   0xb6cede64 &lt;raise+76&gt;:       cmp     r0, #0
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
   0xb6cede68 &lt;raise+80&gt;:       bgt     0xb6cede48 &lt;raise+48&gt;
   0xb6cede6c &lt;raise+84&gt;:       bic     r3, r0, #-2147483648    ; 0x80000000
   0xb6cede70 &lt;raise+88&gt;:       cmp     r3, #0
   0xb6cede74 &lt;raise+92&gt;:       rsbne   r0, r0, #0
   0xb6cede78 &lt;raise+96&gt;:       moveq   r0, r1
   0xb6cede7c &lt;raise+100&gt;:      b       0xb6cede48 &lt;raise+48&gt;
   0xb6cede80 &lt;raise+104&gt;:
    ldr r2, [pc, #20]   ; 0xb6cede9c &lt;raise+132&gt;
   0xb6cede84 &lt;raise+108&gt;:      rsb     r1, r0, #0
   0xb6cede88 &lt;raise+112&gt;:      ldr     r2, [pc, r2]
   0xb6cede8c &lt;raise+116&gt;:      bl      0xb6cd8650
   0xb6cede90 &lt;raise+120&gt;:      mvn     r3, #0
   0xb6cede94 &lt;raise+124&gt;:      str     r1, [r0, r2]
   0xb6cede98 &lt;raise+128&gt;:      b       0xb6cede5c &lt;raise+68&gt;
   0xb6cede9c &lt;raise+132&gt;:      andseq  lr, r0, r8, lsr #4
   0xb6cedea0 &lt;killpg&gt;: cmp     r0, #0
   0xb6cedea4 &lt;killpg+4&gt;:       push    {lr}            ; (str lr, [sp, #-4]!)
   0xb6cedea8 &lt;killpg+8&gt;:       blt     0xb6cedeb8 &lt;killpg+24&gt;
   0xb6cedeac &lt;killpg+12&gt;:      rsb     r0, r0, #0
   0xb6cedeb0 &lt;killpg+16&gt;:      pop     {lr}            ; (ldr lr, [sp], #4)
   0xb6cedeb4 &lt;killpg+20&gt;:      b       0xb6cee120 &lt;kill&gt;
   0xb6cedeb8 &lt;killpg+24&gt;:
    ldr r3, [pc, #20]   ; 0xb6ceded4 &lt;killpg+52&gt;
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
   0xb6cedebc &lt;killpg+28&gt;:      bl      0xb6cd8650
   0xb6cedec0 &lt;killpg+32&gt;:      ldr     r3, [pc, r3]
   0xb6cedec4 &lt;killpg+36&gt;:      mov     r2, #22
   0xb6cedec8 &lt;killpg+40&gt;:      str     r2, [r0, r3]
   0xb6cedecc &lt;killpg+44&gt;:      mvn     r0, #0
   0xb6ceded0 &lt;killpg+48&gt;:      pop     {pc}            ; (ldr pc, [sp], #4)
   0xb6ceded4 &lt;killpg+52&gt;:
                ; &lt;UNDEFINED&gt; instruction: 0x0010e1f0
   0xb6ceded8:  push    {r4, r5, r6, r7, lr}
   0xb6cededc:  ldr     r6, [pc, #324]  ; 0xb6cee028
   0xb6cedee0:  subs    r5, r1, #0
   0xb6cedee4:  sub     sp, sp, #284    ; 0x11c
   0xb6cedee8:  mov     r7, r0
   0xb6cedeec:  mov     r4, r2
   0xb6cedef0:  add     r6, pc, r6
   0xb6cedef4:  beq     0xb6cedf28
   0xb6cedef8:  mov     r1, r5
   0xb6cedefc:  ldr     r3, [r1], #4
   0xb6cedf00:  add     r0, sp, #12
   0xb6cedf04:  mov     r2, #128        ; 0x80
   0xb6cedf08:  str     r3, [sp]
   0xb6cedf0c:  bl      0xb6d3d7a0 &lt;memcpy&gt;
   0xb6cedf10:  ldr     r3, [r5, #132]  ; 0x84
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
   0xb6cedf14:  str     r3, [sp, #4]
   0xb6cedf18:  tst     r3, #67108864   ; 0x4000000
   0xb6cedf1c:  beq     0xb6cedfa8
   0xb6cedf20:  ldr     r3, [r5, #136]  ; 0x88
   0xb6cedf24:  str     r3, [sp, #8]
   0xb6cedf28:  cmp     r4, #0
   0xb6cedf2c:  addne   r2, sp, #140    ; 0x8c
   0xb6cedf30:  moveq   r2, r4
   0xb6cedf34:  cmp     r5, #0
   0xb6cedf38:  mov     r0, r7
   0xb6cedf3c:  movne   r1, sp
   0xb6cedf40:  moveq   r1, r5
   0xb6cedf44:  mov     r3, #8
   0xb6cedf48:  mov     r7, #174        ; 0xae
   0xb6cedf4c:  svc     0x00000000
   0xb6cedf50:  cmn     r0, #4096       ; 0x1000
   0xb6cedf54:  mov     r5, r0
   0xb6cedf58:  bhi     0xb6cee00c
   0xb6cedf5c:  adds    r3, r4, #0
   0xb6cedf60:  movne   r3, #1
   0xb6cedf64:  cmp     r0, #0
   0xb6cedf68:  movlt   r3, #0
   0xb6cedf6c:  cmp     r3, #0
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
   0xb6cedf70:  beq     0xb6cedf9c
   0xb6cedf74:  ldr     r3, [sp, #140]  ; 0x8c
   0xb6cedf78:  mov     r0, r4
   0xb6cedf7c:  str     r3, [r0], #4
   0xb6cedf80:  mov     r2, #128        ; 0x80
   0xb6cedf84:  add     r1, sp, #152    ; 0x98
   0xb6cedf88:  bl      0xb6d3d7a0 &lt;memcpy&gt;
   0xb6cedf8c:  ldr     r2, [sp, #144]  ; 0x90
   0xb6cedf90:  ldr     r3, [sp, #148]  ; 0x94
   0xb6cedf94:  str     r2, [r4, #132]  ; 0x84
   0xb6cedf98:  str     r3, [r4, #136]  ; 0x88
   0xb6cedf9c:  mov     r0, r5

The file command reports:

/usr/bin/mono-sgen: ELF 32-bit LSB executable, ARM, EABI5 version 1
(SYSV), dynamically linked, interpreter /lib/ld-linux.so.3, for
GNU/Linux 2.6.16, stripped

So the cross compilation went well.

Sincerely, Angelo

&gt;<i>
</I>&gt;<i> -Bernhard
</I>&gt;<i> ________________________________________
</I>&gt;<i> From: Angelo Compagnucci &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">angelo.compagnucci at gmail.com</A>&gt;
</I>&gt;<i> Sent: Tuesday, May 23, 2017 6:35:06 PM
</I>&gt;<i> To: Bernhard Urban
</I>&gt;<i> Cc: <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-dev] Crosscompiling Mono 5.0.0.100
</I>&gt;<i>
</I>&gt;<i> Hello Bernhard,
</I>&gt;<i>
</I>&gt;<i> The recpie is this one:
</I>&gt;<i>
</I>&gt;<i> ################################################################################
</I>&gt;<i> #
</I>&gt;<i> # mono
</I>&gt;<i> #
</I>&gt;<i> ################################################################################
</I>&gt;<i>
</I>&gt;<i> MONO_VERSION = 5.0.0.100
</I>&gt;<i> MONO_SITE = <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fdownload.mono-project.com%2Fsources%2Fmono&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C25ae3075088c4b176de708d4a1f9c451%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311541495053555&amp;sdata=gh4wrnniTrAEH5C7lGkDBF8dLLusjvGNkJR9KCkHzH4%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fdownload.mono-project.com%2Fsources%2Fmono&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C25ae3075088c4b176de708d4a1f9c451%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311541495053555&amp;sdata=gh4wrnniTrAEH5C7lGkDBF8dLLusjvGNkJR9KCkHzH4%3D&amp;reserved=0</A>
</I>&gt;<i> MONO_SOURCE = mono-$(MONO_VERSION).tar.bz2
</I>&gt;<i> MONO_LICENSE = GPL-2.0 or MIT (compiler, tools), MIT (libs) or commercial
</I>&gt;<i> MONO_LICENSE_FILES = LICENSE mcs/COPYING eglib/COPYING \
</I>&gt;<i>     external/Newtonsoft.Json/Tools/7-zip/copying.txt
</I>&gt;<i> MONO_INSTALL_STAGING = YES
</I>&gt;<i>
</I>&gt;<i> ## Mono native
</I>&gt;<i>
</I>&gt;<i> # patching configure.ac
</I>&gt;<i> MONO_AUTORECONF = YES
</I>&gt;<i>
</I>&gt;<i> # Disable managed code (mcs folder) from building
</I>&gt;<i> MONO_CONF_OPTS = --with-mcs-docs=no \
</I>&gt;<i>     --with-ikvm-native=no \
</I>&gt;<i>     --enable-minimal=profiler,aot \
</I>&gt;<i>     --disable-mcs-build \
</I>&gt;<i>     --with-xen_opt=no \
</I>&gt;<i>     --disable-btls \
</I>&gt;<i>     --enable-static
</I>&gt;<i>
</I>&gt;<i> # The libraries have been built by the host-mono build. Since they are
</I>&gt;<i> # architecture-independent, we simply copy them to the target.
</I>&gt;<i> define MONO_INSTALL_LIBS
</I>&gt;<i>     rsync -av --exclude=*.so --exclude=*.mdb \
</I>&gt;<i>         $(HOST_DIR)/usr/lib/mono $(TARGET_DIR)/usr/lib/
</I>&gt;<i> endef
</I>&gt;<i>
</I>&gt;<i> MONO_POST_INSTALL_TARGET_HOOKS += MONO_INSTALL_LIBS
</I>&gt;<i>
</I>&gt;<i> ifeq ($(BR2_PACKAGE_LIBICONV),y)
</I>&gt;<i> MONO_DEPENDENCIES += libiconv
</I>&gt;<i> endif
</I>&gt;<i>
</I>&gt;<i> MONO_DEPENDENCIES += host-mono
</I>&gt;<i>
</I>&gt;<i> ## Mono managed
</I>&gt;<i>
</I>&gt;<i> HOST_MONO_CONF_OPTS = --with-mcs-docs=no \
</I>&gt;<i>     --disable-libraries \
</I>&gt;<i>     --with-ikvm-native=no \
</I>&gt;<i>     --enable-minimal=profiler,aot \
</I>&gt;<i>     --with-xen_opt=no \
</I>&gt;<i>     --disable-btls \
</I>&gt;<i>     --enable-static
</I>&gt;<i>
</I>&gt;<i> # ensure monolite is used
</I>&gt;<i> HOST_MONO_MAKE_OPTS += EXTERNAL_MCS=false
</I>&gt;<i>
</I>&gt;<i> HOST_MONO_DEPENDENCIES = host-monolite host-gettext
</I>&gt;<i>
</I>&gt;<i> define HOST_MONO_SETUP_MONOLITE
</I>&gt;<i>     rm -rf $(@D)/mcs/class/lib/monolite
</I>&gt;<i>     (cd $(@D)/mcs/class/lib; ln -s $(HOST_DIR)/usr/lib/monolite monolite)
</I>&gt;<i> endef
</I>&gt;<i>
</I>&gt;<i> HOST_MONO_POST_CONFIGURE_HOOKS += HOST_MONO_SETUP_MONOLITE
</I>&gt;<i>
</I>&gt;<i> $(eval $(autotools-package))
</I>&gt;<i> $(eval $(host-autotools-package))
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The package is compiled in two phases: the first compiles host-mono,
</I>&gt;<i> which in reality only compiles the libraries using monolite. Then the
</I>&gt;<i> recipe compiles mono native.
</I>&gt;<i> All the cross compiling options is passed to the recipe by buildroot.
</I>&gt;<i>
</I>&gt;<i> Configure output:
</I>&gt;<i>
</I>&gt;<i>         mcs source:    mcs
</I>&gt;<i>         C# Compiler:   roslyn
</I>&gt;<i>
</I>&gt;<i>    Engine:
</I>&gt;<i>         Host:          arm-buildroot-linux-gnueabi
</I>&gt;<i>         Target:        arm-buildroot-linux-gnueabi
</I>&gt;<i>         GC:            sgen (concurrent by default) and Included Boehm
</I>&gt;<i> GC with typed GC and parallel mark
</I>&gt;<i>         TLS:           __thread
</I>&gt;<i>         SIGALTSTACK:   yes
</I>&gt;<i>         Engine:        Building and using the JIT
</I>&gt;<i>         BigArrays:     no
</I>&gt;<i>         DTrace:        no
</I>&gt;<i>         LLVM Back End: no (dynamically loaded: no)
</I>&gt;<i>         Interpreter:   no
</I>&gt;<i>
</I>&gt;<i>    Libraries:
</I>&gt;<i>         .NET 4.x:        no
</I>&gt;<i>         Xamarin.Android: no
</I>&gt;<i>         Xamarin.iOS:     no
</I>&gt;<i>         Xamarin.WatchOS: no
</I>&gt;<i>         Xamarin.TVOS:    no
</I>&gt;<i>         Xamarin.Mac:     no
</I>&gt;<i>         Windows AOT:     no
</I>&gt;<i>         Orbis:           no
</I>&gt;<i>         Test profiles:   AOT Full (no), AOT Hybrid (no)
</I>&gt;<i>         JNI support:
</I>&gt;<i>         libgdiplus:      assumed to be installed
</I>&gt;<i>         zlib:
</I>&gt;<i>         BTLS:            no
</I>&gt;<i>         Disabled:      profiler,aot
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Consider that the same recipe with mono 4.8.1.0 works like expected.
</I>&gt;<i>
</I>&gt;<i> Sincerely, Angelo
</I>&gt;<i>
</I>&gt;<i> 2017-05-23 18:21 GMT+02:00 Bernhard Urban &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">beurba at microsoft.com</A>&gt;:
</I>&gt;&gt;<i> How does your configure line look like and what's the output?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Bernhard
</I>&gt;&gt;<i> ________________________________________
</I>&gt;&gt;<i> From: Angelo Compagnucci &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">angelo.compagnucci at gmail.com</A>&gt;
</I>&gt;&gt;<i> Sent: Tuesday, May 23, 2017 6:07:07 PM
</I>&gt;&gt;<i> To: Bernhard Urban
</I>&gt;&gt;<i> Cc: <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> Subject: Re: [Mono-dev] Crosscompiling Mono 5.0.0.100
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hello Bernhard,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2017-05-23 17:21 GMT+02:00 Bernhard Urban &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">beurba at microsoft.com</A>&gt;:
</I>&gt;&gt;&gt;<i> Hello Angelo,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> could you install gdb (or lldb) on your target?  It looks like the target device doesn't support some instructions that mono generates (hence SIGILL). It would be useful to get a native stack trace, or a disassembly around the crash site.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have gdb but I'm not having success with a backtrace, I'll try more!
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What CPU architecture/platform are you targeting?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Qemu versatile, so it's an ARM926EJ-S
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> That might be helpful as well: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.mono-project.com%2Fdocs%2Fdebug%2Bprofile%2Fdebug%2F&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C843ac485cb334abb79e208d4a1f5db83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311524711368693&amp;sdata=ZWTL2w5DPPR2ldn8JWj6wV5FxTGLpKSijP6VG8DpNu0%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.mono-project.com%2Fdocs%2Fdebug%2Bprofile%2Fdebug%2F&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C843ac485cb334abb79e208d4a1f5db83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311524711368693&amp;sdata=ZWTL2w5DPPR2ldn8JWj6wV5FxTGLpKSijP6VG8DpNu0%3D&amp;reserved=0</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm looking at it!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks!
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -Bernhard
</I>&gt;&gt;&gt;<i> ________________________________________
</I>&gt;&gt;&gt;<i> From: Mono-devel-list &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.dot.net</A>&gt; on behalf of Angelo Compagnucci &lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">angelo.compagnucci at gmail.com</A>&gt;
</I>&gt;&gt;&gt;<i> Sent: Tuesday, May 23, 2017 2:43:48 PM
</I>&gt;&gt;&gt;<i> To: <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;<i> Subject: [Mono-dev] Crosscompiling Mono 5.0.0.100
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hello developers,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm trying to crosscompile mono for qemu versatile with the buildroot
</I>&gt;&gt;&gt;<i> crosscompiling system. More precisely, I'm trying to update the recipe
</I>&gt;&gt;&gt;<i> bundled with buildroot for mono 4.8.1.100.
</I>&gt;&gt;&gt;<i> I'm actually not a novice in this sort of thing, I actually
</I>&gt;&gt;&gt;<i> contributed the recipe in the first place and contributed several
</I>&gt;&gt;&gt;<i> patches to the mono build system to be cross compilable and musl
</I>&gt;&gt;&gt;<i> compatible.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Actually I have a working recipe, the same one i use for 4.8.1.100 and
</I>&gt;&gt;&gt;<i> which works, and I can successfully compile mono 5.0.0.100.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Unfortunately, compiling a simple hello world produces this error:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> # mcs hello.cs
</I>&gt;&gt;&gt;<i> Stacktrace:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   at &lt;unknown&gt; &lt;0xffffffff&gt;
</I>&gt;&gt;&gt;<i>   at Mono.SafeStringMarshal.get_Value () [0x0001a] in
</I>&gt;&gt;&gt;<i> &lt;a1ccf43d50c94435a9f0fcab25017dca&gt;:0
</I>&gt;&gt;&gt;<i>   at System.Environment.internalGetEnvironmentVariable (string)
</I>&gt;&gt;&gt;<i> [0x0000c] in &lt;a1ccf43d50c94435a9f0fcab25017dca&gt;:0
</I>&gt;&gt;&gt;<i>   at System.Environment.GetEnvironmentVariable (string) [0x00000] in
</I>&gt;&gt;&gt;<i> &lt;a1ccf43d50c94435a9f0fcab25017dca&gt;:0
</I>&gt;&gt;&gt;<i>   at Mono.CSharp.Driver.Main (string[]) [0x00000] in
</I>&gt;&gt;&gt;<i> &lt;65e20f41151e464c8d313246de15d1a3&gt;:0
</I>&gt;&gt;&gt;<i>   at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_int_object
</I>&gt;&gt;&gt;<i> (object,intptr,intptr,intptr) [0x00054] in
</I>&gt;&gt;&gt;<i> &lt;65e20f41151e464c8d313246de15d1a3&gt;:0
</I>&gt;&gt;&gt;<i> /proc/self/maps:
</I>&gt;&gt;&gt;<i> 00008000-00299000 r-xp 00000000 08:00 3367       /usr/bin/mono-sgen
</I>&gt;&gt;&gt;<i> 002a0000-002a2000 rwxp 00290000 08:00 3367       /usr/bin/mono-sgen
</I>&gt;&gt;&gt;<i> 002a2000-0033b000 rwxp 00000000 00:00 0          [heap]
</I>&gt;&gt;&gt;<i> b4c91000-b4f09000 r-xp 00000000 08:00 3263
</I>&gt;&gt;&gt;<i> /usr/lib/mono/gac/System/4.0.0.0__b77a5c561934e089/System.dll
</I>&gt;&gt;&gt;<i> b4f09000-b5000000 r-xp 00000000 08:00 2599
</I>&gt;&gt;&gt;<i> /usr/lib/mono/gac/System.Core/4.0.0.0__b77a5c561934e089/System.Core.dll
</I>&gt;&gt;&gt;<i> b5000000-b5021000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b5021000-b5100000 ---p 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b51a9000-b51aa000 ---p 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b51aa000-b52a9000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b52a9000-b5652000 r-xp 00000000 08:00 1491       /usr/lib/mono/4.5/mscorlib.dll
</I>&gt;&gt;&gt;<i> b5652000-b5800000 r-xp 00000000 08:00 1270       /usr/lib/mono/4.5/mcs.exe
</I>&gt;&gt;&gt;<i> b5800000-b6000000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6000000-b6001000 ---p 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6001000-b6c00000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6c70000-b6cf0000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6cf2000-b6d0b000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6d0b000-b6d3a000 ---p 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6d3a000-b6d4a000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6d4a000-b6e7d000 r-xp 00000000 08:00 3567       /lib/libc-2.18.so
</I>&gt;&gt;&gt;<i> b6e7d000-b6e84000 ---p 00133000 08:00 3567       /lib/libc-2.18.so
</I>&gt;&gt;&gt;<i> b6e84000-b6e86000 r-xp 00132000 08:00 3567       /lib/libc-2.18.so
</I>&gt;&gt;&gt;<i> b6e86000-b6e87000 rwxp 00134000 08:00 3567       /lib/libc-2.18.so
</I>&gt;&gt;&gt;<i> b6e87000-b6e8a000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6e8a000-b6eab000 r-xp 00000000 08:00 543        /lib/libgcc_s.so.1
</I>&gt;&gt;&gt;<i> b6eab000-b6eb2000 ---p 00021000 08:00 543        /lib/libgcc_s.so.1
</I>&gt;&gt;&gt;<i> b6eb2000-b6eb3000 rwxp 00020000 08:00 543        /lib/libgcc_s.so.1
</I>&gt;&gt;&gt;<i> b6eb3000-b6ec9000 r-xp 00000000 08:00 991        /lib/libpthread-2.18.so
</I>&gt;&gt;&gt;<i> b6ec9000-b6ed0000 ---p 00016000 08:00 991        /lib/libpthread-2.18.so
</I>&gt;&gt;&gt;<i> b6ed0000-b6ed1000 r-xp 00015000 08:00 991        /lib/libpthread-2.18.so
</I>&gt;&gt;&gt;<i> b6ed1000-b6ed2000 rwxp 00016000 08:00 991        /lib/libpthread-2.18.so
</I>&gt;&gt;&gt;<i> b6ed2000-b6ed4000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6ed4000-b6ed8000 r-xp 00000000 08:00 209        /lib/libdl-2.18.so
</I>&gt;&gt;&gt;<i> b6ed8000-b6edf000 ---p 00004000 08:00 209        /lib/libdl-2.18.so
</I>&gt;&gt;&gt;<i> b6edf000-b6ee0000 r-xp 00003000 08:00 209        /lib/libdl-2.18.so
</I>&gt;&gt;&gt;<i> b6ee0000-b6ee1000 rwxp 00004000 08:00 209        /lib/libdl-2.18.so
</I>&gt;&gt;&gt;<i> b6ee1000-b6ee7000 r-xp 00000000 08:00 1327       /lib/librt-2.18.so
</I>&gt;&gt;&gt;<i> b6ee7000-b6eee000 ---p 00006000 08:00 1327       /lib/librt-2.18.so
</I>&gt;&gt;&gt;<i> b6eee000-b6eef000 r-xp 00005000 08:00 1327       /lib/librt-2.18.so
</I>&gt;&gt;&gt;<i> b6eef000-b6ef0000 rwxp 00006000 08:00 1327       /lib/librt-2.18.so
</I>&gt;&gt;&gt;<i> b6ef0000-b6f8d000 r-xp 00000000 08:00 207        /lib/libm-2.18.so
</I>&gt;&gt;&gt;<i> b6f8d000-b6f95000 ---p 0009d000 08:00 207        /lib/libm-2.18.so
</I>&gt;&gt;&gt;<i> b6f95000-b6f96000 r-xp 0009d000 08:00 207        /lib/libm-2.18.so
</I>&gt;&gt;&gt;<i> b6f96000-b6f97000 rwxp 0009e000 08:00 207        /lib/libm-2.18.so
</I>&gt;&gt;&gt;<i> b6f97000-b6fb7000 r-xp 00000000 08:00 2447       /lib/ld-2.18.so
</I>&gt;&gt;&gt;<i> b6fb7000-b6fb8000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6fb8000-b6fb9000 rwxs 00000000 00:0c 225        /dev/shm/mono.110
</I>&gt;&gt;&gt;<i> b6fb9000-b6fba000 ---p 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6fba000-b6fbb000 r-xp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6fbb000-b6fbe000 rwxp 00000000 00:00 0
</I>&gt;&gt;&gt;<i> b6fbe000-b6fbf000 r-xp 0001f000 08:00 2447       /lib/ld-2.18.so
</I>&gt;&gt;&gt;<i> b6fbf000-b6fc0000 rwxp 00020000 08:00 2447       /lib/ld-2.18.so
</I>&gt;&gt;&gt;<i> bec63000-bec84000 rw-p 00000000 00:00 0          [stack]
</I>&gt;&gt;&gt;<i> bee69000-bee6a000 r-xp 00000000 00:00 0          [sigpage]
</I>&gt;&gt;&gt;<i> ffff0000-ffff1000 r-xp 00000000 00:00 0          [vectors]
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Native stacktrace:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Debug info from gdb:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> mono_gdb_render_native_backtraces not supported on this platform,
</I>&gt;&gt;&gt;<i> unable to find gdb or lldb
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =================================================================
</I>&gt;&gt;&gt;<i> Got a SIGILL while executing native code. This usually indicates
</I>&gt;&gt;&gt;<i> a fatal error in the mono runtime or one of the native libraries
</I>&gt;&gt;&gt;<i> used by your application.
</I>&gt;&gt;&gt;<i> =================================================================
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Aborted
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I've not followed too closely the latests development bits for mono 5
</I>&gt;&gt;&gt;<i> and I'm asking you some advice to understand what's going on.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thank your for your time!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Profile: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C45f4a2e117e24f05457c08d4a1d977cd%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311402805633277&amp;sdata=5c%2B%2FVLvlqXKfMT%2FrWza5OzHG6rIOTizHCIx%2BNO5FPWc%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C45f4a2e117e24f05457c08d4a1d977cd%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311402805633277&amp;sdata=5c%2B%2FVLvlqXKfMT%2FrWza5OzHG6rIOTizHCIx%2BNO5FPWc%3D&amp;reserved=0</A>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.dot.net</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fmono-devel-list&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C45f4a2e117e24f05457c08d4a1d977cd%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311402805633277&amp;sdata=9BYjnZLHRW%2FzaNJWZ88dN%2BSfPka1fDh51ooKtzA2aGM%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Flists.dot.net%2Fmailman%2Flistinfo%2Fmono-devel-list&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C45f4a2e117e24f05457c08d4a1d977cd%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311402805633277&amp;sdata=9BYjnZLHRW%2FzaNJWZ88dN%2BSfPka1fDh51ooKtzA2aGM%3D&amp;reserved=0</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Profile: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C843ac485cb334abb79e208d4a1f5db83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311524711368693&amp;sdata=JscpGNCYRmwrNeRGtc7jza5ZRiLSC2Ll9YbpYn02hc8%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C843ac485cb334abb79e208d4a1f5db83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311524711368693&amp;sdata=JscpGNCYRmwrNeRGtc7jza5ZRiLSC2Ll9YbpYn02hc8%3D&amp;reserved=0</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Profile: <A HREF="https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C25ae3075088c4b176de708d4a1f9c451%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311541495053555&amp;sdata=wYlpKZ7x0VxrFBN25TrRNW8OJt8%2FbwWMDPDvj6EaQSE%3D&amp;reserved=0">https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fit.linkedin.com%2Fin%2Fcompagnucciangelo&amp;data=02%7C01%7Cbeurba%40microsoft.com%7C25ae3075088c4b176de708d4a1f9c451%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636311541495053555&amp;sdata=wYlpKZ7x0VxrFBN25TrRNW8OJt8%2FbwWMDPDvj6EaQSE%3D&amp;reserved=0</A>
</I>


-- 
Profile: <A HREF="http://it.linkedin.com/in/compagnucciangelo">http://it.linkedin.com/in/compagnucciangelo</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044360.html">[Mono-dev] Crosscompiling Mono 5.0.0.100
</A></li>
	<LI>Next message (by thread): <A HREF="044362.html">[Mono-dev] Crosscompiling Mono 5.0.0.100
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44361">[ date ]</a>
              <a href="thread.html#44361">[ thread ]</a>
              <a href="subject.html#44361">[ subject ]</a>
              <a href="author.html#44361">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
