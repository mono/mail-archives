<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] dataContractSerializer service behavior causes	InvalidCastException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20dataContractSerializer%20service%20behavior%20causes%0A%09InvalidCastException&In-Reply-To=%3C4F2632E1.3040400%40xdt.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038519.html">
   <LINK REL="Next"  HREF="038521.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] dataContractSerializer service behavior causes	InvalidCastException</H1>
    <B>Uli Hertlein</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20dataContractSerializer%20service%20behavior%20causes%0A%09InvalidCastException&In-Reply-To=%3C4F2632E1.3040400%40xdt.com.au%3E"
       TITLE="[Mono-dev] dataContractSerializer service behavior causes	InvalidCastException">uli at xdt.com.au
       </A><BR>
    <I>Mon Jan 30 06:04:17 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038519.html">[Mono-dev] MPAPI documentation
</A></li>
        <LI>Next message: <A HREF="038521.html">[Mono-dev] Handling StackOverflow, OutOfMemory, ThreadAbortException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38520">[ date ]</a>
              <a href="thread.html#38520">[ thread ]</a>
              <a href="subject.html#38520">[ subject ]</a>
              <a href="author.html#38520">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi guys,

after making some changes to my app.config file to allow WCF to 
serialize larger graphs I'm getting an InvalidCastException when running 
on mono.

ProxyTask: System.InvalidCastException: Cannot cast from source type to 
destination type.
   at System.ServiceModel.ServiceHostBase.AddServiceBehaviors 
(System.String configurationName, Boolean throwIfNotFound) [0x00000] in 
&lt;filename unknown&gt;:0
   at System.ServiceModel.ServiceHostBase.ApplyServiceElement 
(System.ServiceModel.Configuration.ServiceElement service) [0x00000] in 
&lt;filename unknown&gt;:0
   at System.ServiceModel.ServiceHostBase.LoadConfigurationSection 
(System.ServiceModel.Configuration.ServiceElement element) [0x00000] in 
&lt;filename unknown&gt;:0
   at System.ServiceModel.ServiceHostBase.ApplyConfiguration () 
[0x00000] in &lt;filename unknown&gt;:0
   at System.ServiceModel.ServiceHostBase.InitializeDescription 
(System.ServiceModel.UriSchemeKeyedCollection baseAddresses) [0x00000] 
in &lt;filename unknown&gt;:0
   at System.ServiceModel.ServiceHost.InitializeDescription (System.Type 
serviceType, System.ServiceModel.UriSchemeKeyedCollection baseAddresses) 
[0x00000] in &lt;filename unknown&gt;:0
   at System.ServiceModel.ServiceHost..ctor (System.Type serviceType, 
System.Uri[] baseAddresses) [0x00000] in &lt;filename unknown&gt;:0

The offending line in my 'app.config' is this:

&lt;configuration&gt;
   &lt;system.serviceModel&gt;
     &lt;behaviors&gt;
       &lt;serviceBehaviors&gt;
         &lt;behavior name=&quot;ProxyBehavior&quot;&gt;
           &lt;!-- Mono does not like this at all. --&gt;
           &lt;!--
           &lt;dataContractSerializer maxItemsInObjectGraph=&quot;2147483647&quot;/&gt;
           --&gt;
           &lt;serviceMetadata httpGetEnabled=&quot;true&quot;/&gt;
         &lt;/behavior&gt;
       &lt;/serviceBehaviors&gt;
     &lt;/behaviors&gt;
     &lt;services&gt;
       &lt;service behaviorConfiguration=&quot;ProxyBehavior&quot; name=&quot;Proxy&quot;&gt;
         &lt;endpoint
             address=&quot;&quot;
             binding=&quot;basicHttpBinding&quot;
             bindingConfiguration=&quot;ProxyBasicHttpBinding&quot;
             contract=&quot;IProxy&quot; /&gt;
       &lt;/service&gt;
     &lt;/services&gt;
   &lt;/system.serviceModel&gt;
&lt;/configuration&gt;

The recipe for this comes from 
<A HREF="http://smehrozalam.wordpress.com/2009/01/29/retrieving-huge-amount-of-data-from-wcf-service-in-silverlight-application">http://smehrozalam.wordpress.com/2009/01/29/retrieving-huge-amount-of-data-from-wcf-service-in-silverlight-application</A>

My guess so far is that DataContractSerializerOperationBehavior is 
implementing IOperationBehavior and IWsdlExportExtension, there doesn't 
seem to be anything implemented related to ServiceBehavior.

Any WCF gurus out there that may have an idea what's happening?

Cheers,
/uli
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038519.html">[Mono-dev] MPAPI documentation
</A></li>
	<LI>Next message: <A HREF="038521.html">[Mono-dev] Handling StackOverflow, OutOfMemory, ThreadAbortException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38520">[ date ]</a>
              <a href="thread.html#38520">[ thread ]</a>
              <a href="subject.html#38520">[ subject ]</a>
              <a href="author.html#38520">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
