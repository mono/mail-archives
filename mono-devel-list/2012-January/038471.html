<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] AOT compiler crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20AOT%20compiler%20crash&In-Reply-To=%3CCAOqP6L1cVC%3DD%2BO1VyidwnC9sEpSJkTf1ETzZqBC6WJp%2BWs-RGw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038470.html">
   <LINK REL="Next"  HREF="038472.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] AOT compiler crash</H1>
    <B>Michael Bayne</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20AOT%20compiler%20crash&In-Reply-To=%3CCAOqP6L1cVC%3DD%2BO1VyidwnC9sEpSJkTf1ETzZqBC6WJp%2BWs-RGw%40mail.gmail.com%3E"
       TITLE="[Mono-dev] AOT compiler crash">mdb at samskivert.com
       </A><BR>
    <I>Fri Jan 20 19:38:28 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038470.html">[Mono-dev] debug data inspection algorithm [why is it so slow and	faulty]
</A></li>
        <LI>Next message: <A HREF="038472.html">[Mono-dev] AOT compiler crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38471">[ date ]</a>
              <a href="thread.html#38471">[ thread ]</a>
              <a href="subject.html#38471">[ subject ]</a>
              <a href="author.html#38471">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to get IKVM working with MonoTouch. That has required a lot
of crazy hackery, but now I'm crashing the AOT compiler, and I don't
think I'm going to be able to fix this one myself (since I don't have
the source). Here's what it reports:

AOT Compilation exited with code 134, command:
MONO_PATH=.../bin/iPhone/Debug/showcase.app
/Developer/MonoTouch/usr/bin/arm-darwin-mono --debug
--aot=mtriple=armv6-darwin,full,static,asmonly,soft-debug,iphone-abi,outfile=...
&quot;.../IKVM.OpenJDK.Core.dll&quot;
Mono Ahead of Time compiler - compiling assembly .../IKVM.OpenJDK.Core.dll
* Assertion at ../../../../../mono/mono/metadata/marshal.c:2586,
condition `method &amp;&amp; method-&gt;klass-&gt;parent ==
mono_defaults.multicastdelegate_class &amp;&amp; !strcmp (method-&gt;name,
&quot;BeginInvoke&quot;)' not met

(FWIW, this all runs fine in the simulator, which I presume uses the
JIT-compiling VM.)

I'm a complete newb to C# and Mono and had never touched Mono or IKVM
a week ago. But I've hacked compilers in the past, so hopefully I can
sort this out without being too big a pain in the rear.

IKVM does some backbending things to map delegates to Java and
additionally to handle by ref parameters. It did not support the
combination of the two, but between some ham fisted hackery on my part
and a more sophisticated patch from the IKVM author, it ostensibly
does support that combination now. But in any case, that may be
related to this failure. If there was a way I could find out what
class and method was being compiled when the compiler choked, that
would be a big help.

Can someone point me in the direction of what useful debugging
information I can obtain to help pin-point the issue (if it's
something weird that IKVM is doing, I can certainly fix that).

Thanks!

-- <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mdb at samskivert.com</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038470.html">[Mono-dev] debug data inspection algorithm [why is it so slow and	faulty]
</A></li>
	<LI>Next message: <A HREF="038472.html">[Mono-dev] AOT compiler crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38471">[ date ]</a>
              <a href="thread.html#38471">[ thread ]</a>
              <a href="subject.html#38471">[ subject ]</a>
              <a href="author.html#38471">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
