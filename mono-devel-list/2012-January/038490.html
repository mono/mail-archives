<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Reference queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Reference%20queue&In-Reply-To=%3CC63D0E8D-567D-45D6-B791-0373F8F9E5D5%40vdesign-studios.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038489.html">
   <LINK REL="Next"  HREF="038491.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Reference queue</H1>
    <B>Robert Vesse</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Reference%20queue&In-Reply-To=%3CC63D0E8D-567D-45D6-B791-0373F8F9E5D5%40vdesign-studios.com%3E"
       TITLE="[Mono-dev] Reference queue">rvesse at vdesign-studios.com
       </A><BR>
    <I>Tue Jan 24 01:32:02 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038489.html">[Mono-dev] Reference queue
</A></li>
        <LI>Next message: <A HREF="038491.html">[Mono-dev] Reference queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38490">[ date ]</a>
              <a href="thread.html#38490">[ thread ]</a>
              <a href="subject.html#38490">[ subject ]</a>
              <a href="author.html#38490">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If it is the case that you have unmanaged resources that you need to clean up that you should really be using the IDisposable interface and calling Dispose() on the class when you are done with it.

If it is possible for code paths to 'forget' to call Dispose() then you can include a finalizer as well, if you do this you need to make sure that when Dispose() is explicitly called you call GC.SuppressFinalize() on that object so the finalizer can be skipped

Rob

On Jan 23, 2012, at 4:22 PM, Konrad M. Kruczy&#324;ski wrote:

&gt;<i> Thanks for the answer.
</I>&gt;<i> 
</I>&gt;<i> Here is the case:
</I>&gt;<i> Let's say I have a class which contains some data in temporary
</I>&gt;<i> file (for example some kind of cache which should not stay in memory).
</I>&gt;<i> I'd like to have this file removed when object of this class dies. I
</I>&gt;<i> can implement a finalizer but if I do this, object will be reclaimed
</I>&gt;<i> later than it should, also putting additional pressure on GC. Problems
</I>&gt;<i> of objects with finalizers which are not manually invoked are generally
</I>&gt;<i> known. And this is scenario where such object can be shared and does
</I>&gt;<i> not fit into any kind of using block.
</I>&gt;<i> 
</I>&gt;<i> I think that mentioned API can resolve that kind of problems, because
</I>&gt;<i> I can set up a callback which deletes temporary file *after* object's
</I>&gt;<i> death. Therefore it is processed like any other object, without being
</I>&gt;<i> in special collection for disposable objects.
</I>&gt;<i> 
</I>&gt;<i> I think it would bring significant performance gain, especially if
</I>&gt;<i> objects are created often and we expect they die soon. It should be
</I>&gt;<i> measured, but for that I need some kind of API.
</I>&gt;<i> 
</I>&gt;<i> What do you think?
</I>&gt;<i> 
</I>&gt;<i> &gt; We've thought about exporting such interface, but the maintenance burden
</I>&gt;<i> &gt; made us back off.
</I>&gt;<i> &gt; This interface has some short-coming and exposing it to managed code
</I>&gt;<i> &gt; has it's problems. For example, it doesn't support unregistering.
</I>&gt;<i> &gt; But, if you make your case on why such a feature would help you, I
</I>&gt;<i> &gt; can look into it.
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Konrad
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038489.html">[Mono-dev] Reference queue
</A></li>
	<LI>Next message: <A HREF="038491.html">[Mono-dev] Reference queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38490">[ date ]</a>
              <a href="thread.html#38490">[ thread ]</a>
              <a href="subject.html#38490">[ subject ]</a>
              <a href="author.html#38490">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
