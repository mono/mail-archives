<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Reference queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Reference%20queue&In-Reply-To=%3C4F1DF9A8.9080901%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038488.html">
   <LINK REL="Next"  HREF="038490.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Reference queue</H1>
    <B>&quot;Konrad M. Kruczy&#324;ski&quot;</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Reference%20queue&In-Reply-To=%3C4F1DF9A8.9080901%40gmail.com%3E"
       TITLE="[Mono-dev] Reference queue">konrad.kruczynski at gmail.com
       </A><BR>
    <I>Tue Jan 24 00:22:00 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038488.html">[Mono-dev] Reference queue
</A></li>
        <LI>Next message: <A HREF="038490.html">[Mono-dev] Reference queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38489">[ date ]</a>
              <a href="thread.html#38489">[ thread ]</a>
              <a href="subject.html#38489">[ subject ]</a>
              <a href="author.html#38489">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the answer.

Here is the case:
Let's say I have a class which contains some data in temporary
file (for example some kind of cache which should not stay in memory).
I'd like to have this file removed when object of this class dies. I
can implement a finalizer but if I do this, object will be reclaimed
later than it should, also putting additional pressure on GC. Problems
of objects with finalizers which are not manually invoked are generally
known. And this is scenario where such object can be shared and does
not fit into any kind of using block.

I think that mentioned API can resolve that kind of problems, because
I can set up a callback which deletes temporary file *after* object's
death. Therefore it is processed like any other object, without being
in special collection for disposable objects.

I think it would bring significant performance gain, especially if
objects are created often and we expect they die soon. It should be
measured, but for that I need some kind of API.

What do you think?

 &gt; We've thought about exporting such interface, but the maintenance burden
 &gt; made us back off.
 &gt; This interface has some short-coming and exposing it to managed code
 &gt; has it's problems. For example, it doesn't support unregistering.
 &gt; But, if you make your case on why such a feature would help you, I
 &gt; can look into it.

--
Konrad
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038488.html">[Mono-dev] Reference queue
</A></li>
	<LI>Next message: <A HREF="038490.html">[Mono-dev] Reference queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38489">[ date ]</a>
              <a href="thread.html#38489">[ thread ]</a>
              <a href="subject.html#38489">[ subject ]</a>
              <a href="author.html#38489">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
