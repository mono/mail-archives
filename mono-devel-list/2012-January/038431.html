<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] How can I have mono FastCGI run ONE application for several virtual directories ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20How%20can%20I%20have%20mono%20FastCGI%20run%20ONE%20application%20for%0A%20several%20virtual%20directories%20%3F&In-Reply-To=%3C4F14A258.6000503%40hailmail.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038429.html">
   <LINK REL="Next"  HREF="038433.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] How can I have mono FastCGI run ONE application for several virtual directories ?</H1>
    <B>quandary</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20How%20can%20I%20have%20mono%20FastCGI%20run%20ONE%20application%20for%0A%20several%20virtual%20directories%20%3F&In-Reply-To=%3C4F14A258.6000503%40hailmail.net%3E"
       TITLE="[Mono-dev] How can I have mono FastCGI run ONE application for several virtual directories ?">quandary82 at hailmail.net
       </A><BR>
    <I>Mon Jan 16 22:19:04 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038429.html">[Mono-dev] UdpClient &amp; IPv6
</A></li>
        <LI>Next message: <A HREF="038433.html">[Mono-dev] How can I have mono FastCGI run ONE application for several virtual directories ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38431">[ date ]</a>
              <a href="thread.html#38431">[ thread ]</a>
              <a href="subject.html#38431">[ subject ]</a>
              <a href="author.html#38431">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi !

I have my ASP.NET MVC3 Razor WebApplication running on a Linux server 
with nginx via fastcgi-mono-server4.
So far everything works fine.

But I have a question:
When I start up fastcgi-mono server, I need this
fastcgi-mono-server4 
/applications=www.domain1.xyz:/:/var/www/www.domain1.xyz/ 
/socket=tcp:127.0.0.1:9000
to have the application in     &quot;/var/www/www.domain1.xyz&quot;        serve 
&quot;www.domain1.xyz&quot;.

Now, if I also want to serve &quot;domain1.xyz&quot; (without www), I need to also 
add &quot;domain1.xyz&quot; pointing to the same directory.
Like this:
fastcgi-mono-server4 
/applications=www.domain1.xyz:/:/var/www/www.domain1.xyz/,domain1.xyz:/:/var/www/www.domain1.xyz/ 
/socket=tcp:127.0.0.1:9000

This also works fine.

But my application is a chat application, so it stores all submitted 
messages in global.asax, so that they can be submitted to every other user.
This works fine, as long as all users are on the same domain 
(www.domain.xyz XOR domain.xyz).
But all users visiting domain1.xyz should also see what users on 
www.domain1.xyz wrote, and vice-versa (www.domain.xyz OR domain.xyz).
However, this is not possible, because www.domain1.xyz runs in a 
separate process from domain1.xyz.
How can I make two different virtual hosts use the same application 
(only one instance) ?

Note that the question isn't that much about that chat application.
I used it simply to check the fastcgi-behaviour for multiple domains per 
application.
For the chat application, I could solve this by simply redirecting every 
request for domain.xyz to www.domain.xyz.

But I am writing a wiki application that works similar to blogspot:
CUSTOMSUBDOMAIN.blogspot.com

And then display the content for every CUSTOMSUBDOMAIN in ONE 
application, by switching data-retrival &amp; presentation according to the 
server-variable &quot;host&quot; in the web-application.

How can I have fastcgi use the same application for all those subdomains ?

I thought before I start wasting time by hacking and raping the code in 
Mono.WebServer and Mono.WebServer.FastCgi, it would be a good idea to 
first ask whether this isn't already possible.




-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120116/92ceaeda/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120116/92ceaeda/attachment.html</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038429.html">[Mono-dev] UdpClient &amp; IPv6
</A></li>
	<LI>Next message: <A HREF="038433.html">[Mono-dev] How can I have mono FastCGI run ONE application for several virtual directories ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38431">[ date ]</a>
              <a href="thread.html#38431">[ thread ]</a>
              <a href="subject.html#38431">[ subject ]</a>
              <a href="author.html#38431">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
