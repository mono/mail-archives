<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] possible bug in static constructor evaluation order
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20possible%20bug%20in%20static%20constructor%20evaluation%20order&In-Reply-To=20030504190849.GA26196%40roke.freak">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000642.html">
   <LINK REL="Next"  HREF="000685.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] possible bug in static constructor evaluation order</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20possible%20bug%20in%20static%20constructor%20evaluation%20order&In-Reply-To=20030504190849.GA26196%40roke.freak"
       TITLE="[Mono-devel-list] possible bug in static constructor evaluation order">lupus at ximian.com
       </A><BR>
    <I>Mon May  5 06:56:11 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000642.html">[Mono-devel-list] possible bug in static constructor  evaluation order
</A></li>
        <LI>Next message: <A HREF="000685.html">[Mono-devel-list] possible bug in static constructor evaluation order
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#646">[ date ]</a>
              <a href="thread.html#646">[ thread ]</a>
              <a href="subject.html#646">[ subject ]</a>
              <a href="author.html#646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/04/03 Michal Moskal wrote:
&gt;<i> Could anyone confirm this with current CVS (I cannot get it to run)?
</I>
Please, can you post details about the issue you have in getting cvs to
run? Thanks.

&gt;<i> #v+
</I>&gt;<i> class A {
</I>&gt;<i>   static A() { System.Console.WriteLine(&quot;A&quot;); }
</I>&gt;<i>   public static void f() {}
</I>&gt;<i> }
</I>&gt;<i> class B {
</I>&gt;<i>   static B() { System.Console.WriteLine(&quot;B&quot;); A.f(); }
</I>&gt;<i>   public static void f() {}
</I>&gt;<i> }
</I>&gt;<i> class M {
</I>&gt;<i>   public static void Main() { B.f(); }
</I>&gt;<i> }
</I>&gt;<i> #v-
</I>&gt;<i> 
</I>&gt;<i> produces:
</I>&gt;<i> A
</I>&gt;<i> B
</I>
This is caused by inlining: there are also other issues with static
initializers ordering both in the current release and in the cvs
version. They will be addressed after the next release (due real soon
now) when we'll be able to drop the old jit.
You'll find, though, that the new jit doesn't use inlining by default,
so your test will execute correctly with it if you don't explicitly
enable it.

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000642.html">[Mono-devel-list] possible bug in static constructor  evaluation order
</A></li>
	<LI>Next message: <A HREF="000685.html">[Mono-devel-list] possible bug in static constructor evaluation order
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#646">[ date ]</a>
              <a href="thread.html#646">[ thread ]</a>
              <a href="subject.html#646">[ subject ]</a>
              <a href="author.html#646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
