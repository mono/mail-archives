<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> AW: [Mono-devel-list] GC/Memory allocation performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=AW%3A%20%5BMono-devel-list%5D%20GC/Memory%20allocation%20performance&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000997.html">
   <LINK REL="Next"  HREF="000994.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>AW: [Mono-devel-list] GC/Memory allocation performance</H1>
    <B>J&#246;rg Rosenkranz</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=AW%3A%20%5BMono-devel-list%5D%20GC/Memory%20allocation%20performance&In-Reply-To="
       TITLE="AW: [Mono-devel-list] GC/Memory allocation performance">joergr at voelcker.com
       </A><BR>
    <I>Fri May 30 09:32:53 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000997.html">[Mono-devel-list] GC/Memory allocation performance
</A></li>
        <LI>Next message: <A HREF="000994.html">AW: [Mono-devel-list] GC/Memory allocation performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#988">[ date ]</a>
              <a href="thread.html#988">[ thread ]</a>
              <a href="subject.html#988">[ subject ]</a>
              <a href="author.html#988">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Zoltan,

I think the garbage collector should be working in all cases.
So a special version isn't the right direction? 

Maybe this performance difference depends more on the garbage
collector implementation? As I understand it (very basic understanding ;-))
in MS's implementation memory allocation is as simple as incrementing 
the pointer to the next free memory block by the amount of allocated 
memory. During collection all used blocks are shifted to avoid memory 
fragmentation. This may speed up allocation but pointers doesn't stay 
constant during runtime.

How's Boehm's GC working? Maybe the fragmentation slows down memory 
allocation?

Bye,
Joerg

&gt;<i> -----Urspr&#252;ngliche Nachricht-----
</I>&gt;<i> Von: Varga Zoltan [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">vargaz at freemail.hu</A>] 
</I>&gt;<i> Gesendet: Freitag, 30. Mai 2003 15:08
</I>&gt;<i> An: J&#246;rg Rosenkranz
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Betreff: Re: [Mono-devel-list] GC/Memory allocation performance
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>                                                 Hi,
</I>&gt;<i> 
</I>&gt;<i>    The current allocation path is not very optimized under 
</I>&gt;<i> mono. It involves the following:
</I>&gt;<i> - A call to the icall wrapper for mono_object_new_specific.
</I>&gt;<i> - A call to mono_object_new_specific
</I>&gt;<i> - A call to mono_object_new_alloc_specific
</I>&gt;<i> - A call to GC_MALLOC
</I>&gt;<i> - A call to mono_profiler_allocation
</I>&gt;<i> + a few comparisons etc.
</I>&gt;<i> 
</I>&gt;<i> It would be easy to create an optimized version for the 
</I>&gt;<i> common case (no profiler, no remoting etc.). I could do this 
</I>&gt;<i> if there is interest.
</I>&gt;<i> 
</I>&gt;<i>                                        bye
</I>&gt;<i> 
</I>&gt;<i>                                           Zoltan
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000997.html">[Mono-devel-list] GC/Memory allocation performance
</A></li>
	<LI>Next message: <A HREF="000994.html">AW: [Mono-devel-list] GC/Memory allocation performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#988">[ date ]</a>
              <a href="thread.html#988">[ thread ]</a>
              <a href="subject.html#988">[ subject ]</a>
              <a href="author.html#988">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
