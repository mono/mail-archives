<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Corlib NUnit Failures
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Corlib%20NUnit%20Failures&In-Reply-To=freemail.20030412094802.89017%40fm9.freemail.hu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000751.html">
   <LINK REL="Next"  HREF="000754.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Corlib NUnit Failures</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Corlib%20NUnit%20Failures&In-Reply-To=freemail.20030412094802.89017%40fm9.freemail.hu"
       TITLE="[Mono-devel-list] Corlib NUnit Failures">lupus at ximian.com
       </A><BR>
    <I>Mon May 12 04:24:58 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000751.html">[Mono-devel-list] Corlib NUnit Failures
</A></li>
        <LI>Next message: <A HREF="000754.html">[Mono-devel-list] Corlib NUnit Failures
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#752">[ date ]</a>
              <a href="thread.html#752">[ thread ]</a>
              <a href="subject.html#752">[ subject ]</a>
              <a href="author.html#752">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/12/03 Varga Zoltan wrote:
&gt;<i> Ben Maurer &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bmaurer at users.sourceforge.net</A>&gt; &#237;rta:
</I>&gt;<i> 
</I>&gt;<i> &gt; * System.Reflection.Emit: No clue! Probably a problem with
</I>&gt;<i> an icall.
</I>&gt;<i> 
</I>&gt;<i> This is caused by the fact that MethodBuilder::DefineParameter
</I>&gt;<i> accepts a 0 index, while the MS version does not. Could somebody
</I>&gt;<i> tell me why it is necessary? If it is used by mcs, then how
</I>&gt;<i> does 
</I>&gt;<i> mcs runs on the MS runtime which does not allow that?
</I>
mcs running on mono uses the 0 index to create a parameter and
set the marshaling info for the return type of a method. This is because
the Reflection.Emit API didn't allow it. When running on the MS runtime,
mcs catches the exception and basically tells the user to use the mono
runtime.
In version 1.1 of .net, MS added the SetMarshal() call on MethodBuilder,
so we should switch to use that instead of using the 0 index (internally
in the mono runtime we can continue to use the same mechanism, just not
expose it to the user). mcs should be changed to do a GetMethod/Invoke
on SetMarshal, so that it can be still compiled on the 1.1 version of
the framework.

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000751.html">[Mono-devel-list] Corlib NUnit Failures
</A></li>
	<LI>Next message: <A HREF="000754.html">[Mono-devel-list] Corlib NUnit Failures
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#752">[ date ]</a>
              <a href="thread.html#752">[ thread ]</a>
              <a href="subject.html#752">[ subject ]</a>
              <a href="author.html#752">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
