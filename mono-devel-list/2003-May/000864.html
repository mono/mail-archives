<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] System.Reflection.Emit Build Errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20System.Reflection.Emit%20Build%20Errors&In-Reply-To=KDEKJMMOLGAOAJOIDFOPCEIMKEAA.ndrochak%40gol.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000861.html">
   <LINK REL="Next"  HREF="000865.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] System.Reflection.Emit Build Errors</H1>
    <B>bmaurer at users.sourceforge.net</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20System.Reflection.Emit%20Build%20Errors&In-Reply-To=KDEKJMMOLGAOAJOIDFOPCEIMKEAA.ndrochak%40gol.com"
       TITLE="[Mono-devel-list] System.Reflection.Emit Build Errors">bmaurer at users.sourceforge.net
       </A><BR>
    <I>Tue May 20 08:46:02 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000861.html">[Mono-devel-list] System.Reflection.Emit Build Errors
</A></li>
        <LI>Next message: <A HREF="000865.html">[Mono-devel-list] System.Reflection.Emit Build Errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#864">[ date ]</a>
              <a href="thread.html#864">[ thread ]</a>
              <a href="subject.html#864">[ subject ]</a>
              <a href="author.html#864">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>First, I apologize for the false alarm.

However, I think that these sorts of things can be avoided by automated
means. As joelonsoftware.com correctly points out, building mono should
be possible in one command line: &quot;make &amp;&amp; make install&quot;. The class libs
should be done with &quot;make &amp;&amp; make install prefix=/my/prefix&quot;. Steps such
as &quot;build corlib, install it, build mono, build the rest of the class
libs&quot; tend to lead to many mistakes, especially for a Linux newbie (such
as myself). I think that the best solution would be to make a shell
script that did the build *right* (actually two, one for a clean, one
for incremental). Having a single, official build would solve the
problems I am having completely.

Another solution would be to have some sort of &quot;corlib version&quot; variable
and a &quot;mono version&quot; variable. Every time a change that breaks
compatibility between corlib and the runtime, both numbers could be
incremented. At runtime, mono would check that corlib was at the same
version. At build time, if make realized that the file with version
numbers had changed, than it would make sure the build was executed
properly. 

We could also have make create a backup of mono and corlib every time
the &quot;version&quot; number changed. Then, for example, if mono was backed up
by the mono makefile, the mcs makefile could know that to build corlib,
it would first have to take the old mono executable and temporarily use
that to execute mcs and run corlib, and then to thereafter use the new
corlib and new mono.

Since I have proven myself completely incompetent to build mono myself
;-), I hardly think I should be the one making a script for everyone
else to do it. It would be great if one of the expert hackers could do
this. Volunteers?

I also like nickd's solution of keeping the corlib &amp; mono from the
latest release on cvs, any possibility of actually doing that?

Sincerely,
Ben Maurer

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>] On Behalf Of Nick
Drochak
Sent: Tuesday, May 20, 2003 6:20 AM
To: Varga Zoltan; Ben Maurer
Cc: Mono Development
Subject: RE: [Mono-devel-list] System.Reflection.Emit Build Errors

|<i> -----Original Message-----
</I>|<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>
</I>|<i> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>]On Behalf Of Varga
</I>Zoltan
|<i> Sent: Tuesday, May 20, 2003 7:03 PM
</I>|<i> To: Ben Maurer
</I>|<i> Cc: Mono Development
</I>|<i> Subject: Re: [Mono-devel-list] System.Reflection.Emit Build Errors
</I>|<i>
</I>|<i>
</I>|<i>
</I>|<i>                                                Hi,
</I>|<i>
</I>|<i>    Sometimes there is a change in the layout of some corlib
</I>|<i> classes known
</I>|<i> by the runtime. When this happens, you have to compile a new
</I>|<i> corlib
</I>|<i> first with the old runtime, then compile a new runtime. When
</I>|<i> you do
</I>|<i> it the other way, it will not work.
</I>
I also had a problem building corlib these past few days. And I *always*
build the class libs first before building the new runtime, but even so
I
still had a similar problem as Ben. Probably I was careless or
something.

Regardless, it does happen sometimes even when you think you know what
you
are doing.  A simple solution is to provide just the corlib.dll
somewhere,
for anyone to download when it happens to them.  If you know you are
going
to break sync, then maybe you can upload a new corlib.dll somewhere in
case
someone gets messed up (like I was until mmarker kindly helped me out).

Thoughts?

Nick D.


_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000861.html">[Mono-devel-list] System.Reflection.Emit Build Errors
</A></li>
	<LI>Next message: <A HREF="000865.html">[Mono-devel-list] System.Reflection.Emit Build Errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#864">[ date ]</a>
              <a href="thread.html#864">[ thread ]</a>
              <a href="subject.html#864">[ subject ]</a>
              <a href="author.html#864">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
