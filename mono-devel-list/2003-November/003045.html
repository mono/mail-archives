<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Two BigInteger.isProbablePrime bugs...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Two%20BigInteger.isProbablePrime%20bugs...&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003042.html">
   <LINK REL="Next"  HREF="003046.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Two BigInteger.isProbablePrime bugs...</H1>
    <B>Pieter Philippaerts</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Two%20BigInteger.isProbablePrime%20bugs...&In-Reply-To="
       TITLE="[Mono-devel-list] Two BigInteger.isProbablePrime bugs...">Pieter at mentalis.org
       </A><BR>
    <I>Wed Nov 19 20:08:15 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003042.html">[Mono-devel-list] Compiling from CVS
</A></li>
        <LI>Next message: <A HREF="003046.html">[Mono-devel-list] Two BigInteger.isProbablePrime bugs [continued]...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3045">[ date ]</a>
              <a href="thread.html#3045">[ thread ]</a>
              <a href="subject.html#3045">[ subject ]</a>
              <a href="author.html#3045">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey there,
I've been using the BigInteger class for a while now, and I've come across
two bugs in the isProbablePrime method.

The first bug has to do with small primes. If you initialize a BigInteger
instance with a small prime, isProbablePrime will always return false. If
you look at the for loop in the isProbablePrime method, it's easy to see why
it does this. This bug can be fixed by changing the for loop to this:
    for (int p = 0; p &lt; smallPrimes.Length; p++) {
        if (this == smallPrimes [p])
            return true;
        if (this % smallPrimes [p] == 0)
            return false;
    }

The second bug has to do with the primality test of large primes. If I
initialize the BigInteger class with one of the primes from the &quot;OAKLEY Key
Determination Protocol&quot; [RFC 2412, <A HREF="http://www.faqs.org/rfcs/rfc2412.html],">http://www.faqs.org/rfcs/rfc2412.html],</A>
the isProbablePrime method always returns false even though the numbers are
definitely prime [this should never happen -- a primality test should never
mark a prime as a composite number]. I've attached a test application so you
can reproduce the behavior [the code uses the BigInteger.Parse method I
posted here a few days ago -- I've included a commented version of this
method in the file if you don't have this method].

Regards,
Pieter Philippaerts
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: BigIntBug.cs
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20031120/772d0235/attachment.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20031120/772d0235/attachment.pl</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003042.html">[Mono-devel-list] Compiling from CVS
</A></li>
	<LI>Next message: <A HREF="003046.html">[Mono-devel-list] Two BigInteger.isProbablePrime bugs [continued]...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3045">[ date ]</a>
              <a href="thread.html#3045">[ thread ]</a>
              <a href="subject.html#3045">[ subject ]</a>
              <a href="author.html#3045">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
