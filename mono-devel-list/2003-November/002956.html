<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: AMD64 patches.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20AMD64%20patches.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002953.html">
   <LINK REL="Next"  HREF="002958.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: AMD64 patches.</H1>
    <B>mono_devel at workingpages.com</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20AMD64%20patches.&In-Reply-To="
       TITLE="[Mono-devel-list] Re: AMD64 patches.">mono_devel at workingpages.com
       </A><BR>
    <I>Fri Nov 14 22:27:54 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002953.html">[Mono-devel-list] AMD64 patches.
</A></li>
        <LI>Next message: <A HREF="002958.html">[Mono-devel-list] Mono crashes with stack overflow exception at GC_clear_stack_inner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2956">[ date ]</a>
              <a href="thread.html#2956">[ thread ]</a>
              <a href="subject.html#2956">[ subject ]</a>
              <a href="author.html#2956">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Replying to Paolo Molaro's email.

I also prefer to call the architecture amd64. I used x86_64 because
that is what uname returns and I thought I would have to do work to get
the config scripts to handle AMD64 instead. However if others agree
that amd64 is the way to go, I'm happy to make the changes.

I will look at cleaning up x86_64-codegen.h as well. It is not as
simple as having the AMD64 macros call the x86 ones as the REX prefix
must be immediately next to the opcode . That is if there are any
other prefixes, they must come before the REX prefix. This could be
easily dealt with if it is felt that the existing x86-codegen.h file
can be modified to support AMD64. (I figured that would be frowned
upon. This is also a case where a bunch of small C++ classes would
work better than macros, but that is likely outside the scope of
consideration.)
 
Is the register number not getting masked in reg_emit really a bug?
x86_address_byte does mask the high bit off. I'm pretty sure all the
emit macros end up calling x86_address_byte whenever they emit a
register number, but I'll check the code carefully to make sure there
is not a case that is missed.

Should I make the x86_64 -&gt; amd64 change and resubmit the
patch? I'll also see what I can do to remove the code duplication in
the codegen.h stuff.

Also, is there anyone else out there with AMD64 hardware that plans to
try this out?

Zalman Stern


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002953.html">[Mono-devel-list] AMD64 patches.
</A></li>
	<LI>Next message: <A HREF="002958.html">[Mono-devel-list] Mono crashes with stack overflow exception at GC_clear_stack_inner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2956">[ date ]</a>
              <a href="thread.html#2956">[ thread ]</a>
              <a href="subject.html#2956">[ subject ]</a>
              <a href="author.html#2956">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
