<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] LosFormatter needs to save array type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20LosFormatter%20needs%20to%20save%20array%20type&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003136.html">
   <LINK REL="Next"  HREF="003138.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] LosFormatter needs to save array type</H1>
    <B>Matthew Mastracci</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20LosFormatter%20needs%20to%20save%20array%20type&In-Reply-To="
       TITLE="[Mono-devel-list] LosFormatter needs to save array type">matt at aclaro.com
       </A><BR>
    <I>Fri Nov 28 13:17:33 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003136.html">[Mono-devel-list] Asynchronous invocation in remoting not	working properly
</A></li>
        <LI>Next message: <A HREF="003138.html">[Mono-devel-list] LosFormatter needs to save array type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3137">[ date ]</a>
              <a href="thread.html#3137">[ thread ]</a>
              <a href="subject.html#3137">[ subject ]</a>
              <a href="author.html#3137">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've noticed a difference in LosFormatter behaviour between MS.NET and 
Mono.  In MS.NET, the array types serialized by the LosFormatter retain 
their array typing, while the Mono ones lose it.  This tends to break 
controls that assume certain strongly-typed arrays will be returned in 
the ViewState (mostly 3rd-party controls).

I have a patch that I'm playing with here, but it's not fully tested. 
All I'm doing is serializing the type of the array as the first element, 
while is then restored while building the array and passed to 
ArrayList.ToArray() to ensure that we get the array of the correct type.

I can send the patch when I'm confident I haven't broken anything.  :)

Matt.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003136.html">[Mono-devel-list] Asynchronous invocation in remoting not	working properly
</A></li>
	<LI>Next message: <A HREF="003138.html">[Mono-devel-list] LosFormatter needs to save array type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3137">[ date ]</a>
              <a href="thread.html#3137">[ thread ]</a>
              <a href="subject.html#3137">[ subject ]</a>
              <a href="author.html#3137">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
