<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Socket with ProtocolType.Udp hangs occasionally in	ReceiveFrom()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Socket%20with%20ProtocolType.Udp%20hangs%20occasionally%20in%0A%09ReceiveFrom%28%29&In-Reply-To=%3C0E71206DBC150A45B3FFA538A78AEC5578931E81%40DC-EXCHMBX01.Nanofluidics.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043564.html">
   <LINK REL="Next"  HREF="043563.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Socket with ProtocolType.Udp hangs occasionally in	ReceiveFrom()</H1>
    <B>David Evans</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Socket%20with%20ProtocolType.Udp%20hangs%20occasionally%20in%0A%09ReceiveFrom%28%29&In-Reply-To=%3C0E71206DBC150A45B3FFA538A78AEC5578931E81%40DC-EXCHMBX01.Nanofluidics.com%3E"
       TITLE="[Mono-dev] Socket with ProtocolType.Udp hangs occasionally in	ReceiveFrom()">devans at pacificbiosciences.com
       </A><BR>
    <I>Thu Mar  3 20:33:13 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="043564.html">[Mono-dev] Embedded API: .ctor method signature query [mono]
</A></li>
        <LI>Next message: <A HREF="043563.html">[Mono-dev] Embedded API: delegate type building
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43562">[ date ]</a>
              <a href="thread.html#43562">[ thread ]</a>
              <a href="subject.html#43562">[ subject ]</a>
              <a href="author.html#43562">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I'm seeing a rare hang in Socket.ReceiveFrom() where the receive timeout isn't respected. What's also odd is then on the server side once this wedge occurs the server gets the same packet that had been sent to it over and over and it keeps responding to it endlessly - but the client never returns from ReceiveFrom(). This is in a test sending packets over localhost between two threads.

Then, if I switch to use Socket.Connect(), Socket.Send(), and Socket.Receive() instead the problem doesn't occur. Appears to only get me if I use the SendTo/ReceiveFrom variants, which I gather are more commonly used for UDP sockets.

I filed a bug with a test app to reproduce it, but wanted to mention it in case anyone else has run into this already or can point out if I'm doing something incorrectly:
<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=39332">https://bugzilla.xamarin.com/show_bug.cgi?id=39332</A>

Reproduced this with mono 4.0.4.1, 4.2.2.30, and 4.3.2.467 on Ubuntu 14.04.1

Best,
David

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20160303/4cf0325b/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20160303/4cf0325b/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043564.html">[Mono-dev] Embedded API: .ctor method signature query [mono]
</A></li>
	<LI>Next message: <A HREF="043563.html">[Mono-dev] Embedded API: delegate type building
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43562">[ date ]</a>
              <a href="thread.html#43562">[ thread ]</a>
              <a href="subject.html#43562">[ subject ]</a>
              <a href="author.html#43562">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
