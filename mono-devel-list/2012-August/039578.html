<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] runtime assisted object pools
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20runtime%20assisted%20object%20pools&In-Reply-To=%3C95B2CFB0-1631-4CDF-A63C-607A8D504664%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039577.html">
   <LINK REL="Next"  HREF="039579.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] runtime assisted object pools</H1>
    <B>Jonathan Shore</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20runtime%20assisted%20object%20pools&In-Reply-To=%3C95B2CFB0-1631-4CDF-A63C-607A8D504664%40gmail.com%3E"
       TITLE="[Mono-dev] runtime assisted object pools">jonathan.shore at gmail.com
       </A><BR>
    <I>Fri Aug 31 23:18:54 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039577.html">[Mono-dev] tuning sgen performance &amp; bug
</A></li>
        <LI>Next message: <A HREF="039579.html">[Mono-dev] runtime assisted object pools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39578">[ date ]</a>
              <a href="thread.html#39578">[ thread ]</a>
              <a href="subject.html#39578">[ subject ]</a>
              <a href="author.html#39578">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I use object pools where I have control over the lifecycle of objects used with high frequency.    In the application I was discussing with respect to sgen, it is very hard to explicitly use object pools (nor can I use structs in this case).

I think Miguel mentioned briefly in a blog, but would be interesting to have a non-MS compatible extension or special Mono namespace library / runtime support for automatic object pooling.    I have a number of applications that need to deal with billions of objects cycled through.   Instead of bending over backwards to try to fit in an explicit ObjectPool model, would love to be able to designate a maximum fixed size pool that would be handled as a special case by the GC:

whenever new &lt;someobject&gt; () is invoked, the runtime will attempt to pull from an existing object in pool
if the pool is full, a GC sweep is done to determine whether any of the objects / slots in the pool are now garbage, perhaps compacting or just marking.
when an object becomes garbage, nothing explicit happens, is only marked &amp; reused on the next new.

I realize this is not part of the MS CLR spec, but is *very* useful for all sorts of high throughput services and processing.   It seems like a much simplified form of what sgen or beohm would be doing.

Thoughts?

Jonathan

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120831/48f90e5f/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120831/48f90e5f/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039577.html">[Mono-dev] tuning sgen performance &amp; bug
</A></li>
	<LI>Next message: <A HREF="039579.html">[Mono-dev] runtime assisted object pools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39578">[ date ]</a>
              <a href="thread.html#39578">[ thread ]</a>
              <a href="subject.html#39578">[ subject ]</a>
              <a href="author.html#39578">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
