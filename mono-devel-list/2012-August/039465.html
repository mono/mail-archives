<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Best practices for porting Mono,	and a couple of questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Best%20practices%20for%20porting%20Mono%2C%0A%09and%20a%20couple%20of%20questions&In-Reply-To=%3C501AA8BE.5020409%40saillune.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039464.html">
   <LINK REL="Next"  HREF="039466.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Best practices for porting Mono,	and a couple of questions</H1>
    <B>Ben Carter</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Best%20practices%20for%20porting%20Mono%2C%0A%09and%20a%20couple%20of%20questions&In-Reply-To=%3C501AA8BE.5020409%40saillune.net%3E"
       TITLE="[Mono-dev] Best practices for porting Mono,	and a couple of questions">benml at saillune.net
       </A><BR>
    <I>Thu Aug  2 16:20:14 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039464.html">[Mono-dev] workflow foundation 4
</A></li>
        <LI>Next message: <A HREF="039466.html">[Mono-dev] Stack overflow in Array.Sort for large arrays
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39465">[ date ]</a>
              <a href="thread.html#39465">[ thread ]</a>
              <a href="subject.html#39465">[ subject ]</a>
              <a href="author.html#39465">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

 I'm new to this ML, so I hope that this isn't an FAQ or anything, but
searching the archives didn't turn up much in the way of answers so
fingers crossed...

 I'm currently looking into porting Mono to an ARM-based embedded system
that sadly doesn't have much of a POSIX layer. Therefore, as far as I
can tell, there are three main areas of the code that I need to touch
(leaving ABI stuff off to one side for the moment):

1) eglib
2) pthreads (since it's used in lots of places, it seems easier to write
a pthreads-compatible wrapper than try to change the code to use the
native threading API)
3) io-layer

 Now, the first couple of those are fairly straightforward, but the
third has me a little confused - specifically, the current io-layer
seems to be a mix of support code for various OSes (Win32, Linux and
OSX, primarily) with #ifdefs to sort it all out. However, that is
presumably because those all share enough common posix-base code that
the advantages of keeping them together outweigh the disadvantages...

 Thus, for this new system, my instinct is that I should be creating an
entirely new io-layer directory and writing all the necessary code
there. However, I can't see any obvious way to switch the build process
over to using an alternative directory (other than replacing the
existing one)... is there something I've missed that allows swapping
OSes within a single source tree, or is the assumption that each OS
should have its own branch with a unique copy of io-layer?

 (or am I barking up the wrong tree entirely here... would it be simpler
to write some posix emulation wrapper code in the same way that I'm
handling pthreads?)

 On a slightly different topic, I found a post from a few years back
about porting Mono to a new OS (<A HREF="http://www.skyos.org/?q=node/464">http://www.skyos.org/?q=node/464</A>) that
mentions mmap being a requirement. Thus far I've yet to spot anything in
the current source code that looks like it would fail critically without
mmap, but again I could be missing it entirely - does anyone know if
lack of it will cause insurmountable problems?

 Any information on these or indeed advice on porting strategy in
general would be very gratefully received - many thanks in advance!

-- 
 Ben Carter - <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ben at saillune.net</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039464.html">[Mono-dev] workflow foundation 4
</A></li>
	<LI>Next message: <A HREF="039466.html">[Mono-dev] Stack overflow in Array.Sort for large arrays
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39465">[ date ]</a>
              <a href="thread.html#39465">[ thread ]</a>
              <a href="subject.html#39465">[ subject ]</a>
              <a href="author.html#39465">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
