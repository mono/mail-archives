<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Patches for mono-winforms
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Patches%20for%20mono-winforms&In-Reply-To=%3C1345322934096-4656311.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039518.html">
   <LINK REL="Next"  HREF="039539.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Patches for mono-winforms</H1>
    <B>Stifu</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Patches%20for%20mono-winforms&In-Reply-To=%3C1345322934096-4656311.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] Patches for mono-winforms">stifu at free.fr
       </A><BR>
    <I>Sat Aug 18 20:48:54 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039518.html">[Mono-dev] Patches for mono-winforms
</A></li>
        <LI>Next message: <A HREF="039539.html">[Mono-dev] Patches for mono-winforms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39537">[ date ]</a>
              <a href="thread.html#39537">[ thread ]</a>
              <a href="subject.html#39537">[ subject ]</a>
              <a href="author.html#39537">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The OneIdlePerThread test does not seem to run on Windows, for some reason.
It doesn't fail, but it doesn't run... Therefore, maybe it shouldn't pass on
Linux.


Steven Boswell II wrote
&gt;<i> 
</I>&gt;<i> <A HREF="https://github.com/mono/mono/commit/38bdbad5071487a11f4330077c383375dce39840">https://github.com/mono/mono/commit/38bdbad5071487a11f4330077c383375dce39840</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> This change introduced a OneIdlePerThread unit test that has never worked
</I>&gt;<i> for me. &#160;All I get is the following exception:
</I>&gt;<i> 
</I>&gt;<i> System.InvalidOperationException : Cannot call Invoke or BeginInvoke on a
</I>&gt;<i> control until the window handle is created
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Patch #18 fixes that by creating a Form type that calls CreateHandle() in
</I>&gt;<i> its constructor. &#160;But now the unit test hangs hard in Mono!
</I>&gt;<i> 
</I>&gt;<i> I created a project with the unit-test, and when run in Mono, it hangs
</I>&gt;<i> hard; selecting &quot;Run -&gt; Pause&quot; in MonoDevelop hangs MonoDevelop, and the
</I>&gt;<i> debugged process chews up 100% of the CPU time
</I>&gt;<i> 
</I>&gt;<i> I ran the project in .NET, and instead of a hang, I get this exception:
</I>&gt;<i> 
</I>&gt;<i> System.InvalidOperationException: Cross-threaded operation not valid:
</I>&gt;<i> Control '' accessed from a thread other than the thread it was created on.
</I>&gt;<i> 
</I>&gt;<i> Patch #18a fixes that by moving the creation of form2 into the right
</I>&gt;<i> thread. &#160;Now the unit test passes.
</I>&gt;<i> 
</I>&gt;<i> So patch #18a can be checked in, but note that patch #18 demonstrates that
</I>&gt;<i> Mono hangs in a situation where .NET throws an exception.
</I>&gt;<i> 
</I>&gt;<i> Steven Boswell
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at .ximian</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>


--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Patches-for-mono-winforms-tp4650627p4656311.html">http://mono.1490590.n4.nabble.com/Patches-for-mono-winforms-tp4650627p4656311.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039518.html">[Mono-dev] Patches for mono-winforms
</A></li>
	<LI>Next message: <A HREF="039539.html">[Mono-dev] Patches for mono-winforms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39537">[ date ]</a>
              <a href="thread.html#39537">[ thread ]</a>
              <a href="subject.html#39537">[ subject ]</a>
              <a href="author.html#39537">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
