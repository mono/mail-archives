<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Assertion failure on exit -- NUnit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Assertion%20failure%20on%20exit%20--%20NUnit&In-Reply-To=0AD60EB6-251B-49DC-AD22-9F32DE65D795%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031536.html">
   <LINK REL="Next"  HREF="031558.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Assertion failure on exit -- NUnit</H1>
    <B>Zoltan Varga</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Assertion%20failure%20on%20exit%20--%20NUnit&In-Reply-To=0AD60EB6-251B-49DC-AD22-9F32DE65D795%40gmail.com"
       TITLE="[Mono-dev] Assertion failure on exit -- NUnit">vargaz at gmail.com
       </A><BR>
    <I>Sat Mar 28 16:02:07 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="031536.html">[Mono-dev] Assertion failure on exit -- NUnit
</A></li>
        <LI>Next message: <A HREF="031558.html">[Mono-dev] Assertion failure on exit -- NUnit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31557">[ date ]</a>
              <a href="thread.html#31557">[ thread ]</a>
              <a href="subject.html#31557">[ subject ]</a>
              <a href="author.html#31557">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

  This is definitely a mono bug, so feel free to log a bug report. We would
need a testcase
or precise reproduction instructions to fix it tough.

         Zoltan

On Wed, Mar 25, 2009 at 8:57 PM, Casey Marshall
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">casey.s.marshall at gmail.com</A>&gt;wrote:

&gt;<i> I'm getting an intermittent assertion failure on mono 2.4 RC3, x86_64
</I>&gt;<i> Ubuntu 8.04, when running NUnit 2.4.7 on an assembly that doesn't have
</I>&gt;<i> any unit tests defined in it. It seems like it has something to do
</I>&gt;<i> with what is happening when the program is shutting down.
</I>&gt;<i>
</I>&gt;<i> Naturally, since it's part of our unit test infrastructure, having
</I>&gt;<i> mono exit with SIGABRT occasionally is noise we'd rather not have.
</I>&gt;<i>
</I>&gt;<i> Is this a known issue? Should I file a bug? I also noticed that Mono
</I>&gt;<i> would fail with an assertion error in SetLastError when the program
</I>&gt;<i> was exiting.
</I>&gt;<i>
</I>&gt;<i> Here's part of the output:
</I>&gt;<i>
</I>&gt;<i> **
</I>&gt;<i> ** ERROR:(reflection.c:10510):mono_reflection_lookup_dynamic_token:
</I>&gt;<i> code should not be reached
</I>&gt;<i> Stacktrace:
</I>&gt;<i>
</I>&gt;<i>   at
</I>&gt;<i> System
</I>&gt;<i> .Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteObject
</I>&gt;<i> (System.IO.BinaryWriter,long,object) &lt;0xffffffff&gt;
</I>&gt;<i>   at
</I>&gt;<i> System
</I>&gt;<i> .Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteObject
</I>&gt;<i> (System.IO.BinaryWriter,long,object) &lt;0x002a8&gt;
</I>&gt;<i>   at
</I>&gt;<i> System
</I>&gt;<i> .Runtime
</I>&gt;<i> .Serialization.Formatters.Binary.ObjectWriter.WriteObjectInstance
</I>&gt;<i> (System.IO.BinaryWriter,object,bool) &lt;0x0016b&gt;
</I>&gt;<i>   at
</I>&gt;<i> System
</I>&gt;<i> .Runtime
</I>&gt;<i> .Serialization.Formatters.Binary.ObjectWriter.WriteQueuedObjects
</I>&gt;<i> (System.IO.BinaryWriter) &lt;0x00037&gt;
</I>&gt;<i>   at
</I>&gt;<i> System
</I>&gt;<i> .Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteObjectGraph
</I>&gt;<i> (System
</I>&gt;<i> .IO.BinaryWriter,object,System.Runtime.Remoting.Messaging.Header[])
</I>&gt;<i> &lt;0x0005f&gt;
</I>&gt;<i>   at
</I>&gt;<i> System
</I>&gt;<i> .Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize
</I>&gt;<i> (System.IO.Stream,object,System.Runtime.Remoting.Messaging.Header[])
</I>&gt;<i> &lt;0x0033b&gt;
</I>&gt;<i>   at
</I>&gt;<i> System
</I>&gt;<i> .Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize
</I>&gt;<i> (System.IO.Stream,object) &lt;0x00023&gt;
</I>&gt;<i>   at System.Threading.Thread.set_CurrentCulture
</I>&gt;<i> (System.Globalization.CultureInfo) &lt;0x000df&gt;
</I>&gt;<i>   at NUnit.Core.TestContext/ContextHolder.set_CurrentCulture
</I>&gt;<i> (System.Globalization.CultureInfo) &lt;0x0002f&gt;
</I>&gt;<i>   at NUnit.Core.TestContext/ContextHolder.ReverseChanges () &lt;0x000b7&gt;
</I>&gt;<i>   at NUnit.Core.TestContext.Restore () &lt;0x0001b&gt;
</I>&gt;<i>   at NUnit.Core.TestContext.Dispose () &lt;0x0000b&gt;
</I>&gt;<i>   at NUnit.Core.TestSuite.Run
</I>&gt;<i> (NUnit.Core.EventListener,NUnit.Core.ITestFilter) &lt;0x003cc&gt;
</I>&gt;<i>   at NUnit.Core.SimpleTestRunner.Run
</I>&gt;<i> (NUnit.Core.EventListener,NUnit.Core.ITestFilter) &lt;0x000a7&gt;
</I>&gt;<i>   at NUnit.Core.TestRunnerThread.TestRunnerThreadProc () &lt;0x00049&gt;
</I>&gt;<i>   at (wrapper runtime-invoke) object.runtime_invoke_void__this__
</I>&gt;<i> (object,intptr,intptr,intptr) &lt;0xffffffff&gt;
</I>&gt;<i>
</I>&gt;<i> [...]
</I>&gt;<i>
</I>&gt;<i> Thread 2 (Thread 0x405e2950 (LWP 7464)):
</I>&gt;<i> #0  0x00002b463e54f5cb in read () from /lib/libpthread.so.0
</I>&gt;<i> #1  0x0000000000481ad8 in mono_handle_native_sigsegv (
</I>&gt;<i>     signal=&lt;value optimized out&gt;, ctx=&lt;value optimized out&gt;)
</I>&gt;<i>     at mini-exceptions.c:1480
</I>&gt;<i> #2  &lt;signal handler called&gt;
</I>&gt;<i> #3  0x00002b463ea12095 in raise () from /lib/libc.so.6
</I>&gt;<i> #4  0x00002b463ea13af0 in abort () from /lib/libc.so.6
</I>&gt;<i> #5  0x00002b463decdd97 in g_assertion_message () from /usr/lib/
</I>&gt;<i> libglib-2.0.so.0
</I>&gt;<i> #6  0x0000000000530d3d in mono_reflection_lookup_dynamic_token (
</I>&gt;<i>     image=0x2aaaab68f000, token=&lt;value optimized out&gt;, valid_token=1,
</I>&gt;<i>     handle_class=0x405e1290, context=0x0) at reflection.c:10510
</I>&gt;<i> #7  0x00000000004c1aa7 in mono_lookup_dynamic_token (image=0x1d19,
</I>&gt;<i> token=7464,
</I>&gt;<i>     context=0x0) at class.c:6225
</I>&gt;<i> #8  0x000000000044dda2 in mono_method_to_ir (cfg=0x2aaaac017ba0,
</I>&gt;<i>     method=0xd1fd90, start_bblock=0x2aaaac02ab98,
</I>&gt;<i> end_bblock=0x2aaaac02ac98,
</I>&gt;<i>     return_var=0x0, dont_inline=0x2aaaac00bd60, inline_args=0x0,
</I>&gt;<i>     inline_offset=0, is_virtual_call=0) at method-to-ir.c:7147
</I>&gt;<i> #9  0x000000000041d7b3 in mini_method_compile (method=0xd1fd90,
</I>&gt;<i> opts=55667199,
</I>&gt;<i>     domain=0x2aaaab64fe00, run_cctors=&lt;value optimized out&gt;,
</I>&gt;<i>     compile_aot=&lt;value optimized out&gt;, parts=0) at mini.c:3196
</I>&gt;<i> #10 0x000000000041ee6a in mono_jit_compile_method (method=0xd1fd90)
</I>&gt;<i>     at mini.c:3812
</I>&gt;<i> #11 0x00000000004881cf in mono_magic_trampoline (regs=0x405e1a08,
</I>&gt;<i>     code=0x419a0dc8 &quot;A\203&lt;FE&gt;&lt;FF&gt;t\020I\213&lt;FD&gt;I\213&lt;F6&gt;I\213E&quot;,
</I>&gt;<i> m=0xd1fd90,
</I>&gt;<i>     tramp=&lt;value optimized out&gt;) at mini-trampolines.c:292
</I>&gt;<i> #12 0x0000000041b93168 in ?? ()
</I>&gt;<i> #13 0x0000000000ba00f0 in ?? ()
</I>&gt;<i> #14 0x0000000041ba3f58 in ?? ()
</I>&gt;<i> #15 0x00002aaaab6cd860 in ?? ()
</I>&gt;<i> #16 0x00002aaaab61b000 in ?? ()
</I>&gt;<i> #17 0x0000000000000014 in ?? ()
</I>&gt;<i> #18 0x00002aaaab61b000 in ?? ()
</I>&gt;<i> #19 0x00000000405e1ab0 in ?? ()
</I>&gt;<i> #20 0x000000004199972e in ?? ()
</I>&gt;<i> #21 0x00002aaaab6476a8 in ?? ()
</I>&gt;<i> #22 0x0000000000000200 in ?? ()
</I>&gt;<i> #23 0x0000000000927778 in ?? ()
</I>&gt;<i> #24 0x00002aaaab6476a8 in ?? ()
</I>&gt;<i> #25 0x0000000000000000 in ?? ()
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090328/218b83a6/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090328/218b83a6/attachment.html</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031536.html">[Mono-dev] Assertion failure on exit -- NUnit
</A></li>
	<LI>Next message: <A HREF="031558.html">[Mono-dev] Assertion failure on exit -- NUnit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31557">[ date ]</a>
              <a href="thread.html#31557">[ thread ]</a>
              <a href="subject.html#31557">[ subject ]</a>
              <a href="author.html#31557">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
