<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Bitmap manipulation - am I doing it right?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Bitmap%20manipulation%20-%20am%20I%20doing%20it%20right%3F&In-Reply-To=009a01c9b1fa%24c1e65d50%2445b317f0%24%40com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031576.html">
   <LINK REL="Next"  HREF="031581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Bitmap manipulation - am I doing it right?</H1>
    <B>Stifu</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Bitmap%20manipulation%20-%20am%20I%20doing%20it%20right%3F&In-Reply-To=009a01c9b1fa%24c1e65d50%2445b317f0%24%40com"
       TITLE="[Mono-dev] Bitmap manipulation - am I doing it right?">stifu at free.fr
       </A><BR>
    <I>Tue Mar 31 09:27:52 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="031576.html">[Mono-dev] Bitmap manipulation - am I doing it right?
</A></li>
        <LI>Next message: <A HREF="031581.html">[Mono-dev] Bitmap manipulation - am I doing it right?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31577">[ date ]</a>
              <a href="thread.html#31577">[ thread ]</a>
              <a href="subject.html#31577">[ subject ]</a>
              <a href="author.html#31577">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Andreas,

Thanks for your reply.

The size and the color of the rectangle can vary, and it can also be
semi-transparent, so I'm not sure making it a control is possible.
Your second idea is interesting, though, I'll have to try it.

By the way, I also wanted to clone because I show a small part of a big
image (and you can scroll through the Panel to show the other parts), and
didn't want to draw anything too big on my Panel (&quot;too big&quot; as in, bigger
than the Panel size, so out of bounds). So I actually have 2 Bitmaps in
memory: the whole image, and the partial (on-screen) image, and so I simply
clone the latter each time and update it when necessary (ie: when you scroll
or resize the window).
Your solution would be helpful when hovering the image to draw the rectangle
(which was fast already), but not when scrolling through the Panel (the
slowest part)... Not sure if I can do anything to make scrolling faster.


Andreas Nahr wrote:
&gt;<i> 
</I>&gt;<i> What you are doing is very inefficient.
</I>&gt;<i> Two ideas:
</I>&gt;<i> 1) Don't directly draw onto the image if you are only want so show
</I>&gt;<i> something
</I>&gt;<i> to the user and not really want to manipulate the image. You could easily
</I>&gt;<i> use a rectangle control and show that above the image control.
</I>&gt;<i> 2) Before you paint the rectangle copy the overpainted area into a
</I>&gt;<i> temporary
</I>&gt;<i> image. Then draw the rectangle. To (re)move the rectangle copy the data
</I>&gt;<i> back
</I>&gt;<i> from the temporary image (do not copy the entire image or create a new
</I>&gt;<i> one)
</I>&gt;<i> 
</I>&gt;<i> Andreas
</I>&gt;<i> 
</I>&gt;<i> -----Urspr&#252;ngliche Nachricht-----
</I>&gt;<i> Von: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>
</I>&gt;<i> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] Im Auftrag von Stifu
</I>&gt;<i> Gesendet: Dienstag, 31. M&#228;rz 2009 10:10
</I>&gt;<i> An: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Betreff: [Mono-dev] Bitmap manipulation - am I doing it right?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I have an application that displays graphics, stored in a Bitmap.
</I>&gt;<i> When you hover the concerned Panel, a square shows what tile you're
</I>&gt;<i> currently highlighting. So if you move your cursor, the square moves too.
</I>&gt;<i> 
</I>&gt;<i> What I'm doing is, each time I repaint my Panel, clone the Bitmap then
</I>&gt;<i> draw
</I>&gt;<i> the rectangle (square) on it. If I didn't clone it first and worked
</I>&gt;<i> directly
</I>&gt;<i> with the original Bitmap, then the squares would never go away, and keep
</I>&gt;<i> on
</I>&gt;<i> multiplying as you move your cursor over the Panel.
</I>&gt;<i> So I'm just wondering: is cloning the right thing to do here? Or is there
</I>&gt;<i> a
</I>&gt;<i> better / more efficient way to achieve the same results, like some kind of
</I>&gt;<i> temporary modifications to a Bitmap or whatever? (I'm using double
</I>&gt;<i> buffering, so everything has to be on the same Bitmap)
</I>&gt;<i> 
</I>&gt;<i> I already implemented clipping to improve performances, but I wanted to
</I>&gt;<i> know
</I>&gt;<i> if there was anything else I could do... Thanks.
</I>&gt;<i> -- 
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://www.nabble.com/Bitmap-manipulation---am-I-doing-it-right--tp22800298p">http://www.nabble.com/Bitmap-manipulation---am-I-doing-it-right--tp22800298p</A>
</I>&gt;<i> 22800298.html
</I>&gt;<i> Sent from the Mono - Dev mailing list archive at Nabble.com.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://www.nabble.com/Bitmap-manipulation---am-I-doing-it-right--tp22800298p22804927.html">http://www.nabble.com/Bitmap-manipulation---am-I-doing-it-right--tp22800298p22804927.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031576.html">[Mono-dev] Bitmap manipulation - am I doing it right?
</A></li>
	<LI>Next message: <A HREF="031581.html">[Mono-dev] Bitmap manipulation - am I doing it right?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31577">[ date ]</a>
              <a href="thread.html#31577">[ thread ]</a>
              <a href="subject.html#31577">[ subject ]</a>
              <a href="author.html#31577">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
