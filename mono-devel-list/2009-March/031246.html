<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] MonoMethod.cs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20MonoMethod.cs&In-Reply-To=1235775777.21542.35.camel%40lalo-laptop">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031248.html">
   <LINK REL="Next"  HREF="031250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] MonoMethod.cs</H1>
    <B>Matthew Metnetsky</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20MonoMethod.cs&In-Reply-To=1235775777.21542.35.camel%40lalo-laptop"
       TITLE="[Mono-dev] [PATCH] MonoMethod.cs">met at uberstats.com
       </A><BR>
    <I>Mon Mar  2 13:52:13 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="031248.html">[Mono-dev] setuid application
</A></li>
        <LI>Next message: <A HREF="031250.html">[Mono-dev] [PATCH] MonoMethod.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31246">[ date ]</a>
              <a href="thread.html#31246">[ thread ]</a>
              <a href="subject.html#31246">[ subject ]</a>
              <a href="author.html#31246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Gonzalo Paniagua Javier wrote:
&gt;<i> On Fri, 2009-02-27 at 09:50 -0500, Matthew Metnetsky wrote:
</I>&gt;&gt;<i> I was migrating some code from Mono 1.x to .NET 3.5 and came across a
</I>&gt;&gt;<i> very small bug. I was calling MonoMethod.Invoke like so:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> MethodInfo method = type.GetMethod(&quot;Foo&quot;); // Foo(int i, string name);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> method.Invoke(obj,
</I>&gt;&gt;<i>               BindingFlags.ExactBinding,
</I>&gt;&gt;<i>               new CustomerBinder(),
</I>&gt;&gt;<i>               new object[]{&quot;0&quot;, &quot;one&quot;},
</I>&gt;&gt;<i>               null);
</I>&gt;<i> 
</I>&gt;<i> Could you also provide a NUnit test like the ones we have in
</I>&gt;<i> corlib/Test/System.Reflection/ for this case?
</I>
Gonzalo,

I'm just about finished writing the tests, but I've hit one issue and
was wondering how you would like me to deal with it.

When BindingFlags.ExactBinding is used now and the call to
MonoMethod.Invoke has invalid argument types the process seg-faults
inside mono_object_unbox:

  assertion failed: (obj-&gt;vtable-&gt;klass-&gt;valuetype)

So my question is where would you like an ArgumentException thrown (as
MS does):

 1) MonoMethod.cs
 2) icall.c / where the path leads me

Thoughts?

Regards,

~ Matthew
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org">http://enigmail.mozdev.org</A>

iEYEARECAAYFAkmsKtsACgkQLrcoBjlTBf1jFACguhruRbF6kFvXRXaO4GRXF7Vn
QMwAn0YtOA4V39WDH36d3TnmznHWKOiN
=BBcI
-----END PGP SIGNATURE-----
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031248.html">[Mono-dev] setuid application
</A></li>
	<LI>Next message: <A HREF="031250.html">[Mono-dev] [PATCH] MonoMethod.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31246">[ date ]</a>
              <a href="thread.html#31246">[ thread ]</a>
              <a href="subject.html#31246">[ subject ]</a>
              <a href="author.html#31246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
