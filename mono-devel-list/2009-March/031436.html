<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev]  Bug 486705 Update / Fix?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Bug%20486705%20Update%20/%20Fix%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031445.html">
   <LINK REL="Next"  HREF="031467.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev]  Bug 486705 Update / Fix?</H1>
    <B>Thracx</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Bug%20486705%20Update%20/%20Fix%3F&In-Reply-To="
       TITLE="[Mono-dev]  Bug 486705 Update / Fix?">SpamMonkey01+Mono at gmail.com
       </A><BR>
    <I>Thu Mar 19 12:47:43 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="031445.html">[Mono-dev] [patch] coreclr: metadata/security-core-clr.c|h
</A></li>
        <LI>Next message: <A HREF="031467.html">[Mono-dev] Bug 486705 Update / Fix?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31436">[ date ]</a>
              <a href="thread.html#31436">[ thread ]</a>
              <a href="subject.html#31436">[ subject ]</a>
              <a href="author.html#31436">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I might have found the source of 
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=486705">https://bugzilla.novell.com/show_bug.cgi?id=486705</A> Bug 486705 .  For
whatever reason, I am unable to create a 
<A HREF="https://secure-www.novell.com/selfreg/jsp/createAccount.jsp">https://secure-www.novell.com/selfreg/jsp/createAccount.jsp</A> Novell account 
so if someone could post this info to that Bug on my behalf, it would be
much appreciated.

NextResult()  of OracleDataReader.cs (Line 848) has a //FIXME:  get next
result comment in it that simply returns false - this should be changed to
throw a NotImplementedException.  Bug 486705 is simply that Mono does not
currently support multiple result sets (ref cursors) but the lack of
exceptions does not tell the user this.  I think there are quite a few of
these comments in the source, most if not all of them should be changed to
NotImplementedExceptions.

We should also  <A HREF="http://www.mono-project.com/Oracle">http://www.mono-project.com/Oracle</A> document this , but I
don't seem to have the ability to change that wiki page.

I wrote this a while back before I had the latest source code, but I thought
I should just post it anyway for others to find when searching.

ExecuteReader(...) of System.Data.OracleClient.OracleCommand.cs (Line 580)
does a for-loop over p (0 thru Parameters.Count), yet the loop itself does
not use the loop-invariant (p) - instead it always uses '0' (i.e.
Parameters[0] on Line 581).  The code in OracleCommand.cs, method
GetNextResults()  (Line 661) has the proper loop so my understanding is when
Mono first gets the OracleDataReader/RefCursor, it should only get the first
cursor.  Later, command.NextResult() will be called by the user which will
call GetNextResults() and properly get the next cursor.

This would explain to my why ExecuteReader(...) never worked for me, as my
OUT cursors were never the first parameter in the Stored Procedure.  I've
had to save a reference to the OracleParameter when I declare it and then
use param.Value after a call to ExecuteNonQuery(...) (which does work fine
for multiple cursor out parameters).  I think this is a new bug, as I wasn't
able to find anything about it when searching (other than the possibly
related Bug 486705).

This might explain Bug 486705 to me - Shao Jiaxing was able to get his first
cursor out but couldn't get any data from any other cursors if the first
parameter wasn't a cursor.

In the least, I would like to add some comments/documentation to explain
what is happening here - does anyone know why I can't create a Novell
account?  It seems to time out.


-- 
View this message in context: <A HREF="http://www.nabble.com/Bug-486705-Update---Fix--tp22604148p22604148.html">http://www.nabble.com/Bug-486705-Update---Fix--tp22604148p22604148.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090319/c58730f4/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090319/c58730f4/attachment-0001.html</A> 
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031445.html">[Mono-dev] [patch] coreclr: metadata/security-core-clr.c|h
</A></li>
	<LI>Next message: <A HREF="031467.html">[Mono-dev] Bug 486705 Update / Fix?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31436">[ date ]</a>
              <a href="thread.html#31436">[ thread ]</a>
              <a href="subject.html#31436">[ subject ]</a>
              <a href="author.html#31436">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
