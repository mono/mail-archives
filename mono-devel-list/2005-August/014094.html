<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [Patch] Generic Array.Sort
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPatch%5D%20Generic%20Array.Sort&In-Reply-To=1124437755.3810.3.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014082.html">
   <LINK REL="Next"  HREF="014117.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [Patch] Generic Array.Sort</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPatch%5D%20Generic%20Array.Sort&In-Reply-To=1124437755.3810.3.camel%40localhost.localdomain"
       TITLE="[Mono-dev] [Patch] Generic Array.Sort">bmaurer at ximian.com
       </A><BR>
    <I>Fri Aug 19 10:31:46 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014082.html">[Mono-dev] [Patch] Generic Array.Sort
</A></li>
        <LI>Next message: <A HREF="014117.html">[Mono-dev] [Patch] Generic Array.Sort
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14094">[ date ]</a>
              <a href="thread.html#14094">[ thread ]</a>
              <a href="subject.html#14094">[ subject ]</a>
              <a href="author.html#14094">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> El vie, 19-08-2005 a las 01:08 -0400, Ben Maurer escribi&#195;&#179;:
</I>&gt;&gt;<i> &gt; Hey,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I've attached a patch containing the impl for the generic versions
</I>&gt;&gt;<i> of Array.Sort.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1) all the combsort stuff can probably go, IMHO -- With generics, we
</I>&gt;&gt;<i> will be able to inline stuff (it will take a bit of jit optimization
</I>&gt;&gt;<i> though -- we basically need to do inlining).
</I>&gt;<i>
</I>&gt;<i> Currently we use combsort with simple types, which doesn't need to use
</I>&gt;<i> the CompareTo methods, since they have associated runtime instructions,
</I>&gt;<i> as far as I know.
</I>&gt;<i>
</I>&gt;<i> Second, if inlining could help us in this scenario, can it do it right
</I>&gt;<i> now? If that's not the case, we could keep these combsort methods and
</I>&gt;<i> remove them when we are ready.
</I>
No, we can't. Also, to make this work we'd need to have a version of the
function with Comparer&lt;T&gt;.Default explicitly taken in the method (so that
we could inline there). However, the difference between the combsort and
the normal code path should be much smaller with generics. Feel free to do
a benchmark.

If we really wanted performance, we could do an icall here. The libc qsort
is hyper-optimized. IMHO, there is no way we could compete, especially for
large arrays. Feel free to benchmark and prove me wrong though.

-- Ben



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014082.html">[Mono-dev] [Patch] Generic Array.Sort
</A></li>
	<LI>Next message: <A HREF="014117.html">[Mono-dev] [Patch] Generic Array.Sort
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14094">[ date ]</a>
              <a href="thread.html#14094">[ thread ]</a>
              <a href="subject.html#14094">[ subject ]</a>
              <a href="author.html#14094">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
