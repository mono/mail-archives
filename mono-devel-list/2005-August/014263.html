<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] The Bleeding Edge of SuSE is not Mono-friendly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20The%20Bleeding%20Edge%20of%20SuSE%20is%20not%20Mono-friendly&In-Reply-To=200508230832.56313.hattons%40globalsymmetry.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014232.html">
   <LINK REL="Next"  HREF="014216.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] The Bleeding Edge of SuSE is not Mono-friendly</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20The%20Bleeding%20Edge%20of%20SuSE%20is%20not%20Mono-friendly&In-Reply-To=200508230832.56313.hattons%40globalsymmetry.com"
       TITLE="[Mono-dev] The Bleeding Edge of SuSE is not Mono-friendly">jonpryor at vt.edu
       </A><BR>
    <I>Wed Aug 24 07:11:34 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014232.html">[Mono-dev] The Bleeding Edge of SuSE is not Mono-friendly
</A></li>
        <LI>Next message: <A HREF="014216.html">[Mono-dev] Unhandled Exceptions in Novell.Directory.Ldap and other	Synchronization Issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14263">[ date ]</a>
              <a href="thread.html#14263">[ thread ]</a>
              <a href="subject.html#14263">[ subject ]</a>
              <a href="author.html#14263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2005-08-23 at 08:32 -0400, Steven T. Hatton wrote:
&gt;<i> For example, it's not clear how to 
</I>&gt;<i> determine or control which libraries and assemblies are visible, or being 
</I>&gt;<i> used by the currently running Mono or MCS.  
</I>
Two flags control that: -r and -pkg.

By default, only mscorlib.dll and System.dll are referenced by default.
(Microsoft CSC.EXE includes more by default.)

Additional assemblies can be referenced with -r:Assembly.dll, which will
find Assembly.dll in $prefix/lib/mono/1.0 ($prefix/lib/mono/2.0 for
gmcs) and any directories specified by -L.  Thus -r:System.Data.dll will
work, but -r:Foo.dll will fail (unless you also use -L Path/To/Foo.dll).

Using -pkg is a shorthand for -r; -pkg:PACKAGE is equivalent to saying
`pkg-config --libs PACKAGE`, which should return a list of -r flags.
For example, `pkg-config --libs gtk-sharp` returns:

        -r:/usr/lib/mono/gtk-sharp/glib-sharp.dll
        -r:/usr/lib/mono/gtk-sharp/pango-sharp.dll
        -r:/usr/lib/mono/gtk-sharp/atk-sharp.dll
        -r:/usr/lib/mono/gtk-sharp/gdk-sharp.dll
        -r:/usr/lib/mono/gtk-sharp/gtk-sharp.dll

&gt;<i> I found the comments about needed to install development packages if any of 
</I>&gt;<i> the build options were reported as &quot;no&quot; to be a bit nebulous.  A pointer 
</I>&gt;<i> suggesting the user have a look at the configure.in (or configure.in.in) as 
</I>&gt;<i> well as the bootstrap scripts might be helpful as part of the ./autogen.sh 
</I>&gt;<i> or ./bootstrap summary.
</I>
It's not entirely nebulous, as C glue code is necessary to allow Gtk# to
access all of the C libraries.  Since you need to build C libraries, you
need the C development packages to build them.

&gt;<i> Another point of confusion is how the pkg-config system actually works.  I 
</I>&gt;<i> understand there are various directories called &lt;path-to&gt;/pkgconfig, and an 
</I>&gt;<i> associated PKG_CONFIG_PATH environment variable.  What is not clear is how 
</I>&gt;<i> the pkg-config system relates to the resolution of resource location during 
</I>&gt;<i> various parts of the build process.  For example, if I happen to have 
</I>&gt;<i> multiple versions of a particular package, how does the build system chose 
</I>&gt;<i> one over the other?  Is the pkg-config system involved?
</I>
pkg-config is involved.  The assembly resolution process is described
above.  What happens if the same assembly name is present in multiple
directories (via -L)?  The first one found is used (IIRC).

How do you handle different versions?  By placing them into different
directories and/or giving them different pkg-config files.  For example,
Gtk# 2.0 is gtk-sharp-2.0 while Gtk# 1.0 is gtk-sharp.  This allows
pkg-config to return a different set of -r: flags, depending on which
version you want to use.

For anything that doesn't provide pkg-config files, you specify the
version you want to run against by using the -L flag (and making sure
that the directory you provide is the version you want).

It's important to keep in mind that at no point does mcs lookup
assemblies in the GAC for assembly resolution purposes.  Thus there is
no way to have multiple different versions of the same assembly --
you're limited by the filesystem to having one unique path name per
assembly, thus allowing you to control which version you reference by
setting up your directories intelligently.

 - Jon



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014232.html">[Mono-dev] The Bleeding Edge of SuSE is not Mono-friendly
</A></li>
	<LI>Next message: <A HREF="014216.html">[Mono-dev] Unhandled Exceptions in Novell.Directory.Ldap and other	Synchronization Issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14263">[ date ]</a>
              <a href="thread.html#14263">[ thread ]</a>
              <a href="subject.html#14263">[ subject ]</a>
              <a href="author.html#14263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
