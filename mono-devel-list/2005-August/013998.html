<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Source list per profile
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Source%20list%20per%20profile&In-Reply-To=BAY22-DAV15B23FD644BD120E84F40A3B00%40phx.gbl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013997.html">
   <LINK REL="Next"  HREF="014013.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Source list per profile</H1>
    <B>Eyal Alaluf</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Source%20list%20per%20profile&In-Reply-To=BAY22-DAV15B23FD644BD120E84F40A3B00%40phx.gbl"
       TITLE="[Mono-dev] [PATCH] Source list per profile">eyala at mainsoft.com
       </A><BR>
    <I>Tue Aug 16 06:41:22 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013997.html">[Mono-dev] [PATCH] Source list per profile
</A></li>
        <LI>Next message: <A HREF="014013.html">[Mono-dev] [PATCH] Source list per profile
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13998">[ date ]</a>
              <a href="thread.html#13998">[ thread ]</a>
              <a href="subject.html#13998">[ subject ]</a>
              <a href="author.html#13998">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,  Korn&#233;l.

The .jvm.cs are part of the Java build that we are now doing from svn using
make.
The issue is not limited to the .jvm files but also to Mono sources (e.g. in
System.Web) that are not part of the Java build. In System.Web we have about
30 Mono files that we don't compile in the Java build (because we don't
support yet on the fly compilation of .aspx files and CodeDom).
So in our case we have more files that belong to specific profiles or
combinations of profiles.
Personally, the issue here is the number of profiles and their complexity.
The more profiles are used the more useful the proposed change is. If
everyone believes that there are not going to be more profiles then the Java
profile then there is less incentive to change anything - the current
solution of ifdefs is still usable.

Eyal.

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf Of Korn&#233;l P&#225;l
Sent: Tuesday, August 16, 2005 1:08 PM
To: Yaacov Akiba Slama; Zoltan Varga
Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] [PATCH] Source list per profile

I think the current soltion is elegant.

Are the .jvm directories used to build the java version using Mono build
system or are they here only as a reference?

If .jvm directories are not used there are only 23 files that are enclosed
in #if NET_2_0 || TARGET_JVM. These files are for 2.0 and java. But if .jvm
is used to build the java version there are much more java specific file.

Korn&#233;l

----- Original Message -----
From: &quot;Yaacov Akiba Slama&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">yaslama at mainsoft.com</A>&gt;
To: &quot;Zoltan Varga&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">vargaz at gmail.com</A>&gt;
Cc: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Sent: Monday, August 15, 2005 11:52 AM
Subject: Re: [Mono-dev] [PATCH] Source list per profile


&gt;<i> Zoltan Varga wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>                                                  Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   The current solution might not be elegant, but it is simple, and it
</I>&gt;&gt;<i>works just fine.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> Yes. But because of the java profile, a large part of source files need
</I>&gt;<i> to be enclosed by #ifdef.
</I>&gt;<i> The solution Ynon proposed is still quite simple as you can see in the
</I>&gt;<i> files Ynon sent.
</I>&gt;<i>
</I>&gt;<i> What do others think ?
</I>&gt;<i>
</I>&gt;<i> --yas
</I>&gt;<i>
</I>&gt;&gt;<i>So I would vote for keeping it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                         Zoltan
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>On 8/11/05, Ynon Koralek &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">ynonk at mainsoft.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Hello,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>When building the libraries, each profile requires different source files
</I>&gt;&gt;&gt;<i>especially with the &quot;java&quot; profile.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>That problem is solved today (for net_2_0) using #ifdef &lt;PROFILE_NAME&gt;
</I>&gt;&gt;&gt;<i>enclosing the whole content of files but this solution is not IMHO very
</I>&gt;&gt;&gt;<i>elegant.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>The solution we suggest is to use an .xml file which defines which source
</I>&gt;&gt;&gt;<i>files need to be compiled for each profile.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>A new enclosed tool called gensourcelist creates a source file list from
</I>&gt;&gt;&gt;<i>this xml file specific for the profile currently built.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>The included patch includes this tool, and the needed modifications of
</I>&gt;&gt;&gt;<i>the
</I>&gt;&gt;&gt;<i>Makefiles in order to build it and use it.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>We included also the xml file needed to replace System.Data.dll.sources
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Please comment on the whole mechanism and let us know what you think
</I>&gt;&gt;&gt;<i>about
</I>&gt;&gt;&gt;<i>it.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Ynon
</I>&gt;&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;&gt;<i>Mono-devel-list mailing list
</I>&gt;&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>Mono-devel-list mailing list
</I>&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>
_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013997.html">[Mono-dev] [PATCH] Source list per profile
</A></li>
	<LI>Next message: <A HREF="014013.html">[Mono-dev] [PATCH] Source list per profile
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13998">[ date ]</a>
              <a href="thread.html#13998">[ thread ]</a>
              <a href="subject.html#13998">[ subject ]</a>
              <a href="author.html#13998">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
