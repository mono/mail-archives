<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Why is UnmanagedType_80 required?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Why%20is%20UnmanagedType_80%20required%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014424.html">
   <LINK REL="Next"  HREF="014430.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Why is UnmanagedType_80 required?</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Why%20is%20UnmanagedType_80%20required%3F&In-Reply-To="
       TITLE="[Mono-dev] Why is UnmanagedType_80 required?">kornelpal at hotmail.com
       </A><BR>
    <I>Wed Aug 31 05:04:02 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014424.html">[Mono-dev] Why is UnmanagedType_80 required?
</A></li>
        <LI>Next message: <A HREF="014430.html">[Mono-dev] Why is UnmanagedType_80 required?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14429">[ date ]</a>
              <a href="thread.html#14429">[ thread ]</a>
              <a href="subject.html#14429">[ subject ]</a>
              <a href="author.html#14429">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i> According to my experiences using no ArraySubType has the same result as
</I>&gt;&gt;<i> ArraySubType = (UnmanagedType)80 on mcs and csc.exe as well.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Could someone tell me please why UnmanagedType_80 is required?
</I>&gt;<i>
</I>&gt;<i>There was a bug in ancient versions of mcs wrt. constant folding in
</I>&gt;<i>attribute arguments.  We needed to declare an explicit enumeration
</I>&gt;<i>constant, and use that instead.
</I>
I think in this case we could simply eliminate UnmanagedType_80 in favour of
using no ArraySubType as I think we support those ancient versions no more.

&gt;<i>The actual reason for using '(UnmanagetType) 80': probably corcompare.
</I>
Using no ArraySubType and using ArraySubType = (UnmanagedType)80 results in
the same binary file. And we have no enumeration member (except
BOOTSTRAP_WITH_OLDLIB) but I think corcompare uses the full version of
assembly. So it cannot map value 80 to any enumeration member.

So the question is that do we need (UnmanagedType)80 in our standard build
procedure or in any tricky situations? Because if we only need it in
ancient, non-supported situations I think we should remove it.

Korn&#233;l


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014424.html">[Mono-dev] Why is UnmanagedType_80 required?
</A></li>
	<LI>Next message: <A HREF="014430.html">[Mono-dev] Why is UnmanagedType_80 required?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14429">[ date ]</a>
              <a href="thread.html#14429">[ thread ]</a>
              <a href="subject.html#14429">[ subject ]</a>
              <a href="author.html#14429">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
