<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] MonoPosixHelper and namespacing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20MonoPosixHelper%20and%20namespacing&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014371.html">
   <LINK REL="Next"  HREF="014375.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] MonoPosixHelper and namespacing</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20MonoPosixHelper%20and%20namespacing&In-Reply-To="
       TITLE="[Mono-dev] MonoPosixHelper and namespacing">jonpryor at vt.edu
       </A><BR>
    <I>Sun Aug 28 12:53:37 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014371.html">[Mono-dev] building mcs/mono on cygwin - solved
</A></li>
        <LI>Next message: <A HREF="014375.html">[Mono-dev] mcs patch for preprocessor directive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14372">[ date ]</a>
              <a href="thread.html#14372">[ thread ]</a>
              <a href="subject.html#14372">[ subject ]</a>
              <a href="author.html#14372">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Current programming practice is that library exports should have a
common prefix, forming a &quot;namespace.&quot;  Common examples abound in GLib
(with a g_ prefix) and GTK+ (with a gtk_ prefix).

libMonoPosixHelper.so in many cases disregards this, with exports like:

	create_z_stream
	helper_Mono_Posix_GetGroupName
	Mono_Posix_ToPollEvents
	open_serial
	read_serial
	set_attributes
	wexitstatus
	wifexited
	z_stream_deflate

A full list of exports can be retrieved from:

	nm -D $prefix/lib/libMonoPosixHelper.so | grep '^........ T'

Questions:

1.  Is this a problem?  I think it is, as we're &quot;polluting&quot; the dynamic
linker, but I could be wrong.

2.  If this is a problem, should we fix it?  Many of the non-prefixed
exports such as helper_Mono_Posix_GetGroupName and wifexited were
exported with Mono 1.0, so it might not be practical to remove them.  On
the other hand, we're no longer shipping a versioned .so (thus
publishing ABI instability), so this might not be a problem.

3.  What would be the appropriate prefix?  Mono_Posix is a common prefix
for most of the exports (194/218), though it doesn't match the typical
convention of using the library name.  MonoPosixHelper could be used, if
it's a little verbose.  &quot;mph&quot; might make sense, though it might be too
short.

4.  If we were to add a namespace to the exports, who would be impacted?
I know Mono.Posix.dll uses most of the exports, but it also seems that
System.dll uses some as well (via System.IO.Ports and
System.IO.Compression).

5.  Why is System.dll uses libMonoPosixHelper.so anyway?  Wouldn't it
make more sense for System.IO.Ports and System.IO.Compression to use
icalls instead, or at least a different library than MonoPosixHelper?
Perhaps libMonoSystemHelper.so? :-)

Thanks,
 - Jon



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014371.html">[Mono-dev] building mcs/mono on cygwin - solved
</A></li>
	<LI>Next message: <A HREF="014375.html">[Mono-dev] mcs patch for preprocessor directive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14372">[ date ]</a>
              <a href="thread.html#14372">[ thread ]</a>
              <a href="subject.html#14372">[ subject ]</a>
              <a href="author.html#14372">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
