<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Adding data to a dataset question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Adding%20data%20to%20a%20dataset%20question&In-Reply-To=il09hi.d1lhgw%40webmail.all-the-johnsons.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013906.html">
   <LINK REL="Next"  HREF="013907.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Adding data to a dataset question</H1>
    <B>Morten Mertner</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Adding%20data%20to%20a%20dataset%20question&In-Reply-To=il09hi.d1lhgw%40webmail.all-the-johnsons.co.uk"
       TITLE="[Mono-dev] Adding data to a dataset question">mono-devel-list at lists.ximian.com
       </A><BR>
    <I>Wed Aug 10 08:14:50 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013906.html">[Mono-dev] Adding data to a dataset question
</A></li>
        <LI>Next message: <A HREF="013907.html">[Mono-dev] Adding data to a dataset question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13953">[ date ]</a>
              <a href="thread.html#13953">[ thread ]</a>
              <a href="subject.html#13953">[ subject ]</a>
              <a href="author.html#13953">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Paul,

you are modifying the existing datarow reference, and instead need to 
create a new DataRow instance.

Yours,
Morten


Paul F. Johnson wrote:

&gt;<i>Hi,
</I>&gt;<i>
</I>&gt;<i>I'm trying to add multiple lines to a dataset but keep hitting the same
</I>&gt;<i>problem. Now, I can get around the problem, but I'm not happy with how I have
</I>&gt;<i>to do it.
</I>&gt;<i>
</I>&gt;<i>The code looks like this
</I>&gt;<i>
</I>&gt;<i>		private void FillDataSet()
</I>&gt;<i>		{
</I>&gt;<i>			// create a new DataTable in the DataSet
</I>&gt;<i>			dsSource.Tables.Add(&quot;sites&quot;);
</I>&gt;<i>			dsSource.Tables[&quot;sites&quot;].Columns.Add(&quot;url&quot;, Type.GetType(&quot;System.String&quot;));
</I>&gt;<i>			dsSource.Tables[&quot;sites&quot;].Columns.Add(&quot;name&quot;,
</I>&gt;<i>Type.GetType(&quot;System.String&quot;));
</I>&gt;<i>			
</I>&gt;<i>			// create a few rows and add them to the DataTable
</I>&gt;<i>			DataRow tempRow = dsSource.Tables[&quot;sites&quot;].NewRow();
</I>&gt;<i>			tempRow[&quot;url&quot;] = &quot;<A HREF="http://www.gotmono.com&quot;;">http://www.gotmono.com&quot;;</A>
</I>&gt;<i>			tempRow[&quot;name&quot;] = &quot;Mono community page&quot;;
</I>&gt;<i>			dsSource.Tables[&quot;sites&quot;].Rows.Add(tempRow);
</I>&gt;<i>			
</I>&gt;<i>			tempRow[&quot;url&quot;] = &quot;<A HREF="http://www.go-mono.com/tutorial&quot;;">http://www.go-mono.com/tutorial&quot;;</A>
</I>&gt;<i>			tempRow[&quot;name&quot;] = &quot;The Mono handbook&quot;;
</I>&gt;<i>			dsSource.Tables[&quot;sites&quot;].Rows.Add(tempRow);
</I>&gt;<i>			
</I>&gt;<i>			tempRow[&quot;url&quot;] = &quot;<A HREF="http://www.go-mono.com&quot;;">http://www.go-mono.com&quot;;</A>
</I>&gt;<i>			tempRow[&quot;name&quot;] = &quot;The main Mono website&quot;;
</I>&gt;<i>			dsSource.Tables[&quot;sites&quot;].Rows.Add(tempRow);
</I>&gt;<i>			
</I>&gt;<i>		        tempRow[&quot;url&quot;] =
</I>&gt;<i>&quot;<A HREF="http://www.nullenvoid.com/mono/wiki/index.php/WineSamples&quot;;">http://www.nullenvoid.com/mono/wiki/index.php/WineSamples&quot;;</A>
</I>&gt;<i>			tempRow[&quot;name&quot;] = &quot;Mono WineSamples&quot;;
</I>&gt;<i>			dsSource.Tables[&quot;sites&quot;].Rows.Add(tempRow);
</I>&gt;<i>		}
</I>&gt;<i>		
</I>&gt;<i>		private void BindControls()
</I>&gt;<i>		{
</I>&gt;<i>			// Bind the listBox
</I>&gt;<i>			listBox1.DataSource = dsSource.Tables[&quot;sites&quot;];
</I>&gt;<i>			listBox1.DisplayMember = &quot;name&quot;;
</I>&gt;<i>			listBox1.ValueMember = &quot;url&quot;;
</I>&gt;<i>			
</I>&gt;<i>			// Bind the combobox
</I>&gt;<i>			comboBox1.DataSource = dsSource.Tables[&quot;sites&quot;];
</I>&gt;<i>			comboBox1.DisplayMember = &quot;name&quot;;
</I>&gt;<i>			comboBox1.ValueMember = &quot;url&quot;;
</I>&gt;<i>			
</I>&gt;<i>			// Bind the DataGrid to the DataSet
</I>&gt;<i>			dataGrid.DataSource = dsSource;
</I>&gt;<i>			
</I>&gt;<i>			// Bind the second DataGrid to the DataSet
</I>&gt;<i>			dataGrid2.DataSource = dsSource.Tables[&quot;sites&quot;];
</I>&gt;<i>			
</I>&gt;<i>			// Bind the Textboxes to the selected row
</I>&gt;<i>			textBox.DataBindings.Add(&quot;text&quot;, dsSource.Tables[&quot;sites&quot;], &quot;name&quot;);
</I>&gt;<i>			textBox2.DataBindings.Add(&quot;text&quot;, dsSource.Tables[&quot;sites&quot;], &quot;url&quot;);
</I>&gt;<i>		}
</I>&gt;<i>
</I>&gt;<i>Clearly, the problem is coming from using temp constantly in the setting of
</I>&gt;<i>the data (if I comment out all but the first dataadd set, the program works
</I>&gt;<i>correctly-ish). The solution looks to be use an array of temps to add the
</I>&gt;<i>data.
</I>&gt;<i>
</I>&gt;<i>If the dataset type was an int, I could say ds.AutoIncrement (according to
</I>&gt;<i>MSDN).
</I>&gt;<i>
</I>&gt;<i>Is there a way to reuse temp or is the problem in that when the data is added,
</I>&gt;<i>the row counter is not incremented and so I'm trying to overwrite the same
</I>&gt;<i>data time and again?
</I>&gt;<i>
</I>&gt;<i>TTFN
</I>&gt;<i>
</I>&gt;<i>Paul
</I>&gt;<i>  
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013906.html">[Mono-dev] Adding data to a dataset question
</A></li>
	<LI>Next message: <A HREF="013907.html">[Mono-dev] Adding data to a dataset question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13953">[ date ]</a>
              <a href="thread.html#13953">[ thread ]</a>
              <a href="subject.html#13953">[ subject ]</a>
              <a href="author.html#13953">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
