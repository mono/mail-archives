<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] mcs.exe rsp file support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20mcs.exe%20rsp%20file%20support&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014450.html">
   <LINK REL="Next"  HREF="014416.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] mcs.exe rsp file support</H1>
    <B>Peter Dennis Bartok</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20mcs.exe%20rsp%20file%20support&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] mcs.exe rsp file support">peter at novonyx.com
       </A><BR>
    <I>Tue Aug 30 20:36:55 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014450.html">[Mono-dev] Mono on OSX 10.4 (Cocoa and Threading)
</A></li>
        <LI>Next message: <A HREF="014416.html">[Mono-dev] [PATCH] mcs.exe rsp file support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14414">[ date ]</a>
              <a href="thread.html#14414">[ thread ]</a>
              <a href="subject.html#14414">[ subject ]</a>
              <a href="author.html#14414">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Microsoft's csc.exe automatically adds everything contained in a csc.rsp 
file as commandline switches whenever csc is called, unless /noconfig is 
explicitly specified.

Mono's mcs.exe does not do that, which often causes confusion, especially 
for people coming from a Microsoft background and it also makes mcs 
incompatible in behaviour with csc.exe.

Attached is a patch for mcs that allows mcs to read command line options out 
of a mcs.rsp file. The rsp file will be read from the same directory that 
contains the Mono machine.config. (usually /etc/mono/1.0 or 
/usr/local/etc/mono/1.0)

The most obvious advantage is to not have to specify /r: on the command-line 
for every referenced assembly, assuming the mcs.rsp file contains the 
references, but the rsp file can contain other command-line switches as 
well, which a user might want set by default.

Since performance worries seem to be the main reason this feature has not 
yet been put into mcs before, I did some performance measurements with the 
following code and the attached mcs.rsp file:

  using System.Windows.Forms;
  class TV  : Form   {
     public static void Main()     {
     }
  }

Compile time went up 0.01s at the most (often less, in multiple runs) for 
the above code, when all assemblies were referenced, compared to just 
/r:System.Windows.Forms.dll specified on the command line.

Maybe someone can also test this with a slower machine, since I've only had 
a 2Ghz P4 for testing, to see what the impact would be with the patch and 
mcs.rsp. I know there's people with slower hardware, and it takes enough 
time as it is to compile mcs, but if the impact of the patch is not 
significant, it'd be great to get this patch in.

Cheers,
  Peter 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mcs.rsp
Type: application/octet-stream
Size: 519 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050830/3e606854/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050830/3e606854/attachment.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mcs.rsp.patch
Type: application/octet-stream
Size: 1466 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050830/3e606854/attachment-0001.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050830/3e606854/attachment-0001.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014450.html">[Mono-dev] Mono on OSX 10.4 (Cocoa and Threading)
</A></li>
	<LI>Next message: <A HREF="014416.html">[Mono-dev] [PATCH] mcs.exe rsp file support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14414">[ date ]</a>
              <a href="thread.html#14414">[ thread ]</a>
              <a href="subject.html#14414">[ subject ]</a>
              <a href="author.html#14414">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
