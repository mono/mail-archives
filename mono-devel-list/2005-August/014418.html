<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] mcs.exe rsp file support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20mcs.exe%20rsp%20file%20support&In-Reply-To=1125451098.7610.150.camel%40linux.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014416.html">
   <LINK REL="Next"  HREF="014420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] mcs.exe rsp file support</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20mcs.exe%20rsp%20file%20support&In-Reply-To=1125451098.7610.150.camel%40linux.site"
       TITLE="[Mono-dev] [PATCH] mcs.exe rsp file support">atsushi at ximian.com
       </A><BR>
    <I>Tue Aug 30 23:04:41 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014416.html">[Mono-dev] [PATCH] mcs.exe rsp file support
</A></li>
        <LI>Next message: <A HREF="014420.html">[Mono-dev] [PATCH] mcs.exe rsp file support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14418">[ date ]</a>
              <a href="thread.html#14418">[ thread ]</a>
              <a href="subject.html#14418">[ subject ]</a>
              <a href="author.html#14418">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

IMHO those people who really care about performance should use
/noconfig (that's exactly the same behavior that csc does as
well as Peter's patch does). It could be also used to build
mscorlib, System and System.Xml dlls.

Or at least we could provide something like /rsp to enable rsp file
which is much easier than typing -r:System.Drawing.dll
-r:System.Windows.Forms.dll -r:System.Data.dll
-r:System.Runtime.Remoting.dll
-r:System.Runtime.Serialization.Formatters.Soap.dll manually.

Atsushi Eno

Miguel de Icaza wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;&gt;<i>   using System.Windows.Forms;
</I>&gt;&gt;<i>   class TV  : Form   {
</I>&gt;&gt;<i>      public static void Main()     {
</I>&gt;&gt;<i>      }
</I>&gt;&gt;<i>   }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Compile time went up 0.01s at the most (often less, in multiple runs) for 
</I>&gt;&gt;<i> the above code, when all assemblies were referenced, compared to just 
</I>&gt;&gt;<i> /r:System.Windows.Forms.dll specified on the command line.
</I>&gt;<i> 
</I>&gt;<i> Your measurement is poorly done:
</I>&gt;<i> 
</I>&gt;<i> 	* You did it witch a hot system, not a cold system, so 
</I>&gt;<i> 	  the data is likely already on the cache.
</I>&gt;<i> 
</I>&gt;<i> 	* On my machine, while running in battery saving mode
</I>&gt;<i> 	  building mcs goes from 9 seconds to 10 seconds with
</I>&gt;<i> 	  a hot cache (2 gigabyte ram machine).
</I>&gt;<i> 
</I>&gt;<i> There are two problems that affect mcs performance:
</I>&gt;<i> 
</I>&gt;<i> 	* Loading the assemblies (this amounts for 376 page faults
</I>&gt;<i> 	  out of 12634)
</I>&gt;<i> 
</I>&gt;<i> 	* Looking up the types plus keeping track of positive and
</I>&gt;<i> 	  negative hits on a hashtable.
</I>&gt;<i> 
</I>&gt;<i> In your example above you have one type lookup: &quot;Form&quot;, which is not
</I>&gt;<i> likely exercising anything interesting.  Nor does it take into account
</I>&gt;<i> the slowdowns caused by the memory impact caused by keeping the extra
</I>&gt;<i> type caches around (the major source of performance issues in mcs).
</I>&gt;<i> Also benchmarking a hot system is not the same as benchmarking a cold
</I>&gt;<i> system. 
</I>&gt;<i> 
</I>&gt;<i> As I had already told you this afternoon, this kind of patch will not be
</I>&gt;<i> accepted into mcs this year.
</I>&gt;<i> 
</I>&gt;<i> Miguel.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014416.html">[Mono-dev] [PATCH] mcs.exe rsp file support
</A></li>
	<LI>Next message: <A HREF="014420.html">[Mono-dev] [PATCH] mcs.exe rsp file support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14418">[ date ]</a>
              <a href="thread.html#14418">[ thread ]</a>
              <a href="subject.html#14418">[ subject ]</a>
              <a href="author.html#14418">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
