<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] System.IO.Ports.SerialPort not loading when running app
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20System.IO.Ports.SerialPort%20not%20loading%20when%20running%20app&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014017.html">
   <LINK REL="Next"  HREF="014025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] System.IO.Ports.SerialPort not loading when running app</H1>
    <B>Shawn Singh</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20System.IO.Ports.SerialPort%20not%20loading%20when%20running%20app&In-Reply-To="
       TITLE="[Mono-dev] System.IO.Ports.SerialPort not loading when running app">radesh.singh at rfsmart.com
       </A><BR>
    <I>Tue Aug 16 15:56:12 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014017.html">[Mono-dev] patch for xmlconf.cs
</A></li>
        <LI>Next message: <A HREF="014025.html">[Mono-dev] 32-bit support in hppa_atomic.s
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14018">[ date ]</a>
              <a href="thread.html#14018">[ thread ]</a>
              <a href="subject.html#14018">[ subject ]</a>
              <a href="author.html#14018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>List,

 

I'm writing an app that should collect data on /dev/ttyS0 and push it
out to a web service. The code for the app is included in this message.
Here is the error that I am getting:

 

** (Program.exe:13337): WARNING **: The class System.IO.Ports.SerialPort
could not be loaded, used in /export/home/shawn/src/c#/v2/Program.exe
(token 0x01000002). 
 
Unhandled Exception: System.NullReferenceException: Object reference not
set to an instance of an object

 

I've got Mono v1.1.8.3 running on Mandrake Linux 9.2.

 

Source code:

 

Here is my source code:

 
Here is a copy of my source code: 
 
// Part 1:  COM Listener &amp; Data Receiver 
/*      
  This code will watch for the COM Port to be open 
  and when it is, it will read data from it into memory. 
 
  When the port is closed, the data will be pushed to the 
  web service (Part 2 is the push) 
*/ 
 
using System.IO.Ports;        // NOT available in VS .NET 2003 
                                      // IS provided with VS .NET 2005 
                                      // TO work with MONO, you need to
have at least Mono v1.1.8 
 
// Part 2:  POST to Web Service 


/* 
  Transfer data that was captured from the COM Port 
  to the specified web service. 
*/ 
 
using System; 
using System.Collections.Generic; 
using System.IO; 
using System.Net; 
using System.Net.Sockets; 
using System.Text; 
using System.Web; 
 
namespace rfidapp 
{ 
 /// &lt;summary&gt; 
 /// Summary description for Class1. 
 /// &lt;/summary&gt; 
    class Program 
    { 
   /// &lt;summary&gt; 
   /// The main entry point for the application. 
   /// &lt;/summary&gt; 
   [STAThread] 
   static void Main(string[] args) 
   { 
  try
// begin serial port stuff 
  { 
      // Listen &amp; Receive 
 
      string devName = &quot;/dev/ttyS0&quot;;     // COM1 
      int readTimeOut = 300;   
      byte rawDTA; 
      string rXDTA = &quot;thisizenishilizerdtuh&quot;; 
 
      SerialPort COMPort = new SerialPort(devName); 
      COMPort.ReadTimeout = readTimeOut; 
 
      for (; ; ) 
      { 
     while (COMPort.IsOpen) 
     { 
    rawDTA = (byte)COMPort.ReadByte(); 
    rXDTA += ((char)rawDTA); 
     } 
 
     if (COMPort.IsOpen) 
    COMPort.Close();
// end serial port stuff
 
     // Post 
     if (!rXDTA.Contains(&quot;thisizenishilizerdtuh&quot;))      // something to
prevent this code from being executed
     { 
    string uri = &quot;<A HREF="http://smartserver/rfidlistener&quot;;">http://smartserver/rfidlistener&quot;;</A>     // bogus name
    byte[] bytes = new System.Text.UnicodeEncoding().GetBytes(rXDTA); 
 
    WebRequest request = WebRequest.Create(uri); 
    request.Method = &quot;POST&quot;; 
    request.ContentType = &quot;text/html&quot;; 
    request.ContentLength = bytes.Length; 
 
 
    Stream output = request.GetRequestStream(); 
    output.Write(bytes, 0, bytes.Length); 
    output.Close(); 
    WebResponse response = request.GetResponse(); 
    Console.WriteLine(response.ToString()); 
     } 
     Console.WriteLine(&quot;Listening for data ...&quot;); 
      } 
  } 
  catch (Exception e) 
  { 
      Console.WriteLine(&quot;Error: &quot; + e.Message.ToString()); 
  } 
   } 
    } 
} 

 

Any thoughts?

 

Thank you,

 

Shawn Singh

Programmer, RFSmart

Jacksonville, FL 32256

904-399-8500 ext. 1667

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">shawn.singh at rfsmart.com</A>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050816/768b3260/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050816/768b3260/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014017.html">[Mono-dev] patch for xmlconf.cs
</A></li>
	<LI>Next message: <A HREF="014025.html">[Mono-dev] 32-bit support in hppa_atomic.s
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14018">[ date ]</a>
              <a href="thread.html#14018">[ thread ]</a>
              <a href="subject.html#14018">[ subject ]</a>
              <a href="author.html#14018">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
