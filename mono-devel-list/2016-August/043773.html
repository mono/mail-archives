<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Profiling with heapshot (only)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Profiling%20with%20heapshot%20%28only%29&In-Reply-To=%3CCAC9RQtjiTzYs_GOXyW%3Dco-UNb38v%3DQpk-a28UeU_pAd4MLY%3Dnw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043772.html">
   <LINK REL="Next"  HREF="043774.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Profiling with heapshot (only)</H1>
    <B>Greg Young</B> 
    <A HREF="mailto:mono-devel-list%40lists.dot.net?Subject=Re%3A%20%5BMono-dev%5D%20Profiling%20with%20heapshot%20%28only%29&In-Reply-To=%3CCAC9RQtjiTzYs_GOXyW%3Dco-UNb38v%3DQpk-a28UeU_pAd4MLY%3Dnw%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Profiling with heapshot (only)">gregoryyoung1 at gmail.com
       </A><BR>
    <I>Tue Aug 16 00:04:58 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043772.html">[Mono-dev] Profiling with heapshot (only)
</A></li>
        <LI>Next message (by thread): <A HREF="043774.html">[Mono-dev] Profiling with heapshot (only)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43773">[ date ]</a>
              <a href="thread.html#43773">[ thread ]</a>
              <a href="subject.html#43773">[ subject ]</a>
              <a href="author.html#43773">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://github.com/mono/mono/blob/master/mono/profiler/proflog.c#L4772">https://github.com/mono/mono/blob/master/mono/profiler/proflog.c#L4772</A>

Is an option you want. Without the enter/leave hooks are registered
which has a significant cost.

Not sure if this is the only option or just one of a few (have not
tested on your use case)

Cheers,

Greg

On Tue, Aug 16, 2016 at 12:57 AM, Chris Swiedler
&lt;<A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">cswiedler at trionworlds.com</A>&gt; wrote:
&gt;<i> I'm trying to use the heapshot=ondemand feature of the logging profiler. I want to turn off all of the other features of the logging profiler, since the allocation/method tracing stuff runs too slow to be useful in the situation that I need to test. However, even with a command line like this:
</I>&gt;<i>
</I>&gt;<i> mono-sgen --debug --profile=log:heapshot,heapshot=ondemand,time=fast,port=7103,output=%p.mlpd
</I>&gt;<i>
</I>&gt;<i> ...I still get extremely high CPU usage in my apps. From what I understand of the heapshot part of the profiler, it shouldn't need to incur any overhead except when generating the heapshot file. Is there any way to reduce the runtime overhead when it's not generating a heapshot? This link suggests that I should disable counters, but I don't see any options for that:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://mono.1490590.n4.nabble.com/Problems-with-mono-log-pofiler-td4665572.html">http://mono.1490590.n4.nabble.com/Problems-with-mono-log-pofiler-td4665572.html</A>
</I>&gt;<i>
</I>&gt;<i> thanks,
</I>&gt;<i> chris
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.dot.net</A>
</I>&gt;<i> <A HREF="http://lists.dot.net/mailman/listinfo/mono-devel-list">http://lists.dot.net/mailman/listinfo/mono-devel-list</A>
</I>


-- 
Studying for the Turing test
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043772.html">[Mono-dev] Profiling with heapshot (only)
</A></li>
	<LI>Next message (by thread): <A HREF="043774.html">[Mono-dev] Profiling with heapshot (only)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43773">[ date ]</a>
              <a href="thread.html#43773">[ thread ]</a>
              <a href="subject.html#43773">[ subject ]</a>
              <a href="author.html#43773">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
