<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] PInvoke and language interopelability
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20PInvoke%20and%20language%20interopelability&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030457.html">
   <LINK REL="Next"  HREF="030460.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] PInvoke and language interopelability</H1>
    <B>BGB</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20PInvoke%20and%20language%20interopelability&In-Reply-To="
       TITLE="[Mono-dev] PInvoke and language interopelability">cr88192 at hotmail.com
       </A><BR>
    <I>Tue Jan 13 13:20:15 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="030457.html">[Mono-dev] PInvoke and language interopelability
</A></li>
        <LI>Next message: <A HREF="030460.html">[Mono-dev] PInvoke and language interopelability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30461">[ date ]</a>
              <a href="thread.html#30461">[ thread ]</a>
              <a href="subject.html#30461">[ subject ]</a>
              <a href="author.html#30461">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
  ----- Original Message ----- 
  From: Alfredo Jos&#233; Muela Romero 
  To: Bill Holmes 
  Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A> 
  Sent: Wednesday, January 14, 2009 2:37 AM
  Subject: Re: [Mono-dev] PInvoke and language interopelability


  2009/1/13 Bill Holmes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">billholmes54 at gmail.com</A>&gt;

    Alfredo,

    I may not fully understand the problem.  Are you simply asking how to
    call back into C# from C++?

    We use 2 different approaches.

    Function pointers.  If you pass a C# delegate through the PInvoke
    layer C++ will view that as a function pointer.

    COM Interop.  (Only supported on Windows and Linux.) This allows you
    to marshal a Managed object to C++ which then can call methods on that
    objects' interface(s).

    -bill


  Hi Bill, 

  Yes, your right that's my problem in the simplest words. Sorry not to have explained it so easily :)

  I guess I'm in your second case, since the extern method (the one in the C++ library) can't be redefined to receive a function pointer instead of a object pointer.

  Where could I find some examples / info about the solution you talked about?

  What do you think about the tunned proxy class to get it done with delegates? With that approach I would get more software architectures in the scope, wouldn't I?



may or may not matter, but a lot of this falls outside the confines of ECMA-335...


second:
is it not possible to wrap the method to accept what you can give it?...


sadly, I am not sure what mono's C (or C++) level API is like, how it passes objects, or what APIs might be provided for interfacing with objects from C land. but, oh well, the people around here can maybe give info, as I am left wondering some as well.

actually, I guess one possiblity (if it works &quot;in general&quot;), could be to look into IKVM, which could potentially give a JNI interface, which could allow getting at the objects contents, invoking methods, ...

as noted above, COM is another approach (maybe preferable?...).


sadly though, all of this would require wrapping the method in question in one way or another, and I have not personally looked into any of this (actually, as of yet, I have not been able to successfully build mono on my system... which doesn't help some with my &quot;confidence&quot; in the project... but alas part of my complaint is the dependency on glib, not-so-pretty code composing its innards, ...).

however, a part of the issue is that non-trivial interaction with native C++ code can get hairy...

or such...


but, in any case, best of luck...





------------------------------------------------------------------------------


  _______________________________________________
  Mono-devel-list mailing list
  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090114/f0abe043/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090114/f0abe043/attachment-0001.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030457.html">[Mono-dev] PInvoke and language interopelability
</A></li>
	<LI>Next message: <A HREF="030460.html">[Mono-dev] PInvoke and language interopelability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30461">[ date ]</a>
              <a href="thread.html#30461">[ thread ]</a>
              <a href="subject.html#30461">[ subject ]</a>
              <a href="author.html#30461">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
