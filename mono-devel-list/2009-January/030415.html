<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Support for AvailableFreeSpace, TotalFreeSpace, TotalSize in System.IO.DriveInfo
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Support%20for%20AvailableFreeSpace%2C%0A%20TotalFreeSpace%2C%20TotalSize%20in%20System.IO.DriveInfo&In-Reply-To=87aba2dmex.fsf%40hariville.hurrynot.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030414.html">
   <LINK REL="Next"  HREF="030427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Support for AvailableFreeSpace, TotalFreeSpace, TotalSize in System.IO.DriveInfo</H1>
    <B>Christian Prochnow</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Support%20for%20AvailableFreeSpace%2C%0A%20TotalFreeSpace%2C%20TotalSize%20in%20System.IO.DriveInfo&In-Reply-To=87aba2dmex.fsf%40hariville.hurrynot.org"
       TITLE="[Mono-dev] [PATCH] Support for AvailableFreeSpace, TotalFreeSpace, TotalSize in System.IO.DriveInfo">cproch at seculogix.de
       </A><BR>
    <I>Thu Jan  8 08:35:49 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="030414.html">[Mono-dev] [PATCH] Support for AvailableFreeSpace,	TotalFreeSpace, TotalSize in System.IO.DriveInfo
</A></li>
        <LI>Next message: <A HREF="030427.html">[Mono-dev] [PATCH] Support for AvailableFreeSpace,	TotalFreeSpace, TotalSize in System.IO.DriveInfo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30415">[ date ]</a>
              <a href="thread.html#30415">[ thread ]</a>
              <a href="subject.html#30415">[ subject ]</a>
              <a href="author.html#30415">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Raja R Harinath schrieb:
&gt;<i> According to gnulib
</I>&gt;<i> 
</I>&gt;<i>   This function is missing on some platforms:
</I>&gt;<i>   MacOS X 10.3, OpenBSD 3.8, mingw.
</I>
I've changed the implementation of GetDiskFreeSpaceEx() to use statvfs()
or statfs(). It falls back to guint64 MaxValue if none of these
functions are available.

I've also added the GetDriveType() wrapper to query a drive's type.
GetDriveType() currently uses /etc/[mtab|mnttab] to query the
filesystem, but it can be improved to use statfs.f_typename or
statvfs.f_type on systems which support it (cause /etc/mtab doesnt exist
on darwin).


Best regards,

Christian Prochnow


-- 
Christian Prochnow
Gesch&#228;ftsf&#252;hrer

SecuLogiX Systems GmbH
Mohriner Allee 28
12347 Berlin

<A HREF="http://www.seculogix.de">http://www.seculogix.de</A>

mobile:  +49 (0)177 313 02 57
   fon:  +49 (0)700 SECULOGIX

Gesch&#228;ftsf&#252;hrer: Christian Prochnow
Handelsregister: B 96491, Amtsgericht Charlottenburg
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: mono-122751-driveinfo.patch
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090108/8793d51c/attachment-0002.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090108/8793d51c/attachment-0002.pl</A> 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: mono-122751-io-layer.patch
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090108/8793d51c/attachment-0003.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090108/8793d51c/attachment-0003.pl</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030414.html">[Mono-dev] [PATCH] Support for AvailableFreeSpace,	TotalFreeSpace, TotalSize in System.IO.DriveInfo
</A></li>
	<LI>Next message: <A HREF="030427.html">[Mono-dev] [PATCH] Support for AvailableFreeSpace,	TotalFreeSpace, TotalSize in System.IO.DriveInfo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30415">[ date ]</a>
              <a href="thread.html#30415">[ thread ]</a>
              <a href="subject.html#30415">[ subject ]</a>
              <a href="author.html#30415">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
