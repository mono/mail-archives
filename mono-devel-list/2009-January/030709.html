<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Allows mono_jit_init to be called multiple	times without crashing.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Allows%20mono_jit_init%20to%20be%20called%20multiple%0A%09times%20without%20crashing.&In-Reply-To=1233340877.7829.32.camel%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030708.html">
   <LINK REL="Next"  HREF="030710.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Allows mono_jit_init to be called multiple	times without crashing.</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Allows%20mono_jit_init%20to%20be%20called%20multiple%0A%09times%20without%20crashing.&In-Reply-To=1233340877.7829.32.camel%40localhost"
       TITLE="[Mono-dev] [PATCH] Allows mono_jit_init to be called multiple	times without crashing.">kumpera at gmail.com
       </A><BR>
    <I>Fri Jan 30 13:51:13 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="030708.html">[Mono-dev] [PATCH] Allows mono_jit_init to be called multiple times	without	crashing.
</A></li>
        <LI>Next message: <A HREF="030710.html">[Mono-dev] [PATCH] Allows mono_jit_init to be called multiple	times without crashing.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30709">[ date ]</a>
              <a href="thread.html#30709">[ thread ]</a>
              <a href="subject.html#30709">[ subject ]</a>
              <a href="author.html#30709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Still, why can't your code do the mono_get_root_domain () check?

The Moonlight folks requested this as well and it turned out that what they
needed was support for creating AppDomains from the unmanaged API. This
has been included and will be part of the the upcoming 2.4 release.



2009/1/30 Tom Hindle &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">tom_hindle at sil.org</A>&gt;

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Attached for review is a patch that allows multiple calls to
</I>&gt;<i> mono_jit_init.
</I>&gt;<i>
</I>&gt;<i> I appreciate that the first response to this request may be, 'why would
</I>&gt;<i> you want to do that?' Given that, I will attempt to give a
</I>&gt;<i> justification.
</I>&gt;<i>
</I>&gt;<i> The reason I need to be able to do this is because:
</I>&gt;<i>
</I>&gt;<i> I have an existing C# application that uses native COM objects, with
</I>&gt;<i> marshaling iterops automatically generated from the COM IDL files, as
</I>&gt;<i> part of the build process.
</I>&gt;<i>
</I>&gt;<i> However as part of the Linux port I sometimes need to replace select COM
</I>&gt;<i> objects with C# ones. I inform the application of this by changing the
</I>&gt;<i> registry. (COM definition file on linux)
</I>&gt;<i>
</I>&gt;<i> Which I can do because previously I have created a managed-Com-bridge (a
</I>&gt;<i> special native COM object that embeds mono and loads managed COM
</I>&gt;<i> objects, before retuning a native ptr back through the COM framework).
</I>&gt;<i>
</I>&gt;<i> However, since the managed-Com-bridge embeds mono, I need to call
</I>&gt;<i> mono_jit_init to return the domain. However since mono is already
</I>&gt;<i> running, a call to mono_jit_init asserts!
</I>&gt;<i>
</I>&gt;<i> Furthermore, COM objects are sometimes created indirectly by other
</I>&gt;<i> native COM objects, meaning re-factoring C# code is not an option. For
</I>&gt;<i> example, C# creates native COM object COM1 which itself creates COM2,
</I>&gt;<i> which has now been replaced by a managed COM object.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Tom
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090130/84aaf419/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090130/84aaf419/attachment.html</A> 
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030708.html">[Mono-dev] [PATCH] Allows mono_jit_init to be called multiple times	without	crashing.
</A></li>
	<LI>Next message: <A HREF="030710.html">[Mono-dev] [PATCH] Allows mono_jit_init to be called multiple	times without crashing.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30709">[ date ]</a>
              <a href="thread.html#30709">[ thread ]</a>
              <a href="subject.html#30709">[ subject ]</a>
              <a href="author.html#30709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
