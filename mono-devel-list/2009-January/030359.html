<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] NUnit migration and test failure status
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20NUnit%20migration%20and%20test%20failure%20status&In-Reply-To=492F4C05.7090004%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030357.html">
   <LINK REL="Next"  HREF="030360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] NUnit migration and test failure status</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20NUnit%20migration%20and%20test%20failure%20status&In-Reply-To=492F4C05.7090004%40ximian.com"
       TITLE="[Mono-dev] NUnit migration and test failure status">atsushi at ximian.com
       </A><BR>
    <I>Sun Jan  4 22:58:58 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="030357.html">[Mono-dev] Porting runtime - where to start?
</A></li>
        <LI>Next message: <A HREF="030360.html">[Mono-dev] Mono-sharpcvslib - is it dead?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30359">[ date ]</a>
              <a href="thread.html#30359">[ thread ]</a>
              <a href="subject.html#30359">[ subject ]</a>
              <a href="author.html#30359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We still have a *lot* of test failures in our unit tests, and I'd like
to give some updates on analysis.

(Note: I didn't walk through every failure. Also my build is not always
clean. Verify it at your side before reading them blindly.)

- System.Threading.ExecutionContextTest.Copy_FromThread:
   it does not fail on .NET, so it's likely a bug in runtime or corlib.
- System.Data.DataColumnTest.ExpressionAggregates:
   it is rather likely due to nunit change with related to current
   culture handling. This test does not fail when I give TESTNAME or
   FIXTURE option at run-test.
- System.Web.UI.WebControls.MenuTest.Menu_DefaultRender:
   similarly it does not fail when I run only this test (with TESTNAME).
- Mono.Data.Sqlite.SqliteCommandUnitTests.Select:
   I copied Mono.Data.Sqlite.dll to mcs/class/Mono.Data.Sqlite directory
   and did run-test-ondotnet. The result was the same failure as on mono,
   so I assume it is rather the test case that is wrong.
- the same applies to Mono.Data.SqliteClient.
- System.Runtime.Remoting: we have no remedy. We will have to either
   fully disable the tests for this assembly or revert NUnit to 2.2.
   FWIW they fail on .NET either.
- Microsoft.Build.Tasks
   .CreateCSharpManifestResourceNameTest.TestNoRootNamespaceNoCulture:
   It does not fail on mono/w32. Instead some tests in the assembly do
   not run successfully on mono/w32. Another set of tests fail on .NET.
- System.Transactions.AsyncTest.AsyncFail3:
   It doesn't fail on mono/w32 either.
- System.Web.UI.WebControls.ListViewTest.ListView_Edit:
   It doesn't, either.

Our nunit fails to handle System.Web_test_net_2_0.dll under .NET with
nunit-console, so I cannot verify if those sys.web tests are fine.

Thanks to Marek (grendel), the floating point issues are gone.
Also thanks to Sebastien, the drawing tests are fixed to pass.

Atsushi Eno



Atsushi Eno wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> As some of you may have noticed, I have upgraded our local use of nunit
</I>&gt;<i> from 2.2.0 to 2.4.8. It involved some changes in our test run, but
</I>&gt;<i> should be invisble to most of you.
</I>&gt;<i> 
</I>&gt;<i> The build has been broken for a while (am sorry for that; it was a set
</I>&gt;<i> of make dist / packaging mess), and now we have a couple of test
</I>&gt;<i> failures. So before Marc dives into the hell list of unknown bugs to
</I>&gt;<i> him, I wanted to give some survey on them:
</I>&gt;<i> 
</I>&gt;<i> - some JIT stuff: test-verifier, test-System_Web-2.0
</I>&gt;<i> - mere build failure: test-System_Data-2.0
</I>&gt;<i> - some floating point failures: test-corlib-*, test-System_Drawing-*,
</I>&gt;<i>   test-System_Data-1.0, test-System_Runtime_SFS-*
</I>&gt;<i> - possible NUnit run changes: test-corlib-2.0
</I>&gt;<i>   (MonoTests.System.Threading.ExecutionContextTest.Copy_FromThread),
</I>&gt;<i>   test-System_Runtime_Remoting-*
</I>&gt;<i> - possibly gdiplus: test-System_Drawing-*, test-Windows_Forms-2.0
</I>&gt;<i>   (MonoTests.System.Drawing.PenTest.DashCap_Valid)
</I>&gt;<i> - some sys.data changes: test-Mono_Data_Sqlite-*,
</I>&gt;<i>   test-Mono_Data_SqliteClient*
</I>&gt;<i> 
</I>&gt;<i> The only pattern I am concerned is the one with (possible) NUnit run
</I>&gt;<i> changes. NUnit 2.4.8 now requires -noshadow to get our tests run fine.
</I>&gt;<i> This also happens under .NET (i.e. make run-test-ondotnet) even without
</I>&gt;<i> -noshadow, so I am rather afraid that NUnit 2.4.8 unlike 2.2.0 cannot
</I>&gt;<i> handle it.
</I>&gt;<i> 
</I>&gt;<i> I'd like to hear inputs on what could be done to fix this issue.
</I>&gt;<i> 
</I>&gt;<i> Atsushi Eno
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030357.html">[Mono-dev] Porting runtime - where to start?
</A></li>
	<LI>Next message: <A HREF="030360.html">[Mono-dev] Mono-sharpcvslib - is it dead?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30359">[ date ]</a>
              <a href="thread.html#30359">[ thread ]</a>
              <a href="subject.html#30359">[ subject ]</a>
              <a href="author.html#30359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
