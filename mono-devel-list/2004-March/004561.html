<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] GC with Pixbufs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GC%20with%20Pixbufs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004567.html">
   <LINK REL="Next"  HREF="004563.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] GC with Pixbufs</H1>
    <B>Chris Seaton</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20GC%20with%20Pixbufs&In-Reply-To="
       TITLE="[Mono-devel-list] GC with Pixbufs">chris at chrisseaton.com
       </A><BR>
    <I>Mon Mar 15 12:27:56 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="004567.html">[Mono-devel-list] Calling OS Commands from Mono
</A></li>
        <LI>Next message: <A HREF="004563.html">[Mono-devel-list] GC with Pixbufs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4561">[ date ]</a>
              <a href="thread.html#4561">[ thread ]</a>
              <a href="subject.html#4561">[ subject ]</a>
              <a href="author.html#4561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a program that generates thumbnails of images for web pages. 
Creating a thumbnail simply involves reading the file into a Pixbuf 
image, scaling it into a new Pixbuf and saving it.

Mono doesn't seem to ever GC these Pixbufs. They are only referenced 
from local variables in functions when the thumbnail is being created so 
I'm sure they're elligible for deallocation.

Mono consumes over a gigabyte of virtual memory after a few minutes of 
creating thumbnails. If I remove the thumbnail code Mono consumes about 
15 MB.

Relevant source file attatched. See the CreateThumbnail() method. At the 
moment I'm only using the GDK code (GDK is defined on the command line), 
so don't worry about the System.Drawing stuff.

I know it's inelegant, but can I force deallocation somehow? Or am I 
doing something wrong so that the GC can't deallocate?

Thanks,

Chris Seaton
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Thumbnail.cs
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040315/63a61a2e/attachment.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040315/63a61a2e/attachment.pl</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004567.html">[Mono-devel-list] Calling OS Commands from Mono
</A></li>
	<LI>Next message: <A HREF="004563.html">[Mono-devel-list] GC with Pixbufs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4561">[ date ]</a>
              <a href="thread.html#4561">[ thread ]</a>
              <a href="subject.html#4561">[ subject ]</a>
              <a href="author.html#4561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
