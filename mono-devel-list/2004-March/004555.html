<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] Field Layout Optimization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Field%20Layout%20Optimization&In-Reply-To=1079314720.7313.19.camel%40Ben">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004550.html">
   <LINK REL="Next"  HREF="004562.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] Field Layout Optimization</H1>
    <B>Jonathan Gilbert</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Field%20Layout%20Optimization&In-Reply-To=1079314720.7313.19.camel%40Ben"
       TITLE="[Mono-devel-list] [PATCH] Field Layout Optimization">2a5gjx302 at sneakemail.com
       </A><BR>
    <I>Mon Mar 15 21:53:42 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="004550.html">[Mono-devel-list] [PATCH] Field Layout Optimization
</A></li>
        <LI>Next message: <A HREF="004562.html">[Mono-devel-list] [PATCH] Field Layout Optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4555">[ date ]</a>
              <a href="thread.html#4555">[ thread ]</a>
              <a href="subject.html#4555">[ subject ]</a>
              <a href="author.html#4555">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I don't know about this particular detail for sure, but just thought I'd
point out that the string being interned does not imply that the interned
copy will always be used. You might want to check string.IsInterned on &quot;abc&quot;..

Speaking of which, why doesn't Java's string intern table have a way to
check if a string is interned without actually interning it? Just idle
thoughts...

Jonathan

At 08:38 PM 14/03/2004 -0500, you wrote:
&gt;<i>I am not so sure. For example, if you do something like:
</I>&gt;<i>
</I>&gt;<i>[MyAttribute (&quot;abc&quot;)]
</I>&gt;<i>
</I>&gt;<i>And query for the attribute many times, the string is not interned. It
</I>&gt;<i>is different any time.
</I>&gt;<i>
</I>&gt;<i>He might have been saying that all strings in the string heap are
</I>&gt;<i>interned at load.
</I>&gt;<i>
</I>&gt;<i>-- Ben
</I>&gt;<i>
</I>&gt;<i>On Sun, 2004-03-14 at 18:48, Jonathan Pryor wrote:
</I>&gt;&gt;<i> On Sun, 2004-03-14 at 18:24, Ben Maurer wrote:
</I>&gt;&gt;<i> &lt;snip/&gt;
</I>&gt;&gt;<i> &gt;       * Is it correct to load strings that are stored in literal fields
</I>&gt;&gt;<i> &gt;         as interned. The reason I did this was to ensure that we dont
</I>&gt;&gt;<i> &gt;         create a string on each access (which is incorrect). However, I
</I>&gt;&gt;<i> &gt;         am not sure if it shoudl be interned.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> See: <A HREF="http://blogs.msdn.com/cbrumme/archive/2003/04/22/51371.aspx">http://blogs.msdn.com/cbrumme/archive/2003/04/22/51371.aspx</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> .NET automatically interns all strings literals inside the assembly when
</I>&gt;&gt;<i> the assembly is loaded.  The blog notes that: 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>         This is expensive and -- in retrospect -- may have been a
</I>&gt;&gt;<i>         mistake.  In the future we might consider allowing individual
</I>&gt;&gt;<i>         assemblies to opt-in or opt-out.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> For compatibility, we'll probably want to do the same, which is what
</I>&gt;&gt;<i> you're doing.  So this is the path of least resistance. :-)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>  - Jon
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mono-devel-list mailing list
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004550.html">[Mono-devel-list] [PATCH] Field Layout Optimization
</A></li>
	<LI>Next message: <A HREF="004562.html">[Mono-devel-list] [PATCH] Field Layout Optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4555">[ date ]</a>
              <a href="thread.html#4555">[ thread ]</a>
              <a href="subject.html#4555">[ subject ]</a>
              <a href="author.html#4555">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
