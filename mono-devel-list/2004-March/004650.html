<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] fixed statement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20fixed%20statement&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004648.html">
   <LINK REL="Next"  HREF="004651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] fixed statement</H1>
    <B>Bernie Solomon</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20fixed%20statement&In-Reply-To="
       TITLE="[Mono-devel-list] fixed statement">bernard at ugsolutions.com
       </A><BR>
    <I>Wed Mar 17 16:58:05 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="004648.html">[Mono-devel-list] fixed statement
</A></li>
        <LI>Next message: <A HREF="004651.html">[Mono-devel-list] fixed statement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4650">[ date ]</a>
              <a href="thread.html#4650">[ thread ]</a>
              <a href="subject.html#4650">[ subject ]</a>
              <a href="author.html#4650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This should be a property of the local variable - it should be
flagged as pinned but mcs doesn't appear to do this.

However since mono doesn't currently using a compacting
garbage collector it doesn't matter if compiling and running
with mono alone as data won't move anyway.

Of course different runtimes do compact and mcs compiled
code could then fail so mcs does need to be fixed ;-) too.

Bernie Solomon

----- Original Message ----- 
From: &quot;Eric Durand Tremblay&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">eric.durand-tremblay.1 at ulaval.ca</A>&gt;
To: &quot;Mono Development&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Sent: Wednesday, March 17, 2004 1:42 PM
Subject: [Mono-devel-list] fixed statement


&gt;<i> Can somebody tell me how mono handle fixed statement.
</I>&gt;<i>
</I>&gt;<i> For something like this :
</I>&gt;<i>
</I>&gt;<i> string bar = &quot;something&quot;;
</I>&gt;<i>
</I>&gt;<i> fixed ( char * foo = bar) {
</I>&gt;<i>     foo[0] = 'c';
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> MCS output :
</I>&gt;<i>
</I>&gt;<i>         IL_0000:  ldstr &quot;bar&quot;
</I>&gt;<i>         IL_0005:  stloc.1
</I>&gt;<i>         IL_0006:  ldloc.1
</I>&gt;<i>         IL_0007:  stloc.2
</I>&gt;<i>         IL_0008:  ldloc.2
</I>&gt;<i>         IL_0009:  conv.i
</I>&gt;<i>         IL_000a:  call int32 class
</I>&gt;<i>
</I>[mscorlib]'System.Runtime.CompilerServices.RuntimeHelpers'::'get_OffsetToStr
ingData'()
&gt;<i>         IL_000f:  add
</I>&gt;<i>         IL_0010:  stloc.0
</I>&gt;<i>         IL_0011:  ldloc.0
</I>&gt;<i>         IL_0012:  conv.i
</I>&gt;<i>         IL_0013:  ldc.i4.0
</I>&gt;<i>         IL_0014:  ldc.i4.2
</I>&gt;<i>         IL_0015:  mul
</I>&gt;<i>         IL_0016:  conv.i
</I>&gt;<i>         IL_0017:  add
</I>&gt;<i>         IL_0018:  ldc.i4.s 0x63
</I>&gt;<i>         IL_001a:  stind.i2
</I>&gt;<i>         IL_001b:  ldnull
</I>&gt;<i>         IL_001c:  stloc.2
</I>&gt;<i>         IL_001d:  ret
</I>&gt;<i>
</I>&gt;<i> There is nothing in this that &quot;lock&quot; the garbage collector
</I>&gt;<i> (msdn define lock as: Prevents relocation of a variable by the garbage
</I>&gt;<i> collector.)
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Eric Durand-Tremblay
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004648.html">[Mono-devel-list] fixed statement
</A></li>
	<LI>Next message: <A HREF="004651.html">[Mono-devel-list] fixed statement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4650">[ date ]</a>
              <a href="thread.html#4650">[ thread ]</a>
              <a href="subject.html#4650">[ subject ]</a>
              <a href="author.html#4650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
