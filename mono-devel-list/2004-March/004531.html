<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] Remove static and non-virtual	methods from the VTable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Remove%20static%20and%20non-virtual%0A%09methods%20from%20the%20VTable&In-Reply-To=1079154722.9876.66.camel%40Ben">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004524.html">
   <LINK REL="Next"  HREF="004532.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] Remove static and non-virtual	methods from the VTable</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20Remove%20static%20and%20non-virtual%0A%09methods%20from%20the%20VTable&In-Reply-To=1079154722.9876.66.camel%40Ben"
       TITLE="[Mono-devel-list] [PATCH] Remove static and non-virtual	methods from the VTable">jonpryor at vt.edu
       </A><BR>
    <I>Sat Mar 13 11:31:28 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="004524.html">[Mono-devel-list] [PATCH] Remove static and non-virtual methods from the VTable
</A></li>
        <LI>Next message: <A HREF="004532.html">[Mono-devel-list] [PATCH] Remove static and non-virtual	methods from the VTable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4531">[ date ]</a>
              <a href="thread.html#4531">[ thread ]</a>
              <a href="subject.html#4531">[ subject ]</a>
              <a href="author.html#4531">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 2004-03-13 at 00:12, Ben Maurer wrote:
&lt;snip/&gt;
&gt;<i> * class.c : do not include static or non-virtual methods in the vtable.
</I>
I could be completely wrong, but how do you handle remoting?

AFAIK, .NET remoting is handled by giving a TransparentProxy object to
the client code, instead of a reference to the actual object (as the
actual object may be in a different process, etc.).  The
TransparentProxy is special, in that it can be cast to any interface and
any object, and it delegates function calls to a RealProxy, which
handles communication with the actual object, wherever it may be.

The key point to this, though, is that you can't directly invoke any
methods on any class deriving from MarshalByRefObject, unless you KNOW
it's in the same AppDomain you're in.  As such, all function calls on a
MarshalByRefObject subclass are typically virtual, so that the
TransparentProxy can intercept the method call and delegate it to the
RealProxy appropriately.

So if you remove all non-virtual functions from the vtable, how will
this interact with Remoting?  With your patch, non-virtual methods won't
have a vtable slot, so the TransparentProxy won't be able to intercept
the invocation, breaking remoting behavior.

Granted, I could be mis-understanding this (I'm no remoting expert), but
this is my current understanding.

 - Jon



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004524.html">[Mono-devel-list] [PATCH] Remove static and non-virtual methods from the VTable
</A></li>
	<LI>Next message: <A HREF="004532.html">[Mono-devel-list] [PATCH] Remove static and non-virtual	methods from the VTable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4531">[ date ]</a>
              <a href="thread.html#4531">[ thread ]</a>
              <a href="subject.html#4531">[ subject ]</a>
              <a href="author.html#4531">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
