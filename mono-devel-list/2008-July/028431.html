<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev]	[Mono-patches]	r107198	-	trunk/mcs/class/corlib/System
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%0A%09%5BMono-patches%5D%09r107198%09-%09trunk/mcs/class/corlib/System&In-Reply-To=1215190881.6187.18.camel%40redbull.qnetp.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028430.html">
   <LINK REL="Next"  HREF="028419.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev]	[Mono-patches]	r107198	-	trunk/mcs/class/corlib/System</H1>
    <B>Andreas Nahr</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%0A%09%5BMono-patches%5D%09r107198%09-%09trunk/mcs/class/corlib/System&In-Reply-To=1215190881.6187.18.camel%40redbull.qnetp.net"
       TITLE="[Mono-dev]	[Mono-patches]	r107198	-	trunk/mcs/class/corlib/System">ClassDevelopment at A-SoftTech.com
       </A><BR>
    <I>Fri Jul  4 13:50:15 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028430.html">[Mono-dev] [Mono-patches]	r107198	-	trunk/mcs/class/corlib/System
</A></li>
        <LI>Next message: <A HREF="028419.html">[Mono-dev] Mono.Data.Sqlite
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28431">[ date ]</a>
              <a href="thread.html#28431">[ thread ]</a>
              <a href="subject.html#28431">[ subject ]</a>
              <a href="author.html#28431">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt;  This is used thousands of times throughout the class libraries.
</I>&gt;<i> &gt; But in *THIS* case with void * it does not seem to work. So this was
</I>&gt;<i> the easiest way to fix the problem.
</I>&gt;<i> 
</I>&gt;<i> Ok, I used a class and int as type. So here a test using an unsafe
</I>&gt;<i> struct and void* as member, just like IntPtr does:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">meebey at redbull</A>:~$ cat test.cs
</I>&gt;<i> using System;
</I>&gt;<i> 
</I>&gt;<i> unsafe class Test
</I>&gt;<i> {
</I>&gt;<i> 	int value;
</I>&gt;<i> 
</I>&gt;<i> 	Test(int value)
</I>&gt;<i> 	{
</I>&gt;<i> 		this.value = value;
</I>&gt;<i> 	}
</I>&gt;<i> 
</I>&gt;<i> 	public static void Main ()
</I>&gt;<i> 	{
</I>&gt;<i> 		Test t = new Test(123);
</I>&gt;<i> 		Console.WriteLine(t.value);
</I>&gt;<i> 
</I>&gt;<i> 		AnotherTest at = new AnotherTest(123);
</I>&gt;<i> 		Console.WriteLine((int) at.value);
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> public unsafe struct AnotherTest
</I>&gt;<i> {
</I>&gt;<i> 	internal void* value;
</I>&gt;<i> 
</I>&gt;<i> 	public AnotherTest(int value)
</I>&gt;<i> 	{
</I>&gt;<i> 		this.value = (void*) value;
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">meebey at redbull</A>:~$ mono test.exe
</I>&gt;<i> 123
</I>&gt;<i> 123
</I>
Although it is interesting that this seems to work (by the way the problem was that I couldn't even compile it). I still do not see the use of showing a test that shows that there are situations in which it works. If you want to reproduce the problem then I suggest that you take the Version of IntPtr (it&#8217;s a small and simple type anyways) before my changes and then change the values accordingly and then you will hopefully see the problem.

Then reduce it to the smallest case possible.
Then you would have to analyze the reason for it.

That (which could easily take one or more days) then leads you to maybe fix a corner-case that probably nobody ever used (well exaggerating a little bit ;) except the IntPtr struct.

&gt;<i> &gt;
</I>&gt;<i> &gt; Greetings Andreas
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; P.S. If you want to make further &quot;tests&quot; maybe mail me private and
</I>&gt;<i> not through the list to keep the noise low.
</I>&gt;<i> 
</I>&gt;<i> I don't think this is noise as you had issues with a possible compiler
</I>&gt;<i> bug, so allow other developers to join the discussion and comment on
</I>&gt;<i> the test-code.
</I>
I will not research any further here because imho it's just not worth my time and there are far more important things to fix. Feel free to do if you like.

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028430.html">[Mono-dev] [Mono-patches]	r107198	-	trunk/mcs/class/corlib/System
</A></li>
	<LI>Next message: <A HREF="028419.html">[Mono-dev] Mono.Data.Sqlite
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28431">[ date ]</a>
              <a href="thread.html#28431">[ thread ]</a>
              <a href="subject.html#28431">[ subject ]</a>
              <a href="author.html#28431">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
