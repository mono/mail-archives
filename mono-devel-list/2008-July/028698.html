<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Questions about the linear IR
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Questions%20about%20the%20linear%20IR&In-Reply-To=295e750a0807301623v26d9519enf2ddc96368564a42%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028697.html">
   <LINK REL="Next"  HREF="028699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Questions about the linear IR</H1>
    <B>Massimiliano Mantione</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Questions%20about%20the%20linear%20IR&In-Reply-To=295e750a0807301623v26d9519enf2ddc96368564a42%40mail.gmail.com"
       TITLE="[Mono-dev] Questions about the linear IR">massi at ximian.com
       </A><BR>
    <I>Thu Jul 31 03:13:09 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028697.html">[Mono-dev] Questions about the linear IR
</A></li>
        <LI>Next message: <A HREF="028699.html">[Mono-dev] Questions about the linear IR
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28698">[ date ]</a>
              <a href="thread.html#28698">[ thread ]</a>
              <a href="subject.html#28698">[ subject ]</a>
              <a href="author.html#28698">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&#65279;
On Thu, 2008-07-31 at 01:23 +0200, Zoltan Varga wrote: 
&gt;<i> With the linear IR, most things are easy, and only a few things are
</I>&gt;<i> hard, like optimizations which transform multiple operations into one,
</I>&gt;<i> like transforming a load+operation+store into an operating taking a
</I>&gt;<i> memory operand on x86.
</I>
But I would add another thing: with the old representation that kind
of transformations were easy only if the &quot;expression&quot; you wanted to
transform was represented as a tree.
If, for some reason, the operation was &quot;linearized&quot;, using local
variables as intermediate results instead of the tree nodes, then the
optimization simply did not take place.
Or the jit developer had to code twice: once for the tree case and
once for the &quot;linear&quot; case.

It all boils down to this: in a tree based representation, tree nodes
are values, that ultimately need to be stored somewhere.
But also local variables (assigned at the tree roots) contain values.
So, if you have an optimization pass that deals with values, you must
handle both locals and tree nodes, so your data structures get quirky
and you end up with double codepaths for the same logic all over the
place.

I had a prototype for global value numbering and full alias analysis for
the old jit (my work on HSSA before doing inlining), but the code was
terrible because of this.

Ciao,
  Massi


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028697.html">[Mono-dev] Questions about the linear IR
</A></li>
	<LI>Next message: <A HREF="028699.html">[Mono-dev] Questions about the linear IR
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28698">[ date ]</a>
              <a href="thread.html#28698">[ thread ]</a>
              <a href="subject.html#28698">[ subject ]</a>
              <a href="author.html#28698">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
