<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono.Data.Sqlite
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono.Data.Sqlite&In-Reply-To=27d75530807031723g3817684ub2ad1799f9b442ef%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028419.html">
   <LINK REL="Next"  HREF="028426.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono.Data.Sqlite</H1>
    <B>pablosantosluac at terra.es</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono.Data.Sqlite&In-Reply-To=27d75530807031723g3817684ub2ad1799f9b442ef%40mail.gmail.com"
       TITLE="[Mono-dev] Mono.Data.Sqlite">pablosantosluac at terra.es
       </A><BR>
    <I>Sat Jul  5 04:59:38 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028419.html">[Mono-dev] Mono.Data.Sqlite
</A></li>
        <LI>Next message: <A HREF="028426.html">[Mono-dev] Streaming with Moonlight/Silverlight vs Flash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28434">[ date ]</a>
              <a href="thread.html#28434">[ thread ]</a>
              <a href="subject.html#28434">[ subject ]</a>
              <a href="author.html#28434">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Yes, we use sqlite for testing purposes (the memory backend). But 
unfortunately there's no way to use in in multithreaded environments. 
The only option would be locking the access, but it is dangerous and you 
could en up in deadlocks if you're not very careful.



pablo

Joe Audette escribi&#243;:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> My impression is that SQLite is not that great a choice for a multi
</I>&gt;<i> threaded app. If you google sqlite mutli threading, in the first
</I>&gt;<i> result which links to here:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.sqlite.org/cvstrac/wiki?p=MultiThreading">http://www.sqlite.org/cvstrac/wiki?p=MultiThreading</A>
</I>&gt;<i>
</I>&gt;<i> you'll see:
</I>&gt;<i> &quot;It has never been safe to use the same database connection
</I>&gt;<i> simultaneously in multiple threads.&quot;
</I>&gt;<i>
</I>&gt;<i> Sqlite is really meant to be a lightweight db for single threaded apps.
</I>&gt;<i>
</I>&gt;<i> Hope it helps,
</I>&gt;<i>
</I>&gt;<i> Joe
</I>&gt;<i>
</I>&gt;<i> On Sun, Jun 29, 2008 at 6:16 AM, Anders Aagaard &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">aagaande at gmail.com</A>&gt; wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> Hi
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've been using Mono.Data.Sqlite in a multi threaded application, since the
</I>&gt;&gt;<i> code says it's based on Robert Simpson's library I've been looking at his
</I>&gt;&gt;<i> page for documentation (as Mono.Data.Sqlite documentation seems extremely
</I>&gt;&gt;<i> sparse).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My problem is that when using multiple threads, all writing to the database,
</I>&gt;&gt;<i> I get :
</I>&gt;&gt;<i> Unhandled Exception: Mono.Data.Sqlite.SqliteException: The database file is
</I>&gt;&gt;<i> locked
</I>&gt;&gt;<i> Every thread has it's own cloned SqliteConnection (during the creation of
</I>&gt;&gt;<i> the thread I call MasterConnection.Clone (), and only use the referenced
</I>&gt;&gt;<i> connection).  The exception happens instantly when two threads begin a
</I>&gt;&gt;<i> transaction to the same database.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is the instructions for Robert Simpson's library not accurate for mono's
</I>&gt;&gt;<i> sqlite library, or am I hitting a bug?  Any suggestions on how to cleanly
</I>&gt;&gt;<i> work around this problem?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have one file scanner that adds files to the database, one text file
</I>&gt;&gt;<i> scanner that scans all text files added and adds web links from them, and
</I>&gt;&gt;<i> one web updater that takes the links and updates that from an online
</I>&gt;&gt;<i> database.  They are all seperate threads.  The main thread will also
</I>&gt;&gt;<i> occasionally do a small commit, but it will mostly read from the database.
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> View this message in context: <A HREF="http://www.nabble.com/Mono.Data.Sqlite-tp18179121p18179121.html">http://www.nabble.com/Mono.Data.Sqlite-tp18179121p18179121.html</A>
</I>&gt;&gt;<i> Sent from the Mono - Dev mailing list archive at Nabble.com.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   
</I></PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028419.html">[Mono-dev] Mono.Data.Sqlite
</A></li>
	<LI>Next message: <A HREF="028426.html">[Mono-dev] Streaming with Moonlight/Silverlight vs Flash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28434">[ date ]</a>
              <a href="thread.html#28434">[ thread ]</a>
              <a href="subject.html#28434">[ subject ]</a>
              <a href="author.html#28434">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
