<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Marshalling (Segmentation fault)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Marshalling%20%28Segmentation%20fault%29&In-Reply-To=fel450%24805%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025233.html">
   <LINK REL="Next"  HREF="025234.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Marshalling (Segmentation fault)</H1>
    <B>russell.kay at realtimeworlds.com</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Marshalling%20%28Segmentation%20fault%29&In-Reply-To=fel450%24805%241%40sea.gmane.org"
       TITLE="[Mono-dev] Marshalling (Segmentation fault)">russell.kay at realtimeworlds.com
       </A><BR>
    <I>Thu Oct 11 11:38:24 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="025233.html">[Mono-dev] Marshalling (Segmentation fault)
</A></li>
        <LI>Next message: <A HREF="025234.html">[Mono-dev] Marshalling (Segmentation fault)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25239">[ date ]</a>
              <a href="thread.html#25239">[ thread ]</a>
              <a href="subject.html#25239">[ subject ]</a>
              <a href="author.html#25239">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>True,... 

In this case I was ripping an example I had that was using a union type
layout, which does need this type of arrangement... Apologies all round.

For simple structures C/C++ is pretty portable these days between
architectures, the main issue is 32bit/64bit and pointers (and any
alignment specific nastiness).

My main gripe with C# is not supporting union in a portable way (i.e.
you have to resort to LayoutKind.Explicit).

Russell


-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf Of Robert
Jordan
Sent: 11 October 2007 13:15
To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Marshalling (Segmentation fault)

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">russell.kay at realtimeworlds.com</A> wrote:
&gt;<i> The C# version of this Structure would be best expressed as
</I>&gt;<i> 
</I>&gt;<i> [StructLayout(LayoutKind.Explicit)]
</I>&gt;<i> unsafe struct FrameGrab
</I>&gt;<i> {
</I>&gt;<i> 	[FieldOffset(0)]
</I>&gt;<i> 	public int bufferlength;
</I>&gt;<i> 	[FieldOffset(4)]
</I>&gt;<i> 	Public fixed IntPtr buffer[1000]
</I>&gt;<i> }
</I>
This is usually bad portability-wise. LayoutKind.Sequential with
the system's ABI default packing should be used instead, unless
the struct really has a specific layout.

Robert

_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>

____________________________________________________________________
This email has been scanned by the MessageLabs Email Security System

DISCLAIMER
This message and any attachments contain privileged and confidential information intended for the use of the addressee named above. If you are not the intended recipient of this message, you are hereby notified that any use, dissemination, distribution or reproduction of this message is prohibited. Please note that we cannot guarantee that this message or any attachment is virus free or that it has not been intercepted and amended. The views of the author may not necessarily reflect those of Real Time Worlds Ltd.
____________________________________________________________________
This email has been scanned by the MessageLabs Email Security System

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025233.html">[Mono-dev] Marshalling (Segmentation fault)
</A></li>
	<LI>Next message: <A HREF="025234.html">[Mono-dev] Marshalling (Segmentation fault)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25239">[ date ]</a>
              <a href="thread.html#25239">[ thread ]</a>
              <a href="subject.html#25239">[ subject ]</a>
              <a href="author.html#25239">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
