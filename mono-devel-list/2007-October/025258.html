<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] glibc detected *** mono: double free or corruption
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20glibc%20detected%20%2A%2A%2A%20mono%3A%20double%20free%20or%20corruption&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025335.html">
   <LINK REL="Next"  HREF="025259.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] glibc detected *** mono: double free or corruption</H1>
    <B>Abir Bhattacharya</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20glibc%20detected%20%2A%2A%2A%20mono%3A%20double%20free%20or%20corruption&In-Reply-To="
       TITLE="[Mono-dev] glibc detected *** mono: double free or corruption">abirb at 2pirad.com
       </A><BR>
    <I>Mon Oct 15 09:00:18 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="025335.html">[Mono-dev] win-4-i386 build hung
</A></li>
        <LI>Next message: <A HREF="025259.html">[Mono-dev] glibc detected *** mono: double free or corruption
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25258">[ date ]</a>
              <a href="thread.html#25258">[ thread ]</a>
              <a href="subject.html#25258">[ subject ]</a>
              <a href="author.html#25258">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

 

Am receiving an native crash error like : *** glibc detected *** mono:
double free or corruption (!prev): 0x08726100 ***. I am trying to call a
PInvoke to a 'C' method which returns me a struct. I am using Fedora (2.6)
and have installed mono from the standard installer : 

 

 

 

The trace is some thing like :

 

Reached unmanged code!

fgbuffer.length = 115200

sizeof(buffer2) = 4

sizeof(fgbuffer.buffer) = 4

sizeof(fgbuffer) = 8

leaving unmanged code!

*** glibc detected *** mono: double free or corruption (!prev): 0x08726100
***

======= Backtrace: =========

/lib/libc.so.6[0x46b56f41]

/lib/libc.so.6(cfree+0x90)[0x46b5a580]

/usr/lib/fgrab.so(fbufferflush2+0x11)[0x1ddefb]

[0xaa669d]

[0xaa50c9]

[0xaa4fa7]

[0xaa4ee2]

[0xaa4c18]

[0xaa4b76]

mono(mono_runtime_invoke_array+0x19b)[0x80b863b]

mono[0x80b898d]

mono[0x80b0513]

mono[0x80b18dd]

mono[0x80f0404]

mono[0x81092f2]

mono[0x8119a07]

/lib/libpthread.so.0[0x46da22fb]

/lib/libc.so.6(clone+0x5e)[0x46bbf93e]

======= Memory map: ========

00001000-000df000 rwxp 00001000 00:00 0

00110000-00121000 rwxp 00110000 00:00 0

00121000-00124000 r-xp 00000000 fd:00 7407067
/usr/lib/mono/gac/Accessibility/2.0.0.0__b03f5f7f11d50a3a/Accessibility.dll

00124000-00129000 r-xs 00000000 fd:00 6424685
/var/cache/fontconfig/beeeeb3dfe132a8a0633a017c99ce0c0-x86.cache-2

00129000-0012a000 rwxp 00129000 00:00 0

0012a000-00134000 r-xp 00000000 fd:00 4784169    /lib/libnss_files-2.6.so

00134000-00135000 r-xp 00009000 fd:00 4784169    /lib/libnss_files-2.6.so

00135000-00136000 rwxp 0000a000 fd:00 4784169    /lib/libnss_files-2.6.so

00136000-001b3000 rwxp 00136000 00:00 0

001b3000-001bb000 r-xs 00000000 fd:00 6424451
/var/cache/fontconfig/e19de935dec46bbf3ed114ee4965548a-x86.cache-2

001bb000-001c1000 r-xs 00000000 fd:00 6424456
/var/cache/fontconfig/7ddba6133ef499da58de5e8c586d3b75-x86.cache-2

001c1000-001c3000 r-xs 00000000 fd:00 6424476
/var/cache/fontconfig/87f5e051180a7a75f16eb6fe7dbd3749-x86.cache-2

001c3000-001d3000 rwxp 001c3000 00:00 0

001d3000-001da000 r-xs 00000000 fd:00 6095109
/usr/lib/gconv/gconv-modules.cache

001da000-001db000 r-xp 00000000 fd:00 6095032    /usr/lib/gconv/ISO8859-1.so

001db000-001dd000 rwxp 00000000 fd:00 6095032    /usr/lib/gconv/ISO8859-1.so

001dd000-001df000 r-xp 00000000 fd:00 6075501    /usr/lib/fgrab.so

001df000-001e0000 rwxp 00001000 fd:00 6075501    /usr/lib/fgrab.so

001e0000-001e1000 rwxp 001e0000 00:00 0

001e1000-001ea000 r-xp 00000000 fd:00 6090441    /usr/lib/libesd.so.0.2.38

001ea000-001eb000 rwxp 00009000 fd:00 6090441    /usr/lib/libesd.so.0.2.38

001ec000-001f7000 r-xp 00000000 fd:00 429028
/home/mono/MonoConsumer_1/bin/Debug/MonoConsumer.exe

001f7000-00330000 rwxs 00000000 fd:00 4325649
/root/.wapi/shared_data-localhost.localdomain-Linux-i686-312-11-0

00330000-0039a000 r-xp 00000000 fd:00 6488174
/usr/lib/mono/gac/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dl
l

0039a000-003ba000 rwxp 0039a000 00:00 0

003bd000-003e8000 r-xp 00000000 fd:00 6488148
/usr/lib/mono/gac/Mono.Posix/2.0.0.0__0738eb9f132ed756/Mono.Posix.dll

003ee000-003fe000 rwxp 003ee000 00:00 0

003fe000-003ff000 --xp 003fe000 00:00 0

003ff000-00555000 rwxp 003ff000 00:00 0

00557000-0055a000 r-xs 00000000 fd:00 6424687
/var/cache/fontconfig/d04038e664b0033ae700a78c51f179d3-x86.cache-2

0055a000-0057a000 rwxp 0055a000 00:00 0

0057a000-0058f000 r-xp 00000000 fd:00 6073134
/usr/lib/libMonoPosixHelper.so

0058f000-00590000 rwxp 00015000 fd:00 6073134
/usr/lib/libMonoPosixHelper.so

00591000-00592000 rwxp 00591000 00:00 0

00597000-00797000 r-xp 00000000 fd:00 6064738
/usr/lib/locale/locale-archive

007a2000-007a5000 r-xs 00000000 fd:00 6424455
/var/cache/fontconfig/b67b32625a2bb51b023d3814a918f351-x86.cache-2

007a5000-00810000 r-xp 00000000 fd:00 6587525
/usr/share/fonts/dejavu-lgc/DejaVuLGCSans.ttf

00810000-00820000 rwxp 00810000 00:00 0

00826000-0082c000 r-xs 00000000 fd:00 6424474
/var/cache/fontconfig/b79f3aaa7d385a141ab53ec885cc22a8-x86.cache-2

00837000-00838000 rwxp 00837000 00:00 0

00838000-00a8c000 r-xp 00000000 fd:00 6458765
/usr/lib/mono/2.0/mscorlib.dll

00a94000-00ab400Stacktrace:

 

  at (wrapper managed-to-native) MonoConsumer.Form1.fbufferflush2 (intptr)
&lt;0x00004&gt;

  at (wrapper managed-to-native) MonoConsumer.Form1.fbufferflush2 (intptr)
&lt;0xffffffff&gt;

  at MonoConsumer.Form1.t1Elapsed (object,System.Timers.ElapsedEventArgs)
&lt;0x000e8&gt;

  at (wrapper delegate-invoke)
System.MulticastDelegate.invoke_void_object_ElapsedEventArgs
(object,System.Timers.ElapsedEventArgs) &lt;0xffffffff&gt;

  at System.Timers.Timer.Callback (object) &lt;0x002a1&gt;

  at (wrapper delegate-invoke) System.MulticastDelegate.invoke_void_object
(object) &lt;0xffffffff&gt;

  at (wrapper runtime-invoke) System.Object.runtime_invoke_void_object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

 

Native stacktrace:

 

        mono [0x815738a]

 

Reached unmanged code!

fgbuffer.length = 115200

        [0xd44440]

        [0xd44402]

        /lib/libc.so.6(gsignal+0x50) [0x46b17fa0]

        /lib/libc.so.6(abort+0x101) [0x46b198b1]

        /lib/libc.so.6 [0x46b4eebb]

        /lib/libc.so.6 [0x46b56f41]

        /lib/libc.so.6(cfree+0x90) [0x46b5a580]

        /usr/lib/fgrab.so(fbufferflush2+0x11) [0x1ddefb]

        [0xaa669d]

        [0xaa50c9]

        [0xaa4fa7]

        [0xaa4ee2]

        [0xaa4c18]

        [0xaa4b76]

        mono(mono_runtime_invoke_array+0x19b) [0x80b863b]

        mono [0x80b898d]

        mono [0x80b0513]

        mono [0x80b18dd]

        mono [0x80f0404]

        mono [0x81092f2]

        mono [0x8119a07]

        /lib/libpthread.so.0 [0x46da22fb]

        /lib/libc.so.6(clone+0x5e) [0x46bbf93e]



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071015/a3fe02ed/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20071015/a3fe02ed/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025335.html">[Mono-dev] win-4-i386 build hung
</A></li>
	<LI>Next message: <A HREF="025259.html">[Mono-dev] glibc detected *** mono: double free or corruption
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25258">[ date ]</a>
              <a href="thread.html#25258">[ thread ]</a>
              <a href="subject.html#25258">[ subject ]</a>
              <a href="author.html#25258">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
