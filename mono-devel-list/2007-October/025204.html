<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mono 1.2.5.1 installer on go-mono website is broken
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono%201.2.5.1%20installer%20on%20go-mono%20website%20is%20broken&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025199.html">
   <LINK REL="Next"  HREF="025207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mono 1.2.5.1 installer on go-mono website is broken</H1>
    <B>Antti S. Lankila</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono%201.2.5.1%20installer%20on%20go-mono%20website%20is%20broken&In-Reply-To="
       TITLE="[Mono-dev] mono 1.2.5.1 installer on go-mono website is broken">alankila at bel.fi
       </A><BR>
    <I>Sun Oct  7 09:42:49 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="025199.html">[Mono-dev] Class Status pages for Olive
</A></li>
        <LI>Next message: <A HREF="025207.html">[Mono-dev] SoapFormatter patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25204">[ date ]</a>
              <a href="thread.html#25204">[ thread ]</a>
              <a href="subject.html#25204">[ subject ]</a>
              <a href="author.html#25204">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I tried to test my previous test.cs on the mono 1.2.5.1 by downloading 
it from the website. Unfortunately the installer is buggy and doesn't 
work at all. I straced it, and observed that it copies some data into a 
/tmp file with the intent to exec it. We are here right after the copy 
part has finished:

open(&quot;/tmp/upxATVSFYIAGWV&quot;, O_RDONLY)   = 3
access(&quot;/proc/6869/fd/3&quot;, R_OK|X_OK)    = 0
unlink(&quot;/tmp/upxATVSFYIAGWV&quot;)           = 0
fcntl(3, F_SETFD, FD_CLOEXEC)           = 0
execve(&quot;/proc/6869/fd/3&quot;, [&quot;../mono-1.2.5.1_2-installer.bin&quot;], [/* 36 
vars */]) = -1 ENOENT (No such file or directory)

So it unlinks the file and tries to execve it via the proc fd, which is 
(as far as I know) only a symlink to the name of the real file that 
represents that fd. So in truth the underlying system call, execve(), 
relies on that tmp file still existing, even if the process does have an 
open fd to it.

The kernel version is 2.6.22-13-generic and libc is 2.6.1-1ubuntu9.

-- 
Antti

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025199.html">[Mono-dev] Class Status pages for Olive
</A></li>
	<LI>Next message: <A HREF="025207.html">[Mono-dev] SoapFormatter patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25204">[ date ]</a>
              <a href="thread.html#25204">[ thread ]</a>
              <a href="subject.html#25204">[ subject ]</a>
              <a href="author.html#25204">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
