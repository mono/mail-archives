<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mcs math performance enhancement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mcs%20math%20performance%20enhancement&In-Reply-To=69d8d540710200201g7b4eb9b8yec2a3985d9a4896b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025357.html">
   <LINK REL="Next"  HREF="025355.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mcs math performance enhancement</H1>
    <B>Marek Safar</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mcs%20math%20performance%20enhancement&In-Reply-To=69d8d540710200201g7b4eb9b8yec2a3985d9a4896b%40mail.gmail.com"
       TITLE="[Mono-dev] mcs math performance enhancement">marek.safar at seznam.cz
       </A><BR>
    <I>Wed Oct 24 05:21:19 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="025357.html">[Mono-dev] mcs math performance enhancement
</A></li>
        <LI>Next message: <A HREF="025355.html">[Mono-dev] mojoPortal broken using latest Mono from svn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25373">[ date ]</a>
              <a href="thread.html#25373">[ thread ]</a>
              <a href="subject.html#25373">[ subject ]</a>
              <a href="author.html#25373">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Jaroslav,
&gt;<i> problem:
</I>&gt;<i> As C# does not have an exponentiation operato, programmers will
</I>&gt;<i> typically use the
</I>&gt;<i> expression &quot;x*x&quot; to get a square of x. There is Math.Pow, but only for
</I>&gt;<i> doubles and likely
</I>&gt;<i> to be inefficient for this simple case. This is a fairly common idiom
</I>&gt;<i> even for C/C++ math programmers who can use pow(T,int).
</I>&gt;<i> Mcs (1.2.5.1 release) does not recognize this special case, and emits
</I>&gt;<i> two loads for the variable (or struct or class field, which is
</I>&gt;<i> longer), instead of the obvious dup-mul sequence (which can easily
</I>&gt;<i> identify the &quot;calculate square&quot; idiom for JIT)
</I>&gt;<i>   
</I>The only scenario which can benefit from this change is when both of 
operands
are same instance variables. In all other cases this would produce 
either invalid
or slower code.

I have not found such case in any of Mono source codes and because this 
kind of
optimizations should be done at JIT level, the patch is not worth applying.

Thanks
Marek

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025357.html">[Mono-dev] mcs math performance enhancement
</A></li>
	<LI>Next message: <A HREF="025355.html">[Mono-dev] mojoPortal broken using latest Mono from svn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25373">[ date ]</a>
              <a href="thread.html#25373">[ thread ]</a>
              <a href="subject.html#25373">[ subject ]</a>
              <a href="author.html#25373">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
