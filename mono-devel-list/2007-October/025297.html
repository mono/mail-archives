<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Serial ports in mono - event notification
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Serial%20ports%20in%20mono%20-%20event%20notification&In-Reply-To=6FE5B54E82FD4B4A93CD0D8730986CBBB58D4D%40ATLEXCV01.zcs.corp">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025268.html">
   <LINK REL="Next"  HREF="025267.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Serial ports in mono - event notification</H1>
    <B>Dries Naudts</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Serial%20ports%20in%20mono%20-%20event%20notification&In-Reply-To=6FE5B54E82FD4B4A93CD0D8730986CBBB58D4D%40ATLEXCV01.zcs.corp"
       TITLE="[Mono-dev] Serial ports in mono - event notification">dries.naudts at intec.ugent.be
       </A><BR>
    <I>Wed Oct 17 03:59:34 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="025268.html">[Mono-dev] Serial ports in mono - event notification
</A></li>
        <LI>Next message: <A HREF="025267.html">[Mono-dev] TreeModelAdapter vs CellRendererCombo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25297">[ date ]</a>
              <a href="thread.html#25297">[ thread ]</a>
              <a href="subject.html#25297">[ subject ]</a>
              <a href="author.html#25297">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Eric,

thank you very much for your detailed information. I will consider your 
polling technique. Since I'm not sure whether mono will support serial 
events soon, it seems like a good solution for both environments.

Kind regards,
Dries


Engler, Eric wrote:
&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA256
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> What is the current status on the event notification mechanism of 
</I>&gt;&gt;<i> serial ports in  Mono? 
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I can't comment on the Mono status question but I thought I'd pass along
</I>&gt;<i> a lesson I learned about serial events in Windows. They are notoriously
</I>&gt;<i> late in many cases due to buffering. They are supposed to occur quick
</I>&gt;<i> enough to let you stream at a high baud rate, but Windows XP tries to
</I>&gt;<i> reduce the frequency of the events because it can cache the data (it
</I>&gt;<i> caches a lot more than the small UART cache buffer). This is maddening
</I>&gt;<i> for people like me who want to know immediately when a byte has been
</I>&gt;<i> received. 
</I>&gt;<i>
</I>&gt;<i> If you only need a relatively low baud rate, or if you can tolerate a
</I>&gt;<i> delay in notification, this may be fine. In my case I needed 115K baud
</I>&gt;<i> and I had to know immediately when a byte was received (I could not
</I>&gt;<i> accept any significant latency).
</I>&gt;<i>
</I>&gt;<i> I took a 2-prong approach to fix my problem. Firstly, when I am in a
</I>&gt;<i> routine that knows how many bytes to expect I go into a tight loop and
</I>&gt;<i> receive that number of bytes. Secondly, when I am not sure when to
</I>&gt;<i> expect incoming data, I hook the Windows Application_Idle event and I
</I>&gt;<i> poll the serial port to see if it found any data. This polling gives me
</I>&gt;<i> immediate notification without delay, but the Application_Idle event
</I>&gt;<i> doesn't occur often enough to let me stream data at 115K baud, so that's
</I>&gt;<i> why I combined both approaches. Another advantage of this approach is
</I>&gt;<i> that it freed me from the threading concern of having to marshal over
</I>&gt;<i> the data from a background event over to the GUI thread (not difficult,
</I>&gt;<i> but still a little bit of a pain).
</I>&gt;<i>
</I>&gt;<i> You can see my Windows application here (a visual debugger for
</I>&gt;<i> microcontrollers):
</I>&gt;<i> <A HREF="http://www.EricEngler.com/Pluto.aspx">http://www.EricEngler.com/Pluto.aspx</A>
</I>&gt;<i>
</I>&gt;<i> Mono serial events (when implemented) might not share this Windows XP
</I>&gt;<i> problem, especially when running on linux, but if you need one
</I>&gt;<i> application to work on both environments this is something to consider.
</I>&gt;<i>
</I>&gt;<i> Eric
</I>&gt;<i>
</I>&gt;<i> NOTICE:  The information contained in this electronic mail transmission is intended by the sender for the sole use of the named individual or entity to which it is directed and may contain information that is privileged or 
</I>&gt;<i> otherwise confidential.  Please do not copy it or use it for any purposes, or disclose its contents to any other person.  To do so could violate state and Federal privacy laws.  If you have received this electronic mail
</I>&gt;<i> transmission in error, please delete it from your system without copying or forwarding it, and notify the sender of the error by reply email or by telephone, so that the sender's address records can be corrected.  Thank you for your cooperation.
</I>&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: PGP Universal 2.6.2
</I>&gt;<i> Charset: us-ascii
</I>&gt;<i>
</I>&gt;<i> wsBVAwUBRxOnUchfyUs+le7yAQjclQf/Y9UVN9lgzoKzlQ9NuQZhH147mT3IDYvq
</I>&gt;<i> sEm+Q13jVuUE5tVQ3QjrcKJ33TN40XqdK6q7oSptnVjODWsy4vl3P7D7zRxVihAz
</I>&gt;<i> 9/WQWhQSL5+ItxiCYNLIJ63M+hSQ+IO9SCTtMbVlOxxct+bSGokDnh4Gp3u1FkLo
</I>&gt;<i> nXgDImyuj1fmg4qPpWsNUnvB5n4dflYl6dBgVwmIEXaa5pNB4WH5/G32FnFuSpWS
</I>&gt;<i> /3SHZwxkAQkFe97axc1VwdGJSvxb4dwrdF0FzmwzTBLPAwM6T7J5ZXCT9q2yO3dA
</I>&gt;<i> gxGiJbfJlJAYe0DSD6xYeR2a8Dy3ML/KNFbOvrTCWD5FyAtL3GKkEQ==
</I>&gt;<i> =cSHh
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>   
</I>

-- 
Dries Naudts
IBCN - IBBT - Universiteit Gent
Gaston Crommenlaan 8 bus 201
B-9050 Ghent
Tel: +32 9 331 49 74
Fax: +32 9 331 48 99
<A HREF="http://www.ibcn.intec.ugent.be">http://www.ibcn.intec.ugent.be</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025268.html">[Mono-dev] Serial ports in mono - event notification
</A></li>
	<LI>Next message: <A HREF="025267.html">[Mono-dev] TreeModelAdapter vs CellRendererCombo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25297">[ date ]</a>
              <a href="thread.html#25297">[ thread ]</a>
              <a href="subject.html#25297">[ subject ]</a>
              <a href="author.html#25297">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
