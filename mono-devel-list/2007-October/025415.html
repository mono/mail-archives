<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Syscall.mmap problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Syscall.mmap%20problem&In-Reply-To=4720E962.3070206%40terra.cl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025403.html">
   <LINK REL="Next"  HREF="025417.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Syscall.mmap problem</H1>
    <B>Mauricio Henriquez</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Syscall.mmap%20problem&In-Reply-To=4720E962.3070206%40terra.cl"
       TITLE="[Mono-dev] Syscall.mmap problem">mhenriquezs at terra.cl
       </A><BR>
    <I>Sat Oct 27 23:14:29 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="025403.html">[Mono-dev] Syscall.mmap problem
</A></li>
        <LI>Next message: <A HREF="025417.html">[Mono-dev] Syscall.mmap problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25415">[ date ]</a>
              <a href="thread.html#25415">[ thread ]</a>
              <a href="subject.html#25415">[ subject ]</a>
              <a href="author.html#25415">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please guys help me a little with this!!!, I realy need to solve this 
weird thing to help in the Video4Linux.Net proyect....
..or at least tell me what kind of test do you need to help you to find 
the source problem.

In advance, thank you very much

Mauricio

Mauricio Henriquez wrote:
&gt;<i> about the Syscall.mmap function call, if I ask for the 
</I>&gt;<i> Mono.Unix.Native.Stdlib.GetLastError(), I get a
</I>&gt;<i> EOVERFLOW error message.
</I>&gt;<i> what can I do to solve this or give you a better bug report?
</I>&gt;<i>
</I>&gt;<i> thanks
</I>&gt;<i>
</I>&gt;<i> Mauricio
</I>&gt;<i>
</I>&gt;<i> Mauricio Henriquez wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> Hi to all:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I trying to help to Tim Taubert in they implementation of 
</I>&gt;&gt;<i> Video4Linux.Net and now I have problems with the Syscall.mmap function, 
</I>&gt;&gt;<i> so I traslate a C mmap working example  code and allways crash, here is 
</I>&gt;&gt;<i> my code:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     int fdin;
</I>&gt;&gt;<i>             IntPtr start;
</I>&gt;&gt;<i>             Mono.Unix.Native.Stat statbuf;
</I>&gt;&gt;<i>             long len;
</I>&gt;&gt;<i>             if((fdin = Syscall.open(&quot;/pr.txt&quot;,  OpenFlags.O_RDONLY)) &lt; 0)
</I>&gt;&gt;<i>                 Console.WriteLine(&quot;open crash&quot;);
</I>&gt;&gt;<i>             else
</I>&gt;&gt;<i>                 Console.WriteLine(&quot;open fine&quot;);
</I>&gt;&gt;<i>            
</I>&gt;&gt;<i>             if((Syscall.fstat(fdin, out statbuf)) &lt; 0)
</I>&gt;&gt;<i>                 Console.WriteLine(&quot;fstat crash&quot;);
</I>&gt;&gt;<i>             else
</I>&gt;&gt;<i>                 Console.WriteLine(&quot;fstat ok&quot;);
</I>&gt;&gt;<i>            
</I>&gt;&gt;<i>             len = statbuf.st_size;
</I>&gt;&gt;<i>             //file lenght is 6, I test this with a mmap C code
</I>&gt;&gt;<i>             Console.WriteLine(&quot;length = {0}&quot;, len); //OK
</I>&gt;&gt;<i>            
</I>&gt;&gt;<i>             start = Syscall.mmap
</I>&gt;&gt;<i>                 (IntPtr.Zero,
</I>&gt;&gt;<i>                  (ulong)len,
</I>&gt;&gt;<i>                  MmapProts.PROT_READ,
</I>&gt;&gt;<i>                  MmapFlags.MAP_PRIVATE,
</I>&gt;&gt;<i>                  fdin,
</I>&gt;&gt;<i>                  0);
</I>&gt;&gt;<i>             Console.WriteLine(start.ToString());
</I>&gt;&gt;<i>             if (start == Syscall.MAP_FAILED)
</I>&gt;&gt;<i>                 throw new Exception(&quot;mmap crash.&quot;);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> do you see some mistake?, I use Fedora 5 with mono-1.2.5.1, may be you 
</I>&gt;&gt;<i> can send me a workin Mono.Posix or Mono.Unix dll, becouse I prefer don't 
</I>&gt;&gt;<i> compile all mono stuff only for this dll, becouse all other stuff work 
</I>&gt;&gt;<i> perfectly.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In advance, thank you very much.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Mauricio Henriquez
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>   
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025403.html">[Mono-dev] Syscall.mmap problem
</A></li>
	<LI>Next message: <A HREF="025417.html">[Mono-dev] Syscall.mmap problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25415">[ date ]</a>
              <a href="thread.html#25415">[ thread ]</a>
              <a href="subject.html#25415">[ subject ]</a>
              <a href="author.html#25415">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
