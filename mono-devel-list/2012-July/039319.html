<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] WCF Fail with System.Net.Sockets.SocketException:	Connection reset by peer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20WCF%20Fail%20with%20System.Net.Sockets.SocketException%3A%0A%09Connection%20reset%20by%20peer&In-Reply-To=%3CDCFD16C0-2825-43D4-B1C9-3EC746B4AAAC%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039317.html">
   <LINK REL="Next"  HREF="039322.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] WCF Fail with System.Net.Sockets.SocketException:	Connection reset by peer</H1>
    <B>Robert Wilkens</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20WCF%20Fail%20with%20System.Net.Sockets.SocketException%3A%0A%09Connection%20reset%20by%20peer&In-Reply-To=%3CDCFD16C0-2825-43D4-B1C9-3EC746B4AAAC%40gmail.com%3E"
       TITLE="[Mono-dev] WCF Fail with System.Net.Sockets.SocketException:	Connection reset by peer">robwilkens at gmail.com
       </A><BR>
    <I>Mon Jul  9 14:32:50 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039317.html">[Mono-dev] ASP.NET MVC 3 with Razor on Mono 2.10.1 ?
</A></li>
        <LI>Next message: <A HREF="039322.html">[Mono-dev] WCF Fail with System.Net.Sockets.SocketException: Connection reset by peer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39319">[ date ]</a>
              <a href="thread.html#39319">[ thread ]</a>
              <a href="subject.html#39319">[ subject ]</a>
              <a href="author.html#39319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just want to update the list in case anyone was following&#8230;

I was able to reproduce some of the problems, and came up with some work arounds that wouldn't crash the WCF server on client disconnect (windows doesn't crash the server), at least for the issues i was able to reproduce.  I tried to keep the fixes confined so they have minimal impact on things which were unrelated, for example, i catch the exceptions where they were causing failures, but where they were not causing failures, in general i tried to let the exception flow through so it could be caught by something more appropriate, such as the user program itself.

The person who reported them originally is going to try these changes on a live server over the next few days to see if it helps matters.  They are in a pull request, but i am not in a hurry for them to be pulled, because among other things, i don't generally use WCF and these issue don't affect me.  They were just interesting to me.

I have personal issues (it's not me who is having the problem, but i need to deal with it), unrelated to mono, which have been holding me up from trying to do more work with mono the last several days.  I don't want to get into them here.  Depending on how things go, i might not touch mono source again until some time next month.  Please don't take this as a lack of interest from me -- I've very much enjoyed being active here, both learning and contributing (when i do it right).  Will try to keep up with the mailing list during this time, and if a problem really interests me, i might find time to get involved.  

-Rob

On Jun 29, 2012, at 6:15 AM, Robert Wilkens wrote:

&gt;<i> Thanks - I'm on my mac now and trying to set up mono develop..  It appears to have an easier time with the alpha version of mono, but then it said 'update available' and downloaded an older version then stopped working again, I'll get it soon.  Otherwise, I'll be on my linux laptop soon, just wanted to set up a second machine to test on since networking code sometimes works better when it's not just localhost to localhost.
</I>&gt;<i> 
</I>&gt;<i> -Rob
</I>&gt;<i> 
</I>&gt;<i> On Jun 28, 2012, at 6:35 PM, shahbour wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> <A HREF="http://mono.1490590.n4.nabble.com/file/n4650235/TestWCFServer.zip">http://mono.1490590.n4.nabble.com/file/n4650235/TestWCFServer.zip</A>
</I>&gt;&gt;<i> TestWCFServer.zip 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hello Rob
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I am attaching a simple application to demonstrate the error we are getting.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Unfortunately using the above example the server is not crashing but still
</I>&gt;&gt;<i> it raise the error (note that in my live app , some time it do the same but
</I>&gt;&gt;<i> crash more) 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> If you run the server like below you will notice the error
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> mono --debug --trace=N:nothing TestWCFServer.exe
</I>&gt;&gt;<i> Press enter to exit
</I>&gt;&gt;<i> [0xb0a7d000:] EXCEPTION handling: System.Net.Sockets.SocketException:
</I>&gt;&gt;<i> Connection reset by peer
</I>&gt;&gt;<i> [0xb0a7d000:] EXCEPTION handling: System.IO.IOException: EndRead failure
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> To run the example just start the server , then start the client and before
</I>&gt;&gt;<i> getting the result back from server close it (Ctrl+C) 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I put a delay in the server to demonstrate the request over internet and to
</I>&gt;&gt;<i> have time to close it. After you close it by small time the application will
</I>&gt;&gt;<i> raise the above error .
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Tomorrow I will change the client to a silver light application to simulate
</I>&gt;&gt;<i> exactly my application because the server crash approximately every time I
</I>&gt;&gt;<i> close the browser before getting the result in my live example.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> BR
</I>&gt;&gt;<i> Shahbour
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/WCF-Fail-with-System-Net-Sockets-SocketException-Connection-reset-by-peer-tp4650173p4650235.html">http://mono.1490590.n4.nabble.com/WCF-Fail-with-System-Net-Sockets-SocketException-Connection-reset-by-peer-tp4650173p4650235.html</A>
</I>&gt;&gt;<i> Sent from the Mono - Dev mailing list archive at Nabble.com.
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039317.html">[Mono-dev] ASP.NET MVC 3 with Razor on Mono 2.10.1 ?
</A></li>
	<LI>Next message: <A HREF="039322.html">[Mono-dev] WCF Fail with System.Net.Sockets.SocketException: Connection reset by peer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39319">[ date ]</a>
              <a href="thread.html#39319">[ thread ]</a>
              <a href="subject.html#39319">[ subject ]</a>
              <a href="author.html#39319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
