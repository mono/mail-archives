<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Requested listen uri scheme must be http, but was file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Requested%20listen%20uri%20scheme%20must%20be%20http%2C%20but%20was%20file&In-Reply-To=%3C1343652642967-4650640.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039445.html">
   <LINK REL="Next"  HREF="039447.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Requested listen uri scheme must be http, but was file</H1>
    <B>monoUser</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Requested%20listen%20uri%20scheme%20must%20be%20http%2C%20but%20was%20file&In-Reply-To=%3C1343652642967-4650640.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] Requested listen uri scheme must be http, but was file">cancomert at gmail.com
       </A><BR>
    <I>Mon Jul 30 12:50:42 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039445.html">[Mono-dev] Configure IP addres on linux
</A></li>
        <LI>Next message: <A HREF="039447.html">[Mono-dev] Few questions about Linq implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39446">[ date ]</a>
              <a href="thread.html#39446">[ thread ]</a>
              <a href="subject.html#39446">[ subject ]</a>
              <a href="author.html#39446">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

When I try to open a service host by using following code I get an argument
exception. I am sure that give the schema as http correctly. It works as
expected under windows but under mono it gives the following output..

Thanks in advance,
Regards,
Mehmet Can Comert

CODE

  
//==========================================================================
    private static void
RegisterService&lt;ServiceType&gt;(System.ServiceModel.ServiceHost service_host)
    {
      string service_type_name = typeof(ServiceType).Name;
      string service_address = typeof(ServiceType).Name.Substring(1,
        typeof(ServiceType).Name.Length - 8);

      Debugger.WriteLine(3, &quot;Registering {0} ({1})...&quot;, service_type_name,
service_address);
      service_host.AddServiceEndpoint(typeof(ServiceType), new
BasicHttpBinding(), 
        String.Format(&quot;{0}/&quot;, service_address))
        .Behaviors.Add(new SOAPFaultBehavior());
    }

   
//==========================================================================
    public static void Open()
    {
      Logger.Info(&quot;Opening&quot;);
      System.Diagnostics.Stopwatch stopwatch =
System.Diagnostics.Stopwatch.StartNew();
      
      string host = //ip adress such as 192.168.53.158
      int port = //port no

      string base_address = String.Format(&quot;<A HREF="http://{0">http://{0</A>}:{1}/PATH/&quot;, host,
port);
    
      Console.WriteLine(&quot;ServiceHost {0}&quot;, base_address);
      System.ServiceModel.ServiceHost service_host = new
System.ServiceModel.ServiceHost(typeof(Service), new Uri(base_address));

      // +++ Service publishing
++++++++++++++++++++++++++++++++++++++++++++++++

      RegisterService&lt;IService&gt;(service_host);

      // Metadata publishing...
      if(PublishMetadata)
      {
        Console.WriteLine( &quot;Enabling getting WSDLs...&quot;);
        service_host.Description.Behaviors.Add(new ServiceMetadataBehavior {
HttpGetEnabled = true });

        Console.WriteLine(&quot;Registering IMetadataExchange service (mex)...&quot;);
        service_host.AddServiceEndpoint(typeof(IMetadataExchange),
MetadataExchangeBindings.CreateMexHttpBinding(), base_address + &quot;mex&quot;);
      }

      Console.WriteLine(&quot;Bringing up service class...&quot;);
      Service.Initialize();

      Console.WriteLine( &quot;Opening service host...&quot;);
      service_host.Open();
      
      m_ServiceHost = service_host;

      Logger.Info(&quot;OpenedSuccessfully&quot;, stopwatch.Elapsed.ToString());
    }

--------------

OUTPUT

2012-07-30 14:37:58.495: Opening
ServiceHost <A HREF="http://192.168.53.158:9996/PATH/">http://192.168.53.158:9996/PATH/</A>
RegisterService: None: 3: Registering IService ()...
Enabling getting WSDLs...
Registering IMetadataExchange service (mex)...
Bringing up service class...
Initialize: None: 5: Opening database driver...
Opening service host...
ServiceHost.UnhandledError{System.ArgumentException,Requested listen uri
scheme must be http, but was file.}
Program: Main: Error: 0: EXCEPTION: ArgumentException
Program: Main: Error: 0: Requested listen uri scheme must be http, but was
file.
Program: Main: Error: 0:   at
System.ServiceModel.Channels.Http.HttpChannelListener`1[System.ServiceModel.Channels.IReplyChannel]..ctor
(System.ServiceModel.Channels.HttpTransportBindingElement source,
System.ServiceModel.Channels.BindingContext context) [0x00000] in &lt;filename
unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.Channels.HttpTransportBindingElement.BuildChannelListener[IReplyChannel]
(System.ServiceModel.Channels.BindingContext context) [0x00000] in &lt;filename
unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.Channels.BindingContext.BuildInnerChannelListener[IReplyChannel]
() [0x00000] in &lt;filename unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.Channels.BindingElement.BuildChannelListener[IReplyChannel]
(System.ServiceModel.Channels.BindingContext context) [0x00000] in &lt;filename
unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.Channels.TextMessageEncodingBindingElement.BuildChannelListener[IReplyChannel]
(System.ServiceModel.Channels.BindingContext context) [0x00000] in &lt;filename
unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.Channels.BindingContext.BuildInnerChannelListener[IReplyChannel]
() [0x00000] in &lt;filename unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.Channels.Binding.BuildChannelListener[IReplyChannel]
(System.Uri listenUriBaseAddress, System.String listenUriRelativeAddress,
ListenUriMode listenUriMode,
System.ServiceModel.Channels.BindingParameterCollection parameters)
[0x00000] in &lt;filename unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.DispatcherBuilder.BuildListener
(System.ServiceModel.Description.ServiceEndpoint se,
System.ServiceModel.Channels.BindingParameterCollection pl) [0x00000] in
&lt;filename unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.DispatcherBuilder.BuildChannelDispatcher (System.Type
serviceType, System.ServiceModel.Description.ServiceEndpoint se,
System.ServiceModel.Channels.BindingParameterCollection commonParams)
[0x00000] in &lt;filename unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.ServiceHostBase.InitializeRuntime () [0x00000] in
&lt;filename unknown&gt;:0
Program: Main: Error: 0:   at System.ServiceModel.ServiceHostBase.OnOpen
(TimeSpan timeout) [0x00000] in &lt;filename unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.Channels.CommunicationObject.Open (TimeSpan timeout)
[0x00000] in &lt;filename unknown&gt;:0
Program: Main: Error: 0:   at
System.ServiceModel.Channels.CommunicationObject.Open () [0x00000] in
&lt;filename unknown&gt;:0
Program: Main: Error: 0:   ServiceHost.Open () [0x00000] in &lt;filename
unknown&gt;:0
Program: Main: Error: 0:   Program.Main (System.String[] args) [0x00000] in
&lt;filename unknown&gt;:0


--------



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Requested-listen-uri-scheme-must-be-http-but-was-file-tp4650640.html">http://mono.1490590.n4.nabble.com/Requested-listen-uri-scheme-must-be-http-but-was-file-tp4650640.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039445.html">[Mono-dev] Configure IP addres on linux
</A></li>
	<LI>Next message: <A HREF="039447.html">[Mono-dev] Few questions about Linq implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39446">[ date ]</a>
              <a href="thread.html#39446">[ thread ]</a>
              <a href="subject.html#39446">[ subject ]</a>
              <a href="author.html#39446">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
