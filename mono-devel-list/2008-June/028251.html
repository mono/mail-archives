<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Patch for some obscure cases in Dictionary (small)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%20for%20some%20obscure%20cases%20in%20Dictionary%20%28small%29&In-Reply-To=1213360308.29508.9.camel%40leonardo.hotfeet.ch">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028230.html">
   <LINK REL="Next"  HREF="028298.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Patch for some obscure cases in Dictionary (small)</H1>
    <B>Lionel Cuir</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%20for%20some%20obscure%20cases%20in%20Dictionary%20%28small%29&In-Reply-To=1213360308.29508.9.camel%40leonardo.hotfeet.ch"
       TITLE="[Mono-dev] Patch for some obscure cases in Dictionary (small)">lionel_email at aulofee.com
       </A><BR>
    <I>Tue Jun 17 12:49:57 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028230.html">[Mono-dev] Patch for some obscure cases in Dictionary (small)
</A></li>
        <LI>Next message: <A HREF="028298.html">[Mono-dev] Patch for some obscure cases in Dictionary (small)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28251">[ date ]</a>
              <a href="thread.html#28251">[ thread ]</a>
              <a href="subject.html#28251">[ subject ]</a>
              <a href="author.html#28251">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello gentlemen,

Since you're working on the Dictionary class, maybe you could help me 
debugging this.
I have seen recent posts and patch to make the Dictionary more binary 
compatible between Mono and .Net (ie serialized data being compatible 
for serialization on one platform and deserialization on the other).

I've done a couple of tests and what surprises me is that the binary 
form looks different in many cases but can still be deserialized by the 
other platform... in most cases only (see the example below).

=&gt; What's the status for the Dictionary class. Are Mono and .Net 
officially binary compatible for the Dictionary or not yet?

Examples:
- Case 1: I have a Dictionary&lt;long, DateTime&gt;. Even if different, the 
binary serialized forms can be deserialized by the other platform (!). 
(see dico1_dotnet.bin and dico1_mono.bin).
- Case 2: I have a Dictionary&lt;long, Triplet&lt;long, ManagementState, 
DateTime&gt;&gt; where Triplet is a simple triplet struct (see below) and 
ManagementState a basic enum.
Here, neither Mono not .Net is able to deserialize a dico serialzed by 
the other (see dico2_dotnet.bin and dico2_mono.bin).

Thanks for your advice!
Lionel

Here's the Triplet struct:
[Serializable]
public struct Triplet&lt;TX, TY, TZ&gt;
{
    TX _X;
    TY _Y;
    TZ _Z;

    public Triplet(TX x, TY y, TZ z)
    {
        this._X = x;
        this._Y = y;
        this._Z = z;
    }

    public TX X
    {
        [DebuggerStepThrough]
        get { return _X; }
    }
    public TY Y
    {
        [DebuggerStepThrough]
        get { return _Y; }
    }
    public TZ Z
    {
        [DebuggerStepThrough]
        get { return _Z; }
    }
}

-------------- next part --------------
A non-text attachment was scrubbed...
Name: dico1_mono.bin
Type: application/octet-stream
Size: 1431 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080617/0cdde68f/attachment-0004.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080617/0cdde68f/attachment-0004.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dico2_dotnet.bin
Type: application/octet-stream
Size: 3718 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080617/0cdde68f/attachment-0005.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080617/0cdde68f/attachment-0005.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dico2_mono.bin
Type: application/octet-stream
Size: 3663 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080617/0cdde68f/attachment-0006.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080617/0cdde68f/attachment-0006.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dico1_dotnet.bin
Type: application/octet-stream
Size: 1431 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080617/0cdde68f/attachment-0007.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080617/0cdde68f/attachment-0007.bin</A> 
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028230.html">[Mono-dev] Patch for some obscure cases in Dictionary (small)
</A></li>
	<LI>Next message: <A HREF="028298.html">[Mono-dev] Patch for some obscure cases in Dictionary (small)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28251">[ date ]</a>
              <a href="thread.html#28251">[ thread ]</a>
              <a href="subject.html#28251">[ subject ]</a>
              <a href="author.html#28251">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
