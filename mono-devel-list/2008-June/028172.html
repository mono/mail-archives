<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev]  Gdal Mono/Linux c# bindings
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Gdal%20Mono/Linux%20c%23%20bindings&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028169.html">
   <LINK REL="Next"  HREF="028170.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev]  Gdal Mono/Linux c# bindings</H1>
    <B>fevans</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Gdal%20Mono/Linux%20c%23%20bindings&In-Reply-To="
       TITLE="[Mono-dev]  Gdal Mono/Linux c# bindings">fevans at harris.com
       </A><BR>
    <I>Sat Jun  7 10:27:05 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028169.html">[Mono-dev] Is libgdiplus on Mac OS X possible without the	X11	dependency?
</A></li>
        <LI>Next message: <A HREF="028170.html">[Mono-dev] Need advice for bug 325067 (DateTime binary serialization incompatible with MS.NET 2.0)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28172">[ date ]</a>
              <a href="thread.html#28172">[ thread ]</a>
              <a href="subject.html#28172">[ subject ]</a>
              <a href="author.html#28172">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I posted this in the gdal-dev forums, so I guess I'm cross-posting, but I
thought it might be helpful to someone here. I really wanted to get this to
work, but unfortunately I've run out of time. Will try again some future
weekend.

This message captures my unsuccessful attempts to get c# bindings to work
under mono/Linux.
Hopefully it will help someone else.

IMPORTANT: If your like me, you're quickly scanning the web looking for a
solution. This is not a solution. It is a snapshot of what was tried, and
what didn't work.

These attempts were made with the following sources

<A HREF="http://download.osgeo.org/gdal/gdal-1.5.1.tar.gz">http://download.osgeo.org/gdal/gdal-1.5.1.tar.gz</A>
<A HREF="http://download.osgeo.org/gdal/gdal-1.5.2.tar.gz">http://download.osgeo.org/gdal/gdal-1.5.2.tar.gz</A>

Environment:
Mono Rev:	1.9.1
Linux:      	2.6.9-67.0.15.ELsmp x86_64 x86_64 x86_64 GNU/Linux
Swig:     	1.3.35



Reference Discussion Threads:
In investigating the possibility that this was a 32-bit v.s. 64-bit issue, I
found the following threads.
(Linux 64)
<A HREF="http://lists.osgeo.org/pipermail/gdal-dev/2005-October/006838.html">http://lists.osgeo.org/pipermail/gdal-dev/2005-October/006838.html</A>
(Linux 64)
<A HREF="http://lists.osgeo.org/pipermail/mapserver-users/2006-November/020562.html">http://lists.osgeo.org/pipermail/mapserver-users/2006-November/020562.html</A>
(Windows 64)	<A HREF="http://article.gmane.org/gmane.comp.gis.gdal.devel/14807">http://article.gmane.org/gmane.comp.gis.gdal.devel/14807</A>

Attachment Descriptions:
gdal1.5.2.configuration.log	Contains the output of the ./configure command.
gdal1.5.2.build.log           	Contains the output of the build.
gdal1.5.2.build.warnings.log	Summary of warnings produced by build.
mono.shlib.cop.gdal_wrap.log     Run 'mono-shlib-cop gdal_csharp.dll'



Build Procedures:
./configure --without-libtool --prefix=/ssa/users/fevans/apps/gdal-1.5.2
make &gt;&amp; gdal1.5.2.build.log &amp;
cd swig
make
cd csharp
make
cd $GDAL_SRC_ROOT
make install
export PATH=&quot;/ssa/users/fevans/apps/gdal-1.5.2/bin:$PATH&quot;
export
LD_LIBRARY_PATH=&quot;/ssa/users/fevans/apps/gdal-1.5.2/lib:$LD_LIBRARY_PATH&quot;






Required Modifications
There is an error in &quot;swig/csharp/GNUmakefile&quot;
Change line 50 from :	echo &quot;&lt;dllmap dll=\&quot;&quot;$*&quot;_wrap\&quot; target=\&quot;&quot;$@&quot;\&quot; &gt;&quot; &gt;&gt;
$*_csharp.dll.config
                          To:	echo &quot;&lt;dllmap dll=\&quot;&quot;$*&quot;_wrap\&quot;
target=\&quot;&quot;$@&quot;\&quot; /&gt;&quot; &gt;&gt; $*_csharp.dll.config


Other things Tried
1. Copy bindings to gdal install location. The makefile doesn't do this.
After swig/csharp make test failed, I tried numerous things without success.
 - Copy all exes and libs from swig/csharp to $GDAL_HOME/bin or
$GDAL_HOME/lib
 - In addition copy *.dll, *.dll.config to $GDAL_HOME/bin 

export GDAL_DATA=/ssa/users/fevans/apps/gdal-1.5.2/share/gdal
export
LD_LIBRARY_PATH=&quot;/ssa/users/fevans/apps/gdal-1.5.2/lib:$LD_LIBRARY_PATH&quot;
export PATH=&quot;/ssa/users/fevans/apps/gdal-1.5.2/bin:$PATH&quot;

cd $GDAL_HOME/bin
mono ./GDALInfo.exe /tmp/anImage.tif
Application error: An exception was thrown by the type initializer for
OSGeo.GDAL.Gdal
mono --verbose   ./GDALInfo.exe /tmp/anImage.tif &gt; GDALInfo.exe.stacktrace



2. Modify Gdalmake.opt.in to use lib64.
   This didn't help.

Rename the libraries-Tried modifying the dll.config &quot;dllmap&quot; entries. For
example, change &quot;libgdalcsharp.so&quot; to &quot;libgdal_wrap.so&quot;
-Tried the renaming the libgdalcsharp.so libraries.
-Tried renaming the libraries as described in the previous steps, but did it
in the GNUMakefile, and rebuilt.

Setting MONO_PATH
Didn't help.


Modify the csharp.opt file
This didn't help me. But I'm wondering if the MONO=YES variable needs to be
set in Linux.
I tried it both ways, without success.

#Uncomment the following line if you want to compile with MONO on windows
#MONO = YES

#Comment the following line out if you want to link against the gdal dll
#CSHARP_STATIC_LINKAGE = YES


<A HREF="http://www.nabble.com/file/p17709428/gdal1.5.2.build.log">http://www.nabble.com/file/p17709428/gdal1.5.2.build.log</A> gdal1.5.2.build.log 
<A HREF="http://www.nabble.com/file/p17709428/gdal1.5.2.build.warnings.log">http://www.nabble.com/file/p17709428/gdal1.5.2.build.warnings.log</A>
gdal1.5.2.build.warnings.log 
<A HREF="http://www.nabble.com/file/p17709428/gdal1.5.2.configuration.log">http://www.nabble.com/file/p17709428/gdal1.5.2.configuration.log</A>
gdal1.5.2.configuration.log 
<A HREF="http://www.nabble.com/file/p17709428/gdal1.5.2.make.install.log">http://www.nabble.com/file/p17709428/gdal1.5.2.make.install.log</A>
gdal1.5.2.make.install.log 
<A HREF="http://www.nabble.com/file/p17709428/gdal1.5.2.swig.build.log">http://www.nabble.com/file/p17709428/gdal1.5.2.swig.build.log</A>
gdal1.5.2.swig.build.log 
<A HREF="http://www.nabble.com/file/p17709428/gdal1.5.2.swig.build.warnings.log">http://www.nabble.com/file/p17709428/gdal1.5.2.swig.build.warnings.log</A>
gdal1.5.2.swig.build.warnings.log 
<A HREF="http://www.nabble.com/file/p17709428/gdal1.5.2.swig.csharp.build.log">http://www.nabble.com/file/p17709428/gdal1.5.2.swig.csharp.build.log</A>
gdal1.5.2.swig.csharp.build.log 
<A HREF="http://www.nabble.com/file/p17709428/gdal1.5.2.swig.csharp.make.test.log">http://www.nabble.com/file/p17709428/gdal1.5.2.swig.csharp.make.test.log</A>
gdal1.5.2.swig.csharp.make.test.log 
<A HREF="http://www.nabble.com/file/p17709428/GDALInfo.exe.stacktrace">http://www.nabble.com/file/p17709428/GDALInfo.exe.stacktrace</A>
GDALInfo.exe.stacktrace 
<A HREF="http://www.nabble.com/file/p17709428/mono.shlib.cop.gdal_wrap.log">http://www.nabble.com/file/p17709428/mono.shlib.cop.gdal_wrap.log</A>
mono.shlib.cop.gdal_wrap.log 

-- 
View this message in context: <A HREF="http://www.nabble.com/Gdal-Mono-Linux-c--bindings-tp17709428p17709428.html">http://www.nabble.com/Gdal-Mono-Linux-c--bindings-tp17709428p17709428.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028169.html">[Mono-dev] Is libgdiplus on Mac OS X possible without the	X11	dependency?
</A></li>
	<LI>Next message: <A HREF="028170.html">[Mono-dev] Need advice for bug 325067 (DateTime binary serialization incompatible with MS.NET 2.0)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28172">[ date ]</a>
              <a href="thread.html#28172">[ thread ]</a>
              <a href="subject.html#28172">[ subject ]</a>
              <a href="author.html#28172">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
