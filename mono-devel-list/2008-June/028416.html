<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev]  Mono.Data.Sqlite
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Mono.Data.Sqlite&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028370.html">
   <LINK REL="Next"  HREF="028379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev]  Mono.Data.Sqlite</H1>
    <B>Anders Aagaard</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Mono.Data.Sqlite&In-Reply-To="
       TITLE="[Mono-dev]  Mono.Data.Sqlite">aagaande at gmail.com
       </A><BR>
    <I>Sun Jun 29 06:16:36 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028370.html">[Mono-dev] [Mono-patches] r106777 - in trunk/mcs/class/System:	System.ComponentModel Test/System.ComponentModel
</A></li>
        <LI>Next message: <A HREF="028379.html">[Mono-dev] [PATCH] Mixed-mode: Ensure that the image is managed before calling LoadLibrary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28416">[ date ]</a>
              <a href="thread.html#28416">[ thread ]</a>
              <a href="subject.html#28416">[ subject ]</a>
              <a href="author.html#28416">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi

I've been using Mono.Data.Sqlite in a multi threaded application, since the
code says it's based on Robert Simpson's library I've been looking at his
page for documentation (as Mono.Data.Sqlite documentation seems extremely
sparse).

My problem is that when using multiple threads, all writing to the database,
I get :
Unhandled Exception: Mono.Data.Sqlite.SqliteException: The database file is
locked
Every thread has it's own cloned SqliteConnection (during the creation of
the thread I call MasterConnection.Clone (), and only use the referenced
connection).  The exception happens instantly when two threads begin a
transaction to the same database.

Is the instructions for Robert Simpson's library not accurate for mono's
sqlite library, or am I hitting a bug?  Any suggestions on how to cleanly
work around this problem?

I have one file scanner that adds files to the database, one text file
scanner that scans all text files added and adds web links from them, and
one web updater that takes the links and updates that from an online
database.  They are all seperate threads.  The main thread will also
occasionally do a small commit, but it will mostly read from the database.
-- 
View this message in context: <A HREF="http://www.nabble.com/Mono.Data.Sqlite-tp18179121p18179121.html">http://www.nabble.com/Mono.Data.Sqlite-tp18179121p18179121.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028370.html">[Mono-dev] [Mono-patches] r106777 - in trunk/mcs/class/System:	System.ComponentModel Test/System.ComponentModel
</A></li>
	<LI>Next message: <A HREF="028379.html">[Mono-dev] [PATCH] Mixed-mode: Ensure that the image is managed before calling LoadLibrary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28416">[ date ]</a>
              <a href="thread.html#28416">[ thread ]</a>
              <a href="subject.html#28416">[ subject ]</a>
              <a href="author.html#28416">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
