<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] GC stop world stopping audio threads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20GC%20stop%20world%20stopping%20audio%20threads&In-Reply-To=B555F56F-7871-4F5E-A4BB-ABF9835E6DD8%40unity3d.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028132.html">
   <LINK REL="Next"  HREF="028137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] GC stop world stopping audio threads</H1>
    <B>Zoltan Varga</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20GC%20stop%20world%20stopping%20audio%20threads&In-Reply-To=B555F56F-7871-4F5E-A4BB-ABF9835E6DD8%40unity3d.com"
       TITLE="[Mono-dev] GC stop world stopping audio threads">vargaz at gmail.com
       </A><BR>
    <I>Wed Jun  4 09:04:47 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028132.html">[Mono-dev] GC stop world stopping audio threads
</A></li>
        <LI>Next message: <A HREF="028137.html">[Mono-dev] GC stop world stopping audio threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28135">[ date ]</a>
              <a href="thread.html#28135">[ thread ]</a>
              <a href="subject.html#28135">[ subject ]</a>
              <a href="author.html#28135">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

AFAIK, the GC only stops threads which are registered with it. This
can happen in
the following ways:
- threads started by the runtime are registered automatically
- threads registered using mono_thread_attach ().
- on unix, if an application includes gc.h, the header file will
redefine pthread_create
 () etc. with gc specific versions which register threads
- on windows, the gc registers all threads automatically.

Under what OS you experience this ? BTW, the problem with not
registering threads
with the GC is that threads suspended by the GC could hold locks etc.,
so if another
thread tries to use these locks (like the malloc lock), it will be
suspended anyway.
Also, if one of these unsuspended threads tries to register itself or enter the
runtime while the word is suspended, various complex situations could occur.

                                                              Zoltan

On Wed, Jun 4, 2008 at 2:41 PM, Joachim Ante &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">joe at unity3d.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> When the GC is under stress because a lot of managed allocations
</I>&gt;<i> happen we get sound stuttering.
</I>&gt;<i> It seems very likely that the GC is doing that when it calls Stop
</I>&gt;<i> World on all other threads.
</I>&gt;<i> Is there any way to make the Garbage collector only stop threads
</I>&gt;<i> which are registered using mono_thread_attach?
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i> Joachim Ante
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I></PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028132.html">[Mono-dev] GC stop world stopping audio threads
</A></li>
	<LI>Next message: <A HREF="028137.html">[Mono-dev] GC stop world stopping audio threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28135">[ date ]</a>
              <a href="thread.html#28135">[ thread ]</a>
              <a href="subject.html#28135">[ subject ]</a>
              <a href="author.html#28135">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
