<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mono 2.0, solaris x86, bootstrap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono%202.0%2C%20solaris%20x86%2C%20bootstrap&In-Reply-To=48E8A1BD.20600%40web.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029349.html">
   <LINK REL="Next"  HREF="029366.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mono 2.0, solaris x86, bootstrap</H1>
    <B>pablosantosluac at terra.es</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono%202.0%2C%20solaris%20x86%2C%20bootstrap&In-Reply-To=48E8A1BD.20600%40web.de"
       TITLE="[Mono-dev] mono 2.0, solaris x86, bootstrap">pablosantosluac at terra.es
       </A><BR>
    <I>Sun Oct  5 16:16:31 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029349.html">[Mono-dev] mono 2.0, solaris x86, bootstrap
</A></li>
        <LI>Next message: <A HREF="029366.html">[Mono-dev] mono 2.0, solaris x86, bootstrap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29359">[ date ]</a>
              <a href="thread.html#29359">[ thread ]</a>
              <a href="subject.html#29359">[ subject ]</a>
              <a href="author.html#29359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Andreas,

I just followed your instructions, step by step. First downloaded and 
installed gc-7.1 (worked perfectly), then configure and make mono. But 
I'm afraid I think I'm reaching the same point.


Here's the ouput. At some point (it seems it happens after compiling 
some c# code) it starts complaining about mscorlib location...


gmake[7]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/build'
gmake[6]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/build'
gmake[6]: Entering directory `/home/pablo/mono/mono-2.0/mcs/jay'
gmake all-local
gmake[7]: Entering directory `/home/pablo/mono/mono-2.0/mcs/jay'
gmake[7]: Nothing to be done for `all-local'.
gmake[7]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/jay'
gmake[6]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/jay'
gmake[6]: Entering directory `/home/pablo/mono/mono-2.0/mcs/mcs'
gmake all-local
gmake[7]: Entering directory `/home/pablo/mono/mono-2.0/mcs/mcs'
mcs /codepage:65001  -optimize -d:NET_1_1 -d:ONLY_1_1 
-d:BOOTSTRAP_WITH_OLDLIB -debug -target:exe -out:mcs.exe cs-parser.cs  
@mcs.exe.sources
GC Warning: Large stack limit(133464064): only scanning 8 MB
cs-parser.cs(6665,7): warning CS0162: Unreachable code detected
cs-parser.cs(6667,5): warning CS0162: Unreachable code detected
expression.cs(991,14): warning CS0618: 
`Mono.CSharp.UserOperatorCall.MakeSimpleCall(Mono.CSharp.EmitContext, 
Mono.CSharp.MethodGroupExpr, Mono.CSharp.Expression, 
Mono.CSharp.Location)' is obsolete: `It may not be compatible with 
expression trees'
Compilation succeeded - 3 warning(s)
cp mcs.exe ../class/lib/basic/mcs.exe
test ! -f mcs.exe.mdb || cp mcs.exe.mdb ../class/lib/basic/mcs.exe.mdb
gmake[7]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/mcs'
gmake[6]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/mcs'
gmake[6]: Entering directory `/home/pablo/mono/mono-2.0/mcs/class'
gmake[7]: Entering directory `/home/pablo/mono/mono-2.0/mcs/class/corlib'
gmake all-local
gmake[8]: Entering directory `/home/pablo/mono/mono-2.0/mcs/class/corlib'
mcs /codepage:65001 -nowarn:169,612,618,649 -d:INSIDE_CORLIB -optimize 
-d:NET_1_1 -d:ONLY_1_1 -d:BOOTSTRAP_WITH_OLDLIB -debug /noconfig -unsafe 
-nostdlib -resource:resources/collation.core.bin 
-resource:resources/collation.tailoring.bin 
-resource:resources/collation.cjkCHS.bin 
-resource:resources/collation.cjkCHT.bin 
-resource:resources/collation.cjkJA.bin 
-resource:resources/collation.cjkKO.bin 
-resource:resources/collation.cjkKOlv2.bin -target:library 
-out:mscorlib.dll  @corlib.dll.sources
GC Warning: Large stack limit(133464064): only scanning 8 MB
System/WindowsConsoleDriver.cs(29,1): warning CS1635: Cannot restore 
warning `CS0169' because it was disabled globally
System.Security.Cryptography/PasswordDeriveBytes.cs(231,1): warning 
CS1691: `809' is not a valid warning number
System.Security.Cryptography/PasswordDeriveBytes.cs(237,1): warning 
CS1691: `809' is not a valid warning number
System/Int16.cs(178,3): warning CS0162: Unreachable code detected
System/Int32.cs(200,3): warning CS0162: Unreachable code detected
System/Int64.cs(181,3): warning CS0162: Unreachable code detected
System/String.cs(946,6): warning CS0162: Unreachable code detected
System/String.cs(1049,6): warning CS0162: Unreachable code detected
Mono.Globalization.Unicode/Normalization.cs(76,36): warning CS0162: 
Unreachable code detected
Compilation succeeded - 9 warning(s)
:<i>  mscorlib.dll ../../class/mono.snk
</I>mv mscorlib.dll ../../class/lib/basic/mscorlib.dll
test ! -f mscorlib.dll.mdb || mv mscorlib.dll.mdb 
../../class/lib/basic/mscorlib.dll.mdb
test ! -f mscorlib.pdb || mv mscorlib.pdb ../../class/lib/basic/mscorlib.pdb
gmake[8]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/class/corlib'
gmake[7]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/class/corlib'
gmake[7]: Entering directory `/home/pablo/mono/mono-2.0/mcs/class/System'
gmake all-local
gmake[8]: Entering directory `/home/pablo/mono/mono-2.0/mcs/class/System'
** Warning: System.dll built without parts that depend on: System.Xml.dll
MONO_PATH=&quot;../../class/lib/basic:$MONO_PATH&quot; 
/home/pablo/mono/mono-2.0/runtime/mono-wrapper  
../../class/lib/basic/mcs.exe /codepage:65001  -optimize -d:NET_1_1 
-d:ONLY_1_1 -d:BOOTSTRAP_WITH_OLDLIB -debug /noconfig  -target:library 
-out:System.dll  @System.dll.sources
The assembly mscorlib.dll was not found or could not be loaded.
It should have been installed in the 
`/opt/mono/lib/mono/1.0/mscorlib.dll' directory.
gmake[8]: *** [../../class/lib/basic/System.dll] Error 1
gmake[8]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/class/System'
gmake[7]: *** [do-all] Error 2
gmake[7]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/class/System'
gmake[6]: *** [all-recursive] Error 1
gmake[6]: Leaving directory `/home/pablo/mono/mono-2.0/mcs/class'
gmake[5]: *** [all-recursive] Error 1
gmake[5]: Leaving directory `/home/pablo/mono/mono-2.0/mcs'
gmake[4]: *** [profile-do--basic--all] Error 2
gmake[4]: Leaving directory `/home/pablo/mono/mono-2.0/mcs'
gmake[3]: *** [profiles-do--all] Error 2
gmake[3]: Leaving directory `/home/pablo/mono/mono-2.0/mcs'
gmake[2]: *** [all-local] Error 2
gmake[2]: Leaving directory `/home/pablo/mono/mono-2.0/runtime'
gmake[1]: *** [all-recursive] Error 1
gmake[1]: Leaving directory `/home/pablo/mono/mono-2.0'
gmake: *** [all] Error 2


-bash-3.00$ uname -a
SunOS unknown 5.10 Generic_127128-11 i86pc i386 i86pc


Thanks again for your help

pablo




Andreas F&#228;rber escribi&#243;:
&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">pablosantosluac at terra.es</A> schrieb:
</I>&gt;&gt;<i> Well, it seems building the &quot;core&quot; is not hard if you make sure (on 
</I>&gt;&gt;<i> Solaris 10) that you use GNU packages and not the SUN ones (gmake, 
</I>&gt;&gt;<i> libtool, and everything else). I can build &quot;mono&quot; from trunk or 2-0. 
</I>&gt;&gt;<i> but the problems start with mcs... I'm now following the instructions 
</I>&gt;&gt;<i> sent by Geoff (basically using 
</I>&gt;&gt;<i> <A HREF="http://mono.ximian.com/monobuild/preview/sources/mono/mono-2.0.tar.bz2">http://mono.ximian.com/monobuild/preview/sources/mono/mono-2.0.tar.bz2</A>).
</I>&gt;<i>
</I>&gt;<i> Having the runtime compile does not imply it'll work at runtime... 
</I>&gt;<i> Whether you use a tarball or monolite usually doesn't matter, but if 
</I>&gt;<i> you can, a tarball is &quot;safer&quot;.
</I>&gt;<i>
</I>&gt;<i> Fwiw, I've just finished compiling <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono at r114845+mcs</A>@r114882 from
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono at r109531+mcs</A>@r109587 (all trunk) on OpenSolaris build 95 for i86
</I>&gt;<i> using exactly this:
</I>&gt;<i>
</I>&gt;<i> ../mono/configure --prefix=/opt/mono --with-gc=boehm \
</I>&gt;<i> --with-sigaltstack=no \
</I>&gt;<i> CPPFLAGS=&quot;-I/opt/mono-gc/include&quot; \
</I>&gt;<i> LDFLAGS=&quot;-L/opt/mono-gc/lib -R/opt/mono/lib&quot;
</I>&gt;<i>
</I>&gt;<i> where /opt/mono-gc is the prefix of Boehm GC 7.1, compiled with:
</I>&gt;<i>
</I>&gt;<i> ../gc-7.1/configure --prefix=/opt/mono-gc
</I>&gt;<i>
</I>&gt;<i> Works nicely there. Don't have access to S10 from here though to fetch
</I>&gt;<i> my scripts or to try the latest revs there.
</I>&gt;<i>
</I>&gt;<i> On OpenSolaris/amd64, I use these on top:
</I>&gt;<i>
</I>&gt;<i> PREFIX=/opt/mono-gc
</I>&gt;<i>
</I>&gt;<i> ../gc-7.1/configure --prefix=$PREFIX --libdir=$PREFIX/lib/amd64 \
</I>&gt;<i> CPPFLAGS=-m64 CFLAGS=-m64 CXXFLAGS=-m64 LDFLAGS=-m64
</I>&gt;<i>
</I>&gt;<i> and:
</I>&gt;<i>
</I>&gt;<i> PREFIX=/opt/mono
</I>&gt;<i>
</I>&gt;<i> ../mono/configure --prefix=$PREFIX --bindir=$PREFIX/bin/amd64
</I>&gt;<i> --libdir=$PREFIX/lib/amd64 \
</I>&gt;<i> --with-gc=boehm --with-sigaltstack=no --enable-big-arrays
</I>&gt;<i> --enable-dtrace --disable-mcs-build \
</I>&gt;<i> CPPFLAGS=&quot;-m64 -I/opt/mono-gc/include&quot; CFLAGS=&quot;-m64&quot; \
</I>&gt;<i> LDFLAGS=&quot;-m64 -L/opt/mono-gc/lib/amd64 -R/opt/mono/lib/amd64&quot; \
</I>&gt;<i> PKG_CONFIG_PATH=&quot;/usr/lib/amd64/pkgconfig:$PKG_CONFIG_PATH&quot;
</I>&gt;<i>
</I>&gt;<i> (Obviously I'm skipping mcs build in this script, but I've done full
</I>&gt;<i> amd64 bootstraps before with post-2.0 revisions.)
</I>&gt;<i>
</I>&gt;<i> Note that I use dedicated /opt subdirs because that's where 3rdparty
</I>&gt;<i> packages are often installed on Solarises, making it easy to rename or
</I>&gt;<i> remove. $prefix/{bin,lib}/amd64 is where Sun places their amd64 files.
</I>&gt;<i>
</I>&gt;<i> Using a monolite from 12:05 GMT+02:00 today (with Sun's `mcs` renamed),
</I>&gt;<i> there are no problems on OSol/i86 either.
</I>&gt;<i> So it's definitely not mcs's or monolite's fault!!!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> Cetin actually mentioned OpenSolaris as opposed to Solaris 10. When 
</I>&gt;&gt;&gt;<i> OpenSolaris 2008.05 was released I posted the following mini-guide:
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/pipermail/mono-list/2008-May/038584.html">http://lists.ximian.com/pipermail/mono-list/2008-May/038584.html</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It was actually supposed to avoid questions later on. ;)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Following this guide the only thing I realize I missed is the LDFLAGS 
</I>&gt;&gt;<i> stuff? Is it the reason why mcs.exe can't be run?
</I>&gt;<i>
</I>&gt;<i> In case you mean LDFLAGS=-R/path then no, it has no influence on mcs. It
</I>&gt;<i> helps with MD (libPosixHelper.so et al.).
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> The often-referenced <A HREF="http://www.mono-project.com/Mono:Solaris">http://www.mono-project.com/Mono:Solaris</A> page 
</I>&gt;&gt;&gt;<i> contains a link to another post of mine, for Solaris 10:
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.ximian.com/pipermail/mono-list/2007-January/034101.html">http://lists.ximian.com/pipermail/mono-list/2007-January/034101.html</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Yes, this guide was helpful building 1.1.13 (almost two years ago 
</I>&gt;&gt;<i> already), but now all those tricks are not needed anymore... You can 
</I>&gt;&gt;<i> get the whole c code build easily...
</I>&gt;<i>
</I>&gt;<i> If you build using Blastwave tools you don't need some of the 
</I>&gt;<i> environment variables; otherwise you still do on Solaris 10.
</I>&gt;<i>
</I>&gt;<i> The only thing outdated in that post to my knowledge is
</I>&gt;<i> CFLAGS=-D_POSIX_PTHREAD_SEMANTICS and possibly the mono-service issue.
</I>&gt;<i> Jonel's blog on the -mt pkg-config issue is almost three years old and
</I>&gt;<i> mostly still applies due to the long lifetime of S10. :)
</I>&gt;<i> AS=gas for instance was only needed for running `make check` so you
</I>&gt;<i> won't notice during plain `make`.
</I>&gt;<i>
</I>&gt;<i> Andreas
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029349.html">[Mono-dev] mono 2.0, solaris x86, bootstrap
</A></li>
	<LI>Next message: <A HREF="029366.html">[Mono-dev] mono 2.0, solaris x86, bootstrap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29359">[ date ]</a>
              <a href="thread.html#29359">[ thread ]</a>
              <a href="subject.html#29359">[ subject ]</a>
              <a href="author.html#29359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
