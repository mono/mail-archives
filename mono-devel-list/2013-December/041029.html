<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Size of thread in Mono (65MB per thread?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Size%20of%20thread%20in%20Mono%20%2865MB%20per%20thread%3F%29&In-Reply-To=%3C52B7DBD3.8090801%40mansionfamily.plus.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041028.html">
   <LINK REL="Next"  HREF="041030.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Size of thread in Mono (65MB per thread?)</H1>
    <B>james</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Size%20of%20thread%20in%20Mono%20%2865MB%20per%20thread%3F%29&In-Reply-To=%3C52B7DBD3.8090801%40mansionfamily.plus.com%3E"
       TITLE="[Mono-dev] Size of thread in Mono (65MB per thread?)">james at mansionfamily.plus.com
       </A><BR>
    <I>Mon Dec 23 06:44:35 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="041028.html">[Mono-dev] Size of thread in Mono (65MB per thread?)
</A></li>
        <LI>Next message: <A HREF="041030.html">[Mono-dev] System.ExecutionEngineException: Failed to create shadow	copy (CopyFile).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41029">[ date ]</a>
              <a href="thread.html#41029">[ thread ]</a>
              <a href="subject.html#41029">[ subject ]</a>
              <a href="author.html#41029">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/12/2013 14:48, Nikita Tsukanov wrote:
&gt;<i> The problem is that there is no anything simular to MEM_RESERVE and 
</I>&gt;<i> MEM_COMMIT from Windows (flags for VirtualAlloc/VirtualAllocEx), so 
</I>&gt;<i> there is no way to properly reserve a large block of virtual address 
</I>&gt;<i> space. BTW, windows threads reserve a lot of address space using 
</I>&gt;<i> MEM_RESERVE and then use SEH/VEH to detect, when memory should be 
</I>&gt;<i> commited, so it uses the same &quot;overcommit&quot; mechanics. You can create a 
</I>&gt;<i> lot of threads with large stacks, try to use it and get out of memory 
</I>&gt;<i> exception when, actually, trying to push something on your stack.
</I>&gt;<i>
</I>That's nowhere near the same fail.  If I get a good return from malloc 
and then I die when I try to access it, that's bad.

Its nothing like failing because I tried to grow a thread stack and fail 
with OOM - at no point has the OS said 'here's the memory' and then 
renaged on it.  Rather it has said 'here's the address space', which is 
different.  For a start, the program that is trying to get real memory 
is the one that will fail.  On a UNIX system with an OOM handler, its by 
no means the case that the process which is wasting allocated memory is 
the one that will die - it can be anything that made a large alloc 
that's not backed by real VM yet and which tries to access memory it was 
explicitly given by the OS.

In reality with modern systems they get so slow as soon as the working 
set materially exceeds physical that its not often you'll hit random OOM 
death before rebooting the box anyway. :-(

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041028.html">[Mono-dev] Size of thread in Mono (65MB per thread?)
</A></li>
	<LI>Next message: <A HREF="041030.html">[Mono-dev] System.ExecutionEngineException: Failed to create shadow	copy (CopyFile).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41029">[ date ]</a>
              <a href="thread.html#41029">[ thread ]</a>
              <a href="subject.html#41029">[ subject ]</a>
              <a href="author.html#41029">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
