<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] Use correct console code page on Windows	(affects Linux as well)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Use%20correct%20console%20code%20page%20on%20Windows%0A%09%28affects%20Linux%20as%20well%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019585.html">
   <LINK REL="Next"  HREF="019591.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] Use correct console code page on Windows	(affects Linux as well)</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20Use%20correct%20console%20code%20page%20on%20Windows%0A%09%28affects%20Linux%20as%20well%29&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] Use correct console code page on Windows	(affects Linux as well)">kornelpal at gmail.com
       </A><BR>
    <I>Thu Jul 27 11:53:37 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019585.html">[Mono-dev] ObjectDataSourceView/Type problem
</A></li>
        <LI>Next message: <A HREF="019591.html">[Mono-dev] [PATCH] Use correct console code page on Windows (affects Linux as well)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19590">[ date ]</a>
              <a href="thread.html#19590">[ thread ]</a>
              <a href="subject.html#19590">[ subject ]</a>
              <a href="author.html#19590">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I recently posted this patch:
<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2006-July/019433.html">http://lists.ximian.com/pipermail/mono-devel-list/2006-July/019433.html</A>

But I received no comments and didn't think that this can cause problems on 
other OSes so I commited it:
<A HREF="http://lists.ximian.com/pipermail/mono-patches/2006-July/077941.html">http://lists.ximian.com/pipermail/mono-patches/2006-July/077941.html</A>

This was later reverted by Miguel because he pointed out that this causes 
problems on non-Windows operating systems:

&gt;<i>    There is already a process to fetch the proper encoding in the file,
</I>&gt;<i>and you added a new setup.   And to make things worse, considering the
</I>&gt;<i>inliner can decide to inline, this means that on Linux, we get an extra
</I>&gt;<i>hit for looking up kernel32.dll every time.
</I>&gt;<i>
</I>&gt;<i>    If this is required, discuss this on the list.
</I>&gt;<i>
</I>&gt;<i>open(&quot;/mono/lib/mono/1.0/advapi32.dll&quot;, O_RDONLY|O_LARGEFILE) = -1
</I>&gt;<i>ENOENT (No such file or directory)
</I>&gt;<i>open(&quot;/mono/lib/mono/1.0/kernel32.dll&quot;, O_RDONLY|O_LARGEFILE) = -1
</I>&gt;<i>ENOENT (No such file or directory)
</I>&gt;<i>open(&quot;/mono/lib/mono/1.0/ole32.dll&quot;, O_RDONLY|O_LARGEFILE) = -1 ENOENT
</I>&gt;<i>(No such file or directory)
</I>
As for advapi32.dll and ole32.dll I don't think that these hints are caused 
by my modifications.

Windows uses different code pages (DOS code pages) for console than for GUI 
applications (that is Encoding.Default) so this patch (or something 
functionally equivalent) is required.

This initialization is done only once (in static constructor) so I don't 
think that it's worth to use ConsoleDriver in NET_1_1 as well.

Please help to solve this problem occurring on Linux.

Korn&#233;l 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019585.html">[Mono-dev] ObjectDataSourceView/Type problem
</A></li>
	<LI>Next message: <A HREF="019591.html">[Mono-dev] [PATCH] Use correct console code page on Windows (affects Linux as well)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19590">[ date ]</a>
              <a href="thread.html#19590">[ thread ]</a>
              <a href="subject.html#19590">[ subject ]</a>
              <a href="author.html#19590">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
