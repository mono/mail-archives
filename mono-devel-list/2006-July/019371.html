<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Incremental C# compiler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Incremental%20C%23%20compiler&In-Reply-To=dd99b8c80607120647p71e14534jc33319dc0b49d1f5%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019370.html">
   <LINK REL="Next"  HREF="019374.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Incremental C# compiler</H1>
    <B>David Srbecky</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Incremental%20C%23%20compiler&In-Reply-To=dd99b8c80607120647p71e14534jc33319dc0b49d1f5%40mail.gmail.com"
       TITLE="[Mono-dev] Incremental C# compiler">dsrbecky at gmail.com
       </A><BR>
    <I>Wed Jul 12 10:14:31 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019370.html">[Mono-dev] Incremental C# compiler
</A></li>
        <LI>Next message: <A HREF="019374.html">[Mono-dev] Incremental C# compiler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19371">[ date ]</a>
              <a href="thread.html#19371">[ thread ]</a>
              <a href="subject.html#19371">[ subject ]</a>
              <a href="author.html#19371">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you,

So semantic analysis is the part that takes vast majority of the time 
and the problem is that gmcs can not easily invalidate previously added 
metadata. Right?
What if we add the constraint that only the bodies of methods can 
change? The metadata of the new code would be determined on the first 
run and then it would never change and thus it would not need to be 
invalidated. Also the preciously done semantic analysis for any 
unchanged functions would still be valid.

David

Rafael Teixeira wrote:
&gt;<i> Lexing and parsing normally are very fast and depend only on the size
</I>&gt;<i> of the code being parsed. Semantic analysis is normally the most time
</I>&gt;<i> consuming step as loading referenced assemblies and sifting around the
</I>&gt;<i> huge metadata to resolve symbols and types is really the meat of the
</I>&gt;<i> compiler, also, new &quot;compiled&quot; code is &quot;appended&quot; to this metadata/AST
</I>&gt;<i> what increases the complexity of resolving symbols over time. Emission
</I>&gt;<i> of code is done in memory first so it is fast. Saving to disk is slow
</I>&gt;<i> but depends on emitted code size.
</I>&gt;<i> 
</I>&gt;<i> For incremental compiling, caching the metadata, would make everything
</I>&gt;<i> very fast, as normally very little would be changed from one
</I>&gt;<i> compilation to the other. But gmcs would have to invalidate only part
</I>&gt;<i> of the metadata/AST, what it wasn't built for.
</I>&gt;<i> 
</I>&gt;<i> Hope it helps,
</I>&gt;<i> 
</I>&gt;<i> On 7/12/06, David Srbecky &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">dsrbecky at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Hello,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It seems that my whole Edit and Continue effort boils down just to one
</I>&gt;&gt;<i> thing: Being able to recompile as quickly as possible.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The idea is that gmcs would not be used as a command line tool but as a
</I>&gt;&gt;<i> library. After compilation it would keep all usefully data in memory so
</I>&gt;&gt;<i> it could use them during an incremental compilation. For example, I do
</I>&gt;&gt;<i> not think that it is necessary do parse again file that have not changed.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I actually do not know what takes so long on compilation. Can anyone
</I>&gt;&gt;<i> give me a rough estimate on how long the compiling stages take please?
</I>&gt;&gt;<i> - lexing, parsing, semantic analysis and such
</I>&gt;&gt;<i> - emission of code to System.Reflection.Emit
</I>&gt;&gt;<i> - Saving of the assembly on disk
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> David
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019370.html">[Mono-dev] Incremental C# compiler
</A></li>
	<LI>Next message: <A HREF="019374.html">[Mono-dev] Incremental C# compiler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19371">[ date ]</a>
              <a href="thread.html#19371">[ thread ]</a>
              <a href="subject.html#19371">[ subject ]</a>
              <a href="author.html#19371">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
