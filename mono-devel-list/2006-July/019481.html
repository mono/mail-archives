<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] x86 code generator
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20x86%20code%20generator&In-Reply-To=20060703005314.44826.qmail%40web60816.mail.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019230.html">
   <LINK REL="Next"  HREF="019222.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] x86 code generator</H1>
    <B>Massimiliano Mantione</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20x86%20code%20generator&In-Reply-To=20060703005314.44826.qmail%40web60816.mail.yahoo.com"
       TITLE="[Mono-dev] x86 code generator">massi at ximian.com
       </A><BR>
    <I>Wed Jul 19 06:02:21 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019230.html">[Mono-dev] x86 code generator
</A></li>
        <LI>Next message: <A HREF="019222.html">[Mono-dev] TcpClient.cs diff file with .Net 2_0 methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19481">[ date ]</a>
              <a href="thread.html#19481">[ thread ]</a>
              <a href="subject.html#19481">[ subject ]</a>
              <a href="author.html#19481">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Sorry for the *late* reply, I was in vacation :-)
Others already explained you the &quot;while (0)&quot; thing...

On Sun, 2006-07-02 at 17:53 -0700, Rusmin Susanto wrote:
&gt;<i> 2. How do you know that &quot;sin&quot; function is equal to the following
</I>&gt;<i> instructions in x86:
</I>&gt;<i>  
</I>&gt;<i>  x86_fsin (code);
</I>&gt;<i>  x86_fldz (code);
</I>&gt;<i>  x86_fp_op_reg (code, X86_FADD, 1, TRUE);
</I>
Actually the &quot;x86_fsin (code);&quot; emits an fsin opcode which is
enough to perform a sin operation.

The following fldz and fadd are needed to truncate the result
to 64 bits (fsin operates with 80 bits), they are the fastest
way I found (asking around, thanks lupus!) to do this floating
point conversion.

Not truncating the result caused very subtle bugs because the
required semantics in CIL is to operate with 64 bits values.

Ciao,
  Massi



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019230.html">[Mono-dev] x86 code generator
</A></li>
	<LI>Next message: <A HREF="019222.html">[Mono-dev] TcpClient.cs diff file with .Net 2_0 methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19481">[ date ]</a>
              <a href="thread.html#19481">[ thread ]</a>
              <a href="subject.html#19481">[ subject ]</a>
              <a href="author.html#19481">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
