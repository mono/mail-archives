<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Saving And Loading Stacks (Embedding Mono in a Virtual World)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Saving%20And%20Loading%20Stacks%20%28Embedding%20Mono%20in%20a%20Virtual%20World%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011103.html">
   <LINK REL="Next"  HREF="011114.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Saving And Loading Stacks (Embedding Mono in a Virtual World)</H1>
    <B>Jim Purbrick</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Saving%20And%20Loading%20Stacks%20%28Embedding%20Mono%20in%20a%20Virtual%20World%29&In-Reply-To="
       TITLE="[Mono-devel-list] Saving And Loading Stacks (Embedding Mono in a Virtual World)">jimpurbrick at yahoo.co.uk
       </A><BR>
    <I>Mon Mar 21 13:05:29 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011103.html">[Mono-devel-list] Tuning SSAPRE
</A></li>
        <LI>Next message: <A HREF="011114.html">[Mono-devel-list] MONO_TYPE_GENERICINST in mono_marshal_get_stfld_wrapper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11111">[ date ]</a>
              <a href="thread.html#11111">[ thread ]</a>
              <a href="subject.html#11111">[ subject ]</a>
              <a href="author.html#11111">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--- Jim Purbrick &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jimpurbrick at yahoo.co.uk</A>&gt; wrote:
&gt;<i> --- Willibald Krenn &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Willibald.Krenn at gmx.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Is it possible to save and load mono stacks? 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don't think this will work. You'd have to
</I>&gt;<i> &gt; guarantee that all code (JIT compiled methods) is 
</I>&gt;<i> &gt; at the same place, the methods are actually 
</I>&gt;<i> &gt; compiled, all VMTs are correctly initialized, ... 
</I>&gt;<i> 
</I>&gt;<i> Hmm. I was hoping that I'd be able to store the
</I>&gt;<i> stack in terms of CIL methods and offsets, then 
</I>&gt;<i> rebuild it at the other end.
</I>
I've had a play with the stack walking code, which
gets me the IP and methods on the stack, but looks
like I effectively need to decompile the native code
back in to CIL to recover the locals and arguments.

&gt;<i> Couldn't it be made to work in a similar way to a 
</I>&gt;<i> debugger?
</I>
I still need to look at exactly what the debugger can
and can't do, it may be extracting all the information
I need from the native stacks and will hopefully give
me some clues as to how to manipulate the stack in
order to load it at the other end.

&gt;<i> If code locations and and ensuring compilation are a
</I>&gt;<i> problem, could I compile ahead of time and ship the
</I>&gt;<i> binary around between servers?
</I>
This looks like it might be easier, just to deal with
native code and native stacks, rather than try to
transfer CIL stacks, but I'm not sure just tranferring
the JIT output and native stack would be enough.

Alternatively building continuations on the heap and
doing saving and loading in bytecode like PicoThreads
or JavaGoX might be the way to go after all...

Cheers,

Jim.

Send instant messages to your online friends <A HREF="http://uk.messenger.yahoo.com">http://uk.messenger.yahoo.com</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011103.html">[Mono-devel-list] Tuning SSAPRE
</A></li>
	<LI>Next message: <A HREF="011114.html">[Mono-devel-list] MONO_TYPE_GENERICINST in mono_marshal_get_stfld_wrapper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11111">[ date ]</a>
              <a href="thread.html#11111">[ thread ]</a>
              <a href="subject.html#11111">[ subject ]</a>
              <a href="author.html#11111">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
