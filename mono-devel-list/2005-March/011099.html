<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] asp.net usercontrols and WriteFile features
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20asp.net%20usercontrols%20and%20WriteFile%20features&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011097.html">
   <LINK REL="Next"  HREF="011102.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] asp.net usercontrols and WriteFile features</H1>
    <B>Joe Audette</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20asp.net%20usercontrols%20and%20WriteFile%20features&In-Reply-To="
       TITLE="[Mono-devel-list] asp.net usercontrols and WriteFile features">joe_audette at yahoo.com
       </A><BR>
    <I>Sun Mar 20 16:21:53 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011097.html">[Mono-devel-list] XSP, Monodoc, mod_mono for 1.5
</A></li>
        <LI>Next message: <A HREF="011102.html">[Mono-devel-list] asp.net usercontrols and WriteFile features
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11099">[ date ]</a>
              <a href="thread.html#11099">[ thread ]</a>
              <a href="subject.html#11099">[ subject ]</a>
              <a href="author.html#11099">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I could be wrong on this but I have always thought
that Response.WriteFile is for writing binary streams
to the response like to support file downloads and
such. I would not have thought it would be used in the
Render method of a user control.

If I was retrieving content from a text file to write
to the response my first inclination would be to open
the file server side and then write the contents using
Response.Write or to load the content into a Literal
then load that into the user control or some container
control using this.Controls.Add instead of overriding
the render method. 

The file you are loading is labelled .html, if you
have  the full set of html tags, head, body etc in
that file you're likely to have problems putting that
in a user control because those tags would already be
part of the containing page.

Hope any of that helps,

Joe


--- charlie &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monodevellist at charlie.at</A>&gt; wrote:
&gt;<i> Hi Guys,
</I>&gt;<i> 
</I>&gt;<i> i have been doing a bit of asp.net programming and
</I>&gt;<i> have run into a few
</I>&gt;<i> features :-). here a code snippet of what I am
</I>&gt;<i> doing:
</I>&gt;<i> 
</I>&gt;<i> Menu.ascx
</I>&gt;<i>   public class Menu : System.Web.UI.UserControl
</I>&gt;<i>   {
</I>&gt;<i> 
</I>&gt;<i>     private void Page_Load(object sender,
</I>&gt;<i> System.EventArgs e)
</I>&gt;<i>     {
</I>&gt;<i>     }
</I>&gt;<i>     protected override void Render(HtmlTextWriter
</I>&gt;<i> output)
</I>&gt;<i>     {
</I>&gt;<i> #if __MonoCS__
</I>&gt;<i>      
</I>&gt;<i>
</I>Response.WriteFile(&quot;/home/[absolutepath]/html/Menu.html&quot;);
&gt;<i> #else
</I>&gt;<i>       Response.WriteFile(&quot;../html/Menu.html&quot;);
</I>&gt;<i> #endif
</I>&gt;<i>     }
</I>&gt;<i> 
</I>&gt;<i> Prod.aspx
</I>&gt;<i>   &lt;body&gt;
</I>&gt;<i>     &lt;gutschn:Menu id=&quot;Menu1&quot;
</I>&gt;<i> runat=&quot;server&quot;&gt;&lt;/gutschn:Menu&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> - Response.WriteFile under MS works relative to the
</I>&gt;<i> as?x file that
</I>&gt;<i> contains it, but apparently not so in mono. Thus
</I>&gt;<i> under IIS including
</I>&gt;<i> this webcontrol where both aspx and ascx file are in
</I>&gt;<i> cgi-bin, pulls in
</I>&gt;<i> the the afore mentioned html file from the parallel
</I>&gt;<i> html directory. I
</I>&gt;<i> was able to counter with with #if, not nice, but it
</I>&gt;<i> works
</I>&gt;<i> 
</I>&gt;<i> - UserControl.Render under mono executes to a
</I>&gt;<i> different time than under
</I>&gt;<i> IIS. In IIS the 'included' html gets written where
</I>&gt;<i> the control is,
</I>&gt;<i> whereas under mono the html gets written before the
</I>&gt;<i> output of the aspx
</I>&gt;<i> file. Thus I have my meta-tags, menu and footer and
</I>&gt;<i> then comes the
</I>&gt;<i> &lt;!DOCTYPE and the rest of the page :-(
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Has anyone had similar experiences ??
</I>&gt;<i> 
</I>&gt;<i> current system is suse 9.2, apache2 and the 1.1.4 /
</I>&gt;<i> 1.0.6 mix that one
</I>&gt;<i> gets off the mono-project homepage
</I>&gt;<i> rpm -qa | grep mono
</I>&gt;<i> mono-data-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-winforms-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-basic-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-data-oracle-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-data-sqlite-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-ikvm-1.1.4-1.ximian.10.1
</I>&gt;<i> mod_mono-1.0.6-1.ximian.9.1    (now 1.0.7)
</I>&gt;<i> mono-devel-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-core-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-web-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-extras-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-data-postgresql-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-data-sybase-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-locale-extras-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-complete-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-jscript-1.1.4-1.ximian.10.1
</I>&gt;<i> 
</I>&gt;<i> mod_mono.so has since been replaced with a svn 1.0.7
</I>&gt;<i> compile from source
</I>&gt;<i> to take advantage of multiple named applications
</I>&gt;<i> (works like a charm
</I>&gt;<i> *g*, multiple virtual servers with their own
</I>&gt;<i> applications)
</I>&gt;<i> 
</I>&gt;<i> regards
</I>&gt;<i>   charlie
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>
</I><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
&gt;<i> 
</I>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">joe_audette at yahoo.com</A>
<A HREF="http://www.joeaudette.com">http://www.joeaudette.com</A>
<A HREF="http://www.mojoportal.com">http://www.mojoportal.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011097.html">[Mono-devel-list] XSP, Monodoc, mod_mono for 1.5
</A></li>
	<LI>Next message: <A HREF="011102.html">[Mono-devel-list] asp.net usercontrols and WriteFile features
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11099">[ date ]</a>
              <a href="thread.html#11099">[ thread ]</a>
              <a href="subject.html#11099">[ subject ]</a>
              <a href="author.html#11099">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
