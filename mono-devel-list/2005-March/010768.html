<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [REGRESSION] Change in mono runtime caused Nemerle do stop bootstraping
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BREGRESSION%5D%20Change%20in%20mono%20runtime%20caused%20Nemerle%20do%20stop%20bootstraping&In-Reply-To=20050301101953.GA16746%40debian.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010767.html">
   <LINK REL="Next"  HREF="010770.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [REGRESSION] Change in mono runtime caused Nemerle do stop bootstraping</H1>
    <B>Kamil Skalski</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BREGRESSION%5D%20Change%20in%20mono%20runtime%20caused%20Nemerle%20do%20stop%20bootstraping&In-Reply-To=20050301101953.GA16746%40debian.org"
       TITLE="[Mono-devel-list] [REGRESSION] Change in mono runtime caused Nemerle do stop bootstraping">nazgul at nemerle.org
       </A><BR>
    <I>Tue Mar  1 06:16:10 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010767.html">[Mono-devel-list] [REGRESSION] Change in mono runtime caused Nemerle do stop bootstraping
</A></li>
        <LI>Next message: <A HREF="010770.html">[Mono-devel-list] [REGRESSION] Change in mono runtime caused Nemerle do stop bootstraping
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10768">[ date ]</a>
              <a href="thread.html#10768">[ thread ]</a>
              <a href="subject.html#10768">[ subject ]</a>
              <a href="author.html#10768">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dnia wtorek, 1 marca 2005 11:19, Paolo Molaro napisa&#322;:
&gt;<i>
</I>&gt;<i> To confirm, try compiling with the env var GC_DONT_GC=1 set.
</I>
Confirmed, with 
export GC_DONT_GC=1
everything goes fine

&gt;<i> nemerle-0.2.1 builds fine on my box. 
</I>
Probably, the svn version (which is failing) got quite much new stuff.

&gt;<i> Are you running on x86? 
</I>
Yes.

&gt;<i>
</I>&gt;<i> You could enable the commented code in metadata/object.c at line 564 and
</I>&gt;<i> change to: static int count = 0;
</I>&gt;<i> 		if (count++ &gt; 58) {
</I>&gt;<i> 			g_print (&quot;typed alloc disabled for %s.%s\n&quot;, class-&gt;name_space,
</I>&gt;<i> class-&gt;name); return;
</I>
With this code everything seems to work fine, but it prints out a large chunk 
of types.
When I commented out `return` the trace is:

typed alloc disabled for .MethodInfo
typed alloc disabled for System.Reflection.MonoField
typed alloc disabled for .Locale
typed alloc disabled for System.Diagnostics.StackTrace
typed alloc disabled for System.Diagnostics.StackFrame
typed alloc disabled for System.Security.Permissions.FileIOPermission
typed alloc disabled for System.Security.CodeAccessPermission
typed alloc disabled for System.Security.SecurityManager
typed alloc disabled for System.Security.Permissions.SecurityPermission
typed alloc disabled for System.Security.Permissions.SecurityPermissionFlag
typed alloc disabled for Nemerle.Compiler.BailOutException
error: internal compiler error: got some unknown exception Cannot cast from 
source type to destination type.
in &lt;0x000da&gt; Nemerle.Compiler.TypeBuilder:add_derived_members ()
in &lt;0x00079&gt; Nemerle.Compiler.TypeBuilder:add_members ()

&gt;<i> 		}
</I>&gt;<i> Increasing/decreasing the value and checking if nemerle works should point
</I>&gt;<i> out for which type the GC descriptor is computed incorrectly.
</I>
Hmm, so should I increase the 58 value to the point where it stops printing 
anything? Or to the point where is may print something, but stop/start 
failing?

Is there a way to omit 'make install' stage when testing? Ideally I would like 
to only build mono runtime, point my configuration to use newly builded 
'mono' and test things. Which directory should I use?

Kamil

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010767.html">[Mono-devel-list] [REGRESSION] Change in mono runtime caused Nemerle do stop bootstraping
</A></li>
	<LI>Next message: <A HREF="010770.html">[Mono-devel-list] [REGRESSION] Change in mono runtime caused Nemerle do stop bootstraping
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10768">[ date ]</a>
              <a href="thread.html#10768">[ thread ]</a>
              <a href="subject.html#10768">[ subject ]</a>
              <a href="author.html#10768">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
