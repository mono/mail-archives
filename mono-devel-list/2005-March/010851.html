<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] monod: System.ServiceProcess on Linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20monod%3A%20System.ServiceProcess%20on%20Linux&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010849.html">
   <LINK REL="Next"  HREF="010852.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] monod: System.ServiceProcess on Linux</H1>
    <B>J&#246;rg Rosenkranz</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20monod%3A%20System.ServiceProcess%20on%20Linux&In-Reply-To="
       TITLE="[Mono-devel-list] monod: System.ServiceProcess on Linux">joergr at voelcker.com
       </A><BR>
    <I>Tue Mar  8 12:44:36 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010849.html">[Mono-devel-list] Please send patches to public list
</A></li>
        <LI>Next message: <A HREF="010852.html">[Mono-devel-list] monod: System.ServiceProcess on Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10851">[ date ]</a>
              <a href="thread.html#10851">[ thread ]</a>
              <a href="subject.html#10851">[ subject ]</a>
              <a href="author.html#10851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

Attached is the first incarnation of a Mono Linux daemon to run
.NET services developed using System.ServiceProcess.

The daemon exports an internal call which is used by ServiceBase to
get the service objects from the managed service.

To test this daemon you have to:

	1. Patch System.ServiceProcess and install the new assembly
	2. Put the 3 other files in a directory
	3. make (Very simple makefile, should do in most cases)

To run the created service:

	$ ./monod TestService.exe

Watch out for syslog messages (created by the daemon) and entries in
TestService.log (created by the service itself).

The service can be controlled by signals.
Pausing it:

	$ kill -USR1 &lt;process id&gt;

Continuing:

	$ kill -USR2 &lt;process id&gt;

Stopping:

	$ kill &lt;process id&gt;

A transcript of such a session in /var/log/messages looks like:

Mar  8 19:21:51 vidrd115 TestService.exe[5040]: Starting service Test Service...
Mar  8 19:24:29 vidrd115 TestService.exe[5040]: Pausing service Test Service...
Mar  8 19:25:18 vidrd115 TestService.exe[5040]: Continuing service Test Service...
Mar  8 19:25:57 vidrd115 TestService.exe[5040]: Stopping service Test Service...

Known problems:
If there is more than one service registered in Main it's not
possible to select one using the -n parameter yet.

I would like to hear opinions on this implementation (My C skills 
are a bit rusty ;-)). 
Is it possible to include this daemon in Mono? A not so generic 
implementation is running our Windows service on lots of Linux
servers without problems.

Thanks,
Joerg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ServiceProcess.diff
Type: application/octet-stream
Size: 1740 bytes
Desc: ServiceProcess.diff
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050308/9095a8e1/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050308/9095a8e1/attachment.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Makefile
Type: application/octet-stream
Size: 292 bytes
Desc: Makefile
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050308/9095a8e1/attachment-0001.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050308/9095a8e1/attachment-0001.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: monod.c
Type: application/octet-stream
Size: 9625 bytes
Desc: monod.c
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050308/9095a8e1/attachment-0002.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050308/9095a8e1/attachment-0002.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TestService.cs
Type: application/octet-stream
Size: 2511 bytes
Desc: TestService.cs
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050308/9095a8e1/attachment-0003.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050308/9095a8e1/attachment-0003.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010849.html">[Mono-devel-list] Please send patches to public list
</A></li>
	<LI>Next message: <A HREF="010852.html">[Mono-devel-list] monod: System.ServiceProcess on Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10851">[ date ]</a>
              <a href="thread.html#10851">[ thread ]</a>
              <a href="subject.html#10851">[ subject ]</a>
              <a href="author.html#10851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
