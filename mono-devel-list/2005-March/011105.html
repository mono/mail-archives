<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] asp.net usercontrols and WriteFile features
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20asp.net%20usercontrols%20and%20WriteFile%20features&In-Reply-To=Pine.LNX.4.61.0503210846300.6203%40webmail.charlie.at">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011102.html">
   <LINK REL="Next"  HREF="011100.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] asp.net usercontrols and WriteFile features</H1>
    <B>Rafael Teixeira</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20asp.net%20usercontrols%20and%20WriteFile%20features&In-Reply-To=Pine.LNX.4.61.0503210846300.6203%40webmail.charlie.at"
       TITLE="[Mono-devel-list] asp.net usercontrols and WriteFile features">monoman at gmail.com
       </A><BR>
    <I>Mon Mar 21 08:47:03 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011102.html">[Mono-devel-list] asp.net usercontrols and WriteFile features
</A></li>
        <LI>Next message: <A HREF="011100.html">[Mono-devel-list] Database Access web pages updated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11105">[ date ]</a>
              <a href="thread.html#11105">[ thread ]</a>
              <a href="subject.html#11105">[ subject ]</a>
              <a href="author.html#11105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>More importantly, these divergences are documented (in msdn, etc.)?
Because they may not hold true for ASP.NET 2.0, for instance, if they
are just  some undocumented implementation detail.

I would not build anything upon such a shaky base...

HIH,


On Mon, 21 Mar 2005 09:45:42 +0100 (CET), charlie
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monodevellist at charlie.at</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> the html files are only snippets. On the 'static' side of my page I use
</I>&gt;<i> apache severside includes to pull in standard meta tags, menu and
</I>&gt;<i> footer(all pages thus have the same look), and wanted to do the same
</I>&gt;<i> with the mono pages.
</I>&gt;<i> 
</I>&gt;<i> I stumbled over the WriteFile and in vs.net it opened the file relative
</I>&gt;<i> to the application directory. One override of the Render method and the
</I>&gt;<i> job was done. (No finding out what the application directory is,
</I>&gt;<i> changing directories, openeing and reading in the file, ...)
</I>&gt;<i> 
</I>&gt;<i> Unfortunatey mono diverges from the ms implementation here, both in the
</I>&gt;<i> assumed path and the excution time of the render method, which means the
</I>&gt;<i> I will most likely have to go the way of the literal control to be able
</I>&gt;<i> to reuse my html snippets.
</I>&gt;<i> 
</I>&gt;<i> Are these divergences to be considered bugs. should I file reports for
</I>&gt;<i> them?
</I>&gt;<i> 
</I>&gt;<i> regards
</I>&gt;<i>   charlie
</I>&gt;<i> 
</I>&gt;<i> On Sun, 20 Mar 2005, Joe Audette wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Date: Sun, 20 Mar 2005 13:21:53 -0800 (PST)
</I>&gt;<i> &gt; From: Joe Audette &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">joe_audette at yahoo.com</A>&gt;
</I>&gt;<i> &gt; To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> &gt; Subject: Re: [Mono-devel-list] asp.net usercontrols and WriteFile features
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I could be wrong on this but I have always thought
</I>&gt;<i> &gt; that Response.WriteFile is for writing binary streams
</I>&gt;<i> &gt; to the response like to support file downloads and
</I>&gt;<i> &gt; such. I would not have thought it would be used in the
</I>&gt;<i> &gt; Render method of a user control.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If I was retrieving content from a text file to write
</I>&gt;<i> &gt; to the response my first inclination would be to open
</I>&gt;<i> &gt; the file server side and then write the contents using
</I>&gt;<i> &gt; Response.Write or to load the content into a Literal
</I>&gt;<i> &gt; then load that into the user control or some container
</I>&gt;<i> &gt; control using this.Controls.Add instead of overriding
</I>&gt;<i> &gt; the render method.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The file you are loading is labelled .html, if you
</I>&gt;<i> &gt; have  the full set of html tags, head, body etc in
</I>&gt;<i> &gt; that file you're likely to have problems putting that
</I>&gt;<i> &gt; in a user control because those tags would already be
</I>&gt;<i> &gt; part of the containing page.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hope any of that helps,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Joe
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --- charlie &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monodevellist at charlie.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Hi Guys,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; i have been doing a bit of asp.net programming and
</I>&gt;<i> &gt; &gt; have run into a few
</I>&gt;<i> &gt; &gt; features :-). here a code snippet of what I am
</I>&gt;<i> &gt; &gt; doing:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Menu.ascx
</I>&gt;<i> &gt; &gt;   public class Menu : System.Web.UI.UserControl
</I>&gt;<i> &gt; &gt;   {
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;     private void Page_Load(object sender,
</I>&gt;<i> &gt; &gt; System.EventArgs e)
</I>&gt;<i> &gt; &gt;     {
</I>&gt;<i> &gt; &gt;     }
</I>&gt;<i> &gt; &gt;     protected override void Render(HtmlTextWriter
</I>&gt;<i> &gt; &gt; output)
</I>&gt;<i> &gt; &gt;     {
</I>&gt;<i> &gt; &gt; #if __MonoCS__
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; Response.WriteFile(&quot;/home/[absolutepath]/html/Menu.html&quot;);
</I>&gt;<i> &gt; &gt; #else
</I>&gt;<i> &gt; &gt;       Response.WriteFile(&quot;../html/Menu.html&quot;);
</I>&gt;<i> &gt; &gt; #endif
</I>&gt;<i> &gt; &gt;     }
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Prod.aspx
</I>&gt;<i> &gt; &gt;   &lt;body&gt;
</I>&gt;<i> &gt; &gt;     &lt;gutschn:Menu id=&quot;Menu1&quot;
</I>&gt;<i> &gt; &gt; runat=&quot;server&quot;&gt;&lt;/gutschn:Menu&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; - Response.WriteFile under MS works relative to the
</I>&gt;<i> &gt; &gt; as?x file that
</I>&gt;<i> &gt; &gt; contains it, but apparently not so in mono. Thus
</I>&gt;<i> &gt; &gt; under IIS including
</I>&gt;<i> &gt; &gt; this webcontrol where both aspx and ascx file are in
</I>&gt;<i> &gt; &gt; cgi-bin, pulls in
</I>&gt;<i> &gt; &gt; the the afore mentioned html file from the parallel
</I>&gt;<i> &gt; &gt; html directory. I
</I>&gt;<i> &gt; &gt; was able to counter with with #if, not nice, but it
</I>&gt;<i> &gt; &gt; works
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; - UserControl.Render under mono executes to a
</I>&gt;<i> &gt; &gt; different time than under
</I>&gt;<i> &gt; &gt; IIS. In IIS the 'included' html gets written where
</I>&gt;<i> &gt; &gt; the control is,
</I>&gt;<i> &gt; &gt; whereas under mono the html gets written before the
</I>&gt;<i> &gt; &gt; output of the aspx
</I>&gt;<i> &gt; &gt; file. Thus I have my meta-tags, menu and footer and
</I>&gt;<i> &gt; &gt; then comes the
</I>&gt;<i> &gt; &gt; &lt;!DOCTYPE and the rest of the page :-(
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Has anyone had similar experiences ??
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; current system is suse 9.2, apache2 and the 1.1.4 /
</I>&gt;<i> &gt; &gt; 1.0.6 mix that one
</I>&gt;<i> &gt; &gt; gets off the mono-project homepage
</I>&gt;<i> &gt; &gt; rpm -qa | grep mono
</I>&gt;<i> &gt; &gt; mono-data-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-winforms-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-basic-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-data-oracle-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-data-sqlite-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-ikvm-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mod_mono-1.0.6-1.ximian.9.1    (now 1.0.7)
</I>&gt;<i> &gt; &gt; mono-devel-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-core-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-web-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-extras-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-data-postgresql-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-data-sybase-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-locale-extras-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-complete-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt; mono-jscript-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; mod_mono.so has since been replaced with a svn 1.0.7
</I>&gt;<i> &gt; &gt; compile from source
</I>&gt;<i> &gt; &gt; to take advantage of multiple named applications
</I>&gt;<i> &gt; &gt; (works like a charm
</I>&gt;<i> &gt; &gt; *g*, multiple virtual servers with their own
</I>&gt;<i> &gt; &gt; applications)
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; regards
</I>&gt;<i> &gt; &gt;   charlie
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">joe_audette at yahoo.com</A>
</I>&gt;<i> &gt; <A HREF="http://www.joeaudette.com">http://www.joeaudette.com</A>
</I>&gt;<i> &gt; <A HREF="http://www.mojoportal.com">http://www.mojoportal.com</A>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>

-- 
Rafael &quot;Monoman&quot; Teixeira
---------------------------------------
I'm trying to become a &quot;Rosh Gadol&quot; before my own eyes. 
See <A HREF="http://www.joelonsoftware.com/items/2004/12/06.html">http://www.joelonsoftware.com/items/2004/12/06.html</A> for enlightment.
It hurts!

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011102.html">[Mono-devel-list] asp.net usercontrols and WriteFile features
</A></li>
	<LI>Next message: <A HREF="011100.html">[Mono-devel-list] Database Access web pages updated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11105">[ date ]</a>
              <a href="thread.html#11105">[ thread ]</a>
              <a href="subject.html#11105">[ subject ]</a>
              <a href="author.html#11105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
