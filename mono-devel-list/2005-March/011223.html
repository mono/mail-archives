<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Memory management for long running processes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Memory%20management%20for%20long%20running%20processes&In-Reply-To=424832A7.4000603%40majestic12.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011214.html">
   <LINK REL="Next"  HREF="011226.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Memory management for long running processes</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Memory%20management%20for%20long%20running%20processes&In-Reply-To=424832A7.4000603%40majestic12.co.uk"
       TITLE="[Mono-devel-list] Memory management for long running processes">bmaurer at ximian.com
       </A><BR>
    <I>Mon Mar 28 14:45:56 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011214.html">[Mono-devel-list] Memory management for long running processes
</A></li>
        <LI>Next message: <A HREF="011226.html">[Mono-devel-list] Memory management for long running processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11223">[ date ]</a>
              <a href="thread.html#11223">[ thread ]</a>
              <a href="subject.html#11223">[ subject ]</a>
              <a href="author.html#11223">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2005-03-28 at 17:36 +0100, Alex Chudnovsky wrote:
&gt;<i> I have started running app under Mono's profiler and the issue appears 
</I>&gt;<i> to be related
</I>&gt;<i> to Mono's GC unwilling to release memory allocated for basic objects 
</I>&gt;<i> such as strings.
</I>
Are you using --profile? This one does *not* look at if the data is
live. The heap profiler, living in svn right now, does this. However,
right now, it doesn't work that nicely with long running apps.

One thing that helped the beagle team to track down issues was my
profiler which dumps a list of types every little bit. It is in the
heap-prof module, you just have to make install there and then run:

	mono --profile=desc-heap my.exe

Note that these *only* work on a recent mono (1.1.5 is fine).


&gt;<i> I appreciate that I am way too short on details but I have just started 
</I>&gt;<i> investigating
</I>&gt;<i> these memory leaks and wanted to post this message in hope to get some 
</I>&gt;<i> guidance
</I>&gt;<i> from people who know Garbage Collector well as there is little on the 
</I>&gt;<i> Net about Mono's
</I>&gt;<i> GC apart from some words along the lines that it is not particularly 
</I>&gt;<i> strong with long running
</I>&gt;<i> applications.
</I>
The Beagle people have had lots of luck with our profiler. They are able
tog et long running programs very easily.

&gt;<i> The question that I have right now is whether programmer can do anything 
</I>&gt;<i> to assist
</I>&gt;<i> GC to release memory used by strings, chars and byte[]'s. Would 
</I>&gt;<i> assigning null to types
</I>&gt;<i> that are nullable help at all?
</I>&gt;<i> 
</I>&gt;<i> I am specifically concerned about strings since my application deals 
</I>&gt;<i> with loads of those
</I>&gt;<i> and many of them are unique so memory is used but it should be released 
</I>&gt;<i> once processing
</I>&gt;<i> is done, and it does not seem to happen. I will post more details, 
</I>&gt;<i> hopefully with test cases.
</I>
Getting data from the profilers I mentioned above would be helpful. Are
you seeing a leak in RSS size (from `ps')? That is the ultimate measure,
of course. 

If all else fails, we'd love to see your program and figure out what is
wrong with the runtime.

-- Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011214.html">[Mono-devel-list] Memory management for long running processes
</A></li>
	<LI>Next message: <A HREF="011226.html">[Mono-devel-list] Memory management for long running processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11223">[ date ]</a>
              <a href="thread.html#11223">[ thread ]</a>
              <a href="subject.html#11223">[ subject ]</a>
              <a href="author.html#11223">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
