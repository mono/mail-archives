<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Any known issues with mono compilation on debian/amd64?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Any%20known%20issues%20with%20mono%20compilation%20on%20debian/amd64%3F&In-Reply-To=295e750a050309015016a1d06f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010858.html">
   <LINK REL="Next"  HREF="010863.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Any known issues with mono compilation on debian/amd64?</H1>
    <B>Marek Habersack</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Any%20known%20issues%20with%20mono%20compilation%20on%20debian/amd64%3F&In-Reply-To=295e750a050309015016a1d06f%40mail.gmail.com"
       TITLE="[Mono-devel-list] Any known issues with mono compilation on debian/amd64?">grendel at caudium.net
       </A><BR>
    <I>Wed Mar  9 17:55:06 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010858.html">[Mono-devel-list] Any known issues with mono compilation on debian/amd64?
</A></li>
        <LI>Next message: <A HREF="010863.html">[Mono-devel-list] Re: Any known issues with mono compilation on debian/amd64?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10871">[ date ]</a>
              <a href="thread.html#10871">[ thread ]</a>
              <a href="subject.html#10871">[ subject ]</a>
              <a href="author.html#10871">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Mar 09, 2005 at 10:50:55AM +0100, Zoltan Varga scribbled:
&gt;<i>                                                  Hi,
</I>&gt;<i> 
</I>&gt;<i>   mono should work just fine on debian/amd64. Could you run the failing command
</I>&gt;<i> under gdb and get a backtrace ?
</I>The results of such attempt are quite, well, interesting (I've modifed the
wrapper script to echo the parameters to .gdbinit and then run the command
under gdb), transcript of the session is attached.

I've discovered what was the problem since. The segfault was after mono
attempted to allocate more memory (6 or 7 brk(2) calls). It was necessary to
increase the data seg size resource limit and it worked.

regards,

marek
-------------- next part --------------
make[8]: Entering directory `/home/grendel/tmp/t/m/mono-1.1.4.20050308/mcs/class/corlib'
MONO_PATH=&quot;../../class/lib/basic:$MONO_PATH&quot; /home/grendel/tmp/t/m/mono-1.1.4.20050308/runtime/mono-wrapper ../../class/lib/basic/mcs.exe /nowarn:649 /nowarn:169 -d:INSIDE_CORLIB  -d:NET_1_1 -d:ONLY_1_1 -debug /noconfig /unsafe /nostdlib /target:library /out:mscorlib.dll  @corlib.dll.sources
+ r=/home/grendel/tmp/t/m/mono-1.1.4.20050308
+ MONO_CFG_DIR=/home/grendel/tmp/t/m/mono-1.1.4.20050308/runtime/etc
+ MONO_SHARED_DIR=/home/grendel/tmp/t/m/mono-1.1.4.20050308/runtime
+ export MONO_CFG_DIR MONO_SHARED_DIR
+ echo 'set args --config &quot;/home/grendel/tmp/t/m/mono-1.1.4.20050308/runtime/wrapper-config&quot; ../../class/lib/basic/mcs.exe' /nowarn:649 /nowarn:169 -d:INSIDE_CORLIB -d:NET_1_1 -d:ONLY_1_1 -debug /noconfig /unsafe /nostdlib /target:library /out:mscorlib.dll @corlib.dll.sources
+ echo r
+ exec /home/grendel/tmp/t/m/mono-1.1.4.20050308/libtool --mode=execute /usr/bin/gdb /home/grendel/tmp/t/m/mono-1.1.4.20050308/mono/mini/mono
GNU gdb 6.3-debian
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type &quot;show copying&quot; to see the conditions.
There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-linux&quot;...Using host libthread_db library &quot;/lib/libthread_db.so.1&quot;.

[Thread debugging using libthread_db enabled]
[New Thread 46912510488048 (LWP 17848)]
[New Thread 1075968368 (LWP 17852)]

Program received signal SIGPWR, Power fail/restart.
[Switching to Thread 1075968368 (LWP 17852)]
0x00002aaaab17a66a in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
(gdb) r
The program being debugged has been started already.
Start it from the beginning? (y or n) n
Program not restarted.
(gdb) c
Continuing.

Program received signal SIGXCPU, CPU time limit exceeded.
0x00002aaaab64e9bf in sigsuspend () from /lib/libc.so.6
(gdb) c
Continuing.

Program received signal SIGPWR, Power fail/restart.
0x00002aaaab17a66a in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
(gdb) c
Continuing.

Program received signal SIGXCPU, CPU time limit exceeded.
0x00002aaaab64e9bf in sigsuspend () from /lib/libc.so.6
(gdb) c
Continuing.

Program received signal SIGPWR, Power fail/restart.
0x00002aaaab17a66a in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
(gdb) c
Continuing.

Program received signal SIGXCPU, CPU time limit exceeded.
0x00002aaaab64e9bf in sigsuspend () from /lib/libc.so.6
(gdb) c
Continuing.

Program received signal SIGPWR, Power fail/restart.
0x00002aaaab17ce5e in recv () from /lib/libpthread.so.0
(gdb) q
The program is running.  Exit anyway? (y or n) y
:<i>  mscorlib.dll ../../class/mono.snk
</I>mv mscorlib.dll ../../class/lib/net_1_1_bootstrap/mscorlib.dll
mv: cannot stat `mscorlib.dll': No such file or directory
make[8]: *** [../../class/lib/net_1_1_bootstrap/mscorlib.dll] Error 1
make[8]: Leaving directory `/home/grendel/tmp/t/m/mono-1.1.4.20050308/mcs/class/corlib'
make[7]: *** [all.real] Error 2
make[7]: Leaving directory `/home/grendel/tmp/t/m/mono-1.1.4.20050308/mcs/class/corlib'
make[6]: *** [all-recursive] Error 1
make[6]: Leaving directory `/home/grendel/tmp/t/m/mono-1.1.4.20050308/mcs/class'
make[5]: *** [all-recursive] Error 1
make[5]: Leaving directory `/home/grendel/tmp/t/m/mono-1.1.4.20050308/mcs'
make[4]: *** [profile-do--net_1_1_bootstrap--all] Error 2
make[4]: Leaving directory `/home/grendel/tmp/t/m/mono-1.1.4.20050308/mcs'
make[3]: *** [profiles-do--all] Error 2
make[3]: Leaving directory `/home/grendel/tmp/t/m/mono-1.1.4.20050308/mcs'
make[2]: *** [all-local] Error 2
make[2]: Leaving directory `/home/grendel/tmp/t/m/mono-1.1.4.20050308/runtime'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/grendel/tmp/t/m/mono-1.1.4.20050308'
make: *** [all] Error 2
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050309/64d596dd/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050309/64d596dd/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010858.html">[Mono-devel-list] Any known issues with mono compilation on debian/amd64?
</A></li>
	<LI>Next message: <A HREF="010863.html">[Mono-devel-list] Re: Any known issues with mono compilation on debian/amd64?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10871">[ date ]</a>
              <a href="thread.html#10871">[ thread ]</a>
              <a href="subject.html#10871">[ subject ]</a>
              <a href="author.html#10871">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
