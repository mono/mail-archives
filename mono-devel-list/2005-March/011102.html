<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] asp.net usercontrols and WriteFile features
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20asp.net%20usercontrols%20and%20WriteFile%20features&In-Reply-To=20050320212153.1508.qmail%40web30702.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011099.html">
   <LINK REL="Next"  HREF="011105.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] asp.net usercontrols and WriteFile features</H1>
    <B>charlie</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20asp.net%20usercontrols%20and%20WriteFile%20features&In-Reply-To=20050320212153.1508.qmail%40web30702.mail.mud.yahoo.com"
       TITLE="[Mono-devel-list] asp.net usercontrols and WriteFile features">monodevellist at charlie.at
       </A><BR>
    <I>Mon Mar 21 03:45:42 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011099.html">[Mono-devel-list] asp.net usercontrols and WriteFile features
</A></li>
        <LI>Next message: <A HREF="011105.html">[Mono-devel-list] asp.net usercontrols and WriteFile features
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11102">[ date ]</a>
              <a href="thread.html#11102">[ thread ]</a>
              <a href="subject.html#11102">[ subject ]</a>
              <a href="author.html#11102">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

the html files are only snippets. On the 'static' side of my page I use 
apache severside includes to pull in standard meta tags, menu and 
footer(all pages thus have the same look), and wanted to do the same 
with the mono pages.

I stumbled over the WriteFile and in vs.net it opened the file relative 
to the application directory. One override of the Render method and the 
job was done. (No finding out what the application directory is, 
changing directories, openeing and reading in the file, ...)

Unfortunatey mono diverges from the ms implementation here, both in the 
assumed path and the excution time of the render method, which means the 
I will most likely have to go the way of the literal control to be able 
to reuse my html snippets.

Are these divergences to be considered bugs. should I file reports for 
them?

regards
  charlie




On Sun, 20 Mar 2005, Joe Audette wrote:

&gt;<i> Date: Sun, 20 Mar 2005 13:21:53 -0800 (PST)
</I>&gt;<i> From: Joe Audette &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">joe_audette at yahoo.com</A>&gt;
</I>&gt;<i> To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-devel-list] asp.net usercontrols and WriteFile features
</I>&gt;<i> 
</I>&gt;<i> I could be wrong on this but I have always thought
</I>&gt;<i> that Response.WriteFile is for writing binary streams
</I>&gt;<i> to the response like to support file downloads and
</I>&gt;<i> such. I would not have thought it would be used in the
</I>&gt;<i> Render method of a user control.
</I>&gt;<i> 
</I>&gt;<i> If I was retrieving content from a text file to write
</I>&gt;<i> to the response my first inclination would be to open
</I>&gt;<i> the file server side and then write the contents using
</I>&gt;<i> Response.Write or to load the content into a Literal
</I>&gt;<i> then load that into the user control or some container
</I>&gt;<i> control using this.Controls.Add instead of overriding
</I>&gt;<i> the render method. 
</I>&gt;<i> 
</I>&gt;<i> The file you are loading is labelled .html, if you
</I>&gt;<i> have  the full set of html tags, head, body etc in
</I>&gt;<i> that file you're likely to have problems putting that
</I>&gt;<i> in a user control because those tags would already be
</I>&gt;<i> part of the containing page.
</I>&gt;<i> 
</I>&gt;<i> Hope any of that helps,
</I>&gt;<i> 
</I>&gt;<i> Joe
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --- charlie &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">monodevellist at charlie.at</A>&gt; wrote:
</I>&gt;<i> &gt; Hi Guys,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; i have been doing a bit of asp.net programming and
</I>&gt;<i> &gt; have run into a few
</I>&gt;<i> &gt; features :-). here a code snippet of what I am
</I>&gt;<i> &gt; doing:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Menu.ascx
</I>&gt;<i> &gt;   public class Menu : System.Web.UI.UserControl
</I>&gt;<i> &gt;   {
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     private void Page_Load(object sender,
</I>&gt;<i> &gt; System.EventArgs e)
</I>&gt;<i> &gt;     {
</I>&gt;<i> &gt;     }
</I>&gt;<i> &gt;     protected override void Render(HtmlTextWriter
</I>&gt;<i> &gt; output)
</I>&gt;<i> &gt;     {
</I>&gt;<i> &gt; #if __MonoCS__
</I>&gt;<i> &gt;      
</I>&gt;<i> &gt;
</I>&gt;<i> Response.WriteFile(&quot;/home/[absolutepath]/html/Menu.html&quot;);
</I>&gt;<i> &gt; #else
</I>&gt;<i> &gt;       Response.WriteFile(&quot;../html/Menu.html&quot;);
</I>&gt;<i> &gt; #endif
</I>&gt;<i> &gt;     }
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Prod.aspx
</I>&gt;<i> &gt;   &lt;body&gt;
</I>&gt;<i> &gt;     &lt;gutschn:Menu id=&quot;Menu1&quot;
</I>&gt;<i> &gt; runat=&quot;server&quot;&gt;&lt;/gutschn:Menu&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; - Response.WriteFile under MS works relative to the
</I>&gt;<i> &gt; as?x file that
</I>&gt;<i> &gt; contains it, but apparently not so in mono. Thus
</I>&gt;<i> &gt; under IIS including
</I>&gt;<i> &gt; this webcontrol where both aspx and ascx file are in
</I>&gt;<i> &gt; cgi-bin, pulls in
</I>&gt;<i> &gt; the the afore mentioned html file from the parallel
</I>&gt;<i> &gt; html directory. I
</I>&gt;<i> &gt; was able to counter with with #if, not nice, but it
</I>&gt;<i> &gt; works
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; - UserControl.Render under mono executes to a
</I>&gt;<i> &gt; different time than under
</I>&gt;<i> &gt; IIS. In IIS the 'included' html gets written where
</I>&gt;<i> &gt; the control is,
</I>&gt;<i> &gt; whereas under mono the html gets written before the
</I>&gt;<i> &gt; output of the aspx
</I>&gt;<i> &gt; file. Thus I have my meta-tags, menu and footer and
</I>&gt;<i> &gt; then comes the
</I>&gt;<i> &gt; &lt;!DOCTYPE and the rest of the page :-(
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Has anyone had similar experiences ??
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; current system is suse 9.2, apache2 and the 1.1.4 /
</I>&gt;<i> &gt; 1.0.6 mix that one
</I>&gt;<i> &gt; gets off the mono-project homepage
</I>&gt;<i> &gt; rpm -qa | grep mono
</I>&gt;<i> &gt; mono-data-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-winforms-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-basic-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-data-oracle-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-data-sqlite-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-ikvm-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mod_mono-1.0.6-1.ximian.9.1    (now 1.0.7)
</I>&gt;<i> &gt; mono-devel-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-core-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-web-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-extras-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-data-postgresql-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-data-sybase-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-locale-extras-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-complete-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; mono-jscript-1.1.4-1.ximian.10.1
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; mod_mono.so has since been replaced with a svn 1.0.7
</I>&gt;<i> &gt; compile from source
</I>&gt;<i> &gt; to take advantage of multiple named applications
</I>&gt;<i> &gt; (works like a charm
</I>&gt;<i> &gt; *g*, multiple virtual servers with their own
</I>&gt;<i> &gt; applications)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; regards
</I>&gt;<i> &gt;   charlie
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt;
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">joe_audette at yahoo.com</A>
</I>&gt;<i> <A HREF="http://www.joeaudette.com">http://www.joeaudette.com</A>
</I>&gt;<i> <A HREF="http://www.mojoportal.com">http://www.mojoportal.com</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011099.html">[Mono-devel-list] asp.net usercontrols and WriteFile features
</A></li>
	<LI>Next message: <A HREF="011105.html">[Mono-devel-list] asp.net usercontrols and WriteFile features
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11102">[ date ]</a>
              <a href="thread.html#11102">[ thread ]</a>
              <a href="subject.html#11102">[ subject ]</a>
              <a href="author.html#11102">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
