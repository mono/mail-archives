<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Question about adding opcodes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Question%20about%20adding%20opcodes&In-Reply-To=%3C1401661498.93191.YahooMailBasic%40web124902.mail.ne1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041571.html">
   <LINK REL="Next"  HREF="041574.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Question about adding opcodes</H1>
    <B>Steven Bluen</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Question%20about%20adding%20opcodes&In-Reply-To=%3C1401661498.93191.YahooMailBasic%40web124902.mail.ne1.yahoo.com%3E"
       TITLE="[Mono-dev] Question about adding opcodes">sbluen153 at yahoo.com
       </A><BR>
    <I>Sun Jun  1 22:24:58 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="041571.html">[Mono-dev] Question about adding opcodes
</A></li>
        <LI>Next message: <A HREF="041574.html">[Mono-dev] Question about adding opcodes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41573">[ date ]</a>
              <a href="thread.html#41573">[ thread ]</a>
              <a href="subject.html#41573">[ subject ]</a>
              <a href="author.html#41573">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for your response. Would you also care to explain something else please? Because I'm not sure why when I place printf calls inside the switch statement, when I run a program with Mono, all of the output is placed at the beginning, before anything else is printed to the console.

On another note, is there an easy way to read the preprocessor macros when coding or debugging Mono's functions? Because they slow down my understanding of the code by being skipped in the debugger and because my IDE, Eclipse, can't handle some of them very well under its default settings.

Steven Bluen
--------------------------------------------
On Sun, 6/1/14, Alex R&#248;nne Petersen &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">alex at alexrp.com</A>&gt; wrote:

 Subject: Re: [Mono-dev] Question about adding opcodes
 To: &quot;Steven Bluen&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sbluen153 at yahoo.com</A>&gt;
 Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
 Date: Sunday, June 1, 2014, 6:16 AM
 
 Hi,
 
 On Sun, Jun 1, 2014 at 2:58 PM, Steven Bluen &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sbluen153 at yahoo.com</A>&gt;
 wrote:
 &gt; Hello,
 &gt;
 &gt; I am trying to add an opcode to Mono's JIT compiler and
 its interpreter to allow Mono to compile and run
 applications so that I can make a frequently used operation
 in a C# program run faster. To keep things simple and avoid
 the need for parsing, this opcode is invoked through dynamic
 methods.
 
 Adding it to the interpreter is not worth it. The
 interpreter is
 bitrotted to the point of obscurity.
 
 &gt;
 &gt; I am able to get Mono's JIT compiler to stop at a
 breakpoint in mono/mini/method-to-ir.c at the point where
 the opcode is added to the method's intermediate
 representation. However, it would be much appreciated if
 someone could let me know which component, source code file,
 or function of Mono's interpreter is responsible for
 interpreting the instructions that form the body of a
 dynamic method.
 
 They're parsed like any other method (from an on-disk CIL
 assembly).
 This parsing is based on the tables in mono/cil/ and is done
 in
 mono_method_to_ir () in mono/mini/method-to-ir.c. The CIL
 stream is
 simply interpreted directly. If you're adding a new CIL
 opcode
 (different from an IR opcode), add it in
 mono/cil/cil-opcodes.xml and
 handle it in mono_method_to_ir (). If you plan to also add
 an IR
 opcode (or several), you may want to consider intercepting
 an
 intrinsic method call instead of using a custom CIL opcode.
 This'll be
 portable to MS.NET as MS.NET will then just use the managed
 fallback.
 
 Regards,
 Alex
 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041571.html">[Mono-dev] Question about adding opcodes
</A></li>
	<LI>Next message: <A HREF="041574.html">[Mono-dev] Question about adding opcodes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41573">[ date ]</a>
              <a href="thread.html#41573">[ thread ]</a>
              <a href="subject.html#41573">[ subject ]</a>
              <a href="author.html#41573">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
