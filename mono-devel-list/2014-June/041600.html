<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] field pointer and garbage collection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20field%20pointer%20and%20garbage%20collection&In-Reply-To=%3C1402481314720-4663040.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041599.html">
   <LINK REL="Next"  HREF="041601.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] field pointer and garbage collection</H1>
    <B>serus</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20field%20pointer%20and%20garbage%20collection&In-Reply-To=%3C1402481314720-4663040.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] field pointer and garbage collection">fabian.nagel at gmail.com
       </A><BR>
    <I>Wed Jun 11 10:08:34 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="041599.html">[Mono-dev] Problem building with big arrays
</A></li>
        <LI>Next message: <A HREF="041601.html">[Mono-dev] field pointer and garbage collection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41600">[ date ]</a>
              <a href="thread.html#41600">[ thread ]</a>
              <a href="subject.html#41600">[ subject ]</a>
              <a href="author.html#41600">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Devs,

I would appreciate if someone could make sense out of the following:

When a field of an object is accessed in C#, the IL code is LDFLD.
Intuitively, I would assume that the JIT compiler would transform LDFLD into
the assembler version of the following C code:

int A = *(int*)(ptr + 24);   // ptr is pointer to object, accessed field is
int and 24 is offset of field in object

Now assuming this was true, at some point (ptr + 24) would reside in a CPU
register, if execution is intercepted by garbage collection and the object
moved somewhere, this pointer would have to be updated as well, which sounds
impossible as the forward pointer is installed at the beginning of the
object and the pointer points to somewhere inside the object.

What part of my assumption is wrong? How is this solved?



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/field-pointer-and-garbage-collection-tp4663040.html">http://mono.1490590.n4.nabble.com/field-pointer-and-garbage-collection-tp4663040.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>






































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041599.html">[Mono-dev] Problem building with big arrays
</A></li>
	<LI>Next message: <A HREF="041601.html">[Mono-dev] field pointer and garbage collection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41600">[ date ]</a>
              <a href="thread.html#41600">[ thread ]</a>
              <a href="subject.html#41600">[ subject ]</a>
              <a href="author.html#41600">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
