<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mono SEGFAULT problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono%20SEGFAULT%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027693.html">
   <LINK REL="Next"  HREF="027654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mono SEGFAULT problem</H1>
    <B>Hubert FONGARNAND</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20mono%20SEGFAULT%20problem&In-Reply-To="
       TITLE="[Mono-dev] mono SEGFAULT problem">informatique.internet at fiducial.fr
       </A><BR>
    <I>Fri Apr 25 06:30:41 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027693.html">[Mono-dev] [PATCH] Add mixed-mode assembly support on Windows	(now build with cygwin as well)
</A></li>
        <LI>Next message: <A HREF="027654.html">[Mono-dev] mono SEGFAULT problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27650">[ date ]</a>
              <a href="thread.html#27650">[ thread ]</a>
              <a href="subject.html#27650">[ subject ]</a>
              <a href="author.html#27650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, everibody

    Since about a week, my SMTP Server (which is in C#/mono) crashes
about 1 time /day...
It's a multithreaded program that work on an RHEL4 server with 3
double-core processor and 16Gio RAM.
The segfaults appears randomly... and i cannot reproduce the bug on my
devs and beta machine. My program doesn't call any C library, so the
crash seems to be on mono itself

I'm running mono 1.9.1 (it crashes too with mono 1.2.6)

without gdb it crashes with:


Stacktrace:
 
 
Native stacktrace:
 
        mono [0x8152f80]
        mono [0x807819a]
        /lib/tls/libpthread.so.0 [0x6b2890]
        mono [0x813bc94]
        mono [0x80bd5c1]
        mono [0x80bdd0a]
        mono [0x8102656]
        mono [0x8116769]
        /lib/tls/libpthread.so.0 [0x6ac371]
        /lib/tls/libc.so.6(__clone+0x5e) [0x535ffe]
 
Debug info from gdb:
 
 
 
=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================

  Aborted 

I've run my program with Gdb 

[New Thread 66501552 (LWP 7705)]
[Thread 117857200 (LWP 7700) exited]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 19356592 (LWP 4481)]
mono_debugger_thread_cleanup (jit_tls=0x85ba670) at debug-mini.c:802
802                     if (info-&gt;jit_tls != jit_tls)
(gdb) bt
#0  mono_debugger_thread_cleanup (jit_tls=0x85ba670) at debug-mini.c:802
#1  0x08148794 in mini_thread_cleanup (thread=0xb6f5ce70) at mini.c:9670
#2  0x080c4860 in thread_cleanup (thread=0xb6f5ce70) at threads.c:509
#3  0x080c4fc1 in start_wrapper (data=0xb66a7fa0) at threads.c:605
#4  0x0810d09e in thread_start_routine (args=0xb78a4938) at threads.c:282
#5  0x08121b19 in GC_start_routine (arg=0xb65aa9a0) at pthread_support.c:1369
#6  0x006ac371 in start_thread () from /lib/tls/libpthread.so.0
#7  0x00535ffe in clone () from /lib/tls/libc.so.6
(gdb) q
The program is running.  Exit anyway? (y or n) y
[<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">root at lxlyosmc10</A> Server]# 



Could someone help me please

It seems this is a GC issue 




_________________________________________________

Ce message et les &#233;ventuels documents joints peuvent contenir des informations confidentielles.
Au cas o&#249; il ne vous serait pas destin&#233;, nous vous remercions de bien vouloir le supprimer et en aviser imm&#233;diatement l'exp&#233;diteur. Toute utilisation de ce message non conforme &#224; sa destination, toute diffusion ou publication, totale ou partielle et quel qu'en soit le moyen est formellement interdite.
Les communications sur internet n'&#233;tant pas s&#233;curis&#233;es, l'int&#233;grit&#233; de ce message n'est pas assur&#233;e et la soci&#233;t&#233; &#233;mettrice ne peut &#234;tre tenue pour responsable de son contenu.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080425/b90c066c/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080425/b90c066c/attachment-0001.html</A> 
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027693.html">[Mono-dev] [PATCH] Add mixed-mode assembly support on Windows	(now build with cygwin as well)
</A></li>
	<LI>Next message: <A HREF="027654.html">[Mono-dev] mono SEGFAULT problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27650">[ date ]</a>
              <a href="thread.html#27650">[ thread ]</a>
              <a href="subject.html#27650">[ subject ]</a>
              <a href="author.html#27650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
