<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] urgent issue with reading xml into a	dataset	(System.InvalidCastException)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20urgent%20issue%20with%20reading%20xml%20into%20a%0A%09dataset%09%28System.InvalidCastException%29&In-Reply-To=778CD52AADCFEF4589EEC746356EC5C103C08627%40ILEX5.IL.NDS.COM">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027377.html">
   <LINK REL="Next"  HREF="027378.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] urgent issue with reading xml into a	dataset	(System.InvalidCastException)</H1>
    <B>Veerapuram Varadhan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20urgent%20issue%20with%20reading%20xml%20into%20a%0A%09dataset%09%28System.InvalidCastException%29&In-Reply-To=778CD52AADCFEF4589EEC746356EC5C103C08627%40ILEX5.IL.NDS.COM"
       TITLE="[Mono-dev] urgent issue with reading xml into a	dataset	(System.InvalidCastException)">vvaradhan at novell.com
       </A><BR>
    <I>Fri Apr  4 05:49:41 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027377.html">[Mono-dev] urgent issue with reading xml into a dataset	(System.InvalidCastException)
</A></li>
        <LI>Next message: <A HREF="027378.html">[Mono-dev] DataSource's DataBind exposes difference between	properties and attributes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27380">[ date ]</a>
              <a href="thread.html#27380">[ thread ]</a>
              <a href="subject.html#27380">[ subject ]</a>
              <a href="author.html#27380">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Shlomi,

On Fri, 2008-04-04 at 09:09 +0300, Rosenberg, Shlomi wrote:
&gt;<i> &#65279; 
</I>&gt;<i> Hi,
</I>&gt;<i>  
</I>&gt;<i> I hava a dataset with a table containing the following row:
</I>&gt;<i> stepTable.Columns.Add(&quot;FuncXml&quot;, typeof(LabRat.LrtXml));
</I>&gt;<i> in the XML file it looks like this:
</I>&gt;<i> &lt;FuncXml&gt;
</I>&gt;<i>   &lt;Func Name=&quot;CUT_IntPassiveIn()&quot; Direction=&quot;PASSIVE_MOCK&quot;&gt;
</I>&gt;<i>     &lt;Param Name=&quot;paramLen&quot; Type=&quot;int&quot; Len=&quot;1&quot; InOut=&quot;IN&quot; Union=&quot;FALSE&quot;
</I>&gt;<i> Callback=&quot;&quot;&gt;
</I>&gt;<i>     &lt;/Param&gt;
</I>&gt;<i>     &lt;Param Name=&quot;single&quot; Type=&quot;int&quot; Len=&quot;1&quot; InOut=&quot;IN&quot; Union=&quot;FALSE&quot;
</I>&gt;<i> Callback=&quot;&quot;&gt;
</I>&gt;<i>     &lt;/Param&gt;
</I>&gt;<i>     &lt;Return Name=&quot;retVal&quot; Type=&quot;int&quot; Len=&quot;1&quot; InOut=&quot;OUT&quot; Union=&quot;FALSE&quot;
</I>&gt;<i> Callback=&quot;&quot;&gt;
</I>&gt;<i>     &lt;/Return&gt;
</I>&gt;<i>   &lt;/Func&gt;
</I>&gt;<i> &lt;/FuncXml&gt;
</I>&gt;<i>  
</I>&gt;<i> LrtXml is a class that implements IXmlSerializable, and it works fine
</I>&gt;<i> on .NET framework 2.0.
</I>&gt;<i>  
</I>&gt;<i> When running on Linux using mono, i keep getting:
</I>&gt;<i> System.InvalidCastException: Unknown target conversion type
</I>&gt;<i>   at System.Convert.ToType (System.Object value, System.Type
</I>&gt;<i> conversionType, IFormatProvider provider) [0x00000]
</I>&gt;<i>   at System.Convert.ChangeType (System.Object value, System.Type
</I>&gt;<i> conversionType) [0x00000]
</I>&gt;<i>   at System.Data.XmlDataReader.StringToObject (System.Type type,
</I>&gt;<i> System.String value) [0x00000]
</I>&gt;<i>   at System.Data.XmlDataReader.ReadElementElement (System.Data.DataRow
</I>&gt;<i> row) [0x00000]
</I>&gt;<i>   at System.Data.XmlDataReader.ReadElementContent (System.Data.DataRow
</I>&gt;<i> row) [0x00000]
</I>&gt;<i>   at System.Data.XmlDataReader.ReadElement (System.Data.DataRow row)
</I>&gt;<i> [0x00000]
</I>&gt;<i>   at System.Data.XmlDataReader.ReadDataSetContent () [0x00000]
</I>&gt;<i>   at System.Data.XmlDataReader.ReadTopLevelElement () [0x00000]
</I>&gt;<i>   at System.Data.XmlDataReader.Process () [0x00000]
</I>&gt;<i>   at System.Data.XmlDataReader.ReadXml (System.Data.DataSet dataset,
</I>&gt;<i> System.Xml.XmlReader reader, XmlReadMode mode) [0x00000]
</I>&gt;<i>   at System.Data.DataSet.ReadXml (System.Xml.XmlReader reader,
</I>&gt;<i> XmlReadMode mode) [0x00000]
</I>&gt;<i>   at System.Data.DataSet.ReadXml (System.Xml.XmlReader r) [0x00000]
</I>&gt;<i>   at System.Data.DataSet.ReadXml (System.String str) [0x00000]
</I>&gt;<i>   at LabRat.LrtTestEngine.openLrs () [0x00000]
</I>
Can you file a bug and attach a test sample to reproduce this issue?
IIUC, in Mono's System.Data.DataSet, the default implementation is to
get the serialization data either from XML or binary data.  Your sample
would help us understand the default of MS.NET and fix the issue.

TIA,

V. Varadhan



</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027377.html">[Mono-dev] urgent issue with reading xml into a dataset	(System.InvalidCastException)
</A></li>
	<LI>Next message: <A HREF="027378.html">[Mono-dev] DataSource's DataBind exposes difference between	properties and attributes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27380">[ date ]</a>
              <a href="thread.html#27380">[ thread ]</a>
              <a href="subject.html#27380">[ subject ]</a>
              <a href="author.html#27380">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
