<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono profiles / .NET Framework versions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono%20profiles%20/%20.NET%20Framework%20versions&In-Reply-To=20080430104130.1B288A0025%40winston.telenet-ops.be">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027733.html">
   <LINK REL="Next"  HREF="027722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono profiles / .NET Framework versions</H1>
    <B>Miguel de Icaza</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono%20profiles%20/%20.NET%20Framework%20versions&In-Reply-To=20080430104130.1B288A0025%40winston.telenet-ops.be"
       TITLE="[Mono-dev] Mono profiles / .NET Framework versions">miguel at novell.com
       </A><BR>
    <I>Wed Apr 30 20:32:24 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027733.html">[Mono-dev] Mono profiles / .NET Framework versions
</A></li>
        <LI>Next message: <A HREF="027722.html">[Mono-dev] reduce memory footprint of embedded mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27732">[ date ]</a>
              <a href="thread.html#27732">[ thread ]</a>
              <a href="subject.html#27732">[ subject ]</a>
              <a href="author.html#27732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i> On #mono, we (jb, grendel and myself) briefly discussed that way we're
</I>&gt;<i> currently splitting up assemblies and tools in profiles, and how we're
</I>&gt;<i> making specific profile versions of our tools accessible.
</I>
The problem with this discussion is that you guys did not understand the
reason for the current split.

The runtime consumes assemblies from the GAC, its the only place that is
looked up at runtime.

At compilation time, the compiler loads assemblies from the same
directory where the compiler is located.   Assemblies from this
directory have one trait in common: they all share the same mscorlib at
their foundation.

The &quot;1.0&quot;, &quot;2.0&quot; and &quot;2.1&quot; directories merely reflect the mscorlib
&quot;foundation&quot; and should only be used for libraries that are part of the
core runtime, not libraries that we produce and that could run on more
than one profile (1.0 libraries that can be reused on 2.0 for example).

&quot;3.0&quot; is a different beast, as there was no new mscorlib, it is merely a
&quot;package&quot; in Mono's gacutil parlance.    It is used to put a family of
libraries in the same directory, just like gtk-sharp-2.0, mono-zeroconf
and others use &quot;packages&quot; in this way.

This is why -pkg:dotnet works, it merely references libraries that come
from the same path where the compiler lives.

As long as there is not a new mscorlib version (not API, but version) we
will continue to keep libraries packaged in this way.

This means that all the new 3.5 libraries end up in the 2.0 directory.

&gt;<i> For assemblies, the consensus was to either have our profile versions
</I>&gt;<i> exactly match corresponding .NET Framework versions (eg. move System.Core,
</I>&gt;<i> System.Data.Linq, ... to the lib/mono/3.5 directory), or avoid confusion by
</I>&gt;<i> discarding the 3.5 &quot;profile&quot; altogether.
</I>
There the following sets of assemblies in 3.5:

	(a) Assemblies that existed in 2.0
	(b) New Assemblies introduced in 3.0
	(c) New Assemblies introduced in 3.5
		(d) General purpose assemblies
		(e) Extensions to 3.0 (they depend on it).

Upgrades to 2.0 should go into 2.0 as we do not have any plans to
support 2.0 and 2.0 SP1 (3.5) at the same time. 

I do not particularly mind the current split, but if we want to
rationalize it, we could:

	* (d) go side-by-side with (a).
	* (e) go side-by-side with (b)

Which leaves us with 1.0, 2.0, 2.1 as foundations, and 3.0 as a
&quot;package&quot;.

At this point though, we could just make sure that all 3.0 libraries go
into the &quot;3.5&quot; directory, there is no reason to keep 3.0 as a version
around anyways.

&gt;<i> I think it's safe to say that we'd prefer to have a real 3.5 profile (jb and
</I>&gt;<i> grendel, correct me if I'm wrong).
</I>
There is no real &quot;3.5&quot; profile, 3.5 (or what today we call 3.0) is not a
profile, its a package.   Just like gtk-sharp is a package.

&gt;<i> For tools, grendel proposed to have our wrapper scripts accept a profile
</I>&gt;<i> version parameter. When the parameter is not specified, the scripts would
</I>&gt;<i> default to the lastest profile version. Both jb and myself liked this idea.
</I>
This is a horrible idea, but its understandable that you guys
entertained the idea, because you guys did not understand profiles
(which are foundations) vs packages. 

&gt;<i> This would make it easier to have a toolchain that matches MS (eg. compilers
</I>&gt;<i> for both 1.0, 2.0 and 3.5 profile, instead of mixing 3.5 features in our 2.0
</I>&gt;<i> compiler), without having confusing script names.
</I>
You are confused, we are not going to have 1.0, 2.0 and 3.5 compilers.

The only reason why we have 3 compilers today has to do with our
dependency on Reflection (the startup mscorlib governs the kind of
executable generated, and also because its not possible to load 2
mscorlibs at the same time plus its side effects).   

The rest of the tools should not have any problems with this, and having
a version is unnecessary (other than when the tools have actually
changed in some important behavioral way). 

&gt;<i> This post is only here to start the discussion.
</I>
Good idea, but other than cleaning up and rationalizing where assemblies
for 3.0/3.5 go, we are not going to make any larger changes.

Miguel.

&gt;<i> Hopefully this will lead to a well thought through solution.
</I>&gt;<i> 
</I>&gt;<i> Gert
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I></PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027733.html">[Mono-dev] Mono profiles / .NET Framework versions
</A></li>
	<LI>Next message: <A HREF="027722.html">[Mono-dev] reduce memory footprint of embedded mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27732">[ date ]</a>
              <a href="thread.html#27732">[ thread ]</a>
              <a href="subject.html#27732">[ subject ]</a>
              <a href="author.html#27732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
