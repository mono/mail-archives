<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] crashes in glib hangs (not exits) program
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20crashes%20in%20glib%20hangs%20%28not%20exits%29%20program&In-Reply-To=200804220739.17201.mbd%40dbc.dk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027608.html">
   <LINK REL="Next"  HREF="027579.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] crashes in glib hangs (not exits) program</H1>
    <B>D Bera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20crashes%20in%20glib%20hangs%20%28not%20exits%29%20program&In-Reply-To=200804220739.17201.mbd%40dbc.dk"
       TITLE="[Mono-dev] crashes in glib hangs (not exits) program">dbera.web at gmail.com
       </A><BR>
    <I>Tue Apr 22 06:45:27 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027608.html">[Mono-dev] crashes in glib hangs (not exits) program
</A></li>
        <LI>Next message: <A HREF="027579.html">[Mono-dev] Exception when disassembling using Reflector
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27610">[ date ]</a>
              <a href="thread.html#27610">[ thread ]</a>
              <a href="subject.html#27610">[ subject ]</a>
              <a href="author.html#27610">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; &gt; &quot;doing nothing&quot;. Hope I am clear this time. Looking at the stack trace
</I>&gt;<i> &gt; &gt; I _think_ its just some bug in mono's after-crash-stacktrace-printer
</I>&gt;<i> &gt; &gt; which is causing the problem. Mono's behaviour (and yours too) is
</I>&gt;<i> &gt; &gt; absolutely right otherwise.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It's most likely the g_spawn* that gets the stack trace from gdb. You
</I>&gt;<i> &gt; may try to comment out the offending code in mini/mini-exceptions.c.
</I>
Little progress: I mentioned this on the bug page but I will do it
here too. Setting the SIGABRT handler to SIG_DFL seems to work. I
noticed that after the crash
- mono starts gdb to get information about the threads et al
- abort()
- this somehow brought the control back to mono, which it shouldnt -
the stacktrace read like
  (mono)
  (libc)
  (libc)
  (gsignal)
  (abort)
...
  This could be a red-herring but it prompted me to try after removing
mono's sigabrt handler. Overriding mono's sigabrt handler by the
default one does not print the nice mono stacktrace but crashes
exactly the way it would do on a native segfault.

Overriding SIGABRT seems like a working workaround. Some kind of
flag/option to control this behaviour would be nice though. What would
be best is to get both the mono stacktrace and successfully abort
after that :-).

- dBera

-- 
-----------------------------------------------------
Debajyoti Bera @ <A HREF="http://dtecht.blogspot.com">http://dtecht.blogspot.com</A>
beagle / KDE fan
Mandriva / Inspiron-1100 user
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027608.html">[Mono-dev] crashes in glib hangs (not exits) program
</A></li>
	<LI>Next message: <A HREF="027579.html">[Mono-dev] Exception when disassembling using Reflector
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27610">[ date ]</a>
              <a href="thread.html#27610">[ thread ]</a>
              <a href="subject.html#27610">[ subject ]</a>
              <a href="author.html#27610">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
