<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] System.Messaging, a (just) working implementation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20System.Messaging%2C%20a%20%28just%29%20working%20implementation&In-Reply-To=4811A4B2.2020202%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027645.html">
   <LINK REL="Next"  HREF="027662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] System.Messaging, a (just) working implementation</H1>
    <B>Michael Barker</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20System.Messaging%2C%20a%20%28just%29%20working%20implementation&In-Reply-To=4811A4B2.2020202%40ximian.com"
       TITLE="[Mono-dev] System.Messaging, a (just) working implementation">mike at middlesoft.co.uk
       </A><BR>
    <I>Fri Apr 25 06:54:28 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027645.html">[Mono-dev] System.Messaging, a (just) working implementation
</A></li>
        <LI>Next message: <A HREF="027662.html">[Mono-dev] System.Messaging, a (just) working implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27648">[ date ]</a>
              <a href="thread.html#27648">[ thread ]</a>
              <a href="subject.html#27648">[ subject ]</a>
              <a href="author.html#27648">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Apr 25, 2008 at 10:30 AM, Atsushi Eno &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushi at ximian.com</A>&gt; wrote:

&gt;<i> Oops, sorrry, I was dead for couple of days and after that it has dropped
</I>&gt;<i> from my mind for a while.
</I>

No problem, thanks for responding.


&gt;<i> Here's my quick survey:
</I>&gt;<i>
</I>&gt;<i> - You cannot add any public extra stuff (such as Mono.Messaging.* classes)
</I>&gt;<i>  in System.Messaging.dll. You have to create another assembly (such as
</I>&gt;<i>  Mono.Messaging.dll) and use it together with System.Messaging.dll.
</I>

That's interesting, I looked at System.Data initially, which included
Mainsoft namespace classes, so I thought adding a different namespace into
the same namespace would be okay.  I am happy to change that.


&gt;<i>   It is sort of mess, as either
</I>&gt;<i>
</I>&gt;<i>  - System.Messaging.dll depends on your extra assembly and hence yours
</I>&gt;<i>   cannot use any types in System.Messaging.dll (e.g. you cannot define
</I>&gt;<i>   IQueue.Deliver), or
</I>

This is probably the easiest, but is adding a compile time dependency for
System.Messaging.dll on another assembly acceptable?  I assume we shouldn't
be adding additional public classes to the System.* namespaces.

  - your extra assembly depends on System.Messaging.dll and hence any
&gt;<i>   types in yours inside System.Messaging.dll must be used through some
</I>&gt;<i>   reflection foo, or
</I>&gt;<i>  - you have to run cyclic build between those two assemblies (we do it
</I>&gt;<i>   for System.dll, System.Configuration.dll and System.Xml.dll, which is
</I>&gt;<i>   a mess).
</I>&gt;<i>
</I>&gt;<i> - At least MessageQueue.Create() should be implemented (otherwise it is not
</I>&gt;<i>  practically functional as System.Messaging.dll). It would have to be done
</I>&gt;<i>  by some configuration support to indicate one IMessagingProvider, and it
</I>&gt;<i>  must not be dependent on System.Configuration.dll which is 2.0-only.
</I>&gt;<i>
</I>&gt;<i> - It would provide only simple part of Sys.Messaging functionality (it
</I>&gt;<i> would
</I>&gt;<i>  apply to any JMS/AMQP based solution). We could still go with your
</I>&gt;<i>  bridge implementation for a while as a compromised solution though.
</I>

That's true, however the AMQP spec is not yet finished.  I believe that
there will be browsing and selector support in some of the later revisions.
This will mean that the majority of the System.Messaging functionality is
covered (including MessageQueue.Peek and MessageQueue.ReceiveById).  The
parts that probably won't be covered would be some of the specifics around
the additional system queues (e.g. journal queues).  Although AMQP does
support sophisticated routing rules so it may be possible to emulate some of
those features.

I was hoping by adding a provider layer, other implementations could be
added later, e.g. OpenWire for ActiveMQ or something Mono specific.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> And as Miguel pointed out, we would have to avoid your GPLv3-based
</I>&gt;<i> component
</I>&gt;<i> as run-time dependency.
</I>

I didn't see Miguel's message, but that is my mistake, it shouldn't of been
v3.  Is LGPL okay or would MIT be easiest for Mono?

I have some comments on the patch details, but I'd put my general survey
&gt;<i> first :)
</I>&gt;<i>
</I>&gt;<i> Atsushi Eno
</I>

Unfortunately my timing here is not the best.  I am about to head off
travelling for about 4 months, so I won't be able to make any major changes
until September.  I'll fix the license and add MessageQueue.Create support
before I go.  I still want to help build a System.Messaging implemenation so
I would be happy to receive any feedback you have in order to build
something that will be useful for Mono.  System.Messaging hasn't been
touched a few years, so a few more months shouldn't hurt :-).

Regards,
Michael Barker.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Michael Barker wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As I mentioned a couple of days ago I have a 0.0.1 version of a bridge
</I>&gt;&gt;<i> between Mono and QPid.  I have placed the code and a patch that adds an SPI
</I>&gt;&gt;<i> to Mono on google code.  <A HREF="http://code.google.com/p/mono-qpid/">http://code.google.com/p/mono-qpid/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There is quite a bit missing from the implementation, but basic sending
</I>&gt;&gt;<i> and receiving with XML and Binary formatting works.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> Michael Barker.
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mono-devel-list mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080425/e92caa11/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20080425/e92caa11/attachment.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027645.html">[Mono-dev] System.Messaging, a (just) working implementation
</A></li>
	<LI>Next message: <A HREF="027662.html">[Mono-dev] System.Messaging, a (just) working implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27648">[ date ]</a>
              <a href="thread.html#27648">[ thread ]</a>
              <a href="subject.html#27648">[ subject ]</a>
              <a href="author.html#27648">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
