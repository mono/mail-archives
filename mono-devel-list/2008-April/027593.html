<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] crashes in glib hangs (not exits) program
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20crashes%20in%20glib%20hangs%20%28not%20exits%29%20program&In-Reply-To=fuiarg%24eqo%241%40ger.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027592.html">
   <LINK REL="Next"  HREF="027594.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] crashes in glib hangs (not exits) program</H1>
    <B>D Bera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20crashes%20in%20glib%20hangs%20%28not%20exits%29%20program&In-Reply-To=fuiarg%24eqo%241%40ger.gmane.org"
       TITLE="[Mono-dev] crashes in glib hangs (not exits) program">dbera.web at gmail.com
       </A><BR>
    <I>Mon Apr 21 11:27:39 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027592.html">[Mono-dev] crashes in glib hangs (not exits) program
</A></li>
        <LI>Next message: <A HREF="027594.html">[Mono-dev] crashes in glib hangs (not exits) program
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27593">[ date ]</a>
              <a href="thread.html#27593">[ thread ]</a>
              <a href="subject.html#27593">[ subject ]</a>
              <a href="author.html#27593">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>  &gt; &quot;doing nothing&quot;. Hope I am clear this time. Looking at the stack trace
</I>&gt;<i>  &gt; I _think_ its just some bug in mono's after-crash-stacktrace-printer
</I>&gt;<i>  &gt; which is causing the problem. Mono's behaviour (and yours too) is
</I>&gt;<i>  &gt; absolutely right otherwise.
</I>&gt;<i>
</I>&gt;<i>  It's most likely the g_spawn* that gets the stack trace from gdb. You
</I>&gt;<i>  may try to comment out the offending code in mini/mini-exceptions.c.
</I>&gt;<i>
</I>&gt;<i>  Perhaps we should couple the gdb stack trace with mono's --debug switch.
</I>&gt;<i>  Or replace the g_spawn* call with plain libc calls...
</I>
Using libc methods instead of glib ones might work. But then again it
needs to be tested if a libc crash causes the same problem. Printing
the stacktrace only with --debug would be really bad in terms of
debugging but the current scenario is even worse.

For some reason, catching the &quot;unmanaged exception&quot; has the correct
behaviour even though it could be just a side effect. Zoltan pointed
out that unmanaged exceptions are not converted to exceptions in mono
even though the windows side seem to do it and recomment using
AppDomain.UnhandleException to log the crash before terminating. I am
not sure how they do it ... since the unmanaged exception could have
corrupted basic data structures so much that even the logging might
fail.

I am not in a state of building mono and testing the suggested
workaround but I would really appreciate the bug getting some
attention. In the mean time if someone can explain why catching the
exception seems to always work in mono, then I can publish a critical
release of beagle to workaround the problem (the problem in beagle
happens with a crash in evolution-sharp -&gt; evolution-glue-native-lib).

Thanks a lot,
- dBera

-- 
-----------------------------------------------------
Debajyoti Bera @ <A HREF="http://dtecht.blogspot.com">http://dtecht.blogspot.com</A>
beagle / KDE fan
Mandriva / Inspiron-1100 user
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027592.html">[Mono-dev] crashes in glib hangs (not exits) program
</A></li>
	<LI>Next message: <A HREF="027594.html">[Mono-dev] crashes in glib hangs (not exits) program
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27593">[ date ]</a>
              <a href="thread.html#27593">[ thread ]</a>
              <a href="subject.html#27593">[ subject ]</a>
              <a href="author.html#27593">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
