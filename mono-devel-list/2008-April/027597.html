<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] crashes in glib hangs (not exits) program
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20crashes%20in%20glib%20hangs%20%28not%20exits%29%20program&In-Reply-To=117799f00804210834u33ad16c4g67ef61cef250147a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027594.html">
   <LINK REL="Next"  HREF="027608.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] crashes in glib hangs (not exits) program</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20crashes%20in%20glib%20hangs%20%28not%20exits%29%20program&In-Reply-To=117799f00804210834u33ad16c4g67ef61cef250147a%40mail.gmail.com"
       TITLE="[Mono-dev] crashes in glib hangs (not exits) program">jonpryor at vt.edu
       </A><BR>
    <I>Mon Apr 21 13:30:35 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027594.html">[Mono-dev] crashes in glib hangs (not exits) program
</A></li>
        <LI>Next message: <A HREF="027608.html">[Mono-dev] crashes in glib hangs (not exits) program
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27597">[ date ]</a>
              <a href="thread.html#27597">[ thread ]</a>
              <a href="subject.html#27597">[ subject ]</a>
              <a href="author.html#27597">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2008-04-21 at 16:34 +0100, Alan McGovern wrote:
&gt;<i> &gt;  For some reason, catching the &quot;unmanaged exception&quot; has the correct
</I>&gt;<i> &gt;  behaviour even though it could be just a side effect. Zoltan pointed
</I>&gt;<i> &gt;  out that unmanaged exceptions are not converted to exceptions in mono
</I>&gt;<i> &gt;  even though the windows side seem to do it and recomment using
</I>&gt;<i> &gt;  AppDomain.UnhandleException to log the crash before terminating. I am
</I>&gt;<i> &gt;  not sure how they do it ... since the unmanaged exception could have
</I>&gt;<i> &gt;  corrupted basic data structures so much that even the logging might
</I>&gt;<i> &gt;  fail.
</I>&gt;<i> 
</I>&gt;<i> Could MS.NET be using structured exception handling?
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.microsoft.com/msj/0197/exception/exception.aspx">http://www.microsoft.com/msj/0197/exception/exception.aspx</A>
</I>
Yes, .NET uses SEH around all P/Invoke calls (just as RPC/DCOM/etc. all
use SEH around all remote calls, etc.).

Furthermore, Win32 doesn't have signals, it uses SEH for everything
(e.g. instead of SIGSEGV, there's an SEH exception that's generated
instead).

So all .NET has to do is translate an unmanaged SEH exception into a
managed exception type, and it's Good To Go.

Should the process get sufficiently corrupted that SEH no longer works,
the process is unconditionally aborted (forget where I read that...).

On the whole, Win32 seems far more &quot;exception-ready&quot; than Unix, largely
because it was designed around the concept of exceptions from the
beginning (and because Win32 exceptions aren't a complete match to Unix
signals, iirc exceptions aren't used for SIGHUP, SIGINT, etc...).

 - Jon


</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027594.html">[Mono-dev] crashes in glib hangs (not exits) program
</A></li>
	<LI>Next message: <A HREF="027608.html">[Mono-dev] crashes in glib hangs (not exits) program
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27597">[ date ]</a>
              <a href="thread.html#27597">[ thread ]</a>
              <a href="subject.html#27597">[ subject ]</a>
              <a href="author.html#27597">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
