<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Threading and Winforms on Win32 only
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Threading%20and%20Winforms%20on%20Win32%20only&In-Reply-To=%3C4FD68A22.7030206%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039092.html">
   <LINK REL="Next"  HREF="039062.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Threading and Winforms on Win32 only</H1>
    <B>Rob Wilkens</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Threading%20and%20Winforms%20on%20Win32%20only&In-Reply-To=%3C4FD68A22.7030206%40gmail.com%3E"
       TITLE="[Mono-dev] Threading and Winforms on Win32 only">robwilkens at gmail.com
       </A><BR>
    <I>Tue Jun 12 00:15:30 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039092.html">[Mono-dev] Exception at	System.ServiceModel.Channels.Http.HttpReplyChannel.TryReceiveRequest
</A></li>
        <LI>Next message: <A HREF="039062.html">[Mono-dev] Threading and Winforms on Win32 only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39055">[ date ]</a>
              <a href="thread.html#39055">[ thread ]</a>
              <a href="subject.html#39055">[ subject ]</a>
              <a href="author.html#39055">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm getting the following exception sporadically while testing my sample 
code that is used as a unit test (though i've never had it fail as a 
unit test) both with and without my patch, even with mono 2.10.8 but 
this is only happening on Windows...

System.MemberAccessException: Object is busy and cannot state allow this 
operation [GDI+ status: ObjectBusy]
   at System.Drawing.GDIPlus.CheckStatus (Status status) [0x00000] in 
&lt;filename unknown&gt;:0
   at System.Drawing.Graphics.FillRectangle (System.Drawing.Brush brush, 
Int32 x, Int32 y, Int32 width, Int32 height) [0x00000] in &lt;filename 
unknown&gt;:0
   at System.Drawing.Graphics.FillRectangle (System.Drawing.Brush brush, 
Rectangle rect) [0x00000] in &lt;filename unknown&gt;:0
...all the way back to a WM_PAINT message...

I know this is probably happening because as someone told me recently 
somewhere (I don't know if they were right) in WinForms only one thread 
to control the interface, the rest are background processes......and in 
this sample code, both threads create Windows......

...but this works in microsoft.net
...and it works in X11 (at least with my patch) in mono

Also, while i seem to be able to build mono in cygwin from my
git clone <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">git at github.com</A>:robwilkens/mono
tree but , i seem to have errors when i try to compile from my
git clone <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">git at github.com</A>:mono/mono
tree.  Am I doing something wrong or is cygwin-based windows building 
having issues (i ask because of the question asked on the list in the 
last 24 hours about windows builds).
</PRE>



























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039092.html">[Mono-dev] Exception at	System.ServiceModel.Channels.Http.HttpReplyChannel.TryReceiveRequest
</A></li>
	<LI>Next message: <A HREF="039062.html">[Mono-dev] Threading and Winforms on Win32 only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39055">[ date ]</a>
              <a href="thread.html#39055">[ thread ]</a>
              <a href="subject.html#39055">[ subject ]</a>
              <a href="author.html#39055">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
