<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Threading and Winforms on Win32 only
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Threading%20and%20Winforms%20on%20Win32%20only&In-Reply-To=%3C1339480116149-4649889.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039055.html">
   <LINK REL="Next"  HREF="039063.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Threading and Winforms on Win32 only</H1>
    <B>Stifu</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Threading%20and%20Winforms%20on%20Win32%20only&In-Reply-To=%3C1339480116149-4649889.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] Threading and Winforms on Win32 only">stifu at free.fr
       </A><BR>
    <I>Tue Jun 12 05:48:36 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039055.html">[Mono-dev] Threading and Winforms on Win32 only
</A></li>
        <LI>Next message: <A HREF="039063.html">[Mono-dev] Threading and Winforms on Win32 only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39062">[ date ]</a>
              <a href="thread.html#39062">[ thread ]</a>
              <a href="subject.html#39062">[ subject ]</a>
              <a href="author.html#39062">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>From <A HREF="http://www.mono-project.com/FAQ:_Winforms:">http://www.mono-project.com/FAQ:_Winforms:</A>
</I>
&quot;Mono's implementation of WinForms does not support Forms or Controls being
created on multiple threads. All Forms/Controls must be created on the same
thread.

Note this only applies to creation. You can still write multithreaded
applications that do work in other threads and modify already created
controls using Control.Invoke.&quot;


Robert Wilkens wrote
&gt;<i> 
</I>&gt;<i> I'm getting the following exception sporadically while testing my sample 
</I>&gt;<i> code that is used as a unit test (though i've never had it fail as a 
</I>&gt;<i> unit test) both with and without my patch, even with mono 2.10.8 but 
</I>&gt;<i> this is only happening on Windows...
</I>&gt;<i> 
</I>&gt;<i> System.MemberAccessException: Object is busy and cannot state allow this 
</I>&gt;<i> operation [GDI+ status: ObjectBusy]
</I>&gt;<i>    at System.Drawing.GDIPlus.CheckStatus (Status status) [0x00000] in 
</I>&gt;<i> &lt;filename unknown&gt;:0
</I>&gt;<i>    at System.Drawing.Graphics.FillRectangle (System.Drawing.Brush brush, 
</I>&gt;<i> Int32 x, Int32 y, Int32 width, Int32 height) [0x00000] in &lt;filename 
</I>&gt;<i> unknown&gt;:0
</I>&gt;<i>    at System.Drawing.Graphics.FillRectangle (System.Drawing.Brush brush, 
</I>&gt;<i> Rectangle rect) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i> ...all the way back to a WM_PAINT message...
</I>&gt;<i> 
</I>&gt;<i> I know this is probably happening because as someone told me recently 
</I>&gt;<i> somewhere (I don't know if they were right) in WinForms only one thread 
</I>&gt;<i> to control the interface, the rest are background processes......and in 
</I>&gt;<i> this sample code, both threads create Windows......
</I>&gt;<i> 
</I>&gt;<i> ...but this works in microsoft.net
</I>&gt;<i> ...and it works in X11 (at least with my patch) in mono
</I>&gt;<i> 
</I>&gt;<i> Also, while i seem to be able to build mono in cygwin from my
</I>&gt;<i> git clone git@:robwilkens/mono
</I>&gt;<i> tree but , i seem to have errors when i try to compile from my
</I>&gt;<i> git clone git@:mono/mono
</I>&gt;<i> tree.  Am I doing something wrong or is cygwin-based windows building 
</I>&gt;<i> having issues (i ask because of the question asked on the list in the 
</I>&gt;<i> last 24 hours about windows builds).
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at .ximian</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i> 
</I>

--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Threading-and-Winforms-on-Win32-only-tp4649882p4649889.html">http://mono.1490590.n4.nabble.com/Threading-and-Winforms-on-Win32-only-tp4649882p4649889.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039055.html">[Mono-dev] Threading and Winforms on Win32 only
</A></li>
	<LI>Next message: <A HREF="039063.html">[Mono-dev] Threading and Winforms on Win32 only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39062">[ date ]</a>
              <a href="thread.html#39062">[ thread ]</a>
              <a href="subject.html#39062">[ subject ]</a>
              <a href="author.html#39062">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
