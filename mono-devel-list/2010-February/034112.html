<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Custom Uri Parsing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Custom%20Uri%20Parsing&In-Reply-To=117799f01002111545s443b4cc5m5d4fdd92d7851807%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034098.html">
   <LINK REL="Next"  HREF="034146.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Custom Uri Parsing</H1>
    <B>Matt Dargavel</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Custom%20Uri%20Parsing&In-Reply-To=117799f01002111545s443b4cc5m5d4fdd92d7851807%40mail.gmail.com"
       TITLE="[Mono-dev] Custom Uri Parsing">matt at shout-telecoms.com
       </A><BR>
    <I>Fri Feb 12 13:52:26 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="034098.html">[Mono-dev] Custom Uri Parsing
</A></li>
        <LI>Next message: <A HREF="034146.html">[Mono-dev] Custom Uri Parsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34112">[ date ]</a>
              <a href="thread.html#34112">[ thread ]</a>
              <a href="subject.html#34112">[ subject ]</a>
              <a href="author.html#34112">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the info Alan.

 

At the moment I've put together a very quick and dirty version that uses
IsPredefinedScheme to decide whether to use the existing parsing code or
use the registered Parser class when the Uri is first created (and
parsed).

 

I was wondering whether something along the lines of moving the existing
parsing routine in to DefaultUriParser and use this for the predefined
schemes might be possible.  You might then be able to replace this with
the proper Parser classes for the built in schemes one by one.  This
would allow people to write parsers for unsupported schemes, and would
hopefully pass the existing tests.

 

Anyway, I'll look in to it a bit more and see if I can come up with a
more definite suggestion.

 

                Cheers,

 

                                Matt.

 

 

From: Alan McGovern [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">alan.mcgovern at gmail.com</A>] 
Sent: 11 February 2010 11:45 PM
To: Miguel de Icaza
Cc: Matt Dargavel; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-dev] Custom Uri Parsing

 

Hey,

The main reason why I didn't actually do any work on this at the time is
that it would probably take 1 man month to do the rewrite, pass the
existing tests and write more tests for the new behaviours and I didn't
have a month free to do it ;) Proper support for the new parser API is
required to properly support System.IO.Packaging, so I'd be willing to
offer any advice if you want to take on the task.

The biggest problem (as I saw it at the time) is that this is an all or
nothing kind of patch. It might be impossible to do this one uri scheme
at a time without making things ridiculously complicated internally.
While the existing code will be useful as a guide, you will end up
chopping it up into tiny pieces and moving it around into the different
parser subclasses.

Alan.

p.s. The above should be mostly accurate, but the last time I looked at
this was when I sent the original email ;)

On Thu, Feb 11, 2010 at 5:09 AM, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at novell.com</A>&gt;
wrote:

Hello,

	 

	Some searching also threw up this post to the list back in
October 2008:
<A HREF="http://www.mail-archive.com/mono-devel-list@lists.ximian.com/msg18617.ht">http://www.mail-archive.com/mono-devel-list@lists.ximian.com/msg18617.ht</A>
ml .  I've looked in to the Mono implementation in svn, and it still
appears that most of the Uri class decodes specific Uri content itself
rather than delegating to Uri parsers.

 

I do not believe we ever moved to that scheme of Uri parsing.





I was wondering if anyone knew if the post above was ever followed up,
or whether the suggestion wasn't implemented for some reason?  I guess
this should probably be filed as a bug, as the functionality was added
in .NET 2?  If you'd welcome a patch I could probably submit something
based on Alan's suggestion.

 

I would love to see a patch based on Alan's patch.

 

It should be simpler these days since Mono trunk has dropped support for
1.0 compatibility


_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100212/c599a132/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100212/c599a132/attachment.html</A> 
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034098.html">[Mono-dev] Custom Uri Parsing
</A></li>
	<LI>Next message: <A HREF="034146.html">[Mono-dev] Custom Uri Parsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34112">[ date ]</a>
              <a href="thread.html#34112">[ thread ]</a>
              <a href="subject.html#34112">[ subject ]</a>
              <a href="author.html#34112">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
