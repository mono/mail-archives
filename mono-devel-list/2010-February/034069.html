<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev]  Mono reflection seems a bit broken.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Mono%20reflection%20seems%20a%20bit%20broken.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034066.html">
   <LINK REL="Next"  HREF="034070.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev]  Mono reflection seems a bit broken.</H1>
    <B>PFJ</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20Mono%20reflection%20seems%20a%20bit%20broken.&In-Reply-To="
       TITLE="[Mono-dev]  Mono reflection seems a bit broken.">pjohnson1 at uclan.ac.uk
       </A><BR>
    <I>Tue Feb  9 06:51:46 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="034066.html">[Mono-dev] [Bug 575813] FileStream doesn't handle errors on Close (disk full, generic error, etc.)
</A></li>
        <LI>Next message: <A HREF="034070.html">[Mono-dev] Mono reflection seems a bit broken.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34069">[ date ]</a>
              <a href="thread.html#34069">[ thread ]</a>
              <a href="subject.html#34069">[ subject ]</a>
              <a href="author.html#34069">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

This code works fine under .NET 3.5 but dies miserably with Mono 2.6.1

using System;
using System.Reflection;
using System.IO;
using System.Drawing;
using System.Windows.Forms;
using System.Xml;
using System.Resources;

amespace molarity
{
	/// &lt;summary&gt;
	/// Description of periodic.
	/// &lt;/summary&gt;
	public partial class periodic : Form
	{
		public periodic()
		{
			//
			// The InitializeComponent() call is required for Windows Forms designer
support.
			//
			InitializeComponent();
			
			//
			// TODO: Add constructor code after the InitializeComponent() call.
			//
			
		}

		/* load the element from the xml file using xmlhander */

		void displaytheelement(object sender, EventArgs e)
		{
			int m = ((Label)sender).TabIndex - 1;
			xmlhandler xml = new xmlhandler();
			xml.dotheread(m);
			es.Text = xml.element_structure;
			atmass.Text = xml.element_weight.ToString();
			atno.Text = xml.element_number.ToString();
			name.Text = xml.element_name;
			symbol.Text = xml.element_symbol;
			Assembly executingAssembly = Assembly.GetExecutingAssembly();
            try
            {
                Stream resourceStream =
executingAssembly.GetManifestResourceStream(xml.picname);
                pictureBox1.Image = new Bitmap(resourceStream);
            }
            catch (System.ArgumentException)
            {
                MessageBox.Show(&quot;Unable to find element picture&quot;, &quot;Picture
not found&quot;, MessageBoxButtons.OK);
            }
		}
		
	}
}

The resources are set to be embedded into the binary. I run the executable
this comes from and it does what it should (the displaytheelement method
gets the information for the data (stored in xmlhandler xml), then uses
reflector to grab the embedded image and display in pictureBox1. If the
picture isn't found, the message box appears but the application doesn't
fall over dead.

Under Mono 2.6.1, it doesn't matter which element I click, I always get the
message box and the application quits with no throwback. Under .NET, I click
on the element, the information appears, the picture appears and if the
picture isn't there, the message box appears, but then the application
continues.

Is the code wrong or am I?

I can upload the full source if it will help identify a bug.

TTFN

Paul
-- 
View this message in context: <A HREF="http://old.nabble.com/Mono-reflection-seems-a-bit-broken.-tp27514082p27514082.html">http://old.nabble.com/Mono-reflection-seems-a-bit-broken.-tp27514082p27514082.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034066.html">[Mono-dev] [Bug 575813] FileStream doesn't handle errors on Close (disk full, generic error, etc.)
</A></li>
	<LI>Next message: <A HREF="034070.html">[Mono-dev] Mono reflection seems a bit broken.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34069">[ date ]</a>
              <a href="thread.html#34069">[ thread ]</a>
              <a href="subject.html#34069">[ subject ]</a>
              <a href="author.html#34069">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
