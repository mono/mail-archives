<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20MWF%3A%20Don%27t%20dispose%20objects%20that%20are%20not%20owned&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015443.html">
   <LINK REL="Next"  HREF="015445.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20MWF%3A%20Don%27t%20dispose%20objects%20that%20are%20not%20owned&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned">kornelpal at hotmail.com
       </A><BR>
    <I>Sun Oct 23 10:55:55 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015443.html">[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
</A></li>
        <LI>Next message: <A HREF="015445.html">[Mono-dev] SVN case conflict
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15444">[ date ]</a>
              <a href="thread.html#15444">[ thread ]</a>
              <a href="subject.html#15444">[ subject ]</a>
              <a href="author.html#15444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

OK. I have plans on some modifications to Icon class as it lacks of
important functionalities. You are right that using ToBitmap() is much
faster currently so it's OK to retain the current solution until
Graphics.DrawIcon will work as it should.

It it OK to add HideSystray();  to NotifyIcon.Dispose?

Korn&#233;l

----- Original Message -----
From: &quot;Peter Dennis Bartok&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">peter at novonyx.com</A>&gt;
To: &quot;Korn&#233;l P&#225;l&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">kornelpal at hotmail.com</A>&gt;; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Sent: Sunday, October 23, 2005 4:43 PM
Subject: Re: [Mono-dev] [PATCH] MWF: Don't dispose objects that are not
owned


&gt;<i> Kornel,
</I>&gt;<i>
</I>&gt;<i> The changes to not call Dispose are ok. The NotifyIcon patch is not ok to
</I>&gt;<i> check in, I want it to use ToBitmap() once instead of every refresh. It
</I>&gt;<i> doesn't matter if ideologically it should use DrawIcon, fact is that we'd
</I>&gt;<i> be
</I>&gt;<i> creating and throwing away bitmaps at considerable cost on every refresh
</I>&gt;<i> if
</I>&gt;<i> we use it, so it needs to stay the way it is today.
</I>&gt;<i>
</I>&gt;<i> Peter
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: &quot;Korn&#233;l P&#225;l&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">kornelpal at hotmail.com</A>&gt;
</I>&gt;<i> To: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i> Date: 23 October, 2005 05:01
</I>&gt;<i> Subject: [Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Objects should not dispose objects that were not created by them as they
</I>&gt;&gt;<i>may
</I>&gt;&gt;<i>be needed by other objects.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This patch fixes the above described problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>In addition NotifyIcon assumes that Graphics.DrawIcon uses Icon.ToBitmap
</I>&gt;&gt;<i>and
</I>&gt;&gt;<i>Graphics.DrawImage that should not be assumed as DrawIcon should be
</I>&gt;&gt;<i>modified
</I>&gt;&gt;<i>to have better performance so I modified the code to use
</I>&gt;&gt;<i>Graphics.DrawIcon.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>And added HideSystray to NotifyIcon.Dispose as at least on Windows it is
</I>&gt;&gt;<i>required. Otherwise notify icon is displayed until you move mouse over
</I>&gt;&gt;<i>even
</I>&gt;&gt;<i>when it's host process already terminated. Note that I expecienced that
</I>&gt;&gt;<i>notify icon is not removed on Windows but it seems to be a bug in
</I>&gt;&gt;<i>XplatUI.SystrayRemove rather than in NotifyIcon.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Please review and approve the patch.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Korn&#233;l
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015443.html">[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
</A></li>
	<LI>Next message: <A HREF="015445.html">[Mono-dev] SVN case conflict
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15444">[ date ]</a>
              <a href="thread.html#15444">[ thread ]</a>
              <a href="subject.html#15444">[ subject ]</a>
              <a href="author.html#15444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
