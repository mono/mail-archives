<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Debugging Busted CIL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Debugging%20Busted%20CIL&In-Reply-To=20051004151953.GU10115%40debian.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015168.html">
   <LINK REL="Next"  HREF="015173.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Debugging Busted CIL</H1>
    <B>Jim Purbrick</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Debugging%20Busted%20CIL&In-Reply-To=20051004151953.GU10115%40debian.org"
       TITLE="[Mono-dev] Debugging Busted CIL">jimpurbrick at yahoo.co.uk
       </A><BR>
    <I>Tue Oct  4 11:44:54 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015168.html">[Mono-dev] Debugging Busted CIL
</A></li>
        <LI>Next message: <A HREF="015173.html">[Mono-dev] Debugging Busted CIL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15170">[ date ]</a>
              <a href="thread.html#15170">[ thread ]</a>
              <a href="subject.html#15170">[ subject ]</a>
              <a href="author.html#15170">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> &gt; Looks like I can store a Managed Pointer in a
</I>&gt;<i> &gt; local, but not a field :-(
</I>&gt;<i> 
</I>&gt;<i> Right, storing in a field would have both security
</I>&gt;<i> and performance effects in the GC, so it's not 
</I>&gt;<i> allowed.
</I>
OK, to solve that problem it looks as though the best
approach is to make sure the value of the field is
saved when I'm saving the stack and then inject code
which pushes the (new) address of the field when I'm
restoring the stack, which is a faff, but not
impossible.

I think I've found the cause of my current problems
though with peverify 2 (which seems much better than
1.1 BTW). It looks as though the normal code pushes an
LLVector on to the stack while the restore code
unboxes a boxed LLVector which leaves a Managed
Pointer to an LLVector on the stack. Is there an easy
way to go from the pointer to a value?

Thanks for all your help,

Cheers,

Jim.


		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos <A HREF="http://uk.photos.yahoo.com">http://uk.photos.yahoo.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015168.html">[Mono-dev] Debugging Busted CIL
</A></li>
	<LI>Next message: <A HREF="015173.html">[Mono-dev] Debugging Busted CIL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15170">[ date ]</a>
              <a href="thread.html#15170">[ thread ]</a>
              <a href="subject.html#15170">[ subject ]</a>
              <a href="author.html#15170">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
