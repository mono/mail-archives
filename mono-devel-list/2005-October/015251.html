<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Asp.net thread abort issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Asp.net%20thread%20abort%20issue&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015304.html">
   <LINK REL="Next"  HREF="015252.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Asp.net thread abort issue</H1>
    <B>Joshua Tauberer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Asp.net%20thread%20abort%20issue&In-Reply-To="
       TITLE="[Mono-dev] Asp.net thread abort issue">tauberer at for.net
       </A><BR>
    <I>Sat Oct  8 10:53:41 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015304.html">[Mono-dev] Question about the build system
</A></li>
        <LI>Next message: <A HREF="015252.html">[Mono-dev] (Nevermind) Asp.net thread abort issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15251">[ date ]</a>
              <a href="thread.html#15251">[ thread ]</a>
              <a href="subject.html#15251">[ subject ]</a>
              <a href="author.html#15251">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gonzalo (and anyone else that might have some ideas, but probably Gonzalo),

I'm experiencing something funny on my website.  I think it started 
after upgrading to the latest RPMs (FC4).  It goes something like this:

A request is made for page X.  During the processing of the page (which 
is handled by a custom HttpHandler), HttpResponse.Redirect is called to 
send the user to page Y.  (This is properly calling Thread.Abort, 
issuing a ThreadAbortException, and the request nicely comes to an end.)

The user then requests page Y.  Deep in the processing of this page 
(custom HttpHandler to System.Xml.Xslt which uses extension functions 
which calls back to my code), a ThreadAbortException is mysteriously 
being thrown.  The result is the request ends with no content being sent 
to the user.  The stack trace shows the exception being thrown in the 
middle of one of my methods, which for sure doesn't throw that exception 
and doesn't call Response.Redirect.

I don't know how Thread.Abort works, but my guess is that some flag is 
being set the first time Thread.Abort is called within 
Response.Redirect, and that's leading to Thread.Abort being thrown a 
second time later on.  But I can only imagine this happening if in the 
ASP.NET hosting area of things a worker thread is catching the 
ThreadAbortException, tossing it away, and then handling another request.

I'll keep poking around to see if I can figure this out, but you might 
already know where to look.

TIA.

-- 
- Joshua Tauberer

<A HREF="http://taubz.for.net">http://taubz.for.net</A>

** Nothing Unreal Exists **



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015304.html">[Mono-dev] Question about the build system
</A></li>
	<LI>Next message: <A HREF="015252.html">[Mono-dev] (Nevermind) Asp.net thread abort issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15251">[ date ]</a>
              <a href="thread.html#15251">[ thread ]</a>
              <a href="subject.html#15251">[ subject ]</a>
              <a href="author.html#15251">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
