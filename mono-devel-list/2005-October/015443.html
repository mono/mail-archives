<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20MWF%3A%20Don%27t%20dispose%20objects%20that%20are%20not%20owned&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015440.html">
   <LINK REL="Next"  HREF="015444.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned</H1>
    <B>Peter Dennis Bartok</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20MWF%3A%20Don%27t%20dispose%20objects%20that%20are%20not%20owned&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned">peter at novonyx.com
       </A><BR>
    <I>Sun Oct 23 10:43:39 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015440.html">[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
</A></li>
        <LI>Next message: <A HREF="015444.html">[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15443">[ date ]</a>
              <a href="thread.html#15443">[ thread ]</a>
              <a href="subject.html#15443">[ subject ]</a>
              <a href="author.html#15443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kornel,

The changes to not call Dispose are ok. The NotifyIcon patch is not ok to 
check in, I want it to use ToBitmap() once instead of every refresh. It 
doesn't matter if ideologically it should use DrawIcon, fact is that we'd be 
creating and throwing away bitmaps at considerable cost on every refresh if 
we use it, so it needs to stay the way it is today.

Peter

-----Original Message-----
From: &quot;Korn&#233;l P&#225;l&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">kornelpal at hotmail.com</A>&gt;
To: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Date: 23 October, 2005 05:01
Subject: [Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned


&gt;<i>Hi,
</I>&gt;<i>
</I>&gt;<i>Objects should not dispose objects that were not created by them as they 
</I>&gt;<i>may
</I>&gt;<i>be needed by other objects.
</I>&gt;<i>
</I>&gt;<i>This patch fixes the above described problem.
</I>&gt;<i>
</I>&gt;<i>In addition NotifyIcon assumes that Graphics.DrawIcon uses Icon.ToBitmap 
</I>&gt;<i>and
</I>&gt;<i>Graphics.DrawImage that should not be assumed as DrawIcon should be 
</I>&gt;<i>modified
</I>&gt;<i>to have better performance so I modified the code to use Graphics.DrawIcon.
</I>&gt;<i>
</I>&gt;<i>And added HideSystray to NotifyIcon.Dispose as at least on Windows it is
</I>&gt;<i>required. Otherwise notify icon is displayed until you move mouse over even
</I>&gt;<i>when it's host process already terminated. Note that I expecienced that
</I>&gt;<i>notify icon is not removed on Windows but it seems to be a bug in
</I>&gt;<i>XplatUI.SystrayRemove rather than in NotifyIcon.
</I>&gt;<i>
</I>&gt;<i>Please review and approve the patch.
</I>&gt;<i>
</I>&gt;<i>Korn&#233;l
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015440.html">[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
</A></li>
	<LI>Next message: <A HREF="015444.html">[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15443">[ date ]</a>
              <a href="thread.html#15443">[ thread ]</a>
              <a href="subject.html#15443">[ subject ]</a>
              <a href="author.html#15443">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
