<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Remothing through HTTPS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Remothing%20through%20HTTPS&In-Reply-To=1129058997.15326.175.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015314.html">
   <LINK REL="Next"  HREF="015272.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Remothing through HTTPS</H1>
    <B>Yngve Zackrisson</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Remothing%20through%20HTTPS&In-Reply-To=1129058997.15326.175.camel%40localhost.localdomain"
       TITLE="[Mono-dev] Remothing through HTTPS">yngve.zackrisson at mobila-kontoret.se
       </A><BR>
    <I>Wed Oct 12 05:24:52 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015314.html">[Mono-dev] Remothing through HTTPS
</A></li>
        <LI>Next message: <A HREF="015272.html">[Mono-dev] Problem with main menu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15322">[ date ]</a>
              <a href="thread.html#15322">[ thread ]</a>
              <a href="subject.html#15322">[ subject ]</a>
              <a href="author.html#15322">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2005-10-11 at 21:29, Sebastien Pouliot wrote:
&gt;<i> Hello Yngve,
</I>&gt;<i> 
</I>&gt;<i> On Mon, 2005-10-10 at 11:17 +0200, Yngve Zackrisson wrote:
</I>&gt;<i> &gt; Hallo Sebastien,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Great news!
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have got HTTPS working through .NET Remoting 
</I>&gt;<i> &gt; with Win32 MS .NET on the client side 
</I>&gt;<i> &gt; and Linux Mono on the server side.
</I>&gt;<i> 
</I>&gt;<i> Indeed! :-)
</I>&gt;<i> 
</I>&gt;<i> &gt; The changes I had to do in Mono was in 
</I>&gt;<i> &gt; the library  System.Runtime.Remoting.Channels.Http and 
</I>&gt;<i> &gt; in the source HttpServer.cs.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Everything seems to work fine now, 
</I>&gt;<i> &gt; even upload of large files. 
</I>&gt;<i> 
</I>&gt;<i> Does this includes your certificate chaining problem ?
</I>&gt;<i> 
</I>
No :-(.

During my run I get the error code #-2146762486 on the console 
(CERT_E_CHAINING problem). (The code is pretty much the same 
as in your solution for mutual authentication).
I am (pretty) sure I have added the root certificate (cacert17.cer) 
to the Mono machine Trust store.
It probably works because the return value is hard coded to true :-|.



(
Currently I have problem to execute programs like certmgr and mono.
I get: 

$ mono --debug --trace=none Program.exe
$ 
$ ** ERROR **:file handles.c: line 546 (_wapi_lookup_handle): assertion
failed: (shared_handle_data-&gt;type == type)
$ aborting...
$ Aborted
$ 

This does not happen all the time but only sometimes.

I searched the internet for this error message an it seems to 
be a known bug in some build scripts (for Mono 1.1.9.1).
I think I read somewhere someone writing that 
this &quot;has disappeared&quot; in Mono 1.1.9.2.
FYI. I run Linux Fedora Core 3 with Mono 1.1.9.1 on my server.
)



&gt;<i> &gt; Thank You very much for your support.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If you want the solution I send you the source.
</I>&gt;<i> 
</I>&gt;<i> Yes! Please send to the mailing-list any changes you had to made in the
</I>&gt;<i> class library to make this happen.
</I>&gt;<i> 
</I>
I attached the code for HttpServer.cs. 
My changed code is surrounded by YZAC-START: and :YZAC-END.
The solution is not generalized and requires the .p12 file 
to be located in the actual bin directory and 
be named 'server17-cert.p12' with the password 'service'.
(Don't bother about the debug messages passed to the console).

Is it possible to get this feature into the Mono standard?.
Preferable we would like this to be configurable through 
the remoting's channel properties (with properties like: 
bool isSecure, X509Certificate certificate, 
RSA privatekey(, string password, ...))
 - i. e. similar to what exists i XSP.
Could You check with those working with 
the Remoting part of Mono if this is possible?.



Regards



Yngve Zackrisson


-------------- next part --------------
A non-text attachment was scrubbed...
Name: HttpServer.cs
Type: text/x-csharp
Size: 31492 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051012/dd031047/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051012/dd031047/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015314.html">[Mono-dev] Remothing through HTTPS
</A></li>
	<LI>Next message: <A HREF="015272.html">[Mono-dev] Problem with main menu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15322">[ date ]</a>
              <a href="thread.html#15322">[ thread ]</a>
              <a href="subject.html#15322">[ subject ]</a>
              <a href="author.html#15322">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
