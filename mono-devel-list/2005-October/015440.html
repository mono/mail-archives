<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20MWF%3A%20Don%27t%20dispose%20objects%20that%20are%20not%20owned&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015442.html">
   <LINK REL="Next"  HREF="015443.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20MWF%3A%20Don%27t%20dispose%20objects%20that%20are%20not%20owned&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned">kornelpal at hotmail.com
       </A><BR>
    <I>Sun Oct 23 07:00:25 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015442.html">[Mono-dev] PInvoke ques
</A></li>
        <LI>Next message: <A HREF="015443.html">[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15440">[ date ]</a>
              <a href="thread.html#15440">[ thread ]</a>
              <a href="subject.html#15440">[ subject ]</a>
              <a href="author.html#15440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Objects should not dispose objects that were not created by them as they may
be needed by other objects.

This patch fixes the above described problem.

In addition NotifyIcon assumes that Graphics.DrawIcon uses Icon.ToBitmap and
Graphics.DrawImage that should not be assumed as DrawIcon should be modified
to have better performance so I modified the code to use Graphics.DrawIcon.

And added HideSystray to NotifyIcon.Dispose as at least on Windows it is
required. Otherwise notify icon is displayed until you move mouse over even
when it's host process already terminated. Note that I expecienced that
notify icon is not removed on Windows but it seems to be a bug in
XplatUI.SystrayRemove rather than in NotifyIcon.

Please review and approve the patch.

Korn&#233;l
-------------- next part --------------
A non-text attachment was scrubbed...
Name: FixMWFDispose.diff
Type: application/octet-stream
Size: 3706 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051023/bb899e42/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051023/bb899e42/attachment.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015442.html">[Mono-dev] PInvoke ques
</A></li>
	<LI>Next message: <A HREF="015443.html">[Mono-dev] [PATCH] MWF: Don't dispose objects that are not owned
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15440">[ date ]</a>
              <a href="thread.html#15440">[ thread ]</a>
              <a href="subject.html#15440">[ subject ]</a>
              <a href="author.html#15440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
