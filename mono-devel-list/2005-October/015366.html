<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] patch for bug#76213 : DataTable.Compute
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20patch%20for%20bug%2376213%20%3A%20DataTable.Compute&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015365.html">
   <LINK REL="Next"  HREF="015371.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] patch for bug#76213 : DataTable.Compute</H1>
    <B>T Senganal</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20patch%20for%20bug%2376213%20%3A%20DataTable.Compute&In-Reply-To="
       TITLE="[Mono-dev] patch for bug#76213 : DataTable.Compute">tsenganal at novell.com
       </A><BR>
    <I>Mon Oct 17 11:29:55 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015365.html">[Mono-dev] Mono GMCS error when building out of SharpDevelop
</A></li>
        <LI>Next message: <A HREF="015371.html">[Mono-dev] Which Mono IDE do you use?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15366">[ date ]</a>
              <a href="thread.html#15366">[ thread ]</a>
              <a href="subject.html#15366">[ subject ]</a>
              <a href="author.html#15366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi 

Can someone review the patch attached to see if its appropriate for bug
#76213.. 

the bug is essentially this : 
when a xml data (without any schema info) is read into a dataset and an
aggregate function is applied on the data (DataTable.Compute), it
returns DBNull as the result ..
The issue is that in the absence of any schema info , all the data are
assumed as strings, and, since aggregate functions works only on numbers
, we  returns a DBNull is such cases .. Ideally, we shud check if the
string can be converted to a number.. 

msdotnet behavior is something like this: 
1. Only Max and Min works on such data .. Others like SUM, AVG etc
throw an exception 
2. Max and Min works only if the data can be converted to integers (Not
sure as to why only integers are supported) 
3. If the data is a float/double, an exception is raised only if the
result of the function is a float .. as in , if i have 1,2,5,3 .. then
everything works fine .. but 1.5,2,3  or  1,2,3.5 throws an exception
..This definitely is a bug..

for the fix : do we assume that we will support max and min functions
for integers or do we also support  floats?
i feel the msdotnet behavior is most likely a bug and dont see any
reason why floats shudnt be supported.. 

Also, not sure why the other aggregate functions dont support this
conversion .. Not sure if its a bug or a 'feature' in msdotnet.. 

pls advise.. 

Cheers
Senga
-------------- next part --------------
A non-text attachment was scrubbed...
Name: patch_76213
Type: application/octet-stream
Size: 966 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051017/eee97768/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20051017/eee97768/attachment.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015365.html">[Mono-dev] Mono GMCS error when building out of SharpDevelop
</A></li>
	<LI>Next message: <A HREF="015371.html">[Mono-dev] Which Mono IDE do you use?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15366">[ date ]</a>
              <a href="thread.html#15366">[ thread ]</a>
              <a href="subject.html#15366">[ subject ]</a>
              <a href="author.html#15366">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
