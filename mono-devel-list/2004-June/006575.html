<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Embedding API changes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Embedding%20API%20changes&In-Reply-To=1087767579.2462.151.camel%40beta.newton.cx">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006566.html">
   <LINK REL="Next"  HREF="006560.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Embedding API changes</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Embedding%20API%20changes&In-Reply-To=1087767579.2462.151.camel%40beta.newton.cx"
       TITLE="[Mono-devel-list] Embedding API changes">lupus at ximian.com
       </A><BR>
    <I>Mon Jun 21 11:12:45 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="006566.html">[Mono-devel-list] Embedding API changes
</A></li>
        <LI>Next message: <A HREF="006560.html">[Mono-devel-list] [patch]Patch DllNotFoundException triggered for missing unmanaged  libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6575">[ date ]</a>
              <a href="thread.html#6575">[ thread ]</a>
              <a href="subject.html#6575">[ subject ]</a>
              <a href="author.html#6575">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/20/04 Peter Williams wrote:
&gt;<i> It looks like there are a few things relating to MonoVTables:
</I>&gt;<i> 
</I>&gt;<i> * IN metadata/object.h there are #defines of mono_object_class and
</I>&gt;<i> mono_object_domain that look like
</I>&gt;<i> 
</I>&gt;<i> (((MonoObject*)(obj))-&gt;vtable-&gt;klass)
</I>
Yes, I'll remove those: you're now supposed to use:
	mono_object_get_domain (obj)
and
	mono_object_get_class (obj)

&gt;<i> MonoVTable is now opaque so I don't think the second dereference will
</I>&gt;<i> work. (Haven't tested it but seems pretty clear-cut.)
</I>&gt;<i> 
</I>&gt;<i> * In general, there don't seem to be any accessors for MonoVTable
</I>&gt;<i> pointers; I ran into this trying to compile debugger/wrapper/wrapper.c
</I>
That is a pathological case of the debugger accessing data it should not
access. Martin committed a fix already, I'll move the function to the
debugger headers so people won't use it.
The only interesting data users may want to know about MonoVTable is
domain and klass, but they already have access to that info since they
either created the vtable themselves from a domain and a klass, or
they got the vtable from an object and they can use the above functions
to get the info from the object itself.

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006566.html">[Mono-devel-list] Embedding API changes
</A></li>
	<LI>Next message: <A HREF="006560.html">[Mono-devel-list] [patch]Patch DllNotFoundException triggered for missing unmanaged  libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6575">[ date ]</a>
              <a href="thread.html#6575">[ thread ]</a>
              <a href="subject.html#6575">[ subject ]</a>
              <a href="author.html#6575">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
