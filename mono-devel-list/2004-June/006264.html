<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Threading, NPTL, libgc (beta2)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Threading%2C%20NPTL%2C%20libgc%20%28beta2%29&In-Reply-To=1086412945.4044.2053.camel%40erandi.boston.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006232.html">
   <LINK REL="Next"  HREF="006285.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Threading, NPTL, libgc (beta2)</H1>
    <B>Mike Morano</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Threading%2C%20NPTL%2C%20libgc%20%28beta2%29&In-Reply-To=1086412945.4044.2053.camel%40erandi.boston.ximian.com"
       TITLE="[Mono-devel-list] Threading, NPTL, libgc (beta2)">mmorano at mikeandwan.us
       </A><BR>
    <I>Sun Jun  6 20:08:27 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="006232.html">[Mono-devel-list] Threading, NPTL, libgc (beta2)
</A></li>
        <LI>Next message: <A HREF="006285.html">[Mono-devel-list] Threading, NPTL, libgc (beta2)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6264">[ date ]</a>
              <a href="thread.html#6264">[ thread ]</a>
              <a href="subject.html#6264">[ subject ]</a>
              <a href="author.html#6264">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here's a quick update:

    The problem is expressed if I start the XSP test site, and continue to 
refresh index.aspx.  It typically takes 6 - 12 requests before it hangs.  I 
also tried another test page that I created, only containing a single image, 
and the same thing occurred.

    I've been playing around to see if there is anything else I can do to get 
a little more info for you guys.  I tried following lupus' gdb commands, but 
didn't get anything useful (posted the output below for completeness).  I 
also tried modifying XSP (XSPWorkerRequest.cs) to print out some items, like 
the request protocol, path, and verb.  When running the site with these 
modifications, and tracing turned on for xsp, I noticed some of the 
following:

. . . . . . . ENTER: Mono.ASPNET.XSPWorkerRequest:ReadInputByte ()
(this:PROTOCOL: HTTP/1.0
PATH: /
VERB: GET
0x87167b8[Mono.ASPNET.XSPWorkerRequest b5b1e127], )
. . . . . . . LEAVE: Mono.ASPNET.XSPWorkerRequest:ReadInputByte ()result=113

I don't know if this is interesting, and/or expected behavior, but my 
Console.WriteLines are done in the middle of the trace messaging.  If there 
are further things you would like me to try to help you out, just let me 
know.


here's the list of 2 mono processes prior to entering gdb:

mmorano   8769  8767  0 20:01 pts/0    00:00:00 
mono /home/mmorano/xsp-0.14/serv

mmorano   8770  8769  0 20:01 ?        00:00:00 
mono /home/mmorano/xsp-0.14/serv


Here is the gdb session:

GNU gdb 6.0
Copyright 2003 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type &quot;show copying&quot; to see the conditions.
There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.
This GDB was configured as &quot;i686-pc-linux-gnu&quot;...Using host libthread_db 
library &quot;/lib/libthread_db.so.1&quot;.

Attaching to program: /usr/local/bin/mono, process 8770
Reading symbols from /usr/lib/libgthread-2.0.so.0...done.
Loaded symbols for /usr/lib/libgthread-2.0.so.0
Reading symbols from /usr/lib/libgmodule-2.0.so.0...done.
Loaded symbols for /usr/lib/libgmodule-2.0.so.0
Reading symbols from /lib/libdl.so.2...done.
Loaded symbols for /lib/libdl.so.2
Reading symbols from /usr/lib/libglib-2.0.so.0...done.
Loaded symbols for /usr/lib/libglib-2.0.so.0
Reading symbols from /usr/lib/libicui18n.so.26...done.
Loaded symbols for /usr/lib/libicui18n.so.26
Reading symbols from /usr/lib/libicuuc.so.26...done.
Loaded symbols for /usr/lib/libicuuc.so.26
Reading symbols from /usr/lib/libicudata.so.26...done.
Loaded symbols for /usr/lib/libicudata.so.26
Reading symbols from /lib/libnsl.so.1...done.
Loaded symbols for /lib/libnsl.so.1
Reading symbols from /lib/libpthread.so.0...done.
Loaded symbols for /lib/libpthread.so.0
Reading symbols from /lib/libm.so.6...done.
Loaded symbols for /lib/libm.so.6
Reading symbols from /lib/librt.so.1...done.
Loaded symbols for /lib/librt.so.1
Reading symbols from /lib/libc.so.6...done.
Loaded symbols for /lib/libc.so.6
Reading symbols from /lib/ld-linux.so.2...done.
Loaded symbols for /lib/ld-linux.so.2
Reading symbols 
from /usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.2/libstdc++.so.5...
done.
Loaded symbols for /usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.2/libstdc++.so.5
Reading symbols from /usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.2/libgcc_s.so.1...
done.
Loaded symbols for /usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.2/libgcc_s.so.1
Reading symbols from /lib/libnss_compat.so.2...done.
Loaded symbols for /lib/libnss_compat.so.2
Reading symbols from /lib/libnss_nis.so.2...done.
Loaded symbols for /lib/libnss_nis.so.2
Reading symbols from /lib/libnss_files.so.2...done.
Loaded symbols for /lib/libnss_files.so.2
0xffffe410 in ?? ()
(gdb) thread apply all bt
(gdb)

I was never able to get any other output for &quot;thread apply all bt&quot;, regardless 
of the mono process inspected.

Please let me know if there is anything else I can do to help.

Thanks,
  Mike

On Saturday 05 June 2004 01:22 am, Miguel de Icaza wrote:
&gt;<i> hello,
</I>&gt;<i>
</I>&gt;<i> &gt;   I think I am in the same boat as you.  Since upgrading to beta2, I have
</I>&gt;<i> &gt; been running into odd behavior w/ XSP and mod_mono (and I also run
</I>&gt;<i> &gt; gentoo).  I sent a note to the mono user list about this, but haven't
</I>&gt;<i> &gt; heard anything yet. I tried upgrading to the latest available glibc, and
</I>&gt;<i> &gt; still have the same problems.  I might try to play around with some
</I>&gt;<i> &gt; things this weekend, but I am not hopeful...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   Are there any happy Gentoo folks that aren't having this odd behavior
</I>&gt;<i> &gt; in beta2? (then we can compare the packages we each have installed..)
</I>&gt;<i>
</I>&gt;<i> What we are going to need from you guys is the smallest possible
</I>&gt;<i> program that breaks on your system, and we will start tracking the
</I>&gt;<i> issue down from there.
</I>&gt;<i>
</I>&gt;<i> Could you guys cook the smallest possible program possible?
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006232.html">[Mono-devel-list] Threading, NPTL, libgc (beta2)
</A></li>
	<LI>Next message: <A HREF="006285.html">[Mono-devel-list] Threading, NPTL, libgc (beta2)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6264">[ date ]</a>
              <a href="thread.html#6264">[ thread ]</a>
              <a href="subject.html#6264">[ subject ]</a>
              <a href="author.html#6264">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
