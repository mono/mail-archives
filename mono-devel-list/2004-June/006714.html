<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [PATCH] ilasm problem with float literals like &quot;1e+150&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20ilasm%20problem%20with%20float%20literals%20like%20%221e%2B150%22&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006709.html">
   <LINK REL="Next"  HREF="006715.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [PATCH] ilasm problem with float literals like &quot;1e+150&quot;</H1>
    <B>Steven Brown</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BPATCH%5D%20ilasm%20problem%20with%20float%20literals%20like%20%221e%2B150%22&In-Reply-To="
       TITLE="[Mono-devel-list] [PATCH] ilasm problem with float literals like &quot;1e+150&quot;">swbrown at ucsd.edu
       </A><BR>
    <I>Tue Jun 29 02:45:31 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="006709.html">[Mono-devel-list] Exception.StackTrace doesnt contain line number
</A></li>
        <LI>Next message: <A HREF="006715.html">[Mono-devel-list] Winforms seems to be just about dead
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6714">[ date ]</a>
              <a href="thread.html#6714">[ thread ]</a>
              <a href="subject.html#6714">[ subject ]</a>
              <a href="author.html#6714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a fix for an ilasm case where il generated by monodis can't be 
subsequently parsed.  The problem is in parsing of float literals like 
&quot;1e+150&quot;.  NumberHelper only treats it as a float if it sees a '.'.  I 
did a quick hack fix of having it also look for 'e' and 'E' which fixes 
at least that case (are there more ways of representing a float literal?).

Also, while poking around, I noticed monodis doesn't have the cast 
syntax ildasm does for float literals.  E.g., monodis will put &quot;1e+150&quot; 
where ildasm would have put &quot;float64(1e+150)&quot;.  Mono does the casts for 
  non-float types.  I'm totally unfamiliar with the il level of things, 
so I'm not sure if this matters.  In case it does, the other patch 
attached has monodis add the missing casts.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: mcs-ilasm-NumberHelper-float-swb.patch
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040628/a9a2b995/attachment.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040628/a9a2b995/attachment.pl</A> 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: mono-monodis-typing-swb.patch
Url: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040628/a9a2b995/attachment-0001.pl">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20040628/a9a2b995/attachment-0001.pl</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006709.html">[Mono-devel-list] Exception.StackTrace doesnt contain line number
</A></li>
	<LI>Next message: <A HREF="006715.html">[Mono-devel-list] Winforms seems to be just about dead
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6714">[ date ]</a>
              <a href="thread.html#6714">[ thread ]</a>
              <a href="subject.html#6714">[ subject ]</a>
              <a href="author.html#6714">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
