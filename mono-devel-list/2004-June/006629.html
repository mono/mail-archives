<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Segmentation fault in mono_class_from_name
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Segmentation%20fault%20in%20mono_class_from_name&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006627.html">
   <LINK REL="Next"  HREF="006631.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Segmentation fault in mono_class_from_name</H1>
    <B>Torstensson, Patrik</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Segmentation%20fault%20in%20mono_class_from_name&In-Reply-To="
       TITLE="[Mono-devel-list] Segmentation fault in mono_class_from_name">patrik.torstensson at intel.com
       </A><BR>
    <I>Wed Jun 23 17:59:16 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="006627.html">[Mono-devel-list] Secure Web Services on Mono
</A></li>
        <LI>Next message: <A HREF="006631.html">[Mono-devel-list] Segmentation fault in mono_class_from_name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6629">[ date ]</a>
              <a href="thread.html#6629">[ thread ]</a>
              <a href="subject.html#6629">[ subject ]</a>
              <a href="author.html#6629">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I had the same problem and that was related to an old system.dll being
in the path, therefore the process failed to load system assembly
correctly (didn't have time to debug why it didn't warn me correctly.).

 Can you check if you have any system.dll in the path and in that case
just temporary removing them to check if that solves the problem.

Maybe this is an issue with system.dll being both in path and GAC.

-- Patrik

-----Original Message-----
From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>
[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>] On Behalf Of Kamil
Skalski
Sent: den 23 juni 2004 23:36
To: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
Subject: Re: [Mono-devel-list] Segmentation fault in
mono_class_from_name

Wednesday 23 June 2004 22:28, Kamil Skalski wrote:
&gt;<i> Wednesday 23 June 2004 21:48, Paolo Molaro wrote:
</I>&gt;<i> &gt; Are you sure that image is non-NULL? What is image-&gt;ref_count if
</I>it's
&gt;<i> &gt; not NULL?
</I>&gt;<i>
</I>&gt;<i> You are right, image pointer is null... But why for the following code
</I>&gt;<i>
</I>&gt;<i> 	g_message(G_GNUC_PRETTY_FUNCTION &quot;: monoclasstep 3: %d&quot;, enter);
</I>&gt;<i> 	nspace_table = g_hash_table_lookup (image-&gt;name_cache,
</I>name_space);
&gt;<i> 	g_message(G_GNUC_PRETTY_FUNCTION &quot;: monoclasstep 4: %d&quot;, enter);
</I>&gt;<i>
</I>&gt;<i> ** Message: : monoclasstep 3: 22788
</I>&gt;<i> occurs, but
</I>&gt;<i> ** Message: : monoclasstep 4: 22788
</I>&gt;<i> doesn't before crash (is g_hash_table_lookup a macro inlining return
</I>or
&gt;<i> this segfault is really occuring inside lookup?)
</I>&gt;<i>
</I>&gt;<i> Anyway, crash occurs inside mono_class_from_name, because
</I>&gt;<i> 	g_message(G_GNUC_PRETTY_FUNCTION &quot;: famstep 1&quot;);
</I>&gt;<i> 	socket_class = mono_class_from_name (system_assembly,
</I>&gt;<i> 					     &quot;System.Net.Sockets&quot;,
</I>&quot;Socket&quot;);
&gt;<i> 	g_message(G_GNUC_PRETTY_FUNCTION &quot;: famstep 2&quot;);
</I>&gt;<i>
</I>&gt;<i> it never get to famstep 2
</I>
Ergh, of course if image is NULL, image -&gt; name_case is causing
segfault... 
So how is it possible that system_assembly is NULL here? I assume this
is not 
a valid state, so I need to debug why it is not properly initialized...

Kamil Skalski
_______________________________________________
Mono-devel-list mailing list
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006627.html">[Mono-devel-list] Secure Web Services on Mono
</A></li>
	<LI>Next message: <A HREF="006631.html">[Mono-devel-list] Segmentation fault in mono_class_from_name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6629">[ date ]</a>
              <a href="thread.html#6629">[ thread ]</a>
              <a href="subject.html#6629">[ subject ]</a>
              <a href="author.html#6629">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
