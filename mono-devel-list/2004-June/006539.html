<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Seemless Executibles?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Seemless%20Executibles%3F&In-Reply-To=20040618090848.W70177%40kamidake.apricot.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006531.html">
   <LINK REL="Next"  HREF="006541.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Seemless Executibles?</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Seemless%20Executibles%3F&In-Reply-To=20040618090848.W70177%40kamidake.apricot.com"
       TITLE="[Mono-devel-list] Seemless Executibles?">jonpryor at vt.edu
       </A><BR>
    <I>Fri Jun 18 23:12:54 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="006531.html">[Mono-devel-list] Seemless Executibles?
</A></li>
        <LI>Next message: <A HREF="006541.html">[Mono-devel-list] Seemless Executibles?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6539">[ date ]</a>
              <a href="thread.html#6539">[ thread ]</a>
              <a href="subject.html#6539">[ subject ]</a>
              <a href="author.html#6539">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 2004-06-18 at 12:32, Tom Larsen wrote:
&gt;<i> According to an article in MSDN on PE format titled &quot;An In-Depth Look Into
</I>&gt;<i> The Win32 Portable Executable File Format&quot; by Matt Pietrek, .NET is tied
</I>&gt;<i> in kind of how I decribed:
</I>
I know, and that's true for every Windows OS *except* Windows XP.  Alas,
I can't find a reference, but early in the Mono project (~June 2002)
mcs+mono-generated programs would properly execute under XP, but would
generate errors (&quot;not a win32 program&quot;) on Windows 2000.  IIRC, the
reason for this was XP could tell from the program header that it was a
.NET program and would immediately use .NET.  Windows 2000 had no such
knowledge, and used the &quot;trick&quot; you described.  Since the mcs-generated
programs were broken, the trick failed under Windows 2000, resulting in
an incompatibility between mcs+mono and .NET.  This has been fixed. :-)

&lt;snip/&gt;

&gt;<i> In any event, to support it wholesale would be quite a task since not all
</I>&gt;<i> Unix environments are ELF supported or x86.  I am a little interested in
</I>&gt;<i> &quot;native to native&quot; though.  If you are building assemblies and executibles
</I>&gt;<i> on Linux for running on Linux there should be a way to take a shortcut
</I>&gt;<i> just like this.  Make the ELF header execute the mono IL interpeter using
</I>&gt;<i> itself as data.  It sure won't be portable non-ELF systems and I'm iffy on
</I>&gt;<i> whether or not it will work on non-x86 ELF systems.
</I>
The problem isn't that it would be a glorious hack, much as the current
.NET loading approach is. :-)  Nor is the problem that using ELF
wouldn't be portable to non-x86 ELF systems.

No, the problem is that it would have no compatibility.  Sure, you'd
have an IL container, but .NET would now refuse to launch it, as would
Rotor and Portable.NET.  Are you willing to use a solution that can only
be used by one program?  I'd bet most people aren't.

Plus, ELF lacks a number of &quot;features&quot; that PE provides, such as the
ability to embed arbitrary resources.  This is frequently used for icons
and language translations, to minimize the number of files required.

In short, providing &quot;seamless&quot; executables by using an ELF wrapper,
while possible, isn't viable -- no one would use it, except for those
individuals who not only don't care about Windows compatibility, but
actively want to *prevent* it.  This is a segment of the community that
I haven't seen much presence from, so I don't think it's worthwhile.

A more viable option is binfmt_misc and similar solutions -- just allow
the OS to load arbitrary executable formats.  Completely seamless, and
it retains compatibility.  It can also be readily extended to handle
Java programs, and anything else that may come along. :-)

 - Jon



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006531.html">[Mono-devel-list] Seemless Executibles?
</A></li>
	<LI>Next message: <A HREF="006541.html">[Mono-devel-list] Seemless Executibles?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6539">[ date ]</a>
              <a href="thread.html#6539">[ thread ]</a>
              <a href="subject.html#6539">[ subject ]</a>
              <a href="author.html#6539">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
