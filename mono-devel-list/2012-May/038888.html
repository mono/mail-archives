<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono JIT Init for two different versions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20JIT%20Init%20for%20two%20different%20versions&In-Reply-To=%3CCACmR%2BBD%3DaEtyuGgQyQBR3nLnbkRMdqBHbyi1zLyxnYEZ3TZ%2BDQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038886.html">
   <LINK REL="Next"  HREF="038889.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono JIT Init for two different versions</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Mono%20JIT%20Init%20for%20two%20different%20versions&In-Reply-To=%3CCACmR%2BBD%3DaEtyuGgQyQBR3nLnbkRMdqBHbyi1zLyxnYEZ3TZ%2BDQ%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Mono JIT Init for two different versions">kumpera at gmail.com
       </A><BR>
    <I>Wed May 23 16:26:12 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038886.html">[Mono-dev] Mono JIT Init for two different versions
</A></li>
        <LI>Next message: <A HREF="038889.html">[Mono-dev] CS0589 on arm Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38888">[ date ]</a>
              <a href="thread.html#38888">[ thread ]</a>
              <a href="subject.html#38888">[ subject ]</a>
              <a href="author.html#38888">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Loading two runtimes in the same process is not something mono was designed
to. You might encounter all
sort of issues when doing so.
You'll have to call all mono functions using function pointers and hope it
works as expected.

Multiple GCs in the same process will be racy and you might end up getting
all sort of crash deadlocks.

Good luck.


On Tue, May 22, 2012 at 11:27 AM, Dimitri Kirsanoff &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">dimitri.kirsanoff at gmail.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I want to initialize different mono run time (different version of mono
</I>&gt;<i> like 2.8, 2.11)  in a single process.
</I>&gt;<i> One application package is using mono-2.8 run time and other application
</I>&gt;<i> is using mono-2.11 run time.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I am trying to initialize mono two times for two different versions, i.e.
</I>&gt;<i> two different versions of the library.
</I>&gt;<i> To try that I found that getting dlsym function pointers from sharedobject
</I>&gt;<i> and calling function pointer to &quot;mono_jit_init&quot; may make it work.
</I>&gt;<i>
</I>&gt;<i> But here scenario seems to be bit different, as I need to initialize mono
</I>&gt;<i> library for two different versions in same process
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The call hierarchy of call is as following
</I>&gt;<i>
</I>&gt;<i> My_Application
</I>&gt;<i>       |
</I>&gt;<i>       |
</I>&gt;<i>       |
</I>&gt;<i>      \/
</I>&gt;<i> libraryInterfaceToMono.so
</I>&gt;<i>       |
</I>&gt;<i>       |
</I>&gt;<i>       |
</I>&gt;<i>      \/
</I>&gt;<i> libmono-2.so (alternately for 2.8 and 2.11)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Using my application I am initializing monoruntime share objects using
</I>&gt;<i> mono_jit_init for version 2.11, but there is another version 2.8 for that
</I>&gt;<i> another mono_jit_init call is needed.
</I>&gt;<i> For calling mono_jit_init I am using dlsym for mono_jit_init. I want to
</I>&gt;<i> know can I do it for two different versions in one process.
</I>&gt;<i>
</I>&gt;<i> Can I use mno_jit_init call twice so that I can initialize two versions (
</I>&gt;<i> I am using 2.8 and 2.11 ) alternately?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Instead of mono_jit_cleanup I am using mono_runtime_unload api as
</I>&gt;<i> mono_jit_cleanup calling from a function is giving me abrupt crashes.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120523/448a6316/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120523/448a6316/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038886.html">[Mono-dev] Mono JIT Init for two different versions
</A></li>
	<LI>Next message: <A HREF="038889.html">[Mono-dev] CS0589 on arm Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38888">[ date ]</a>
              <a href="thread.html#38888">[ thread ]</a>
              <a href="subject.html#38888">[ subject ]</a>
              <a href="author.html#38888">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
