<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Opinion on a bug/fix?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Opinion%20on%20a%20bug/fix%3F&In-Reply-To=%3C4FC40F4E.9040309%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038902.html">
   <LINK REL="Next"  HREF="038904.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Opinion on a bug/fix?</H1>
    <B>Rob Wilkens</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Opinion%20on%20a%20bug/fix%3F&In-Reply-To=%3C4FC40F4E.9040309%40gmail.com%3E"
       TITLE="[Mono-dev] Opinion on a bug/fix?">robwilkens at gmail.com
       </A><BR>
    <I>Mon May 28 23:50:38 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038902.html">[Mono-dev] Issues with gtk# menus?
</A></li>
        <LI>Next message: <A HREF="038904.html">[Mono-dev] The earlier question about monodevelop and latest mono	builds, expanded
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38903">[ date ]</a>
              <a href="thread.html#38903">[ thread ]</a>
              <a href="subject.html#38903">[ subject ]</a>
              <a href="author.html#38903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Without giving the specific code changes, which i'll commit and push to 
github later if i don't get objections, I'm curious if any of the more 
experienced developers here (anyone who's done more changes than me, 
which is one or two) want to comment on the following bug report and 
proposed fix I have for it:

<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=2234">https://bugzilla.xamarin.com/show_bug.cgi?id=2234</A>

Specifically, summarizing, there is a behavior in the Microsoft platform 
which 'eats' exceptions, under certain conditions (one was reported, 
there may be more in the future), and mono does not ignore it which 
results in a crash in mono that doesn't happen on windows.

This is for the combobox, so it is a visual control.

I am proposing a fix, which i have coded, which does something like this:

if (Debugger.IsAttached){
      fire event // so if we're debugging we see it
} else {
      try{
            fire event
      } catch
      {
	    //ignore exceptions outside of debugger
      }
}

If someone wants to see precise code i can probably do a diff...  Before 
I commit it, i'll probably make a comment in the code explaining why it 
was done the way it is.  Also, I'm not sure if i can create a unit test 
that displays a window, therefore i may not be able to create a unit test.

This code seems to solve the problem reported - which i have confirmed 
is correct in a windows virtual machine with visual studio and .net on 
windows 7.

That is:
1) In the debugger, exceptions are fired regardless if they occur.
2) When this condition happens in a normal run, exceptions are ignored. 
  As requested.
3) When this condition doesn't happen under this special circumstance, 
and the same code is reached in the event handler, an exception will be 
raised and not ignored.

This is identical to what happens on Windows/Visual Studio.

Any opinions from anyone on this?

-Rob
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038902.html">[Mono-dev] Issues with gtk# menus?
</A></li>
	<LI>Next message: <A HREF="038904.html">[Mono-dev] The earlier question about monodevelop and latest mono	builds, expanded
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38903">[ date ]</a>
              <a href="thread.html#38903">[ thread ]</a>
              <a href="subject.html#38903">[ subject ]</a>
              <a href="author.html#38903">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
