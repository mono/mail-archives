<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Regression with Linux update
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Regression%20with%20Linux%20update&In-Reply-To=%3CCAAY9ZmfJOpZJfkXonb9i00k2ngbp%3D2pqpD9bRhqo17EwqLOhbQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038864.html">
   <LINK REL="Next"  HREF="038887.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Regression with Linux update</H1>
    <B>the mad mole</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Regression%20with%20Linux%20update&In-Reply-To=%3CCAAY9ZmfJOpZJfkXonb9i00k2ngbp%3D2pqpD9bRhqo17EwqLOhbQ%40mail.gmail.com%3E"
       TITLE="[Mono-dev] Regression with Linux update">madmole at gmail.com
       </A><BR>
    <I>Wed May 23 01:01:14 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038864.html">[Mono-dev] Regression with Linux update
</A></li>
        <LI>Next message: <A HREF="038887.html">[Mono-dev] Regression with Linux update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38884">[ date ]</a>
              <a href="thread.html#38884">[ thread ]</a>
              <a href="subject.html#38884">[ subject ]</a>
              <a href="author.html#38884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I wanted to post an update for the benefit of mono maintainers.  The kernel
team of our SOC vendor was able to get (at least some of) the try-catch
tests to pass (including the example below) by disabling the XI (execute
inhibit, similar to x86 NX) feature, which was recently added to their MIPS
core (doing some research, this appears to be part of MIPS' SmartMIPS ASE,
which also includes a bunch of crypto functions).

The speculation is that some of the jitted code is getting written to pages
mapped with just PROT_READ | PROT_WRITE permissions: with XI enabled the
page would need PROT_EXEC as well.  If anyone knows when this might be
addressed, posting to this list would be much appreciated.

TMM

On Tue, May 15, 2012 at 6:49 PM, the mad mole &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">madmole at gmail.com</A>&gt; wrote:

&gt;<i> I have been happily running mono 2.11.1 cross-compiled for MIPS with gcc
</I>&gt;<i> 4.5.3-1.2.  Out of nearly 500 runtime tests, only
</I>&gt;<i> async-exc-compilation.exe  and monitor.exe were failing (hangs).  Recenly
</I>&gt;<i> our SOC vendor upgraded us from 2.6.37-2.2 to -2.8, which has caused a
</I>&gt;<i> significant regression in functionality: 117 of the runtime tests now
</I>&gt;<i> fail.  It appears the culprit in many of the failures is the use of
</I>&gt;<i> try-catch.  The following simple program demonstrates the problem:
</I>&gt;<i>
</I>&gt;<i> using System;
</I>&gt;<i> namespace trycatch
</I>&gt;<i> {
</I>&gt;<i>     class MainClass
</I>&gt;<i>     {
</I>&gt;<i>         public static void Main (string[] args)
</I>&gt;<i>         {
</I>&gt;<i>             int[] array = new int[5] {10, 20, 30, 40, 50};
</I>&gt;<i>             try {
</I>&gt;<i>                 Console.WriteLine(&quot;Entering first try clause:&quot;);
</I>&gt;<i>             } catch {
</I>&gt;<i>                 Console.WriteLine(&quot;Entering first catch clause&quot;);
</I>&gt;<i>             }
</I>&gt;<i>             try {
</I>&gt;<i>                 Console.WriteLine(&quot;Entering second try clause:
</I>&gt;<i> array[5]={0}&quot;, array[5]);
</I>&gt;<i>             } catch {
</I>&gt;<i>                 Console.WriteLine(&quot;Entering second catch clause&quot;);
</I>&gt;<i>             }
</I>&gt;<i>         }
</I>&gt;<i>     }
</I>&gt;<i> }
</I>&gt;<i> Before, the expected behavior was seen:
</I>&gt;<i>
</I>&gt;<i> # mono trycatch.exe
</I>&gt;<i> Entering first try clause:
</I>&gt;<i> Entering second catch clause
</I>&gt;<i> Now, raising the exception in the second try-catch block aborts the
</I>&gt;<i> program:
</I>&gt;<i>
</I>&gt;<i> # mono trycatch.exe
</I>&gt;<i> Entering first try clause:
</I>&gt;<i> Stacktrace:
</I>&gt;<i>
</I>&gt;<i> Aborted
</I>&gt;<i> Has anyone seen behavior like this?  Any ideas where to start looking?
</I>&gt;<i>
</I>&gt;<i> TMM
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120522/c4c73d71/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20120522/c4c73d71/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038864.html">[Mono-dev] Regression with Linux update
</A></li>
	<LI>Next message: <A HREF="038887.html">[Mono-dev] Regression with Linux update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38884">[ date ]</a>
              <a href="thread.html#38884">[ thread ]</a>
              <a href="subject.html#38884">[ subject ]</a>
              <a href="author.html#38884">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
