<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] SystemIcons.Exclamation produces an exception.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20SystemIcons.Exclamation%20produces%20an%20exception.&In-Reply-To=DA63C6E8B207E748B20D46DFED7B772D0380252E%40dhost002-45.dex002.intermedia.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021613.html">
   <LINK REL="Next"  HREF="021615.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] SystemIcons.Exclamation produces an exception.</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20SystemIcons.Exclamation%20produces%20an%20exception.&In-Reply-To=DA63C6E8B207E748B20D46DFED7B772D0380252E%40dhost002-45.dex002.intermedia.net"
       TITLE="[Mono-dev] SystemIcons.Exclamation produces an exception.">sebastien.pouliot at gmail.com
       </A><BR>
    <I>Sun Dec  3 09:53:04 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021613.html">[Mono-dev] SystemIcons.Exclamation produces an exception.
</A></li>
        <LI>Next message: <A HREF="021615.html">[Mono-dev] SystemIcons.Exclamation produces an exception.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21614">[ date ]</a>
              <a href="thread.html#21614">[ thread ]</a>
              <a href="subject.html#21614">[ subject ]</a>
              <a href="author.html#21614">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Konstantin,

On Sun, 2006-12-03 at 02:30 -0800, Konstantin Triger wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> You may use those already committed into SVN, see
</I>&gt;<i> System.Drawing/Assembly.
</I>
Oh, I never noticed the icons in that directory. Thanks!

&gt;<i> The JAVA profile has support for system icons, so you may also use
</I>&gt;<i> code from SystemIcons.jvm.cs.
</I>
Hmmm... I'm not sure about the code. I don't think this is the way it's
implemented by MS(*) as the pattern looks similar to some old code that
caused us problems in the past. 

E.g. If someone, or some existing code, calling Dispose on one of the
icons, then it icon will throw exception when used afterward.

(*) I'll need to write a few tests to be sure. The solution (to be
previous problems) was to return a Clone of the object.

&gt;<i> Regards,
</I>&gt;<i> Konstantin Triger
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>
</I>&gt;<i> [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-bounces at lists.ximian.com</A>] On Behalf Of
</I>&gt;<i> Sebastien Pouliot
</I>&gt;<i> Sent: Sunday, December 03, 2006 3:29 AM
</I>&gt;<i> To: caz yokoyama
</I>&gt;<i> Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> Subject: Re: [Mono-dev] SystemIcons.Exclamation produces an exception.
</I>&gt;<i> 
</I>&gt;<i> Hello again,
</I>&gt;<i> 
</I>&gt;<i> On Sat, 2006-12-02 at 12:24 -0500, Sebastien Pouliot wrote:
</I>&gt;<i> &gt; Hello Caz,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The class is not implemented. The current stub just returns null for
</I>&gt;<i> any
</I>&gt;<i> &gt; icons.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; This makes me wonder where does SWF get it's own icons ;-) There's
</I>&gt;<i> &gt; probably some code/art sharing do be done there.
</I>&gt;<i> 
</I>&gt;<i> ah... MWF delegates the icons to the themes (make sense too).
</I>&gt;<i> 
</I>&gt;<i> I added the code to make SystemIcons works in SVN (one less
</I>&gt;<i> MonoTODO :-). Right now they all return the same mono icon (at least
</I>&gt;<i> you
</I>&gt;<i> won't get an exception). I'll look for appropriate icon this week.
</I>&gt;<i> 
</I>&gt;<i> Thanks
</I>&gt;<i> 
</I>&gt;<i> &gt; On Sat, 2006-12-02 at 08:56 -0800, caz yokoyama wrote:
</I>&gt;<i> &gt; &gt; Has anyone ever used SystemIcons.Exclamation? It produces an
</I>&gt;<i> exception
</I>&gt;<i> &gt; &gt; while it works on Windows. Is this a bug or am I missing
</I>&gt;<i> something?
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; ------------ icon.cs ----------
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; using System;
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; using System.Drawing;
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; using System.Collections;
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; using System.Drawing.Imaging;
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; using System.Security.Cryptography;
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; class icon
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; {
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;             public static void Main () {
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;                         Icon aaa = new
</I>&gt;<i> Icon(SystemIcons.Exclamation,
</I>&gt;<i> &gt; &gt; 40, 40);
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;                         Console.WriteLine(&quot;Hello World&quot;);
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;             }
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; }
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; -------------- log ---------
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; [<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">caz at localhost</A> icon]$ mcs -debug  -r:System.Drawing.dll icon.cs
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; icon.cs(10,8): warning CS0219: The variable `aaa' is assigned but
</I>&gt;<i> its
</I>&gt;<i> &gt; &gt; value is never used
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Compilation succeeded - 1 warning(s)
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; [<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">caz at localhost</A> icon]$ mono --debug icon.exe
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Unhandled Exception: System.NullReferenceException: Object
</I>&gt;<i> reference
</I>&gt;<i> &gt; &gt; not set to an instance of an object
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;   at System.Drawing.Icon..ctor (System.Drawing.Icon original, Size
</I>&gt;<i> &gt; &gt; size) [0x0001f]
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> in /tmp/scratch/BUILD/mono-1.2.1/mcs/class/System.Drawing/System.Drawing/Icon.cs:129
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;   at System.Drawing.Icon..ctor (System.Drawing.Icon original,
</I>&gt;<i> Int32
</I>&gt;<i> &gt; &gt; width, Int32 height) [0x00000]
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> in /tmp/scratch/BUILD/mono-1.2.1/mcs/class/System.Drawing/System.Drawing/Icon.cs:122
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;   at (wrapper remoting-invoke-with-check)
</I>&gt;<i> System.Drawing.Icon:.ctor
</I>&gt;<i> &gt; &gt; (System.Drawing.Icon,int,int)
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;   at icon.Main () [0x00000] in /home/caz/umd/icon/icon.cs:10
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; - caz at caztech dot com.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>-- 
Sebastien Pouliot  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastien at ximian.com</A>&gt;
Blog: <A HREF="http://pages.infinit.net/ctech/">http://pages.infinit.net/ctech/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021613.html">[Mono-dev] SystemIcons.Exclamation produces an exception.
</A></li>
	<LI>Next message: <A HREF="021615.html">[Mono-dev] SystemIcons.Exclamation produces an exception.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21614">[ date ]</a>
              <a href="thread.html#21614">[ thread ]</a>
              <a href="subject.html#21614">[ subject ]</a>
              <a href="author.html#21614">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
