<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Iterating the classes of a mono image using the	embedding API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Iterating%20the%20classes%20of%20a%20mono%20image%20using%20the%0A%09embedding%20API&In-Reply-To=006f01c718b9%243ded0b70%248acf36d4%40pcargiris">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021658.html">
   <LINK REL="Next"  HREF="021667.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Iterating the classes of a mono image using the	embedding API</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Iterating%20the%20classes%20of%20a%20mono%20image%20using%20the%0A%09embedding%20API&In-Reply-To=006f01c718b9%243ded0b70%248acf36d4%40pcargiris"
       TITLE="[Mono-dev] Iterating the classes of a mono image using the	embedding API">robertj at gmx.net
       </A><BR>
    <I>Tue Dec  5 19:17:03 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021658.html">[Mono-dev] Iterating the classes of a mono image using the	embedding API
</A></li>
        <LI>Next message: <A HREF="021667.html">[Mono-dev] command not found errors when building on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21660">[ date ]</a>
              <a href="thread.html#21660">[ thread ]</a>
              <a href="subject.html#21660">[ subject ]</a>
              <a href="author.html#21660">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Argiris Kirtzidis wrote:
&gt;<i> On 12/05/06 Paolo Molaro wrote:
</I>&gt;<i> 
</I>&gt;<i> I&gt; terating the TypeDef table and calling mono_class_get () is the
</I>&gt;<i> way to
</I>&gt;&gt;<i> go (I posted mostly the same sample code to a mono list a while
</I>&gt;&gt;<i> ago).
</I>&gt;<i> 
</I>&gt;<i> Is there any chance an iterator function (like the
</I>&gt;<i> 'mono_class_get_methods') gets added to the embedding API, so that
</I>&gt;<i> you don't have to deal with internal stuff ? (thus not worry about
</I>&gt;<i> your program breaking with a future version of Mono runtime)
</I>
I also thought that these functions and defines were internal,
but they aren't. Since the Mono API is quite stable, you don't need
to worry.

Anyway, here is the interator I'm using.

Robert

/*
  * Iterator routine for retrieving the classes of an assembly.
  * Similar to mono_class_get_{methods|fields|events|...}.
  */
MonoClass*
mono_image_get_classes (MonoImage *image, gpointer *iter)
{
	int num_types;
	int *index;

	if (!iter)
		return NULL;

	index = (int *) iter;

	/* skip the &lt;Module&gt; */
	if (!*index)
		*index = 1;

	num_types = mono_image_get_table_rows (image, MONO_TABLE_TYPEDEF);

	if (*index &lt; num_types) {
		(*index)++;
		return mono_class_get (image, *index | MONO_TOKEN_TYPE_DEF);
	} else {
		*index = 0;
		return NULL;
	}
}

Robert


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021658.html">[Mono-dev] Iterating the classes of a mono image using the	embedding API
</A></li>
	<LI>Next message: <A HREF="021667.html">[Mono-dev] command not found errors when building on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21660">[ date ]</a>
              <a href="thread.html#21660">[ thread ]</a>
              <a href="subject.html#21660">[ subject ]</a>
              <a href="author.html#21660">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
