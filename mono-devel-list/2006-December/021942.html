<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [Patch] mod_mono/xsp and virtual hosts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPatch%5D%20mod_mono/xsp%20and%20virtual%20hosts&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021972.html">
   <LINK REL="Next"  HREF="021973.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [Patch] mod_mono/xsp and virtual hosts</H1>
    <B>Juraj Skripsky</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPatch%5D%20mod_mono/xsp%20and%20virtual%20hosts&In-Reply-To="
       TITLE="[Mono-dev] [Patch] mod_mono/xsp and virtual hosts">js at hotfeet.ch
       </A><BR>
    <I>Thu Dec 28 13:52:52 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021972.html">[Mono-dev] A patch for mod_mono
</A></li>
        <LI>Next message: <A HREF="021973.html">[Mono-dev] [Patch] mod_mono/xsp and virtual hosts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21942">[ date ]</a>
              <a href="thread.html#21942">[ thread ]</a>
              <a href="subject.html#21942">[ subject ]</a>
              <a href="author.html#21942">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Mod_mono/xsp do not support virtual hosts with ServerAlias correctly:

&lt;VirtualHost *:80&gt;
 DocumentRoot /var/www/html/somesite
 ServerName www.somesite.com
 ServerAlias www.somesite.org
&lt;/VirtualHost&gt;

(AutoConfiguration enabled)

Requesting <A HREF="http://www.somesite.com/xyz.aspx">http://www.somesite.com/xyz.aspx</A> and then
<A HREF="http://www.somesite.org/xyz.aspx">http://www.somesite.org/xyz.aspx</A> results in _two_ applications being
started.

We're hosting about 20 ASP.NET websites with apache/mod_mono, with some
of them having a lot of ServerAliases. The amount of memory used by the
mod-mono-server process is steadly rising as people start hitting those
aliases and new AppDomains are created...

The attached patches fix the problem (at least for our
configuration...). Could somebody please review them and provide
feedback?

- Juraj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mod_mono.patch
Type: text/x-patch
Size: 1234 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20061228/52cf48f8/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20061228/52cf48f8/attachment.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xsp.patch
Type: text/x-patch
Size: 1771 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20061228/52cf48f8/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20061228/52cf48f8/attachment-0001.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021972.html">[Mono-dev] A patch for mod_mono
</A></li>
	<LI>Next message: <A HREF="021973.html">[Mono-dev] [Patch] mod_mono/xsp and virtual hosts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21942">[ date ]</a>
              <a href="thread.html#21942">[ thread ]</a>
              <a href="subject.html#21942">[ subject ]</a>
              <a href="author.html#21942">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
