<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] DataTable Select string comparison patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20DataTable%20Select%20string%20comparison%20patch&In-Reply-To=DA63C6E8B207E748B20D46DFED7B772D813A56%40dhost002-45.dex002.intermedia.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021618.html">
   <LINK REL="Next"  HREF="021635.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] DataTable Select string comparison patch</H1>
    <B>Jaros&#322;aw Pawlak</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20DataTable%20Select%20string%20comparison%20patch&In-Reply-To=DA63C6E8B207E748B20D46DFED7B772D813A56%40dhost002-45.dex002.intermedia.net"
       TITLE="[Mono-dev] DataTable Select string comparison patch">jarek.pawlak at gmail.com
       </A><BR>
    <I>Mon Dec  4 15:07:20 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021618.html">[Mono-dev] DataTable Select string comparison patch
</A></li>
        <LI>Next message: <A HREF="021635.html">[Mono-dev] DataTable Select string comparison patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21634">[ date ]</a>
              <a href="thread.html#21634">[ thread ]</a>
              <a href="subject.html#21634">[ subject ]</a>
              <a href="author.html#21634">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, Konstantin

&gt;<i>  1. If one object is string = &quot;5 &quot; and the second object is Int32 = 5. Will
</I>&gt;<i> the objects be equal?
</I>No, they won't even go into the &quot;if&quot; because o1 is string, but o2 is not string
&gt;<i>  2. What if a case insensitive comparison should be done, but the objects
</I>&gt;<i> are not strings? (May be type conversion should be done before the test 'o1
</I>&gt;<i> is string').
</I>Here we have two problems. One is i don't know what object can be case
sensitive or case insensitive if this object is not a string.  Numbers
don't differ lowcase or hicase, date objects will be equal/different
whenever we compare them after converting to string and making
tolower. And some custom objects can override CompareTo method.
Second problem is I didn't do the ToLower conversion (I'm not the
author of caseInsensitive comparation). I only added the TrimEnd to
existing patch which contained the ToLower method. I have put my patch
inside existing because I didn't want to do the &quot;if (o is string )&quot;
and casting object to string twice. And yes, before patch, a
caseSensitive test was done also only for strings.

&gt;<i>  3. Trimming + converting to low case are very expensive operations. Can you
</I>&gt;<i> rewrite your patch with respective String.Compare call? You may count spaces
</I>&gt;<i> at the end of each string and thus eliminate both trimming and case
</I>&gt;<i> lowering.
</I>Well, the ToLower thing was there before I started to do my
modifications, so why noone sugested this earlier :) ?
However I agree with You, so here is patch with String.Compare.
But I'm not going to do trimEnd myself. Counting spaces is meaningless
because if strings will have different length they will be different
anyway. And if I want to omit last spaces I'll have to check if they
are real last spaces and not just 3 spaces before next letter, so
Instead of nice trimEnd we'll have a loop inside comparison. In my
opinion this would take longer.

Best Regards
Jaroslaw Pawlak
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Comparison.patch
Type: text/x-patch
Size: 730 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20061204/6fb06f23/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20061204/6fb06f23/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021618.html">[Mono-dev] DataTable Select string comparison patch
</A></li>
	<LI>Next message: <A HREF="021635.html">[Mono-dev] DataTable Select string comparison patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21634">[ date ]</a>
              <a href="thread.html#21634">[ thread ]</a>
              <a href="subject.html#21634">[ subject ]</a>
              <a href="author.html#21634">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
