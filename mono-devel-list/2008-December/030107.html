<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Ideas for Mono on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Ideas%20for%20Mono%20on%20Windows&In-Reply-To=1226698922.6137.22.camel%40erandi.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030099.html">
   <LINK REL="Next"  HREF="030109.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Ideas for Mono on Windows</H1>
    <B>Jonathan Chambers</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Ideas%20for%20Mono%20on%20Windows&In-Reply-To=1226698922.6137.22.camel%40erandi.site"
       TITLE="[Mono-dev] Ideas for Mono on Windows">joncham at gmail.com
       </A><BR>
    <I>Tue Dec  9 14:41:16 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030099.html">[Mono-dev]  Strange problem with UserControls not being found
</A></li>
        <LI>Next message: <A HREF="030109.html">[Mono-dev] Ideas for Mono on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30107">[ date ]</a>
              <a href="thread.html#30107">[ thread ]</a>
              <a href="subject.html#30107">[ subject ]</a>
              <a href="author.html#30107">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

      I broke down the 'Mono on Windows' topic into two distinct approaches.
I have mainly been working on the second approach as it seemed to be easier
and provide more value.

The first approach is to provide a way to build mono on windows without
cygwin installed. This approach provides uses no MS tools and provides no VS
integration for the class libraries. The runtime would still be built with
MSVC at this point in the plan. It's simply a way for Windows developers to
quickly build mono on windows. It should be much faster than the current
cygwin based build and require let setup.

The second approach (the one I have been working on) was to provide a
'prepare' tool to generate csproj files for all the class libs. I also
generate a solution containing all the projects. The user can then build all
the mono class libraries (and unit tests) with one click (it's also per
profile 1.1, 2.0, 3.5).

So as for an update to the second approach. I have a rudimentary Makefile
parser and am using it to generate csproj files for the class libraries. I
have run into a few problems/issues:

1. The conscensus on #monodev was that the build could use the MS compiler,
but that we should reference mono class libraries as references. So, I build
corlib first and then try and build the System.dll referencing our corlib
rather than the MS one via -nostdlib compiler option (for the 1.1 profile).
Visual Studio 2008 allows users to specify what framework version to target
for a specific project, but 2.0 is the minimum version (2.0, 3.0, and 3.5
are the options). The csc compiler errors out when building System.dll as it
is looking for 2.0 specific items in corlib. The specific error is:

error CS0656: Missing compiler required member
'System.Threading.Thread.get_ManagedThreadId'

I hacked around this by making that field public when build inside of Visual
Studio. However, that is a hack and some in #monodev seemed to indicate we'd
hit more issues going down this path.

So, in short I think we may be stuck trying to build 1.1 profile libraries
(referencing our 1.1 corlib) using the csc compiler.

I have a couple questions that hopefully I can get some responses on.

1. What's the impact of building the 1.1 class libraries against the 2.0
corlib?

2. Should this approach (VS integration) be able to build a fully working
mono image?

3. If so, are we confident enough that contributors could use this build
mechanism to make changes/patches? Or would this be viewed as a second
class, and we would expect them to build on Linux or with cygwin before
actually commiting changes?

4. If we don't expect this approach to build a fully working mono image,
what exactly is the goal/use case? Is it just so Windows hackers can quickly
build a single class library in VS? They can debug a class library in VS?

I'm still hoping to make things better on Windows for mono, but am not sure
which direction to go now. Any (potential) mono hackers on Windows please
let your opinions be known.

Thanks,
Jonathan

On Fri, Nov 14, 2008 at 4:42 PM, Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">miguel at novell.com</A>&gt; wrote:

&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> &gt; The upside of the mechanism I am using is that all of that would still
</I>&gt;<i> &gt; work the same, because I am still using the .sources files instead of
</I>&gt;<i> &gt; having a .csproj.  The downside is we still wouldn't have .csproj's, so
</I>&gt;<i> &gt; it doesn't make working in VS any easier, it just makes it possible to
</I>&gt;<i> &gt; build Mono for Windows in under two hours.
</I>&gt;<i>
</I>&gt;<i> Thanks for this information.
</I>&gt;<i>
</I>&gt;<i> Is there a reason why we could not generate the .csproj files from
</I>&gt;<i> the .sources and the Makefile settings for the entire tree in one
</I>&gt;<i> &quot;prepare&quot; step?
</I>&gt;<i>
</I>&gt;<i> We need to have a good Visual Studio experience from the get-go and not
</I>&gt;<i> only a faster command line buidl.
</I>&gt;<i>
</I>&gt;<i> Miguel
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20081209/90e4f36b/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20081209/90e4f36b/attachment.html</A> 
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030099.html">[Mono-dev]  Strange problem with UserControls not being found
</A></li>
	<LI>Next message: <A HREF="030109.html">[Mono-dev] Ideas for Mono on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30107">[ date ]</a>
              <a href="thread.html#30107">[ thread ]</a>
              <a href="subject.html#30107">[ subject ]</a>
              <a href="author.html#30107">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
