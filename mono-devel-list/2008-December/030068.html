<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono.Simd: Accelerated methods analysis
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono.Simd%3A%20Accelerated%20methods%20analysis&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030073.html">
   <LINK REL="Next"  HREF="030118.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono.Simd: Accelerated methods analysis</H1>
    <B>Bart Masschelein</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono.Simd%3A%20Accelerated%20methods%20analysis&In-Reply-To="
       TITLE="[Mono-dev] Mono.Simd: Accelerated methods analysis">masschel at gmail.com
       </A><BR>
    <I>Sat Dec  6 20:53:58 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030073.html">[Mono-dev] Bug in gmcs compilation with shadowed base class	member.
</A></li>
        <LI>Next message: <A HREF="030118.html">[Mono-dev] Mono.Simd: Accelerated methods analysis
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30068">[ date ]</a>
              <a href="thread.html#30068">[ thread ]</a>
              <a href="subject.html#30068">[ subject ]</a>
              <a href="author.html#30068">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I've written aprogram that uses reflection to give a list of relevant  
methods in the Mono.Simd, and reports whether they are accelerated or  
not (see below). This small program might be of interest to others, to  
see how well their processor behave.

There are methods that have overloaded, for which I should give the  
signature, but I'm a bit lost in how this signature should look like.  
I tried to convert the ParameterInfo[] of the methods to Type[], as  
required by the IsMethodAccelerated method, but this gives erroneous  
results. Is it only the parameters list, or is there more to it?

I thought of removing the overloaded methods (see list), but I guess I  
might risk to remove relevant methods as well. The overloaded methods  
are mainly op_Explicit, LoadAligned, StoreAligned, and the PrefetchXxx  
methods. Are these relevant to show up in such a list?

Anyway, I'm quite thrilled to see that almost all of the methods are  
accelerated :-).

Bart

using System;
using Mono.Simd;
using System.Reflection;

namespace AcceleratedMethods
{
     class MainClass
     {
         public static void Main(string[] args)
         {
             // Change to your location of Mono.Simd
             string monoSimdLocation = @&quot;/Users/masschel/local/mono/ 
lib/mono/2.0/Mono.Simd.dll&quot;;
             Assembly assembly = Assembly.LoadFile(monoSimdLocation);
             foreach(Type type in assembly.GetTypes())
             {
                 string typeName = type.Name;
                 if (typeName.Length&gt;=6 &amp;&amp; typeName.Substring(0,6) ==  
&quot;Vector&quot;)
                 {
                     Console.WriteLine(&quot;Type {0}&quot;, type.Name);
                     foreach(MethodInfo mi in type.GetMethods())
                     {
                         string methodName = mi.Name;
                         bool ctu = methodName != &quot;Equals&quot;
                                 &amp;&amp; methodName != &quot;GetHashCode&quot;
                                 &amp;&amp; methodName != &quot;ToString&quot;
                                 &amp;&amp; methodName != &quot;GetType&quot;
                                 &amp;&amp; (methodName.Length&gt;=4
                                     &amp;&amp; methodName.Substring(0, 4) !=  
&quot;get_&quot;
                                     &amp;&amp; methodName.Substring(0, 4) !=  
&quot;set_&quot;);
                         if (ctu)
                         {
                             try
                             {
                                 Console.WriteLine(&quot;   Method {0}  
{1}&quot;, mi.Name, SimdRuntime.IsMethodAccelerated(type, mi.Name));
                             }
                             // Overloaded methods
                             catch  
(System.Reflection.AmbiguousMatchException amme)
                             {
                                 Type[] types = new  
Type[mi.GetParameters().Length];
                                 for(int i = 0; i &lt;  
mi.GetParameters().Length; i++)
                                 {
                                     types[i] = mi.GetParameters() 
[i].GetType();
                                 }
                                 Console.WriteLine(&quot;    
AmbiguousMatchException for method {0} {1}&quot;, mi.Name,  
SimdRuntime.IsMethodAccelerated(type, mi.Name, types));
                             }
                         }
                     }
                 }
             }
         }
     }
}
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030073.html">[Mono-dev] Bug in gmcs compilation with shadowed base class	member.
</A></li>
	<LI>Next message: <A HREF="030118.html">[Mono-dev] Mono.Simd: Accelerated methods analysis
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30068">[ date ]</a>
              <a href="thread.html#30068">[ thread ]</a>
              <a href="subject.html#30068">[ subject ]</a>
              <a href="author.html#30068">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
