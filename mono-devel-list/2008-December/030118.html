<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono.Simd: Accelerated methods analysis
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono.Simd%3A%20Accelerated%20methods%20analysis&In-Reply-To=B0C4FA0D-65D8-40BD-B841-D22F81B8D5C3%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030068.html">
   <LINK REL="Next"  HREF="030120.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono.Simd: Accelerated methods analysis</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono.Simd%3A%20Accelerated%20methods%20analysis&In-Reply-To=B0C4FA0D-65D8-40BD-B841-D22F81B8D5C3%40gmail.com"
       TITLE="[Mono-dev] Mono.Simd: Accelerated methods analysis">kumpera at gmail.com
       </A><BR>
    <I>Wed Dec 10 07:21:25 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030068.html">[Mono-dev] Mono.Simd: Accelerated methods analysis
</A></li>
        <LI>Next message: <A HREF="030120.html">[Mono-dev] Mono.Simd: Accelerated methods analysis
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30118">[ date ]</a>
              <a href="thread.html#30118">[ thread ]</a>
              <a href="subject.html#30118">[ subject ]</a>
              <a href="author.html#30118">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Bart,

Right now the only methods that are not accelerated are indexers, if any
method is missing from this list, it's a bug.

Cheers,
Rodrigo



On Sat, Dec 6, 2008 at 11:53 PM, Bart Masschelein &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">masschel at gmail.com</A>&gt;wrote:

&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> I've written aprogram that uses reflection to give a list of relevant
</I>&gt;<i> methods in the Mono.Simd, and reports whether they are accelerated or
</I>&gt;<i> not (see below). This small program might be of interest to others, to
</I>&gt;<i> see how well their processor behave.
</I>&gt;<i>
</I>&gt;<i> There are methods that have overloaded, for which I should give the
</I>&gt;<i> signature, but I'm a bit lost in how this signature should look like.
</I>&gt;<i> I tried to convert the ParameterInfo[] of the methods to Type[], as
</I>&gt;<i> required by the IsMethodAccelerated method, but this gives erroneous
</I>&gt;<i> results. Is it only the parameters list, or is there more to it?
</I>&gt;<i>
</I>&gt;<i> I thought of removing the overloaded methods (see list), but I guess I
</I>&gt;<i> might risk to remove relevant methods as well. The overloaded methods
</I>&gt;<i> are mainly op_Explicit, LoadAligned, StoreAligned, and the PrefetchXxx
</I>&gt;<i> methods. Are these relevant to show up in such a list?
</I>&gt;<i>
</I>&gt;<i> Anyway, I'm quite thrilled to see that almost all of the methods are
</I>&gt;<i> accelerated :-).
</I>&gt;<i>
</I>&gt;<i> Bart
</I>&gt;<i>
</I>&gt;<i> using System;
</I>&gt;<i> using Mono.Simd;
</I>&gt;<i> using System.Reflection;
</I>&gt;<i>
</I>&gt;<i> namespace AcceleratedMethods
</I>&gt;<i> {
</I>&gt;<i>     class MainClass
</I>&gt;<i>     {
</I>&gt;<i>         public static void Main(string[] args)
</I>&gt;<i>         {
</I>&gt;<i>             // Change to your location of Mono.Simd
</I>&gt;<i>             string monoSimdLocation = @&quot;/Users/masschel/local/mono/
</I>&gt;<i> lib/mono/2.0/Mono.Simd.dll&quot;;
</I>&gt;<i>             Assembly assembly = Assembly.LoadFile(monoSimdLocation);
</I>&gt;<i>             foreach(Type type in assembly.GetTypes())
</I>&gt;<i>             {
</I>&gt;<i>                 string typeName = type.Name;
</I>&gt;<i>                 if (typeName.Length&gt;=6 &amp;&amp; typeName.Substring(0,6) ==
</I>&gt;<i> &quot;Vector&quot;)
</I>&gt;<i>                 {
</I>&gt;<i>                     Console.WriteLine(&quot;Type {0}&quot;, type.Name);
</I>&gt;<i>                     foreach(MethodInfo mi in type.GetMethods())
</I>&gt;<i>                     {
</I>&gt;<i>                         string methodName = mi.Name;
</I>&gt;<i>                         bool ctu = methodName != &quot;Equals&quot;
</I>&gt;<i>                                 &amp;&amp; methodName != &quot;GetHashCode&quot;
</I>&gt;<i>                                 &amp;&amp; methodName != &quot;ToString&quot;
</I>&gt;<i>                                 &amp;&amp; methodName != &quot;GetType&quot;
</I>&gt;<i>                                 &amp;&amp; (methodName.Length&gt;=4
</I>&gt;<i>                                     &amp;&amp; methodName.Substring(0, 4) !=
</I>&gt;<i> &quot;get_&quot;
</I>&gt;<i>                                     &amp;&amp; methodName.Substring(0, 4) !=
</I>&gt;<i> &quot;set_&quot;);
</I>&gt;<i>                         if (ctu)
</I>&gt;<i>                         {
</I>&gt;<i>                             try
</I>&gt;<i>                             {
</I>&gt;<i>                                 Console.WriteLine(&quot;   Method {0}
</I>&gt;<i> {1}&quot;, mi.Name, SimdRuntime.IsMethodAccelerated(type, mi.Name));
</I>&gt;<i>                             }
</I>&gt;<i>                             // Overloaded methods
</I>&gt;<i>                             catch
</I>&gt;<i> (System.Reflection.AmbiguousMatchException amme)
</I>&gt;<i>                             {
</I>&gt;<i>                                 Type[] types = new
</I>&gt;<i> Type[mi.GetParameters().Length];
</I>&gt;<i>                                 for(int i = 0; i &lt;
</I>&gt;<i> mi.GetParameters().Length; i++)
</I>&gt;<i>                                 {
</I>&gt;<i>                                     types[i] = mi.GetParameters()
</I>&gt;<i> [i].GetType();
</I>&gt;<i>                                 }
</I>&gt;<i>                                 Console.WriteLine(&quot;
</I>&gt;<i> AmbiguousMatchException for method {0} {1}&quot;, mi.Name,
</I>&gt;<i> SimdRuntime.IsMethodAccelerated(type, mi.Name, types));
</I>&gt;<i>                             }
</I>&gt;<i>                         }
</I>&gt;<i>                     }
</I>&gt;<i>                 }
</I>&gt;<i>             }
</I>&gt;<i>         }
</I>&gt;<i>     }
</I>&gt;<i> }
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20081210/64102253/attachment-0001.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20081210/64102253/attachment-0001.html</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030068.html">[Mono-dev] Mono.Simd: Accelerated methods analysis
</A></li>
	<LI>Next message: <A HREF="030120.html">[Mono-dev] Mono.Simd: Accelerated methods analysis
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30118">[ date ]</a>
              <a href="thread.html#30118">[ thread ]</a>
              <a href="subject.html#30118">[ subject ]</a>
              <a href="author.html#30118">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
