<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [PATCH] System.Messaging/AMQP: Receive,	Send and Peek implementation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20System.Messaging/AMQP%3A%20Receive%2C%0A%09Send%20and%20Peek%20implementation&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030124.html">
   <LINK REL="Next"  HREF="030071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [PATCH] System.Messaging/AMQP: Receive,	Send and Peek implementation</H1>
    <B>Michael Barker</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5BPATCH%5D%20System.Messaging/AMQP%3A%20Receive%2C%0A%09Send%20and%20Peek%20implementation&In-Reply-To="
       TITLE="[Mono-dev] [PATCH] System.Messaging/AMQP: Receive,	Send and Peek implementation">mike at middlesoft.co.uk
       </A><BR>
    <I>Sun Dec  7 01:34:10 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030124.html">[Mono-dev] Mono.Simd: Accelerated methods analysis
</A></li>
        <LI>Next message: <A HREF="030071.html">[Mono-dev] [PATCH] System.Messaging/AMQP: Receive, Send and Peek implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30070">[ date ]</a>
              <a href="thread.html#30070">[ thread ]</a>
              <a href="subject.html#30070">[ subject ]</a>
              <a href="author.html#30070">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have created a bugzilla entry
(<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=457089">https://bugzilla.novell.com/show_bug.cgi?id=457089</A>) that contains 4
patches that add a chunk of functionality to the AMQP/System.Messaging
implementation.  If possible, could someone commit them to the
messaging-2008 branch.

The patches add full support Peek, Receive and Send methods in
MessageQueue, including transactions, selecting by id and correlation
id, and with timeouts.  AMQP doesn't support all of the this
functionality natively so some features have a sub-optimal
implementation.  Specifically the XXXById and XXXByCorrelationId
methods which pick up the messages from queue and performs the
matching on the client side.  The main features that are still
outstanding authentication, permissions, and encryption.
MessageEnumerators are implemented, but the transactional
RemoveCurrent methods can't be implemented due to the way transactions
work with AMQP, however the non-transactional RemoveCurrent works
fine.

Another feature not support directly by AMQP is queue discovery.  It
uses a declare model for getting queues, i.e. if-not-exist-create, and
there is no mechanism for getting a list of existing queues.  At the
moment this is implemented with a bit of a hack, the MessagingProvider
hangs on a hashtable of the queues that have been created.  Therefore
queues don't &quot;exist&quot; until they have been created with the current
process and are declared in a whenever a queue is used.  While not
100% correct, it will work as long as clients do the following:

string path = @&quot;.\private$\my-queue&quot;;
MessageQueue q;
if (MessageQueue.Exists(path) {
    q = MessageQueue.Create(path);
else
    q = new MessageQueue(path);

Which is fairly common pattern for using System.Messaging.

Mike
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030124.html">[Mono-dev] Mono.Simd: Accelerated methods analysis
</A></li>
	<LI>Next message: <A HREF="030071.html">[Mono-dev] [PATCH] System.Messaging/AMQP: Receive, Send and Peek implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30070">[ date ]</a>
              <a href="thread.html#30070">[ thread ]</a>
              <a href="subject.html#30070">[ subject ]</a>
              <a href="author.html#30070">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
