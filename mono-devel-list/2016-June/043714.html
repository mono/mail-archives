<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Bug preserving stack trace
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Bug%20preserving%20stack%20trace&In-Reply-To=%3CBN3PR0801MB1154AE2600D7DF25A5EB36FCFA2C0%40BN3PR0801MB1154.namprd08.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043711.html">
   <LINK REL="Next"  HREF="043715.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Bug preserving stack trace</H1>
    <B>Edward Ned Harvey (mono)</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Bug%20preserving%20stack%20trace&In-Reply-To=%3CBN3PR0801MB1154AE2600D7DF25A5EB36FCFA2C0%40BN3PR0801MB1154.namprd08.prod.outlook.com%3E"
       TITLE="[Mono-dev] Bug preserving stack trace">edward.harvey.mono at clevertrove.com
       </A><BR>
    <I>Wed Jun 22 11:58:31 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="043711.html">[Mono-dev] DateTime.Now
</A></li>
        <LI>Next message: <A HREF="043715.html">[Mono-dev] Bug preserving stack trace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43714">[ date ]</a>
              <a href="thread.html#43714">[ thread ]</a>
              <a href="subject.html#43714">[ subject ]</a>
              <a href="author.html#43714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I know you don't usually want to catch &amp; throw, because you're not adding new information. If you want to add new information, generally you should throw a new exception and include an InnerException. Here are some examples of situations you would want to catch and rethrow:

<A HREF="https://msdn.microsoft.com/en-us/library/0yd65esw.aspx">https://msdn.microsoft.com/en-us/library/0yd65esw.aspx</A>



I also know you destroy the stack trace if you explicitly name the exception you're rethrowing. In order to preserve the stack, you should throw without any arguments.

<A HREF="https://msdn.microsoft.com/en-us/library/ms182363.aspx">https://msdn.microsoft.com/en-us/library/ms182363.aspx</A>



I know the difference between a debug build and release build, particularly with regards to optimizations and inlining.


In a debug build, the following code behaves as expected (prints out the full stack trace) on .NET, but doesn't print out the full stack on mono 4.2.3. I'm pretty sure it's not an expected behavior.

using System;

namespace FunWithRethrow
{
      class MainClass
      {
            public static void Main (string[] args)
            {
                  try {
                        Third ();
                  }
                  catch (Exception e) {
                        Console.WriteLine (e);
                  }
            }
            static void Third()
            {
                  Second ();
            }
            static void Second()
            {
                  try {
                        First();
                  }
                  catch {
                        throw;
                  }
            }
            static void First()
            {
                  throw new Exception (&quot;Something said... Not good...&quot;);
            }
      }
}

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20160622/ed5ce58c/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20160622/ed5ce58c/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043711.html">[Mono-dev] DateTime.Now
</A></li>
	<LI>Next message: <A HREF="043715.html">[Mono-dev] Bug preserving stack trace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43714">[ date ]</a>
              <a href="thread.html#43714">[ thread ]</a>
              <a href="subject.html#43714">[ subject ]</a>
              <a href="author.html#43714">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
