<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mono_add_internal_call to mscorlib method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20mono_add_internal_call%20to%20mscorlib%20method&In-Reply-To=%3Cnje1os%24f82%241%40ger.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043692.html">
   <LINK REL="Next"  HREF="043698.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mono_add_internal_call to mscorlib method</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20mono_add_internal_call%20to%20mscorlib%20method&In-Reply-To=%3Cnje1os%24f82%241%40ger.gmane.org%3E"
       TITLE="[Mono-dev] mono_add_internal_call to mscorlib method">robertj at gmx.net
       </A><BR>
    <I>Fri Jun 10 09:37:32 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="043692.html">[Mono-dev] mono_add_internal_call to mscorlib method
</A></li>
        <LI>Next message: <A HREF="043698.html">[Mono-dev] mono_add_internal_call to mscorlib method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43695">[ date ]</a>
              <a href="thread.html#43695">[ thread ]</a>
              <a href="subject.html#43695">[ subject ]</a>
              <a href="author.html#43695">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09.06.2016 15:37, nicob wrote:
&gt;<i> Hi Robert, thanks for the reply. I didn't explain my self correctly. Here's
</I>&gt;<i> an example, I have a c# assembly with a method that prints the args to the
</I>&gt;<i> console:
</I>
I believe I didn't explain the workaround entirely.

Parts of the Mono runtime are expecting that the main entry point
of some assembly has been executed.

Environment.GetCommandLineArgs belongs clearly to this part of
the runtime because, well, it needs data only provided
by executing the main entry point.

The trick is to invoke  mono_jit_exec () on a simple assembly
which does only this:

$ cat &lt;&lt;EOF &gt; entrypoint.cs
namespace Helper {
    public static class EntryPoint {
	public static void Main ()
	{
	}
    }
}
EOF

$ mcs /target:exe /out:entrypoint.dll entrypoint.cs


Then load entrypoint.dll and pass it to mono_jit_exec.
After this call, almost all parts of the runtime will work
as expected, including Environment.GetCommandLineArgs.
It will return what you've provided to mono_jit_exec ().

Robert


</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043692.html">[Mono-dev] mono_add_internal_call to mscorlib method
</A></li>
	<LI>Next message: <A HREF="043698.html">[Mono-dev] mono_add_internal_call to mscorlib method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43695">[ date ]</a>
              <a href="thread.html#43695">[ thread ]</a>
              <a href="subject.html#43695">[ subject ]</a>
              <a href="author.html#43695">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
