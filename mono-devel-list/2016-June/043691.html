<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] mono_add_internal_call to mscorlib method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20mono_add_internal_call%20to%20mscorlib%20method&In-Reply-To=%3Cnjball%24ccr%241%40ger.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043690.html">
   <LINK REL="Next"  HREF="043692.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] mono_add_internal_call to mscorlib method</H1>
    <B>Robert Jordan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20mono_add_internal_call%20to%20mscorlib%20method&In-Reply-To=%3Cnjball%24ccr%241%40ger.gmane.org%3E"
       TITLE="[Mono-dev] mono_add_internal_call to mscorlib method">robertj at gmx.net
       </A><BR>
    <I>Thu Jun  9 08:51:01 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="043690.html">[Mono-dev] mono_add_internal_call to mscorlib method
</A></li>
        <LI>Next message: <A HREF="043692.html">[Mono-dev] mono_add_internal_call to mscorlib method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43691">[ date ]</a>
              <a href="thread.html#43691">[ thread ]</a>
              <a href="subject.html#43691">[ subject ]</a>
              <a href="author.html#43691">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08.06.2016 21:26, nicob wrote:
&gt;<i> Hi, I'm trying to use the Skype Sdk in mono embedded. I'm able to load the
</I>&gt;<i> assemblies but when I try to create a instance of a class that internally
</I>&gt;<i> calls System.Environment.GetCommandLineArgs it throws an exception. After
</I>&gt;<i> digging a bit I found out the System.Environment.GetCommandLineArgs
</I>&gt;<i> internally invokes:
</I>&gt;<i>
</I>&gt;<i> private static extern string[] GetCommandLineArgsNative();
</I>&gt;<i>
</I>&gt;<i> this method is returning null therefore it fails. I'm trying to add an
</I>&gt;<i> internal call to the extern method using:
</I>&gt;<i>
</I>&gt;<i> mono_add_internal_call (&quot;System.Environment::GetCommandLineArgsNative&quot;,
</I>&gt;<i> (void*)GetCommandLine);
</I>&gt;<i>
</I>&gt;<i> I also tried:
</I>&gt;<i>
</I>&gt;<i> mono_add_internal_call
</I>&gt;<i> (&quot;mscorlib.System.Environment::GetCommandLineArgsNative&quot;,
</I>&gt;<i> (void*)GetCommandLine);
</I>&gt;<i>
</I>&gt;<i> but neither of them seem to work as my C++ function is never invoked.
</I>
You can't override methods which have an IL implementation with icalls.

However, your problem is most likely related to the fact that
you haven't initialized the runtime properly.

You're supposed to invoke a &quot;static void Main () {} &quot; method (which
you can implement in a support assembly) with mono_jit_exec ().

Robert



</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043690.html">[Mono-dev] mono_add_internal_call to mscorlib method
</A></li>
	<LI>Next message: <A HREF="043692.html">[Mono-dev] mono_add_internal_call to mscorlib method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43691">[ date ]</a>
              <a href="thread.html#43691">[ thread ]</a>
              <a href="subject.html#43691">[ subject ]</a>
              <a href="author.html#43691">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
