<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: Heads up: marshalling changes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20Heads%20up%3A%20marshalling%20changes&In-Reply-To=295e750a0409061612238d9e30%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007811.html">
   <LINK REL="Next"  HREF="007843.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: Heads up: marshalling changes</H1>
    <B>Zoltan Varga</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20Heads%20up%3A%20marshalling%20changes&In-Reply-To=295e750a0409061612238d9e30%40mail.gmail.com"
       TITLE="[Mono-devel-list] Re: Heads up: marshalling changes">vargaz at gmail.com
       </A><BR>
    <I>Tue Sep  7 07:06:22 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007811.html">[Mono-devel-list] Heads up: marshalling changes
</A></li>
        <LI>Next message: <A HREF="007843.html">[Mono-devel-list] Heads up: marshalling changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7842">[ date ]</a>
              <a href="thread.html#7842">[ thread ]</a>
              <a href="subject.html#7842">[ subject ]</a>
              <a href="author.html#7842">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>                                         Hi,

  The changes were the following:

- Managed code now needs to keep a reference to delegates passed to unmanaged
  code, otherwise they will be freed. For more info an possible solutions, see
  this:

<A HREF="http://blogs.msdn.com/adam_nathan/archive/2003/06/01/56693.aspx">http://blogs.msdn.com/adam_nathan/archive/2003/06/01/56693.aspx</A>

- Strings inside structures/arrays passed to managed code are now freed after
  the call.

- Memory returned by unmanaged code in some form (return value, changed 
  byref parameter etc) is now freed after it has been converted to managed data.

Other than this, things should work the same, but there could be bugs in the
new code so beware.

                    Zoltan


On Tue, 7 Sep 2004 01:12:54 +0200, Zoltan Varga &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">vargaz at gmail.com</A>&gt; wrote:
&gt;<i>                                             Hi,
</I>&gt;<i> 
</I>&gt;<i>   I checked in some major changes to mono's marshalling infrastructure primary
</I>&gt;<i> to fix some memory leaks with the old code. There is a high probability that
</I>&gt;<i> some things were broken in the process. So if you have some pinvoke code which
</I>&gt;<i> used to work but doesn't work now, drop a mail to the list, and I will
</I>&gt;<i> look into it.
</I>&gt;<i> 
</I>&gt;<i>                                                          Zoltan
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007811.html">[Mono-devel-list] Heads up: marshalling changes
</A></li>
	<LI>Next message: <A HREF="007843.html">[Mono-devel-list] Heads up: marshalling changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7842">[ date ]</a>
              <a href="thread.html#7842">[ thread ]</a>
              <a href="subject.html#7842">[ subject ]</a>
              <a href="author.html#7842">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
