<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] un-interoperatible classes .NET -&gt;  Monoremoting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20un-interoperatible%20classes%20.NET%20-%3E%0A%20%20Monoremoting&In-Reply-To=002101c4a54e%24b496f280%240100a8c0%40profoxamd">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008103.html">
   <LINK REL="Next"  HREF="008090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] un-interoperatible classes .NET -&gt;  Monoremoting</H1>
    <B>Jonathan Gilbert</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20un-interoperatible%20classes%20.NET%20-%3E%0A%20%20Monoremoting&In-Reply-To=002101c4a54e%24b496f280%240100a8c0%40profoxamd"
       TITLE="[Mono-devel-list] un-interoperatible classes .NET -&gt;  Monoremoting">2a5gjx302 at sneakemail.com
       </A><BR>
    <I>Wed Sep 29 18:46:55 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008103.html">[Mono-devel-list] un-interoperatible classes .NET -&gt; Monoremoting
</A></li>
        <LI>Next message: <A HREF="008090.html">[Mono-devel-list] un-interoperatible classes .NET -&gt; Monoremoting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8126">[ date ]</a>
              <a href="thread.html#8126">[ thread ]</a>
              <a href="subject.html#8126">[ subject ]</a>
              <a href="author.html#8126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This wouldn't work as far as interoperability with existing code running
under MS.NET is concerned. However, as I see it, only one translator is
needed; the mono side could translate the binary format of specific classes
on a per-case basis to be compatible with MS.NET. I actually made this
suggestion years ago, but it was poo-pooed for some reason.

As for maintaining compatibility with older versions of mono, I don't know
whether there is any way to detect whether you're talking to mono remoting
on the other end, but if there is, the translation layer could be disabled
when mono is found (or even given multiple modes, to maintain the maximum
level of compatibility between different versions of mono as well as
mono&lt;-&gt;MS, in the case that a future version of mono decides to change its
internal representation for a commonly-serialized runtime class).

Jonathan Gilbert

At 12:31 PM 28/09/2004 +0100, you wrote:
&gt;<i>As an alternative to compatibility problems, you could write two middle
</I>&gt;<i>layers - one for each platform.  MonoLayer will translate to and from a
</I>&gt;<i>Mono implementation to your new common implementation, and MSLayer will
</I>&gt;<i>do the same, but for MS implementations.
</I>&gt;<i>
</I>&gt;<i>They will most likely be quite lightweight classes...
</I>&gt;<i>
</I>&gt;<i>Check out the Data Transfer Object pattern in Martin Fowler's &quot;Patterns
</I>&gt;<i>of Enterprise Application Architecture&quot;
</I>&gt;<i>
</I>&gt;<i>Regards,
</I>&gt;<i>Jason King
</I>&gt;<i>Co-Author, &quot;Cross-Platform .NET Development: Using Mono, Portable.NET,
</I>&gt;<i>and Microsoft .NET&quot; 
</I>&gt;<i>(Apress, 2004, ISBN: 1-59059-330-8)
</I>&gt;<i><A HREF="http://www.cross-platform.net">http://www.cross-platform.net</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>-----Original Message-----
</I>&gt;<i>From: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>
</I>&gt;<i>[mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list-admin at lists.ximian.com</A>] On Behalf Of Lluis
</I>&gt;<i>Sanchez
</I>&gt;<i>Sent: 28 September 2004 12:20
</I>&gt;<i>To: Aleksandar Dezelin
</I>&gt;<i>Cc: Mono-devel-list
</I>&gt;<i>Subject: Re: [Mono-devel-list] un-interoperatible classes .NET -&gt;
</I>&gt;<i>Monoremoting
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On dt, 2004-09-28 at 03:52 -0700, Aleksandar Dezelin wrote:
</I>&gt;&gt;<i> Lluis Sanchez wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> &gt;Only objects whose internal structure is identical in MS.NET and Mono
</I>&gt;<i>
</I>&gt;&gt;<i> &gt;(i.e. they have the same private fields with the same names) are 
</I>&gt;&gt;<i> &gt;interoperable. The reason is that remoting sends a full copy of the 
</I>&gt;&gt;<i> &gt;object and if the receiver expects a different structure for a type 
</I>&gt;&gt;<i> &gt;it will fail. Classes in System.Collections have been gradually 
</I>&gt;&gt;<i> &gt;modified to match those in MS.NET. Other classes may fail.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;Lluis.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Then System.Collections and it's classes including Hashtable are 
</I>&gt;&gt;<i> interoperable? Is there any kind of list of non-interoperable classes?
</I>&gt;<i>
</I>&gt;<i>No, there isn't such a list. Remoting interoperability between different
</I>&gt;<i>CLR implementations is not guaranteed. Some classes that may be
</I>&gt;<i>interoperable nowadays, may change its internal structure in the future
</I>&gt;<i>and break that compatibility. For example, if you find that the class
</I>&gt;<i>CultureInfo is not compatible with MS.NET, we can change it to make it
</I>&gt;<i>compatible, but then we will break interoperability with old mono
</I>&gt;<i>versions.
</I>&gt;<i>
</I>&gt;<i>If interoperability is important to you, you should consider using web
</I>&gt;<i>services instead of remoting.
</I>&gt;<i>
</I>&gt;<i>Lluis.
</I>&gt;<i>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Regards
</I>&gt;&gt;<i> Aleksandar Dezelin
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mono-devel-list mailing list
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mono-devel-list mailing list
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i><A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008103.html">[Mono-devel-list] un-interoperatible classes .NET -&gt; Monoremoting
</A></li>
	<LI>Next message: <A HREF="008090.html">[Mono-devel-list] un-interoperatible classes .NET -&gt; Monoremoting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8126">[ date ]</a>
              <a href="thread.html#8126">[ thread ]</a>
              <a href="subject.html#8126">[ subject ]</a>
              <a href="author.html#8126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
