<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] wsHttpBinding Hangs - Mono 3.0.9
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20wsHttpBinding%20Hangs%20-%20Mono%203.0.9&In-Reply-To=%3C1367759909464-4659590.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040418.html">
   <LINK REL="Next"  HREF="040422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] wsHttpBinding Hangs - Mono 3.0.9</H1>
    <B>jadfab</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20wsHttpBinding%20Hangs%20-%20Mono%203.0.9&In-Reply-To=%3C1367759909464-4659590.post%40n4.nabble.com%3E"
       TITLE="[Mono-dev] wsHttpBinding Hangs - Mono 3.0.9">jfyfe at jadfab.onmicrosoft.com
       </A><BR>
    <I>Sun May  5 13:18:29 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040418.html">[Mono-dev] boostrapping mono
</A></li>
        <LI>Next message: <A HREF="040422.html">[Mono-dev] wsHttpBinding Hangs - Mono 3.0.9
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40421">[ date ]</a>
              <a href="thread.html#40421">[ thread ]</a>
              <a href="subject.html#40421">[ subject ]</a>
              <a href="author.html#40421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, 

I have a self hosted service in WCF which is hanging whenever I use
wsHttpBinding from the configuration file. The code works as expected when
bound to basicHttpBinding but fails whenever I change the binding to
basicHttpBinding. 

I ran &quot;mono -v Program.exe&quot; and executed a SOAP request using SOAP UI , this
is the last few lines of output:

converting method System.Net.HttpListener:SelectAuthenticationScheme
(System.Net.HttpListenerContext)
Method System.Net.HttpListener:SelectAuthenticationScheme
(System.Net.HttpListenerContext) emitted at 0x4021bfb0 to 0x4021bffc (code
length 76) [Program.exe]
converting method
System.ServiceModel.Channels.Http.HttpStandaloneListenerManager/&lt;RegisterListener&gt;c__AnonStoreyF:&lt;&gt;m__10
(System.Net.HttpListenerRequest)
Method
System.ServiceModel.Channels.Http.HttpStandaloneListenerManager/&lt;RegisterListener&gt;c__AnonStoreyF:&lt;&gt;m__10
(System.Net.HttpListenerRequest) emitted at 0x4021c000 to 0x4021c01e (code
length 30) [Program.exe]
converting method System.Net.ListenerAsyncResult:InvokeCallback (object)
Method System.Net.ListenerAsyncResult:InvokeCallback (object) emitted at
0x4021c020 to 0x4021c0cc (code length 172) [Program.exe]
converting method
System.ServiceModel.Channels.Http.HttpStandaloneListenerManager:GetContextCompleted
(System.IAsyncResult)
Method
System.ServiceModel.Channels.Http.HttpStandaloneListenerManager:GetContextCompleted
(System.IAsyncResult) emitted at 0x4021c0d0 to 0x4021c168 (code length 152)
[Program.exe]
converting method System.Net.HttpListener:EndGetContext
(System.IAsyncResult)
Method System.Net.HttpListener:EndGetContext (System.IAsyncResult) emitted
at 0x4021c180 to 0x4021c390 (code length 528) [Program.exe]
converting method System.Net.ListenerAsyncResult:get_IsCompleted ()
Method System.Net.ListenerAsyncResult:get_IsCompleted () emitted at
0x4021c3c0 to 0x4021c45f (code length 159) [Program.exe]
converting method System.Net.ListenerAsyncResult:GetContext ()
Method System.Net.ListenerAsyncResult:GetContext () emitted at 0x4021c460 to
0x4021c4a8 (code length 72) [Program.exe]
converting method System.Net.HttpListenerContext:ParseAuthentication
(System.Net.AuthenticationSchemes)
Method System.Net.HttpListenerContext:ParseAuthentication
(System.Net.AuthenticationSchemes) emitted at 0x4021c4b0 to 0x4021c5d6 (code
length 294) [Program.exe]
converting method
System.ServiceModel.Channels.Http.HttpStandaloneListenerManager:ProcessNewContext
(System.Net.HttpListenerContext)
Method
System.ServiceModel.Channels.Http.HttpStandaloneListenerManager:ProcessNewContext
(System.Net.HttpListenerContext) emitted at 0x4021c5e0 to 0x4021c62d (code
length 77) [Program.exe]
converting method
System.ServiceModel.Channels.Http.HttpStandaloneContextInfo:.ctor
(System.Net.HttpListenerContext)
Method System.ServiceModel.Channels.Http.HttpStandaloneContextInfo:.ctor
(System.Net.HttpListenerContext) emitted at 0x4021c650 to 0x4021c6bf (code
length 111) [Program.exe]
converting method
System.ServiceModel.Channels.Http.HttpListenerManager:ProcessNewContext
(System.ServiceModel.Channels.Http.HttpContextInfo)
Method
System.ServiceModel.Channels.Http.HttpListenerManager:ProcessNewContext
(System.ServiceModel.Channels.Http.HttpContextInfo) emitted at 0x4021c6c0 to
0x4021c74c (code length 140) [Program.exe]
converting method
System.ServiceModel.Channels.Http.HttpListenerManager:SelectChannel
(System.ServiceModel.Channels.Http.HttpContextInfo)
Method System.ServiceModel.Channels.Http.HttpListenerManager:SelectChannel
(System.ServiceModel.Channels.Http.HttpContextInfo) emitted at 0x4021c770 to
0x4021c844 (code length 212) [Program.exe]
converting method
System.ServiceModel.Channels.Http.HttpChannelListenerEntry:FilterHttpContext
(System.ServiceModel.Channels.Http.HttpContextInfo)
Method
System.ServiceModel.Channels.Http.HttpChannelListenerEntry:FilterHttpContext
(System.ServiceModel.Channels.Http.HttpContextInfo) emitted at 0x4021c870 to
0x4021ca61 (code length 497) [Program.exe]
converting method
System.ServiceModel.Channels.Http.HttpStandaloneContextInfo:get_Request ()
Method
System.ServiceModel.Channels.Http.HttpStandaloneContextInfo:get_Request ()
emitted at 0x4021ca80 to 0x4021ca94 (code length 20) [Program.exe]
converting method
System.ServiceModel.Channels.Http.HttpStandaloneRequestInfo:get_HttpMethod
()
Method
System.ServiceModel.Channels.Http.HttpStandaloneRequestInfo:get_HttpMethod
() emitted at 0x4021caa0 to 0x4021cabe (code length 30) [Program.exe]

Looking into the code, methinks the WaitHandle from HttpListenerManager is
the culprit. 

var ce = SelectChannel (ctxi);
if (ce == null)
       throw new InvalidOperationException (&quot;HttpListenerContext does not
match any of the registered channels&quot;);
ce.ContextQueue.Enqueue (ctxi);
ce.WaitHandle.Set ();

I can try to fix this on my own however I was wondering if anyone else has
encountered this problem before and what the fix was before I go digging
into code :)

Thanks in advance
-Justin



--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/wsHttpBinding-Hangs-Mono-3-0-9-tp4659590.html">http://mono.1490590.n4.nabble.com/wsHttpBinding-Hangs-Mono-3-0-9-tp4659590.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040418.html">[Mono-dev] boostrapping mono
</A></li>
	<LI>Next message: <A HREF="040422.html">[Mono-dev] wsHttpBinding Hangs - Mono 3.0.9
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40421">[ date ]</a>
              <a href="thread.html#40421">[ thread ]</a>
              <a href="subject.html#40421">[ subject ]</a>
              <a href="author.html#40421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
