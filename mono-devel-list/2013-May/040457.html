<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] /mono/mini/main.c build error: depends on HAVE_SGEN_GC define, making it impossible to compile for sgen
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20/mono/mini/main.c%20build%20error%3A%20depends%20on%0A%20HAVE_SGEN_GC%20define%2C%20making%20it%20impossible%20to%20compile%20for%20sgen&In-Reply-To=%3CCACmR%2BBB6htTq9kgbJ7rCQw-prm1P8sUrQ-NxG-0FZpnU0Y7SFQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040456.html">
   <LINK REL="Next"  HREF="040458.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] /mono/mini/main.c build error: depends on HAVE_SGEN_GC define, making it impossible to compile for sgen</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20/mono/mini/main.c%20build%20error%3A%20depends%20on%0A%20HAVE_SGEN_GC%20define%2C%20making%20it%20impossible%20to%20compile%20for%20sgen&In-Reply-To=%3CCACmR%2BBB6htTq9kgbJ7rCQw-prm1P8sUrQ-NxG-0FZpnU0Y7SFQ%40mail.gmail.com%3E"
       TITLE="[Mono-dev] /mono/mini/main.c build error: depends on HAVE_SGEN_GC define, making it impossible to compile for sgen">kumpera at gmail.com
       </A><BR>
    <I>Thu May 23 15:29:32 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040456.html">[Mono-dev] /mono/mini/main.c build error: depends on HAVE_SGEN_GC define, making it impossible to compile for sgen
</A></li>
        <LI>Next message: <A HREF="040458.html">[Mono-dev] /mono/mini/main.c build error: depends on HAVE_SGEN_GC define, making it impossible to compile for sgen
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40457">[ date ]</a>
              <a href="thread.html#40457">[ thread ]</a>
              <a href="subject.html#40457">[ subject ]</a>
              <a href="author.html#40457">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>mini.c should not have this. All files in mini should no longer depends on
either defines.

But please move to mono 3.0 as 2.10 is not longer been actively maintained.


On Thu, May 23, 2013 at 11:01 AM, Jeremy Bell &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">bell.jeremy at gmail.com</A>&gt; wrote:

&gt;<i> At some point between branch mono-2-10-9 and branch master, a change was
</I>&gt;<i> made to /mono/mini/main.c:
</I>&gt;<i>
</I>&gt;<i> branch mono-2-10-9:
</I>&gt;<i>
</I>&gt;<i> main.c:
</I>&gt;<i> #include &lt;config.h&gt;
</I>&gt;<i> #include &quot;mini.h&quot;
</I>&gt;<i> #ifndef HOST_WIN32
</I>&gt;<i> #include &quot;buildver.h&quot;
</I>&gt;<i> #endif
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> branch master:
</I>&gt;<i> #include &lt;config.h&gt;
</I>&gt;<i> #include &quot;mini.h&quot;
</I>&gt;<i> #ifndef HOST_WIN32
</I>&gt;<i> #ifdef HAVE_SGEN_GC
</I>&gt;<i> #include &quot;buildver-sgen.h&quot;
</I>&gt;<i> #else
</I>&gt;<i> #include &quot;buildver.h&quot;
</I>&gt;<i> #endif
</I>&gt;<i> #endif
</I>&gt;<i>
</I>&gt;<i> This makes main.c impossible to compile when buildver-sgen.h is generated
</I>&gt;<i> and not buildver.h. First of all, HAVE_SGEN_GC is never defined for files
</I>&gt;<i> in /mini as far as I can tell, so main.c always attempts to include
</I>&gt;<i> buildver.h, which does not exist when buildver-sgen.h is generated instead.
</I>&gt;<i>
</I>&gt;<i> However, even if you explicitly define HAVE_SGEN_GC in CFLAGS, etc... then
</I>&gt;<i> you will still get an error, in mini.h, because it believes it is an error
</I>&gt;<i> to have either HAVE_SGEN_GC or HAVE_BOEHM_GC defined when mini.h is
</I>&gt;<i> included, as /mini code should not have dependencies on the GC being used,
</I>&gt;<i> so it says:
</I>&gt;<i>
</I>&gt;<i> mini.h:
</I>&gt;<i> /*
</I>&gt;<i>  * The mini code should not have any compile time dependencies on the GC
</I>&gt;<i> being used, so the same object file from mini/
</I>&gt;<i>  * can be linked into both mono and mono-sgen.
</I>&gt;<i>  */
</I>&gt;<i> #if defined(HAVE_BOEHM_GC) || defined(HAVE_SGEN_GC)
</I>&gt;<i> #error &quot;The code in mini/ should not depend on these defines.&quot;
</I>&gt;<i> #endif
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> So, either way, main.c won't compile without modification. Is the error in
</I>&gt;<i> /mono/mini/mini.h no longer valid? Or was the change to /mono/mini/main.c
</I>&gt;<i> to depend on the HAVE_SGEN_GC define a regression?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Jeremy
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130523/a89a4d16/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20130523/a89a4d16/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040456.html">[Mono-dev] /mono/mini/main.c build error: depends on HAVE_SGEN_GC define, making it impossible to compile for sgen
</A></li>
	<LI>Next message: <A HREF="040458.html">[Mono-dev] /mono/mini/main.c build error: depends on HAVE_SGEN_GC define, making it impossible to compile for sgen
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40457">[ date ]</a>
              <a href="thread.html#40457">[ thread ]</a>
              <a href="subject.html#40457">[ subject ]</a>
              <a href="author.html#40457">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
