<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Bug in SignedXml.GetIdElement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Bug%20in%20SignedXml.GetIdElement&In-Reply-To=%3C51EE49CA.4030108%40veritas-vos-liberabit.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040618.html">
   <LINK REL="Next"  HREF="040603.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Bug in SignedXml.GetIdElement</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20Bug%20in%20SignedXml.GetIdElement&In-Reply-To=%3C51EE49CA.4030108%40veritas-vos-liberabit.com%3E"
       TITLE="[Mono-dev] Bug in SignedXml.GetIdElement">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Tue Jul 23 09:15:54 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040618.html">[Mono-dev] Bug in SignedXml.GetIdElement
</A></li>
        <LI>Next message: <A HREF="040603.html">[Mono-dev] System.Configuration.SettingValueElement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40619">[ date ]</a>
              <a href="thread.html#40619">[ thread ]</a>
              <a href="subject.html#40619">[ subject ]</a>
              <a href="author.html#40619">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jonathan Gagnon wrote:
&gt;<i>
</I>&gt;<i> On Fri, Jul 19, 2013 at 1:05 PM, Atsushi Eno 
</I>&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A> 
</I>&gt;<i> &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     (2013&#24180;07&#26376;17&#26085; 21:25), Jonathan Gagnon wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         On Tue, Jul 16, 2013 at 12:16 PM, Atsushi Eno
</I>&gt;<i>         &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>             Jonathan Gagnon wrote:
</I>&gt;<i>
</I>&gt;<i>                 It does not work when the SAML document is not
</I>&gt;<i>         referring to
</I>&gt;<i>                 any DTD.  In my case, I receive the following
</I>&gt;<i>         exception when I
</I>&gt;<i>                 call the CheckSignature method :
</I>&gt;<i>
</I>&gt;<i>                 System.Security.Cryptography.CryptographicException:
</I>&gt;<i>         Malformed
</I>&gt;<i>                 reference object: [referenceId]
</I>&gt;<i>                   at
</I>&gt;<i>                
</I>&gt;<i>         System.Security.Cryptography.Xml.SignedXml.GetReferenceHash
</I>&gt;<i>                 (System.Security.Cryptography.Xml.Reference r, Boolean
</I>&gt;<i>                 check_hmac) [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i>                   at
</I>&gt;<i>                
</I>&gt;<i>         System.Security.Cryptography.Xml.SignedXml.CheckReferenceIntegrity
</I>&gt;<i>                 (System.Collections.ArrayList referenceList) [0x00000] in
</I>&gt;<i>                 &lt;filename unknown&gt;:0
</I>&gt;<i>                   at
</I>&gt;<i>                
</I>&gt;<i>         System.Security.Cryptography.Xml.SignedXml.CheckSignatureInternal
</I>&gt;<i>                 (System.Security.Cryptography.AsymmetricAlgorithm key)
</I>&gt;<i>                 [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i>                   at
</I>&gt;<i>         System.Security.Cryptography.Xml.SignedXml.CheckSignature
</I>&gt;<i>                 (System.Security.Cryptography.AsymmetricAlgorithm key)
</I>&gt;<i>                 [0x00000] in &lt;filename unknown&gt;:0
</I>&gt;<i>                   at TestSAML.Program.Main (System.String[] args)
</I>&gt;<i>         [0x00000] in
</I>&gt;<i>                 &lt;filename unknown&gt;:0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>             Of course it happens because you should be processing
</I>&gt;<i>             corresponding DTD or XML Schema.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                 The same code works in .NET and it does work if I
</I>&gt;<i>         modify the
</I>&gt;<i>                 GetIdElement method to check for &quot;ID&quot;.
</I>&gt;<i>
</I>&gt;<i>                 So in your opinion, I should create a class that
</I>&gt;<i>         derives from
</I>&gt;<i>                 SignedXml and override GetIdElement?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>             I'm not sure I would like to answer yes (if you want to
</I>&gt;<i>         have ID
</I>&gt;<i>             being processed) or no (you should actually process DTD or
</I>&gt;<i>         XSD).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         I added references to the corresponding XSDs but it doesn't
</I>&gt;<i>         seem to help.  I'm still getting the same exception.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Because you didn't set up XmlDocument properly to process XSDs.
</I>&gt;<i>     (You're discussing you're doing right without showing code.)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> You're probably right that I didn't set it up properly.  It seems to 
</I>&gt;<i> be a poorly documented part of .NET.  Do you have a link to a good 
</I>&gt;<i> example?
</I>&gt;<i>
</I>&gt;<i> Basically, I tried adding a reference to the xsd inside the SAML 
</I>&gt;<i> document but it didn't help.  Then I tried the following example 
</I>&gt;<i> without success : <A HREF="http://msdn.microsoft.com/en-us/library/ms162371.aspx">http://msdn.microsoft.com/en-us/library/ms162371.aspx</A>
</I>&gt;<i>
</I>&gt;<i> I also noticed that calling the Schemas.Add method is very slow 
</I>&gt;<i> (several seconds each time), and didn't want that overhead in our 
</I>&gt;<i> application.
</I>&gt;<i>
</I>
I have no idea why your code doesn't work as you don't show us the exact 
code, but for the slowness issue I guess you are loading the relevant 
resources (xml schemas and DTDs) every time. Some caching XmlResolver 
would save that (use XmlReaderSettings.XmlResolver). XmlSchema 
processing itself should not take several seconds.

You can partially verify your code only with XmlDocument by calling 
GetElementById() and see if your SAML ID is found. If it's not found, 
then SignedXml won't work for you either.

&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                 It does fix the problem for me. But wouldn't it be
</I>&gt;<i>         better to
</I>&gt;<i>                 modify SignedXml.GetIdElement() to behave more like
</I>&gt;<i>         .NET so
</I>&gt;<i>                 that other users don't encounter the same problem?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>             I don't support any use of API that violates W3C
</I>&gt;<i>         specification.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         &gt;From what I understand, the W3C specification is only about
</I>&gt;<i>         the signature part of a signed xml.  There is nothing
</I>&gt;<i>         regarding other parts of the signed XML, and the SAML standard
</I>&gt;<i>         defines the id differently.  So I'm not sure that supporting
</I>&gt;<i>         SAML ids would violate the W3C specification.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     I don't understand your discussion. Any additional local
</I>&gt;<i>     attributes that do not conform to the XML Schema defined in
</I>&gt;<i>     xmldsig specification violates XML schema validation.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What I'm saying is that the XML Schema defined in xmldsig 
</I>&gt;<i> specification is often applied to a subpart of an XML document.  Here 
</I>&gt;<i> is an example :
</I>&gt;<i>
</I>&gt;<i> &lt;samlp:Response&gt;
</I>&gt;<i>   &lt;saml:Assertion ID=&quot;abc&quot;&gt;
</I>&gt;<i>     &lt;ds:Signature xmlns:ds=&quot;<A HREF="http://www.w3.org/2000/09/xmldsig#">http://www.w3.org/2000/09/xmldsig#</A>&quot;&gt;
</I>&gt;<i>     &lt;/ds:Signature&gt;
</I>&gt;<i>     ...
</I>&gt;<i>   &lt;/saml:Assertion&gt;
</I>&gt;<i> &lt;/samlp:Response&gt;
</I>&gt;<i>
</I>&gt;<i> So the XML Schema defined by the W3C specification only applies to 
</I>&gt;<i> what is inside the &lt;ds:Signature&gt; tags.  Thus, it doesn't violate the 
</I>&gt;<i> XML Schema to have an &quot;ID&quot; attribute for the &lt;saml:Assertion&gt;.
</I>&gt;<i>
</I>&gt;<i> Also, if you look at some examples on the W3C sites, you will find 
</I>&gt;<i> that some of them use &quot;ID&quot; instead of &quot;Id&quot; (that could be a mistake 
</I>&gt;<i> though).  Like this one :
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.w3.org/TR/xmldsig-core/#sec-NamespaceContext">http://www.w3.org/TR/xmldsig-core/#sec-NamespaceContext</A>
</I>&gt;<i>
</I>
This sample elements there are NOT in xmldsig namespace. They are 
totally defined by user (and their schema definitions are unknown). Thus 
that does not work as an objection to my comment.

Though that rang a bell.  I had to rethink about the existing 
implementation. I figured that it is buggy in my view either way, by 
that it allowed &quot;Id&quot; attribute with no reason.

Hence I tried to delete that XPath search for &quot;Id&quot;. It resulted in 3 
NUnit test &quot;regressions&quot;:

1) 
MonoTests.System.Security.Cryptography.Xml.SignedXmlTest.DataReferenceToNonDataObject 
:<i> System.Security.Cryptography.CryptographicException : Malformed 
</I>reference object: id:1

2) MonoTests.System.Security.Cryptography.Xml.SignedXmlTest.GetIdElement 
:<i> System.NullReferenceException : Object reference not set to an 
</I>instance of an object

 From the failure 2) I figured that we still have to look for 
xmldsig:Id, thus merely removing XPath search is wrong; adding namespace 
condition in XPath fixed this.

Still, 1) exposed the difference from .NET. I need to find out how 
xmldsig:Reference processes &quot;ID&quot; by definition. Long story begins from 
here...

It is described at xmldsig section 3.2 Core Validation
<A HREF="http://www.w3.org/TR/xmldsig-core/#sec-CoreValidation">http://www.w3.org/TR/xmldsig-core/#sec-CoreValidation</A>

     The REQUIRED steps of core validation 
&lt;<A HREF="http://www.w3.org/TR/xmldsig-core/#def-ValidationCore">http://www.w3.org/TR/xmldsig-core/#def-ValidationCore</A>&gt; include (1) 
reference validation 
&lt;<A HREF="http://www.w3.org/TR/xmldsig-core/#def-ValidationReference">http://www.w3.org/TR/xmldsig-core/#def-ValidationReference</A>&gt;,
     the verification of the digest contained in each |Reference| in 
|<i>SignedInfo|,
</I>     and (2) the cryptographic signature validation 
&lt;<A HREF="http://www.w3.org/TR/xmldsig-core/#def-ValidationSignature">http://www.w3.org/TR/xmldsig-core/#def-ValidationSignature</A>&gt; of the 
signature calculated
     over |SignedInfo|.

There is very interesting notes immediately below the sentence:

     Note, there may be valid signatures that some signature 
applications are
     unable to validate. Reasons for this include failure to implement 
optional parts
     of this specification, inability or unwillingness to execute 
specified algorithms,
     or inability or unwillingness to dereference specified URIs (some 
URI schemes
     may cause undesirable side effects), etc.

...!? That does not sound very solid. An implementation can 
reject/ignore some signatures.

Anyhow, the key specification seems to be (1) reference validation. 
Section 3.2.1 says:

     Obtain the data object to be digested. (For example, the signature 
application
     may dereference the |URI| and execute |Transforms| provided by the 
signer in the
     R|eference| element, or it may obtain the content through other 
means such as
     a local cache.)

That does not tell anything precise. Let's have a look at the definition 
of URI attribute semantics in Reference element, which is in section 
4.3.3.1:

     The |URI| attribute identifies a data object using a URI-Reference 
[URI &lt;<A HREF="http://www.w3.org/TR/xmldsig-core/#ref-URI">http://www.w3.org/TR/xmldsig-core/#ref-URI</A>&gt;].

     The mapping from this attribute's value to a URI reference MUST be 
performed
     as specified in section 3.2.17 of [XMLSCHEMA Datatypes, 2nd Edition 
&lt;<A HREF="http://www.w3.org/TR/xmldsig-core/#ref-XML-schema">http://www.w3.org/TR/xmldsig-core/#ref-XML-schema</A>&gt;].
     Additionally: Some existing implementations are known to verify the 
value of
     the URI attribute against the grammar in [URI 
&lt;<A HREF="http://www.w3.org/TR/xmldsig-core/#ref-URI">http://www.w3.org/TR/xmldsig-core/#ref-URI</A>&gt;]. It is therefore safest to 
perform
     any necessary escaping while generating the URI attribute.

     We RECOMMEND XML signature applications be able to dereference URIs in
     the HTTP scheme. Dereferencing a URI in the HTTP scheme MUST comply
     with the Status Code Definitions 
&lt;<A HREF="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4">http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4</A>&gt; of 
[HTTP &lt;<A HREF="http://www.w3.org/TR/xmldsig-core/#ref-HTTP">http://www.w3.org/TR/xmldsig-core/#ref-HTTP</A>&gt;] (e.g., 302, 305 and 
307 redirects
     are followed to obtain the entity-body of a 200 status code response).
     Applications should also be cognizant of the fact that protocol 
parameter and
     state information, (such as HTTP cookies, HTML device profiles or 
content
     negotiation), may affect the content yielded by dereferencing a URI.

So, the specification says that URI reference MUST be performed as in 
XML Schema Datatypes Pt.2 (which defines ID type).

There's also some mention on &quot;some existing implementations&quot; and at 
first I looked at this, I thought like &quot;oh we can bring some 
implementation dependent additional ID semantics&quot;. But it only describes 
how URI attribute value should be parsed and not to mention any 
arbitrary ID attributes can be added.

But is there really no possibility to allow ID? 4.3.3.2 describes how 
&quot;#chapter1&quot; is interpreted, as an example:

     Identifies a node-set containing the element with ID attribute 
value 'chapter1'
     of the XML resource containing the signature. XML Signature (and its
     applications) modify this node-set to include the element plus all 
descendants
     including namespaces and attributes -- but not comments.

Here I can claim that the &quot;XML resource&quot; CAN be determined by URI (which 
in general I doubt and I could also say &quot;it must be text/xml as it 
explicitly says XML&quot; though).

Based on that claim, let's read on - in that context, let's follow the 
&quot;recommendation&quot;, which says we should follow HTTP scheme. URI 
fragmentation, as specified in RFC 3986, says that fragment is MIME type 
dependent. Its section 3.5 says:

     The semantics of a fragment identifier are defined by the set of 
representations
     that might result from a retrieval action on the primary resource. 
The fragment's
     format and resolution is therefore dependent on the media type 
[RFC2046] of a
     potentially retrieved representation, even though such a retrieval 
is only
     performed if the URI is dereferenced.

RFC2046 (2045, or 822) doesn't say anything about HTTP specifically. 
Instead HTTP RFC claims something in 7.2.1:

     Any HTTP/1.1 message containing an entity-body SHOULD include a
     Content-Type header field defining the media type of that body. If 
and only if
     the media type is not given by a Content-Type field, the recipient 
MAY attempt
     to guess the media type via inspection of its content and/or the 
name extension(s)
     of the URI used to identify the resource. If the media type remains 
unknown,
     the recipient SHOULD treat it as type &quot;application/octet-stream&quot;.

application/octet-stream means nothing for URI fragment... but it also 
says we &quot;may&quot; attempt to &quot;guess&quot; the media type. Here again I believe we 
should in general say &quot;it must be text/xml (or application/xml+*)&quot;. Yet 
I could thinkg of one rational opportunity for &quot;ID&quot; attribute: it is 
HTTP so we may assume text/html(!)

What happens if we can say it is text/html? It is *case insensitive* ! 
In that case, all of &quot;Id&quot;, &quot;ID&quot;, &quot;id&quot; or &quot;iD&quot; can be (and must be) valid.

This is actually NOT what .NET does; .NET rejects &quot;iD&quot; for no reason (or 
not according to this &quot;theory&quot;). I believe that .NET is rather nothing 
consistent and it is either buggy or took absurd request to process &quot;ID&quot; 
and &quot;id&quot; (but not &quot;iD&quot;) from their users.

Anyhow this is the only possible logical way that I could find to 
include &quot;ID&quot; as SignedXml.GetIdElement()'s processing target.

(Does this logic brings too much ambiguity on existing &quot;look for Id&quot; 
implementation by bringing &quot;valid assumption on ID case insensitivity&quot; ? 
I hope not - this logic can be applied to only when URI fragment is 
involved and the relevant specification mentions text/html or HTTP as 
applicable content type either directly or indirectly. But if it turned 
out to be too ambiguous, I'll quickly recall this permissive idea. It is 
not my taste anyways.)

Back to the NUnit test failure 1), I added that test while I was 
implementing WS-Security stack, so it is actually something that we 
should have covered in the WSS implementation by overriding 
GetIdElement(), and since we indeed do that, we can safely mark this as 
[Ignore] or simply remove that &quot;invalid&quot; test. So we have no trouble on 
changing the semantics of GetIdElement() in *more strict* way too.

Atsushi Eno

&gt;<i> Basically, my point is that it seems like there are more that one 
</I>&gt;<i> standards of XML signature.  SAML is one of them and it defines an ID 
</I>&gt;<i> as &quot;ID&quot; instead of &quot;Id&quot;.  Microsoft seems to have decided to support 
</I>&gt;<i> it directly without the need to process the XSDs.  I thought it would 
</I>&gt;<i> be a good idea to have mono do the same and that is what my patch does.
</I>&gt;<i>
</I>&gt;<i> Jonathan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Atsushi Eno
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>             Though I'm just pointing out the facts. There may be
</I>&gt;<i>         people who
</I>&gt;<i>             want to take responsibility on the entire XML Signature
</I>&gt;<i>         stuff and
</I>&gt;<i>             go ahead to apply the changes.
</I>&gt;<i>
</I>&gt;<i>             Atsushi Eno
</I>&gt;<i>
</I>&gt;<i>                 Thanks,
</I>&gt;<i>
</I>&gt;<i>                 Jonathan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                 On Tue, Jul 16, 2013 at 10:24 AM, Atsushi Eno
</I>&gt;<i>                 &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;&gt;&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>                     Whenever SAML document instance refers to its
</I>&gt;<i>         schema or
</I>&gt;<i>                 DTD that
</I>&gt;<i>                     will validate &quot;ID&quot; attribute as expected, since
</I>&gt;<i>         SignedXml
</I>&gt;<i>                     internally uses XmlDocument.GetElementById () which is
</I>&gt;<i>                 expected to
</I>&gt;<i>                     collect &quot;IDs&quot; where &quot;IDs&quot; means a validated ID by
</I>&gt;<i>                     XmlValidatingReader or any XmlReader that has
</I>&gt;<i>                 XmlReaderSettings to
</I>&gt;<i>                     consider XmlSchema or DTD. Hence that does not
</I>&gt;<i>         cause any
</I>&gt;<i>                 problem
</I>&gt;<i>                     for SAML.
</I>&gt;<i>
</I>&gt;<i>                     (Also note that SignedXml implementation could
</I>&gt;<i>         override
</I>&gt;<i>                     SignedXml.GetIdElement(). Mono's WCF
</I>&gt;<i>         implementation makes
</I>&gt;<i>                 use of
</I>&gt;<i>                     it to support WS-Security ID attribute.)
</I>&gt;<i>
</I>&gt;<i>                     Atsushi Eno
</I>&gt;<i>
</I>&gt;<i>                     Jonathan Gagnon wrote:
</I>&gt;<i>
</I>&gt;<i>                         This is true for the signature, but not true
</I>&gt;<i>         for SAML
</I>&gt;<i>                         assertions, where ids are defined as &quot;ID&quot; :
</I>&gt;<i>
</I>&gt;<i>         <A HREF="http://schemas.stylusstudio.com/saml/nea261b70/complexType_AssertionType.html">http://schemas.stylusstudio.com/saml/nea261b70/complexType_AssertionType.html</A>
</I>&gt;<i>
</I>&gt;<i>                         I don't know in which case we would need &quot;id&quot; in
</I>&gt;<i>                 lowercase,
</I>&gt;<i>                         but since .NET supports it, there is probably
</I>&gt;<i>         a valid
</I>&gt;<i>                 reason
</I>&gt;<i>                         for it too.
</I>&gt;<i>
</I>&gt;<i>                         *Jonathan Gagnon*
</I>&gt;<i>                         Responsable des architectures syst&#232;mes
</I>&gt;<i>                         600, boulevard Armand-Frappier, bureau 200
</I>&gt;<i>                         Laval (Qu&#233;bec) H7V 4B4
</I>&gt;<i>                         Canada
</I>&gt;<i>                         T : 450-662-6101 &lt;tel:450-662-6101&gt;
</I>&gt;<i>         &lt;tel:450-662-6101 &lt;tel:450-662-6101&gt;&gt; &lt;tel:450-662-6101
</I>&gt;<i>         &lt;tel:450-662-6101&gt;
</I>&gt;<i>                 &lt;tel:450-662-6101 &lt;tel:450-662-6101&gt;&gt;&gt; poste 234
</I>&gt;<i>                         &lt;<A HREF="http://www.croesus.com">http://www.croesus.com</A>&gt;
</I>&gt;<i>                              
</I>&gt;<i>          &lt;<A HREF="http://www.facebook.com/pages/Croesus-Finansoft/345020305606240">http://www.facebook.com/pages/Croesus-Finansoft/345020305606240</A>&gt;&lt;<A HREF="http://www.linkedin.com/company/croesus-finansoft?trk=hb_tab_compy_id_26141">http://www.linkedin.com/company/croesus-finansoft?trk=hb_tab_compy_id_26141</A>&gt;&lt;<A HREF="https://twitter.com/CroesusFin">https://twitter.com/CroesusFin</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                         On Tue, Jul 16, 2013 at 2:30 AM, Atsushi Eno
</I>&gt;<i>                         &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;&gt;
</I>&gt;<i>                         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;&gt;&gt;
</I>&gt;<i>                         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;&gt;
</I>&gt;<i>
</I>&gt;<i>                         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">atsushieno at veritas-vos-liberabit.com</A>&gt;&gt;&gt;&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>                             W3C XML Signature specification explicitly
</I>&gt;<i>         &quot;Id&quot; as
</I>&gt;<i>                 the valid
</I>&gt;<i>                             attribute name for referencing an element,
</I>&gt;<i>         by its XML
</I>&gt;<i>                         Schema and DTD:
</I>&gt;<i>         <A HREF="http://www.w3.org/TR/xmldsig-core/#sec-Signature">http://www.w3.org/TR/xmldsig-core/#sec-Signature</A>
</I>&gt;<i>         <A HREF="http://www.w3.org/TR/xmldsig-core/#sec-SignatureValue">http://www.w3.org/TR/xmldsig-core/#sec-SignatureValue</A>
</I>&gt;<i>         <A HREF="http://www.w3.org/TR/xmldsig-core/#sec-SignedInfo">http://www.w3.org/TR/xmldsig-core/#sec-SignedInfo</A>
</I>&gt;<i>         <A HREF="http://www.w3.org/TR/xmldsig-core/#sec-Reference">http://www.w3.org/TR/xmldsig-core/#sec-Reference</A>
</I>&gt;<i>         <A HREF="http://www.w3.org/TR/xmldsig-core/#sec-KeyInfo">http://www.w3.org/TR/xmldsig-core/#sec-KeyInfo</A>
</I>&gt;<i>         <A HREF="http://www.w3.org/TR/xmldsig-core/#sec-Object">http://www.w3.org/TR/xmldsig-core/#sec-Object</A>
</I>&gt;<i>         <A HREF="http://www.w3.org/TR/xmldsig-core/#sec-Manifest">http://www.w3.org/TR/xmldsig-core/#sec-Manifest</A>
</I>&gt;<i>         <A HREF="http://www.w3.org/TR/xmldsig-core/#sec-SignatureProperties">http://www.w3.org/TR/xmldsig-core/#sec-SignatureProperties</A>
</I>&gt;<i>
</I>&gt;<i>                             If Microsoft treats &quot;id&quot; or &quot;ID&quot;
</I>&gt;<i>         attributes as if
</I>&gt;<i>                 they were ID
</I>&gt;<i>                             (and not &quot;iD&quot; ?), they will have to fix
</I>&gt;<i>         their bug.
</I>&gt;<i>
</I>&gt;<i>                             Atsushi Eno
</I>&gt;<i>
</I>&gt;<i>                             (2013&#24180;07&#26376;12&#26085; 23:58), Jonathan Gagnon wrote:
</I>&gt;<i>
</I>&gt;<i>                                 I have encountered a bug similar to 4938
</I>&gt;<i>                                      
</I>&gt;<i>          &lt;<A HREF="https://bugzilla.xamarin.com/show_bug.cgi?id=4938">https://bugzilla.xamarin.com/show_bug.cgi?id=4938</A>&gt;.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                                 My problem is that mono does not find the
</I>&gt;<i>                 reference id
</I>&gt;<i>                         because
</I>&gt;<i>                                 the id is in uppercase ('ID' instead
</I>&gt;<i>         of 'Id').
</I>&gt;<i>                 This works
</I>&gt;<i>                                 correctly on .NET.
</I>&gt;<i>
</I>&gt;<i>                                 As stated in the bug description, the
</I>&gt;<i>         problem
</I>&gt;<i>                 is in the
</I>&gt;<i>                                 SignedXml class, GetIdElement method.
</I>&gt;<i>
</I>&gt;<i>                                 I wrote a very simple patch that fixes the
</I>&gt;<i>                 problem by
</I>&gt;<i>                         looking
</I>&gt;<i>                                 for &quot;id&quot; and &quot;ID&quot;. Should I do a pull
</I>&gt;<i>         request with
</I>&gt;<i>                         that fix?
</I>&gt;<i>
</I>&gt;<i>                                 *Jonathan Gagnon*
</I>&gt;<i>
</I>&gt;<i>                                 Responsable des architectures syst&#232;mes
</I>&gt;<i>                                 600, boulevard Armand-Frappier, bureau 200
</I>&gt;<i>                                 Laval (Qu&#233;bec) H7V 4B4
</I>&gt;<i>                                 Canada
</I>&gt;<i>                                 T : 450-662-6101 &lt;tel:450-662-6101&gt;
</I>&gt;<i>         &lt;tel:450-662-6101 &lt;tel:450-662-6101&gt;&gt;
</I>&gt;<i>                 &lt;tel:450-662-6101 &lt;tel:450-662-6101&gt; &lt;tel:450-662-6101
</I>&gt;<i>         &lt;tel:450-662-6101&gt;&gt;&gt; &lt;tel:450-662-6101 &lt;tel:450-662-6101&gt;
</I>&gt;<i>                 &lt;tel:450-662-6101 &lt;tel:450-662-6101&gt;&gt;
</I>&gt;<i>
</I>&gt;<i>                         &lt;tel:450-662-6101 &lt;tel:450-662-6101&gt;
</I>&gt;<i>         &lt;tel:450-662-6101 &lt;tel:450-662-6101&gt;&gt;&gt;&gt; poste 234
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                                 &lt;<A HREF="http://www.croesus.com">http://www.croesus.com</A>&gt;
</I>&gt;<i>                                              
</I>&gt;<i>         &lt;<A HREF="http://www.facebook.com/pages/Croesus-Finansoft/345020305606240">http://www.facebook.com/pages/Croesus-Finansoft/345020305606240</A>&gt;&lt;<A HREF="http://www.linkedin.com/company/croesus-finansoft?trk=hb_tab_compy_id_26141">http://www.linkedin.com/company/croesus-finansoft?trk=hb_tab_compy_id_26141</A>&gt;&lt;<A HREF="https://twitter.com/CroesusFin">https://twitter.com/CroesusFin</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                                
</I>&gt;<i>         _______________________________________________
</I>&gt;<i>                                 Mono-devel-list mailing list
</I>&gt;<i>         <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;&gt;
</I>&gt;<i>                         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;&gt;&gt;
</I>&gt;<i>                                
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;&gt;
</I>&gt;<i>                         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;
</I>&gt;<i>                 &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>&gt;&gt;&gt;&gt;
</I>&gt;<i>         <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040618.html">[Mono-dev] Bug in SignedXml.GetIdElement
</A></li>
	<LI>Next message: <A HREF="040603.html">[Mono-dev] System.Configuration.SettingValueElement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40619">[ date ]</a>
              <a href="thread.html#40619">[ thread ]</a>
              <a href="subject.html#40619">[ subject ]</a>
              <a href="author.html#40619">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
