<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Stack frames with null methods
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Stack%20frames%20with%20null%20methods&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012062.html">
   <LINK REL="Next"  HREF="012064.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Stack frames with null methods</H1>
    <B>Korn&#233;l P&#225;l</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Stack%20frames%20with%20null%20methods&In-Reply-To="
       TITLE="[Mono-devel-list] Stack frames with null methods">kornelpal at hotmail.com
       </A><BR>
    <I>Mon May 23 09:21:24 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012062.html">[Mono-devel-list] Patch for System.Drawing.Graphics.DrawString
</A></li>
        <LI>Next message: <A HREF="012064.html">[Mono-devel-list] Patch for System.Data.Common and	System.Data.ProviderBase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12063">[ date ]</a>
              <a href="thread.html#12063">[ thread ]</a>
              <a href="subject.html#12063">[ subject ]</a>
              <a href="author.html#12063">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Stack frames can be obtained usually using two ways:
1. Stack trace from an Exception
2. The current stack trace

.NET Framework returns only stack frames with non-null methods.

Mono returns track frames for wrapper functions created by the runtime.
These wrapper functions have no methods associated.

The problem is that StackFrame.GetMethod() may return null on Mono but never
returns null on .NET Framework.

As I know there is no way to get the wrapper function name using managed
code from the runtim on Mono.

I think returning stack frames with null methods is useless.

There is a bug in corlib:
Current StackTrace returns no null methods but StackTrace for an Exception
returns null methods. The behaviour regarding null methods should be
consistent.

The only case when wrapper method can be identified is Exception.StackTrace
property as it calls the internal GetInternalMethodName method of
StackFrame.

Note that the StackFrames of wrapper methods are ignored in the current
StackTrace.

Sometimes it can be good if you know that the exception ocurred in a wrapper
method but StackFrames with null method infos are useless and are making
Mono inclompatible with .NET Framework.

I think the solution sould be not to return StackFrames with null methods in
any cases (current or exception StackTrace) but include them in the string
representation of both stack traces.

Comments are welcomed about stack frames with null methods.

Korn&#233;l


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012062.html">[Mono-devel-list] Patch for System.Drawing.Graphics.DrawString
</A></li>
	<LI>Next message: <A HREF="012064.html">[Mono-devel-list] Patch for System.Data.Common and	System.Data.ProviderBase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12063">[ date ]</a>
              <a href="thread.html#12063">[ thread ]</a>
              <a href="subject.html#12063">[ subject ]</a>
              <a href="author.html#12063">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
