<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Limiting Memory Allocation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Limiting%20Memory%20Allocation&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011847.html">
   <LINK REL="Next"  HREF="011840.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Limiting Memory Allocation</H1>
    <B>Jim Purbrick</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Limiting%20Memory%20Allocation&In-Reply-To="
       TITLE="[Mono-devel-list] Limiting Memory Allocation">jimpurbrick at yahoo.co.uk
       </A><BR>
    <I>Fri May  6 17:28:59 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011847.html">[Mono-devel-list] Some new goodies in Mono.GetOptions
</A></li>
        <LI>Next message: <A HREF="011840.html">[Mono-devel-list] [PATCH] fix problem compiling monodebugger from trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11837">[ date ]</a>
              <a href="thread.html#11837">[ thread ]</a>
              <a href="subject.html#11837">[ subject ]</a>
              <a href="author.html#11837">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Sebastien,

(Apologies for any confusion, I'm rationalising the
private and public conversations I've ended up having
with Sebastien and the list)

&gt;<i> So my big return question is &quot;what's kind of 
</I>&gt;<i> environment will you be supporting ?&quot;. The more 
</I>&gt;<i> accurate your answer is, the more accurate mine
</I>&gt;<i> can be ;-)
</I>
OK. It at _least_ needs to support user authored LSL
[1] scripts which migrate between servers along with
the virtual objects they are associated with [2][3],
can make calls in to the C++ virtual world system and
be called by the C++ virtual world system.

[1] LSL (<A HREF="http://www.sluniverse.com/lsl.html">http://www.sluniverse.com/lsl.html</A>) already
compiles to CIL.
[2] Planned via bytecode translation (with Cecil?) a
la PicoThreads
[3] I need a way to unload code and JIT output on
migration.

If we get to that point, we'll have the same
functionality as the current implementation, but with
300 times the performance thanks to the Mono VM.

Stage 2 is to open it up to any language that targets
the CLR and allow access to (safe) framework classes.

&gt;<i> &gt; Is there anything that can be done in the
</I>&gt;<i> meantime?
</I>&gt;<i> 
</I>&gt;<i> Taking this as a &quot;yes|no&quot; question I can assure you
</I>&gt;<i> the answer is: YES ;-)
</I>
Good :-)

&gt;<i> &gt; Put extra checks in the bytecode translator?
</I>&gt;<i> 
</I>&gt;<i> Yes, it's possible to pre-check assemblies to ensure
</I>&gt;<i> they only use class/methods from within the script
</I>or
&gt;<i> from a &quot;white list&quot;.
</I>
This sounds like a good approach for stage 1, as all
of the IL opcodes will have to be scanned to add the
thread serialization code, so checking that all method
calls are within the script or from a single library
class, shouldn't be too much more work.

&gt;<i> However this approach limit extensibility,
</I>&gt;<i> existing code reuse...
</I>&gt;<i> 
</I>&gt;<i> &gt; Remove dangerous bits of the framework so they
</I>&gt;<i> &gt; can't be called?
</I>&gt;<i> 
</I>&gt;<i> I'm unsure for your project but, in general, I don't
</I>&gt;<i> believe this is a good approach. First the balance 
</I>&gt;<i> (functionality/security) is hard to keep and
</I>&gt;<i> even when something gets completed you risk having a
</I>&gt;<i> very crippled result (functionality-wise), a still 
</I>&gt;<i> insecure subset or (most probably) both.
</I>
I can see that as desired functionality is increased
either the white list or framework trimming approaches
provide diminishing returns and require more and more
effort.
 
&gt;<i> My (probably not very partial ;-) opinion is that
</I>&gt;<i> both options requires a lot of efforts and time (not
</I>
&gt;<i> just to get there but to continue supporting it
</I>&gt;<i> later). The same efforts could be invested in
</I>&gt;<i> defining your security model requirements (well you 
</I>&gt;<i> would need that anyway) and helping to complete CAS
</I>&gt;<i> to match them.
</I>
It seems to me that the best approach would be to use
a white list approach for stage 1, where we're only
considering the very limited LSL language and library
calls, then jump straight to CAS for stage 2 where we
allow more complex languages and frameworks. 

Hopefully this would avoid the nasty middle ground
where we're expending large amounts of effort trying
to grow the white list approach which we could be
spending helping to complete CAS.

This is also nice in that we don't try to bite off
everything in one go, but can get the minimal ammount
working on Mono and then move on to the more ambitious
goals.

&gt;<i> But at this stage it's hard to guess when the payoff
</I>
&gt;<i> would be...
</I>
This is another reason to go for a simple
implementation first. I'd rather have a subset working
while we worked on completing CAS than have everything
potentially delayed.

(Now I just really need to find a way to unload
assemblies and JIT output when I'm done with them)

Cheers,

Jim.


		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos <A HREF="http://uk.photos.yahoo.com">http://uk.photos.yahoo.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011847.html">[Mono-devel-list] Some new goodies in Mono.GetOptions
</A></li>
	<LI>Next message: <A HREF="011840.html">[Mono-devel-list] [PATCH] fix problem compiling monodebugger from trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11837">[ date ]</a>
              <a href="thread.html#11837">[ thread ]</a>
              <a href="subject.html#11837">[ subject ]</a>
              <a href="author.html#11837">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
