<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Assembly binary compatibility?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Assembly%20binary%20compatibility%3F&In-Reply-To=1115221525.5245.84.camel%40omega.maurer">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011810.html">
   <LINK REL="Next"  HREF="011803.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Assembly binary compatibility?</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Assembly%20binary%20compatibility%3F&In-Reply-To=1115221525.5245.84.camel%40omega.maurer"
       TITLE="[Mono-devel-list] Assembly binary compatibility?">bmaurer at ximian.com
       </A><BR>
    <I>Wed May  4 18:59:55 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011810.html">[Mono-devel-list] Assembly binary compatibility?
</A></li>
        <LI>Next message: <A HREF="011803.html">[Mono-devel-list] OpenGL and Tao?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11818">[ date ]</a>
              <a href="thread.html#11818">[ thread ]</a>
              <a href="subject.html#11818">[ subject ]</a>
              <a href="author.html#11818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2005-05-04 at 11:45 -0400, Ben Maurer wrote:
&gt;<i> &gt; Safe to add a private method or data member?
</I>&gt;<i> 
</I>&gt;<i> Private method -- always.
</I>
I take this back. There is a corner case where it is not safe:

foo.cs:

public class BaseThingy {
	public virtual void DoIt () {
		Console.WriteLine (&quot;BaseThingy.DoIt&quot;);
	}
}

public class Thingy : BaseThingy {
#if V2
	private new void DoIt () {
		Console.Write (&quot;Thingy.DoIt&quot;);
	}
#endif
}

client.cs:

using System;

class Foo : Thingy {
	static void Main ()
	{
		new Foo ().DoIt ();
	}
	
	public override void DoIt () {
		System.Console.WriteLine (&quot;Foo is about to do it&quot;);
		base.DoIt ();
	}
}

-----

If client.cs is compiled with v1 of foo.cs and run with v2, it will end
up calling the DoIt method in Thingy, which is private, and will cause
an assertion (mono may not enforce this assertion today).

I added this comment in the bug.

-- Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011810.html">[Mono-devel-list] Assembly binary compatibility?
</A></li>
	<LI>Next message: <A HREF="011803.html">[Mono-devel-list] OpenGL and Tao?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11818">[ date ]</a>
              <a href="thread.html#11818">[ thread ]</a>
              <a href="subject.html#11818">[ subject ]</a>
              <a href="author.html#11818">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
