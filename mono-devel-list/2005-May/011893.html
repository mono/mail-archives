<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] [Fwd: Re: Review of system.data]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BFwd%3A%20Re%3A%20Review%20of%20system.data%5D&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011985.html">
   <LINK REL="Next"  HREF="011894.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] [Fwd: Re: Review of system.data]</H1>
    <B>S Umadevi</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20%5BFwd%3A%20Re%3A%20Review%20of%20system.data%5D&In-Reply-To="
       TITLE="[Mono-devel-list] [Fwd: Re: Review of system.data]">sUmadevi at novell.com
       </A><BR>
    <I>Wed May 11 02:18:02 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011985.html">[Mono-devel-list] Generic Queue and Stack from mscorlib to System
</A></li>
        <LI>Next message: <A HREF="011894.html">[Mono-devel-list] Mono-1.1.7 - NetBSD 2.0.x Support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11893">[ date ]</a>
              <a href="thread.html#11893">[ thread ]</a>
              <a href="subject.html#11893">[ subject ]</a>
              <a href="author.html#11893">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Summary of IRC discussion.

1.AbstractDataContainer and related classes - are really provider
implemenation, was later on moved to provider namespace. The code drop
that we got had it in the common namespace.
2. IsafeRecord interface - to take care of conversion. can be
implemented by any provider.
There is a mail on this from mainsoft to the mailing list. Interesting
if we can use it in the base class rather than with the provider
3. the numeric.cs - tosametype returns dbnull and in every expression
evaluation we are having a default of dbnull. is there a better way to
deal with this?
5. catching base exception lots of places , will be difficult to figure
out the exact exception if we just catch the base exception. Should try
and catch only the specific exceptions. Debugging code will be very
difficult because we will not be able to even catch code errors.
6. object obj1 = expr1.Eval (row);

			if (obj1 == DBNull.Value)

				return obj1;
This code is all around the place in mono.data.sqlexpression. will need
to put it in some base class /common place.
7. internal classes having public methods, we will need to change
them..
8. Array for indices
  Relocation of the elements will be costly. Even though array seems to
be a good enuf datastructure, the relocations may prove costly. Since
there can be multiple dataviews on the same datatable , we can end up
potentially doing many relocations.
9. in future we will look at removing the rowcache from the dataview
totally..since the index cache and the related classes almost serve the
same purpose.
10. synchronizing while doing relocations on the array holding the
indices. While operating from different views, it is possible that we
are relocating the indices in the array from different threads, and
hence there could be potential issues.


11. merging the code - will compile with 2.0 profile and resolve any
errors.
12. connected mode testing - will make it work with sqlclient. incase
there are bugs with sqlclient  then we fix it..
13. will make test cases nunit style. have a script that can be run on
the database for setup..

9,11 are issues, but the design seems to be flexible to accomodate any
datastructure with minimal effort, so incase any of us have a solution
we wil change it then..

Please add/modify incase I have missed anything..


Regards
uma

&gt;&gt;&gt;<i> Konstantin Triger &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">kostat at mainsoft.com</A>&gt; 04/27/05 6:36 PM &gt;&gt;&gt;
</I>
Hello Uma,

I'm CCing mono-devel-list to this email, so anyone who wants to review

the code can find it at 
<A HREF="svn://mono.myrealbox.com/source/branches/Mainsoft.System.Data/mcs/class/System.Data">svn://mono.myrealbox.com/source/branches/Mainsoft.System.Data/mcs/class/System.Data</A>

1. There are 2 efforts made in the code: design improvements related to

indices and bug fixes. Attached a brief design document of the indices

redesign (questions are welcome). Regarding the bug fixes, I will
create 
a relevant changelog.
2. The testsuite we have sent is nunit compatible. To run it, one need

to enter the System.Data/Test/System.Data.Tests.Mainsoft directory and

issue &quot;make&quot; command. After this, the following command should be
issued 
(from the System.Data root):
MONO_PATH=&quot;../../class/lib/default;;$MONO_PATH&quot; mono  --debug 
../../class/lib/default/nunit-console.exe   
/output:TestResult-Mainsoft.log 
/exclude:NotWorking,ValueAdd,CAS,InetAccess 
/xml:TestResult-Mainsoft.xml  
../../class/lib/default/System.Data.Tests.Mainsoft.dll

Currently there are 36 failures in the HEAD branch and 7 failures in
the 
Mainsoft branch.
 From the other side there are 4 regressions running the standard mono

testsuite in the Mainsoft branch.

I'm analysing all this now and will provide resolution/explanation for

each one of the above.

3. Will send later today.

Regards,
Konstantin Triger



S Umadevi wrote:

&gt;<i>Hi 
</I>&gt;<i>  We see that you have checked in the code in SVN under a different
</I>&gt;<i>branch. You had agreed to send us the following (around 2 weeks
</I>back)so
&gt;<i>that the code can be reviewed effectively.
</I>&gt;<i>1. Design document explaining the changes and why the changes are
</I>&gt;<i>done.
</I>&gt;<i>2. Testcases that are failing and what are the testcases that pass
</I>with
&gt;<i>the new code. The testcases that you have sent us are the complete
</I>set
&gt;<i>and as I had mentioned in my previous mails, the testcases that are
</I>new
&gt;<i>in your set needs to be identified to us.(since many  are already
</I>&gt;<i>existing in nunit style)
</I>&gt;<i>3. Since we have implemented the indices using arrays there would be
</I>&gt;<i>some amount of performance degradation. In your mail, you had agreed
</I>to
&gt;<i>share the performance data/tests with us.. Please can you send them..
</I>&gt;<i>
</I>&gt;<i>We have been spending lot of time trying to review/understand the new
</I>&gt;<i>code, since we will have to take it forward from here for the .net
</I>2.0
&gt;<i>features, the above would be very useful..
</I>&gt;<i>
</I>&gt;<i>Also there have been code fixes after you had branched out, we would
</I>&gt;<i>need to merge them too..along with merging the testcases to nunit
</I>style
&gt;<i>testing
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Thanks &amp; Regards
</I>&gt;<i>Uma
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>

-- 
Regards,
Konstantin Triger


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011985.html">[Mono-devel-list] Generic Queue and Stack from mscorlib to System
</A></li>
	<LI>Next message: <A HREF="011894.html">[Mono-devel-list] Mono-1.1.7 - NetBSD 2.0.x Support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11893">[ date ]</a>
              <a href="thread.html#11893">[ thread ]</a>
              <a href="subject.html#11893">[ subject ]</a>
              <a href="author.html#11893">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
