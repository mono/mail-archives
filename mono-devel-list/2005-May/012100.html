<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: [Mono-patches] r44988 - in	trunk/mcs/class/System.Data: System.Data Test/System.Data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20%5BMono-patches%5D%20r44988%20-%20in%0A%09trunk/mcs/class/System.Data%3A%20System.Data%20Test/System.Data&In-Reply-To=4295BAC2.5010906%40mainsoft.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012099.html">
   <LINK REL="Next"  HREF="012106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: [Mono-patches] r44988 - in	trunk/mcs/class/System.Data: System.Data Test/System.Data</H1>
    <B>Sureshkumar T</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20%5BMono-patches%5D%20r44988%20-%20in%0A%09trunk/mcs/class/System.Data%3A%20System.Data%20Test/System.Data&In-Reply-To=4295BAC2.5010906%40mainsoft.com"
       TITLE="[Mono-devel-list] Re: [Mono-patches] r44988 - in	trunk/mcs/class/System.Data: System.Data Test/System.Data">tsureshkumar at novell.com
       </A><BR>
    <I>Thu May 26 09:11:58 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012099.html">[Mono-devel-list] Re: [Mono-patches] r44988 - in trunk/mcs/class/System.Data: System.Data Test/System.Data
</A></li>
        <LI>Next message: <A HREF="012106.html">[Mono-devel-list] Re: [Mono-patches] r44988 -	in	trunk/mcs/class/System.Data: System.Data Test/System.Data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12100">[ date ]</a>
              <a href="thread.html#12100">[ thread ]</a>
              <a href="subject.html#12100">[ subject ]</a>
              <a href="author.html#12100">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>                            index.Update (this, temp);
</I>&gt;<i> &gt;+
</I>&gt;<i> &gt;+                                if (HasVersion (DataRowVersion.Current))
</I>&gt;<i> &gt;+                                        Table.RecordCache.DisposeRecord (Current);
</I>&gt;<i> &gt;+                                Current = temp;
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt;
</I>&gt;<i> Is there some special reason for first updating Original version, then 
</I>&gt;<i> updating an index, and then updating the Current version? Since index 
</I>&gt;<i> built on RowState.None, it uses Default (and not updated) value in index 
</I>&gt;<i> update.
</I>
yes, refer msdn DataTable.Load (object [], LoadOption) method for the
matrix of initial &amp; states.  First thing, I had to do was remove the
regressions caused by your indexes redesign pathes. So, my patch is
mainly a incremental patch, with the following things to be done yet.

      * Since I am changing Original &amp; Current Records, I have to update
        all the indexes which could get invalidated for that row. Best
        way is to update the respective indexes in the Original/Current
        property setters. Let me know if you have some other index
        updating mechanism. Ideally, Original re-assigning also should
        update indexes. I'll be doing that fix later. Otherwise, we can
        rebuild indexes at the end of LoadDataRow method.
      * RowState.None is probably an oversight as that is how you are
        dealing with indexes with PK in other parts.  This custom
        updating would be removed if above point is completed.

Thanks &amp; Best Regards,
suresh.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012099.html">[Mono-devel-list] Re: [Mono-patches] r44988 - in trunk/mcs/class/System.Data: System.Data Test/System.Data
</A></li>
	<LI>Next message: <A HREF="012106.html">[Mono-devel-list] Re: [Mono-patches] r44988 -	in	trunk/mcs/class/System.Data: System.Data Test/System.Data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12100">[ date ]</a>
              <a href="thread.html#12100">[ thread ]</a>
              <a href="subject.html#12100">[ subject ]</a>
              <a href="author.html#12100">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
