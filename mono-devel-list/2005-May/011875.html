<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: [Mono-patches] r44192 -	trunk/mcs/class/System/System.Net.Sockets
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20%5BMono-patches%5D%20r44192%20-%0A%09trunk/mcs/class/System/System.Net.Sockets&In-Reply-To=1115679123.13663.17.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011865.html">
   <LINK REL="Next"  HREF="011853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: [Mono-patches] r44192 -	trunk/mcs/class/System/System.Net.Sockets</H1>
    <B>Dick Porter</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20%5BMono-patches%5D%20r44192%20-%0A%09trunk/mcs/class/System/System.Net.Sockets&In-Reply-To=1115679123.13663.17.camel%40localhost.localdomain"
       TITLE="[Mono-devel-list] Re: [Mono-patches] r44192 -	trunk/mcs/class/System/System.Net.Sockets">dick at ximian.com
       </A><BR>
    <I>Tue May 10 09:23:15 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011865.html">[Mono-devel-list] Re: [Mono-patches] r44192 -	trunk/mcs/class/System/System.Net.Sockets
</A></li>
        <LI>Next message: <A HREF="011853.html">[Mono-devel-list] where is Mint ???
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11875">[ date ]</a>
              <a href="thread.html#11875">[ thread ]</a>
              <a href="subject.html#11875">[ subject ]</a>
              <a href="author.html#11875">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2005-05-09 at 16:52 -0600, Gonzalo Paniagua Javier wrote:
&gt;<i> On Mon, 2005-05-09 at 09:07 +0100, Dick Porter wrote:
</I>&gt;<i> &gt; Given how fragile thread aborting is, even without this race condition
</I>&gt;<i> &gt; this might get ugly.  I can't think of a better solution offhand
</I>&gt;<i> &gt; though...
</I>&gt;<i> 
</I>&gt;<i> Did you see the C test case in the bug report? There seems to be no
</I>&gt;<i> other way of closing from one thread if other is accepting than through
</I>&gt;<i> a signal that interrupts the call.
</I>
I didn't look at it before, but have now.

One possible answer might be to put the socket into non-blocking mode
while it is accept()ing.  accept() then returns EAGAIN (or EWOULDBLOCK)
when there are no connections ready to be accepted, and EBADF when the
socket closes.  I've attached a new version of your C test (I think you
should have been waiting for cond2 in the poll test too, but it didn't
seem to make any difference.)

We would have to make sure to track the requested blocking state.

- Dick




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011865.html">[Mono-devel-list] Re: [Mono-patches] r44192 -	trunk/mcs/class/System/System.Net.Sockets
</A></li>
	<LI>Next message: <A HREF="011853.html">[Mono-devel-list] where is Mint ???
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11875">[ date ]</a>
              <a href="thread.html#11875">[ thread ]</a>
              <a href="subject.html#11875">[ subject ]</a>
              <a href="author.html#11875">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
