<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Patch for generating debug info in	System.Reflection.Emit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patch%20for%20generating%20debug%20info%20in%0A%09System.Reflection.Emit&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011981.html">
   <LINK REL="Next"  HREF="011983.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Patch for generating debug info in	System.Reflection.Emit</H1>
    <B>Lluis Sanchez</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patch%20for%20generating%20debug%20info%20in%0A%09System.Reflection.Emit&In-Reply-To="
       TITLE="[Mono-devel-list] Patch for generating debug info in	System.Reflection.Emit">lluis at ximian.com
       </A><BR>
    <I>Tue May 17 11:25:17 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011981.html">[Mono-devel-list] System.Data upgrade
</A></li>
        <LI>Next message: <A HREF="011983.html">[Mono-devel-list] Patch for generating debug info in	System.Reflection.Emit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11982">[ date ]</a>
              <a href="thread.html#11982">[ thread ]</a>
              <a href="subject.html#11982">[ subject ]</a>
              <a href="author.html#11982">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

This patch adds some basic support for generating debug info in SRE. It
implements ModuleBuilder.DefineDocument and
ILGenerator.MarkSequencePoint, and should be enough for most of
compilers. With this patch, Boo and IKVM can generate correct debug
info.

The symbol writer is still implemented in
Mono.CompilerServices.SymbolWriter. I added a wrapper class that
implements ISymbolWritter and which is created by ModuleBuidler using
reflection. This class just forwards the calls to MonoSymbolWriter (the
one used by mcs).

There is also a patch for reflection.c, which is a workaround for bug
#74914. With this patch, MethodBuilder objects will return the correct
token value after the module is saved. This fixes the problem because
the debug info is generated after saving the module.

I'll commit if there are no objections.
Lluis.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: metadata.diff
Type: text/x-patch
Size: 1056 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050517/9e15ac8d/attachment.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050517/9e15ac8d/attachment.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Mono.CompilerServices.SymbolWriter.diff
Type: text/x-patch
Size: 8789 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050517/9e15ac8d/attachment-0001.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050517/9e15ac8d/attachment-0001.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sre.diff
Type: text/x-patch
Size: 10763 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050517/9e15ac8d/attachment-0002.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050517/9e15ac8d/attachment-0002.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011981.html">[Mono-devel-list] System.Data upgrade
</A></li>
	<LI>Next message: <A HREF="011983.html">[Mono-devel-list] Patch for generating debug info in	System.Reflection.Emit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11982">[ date ]</a>
              <a href="thread.html#11982">[ thread ]</a>
              <a href="subject.html#11982">[ subject ]</a>
              <a href="author.html#11982">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
