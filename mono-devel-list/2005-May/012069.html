<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Patch for System.Data.Common and	System.Data.ProviderBase
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patch%20for%20System.Data.Common%20and%0A%09System.Data.ProviderBase&In-Reply-To=429200BC.5080105%40mainsoft.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012064.html">
   <LINK REL="Next"  HREF="012071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Patch for System.Data.Common and	System.Data.ProviderBase</H1>
    <B>Sureshkumar T</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Patch%20for%20System.Data.Common%20and%0A%09System.Data.ProviderBase&In-Reply-To=429200BC.5080105%40mainsoft.com"
       TITLE="[Mono-devel-list] Patch for System.Data.Common and	System.Data.ProviderBase">tsureshkumar at novell.com
       </A><BR>
    <I>Tue May 24 00:38:29 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012064.html">[Mono-devel-list] Patch for System.Data.Common and	System.Data.ProviderBase
</A></li>
        <LI>Next message: <A HREF="012071.html">[Mono-devel-list] Patch for System.Data.Common and	System.Data.ProviderBase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12069">[ date ]</a>
              <a href="thread.html#12069">[ thread ]</a>
              <a href="subject.html#12069">[ subject ]</a>
              <a href="author.html#12069">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Index: DbParameterBase.cs
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- DbParameterBase.cs	(revision 44908)
</I>&gt;<i> +++ DbParameterBase.cs	(working copy)
</I>&gt;<i> @@ -4,6 +4,7 @@
</I>&gt;<i>  // Author:
</I>&gt;<i>  //   Sureshkumar T (<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">tsureshkumar at novell.com</A>)
</I>&gt;<i>  //   Tim Coleman (<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">tim at timcoleman.com</A>)
</I>&gt;<i> +//   Boris Kirzner &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">borisk at mainsoft.com</A>&gt;
</I>&gt;<i>  //
</I>&gt;<i>  // Copyright (C) Tim Coleman, 2003
</I>&gt;<i>  //
</I>&gt;<i> @@ -30,27 +31,30 @@
</I>&gt;<i>  // WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
</I>&gt;<i>  //
</I>&gt;<i>  
</I>&gt;<i> -#if NET_2_0
</I>&gt;<i> +#if NET_2_0 || TARGET_JVM
</I>&gt;<i>  
</I>&gt;<i>  using System.Data.Common;
</I>&gt;<i>  
</I>&gt;<i>  namespace System.Data.ProviderBase {
</I>&gt;<i>  	public abstract class DbParameterBase : DbParameter
</I>&gt;<i>  	{
</I>&gt;<i> +		#region Fields
</I>&gt;<i>  
</I>&gt;<i> -                #region Fields
</I>
I guess this is a whitespace changes. 

&gt;<i> -                string _name;
</I>&gt;<i> -                ParameterDirection _direction = ParameterDirection.Input;
</I>&gt;<i> -                bool _isNullable = false;
</I>&gt;<i> +		string _parameterName;
</I>
not accepted. mere naming change. 

&gt;<i>  		int _size;
</I>&gt;<i> +#if NET_2_0
</I>&gt;<i>  		byte _precision;
</I>&gt;<i>  		byte _scale;
</I>&gt;<i> -                object _paramValue;
</I>&gt;<i> -                int _offset;
</I>&gt;<i>  		DataRowVersion _sourceVersion;
</I>&gt;<i> +#endif
</I>&gt;<i> +		object _value;
</I>
not accepted. mere naming change. 

&gt;<i> +		ParameterDirection _direction;
</I>&gt;<i> +		bool _isNullable;
</I>&gt;<i> +		int _offset;
</I>&gt;<i>  		string _sourceColumn;
</I>&gt;<i> +		DbParameterCollection _parent = null;
</I>&gt;<i>  
</I>&gt;<i> -                #endregion // Fields
</I>&gt;<i> +		#endregion // Fields
</I>&gt;<i>  
</I>&gt;<i>  		#region Constructors
</I>&gt;<i>  	
</I>&gt;<i> @@ -59,11 +63,19 @@
</I>&gt;<i>  		{
</I>&gt;<i>  		}
</I>&gt;<i>  
</I>&gt;<i> -		[MonoTODO]
</I>&gt;<i>  		protected DbParameterBase (DbParameterBase source)
</I>&gt;<i>  		{
</I>&gt;<i> +			if (source == null) {
</I>&gt;<i> +				throw ExceptionHelper.ArgumentNull(&quot;source&quot;);
</I>
this example, where mono's coding guidelines is not followed. refer
bottom of this message.

&gt;<i> +			}
</I>&gt;<i> +
</I>&gt;<i> +			source.CopyTo(this);
</I>&gt;<i> +			ICloneable cloneable = source._value as ICloneable;
</I>&gt;<i> +			if (cloneable != null) 	{
</I>&gt;<i> +				_value = cloneable.Clone();
</I>&gt;<i> +			}
</I>&gt;<i>  		}
</I>&gt;<i> -
</I>&gt;<i> +        
</I>&gt;<i>  		#endregion // Constructors
</I>&gt;<i>  
</I>&gt;<i>  		#region Properties
</I>&gt;<i> @@ -73,9 +85,29 @@
</I>&gt;<i>  			get { throw new NotImplementedException (); }
</I>&gt;<i>  		}
</I>&gt;<i>  
</I>&gt;<i> -                public override ParameterDirection Direction {
</I>&gt;<i> -			get { return _direction; }
</I>&gt;<i> -			set { _direction = value; }
</I>&gt;<i> +		public override ParameterDirection Direction {
</I>&gt;<i> +			get {
</I>&gt;<i> +				if (_direction == ((ParameterDirection) 0)) {
</I>&gt;<i> +						return ParameterDirection.Input;
</I>&gt;<i> +				}
</I>
what is this check for? revert to previous default assignment of
ParameterDirection.Input.

&gt;<i> +				return _direction;
</I>&gt;<i> +			}
</I>&gt;<i> +			set {
</I>&gt;<i> +				if (_direction != value) {
</I>&gt;<i> +					switch (value) {
</I>&gt;<i> +							case ParameterDirection.Input:
</I>&gt;<i> +							case ParameterDirection.Output:
</I>&gt;<i> +							case ParameterDirection.InputOutput:
</I>&gt;<i> +							case ParameterDirection.ReturnValue:
</I>&gt;<i> +							{
</I>&gt;<i> +								PropertyChanging();
</I>&gt;<i> +								_direction = value;
</I>&gt;<i> +								return;
</I>&gt;<i> +							}
</I>&gt;<i> +					}
</I>&gt;<i> +					throw ExceptionHelper.InvalidParameterDirection(value);
</I>&gt;<i> +				}
</I>&gt;<i> +			
</I>
By the property declaration, this property cannot be set of any value
other than of type ParameterDirection. These exception handling are
irrelevant. Or am I missing something?

&gt;<i> }		}
</I>&gt;<i>  
</I>&gt;<i> +		internal DbParameterCollection Parent
</I>&gt;<i> +		{
</I>&gt;<i> +			get { return _parent; }
</I>&gt;<i> +			set { _parent = value; }
</I>&gt;<i> +		}
</I>&gt;<i> +
</I>
what is the need for this parent reference? is the internal type
justified?  Avoid using internal as far as possible as it complicates
the design. Instead, write a internal method wherever you want to access
internal data. i.e. add a public behavior to manipulate a state rather
the state itself.

&gt;<i> +	* DbParameterBase.cs
</I>&gt;<i> +		- Private members names changed to suite naming conventions.
</I>
where did you get this naming convetion? I cannot accept changing _name
to _parameterName and terming it as a naming convention. _name inside a
DbParameterBase is always the Parameter's name. I don't see any
advantages of this kind of convention. Please follow whatever defined as
coding guidelines and if you want to add additional coding guidelies,
please propose so that others could follow if good.

it would be nice if you follow mono's coding guidelines, as many places
they are not followed.

&gt;<i> +		- Implemented copy ctor.
</I>&gt;<i> +		- Reimplemented Direction, ParameterName, Size and SourceColumn properties.
</I>&gt;<i> +		- Added #ifdef NET_2_0 on methods not used in NET_1_1
</I>
is it the whole purpose? didn't you miss the NET_2_0 spec on top of the
file.

suresh

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012064.html">[Mono-devel-list] Patch for System.Data.Common and	System.Data.ProviderBase
</A></li>
	<LI>Next message: <A HREF="012071.html">[Mono-devel-list] Patch for System.Data.Common and	System.Data.ProviderBase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12069">[ date ]</a>
              <a href="thread.html#12069">[ thread ]</a>
              <a href="subject.html#12069">[ subject ]</a>
              <a href="author.html#12069">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
