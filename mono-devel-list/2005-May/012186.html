<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Determine the name and/or kind of CLI	runtime environment
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Determine%20the%20name%20and/or%20kind%20of%20CLI%0A%09runtime%20environment&In-Reply-To=008b01c564f2%2410f19c20%240100a8c0%40kornelpal.hu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012183.html">
   <LINK REL="Next"  HREF="012188.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Determine the name and/or kind of CLI	runtime environment</H1>
    <B>Jackson Harper</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Determine%20the%20name%20and/or%20kind%20of%20CLI%0A%09runtime%20environment&In-Reply-To=008b01c564f2%2410f19c20%240100a8c0%40kornelpal.hu"
       TITLE="[Mono-devel-list] Determine the name and/or kind of CLI	runtime environment">jackson at ximian.com
       </A><BR>
    <I>Tue May 31 05:46:22 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012183.html">[Mono-devel-list] Binding Arrays to GTK#'s TreeView,	having properties as columns
</A></li>
        <LI>Next message: <A HREF="012188.html">[Mono-devel-list] problem using Gst-sharp with an application in	gtk#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12186">[ date ]</a>
              <a href="thread.html#12186">[ thread ]</a>
              <a href="subject.html#12186">[ subject ]</a>
              <a href="author.html#12186">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2005-05-30 at 10:31 +0200, Korn&#233;l P&#225;l wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Is there any official or unofficial but working way to determine what kind
</I>&gt;<i> of CLI runtime environment is executing the assembly?
</I>
&gt;<i> They have different interfaces to low level runtime functionality and it is
</I>&gt;<i> good if an error report contains the name of the CLI runtime as well.
</I>&gt;<i> 
</I>
  As for your first reason, I think you are better off checking for the
runtime functionality on a case-by-case basis instead of saying:

	if (mono)
  		do some mono specific stuff
	if (msft)
  		do some msft specific stuff

it is usually better to do something along the lines of

	if (determine whether runtime supports a feature)
   		do feature specific stuff

a variation would be:

	try {
    		Feature = val;
	}  catch {
    		// On mono this throws an exception...
	}

as for your second point I agree that having the
runtime/platform/version in error reporting could be very useful. One
way of getting a version number on mono would be to pull the corlib
version number from System.Environment. This is stored in a variable
named mono_corlib_version that you could access via reflection. This
would obviously only work on mono. You can also grab the AssemblyProduct
or AssemblyCompany attributes from System.dll. On mono these are set to
different values then on msft. There aren't any guarantees the name will
stay the same though. Ultimately this will get pretty messy, forcing you
to probe different places for different features. Also this obviously
won't scale to new CLI runtimes, and as you are accessing private data
this could be broken by changes in the underlying runtimes.

Good luck!
Jackson




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012183.html">[Mono-devel-list] Binding Arrays to GTK#'s TreeView,	having properties as columns
</A></li>
	<LI>Next message: <A HREF="012188.html">[Mono-devel-list] problem using Gst-sharp with an application in	gtk#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12186">[ date ]</a>
              <a href="thread.html#12186">[ thread ]</a>
              <a href="subject.html#12186">[ subject ]</a>
              <a href="author.html#12186">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
