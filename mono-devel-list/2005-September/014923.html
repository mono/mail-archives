<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Key derivation and encryption in cross platform	environments
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Key%20derivation%20and%20encryption%20in%20cross%20platform%0A%09environments&In-Reply-To=7fb639590509231008632c3ee2%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014922.html">
   <LINK REL="Next"  HREF="014953.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Key derivation and encryption in cross platform	environments</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Key%20derivation%20and%20encryption%20in%20cross%20platform%0A%09environments&In-Reply-To=7fb639590509231008632c3ee2%40mail.gmail.com"
       TITLE="[Mono-dev] Key derivation and encryption in cross platform	environments">sebastien.pouliot at gmail.com
       </A><BR>
    <I>Fri Sep 23 13:32:15 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014922.html">[Mono-dev] Key derivation and encryption in cross platform	environments
</A></li>
        <LI>Next message: <A HREF="014953.html">[Mono-dev] Key derivation and encryption in cross platform	environments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14923">[ date ]</a>
              <a href="thread.html#14923">[ thread ]</a>
              <a href="subject.html#14923">[ subject ]</a>
              <a href="author.html#14923">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Martin,

On Fri, 2005-23-09 at 18:08 +0100, Martin Hinks wrote:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> Can someone help me out with these two things please:
</I>&gt;<i> 
</I>&gt;<i> Which .NET Encryption classes does Mono support that will work cross
</I>&gt;<i> platform? eg. I encrypt on Windows using .NET and the Linux class can
</I>&gt;<i> decrypt the same file and visa versa.
</I>
This should always works - or it's a bug ;-)

You may have problems with other toolkits (e.g. Java) or (strangely)
even CryptoAPI interop as the endianess of some numbers may be reversed
- *but* that doesn't affect .NET between Mono and MS.

&gt;<i> In the same vein, how can I derive a key from a password that will
</I>&gt;<i> yield the same result on Windows and Linux?
</I>
There are no problem as PasswordDeriveBytes implements pkcs#5 v1 *with*
some additions if you ask &quot;too much&quot; bytes (supported by Mono). 

There are known problems *if*

(a)  you're using a PasswordDeriveBytes ctor with a CspParameter (which
calls into a specific CryptoAPI provider). Each provider can derive as
it likes the key... very bad for interop (even on Windows).

&gt;<i> I have tried using DeriveBytes but it seemed to give different results
</I>&gt;<i> on Win/Mono last time I tried...
</I>
(b) you hit a bug. Seriously MS has some *bad* bugs depending on how you
call GetBytes... AFAIK this is fixed only in 2.0 (but it's easy to
workaround in 1.x) but if you're using 2.0 you should use
Rfc2898DeriveBytes (pkcs#5 v2).

Don't hesitate to open a bugzilla issue if you find any difference in
crypto (I'll close it if it's a known MS bug).
-- 
Sebastien Pouliot
email: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastien at ximian.com</A>
blog: <A HREF="http://pages.infinit.net/ctech/">http://pages.infinit.net/ctech/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014922.html">[Mono-dev] Key derivation and encryption in cross platform	environments
</A></li>
	<LI>Next message: <A HREF="014953.html">[Mono-dev] Key derivation and encryption in cross platform	environments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14923">[ date ]</a>
              <a href="thread.html#14923">[ thread ]</a>
              <a href="subject.html#14923">[ subject ]</a>
              <a href="author.html#14923">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
