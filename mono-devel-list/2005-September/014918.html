<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Infinite loop in SsllServerStream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Infinite%20loop%20in%20SsllServerStream&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014926.html">
   <LINK REL="Next"  HREF="014919.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Infinite loop in SsllServerStream</H1>
    <B>Ian Moir</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Infinite%20loop%20in%20SsllServerStream&In-Reply-To="
       TITLE="[Mono-dev] Infinite loop in SsllServerStream">mono_list at templetech.com
       </A><BR>
    <I>Fri Sep 23 11:12:42 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014926.html">[Mono-dev] Revised mod_mono vhost clash patch
</A></li>
        <LI>Next message: <A HREF="014919.html">[Mono-dev] Infinite loop in SsllServerStream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14918">[ date ]</a>
              <a href="thread.html#14918">[ thread ]</a>
              <a href="subject.html#14918">[ subject ]</a>
              <a href="author.html#14918">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello

I am trying to track down the cause of an infinite loop I am seeing in 
the class Mono.Security.Protocol.Tls.SslServerStream(). I can easily get 
some threads in my app into infinite loops by making several quick http 
type requests and one or more threads reading the request may end up in 
infinite loops. The loops seem to be in the 
SslServerStream.doHandshake() method, stuck in the following code:

               while (this.context.LastHandshakeMsg != 
HandshakeType.Finished)
               {
                   this.protocol.ReceiveRecord();
               }

I have not found an obvious way to get it out of this loop, such as the 
socket has closed or diconnected. Any socket experts out there that can 
suggest some guidance on this, even with just this short explanation?

I will report this as a bug, and am working on some code to demo this 
bug, but have not got to that point  yet. I will publish some demo code 
as soon as I have it reasonably isolated.

Ian Moir


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014926.html">[Mono-dev] Revised mod_mono vhost clash patch
</A></li>
	<LI>Next message: <A HREF="014919.html">[Mono-dev] Infinite loop in SsllServerStream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14918">[ date ]</a>
              <a href="thread.html#14918">[ thread ]</a>
              <a href="subject.html#14918">[ subject ]</a>
              <a href="author.html#14918">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
