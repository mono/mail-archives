<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Infinite loop in SsllServerStream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Infinite%20loop%20in%20SsllServerStream&In-Reply-To=433423CF.7030404%40templetech.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014920.html">
   <LINK REL="Next"  HREF="014924.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Infinite loop in SsllServerStream</H1>
    <B>Ian Moir</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Infinite%20loop%20in%20SsllServerStream&In-Reply-To=433423CF.7030404%40templetech.com"
       TITLE="[Mono-dev] Infinite loop in SsllServerStream">mono_list at templetech.com
       </A><BR>
    <I>Fri Sep 23 12:59:37 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014920.html">[Mono-dev] Infinite loop in SsllServerStream
</A></li>
        <LI>Next message: <A HREF="014924.html">[Mono-dev] Infinite loop in SsllServerStream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14921">[ date ]</a>
              <a href="thread.html#14921">[ thread ]</a>
              <a href="subject.html#14921">[ subject ]</a>
              <a href="author.html#14921">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Sebastien

I just tried my app in 1.1.9.1 and the problem is still there. In fact, 
more threads seem to end up taking lots of CPU and seem to be in 
infinite loops.

I will get a demo app out asap

Ian

Ian Moir wrote:

&gt;<i> Bonjour Sebastien
</I>&gt;<i>
</I>&gt;<i> Sorry about that. The version I am working on is old, 1.1.5, but a 
</I>&gt;<i> colleage has verified that this problem does occur in 1.1.8, and I 
</I>&gt;<i> believe that he has also seen it in 1.1.9, but I will be confirming 
</I>&gt;<i> that sometime today for myself. I'll let you know how when I am done 
</I>&gt;<i> with that. We are reluctant to change version unless we find a good 
</I>&gt;<i> reason to do so, such as a bug fix we are interested in.
</I>&gt;<i>
</I>&gt;<i> Ian
</I>&gt;<i>
</I>&gt;<i> Sebastien Pouliot wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hello Ian,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Fri, 2005-23-09 at 09:12 -0600, Ian Moir wrote:
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hello
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I am trying to track down the cause of an infinite loop I am seeing 
</I>&gt;&gt;&gt;<i> in the class Mono.Security.Protocol.Tls.SslServerStream(). I can 
</I>&gt;&gt;&gt;<i> easily get some threads in my app into infinite loops by making 
</I>&gt;&gt;&gt;<i> several quick http type requests and one or more threads reading the 
</I>&gt;&gt;&gt;<i> request may end up in infinite loops. The loops seem to be in the 
</I>&gt;&gt;&gt;<i> SslServerStream.doHandshake() method, stuck in the following code:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>               while (this.context.LastHandshakeMsg != 
</I>&gt;&gt;&gt;<i> HandshakeType.Finished)
</I>&gt;&gt;&gt;<i>               {
</I>&gt;&gt;&gt;<i>                   this.protocol.ReceiveRecord();
</I>&gt;&gt;&gt;<i>               }
</I>&gt;&gt;&gt;<i>   
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Which version of Mono are you using ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There's been major changes in 1.1.9 so debugging this issue with earlier
</I>&gt;&gt;<i> version of Mono won't help much.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I have not found an obvious way to get it out of this loop, such as 
</I>&gt;&gt;&gt;<i> the socket has closed or diconnected. Any socket experts out there 
</I>&gt;&gt;&gt;<i> that can suggest some guidance on this, even with just this short 
</I>&gt;&gt;&gt;<i> explanation?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I will report this as a bug, and am working on some code to demo 
</I>&gt;&gt;&gt;<i> this bug, but have not got to that point  yet. I will publish some 
</I>&gt;&gt;&gt;<i> demo code as soon as I have it reasonably isolated.
</I>&gt;&gt;&gt;<i>   
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014920.html">[Mono-dev] Infinite loop in SsllServerStream
</A></li>
	<LI>Next message: <A HREF="014924.html">[Mono-dev] Infinite loop in SsllServerStream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14921">[ date ]</a>
              <a href="thread.html#14921">[ thread ]</a>
              <a href="subject.html#14921">[ subject ]</a>
              <a href="author.html#14921">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
