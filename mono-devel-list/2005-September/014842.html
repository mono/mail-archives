<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] RE: [Mono-devel-list] System.Data : DataTable.Select	performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20RE%3A%20%5BMono-devel-list%5D%20System.Data%20%3A%20DataTable.Select%0A%09performance&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014826.html">
   <LINK REL="Next"  HREF="014827.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] RE: [Mono-devel-list] System.Data : DataTable.Select	performance</H1>
    <B>Boris Kirzner</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20RE%3A%20%5BMono-devel-list%5D%20System.Data%20%3A%20DataTable.Select%0A%09performance&In-Reply-To="
       TITLE="[Mono-dev] RE: [Mono-devel-list] System.Data : DataTable.Select	performance">borisk at mainsoft.com
       </A><BR>
    <I>Mon Sep 19 10:53:58 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014826.html">[Mono-dev] How to do a Tao release?
</A></li>
        <LI>Next message: <A HREF="014827.html">[Mono-dev] RE: [Mono-devel-list] System.Data :	DataTable.Select performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14842">[ date ]</a>
              <a href="thread.html#14842">[ thread ]</a>
              <a href="subject.html#14842">[ subject ]</a>
              <a href="author.html#14842">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt;&gt;@@ -193,9 +206,14 @@
</I>&gt;<i> &gt;&gt;  				return false;
</I>&gt;<i> &gt;&gt;  			}
</I>&gt;<i> &gt;&gt;-			if (_filter != filter)
</I>&gt;<i> &gt;&gt;-				return false;
</I>&gt;<i> &gt;&gt;+			if (_filter != null) {
</I>&gt;<i> &gt;&gt;+				if (!_filter.Equals (filter))
</I>&gt;<i> &gt;&gt;+					return false;
</I>&gt;<i> &gt;&gt;+			}
</I>&gt;<i> &gt;&gt;+			else if (filter != null)
</I>&gt;<i> &gt;&gt;+					return false;
</I>&gt;<i> 
</I>&gt;<i> First thing is that this whole code above can be simplified into
</I>&gt;<i> 
</I>&gt;<i> if (_filter != null &amp;&amp; !_filter.Equals (filter))
</I>&gt;<i> 	return false;
</I>&gt;<i> 
</I>&gt;<i> and also, this logic is wrong. if you are looking for a 
</I>&gt;<i> non-null filter, an index with null filter would also match up.
</I>
No, the null-filter index is supposed to hold more records (rows) that a
non-null filter one, so getting non-null filter index in the case I'm
looking for a null-filter one will lead to missing rows in search and,
in opposite case (null filter instead of non-null one) - to the spare
rows in search.
So the exact logic is that two keys are the same only if their filters
are the same (or both null). In any other case (only one of the filters
is null or filters are not equal), the keys differ.

Boris.

&gt;<i> 
</I>&gt;<i> So, IMO, it should be
</I>&gt;<i> 
</I>&gt;<i> if ( (_filter != null &amp;&amp; !_filter.Equals (filter)) /* equals compare 
</I>&gt;<i> */ 		|| (_filter != filter)) /* null compare */
</I>&gt;<i> 	return false;
</I>&gt;<i> 
</I>This is ok, but it is exactly the same logic as in the original patch.

--
Boris Kirzner
Mono R&amp;D team, Mainsoft Corporation.
Blogging at <A HREF="http://boriskirzner.blogspot.com/">http://boriskirzner.blogspot.com/</A>  

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014826.html">[Mono-dev] How to do a Tao release?
</A></li>
	<LI>Next message: <A HREF="014827.html">[Mono-dev] RE: [Mono-devel-list] System.Data :	DataTable.Select performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14842">[ date ]</a>
              <a href="thread.html#14842">[ thread ]</a>
              <a href="subject.html#14842">[ subject ]</a>
              <a href="author.html#14842">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
