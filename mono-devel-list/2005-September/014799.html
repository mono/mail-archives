<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Re: [Mono-devel-list] TimeStamp support on oracle...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Re%3A%20%5BMono-devel-list%5D%20TimeStamp%20support%20on%20oracle...&In-Reply-To=200509020954.23664.informatique.internet%40fiducial.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014475.html">
   <LINK REL="Next"  HREF="014477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Re: [Mono-devel-list] TimeStamp support on oracle...</H1>
    <B>Daniel Morgan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Re%3A%20%5BMono-devel-list%5D%20TimeStamp%20support%20on%20oracle...&In-Reply-To=200509020954.23664.informatique.internet%40fiducial.fr"
       TITLE="[Mono-dev] Re: [Mono-devel-list] TimeStamp support on oracle...">monodanmorg at yahoo.com
       </A><BR>
    <I>Fri Sep 16 10:03:16 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014475.html">[Mono-dev] Re: [Mono-devel-list] TimeStamp support on oracle...
</A></li>
        <LI>Next message: <A HREF="014477.html">[Mono-dev] .NET Remoting: Upload of a file from a Win32 MS .NET	client to a Linux Mono .NET server.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14799">[ date ]</a>
              <a href="thread.html#14799">[ thread ]</a>
              <a href="subject.html#14799">[ subject ]</a>
              <a href="author.html#14799">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Hubert,
 
Hmmm...  I never did try filling a data set with a timestamp.  Only selecting and inserting via a parameter.
 
Internally, OracleDateTime uses a System.DateTime.  This should change.  We should separate the various parts in OracleDateTime.  I will look into System.DateTime to see how its implemented.  
 
An Oracle TIMESTAMP can have a milliseconds precision of up to 9 digits while System.DateTime is 3 (if my memory serves me correctly).  By default, a TIMESTAMP has a milliseconds precision of 6.  In Mono's OracleClient, the milliseconds are (in theory) are trimmed down to fit in a System.DateTime using division.   Maybe, we should be doing something different. Any suggestions?
 
Maybe we should be using an OracleDateTime internally instaed of System.DateTime in OciBindHandle, OciDefineHandle, and OracleDataReader.
 
What is the definition of your TIMESTAMPs?  How does some of your TIMESTAMPs look like?
 
Daniel

Hubert FONGARNAND &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">informatique.internet at fiducial.fr</A>&gt; wrote:
&gt;<i> I committed to svn trunk HEAD support for Oracle TIMESTAMP using an
</I>&gt;<i> OciDateTime descriptor.
</I>
I've update my mono from svn and i run a little test : 

cmd.Connection=new OracleConnection(cnx);
cmd.CommandText=&quot;SELECT datetime FROM essai&quot;;
OracleDataAdapter dta=new OracleDataAdapter(cmd);
DataSet ds = new DataSet();
dta.Fill(ds,&quot;TABLE&quot;);
Console.WriteLine(&quot;OK&quot;);
foreach(DataRow row in ds.Tables[&quot;TABLE&quot;].Rows)
{
Console.WriteLine(row[&quot;DATETIME&quot;]);
} 
I get :
*** glibc detected *** free(): invalid pointer: 0x082fe20c ***
Abandon

It fails when it does dta.Fill
When i do a mono --trace the last line i get is :
. . . . . . . . . . ENTER: 
System.Data.OracleClient.Oci.OciDefineHandle:Dispose (bool)(this:0x5cf00
[System.Data.OracleClient.Oci.OciDefineHandle sqlserver.exe], 1, )
. . . . . . . . . . . ENTER: (wrapper managed-to-native) 
System.Runtime.InteropServices.Marshal:FreeHGlobal (intptr)(0x82ff9f4, )


		
---------------------------------
Yahoo! for Good
 Click here to donate to the Hurricane Katrina relief effort. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050916/c65aa46e/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20050916/c65aa46e/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014475.html">[Mono-dev] Re: [Mono-devel-list] TimeStamp support on oracle...
</A></li>
	<LI>Next message: <A HREF="014477.html">[Mono-dev] .NET Remoting: Upload of a file from a Win32 MS .NET	client to a Linux Mono .NET server.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14799">[ date ]</a>
              <a href="thread.html#14799">[ thread ]</a>
              <a href="subject.html#14799">[ subject ]</a>
              <a href="author.html#14799">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
