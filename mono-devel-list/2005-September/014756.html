<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] TimeZone and CurrentTimeZone (updated)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20TimeZone%20and%20CurrentTimeZone%20%28updated%29&In-Reply-To=43273370.5010204%40kinitos.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014755.html">
   <LINK REL="Next"  HREF="014757.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] TimeZone and CurrentTimeZone (updated)</H1>
    <B>Chris Micacchi</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20TimeZone%20and%20CurrentTimeZone%20%28updated%29&In-Reply-To=43273370.5010204%40kinitos.com"
       TITLE="[Mono-dev] TimeZone and CurrentTimeZone (updated)">mono at kinitos.com
       </A><BR>
    <I>Tue Sep 13 16:42:33 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014755.html">[Mono-dev] TimeZone and CurrentTimeZone
</A></li>
        <LI>Next message: <A HREF="014757.html">[Mono-dev] Mono 1.1.9 broken DataGrid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14756">[ date ]</a>
              <a href="thread.html#14756">[ thread ]</a>
              <a href="subject.html#14756">[ subject ]</a>
              <a href="author.html#14756">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Slight correction.  The deserialization error I get isn't coming from 
DateTime, but directly from the class with a member of type TimeZone.

An example:

On Mono:
class MyClass {
	System.TimeZone  _TimeZone = System.TimeZone.CurrentTimeZone;
	
	MyClass()
	{
		// Constructor
	}
}

Attempting to serialize that will fail with the first exception (&quot;Type 
System.CurrentTimeZone is not marked as Serializable.&quot;), even though 
System.TimeZone is Serializable.

If you change the class so that CurrentTimeZone is serializable and 
rebuild mono, then the class above serializes just fine, but if the 
deserializing end is .Net, it will get an exception since (apparently) 
.Net doesn't have any such internal class as CurrentTimeZone.

--
Chris

Chris Micacchi wrote:
&gt;<i> Hello everyone,
</I>&gt;<i> 
</I>&gt;<i> I'm getting an exception trying to send an object of type DateTime from
</I>&gt;<i> a Linux machine running Mono to a Windows one running .Net.  The 
</I>&gt;<i> exception is &quot;Type System.CurrentTimeZone is not marked as 
</I>&gt;<i> Serializable.&quot;  System.TimeZone is supposedly serializable, but called 
</I>&gt;<i> System.TimeZone.CurrentTimeZone returns something that isn't serializable.
</I>&gt;<i> 
</I>&gt;<i> Interestingly enough, when I went in and marked the type as 
</I>&gt;<i> [Serializable] and rebuild mono, I get an error deserializing the 
</I>&gt;<i> DateTime object on Windows (it doesn't recognize the type of the 
</I>&gt;<i> CurrentTimeZone object).
</I>&gt;<i> 
</I>&gt;<i> What's the status of this class?  Is this currently an expected issue?
</I>&gt;<i> 
</I>&gt;<i> Thanks for any info,
</I>&gt;<i> 
</I>&gt;<i> Chris
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014755.html">[Mono-dev] TimeZone and CurrentTimeZone
</A></li>
	<LI>Next message: <A HREF="014757.html">[Mono-dev] Mono 1.1.9 broken DataGrid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14756">[ date ]</a>
              <a href="thread.html#14756">[ thread ]</a>
              <a href="subject.html#14756">[ subject ]</a>
              <a href="author.html#14756">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
