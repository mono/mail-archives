<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] possible bug in ConcurrentDictionary
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20possible%20bug%20in%20ConcurrentDictionary&In-Reply-To=%3CCAG2oYtJrHnDz3v_A9j6ruTuNsy0aM3RJgM0m5Ub3qTU-aLHJ0g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039783.html">
   <LINK REL="Next"  HREF="039782.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] possible bug in ConcurrentDictionary</H1>
    <B>Debacker</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20possible%20bug%20in%20ConcurrentDictionary&In-Reply-To=%3CCAG2oYtJrHnDz3v_A9j6ruTuNsy0aM3RJgM0m5Ub3qTU-aLHJ0g%40mail.gmail.com%3E"
       TITLE="[Mono-dev] possible bug in ConcurrentDictionary">debackerl at gmail.com
       </A><BR>
    <I>Thu Nov 15 09:19:35 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="039783.html">[Mono-dev] Compile error with debuild on Ubuntu
</A></li>
        <LI>Next message: <A HREF="039782.html">[Mono-dev] possible bug in ConcurrentDictionary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39781">[ date ]</a>
              <a href="thread.html#39781">[ thread ]</a>
              <a href="subject.html#39781">[ subject ]</a>
              <a href="author.html#39781">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

While reading the code of ConcurrentDictionary and SplitOrderedList, I
believe I have identified an issue. In method
ConcurrentDictionary.TryRemove, you'll see this line:

bool result = internalDictionary.Delete (Hash (key), out data);

Only key's hash is used, not the key itself. Consequently, two
different keys with hash collision will be indistinguishable by
SplitOrderedList.

Key hash collisions are probably very rare, but it's not standard compliant.

Regards,
Laurent Debacker
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039783.html">[Mono-dev] Compile error with debuild on Ubuntu
</A></li>
	<LI>Next message: <A HREF="039782.html">[Mono-dev] possible bug in ConcurrentDictionary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39781">[ date ]</a>
              <a href="thread.html#39781">[ thread ]</a>
              <a href="subject.html#39781">[ subject ]</a>
              <a href="author.html#39781">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
