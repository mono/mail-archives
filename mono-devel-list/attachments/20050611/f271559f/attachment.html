<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&lt;font&nbsp;face=&quot;Tahoma&quot;&gt;Hi,&nbsp;All!&lt;br&gt;<br>
&lt;br&gt;<br>
Rafael's&nbsp;guess&nbsp;is&nbsp;correct.&nbsp;Since&nbsp;Java&nbsp;doesn't&nbsp;support&nbsp;structs&nbsp;at&nbsp;all&nbsp;-<br>
we&nbsp;are&nbsp;forced&nbsp;to&lt;br&gt;<br>
use&nbsp;classes&nbsp;instead&nbsp;of&nbsp;all&nbsp;ValueTypes.&amp;nbsp;&nbsp;In&nbsp;case&nbsp;of&nbsp;struct&nbsp;array<br>
initialization&nbsp;-&nbsp;our&nbsp;converter&lt;br&gt;<br>
(which&nbsp;converts&nbsp;MSIL&nbsp;=&amp;gt;&nbsp;Java&nbsp;bytecode)&nbsp;generates&nbsp;&quot;hidden&quot;&nbsp;helper<br>
functions&lt;br&gt;<br>
which&nbsp;initialize&nbsp;each&nbsp;element&nbsp;of&nbsp;array&nbsp;before&nbsp;first&nbsp;usage&nbsp;of&nbsp;such&nbsp;array.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;Ilya.&lt;br&gt;<br>
&lt;font&nbsp;face=&quot;Tahoma&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;br&gt;<br>
Rafael&nbsp;Teixeira&nbsp;wrote:<br>
&lt;blockquote&nbsp;cite=&quot;middd99b8c805061010446a5b3bdb@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;I&nbsp;maybe&nbsp;due&nbsp;to&nbsp;the&nbsp;fact&nbsp;that&nbsp;Java,&nbsp;doesn't&nbsp;have&nbsp;value&nbsp;objects&nbsp;other<br>
than&nbsp;the&nbsp;basic&nbsp;crowd&nbsp;(int,&nbsp;long,&nbsp;double,&nbsp;float...),&nbsp;and&nbsp;to&nbsp;be&nbsp;able&nbsp;to<br>
have&nbsp;the&nbsp;value&nbsp;semantics&nbsp;GH&nbsp;has&nbsp;to&nbsp;create&nbsp;lots&nbsp;of<br>
imuttable/cloneable/value-comparable&nbsp;objects...<br>
<br>
Just&nbsp;guessing...<br>
<br>
On&nbsp;6/9/05,&nbsp;Ben&nbsp;Maurer&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;mailto:bmaurer@ximian.com&quot;&gt;&amp;lt;bmaurer@ximian.com&amp;gt;&lt;/a&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;On&nbsp;Thu,&nbsp;2005-06-09&nbsp;at&nbsp;19:05&nbsp;-0400,&nbsp;Gonzalo&nbsp;Paniagua&nbsp;Javier&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;On&nbsp;Wed,&nbsp;2005-06-08&nbsp;at&nbsp;14:11&nbsp;+0300,&nbsp;Ilya&nbsp;Kharmatsky&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Please&nbsp;review&nbsp;the&nbsp;patch.<br>
<br>
BTW,&nbsp;in&nbsp;HtmlTextWriter.cs&nbsp;we&nbsp;changed&nbsp;internal&nbsp;structs&nbsp;(e.g.<br>
RenderStyle)&nbsp;to&nbsp;be&nbsp;the&nbsp;classes<br>
&nbsp;and&nbsp;not&nbsp;structs&nbsp;-&nbsp;this&nbsp;in&nbsp;order&nbsp;to&nbsp;resolve&nbsp;heavy&nbsp;performance&nbsp;problem<br>
in&nbsp;our&nbsp;implementation<br>
&nbsp;of&nbsp;initialization&nbsp;of&nbsp;arrays&nbsp;of&nbsp;structs.&nbsp;May&nbsp;be&nbsp;the&nbsp;better&nbsp;idea&nbsp;is&nbsp;to<br>
change&nbsp;also&nbsp;original&nbsp;mono<br>
&nbsp;code&nbsp;-&nbsp;since&nbsp;in&nbsp;this&nbsp;case&nbsp;we&nbsp;can&nbsp;avoid&nbsp;additional&nbsp;&quot;splitting&quot;&nbsp;of&nbsp;code<br>
between&nbsp;standard&nbsp;and<br>
&nbsp;J2EE&nbsp;configuration.&nbsp;I&nbsp;think&nbsp;impact&nbsp;of&nbsp;this&nbsp;won't&nbsp;be&nbsp;too&nbsp;high&nbsp;-&nbsp;from<br>
perspective&nbsp;of&nbsp;memory<br>
&nbsp;consumption&nbsp;and&nbsp;performance.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;RenderAttribute,&nbsp;TagInformation&nbsp;and&nbsp;RenderStyle&nbsp;might&nbsp;be&nbsp;ok&nbsp;as&nbsp;classes.<br>
As&nbsp;you&nbsp;say,&nbsp;this&nbsp;is&nbsp;no&nbsp;big&nbsp;deal.&nbsp;Feel&nbsp;free&nbsp;to&nbsp;make&nbsp;those&nbsp;classes&nbsp;if<br>
nothing&nbsp;breaks.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;What&nbsp;exactly&nbsp;do&nbsp;you&nbsp;guys&nbsp;do&nbsp;when&nbsp;initing&nbsp;an&nbsp;array&nbsp;of&nbsp;structs&nbsp;that&nbsp;is&nbsp;so<br>
slow?<br>
<br>
In&nbsp;this&nbsp;case,&nbsp;chances&nbsp;are,&nbsp;performance&nbsp;won't&nbsp;suffer&nbsp;that&nbsp;much.&nbsp;It&nbsp;does<br>
make&nbsp;our&nbsp;GC&nbsp;do&nbsp;more&nbsp;work&nbsp;than&nbsp;it&nbsp;needs&nbsp;to&nbsp;(and&nbsp;it&nbsp;is&nbsp;already&nbsp;pretty<br>
heavy&nbsp;on&nbsp;stuff).<br>
<br>
However,&nbsp;there&nbsp;are&nbsp;cases&nbsp;where&nbsp;using&nbsp;arrays&nbsp;of&nbsp;structs&nbsp;will&nbsp;give&nbsp;us&nbsp;a<br>
large&nbsp;benefit&nbsp;in&nbsp;C#.&nbsp;So&nbsp;it&nbsp;would&nbsp;make&nbsp;sense&nbsp;to&nbsp;figure&nbsp;out&nbsp;what&nbsp;is<br>
happening,&nbsp;rather&nbsp;than&nbsp;to&nbsp;shove&nbsp;it&nbsp;under&nbsp;the&nbsp;rug.<br>
<br>
--&nbsp;Ben<br>
<br>
_______________________________________________<br>
Mono-devel-list&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
