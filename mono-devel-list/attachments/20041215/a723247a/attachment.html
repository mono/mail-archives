<tt>
&lt;DIV&gt;Hi&nbsp;Rafael,&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;When&nbsp;I&nbsp;do&nbsp;GetType().ToString()&amp;nbsp;&amp;nbsp;I&nbsp;get&nbsp;System.Web.Hosting.ISAPIWorkerRequestOutOfProc&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Does&nbsp;that&nbsp;help?&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Thanks,&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Joe&lt;BR&gt;&lt;BR&gt;&lt;B&gt;&lt;I&gt;Rafael&nbsp;Teixeira&nbsp;&amp;lt;monoman@gmail.com&amp;gt;&lt;/I&gt;&lt;/B&gt;&nbsp;wrote:&lt;/DIV&gt;<br>
&lt;BLOCKQUOTE&nbsp;class=replbq&nbsp;style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#1010ff&nbsp;2px&nbsp;solid&quot;&gt;Hi&nbsp;Joe,&nbsp;just&nbsp;a&nbsp;small&nbsp;thing,&nbsp;you&nbsp;may&nbsp;be&nbsp;pointing&nbsp;to&nbsp;the&nbsp;wrong&nbsp;class,&nbsp;see:&lt;BR&gt;&lt;BR&gt;&amp;gt;&nbsp;return&nbsp;(HttpWorkerRequest)provider.GetService(typeof(HttpWorkerRequest));&nbsp;&lt;BR&gt;&lt;BR&gt;IServiceProvider.GetService()&nbsp;will&nbsp;return&nbsp;some&nbsp;instance&nbsp;of&lt;BR&gt;HttpWorkerRequest&nbsp;or&nbsp;a&nbsp;subclass&nbsp;of&nbsp;it,&nbsp;what&nbsp;is&nbsp;probably&nbsp;the&nbsp;case.&nbsp;See,&lt;BR&gt;it&nbsp;returns&nbsp;the&nbsp;first&nbsp;matching&nbsp;instance&nbsp;registered&nbsp;in&nbsp;the&nbsp;container&lt;BR&gt;(HttpContext.Current&nbsp;in&nbsp;this&nbsp;case)&nbsp;that&nbsp;subclasses&nbsp;or&nbsp;implements&nbsp;(in&lt;BR&gt;the&nbsp;more&nbsp;common&nbsp;case&nbsp;where&nbsp;you&nbsp;pass&nbsp;it&nbsp;the&nbsp;type&nbsp;of&nbsp;an&nbsp;interface&lt;BR&gt;definition)&nbsp;the&nbsp;passed&nbsp;type.&lt;BR&gt;&lt;BR&gt;Print&nbsp;the&nbsp;full&nbsp;type&nbsp;name&nbsp;of&nbsp;the&nbsp;returned&nbsp;instance&nbsp;in&nbsp;your&nbsp;code,&nbsp;to&lt;BR&gt;tell&nbsp;us&nbsp;which&nbsp;subclass&nbsp;should&nbsp;we&nbsp;be&nbsp;returning.&nbsp;That&nbsp;subclass&nbsp;is&nbsp;the&lt;BR&gt;one&nbsp;that&nbsp;has&nbsp;to&nbsp;override&nbsp;GetPreloadedEntityBody()&nbsp;to&nbsp;return&nbsp;something&lt;BR&gt;more&nbsp;useful.&lt;BR&gt;&lt;BR&gt;Hope&nbsp;it&nbsp;helps,&lt;BR&gt;&lt;BR&gt;On&nbsp;Wed,&nbsp;15&nbsp;Dec&nbsp;2004&nbsp;06:28:03&nbsp;-0800&nbsp;(PST),&nbsp;Joe<br>
&nbsp;Audette&lt;BR&gt;&lt;JOE_AUDETTE@YAHOO.COM&gt;wrote:&lt;BR&gt;&amp;gt;&nbsp;Gonzalo,&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;That&nbsp;may&nbsp;be&nbsp;true&nbsp;when&nbsp;you&nbsp;inherit&nbsp;from&nbsp;HttpWorkerRequest&nbsp;but&nbsp;when&nbsp;you&nbsp;call&lt;BR&gt;&amp;gt;&nbsp;it&nbsp;directly&nbsp;on&nbsp;windows&nbsp;GetPreloadedEntityBody&nbsp;returns&nbsp;a&nbsp;byte&nbsp;array&nbsp;not&nbsp;null.&lt;BR&gt;&amp;gt;&nbsp;I&nbsp;step&nbsp;through&nbsp;the&nbsp;code&nbsp;to&nbsp;verify&nbsp;this&nbsp;and&nbsp;the&nbsp;code&nbsp;never&nbsp;raises&nbsp;an&nbsp;error&nbsp;on&lt;BR&gt;&amp;gt;&nbsp;windows&nbsp;because&nbsp;it&nbsp;never&nbsp;returns&nbsp;null.&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;This&nbsp;is&nbsp;the&nbsp;code&nbsp;that&nbsp;gets&nbsp;a&nbsp;reference&nbsp;to&nbsp;HttpWorkerRequest&nbsp;before&nbsp;it&nbsp;is&lt;BR&gt;&amp;gt;&nbsp;passed&nbsp;into&nbsp;the&nbsp;RequestStream&nbsp;class:&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;HttpWorkerRequest&nbsp;GetWorkerRequest(HttpContext&nbsp;context)&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;{&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;IServiceProvider&nbsp;provider&nbsp;=&nbsp;(IServiceProvider)HttpContext.Current;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;return&nbsp;(HttpWorkerRequest)provider.GetService(typeof(HttpWorkerRequest));&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;}&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;So&nbsp;in&nbsp;my&nbsp;observation&nbsp;mono&nbsp;does&nbsp;not&nbsp;produce&nbsp;the&nbsp;same&nbsp;behavior&nbsp;as&nbsp;windows&lt;BR&gt;&amp;gt;&nbsp;.net,&nbsp;therefore&nbsp;this&nbsp;code&nbsp;works&nbsp;on&nbsp;windows&nbsp;but&nbsp;not&nbsp;mono.&nbsp;On&nbsp;Windows<br>
&nbsp;if&nbsp;you&lt;BR&gt;&amp;gt;&nbsp;call&nbsp;directly&nbsp;HttpWorkerRequest.GetPreLoadedEntityBody&nbsp;it&nbsp;does&nbsp;not&nbsp;return&lt;BR&gt;&amp;gt;&nbsp;null.&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;I&nbsp;urge&nbsp;you&nbsp;to&nbsp;download&nbsp;the&nbsp;code&nbsp;and&nbsp;its&nbsp;sample&nbsp;project&nbsp;and&nbsp;see&nbsp;how&nbsp;it&nbsp;works&lt;BR&gt;&amp;gt;&nbsp;under&nbsp;windows&nbsp;but&nbsp;not&nbsp;on&nbsp;mono.&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;http://krystalware.com/files/SlickUpload.zip&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;http://krystalware.com/files/AdvancedUploadSpike.zip&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;Best&nbsp;Regards,&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;Joe&nbsp;Audette&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;Gonzalo&nbsp;Paniagua&nbsp;Javier&nbsp;&lt;GONZALO@XIMIAN.COM&gt;wrote:&nbsp;&lt;BR&gt;&amp;gt;&nbsp;[...]&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;tempBuff&nbsp;will&nbsp;always&nbsp;be&nbsp;null&nbsp;until&nbsp;GetPreloadedEntityBody()&nbsp;is&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;implemented&nbsp;in&nbsp;HttpWorkerRequest&nbsp;&amp;gt;Yes&nbsp;I&nbsp;could&nbsp;check&nbsp;for&nbsp;null&nbsp;and&nbsp;that&lt;BR&gt;&amp;gt;&nbsp;would&nbsp;get&nbsp;rid&nbsp;of&nbsp;the&nbsp;error&nbsp;but&nbsp;it&nbsp;&amp;gt;would&nbsp;not&nbsp;make&nbsp;the&nbsp;code&nbsp;functional.&lt;BR&gt;&amp;gt;&nbsp;In&nbsp;fact&nbsp;if&nbsp;I&nbsp;did&nbsp;check&nbsp;for&nbsp;null&nbsp;and&nbsp;&amp;gt;found&nbsp;null,&nbsp;my&nbsp;inclination&nbsp;would&nbsp;be&lt;BR&gt;&amp;gt;&nbsp;to&nbsp;throw&nbsp;an&nbsp;exception&nbsp;so&nbsp;why&nbsp;not&nbsp;&amp;gt;windows&nbsp;.NET&nbsp;and&nbsp;should&nbsp;work&nbsp;under&lt;BR&gt;&amp;gt;&nbsp;mono&nbsp;at&nbsp;some&nbsp;point&nbsp;if&nbsp;I&nbsp;understand<br>
&nbsp;&amp;gt;the&nbsp;goals&nbsp;of&nbsp;mono&nbsp;correctly.&nbsp;&amp;gt;My&lt;BR&gt;&amp;gt;&nbsp;original&nbsp;question&nbsp;is&nbsp;only&nbsp;to&nbsp;inquire&nbsp;when&nbsp;the&nbsp;methods&nbsp;of&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;HttpWorkerRequest&nbsp;will&nbsp;be&nbsp;implemented.&nbsp;You&nbsp;said&nbsp;the&nbsp;methods&nbsp;are&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;implemented&nbsp;in&nbsp;XSP&nbsp;in&nbsp;classes&nbsp;derived&nbsp;from&nbsp;HttpWorkerRequest,&nbsp;but&nbsp;my&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;code&nbsp;refers&nbsp;directly&nbsp;to&nbsp;HttpWorkerRequest&nbsp;not&nbsp;to&nbsp;any&nbsp;derived&nbsp;class.&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;Will&nbsp;the&nbsp;methods&nbsp;ever&nbsp;be&nbsp;implemented&nbsp;directly&nbsp;on&nbsp;HttpWorkerRequest&nbsp;in&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;mono?&nbsp;&lt;BR&gt;&amp;gt;&nbsp;I&nbsp;think&nbsp;you're&nbsp;misundertanding.&nbsp;That&nbsp;method&nbsp;is&nbsp;already&nbsp;implemented&nbsp;in&lt;BR&gt;&amp;gt;&nbsp;HttpWorkerRequest.cs.&nbsp;It&nbsp;just&nbsp;returns&nbsp;null.&nbsp;That's&nbsp;the&nbsp;implementation.&lt;BR&gt;&amp;gt;&nbsp;You&nbsp;can&nbsp;easilly&nbsp;test&nbsp;that&nbsp;is&nbsp;the&nbsp;behavior&nbsp;that&nbsp;MS&nbsp;NET&nbsp;has&nbsp;in&nbsp;that&nbsp;method&lt;BR&gt;&amp;gt;&nbsp;of&nbsp;HttpWorkerRequest&nbsp;class.&nbsp;How?&nbsp;Derive&nbsp;your&nbsp;own&nbsp;class&nbsp;from&lt;BR&gt;&amp;gt;&nbsp;HttpWorkerRequest&nbsp;and&nbsp;call&nbsp;GetPreloadedEntityBody().&nbsp;You'll&nbsp;always&nbsp;get&lt;BR&gt;&amp;gt;&nbsp;null.&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;Moreover,&nbsp;you&nbsp;have&nbsp;HasEntityBody()&nbsp;and&nbsp;IsEntireEntityBodyIsPreloaded()&lt;BR&gt;&amp;gt;&nbsp;to&nbsp;know&nbsp;in&nbsp;advance&nbsp;if&nbsp;GetPreloadedEntityBody()&nbsp;can&nbsp;be<br>
&nbsp;null.&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;-Gonzalo&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;_______________________________________________&lt;BR&gt;&amp;gt;&nbsp;Mono-devel-list&nbsp;mailing&nbsp;list&lt;BR&gt;&amp;gt;&nbsp;Mono-devel-list@lists.ximian.com&lt;BR&gt;&amp;gt;&nbsp;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;joe_audette@yahoo.com&lt;BR&gt;&amp;gt;&nbsp;http://www.joeaudette.com&lt;BR&gt;&amp;gt;&nbsp;http://www.mojoportal.com&nbsp;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;--&nbsp;&lt;BR&gt;Rafael&nbsp;&quot;Monoman&quot;&nbsp;Teixeira&lt;BR&gt;---------------------------------------&lt;BR&gt;Just&nbsp;the&nbsp;'crazy'&nbsp;me&nbsp;in&nbsp;a&nbsp;sane&nbsp;world,&nbsp;or&nbsp;would&nbsp;it&nbsp;be&nbsp;the&nbsp;reverse?&nbsp;I&nbsp;dunno...&lt;BR&gt;_______________________________________________&lt;BR&gt;Mono-devel-list&nbsp;mailing&nbsp;list&lt;BR&gt;Mono-devel-list@lists.ximian.com&lt;BR&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;BR&gt;&lt;BR&gt;joe_audette@yahoo.com&lt;br&gt;http://www.joeaudette.com&lt;br&gt;http://www.mojoportal.com
</tt>
