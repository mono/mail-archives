<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.6000.16544&quot;&nbsp;name=GENERATOR&gt;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=015192722-02122007&gt;&lt;FONT&nbsp;face=Arial&nbsp;<br>
color=#0000ff&nbsp;size=2&gt;Don't&nbsp;forget&nbsp;that&nbsp;4&nbsp;bytes&nbsp;per&nbsp;Hashcode&nbsp;isn't&nbsp;enough.&nbsp;You&nbsp;<br>
also&nbsp;need&nbsp;a&nbsp;boolean&nbsp;to&nbsp;store&nbsp;if&nbsp;the&nbsp;hash&nbsp;is&nbsp;already&nbsp;computed&nbsp;(as&nbsp;e.g.&amp;nbsp;0&nbsp;is&nbsp;<br>
a&nbsp;valid&nbsp;hash,&nbsp;too).&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=015192722-02122007&gt;&lt;FONT&nbsp;face=Arial&nbsp;<br>
color=#0000ff&nbsp;size=2&gt;And&nbsp;then&nbsp;you&nbsp;would&nbsp;need&nbsp;one&nbsp;additional&nbsp;check&nbsp;for&nbsp;this&nbsp;<br>
boolean&nbsp;per&nbsp;call.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=015192722-02122007&gt;&lt;FONT&nbsp;face=Arial&nbsp;<br>
color=#0000ff&nbsp;size=2&gt;And&nbsp;don't&nbsp;forget&nbsp;that&nbsp;strings&nbsp;within&nbsp;the&nbsp;corelib&nbsp;ARE&nbsp;<br>
mutable&nbsp;to&nbsp;some&nbsp;extent.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=015192722-02122007&gt;&lt;FONT&nbsp;face=Arial&nbsp;<br>
color=#0000ff&nbsp;size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=015192722-02122007&gt;&lt;FONT&nbsp;face=Arial&nbsp;<br>
color=#0000ff&nbsp;size=2&gt;Greetings&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=015192722-02122007&gt;&lt;FONT&nbsp;face=Arial&nbsp;<br>
color=#0000ff&nbsp;size=2&gt;Andreas&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;BR&gt;<br>
&lt;DIV&nbsp;class=OutlookMessageHeader&nbsp;lang=de&nbsp;dir=ltr&nbsp;align=left&gt;<br>
&lt;HR&nbsp;tabIndex=-1&gt;<br>
&lt;FONT&nbsp;face=Tahoma&nbsp;size=2&gt;&lt;B&gt;Von:&lt;/B&gt;&nbsp;mono-devel-list-bounces@lists.ximian.com&nbsp;<br>
[mailto:mono-devel-list-bounces@lists.ximian.com]&nbsp;&lt;B&gt;Im&nbsp;Auftrag&nbsp;von&nbsp;&lt;/B&gt;Alan&nbsp;<br>
McGovern&lt;BR&gt;&lt;B&gt;Gesendet:&lt;/B&gt;&nbsp;Samstag,&nbsp;1.&nbsp;Dezember&nbsp;2007&nbsp;17:22&lt;BR&gt;&lt;B&gt;An:&lt;/B&gt;&nbsp;<br>
Robert&nbsp;Jordan&lt;BR&gt;&lt;B&gt;Cc:&lt;/B&gt;&nbsp;mono-devel-list@lists.ximian.com&lt;BR&gt;&lt;B&gt;Betreff:&lt;/B&gt;&nbsp;<br>
[U-SPAM]&nbsp;Re:&nbsp;[Mono-dev]&nbsp;String.GetHashCode()&lt;BR&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;/DIV&gt;Also,&nbsp;just&nbsp;looking&nbsp;at&nbsp;the&nbsp;string&nbsp;source&nbsp;a&nbsp;bit&nbsp;more&nbsp;closely,&nbsp;it&nbsp;has&nbsp;a&nbsp;<br>
GetCaseInsensitiveHashcode&nbsp;method&nbsp;too,&nbsp;so&nbsp;i'd&nbsp;assume&nbsp;that&nbsp;would&nbsp;need&nbsp;to&nbsp;be&nbsp;<br>
cached&nbsp;too&nbsp;which&nbsp;would&nbsp;mean&nbsp;8&nbsp;bytes&nbsp;would&nbsp;be&nbsp;needed.&nbsp;This&nbsp;wouldn't&nbsp;scale&nbsp;well.&nbsp;<br>
&lt;BR&gt;&lt;BR&gt;Fair&nbsp;enough.&nbsp;Twas&nbsp;just&nbsp;an&nbsp;idea.&lt;BR&gt;&lt;BR&gt;Alan.&lt;BR&gt;&lt;BR&gt;<br>
&lt;DIV&nbsp;class=gmail_quote&gt;On&nbsp;Dec&nbsp;1,&nbsp;2007&nbsp;4:09&nbsp;PM,&nbsp;Robert&nbsp;Jordan&nbsp;&amp;lt;&lt;A&nbsp;<br>
href=&quot;mailto:robertj@gmx.net&quot;&gt;robertj@gmx.net&lt;/A&gt;&amp;gt;&nbsp;wrote:&lt;BR&gt;<br>
&lt;BLOCKQUOTE&nbsp;class=gmail_quote&nbsp;<br>
style=&quot;PADDING-LEFT:&nbsp;1ex;&nbsp;MARGIN:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;BORDER-LEFT:&nbsp;rgb(204,204,204)&nbsp;1px&nbsp;solid&quot;&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;class=Ih2E3d&gt;Tinco&nbsp;Andringa&nbsp;wrote:&lt;BR&gt;&amp;gt;&nbsp;(Woops,&nbsp;only&nbsp;replied&nbsp;to&nbsp;<br>
&nbsp;&nbsp;kamil)&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt;&nbsp;If&nbsp;Jerome&nbsp;is&nbsp;right&nbsp;and&nbsp;the&nbsp;overhead&nbsp;is&nbsp;only&nbsp;4&nbsp;bytes,&nbsp;<br>
&nbsp;&nbsp;then&nbsp;overhead&lt;BR&gt;&amp;gt;&nbsp;shouldn't&nbsp;be&nbsp;a&nbsp;problem&nbsp;at&nbsp;all.&nbsp;The&nbsp;worst&nbsp;case&nbsp;size&nbsp;of&nbsp;a&nbsp;<br>
&nbsp;&nbsp;string&nbsp;would&nbsp;&lt;BR&gt;&amp;gt;&nbsp;be&nbsp;1&nbsp;character,&nbsp;of&nbsp;2&nbsp;bytes&nbsp;+&nbsp;something&nbsp;to&nbsp;end&nbsp;it&nbsp;with,&nbsp;<br>
&nbsp;&nbsp;like&nbsp;an&nbsp;int&lt;BR&gt;&amp;gt;&nbsp;containing&nbsp;its&nbsp;length,&nbsp;2&nbsp;bytes,&nbsp;or&nbsp;a&nbsp;terminating&nbsp;<br>
&nbsp;&nbsp;character,&nbsp;probably&lt;BR&gt;&amp;gt;&nbsp;2&nbsp;bytes&nbsp;too.&nbsp;Making&nbsp;it&nbsp;at&nbsp;least&nbsp;4&nbsp;bytes.&nbsp;&amp;nbsp;A&nbsp;<br>
&nbsp;&nbsp;worst&nbsp;case&nbsp;scenario&nbsp;of&nbsp;&lt;BR&gt;&lt;BR&gt;&lt;/DIV&gt;Look&nbsp;at&nbsp;a&nbsp;heavy&nbsp;string&nbsp;consumer:&nbsp;[g]mcs.&nbsp;<br>
&nbsp;&nbsp;The&nbsp;average&nbsp;string&lt;BR&gt;length&nbsp;it&nbsp;has&nbsp;to&nbsp;process&nbsp;is&nbsp;probably&nbsp;only&nbsp;4-5&nbsp;chars&nbsp;<br>
&nbsp;&nbsp;long.&lt;BR&gt;That's&nbsp;roundabout&nbsp;12&nbsp;bytes.&nbsp;Adding&nbsp;4&nbsp;bytes&nbsp;for&nbsp;the&nbsp;hash&nbsp;code&lt;BR&gt;is&nbsp;a&nbsp;<br>
&nbsp;&nbsp;huge&nbsp;overhead&nbsp;that&nbsp;only&nbsp;pays&nbsp;out&nbsp;if&nbsp;GetHashCode&nbsp;is&nbsp;&lt;BR&gt;called&nbsp;frequently,&nbsp;but&nbsp;<br>
&nbsp;&nbsp;this&nbsp;is&nbsp;definitely&nbsp;not&nbsp;a&nbsp;common&nbsp;scenario&lt;BR&gt;for&nbsp;most&nbsp;of&nbsp;the&nbsp;strings.&lt;BR&gt;&lt;FONT&nbsp;<br>
&nbsp;&nbsp;color=#888888&gt;&lt;BR&gt;Robert&lt;BR&gt;&lt;/FONT&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;class=Wj3C7c&gt;&lt;BR&gt;_______________________________________________&nbsp;<br>
&nbsp;&nbsp;&lt;BR&gt;Mono-devel-list&nbsp;mailing&nbsp;list&lt;BR&gt;&lt;A&nbsp;<br>
&nbsp;&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/A&gt;&lt;BR&gt;&lt;A&nbsp;<br>
&nbsp;&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;<br>
&nbsp;&nbsp;target=_blank&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&nbsp;<br>
&nbsp;&nbsp;&lt;/A&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/BLOCKQUOTE&gt;&lt;/DIV&gt;&lt;BR&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
