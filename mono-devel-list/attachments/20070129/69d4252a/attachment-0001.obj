Index: ClientScriptManager.cs
===================================================================
--- ClientScriptManager.cs	(revision 71850)
+++ ClientScriptManager.cs	(working copy)
@@ -144,7 +144,10 @@
 			
 			if (options.ClientSubmit || options.ActionUrl != null)
 				page.RequiresPostBackScript ();
-			
+
+			if (!IsClientScriptIncludeRegistered (typeof (Page), "webform"))
+				RegisterClientScriptInclude (typeof (Page), "webform", GetWebResourceUrl (typeof (Page), "webform.js"));
+
 			return String.Format ("{0}WebForm_DoPostback({1},{2},{3},{4},{5},{6},{7},{8})", 
 					options.RequiresJavaScriptProtocol ? "javascript:" : "",
 					ClientScriptManager.GetScriptLiteral (options.TargetControl.UniqueID), 
@@ -158,15 +161,6 @@
 				);
 		}
 
-		internal void RegisterWebFormClientScript ()
-		{
-			if (!IsClientScriptIncludeRegistered (typeof (Page), "webform"))
-				RegisterClientScriptInclude (typeof (Page), "webform", GetWebResourceUrl (typeof (Page), "webform.js"));
-
-			if (!IsClientScriptIncludeRegistered (typeof (Page), "callback"))
-				RegisterClientScriptInclude (typeof (Page), "callback", GetWebResourceUrl (typeof (Page), "callback.js"));
-		}
-		
 		public string GetCallbackEventReference (Control control, string argument, string clientCallback, string context)
 		{
 			return GetCallbackEventReference (control, argument, clientCallback, context, null, false);
@@ -190,7 +184,10 @@
 		public string GetCallbackEventReference (string target, string argument, string clientCallback, string context, string clientErrorCallback, bool useAsync)
 		{
 			page.RequiresPostBackScript ();
-			
+
+			if (!IsClientScriptIncludeRegistered (typeof (Page), "callback"))
+				RegisterClientScriptInclude (typeof (Page), "callback", GetWebResourceUrl (typeof (Page), "callback.js"));
+
 			return string.Format ("WebForm_DoCallback('{0}',{1},{2},{3},{4},{5})", target, argument, clientCallback, context, ((clientErrorCallback == null) ? "null" : clientErrorCallback), (useAsync ? "true" : "false"));
 		}
 #endif
@@ -527,7 +524,10 @@
 		{
 			ScriptEntry entry = scriptIncludes;
 			while (entry != null) {
-				writer.WriteLine ("\n<script src=\"{0}\" type=\"text/javascript\"></script>", entry.Script);
+				if (!entry.Rendered) {
+					writer.WriteLine ("\n<script src=\"{0}\" type=\"text/javascript\"></script>", entry.Script);
+					entry.Rendered = true;
+				}
 				entry = entry.Next;
 			}
 		}
@@ -616,6 +616,7 @@
 			public string Key;
 			public string Script;
 			public ScriptEntry Next;
+			public bool Rendered;
 			 
 			public ScriptEntry (Type type, string key, string script)
 			{
