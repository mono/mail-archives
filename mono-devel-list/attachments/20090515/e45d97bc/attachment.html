<tt>
<br>
&lt;P&gt;I&nbsp;debug&nbsp;into&nbsp;mono/mini/local-propagation.c&nbsp;of&nbsp;mono&nbsp;2.2,&nbsp;and&nbsp;found&nbsp;there's&nbsp;something&nbsp;wrong&nbsp;in&nbsp;the&nbsp;&quot;MonoBasicBlock&nbsp;*bb&quot;&nbsp;of&nbsp;function&nbsp;mono_local_deadce.&lt;/P&gt;<br>
&lt;P&gt;The&nbsp;point&nbsp;of&nbsp;previous&nbsp;inst&nbsp;is&nbsp;same&nbsp;as&nbsp;the&nbsp;inst&nbsp;itself,&nbsp;which&nbsp;will&nbsp;run&nbsp;into&nbsp;dead&nbsp;lock&nbsp;if&nbsp;we&nbsp;traverses&nbsp;the&nbsp;inst&nbsp;list&nbsp;backward.&nbsp;It's&nbsp;hard&nbsp;for&nbsp;us&nbsp;to&nbsp;go&nbsp;further&nbsp;into&nbsp;the&nbsp;source&nbsp;code,&nbsp;anyone&nbsp;have&nbsp;any&nbsp;idea&nbsp;about&nbsp;it.&lt;/P&gt;<br>
<br>
&lt;P&gt;index=1:&nbsp;ins=3375992,&nbsp;(ins)-&gt;prev=0,&nbsp;(ins)-&gt;next=3376040&lt;/P&gt;<br>
&lt;P&gt;index=2:&nbsp;ins=3376040,&nbsp;(ins)-&gt;prev=3375992,&nbsp;(ins)-&gt;next=3376088&lt;/P&gt;<br>
&lt;P&gt;index=3:&nbsp;ins=3376088,&nbsp;(ins)-&gt;prev=3376040,&nbsp;(ins)-&gt;next=3376232&lt;/P&gt;<br>
&lt;P&gt;index=4:&nbsp;ins=3376232,&nbsp;(ins)-&gt;prev=3376088,&nbsp;(ins)-&gt;next=3376288&lt;/P&gt;<br>
&lt;P&gt;index=5:&nbsp;ins=3376288,&nbsp;(ins)-&gt;prev=3376232,&nbsp;(ins)-&gt;next=3376344&lt;/P&gt;<br>
&lt;P&gt;index=6:&nbsp;ins=3376344,&nbsp;(ins)-&gt;prev=3376288,&nbsp;(ins)-&gt;next=3376392&lt;/P&gt;<br>
&lt;P&gt;&lt;b&gt;index=7:&nbsp;ins=3376392,&nbsp;(ins)-&gt;prev=3376392,&nbsp;(ins)-&gt;next=3376136&lt;/b&gt;&lt;/P&gt;<br>
&lt;P&gt;index=8:&nbsp;ins=3376136,&nbsp;(ins)-&gt;prev=3376392,&nbsp;(ins)-&gt;next=3376448&lt;/P&gt;<br>
&lt;P&gt;index=9:&nbsp;ins=3376448,&nbsp;(ins)-&gt;prev=3376136,&nbsp;(ins)-&gt;next=0&lt;/P&gt;<br>
<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;quote&nbsp;light-black&nbsp;dark-border-color&quot;&gt;&lt;div&nbsp;class=&quot;quote&nbsp;light-border-color&quot;&gt;<br>
&lt;div&nbsp;class=&quot;quote-author&quot;&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Burkhard&nbsp;Linke&nbsp;wrote:&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;quote-message&quot;&gt;<br>
Hi,<br>
<br>
&lt;blockquote&nbsp;class=&quot;quote&nbsp;light-black&nbsp;dark-border-color&quot;&gt;&lt;div&nbsp;class=&quot;quote&nbsp;light-border-color&quot;&gt;<br>
&lt;div&nbsp;class=&quot;quote-author&quot;&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Thracx&nbsp;wrote:&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;quote-message&quot;&gt;<br>
&lt;P&gt;In&nbsp;short,&nbsp;it's&nbsp;not&nbsp;working&nbsp;for&nbsp;me&nbsp;but&nbsp;I'm&nbsp;willing&nbsp;to&nbsp;keep&nbsp;trying&nbsp;and&nbsp;document&nbsp;my&nbsp;experiences&nbsp;if&nbsp;I&nbsp;can&nbsp;get&nbsp;some&nbsp;help&nbsp;from&nbsp;the&nbsp;Mono&nbsp;developer&nbsp;community.&nbsp;&nbsp;I&nbsp;apologize&nbsp;for&nbsp;the&nbsp;lengthy&nbsp;post&nbsp;but&nbsp;I&nbsp;figured&nbsp;that&nbsp;I&nbsp;might&nbsp;as&nbsp;well&nbsp;be&nbsp;thorough.&lt;/P&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;<br>
<br>
<br>
I'm&nbsp;running&nbsp;into&nbsp;the&nbsp;same&nbsp;problem&nbsp;with&nbsp;the&nbsp;2.4&nbsp;release&nbsp;of&nbsp;Mono.&nbsp;My&nbsp;current&nbsp;build&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;bundled&nbsp;garbage&nbsp;collector,&nbsp;since&nbsp;I&nbsp;get&nbsp;compiler&nbsp;error&nbsp;during&nbsp;build&nbsp;time.<br>
<br>
The&nbsp;cause&nbsp;of&nbsp;the&nbsp;endless&nbsp;loop&nbsp;during&nbsp;compiling&nbsp;the&nbsp;class&nbsp;library&nbsp;is&nbsp;not&nbsp;the&nbsp;compiler,&nbsp;but&nbsp;the&nbsp;runtime&nbsp;itself.&nbsp;The&nbsp;main&nbsp;thread&nbsp;of&nbsp;mono&nbsp;hangs&nbsp;in&nbsp;a&nbsp;loop,&nbsp;JIT-compiling&nbsp;methods&nbsp;(output&nbsp;created&nbsp;using&nbsp;'pstack'&nbsp;utility&nbsp;under&nbsp;Solaris&nbsp;10&nbsp;and&nbsp;trimmed):<br>
<br>
cab:~&gt;&nbsp;pstack&nbsp;6411<br>
6411:&nbsp;&nbsp;&nbsp;/vol/src/gnu/mono/mono-2.4/mono/mini/mono&nbsp;--config&nbsp;/vol/src/gnu/mono/m<br>
-----------------&nbsp;&nbsp;lwp#&nbsp;1&nbsp;/&nbsp;thread#&nbsp;1&nbsp;&nbsp;--------------------<br>
&nbsp;00083588&nbsp;mono_local_deadce&nbsp;(2f4870,&nbsp;1b4e80,&nbsp;1b09f4,&nbsp;137,&nbsp;ffffffff,&nbsp;ffffff)&nbsp;+&nbsp;818<br>
&nbsp;00039b9c&nbsp;mini_method_compile&nbsp;(2f4870,&nbsp;35169ff,&nbsp;10000000,&nbsp;0,&nbsp;1af560,&nbsp;2f6fd0)&nbsp;+&nbsp;a40<br>
&nbsp;0003b058&nbsp;mono_jit_compile_method&nbsp;(2f6890,&nbsp;1,&nbsp;fee73580,&nbsp;fef52000,&nbsp;ff371480,&nbsp;0)&nbsp;+&nbsp;2f0<br>
&nbsp;000d7cdc&nbsp;mono_compile_method&nbsp;(2f6890,&nbsp;fec90740,&nbsp;ff373a40,&nbsp;14,&nbsp;80808080,&nbsp;fef52100)&nbsp;+&nbsp;18<br>
&nbsp;000a0ec8&nbsp;mono_magic_trampoline&nbsp;(ffbfdeb0,&nbsp;fec90740,&nbsp;2f6890,&nbsp;0,&nbsp;0,&nbsp;ff)&nbsp;+&nbsp;f8<br>
&nbsp;fecf0104&nbsp;????????&nbsp;(2e4ee0,&nbsp;0,&nbsp;fee73580,&nbsp;fef52000,&nbsp;2570b0,&nbsp;6)<br>
&nbsp;fec90740&nbsp;????????&nbsp;(0,&nbsp;fec906f8,&nbsp;fee73580,&nbsp;fef52000,&nbsp;257000,&nbsp;6)<br>
&nbsp;fec90478&nbsp;????????&nbsp;(0,&nbsp;0,&nbsp;ffbfe36c,&nbsp;fec906f8,&nbsp;257000,&nbsp;fef52100)<br>
&nbsp;0003b8a4&nbsp;mono_jit_runtime_invoke&nbsp;(2fad58,&nbsp;0,&nbsp;0,&nbsp;ffbfe36c,&nbsp;0,&nbsp;ff)&nbsp;+&nbsp;98<br>
&nbsp;000d8ca8&nbsp;mono_runtime_invoke&nbsp;(2fad58,&nbsp;0,&nbsp;0,&nbsp;ffbfe36c,&nbsp;2570b0,&nbsp;6)&nbsp;+&nbsp;50<br>
&nbsp;000ded68&nbsp;mono_runtime_class_init_full&nbsp;(2b7128,&nbsp;0,&nbsp;fee73580,&nbsp;fef52000,&nbsp;257000,&nbsp;0)&nbsp;+&nbsp;18c<br>
&nbsp;00056f10&nbsp;mono_method_to_ir&nbsp;(2c8cc0,&nbsp;2f5240,&nbsp;2b8340,&nbsp;feb92b3d,&nbsp;2f7ad0,&nbsp;2)&nbsp;+&nbsp;c8fc<br>
&nbsp;00039710&nbsp;mini_method_compile&nbsp;(2c8cc0,&nbsp;35169ff,&nbsp;10000000,&nbsp;0,&nbsp;1af560,&nbsp;2f5240)&nbsp;+&nbsp;5b4<br>
&nbsp;0003b058&nbsp;mono_jit_compile_method&nbsp;(2b8340,&nbsp;1,&nbsp;257000,&nbsp;20,&nbsp;2bf090,&nbsp;fef52100)&nbsp;+&nbsp;2f0<br>
&nbsp;0003b890&nbsp;mono_jit_runtime_invoke&nbsp;(2b8340,&nbsp;0,&nbsp;ffbfe7a4,&nbsp;0,&nbsp;ffbfe72c,&nbsp;80808080)&nbsp;+&nbsp;84<br>
&nbsp;000d8ca8&nbsp;mono_runtime_invoke&nbsp;(2b8340,&nbsp;0,&nbsp;ffbfe7a4,&nbsp;0,&nbsp;0,&nbsp;34)&nbsp;+&nbsp;50<br>
&nbsp;000db7dc&nbsp;mono_runtime_exec_main&nbsp;(2b8340,&nbsp;299e40,&nbsp;0,&nbsp;20,&nbsp;2e,&nbsp;34)&nbsp;+&nbsp;138<br>
&nbsp;000dbe14&nbsp;mono_runtime_run_main&nbsp;(2b8340,&nbsp;2,&nbsp;ffbfe9c0,&nbsp;0,&nbsp;80808080,&nbsp;1010101)&nbsp;+&nbsp;14c<br>
&nbsp;0008523c&nbsp;mono_main&nbsp;(3,&nbsp;ffbfe9b4,&nbsp;0,&nbsp;0,&nbsp;6,&nbsp;0)&nbsp;+&nbsp;15ac<br>
&nbsp;00033110&nbsp;_start&nbsp;&nbsp;&nbsp;(0,&nbsp;0,&nbsp;0,&nbsp;0,&nbsp;0,&nbsp;0)&nbsp;+&nbsp;5c<br>
<br>
The&nbsp;other&nbsp;two&nbsp;threads&nbsp;active&nbsp;at&nbsp;the&nbsp;time&nbsp;are&nbsp;the&nbsp;garbage&nbsp;collection&nbsp;thread&nbsp;and&nbsp;finalizer&nbsp;thread.&nbsp;<br>
<br>
The&nbsp;instruction&nbsp;pointer&nbsp;(first&nbsp;column)&nbsp;of&nbsp;the&nbsp;mono_local_deadce&nbsp;changes&nbsp;during&nbsp;several&nbsp;invocation&nbsp;of&nbsp;pstack,&nbsp;but&nbsp;the&nbsp;remaining&nbsp;backtrace&nbsp;remains&nbsp;the&nbsp;same.&nbsp;So&nbsp;the&nbsp;problem&nbsp;should&nbsp;be&nbsp;located&nbsp;somewhere&nbsp;in&nbsp;that&nbsp;function.<br>
<br>
I'll&nbsp;put&nbsp;more&nbsp;debug&nbsp;output&nbsp;calls&nbsp;into&nbsp;the&nbsp;function&nbsp;in&nbsp;the&nbsp;next&nbsp;build&nbsp;and&nbsp;try&nbsp;to&nbsp;find&nbsp;out&nbsp;under&nbsp;which&nbsp;circumstances&nbsp;the&nbsp;endless&nbsp;loop&nbsp;occurs.<br>
<br>
Mono&nbsp;2.4&nbsp;works&nbsp;fine&nbsp;under&nbsp;Solaris&nbsp;10&nbsp;x86,&nbsp;so&nbsp;the&nbsp;problem&nbsp;should&nbsp;be&nbsp;related&nbsp;to&nbsp;the&nbsp;different&nbsp;register&nbsp;sets&nbsp;of&nbsp;x86&nbsp;and&nbsp;SPARC&nbsp;cpus.<br>
&lt;/div&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;<br>
<br>
<br>
&lt;br&gt;&lt;hr&nbsp;align=&quot;left&quot;&nbsp;width=&quot;300&quot;&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://www.nabble.com/Compiling-Mono-v2.4-RC2-%28Solaris-10-SPARCv9%29-tp22587130p23555461.html&quot;&gt;Re:&nbsp;Compiling&nbsp;Mono&nbsp;v2.4&nbsp;RC2&nbsp;(Solaris&nbsp;10&nbsp;SPARCv9)&lt;/a&gt;&lt;br&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://www.nabble.com/Mono---Dev-f1369.html&quot;&gt;Mono&nbsp;-&nbsp;Dev&nbsp;mailing&nbsp;list&nbsp;archive&lt;/a&gt;&nbsp;at&nbsp;Nabble.com.&lt;br&gt;<br>

</tt>
