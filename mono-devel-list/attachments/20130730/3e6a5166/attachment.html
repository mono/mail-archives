<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;I&#39;m&nbsp;attempting&nbsp;to&nbsp;fix&nbsp;&lt;a&nbsp;href=&quot;https://bugzilla.xamarin.com/show_bug.cgi?id=12552&quot;&gt;https://bugzilla.xamarin.com/show_bug.cgi?id=12552&lt;/a&gt;&nbsp;and&nbsp;&lt;a&nbsp;href=&quot;https://bugzilla.xamarin.com/show_bug.cgi?id=12551&quot;&gt;https://bugzilla.xamarin.com/show_bug.cgi?id=12551&lt;/a&gt;.&nbsp;Console,&nbsp;ConsoleDriver,&nbsp;and&nbsp;the&nbsp;IConsoleDriver&nbsp;implementations&nbsp;make&nbsp;the&nbsp;flawed&nbsp;assumption&nbsp;that&nbsp;&quot;is&nbsp;console&quot;&nbsp;is&nbsp;a&nbsp;simple&nbsp;boolean&nbsp;value&nbsp;when&nbsp;standard&nbsp;input&nbsp;or&nbsp;standard&nbsp;output&nbsp;can&nbsp;be&nbsp;redirected&nbsp;to&nbsp;a&nbsp;file&nbsp;or&nbsp;a&nbsp;pipeline&nbsp;independently&nbsp;of&nbsp;each&nbsp;other.&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;I&nbsp;got&nbsp;rid&nbsp;of&nbsp;NullConsoleDriver&nbsp;and&nbsp;made&nbsp;WindowsConsoleDriver&nbsp;do&nbsp;the&nbsp;right&nbsp;thing&nbsp;depending&nbsp;on&nbsp;whether&nbsp;or&nbsp;not&nbsp;standard&nbsp;input&nbsp;or&nbsp;standard&nbsp;output&nbsp;is&nbsp;a&nbsp;console.&nbsp;This&nbsp;was&nbsp;straightforward;&nbsp;For&nbsp;example,&nbsp;WindowsConsoleDriver.KeyAvailable&nbsp;does&nbsp;the&nbsp;usual&nbsp;if&nbsp;standard&nbsp;input&nbsp;is&nbsp;a&nbsp;console,&nbsp;if&nbsp;not&nbsp;it&nbsp;returns&nbsp;false&nbsp;(which&nbsp;should&nbsp;throw&nbsp;an&nbsp;exception&nbsp;instead&nbsp;as&nbsp;per&nbsp;&lt;a&nbsp;href=&quot;http://msdn.microsoft.com/en-us/library/system.console.keyavailable.aspx&quot;&gt;http://msdn.microsoft.com/en-us/library/system.console.keyavailable.aspx&lt;/a&gt;&nbsp;but&nbsp;that&#39;s&nbsp;for&nbsp;another&nbsp;commit...).&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;I&nbsp;am&nbsp;running&nbsp;into&nbsp;some&nbsp;trouble&nbsp;doing&nbsp;the&nbsp;same&nbsp;with&nbsp;TermInfoDriver.&nbsp;It&nbsp;looks&nbsp;like&nbsp;mono&nbsp;disables&nbsp;the&nbsp;normal&nbsp;echoing&nbsp;of&nbsp;console&nbsp;input&nbsp;characters&nbsp;to&nbsp;the&nbsp;console&nbsp;and&nbsp;handles&nbsp;that&nbsp;logic&nbsp;itself,&nbsp;echoing&nbsp;input&nbsp;characters&nbsp;to&nbsp;standard&nbsp;output,&nbsp;instead&nbsp;letting&nbsp;the&nbsp;terminal&nbsp;take&nbsp;care&nbsp;of&nbsp;it.&nbsp;This&nbsp;is&nbsp;quite&nbsp;problematic&nbsp;if&nbsp;standard&nbsp;output&nbsp;is&nbsp;redirected&nbsp;but&nbsp;standard&nbsp;input&nbsp;is&nbsp;not.&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;Why&nbsp;does&nbsp;this&nbsp;matter?&nbsp;Here&#39;s&nbsp;one&nbsp;use&nbsp;case.&nbsp;A&nbsp;program&nbsp;wants&nbsp;to&nbsp;read&nbsp;in&nbsp;a&nbsp;password&nbsp;from&nbsp;the&nbsp;user.&nbsp;If&nbsp;standard&nbsp;input&nbsp;is&nbsp;a&nbsp;console,&nbsp;the&nbsp;program&nbsp;uses&nbsp;ReadKey(true)&nbsp;to&nbsp;read&nbsp;the&nbsp;password&nbsp;without&nbsp;displaying&nbsp;it&nbsp;on&nbsp;the&nbsp;screen.&nbsp;Consider&nbsp;what&nbsp;happens&nbsp;if&nbsp;the&nbsp;user&nbsp;wants&nbsp;to&nbsp;run&nbsp;output&nbsp;through&nbsp;tee.&nbsp;What&nbsp;should&nbsp;happen&nbsp;is&nbsp;that&nbsp;everything&nbsp;is&nbsp;the&nbsp;same&nbsp;except&nbsp;that&nbsp;any&nbsp;output&nbsp;the&nbsp;program&nbsp;itself&nbsp;outputted&nbsp;should&nbsp;go&nbsp;to&nbsp;the&nbsp;file&nbsp;specified&nbsp;to&nbsp;tee.&nbsp;For&nbsp;example:&lt;br&gt;<br>
&lt;br&gt;greg@Kubuntu:~$&nbsp;echo&nbsp;&quot;abc&quot;&nbsp;&gt;&nbsp;test.txt&lt;br&gt;greg@Kubuntu:~$&nbsp;sudo&nbsp;cat&nbsp;test.txt&nbsp;|&nbsp;tee&nbsp;sudo_output.txt&lt;br&gt;[sudo]&nbsp;password&nbsp;for&nbsp;greg:&lt;br&gt;abc&lt;br&gt;&lt;br&gt;&lt;/div&gt;As&nbsp;another&nbsp;example&lt;br&gt;&lt;br&gt;greg@Kubuntu:~$&nbsp;cat&nbsp;-&nbsp;&gt;&nbsp;test_cat_output.txt&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;Even&nbsp;though&nbsp;standard&nbsp;output&nbsp;is&nbsp;redirected&nbsp;to&nbsp;a&nbsp;file,&nbsp;standard&nbsp;input&nbsp;is&nbsp;still&nbsp;echoed&nbsp;to&nbsp;the&nbsp;console.&lt;br&gt;&lt;br&gt;Taking&nbsp;over&nbsp;the&nbsp;job&nbsp;of&nbsp;echoing&nbsp;input&nbsp;characters&nbsp;instead&nbsp;of&nbsp;letting&nbsp;the&nbsp;terminal&nbsp;handle&nbsp;it&nbsp;strikes&nbsp;me&nbsp;as&nbsp;an&nbsp;odd&nbsp;design.&nbsp;What&#39;s&nbsp;the&nbsp;reason&nbsp;for&nbsp;this&nbsp;approach?&nbsp;Is&nbsp;there&nbsp;a&nbsp;solution&nbsp;to&nbsp;the&nbsp;problem&nbsp;of&nbsp;allowing&nbsp;one&nbsp;of&nbsp;input/output&nbsp;to&nbsp;be&nbsp;redirected&nbsp;and&nbsp;letting&nbsp;the&nbsp;one&nbsp;using&nbsp;the&nbsp;console&nbsp;to&nbsp;still&nbsp;function&nbsp;correctly&nbsp;that&nbsp;does&nbsp;not&nbsp;involve&nbsp;rewriting&nbsp;large&nbsp;parts&nbsp;of&nbsp;TermInfoDriver&nbsp;and&nbsp;associated&nbsp;internal&nbsp;calls?&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;-&nbsp;Greg&lt;br&gt;&lt;/div&gt;<br>

</tt>
