<tt>
Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Take&nbsp;a&nbsp;look&nbsp;at&nbsp;this:š&lt;a&nbsp;href=&quot;https://github.com/elijahtaylor/mono/blob/master/mono/mini/genmdesc.c&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/elijahtaylor/mono/blob/master/mono/mini/genmdesc.c&lt;/a&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
This&nbsp;includes&nbsp;a&nbsp;dummy&nbsp;implementation&nbsp;of&nbsp;__nacl_suspend_thread_if_needed&nbsp;for&nbsp;that&nbsp;file.&nbsp;šIt&nbsp;wasn&amp;#39;t&nbsp;merged&nbsp;into&nbsp;mono&amp;#39;s&nbsp;head&nbsp;because&nbsp;it&amp;#39;s&nbsp;a&nbsp;temporary&nbsp;measure&nbsp;and&nbsp;won&amp;#39;t&nbsp;be&nbsp;required&nbsp;long&nbsp;term.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;Essentially&nbsp;for&nbsp;building&nbsp;Mono&nbsp;for&nbsp;NaCl&nbsp;you&nbsp;can&nbsp;try&nbsp;one&nbsp;of&nbsp;2&nbsp;things:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;Get&nbsp;Mono&nbsp;2.10&nbsp;and&nbsp;patch&nbsp;in&nbsp;my&nbsp;nacl/&nbsp;folder&nbsp;(which&nbsp;it&nbsp;looks&nbsp;like&nbsp;you&nbsp;did)&nbsp;and&nbsp;my&nbsp;change&nbsp;to&nbsp;genmdesc.c&nbsp;above.&nbsp;šDownside:&nbsp;I&nbsp;haven&amp;#39;t&nbsp;explicitly&nbsp;tested&nbsp;NaCl&nbsp;support&nbsp;with&nbsp;the&nbsp;very&nbsp;latest&nbsp;release,&nbsp;it&amp;#39;s&nbsp;possible&nbsp;something&nbsp;has&nbsp;broken&nbsp;slightly&nbsp;since&nbsp;my&nbsp;patch&nbsp;landed.&nbsp;I&amp;#39;m&nbsp;working&nbsp;on&nbsp;a&nbsp;continuous&nbsp;build&nbsp;to&nbsp;minimize&nbsp;possible&nbsp;breakage&nbsp;in&nbsp;the&nbsp;future.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2)&nbsp;Get&nbsp;elijahtaylor/mono&nbsp;from&nbsp;github.&nbsp;šDownside:&nbsp;I&nbsp;haven&amp;#39;t&nbsp;merged&nbsp;all&nbsp;of&nbsp;the&nbsp;2.10&nbsp;changes&nbsp;in,&nbsp;so&nbsp;there&nbsp;may&nbsp;be&nbsp;some&nbsp;stuff&nbsp;you&nbsp;don&amp;#39;t&nbsp;get,&nbsp;but&nbsp;you&nbsp;should&nbsp;get&nbsp;all&nbsp;of&nbsp;the&nbsp;Native&nbsp;Client&nbsp;work&nbsp;and&nbsp;it&nbsp;should&nbsp;function.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;to&nbsp;provide&nbsp;a&nbsp;little&nbsp;more&nbsp;info,&nbsp;I&nbsp;saw&nbsp;your&nbsp;posts&nbsp;to&nbsp;the&nbsp;other&nbsp;mono-devel&nbsp;thread&nbsp;(sorry,&nbsp;I&nbsp;missed&nbsp;the&nbsp;one&nbsp;a&nbsp;few&nbsp;days&nbsp;ago).&nbsp;šPlease&nbsp;note&nbsp;that&nbsp;3D&nbsp;support&nbsp;is&nbsp;currently&nbsp;in&nbsp;progress&nbsp;in&nbsp;Native&nbsp;Client&nbsp;and&nbsp;may&nbsp;not&nbsp;be&nbsp;suitable&nbsp;for&nbsp;public&nbsp;use.&nbsp;šAlso,&nbsp;Mono&nbsp;for&nbsp;NaCl&nbsp;doesn&amp;#39;t&nbsp;have&nbsp;any&nbsp;bindings&nbsp;to&nbsp;any&nbsp;of&nbsp;the&nbsp;PPAPI&nbsp;interfaces&nbsp;that&nbsp;are&nbsp;exposed&nbsp;for&nbsp;interacting&nbsp;with&nbsp;the&nbsp;browser&nbsp;yet,&nbsp;so&nbsp;if&nbsp;you&nbsp;need&nbsp;such&nbsp;interaction,&nbsp;you&amp;#39;ll&nbsp;have&nbsp;to&nbsp;provide&nbsp;it&nbsp;in&nbsp;C/C++&nbsp;in&nbsp;the&nbsp;meantime;&nbsp;this&nbsp;is&nbsp;really&nbsp;a&nbsp;barebones&nbsp;implementation&nbsp;of&nbsp;Mono&nbsp;currently.&nbsp;šAnd&nbsp;lastly,&nbsp;I&nbsp;haven&amp;#39;t&nbsp;tested&nbsp;building&nbsp;Mono&nbsp;for&nbsp;NaCl&nbsp;under&nbsp;cygwin,&nbsp;but&nbsp;if&nbsp;you&nbsp;have&nbsp;the&nbsp;Native&nbsp;Client&nbsp;toolchain&nbsp;installed&nbsp;in&nbsp;cygwin,&nbsp;I&nbsp;would&nbsp;*assume*&nbsp;it&nbsp;should&nbsp;work,&nbsp;but&nbsp;you&amp;#39;re&nbsp;really&nbsp;in&nbsp;uncharted&nbsp;waters.&nbsp;šI&amp;#39;ve&nbsp;been&nbsp;building&nbsp;on&nbsp;Ubuntu&nbsp;10.04&nbsp;LTS&nbsp;and&nbsp;Mac&nbsp;OS&nbsp;X&nbsp;10.5.8&nbsp;with&nbsp;success.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-Elijah&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Feb&nbsp;18,&nbsp;2011&nbsp;at&nbsp;9:20&nbsp;AM,&nbsp;C.Rivlaldo&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:vladimir@neoaxisgroup.com&quot;&nbsp;target=&quot;_blank&quot;&gt;vladimir@neoaxisgroup.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;br&gt;<br>
Hello!&lt;br&gt;<br>
&lt;br&gt;<br>
I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;compile&nbsp;Mono&nbsp;2.10&nbsp;for&nbsp;Nacl&nbsp;at&nbsp;Ubuntu&nbsp;with&nbsp;using&nbsp;Elijah&amp;#39;s&lt;br&gt;<br>
patch.&lt;br&gt;<br>
&lt;br&gt;<br>
After&nbsp;executing&nbsp;&amp;quot;nacl-runtime-mono.sh&amp;quot;&nbsp;I&nbsp;had&nbsp;some&nbsp;error&nbsp;about&nbsp;undefined&lt;br&gt;<br>
reference:&lt;br&gt;<br>
genmdesc.c:29:&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`__nacl_suspend_thread_if_needed&amp;#39;&lt;br&gt;<br>
&lt;br&gt;<br>
Why&nbsp;it&nbsp;happened?&nbsp;Please,&nbsp;help&nbsp;me.&nbsp;I&nbsp;want&nbsp;to&nbsp;compile&nbsp;mono&nbsp;very&nbsp;much.&lt;br&gt;<br>
&lt;br&gt;<br>
P.S.&nbsp;End&nbsp;of&nbsp;log&nbsp;which&nbsp;I&nbsp;get:&lt;br&gt;<br>
/bin/bash&nbsp;../../libtool&nbsp;--tag=CC&nbsp;š&nbsp;--mode=link&lt;br&gt;<br>
/home/vladimir/nacl/native_client/toolchain/linux_x86/bin/nacl-gcc&lt;br&gt;<br>
-I../../../..&nbsp;-I../../../../eglib/src&nbsp;-I../../eglib/src&nbsp;š&nbsp;š-g&lt;br&gt;<br>
-D_POSIX_PATH_MAX=256&nbsp;-DPATH_MAX=256&nbsp;-fno-strict-aliasing&lt;br&gt;<br>
-Wdeclaration-after-statement&nbsp;-g&nbsp;-Wall&nbsp;-Wunused&nbsp;-Wmissing-prototypes&lt;br&gt;<br>
-Wmissing-declarations&nbsp;-Wstrict-prototypes&nbsp;š-Wmissing-prototypes&lt;br&gt;<br>
-Wnested-externs&nbsp;-Wpointer-arith&nbsp;-Wno-cast-qual&nbsp;-Wwrite-strings&lt;br&gt;<br>
-mno-tls-direct-seg-refs&nbsp;š&nbsp;-o&nbsp;genmdesc&nbsp;genmdesc-genmdesc.o&lt;br&gt;<br>
genmdesc-helpers.o&nbsp;genmdesc-opcodes.o&nbsp;../../mono/utils/&lt;a&nbsp;href=&quot;http://libmonoutils.la&quot;&nbsp;target=&quot;_blank&quot;&gt;libmonoutils.la&lt;/a&gt;&nbsp;-lm&lt;br&gt;<br>
-L../../eglib/src&nbsp;-leglib&nbsp;-lm&nbsp;-lm&nbsp;-lnosys&nbsp;-lg&nbsp;-lpthread&lt;br&gt;<br>
libtool:&nbsp;link:&lt;br&gt;<br>
/home/vladimir/nacl/native_client/toolchain/linux_x86/bin/nacl-gcc&lt;br&gt;<br>
-I../../../..&nbsp;-I../../../../eglib/src&nbsp;-I../../eglib/src&nbsp;-g&lt;br&gt;<br>
-D_POSIX_PATH_MAX=256&nbsp;-DPATH_MAX=256&nbsp;-fno-strict-aliasing&lt;br&gt;<br>
-Wdeclaration-after-statement&nbsp;-g&nbsp;-Wall&nbsp;-Wunused&nbsp;-Wmissing-prototypes&lt;br&gt;<br>
-Wmissing-declarations&nbsp;-Wstrict-prototypes&nbsp;-Wmissing-prototypes&lt;br&gt;<br>
-Wnested-externs&nbsp;-Wpointer-arith&nbsp;-Wno-cast-qual&nbsp;-Wwrite-strings&lt;br&gt;<br>
-mno-tls-direct-seg-refs&nbsp;-o&nbsp;genmdesc&nbsp;genmdesc-genmdesc.o&nbsp;genmdesc-helpers.o&lt;br&gt;<br>
genmdesc-opcodes.o&nbsp;š../../mono/utils/.libs/libmonoutils.a&lt;br&gt;<br>
-L/home/vladimir/mono/nacl/runtime-build/eglib/src&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/eglib/src/.libs/libeglib.a&nbsp;-lm&lt;br&gt;<br>
-lnosys&nbsp;-lg&nbsp;-lpthread&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/eglib/src/.libs/libeglib.a(libeglib_la-gpath.o):&lt;br&gt;<br>
In&nbsp;function&nbsp;`monoeg_g_find_program_in_path&amp;#39;:&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/eglib/src/../../../../eglib/src/gpath.c:226:&lt;br&gt;<br>
warning:&nbsp;the&nbsp;`access&amp;#39;&nbsp;function&nbsp;is&nbsp;not&nbsp;implemented&nbsp;and&nbsp;will&nbsp;always&nbsp;fail&lt;br&gt;<br>
/home/vladimir/nacl/native_client/toolchain/linux_x86/bin/../lib/gcc/nacl64/4.4.3/../../../../nacl64/lib/../lib32/libg.a(lib_a-execve.o):&lt;br&gt;<br>
In&nbsp;function&nbsp;`execve&amp;#39;:&lt;br&gt;<br>
execve.c:(.text+0xa):&nbsp;warning:&nbsp;the&nbsp;`_execve&amp;#39;&nbsp;function&nbsp;is&nbsp;not&nbsp;implemented&nbsp;and&lt;br&gt;<br>
will&nbsp;always&nbsp;fail&lt;br&gt;<br>
/home/vladimir/nacl/native_client/toolchain/linux_x86/bin/../lib/gcc/nacl64/4.4.3/../../../../nacl64/lib/../lib32/libg.a(lib_a-execr.o):&lt;br&gt;<br>
In&nbsp;function&nbsp;`_fork_r&amp;#39;:&lt;br&gt;<br>
execr.c:(.text+0x9c):&nbsp;warning:&nbsp;the&nbsp;`fork&amp;#39;&nbsp;function&nbsp;is&nbsp;not&nbsp;implemented&nbsp;and&lt;br&gt;<br>
will&nbsp;always&nbsp;fail&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/eglib/src/.libs/libeglib.a(libeglib_la-gfile-posix.o):&lt;br&gt;<br>
In&nbsp;function&nbsp;`monoeg_g_get_current_dir&amp;#39;:&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/eglib/src/../../../../eglib/src/gfile-posix.c:158:&lt;br&gt;<br>
warning:&nbsp;the&nbsp;`getcwd&amp;#39;&nbsp;function&nbsp;is&nbsp;not&nbsp;implemented&nbsp;and&nbsp;will&nbsp;always&nbsp;fail&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/eglib/src/.libs/libeglib.a(libeglib_la-gmisc-unix.o):&lt;br&gt;<br>
In&nbsp;function&nbsp;`get_pw_data&amp;#39;:&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/eglib/src/../../../../eglib/src/gmisc-unix.c:97:&lt;br&gt;<br>
warning:&nbsp;the&nbsp;`getpwuid_r&amp;#39;&nbsp;function&nbsp;is&nbsp;not&nbsp;implemented&nbsp;and&nbsp;will&nbsp;always&nbsp;fail&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/eglib/src/../../../../eglib/src/gmisc-unix.c:97:&lt;br&gt;<br>
warning:&nbsp;the&nbsp;`getuid&amp;#39;&nbsp;function&nbsp;is&nbsp;not&nbsp;implemented&nbsp;and&nbsp;will&nbsp;always&nbsp;fail&lt;br&gt;<br>
genmdesc-helpers.o:&nbsp;In&nbsp;function&nbsp;`mono_disassemble_code&amp;#39;:&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/mono/mini/../../../../mono/mini/helpers.c:253:&lt;br&gt;<br>
warning:&nbsp;the&nbsp;`unlink&amp;#39;&nbsp;function&nbsp;is&nbsp;not&nbsp;implemented&nbsp;and&nbsp;will&nbsp;always&nbsp;fail&lt;br&gt;<br>
/home/vladimir/nacl/native_client/toolchain/linux_x86/bin/../lib/gcc/nacl64/4.4.3/../../../../nacl64/lib/../lib32/libg.a(lib_a-execr.o):&lt;br&gt;<br>
In&nbsp;function&nbsp;`_wait_r&amp;#39;:&lt;br&gt;<br>
execr.c:(.text+0x1c):&nbsp;warning:&nbsp;the&nbsp;`wait&amp;#39;&nbsp;function&nbsp;is&nbsp;not&nbsp;implemented&nbsp;and&lt;br&gt;<br>
will&nbsp;always&nbsp;fail&lt;br&gt;<br>
genmdesc-genmdesc.o:&nbsp;In&nbsp;function&nbsp;`monoeg_strdup&amp;#39;:&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/mono/mini/../../../../eglib/src/glib.h:148:&lt;br&gt;<br>
undefined&nbsp;reference&nbsp;to&nbsp;`__nacl_suspend_thread_if_needed&amp;#39;&lt;br&gt;<br>
genmdesc-genmdesc.o:&nbsp;In&nbsp;function&nbsp;`inst_name&amp;#39;:&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/mono/mini/../../../../mono/mini/genmdesc.c:29:&lt;br&gt;<br>
undefined&nbsp;reference&nbsp;to&nbsp;`__nacl_suspend_thread_if_needed&amp;#39;&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/mono/mini/../../../../mono/mini/genmdesc.c:34:&lt;br&gt;<br>
undefined&nbsp;reference&nbsp;to&nbsp;`__nacl_suspend_thread_if_needed&amp;#39;&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/mono/mini/../../../../mono/mini/genmdesc.c:34:&lt;br&gt;<br>
undefined&nbsp;reference&nbsp;to&nbsp;`__nacl_suspend_thread_if_needed&amp;#39;&lt;br&gt;<br>
genmdesc-genmdesc.o:&nbsp;In&nbsp;function&nbsp;`load_file&amp;#39;:&lt;br&gt;<br>
/home/vladimir/mono/nacl/runtime-build/mono/mini/../../../../mono/mini/genmdesc.c:53:&lt;br&gt;<br>
undefined&nbsp;reference&nbsp;to&nbsp;`__nacl_suspend_thread_if_needed&amp;#39;&lt;br&gt;<br>
genmdesc-genmdesc.o:/home/vladimir/mono/nacl/runtime-build/mono/mini/../../../../mono/mini/genmdesc.c:62:&lt;br&gt;<br>
more&nbsp;undefined&nbsp;references&nbsp;to&nbsp;`__nacl_suspend_thread_if_needed&amp;#39;&nbsp;follow&lt;br&gt;<br>
collect2:&nbsp;ld&nbsp;returned&nbsp;1&nbsp;exit&nbsp;status&lt;br&gt;<br>
make[3]:&nbsp;***&nbsp;[genmdesc]&nbsp;ïÛÉÂËÁ&nbsp;1&lt;br&gt;<br>
make[3]:&nbsp;÷ÙÈÏÄ&nbsp;ÉÚ&nbsp;ËÁÔÁÌÏÇÁ&lt;br&gt;<br>
`/home/vladimir/mono/nacl/runtime-build/mono/mini&amp;#39;&lt;br&gt;<br>
make[2]:&nbsp;***&nbsp;[all-recursive]&nbsp;ïÛÉÂËÁ&nbsp;1&lt;br&gt;<br>
make[2]:&nbsp;÷ÙÈÏÄ&nbsp;ÉÚ&nbsp;ËÁÔÁÌÏÇÁ&nbsp;`/home/vladimir/mono/nacl/runtime-build/mono&amp;#39;&lt;br&gt;<br>
make[1]:&nbsp;***&nbsp;[all-recursive]&nbsp;ïÛÉÂËÁ&nbsp;1&lt;br&gt;<br>
make[1]:&nbsp;÷ÙÈÏÄ&nbsp;ÉÚ&nbsp;ËÁÔÁÌÏÇÁ&nbsp;`/home/vladimir/mono/nacl/runtime-build&amp;#39;&lt;br&gt;<br>
make:&nbsp;***&nbsp;[all]&nbsp;ïÛÉÂËÁ&nbsp;2&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
--&lt;br&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/PATCH-more-support-for-Google-Native-Client-tp3159583p3313177.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://mono.1490590.n4.nabble.com/PATCH-more-support-for-Google-Native-Client-tp3159583p3313177.html&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>
Sent&nbsp;from&nbsp;the&nbsp;Mono&nbsp;-&nbsp;Dev&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
