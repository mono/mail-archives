<tt>
Hi&nbsp;Alan,&lt;br&gt;&lt;br&gt;There&nbsp;a&nbsp;couple&nbsp;of&nbsp;issues&nbsp;with&nbsp;your&nbsp;code,&nbsp;let&nbsp;me&nbsp;get&nbsp;on&nbsp;them:&lt;br&gt;&lt;br&gt;-Until&nbsp;recently&nbsp;(last&nbsp;night),&nbsp;getters&nbsp;were&nbsp;not&nbsp;accelerated,&nbsp;which&nbsp;causes&nbsp;a&nbsp;significant&lt;br&gt;slowdown.&nbsp;I&nbsp;fixed&nbsp;this&nbsp;in&nbsp;r118899.&nbsp;The&nbsp;generated&nbsp;code&nbsp;is&nbsp;not&nbsp;as&nbsp;good&nbsp;as&nbsp;it&nbsp;could&nbsp;be,&lt;br&gt;<br>
but&nbsp;this&nbsp;will&nbsp;be&nbsp;fixed&nbsp;eventually.&lt;br&gt;&lt;br&gt;-Setters&nbsp;are&nbsp;still&nbsp;not&nbsp;accelerated,&nbsp;I&amp;#39;ll&nbsp;work&nbsp;on&nbsp;this&nbsp;next&nbsp;week,&nbsp;so&nbsp;until&nbsp;then&nbsp;your&nbsp;code&lt;br&gt;will&nbsp;suffer.&lt;br&gt;&lt;br&gt;-Once&nbsp;you&nbsp;use&nbsp;a&nbsp;single&nbsp;non-accelerated&nbsp;method&nbsp;on&nbsp;a&nbsp;Vector&nbsp;variable&nbsp;all&nbsp;operations&lt;br&gt;<br>
on&nbsp;it&nbsp;will&nbsp;be&nbsp;slower&nbsp;due&nbsp;to&nbsp;how&nbsp;our&nbsp;JIT&nbsp;works&nbsp;-&nbsp;they&nbsp;still&nbsp;use&nbsp;sse&nbsp;instructions,&nbsp;but&lt;br&gt;with&nbsp;a&nbsp;performance&nbsp;penalty.&lt;br&gt;&lt;br&gt;-Getters&nbsp;and&nbsp;setter&nbsp;are&nbsp;a&nbsp;hint&nbsp;of&nbsp;ill&nbsp;vectorized&nbsp;code.&nbsp;The&nbsp;last&nbsp;part&nbsp;of&nbsp;your&nbsp;unsafe&nbsp;code&lt;br&gt;should&nbsp;use&nbsp;temps&nbsp;for&nbsp;the&nbsp;intermediate&nbsp;results.&lt;br&gt;<br>
&lt;br&gt;-In&nbsp;the&nbsp;unsafe&nbsp;case&nbsp;you&nbsp;should&nbsp;use&nbsp;a&nbsp;Vector4ui&nbsp;store&nbsp;instead&nbsp;of&nbsp;extracting&nbsp;each&nbsp;element.&lt;br&gt;&lt;br&gt;-For&nbsp;the&nbsp;safe&nbsp;case&nbsp;we&nbsp;still&nbsp;miss&nbsp;proper&nbsp;integration&nbsp;with&nbsp;arrays,&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;methods&nbsp;to&lt;br&gt;extract&nbsp;and&nbsp;store&nbsp;vectors&nbsp;from&nbsp;them.&lt;br&gt;<br>
&lt;br&gt;Your&nbsp;code&nbsp;looks&nbsp;a&nbsp;bit&nbsp;strange,&nbsp;the&nbsp;Vector4ui&nbsp;constructor&nbsp;indexes&nbsp;in&nbsp;particular.&nbsp;Have&nbsp;you&nbsp;checked&nbsp;that&lt;br&gt;the&nbsp;output&nbsp;of&nbsp;the&nbsp;3&nbsp;methods&nbsp;are&nbsp;the&nbsp;same?&lt;br&gt;&lt;br&gt;I&amp;#39;ll&nbsp;work&nbsp;on&nbsp;the&nbsp;Mono.Simd&nbsp;issues&nbsp;next&nbsp;week,&nbsp;getting&nbsp;setters&nbsp;to&nbsp;be&nbsp;accelerated,&nbsp;some&nbsp;methods&lt;br&gt;<br>
to&nbsp;better&nbsp;integrate&nbsp;with&nbsp;arrays&nbsp;and&nbsp;other&nbsp;things&nbsp;like&nbsp;element&nbsp;extractors.&lt;br&gt;&lt;br&gt;Rodrigo&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Nov&nbsp;15,&nbsp;2008&nbsp;at&nbsp;12:13&nbsp;AM,&nbsp;Alan&nbsp;McGovern&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:alan.mcgovern@gmail.com&quot;&gt;alan.mcgovern@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;I&nbsp;found&nbsp;a&nbsp;bit&nbsp;of&nbsp;code&nbsp;in&nbsp;the&nbsp;SHA1&nbsp;implementation&nbsp;which&nbsp;i&nbsp;thought&nbsp;was&lt;br&gt;<br>
ideal&nbsp;for&nbsp;SIMD&nbsp;optimisations.&nbsp;However,&nbsp;unless&nbsp;i&nbsp;resort&nbsp;to&nbsp;unsafe&nbsp;code,&lt;br&gt;<br>
it&amp;#39;s&nbsp;actually&nbsp;substantially&nbsp;slower!&nbsp;I&amp;#39;ve&nbsp;attached&nbsp;three&lt;br&gt;<br>
implementations&nbsp;of&nbsp;the&nbsp;method&nbsp;here.&nbsp;The&nbsp;original,&nbsp;the&nbsp;safe&nbsp;SIMD&nbsp;and&lt;br&gt;<br>
the&nbsp;unsafe&nbsp;SIMD.&nbsp;The&nbsp;runtimes&nbsp;are&nbsp;as&nbsp;follows:&lt;br&gt;<br>
&lt;br&gt;<br>
Original:&nbsp;600ms&lt;br&gt;<br>
Unsafe&nbsp;Simd:&nbsp;450ms&lt;br&gt;<br>
Safe&nbsp;Simd:&nbsp;1700ms&lt;br&gt;<br>
&lt;br&gt;<br>
Also,&nbsp;the&nbsp;method&nbsp;is&nbsp;always&nbsp;called&nbsp;with&nbsp;a&nbsp;uint[]&nbsp;of&nbsp;length&nbsp;80.&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;this&nbsp;just&nbsp;the&nbsp;wrong&nbsp;place&nbsp;to&nbsp;be&nbsp;using&nbsp;simd?&nbsp;It&nbsp;seemed&nbsp;ideal&nbsp;because&lt;br&gt;<br>
i&nbsp;need&nbsp;75%&nbsp;less&nbsp;XOR&amp;#39;s.&nbsp;If&nbsp;anyone&nbsp;has&nbsp;an&nbsp;ideas&nbsp;on&nbsp;whether&nbsp;SIMD&nbsp;could&lt;br&gt;<br>
actually&nbsp;be&nbsp;useful&nbsp;for&nbsp;this&nbsp;case&nbsp;or&nbsp;not,&nbsp;let&nbsp;me&nbsp;know.&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
Alan.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;original&nbsp;code&nbsp;is:&lt;br&gt;<br>
&lt;br&gt;<br>
private&nbsp;static&nbsp;void&nbsp;FillBuff(uint[]&nbsp;buff)&lt;br&gt;<br>
{&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;uint&nbsp;val;&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;16;&nbsp;i&nbsp;&amp;lt;&nbsp;80;&nbsp;i&nbsp;+=&nbsp;8)&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;val&nbsp;=&nbsp;buff[i&nbsp;-&nbsp;3]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;8]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;14]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;16];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[i]&nbsp;=&nbsp;(val&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(val&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;val&nbsp;=&nbsp;buff[i&nbsp;-&nbsp;2]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;7]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;13]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;15];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[i&nbsp;+&nbsp;1]&nbsp;=&nbsp;(val&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(val&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;val&nbsp;=&nbsp;buff[i&nbsp;-&nbsp;1]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;6]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;12]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;14];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[i&nbsp;+&nbsp;2]&nbsp;=&nbsp;(val&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(val&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;val&nbsp;=&nbsp;buff[i&nbsp;+&nbsp;0]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;5]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;11]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;13];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[i&nbsp;+&nbsp;3]&nbsp;=&nbsp;(val&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(val&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;val&nbsp;=&nbsp;buff[i&nbsp;+&nbsp;1]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;4]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;10]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;12];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[i&nbsp;+&nbsp;4]&nbsp;=&nbsp;(val&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(val&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;val&nbsp;=&nbsp;buff[i&nbsp;+&nbsp;2]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;3]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;9]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;11];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[i&nbsp;+&nbsp;5]&nbsp;=&nbsp;(val&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(val&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;val&nbsp;=&nbsp;buff[i&nbsp;+&nbsp;3]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;2]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;8]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;10];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[i&nbsp;+&nbsp;6]&nbsp;=&nbsp;(val&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(val&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;val&nbsp;=&nbsp;buff[i&nbsp;+&nbsp;4]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;1]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;7]&nbsp;^&nbsp;buff[i&nbsp;-&nbsp;9];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[i&nbsp;+&nbsp;7]&nbsp;=&nbsp;(val&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(val&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;unsafe&nbsp;SIMD&nbsp;code&nbsp;is:&lt;br&gt;<br>
public&nbsp;unsafe&nbsp;static&nbsp;void&nbsp;FillBuff(uint[]&nbsp;buffb)&lt;br&gt;<br>
{&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;fixed&nbsp;(uint*&nbsp;buff&nbsp;=&nbsp;buffb)&nbsp;{&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Vector4ui&nbsp;e;&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;for&nbsp;(int&nbsp;t&nbsp;=&nbsp;16;&nbsp;t&nbsp;&amp;lt;&nbsp;buffb.Length;&nbsp;t&nbsp;+=&nbsp;4)&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;e&nbsp;=&nbsp;*((Vector4ui*)&amp;amp;(buff&nbsp;[t-16]))&nbsp;^&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;*((Vector4ui*)&amp;amp;(buff&nbsp;[t-14]))&nbsp;^&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;*((Vector4ui*)&amp;amp;(buff&nbsp;[t-&nbsp;8]))&nbsp;^&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;*((Vector4ui*)&amp;amp;(buff&nbsp;[t-&nbsp;3]));&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;e.W&nbsp;^=&nbsp;buff[t];&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[t]&nbsp;=&nbsp;(e.X&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(e.X&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[t&nbsp;+&nbsp;1]&nbsp;=&nbsp;(e.Y&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(e.Y&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[t&nbsp;+&nbsp;2]&nbsp;=&nbsp;(e.Z&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(e.Z&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[t&nbsp;+&nbsp;3]&nbsp;=&nbsp;(e.W&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(e.W&nbsp;&amp;gt;&amp;gt;&nbsp;31)&nbsp;^&nbsp;((e.X&nbsp;&amp;lt;&amp;lt;&nbsp;2)&nbsp;|&nbsp;(e.X&nbsp;&amp;gt;&amp;gt;&nbsp;30));&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;safe&nbsp;simd&nbsp;code&nbsp;is:&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;public&nbsp;static&nbsp;void&nbsp;FillBuff(uint[]&nbsp;buff)&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Vector4ui&nbsp;e;&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;for&nbsp;(int&nbsp;t&nbsp;=&nbsp;16;&nbsp;t&nbsp;&amp;lt;&nbsp;buff.Length;&nbsp;t&nbsp;+=&nbsp;4)&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;e&nbsp;=&nbsp;new&nbsp;Vector4ui&nbsp;(buff&nbsp;[t-16],buff&nbsp;[t-15],buff&lt;br&gt;<br>
[t-14],buff&nbsp;[t-13])&nbsp;^&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;new&nbsp;Vector4ui&nbsp;(buff&nbsp;[t-14],buff&nbsp;[t-13],buff&lt;br&gt;<br>
[t-12],buff&nbsp;[t-11])&nbsp;^&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;new&nbsp;Vector4ui&nbsp;(buff&nbsp;[t-8],&nbsp;&amp;nbsp;buff&nbsp;[t-7],&nbsp;&amp;nbsp;buff&lt;br&gt;<br>
[t-6],&nbsp;&amp;nbsp;buff&nbsp;[t-5])&nbsp;^&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;new&nbsp;Vector4ui&nbsp;(buff&nbsp;[t-3],&nbsp;&amp;nbsp;buff&nbsp;[t-2],&nbsp;&amp;nbsp;buff&lt;br&gt;<br>
[t-1],&nbsp;&amp;nbsp;buff&nbsp;[t-0]);&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;e.W&nbsp;^=&nbsp;buff[t];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[t]&nbsp;=&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;(e.X&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(e.X&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[t&nbsp;+&nbsp;1]&nbsp;=&nbsp;(e.Y&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(e.Y&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[t&nbsp;+&nbsp;2]&nbsp;=&nbsp;(e.Z&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(e.Z&nbsp;&amp;gt;&amp;gt;&nbsp;31);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;buff[t&nbsp;+&nbsp;3]&nbsp;=&nbsp;(e.W&nbsp;&amp;lt;&amp;lt;&nbsp;1)&nbsp;|&nbsp;(e.W&nbsp;&amp;gt;&amp;gt;&nbsp;31)&nbsp;^&nbsp;((e.X&nbsp;&amp;lt;&amp;lt;&nbsp;2)&nbsp;|&lt;br&gt;<br>
(e.X&nbsp;&amp;gt;&amp;gt;&nbsp;30));&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
