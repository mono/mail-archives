Index: configure.in
===================================================================
--- configure.in	(revision 105686)
+++ configure.in	(working copy)
 -148,6 +148,16 @@
 AC_SUBST(SERVER_DEPENDENCIES_CFLAGS)
 AC_SUBST(SERVER_DEPENDENCIES_LIBS)
 
+## Check Cecil
+if pkg-config --modversion cecil>/dev/null; then
+	AC_MSG_RESULT("Found cecil.pc")
+else
+	AC_MSG_ERROR([You are missing Cecil (cecil.pc for packageconfig)])
+fi
+
+CECIL_ASM=`pkg-config --variable=Libraries cecil`
+AC_SUBST(CECIL_ASM)
+
 if test x$server_only != xyes ; then
    PKG_CHECK_MODULES(WRAPPER, mono >= $MONO_REQUIRED_VERSION gthread-2.0 >= $GLIB_REQUIRED_VERSION)
    AC_SUBST(WRAPPER_CFLAGS)
Index: build/Makefile.am
===================================================================
--- build/Makefile.am	(revision 105686)
+++ build/Makefile.am	(working copy)
 -12,8 +12,6 @@
 	Mono.Debugger.Frontend.dll			\
 	Mono.Debugger.Test.dll
 
-EXTRA_DATA = Mono.Debugger.Cecil.dll
-
 LANGUAGE_SPECIFIC_FILES = \
 	$(top_builddir)/frontend/CSharpExpressionParser.cs	\
 	$(top_srcdir)/frontend/CSharpTokenizer.cs
 -56,7 +54,7 @@
 	-r:Mono.GetOptions				\
 	-r:Mono.CompilerServices.SymbolWriter		\
 	-r:System.Runtime.Serialization.Formatters.Soap	\
-	-r:$(srcdir)/Mono.Debugger.Cecil.dll
+	-r:$(srcdir)/Mono.Cecil.dll
 
 MDB_DEPS = \
 	-r:Mono.GetOptions				\
 -70,7 +68,7 @@
 	-r:nunit.framework				\
 	-r:nunit.core
 
-Mono.Debugger.dll: Makefile $(srcdir)/Mono.Debugger.Cecil.dll $(DEBUGGER_SRCLIST)
+Mono.Debugger.dll: Makefile $(srcdir)/Mono.Cecil.dll $(DEBUGGER_SRCLIST)
 	$(MCS) -target:library -out:Mono.Debugger.dll $(MCS_FLAGS) -keyfile:$(top_srcdir)/build/mono.snk -resource:$(top_srcdir)/classes/DebuggerConfiguration.xsd,DebuggerConfiguration $(DEBUGGER_DEPS) $(DEBUGGER_SRCLIST)
 
 Mono.Debugger.Frontend.dll: Makefile $(MDB_SRCLIST) Mono.Debugger.dll
 -79,8 +77,8 @@
 Mono.Debugger.Test.dll: Makefile $(TEST_SRCLIST) Mono.Debugger.dll Mono.Debugger.Frontend.dll
 	$(MCS) -target:library -out:Mono.Debugger.Test.dll $(MCS_FLAGS) -keyfile:$(top_srcdir)/build/mono.snk $(TEST_DEPS) $(TEST_SRCLIST)
 
-#Mono.Debugger.Cecil.dll: Makefile $(top_srcdir)/cecil/lib/Mono.Cecil.dll.sources
-#	(dir=`pwd` && cd $(top_srcdir)/cecil/lib && $(MCS) -target:library -out:$$dir/Mono.Debugger.Cecil.dll $(MCS_FLAGS) @Mono.Cecil.dll.sources -keyfile:$(top_srcdir)/build/mono.snk)
+Mono.Cecil.dll:
+	cp $(CECIL_ASM) $(srcdir)
 
 mdb.exe: Makefile $(MDB_SRCLIST) Mono.Debugger.dll
 	$(MCS) -out:mdb.exe $(MDB_DEPS) $(MDB_SRCLIST) $(MCS_FLAGS)
 -103,8 +101,7 @@
 	Mono.Debugger.Test.dll
 
 EXTRA_DIST = \
-	mdb.in runtests.in mono.snk AssemblyInfo.cs.in Mono.Debugger.dll.config.in \
-	Mono.Debugger.Cecil.dll
+	mdb.in runtests.in mono.snk AssemblyInfo.cs.in Mono.Debugger.dll.config.in
 
 mdb: mdb.in Makefile
 	sed -e 's^\@twodir\@^$(twodir)^g' < $(srcdir)/mdb.in > mdb.tmp \
 -120,12 +117,10 @@
 	&& mv runtests.tmp runtests && chmod 755 runtests
 
 install-data-local:
-	$(GACUTIL) /i $(srcdir)/Mono.Debugger.Cecil.dll /f $(GACUTIL_FLAGS) || exit 1;
 	$(GACUTIL) /i Mono.Debugger.dll /f $(GACUTIL_FLAGS) || exit 1;
 
 uninstall-local:
 	$(GACUTIL) /u Mono.Debugger $(GACUTIL_FLAGS) || exit 1;
-	$(GACUTIL) /u Mono.Debugger.Cecil $(GACUTIL_FLAGS) || exit 1;
 
 NUNIT_CONSOLE_FLAGS =