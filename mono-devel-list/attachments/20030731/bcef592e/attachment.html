<tt>
&lt;DIV&gt;I&nbsp;updated&nbsp;my&nbsp;mcs&nbsp;sources&nbsp;and&nbsp;removed&nbsp;the&nbsp;hack&nbsp;I&nbsp;had&nbsp;in&nbsp;the&nbsp;trampoline&nbsp;code&nbsp;and&nbsp;now&nbsp;it&nbsp;works.&nbsp;Thanks.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;-Laurent&lt;BR&gt;&lt;BR&gt;&lt;B&gt;&lt;I&gt;Paolo&nbsp;Molaro&nbsp;&amp;lt;lupus@ximian.com&amp;gt;&lt;/I&gt;&lt;/B&gt;&nbsp;wrote:&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;BLOCKQUOTE&nbsp;style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#1010ff&nbsp;2px&nbsp;solid;&nbsp;WIDTH:&nbsp;100%&quot;&gt;On&nbsp;07/26/03&nbsp;Laurent&nbsp;Morichetti&nbsp;wrote:&lt;BR&gt;&amp;gt;&nbsp;I'm&nbsp;having&nbsp;a&nbsp;problem&nbsp;with&nbsp;the&nbsp;trampoline&nbsp;code&nbsp;when&nbsp;passing&nbsp;a&lt;BR&gt;&amp;gt;&nbsp;RuntimeTypeHandle&nbsp;argument.&nbsp;It&nbsp;is&nbsp;assumed&nbsp;by&nbsp;the&nbsp;callee&nbsp;method&nbsp;that&nbsp;a&lt;BR&gt;&amp;gt;&nbsp;RuntimeTypeHandle&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;a&nbsp;MonoType*.&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;On&nbsp;most&nbsp;platforms&nbsp;this&nbsp;assumption&nbsp;is&nbsp;correct&nbsp;but&nbsp;on&nbsp;HP-UX&nbsp;IPF&nbsp;32bit&nbsp;(big&lt;BR&gt;&amp;gt;&nbsp;endian)&nbsp;it&nbsp;is&nbsp;not.&lt;BR&gt;&lt;BR&gt;Right,&nbsp;we&nbsp;have&nbsp;a&nbsp;related&nbsp;issue&nbsp;on&nbsp;sparc,&nbsp;too.&lt;BR&gt;&lt;BR&gt;&amp;gt;&nbsp;Should&nbsp;the&nbsp;trampoline&nbsp;code&nbsp;convert&nbsp;a&nbsp;RuntimeTypeHandle&nbsp;vt&nbsp;argument&nbsp;to&nbsp;a&lt;BR&gt;&amp;gt;&nbsp;scalar&nbsp;argument&nbsp;or&nbsp;should&nbsp;it&nbsp;be&nbsp;handled&nbsp;by&nbsp;the&nbsp;runtime?&nbsp;If&nbsp;handled&nbsp;by&nbsp;the&lt;BR&gt;&amp;gt;&nbsp;trampoline&nbsp;code,&nbsp;is&nbsp;there&nbsp;any&nbsp;other&nbsp;types&nbsp;assumed&nbsp;to&nbsp;be&nbsp;equivalent&nbsp;to&nbsp;their&lt;BR&gt;&amp;gt;&nbsp;unboxed&nbsp;representation?&lt;BR&gt;&lt;BR&gt;The&nbsp;solution&nbsp;is&nbsp;to&nbsp;declare&nbsp;the&nbsp;internal&nbsp;calls&nbsp;to&nbsp;take&nbsp;a&nbsp;pointer&lt;BR&gt;and&nbsp;change&nbsp;the&nbsp;code&nbsp;to&nbsp;pass&nbsp;RuntimeTypeHandle.Value:&nbsp;this&nbsp;avoids&nbsp;any&lt;BR&gt;special&nbsp;cases.&lt;BR&gt;I'll&nbsp;commit&nbsp;a&nbsp;fix&nbsp;for&nbsp;RuntimeTypeHandle<br>
&nbsp;in&nbsp;minutes,&nbsp;though&nbsp;there&nbsp;may&nbsp;be&lt;BR&gt;other&nbsp;such&nbsp;cases&nbsp;for&nbsp;similar&nbsp;constructs.&lt;BR&gt;Thanks.&lt;BR&gt;&lt;BR&gt;lupus&lt;BR&gt;&lt;BR&gt;--&nbsp;&lt;BR&gt;-----------------------------------------------------------------&lt;BR&gt;lupus@debian.org&nbsp;debian/rules&lt;BR&gt;lupus@ximian.com&nbsp;Monkeys&nbsp;do&nbsp;it&nbsp;better&lt;BR&gt;_______________________________________________&lt;BR&gt;Mono-devel-list&nbsp;mailing&nbsp;list&lt;BR&gt;Mono-devel-list@lists.ximian.com&lt;BR&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/BLOCKQUOTE&gt;&lt;/DIV&gt;
</tt>
