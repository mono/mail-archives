using System;
using System.Runtime.Serialization.Formatters.Soap;
using System.Net;
using System.IO;

namespace dumb_GH20
{
	class Program
	{
		static void Main (string[] args)
		{
			WebException def = new WebException ();
			Console.Out.Write (def.Status);

			Uri url = new Uri ("http://google.com");
			WebRequest wr = WebRequest.Create (url);
			WebResponse resp = wr.GetResponse ();
			WebException e = new WebException ("message", new Exception ("inner"),
				WebExceptionStatus.PipelineFailure, resp);
			SoapFormatter f = new SoapFormatter ();
			FileStream fs = new FileStream ("out.xml", FileMode.OpenOrCreate);
			f.Serialize (fs, e);

			WebException e1 = (WebException) f.Deserialize (new FileStream ("in.xml", FileMode.Open));
			if (e1.Response == null)
				Console.Out.WriteLine ("<null>");
			Console.Out.WriteLine (e1.Response);
		}

	}
}
