<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7652.24&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[Mono-dev]&nbsp;Performance&nbsp;problem&nbsp;with&nbsp;System.Data&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hey&nbsp;Hubert,&lt;BR&gt;<br>
&lt;BR&gt;<br>
You&nbsp;hit&nbsp;a&nbsp;serious&nbsp;design&nbsp;issue&nbsp;in&nbsp;sys.Data:&nbsp;indeed&nbsp;the&nbsp;performance&nbsp;of&nbsp;DataView&nbsp;is&nbsp;really&nbsp;poor.&lt;BR&gt;<br>
The&nbsp;reason&nbsp;is&nbsp;as&nbsp;following:&nbsp;every&nbsp;time&nbsp;a&nbsp;change&nbsp;operation&nbsp;is&nbsp;performed&nbsp;on&nbsp;some&nbsp;row,&nbsp;the&nbsp;DataView&nbsp;does&nbsp;not&nbsp;have&nbsp;enough&nbsp;knowledge&nbsp;how&nbsp;that&nbsp;will&nbsp;affect&nbsp;its&nbsp;index,&nbsp;thus&nbsp;DataView&nbsp;rebuilds&nbsp;it.&nbsp;(May&nbsp;be&nbsp;in&nbsp;case&nbsp;with&nbsp;Delete&nbsp;it's&nbsp;clear,&nbsp;but&nbsp;there&nbsp;are&nbsp;many&nbsp;other&nbsp;cases,&nbsp;see&nbsp;OnRowChanged()&nbsp;).&lt;BR&gt;<br>
&lt;BR&gt;<br>
When&nbsp;designing&nbsp;current&nbsp;index&nbsp;implementation&nbsp;I&nbsp;planned&nbsp;to&nbsp;extend&nbsp;the&nbsp;index&nbsp;with&nbsp;events,&nbsp;similar&nbsp;to&nbsp;those&nbsp;DataTable&nbsp;has&nbsp;(i.e.&nbsp;RowChanged,&nbsp;RowDeleted&nbsp;etc).&nbsp;The&nbsp;DataView&nbsp;will&nbsp;need&nbsp;to&nbsp;subscribe&nbsp;to&nbsp;Index&nbsp;events&nbsp;instead&nbsp;of&nbsp;those&nbsp;of&nbsp;DataTable&nbsp;(like&nbsp;it&nbsp;does&nbsp;now).&nbsp;When&nbsp;DataTable&nbsp;changes,&nbsp;it&nbsp;should&nbsp;notify&nbsp;all&nbsp;its&nbsp;indices,&nbsp;so&nbsp;DataView's&nbsp;index&nbsp;will&nbsp;fire&nbsp;a&nbsp;relevant&nbsp;event&nbsp;to&nbsp;its&nbsp;DataView,&nbsp;eliminating&nbsp;the&nbsp;need&nbsp;for&nbsp;UpdateIndex.&lt;BR&gt;<br>
&lt;BR&gt;<br>
But&nbsp;when&nbsp;the&nbsp;index&nbsp;implementation&nbsp;has&nbsp;been&nbsp;submitted&nbsp;and&nbsp;everything&nbsp;worked,&nbsp;including&nbsp;the&nbsp;DataView,&nbsp;I&nbsp;did&nbsp;not&nbsp;have&nbsp;a&nbsp;chance&nbsp;to&nbsp;rewrite&nbsp;DataView&nbsp;and&nbsp;left&nbsp;it&nbsp;mostly&nbsp;untouched.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Having&nbsp;all&nbsp;this&nbsp;in&nbsp;mind,&nbsp;fixing&nbsp;only&nbsp;the&nbsp;Delete()&nbsp;scenario&nbsp;won't&nbsp;solve&nbsp;the&nbsp;issue&nbsp;in&nbsp;general.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Regards,&lt;BR&gt;<br>
Konstantin&nbsp;Triger&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
-----Original&nbsp;Message-----&lt;BR&gt;<br>
From:&nbsp;mono-devel-list-bounces@lists.ximian.com&nbsp;on&nbsp;behalf&nbsp;of&nbsp;Hubert&nbsp;FONGARNAND&lt;BR&gt;<br>
Sent:&nbsp;Fri&nbsp;2/1/2008&nbsp;13:08&lt;BR&gt;<br>
To:&nbsp;mono-devel-list@lists.ximian.com&lt;BR&gt;<br>
Subject:&nbsp;[Mono-dev]&nbsp;Performance&nbsp;problem&nbsp;with&nbsp;System.Data&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;think&nbsp;i've&nbsp;catched&nbsp;a&nbsp;huge&nbsp;perf.&nbsp;problem&nbsp;with&nbsp;System.Data&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;A&nbsp;HREF=&quot;https://bugzilla.novell.com/show_bug.cgi?id=357947&quot;&gt;https://bugzilla.novell.com/show_bug.cgi?id=357947&lt;/A&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
_________________________________________________&lt;BR&gt;<br>
&lt;BR&gt;<br>
Ce&nbsp;message&nbsp;et&nbsp;les&nbsp;eventuels&nbsp;documents&nbsp;joints&nbsp;peuvent&nbsp;contenir&nbsp;des&nbsp;informations&nbsp;confidentielles.&lt;BR&gt;<br>
Au&nbsp;cas&nbsp;ou&nbsp;il&nbsp;ne&nbsp;vous&nbsp;serait&nbsp;pas&nbsp;destine,&nbsp;nous&nbsp;vous&nbsp;remercions&nbsp;de&nbsp;bien&nbsp;vouloir&nbsp;le&nbsp;supprimer&nbsp;et&nbsp;en&nbsp;aviser&nbsp;immediatement&nbsp;l'expediteur.&nbsp;Toute&nbsp;utilisation&nbsp;de&nbsp;ce&nbsp;message&nbsp;non&nbsp;conforme&nbsp;a&nbsp;sa&nbsp;destination,&nbsp;toute&nbsp;diffusion&nbsp;ou&nbsp;publication,&nbsp;totale&nbsp;ou&nbsp;partielle&nbsp;et&nbsp;quel&nbsp;qu'en&nbsp;soit&nbsp;le&nbsp;moyen&nbsp;est&nbsp;formellement&nbsp;interdite.&lt;BR&gt;<br>
Les&nbsp;communications&nbsp;sur&nbsp;internet&nbsp;n'etant&nbsp;pas&nbsp;securisees,&nbsp;l'integrite&nbsp;de&nbsp;ce&nbsp;message&nbsp;n'est&nbsp;pas&nbsp;assuree&nbsp;et&nbsp;la&nbsp;societe&nbsp;emettrice&nbsp;ne&nbsp;peut&nbsp;etre&nbsp;tenue&nbsp;pour&nbsp;responsable&nbsp;de&nbsp;son&nbsp;contenu.&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>
<br>

</tt>
