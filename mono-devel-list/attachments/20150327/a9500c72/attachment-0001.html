<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;26,&nbsp;2015&nbsp;at&nbsp;9:41&nbsp;PM,&nbsp;Edward&nbsp;Ned&nbsp;Harvey&nbsp;(mono)&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:edward.harvey.mono@clevertrove.com&quot;&nbsp;target=&quot;_blank&quot;&gt;edward.harvey.mono@clevertrove.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&gt;&nbsp;From:&nbsp;&lt;a&nbsp;href=&quot;mailto:mono-devel-list-bounces@lists.ximian.com&quot;&gt;mono-devel-list-bounces@lists.ximian.com&lt;/a&gt;&nbsp;[mailto:&lt;a&nbsp;href=&quot;mailto:mono-devel-list-&quot;&gt;mono-devel-list-&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:bounces@lists.ximian.com&quot;&gt;bounces@lists.ximian.com&lt;/a&gt;]&nbsp;On&nbsp;Behalf&nbsp;Of&nbsp;Gelin&nbsp;Yan&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; A&nbsp;few&nbsp;years&nbsp;ago,&nbsp;I&nbsp;tried&nbsp;to&nbsp;port&nbsp;one&nbsp;of&nbsp;our&nbsp;server&nbsp;from&nbsp;.net&nbsp;to&nbsp;mono.&nbsp;At&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;time.&nbsp;Mono&nbsp;2.8&nbsp;was&nbsp;just&nbsp;out.&nbsp;My&nbsp;server&nbsp;use&nbsp;socket&nbsp;(tcp&nbsp;almost)&nbsp;&amp;&nbsp;thread&lt;br&gt;<br>
&gt;&nbsp;pools&nbsp;heavily.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;You&#39;re&nbsp;making&nbsp;a&nbsp;blanket&nbsp;statement,&nbsp;&quot;ready.&quot; &nbsp; My&nbsp;blanket&nbsp;response&nbsp;is: &nbsp;Yes. &nbsp;Mono&nbsp;is&nbsp;ready.*&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;Going&nbsp;into&nbsp;a&nbsp;little&nbsp;more&nbsp;detail,&nbsp;no&nbsp;matter&nbsp;what,&nbsp;you&nbsp;must&nbsp;acknowledge&nbsp;that&nbsp;there&nbsp;are&nbsp;major&nbsp;architectural&nbsp;differences&nbsp;between&nbsp;Windows,&nbsp;BSD,&nbsp;Linux,&nbsp;etc. &nbsp;Mono&nbsp;and&nbsp;.Net&nbsp;are&nbsp;enormous,&nbsp;and&nbsp;there&nbsp;*are*&nbsp;differences,&nbsp;and&nbsp;there&nbsp;always&nbsp;will&nbsp;be. &nbsp;So&nbsp;you&nbsp;can&nbsp;never&nbsp;say&nbsp;&quot;It&#39;s&nbsp;ready&quot;&nbsp;meaning&nbsp;100%&nbsp;compatible&nbsp;and&nbsp;bug-free. &nbsp;(Guess&nbsp;what,&nbsp;in&nbsp;my&nbsp;experience,&nbsp;I&#39;ve&nbsp;found&nbsp;about&nbsp;equal&nbsp;numbers&nbsp;of&nbsp;MS&nbsp;bugs&nbsp;and&nbsp;Mono&nbsp;bugs.) &nbsp;What&nbsp;you&nbsp;can&nbsp;do&nbsp;instead,&nbsp;is&nbsp;to&nbsp;develop&nbsp;and&nbsp;test&nbsp;on&nbsp;multiple&nbsp;platforms,&nbsp;and&nbsp;anyplace&nbsp;where&nbsp;something&nbsp;is&nbsp;different,&nbsp;solve&nbsp;the&nbsp;problem.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;personally&nbsp;develop&nbsp;a&nbsp;commercial&nbsp;product,&nbsp;that&nbsp;has&nbsp;windows/mac/linux&nbsp;client&nbsp;and&nbsp;server&nbsp;components,&nbsp;doing&nbsp;a&nbsp;lot&nbsp;of&nbsp;SSL&nbsp;communications&nbsp;over&nbsp;unreliable&nbsp;network&nbsp;connections. &nbsp;We&nbsp;develop&nbsp;code&nbsp;on&nbsp;.Net,&nbsp;test&nbsp;on&nbsp;mono,&nbsp;and&nbsp;for&nbsp;the&nbsp;non-GUI&nbsp;server&nbsp;backend&nbsp;stuff,&nbsp;around&nbsp;99%&nbsp;of&nbsp;the&nbsp;code&nbsp;simply&nbsp;works&nbsp;without&nbsp;any&nbsp;modifications. &nbsp;We&nbsp;run&nbsp;into&nbsp;occasional&nbsp;snags,&nbsp;like,&nbsp;managing&nbsp;the&nbsp;SSL&nbsp;certs&nbsp;differently&nbsp;on&nbsp;each&nbsp;platform,&nbsp;and&nbsp;privilege&nbsp;escalation&nbsp;to&nbsp;bind&nbsp;port&nbsp;443,&nbsp;and&nbsp;stuff&nbsp;like&nbsp;that,&nbsp;which&nbsp;are&nbsp;intrinsically&nbsp;different&nbsp;on&nbsp;different&nbsp;platforms. &nbsp;FileSystemWatcher&nbsp;works&nbsp;perfectly&nbsp;on&nbsp;windows&nbsp;&amp;&nbsp;linux,&nbsp;but&nbsp;the&nbsp;BSD&nbsp;implementation&nbsp;of&nbsp;kevent/kqueue&nbsp;is&nbsp;fundamentally&nbsp;flawed&nbsp;and&nbsp;will&nbsp;never&nbsp;work,&nbsp;so&nbsp;FSWatcher&nbsp;simply&nbsp;doesn&#39;t&nbsp;work&nbsp;(reliably)&nbsp;on&nbsp;macs. &nbsp;We&nbsp;had&nbsp;to&nbsp;get&nbsp;Xam.Mac&nbsp;and&nbsp;use&nbsp;FSEvents. &nbsp;Also,&nbsp;mutexes&nbsp;and&nbsp;inter-process&nbsp;signalling,&nbsp;and&nbsp;file&nbsp;locking&nbsp;-&nbsp;we&#39;ve&nbsp;had&nbsp;to&nbsp;do&nbsp;work&nbsp;in&nbsp;order&nbsp;to&nbsp;support&nbsp;multi-platforms,&nbsp;due&nbsp;to&nbsp;fundamental&nbsp;differences&nbsp;in&nbsp;the&nbsp;different&nbsp;platforms. &nbsp;It&#39;s&nbsp;impossible&nbsp;for&nbsp;mono&nbsp;(or&nbsp;anything&nbsp;not&nbsp;running&nbsp;on&nbsp;windows)&nbsp;to&nbsp;implement&nbsp;file&nbsp;locking&nbsp;as&nbsp;designed&nbsp;in&nbsp;the&nbsp;MS&nbsp;API. &nbsp;Differences&nbsp;of&nbsp;filesystem&nbsp;charset,&nbsp;path&nbsp;separator&nbsp;character,&nbsp;etc. &nbsp;Dramatic&nbsp;difference&nbsp;in&nbsp;RSA&nbsp;key&nbsp;generation,&nbsp;and&nbsp;absent&nbsp;support&nbsp;for&nbsp;EC&nbsp;keys... &nbsp;To&nbsp;name&nbsp;a&nbsp;few&nbsp;of&nbsp;the&nbsp;areas&nbsp;that&nbsp;are&nbsp;different&nbsp;between&nbsp;.Net&nbsp;and&nbsp;mono.&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;might&nbsp;be&nbsp;like&nbsp;I&nbsp;was&nbsp;originally&nbsp;-&nbsp;assuming&nbsp;.Net&nbsp;was&nbsp;better&nbsp;-&nbsp;but&nbsp;I&nbsp;have&nbsp;found&nbsp;in&nbsp;many&nbsp;regards,&nbsp;neither&nbsp;.Net&nbsp;nor&nbsp;Mono&nbsp;is&nbsp;better. &nbsp;They&nbsp;each&nbsp;are&nbsp;better&nbsp;in&nbsp;specific&nbsp;ways,&nbsp;and&nbsp;the&nbsp;number&nbsp;and&nbsp;severity&nbsp;of&nbsp;differences&nbsp;doesn&#39;t&nbsp;add&nbsp;up&nbsp;to&nbsp;a&nbsp;clear&nbsp;&quot;one&nbsp;is&nbsp;better.&quot; &nbsp;For&nbsp;example,&nbsp;I&nbsp;found&nbsp;that&nbsp;.Net&#39;s&nbsp;implementation&nbsp;of&nbsp;RSA&nbsp;key&nbsp;generation&nbsp;greatly&nbsp;outperforms&nbsp;mono&#39;s&nbsp;implementation,&nbsp;but&nbsp;mono&nbsp;does&nbsp;a&nbsp;lazy&nbsp;key&nbsp;generation&nbsp;which&nbsp;means&nbsp;99%&nbsp;of&nbsp;the&nbsp;time&nbsp;you&nbsp;can&nbsp;completely&nbsp;skip&nbsp;key&nbsp;generation&nbsp;(depending&nbsp;on&nbsp;your&nbsp;usage&nbsp;model). &nbsp;And&nbsp;there&#39;s&nbsp;a&nbsp;huge&nbsp;list&nbsp;like&nbsp;that. &nbsp;Dramatic&nbsp;performance&nbsp;differences&nbsp;in&nbsp;SHA&nbsp;and&nbsp;stuff.&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;make&nbsp;heavy&nbsp;use&nbsp;of&nbsp;tcp&nbsp;sockets&nbsp;and&nbsp;threadpool,&nbsp;as&nbsp;well&nbsp;as&nbsp;manually&nbsp;managed&nbsp;threads. &nbsp;Threadpool: &nbsp;No&nbsp;issues&nbsp;whatsoever. &nbsp;Tcp: &nbsp;the&nbsp;timeout&nbsp;setting&nbsp;doesn&#39;t&nbsp;work&nbsp;unless&nbsp;you&nbsp;set&nbsp;it&nbsp;at&nbsp;the&nbsp;right&nbsp;time&nbsp;...&nbsp;I&nbsp;forget&nbsp;...&nbsp;after&nbsp;the&nbsp;connection&nbsp;is&nbsp;established? &nbsp;I&nbsp;forget,&nbsp;but&nbsp;I&nbsp;could&nbsp;look&nbsp;it&nbsp;up. &nbsp;We&nbsp;decided&nbsp;to&nbsp;manually&nbsp;manage&nbsp;the&nbsp;tcp&nbsp;timeouts. &nbsp;(Not&nbsp;difficult;&nbsp;every&nbsp;time&nbsp;we&nbsp;create&nbsp;a&nbsp;TcpClient,&nbsp;create&nbsp;a&nbsp;timer,&nbsp;and&nbsp;when&nbsp;we&nbsp;receive&nbsp;bytes,&nbsp;consider&nbsp;resetting&nbsp;the&nbsp;timer). &nbsp;Whatever&nbsp;you&nbsp;do,&nbsp;frigging&nbsp;*don&#39;t*&nbsp;call&nbsp;Dispose&nbsp;on&nbsp;a&nbsp;SslStream. &nbsp;On&nbsp;heavily&nbsp;used&nbsp;linux&nbsp;servers,&nbsp;we&nbsp;had&nbsp;to&nbsp;increase&nbsp;the&nbsp;number&nbsp;of&nbsp;tcp&nbsp;sockets&nbsp;in&nbsp;kernel&nbsp;-&nbsp;I&nbsp;could&nbsp;look&nbsp;up&nbsp;details&nbsp;if&nbsp;needed&nbsp;-&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;I&nbsp;would&nbsp;say&nbsp;ultimately,&nbsp;Tcp: &nbsp;Barely&nbsp;any&nbsp;issues,&nbsp;which&nbsp;were&nbsp;easily&nbsp;managed. &nbsp;Unfortunately,&nbsp;SslStream&nbsp;was&nbsp;(and&nbsp;still&nbsp;is)&nbsp;not&nbsp;easily&nbsp;managed,&nbsp;if&nbsp;you&nbsp;happen&nbsp;to&nbsp;want&nbsp;a&nbsp;mono&nbsp;SslStream&nbsp;server. &nbsp;But&nbsp;you&nbsp;didn&#39;t&nbsp;say&nbsp;SSL;&nbsp;you&nbsp;said&nbsp;TCP&nbsp;sockets. &nbsp;;-)&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hi&nbsp;Edward&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Thanks&nbsp;for&nbsp;sharing&nbsp;your&nbsp;experience.&nbsp;I&nbsp;am&nbsp;not&nbsp;saying&nbsp;.net&nbsp;is&nbsp;better.&nbsp;It&nbsp;can&#39;t&nbsp;be&nbsp;due&nbsp;to&nbsp;.net&nbsp;and&nbsp;mono&nbsp;are&nbsp;different&nbsp;things.&nbsp;A&nbsp;possible&nbsp;reason&nbsp;that&nbsp;people&nbsp;comparing&nbsp;these&nbsp;two&nbsp;frameworks&nbsp;is&nbsp;.net&nbsp;was&nbsp;there&nbsp;first.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; About&nbsp;bugs&nbsp;related&nbsp;to&nbsp;tcp&amp;socket,&nbsp;I&nbsp;remembered&nbsp;there&nbsp;were&nbsp;two&nbsp;types&nbsp;of&nbsp;async&nbsp;styles: &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&nbsp;use&nbsp;IAsyncResult &lt;/div&gt;&lt;div&gt;&amp;&lt;/div&gt;&lt;div&gt;2. &nbsp;SocketAsyncEventArgs&nbsp;(MS&nbsp;favors&nbsp;this&nbsp;style&nbsp;&amp;&nbsp;claims&nbsp;it&nbsp;outperforms&nbsp;the&nbsp;first&nbsp;one).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Unfortunately,&nbsp;at&nbsp;the&nbsp;time,&nbsp;mono&nbsp;crashed&nbsp;each&nbsp;time&nbsp;after&nbsp;a&nbsp;few&nbsp;seconds&nbsp;of&nbsp;pressing&nbsp;tests.&nbsp;(IAsyncResult&nbsp;was&nbsp;slightly&nbsp;better, &lt;/div&gt;&lt;div&gt;it&nbsp;lasted&nbsp;a&nbsp;bit&nbsp;longer).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; I&nbsp;had&nbsp;no&nbsp;idea&nbsp;what&nbsp;happened&nbsp;and&nbsp;I&nbsp;ever&nbsp;posted&nbsp;a&nbsp;mail&nbsp;in&nbsp;the&nbsp;mail&nbsp;list,&nbsp;sure&nbsp;without&nbsp;any&nbsp;response.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; I&nbsp;guessed&nbsp;mono&nbsp;users&nbsp;might&nbsp;be&nbsp;more&nbsp;interested&nbsp;in&nbsp;use&nbsp;it&nbsp;for&nbsp;other&nbsp;purposes&nbsp;instead&nbsp;of&nbsp;backend.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Another&nbsp;problem&nbsp;is&nbsp;related&nbsp;to&nbsp;the&nbsp;gc.&nbsp;I&nbsp;have&nbsp;some&nbsp;codes&nbsp;crashed&nbsp;on&nbsp;mono&nbsp;due&nbsp;to&nbsp;OOM&nbsp;and&nbsp;I&nbsp;found&nbsp;out&nbsp;mono&nbsp;couldn&#39;t&nbsp;handle &lt;/div&gt;&lt;div&gt;that&nbsp;until&nbsp;I&nbsp;call&nbsp;System.GC.Collect()&nbsp;manually.&nbsp;The&nbsp;same,&nbsp;sgen&nbsp;was&nbsp;just&nbsp;out&nbsp;and&nbsp;failed&nbsp;on&nbsp;the&nbsp;tests.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; Due&nbsp;to&nbsp;I&nbsp;haven&#39;t&nbsp;seen&nbsp;any&nbsp;problem&nbsp;on&nbsp;.Net&nbsp;(It&nbsp;doesn&#39;t&nbsp;mean&nbsp;.net&nbsp;is&nbsp;bug&nbsp;free),&nbsp;so&nbsp;I&nbsp;considered&nbsp;mono&nbsp;runtime&nbsp;was&nbsp;not&nbsp;that&nbsp;stable&nbsp;for&nbsp;a&nbsp;heavy&nbsp;load&nbsp;environment.&nbsp;That&#39;s&nbsp;why&nbsp;I&nbsp;finally&nbsp;decided&nbsp;not&nbsp;to&nbsp;use&nbsp;it&nbsp;in&nbsp;production.&nbsp;I&nbsp;still&nbsp;keep&nbsp;an&nbsp;eye&nbsp;on&nbsp;mono&nbsp;due&nbsp;to&nbsp;I&nbsp;like&nbsp;C#&nbsp;and&nbsp;Linux&nbsp;too.&nbsp;I&nbsp;don&#39;t&nbsp;use&nbsp;BSD&nbsp;Like&nbsp;system,&nbsp;so&nbsp;thank&nbsp;for&nbsp;sharing&nbsp;about&nbsp;how&nbsp;mono&nbsp;works&nbsp;and&nbsp;what&#39;s&nbsp;problem&nbsp;on&nbsp;BSD&nbsp;Like&nbsp;OS.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; By&nbsp;the&nbsp;way,&nbsp;Do&nbsp;you&nbsp;have&nbsp;any&nbsp;info&nbsp;about&nbsp;tuning&nbsp;GC&nbsp;on&nbsp;mono? &nbsp;When&nbsp;I&nbsp;searched&nbsp;&quot;mono,&nbsp;gc&nbsp;tuning&quot;&nbsp;on&nbsp;google,&nbsp; only&nbsp;a&nbsp;few&nbsp;results&nbsp;came&nbsp;out&nbsp;and&nbsp;a&nbsp;little&nbsp;bit&nbsp;outdated.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;gelin&nbsp;yan&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;  &lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
