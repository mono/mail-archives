<tt>
&lt;html&gt;&lt;head&gt;&lt;style&nbsp;type=&quot;text/css&quot;&gt;&lt;!--&nbsp;DIV&nbsp;{margin:0px;}&nbsp;--&gt;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;font-family:times&nbsp;new&nbsp;roman,new&nbsp;york,times,serif;font-size:12pt&quot;&gt;&lt;div&gt;Yea&nbsp;I&nbsp;just&nbsp;used&nbsp;pseudo&nbsp;code.&nbsp;The&nbsp;problem&nbsp;is&nbsp;that&nbsp;mono&nbsp;c#&nbsp;does&nbsp;not&nbsp;support&nbsp;PF_PACKET&nbsp;so&nbsp;the&nbsp;only&nbsp;way&nbsp;around&nbsp;it&lt;br&gt;is&nbsp;to&nbsp;pretty&nbsp;much&nbsp;implement&nbsp;it&nbsp;from&nbsp;scratch&nbsp;using&nbsp;marshaling&nbsp;and&nbsp;unamanged&nbsp;code&nbsp;imports.&nbsp;I'm&nbsp;half&nbsp;way&nbsp;there&nbsp;my&nbsp;code&nbsp;looks&lt;br&gt;something&nbsp;like&nbsp;that&nbsp;for&nbsp;now:&lt;br&gt;[DllImport(&quot;libc.so.6&quot;)]&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;public&nbsp;static&nbsp;extern&nbsp;int&nbsp;socket(int&nbsp;domain,&nbsp;int&nbsp;type,&nbsp;int&nbsp;protocol);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[DllImport(&quot;libc.so.6&quot;)]&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;public&nbsp;static&nbsp;extern&nbsp;int&nbsp;send(int&nbsp;s,&nbsp;[MarshalAs(UnmanagedType.LPArray)]&nbsp;byte[]&nbsp;buf,&nbsp;int&nbsp;len,&nbsp;int&nbsp;flags);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[DllImport(&quot;libc.so.6&quot;)]&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;public&nbsp;static&nbsp;extern&nbsp;int&nbsp;recv(int&nbsp;s,&nbsp;[MarshalAs(UnmanagedType.LPArray)]&nbsp;byte[]&nbsp;buf,&nbsp;int&nbsp;len,&nbsp;int&nbsp;flags);&lt;br&gt;&lt;br&gt;This&nbsp;allows&nbsp;me&nbsp;to&nbsp;create&nbsp;the&nbsp;socket&nbsp;and&nbsp;send/recv&nbsp;data.&nbsp;Still<br>
&nbsp;need&nbsp;to&nbsp;implement&nbsp;bind.&nbsp;&lt;br&gt;I&nbsp;wish&nbsp;there&nbsp;was&nbsp;a&nbsp;way&nbsp;to&nbsp;link&nbsp;that&nbsp;fd&nbsp;returned&nbsp;by&nbsp;socket&nbsp;to&nbsp;the&nbsp;native&nbsp;c#&nbsp;socket&nbsp;class&nbsp;but&nbsp;up&nbsp;to&nbsp;my&nbsp;knowledge&nbsp;there&nbsp;isn't.&lt;br&gt;&lt;br&gt;-Alex&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,new&nbsp;york,times,serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;arial,helvetica,sans-serif;&nbsp;font-size:&nbsp;13px;&quot;&gt;&lt;font&nbsp;face=&quot;Tahoma&quot;&nbsp;size=&quot;2&quot;&gt;&lt;hr&nbsp;size=&quot;1&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;From:&lt;/span&gt;&lt;/b&gt;&nbsp;Gonzalo&nbsp;Paniagua&nbsp;Javier&nbsp;&amp;lt;gonzalo.mono@gmail.com&amp;gt;&lt;br&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;To:&lt;/span&gt;&lt;/b&gt;&nbsp;Alex&nbsp;&amp;lt;rdynm@yahoo.com&amp;gt;&lt;br&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Cc:&lt;/span&gt;&lt;/b&gt;&nbsp;mono-devel-list@lists.ximian.com&lt;br&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Sent:&lt;/span&gt;&lt;/b&gt;&nbsp;Saturday,&nbsp;December&nbsp;13,&nbsp;2008&nbsp;10:38:37&nbsp;PM&lt;br&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Subject:&lt;/span&gt;&lt;/b&gt;&nbsp;Re:&nbsp;[Mono-dev]&nbsp;Mono&nbsp;C#&nbsp;+&nbsp;IOCTL&lt;br&gt;&lt;/font&gt;&lt;br&gt;<br>
On&nbsp;Thu,&nbsp;2008-12-11&nbsp;at&nbsp;19:26&nbsp;-0800,&nbsp;Alex&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;Just&nbsp;tried&nbsp;it&nbsp;out,&nbsp;it&nbsp;produced&nbsp;an&nbsp;exception.&lt;br&gt;&amp;gt;&nbsp;&lt;br&gt;&amp;gt;&nbsp;Unhandled&nbsp;Exception:&nbsp;System.Net.Sockets.SocketException:&nbsp;Bad&nbsp;address&lt;br&gt;&amp;gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&nbsp;&lt;br&gt;&amp;gt;&amp;nbsp;&nbsp;Socket&nbsp;s&nbsp;=&nbsp;new&nbsp;Socket(AddressFamily.InterNetwork,&nbsp;SocketType.Raw,&lt;br&gt;&amp;gt;&nbsp;ProtocolType.Ggp);&lt;br&gt;&amp;gt;&amp;nbsp;&nbsp;s.IOControl(0x8933,&nbsp;null,&nbsp;null);&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;not&nbsp;the&nbsp;way&nbsp;to&nbsp;use&nbsp;ioctl&nbsp;in&nbsp;C.&nbsp;You&nbsp;need&nbsp;additional&nbsp;parameters.&lt;br&gt;See&nbsp;netdevice(7).&lt;br&gt;&lt;br&gt;-Gonzalo&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;&lt;/html&gt;
</tt>
