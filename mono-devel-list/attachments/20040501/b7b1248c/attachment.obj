Index: locales.c
===================================================================
RCS file: /mono/mono/mono/metadata/locales.c,v
retrieving revision 1.19
diff -u -r1.19 locales.c
--- locales.c	29 Apr 2004 17:27:25 -0000	1.19
+++ locales.c	1 May 2004 22:16:42 -0000
@@ -1466,10 +1466,7 @@
 	if(U_SUCCESS (ec)) {
 		ret=mono_string_from_utf16 ((gunichar2 *)udest);
 	} else {
-		g_message (G_GNUC_PRETTY_FUNCTION ": u_strToLower error: %s",
-			   u_errorName (ec));
-		/* return something */
-		ret=this;
+		ret=string_invariant_tolower (this);
 	}
 	
 	g_free (icu_loc);
@@ -1528,10 +1525,7 @@
 	if(U_SUCCESS (ec)) {
 		ret=mono_string_from_utf16 ((gunichar2 *)udest);
 	} else {
-		g_message (G_GNUC_PRETTY_FUNCTION ": u_strToUpper error: %s",
-			   u_errorName (ec));
-		/* return something */
-		ret=this;
+		ret=string_invariant_toupper(this);
 	}
 	
 	g_free (icu_loc);
Index: socket-io.c
===================================================================
RCS file: /mono/mono/mono/metadata/socket-io.c,v
retrieving revision 1.54
diff -u -r1.54 socket-io.c
--- socket-io.c	28 Apr 2004 14:39:15 -0000	1.54
+++ socket-io.c	1 May 2004 22:16:43 -0000
@@ -2068,7 +2068,7 @@
 
 		mono_array_set(*h_addr_list, MonoString *, i, addr_string);
 
-		if(!i) {
+		if(!i && ai->ai_canonname != NULL) {
 			*h_name=mono_string_new(domain, ai->ai_canonname);
 		}
 
