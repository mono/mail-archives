<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;&lt;div&gt;On&nbsp;May&nbsp;7,&nbsp;2008,&nbsp;at&nbsp;10:50&nbsp;PM,&nbsp;Rodrigo&nbsp;Kumpera&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hi&nbsp;Luis,&lt;br&gt;&lt;br&gt;To&nbsp;have&nbsp;your&nbsp;patch&nbsp;integrated,&nbsp;some&nbsp;changes&nbsp;are&nbsp;needed.&nbsp;First,&nbsp;we&nbsp;want&nbsp;to&nbsp;default&nbsp;to&nbsp;32bits&nbsp;sized&nbsp;arrays&nbsp;on&nbsp;64bits&nbsp;machines,&nbsp;so&nbsp;your&nbsp;changes&nbsp;must&nbsp;be&nbsp;conditionally&nbsp;compiled.&nbsp;To&nbsp;help&nbsp;with&nbsp;that&nbsp;some&nbsp;changed&nbsp;to&nbsp;your&nbsp;patch&nbsp;are&nbsp;due.&nbsp;Next&nbsp;are&nbsp;some&nbsp;comments&nbsp;about&nbsp;it:&lt;br&gt;...&lt;br&gt;&amp;nbsp;/*&nbsp;helper&nbsp;macros&nbsp;to&nbsp;check&nbsp;for&nbsp;overflow&nbsp;when&nbsp;calculating&nbsp;the&nbsp;size&nbsp;of&nbsp;arrays&nbsp;*/&lt;br&gt;&nbsp;-#define&nbsp;MYGUINT32_MAX&nbsp;4294967295U&lt;br&gt;+#if&nbsp;(GLIB_SIZEOF_SIZE_T&nbsp;&amp;lt;&nbsp;4&nbsp;)&lt;br&gt;+#define&nbsp;MYGUINT32_MAX&nbsp;0xFFFFFFFFUL&lt;br&gt;+#define&nbsp;MYGUINT_MAX&nbsp;MYGUINT32_MAX&lt;br&gt;&lt;br&gt;This&nbsp;#if&nbsp;seens&nbsp;bogus,&nbsp;don't&nbsp;you&nbsp;mean&nbsp;&quot;if&nbsp;((GLIB_SIZEOF_SIZE_T&nbsp;==&nbsp;4&nbsp;)&quot;&nbsp;as&nbsp;mono&nbsp;never&nbsp;supported&nbsp;16bits&nbsp;machines.&lt;br&gt;&nbsp;The&nbsp;macros&nbsp;can&nbsp;be&nbsp;unified&nbsp;by&nbsp;using&nbsp;MYGUINT_MAX&nbsp;and&nbsp;the&nbsp;'array_size_t'&nbsp;type&nbsp;I&nbsp;talked&nbsp;before.&nbsp;The&nbsp;definition&nbsp;of&nbsp;MYGUINT_MAX&lt;br&gt;should&nbsp;be&nbsp;put&nbsp;together&nbsp;in&nbsp;the&nbsp;same&nbsp;place&nbsp;we&nbsp;define&nbsp;&nbsp;'array_size_t'.&nbsp;And&nbsp;we&nbsp;could&nbsp;go&nbsp;with&nbsp;a&nbsp;meaningful&nbsp;name,&nbsp;don't&nbsp;you&nbsp;think?&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;whole&nbsp;MYGUINT32&nbsp;thing&nbsp;was&nbsp;there&nbsp;before&nbsp;made&nbsp;my&nbsp;changes&nbsp;and&nbsp;appears&nbsp;in&nbsp;other&nbsp;places&nbsp;in&amp;nbsp;interpreter/interp.c&nbsp;as&nbsp;well.&lt;/div&gt;&lt;div&gt;I&nbsp;don't&nbsp;understand&nbsp;why&nbsp;the&nbsp;GLIB&nbsp;define&nbsp;of&amp;nbsp;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-family:&nbsp;'Lucida&nbsp;Grande';&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&nbsp;&quot;&gt;G_MAXUINT32&nbsp;was&nbsp;not&nbsp;used&nbsp;instead&nbsp;these&nbsp;private&nbsp;definitions.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;I&nbsp;get&nbsp;nervous&nbsp;when&nbsp;I&nbsp;see&nbsp;magic&nbsp;constants,&nbsp;either&nbsp;in&nbsp;hexadecimal&nbsp;or&nbsp;decimal.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;I&nbsp;would&nbsp;rather&nbsp;see&nbsp;a&nbsp;definition&nbsp;of&nbsp;MONO_ARRAY_MAX_INDEX&nbsp;set&nbsp;to&nbsp;either&nbsp;G_MAXINT32&nbsp;or&nbsp;G_MAXINT64&nbsp;and&nbsp;a&nbsp;definition&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;of&nbsp;MONO_ARRAY_MAX_SIZE&nbsp;set&nbsp;to&nbsp;either&nbsp;G_MAXUNIT32&nbsp;or&nbsp;G_MAXUNIT64,&nbsp;in&nbsp;object.h&nbsp;.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;Then&nbsp;this&nbsp;code&nbsp;could&nbsp;lose&nbsp;the&nbsp;#if&nbsp;here&nbsp;and&nbsp;the&nbsp;magic&nbsp;numbers&nbsp;would&nbsp;be&nbsp;kept&nbsp;in&nbsp;one&nbsp;place.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;/Ortiz/Luis&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Lucida&nbsp;Grande'&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-size:&nbsp;11px;&nbsp;white-space:&nbsp;pre;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
