<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;I&nbsp;am&nbsp;running&nbsp;a&nbsp;program&nbsp;that&nbsp;does&nbsp;millions&nbsp;of&nbsp;transactions&nbsp;on&nbsp;FIFO&nbsp;queues,&nbsp;etc.&nbsp;&nbsp;&nbsp;Running&nbsp;on&nbsp;my&nbsp;OSX&nbsp;box&nbsp;(which&nbsp;is&nbsp;on&nbsp;a&nbsp;dual&nbsp;CPU&nbsp;/&nbsp;8&nbsp;core&nbsp;Xeon&nbsp;E5520)&nbsp;and&nbsp;on&nbsp;a&nbsp;linux&nbsp;box&nbsp;which&nbsp;is&nbsp;a&nbsp;core&nbsp;I7-950,&nbsp;I&nbsp;found&nbsp;a&nbsp;significant&nbsp;performance&nbsp;difference&nbsp;which&nbsp;is&nbsp;difficult&nbsp;to&nbsp;explain.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;a&nbsp;single&nbsp;threaded&nbsp;run,&nbsp;the&nbsp;OSX&nbsp;based&nbsp;E5520&nbsp;took&nbsp;21&nbsp;seconds&nbsp;to&nbsp;process&nbsp;8&nbsp;million&nbsp;&quot;transactions&quot;&nbsp;and&nbsp;the&nbsp;linux&nbsp;box&nbsp;took&nbsp;only&nbsp;8&nbsp;seconds.&nbsp;&nbsp;&nbsp;The&nbsp;i7-950&nbsp;is&nbsp;marginally&nbsp;faster&nbsp;(~10%&nbsp;faster)&nbsp;in&nbsp;typical&nbsp;benchmarks&nbsp;that&nbsp;the&nbsp;E5520.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Both&nbsp;runs&nbsp;were&nbsp;done&nbsp;with&nbsp;-llvm&nbsp;enabled&nbsp;and&nbsp;with&nbsp;the&nbsp;same&nbsp;garbage&nbsp;collector.&nbsp;&nbsp;&nbsp;&nbsp;There&nbsp;are&nbsp;probably&nbsp;16&nbsp;-&nbsp;32&nbsp;million&nbsp;small&nbsp;objects&nbsp;created&nbsp;during&nbsp;the&nbsp;course&nbsp;of&nbsp;this&nbsp;evaluation,&nbsp;but&nbsp;generally&nbsp;with&nbsp;good&nbsp;locality,&nbsp;so&nbsp;should&nbsp;be&nbsp;easy&nbsp;to&nbsp;GC.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;&lt;b&gt;OSX-based&nbsp;mono&nbsp;performance&nbsp;for&nbsp;this&nbsp;app&nbsp;is&nbsp;3x&nbsp;slower&lt;/b&gt;&nbsp;than&nbsp;the&nbsp;linux&nbsp;performance&nbsp;(whereas&nbsp;for&nbsp;typical&nbsp;programs,&nbsp;say&nbsp;in&nbsp;C,&nbsp;the&nbsp;difference&nbsp;would&nbsp;be&nbsp;about&nbsp;10%).&nbsp;&nbsp;&nbsp;Both&nbsp;the&nbsp;linux&nbsp;and&nbsp;OSX&nbsp;boxes&nbsp;have&nbsp;significant&nbsp;memory&nbsp;(in&nbsp;fact&nbsp;the&nbsp;OSX&nbsp;box&nbsp;has&nbsp;more&nbsp;memory).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Finally,&nbsp;the&nbsp;OSX&nbsp;version&nbsp;is&nbsp;using&nbsp;2.10.8&nbsp;32bit&nbsp;&nbsp;and&nbsp;the&nbsp;linux&nbsp;version&nbsp;2.10.6&nbsp;64bit.&nbsp;&nbsp;I&nbsp;doubt&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;retrogression&nbsp;in&nbsp;performance&nbsp;between&nbsp;2.10.6.&nbsp;&nbsp;Thinking&nbsp;is&nbsp;more&nbsp;likely&nbsp;to&nbsp;be&nbsp;an&nbsp;implementation&nbsp;difference&nbsp;between&nbsp;OSX&nbsp;and&nbsp;linux?&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;would&nbsp;also&nbsp;think&nbsp;that&nbsp;the&nbsp;32bit&nbsp;vs&nbsp;64bit&nbsp;would&nbsp;not&nbsp;make&nbsp;all&nbsp;that&nbsp;much&nbsp;difference?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;I&nbsp;am&nbsp;wondering&nbsp;whether&nbsp;there&nbsp;are&nbsp;differences&nbsp;in&nbsp;implementation&nbsp;between&nbsp;mono&nbsp;on&nbsp;these&nbsp;platforms&nbsp;that&nbsp;could&nbsp;account&nbsp;for&nbsp;a&nbsp;significant&nbsp;performance&nbsp;difference?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;&lt;div&gt;Jonathan&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
