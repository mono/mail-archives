Index: System.Web.Services.Description/ChangeLog
===================================================================
--- System.Web.Services.Description/ChangeLog	(revision 48026)
+++ System.Web.Services.Description/ChangeLog	(working copy)
@@ -1,3 +1,16 @@
+2005-08-06  Gert Driesen <drieseng@users.sourceforge.net>
+
+	* MimeMultipartRelatedBinding.cs: Change name of XmlElement for Parts
+	to "part" to match MS.NET.
+	* ServiceDescriptionImportWarnings.cs: SchemaLocation and 
+	WsiConformance have been introduced in .NET 2.0.
+	* ServiceDescriptionFormatExtension.cs: Parent is not ignored on
+	.NET 1.1 either.
+	* OperationMessageCollection.cs: Removed override of GetKey to match
+	MS.NET.
+	* DocumentableItem.cs: DocumentationElement is also exposed in
+	.NET 1.1. Fixed attributes on Documentation.
+
 2005-06-14  Lluis Sanchez Gual <lluis@novell.com>
 
 	* SoapProtocolReflector.cs: Set the part name when using bare encoded format.
Index: System.Web.Services.Description/MimeMultipartRelatedBinding.cs
===================================================================
--- System.Web.Services.Description/MimeMultipartRelatedBinding.cs	(revision 48026)
+++ System.Web.Services.Description/MimeMultipartRelatedBinding.cs	(working copy)
@@ -6,28 +6,28 @@
 //
 // Copyright (C) Tim Coleman, 2002
 //
-
-//
-// Permission is hereby granted, free of charge, to any person obtaining
-// a copy of this software and associated documentation files (the
-// "Software"), to deal in the Software without restriction, including
-// without limitation the rights to use, copy, modify, merge, publish,
-// distribute, sublicense, and/or sell copies of the Software, and to
-// permit persons to whom the Software is furnished to do so, subject to
-// the following conditions:
-// 
-// The above copyright notice and this permission notice shall be
-// included in all copies or substantial portions of the Software.
-// 
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
-// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
-// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
-// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
-// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
-// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
-// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-//
 
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+//
+
 using System.Web.Services.Configuration;
 using System.Xml.Serialization;
 
@@ -52,7 +52,7 @@
 
 		#region Properties
 
-		[XmlElement ("parts")]	
+		[XmlElement ("part")]
 		public MimePartCollection Parts {
 			get { return parts; }
 		}
Index: System.Web.Services.Description/ServiceDescriptionImportWarnings.cs
===================================================================
--- System.Web.Services.Description/ServiceDescriptionImportWarnings.cs	(revision 48026)
+++ System.Web.Services.Description/ServiceDescriptionImportWarnings.cs	(working copy)
@@ -6,32 +6,32 @@
 //
 // Copyright (C) Tim Coleman, 2002
 //
-
-//
-// Permission is hereby granted, free of charge, to any person obtaining
-// a copy of this software and associated documentation files (the
-// "Software"), to deal in the Software without restriction, including
-// without limitation the rights to use, copy, modify, merge, publish,
-// distribute, sublicense, and/or sell copies of the Software, and to
-// permit persons to whom the Software is furnished to do so, subject to
-// the following conditions:
-// 
-// The above copyright notice and this permission notice shall be
-// included in all copies or substantial portions of the Software.
-// 
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
-// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
-// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
-// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
-// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
-// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
-// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-//
 
-namespace System.Web.Services.Description 
-{
-#if NET_2_0
-	[Flags]
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+//
+
+namespace System.Web.Services.Description 
+{
+#if NET_2_0
+	[Flags]
 #endif
 	[Serializable]
 	public enum ServiceDescriptionImportWarnings {
@@ -40,9 +40,10 @@
 		OptionalExtensionsIgnored = 0x2,
 		RequiredExtensionsIgnored = 0x4,
 		UnsupportedBindingsIgnored = 0x10,
-		UnsupportedOperationsIgnored = 0x8,
-		[Obsolete] OperationConformanceClaimIgnored = 0x100,
-		SchemaValidation = 0x40,
+		UnsupportedOperationsIgnored = 0x8,
+#if NET_2_0
+		SchemaValidation = 0x40,
 		WsiConformance = 0x80
+#endif
 	}
 }
Index: System.Web.Services.Description/ServiceDescriptionFormatExtension.cs
===================================================================
--- System.Web.Services.Description/ServiceDescriptionFormatExtension.cs	(revision 48026)
+++ System.Web.Services.Description/ServiceDescriptionFormatExtension.cs	(working copy)
@@ -6,28 +6,28 @@
 //
 // Copyright (C) Tim Coleman, 2002
 //
-
-//
-// Permission is hereby granted, free of charge, to any person obtaining
-// a copy of this software and associated documentation files (the
-// "Software"), to deal in the Software without restriction, including
-// without limitation the rights to use, copy, modify, merge, publish,
-// distribute, sublicense, and/or sell copies of the Software, and to
-// permit persons to whom the Software is furnished to do so, subject to
-// the following conditions:
-// 
-// The above copyright notice and this permission notice shall be
-// included in all copies or substantial portions of the Software.
-// 
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
-// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
-// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
-// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
-// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
-// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
-// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-//
 
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+//
+
 using System.ComponentModel;
 using System.Xml.Serialization;
 
@@ -61,9 +61,6 @@
 			set { handled = value; }
 		}
 
-#if !NET_2_0
-		[XmlIgnore]
-#endif
 		public object Parent {
 			get { return parent; }
 		}
Index: System.Web.Services.Description/OperationMessageCollection.cs
===================================================================
--- System.Web.Services.Description/OperationMessageCollection.cs	(revision 48026)
+++ System.Web.Services.Description/OperationMessageCollection.cs	(working copy)
@@ -98,13 +98,6 @@
 
 		#region Methods
 
-		protected override string GetKey (object value) 
-		{
-			if (!(value is OperationMessage))
-				throw new InvalidCastException ();
-			return ((OperationMessage) value).Name;
-		}
-
 		public int Add (OperationMessage operationMessage) 
 		{
 			Insert (Count, operationMessage);
Index: System.Web.Services.Description/DocumentableItem.cs
===================================================================
--- System.Web.Services.Description/DocumentableItem.cs	(revision 48026)
+++ System.Web.Services.Description/DocumentableItem.cs	(working copy)
@@ -6,29 +6,30 @@
 //
 // Copyright (C) Tim Coleman, 2002
 //
-
-//
-// Permission is hereby granted, free of charge, to any person obtaining
-// a copy of this software and associated documentation files (the
-// "Software"), to deal in the Software without restriction, including
-// without limitation the rights to use, copy, modify, merge, publish,
-// distribute, sublicense, and/or sell copies of the Software, and to
-// permit persons to whom the Software is furnished to do so, subject to
-// the following conditions:
-// 
-// The above copyright notice and this permission notice shall be
-// included in all copies or substantial portions of the Software.
-// 
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
-// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
-// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
-// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
-// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
-// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
-// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-//
 
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+//
+
 using System.ComponentModel;
+using System.Runtime.InteropServices;
 using System.Xml.Serialization;
 using System.Xml;
 
@@ -37,11 +38,7 @@
 
 		#region Fields
 
-		string documentation;
-
-#if NET_2_0
 		XmlElement docElement;
-#endif
 
 		#endregion // Fields
 
@@ -49,14 +46,12 @@
 
 		protected DocumentableItem ()
 		{
-			documentation = String.Empty;
 		}
 		
 		#endregion // Constructors
 
 		#region Properties
 
-#if NET_2_0
 		[XmlIgnore]
 		public string Documentation {
 			get { 
@@ -73,27 +68,14 @@
 				}
 			}
 		}
-		
-		[System.Runtime.InteropServices.ComVisible(false)]
+
+		[ComVisible (false)]
 		[XmlAnyElement (Name="documentation", Namespace="http://schemas.xmlsoap.org/wsdl/")]
-		public XmlElement DocumentationElement {
+		public XmlElement DocumentationElement
+		{
 			get { return docElement; }
 			set { docElement = value; }
 		}
-#else
-		[XmlElement ("documentation")]
-		[DefaultValue ("")]
-		public string Documentation {
-			get { return documentation; }
-			set {
-				if (value == null)
-					documentation = String.Empty;
-				else
-					documentation = value;
-			}
-		}
-		
-#endif
 	
 		#endregion // Properties
 	}
Index: System.Web.Services.Protocols/WebClientProtocol.cs
===================================================================
--- System.Web.Services.Protocols/WebClientProtocol.cs	(revision 48026)
+++ System.Web.Services.Protocols/WebClientProtocol.cs	(working copy)
@@ -6,28 +6,28 @@
 //
 // Copyright (C) Tim Coleman, 2002
 //
-
-//
-// Permission is hereby granted, free of charge, to any person obtaining
-// a copy of this software and associated documentation files (the
-// "Software"), to deal in the Software without restriction, including
-// without limitation the rights to use, copy, modify, merge, publish,
-// distribute, sublicense, and/or sell copies of the Software, and to
-// permit persons to whom the Software is furnished to do so, subject to
-// the following conditions:
-// 
-// The above copyright notice and this permission notice shall be
-// included in all copies or substantial portions of the Software.
-// 
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
-// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
-// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
-// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
-// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
-// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
-// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-//
 
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+//
+
 using System.Collections.Specialized;
 using System.ComponentModel;
 using System.Net;
@@ -58,18 +58,18 @@
 		//
 		WebRequest current_request;
 		
-#if !TARGET_JVM
+#if !TARGET_JVM
 		static HybridDictionary cache;
-#else
-		static HybridDictionary cache {
-			get {
-				return (HybridDictionary)AppDomain.CurrentDomain.GetData("WebClientProtocol.cache");
-			}
-			set {
-				AppDomain.CurrentDomain.SetData("WebClientProtocol.cache", value);
-			}
-		}
-#endif
+#else
+		static HybridDictionary cache {
+			get {
+				return (HybridDictionary)AppDomain.CurrentDomain.GetData("WebClientProtocol.cache");
+			}
+			set {
+				AppDomain.CurrentDomain.SetData("WebClientProtocol.cache", value);
+			}
+		}
+#endif
 		#endregion
 
 		#region Constructors
@@ -112,7 +112,7 @@
 			set { preAuthenticate = value; }
 		}
 
-		[DefaultValue ("")]
+		[DefaultValue (null)]
 		[RecommendedAsConfigurable (true)]
 		[WebServicesDescription ("The encoding to use for requests.")]
 		public Encoding RequestEncoding {
Index: System.Web.Services.Protocols/ChangeLog
===================================================================
--- System.Web.Services.Protocols/ChangeLog	(revision 48026)
+++ System.Web.Services.Protocols/ChangeLog	(working copy)
@@ -1,3 +1,10 @@
+2005-08-06 Gert Driesen <drieseng@users.sourceforge.net>
+
+	* WebClientProtocol.cs: DefaultValue should be null for
+        RequestEncoding.
+        * SoapException.cs: Only Serializable on .NET 2.0.
+        * SoapHeaderException.cs: Only Serializable on .NET 2.0.
+
 2005-08-03 Gonzalo Paniagua Javier <gonzalo@ximian.com>
 
 	* SoapDocumentationHandler.cs: workaround for a bug in the HttpRequest
Index: System.Web.Services.Protocols/SoapException.cs
===================================================================
--- System.Web.Services.Protocols/SoapException.cs	(revision 48026)
+++ System.Web.Services.Protocols/SoapException.cs	(working copy)
@@ -7,33 +7,35 @@
 //
 // Copyright (C) Tim Coleman, 2002
 //
-
-//
-// Permission is hereby granted, free of charge, to any person obtaining
-// a copy of this software and associated documentation files (the
-// "Software"), to deal in the Software without restriction, including
-// without limitation the rights to use, copy, modify, merge, publish,
-// distribute, sublicense, and/or sell copies of the Software, and to
-// permit persons to whom the Software is furnished to do so, subject to
-// the following conditions:
-// 
-// The above copyright notice and this permission notice shall be
-// included in all copies or substantial portions of the Software.
-// 
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
-// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
-// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
-// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
-// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
-// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
-// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-//
 
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+//
+
 using System.Xml;
 
 namespace System.Web.Services.Protocols 
 {
+#if NET_2_0
 	[Serializable]
+#endif
 	public class SoapException : SystemException 
 	{
 		#region Fields
Index: System.Web.Services.Protocols/SoapHeaderException.cs
===================================================================
--- System.Web.Services.Protocols/SoapHeaderException.cs	(revision 48026)
+++ System.Web.Services.Protocols/SoapHeaderException.cs	(working copy)
@@ -6,33 +6,35 @@
 //
 // Copyright (C) Tim Coleman, 2002
 //
-
-//
-// Permission is hereby granted, free of charge, to any person obtaining
-// a copy of this software and associated documentation files (the
-// "Software"), to deal in the Software without restriction, including
-// without limitation the rights to use, copy, modify, merge, publish,
-// distribute, sublicense, and/or sell copies of the Software, and to
-// permit persons to whom the Software is furnished to do so, subject to
-// the following conditions:
-// 
-// The above copyright notice and this permission notice shall be
-// included in all copies or substantial portions of the Software.
-// 
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
-// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
-// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
-// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
-// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
-// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
-// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-//
 
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+//
+
 using System.Xml;
 
 namespace System.Web.Services.Protocols 
 {
+#if NET_2_0
 	[Serializable]
+#endif
 	public class SoapHeaderException : SoapException {
 
 		#region Constructors
Index: System.Web.Services.Configuration/ChangeLog
===================================================================
--- System.Web.Services.Configuration/ChangeLog	(revision 48026)
+++ System.Web.Services.Configuration/ChangeLog	(working copy)
@@ -1,3 +1,8 @@
+2005-08-06  Gert Driesen <drieseng@users.sourceforge.net>
+
+	* XmlFormatExtensionPointAttribute.cs: AllowElements is true by
+	default.
+
 2005-06-06  Kornél Pál <kornelpal@hotmail.com>
 
 	* WebServicesConfigurationSectionHandler.cs: Added support for HttpPostLocalhost and HttpSoap12
Index: System.Web.Services.Configuration/XmlFormatExtensionPointAttribute.cs
===================================================================
--- System.Web.Services.Configuration/XmlFormatExtensionPointAttribute.cs	(revision 48026)
+++ System.Web.Services.Configuration/XmlFormatExtensionPointAttribute.cs	(working copy)
@@ -44,7 +44,7 @@
 		public XmlFormatExtensionPointAttribute (string memberName)
 		{
 			this.memberName = memberName;
-			allowElements = false; // FIXME
+			allowElements = true;
 		}
 
 		#endregion // Constructors
Index: System.Web.Services.Discovery/SchemaReference.cs
===================================================================
--- System.Web.Services.Discovery/SchemaReference.cs	(revision 48026)
+++ System.Web.Services.Discovery/SchemaReference.cs	(working copy)
@@ -7,29 +7,29 @@
 //
 // Copyright (C) Dave Bettin, 2002
 //
-
-//
-// Permission is hereby granted, free of charge, to any person obtaining
-// a copy of this software and associated documentation files (the
-// "Software"), to deal in the Software without restriction, including
-// without limitation the rights to use, copy, modify, merge, publish,
-// distribute, sublicense, and/or sell copies of the Software, and to
-// permit persons to whom the Software is furnished to do so, subject to
-// the following conditions:
-// 
-// The above copyright notice and this permission notice shall be
-// included in all copies or substantial portions of the Software.
-// 
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
-// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
-// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
-// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
-// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
-// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
-// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-//
 
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+//
 
+
 using System.ComponentModel;
 using System.IO;
 using System.Xml.Schema;
@@ -83,7 +83,7 @@
 			set { href = value; }
 		}
 		
-		[DefaultValue("")]
+		[DefaultValue(null)]
 		[XmlAttribute("targetNamespace")]
 		public string TargetNamespace {
 			get { return targetNamespace; }
@@ -129,4 +129,4 @@
 
 		#endregion // Methods
 	}
-}
+}
Index: System.Web.Services.Discovery/ChangeLog
===================================================================
--- System.Web.Services.Discovery/ChangeLog	(revision 48026)
+++ System.Web.Services.Discovery/ChangeLog	(working copy)
@@ -1,3 +1,10 @@
+2005-08-06 Gert Driesen <drieseng@users.sourceforge.net>
+
+	* DiscoveryClientProtocol.cs: Added obsolete LoadExternals method to
+	match API of MS.NET 1.1.
+	* SchemaReference.cs: Value of DefaultValue attribute must be null
+	for TargetNamespace to match MS.NET.
+
 2005-08-03 Gonzalo Paniagua Javier <gonzalo@ximian.com>
 
 	* DiscoveryClientProtocol.cs: use Uri so that relative paths are handled
Index: System.Web.Services.Discovery/DiscoveryClientProtocol.cs
===================================================================
--- System.Web.Services.Discovery/DiscoveryClientProtocol.cs	(revision 48026)
+++ System.Web.Services.Discovery/DiscoveryClientProtocol.cs	(working copy)
@@ -7,28 +7,28 @@
 //
 // Copyright (C) Dave Bettin, 2002
 //
-
-//
-// Permission is hereby granted, free of charge, to any person obtaining
-// a copy of this software and associated documentation files (the
-// "Software"), to deal in the Software without restriction, including
-// without limitation the rights to use, copy, modify, merge, publish,
-// distribute, sublicense, and/or sell copies of the Software, and to
-// permit persons to whom the Software is furnished to do so, subject to
-// the following conditions:
-// 
-// The above copyright notice and this permission notice shall be
-// included in all copies or substantial portions of the Software.
-// 
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
-// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
-// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
-// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
-// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
-// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
-// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-//
 
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+//
+
 using System.Collections;
 using System.IO;
 using System.Web.Services.Protocols;
@@ -126,10 +126,10 @@
 						int i = url.LastIndexOf ('/');
 						if (i == -1)
 							throw new InvalidOperationException ("The HTML document does not contain Web service discovery information");
-
-						Uri tmp = new Uri (url);
-						tmp = new Uri (tmp, m.Groups [1].ToString ());
-						url = tmp.ToString ();
+
+						Uri tmp = new Uri (url);
+						tmp = new Uri (tmp, m.Groups [1].ToString ());
+						url = tmp.ToString ();
 					}
 					stream = Download (ref url);
 				}
@@ -225,7 +225,12 @@
 					throw new InvalidOperationException ("Unrecognized file type '" + url + "'. Extension must be one of .wsdl or .xsd");
 			}
 		}
-		
+
+		[Obsolete ("This method will be removed from a future version. The method call is no longer required for resource discovery", false)]
+		public void LoadExternals ()
+		{
+		}
+
 		public DiscoveryClientResultCollection ReadAll (string topLevelFilename)
 		{
 			StreamReader sr = new StreamReader (topLevelFilename);
@@ -367,4 +372,4 @@
 			Exception = origin;
 		}
 	}
-}
+}
