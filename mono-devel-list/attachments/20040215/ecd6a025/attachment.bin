Index: ArrayList.cs
===================================================================
RCS file: /cvs/public/mcs/class/corlib/System.Collections/ArrayList.cs,v
retrieving revision 1.53
diff -u -r1.53 ArrayList.cs
--- ArrayList.cs	27 Dec 2003 00:47:18 -0000	1.53
+++ ArrayList.cs	15 Feb 2004 05:43:08 -0000
@@ -230,7 +230,6 @@
 			private IList m_Adaptee;
 
 			public ArrayListAdapter(IList adaptee)
-				: base(0, true) 
 			{
 				m_Adaptee = adaptee;
 			}
@@ -2492,6 +2491,7 @@
 
 		#region Fields
 
+		static readonly object [] empty_object_array = {};
 		private const int DefaultInitialCapacity = 0x10;
 		
 		/// <summary>
@@ -2519,7 +2519,7 @@
 		/// </summary>
 		public ArrayList()
 		{
-			_items = new object[DefaultInitialCapacity];
+			_items = empty_object_array;
 		}		
 
 		/// <summary>
@@ -2573,25 +2573,9 @@
 			}
 
 			if (initialCapacity == 0) 
-			{
-				initialCapacity = DefaultInitialCapacity;
-			}
-			_items = new object[initialCapacity];
-		}
-
-		/// <summary>
-		/// Used by ArrayListAdapter to allow creation of an ArrayList with no storage buffer.
-		/// </summary>
-		private ArrayList(int initialCapacity, bool forceZeroSize) 
-		{
-			if (forceZeroSize) 
-			{				
-				_items = null;
-			}
-			else 
-			{
-				throw new InvalidOperationException("Use ArrayList(int)");
-			}
+				_items = empty_object_array;
+			else
+				_items = new object [initialCapacity];
 		}
 
 		/// <summary>
@@ -2601,20 +2585,13 @@
 		/// <param name="array"></param>
 		private ArrayList(object[] array, int index, int count) 
 		{
-			_items = new object[count];
-
 			if (count == 0) 
-			{
-				_items = new object[DefaultInitialCapacity];
+				_items = empty_object_array;
+			else {
+				_items = new object [count];
+				Array.Copy (array, index, _items, 0, count);
+				_size = count;
 			}
-			else 
-			{
-				_items = new object[count];
-			}
-
-			Array.Copy(array, index, _items, 0, count);
-
-			_size = count;
 		}
 
 		#endregion
@@ -2681,7 +2658,7 @@
 		{
 			get 
 			{
-				return _items.Length;
+				return _items == empty_object_array ? DefaultInitialCapacity : _items.Length;
 			}
 
 			set 
@@ -2799,7 +2776,7 @@
 					int newLength;
 					object[] newData;
 					
-					newLength = _items.Length << 1;
+					newLength = (_items.Length << 1) + 1;
 
 					while (newLength < _size + count) 
 					{
