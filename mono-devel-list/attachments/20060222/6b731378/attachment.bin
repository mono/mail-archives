Index: serial.c
===================================================================
--- serial.c	(revisi√≥n: 56687)
+++ serial.c	(copia de trabajo)
@@ -121,21 +121,21 @@
 	}
 
 	switch (parity) {
-	case 0: /* Even */
-		newtio.c_iflag &= ~IGNPAR;
-		newtio.c_cflag |= PARENB;
-		break;
-	case 1: /* Mark */
-		/* XXX unhandled */
-		break;
-	case 2: /* None */
+	case 0: /* None */
 		newtio.c_iflag |= IGNPAR;
 		newtio.c_cflag &= ~(PARENB | PARODD);
 		break;
-	case 3: /* Odd */
+	case 1: /* Odd */
 		newtio.c_iflag &= ~IGNPAR;
 		newtio.c_cflag |= PARENB | PARODD;
 		break;
+	case 2: /* Even */
+		newtio.c_iflag &= ~IGNPAR;
+		newtio.c_cflag |= PARENB;
+		break;
+	case 3: /* Mark */
+		/* XXX unhandled */
+		break;
 	case 4: /* Space */
 		/* XXX unhandled */
 		break;
@@ -154,10 +154,10 @@
 
 	newtio.c_cflag &= ~CSTOPB;
 	switch (stopBits) {
-	case 0: /* One */
+	case 1: /* One */
 		/* do nothing, the default is one stop bit */
 		break;
-	case 1: /* OnePointFive */
+	case 3: /* OnePointFive */
 		/* XXX unhandled */
 		break;
 	case 2: /* Two */
@@ -174,27 +174,26 @@
 	case 0: /* None */
 		/* do nothing */
 		break;
-	case 1: /* RequestToSend (RTS) */
+	case 2: /* RequestToSend (RTS) */
 #ifdef CRTSCTS
 		newtio.c_cflag |= CRTSCTS;
 #endif /* def CRTSCTS */
 		break;
-	case 2: /* RequestToSendXOnXOff (RTS + XON/XOFF) */
+	case 3: /* RequestToSendXOnXOff (RTS + XON/XOFF) */
 #ifdef CRTSCTS
 		newtio.c_cflag |= CRTSCTS;
 #endif /* def CRTSCTS */
 		/* fall through */
-	case 3: /* XOnXOff */
+	case 1: /* XOnXOff */
 		newtio.c_iflag |= IXOFF;
 		//		newtio.c_oflag |= IXON;
 		break;
 	}
 	
-	cfsetospeed (&newtio, baud_rate);
-	cfsetispeed (&newtio, baud_rate);
+	if (cfsetospeed (&newtio, baud_rate) < 0 || cfsetispeed (&newtio, baud_rate) < 0 ||
+			tcsetattr (fd, TCSADRAIN, &newtio) < 0)
+		return FALSE;
 
-	tcsetattr(fd,TCSADRAIN,&newtio);
-
 	return TRUE;
 }
 
