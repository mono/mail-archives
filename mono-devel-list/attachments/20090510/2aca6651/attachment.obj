From 83968f65adace7de33e952221bb7704243ffd310 Mon Sep 17 00:00:00 2001
From: Andreas Faerber <andreas.faerber@web.de>
Date: Sun, 10 May 2009 13:13:32 +0200
Subject: [PATCH] Fix build without GC

2009-05-10  Andreas Faerber  <andreas.faerber@web.de>

	* null-gc.c (mono_gc_weak_link_add, mono_gc_clear_domain): Fix
	stub signatures.

	This commit is licensed under the MIT X11 license.
---
 mono/metadata/ChangeLog |    7 +++++++
 mono/metadata/null-gc.c |    3 ++-
 2 files changed, 9 insertions(+), 1 deletions(-)

diff --git a/mono/metadata/ChangeLog b/mono/metadata/ChangeLog
index 01b6714..d33d169 100644
--- a/mono/metadata/ChangeLog
+++ b/mono/metadata/ChangeLog
@@ -1,3 +1,10 @@
+2009-05-10  Andreas Faerber  <andreas.faerber@web.de>
+
+	* null-gc.c (mono_gc_weak_link_add, mono_gc_clear_domain): Fix
+	stub signatures.
+	
+	Contributed unter MIT/X11 license.
+
 2009-05-09  Miguel de Icaza  <miguel@novell.com>
 
 	* verify.c, metadata-verifier.c: Add support for disabling the
diff --git a/mono/metadata/null-gc.c b/mono/metadata/null-gc.c
index 52c5524..d5af7b1 100644
--- a/mono/metadata/null-gc.c
+++ b/mono/metadata/null-gc.c
@@ -103,7 +103,7 @@ mono_gc_deregister_root (char* addr)
 }
 
 void
-mono_gc_weak_link_add (void **link_addr, MonoObject *obj)
+mono_gc_weak_link_add (void **link_addr, MonoObject *obj, gboolean track)
 {
 	*link_addr = obj;
 }
@@ -235,6 +235,7 @@ mono_gc_remove_weak_track_object (MonoDomain *domain, MonoObject *obj)
 	return NULL;
 }
 
+void
 mono_gc_clear_domain (MonoDomain *domain)
 {
 }
-- 
1.6.2.5

