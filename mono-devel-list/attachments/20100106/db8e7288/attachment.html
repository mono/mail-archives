<tt>
The&nbsp;long&nbsp;term&nbsp;fix&nbsp;is&nbsp;actually&nbsp;to&nbsp;rework&nbsp;the&nbsp;way&nbsp;I&nbsp;fixed&nbsp;it,&nbsp;but&nbsp;it&nbsp;requires&nbsp;quite&nbsp;some&nbsp;work.&lt;div&gt;This&nbsp;is&nbsp;going&nbsp;to&nbsp;happen&nbsp;and&nbsp;we&amp;#39;ll&nbsp;backport&nbsp;most&nbsp;of&nbsp;it&nbsp;to&nbsp;2.6&nbsp;once&nbsp;it&amp;#39;s&nbsp;stable.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Jan&nbsp;6,&nbsp;2010&nbsp;at&nbsp;1:57&nbsp;PM,&nbsp;Thierry&nbsp;Lafage&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:thierry.lafage@inria.fr&quot;&gt;thierry.lafage@inria.fr&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Thanks&nbsp;for&nbsp;your&nbsp;answer.&lt;br&gt;<br>
I&amp;#39;ll&nbsp;try&nbsp;one&nbsp;of&nbsp;your&nbsp;solutions.&lt;br&gt;<br>
&lt;br&gt;<br>
IMHO,&nbsp;a&nbsp;nice&nbsp;long&nbsp;term&nbsp;fix&nbsp;for&nbsp;it&nbsp;would&nbsp;be&nbsp;to&nbsp;provide&nbsp;a&nbsp;command-line&nbsp;option&nbsp;to&nbsp;set&nbsp;a&nbsp;max&nbsp;value&nbsp;different&nbsp;from&nbsp;the&nbsp;default&amp;#39;s,&nbsp;as&nbsp;for&nbsp;java&nbsp;and&nbsp;heap&nbsp;size&nbsp;(-Xmx).&nbsp;This&nbsp;way,&nbsp;one&nbsp;could&nbsp;fine&nbsp;tune&nbsp;according&nbsp;to&nbsp;the&nbsp;running&nbsp;application.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Thierry&nbsp;Lafage.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Rodrigo&nbsp;Kumpera&nbsp;a&nbsp;écrit&nbsp;:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
This&nbsp;was&nbsp;a&nbsp;stop-gap&nbsp;hack&nbsp;I&nbsp;added&nbsp;to&nbsp;fix&nbsp;a&nbsp;security&nbsp;issue.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;value&nbsp;is&nbsp;hardcoded&nbsp;into&nbsp;mono&amp;#39;s&nbsp;source&nbsp;and&nbsp;until&nbsp;we&nbsp;figure&nbsp;out&nbsp;a&nbsp;long&lt;br&gt;<br>
term&nbsp;fix&nbsp;for&nbsp;it,&nbsp;the&nbsp;only&nbsp;solution&nbsp;is&nbsp;to&nbsp;custom&nbsp;compile&nbsp;mono.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;a&nbsp;patch&nbsp;that&nbsp;improves&nbsp;the&nbsp;JIT&nbsp;to&nbsp;use&nbsp;smaller&nbsp;stacks,&nbsp;but&nbsp;it&amp;#39;s&nbsp;against&nbsp;trunk&lt;br&gt;<br>
and&nbsp;remains&nbsp;experimental.&lt;br&gt;<br>
&lt;br&gt;<br>
Besides&nbsp;that,&nbsp;we&nbsp;need&nbsp;to&nbsp;fix&nbsp;all&nbsp;unbounded&nbsp;code&nbsp;expansion&nbsp;to&nbsp;really&nbsp;support&nbsp;big&lt;br&gt;<br>
stack.&nbsp;Work&nbsp;on&nbsp;this&nbsp;have&nbsp;not&nbsp;been&nbsp;started.&lt;br&gt;<br>
&lt;br&gt;<br>
Right&nbsp;now,&nbsp;the&nbsp;only&nbsp;remedy&nbsp;for&nbsp;you&nbsp;is&nbsp;to&nbsp;custom&nbsp;build&nbsp;mono&nbsp;after&nbsp;either&nbsp;removing&lt;br&gt;<br>
the&nbsp;stack&nbsp;check[1]&nbsp;or&nbsp;increase&nbsp;it[2].&nbsp;Be&nbsp;aware&nbsp;that&nbsp;such&nbsp;changes&nbsp;do&nbsp;have&nbsp;security&lt;br&gt;<br>
implications.&lt;br&gt;<br>
&lt;br&gt;<br>
Sorry&nbsp;for&nbsp;this,&lt;br&gt;<br>
Rodrigo&nbsp;Kumpera&lt;br&gt;<br>
&lt;br&gt;<br>
[1]To&nbsp;remove&nbsp;it,&nbsp;edit&nbsp;mini-x86.c&nbsp;or&nbsp;mini-amd64.c.&nbsp;Search&nbsp;for&nbsp;MONO_ARCH_MAX_FRAME_SIZE&lt;br&gt;<br>
and&nbsp;remove&nbsp;the&nbsp;if&nbsp;that&nbsp;uses&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
[2]To&nbsp;increase&nbsp;it,&nbsp;change&nbsp;the&nbsp;define&nbsp;MONO_ARCH_MAX_FRAME_SIZE&nbsp;in&nbsp;either&lt;br&gt;<br>
mini-x86.h&nbsp;or&nbsp;mini-amd64.h&nbsp;depending&nbsp;if&nbsp;you&amp;#39;re&nbsp;building&nbsp;a&nbsp;32&nbsp;or&nbsp;64&nbsp;bits&nbsp;mono.&lt;br&gt;<br>
&lt;br&gt;<br>
 &lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
On&nbsp;Wed,&nbsp;Jan&nbsp;6,&nbsp;2010&nbsp;at&nbsp;9:02&nbsp;AM,&nbsp;Thierry&nbsp;Lafage&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:thierry.lafage@inria.fr&quot;&nbsp;target=&quot;_blank&quot;&gt;thierry.lafage@inria.fr&lt;/a&gt;&nbsp;&amp;lt;mailto:&lt;a&nbsp;href=&quot;mailto:thierry.lafage@inria.fr&quot;&nbsp;target=&quot;_blank&quot;&gt;thierry.lafage@inria.fr&lt;/a&gt;&amp;gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
&nbsp; &nbsp; Hi&nbsp;all,&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; I&nbsp;have&nbsp;a&nbsp;problem&nbsp;with&nbsp;a&nbsp;code&nbsp;running&nbsp;with&nbsp;mono-2.6.1.&lt;br&gt;<br>
&nbsp; &nbsp; It&nbsp;says&nbsp;:&lt;br&gt;<br>
&nbsp; &nbsp; &amp;quot;Unhandled&nbsp;Exception:&nbsp;System.InvalidProgramException:&nbsp;Method&nbsp;toto:main&lt;br&gt;<br>
&nbsp; &nbsp; ()&nbsp;stack&nbsp;is&nbsp;too&nbsp;big.&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; This&nbsp;problem&nbsp;does&nbsp;not&nbsp;appear&nbsp;with&nbsp;mono-2.4.3&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; In&nbsp;this&nbsp;case,&nbsp;the&nbsp;stack&nbsp;length&nbsp;is&nbsp;more&nbsp;than&nbsp;1MB&nbsp;(it&amp;#39;s&nbsp;ok&nbsp;with&nbsp;less&lt;br&gt;<br>
&nbsp; &nbsp; than&lt;br&gt;<br>
&nbsp; &nbsp; 1MB).&lt;br&gt;<br>
&nbsp; &nbsp; My&nbsp;question&nbsp;is:&nbsp;is&nbsp;it&nbsp;possible&nbsp;to&nbsp;force&nbsp;mono-2.6.1&nbsp;to&nbsp;accept&nbsp;stacks&lt;br&gt;<br>
&nbsp; &nbsp; which&nbsp;are&nbsp;more&nbsp;than&nbsp;1MB&nbsp;(I&amp;#39;ve&nbsp;found&nbsp;no&nbsp;related&nbsp;command&nbsp;line&nbsp;option)?&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; Thierry&nbsp;Lafage.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; _______________________________________________&lt;br&gt;<br>
&nbsp; &nbsp; Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&nbsp; &nbsp; &lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp; &nbsp; &amp;lt;mailto:&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&amp;gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&nbsp; &nbsp; &lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
