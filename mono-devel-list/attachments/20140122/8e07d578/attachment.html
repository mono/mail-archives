<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;12pt;<br>
font-family:Calibri<br>
}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here's&nbsp;the&nbsp;patches&nbsp;that&nbsp;makes&nbsp;everything&nbsp;works...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;patch-configure.in&nbsp;:&nbsp;this&nbsp;fixes&nbsp;pthread&nbsp;at&nbsp;several&nbsp;places&nbsp;and&nbsp;ensure&nbsp;LLVM_&nbsp;variables&nbsp;have&nbsp;a&nbsp;sed&nbsp;-e&nbsp;to&nbsp;replace&nbsp;lpthread&nbsp;to&nbsp;pthread&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;patch-eglib_src_Makefile.am&nbsp;:&nbsp;there's&nbsp;an&nbsp;issue&nbsp;with&nbsp;the&nbsp;NEED_VASPRINTF&nbsp;detection&nbsp;i&nbsp;commented&nbsp;the&nbsp;fix&nbsp;to&nbsp;keep&nbsp;foo.c&nbsp;&nbsp;;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;definitively&nbsp;not&nbsp;the&nbsp;place&nbsp;...&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;patch-mcs_class_System_System.IO_KeventWatcher.cs:&nbsp;old&nbsp;patch&nbsp;for&nbsp;keven&nbsp;from&lt;/font&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&quot;&gt;&nbsp;romain.tartiere@gmail.com&nbsp;mono&nbsp;maintainer&nbsp;(bsd-sharp)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;patch-mono_dis_util.c&nbsp;:&nbsp;there's&nbsp;a&nbsp;problem&nbsp;with&nbsp;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;HAVE_ISINF&nbsp;detection&nbsp;;&nbsp;flushed&nbsp;the&nbsp;pragma&nbsp;here...&nbsp;definitively&nbsp;not&nbsp;the&nbsp;place&nbsp;...&nbsp;&lt;/span&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;patch-mono_mini_mini-llvm.c&nbsp;:&nbsp;The&nbsp;important&nbsp;patch&nbsp;-&nbsp;mini-llvm.c&nbsp;contains&nbsp;gsharevt&nbsp;code&nbsp;and&nbsp;libmono-llvm.so&nbsp;doesn't&nbsp;link&nbsp;it,&nbsp;since&nbsp;it's&nbsp;just&nbsp;returning&nbsp;false,&nbsp;i&nbsp;readded&nbsp;the&nbsp;functions&nbsp;locally...&nbsp;also&nbsp;mono_print_unwind_info&nbsp;is&nbsp;not&nbsp;linked&nbsp;from&nbsp;unwind.o&nbsp;and&nbsp;adding&nbsp;it&nbsp;pull&nbsp;up&nbsp;recursive&nbsp;dependency...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;including&nbsp;romain&nbsp;tartiere&nbsp;to&nbsp;keep&nbsp;him&nbsp;in&nbsp;the&nbsp;loop&nbsp;if&nbsp;he&nbsp;wants&nbsp;to&nbsp;check&nbsp;those&nbsp;patches&nbsp;in&nbsp;bsd-sharp&nbsp;repo...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don't&nbsp;say&nbsp;those&nbsp;patches&nbsp;are&nbsp;ok,&nbsp;to&nbsp;the&nbsp;contrary,&nbsp;i&nbsp;say&nbsp;those&nbsp;a&nbsp;hints&nbsp;at&nbsp;what&nbsp;is&nbsp;to&nbsp;be&nbsp;really&nbsp;fixed&nbsp;for&nbsp;FreeBSD...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;there's&nbsp;still&nbsp;code&nbsp;pointing&nbsp;to&nbsp;libc.so&nbsp;instead&nbsp;of&nbsp;@LIBC@&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;but&nbsp;this&nbsp;fix&nbsp;the&nbsp;issues:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;ln&nbsp;-s&nbsp;/lib/libc.so.7&nbsp;/lib/libc.so&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here's&nbsp;the&nbsp;sys&nbsp;info&nbsp;:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;uname&nbsp;-a:&lt;/div&gt;&lt;div&gt;FreeBSD&nbsp;pcbsd&nbsp;11.0-CURRENT&nbsp;FreeBSD&nbsp;11.0-CURRENT&nbsp;#10&nbsp;r260825M:&nbsp;Thu&nbsp;Jan&nbsp;16&nbsp;13:29:53&nbsp;CST&nbsp;2014&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root@pcbsd:/usr/obj/usr/src/sys/GENERIC&nbsp;&nbsp;amd64&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;mono&nbsp;--version&lt;/div&gt;&lt;div&gt;&lt;div&gt;Mono&nbsp;JIT&nbsp;compiler&nbsp;version&nbsp;3.2.7&nbsp;(master/738f9c3&nbsp;Wed&nbsp;Jan&nbsp;22&nbsp;14:21:09&nbsp;CST&nbsp;2014)&lt;/div&gt;&lt;div&gt;Copyright&nbsp;(C)&nbsp;2002-2014&nbsp;Novell,&nbsp;Inc,&nbsp;Xamarin&nbsp;Inc&nbsp;and&nbsp;Contributors.&nbsp;www.mono-project.com&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TLS:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__thread&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SIGSEGV:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;altstack&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Notification:&nbsp;&nbsp;kqueue&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Architecture:&nbsp;&nbsp;amd64&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disabled:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Misc:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;softdebug&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LLVM:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes(3.4-mono-/)&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GC:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sgen&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;clang&nbsp;--version&lt;/div&gt;&lt;div&gt;&lt;div&gt;Mono&nbsp;C#&nbsp;compiler&nbsp;version&nbsp;3.2.7.0&lt;/div&gt;&lt;div&gt;root@pcbsd:/&nbsp;#&nbsp;clang&nbsp;--version&lt;/div&gt;&lt;div&gt;FreeBSD&nbsp;clang&nbsp;version&nbsp;3.4&nbsp;(tags/RELEASE_34/final&nbsp;197956)&nbsp;20140101&lt;/div&gt;&lt;div&gt;Target:&nbsp;x86_64-unknown-freebsd11.0&lt;/div&gt;&lt;div&gt;Thread&nbsp;model:&nbsp;posix&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;llvm-config&nbsp;--version&nbsp;:&nbsp;3.4-mono-/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;hr&nbsp;id=&quot;stopSpelling&quot;&gt;Date:&nbsp;Wed,&nbsp;22&nbsp;Jan&nbsp;2014&nbsp;13:10:25&nbsp;-0500&lt;br&gt;Subject:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;llvm&nbsp;issue&lt;br&gt;From:&nbsp;kumpera@gmail.com&lt;br&gt;To:&nbsp;brunolauze@msn.com&lt;br&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;We'd&nbsp;love&nbsp;to&nbsp;merge&nbsp;such&nbsp;change&nbsp;for&nbsp;FreeBSD&nbsp;:)&lt;/div&gt;&lt;div&nbsp;class=&quot;ecxgmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;ecxgmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Jan&nbsp;22,&nbsp;2014&nbsp;at&nbsp;12:24&nbsp;PM,&nbsp;Bruno&nbsp;Lauzé&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:brunolauze@msn.com&quot;&nbsp;target=&quot;_blank&quot;&gt;brunolauze@msn.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;ecxgmail_quote&quot;&nbsp;style=&quot;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
<br>
&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Good&nbsp;news,&nbsp;&nbsp;i&nbsp;figured&nbsp;out&nbsp;why&nbsp;it&nbsp;was&nbsp;hanging&nbsp;with&nbsp;llvm.&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It's&nbsp;seems&nbsp;part&nbsp;of&nbsp;the&nbsp;code&nbsp;is&nbsp;missing&nbsp;-pthread&nbsp;and/or&nbsp;using&nbsp;-lpthread&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;CFLAGS+=&nbsp;-pthread&lt;/div&gt;<br>
&lt;div&gt;CXXFLAGS+=&nbsp;-pthread&lt;/div&gt;&lt;div&gt;LDFLAGS+=&nbsp;-pthread&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;it&nbsp;seems&nbsp;llvm-config&nbsp;output&nbsp;-lpthread&nbsp;and&nbsp;not&nbsp;-pthread&lt;/div&gt;&lt;div&gt;replace&nbsp;-lpthread&nbsp;to&nbsp;-pthread&nbsp;in&nbsp;&nbsp;LLVM_CFLAGS&lt;/div&gt;&lt;div&gt;replace&nbsp;-lpthread&lt;span&nbsp;style=&quot;font-size:12pt;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12pt;&quot;&gt;to&nbsp;-pthread&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12pt;&quot;&gt;&nbsp;in&nbsp;&nbsp;LLVM_LIBS&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don't&nbsp;know&nbsp;if&nbsp;someone&nbsp;is&nbsp;willing&nbsp;to&nbsp;see&nbsp;this&nbsp;in&nbsp;mono&nbsp;source&nbsp;or&nbsp;to&nbsp;keep&nbsp;it&nbsp;as&nbsp;external&nbsp;patch?&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;hr&gt;Date:&nbsp;Tue,&nbsp;21&nbsp;Jan&nbsp;2014&nbsp;14:16:37&nbsp;-0500&lt;br&gt;Subject:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;llvm&nbsp;issue&lt;br&gt;From:&nbsp;&lt;a&nbsp;href=&quot;mailto:kumpera@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;kumpera@gmail.com&lt;/a&gt;&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:brunolauze@msn.com&quot;&nbsp;target=&quot;_blank&quot;&gt;brunolauze@msn.com&lt;/a&gt;&lt;br&gt;CC:&nbsp;&lt;a&nbsp;href=&quot;mailto:mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;<br>
LLVM&nbsp;was&nbsp;never&nbsp;tests&nbsp;on&nbsp;FreeBSD,&nbsp;you'll&nbsp;have&nbsp;to&nbsp;debug&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;On&nbsp;Tue,&nbsp;Jan&nbsp;21,&nbsp;2014&nbsp;at&nbsp;8:35&nbsp;AM,&nbsp;Bruno&nbsp;Lauzé&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:brunolauze@msn.com&quot;&nbsp;target=&quot;_blank&quot;&gt;brunolauze@msn.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;style=&quot;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
<br>
&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;style=&quot;line-height:21.30000114440918px;color:rgb(68,68,68);font-size:14.666666984558105px;&quot;&gt;When&nbsp;I&nbsp;try&nbsp;to&nbsp;compile&nbsp;mono&nbsp;from&nbsp;git&nbsp;with&nbsp;llvm&nbsp;;&nbsp;llvm&nbsp;installed&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://github.com/mono/llvm&quot;&nbsp;target=&quot;_blank&quot;&gt;github.com/mono/llvm&lt;/a&gt;&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;line-height:21.30000114440918px;color:rgb(68,68,68);font-size:14.666666984558105px;&quot;&gt;I'm&nbsp;on&nbsp;FreeBSD&nbsp;HEAD.&lt;/div&gt;&lt;div&nbsp;style=&quot;line-height:21.30000114440918px;color:rgb(68,68,68);font-size:14.666666984558105px;&quot;&gt;<br>
<br>
Everything&nbsp;compiles&nbsp;smoothly&nbsp;but&nbsp;&nbsp;now&nbsp;the&nbsp;mono-sgen&nbsp;process&nbsp;get&nbsp;stuck&nbsp;in&nbsp;&quot;umtxn&quot;&nbsp;state&nbsp;(kernel&nbsp;lock)&nbsp;on&nbsp;the&nbsp;first&nbsp;usage.&nbsp;(basic-profile-check.exe)&lt;/div&gt;&lt;div&nbsp;style=&quot;line-height:21.30000114440918px;color:rgb(68,68,68);font-size:14.666666984558105px;&quot;&gt;<br>
<br>
Whenever&nbsp;i&nbsp;remove&nbsp;--enable-llvm&nbsp;everything&nbsp;is&nbsp;fine&nbsp;again.&nbsp;This&nbsp;was&nbsp;working&nbsp;before&nbsp;around&nbsp;october.&nbsp;Any&nbsp;ideas&nbsp;what&nbsp;could&nbsp;have&nbsp;change&nbsp;to&nbsp;cause&nbsp;this?&lt;/div&gt;&lt;div&nbsp;style=&quot;line-height:21.30000114440918px;color:rgb(68,68,68);font-size:14.666666984558105px;&quot;&gt;<br>
<br>
Any&nbsp;suggestions&nbsp;where&nbsp;to&nbsp;look?&lt;/div&gt;&lt;div&nbsp;style=&quot;line-height:21.30000114440918px;color:rgb(68,68,68);font-size:14.666666984558105px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;line-height:21.30000114440918px;color:rgb(68,68,68);font-size:14.666666984558105px;&quot;&gt;<br>
<br>
Thanks.&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
