Index: System.Web.Services.Description/ServiceDescriptionReflector.cs
===================================================================
--- System.Web.Services.Description/ServiceDescriptionReflector.cs	(revision 45467)
+++ System.Web.Services.Description/ServiceDescriptionReflector.cs	(working copy)
@@ -77,7 +77,11 @@
 			if (WSConfig.IsSupported (WSProtocol.HttpGet))
 				new HttpGetProtocolReflector ().Reflect (this, type, url, schemaExporter, soapSchemaExporter);
 			
+#if NET_1_1
+			if (WSConfig.IsSupported (WSProtocol.HttpPost) || WSConfig.IsSupported (WSProtocol.HttpPostLocalhost))
+#else
 			if (WSConfig.IsSupported (WSProtocol.HttpPost))
+#endif
 				new HttpPostProtocolReflector ().Reflect (this, type, url, schemaExporter, soapSchemaExporter);
 				
 			int i=0;
Index: System.Web.Services.Description/ChangeLog
===================================================================
--- System.Web.Services.Description/ChangeLog	(revision 45467)
+++ System.Web.Services.Description/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2005-06-06  Kornél Pál <kornelpal@hotmail.com>
+
+	* ServiceDescriptionReflector.cs: Added support for HttpPostLocalhost and HttpSoap12
+
 2005-06-05 Konstantin Triger <kostat@mainsoft.com>
 
 	* ServiceDescriptionSerializerBase.cs: Perform correct name encoding
Index: System.Web.Services.Protocols/WebServiceHandlerFactory.cs
===================================================================
--- System.Web.Services.Protocols/WebServiceHandlerFactory.cs	(revision 45467)
+++ System.Web.Services.Protocols/WebServiceHandlerFactory.cs	(working copy)
@@ -33,6 +33,7 @@
 //
 
 using System.IO;
+using System.Net;
 using System.Web.Services;
 using System.Web.Services.Configuration;
 using System.Web.SessionState;
@@ -108,9 +109,27 @@
 			Type type = WebServiceParser.GetCompiledType (filePath, context);
 
 			WSProtocol protocol = GuessProtocol (context, verb);
+			bool supported = false;
 			IHttpHandler handler = null;
 
-			if (!WSConfig.IsSupported (protocol))
+			supported = WSConfig.IsSupported (protocol);
+			if (!supported) {
+				switch (protocol) {
+					case WSProtocol.HttpSoap:
+						supported = WSConfig.IsSupported (WSProtocol.HttpSoap12);
+						break;
+					case WSProtocol.HttpPost:
+						if (WSConfig.IsSupported (WSProtocol.HttpPostLocalhost)) {
+							string localAddr = context.Request.ServerVariables ["LOCAL_ADDR"];
+
+							supported = localAddr != null &&
+								(localAddr == context.Request.ServerVariables ["REMOTE_ADDR"] ||
+								IPAddress.IsLoopback (IPAddress.Parse (localAddr)));
+						}
+						break;
+				}
+			}
+			if (!supported)
 				return new DummyHttpHandler ();
 
 			switch (protocol) {
Index: System.Web.Services.Protocols/ChangeLog
===================================================================
--- System.Web.Services.Protocols/ChangeLog	(revision 45467)
+++ System.Web.Services.Protocols/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2005-06-06  Kornél Pál <kornelpal@hotmail.com>
+
+	* WebServiceHandlerFactory.cs: Added support for HttpPostLocalhost and HttpSoap12
+
 2005-06-05 Konstantin Triger <kostat@mainsoft.com>
 
 	* SoapHttpClientProtocol.cs: Close WebResponse to free resources
Index: System.Web.Services.Configuration/WebServicesConfigurationSectionHandler.cs
===================================================================
--- System.Web.Services.Configuration/WebServicesConfigurationSectionHandler.cs	(revision 45467)
+++ System.Web.Services.Configuration/WebServicesConfigurationSectionHandler.cs	(working copy)
@@ -42,7 +42,11 @@
 		HttpPost = 1 << 1,
 		HttpGet =  1 << 2,
 		Documentation = 1 << 3,
-		All = 0x0F
+#if NET_1_1
+		HttpSoap12 = 1 << 4,
+		HttpPostLocalhost = 1 << 5,
+#endif
+		All = 0xFF
 	}
 	
 	class WSConfig
@@ -86,6 +90,17 @@
 		{
 			WSProtocol proto;
 			error = null;
+
+#if ONLY_1_1
+			switch (protoName) {
+				case "HttpSoap1.2":
+					protoName = "HttpSoap12";
+					break;
+				case "HttpSoap12":
+					protoName = null;
+					break;
+			}
+#endif
 			try {
 				proto = (WSProtocol) Enum.Parse (typeof (WSProtocol), protoName);
 			} catch {
Index: System.Web.Services.Configuration/ChangeLog
===================================================================
--- System.Web.Services.Configuration/ChangeLog	(revision 45467)
+++ System.Web.Services.Configuration/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2005-06-06  Kornél Pál <kornelpal@hotmail.com>
+
+	* WebServicesConfigurationSectionHandler.cs: Added support for HttpPostLocalhost and HttpSoap12
+
 2005-06-05 Konstantin Triger <kostat@mainsoft.com>
 
 	* WebServicesConfigurationSectionHandler.cs: moving static fields to AppDomain in Java builds
