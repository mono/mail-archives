<%@ Import Namespace="System.Data" %>
<%@ Page language="c#" AutoEventWireup="true"  %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<HTML>
	<HEAD>
		<title>TestGrid</title>
		<meta name="GENERATOR" Content="Microsoft Visual Studio .NET 7.1">
		<meta name="CODE_LANGUAGE" Content="C#">
		<meta name="vs_defaultClientScript" content="JavaScript">
		<meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5">
		<script runat="server" language="C#">
		
		override protected void OnInit(EventArgs e)
		{
			
			this.Button1.Click += new System.EventHandler(this.Button1_Click);
			this.Button2.Click += new System.EventHandler(this.Button2_Click);
			this.Load += new System.EventHandler(this.Page_Load);
			
			base.OnInit(e);
		}
		
				
		private void Page_Load(object sender, System.EventArgs e)
		{
			if(!IsPostBack)
			{
				BindDisplayGrid();
			}
		}
		private void BindZeroRowData()
		{
			displayGrid.DataSource = GetZeroRowDataSource();
			displayGrid.DataBind();
		}
		
		private void BindDisplayGrid()
		{
			displayGrid.DataSource = GetDataSource();
			displayGrid.DataBind();
		}
		
		//Creates Dummy data
		private ICollection GetDataSource()
		{
			DataTable dt = new DataTable();
		
			dt.Columns.Add(new DataColumn("Nr",typeof(String)));
			dt.Columns.Add(new DataColumn("Name",typeof(String)));
				
			for(int i =1 ; i <5;i++)
			{
				DataRow dr = dt.NewRow();
				dr["Nr"] = i.ToString();
				dr["Name"] = "Row " + i.ToString();
				dt.Rows.Add(dr);
				dr = dt.NewRow();
			}
			
			return dt.DefaultView;
		}
		
		
		
		//Creates Dummy data
		private ICollection GetZeroRowDataSource()
		{
			DataTable dt = new DataTable();
			dt.Columns.Add(new DataColumn("Nr",typeof(String)));
			dt.Columns.Add(new DataColumn("Name",typeof(String)));
			return dt.DefaultView;
		}
		 private void Button1_Click(object sender, System.EventArgs e)
		{
			BindZeroRowData();
		}

		private void Button2_Click(object sender, System.EventArgs e)
		{
			BindDisplayGrid();
		}
		</script>
	</HEAD>
	<body MS_POSITIONING="FlowLayout">
		<form id="Form1" method="post" runat="server">
			<asp:datagrid id="displayGrid" runat="server" AutoGenerateColumns="False" GridLines="Horizontal"
				CellPadding="4" BackColor="White" BorderWidth="3px" BorderStyle="Double" BorderColor="#336666"
				PageSize="5">
				<FooterStyle ForeColor="#333333" BackColor="White"></FooterStyle>
				<SelectedItemStyle Font-Bold="True" ForeColor="White" BackColor="#339966"></SelectedItemStyle>
				<ItemStyle ForeColor="#333333" BackColor="White"></ItemStyle>
				<HeaderStyle Font-Bold="True" ForeColor="White" BackColor="#336666"></HeaderStyle>
				<Columns>
					<asp:BoundColumn DataField="Nr" SortExpression="Nr" ReadOnly="True" HeaderText="Nr"></asp:BoundColumn>
					<asp:BoundColumn DataField="Name" HeaderText="Name"></asp:BoundColumn>
				</Columns>
				<PagerStyle VerticalAlign="Middle" NextPageText="&gt;" PrevPageText="&lt;" HorizontalAlign="Center"
					ForeColor="White" BackColor="#336666" Mode="NumericPages"></PagerStyle>
			</asp:datagrid>
			<asp:Button id="Button1" runat="server" Text="Bind Empty"></asp:Button>
			<asp:Button id="Button2" runat="server" Text="Bind Filled"></asp:Button>
		</form>
	</body>
</HTML>
