using System;
using System.Xml;

class Test {

public static void Main() 
{
	string FileName="test.xml";
	
	if (System.IO.File.Exists(FileName))
                System.IO.File.Delete(FileName);
	
	
		Console.WriteLine("Creating Doc..");
		XmlTextWriter TempWriter = new XmlTextWriter(FileName,null);
		TempWriter.Formatting=Formatting.Indented;
        	TempWriter.Indentation=6;
       	 	TempWriter.Namespaces=false;
        	TempWriter.WriteStartDocument();

		TempWriter.WriteStartElement("","root","");

			                    
		    TempWriter.WriteStartElement("","emptynode","");
                    TempWriter.WriteString("junk");
                    TempWriter.WriteEndElement();

		TempWriter.WriteEndElement();
		TempWriter.Flush();
		TempWriter.Close();
	

	Console.WriteLine("Doc Written!");
	
	Console.WriteLine("Modifiying Doc...");

	XmlDocument XmlModifier= new XmlDocument();
	XmlModifier.Load(FileName);
	foreach(XmlNode child in XmlModifier.DocumentElement)
	{
		if(child.Name=="emptynode")
		{
			Console.WriteLine("the \"emptynode\" was found!");
			Console.WriteLine("Current Value is \""+child.InnerText+"\" with Length "+child.InnerText.Length);
			Console.WriteLine("Setting node to emptystring");
			child.InnerText=String.Empty;
                }
                             
	}						

	XmlModifier.Save(FileName);

	Console.WriteLine("Reading Modified document...");
	XmlTextReader XmlReader = new XmlTextReader(FileName);
	 while (XmlReader.Read())
                    {
                        if (XmlReader.NodeType==XmlNodeType.Element)
                        {
				if (XmlReader.LocalName=="emptynode")
				{
				string ValueFound =  XmlReader.ReadString();
                               	Console.WriteLine("the \"emptynode\" was found");
				Console.WriteLine("Current Value is \""+ValueFound+"\" with Length: "+ValueFound.Length);
				}
                        }
                    }
	XmlReader.Close();
					


}

}
