Index: metadata/class.c
===================================================================
--- metadata/class.c	(revision 93177)
+++ metadata/class.c	(working copy)
@@ -2887,6 +2887,10 @@
 		break;
 	}
 
+	case MONO_EXCEPTION_BAD_IMAGE:
+		class->exception_data = error->msg;
+		break;
+
 	default :
 		g_assert_not_reached ();
 	}
@@ -3453,7 +3457,7 @@
 		mono_loader_unlock ();
 		return class;
 	}
-
+	
 	g_assert (mono_metadata_token_table (type_token) == MONO_TABLE_TYPEDEF);
 
 	mono_metadata_decode_row (tt, tidx - 1, cols, MONO_TYPEDEF_SIZE);
@@ -6176,6 +6180,9 @@
 
 		return ex;
 	}
+	case MONO_EXCEPTION_BAD_IMAGE: {
+		return mono_get_exception_bad_image_format (klass->exception_data);
+	}
 	default: {
 		MonoLoaderError *error;
 		MonoException *ex;