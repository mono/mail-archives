diff --git a/mono/metadata/assembly.c b/mono/metadata/assembly.c
index 9cc4d6d..45f0792 100644
--- a/mono/metadata/assembly.c
+++ b/mono/metadata/assembly.c
@@ -38,6 +38,10 @@
 #include <sys/stat.h>
 #endif
 
+#ifdef PLATFORM_MACOSX
+#include <mach-o/dyld.h>
+#endif
+
 /* AssemblyVersionMap: an assembly name and the assembly version set on which it is based */
 typedef struct  {
 	const char* assembly_name;
@@ -568,6 +572,19 @@ mono_set_rootdir (void)
 	g_free (name);
 #elif defined(DISABLE_MONO_AUTODETECTION)
 	fallback ();
+#elif PLATFORM_MACOSX
+	char path [PATH_MAX + 1];
+	char rpath [PATH_MAX + 1];
+	uint bufsize = sizeof(path);
+	
+	if (_NSGetExecutablePath(path, &bufsize) == 0) {
+		if (realpath(path, rpath) != NULL) {
+			set_dirs (rpath);
+			return;
+		}
+	}
+	
+	fallback ();
 #else
 	char buf [4096];
 	int  s;
