<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7651.59&quot;&gt;<br>
&lt;TITLE&gt;SV:&nbsp;[Mono-dev]&nbsp;WS&nbsp;stack.&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hi,&lt;BR&gt;<br>
&lt;BR&gt;<br>
Ok,&nbsp;I&nbsp;think&nbsp;there&nbsp;perhaps&nbsp;is&nbsp;a&nbsp;missunderstanding&nbsp;here.&lt;BR&gt;<br>
What&nbsp;I'm&nbsp;talking&nbsp;about&nbsp;here&nbsp;is&nbsp;not&nbsp;the&nbsp;resulting&nbsp;WSDL&nbsp;but&nbsp;the&nbsp;actual&nbsp;SOAP/XML&nbsp;serialization&nbsp;of&nbsp;the&nbsp;RPC&nbsp;call.&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;apologize&nbsp;if&nbsp;I&nbsp;wasn't&nbsp;clear&nbsp;enough&nbsp;about&nbsp;that&nbsp;from&nbsp;the&nbsp;start.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Hope&nbsp;that&nbsp;makes&nbsp;more&nbsp;sense&nbsp;for&nbsp;you&nbsp;in&nbsp;this&nbsp;case.&lt;BR&gt;<br>
&lt;BR&gt;<br>
-----Ursprungligt&nbsp;meddelande-----&lt;BR&gt;<br>
Från:&nbsp;mono-devel-list-bounces@lists.ximian.com&nbsp;genom&nbsp;Atsushi&nbsp;Eno&lt;BR&gt;<br>
Skickat:&nbsp;on&nbsp;2007-02-07&nbsp;16:27&lt;BR&gt;<br>
Till:&nbsp;mono-devel-list@lists.ximian.com&lt;BR&gt;<br>
Ämne:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;WS&nbsp;stack.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Hi&nbsp;:)&lt;BR&gt;<br>
&lt;BR&gt;<br>
Daniel&nbsp;Lundqvist&nbsp;wrote:&lt;BR&gt;<br>
&amp;gt;&nbsp;Hey&nbsp;again&nbsp;:)&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;ons&nbsp;2007-02-07&nbsp;klockan&nbsp;20:51&nbsp;+0900&nbsp;skrev&nbsp;Atsushi&nbsp;Eno:&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;Hi&nbsp;Daniel,&lt;BR&gt;<br>
&amp;gt;&amp;gt;&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;Daniel&nbsp;Lundqvist&nbsp;wrote:&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;Hi&nbsp;Atsushi,&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;mån&nbsp;2007-02-05&nbsp;klockan&nbsp;15:14&nbsp;+0900&nbsp;skrev&nbsp;Atsushi&nbsp;Eno:&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;Hi&nbsp;Daniel,&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;Daniel&nbsp;Lundqvist&nbsp;wrote:&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;The&nbsp;issue&nbsp;here&nbsp;is&nbsp;that&nbsp;it&nbsp;always&nbsp;sends&nbsp;the&nbsp;oid&nbsp;and&nbsp;parentoid&nbsp;field&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;regardless&nbsp;of&nbsp;value&nbsp;of&nbsp;&amp;lt;field&amp;gt;Specified.&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;I&nbsp;got&nbsp;a&nbsp;patch&nbsp;(against&nbsp;SVN)&nbsp;for&nbsp;it,&nbsp;don't&nbsp;know&nbsp;if&nbsp;it's&nbsp;correct&nbsp;but&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;solves&nbsp;the&nbsp;problem&nbsp;for&nbsp;me.&nbsp;So&nbsp;now&nbsp;it&nbsp;only&nbsp;sends&nbsp;oid&nbsp;and&nbsp;parentoid&nbsp;when&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;&amp;lt;field&amp;gt;Specified&nbsp;is&nbsp;set&nbsp;to&nbsp;true.&nbsp;This&nbsp;was&nbsp;tested&nbsp;with&nbsp;1.1.17.1&nbsp;but&nbsp;the&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;problem&nbsp;is&nbsp;in&nbsp;SVN&nbsp;as&nbsp;well&nbsp;from&nbsp;what&nbsp;I&nbsp;can&nbsp;see.&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;Oh,&nbsp;cool.&nbsp;Can&nbsp;you&nbsp;please&nbsp;share&nbsp;the&nbsp;patch&nbsp;so&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;fixed?&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;Of&nbsp;course,&nbsp;thought&nbsp;I&nbsp;attached&nbsp;it&nbsp;but&nbsp;I'll&nbsp;reattach&nbsp;it.&nbsp;The&nbsp;problem&nbsp;is&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;that&nbsp;XmlTypeMapMember::CheckOptionalValueType&nbsp;is&nbsp;never&nbsp;called&nbsp;and&nbsp;thus&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;the&nbsp;OPTIONAL&nbsp;bit&nbsp;in&nbsp;its&nbsp;flags&nbsp;field&nbsp;is&nbsp;never&nbsp;set&nbsp;(Which&nbsp;is&nbsp;then&nbsp;checked&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;in&nbsp;XmlSerializationWriterInterpreter::MemberHasValue).&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;Thanks&nbsp;:)&nbsp;However,&nbsp;now&nbsp;I&nbsp;tried&nbsp;your&nbsp;patch&nbsp;but&nbsp;it&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;fix&nbsp;the&nbsp;issue.&nbsp;Do&nbsp;you&nbsp;have&nbsp;actual&nbsp;case&nbsp;that&nbsp;the&nbsp;patch&nbsp;indeed&nbsp;fix&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;the&nbsp;issue?&nbsp;I&nbsp;attached&nbsp;what&nbsp;I&nbsp;tried.&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;Weird.&nbsp;I've&nbsp;redone&nbsp;my&nbsp;tests&nbsp;with&nbsp;the&nbsp;1.2.3&nbsp;release.&nbsp;With&nbsp;a&nbsp;stock&lt;BR&gt;<br>
&amp;gt;&nbsp;System.Xml.dll&nbsp;it&nbsp;have&nbsp;the&nbsp;problem&nbsp;but&nbsp;with&nbsp;a&nbsp;patched&nbsp;(with&nbsp;the&nbsp;patch&nbsp;I&lt;BR&gt;<br>
&amp;gt;&nbsp;sent&nbsp;earlier)&nbsp;it&nbsp;don't.&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;There&nbsp;are&nbsp;some&nbsp;other&nbsp;places&nbsp;(I&nbsp;think)&nbsp;that&nbsp;XmlTypeMapMember&nbsp;is&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;instanciated&nbsp;but&nbsp;I&nbsp;didn't&nbsp;add&nbsp;the&nbsp;call&nbsp;there,&nbsp;so&nbsp;this&nbsp;patch&nbsp;only&nbsp;fixes&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;my&nbsp;problem.&nbsp;Perhaps&nbsp;this&nbsp;call&nbsp;should&nbsp;be&nbsp;placed&nbsp;in&nbsp;a&nbsp;more&nbsp;appropiate&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;place,&nbsp;but&nbsp;I&nbsp;don't&nbsp;speak&nbsp;the&nbsp;XML/WS&nbsp;stack&nbsp;fluently&nbsp;enough&nbsp;to&nbsp;find&nbsp;where.&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;If&nbsp;your&nbsp;patch&nbsp;does&nbsp;not&nbsp;fix&nbsp;the&nbsp;case&nbsp;that&nbsp;I&nbsp;attached,&nbsp;then&nbsp;yes&nbsp;it&nbsp;is&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;likely&nbsp;to&nbsp;happen.&nbsp;I'd&nbsp;wait&nbsp;for&nbsp;your&nbsp;case&nbsp;and&nbsp;try&nbsp;to&nbsp;fix&nbsp;it.&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;Now&nbsp;I&nbsp;think&nbsp;I&nbsp;see&nbsp;one&nbsp;issue.&nbsp;Since&nbsp;you&nbsp;are&nbsp;using&nbsp;WebService&nbsp;and&lt;BR&gt;<br>
&amp;gt;&nbsp;WebMethod&nbsp;attributes&nbsp;perhaps&nbsp;they&nbsp;are&nbsp;hitting&nbsp;the&nbsp;other&nbsp;path&nbsp;that&nbsp;is&lt;BR&gt;<br>
&amp;gt;&nbsp;calling&nbsp;CreateMapMember(),&nbsp;in&nbsp;ImportMembersMapping&nbsp;in&nbsp;either&lt;BR&gt;<br>
&amp;gt;&nbsp;XmlReflectionImport.cs&nbsp;or&nbsp;SoapReflectionImport.cs&nbsp;(depends&nbsp;on&nbsp;using&lt;BR&gt;<br>
&amp;gt;&nbsp;literal&nbsp;encoding&nbsp;or&nbsp;not).&lt;BR&gt;<br>
&amp;nbsp;&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;After&nbsp;some&nbsp;more&nbsp;investigation&nbsp;that&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;case.&nbsp;From&nbsp;what&nbsp;I&nbsp;can&lt;BR&gt;<br>
&amp;gt;&nbsp;see&nbsp;the&nbsp;enclosing&nbsp;type&nbsp;is&nbsp;not&nbsp;available&nbsp;at&nbsp;that&nbsp;point&nbsp;(which&nbsp;is&nbsp;needed&lt;BR&gt;<br>
&amp;gt;&nbsp;to&nbsp;call&nbsp;XmlTypeMapMember::CheckOptionalValueType).&lt;BR&gt;<br>
&lt;BR&gt;<br>
Well,&nbsp;however&nbsp;removing&nbsp;[WebService]&nbsp;didn't&nbsp;change&nbsp;anything,&nbsp;and&lt;BR&gt;<br>
without&nbsp;[WebMethod]&nbsp;it&nbsp;doesn't&nbsp;expose&nbsp;any&nbsp;ports.&nbsp;Or&nbsp;are&nbsp;you&nbsp;checking&lt;BR&gt;<br>
anything&nbsp;else&nbsp;than&nbsp;the&nbsp;output&nbsp;WSDL?&nbsp;(As&nbsp;long&nbsp;as&nbsp;the&nbsp;WSDL&nbsp;contains&lt;BR&gt;<br>
'oldSpecified'&nbsp;and&nbsp;'parentoidSpecified'&nbsp;the&nbsp;issue&nbsp;isn't&nbsp;fixed.)&lt;BR&gt;<br>
&lt;BR&gt;<br>
Probably&nbsp;a&nbsp;reproducible&nbsp;example&nbsp;would&nbsp;tell&nbsp;me&nbsp;what&nbsp;exactly&nbsp;is&nbsp;the&lt;BR&gt;<br>
issue&nbsp;you&nbsp;are&nbsp;having&nbsp;fix.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Atsushi&nbsp;Eno&lt;BR&gt;<br>
_______________________________________________&lt;BR&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;BR&gt;<br>
Mono-devel-list@lists.ximian.com&lt;BR&gt;<br>
&lt;A&nbsp;HREF=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/A&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
