<tt>
On&nbsp;6/12/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Robert&nbsp;Jordan&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:robertj@gmx.net&quot;&gt;robertj@gmx.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Maybe&nbsp;the&nbsp;code&nbsp;doesn't&nbsp;pass&nbsp;verification.&nbsp;Test&nbsp;the&nbsp;assembly&nbsp;with&nbsp;pedump&lt;br&gt;or&nbsp;&lt;a&nbsp;href=&quot;http://MS.NET&quot;&gt;MS.NET&lt;/a&gt;'s&nbsp;PEVerify.&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;I&nbsp;ran&nbsp;this&nbsp;with&nbsp;PEVerify&nbsp;and&nbsp;got&nbsp;a&nbsp;couple&nbsp;of&nbsp;errors&nbsp;(I&nbsp;had&nbsp;changed&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;assembly&nbsp;so&nbsp;I&nbsp;wouldn't&nbsp;get&nbsp;confused&nbsp;with&nbsp;my&nbsp;other&nbsp;example&nbsp;cases):<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;Microsoft&nbsp;(R)&nbsp;.NET&nbsp;Framework&nbsp;PE&nbsp;Verifier&amp;nbsp;&nbsp;Version&nbsp;1.1.4322.573&lt;/span&gt;&lt;/font&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;Copyright&nbsp;(C)&nbsp;Microsoft&nbsp;Corporation&nbsp;1998-2002.&nbsp;All&nbsp;rights&nbsp;reserved.&lt;/span&gt;&lt;/font&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;[IL]:&nbsp;Error:&nbsp;[d:\tmp\cs\middle.exe&nbsp;:&nbsp;Middle::Main]&nbsp;[exception&nbsp;#0x00000000]&nbsp;Lexic&lt;/span&gt;&lt;/font&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
al&nbsp;nesting.&lt;/span&gt;&lt;/font&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;[IL]:&nbsp;Error:&nbsp;[d:\tmp\cs\middle.exe&nbsp;:&nbsp;Middle::Main]&nbsp;[offset&nbsp;0x00000000]&nbsp;fallthru&lt;/span&gt;<br>
&lt;/font&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&nbsp;the&nbsp;end&nbsp;of&nbsp;an&nbsp;exception&nbsp;block&lt;/span&gt;&lt;/font&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
2&nbsp;Errors&nbsp;Verifying&nbsp;middle.exe&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;On&nbsp;closer&nbsp;inspection&nbsp;of&nbsp;ECMA-335,&nbsp;the&nbsp;reason&nbsp;for&nbsp;the&nbsp;first&nbsp;error&nbsp;was&nbsp;that&nbsp;my&nbsp;previous&nbsp;code&nbsp;violates&nbsp;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;&lt;a&nbsp;href=&quot;http://12.4.2.7&quot;&gt;12.4.2.7<br>
&lt;/a&gt;&lt;/span&gt;&nbsp;of&nbsp;Partition&nbsp;I.&amp;nbsp;&nbsp;Specifically,&nbsp;the&nbsp;paragraph&nbsp;regarding&nbsp;&lt;span&nbsp;style=&quot;font-style:&nbsp;italic;&quot;&gt;&lt;span&nbsp;style=&quot;font-style:&nbsp;italic;&quot;&gt;lexical&nbsp;&lt;/span&gt;nesting&lt;/span&gt;&nbsp;of&nbsp;protected&nbsp;blocks.&amp;nbsp;&nbsp;The&nbsp;reason&nbsp;for&nbsp;the&nbsp;second&nbsp;error&nbsp;is&nbsp;a&nbsp;control&nbsp;fall&nbsp;through&nbsp;violation&nbsp;by&nbsp;the&nbsp;<br>
&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;nop&lt;/span&gt;&nbsp;(that&nbsp;is&nbsp;unreachable&nbsp;in&nbsp;my&nbsp;example),&nbsp;this&nbsp;violates&nbsp;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;12.4.2.8.1&lt;/span&gt;&nbsp;of&nbsp;Partition&nbsp;I&nbsp;which&nbsp;states&nbsp;that&nbsp;&amp;quot;exit&nbsp;from&nbsp;a&nbsp;protected&nbsp;block&nbsp;cannot&nbsp;be&nbsp;accomplished&nbsp;via&nbsp;fall&nbsp;through.&amp;quot;&amp;nbsp;&nbsp;Even&nbsp;though&nbsp;the&nbsp;<br>
&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;nop&lt;/span&gt;&nbsp;is&nbsp;unreachable,&nbsp;this&nbsp;is&nbsp;incorrect&nbsp;IL--easy&nbsp;to&nbsp;fix&nbsp;with&nbsp;a&nbsp;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;leave&lt;/span&gt;&nbsp;that&nbsp;is&nbsp;still&nbsp;unreachable.&lt;br&gt;&lt;br&gt;Based&nbsp;on&nbsp;that,&nbsp;I&nbsp;have&nbsp;re-formulated&nbsp;my&nbsp;examples&nbsp;and&nbsp;managed&nbsp;to&nbsp;get&nbsp;PEVerify&nbsp;passable&nbsp;examples&nbsp;that&nbsp;still&nbsp;abort&nbsp;in&nbsp;Mono&nbsp;<br>
&lt;a&nbsp;href=&quot;http://1.1.13.6&quot;&gt;1.1.13.6&lt;/a&gt;.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;D:\tmp\cs&amp;gt;peverify&nbsp;sample.exe&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;Microsoft&nbsp;(R)&nbsp;.NET&nbsp;Framework&nbsp;PE&nbsp;Verifier&amp;nbsp;&nbsp;Version&nbsp;1.1.4322.573&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
Copyright&nbsp;(C)&nbsp;Microsoft&nbsp;Corporation&nbsp;1998-2002.&nbsp;All&nbsp;rights&nbsp;reserved.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;All&nbsp;Classes&nbsp;and&nbsp;Methods&nbsp;in&nbsp;<br>
sample.exe&nbsp;Verified&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;D:\tmp\cs&amp;gt;peverify&nbsp;sample2.exe&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;Microsoft&nbsp;(R)&nbsp;.NET&nbsp;Framework&nbsp;PE&nbsp;Verifier&amp;nbsp;&nbsp;Version&nbsp;1.1.4322.573&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
Copyright&nbsp;(C)&nbsp;Microsoft&nbsp;Corporation&nbsp;1998-2002.&nbsp;All&nbsp;rights&nbsp;reserved.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;All&nbsp;Classes&nbsp;and&nbsp;Methods&nbsp;in&nbsp;<br>
sample2.exe&nbsp;Verified&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;D:\tmp\cs&amp;gt;sample.exe&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;Start&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;Finally1&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;Finally2&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;D:\tmp\cs&amp;gt;<br>
sample2.exe&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;Start&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
Finally1&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;In&nbsp;Mono&nbsp;the&nbsp;following&nbsp;happens&nbsp;(same&nbsp;as&nbsp;with&nbsp;the&nbsp;original&nbsp;example):&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;$&nbsp;mono&nbsp;sample2.exe<br>
&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;**&nbsp;ERROR&nbsp;**:&nbsp;file&nbsp;mini.c:&nbsp;line&nbsp;9517&nbsp;(mini_method_compile):&nbsp;assertion&nbsp;failed:&nbsp;(tblock-&amp;gt;native_offset)<br>
&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;aborting...&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
Aborted&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&gt;$&nbsp;mono&nbsp;sample.exe&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;**&nbsp;ERROR&nbsp;**:&nbsp;file&nbsp;mini.c:&nbsp;line&nbsp;9517&nbsp;(mini_method_compile):&nbsp;assertion&nbsp;failed:&nbsp;(tblock-&amp;gt;native_offset)&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
aborting...&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;Aborted&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;I&nbsp;have&nbsp;attached&nbsp;two&nbsp;CIL&nbsp;assembly&nbsp;source&nbsp;files&nbsp;that&nbsp;compile&nbsp;to&nbsp;the&nbsp;examples&nbsp;used&nbsp;above.&amp;nbsp;&nbsp;They&nbsp;pass&nbsp;PEVerify&nbsp;and&nbsp;abort&nbsp;in&nbsp;Mono--I&nbsp;believe&nbsp;these&nbsp;two&nbsp;examples&nbsp;are&nbsp;compliant&nbsp;to&nbsp;the&nbsp;ECMA-335&nbsp;specification.<br>
&lt;br&gt;&lt;br&gt;Best&nbsp;regards,&lt;br&gt;Almann&lt;br&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Almann&nbsp;T.&nbsp;Goo&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:almann.goo@gmail.com&quot;&gt;almann.goo@gmail.com&lt;/a&gt;<br>

</tt>
