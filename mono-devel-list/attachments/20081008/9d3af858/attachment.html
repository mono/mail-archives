<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Mark,&lt;br&gt;&lt;br&gt;@@&nbsp;-1991,7&nbsp;+1990,7&nbsp;@@&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;iter&nbsp;=&nbsp;NULL;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;j&nbsp;=&nbsp;0;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;((cm&nbsp;=&nbsp;mono_class_get_methods&nbsp;(interf,&nbsp;&amp;amp;iter)))&lt;br&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pvt-&amp;gt;vtable&nbsp;[slot&nbsp;+&nbsp;j++]&nbsp;=&nbsp;mono_method_signature&nbsp;(cm)-&amp;gt;generic_param_count&nbsp;?&nbsp;cm&nbsp;:&nbsp;arch_create_remoting_trampoline&nbsp;(cm,&nbsp;target_type);&lt;br&gt;<br>
<br>
+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pvt-&amp;gt;vtable&nbsp;[slot&nbsp;+&nbsp;j++]&nbsp;=&nbsp;mono_method_signature&nbsp;(cm)-&amp;gt;generic_param_count&nbsp;?&nbsp;cm&nbsp;:&nbsp;arch_create_remoting_trampoline&nbsp;(domain,&nbsp;cm,&nbsp;target_type);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;slot&nbsp;+=&nbsp;mono_class_num_methods&nbsp;(interf);&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&lt;br&gt;Why&nbsp;this&nbsp;part&nbsp;of&nbsp;the&nbsp;vtable&nbsp;doesn&amp;#39;t&nbsp;receive&nbsp;a&nbsp;remoting&nbsp;wrapper?&lt;br&gt;&lt;br&gt;These&nbsp;checks&nbsp;were&nbsp;added&nbsp;by&nbsp;Robert&nbsp;Jordan&nbsp;in&nbsp;r85526&nbsp;to&nbsp;fix&nbsp;&lt;a&nbsp;href=&quot;https://bugzilla.novell.com/show_bug.cgi?id=MONO78882&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bugzilla.novell.com/show_bug.cgi?id=MONO78882&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;Looks&nbsp;like&nbsp;your&nbsp;patch&nbsp;reverts&nbsp;Robert&amp;#39;s&nbsp;changes&nbsp;and&nbsp;use&nbsp;a&nbsp;new&nbsp;trampoline&nbsp;instead,&nbsp;thou&nbsp;there&nbsp;are&nbsp;other&nbsp;changes&nbsp;in&nbsp;object.c&nbsp;that&nbsp;haven&amp;#39;t&nbsp;been&nbsp;changed&nbsp;back&nbsp;and&nbsp;seen&nbsp;related&nbsp;to&nbsp;virtual&nbsp;generic&nbsp;methods.&lt;br&gt;&lt;br&gt;Cheers,&lt;br&gt;<br>
Rodrigo&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2008/10/8&nbsp;Mark&nbsp;Probst&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mark.probst@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mark.probst@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;attached&nbsp;patch&nbsp;fixes&nbsp;the&nbsp;Remoting&nbsp;regressions&nbsp;that&nbsp;were&nbsp;caused&nbsp;by&lt;br&gt;<br>
the&nbsp;fast&nbsp;generic&nbsp;virtual&nbsp;method&nbsp;invoking&nbsp;code.&nbsp;&amp;nbsp;The&nbsp;problem&nbsp;is&nbsp;that&lt;br&gt;<br>
remoting&nbsp;methods&nbsp;need&nbsp;a&nbsp;remoting&nbsp;wrapper,&nbsp;but&nbsp;invoking&nbsp;a&nbsp;generic&nbsp;method&lt;br&gt;<br>
via&nbsp;the&nbsp;vtable&nbsp;cannot&nbsp;provide&nbsp;that&nbsp;wrapper,&nbsp;so&nbsp;I&nbsp;added&nbsp;a&nbsp;new&nbsp;trampoline&lt;br&gt;<br>
type&nbsp;which&nbsp;does&nbsp;that.&lt;br&gt;<br>
&lt;br&gt;<br>
Paolo:&nbsp;Please&nbsp;review.&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Mark&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
