<tt>
Hey,&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;br&gt;In&nbsp;.NET&nbsp;2.0,&nbsp;Uri&nbsp;parsing&nbsp;has&nbsp;been&nbsp;moved&nbsp;to&nbsp;designated&nbsp;classes&nbsp;all&nbsp;derived&nbsp;from&nbsp;UriParser.&nbsp;This&nbsp;makes&nbsp;it&nbsp;possible&nbsp;to&nbsp;have&nbsp;custom&nbsp;parsers&nbsp;for&nbsp;new&nbsp;Uri&nbsp;schemes.&nbsp;Currently&nbsp;mono&nbsp;doesn&amp;#39;t&nbsp;support&nbsp;this&nbsp;properly.&lt;br&gt;<br>
<br>
&lt;br&gt;What&nbsp;I&nbsp;think&nbsp;would&nbsp;be&nbsp;the&nbsp;best&nbsp;thing&nbsp;to&nbsp;do&nbsp;would&nbsp;be&nbsp;to&nbsp;change&nbsp;parsing&nbsp;under&nbsp;all&nbsp;profiles&nbsp;to&nbsp;use&nbsp;this&nbsp;new&nbsp;API.&nbsp;In&nbsp;the&nbsp;.NET&nbsp;1.1&nbsp;profile,&nbsp;we&amp;#39;d&nbsp;just&nbsp;mark&nbsp;these&nbsp;classes&nbsp;as&nbsp;internal,&nbsp;so&nbsp;this&nbsp;gives&nbsp;one&nbsp;codepath&nbsp;to&nbsp;maintain.&lt;br&gt;<br>
<br>
&lt;br&gt;In&nbsp;.NET&nbsp;1.1&nbsp;Uri.Parse&nbsp;()&nbsp;would&nbsp;would&nbsp;be&nbsp;replaced&nbsp;by&nbsp;calls&nbsp;to&nbsp;the&nbsp;new&nbsp;parser&nbsp;classes&nbsp;so&nbsp;that&nbsp;existing&nbsp;behaviour&nbsp;isn&amp;#39;t&nbsp;changed.&nbsp;Under&nbsp;.NET&nbsp;2.0,&nbsp;I&nbsp;believe&nbsp;an&nbsp;approach&nbsp;similar&nbsp;to&nbsp;what&nbsp;I&amp;#39;ve&nbsp;prototyped&nbsp;in&nbsp;the&nbsp;attached&nbsp;patch&nbsp;should&nbsp;be&nbsp;what&nbsp;is&nbsp;implemented.&nbsp;Basically&nbsp;each&nbsp;of&nbsp;the&nbsp;properties&nbsp;of&nbsp;Uri&nbsp;will&nbsp;call&nbsp;into&nbsp;the&nbsp;parser&nbsp;to&nbsp;get&nbsp;the&nbsp;required&nbsp;component.&nbsp;The&nbsp;results&nbsp;of&nbsp;this&nbsp;call&nbsp;could&nbsp;be&nbsp;cached&nbsp;locally&nbsp;for&nbsp;increased&nbsp;performance.&lt;br&gt;<br>
<br>
&lt;br&gt;The&nbsp;other&nbsp;benefit&nbsp;is&nbsp;that&nbsp;it&nbsp;should&nbsp;also&nbsp;reduce&nbsp;the&nbsp;shotgun&nbsp;approach&nbsp;to&nbsp;parsing,&nbsp;i.e.&nbsp;the&nbsp;special&nbsp;casing&nbsp;in&nbsp;the&nbsp;parse&nbsp;logic&nbsp;for&nbsp;different&nbsp;schemes.&nbsp;This&nbsp;might&nbsp;make&nbsp;things&nbsp;more&nbsp;maintainable.&lt;br&gt;&lt;br&gt;An&nbsp;example&nbsp;parser&nbsp;is&nbsp;also&nbsp;attached&nbsp;in&nbsp;Test.cs&nbsp;and&nbsp;is&nbsp;implemented&nbsp;as&nbsp;a&nbsp;console&nbsp;app.&nbsp;If&nbsp;you&nbsp;apply&nbsp;the&nbsp;above&nbsp;patch&nbsp;to&nbsp;mono,&nbsp;you&nbsp;can&nbsp;parse&nbsp;the&nbsp;&amp;quot;pack&amp;quot;&nbsp;schema.&nbsp;Note,&nbsp;the&nbsp;patch&nbsp;*will*&nbsp;break&nbsp;all&nbsp;other&nbsp;Uri&nbsp;parsing&nbsp;as&nbsp;i&nbsp;hardcoded&nbsp;a&nbsp;&amp;quot;pack&amp;quot;&nbsp;parser.&lt;br&gt;<br>
<br>
&lt;br&gt;Does&nbsp;anyone&nbsp;have&nbsp;any&nbsp;thoughts&nbsp;on&nbsp;this?&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;Alan.&lt;br&gt;<br>
&lt;/font&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
