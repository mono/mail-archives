<tt>
Hello&nbsp;John,&lt;br&gt;&lt;br&gt;This&nbsp;patch&nbsp;looks&nbsp;okay&nbsp;to&nbsp;me.&nbsp;Can&nbsp;you&nbsp;add&nbsp;the&nbsp;test&nbsp;case&nbsp;as&nbsp;well&nbsp;to&nbsp;this&nbsp;patch&nbsp;?&lt;br&gt;&lt;br&gt;Thanks&lt;br&gt;Nagappan&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Sep&nbsp;14,&nbsp;2009&nbsp;at&nbsp;12:48&nbsp;PM,&nbsp;John&nbsp;Lenz&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:jlenz2@math.uiuc.edu&quot;&gt;jlenz2@math.uiuc.edu&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;This&nbsp;patch&nbsp;allows&nbsp;typed&nbsp;datasets&nbsp;produced&nbsp;by&nbsp;Microsoft&amp;#39;s&nbsp;xsd.exe&nbsp;to&nbsp;work&lt;br&gt;<br>
correctly&nbsp;in&nbsp;mono.&nbsp; With&nbsp;this&nbsp;patch,&nbsp;I&nbsp;can&nbsp;serialize&nbsp;or&nbsp;deserialize&nbsp;the&lt;br&gt;<br>
classes&nbsp;in&nbsp;the&nbsp;mono&nbsp;runtime&nbsp;and&nbsp;even&nbsp;communicate&nbsp;over&lt;br&gt;<br>
the&nbsp;network&nbsp;where&nbsp;for&nbsp;example&nbsp;the&nbsp;client&nbsp;is&nbsp;running&nbsp;on&nbsp;mono&nbsp;and&nbsp;the&lt;br&gt;<br>
server&nbsp;is&nbsp;running&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://MS.NET&quot;&nbsp;target=&quot;_blank&quot;&gt;MS.NET&lt;/a&gt;.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;only&nbsp;tested&nbsp;the&nbsp;XML&nbsp;serialization,&nbsp;I&nbsp;have&nbsp;not&nbsp;tested&nbsp;the&nbsp;binary&lt;br&gt;<br>
serialization.&nbsp; Thus&nbsp;my&nbsp;patch&nbsp;makes&nbsp;no&nbsp;changes&nbsp;to&nbsp;the&nbsp;code&nbsp;paths&lt;br&gt;<br>
for&nbsp;binary&nbsp;serialization,&nbsp;but&nbsp;I&nbsp;suspect&nbsp;it&nbsp;actually&nbsp;fixes&nbsp;bug&nbsp;#427769&lt;br&gt;<br>
because&nbsp;of&nbsp;the&nbsp;added&nbsp;call&nbsp;to&nbsp;InitializeDerivedDataSet&nbsp;in&nbsp;the&nbsp;constructor.&lt;br&gt;<br>
&lt;br&gt;<br>
Since&nbsp;these&nbsp;functions&nbsp;are&nbsp;undocumented,&nbsp;here&nbsp;is&nbsp;how&nbsp;I&nbsp;found&nbsp;out&nbsp;how&nbsp;they&lt;br&gt;<br>
should&nbsp;work:&nbsp; I&nbsp;looked&nbsp;at&nbsp;the&nbsp;code&nbsp;produced&nbsp;by&nbsp;xsd.exe&nbsp;and&nbsp;mono&amp;#39;s&lt;br&gt;<br>
implementation&nbsp;of&nbsp;the&nbsp;DataSet&nbsp;class.&nbsp; Several&nbsp;things&nbsp;did&nbsp;not&nbsp;make&nbsp;sense&lt;br&gt;<br>
until&nbsp;I&nbsp;made&nbsp;the&nbsp;changes&nbsp;below.&nbsp; All&nbsp;are&nbsp;really&nbsp;obvious&nbsp;if&nbsp;you&nbsp;see&nbsp;what&lt;br&gt;<br>
the&nbsp;xsd.exe&nbsp;produced&nbsp;code&nbsp;is&nbsp;expecting.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;also&nbsp;ran&nbsp;a&nbsp;test&nbsp;server&nbsp;on&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://MS.NET&quot;&nbsp;target=&quot;_blank&quot;&gt;MS.NET&lt;/a&gt;&nbsp;runtime&nbsp;and&nbsp;a&nbsp;test&nbsp;client&nbsp;in&lt;br&gt;<br>
monodevelop&nbsp;on&nbsp;the&nbsp;mono&nbsp;runtime.&nbsp; I&nbsp;stuck&nbsp;some&nbsp;breakpoints&nbsp;into&nbsp;the&lt;br&gt;<br>
client&nbsp;using&nbsp;monodevelop&nbsp;to&nbsp;see&nbsp;what&nbsp;the&nbsp;serialization&nbsp;format&nbsp;looked&nbsp;like.&lt;br&gt;<br>
&lt;br&gt;<br>
Here&nbsp;are&nbsp;the&nbsp;changes:&lt;br&gt;<br>
&lt;br&gt;<br>
1)&nbsp;The&nbsp;GetSerializationData()&nbsp;function&nbsp;should&nbsp;only&nbsp;load&nbsp;the&nbsp;data,&nbsp;not&lt;br&gt;<br>
the&nbsp;schema.&nbsp; This&nbsp;function&nbsp;is&nbsp;called&nbsp;by&nbsp;the&nbsp;derived&nbsp;dataset&nbsp;constructor&lt;br&gt;<br>
after&nbsp;it&nbsp;has&nbsp;loaded&nbsp;the&nbsp;schema.&nbsp; So&nbsp;I&nbsp;moved&nbsp;the&nbsp;schema&nbsp;loading&nbsp;code&nbsp;out&lt;br&gt;<br>
of&nbsp;GetSerializationData&nbsp;and&nbsp;into&nbsp;the&nbsp;constructor.&lt;br&gt;<br>
&lt;br&gt;<br>
2)&nbsp;We&nbsp;need&nbsp;to&nbsp;know&nbsp;the&nbsp;incoming&nbsp;serialization&nbsp;mode&nbsp;(Included&nbsp;or&nbsp;Excluded).&lt;br&gt;<br>
This&nbsp;is&nbsp;serialized&nbsp;in&nbsp;the&nbsp;&amp;quot;SchemaSerializationMode.DataSet&amp;quot;,&nbsp;which&nbsp;I&nbsp;found&lt;br&gt;<br>
using&nbsp;monodevelop&nbsp;to&nbsp;debug&nbsp;the&nbsp;client&nbsp;constructor.&nbsp; Fix&nbsp;the&lt;br&gt;<br>
DetermineSchemaSerializationMode&nbsp;function&nbsp;and&nbsp;add&nbsp;the&nbsp;parameter&nbsp;to&nbsp;the&lt;br&gt;<br>
serialization&nbsp;code.&lt;br&gt;<br>
&lt;br&gt;<br>
3)&nbsp;Implement&nbsp;the&nbsp;DataSet(SerializationInfo,&nbsp;StreamingContext,&nbsp;bool)&lt;br&gt;<br>
constructor.&nbsp; Basically,&nbsp;if&nbsp;the&nbsp;schema&nbsp;is&nbsp;excluded&nbsp;we&nbsp;call&lt;br&gt;<br>
InitializeDerivedDataSet&nbsp;to&nbsp;create&nbsp;it.&nbsp; This&nbsp;is&nbsp;really&nbsp;weird&nbsp;and&lt;br&gt;<br>
I&nbsp;have&nbsp;no&nbsp;idea&nbsp;why&nbsp;the&nbsp;derived&nbsp;class&nbsp;does&nbsp;not&nbsp;call&nbsp;it&nbsp;directly.&lt;br&gt;<br>
But&nbsp;the&nbsp;xsd.exe&nbsp;generated&nbsp;code&nbsp;expects&nbsp;it&nbsp;is&nbsp;called&nbsp;from&nbsp;the&lt;br&gt;<br>
constructor.&nbsp; The&nbsp;InitializeDerivedDataSet&lt;br&gt;<br>
function&nbsp;in&nbsp;the&nbsp;base&nbsp;class&nbsp;should&nbsp;do&nbsp;nothing,&nbsp;it&nbsp;is&nbsp;overridden&nbsp;in&nbsp;each&lt;br&gt;<br>
typed&nbsp;dataset.&lt;br&gt;<br>
&lt;br&gt;<br>
Index:&nbsp;class/System.Data/System.Data/DataSet.cs&lt;br&gt;<br>
===================================================================&lt;br&gt;<br>
---&nbsp;class/System.Data/System.Data/DataSet.cs&nbsp; &nbsp; (revision&nbsp;141910)&lt;br&gt;<br>
+++&nbsp;class/System.Data/System.Data/DataSet.cs&nbsp; &nbsp; (working&nbsp;copy)&lt;br&gt;<br>
@@&nbsp;-95,6&nbsp;+95,17&nbsp;@@&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; protected&nbsp;DataSet&nbsp;(SerializationInfo&nbsp;info,&nbsp;StreamingContext&nbsp;context)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :&nbsp;this&nbsp;()&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
+#if&nbsp;NET_2_0&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(IsBinarySerialized&nbsp;(info,&nbsp;context))&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BinaryDeserialize&nbsp;(info);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
+#endif&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;string&nbsp;s&nbsp;=&nbsp;info.GetValue&nbsp;(&amp;quot;XmlSchema&amp;quot;,&nbsp;typeof&nbsp;(String))&nbsp;as&nbsp;String;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;XmlTextReader&nbsp;reader&nbsp;=&nbsp;new&nbsp;XmlTextReader&nbsp;(new&nbsp;StringReader&nbsp;(s));&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ReadXmlSchema&nbsp;(reader);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;reader.Close&nbsp;();&lt;br&gt;<br>
+&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GetSerializationData&nbsp;(info,&nbsp;context);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&lt;br&gt;<br>
@@&nbsp;-1132,6&nbsp;+1143,9&nbsp;@@&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; #if&nbsp;NET_2_0&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;(RemotingFormat&nbsp;==&nbsp;SerializationFormat.Xml)&nbsp;{&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;info.AddValue&nbsp;(&amp;quot;SchemaSerializationMode.DataSet&amp;quot;,&nbsp;this.SchemaSerializationMode);&lt;br&gt;<br>
+&lt;br&gt;<br>
&nbsp; #endif&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StringWriter&nbsp;sw&nbsp;=&nbsp;new&nbsp;StringWriter&nbsp;();&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; XmlTextWriter&nbsp;writer&nbsp;=&nbsp;new&nbsp;XmlTextWriter&nbsp;(sw);&lt;br&gt;<br>
@@&nbsp;-1155,19&nbsp;+1169,8&nbsp;@@&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #region&nbsp;Protected&nbsp;Methods&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; protected&nbsp;void&nbsp;GetSerializationData&nbsp;(SerializationInfo&nbsp;info,&nbsp;StreamingContext&nbsp;context)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
-#if&nbsp;NET_2_0&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(IsBinarySerialized&nbsp;(info,&nbsp;context))&nbsp;{&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BinaryDeserialize&nbsp;(info);&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return;&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
-#endif&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;string&nbsp;s&nbsp;=&nbsp;info.GetValue&nbsp;(&amp;quot;XmlSchema&amp;quot;,&nbsp;typeof&nbsp;(String))&nbsp;as&nbsp;String;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;string&nbsp;s&nbsp;=&nbsp;info.GetValue&nbsp;(&amp;quot;XmlDiffGram&amp;quot;,&nbsp;typeof&nbsp;(String))&nbsp;as&nbsp;String;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; XmlTextReader&nbsp;reader&nbsp;=&nbsp;new&nbsp;XmlTextReader&nbsp;(new&nbsp;StringReader&nbsp;(s));&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ReadXmlSchema&nbsp;(reader);&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;reader.Close&nbsp;();&lt;br&gt;<br>
-&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;s&nbsp;=&nbsp;info.GetValue&nbsp;(&amp;quot;XmlDiffGram&amp;quot;,&nbsp;typeof&nbsp;(String))&nbsp;as&nbsp;String;&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;reader&nbsp;=&nbsp;new&nbsp;XmlTextReader&nbsp;(new&nbsp;StringReader&nbsp;(s));&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ReadXml&nbsp;(reader,&nbsp;XmlReadMode.DiffGram);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.Close&nbsp;();&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
@@&nbsp;-1547,10&nbsp;+1550,26&nbsp;@@&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; private&nbsp;bool&nbsp;dataSetInitialized&nbsp;=&nbsp;true;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public&nbsp;event&nbsp;EventHandler&nbsp;Initialized;&lt;br&gt;<br>
&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[MonoTODO]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; protected&nbsp;DataSet&nbsp;(SerializationInfo&nbsp;info,&nbsp;StreamingContext&nbsp;context,&nbsp;bool&nbsp;constructSchema)&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:&nbsp;this&nbsp;(info,&nbsp;context)&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:&nbsp;this&nbsp;()&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(DetermineSchemaSerializationMode&nbsp;(info,&nbsp;context)&nbsp;==&nbsp;SchemaSerializationMode.ExcludeSchema)&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;InitializeDerivedDataSet&nbsp;();&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(IsBinarySerialized&nbsp;(info,&nbsp;context))&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BinaryDeserialize&nbsp;(info);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(constructSchema)&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;string&nbsp;s&nbsp;=&nbsp;info.GetValue&nbsp;(&amp;quot;XmlSchema&amp;quot;,&nbsp;typeof&nbsp;(String))&nbsp;as&nbsp;String;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;XmlTextReader&nbsp;reader&nbsp;=&nbsp;new&nbsp;XmlTextReader&nbsp;(new&nbsp;StringReader&nbsp;(s));&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ReadXmlSchema&nbsp;(reader);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;reader.Close&nbsp;();&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;GetSerializationData&nbsp;(info,&nbsp;context);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SerializationFormat&nbsp;remotingFormat&nbsp;=&nbsp;SerializationFormat.Xml;&lt;br&gt;<br>
@@&nbsp;-1751,10&nbsp;+1770,8&nbsp;@@&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OnDataSetInitialized&nbsp;(e);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[MonoTODO]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; protected&nbsp;virtual&nbsp;void&nbsp;InitializeDerivedDataSet&nbsp;()&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;throw&nbsp;new&nbsp;NotImplementedException&nbsp;();&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; protected&nbsp;SchemaSerializationMode&nbsp;DetermineSchemaSerializationMode&nbsp;(XmlReader&nbsp;reader)&lt;br&gt;<br>
@@&nbsp;-1764,6&nbsp;+1781,13&nbsp;@@&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; protected&nbsp;SchemaSerializationMode&nbsp;DetermineSchemaSerializationMode&nbsp;(SerializationInfo&nbsp;info,&nbsp;StreamingContext&nbsp;context)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SerializationInfoEnumerator&nbsp;e&nbsp;=&nbsp;info.GetEnumerator&nbsp;();&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;while&nbsp;(e.MoveNext&nbsp;())&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(e.Name&nbsp;==&nbsp;&amp;quot;SchemaSerializationMode.DataSet&amp;quot;)&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;(SchemaSerializationMode)&nbsp;e.Value;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
+&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;SchemaSerializationMode.IncludeSchema;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Linux&nbsp;Desktop&nbsp;(GUI&nbsp;Application)&nbsp;Testing&nbsp;Project&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://ldtp.freedesktop.org&quot;&gt;http://ldtp.freedesktop.org&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://nagappanal.blogspot.com&quot;&gt;http://nagappanal.blogspot.com&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>

</tt>
