using System;
using System.Diagnostics;

namespace test
{	
	class MainClass
	{
		public static void Main(string[] args)
		{
			Stopwatch sw = new Stopwatch();
			Console.WriteLine("1 billion calls each");
			Console.WriteLine("Action\t\t\tobject\t\t\tMarschalByRefObject");
			_object a = new _object();
			_marshal b = new _marshal();
			double d;
			sw.Start();
			for(int i = 0; i < 1000000000; i++) {
				_object._3();
			}
			sw.Stop();
			d = sw.Elapsed.TotalMilliseconds;
			sw.Reset();
			sw.Start();
			for(int i = 0; i < 1000000000; i++) {
				_marshal._3();
			}
			sw.Stop();
			Console.WriteLine("static call\t\t{0}ms\t\t{1}ms", d, sw.Elapsed.TotalMilliseconds);
			sw.Reset();
			
			sw.Start();
			for(int i = 0; i < 1000000000; i++) {
				a._1();
			}
			sw.Stop();
			d = sw.Elapsed.TotalMilliseconds;
			sw.Reset();
			sw.Start();
			for(int i = 0; i < 1000000000; i++) {
				b._1();
			}
			sw.Stop();
			Console.WriteLine("instance call\t\t{0}ms\t\t{1}ms", d, sw.Elapsed.TotalMilliseconds);
			sw.Reset();
			
			sw.Start();
			for(int i = 0; i < 1000000000; i++) {
				a._2();
			}
			sw.Stop();
			d = sw.Elapsed.TotalMilliseconds;
			sw.Reset();
			sw.Start();
			for(int i = 0; i < 1000000000; i++) {
				b._2();
			}
			sw.Stop();
			Console.WriteLine("virtual call\t\t{0}ms\t\t{1}ms", d, sw.Elapsed.TotalMilliseconds);
		}
		
		class _object {
			public void _1(){}
			public virtual void _2(){}
			public static void _3(){}
		}
		
		class _marshal:MarshalByRefObject {
			public void _1(){}
			public virtual void _2(){}
			public static void _3(){}
		}
	}
}