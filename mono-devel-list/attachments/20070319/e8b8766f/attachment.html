<tt>
Andreas,&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;3/18/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Andreas&nbsp;Lagemann&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ae@informatik.tu-cottbus.de&quot;&gt;ae@informatik.tu-cottbus.de&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&lt;br&gt;Hash:&nbsp;SHA1&lt;br&gt;&lt;br&gt;Hi&nbsp;Jonathan,&lt;br&gt;Thanks&nbsp;for&nbsp;the&nbsp;prompt&nbsp;answer!&lt;br&gt;I&nbsp;played&nbsp;a&nbsp;little&nbsp;with&nbsp;your&nbsp;advice&nbsp;and&nbsp;did&nbsp;work&nbsp;it&nbsp;out.&nbsp;:)&lt;br&gt;Jonathan&nbsp;Chambers&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;Hi&nbsp;Andreas,&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;It&nbsp;sounds&nbsp;like&nbsp;what&nbsp;you&nbsp;are&nbsp;doing&nbsp;is&nbsp;embedding&nbsp;mono.&nbsp;Did&nbsp;you&nbsp;see<br>
&lt;br&gt;&amp;gt;&nbsp;this&nbsp;page&nbsp;on&nbsp;the&nbsp;wiki&nbsp;(&lt;a&nbsp;href=&quot;http://www.mono-project.com/Embedding_Mono&quot;&gt;http://www.mono-project.com/Embedding_Mono&lt;/a&gt;)?&nbsp;To&lt;br&gt;&amp;gt;&nbsp;answer&nbsp;your&nbsp;#2&nbsp;question,&nbsp;I&nbsp;think&nbsp;you&nbsp;want&nbsp;your&nbsp;menthod&nbsp;to&nbsp;be&nbsp;an&nbsp;internal&lt;br&gt;<br>
&amp;gt;&nbsp;call,&nbsp;rather&nbsp;than&nbsp;a&nbsp;pinvoke.&nbsp;Internal&nbsp;calls&nbsp;do&nbsp;no&nbsp;marshalling,&nbsp;so&nbsp;you&lt;br&gt;&amp;gt;&nbsp;will&nbsp;be&nbsp;able&nbsp;to&nbsp;return&nbsp;an&nbsp;object&nbsp;directly.&nbsp;See&nbsp;the&nbsp;samples&nbsp;that&nbsp;ship&lt;br&gt;&amp;gt;&nbsp;with&nbsp;mono,&nbsp;or&nbsp;this&nbsp;part&nbsp;of&nbsp;the&nbsp;link&nbsp;above&nbsp;(&lt;br&gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.mono-project.com/Embedding_Mono#Exposing_C_code_to_the_CIL_universe&quot;&gt;<br>
http://www.mono-project.com/Embedding_Mono#Exposing_C_code_to_the_CIL_universe&lt;/a&gt;).&lt;br&gt;&amp;gt;&lt;br&gt;I&nbsp;did&nbsp;read&nbsp;that,&nbsp;but&nbsp;I&nbsp;didn&amp;#39;t&nbsp;consider&nbsp;internal&nbsp;calls&nbsp;as&nbsp;a&nbsp;solution&lt;br&gt;-&nbsp;--&nbsp;don&amp;#39;t&nbsp;know&nbsp;why!!&lt;br&gt;&amp;gt;&nbsp;So,&nbsp;quickly&nbsp;it&nbsp;will&nbsp;look&nbsp;something&nbsp;like...<br>
&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;C#:&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;[MethodImplAttribute(MethodImplOptions.InternalCall)]&lt;br&gt;&amp;gt;&nbsp;public&nbsp;static&nbsp;extern&nbsp;object&nbsp;getPeerObjectOf(HandleRef&nbsp;jarg1);&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;And&nbsp;your&nbsp;C++&nbsp;will&nbsp;almost&nbsp;stay&nbsp;the&nbsp;same;&nbsp;I&amp;#39;m&nbsp;not&nbsp;sure&nbsp;but&nbsp;you&nbsp;may&nbsp;need&nbsp;to<br>
&lt;br&gt;&amp;gt;&nbsp;adjust&nbsp;your&nbsp;use&nbsp;of&nbsp;HandleRef&nbsp;since&nbsp;it&nbsp;will&nbsp;no&nbsp;longer&nbsp;be&nbsp;marshalled&nbsp;like&lt;br&gt;&amp;gt;&nbsp;a&nbsp;pinvoke,&nbsp;so&nbsp;you&amp;#39;ll&nbsp;be&nbsp;getting&nbsp;a&nbsp;real&nbsp;HandleRef&nbsp;structure.&lt;br&gt;&amp;gt;&lt;br&gt;It&nbsp;worked&nbsp;by&nbsp;passing&nbsp;an&nbsp;IntPtr&nbsp;instead&nbsp;of&nbsp;HandleRef&nbsp;and&nbsp;making&nbsp;obj<br>
&lt;br&gt;void*&nbsp;in&nbsp;the&nbsp;C++&nbsp;code.&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;Also,&nbsp;don&amp;#39;t&nbsp;forget&nbsp;if&nbsp;you&nbsp;make&nbsp;the&nbsp;method&nbsp;an&nbsp;instance&nbsp;method&nbsp;rather&nbsp;than&lt;br&gt;&amp;gt;&nbsp;static,&nbsp;the&nbsp;C&nbsp;code&nbsp;needs&nbsp;&amp;quot;MonoObject*&nbsp;this_ptr&amp;quot;&nbsp;as&nbsp;the&nbsp;first&nbsp;argument.&lt;br&gt;&amp;gt;&lt;br&gt;Does&nbsp;that&nbsp;mean&nbsp;that&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;use&nbsp;a<br>
&lt;br&gt;pointer-to-memberfunction&nbsp;as&nbsp;internal&nbsp;call?&nbsp;I&nbsp;thought&nbsp;it&nbsp;had&nbsp;to&nbsp;be&lt;br&gt;pure&nbsp;C&nbsp;function&nbsp;calls!&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;No,&nbsp;it&nbsp;has&nbsp;to&nbsp;be&nbsp;a&nbsp;C&nbsp;function&nbsp;call.&nbsp;I&nbsp;was&nbsp;saying&nbsp;you&nbsp;can&nbsp;make&nbsp;C#&amp;nbsp;&nbsp;instance&nbsp;methods&nbsp;internal&nbsp;calls,&nbsp;as&nbsp;well&nbsp;as&nbsp;static&nbsp;methods.&nbsp;It&amp;#39;s&nbsp;just&nbsp;that&nbsp;you&nbsp;need&nbsp;to&nbsp;remember&nbsp;to&nbsp;add&nbsp;a&nbsp;MonoObject*&nbsp;argument&nbsp;as&nbsp;the&nbsp;first&nbsp;parameter&nbsp;of&nbsp;your&nbsp;C&nbsp;function&nbsp;in&nbsp;that&nbsp;case.<br>
&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;Thanks&nbsp;again&nbsp;for&nbsp;your&nbsp;help,&lt;br&gt;Andreas&lt;br&gt;-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;Version:&nbsp;GnuPG&nbsp;<br>
v1.4.2.2&nbsp;(GNU/Linux)&lt;br&gt;Comment:&nbsp;Using&nbsp;GnuPG&nbsp;with&nbsp;Mozilla&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://enigmail.mozdev.org&quot;&gt;http://enigmail.mozdev.org&lt;/a&gt;&lt;br&gt;&lt;br&gt;iD8DBQFF/ZBWNfV8qlW7iaERAjnUAJ9niR4K+OyiytMNtiU+NOmUdMt84ACfc7LX&lt;br&gt;AQ/R1ZcSiChwphNSX6dpqSg=<br>
&lt;br&gt;=IwNN&lt;br&gt;-----END&nbsp;PGP&nbsp;SIGNATURE-----&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Thanks,&lt;br&gt;Jonathan&nbsp;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
