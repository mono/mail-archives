<tt>
&lt;html&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:12pt&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;a&nbsp;href=&quot;https://github.com/mono/mono/commit/38bdbad5071487a11f4330077c383375dce39840&quot;&gt;https://github.com/mono/mono/commit/38bdbad5071487a11f4330077c383375dce39840&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;This&nbsp;change&nbsp;introduced&nbsp;a&nbsp;OneIdlePerThread&nbsp;unit&nbsp;test&nbsp;that&nbsp;has&nbsp;never&nbsp;worked&nbsp;for&nbsp;me.&nbsp;&nbsp;All&nbsp;I&nbsp;get&nbsp;is&nbsp;the&nbsp;following&nbsp;exception:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif&quot;&gt;System.InvalidOperationException&nbsp;:&nbsp;Cannot&nbsp;call&nbsp;Invoke&nbsp;or&nbsp;BeginInvoke&nbsp;on&nbsp;a&nbsp;control&nbsp;until&nbsp;the&nbsp;window<br>
&nbsp;handle&nbsp;is&nbsp;created&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;Patch&nbsp;#18&nbsp;fixes&nbsp;that&nbsp;by&nbsp;creating&nbsp;a&nbsp;Form&nbsp;type&nbsp;that&nbsp;calls&nbsp;CreateHandle()&nbsp;in&nbsp;its&nbsp;constructor.&nbsp;&nbsp;But&nbsp;now&nbsp;the&nbsp;unit&nbsp;test&nbsp;hangs&nbsp;hard&nbsp;in&nbsp;Mono!&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;I&nbsp;created&nbsp;a&nbsp;project&nbsp;with&nbsp;the&nbsp;unit-test,&nbsp;and&nbsp;when&nbsp;run&nbsp;in&nbsp;Mono,&nbsp;it&nbsp;hangs&nbsp;hard;&nbsp;selecting&nbsp;&quot;Run&nbsp;-&gt;&nbsp;Pause&quot;&nbsp;in&nbsp;MonoDevelop&nbsp;hangs&nbsp;MonoDevelop,&nbsp;and&nbsp;the&nbsp;debugged&nbsp;process&nbsp;chews&nbsp;up&nbsp;100%&nbsp;of&nbsp;the&nbsp;CPU&nbsp;time&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;I&nbsp;ran&nbsp;the&nbsp;project&nbsp;in&nbsp;.NET,<br>
&nbsp;and&nbsp;instead&nbsp;of&nbsp;a&nbsp;hang,&nbsp;I&nbsp;get&nbsp;this&nbsp;exception:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;System.InvalidOperationException:&nbsp;Cross-threaded&nbsp;operation&nbsp;not&nbsp;valid:&nbsp;Control&nbsp;''&nbsp;accessed&nbsp;from&nbsp;a&nbsp;thread&nbsp;other&nbsp;than&nbsp;the&nbsp;thread&nbsp;it&nbsp;was&nbsp;created&nbsp;on.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;Patch&nbsp;#18a&nbsp;fixes&nbsp;that&nbsp;by&nbsp;moving&nbsp;the&nbsp;creation&nbsp;of&nbsp;form2&nbsp;into&nbsp;the&nbsp;right&nbsp;thread.&nbsp;&nbsp;Now&nbsp;the&nbsp;unit&nbsp;test&nbsp;passes.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;So&nbsp;patch&nbsp;#18a&nbsp;can&nbsp;be&nbsp;checked&nbsp;in,&nbsp;but&nbsp;note&nbsp;that&nbsp;patch&nbsp;#18&nbsp;demonstrates&nbsp;that&nbsp;Mono&nbsp;hangs&nbsp;in<br>
&nbsp;a&nbsp;situation&nbsp;where&nbsp;.NET&nbsp;throws&nbsp;an&nbsp;exception.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;Steven&nbsp;Boswell&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
