<tt>
&lt;html&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:12pt&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;For&nbsp;a&nbsp;while&nbsp;now,&nbsp;I've&nbsp;noticed&nbsp;large&nbsp;incompatibilities&nbsp;between&nbsp;Mono's&nbsp;use&nbsp;of&nbsp;GetFocus/LostFocus&nbsp;events&nbsp;and&nbsp;.NET's.&nbsp;&nbsp;I&nbsp;decided&nbsp;to&nbsp;look&nbsp;into&nbsp;it&nbsp;this&nbsp;weekend...and&nbsp;just&nbsp;ended&nbsp;up&nbsp;with&nbsp;more&nbsp;questions.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;My&nbsp;test&nbsp;case&nbsp;is&nbsp;the&nbsp;search-form&nbsp;in&nbsp;our&nbsp;application;&nbsp;when&nbsp;the&nbsp;user&nbsp;double-clicks&nbsp;a&nbsp;search-result&nbsp;line,&nbsp;I&nbsp;bring-to-front&nbsp;the&nbsp;application&nbsp;window&nbsp;and&nbsp;then&nbsp;select&nbsp;the&nbsp;control&nbsp;containing&nbsp;the&nbsp;search-result.&nbsp;&nbsp;It&nbsp;appears&nbsp;that&nbsp;this&nbsp;doesn't&nbsp;lead&nbsp;to&nbsp;a&nbsp;GotFocus&nbsp;event&nbsp;on&nbsp;the&nbsp;TextBox!&nbsp;&nbsp;(I&nbsp;modified&nbsp;TextBox.cs&nbsp;so&nbsp;that&nbsp;its&nbsp;existing&nbsp;LostFocus&nbsp;event&nbsp;output&nbsp;to&nbsp;the<br>
&nbsp;console,&nbsp;and&nbsp;I&nbsp;added&nbsp;a&nbsp;GotFocus&nbsp;event-handler&nbsp;to&nbsp;do&nbsp;the&nbsp;same.)&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;Digging&nbsp;around,&nbsp;I&nbsp;came&nbsp;up&nbsp;with&nbsp;the&nbsp;enclosed&nbsp;patch&nbsp;as&nbsp;a&nbsp;proposed&nbsp;solution;&nbsp;it&nbsp;modified&nbsp;Control.Select()&nbsp;so&nbsp;that&nbsp;it&nbsp;looks&nbsp;like&nbsp;the&nbsp;Select()&nbsp;method&nbsp;near&nbsp;line&nbsp;1283.&nbsp;&nbsp;This&nbsp;led&nbsp;to&nbsp;the&nbsp;GotFocus&nbsp;event-handler&nbsp;getting&nbsp;called...followed&nbsp;by&nbsp;a&nbsp;small&nbsp;explosion&nbsp;of&nbsp;other&nbsp;WmSetFocus/WmKillFocus&nbsp;events&nbsp;that&nbsp;completely&nbsp;obliterated&nbsp;that.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;The&nbsp;worst&nbsp;part&nbsp;is...these&nbsp;events&nbsp;seem&nbsp;to&nbsp;be&nbsp;coming&nbsp;from&nbsp;the&nbsp;X&nbsp;server.&nbsp;&nbsp;In&nbsp;XplatUIX11.cs,&nbsp;around&nbsp;line&nbsp;7315,&nbsp;I&nbsp;modified&nbsp;XSendEvent()&nbsp;so&nbsp;that&nbsp;it&nbsp;looked&nbsp;like&nbsp;the&nbsp;one&nbsp;near&nbsp;line&nbsp;6544,&nbsp;i.e.&nbsp;so<br>
&nbsp;that&nbsp;I&nbsp;could&nbsp;put&nbsp;a&nbsp;breakpoint&nbsp;in&nbsp;it.&nbsp;&nbsp;That&nbsp;breakpoint&nbsp;wasn't&nbsp;hit&nbsp;during&nbsp;the&nbsp;explosion&nbsp;of&nbsp;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&nbsp;&quot;&gt;WmSetFocus/WmKillFocus&nbsp;events.&nbsp;&nbsp;So&nbsp;Mono&nbsp;isn't&nbsp;generating&nbsp;those&nbsp;events;&nbsp;my&nbsp;only&nbsp;guess&nbsp;is&nbsp;that&nbsp;the&nbsp;X&nbsp;server&nbsp;is.&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&nbsp;&quot;&gt;Here's&nbsp;the&nbsp;flow-of-control&nbsp;I&nbsp;managed&nbsp;to&nbsp;unearth&nbsp;with&nbsp;lots&nbsp;of&nbsp;stack-traces&nbsp;being&nbsp;dumped&nbsp;to&nbsp;the&nbsp;console:&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;font&nbsp;face=&quot;times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif&quot;&gt;&lt;div&gt;1)&nbsp;My&nbsp;text-box&nbsp;gets&nbsp;a&nbsp;GotFocus&nbsp;event,&nbsp;from&nbsp;my&nbsp;call&nbsp;to&nbsp;Control.Select().&lt;/div&gt;&lt;div&gt;2)&nbsp;My&nbsp;text-box&nbsp;gets&nbsp;a&nbsp;LostFocus&nbsp;event,&nbsp;from&nbsp;a<br>
&nbsp;WmKillFocus&nbsp;message&nbsp;generated&nbsp;by&nbsp;an&nbsp;X&nbsp;event.&lt;/div&gt;&lt;div&gt;3)&nbsp;My&nbsp;text-box&nbsp;gets&nbsp;a&nbsp;GotFocus&nbsp;event,&nbsp;from&nbsp;a&nbsp;WmSetFocus&nbsp;message&nbsp;generated&nbsp;by&nbsp;an&nbsp;X&nbsp;event.&lt;/div&gt;&lt;div&gt;4)&nbsp;There's&nbsp;a&nbsp;WmActivate&nbsp;event,&nbsp;apparently&nbsp;from&nbsp;an&nbsp;X&nbsp;event,&nbsp;but&nbsp;I&nbsp;don't&nbsp;know&nbsp;what's&nbsp;being&nbsp;activated&nbsp;--&nbsp;it&nbsp;doesn't&nbsp;hit&nbsp;any&nbsp;of&nbsp;my&nbsp;debug-output&nbsp;code.&lt;/div&gt;&lt;div&gt;5)&nbsp;There's&nbsp;another&nbsp;WmActivate&nbsp;event,&nbsp;apparently&nbsp;from&nbsp;an&nbsp;X&nbsp;event.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;It&nbsp;first&nbsp;deactivates&nbsp;my&nbsp;text-box,&nbsp;and&nbsp;activates&nbsp;&quot;hSplitContainer&quot;&nbsp;in&nbsp;my&nbsp;application's&nbsp;form.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;That&nbsp;leads&nbsp;to&nbsp;my&nbsp;text-box&nbsp;getting&nbsp;a&nbsp;LostFocus&nbsp;event.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;Then&nbsp;it&nbsp;deactivates&nbsp;&quot;vSplitContainer&quot;&nbsp;and&nbsp;activates&nbsp;&quot;vSplitContainer&quot;&nbsp;in&nbsp;container&nbsp;&quot;hSplitContainer&quot;...apparently&nbsp;3&nbsp;times&nbsp;in&nbsp;a&nbsp;row.&lt;/div&gt;&lt;div&gt;6)&nbsp;There's&nbsp;a&nbsp;WmActivate&nbsp;event,&nbsp;apparently&nbsp;from&nbsp;an&nbsp;X&nbsp;event,&nbsp;but&nbsp;I&nbsp;don't&nbsp;know&nbsp;what's&nbsp;being&nbsp;activated&nbsp;--&nbsp;it&nbsp;doesn't&nbsp;hit&nbsp;any&nbsp;of&nbsp;my&nbsp;debug-output&nbsp;code.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;really&nbsp;have&nbsp;no&nbsp;idea&nbsp;how&nbsp;to&nbsp;make&nbsp;heads&nbsp;or&nbsp;tails&nbsp;of<br>
&nbsp;this.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Does&nbsp;anyone&nbsp;know&nbsp;how&nbsp;focusing/unfocusing&nbsp;is&nbsp;SUPPOSED&nbsp;to&nbsp;work&nbsp;in&nbsp;Mono&nbsp;under&nbsp;X11?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Steven&nbsp;Boswell&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
