Index: SmtpClient.cs
===================================================================
--- SmtpClient.cs	(revision 78273)
+++ SmtpClient.cs	(working copy)
@@ -290,6 +290,12 @@
 			
 			// FIXME: parse the list of extensions so we don't bother wasting
 			// our time trying commands if they aren't supported.
+
+			// Assume that auth and starttls _is_ supported - should still parse
+			// but otherwise will throw
+			bool supportsAuth = true;
+			bool supportsStartTLS = true;
+
 			status = SendCommand ("EHLO " + Dns.GetHostName ());
 
 			if (IsError (status)) {
@@ -297,15 +303,18 @@
 				
 				if (IsError (status))
 					throw new SmtpException (status.StatusCode, status.Description);
+				// Auth and StartTLS is not supported by SMTP
+				supportsAuth = false;
+				supportsStartTLS = false;
 			}
 
-			if (EnableSsl) {
-				// FIXME: only attempt this if STARTTLS is supported
+			if (EnableSsl && supportsStartTLS) {
 				InitiateSecureConnection ();
 			}
 
-			// FIXME: only do this if AUTH is supported
-			PerformAuthentication ();
+			if (supportsAuth) {
+				PerformAuthentication ();
+			}
 
 			MailAddress from = message.From;
 
