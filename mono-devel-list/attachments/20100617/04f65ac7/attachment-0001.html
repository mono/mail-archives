<tt>
&lt;table&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&nbsp;border=&quot;0&quot;&nbsp;&gt;&lt;tr&gt;&lt;td&nbsp;valign=&quot;top&quot;&nbsp;style=&quot;font:&nbsp;inherit;&quot;&gt;&lt;div&nbsp;id=&quot;yiv959748061&quot;&gt;I&nbsp;have&nbsp;more&nbsp;to&nbsp;report.&lt;br&gt;&lt;br&gt;I&nbsp;wrote&nbsp;a&nbsp;quick&nbsp;native&nbsp;C&nbsp;program&nbsp;to&nbsp;print&nbsp;out&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;float&nbsp;and&nbsp;double&nbsp;variable&nbsp;that&nbsp;were&nbsp;assigned&nbsp;the&nbsp;literal&nbsp;value&nbsp;1.0f.&nbsp;&lt;br&gt;&lt;br&gt;Then&nbsp;in&nbsp;the&nbsp;mono&nbsp;2.6.4&nbsp;routine&nbsp;mono_method_to_ir&nbsp;in&nbsp;source&nbsp;code&nbsp;file&nbsp;mono/mini/method_to_ir.c&nbsp;I&nbsp;dumped&nbsp;out&nbsp;the&nbsp;bytes&nbsp;of&nbsp;ip&nbsp;(instruction&nbsp;pointer)&nbsp;used&nbsp;for&nbsp;the&nbsp;double&nbsp;value&nbsp;in&nbsp;the&nbsp;case&nbsp;for&nbsp;CEE_LDC_R8.&lt;br&gt;&lt;br&gt;I&nbsp;discovered&nbsp;that&nbsp;the&nbsp;bytes&nbsp;in&nbsp;the&nbsp;double&nbsp;value&nbsp;used&nbsp;on&nbsp;mono&nbsp;had&nbsp;the&nbsp;high&nbsp;and&nbsp;low&nbsp;32&nbsp;bits&nbsp;swapped&nbsp;compared&nbsp;to&nbsp;those&nbsp;produced&nbsp;by&nbsp;the&nbsp;native&nbsp;C&nbsp;program.&nbsp;I&nbsp;hacked&nbsp;the&nbsp;routine&nbsp;decompose_soft_float&nbsp;to&nbsp;swap&nbsp;the&nbsp;high&nbsp;and&nbsp;low&nbsp;words&nbsp;and&nbsp;now&nbsp;I&nbsp;have&nbsp;no&nbsp;troubles&nbsp;and&nbsp;the&nbsp;basic-float&nbsp;regression&nbsp;test&nbsp;passes&nbsp;100%.&lt;br&gt;&lt;br&gt;Although&nbsp;this&nbsp;happens&nbsp;to&nbsp;work,&nbsp;I&nbsp;have&nbsp;a&nbsp;hard&nbsp;time&nbsp;believing&nbsp;that&nbsp;this&nbsp;is&nbsp;the&nbsp;correct&nbsp;solution&nbsp;to&nbsp;my&nbsp;problem.&nbsp;I&nbsp;feel&nbsp;that&nbsp;others&nbsp;are&nbsp;probably&nbsp;using&nbsp;ARM9&nbsp;without<br>
&nbsp;floating&nbsp;point&nbsp;issues&nbsp;and&nbsp;that&nbsp;I&nbsp;am&nbsp;probably&nbsp;missing&nbsp;something&nbsp;in&nbsp;how&nbsp;I&nbsp;built&nbsp;mono&nbsp;for&nbsp;my&nbsp;platform.&nbsp;If&nbsp;anyone&nbsp;can&nbsp;shed&nbsp;some&nbsp;light&nbsp;on&nbsp;what&nbsp;I&nbsp;did&nbsp;wrong&nbsp;with&nbsp;building&nbsp;mono&nbsp;that'd&nbsp;be&nbsp;great.&nbsp;Of&nbsp;course&nbsp;if&nbsp;this&nbsp;is&nbsp;the&nbsp;correct&nbsp;action&nbsp;to&nbsp;take&nbsp;please&nbsp;let&nbsp;me&nbsp;know&nbsp;that&nbsp;too&nbsp;and&nbsp;how&nbsp;I&nbsp;may&nbsp;contribute&nbsp;the&nbsp;change&nbsp;back&nbsp;to&nbsp;the&nbsp;trunk&nbsp;(assuming&nbsp;that&nbsp;the&nbsp;trunk&nbsp;doesn't&nbsp;work&nbsp;which&nbsp;I&nbsp;haven't&nbsp;had&nbsp;time&nbsp;to&nbsp;test&nbsp;yet).&lt;br&gt;&lt;br&gt;In&nbsp;the&nbsp;meantime&nbsp;here's&nbsp;my&nbsp;hack&nbsp;to&nbsp;decompose_soft_float&nbsp;in&nbsp;method-to-ir.c&lt;br&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;5073&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;case&nbsp;OP_R8CONST:&nbsp;{&lt;br&gt;&amp;nbsp;5074&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;unsigned&nbsp;char&nbsp;*ucp&nbsp;=&nbsp;(unsigned&nbsp;char&nbsp;*)&nbsp;ins-&amp;gt;inst_p0;&lt;br&gt;&amp;nbsp;5075&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;unsigned&nbsp;char<br>
&nbsp;rawval[8];&lt;br&gt;&amp;nbsp;5076&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;printf(&quot;decompose_soft_float&nbsp;OP_R8CONST\n&quot;);&lt;br&gt;&amp;nbsp;5077&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;rawval[0]&nbsp;=<br>
&nbsp;ucp[4];&lt;br&gt;&amp;nbsp;5078&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;rawval[1]&nbsp;=&nbsp;ucp[5];&lt;br&gt;&amp;nbsp;5079&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;rawval[2]&nbsp;=&nbsp;ucp[6];&lt;br&gt;&amp;nbsp;5080&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;rawval[3]&nbsp;=&nbsp;ucp[7];&lt;br&gt;&amp;nbsp;5081&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;rawval[4]&nbsp;=&nbsp;ucp[0];&lt;br&gt;&amp;nbsp;5082&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;rawval[5]&nbsp;=&nbsp;ucp[1];&lt;br&gt;&amp;nbsp;5083&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;rawval[6]&nbsp;=&nbsp;ucp[2];&lt;br&gt;&amp;nbsp;5084&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;rawval[7]&nbsp;=&nbsp;ucp[3];&lt;br&gt;&amp;nbsp;5085&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;DVal&nbsp;d;&lt;br&gt;&amp;nbsp;5086<br>
&nbsp;//&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;d.vald&nbsp;=&nbsp;*(double*)ins-&amp;gt;inst_p0;&lt;br&gt;&amp;nbsp;5087&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;d.vald&nbsp;=&nbsp;*(double*)rawval;&lt;br&gt;&amp;nbsp;5088&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;MONO_EMIT_NEW_I8CONST&nbsp;(cfg,&nbsp;ins-&amp;gt;dreg,&nbsp;d.vall);&lt;br&gt;&amp;nbsp;5089&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;break;&lt;br&gt;&amp;nbsp;5090&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&lt;br&gt;---&nbsp;On&nbsp;&lt;b&gt;Thu,&nbsp;6/17/10,&nbsp;Trevor&nbsp;Ackerman&nbsp;&lt;i&gt;&amp;lt;t_ackerman@yahoo.com&amp;gt;&lt;/i&gt;&lt;/b&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;style=&quot;border-left:&nbsp;2px&nbsp;solid&nbsp;rgb(16,&nbsp;16,&nbsp;255);&nbsp;margin-left:&nbsp;5px;&nbsp;padding-left:&nbsp;5px;&quot;&gt;&lt;br&gt;From:&nbsp;Trevor&nbsp;Ackerman<br>
&nbsp;&amp;lt;t_ackerman@yahoo.com&amp;gt;&lt;br&gt;Subject:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;Arm9&nbsp;NS9215&nbsp;floating&nbsp;point&nbsp;troubles&lt;br&gt;To:&nbsp;mono-devel-list@lists.ximian.com&lt;br&gt;Date:&nbsp;Thursday,&nbsp;June&nbsp;17,&nbsp;2010,&nbsp;11:31&nbsp;AM&lt;br&gt;&lt;br&gt;&lt;div&nbsp;id=&quot;yiv1311087232&quot;&gt;&lt;table&nbsp;border=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;font:&nbsp;inherit;&quot;&nbsp;valign=&quot;top&quot;&gt;Good&nbsp;suggestion&nbsp;but&nbsp;that&nbsp;did&nbsp;not&nbsp;change&nbsp;the&nbsp;results.&lt;br&gt;&lt;br&gt;---&nbsp;On&nbsp;&lt;b&gt;Thu,&nbsp;6/17/10,&nbsp;Robert&nbsp;Jordan&nbsp;&lt;i&gt;&amp;lt;robertj@gmx.net&amp;gt;&lt;/i&gt;&lt;/b&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;style=&quot;border-left:&nbsp;2px&nbsp;solid&nbsp;rgb(16,&nbsp;16,&nbsp;255);&nbsp;margin-left:&nbsp;5px;&nbsp;padding-left:&nbsp;5px;&quot;&gt;&lt;br&gt;From:&nbsp;Robert&nbsp;Jordan&nbsp;&amp;lt;robertj@gmx.net&amp;gt;&lt;br&gt;Subject:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;Arm9&nbsp;NS9215&nbsp;floating&nbsp;point&nbsp;troubles&lt;br&gt;To:&nbsp;mono-devel-list@lists.ximian.com&lt;br&gt;Date:&nbsp;Thursday,&nbsp;June&nbsp;17,&nbsp;2010,&nbsp;10:53&nbsp;AM&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;plainMail&quot;&gt;On&nbsp;17.06.2010&nbsp;18:07,&nbsp;Trevor&nbsp;Ackerman&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;I&nbsp;have&nbsp;been&nbsp;able&nbsp;to&nbsp;cross-compile&nbsp;Mono&nbsp;2.6.4&nbsp;for&nbsp;the&nbsp;NS9215&nbsp;(no&nbsp;fpu&lt;br&gt;&amp;gt;&nbsp;afaik)&nbsp;and&nbsp;I'm&nbsp;having&nbsp;trouble&nbsp;with&nbsp;floats&nbsp;when&nbsp;executing<br>
&nbsp;code.&lt;br&gt;&lt;br&gt;...&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;My&nbsp;CFLAGS&nbsp;and&nbsp;CPPFLAGS&nbsp;environment&nbsp;variables&nbsp;are&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;both&lt;br&gt;&amp;gt;&nbsp;-DARM_FPU_NONE=1&nbsp;-DMONO_ARCH_SOFT_FLOAT=1&lt;br&gt;&lt;br&gt;-DNO_UNALIGNED_ACCESS&nbsp;is&nbsp;probably&nbsp;needed&nbsp;as<br>
&nbsp;well.&lt;br&gt;&lt;br&gt;Robert&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;rel=&quot;nofollow&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;br&gt;-----Inline&nbsp;Attachment&nbsp;Follows-----&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;plainMail&quot;&gt;_______________________________________________&lt;br&gt;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;rel=&quot;nofollow&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</tt>
