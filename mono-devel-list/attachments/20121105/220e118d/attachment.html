<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=iso-8859-1&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;Hi!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;noticed&nbsp;a&nbsp;bug&nbsp;in&nbsp;our&nbsp;codebase&nbsp;that&nbsp;might&nbsp;contribute&nbsp;to&nbsp;this.&nbsp;If&nbsp;I&nbsp;understand&nbsp;correctly&nbsp;the&nbsp;program&nbsp;was&nbsp;going&nbsp;through&nbsp;a&nbsp;lot&nbsp;of&nbsp;data&nbsp;(iterating&nbsp;through&nbsp;3D&nbsp;voxel&nbsp;geometry&nbsp;comparing&nbsp;data)&nbsp;and&nbsp;it&nbsp;had&nbsp;a&nbsp;bug&nbsp;in&nbsp;equals&nbsp;that&nbsp;caused&nbsp;boxing.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;in&nbsp;we&nbsp;were&nbsp;generating&nbsp;_a&nbsp;lot_&nbsp;of&nbsp;small&nbsp;classes,&nbsp;loosing&nbsp;references&nbsp;to&nbsp;those&nbsp;new&nbsp;instances&nbsp;and&nbsp;doing&nbsp;that&nbsp;on&nbsp;very&nbsp;many&nbsp;threads&nbsp;at&nbsp;once.&lt;/div&gt;&lt;div&gt;Sounds&nbsp;like&nbsp;a&nbsp;GC&nbsp;stress&nbsp;tester&nbsp;=)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Anyhow,&nbsp;I&nbsp;will&nbsp;try&nbsp;to&nbsp;repro&nbsp;the&nbsp;bug&nbsp;with&nbsp;more&nbsp;debug&nbsp;and&nbsp;file&nbsp;it&nbsp;to&nbsp;bugzilla.&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Nov&nbsp;5,&nbsp;2012,&nbsp;at&nbsp;6:57&nbsp;PM,&nbsp;Rodrigo&nbsp;Kumpera&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:kumpera@gmail.com&quot;&gt;kumpera@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Yes,&nbsp;look&nbsp;in&nbsp;the&nbsp;mono&nbsp;man&nbsp;page&nbsp;for&nbsp;MONO_GC_DEBUG.&nbsp;We&nbsp;have&nbsp;multiple&nbsp;options&nbsp;that&nbsp;can&nbsp;help&nbsp;triaging&nbsp;bugs.&nbsp;Collecting&nbsp;on&nbsp;every&nbsp;allocation&lt;div&gt;sometimes&nbsp;does&nbsp;help,&nbsp;but&nbsp;it&nbsp;depends&nbsp;very&nbsp;much&nbsp;on&nbsp;the&nbsp;nature&nbsp;of&nbsp;the&nbsp;crash.&nbsp;And&nbsp;from&nbsp;the&nbsp;looks&nbsp;of&nbsp;the&nbsp;report,&nbsp;it's&nbsp;not&nbsp;possible&nbsp;to&nbsp;say&nbsp;if&nbsp;it's&nbsp;a&nbsp;GC&lt;/div&gt;<br>
&lt;div&gt;or&nbsp;a&nbsp;runtime&nbsp;bug&nbsp;or&nbsp;an&nbsp;application&nbsp;bug.&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Nov&nbsp;5,&nbsp;2012&nbsp;at&nbsp;9:58&nbsp;AM,&nbsp;Ben&nbsp;Winkel&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:funnelweb007@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;funnelweb007@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Is&nbsp;there&nbsp;a&nbsp;stress&nbsp;testing&nbsp;mode&nbsp;for&nbsp;SGEN?&nbsp;e.g.&nbsp;to&nbsp;force&nbsp;a&nbsp;GC&nbsp;at&nbsp;every&nbsp;allocation?&nbsp;&nbsp;That&nbsp;can&nbsp;really&nbsp;help&nbsp;to&nbsp;nail&nbsp;GC&nbsp;bugs&nbsp;fast&nbsp;(at&nbsp;huge&nbsp;cost&nbsp;of&nbsp;course)&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;<br>
&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Nov&nbsp;5,&nbsp;2012&nbsp;at&nbsp;2:56&nbsp;PM,&nbsp;Rodrigo&nbsp;Kumpera&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:kumpera@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;kumpera@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;padding-left:1ex;border-left-color:rgb(204,204,204);border-left-width:1px;border-left-style:solid&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;First,&nbsp;make&nbsp;sure&nbsp;you&nbsp;have&nbsp;symbols&nbsp;and&nbsp;gdb&nbsp;installed.&nbsp;Then,&nbsp;please,&nbsp;file&nbsp;a&nbsp;bug&nbsp;report&nbsp;with&nbsp;all&nbsp;details&nbsp;and&lt;/div&gt;<br>
<br>
&lt;div&gt;a&nbsp;test&nbsp;case&nbsp;if&nbsp;possible.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sgen&nbsp;bugs&nbsp;are&nbsp;very&nbsp;very&nbsp;hard&nbsp;to&nbsp;come&nbsp;by&nbsp;and&nbsp;every&nbsp;harder&nbsp;to&nbsp;reproduce.&nbsp;If&nbsp;you&nbsp;have&nbsp;it&nbsp;in&nbsp;your&nbsp;hands&nbsp;please&lt;/div&gt;<br>
&lt;div&gt;help&nbsp;us&nbsp;nail&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Nov&nbsp;5,&nbsp;2012&nbsp;at&nbsp;7:16&nbsp;AM,&nbsp;Roope&nbsp;Kangas&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:roope@grandcrugames.com&quot;&nbsp;target=&quot;_blank&quot;&gt;roope@grandcrugames.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;padding-left:1ex;border-left-color:rgb(204,204,204);border-left-width:1px;border-left-style:solid&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;Hi!&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;working&nbsp;on&nbsp;a&nbsp;MMO&nbsp;game&nbsp;thats&nbsp;written&nbsp;in&nbsp;C#.&nbsp;We&nbsp;are&nbsp;currently&nbsp;running&nbsp;load&nbsp;tests&nbsp;on&nbsp;mono&nbsp;3.0.0&nbsp;in&nbsp;linux&nbsp;environment.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;noticed&nbsp;a&nbsp;few&nbsp;times&nbsp;that&nbsp;when&nbsp;we&nbsp;cause&nbsp;a&nbsp;spike&nbsp;the&nbsp;amount&nbsp;of&nbsp;threads&nbsp;we&nbsp;run&nbsp;the&nbsp;server&nbsp;sometimes&nbsp;crashes&nbsp;with&nbsp;the&nbsp;following&nbsp;output:&lt;br&gt;<br>
&lt;br&gt;<br>
Native&nbsp;stacktrace:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mono-sgen()&nbsp;[0x498441]&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mono-sgen()&nbsp;[0x4ec2df]&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mono-sgen()&nbsp;[0x41c217]&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/lib64/libpthread.so.0(+0xf500)&nbsp;[0x7fd5a1257500]&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mono-sgen(mono_class_is_assignable_from+0x30)&nbsp;[0x4ff070]&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mono-sgen(mono_object_isinst+0x3d)&nbsp;[0x57033d]&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mono-sgen()&nbsp;[0x463c88]&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0x40216c3e]&lt;br&gt;<br>
&lt;br&gt;<br>
Debug&nbsp;info&nbsp;from&nbsp;gdb:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
=================================================================&lt;br&gt;<br>
Got&nbsp;a&nbsp;SIGSEGV&nbsp;while&nbsp;executing&nbsp;native&nbsp;code.&nbsp;This&nbsp;usually&nbsp;indicates&lt;br&gt;<br>
a&nbsp;fatal&nbsp;error&nbsp;in&nbsp;the&nbsp;mono&nbsp;runtime&nbsp;or&nbsp;one&nbsp;of&nbsp;the&nbsp;native&nbsp;libraries&lt;br&gt;<br>
used&nbsp;by&nbsp;your&nbsp;application.&lt;br&gt;<br>
=================================================================&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;Any&nbsp;ideas&nbsp;on&nbsp;what&nbsp;to&nbsp;do?&nbsp;This&nbsp;kind&nbsp;of&nbsp;behaviour&nbsp;does&nbsp;not&nbsp;occur&nbsp;with&nbsp;Boehm&nbsp;GC.&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Roope&lt;br&gt;<br>
Lead&nbsp;Server&nbsp;Developer&lt;br&gt;<br>
Grand&nbsp;Cru&nbsp;Games&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.grandcrugames.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.grandcrugames.com&lt;/a&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
