<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;TRANSITIONAL//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;CHARSET=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;NAME=&quot;GENERATOR&quot;&nbsp;CONTENT=&quot;GtkHTML/3.0.9&quot;&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
Hi&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;fixed&nbsp;it&nbsp;by&nbsp;upgrading&nbsp;to&nbsp;FC2&nbsp;development&nbsp;glibc&nbsp;package&nbsp;for&nbsp;PPC.&lt;BR&gt;<br>
&lt;BR&gt;<br>
/Mikkel&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;Sat,&nbsp;2004-05-15&nbsp;at&nbsp;22:48,&nbsp;rico@elctech.com&nbsp;wrote:<br>
&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&lt;PRE&gt;&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&lt;I&gt;I&nbsp;have&nbsp;not&nbsp;seen&nbsp;any&nbsp;resolution&nbsp;to&nbsp;this&nbsp;issue&nbsp;on&nbsp;the&nbsp;list&nbsp;and&nbsp;I&nbsp;wanted&nbsp;to<br>
provide&nbsp;more&nbsp;information&nbsp;to&nbsp;help&nbsp;solve&nbsp;the&nbsp;problem.&nbsp;I'm&nbsp;hoping&nbsp;I've&nbsp;given<br>
enough&nbsp;information&nbsp;for&nbsp;someone&nbsp;to&nbsp;make&nbsp;sense&nbsp;of&nbsp;the&nbsp;exceptions-ppc.c&nbsp;mapping<br>
to&nbsp;the&nbsp;YDL&nbsp;headers.&nbsp;If&nbsp;not,&nbsp;please&nbsp;let&nbsp;me&nbsp;know&nbsp;what&nbsp;else&nbsp;I&nbsp;can&nbsp;provide.<br>
<br>
I&nbsp;ran&nbsp;into&nbsp;this&nbsp;on&nbsp;my&nbsp;G3&nbsp;YDL&nbsp;3&nbsp;system.&nbsp;Looking&nbsp;in:<br>
/usr/include/ucontext.h:<br>
---------------<br>
/*&nbsp;Get&nbsp;machine&nbsp;dependent&nbsp;definition&nbsp;of&nbsp;data&nbsp;structures.&nbsp;&nbsp;*/<br>
#include&nbsp;&amp;lt;sys/ucontext.h&amp;gt;<br>
---------------<br>
<br>
/usr/include/sys/ucontext.h:<br>
---------------<br>
typedef&nbsp;struct&nbsp;sigcontext&nbsp;mcontext_t;<br>
/*&nbsp;Userlevel&nbsp;context.&nbsp;&nbsp;*/<br>
typedef&nbsp;struct&nbsp;ucontext<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;int&nbsp;uc_flags;<br>
&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;ucontext&nbsp;*uc_link;<br>
&nbsp;&nbsp;&nbsp;&nbsp;stack_t&nbsp;uc_stack;<br>
#if&nbsp;__WORDSIZE&nbsp;==&nbsp;32<br>
&nbsp;&nbsp;&nbsp;&nbsp;mcontext_t&nbsp;uc_mcontext;<br>
&nbsp;&nbsp;&nbsp;&nbsp;__sigset_t&nbsp;uc_sigmask;<br>
#else<br>
&nbsp;&nbsp;&nbsp;&nbsp;sigset_t&nbsp;&nbsp;&nbsp;&nbsp;uc_sigmask;<br>
&nbsp;&nbsp;&nbsp;&nbsp;mcontext_t&nbsp;&nbsp;uc_mcontext;&nbsp;&nbsp;/*&nbsp;last&nbsp;for&nbsp;extensibility&nbsp;*/<br>
#endif<br>
&nbsp;&nbsp;}&nbsp;ucontext_t;<br>
---------------<br>
<br>
The&nbsp;failing&nbsp;code&nbsp;(in&nbsp;mono/mini/exceptions-ppc.c:1082)&nbsp;is&nbsp;caused&nbsp;by&nbsp;this<br>
lookup:<br>
uc-&amp;gt;uc_mcontext.uc_regs-&amp;gt;gregs&nbsp;[PT_NIP]<br>
<br>
Where&nbsp;uc&nbsp;is&nbsp;defined&nbsp;as:<br>
struct&nbsp;ucontext&nbsp;*uc&nbsp;=&nbsp;ctx;<br>
<br>
So&nbsp;a&nbsp;struct&nbsp;ucontext&nbsp;has&nbsp;a&nbsp;uc_mcontext&nbsp;field,&nbsp;but&nbsp;looking&nbsp;at&nbsp;the&nbsp;definition<br>
of&nbsp;sigcontext&nbsp;(mcontext_t)&nbsp;in&nbsp;/usr/include/asm/sigcontext.h:<br>
---------------<br>
struct&nbsp;sigcontext_struct&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;&nbsp;&nbsp;_unused[4];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;&nbsp;&nbsp;handler;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;&nbsp;&nbsp;oldmask;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;pt_regs&nbsp;&nbsp;*regs;<br>
};<br>
---------------<br>
<br>
There&nbsp;is&nbsp;an&nbsp;entry&nbsp;for&nbsp;'regs',&nbsp;but&nbsp;not&nbsp;for&nbsp;uc_regs.&nbsp;Furthermore,&nbsp;uc_regs&nbsp;does<br>
not&nbsp;seem&nbsp;to&nbsp;map&nbsp;to&nbsp;'regs'&nbsp;since&nbsp;there&nbsp;is&nbsp;no&nbsp;'gregs'&nbsp;field&nbsp;in&nbsp;struct&nbsp;pt_regs.<br>
&gt;From&nbsp;/usr/include/asm/ptrace.h:<br>
struct&nbsp;pt_regs&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;gpr[32];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;nip;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;msr;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;orig_gpr3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Used&nbsp;for&nbsp;restarting&nbsp;system&nbsp;calls<br>
*/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;ctr;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;link;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;xer;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;ccr;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;mq;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;601&nbsp;only&nbsp;(not&nbsp;used&nbsp;at&nbsp;present)&nbsp;*/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Used&nbsp;on&nbsp;APUS&nbsp;to&nbsp;hold&nbsp;IPL&nbsp;value.<br>
*/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;trap;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Reason&nbsp;for&nbsp;being&nbsp;here&nbsp;*/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;dar;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Fault&nbsp;registers&nbsp;*/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;dsisr;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;result;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Result&nbsp;of&nbsp;a&nbsp;system&nbsp;call&nbsp;*/<br>
};<br>
<br>
I&nbsp;am&nbsp;at&nbsp;a&nbsp;loss&nbsp;on&nbsp;how&nbsp;to&nbsp;reconcile&nbsp;the&nbsp;code.&nbsp;Looking&nbsp;forward&nbsp;to&nbsp;the&nbsp;list's<br>
input.<br>
<br>
-Rico<br>
<br>
&amp;gt;&nbsp;-----Original&nbsp;Message-----<br>
&amp;gt;&nbsp;From:&nbsp;mono-devel-list-admin@lists.ximian.com&nbsp;<br>
&amp;gt;&nbsp;[mailto:mono-devel-list-admin@lists.ximian.com]&nbsp;On&nbsp;Behalf&nbsp;Of&nbsp;<br>
&amp;gt;&nbsp;Paolo&nbsp;Molaro<br>
&amp;gt;&nbsp;Sent:&nbsp;Tuesday,&nbsp;May&nbsp;04,&nbsp;2004&nbsp;10:59&nbsp;AM<br>
&amp;gt;&nbsp;To:&nbsp;mono-devel-list@lists.ximian.com<br>
&amp;gt;&nbsp;Subject:&nbsp;Re:&nbsp;[Mono-devel-list]&nbsp;Compile&nbsp;error&nbsp;Mono&nbsp;0.91&nbsp;on&nbsp;<br>
&amp;gt;&nbsp;PowerBook&nbsp;G4&nbsp;YDL&nbsp;3<br>
&amp;gt;&nbsp;<br>
&amp;gt;&nbsp;On&nbsp;05/04/04&nbsp;Mikkel&nbsp;Kruse&nbsp;Johnsen&nbsp;wrote:<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;I&nbsp;have&nbsp;a&nbsp;PB&nbsp;G4&nbsp;running&nbsp;YDL&nbsp;3&nbsp;and&nbsp;garnome&nbsp;2.5.91,&nbsp;ICU&nbsp;2.6.2.<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;The&nbsp;error&nbsp;is:<br>
&amp;gt;&nbsp;[...]<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;exceptions-ppc.c:&nbsp;In&nbsp;function&nbsp;`mono_arch_handle_exception':<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;exceptions-ppc.c:1082:&nbsp;structure&nbsp;has&nbsp;no&nbsp;member&nbsp;named&nbsp;`uc_regs'<br>
&amp;gt;&nbsp;<br>
&amp;gt;&nbsp;You&nbsp;need&nbsp;to&nbsp;poke&nbsp;inside&nbsp;/usr/include/ucontext.h&nbsp;and&nbsp;see&nbsp;how&nbsp;<br>
&amp;gt;&nbsp;the&nbsp;ucontext&nbsp;struct&nbsp;is&nbsp;defined&nbsp;there.&nbsp;It&nbsp;looks&nbsp;like&nbsp;on&nbsp;your&nbsp;<br>
&amp;gt;&nbsp;system&nbsp;it's&nbsp;different&nbsp;from&nbsp;mine&nbsp;(Debian/PPC).<br>
&amp;gt;&nbsp;Then,&nbsp;you&nbsp;either&nbsp;fix&nbsp;the&nbsp;function&nbsp;there&nbsp;to&nbsp;match,&nbsp;or&nbsp;you&nbsp;post&nbsp;<br>
&amp;gt;&nbsp;the&nbsp;full&nbsp;details&nbsp;of&nbsp;the&nbsp;ucontext&nbsp;structure&nbsp;on&nbsp;your&nbsp;system&nbsp;so&nbsp;<br>
&amp;gt;&nbsp;that&nbsp;I&nbsp;can&nbsp;fix&nbsp;it.<br>
&amp;gt;&nbsp;<br>
&amp;gt;&nbsp;lupus<br>
&amp;gt;&nbsp;<br>
&amp;gt;&nbsp;--<br>
&amp;gt;&nbsp;-----------------------------------------------------------------<br>
&amp;gt;&nbsp;lupus@debian.org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debian/rules<br>
&amp;gt;&nbsp;lupus@ximian.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Monkeys&nbsp;do&nbsp;it&nbsp;better<br>
&amp;gt;&nbsp;_______________________________________________<br>
&amp;gt;&nbsp;Mono-devel-list&nbsp;mailing&nbsp;list<br>
&amp;gt;&nbsp;Mono-devel-list@lists.ximian.com<br>
&amp;gt;&nbsp;&lt;/FONT&gt;&lt;A&nbsp;HREF=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;&lt;U&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/U&gt;&lt;/A&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&amp;gt;&nbsp;<br>
<br>
_______________________________________________<br>
Mono-devel-list&nbsp;mailing&nbsp;list<br>
Mono-devel-list@lists.ximian.com&lt;/FONT&gt;<br>
&lt;A&nbsp;HREF=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;&lt;U&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/U&gt;&lt;/I&gt;&lt;/A&gt;&lt;/PRE&gt;<br>
&lt;/BLOCKQUOTE&gt;<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>

</tt>
