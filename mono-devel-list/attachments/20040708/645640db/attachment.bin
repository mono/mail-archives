Index: class/System.Web/System.Web.UI/ChangeLog
===================================================================
RCS file: /mono/mcs/class/System.Web/System.Web.UI/ChangeLog,v
retrieving revision 1.242
diff -u -r1.242 ChangeLog
--- class/System.Web/System.Web.UI/ChangeLog	2 Jul 2004 01:54:48 -0000	1.242
+++ class/System.Web/System.Web.UI/ChangeLog	8 Jul 2004 11:52:54 -0000
@@ -1,3 +1,7 @@
+2004-07-08 Pablo Baena <pbaena@gmail.com>
+
+	* Page.cs: added workaround for __doPostBack script on Netscape 4.xx
+	
 2004-07-02 Gonzalo Paniagua Javier <gonzalo@ximian.com>
 
 	* Page.cs: added additional checks for saving/displaying trace data.
Index: class/System.Web/System.Web.UI/Page.cs
===================================================================
RCS file: /mono/mcs/class/System.Web/System.Web.UI/Page.cs,v
retrieving revision 1.90
diff -u -r1.90 Page.cs
--- class/System.Web/System.Web.UI/Page.cs	2 Jul 2004 01:54:48 -0000	1.90
+++ class/System.Web/System.Web.UI/Page.cs	8 Jul 2004 11:52:56 -0000
@@ -526,7 +526,12 @@
 		writer.WriteLine ("<script language=\"javascript\">");
 		writer.WriteLine ("<!--");
 		writer.WriteLine ("\tfunction __doPostBack(eventTarget, eventArgument) {");
-		writer.WriteLine ("\t\tvar theform = document.getElementById ('{0}');", formUniqueID);
+
+		if (Request.Browser.Browser.CompareTo ("Netscape") == 0 && Request.Browser.MajorVersion == 4)
+			writer.WriteLine ("\t\tvar theform = document.{0};", formUniqueID);
+		else
+			writer.WriteLine ("\t\tvar theform = document.getElementById ('{0}');", formUniqueID);
+
 		writer.WriteLine ("\t\ttheform.{0}.value = eventTarget;", postEventSourceID);
 		writer.WriteLine ("\t\ttheform.{0}.value = eventArgument;", postEventArgumentID);
 		writer.WriteLine ("\t\ttheform.submit();");
