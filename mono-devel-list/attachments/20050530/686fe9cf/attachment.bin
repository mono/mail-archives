Index: icall.c
===================================================================
--- icall.c	(revisiÃ³n: 45155)
+++ icall.c	(copia de trabajo)
@@ -3475,6 +3475,41 @@
 	return result;
 }
 
+static MonoObject*
+create_version (MonoDomain *domain, MonoAssemblyName *aname)
+{
+	static MonoClass *System_Version = NULL;
+	static MonoMethod *create_version = NULL;
+	MonoObject *result;
+	int major, minor, build, revision;
+	gpointer args [4];
+	
+	if (!System_Version) {
+		System_Version = mono_class_from_name (mono_defaults.corlib, "System", "Version");
+		g_assert (System_Version);
+	}
+
+	if (!create_version) {
+		MonoMethodDesc *desc = mono_method_desc_new (":.ctor(int,int,int,int)", FALSE);
+		create_version = mono_method_desc_search_in_class (desc, System_Version);
+		g_assert (create_version);
+		mono_method_desc_free (desc);
+	}
+
+	major = aname->major;
+	minor = aname->minor;
+	build = aname->build;
+	revision = aname->revision;
+	args [0] = &major;
+	args [1] = &minor;
+	args [2] = &build;
+	args [3] = &revision;
+	result = mono_object_new (domain, System_Version);
+	mono_runtime_invoke (create_version, result, args, NULL);
+
+	return result;
+}
+
 static MonoArray*
 ves_icall_System_Reflection_Assembly_GetReferencedAssemblies (MonoReflectionAssembly *assembly) 
 {
@@ -3531,6 +3566,7 @@
 		aname->hashalg = assem->aname.hash_alg;
 		aname->flags = assem->aname.flags;
 		aname->versioncompat = 1; /* SameMachine (default) */
+		aname->version = create_version (domain, &assem->aname);
 
 		if (create_culture) {
 			gpointer args [1];
@@ -3945,7 +3981,8 @@
 	aname->build = name->build;
 	aname->revision = name->revision;
 	aname->hashalg = name->hash_alg;
-
+	aname->version = create_version (domain, name);
+	
 	codebase = g_filename_to_uri (absolute, NULL, NULL);
 	if (codebase) {
 		aname->codebase = mono_string_new (domain, codebase);
