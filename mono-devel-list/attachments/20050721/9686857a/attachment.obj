Index: ChangeLog
===================================================================
--- ChangeLog	(revision 47499)
+++ ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2005-07-21  Rafael Mizrahi  <rafim@mainsoft.com>
+
+	* xmlconf.cs: Close readers handlers in order to free file descriptors.
+ 
 2005-06-30  Andrew Skiba  <andrews@mainsoft.com>
 
 	* Makefile: change targets for nunit based tests
Index: xmlconf.cs
===================================================================
--- xmlconf.cs	(revision 47499)
+++ xmlconf.cs	(working copy)
@@ -31,6 +31,7 @@
 					if (s.Length > 0)
 						array.Add (s);
 				}
+				reader.Close();
 			}
 		}
 		#endregion
@@ -164,8 +165,9 @@
 
 		bool TestNonValidating (string uri)
 		{
+			XmlTextReader trd = null;
 			try {
-				XmlTextReader trd = new XmlTextReader (uri);
+				trd = new XmlTextReader (uri);
 				new XmlDocument ().Load (trd);
 				return true;
 			}
@@ -173,12 +175,17 @@
 				_stackTrace = e.StackTrace;
 				return false;
 			}
+			finally {
+				if (trd != null)
+					trd.Close();
+			}
 		}
 
 		bool TestValidating (string uri)
 		{
+			XmlTextReader rd = null;
 			try {
-				XmlTextReader rd = new XmlTextReader (uri);
+				rd = new XmlTextReader (uri);
 				XmlValidatingReader vrd = new XmlValidatingReader (rd);
 				new XmlDocument ().Load (vrd);
 				return true;
@@ -187,6 +194,10 @@
 				_stackTrace = e.StackTrace; //rewrites existing, possibly, but it's ok
 				return false;
 			}
+			finally {
+				if (rd != null) 
+					rd.Close();				
+			}
 		}
 
 		public override void Run (TestCaseResult res)
