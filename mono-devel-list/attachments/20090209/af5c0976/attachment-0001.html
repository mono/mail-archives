<tt>
@@&nbsp;-5875,9&nbsp;+5921,10&nbsp;@@&lt;br&gt;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;container&nbsp;=&nbsp;klass-&amp;gt;generic_class-&amp;gt;container_class-&amp;gt;generic_container;&lt;br&gt;&amp;nbsp;&lt;br&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;container-&amp;gt;type_argc;&nbsp;++i)&lt;br&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(container-&amp;gt;type_params&nbsp;[i].flags&nbsp;&amp;amp;&nbsp;(MONO_GEN_PARAM_VARIANT|MONO_GEN_PARAM_COVARIANT))&lt;br&gt;<br>
+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;container-&amp;gt;type_argc;&nbsp;++i)&nbsp;{&lt;br&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(container-&amp;gt;type_params&nbsp;[i].flags&nbsp;&amp;amp;&nbsp;GENERIC_PARAMETER_ATTRIBUTE_VARIANCE_MASK)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;TRUE;&lt;br&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;FALSE;&lt;br&gt;<br>
&amp;nbsp;}&lt;br&gt;&lt;br&gt;This&nbsp;change&nbsp;is&nbsp;not&nbsp;necessary.&lt;br&gt;&lt;br&gt;@@&nbsp;-5919,55&nbsp;+5966,23&nbsp;@@&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(MONO_CLASS_IMPLEMENTS_INTERFACE&nbsp;(oklass,&nbsp;klass-&amp;gt;interface_id))&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;TRUE;&lt;br&gt;&amp;nbsp;&lt;br&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(mono_class_has_variant_generic_params&nbsp;(klass))&nbsp;{&lt;br&gt;<br>
-&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(oklass-&amp;gt;generic_class)&nbsp;{&lt;br&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;i;&lt;br&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;gboolean&nbsp;match&nbsp;=&nbsp;FALSE;&lt;br&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;MonoClass&nbsp;*container_class1&nbsp;=&nbsp;klass-&amp;gt;generic_class-&amp;gt;container_class;&lt;br&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;MonoClass&nbsp;*container_class2&nbsp;=&nbsp;oklass-&amp;gt;generic_class-&amp;gt;container_class;&lt;br&gt;<br>
+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(mono_class_has_variant_generic_params&nbsp;(klass)&nbsp;&amp;amp;&amp;amp;&nbsp;oklass-&amp;gt;generic_class)&nbsp;{&lt;br&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;i;&lt;br&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;gboolean&nbsp;match&nbsp;=&nbsp;FALSE;&lt;br&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;MonoClass&nbsp;*container_class1&nbsp;=&nbsp;klass-&amp;gt;generic_class-&amp;gt;container_class;&lt;br&gt;<br>
+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;MonoClass&nbsp;*container_class2&nbsp;=&nbsp;oklass-&amp;gt;generic_class-&amp;gt;container_class;&lt;br&gt;&lt;br&gt;&lt;br&gt;Please&nbsp;only&nbsp;change&nbsp;the&nbsp;innerloop&nbsp;that&nbsp;was&nbsp;extracted&nbsp;to&nbsp;mono_class_is_variant_of.&nbsp;Don&amp;#39;t&nbsp;change&nbsp;the&nbsp;&lt;br&gt;nested&nbsp;if&nbsp;as&nbsp;it&nbsp;introduces&nbsp;a&nbsp;huge&nbsp;change&nbsp;bloat&nbsp;for&nbsp;no&nbsp;gain.&nbsp;Leave&nbsp;cleanups&nbsp;for&nbsp;a&nbsp;separate&nbsp;patch.&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;@@&nbsp;-198,6&nbsp;+198,9&nbsp;@@&lt;br&gt;&amp;nbsp;MonoClass*&lt;br&gt;&amp;nbsp;mono_class_get_nested_types&amp;nbsp;&nbsp;(MonoClass*&nbsp;klass,&nbsp;gpointer&nbsp;*iter);&lt;br&gt;&amp;nbsp;&lt;br&gt;+int&lt;br&gt;+mono_class_interface_offset_with_variance&nbsp;(MonoClass&nbsp;*klass,&nbsp;MonoClass&nbsp;*itf);&lt;br&gt;+&lt;br&gt;&lt;br&gt;This&nbsp;must&nbsp;be&nbsp;flagged&nbsp;MONO_INTERNAL&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;+2009-02-07&amp;nbsp;&nbsp;Scott&nbsp;Peterson&amp;nbsp;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:lunchtimemama@gmail.com&quot;&gt;lunchtimemama@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;+&lt;br&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Contrubuted&nbsp;under&nbsp;the&nbsp;MIT/X11&nbsp;license.&lt;br&gt;&lt;br&gt;Small&nbsp;typo&nbsp;;)&lt;br&gt;&lt;br&gt;Index:&nbsp;mono/mini/Makefile.am&lt;br&gt;<br>
===================================================================&lt;br&gt;---&nbsp;mono/mini/Makefile.am&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;(revision&nbsp;126150)&lt;br&gt;+++&nbsp;mono/mini/Makefile.am&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;(working&nbsp;copy)&lt;br&gt;@@&nbsp;-283,6&nbsp;+283,7&nbsp;@@&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;test.cs&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;\&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;generics.cs&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;\&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://generics-variant-types.il&quot;&gt;generics-variant-types.il&lt;/a&gt;\&lt;br&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;generics-variant-types.cs\&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;basic-simd.cs&lt;br&gt;&lt;br&gt;Please&nbsp;rebase&nbsp;your&nbsp;patch&nbsp;as&nbsp;&lt;a&nbsp;href=&quot;http://generics-variant-types.il&quot;&gt;generics-variant-types.il&lt;/a&gt;&nbsp;isn&amp;#39;t&nbsp;part&nbsp;of&nbsp;Makefile.am&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Rodrigo&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Feb&nbsp;7,&nbsp;2009&nbsp;at&nbsp;12:58&nbsp;AM,&nbsp;Scott&nbsp;Peterson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:lunchtimemama@gmail.com&quot;&gt;lunchtimemama@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
And&nbsp;this&nbsp;adds&nbsp;more&nbsp;test&nbsp;logic&nbsp;(and&nbsp;fixes&nbsp;the&nbsp;tests&nbsp;that&nbsp;was&nbsp;already&nbsp;there).&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
