<tt>
Precomp&nbsp;is&nbsp;a&nbsp;non&nbsp;standard&nbsp;optimization&nbsp;for&nbsp;this&nbsp;precise&nbsp;reason.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;file&nbsp;a&nbsp;bug&nbsp;report&nbsp;on&nbsp;the&nbsp;issue.&nbsp;I&nbsp;believe&nbsp;making&nbsp;it&nbsp;spec&nbsp;compliant&nbsp;would&nbsp;be&nbsp;nice&lt;/div&gt;&lt;div&gt;but&nbsp;non-trivial.&nbsp;So,&nbsp;if&nbsp;you&nbsp;feel&nbsp;like&nbsp;you&nbsp;need&nbsp;it,&nbsp;feel&nbsp;free&nbsp;to&nbsp;submit&nbsp;a&nbsp;patch.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Jan&nbsp;19,&nbsp;2012&nbsp;at&nbsp;2:37&nbsp;PM,&nbsp;Martin&nbsp;Däumler&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:mdae@cs.tu-chemnitz.de&quot;&gt;mdae@cs.tu-chemnitz.de&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;tried&nbsp;out&nbsp;several&nbsp;optimizations&nbsp;of&nbsp;Mono&nbsp;2.6.1&nbsp;and&nbsp;Mono&nbsp;2.10.8.1.&lt;br&gt;<br>
So&nbsp;I&nbsp;used&nbsp;&quot;-O=precomp&quot;.&nbsp;The&nbsp;class&nbsp;&#39;Test&#39;&nbsp;of&nbsp;the&nbsp;appended&nbsp;test&nbsp;case&lt;br&gt;<br>
has&nbsp;an&nbsp;(explicit)&nbsp;class&nbsp;constructor.&nbsp;That&nbsp;is,&nbsp;in&nbsp;class&nbsp;Test&#39;s&nbsp;IL-code,&lt;br&gt;<br>
the&nbsp;field&nbsp;&quot;beforefieldinit&quot;&nbsp;is&nbsp;not&nbsp;set.&nbsp;ECMA-335&nbsp;§8.9.5&nbsp;states&nbsp;that&lt;br&gt;<br>
the&nbsp;class&nbsp;constructor&nbsp;is&nbsp;executed&nbsp;at&nbsp;first&nbsp;access&nbsp;to&nbsp;any&nbsp;static&nbsp;member&lt;br&gt;<br>
of&nbsp;that&nbsp;class&nbsp;or&nbsp;at&nbsp;first&nbsp;creation&nbsp;of&nbsp;one&nbsp;instance&nbsp;of&nbsp;that&nbsp;class,&nbsp;as&lt;br&gt;<br>
I&nbsp;understood&nbsp;it.&nbsp;When&nbsp;I&nbsp;execute&nbsp;the&nbsp;program&nbsp;with&nbsp;Mono&nbsp;2.6.1&nbsp;and&nbsp;the&lt;br&gt;<br>
optimization&nbsp;&quot;-O=precomp&quot;,&nbsp;class&nbsp;Test&#39;s&nbsp;class&nbsp;constructor&nbsp;is&nbsp;executed&lt;br&gt;<br>
before&nbsp;first&nbsp;access.&nbsp;Even&nbsp;worse,&nbsp;Mono&nbsp;2.10.8.1&nbsp;crashes&nbsp;while&lt;br&gt;<br>
precompiling.&lt;br&gt;<br>
&lt;br&gt;<br>
So,&nbsp;what&nbsp;have&nbsp;do&nbsp;be&nbsp;done&nbsp;in&nbsp;order&nbsp;to&nbsp;don&#39;t&nbsp;violate&nbsp;the&nbsp;specification?&lt;br&gt;<br>
How&nbsp;is&nbsp;it&nbsp;handled&nbsp;in&nbsp;AOT-mode?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
With&nbsp;kind&nbsp;regards,&lt;br&gt;<br>
Martin&nbsp;Däumler&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
using&nbsp;System;&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;Test&lt;br&gt;<br>
{&lt;br&gt;<br>
&nbsp; &nbsp; public&nbsp;static&nbsp;string&nbsp;x;&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; static&nbsp;Test&nbsp;()&lt;br&gt;<br>
&nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; Console.WriteLine(&quot;In&nbsp;type&nbsp;initializer&quot;);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; x&nbsp;=&nbsp;&quot;In&nbsp;type&nbsp;initializer&quot;;&lt;br&gt;<br>
&nbsp; &nbsp; }&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; public&nbsp;static&nbsp;string&nbsp;EchoAndReturn&nbsp;(string&nbsp;s)&lt;br&gt;<br>
&nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine&nbsp;(s);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;s;&lt;br&gt;<br>
&nbsp; &nbsp; }&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;Driver&lt;br&gt;<br>
{&lt;br&gt;<br>
&nbsp; &nbsp; public&nbsp;static&nbsp;void&nbsp;Main()&lt;br&gt;<br>
&nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(&quot;Starting&nbsp;Main&quot;);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;Invoke&nbsp;a&nbsp;static&nbsp;method&nbsp;on&nbsp;Test&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; Test.EchoAndReturn(&quot;Echo!&quot;);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(&quot;After&nbsp;echo&quot;);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;Reference&nbsp;a&nbsp;static&nbsp;field&nbsp;in&nbsp;Test&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; string&nbsp;y&nbsp;=&nbsp;Test.x;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;Use&nbsp;the&nbsp;value&nbsp;just&nbsp;to&nbsp;avoid&nbsp;compiler&nbsp;cleverness&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;(y&nbsp;!=&nbsp;null)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(&quot;After&nbsp;field&nbsp;access&quot;);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&nbsp; &nbsp; }&lt;br&gt;<br>
}&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.&lt;u&gt;&lt;/u&gt;com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/&lt;u&gt;&lt;/u&gt;mailman/listinfo/mono-devel-&lt;u&gt;&lt;/u&gt;list&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
