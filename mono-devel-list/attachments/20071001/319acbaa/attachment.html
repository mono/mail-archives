<tt>
Hi,&lt;br&gt;&lt;br&gt;The&nbsp;patch&nbsp;that&nbsp;changed&nbsp;the&nbsp;generic&nbsp;type&nbsp;definition&nbsp;to&nbsp;be&nbsp;the&nbsp;same&nbsp;instance&nbsp;of&nbsp;the&nbsp;fully&nbsp;open&nbsp;instantiation&nbsp;introduced&nbsp;a&nbsp;small&nbsp;issue&nbsp;in&nbsp;the&nbsp;encoding&nbsp;of&nbsp;types.&nbsp;This&nbsp;issue&nbsp;is&nbsp;quite&nbsp;subtle&nbsp;and&nbsp;gmcs&nbsp;produces&nbsp;it&nbsp;only&nbsp;on&nbsp;rare&nbsp;situations.<br>
&lt;br&gt;&lt;br&gt;If&nbsp;you&nbsp;use,&nbsp;for&nbsp;example:&amp;nbsp;&nbsp;ILGenerator::Emit&nbsp;(OpCodes.Callvirt,&nbsp;MethodInfo),&nbsp;where&nbsp;the&nbsp;method&nbsp;belongs&nbsp;directly&nbsp;to&nbsp;the&nbsp;TypeBuilder,&nbsp;it&nbsp;will&nbsp;generate&nbsp;the&nbsp;wrong&nbsp;code.&nbsp;This&nbsp;was&nbsp;demonstrated&nbsp;by&nbsp;gtest-203,&nbsp;it&nbsp;generates&amp;nbsp;&nbsp;&amp;quot;callvirt&amp;nbsp;&amp;nbsp;&nbsp;instance&nbsp;void&nbsp;class&nbsp;C`2::bar&amp;lt;!2,!3&amp;gt;()&amp;quot;&nbsp;instead&nbsp;of&nbsp;&amp;quot;callvirt&amp;nbsp;&amp;nbsp;&nbsp;instance&nbsp;void&nbsp;class&nbsp;C`2&amp;lt;!X,!Y&amp;gt;::bar&amp;lt;!2,!3&amp;gt;()&amp;quot;&nbsp;(notice&nbsp;that&nbsp;C`2&nbsp;is&nbsp;instantiated&nbsp;here).<br>
&lt;br&gt;&lt;br&gt;The&nbsp;major&nbsp;issue&nbsp;fixing&nbsp;this&nbsp;is&nbsp;regarding&nbsp;how&nbsp;the&nbsp;generic&nbsp;type&nbsp;definition&nbsp;should&nbsp;be&nbsp;encoded&nbsp;in&nbsp;metadata&nbsp;tables.&nbsp;First,&nbsp;all&nbsp;uses&nbsp;should&nbsp;be&nbsp;replaced&nbsp;by&nbsp;an&nbsp;explicit&nbsp;instantiation,&nbsp;a&nbsp;typespec&nbsp;token,&nbsp;and&amp;nbsp;&nbsp;the&nbsp;type&nbsp;itself&nbsp;must&nbsp;be&nbsp;encoded&nbsp;using&nbsp;a&nbsp;typedef&nbsp;or&nbsp;typeref.&nbsp;To&nbsp;archive&nbsp;that&nbsp;I&nbsp;had&nbsp;to&nbsp;do&nbsp;some&nbsp;big&nbsp;changes&nbsp;in&nbsp;<br>
reflection.c,&nbsp;shifting&nbsp;the&nbsp;typespec&nbsp;tokens&nbsp;from&nbsp;assembly-&amp;gt;typedef&nbsp;cache&nbsp;to&nbsp;assembly-&amp;gt;typespec.&lt;br&gt;&lt;br&gt;&lt;br&gt;Cheers,&lt;br&gt;Rodrigo&lt;br&gt;<br>

</tt>
