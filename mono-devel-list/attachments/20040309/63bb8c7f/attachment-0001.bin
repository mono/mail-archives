Index: DataBinderTests.cs
===================================================================
RCS file: /mono/mcs/class/System.Web/Test/DataBinderTests.cs,v
retrieving revision 1.1
diff -u -r1.1 DataBinderTests.cs
--- DataBinderTests.cs	31 Oct 2002 03:46:32 -0000	1.1
+++ DataBinderTests.cs	9 Mar 2004 18:07:04 -0000
@@ -50,9 +50,11 @@
 #endif
 			instance = new ClassInstance ("instance");
 			instance.another = new ClassInstance ("another");
+			echo = new StringEcho();
 		}
 
 		static ClassInstance instance;
+		static StringEcho echo;
 
 		public void TestEval1 ()
 		{
@@ -95,6 +97,22 @@
 			//AssertEquals ("Eval2 #4", DataBinder.Eval (instance, "Another[\"hi] there!\"]"), o);
 		}
 
+		public void TestEval3 ()
+		{
+			try {
+				DataBinder.Eval (echo, "[0]");
+				Fail ("Eval3 #1 didn't throw exception");
+			} catch (ArgumentException) {
+			}
+
+			AssertEquals ("Eval3 #2", DataBinder.Eval (echo, "[test]"), "test");
+			AssertEquals ("Eval3 #3", DataBinder.Eval (echo, "[\"test\"]"), "test");
+			AssertEquals ("Eval3 #4", DataBinder.Eval (echo, "['test']"), "test");
+			AssertEquals ("Eval3 #5", DataBinder.Eval (echo, "['test\"]"), "'test\"");
+			AssertEquals ("Eval3 #6", DataBinder.Eval (echo, "[\"test']"), "\"test'");
+		}
+
+
 #if !NUNIT
 		void Assert (string msg, bool result)
 		{
@@ -175,6 +193,13 @@
 			get {
 				return another;
 			}
+		}
+	}
+
+	class StringEcho
+	{
+		public object this [string msg] {
+			get { return msg; }
 		}
 	}
 }
