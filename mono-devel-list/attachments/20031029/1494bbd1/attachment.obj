Index: io.c
===================================================================
RCS file: /mono/mono/mono/io-layer/io.c,v
retrieving revision 1.43
diff -u -r1.43 io.c
--- io.c	28 Oct 2003 11:18:50 -0000	1.43
+++ io.c	29 Oct 2003 13:13:56 -0000
@@ -1530,6 +1530,14 @@
 	g_free (utf8_name);
 	g_free (utf8_dest_name);
 
+	if (result != 0 && errno == EXDEV) {    /* cross device move */
+		/* try to copy and delete the source file */
+		if (!CopyFile(name, dest_name, TRUE))
+			return FALSE;
+
+		return DeleteFile(name);
+	}
+
 	if (result == 0)
 		return TRUE;
 	
