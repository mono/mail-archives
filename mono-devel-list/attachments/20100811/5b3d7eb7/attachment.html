<tt>
&lt;div&gt;Hi,&nbsp;&lt;br&gt;thank&nbsp;you&nbsp;for&nbsp;the&nbsp;hint&nbsp;to&nbsp;mono_tread_attach.&nbsp;I&nbsp;should&nbsp;spend&nbsp;more&nbsp;time&nbsp;with&nbsp;RTFM.&nbsp;Now&nbsp;using&nbsp;this&nbsp;I&nbsp;was&nbsp;able&nbsp;to&nbsp;get&nbsp;beyond&nbsp;the&nbsp;init&nbsp;and&nbsp;the&nbsp;attach&nbsp;but&nbsp;crashed&nbsp;again&nbsp;at&nbsp;the&nbsp;creation&nbsp;of&nbsp;a&nbsp;seperate&nbsp;app_domain.&nbsp;While&nbsp;this&nbsp;might&nbsp;be&nbsp;accepted,&nbsp;since&nbsp;I&nbsp;could&nbsp;create&nbsp;the&nbsp;app&nbsp;domain&nbsp;in&nbsp;the&nbsp;main&nbsp;thread&nbsp;as&nbsp;well&nbsp;I&nbsp;finally&nbsp;got&nbsp;stuck&nbsp;with&nbsp;the&nbsp;following&nbsp;error&nbsp;upon &nbsp;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;mono_domain_assembly_open&nbsp;(not&nbsp;using&nbsp;app&nbsp;domains&nbsp;at&nbsp;all).&lt;/span&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;&lt;meta&nbsp;name=&quot;ProgId&quot;&nbsp;content=&quot;Word.Document&quot;&gt;&lt;meta&nbsp;name=&quot;Generator&quot;&nbsp;content=&quot;Microsoft&nbsp;Word&nbsp;11&quot;&gt;&lt;meta&nbsp;name=&quot;Originator&quot;&nbsp;content=&quot;Microsoft&nbsp;Word&nbsp;11&quot;&gt;&lt;link&nbsp;rel=&quot;File-List&quot;&nbsp;href=&quot;file:///C:%5CUsers%5Cffuc%5CAppData%5CLocal%5CTemp%5Cmsohtml1%5C01%5Cclip_filelist.xml&quot;&gt;&lt;style&gt;<br>
&lt;!--<br>
&nbsp;/*&nbsp;Font&nbsp;Definitions&nbsp;*/<br>
&nbsp;@font-face<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{font-family:Helvetica;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppanose-1:2&nbsp;11&nbsp;6&nbsp;4&nbsp;2&nbsp;2&nbsp;2&nbsp;2&nbsp;2&nbsp;4;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-font-charset:0;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-generic-font-family:swiss;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-font-pitch:variable;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-font-signature:-536855809&nbsp;-1073711037&nbsp;9&nbsp;0&nbsp;511&nbsp;0;}<br>
&nbsp;/*&nbsp;Style&nbsp;Definitions&nbsp;*/<br>
&nbsp;p.MsoNormal,&nbsp;li.MsoNormal,&nbsp;div.MsoNormal<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-style-parent:&quot;&quot;;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin:0cm;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin-bottom:.0001pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-pagination:widow-orphan;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-size:12.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:&quot;Times&nbsp;New&nbsp;Roman&quot;;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-fareast-font-family:&quot;Times&nbsp;New&nbsp;Roman&quot;;}<br>
@page&nbsp;Section1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{size:595.0pt&nbsp;842.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin:70.85pt&nbsp;72.0pt&nbsp;2.0cm&nbsp;72.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-header-margin:36.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-footer-margin:36.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-paper-source:0;}<br>
div.Section1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{page:Section1;}<br>
--&gt;<br>
&lt;/style&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;Program&nbsp;received&nbsp;signal&nbsp;SIGSEGV,&nbsp;Segmentation&nbsp;fault.&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;[Switching&nbsp;to&nbsp;process&nbsp;17740]&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;0x00007fff870196d7&nbsp;in&nbsp;pthread_mutex_lock&nbsp;()&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;(gdb)&nbsp;where&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;#0&lt;span&nbsp;style=&quot;&quot;&gt; <br>
&lt;/span&gt;0x00007fff870196d7&nbsp;in&nbsp;pthread_mutex_lock&nbsp;()&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;#1&lt;span&nbsp;style=&quot;&quot;&gt; <br>
&lt;/span&gt;0x0000000100766b86&nbsp;in&nbsp;mono_domain_assembly_open&nbsp;()&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;#2&lt;span&nbsp;style=&quot;&quot;&gt; <br>
&lt;/span&gt;0x00000001000eae5d&nbsp;in&nbsp;ScriptEngineMono::ExecuteMain&nbsp;(this=0x1028b2250,<br>
rFile=0x116e3f6d8&nbsp;&amp;quot;/Users/fuchs/Scripts/auto.exe&amp;quot;)&nbsp;at<br>
ScriptEngine/ScriptEngineMono.cpp:94&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;#3&lt;span&nbsp;style=&quot;&quot;&gt; &nbsp;&lt;/span&gt;0x00000001000eb5a1<br>
in&nbsp;ScriptEngineMono::CompileAndRun&nbsp;(this=0x1028b2250,&nbsp;rSourcefiles={{p&nbsp;=<br>
{static&nbsp;shared_null&nbsp;=&nbsp;{ref&nbsp;=&nbsp;{_q_value&nbsp;=&nbsp;3691},&nbsp;alloc&nbsp;=&nbsp;0,&nbsp;begin&nbsp;=&nbsp;0,&nbsp;end&nbsp;=&nbsp;0,<br>
sharable&nbsp;=&nbsp;1,&nbsp;array&nbsp;=&nbsp;{0x0}},&nbsp;d&nbsp;=&nbsp;0x10287d3e0},&nbsp;d&nbsp;=&nbsp;0x10287d3e0}})&nbsp;at<br>
ScriptEngine/ScriptEngineMono.cpp:168&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;#4&lt;span&nbsp;style=&quot;&quot;&gt; <br>
&lt;/span&gt;0x00000001000f5d5f&nbsp;in&nbsp;ScriptEngine::run&nbsp;(this=0x7fff5fbfdf90)&nbsp;at<br>
ScriptEngine/ScriptEngine.cpp:1153&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;#5&lt;span&nbsp;style=&quot;&quot;&gt; <br>
&lt;/span&gt;0x0000000101d1adaf&nbsp;in&nbsp;QThreadPrivate::start&nbsp;()&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;#6&lt;span&nbsp;style=&quot;&quot;&gt; <br>
&lt;/span&gt;0x00007fff8704d456&nbsp;in&nbsp;_pthread_start&nbsp;()&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;font-family:&nbsp;Helvetica;&quot;&gt;#7&lt;span&nbsp;style=&quot;&quot;&gt; <br>
&lt;/span&gt;0x00007fff8704d309&nbsp;in&nbsp;thread_start&nbsp;()&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;br&gt;Frank&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;pre&gt;Hey,&lt;br&gt;&lt;br&gt;On&nbsp;10.08.2010&nbsp;22:00,&nbsp;Frank&nbsp;Fuchs&nbsp;wrote:&lt;br&gt;&amp;gt;&lt;i&gt;&nbsp;Hi,&lt;br&gt;<br>
&lt;/i&gt;&amp;gt;&lt;i&gt;&nbsp;I&nbsp;think&nbsp;I&nbsp;have&nbsp;a&nbsp;rather&nbsp;special&nbsp;problem&nbsp;here.&nbsp;I&nbsp;have&nbsp;a&nbsp;Qt&nbsp;C++&nbsp;application&nbsp;with&nbsp;an&nbsp;embedded&nbsp;mono&nbsp;jit.&lt;br&gt;&lt;/i&gt;&amp;gt;&lt;i&gt;&nbsp;Everything&nbsp;works&nbsp;nicely&nbsp;so&nbsp;far.&nbsp;However,&nbsp;I&nbsp;recently&nbsp;tried&nbsp;to&nbsp;start&nbsp;the&nbsp;Jit&nbsp;from&nbsp;a&nbsp;Qthread&lt;br&gt;<br>
&lt;/i&gt;&amp;gt;&lt;i&gt;&nbsp;(in&nbsp;order&nbsp;to&nbsp;have&nbsp;an&nbsp;unblocked&nbsp;GUI&nbsp;during&nbsp;the&nbsp;&amp;quot;C#&nbsp;script&amp;quot;&nbsp;execution,&nbsp;which&nbsp;can&nbsp;be&nbsp;several&nbsp;minutes).&lt;br&gt;&lt;/i&gt;&amp;gt;&lt;i&gt;&nbsp;Sadly&nbsp;I&nbsp;don&amp;#39;t&nbsp;even&nbsp;get&nbsp;close&nbsp;to&nbsp;execution&nbsp;of&nbsp;the&nbsp;assembly,&nbsp;since&nbsp;the&nbsp;mono_jit_init_version&nbsp;call&nbsp;fails.&lt;br&gt;<br>
&lt;/i&gt;&amp;gt;&lt;i&gt;&nbsp;The&nbsp;stack&nbsp;trace&nbsp;provided&nbsp;by&nbsp;gdb&nbsp;is&nbsp;attached&nbsp;below.&nbsp;To&nbsp;me&nbsp;it&nbsp;looks&nbsp;like&nbsp;Qt&nbsp;does&nbsp;not&nbsp;play&nbsp;nice&nbsp;with&nbsp;pthreads&nbsp;as&nbsp;used&nbsp;by&nbsp;the&nbsp;GC.&lt;br&gt;&lt;/i&gt;&amp;gt;&lt;i&gt;&nbsp;(I&nbsp;found&nbsp;something&nbsp;similar&nbsp;using&nbsp;QThreads&nbsp;and&nbsp;openmp&nbsp;together.)&lt;br&gt;&lt;/i&gt;&amp;gt;&lt;i&gt;&nbsp;Any&nbsp;comments?&nbsp;Whose&nbsp;fault&nbsp;is&nbsp;it?&nbsp;I&nbsp;read&nbsp;something&nbsp;about&nbsp;the&nbsp;&amp;quot;new&nbsp;GC&amp;quot;,&nbsp;would&nbsp;it&nbsp;cure&nbsp;this?&lt;br&gt;<br>
&lt;/i&gt;&amp;gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&amp;gt;&lt;i&gt;&nbsp;BTW:&nbsp;system&nbsp;is&nbsp;Mac&nbsp;OS&nbsp;X&nbsp;10.6.4&nbsp;with&nbsp;mono&nbsp;2.7&nbsp;build&nbsp;from&nbsp;trunk.&lt;br&gt;&lt;/i&gt;&lt;br&gt;Given&nbsp;that&nbsp;mono_jit_init()&nbsp;can&amp;#39;t&nbsp;be&nbsp;called&nbsp;more&nbsp;than&nbsp;once&nbsp;per&lt;br&gt;process,&nbsp;you&nbsp;could&nbsp;just&nbsp;call&nbsp;it&nbsp;from&nbsp;the&nbsp;main&nbsp;thread&nbsp;and&nbsp;forget&lt;br&gt;<br>
about&nbsp;the&nbsp;issue&nbsp;after&nbsp;you&amp;#39;ve&nbsp;filed&nbsp;a&nbsp;bug&nbsp;at&lt;br&gt;&lt;a&nbsp;href=&quot;http://mono-project.com/Bugs&quot;&gt;http://mono-project.com/Bugs&lt;/a&gt;&nbsp;:)&lt;br&gt;&lt;br&gt;The&nbsp;real&nbsp;work&nbsp;(compiling&nbsp;and&nbsp;executing&nbsp;your&nbsp;C#&nbsp;&amp;quot;scripts&amp;quot;)&nbsp;can&nbsp;be&lt;br&gt;performed&nbsp;from&nbsp;a&nbsp;separate&nbsp;thread,&nbsp;but&nbsp;don&amp;#39;t&nbsp;forget&nbsp;to&nbsp;call&lt;br&gt;<br>
mono_thread_attach(domain)&nbsp;from&nbsp;this&nbsp;thread.&lt;br&gt;&lt;br&gt;Robert&lt;br&gt;&lt;/pre&gt;&lt;/blockquote&gt;<br>

</tt>
