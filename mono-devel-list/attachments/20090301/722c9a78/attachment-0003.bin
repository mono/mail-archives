>From a18d38c74ab47267bba69cae9596477fcedd1f9a Mon Sep 17 00:00:00 2001
From: Andreas <andreas@blacklight.(none)>
Date: Sun, 1 Mar 2009 10:26:16 +0100
Subject: [PATCH] Change mono/c interface so CopyFile now returns guint32 instead of gboolean

---
 mono/metadata/file-io.c |    8 ++++----
 mono/metadata/file-io.h |    2 +-
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/mono/metadata/file-io.c b/mono/metadata/file-io.c
index d208d13..f9205bd 100644
--- a/mono/metadata/file-io.c
+++ b/mono/metadata/file-io.c
@@ -489,18 +489,18 @@ ves_icall_System_IO_MonoIO_ReplaceFile (MonoString *sourceFileName, MonoString *
 	return ret;
 }
 
-MonoBoolean
+guint32
 ves_icall_System_IO_MonoIO_CopyFile (MonoString *path, MonoString *dest,
 				     MonoBoolean overwrite, gint32 *error)
 {
-	gboolean ret;
+	guint32 ret;
 	
 	MONO_ARCH_SAVE_REGS;
 
 	*error=ERROR_SUCCESS;
 	
-	ret=CopyFile (mono_string_chars (path), mono_string_chars (dest), !overwrite);
-	if(ret==FALSE) {
+	ret=CopyFileDistinct (mono_string_chars (path), mono_string_chars (dest), !overwrite);
+	if(ret!=0) {
 		*error=GetLastError ();
 	}
 	
diff --git a/mono/metadata/file-io.h b/mono/metadata/file-io.h
index 22c6707..0ce090b 100644
--- a/mono/metadata/file-io.h
+++ b/mono/metadata/file-io.h
@@ -136,7 +136,7 @@ extern MonoBoolean
 ves_icall_System_IO_MonoIO_MoveFile (MonoString *path, MonoString *dest,
 				     gint32 *error) MONO_INTERNAL;
 
-extern MonoBoolean
+extern guint32
 ves_icall_System_IO_MonoIO_CopyFile (MonoString *path, MonoString *dest,
 				     MonoBoolean overwrite, gint32 *error) MONO_INTERNAL;
 
-- 
1.6.0.4

