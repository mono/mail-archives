<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;know&nbsp;my&nbsp;opinion&nbsp;is&nbsp;of&nbsp;mixed&nbsp;value,&nbsp;but&nbsp;it&nbsp;looks&nbsp;to&nbsp;make&nbsp;sense&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;me..&nbsp;&nbsp;If&nbsp;the&nbsp;toolstripitem&nbsp;is&nbsp;being&nbsp;changed&nbsp;so&nbsp;it&nbsp;no&nbsp;longer&nbsp;has&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;owner,&nbsp;calculating&nbsp;a&nbsp;size&nbsp;might&nbsp;not&nbsp;make&nbsp;sense....&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-Rob&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;06/15/2012&nbsp;08:34&nbsp;PM,&nbsp;Steven&nbsp;Boswell&nbsp;II&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:1339806877.40054.YahooMailNeo@web160406.mail.bf1.yahoo.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:times<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:12pt&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Enclosed&nbsp;is&nbsp;a&nbsp;new&nbsp;patch,&nbsp;mostly&nbsp;for&nbsp;discussion&nbsp;purposes,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;since&nbsp;there's&nbsp;no&nbsp;unit&nbsp;test&nbsp;&amp;&nbsp;I&nbsp;don't&nbsp;know&nbsp;how&nbsp;I&nbsp;would<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;write&nbsp;one&nbsp;for&nbsp;this.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Today,&nbsp;after&nbsp;using&nbsp;my&nbsp;application&nbsp;in&nbsp;a&nbsp;particular&nbsp;way,&nbsp;I<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;got&nbsp;it&nbsp;to&nbsp;crash,&nbsp;putting&nbsp;up&nbsp;an&nbsp;&quot;Exception&nbsp;caught&quot;&nbsp;window.&nbsp;&nbsp;I<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can't&nbsp;reproduce&nbsp;the&nbsp;problem&nbsp;outside&nbsp;of&nbsp;running&nbsp;it&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MonoDevelop&nbsp;debugger,&nbsp;and&nbsp;there&nbsp;appears&nbsp;to&nbsp;be&nbsp;no&nbsp;way&nbsp;to&nbsp;copy<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;stack-trace&nbsp;tab&nbsp;in&nbsp;the&nbsp;exception-caught<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window&nbsp;(really?&nbsp;how&nbsp;the&nbsp;heck&nbsp;did&nbsp;THIS&nbsp;get&nbsp;missed?),&nbsp;so&nbsp;I&nbsp;can't<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post&nbsp;the&nbsp;full&nbsp;details.&nbsp;&nbsp;But&nbsp;it&nbsp;starts&nbsp;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.ComponentModel.Finalize()&nbsp;with&nbsp;a&nbsp;tool-strip-item&nbsp;(the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;one&nbsp;I&nbsp;selected&nbsp;seconds&nbsp;before&nbsp;the&nbsp;crash),&nbsp;and&nbsp;ends&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.Drawing.GDIPlus.CheckStatus(Status),&nbsp;where&nbsp;it&nbsp;reports<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;A&nbsp;null&nbsp;reference&nbsp;or&nbsp;invalid&nbsp;value&nbsp;was&nbsp;found&nbsp;[GDI+&nbsp;status:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InvalidParameter]&quot;.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;why&nbsp;a&nbsp;copy&nbsp;of&nbsp;my&nbsp;menu-item&nbsp;is&nbsp;getting<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finalized;&nbsp;I&nbsp;certainly&nbsp;didn't&nbsp;make&nbsp;a&nbsp;copy&nbsp;of&nbsp;it.&nbsp;&nbsp;The&nbsp;good<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;news&nbsp;is,&nbsp;this&nbsp;crash&nbsp;is&nbsp;consistently&nbsp;repeatable,&nbsp;if&nbsp;I&nbsp;just&nbsp;use<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my&nbsp;application&nbsp;in&nbsp;the&nbsp;same&nbsp;certain&nbsp;order.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Digging&nbsp;through&nbsp;the&nbsp;stack&nbsp;trace,&nbsp;I&nbsp;arrived&nbsp;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.Windows.Forms.ToolStripItem.set_InternalOwner,&nbsp;where<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;owner&nbsp;was&nbsp;being&nbsp;set&nbsp;to&nbsp;null,&nbsp;and&nbsp;right<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;afterwards,&nbsp;CalculateAutoSize()&nbsp;was&nbsp;being&nbsp;called.&nbsp;&nbsp;Why&nbsp;would<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;anyone&nbsp;need&nbsp;to&nbsp;calculate&nbsp;the&nbsp;size&nbsp;of&nbsp;a&nbsp;menu-item&nbsp;that&nbsp;isn't<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;even&nbsp;connected&nbsp;to&nbsp;a&nbsp;menu&nbsp;any&nbsp;more?&nbsp;&nbsp;So,&nbsp;for&nbsp;me,&nbsp;the&nbsp;bug&nbsp;fix<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;was&nbsp;obvious:&nbsp;check&nbsp;if&nbsp;the&nbsp;owner&nbsp;isn't&nbsp;null&nbsp;before<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calling&nbsp;CalculateAutoSize().&nbsp;&nbsp;That's&nbsp;what&nbsp;the&nbsp;enclosed&nbsp;patch<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;does.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;With&nbsp;this&nbsp;patch,&nbsp;the&nbsp;bug&nbsp;doesn't&nbsp;reproduce,&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;menu-item&nbsp;I&nbsp;selected&nbsp;is&nbsp;still&nbsp;there&nbsp;and&nbsp;doing&nbsp;fine.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Any&nbsp;thoughts&nbsp;on&nbsp;the&nbsp;correctness&nbsp;of&nbsp;this&nbsp;bug&nbsp;fix?&nbsp;&nbsp;Or&nbsp;how<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;one&nbsp;would&nbsp;write&nbsp;a&nbsp;unit&nbsp;test&nbsp;for&nbsp;it?&nbsp;&nbsp;Or&nbsp;how&nbsp;to&nbsp;copy&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contents&nbsp;of&nbsp;the&nbsp;stack-trace&nbsp;tab&nbsp;in&nbsp;MonoDevelop's<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exception-caught&nbsp;window?&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Steven&nbsp;Boswell&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;fieldset&nbsp;class=&quot;mimeAttachmentHeader&quot;&gt;&lt;/fieldset&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;_______________________________________________<br>
Mono-devel-list&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
