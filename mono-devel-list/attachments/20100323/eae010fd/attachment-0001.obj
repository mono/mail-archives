Index: System.ServiceModel.csproj
===================================================================
--- System.ServiceModel.csproj	(revision 154044)
+++ System.ServiceModel.csproj	(working copy)
@@ -1,20 +1,18 @@
-ï»¿<?xml version="1.0" encoding="utf-8"?>
+<?xml version="1.0" encoding="utf-8"?>
 <Project ToolsVersion="3.5" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
   <PropertyGroup>
     <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
     <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
-    <ProductVersion>9.0.21022</ProductVersion>
+    <ProductVersion>9.0.30729</ProductVersion>
     <SchemaVersion>2.0</SchemaVersion>
     <ProjectGuid>{0CD5DD13-89FF-4710-BAE2-4957418F4251}</ProjectGuid>
     <OutputType>Library</OutputType>
     <AppDesignerFolder>Properties</AppDesignerFolder>
     <RootNamespace>System.ServiceModel</RootNamespace>
     <AssemblyName>System.ServiceModel</AssemblyName>
-    <TargetFrameworkVersion>v3.0</TargetFrameworkVersion>
+    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
     <FileAlignment>512</FileAlignment>
     <SignAssembly>true</SignAssembly>
-    <AssemblyOriginatorKeyFile>
-    </AssemblyOriginatorKeyFile>
     <RunPostBuildEvent>OnOutputUpdated</RunPostBuildEvent>
   </PropertyGroup>
   <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
@@ -22,7 +20,7 @@
     <DebugType>full</DebugType>
     <Optimize>false</Optimize>
     <OutputPath>bin\Debug\</OutputPath>
-    <DefineConstants>TRACE;DEBUG;NET_2_0,TARGET_DOTNET</DefineConstants>
+    <DefineConstants>TRACE;DEBUG;NET_3_5,TARGET_DOTNET</DefineConstants>
     <ErrorReport>prompt</ErrorReport>
     <WarningLevel>4</WarningLevel>
     <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
@@ -38,12 +36,11 @@
   </PropertyGroup>
   <ItemGroup>
     <Reference Include="System" />
-    <Reference Include="System.configuration" />
+    <Reference Include="System.Core">
+      <RequiredTargetFramework>3.5</RequiredTargetFramework>
+    </Reference>
     <Reference Include="System.Data" />
     <Reference Include="System.Drawing" />
-    <Reference Include="System.IdentityModel">
-      <RequiredTargetFramework>3.0</RequiredTargetFramework>
-    </Reference>
     <Reference Include="System.IdentityModel.Selectors">
       <RequiredTargetFramework>3.0</RequiredTargetFramework>
     </Reference>
@@ -57,6 +54,7 @@
     <Reference Include="System.Web.Services" />
     <Reference Include="System.Windows.Forms" />
     <Reference Include="System.Xml" />
+    <Reference Include="System.Configuration" />
   </ItemGroup>
   <ItemGroup>
     <Compile Include="..\..\build\common\Locale.cs">
@@ -66,158 +64,60 @@
       <Link>MonoTODOAttribute.cs</Link>
     </Compile>
     <Compile Include="Assembly\AssemblyInfo.cs" />
+    <Compile Include="..\Mono.Security\Mono.Math.Prime.Generator\NextPrimeFinder.cs" />
+    <Compile Include="..\Mono.Security\Mono.Math.Prime.Generator\PrimeGeneratorBase.cs" />
+    <Compile Include="..\Mono.Security\Mono.Math.Prime.Generator\SequentialSearchPrimeGeneratorBase.cs" />
+    <Compile Include="..\Mono.Security\Mono.Math.Prime\ConfidenceFactor.cs" />
+    <Compile Include="..\Mono.Security\Mono.Math.Prime\PrimalityTests.cs" />
+    <Compile Include="..\Mono.Security\Mono.Math\BigInteger.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\ARC4Managed.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\CryptoConvert.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\CryptoTools.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\MD2.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\MD2Managed.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\MD4.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\MD4Managed.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\PKCS1.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\PKCS8.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\RC4.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.Cryptography\RSAManaged.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\AuthorityKeyIdentifierExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\BasicConstraintsExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\CertificatePoliciesExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\CRLDistributionPointsExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\ExtendedKeyUsageExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\GeneralNames.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\KeyAttributesExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\KeyUsageExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\NetscapeCertTypeExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\PrivateKeyUsagePeriodExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\SubjectAltNameExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509.Extensions\SubjectKeyIdentifierExtension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\ITrustAnchors.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\PKCS12.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\TrustAnchors.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X501Name.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509Builder.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509Certificate.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509CertificateBuilder.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509CertificateCollection.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509Chain.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509ChainStatusFlags.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509CRL.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509Extension.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509Extensions.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509Store.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509StoreManager.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X509Stores.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security.X509\X520Attributes.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security\ASN1.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security\ASN1Convert.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security\PKCS7.cs" />
+    <Compile Include="..\Mono.Security\Mono.Security\StrongName.cs" />
+    <Compile Include="System.ServiceModel.Channels\ReliableSessionBindingElement.cs" />
+    <Compile Include="System.ServiceModel.Channels\PrivacyNoticeBindingElement.cs" />
   </ItemGroup>
   <ItemGroup>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Math.Prime.Generator\NextPrimeFinder.cs">
-      <Link>Mono.Math.Prime.Generator\NextPrimeFinder.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Math.Prime.Generator\PrimeGeneratorBase.cs">
-      <Link>Mono.Math.Prime.Generator\PrimeGeneratorBase.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Math.Prime.Generator\SequentialSearchPrimeGeneratorBase.cs">
-      <Link>Mono.Math.Prime.Generator\SequentialSearchPrimeGeneratorBase.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Math.Prime\ConfidenceFactor.cs">
-      <Link>Mono.Math.Prime\ConfidenceFactor.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Math.Prime\PrimalityTests.cs">
-      <Link>Mono.Math.Prime\PrimalityTests.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Math\BigInteger.cs">
-      <Link>Mono.Math\BigInteger.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\ARC4Managed.cs">
-      <Link>Mono.Security.Cryptography\ARC4Managed.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\CryptoConvert.cs">
-      <Link>Mono.Security.Cryptography\CryptoConvert.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\CryptoTools.cs">
-      <Link>Mono.Security.Cryptography\CryptoTools.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\MD2.cs">
-      <Link>Mono.Security.Cryptography\MD2.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\MD2Managed.cs">
-      <Link>Mono.Security.Cryptography\MD2Managed.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\MD4.cs">
-      <Link>Mono.Security.Cryptography\MD4.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\MD4Managed.cs">
-      <Link>Mono.Security.Cryptography\MD4Managed.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\PKCS1.cs">
-      <Link>Mono.Security.Cryptography\PKCS1.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\PKCS8.cs">
-      <Link>Mono.Security.Cryptography\PKCS8.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\RC4.cs">
-      <Link>Mono.Security.Cryptography\RC4.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.Cryptography\RSAManaged.cs">
-      <Link>Mono.Security.Cryptography\RSAManaged.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\AuthorityKeyIdentifierExtension.cs">
-      <Link>Mono.Security.X509.Extensions\AuthorityKeyIdentifierExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\BasicConstraintsExtension.cs">
-      <Link>Mono.Security.X509.Extensions\BasicConstraintsExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\CertificatePoliciesExtension.cs">
-      <Link>Mono.Security.X509.Extensions\CertificatePoliciesExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\CRLDistributionPointsExtension.cs">
-      <Link>Mono.Security.X509.Extensions\CRLDistributionPointsExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\ExtendedKeyUsageExtension.cs">
-      <Link>Mono.Security.X509.Extensions\ExtendedKeyUsageExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\GeneralNames.cs">
-      <Link>Mono.Security.X509.Extensions\GeneralNames.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\KeyAttributesExtension.cs">
-      <Link>Mono.Security.X509.Extensions\KeyAttributesExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\KeyUsageExtension.cs">
-      <Link>Mono.Security.X509.Extensions\KeyUsageExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\NetscapeCertTypeExtension.cs">
-      <Link>Mono.Security.X509.Extensions\NetscapeCertTypeExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\PrivateKeyUsagePeriodExtension.cs">
-      <Link>Mono.Security.X509.Extensions\PrivateKeyUsagePeriodExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\SubjectAltNameExtension.cs">
-      <Link>Mono.Security.X509.Extensions\SubjectAltNameExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509.Extensions\SubjectKeyIdentifierExtension.cs">
-      <Link>Mono.Security.X509.Extensions\SubjectKeyIdentifierExtension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\ITrustAnchors.cs">
-      <Link>Mono.Security.X509\ITrustAnchors.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\PKCS12.cs">
-      <Link>Mono.Security.X509\PKCS12.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\TrustAnchors.cs">
-      <Link>Mono.Security.X509\TrustAnchors.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X501Name.cs">
-      <Link>Mono.Security.X509\X501Name.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509Builder.cs">
-      <Link>Mono.Security.X509\X509Builder.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509Certificate.cs">
-      <Link>Mono.Security.X509\X509Certificate.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509CertificateBuilder.cs">
-      <Link>Mono.Security.X509\X509CertificateBuilder.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509CertificateCollection.cs">
-      <Link>Mono.Security.X509\X509CertificateCollection.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509Chain.cs">
-      <Link>Mono.Security.X509\X509Chain.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509ChainStatusFlags.cs">
-      <Link>Mono.Security.X509\X509ChainStatusFlags.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509CRL.cs">
-      <Link>Mono.Security.X509\X509CRL.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509Extension.cs">
-      <Link>Mono.Security.X509\X509Extension.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509Extensions.cs">
-      <Link>Mono.Security.X509\X509Extensions.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509Store.cs">
-      <Link>Mono.Security.X509\X509Store.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509StoreManager.cs">
-      <Link>Mono.Security.X509\X509StoreManager.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X509Stores.cs">
-      <Link>Mono.Security.X509\X509Stores.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security.X509\X520Attributes.cs">
-      <Link>Mono.Security.X509\X520Attributes.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security\ASN1.cs">
-      <Link>Mono.Security\ASN1.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security\ASN1Convert.cs">
-      <Link>Mono.Security\ASN1Convert.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security\PKCS7.cs">
-      <Link>Mono.Security\PKCS7.cs</Link>
-    </Compile>
-    <Compile Include="..\..\..\mcs\class\Mono.Security\Mono.Security\StrongName.cs">
-      <Link>Mono.Security\StrongName.cs</Link>
-    </Compile>
     <Compile Include="..\..\build\common\Consts.cs.in">
       <Link>Consts.cs.in</Link>
     </Compile>
@@ -260,6 +160,7 @@
     <Compile Include="Mono.CodeGeneration\CodeReturn.cs" />
     <Compile Include="Mono.CodeGeneration\CodeSelect.cs" />
     <Compile Include="Mono.CodeGeneration\CodeSelfIncrement.cs" />
+    <Compile Include="Mono.CodeGeneration\CodeTryBlock.cs" />
     <Compile Include="Mono.CodeGeneration\CodeUnaryOperation.cs" />
     <Compile Include="Mono.CodeGeneration\CodeValueReference.cs" />
     <Compile Include="Mono.CodeGeneration\CodeVariableDeclaration.cs" />
@@ -352,6 +253,7 @@
     <Compile Include="System.ServiceModel.Activation\IServiceHostFactory.cs" />
     <Compile Include="System.ServiceModel.Activation\ServiceHostFactory.cs" />
     <Compile Include="System.ServiceModel.Activation\ServiceHostFactoryBase.cs" />
+    <Compile Include="System.ServiceModel.Activation\VirtualPathExtension.cs" />
     <Compile Include="System.ServiceModel.Channels\AddressHeader.cs" />
     <Compile Include="System.ServiceModel.Channels\AddressHeaderCollection.cs" />
     <Compile Include="System.ServiceModel.Channels\AddressingVersion.cs" />
@@ -385,13 +287,15 @@
     <Compile Include="System.ServiceModel.Channels\DeliveryFailure.cs" />
     <Compile Include="System.ServiceModel.Channels\DeliveryStatus.cs" />
     <Compile Include="System.ServiceModel.Channels\DirectionalAction.cs" />
-    <Compile Include="System.ServiceModel.Channels\DuplexSessionChannelBase.cs" />
+    <Compile Include="System.ServiceModel.Channels\DuplexChannelBase.cs" />
+    <Compile Include="System.ServiceModel.Channels\DuplexSessionBase.cs" />
     <Compile Include="System.ServiceModel.Channels\FaultConverter.cs" />
     <Compile Include="System.ServiceModel.Channels\HostedTransportConfiguration.cs" />
     <Compile Include="System.ServiceModel.Channels\HtmlizedException.cs" />
     <Compile Include="System.ServiceModel.Channels\HttpChannelFactory.cs" />
     <Compile Include="System.ServiceModel.Channels\HttpChannelListener.cs" />
-    <Compile Include="System.ServiceModel.Channels\HttpChannelManager.cs" />
+    <Compile Include="System.ServiceModel.Channels\HttpCookieContainerBindingElement.cs" />
+    <Compile Include="System.ServiceModel.Channels\HttpListenerManager.cs" />
     <Compile Include="System.ServiceModel.Channels\HttpReplyChannel.cs" />
     <Compile Include="System.ServiceModel.Channels\HttpRequestChannel.cs" />
     <Compile Include="System.ServiceModel.Channels\HttpRequestContext.cs" />
@@ -408,6 +312,7 @@
     <Compile Include="System.ServiceModel.Channels\IDuplexChannel.cs" />
     <Compile Include="System.ServiceModel.Channels\IDuplexSession.cs" />
     <Compile Include="System.ServiceModel.Channels\IDuplexSessionChannel.cs" />
+    <Compile Include="System.ServiceModel.Channels\IHttpCookieContainer.cs" />
     <Compile Include="System.ServiceModel.Channels\IInputChannel.cs" />
     <Compile Include="System.ServiceModel.Channels\IInputSession.cs" />
     <Compile Include="System.ServiceModel.Channels\IInputSessionChannel.cs" />
@@ -457,11 +362,21 @@
     <Compile Include="System.ServiceModel.Channels\MtomMessageEncoder.cs" />
     <Compile Include="System.ServiceModel.Channels\MtomMessageEncoderFactory.cs" />
     <Compile Include="System.ServiceModel.Channels\MtomMessageEncodingBindingElement.cs" />
+    <Compile Include="System.ServiceModel.Channels\NamedPipeChannelFactory.cs" />
+    <Compile Include="System.ServiceModel.Channels\NamedPipeChannelListener.cs" />
     <Compile Include="System.ServiceModel.Channels\NamedPipeConnectionPoolSettings.cs" />
+    <Compile Include="System.ServiceModel.Channels\NamedPipeReplyChannel.cs" />
+    <Compile Include="System.ServiceModel.Channels\NamedPipeRequestChannel.cs" />
     <Compile Include="System.ServiceModel.Channels\NamedPipetransportBindingElement.cs" />
     <Compile Include="System.ServiceModel.Channels\OneWayBindingElement.cs" />
     <Compile Include="System.ServiceModel.Channels\OneWayBindingElementImporter.cs" />
     <Compile Include="System.ServiceModel.Channels\OutputChannelBase.cs" />
+    <Compile Include="System.ServiceModel.Channels\PeerChannelFactory.cs" />
+    <Compile Include="System.ServiceModel.Channels\PeerChannelListener.cs" />
+    <Compile Include="System.ServiceModel.Channels\PeerCustomResolverBindingElement.cs" />
+    <Compile Include="System.ServiceModel.Channels\PeerDuplexChannel.cs" />
+    <Compile Include="System.ServiceModel.Channels\PeerInputChannel.cs" />
+    <Compile Include="System.ServiceModel.Channels\PeerOutputChannel.cs" />
     <Compile Include="System.ServiceModel.Channels\PeerResolverBindingElement.cs" />
     <Compile Include="System.ServiceModel.Channels\PeerTransportBindingElement.cs" />
     <Compile Include="System.ServiceModel.Channels\PnrpPeerResolverBindingElement.cs" />
@@ -493,10 +408,13 @@
     <Compile Include="System.ServiceModel.Channels\SvcHttpHandler.cs" />
     <Compile Include="System.ServiceModel.Channels\SvcHttpHandlerFactory.cs" />
     <Compile Include="System.ServiceModel.Channels\SymmetricSecurityBindingElement.cs" />
+    <Compile Include="System.ServiceModel.Channels\TcpBinaryFrameManager.cs" />
     <Compile Include="System.ServiceModel.Channels\TcpChannelFactory.cs" />
     <Compile Include="System.ServiceModel.Channels\TcpChannelListener.cs" />
     <Compile Include="System.ServiceModel.Channels\TcpConnectionPoolSettings.cs" />
     <Compile Include="System.ServiceModel.Channels\TcpDuplexSessionChannel.cs" />
+    <Compile Include="System.ServiceModel.Channels\TcpReplyChannel.cs" />
+    <Compile Include="System.ServiceModel.Channels\TcpRequestChannel.cs" />
     <Compile Include="System.ServiceModel.Channels\TcpTransportBindingElement.cs" />
     <Compile Include="System.ServiceModel.Channels\TextMessageEncoder.cs" />
     <Compile Include="System.ServiceModel.Channels\TextMessageEncoderFactory.cs" />
@@ -745,7 +663,6 @@
     <Compile Include="System.ServiceModel.Description\DataContractSerializerOperationBehavior.cs" />
     <Compile Include="System.ServiceModel.Description\FaultDescription.cs" />
     <Compile Include="System.ServiceModel.Description\FaultDescriptionCollection.cs" />
-    <Compile Include="System.ServiceModel.Description\HostedBindingBehavior.cs" />
     <Compile Include="System.ServiceModel.Description\IContractBehavior.cs" />
     <Compile Include="System.ServiceModel.Description\IContractBehaviorAttribute.cs" />
     <Compile Include="System.ServiceModel.Description\IEndpointBehavior.cs" />
@@ -768,7 +685,6 @@
     <Compile Include="System.ServiceModel.Description\MessagePartDescriptionCollection.cs" />
     <Compile Include="System.ServiceModel.Description\MessagePropertyDescription.cs" />
     <Compile Include="System.ServiceModel.Description\MessagePropertyDescriptionCollection.cs" />
-    <Compile Include="System.ServiceModel.Description\MetadataBundle.cs" />
     <Compile Include="System.ServiceModel.Description\MetadataConversionError.cs" />
     <Compile Include="System.ServiceModel.Description\MetadataExchangeBindings.cs" />
     <Compile Include="System.ServiceModel.Description\MetadataExchangeClient.cs" />
@@ -779,6 +695,7 @@
     <Compile Include="System.ServiceModel.Description\MetadataResolver.cs" />
     <Compile Include="System.ServiceModel.Description\MetadataSection.cs" />
     <Compile Include="System.ServiceModel.Description\MetadataSectionSerializerBase.cs" />
+    <Compile Include="System.ServiceModel.Description\MetadataSet.cs" />
     <Compile Include="System.ServiceModel.Description\MustUnderstandBehavior.cs" />
     <Compile Include="System.ServiceModel.Description\OperationContractGenerationContext.cs" />
     <Compile Include="System.ServiceModel.Description\OperationDescription.cs" />
@@ -802,7 +719,6 @@
     <Compile Include="System.ServiceModel.Description\SynchronousReceiveBehavior.cs" />
     <Compile Include="System.ServiceModel.Description\TransactedBatchingBehavior.cs" />
     <Compile Include="System.ServiceModel.Description\TypedMessageConverter.cs" />
-    <Compile Include="System.ServiceModel.Description\WebServiceHelper.cs" />
     <Compile Include="System.ServiceModel.Description\WsdlContractConversionContext.cs" />
     <Compile Include="System.ServiceModel.Description\WsdlEndpointConversionContext.cs" />
     <Compile Include="System.ServiceModel.Description\WsdlExporter.cs" />
@@ -814,6 +730,8 @@
     <Compile Include="System.ServiceModel.Diagnostics\PerformanceCounterScope.cs" />
     <Compile Include="System.ServiceModel.Dispatcher\ActionMessageFilter.cs" />
     <Compile Include="System.ServiceModel.Dispatcher\ActionMessageFilterTable.cs" />
+    <Compile Include="System.ServiceModel.Dispatcher\CallbackInstanceContextProvider.cs" />
+    <Compile Include="System.ServiceModel.Dispatcher\DefaultOperationInvoker.cs" />
     <Compile Include="System.ServiceModel.Dispatcher\InputOrReplyRequestProcessor.cs" />
     <Compile Include="System.ServiceModel.Dispatcher\OperationContextScopeHandler.cs" />
     <Compile Include="System.ServiceModel.Dispatcher\PostReceiveRequestHandler.cs" />
@@ -873,6 +791,7 @@
     <Compile Include="System.ServiceModel.Dispatcher\SecurityHandler.cs" />
     <Compile Include="System.ServiceModel.Dispatcher\SeekableXPathNavigator.cs" />
     <Compile Include="System.ServiceModel.Dispatcher\ServiceThrottle.cs" />
+    <Compile Include="System.ServiceModel.Dispatcher\SessionInstanceContextProvider.cs" />
     <Compile Include="System.ServiceModel.Dispatcher\SingletonInstanceContextProvider.cs" />
     <Compile Include="System.ServiceModel.Dispatcher\XPathMessageContext.cs" />
     <Compile Include="System.ServiceModel.Dispatcher\XPathMessageFilter.cs" />
@@ -884,7 +803,10 @@
     <Compile Include="System.ServiceModel.MsmqIntegration\MsmqIntegrationSecurity.cs" />
     <Compile Include="System.ServiceModel.MsmqIntegration\MsmqMessage.cs" />
     <Compile Include="System.ServiceModel.PeerResolvers\CustomPeerResolverService.cs" />
+    <Compile Include="System.ServiceModel.PeerResolvers\ICustomPeerResolverContract.cs" />
+    <Compile Include="System.ServiceModel.PeerResolvers\IPeerConnectorContract.cs" />
     <Compile Include="System.ServiceModel.PeerResolvers\IPeerResolverContract.cs" />
+    <Compile Include="System.ServiceModel.PeerResolvers\LocalPeerResolverService.cs" />
     <Compile Include="System.ServiceModel.PeerResolvers\PeerCustomResolverSettings.cs" />
     <Compile Include="System.ServiceModel.PeerResolvers\PeerReferralPolicy.cs" />
     <Compile Include="System.ServiceModel.PeerResolvers\PeerResolverMode.cs" />
@@ -964,12 +886,14 @@
     <Compile Include="System.ServiceModel.Security\PeerCredential.cs" />
     <Compile Include="System.ServiceModel.Security\ScopedMessagePartSpecification.cs" />
     <Compile Include="System.ServiceModel.Security\SecureConversationServiceCredential.cs" />
+    <Compile Include="System.ServiceModel.Security\SecureConversationVersion.cs" />
     <Compile Include="System.ServiceModel.Security\SecurityAccessDeniedException.cs" />
     <Compile Include="System.ServiceModel.Security\SecurityAlgorithmSuite.cs" />
     <Compile Include="System.ServiceModel.Security\SecurityContextKeyIdentifierClause.cs" />
     <Compile Include="System.ServiceModel.Security\SecurityCredentialsManager.cs" />
     <Compile Include="System.ServiceModel.Security\SecurityMessageProperty.cs" />
     <Compile Include="System.ServiceModel.Security\SecurityNegotiationException.cs" />
+    <Compile Include="System.ServiceModel.Security\SecurityPolicyVersion.cs" />
     <Compile Include="System.ServiceModel.Security\SecurityStateEncoder.cs" />
     <Compile Include="System.ServiceModel.Security\SecurityTokenAttachmentMode.cs" />
     <Compile Include="System.ServiceModel.Security\SecurityTokenSpecification.cs" />
@@ -977,6 +901,7 @@
     <Compile Include="System.ServiceModel.Security\ServiceCredentialsSecurityTokenManager.cs" />
     <Compile Include="System.ServiceModel.Security\SspiSecurityTokenProvider.cs" />
     <Compile Include="System.ServiceModel.Security\SupportingTokenSpecification.cs" />
+    <Compile Include="System.ServiceModel.Security\TrustVersion.cs" />
     <Compile Include="System.ServiceModel.Security\UnionSecurityTokenResolver.cs" />
     <Compile Include="System.ServiceModel.Security\UserNamePasswordClientCredential.cs" />
     <Compile Include="System.ServiceModel.Security\UserNamePasswordServiceCredential.cs" />
@@ -1005,6 +930,7 @@
     <Compile Include="System.ServiceModel\ClientProxyGenerator.cs" />
     <Compile Include="System.ServiceModel\ClientRuntimeChannel.cs" />
     <Compile Include="System.ServiceModel\CommunicationException.cs" />
+    <Compile Include="System.ServiceModel\CommunicationObjectAbortedException.cs" />
     <Compile Include="System.ServiceModel\CommunicationObjectFaultedException.cs" />
     <Compile Include="System.ServiceModel\Constants.cs" />
     <Compile Include="System.ServiceModel\DataContractFormatAttribute.cs" />
@@ -1014,6 +940,7 @@
     <Compile Include="System.ServiceModel\Dummy.cs" />
     <Compile Include="System.ServiceModel\DuplexChannelFactory.cs" />
     <Compile Include="System.ServiceModel\DuplexClientBase.cs" />
+    <Compile Include="System.ServiceModel\DuplexClientRuntimeChannel.cs" />
     <Compile Include="System.ServiceModel\EndpointAddress.cs" />
     <Compile Include="System.ServiceModel\EndpointAddress10.cs" />
     <Compile Include="System.ServiceModel\EndpointAddressAugust2004.cs" />
@@ -1041,6 +968,7 @@
     <Compile Include="System.ServiceModel\IExtensionCollection.cs" />
     <Compile Include="System.ServiceModel\InstanceContext.cs" />
     <Compile Include="System.ServiceModel\InvalidMessageContractException.cs" />
+    <Compile Include="System.ServiceModel\IOnlineStatus.cs" />
     <Compile Include="System.ServiceModel\IServiceChannel.cs" />
     <Compile Include="System.ServiceModel\MessageBodyAttribute.cs" />
     <Compile Include="System.ServiceModel\MessageContractAttribute.cs" />
@@ -1059,8 +987,11 @@
     <Compile Include="System.ServiceModel\MsmqException.cs" />
     <Compile Include="System.ServiceModel\MsmqPoisonMessageException.cs" />
     <Compile Include="System.ServiceModel\MsmqTransportSecurity.cs" />
+    <Compile Include="System.ServiceModel\NamedPipeTransportSecurity.cs" />
     <Compile Include="System.ServiceModel\NetMsmqBinding.cs" />
     <Compile Include="System.ServiceModel\NetMsmqSecurity.cs" />
+    <Compile Include="System.ServiceModel\NetNamedPipeBinding.cs" />
+    <Compile Include="System.ServiceModel\NetNamedPipeSecurity.cs" />
     <Compile Include="System.ServiceModel\NetPeerTcpBinding.cs" />
     <Compile Include="System.ServiceModel\NetTcpBinding.cs" />
     <Compile Include="System.ServiceModel\NetTcpSecurity.cs" />
@@ -1076,12 +1007,15 @@
     <Compile Include="System.ServiceModel\PeerResolver.cs" />
     <Compile Include="System.ServiceModel\PeerResolverImpl.cs" />
     <Compile Include="System.ServiceModel\PeerSecuritySettings.cs" />
+    <Compile Include="System.ServiceModel\PeerTransportSecuritySettings.cs" />
     <Compile Include="System.ServiceModel\PoisonMessageException.cs" />
     <Compile Include="System.ServiceModel\ProtocolException.cs" />
     <Compile Include="System.ServiceModel\QuotaExceededException.cs" />
     <Compile Include="System.ServiceModel\ReliableMessagingVersion.cs" />
     <Compile Include="System.ServiceModel\ReliableSession.cs" />
     <Compile Include="System.ServiceModel\RsaEndpointIdentity.cs" />
+    <Compile Include="System.ServiceModel\ServerTooBusyException.cs" />
+    <Compile Include="System.ServiceModel\ServiceActivationException.cs" />
     <Compile Include="System.ServiceModel\ServiceAuthorizationManager.cs" />
     <Compile Include="System.ServiceModel\ServiceBehaviorAttribute.cs" />
     <Compile Include="System.ServiceModel\ServiceContractAttribute.cs" />
@@ -1089,10 +1023,13 @@
     <Compile Include="System.ServiceModel\ServiceHostBase.cs" />
     <Compile Include="System.ServiceModel\ServiceHostingEnvironment.cs" />
     <Compile Include="System.ServiceModel\ServiceKnownTypeAttribute.cs" />
+    <Compile Include="System.ServiceModel\ServiceProxyGenerator.cs" />
     <Compile Include="System.ServiceModel\ServiceRuntimeChannel.cs" />
     <Compile Include="System.ServiceModel\ServiceSecurityContext.cs" />
+    <Compile Include="System.ServiceModel\SilverlightClientConfigLoader.cs" />
     <Compile Include="System.ServiceModel\SpnEndpointIdentity.cs" />
     <Compile Include="System.ServiceModel\TcpTransportSecurity.cs" />
+    <Compile Include="System.ServiceModel\TransactionFlowAttribute.cs" />
     <Compile Include="System.ServiceModel\TransactionProtocol.cs" />
     <Compile Include="System.ServiceModel\TransferMode.cs" />
     <Compile Include="System.ServiceModel\UnknownMessageReceivedEventArgs.cs" />
@@ -1111,10 +1048,16 @@
     <Compile Include="System.ServiceModel\XmlSerializerFormatAttribute.cs" />
   </ItemGroup>
   <ItemGroup>
+    <ProjectReference Include="..\System.IdentityModel\System.IdentityModel.csproj">
+      <Project>{439D4BD2-AC46-4CE4-81DE-6AE171EC2D79}</Project>
+      <Name>System.IdentityModel</Name>
+    </ProjectReference>
+  </ItemGroup>
+  <ItemGroup>
     <Folder Include="Properties\" />
     <Folder Include="Test\" />
   </ItemGroup>
-  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
+  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
   <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
        Other similar extension points exist, see Microsoft.Common.targets.
   <Target Name="BeforeBuild">
@@ -1123,7 +1066,7 @@
   </Target>
   -->
   <PropertyGroup>
-    <PostBuildEvent>"C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\gacutil.exe" /i "$(TargetPath)" /f
-"C:\Program Files\Mono-1.2.6\bin\gacutil.bat" -i "$(TargetPath)"</PostBuildEvent>
+    <PostBuildEvent>@rem  "C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\gacutil.exe" /i "$(TargetPath)" /f
+@rem "C:\Program Files\Mono-1.2.6\bin\gacutil.bat" -i "$(TargetPath)"</PostBuildEvent>
   </PropertyGroup>
-</Project>
+</Project>
\ No newline at end of file
