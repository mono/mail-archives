<tt>
Hey&nbsp;Paolo,&lt;br&gt;&lt;br&gt;One&nbsp;thing&nbsp;missing&nbsp;are&nbsp;functions&nbsp;to&nbsp;probe&nbsp;the&nbsp;version/capabilities&nbsp;of&nbsp;the&nbsp;library.&nbsp;Since&nbsp;the&nbsp;idea&nbsp;is&nbsp;to&nbsp;have&nbsp;the&nbsp;debugger&nbsp;use&nbsp;as&nbsp;much&nbsp;of&nbsp;the&nbsp;dbg&nbsp;api&nbsp;as&nbsp;possible&nbsp;but&nbsp;falling&nbsp;back&nbsp;to&nbsp;the&nbsp;current&nbsp;code&nbsp;in&nbsp;case&nbsp;the&nbsp;lib&nbsp;doesn&amp;#39;t&nbsp;support&nbsp;specific&nbsp;stuff.<br>
&lt;br&gt;&lt;br&gt;&lt;br&gt;Rodrigo&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Dec&nbsp;5,&nbsp;2007&nbsp;3:58&nbsp;PM,&nbsp;Paolo&nbsp;Molaro&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:lupus@ximian.com&quot;&gt;lupus@ximian.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Hi.&lt;br&gt;The&nbsp;attached&nbsp;patch&nbsp;implements&nbsp;part&nbsp;of&nbsp;the&nbsp;debugging&nbsp;library&lt;br&gt;the&nbsp;runtime&nbsp;will&nbsp;provide&nbsp;for&nbsp;use&nbsp;in&nbsp;the&nbsp;debugger,&nbsp;to&nbsp;reduce&lt;br&gt;the&nbsp;dependencies&nbsp;the&nbsp;debugger&nbsp;has&nbsp;on&nbsp;the&nbsp;runtime&nbsp;internals.&lt;br&gt;Note&nbsp;this&nbsp;is&nbsp;very&nbsp;basic&nbsp;for&nbsp;now&nbsp;and&nbsp;also&nbsp;includes&nbsp;stuff&nbsp;the&nbsp;debugger<br>
&lt;br&gt;won&amp;#39;t&nbsp;use,&nbsp;but&nbsp;that&nbsp;will&nbsp;be&nbsp;essential&nbsp;to&nbsp;allow&nbsp;testing&nbsp;the&nbsp;library&lt;br&gt;during&nbsp;the&nbsp;runtime&nbsp;build/test&nbsp;cycle.&lt;br&gt;&lt;br&gt;I&amp;#39;d&nbsp;like&nbsp;advice&nbsp;especially&nbsp;for&nbsp;the&nbsp;case&nbsp;of&nbsp;handling&nbsp;threads:&lt;br&gt;should&nbsp;we&nbsp;have&nbsp;a&nbsp;mono_dbg_target_set_thread&nbsp;(target,&nbsp;thread_id)<br>
&lt;br&gt;interface&nbsp;and&nbsp;set/get_context&nbsp;calls&nbsp;without&nbsp;the&nbsp;additional&nbsp;thread_id&lt;br&gt;argument&nbsp;or&nbsp;use&nbsp;something&nbsp;like&nbsp;in&nbsp;the&nbsp;header&nbsp;file&nbsp;below?&lt;br&gt;I&nbsp;also&nbsp;intend&nbsp;to&nbsp;make&nbsp;stop/continue&nbsp;work&nbsp;on&nbsp;individual&nbsp;threads,&lt;br&gt;keeping&nbsp;the&nbsp;existing&nbsp;interface&nbsp;for&nbsp;stopping&nbsp;all&nbsp;the&nbsp;threads.<br>
&lt;br&gt;&lt;br&gt;By&nbsp;tomorrow&nbsp;I&amp;#39;ll&nbsp;try&nbsp;to&nbsp;expand&nbsp;the&nbsp;API&nbsp;to&nbsp;include&nbsp;helper&lt;br&gt;functions&nbsp;to&nbsp;access&nbsp;some&nbsp;of&nbsp;the&nbsp;runtime&nbsp;data&nbsp;structures&lt;br&gt;(like&nbsp;MonoClass&amp;#39;&nbsp;name,&nbsp;namespace,&nbsp;parent&nbsp;fields&nbsp;etc).&lt;br&gt;&lt;br&gt;Also,&nbsp;as&nbsp;discussed&nbsp;with&nbsp;Martin,&nbsp;the&nbsp;read/write&nbsp;word&nbsp;functions&nbsp;will&nbsp;be<br>
&lt;br&gt;later&nbsp;changed&nbsp;to&nbsp;optionally&nbsp;use&nbsp;a&nbsp;callback&nbsp;instead&nbsp;of&nbsp;using&nbsp;ptrace&lt;br&gt;directly&nbsp;(so&nbsp;that&nbsp;the&nbsp;debugger&nbsp;could&nbsp;provide&nbsp;a&nbsp;callback&nbsp;that&nbsp;reads&nbsp;data&lt;br&gt;from&nbsp;core&nbsp;files,&nbsp;for&nbsp;example).&lt;br&gt;&lt;br&gt;It&nbsp;would&nbsp;be&nbsp;also&nbsp;good&nbsp;if&nbsp;people&nbsp;familiar&nbsp;with&nbsp;windows&nbsp;debugging&nbsp;could<br>
&lt;br&gt;make&nbsp;sure&nbsp;the&nbsp;API&nbsp;is&nbsp;implementable&nbsp;there&nbsp;as&nbsp;well.&lt;br&gt;&lt;br&gt;Comments&nbsp;welcome.&lt;br&gt;Thanks!&lt;br&gt;&lt;br&gt;lupus&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;--&lt;br&gt;-----------------------------------------------------------------&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:lupus@debian.org&quot;&gt;<br>
lupus@debian.org&lt;/a&gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;debian/rules&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:lupus@ximian.com&quot;&gt;lupus@ximian.com&lt;/a&gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;Monkeys&nbsp;do&nbsp;it&nbsp;better&lt;br&gt;&lt;/font&gt;&lt;br&gt;_______________________________________________<br>
&lt;br&gt;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list<br>
&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
