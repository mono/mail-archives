Index: mono-dbg.c
===================================================================
--- mono-dbg.c	(revision 0)
+++ mono-dbg.c	(revision 0)
@@ -0,0 +1,30 @@
+#include <config.h>
+#define _IN_THE_MONO_DEBUGGER
+#include "debug-debugger.h"
+#include "mono-dbg.h"
+
+MonoDebuggerSupport *
+mono_debugger_support_init (void)
+{
+	MonoDebuggerSupport *target;
+
+	target = g_new0 (MonoDebuggerSupport, 1);
+	return target;
+}
+
+void
+mono_debugger_support_free (MonoDebuggerSupport *target)
+{
+	g_free (target);
+}
+
+void *
+mono_debugger_support_mono_class_get_image (ReadMemoryFunc memory_func, void *address)
+{
+	MonoClass klass;
+
+	if (!memory_func (address, sizeof (MonoClass), &klass))
+		return NULL;
+
+	return klass.image;
+}
Index: mono-dbg.h
===================================================================
--- mono-dbg.h	(revision 0)
+++ mono-dbg.h	(revision 0)
@@ -0,0 +1,20 @@
+#ifndef MONO_DBG_H
+#define MONO_DBG_H 1
+
+#include "debug-mini.h"
+
+typedef struct {
+} MonoDebuggerSupport;
+
+typedef gboolean (*ReadMemoryFunc) (void *address, int size, void *buffer);
+
+MonoDebuggerSupport *
+mono_debugger_support_init (void);
+
+void
+mono_debugger_support_free (MonoDebuggerSupport *);
+
+void *
+mono_debugger_support_mono_class_get_image (ReadMemoryFunc memory, void *klass);
+
+#endif
Index: Makefile.am
===================================================================
--- Makefile.am	(revision 90765)
+++ Makefile.am	(working copy)
@@ -78,7 +78,7 @@
 
 noinst_PROGRAMS = genmdesc
 
-lib_LTLIBRARIES = libmono.la
+lib_LTLIBRARIES = libmono.la libmono-dbg.la
 noinst_LTLIBRARIES = libmono-static.la
 endif
 
@@ -376,6 +376,10 @@
 libmono_la_LIBADD = \
 	$(libs)
 
+libmono_dbg_la_SOURCES = \
+	mono-dbg.c
+	mono-dbg.h
+
 %.exe: %.2.cs TestDriver.dll generics-variant-types.dll
 	$(GMCS) -out:$@ $< -r:TestDriver.dll -r:generics-variant-types.dll
 
