Index: mono-dl.c
===================================================================
--- mono-dl.c	(revision 141046)
+++ mono-dl.c	(working copy)
@@ -333,8 +333,10 @@
 		const char *suff;
 		const char *ext;
 		/* This platform does not support dlopen */
-		if (name == NULL)
+		if (name == NULL) {
+			free (module);
 			return NULL;
+		}
 		
 		suff = ".la";
 		ext = strrchr (name, '.');
Index: ChangeLog
===================================================================
--- ChangeLog	(revision 141046)
+++ ChangeLog	(working copy)
@@ -1,3 +1,9 @@
+2009-09-02  Sebastien Pouliot  <sebastien@ximian.com>
+
+	* mono-dl.c (mono_dl_open): Don't leak module if name is NULL
+	* mono-md5.c (mono_md5_get_digest_from_file): Close 'fp' even on
+	success (just like we do for sha1)
+
 2009-08-21  Mark Probst  <mark.probst@gmail.com>
 
 	* mono-hash.c: When creating a hash table, if the keys are managed
Index: mono-md5.c
===================================================================
--- mono-md5.c	(revision 141046)
+++ mono-md5.c	(working copy)
@@ -347,6 +347,8 @@
 	if (ferror(fp)) {
 		fclose(fp);
 		return;
+	} else {
+		fclose(fp);
 	}
 
 	mono_md5_final (&ctx, digest);
