--- mcs/class/corlib/System/Console.cs.orig	2006-01-16 16:48:24.000000000 +0800
+++ mcs/class/corlib/System/Console.cs	2006-01-16 17:08:49.000000000 +0800
@@ -63,7 +63,8 @@
 				// On Unix systems (128), do not output the
 				// UTF-8 ZWNBSP (zero-width non-breaking space).
 				//
-				if (code_page == UTF8Encoding.UTF8_CODE_PAGE || ((code_page & 0x10000000) != 0))
+				if (code_page != -1 && ((code_page & 0x0fffffff) == 3 // UTF8Encoding.UTF8_CODE_PAGE
+                                        || ((code_page & 0x10000000) != 0)))
 					encoding = Encoding.UTF8Unmarked;
 				else
 					encoding = Encoding.Default;
