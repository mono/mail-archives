// UnixSignal test

using System;
using System.Threading;
using Mono.Unix;
using Mono.Unix.Native;

class Test {
	public static void Main ()
	{
		Stdlib.signal_ignore (Signum.SIGHUP);
		// Stdlib.signal (Signum.SIGHUP, Stdlib.SIG_IGN);
		UnixSignal signal = new UnixSignal (Signum.SIGINT);
#if !NOWAIT
		try {
			bool r = signal.WaitOne (5000, false);
			// bool r = signal.WaitOne ();
			Console.WriteLine ("Ctrl+C pressed? {0}", r);
		}
		catch (Exception e) {
			Console.WriteLine ("Exception: " + e);
			Console.WriteLine ("signal.IsSet? {0}", signal.IsSet);
		}
#else
		// works
		while (!signal.IsSet) {
			Thread.Sleep (0);
		}
#endif
		Console.WriteLine ("Finished");
	}
}
