Index: ChangeLog
from  Raja R Harinath  <rharinath@novell.com>

	* ecore.cs (DoSimpleNameResolve): Expand CS0038 check to all names
	visible from inside a nested class, not just the names of the
	immediately enclosing class.

Index: ecore.cs
===================================================================
RCS file: /cvs/public/mcs/mcs/ecore.cs,v
retrieving revision 1.288
diff -u -u -r1.288 ecore.cs
--- ecore.cs 11 Jun 2004 10:30:04 -0000 1.288
+++ ecore.cs 25 Jun 2004 06:20:29 -0000
@@ -2183,7 +2183,8 @@
 					return e;
 				
 				if (!me.IsStatic &&
-				    TypeManager.IsNestedChildOf (me.InstanceExpression.Type, me.DeclaringType) &&
+				    TypeManager.IsSubclassOrNestedChildOf (me.InstanceExpression.Type, me.DeclaringType) &&
+				    me.InstanceExpression.Type != me.DeclaringType &&
 				    !me.InstanceExpression.Type.IsSubclassOf (me.DeclaringType) &&
 				    (!intermediate || !MemberAccess.IdenticalNameAndTypeName (ec, this, e, loc))) {
 					Error (38, "Cannot access nonstatic member `" + me.Name + "' of " +
