--- class/System.Web/System.Web.UI.HtmlControls/HtmlForm.cs.orig	Thu Nov  4 18:49:36 2004
+++ class/System.Web/System.Web.UI.HtmlControls/HtmlForm.cs	Thu Nov  4 19:10:06 2004
@@ -91,16 +91,20 @@
 			get{
 				string executionFilePath = Context.Request.CurrentExecutionFilePath;
 				string filePath = Context.Request.FilePath;
-				string attr;
-				if (String.ReferenceEquals(executionFilePath, filePath) == true){
+				string attr = System.Web.Util.UrlUtils.MakeRelative(filePath,executionFilePath);
+
+				// MakeRelative returns null if it fails to make it relavive
+				if( attr == null )
+					attr = executionFilePath;
+				
+				// MakeRelative return String.Empty if both URL are equal
+				if (String.ReferenceEquals(attr, String.Empty)) {
 					attr = filePath;
 					int lastSlash = attr.LastIndexOf('/');
 					if (lastSlash >= 0)
 						attr = attr.Substring(lastSlash + 1);
 				}
-				else{
-					attr = System.Web.Util.UrlUtils.MakeRelative(filePath,executionFilePath);
-				}
+
 				string queryString = Context.Request.QueryStringRaw;
 				if (queryString != null && queryString.Length > 0)
 					attr = String.Concat(attr, '?', queryString);
