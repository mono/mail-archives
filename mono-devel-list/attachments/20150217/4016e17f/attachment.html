<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;12pt;<br>
font-family:Calibri<br>
}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Calibri,sans-serif&quot;&gt;FYI,&nbsp;roslyn&nbsp;made&nbsp;the&nbsp;switch&nbsp;to&nbsp;being&nbsp;deterministic&nbsp;by&nbsp;default&nbsp;in&nbsp;April&nbsp;last&nbsp;year:&nbsp;&lt;a&nbsp;href=&quot;https://github.com/dotnet/roslyn/commit/04462c44e30dfa91267581abdb029f3102796486&quot;&gt;https://github.com/dotnet/roslyn/commit/04462c44e30dfa91267581abdb029f3102796486&lt;/a&gt;&lt;/font&gt;&lt;BR&gt;&nbsp;&lt;BR&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Calibri,sans-serif&quot;&gt;Quoting&nbsp;from&nbsp;the&nbsp;commit:&lt;/font&gt;&lt;BR&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Calibri,sans-serif&quot;&gt;&quot;(1)&nbsp;The&nbsp;timestamp&nbsp;in&nbsp;the&nbsp;header&nbsp;is&nbsp;replaced&nbsp;with&nbsp;0&nbsp;(which&nbsp;is&nbsp;specifically&nbsp;allowed&nbsp;by&nbsp;the&nbsp;spec)&lt;br&gt;&nbsp;(2)&nbsp;The&nbsp;module&nbsp;version&nbsp;ID&nbsp;Guid&nbsp;(Mvid)&nbsp;is&nbsp;computed&nbsp;by&nbsp;hashing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;generated&nbsp;assembly&nbsp;(with&nbsp;zero&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;the&nbsp;Mvid&nbsp;will&nbsp;go&nbsp;for&nbsp;the&nbsp;purposes&nbsp;of&nbsp;computing&nbsp;the&nbsp;hash)&lt;/font&gt;&lt;BR&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Calibri,sans-serif&quot;&gt;&lt;/font&gt;&nbsp;&lt;BR&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Calibri,sans-serif&quot;&gt;The&nbsp;name&nbsp;of&nbsp;the&nbsp;&quot;private&nbsp;implementation&nbsp;details&quot;&nbsp;class&nbsp;no&nbsp;longer&nbsp;includes&nbsp;the&nbsp;Mvid.&quot;&lt;br&nbsp;id=&quot;FontBreak&quot;&gt;&lt;/font&gt;&lt;BR&gt;--&nbsp;Alex&lt;br&gt;&nbsp;&lt;BR&gt;&lt;div&gt;&gt;&nbsp;From:&nbsp;jeroen@sumatra.nl&lt;br&gt;&gt;&nbsp;To:&nbsp;dkg@fifthhorseman.net;&nbsp;mono-devel-list@lists.ximian.com;&nbsp;marek.safar@gmail.com&lt;br&gt;&gt;&nbsp;Date:&nbsp;Tue,&nbsp;17&nbsp;Feb&nbsp;2015&nbsp;11:12:14&nbsp;+0000&lt;br&gt;&gt;&nbsp;CC:&nbsp;henrik@logibit.se;&nbsp;directhex@apebox.org;&nbsp;reproducible-builds@lists.alioth.debian.org&lt;br&gt;&gt;&nbsp;Subject:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;making&nbsp;mono&nbsp;builds&nbsp;reproducible&nbsp;(xamarin&nbsp;bz&nbsp;#26842)&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Hello&nbsp;all,&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;I'm&nbsp;not&nbsp;a&nbsp;big&nbsp;fan&nbsp;of&nbsp;using&nbsp;an&nbsp;environment&nbsp;variable&nbsp;for&nbsp;this,&nbsp;but&nbsp;I&nbsp;won't&nbsp;oppose&nbsp;it.&nbsp;In&nbsp;the&nbsp;mean&nbsp;time,&nbsp;I've&nbsp;added&nbsp;a&nbsp;new&nbsp;public&nbsp;API&nbsp;(ModuleBuilder.__PEHeaderTimeDateStamp)&nbsp;to&nbsp;specify&nbsp;the&nbsp;time&nbsp;stamp.&nbsp;There&nbsp;is&nbsp;already&nbsp;a&nbsp;public&nbsp;API&nbsp;to&nbsp;specify&nbsp;the&nbsp;module&nbsp;version&nbsp;GUID.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;As&nbsp;Miguel&nbsp;said,&nbsp;hard&nbsp;coding&nbsp;the&nbsp;GUID&nbsp;violates&nbsp;the&nbsp;spec&nbsp;and&nbsp;can&nbsp;lead&nbsp;to&nbsp;weird&nbsp;problems.&nbsp;I&nbsp;think&nbsp;the&nbsp;proper&nbsp;solution&nbsp;is&nbsp;to&nbsp;base&nbsp;the&nbsp;GUID&nbsp;on&nbsp;a&nbsp;SHA1&nbsp;of&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;assembly.&nbsp;However,&nbsp;this&nbsp;is&nbsp;non-trivial,&nbsp;so&nbsp;it&nbsp;will&nbsp;take&nbsp;some&nbsp;time&nbsp;to&nbsp;develop&nbsp;a&nbsp;complete&nbsp;solution.&nbsp;This&nbsp;will&nbsp;be&nbsp;an&nbsp;opt-in&nbsp;feature,&nbsp;so&nbsp;it&nbsp;will&nbsp;also&nbsp;need&nbsp;to&nbsp;be&nbsp;supported&nbsp;by&nbsp;mcs&nbsp;or&nbsp;an&nbsp;environment&nbsp;variable.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Marek,&nbsp;what&nbsp;do&nbsp;you&nbsp;think&nbsp;about&nbsp;adding&nbsp;an&nbsp;mcs&nbsp;switch&nbsp;to&nbsp;facilitate&nbsp;reproducible&nbsp;builds?&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Regards,&lt;br&gt;&gt;&nbsp;Jeroen&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;-----Original&nbsp;Message-----&lt;br&gt;&gt;&nbsp;&gt;&nbsp;From:&nbsp;Daniel&nbsp;Kahn&nbsp;Gillmor&nbsp;[mailto:dkg@fifthhorseman.net]&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Sent:&nbsp;Monday,&nbsp;February&nbsp;16,&nbsp;2015&nbsp;23:20&lt;br&gt;&gt;&nbsp;&gt;&nbsp;To:&nbsp;mono&nbsp;development&nbsp;list&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Cc:&nbsp;Jeroen&nbsp;Frijters;&nbsp;Jo&nbsp;Shields;&nbsp;Debian&nbsp;Reproducible&nbsp;Builds;&nbsp;Henrik&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Feldt&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Subject:&nbsp;making&nbsp;mono&nbsp;builds&nbsp;reproducible&nbsp;(xamarin&nbsp;bz&nbsp;#26842)&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Hi&nbsp;Mono&nbsp;folks--&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;some&nbsp;good&nbsp;discussion&nbsp;has&nbsp;come&nbsp;up&nbsp;on&nbsp;the&nbsp;xamarin&nbsp;bugtracker&nbsp;about&nbsp;being&lt;br&gt;&gt;&nbsp;&gt;&nbsp;able&nbsp;to&nbsp;make&nbsp;builds&nbsp;using&nbsp;the&nbsp;mono&nbsp;toolchain&nbsp;reproducible:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;https://bugzilla.xamarin.com/show_bug.cgi?id=26842&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Jo&nbsp;Shields&nbsp;offered&nbsp;a&nbsp;one-liner&nbsp;fix&nbsp;to&nbsp;PEWriter.cs&nbsp;to&nbsp;allow&nbsp;the&nbsp;use&nbsp;of&nbsp;an&lt;br&gt;&gt;&nbsp;&gt;&nbsp;environment&nbsp;variable&nbsp;to&nbsp;fix&nbsp;the&nbsp;timestamp&nbsp;epoch,&nbsp;but&nbsp;made&nbsp;it&nbsp;clear&nbsp;that&lt;br&gt;&gt;&nbsp;&gt;&nbsp;more&nbsp;feedback&nbsp;is&nbsp;needed,&nbsp;so&nbsp;i'm&nbsp;raising&nbsp;it&nbsp;here:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;from:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DWORD&nbsp;TimeDateStamp&nbsp;=&nbsp;(uint)(DateTime.UtcNow&nbsp;-&nbsp;new&lt;br&gt;&gt;&nbsp;&gt;&nbsp;DateTime(1970,&nbsp;1,&nbsp;1,&nbsp;0,&nbsp;0,&nbsp;0,&nbsp;DateTimeKind.Utc)).TotalSeconds;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;to:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DWORD&nbsp;TimeDateStamp&nbsp;=&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Environment.GetEnvironmentVariable(&quot;IKVM_WRITER_TIMESTAMP_EPOCH&quot;)&nbsp;!=&lt;br&gt;&gt;&nbsp;&gt;&nbsp;null&nbsp;?&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;uint.Parse(Environment.GetEnvironmentVariable(&quot;IKVM_WRITER_TIMESTAMP_EPO&lt;br&gt;&gt;&nbsp;&gt;&nbsp;CH&quot;))&nbsp;:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(uint)(DateTime.UtcNow&nbsp;-&nbsp;new&lt;br&gt;&gt;&nbsp;&gt;&nbsp;DateTime(1970,&nbsp;1,&nbsp;1,&nbsp;0,&nbsp;0,&nbsp;0,&nbsp;DateTimeKind.Utc)).TotalSeconds;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;(i'm&nbsp;not&nbsp;sure&nbsp;whether&nbsp;the&nbsp;integer&nbsp;number&nbsp;of&nbsp;seconds&nbsp;is&nbsp;the&nbsp;best&nbsp;form&nbsp;for&lt;br&gt;&gt;&nbsp;&gt;&nbsp;the&nbsp;environment&nbsp;variable,&nbsp;or&nbsp;whether&nbsp;it&nbsp;would&nbsp;be&nbsp;better&nbsp;to&nbsp;parse&nbsp;a&lt;br&gt;&gt;&nbsp;&gt;&nbsp;standard&nbsp;date&nbsp;string&nbsp;--&nbsp;from&nbsp;debian's&nbsp;perspective,&nbsp;we&nbsp;can&nbsp;deal&nbsp;with&lt;br&gt;&gt;&nbsp;&gt;&nbsp;either,&nbsp;of&nbsp;course)&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;And&nbsp;this&nbsp;still&nbsp;doesn't&nbsp;solve&nbsp;the&nbsp;secondary&nbsp;issue&nbsp;of&nbsp;the&nbsp;assembly&nbsp;GUID,&lt;br&gt;&gt;&nbsp;&gt;&nbsp;as&nbsp;Jo&nbsp;noted.&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Any&nbsp;thoughts&nbsp;about&nbsp;how&nbsp;to&nbsp;best&nbsp;enable&nbsp;binary-reproducible&nbsp;builds&nbsp;from&lt;br&gt;&gt;&nbsp;&gt;&nbsp;the&nbsp;mono&nbsp;toolchain&nbsp;if&nbsp;the&nbsp;invoker&nbsp;requests&nbsp;them?&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Regards,&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--dkg&lt;br&gt;&gt;&nbsp;_______________________________________________&lt;br&gt;&gt;&nbsp;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;&gt;&nbsp;Mono-devel-list@lists.ximian.com&lt;br&gt;&gt;&nbsp;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;br&gt;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
