<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;style=&quot;display:none;&quot;&gt;&lt;!--&nbsp;P&nbsp;{margin-top:0;margin-bottom:0;}&nbsp;--&gt;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;id=&quot;divtagdefaultwrapper&quot;&nbsp;style=&quot;font-size:12pt;color:#000000;font-family:Calibri,Arial,Helvetica,sans-serif;&quot;&gt;<br>
&lt;p&gt;Hey&nbsp;guys,&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;It&nbsp;came&nbsp;to&nbsp;my&nbsp;attention&nbsp;that&nbsp;mono&nbsp;is&nbsp;a&nbsp;bit&nbsp;more&nbsp;liberal&nbsp;in&nbsp;what&nbsp;objects&nbsp;it&nbsp;allows&nbsp;a&nbsp;pinned&nbsp;gc&nbsp;handle&nbsp;to&nbsp;be&nbsp;created.&nbsp;Dotnet&nbsp;only&nbsp;allows&nbsp;pinned&nbsp;handles&nbsp;to&nbsp;blitable&nbsp;types&nbsp;as&nbsp;it&nbsp;doesn't&nbsp;expose&nbsp;unprotected&nbsp;heap&nbsp;pointers&nbsp;to&nbsp;unsafe&nbsp;code.&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;There's&nbsp;a&nbsp;PR[1]&nbsp;fixing&nbsp;this&nbsp;but&nbsp;I'm&nbsp;wary&nbsp;on&nbsp;merging&nbsp;it&nbsp;before&nbsp;addressing&nbsp;this&nbsp;issue&nbsp;on,&nbsp;at&nbsp;least,&nbsp;the&nbsp;Xamarin&nbsp;platform.&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;I've&nbsp;identified&nbsp;problems&nbsp;in&nbsp;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;Macios[2]&nbsp;and&nbsp;WebSharp[3]&nbsp;(tons&nbsp;more&nbsp;on&nbsp;websharp).&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;Additionally,&nbsp;I&nbsp;identified&nbsp;a&nbsp;lot&nbsp;of&nbsp;code&nbsp;in&nbsp;both&nbsp;macios&nbsp;and&nbsp;android&nbsp;that&nbsp;would&nbsp;lead&nbsp;to&nbsp;heap&nbsp;corruption&nbsp;if&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;misused&nbsp;[4].&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;My&nbsp;suggestion&nbsp;is&nbsp;that&nbsp;we&nbsp;address&nbsp;issues&nbsp;like&nbsp;[2]&nbsp;and&nbsp;[3]&nbsp;as&nbsp;[4]&nbsp;is&nbsp;fine&nbsp;for&nbsp;correct&nbsp;usage&nbsp;of&nbsp;the&nbsp;code.&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;--&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;Rodrigo&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;[1]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/mono/mono/pull/3929&quot;&nbsp;class=&quot;OWAAutoLink&quot;&nbsp;id=&quot;LPlnk229778&quot;&nbsp;previewremoved=&quot;true&quot;&gt;https://github.com/mono/mono/pull/3929&lt;/a&gt;&lt;/p&gt;<br>
&lt;p&gt;[2]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/xamarin/xamarin-macios/blob/fc55e4306f79491fd269ca2495c6a859799cb1c6/src/CoreMedia/CMCustomBlockAllocator.cs#L24&quot;&nbsp;class=&quot;OWAAutoLink&quot;&nbsp;id=&quot;LPlnk384463&quot;&nbsp;previewremoved=&quot;true&quot;&gt;https://github.com/xamarin/xamarin-macios/blob/fc55e4306f79491fd269ca2495c6a859799cb1c6/src/CoreMedia/CMCustomBlockAllocator.cs#L24&lt;/a&gt;&lt;/p&gt;<br>
&lt;p&gt;[3]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/xamarin/WebSharp/blob/4df0770f7fd166155be785d4dbdf368ffd2f8466/PepperSharp/src/CompletionCallback.cs#L30&quot;&nbsp;class=&quot;OWAAutoLink&quot;&nbsp;id=&quot;LPlnk615057&quot;&nbsp;previewremoved=&quot;true&quot;&gt;https://github.com/xamarin/WebSharp/blob/4df0770f7fd166155be785d4dbdf368ffd2f8466/PepperSharp/src/CompletionCallback.cs#L30&lt;/a&gt;&lt;/p&gt;<br>
&lt;p&gt;[4]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/xamarin/xamarin-macios/blob/fc55e4306f79491fd269ca2495c6a859799cb1c6/src/Metal/MTLDevice.cs#L48&quot;&nbsp;class=&quot;OWAAutoLink&quot;&nbsp;id=&quot;LPlnk130838&quot;&nbsp;previewremoved=&quot;true&quot;&gt;https://github.com/xamarin/xamarin-macios/blob/fc55e4306f79491fd269ca2495c6a859799cb1c6/src/Metal/MTLDevice.cs#L48&lt;/a&gt;&lt;/p&gt;<br>
&lt;div&nbsp;id=&quot;LPBorder_GT_14787963248120.6811908953224171&quot;&nbsp;style=&quot;margin-bottom:&nbsp;20px;&nbsp;overflow:&nbsp;auto;&nbsp;width:&nbsp;100%;&nbsp;text-indent:&nbsp;0px;&quot;&gt;<br>
&lt;table&nbsp;id=&quot;LPContainer_14787963248060.05054422480424603&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;style=&quot;width:&nbsp;90%;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;position:&nbsp;relative;&nbsp;overflow:&nbsp;auto;&nbsp;padding-top:&nbsp;20px;&nbsp;padding-bottom:&nbsp;20px;&nbsp;margin-top:&nbsp;20px;&nbsp;border-top:&nbsp;1px&nbsp;dotted&nbsp;rgb(200,&nbsp;200,&nbsp;200);&nbsp;border-bottom:&nbsp;1px&nbsp;dotted&nbsp;rgb(200,&nbsp;200,&nbsp;200);&quot;&gt;<br>
&lt;tbody&gt;<br>
&lt;tr&nbsp;valign=&quot;top&quot;&nbsp;style=&quot;border-spacing:&nbsp;0px;&quot;&gt;<br>
&lt;td&nbsp;id=&quot;ImageCell_14787963248070.9104623699494467&quot;&nbsp;colspan=&quot;1&quot;&nbsp;style=&quot;width:&nbsp;250px;&nbsp;position:&nbsp;relative;&nbsp;display:&nbsp;table-cell;&nbsp;padding-right:&nbsp;20px;&quot;&gt;<br>
&lt;div&nbsp;id=&quot;LPImageContainer_14787963248070.11909673166591284&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;height:&nbsp;250px;&nbsp;position:&nbsp;relative;&nbsp;margin:&nbsp;auto;&nbsp;display:&nbsp;table;&nbsp;width:&nbsp;250px;&quot;&gt;<br>
&lt;a&nbsp;id=&quot;LPImageAnchor_14787963248070.1364888916964222&quot;&nbsp;href=&quot;https://github.com/mono/mono/pull/3929&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;display:&nbsp;table-cell;&nbsp;text-align:&nbsp;center;&quot;&gt;&lt;img&nbsp;aria-label=&quot;Preview&nbsp;image&nbsp;with&nbsp;link&nbsp;selected.&nbsp;Double-tap&nbsp;to&nbsp;open&nbsp;the&nbsp;link.&quot;&nbsp;id=&quot;LPThumbnailImageID_14787963248070.20874858635010596&quot;&nbsp;width=&quot;250&quot;&nbsp;height=&quot;250&quot;&nbsp;style=&quot;display:&nbsp;inline-block;&nbsp;max-width:&nbsp;250px;&nbsp;max-height:&nbsp;250px;&nbsp;height:&nbsp;250px;&nbsp;width:&nbsp;250px;&nbsp;border-width:&nbsp;0px;&nbsp;vertical-align:&nbsp;bottom;&quot;&nbsp;src=&quot;https://avatars1.githubusercontent.com/u/123220?v=3&amp;s=400&quot;&gt;&lt;/a&gt;&lt;/div&gt;<br>
&lt;/td&gt;<br>
&lt;td&nbsp;id=&quot;TextCell_14787963248080.9245977249741923&quot;&nbsp;colspan=&quot;2&quot;&nbsp;style=&quot;vertical-align:&nbsp;top;&nbsp;position:&nbsp;relative;&nbsp;padding:&nbsp;0px;&nbsp;display:&nbsp;table-cell;&quot;&gt;<br>
&lt;div&nbsp;id=&quot;LPRemovePreviewContainer_14787963248080.6121928588801062&quot;&gt;&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;LPExpandDescriptionContainer_14787963248080.07897786867779844&quot;&gt;&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;LPTitle_14787963248080.24886581266954555&quot;&nbsp;style=&quot;top:&nbsp;0px;&nbsp;color:&nbsp;rgb(0,&nbsp;120,&nbsp;215);&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;21px;&nbsp;font-family:&nbsp;wf_segoe-ui_light,&nbsp;&quot;Segoe&nbsp;UI&nbsp;Light&quot;,&nbsp;&quot;Segoe&nbsp;WP&nbsp;Light&quot;,&nbsp;&quot;Segoe&nbsp;UI&quot;,&nbsp;&quot;Segoe&nbsp;WP&quot;,&nbsp;Tahoma,&nbsp;Arial,&nbsp;sans-serif;&nbsp;line-height:&nbsp;21px;&quot;&gt;<br>
&lt;a&nbsp;id=&quot;LPUrlAnchor_14787963248080.8013357995281527&quot;&nbsp;href=&quot;https://github.com/mono/mono/pull/3929&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;text-decoration:&nbsp;none;&quot;&gt;Enforce&nbsp;restrictions&nbsp;on&nbsp;pinned&nbsp;GCHandle&nbsp;objects&nbsp;by&nbsp;joshpeterson&nbsp;·&nbsp;Pull&nbsp;Request&nbsp;#3929&nbsp;·&nbsp;mono/mono&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;LPMetadata_14787963248080.41272986264180234&quot;&nbsp;style=&quot;margin:&nbsp;10px&nbsp;0px&nbsp;16px;&nbsp;color:&nbsp;rgb(102,&nbsp;102,&nbsp;102);&nbsp;font-weight:&nbsp;normal;&nbsp;font-family:&nbsp;wf_segoe-ui_normal,&nbsp;&quot;Segoe&nbsp;UI&quot;,&nbsp;&quot;Segoe&nbsp;WP&quot;,&nbsp;Tahoma,&nbsp;Arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;14px;&nbsp;line-height:&nbsp;14px;&quot;&gt;<br>
github.com&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;LPDescription_14787963248090.4487354179653782&quot;&nbsp;style=&quot;display:&nbsp;block;&nbsp;color:&nbsp;rgb(102,&nbsp;102,&nbsp;102);&nbsp;font-weight:&nbsp;normal;&nbsp;font-family:&nbsp;wf_segoe-ui_normal,&nbsp;&quot;Segoe&nbsp;UI&quot;,&nbsp;&quot;Segoe&nbsp;WP&quot;,&nbsp;Tahoma,&nbsp;Arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;14px;&nbsp;line-height:&nbsp;20px;&nbsp;max-height:&nbsp;100px;&nbsp;overflow:&nbsp;hidden;&quot;&gt;<br>
A&nbsp;pinned&nbsp;GCHandle&nbsp;should&nbsp;not&nbsp;be&nbsp;allowed&nbsp;for&nbsp;some&nbsp;types.&nbsp;The&nbsp;GCHandle.Alloc&nbsp;method&nbsp;should&nbsp;throw&nbsp;an&nbsp;ArgumentException&nbsp;in&nbsp;these&nbsp;cases.&nbsp;This&nbsp;change&nbsp;corrects&nbsp;bug&nbsp;https://bugzilla.xamarin.com/show_bug.cg...&lt;/div&gt;<br>
&lt;/td&gt;<br>
&lt;/tr&gt;<br>
&lt;/tbody&gt;<br>
&lt;/table&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
