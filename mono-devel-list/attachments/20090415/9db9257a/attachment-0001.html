<tt>
Hi&nbsp;James,&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Apr&nbsp;15,&nbsp;2009&nbsp;at&nbsp;4:17&nbsp;PM,&nbsp;James&nbsp;Mansion&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:james@mansionfamily.plus.com&quot;&gt;james@mansionfamily.plus.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;Tomi&nbsp;Valkeinen&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;think&nbsp;you&nbsp;mean&nbsp;OS&nbsp;thread.&nbsp;The&nbsp;coroutines&nbsp;are&nbsp;nothing&nbsp;special,&nbsp;they&lt;br&gt;<br>
&amp;gt;&nbsp;are&nbsp;similar&nbsp;to&nbsp;any&nbsp;other&nbsp;jitted&nbsp;code&nbsp;that&nbsp;mono&nbsp;produces.&lt;br&gt;<br>
&lt;/div&gt;Well,&nbsp;except&nbsp;that&nbsp;the&nbsp;core&nbsp;has&nbsp;some&nbsp;knowledge&nbsp;of&nbsp;them&nbsp;now,&nbsp;right?&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&amp;gt;&nbsp;And&nbsp;thus&nbsp;the&nbsp;stack&nbsp;has&nbsp;to&nbsp;be&nbsp;the&nbsp;normal&nbsp;continuous&nbsp;OS&nbsp;stack.&lt;br&gt;<br>
&lt;/div&gt;Thus?&nbsp; Why?&nbsp;You&nbsp;probably&nbsp;need&nbsp;to&nbsp;pin&nbsp;stack&nbsp;areas,&nbsp;but&nbsp;why&nbsp;can&amp;#39;t&nbsp;you&lt;br&gt;<br>
malloc&nbsp;(or&nbsp;mmap)&nbsp;some&nbsp;new&nbsp;space&lt;br&gt;<br>
and&nbsp;place&nbsp;a&nbsp;stack&nbsp;in&nbsp;it?&nbsp; I&nbsp;think&nbsp;you&amp;#39;ll&nbsp;find&nbsp;that&nbsp;Steve&nbsp;Dekorte&amp;#39;s&lt;br&gt;<br>
libcoro&nbsp;does&nbsp;that.&nbsp;If&nbsp;you&nbsp;are&nbsp;prepared&nbsp;to&lt;br&gt;<br>
forgo&nbsp;guard&nbsp;pages&nbsp;and&nbsp;the&nbsp;like&nbsp;(or&nbsp;roll&nbsp;your&nbsp;own&nbsp;handler)&nbsp;then&nbsp;I&nbsp;don&amp;#39;t&lt;br&gt;<br>
see&nbsp;why&nbsp;the&nbsp;stack&nbsp;pointer&nbsp;absolutely&lt;br&gt;<br>
has&nbsp;to&nbsp;be&nbsp;where&nbsp;you&nbsp;expect.&nbsp; And&nbsp;in&nbsp;fact&nbsp;the&nbsp;gubbins&nbsp;that&nbsp;normally&nbsp;gets&lt;br&gt;<br>
pushed&nbsp;to&nbsp;the&nbsp;main&nbsp;CPU&nbsp;stack&lt;br&gt;<br>
can&nbsp;get&nbsp;pushed&nbsp;to&nbsp;a&nbsp;fully&nbsp;software&nbsp;stack&nbsp;anyway,&nbsp;just&nbsp;as&nbsp;you&nbsp;do&nbsp;on&nbsp;RISC&lt;br&gt;<br>
systems&nbsp;with&nbsp;no&nbsp;push/pop&lt;br&gt;<br>
abstraction.&nbsp; The&nbsp;stack&nbsp;pointer&nbsp;is&nbsp;just&nbsp;a&nbsp;pointer,&nbsp;after&nbsp;all.&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
James&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;Such&nbsp;stackless[1]&nbsp;design&nbsp;is&nbsp;quite&nbsp;more&nbsp;complicated&nbsp;as&nbsp;doing&nbsp;stack&nbsp;attach/detach&lt;br&gt;<br>
isn&amp;#39;t&nbsp;trivial.&nbsp;Spaghetti&nbsp;stacks&nbsp;have&nbsp;their&nbsp;issues&nbsp;that&nbsp;this&nbsp;design&nbsp;avoids.&lt;span&nbsp;id=&quot;query&quot;&nbsp;class=&quot;query&quot;&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;br&gt;<br>
The&nbsp;good&nbsp;news&nbsp;is&nbsp;that&nbsp;such&nbsp;change&nbsp;would&nbsp;not&nbsp;require&nbsp;messing&nbsp;with&nbsp;the&nbsp;API,&nbsp;so&nbsp;if&nbsp;this&nbsp;feature&lt;br&gt;<br>
gets&nbsp;enough&nbsp;traction&nbsp;and&nbsp;someone&nbsp;from&nbsp;the&nbsp;community&nbsp;decides&nbsp;to&nbsp;sponsor&nbsp;such&nbsp;optimization&lt;br&gt;<br>
it&nbsp;would&nbsp;be&nbsp;doable&nbsp;without&nbsp;breaking&nbsp;existing&nbsp;users.&lt;br&gt;<br>
&lt;br&gt;[1]stackless&nbsp;in&nbsp;the&nbsp;sense&nbsp;that&nbsp;it&nbsp;doesn&amp;#39;t&nbsp;strictly&nbsp;use&nbsp;the&nbsp;C&nbsp;stack&lt;br&gt;&lt;br&gt;<br>

</tt>
