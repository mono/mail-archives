<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;RE:&nbsp;[Mono-dev]&nbsp;MailDefinition&nbsp;patch&lt;/TITLE&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.6000.16481&quot;&nbsp;name=GENERATOR&gt;<br>
&lt;STYLE&gt;&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;bgColor=#ffffff&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Hi,&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Attached&nbsp;is&nbsp;a&nbsp;patch&nbsp;for&nbsp;the&nbsp;problem&nbsp;described&nbsp;<br>
below.&nbsp;Please&nbsp;review&nbsp;and&nbsp;apply&nbsp;it.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Thanks&nbsp;&amp;amp;&nbsp;best&nbsp;regards,&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Dumi.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;BLOCKQUOTE&nbsp;<br>
style=&quot;PADDING-RIGHT:&nbsp;0px;&nbsp;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#000000&nbsp;2px&nbsp;solid;&nbsp;MARGIN-RIGHT:&nbsp;0px&quot;&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;style=&quot;FONT:&nbsp;10pt&nbsp;arial&quot;&gt;-----&nbsp;Original&nbsp;Message&nbsp;-----&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;<br>
&nbsp;&nbsp;style=&quot;BACKGROUND:&nbsp;#e4e4e4;&nbsp;FONT:&nbsp;10pt&nbsp;arial;&nbsp;font-color:&nbsp;black&quot;&gt;&lt;B&gt;From:&lt;/B&gt;&nbsp;<br>
&nbsp;&nbsp;&lt;A&nbsp;title=kostat@mainsoft.com&nbsp;href=&quot;mailto:kostat@mainsoft.com&quot;&gt;Konstantin&nbsp;<br>
&nbsp;&nbsp;Triger&lt;/A&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;style=&quot;FONT:&nbsp;10pt&nbsp;arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt;&nbsp;&lt;A&nbsp;title=dban@dako.ro&nbsp;<br>
&nbsp;&nbsp;href=&quot;mailto:dban@dako.ro&quot;&gt;Dumitru&nbsp;Ban&lt;/A&gt;&nbsp;;&nbsp;&lt;A&nbsp;<br>
&nbsp;&nbsp;title=mono-devel-list@lists.ximian.com&nbsp;<br>
&nbsp;&nbsp;href=&quot;mailto:mono-devel-list@lists.ximian.com&quot;&gt;mono-devel-list@lists.ximian.com&lt;/A&gt;&nbsp;<br>
&nbsp;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;style=&quot;FONT:&nbsp;10pt&nbsp;arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt;&nbsp;Saturday,&nbsp;June&nbsp;30,&nbsp;2007&nbsp;8:07&nbsp;<br>
&nbsp;&nbsp;PM&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;style=&quot;FONT:&nbsp;10pt&nbsp;arial&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt;&nbsp;RE:&nbsp;[Mono-dev]&nbsp;MailDefinition&nbsp;<br>
&nbsp;&nbsp;patch&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;Hey&nbsp;Dumi,&lt;BR&gt;&lt;BR&gt;I&nbsp;would&nbsp;suggest&nbsp;looking&nbsp;into&nbsp;some&nbsp;code&nbsp;in&nbsp;<br>
&nbsp;&nbsp;Sys.Web,&nbsp;which&nbsp;has&nbsp;similar&nbsp;issues,&nbsp;i.e.&nbsp;XmlSiteMapProvider.&nbsp;It&nbsp;loads&nbsp;its&nbsp;data&nbsp;<br>
&nbsp;&nbsp;from&nbsp;the&nbsp;file&nbsp;and&nbsp;probably&nbsp;solves&nbsp;the&nbsp;problems&nbsp;you&nbsp;face.&nbsp;If&nbsp;appropriate,&nbsp;you&nbsp;<br>
&nbsp;&nbsp;may&nbsp;consider&nbsp;refactoring&nbsp;and&nbsp;using&nbsp;same&nbsp;functions&nbsp;for&nbsp;file&nbsp;loading&nbsp;for&nbsp;both&nbsp;<br>
&nbsp;&nbsp;cases.&lt;BR&gt;&lt;BR&gt;Regarding&nbsp;permissions&nbsp;(or&nbsp;any&nbsp;other&nbsp;IO&nbsp;problem),&nbsp;I&nbsp;think,&nbsp;the&nbsp;<br>
&nbsp;&nbsp;relevant&nbsp;exception&nbsp;should&nbsp;be&nbsp;thrown&nbsp;(nothing&nbsp;special&nbsp;needs&nbsp;to&nbsp;be&nbsp;done,&nbsp;the&nbsp;<br>
&nbsp;&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown&nbsp;when&nbsp;the&nbsp;file&nbsp;will&nbsp;be&nbsp;accessed).&nbsp;As&nbsp;usual,&nbsp;you&nbsp;may&nbsp;<br>
&nbsp;&nbsp;verify&nbsp;this&nbsp;by&nbsp;creating&nbsp;similar&nbsp;conditions&nbsp;on&nbsp;MS&nbsp;<br>
&nbsp;&nbsp;.net.&lt;BR&gt;&lt;BR&gt;Regards,&lt;BR&gt;Konstantin&nbsp;Triger&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;-----Original&nbsp;<br>
&nbsp;&nbsp;Message-----&lt;BR&gt;From:&nbsp;mono-devel-list-bounces@lists.ximian.com&nbsp;on&nbsp;behalf&nbsp;of&nbsp;<br>
&nbsp;&nbsp;Dumitru&nbsp;Ban&lt;BR&gt;Sent:&nbsp;Thu&nbsp;6/28/2007&nbsp;15:41&lt;BR&gt;To:&nbsp;<br>
&nbsp;&nbsp;mono-devel-list@lists.ximian.com&lt;BR&gt;Subject:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;MailDefinition&nbsp;<br>
&nbsp;&nbsp;patch&lt;BR&gt;&lt;BR&gt;Hi&nbsp;again,&lt;BR&gt;&lt;BR&gt;Any&nbsp;thoughts?&nbsp;Any&nbsp;ideas?&lt;BR&gt;&lt;BR&gt;Thanks&nbsp;&amp;amp;&nbsp;<br>
&nbsp;&nbsp;best&nbsp;regards,&lt;BR&gt;Dumi.&lt;BR&gt;&amp;nbsp;&nbsp;-----&nbsp;Original&nbsp;Message&nbsp;-----&lt;BR&gt;&amp;nbsp;&nbsp;From:&nbsp;<br>
&nbsp;&nbsp;Dumitru&nbsp;Ban&lt;BR&gt;&amp;nbsp;&nbsp;To:&nbsp;mono-devel-list@lists.ximian.com&lt;BR&gt;&amp;nbsp;&nbsp;Sent:&nbsp;<br>
&nbsp;&nbsp;Tuesday,&nbsp;May&nbsp;29,&nbsp;2007&nbsp;11:14&nbsp;AM&lt;BR&gt;&amp;nbsp;&nbsp;Subject:&nbsp;[Mono-dev]&nbsp;MailDefinition&nbsp;<br>
&nbsp;&nbsp;patch&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;Hi,&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;create&nbsp;a&nbsp;patch&nbsp;for&nbsp;the&nbsp;<br>
&nbsp;&nbsp;MailDefinition&nbsp;(System.Web.UI.WebControls)&nbsp;and&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;what's&nbsp;the&nbsp;best&nbsp;<br>
&nbsp;&nbsp;way&nbsp;to&nbsp;do&nbsp;it.&nbsp;The&nbsp;problem&nbsp;is&nbsp;in&nbsp;the&nbsp;CreateMailMessage&nbsp;(string&nbsp;recipients,&nbsp;<br>
&nbsp;&nbsp;IDictionary&nbsp;replacements,&nbsp;Control&nbsp;owner)&nbsp;method.&nbsp;If&nbsp;the&nbsp;BodyFileName&nbsp;is&nbsp;<br>
&nbsp;&nbsp;present&nbsp;and&nbsp;it's&nbsp;rooted&nbsp;everything&nbsp;works&nbsp;fine.&nbsp;If&nbsp;it's&nbsp;not&nbsp;rooted,&nbsp;it&nbsp;is&nbsp;<br>
&nbsp;&nbsp;combined&nbsp;with&nbsp;the&nbsp;owner's&nbsp;TemplateSourceDirectory.&nbsp;And&nbsp;this&nbsp;is&nbsp;not&nbsp;working&nbsp;<br>
&nbsp;&nbsp;:(&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;I'm&nbsp;using&nbsp;the&nbsp;MailDefinition&nbsp;from&nbsp;a&nbsp;CreateUserWizard.&nbsp;Both&nbsp;<br>
&nbsp;&nbsp;the&nbsp;aspx&nbsp;containing&nbsp;the&nbsp;CreateUserWizard&nbsp;and&nbsp;the&nbsp;mail&nbsp;file&nbsp;are&nbsp;in&nbsp;the&nbsp;same&nbsp;<br>
&nbsp;&nbsp;directory,&nbsp;&quot;users&quot;.&nbsp;If&nbsp;I&nbsp;set&nbsp;the&nbsp;BodyFileName&nbsp;for&nbsp;the&nbsp;wizard&nbsp;to&nbsp;<br>
&nbsp;&nbsp;&quot;~/users/createaccount.txt&quot;,&nbsp;the&nbsp;combined&nbsp;path&nbsp;is&nbsp;something&nbsp;like&nbsp;this:&nbsp;<br>
&nbsp;&nbsp;&quot;/myapp/~/users/createaccount.txt&quot;.&nbsp;And&nbsp;this&nbsp;is&nbsp;because&nbsp;there's&nbsp;no&nbsp;check&nbsp;for&nbsp;<br>
&nbsp;&nbsp;&quot;~/&quot;.&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;If&nbsp;I&nbsp;set&nbsp;the&nbsp;BodyFileName&nbsp;to&nbsp;&quot;createaccount.txt&quot;,&nbsp;the&nbsp;<br>
&nbsp;&nbsp;combined&nbsp;path&nbsp;is&nbsp;something&nbsp;like&nbsp;this:&nbsp;&quot;/myapp/users/createaccount.txt&quot;.&nbsp;This&nbsp;<br>
&nbsp;&nbsp;one&nbsp;looks&nbsp;fine,&nbsp;except&nbsp;that&nbsp;it's&nbsp;a&nbsp;virtual&nbsp;path&nbsp;and&nbsp;the&nbsp;StreamReader&nbsp;in&nbsp;the&nbsp;<br>
&nbsp;&nbsp;CreateMailMessage&nbsp;is&nbsp;looking&nbsp;for&nbsp;a&nbsp;physical&nbsp;path.&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;How&nbsp;should&nbsp;be&nbsp;<br>
&nbsp;&nbsp;the&nbsp;mail&nbsp;file&nbsp;accessed?&nbsp;Using&nbsp;virtual&nbsp;paths&nbsp;or&nbsp;physical&nbsp;paths?&nbsp;Also,&nbsp;what&nbsp;<br>
&nbsp;&nbsp;about&nbsp;the&nbsp;permissions&nbsp;of&nbsp;the&nbsp;mail&nbsp;file?&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;P.S.&nbsp;Attached&nbsp;is&nbsp;a&nbsp;<br>
&nbsp;&nbsp;sample&nbsp;error.&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;Thanks&nbsp;&amp;amp;&nbsp;best&nbsp;regards,&lt;BR&gt;&amp;nbsp;&nbsp;<br>
&nbsp;&nbsp;Dumi.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;__________&nbsp;NOD32&nbsp;2294&nbsp;(20070528)&nbsp;Information&nbsp;<br>
&nbsp;&nbsp;__________&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;This&nbsp;message&nbsp;was&nbsp;checked&nbsp;by&nbsp;NOD32&nbsp;antivirus&nbsp;<br>
&nbsp;&nbsp;system.&lt;BR&gt;&amp;nbsp;&nbsp;&lt;A&nbsp;<br>
&nbsp;&nbsp;href=&quot;http://www.eset.com&quot;&gt;http://www.eset.com&lt;/A&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;------------------------------------------------------------------------------&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;<br>
&nbsp;&nbsp;_______________________________________________&lt;BR&gt;&amp;nbsp;&nbsp;Mono-devel-list&nbsp;<br>
&nbsp;&nbsp;mailing&nbsp;list&lt;BR&gt;&amp;nbsp;&nbsp;Mono-devel-list@lists.ximian.com&lt;BR&gt;&amp;nbsp;&nbsp;&lt;A&nbsp;<br>
&nbsp;&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/A&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;<br>
&nbsp;&nbsp;__________&nbsp;NOD32&nbsp;2294&nbsp;(20070528)&nbsp;Information&nbsp;__________&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&nbsp;This&nbsp;<br>
&nbsp;&nbsp;message&nbsp;was&nbsp;checked&nbsp;by&nbsp;NOD32&nbsp;antivirus&nbsp;system.&lt;BR&gt;&amp;nbsp;&nbsp;&lt;A&nbsp;<br>
&nbsp;&nbsp;href=&quot;http://www.eset.com&quot;&gt;http://www.eset.com&lt;/A&gt;&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;BR&gt;&lt;BR&gt;__________&nbsp;<br>
&nbsp;&nbsp;NOD32&nbsp;2364&nbsp;(20070629)&nbsp;Information&nbsp;__________&lt;BR&gt;&lt;BR&gt;This&nbsp;message&nbsp;was&nbsp;checked&nbsp;<br>
&nbsp;&nbsp;by&nbsp;NOD32&nbsp;antivirus&nbsp;system.&lt;BR&gt;&lt;A&nbsp;<br>
&nbsp;&nbsp;href=&quot;http://www.eset.com&quot;&gt;http://www.eset.com&lt;/A&gt;&lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
