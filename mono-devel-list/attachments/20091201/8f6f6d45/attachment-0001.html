<tt>
Hi&nbsp;all,&lt;br&gt;&lt;br&gt;I&amp;#39;m&nbsp;currently&nbsp;investigating&nbsp;a&nbsp;performance&nbsp;problem&nbsp;which&nbsp;is&nbsp;causing&nbsp;complex&nbsp;objects&nbsp;in&nbsp;Second&nbsp;Life&nbsp;containing&nbsp;many&nbsp;scripts&nbsp;to&nbsp;take&nbsp;a&nbsp;long&nbsp;time&nbsp;to&nbsp;load.&lt;br&gt;&lt;br&gt;We&nbsp;embed&nbsp;Mono&nbsp;in&nbsp;the&nbsp;Second&nbsp;Life&nbsp;simulator,&nbsp;so&nbsp;I&nbsp;turned&nbsp;on&nbsp;the&nbsp;profiler&nbsp;before&nbsp;initialising&nbsp;the&nbsp;runtime:&lt;br&gt;<br>
&lt;br&gt;mono_profiler_load(&amp;quot;default:stat&amp;quot;);&lt;br&gt;mono_jit_init(&amp;quot;root&nbsp;domain&amp;quot;);&lt;br&gt;mono_internal_call_init();&lt;br&gt;&lt;br&gt;After&nbsp;shutting&nbsp;down&nbsp;the&nbsp;simulator,&nbsp;the&nbsp;profiler&nbsp;reported&nbsp;the&nbsp;slow&nbsp;method&nbsp;as&nbsp;being&nbsp;System.Reflection.Assembly::Load(byte[]),&nbsp;with&nbsp;each&nbsp;call&nbsp;taking&nbsp;19.961ms:&lt;br&gt;<br>
&lt;br&gt;Time(ms)&nbsp;Count  &nbsp;P/call(ms)&nbsp;Method&nbsp;name&lt;br&gt;########################&lt;br&gt; 4052.135    &nbsp;203  &nbsp;19.961  &nbsp;System.Reflection.Assembly::Load(byte[])&lt;br&gt; &nbsp;Callers&nbsp;(with&nbsp;count)&nbsp;that&nbsp;contribute&nbsp;at&nbsp;least&nbsp;for&nbsp;1%:&lt;br&gt;        &nbsp;102 &nbsp;50&nbsp;%&nbsp;LindenLab.SecondLife.Script::.ctor(string,byte[],long&amp;amp;)&lt;br&gt;<br>
        &nbsp;101 &nbsp;49&nbsp;%&nbsp;LindenLab.SecondLife.Script::Deserialize(byte[],byte[])&lt;br&gt;&lt;br&gt;Does&nbsp;this&nbsp;seem&nbsp;right?&nbsp;We&amp;#39;re&nbsp;just&nbsp;passing&nbsp;an&nbsp;assembly&nbsp;as&nbsp;bytes&nbsp;to&nbsp;Mono&nbsp;and&nbsp;asking&nbsp;it&nbsp;to&nbsp;turn&nbsp;it&nbsp;in&nbsp;to&nbsp;an&nbsp;assembly,&nbsp;19ms&nbsp;seems&nbsp;like&nbsp;a&nbsp;long&nbsp;time&nbsp;to&nbsp;do&nbsp;that.&lt;br&gt;<br>
&lt;br&gt;Are&nbsp;there&nbsp;any&nbsp;faster&nbsp;ways&nbsp;we&nbsp;could&nbsp;do&nbsp;this?&nbsp;In&nbsp;the&nbsp;example&nbsp;above&nbsp;an&nbsp;object&nbsp;with&nbsp;200&nbsp;scripts&nbsp;in&nbsp;it&nbsp;is&nbsp;taking&nbsp;4s&nbsp;to&nbsp;load,&nbsp;which&nbsp;is&nbsp;much&nbsp;faster&nbsp;than&nbsp;with&nbsp;an&nbsp;LSL&nbsp;script.&lt;br&gt;&lt;br&gt;I&nbsp;get&nbsp;similar&nbsp;results&nbsp;using&nbsp;mono&nbsp;1.2.6&nbsp;(which&nbsp;we&nbsp;have&nbsp;embedded&nbsp;in&nbsp;Second&nbsp;Life)&nbsp;or&nbsp;revision&nbsp;146428,&nbsp;which&nbsp;is&nbsp;pretty&nbsp;close&nbsp;to&nbsp;the&nbsp;tip&nbsp;of&nbsp;svn.&lt;br&gt;<br>
&lt;br&gt;Also,&nbsp;the&nbsp;profiler&nbsp;seems&nbsp;to&nbsp;output&nbsp;it&amp;#39;s&nbsp;results&nbsp;the&nbsp;first&nbsp;time&nbsp;we&nbsp;unload&nbsp;a&nbsp;domain,&nbsp;is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;stop&nbsp;that&nbsp;happening,&nbsp;so&nbsp;we&nbsp;get&nbsp;the&nbsp;full&nbsp;output&nbsp;on&nbsp;shut&nbsp;down?&lt;br&gt;&lt;br&gt;(How&nbsp;should&nbsp;we&nbsp;be&nbsp;creating&nbsp;and&nbsp;destroying&nbsp;appdomains&nbsp;from&nbsp;unmanaged&nbsp;code:&nbsp;we&amp;#39;re&nbsp;currently&nbsp;using&nbsp;ves_icall_System_AppDomain_InternalUnload&nbsp;from&nbsp;unmanaged&nbsp;code&nbsp;to&nbsp;unload&nbsp;domains,&nbsp;which&nbsp;is&nbsp;less&nbsp;than&nbsp;ideal...)&lt;br&gt;<br>
&lt;br&gt;Cheers,&lt;br&gt;&lt;br&gt;Jim&lt;br&gt;<br>

</tt>
