<tt>
Just&nbsp;a&nbsp;minor&nbsp;note,&nbsp;only&nbsp;recently&nbsp;has&nbsp;mono&nbsp;started&nbsp;using&nbsp;GlobalAlloc&nbsp;and&nbsp;GlobalFree&nbsp;for&nbsp;the&nbsp;Marshal.*HGlobal&nbsp;routines&nbsp;on&nbsp;Windows.&nbsp;It&nbsp;was&nbsp;previously&nbsp;using&amp;nbsp;&nbsp;g_free&nbsp;on&nbsp;all&nbsp;platforms.&nbsp;I&nbsp;think&nbsp;only&nbsp;the&nbsp;svn&nbsp;version&nbsp;currently&nbsp;has&nbsp;this&nbsp;change,&nbsp;so&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;what&nbsp;will&nbsp;happen&nbsp;if&nbsp;you&nbsp;try&nbsp;to&nbsp;free&nbsp;the&nbsp;memory&nbsp;on&nbsp;Windows&nbsp;using&nbsp;<br>
Marshal.FreeHGlobal&nbsp;with&nbsp;released&nbsp;versions&nbsp;of&nbsp;mono.&nbsp;You&nbsp;may&nbsp;need&nbsp;to&nbsp;pinvoke&nbsp;GlobalFree&nbsp;yourself&nbsp;on&nbsp;windows&nbsp;to&nbsp;release&nbsp;the&nbsp;memory&nbsp;until&nbsp;the&nbsp;next&nbsp;release&nbsp;of&nbsp;mono.&lt;br&gt;&lt;br&gt;-&nbsp;Jonathan&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;1/4/07,&nbsp;<br>
&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Robert&nbsp;Jordan&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:robertj@gmx.net&quot;&gt;robertj@gmx.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Leszek&nbsp;Ciesielski&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;Hi,&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&nbsp;need&nbsp;to&nbsp;allocate&nbsp;unmanaged&nbsp;memory&nbsp;AND&nbsp;make&nbsp;sure&nbsp;it&nbsp;is&nbsp;filled&nbsp;with&lt;br&gt;&amp;gt;&nbsp;0&amp;#39;s.&nbsp;Is&nbsp;there&nbsp;some&nbsp;clever/fast&nbsp;way&nbsp;to&nbsp;do&nbsp;this?&amp;nbsp;&amp;nbsp;So&nbsp;far,&nbsp;I&nbsp;found&nbsp;only&lt;br&gt;&amp;gt;&nbsp;Marshal.WriteByte<br>
,&nbsp;which&nbsp;sets&nbsp;one&nbsp;byte&nbsp;at&nbsp;a&nbsp;time.&lt;br&gt;&lt;br&gt;untested:&lt;br&gt;&lt;br&gt;public&nbsp;static&nbsp;IntPtr&nbsp;Alloc&nbsp;(int&nbsp;bytes)&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int&nbsp;p&nbsp;=&nbsp;(int)&nbsp;Environment.OSVersion.Platform;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;((p&nbsp;==&nbsp;4)&nbsp;||&nbsp;(p&nbsp;==&nbsp;128))&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&nbsp;unix<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&nbsp;calloc&nbsp;(bytes,&nbsp;1);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&nbsp;else&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&nbsp;GlobalAlloc&nbsp;(GMEM_ZEROINIT,&nbsp;bytes);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;}&lt;br&gt;&lt;br&gt;[DllImport(&amp;quot;libc&amp;quot;)]&lt;br&gt;static&nbsp;extern&nbsp;IntPtr&nbsp;calloc&nbsp;(int&nbsp;nmemb,&nbsp;int&nbsp;size);<br>
&lt;br&gt;&lt;br&gt;const&nbsp;int&nbsp;GMEM_ZEROINIT&nbsp;=&nbsp;0x40;&lt;br&gt;&lt;br&gt;[DllImport(&amp;quot;kernel32&amp;quot;)]&lt;br&gt;static&nbsp;extern&nbsp;IntPtr&nbsp;GlobalAlloc&nbsp;(int&nbsp;flags,&nbsp;int&nbsp;bytes);&lt;br&gt;&lt;br&gt;&lt;br&gt;On&nbsp;both&nbsp;platforms&nbsp;the&nbsp;memory&nbsp;can&nbsp;be&nbsp;released&nbsp;with&nbsp;Marshal.FreeHGlobal<br>
.&lt;br&gt;&lt;br&gt;Robert&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;<br>
http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
