<tt>
Actually&nbsp;it&amp;#39;s&nbsp;ok,&nbsp;fixed&nbsp;on&nbsp;master&nbsp;and&nbsp;will&nbsp;backport&nbsp;to&nbsp;mono-2-10&lt;div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;--&lt;/div&gt;Jérémie&nbsp;Laval&lt;div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://neteril.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://neteril.org&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
<br>
2011/3/21&nbsp;Jérémie&nbsp;Laval&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:jeremie.laval@gmail.com&quot;&gt;jeremie.laval@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
Hello,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;our&nbsp;implementation.&nbsp;Could&nbsp;you&nbsp;fill&nbsp;a&nbsp;bug&nbsp;please?&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;div&gt;--&lt;/div&gt;Jérémie&nbsp;Laval&lt;div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://neteril.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://neteril.org&lt;/a&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Mar&nbsp;21,&nbsp;2011&nbsp;at&nbsp;11:37&nbsp;AM,&nbsp;vart&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:artemyv@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;artemyv@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&amp;#39;m&nbsp;compiling&nbsp;the&nbsp;following&nbsp;code&nbsp;on&nbsp;VS2010&nbsp;or&nbsp;Monodev&nbsp;2.6&nbsp;for&nbsp;windows&nbsp;with&lt;br&gt;<br>
Net4.0&nbsp;settings&nbsp;and&nbsp;get&nbsp;the&nbsp;correct&nbsp;output&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;compile&nbsp;the&nbsp;same&nbsp;code&nbsp;on&nbsp;Ubuntu/OpenSUSE&nbsp;using&nbsp;Mono&nbsp;2.10&nbsp;and&nbsp;Monodev&nbsp;2.6&lt;br&gt;<br>
beta1&nbsp;-&nbsp;I&nbsp;got&nbsp;not&nbsp;output.&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;is&nbsp;the&nbsp;problem&nbsp;here?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
static&nbsp;void&nbsp;Main()&lt;br&gt;<br>
&nbsp; &nbsp; {&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; var&nbsp;parent&nbsp;=&nbsp;Task.Factory.StartNew(()&nbsp;=&amp;gt;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;We’ll&nbsp;throw&nbsp;3&nbsp;exceptions&nbsp;at&nbsp;once&nbsp;using&nbsp;3&nbsp;child&nbsp;tasks:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int[]&nbsp;numbers&nbsp;=&nbsp;{&nbsp;0&nbsp;};&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var&nbsp;childFactory&nbsp;=&nbsp;new&nbsp;TaskFactory&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(TaskCreationOptions.AttachedToParent,&lt;br&gt;<br>
TaskContinuationOptions.None);&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; childFactory.StartNew(()&nbsp;=&amp;gt;&nbsp;5&nbsp;/&nbsp;numbers[0]);&nbsp; &nbsp;//&nbsp;Division&nbsp;by&lt;br&gt;<br>
zero&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; childFactory.StartNew(()&nbsp;=&amp;gt;&nbsp;numbers[1]);&nbsp; &nbsp; &nbsp; //&nbsp;Index&nbsp;out&nbsp;of&lt;br&gt;<br>
range&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; childFactory.StartNew(()&nbsp;=&amp;gt;&nbsp;{&nbsp;throw&nbsp;null;&nbsp;});&nbsp; //&nbsp;Null&nbsp;reference&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; });&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; try&nbsp;{&nbsp;parent.Wait();&nbsp;}&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; catch&nbsp;(AggregateException&nbsp;aex)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; aex.Flatten().Handle(ex&nbsp;=&amp;gt;&nbsp; &nbsp;//&nbsp;Note&nbsp;that&nbsp;we&nbsp;still&nbsp;need&nbsp;to&nbsp;call&lt;br&gt;<br>
Flatten&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;(ex&nbsp;is&nbsp;DivideByZeroException)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(&amp;quot;Divide&nbsp;by&nbsp;zero&amp;quot;);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;true;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;This&nbsp;exception&lt;br&gt;<br>
is&nbsp;&amp;quot;handled&amp;quot;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else&nbsp;if&nbsp;(ex&nbsp;is&nbsp;IndexOutOfRangeException)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(&amp;quot;Index&nbsp;out&nbsp;of&nbsp;range&amp;quot;);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;true;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;This&nbsp;exception&lt;br&gt;<br>
is&nbsp;&amp;quot;handled&amp;quot;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(&amp;quot;Other&nbsp;exception:&nbsp;&amp;quot;&nbsp;+&nbsp;ex.Message);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;true;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;This&nbsp;exception&lt;br&gt;<br>
is&nbsp;&amp;quot;handled&amp;quot;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //return&nbsp;false;&nbsp; &nbsp; //&nbsp;All&nbsp;other&nbsp;exceptions&nbsp;will&nbsp;get&nbsp;rethrown&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&nbsp; &nbsp; }&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Output&nbsp;on&nbsp;Windows&lt;br&gt;<br>
&lt;br&gt;<br>
Other&nbsp;exception:&nbsp;Object&nbsp;reference&nbsp;not&nbsp;set&nbsp;to&nbsp;an&nbsp;instance&nbsp;of&nbsp;an&nbsp;object.&lt;br&gt;<br>
Divide&nbsp;by&nbsp;zero&lt;br&gt;<br>
Index&nbsp;out&nbsp;of&nbsp;range&lt;br&gt;<br>
&lt;br&gt;<br>
These&nbsp;line&nbsp;could&nbsp;be&nbsp;shown&nbsp;in&nbsp;different&nbsp;order&nbsp;depending&nbsp;on&nbsp;Task&nbsp;execution&lt;br&gt;<br>
order.&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;linux&nbsp;I&nbsp;do&nbsp;not&nbsp;get&nbsp;any&nbsp;output.&lt;br&gt;<br>
Same&nbsp;problem&nbsp;with&nbsp;several&nbsp;other&nbsp;samples&nbsp;using&nbsp;Task/TaskFactory&nbsp;classes&nbsp;from&lt;br&gt;<br>
System.Threading.Tasks&nbsp;namespace&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/Task-class-usage-problem-tp3393138p3393138.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://mono.1490590.n4.nabble.com/Task-class-usage-problem-tp3393138p3393138.html&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>
<br>
Sent&nbsp;from&nbsp;the&nbsp;Mono&nbsp;-&nbsp;Dev&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
