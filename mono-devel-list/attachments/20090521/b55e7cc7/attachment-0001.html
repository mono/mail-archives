<tt>
Hey&nbsp;Zoltan,&lt;br&gt;&lt;br&gt;Attached&nbsp;is&nbsp;a&nbsp;stretch&nbsp;of&nbsp;the&nbsp;fix&nbsp;to&nbsp;support&nbsp;8&nbsp;bytes&nbsp;structs&nbsp;in&nbsp;regs&nbsp;on&nbsp;x86.&lt;br&gt;&lt;br&gt;What&nbsp;I&nbsp;noticed&nbsp;from&nbsp;the&nbsp;current&nbsp;code&nbsp;is&nbsp;that&nbsp;mono_decompose_vtype_opts&nbsp;doesn&amp;#39;t&nbsp;have&nbsp;a&nbsp;clue&nbsp;on&nbsp;which&nbsp;regs&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;presented.&lt;br&gt;<br>
It&nbsp;works&nbsp;by&nbsp;pure&nbsp;luck&nbsp;since&nbsp;both&nbsp;amd64&nbsp;and&nbsp;x86&nbsp;uses&nbsp;EAX/RAX&nbsp;(0)&nbsp;for&nbsp;the&nbsp;first&nbsp;one.&lt;br&gt;&lt;br&gt;But&nbsp;to&nbsp;proper&nbsp;support&nbsp;return&nbsp;in&nbsp;a&nbsp;reg&nbsp;pair&nbsp;we&nbsp;need&nbsp;to&nbsp;give&nbsp;it&nbsp;such&nbsp;knowledge.&lt;br&gt;&lt;br&gt;The&nbsp;attached&nbsp;patch&nbsp;is&nbsp;not&nbsp;final&nbsp;and&nbsp;still&nbsp;requires&nbsp;something&nbsp;like&nbsp;a&nbsp;mono_arch_get_vret_reg&nbsp;to&nbsp;inform&nbsp;mono_decompose_vtype_opts&nbsp;about&nbsp;the&nbsp;regs&nbsp;to&nbsp;use.&lt;br&gt;<br>
&lt;br&gt;Please&nbsp;review&nbsp;it&nbsp;so&nbsp;I&nbsp;know&nbsp;if&nbsp;this&nbsp;is&nbsp;the&nbsp;right&nbsp;approach&nbsp;and&nbsp;can&nbsp;proceed&nbsp;with&nbsp;finishing&nbsp;it.&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Rodrigo&lt;br&gt;<br>

</tt>
