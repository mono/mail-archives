<tt>
I&nbsp;want&nbsp;to&nbsp;use&nbsp;Embeded&nbsp;Mono&nbsp;powered&nbsp;by&nbsp;LLVM.<br>
so&nbsp;I&nbsp;Get&nbsp;the&nbsp;Master&nbsp;Version&nbsp;Code&nbsp;Mono&nbsp;,and&nbsp;LLVM-Mono&nbsp;Version&nbsp;from&nbsp;GIT.<br>
But,when&nbsp;Use&nbsp;the&nbsp;LLVM&nbsp;Version&nbsp;DLL,&nbsp;the&nbsp;samples&nbsp;crashed.<br>
<br>
the&nbsp;crash&nbsp;On&nbsp;the:<br>
&nbsp;Funtions&nbsp;:&nbsp;bool&nbsp;FPPassManager::runOnFunction(Function&nbsp;&amp;F)&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PassManagerPrettyStackEntry&nbsp;X(FP,&nbsp;F);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TimeRegion&nbsp;PassTimer(getPassTimer(FP));<br>
&nbsp;&nbsp;--&gt;&nbsp;LocalChanged&nbsp;|=&nbsp;FP-&gt;runOnFunction(F);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
the&nbsp;FP&nbsp;is&nbsp;the&nbsp;last&nbsp;pass,and&nbsp;it&nbsp;is&nbsp;a&nbsp;BasicCallGraph,&nbsp;so&nbsp;It&nbsp;did&nbsp;not&nbsp;have&nbsp;a&nbsp;runOnFunction&nbsp;impl,so,the&nbsp;ESP&nbsp;has&nbsp;been&nbsp;breaken.<br>
<br>
I&nbsp;am&nbsp;a&nbsp;beginner&nbsp;of&nbsp;MONO&amp;LLVM,&nbsp;so,&nbsp;i&nbsp;can`t&nbsp;understand&nbsp;why&nbsp;the&nbsp;passMannger&nbsp;Handle&nbsp;the&nbsp;MoudelPass&nbsp;and&nbsp;FunctionPass&nbsp;as&nbsp;same.&nbsp;and&nbsp;the&nbsp;MoudelPass&nbsp;did&nbsp;not&nbsp;have&nbsp;a&nbsp;runOnFuntion&nbsp;impl.<br>
<br>
Is&nbsp;The&nbsp;Code&nbsp;Version&nbsp;i&nbsp;get&nbsp;wrong?&nbsp;or&nbsp;the&nbsp;LLVM&nbsp;Config&nbsp;should&nbsp;be&nbsp;wrong?<br>
<br>
<br>
when&nbsp;i&nbsp;add&nbsp;a&nbsp;Kind&nbsp;check,as&nbsp;below,it&nbsp;seems&nbsp;work.<br>
-&gt;&gt;if(FP-&gt;getPassKind()&nbsp;!=&nbsp;PT_Module)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PassManagerPrettyStackEntry&nbsp;X(FP,&nbsp;F);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TimeRegion&nbsp;PassTimer(getPassTimer(FP));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LocalChanged&nbsp;|=&nbsp;FP-&gt;runOnFunction(F);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
but&nbsp;i&nbsp;get&nbsp;worst&nbsp;perfomance.<br>
LLVM&nbsp;Verison(My&nbsp;Modify&nbsp;Version)&nbsp;cost&nbsp;double&nbsp;time&nbsp;more&nbsp;than&nbsp;the&nbsp;Org&nbsp;Verison(With&nbsp;out&nbsp;LLVM).<br>
<br>
My&nbsp;Test&nbsp;Code&nbsp;is&nbsp;<br>
<br>
&nbsp;&nbsp;static&nbsp;void&nbsp;Test2()<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i,&nbsp;j,&nbsp;N;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;step,&nbsp;x_i,&nbsp;sum;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;interval_begin&nbsp;=&nbsp;0.0;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;interval_end&nbsp;=&nbsp;2.0&nbsp;*&nbsp;3.141592653589793238;<br>
<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(j&nbsp;=&nbsp;2;&nbsp;j&nbsp;&lt;&nbsp;27;&nbsp;j++)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N&nbsp;=&nbsp;1&nbsp;&lt;&lt;&nbsp;j;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;step&nbsp;=&nbsp;(interval_end&nbsp;-&nbsp;interval_begin)&nbsp;/&nbsp;N;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum&nbsp;=&nbsp;Math.Abs(Math.Sin(interval_begin))&nbsp;*&nbsp;step&nbsp;/&nbsp;2.0;<br>
<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;1;&nbsp;i&nbsp;&lt;&nbsp;N;&nbsp;i++)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x_i&nbsp;=&nbsp;i&nbsp;*&nbsp;step;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum&nbsp;+=&nbsp;Math.Abs(Math.Sin(x_i))&nbsp;*&nbsp;step;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum&nbsp;+=&nbsp;Math.Abs(Math.Sin(interval_end))&nbsp;*&nbsp;step&nbsp;/&nbsp;2.0;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&lt;br/&gt;&lt;hr&nbsp;align=&quot;left&quot;&nbsp;width=&quot;300&quot;&nbsp;/&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/MonoJIT-LLVM-Crash-tp4657981.html&quot;&gt;MonoJIT&amp;LLVM&nbsp;&nbsp;Crash&lt;/a&gt;&lt;br/&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/Mono-Dev-f1517221.html&quot;&gt;Mono&nbsp;-&nbsp;Dev&nbsp;mailing&nbsp;list&nbsp;archive&lt;/a&gt;&nbsp;at&nbsp;Nabble.com.&lt;br/&gt;
</tt>
