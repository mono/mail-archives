<tt>
&lt;div&gt;Hi,&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;currently&nbsp;gendarme&nbsp;just&nbsp;displays&nbsp;TypeName::MethodName::Offset&nbsp;of&nbsp;violations.&nbsp;This&nbsp;results&nbsp;for&nbsp;example&nbsp;in&nbsp;the&nbsp;following&nbsp;output:&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;[snip]&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;p&gt;1.&nbsp;NewLineLiteralRule&lt;/p&gt;<br>
&lt;p&gt;Problem:&nbsp;The&nbsp;method&nbsp;'System.Void&nbsp;Mono.Xml.MiniParser::Parse(Mono.Xml.MiniParser/IReader,Mono.Xml.MiniParser/IHandler)'&nbsp;use&nbsp;some&nbsp;literal&nbsp;values&nbsp;for&nbsp;new&nbsp;lines&nbsp;(e.g.&nbsp;\r\n)&nbsp;which&nbsp;aren't&nbsp;portable&nbsp;across&nbsp;operating&nbsp;systems.&lt;/p&gt;<br>
<br>
&lt;p&gt;Details:&lt;br&gt;&amp;nbsp;&nbsp;Mono.Xml.MiniParser::Parse:00b5&lt;/p&gt;<br>
&lt;p&gt;[/snip]&lt;/p&gt;<br>
&lt;p&gt;Thanks&nbsp;to&nbsp;Jb&nbsp;Mono.Cecil&nbsp;has&nbsp;support&nbsp;of&nbsp;reading&nbsp;debug&nbsp;files&nbsp;of&nbsp;&lt;a&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&nbsp;href=&quot;http://ms.net/&quot;&nbsp;target=&quot;_blank&quot;&gt;MS.NET&lt;/a&gt;&nbsp;(pdb)&nbsp;and&nbsp;mono&nbsp;(mdb).&nbsp;With&nbsp;just&nbsp;a&nbsp;few&nbsp;lines&nbsp;of&nbsp;code&nbsp;we&nbsp;can&nbsp;embed&nbsp;this&nbsp;feature&nbsp;into&nbsp;gendarme.&nbsp;I've&nbsp;&amp;quot;hacked&amp;quot;&nbsp;together&nbsp;a&nbsp;sample&nbsp;implementation&nbsp;which&amp;nbsp;&nbsp;produces&nbsp;the&nbsp;following&nbsp;output:&nbsp;<br>
&lt;/p&gt;<br>
&lt;p&gt;[snip]&lt;/p&gt;<br>
&lt;p&gt;1.&nbsp;NewLineLiteralRule&lt;/p&gt;<br>
&lt;p&gt;Problem:&nbsp;The&nbsp;method&nbsp;'System.Void&nbsp;Mono.Xml.MiniParser::Parse(Mono.Xml.MiniParser/IReader,Mono.Xml.MiniParser/IHandler)'&nbsp;use&nbsp;some&nbsp;literal&nbsp;values&nbsp;for&nbsp;new&nbsp;lines&nbsp;(e.g.&nbsp;\r\n)&nbsp;which&nbsp;aren't&nbsp;portable&nbsp;across&nbsp;operating&nbsp;systems.&lt;/p&gt;<br>
<br>
&lt;p&gt;Details:&lt;br&gt;&amp;nbsp;&nbsp;Mono.Xml.MiniParser::Parse:00b5:&nbsp;Found&nbsp;string:&nbsp;&amp;quot;&amp;lt;&amp;gt;/?=&amp;amp;'&amp;quot;![&nbsp;]&amp;nbsp;&nbsp;\r\n&amp;quot;&lt;br&gt;&amp;nbsp;&nbsp;Source&nbsp;Text:&lt;/p&gt;<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;int&nbsp;charCode&nbsp;=&nbsp;&amp;quot;&amp;lt;&amp;gt;/?=&amp;amp;'\&amp;quot;![&nbsp;]\t\r\n&amp;quot;.IndexOf((char)currCh)&nbsp;&amp;amp;&nbsp;0xF;&lt;br&gt;--------------------------------^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&nbsp;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(charCode&nbsp;==&nbsp;(int)CharKind.CR)&nbsp;continue;&nbsp;//&nbsp;ignore&lt;/p&gt;<br>
&lt;p&gt;[/snip]&lt;/p&gt;<br>
&lt;p&gt;The&nbsp;changes&nbsp;for&nbsp;supporting&nbsp;this&nbsp;stuff&nbsp;aren't&nbsp;a&nbsp;big&nbsp;deal,&nbsp;but&nbsp;since&nbsp;I&nbsp;haven't&nbsp;worked&nbsp;with&nbsp;Mono.Cecil.Mdb&nbsp;and/or&nbsp;Mono.Cecil.Pdb&nbsp;I'd&nbsp;like&nbsp;to&nbsp;hear&nbsp;what&nbsp;other&nbsp;might&nbsp;think&nbsp;about&nbsp;this&nbsp;implementation:&lt;/p&gt;<br>
&lt;p&gt;1)&nbsp;Add&nbsp;Runner::LoadDebugInfos&nbsp;(AssemblyDefinition,&nbsp;string&nbsp;fileName):&lt;/p&gt;<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;private&nbsp;Hashtable&nbsp;symbolReaders&nbsp;=&nbsp;new&nbsp;Hashtable&nbsp;();&lt;/p&gt;<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;public&nbsp;void&nbsp;LoadDebugInfos&nbsp;(AssemblyDefinition&nbsp;ad,&nbsp;string&nbsp;fileName)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;symbolReaders.Clear&nbsp;();&lt;/p&gt;<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;ISymbolStoreFactory&nbsp;factory&nbsp;=&nbsp;GetSymbolStoreFactory&nbsp;(fileName);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;(factory&nbsp;==&nbsp;null)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;foreach&nbsp;(ModuleDefinition&nbsp;md&nbsp;in&nbsp;ad.Modules)&nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;symbolReaders&nbsp;[md]&nbsp;=&nbsp;factory.CreateReader<br>
&nbsp;(md,&nbsp;fileName);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;}&lt;/p&gt;<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;private&nbsp;ISymbolStoreFactory&nbsp;GetSymbolStoreFactory&nbsp;(string&nbsp;fileName)&nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;string&nbsp;pdbFileName&nbsp;=&nbsp;Path.ChangeExtension&nbsp;(fileName,&nbsp;&amp;quot;pdb&amp;quot;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;(File.Exists&nbsp;(pdbFileName))&nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&nbsp;new&nbsp;Mono.Cecil.Pdb.PdbFactory<br>
&nbsp;();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;/p&gt;<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;string&nbsp;mdbFileName&nbsp;=&nbsp;Path.ChangeExtension&nbsp;(fileName,&nbsp;&amp;quot;mdb&amp;quot;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;(File.Exists&nbsp;(mdbFileName))&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&nbsp;new&nbsp;Mono.Cecil.Mdb.MdbFactory&nbsp;();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&nbsp;null;&lt;br&gt;&amp;nbsp;&amp;nbsp;}&lt;/p&gt;<br>
&lt;p&gt;3)&nbsp;Add&nbsp;reading&nbsp;code&nbsp;to&nbsp;the&nbsp;foreach&nbsp;loop&nbsp;in&nbsp;Runner::Process&nbsp;to&nbsp;read&nbsp;debugging&nbsp;infos&nbsp;(if&nbsp;available)&lt;/p&gt;<br>
&lt;p&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;4)&nbsp;Change&nbsp;Location.cs&nbsp;and&nbsp;add&nbsp;a&nbsp;new&nbsp;Constructor&nbsp;(MethodDeclaration,&nbsp;Instruction)&nbsp;to&nbsp;load&nbsp;the&nbsp;source&nbsp;text&nbsp;out&nbsp;of&nbsp;the&nbsp;SequencePoint&nbsp;of&nbsp;the&nbsp;given&nbsp;instruction.&nbsp;Read&nbsp;in&nbsp;the&nbsp;file&nbsp;name&nbsp;specified&nbsp;in&nbsp;the&nbsp;document&nbsp;and&nbsp;extract&nbsp;the&nbsp;source&nbsp;text&nbsp;beginning&nbsp;at&nbsp;StartLine.&nbsp;<br>
&lt;/font&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;5)&nbsp;Modify&nbsp;Runner(s)&nbsp;to&nbsp;display&nbsp;the&nbsp;new&nbsp;Source&nbsp;Text.&lt;/font&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;Any&nbsp;ideas&nbsp;how&nbsp;this&nbsp;can&nbsp;be&nbsp;easier/better/...&nbsp;done?&nbsp;Should&nbsp;there&nbsp;be&nbsp;a&nbsp;command&nbsp;line&nbsp;flag&nbsp;to&nbsp;specifiy&nbsp;where&nbsp;to&nbsp;search&nbsp;for&nbsp;debug&nbsp;files&nbsp;or&nbsp;to&nbsp;enable/disable&nbsp;debug&nbsp;symbol&nbsp;resolving?&nbsp;Does&nbsp;this&nbsp;really&nbsp;belong&nbsp;into&nbsp;the&nbsp;framework&nbsp;or&nbsp;is&nbsp;it&nbsp;something&nbsp;each&nbsp;runner&nbsp;need&nbsp;to&nbsp;implement&nbsp;on&nbsp;its&nbsp;own?&nbsp;<br>
&lt;/font&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;BTW&nbsp;-&nbsp;It&nbsp;seems&nbsp;like&nbsp;&amp;quot;Mono.Cecil.Pdb&amp;quot;&nbsp;and&nbsp;&amp;quot;Mono.Cecil.Mdb&amp;quot;&nbsp;aren't&nbsp;part&nbsp;of&nbsp;the&nbsp;&amp;quot;official&amp;quot;&nbsp;Mono.Cecil&nbsp;package&nbsp;-&amp;nbsp;at&nbsp;least&nbsp;they&nbsp;aren't&nbsp;download&nbsp;able&nbsp;from&nbsp;the&nbsp;cecil&nbsp;homepage.&nbsp;Are&nbsp;they&nbsp;intended&nbsp;to&nbsp;be&nbsp;used&nbsp;by&nbsp;other&nbsp;applications&nbsp;yet?&nbsp;<br>
&lt;/font&gt;&lt;/p&gt;<br>
&lt;p&gt;Christian&lt;/p&gt;&lt;/div&gt;<br>

</tt>
