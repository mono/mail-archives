Index: ConfigurationSettings.cs
===================================================================
RCS file: /cvs/public/mcs/class/System/System.Configuration/ConfigurationSettings.cs,v
retrieving revision 1.20
diff -u -r1.20 ConfigurationSettings.cs
--- ConfigurationSettings.cs	16 Jun 2003 22:25:36 -0000	1.20
+++ ConfigurationSettings.cs	8 Jul 2003 20:29:49 -0000
@@ -136,6 +136,8 @@
 		string fileName;
 		object removedMark = new object ();
 		object groupMark = new object ();
+		Hashtable handlerTable = new Hashtable();
+		DateTime lastWrite;
 
 		public ConfigurationData () : this (null)
 		{
@@ -157,6 +159,7 @@
 
 			try {
 				try {
+					lastWrite = File.GetLastWriteTime(fileName);
 					FileStream fs = new FileStream (fileName, FileMode.Open, FileAccess.Read);
 					reader = new XmlTextReader (fs);
 				} catch (Exception ex) {
@@ -244,26 +247,42 @@
 		
 		public object GetConfig (string sectionName)
 		{
-			object handler = GetHandler (sectionName);
-			if (handler == null)
-				return null;
-
-			if (!(handler is IConfigurationSectionHandler))
-				return handler;
+			try {
+				if(File.GetLastWriteTime(fileName) != lastWrite)
+					handlerTable.Clear();
+			}
+			catch {
+				handlerTable.Clear();
+			}
+			
+			if(handlerTable.Contains(sectionName)) {
+				return handlerTable[sectionName];
+			}
+			else {
 
-			object parentConfig = null;
-			if (parent != null)
-				parentConfig = parent.GetConfig (sectionName);
-
-			XmlDocument doc = GetDocumentForSection (sectionName);
-			if (doc == null || doc.DocumentElement == null) {
-				if (parentConfig == null)
+				object handler = GetHandler (sectionName);
+				if (handler == null)
 					return null;
 
-				return parentConfig;
-			}
+				if (!(handler is IConfigurationSectionHandler))
+					return handler;
+
+				object parentConfig = null;
+				if (parent != null)
+					parentConfig = parent.GetConfig (sectionName);
+
+				XmlDocument doc = GetDocumentForSection (sectionName);
+				if (doc == null || doc.DocumentElement == null) {
+					if (parentConfig == null)
+						return null;
+
+					return parentConfig;
+				}
 			
-			return ((IConfigurationSectionHandler) handler).Create (parentConfig, null, doc.DocumentElement);
+				object ret = ((IConfigurationSectionHandler) handler).Create (parentConfig, null, doc.DocumentElement);
+				handlerTable[sectionName] = ret;
+				return ret;
+			}
 		}
 
 		private object LookForFactory (string key)
