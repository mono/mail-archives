<tt>
Hi&nbsp;Andreas,&lt;br&gt;&lt;br&gt;Sorry&nbsp;for&nbsp;the&nbsp;very&nbsp;long&nbsp;wait,&nbsp;I&nbsp;could&nbsp;only&nbsp;review&nbsp;your&nbsp;patch&nbsp;this&nbsp;week.&nbsp;The&nbsp;Is*&nbsp;patch&nbsp;is&nbsp;correct&nbsp;and&nbsp;indeed&nbsp;increase&nbsp;performance,&nbsp;please&nbsp;commit&nbsp;it.&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;the&nbsp;contribution,&lt;br&gt;Rodrigo&lt;br&gt;&lt;br&gt;&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sun,&nbsp;Jun&nbsp;29,&nbsp;2008&nbsp;at&nbsp;7:37&nbsp;PM,&nbsp;Andreas&nbsp;Nahr&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ClassDevelopment@a-softtech.com&quot;&gt;ClassDevelopment@a-softtech.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;link=&quot;blue&quot;&nbsp;vlink=&quot;purple&quot;&nbsp;lang=&quot;DE&quot;&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&nbsp;lang=&quot;EN-US&quot;&gt;Hi&nbsp;Rodrigo,&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&nbsp;lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&nbsp;lang=&quot;EN-US&quot;&gt;very&nbsp;good&nbsp;suggestion&nbsp;;)&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&nbsp;lang=&quot;EN-US&quot;&gt;Attached&nbsp;is&nbsp;a&nbsp;patch&nbsp;that&nbsp;only&nbsp;contains&nbsp;the&nbsp;Is*&nbsp;changes.&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&nbsp;lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&nbsp;lang=&quot;EN-US&quot;&gt;Happy&nbsp;Hacking&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&nbsp;lang=&quot;EN-US&quot;&gt;Andreas&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&nbsp;lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;div&nbsp;style=&quot;border-style:&nbsp;none&nbsp;none&nbsp;none&nbsp;solid;&nbsp;border-color:&nbsp;-moz-use-text-color&nbsp;-moz-use-text-color&nbsp;-moz-use-text-color&nbsp;blue;&nbsp;border-width:&nbsp;medium&nbsp;medium&nbsp;medium&nbsp;1.5pt;&nbsp;padding:&nbsp;0cm&nbsp;0cm&nbsp;0cm&nbsp;4pt;&quot;&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;border-style:&nbsp;solid&nbsp;none&nbsp;none;&nbsp;border-color:&nbsp;rgb(181,&nbsp;196,&nbsp;223)&nbsp;-moz-use-text-color&nbsp;-moz-use-text-color;&nbsp;border-width:&nbsp;1pt&nbsp;medium&nbsp;medium;&nbsp;padding:&nbsp;3pt&nbsp;0cm&nbsp;0cm;&quot;&gt;<br>
<br>
&lt;p&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;Von:&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;<br>
&lt;a&nbsp;href=&quot;mailto:mono-devel-list-bounces@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mono-devel-list-bounces@lists.ximian.com&lt;/a&gt;<br>
[mailto:&lt;a&nbsp;href=&quot;mailto:mono-devel-list-bounces@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mono-devel-list-bounces@lists.ximian.com&lt;/a&gt;]&nbsp;&lt;b&gt;Im&nbsp;Auftrag&nbsp;von&nbsp;&lt;/b&gt;Rodrigo<br>
Kumpera&lt;br&gt;<br>
&lt;b&gt;Gesendet:&lt;/b&gt;&nbsp;Samstag,&nbsp;28.&nbsp;Juni&nbsp;2008&nbsp;00:37&lt;br&gt;<br>
&lt;b&gt;An:&lt;/b&gt;&nbsp;Andreas&nbsp;Nahr&lt;br&gt;<br>
&lt;b&gt;Cc:&lt;/b&gt;&nbsp;mono-devel&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;&lt;br&gt;<br>
&lt;b&gt;Betreff:&lt;/b&gt;&nbsp;Re:&nbsp;[Mono-dev]&nbsp;[Patch]&nbsp;to&nbsp;significantly&nbsp;shorten&nbsp;Char.cs&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;<br>
<br>
&lt;p&gt;&amp;nbsp;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;12pt;&quot;&gt;Andreas,&lt;br&gt;<br>
&lt;br&gt;<br>
How&nbsp;about&nbsp;splitting&nbsp;your&nbsp;patches&nbsp;in&nbsp;two?&nbsp;One&nbsp;with&nbsp;the&nbsp;lesser&nbsp;risky<br>
CheckParameter&nbsp;changes&nbsp;and&nbsp;other&nbsp;with&nbsp;the&nbsp;Is***&nbsp;changes.&lt;br&gt;<br>
The&nbsp;CheckParameter&nbsp;changes&nbsp;look&nbsp;lovely,&nbsp;go&nbsp;ahead&nbsp;commit&nbsp;then.&lt;br&gt;<br>
I&nbsp;would&nbsp;like&nbsp;to&nbsp;do&nbsp;some&nbsp;testing&nbsp;on&nbsp;other&nbsp;changes,&nbsp;that&nbsp;are&nbsp;more&nbsp;comple&nbsp;and<br>
unfortunately&nbsp;I&nbsp;won&amp;#39;t&nbsp;have&nbsp;time&nbsp;until&nbsp;late&nbsp;next&nbsp;week.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;know&nbsp;it&amp;#39;s&nbsp;more&nbsp;work&nbsp;on&nbsp;your&nbsp;side,&nbsp;but&nbsp;it&nbsp;makes&nbsp;the&nbsp;review&nbsp;process&nbsp;easier&nbsp;for<br>
both&nbsp;of&nbsp;us.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
Rodrigo&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/p&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&gt;On&nbsp;Thu,&nbsp;Jun&nbsp;26,&nbsp;2008&nbsp;at&nbsp;6:24&nbsp;PM,&nbsp;Andreas&nbsp;Nahr&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ClassDevelopment@a-softtech.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ClassDevelopment@a-softtech.com&lt;/a&gt;&amp;gt;<br>
wrote:&lt;/p&gt;<br>
<br>
&lt;p&gt;Well&nbsp;the&nbsp;main&nbsp;improvement&nbsp;is&nbsp;the&nbsp;shortening&nbsp;of&nbsp;the<br>
String-Parameter&nbsp;methods.&lt;br&gt;<br>
It&nbsp;does&nbsp;not&nbsp;affect&nbsp;performance&nbsp;negatively&nbsp;as&nbsp;far&nbsp;as&nbsp;I&nbsp;measured&nbsp;because&nbsp;the&lt;br&gt;<br>
methods&nbsp;now&nbsp;get&nbsp;inlined&nbsp;but&nbsp;were&nbsp;too&nbsp;large&nbsp;before.&lt;br&gt;<br>
I&nbsp;know&nbsp;that&nbsp;the&nbsp;code&nbsp;wasn&amp;#39;t&nbsp;duplicated&nbsp;for&nbsp;performance&nbsp;reasons&nbsp;before,&lt;br&gt;<br>
because&nbsp;I&nbsp;actually&nbsp;wrote&nbsp;that&nbsp;code.&nbsp;Well&nbsp;most&nbsp;of&nbsp;Char&nbsp;anyways...&nbsp;;)&lt;br&gt;<br>
&lt;br&gt;<br>
IsWhiteSpace&nbsp;is&nbsp;now&nbsp;somewhat&nbsp;faster.&nbsp;Similar&nbsp;Prog&nbsp;from&nbsp;below&nbsp;(do&nbsp;not&nbsp;have&lt;br&gt;<br>
the&nbsp;original&nbsp;anymore)&nbsp;went&nbsp;from&nbsp;21&nbsp;sec&nbsp;total&nbsp;to&nbsp;16,5&nbsp;sec&nbsp;(AMD&nbsp;3,2Ghz&nbsp;XP)&lt;br&gt;<br>
(testing&nbsp;one&nbsp;positive&nbsp;+&nbsp;one&nbsp;negative&nbsp;case).&nbsp;It&nbsp;simply&nbsp;saves&nbsp;some&nbsp;opcodes.&lt;br&gt;<br>
&lt;br&gt;<br>
public&nbsp;static&nbsp;void&nbsp;Main()&lt;br&gt;<br>
{&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;int&nbsp;tickCount&nbsp;=&nbsp;Environment.TickCount;&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;0x3b9aca00;&nbsp;i++)&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;{&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;char.IsWhiteSpace(&amp;#39;v&amp;#39;);&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;Console.WriteLine((int)&nbsp;(Environment.TickCount&nbsp;-&nbsp;tickCount));&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;tickCount&nbsp;=&nbsp;Environment.TickCount;&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;for&nbsp;(int&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&amp;lt;&nbsp;0x3b9aca00;&nbsp;j++)&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;{&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;char.IsWhiteSpace(&amp;#39;&nbsp;&amp;#39;);&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;Console.WriteLine((int)&nbsp;(Environment.TickCount&nbsp;-&nbsp;tickCount));&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
And&nbsp;no,&nbsp;IsWhiteSpace&nbsp;did&nbsp;not&nbsp;get&nbsp;optimized&nbsp;away&nbsp;;)&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;-----Ursprüngliche&nbsp;Nachricht-----&lt;br&gt;<br>
&amp;gt;&nbsp;Von:&nbsp;&lt;a&nbsp;href=&quot;mailto:mono-devel-list-bounces@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mono-devel-list-bounces@lists.ximian.com&lt;/a&gt;<br>
[mailto:&lt;a&nbsp;href=&quot;mailto:mono-devel-list-&quot;&nbsp;target=&quot;_blank&quot;&gt;mono-devel-list-&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:bounces@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;bounces@lists.ximian.com&lt;/a&gt;]&nbsp;Im<br>
Auftrag&nbsp;von&nbsp;Atsushi&nbsp;Eno&lt;br&gt;<br>
&amp;gt;&nbsp;Gesendet:&nbsp;Donnerstag,&nbsp;26.&nbsp;Juni&nbsp;2008&nbsp;23:25&lt;br&gt;<br>
&amp;gt;&nbsp;An:&nbsp;&amp;#39;mono-devel&amp;#39;&lt;br&gt;<br>
&amp;gt;&nbsp;Betreff:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;[Patch]&nbsp;to&nbsp;significantly&nbsp;shorten&nbsp;Char.cs&lt;/p&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;have&nbsp;some&nbsp;comments&nbsp;even&nbsp;without&nbsp;reading&nbsp;your&nbsp;application/octet-stream&lt;br&gt;<br>
&amp;gt;&nbsp;patch&nbsp;(I&nbsp;ususally&nbsp;don&amp;#39;t&nbsp;read&nbsp;them).&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;-&nbsp;Sometimes&nbsp;we&nbsp;have&nbsp;some&nbsp;code&nbsp;pieces&nbsp;that&nbsp;look&nbsp;like&nbsp;duplicates&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;exactly&nbsp;because&nbsp;of&nbsp;performance&nbsp;improvements.&lt;br&gt;<br>
&amp;gt;&nbsp;-&nbsp;For&nbsp;performance&nbsp;improvements&nbsp;there&nbsp;should&nbsp;be&nbsp;some&nbsp;benchmark&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;results&nbsp;with&nbsp;sources.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Atsushi&nbsp;Eno&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Andreas&nbsp;Nahr&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;The&nbsp;attached&nbsp;patch&nbsp;reduces&nbsp;code&nbsp;duplication&nbsp;in&nbsp;Char&nbsp;by&nbsp;more&nbsp;than&nbsp;130&lt;br&gt;<br>
&amp;gt;&nbsp;lines&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;and&nbsp;improves&nbsp;the&nbsp;performance&nbsp;of&nbsp;some&nbsp;methods&nbsp;a&nbsp;little&nbsp;bit.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Somebody&nbsp;please&nbsp;have&nbsp;a&nbsp;short&nbsp;look...&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Happy&nbsp;Hacking&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Andreas&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;---------------------------------------------------------------------&lt;br&gt;<br>
&amp;gt;&nbsp;---&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;p&gt;&amp;nbsp;&lt;/p&gt;<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
