<tt>
Hello&nbsp;Ernesto,&lt;br&gt;&lt;br&gt;I&nbsp;appreciate&nbsp;your&nbsp;work&nbsp;:)&nbsp;The&nbsp;value&nbsp;of&nbsp;_dataTableSchema&nbsp;is&nbsp;not&nbsp;being&nbsp;used&nbsp;anywhere,&nbsp;though&nbsp;its&nbsp;been&nbsp;filled&nbsp;each&nbsp;time.&nbsp;Good&nbsp;catch&nbsp;!&lt;br&gt;&lt;br&gt;Could&nbsp;you&nbsp;please&nbsp;try&nbsp;running&nbsp;the&nbsp;unit&nbsp;test&nbsp;too&nbsp;and&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&amp;#39;t&nbsp;break&nbsp;existing&nbsp;test&nbsp;cases.&lt;br&gt;<br>
&lt;br&gt;Thanks&lt;br&gt;Nagappan&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2008/7/8&nbsp;Ernesto&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:equistango@gmail.com&quot;&gt;equistango@gmail.com&lt;/a&gt;&amp;gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;br&gt;<br>
Hi,&nbsp;I&nbsp;was&nbsp;taking&nbsp;a&nbsp;look&nbsp;at&nbsp;OdbcDataReader.cs&nbsp;and&nbsp;found&nbsp;something&nbsp;that&nbsp;got&nbsp;my&nbsp;attention:&nbsp;a&nbsp;call&nbsp;to&nbsp;GetSchemaTable()&nbsp;in&nbsp;the&nbsp;class&amp;#39;&nbsp;constructor.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;DataReader&nbsp;is&nbsp;supposed&nbsp;to&nbsp;be&nbsp;a&nbsp;very&nbsp;fast&nbsp;reader&nbsp;for&nbsp;forward-only&nbsp;queries,&nbsp;and&nbsp;getting&nbsp;complete&nbsp;schema&nbsp;information&nbsp;on&nbsp;every&nbsp;DataReader&nbsp;is&nbsp;a&nbsp;very&nbsp;expensive&nbsp;(and&nbsp;unsolicited)&nbsp;operation.&nbsp;The&nbsp;call&nbsp;seems&nbsp;completely&nbsp;unnecesary&nbsp;to&nbsp;me.&nbsp;Only&nbsp;&amp;nbsp;column&nbsp;information&nbsp;is&nbsp;necessary.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
This&nbsp;patch&nbsp;replaces&nbsp;two&nbsp;calls&nbsp;to&nbsp;GetSchemaTable()&nbsp;for&nbsp;calls&nbsp;to&nbsp;a&nbsp;new&nbsp;function&nbsp;GetColumns().&lt;br&gt;<br>
It&nbsp;works&nbsp;perfectly&nbsp;in&nbsp;my&nbsp;tests&nbsp;and&nbsp;it&amp;#39;s&nbsp;way&nbsp;much&nbsp;faster.&nbsp;Can&nbsp;someone&nbsp;please&nbsp;review&nbsp;and&nbsp;comment?&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
Ernesto&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;br&gt;Index:&nbsp;OdbcDataReader.cs&lt;br&gt;<br>
===================================================================&lt;br&gt;<br>
---&nbsp;OdbcDataReader.cs&nbsp;&amp;nbsp;&nbsp;(revision&nbsp;107477)&lt;br&gt;<br>
+++&nbsp;OdbcDataReader.cs&nbsp;&amp;nbsp;&nbsp;(working&nbsp;copy)&lt;br&gt;<br>
@@&nbsp;-75,7&nbsp;+75,7&nbsp;@@&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;short&nbsp;colcount&nbsp;=&nbsp;0;&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;libodbc.SQLNumResultCols&nbsp;(hstmt,&nbsp;ref&nbsp;colcount);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;cols&nbsp;=&nbsp;new&nbsp;OdbcColumn&nbsp;[colcount];&lt;br&gt;<br>
-&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;GetSchemaTable&nbsp;();&lt;br&gt;<br>
+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;GetColumns&nbsp;();&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;internal&nbsp;OdbcDataReader&nbsp;(OdbcCommand&nbsp;command,&nbsp;CommandBehavior&nbsp;behavior,&lt;br&gt;<br>
@@&nbsp;-225,6&nbsp;+225,13&nbsp;@@&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;return&nbsp;cols&nbsp;[ordinal];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;//&nbsp;Load&nbsp;all&nbsp;column&nbsp;descriptions&lt;br&gt;<br>
+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;private&nbsp;void&nbsp;GetColumns&nbsp;()&lt;br&gt;<br>
+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{&lt;br&gt;<br>
+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;for(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;cols.Length;&nbsp;i++)&lt;br&gt;<br>
+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;GetColumn&nbsp;(i);&lt;br&gt;<br>
+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;public&lt;br&gt;<br>
&amp;nbsp;#if&nbsp;NET_2_0&lt;br&gt;<br>
@@&nbsp;-913,7&nbsp;+920,7&nbsp;@@&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;libodbc.SQLNumResultCols&nbsp;(hstmt,&nbsp;ref&nbsp;colcount);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;cols&nbsp;=&nbsp;new&nbsp;OdbcColumn&nbsp;[colcount];&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;_dataTableSchema&nbsp;=&nbsp;null;&nbsp;//&nbsp;force&nbsp;fresh&nbsp;creation&lt;br&gt;<br>
-&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;GetSchemaTable&nbsp;();&lt;br&gt;<br>
+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;GetColumns&nbsp;();&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;return&nbsp;(ret&nbsp;==&nbsp;OdbcReturn.Success);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Linux&nbsp;Desktop&nbsp;(GUI&nbsp;Application)&nbsp;Testing&nbsp;Project&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://ldtp.freedesktop.org&quot;&gt;http://ldtp.freedesktop.org&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://nagappanal.blogspot.com&quot;&gt;http://nagappanal.blogspot.com&lt;/a&gt;<br>

</tt>
