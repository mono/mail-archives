<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7654.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[Mono-dev]&nbsp;Unhandled&nbsp;Exception&nbsp;in&nbsp;Normalization.cs&nbsp;Combine()&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;TT&gt;&lt;FONT&nbsp;SIZE=2&gt;Atsushi,&lt;BR&gt;<br>
&lt;BR&gt;<br>
Thanks&nbsp;for&nbsp;the&nbsp;feedback.&nbsp;For&nbsp;some&nbsp;reason,&nbsp;the&nbsp;Mac&nbsp;when&nbsp;displaying&nbsp;unicode&nbsp;always&nbsp;composes&nbsp;strings&nbsp;before&nbsp;display.&nbsp;I'll&nbsp;look&nbsp;at&nbsp;the&nbsp;test&nbsp;case&nbsp;in&nbsp;corlib&nbsp;tomorrow&nbsp;when&nbsp;I&nbsp;get&nbsp;in&nbsp;to&nbsp;work.&nbsp;Would&nbsp;it&nbsp;be&nbsp;helpful&nbsp;for&nbsp;the&nbsp;test&nbsp;cases&nbsp;if&nbsp;I&nbsp;gave&nbsp;you&nbsp;both&nbsp;the&nbsp;formD&nbsp;bytes&nbsp;and&nbsp;the&nbsp;formC&nbsp;bytes&nbsp;that&nbsp;I&nbsp;think&nbsp;are&nbsp;correct&nbsp;for&nbsp;the&nbsp;test&nbsp;case&nbsp;I&nbsp;sent?&nbsp;Perhaps&nbsp;the&nbsp;encoding&nbsp;did&nbsp;not&nbsp;come&nbsp;across&nbsp;in&nbsp;the&nbsp;attachment.&lt;BR&gt;<br>
&lt;BR&gt;<br>
We&nbsp;have&nbsp;a&nbsp;workaround&nbsp;for&nbsp;the&nbsp;Mac&nbsp;port&nbsp;of&nbsp;our&nbsp;app&nbsp;which&nbsp;would&nbsp;require&nbsp;overriding&nbsp;string.Normalize&nbsp;to&nbsp;p/invoke&nbsp;to&nbsp;Mac&nbsp;OS&nbsp;X's&nbsp;NSString&nbsp;library&nbsp;to&nbsp;do&nbsp;normalization.&nbsp;It&nbsp;would&nbsp;work,&nbsp;but&nbsp;we&nbsp;would&nbsp;prefer&nbsp;not&nbsp;to&nbsp;have&nbsp;to&nbsp;ship&nbsp;a&nbsp;custom&nbsp;build&nbsp;of&nbsp;Mono.&nbsp;The&nbsp;normalization&nbsp;on&nbsp;.NET&nbsp;appears&nbsp;to&nbsp;be&nbsp;&amp;quot;good&nbsp;enough&amp;quot;&nbsp;for&nbsp;our&nbsp;purposes&nbsp;and&nbsp;we'd&nbsp;just&nbsp;like&nbsp;our&nbsp;Mac&nbsp;version&nbsp;to&nbsp;be&nbsp;consistent.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Tom&lt;BR&gt;<br>
&lt;BR&gt;<br>
-----Original&nbsp;Message-----&lt;BR&gt;<br>
From:&nbsp;Atsushi&nbsp;Eno&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:atsushieno@veritas-vos-liberabit.com&quot;&gt;mailto:atsushieno@veritas-vos-liberabit.com&lt;/A&gt;]&lt;BR&gt;<br>
Sent:&nbsp;Wed&nbsp;6/17/2009&nbsp;7:51&nbsp;PM&lt;BR&gt;<br>
To:&nbsp;Tom&nbsp;Philpot&lt;BR&gt;<br>
Cc:&nbsp;mono-devel-list@ximian.com&lt;BR&gt;<br>
Subject:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;Unhandled&nbsp;Exception&nbsp;in&nbsp;Normalization.cs&nbsp;Combine()&lt;BR&gt;<br>
&lt;BR&gt;<br>
You&nbsp;seem&nbsp;to&nbsp;have&nbsp;embedded&nbsp;raw&nbsp;native&nbsp;encoding&nbsp;in&nbsp;your&nbsp;land&nbsp;that&lt;BR&gt;<br>
is&nbsp;*not*&nbsp;understandable&nbsp;in&nbsp;Japan.&nbsp;Anyways&nbsp;the&nbsp;input&nbsp;string&nbsp;you&lt;BR&gt;<br>
posted&nbsp;in&nbsp;the&nbsp;previous&nbsp;sample&nbsp;was&nbsp;already&nbsp;in&nbsp;FormC&nbsp;which&nbsp;will&lt;BR&gt;<br>
look&nbsp;like&nbsp;&amp;quot;doing&nbsp;nothing&amp;quot;&nbsp;as&nbsp;the&nbsp;conversion&nbsp;results.&lt;BR&gt;<br>
&lt;BR&gt;<br>
There&nbsp;is&nbsp;a&nbsp;standalone&nbsp;normalization&nbsp;test&nbsp;generated&nbsp;from&nbsp;normalization&lt;BR&gt;<br>
conformance&nbsp;test&nbsp;in&nbsp;corlib/Mono.Globalization.Unicode.&nbsp;We&nbsp;fail&lt;BR&gt;<br>
about&nbsp;26000.&nbsp;Far&nbsp;from&nbsp;good,&nbsp;but&nbsp;still&nbsp;better&nbsp;than&nbsp;35000&nbsp;on&nbsp;.NET.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Atsushi&nbsp;Eno&lt;BR&gt;<br>
&lt;BR&gt;<br>
Tom&nbsp;Philpot&nbsp;wrote:&lt;BR&gt;<br>
&amp;gt;&nbsp;Now,&nbsp;string.Normalize(NormalizationForm.FormC)&nbsp;doesn't&nbsp;do&nbsp;anything&nbsp;using&lt;BR&gt;<br>
&amp;gt;&nbsp;mono&nbsp;(r136228).&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;I've&nbsp;attached&nbsp;some&nbsp;test&nbsp;cases&nbsp;which&nbsp;will&nbsp;hopefully&nbsp;help&nbsp;in&nbsp;tracking&nbsp;down&lt;BR&gt;<br>
&amp;gt;&nbsp;what&nbsp;doesn't&nbsp;work.&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;On&nbsp;6/15/09&nbsp;1:58&nbsp;AM,&nbsp;&amp;quot;Atsushi&nbsp;Eno&amp;quot;&nbsp;&amp;lt;atsushieno@veritas-vos-liberabit.com&amp;gt;&lt;BR&gt;<br>
&amp;gt;&nbsp;wrote:&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;Hi&nbsp;again,&lt;BR&gt;<br>
&amp;gt;&amp;gt;&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;It&nbsp;should&nbsp;be&nbsp;now&nbsp;fixed&nbsp;in&nbsp;trunk.&lt;BR&gt;<br>
&amp;gt;&amp;gt;&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;Atsushi&nbsp;Eno&lt;BR&gt;<br>
&amp;gt;&amp;gt;&lt;BR&gt;<br>
&amp;gt;&amp;gt;&nbsp;Atsushi&nbsp;Eno&nbsp;wrote:&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;I'll&nbsp;have&nbsp;a&nbsp;look.&nbsp;However&nbsp;since&nbsp;4&nbsp;years&nbsp;have&nbsp;passed&nbsp;since&nbsp;I&nbsp;wrote&nbsp;it,&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;I'll&nbsp;have&nbsp;to&nbsp;revisit&nbsp;the&nbsp;spec&nbsp;and&nbsp;will&nbsp;take&nbsp;not&nbsp;a&nbsp;little&nbsp;time.&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;Atsushi&nbsp;Eno&lt;BR&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&lt;BR&gt;<br>
&amp;gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;/TT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
