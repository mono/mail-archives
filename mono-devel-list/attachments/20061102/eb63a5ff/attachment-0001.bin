Index: System.Net/ChangeLog
===================================================================
--- System.Net/ChangeLog	(revision 67261)
+++ System.Net/ChangeLog	(working copy)
@@ -1,3 +1,8 @@
+2006-11-02  Michael Hutchinson  <m.j.hutchinson@gmail.com>
+
+	* WebRequest.cs: more closely follow MS behaviour: use system settings 
+	  unless told otherwise, and respect app.config.
+
 2006-11-01  Michael Hutchinson  <m.j.hutchinson@gmail.com>
 
 	* GlobalProxySelection.cs: Obsolete GlobalProxySelection under 2.0 
Index: System.Net/WebRequest.cs
===================================================================
--- System.Net/WebRequest.cs	(revision 67261)
+++ System.Net/WebRequest.cs	(working copy)
@@ -145,14 +145,13 @@
 			WebProxy p = null;
 			
 #if CONFIGURATION_DEP
-			System.Configuration.Configuration config = ConfigurationManager.OpenMachineConfiguration ();
-			DefaultProxySection sec = config.GetSection ("system.net/defaultProxy") as DefaultProxySection;
+			DefaultProxySection sec = ConfigurationManager.GetSection ("system.net/defaultProxy") as DefaultProxySection;
 			if (sec == null)
-				return GlobalProxySelection.GetEmptyWebProxy ();
+				return GetSystemWebProxy ();
 			
 			ProxyElement pe = sec.Proxy;
 			
-			if ((pe.UseSystemDefault == ProxyElement.UseSystemDefaultValues.True) && (pe.ProxyAddress == null))
+			if ((pe.UseSystemDefault != ProxyElement.UseSystemDefaultValues.False) && (pe.ProxyAddress == null))
 				p = (WebProxy) GetSystemWebProxy ();
 			else
 				p = new WebProxy ();