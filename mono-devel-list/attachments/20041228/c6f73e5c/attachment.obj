Index: graphics.c
===================================================================
--- graphics.c	(revision 38141)
+++ graphics.c	(working copy)
@@ -1650,7 +1650,7 @@
 {
 	FT_Face			face;
 	size_t			i;
-	FT_ULong		*ucs4 = NULL;
+	gunichar		*ucs4 = NULL;
 	cairo_font_t		*Font;
 	GpStringDetailStruct	*CurrentDetail;
 	glong			NumOfGlyphs;
@@ -1666,7 +1666,7 @@
 	cairo_font_current_transform(Font, &matrix);
 	cairo_matrix_scale(&matrix, gdiFont->sizeInPixels, gdiFont->sizeInPixels);
 
-	ucs4 = (FT_ULong *)g_utf8_to_ucs4 (utf8, (glong)-1, NULL, (glong *)&NumOfGlyphs, NULL);
+	ucs4 = g_utf8_to_ucs4 (utf8, (glong)-1, NULL, &NumOfGlyphs, NULL);
 
 	if ((NumOfGlyphs == 0) || (ucs4 == NULL)) {
 		return 0;
Index: ChangeLog
===================================================================
--- ChangeLog	(revision 38141)
+++ ChangeLog	(working copy)
@@ -1,5 +1,12 @@
+2004-12-28  Zoltan Varga  <vargaz@freemail.hu>
+
+	* graphics.c (CalculateStringWidths): Fix 64 bit issues.
+
 2004-12-27  Zoltan Varga  <vargaz@freemail.hu>
 
+	* gdip.h: Make the members of various structures the same size as 
+	their managed counterparts on 64 bit platforms.
+
 	* gdip_win32.h: Do not define __stdcall under amd64.
 
 2004-12-16  Peter Bartok  <pbartok@novell.com>