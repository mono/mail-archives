<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;title&gt;&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000099&quot;&gt;<br>
Thank&nbsp;you&nbsp;for&nbsp;your&nbsp;useful&nbsp;email!&nbsp;I&nbsp;will&nbsp;stick&nbsp;in&nbsp;the&nbsp;C++/CLI&nbsp;code&nbsp;and<br>
not&nbsp;use&nbsp;managed&nbsp;extensions&nbsp;for&nbsp;consistency&nbsp;and&nbsp;convenience.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;Hello&nbsp;world&nbsp;program,&nbsp;as&nbsp;specified&nbsp;in&nbsp;the&nbsp;current&nbsp;C++/CLI&nbsp;draft<br>
(version&nbsp;1.5):&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
int&nbsp;main()&lt;br&gt;<br>
{&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;System::Console::WriteLine(&quot;Hello&nbsp;World&quot;);&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
C:\c&amp;gt;cl&nbsp;/clr:safe&nbsp;temp.cpp&lt;br&gt;<br>
Microsoft&nbsp;(R)&nbsp;C/C++&nbsp;Optimizing&nbsp;Compiler&nbsp;Version&nbsp;14.00.40607.16&lt;br&gt;<br>
for&nbsp;Microsoft&nbsp;(R)&nbsp;.NET&nbsp;Framework&nbsp;version&nbsp;2.00.40607.16&lt;br&gt;<br>
Copyright&nbsp;(C)&nbsp;Microsoft&nbsp;Corporation.&amp;nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.&lt;br&gt;<br>
&lt;br&gt;<br>
temp.cpp&lt;br&gt;<br>
Microsoft&nbsp;(R)&nbsp;Incremental&nbsp;Linker&nbsp;Version&nbsp;8.00.40607.16&lt;br&gt;<br>
Copyright&nbsp;(C)&nbsp;Microsoft&nbsp;Corporation.&amp;nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.&lt;br&gt;<br>
&lt;br&gt;<br>
/out:temp.exe&lt;br&gt;<br>
temp.obj&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
==&amp;gt;&nbsp;The&nbsp;/clr:safe&nbsp;only&nbsp;produces&nbsp;an&nbsp;executable&nbsp;that&nbsp;passes&nbsp;peverify:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
C:\c&amp;gt;peverify&nbsp;temp.exe&nbsp;/verbose&lt;br&gt;<br>
&lt;br&gt;<br>
Microsoft&nbsp;(R)&nbsp;.NET&nbsp;Framework&nbsp;PE&nbsp;Verifier.&amp;nbsp;&nbsp;Version&amp;nbsp;&nbsp;2.0.40607.16&lt;br&gt;<br>
Copyright&nbsp;(C)&nbsp;Microsoft&nbsp;Corporation.&nbsp;All&nbsp;rights&nbsp;reserved.&lt;br&gt;<br>
&lt;br&gt;<br>
All&nbsp;Classes&nbsp;and&nbsp;Methods&nbsp;in&nbsp;temp.exe&nbsp;Verified.&lt;br&gt;<br>
&lt;br&gt;<br>
C:\c&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
[...]&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
root@chrome&nbsp;cdrom]#&nbsp;mono&nbsp;temp.exe&lt;br&gt;<br>
&lt;br&gt;<br>
**&nbsp;(temp.exe:1416):&nbsp;WARNING&nbsp;**:&nbsp;Could&nbsp;not&nbsp;find&nbsp;assembly<br>
Microsoft.VisualC,&nbsp;references&nbsp;from&nbsp;/mnt/cdrom/temp.exe<br>
(assemblyref_index=1)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Major/Minor:&nbsp;8,0&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Build:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;1200,0&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Token:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;b03f5f7f11d50a3a&lt;br&gt;<br>
&lt;br&gt;<br>
cannot&nbsp;open&nbsp;assembly&nbsp;temp.exe&lt;br&gt;<br>
[root@chrome&nbsp;cdrom]#&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Any&nbsp;ideas?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Best&nbsp;regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Ioannis&nbsp;Vranos&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Jonathan&nbsp;Pryor&nbsp;wrote:<br>
&lt;blockquote&nbsp;cite=&quot;mid1092063441.31809.8.camel@melchior&quot;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;On&nbsp;Sat,&nbsp;2004-08-07&nbsp;at&nbsp;20:37,&nbsp;Ioannis&nbsp;Vranos&nbsp;wrote:<br>
&amp;lt;snip/&amp;gt;<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;I&nbsp;created&nbsp;a&nbsp;simple&nbsp;CLI&nbsp;hello&nbsp;world&nbsp;&nbsp;program&nbsp;with&nbsp;current&nbsp;C++&nbsp;&quot;Managed<br>
Extensions&quot;&nbsp;in&nbsp;VS&nbsp;2003&nbsp;and&nbsp;these&nbsp;are&nbsp;the&nbsp;contents&nbsp;of&nbsp;&nbsp;the&nbsp;main&nbsp;.cpp<br>
file:<br>
<br>
#include&nbsp;&quot;stdafx.h&quot;<br>
<br>
#using&nbsp;&amp;lt;mscorlib.dll&amp;gt;<br>
<br>
using&nbsp;namespace&nbsp;System;<br>
<br>
int&nbsp;_tmain()<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;Console::WriteLine(S&quot;Hello&nbsp;World&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br>
}<br>
<br>
<br>
Well&nbsp;when&nbsp;I&nbsp;run&nbsp;the&nbsp;executable&nbsp;in&nbsp;GNU/Linux&nbsp;using&nbsp;mono&nbsp;Manage.exe&nbsp;I<br>
get&nbsp;the&nbsp;error:<br>
<br>
<br>
**&nbsp;ERROR&nbsp;**:&nbsp;file&nbsp;marshal.c:&nbsp;line&nbsp;3096<br>
(mono_marshal_get_native_wrapper):&nbsp;assertion&nbsp;failed:<br>
(method-&amp;gt;signature-&amp;gt;pinvoke)<br>
aborting...<br>
Aborted<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
As&nbsp;others&nbsp;have&nbsp;already&nbsp;mentioned,&nbsp;the&nbsp;program&nbsp;generated&nbsp;by&nbsp;CL.EXE<br>
contains&nbsp;native&nbsp;code&nbsp;by&nbsp;default,&nbsp;which&nbsp;Mono&nbsp;can't&nbsp;handle.&nbsp;&nbsp;It's&nbsp;also&nbsp;not<br>
portable,&nbsp;either&nbsp;--&nbsp;if&nbsp;you&nbsp;wanted&nbsp;to&nbsp;run&nbsp;your&nbsp;program&nbsp;on&nbsp;a&nbsp;Mac,<br>
WINE-integration&nbsp;wouldn't&nbsp;help&nbsp;you&nbsp;(you'd&nbsp;need&nbsp;Mono&nbsp;to&nbsp;integrate&nbsp;with&nbsp;a<br>
x86&nbsp;emulator,&nbsp;which&nbsp;is&nbsp;even&nbsp;less&nbsp;likely&nbsp;to&nbsp;happen...).<br>
<br>
What&nbsp;hasn't&nbsp;been&nbsp;mentioned&nbsp;is&nbsp;that:&nbsp;(1)&nbsp;this&nbsp;is&nbsp;a&nbsp;FAQ,&nbsp;and&nbsp;(2)&nbsp;the&nbsp;FAQ<br>
contains&nbsp;more&nbsp;information&nbsp;than&nbsp;has&nbsp;been&nbsp;posted&nbsp;so&nbsp;far.<br>
<br>
See:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://www.mono-project.com/about/technical.html#q63&quot;&gt;http://www.mono-project.com/about/technical.html#q63&lt;/a&gt;<br>
<br>
In&nbsp;particular:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;need&nbsp;a&nbsp;fully-managed&nbsp;assembly&nbsp;to&nbsp;run&nbsp;under&nbsp;Mono,&nbsp;and&nbsp;getting<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Visual&nbsp;C++&nbsp;.NET&nbsp;compiler&nbsp;to&nbsp;generate&nbsp;such&nbsp;an&nbsp;executable&nbsp;can<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;difficult.&nbsp;You&nbsp;need&nbsp;to&nbsp;use&nbsp;only&nbsp;the&nbsp;.NET-framework<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assemblies,&nbsp;not&nbsp;the&nbsp;C&nbsp;libraries&nbsp;(you&nbsp;can't&nbsp;use&nbsp;printf(3)&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;example.),&nbsp;and&nbsp;you&nbsp;need&nbsp;to&nbsp;use&nbsp;the&nbsp;linker&nbsp;options&nbsp;/nodefaultlib<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/entry:main&nbsp;mscoree.lib&nbsp;in&nbsp;addition&nbsp;to&nbsp;the&nbsp;/clr&nbsp;compiler&nbsp;flag.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;can&nbsp;still&nbsp;use&nbsp;certain&nbsp;compiler&nbsp;intrinsic&nbsp;functions&nbsp;(such&nbsp;as<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memcpy(3))&nbsp;and&nbsp;the&nbsp;STL.&nbsp;You&nbsp;should&nbsp;also&nbsp;see&nbsp;&quot;Converting&nbsp;Managed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extensions&nbsp;for&nbsp;C++&nbsp;Projects&nbsp;from&nbsp;Mixed&nbsp;Mode&nbsp;to&nbsp;Pure&nbsp;Intermediate<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Language&quot;&nbsp;[1]&nbsp;at&nbsp;MSDN.&nbsp;Finally,&nbsp;you&nbsp;can&nbsp;use&nbsp;PEVERIFY.EXE&nbsp;from<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;.NET&nbsp;SDK&nbsp;to&nbsp;determine&nbsp;if&nbsp;the&nbsp;assembly&nbsp;is&nbsp;fully&nbsp;managed.<br>
<br>
[1]&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmex/html/vcgrfconvertingmanagedextensionsforcprojectsfrommixed-modetopureil.asp&quot;&gt;http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmex/html/vcgrfconvertingmanagedextensionsforcprojectsfrommixed-modetopureil.asp&lt;/a&gt;<br>
<br>
(Beware&nbsp;line&nbsp;wrapping&nbsp;in&nbsp;the&nbsp;above&nbsp;URL.)<br>
<br>
As&nbsp;has&nbsp;also&nbsp;been&nbsp;mentioned,&nbsp;using&nbsp;the&nbsp;Visual&nbsp;Studio&nbsp;2005&nbsp;Beta&nbsp;C++/CLI<br>
compiler&nbsp;should&nbsp;also&nbsp;work,&nbsp;but&nbsp;you&nbsp;need&nbsp;to&nbsp;make&nbsp;sure&nbsp;you're&nbsp;generating<br>
pure&nbsp;IL.&nbsp;&nbsp;I&nbsp;believe&nbsp;the&nbsp;/clr:pure&nbsp;or&nbsp;/clr:safe&nbsp;CL.EXE&nbsp;flags&nbsp;can&nbsp;be&nbsp;used<br>
to&nbsp;do&nbsp;this.<br>
<br>
See&nbsp;also:<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://msdn.microsoft.com/msdnmag/issues/04/05/VisualC2005/default.aspx&quot;&gt;http://msdn.microsoft.com/msdnmag/issues/04/05/VisualC2005/default.aspx&lt;/a&gt;<br>
<br>
&nbsp;-&nbsp;Jon<br>
<br>
<br>
_______________________________________________<br>
Mono-devel-list&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;<br>
<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>
<br>

</tt>
