<tt>
&lt;HTML&nbsp;dir=ltr&gt;&lt;HEAD&gt;&lt;TITLE&gt;Re:&nbsp;[Mono-dev]&nbsp;Patch&nbsp;for&nbsp;System.IO.Ports.SerialPort&nbsp;ReadLinefunction&lt;/TITLE&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=unicode&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.6000.16546&quot;&nbsp;name=GENERATOR&gt;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&nbsp;id=idOWAReplyText35028&nbsp;dir=ltr&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#000000&nbsp;size=2&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;Hello&nbsp;Miguel,&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;?xml:namespace&nbsp;prefix&nbsp;=&nbsp;o&nbsp;ns&nbsp;=&nbsp;&quot;urn:schemas-microsoft-com:office:office&quot;&nbsp;/&gt;&lt;o:p&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;&amp;nbsp;&lt;/FONT&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;Yes&nbsp;using&nbsp;the&nbsp;ReadTo&nbsp;function&nbsp;does&nbsp;make&nbsp;the&nbsp;most&nbsp;sense&nbsp;as&nbsp;it&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;of&nbsp;the&nbsp;operation.&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;o:p&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;&amp;nbsp;&lt;/FONT&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;FONT&nbsp;size=3&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;I&nbsp;had&nbsp;a&nbsp;look&nbsp;at&nbsp;the&nbsp;ReadTo&nbsp;function&nbsp;and&nbsp;I&nbsp;think&nbsp;it&nbsp;is&nbsp;broken.&lt;SPAN&nbsp;style=&quot;mso-spacerun:&nbsp;yes&quot;&gt;&amp;nbsp;&nbsp;&lt;/SPAN&gt;It&nbsp;assumes&nbsp;that&nbsp;it&nbsp;is&nbsp;in&nbsp;the&nbsp;initial&nbsp;state&nbsp;(IE&nbsp;current&nbsp;is&nbsp;0)&nbsp;when&nbsp;it&nbsp;encounters&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;string&nbsp;it&nbsp;is&nbsp;reading&nbsp;to.&lt;SPAN&nbsp;style=&quot;mso-spacerun:&nbsp;yes&quot;&gt;&amp;nbsp;&nbsp;&lt;/SPAN&gt;So&nbsp;if&nbsp;we&nbsp;are&nbsp;reading&nbsp;to&nbsp;&amp;#8220;ababZ&amp;#8221;&nbsp;and&nbsp;the&nbsp;input&nbsp;is&nbsp;&amp;#8220;abababZfoo&amp;#8221;&nbsp;it&nbsp;will&nbsp;read&nbsp;past&nbsp;the&nbsp;&amp;#8220;ababZ&amp;#8221;.&lt;SPAN&nbsp;style=&quot;mso-spacerun:&nbsp;yes&quot;&gt;&amp;nbsp;&nbsp;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;o:p&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;&amp;nbsp;&lt;/FONT&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;It&nbsp;was&nbsp;because&nbsp;of&nbsp;this&nbsp;that&nbsp;I&nbsp;put&nbsp;the&nbsp;&amp;#8216;state-driven&amp;#8217;&nbsp;approach&nbsp;into&nbsp;the&nbsp;too&nbsp;hard&nbsp;/&nbsp;too&nbsp;complex&nbsp;basket&nbsp;when&nbsp;I&nbsp;wrote&nbsp;my&nbsp;initial&nbsp;function.&lt;SPAN&nbsp;style=&quot;mso-spacerun:&nbsp;yes&quot;&gt;&amp;nbsp;&nbsp;&lt;/SPAN&gt;But&nbsp;thinking&nbsp;about&nbsp;it&nbsp;further&nbsp;the&nbsp;ReadTo&nbsp;function&nbsp;could&nbsp;be&nbsp;extended&nbsp;to&nbsp;keep&nbsp;multiple&nbsp;states&nbsp;(ie&nbsp;a&nbsp;list&nbsp;of&nbsp;&amp;#8216;current&amp;#8217;&nbsp;offsets).&lt;SPAN&nbsp;style=&quot;mso-spacerun:&nbsp;yes&quot;&gt;&amp;nbsp;&nbsp;&lt;/SPAN&gt;One&nbsp;for&nbsp;each&nbsp;time&nbsp;a&nbsp;potential&nbsp;beginning&nbsp;of&nbsp;the&nbsp;string&nbsp;we&nbsp;are&nbsp;looking&nbsp;for&nbsp;is&nbsp;encountered.&lt;SPAN&nbsp;style=&quot;mso-spacerun:&nbsp;yes&quot;&gt;&amp;nbsp;&amp;nbsp;I&nbsp;have&amp;nbsp;attached&nbsp;a&nbsp;file&nbsp;with&nbsp;such&nbsp;an&nbsp;extended&nbsp;ReadTo&nbsp;function.&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;&lt;SPAN&nbsp;style=&quot;mso-spacerun:&nbsp;yes&quot;&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;&lt;SPAN&nbsp;style=&quot;mso-spacerun:&nbsp;yes&quot;&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;o:p&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;&amp;nbsp;Let&nbsp;me&nbsp;know&nbsp;your&nbsp;thought.&lt;/FONT&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;o:p&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;&lt;/FONT&gt;&lt;/o:p&gt;&amp;nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;o:p&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;Regards&lt;/FONT&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;o:p&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;Michael&lt;/FONT&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;o:p&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;&amp;nbsp;&lt;/FONT&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&nbsp;style=&quot;MARGIN:&nbsp;0cm&nbsp;0cm&nbsp;0pt&quot;&gt;&lt;o:p&gt;&lt;FONT&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=3&gt;&amp;nbsp;&lt;/FONT&gt;&lt;/o:p&gt;&lt;/P&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;&lt;BR&gt;<br>
&lt;HR&nbsp;tabIndex=-1&gt;<br>
&lt;FONT&nbsp;face=Tahoma&nbsp;size=2&gt;&lt;B&gt;From:&lt;/B&gt;&nbsp;Miguel&nbsp;de&nbsp;Icaza&nbsp;[mailto:miguel@novell.com]&lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt;&nbsp;Tue&nbsp;06.11.2007&nbsp;02:06&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt;&nbsp;Michael&nbsp;Mattess&lt;BR&gt;&lt;B&gt;Cc:&lt;/B&gt;&nbsp;mono-devel-list@lists.ximian.com&lt;BR&gt;&lt;B&gt;Subject:&lt;/B&gt;&nbsp;Re:&nbsp;[Mono-dev]&nbsp;Patch&nbsp;for&nbsp;System.IO.Ports.SerialPort&nbsp;ReadLinefunction&lt;BR&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;size=2&gt;Hello,&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;My&nbsp;ReadLine&nbsp;routine&nbsp;is&nbsp;broken,&nbsp;it&nbsp;did&nbsp;not&nbsp;append&nbsp;data&nbsp;that&nbsp;was&nbsp;only&lt;BR&gt;partially&nbsp;part&nbsp;of&nbsp;the&nbsp;ReadLine.&amp;nbsp;&amp;nbsp;&nbsp;While&nbsp;I&nbsp;was&nbsp;fixing&nbsp;it,&nbsp;I&nbsp;noticed&nbsp;that&lt;BR&gt;we&nbsp;already&nbsp;have&nbsp;a&nbsp;routine&nbsp;that&nbsp;did&nbsp;this&nbsp;correctly&nbsp;(ReadTo).&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;So&nbsp;am&nbsp;going&nbsp;to&nbsp;just&nbsp;change&nbsp;the&nbsp;code&nbsp;to&nbsp;be:&lt;BR&gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;ReadTo&nbsp;(new_line).&lt;BR&gt;&lt;BR&gt;Miguel.&lt;BR&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;
</tt>
