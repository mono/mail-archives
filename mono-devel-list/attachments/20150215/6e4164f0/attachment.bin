using System;
using System.IO;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Net;

namespace ServerTest
{
    [ServiceContract]
    public class WebService
    {
        public WebService()
        {
        }

        [OperationContract, WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, UriTemplate = "/get")]    
        public Stream GetFile(){
            Stream f = File.OpenRead("test.dat");
            return f;
        }

    }

    class MainClass
    {
        public static void Main(string[] args)
        {
            ServiceHost Host= new WebServiceHost(typeof(WebService),new Uri("http://localhost:3000/"));
            WebHttpBinding wb = new WebHttpBinding();
            Host.AddServiceEndpoint(typeof(WebService), wb, "");
            Host.Open();
            Console.ReadLine();
            Host.Close();
        }
    }
}
