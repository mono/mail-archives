<tt>
Well,&nbsp;after&nbsp;12&nbsp;hours&nbsp;at&nbsp;a&nbsp;consistent&nbsp;25kB/sec,&nbsp;you&amp;#39;d&nbsp;expect&nbsp;to&nbsp;have&nbsp;over&nbsp;1&nbsp;gig&nbsp;of&nbsp;memory&nbsp;allocated.&nbsp;As&nbsp;you&nbsp;don&amp;#39;t,&nbsp;i&nbsp;think&nbsp;what&nbsp;you&amp;#39;re&nbsp;seeing&nbsp;is&nbsp;just&nbsp;&amp;#39;normal&nbsp;usage&amp;#39;&nbsp;for&nbsp;the&nbsp;non-compacting&nbsp;GC&nbsp;that&nbsp;mono&nbsp;uses.&nbsp;I&nbsp;have&nbsp;a&nbsp;similar&nbsp;app&nbsp;which&nbsp;uses&nbsp;sockets&nbsp;extensively&nbsp;(50-150&nbsp;simultaneous&nbsp;connections)&amp;nbsp;&nbsp;and&nbsp;i&nbsp;can&nbsp;assure&nbsp;you&nbsp;that&nbsp;memory&nbsp;usage&nbsp;doesn&amp;#39;t&nbsp;get&nbsp;unbearably&nbsp;large.&nbsp;It&amp;#39;d&nbsp;be&nbsp;interesting&nbsp;to&nbsp;see&nbsp;the&nbsp;logs&nbsp;but&nbsp;i&nbsp;don&amp;#39;t&nbsp;think&nbsp;there&amp;#39;s&nbsp;much&nbsp;to&nbsp;be&nbsp;worried&nbsp;about.<br>
&lt;br&gt;&lt;br&gt;Alan.&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;7/18/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;David&nbsp;Wolinsky&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:davidiw@ufl.edu&quot;&gt;davidiw@ufl.edu&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Initially&nbsp;45&nbsp;MB,&nbsp;12&nbsp;hours&nbsp;later&nbsp;147&nbsp;MB&lt;br&gt;&lt;br&gt;Another&nbsp;developer&nbsp;has&nbsp;the&nbsp;heap-shot&nbsp;logs,&nbsp;I&amp;#39;ll&nbsp;post&nbsp;those&nbsp;as&nbsp;soon&nbsp;as&lt;br&gt;possible.&lt;br&gt;&lt;br&gt;David&lt;br&gt;&lt;br&gt;Alan&nbsp;McGovern&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;Could&nbsp;you&nbsp;post&nbsp;up&nbsp;the&nbsp;detailed&nbsp;stats&nbsp;from&nbsp;heapshot?&nbsp;After&nbsp;the&nbsp;12&nbsp;hour<br>
&lt;br&gt;&amp;gt;&nbsp;run,&nbsp;how&nbsp;much&nbsp;memory&nbsp;are&nbsp;you&nbsp;using?&nbsp;Are&nbsp;we&nbsp;talking&nbsp;in&nbsp;the&nbsp;gigabyte&lt;br&gt;&amp;gt;&nbsp;range,&nbsp;or&nbsp;megabyte&nbsp;range?&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Alan.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;On&nbsp;7/18/07,&nbsp;*David&nbsp;Wolinsky*&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:davidiw@ufl.edu&quot;&gt;davidiw@ufl.edu<br>
&lt;/a&gt;&lt;br&gt;&amp;gt;&nbsp;&amp;lt;mailto:&lt;a&nbsp;href=&quot;mailto:davidiw@ufl.edu&quot;&gt;davidiw@ufl.edu&lt;/a&gt;&amp;gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;My&nbsp;lab&nbsp;works&nbsp;on&nbsp;a&nbsp;peer-to-peer&nbsp;network&nbsp;overlay&nbsp;and&nbsp;we&amp;#39;ve&nbsp;noticed&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;recently&nbsp;significant&nbsp;memory&nbsp;issues.&amp;nbsp;&amp;nbsp;Some&nbsp;background...<br>
&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;This&nbsp;application&nbsp;is&nbsp;constantly&nbsp;creating&nbsp;new&nbsp;objects&nbsp;and&nbsp;shortly&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;thereafter&nbsp;deleting&nbsp;(removing&nbsp;reference&nbsp;to)&nbsp;them&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Using&nbsp;a&nbsp;sample&nbsp;run&nbsp;with&nbsp;150&nbsp;threads&nbsp;running...&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Mono&nbsp;on&nbsp;Linux&nbsp;has&nbsp;a&nbsp;growth&nbsp;rate&nbsp;of&nbsp;~25&nbsp;KB&nbsp;per&nbsp;second&nbsp;with&nbsp;a&nbsp;base<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;of&nbsp;50MB&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;(y&nbsp;=&nbsp;25K&nbsp;*x&nbsp;+&nbsp;50M)&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;.NET&nbsp;on&nbsp;Windows&nbsp;stabilizes&nbsp;at&nbsp;35&nbsp;MB&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;We&nbsp;ran&nbsp;heap-shot&nbsp;with&nbsp;Linux&nbsp;and&nbsp;found&nbsp;that&nbsp;in&nbsp;a&nbsp;12&nbsp;hour&nbsp;period&nbsp;it&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reported&nbsp;this...&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;start:<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;objects:&nbsp;58,823&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;heap&nbsp;memory:&nbsp;6,838,426&nbsp;bytes&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;end:&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;objects:&nbsp;59,925&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;heap&nbsp;memory:&nbsp;6,862,336&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;We&nbsp;have&nbsp;run&nbsp;mono&nbsp;with&nbsp;GC_MAXIMUM_HEAP_SIZE&nbsp;and&nbsp;the&nbsp;memory&nbsp;size<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;(RES)&nbsp;got&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;significantly&nbsp;bigger&nbsp;than&nbsp;it.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;I&nbsp;have&nbsp;searched&nbsp;for&nbsp;the&nbsp;Compacting&nbsp;GC&nbsp;with&nbsp;no&nbsp;luck,&nbsp;we&nbsp;would&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;really&nbsp;like&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;to&nbsp;see&nbsp;if&nbsp;it&nbsp;would&nbsp;help&nbsp;our&nbsp;problem.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;The&nbsp;only&nbsp;operating&nbsp;system&nbsp;resources&nbsp;we&amp;#39;re&nbsp;using&nbsp;are&nbsp;Sockets,&nbsp;but&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;we&nbsp;use&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;them&nbsp;VERY&nbsp;heavily!&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;If&nbsp;anyone&nbsp;has&nbsp;any&nbsp;suggestions,&nbsp;we&amp;#39;d&nbsp;be&nbsp;open&nbsp;to&nbsp;test&nbsp;out&nbsp;anything<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;at&nbsp;this&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;point!&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;We&nbsp;are&nbsp;leaning&nbsp;towards&nbsp;an&nbsp;issue&nbsp;in&nbsp;unmanaged&nbsp;memory&nbsp;and&nbsp;possibly&nbsp;a&nbsp;bug&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;in&nbsp;mono.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Best&nbsp;regards,&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;David&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;ps,&nbsp;I&nbsp;fwded&nbsp;this&nbsp;to&nbsp;gc&nbsp;and&nbsp;devel&nbsp;list&nbsp;because&nbsp;gc&nbsp;list&nbsp;looks&nbsp;quite&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;dead....&nbsp;sorry&nbsp;for&nbsp;the&nbsp;duplication&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;_______________________________________________&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Mono-devel-list&nbsp;mailing&nbsp;list<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;mailto:&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
