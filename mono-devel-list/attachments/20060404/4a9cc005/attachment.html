<tt>
Hi&nbsp;Felipe,&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&nbsp;First,&nbsp;thank&nbsp;you.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&nbsp;Second,&nbsp;yes,&nbsp;I&nbsp;did&nbsp;use&nbsp;a&nbsp;variable&nbsp;to&nbsp;do&nbsp;what&nbsp;you&nbsp;stated&nbsp;(it&nbsp;was<br>
in&nbsp;the&nbsp;code&nbsp;fragments).&amp;nbsp;&nbsp;When&nbsp;I&nbsp;found&nbsp;the&nbsp;abort()&nbsp;did&nbsp;not&nbsp;work&nbsp;all<br>
the&nbsp;time,&nbsp;I&nbsp;set&nbsp;a&nbsp;variable&nbsp;to&nbsp;true,&nbsp;which&nbsp;caused&nbsp;my&nbsp;thread&nbsp;to&nbsp;abort.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&nbsp;Now,&nbsp;in&nbsp;regards&nbsp;to&nbsp;programming&nbsp;practices.&amp;nbsp;&nbsp;I&nbsp;believe&nbsp;you<br>
are&nbsp;correct.&amp;nbsp;&nbsp;I&nbsp;agree&nbsp;in&nbsp;principal&nbsp;with&nbsp;everything&nbsp;you<br>
state.&amp;nbsp;&nbsp;I&nbsp;typically&nbsp;practice&nbsp;those&nbsp;things,&nbsp;as&nbsp;unbelievable&nbsp;as&nbsp;that<br>
might&nbsp;sound.&amp;nbsp;&nbsp;I'm&nbsp;more&nbsp;into&nbsp;systems&nbsp;now,&nbsp;but&nbsp;I've&nbsp;written&nbsp;real<br>
time&nbsp;sw&nbsp;for&nbsp;years.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&nbsp;However,&nbsp;if&nbsp;you&nbsp;look&nbsp;at&nbsp;Microsoft's&nbsp;.NET&nbsp;programming&nbsp;in&nbsp;C#<br>
examples&nbsp;and&nbsp;tutorials,&nbsp;their&nbsp;C#&nbsp;tutorial&nbsp;(see&nbsp;Microsoft&nbsp;.NET&nbsp;SDK,&nbsp;C#<br>
Programming&nbsp;Reference,&nbsp;&amp;quot;Threading&nbsp;Tutorial&amp;quot;)&nbsp;on&nbsp;threads&nbsp;shows&nbsp;you&nbsp;to&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&nbsp;1)&nbsp;Spin&nbsp;while&nbsp;thread&nbsp;is&nbsp;not&nbsp;alive&lt;br&gt;<br>
&amp;nbsp;&nbsp;2)&nbsp;call&nbsp;abort&nbsp;for&nbsp;thread&nbsp;to&nbsp;be&nbsp;closed&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;I&nbsp;agree&nbsp;that&nbsp;a&nbsp;sleep()&nbsp;is&nbsp;a&nbsp;good&nbsp;thing&nbsp;while&nbsp;waiting&nbsp;for<br>
thread&nbsp;to&nbsp;start&nbsp;running.&amp;nbsp;&nbsp;However,&nbsp;I&nbsp;thought&nbsp;one&nbsp;of&nbsp;the&nbsp;points&nbsp;of<br>
&amp;quot;managed&amp;quot;&nbsp;code&nbsp;was&nbsp;to&nbsp;allow&nbsp;this&nbsp;sort&nbsp;of&nbsp;thing,&nbsp;not&nbsp;necessarily&nbsp;paying<br>
attention&nbsp;to&nbsp;cpu&nbsp;loading&nbsp;issues,&nbsp;as&nbsp;well&nbsp;as&nbsp;memory&nbsp;issues?&amp;nbsp;&nbsp;That<br>
is&nbsp;why&nbsp;I&nbsp;swallowed&nbsp;MS's&nbsp;tutorial&nbsp;hook&nbsp;line&nbsp;and&nbsp;sinker.&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&lt;br&gt;<br>
&amp;nbsp;&nbsp;In&nbsp;any&nbsp;case,&nbsp;regardless&nbsp;of&nbsp;the&nbsp;efficacy&nbsp;of&nbsp;the&nbsp;program&nbsp;I've<br>
written,&nbsp;the&nbsp;point&nbsp;that&nbsp;mono&nbsp;developers&nbsp;must&nbsp;ponder&nbsp;is&nbsp;that&nbsp;other<br>
coders&nbsp;following&nbsp;my&nbsp;footsteps&nbsp;will&nbsp;code&nbsp;exactly&nbsp;the&nbsp;same&nbsp;way,&nbsp;the&nbsp;way<br>
that&nbsp;Microsoft&nbsp;Tutorial&nbsp;states&nbsp;it&nbsp;should.&amp;nbsp;&nbsp;When&nbsp;it&nbsp;fails&nbsp;to&nbsp;abort<br>
under&nbsp;mono,&nbsp;but&nbsp;always&nbsp;aborts&nbsp;under&nbsp;.NET,&nbsp;they&nbsp;will&nbsp;claim&nbsp;it&nbsp;is&nbsp;a&nbsp;bug<br>
in&nbsp;Mono.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&nbsp;It&nbsp;does&nbsp;appear&nbsp;I&nbsp;overlooked&nbsp;a&nbsp;join()&nbsp;call,&nbsp;which&nbsp;forces&nbsp;the<br>
first&nbsp;thread&nbsp;to&nbsp;deadlock&nbsp;until&nbsp;the&nbsp;abort&nbsp;happens.&amp;nbsp;&nbsp;However,&nbsp;I<br>
never&nbsp;had&nbsp;the&nbsp;problem&nbsp;of&nbsp;a&nbsp;failing&nbsp;abort&nbsp;in&nbsp;.NET.&amp;nbsp;&nbsp;In&nbsp;this&nbsp;case,&nbsp;I<br>
could&nbsp;care&nbsp;less&nbsp;if&nbsp;the&nbsp;thread&nbsp;aborted&nbsp;a&nbsp;few&nbsp;hundred&nbsp;milliseconds&nbsp;to&nbsp;one<br>
second&nbsp;later&nbsp;than&nbsp;the&nbsp;main&nbsp;thread.&lt;br&gt;<br>
&lt;br&gt;&amp;nbsp;&nbsp;As&nbsp;I&nbsp;indicated&nbsp;earlier,&nbsp;I&nbsp;set&nbsp;a&nbsp;variable&nbsp;which&nbsp;caused&nbsp;my<br>
routine&nbsp;to&nbsp;bail,&nbsp;causing&nbsp;the&nbsp;thread&nbsp;to&nbsp;naturally&nbsp;abort&nbsp;(similar&nbsp;to&nbsp;your<br>
proposal,&nbsp;but&nbsp;more&nbsp;crude).&amp;nbsp;&nbsp;This&nbsp;method&nbsp;will&nbsp;work&nbsp;in&nbsp;all&nbsp;versions,<br>
.NET&nbsp;and&nbsp;Mono.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;I&nbsp;was&nbsp;wondering&nbsp;if&nbsp;perhaps&nbsp;the&nbsp;abort()&nbsp;routine&nbsp;in&nbsp;Mono<br>
might&nbsp;need&nbsp;tweaking.&nbsp;I&nbsp;was&nbsp;assuming&nbsp;that&nbsp;in&nbsp;most&nbsp;cases,&nbsp;(except&nbsp;for<br>
System.Managed&nbsp;and&nbsp;other&nbsp;issues&nbsp;of&nbsp;similar&nbsp;ilk)&nbsp;that&nbsp;Mono&nbsp;would<br>
typically&nbsp;want&nbsp;to&nbsp;work&nbsp;the&nbsp;same&nbsp;way&nbsp;as&nbsp;.NET.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&nbsp;I&nbsp;think&nbsp;Mono&nbsp;is&nbsp;great!&amp;nbsp;&nbsp;I'm&nbsp;very,&nbsp;very&nbsp;happy&nbsp;to&nbsp;see<br>
it.&amp;nbsp;&nbsp;The&nbsp;work&nbsp;thus&nbsp;far&nbsp;has&nbsp;been&nbsp;astounding&nbsp;and<br>
exciting.&amp;nbsp;&amp;nbsp;&nbsp;If&nbsp;the&nbsp;way&nbsp;abort()&nbsp;works&nbsp;is&nbsp;the&nbsp;one&nbsp;of&nbsp;the&nbsp;few<br>
differences,&nbsp;I&nbsp;don't&nbsp;have&nbsp;any&nbsp;problems&nbsp;using&nbsp;Mono.&amp;nbsp;&nbsp;It&nbsp;would&nbsp;need<br>
to&nbsp;be&nbsp;documented,&nbsp;however,&nbsp;for&nbsp;future&nbsp;folks&nbsp;blindly&nbsp;following&nbsp;MS<br>
recommendations.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&nbsp;BTW,&nbsp;the&nbsp;original&nbsp;.NET&nbsp;code&nbsp;ran&nbsp;in&nbsp;Mono&nbsp;without&nbsp;recompile,<br>
except&nbsp;for&nbsp;one&nbsp;small&nbsp;issue.&amp;nbsp;&nbsp;I'm&nbsp;tracking&nbsp;down&nbsp;some&nbsp;other&nbsp;issues<br>
now.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
thanks&nbsp;again,&lt;br&gt;<br>
wade&lt;br&gt;<br>
&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;4/4/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Felipe&nbsp;Almeida&nbsp;Lessa&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:felipe.lessa@gmail.com&quot;&gt;felipe.lessa@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Em&nbsp;Ter,&nbsp;2006-04-04&nbsp;às&nbsp;08:26&nbsp;-0600,&nbsp;Wade&nbsp;Maxfield&nbsp;escreveu:&lt;br&gt;&amp;gt;&nbsp;Hi,&lt;br&gt;&lt;br&gt;Hi!&nbsp;Correct&nbsp;me&nbsp;if&nbsp;I'm&nbsp;wrong&nbsp;but...&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;/*doesn't&nbsp;always&nbsp;work&nbsp;----&amp;gt;*/&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Global.WebThread.Abort();&lt;br&gt;&lt;br&gt;You&nbsp;shouldn't&nbsp;be&nbsp;using&nbsp;Thread.Abort<br>
,&nbsp;right?&nbsp;AFAIK,&nbsp;this&nbsp;is&nbsp;a&nbsp;bad&nbsp;way&nbsp;of&lt;br&gt;killing&nbsp;threads.&lt;br&gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;(!Global.WebThread.IsAlive);&lt;br&gt;&lt;br&gt;Why&nbsp;do&nbsp;you&nbsp;make&nbsp;the&nbsp;CPU&nbsp;go&nbsp;to&nbsp;100%&nbsp;here?&nbsp;At&nbsp;least&nbsp;some&nbsp;Sleep&nbsp;should&nbsp;be&lt;br&gt;better,&nbsp;no?&lt;br&gt;&lt;br&gt;------&lt;br&gt;<br>
&lt;br&gt;I&nbsp;didn't&nbsp;read&nbsp;all&nbsp;of&nbsp;your&nbsp;code,&nbsp;but&nbsp;I&nbsp;suspect&nbsp;you&nbsp;should&nbsp;be&nbsp;using&lt;br&gt;another&nbsp;thread&nbsp;abortion&nbsp;method.&nbsp;I&nbsp;have&nbsp;some&nbsp;code&nbsp;that&nbsp;uses&nbsp;a&nbsp;thread&nbsp;with&lt;br&gt;some&nbsp;web&nbsp;requests,&nbsp;and&nbsp;to&nbsp;abort&nbsp;it&nbsp;I&nbsp;do&nbsp;2&nbsp;things:&lt;br&gt;&lt;br&gt;1)&nbsp;Create&nbsp;a&nbsp;variable&nbsp;that&nbsp;is&nbsp;marked&nbsp;false&nbsp;when&nbsp;I&nbsp;want&nbsp;the&nbsp;thread&nbsp;to&nbsp;die.<br>
&lt;br&gt;The&nbsp;thread's&nbsp;code&nbsp;periodically&nbsp;checks&nbsp;for&nbsp;the&nbsp;variable.&lt;br&gt;2)&nbsp;Save&nbsp;the&nbsp;WebRequest&nbsp;on&nbsp;a&nbsp;private&nbsp;variable&nbsp;to&nbsp;try&nbsp;to&nbsp;abort&nbsp;it,&nbsp;if&lt;br&gt;possible.&lt;br&gt;&lt;br&gt;The&nbsp;relevant&nbsp;abortion&nbsp;method:&lt;br&gt;&lt;br&gt;public&nbsp;void&nbsp;Abort()&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
this.aborted&nbsp;=&nbsp;true;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;(this.abortable)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;this.webRequest.Abort();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Logger.Log(this,<br>
&amp;quot;WebRequest&nbsp;aborted&nbsp;with&nbsp;(apparent)&nbsp;success!&amp;quot;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&nbsp;else&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Logger.Log(this,<br>
&amp;quot;WebRequest&nbsp;is&nbsp;not&nbsp;abortable.&amp;quot;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Logger.Log(this,<br>
&amp;quot;Failed&nbsp;to&nbsp;abort&nbsp;the&nbsp;WebRequest:\n&amp;quot;&nbsp;+&nbsp;e.ToString());&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;}&lt;br&gt;&lt;br&gt;The&nbsp;method&nbsp;name&nbsp;is&nbsp;&amp;quot;Abort&amp;quot;&nbsp;because&nbsp;this&nbsp;class&nbsp;does&nbsp;not&nbsp;derive&nbsp;from&lt;br&gt;Thread.&nbsp;Also,&nbsp;you&nbsp;can&nbsp;safely&nbsp;ignore&nbsp;all&nbsp;Logger::Log&nbsp;calls.<br>
&lt;br&gt;&lt;br&gt;abortable&nbsp;is&nbsp;a&nbsp;variable&nbsp;that&nbsp;is&nbsp;set&nbsp;to&nbsp;false&nbsp;when&nbsp;the&nbsp;code&nbsp;starts&nbsp;an&lt;br&gt;operation&nbsp;on&nbsp;the&nbsp;WebRequest&nbsp;that&nbsp;would&nbsp;probably&nbsp;crash&nbsp;the&nbsp;program&nbsp;if&nbsp;it&lt;br&gt;was&nbsp;aborted.&lt;br&gt;&lt;br&gt;It's&nbsp;also&nbsp;worth&nbsp;noting&nbsp;that&nbsp;we&nbsp;just&nbsp;try&nbsp;to&nbsp;abort&nbsp;the&nbsp;WebRequest&nbsp;and<br>
&lt;br&gt;ignore&nbsp;any&nbsp;exceptions&nbsp;--&nbsp;the&nbsp;code&nbsp;will&nbsp;stop&nbsp;anyway&nbsp;sometime&nbsp;soon&nbsp;as&nbsp;we&lt;br&gt;set&nbsp;the&nbsp;aborted&nbsp;variable.&lt;br&gt;&lt;br&gt;HTH,&lt;br&gt;&lt;br&gt;--&lt;br&gt;Felipe.&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
