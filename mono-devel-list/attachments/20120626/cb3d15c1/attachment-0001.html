<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;I'm&nbsp;wondering&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;bug.....&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;And&nbsp;maybe&nbsp;a&nbsp;report&nbsp;should&nbsp;be&nbsp;filed....&nbsp;&nbsp;Sounds&nbsp;like&nbsp;a&nbsp;similar<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;problem&nbsp;i&nbsp;looked&nbsp;at&nbsp;recently,&nbsp;but&nbsp;that&nbsp;bug&nbsp;was&nbsp;different&nbsp;because<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sample&nbsp;code&nbsp;in&nbsp;the&nbsp;bug&nbsp;report&nbsp;also&nbsp;crashed&nbsp;in&nbsp;windows.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;According&nbsp;to:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a<br>
href=&quot;http://www.codeproject.com/Articles/8580/How-to-detect-a-connection-loss-in-Net-Sockets&quot;&gt;http://www.codeproject.com/Articles/8580/How-to-detect-a-connection-loss-in-Net-Sockets&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;way&nbsp;to&nbsp;detect&nbsp;a&nbsp;remotely&nbsp;closed&nbsp;connection&nbsp;is&nbsp;to&nbsp;check&nbsp;if<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Socket.Receive&nbsp;(which,&nbsp;incidentally,&nbsp;is&nbsp;the&nbsp;topmost&nbsp;thing&nbsp;on&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stack&nbsp;below)&nbsp;returns&nbsp;0&nbsp;or&nbsp;fewer&nbsp;bytes&nbsp;--&nbsp;so&nbsp;you&nbsp;wouldn't&nbsp;expect&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exception,&nbsp;instead&nbsp;you&nbsp;would&nbsp;expect&nbsp;a&nbsp;0&nbsp;return&nbsp;for&nbsp;number&nbsp;of&nbsp;bytes<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;would&nbsp;seem&nbsp;to&nbsp;match:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://msdn.microsoft.com/en-us/library/w3xtz6a5.aspx&quot;&gt;http://msdn.microsoft.com/en-us/library/w3xtz6a5.aspx&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Which&nbsp;says:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;'Segoe&nbsp;UI',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Verdana,&nbsp;Arial;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;left;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-size-adjust:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;display:&nbsp;inline&nbsp;!important;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float:&nbsp;none;&nbsp;&quot;&gt;If&nbsp;the&nbsp;remote&nbsp;host&nbsp;shuts&nbsp;down&nbsp;the&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;Apple-converted-space&quot;&gt;&nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;'Segoe&nbsp;UI',&nbsp;Verdana,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arial;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;left;&nbsp;text-indent:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-size-adjust:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;a<br>
href=&quot;http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(150,&nbsp;11,&nbsp;180);&nbsp;text-decoration:&nbsp;none;&nbsp;&quot;&gt;Socket&lt;/a&gt;&lt;/span&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;'Segoe&nbsp;UI',&nbsp;Verdana,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arial;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;left;&nbsp;text-indent:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-size-adjust:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;display:&nbsp;inline&nbsp;!important;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float:&nbsp;none;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-converted-space&quot;&gt;&nbsp;&lt;/span&gt;connection<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&lt;span&nbsp;class=&quot;Apple-converted-space&quot;&gt;&nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;'Segoe&nbsp;UI',&nbsp;Verdana,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arial;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;left;&nbsp;text-indent:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-size-adjust:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;a<br>
href=&quot;http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.shutdown.aspx&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(150,&nbsp;11,&nbsp;180);&nbsp;text-decoration:&nbsp;none;&nbsp;&quot;&gt;Shutdown&lt;/a&gt;&lt;/span&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;'Segoe&nbsp;UI',&nbsp;Verdana,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arial;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;left;&nbsp;text-indent:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-size-adjust:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;display:&nbsp;inline&nbsp;!important;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float:&nbsp;none;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-converted-space&quot;&gt;&nbsp;&lt;/span&gt;method,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;all&nbsp;available&nbsp;data&nbsp;has&nbsp;been&nbsp;received,&nbsp;the&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;Apple-converted-space&quot;&gt;&nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;'Segoe&nbsp;UI',&nbsp;Verdana,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arial;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;left;&nbsp;text-indent:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-size-adjust:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;a<br>
href=&quot;http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receive.aspx&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(150,&nbsp;11,&nbsp;180);&nbsp;text-decoration:&nbsp;none;&nbsp;&quot;&gt;Receive&lt;/a&gt;&lt;/span&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;'Segoe&nbsp;UI',&nbsp;Verdana,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arial;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;left;&nbsp;text-indent:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-size-adjust:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;display:&nbsp;inline&nbsp;!important;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float:&nbsp;none;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-converted-space&quot;&gt;&nbsp;&lt;/span&gt;method<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;complete&nbsp;immediately&nbsp;and&nbsp;return&nbsp;zero&nbsp;bytes.&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;And&nbsp;also&nbsp;says&nbsp;that&nbsp;SocketException&nbsp;is&nbsp;only&nbsp;raised&nbsp;under&nbsp;certain<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conditions,&nbsp;the&nbsp;only&nbsp;almost&nbsp;valid&nbsp;match&nbsp;is:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;An&nbsp;operating&nbsp;system&nbsp;error&nbsp;occurs&nbsp;while&nbsp;accessing&nbsp;the&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;Apple-converted-space&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&gt;&lt;a<br>
href=&quot;http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(150,&nbsp;11,&nbsp;180);&nbsp;text-decoration:&nbsp;none;&nbsp;&quot;&gt;Socket&lt;/a&gt;&lt;/span&gt;.&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;But&nbsp;i&nbsp;don't&nbsp;think&nbsp;connection&nbsp;reset&nbsp;by&nbsp;peer&nbsp;is&nbsp;necessarily&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;operating&nbsp;system&nbsp;exception,&nbsp;it's&nbsp;rather&nbsp;a&nbsp;state&nbsp;of&nbsp;connection<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indicating&nbsp;we're&nbsp;disconnected,&nbsp;hence&nbsp;we&nbsp;should&nbsp;be&nbsp;returning&nbsp;zero,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;raising&nbsp;an&nbsp;exception.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-Rob&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;06/26/2012&nbsp;08:49&nbsp;AM,&nbsp;shahbour&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:1340714962865-4650173.post@n4.nabble.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Hello<br>
<br>
I&nbsp;got&nbsp;an&nbsp;WCF&nbsp;service&nbsp;that&nbsp;is&nbsp;running&nbsp;except&nbsp;at&nbsp;some&nbsp;time&nbsp;if&nbsp;the&nbsp;client&nbsp;send<br>
a&nbsp;request&nbsp;then&nbsp;close&nbsp;his&nbsp;program&nbsp;directly&nbsp;,&nbsp;ending&nbsp;the&nbsp;session&nbsp;the&nbsp;WCF<br>
console&nbsp;application&nbsp;crashes&nbsp;with&nbsp;below&nbsp;error&nbsp;<br>
<br>
<br>
[0x7f0b42f55700:]&nbsp;EXCEPTION&nbsp;handling:&nbsp;System.Net.Sockets.SocketException:<br>
Connection&nbsp;reset&nbsp;by&nbsp;peer<br>
[0x7f0b42f55700:]&nbsp;EXCEPTION&nbsp;handling:&nbsp;System.IO.IOException:&nbsp;Read&nbsp;failure<br>
[0x7f0b42f55700:]&nbsp;EXCEPTION&nbsp;handling:&nbsp;System.IO.IOException:&nbsp;Read&nbsp;failure<br>
<br>
Unhandled&nbsp;Exception:&nbsp;System.IO.IOException:&nbsp;Read&nbsp;failure&nbsp;---&gt;<br>
System.Net.Sockets.SocketException:&nbsp;Connection&nbsp;reset&nbsp;by&nbsp;peer<br>
&nbsp;&nbsp;at&nbsp;System.Net.Sockets.Socket.Receive&nbsp;(System.Byte[]&nbsp;buffer,&nbsp;Int32&nbsp;offset,<br>
Int32&nbsp;size,&nbsp;SocketFlags&nbsp;flags)&nbsp;[0x000ad]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System/System.Net.Sockets/Socket.cs:1606<br>
&nbsp;&nbsp;at&nbsp;System.Net.Sockets.NetworkStream.Read&nbsp;(System.Byte[]&nbsp;buffer,&nbsp;Int32<br>
offset,&nbsp;Int32&nbsp;size)&nbsp;[0x00067]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System/System.Net.Sockets/NetworkStream.cs:399<br>
&nbsp;&nbsp;---&nbsp;End&nbsp;of&nbsp;inner&nbsp;exception&nbsp;stack&nbsp;trace&nbsp;---<br>
&nbsp;&nbsp;at&nbsp;System.Net.Sockets.NetworkStream.Read&nbsp;(System.Byte[]&nbsp;buffer,&nbsp;Int32<br>
offset,&nbsp;Int32&nbsp;size)&nbsp;[0x00078]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System/System.Net.Sockets/NetworkStream.cs:401<br>
&nbsp;&nbsp;at&nbsp;System.Net.RequestStream.Read&nbsp;(System.Byte[]&nbsp;buffer,&nbsp;Int32&nbsp;offset,<br>
Int32&nbsp;count)&nbsp;[0x0003c]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System/System.Net/RequestStream.cs:142<br>
&nbsp;&nbsp;at&nbsp;System.IO.StreamReader.ReadBuffer&nbsp;()&nbsp;[0x00012]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/corlib/System.IO/StreamReader.cs:394<br>
&nbsp;&nbsp;at&nbsp;System.IO.StreamReader.Read&nbsp;(System.Char[]&nbsp;buffer,&nbsp;Int32&nbsp;index,&nbsp;Int32<br>
count)&nbsp;[0x00062]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/corlib/System.IO/StreamReader.cs:471<br>
&nbsp;&nbsp;at&nbsp;Mono.Xml2.XmlTextReader.ReadTextReader&nbsp;(Int32&nbsp;remained)&nbsp;[0x0004f]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.XML/System.Xml/XmlTextReader.cs:1256<br>
&nbsp;&nbsp;at&nbsp;Mono.Xml2.XmlTextReader.PeekChar&nbsp;()&nbsp;[0x00047]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.XML/System.Xml/XmlTextReader.cs:1210<br>
&nbsp;&nbsp;at&nbsp;Mono.Xml2.XmlTextReader.ReadContent&nbsp;()&nbsp;[0x0003f]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.XML/System.Xml/XmlTextReader.cs:1310<br>
&nbsp;&nbsp;at&nbsp;Mono.Xml2.XmlTextReader.Read&nbsp;()&nbsp;[0x00141]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.XML/System.Xml/XmlTextReader.cs:626<br>
&nbsp;&nbsp;at&nbsp;System.Xml.XmlTextReader.Read&nbsp;()&nbsp;[0x0006b]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.XML/System.Xml/XmlTextReader2.cs:564<br>
&nbsp;&nbsp;at&nbsp;System.Xml.XmlSimpleDictionaryReader.Read&nbsp;()&nbsp;[0x00000]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.Runtime.Serialization/System.Xml/XmlSimpleDictionaryReader.cs:253<br>
&nbsp;&nbsp;at&nbsp;System.Xml.XmlReader.MoveToContent&nbsp;()&nbsp;[0x00050]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.XML/System.Xml/XmlReader.cs:574<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Channels.XmlReaderMessage.ReadEnvelopeStart&nbsp;()<br>
[0x00000]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.ServiceModel/System.ServiceModel.Channels/MessageImpl.cs:146<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Channels.XmlReaderMessage..ctor<br>
(System.ServiceModel.Channels.MessageVersion&nbsp;version,<br>
System.Xml.XmlDictionaryReader&nbsp;reader,&nbsp;Int32&nbsp;maxSizeOfHeaders)&nbsp;[0x00026]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.ServiceModel/System.ServiceModel.Channels/MessageImpl.cs:70<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Channels.Message.CreateMessage<br>
(System.Xml.XmlDictionaryReader&nbsp;envelopeReader,&nbsp;Int32&nbsp;maxSizeOfHeaders,<br>
System.ServiceModel.Channels.MessageVersion&nbsp;version)&nbsp;[0x00022]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.ServiceModel/System.ServiceModel.Channels/Message.cs:427<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Channels.TextMessageEncoder.ReadMessage<br>
(System.IO.Stream&nbsp;stream,&nbsp;Int32&nbsp;maxSizeOfHeaders,&nbsp;System.String&nbsp;contentType)<br>
[0x00011]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.ServiceModel/System.ServiceModel.Channels/TextMessageEncoder.cs:87<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Channels.Http.HttpReplyChannel.CreatePostMessage<br>
(System.ServiceModel.Channels.Http.HttpContextInfo&nbsp;ctxi)&nbsp;[0x00081]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.ServiceModel/System.ServiceModel.Channels.Http/HttpReplyChannel.cs:229<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Channels.Http.HttpReplyChannel.TryReceiveRequest<br>
(TimeSpan&nbsp;timeout,&nbsp;System.ServiceModel.Channels.RequestContext&amp;&nbsp;context)<br>
[0x000aa]&nbsp;in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.ServiceModel/System.ServiceModel.Channels.Http/HttpReplyChannel.cs:172<br>
&nbsp;&nbsp;at<br>
System.ServiceModel.Channels.ReplyChannelBase.&lt;BeginTryReceiveRequest&gt;m__10<br>
(TimeSpan&nbsp;tout,&nbsp;System.ServiceModel.Channels.RequestContext&amp;&nbsp;ctx)&nbsp;[0x0002f]<br>
in<br>
/usr/local/src/mono-2.11.1/mcs/class/System.ServiceModel/System.ServiceModel.Channels/ReplyChannelBase.cs:126<br>
<br>
I&nbsp;couldn't&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;check&nbsp;the&nbsp;connection&nbsp;status&nbsp;before&nbsp;trying&nbsp;to<br>
ReadMessage&nbsp;or&nbsp;CreatePostMessage&nbsp;functions.<br>
<br>
Any&nbsp;Help&nbsp;??<br>
<br>
<br>
--<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/WCF-Fail-with-System-Net-Sockets-SocketException-Connection-reset-by-peer-tp4650173.html&quot;&gt;http://mono.1490590.n4.nabble.com/WCF-Fail-with-System-Net-Sockets-SocketException-Connection-reset-by-peer-tp4650173.html&lt;/a&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;Mono&nbsp;-&nbsp;Dev&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.<br>
_______________________________________________<br>
Mono-devel-list&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
