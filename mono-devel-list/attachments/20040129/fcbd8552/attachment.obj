Index: mono-debug.c
===================================================================
RCS file: /cvs/public/mono/mono/metadata/mono-debug.c,v
retrieving revision 1.14
diff -u -p -r1.14 mono-debug.c
--- mono-debug.c	11 Nov 2003 19:07:41 -0000	1.14
+++ mono-debug.c	13 Jan 2004 00:02:40 -0000
@@ -24,6 +24,9 @@ static gboolean in_the_mono_debugger = F
 static gboolean mono_debug_initialized = FALSE;
 GHashTable *mono_debug_handles = NULL;
 
+static int num_methods = 0;
+static long memory_size = 0;
+
 static MonoDebugHandle *mono_debug_open_image    (MonoImage *image);
 static void             mono_debug_close_image   (MonoDebugHandle *debug);
 
@@ -93,6 +96,9 @@ mono_debug_cleanup (void)
 	if (mono_debug_handles)
 		g_hash_table_destroy (mono_debug_handles);
 	mono_debug_handles = NULL;
+
+	g_message (G_STRLOC ": %d methods and %ld bytes of data", num_methods,
+		   memory_size);
 }
 
 static MonoDebugHandle *
@@ -291,6 +297,12 @@ mono_debug_add_method (MonoMethod *metho
 
 	domain_data->jit [minfo->index] = jit;
 
+	num_methods++;
+	memory_size += sizeof (MonoDebugMethodJitInfo) +
+		jit->line_numbers->len * sizeof (MonoDebugLineNumberEntry) +
+		(jit->num_params + jit->num_locals) * sizeof (MonoDebugVarInfo) +
+		(jit->this_var != NULL ? sizeof (MonoDebugVarInfo) : 0);
+
 	if (handle->_priv->debugger_info && (domain == mono_root_domain))
 		mono_debugger_add_method (handle->_priv->debugger_info, minfo, jit);
 
@@ -434,6 +446,8 @@ mono_debug_get_domain_data (MonoDebugHan
 	data->_priv->next = handle->_priv->domain_table;
 	data->_priv->wrapper_info = g_hash_table_new (g_direct_hash, g_direct_equal);
 	handle->_priv->domain_table = data;
+
+	memory_size += sizeof (MonoDebugDomainData) + sizeof (MonoDebugDomainDataPriv);
 
 	return data;
 }
