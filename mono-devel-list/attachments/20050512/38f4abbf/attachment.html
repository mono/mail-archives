<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.2900.2627&quot;&nbsp;name=GENERATOR&gt;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;BLOCKQUOTE&nbsp;dir=ltr&nbsp;<br>
style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#0000ff&nbsp;2px&nbsp;solid;&nbsp;MARGIN-RIGHT:&nbsp;0px&quot;&gt;<br>
&nbsp;&nbsp;&lt;BLOCKQUOTE&nbsp;<br>
&nbsp;&nbsp;style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#0000ff&nbsp;2px&nbsp;solid;&nbsp;MARGIN-RIGHT:&nbsp;0px&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;DIV&nbsp;class=OutlookMessageHeader&nbsp;lang=en-us&nbsp;dir=ltr&nbsp;align=left&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;HR&nbsp;tabIndex=-1&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;face=Tahoma&nbsp;size=2&gt;&lt;B&gt;From:&lt;/B&gt;&nbsp;Bill&nbsp;Middleton&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;[mailto:flashdict@gmail.com]&nbsp;&lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt;&nbsp;jeudi&nbsp;12&nbsp;mai&nbsp;2005&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;00:12&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt;&nbsp;Jérôme&nbsp;Laban&lt;BR&gt;&lt;B&gt;Subject:&lt;/B&gt;&nbsp;Re:&nbsp;[Mono-devel-list]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Mono-1.1.7&nbsp;-&nbsp;NetBSD&nbsp;2.0.x&nbsp;Support&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=gmail_quote&gt;On&nbsp;5/11/05,&nbsp;&lt;B&nbsp;class=gmail_sendername&gt;Jérôme&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Laban&lt;/B&gt;&nbsp;&amp;lt;&lt;A&nbsp;href=&quot;mailto:jaylee@epitech.net&quot;&gt;jaylee@epitech.net&lt;/A&gt;&amp;gt;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;wrote:&lt;/SPAN&gt;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;BLOCKQUOTE&nbsp;class=gmail_quote&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;PADDING-LEFT:&nbsp;1ex;&nbsp;MARGIN:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;BORDER-LEFT:&nbsp;rgb(204,204,204)&nbsp;1px&nbsp;solid&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=2&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&gt;&lt;FONT&nbsp;size=2&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&gt;I&nbsp;also&nbsp;noted&nbsp;that&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redefining&nbsp;register&nbsp;indices&nbsp;is&nbsp;not&nbsp;needed&nbsp;if&nbsp;&lt;/FONT&gt;&lt;FONT&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;face=Tahoma&gt;&lt;FONT&nbsp;color=#0000ff&gt;&lt;FONT&nbsp;size=1&gt;&lt;FONT&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=2&gt;HAVE_WORKING_SIGALTSTACK&lt;/FONT&gt;&lt;SPAN&gt;&nbsp;&lt;FONT&nbsp;size=2&gt;is&nbsp;defined.&nbsp;But&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;since&nbsp;it&nbsp;can&nbsp;be&nbsp;disabled&nbsp;using&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--with-sigaltstack=no,&amp;nbsp;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;face=Tahoma&nbsp;color=#0000ff&gt;it&nbsp;would&nbsp;break&nbsp;the&nbsp;compatibility&nbsp;with&nbsp;NetBSD's&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigcontext.&nbsp;I&nbsp;think&nbsp;its&nbsp;best&nbsp;to&nbsp;leave&nbsp;it&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;there.&lt;/FONT&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/BLOCKQUOTE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;DIV&gt;&lt;BR&gt;&lt;BR&gt;Hmm.&amp;nbsp;&nbsp;Well,&nbsp;at&nbsp;that&nbsp;point&nbsp;it's&amp;nbsp;&nbsp;beyond&nbsp;my&nbsp;charter&nbsp;to&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;criticize,&nbsp;but&nbsp;I&nbsp;don't&nbsp;think&nbsp;it'll&nbsp;make&nbsp;it&nbsp;in&nbsp;to&nbsp;the&nbsp;source&nbsp;like&nbsp;that.&amp;nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;You've&nbsp;made&nbsp;sigaltstack=yes&nbsp;the&nbsp;default&nbsp;for&nbsp;netbsd2&nbsp;in&nbsp;configure.in,&nbsp;so&nbsp;if&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;some&nbsp;poor&nbsp;sap&nbsp;wants&nbsp;to&nbsp;try&nbsp;to&nbsp;run&nbsp;without&nbsp;it,&nbsp;he&nbsp;deserves&nbsp;to&nbsp;get&nbsp;registers&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;zapped&nbsp;a&nbsp;little,&nbsp;imho.&amp;nbsp;&nbsp;:)&lt;BR&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/BLOCKQUOTE&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;<br>
&nbsp;&nbsp;size=2&gt;Well,&nbsp;you&nbsp;might&nbsp;be&nbsp;right&nbsp;:)&nbsp;I'll&nbsp;ask&nbsp;some&nbsp;other&nbsp;mono&nbsp;hackers&nbsp;about&nbsp;<br>
&nbsp;&nbsp;that,&nbsp;just&nbsp;to&nbsp;be&nbsp;sure.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;BLOCKQUOTE&nbsp;<br>
&nbsp;&nbsp;style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#0000ff&nbsp;2px&nbsp;solid;&nbsp;MARGIN-RIGHT:&nbsp;0px&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;/SPAN&gt;&lt;BR&gt;Btw,&nbsp;did&nbsp;you&nbsp;not&nbsp;have&nbsp;trouble&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&amp;nbsp;&nbsp;io-layer/collection.c?&amp;nbsp;&nbsp;Awhile&nbsp;back&nbsp;I&nbsp;tried&nbsp;to&nbsp;help&nbsp;a&nbsp;netbsd&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;user&nbsp;and&nbsp;we&nbsp;found&nbsp;that,&nbsp;at&nbsp;least&nbsp;on&nbsp;his&nbsp;version&nbsp;(early?)&nbsp;of&nbsp;2.0,&nbsp;there&nbsp;was&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;definition&nbsp;for&nbsp;PTHREAD_STACK_MIN.&amp;nbsp;&nbsp;Perhaps&nbsp;that's&nbsp;been&nbsp;fixed&nbsp;in&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;netbsd&nbsp;now?&amp;nbsp;&nbsp;Here's&nbsp;the&nbsp;patch&nbsp;that&nbsp;got&nbsp;him&nbsp;past&nbsp;that&nbsp;error.&amp;nbsp;&nbsp;It&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;simply&nbsp;presets&nbsp;a&nbsp;reasonable&nbsp;default&nbsp;for&nbsp;minimum&nbsp;stack&nbsp;size&nbsp;(which&nbsp;is&nbsp;broken&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;Freebsd&nbsp;except&nbsp;for&nbsp;CURRENT),&nbsp;so&nbsp;I&nbsp;knew&nbsp;right&nbsp;where&nbsp;to&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;look.&amp;nbsp;&lt;BR&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;color=#0000ff&nbsp;size=2&gt;&amp;nbsp;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/BLOCKQUOTE&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;size=2&gt;For&nbsp;<br>
&nbsp;&nbsp;now,&nbsp;I&nbsp;fixed&nbsp;the&nbsp;value&nbsp;to&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;one&nbsp;found&nbsp;in&nbsp;FreeBSD.&nbsp;NetBSD&nbsp;does&nbsp;<br>
&nbsp;&nbsp;seem&nbsp;define&nbsp;this&nbsp;value,&nbsp;even&nbsp;in&nbsp;-CURRENT.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;BLOCKQUOTE&nbsp;<br>
&nbsp;&nbsp;style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#0000ff&nbsp;2px&nbsp;solid;&nbsp;MARGIN-RIGHT:&nbsp;0px&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;/SPAN&gt;&lt;BR&gt;&lt;BR&gt;Finally,&nbsp;as&nbsp;I&nbsp;understood&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;it,&nbsp;NetBSD&nbsp;1.6&nbsp;_does_&nbsp;have&nbsp;working&nbsp;kernel&nbsp;threads,&nbsp;but&nbsp;not&nbsp;tls&nbsp;support&nbsp;for&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;__thread,&nbsp;yes?&amp;nbsp;&nbsp;I&nbsp;haven't&nbsp;tried&nbsp;it,&nbsp;but&nbsp;I&nbsp;was&nbsp;pretty&nbsp;sure&nbsp;that&nbsp;netbsd&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;1.6&nbsp;would&nbsp;work&nbsp;ok&nbsp;with&nbsp;tls=pthread&nbsp;and&nbsp;sigaltstack&nbsp;(although&nbsp;ucontext&nbsp;was&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;still&nbsp;very&nbsp;tentative&nbsp;then,&nbsp;and&nbsp;may&nbsp;not&nbsp;have&nbsp;__gregs,&nbsp;even).&amp;nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Unfortunately,&nbsp;I&nbsp;cant&nbsp;verify&nbsp;this,&nbsp;but&nbsp;thanks&nbsp;for&nbsp;leaving&nbsp;1.6&nbsp;a&nbsp;chance&nbsp;to&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;join&nbsp;in&nbsp;the&nbsp;fray.&amp;nbsp;&nbsp;I'll&nbsp;look&nbsp;your&nbsp;updated&nbsp;patch&nbsp;over&nbsp;soon.&lt;BR&gt;&lt;SPAN&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;class=115051009-12052005&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;size=2&gt;&amp;nbsp;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/BLOCKQUOTE&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;size=2&gt;No,&nbsp;<br>
&nbsp;&nbsp;not&nbsp;exactly.&nbsp;NetBSD&nbsp;1.6&nbsp;does&nbsp;have&nbsp;internal&nbsp;kernel&nbsp;threads&nbsp;but&nbsp;these&nbsp;are&nbsp;not&nbsp;<br>
&nbsp;&nbsp;exposed&nbsp;to&nbsp;the&nbsp;user.&nbsp;The&nbsp;only&nbsp;way&nbsp;to&nbsp;do&nbsp;threading&nbsp;is&nbsp;by&nbsp;using&amp;nbsp;the&nbsp;<br>
&nbsp;&nbsp;libpthread&nbsp;wrapper&nbsp;around&nbsp;libpth,&nbsp;which&nbsp;is&nbsp;a&nbsp;cooperative&nbsp;userland&nbsp;threading&nbsp;<br>
&nbsp;&nbsp;library.&nbsp;This&nbsp;is&nbsp;not&nbsp;the&nbsp;threading&nbsp;model&nbsp;.NET&nbsp;is&nbsp;using.&nbsp;TLS&nbsp;is&nbsp;not&nbsp;supported&nbsp;<br>
&nbsp;&nbsp;either&nbsp;(hence&nbsp;__thread).&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;<br>
&nbsp;&nbsp;size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;<br>
&nbsp;&nbsp;size=2&gt;NetBSD&nbsp;2.0.x&nbsp;should&nbsp;support&nbsp;__thread,&nbsp;but&nbsp;there&nbsp;is&nbsp;a&nbsp;segfault&nbsp;when&nbsp;<br>
&nbsp;&nbsp;accessing&nbsp;__thread&nbsp;modified&nbsp;variables,&nbsp;at&nbsp;least&nbsp;in&nbsp;NetBSD&nbsp;2.0.&nbsp;I'll&nbsp;try&nbsp;in&nbsp;<br>
&nbsp;&nbsp;NetBSD&nbsp;2.0.3&nbsp;Beta,&nbsp;to&nbsp;see&nbsp;if&nbsp;that&nbsp;has&nbsp;changed.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;<br>
&nbsp;&nbsp;size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&lt;SPAN&nbsp;class=115051009-12052005&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;color=#0000ff&nbsp;size=2&gt;--&nbsp;<br>
&nbsp;&nbsp;Jerome&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
