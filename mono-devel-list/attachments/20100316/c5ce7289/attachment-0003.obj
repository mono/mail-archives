using Mono.Simd;
using System;
public class SumTest {
	public static unsafe void Main() {
		int size = 16*16;
		int[] a = new int[size];
		for (int i = 0; i < size; i++)
			a[i] = 1;
		int result;
		fixed (int* addr_a = a) {
			result = sum(addr_a, size);
		}
		if (result == size)
			Console.WriteLine("Testing: OK");
		else
			Console.WriteLine("Testing: FAIL");

	}
	public static unsafe int sum(int* a, int size) {
		Vector4i temp = new Vector4i();
		Vector4i* p = (Vector4i*) a;
		for (int i = 0; i < size/4; i++) {
			temp += *p;
			p += 1;
		}
		return temp.X + temp.Y + temp.Z + temp.W;
	}
}