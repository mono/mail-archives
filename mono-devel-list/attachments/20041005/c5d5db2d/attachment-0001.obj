# RPM specfile for monodoc module
# Generated Fri Jul  2 15:54:11 2004 GMT by Ximian build system
# $Id: bb_do,v 1.241.4.2 2004/03/19 23:24:35 v_thunder Exp $
# from $Id: ximian-build.conf,v 1.57 2004/06/29 22:20:29 duncan Exp $

%define nam	monodoc
%define ver	1.0.2
%define licensedir	%{_datadir}/licenses/%{nam}-%{ver}
%define ximrev	0

Name:     	monodoc
Version: 	1.0.2
Release:	1.ximian.8.0
Vendor:		Ximian, Inc.
Distribution:	Ximian GNOME for Red Hat Linux 9 / i386
Copyright:	GPL
BuildRoot:	/var/tmp/%{nam}-%{ver}-root
Docdir:         /usr/share/doc

URL:		http://go-mono.com
Source0:	monodoc-1.0.2.tar.gz
BuildRequires:	gtk-sharp-gapi >= 0.98
BuildRequires:	mono-web-forms
BuildRequires:	mono-web-services
BuildRequires:	mono-ziplib
Summary:	Monodoc is a documentation browsen writtten in C#
Group:		Development/Tools
Provides:	ximian-monodoc = %{?epoch:%{epoch}:}%{version}-%{?ximrev:%{ximrev}}%{!?ximrev:%{release}}
Provides: 	mono(monodoc) = 1.0.0.0 

%description

            Monodoc is a documentation browser for the Mono
            Project. It's written in C# using the GTK# libraries.
          

%files
%defattr(-, root, root)
/usr/lib/mono/gac/monodoc/1.0.0.0*/*
/usr/bin/monodoc
/usr/bin/mod
/usr/lib/monodoc/assembler.exe
/usr/lib/monodoc/browser.exe
/usr/lib/monodoc/mod.exe
/usr/lib/monodoc/monodoc.xml
/usr/lib/monodoc/normalize.exe
#/usr/lib/monodoc/monodoc.index
/usr/lib/monodoc/sources/cs-errors.source
/usr/lib/monodoc/sources/cs-errors.tree
/usr/lib/monodoc/sources/cs-errors.zip
/usr/lib/monodoc/sources/ecma334.source
/usr/lib/monodoc/sources/ecma334.tree
/usr/lib/monodoc/sources/ecma334.zip
/usr/lib/monodoc/sources/gecko-sharp-docs.source
/usr/lib/monodoc/sources/gecko-sharp-docs.tree
/usr/lib/monodoc/sources/gecko-sharp-docs.zip
/usr/lib/monodoc/sources/gtk-sharp-docs.source
/usr/lib/monodoc/sources/gtk-sharp-docs.tree
/usr/lib/monodoc/sources/gtk-sharp-docs.zip
/usr/lib/monodoc/sources/monohb.source
/usr/lib/monodoc/sources/monohb.tree
/usr/lib/monodoc/sources/monohb.zip
/usr/lib/monodoc/sources/Mono.source
/usr/lib/monodoc/sources/Mono.tree
/usr/lib/monodoc/sources/Mono.zip
/usr/lib/monodoc/sources/netdocs.source
/usr/lib/monodoc/sources/netdocs.tree
/usr/lib/monodoc/sources/netdocs.zip
/usr/lib/monodoc/sources/Novell.source
/usr/lib/monodoc/sources/Novell.tree
/usr/lib/monodoc/sources/Novell.zip
/usr/lib/monodoc/sources/nunit-docs.source
/usr/lib/monodoc/sources/nunit-docs.tree
/usr/lib/monodoc/sources/nunit-docs.zip
/usr/lib/monodoc/updater.exe
/usr/share/applications/monodoc.desktop
/usr/share/pixmaps/monodoc.png
/usr/lib/mono/gtk-sharp/monodoc.dll
/usr/lib/pkgconfig/monodoc.pc
/usr/lib/monodoc/validate.exe

%post
#!/bin/sh monodoc --make-index

# $RPM_COMMAND is an environment variable used by the Ximian build
# system to control the build process with finer granularity than RPM
# normally allows.  This specfile will function as expected by RPM if
# $RPM_COMMAND is unset.  If you are not the Ximian build system,
# feel free to ignore it.

%prep
case "${RPM_COMMAND:-all}" in
dist)
%setup  -q -D -n monodoc-1.0.2
    ;;
all)
%setup  -q -n monodoc-1.0.2
    ;;
esac

%build
MAKE=${MAKE:-make}
RPM_COMMAND=${RPM_COMMAND:-all}
DESTDIR=${DESTDIR:-"$RPM_BUILD_ROOT"}
ARCH=%{_target_platform}
export MAKE RPM_COMMAND DESTDIR ARCH
case "$RPM_COMMAND" in
prepare|all)
    ./configure --prefix=/usr --sysconfdir=/etc --mandir=/usr/share/man --infodir=/usr/share/info --localstatedir=/var
    ;;
esac
case "$RPM_COMMAND" in
clean|all)
    if [ "/" != "$DESTDIR" ]; then
	rm -rf "$DESTDIR"
    fi
    ;;
esac
case "$RPM_COMMAND" in
build|all)
    ${MAKE}
    ;;
esac

%install
MAKE=${MAKE:-make}
DESTDIR=${DESTDIR:-"$RPM_BUILD_ROOT"}
# export DESTDIR
case "${RPM_COMMAND:-all}" in
install|all)
    ${MAKE} install DESTDIR=${DESTDIR}
    ;;
esac
rm -f ${RPM_BUILD_ROOT}/usr/lib/mono/gtk-sharp/monodoc.dll
ln -sf monodoc.dll ${RPM_BUILD_ROOT}/usr/lib/mono/gtk-sharp/monodoc.dll

%clean
DESTDIR=${DESTDIR:-"$RPM_BUILD_ROOT"}
export DESTDIR
case "${RPM_COMMAND:-all}" in
clean|all)
    if [ "/" != "$DESTDIR" ]; then
	rm -rf "$DESTDIR"
    fi
    ;;
esac


%changelog
* Fri Jul 2 2004 Ximian, Inc.

- Version: 1.0-1.ximian.6.0
- Summary: New build.
- New automated build.

