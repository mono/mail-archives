<tt>
&lt;div&nbsp;style=&quot;font-size:13px;font-family:arial,sans-serif&quot;&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&gt;&nbsp; Hi,&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&gt;&nbsp; We&#39;re&nbsp;working&nbsp;on&nbsp;implementation&nbsp;of&nbsp;Mono&nbsp;JIT/ARM&nbsp;for&nbsp;Native&nbsp;Client,&nbsp;and&nbsp;want&nbsp;to&nbsp;discuss&nbsp;certain&nbsp;details&nbsp;about&nbsp;design&nbsp;of&nbsp;our&nbsp;solution.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&gt;&nbsp; Native&nbsp;Client&#39;s&nbsp;sandboxing&nbsp;mechanism,&nbsp;being&nbsp;a&nbsp;SFI&nbsp;solution,&nbsp;has&nbsp;rather&nbsp;strict&nbsp; limitations&nbsp;on&nbsp;how&nbsp;verifiable&nbsp;machine&nbsp;code&nbsp;may&nbsp;look&nbsp;like.&nbsp;To&nbsp;be&nbsp;precise:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&gt;&nbsp; O&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;ur&nbsp;idea&nbsp;is&nbsp;to&nbsp;emit&nbsp;per-method&nbsp;(or&nbsp;per&nbsp;class?)&nbsp;&quot;jump&nbsp;table&quot;&nbsp;somewhere&nbsp;in&nbsp;.data,&nbsp;which&nbsp;contains&nbsp;list&nbsp;of&nbsp;all relocations,&nbsp;and&nbsp;use&nbsp;some&nbsp;register&nbsp;to&nbsp;point&nbsp;to&nbsp;this&nbsp;table.&lt;/span&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&gt;&nbsp;So&nbsp;for&nbsp;example,&nbsp;trampoline&nbsp;like&nbsp;this:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&lt;div&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; ldr&nbsp;ip,&nbsp;[pc,&nbsp;#0]&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&gt;&nbsp;&lt;/span&gt;b&nbsp;skip&lt;/div&gt;&lt;div&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; .word&nbsp;target&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp; &nbsp; &nbsp; skip:&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;mov&nbsp;lr,&nbsp;pc&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;mov&nbsp;pc,&nbsp;ip&lt;/div&gt;&lt;div&gt;&gt;&nbsp;would&nbsp;become&nbsp;(if&nbsp;r10&nbsp;is&nbsp;used&nbsp;as&nbsp;jump&nbsp;table&nbsp;base&nbsp;register):&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp; &nbsp; &nbsp; .align&nbsp;4&nbsp;#&nbsp;for&nbsp;NaCl&nbsp;only&lt;/div&gt;&lt;div&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ldr&nbsp;ip,&nbsp;[r10,&nbsp;#32]&nbsp;#&nbsp;unique&nbsp;(per-method&nbsp;or&nbsp;class)&nbsp;index&nbsp;for&nbsp;every&nbsp;callsite&lt;/div&gt;&lt;div&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nop  #&nbsp;for&nbsp;NaCl&nbsp;only,&nbsp;to&nbsp;have&nbsp;bl&nbsp;at&nbsp;bundle&nbsp;end&lt;/div&gt;&lt;div&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bic&nbsp;r10,&nbsp;r10,&nbsp;#0xc000000f&nbsp;#&nbsp;for&nbsp;NaCl&nbsp;only&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bl&nbsp;ip&nbsp;#&nbsp;or&nbsp;blx&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&gt;&nbsp; r10&nbsp;could&nbsp;point&nbsp;somewhere&nbsp;in&nbsp;method&nbsp;metadata,&nbsp;where&nbsp;its&nbsp;relocation&nbsp;table&nbsp;is&nbsp;stored.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;<br>
&gt;&nbsp;So&nbsp;our&nbsp;question&nbsp;is&nbsp;if&nbsp;someone&nbsp;sees&nbsp;problem&nbsp;with&nbsp;such&nbsp;approach,&nbsp;or&nbsp;could&nbsp;suggest&nbsp;better&nbsp;alternative.&nbsp;Also&nbsp;advises&nbsp;which&nbsp;register&nbsp;could&nbsp;be&nbsp;used&nbsp;as&nbsp;the&nbsp;jump&nbsp;table&nbsp;base,&nbsp;and&nbsp;where&nbsp;&gt;&nbsp;to&nbsp;store&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;<br>
&gt;&nbsp;such&nbsp;a&nbsp;table&nbsp;(maybe&nbsp;patch&nbsp;info?)&nbsp;are&nbsp;very&nbsp;welcome.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;Hi,&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;ARM&nbsp;has&nbsp;PC&nbsp;relative&nbsp;addressing,&nbsp;so&nbsp;it&nbsp;would&nbsp;be&nbsp;easier&nbsp;to&nbsp;use&nbsp;that&nbsp;instead&nbsp;of&nbsp;reserving&nbsp;a&nbsp;register.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:13px&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Zoltan&lt;/div&gt;&lt;/div&gt;<br>

</tt>
