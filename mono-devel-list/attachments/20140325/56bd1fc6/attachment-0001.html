<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;This&nbsp;is&nbsp;a&nbsp;slightly&nbsp;different&nbsp;one&nbsp;than&nbsp;the&nbsp;group&nbsp;we&nbsp;are&nbsp;seeing&nbsp;but&nbsp;my&nbsp;guess&nbsp;is&nbsp;they&nbsp;are&nbsp;related.&nbsp;There&nbsp;is&nbsp;a&nbsp;pattern&nbsp;of&nbsp;usage&nbsp;that&nbsp;causes&nbsp;corrupt&nbsp;heaps.&nbsp;We&nbsp;are&nbsp;also&nbsp;seeing&nbsp;dereferences&nbsp;of&nbsp;pointers&nbsp;in&nbsp;sgen&nbsp;going&nbsp;of&nbsp;to&nbsp;neverneverland.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Mar&nbsp;25,&nbsp;2014&nbsp;at&nbsp;6:05&nbsp;PM,&nbsp;David&nbsp;Schmitt&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:david@dasz.at&quot;&nbsp;target=&quot;_blank&quot;&gt;david@dasz.at&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Thanks&nbsp;to&nbsp;guidance&nbsp;from&nbsp;Greg&nbsp;Young,&nbsp;I&#39;ve&nbsp;been&nbsp;able&nbsp;to&nbsp;isolate&nbsp;a&nbsp;proper&nbsp;backtrace&nbsp;from&nbsp;nunit-console:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Program&nbsp;received&nbsp;signal&nbsp;SIGSEGV,&nbsp;Segmentation&nbsp;fault.&lt;br&gt;<br>
[Switching&nbsp;to&nbsp;Thread&nbsp;0x7fffef97a700&nbsp;(LWP&nbsp;26908)]&lt;br&gt;<br>
slow_object_get_size&nbsp;(o=0x7fffea860010,&nbsp;vtable=&lt;optimized&nbsp;out&gt;)&nbsp;at&nbsp;../../mono/metadata/sgen-gc.h:&lt;u&gt;&lt;/u&gt;722&lt;br&gt;<br>
722&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&nbsp;else&nbsp;if&nbsp;(klass-&gt;rank)&nbsp;{&lt;br&gt;<br>
(gdb)&nbsp;backtrace&lt;br&gt;<br>
#0&nbsp; slow_object_get_size&nbsp;(o=0x7fffea860010,&nbsp;vtable=&lt;optimized&nbsp;out&gt;)&nbsp;at&nbsp;../../mono/metadata/sgen-gc.h:&lt;u&gt;&lt;/u&gt;722&lt;br&gt;<br>
#1&nbsp; sgen_par_object_get_size&nbsp;(o=0x7fffea860010,&nbsp;vtable=&lt;optimized&nbsp;out&gt;)&nbsp;at&nbsp;../../mono/metadata/sgen-gc.h:&lt;u&gt;&lt;/u&gt;766&lt;br&gt;<br>
#2&nbsp; sgen_safe_object_get_size&nbsp;(obj=0x7fffea860010)&nbsp;at&nbsp;../../mono/metadata/sgen-gc.h:&lt;u&gt;&lt;/u&gt;777&lt;br&gt;<br>
#3&nbsp; sgen_major_is_object_alive&nbsp;(object=0x7fffea860010)&nbsp;at&nbsp;sgen-gc.c:3589&lt;br&gt;<br>
#4&nbsp; sgen_is_object_alive_for_&lt;u&gt;&lt;/u&gt;current_gen&nbsp;(object=0x7fffea860010&nbsp;&quot;\b\020\206\352\377\177&quot;)&nbsp;at&nbsp;sgen-gc.c:3624&lt;br&gt;<br>
#5&nbsp; mark_ephemerons_in_range&nbsp;(ctx=...)&nbsp;at&nbsp;sgen-gc.c:3802&lt;br&gt;<br>
#6&nbsp; 0x00000000005d1d2c&nbsp;in&nbsp;finish_gray_stack&nbsp;(generation=generation@entry=&lt;u&gt;&lt;/u&gt;1,&nbsp;queue=0x972f00)&nbsp;at&nbsp;sgen-gc.c:1931&lt;br&gt;<br>
#7&nbsp; 0x00000000005d3b65&nbsp;in&nbsp;major_finish_collection&nbsp;(reason=0x705072&nbsp;&quot;user&nbsp;request&quot;,&nbsp;old_next_pin_slot=108,&nbsp;scan_mod_union=0)&nbsp;at&nbsp;sgen-gc.c:3164&lt;br&gt;<br>
#8&nbsp; 0x00000000005d4182&nbsp;in&nbsp;major_do_collection&nbsp;(reason=&lt;optimized&nbsp;out&gt;)&nbsp;at&nbsp;sgen-gc.c:3305&lt;br&gt;<br>
#9&nbsp; major_do_collection&nbsp;(reason=0x705072&nbsp;&quot;user&nbsp;request&quot;)&nbsp;at&nbsp;sgen-gc.c:3287&lt;br&gt;<br>
#10&nbsp;0x00000000005d7677&nbsp;in&nbsp;sgen_perform_collection&nbsp;(requested_size=requested_&lt;u&gt;&lt;/u&gt;size@entry=0,&nbsp;generation_to_collect=&lt;u&gt;&lt;/u&gt;generation_to_collect@entry=1,&lt;br&gt;<br>
 &nbsp; &nbsp;reason=reason@entry=0x705072&nbsp;&quot;user&nbsp;request&quot;,&nbsp;wait_to_finish=wait_to_finish@&lt;u&gt;&lt;/u&gt;entry=1)&nbsp;at&nbsp;sgen-gc.c:3499&lt;br&gt;<br>
#11&nbsp;0x00000000005d7cf8&nbsp;in&nbsp;mono_gc_collect&nbsp;(generation=1)&nbsp;at&nbsp;sgen-gc.c:4623&lt;br&gt;<br>
#12&nbsp;0x000000000059e3bb&nbsp;in&nbsp;unload_thread_main&nbsp;(arg=0x4a50380)&nbsp;at&nbsp;appdomain.c:2334&lt;br&gt;<br>
#13&nbsp;0x000000000061e871&nbsp;in&nbsp;thread_start_routine&nbsp;(args=args@entry=0x9cfbb0)&nbsp;at&nbsp;wthreads.c:294&lt;br&gt;<br>
#14&nbsp;0x000000000062e810&nbsp;in&nbsp;inner_start_thread&nbsp;(arg=0x4a4d5b0)&nbsp;at&nbsp;mono-threads-posix.c:49&lt;br&gt;<br>
#15&nbsp;0x00007ffff7539b50&nbsp;in&nbsp;start_thread&nbsp;()&nbsp;from&nbsp;/lib/x86_64-linux-gnu/&lt;u&gt;&lt;/u&gt;libpthread.so.0&lt;br&gt;<br>
#16&nbsp;0x00007ffff72840ed&nbsp;in&nbsp;clone&nbsp;()&nbsp;from&nbsp;/lib/x86_64-linux-gnu/libc.so.&lt;u&gt;&lt;/u&gt;6&lt;br&gt;<br>
#17&nbsp;0x0000000000000000&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
(gdb)&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
I&#39;ll&nbsp;retry&nbsp;with&nbsp;master&nbsp;next.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&nbsp;David&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;25.03.2014&nbsp;15:56,&nbsp;Zoltan&nbsp;Varga&nbsp;wrote:&lt;br&gt;<br>
&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;<br>
Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; Could&nbsp;you&nbsp;try&nbsp;with&nbsp;master&nbsp;or&nbsp;the&nbsp;mono-3.4.0-branch&nbsp;?&nbsp;If&nbsp;the&nbsp;problem&lt;br&gt;<br>
is&nbsp;still&nbsp;there,&nbsp;please&nbsp;log&nbsp;a&nbsp;bug&nbsp;report&nbsp;with&nbsp;reproduction&nbsp;instructions/a&lt;br&gt;<br>
testcase&nbsp;if&nbsp;possible.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Zoltan&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Tue,&nbsp;Mar&nbsp;25,&nbsp;2014&nbsp;at&nbsp;10:44&nbsp;AM,&nbsp;David&nbsp;Schmitt&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:david@dasz.at&quot;&nbsp;target=&quot;_blank&quot;&gt;david@dasz.at&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;<br>
&lt;mailto:&lt;a&nbsp;href=&quot;mailto:david@dasz.at&quot;&nbsp;target=&quot;_blank&quot;&gt;david@dasz.at&lt;/a&gt;&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;I&#39;ve&nbsp;finally&nbsp;updated&nbsp;to&nbsp;3.2.8&nbsp;(recompiled&nbsp;from&nbsp;debian&nbsp;experimental)&lt;br&gt;<br>
 &nbsp; &nbsp;and&nbsp;am&nbsp;now&nbsp;triggering&nbsp;the&nbsp;attached&nbsp;segfault&nbsp;approximately&nbsp;every&lt;br&gt;<br>
 &nbsp; &nbsp;second&nbsp;run.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;For&nbsp;further&nbsp;analysis&nbsp;I&nbsp;could&nbsp;run&nbsp;this&nbsp;under&nbsp;master;&nbsp;try&nbsp;to&nbsp;upgrade&lt;br&gt;<br>
 &nbsp; &nbsp;nunit;&nbsp;try&nbsp;to&nbsp;get&nbsp;more&nbsp;debugging&nbsp;symbols&nbsp;into&nbsp;the&nbsp;package;&nbsp;try&nbsp;to&lt;br&gt;<br>
 &nbsp; &nbsp;reduce&nbsp;the&nbsp;amount&nbsp;of&nbsp;code&nbsp;running&nbsp;to&nbsp;trigger&nbsp;the&nbsp;problem.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;The&nbsp;project&nbsp;is&nbsp;open&nbsp;source,&nbsp;so&nbsp;if&nbsp;that&nbsp;would&nbsp;be&nbsp;easier&nbsp;I&nbsp;can&nbsp;provide&lt;br&gt;<br>
 &nbsp; &nbsp;public&nbsp;repro&nbsp;steps&nbsp;too.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;Please&nbsp;advise,&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;Thanks&nbsp;David&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
 &nbsp; &nbsp;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
 &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.&lt;u&gt;&lt;/u&gt;com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;<br>
 &nbsp; &nbsp;&lt;mailto:&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.&lt;u&gt;&lt;/u&gt;ximian.com&lt;/a&gt;&gt;&lt;br&gt;<br>
 &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/&lt;u&gt;&lt;/u&gt;mailman/listinfo/mono-devel-&lt;u&gt;&lt;/u&gt;list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;Le&nbsp;doute&nbsp;n&#39;est&nbsp;pas&nbsp;une&nbsp;condition&nbsp;agréable,&nbsp;mais&nbsp;la&nbsp;certitude&nbsp;est&nbsp;absurde.<br>
&lt;/div&gt;<br>

</tt>
