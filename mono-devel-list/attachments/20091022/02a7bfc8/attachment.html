<tt>
Hi,&lt;br&gt;&lt;br&gt;Today&nbsp;landed&nbsp;the&nbsp;initial&nbsp;version&nbsp;(r144686)&nbsp;of&nbsp;the&nbsp;MonoError&nbsp;API&nbsp;that&nbsp;will&nbsp;eventually&nbsp;unify&nbsp;all&nbsp;error&nbsp;handling&nbsp;code&nbsp;in&nbsp;the&nbsp;runtime.&lt;br&gt;Here&nbsp;is&nbsp;an&nbsp;overview&nbsp;of&nbsp;how&nbsp;it&amp;#39;s&nbsp;meant&nbsp;to&nbsp;be&nbsp;used&nbsp;across&nbsp;the&nbsp;runtime.&lt;br&gt;&lt;br&gt;<br>
The&nbsp;central&nbsp;structure&nbsp;is&nbsp;MonoError,&nbsp;which&nbsp;carry&nbsp;success/error&nbsp;result&nbsp;and&nbsp;all&nbsp;details&nbsp;about&nbsp;what&nbsp;went&nbsp;wrong.&lt;br&gt;&lt;br&gt;The&nbsp;usage&nbsp;model&nbsp;is&nbsp;that&nbsp;a&nbsp;MonoError&nbsp;object&nbsp;is&nbsp;defined&nbsp;at&nbsp;entry&nbsp;point&nbsp;functions&nbsp;or&nbsp;error&nbsp;contexts.&nbsp;Entry&nbsp;point&nbsp;functions&lt;br&gt;<br>
are&nbsp;things&nbsp;like&nbsp;icalls&nbsp;or&nbsp;trampoline&amp;#39;d&nbsp;functions;&nbsp;an&nbsp;error&nbsp;context&nbsp;is,&nbsp;for&nbsp;example,&nbsp;type&nbsp;loading,&nbsp;which&nbsp;has&nbsp;to&nbsp;trap&nbsp;the&nbsp;error&lt;br&gt;to&nbsp;itself.&lt;br&gt;&lt;br&gt;All&nbsp;function&nbsp;that&nbsp;can&nbsp;set&nbsp;an&nbsp;error&nbsp;must&nbsp;call&nbsp;mono_error_init&nbsp;or&nbsp;mono_error_init_flags&nbsp;at&nbsp;its&nbsp;very&nbsp;beginning.&nbsp;This&nbsp;sets&nbsp;the&nbsp;result&lt;br&gt;<br>
as&nbsp;success&nbsp;so&nbsp;nothing&nbsp;else&nbsp;needs&nbsp;to&nbsp;be&nbsp;done&nbsp;unless&nbsp;an&nbsp;error&nbsp;happens.&nbsp;Error&nbsp;setting&nbsp;functions&nbsp;are&nbsp;modeled&nbsp;around&nbsp;the&nbsp;managed&lt;br&gt;exceptions&nbsp;that&nbsp;might&nbsp;be&nbsp;thrown&nbsp;in&nbsp;the&nbsp;end.&lt;br&gt;&lt;br&gt;After&nbsp;all&nbsp;call&nbsp;sites&nbsp;that&nbsp;pass&nbsp;a&nbsp;MonoError&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;call&nbsp;to&nbsp;mono_error_ok&nbsp;to&nbsp;check&nbsp;the&nbsp;result.&nbsp;If&nbsp;an&nbsp;error&nbsp;mono_error_cleanup&lt;br&gt;<br>
must&nbsp;be&nbsp;called&nbsp;as&nbsp;well.&lt;br&gt;&lt;br&gt;The&nbsp;idea&nbsp;is&nbsp;to&nbsp;hook&nbsp;up&nbsp;all&nbsp;entrypoints&nbsp;and&nbsp;embedding&nbsp;API&nbsp;calls&nbsp;with&nbsp;a&nbsp;MonoError&nbsp;parameter.&nbsp;For&nbsp;public&nbsp;API&nbsp;functions&nbsp;we&amp;#39;ll&nbsp;add&lt;br&gt;a&nbsp;_checked&nbsp;version&nbsp;of&nbsp;them&nbsp;and&nbsp;mark&nbsp;the&nbsp;former&nbsp;as&nbsp;deprecated.&nbsp;For&nbsp;internal&nbsp;functions&nbsp;we&amp;#39;ll&nbsp;just&nbsp;change&nbsp;the&nbsp;signature.&lt;br&gt;<br>
&lt;br&gt;Besides&nbsp;that,&nbsp;with&nbsp;MonoError&nbsp;in&nbsp;place,&nbsp;the&nbsp;plan&nbsp;is&nbsp;to&nbsp;remove&nbsp;all&nbsp;possible&nbsp;asserts&nbsp;from&nbsp;the&nbsp;runtime&nbsp;to&nbsp;make&nbsp;things&nbsp;less&nbsp;crashy.&lt;br&gt;&lt;br&gt;There&nbsp;are&nbsp;a&nbsp;few&nbsp;concerns&nbsp;about&nbsp;how&nbsp;this&nbsp;currently&nbsp;are&nbsp;that&nbsp;deserves&nbsp;to&nbsp;be&nbsp;discussed:&lt;br&gt;<br>
&lt;br&gt;-Should&nbsp;we&nbsp;backport&nbsp;this&nbsp;to&nbsp;2.6?&nbsp;To&nbsp;me&nbsp;it&nbsp;makes&nbsp;sense&nbsp;to&nbsp;do&nbsp;so&nbsp;for&nbsp;ML2,&nbsp;but&nbsp;without&nbsp;exposing&nbsp;new&nbsp;API&nbsp;entrypoints.&lt;br&gt;&lt;br&gt;-Right&nbsp;now&nbsp;the&nbsp;whole&nbsp;API&nbsp;is&nbsp;made&nbsp;of&nbsp;functions,&nbsp;should&nbsp;we&nbsp;move&nbsp;the&nbsp;functions&nbsp;used&nbsp;in&nbsp;the&nbsp;fast&nbsp;path&nbsp;to&nbsp;macros?&nbsp;This&nbsp;is&nbsp;basically&lt;br&gt;<br>
mono_error_init&nbsp;and&nbsp;mono_error_ok.&lt;br&gt;&lt;br&gt;Please&nbsp;review&nbsp;the&nbsp;change&nbsp;and&nbsp;give&nbsp;some&nbsp;feedback&nbsp;about&nbsp;the&nbsp;design.&nbsp;r144688&nbsp;changes&nbsp;mono_class_inflate_generic_type&nbsp;as&nbsp;an&nbsp;example.&lt;br&gt;&lt;br&gt;Cheers,&lt;br&gt;Rodrigo&lt;br&gt;<br>

</tt>
