<tt>
Hello&nbsp;all,&lt;br&gt;&lt;br&gt;Since&nbsp;both&nbsp;ResourceInfo&nbsp;and&nbsp;ResourceCacheItem&nbsp;are&nbsp;used&nbsp;for&nbsp;caching,&nbsp;I&nbsp;think&nbsp;they&nbsp;are&nbsp;not&nbsp;created&nbsp;a&nbsp;lot.&nbsp;Thus&nbsp;I&nbsp;don&amp;#39;t&nbsp;think&nbsp;their&nbsp;creation/collection&nbsp;pose&nbsp;a&nbsp;pressure&nbsp;on&nbsp;GC.&lt;br&gt;&lt;br&gt;In&nbsp;the&nbsp;same&nbsp;time&nbsp;ResourceReader&nbsp;can&nbsp;be&nbsp;under&nbsp;heavy&nbsp;pressure&nbsp;and&nbsp;utilize&nbsp;its&nbsp;cache&nbsp;a&nbsp;lot.&lt;br&gt;<br>
Once&nbsp;the&nbsp;cache&nbsp;data&nbsp;is&nbsp;converted&nbsp;to&nbsp;a&nbsp;struct&nbsp;their&nbsp;is&nbsp;a&nbsp;great&nbsp;potential&nbsp;that&nbsp;it&nbsp;will&nbsp;be&nbsp;boxed&nbsp;somewhere&nbsp;(see&nbsp;Andy&amp;#39;s&nbsp;comments&nbsp;below)&nbsp;and&nbsp;this&nbsp;may&nbsp;happen&nbsp;in&nbsp;a&nbsp;common&nbsp;flow.&lt;br&gt;&lt;br&gt;I&amp;#39;m&nbsp;not&nbsp;convinced&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;performance&nbsp;improvement,&nbsp;and&nbsp;there&nbsp;is&nbsp;a&nbsp;great&nbsp;potential&nbsp;that&nbsp;after&nbsp;this&nbsp;optimization&nbsp;the&nbsp;performance&nbsp;will&nbsp;even&nbsp;degrade.&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;May&nbsp;29,&nbsp;2008&nbsp;at&nbsp;12:59&nbsp;PM,&nbsp;Andy&nbsp;Hume&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:andyhume32@yahoo.co.uk&quot;&gt;andyhume32@yahoo.co.uk&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
For&nbsp;full&nbsp;no-allocation&nbsp;behaviour&nbsp;:-)&nbsp;the&nbsp;IList&nbsp;passed&nbsp;to&lt;br&gt;<br>
LoadResourceValues&nbsp;needs&nbsp;to&nbsp;be&nbsp;typed&nbsp;as&nbsp;its&nbsp;real&nbsp;Generic&nbsp;type,&nbsp;otherwise&lt;br&gt;<br>
ResourceCacheItem&nbsp;is&nbsp;boxed&nbsp;on&nbsp;store.Add.&nbsp;&amp;nbsp;Don&amp;#39;t&nbsp;know&nbsp;how&nbsp;often&nbsp;that&lt;br&gt;<br>
operation&nbsp;occurs...&lt;br&gt;<br>
&lt;br&gt;<br>
Andy&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
e.g.&nbsp;[[&lt;br&gt;<br>
Index:&nbsp;ResourceReader.cs&lt;br&gt;<br>
===================================================================&lt;br&gt;<br>
---&nbsp;ResourceReader.cs&nbsp;&amp;nbsp;&nbsp;(revision&nbsp;104379)&lt;br&gt;<br>
+++&nbsp;ResourceReader.cs&nbsp;&amp;nbsp;&nbsp;(working&nbsp;copy)&lt;br&gt;<br>
@@&nbsp;-409,7&nbsp;+409,11&nbsp;@@&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;return&nbsp;obj;&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
+#if&nbsp;NET_2_0&lt;br&gt;<br>
+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;void&nbsp;LoadResourceValues&nbsp;(IList&amp;lt;ResourceCacheItem&amp;gt;&nbsp;store)&lt;br&gt;<br>
+#else&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;void&nbsp;LoadResourceValues&nbsp;(IList&nbsp;store)&lt;br&gt;<br>
+#endif&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;ResourceInfo&nbsp;ri;&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;ResourceCacheItem&nbsp;rci;&lt;br&gt;<br>
]]&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;-----Original&nbsp;Message-----&lt;br&gt;<br>
&amp;gt;&nbsp;From:&nbsp;&lt;a&nbsp;href=&quot;mailto:mono-devel-list-bounces@lists.ximian.com&quot;&gt;mono-devel-list-bounces@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;[mailto:&lt;a&nbsp;href=&quot;mailto:mono-devel-list-bounces@lists.ximian.com&quot;&gt;mono-devel-list-bounces@lists.ximian.com&lt;/a&gt;]&nbsp;On&nbsp;Behalf&lt;br&gt;<br>
&amp;gt;&nbsp;Of&nbsp;Marek&nbsp;Habersack&lt;br&gt;<br>
&amp;gt;&nbsp;Sent:&nbsp;28&nbsp;May&nbsp;2008&nbsp;22:36&lt;br&gt;<br>
&amp;gt;&nbsp;To:&nbsp;&lt;a&nbsp;href=&quot;mailto:mono-devel-list@lists.ximian.com&quot;&gt;mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Subject:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;ResourceReader&nbsp;patch&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&lt;br&gt;<br>
&amp;gt;&nbsp;Hash:&nbsp;SHA1&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;Wed,&nbsp;28&nbsp;May&nbsp;2008&nbsp;10:21:19&nbsp;+0200&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;quot;Andreas&nbsp;Nahr&amp;quot;&nbsp;&amp;lt;ClassDevelopment@A-SoftTech.com&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Is&nbsp;there&nbsp;any&nbsp;reason&nbsp;for&nbsp;not&nbsp;using&nbsp;structs?&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;No&nbsp;sense&nbsp;in&nbsp;needlessly&nbsp;torturing&nbsp;the&nbsp;GC&nbsp;;)&lt;br&gt;<br>
&amp;gt;&nbsp;Makes&nbsp;sense&nbsp;-&nbsp;applied&nbsp;in&nbsp;r104334,&nbsp;thanks!&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;marek&lt;br&gt;<br>
&amp;gt;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;<br>
&amp;gt;&nbsp;Version:&nbsp;GnuPG&nbsp;v2.0.4-svn0&nbsp;(GNU/Linux)&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;iD8DBQFIPdA1q3909GIf5uoRAlsvAJ98jcbhTtuNUudBHybCR4xBCD3k1QCfYngI&lt;br&gt;<br>
&amp;gt;&nbsp;Qougwstb8DzXROt6uTn7aHc=&lt;br&gt;<br>
&amp;gt;&nbsp;=Gris&lt;br&gt;<br>
&amp;gt;&nbsp;-----END&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;<br>
&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Regards,&lt;br&gt;Konstantin&nbsp;Triger<br>

</tt>
