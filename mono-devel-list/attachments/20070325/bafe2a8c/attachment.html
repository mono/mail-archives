<tt>
Ok,&nbsp;more&nbsp;performance&nbsp;;)&nbsp;The&nbsp;SwapInt()&nbsp;method&nbsp;is&nbsp;now&nbsp;40%&nbsp;faster&nbsp;than<br>
when&nbsp;i&nbsp;originally&nbsp;started&nbsp;and&nbsp;SwapLong()&nbsp;is&nbsp;now&nbsp;50%&nbsp;faster&nbsp;than&nbsp;the<br>
original&nbsp;method.&nbsp;This&nbsp;means&nbsp;i&nbsp;do&nbsp;15&nbsp;iterations&nbsp;of&nbsp;converting&nbsp;a&nbsp;long&nbsp;in&nbsp;8500ms,&nbsp;which&nbsp;isn&amp;#39;t&nbsp;that&nbsp;much&nbsp;slower&nbsp;than&nbsp;the&nbsp;MS&nbsp;one&nbsp;(6700ms)&lt;br&gt;<br>
&lt;br&gt;<br>
All&nbsp;i&nbsp;did&nbsp;this&nbsp;time&nbsp;was&nbsp;remove&nbsp;the&nbsp;extra&nbsp;bit&nbsp;shifts.&nbsp;Instead&nbsp;of<br>
shifting&nbsp;across&nbsp;by&nbsp;48,&nbsp;then&nbsp;&amp;amp;&amp;#39;ing&nbsp;then&nbsp;shifting&nbsp;back&nbsp;by&nbsp;8&nbsp;i&nbsp;just<br>
shifted&nbsp;across&nbsp;by&nbsp;40&nbsp;and&nbsp;&amp;amp;&amp;#39;ed&nbsp;there.&lt;br&gt;<br>
&lt;br&gt;<br>
Patch&nbsp;attached.&nbsp;Let&nbsp;me&nbsp;know&nbsp;if&nbsp;it&amp;#39;s&nbsp;OK&nbsp;to&nbsp;commit.&lt;br&gt;&lt;br&gt;Alan.&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;3/25/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Gareth&nbsp;Pearce&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:tilps.kilm@gmail.com&quot;&gt;tilps.kilm@gmail.com<br>
&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;gt;&nbsp;However,&nbsp;as&nbsp;a&nbsp;comparison,&nbsp;the&nbsp;<br>
&lt;a&nbsp;href=&quot;http://MS.NET&quot;&gt;MS.NET&lt;/a&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;http://MS.NET&quot;&gt;http://MS.NET&lt;/a&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;http://MS.NET&quot;&gt;http://MS.NET&lt;/a&gt;&amp;gt;&nbsp;implementation&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;gt;&nbsp;completes&nbsp;15&nbsp;loops&nbsp;of&nbsp;the&nbsp;benchmark&nbsp;in&nbsp;a&nbsp;mere&nbsp;6718ms&nbsp;;)<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&lt;br&gt;On&nbsp;this&nbsp;point,&nbsp;I&nbsp;suspect&nbsp;AOT&nbsp;compilation&nbsp;of&nbsp;the&nbsp;.Net&nbsp;system&nbsp;assemblies&lt;br&gt;may&nbsp;be&nbsp;making&nbsp;the&nbsp;difference.&amp;nbsp;&amp;nbsp;The&nbsp;AOT&nbsp;might&nbsp;be&nbsp;able&nbsp;to&nbsp;recognize&lt;br&gt;certain&nbsp;patterns&nbsp;are&nbsp;equivalent&nbsp;to&nbsp;rot&nbsp;instructions&nbsp;and&nbsp;replace&nbsp;a&nbsp;bunch<br>
&lt;br&gt;of&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;with&nbsp;a&nbsp;set&nbsp;of&nbsp;unsigned&nbsp;rots.&lt;br&gt;&lt;br&gt;A&nbsp;32bit&nbsp;reorder&nbsp;is&nbsp;rot&nbsp;8&nbsp;on&nbsp;each&nbsp;of&nbsp;the&nbsp;16&nbsp;bit&nbsp;sections&nbsp;and&nbsp;a&nbsp;rot&nbsp;16&nbsp;on&lt;br&gt;the&nbsp;full&nbsp;variable.&amp;nbsp;&amp;nbsp;I&nbsp;think&nbsp;that&nbsp;can&nbsp;be&nbsp;done&nbsp;in&nbsp;3&nbsp;clocks&nbsp;on&nbsp;x86&nbsp;-&nbsp;but&nbsp;my&lt;br&gt;assembly&nbsp;is&nbsp;rusty.<br>
&lt;br&gt;&lt;br&gt;--Gareth&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
