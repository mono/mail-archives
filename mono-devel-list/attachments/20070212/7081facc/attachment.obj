Index: ChangeLog
===================================================================
--- ChangeLog	(revision 72722)
+++ ChangeLog	(working copy)
@@ -1,3 +1,8 @@
+2007-02-13  Jonathan Chambers  <joncham@gmail.com>
+
+	* libtest.c: Add STDCALL to handleref and safe handle functions.
+	Fixes handleref test on windows.
+	
 2007-02-08  Jonathan Chambers  <joncham@gmail.com>
 
 	* libtest.c: Add tests for COM Callable Wrapper marshalling.
Index: libtest.c
===================================================================
--- libtest.c	(revision 72722)
+++ libtest.c	(working copy)
@@ -1917,7 +1917,7 @@
 	return &add_delegate;
 }
 
-int mono_xr (int code)
+STDCALL int mono_xr (int code)
 {
 	printf ("codigo %x\n", code);
 	return code + 1234;
@@ -1930,7 +1930,7 @@
 	int   b;
 } HandleStructs;
 
-int
+STDCALL int
 mono_safe_handle_struct_ref (HandleStructs *x)
 {
 	printf ("Dingus Ref! \n");
@@ -1949,7 +1949,7 @@
 	return 0xf00d;
 }
 
-int
+STDCALL int
 mono_safe_handle_struct (HandleStructs x)
 {
 	printf ("Dingus Standard! \n");
@@ -1972,20 +1972,20 @@
 	void *a;
 } TrivialHandle;
 
-int
+STDCALL int
 mono_safe_handle_struct_simple (TrivialHandle x)
 {
 	printf ("The value is %d\n", x.a);
 	return ((int)x.a) * 2;
 }
 
-int
+STDCALL int
 mono_safe_handle_return ()
 {
 	return 0x1000f00d;
 }
 
-void
+STDCALL void
 mono_safe_handle_ref (void **handle)
 {
 	if (*handle != 0){