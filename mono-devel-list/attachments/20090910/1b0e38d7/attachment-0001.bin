Index: ChangeLog
===================================================================
--- ChangeLog	(revision 140963)
+++ ChangeLog	(working copy)
@@ -1,3 +1,8 @@
+2009-09-10  Jeffrey Stedfast  <fejj@novell.com>
+
+	* io.c (CreateFile): In the directory fallback case, use
+	_wapi_open() again so that IOMAP magic happens.
+
 2009-08-18  Christian Hergert  <chris@dronelabs.com>
 
 	* wthreads.c: Roll back change for thread-id as it "embraces
Index: io.c
===================================================================
--- io.c	(revision 140963)
+++ io.c	(working copy)
@@ -1547,7 +1547,7 @@
 	if (fd == -1 && errno == EISDIR)
 	{
 		/* Try again but don't try to make it writable */
-		fd = open(filename, flags  & ~(O_RDWR|O_WRONLY), perms);
+		fd = _wapi_open (filename, flags & ~(O_RDWR|O_WRONLY), perms);
 	}
 	
 	if (fd == -1) {
