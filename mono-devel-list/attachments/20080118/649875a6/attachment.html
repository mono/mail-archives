<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7652.24&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[Mono-dev]&nbsp;[PATCH]&nbsp;ReadOnlyCollection&amp;lt;T&amp;gt;&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hey&nbsp;Juraj,&lt;BR&gt;<br>
&lt;BR&gt;<br>
The&nbsp;following&nbsp;code:&lt;BR&gt;<br>
&lt;BR&gt;<br>
+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;LAMESPEC:&nbsp;According&nbsp;to&nbsp;the&nbsp;docs,&nbsp;this&nbsp;should&nbsp;return&nbsp;&amp;quot;this&amp;quot;.&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;object&nbsp;ICollection.SyncRoot&nbsp;{&lt;BR&gt;<br>
-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;get&nbsp;{&nbsp;return&nbsp;syncRoot;&nbsp;}&lt;BR&gt;<br>
+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;get&nbsp;{&nbsp;return&nbsp;syncRoot&nbsp;??&nbsp;syncRoot&nbsp;=&nbsp;new&nbsp;object();&nbsp;}&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;BR&gt;<br>
&lt;BR&gt;<br>
is&nbsp;thread&nbsp;unsafe.&nbsp;Thus&nbsp;you&nbsp;may&nbsp;end&nbsp;up&nbsp;with&nbsp;2&nbsp;threads&nbsp;syncing&nbsp;on&nbsp;2&nbsp;different&nbsp;object.&lt;BR&gt;<br>
&lt;BR&gt;<br>
If&nbsp;you&nbsp;want&nbsp;to&nbsp;use&nbsp;a&nbsp;class&nbsp;field&nbsp;as&nbsp;a&nbsp;SyncRoot&nbsp;you&nbsp;should&nbsp;declare&nbsp;it&nbsp;readonly&nbsp;to&nbsp;comply&nbsp;with&nbsp;all&nbsp;the&nbsp;possible&nbsp;CPU&nbsp;architectures&nbsp;and&nbsp;VM&nbsp;implementations.&lt;BR&gt;<br>
&lt;BR&gt;<br>
BTW,&nbsp;even&nbsp;if&nbsp;your&nbsp;implementation&nbsp;would&nbsp;correct,&nbsp;I&nbsp;don't&nbsp;see&nbsp;any&nbsp;advantage&nbsp;over&nbsp;simple&nbsp;&amp;quot;return&nbsp;this;&amp;quot;,&nbsp;even&nbsp;if&nbsp;tests&nbsp;show&nbsp;otherwise.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Regards,&lt;BR&gt;<br>
Kosta&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
-----Original&nbsp;Message-----&lt;BR&gt;<br>
From:&nbsp;mono-devel-list-bounces@lists.ximian.com&nbsp;on&nbsp;behalf&nbsp;of&nbsp;Juraj&nbsp;Skripsky&lt;BR&gt;<br>
Sent:&nbsp;Fri&nbsp;1/18/2008&nbsp;14:34&lt;BR&gt;<br>
To:&nbsp;mono-devel-list@lists.ximian.com&lt;BR&gt;<br>
Subject:&nbsp;[Mono-dev]&nbsp;[PATCH]&nbsp;ReadOnlyCollection&amp;lt;T&amp;gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
Hello,&lt;BR&gt;<br>
&lt;BR&gt;<br>
Attached&nbsp;you'll&nbsp;find&nbsp;a&nbsp;patch&nbsp;and&nbsp;new&nbsp;unit&nbsp;tests&nbsp;for&lt;BR&gt;<br>
ReadOnlyCollection&amp;lt;T&amp;gt;.&nbsp;All&nbsp;unit&nbsp;tests&nbsp;pass&nbsp;on&nbsp;Mono&nbsp;and&nbsp;.NET.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Please&nbsp;review.&lt;BR&gt;<br>
&lt;BR&gt;<br>
-&nbsp;Juraj&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>
<br>

</tt>
