<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7652.24&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[Mono-dev]&nbsp;patch&nbsp;for&nbsp;Mono.Security.Protocol.Ntlm&nbsp;(revisited)&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hi&nbsp;Eno.&lt;BR&gt;<br>
&lt;BR&gt;<br>
If&nbsp;you&nbsp;have&nbsp;IIS,&nbsp;simply&nbsp;turn&nbsp;some&nbsp;site&nbsp;security&nbsp;on&nbsp;(forbid&nbsp;anonymous&nbsp;access)&nbsp;and&nbsp;use&nbsp;WebRequest.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Regards,&lt;BR&gt;<br>
Kosta&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
-----Original&nbsp;Message-----&lt;BR&gt;<br>
From:&nbsp;mono-devel-list-bounces@lists.ximian.com&nbsp;on&nbsp;behalf&nbsp;of&nbsp;Atsushi&nbsp;Eno&lt;BR&gt;<br>
Sent:&nbsp;Mon&nbsp;8/13/2007&nbsp;17:25&lt;BR&gt;<br>
To:&nbsp;mono-devel-list@lists.ximian.com&lt;BR&gt;<br>
Subject:&nbsp;[Mono-dev]&nbsp;patch&nbsp;for&nbsp;Mono.Security.Protocol.Ntlm&nbsp;(revisited)&lt;BR&gt;<br>
&lt;BR&gt;<br>
Hi,&lt;BR&gt;<br>
&lt;BR&gt;<br>
Couple&nbsp;of&nbsp;months&nbsp;ago&nbsp;I&nbsp;posted&nbsp;a&nbsp;patch&nbsp;for&nbsp;NTLM&nbsp;authentication&lt;BR&gt;<br>
which&nbsp;seemed&nbsp;outdated.&lt;BR&gt;<br>
&lt;A&nbsp;HREF=&quot;http://lists.ximian.com/pipermail/mono-devel-list/2007-March/022918.html&quot;&gt;http://lists.ximian.com/pipermail/mono-devel-list/2007-March/022918.html&lt;/A&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
Now&nbsp;I'm&nbsp;revisiting&nbsp;this&nbsp;patch,&nbsp;with&nbsp;some&nbsp;NUnit&nbsp;test&nbsp;breakage&nbsp;fixes&lt;BR&gt;<br>
(mentioned&nbsp;in&nbsp;the&nbsp;earlier&nbsp;post).&lt;BR&gt;<br>
&lt;BR&gt;<br>
As&nbsp;for&nbsp;TDS&nbsp;testing,&nbsp;today&nbsp;I&nbsp;have&nbsp;been&nbsp;trying&nbsp;to&nbsp;test&nbsp;this&nbsp;NTLM&nbsp;auth&lt;BR&gt;<br>
with&nbsp;our&nbsp;SqlClient,&nbsp;but&nbsp;I&nbsp;couldn't&nbsp;get&nbsp;it&nbsp;working&nbsp;fine&nbsp;with&nbsp;our&lt;BR&gt;<br>
(unpatched)&nbsp;code.&nbsp;Should&nbsp;current&nbsp;code&nbsp;work&nbsp;fine?&lt;BR&gt;<br>
&lt;BR&gt;<br>
Part&nbsp;of&nbsp;my&nbsp;code&nbsp;looks&nbsp;like&nbsp;below.&nbsp;I&nbsp;tried&nbsp;with&nbsp;MSDE&nbsp;2000&nbsp;(2005&lt;BR&gt;<br>
Express&nbsp;too,&nbsp;but&nbsp;I&nbsp;heard&nbsp;that&nbsp;it&nbsp;won't&nbsp;work&nbsp;fine&nbsp;either&nbsp;way).&lt;BR&gt;<br>
I&nbsp;guess&nbsp;I&nbsp;have&nbsp;no&nbsp;problem&nbsp;with&nbsp;this&nbsp;(it&nbsp;worked&nbsp;under&nbsp;.NET&nbsp;1.x/2.0).&lt;BR&gt;<br>
----&lt;BR&gt;<br>
&amp;nbsp;&nbsp;string&nbsp;connStr&nbsp;=&nbsp;&amp;quot;Data&nbsp;Source=PC;Initial&lt;BR&gt;<br>
Catalog=enotest0002;Integrated&nbsp;Security=True;Pooling=False&amp;quot;;&lt;BR&gt;<br>
&amp;nbsp;&nbsp;SqlConnection&nbsp;conn&nbsp;=&nbsp;new&nbsp;SqlConnection&nbsp;(connStr);&lt;BR&gt;<br>
&amp;nbsp;&nbsp;SqlCommand&nbsp;cmd&nbsp;=&nbsp;new&nbsp;SqlCommand&nbsp;(&amp;quot;select&nbsp;*&nbsp;from&nbsp;Table2&amp;quot;,&nbsp;conn);&lt;BR&gt;<br>
&amp;nbsp;&nbsp;SqlDataAdapter&nbsp;adapter&nbsp;=&nbsp;new&nbsp;SqlDataAdapter&nbsp;(cmd);&lt;BR&gt;<br>
&amp;nbsp;&nbsp;DataSet&nbsp;ds&nbsp;=&nbsp;new&nbsp;DataSet&nbsp;();&lt;BR&gt;<br>
&amp;nbsp;&nbsp;adapter.Fill&nbsp;(ds);&lt;BR&gt;<br>
----&lt;BR&gt;<br>
&lt;BR&gt;<br>
Any&nbsp;suggestions&nbsp;to&nbsp;verify&nbsp;NTLM&nbsp;stuff&nbsp;would&nbsp;be&nbsp;appreciated.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Atsushi&nbsp;Eno&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>
<br>

</tt>
