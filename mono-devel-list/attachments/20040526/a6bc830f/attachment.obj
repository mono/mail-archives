Index: ChangeLog
===================================================================
RCS file: /cvs/public/mcs/class/System.Data.OracleClient/ChangeLog,v
retrieving revision 1.33
diff -u -r1.33 ChangeLog
--- ChangeLog	25 May 2004 22:27:41 -0000	1.33
+++ ChangeLog	26 May 2004 11:06:51 -0000
@@ -1,3 +1,10 @@
+2004-05-26	Joerg Rosenkranz <joergr@voelcker.com>
+
+	* System.Data.OracleClient.Oci/OciDefineHandle.cs:
+		Merged in a fix send by Rogerio Pereira Araujo 
+		<webmaster@cisnet.com.br>: Fixed a bug with NUMBER data type 
+		when no parameter is passed to OracleCommand.
+		
 2004-05-26  Gonzalo Paniagua Javier <gonzalo@ximian.com>
 
 	* System.Data.OracleClient/OracleType.cs: fixed values for Int16 and
Index: System.Data.OracleClient.Oci/OciDefineHandle.cs
===================================================================
RCS file: /cvs/public/mcs/class/System.Data.OracleClient/System.Data.OracleClient.Oci/OciDefineHandle.cs,v
retrieving revision 1.15
diff -u -r1.15 OciDefineHandle.cs
--- System.Data.OracleClient.Oci/OciDefineHandle.cs	21 May 2004 22:21:59 -0000	1.15
+++ System.Data.OracleClient.Oci/OciDefineHandle.cs	26 May 2004 11:06:51 -0000
@@ -284,10 +284,16 @@
 				tmp = Marshal.PtrToStringAnsi (Value, Size);
 				if (tmp != null) {
 					if (Scale == 0) {
-						if (Size < 10)
-							return Int32.Parse (String.Copy ((string) tmp));
-						else
-							return Int64.Parse (String.Copy ((string) tmp));
+						try {
+							if (Size < 10)
+								return Int32.Parse (String.Copy ((string) tmp));
+							else
+								return Int64.Parse (String.Copy ((string) tmp));
+						} catch {
+							// Fallback: Scale is reported as 0 when column
+							// was created as NUMBER without parameters.
+							return Decimal.Parse (String.Copy ((string) tmp));
+						}
 					}
 					else
 						return Decimal.Parse (String.Copy ((string) tmp));
