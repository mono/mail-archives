Index: class/Makefile
===================================================================
--- class/Makefile	(revision 137818)
+++ class/Makefile	(working copy)
@@ -39,7 +39,6 @@
 	System.Drawing			\
 	System.Transactions		\
 	System.EnterpriseServices	\
-	Mono.C5				\
 	Mono.Data.Tds			\
 	System.Data			\
 	Mono.Data			\
@@ -116,6 +115,7 @@
 	System.ServiceModel		\
 	System.ServiceModel.Web		\
 	System.Web.Mvc			\
+	Mono.C5				\
 	Mono.Management			\
 	Mono.Options 			\
 	Mono.Simd			\
Index: class/Mono.C5/add-conditional.pl
===================================================================
--- class/Mono.C5/add-conditional.pl	(revision 137818)
+++ class/Mono.C5/add-conditional.pl	(working copy)
@@ -1,16 +0,0 @@
-#!/usr/bin/perl -w
-use strict;
-
-foreach my $file (@ARGV) {
-    open FILE,"+<",$file;
-    my $contents = "";
-    while (defined ($_ = <FILE>)) {
-	$contents .= $_;
-    }
-    truncate FILE, 0;
-    seek FILE, 0, 0;
-    print FILE "#if NET_2_0\n";
-    print FILE $contents . "\n";
-    print FILE "#endif\n";
-    close FILE;
-}
Index: class/Mono.C5/C5/Dictionaries.cs
===================================================================
--- class/Mono.C5/C5/Dictionaries.cs	(revision 137818)
+++ class/Mono.C5/C5/Dictionaries.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -1294,4 +1293,3 @@
 
   }
 }
-#endif
Index: class/Mono.C5/C5/hashing/HashTable.cs
===================================================================
--- class/Mono.C5/C5/hashing/HashTable.cs	(revision 137818)
+++ class/Mono.C5/C5/hashing/HashTable.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -1599,5 +1598,3 @@
 
   }
 }
-
-#endif
Index: class/Mono.C5/C5/hashing/HashBag.cs
===================================================================
--- class/Mono.C5/C5/hashing/HashBag.cs	(revision 137818)
+++ class/Mono.C5/C5/hashing/HashBag.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -677,5 +676,3 @@
     #endregion
   }
 }
-
-#endif
Index: class/Mono.C5/C5/hashing/HashDictionary.cs
===================================================================
--- class/Mono.C5/C5/hashing/HashDictionary.cs	(revision 137818)
+++ class/Mono.C5/C5/hashing/HashDictionary.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -76,4 +75,3 @@
 
   }
 }
-#endif
Index: class/Mono.C5/C5/Collections.cs
===================================================================
--- class/Mono.C5/C5/Collections.cs	(revision 137818)
+++ class/Mono.C5/C5/Collections.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -1519,5 +1518,3 @@
     #endregion
   }
 }
-
-#endif
Index: class/Mono.C5/C5/trees/RedBlackTreeDictionary.cs
===================================================================
--- class/Mono.C5/C5/trees/RedBlackTreeDictionary.cs	(revision 137818)
+++ class/Mono.C5/C5/trees/RedBlackTreeDictionary.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -79,4 +78,3 @@
 
   }
 }
-#endif
Index: class/Mono.C5/C5/trees/RedBlackTreeBag.cs
===================================================================
--- class/Mono.C5/C5/trees/RedBlackTreeBag.cs	(revision 137818)
+++ class/Mono.C5/C5/trees/RedBlackTreeBag.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -4488,6 +4487,3 @@
 
   }
 }
-
-
-#endif
Index: class/Mono.C5/C5/trees/RedBlackTreeSet.cs
===================================================================
--- class/Mono.C5/C5/trees/RedBlackTreeSet.cs	(revision 137818)
+++ class/Mono.C5/C5/trees/RedBlackTreeSet.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -4488,6 +4487,3 @@
 
   }
 }
-
-
-#endif
Index: class/Mono.C5/C5/Random.cs
===================================================================
--- class/Mono.C5/C5/Random.cs	(revision 137818)
+++ class/Mono.C5/C5/Random.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -171,4 +170,3 @@
     }
   }
 }
-#endif
Index: class/Mono.C5/C5/Exceptions.cs
===================================================================
--- class/Mono.C5/C5/Exceptions.cs	(revision 137818)
+++ class/Mono.C5/C5/Exceptions.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -243,4 +242,3 @@
   }
 
 }
-#endif
Index: class/Mono.C5/C5/linkedlists/HashedLinkedList.cs
===================================================================
--- class/Mono.C5/C5/linkedlists/HashedLinkedList.cs	(revision 137818)
+++ class/Mono.C5/C5/linkedlists/HashedLinkedList.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -3781,5 +3780,3 @@
 
   }
 }
-
-#endif
Index: class/Mono.C5/C5/linkedlists/LinkedList.cs
===================================================================
--- class/Mono.C5/C5/linkedlists/LinkedList.cs	(revision 137818)
+++ class/Mono.C5/C5/linkedlists/LinkedList.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -3785,5 +3784,3 @@
 
   }
 }
-
-#endif
Index: class/Mono.C5/C5/Interfaces.cs
===================================================================
--- class/Mono.C5/C5/Interfaces.cs	(revision 137818)
+++ class/Mono.C5/C5/Interfaces.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -1883,5 +1882,3 @@
     bool Equals(T item1, T item2);
   }*/
 }
-
-#endif
Index: class/Mono.C5/C5/Sorting.cs
===================================================================
--- class/Mono.C5/C5/Sorting.cs	(revision 137818)
+++ class/Mono.C5/C5/Sorting.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -238,4 +237,3 @@
     }
   }
 }
-#endif
Index: class/Mono.C5/C5/Attributes.cs
===================================================================
--- class/Mono.C5/C5/Attributes.cs	(revision 137818)
+++ class/Mono.C5/C5/Attributes.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -47,4 +46,3 @@
     public override string ToString() { return "Tested via " + via; }
   }
 }
-#endif
Index: class/Mono.C5/C5/Enums.cs
===================================================================
--- class/Mono.C5/C5/Enums.cs	(revision 137818)
+++ class/Mono.C5/C5/Enums.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -97,4 +96,3 @@
     Backwards
   }
 }
-#endif
Index: class/Mono.C5/C5/AssemblyInfo.cs
===================================================================
--- class/Mono.C5/C5/AssemblyInfo.cs	(revision 137818)
+++ class/Mono.C5/C5/AssemblyInfo.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -77,4 +76,3 @@
 //
 [assembly: AssemblyDelaySign (true)]
 [assembly: AssemblyKeyFile ("c5.pub")]
-#endif
Index: class/Mono.C5/C5/MappedEnumerators.cs
===================================================================
--- class/Mono.C5/C5/MappedEnumerators.cs	(revision 137818)
+++ class/Mono.C5/C5/MappedEnumerators.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -144,4 +143,3 @@
     }
   }
 }
-#endif
Index: class/Mono.C5/C5/heaps/IntervalHeap.cs
===================================================================
--- class/Mono.C5/C5/heaps/IntervalHeap.cs	(revision 137818)
+++ class/Mono.C5/C5/heaps/IntervalHeap.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -1099,5 +1098,3 @@
   }
 
 }
-
-#endif
Index: class/Mono.C5/C5/arrays/SortedArray.cs
===================================================================
--- class/Mono.C5/C5/arrays/SortedArray.cs	(revision 137818)
+++ class/Mono.C5/C5/arrays/SortedArray.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -1265,4 +1264,3 @@
 
   }
 }
-#endif
Index: class/Mono.C5/C5/arrays/HashedArrayList.cs
===================================================================
--- class/Mono.C5/C5/arrays/HashedArrayList.cs	(revision 137818)
+++ class/Mono.C5/C5/arrays/HashedArrayList.cs	(working copy)
@@ -1,5 +1,3 @@
-#if NET_2_0
-
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -2535,5 +2533,3 @@
 #endregion
   }
 }
-
-#endif
Index: class/Mono.C5/C5/arrays/CircularQueue.cs
===================================================================
--- class/Mono.C5/C5/arrays/CircularQueue.cs	(revision 137818)
+++ class/Mono.C5/C5/arrays/CircularQueue.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -333,4 +332,3 @@
     }
   }
 }
-#endif
Index: class/Mono.C5/C5/arrays/ArrayList.cs
===================================================================
--- class/Mono.C5/C5/arrays/ArrayList.cs	(revision 137818)
+++ class/Mono.C5/C5/arrays/ArrayList.cs	(working copy)
@@ -1,5 +1,3 @@
-#if NET_2_0
-
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -2535,5 +2533,3 @@
 #endregion
   }
 }
-
-#endif
Index: class/Mono.C5/C5/Hashers.cs
===================================================================
--- class/Mono.C5/C5/Hashers.cs	(revision 137818)
+++ class/Mono.C5/C5/Hashers.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -488,5 +487,3 @@
   }
 }
 #endif
-
-#endif
Index: class/Mono.C5/C5/Delegates.cs
===================================================================
--- class/Mono.C5/C5/Delegates.cs	(revision 137818)
+++ class/Mono.C5/C5/Delegates.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -130,5 +129,3 @@
   /// <returns></returns>
   public delegate R Fun<A1, A2, A3, A4, R>(A1 x1, A2 x2, A3 x3, A4 x4);
 }
-
-#endif
Index: class/Mono.C5/C5/Records.cs
===================================================================
--- class/Mono.C5/C5/Records.cs	(revision 137818)
+++ class/Mono.C5/C5/Records.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -509,5 +508,3 @@
     #endregion
   }
 }
-
-#endif
Index: class/Mono.C5/C5/WrappedArray.cs
===================================================================
--- class/Mono.C5/C5/WrappedArray.cs	(revision 137818)
+++ class/Mono.C5/C5/WrappedArray.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -870,4 +869,3 @@
     #endregion
   }
 }
-#endif
Index: class/Mono.C5/C5/Wrappers.cs
===================================================================
--- class/Mono.C5/C5/Wrappers.cs	(revision 137818)
+++ class/Mono.C5/C5/Wrappers.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -2232,4 +2231,3 @@
   }
 
 }
-#endif
Index: class/Mono.C5/C5/Events.cs
===================================================================
--- class/Mono.C5/C5/Events.cs	(revision 137818)
+++ class/Mono.C5/C5/Events.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -531,4 +530,3 @@
   /// <param name="eventArgs"></param>
   public delegate void ItemRemovedAtHandler<T>(object sender, ItemAtEventArgs<T> eventArgs);
 }
-#endif
Index: class/Mono.C5/C5/Builtin.cs
===================================================================
--- class/Mono.C5/C5/Builtin.cs	(revision 137818)
+++ class/Mono.C5/C5/Builtin.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -185,4 +184,3 @@
   #endregion
 
 }
-#endif
Index: class/Mono.C5/C5/ViewSupport.cs
===================================================================
--- class/Mono.C5/C5/ViewSupport.cs	(revision 137818)
+++ class/Mono.C5/C5/ViewSupport.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -100,4 +99,3 @@
 
   #endregion
 }
-#endif
Index: class/Mono.C5/C5/Comparer.cs
===================================================================
--- class/Mono.C5/C5/Comparer.cs	(revision 137818)
+++ class/Mono.C5/C5/Comparer.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -151,4 +150,3 @@
     public int Compare(T item1, T item2) { return cmp(item1, item2); }
   }
 }
-#endif
Index: class/Mono.C5/C5/Formatting.cs
===================================================================
--- class/Mono.C5/C5/Formatting.cs	(revision 137818)
+++ class/Mono.C5/C5/Formatting.cs	(working copy)
@@ -1,4 +1,3 @@
-#if NET_2_0
 /*
  Copyright (c) 2003-2006 Niels Kokholm and Peter Sestoft
  Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -246,4 +245,3 @@
     }
   }
 }
-#endif
Index: class/Mono.C5/Makefile
===================================================================
--- class/Mono.C5/Makefile	(revision 137818)
+++ class/Mono.C5/Makefile	(working copy)
@@ -11,13 +11,4 @@
 	LICENSE.txt \
 	c5.pub c5.snk c5.xml
 
-# This is a .NET 2.0+ only assembly
-VALID_PROFILE := $(filter net_2_0 net_4_0, $(PROFILE))
-ifndef VALID_PROFILE
-LIBRARY_NAME = dummy-Mono.C5.dll
-NO_INSTALL = yes
-NO_SIGN_ASSEMBLY = yes
-NO_TEST = yes
-endif
-
 include ../../build/library.make
