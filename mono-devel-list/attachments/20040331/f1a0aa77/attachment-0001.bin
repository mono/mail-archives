Index: icall.c
===================================================================
RCS file: /cvs/public/mono/mono/metadata/icall.c,v
retrieving revision 1.444
diff -u -r1.444 icall.c
--- icall.c	30 Mar 2004 03:26:16 -0000	1.444
+++ icall.c	31 Mar 2004 19:31:55 -0000
@@ -4783,12 +4783,6 @@
 	*to_upper_data_high = ToUpperDataHigh;
 }
 
-static void
-ves_icall_System_Reflection_Emit_LocalBuilder_MakePinned (MonoReflectionLocalBuilder* this)
-{
-	this->type->type->pinned = TRUE;
-}
-
 /* icall map */
 typedef struct {
 	const char *method;
@@ -5512,10 +5506,6 @@
 	{"GetMachineInstallDirectory", ves_icall_System_Web_Util_ICalls_get_machine_install_dir}
 };
 
-static const IcallEntry localbuilder_icalls [] = {
-	{"MakePinned", ves_icall_System_Reflection_Emit_LocalBuilder_MakePinned },
-};
-
 /* proto
 static const IcallEntry array_icalls [] = {
 };
@@ -5561,7 +5551,6 @@
 	{"System.Reflection.Emit.AssemblyBuilder", assemblybuilder_icalls, G_N_ELEMENTS (assemblybuilder_icalls)},
 	{"System.Reflection.Emit.CustomAttributeBuilder", customattrbuilder_icalls, G_N_ELEMENTS (customattrbuilder_icalls)},
 	{"System.Reflection.Emit.DynamicMethod", dynamicmethod_icalls, G_N_ELEMENTS (dynamicmethod_icalls)},
-	{"System.Reflection.Emit.LocalBuilder", localbuilder_icalls, G_N_ELEMENTS (localbuilder_icalls)},
 	{"System.Reflection.Emit.MethodBuilder", methodbuilder_icalls, G_N_ELEMENTS (methodbuilder_icalls)},
 	{"System.Reflection.Emit.ModuleBuilder", modulebuilder_icalls, G_N_ELEMENTS (modulebuilder_icalls)},
 	{"System.Reflection.Emit.SignatureHelper", signaturehelper_icalls, G_N_ELEMENTS (signaturehelper_icalls)},
Index: reflection.c
===================================================================
RCS file: /cvs/public/mono/mono/metadata/reflection.c,v
retrieving revision 1.312
diff -u -r1.312 reflection.c
--- reflection.c	30 Mar 2004 03:26:16 -0000	1.312
+++ reflection.c	31 Mar 2004 19:31:56 -0000
@@ -739,7 +739,7 @@
 	for (i = 0; i < nl; ++i) {
 		MonoReflectionLocalBuilder *lb = mono_array_get (ilgen->locals, MonoReflectionLocalBuilder*, i);
 		
-		if (lb->type->type->pinned)
+		if (lb->is_pinned)
 			mono_metadata_encode_value (MONO_TYPE_PINNED, p, &p);
 		
 		encode_reflection_type (assembly, lb->type, p, &p);
Index: reflection.h
===================================================================
RCS file: /cvs/public/mono/mono/metadata/reflection.h,v
retrieving revision 1.126
diff -u -r1.126 reflection.h
--- reflection.h	23 Mar 2004 23:07:39 -0000	1.126
+++ reflection.h	31 Mar 2004 19:31:56 -0000
@@ -166,6 +166,7 @@
 	MonoObject object;
 	MonoReflectionType *type;
 	MonoString *name;
+	MonoBoolean is_pinned;
 } MonoReflectionLocalBuilder;
 
 typedef struct {
