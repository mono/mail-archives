Index: ChangeLog
===================================================================
RCS file: /mono/mcs/class/System.Data.OracleClient/ChangeLog,v
retrieving revision 1.26
diff -u -r1.26 ChangeLog
--- ChangeLog	9 Feb 2004 18:05:54 -0000	1.26
+++ ChangeLog	31 Mar 2004 10:24:35 -0000
@@ -1,3 +1,12 @@
+2004-03-31  Joerg Rosenkranz  <joergr@voelcker.com>
+
+	* System.Data.OracleClient.Oci/OciDefineHandle.cs:
+		Changed DefineChar to allow retrieval of 
+		multibyte characters (i.e. german umlauts).
+	* System.Data.OracleClient.Oci/OciStatementHandle.cs:
+		OciDefineHandles are now disposed in the
+		Dispose function.
+		
 2004-02-09  Joerg Rosenkranz  <joergr@voelcker.com>
 
 	* System.Data.OracleClient/OracleLob.cs:
Index: System.Data.OracleClient.Oci/OciDefineHandle.cs
===================================================================
RCS file: /mono/mcs/class/System.Data.OracleClient/System.Data.OracleClient.Oci/OciDefineHandle.cs,v
retrieving revision 1.11
diff -u -r1.11 OciDefineHandle.cs
--- System.Data.OracleClient.Oci/OciDefineHandle.cs	28 Jan 2004 15:34:04 -0000	1.11
+++ System.Data.OracleClient.Oci/OciDefineHandle.cs	31 Mar 2004 10:24:35 -0000
@@ -144,7 +144,10 @@
 		void DefineChar (int position)
 		{
 			ociType = OciDataType.Char;
-			value = Marshal.AllocHGlobal (definedSize);
+			
+			// The buffer is able to contain twice the defined size
+			// to allow usage of multibyte characters
+			value = Marshal.AllocHGlobal (definedSize * 2);
 
 			int status = 0;
 
@@ -153,7 +156,7 @@
 						ErrorHandle,
 						position + 1,
 						value,
-						definedSize,
+						definedSize * 2,
 						ociType,
 						ref indicator,
 						ref rlenp,
Index: System.Data.OracleClient.Oci/OciStatementHandle.cs
===================================================================
RCS file: /mono/mcs/class/System.Data.OracleClient/System.Data.OracleClient.Oci/OciStatementHandle.cs,v
retrieving revision 1.8
diff -u -r1.8 OciStatementHandle.cs
--- System.Data.OracleClient.Oci/OciStatementHandle.cs	28 Jan 2004 15:34:04 -0000	1.8
+++ System.Data.OracleClient.Oci/OciStatementHandle.cs	31 Mar 2004 10:24:35 -0000
@@ -71,6 +71,15 @@
 		{
 			if (!disposed) {
 				disposed = true;
+				
+				if (disposing) {
+					if (values != null) {
+						foreach (OciDefineHandle h in values)
+							h.Dispose ();
+						values = null;
+					}
+				}
+				
 				base.Dispose (disposing);
 			}
 		}
