From dc0bd69b46e0884469a9959ca9124d8676961178 Mon Sep 17 00:00:00 2001
From: Matthias D <matthi.d@googlemail.com>
Date: Mon, 4 Jun 2012 11:08:30 +0200
Subject: [PATCH 1/3] Fixes to make mono cross compile on linux/cygwin to
 mingw32

---
 build-mingw32.sh |    5 +++--
 configure.in     |    4 ++++
 2 files changed, 7 insertions(+), 2 deletions(-)

diff --git a/build-mingw32.sh b/build-mingw32.sh
index 16fc66f..f532931 100755
--- a/build-mingw32.sh
+++ b/build-mingw32.sh
@@ -56,8 +56,9 @@ function setup ()
     CROSS_BIN_DIR="$CROSS_DIR/bin"
     CROSS_DLL_DIR="$CROSS_DIR/bin"
     PATH=$CROSS_BIN_DIR:$PATH
-
-    MONO_VERSION=`grep AM_INIT_AUTOMAKE configure.in | cut -d ',' -f 2|tr -d '\)'|tr -d '\('`
+	
+	# Note: This will break all the time, add some unit test or something like that for cross building
+    MONO_VERSION=`grep AC_INIT configure.in | cut -d ',' -f 2|tr -d ']'|tr -d '['| tr -d ' '`
     
     if [ -d ./.git ]; then
 	MONO_GIT_COMMIT="`git log -1 --format=format:%t`"
diff --git a/configure.in b/configure.in
index ce18864..3016d00 100644
--- a/configure.in
+++ b/configure.in
@@ -118,6 +118,10 @@ case "$host" in
 			target_win32=yes
 			AC_DEFINE(TARGET_WIN32,1,[Target OS is Win32/MinGW])
 			AC_DEFINE(MINGW_CROSS_COMPILE,1,[Cross-compiling using MinGW])
+			
+			# to bypass the clang check, can't work when cross-compiling
+			mono_cv_clang=yes
+			mono_cv_uscore=yes
 		fi
 		HOST_CC="gcc"
 		# Windows 2000 is required that includes Internet Explorer 5.01
-- 
1.7.9

