<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi,&nbsp;I've&nbsp;never&nbsp;posted&nbsp;here&nbsp;before,&nbsp;so&nbsp;forgive&nbsp;me&nbsp;if&nbsp;I&nbsp;break<br>
&nbsp;&nbsp;&nbsp;&nbsp;etiquette.&nbsp;However,&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;submit&nbsp;a&nbsp;suggestion&nbsp;for&nbsp;a&nbsp;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;change.&nbsp;While&nbsp;developing&nbsp;our&nbsp;product&nbsp;which&nbsp;runs&nbsp;on&nbsp;both&nbsp;Windows&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;Linux,&nbsp;our&nbsp;Linux&nbsp;users&nbsp;reported&nbsp;a&nbsp;significant&nbsp;difference&nbsp;in&nbsp;speed<br>
&nbsp;&nbsp;&nbsp;&nbsp;between&nbsp;the&nbsp;application&nbsp;running&nbsp;on&nbsp;Windows&nbsp;under&nbsp;MS.NET&nbsp;versus&nbsp;Mono.<br>
&nbsp;&nbsp;&nbsp;&nbsp;I've&nbsp;tracked&nbsp;down&nbsp;the&nbsp;main&nbsp;cause&nbsp;of&nbsp;the&nbsp;problem&nbsp;and&nbsp;I&nbsp;thought&nbsp;I'd<br>
&nbsp;&nbsp;&nbsp;&nbsp;share&nbsp;my&nbsp;change&nbsp;for&nbsp;possible&nbsp;inclusion&nbsp;in&nbsp;a&nbsp;future&nbsp;release&nbsp;of&nbsp;Mono.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;current&nbsp;code&nbsp;for&nbsp;DataRowCollection.RemoveInternal...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;Courier,&nbsp;monospace&quot;&gt;internal&nbsp;void<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RemoveInternal&nbsp;(DataRow&nbsp;row)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(row&nbsp;==&nbsp;null)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;IndexOutOfRangeException&nbsp;(&quot;The&nbsp;given&nbsp;datarow&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;in&nbsp;the&nbsp;current&nbsp;DataRowCollection.&quot;);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;index&nbsp;=&nbsp;List.IndexOf&nbsp;(row);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(index&nbsp;&lt;&nbsp;0)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;IndexOutOfRangeException&nbsp;(&quot;The&nbsp;given&nbsp;datarow&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;in&nbsp;the&nbsp;current&nbsp;DataRowCollection.&quot;);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List.RemoveAt&nbsp;(index);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(;&nbsp;index&nbsp;&lt;&nbsp;List.Count;&nbsp;++index)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((DataRow)&nbsp;List&nbsp;[index]).RowID&nbsp;=&nbsp;index;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/font&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Using&nbsp;List.IndexOf(row)&nbsp;is&nbsp;causing&nbsp;the&nbsp;poor&nbsp;performance.&nbsp;However,<br>
&nbsp;&nbsp;&nbsp;&nbsp;DataRowCollection&nbsp;has&nbsp;its&nbsp;own&nbsp;IndexOf()&nbsp;method&nbsp;which&nbsp;is&nbsp;designed&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;fast&nbsp;and&nbsp;safe,&nbsp;taking&nbsp;advantage&nbsp;of&nbsp;the&nbsp;cached&nbsp;RowID&nbsp;member&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;testing&nbsp;that&nbsp;the&nbsp;row&nbsp;is&nbsp;a&nbsp;member&nbsp;in&nbsp;the&nbsp;DataRowCollection.&nbsp;This<br>
&nbsp;&nbsp;&nbsp;&nbsp;should&nbsp;be&nbsp;used&nbsp;here&nbsp;instead,&nbsp;resulting&nbsp;in&nbsp;the&nbsp;following&nbsp;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;change...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;Courier,&nbsp;monospace&quot;&gt;internal&nbsp;void<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RemoveInternal&nbsp;(DataRow&nbsp;row)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(row&nbsp;==&nbsp;null)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;IndexOutOfRangeException&nbsp;(&quot;The&nbsp;given&nbsp;datarow&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;in&nbsp;the&nbsp;current&nbsp;DataRowCollection.&quot;);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;int&nbsp;index&nbsp;=&nbsp;List.IndexOf&nbsp;(row);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp;&nbsp;int&nbsp;index&nbsp;=&nbsp;this.IndexOf&nbsp;(row);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(index&nbsp;&lt;&nbsp;0)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;IndexOutOfRangeException&nbsp;(&quot;The&nbsp;given&nbsp;datarow&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;in&nbsp;the&nbsp;current&nbsp;DataRowCollection.&quot;);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List.RemoveAt&nbsp;(index);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(;&nbsp;index&nbsp;&lt;&nbsp;List.Count;&nbsp;++index)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((DataRow)&nbsp;List&nbsp;[index]).RowID&nbsp;=&nbsp;index;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/font&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;my&nbsp;own&nbsp;testing&nbsp;this&nbsp;sped&nbsp;up&nbsp;row&nbsp;deletions&nbsp;by&nbsp;approximately&nbsp;360%,<br>
&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;you&nbsp;can&nbsp;ascertain&nbsp;a&nbsp;more&nbsp;accurate&nbsp;measure&nbsp;for&nbsp;yourself.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-Julian&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
