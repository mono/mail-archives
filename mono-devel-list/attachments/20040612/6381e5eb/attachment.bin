--- editing.cs.old	2004-06-05 17:15:43.000000000 +0200
+++ editing.cs	2004-06-12 03:47:40.000000000 +0200
@@ -137,6 +137,7 @@
 
 		public static XmlSerializer serializer = new XmlSerializer (typeof (GlobalChangeset));
 		static string changeset_file = Path.Combine (SettingsHandler.Path, "changeset.xml");
+		static string changeset_backup_file = Path.Combine (SettingsHandler.Path, "changeset.xml~");
 	
 		public static GlobalChangeset Load ()
 		{
@@ -156,12 +157,20 @@
 		public void Save ()
 		{
 			SettingsHandler.EnsureSettingsDirectory ();
-			try {
+
+			try {    
+				if (File.Exists(changeset_file))  // create backup copy
+					File.Copy (changeset_file, changeset_backup_file, true);
+           
 				using (FileStream fs = File.Create (changeset_file)){
 					serializer.Serialize (fs, this);
 				}
 			} catch (Exception e) {
-				Console.WriteLine ("Error while saving changes: " + e);
+				Console.WriteLine ("Error while saving changes. " + e);
+				if (File.Exists(changeset_backup_file))  // if saving fails then use backup if we have one				
+					File.Copy (changeset_backup_file, changeset_file, true);
+				else
+					File.Delete (changeset_file);   // if no backup, delete invalid changeset 
 			}
 		}
 		
