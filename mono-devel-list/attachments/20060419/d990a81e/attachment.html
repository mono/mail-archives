<tt>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;Hello,&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;do&nbsp;a&nbsp;<br>
small&nbsp;experiment&nbsp;by&nbsp;extending&nbsp;MONO&nbsp;internal.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&lt;/span&gt;&lt;/font&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&amp;lt;the&nbsp;first&nbsp;<br>
requirement&amp;gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;I'd&nbsp;like&nbsp;to&nbsp;add&nbsp;a&nbsp;<br>
certain&nbsp;hook&nbsp;function&nbsp;in&nbsp;front&nbsp;of&nbsp;some&nbsp;methods.&nbsp;There&nbsp;were&nbsp;some&nbsp;approaches&nbsp;<br>
discussed&nbsp;before&nbsp;about&nbsp;it&nbsp;like&nbsp;using&nbsp;pre-processor&nbsp;to&nbsp;manipulate&nbsp;C#&nbsp;source&nbsp;code&nbsp;<br>
or&nbsp;assembly&nbsp;file.&nbsp;But,&nbsp;I'd&nbsp;like&nbsp;to&nbsp;make&nbsp;it&nbsp;work&nbsp;by&nbsp;extending&nbsp;MONO.&nbsp;The&nbsp;hook&nbsp;<br>
function&nbsp;is&nbsp;also&nbsp;an&nbsp;internal&nbsp;function&nbsp;within&nbsp;MONO.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&lt;/span&gt;&lt;/font&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&amp;lt;the&nbsp;second&nbsp;<br>
requirement&amp;gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;Methods&nbsp;of&nbsp;a&nbsp;class&nbsp;<br>
are&nbsp;class-based.&nbsp;That&nbsp;is,&nbsp;the&nbsp;objects&nbsp;from&nbsp;the&nbsp;class&nbsp;use&nbsp;same&nbsp;<br>
methods.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;But,&nbsp;I'd&nbsp;like&nbsp;to&nbsp;<br>
make&nbsp;methods&nbsp;perform&nbsp;some&nbsp;different&nbsp;action&nbsp;per&nbsp;object.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;For&nbsp;example,&nbsp;<br>
&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;A&amp;nbsp;&nbsp;class&nbsp;C1&nbsp;has&nbsp;a&nbsp;<br>
method&nbsp;method1().&amp;nbsp;The&nbsp;objects&amp;nbsp;O1&nbsp;and&nbsp;O2&nbsp;are&nbsp;instances&nbsp;of&nbsp;the&nbsp;class&nbsp;<br>
C1.&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;When&nbsp;O1.method1()&nbsp;is&nbsp;<br>
called,&amp;nbsp;it&nbsp;performs&nbsp;some&nbsp;action&nbsp;through&nbsp;a&nbsp;hook&nbsp;function,&nbsp;and&nbsp;then&nbsp;<br>
executes&amp;nbsp;method1().&amp;nbsp;&nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;When&nbsp;O2.method1()&nbsp;is&nbsp;called,&amp;nbsp;it&nbsp;just&nbsp;<br>
executes&amp;nbsp;method1().&amp;nbsp;&nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&lt;/span&gt;&lt;/font&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;One&nbsp;approach&nbsp;might&nbsp;<br>
generate&nbsp;two&nbsp;different&nbsp;native&nbsp;codes&nbsp;for&nbsp;the&nbsp;method:&nbsp;one&nbsp;with&nbsp;hook&nbsp;function,&nbsp;and&nbsp;<br>
the&nbsp;other&nbsp;without&nbsp;hook&nbsp;function.&nbsp;Then,&nbsp;create&nbsp;two&nbsp;vtable:&nbsp;one&nbsp;with&nbsp;the&nbsp;method&nbsp;<br>
with&nbsp;hook&nbsp;(name&nbsp;it&nbsp;as&nbsp;vtable1),&nbsp;and&nbsp;the&nbsp;other&nbsp;with&nbsp;the&nbsp;method&nbsp;without&nbsp;hook&nbsp;<br>
function&nbsp;(vtable2).&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;Then,&nbsp;<br>
&lt;/span&gt;&lt;/font&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;let&nbsp;the&nbsp;<br>
objects&nbsp;to&nbsp;point&nbsp;to&nbsp;different&nbsp;vtable&nbsp;like&nbsp;O1&nbsp;pointing&nbsp;to&nbsp;vtable1&nbsp;and&nbsp;O2&nbsp;pointing&nbsp;<br>
to&nbsp;vtable2.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&amp;nbsp;&nbsp;<br>
&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&amp;lt;Question1&amp;gt;&nbsp;It&nbsp;<br>
doesn't&nbsp;need&nbsp;to&nbsp;be&nbsp;this&nbsp;approach&nbsp;as&nbsp;long&nbsp;as&nbsp;calling&nbsp;O2.method1()&nbsp;performs&nbsp;the&nbsp;<br>
hook&nbsp;first,&nbsp;then&nbsp;execute&nbsp;its&nbsp;main&nbsp;method.&nbsp;But,&nbsp;making&nbsp;the&nbsp;hook&nbsp;call&nbsp;the&nbsp;method&nbsp;<br>
might&nbsp;not&nbsp;be&nbsp;easy&nbsp;because&nbsp;there&nbsp;is&amp;nbsp;&nbsp;no&nbsp;way&nbsp;to&nbsp;define&nbsp;an&nbsp;internal&nbsp;function&nbsp;in&nbsp;<br>
runtime,&nbsp;which&nbsp;comply&nbsp;with&nbsp;the&nbsp;signature&nbsp;of&nbsp;the&nbsp;method?&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&lt;/span&gt;&lt;/font&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&amp;lt;Question2&nbsp;:&nbsp;what&nbsp;<br>
i'&nbsp;d&nbsp;like&nbsp;to&nbsp;know&amp;gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;To&nbsp;do&nbsp;it,&nbsp;I'd&nbsp;like&nbsp;<br>
to&nbsp;get&nbsp;some&nbsp;hints&nbsp;which&nbsp;source&nbsp;parts&nbsp;of&nbsp;MONO&nbsp;I&nbsp;have&nbsp;to&nbsp;look&nbsp;at.&nbsp;<br>
&lt;/span&gt;&lt;/font&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;There&nbsp;are&nbsp;<br>
two&nbsp;parts&amp;nbsp;I&nbsp;have&nbsp;to&nbsp;figure&nbsp;out&nbsp;in&nbsp;mono:&nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&amp;nbsp;(first)&nbsp;how&nbsp;to&nbsp;<br>
insert&nbsp;a&nbsp;hook?&nbsp;mono_method_to_ir()&nbsp;in&nbsp;mini.c&amp;nbsp;seems&nbsp;to&nbsp;be&amp;nbsp;the&nbsp;spot&nbsp;to&nbsp;insert&nbsp;a&nbsp;<br>
hook.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&amp;nbsp;(second)&amp;nbsp;&amp;nbsp;&nbsp;where&nbsp;to&nbsp;<br>
have&nbsp;a&nbsp;method&nbsp;translated&nbsp;two&nbsp;time?&nbsp;Should&nbsp;it&nbsp;be&nbsp;somewhere&nbsp;of&nbsp;<br>
mini_method_compile()?&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&lt;/span&gt;&lt;/font&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;One&nbsp;assumption&nbsp;is&nbsp;<br>
that&nbsp;I&nbsp;already&nbsp;know&amp;nbsp;which&nbsp;methods&nbsp;and&nbsp;objects&nbsp;are&nbsp;the&amp;nbsp;target.&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&lt;/span&gt;&lt;/font&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;Sorry&nbsp;about&nbsp;this&nbsp;<br>
long&nbsp;posting.&nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;I&nbsp;appreciate&nbsp;any&nbsp;<br>
hint&nbsp;or&nbsp;opinion.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;&lt;/span&gt;&lt;/font&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;class=&quot;013461616-19042006&quot;&gt;Thanks..&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>

</tt>
