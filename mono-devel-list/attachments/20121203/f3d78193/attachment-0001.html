<tt>
Are&nbsp;you&nbsp;sure&nbsp;your&nbsp;site&nbsp;is&nbsp;running&nbsp;in&nbsp;release&nbsp;mode&nbsp;(debug=&quot;false&quot;&nbsp;in&nbsp;your&nbsp;web.config,&nbsp;and&nbsp;Release&nbsp;build&nbsp;config&nbsp;for&nbsp;assemblies)?&nbsp;Running&nbsp;in&nbsp;debug&nbsp;mode&nbsp;will&nbsp;turn&nbsp;off&nbsp;lots&nbsp;of&nbsp;optimisations&nbsp;that&nbsp;may&nbsp;cause&nbsp;slowdown.&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;might&nbsp;be&nbsp;worth&nbsp;trying&nbsp;out &lt;a&nbsp;href=&quot;http://msdn.microsoft.com/en-us/library/9ek5zak6.aspx&quot;&gt;Regex.CompileToAssembly&lt;/a&gt;&nbsp;to&nbsp;precompile&nbsp;your&nbsp;regular&nbsp;expressions&nbsp;-&nbsp;This&nbsp;will&nbsp;create&nbsp;a&nbsp;separate&nbsp;.NET&nbsp;assembly&nbsp;which&nbsp;has&nbsp;pre-optimised&nbsp;versions&nbsp;of&nbsp;the&nbsp;regular&nbsp;expressions.&nbsp;However&nbsp;I&#39;ve&nbsp;found&nbsp;this&nbsp;is&nbsp;only&nbsp;beneficial&nbsp;for&nbsp;very&nbsp;large&nbsp;regular&nbsp;expressions,&nbsp;and&nbsp;regular&nbsp;expressions&nbsp;that&nbsp;are&nbsp;used&nbsp;a&nbsp;lot.&nbsp;So&nbsp;it&nbsp;might&nbsp;not&nbsp;help&nbsp;too&nbsp;much&nbsp;(but&nbsp;it&nbsp;doesn&#39;t&nbsp;hurt&nbsp;to&nbsp;try&nbsp;it&nbsp;to&nbsp;see&nbsp;if&nbsp;it&nbsp;makes&nbsp;a&nbsp;difference&nbsp;or&nbsp;not).&nbsp;As&nbsp;far&nbsp;as&nbsp;I&nbsp;know,&nbsp;Mono&nbsp;doesn&#39;t&nbsp;support Regex.CompileToAssembly,&nbsp;but&nbsp;you&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;generate&nbsp;the&nbsp;assembly&nbsp;on&nbsp;Microsoft&nbsp;.NET,&nbsp;and&nbsp;then&nbsp;use&nbsp;the&nbsp;generated&nbsp;assembly&nbsp;with&nbsp;Mono.&nbsp;I&nbsp;haven&#39;t&nbsp;tried&nbsp;this&nbsp;myself&nbsp;though.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Out&nbsp;of&nbsp;curiosity,&nbsp;how&nbsp;are&nbsp;you&nbsp;profiling&nbsp;the&nbsp;code?&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Dec&nbsp;3,&nbsp;2012&nbsp;at&nbsp;1:20&nbsp;PM,&nbsp;Jordan&nbsp;Earls&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:earlz@lastyearswishes.com&quot;&nbsp;target=&quot;_blank&quot;&gt;earlz@lastyearswishes.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;So,&nbsp;I&nbsp;recently&nbsp;did&nbsp;a&nbsp;major&nbsp;update&nbsp;to&nbsp;my&nbsp;ASP.Net&nbsp;website&nbsp;running&nbsp;on&lt;br&gt;<br>
Mono&nbsp;(runs&nbsp;on&nbsp;.Net&nbsp;as&nbsp;well,&nbsp;but&nbsp;I&nbsp;work&nbsp;on&nbsp;it&nbsp;and&nbsp;host&nbsp;it&nbsp;with&nbsp;Mono).&lt;br&gt;<br>
Long&nbsp;story&nbsp;short,&nbsp;my&nbsp;websites&nbsp;performance&nbsp;sunk&nbsp;big&nbsp;time.&nbsp;It&nbsp;now&nbsp;takes&lt;br&gt;<br>
110ms&nbsp;for&nbsp;a&nbsp;response&nbsp;that&nbsp;once&nbsp;took&nbsp;less&nbsp;than&nbsp;20ms.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;traced&nbsp;down&nbsp;the&nbsp;big&nbsp;difference&nbsp;to&nbsp;using&nbsp;regular&nbsp;expressions&nbsp;as&nbsp;a&lt;br&gt;<br>
part&nbsp;of&nbsp;my&nbsp;routing&nbsp;and&nbsp;a&nbsp;few&nbsp;other&nbsp;things.&nbsp;(I&nbsp;have&nbsp;a&nbsp;custom&nbsp;MVC&lt;br&gt;<br>
framework:&nbsp;&lt;a&nbsp;href=&quot;https://bitbucket.org/earlz/barelymvc&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bitbucket.org/earlz/barelymvc&lt;/a&gt;).&lt;br&gt;<br>
&lt;br&gt;<br>
Here&nbsp;are&nbsp;some(maybe&nbsp;all)&nbsp;of&nbsp;the&nbsp;regular&nbsp;expressions&nbsp;being&nbsp;used&lt;br&gt;<br>
(they&#39;re&nbsp;really&nbsp;simple):&lt;br&gt;<br>
&lt;br&gt;<br>
@&quot;[^a-zA-Z0-9]\&nbsp;&quot;&lt;br&gt;<br>
@&quot;[^a-zA-Z0-9\-]&quot;&lt;br&gt;<br>
&quot;^[0-9a-zA-Z]+$&quot;&lt;br&gt;<br>
@&quot;^[-+]?[0-9]*\.?[0-9]+$&quot;&lt;br&gt;<br>
 &quot;^[-+]?[0-9]*$&quot;&lt;br&gt;<br>
&quot;^[0-9A-Fa-f]+$&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
All&nbsp;of&nbsp;these&nbsp;regular&nbsp;expressions&nbsp;are&nbsp;compiled&nbsp;once&nbsp;at&nbsp;application&lt;br&gt;<br>
startup&nbsp;and&nbsp;cached.&nbsp;(with&nbsp;RegexOptions.Compiled).&nbsp;They&nbsp;are&nbsp;used&nbsp;with&lt;br&gt;<br>
with&nbsp;IsMatch(input)&nbsp;or&nbsp;Replace(input,&nbsp;replacement);&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;profiling&nbsp;my&nbsp;application&nbsp;however,&nbsp;the&nbsp;number&nbsp;one&nbsp;most&nbsp;time&lt;br&gt;<br>
consuming&nbsp;method&nbsp;was&nbsp;`System.Text.RegularExpressions.Interpreter:Eval&lt;br&gt;<br>
(System.Text.RegularExpressions.Interpreter/Mode,int&amp;,int)`&nbsp;(my&lt;br&gt;<br>
database&nbsp;functions,&nbsp;which&nbsp;are&nbsp;also&nbsp;not&nbsp;really&nbsp;fast&nbsp;didn&#39;t&nbsp;even&nbsp;compare&lt;br&gt;<br>
to&nbsp;the&nbsp;amount&nbsp;of&nbsp;time&nbsp;this&nbsp;function&nbsp;consumed)&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;anything&nbsp;I&nbsp;can&nbsp;do&nbsp;to&nbsp;mitigate&nbsp;this&nbsp;problem?&nbsp;I&#39;m&nbsp;using&nbsp;the&lt;br&gt;<br>
latest&nbsp;stable&nbsp;version&nbsp;of&nbsp;Mono&nbsp;(Arch&nbsp;Linux)&nbsp;on&nbsp;a&nbsp;64-bit&nbsp;platform.&nbsp;Is&nbsp;it&lt;br&gt;<br>
true&nbsp;also&nbsp;that&nbsp;regular&nbsp;expression&nbsp;should&nbsp;now&nbsp;be&nbsp;on&nbsp;par&nbsp;with&nbsp;.Net&#39;s&lt;br&gt;<br>
implementation?&nbsp;From&nbsp;what&nbsp;I&nbsp;understand,&nbsp;mono&nbsp;compiles&nbsp;them&nbsp;to&nbsp;IL&lt;br&gt;<br>
correct?&nbsp;Is&nbsp;there&nbsp;anything&nbsp;to&nbsp;watch&nbsp;for&nbsp;in&nbsp;regular&nbsp;expressions&nbsp;that&lt;br&gt;<br>
could&nbsp;give&nbsp;me&nbsp;performance&nbsp;problems&nbsp;like&nbsp;this?&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
Jordan&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
