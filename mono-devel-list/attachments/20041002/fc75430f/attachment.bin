using System;
using System.Drawing;
using Gtk;

public class DrawText	{
	
	static int width = 600;
	static int height = 400;
	
	static float textheight = 10;
	
	Bitmap image;
	Graphics g;
	Pen pen;
	Brush brush;
	StringFormat sf;
	
	public Gdk.Pixbuf pb;
	
	public DrawText (string s)	{
		
		image = new Bitmap (width, height);
		g = Graphics.FromImage (image);
		brush = Brushes.Black;
		Font font = new Font (FontFamily.GenericSansSerif, textheight, FontStyle.Underline);
		StringFormat sf = new StringFormat (StringFormatFlags.DirectionVertical);
		RectangleF rect = new RectangleF (10, 10, 100, 15);
		
		g.DrawString (s, font, brush, rect, sf);
		
		image.Save ("drawstring.png", System.Drawing.Imaging.ImageFormat.Png);
		pb = new Gdk.Pixbuf ("drawstring.png");
		
	}
	
	public static void Main ()	{
		Application.Init ();
		
		Window w = new Window ("testing drawstring");
		w.DeleteEvent += new DeleteEventHandler (delete_event);
		
		DrawText dt = new DrawText ("My long test string");
		Gtk.Image img = new Gtk.Image (dt.pb);
		
		w.Add (img);
		w.ShowAll ();
		
		Application.Run ();
	}
	
	public static void delete_event (object o, DeleteEventArgs a)	{
		Application.Quit ();
	}
}