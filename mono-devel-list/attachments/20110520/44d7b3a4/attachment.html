<tt>
Hello&nbsp;I&amp;#39;ve&nbsp;tried&nbsp;the&nbsp;dynamic&nbsp;loading&nbsp;of&nbsp;mono&nbsp;and&nbsp;I&nbsp;havn&amp;#39;t&nbsp;had&nbsp;any&nbsp;success.&lt;br&gt;&lt;br&gt;I&amp;#39;ve&nbsp;written&nbsp;an&nbsp;example&nbsp;to&nbsp;test&nbsp;it&nbsp;out,&nbsp;this&nbsp;example&nbsp;is&nbsp;tested&nbsp;on&nbsp;Ubuntu&nbsp;10.04&nbsp;(with&nbsp;GCC&nbsp;4.3,&nbsp;Mono&nbsp;2.6.7),&nbsp;Debian&nbsp;6&nbsp;(with&nbsp;GCC&nbsp;4.4,&nbsp;GCC4.6,&nbsp;Mono&nbsp;2.6.7,&nbsp;Mono&nbsp;2.10.1),&nbsp;Arch&nbsp;Linux&nbsp;(with&nbsp;GCC&nbsp;4.6,&nbsp;Mono&nbsp;2.10.2)&nbsp;and&nbsp;no&nbsp;success.&nbsp;I&amp;#39;ve&nbsp;tried&nbsp;loading&nbsp;libmono&nbsp;directly&nbsp;with&nbsp;dlload,&nbsp;dlloading&nbsp;mono&nbsp;via&nbsp;a&nbsp;dlloaded&nbsp;library&nbsp;and&nbsp;as&nbsp;in&nbsp;the&nbsp;example&nbsp;below.&lt;br&gt;<br>
&lt;br&gt;//Makefile&lt;br&gt;all:&nbsp;main.cpp&nbsp;mymono.c&lt;br&gt;   &nbsp;gcc&nbsp;-shared&nbsp;-fPIC&nbsp;-Wl,-soname,libmymono.so&nbsp;`pkg-config&nbsp;--cflags&nbsp;--libs&nbsp;mono-2`&nbsp;-o&nbsp;libmymono.so&nbsp;mymono.c&lt;br&gt;   &nbsp;g++&nbsp;-ldl&nbsp;main.cpp&nbsp;-o&nbsp;app&lt;br&gt;&lt;br&gt;//mymono.c&lt;br&gt;#include&nbsp;&amp;lt;mono/jit/jit.h&amp;gt;&lt;br&gt;<br>
&lt;br&gt;MonoDomain*&nbsp;domain;&lt;br&gt;&lt;br&gt;void&nbsp;init(void)&lt;br&gt;{&lt;br&gt;   &nbsp;printf(&amp;quot;Init&nbsp;called\n&amp;quot;);&lt;br&gt;   &nbsp;domain&nbsp;=&nbsp;mono_jit_init(&amp;quot;libmymono.so&amp;quot;);&lt;br&gt;}&lt;br&gt;&lt;br&gt;//main.cpp&lt;br&gt;#include&nbsp;&amp;lt;stdio.h&amp;gt;<br>
&lt;br&gt;#include&nbsp;&amp;lt;dlfcn.h&amp;gt;<br>
&lt;br&gt; &lt;br&gt;int&nbsp;loadUnloadMonoLibrary()<br>
&lt;br&gt;{<br>
&lt;br&gt;   &nbsp;void*&nbsp;mono_library;<br>
&lt;br&gt; &lt;br&gt;   &nbsp;mono_library&nbsp;=&nbsp;dlopen(&amp;quot;./libmymono.so&amp;quot;,&nbsp;RTLD_NOW);<br>
&lt;br&gt;   &nbsp;if(mono_library&nbsp;==&nbsp;NULL)&nbsp;{<br>
&lt;br&gt;   &nbsp;   &nbsp;return&nbsp;1;<br>
&lt;br&gt;   &nbsp;}<br>
&lt;br&gt;   &nbsp; &lt;br&gt;   &nbsp;void*&nbsp;initializer&nbsp;=&nbsp;dlsym(mono_library,&nbsp;&amp;quot;init&amp;quot;);<br>
&lt;br&gt;   &nbsp;if(initializer&nbsp;==&nbsp;NULL)&nbsp;{<br>
&lt;br&gt;   &nbsp;   &nbsp;return&nbsp;2;<br>
&lt;br&gt;   &nbsp;}<br>
&lt;br&gt;   &nbsp; &lt;br&gt;   &nbsp;typedef&nbsp;void&nbsp;(*mono_init_function_type)(void);<br>
&lt;br&gt;   &nbsp;union<br>
&lt;br&gt;   &nbsp;{<br>
&lt;br&gt;   &nbsp;   &nbsp;mono_init_function_type&nbsp;func;<br>
&lt;br&gt;   &nbsp;   &nbsp;void&nbsp;*&nbsp;obj;<br>
&lt;br&gt;   &nbsp;}&nbsp;alias;<br>
&lt;br&gt;   &nbsp;alias.obj&nbsp;=&nbsp;initializer;<br>
&lt;br&gt;   &nbsp;mono_init_function_type&nbsp;init_func&nbsp;=&nbsp;alias.func;<br>
&lt;br&gt;   &nbsp; &lt;br&gt;   &nbsp;init_func();<br>
&lt;br&gt;   &nbsp; &lt;br&gt;   &nbsp;dlclose(mono_library);<br>
&lt;br&gt;   &nbsp; &lt;br&gt;   &nbsp;return&nbsp;0;<br>
&lt;br&gt;}<br>
&lt;br&gt; &lt;br&gt;int&nbsp;main()<br>
&lt;br&gt;{<br>
&lt;br&gt;   &nbsp;int&nbsp;i&nbsp;=&nbsp;loadUnloadMonoLibrary();<br>
&lt;br&gt;   &nbsp;int&nbsp;j&nbsp;=&nbsp;loadUnloadMonoLibrary();<br>
&lt;br&gt;   &nbsp;printf(&amp;quot;Status&nbsp;%i&nbsp;%i\n&amp;quot;,&nbsp;i,&nbsp;j);<br>
&lt;br&gt;   &nbsp;return&nbsp;j;<br>
&lt;br&gt;}&lt;br&gt;&lt;br&gt;Thanks!&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2011/5/16&nbsp;Martin&nbsp;Arvidssson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;/user/SendEmail.jtp?type=node&amp;node=3537932&amp;i=0&quot;&nbsp;target=&quot;_top&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;link=&quot;external&quot;&gt;[hidden&nbsp;email]&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;p&gt;Thanks,&nbsp;I&nbsp;will&nbsp;try&nbsp;the&nbsp;dynamic&nbsp;loading.&nbsp;Global&nbsp;variables&nbsp;are&nbsp;gone&nbsp;after&nbsp;my&nbsp;driver&nbsp;is&nbsp;restarted&nbsp;from&nbsp;the&nbsp;host&nbsp;application.&lt;/p&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>
<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>
&lt;br/&gt;&lt;hr&nbsp;align=&quot;left&quot;&nbsp;width=&quot;300&quot;&nbsp;/&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/Embedding-Mono-multiple-calls-to-mono-jit-init-tp3519842p3537932.html&quot;&gt;Re:&nbsp;Embedding&nbsp;Mono:&nbsp;multiple&nbsp;calls&nbsp;to&nbsp;mono_jit_init&lt;/a&gt;&lt;br/&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/Mono-Dev-f1517221.html&quot;&gt;Mono&nbsp;-&nbsp;Dev&nbsp;mailing&nbsp;list&nbsp;archive&lt;/a&gt;&nbsp;at&nbsp;Nabble.com.&lt;br/&gt;
</tt>
