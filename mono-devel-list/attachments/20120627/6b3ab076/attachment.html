<tt>
&lt;h4&gt;Hello<br>
<br>
After&nbsp;more&nbsp;testing&nbsp;between&nbsp;Mac&nbsp;and&nbsp;Windows&nbsp;this&nbsp;is&nbsp;what&nbsp;i&nbsp;got<br>
<br>
Crash&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Windows&nbsp;Mac&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Linux<br>
Without&nbsp;ErroHandler&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes<br>
With&nbsp;ErrorHandler&nbsp;(return&nbsp;false&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes<br>
With&nbsp;ErrorHandler&nbsp;(return&nbsp;true)&nbsp;No&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No<br>
<br>
<br>
Before&nbsp;i&nbsp;was&nbsp;always&nbsp;returning&nbsp;false&nbsp;in&nbsp;IErrorHandler&nbsp;implementation&nbsp;because&nbsp;i&nbsp;only&nbsp;implemented&nbsp;for&nbsp;logging&nbsp;purpose&nbsp;but&nbsp;when&nbsp;i&nbsp;return&nbsp;true&nbsp;for&nbsp;the&nbsp;HandleError&nbsp;,&nbsp;the&nbsp;application&nbsp;fire&nbsp;the&nbsp;error&nbsp;and&nbsp;log&nbsp;it&nbsp;but&nbsp;never&nbsp;crash.<br>
<br>
Now&nbsp;i&nbsp;trying&nbsp;to&nbsp;debug&nbsp;the&nbsp;application&nbsp;under&nbsp;MonoDevelop&nbsp;and&nbsp;repreduce&nbsp;the&nbsp;error,&nbsp;below&nbsp;is&nbsp;what&nbsp;i&nbsp;got&nbsp;<br>
<br>
&lt;h6&gt;System.InvalidOperationException:&nbsp;Cannot&nbsp;be&nbsp;changed&nbsp;after&nbsp;headers&nbsp;are&nbsp;sent.<br>
&nbsp;&nbsp;at&nbsp;System.Net.HttpListenerResponse.set_ContentType&nbsp;(System.String&nbsp;value)&nbsp;[0x00027]&nbsp;in&nbsp;/private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System/System.Net/HttpListenerResponse.cs:107<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Channels.Http.HttpStandaloneResponseInfo.set_ContentType&nbsp;(System.String&nbsp;value)&nbsp;[0x00000]&nbsp;in&nbsp;/private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel.Channels.Http/HttpContextInfo.cs:274<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Channels.Http.HttpRequestContext.InternalReply&nbsp;(System.ServiceModel.Channels.Message&nbsp;msg,&nbsp;TimeSpan&nbsp;timeout)&nbsp;[0x00046]&nbsp;in&nbsp;/private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel.Channels.Http/HttpRequestContext.cs:140<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Channels.Http.HttpRequestContext.Reply&nbsp;(System.ServiceModel.Channels.Message&nbsp;msg,&nbsp;TimeSpan&nbsp;timeout)&nbsp;[0x00000]&nbsp;in&nbsp;/private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel.Channels.Http/HttpRequestContext.cs:101<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Channels.Http.HttpRequestContext.Reply&nbsp;(System.ServiceModel.Channels.Message&nbsp;msg)&nbsp;[0x00000]&nbsp;in&nbsp;/private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel.Channels.Http/HttpRequestContext.cs:96<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Dispatcher.ListenerLoopManager.ProcessRequest&nbsp;(IReplyChannel&nbsp;reply,&nbsp;System.ServiceModel.Channels.RequestContext&nbsp;rc)&nbsp;[0x0003b]&nbsp;in&nbsp;/private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel.Dispatcher/ChannelDispatcher.cs:601<br>
&nbsp;&nbsp;at&nbsp;System.ServiceModel.Dispatcher.ListenerLoopManager.TryReceiveRequestDone&nbsp;(IAsyncResult&nbsp;result)&nbsp;[0x0001a]&nbsp;in&nbsp;/private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel.Dispatcher/ChannelDispatcher.cs:575&lt;/h6&gt;<br>
<br>
Reproducing&nbsp;the&nbsp;error&nbsp;is&nbsp;very&nbsp;simple,&nbsp;just&nbsp;host&nbsp;any&nbsp;application&nbsp;under&nbsp;console&nbsp;app&nbsp;and&nbsp;in&nbsp;any&nbsp;service&nbsp;function&nbsp;put&nbsp;Thread.Sleep(..)&nbsp;to&nbsp;give&nbsp;you&nbsp;time&nbsp;to&nbsp;close&nbsp;the&nbsp;browser&nbsp;before&nbsp;it&nbsp;reply.&nbsp;Then&nbsp;call&nbsp;this&nbsp;function&nbsp;from&nbsp;any&nbsp;client&nbsp;and&nbsp;close&nbsp;it&nbsp;before&nbsp;getting&nbsp;the&nbsp;response.<br>
<br>
In&nbsp;my&nbsp;live&nbsp;program&nbsp;i&nbsp;don't&nbsp;put&nbsp;Thread.sleep&nbsp;it&nbsp;is&nbsp;only&nbsp;to&nbsp;give&nbsp;us&nbsp;time&nbsp;between&nbsp;calling&nbsp;the&nbsp;function&nbsp;and&nbsp;closing&nbsp;the&nbsp;browser.<br>
<br>
Under&nbsp;windows&nbsp;we&nbsp;got&nbsp;the&nbsp;bellow&nbsp;that&nbsp;don't&nbsp;crash&nbsp;the&nbsp;application<br>
<br>
error.Message&nbsp;&nbsp;&nbsp;&quot;An&nbsp;operation&nbsp;was&nbsp;attempted&nbsp;on&nbsp;a&nbsp;nonexistent&nbsp;network&nbsp;connection&quot;<br>
error.InnerException&nbsp;&nbsp;&nbsp;&nbsp;{&quot;An&nbsp;operation&nbsp;was&nbsp;attempted&nbsp;on&nbsp;a&nbsp;nonexistent&nbsp;network&nbsp;connection&quot;}&nbsp;&nbsp;&nbsp;&nbsp;System.Exception&nbsp;{System.Net.HttpListenerException}<br>
error.ErrorCode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1229<br>
<br>
BR<br>
Shahbour<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&lt;br/&gt;&lt;hr&nbsp;align=&quot;left&quot;&nbsp;width=&quot;300&quot;&nbsp;/&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/WCF-Fail-with-System-Net-Sockets-SocketException-Connection-reset-by-peer-tp4650173p4650210.html&quot;&gt;Re:&nbsp;WCF&nbsp;Fail&nbsp;with&nbsp;System.Net.Sockets.SocketException:&nbsp;Connection&nbsp;reset&nbsp;by&nbsp;peer&lt;/a&gt;&lt;br/&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://mono.1490590.n4.nabble.com/Mono-Dev-f1517221.html&quot;&gt;Mono&nbsp;-&nbsp;Dev&nbsp;mailing&nbsp;list&nbsp;archive&lt;/a&gt;&nbsp;at&nbsp;Nabble.com.&lt;br/&gt;
</tt>
