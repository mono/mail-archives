<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;Not&nbsp;knowing&nbsp;anything&nbsp;else,&nbsp;I&nbsp;saw&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;there&nbsp;was&nbsp;very&nbsp;recently&nbsp;work&nbsp;done&nbsp;in&nbsp;Async&nbsp;Sockets,&nbsp;The&nbsp;following<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commit,&nbsp;date&nbsp;June&nbsp;18th&nbsp;(about&nbsp;a&nbsp;week&nbsp;and&nbsp;a&nbsp;half&nbsp;ago)&nbsp;is&nbsp;titled<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Fix&nbsp;Async&nbsp;Sockets&quot;,&nbsp;it's&nbsp;a&nbsp;one&nbsp;line&nbsp;change&nbsp;but&nbsp;seems&nbsp;to&nbsp;include&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unit&nbsp;test&nbsp;which&nbsp;would&nbsp;indicate&nbsp;they&nbsp;are&nbsp;working&nbsp;properly&nbsp;now:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a<br>
href=&quot;https://github.com/mono/mono/commit/eb0ef90fc4e63f11e9fee29f5806ca605317c503&quot;&gt;https://github.com/mono/mono/commit/eb0ef90fc4e63f11e9fee29f5806ca605317c503&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;06/27/2012&nbsp;03:08&nbsp;AM,&nbsp;Greg&nbsp;Young&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
cite=&quot;mid:CAC9RQth7iG+rbvzk8FgaoXWPYS2E6kiA6f_zqPCM_cyjSb_FYQ@mail.gmail.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;We&nbsp;are&nbsp;experiencing&nbsp;an&nbsp;issue&nbsp;with&nbsp;async&nbsp;behaviours&nbsp;in&nbsp;sockets&nbsp;(with<br>
SendAsync/callback&nbsp;not&nbsp;Begin/End).<br>
<br>
Our&nbsp;visible&nbsp;issue&nbsp;is&nbsp;that&nbsp;when&nbsp;in&nbsp;a&nbsp;send&nbsp;loop&nbsp;we&nbsp;will&nbsp;fail&nbsp;on&nbsp;our<br>
heartbeats.&nbsp;After&nbsp;debugging&nbsp;and&nbsp;counting&nbsp;calls&nbsp;into/out&nbsp;of<br>
SendAsync/callback&nbsp;we&nbsp;see&nbsp;that&nbsp;we&nbsp;are&nbsp;inside&nbsp;of&nbsp;a&nbsp;call&nbsp;to&nbsp;SendAsync<br>
(eg:&nbsp;it&nbsp;never&nbsp;returns,&nbsp;in&nbsp;our&nbsp;case&nbsp;for&nbsp;10&nbsp;seconds&nbsp;before&nbsp;we&nbsp;declare<br>
the&nbsp;socket&nbsp;dead).&nbsp;We&nbsp;can&nbsp;duplicate&nbsp;this&nbsp;fairly&nbsp;regularly&nbsp;on<br>
mac/bsd/linux&nbsp;though&nbsp;its&nbsp;nonconsistent&nbsp;(sometimes&nbsp;it&nbsp;may&nbsp;happen<br>
repeatedly&nbsp;other&nbsp;times&nbsp;it&nbsp;works&nbsp;fine).&nbsp;The&nbsp;code&nbsp;does&nbsp;not&nbsp;have&nbsp;such<br>
issues&nbsp;on&nbsp;MS&nbsp;CLR.&nbsp;We&nbsp;are&nbsp;also&nbsp;running&nbsp;on&nbsp;loopback&nbsp;so&nbsp;its&nbsp;unlikely&nbsp;that<br>
an&nbsp;underlying&nbsp;network&nbsp;problem&nbsp;is&nbsp;causing&nbsp;the&nbsp;hang&nbsp;up.&nbsp;The&nbsp;code&nbsp;itself<br>
is&nbsp;fairly&nbsp;straight&nbsp;forward&nbsp;(not&nbsp;that&nbsp;different&nbsp;than&nbsp;the&nbsp;MS&nbsp;example&nbsp;of<br>
the&nbsp;API&nbsp;except&nbsp;that&nbsp;its&nbsp;fully&nbsp;async&nbsp;(separate&nbsp;send/receive&nbsp;loops&nbsp;while<br>
the&nbsp;example&nbsp;is&nbsp;request/response))<br>
<br>
I&nbsp;am&nbsp;pulling&nbsp;sources&nbsp;now&nbsp;to&nbsp;build&nbsp;latest&nbsp;but&nbsp;does&nbsp;anyone&nbsp;happen&nbsp;to<br>
know&nbsp;of&nbsp;known&nbsp;issues&nbsp;with&nbsp;this&nbsp;sort&nbsp;of&nbsp;thing?<br>
<br>
Cheers,<br>
<br>
Greg<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
