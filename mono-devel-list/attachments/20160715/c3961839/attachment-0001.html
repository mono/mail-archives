<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;Should&nbsp;be&nbsp;fixed&nbsp;by:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/mono/mono/commit/1ad5c0a021e3ff2bffd5a0531f492ddc7cace877&quot;&gt;https://github.com/mono/mono/commit/1ad5c0a021e3ff2bffd5a0531f492ddc7cace877&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Unfortunately,&nbsp;some&nbsp;arm&nbsp;cpu-s&nbsp;behave&nbsp;unpredictably&nbsp;instead&nbsp;of&nbsp;faulting&nbsp;when&nbsp;encountering&nbsp;unaligned&nbsp;loads/stores.&lt;/div&gt;&lt;div&gt;As&nbsp;for&nbsp;big-endian,&nbsp;we&nbsp;don&#39;t&nbsp;support&nbsp;big-endian&nbsp;arm&nbsp;so&nbsp;that&nbsp;assert&nbsp;triggering&nbsp;is&nbsp;not&nbsp;a&nbsp;problem.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;Zoltan&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Jul&nbsp;15,&nbsp;2016&nbsp;at&nbsp;9:47&nbsp;AM,&nbsp;Henry&nbsp;Margies&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:henry.margies@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;henry.margies@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Hi&nbsp;all,&lt;/span&gt;&lt;span&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;span&gt;I’m&nbsp;running&nbsp;into&nbsp;a&nbsp;strange&nbsp;problem&nbsp;when&nbsp;trying&nbsp;to&nbsp;use&nbsp;Mono&nbsp;4.4.1.0&nbsp;on&nbsp;an&nbsp;ARM&nbsp;architecture.&lt;br&gt;&lt;/span&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;span&gt;When&nbsp;I&nbsp;try&nbsp;to&nbsp;execute&nbsp;a&nbsp;Mono&nbsp;application&nbsp;or&nbsp;simply&nbsp;run&nbsp;mcs,&nbsp;I&nbsp;get&nbsp;the&nbsp;following&nbsp;output:&lt;br&gt;&lt;/span&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;#&nbsp;mcs&lt;br&gt;*&nbsp;Assertion&nbsp;at&nbsp;unwind.c:385,&nbsp;condition&nbsp;`read16&nbsp;(p)&nbsp;==&nbsp;(guint32)(op-&gt;when&nbsp;- loc)&#39;&nbsp;not&nbsp;met&lt;br&gt;&lt;br&gt;Stacktrace:&lt;br&gt;&lt;br&gt;&lt;br&gt;Native&nbsp;stacktrace:&lt;br&gt;&lt;br&gt;&lt;br&gt;Debug&nbsp;info&nbsp;from&nbsp;gdb:&lt;br&gt;&lt;br&gt;&lt;br&gt;=================================================================&lt;br&gt;Got&nbsp;a&nbsp;SIGABRT&nbsp;while&nbsp;executing&nbsp;native&nbsp;code.&nbsp;This&nbsp;usually&nbsp;indicates&lt;br&gt;a&nbsp;fatal&nbsp;error&nbsp;in&nbsp;the&nbsp;mono&nbsp;runtime&nbsp;or&nbsp;one&nbsp;of&nbsp;the&nbsp;native&nbsp;libraries &lt;br&gt;used&nbsp;by&nbsp;your&nbsp;application.&lt;br&gt;=================================================================&lt;br&gt;&lt;br&gt;Aborted&lt;br&gt;&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;same&nbsp;application&nbsp;and&nbsp;mcs&nbsp;work&nbsp;fine&nbsp;with&nbsp;Mono&nbsp;4.0.2,&nbsp;I&nbsp;used&nbsp;a&nbsp;while&nbsp;ago.&nbsp;Looking&nbsp;at&nbsp;the&nbsp;source&nbsp;code&nbsp;in&nbsp;mono/mini/unwind.c&nbsp;in&nbsp;function&nbsp;mono_unwind_ops_encode_full,&nbsp;I&nbsp;can&nbsp;see&nbsp;that&nbsp;the&nbsp;code&nbsp;tries&nbsp;to&nbsp;cast&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;guint16&nbsp;or&nbsp;guint32&nbsp;pointer,&nbsp;which&nbsp;will&nbsp;fail&nbsp;on&nbsp;(my)&nbsp;ARM&nbsp;when&nbsp;the&nbsp;address&nbsp;is&nbsp;not&nbsp;aligned&nbsp;(lines&nbsp;378&nbsp;and&nbsp;384).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap;background-color:rgb(255,255,255)&quot;&gt;}&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(167,29,93);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap&quot;&gt;else&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap;background-color:rgb(255,255,255)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(167,29,93);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap&quot;&gt;if&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap;background-color:rgb(255,255,255)&quot;&gt;&nbsp;(op-&gt;when&nbsp;-&nbsp;loc&nbsp;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,134,179);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap&quot;&gt;256&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap;background-color:rgb(255,255,255)&quot;&gt;)&nbsp;{&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap;background-color:rgb(255,255,255)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;*p&nbsp;++&nbsp;=&nbsp;DW_CFA_advance_loc2;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap;background-color:rgb(248,238,199)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;*(guint16*)p&nbsp;=&nbsp;(guint16)(op-&gt;when&nbsp;-&nbsp;loc);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(0,134,179);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;g_assert&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap;background-color:rgb(255,255,255)&quot;&gt;&nbsp;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,134,179);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap&quot;&gt;read16&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Consolas,&#39;Liberation&nbsp;Mono&#39;,Menlo,Courier,monospace;white-space:pre-wrap;background-color:rgb(255,255,255)&quot;&gt;&nbsp;(p)&nbsp;==&nbsp;(guint32)(op-&gt;when&nbsp;-&nbsp;loc));&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;is&nbsp;interesting,&nbsp;is&nbsp;that&nbsp;the&nbsp;g_assert&nbsp;is&nbsp;using&nbsp;the&nbsp;read16&nbsp;macro,&nbsp;which&nbsp;deals&nbsp;with&nbsp;alignment&nbsp;issues&nbsp;and&nbsp;also&nbsp;endianness.&nbsp;But&nbsp;with&nbsp;this,&nbsp;I&nbsp;can’t&nbsp;really&nbsp;see&nbsp;how&nbsp;the&nbsp;code&nbsp;would&nbsp;work&nbsp;successfully&nbsp;with&nbsp;big&nbsp;endianness&nbsp;either. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&gt;The&nbsp;code&nbsp;in&nbsp;question&nbsp;hasn’t&nbsp;changed&nbsp;between&nbsp;4.0&nbsp;and&nbsp;4.4&nbsp;but&nbsp;the&nbsp;pointer&nbsp;casting&nbsp;is&nbsp;only&nbsp;executed&nbsp;when&nbsp;“op-&gt;when&nbsp;-&nbsp;loc&nbsp;&gt; 256”&nbsp;is&nbsp;true.&nbsp;So&nbsp;I&nbsp;wonder&nbsp;why&nbsp;this&nbsp;changed&nbsp;for&nbsp;me&nbsp;between&nbsp;4.0&nbsp;and&nbsp;4.4&nbsp;and&nbsp;if&nbsp;I’m&nbsp;even&nbsp;supposed&nbsp;to&nbsp;run&nbsp;into&nbsp;these&nbsp;cases&nbsp;on&nbsp;an&nbsp;ARM&nbsp;architecture?&nbsp;When&nbsp;I&nbsp;fix&nbsp;the&nbsp;two&nbsp;problems,&nbsp;everything&nbsp;seems&nbsp;to&nbsp;run&nbsp;fine.&lt;/span&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Because&nbsp;I&nbsp;don’t&nbsp;think&nbsp;that&nbsp;I’m&nbsp;the&nbsp;first&nbsp;to&nbsp;try&nbsp;to&nbsp;execute “mcs”&nbsp;or&nbsp;run&nbsp;a&nbsp;Mono&nbsp;application&nbsp;on&nbsp;an&nbsp;ARM&nbsp;architecture,&nbsp;I&nbsp;kind&nbsp;of&nbsp;blame&nbsp;my&nbsp;build&nbsp;system.&nbsp;I&nbsp;use&nbsp;buildroot&nbsp;and&nbsp;run&nbsp;my&nbsp;system&nbsp;on&nbsp;an&nbsp;ARM&nbsp;926&nbsp;device. Unfortunately,&nbsp;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;what&nbsp;the&nbsp;code&nbsp;in &lt;/span&gt;mono_unwind_ops_encode_full&nbsp;actually&nbsp;does&nbsp;and&nbsp;when&nbsp;op-&gt;when&nbsp;-&nbsp;loc&nbsp;would&nbsp;actually&nbsp;be&nbsp;greater&nbsp;than&nbsp;256.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;hope&nbsp;that&nbsp;someone&nbsp;here&nbsp;could&nbsp;give&nbsp;me&nbsp;some&nbsp;pointers&nbsp;on&nbsp;why&nbsp;the&nbsp;if&nbsp;condition&nbsp;could&nbsp;be&nbsp;true&nbsp;and&nbsp;never&nbsp;was&nbsp;before&nbsp;or&nbsp;in&nbsp;fact&nbsp;is&nbsp;not&nbsp;true&nbsp;for&nbsp;any&nbsp;ARM&nbsp;device,&nbsp;so&nbsp;I&nbsp;can&nbsp;check&nbsp;my&nbsp;build&nbsp;system.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Henry&lt;/div&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.dot.net&quot;&gt;Mono-devel-list@lists.dot.net&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.dot.net/mailman/listinfo/mono-devel-list&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.dot.net/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
