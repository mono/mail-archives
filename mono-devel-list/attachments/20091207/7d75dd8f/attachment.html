<tt>
malloc-mempools&nbsp;is&nbsp;not&nbsp;required&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;valgrind&nbsp;mono.&nbsp;It&nbsp;helps&nbsp;to&nbsp;do&lt;div&gt;mempool&nbsp;usage&nbsp;profilling.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Dec&nbsp;7,&nbsp;2009&nbsp;at&nbsp;2:44&nbsp;PM,&nbsp;Daniel&nbsp;Weuthen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:daniel.weuthen-ml@deepinvent.com&quot;&gt;daniel.weuthen-ml@deepinvent.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;System&nbsp;ist&nbsp;Ubuntu&nbsp;9.10&nbsp;and&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;compile&nbsp;mono&nbsp;2.4.2.3&nbsp;with&lt;br&gt;<br>
--with-malloc-mempools=yes&lt;br&gt;<br>
&lt;br&gt;<br>
make&nbsp;always&nbsp;ends&nbsp;like&nbsp;this,&nbsp;while&nbsp;comliling&nbsp;withouth&nbsp;that&nbsp;malloc&lt;br&gt;<br>
parameter&nbsp;works&nbsp;find.&nbsp;I&nbsp;want&nbsp;to&nbsp;use&nbsp;valgrind&nbsp;to&nbsp;debug&nbsp;a&nbsp;mono&nbsp;crash,&nbsp;so&lt;br&gt;<br>
from&nbsp;what&nbsp;I&nbsp;have&nbsp;read&nbsp;I&nbsp;need&nbsp;to&nbsp;get&nbsp;a&nbsp;mono&nbsp;version&nbsp;running&nbsp;with&lt;br&gt;<br>
malloc-mempools,&nbsp;right?&lt;br&gt;<br>
&lt;br&gt;<br>
[..]&lt;br&gt;<br>
make[3]:&nbsp;Betrete&nbsp;Verzeichnis&nbsp;&amp;#39;/usr/src/mono-2.4.2.3/docs&amp;#39;&lt;br&gt;<br>
MCS&nbsp; &nbsp; &nbsp;[net_2_0]&nbsp;convert.exe&lt;br&gt;<br>
Stacktrace:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; at&nbsp;System.SystemException..ctor&nbsp;(string)&nbsp;&amp;lt;0xffffffff&amp;gt;&lt;br&gt;<br>
&nbsp; at&nbsp;System.SystemException..ctor&nbsp;(string)&nbsp;&amp;lt;0x00018&amp;gt;&lt;br&gt;<br>
&nbsp; at&nbsp;System.OutOfMemoryException..ctor&nbsp;(string)&nbsp;&amp;lt;0x00017&amp;gt;&lt;br&gt;<br>
&nbsp; at&nbsp;(wrapper&nbsp;runtime-invoke)&nbsp;object.runtime_invoke_void__this___object&lt;br&gt;<br>
(object,intptr,intptr,intptr)&nbsp;&amp;lt;0xffffffff&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Native&nbsp;stacktrace:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; /usr/src/mono-2.4.2.3/mono/mini/mono&nbsp;[0x47a78f]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; /usr/src/mono-2.4.2.3/mono/mini/mono&nbsp;[0x4adbdf]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; /lib/libpthread.so.0&nbsp;[0x2af716099190]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; /usr/src/mono-2.4.2.3/mono/mini/mono(mono_mempool_empty+0x20)&nbsp;[0x4f1c90]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; /usr/src/mono-2.4.2.3/mono/mini/mono(mono_mempool_destroy+0x9)&nbsp;[0x4f1cb9]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; /usr/src/mono-2.4.2.3/mono/mini/mono&nbsp;[0x41b6b5]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; /usr/src/mono-2.4.2.3/mono/mini/mono&nbsp;[0x41eb1e]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; /usr/src/mono-2.4.2.3/mono/mini/mono&nbsp;[0x48235d]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; [0x40488168]&lt;br&gt;<br>
&lt;br&gt;<br>
Debug&nbsp;info&nbsp;from&nbsp;gdb:&lt;br&gt;<br>
&lt;br&gt;<br>
[Thread&nbsp;debugging&nbsp;using&nbsp;libthread_db&nbsp;enabled]&lt;br&gt;<br>
[New&nbsp;Thread&nbsp;0x2aaaab9c0910&nbsp;(LWP&nbsp;2175)]&lt;br&gt;<br>
0x00002af7160980cb&nbsp;in&nbsp;read&nbsp;()&nbsp;from&nbsp;/lib/libpthread.so.0&lt;br&gt;<br>
&nbsp; 2&nbsp;Thread&nbsp;0x2aaaab9c0910&nbsp;(LWP&nbsp;2175)&nbsp; 0x00002af7160988f1&nbsp;in&nbsp;nanosleep&nbsp;()&lt;br&gt;<br>
from&nbsp;/lib/libpthread.so.0&lt;br&gt;<br>
*&nbsp;1&nbsp;Thread&nbsp;0x2af716ac9200&nbsp;(LWP&nbsp;2113)&nbsp; 0x00002af7160980cb&nbsp;in&nbsp;read&nbsp;()&nbsp;from&lt;br&gt;<br>
/lib/libpthread.so.0&lt;br&gt;<br>
&lt;br&gt;<br>
Thread&nbsp;2&nbsp;(Thread&nbsp;0x2aaaab9c0910&nbsp;(LWP&nbsp;2175)):&lt;br&gt;<br>
#0&nbsp; 0x00002af7160988f1&nbsp;in&nbsp;nanosleep&nbsp;()&nbsp;from&nbsp;/lib/libpthread.so.0&lt;br&gt;<br>
#1&nbsp; 0x0000000000557452&nbsp;in&nbsp;collection_thread&nbsp;(unused=&amp;lt;value&nbsp;optimised&lt;br&gt;<br>
out&amp;gt;)&nbsp;at&nbsp;collection.c:34&lt;br&gt;<br>
#2&nbsp; 0x00002af716090a04&nbsp;in&nbsp;start_thread&nbsp;(arg=&amp;lt;value&nbsp;optimised&nbsp;out&amp;gt;)&nbsp;at&lt;br&gt;<br>
pthread_create.c:300&lt;br&gt;<br>
#3&nbsp; 0x00002af71660a7bd&nbsp;in&nbsp;clone&nbsp;()&nbsp;at&lt;br&gt;<br>
../sysdeps/unix/sysv/linux/x86_64/clone.S:112&lt;br&gt;<br>
#4&nbsp; 0x0000000000000000&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
&lt;br&gt;<br>
Thread&nbsp;1&nbsp;(Thread&nbsp;0x2af716ac9200&nbsp;(LWP&nbsp;2113)):&lt;br&gt;<br>
#0&nbsp; 0x00002af7160980cb&nbsp;in&nbsp;read&nbsp;()&nbsp;from&nbsp;/lib/libpthread.so.0&lt;br&gt;<br>
#1&nbsp; 0x000000000047a904&nbsp;in&nbsp;read&nbsp;(signal=&amp;lt;value&nbsp;optimised&nbsp;out&amp;gt;,&nbsp;ctx=&amp;lt;value&lt;br&gt;<br>
optimised&nbsp;out&amp;gt;)&nbsp;at&nbsp;/usr/include/bits/unistd.h:45&lt;br&gt;<br>
#2&nbsp; mono_handle_native_sigsegv&nbsp;(signal=&amp;lt;value&nbsp;optimised&nbsp;out&amp;gt;,&nbsp;ctx=&amp;lt;value&lt;br&gt;<br>
optimised&nbsp;out&amp;gt;)&nbsp;at&nbsp;mini-exceptions.c:1559&lt;br&gt;<br>
#3&nbsp; 0x00000000004adbdf&nbsp;in&nbsp;mono_arch_handle_altstack_exception&lt;br&gt;<br>
(sigctx=0x2aaaaaadfbc0,&nbsp;fault_addr=&amp;lt;value&nbsp;optimised&nbsp;out&amp;gt;,&nbsp;stack_ovf=0)&lt;br&gt;<br>
at&nbsp;exceptions-amd64.c:910&lt;br&gt;<br>
#4&nbsp; &amp;lt;signal&nbsp;handler&nbsp;called&amp;gt;&lt;br&gt;<br>
#5&nbsp; mono_mempool_empty&nbsp;(pool=0x16807b0)&nbsp;at&nbsp;mempool.c:149&lt;br&gt;<br>
#6&nbsp; 0x00000000004f1cb9&nbsp;in&nbsp;mono_mempool_destroy&nbsp;(pool=0xffffffe000000e80)&lt;br&gt;<br>
at&nbsp;mempool.c:102&lt;br&gt;<br>
#7&nbsp; 0x000000000041b6b5&nbsp;in&nbsp;mono_destroy_compile&nbsp;(cfg=0x1680b60)&nbsp;at&lt;br&gt;<br>
mini.c:2025&lt;br&gt;<br>
#8&nbsp; 0x000000000041eb1e&nbsp;in&nbsp;mono_jit_compile_method_inner&lt;br&gt;<br>
(method=0x168f080)&nbsp;at&nbsp;mini.c:3945&lt;br&gt;<br>
#9&nbsp; mono_jit_compile_method_with_opt&nbsp;(method=0x168f080)&nbsp;at&nbsp;mini.c:4018&lt;br&gt;<br>
#10&nbsp;mono_jit_compile_method&nbsp;(method=0x168f080)&nbsp;at&nbsp;mini.c:4036&lt;br&gt;<br>
#11&nbsp;0x000000000048235d&nbsp;in&nbsp;mono_magic_trampoline&nbsp;(regs=0x7fffb0cffc68,&lt;br&gt;<br>
code=0x413d1198&lt;br&gt;<br>
&amp;quot;A\307FL\001\025\023\200L\213\064$H\203\304\030\303\350Rn\v\377\004\200\360h\001&amp;quot;,&lt;br&gt;<br>
m=0x168f080,&lt;br&gt;<br>
&nbsp; &nbsp; tramp=&amp;lt;value&nbsp;optimised&nbsp;out&amp;gt;)&nbsp;at&nbsp;mini-trampolines.c:292&lt;br&gt;<br>
#12&nbsp;0x0000000040488168&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#13&nbsp;0x0000000000000006&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#14&nbsp;0x000000000167ece0&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#15&nbsp;0x00007fffb0cffd30&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#16&nbsp;0x0000000040488173&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#17&nbsp;0x0000000000000018&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#18&nbsp;0x00002aaaaaad0db0&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#19&nbsp;0x0000000001682540&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#20&nbsp;0x00002aaaaaad0db8&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#21&nbsp;0x00000000413d1169&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#22&nbsp;0x0000000001682540&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#23&nbsp;0x0000000001680490&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
#24&nbsp;0x000000000048152a&nbsp;in&nbsp;mono_create_jit_trampoline_in_domain&lt;br&gt;<br>
(domain=0x167ece0,&nbsp;method=0x7fffb0cffd10)&nbsp;at&nbsp;mini-trampolines.c:877&lt;br&gt;<br>
#25&nbsp;0x000000000041b05f&nbsp;in&nbsp;mono_resolve_patch_target&nbsp;(method=0x1680490,&lt;br&gt;<br>
domain=0x2aaaaaad0db0,&nbsp;code=0x413d1140&lt;br&gt;<br>
&amp;quot;H\203\354\030L\211\064$L\213\367H\211t$\bff\220\350(&amp;quot;,&nbsp;patch_info=0x19140,&lt;br&gt;<br>
&nbsp; &nbsp; run_cctors=-1431499064)&nbsp;at&nbsp;mini.c:2485&lt;br&gt;<br>
#26&nbsp;0x00000000005236fb&nbsp;in&nbsp;jit_info_table_chunk_index&nbsp;(chunk=&amp;lt;value&lt;br&gt;<br>
optimised&nbsp;out&amp;gt;,&nbsp;hp=0x1,&nbsp;addr=0x2aaaaaad0db0&nbsp;&amp;quot;&amp;quot;)&nbsp;at&nbsp;domain.c:338&lt;br&gt;<br>
#27&nbsp;0x000000000052630a&nbsp;in&nbsp;mono_jit_info_table_add&nbsp;(domain=&amp;lt;value&lt;br&gt;<br>
optimised&nbsp;out&amp;gt;,&nbsp;ji=&amp;lt;value&nbsp;optimised&nbsp;out&amp;gt;)&nbsp;at&nbsp;domain.c:752&lt;br&gt;<br>
#28&nbsp;0x0000000000000000&nbsp;in&nbsp;??&nbsp;()&lt;br&gt;<br>
&lt;br&gt;<br>
=================================================================&lt;br&gt;<br>
Got&nbsp;a&nbsp;SIGSEGV&nbsp;while&nbsp;executing&nbsp;native&nbsp;code.&nbsp;This&nbsp;usually&nbsp;indicates&lt;br&gt;<br>
a&nbsp;fatal&nbsp;error&nbsp;in&nbsp;the&nbsp;mono&nbsp;runtime&nbsp;or&nbsp;one&nbsp;of&nbsp;the&nbsp;native&nbsp;libraries&lt;br&gt;<br>
used&nbsp;by&nbsp;your&nbsp;application.&lt;br&gt;<br>
=================================================================&lt;br&gt;<br>
&lt;br&gt;<br>
Aborted&lt;br&gt;<br>
make[3]:&nbsp;***&nbsp;[convert.exe]&nbsp;Fehler&nbsp;134&lt;br&gt;<br>
make[3]:&nbsp;Verlasse&nbsp;Verzeichnis&nbsp;&amp;#39;/usr/src/mono-2.4.2.3/docs&amp;#39;&lt;br&gt;<br>
make[2]:&nbsp;***&nbsp;[convert.exe]&nbsp;Fehler&nbsp;2&lt;br&gt;<br>
make[2]:&nbsp;Verlasse&nbsp;Verzeichnis&nbsp;&amp;#39;/usr/src/mono-2.4.2.3/docs&amp;#39;&lt;br&gt;<br>
make[1]:&nbsp;***&nbsp;[all-recursive]&nbsp;Fehler&nbsp;1&lt;br&gt;<br>
make[1]:&nbsp;Verlasse&nbsp;Verzeichnis&nbsp;&amp;#39;/usr/src/mono-2.4.2.3&amp;#39;&lt;br&gt;<br>
make:&nbsp;***&nbsp;[all]&nbsp;Fehler&nbsp;2&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
--&lt;br&gt;<br>
regards&lt;br&gt;<br>
&lt;br&gt;<br>
Daniel&nbsp;Weuthen&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
