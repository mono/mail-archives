<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;title&gt;&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;<br>
&lt;div&nbsp;class=&quot;moz-text-html&quot;&nbsp;lang=&quot;x-western&quot;&gt;<br>
&lt;div&nbsp;class=&quot;moz-text-flowed&quot;<br>
&nbsp;style=&quot;font-family:&nbsp;-moz-fixed;&nbsp;font-size:&nbsp;13px;&quot;&nbsp;lang=&quot;x-western&quot;&gt;Description<br>
of&nbsp;Problem:<br>
&lt;br&gt;<br>
XmlNode.InsertBefore&nbsp;,XmlNode.AppendChild&nbsp;and&nbsp;XmlNode.ReplaceChild<br>
should&nbsp;raise&nbsp;System.ArgumentException&nbsp;exception&nbsp;if&nbsp;the&nbsp;node&nbsp;to&nbsp;be&nbsp;put<br>
is&nbsp;one&nbsp;of&nbsp;this&nbsp;node's&nbsp;ancestors.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Steps&nbsp;to&nbsp;reproduce&nbsp;the&nbsp;problem&nbsp;:<br>
&lt;br&gt;<br>
1.&nbsp;Create&nbsp;XML&nbsp;file.<br>
&lt;br&gt;<br>
2.&nbsp;Load&nbsp;XML&nbsp;document&nbsp;into&nbsp;XmlDocument.&lt;br&gt;<br>
3.&nbsp;Try&nbsp;to&nbsp;insert/append/replace&nbsp;node&nbsp;child&nbsp;with&nbsp;one&nbsp;of&nbsp;the&nbsp;node's<br>
ancestors.&lt;br&gt;<br>
&lt;br&gt;<br>
Actual&nbsp;result&nbsp;:<br>
&lt;br&gt;<br>
InsertChild&nbsp;-&nbsp;Expected&nbsp;exception&nbsp;not&nbsp;catched&lt;br&gt;<br>
ReplaceChild&nbsp;-&nbsp;Exception&nbsp;catched&nbsp;:&nbsp;System.InvalidOperationException&lt;br&gt;<br>
AppendChild&nbsp;-&nbsp;Expected&nbsp;exception&nbsp;not&nbsp;catched&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Expected&nbsp;result&nbsp;:&lt;br&gt;<br>
InsertChild&nbsp;-&nbsp;Exception&nbsp;catched&nbsp;:&nbsp;System.ArgumentException&nbsp;&lt;br&gt;<br>
ReplaceChild&nbsp;-&nbsp;Exception&nbsp;catched&nbsp;:&nbsp;System.ArgumentException&nbsp;&lt;br&gt;<br>
AppendChild&nbsp;-&nbsp;Exception&nbsp;catched&nbsp;:&nbsp;System.ArgumentException&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Enclosed&nbsp;is&nbsp;a&nbsp;small&nbsp;test&nbsp;case&nbsp;and&nbsp;a&nbsp;patch.<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Thank&nbsp;you&nbsp;in&nbsp;advance,<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Boris&nbsp;Kirzner<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;moz-text-plain&quot;&nbsp;wrap=&quot;true&quot;&nbsp;graphical-quote=&quot;true&quot;<br>
&nbsp;style=&quot;font-family:&nbsp;-moz-fixed;&nbsp;font-size:&nbsp;13px;&quot;&nbsp;lang=&quot;he&quot;&gt;<br>
&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;/pre&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;moz-text-plain&quot;&nbsp;wrap=&quot;true&quot;&nbsp;graphical-quote=&quot;true&quot;<br>
&nbsp;style=&quot;font-family:&nbsp;-moz-fixed;&nbsp;font-size:&nbsp;13px;&quot;&nbsp;lang=&quot;he&quot;&gt;<br>
&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
<br>
&lt;/pre&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
