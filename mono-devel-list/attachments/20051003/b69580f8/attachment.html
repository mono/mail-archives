<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;TRANSITIONAL//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;CHARSET=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;NAME=&quot;GENERATOR&quot;&nbsp;CONTENT=&quot;GtkHTML/3.6.2&quot;&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
Hello,&lt;BR&gt;<br>
I've&nbsp;seen&nbsp;that&nbsp;your&nbsp;have&nbsp;commited&nbsp;an&nbsp;optimization&nbsp;in&nbsp;exception&nbsp;handling&nbsp;in&nbsp;mini...&nbsp;Fri&nbsp;Sept&nbsp;30...&lt;BR&gt;<br>
I've&nbsp;found&nbsp;a&nbsp;very&nbsp;very&nbsp;nasty&nbsp;bug...&lt;BR&gt;<br>
&lt;BR&gt;<br>
Try&nbsp;this&nbsp;test&nbsp;case&nbsp;:&lt;BR&gt;<br>
&lt;BR&gt;<br>
&nbsp;//&nbsp;project&nbsp;created&nbsp;on&nbsp;03/10/2005&nbsp;at&nbsp;11:30&lt;BR&gt;<br>
using&nbsp;System;&lt;BR&gt;<br>
using&nbsp;System.Data;&lt;BR&gt;<br>
using&nbsp;System.Data.OracleClient;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
class&nbsp;MainClass&lt;BR&gt;<br>
{&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;nbsp;&nbsp;private&nbsp;static&nbsp;void&nbsp;CreateDummy()&lt;BR&gt;<br>
&amp;nbsp;&nbsp;{&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;IDbConnection&nbsp;sqlCon&nbsp;=&nbsp;new&nbsp;OracleConnection(&amp;quot;user&nbsp;id=hubert;data&nbsp;source=10.69.100.181:1521/ORALINUX;password=cosmic&amp;quot;);&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;IDbCommand&nbsp;command&nbsp;=&nbsp;sqlCon.CreateCommand();&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;command.Connection&nbsp;=&nbsp;sqlCon;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;sqlCon.Open();&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;command.CommandText&nbsp;=&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;@&amp;quot;&nbsp;DROP&nbsp;TABLE&nbsp;INTRA_LANGUE&nbsp;CASCADE&nbsp;CONSTRAINTS&amp;quot;;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;try{&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;command.ExecuteNonQuery();&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;}catch(Exception&nbsp;e)&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;{}&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;command.CommandText&nbsp;=&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;@&amp;quot;&nbsp;CREATE&nbsp;TABLE&nbsp;INTRA_LANGUE&nbsp;(LANGUE_CODE&nbsp;VARCHAR2(40)&nbsp;NOT&nbsp;NULL,LANGUE&nbsp;VARCHAR2(100),&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCONSTRAINT&nbsp;PK_INTRA_LANGUE&nbsp;PRIMARY&nbsp;KEY&nbsp;(LANGUE_CODE))&amp;quot;;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;command.ExecuteNonQuery();&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;sqlCon.Close();&lt;BR&gt;<br>
&amp;nbsp;&nbsp;}&lt;BR&gt;<br>
&lt;BR&gt;<br>
public&nbsp;void&nbsp;checkexception(Exception&nbsp;e,&nbsp;IDbCommand&nbsp;command,&nbsp;string&nbsp;stack)&lt;BR&gt;<br>
{&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp//Console.WriteLine(e.GetType().ToString());&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptry&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthrow&nbsp;e;&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp}&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcatch&nbsp;(OracleException&nbsp;ee)&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspConsole.WriteLine(&amp;quot;OracleException&nbsp;:::&amp;quot;+ee.Message);&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspConsole.WriteLine(&amp;quot;Command&nbsp;text&nbsp;:&amp;quot;+command.CommandText);&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspforeach&nbsp;(IDataParameter&nbsp;param&nbsp;in&nbsp;command.Parameters)&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspConsole.WriteLine(param.ParameterName);&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspConsole.WriteLine(param.Value.ToString());&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp}&lt;BR&gt;<br>
&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp}&lt;BR&gt;<br>
}&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;nbsp;&nbsp;public&nbsp;void&nbsp;Test()&lt;BR&gt;<br>
&amp;nbsp;&nbsp;{&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;IDbCommand&nbsp;command=new&nbsp;OracleCommand();&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;try&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;{&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;NSUniDataAccess.UniDataAccess.SetDb(&amp;quot;Oracle&amp;quot;);&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;IDbConnection&nbsp;sqlCon&nbsp;=&nbsp;NSUniDataAccess.UniDataAccess.GetConnection(&amp;quot;user&nbsp;id=hubert;data&nbsp;source=10.69.100.181:1521/ORALINUX;password=cosmic&amp;quot;);&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;command&nbsp;=&nbsp;sqlCon.CreateCommand();&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;command.Connection&nbsp;=&nbsp;sqlCon;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;sqlCon.Open();&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOracleParameter&nbsp;p1&nbsp;=&nbsp;new&nbsp;OracleParameter(&amp;quot;param1&amp;quot;,OracleType.VarChar);&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspp1.Value&nbsp;=&nbsp;&amp;quot;en&amp;quot;;&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOracleParameter&nbsp;p2&nbsp;=&nbsp;new&nbsp;OracleParameter(&amp;quot;param2&amp;quot;,OracleType.VarChar);&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspp2.Value&nbsp;=&nbsp;&amp;quot;english&amp;quot;;&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcommand.Parameters.Add(p1);&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcommand.Parameters.Add(p2);&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcommand.CommandText&nbsp;=&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;@&amp;quot;&nbsp;INSERT&nbsp;INTO&nbsp;INTRA_LANGUE&nbsp;(LANGUE_CODE,LANGUE)&nbsp;VALUES(:param1,:param2)&amp;quot;;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;command.ExecuteNonQuery();&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;command.CommandText&nbsp;=&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;@&amp;quot;&nbsp;INSERT&nbsp;INTO&nbsp;INTRA_LANGUE&nbsp;(LANGUE_CODE,LANGUE)&nbsp;VALUES(:param1,:param2)&amp;quot;;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;Should&nbsp;throw&nbsp;a&nbsp;Unique&nbsp;constraint&nbsp;exception...&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;command.ExecuteNonQuery();&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;sqlCon.Close();&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;}&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;catch(Exception&nbsp;e)&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;{&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspConsole.WriteLine(&amp;quot;oops&nbsp;:&nbsp;execption&amp;quot;);&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;checkexception(e,command,e.StackTrace);&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;}&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;return;&lt;BR&gt;<br>
&amp;nbsp;&nbsp;}&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppublic&nbsp;static&nbsp;void&nbsp;Main(string[]&nbsp;args)&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCreateDummy();&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspConsole.WriteLine(&amp;quot;Hello&nbsp;World!&amp;quot;);&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMainClass&nbsp;monprog=new&nbsp;MainClass();&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmonprog.Test();&lt;BR&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp}&lt;BR&gt;<br>
}&lt;BR&gt;<br>
&lt;BR&gt;<br>
With&nbsp;the&nbsp;last&nbsp;svn&nbsp;revision&nbsp;:&nbsp;i&nbsp;got&nbsp;as&nbsp;a&nbsp;result&nbsp;of&nbsp;this&nbsp;program:&lt;BR&gt;<br>
&lt;BR&gt;<br>
Hello&nbsp;World!&lt;BR&gt;<br>
oops&nbsp;:&nbsp;execption&lt;BR&gt;<br>
OracleException&nbsp;:::ORA-00001:&nbsp;unique&nbsp;constraint&nbsp;(HUBERT.PK_INTRA_LANGUE)&nbsp;violated&lt;BR&gt;<br>
&lt;BR&gt;<br>
Command&nbsp;text&nbsp;:&nbsp;INSERT&nbsp;INTO&nbsp;INTRA_LANGUE&nbsp;(LANGUE_CODE,LANGUE)&nbsp;VALUES(:param1,:param2)&lt;BR&gt;<br>
param1&lt;BR&gt;<br>
en&lt;BR&gt;<br>
&lt;BR&gt;<br>
Unhandled&nbsp;Exception:&nbsp;System.NullReferenceException:&nbsp;Object&nbsp;reference&nbsp;not&nbsp;set&nbsp;to&nbsp;an&nbsp;instance&nbsp;of&nbsp;an&nbsp;object&lt;BR&gt;<br>
in&nbsp;[0x0006b]&nbsp;(at&nbsp;/home/hubert/Projects/ExceptionBug/Main.cs:47)&nbsp;MainClass:checkexception&nbsp;(System.Exception&nbsp;e,&nbsp;IDbCommand&nbsp;command,&nbsp;System.String&nbsp;stack)&lt;BR&gt;<br>
in&nbsp;[0x000bf]&nbsp;(at&nbsp;/home/hubert/Projects/ExceptionBug/Main.cs:79)&nbsp;MainClass:Test&nbsp;()&lt;BR&gt;<br>
in&nbsp;[0x00016]&nbsp;(at&nbsp;/home/hubert/Projects/ExceptionBug/Main.cs:88)&nbsp;MainClass:Main&nbsp;(System.String[]&nbsp;args)&lt;BR&gt;<br>
&lt;BR&gt;<br>
If&nbsp;I&nbsp;revert&nbsp;your&nbsp;changes&nbsp;:&nbsp;I&nbsp;get&nbsp;:&lt;BR&gt;<br>
Hello&nbsp;World!&lt;BR&gt;<br>
oops&nbsp;:&nbsp;execption&lt;BR&gt;<br>
System.Data.OracleClient.OracleException&lt;BR&gt;<br>
OracleException&nbsp;:::ORA-00001:&nbsp;unique&nbsp;constraint&nbsp;(HUBERT.PK_INTRA_LANGUE)&nbsp;violated&lt;BR&gt;<br>
&lt;BR&gt;<br>
Command&nbsp;text&nbsp;:&nbsp;INSERT&nbsp;INTO&nbsp;INTRA_LANGUE&nbsp;(LANGUE_CODE,LANGUE)&nbsp;VALUES(:param1,:param2)&lt;BR&gt;<br>
param1&lt;BR&gt;<br>
en&lt;BR&gt;<br>
param2&lt;BR&gt;<br>
english&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;dont't&nbsp;know&nbsp;exactly&nbsp;what's&nbsp;the&nbsp;underlying&nbsp;problem,&nbsp;but&nbsp;I&nbsp;know&nbsp;that&nbsp;this&nbsp;regression&nbsp;is&nbsp;caused&nbsp;by&nbsp;your&nbsp;commit...&lt;BR&gt;<br>
&lt;BR&gt;<br>
Thanks...<br>
_______________________________________________&lt;br&gt;Ce&nbsp;message&nbsp;et&nbsp;les&nbsp;éventuels&nbsp;documents&nbsp;joints&nbsp;peuvent&nbsp;contenir&nbsp;des&nbsp;informations&nbsp;confidentielles.&lt;br&gt;Au&nbsp;cas&nbsp;où&nbsp;il&nbsp;ne&nbsp;vous&nbsp;serait&nbsp;pas&nbsp;destiné,&nbsp;nous&nbsp;vous&nbsp;remercions&nbsp;de&nbsp;bien&nbsp;vouloir&nbsp;le&nbsp;supprimer&nbsp;et&nbsp;en&nbsp;aviser&nbsp;immédiatement&nbsp;l'expéditeur.&nbsp;Toute&nbsp;utilisation&nbsp;de&nbsp;ce&nbsp;message&nbsp;non&nbsp;conforme&nbsp;à&nbsp;sa&nbsp;destination,&nbsp;toute&nbsp;diffusion&nbsp;ou&nbsp;publication,&nbsp;totale&nbsp;ou&nbsp;partielle&nbsp;et&nbsp;quel&nbsp;qu'en&nbsp;soit&nbsp;le&nbsp;moyen&nbsp;est&nbsp;formellement&nbsp;interdite.&lt;br&gt;Les&nbsp;communications&nbsp;sur&nbsp;internet&nbsp;n'étant&nbsp;pas&nbsp;sécurisées,&nbsp;l'intégrité&nbsp;de&nbsp;ce&nbsp;message&nbsp;n'est&nbsp;pas&nbsp;assurée&nbsp;et&nbsp;la&nbsp;société&nbsp;émettrice&nbsp;ne&nbsp;peut&nbsp;être&nbsp;tenue&nbsp;pour&nbsp;responsable&nbsp;de&nbsp;son&nbsp;contenu.&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>

</tt>
