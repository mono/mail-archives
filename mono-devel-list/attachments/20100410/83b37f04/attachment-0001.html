<tt>
Looks&nbsp;ok.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp;Zoltan&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Apr&nbsp;5,&nbsp;2010&nbsp;at&nbsp;1:52&nbsp;AM,&nbsp;Andreas&nbsp;Färber&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:andreas.faerber@web.de&quot;&gt;andreas.faerber@web.de&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;Haiku&nbsp;has&nbsp;neither&nbsp;makedev&nbsp;nor&nbsp;/proc.&nbsp;Enumerate&nbsp;processes,&nbsp;process&nbsp;modules&lt;br&gt;<br>
and&nbsp;retrieve&nbsp;the&nbsp;process&nbsp;name&nbsp;via&nbsp;Kernel&nbsp;Kit.&nbsp;Fixes&nbsp;build&nbsp;on&nbsp;Haiku.&lt;br&gt;<br>
&lt;br&gt;<br>
Adjust&nbsp;_WAPI_PROCESS_UNHANDLED_PID_MASK&nbsp;to&nbsp;cope&nbsp;with&nbsp;Haiku&amp;#39;s&nbsp;32-bit&nbsp;pid_t.&lt;br&gt;<br>
Fixes&nbsp;exception&nbsp;trying&nbsp;to&nbsp;obtain&nbsp;the&nbsp;ProcessName&nbsp;of&nbsp;pids&nbsp;&amp;gt;=&nbsp;2^15.&lt;br&gt;<br>
&lt;br&gt;<br>
v3&nbsp;-&amp;gt;&nbsp;v4:&lt;br&gt;<br>
*&nbsp;Rebase&nbsp;against&nbsp;OpenBSD&nbsp;changes.&lt;br&gt;<br>
&lt;br&gt;<br>
v2&nbsp;-&amp;gt;&nbsp;v3:&lt;br&gt;<br>
*&nbsp;Fix&nbsp;get_process_name_from_proc&nbsp;implementation&nbsp;to&nbsp;use&nbsp;get_next_image_info.&lt;br&gt;<br>
*&nbsp;Add&nbsp;new&nbsp;implementation&nbsp;of&nbsp;EnumProcesses.&lt;br&gt;<br>
*&nbsp;Fix&nbsp;OpenProcess&amp;#39;&nbsp;check&nbsp;whether&nbsp;pid&nbsp;is&nbsp;available.&lt;br&gt;<br>
*&nbsp;Fix&nbsp;_WAPI_PROCESS_UNHANDLED_PID_MASK&nbsp;to&nbsp;handle&nbsp;Haiku&amp;#39;s&nbsp;32-bit&nbsp;pid_t.&lt;br&gt;<br>
*&nbsp;Fix&nbsp;module&nbsp;addresses&nbsp;in&nbsp;load_modules&nbsp;by&nbsp;considering&nbsp;the&nbsp;text&nbsp;segment,&nbsp;too.&lt;br&gt;<br>
&nbsp; Suggested&nbsp;by&nbsp;Ingo&nbsp;Weinhold.&lt;br&gt;<br>
*&nbsp;Add&nbsp;ChangeLog&nbsp;entry,&nbsp;fix&nbsp;file&nbsp;encoding.&lt;br&gt;<br>
&lt;br&gt;<br>
v1&nbsp;-&amp;gt;&nbsp;v2:&lt;br&gt;<br>
*&nbsp;Instead&nbsp;of&nbsp;providing&nbsp;a&nbsp;dummy&nbsp;makedev&nbsp;macro,&nbsp;avoid&nbsp;its&nbsp;use.&lt;br&gt;<br>
*&nbsp;Don&amp;#39;t&nbsp;try&nbsp;to&nbsp;parse&nbsp;/proc.&lt;br&gt;<br>
*&nbsp;Add&nbsp;new&nbsp;implementations&nbsp;of&nbsp;load_modules&nbsp;and&nbsp;get_process_name_from_proc&lt;br&gt;<br>
&nbsp; based&nbsp;on&nbsp;libroot&amp;#39;s&nbsp;Kernel&nbsp;Kit,&nbsp;suggested&nbsp;by&nbsp;François&nbsp;Revol.&lt;br&gt;<br>
---&lt;br&gt;<br>
 mono/io-layer/ChangeLog&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;14&nbsp;+++++++-&lt;br&gt;<br>
 mono/io-layer/process-private.h&nbsp;|&nbsp; &nbsp; 4&nbsp;++&lt;br&gt;<br>
 mono/io-layer/processes.c&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp;69&nbsp;+++++++++++++++++++++++++++++++++++++--&lt;br&gt;<br>
 3&nbsp;files&nbsp;changed,&nbsp;83&nbsp;insertions(+),&nbsp;4&nbsp;deletions(-)&lt;br&gt;<br>
&lt;br&gt;<br>
diff&nbsp;--git&nbsp;a/mono/io-layer/ChangeLog&nbsp;b/mono/io-layer/ChangeLog&lt;br&gt;<br>
index&nbsp;bb199ba..3fed2e9&nbsp;100644&lt;br&gt;<br>
---&nbsp;a/mono/io-layer/ChangeLog&lt;br&gt;<br>
+++&nbsp;b/mono/io-layer/ChangeLog&lt;br&gt;<br>
@@&nbsp;-1,3&nbsp;+1,15&nbsp;@@&lt;br&gt;<br>
+2010-04-04&nbsp; Andreas&nbsp;Färber&nbsp; &amp;lt;&lt;a&nbsp;href=&quot;mailto:andreas.faerber@web.de&quot;&gt;andreas.faerber@web.de&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;*&nbsp;processes.c&nbsp;(EnumProcesses,&nbsp;load_modules):&nbsp;Add&nbsp;implementations&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;for&nbsp;Haiku.&nbsp;Fixes&nbsp;build&nbsp;on&nbsp;Haiku.&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;(OpenProcess,&nbsp;EnumProcessModules,&nbsp;get_process_name_from_proc):&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;Tweak&nbsp;implementations&nbsp;for&nbsp;Haiku.&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;*&nbsp;process-private.h:&nbsp;Fix&nbsp;_WAPI_PROCESS_UNHANDLED_PID_MASK&nbsp;for&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;32-bit&nbsp;pids&nbsp;(Haiku).&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;*&nbsp;ChangeLog:&nbsp;Fix&nbsp;UTF-8&nbsp;encoding&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;Code&nbsp;is&nbsp;contributed&nbsp;under&nbsp;MIT/X11&nbsp;license.&lt;br&gt;<br>
+&lt;br&gt;<br>
 2010-04-04&nbsp; Zoltan&nbsp;Varga&nbsp; &amp;lt;&lt;a&nbsp;href=&quot;mailto:vargaz@gmail.com&quot;&gt;vargaz@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; *&nbsp;processes.c:&nbsp;Applied&nbsp;more&nbsp;openbsd&nbsp;changes&nbsp;from&nbsp;Robert&nbsp;Nagy&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:robert@openbsd.org&quot;&gt;robert@openbsd.org&lt;/a&gt;&amp;gt;.&lt;br&gt;<br>
@@&nbsp;-128,7&nbsp;+140,7&nbsp;@@&nbsp;Wed&nbsp;Feb&nbsp;24&nbsp;16:01:37&nbsp;CET&nbsp;2010&nbsp;Paolo&nbsp;Molaro&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:lupus@ximian.com&quot;&gt;lupus@ximian.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
 2009-09-01&nbsp; Zoltan&nbsp;Varga&nbsp; &amp;lt;&lt;a&nbsp;href=&quot;mailto:vargaz@gmail.com&quot;&gt;vargaz@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp;*&nbsp;processes.c&nbsp;(EnumProcessModules):&nbsp;Applied&nbsp;patch&nbsp;from&nbsp;Romain&nbsp;Tartière&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;*&nbsp;processes.c&nbsp;(EnumProcessModules):&nbsp;Applied&nbsp;patch&nbsp;from&nbsp;Romain&nbsp;Tartière&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; (&lt;a&nbsp;href=&quot;mailto:romain@blogreen.org&quot;&gt;romain@blogreen.org&lt;/a&gt;).&nbsp;Fix&nbsp;this&nbsp;on&nbsp;freebsd/OSX.&nbsp;Fixes&nbsp;#533893.&lt;br&gt;<br>
&lt;br&gt;<br>
 2009-08-18&nbsp; Christian&nbsp;Hergert&nbsp; &amp;lt;&lt;a&nbsp;href=&quot;mailto:chris@dronelabs.com&quot;&gt;chris@dronelabs.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
diff&nbsp;--git&nbsp;a/mono/io-layer/process-private.h&nbsp;b/mono/io-layer/process-private.h&lt;br&gt;<br>
index&nbsp;a8b9f54..dc95283&nbsp;100644&lt;br&gt;<br>
---&nbsp;a/mono/io-layer/process-private.h&lt;br&gt;<br>
+++&nbsp;b/mono/io-layer/process-private.h&lt;br&gt;<br>
@@&nbsp;-18,7&nbsp;+18,11&nbsp;@@&lt;br&gt;<br>
&lt;br&gt;<br>
 /*&nbsp;This&nbsp;marks&nbsp;a&nbsp;system&nbsp;process&nbsp;that&nbsp;we&nbsp;don&amp;#39;t&nbsp;have&nbsp;a&nbsp;handle&nbsp;on&nbsp;*/&lt;br&gt;<br>
 /*&nbsp;FIXME:&nbsp;cope&nbsp;with&nbsp;pids&nbsp;&amp;gt;&nbsp;16bit&nbsp;*/&lt;br&gt;<br>
+#if&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
+#define&nbsp;_WAPI_PROCESS_UNHANDLED_PID_MASK&nbsp;0x7FFFFFFF&lt;br&gt;<br>
+#else&lt;br&gt;<br>
 #define&nbsp;_WAPI_PROCESS_UNHANDLED_PID_MASK&nbsp;0x7FFF&lt;br&gt;<br>
+#endif&lt;br&gt;<br>
 #define&nbsp;_WAPI_PROCESS_UNHANDLED&nbsp;(-1&nbsp;&amp;amp;&nbsp;~_WAPI_PROCESS_UNHANDLED_PID_MASK)&lt;br&gt;<br>
&lt;br&gt;<br>
 extern&nbsp;gpointer&nbsp;_wapi_process_duplicate&nbsp;(void);&lt;br&gt;<br>
diff&nbsp;--git&nbsp;a/mono/io-layer/processes.c&nbsp;b/mono/io-layer/processes.c&lt;br&gt;<br>
index&nbsp;55d9600..98507d5&nbsp;100644&lt;br&gt;<br>
---&nbsp;a/mono/io-layer/processes.c&lt;br&gt;<br>
+++&nbsp;b/mono/io-layer/processes.c&lt;br&gt;<br>
@@&nbsp;-54,6&nbsp;+54,10&nbsp;@@&lt;br&gt;<br>
 #endif&lt;br&gt;<br>
 #endif&lt;br&gt;<br>
&lt;br&gt;<br>
+#ifdef&nbsp;__HAIKU__&lt;br&gt;<br>
+#include&nbsp;&amp;lt;KernelKit.h&amp;gt;&lt;br&gt;<br>
+#endif&lt;br&gt;<br>
+&lt;br&gt;<br>
 #include&nbsp;&amp;lt;mono/io-layer/wapi.h&amp;gt;&lt;br&gt;<br>
 #include&nbsp;&amp;lt;mono/io-layer/wapi-private.h&amp;gt;&lt;br&gt;<br>
 #include&nbsp;&amp;lt;mono/io-layer/handles-private.h&amp;gt;&lt;br&gt;<br>
@@&nbsp;-1595,6&nbsp;+1599,24&nbsp;@@&nbsp;gboolean&nbsp;EnumProcesses&nbsp;(guint32&nbsp;*pids,&nbsp;guint32&nbsp;len,&nbsp;guint32&nbsp;*needed)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; return(TRUE);&lt;br&gt;<br>
 }&lt;br&gt;<br>
+#elif&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
+&lt;br&gt;<br>
+gboolean&nbsp;EnumProcesses&nbsp;(guint32&nbsp;*pids,&nbsp;guint32&nbsp;len,&nbsp;guint32&nbsp;*needed)&lt;br&gt;<br>
+{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;guint32&nbsp;fit,&nbsp;i&nbsp;=&nbsp;0;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;int32&nbsp;cookie&nbsp;=&nbsp;0;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;team_info&nbsp;teamInfo;&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;mono_once&nbsp;(&amp;amp;process_current_once,&nbsp;process_set_current);&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;fit&nbsp;=&nbsp;len&nbsp;/&nbsp;sizeof&nbsp;(guint32);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;while&nbsp;(get_next_team_info&nbsp;(&amp;amp;cookie,&nbsp;&amp;amp;teamInfo)&nbsp;==&nbsp;B_OK&nbsp;&amp;amp;&amp;amp;&nbsp;i&nbsp;&amp;lt;&nbsp;fit)&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pids&nbsp;[i++]&nbsp;=&nbsp;teamInfo.team;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;*needed&nbsp;=&nbsp;i&nbsp;*&nbsp;sizeof&nbsp;(guint32);&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;TRUE;&lt;br&gt;<br>
+}&lt;br&gt;<br>
 #else&lt;br&gt;<br>
 gboolean&nbsp;EnumProcesses&nbsp;(guint32&nbsp;*pids,&nbsp;guint32&nbsp;len,&nbsp;guint32&nbsp;*needed)&lt;br&gt;<br>
 {&lt;br&gt;<br>
@@&nbsp;-1681,6&nbsp;+1703,9&nbsp;@@&nbsp;gpointer&nbsp;OpenProcess&nbsp;(guint32&nbsp;req_access&nbsp;G_GNUC_UNUSED,&nbsp;gboolean&nbsp;inherit&nbsp;G_GNUC_&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;(handle&nbsp;==&nbsp;0)&nbsp;{&lt;br&gt;<br>
 #if&nbsp;defined(__OpenBSD__)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;((kill(pid,&nbsp;0)&nbsp;==&nbsp;0)&nbsp;||&nbsp;(errno&nbsp;==&nbsp;EPERM))&nbsp;{&lt;br&gt;<br>
+#elif&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;team_info&nbsp;teamInfo;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(get_team_info&nbsp;((team_id)pid,&nbsp;&amp;amp;teamInfo)&nbsp;==&nbsp;B_OK)&nbsp;{&lt;br&gt;<br>
 #else&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gchar&nbsp;*dir&nbsp;=&nbsp;g_strdup_printf&nbsp;(&amp;quot;/proc/%d&amp;quot;,&nbsp;pid);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;(!access&nbsp;(dir,&nbsp;F_OK))&nbsp;{&lt;br&gt;<br>
@@&nbsp;-1958,6&nbsp;+1983,37&nbsp;@@&nbsp;static&nbsp;GSList&nbsp;*load_modules&nbsp;(void)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; return(ret);&lt;br&gt;<br>
 }&lt;br&gt;<br>
+#elif&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
+&lt;br&gt;<br>
+static&nbsp;GSList&nbsp;*load_modules&nbsp;(void)&lt;br&gt;<br>
+{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;GSList&nbsp;*ret&nbsp;=&nbsp;NULL;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;WapiProcModule&nbsp;*mod;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;int32&nbsp;cookie&nbsp;=&nbsp;0;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;image_info&nbsp;imageInfo;&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;while&nbsp;(get_next_image_info&nbsp;(B_CURRENT_TEAM,&nbsp;&amp;amp;cookie,&nbsp;&amp;amp;imageInfo)&nbsp;==&nbsp;B_OK)&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mod&nbsp;=&nbsp;g_new0&nbsp;(WapiProcModule,&nbsp;1);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mod-&amp;gt;device&nbsp;=&nbsp;imageInfo.device;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mod-&amp;gt;inode&nbsp;=&nbsp;imageInfo.node;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mod-&amp;gt;filename&nbsp;=&nbsp;g_strdup&nbsp;(imageInfo.name);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mod-&amp;gt;address_start&nbsp;=&nbsp;MIN&nbsp;(imageInfo.text,&nbsp;imageInfo.data);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mod-&amp;gt;address_end&nbsp;=&nbsp;MAX&nbsp;((uint8_t*)imageInfo.text&nbsp;+&nbsp;imageInfo.text_size,&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(uint8_t*)imageInfo.data&nbsp;+&nbsp;imageInfo.data_size);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mod-&amp;gt;perms&nbsp;=&nbsp;g_strdup&nbsp;(&amp;quot;r--p&amp;quot;);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mod-&amp;gt;address_offset&nbsp;=&nbsp;0;&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(g_slist_find_custom&nbsp;(ret,&nbsp;mod,&nbsp;find_procmodule)&nbsp;==&nbsp;NULL)&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ret&nbsp;=&nbsp;g_slist_prepend&nbsp;(ret,&nbsp;mod);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&nbsp;else&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free_procmodule&nbsp;(mod);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;ret&nbsp;=&nbsp;g_slist_reverse&nbsp;(ret);&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;ret;&lt;br&gt;<br>
+}&lt;br&gt;<br>
 #else&lt;br&gt;<br>
 static&nbsp;GSList&nbsp;*load_modules&nbsp;(FILE&nbsp;*fp)&lt;br&gt;<br>
 {&lt;br&gt;<br>
@@&nbsp;-2176,7&nbsp;+2232,7&nbsp;@@&nbsp;gboolean&nbsp;EnumProcessModules&nbsp;(gpointer&nbsp;process,&nbsp;gpointer&nbsp;*modules,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; proc_name&nbsp;=&nbsp;process_handle-&amp;gt;proc_name;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&lt;br&gt;<br>
-#if&nbsp;defined(PLATFORM_MACOSX)&nbsp;||&nbsp;defined(__OpenBSD__)&lt;br&gt;<br>
+#if&nbsp;defined(PLATFORM_MACOSX)&nbsp;||&nbsp;defined(__OpenBSD__)&nbsp;||&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mods&nbsp;=&nbsp;load_modules&nbsp;();&lt;br&gt;<br>
 #else&lt;br&gt;<br>
@@&nbsp;-2248,6&nbsp;+2304,13&nbsp;@@&nbsp;static&nbsp;gchar&nbsp;*get_process_name_from_proc&nbsp;(pid_t&nbsp;pid)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; proc_name&nbsp;(pid,&nbsp;buf,&nbsp;sizeof(buf));&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;(strlen&nbsp;(buf)&nbsp;&amp;gt;&nbsp;0)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ret&nbsp;=&nbsp;g_strdup&nbsp;(buf);&lt;br&gt;<br>
+#elif&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;image_info&nbsp;imageInfo;&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;int32&nbsp;cookie&nbsp;=&nbsp;0;&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(get_next_image_info&nbsp;((team_id)pid,&nbsp;&amp;amp;cookie,&nbsp;&amp;amp;imageInfo)&nbsp;==&nbsp;B_OK)&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ret&nbsp;=&nbsp;g_strdup&nbsp;(imageInfo.name);&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;<br>
 #else&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; memset&nbsp;(buf,&nbsp;&amp;#39;\0&amp;#39;,&nbsp;sizeof(buf));&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; filename&nbsp;=&nbsp;g_strdup_printf&nbsp;(&amp;quot;/proc/%d/exe&amp;quot;,&nbsp;pid);&lt;br&gt;<br>
@@&nbsp;-2355,7&nbsp;+2418,7&nbsp;@@&nbsp;static&nbsp;guint32&nbsp;get_module_name&nbsp;(gpointer&nbsp;process,&nbsp;gpointer&nbsp;module,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; /*&nbsp;Look&nbsp;up&nbsp;the&nbsp;address&nbsp;in&nbsp;/proc/&amp;lt;pid&amp;gt;/maps&nbsp;*/&lt;br&gt;<br>
-#if&nbsp;defined(PLATFORM_MACOSX)&nbsp;||&nbsp;defined(__OpenBSD__)&lt;br&gt;<br>
+#if&nbsp;defined(PLATFORM_MACOSX)&nbsp;||&nbsp;defined(__OpenBSD__)&nbsp;||&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mods&nbsp;=&nbsp;load_modules&nbsp;();&lt;br&gt;<br>
 #else&lt;br&gt;<br>
@@&nbsp;-2507,7&nbsp;+2570,7&nbsp;@@&nbsp;gboolean&nbsp;GetModuleInformation&nbsp;(gpointer&nbsp;process,&nbsp;gpointer&nbsp;module,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; proc_name&nbsp;=&nbsp;g_strdup&nbsp;(process_handle-&amp;gt;proc_name);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; }&lt;br&gt;<br>
&lt;br&gt;<br>
-#if&nbsp;defined(PLATFORM_MACOSX)&nbsp;||&nbsp;defined(__OpenBSD__)&lt;br&gt;<br>
+#if&nbsp;defined(PLATFORM_MACOSX)&nbsp;||&nbsp;defined(__OpenBSD__)&nbsp;||&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; {&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mods&nbsp;=&nbsp;load_modules&nbsp;();&lt;br&gt;<br>
 #else&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;--&lt;br&gt;<br>
1.7.0.4.297.g6555b1&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
