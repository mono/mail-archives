
using System;
using System.IO;
using System.Xml;
using System.Xml.Serialization;

namespace XmlSerializationTest
{
	public class Foo
	{
		public string Bar { get; set; }

		public static void Main(string[] args)
		{
			Foo f = new Foo();
			f.Bar = "Biz";

			using (MemoryStream stream = new MemoryStream())
			{
				new XmlSerializer(typeof(Foo)).Serialize(stream, f);
				stream.Seek(0,0);

				XmlReader reader = XmlReader.Create(stream);
				XmlDocument doc = new XmlDocument();
				doc.Load(reader);
				System.Console.WriteLine(doc.OuterXml);
			}
		}
	}
}