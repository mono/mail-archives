<tt>
Hello,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;some&nbsp;summarized&nbsp;profiler&nbsp;output&nbsp;in&nbsp;case&nbsp;anyone&nbsp;is&nbsp;interested&nbsp;in&nbsp;where&nbsp;the&nbsp;time&nbsp;is&nbsp;going.&nbsp;This&nbsp;is&nbsp;the&nbsp;above&nbsp;sample&nbsp;for&nbsp;1000&nbsp;rows&nbsp;instead&nbsp;of&nbsp;10000,&nbsp;and&nbsp;with&nbsp;--profiler=default:time.&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Jonathan&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Dec&nbsp;9,&nbsp;2009&nbsp;at&nbsp;9:20&nbsp;AM,&nbsp;Oskar&nbsp;Berggren&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:oskar.berggren@gmail.com&quot;&gt;oskar.berggren@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;2009/12/9&nbsp;APS&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:dev.malst@apsystems.it&quot;&gt;dev.malst@apsystems.it&lt;/a&gt;&amp;gt;:&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&amp;gt;&nbsp;For&nbsp;sure&nbsp;I&nbsp;can&nbsp;pass&nbsp;a&nbsp;test&nbsp;case,&nbsp;is&nbsp;better&nbsp;that&nbsp;I&nbsp;file&nbsp;a&nbsp;bug&nbsp;report?&nbsp;I&nbsp;think&lt;br&gt;<br>
&amp;gt;&nbsp;that&nbsp;Mono&nbsp;team&nbsp;already&nbsp;knows&nbsp;where&nbsp;datasets&nbsp;are&nbsp;slower&nbsp;than&nbsp;MS.Net&nbsp;and&nbsp;maybe&lt;br&gt;<br>
&amp;gt;&nbsp;can&nbsp;suggest&nbsp;me&nbsp;some&nbsp;&amp;quot;best&nbsp;practice&amp;quot;.&lt;br&gt;<br>
&amp;gt;&nbsp;Btw&nbsp;with&nbsp;the&nbsp;code&nbsp;provided&nbsp;below&nbsp;with&nbsp;MS.Net&nbsp;on&nbsp;a&nbsp;standard&nbsp;developer&nbsp;machine&lt;br&gt;<br>
&amp;gt;&nbsp;and&nbsp;Mono&nbsp;on&nbsp;a&nbsp;bi-processor&nbsp;testing&nbsp;machine&nbsp;(with&nbsp;2GB&nbsp;of&nbsp;ram):&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;1000&nbsp;rows&lt;br&gt;<br>
&amp;gt;&nbsp;MS.Net:&nbsp;130ms&lt;br&gt;<br>
&amp;gt;&nbsp;Mono&nbsp;2.4.3: &nbsp;1.2s&lt;br&gt;<br>
&amp;gt;&nbsp;Mono&nbsp;2.0.1: &nbsp;3.5s&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;10.000&nbsp;rows&lt;br&gt;<br>
&amp;gt;&nbsp;MS.Net:&nbsp;less&nbsp;than&nbsp;a&nbsp;second&lt;br&gt;<br>
&amp;gt;&nbsp;Mono&nbsp;2.4.3:&nbsp;114s&lt;br&gt;<br>
&amp;gt;&nbsp;Mono&nbsp;2.0.1:&nbsp;361s&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;So&nbsp;when&nbsp;the&nbsp;data&nbsp;size&nbsp;increase&nbsp;by&nbsp;a&nbsp;factor&nbsp;of&nbsp;10,&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://ms.net&quot;&nbsp;target=&quot;_blank&quot;&gt;ms.net&lt;/a&gt;&nbsp;the&nbsp;time&lt;br&gt;<br>
taken&nbsp;also&nbsp;seem&nbsp;to&nbsp;increase&nbsp;by&nbsp;a&nbsp;factor&nbsp;of&nbsp;10,&nbsp;but&nbsp;on&nbsp;mono&nbsp;by&nbsp;a&nbsp;factor&lt;br&gt;<br>
of&nbsp;100.&nbsp;Seems&nbsp;like&nbsp;an&nbsp;an&nbsp;O(N)&nbsp;versus&nbsp;an&nbsp;O(N²)&nbsp;algorithm.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;code&nbsp;below&nbsp;contains&nbsp;a&nbsp;loop&nbsp;and&nbsp;you&nbsp;claim&nbsp;the&nbsp;Select&nbsp;part&nbsp;is&nbsp;taking&lt;br&gt;<br>
the&nbsp;most&nbsp;time.&nbsp;If&nbsp;that&nbsp;is&nbsp;true,&nbsp;it&nbsp;seems&nbsp;to&nbsp;indicate&nbsp;that&nbsp;&lt;a&nbsp;href=&quot;http://ms.net&quot;&nbsp;target=&quot;_blank&quot;&gt;ms.net&lt;/a&gt;&lt;br&gt;<br>
Select()&nbsp;for&nbsp;this&nbsp;case&nbsp;is&nbsp;O(1)&nbsp;but&nbsp;mono&amp;#39;s&nbsp;O(N),&nbsp;with&nbsp;N&nbsp;being&nbsp;the&lt;br&gt;<br>
number&nbsp;of&nbsp;rows&nbsp;in&nbsp;the&nbsp;table.&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
/Oskar&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;have&nbsp;tables&nbsp;with&nbsp;more&nbsp;than&nbsp;50.000&nbsp;rows...I&nbsp;don&amp;#39;t&nbsp;know&nbsp;how&nbsp;much&nbsp;it&nbsp;takes&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;perform&nbsp;the&nbsp;elaboration.&nbsp;RowFilter&nbsp;speed&nbsp;up&nbsp;only&nbsp;if&nbsp;applied&nbsp;on&nbsp;small&lt;br&gt;<br>
&amp;gt;&nbsp;rowsets.&lt;br&gt;<br>
&amp;gt;&nbsp;The&nbsp;problem&nbsp;is&nbsp;in&nbsp;the&nbsp;.Select&nbsp;method,&nbsp;removing&nbsp;those&nbsp;lines&nbsp;the&nbsp;elaboration&lt;br&gt;<br>
&amp;gt;&nbsp;is&nbsp;quicker&nbsp;in&nbsp;Mono.&nbsp;Testing&nbsp;machines&nbsp;are&nbsp;not&nbsp;with&nbsp;the&nbsp;same&nbsp;resources&nbsp;but&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;difference&nbsp;is&nbsp;too&nbsp;much&nbsp;to&nbsp;think&nbsp;to&nbsp;an&nbsp;hardware&nbsp;difference.&lt;br&gt;<br>
&amp;gt;&nbsp;Here&nbsp;is&nbsp;the&nbsp;code...&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;DataSet&nbsp;ds1&nbsp;=&nbsp;new&nbsp;DataSet();&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds1.Tables.Add();&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds1.Tables[0].Columns.Add(&amp;quot;COL1&amp;quot;,&nbsp;typeof(string));&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds1.Tables[0].Columns.Add(&amp;quot;COL2&amp;quot;,&nbsp;typeof(int));&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds1.Tables[0].Columns.Add(&amp;quot;COL3&amp;quot;,&nbsp;typeof(bool));&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;10000;&nbsp;i++)&nbsp;{&lt;br&gt;<br>
&amp;gt;&nbsp;               &nbsp;ds1.Tables[0].Rows.Add(new&nbsp;object[]&nbsp;{&nbsp;&amp;quot;test&amp;quot;,&nbsp;i,&nbsp;true&nbsp;});&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;}&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;DataSet&nbsp;ds2&nbsp;=&nbsp;new&nbsp;DataSet();&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds2.Tables.Add();&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds2.Tables[0].Columns.Add(&amp;quot;COL1&amp;quot;,&nbsp;typeof(string));&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds2.Tables[0].Columns.Add(&amp;quot;COL2&amp;quot;,&nbsp;typeof(int));&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds2.Tables[0].Columns.Add(&amp;quot;COL3&amp;quot;,&nbsp;typeof(bool));&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;10000;&nbsp;i++)&nbsp;{&lt;br&gt;<br>
&amp;gt;&nbsp;               &nbsp;ds2.Tables[0].Rows.Add(new&nbsp;object[]&nbsp;{&nbsp;&amp;quot;test&amp;quot;,&nbsp;i,&nbsp;true&nbsp;});&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;}&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;DataSet&nbsp;ds3&nbsp;=&nbsp;new&nbsp;DataSet();&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds3.Tables.Add();&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds3.Tables[0].Columns.Add(&amp;quot;COL1&amp;quot;,&nbsp;typeof(string));&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds3.Tables[0].Columns.Add(&amp;quot;COL2&amp;quot;,&nbsp;typeof(int));&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;ds3.Tables[0].Columns.Add(&amp;quot;COL3&amp;quot;,&nbsp;typeof(bool));&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;10000;&nbsp;i++)&nbsp;{&lt;br&gt;<br>
&amp;gt;&nbsp;               &nbsp;ds3.Tables[0].Rows.Add(new&nbsp;object[]&nbsp;{&nbsp;&amp;quot;test&amp;quot;,&nbsp;i,&nbsp;true&nbsp;});&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;}&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;int&nbsp;idx=0;&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;foreach&nbsp;(DataRow&nbsp;dr&nbsp;in&nbsp;ds1.Tables[0].Rows)&nbsp;{&lt;br&gt;<br>
&amp;gt;&nbsp;               &nbsp;DataRow[]&nbsp;dr2&nbsp;=&nbsp;ds2.Tables[0].Select(&amp;quot;COL2=&amp;quot;&nbsp;+&nbsp;idx);&lt;br&gt;<br>
&amp;gt;&nbsp;               &nbsp;DataRow[]&nbsp;dr3&nbsp;=&nbsp;ds3.Tables[0].Select(&amp;quot;COL2=&amp;quot;&nbsp;+&nbsp;idx);&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;               &nbsp;idx++;&lt;br&gt;<br>
&amp;gt;&nbsp;           &nbsp;}&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;At&nbsp;21.59&nbsp;02/12/2009,&nbsp;Nagappan&nbsp;Alagappan&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Hello,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Do&nbsp;you&nbsp;have&nbsp;a&nbsp;test&nbsp;case&nbsp;to&nbsp;reproduce&nbsp;this&nbsp;issue,&nbsp;which&nbsp;you&nbsp;could&nbsp;share&nbsp;with&lt;br&gt;<br>
&amp;gt;&nbsp;the&nbsp;Mono&nbsp;team&nbsp;?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Thanks&lt;br&gt;<br>
&amp;gt;&nbsp;Nagappan&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;Wed,&nbsp;Dec&nbsp;2,&nbsp;2009&nbsp;at&nbsp;4:05&nbsp;AM,&nbsp;APS&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:dev.malst@apsystems.it&quot;&gt;dev.malst@apsystems.it&lt;/a&gt;&nbsp;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Hi,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&amp;#39;m&nbsp;testing&nbsp;some&nbsp;old&nbsp;elaboration&nbsp;that&nbsp;cycles&nbsp;on&nbsp;a&nbsp;large&nbsp;datatable&nbsp;and&lt;br&gt;<br>
&amp;gt;&nbsp;for&nbsp;every&nbsp;rows&nbsp;makes&nbsp;several&nbsp;selections&nbsp;on&nbsp;separated&nbsp;datatables.&lt;br&gt;<br>
&amp;gt;&nbsp;This&nbsp;elaboration&nbsp;is&nbsp;really&nbsp;slow&nbsp;on&nbsp;mono&nbsp;and&nbsp;fast&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://MS.NET&quot;&nbsp;target=&quot;_blank&quot;&gt;MS.NET&lt;/a&gt;,&nbsp;let&nbsp;say&lt;br&gt;<br>
&amp;gt;&nbsp;400secs&nbsp;vs&nbsp;4&nbsp;secs.&lt;br&gt;<br>
&amp;gt;&nbsp;It&nbsp;seems&nbsp;that&nbsp;last&nbsp;rows&nbsp;are&nbsp;slower&nbsp;that&nbsp;first&nbsp;rows.&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;made&nbsp;some&nbsp;test&nbsp;on&nbsp;datasets&nbsp;scroll&nbsp;and&nbsp;I&nbsp;saw&nbsp;that&nbsp;mono&nbsp;performance&lt;br&gt;<br>
&amp;gt;&nbsp;is&nbsp;better&nbsp;than&nbsp;&lt;a&nbsp;href=&quot;http://MS.NET&quot;&nbsp;target=&quot;_blank&quot;&gt;MS.NET&lt;/a&gt;&nbsp;so&nbsp;the&nbsp;delay&nbsp;is&nbsp;due&nbsp;to&nbsp;inner&nbsp;selections.&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;changed&nbsp;datatable.select&nbsp;in&nbsp;defaultview.sort&nbsp;and&nbsp;I&nbsp;gained&nbsp;200secs,&lt;br&gt;<br>
&amp;gt;&nbsp;still&nbsp;too&nbsp;slow.&lt;br&gt;<br>
&amp;gt;&nbsp;Now&nbsp;I&amp;#39;ve&nbsp;identified&nbsp;some&nbsp;datatable.compute&nbsp;as&nbsp;the&nbsp;main&nbsp;delay&nbsp;source.&lt;br&gt;<br>
&amp;gt;&nbsp;I&amp;#39;ll&nbsp;try&nbsp;to&nbsp;change&nbsp;them&nbsp;using&nbsp;Linq&nbsp;but&nbsp;the&nbsp;question&nbsp;is:&nbsp;there&amp;#39;s&nbsp;some&lt;br&gt;<br>
&amp;gt;&nbsp;known&nbsp;performance&nbsp;problem&nbsp;in&nbsp;dataset&nbsp;heavy&nbsp;usage,&nbsp;there&amp;#39;s&nbsp;some&nbsp;best&lt;br&gt;<br>
&amp;gt;&nbsp;pratice&nbsp;that&nbsp;you&nbsp;can&nbsp;suggest&nbsp;to&nbsp;speed&nbsp;up&nbsp;elaborations?&lt;br&gt;<br>
&amp;gt;&nbsp;Thanks&nbsp;in&nbsp;advance.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;--&lt;br&gt;<br>
&amp;gt;&nbsp;Linux&nbsp;Desktop&nbsp;(GUI&nbsp;Application)&nbsp;Testing&nbsp;Project&nbsp;-&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://ldtp.freedesktop.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://ldtp.freedesktop.org&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://nagappanal.blogspot.com&quot;&nbsp;target=&quot;_blank&quot;&gt;http://nagappanal.blogspot.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;--&lt;br&gt;<br>
&amp;gt;&nbsp;Il&nbsp;messaggio&nbsp;e&amp;#39;&nbsp;stato&nbsp;analizzato&nbsp;alla&nbsp;ricerca&nbsp;di&nbsp;virus&nbsp;o&lt;br&gt;<br>
&amp;gt;&nbsp;contenuti&nbsp;pericolosi&nbsp;da&nbsp;MailScanner,&nbsp;ed&nbsp;e&amp;#39;&lt;br&gt;<br>
&amp;gt;&nbsp;risultato&nbsp;non&nbsp;infetto.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
