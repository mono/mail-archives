<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7650.28&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[Mono-Dev]&nbsp;[Patch]&nbsp;System.Web.Services:&nbsp;ensure&nbsp;conformant&nbsp;WebSevice&nbsp;fails&nbsp;to&nbsp;generate&nbsp;its&nbsp;wsdl&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hello&nbsp;Atsushi,&lt;BR&gt;<br>
&lt;BR&gt;<br>
No,&nbsp;this&nbsp;is&nbsp;not&nbsp;correct.&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;WebServiceBindingAttribute&nbsp;I&nbsp;add&nbsp;a&nbsp;&amp;quot;default&amp;quot;&nbsp;BindingInfo.&nbsp;I&nbsp;refactored&nbsp;the&nbsp;BindingInfo&nbsp;construction&nbsp;because&nbsp;currently&nbsp;we&nbsp;always&nbsp;create&nbsp;a&nbsp;default&nbsp;BindingInfo,&nbsp;which&nbsp;is&nbsp;not&nbsp;conformant.&nbsp;Thus&nbsp;my&nbsp;validation&nbsp;never&nbsp;works.&lt;BR&gt;<br>
&lt;BR&gt;<br>
The&nbsp;reason&nbsp;I&nbsp;check&nbsp;the&nbsp;WebServiceBindingAttribute.Name&nbsp;is&nbsp;because&nbsp;of&nbsp;MS&nbsp;behavior.&nbsp;They&nbsp;throw&nbsp;ONLY&nbsp;if&nbsp;the&nbsp;name&nbsp;is&nbsp;unspecified&nbsp;(bug?),&nbsp;but&nbsp;in&nbsp;WSDL&nbsp;it&nbsp;always&nbsp;gets&nbsp;a&nbsp;default&nbsp;value.&nbsp;This&nbsp;is&nbsp;also&nbsp;the&nbsp;reason&nbsp;I&nbsp;need&nbsp;the&nbsp;original&nbsp;WebServiceBindingAttribute,&nbsp;since&nbsp;BindingInfo'a&nbsp;Name&nbsp;should&nbsp;be&nbsp;always&nbsp;valid...&lt;BR&gt;<br>
&lt;BR&gt;<br>
Regards,&lt;BR&gt;<br>
Kosta&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
-----Original&nbsp;Message-----&lt;BR&gt;<br>
From:&nbsp;Atsushi&nbsp;Eno&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:atsushi@ximian.com&quot;&gt;mailto:atsushi@ximian.com&lt;/A&gt;]&lt;BR&gt;<br>
Sent:&nbsp;Wed&nbsp;31/01/2007&nbsp;08:31&lt;BR&gt;<br>
To:&nbsp;Konstantin&nbsp;Triger&lt;BR&gt;<br>
Cc:&nbsp;mono-devel-list@lists.ximian.com&lt;BR&gt;<br>
Subject:&nbsp;Re:&nbsp;[Mono-Dev]&nbsp;[Patch]&nbsp;System.Web.Services:&nbsp;ensure&nbsp;conformant&nbsp;WebSevice&nbsp;fails&nbsp;to&nbsp;generate&nbsp;its&nbsp;wsdl&lt;BR&gt;<br>
&lt;BR&gt;<br>
Hi&nbsp;Kosta,&lt;BR&gt;<br>
&lt;BR&gt;<br>
Thanks&nbsp;for&nbsp;the&nbsp;patch&nbsp;!&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;gt;&nbsp;The&nbsp;attached&nbsp;patch&nbsp;ensures&nbsp;that&nbsp;a&nbsp;webservice&nbsp;attributed&nbsp;with&lt;BR&gt;<br>
&amp;gt;&nbsp;[WebServiceBinding&nbsp;(ConformsTo&nbsp;=&nbsp;WsiProfiles.BasicProfile1_1)]&nbsp;throws&nbsp;in&lt;BR&gt;<br>
&amp;gt;&nbsp;case&nbsp;it&nbsp;does&nbsp;not&nbsp;conform&nbsp;to&nbsp;that&nbsp;profile.&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;guess&nbsp;the&nbsp;purpose&nbsp;of&nbsp;this&nbsp;patch&nbsp;is&nbsp;not&nbsp;only&nbsp;about&nbsp;it.&nbsp;After&nbsp;this&lt;BR&gt;<br>
patch&nbsp;it&nbsp;rejects&nbsp;WebService&nbsp;classes&nbsp;that&nbsp;do&nbsp;not&nbsp;have&lt;BR&gt;<br>
WebServiceBindingAttribute.&nbsp;Is&nbsp;it&nbsp;correct?&lt;BR&gt;<br>
&lt;BR&gt;<br>
If&nbsp;yes,&nbsp;then&nbsp;the&nbsp;BindingInfo&nbsp;changes&nbsp;make&nbsp;it&nbsp;nicer.&lt;BR&gt;<br>
In&nbsp;that&nbsp;case&nbsp;we&nbsp;could&nbsp;simply&nbsp;reuse&nbsp;the&nbsp;attribute&nbsp;for&nbsp;Name,&lt;BR&gt;<br>
Namespace&nbsp;and&nbsp;Location&nbsp;too&nbsp;(i.e.&nbsp;no&nbsp;need&nbsp;to&nbsp;have&nbsp;those&nbsp;fields&nbsp;anymore).&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;gt;&nbsp;+#if&nbsp;NET_2_0&lt;BR&gt;<br>
&amp;gt;&nbsp;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(binfo.WebServiceBindingAttribute&nbsp;!=&nbsp;null&nbsp;&amp;amp;&amp;amp;&nbsp;binfo.We&lt;BR&gt;<br>
&amp;gt;&nbsp;bServiceBindingAttribute.ConformsTo&nbsp;!=&nbsp;WsiProfiles.None&nbsp;&amp;amp;&amp;amp;&nbsp;String.IsNullOrEmpty&lt;BR&gt;<br>
&amp;gt;&nbsp;(binfo.WebServiceBindingAttribute.Name))&nbsp;{&lt;BR&gt;<br>
&amp;gt;&nbsp;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;BasicProfileViolationCollection&nbsp;violations&nbsp;=&nbsp;new&lt;BR&gt;<br>
&amp;gt;&amp;nbsp;&nbsp;BasicProfileViolationCollection&nbsp;();&lt;BR&gt;<br>
&amp;gt;&nbsp;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(!WebServicesInteroperability.CheckConformanc&lt;BR&gt;<br>
&amp;gt;&nbsp;e&nbsp;(binfo.WebServiceBindingAttribute.ConformsTo,&nbsp;desc,&nbsp;violations))&lt;BR&gt;<br>
&amp;gt;&nbsp;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;throw&nbsp;new&nbsp;InvalidOperationException&nbsp;(vio&lt;BR&gt;<br>
&amp;gt;&nbsp;lations&nbsp;[0].ToString&nbsp;());&lt;BR&gt;<br>
&amp;gt;&nbsp;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;BR&gt;<br>
&amp;gt;&nbsp;+#endif&lt;BR&gt;<br>
&lt;BR&gt;<br>
Do&nbsp;we&nbsp;need&nbsp;to&nbsp;check&nbsp;WebServiceBindingAttribute.Name&nbsp;here?&lt;BR&gt;<br>
&lt;BR&gt;<br>
Atsushi&nbsp;Eno&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>
<br>

</tt>
