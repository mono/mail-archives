From a2a7329cb17586d255617ff5c2fe05485aff00c3 Mon Sep 17 00:00:00 2001
From: =?utf-8?q?Andreas=20F=C3=A4rber?= <andreas.faerber@web.de>
Date: Sun, 15 Nov 2009 00:37:21 +0100
Subject: [PATCH] Only use GC_get_suspend_signal when compiling against Mono's libgc

---
 mono/metadata/boehm-gc.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/mono/metadata/boehm-gc.c b/mono/metadata/boehm-gc.c
index 53d2832..4a71795 100644
--- a/mono/metadata/boehm-gc.c
+++ b/mono/metadata/boehm-gc.c
@@ -563,7 +563,11 @@ mono_gc_clear_domain (MonoDomain *domain)
 int
 mono_gc_get_suspend_signal (void)
 {
+#if defined(USE_INCLUDED_LIBGC)
 	return GC_get_suspend_signal ();
+#else
+	return 0;
+#endif
 }
 
 #if defined(USE_INCLUDED_LIBGC) && defined(USE_COMPILER_TLS) && defined(__linux__) && (defined(__i386__) || defined(__x86_64__))
-- 
1.5.5.3

