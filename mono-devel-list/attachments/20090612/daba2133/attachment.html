<tt>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;TITLE&gt;Unhandled&nbsp;Exception&nbsp;in&nbsp;Normalization.cs&nbsp;Combine()&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;The&nbsp;following&nbsp;program&nbsp;throws&nbsp;an&nbsp;UnhandledException&nbsp;when&nbsp;trying&nbsp;to&nbsp;normalize&nbsp;a&nbsp;series&nbsp;of&nbsp;greek&nbsp;characters.&nbsp;I&amp;#8217;ve&nbsp;tested&nbsp;this&nbsp;with&nbsp;Mono&nbsp;2.4.7&nbsp;and&nbsp;the&nbsp;latest&nbsp;code&nbsp;from&nbsp;SVN&nbsp;as&nbsp;of&nbsp;about&nbsp;1&nbsp;week&nbsp;ago.&lt;BR&gt;<br>
The&nbsp;same&nbsp;program&nbsp;works&nbsp;fine&nbsp;under&nbsp;Visual&nbsp;Studio.&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&amp;#8217;m&nbsp;new&nbsp;to&nbsp;Unicode,&nbsp;but&nbsp;I&nbsp;thought&nbsp;I&amp;#8217;d&nbsp;put&nbsp;this&nbsp;out&nbsp;there&nbsp;to&nbsp;see&nbsp;if&nbsp;anyone&nbsp;had&nbsp;a&nbsp;quick&nbsp;fix.&lt;BR&gt;<br>
&lt;BR&gt;<br>
using&nbsp;System;&lt;BR&gt;<br>
using&nbsp;System.Text;&lt;BR&gt;<br>
&lt;BR&gt;<br>
namespace&nbsp;NormalizationTest&lt;BR&gt;<br>
{&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;class&nbsp;Program&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;static&nbsp;void&nbsp;Main(string[]&nbsp;args)&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;byte[]&nbsp;utf8Bytes&nbsp;=&nbsp;new&nbsp;byte[]&nbsp;{0xCE,&nbsp;0xB1,&nbsp;0xCC,&nbsp;0x93,&nbsp;0xCD,&nbsp;0x85};&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;string&nbsp;strToNormalize&nbsp;=&nbsp;System.Text.Encoding.UTF8.GetString(utf8Bytes);&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Console.WriteLine(&amp;quot;Converted&nbsp;from&nbsp;Hex:&nbsp;{0}&amp;quot;,&nbsp;strToNormalize);&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Console.WriteLine(&amp;quot;Composed&nbsp;Normalized&nbsp;String:&nbsp;IsNormalized(NormalizationForm.FormC)&nbsp;&amp;nbsp;=&nbsp;{0}&amp;quot;,&nbsp;strToNormalize.IsNormalized(NormalizationForm.FormC));&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Console.WriteLine(&amp;quot;{0}&amp;quot;,&nbsp;strToNormalize.Normalize(NormalizationForm.FormC));&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;BR&gt;<br>
}&lt;BR&gt;<br>
&lt;BR&gt;<br>
----&nbsp;Output&nbsp;---&lt;BR&gt;<br>
WS1048:Debug&nbsp;tom.philpot$&nbsp;/opt/mono/bin/gmcs&nbsp;NormTest.cs&nbsp;/out:NormTest.exe&nbsp;&amp;amp;&amp;amp;&nbsp;/opt/mono/bin/mono&nbsp;--debug&nbsp;NormTest.exe&lt;BR&gt;<br>
Converted&nbsp;from&nbsp;Hex:&nbsp;á¾€&lt;BR&gt;<br>
Composed&nbsp;Normalized&nbsp;String:&nbsp;IsNormalized(NormalizationForm.FormC)&nbsp;&amp;nbsp;=&nbsp;False&lt;BR&gt;<br>
&lt;BR&gt;<br>
Unhandled&nbsp;Exception:&nbsp;System.SystemException:&nbsp;Internal&nbsp;error:&nbsp;should&nbsp;not&nbsp;happen.&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;at&nbsp;Mono.Globalization.Unicode.Normalization.Combine&nbsp;(System.Text.StringBuilder&nbsp;sb,&nbsp;Int32&nbsp;start,&nbsp;Int32&nbsp;checkType)&nbsp;[0x00198]&nbsp;in&nbsp;/Users/tom.philpot/External/mono-project/mcs/class/corlib/Mono.Globalization.Unicode/Normalization.cs:206&nbsp;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;at&nbsp;Mono.Globalization.Unicode.Normalization.Combine&nbsp;(System.String&nbsp;source,&nbsp;Int32&nbsp;start,&nbsp;Int32&nbsp;checkType)&nbsp;[0x0003c]&nbsp;in&nbsp;/Users/tom.philpot/External/mono-project/mcs/class/corlib/Mono.Globalization.Unicode/Normalization.cs:135&nbsp;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;at&nbsp;Mono.Globalization.Unicode.Normalization.Compose&nbsp;(System.String&nbsp;source,&nbsp;Int32&nbsp;checkType)&nbsp;[0x00011]&nbsp;in&nbsp;/Users/tom.philpot/External/mono-project/mcs/class/corlib/Mono.Globalization.Unicode/Normalization.cs:121&nbsp;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;at&nbsp;Mono.Globalization.Unicode.Normalization.Normalize&nbsp;(System.String&nbsp;source,&nbsp;Int32&nbsp;type)&nbsp;[0x00015]&nbsp;in&nbsp;/Users/tom.philpot/External/mono-project/mcs/class/corlib/Mono.Globalization.Unicode/Normalization.cs:392&nbsp;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;at&nbsp;System.String.Normalize&nbsp;(NormalizationForm&nbsp;normalizationForm)&nbsp;[0x00023]&nbsp;in&nbsp;/Users/tom.philpot/External/mono-project/mcs/class/corlib/System/String.cs:1442&nbsp;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;at&nbsp;NormalizationTest.Program.Main&nbsp;(System.String[]&nbsp;args)&nbsp;[0x00000]&nbsp;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>
<br>

</tt>
