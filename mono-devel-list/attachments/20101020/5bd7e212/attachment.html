<tt>
Here&amp;#39;s&nbsp;another&nbsp;question&nbsp;to&nbsp;the&nbsp;list:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;What&amp;#39;s&nbsp;exactly&nbsp;the&nbsp;purpose&nbsp;of&nbsp;KeyPairPersistence&nbsp;is?&nbsp;It&nbsp;looks&nbsp;like&nbsp;some&nbsp;sort&nbsp;of&nbsp;pseudo&nbsp;KeyContainer&nbsp;implementation&nbsp;which&nbsp;it&amp;#39;s&nbsp;used&nbsp;by&nbsp;RSACryptoServiceProvider&nbsp;to&nbsp;save&nbsp;keys&nbsp;to&nbsp;disk..&nbsp;however&nbsp;I&amp;#39;m&nbsp;still&nbsp;trying&nbsp;to&nbsp;look&nbsp;it&amp;#39;s&nbsp;relationship&nbsp;to&nbsp;X509Stores..&lt;/li&gt;<br>
<br>
&lt;/ul&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Oct&nbsp;20,&nbsp;2010&nbsp;at&nbsp;4:06&nbsp;PM,&nbsp;Pablo&nbsp;Ruiz&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:pablo.ruiz@gmail.com&quot;&gt;pablo.ruiz@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
Hi&nbsp;Sebastien,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Great&nbsp;you&nbsp;replied,&nbsp;as&nbsp;you&nbsp;were&nbsp;the&nbsp;first&nbsp;one&nbsp;on&nbsp;my&nbsp;(short)&nbsp;list&nbsp;of&nbsp;&amp;#39;people&nbsp;to&nbsp;ask&nbsp;in&nbsp;case&nbsp;of&nbsp;emergency&amp;#39;&nbsp;;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Actually&nbsp;my&nbsp;(medium-long&nbsp;term)&nbsp;goal&nbsp;it&amp;#39;s&nbsp;adding&nbsp;support&nbsp;for&nbsp;non-software&nbsp;based&nbsp;crypto&nbsp;devices&nbsp;to&nbsp;mono,&nbsp;however&nbsp;I&nbsp;know&nbsp;this&nbsp;it&amp;#39;s&nbsp;not&nbsp;a&nbsp;simple&nbsp;task&nbsp;to&nbsp;undertake,&nbsp;so&nbsp;I&nbsp;will&nbsp;try&nbsp;to&nbsp;implement&nbsp;it&nbsp;on&nbsp;a&nbsp;step-by-step&nbsp;basis. &lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;fact,&nbsp;here&nbsp;it&amp;#39;s,&nbsp;an&nbsp;initial&nbsp;short&nbsp;list&nbsp;of&nbsp;what&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;do,&nbsp;it&amp;#39;s&nbsp;an&nbsp;initial&nbsp;list&nbsp;of&nbsp;goals,&nbsp;which&nbsp;has&nbsp;not&nbsp;been analyzed in&nbsp;deep..&nbsp;so&nbsp;any&nbsp;comment/ideas/proposals&nbsp;would&nbsp;be&nbsp;great:&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
&lt;ul&gt;&lt;li&gt;Adding&nbsp;(software-based)&nbsp;privateKey&nbsp;support&nbsp;to&nbsp;X509Stores,&nbsp;so&nbsp;one&nbsp;can&nbsp;get&nbsp;an&nbsp;X509Certificate2&nbsp;from&nbsp;an&nbsp;store&nbsp;and&nbsp;sign&nbsp;with&nbsp;it,&nbsp;just&nbsp;the&nbsp;same&nbsp;way&nbsp;it&nbsp;works&nbsp;in&nbsp;MS.Net.&lt;/li&gt;&lt;li&gt;Adding&nbsp;privateKey&nbsp;support&nbsp;to&nbsp;X509Stores,&nbsp;but&nbsp;using&nbsp;some&nbsp;sort&nbsp;of&nbsp;provider&nbsp;model, similar to&nbsp;what&nbsp;has&nbsp;been&nbsp;done&nbsp;at&nbsp;mono&amp;#39;s&nbsp;System.Messaging,&nbsp;allowing&nbsp;user&nbsp;to&nbsp;switch&nbsp;certificate&nbsp;store&amp;#39;s&nbsp;(or&nbsp;*CryptoServiceProvider&amp;#39;s)&nbsp;implementation..&nbsp;(and&nbsp;or&nbsp;allowing&nbsp;us&nbsp;to&nbsp;have&nbsp;different&nbsp;x509store&nbsp;mechanism&nbsp;on&nbsp;different&nbsp;OSs)&lt;/li&gt;<br>
<br>
<br>
&lt;li&gt;Implementing&nbsp;one&nbsp;of&nbsp;such&nbsp;x509store/CSP&nbsp;sub-systems&nbsp;which&nbsp;allows&nbsp;to&nbsp;use&nbsp;a&nbsp;hardware&nbsp;HSM,&nbsp;maybe&nbsp;by&nbsp;using&nbsp;pkcs11&nbsp;or&nbsp;openssl-engine&nbsp;under&nbsp;the&nbsp;hood. &lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;I&nbsp;already&nbsp;have&nbsp;knowledge&nbsp;on&nbsp;x509&nbsp;programing&nbsp;on&nbsp;both&nbsp;win32&nbsp;(c++/.net)&nbsp;and&nbsp;linux/openssl,&nbsp;however,&nbsp;as&nbsp;you&nbsp;said,&nbsp;how&nbsp;things&nbsp;are&nbsp;assembled&nbsp;in&nbsp;mono&nbsp;can&nbsp;be&nbsp;challenging&nbsp;as&nbsp;AFAIK&nbsp;there&amp;#39;s&nbsp;also&nbsp;support&nbsp;for&nbsp;MacOSX/iPhone/etc. &lt;/div&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;such,&nbsp;being&nbsp;able&nbsp;to&nbsp;add&nbsp;support&nbsp;for&nbsp;(software&nbsp;based)&nbsp;privateKey&nbsp;handling&nbsp;to&nbsp;X509Stores&nbsp;looks&nbsp;like&nbsp;an&nbsp;not-so-hard&nbsp;initial&nbsp;task&nbsp;which&nbsp;will&nbsp;allow&nbsp;me&nbsp;to&nbsp;start&nbsp;hacking&nbsp;around&nbsp;Mono.Security&nbsp;&amp;amp;&nbsp;System.Security&nbsp;so&nbsp;I&nbsp;can&nbsp;learn&nbsp;how&nbsp;all&nbsp;those&nbsp;bits&nbsp;are&nbsp;put&nbsp;in&nbsp;place&nbsp;on&nbsp;mono. &lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;already&nbsp;started&nbsp;hacking&nbsp;a&nbsp;bit,&nbsp;and&nbsp;by&nbsp;now&nbsp;I&nbsp;have&nbsp;it&amp;#39;s&nbsp;just&nbsp;added&nbsp;(to&nbsp;Mono.Security.dll)&nbsp;the&nbsp;ability&nbsp;to&nbsp;store&nbsp;private&nbsp;key&amp;#39;s&nbsp;along&nbsp;with&nbsp;public&nbsp;x509&nbsp;certificate&nbsp;files,&nbsp;however&nbsp;I&nbsp;have&nbsp;a&nbsp;few&nbsp;doubts&nbsp;which:&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;My&nbsp;initial&nbsp;idea&nbsp;was&nbsp;extending&nbsp;Mono.Security.X509.X509Store::Import&nbsp;so&nbsp;if&nbsp;a&nbsp;certificate&nbsp;with&nbsp;exportable&nbsp;parameters&nbsp;are&nbsp;passed&nbsp;as&nbsp;input,&nbsp;it&nbsp;will&nbsp;create&nbsp;(along&nbsp;with&nbsp;the&nbsp;DER&nbsp;certificate&nbsp;file)&nbsp;a&nbsp;new&nbsp;file&nbsp;($UniqueName$.key),&nbsp;which&nbsp;will&nbsp;contain&nbsp;the&nbsp;PKCS8&nbsp;privateKey&nbsp;(encrypted&nbsp;using&nbsp;ProtectedData.Protect). Obviously&nbsp;when&nbsp;accessing&nbsp;the&nbsp;certificate,&nbsp;the&nbsp;oposite&nbsp;operation&nbsp;will&nbsp;be&nbsp;done&nbsp;to&nbsp;return&nbsp;a&nbsp;certificate&nbsp;with&nbsp;it&amp;#39;s&nbsp;corresponding&nbsp;privateKey&nbsp;if&nbsp;available.. However,&nbsp;I&amp;#39;m&nbsp;not&nbsp;completelly&nbsp;sure&nbsp;about&nbsp;this&nbsp;approach..&nbsp;¿any&nbsp;recomendation&nbsp;in&nbsp;this&nbsp;area?&lt;/li&gt;<br>
<br>
<br>
&lt;li&gt;Also,&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;control&nbsp;which&nbsp;key&amp;#39;s&nbsp;cannot&nbsp;be&nbsp;exported&nbsp;(just&nbsp;the&nbsp;same&nbsp;as&nbsp;on&nbsp;win32),&nbsp;where&nbsp;would&nbsp;you&nbsp;store&nbsp;this&nbsp;infomartion&nbsp;(a&nbsp;bool&nbsp;or&nbsp;something&nbsp;indicating&nbsp;that&nbsp;a&nbsp;key&nbsp;it&amp;#39;s&nbsp;exportable)..&nbsp;¿a&nbsp;$UniqueName$.xml&nbsp;file&nbsp;along&nbsp;with&nbsp;cert&nbsp;and&nbsp;key? &lt;/li&gt;<br>
<br>
<br>
&lt;li&gt;Also,&nbsp;I&nbsp;have&nbsp;doubts&nbsp;about&nbsp;how&nbsp;to&nbsp;associate&nbsp;certs&nbsp;and&nbsp;privateKeys&nbsp;within&nbsp;the&nbsp;store.&nbsp;My&nbsp;current&nbsp;solution&nbsp;looks&nbsp;great&nbsp;for&nbsp;software&nbsp;based&nbsp;privateKey,&nbsp;however,&nbsp;if/when&nbsp;at&nbsp;some&nbsp;point&nbsp;we&nbsp;do&nbsp;support&nbsp;hardware&nbsp;based&nbsp;privateKey..&nbsp;how&nbsp;can&nbsp;our&nbsp;X509Store&nbsp;know&nbsp;that&nbsp;a&nbsp;certificate&amp;#39;s&nbsp;privateKey&nbsp;it&amp;#39;s&nbsp;&amp;#39;usable&amp;#39;&nbsp;by&nbsp;using&nbsp;one&nbsp;specific&nbsp;x509-provider?&nbsp;Just&nbsp;storing&nbsp;this&nbsp;info&nbsp;on&nbsp;an&nbsp;¿XML?&nbsp;file&nbsp;along&nbsp;with&nbsp;the&nbsp;certificate&nbsp;itself&nbsp;seems&nbsp;a&nbsp;viable&nbsp;solution,&nbsp;but&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;share&nbsp;ideas&nbsp;with&nbsp;others..&lt;/li&gt;<br>
<br>
<br>
&lt;li&gt;As&nbsp;far&nbsp;as&nbsp;I&nbsp;can&nbsp;see,&nbsp;a&nbsp;few&nbsp;Mono.Security&amp;#39;s&nbsp;classes&nbsp;(X509Store&nbsp;among&nbsp;them)&nbsp;are&nbsp;duplicated&nbsp;at&nbsp;mcs/class/corlib/Mono.Security.X509/..&nbsp;¿should&nbsp;I&nbsp;copy&nbsp;my&nbsp;updated&nbsp;classes&nbsp;back&nbsp;to&nbsp;corlib/Mono.Security.X509? &lt;/li&gt;&lt;li&gt;Regarding&nbsp;RSAManaged&nbsp;and&nbsp;RSACryptoServiceProvider,&nbsp;I&nbsp;know&nbsp;that&nbsp;on&nbsp;MS&nbsp;side&nbsp;of&nbsp;things,&nbsp;X509Certificate2&nbsp;has&nbsp;a&nbsp;CAPI&nbsp;binding&nbsp;(via&nbsp;PrivateKey&nbsp;property)&nbsp;to&nbsp;the&nbsp;CSP&nbsp;store&nbsp;which&nbsp;holds&nbsp;the&nbsp;certificate&nbsp;(and&nbsp;it&amp;#39;s&nbsp;privateKey)..&nbsp;Right&nbsp;now&nbsp;I&nbsp;have&nbsp;not&nbsp;made&nbsp;a&nbsp;deep&nbsp;analisys&nbsp;of&nbsp;what&nbsp;it&amp;#39;s&nbsp;the&nbsp;best&nbsp;path&nbsp;to&nbsp;provide&nbsp;the&nbsp;same functionality,&nbsp;and&nbsp;any&nbsp;pointer&nbsp;on&nbsp;this&nbsp;subject&nbsp;would&nbsp;be&nbsp;great&nbsp;;)&lt;/li&gt;<br>
<br>
<br>
&lt;/ul&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;what&nbsp;I&nbsp;have&nbsp;by&nbsp;now..&nbsp;but&nbsp;undoubtly&nbsp;more&nbsp;issues&nbsp;will&nbsp;come..&nbsp;;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;m&nbsp;also&nbsp;available&nbsp;at&nbsp;irc&nbsp;(#mono)&nbsp;and&nbsp;I&nbsp;guess&nbsp;I&nbsp;will&nbsp;ask&nbsp;you&nbsp;some&nbsp;questions&nbsp;there&nbsp;at&nbsp;some&nbsp;point,&nbsp;however,&nbsp;I&nbsp;will&nbsp;submit&nbsp;of&nbsp;our&nbsp;conclusions&nbsp;here,&nbsp;of&nbsp;course&nbsp;;)&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Greets.&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Oct&nbsp;20,&nbsp;2010&nbsp;at&nbsp;2:33&nbsp;PM,&nbsp;Sebastien&nbsp;Pouliot&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:sebastien.pouliot@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;sebastien.pouliot@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hello&nbsp;Pablo,&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
On&nbsp;Wed,&nbsp;2010-10-20&nbsp;at&nbsp;00:23&nbsp;+0200,&nbsp;Pablo&nbsp;Ruiz&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Hi,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&amp;#39;m&nbsp;thinking&nbsp;on&nbsp;adding&nbsp;privateKey&nbsp;support&nbsp;for&nbsp;Mono.Security.X509Store,&lt;br&gt;<br>
&amp;gt;&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;(later)&nbsp;used&nbsp;as&nbsp;part&nbsp;of&lt;br&gt;<br>
&amp;gt;&nbsp;System.Security.Cryptography.X509Certificates&nbsp;(on&nbsp;2.0+).&nbsp;This&nbsp;is&nbsp;one&lt;br&gt;<br>
&amp;gt;&nbsp;of&nbsp;the&nbsp;x509&nbsp;related&nbsp;improvements&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;add&nbsp;to&nbsp;mono&amp;#39;s&nbsp;trunk.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;However,&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;discuss&nbsp;(by&nbsp;email&nbsp;and/or&nbsp;irc?)&nbsp;some&nbsp;of&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;details&nbsp;first&nbsp;with&nbsp;some&nbsp;core&nbsp;member&nbsp;(some&nbsp;sort&nbsp;of&nbsp;mentoring)&nbsp;in&nbsp;order&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;start&nbsp;in&nbsp;a&nbsp;good&nbsp;direction.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;You&nbsp;can&nbsp;either&nbsp;discuss&nbsp;this&nbsp;here,&nbsp;on&nbsp;this&nbsp;mailing-list,&nbsp;since&nbsp;it&nbsp;will&lt;br&gt;<br>
leave&nbsp;a&nbsp;google-able&nbsp;trace&nbsp;of&nbsp;the&nbsp;discussion.&nbsp;Otherwise&nbsp;you&nbsp;can&nbsp;try&nbsp;to&lt;br&gt;<br>
ping&nbsp;me&nbsp;on&nbsp;IRC&nbsp;(e.g.&nbsp;#monodev&nbsp;on&nbsp;GIMPNet)&nbsp;and&nbsp;we&nbsp;can&nbsp;post&nbsp;a&nbsp;resume&nbsp;later&lt;br&gt;<br>
here.&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;are&nbsp;quite&nbsp;a&nbsp;few&nbsp;things&nbsp;to&nbsp;be&nbsp;aware&nbsp;in&nbsp;order&nbsp;to&nbsp;implement&nbsp;this&lt;br&gt;<br>
(since&nbsp;it&nbsp;involves&nbsp;OS&nbsp;level&nbsp;features,&nbsp;tools&nbsp;and&nbsp;the&nbsp;class&nbsp;libraries).&nbsp;I&lt;br&gt;<br>
think&nbsp;the&nbsp;best&nbsp;step&nbsp;would&nbsp;be,&nbsp;for&nbsp;you,&nbsp;to&nbsp;describe&nbsp;your&nbsp;understanding&nbsp;of&lt;br&gt;<br>
the&nbsp;issues&nbsp;and&nbsp;I&amp;#39;ll&nbsp;fill&nbsp;the&nbsp;blanks&nbsp;(in&nbsp;any&nbsp;:-).&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;Sebastien&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
