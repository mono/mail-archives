<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;Hi,&lt;/span&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sorry&nbsp;for&nbsp;dual&nbsp;posting&nbsp;with&nbsp;mono-list,&nbsp;but&nbsp;it&nbsp;seams&nbsp;that&nbsp;my&nbsp;problem&nbsp;is&nbsp;tricky,&nbsp;I&nbsp;have&nbsp;also&nbsp;appended&nbsp;more&nbsp;info.&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;I&nbsp;am&nbsp;embedding&nbsp;mono&nbsp;in&nbsp;a&nbsp;qt&nbsp;application&nbsp;on&nbsp;Windows,&nbsp;and&nbsp;when&nbsp;executing&nbsp;code,&nbsp;I&nbsp;have&nbsp;a&nbsp;SIGSEGV&nbsp;in&nbsp;managed&nbsp;code,&nbsp;that&nbsp;is&nbsp;a&nbsp;NullReferenceException,&nbsp;but&nbsp;my&nbsp;variable&nbsp;is&nbsp;not&nbsp;null.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;I&nbsp;am&nbsp;on&nbsp;Windows&nbsp;10&nbsp;x64.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;I&nbsp;have&nbsp;installed&nbsp;Mono&nbsp;5.0.1&nbsp;(Visual&nbsp;Studio&nbsp;built&nbsp;mono)&nbsp;x86.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;I&nbsp;code&nbsp;on&nbsp;Qt&nbsp;5.3&nbsp;with&nbsp;MinGW&nbsp;x86.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;I&nbsp;have&nbsp;a&nbsp;native&nbsp;method&nbsp;that&nbsp;calls&nbsp;a&nbsp;managed&nbsp;method&nbsp;:&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;mono_runtime_invoke(method,&nbsp;obj,&nbsp;args,&nbsp;&amp;exceptionObject).&lt;/span&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;In&nbsp;my&nbsp;managed&nbsp;method,&nbsp;I&nbsp;have&nbsp;a&nbsp;&quot;lock&quot;&nbsp;statement&nbsp;:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;lock(this.myVar)&nbsp;{&nbsp;...&nbsp;}&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;The&nbsp;SIGSEGV&nbsp;(or&nbsp;NullReferenceException)&nbsp;is&nbsp;raised&nbsp;only&nbsp;when&nbsp;the&nbsp;native&nbsp;method&nbsp;is&nbsp;called&nbsp;on&nbsp;the&nbsp;second&nbsp;time.&nbsp;When&nbsp;called&nbsp;the&nbsp;first&nbsp;time,&nbsp;it&nbsp;works&nbsp;well.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;Between&nbsp;the&nbsp;two&nbsp;calls,&nbsp;nothing&nbsp;has&nbsp;changed.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;I&nbsp;have&nbsp;refactored&nbsp;my&nbsp;code&nbsp;:&nbsp;the&nbsp;problem&nbsp;does&nbsp;not&nbsp;seam&nbsp;to&nbsp;come&nbsp;from&nbsp;the&nbsp;lock&nbsp;statement,&nbsp;but&nbsp;from&nbsp;the&nbsp;underlying&nbsp;variable.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;In&nbsp;my&nbsp;original&nbsp;case,&nbsp;&quot;myVar&quot;&nbsp;was&nbsp;a&nbsp;dictionary.&nbsp;In&nbsp;my&nbsp;refactored&nbsp;code,&nbsp;it&nbsp;is&nbsp;a&nbsp;List&lt;T&gt;.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;I&nbsp;have&nbsp;dumped&nbsp;the&nbsp;list&nbsp;items&nbsp;count.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;When&nbsp;my&nbsp;method&nbsp;is&nbsp;called&nbsp;the&nbsp;first&nbsp;time,&nbsp;I&nbsp;have&nbsp;the&nbsp;good&nbsp;items&nbsp;count&nbsp;value.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;When&nbsp;called&nbsp;the&nbsp;second&nbsp;time,&nbsp;the&nbsp;item&nbsp;count&nbsp;is&nbsp;an&nbsp;abberation,&nbsp;value&nbsp;is&nbsp;:Â &lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-size:small&quot;&gt;-259715328.&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-size:small&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;&quot;&gt;What&nbsp;can&nbsp;it&nbsp;mean&nbsp;?&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;&quot;&gt;Thanks&lt;/div&gt;&lt;/div&gt;<br>

</tt>
