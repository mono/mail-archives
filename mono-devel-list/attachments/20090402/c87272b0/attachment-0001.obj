Index: backend/server/breakpoints.c
===================================================================
--- backend/server/breakpoints.c	(revision 130915)
+++ backend/server/breakpoints.c	(working copy)
@@ -3,7 +3,9 @@
 #include <glib/gthread.h>
 #include <sys/stat.h>
 #include <signal.h>
+#ifdef HAVE_UNISTD_H
 #include <unistd.h>
+#endif
 #include <string.h>
 #include <fcntl.h>
 #include <errno.h>
Index: backend/server/library.c
===================================================================
--- backend/server/library.c	(revision 130915)
+++ backend/server/library.c	(working copy)
@@ -1,20 +1,21 @@
 #include <config.h>
 #include <server.h>
-#include <signal.h>
+#ifdef HAVE_UNISTD_H
 #include <unistd.h>
+#endif
 #if defined(__linux__) || defined(__FreeBSD__)
 #include <sys/poll.h>
 #include <sys/select.h>
 #endif
-#include <pthread.h>
-#include <semaphore.h>
-#include <sys/time.h>
 #include <errno.h>
 #include <stdio.h>
 
 #if defined(__POWERPC__)
 extern InferiorVTable powerpc_darwin_inferior;
 InferiorVTable *global_vtable = &powerpc_darwin_inferior;
+#elif defined(WIN32)
+extern InferiorVTable i386_windows_inferior;
+static InferiorVTable *global_vtable = &i386_windows_inferior;
 #else
 extern InferiorVTable i386_ptrace_inferior;
 static InferiorVTable *global_vtable = &i386_ptrace_inferior;
@@ -23,24 +24,19 @@
 ServerHandle *
 mono_debugger_server_create_inferior (BreakpointManager *breakpoint_manager)
 {
-	if ((getuid () == 0) || (geteuid () == 0)) {
-		g_message ("WARNING: Running mdb as root may be a problem because setuid() and\n"
-			   "seteuid() do nothing.\n"
-			   "See http://primates.ximian.com/~martin/blog/entry_150.html for details.");
-	}
 	return global_vtable->create_inferior (breakpoint_manager);
 }
 
 guint32
 mono_debugger_server_get_current_pid (void)
 {
-	return getpid ();
+	return global_vtable->get_current_pid ();
 }
 
 guint64
 mono_debugger_server_get_current_thread (void)
 {
-	return pthread_self ();
+	return global_vtable->get_current_thread ();
 }
 
 void
@@ -424,7 +420,7 @@
 mono_debugger_server_set_runtime_info (ServerHandle *handle, MonoRuntimeInfo *mono_runtime)
 {
 	if (global_vtable->set_runtime_info)
-		return (* global_vtable->set_runtime_info) (handle, mono_runtime);
+		(* global_vtable->set_runtime_info) (handle, mono_runtime);
 }
 
 ServerCommandError
@@ -491,66 +487,38 @@
 }
 
 
-static gboolean initialized = FALSE;
-static sem_t manager_semaphore;
-static int pending_sigint = 0;
-
-static void
-sigint_signal_handler (int _dummy)
-{
-	pending_sigint++;
-	sem_post (&manager_semaphore);
-}
-
 void
 mono_debugger_server_static_init (void)
 {
-	struct sigaction sa;
-
-	if (initialized)
-		return;
-
-	/* catch SIGINT */
-	sa.sa_handler = sigint_signal_handler;
-	sigemptyset (&sa.sa_mask);
-	sa.sa_flags = 0;
-	g_assert (sigaction (SIGINT, &sa, NULL) != -1);
-
-	initialized = TRUE;
+	(* global_vtable->static_init) ();
 }
 
 int
 mono_debugger_server_get_pending_sigint (void)
 {
-	if (pending_sigint > 0)
-		return pending_sigint--;
-
-	return 0;
+	return (* global_vtable->get_pending_sigint) ();
 }
 
 void
 mono_debugger_server_sem_init (void)
 {
-	sem_init (&manager_semaphore, 1, 0);
+	(* global_vtable->sem_init) ();
 }
 
 void
 mono_debugger_server_sem_wait (void)
 {
-	sem_wait (&manager_semaphore);
+	(* global_vtable->sem_wait) ();
 }
 
 void
 mono_debugger_server_sem_post (void)
 {
-	sem_post (&manager_semaphore);
+	(* global_vtable->sem_post) ();
 }
 
 int
 mono_debugger_server_sem_get_value (void)
 {
-	int ret;
-
-	sem_getvalue (&manager_semaphore, &ret);
-	return ret;
+	return (* global_vtable->sem_get_value) ();
 }
Index: backend/server/monodebuggerserver.def
===================================================================
--- backend/server/monodebuggerserver.def	(revision 0)
+++ backend/server/monodebuggerserver.def	(revision 0)
@@ -0,0 +1,47 @@
+LIBRARY   MONODEBUGGERSERVER
+EXPORTS
+mono_debugger_cond_new
+mono_debugger_cond_free
+mono_debugger_cond_wait
+mono_debugger_cond_timed_wait
+mono_debugger_cond_broadcast
+
+mono_debugger_mutex_new
+mono_debugger_mutex_free
+mono_debugger_mutex_lock
+mono_debugger_mutex_unlock
+mono_debugger_mutex_trylock
+
+mono_debugger_server_static_init
+mono_debugger_server_get_pending_sigint
+mono_debugger_server_global_init
+mono_debugger_server_create_inferior
+mono_debugger_server_spawn
+mono_debugger_server_io_thread_main
+mono_debugger_server_global_wait
+mono_debugger_server_get_current_pid
+mono_debugger_server_get_current_thread
+mono_debugger_server_get_signal_info
+
+mono_debugger_server_sem_init
+mono_debugger_server_sem_wait
+mono_debugger_server_sem_post
+mono_debugger_server_sem_get_value
+
+mono_debugger_server_get_target_info
+mono_debugger_server_dispatch_event
+mono_debugger_server_get_application
+
+mono_debugger_breakpoint_manager_new
+mono_debugger_breakpoint_manager_clone
+mono_debugger_breakpoint_manager_free
+mono_debugger_breakpoint_manager_lock
+mono_debugger_breakpoint_manager_unlock
+mono_debugger_breakpoint_manager_get_next_id
+mono_debugger_breakpoint_manager_insert
+mono_debugger_breakpoint_manager_lookup
+mono_debugger_breakpoint_manager_lookup_by_id
+mono_debugger_breakpoint_manager_get_breakpoints
+mono_debugger_breakpoint_manager_remove
+mono_debugger_breakpoint_info_get_id
+mono_debugger_breakpoint_info_get_is_enabled
\ No newline at end of file
Index: backend/server/mutex.c
===================================================================
--- backend/server/mutex.c	(revision 130915)
+++ backend/server/mutex.c	(working copy)
@@ -46,11 +46,20 @@
 void
 mono_debugger_cond_wait (GMutex *mutex, GCond *cond)
 {
-	return g_cond_wait (cond, mutex);
+	g_cond_wait (cond, mutex);
 }
 
+gboolean
+mono_debugger_cond_timed_wait (GMutex *mutex, GCond *cond, int milliseconds)
+{
+	GTimeVal time_val;
+	g_get_current_time (&time_val);
+	g_time_val_add (&time_val, milliseconds);
+	return g_cond_timed_wait (cond, mutex, &time_val);
+}
+
 void
 mono_debugger_cond_broadcast (GCond *cond)
 {
-	return g_cond_broadcast (cond);
+	g_cond_broadcast (cond);
 }
Index: backend/server/server.h
===================================================================
--- backend/server/server.h	(revision 130915)
+++ backend/server/server.h	(working copy)
@@ -126,6 +126,9 @@
 };
 
 struct InferiorVTable {
+	
+	void                  (* static_init)         (void);
+
 	void                  (* global_init)         (void);
 
 	ServerHandle *        (* create_inferior)     (BreakpointManager  *bpm);
@@ -398,6 +401,20 @@
 
 	void         (* get_registers_from_core_file) (guint64           *values,
 						       const guint8      *buffer);
+
+	guint32               (*get_current_pid) (void);
+
+	guint64               (*get_current_thread) (void);
+	
+	void                  (*sem_init) (void);
+
+	void                  (*sem_wait) (void);
+
+	void                  (*sem_post) (void);
+
+	int                   (*sem_get_value) (void);
+
+	int                   (*get_pending_sigint) (void);
 };
 
 /*
@@ -661,6 +678,13 @@
 mono_debugger_server_get_registers_from_core_file (guint64 *values,
 						   const guint8 *buffer);
 
+guint32
+mono_debugger_server_get_current_pid (void);
+
+guint64
+mono_debugger_server_get_current_thread (void);
+
+
 /* POSIX semaphores */
 
 void mono_debugger_server_sem_init (void);
@@ -668,9 +692,6 @@
 void mono_debugger_server_sem_post (void);
 int mono_debugger_server_sem_get_value (void);
 
-guint32 mono_debugger_server_get_current_pid (void);
-guint64 mono_debugger_server_get_current_thread (void);
-
 int mono_debugger_server_get_pending_sigint (void);
 
 G_END_DECLS
Index: backend/server/x86-ptrace.c
===================================================================
--- backend/server/x86-ptrace.c	(revision 130915)
+++ backend/server/x86-ptrace.c	(working copy)
@@ -404,6 +404,12 @@
 {
 	ServerHandle *handle = g_new0 (ServerHandle, 1);
 
+	if ((getuid () == 0) || (geteuid () == 0)) {
+		g_message ("WARNING: Running mdb as root may be a problem because setuid() and\n"
+			   "seteuid() do nothing.\n"
+			   "See http://primates.ximian.com/~martin/blog/entry_150.html for details.");
+	}
+
 	handle->bpm = bpm;
 	handle->inferior = g_new0 (InferiorHandle, 1);
 	handle->arch = x86_arch_initialize ();
@@ -616,8 +622,83 @@
 server_ptrace_set_runtime_info (ServerHandle *handle, MonoRuntimeInfo *mono_runtime)
 {
 	handle->mono_runtime = mono_runtime;
+}
+
+static guint32
+server_ptrace_get_current_pid (void)
+{
+	return getpid ();
 }
 
+static guint64
+server_ptrace_get_current_thread (void)
+{
+	return pthread_self ();
+}
+
+static gboolean initialized = FALSE;
+static sem_t manager_semaphore;
+
+static void
+sigint_signal_handler (int _dummy)
+{
+	pending_sigint++;
+	sem_post (&manager_semaphore);
+}
+
+static void
+server_ptrace_static_init (void)
+{
+	struct sigaction sa;
+
+	if (initialized)
+		return;
+
+	/* catch SIGINT */
+	sa.sa_handler = sigint_signal_handler;
+	sigemptyset (&sa.sa_mask);
+	sa.sa_flags = 0;
+	g_assert (sigaction (SIGINT, &sa, NULL) != -1);
+
+	initialized = TRUE;
+}
+
+static void
+server_ptrace_sem_init (void)
+{
+	sem_init (&manager_semaphore, 1, 0);
+}
+
+static void
+server_ptrace_sem_wait (void)
+{
+	sem_wait (&manager_semaphore);
+}
+
+static void
+server_ptrace_sem_post (void)
+{
+	sem_post (&manager_semaphore);
+}
+
+static int
+server_ptrace_sem_get_value (void)
+{
+	int ret;
+
+	sem_getvalue (&manager_semaphore, &ret);
+	return ret;
+}
+
+static int
+server_ptrace_get_pending_sigint (void)
+{
+	if (pending_sigint > 0)
+		return pending_sigint--;
+
+	return 0;
+}
+
 extern void GC_start_blocking (void);
 extern void GC_end_blocking (void);
 
@@ -638,6 +719,7 @@
 #endif
 
 InferiorVTable i386_ptrace_inferior = {
+	server_ptrace_static_init,
 	server_ptrace_global_init,
 	server_ptrace_create_inferior,
 	server_ptrace_initialize_process,
Index: backend/server/x86-windows.c
===================================================================
--- backend/server/x86-windows.c	(revision 0)
+++ backend/server/x86-windows.c	(revision 0)
@@ -0,0 +1,388 @@
+#include <server.h>
+#include "x86-arch.h"
+#include <windows.h>
+#include <Psapi.h>
+#include <stdio.h>
+
+struct ArchInfo
+{
+	//INFERIOR_REGS_TYPE current_regs;
+	//INFERIOR_FPREGS_TYPE current_fpregs;
+	GPtrArray *callback_stack;
+	//CodeBufferData *code_buffer;
+	//guint64 dr_control, dr_status;
+	int dr_regs [DR_NADDR];
+};
+
+ArchInfo *
+x86_arch_initialize (void)
+{
+	ArchInfo *arch = g_new0 (ArchInfo, 1);
+
+	arch->callback_stack = g_ptr_array_new ();
+
+	return arch;
+}
+
+static gboolean initialized = FALSE;
+static HANDLE manager_semaphore;
+static LONG sem_count = 0;
+
+static BOOL WINAPI HandlerRoutine(DWORD dwCtrlType)
+{
+	ReleaseSemaphore(manager_semaphore, 1, &sem_count);
+	return TRUE;
+}
+
+static void
+server_win32_static_init (void)
+{
+	if (initialized)
+		return;
+
+	SetConsoleCtrlHandler(HandlerRoutine, TRUE);
+	g_thread_init (NULL);
+
+	initialized = TRUE;
+}
+
+
+static ServerCommandError
+server_win32_get_signal_info (ServerHandle *handle, SignalInfo **sinfo_out)
+{
+	SignalInfo *sinfo = g_new0 (SignalInfo, 1);
+
+	*sinfo_out = sinfo;
+
+	return COMMAND_ERROR_NONE;
+}
+
+
+static void
+server_win32_global_init (void)
+{
+}
+
+struct InferiorHandle
+{
+	guint32 pid;
+	HANDLE process_handle;
+	HANDLE thread_handle;
+	gint argc;
+	gchar **argv;
+//#ifdef __linux__
+//	int mem_fd;
+//#endif
+//	int stepping;
+//	int last_signal;
+	int redirect_fds;
+	int output_fd [2], error_fd [2];
+	int is_thread, is_initialized;
+};
+
+static ServerHandle *
+server_win32_create_inferior (BreakpointManager *bpm)
+{
+	ServerHandle *handle = g_new0 (ServerHandle, 1);
+
+	handle->bpm = bpm;
+	handle->inferior = g_new0 (InferiorHandle, 1);
+	handle->arch = x86_arch_initialize ();
+
+	return handle;
+}
+
+static ServerCommandError
+server_win32_get_target_info (guint32            *target_int_size,
+							  guint32            *target_long_size,
+							  guint32            *target_address_size,
+							  guint32            *is_bigendian)
+{
+	*target_int_size = sizeof (guint32);
+	*target_long_size = sizeof (guint32);
+	*target_address_size = sizeof (void *);
+	*is_bigendian = 0;
+
+	return COMMAND_ERROR_NONE;
+}
+
+static ServerCommandError
+server_win32_spawn (ServerHandle *handle, const gchar *working_directory,
+		     const gchar **argv, const gchar **envp, gboolean redirect_fds,
+			 gint *child_pid, IOThreadData **io_data, gchar **error)
+{	
+	InferiorHandle *inferior = handle->inferior;
+	int ret;
+	STARTUPINFO si;
+	PROCESS_INFORMATION pi;
+	gunichar2* utf16_argv = NULL;
+	gunichar2* utf16_envp = NULL;
+	gunichar2* utf16_working_directory = NULL;
+
+	memset (&si, 0, sizeof (si));
+	si.cb = sizeof(si);
+	*error = NULL;
+
+	if (working_directory) {
+		utf16_working_directory = g_utf8_to_utf16 (working_directory, -1, NULL, NULL, NULL);
+	}
+
+	if (envp) {
+		guint len = 0;
+		const gchar** envp_temp = envp;
+		gunichar2* envp_concat;
+
+		while (*envp_temp) {
+			len += strlen(*envp_temp) + 1;
+			envp_temp++;
+		}
+		len++; /* add one for double NULL at end */
+		envp_concat = utf16_envp = g_malloc(len*sizeof(gunichar2));
+
+		envp_temp = envp;
+		while (*envp_temp) {
+			gunichar2* utf16_envp_temp = g_utf8_to_utf16 (*envp_temp, -1, NULL, NULL, NULL);
+			int written = swprintf(envp_concat, len, L"%s%s", utf16_envp_temp, L"\0");
+			g_free(utf16_envp_temp);
+			envp_concat += written + 1;
+			len -= written;
+			envp_temp++;
+		}
+		swprintf (envp_concat, len, L"%s", L"\0"); /* double NULL at end */
+	}
+
+	if (argv) {
+		gint argc = 0;
+		guint len = 0;
+		gint index = 0;
+		const gchar** argv_temp = argv;
+		gunichar2* argv_concat;
+
+		while (*argv_temp) {
+			len += strlen(*argv_temp) + 1;
+			argv_temp++;
+			argc++;
+		}
+		inferior->argc = argc;
+		inferior->argv = g_malloc0 ((argc+1) * sizeof (gpointer));
+		argv_concat = utf16_argv = g_malloc (len*sizeof(gunichar2));
+
+		argv_temp = argv;
+		while (*argv_temp) {
+			gunichar2* utf16_argv_temp = g_utf8_to_utf16 (*argv_temp, -1, NULL, NULL, NULL);
+			int written = swprintf(argv_concat, len, L"%s ", utf16_argv_temp);
+			inferior->argv[index++] = g_strdup (*argv_temp);
+			g_free(utf16_argv_temp);
+			argv_concat += written;
+			len -= written;
+			argv_temp++;
+		}
+	}
+
+	wprintf(L"Spawning process with\nCommand line: %s\nWorking Directory: %s\nThread Id: %d\n", 
+		utf16_argv, utf16_working_directory, GetCurrentThreadId());
+
+	ret = CreateProcess(NULL, utf16_argv, NULL, NULL, FALSE, DEBUG_PROCESS, 
+		utf16_envp, utf16_working_directory, &si, &pi);
+
+	if (!ret)
+	{
+		int erro_code = GetLastError();
+		*error = g_strdup_printf ("CreateProcess failed: %d", erro_code);
+		return COMMAND_ERROR_CANNOT_START_TARGET;
+	}
+
+	*child_pid = pi.dwProcessId;
+
+	inferior->pid = pi.dwProcessId;
+	inferior->process_handle = pi.hProcess;
+	inferior->thread_handle = pi.hThread;
+
+	return COMMAND_ERROR_NONE;
+}
+
+void
+server_win32_io_thread_main (IOThreadData *io_data, ChildOutputFunc func)
+{
+	Sleep(600000);
+}
+
+static guint32
+server_win32_global_wait (guint32 *status_ret)
+{
+	int ret;
+	DEBUG_EVENT de;
+
+	printf("WaitForDebugEvent on thread %d\n", GetCurrentThreadId());
+	ret = WaitForDebugEvent(&de, 100);
+	if (!ret)
+		return 0;
+
+	*status_ret = de.dwDebugEventCode;
+
+	return de.dwProcessId;
+}
+
+
+static ServerStatusMessageType
+server_win32_dispatch_event (ServerHandle *handle, guint32 status, guint64 *arg,
+			      guint64 *data1, guint64 *data2, guint32 *opt_data_size,
+			      gpointer *opt_data)
+{
+	if (status == CREATE_PROCESS_DEBUG_EVENT) {
+		return MESSAGE_CHILD_EXECD;
+	}
+
+	return MESSAGE_UNKNOWN_ERROR;
+}
+
+void GetProcessStrings(HANDLE hProcess, LPWSTR lpszCmdLine, LPWSTR lpszEnvVars);
+
+static ServerCommandError
+server_win32_get_application (ServerHandle *handle, gchar **exe_file, gchar **cwd,
+			       guint32 *nargs, gchar ***cmdline_args)
+{
+	gint index = 0;
+	GPtrArray *array;
+	gchar **ptr;
+	/* No supported way to get command line of a process
+	   see http://blogs.msdn.com/oldnewthing/archive/2009/02/23/9440784.aspx */
+
+/*	gunichar2 utf16_exe_file[1024];
+	gunichar2 utf16_cmd_line[10240];
+	gunichar2 utf16_env_vars[10240];
+	BOOL ret;
+	if (!GetModuleFileNameEx (handle->inferior->process_handle, NULL, utf16_exe_file, sizeof(utf16_exe_file)/sizeof(utf16_exe_file[0]))) {
+		DWORD error = GetLastError ();
+		return COMMAND_ERROR_INTERNAL_ERROR;
+	}
+	*/
+	*exe_file = g_strdup (handle->inferior->argv[0]);
+	*nargs = handle->inferior->argc;
+
+	array = g_ptr_array_new ();
+
+	for (index = 0; index < handle->inferior->argc; index++)
+		g_ptr_array_add (array, handle->inferior->argv[index]);
+
+	*cmdline_args = ptr = g_new0 (gchar *, array->len + 1);
+
+	for (index = 0; index < array->len; index++)
+		ptr  [index] = g_ptr_array_index (array, index);
+
+	g_ptr_array_free (array, FALSE);
+
+	return COMMAND_ERROR_NONE;
+}
+
+static guint32
+server_win32_get_current_pid (void)
+{
+	return GetCurrentProcessId();
+}
+
+static guint64
+server_win32_get_current_thread (void)
+{
+	return GetCurrentThreadId ();
+}
+
+static int pending_sigint = 0;
+
+static void
+server_win32_sem_init (void)
+{
+	manager_semaphore = CreateSemaphore( 
+        NULL,           // default security attributes
+        0,  // initial count
+        12,  // maximum count
+        NULL);          // unnamed semaphore
+}
+
+static void
+server_win32_sem_wait (void)
+{
+	WaitForSingleObject( manager_semaphore, INFINITE);
+}
+
+static void
+server_win32_sem_post (void)
+{
+	ReleaseSemaphore(manager_semaphore, 1, &sem_count);
+}
+
+static int
+server_win32_sem_get_value (void)
+{
+	return sem_count;
+}
+
+static int
+server_win32_get_pending_sigint (void)
+{
+	if (pending_sigint > 0)
+		return pending_sigint--;
+
+	return 0;
+}
+
+InferiorVTable i386_windows_inferior = {
+	server_win32_static_init,			/*static_init, */
+	server_win32_global_init,			/*global_init, */
+	server_win32_create_inferior,		/*create_inferior, */
+	NULL,					 			/*initialize_process, */
+	NULL,					 			/*initialize_thread, */
+	NULL,					 			/*set_runtime_info, */
+	server_win32_io_thread_main,		/*io_thread_main, */
+	server_win32_spawn,					/*spawn, */
+	NULL,		 						/*attach, */
+	NULL,					 			/*detach, */
+	NULL,					 			/*finalize, */
+	server_win32_global_wait,			/*global_wait, */
+	NULL,					 			/*stop_and_wait, */
+	server_win32_dispatch_event,		/*dispatch_event, */
+	NULL,								/*dispatch_simple, */
+	server_win32_get_target_info,		/*get_target_info, */
+	NULL,					 			/*continue, */
+	NULL,					 			/*step, */
+	NULL,					 			/*resume, */
+	NULL,					 			/*get_frame, */
+	NULL,					 			/*current_insn_is_bpt, */
+	NULL,					 			/*peek_word, */
+	NULL,					 			/*read_memory, */
+	NULL,					 			/*write_memory, */
+	NULL,					 			/*call_method, */
+	NULL,					 			/*call_method_1, */
+	NULL,					 			/*call_method_2, */
+	NULL,					 			/*call_method_3, */
+	NULL,					 			/*call_method_invoke, */
+	NULL,					 			/*execute_instruction, */
+	NULL,					 			/*mark_rti_frame, */
+	NULL,					 			/*abort_invoke, */
+	NULL,					 			/*insert_breakpoint, */
+	NULL,					 			/*insert_hw_breakpoint, */
+	NULL,					 			/*remove_breakpoint, */
+	NULL,					 			/*enable_breakpoint, */
+	NULL,					 			/*disable_breakpoint, */
+	NULL,					 			/*get_breakpoints, */
+	NULL,					 			/*get_registers, */
+	NULL,					 			/*set_registers, */
+	NULL,					 			/*stop, */
+	NULL,					 			/*set_signal, */
+	NULL,					 			/*kill, */
+	server_win32_get_signal_info,					 			/*get_signal_info, */
+	NULL,					 			/*get_threads, */
+	server_win32_get_application,		/*get_application, */
+	NULL,								/*detach_after_fork, */
+	NULL,								/*push_registers, */
+	NULL,								/*pop_registers, */
+	NULL,								/*get_callback_frame, */
+	NULL,								/*get_registers_from_core_file, */
+	server_win32_get_current_pid,		/*get_current_pid, */
+	server_win32_get_current_thread,	/*get_current_thread, */
+	server_win32_sem_init,				/*sem_init, */
+	server_win32_sem_wait,				/*sem_wait, */
+	server_win32_sem_post,				/*sem_post, */
+	server_win32_sem_get_value,			/*sem_get_value, */
+	server_win32_get_pending_sigint,	/*get_pending_sigint, */
+	};
Index: build/debugger.sln
===================================================================
--- build/debugger.sln	(revision 0)
+++ build/debugger.sln	(revision 0)
@@ -0,0 +1,158 @@
+﻿
+Microsoft Visual Studio Solution File, Format Version 10.00
+# Visual Studio 2008
+Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Mono.Debugger.SymbolWriter", "Mono.Debugger.SymbolWriter.csproj", "{B8974335-188F-4221-A76A-F55C2133FEE4}"
+EndProject
+Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Mono.Debugger", "Mono.Debugger.csproj", "{C8C98210-8B23-43D6-8651-30D967FF66D7}"
+EndProject
+Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Mono.Debugger.Frontend", "Mono.Debugger.Frontend.csproj", "{17820A7D-64A8-401B-8A4D-425154CF6437}"
+EndProject
+Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "mdb", "mdb.csproj", "{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}"
+EndProject
+Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "monodebuggerserver", "monodebuggerserver.vcproj", "{42B7447F-4B9D-4391-BD93-598E22FEEAFD}"
+EndProject
+Global
+	GlobalSection(SolutionConfigurationPlatforms) = preSolution
+		Debug_eglib|Any CPU = Debug_eglib|Any CPU
+		Debug_eglib|Mixed Platforms = Debug_eglib|Mixed Platforms
+		Debug_eglib|Win32 = Debug_eglib|Win32
+		Debug_eglib|x64 = Debug_eglib|x64
+		Debug|Any CPU = Debug|Any CPU
+		Debug|Mixed Platforms = Debug|Mixed Platforms
+		Debug|Win32 = Debug|Win32
+		Debug|x64 = Debug|x64
+		Release_eglib|Any CPU = Release_eglib|Any CPU
+		Release_eglib|Mixed Platforms = Release_eglib|Mixed Platforms
+		Release_eglib|Win32 = Release_eglib|Win32
+		Release_eglib|x64 = Release_eglib|x64
+		Release|Any CPU = Release|Any CPU
+		Release|Mixed Platforms = Release|Mixed Platforms
+		Release|Win32 = Release|Win32
+		Release|x64 = Release|x64
+	EndGlobalSection
+	GlobalSection(ProjectConfigurationPlatforms) = postSolution
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug_eglib|Any CPU.ActiveCfg = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug_eglib|Any CPU.Build.0 = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug_eglib|Mixed Platforms.ActiveCfg = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug_eglib|Mixed Platforms.Build.0 = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug_eglib|Win32.ActiveCfg = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug_eglib|x64.ActiveCfg = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug|Mixed Platforms.ActiveCfg = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug|Mixed Platforms.Build.0 = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug|Win32.ActiveCfg = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Debug|x64.ActiveCfg = Debug|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release_eglib|Any CPU.ActiveCfg = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release_eglib|Any CPU.Build.0 = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release_eglib|Mixed Platforms.ActiveCfg = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release_eglib|Mixed Platforms.Build.0 = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release_eglib|Win32.ActiveCfg = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release_eglib|x64.ActiveCfg = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release|Any CPU.Build.0 = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release|Mixed Platforms.ActiveCfg = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release|Mixed Platforms.Build.0 = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release|Win32.ActiveCfg = Release|Any CPU
+		{B8974335-188F-4221-A76A-F55C2133FEE4}.Release|x64.ActiveCfg = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug_eglib|Any CPU.ActiveCfg = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug_eglib|Any CPU.Build.0 = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug_eglib|Mixed Platforms.ActiveCfg = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug_eglib|Mixed Platforms.Build.0 = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug_eglib|Win32.ActiveCfg = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug_eglib|x64.ActiveCfg = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug|Mixed Platforms.ActiveCfg = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug|Mixed Platforms.Build.0 = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug|Win32.ActiveCfg = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Debug|x64.ActiveCfg = Debug|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release_eglib|Any CPU.ActiveCfg = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release_eglib|Any CPU.Build.0 = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release_eglib|Mixed Platforms.ActiveCfg = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release_eglib|Mixed Platforms.Build.0 = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release_eglib|Win32.ActiveCfg = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release_eglib|x64.ActiveCfg = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release|Any CPU.Build.0 = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release|Mixed Platforms.ActiveCfg = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release|Mixed Platforms.Build.0 = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release|Win32.ActiveCfg = Release|Any CPU
+		{C8C98210-8B23-43D6-8651-30D967FF66D7}.Release|x64.ActiveCfg = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug_eglib|Any CPU.ActiveCfg = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug_eglib|Any CPU.Build.0 = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug_eglib|Mixed Platforms.ActiveCfg = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug_eglib|Mixed Platforms.Build.0 = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug_eglib|Win32.ActiveCfg = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug_eglib|x64.ActiveCfg = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug|Mixed Platforms.ActiveCfg = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug|Mixed Platforms.Build.0 = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug|Win32.ActiveCfg = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Debug|x64.ActiveCfg = Debug|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release_eglib|Any CPU.ActiveCfg = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release_eglib|Any CPU.Build.0 = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release_eglib|Mixed Platforms.ActiveCfg = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release_eglib|Mixed Platforms.Build.0 = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release_eglib|Win32.ActiveCfg = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release_eglib|x64.ActiveCfg = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release|Any CPU.Build.0 = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release|Mixed Platforms.ActiveCfg = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release|Mixed Platforms.Build.0 = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release|Win32.ActiveCfg = Release|Any CPU
+		{17820A7D-64A8-401B-8A4D-425154CF6437}.Release|x64.ActiveCfg = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug_eglib|Any CPU.ActiveCfg = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug_eglib|Any CPU.Build.0 = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug_eglib|Mixed Platforms.ActiveCfg = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug_eglib|Mixed Platforms.Build.0 = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug_eglib|Win32.ActiveCfg = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug_eglib|x64.ActiveCfg = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug|Mixed Platforms.ActiveCfg = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug|Mixed Platforms.Build.0 = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug|Win32.ActiveCfg = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Debug|x64.ActiveCfg = Debug|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release_eglib|Any CPU.ActiveCfg = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release_eglib|Any CPU.Build.0 = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release_eglib|Mixed Platforms.ActiveCfg = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release_eglib|Mixed Platforms.Build.0 = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release_eglib|Win32.ActiveCfg = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release_eglib|x64.ActiveCfg = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release|Any CPU.Build.0 = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release|Mixed Platforms.ActiveCfg = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release|Mixed Platforms.Build.0 = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release|Win32.ActiveCfg = Release|Any CPU
+		{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}.Release|x64.ActiveCfg = Release|Any CPU
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug_eglib|Any CPU.ActiveCfg = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug_eglib|Mixed Platforms.ActiveCfg = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug_eglib|Mixed Platforms.Build.0 = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug_eglib|Win32.ActiveCfg = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug_eglib|Win32.Build.0 = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug_eglib|x64.ActiveCfg = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug|Any CPU.ActiveCfg = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug|Mixed Platforms.ActiveCfg = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug|Mixed Platforms.Build.0 = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug|Win32.ActiveCfg = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug|Win32.Build.0 = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Debug|x64.ActiveCfg = Debug|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release_eglib|Any CPU.ActiveCfg = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release_eglib|Mixed Platforms.ActiveCfg = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release_eglib|Mixed Platforms.Build.0 = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release_eglib|Win32.ActiveCfg = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release_eglib|Win32.Build.0 = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release_eglib|x64.ActiveCfg = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release|Any CPU.ActiveCfg = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release|Mixed Platforms.ActiveCfg = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release|Mixed Platforms.Build.0 = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release|Win32.ActiveCfg = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release|Win32.Build.0 = Release|Win32
+		{42B7447F-4B9D-4391-BD93-598E22FEEAFD}.Release|x64.ActiveCfg = Release|Win32
+	EndGlobalSection
+	GlobalSection(SolutionProperties) = preSolution
+		HideSolutionNode = FALSE
+	EndGlobalSection
+EndGlobal
Index: build/mdb.csproj
===================================================================
--- build/mdb.csproj	(revision 0)
+++ build/mdb.csproj	(revision 0)
@@ -0,0 +1,136 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project ToolsVersion="3.5" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <PropertyGroup>
+    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
+    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
+    <ProductVersion>9.0.30729</ProductVersion>
+    <SchemaVersion>2.0</SchemaVersion>
+    <ProjectGuid>{98ECEDA9-42A3-4ED8-BD37-352CB8B4095D}</ProjectGuid>
+    <OutputType>Exe</OutputType>
+    <AppDesignerFolder>Properties</AppDesignerFolder>
+    <RootNamespace>mdb</RootNamespace>
+    <AssemblyName>mdb</AssemblyName>
+    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
+    <FileAlignment>512</FileAlignment>
+    <PublishUrl>publish\</PublishUrl>
+    <Install>true</Install>
+    <InstallFrom>Disk</InstallFrom>
+    <UpdateEnabled>false</UpdateEnabled>
+    <UpdateMode>Foreground</UpdateMode>
+    <UpdateInterval>7</UpdateInterval>
+    <UpdateIntervalUnits>Days</UpdateIntervalUnits>
+    <UpdatePeriodically>false</UpdatePeriodically>
+    <UpdateRequired>false</UpdateRequired>
+    <MapFileExtensions>true</MapFileExtensions>
+    <ApplicationRevision>0</ApplicationRevision>
+    <ApplicationVersion>1.0.0.%2a</ApplicationVersion>
+    <IsWebBootstrapper>false</IsWebBootstrapper>
+    <UseApplicationTrust>false</UseApplicationTrust>
+    <BootstrapperEnabled>true</BootstrapperEnabled>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
+    <DebugSymbols>true</DebugSymbols>
+    <DebugType>full</DebugType>
+    <Optimize>false</Optimize>
+    <OutputPath>bin\Debug\</OutputPath>
+    <DefineConstants>DEBUG;TRACE</DefineConstants>
+    <ErrorReport>prompt</ErrorReport>
+    <WarningLevel>4</WarningLevel>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
+    <DebugType>pdbonly</DebugType>
+    <Optimize>true</Optimize>
+    <OutputPath>bin\Release\</OutputPath>
+    <DefineConstants>TRACE</DefineConstants>
+    <ErrorReport>prompt</ErrorReport>
+    <WarningLevel>4</WarningLevel>
+  </PropertyGroup>
+  <ItemGroup>
+    <Reference Include="Mono.GetOptions, Version=2.0.0.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756, processorArchitecture=MSIL">
+      <SpecificVersion>False</SpecificVersion>
+      <HintPath>$(MONO_PREFIX)\lib\mono\2.0\Mono.GetOptions.dll</HintPath>
+    </Reference>
+    <Reference Include="System" />
+    <Reference Include="System.Core">
+      <RequiredTargetFramework>3.5</RequiredTargetFramework>
+    </Reference>
+    <Reference Include="System.Xml.Linq">
+      <RequiredTargetFramework>3.5</RequiredTargetFramework>
+    </Reference>
+    <Reference Include="System.Data.DataSetExtensions">
+      <RequiredTargetFramework>3.5</RequiredTargetFramework>
+    </Reference>
+    <Reference Include="System.Data" />
+    <Reference Include="System.Xml" />
+  </ItemGroup>
+  <ItemGroup>
+    <Compile Include="..\frontend\CL.cs" />
+    <Compile Include="..\frontend\Command.cs" />
+    <Compile Include="..\frontend\Completer.cs" />
+    <Compile Include="..\frontend\CSharpExpressionParser.cs" />
+    <Compile Include="..\frontend\CSharpTokenizer.cs" />
+    <Compile Include="..\frontend\DebuggerTextWriter.cs" />
+    <Compile Include="..\frontend\Expression.cs" />
+    <Compile Include="..\frontend\GnuReadLine.cs" />
+    <Compile Include="..\frontend\Interpreter.cs" />
+    <Compile Include="..\frontend\LineReader.cs" />
+    <Compile Include="..\frontend\Main.cs" />
+    <Compile Include="..\frontend\ManagedReadLine.cs" />
+    <Compile Include="..\frontend\MyTextReader.cs" />
+    <Compile Include="..\frontend\ScriptingContext.cs" />
+    <Compile Include="..\frontend\Style.cs" />
+    <Compile Include="..\frontend\ObjectFormatter.cs" />
+    <!--<Compile Include="..\frontend\CSharpExpressionParser.cs" />-->
+    <!--<Compile Include="..\frontend\CSharpTokenizer.cs" />-->
+    <Compile Include="AssemblyInfo.cs" />
+  </ItemGroup>
+  <ItemGroup>
+    <ProjectReference Include="Mono.Debugger.csproj">
+      <Project>{C8C98210-8B23-43D6-8651-30D967FF66D7}</Project>
+      <Name>Mono.Debugger</Name>
+    </ProjectReference>
+  </ItemGroup>
+  <ItemGroup>
+    <BootstrapperPackage Include="Microsoft.Net.Client.3.5">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework Client Profile</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.2.0">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 2.0 %28x86%29</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.0">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.0 %28x86%29</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.5">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.5</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.5.SP1">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.5 SP1</ProductName>
+      <Install>true</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Windows.Installer.3.1">
+      <Visible>False</Visible>
+      <ProductName>Windows Installer 3.1</ProductName>
+      <Install>true</Install>
+    </BootstrapperPackage>
+  </ItemGroup>
+  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
+  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
+       Other similar extension points exist, see Microsoft.Common.targets.
+  <Target Name="BeforeBuild">
+  </Target>
+  <Target Name="AfterBuild">
+  </Target>
+  -->
+  <PropertyGroup>
+    <PreBuildEvent>copy $(ProjectDir)..\frontend\CSharpExpressionParser.cs.win  $(ProjectDir)..\frontend\CSharpExpressionParser.cs</PreBuildEvent>
+  </PropertyGroup>
+</Project>
\ No newline at end of file
Index: build/Mono.Debugger.csproj
===================================================================
--- build/Mono.Debugger.csproj	(revision 0)
+++ build/Mono.Debugger.csproj	(revision 0)
@@ -0,0 +1,120 @@
+﻿<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
+  <PropertyGroup>
+    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
+    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
+    <ProductVersion>9.0.30729</ProductVersion>
+    <SchemaVersion>2.0</SchemaVersion>
+    <ProjectGuid>{C8C98210-8B23-43D6-8651-30D967FF66D7}</ProjectGuid>
+    <OutputType>Library</OutputType>
+    <AppDesignerFolder>Properties</AppDesignerFolder>
+    <RootNamespace>Mono.Debugger</RootNamespace>
+    <AssemblyName>Mono.Debugger</AssemblyName>
+    <FileUpgradeFlags>
+    </FileUpgradeFlags>
+    <OldToolsVersion>2.0</OldToolsVersion>
+    <UpgradeBackupLocation>
+    </UpgradeBackupLocation>
+    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
+    <PublishUrl>publish\</PublishUrl>
+    <Install>true</Install>
+    <InstallFrom>Disk</InstallFrom>
+    <UpdateEnabled>false</UpdateEnabled>
+    <UpdateMode>Foreground</UpdateMode>
+    <UpdateInterval>7</UpdateInterval>
+    <UpdateIntervalUnits>Days</UpdateIntervalUnits>
+    <UpdatePeriodically>false</UpdatePeriodically>
+    <UpdateRequired>false</UpdateRequired>
+    <MapFileExtensions>true</MapFileExtensions>
+    <ApplicationRevision>0</ApplicationRevision>
+    <ApplicationVersion>1.0.0.%2a</ApplicationVersion>
+    <IsWebBootstrapper>false</IsWebBootstrapper>
+    <UseApplicationTrust>false</UseApplicationTrust>
+    <BootstrapperEnabled>true</BootstrapperEnabled>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
+    <DebugSymbols>true</DebugSymbols>
+    <DebugType>full</DebugType>
+    <Optimize>false</Optimize>
+    <OutputPath>bin\Debug\</OutputPath>
+    <DefineConstants>DEBUG;TRACE</DefineConstants>
+    <ErrorReport>prompt</ErrorReport>
+    <WarningLevel>4</WarningLevel>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
+    <DebugType>pdbonly</DebugType>
+    <Optimize>true</Optimize>
+    <OutputPath>bin\Release\</OutputPath>
+    <DefineConstants>TRACE</DefineConstants>
+    <ErrorReport>prompt</ErrorReport>
+    <WarningLevel>4</WarningLevel>
+  </PropertyGroup>
+  <ItemGroup>
+		<Reference Include="Mono.Cecil, Version=0.6.9.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756">
+			<SpecificVersion>False</SpecificVersion>
+			<HintPath>$(MONO_PREFIX)\lib\mono\gac\Mono.Cecil\0.6.9.0__0738eb9f132ed756\Mono.Cecil.dll</HintPath>
+		</Reference>
+    <Reference Include="System" />
+    <Reference Include="System.Core">
+      <RequiredTargetFramework>3.5</RequiredTargetFramework>
+    </Reference>
+    <Reference Include="System.Data" />
+    <Reference Include="System.Xml" />
+  </ItemGroup>
+  <ItemGroup>
+    <Compile Include="..\interface\*.cs" />
+    <Compile Include="..\backend\arch\*.cs" />
+    <Compile Include="..\backend\*.cs" />
+    <Compile Include="..\languages\*.cs" />
+    <Compile Include="..\languages\mono\*.cs" />
+    <Compile Include="..\languages\native\*.cs" />
+    <Compile Include="..\classes\*.cs" />
+    <Compile Include="..\test\misc\*.cs" />
+    <Compile Include="AssemblyInfo.cs" />
+  </ItemGroup>
+  <ItemGroup>
+    <ProjectReference Include="Mono.Debugger.SymbolWriter.csproj">
+      <Project>{B8974335-188F-4221-A76A-F55C2133FEE4}</Project>
+      <Name>Mono.Debugger.SymbolWriter</Name>
+    </ProjectReference>
+  </ItemGroup>
+  <ItemGroup>
+    <BootstrapperPackage Include="Microsoft.Net.Client.3.5">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework Client Profile</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.2.0">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 2.0 %28x86%29</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.0">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.0 %28x86%29</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.5">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.5</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.5.SP1">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.5 SP1</ProductName>
+      <Install>true</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Windows.Installer.3.1">
+      <Visible>False</Visible>
+      <ProductName>Windows Installer 3.1</ProductName>
+      <Install>true</Install>
+    </BootstrapperPackage>
+  </ItemGroup>
+  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
+  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
+       Other similar extension points exist, see Microsoft.Common.targets.
+  <Target Name="BeforeBuild">
+  </Target>
+  <Target Name="AfterBuild">
+  </Target>
+  -->
+</Project>
\ No newline at end of file
Index: build/Mono.Debugger.Frontend.csproj
===================================================================
--- build/Mono.Debugger.Frontend.csproj	(revision 0)
+++ build/Mono.Debugger.Frontend.csproj	(revision 0)
@@ -0,0 +1,136 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project ToolsVersion="3.5" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <PropertyGroup>
+    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
+    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
+    <ProductVersion>9.0.30729</ProductVersion>
+    <SchemaVersion>2.0</SchemaVersion>
+    <ProjectGuid>{17820A7D-64A8-401B-8A4D-425154CF6437}</ProjectGuid>
+    <OutputType>Library</OutputType>
+    <AppDesignerFolder>Properties</AppDesignerFolder>
+    <RootNamespace>Mono.Debugger.Frontend</RootNamespace>
+    <AssemblyName>Mono.Debugger.Frontend</AssemblyName>
+    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
+    <FileAlignment>512</FileAlignment>
+    <PublishUrl>publish\</PublishUrl>
+    <Install>true</Install>
+    <InstallFrom>Disk</InstallFrom>
+    <UpdateEnabled>false</UpdateEnabled>
+    <UpdateMode>Foreground</UpdateMode>
+    <UpdateInterval>7</UpdateInterval>
+    <UpdateIntervalUnits>Days</UpdateIntervalUnits>
+    <UpdatePeriodically>false</UpdatePeriodically>
+    <UpdateRequired>false</UpdateRequired>
+    <MapFileExtensions>true</MapFileExtensions>
+    <ApplicationRevision>0</ApplicationRevision>
+    <ApplicationVersion>1.0.0.%2a</ApplicationVersion>
+    <IsWebBootstrapper>false</IsWebBootstrapper>
+    <UseApplicationTrust>false</UseApplicationTrust>
+    <BootstrapperEnabled>true</BootstrapperEnabled>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
+    <DebugSymbols>true</DebugSymbols>
+    <DebugType>full</DebugType>
+    <Optimize>false</Optimize>
+    <OutputPath>bin\Debug\</OutputPath>
+    <DefineConstants>DEBUG;TRACE</DefineConstants>
+    <ErrorReport>prompt</ErrorReport>
+    <WarningLevel>4</WarningLevel>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
+    <DebugType>pdbonly</DebugType>
+    <Optimize>true</Optimize>
+    <OutputPath>bin\Release\</OutputPath>
+    <DefineConstants>TRACE</DefineConstants>
+    <ErrorReport>prompt</ErrorReport>
+    <WarningLevel>4</WarningLevel>
+  </PropertyGroup>
+  <ItemGroup>
+		<Reference Include="Mono.GetOptions, Version=2.0.0.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756, processorArchitecture=MSIL">
+			<SpecificVersion>False</SpecificVersion>
+			<HintPath>$(MONO_PREFIX)\lib\mono\2.0\Mono.GetOptions.dll</HintPath>
+		</Reference>
+    <Reference Include="System" />
+    <Reference Include="System.Core">
+      <RequiredTargetFramework>3.5</RequiredTargetFramework>
+    </Reference>
+    <Reference Include="System.Xml.Linq">
+      <RequiredTargetFramework>3.5</RequiredTargetFramework>
+    </Reference>
+    <Reference Include="System.Data.DataSetExtensions">
+      <RequiredTargetFramework>3.5</RequiredTargetFramework>
+    </Reference>
+    <Reference Include="System.Data" />
+    <Reference Include="System.Xml" />
+  </ItemGroup>
+  <ItemGroup>
+    <Compile Include="..\frontend\CL.cs" />
+    <Compile Include="..\frontend\Command.cs" />
+    <Compile Include="..\frontend\Completer.cs" />
+    <Compile Include="..\frontend\CSharpExpressionParser.cs" />
+    <Compile Include="..\frontend\CSharpTokenizer.cs" />
+    <Compile Include="..\frontend\DebuggerTextWriter.cs" />
+    <Compile Include="..\frontend\Expression.cs" />
+    <Compile Include="..\frontend\GnuReadLine.cs" />
+    <Compile Include="..\frontend\Interpreter.cs" />
+    <Compile Include="..\frontend\LineReader.cs" />
+    <Compile Include="..\frontend\Main.cs" />
+    <Compile Include="..\frontend\ManagedReadLine.cs" />
+    <Compile Include="..\frontend\MyTextReader.cs" />
+    <Compile Include="..\frontend\ScriptingContext.cs" />
+    <Compile Include="..\frontend\Style.cs" />
+    <Compile Include="..\frontend\ObjectFormatter.cs" />
+    <!--<Compile Include="..\frontend\CSharpExpressionParser.cs" />-->
+    <!--<Compile Include="..\frontend\CSharpTokenizer.cs" />-->
+    <Compile Include="AssemblyInfo.cs" />
+  </ItemGroup>
+  <ItemGroup>
+    <ProjectReference Include="Mono.Debugger.csproj">
+      <Project>{C8C98210-8B23-43D6-8651-30D967FF66D7}</Project>
+      <Name>Mono.Debugger</Name>
+    </ProjectReference>
+  </ItemGroup>
+  <ItemGroup>
+    <BootstrapperPackage Include="Microsoft.Net.Client.3.5">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework Client Profile</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.2.0">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 2.0 %28x86%29</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.0">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.0 %28x86%29</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.5">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.5</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.5.SP1">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.5 SP1</ProductName>
+      <Install>true</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Windows.Installer.3.1">
+      <Visible>False</Visible>
+      <ProductName>Windows Installer 3.1</ProductName>
+      <Install>true</Install>
+    </BootstrapperPackage>
+  </ItemGroup>
+  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
+  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
+       Other similar extension points exist, see Microsoft.Common.targets.
+  <Target Name="BeforeBuild">
+  </Target>
+  <Target Name="AfterBuild">
+  </Target>
+  -->
+  <PropertyGroup>
+    <PreBuildEvent>copy $(ProjectDir)..\frontend\CSharpExpressionParser.cs.win  $(ProjectDir)..\frontend\CSharpExpressionParser.cs</PreBuildEvent>
+  </PropertyGroup>
+</Project>
\ No newline at end of file
Index: build/Mono.Debugger.SymbolWriter.csproj
===================================================================
--- build/Mono.Debugger.SymbolWriter.csproj	(revision 0)
+++ build/Mono.Debugger.SymbolWriter.csproj	(revision 0)
@@ -0,0 +1,103 @@
+﻿<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
+  <PropertyGroup>
+    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
+    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
+    <ProductVersion>9.0.30729</ProductVersion>
+    <SchemaVersion>2.0</SchemaVersion>
+    <ProjectGuid>{B8974335-188F-4221-A76A-F55C2133FEE4}</ProjectGuid>
+    <OutputType>Library</OutputType>
+    <AppDesignerFolder>Properties</AppDesignerFolder>
+    <RootNamespace>Mono.Debugger.SymbolWriter</RootNamespace>
+    <AssemblyName>Mono.Debugger.SymbolWriter</AssemblyName>
+    <FileUpgradeFlags>
+    </FileUpgradeFlags>
+    <OldToolsVersion>2.0</OldToolsVersion>
+    <UpgradeBackupLocation>
+    </UpgradeBackupLocation>
+    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
+    <IsWebBootstrapper>false</IsWebBootstrapper>
+    <PublishUrl>publish\</PublishUrl>
+    <Install>true</Install>
+    <InstallFrom>Disk</InstallFrom>
+    <UpdateEnabled>false</UpdateEnabled>
+    <UpdateMode>Foreground</UpdateMode>
+    <UpdateInterval>7</UpdateInterval>
+    <UpdateIntervalUnits>Days</UpdateIntervalUnits>
+    <UpdatePeriodically>false</UpdatePeriodically>
+    <UpdateRequired>false</UpdateRequired>
+    <MapFileExtensions>true</MapFileExtensions>
+    <ApplicationRevision>0</ApplicationRevision>
+    <ApplicationVersion>1.0.0.%2a</ApplicationVersion>
+    <UseApplicationTrust>false</UseApplicationTrust>
+    <BootstrapperEnabled>true</BootstrapperEnabled>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
+    <DebugSymbols>true</DebugSymbols>
+    <DebugType>full</DebugType>
+    <Optimize>false</Optimize>
+    <OutputPath>bin\Debug\</OutputPath>
+    <DefineConstants>TRACE;DEBUG;CECIL</DefineConstants>
+    <ErrorReport>prompt</ErrorReport>
+    <WarningLevel>4</WarningLevel>
+  </PropertyGroup>
+  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
+    <DebugType>pdbonly</DebugType>
+    <Optimize>true</Optimize>
+    <OutputPath>bin\Release\</OutputPath>
+    <DefineConstants>TRACE;CECIL</DefineConstants>
+    <ErrorReport>prompt</ErrorReport>
+    <WarningLevel>4</WarningLevel>
+  </PropertyGroup>
+  <ItemGroup>
+    <Reference Include="Mono.Cecil, Version=0.6.9.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756">
+      <SpecificVersion>False</SpecificVersion>
+      <HintPath>$(MONO_PREFIX)\lib\mono\gac\Mono.Cecil\0.6.9.0__0738eb9f132ed756\Mono.Cecil.dll</HintPath>
+    </Reference>
+    <Reference Include="System" />
+    <Reference Include="System.Core">
+      <RequiredTargetFramework>3.5</RequiredTargetFramework>
+    </Reference>
+    <Reference Include="System.Data" />
+    <Reference Include="System.Xml" />
+  </ItemGroup>
+  <ItemGroup>
+    <Compile Include="..\symbolwriter\MonoSymbolFile.cs" />
+    <Compile Include="..\symbolwriter\MonoSymbolTable.cs" />
+    <Compile Include="AssemblyInfo.cs" />
+  </ItemGroup>
+  <ItemGroup>
+    <BootstrapperPackage Include="Microsoft.Net.Client.3.5">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework Client Profile</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.2.0">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 2.0 %28x86%29</ProductName>
+      <Install>true</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.0">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.0 %28x86%29</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.5">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.5</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+    <BootstrapperPackage Include="Microsoft.Net.Framework.3.5.SP1">
+      <Visible>False</Visible>
+      <ProductName>.NET Framework 3.5 SP1</ProductName>
+      <Install>false</Install>
+    </BootstrapperPackage>
+  </ItemGroup>
+  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
+  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
+       Other similar extension points exist, see Microsoft.Common.targets.
+  <Target Name="BeforeBuild">
+  </Target>
+  <Target Name="AfterBuild">
+  </Target>
+  -->
+</Project>
\ No newline at end of file
Index: build/monodebuggerserver.vcproj
===================================================================
--- build/monodebuggerserver.vcproj	(revision 0)
+++ build/monodebuggerserver.vcproj	(revision 0)
@@ -0,0 +1,351 @@
+<?xml version="1.0" encoding="Windows-1252"?>
+<VisualStudioProject
+	ProjectType="Visual C++"
+	Version="9.00"
+	Name="monodebuggerserver"
+	ProjectGUID="{42B7447F-4B9D-4391-BD93-598E22FEEAFD}"
+	RootNamespace="monodebuggerserver"
+	Keyword="Win32Proj"
+	TargetFrameworkVersion="196613"
+	>
+	<Platforms>
+		<Platform
+			Name="Win32"
+		/>
+	</Platforms>
+	<ToolFiles>
+	</ToolFiles>
+	<Configurations>
+		<Configuration
+			Name="Debug|Win32"
+			OutputDirectory="bin\Debug"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="2"
+			CharacterSet="1"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+				CommandLine="copy ..\winconfig.h ..\config.h"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="0"
+				AdditionalIncludeDirectories="..\backend\server;&quot;$(MONO_PREFIX)\include\glib-2.0\&quot;;&quot;$(MONO_PREFIX)\include\glib-2.0\glib&quot;;&quot;$(MONO_PREFIX)\lib\glib-2.0\include&quot;;..\"
+				PreprocessorDefinitions="WIN32;_DEBUG;_WINDOWS;_USRDLL;__i386__;_WIN32_WINNT=0x0500"
+				MinimalRebuild="true"
+				BasicRuntimeChecks="3"
+				RuntimeLibrary="3"
+				UsePrecompiledHeader="0"
+				WarningLevel="3"
+				DebugInformationFormat="4"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLinkerTool"
+				AdditionalDependencies="glib-2.0.lib gthread-2.0.lib Psapi.lib"
+				LinkIncremental="2"
+				AdditionalLibraryDirectories="$(MONO_PREFIX)\lib"
+				ModuleDefinitionFile="..\backend\server\monodebuggerserver.def"
+				GenerateDebugInformation="true"
+				SubSystem="2"
+				TargetMachine="1"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCManifestTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCAppVerifierTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+		<Configuration
+			Name="Release|Win32"
+			OutputDirectory="bin\Debug"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="2"
+			CharacterSet="1"
+			WholeProgramOptimization="1"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+				CommandLine="copy ..\winconfig.h ..\config.h"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="2"
+				EnableIntrinsicFunctions="true"
+				AdditionalIncludeDirectories="..\backend\server;&quot;$(MONO_PREFIX)\include\glib-2.0\&quot;;&quot;$(MONO_PREFIX)\include\glib-2.0\glib&quot;;&quot;$(MONO_PREFIX)\lib\glib-2.0\include&quot;;..\"
+				PreprocessorDefinitions="WIN32;NDEBUG;_WINDOWS;_USRDLL;_WIN32_WINNT=0x0500"
+				RuntimeLibrary="2"
+				EnableFunctionLevelLinking="true"
+				UsePrecompiledHeader="0"
+				WarningLevel="3"
+				DebugInformationFormat="3"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLinkerTool"
+				AdditionalDependencies="glib-2.0.lib gthread-2.0.lib Psapi.lib"
+				LinkIncremental="1"
+				AdditionalLibraryDirectories="$(MONO_PREFIX)\lib"
+				ModuleDefinitionFile="..\backend\server\monodebuggerserver.def"
+				GenerateDebugInformation="true"
+				SubSystem="2"
+				OptimizeReferences="2"
+				EnableCOMDATFolding="2"
+				TargetMachine="1"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCManifestTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCAppVerifierTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+	</Configurations>
+	<References>
+	</References>
+	<Files>
+		<Filter
+			Name="Source Files"
+			Filter="cpp;c;cc;cxx;def;odl;idl;hpj;bat;asm;asmx"
+			UniqueIdentifier="{4FC737F1-C7A5-4376-A066-2A32D752A2FF}"
+			>
+			<File
+				RelativePath="..\backend\server\breakpoints.c"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\i386-arch.c"
+				>
+				<FileConfiguration
+					Name="Debug|Win32"
+					ExcludedFromBuild="true"
+					>
+					<Tool
+						Name="VCCLCompilerTool"
+					/>
+				</FileConfiguration>
+				<FileConfiguration
+					Name="Release|Win32"
+					ExcludedFromBuild="true"
+					>
+					<Tool
+						Name="VCCLCompilerTool"
+					/>
+				</FileConfiguration>
+			</File>
+			<File
+				RelativePath="..\backend\server\libgtop-glue.c"
+				>
+				<FileConfiguration
+					Name="Debug|Win32"
+					ExcludedFromBuild="true"
+					>
+					<Tool
+						Name="VCCLCompilerTool"
+					/>
+				</FileConfiguration>
+			</File>
+			<File
+				RelativePath="..\backend\server\library.c"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\mutex.c"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\thread-db.c"
+				>
+				<FileConfiguration
+					Name="Debug|Win32"
+					ExcludedFromBuild="true"
+					>
+					<Tool
+						Name="VCCLCompilerTool"
+					/>
+				</FileConfiguration>
+			</File>
+			<File
+				RelativePath="..\backend\server\x86-linux-ptrace.c"
+				>
+				<FileConfiguration
+					Name="Debug|Win32"
+					ExcludedFromBuild="true"
+					>
+					<Tool
+						Name="VCCLCompilerTool"
+					/>
+				</FileConfiguration>
+			</File>
+			<File
+				RelativePath="..\backend\server\x86-ptrace.c"
+				>
+				<FileConfiguration
+					Name="Debug|Win32"
+					ExcludedFromBuild="true"
+					>
+					<Tool
+						Name="VCCLCompilerTool"
+					/>
+				</FileConfiguration>
+			</File>
+			<File
+				RelativePath="..\backend\server\x86-windows.c"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\x86_64-arch.c"
+				>
+				<FileConfiguration
+					Name="Debug|Win32"
+					ExcludedFromBuild="true"
+					>
+					<Tool
+						Name="VCCLCompilerTool"
+					/>
+				</FileConfiguration>
+			</File>
+		</Filter>
+		<Filter
+			Name="Header Files"
+			Filter="h;hpp;hxx;hm;inl;inc;xsd"
+			UniqueIdentifier="{93995380-89BD-4b04-88EB-625FBE52EBFB}"
+			>
+			<File
+				RelativePath="..\backend\server\breakpoints.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\i386-arch.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\libgtop-glue.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\linux-proc-service.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\mutex.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\server.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\thread-db.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\util.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\x86-arch.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\x86-linux-ptrace.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\x86-ptrace.h"
+				>
+			</File>
+			<File
+				RelativePath="..\backend\server\x86_64-arch.h"
+				>
+			</File>
+		</Filter>
+		<Filter
+			Name="Resource Files"
+			Filter="rc;ico;cur;bmp;dlg;rc2;rct;bin;rgs;gif;jpg;jpeg;jpe;resx;tiff;tif;png;wav"
+			UniqueIdentifier="{67DA6AB6-F800-4c08-8B7A-83BB121AAD01}"
+			>
+			<File
+				RelativePath="..\backend\server\monodebuggerserver.def"
+				>
+			</File>
+		</Filter>
+		<File
+			RelativePath="..\backend\server\Makefile.am"
+			>
+		</File>
+	</Files>
+	<Globals>
+	</Globals>
+</VisualStudioProject>
Index: ChangeLog
===================================================================
--- ChangeLog	(revision 130915)
+++ ChangeLog	(working copy)
@@ -1,3 +1,40 @@
+2009-04-03  Jonathan Chambers  <joncham@gmail.com>
+
+	* backend/server/breakpoints.c: Add HAVE_UNISTD_H #ifdef.
+
+	* backend/server/library.c: Add HAVE_UNISTD_H check and add Windows InferiorVTable.
+	(mono_debugger_server_create_inferior): Access through vtable.
+	(mono_debugger_server_get_current_pid): Access through vtable.
+	(mono_debugger_server_get_current_thread): Access through vtable.
+	(mono_debugger_server_static_init): Access through vtable.
+	(mono_debugger_server_get_pending_sigint): Access through vtable.
+	(mono_debugger_server_sem_init): Access through vtable.
+	(mono_debugger_server_sem_wait): Access through vtable.
+	(mono_debugger_server_sem_post): Access through vtable.
+	(mono_debugger_server_sem_get_value): Access through vtable.
+
+	* backend/server/monodebuggerserver.def: Add.
+
+	* backend/server/mutex.c: Add mono_debugger_cond_timed_wait.
+
+	* backend/server/server.h: Add declarations for vtable changes above.
+
+	* backend/server/x86-ptrace.c: Implement vtable functions formerly in library.c.
+
+	* backend/server/x86-windows.c: Added.
+
+	* build/debugger.sln: Added.
+
+	* build/mdb.csproj: Added.
+
+	* build/Mono.Debugger.csproj: Added.
+
+	* build/Mono.Debugger.Frontend.csproj: Added.
+
+	* build/Mono.Debugger.SymbolWriter.csproj: Added.
+
+	* build/monodebuggerserver.vcproj: Added.
+
 2009-03-31  Martin Baulig  <martin@ximian.com>
 
 	* backend/MonoThreadManager.cs