<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hey&nbsp;monodev&nbsp;fellows,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;first&nbsp;of&nbsp;all&nbsp;I&nbsp;appreciate&nbsp;all&nbsp;your&nbsp;hard&nbsp;work&nbsp;and&nbsp;want&nbsp;to&nbsp;contribute&nbsp;this&nbsp;to&nbsp;the&nbsp;mono&nbsp;project.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Right&nbsp;now&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&nbsp;to&nbsp;use&nbsp;GTK#&nbsp;with&nbsp;an&nbsp;application&nbsp;which&nbsp;embeds&nbsp;mono.&nbsp;GTK#&nbsp;works&nbsp;just&nbsp;fine&nbsp;if&nbsp;you&nbsp;use&nbsp;mono&nbsp;as&nbsp;a&nbsp;standalone&nbsp;application&nbsp;eg&nbsp;mono.exe.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;reason&nbsp;why&nbsp;GTK#&nbsp;does&nbsp;not&nbsp;works&nbsp;when&nbsp;you&nbsp;embed&nbsp;mono&nbsp;is&nbsp;as&nbsp;fallowing.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Each&nbsp;GTK#&nbsp;Application&nbsp;has&nbsp;to&nbsp;call&nbsp;Application.Init(). &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;functions&nbsp;is&nbsp;like&nbsp;this.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;public&nbsp;static&nbsp;void&nbsp;Init&nbsp;()&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;SetPrgname&nbsp;();&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;IntPtr&nbsp;argv&nbsp;=&nbsp;new&nbsp;IntPtr(0);&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;int&nbsp;argc&nbsp;=&nbsp;0;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;gtk_init&nbsp;(ref&nbsp;argc,&nbsp;ref&nbsp;argv);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;SynchronizationContext.SetSynchronizationContext&nbsp;(new&nbsp;GLib.GLibSynchronizationContext&nbsp;());&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;}&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Init&nbsp;will&nbsp;fail&nbsp;on&nbsp;SetPrgname&nbsp;();&nbsp;when&nbsp;mono&nbsp;is&nbsp;embedded&nbsp;in&nbsp;an&nbsp;application. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;static&nbsp;void&nbsp;SetPrgname&nbsp;()&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;GLib.Global.ProgramName&nbsp;=&nbsp;System.IO.Path.GetFileNameWithoutExtension&nbsp;(Environment.GetCommandLineArgs&nbsp;()&nbsp;[0]);&lt;/div&gt;<br>
&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;embedding&nbsp;Mono,&nbsp;Environment.GetCommandLineArgs&nbsp;()&nbsp;will&nbsp;fail&nbsp;because&nbsp;it&nbsp;is&nbsp;not&nbsp;set&nbsp;to&nbsp;anything.&nbsp;When&nbsp;you&nbsp;run&nbsp;the&nbsp;same&nbsp;on&nbsp;mono&nbsp;as&nbsp;a&nbsp;standalone&nbsp;application&nbsp;it&nbsp;will&nbsp;work&nbsp;because&nbsp;mono&nbsp;will&nbsp;pass&nbsp;the&nbsp;command&nbsp;line&nbsp;argument&nbsp;via&nbsp;Environment.GetCommandLineArgs(). &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;fixed&nbsp;it&nbsp;by&nbsp;registering&nbsp;the&nbsp;internal&nbsp;call&nbsp;for&nbsp;Environment.GetCommandLineArgs&nbsp;to&nbsp;my&nbsp;own&nbsp;fucntion&nbsp;and&nbsp;return&nbsp;just&nbsp;a&nbsp;dummy&nbsp;string. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;suggestion&nbsp;would&nbsp;be&nbsp;to&nbsp;do&nbsp;the&nbsp;same&nbsp;in&nbsp;mono&nbsp;when&nbsp;you&nbsp;embed&nbsp;it&nbsp;or&nbsp;to&nbsp;change&nbsp;SetPrgname&nbsp; to&nbsp;not&nbsp;relay&nbsp;on&nbsp;Environment.GetCommandLineArgs&nbsp;().&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best&nbsp;Regards&lt;/div&gt;&lt;div&gt;Sahin&lt;/div&gt;&lt;/div&gt;<br>

</tt>
