<tt>
Calling&nbsp;&amp;#39;ToString&amp;#39;&nbsp;is&nbsp;just&nbsp;a&nbsp;GC&nbsp;benchmark.&nbsp;Yes,&nbsp;the&nbsp;current&nbsp;mono&nbsp;GC&nbsp;is&nbsp;slower&nbsp;than&nbsp;the&nbsp;.NET&nbsp;GC&nbsp;in&nbsp;this&nbsp;scenario.&nbsp;Your&nbsp;other&nbsp;tests&nbsp;also&nbsp;do&nbsp;a&nbsp;fair&nbsp;bit&nbsp;of&nbsp;allocating,&nbsp;so&nbsp;it&amp;#39;s&nbsp;quite&nbsp;possible&nbsp;the&nbsp;entire&nbsp;performance&nbsp;loss&nbsp;you&amp;#39;re&nbsp;seeing&nbsp;is&nbsp;just&nbsp;from&nbsp;the&nbsp;GC&nbsp;kicking&nbsp;in.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;test&nbsp;how&nbsp;fast&nbsp;you&nbsp;can&nbsp;add&nbsp;elements&nbsp;to&nbsp;a&nbsp;Dictionary,&nbsp;pre-allocate&nbsp;all&nbsp;the&nbsp;objects&nbsp;first&nbsp;and&nbsp;then&nbsp;time&nbsp;just&nbsp;the&nbsp;addition.&lt;br&gt;<br>
&lt;br&gt;Alan.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Oct&nbsp;6,&nbsp;2009&nbsp;at&nbsp;10:15&nbsp;AM,&nbsp;Lionel&nbsp;Cuir&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:lionel_email@aulofee.com&quot;&gt;lionel_email@aulofee.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;Hello,&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;Can&nbsp;anybody&nbsp;help&nbsp;me&nbsp;to&nbsp;understand&nbsp;why,&nbsp;on&nbsp;simple&nbsp;<br>
performance&nbsp;tests,&nbsp;I&nbsp;see&nbsp;so&nbsp;different&nbsp;results&nbsp;between&nbsp;.NET&nbsp;and&nbsp;Mono&nbsp;on&nbsp;various&nbsp;<br>
Linux&nbsp;platforms?&nbsp;Are&nbsp;my&nbsp;tests&nbsp;incorrect?&nbsp;Did&nbsp;I&nbsp;have&nbsp;no&nbsp;luck&nbsp;and&nbsp;simply&nbsp;fall&nbsp;on&nbsp;<br>
some&nbsp;methods/functionality&nbsp;better&nbsp;implemented&nbsp;by&nbsp;MS?&nbsp;And&nbsp;why&nbsp;is&nbsp;there&nbsp;such&nbsp;a&nbsp;<br>
difference&nbsp;between&nbsp;Suse&nbsp;and&nbsp;Debian&nbsp;for&nbsp;the&nbsp;IPAddress&nbsp;dictionary?&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;Any&nbsp;help&nbsp;appreciated&nbsp;(please,&nbsp;no&nbsp;trolling,&nbsp;no&nbsp;<br>
political&nbsp;debate&nbsp;-&nbsp;just&nbsp;ideas&nbsp;about&nbsp;how&nbsp;to&nbsp;improve&nbsp;things&nbsp;or&nbsp;ideas&nbsp;to&nbsp;point&nbsp;out&nbsp;<br>
methodology&nbsp;errors&nbsp;I&nbsp;would&nbsp;have&nbsp;made&nbsp;in&nbsp;my&nbsp;tests)&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;Regards,&lt;br&gt;Lionel&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&lt;/font&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;A&nbsp;few&nbsp;hint&lt;span&gt;s&lt;/span&gt;&nbsp;<br>
on&nbsp;how&nbsp;I&nbsp;did&nbsp;my&nbsp;tests:&lt;br&gt;-&nbsp;the&nbsp;OS&nbsp;are:&nbsp;a&nbsp;bare&nbsp;XP&nbsp;SP3,&nbsp;a&nbsp;bare&nbsp;OpenSuse&nbsp;(kernel&nbsp;<br>
2.6.27),&nbsp;a&nbsp;Debian&nbsp;with&nbsp;a&nbsp;lightened&nbsp;kernel&nbsp;(2.6.30)&lt;span&gt;&nbsp;-&nbsp;&amp;quot;bare&amp;quot;&nbsp;=&nbsp;the&nbsp;OS&nbsp;is&nbsp;up-to-date&nbsp;but&nbsp;no&nbsp;other&nbsp;software&nbsp;<br>
installed&lt;/span&gt;&lt;br&gt;-&nbsp;all &lt;span&gt;OS&nbsp;&lt;/span&gt;were&nbsp;<br>
run&lt;span&gt;ning&lt;/span&gt; &lt;span&gt;as&nbsp;&lt;/span&gt;vmware &lt;span&gt;guest&nbsp;&lt;/span&gt;(&lt;span&gt;in&nbsp;vm&nbsp;<br>
&lt;/span&gt;workstation&nbsp;6.5)&nbsp;with &lt;span&gt;two&nbsp;&amp;quot;cpus&amp;quot;&nbsp;<br>
(&lt;/span&gt;dual-core&nbsp;T7200&lt;span&gt;)&lt;/span&gt;&nbsp;and&nbsp;512Mo&nbsp;of&nbsp;<br>
RAM&lt;br&gt;&lt;/font&gt;<br>
&lt;div&gt;&lt;span&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;-&nbsp;Mono&nbsp;version&nbsp;was&nbsp;<br>
2.4.2.3&nbsp;on&nbsp;Suse,&nbsp;and&nbsp;2.5&nbsp;(compiled&nbsp;from&nbsp;SVN&nbsp;r140059)&nbsp;on&nbsp;Debian.&nbsp;.NET&nbsp;version&nbsp;is&nbsp;<br>
3.5&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;-&nbsp;On &lt;span&gt;Suse&nbsp;and&nbsp;Debian&lt;/span&gt;,&nbsp;I&nbsp;both&nbsp;run&nbsp;the&nbsp;test&lt;span&gt;s&lt;/span&gt;&nbsp;with&nbsp;the&nbsp;exe&nbsp;compiled&nbsp;with &lt;span&gt;csc&nbsp;(&lt;/span&gt;.net&lt;span&gt;)&lt;/span&gt;&nbsp;<br>
and&nbsp;with&nbsp;the&nbsp;exe&nbsp;compiled&nbsp;with&nbsp;gmcs&nbsp;-&nbsp;the&nbsp;results&nbsp;were&nbsp;the&nbsp;same.&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&lt;/font&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;You&amp;#39;ll&nbsp;find &lt;span&gt;attached&nbsp;&lt;/span&gt;the&nbsp;sample&nbsp;code&nbsp;I&nbsp;used&nbsp;-&nbsp;I&nbsp;test&nbsp;<br>
basically &lt;span&gt;a&lt;/span&gt;&nbsp;dictionary&nbsp;of&nbsp;int&lt;span&gt;,&nbsp;&lt;/span&gt;a&nbsp;dictionary&nbsp;of&nbsp;IPAddress&lt;span&gt;&nbsp;and&nbsp;the&nbsp;IPAddress.ToString&nbsp;method.&nbsp;The&nbsp;duration&nbsp;of&nbsp;the&nbsp;<br>
test&nbsp;(in&nbsp;millisec&nbsp;are:&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&lt;/font&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;int32&nbsp;Dictionary&lt;span&gt;&nbsp;<br>
test&lt;/span&gt;&lt;br&gt;4812 DotNet&lt;br&gt;9493 Mono&nbsp;on&nbsp;light&nbsp;<br>
Debian&lt;br&gt;9815 Mono&nbsp;on&nbsp;Suse&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&lt;/font&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&lt;/font&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&lt;/font&gt;&lt;br&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;IPAddress&nbsp;Dictionary&lt;span&gt;&nbsp;<br>
test&lt;/span&gt;&lt;br&gt;13500 DotNet&lt;br&gt;29533 Mono&nbsp;on&nbsp;light&nbsp;<br>
Debian&lt;br&gt;41732 Mono&nbsp;on&nbsp;Suse&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&lt;/font&gt; &lt;/div&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&lt;/font&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&lt;/font&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;IPAddress.ToString&lt;span&gt;&nbsp;test&lt;/span&gt;&lt;br&gt;2453 DotNet&lt;br&gt;16665 Mono&nbsp;on&nbsp;<br>
light&nbsp;Debian&lt;br&gt;17747 Mono&nbsp;on&nbsp;Suse&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
