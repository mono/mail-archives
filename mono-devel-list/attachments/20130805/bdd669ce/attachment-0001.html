<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&nbsp;&quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;Generator&quot;&nbsp;content=&quot;Zarafa&nbsp;WebApp&nbsp;v7.1.5-41923&quot;&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;title&gt;RE:&nbsp;[Mono-dev]&nbsp;NancyFX&nbsp;self&nbsp;hosting&nbsp;(HttpListener)&nbsp;locking&nbsp;up&nbsp;on&nbsp;linux&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;<br>
&lt;font&nbsp;face=&quot;tahoma&quot;&nbsp;size=&quot;2&quot;&gt;Getting&nbsp;similar&nbsp;issues&nbsp;when&nbsp;using&nbsp;FastCGI/XSP&nbsp;proxied&nbsp;via&nbsp;Nginx&nbsp;using&nbsp;tcp&nbsp;and&nbsp;unix&nbsp;sockets&nbsp;(tried&nbsp;both).&nbsp;After&nbsp;hammering&nbsp;it&nbsp;with&nbsp;jmeter&nbsp;it&nbsp;ends&nbsp;up&nbsp;locking&nbsp;up.&nbsp;I'm&nbsp;wondering&nbsp;if&nbsp;other&nbsp;mono&nbsp;webapps&nbsp;have&nbsp;this&nbsp;issue.&nbsp;Would&nbsp;be&nbsp;useful&nbsp;if&nbsp;someone&nbsp;else&nbsp;here&nbsp;could&nbsp;do&nbsp;a&nbsp;similar&nbsp;loadtest&nbsp;using&nbsp;jmeter&nbsp;&nbsp;and&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;it&nbsp;happens&nbsp;to&nbsp;them.&lt;/font&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;style=&quot;border-left:&nbsp;2px&nbsp;solid&nbsp;#325FBA;&nbsp;padding-left:&nbsp;5px;&nbsp;margin-left:&nbsp;5px;&nbsp;margin-right:&nbsp;0px;&quot;&gt;-----Original&nbsp;message-----&lt;br&gt;&lt;strong&gt;From:&lt;/strong&gt;&nbsp;Alfred&nbsp;Hall&nbsp;&lt;ahall@ahall.org&gt;&lt;br&gt;&lt;strong&gt;Sent:&lt;/strong&gt;&nbsp;Sunday&nbsp;4th&nbsp;August&nbsp;2013&nbsp;17:41&lt;br&gt;&lt;strong&gt;To:&lt;/strong&gt;&nbsp;Nikita&nbsp;Tsukanov&nbsp;&lt;keks9n@gmail.com&gt;;&nbsp;mono-devel-list@lists.ximian.com&lt;br&gt;&lt;strong&gt;Subject:&lt;/strong&gt;&nbsp;Re:&nbsp;[Mono-dev]&nbsp;NancyFX&nbsp;self&nbsp;hosting&nbsp;(HttpListener)&nbsp;locking&nbsp;up&nbsp;on&nbsp;linux&lt;br&gt;&lt;br&gt;&lt;base&nbsp;target=&quot;_blank&quot;&gt;<br>
&lt;!--&nbsp;begin&nbsp;sanitized&nbsp;html&nbsp;--&gt;<br>
<br>
<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;<br>
<br>
&lt;div&nbsp;class=&quot;bodyclass&quot;&gt;<br>
&lt;font&nbsp;face=&quot;tahoma&quot;&nbsp;size=&quot;2&quot;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;tahoma,&nbsp;arial,&nbsp;helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12px;&quot;&gt;Hi&nbsp;Nikita.&lt;/font&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;tahoma,&nbsp;arial,&nbsp;helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12px;&quot;&gt;&lt;font&nbsp;face=&quot;tahoma&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;tahoma&quot;&nbsp;size=&quot;2&quot;&gt;&lt;div&gt;Full&nbsp;thread&nbsp;dump:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&quot;&lt;threadpool&nbsp;thread&gt;&quot;&nbsp;tid=0x0x7fc4ad29d700&nbsp;this=0x0x7fc4ad584c70&nbsp;thread&nbsp;handle&nbsp;0x80f&nbsp;state&nbsp;:&nbsp;not&nbsp;waiting&nbsp;owns&nbsp;()&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&quot;IO&nbsp;Threadpool&nbsp;worker&quot;&nbsp;tid=0x0x7fc4ad25c700&nbsp;this=0x0x7fc4ad584dd0&nbsp;thread&nbsp;handle&nbsp;0x810&nbsp;state&nbsp;:&nbsp;interrupted&nbsp;state&nbsp;owns&nbsp;()&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&quot;IO&nbsp;Threadpool&nbsp;worker&quot;&nbsp;tid=0x0x7fc4a7567700&nbsp;this=0x0x7fc4a741d350&nbsp;thread&nbsp;handle&nbsp;0x845&nbsp;state&nbsp;:&nbsp;interrupted&nbsp;state&nbsp;owns&nbsp;()&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&quot;Threadpool&nbsp;worker&quot;&nbsp;tid=0x0x7fc4ac39a700&nbsp;this=0x0x7fc4a6192270&nbsp;thread&nbsp;handle&nbsp;0x837&nbsp;state&nbsp;:&nbsp;interrupted&nbsp;state&nbsp;owns&nbsp;()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;at&nbsp;&lt;unknown&gt;&nbsp;&lt;0xffffffff&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;at&nbsp;(wrapper&nbsp;managed-to-native)&nbsp;object.__icall_wrapper_mono_gc_alloc_vector&nbsp;(intptr,intptr,intptr)&nbsp;&lt;0xffffffff&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;at&nbsp;(wrapper&nbsp;alloc)&nbsp;object.AllocVector&nbsp;(intptr,intptr)&nbsp;&lt;0xffffffff&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;at&nbsp;System.Net.HttpConnection.BeginReadRequest&nbsp;()&nbsp;&lt;0x0003a&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;at&nbsp;System.Net.EndPointListener.OnAccept&nbsp;(object,System.EventArgs)&nbsp;&lt;0x00357&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;at&nbsp;System.Net.Sockets.SocketAsyncEventArgs.OnCompleted&nbsp;(System.Net.Sockets.SocketAsyncEventArgs)&nbsp;&lt;0x0002e&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;at&nbsp;System.Net.Sockets.SocketAsyncEventArgs.AcceptCallback&nbsp;(System.IAsyncResult)&nbsp;&lt;0x00336&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;at&nbsp;System.Net.Sockets.SocketAsyncEventArgs.DispatcherCB&nbsp;(System.IAsyncResult)&nbsp;&lt;0x0010f&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;at&nbsp;(wrapper&nbsp;runtime-invoke)&nbsp;&lt;Module&gt;.runtime_invoke_void__this___object&nbsp;(object,intptr,intptr,intptr)&nbsp;&lt;0xffffffff&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;then&nbsp;tried&nbsp;the&nbsp;same&nbsp;again&nbsp;and&nbsp;only&nbsp;got&nbsp;this&nbsp;in&nbsp;my&nbsp;trace:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Full&nbsp;thread&nbsp;dump:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&quot;&lt;threadpool&nbsp;thread&gt;&quot;&nbsp;tid=0x0x7f31b8ac5700&nbsp;this=0x0x7f31b8da4c70&nbsp;thread&nbsp;handle&nbsp;0x80e&nbsp;state&nbsp;:&nbsp;not&nbsp;waiting&nbsp;owns&nbsp;()&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&quot;IO&nbsp;Threadpool&nbsp;worker&quot;&nbsp;tid=0x0x7f31b8a84700&nbsp;this=0x0x7f31b8da4dd0&nbsp;thread&nbsp;handle&nbsp;0x80f&nbsp;state&nbsp;:&nbsp;interrupted&nbsp;state&nbsp;owns&nbsp;()&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Not&nbsp;sure&nbsp;why&nbsp;I'm&nbsp;not&nbsp;getting&nbsp;any&nbsp;dump&nbsp;here.&nbsp;Any&nbsp;more&nbsp;debugging&nbsp;I&nbsp;can&nbsp;do&nbsp;on&nbsp;there?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;seems&nbsp;to&nbsp;happen&nbsp;is&nbsp;its&nbsp;coping&nbsp;well&nbsp;initially&nbsp;with&nbsp;the&nbsp;requests&nbsp;and&nbsp;then&nbsp;in&nbsp;all&nbsp;of&nbsp;a&nbsp;sudden&nbsp;it&nbsp;stops&nbsp;accepting&nbsp;connections&nbsp;and&nbsp;existing&nbsp;connections&nbsp;dont&nbsp;die&nbsp;off.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Alf&lt;/div&gt;&lt;/font&gt;&lt;blockquote&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;tahoma,&nbsp;arial,&nbsp;helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12px;&nbsp;border-left-width:&nbsp;2px;&nbsp;border-left-style:&nbsp;solid;&nbsp;border-left-color:&nbsp;rgb(50,&nbsp;95,&nbsp;186);&nbsp;padding-left:&nbsp;5px;&nbsp;margin-left:&nbsp;5px;&nbsp;margin-right:&nbsp;0px;&quot;&gt;-----Original&nbsp;message-----&lt;br&gt;&lt;strong&gt;From:&lt;/strong&gt;&nbsp;Nikita&nbsp;Tsukanov&nbsp;&lt;keks9n@gmail.com&gt;&lt;br&gt;&lt;strong&gt;Sent:&lt;/strong&gt;&nbsp;Sunday&nbsp;4th&nbsp;August&nbsp;2013&nbsp;16:13&lt;br&gt;&lt;strong&gt;To:&lt;/strong&gt;&nbsp;mono-devel-list@lists.ximian.com&lt;br&gt;&lt;strong&gt;Subject:&lt;/strong&gt;&nbsp;Re:&nbsp;[Mono-dev]&nbsp;NancyFX&nbsp;self&nbsp;hosting&nbsp;(HttpListener)&nbsp;locking&nbsp;up&nbsp;on&nbsp;linux&lt;br&gt;&lt;br&gt;<br>
<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Alfred,&nbsp;please,&nbsp;try&nbsp;to&nbsp;send&nbsp;SIGQUIT&nbsp;to&nbsp;mono&nbsp;(i.&nbsp;e.&nbsp;kill&nbsp;-SIGQUIT&nbsp;{PID})&nbsp;when&nbsp;it&nbsp;stops&nbsp;processing&nbsp;requests.&nbsp;It&nbsp;will&nbsp;force&nbsp;mono&nbsp;to&nbsp;write&nbsp;thread&nbsp;stack&nbsp;traces&nbsp;to&nbsp;stdout.&nbsp;Grab&nbsp;them&nbsp;and&nbsp;post&nbsp;here,&nbsp;I&nbsp;suspect&nbsp;that&nbsp;the&nbsp;issue&nbsp;is&nbsp;simular&nbsp;to&nbsp;one&nbsp;experienced&nbsp;by&nbsp;me.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2013/8/4&nbsp;Nikita&nbsp;Tsukanov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:keks9n@gmail.com&quot;&nbsp;onclick=&quot;parent.webclient.openWindow(this,&nbsp;'createmail',&nbsp;'index.php?load=dialog&amp;task=createmail_standard&amp;to=keks9n@gmail.com');&nbsp;return&nbsp;false;&quot;&nbsp;title=&quot;This&nbsp;external&nbsp;link&nbsp;will&nbsp;open&nbsp;in&nbsp;a&nbsp;new&nbsp;window&quot;&nbsp;target=&quot;_blank&quot;&gt;keks9n@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Alfred,&nbsp;please,&nbsp;try&nbsp;to&nbsp;send&nbsp;SIGQUIT&nbsp;to&nbsp;mono&nbsp;(i.&nbsp;e.&nbsp;kill&nbsp;-SIGQUIT&lt;br&gt;<br>
{PID})&nbsp;when&nbsp;it&nbsp;stops&nbsp;processing&nbsp;requests.&nbsp;It&nbsp;will&nbsp;force&nbsp;mono&nbsp;to&nbsp;write&lt;br&gt;<br>
thread&nbsp;stack&nbsp;traces&nbsp;to&nbsp;stdout.&nbsp;Grab&nbsp;them&nbsp;and&nbsp;post&nbsp;here,&nbsp;I&nbsp;suspect&nbsp;that&lt;br&gt;<br>
the&nbsp;issue&nbsp;is&nbsp;simular&nbsp;to&nbsp;one&nbsp;experienced&nbsp;by&nbsp;me.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;pre&gt;_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
Mono-devel-list@lists.ximian.com&lt;br&gt;<br>
http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;br&gt;<br>
&lt;/pre&gt;<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;pre&gt;_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
Mono-devel-list@lists.ximian.com&lt;br&gt;<br>
http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;br&gt;<br>
&lt;/pre&gt;<br>
&lt;!--&nbsp;end&nbsp;sanitized&nbsp;html&nbsp;--&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
