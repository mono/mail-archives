<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;I&nbsp;have&nbsp;a&nbsp;C#&nbsp;wrapper&nbsp;for&nbsp;a&nbsp;native&nbsp;DLL&nbsp;which&nbsp;exists&nbsp;on&nbsp;both&nbsp;windows&nbsp;and&nbsp;UNIX.&nbsp;However,&nbsp;it&nbsp;doesn&#39;t&nbsp;work&nbsp;on&nbsp;Mono&nbsp;because&nbsp;of&nbsp;a&nbsp;behavior&nbsp;difference&nbsp;between&nbsp;Mono&nbsp;and &lt;/span&gt;&lt;a&nbsp;href=&quot;http://MS.NET&quot;&nbsp;target=&quot;_blank&quot;&gt;MS.NET&lt;/a&gt;.&nbsp;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;Specifically,&nbsp;I&nbsp;use&nbsp;&quot;unsafe&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_80ce4b1c256452f0103a9f852a70960faf8a8811_struct:0&quot;&gt;struct&lt;/span&gt;&lt;/span&gt;&nbsp;pointers&quot;&nbsp;to&nbsp;manage&nbsp;pointers&nbsp;to&nbsp;opaque&nbsp;data&nbsp;(rather&nbsp;than&nbsp;IntPtr).&nbsp;I&nbsp;do&nbsp;this&nbsp;to&nbsp;get&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_318144c35be6aa55333af82deeb0d7492d52f866_typechecking:0&quot;&gt;typechecking&lt;/span&gt;&lt;/span&gt;,&nbsp;because&nbsp;there&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_318144c35be6aa55333af82deeb0d7492d52f866_are:1&quot;&gt;are&lt;/span&gt;&lt;/span&gt;&nbsp;a&nbsp;bunch&nbsp;of&nbsp;types&nbsp;of&nbsp;pointers,&nbsp;and&nbsp;using&nbsp;IntPtr&nbsp;is&nbsp;dangerously&nbsp;non-type-checked.&nbsp;(I&nbsp;honestly&nbsp;don&#39;t&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_b1cf8d91f53c0d1c92e6bbbafcaa8b034c9230ad_undertand:0&quot;&gt;undertand&lt;/span&gt;&lt;/span&gt;&nbsp;why&nbsp;IntPtr&nbsp;is&nbsp;allowed,&nbsp;rather&nbsp;than&nbsp;always&nbsp;requiring&nbsp;the&nbsp;use&nbsp;of&nbsp;typed&nbsp;unsafe-&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_b1cf8d91f53c0d1c92e6bbbafcaa8b034c9230ad_struct:1&quot;&gt;struct&lt;/span&gt;&lt;/span&gt;-pointers.) &lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt; As&nbsp;far&nbsp;as&nbsp;I&nbsp;know,&nbsp;CLR/CTS&nbsp;defines&nbsp;an&nbsp;unsafe-&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_b1cf8d91f53c0d1c92e6bbbafcaa8b034c9230ad_struct:2&quot;&gt;struct&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;-pointer&nbsp;as&nbsp;a&nbsp;value&nbsp;type. &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;a&nbsp;href=&quot;http://stackoverflow.com/questions/4503795/is-it-valid-to-use-unsafe-struct-as-an-opaque-type-instead-of-intptr-in-net-p&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;link=&quot;external&quot;&nbsp;style=&quot;color:rgb(85,26,139);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&nbsp;target=&quot;_blank&quot;&gt;http://stackoverflow.com/questions/4503795/is-it-valid-to-use-unsafe-struct-as-an-opaque-type-instead-of-intptr-in-net-p&lt;/a&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;My&nbsp;code&nbsp;looks&nbsp;something&nbsp;like: &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;//&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_381d580ecc5e9b1b7cac7a3c2f90395c0bcc575a_opaque:0&quot;&gt;opaque&lt;/span&gt;&lt;/span&gt;&nbsp;types &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_42965d002afb9989f31820220603b93aaec4b0b2_public:0&quot;&gt;public&lt;/span&gt;&lt;/span&gt;&nbsp;unsafe&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_42965d002afb9989f31820220603b93aaec4b0b2_struct:1&quot;&gt;struct&lt;/span&gt;&lt;/span&gt;&nbsp;HDF&nbsp;{}; &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;//&nbsp;NEOERR*&nbsp;hdf_set_value&nbsp;(HDF&nbsp;*hdf,&nbsp;char&nbsp;*name,&nbsp;char&nbsp;*value) &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;[DllImport&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_b1d89c598963ca27ae0e789681450f2af6831569_(:0&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&quot;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_b1d89c598963ca27ae0e789681450f2af6831569_libneo:1&quot;&gt;libneo&lt;/span&gt;&lt;/span&gt;&quot;)] &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_6e6ee78e7968a12655d843892e1bf69d27517f33_private:0&quot;&gt;private&lt;/span&gt;&lt;/span&gt;&nbsp;static&nbsp;unsafe&nbsp;extern&nbsp;NEOERR*&nbsp;hdf_set_value&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_6e6ee78e7968a12655d843892e1bf69d27517f33_(:1&quot;&gt;(&lt;/span&gt;&lt;/span&gt;HDF&nbsp;*hdf, &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt; &nbsp; &nbsp; [MarshalAs&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_54f96d0614cc9f824c85c7c9b81097dc989872fa_(:0&quot;&gt;(&lt;/span&gt;&lt;/span&gt;UnmanagedType&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_54f96d0614cc9f824c85c7c9b81097dc989872fa_.:1&quot;&gt;.&lt;/span&gt;&lt;/span&gt;LPStr)] &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_eec5e06df3d755d36cecfd64dd96156d9e62dfbd_string:0&quot;&gt;string&lt;/span&gt;&lt;/span&gt;&nbsp;name, &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt; &nbsp; &nbsp; [MarshalAs&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_54f96d0614cc9f824c85c7c9b81097dc989872fa_(:0&quot;&gt;(&lt;/span&gt;&lt;/span&gt;UnmanagedType&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_54f96d0614cc9f824c85c7c9b81097dc989872fa_.:1&quot;&gt;.&lt;/span&gt;&lt;/span&gt;LPStr)] &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_3c74cceea23a2004e6fdd919500c551838f8d764_string:0&quot;&gt;string&lt;/span&gt;&lt;/span&gt;&nbsp;value); &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;This&nbsp;works&nbsp;fine&nbsp;in&lt;/span&gt; &lt;a&nbsp;href=&quot;http://MS.NET&quot;&nbsp;target=&quot;_blank&quot;&gt;MS.NET&lt;/a&gt;,&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt; but&nbsp;Mono&nbsp;complains&nbsp;with&nbsp;the&nbsp;following&nbsp;error: &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;Unhandled&nbsp;Exception:&nbsp;System&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_c5ae758aedb6f73628057dc47a5823731eed4cfa_.:0&quot;&gt;.&lt;/span&gt;&lt;/span&gt;Runtime&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_c5ae758aedb6f73628057dc47a5823731eed4cfa_.:1&quot;&gt;.&lt;/span&gt;&lt;/span&gt;InteropServices&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_c5ae758aedb6f73628057dc47a5823731eed4cfa_.:2&quot;&gt;.&lt;/span&gt;&lt;/span&gt;MarshalDirectiveException:&nbsp;Can&nbsp;not&nbsp;marshal&nbsp;&#39;parameter&nbsp;#1&#39;:&nbsp;Pointers&nbsp;can&nbsp;not&nbsp;reference&nbsp;marshaled&nbsp;structures.&nbsp;Use&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_1a6624f77def3503af107791acf555bbb3211109_byref:0&quot;&gt;byref&lt;/span&gt;&lt;/span&gt;&nbsp;instead. &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt; &nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_715c42d096226d1ed8734caf16478a95ec83fa3d_at:0&quot;&gt;at&lt;/span&gt;&lt;/span&gt;&nbsp;(wrapper&nbsp;managed-to-native)&nbsp;Clearsilver&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_715c42d096226d1ed8734caf16478a95ec83fa3d_.:1&quot;&gt;.&lt;/span&gt;&lt;/span&gt;Hdf&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_715c42d096226d1ed8734caf16478a95ec83fa3d_::2&quot;&gt;:&lt;/span&gt;&lt;/span&gt;hdf_set_value&nbsp;(Clearsilver&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_715c42d096226d1ed8734caf16478a95ec83fa3d_.:3&quot;&gt;.&lt;/span&gt;&lt;/span&gt;HDF*&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_715c42d096226d1ed8734caf16478a95ec83fa3d_,:4&quot;&gt;,&lt;/span&gt;&lt;/span&gt;string&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_715c42d096226d1ed8734caf16478a95ec83fa3d_,:5&quot;&gt;,&lt;/span&gt;&lt;/span&gt;string) &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt; &nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_da4e36fe4970f245864d074f9b5395ad1b25f787_at:0&quot;&gt;at&lt;/span&gt;&lt;/span&gt;&nbsp;Clearsilver&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_da4e36fe4970f245864d074f9b5395ad1b25f787_.:1&quot;&gt;.&lt;/span&gt;&lt;/span&gt;Hdf&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_da4e36fe4970f245864d074f9b5395ad1b25f787_.:2&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_da4e36fe4970f245864d074f9b5395ad1b25f787_setValue:3&quot;&gt;setValue&lt;/span&gt;&lt;/span&gt;&nbsp;(System&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_da4e36fe4970f245864d074f9b5395ad1b25f787_.:4&quot;&gt;.&lt;/span&gt;&lt;/span&gt;String&nbsp;name,&nbsp;System&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_da4e36fe4970f245864d074f9b5395ad1b25f787_.:5&quot;&gt;.&lt;/span&gt;&lt;/span&gt;String&nbsp;value)&nbsp;[0x00000] &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt; &nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_2e32859782eab4f1329f8aa8b696e52dcdc55102_at:0&quot;&gt;at&lt;/span&gt;&lt;/span&gt;&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_2e32859782eab4f1329f8aa8b696e52dcdc55102_CSTest:1&quot;&gt;CSTest&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_2e32859782eab4f1329f8aa8b696e52dcdc55102_.:2&quot;&gt;.&lt;/span&gt;&lt;/span&gt;Main&nbsp;(System&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_2e32859782eab4f1329f8aa8b696e52dcdc55102_.:3&quot;&gt;.&lt;/span&gt;&lt;/span&gt;String&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_2e32859782eab4f1329f8aa8b696e52dcdc55102_[:4&quot;&gt;[&lt;/span&gt;&lt;/span&gt;]&nbsp;argv)&nbsp;[0x00000] &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;My&nbsp;questions: &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;(1)&nbsp;Why&nbsp;is&nbsp;Mono&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_c51b19b6aabd6ebf6f9ec86f0b915c238c5da343_complaining:0&quot;&gt;complaining&lt;/span&gt;&lt;/span&gt;&nbsp;about&nbsp;this?&nbsp;AFAIK,&nbsp;in&nbsp;the&nbsp;CLR,&nbsp;an&nbsp;unsafe&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_045d27eaef0fdabdf082badc0b865d15015a82ce_struct:0&quot;&gt;struct&lt;/span&gt;&lt;/span&gt;&nbsp;pointer&nbsp;is&nbsp;not&nbsp;a&nbsp;marshalled&nbsp;structure,&nbsp;it&#39;s&nbsp;a&nbsp;value&nbsp;type. &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;<br>
<br>
<br>
&lt;br&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;(2)&nbsp;Why&nbsp;would&nbsp;it&nbsp;suggest&nbsp;using&nbsp;ByRef?&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_404e5c3e4213e820c3df6ce4ae51d44a5d2b2def_ByRef:0&quot;&gt;ByRef&lt;/span&gt;&lt;/span&gt;&nbsp;is&nbsp;for&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_404e5c3e4213e820c3df6ce4ae51d44a5d2b2def_managed:1&quot;&gt;managed&lt;/span&gt;&lt;/span&gt;&nbsp;pointers&nbsp;to&nbsp;managed&nbsp;data.&nbsp;This&nbsp;is&nbsp;a&nbsp;value-type&nbsp;pointer&nbsp;value.&nbsp; AFAIK,&nbsp;ByRef&nbsp;is&nbsp;not&nbsp;capable&nbsp;of&nbsp;doing&nbsp;anything&nbsp;here,&nbsp;because&nbsp;the&nbsp;pointer&nbsp;is&nbsp;just&nbsp;a&nbsp;&quot;typed&quot;&nbsp;IntPtr&nbsp;value&nbsp;type. &lt;/span&gt;&lt;div&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;(3)&nbsp;I&nbsp;think&nbsp;this&nbsp;used&nbsp;to&nbsp;work&nbsp;&lt;span&gt;&lt;span&nbsp;class=&quot;GRcorrect&quot;&nbsp;id=&quot;GRmark_677e0af4e21ec68f76772873f0fb057760e81b38_in:0&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&nbsp;older&nbsp;versions&nbsp;of&nbsp;mono.&nbsp;Is&nbsp;there&nbsp;some&nbsp;particular&nbsp;reason&nbsp;the&nbsp;behavior&nbsp;has&nbsp;changed?&nbsp;Do&nbsp;folks&nbsp;agree&nbsp;this&nbsp;is&nbsp;a&nbsp;problem?&lt;/span&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:Verdana,Geneva,Helvetica,Arial,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;<br>

</tt>
