<tt>
Hi&nbsp;Atsushi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;your&nbsp;reply.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Let&nbsp;me&nbsp;just&nbsp;ask&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;schedule&nbsp;for&nbsp;further&nbsp;development&nbsp;on&nbsp;this&nbsp;section?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Vilius.&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;10&nbsp;May&nbsp;2010&nbsp;05:58,&nbsp;Atsushi&nbsp;Eno&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:atsushieno@veritas-vos-liberabit.com&quot;&gt;atsushieno@veritas-vos-liberabit.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;will&nbsp;first&nbsp;stabilize&nbsp;existing&nbsp;stuff&nbsp;as&nbsp;well&nbsp;as&nbsp;fill&nbsp;missing&nbsp;functionalities,&nbsp;and&nbsp;there&nbsp;is&nbsp;a&nbsp;lot&nbsp;to&nbsp;do.&nbsp;There&nbsp;isn&amp;#39;t&nbsp;any&nbsp;kind&nbsp;of&nbsp;optimization.&nbsp;I&amp;#39;d&nbsp;rather&nbsp;welcome&nbsp;your&nbsp;contributions&nbsp;and&nbsp;won&amp;#39;t&nbsp;work&nbsp;on&nbsp;it&nbsp;so&nbsp;far.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
Atsushi&nbsp;Eno&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;2010/05/08&nbsp;0:14,&nbsp;Vilius&nbsp;Adamkavicius&nbsp;wrote:&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
&lt;br&gt;<br>
We&nbsp;have&nbsp;implemented&nbsp;a&nbsp;simple&nbsp;self&nbsp;hosted&nbsp;web&nbsp;service&nbsp;in&nbsp;.NET&nbsp;using&nbsp;ServiceHost.&nbsp;The&nbsp;Client&nbsp;is&nbsp;a&nbsp;simple&nbsp;Silverlight&nbsp;app&nbsp;that&nbsp;polls&nbsp;for&nbsp;updated&nbsp;info&nbsp;every&nbsp;5&nbsp;seconds.&nbsp;The&nbsp;return&nbsp;messages&nbsp;tend&nbsp;to&nbsp;be&nbsp;no&nbsp;more&nbsp;that&nbsp;1-10K.&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;ported&nbsp;the&nbsp;web&nbsp;service&nbsp;(self-hosted)&nbsp;to&nbsp;MONO&nbsp;2.6.&nbsp;This&nbsp;seemed&nbsp;to&nbsp;go&nbsp;perfectly&nbsp;and&nbsp;it&nbsp;stood&nbsp;up&nbsp;to&nbsp;stress&nbsp;testing&nbsp;in&nbsp;devel...then&nbsp;we&nbsp;deployed&nbsp;it.&nbsp;Now&nbsp;we&nbsp;find&nbsp;that&nbsp;the&nbsp;service&nbsp;is&nbsp;unstable&nbsp;and&nbsp;can&nbsp;just&nbsp;hangs&nbsp;after&nbsp;anywhere&nbsp;between&nbsp;2&nbsp;minutes&nbsp;and&nbsp;2&nbsp;days.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
IP&nbsp;traces&nbsp;show&nbsp;that&nbsp;when&nbsp;it&nbsp;hangs&nbsp;the&nbsp;XML&nbsp;Post&nbsp;gets&nbsp;(request)&nbsp;gets&nbsp;received&nbsp;by&nbsp;the&nbsp;webservice&nbsp;but&nbsp;nothing&nbsp;is&nbsp;ever&nbsp;transmitted&nbsp;back.&nbsp;Also&nbsp;when&nbsp;it&nbsp;hangs&nbsp;netstat&nbsp;shows&nbsp;a&nbsp;persistent&nbsp;active&nbsp;connection&nbsp;on&nbsp;the&nbsp;port&nbsp;to&nbsp;which&nbsp;it&nbsp;is&nbsp;allocated.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
In&nbsp;an&nbsp;attempt&nbsp;to&nbsp;diagnose&nbsp;this&nbsp;we&nbsp;looked&nbsp;at&nbsp;the&nbsp;port&nbsp;behaviour&nbsp;using&nbsp;netstat.&nbsp;We&nbsp;looked&nbsp;at&nbsp;this&nbsp;while&nbsp;the&nbsp;MONO&nbsp;implementation&nbsp;of&nbsp;the&nbsp;webservice&nbsp;was&nbsp;running&nbsp;without&nbsp;problem;&nbsp;we&nbsp;compare&nbsp;this&nbsp;to&nbsp;the&nbsp;active&nbsp;port&nbsp;connection&nbsp;behaviour&nbsp;of&nbsp;the&nbsp;windows/.NET&nbsp;implementation-&nbsp;what&nbsp;found&nbsp;was&nbsp;worrying.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
When&nbsp;we&nbsp;run&nbsp;a&nbsp;single&nbsp;client&nbsp;and&nbsp;connect&nbsp;the&nbsp;windows/.NET&nbsp;version&nbsp;of&nbsp;the&nbsp;webservice&nbsp;we&nbsp;see&nbsp;*one&nbsp;port&nbsp;connection&nbsp;that&nbsp;persists*.&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;we&nbsp;run&nbsp;a&nbsp;single&nbsp;client&nbsp;and&nbsp;connect&nbsp;the&nbsp;MONO&nbsp;version&nbsp;of&nbsp;the&nbsp;webservice&nbsp;we&nbsp;see&nbsp;it&nbsp;holds&nbsp;around&nbsp;*12-16&nbsp;active&nbsp;port&nbsp;connections&nbsp;at&nbsp;any&nbsp;one&nbsp;time*...and&nbsp;these&nbsp;seem&nbsp;to&nbsp;be&nbsp;continuously&nbsp;dying&nbsp;and&nbsp;regenerating.&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;postulated&nbsp;that&nbsp;each&nbsp;call&nbsp;to&nbsp;the&nbsp;webservice&nbsp;was&nbsp;making&nbsp;a&nbsp;new&nbsp;connection&nbsp;(unlike&nbsp;Windows);&nbsp;each&nbsp;connection&nbsp;would&nbsp;be&nbsp;used&nbsp;once&nbsp;and&nbsp;then&nbsp;timeout.&nbsp;Given&nbsp;the&nbsp;rate&nbsp;that&nbsp;the&nbsp;client&nbsp;polls&nbsp;we&nbsp;estimated&nbsp;that&nbsp;the&nbsp;timeout&nbsp;must&nbsp;be&nbsp;around&nbsp;a&nbsp;minute...then&nbsp;we&nbsp;found&nbsp;this&nbsp;in&nbsp;the&nbsp;MONO&nbsp;DefaultCommunicationTimeouts.cs&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
Vilius:&nbsp;private&nbsp;DefaultCommunicationTimeouts&nbsp;()&lt;br&gt;<br>
{&lt;br&gt;<br>
close&nbsp;=&nbsp;open&nbsp;=&nbsp;send&nbsp;=&nbsp;TimeSpan.FromMinutes&nbsp;(1);&lt;br&gt;<br>
receive&nbsp;=&nbsp;TimeSpan.FromMinutes&nbsp;(10);&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;strongly&nbsp;supports&nbsp;our&nbsp;theory...&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;question&nbsp;is&nbsp;why&nbsp;does&nbsp;it&nbsp;keep&nbsp;creating&nbsp;a&nbsp;new&nbsp;connection&nbsp;for&nbsp;each&nbsp;call?&nbsp;Can&nbsp;the&nbsp;MONO&nbsp;2.6&nbsp;implementation&nbsp;of&nbsp;ServiceHost&nbsp;maintain&nbsp;a&nbsp;single&nbsp;connection&nbsp;for&nbsp;an&nbsp;application&nbsp;session&nbsp;(like&nbsp;Windows&nbsp;.NET)&nbsp;?&nbsp;What&nbsp;is&nbsp;the&nbsp;ramification&nbsp;of&nbsp;this?&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&nbsp; &nbsp;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Regards,&lt;br&gt;Vilius.&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
