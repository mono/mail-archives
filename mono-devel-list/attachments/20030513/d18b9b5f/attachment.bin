Index: mono/metadata/ChangeLog
===================================================================
RCS file: /cvs/public/mono/mono/metadata/ChangeLog,v
retrieving revision 1.931
diff -u -p -r1.931 ChangeLog
--- mono/metadata/ChangeLog	13 May 2003 14:50:08 -0000	1.931
+++ mono/metadata/ChangeLog	13 May 2003 22:29:19 -0000
@@ -1,3 +1,6 @@
+2003-05-13  Jonathan Pryor  <jonpryor@vt.edu>
+	* appdomain.c: set the entry assembly when creating an AppDomain.
+	  Fixes #42934.
 
 Tue May 13 16:41:49 CEST 2003 Paolo Molaro <lupus@ximian.com>
 
Index: mono/metadata/appdomain.c
===================================================================
RCS file: /cvs/public/mono/mono/metadata/appdomain.c,v
retrieving revision 1.78
diff -u -p -r1.78 appdomain.c
--- mono/metadata/appdomain.c	10 Apr 2003 16:24:11 -0000	1.78
+++ mono/metadata/appdomain.c	13 May 2003 22:29:20 -0000
@@ -283,7 +283,7 @@ ves_icall_System_AppDomain_getCurDomain 
 MonoAppDomain *
 ves_icall_System_AppDomain_createDomain (MonoString *friendly_name, MonoAppDomainSetup *setup)
 {
-	/*MonoDomain *domain = mono_domain_get (); */
+	MonoDomain *domain = mono_domain_get ();
 	MonoClass *adclass;
 	MonoAppDomain *ad;
 	MonoDomain *data;
@@ -300,6 +300,10 @@ ves_icall_System_AppDomain_createDomain 
 	data->domain = ad;
 	data->setup = setup;
 	data->friendly_name = mono_string_to_utf8 (friendly_name);
+
+	/* FIXME: is it safe to assume that the new entry assembly is the same as
+	 * the current entry assembly? */
+	data->entry_assembly = domain->entry_assembly;
 
 	mono_context_init (data);
 
