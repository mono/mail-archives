Index: mono/mono/mini/mini.c
===================================================================
--- mono/mono/mini/mini.c	(revision 37209)
+++ mono/mono/mini/mini.c	(working copy)
@@ -5846,7 +5846,26 @@
 
 	bblock->cil_length = ip - bblock->cil_code;
 	bblock->next_bb = end_bblock;
-	link_bblock (cfg, bblock, end_bblock);
+	if (bblock->last_ins != NULL && ((bblock->last_ins->opcode == CEE_BR) ||
+			(bblock->last_ins->opcode == CEE_BNE_UN) ||
+			(bblock->last_ins->opcode == CEE_BEQ) ||
+			(bblock->last_ins->opcode == CEE_BLT) ||
+			(bblock->last_ins->opcode == CEE_BLT_UN) ||
+			(bblock->last_ins->opcode == CEE_BGT) ||
+			(bblock->last_ins->opcode == CEE_BGT_UN) ||
+			(bblock->last_ins->opcode == CEE_BGE) ||
+			(bblock->last_ins->opcode == CEE_BGE_UN) ||
+			(bblock->last_ins->opcode == CEE_BLE) ||
+			(bblock->last_ins->opcode == CEE_BLE_UN) ||
+			(bblock->last_ins->opcode == CEE_SWITCH) )) {
+		if (cfg->verbose_level >= 3) {
+			printf ("Skipping connection of last BB to exit BB, last BB ends with \"");
+			mono_print_tree (bblock->last_ins);
+			printf ("\"\n");
+		}
+	} else {
+		link_bblock (cfg, bblock, end_bblock);
+	}
 
 	if (cfg->method == method && cfg->domainvar) {
 		
@@ -7927,7 +7946,7 @@
 	if (cfg->opt & MONO_OPT_BRANCH)
 		optimize_branches (cfg);
 
-	if ((cfg->opt & MONO_OPT_SSAPRE) && ! (cfg->opt & (MONO_OPT_CONSPROP|MONO_OPT_COPYPROP))) {
+	if (cfg->opt & MONO_OPT_SSAPRE) {
 		remove_critical_edges (cfg);
 	}
 
@@ -8010,7 +8029,7 @@
 		if ((cfg->flags & MONO_CFG_HAS_LDELEMA) && (cfg->opt & MONO_OPT_ABCREM))
 			mono_perform_abc_removal (cfg);
 		
-		if ((cfg->opt & MONO_OPT_SSAPRE) && ! (cfg->opt & (MONO_OPT_CONSPROP|MONO_OPT_COPYPROP)))
+		if (cfg->opt & MONO_OPT_SSAPRE)
 			mono_perform_ssapre (cfg);
 		
 		mono_ssa_remove (cfg);
