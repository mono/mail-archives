<tt>
Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  This&nbsp;is&nbsp;ok&nbsp;to&nbsp;check&nbsp;in.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Zoltan&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Apr&nbsp;1,&nbsp;2010&nbsp;at&nbsp;2:27&nbsp;AM,&nbsp;Andreas&nbsp;Färber&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:andreas.faerber@web.de&quot;&gt;andreas.faerber@web.de&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;Haiku&nbsp;does&nbsp;not&nbsp;support&nbsp;SA_SIGINFO-style&nbsp;signal&nbsp;handlers&nbsp;but&nbsp;supports&lt;br&gt;<br>
a&nbsp;BeOS&nbsp;extension&nbsp;to&nbsp;signal&nbsp;handlers.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;commit&nbsp;is&nbsp;licensed&nbsp;under&nbsp;the&nbsp;MIT&nbsp;X11&nbsp;license.&lt;br&gt;<br>
---&lt;br&gt;<br>
 mono/mini/ChangeLog&nbsp; |&nbsp; &nbsp; 7&nbsp;+++++++&lt;br&gt;<br>
 mono/mini/mini-x86.h&nbsp;|&nbsp; &nbsp;18&nbsp;++++++++++++++++++&lt;br&gt;<br>
 mono/mini/mini.h&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; 6&nbsp;++++++&lt;br&gt;<br>
 3&nbsp;files&nbsp;changed,&nbsp;31&nbsp;insertions(+),&nbsp;0&nbsp;deletions(-)&lt;br&gt;<br>
&lt;br&gt;<br>
diff&nbsp;--git&nbsp;a/mono/mini/ChangeLog&nbsp;b/mono/mini/ChangeLog&lt;br&gt;<br>
index&nbsp;d271c36..e2d5c85&nbsp;100755&lt;br&gt;<br>
---&nbsp;a/mono/mini/ChangeLog&lt;br&gt;<br>
+++&nbsp;b/mono/mini/ChangeLog&lt;br&gt;<br>
@@&nbsp;-1,5&nbsp;+1,12&nbsp;@@&lt;br&gt;<br>
 2010-03-30&nbsp; Andreas&nbsp;Faerber&nbsp; &amp;lt;&lt;a&nbsp;href=&quot;mailto:andreas.faerber@web.de&quot;&gt;andreas.faerber@web.de&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;*&nbsp;mini.h,&nbsp;mini-x86.h:&nbsp;Suppress&nbsp;sigaction&nbsp;for&nbsp;Haiku,&nbsp;add&nbsp;support&nbsp;for&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;BeOS-style&nbsp;signal&nbsp;handlers.&lt;br&gt;<br>
+&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;Code&nbsp;is&nbsp;contributed&nbsp;under&nbsp;MIT/X11&nbsp;license.&lt;br&gt;<br>
+&lt;br&gt;<br>
+2010-03-30&nbsp; Andreas&nbsp;Faerber&nbsp; &amp;lt;&lt;a&nbsp;href=&quot;mailto:andreas.faerber@web.de&quot;&gt;andreas.faerber@web.de&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
+&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; *&nbsp;mini-posix.c:&nbsp;Fix&nbsp;the&nbsp;build&nbsp;on&nbsp;platforms&nbsp;without&nbsp;SA_SIGINFO&nbsp;(Haiku).&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; Code&nbsp;is&nbsp;contributed&nbsp;under&nbsp;MIT/X11&nbsp;license.&lt;br&gt;<br>
diff&nbsp;--git&nbsp;a/mono/mini/mini-x86.h&nbsp;b/mono/mini/mini-x86.h&lt;br&gt;<br>
index&nbsp;5af560c..1567a61&nbsp;100644&lt;br&gt;<br>
---&nbsp;a/mono/mini/mini-x86.h&lt;br&gt;<br>
+++&nbsp;b/mono/mini/mini-x86.h&lt;br&gt;<br>
@@&nbsp;-44,6&nbsp;+44,12&nbsp;@@&nbsp;LONG&nbsp;CALLBACK&nbsp;seh_handler(EXCEPTION_POINTERS*&nbsp;ep);&lt;br&gt;<br>
&lt;br&gt;<br>
 #endif&nbsp;/*&nbsp;HOST_WIN32&nbsp;*/&lt;br&gt;<br>
&lt;br&gt;<br>
+#ifdef&nbsp;__HAIKU__&lt;br&gt;<br>
+struct&nbsp;sigcontext&nbsp;{&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;vregs&nbsp;regs;&lt;br&gt;<br>
+};&lt;br&gt;<br>
+#endif&nbsp;/*&nbsp;__HAIKU__&nbsp;*/&lt;br&gt;<br>
+&lt;br&gt;<br>
 #if&nbsp;defined(&nbsp;__linux__)&nbsp;||&nbsp;defined(__sun)&nbsp;||&nbsp;defined(__APPLE__)&nbsp;||&nbsp;defined(__NetBSD__)&nbsp;||&nbsp;\&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; defined(__FreeBSD__)&nbsp;||&nbsp;defined(__OpenBSD__)&lt;br&gt;<br>
 #define&nbsp;MONO_ARCH_USE_SIGACTION&lt;br&gt;<br>
@@&nbsp;-59,7&nbsp;+65,9&nbsp;@@&nbsp;LONG&nbsp;CALLBACK&nbsp;seh_handler(EXCEPTION_POINTERS*&nbsp;ep);&lt;br&gt;<br>
 #ifndef&nbsp;__sun&lt;br&gt;<br>
 #define&nbsp;MONO_ARCH_SIGSEGV_ON_ALTSTACK&lt;br&gt;<br>
 #endif&lt;br&gt;<br>
+#ifndef&nbsp;__HAIKU__&lt;br&gt;<br>
 #define&nbsp;MONO_ARCH_USE_SIGACTION&lt;br&gt;<br>
+#endif&nbsp;/*&nbsp;__HAIKU__&nbsp;*/&lt;br&gt;<br>
&lt;br&gt;<br>
 #endif&nbsp;/*&nbsp;HAVE_WORKING_SIGALTSTACK&nbsp;*/&lt;br&gt;<br>
 #endif&nbsp;/*&nbsp;!HOST_WIN32&nbsp;*/&lt;br&gt;<br>
@@&nbsp;-161,6&nbsp;+169,16&nbsp;@@&nbsp;typedef&nbsp;struct&nbsp;{&lt;br&gt;<br>
 #&nbsp;define&nbsp;SC_ESP&nbsp;sc_esp&lt;br&gt;<br>
 #&nbsp;define&nbsp;SC_EDI&nbsp;sc_edi&lt;br&gt;<br>
 #&nbsp;define&nbsp;SC_ESI&nbsp;sc_esi&lt;br&gt;<br>
+#elif&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
+#&nbsp;define&nbsp;SC_EAX&nbsp;regs.eax&lt;br&gt;<br>
+#&nbsp;define&nbsp;SC_EBX&nbsp;regs._reserved_2[2]&lt;br&gt;<br>
+#&nbsp;define&nbsp;SC_ECX&nbsp;regs.ecx&lt;br&gt;<br>
+#&nbsp;define&nbsp;SC_EDX&nbsp;regs.edx&lt;br&gt;<br>
+#&nbsp;define&nbsp;SC_EBP&nbsp;regs.ebp&lt;br&gt;<br>
+#&nbsp;define&nbsp;SC_EIP&nbsp;regs.eip&lt;br&gt;<br>
+#&nbsp;define&nbsp;SC_ESP&nbsp;regs.esp&lt;br&gt;<br>
+#&nbsp;define&nbsp;SC_EDI&nbsp;regs._reserved_2[0]&lt;br&gt;<br>
+#&nbsp;define&nbsp;SC_ESI&nbsp;regs._reserved_2[1]&lt;br&gt;<br>
 #else&lt;br&gt;<br>
 #&nbsp;define&nbsp;SC_EAX&nbsp;eax&lt;br&gt;<br>
 #&nbsp;define&nbsp;SC_EBX&nbsp;ebx&lt;br&gt;<br>
diff&nbsp;--git&nbsp;a/mono/mini/mini.h&nbsp;b/mono/mini/mini.h&lt;br&gt;<br>
index&nbsp;dcf5a49..8d00ad4&nbsp;100644&lt;br&gt;<br>
---&nbsp;a/mono/mini/mini.h&lt;br&gt;<br>
+++&nbsp;b/mono/mini/mini.h&lt;br&gt;<br>
@@&nbsp;-2106,6&nbsp;+2106,9&nbsp;@@&nbsp;gboolean&nbsp;mono_gdb_render_native_backtraces&nbsp;(void)&nbsp;MONO_INTERNAL;&lt;br&gt;<br>
 #ifdef&nbsp;MONO_ARCH_USE_SIGACTION&lt;br&gt;<br>
 #define&nbsp;GET_CONTEXT&nbsp;\&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;void&nbsp;*ctx&nbsp;=&nbsp;context;&lt;br&gt;<br>
+#elif&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
+#define&nbsp;GET_CONTEXT&nbsp;\&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp;void&nbsp;*ctx&nbsp;=&nbsp;&amp;amp;regs;&lt;br&gt;<br>
 #else&lt;br&gt;<br>
 #define&nbsp;GET_CONTEXT&nbsp;\&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; void&nbsp;**_p&nbsp;=&nbsp;(void&nbsp;**)&amp;amp;_dummy;&nbsp;\&lt;br&gt;<br>
@@&nbsp;-2120,6&nbsp;+2123,9&nbsp;@@&nbsp;gboolean&nbsp;mono_gdb_render_native_backtraces&nbsp;(void)&nbsp;MONO_INTERNAL;&lt;br&gt;<br>
 #elif&nbsp;defined(HOST_WIN32)&lt;br&gt;<br>
 #define&nbsp;SIG_HANDLER_SIGNATURE(ftn)&nbsp;ftn&nbsp;(int&nbsp;_dummy,&nbsp;EXCEPTION_RECORD&nbsp;*info,&nbsp;void&nbsp;*context)&lt;br&gt;<br>
 #define&nbsp;SIG_HANDLER_PARAMS&nbsp;_dummy,&nbsp;info,&nbsp;context&lt;br&gt;<br>
+#elif&nbsp;defined(__HAIKU__)&lt;br&gt;<br>
+#define&nbsp;SIG_HANDLER_SIGNATURE(ftn)&nbsp;ftn&nbsp;(int&nbsp;_dummy,&nbsp;void&nbsp;*userData,&nbsp;vregs&nbsp;regs)&lt;br&gt;<br>
+#define&nbsp;SIG_HANDLER_PARAMS&nbsp;_dummy,&nbsp;userData,&nbsp;regs&lt;br&gt;<br>
 #else&lt;br&gt;<br>
 #define&nbsp;SIG_HANDLER_SIGNATURE(ftn)&nbsp;ftn&nbsp;(int&nbsp;_dummy)&lt;br&gt;<br>
 #define&nbsp;SIG_HANDLER_PARAMS&nbsp;_dummy&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;--&lt;br&gt;<br>
1.7.0.3&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
