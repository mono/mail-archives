<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;12pt;<br>
font-family:Calibri<br>
}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;stty&nbsp;sane&nbsp;make&nbsp;sense&nbsp;in&nbsp;terms&nbsp;of&nbsp;a&nbsp;TERM=linux&nbsp;and&nbsp;either&nbsp;a&nbsp;messed&nbsp;up/missing&nbsp;termcap&nbsp;and/or&nbsp;missing&nbsp;capabilities&nbsp;during&nbsp;autogen/configure&nbsp;and&nbsp;shell&nbsp;that&nbsp;is&nbsp;not&nbsp;quite&nbsp;right...&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;fact&nbsp;that&nbsp;the&nbsp;console.unix.c&nbsp;works&nbsp;across&nbsp;all&nbsp;the&nbsp;std&nbsp;linux&nbsp;flavors&nbsp;and&nbsp;os-x&nbsp;would&nbsp;suggest&nbsp;that&nbsp;something&nbsp;in&nbsp;your&nbsp;environment&nbsp;is&nbsp;different.&nbsp;Not&nbsp;sure&nbsp;what&nbsp;your&nbsp;'droid&nbsp;dev&nbsp;environment&nbsp;is&nbsp;like,&nbsp;but&nbsp;if&nbsp;you&nbsp;can&nbsp;build/debug&nbsp;mono,&nbsp;you&nbsp;can&nbsp;look&nbsp;at&nbsp;how&nbsp;it&nbsp;is&nbsp;init&nbsp;&amp;&nbsp;exiting&nbsp;in&nbsp;the&nbsp;app-domain.c/console-io.c/console-unix.c&nbsp;routines.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;should&nbsp;'just&nbsp;work',&nbsp;but&nbsp;that&nbsp;requires&nbsp;a&nbsp;very&nbsp;clean&nbsp;environment&nbsp;as&nbsp;Mono&nbsp;does&nbsp;an&nbsp;very&nbsp;generic&nbsp;(iffy&nbsp;IMHO)&nbsp;job&nbsp;of&nbsp;tty&nbsp;exiting&nbsp;(also&nbsp;init'ing).&nbsp;&nbsp;If&nbsp;you&nbsp;look&nbsp;at&nbsp;the&nbsp;ConsoleDriver&nbsp;the&nbsp;extent&nbsp;of&nbsp;the&nbsp;tty&nbsp;exit/teardown&nbsp;is&nbsp;'string'&nbsp;that&nbsp;is&nbsp;sent&nbsp;is&nbsp;a&nbsp;hardcoded&nbsp;DC1&nbsp;signal&nbsp;(0x11)&nbsp;which&nbsp;is&nbsp;Ctrl-Q&nbsp;(XON).&nbsp;You&nbsp;can&nbsp;browse&nbsp;the&nbsp;native&nbsp;driver&nbsp;function&nbsp;in&nbsp;console-unix.c,&nbsp;it&nbsp;is&nbsp;running&nbsp;on&nbsp;a&nbsp;gc'd&nbsp;thread,&nbsp;the&nbsp;std&nbsp;c&nbsp;lib&nbsp;function&nbsp;atexit&nbsp;is&nbsp;called&nbsp;with&nbsp;the&nbsp;tty&nbsp;teardown&nbsp;function&nbsp;and&nbsp;it&nbsp;does&nbsp;a&nbsp;very&nbsp;generic&nbsp;teardown&nbsp;(flushing&nbsp;the&nbsp;pipes&nbsp;and&nbsp;setting&nbsp;the&nbsp;ECHO&nbsp;env&nbsp;to&nbsp;true).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;this&nbsp;right&nbsp;or&nbsp;wrong?&nbsp;Depends&nbsp;upon&nbsp;who&nbsp;you&nbsp;ask&nbsp;;-)&nbsp;Programs&nbsp;written&nbsp;in&nbsp;python&nbsp;have&nbsp;this&nbsp;this&nbsp;issue&nbsp;all&nbsp;the&nbsp;time&nbsp;with&nbsp;using&nbsp;no&nbsp;echo&nbsp;tty&nbsp;mode&nbsp;and&nbsp;properly&nbsp;exiting,&nbsp;it&nbsp;is&nbsp;usually&nbsp;a&nbsp;threading&nbsp;issue,&nbsp;but&nbsp;hard&nbsp;to&nbsp;prevent.&nbsp;A&nbsp;lot&nbsp;of&nbsp;P-coders&nbsp;just&nbsp;place&nbsp;an&nbsp;os.system('stty&nbsp;sane')&nbsp;in&nbsp;their&nbsp;exit&nbsp;code,&nbsp;perl&nbsp;coders&nbsp;place&nbsp;system(&quot;stty&nbsp;sane&quot;);&nbsp;&nbsp;curses&nbsp;users&nbsp;should&nbsp;always&nbsp;use&nbsp;endwin();&nbsp;reset();&nbsp;to&nbsp;clean&nbsp;things&nbsp;up,&nbsp;etc...&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;fact&nbsp;that&nbsp;the&nbsp;console.unix.c&nbsp;works&nbsp;across&nbsp;all&nbsp;the&nbsp;std&nbsp;linux&nbsp;flavors&nbsp;and&nbsp;os-x&nbsp;would&nbsp;suggest&nbsp;that&nbsp;something&nbsp;in&nbsp;your&nbsp;environment&nbsp;is&nbsp;different.&nbsp;Not&nbsp;sure&nbsp;what&nbsp;your&nbsp;'droid&nbsp;dev&nbsp;environment&nbsp;is&nbsp;like,&nbsp;but&nbsp;if&nbsp;you&nbsp;can&nbsp;build/debug&nbsp;mono,&nbsp;you&nbsp;can&nbsp;look&nbsp;at&nbsp;how&nbsp;it&nbsp;is&nbsp;init&nbsp;&amp;&nbsp;exiting&nbsp;in&nbsp;the&nbsp;app-domain.c/console-io.c/console-unix.c&nbsp;routines.&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;hr&nbsp;id=&quot;stopSpelling&quot;&gt;From:&nbsp;chaselton@gmail.com&lt;br&gt;Date:&nbsp;Sat,&nbsp;6&nbsp;Jun&nbsp;2015&nbsp;19:39:16&nbsp;-0500&lt;br&gt;To:&nbsp;mono-devel-list@lists.ximian.com&lt;br&gt;Subject:&nbsp;Re:&nbsp;[Mono-dev]&nbsp;Terminal&nbsp;config&nbsp;for&nbsp;mono&nbsp;csharp&nbsp;shell?&lt;br&gt;&lt;br&gt;Additionally,&nbsp;running&nbsp;'stty&nbsp;sane'&nbsp;after&nbsp;exiting&nbsp;the&nbsp;REPL&nbsp;solves&nbsp;the&nbsp;problem.&nbsp;&nbsp;Maybe&nbsp;there&nbsp;is&nbsp;a&nbsp;way&nbsp;to&nbsp;set&nbsp;the&nbsp;REPL&nbsp;to&nbsp;run&nbsp;a&nbsp;command&nbsp;on&nbsp;quitting?&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;ecxgmail_quote&quot;&gt;On&nbsp;June&nbsp;6,&nbsp;2015&nbsp;8:04:47&nbsp;AM&nbsp;CDT,&nbsp;Cyd&nbsp;Haselton&nbsp;&lt;chaselton@gmail.com&gt;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;ecxgmail_quote&quot;&nbsp;style=&quot;border-left:1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);padding-left:1ex;&quot;&gt;<br>
Are&nbsp;there&nbsp;any&nbsp;special&nbsp;terminal&nbsp;and/or&nbsp;shell&nbsp;settings&nbsp;I&nbsp;should&nbsp;set&nbsp;for&nbsp;the&nbsp;csharp&nbsp;shell?&lt;br&gt;<br>
&lt;br&gt;<br>
csharp&nbsp;works&nbsp;okay...minus&nbsp;some&nbsp;cursor&nbsp;jumping...but&nbsp;after&nbsp;quitting&nbsp;the&nbsp;console&nbsp;shell&nbsp;behaves&nbsp;oddly&nbsp;until&nbsp;I&nbsp;exit&nbsp;it&nbsp;and&nbsp;re-enter.&lt;br&gt;<br>
&lt;br&gt;<br>
Example:&lt;br&gt;<br>
/home/kbox&nbsp;$&nbsp;csharp&lt;br&gt;<br>
Mono&nbsp;C#&nbsp;Shell,&nbsp;type&nbsp;&quot;help;&quot;&nbsp;for&nbsp;help&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
Enter&nbsp;statements&nbsp;below.&lt;br&gt;<br>
csharp&gt;&nbsp;DateTime.Now&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;06/06/2015&nbsp;13:00:31&lt;br&gt;<br>
csharp&gt;&nbsp;help&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Static&nbsp;methods:&lt;br&gt;<br>
&nbsp;&nbsp;Describe&nbsp;(object);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Describes&nbsp;the&nbsp;object's&nbsp;type&lt;br&gt;<br>
&nbsp;&nbsp;LoadPackage&nbsp;(package);&nbsp;&nbsp;&nbsp;-&nbsp;Loads&nbsp;the&nbsp;given&nbsp;Package&nbsp;(like&nbsp;-pkg:FILE)&lt;br&gt;<br>
&nbsp;&nbsp;LoadAssembly&nbsp;(assembly);&nbsp;-&nbsp;Loads&nbsp;the&nbsp;given&nbsp;assembly&nbsp;(like&nbsp;-r:ASSEMBLY)&lt;br&gt;<br>
&nbsp;&nbsp;ShowVars&nbsp;();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Shows&nbsp;defined&nbsp;local&nbsp;variables.&lt;br&gt;<br>
&nbsp;&nbsp;ShowUsing&nbsp;();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Show&nbsp;active&nbsp;using&nbsp;declarations.&lt;br&gt;<br>
&nbsp;&nbsp;Prompt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;prompt&nbsp;used&nbsp;by&nbsp;the&nbsp;C#&nbsp;shell&lt;br&gt;<br>
&nbsp;&nbsp;ContinuationPrompt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;prompt&nbsp;for&nbsp;partial&nbsp;input&lt;br&gt;<br>
&nbsp;&nbsp;Time&nbsp;(()&nbsp;=&gt;&nbsp;{&nbsp;});&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Times&nbsp;the&nbsp;specified&nbsp;code&lt;br&gt;<br>
&nbsp;&nbsp;print&nbsp;(obj);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Shorthand&nbsp;for&nbsp;Console.WriteLine&lt;br&gt;<br>
&nbsp;&nbsp;quit;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;You'll&nbsp;never&nbsp;believe&nbsp;it&nbsp;-&nbsp;this&nbsp;quits&nbsp;the&nbsp;repl!&lt;br&gt;<br>
&nbsp;&nbsp;help;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;This&nbsp;help&nbsp;text&lt;br&gt;<br>
&nbsp;&nbsp;TabAtStartCompletes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Whether&nbsp;tab&nbsp;will&nbsp;complete&nbsp;even&nbsp;on&nbsp;empty&nbsp;lines&lt;br&gt;<br>
&quot;&lt;br&gt;<br>
csharp&gt;&nbsp;quit&lt;br&gt;<br>
&lt;br&gt;<br>
Environment&nbsp;shell&nbsp;after&nbsp;quitting:&lt;br&gt;<br>
/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&nbsp;&gt;&nbsp;/data/data/jackpal.androidterm/kbox2/bin/bash:&nbsp;\:&nbsp;not&nbsp;found&lt;br&gt;<br>
/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&nbsp;/home/kbox&nbsp;$&lt;br&gt;<br>
&lt;br&gt;<br>
After&nbsp;exiting&nbsp;environment&nbsp;shell...you&nbsp;can't&nbsp;see&nbsp;the&nbsp;'exit'&nbsp;command&nbsp;I&nbsp;typed:&lt;br&gt;<br>
/home/kbox&nbsp;$&nbsp;127|u0_a186@altev:/&nbsp;$&lt;br&gt;<br>
127|u0_a186@altev:/&nbsp;$&lt;br&gt;<br>
127|u0_a186@altev:/&nbsp;$&lt;br&gt;<br>
127|u0_a186@altev:/&nbsp;$&lt;br&gt;<br>
127|u0_a186@altev:/&nbsp;$&lt;br&gt;<br>
&lt;br&gt;<br>
Re-entering&nbsp;the&nbsp;environment&nbsp;shell:&lt;br&gt;<br>
127|u0_a186@altev:/&nbsp;$&nbsp;/data/data/jackpal.androidterm/kbox2/bin/kbox_shell&lt;br&gt;<br>
/home/kbox&nbsp;$&lt;br&gt;<br>
/home/kbox&nbsp;$&lt;br&gt;<br>
/home/kbox&nbsp;$&lt;br&gt;<br>
/home/kbox&nbsp;$&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Sent&nbsp;from&nbsp;my&nbsp;Android&nbsp;device&nbsp;with&nbsp;K-9&nbsp;Mail.&nbsp;Please&nbsp;excuse&nbsp;my&nbsp;brevity.&lt;br&gt;_______________________________________________<br>
Mono-devel-list&nbsp;mailing&nbsp;list<br>
Mono-devel-list@lists.ximian.com<br>
http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/div&gt;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
