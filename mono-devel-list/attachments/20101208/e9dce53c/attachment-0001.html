<tt>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Dec&nbsp;7,&nbsp;2010&nbsp;at&nbsp;10:13&nbsp;AM,&nbsp;Martin&nbsp;Däumler&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mdae@cs.tu-chemnitz.de&quot;&gt;mdae@cs.tu-chemnitz.de&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;07.12.10&nbsp;10:54,&nbsp;Robert&nbsp;Jordan&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;07.12.2010&nbsp;08:52,&nbsp;Martin&nbsp;Däumler&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&amp;gt;&amp;gt;&nbsp;I&nbsp;expected&nbsp;a&nbsp;delegate&nbsp;trampoline&nbsp;to&nbsp;be&nbsp;executed&nbsp;only&nbsp;once&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;like&nbsp;&amp;quot;common&amp;quot;&nbsp;JIT&nbsp;trampolines&nbsp;for&nbsp;a&nbsp;single&nbsp;call&nbsp;instruction.&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;However,&nbsp;it&nbsp;might&nbsp;be&nbsp;executed&nbsp;twice.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;It&nbsp;could&nbsp;be&nbsp;related&nbsp;to&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;code&nbsp;behind&lt;br&gt;<br>
&amp;gt;&nbsp;Thread.Start&nbsp;()&nbsp;is&nbsp;eventually&nbsp;calling&nbsp;delegate&amp;#39;s&nbsp;Invoke&lt;br&gt;<br>
&amp;gt;&nbsp;method&nbsp;via&nbsp;mono_runtime_invoke&nbsp;().&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
thank&nbsp;you&nbsp;for&nbsp;the&nbsp;answer.&nbsp;As&nbsp;you&nbsp;say,&nbsp;the&nbsp;delegate&nbsp;trampoline&nbsp;is&lt;br&gt;<br>
called&nbsp;a&nbsp;second&nbsp;time&nbsp;through&nbsp;mono_runtime_invoke().&nbsp;So&nbsp;I&nbsp;want&nbsp;to&lt;br&gt;<br>
know&nbsp;if&nbsp;there&nbsp;might&nbsp;be&nbsp;other&nbsp;trampoline&nbsp;types&nbsp;that&nbsp;might&nbsp;be&lt;br&gt;<br>
called&nbsp;a&nbsp;second&nbsp;time.&lt;br&gt;<br>
&lt;br&gt;<br>
A&nbsp;simple&nbsp;JIT&nbsp;trampoline&nbsp;patches&nbsp;the&nbsp;callsite&nbsp;so&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&lt;br&gt;<br>
that&nbsp;this&nbsp;JIT&nbsp;trampoline&nbsp;is&nbsp;called&nbsp;from&nbsp;that&nbsp;memory&nbsp;address.&nbsp;But&lt;br&gt;<br>
obviously,&nbsp;this&nbsp;does&nbsp;not&nbsp;hold&nbsp;for&nbsp;delegate&nbsp;trampolines.&lt;br&gt;<br>
&lt;br&gt;<br>
So,&nbsp;I&nbsp;want&nbsp;to&nbsp;know,&nbsp;if&nbsp;there&nbsp;are&nbsp;other&nbsp;trampoline&nbsp;types&nbsp;that&nbsp;might&lt;br&gt;<br>
be&nbsp;called&nbsp;a&nbsp;second&nbsp;time&nbsp;in&nbsp;that&nbsp;way? &lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Quite&nbsp;a&nbsp;few&nbsp;trampolines&nbsp;are&nbsp;not&nbsp;patchable.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Direct&nbsp;method&nbsp;delegates&nbsp;trampolines&nbsp;have&nbsp;a&nbsp;per&nbsp;callsite&lt;/div&gt;&lt;div&gt;cache&nbsp;of&nbsp;the&nbsp;target&nbsp;method&nbsp;to&nbsp;speedup&nbsp;the&nbsp;trampoline&nbsp;invocation&lt;/div&gt;<br>
&lt;div&gt;with&nbsp;is&nbsp;per-instance&nbsp;(eg,&nbsp;only&nbsp;the&nbsp;first&nbsp;call&nbsp;takes&nbsp;the&nbsp;tram).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Virtual&nbsp;method&nbsp;delegates&nbsp;are&nbsp;only&nbsp;done&nbsp;one&nbsp;per&nbsp;instance&nbsp;but&nbsp;don&amp;#39;t&lt;/div&gt;&lt;div&gt;feature&nbsp;the&nbsp;per&nbsp;callsite&nbsp;cache&nbsp;for&nbsp;obvious&nbsp;reasons.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;generic&nbsp;sharing&nbsp;context&nbsp;fetch&nbsp;trampolines&nbsp;can&amp;#39;t&nbsp;be&nbsp;patched&nbsp;out&lt;/div&gt;&lt;div&gt;since&nbsp;they&nbsp;are&nbsp;context&nbsp;dependant.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Class&nbsp;init&nbsp;trampolines&nbsp;are&nbsp;not,&nbsp;in&nbsp;some&nbsp;generic corner cases,&nbsp;patchable&lt;/div&gt;<br>
&lt;div&gt;using the&nbsp;rgctx&nbsp;fetch&nbsp;machinery.&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;Monitor&nbsp;enter/exit&nbsp;and&nbsp;generic&nbsp;virtual&nbsp;remoting&nbsp;are&nbsp;also&nbsp;obviously&nbsp;not&nbsp;patchable.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;only&nbsp;case&nbsp;of&nbsp;patchable&nbsp;trampolines&nbsp;that&nbsp;we&nbsp;miss&nbsp;is&nbsp;indeed&nbsp;for&nbsp;direct&nbsp;method&nbsp;delegates.&lt;/div&gt;<br>
&lt;div&gt;It&nbsp;is&nbsp;somewhat&nbsp;easy&nbsp;to&nbsp;implement&nbsp;such&nbsp;thing&nbsp;if&nbsp;you&nbsp;desire.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Virtual&nbsp;method&nbsp;delegates&nbsp;creation/first&nbsp;invocation&nbsp;could&nbsp;be&nbsp;speedup&nbsp;if&nbsp;one&nbsp;wanted&nbsp;to&nbsp;spend&nbsp;time&lt;/div&gt;&lt;div&gt;on&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;There&nbsp;are&nbsp;other&nbsp;parts&nbsp;of&nbsp;the&nbsp;runtime&nbsp;that&nbsp;require&nbsp;proper&nbsp;warm&nbsp;up/AOT&nbsp;for&nbsp;what&nbsp;you&nbsp;want:&nbsp;IMT&nbsp;slots,&lt;/div&gt;&lt;div&gt;virtual&nbsp;generic&nbsp;methods&nbsp;and&nbsp;variant&nbsp;type&nbsp;dispatch&nbsp;slots.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
