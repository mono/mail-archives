using System;
using System.IO;
using System.Text.RegularExpressions;

class Test {
	static void Main(string[] args) {
		int loops = int.Parse(args[0]);	
	
		string text = File.OpenText(args[1]).ReadToEnd();
		string str = args[2];

		if (args.Length == 4) {
			text = text.Replace("e", "\x0411\x04AA").Replace("o", "\x02A0\x03E0");
			str = str.Replace("e", "\x0411\x04AA").Replace("o", "\x02A0\x03E0");
			Console.WriteLine("Characters 'e' and 'o' replaced by '\x0411\x04AA' and '\x02A0\x03E0'");
		}

		Regex regex = new Regex(str);

		long ticks = DateTime.Now.Ticks;
		MatchCollection mc = null;		
		for(int i = 0; i < loops; i++)		
			 mc = regex.Matches(text);
			 
		int ticksPerLoop = (int)((DateTime.Now.Ticks - ticks) / loops);
		
		Console.WriteLine("Matches: {0}", mc.Count);
		Console.WriteLine("Ticks/run: {0}", ticksPerLoop);
	}
}