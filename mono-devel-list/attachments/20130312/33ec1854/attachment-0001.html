<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=us-ascii&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;an&nbsp;application&nbsp;that&nbsp;uses&nbsp;a&nbsp;NetworkStream&nbsp;on&nbsp;a&nbsp;Socket&nbsp;and&nbsp;has&nbsp;a&nbsp;loop&nbsp;vaguely&nbsp;like&nbsp;(I&nbsp;am&nbsp;decomposing&nbsp;more&nbsp;abstract&nbsp;calls&nbsp;here):&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;while&nbsp;(some&nbsp;condition)&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;var&nbsp;n&nbsp;=&nbsp;stream.Read&nbsp;(buffer,&nbsp;0,&nbsp;len);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;do&nbsp;something&nbsp;with&nbsp;buffer&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;odd&nbsp;thing&nbsp;is&nbsp;that&nbsp;sometimes&nbsp;Read()&nbsp;returns&nbsp;0,&nbsp;even&nbsp;when&nbsp;the&nbsp;stream&nbsp;is&nbsp;clearly&nbsp;not&nbsp;closed.&nbsp;&nbsp;I&nbsp;verified&nbsp;this&nbsp;by&nbsp;looping&nbsp;until&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;in&nbsp;a&nbsp;reproducable&nbsp;situation.&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;on&nbsp;a&nbsp;synchronous&nbsp;socket,&nbsp;so&nbsp;returning&nbsp;0&nbsp;should&nbsp;only&nbsp;happen&nbsp;when&nbsp;we&nbsp;hit&nbsp;the&nbsp;end&nbsp;of&nbsp;stream.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;not&nbsp;set&nbsp;the&nbsp;stream&nbsp;to&nbsp;be&nbsp;non-blocking&nbsp;and&nbsp;this&nbsp;is&nbsp;a&nbsp;synchronous&nbsp;operation.&nbsp;&nbsp;Is&nbsp;there&nbsp;any&nbsp;reason&nbsp;why&nbsp;I&nbsp;should&nbsp;ever&nbsp;get&nbsp;0&nbsp;back&nbsp;aside&nbsp;from&nbsp;connection&nbsp;closure&nbsp;/&nbsp;loss?&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Note&nbsp;that&nbsp;I&nbsp;am&nbsp;using&nbsp;3.0.2&nbsp;on&nbsp;OSX.&nbsp;&nbsp;[&nbsp;3.0.3&nbsp;and&nbsp;up&nbsp;has&nbsp;a&nbsp;bug&nbsp;in&nbsp;Socket_2_1.cs&nbsp;which&nbsp;I&nbsp;posted&nbsp;(and&nbsp;posted&nbsp;a&nbsp;patch)&nbsp;3&nbsp;months&nbsp;ago.&nbsp;&nbsp;&nbsp;I&nbsp;cannot&nbsp;upgrade&nbsp;my&nbsp;mono&nbsp;runtime&nbsp;until&nbsp;that&nbsp;is&nbsp;fixed.&nbsp;&nbsp;&nbsp;Bug&nbsp;&lt;a&nbsp;href=&quot;https://bugzilla.xamarin.com/show_bug.cgi?id=9520&quot;&gt;9520&lt;/a&gt;&nbsp;BTW:&nbsp;]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;any&nbsp;pointers&lt;/div&gt;&lt;div&gt;Jonathan&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
