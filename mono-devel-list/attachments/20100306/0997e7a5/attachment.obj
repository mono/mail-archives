Index: class/System.ServiceModel.Web/Test/config/webHttpBinding.config
===================================================================
--- class/System.ServiceModel.Web/Test/config/webHttpBinding.config	(revision 153009)
+++ class/System.ServiceModel.Web/Test/config/webHttpBinding.config	(working copy)
@@ -1,26 +1,33 @@
 <?xml version="1.0" encoding="utf-8" ?>
 <configuration>
-  <system.serviceModel>
-      <bindings>
-        <webHttpBinding>
-          <binding name="WebHttpBinding1_Service"
-          	allowCookies="true"
-          	bypassProxyOnLocal="true"
-          	hostNameComparisonMode="Exact"
-          	maxBufferPoolSize="262144"
-          	maxBufferSize="32768"
-          	maxReceivedMessageSize="16384"
-          	proxyAddress="proxy"
-          	writeEncoding="unicode"
-          	transferMode="streamed">
-            <security mode="TransportCredentialOnly">
-              <transport 
-              	clientCredentialType="Basic"
-              	proxyCredentialType="NTLM"
-              	realm="realm" />
-            </security>
-          </binding>
-        </webHttpBinding>
-      </bindings>
-    </system.serviceModel>
+	<system.serviceModel>
+		<bindings>
+			<webHttpBinding>
+				<binding name="WebHttpBinding1_Service"
+					allowCookies="true"
+					bypassProxyOnLocal="true"
+					hostNameComparisonMode="Exact"
+					maxBufferPoolSize="262144"
+					maxBufferSize="32768"
+					maxReceivedMessageSize="16384"
+					proxyAddress="proxy"
+					writeEncoding="unicode"
+					transferMode="streamed">
+					
+					<security mode="TransportCredentialOnly">
+						<transport 
+							clientCredentialType="Basic"
+							proxyCredentialType="NTLM"
+							realm="realm" />
+					</security>
+					<readerQuotas
+						maxArrayLength="8192"
+						maxBytesPerRead="2048"
+						maxDepth="16"
+						maxNameTableCharCount="8192"
+						maxStringContentLength="4096" />
+				</binding>
+			</webHttpBinding>
+		</bindings>
+	</system.serviceModel>
 </configuration>
\ No newline at end of file
Index: class/System.ServiceModel.Web/Test/System.ServiceModel.Configuration/WebHttpBindingElementTest.cs
===================================================================
--- class/System.ServiceModel.Web/Test/System.ServiceModel.Configuration/WebHttpBindingElementTest.cs	(revision 153009)
+++ class/System.ServiceModel.Web/Test/System.ServiceModel.Configuration/WebHttpBindingElementTest.cs	(working copy)
@@ -48,9 +48,19 @@
 			WebHttpBinding b = CreateBindingFromConfig ();
 			Assert.AreEqual (WebHttpSecurityMode.TransportCredentialOnly, b.Security.Mode, "#1");
 			Assert.AreEqual (HttpClientCredentialType.Basic, b.Security.Transport.ClientCredentialType, "#2");
-			
 		}
 		
+		[Test]
+		public void Quotas ()
+		{
+			WebHttpBinding b = CreateBindingFromConfig ();
+			Assert.AreEqual (8192, b.ReaderQuotas.MaxArrayLength, "#1");
+			Assert.AreEqual (2048, b.ReaderQuotas.MaxBytesPerRead, "#2");
+			Assert.AreEqual (16, b.ReaderQuotas.MaxDepth, "#3");
+			Assert.AreEqual (8192, b.ReaderQuotas.MaxNameTableCharCount, "#4");
+			Assert.AreEqual (4096, b.ReaderQuotas.MaxStringContentLength, "#5");
+		}
+		
 		private WebHttpBinding CreateBindingFromConfig ()
 		{
 			ServiceModelSectionGroup config = (ServiceModelSectionGroup) ConfigurationManager.OpenExeConfiguration ("Test/config/webHttpBinding").GetSectionGroup ("system.serviceModel");
Index: class/System.ServiceModel.Web/Test/System.ServiceModel.Configuration/ChangeLog
===================================================================
--- class/System.ServiceModel.Web/Test/System.ServiceModel.Configuration/ChangeLog	(revision 153009)
+++ class/System.ServiceModel.Web/Test/System.ServiceModel.Configuration/ChangeLog	(working copy)
@@ -1,3 +1,7 @@
+2010-03-03  Sander Rijken  <sr@d-90.nl>
+	* WebHttpBindingElementTest.cs : Add tests for 
+	  XmlDictionaryReaderQuotas parsing
+
 2010-03-01  Sander Rijken  <sr@d-90.nl>
 
 	* WebHttpBindingElementTest.cs : new test.
Index: class/System.ServiceModel.Web/System.ServiceModel/WebHttpBinding.cs
===================================================================
--- class/System.ServiceModel.Web/System.ServiceModel/WebHttpBinding.cs	(revision 153009)
+++ class/System.ServiceModel.Web/System.ServiceModel/WebHttpBinding.cs	(working copy)
@@ -60,7 +60,7 @@
 			throw new NotImplementedException ();
 		}
 
-		XmlDictionaryReaderQuotas quotas;
+		XmlDictionaryReaderQuotas quotas = new XmlDictionaryReaderQuotas ();
 		WebHttpSecurity security = new WebHttpSecurity ();
 		Encoding write_encoding = Encoding.UTF8;
 		HttpTransportBindingElement t;
Index: class/System.ServiceModel.Web/System.ServiceModel.Configuration/WebHttpBindingElement.cs
===================================================================
--- class/System.ServiceModel.Web/System.ServiceModel.Configuration/WebHttpBindingElement.cs	(revision 153009)
+++ class/System.ServiceModel.Web/System.ServiceModel.Configuration/WebHttpBindingElement.cs	(working copy)
@@ -274,7 +274,22 @@
 			webBinding.WriteEncoding = WriteEncoding;
 
 			Security.ApplyConfiguration(webBinding.Security);
+			ApplyReaderQuotas(webBinding.ReaderQuotas, ReaderQuotas);
 		}
+
+		static void ApplyReaderQuotas(XmlDictionaryReaderQuotas quotas, XmlDictionaryReaderQuotasElement quotasElement)
+		{
+			if (quotasElement.MaxArrayLength > 0)
+				quotas.MaxArrayLength = quotasElement.MaxArrayLength;
+			if (quotasElement.MaxBytesPerRead > 0)
+				quotas.MaxBytesPerRead = quotasElement.MaxBytesPerRead;
+			if (quotasElement.MaxDepth > 0)
+				quotas.MaxDepth = quotasElement.MaxDepth;
+			if (quotasElement.MaxNameTableCharCount > 0)
+				quotas.MaxNameTableCharCount = quotasElement.MaxNameTableCharCount;
+			if (quotasElement.MaxStringContentLength > 0)
+				quotas.MaxStringContentLength = quotasElement.MaxStringContentLength;
+		}
 	}
 
 }