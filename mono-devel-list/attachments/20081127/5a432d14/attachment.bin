using System;
using System.Drawing;

namespace MeasureCharacterRanges
{
    class Program
    {
        static void Main(string[] args)
        {
            string text = "abc";
            Graphics gfx = Graphics.FromImage(new Bitmap(1, 1));
            StringFormat format = StringFormat.GenericTypographic;
            Font font = new Font(FontFamily.GenericSerif, 11.0f);

            RectangleF empty_rect = RectangleF.Empty;
            RectangleF nonempty_rect = new RectangleF(0, 0, 100, 100);

            CharacterRange[] ranges = new CharacterRange[]
                {
                    new CharacterRange(0, 1),
                    new CharacterRange(1, 1),
                    new CharacterRange(2, 1)
                };

            format.SetMeasurableCharacterRanges(ranges);

            Console.WriteLine("Using rectangle {0}:", nonempty_rect);
            foreach (Region r in gfx.MeasureCharacterRanges(text, font, nonempty_rect, format))
                Console.WriteLine("{0}", r.GetBounds(gfx));

            Console.WriteLine();
            Console.WriteLine("Using rectangle {0}:", empty_rect);
            foreach (Region r in gfx.MeasureCharacterRanges(text, font, empty_rect, format))
                Console.WriteLine("{0}", r.GetBounds(gfx));

            Console.WriteLine();
        }
    }
}
