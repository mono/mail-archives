<tt>
Please&nbsp;find&nbsp;the&nbsp;attached&nbsp;unit&nbsp;test.&nbsp;It&nbsp;consists&nbsp;of&nbsp;2&nbsp;encryptions&nbsp;followed&nbsp;by&nbsp;two&nbsp;decryptions&nbsp;(CBC,&nbsp;default&nbsp;padding).&nbsp;I&nbsp;couldn&amp;#39;t&nbsp;check&nbsp;the&nbsp;result&nbsp;under&nbsp;Mono&nbsp;since&nbsp;I&nbsp;didn&amp;#39;t&nbsp;compile&nbsp;the&nbsp;latests&nbsp;release,&nbsp;so&nbsp;I&nbsp;let&nbsp;you&nbsp;open&nbsp;the&nbsp;bug&nbsp;if&nbsp;any.<br>
&lt;br&gt;&lt;br&gt;Lauren.&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;2007/1/6,&nbsp;Sebastien&nbsp;Pouliot&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:sebastien.pouliot@gmail.com&quot;&gt;sebastien.pouliot@gmail.com&lt;/a&gt;&amp;gt;:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Hello&nbsp;Lauren,&lt;br&gt;&lt;br&gt;On&nbsp;Sat,&nbsp;2007-01-06&nbsp;at&nbsp;11:57&nbsp;+0100,&nbsp;Lauren&nbsp;Del&nbsp;Giudice&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;Sebastien,&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Concerning&nbsp;the&nbsp;closed&nbsp;bug&nbsp;80439,&nbsp;rev70491;&lt;br&gt;&amp;gt;&nbsp;By&nbsp;reducing&nbsp;the&nbsp;input&nbsp;count,&nbsp;you&nbsp;will&nbsp;loose&nbsp;the&nbsp;last&nbsp;block&nbsp;for&nbsp;next<br>
&lt;br&gt;&amp;gt;&nbsp;decryption.&nbsp;You&nbsp;first&nbsp;decryption&nbsp;will&nbsp;succeed,&nbsp;but&nbsp;the&nbsp;next&nbsp;one&nbsp;will&lt;br&gt;&amp;gt;&nbsp;fail.&lt;br&gt;&lt;br&gt;Yes...&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;Test&nbsp;it&nbsp;and&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;it&nbsp;succeeds:&lt;br&gt;&lt;br&gt;but&nbsp;unit&nbsp;tests&nbsp;(added&nbsp;in&nbsp;r70493)&nbsp;shows&nbsp;that,&nbsp;under&nbsp;MS,&nbsp;the&nbsp;next<br>
&lt;br&gt;decryption&nbsp;fails.&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;Let&nbsp;say&nbsp;you&nbsp;decrypt&nbsp;56&nbsp;bytes&nbsp;(CBC,&nbsp;default&nbsp;padding),&nbsp;you&nbsp;will&nbsp;obtain&lt;br&gt;&amp;gt;&nbsp;48&nbsp;bytes.&nbsp;Iterate&nbsp;and&nbsp;obtain&nbsp;again&nbsp;48&nbsp;bytes.&nbsp;The&nbsp;last&nbsp;48&nbsp;bytes&nbsp;will&lt;br&gt;&amp;gt;&nbsp;depend&nbsp;on&nbsp;the&nbsp;buffered&nbsp;block&nbsp;from&nbsp;the&nbsp;first&nbsp;decryption.<br>
&lt;br&gt;&lt;br&gt;Please&nbsp;provide&nbsp;a&nbsp;(working&nbsp;on&nbsp;MS&nbsp;runtime&nbsp;/&nbsp;failing&nbsp;under&nbsp;Mono)&nbsp;test&nbsp;case,&lt;br&gt;mine&nbsp;simply&nbsp;fails&nbsp;in&nbsp;this&nbsp;case,&nbsp;and&nbsp;attach&nbsp;it&nbsp;to&nbsp;a&nbsp;new&nbsp;bug&nbsp;report.&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;When&nbsp;you&nbsp;decrypt&nbsp;from&nbsp;56&nbsp;bytes&nbsp;and&nbsp;obtain&nbsp;48&nbsp;bytes,&nbsp;there&nbsp;is&nbsp;no<br>
&lt;br&gt;&amp;gt;&nbsp;critical&nbsp;issue&nbsp;(well&nbsp;don&amp;#39;t&nbsp;consider&nbsp;memory&nbsp;as&nbsp;a&nbsp;critical&nbsp;issue&nbsp;for&nbsp;a&lt;br&gt;&amp;gt;&nbsp;moment),&nbsp;since&nbsp;you&nbsp;don&amp;#39;t&nbsp;really&nbsp;throw&nbsp;the&nbsp;last&nbsp;decrypted&nbsp;block&nbsp;but&lt;br&gt;&amp;gt;&nbsp;rather&nbsp;you&nbsp;have&nbsp;to&nbsp;buffer&nbsp;it.&lt;br&gt;&amp;gt;&nbsp;This&nbsp;buffered&nbsp;decrypted&nbsp;block&nbsp;will&nbsp;be&nbsp;injected&nbsp;at&nbsp;the&nbsp;next&nbsp;decryption<br>
&lt;br&gt;&amp;gt;&nbsp;process,&nbsp;in&nbsp;the&nbsp;output&nbsp;array&nbsp;as&nbsp;the&nbsp;first&nbsp;block.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;And&nbsp;also,&nbsp;watch&nbsp;out&nbsp;with&nbsp;overlapping&nbsp;input/output...&lt;br&gt;&lt;br&gt;That&nbsp;was&nbsp;an&nbsp;issue&nbsp;long&nbsp;ago&nbsp;(before&nbsp;SymmetricalTransform)&nbsp;but&nbsp;now&nbsp;data&nbsp;is&lt;br&gt;copied.&nbsp;Again&nbsp;if&nbsp;you&nbsp;have&nbsp;a&nbsp;specific&nbsp;issue&nbsp;please&nbsp;provide&nbsp;a&nbsp;test&nbsp;case.<br>
&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;HTH.&lt;br&gt;&amp;gt;&nbsp;Lauren.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;_______________________________________________&lt;br&gt;&amp;gt;&nbsp;Mono-devel-list&nbsp;mailing&nbsp;list&lt;br&gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Mono-devel-list@lists.ximian.com&quot;&gt;Mono-devel-list@lists.ximian.com<br>
&lt;/a&gt;&lt;br&gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ximian.com/mailman/listinfo/mono-devel-list&quot;&gt;http://lists.ximian.com/mailman/listinfo/mono-devel-list&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
