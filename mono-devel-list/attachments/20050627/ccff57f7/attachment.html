<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.2800.1505&quot;&nbsp;name=GENERATOR&gt;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Good&nbsp;day.&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;I've&nbsp;started&nbsp;using&nbsp;Syscall.syslog&nbsp;method&nbsp;and&nbsp;<br>
encounted&nbsp;several&nbsp;problems.&nbsp;It&nbsp;may&nbsp;be&nbsp;error&lt;SPAN&nbsp;<br>
class=234013414-27062005&gt;s&lt;/SPAN&gt;&nbsp;in&nbsp;mono,&nbsp;or&nbsp;I&nbsp;just&nbsp;missed&nbsp;some&nbsp;details.&nbsp;Please&nbsp;<br>
note,&nbsp;that&nbsp;I&nbsp;use&nbsp;Suse&nbsp;9.2&nbsp;linux&nbsp;distribute.&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;1.&nbsp;In&nbsp;Syscall.cs&nbsp;enumeration&nbsp;SyslogFacility&nbsp;declared&nbsp;<br>
with&nbsp;members:&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;LOG_UUCP&nbsp;=&nbsp;8&nbsp;&amp;lt;&amp;lt;&nbsp;3,&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;LOG_CRON&nbsp;=&nbsp;8&nbsp;&amp;lt;&amp;lt;&nbsp;3&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;But&nbsp;under&nbsp;Suse&nbsp;the&nbsp;same&nbsp;constants&nbsp;declared&nbsp;in&nbsp;<br>
/usr/include/sys/syslog.h&nbsp;as&nbsp;LOG_UUCP&nbsp;=&nbsp;8&nbsp;&amp;lt;&amp;lt;&nbsp;3,&nbsp;LOG_CRON&nbsp;=&nbsp;9&nbsp;&amp;lt;&amp;lt;&nbsp;<br>
3&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Is&nbsp;it&nbsp;bug&nbsp;in&nbsp;mono&nbsp;or&nbsp;it&nbsp;worked&nbsp;for&nbsp;some&nbsp;other&nbsp;<br>
platforms?&nbsp;I'm&nbsp;going&nbsp;to&nbsp;fix&nbsp;it&nbsp;in&nbsp;mono&nbsp;for&nbsp;myself...&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;2.&nbsp;There&nbsp;is&nbsp;no&nbsp;constant&nbsp;LOG_USRE&nbsp;in&nbsp;syslog.h&nbsp;under&nbsp;<br>
Suse,&nbsp;but&nbsp;it's&nbsp;LOG_USER.&nbsp;So,&nbsp;in&nbsp;support/map.c&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;(?)&nbsp;-&nbsp;no&nbsp;such&nbsp;<br>
definition&nbsp;found&nbsp;and&nbsp;error&nbsp;returned&nbsp;then&nbsp;code&nbsp;execution&nbsp;steps&nbsp;in&nbsp;this&nbsp;branch.&nbsp;<br>
The&nbsp;question&nbsp;is&nbsp;the&nbsp;same:&nbsp;is&nbsp;it&nbsp;mono&nbsp;problem,&nbsp;or&nbsp;Suse-platform&nbsp;specific&nbsp;header&nbsp;<br>
file?&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;3.&nbsp;It&nbsp;seems&nbsp;very&nbsp;strange&nbsp;that&nbsp;SyslogFacility&nbsp;<br>
enumeration&nbsp;declared&nbsp;with&nbsp;[Flag]&nbsp;attribute.&nbsp;Members&nbsp;of&nbsp;this&nbsp;enumeration&nbsp;are&nbsp;not&nbsp;<br>
&quot;powers&nbsp;of&nbsp;2&quot;,&nbsp;so&nbsp;their&nbsp;combination&nbsp;via&nbsp;OR-mask&nbsp;is&nbsp;something&nbsp;incorrect.&nbsp;And&nbsp;<br>
these&nbsp;constants&nbsp;should&nbsp;be&nbsp;used&nbsp;independantly,&nbsp;not&nbsp;in&nbsp;combination.&nbsp;Is&nbsp;it&nbsp;true&nbsp;or&nbsp;<br>
I&nbsp;missed&nbsp;something?&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;4.&nbsp;In&nbsp;Mono_Posix_FromSyslogFacility&nbsp;in&nbsp;support/map.c&nbsp;<br>
constants&nbsp;from&nbsp;SyslogFacility&nbsp;interpreted&nbsp;as&nbsp;flags&nbsp;-&nbsp;they&nbsp;checked&nbsp;with&nbsp;OR-mask.&nbsp;<br>
It's&nbsp;incorrect&nbsp;as&nbsp;I&nbsp;understand,&nbsp;but&nbsp;more&nbsp;then&nbsp;it,&nbsp;there&nbsp;is&nbsp;such&nbsp;<br>
branch:&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;if&nbsp;((x&nbsp;&amp;amp;&nbsp;Mono_Posix_SyslogFacility_LOG_USRE)&nbsp;==&nbsp;<br>
Mono_Posix_SyslogFacility_LOG_USRE)&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;#ifdef&nbsp;LOG_USRE&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;*r&nbsp;|=&nbsp;LOG_USRE;&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;#else&nbsp;/*&nbsp;def&nbsp;LOG_USRE&nbsp;*/&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;{errno&nbsp;=&nbsp;EINVAL;&nbsp;return&nbsp;-1;}&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;#endif&nbsp;/*&nbsp;ndef&nbsp;LOG_USRE&nbsp;*/&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;This&nbsp;is&nbsp;combination&nbsp;of&nbsp;2)&nbsp;and&nbsp;3)&nbsp;issues.&nbsp;First&nbsp;of&nbsp;<br>
all,&nbsp;undefined&nbsp;macro&nbsp;LOG_USRE&nbsp;always&nbsp;runs&nbsp;to&nbsp;error&nbsp;return.&nbsp;The&nbsp;second&nbsp;one,&nbsp;that&nbsp;<br>
Mono_Posix_SyslogFacility_LOG_USRE&nbsp;declared&nbsp;as&nbsp;follows:&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;#define&nbsp;Mono_Posix_SyslogFacility_LOG_USRE&nbsp;<br>
0x00000008&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;This&nbsp;means,&nbsp;that&nbsp;branch&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;if&nbsp;((x&nbsp;&amp;amp;&nbsp;Mono_Posix_SyslogFacility_LOG_USRE)&nbsp;==&nbsp;<br>
Mono_Posix_SyslogFacility_LOG_USRE)&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;will&nbsp;becomes&nbsp;true&nbsp;for&nbsp;all&nbsp;constants&nbsp;like&nbsp;#define&nbsp;<br>
Mono_Posix_SyslogFacility_LOG_DAEMON&nbsp;0x00000018&nbsp;#define&nbsp;<br>
Mono_Posix_SyslogFacility_LOG_SYSLOG&nbsp;0x00000028&nbsp;...etc&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;And&nbsp;it&nbsp;always&nbsp;will&nbsp;generate&nbsp;error&nbsp;for&nbsp;<br>
Suse.&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;I'm&nbsp;ready&nbsp;to&nbsp;fix&nbsp;these&nbsp;issues&nbsp;and&nbsp;supply&nbsp;the&nbsp;patch.&nbsp;<br>
Is&nbsp;it&nbsp;OK&nbsp;to&nbsp;change&nbsp;SyslogFacility&nbsp;enumeration&nbsp;to&nbsp;simple&nbsp;enum,&nbsp;not&nbsp;flags?&nbsp;Is&nbsp;it&nbsp;<br>
OK&nbsp;to&nbsp;assume,&nbsp;that&nbsp;LOG_USRE&nbsp;is&nbsp;LOG_USER&nbsp;in&nbsp;real&nbsp;for&nbsp;all&nbsp;platforms?&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Is&nbsp;it&nbsp;good&nbsp;to&nbsp;change&nbsp;declaration&nbsp;of&nbsp;LOG_UUCP&nbsp;and&nbsp;<br>
LOG_CRON&nbsp;as&nbsp;LOG_UUCP&nbsp;=&nbsp;8&nbsp;&amp;lt;&amp;lt;&nbsp;3,&nbsp;LOG_CRON&nbsp;=&nbsp;9&nbsp;&amp;lt;&amp;lt;&nbsp;3&nbsp;?&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;face=Arial&gt;&lt;FONT&nbsp;size=2&gt;Thank&nbsp;you&lt;SPAN&nbsp;<br>
class=234013414-27062005&gt;.&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
