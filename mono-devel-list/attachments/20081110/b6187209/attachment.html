<tt>
Hi&nbsp;Russel,&lt;br&gt;&lt;br&gt;Our&nbsp;initial&nbsp;goal&nbsp;is&nbsp;to&nbsp;make&nbsp;simd&nbsp;instructions&nbsp;available&nbsp;to&nbsp;managed&nbsp;code.&lt;br&gt;At&nbsp;first&nbsp;we&nbsp;thought&nbsp;about&nbsp;trying&nbsp;to&nbsp;make&nbsp;an&nbsp;instruction&nbsp;set&nbsp;agnostic&nbsp;library,&nbsp;but&lt;br&gt;there&nbsp;are&nbsp;way&nbsp;too&nbsp;many&nbsp;quirks&nbsp;and&nbsp;differences&nbsp;between&nbsp;them&nbsp;that&nbsp;the&nbsp;result&lt;br&gt;<br>
could&nbsp;be&nbsp;too&nbsp;crippled&nbsp;to&nbsp;be&nbsp;usable.&lt;br&gt;&lt;br&gt;There&nbsp;are&nbsp;quite&nbsp;many&nbsp;valid&nbsp;use&nbsp;cases&nbsp;for&nbsp;having&nbsp;the&nbsp;whole&nbsp;sse&nbsp;instruction&nbsp;set&nbsp;available&nbsp;and&lt;br&gt;these&nbsp;are&nbsp;what&nbsp;we&nbsp;are&nbsp;targeting&nbsp;now.&lt;br&gt;&lt;br&gt;But&nbsp;then,&nbsp;this&nbsp;was&nbsp;an&nbsp;analysis&nbsp;based&nbsp;on&nbsp;the&nbsp;fact&nbsp;that&nbsp;no&nbsp;well&nbsp;known&nbsp;compiler/runtime&nbsp;exposes&lt;br&gt;<br>
such&nbsp;library&nbsp;(arch&nbsp;agnostic&nbsp;simd),&nbsp;they&nbsp;always&nbsp;have&nbsp;a&nbsp;binding&nbsp;to&nbsp;a&nbsp;specific&nbsp;platform.&lt;br&gt;&lt;br&gt;This&nbsp;doesn&amp;#39;t&nbsp;mean&nbsp;we&nbsp;just&nbsp;won&amp;#39;t&nbsp;do&nbsp;it.&nbsp;Once&nbsp;we&nbsp;have,&nbsp;for&nbsp;example,&nbsp;Altivec&nbsp;and&nbsp;VFP&nbsp;supported&lt;br&gt;if&nbsp;an&nbsp;usable&nbsp;common&nbsp;subset&nbsp;emerge,&nbsp;we&amp;#39;ll&nbsp;work&nbsp;on&nbsp;making&nbsp;it&nbsp;available.&lt;br&gt;<br>
&lt;br&gt;Now&nbsp;back&nbsp;to&nbsp;the&nbsp;Acceleration&nbsp;attribute.&nbsp;It&amp;#39;s&nbsp;meant&nbsp;to&nbsp;support&nbsp;not&nbsp;only&nbsp;sse,&nbsp;but&nbsp;others&nbsp;as&nbsp;well,&nbsp;they&lt;br&gt;are&nbsp;not&nbsp;present&nbsp;for&nbsp;the&nbsp;simple&nbsp;reason&nbsp;that&nbsp;we&nbsp;didn&amp;#39;t&nbsp;have&nbsp;the&nbsp;time&nbsp;for&nbsp;it.&lt;br&gt;&lt;br&gt;Anyway,&nbsp;the&nbsp;attribute&nbsp;right&nbsp;now&nbsp;should&nbsp;be&nbsp;considered&nbsp;an&nbsp;implementation&nbsp;detail&nbsp;and&nbsp;if&nbsp;it&nbsp;shows&nbsp;to&nbsp;be&nbsp;a&nbsp;problem&lt;br&gt;<br>
in&nbsp;cases&nbsp;such&nbsp;as&nbsp;the&nbsp;one&nbsp;you&nbsp;describe&nbsp;we&amp;#39;ll&nbsp;change&nbsp;it.&nbsp;Keep&nbsp;in&nbsp;mind&nbsp;that&nbsp;the&nbsp;current&nbsp;design&nbsp;is&nbsp;not&nbsp;final,&nbsp;but&nbsp;at&lt;br&gt;the&nbsp;same&nbsp;time&nbsp;it&amp;#39;s&nbsp;hard&nbsp;to&nbsp;change&nbsp;it&nbsp;based&nbsp;on&nbsp;assumptions.&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;the&nbsp;feedback,&lt;br&gt;Rodrigo&lt;br&gt;<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Nov&nbsp;10,&nbsp;2008&nbsp;at&nbsp;10:04&nbsp;AM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:russell.kay@realtimeworlds.com&quot;&gt;russell.kay@realtimeworlds.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;link=&quot;blue&quot;&nbsp;vlink=&quot;blue&quot;&nbsp;lang=&quot;EN-GB&quot;&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;color=&quot;navy&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;navy;&quot;&gt;Rodrigo,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;color=&quot;navy&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;navy;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;color=&quot;navy&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;navy;&quot;&gt;My&nbsp;only&nbsp;problem&nbsp;with&nbsp;this&nbsp;is&nbsp;the&nbsp;language<br>
is&nbsp;tied&nbsp;to&nbsp;the&nbsp;x86&nbsp;architecture,&nbsp;when&nbsp;Altivec&nbsp;or&nbsp;Paired&nbsp;Single&nbsp;&amp;nbsp;etc&nbsp;are&nbsp;added<br>
for&nbsp;PowerPC&nbsp;then&nbsp;these&nbsp;attributes&nbsp;are&nbsp;nonsensical&nbsp;and&nbsp;will&nbsp;mean&nbsp;nothing&nbsp;to&nbsp;the<br>
user.&nbsp;This&nbsp;would&nbsp;be&nbsp;better&nbsp;done&nbsp;in&nbsp;a&nbsp;static&nbsp;location&nbsp;(rather&nbsp;than&nbsp;spread&nbsp;over<br>
the&nbsp;libraries)&nbsp;and&nbsp;split&nbsp;into&nbsp;a&nbsp;machine&nbsp;agnostic&nbsp;(Simd&nbsp;acceleration&nbsp;ON)&nbsp;and&nbsp;a<br>
machine&nbsp;specific&nbsp;manner&nbsp;(sse1&nbsp;–&nbsp;4.2&nbsp;active).&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;color=&quot;navy&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;navy;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;color=&quot;navy&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;navy;&quot;&gt;My&nbsp;2c&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;color=&quot;navy&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;navy;&quot;&gt;&lt;br&gt;<br>
Russell&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;color=&quot;navy&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;navy;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;text-align:&nbsp;center;&quot;&nbsp;align=&quot;center&quot;&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&nbsp;lang=&quot;EN-US&quot;&gt;<br>
<br>
&lt;hr&nbsp;align=&quot;center&quot;&nbsp;size=&quot;2&quot;&nbsp;width=&quot;100%&quot;&gt;<br>
<br>
&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;p&gt;&lt;b&gt;&lt;font&nbsp;face=&quot;Tahoma&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Tahoma;&nbsp;font-weight:&nbsp;bold;&quot;&nbsp;lang=&quot;EN-US&quot;&gt;From:&lt;/span&gt;&lt;/font&gt;&lt;/b&gt;&lt;font&nbsp;face=&quot;Tahoma&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Tahoma;&quot;&nbsp;lang=&quot;EN-US&quot;&gt;<br>
&lt;a&nbsp;href=&quot;mailto:mono-devel-list-bounces@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mono-devel-list-bounces@lists.ximian.com&lt;/a&gt;<br>
[mailto:&lt;a&nbsp;href=&quot;mailto:mono-devel-list-bounces@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mono-devel-list-bounces@lists.ximian.com&lt;/a&gt;]&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;On&nbsp;Behalf&nbsp;Of&nbsp;&lt;/span&gt;&lt;/b&gt;Rodrigo&nbsp;Kumpera&lt;br&gt;<br>
&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Sent:&lt;/span&gt;&lt;/b&gt;&nbsp;07&nbsp;November&nbsp;2008&nbsp;15:15&lt;br&gt;<br>
&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;To:&lt;/span&gt;&lt;/b&gt;&nbsp;Christophe&nbsp;Guillon&lt;br&gt;<br>
&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Cc:&lt;/span&gt;&lt;/b&gt;<br>
&lt;a&nbsp;href=&quot;mailto:mono-devel-list@lists.ximian.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mono-devel-list@lists.ximian.com&lt;/a&gt;&lt;br&gt;<br>
&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Subject:&lt;/span&gt;&lt;/b&gt;&nbsp;Re:&nbsp;[Mono-dev]&nbsp;Mono.Simd<br>
Acceleration&nbsp;Attributes&lt;/span&gt;&lt;/font&gt;&lt;span&nbsp;lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;12pt;&quot;&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;Hi&nbsp;Christophe,&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;2008/11/7&nbsp;Christophe&nbsp;Guillon&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:christophe.guillon.perso@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;christophe.guillon.perso@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;Thank&nbsp;you&nbsp;for&nbsp;the&nbsp;explanation.&nbsp;It&nbsp;confirms&nbsp;my&nbsp;point&nbsp;and&nbsp;it&nbsp;seems&nbsp;that<br>
we&nbsp;agree.&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;the&nbsp;user&nbsp;guide&nbsp;aspect:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&amp;gt;2)&nbsp;the&nbsp;attributes&nbsp;on&nbsp;the&nbsp;methods&nbsp;are&nbsp;never&nbsp;inspected&nbsp;by&nbsp;the&nbsp;runtime:&lt;br&gt;<br>
&amp;gt;they&nbsp;are&nbsp;there&nbsp;to&nbsp;guide&nbsp;the&nbsp;programmers&nbsp;using&nbsp;Mono.Simd&nbsp;in&nbsp;determining&lt;br&gt;<br>
&amp;gt;what&nbsp;kind&nbsp;of&nbsp;optimizations&nbsp;are&nbsp;usually&nbsp;available&nbsp;or&nbsp;currently&nbsp;enabled.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;If&nbsp;it&nbsp;is&nbsp;indeed&nbsp;&amp;quot;just&amp;quot;&nbsp;a&nbsp;guide&nbsp;to&nbsp;the&nbsp;user&nbsp;of&nbsp;Mono.Simd,&nbsp;thus<br>
why&nbsp;putting&nbsp;it&nbsp;in&nbsp;the&nbsp;library&nbsp;and&nbsp;coupling&nbsp;this&nbsp;with&nbsp;the&nbsp;specific&nbsp;architecture<br>
(SSE2&nbsp;or&nbsp;other).&nbsp;The&nbsp;fact&nbsp;that&nbsp;it&nbsp;is&nbsp;an&nbsp;AddWithSaturation&nbsp;on&nbsp;a&nbsp;Vector16b&nbsp;is<br>
sufficient&nbsp;for&nbsp;the&nbsp;semantic.&nbsp;Then&nbsp;a&nbsp;note&nbsp;in&nbsp;the&nbsp;mono&nbsp;VM&nbsp;documentation&nbsp;can&nbsp;tell&nbsp;that<br>
on&nbsp;SSE2&nbsp;architectures&nbsp;-O=simd&nbsp;will&nbsp;select&nbsp;the&nbsp;corresponding&nbsp;SSE2&nbsp;op&nbsp;is<br>
sufficient.&nbsp;Optionaly&nbsp;a&nbsp;note&nbsp;in&nbsp;the&nbsp;library&nbsp;documentation&nbsp;can&nbsp;tell&nbsp;that&nbsp;mono<br>
&amp;quot;normally&amp;quot;&nbsp;should&nbsp;catch&nbsp;such&nbsp;calls&nbsp;on&nbsp;SSE2&nbsp;architectures.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
We&nbsp;want&nbsp;to&nbsp;expose&nbsp;this&nbsp;information&nbsp;on&nbsp;the&nbsp;documentation&nbsp;as&nbsp;well&nbsp;and&nbsp;instead&nbsp;of<br>
having&nbsp;to&nbsp;dig&nbsp;this&nbsp;information&nbsp;twice&nbsp;we&nbsp;are&nbsp;planning&nbsp;on&nbsp;generating&nbsp;this&nbsp;part&nbsp;of<br>
the&nbsp;docs.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;blockquote&nbsp;style=&quot;border-style:&nbsp;none&nbsp;none&nbsp;none&nbsp;solid;&nbsp;border-color:&nbsp;-moz-use-text-color&nbsp;-moz-use-text-color&nbsp;-moz-use-text-color&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-width:&nbsp;medium&nbsp;medium&nbsp;medium&nbsp;1pt;&nbsp;padding:&nbsp;0cm&nbsp;0cm&nbsp;0cm&nbsp;6pt;&nbsp;margin-left:&nbsp;4.8pt;&nbsp;margin-right:&nbsp;0cm;&quot;&gt;<br>
<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;the&nbsp;choice&nbsp;of&nbsp;the&nbsp;accelerated&nbsp;or&nbsp;not&nbsp;accelerated&nbsp;mode&nbsp;at&nbsp;runtime:&lt;br&gt;<br>
&amp;gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;static&nbsp;readonly&nbsp;bool&nbsp;use_mono_simd&nbsp;=<br>
(SimdRuntime.AccelMode&nbsp;&amp;amp;&nbsp;AccelMode.SSE2)&nbsp;!=&nbsp;&amp;gt;0;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;...&lt;br&gt;<br>
&amp;gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(use_mono_simd)&lt;br&gt;<br>
&amp;gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;simd&nbsp;codepath&lt;br&gt;<br>
&amp;gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;else&lt;br&gt;<br>
&amp;gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//scalar&nbsp;codepath&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;If&nbsp;it&nbsp;is&nbsp;actually&nbsp;to&nbsp;overcome&nbsp;a&nbsp;temporary&nbsp;inneficiency&nbsp;due&nbsp;to&nbsp;some<br>
copy,&nbsp;it&nbsp;is&nbsp;imho&nbsp;far&nbsp;too&nbsp;intrusive&nbsp;in&nbsp;the&nbsp;user&nbsp;code.&nbsp;Here&nbsp;the&nbsp;user&nbsp;clearly<br>
wrote&nbsp;a&nbsp;code&nbsp;that&nbsp;is&nbsp;dependent&nbsp;on&nbsp;some&nbsp;&amp;quot;external&amp;quot;&nbsp;context,&nbsp;but<br>
instead&nbsp;of&nbsp;querying&nbsp;the&nbsp;actual&nbsp;VM&nbsp;runtime,&nbsp;or&nbsp;simply&nbsp;a&nbsp;user&nbsp;defined&nbsp;variable<br>
that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;some&nbsp;configuration&nbsp;file&nbsp;of&nbsp;the&nbsp;application,&nbsp;the&nbsp;query&nbsp;is<br>
on&nbsp;the&nbsp;Mono.Simd&nbsp;library&nbsp;itself.&lt;br&gt;<br>
While&nbsp;in&nbsp;fact&nbsp;the&nbsp;library&nbsp;itself&nbsp;as&nbsp;no&nbsp;knowledge&nbsp;of&nbsp;the&nbsp;actual&nbsp;efficiency&nbsp;of<br>
the&nbsp;running&nbsp;VM.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/blockquote&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;12pt;&quot;&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
There&nbsp;are&nbsp;two&nbsp;good&nbsp;reasons&nbsp;for&nbsp;using&nbsp;this&nbsp;approach,&nbsp;the&nbsp;first&nbsp;one&nbsp;is&nbsp;because<br>
the&nbsp;user&nbsp;requires&nbsp;the&nbsp;best&nbsp;performance&nbsp;in&nbsp;all&nbsp;situations&nbsp;and&nbsp;want&nbsp;to&nbsp;know&nbsp;if<br>
it&amp;#39;s&nbsp;method&nbsp;will&nbsp;be&nbsp;optimized&nbsp;or&nbsp;not.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;second&nbsp;reason&nbsp;happens&nbsp;when&nbsp;there&nbsp;are&nbsp;many&nbsp;different&nbsp;ways&nbsp;to&nbsp;implement&nbsp;a<br>
given&nbsp;function,&nbsp;each&nbsp;one&nbsp;using&nbsp;different&nbsp;instruction&nbsp;sets&nbsp;and&nbsp;the&nbsp;user&nbsp;wants&nbsp;to<br>
have&nbsp;improved&nbsp;performance&nbsp;on&nbsp;newer&nbsp;processors.&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;example,&nbsp;there&nbsp;are&nbsp;3&nbsp;ways&nbsp;to&nbsp;implement&nbsp;dot&nbsp;product&nbsp;using&nbsp;Mono.Simd:&lt;br&gt;<br>
&lt;br&gt;<br>
1)&nbsp;Only&nbsp;using&nbsp;sse1&nbsp;and&nbsp;sse2&nbsp;which&nbsp;takes&nbsp;5&nbsp;instructions&nbsp;(1&nbsp;mul,&nbsp;2&nbsp;add&nbsp;and&nbsp;2<br>
shuffle)&lt;br&gt;<br>
2)&nbsp;Using&nbsp;sse3,&nbsp;which&nbsp;takes&nbsp;3&nbsp;instructions&nbsp;(1&nbsp;mul,&nbsp;2&nbsp;hadd)&lt;br&gt;<br>
3)&nbsp;Using&nbsp;sse4.2&nbsp;which&nbsp;takes&nbsp;1&nbsp;instruction&nbsp;(dotp)&nbsp;--&nbsp;sse4.2&nbsp;still&nbsp;not&nbsp;supported<br>
by&nbsp;Mono.Simd.&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;some&nbsp;users&nbsp;having&nbsp;this&nbsp;option&nbsp;is&nbsp;important&nbsp;and&nbsp;this&nbsp;is&nbsp;the&nbsp;main&nbsp;objective<br>
of&nbsp;the&nbsp;runtime&nbsp;query&nbsp;capabilities.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;blockquote&nbsp;style=&quot;border-style:&nbsp;none&nbsp;none&nbsp;none&nbsp;solid;&nbsp;border-color:&nbsp;-moz-use-text-color&nbsp;-moz-use-text-color&nbsp;-moz-use-text-color&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-width:&nbsp;medium&nbsp;medium&nbsp;medium&nbsp;1pt;&nbsp;padding:&nbsp;0cm&nbsp;0cm&nbsp;0cm&nbsp;6pt;&nbsp;margin-left:&nbsp;4.8pt;&nbsp;margin-right:&nbsp;0cm;&quot;&gt;<br>
<br>
<br>
&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Thus&nbsp;I&nbsp;fully&nbsp;agree&nbsp;with&nbsp;this&nbsp;(which&nbsp;is&nbsp;my&nbsp;point):&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;12pt;&quot;&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&amp;quot;Note&nbsp;that&nbsp;we&nbsp;may&nbsp;eventually&nbsp;either&nbsp;return&nbsp;the&nbsp;attribute&nbsp;not&nbsp;based&nbsp;on&nbsp;the&lt;br&gt;<br>
metadata&nbsp;in&nbsp;the&nbsp;assembly,&nbsp;but&nbsp;based&nbsp;on&nbsp;the&nbsp;runtime&nbsp;understanding:&nbsp;this&lt;br&gt;<br>
will&nbsp;avoid&nbsp;the&nbsp;need&nbsp;to&nbsp;have&nbsp;an&nbsp;updated&nbsp;Mono.Simd&nbsp;assembly&nbsp;when&nbsp;new&lt;br&gt;<br>
optimizations&nbsp;are&nbsp;added.&nbsp;Just&nbsp;use&nbsp;the&nbsp;b&nbsp;pattern&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;avoid&lt;br&gt;<br>
that&nbsp;issue&nbsp;and&nbsp;remember&nbsp;that&nbsp;you&nbsp;don&amp;#39;t&nbsp;usually&nbsp;need&nbsp;to&nbsp;check&nbsp;all&nbsp;the&lt;br&gt;<br>
methods,&nbsp;but&nbsp;just&nbsp;the&nbsp;ones&nbsp;you&nbsp;actually&nbsp;need&nbsp;to&nbsp;be&nbsp;optimized.&amp;quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;12pt;&quot;&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;All&nbsp;the&nbsp;question&nbsp;there<br>
is,&nbsp;whether&nbsp;or&nbsp;not&nbsp;there&nbsp;is&nbsp;a&nbsp;way&nbsp;to&nbsp;get&nbsp;from&nbsp;the&nbsp;runtime&nbsp;this&nbsp;information&nbsp;and<br>
by&nbsp;which&nbsp;mean?&lt;br&gt;<br>
Is&nbsp;it&nbsp;possible&nbsp;to&nbsp;have&nbsp;attributes&nbsp;attached&nbsp;(or&nbsp;simulated)&nbsp;by&nbsp;the&nbsp;runtime?&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/blockquote&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;12pt;&quot;&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
The&nbsp;SimdRuntime.AccelMode&nbsp;property&nbsp;queries&nbsp;the&nbsp;runtime&nbsp;for&nbsp;the&nbsp;supported<br>
instruction&nbsp;sets.&nbsp;You&nbsp;might&nbsp;look&lt;br&gt;<br>
at&nbsp;the&nbsp;implementation&nbsp;and&nbsp;get&nbsp;puzzled&nbsp;by&nbsp;the&nbsp;fact&nbsp;that&nbsp;it&nbsp;returns&nbsp;AccelMode.None,<br>
but&nbsp;in&nbsp;fact&nbsp;this&nbsp;is&nbsp;a&nbsp;&amp;quot;magic&nbsp;method&amp;quot;&lt;br&gt;<br>
that&nbsp;the&nbsp;runtime&nbsp;takes&nbsp;special&nbsp;care&nbsp;and&nbsp;make&nbsp;sure&nbsp;it&nbsp;returns&nbsp;the&nbsp;right&nbsp;thing.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;font&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;&lt;br&gt;<br>
Thanks&nbsp;for&nbsp;taking&nbsp;your&nbsp;time&nbsp;looking&nbsp;at&nbsp;the&nbsp;Mono.Simd&nbsp;library&nbsp;:)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Rodrigo&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
____________________________________________________________________&lt;br&gt;<br>
This&nbsp;email&nbsp;has&nbsp;been&nbsp;scanned&nbsp;by&nbsp;the&nbsp;MessageLabs&nbsp;Email&nbsp;Security&nbsp;System&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
<br>
&lt;br&gt;<br>
____________________________________________________________________&lt;br&gt;<br>
DISCLAIMER&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;message&nbsp;and&nbsp;any&nbsp;attachments&nbsp;contain&nbsp;privileged&nbsp;and&nbsp;confidential&nbsp;information&nbsp;intended&nbsp;for&nbsp;the&nbsp;use&nbsp;of&nbsp;the&nbsp;addressee&nbsp;named&nbsp;above.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;intended&nbsp;recipient&nbsp;of&nbsp;this&nbsp;message,&nbsp;you&nbsp;are&nbsp;hereby&nbsp;notified&nbsp;that&nbsp;any&nbsp;use,&nbsp;dissemination,&nbsp;distribution&nbsp;or&nbsp;reproduction&nbsp;of&nbsp;this&nbsp;message&nbsp;is&nbsp;prohibited.&nbsp;Please&nbsp;note&nbsp;that&nbsp;we&nbsp;cannot&nbsp;guarantee&nbsp;that&nbsp;this&nbsp;message&nbsp;or&nbsp;any&nbsp;attachment&nbsp;is&nbsp;virus&nbsp;free&nbsp;or&nbsp;that&nbsp;it&nbsp;has&nbsp;not&nbsp;been&nbsp;intercepted&nbsp;and&nbsp;amended.&nbsp;The&nbsp;views&nbsp;of&nbsp;the&nbsp;author&nbsp;may&nbsp;not&nbsp;necessarily&nbsp;reflect&nbsp;those&nbsp;of&nbsp;Realtime&nbsp;Worlds&nbsp;Ltd.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Realtime&nbsp;Worlds&nbsp;Ltd&nbsp;is&nbsp;registered&nbsp;in&nbsp;Scotland,&nbsp;number&nbsp;225628.&nbsp;Registered&nbsp;Office:&nbsp;152&nbsp;West&nbsp;Marketgait,&nbsp;Dundee,&nbsp;DD1&nbsp;1NJ.&lt;br&gt;<br>
&lt;/div&gt;<br>
<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
