<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev]  [PATCH] Adding to the PInvoke search path.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20%5BPATCH%5D%20Adding%20to%20the%20PInvoke%20search%20path.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032315.html">
   <LINK REL="Next"  HREF="032334.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev]  [PATCH] Adding to the PInvoke search path.</H1>
    <B>Bill Holmes</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%20%5BPATCH%5D%20Adding%20to%20the%20PInvoke%20search%20path.&In-Reply-To="
       TITLE="[Mono-dev]  [PATCH] Adding to the PInvoke search path.">billholmes54 at gmail.com
       </A><BR>
    <I>Mon Jun  1 12:41:28 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032315.html">[Mono-dev] [BUMP] Re: Alpha blending in libgdiplus (call for testers)
</A></li>
        <LI>Next message: <A HREF="032334.html">[Mono-dev] [PATCH] Adding to the PInvoke search path.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32316">[ date ]</a>
              <a href="thread.html#32316">[ thread ]</a>
              <a href="subject.html#32316">[ subject ]</a>
              <a href="author.html#32316">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

The attached patch was discussed on IRC last week.  We found that
MS.Net uses the directory of the declaring assembly when searching for
shared libraries to invoke unmanaged code.

The outcome of the conversation was that we did not want the behavior
by default in Mono.  However an environment variable could control
this behavior.

Whit this patch setting MONO_PINVOKE_SEARCH to USE_ASSEMBLY_PATH will
enable this.

-bill

2009-06-01  Bill Holmes  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">billholmes54 at gmail.com</A>&gt;

	* loader.c (mono_loader_init): Check for and process
	  the MONO_PINVOKE_SEARCH environment variable.

	* loader.c (mono_lookup_pinvoke_call): If MONO_PINVOKE_SEARCH
	  is set to USE_ASSEMBLY_PATH, add the declaring assembly
	  directory to resolve shared libraries.

	Code is contributed under MIT/X11 license.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mono_pinvoke_search.patch
Type: application/octet-stream
Size: 2953 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090601/be43e957/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090601/be43e957/attachment.obj</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032315.html">[Mono-dev] [BUMP] Re: Alpha blending in libgdiplus (call for testers)
</A></li>
	<LI>Next message: <A HREF="032334.html">[Mono-dev] [PATCH] Adding to the PInvoke search path.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32316">[ date ]</a>
              <a href="thread.html#32316">[ thread ]</a>
              <a href="subject.html#32316">[ subject ]</a>
              <a href="author.html#32316">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
