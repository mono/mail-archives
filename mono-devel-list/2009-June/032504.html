<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] SybaseDataAdapter.Fill NullReferenceException on Dispose()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20SybaseDataAdapter.Fill%20NullReferenceException%20on%0A%20Dispose%28%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032501.html">
   <LINK REL="Next"  HREF="032505.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] SybaseDataAdapter.Fill NullReferenceException on Dispose()</H1>
    <B>armbrat</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20SybaseDataAdapter.Fill%20NullReferenceException%20on%0A%20Dispose%28%29&In-Reply-To="
       TITLE="[Mono-dev] SybaseDataAdapter.Fill NullReferenceException on Dispose()">jdavies at citco.com
       </A><BR>
    <I>Mon Jun 29 11:31:58 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032501.html">[Mono-dev] Spotify and C#
</A></li>
        <LI>Next message: <A HREF="032505.html">[Mono-dev] [PATCH] MACOSX support for processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32504">[ date ]</a>
              <a href="thread.html#32504">[ thread ]</a>
              <a href="subject.html#32504">[ subject ]</a>
              <a href="author.html#32504">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Greetings,

I'm writing a simple data layer which communicates with a Sybase db.  Using
the Sybase ASE client, everything works, but when I switch to the Mono
Sybase client, I get a NullReferenceException in the
Mono.Data.SybaseClient.SybaseDataReader.Dispose(Boolean disposing) method.

The data is successfully loaded into the data table.  Wrapping the
SybaseDataAdapter.Fill method in a try/catch block squashes the exception,
but I'm concerned about its underlying cause.

Below is the method that is filling the table.  Does anyone have an idea
about what is causing this?

Regards,

Joe Davies

        public DataTable GetClient(string clientName)
        {
            DataTable table = new DataTable();

            using (SybaseConnection conn = new
SybaseConnection(this.ConnectionString))
            {
                string sqlQuery = @&quot;SELECT * FROM client WHERE clientname =
@clientname&quot;;

                using (SybaseCommand cmd = new SybaseCommand(sqlQuery,
conn))
                {
                    cmd.Parameters.Add(new SybaseParameter(&quot;@clientname&quot;,
clientName));

                    using (SybaseDataAdapter adap = new
SybaseDataAdapter(cmd))
                    {
                        conn.Open();

                        try
                        {
                            adap.Fill(table);
                        }
                        catch
                        { }

                        conn.Close();
                    }
                }
            }

            return table;
        }
-- 
View this message in context: <A HREF="http://www.nabble.com/SybaseDataAdapter.Fill-NullReferenceException-on-Dispose%28%29-tp24256226p24256226.html">http://www.nabble.com/SybaseDataAdapter.Fill-NullReferenceException-on-Dispose%28%29-tp24256226p24256226.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032501.html">[Mono-dev] Spotify and C#
</A></li>
	<LI>Next message: <A HREF="032505.html">[Mono-dev] [PATCH] MACOSX support for processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32504">[ date ]</a>
              <a href="thread.html#32504">[ thread ]</a>
              <a href="subject.html#32504">[ subject ]</a>
              <a href="author.html#32504">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
