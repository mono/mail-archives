<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Resolving dependencies while compiling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Resolving%20dependencies%20while%20compiling&In-Reply-To=1242836477.5014.376.camel%40lina">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032206.html">
   <LINK REL="Next"  HREF="032207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Resolving dependencies while compiling</H1>
    <B>Grzegorz Sobanski</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Resolving%20dependencies%20while%20compiling&In-Reply-To=1242836477.5014.376.camel%40lina"
       TITLE="[Mono-dev] Resolving dependencies while compiling">silk at boktor.net
       </A><BR>
    <I>Fri May 22 09:58:10 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032206.html">[Mono-dev] Resolving dependencies while compiling
</A></li>
        <LI>Next message: <A HREF="032207.html">[Mono-dev] Resolving dependencies while compiling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32236">[ date ]</a>
              <a href="thread.html#32236">[ thread ]</a>
              <a href="subject.html#32236">[ subject ]</a>
              <a href="author.html#32236">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>* Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">jonpryor at vt.edu</A>&gt; [2009-05-20 21:23]:
&gt;<i> gmcs is currently being modified to use Mono.Cecil instead of
</I>&gt;<i> System.Reflection.Emit, which should make gmcs act more like .NET here.
</I>
That's what I had understood from some bug reports, good :)
 
&gt;<i> &gt; There are different solutions we could use:
</I>&gt;<i> &gt; 1) gmcs could compile like VS, not knowing the types from Tier0/1 -
</I>&gt;<i> &gt;    ideal
</I>&gt;<i> 
</I>&gt;<i> This should eventually work with either Mono 2.6 or 2.8, due to the gmcs
</I>&gt;<i> Cecil migration.
</I>
That would be really nice.

&gt;<i> &gt; 2) reference all dll's from Tier0/1 in application - bad
</I>&gt;<i> Not sure why this is bad.  Annoying, certainly, but bad?
</I>
Yes, 'bad' is maybe a too strong word.
&gt;<i>From a technical point of view, everything is ok. But in practice, in
</I>non-trivial appliaction it is very, very annoying.
First, you get all namespaces from all libraries available in code
completion. Types/namespaces that shouldn't really be used at that 
tier are avaialbe to programmer, etc.
If any lib changes it's dependent libraries it's hell.
You must add references to all projects if lib adds new dependency.
If some lib drops dependency, you don't event know you can drop it from
you libs, etc.
Really annoying ;)

&gt;<i> &gt; 3) copy (symlink) all dll's from Tier0/1 to directory of every Module* (Tier2)
</I>&gt;<i> &gt;    - that's what we've been using until now. But it started to be 
</I>&gt;<i> &gt;      a real maintenance problem.
</I>&gt;<i> 
</I>&gt;<i> Someone off-list mentioned that svn + symlinks == pain, so I can see how
</I>&gt;<i> this would be problematic.
</I>
True, first it sometimes just breaks. Second, creating them is annoying ;)

&gt;<i> &gt; 4) put all dll's from all Tiers to one directory - we want to avoid that
</I>&gt;<i> Not sure why you want to avoid this, considering that to _run_ your app
</I>&gt;<i> (for testing, etc.) you'll need all of these assemblies in the same
</I>
True.
Problem is we have one application, that's dynamically loading modules
at runtime. So, we don't need all aseemblies in output directory of
every module. The server has references to all (or most of) libraries
from Tier0/1, so they are in output directory of the application
when it is run (that answers the question about how we ensure having 
the libs at runtime).

Comming back to the question.
At the moment we are using about 10-12 outside libraries at tier 1. 
And 4 libraries developed in-house. Many of those libraries comes
with more then 1 dll (NHibernate and Castle with many more).

So, putting them all in one directory, and adding references to them
means .dll hell, and problems when libs are updaed to new version etc.

...
Oh, wait, I think I understand now.
You mean - only coping those dll's to on dir at build time (or repo
update time), and only use this directory during build, not to add
references.
That's some idea :) But I think it is very similar to setting MONO_PATH?



All our problems are really coming from few requirements:
- we are lazy ;)
- we don't want maintance problems when upgrading libraries,
  quessing where dll's comes from (so we keep per-library dir)
- we want to develop the same project in both windows nad linux,
- we want to use .csproj for both IDEs - VS and MD (it is working
  great, btw),
- we want the work for developers as smooth as possible
- we would want to avoid having to track few build files and keep them
  in sync
- everything just works ;)

Ok, I know, daydreaming ;-)

Have a nice weekend.
silk
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032206.html">[Mono-dev] Resolving dependencies while compiling
</A></li>
	<LI>Next message: <A HREF="032207.html">[Mono-dev] Resolving dependencies while compiling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32236">[ date ]</a>
              <a href="thread.html#32236">[ thread ]</a>
              <a href="subject.html#32236">[ subject ]</a>
              <a href="author.html#32236">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
