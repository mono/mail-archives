<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Compiling Mono v2.4 RC2 (Solaris 10 SPARCv9)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Compiling%20Mono%20v2.4%20RC2%20%28Solaris%2010%20SPARCv9%29&In-Reply-To=23083459.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032174.html">
   <LINK REL="Next"  HREF="032143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Compiling Mono v2.4 RC2 (Solaris 10 SPARCv9)</H1>
    <B>chris zhu</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Compiling%20Mono%20v2.4%20RC2%20%28Solaris%2010%20SPARCv9%29&In-Reply-To=23083459.post%40talk.nabble.com"
       TITLE="[Mono-dev] Compiling Mono v2.4 RC2 (Solaris 10 SPARCv9)">chris.zhu at sun.com
       </A><BR>
    <I>Fri May 15 04:21:15 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032174.html">[Mono-dev] Understanding web application loading time
</A></li>
        <LI>Next message: <A HREF="032143.html">[Mono-dev] Problem with reference not refreshed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32167">[ date ]</a>
              <a href="thread.html#32167">[ thread ]</a>
              <a href="subject.html#32167">[ subject ]</a>
              <a href="author.html#32167">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I debug into mono/mini/local-propagation.c of mono 2.2, and found there's
something wrong in the &quot;MonoBasicBlock *bb&quot; of function mono_local_deadce.

The point of previous inst is same as the inst itself, which will run into
dead lock if we traverses the inst list backward. It's hard for us to go
further into the source code, anyone have any idea about it.


index=1: ins=3375992, (ins)-&gt;prev=0, (ins)-&gt;next=3376040

index=2: ins=3376040, (ins)-&gt;prev=3375992, (ins)-&gt;next=3376088

index=3: ins=3376088, (ins)-&gt;prev=3376040, (ins)-&gt;next=3376232

index=4: ins=3376232, (ins)-&gt;prev=3376088, (ins)-&gt;next=3376288

index=5: ins=3376288, (ins)-&gt;prev=3376232, (ins)-&gt;next=3376344

index=6: ins=3376344, (ins)-&gt;prev=3376288, (ins)-&gt;next=3376392

index=7: ins=3376392, (ins)-&gt;prev=3376392, (ins)-&gt;next=3376136

index=8: ins=3376136, (ins)-&gt;prev=3376392, (ins)-&gt;next=3376448

index=9: ins=3376448, (ins)-&gt;prev=3376136, (ins)-&gt;next=0





Burkhard Linke wrote:
&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thracx wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>In short, it's not working for me but I'm willing to keep trying and
document my experiences if I can get some help from the Mono developer
community.  I apologize for the lengthy post but I figured that I might as
well be thorough.

&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I'm running into the same problem with the 2.4 release of Mono. My current
</I>&gt;<i> build does not use the bundled garbage collector, since I get compiler
</I>&gt;<i> error during build time.
</I>&gt;<i> 
</I>&gt;<i> The cause of the endless loop during compiling the class library is not
</I>&gt;<i> the compiler, but the runtime itself. The main thread of mono hangs in a
</I>&gt;<i> loop, JIT-compiling methods (output created using 'pstack' utility under
</I>&gt;<i> Solaris 10 and trimmed):
</I>&gt;<i> 
</I>&gt;<i> cab:~&gt; pstack 6411
</I>&gt;<i> 6411:   /vol/src/gnu/mono/mono-2.4/mono/mini/mono --config
</I>&gt;<i> /vol/src/gnu/mono/m
</I>&gt;<i> -----------------  lwp# 1 / thread# 1  --------------------
</I>&gt;<i>  00083588 mono_local_deadce (2f4870, 1b4e80, 1b09f4, 137, ffffffff,
</I>&gt;<i> ffffff) + 818
</I>&gt;<i>  00039b9c mini_method_compile (2f4870, 35169ff, 10000000, 0, 1af560,
</I>&gt;<i> 2f6fd0) + a40
</I>&gt;<i>  0003b058 mono_jit_compile_method (2f6890, 1, fee73580, fef52000,
</I>&gt;<i> ff371480, 0) + 2f0
</I>&gt;<i>  000d7cdc mono_compile_method (2f6890, fec90740, ff373a40, 14, 80808080,
</I>&gt;<i> fef52100) + 18
</I>&gt;<i>  000a0ec8 mono_magic_trampoline (ffbfdeb0, fec90740, 2f6890, 0, 0, ff) +
</I>&gt;<i> f8
</I>&gt;<i>  fecf0104 ???????? (2e4ee0, 0, fee73580, fef52000, 2570b0, 6)
</I>&gt;<i>  fec90740 ???????? (0, fec906f8, fee73580, fef52000, 257000, 6)
</I>&gt;<i>  fec90478 ???????? (0, 0, ffbfe36c, fec906f8, 257000, fef52100)
</I>&gt;<i>  0003b8a4 mono_jit_runtime_invoke (2fad58, 0, 0, ffbfe36c, 0, ff) + 98
</I>&gt;<i>  000d8ca8 mono_runtime_invoke (2fad58, 0, 0, ffbfe36c, 2570b0, 6) + 50
</I>&gt;<i>  000ded68 mono_runtime_class_init_full (2b7128, 0, fee73580, fef52000,
</I>&gt;<i> 257000, 0) + 18c
</I>&gt;<i>  00056f10 mono_method_to_ir (2c8cc0, 2f5240, 2b8340, feb92b3d, 2f7ad0, 2)
</I>&gt;<i> + c8fc
</I>&gt;<i>  00039710 mini_method_compile (2c8cc0, 35169ff, 10000000, 0, 1af560,
</I>&gt;<i> 2f5240) + 5b4
</I>&gt;<i>  0003b058 mono_jit_compile_method (2b8340, 1, 257000, 20, 2bf090,
</I>&gt;<i> fef52100) + 2f0
</I>&gt;<i>  0003b890 mono_jit_runtime_invoke (2b8340, 0, ffbfe7a4, 0, ffbfe72c,
</I>&gt;<i> 80808080) + 84
</I>&gt;<i>  000d8ca8 mono_runtime_invoke (2b8340, 0, ffbfe7a4, 0, 0, 34) + 50
</I>&gt;<i>  000db7dc mono_runtime_exec_main (2b8340, 299e40, 0, 20, 2e, 34) + 138
</I>&gt;<i>  000dbe14 mono_runtime_run_main (2b8340, 2, ffbfe9c0, 0, 80808080,
</I>&gt;<i> 1010101) + 14c
</I>&gt;<i>  0008523c mono_main (3, ffbfe9b4, 0, 0, 6, 0) + 15ac
</I>&gt;<i>  00033110 _start   (0, 0, 0, 0, 0, 0) + 5c
</I>&gt;<i> 
</I>&gt;<i> The other two threads active at the time are the garbage collection thread
</I>&gt;<i> and finalizer thread. 
</I>&gt;<i> 
</I>&gt;<i> The instruction pointer (first column) of the mono_local_deadce changes
</I>&gt;<i> during several invocation of pstack, but the remaining backtrace remains
</I>&gt;<i> the same. So the problem should be located somewhere in that function.
</I>&gt;<i> 
</I>&gt;<i> I'll put more debug output calls into the function in the next build and
</I>&gt;<i> try to find out under which circumstances the endless loop occurs.
</I>&gt;<i> 
</I>&gt;<i> Mono 2.4 works fine under Solaris 10 x86, so the problem should be related
</I>&gt;<i> to the different register sets of x86 and SPARC cpus.
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://www.nabble.com/Compiling-Mono-v2.4-RC2-%28Solaris-10-SPARCv9%29-tp22587130p23555461.html">http://www.nabble.com/Compiling-Mono-v2.4-RC2-%28Solaris-10-SPARCv9%29-tp22587130p23555461.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090515/e45d97bc/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20090515/e45d97bc/attachment.html</A> 
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032174.html">[Mono-dev] Understanding web application loading time
</A></li>
	<LI>Next message: <A HREF="032143.html">[Mono-dev] Problem with reference not refreshed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32167">[ date ]</a>
              <a href="thread.html#32167">[ thread ]</a>
              <a href="subject.html#32167">[ subject ]</a>
              <a href="author.html#32167">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
