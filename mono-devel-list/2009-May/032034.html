<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] libgdiplus drawing performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20libgdiplus%20drawing%20performance&In-Reply-To=23395461.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032022.html">
   <LINK REL="Next"  HREF="032025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] libgdiplus drawing performance</H1>
    <B>Mart&#237;n Vales</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20libgdiplus%20drawing%20performance&In-Reply-To=23395461.post%40talk.nabble.com"
       TITLE="[Mono-dev] libgdiplus drawing performance">martin at intergeotecnologia.com
       </A><BR>
    <I>Wed May  6 11:55:04 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032022.html">[Mono-dev] libgdiplus drawing performance
</A></li>
        <LI>Next message: <A HREF="032025.html">[Mono-dev] libgdiplus drawing performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32034">[ date ]</a>
              <a href="thread.html#32034">[ thread ]</a>
              <a href="subject.html#32034">[ subject ]</a>
              <a href="author.html#32034">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Shade1974 escribi&#243;:
&gt;<i> First, let me say, I have been really excited about the mono project and am
</I>&gt;<i> an enthusiast on the grounds that it potentially might allow us to take our
</I>&gt;<i> C# programming multi-platform.  We are developing a C# application that
</I>&gt;<i> needs to draw thousands of separate lines.  I have been having trouble with
</I>&gt;<i> getting drawing to work quickly.  This is one of those unfortunate scenarios
</I>&gt;<i> where it seems almost impossible to Google anything useful, and it took a
</I>&gt;<i> long time before I discovered that you could group thousands of lines
</I>&gt;<i> together into a single drawing path and draw them all at once with a single
</I>&gt;<i> call to the graphics device (GDI+ API).  This is on the order of THOUSANDS
</I>&gt;<i> of times faster, not merely one or two times as fast.  Now, imagine my
</I>&gt;<i> distress after having implemented this blazingly quick drawing in windows
</I>&gt;<i> only to discover that MONO seems to be unable to duplicate this
</I>&gt;<i> optimization.  I believe that the problem originates because the managed
</I>&gt;<i> mono wrapper must take the single DrawPath instruction and sub-divide it
</I>&gt;<i> into the individual calls to the API.  This might be necessary when talking
</I>&gt;<i> to Cairo, but I thought on windows this was simply supposed to forward the
</I>&gt;<i> instructions to GDI+.  The fact that even the windows implementation is slow
</I>&gt;<i> tells me that it's possible that the authors simply didn't know that there
</I>&gt;<i> was a huge performance gain by calling a chunky DrawPath instead of chatty
</I>&gt;<i> individual calls, or else they would at least have supported it in the case
</I>&gt;<i> of windows.
</I>&gt;<i>
</I>&gt;<i> Anyway, like I said it took a huge amount of time before I even figured out
</I>&gt;<i> the optimization in the first place and I have just started to work with
</I>&gt;<i> mono.  It's quite probable that I am overlooking something straight forward,
</I>&gt;<i> but I'm having trouble figuring out what it is.  If anyone knows some
</I>&gt;<i> information that could help I'd be grateful.
</I>&gt;<i>
</I>&gt;<i> Shade1974
</I>&gt;<i>
</I>&gt;<i>   
</I>I believe gdi+ in linux is not optimized to a CAD because is a emulation 
of the p/invoke gdiflat API using cairo and parts of the libgdi is not 
optimized:
<A HREF="http://msdn.microsoft.com/en-us/library/ms533969(VS.85">http://msdn.microsoft.com/en-us/library/ms533969(VS.85</A>).aspx 
&lt;<A HREF="http://msdn.microsoft.com/en-us/library/ms533969%28VS.85%29.aspx">http://msdn.microsoft.com/en-us/library/ms533969%28VS.85%29.aspx</A>&gt;

For graphical interfaces is nice but perhaps you need use opengl with 
mono and .NET.
<A HREF="http://mono-project.com/Tao">http://mono-project.com/Tao</A>

or use agg-sharp is a full port of antigrain library to c#:
<A HREF="http://sourceforge.net/projects/agg-sharp">http://sourceforge.net/projects/agg-sharp</A>

-- 
Mart&#237;n R. Vales,
Intergeo Tecnolog&#237;a (IGT)
El Escorial (Madrid)
__
www.intergeotecnologia.com




</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032022.html">[Mono-dev] libgdiplus drawing performance
</A></li>
	<LI>Next message: <A HREF="032025.html">[Mono-dev] libgdiplus drawing performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32034">[ date ]</a>
              <a href="thread.html#32034">[ thread ]</a>
              <a href="subject.html#32034">[ subject ]</a>
              <a href="author.html#32034">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
