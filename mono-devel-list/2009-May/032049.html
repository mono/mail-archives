<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Mono Debugger and Mono 2.4
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono%20Debugger%20and%20Mono%202.4&In-Reply-To=B2A93F4F-978D-405B-9A3A-798C90D88440%40unity3d.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032003.html">
   <LINK REL="Next"  HREF="032053.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Mono Debugger and Mono 2.4</H1>
    <B>jonas echterhoff</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Mono%20Debugger%20and%20Mono%202.4&In-Reply-To=B2A93F4F-978D-405B-9A3A-798C90D88440%40unity3d.com"
       TITLE="[Mono-dev] Mono Debugger and Mono 2.4">jonas at unity3d.com
       </A><BR>
    <I>Fri May  8 06:09:23 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032003.html">[Mono-dev] Mono Debugger and Mono 2.4
</A></li>
        <LI>Next message: <A HREF="032053.html">[Mono-dev] Mono Debugger and Mono 2.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32049">[ date ]</a>
              <a href="thread.html#32049">[ thread ]</a>
              <a href="subject.html#32049">[ subject ]</a>
              <a href="author.html#32049">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Following up on my own post here, I have managed to make mdb work with  
Unity (to some degree). It was mostly as easy as Miguel said, just  
instruct Unity to use mono the same was as if &quot;mono --inside_mdb&quot; had  
been called.

Reading the MONO_DEBUGGER__debugger_info struct still is a problem,  
though. I was wrong in my last post that mdb won't try to read it for  
native applications. Rather, the problem is, that since we are linking  
against mono dynamically, the debugger will first interrupt when  
loading Unity, before the linker has resolved the external dynamic  
symbols, thus it won't get the correct address for the struct.

I have worked around this for now, by making the debugger ignore the  
first stop, which works, but breaks compatibility with everything but  
Unity - so I really need some better fix. Does anybody know the OS X  
linker very well? I tried setting the DYLD_BIND_AT_LAUNCH environment  
variable, but that still seems to link the symbol too late. If nobody  
knows a more elegant solution, I'd need to change the debugger to try  
again and read the symbol table again, if the symbol is unresolved the  
first time, but if it can be fixed by some different link settings,  
i'd prefer that.

jonas

On May 5, 2009, at 5:37 PM, jonas echterhoff wrote:

&gt;<i> Yes. But in order to make it work, as far as i can tell, I also need
</I>&gt;<i> to change the mono debugger itself. Right now, when I load a native
</I>&gt;<i> application into the debugger, it won't try to find the debugger_info
</I>&gt;<i> global structure, which is used to communicate with mono.
</I>&gt;<i>
</I>&gt;<i> My question is mostly, since there is some &quot;support&quot; for native
</I>&gt;<i> applications in mdb at this point (well, I can start an application in
</I>&gt;<i> the debugger, and interrupt and resume execution), if there is already
</I>&gt;<i> some workaround for this, or a plan on how to implement it. I
</I>&gt;<i> obviously don't want to do special case code for unity which will be a
</I>&gt;<i> pain to drag along in the future.
</I>&gt;<i>
</I>&gt;<i> jonas
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032003.html">[Mono-dev] Mono Debugger and Mono 2.4
</A></li>
	<LI>Next message: <A HREF="032053.html">[Mono-dev] Mono Debugger and Mono 2.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32049">[ date ]</a>
              <a href="thread.html#32049">[ thread ]</a>
              <a href="subject.html#32049">[ subject ]</a>
              <a href="author.html#32049">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
