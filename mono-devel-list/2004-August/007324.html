<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Prevalence of pointer-integral-pointer casting in mono?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Prevalence%20of%20pointer-integral-pointer%20casting%20in%20mono%3F&In-Reply-To=1091409818.8406.16.camel%40melchior">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007320.html">
   <LINK REL="Next"  HREF="007319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Prevalence of pointer-integral-pointer casting in mono?</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Prevalence%20of%20pointer-integral-pointer%20casting%20in%20mono%3F&In-Reply-To=1091409818.8406.16.camel%40melchior"
       TITLE="[Mono-devel-list] Prevalence of pointer-integral-pointer casting in mono?">lupus at ximian.com
       </A><BR>
    <I>Mon Aug  2 04:53:33 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007320.html">[Mono-devel-list] Prevalence of pointer-integral-pointer casting in mono?
</A></li>
        <LI>Next message: <A HREF="007319.html">[Mono-devel-list] Daily Packages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7324">[ date ]</a>
              <a href="thread.html#7324">[ thread ]</a>
              <a href="subject.html#7324">[ subject ]</a>
              <a href="author.html#7324">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/01/04 Jonathan Pryor wrote:
&gt;<i> On Sun, 2004-08-01 at 20:44, Peter Colson wrote:
</I>&gt;<i> &gt; A general code question. Does the mono runtime make extensive use of the
</I>&gt;<i> &gt; casting of pointers to integral types and then casting back to a
</I>&gt;<i> &gt; pointer, expecting the pointer to be useable?
</I>&gt;<i> 
</I>&gt;<i> I'm not sure about Mono, but glib (one of Mono's dependencies) does
</I>&gt;<i> this.  It is generally assumed that a gint can be held in a gpointer.
</I>
Yes, but this is the opposite problem:
*) you can store an int in a pointer and get back the int if you use the
glib macros
*) you can't store a pointer in an int and get back the pointer

Now, since mono had a couple of 64 bit ports, there should not be issues
like that in the code (don't remember if we ever had bugs like that,
anyway).
I'm sure that in some places a long or unsigned long is used to hold a
possible pointer value: this is a problem, but only on broken platforms
that defined a long to be 32 bits even on 64 bits platforms (you guessed
it right, apparently windows on 64 bit cpus is the only 'modern' OS to
inflict that model on developers). So, there is no hurry to fix this
(and the general mono code shouldn't have that pattern, it's just in
some jit code so probably just the amd64 support needs to be audited).
On all the Linux-based platforms assuming a long contains a pointer is
fine.

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007320.html">[Mono-devel-list] Prevalence of pointer-integral-pointer casting in mono?
</A></li>
	<LI>Next message: <A HREF="007319.html">[Mono-devel-list] Daily Packages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7324">[ date ]</a>
              <a href="thread.html#7324">[ thread ]</a>
              <a href="subject.html#7324">[ subject ]</a>
              <a href="author.html#7324">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
