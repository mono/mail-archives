<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Prevalence of pointer-integral-pointer casting	in mono?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Prevalence%20of%20pointer-integral-pointer%20casting%09in%20mono%3F&In-Reply-To=1091597772.4451.101.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007411.html">
   <LINK REL="Next"  HREF="007341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Prevalence of pointer-integral-pointer casting	in mono?</H1>
    <B>Paolo Molaro</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Prevalence%20of%20pointer-integral-pointer%20casting%09in%20mono%3F&In-Reply-To=1091597772.4451.101.camel%40localhost.localdomain"
       TITLE="[Mono-devel-list] Prevalence of pointer-integral-pointer casting	in mono?">lupus at ximian.com
       </A><BR>
    <I>Thu Aug  5 06:26:02 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007411.html">[Mono-devel-list] Prevalence of pointer-integral-pointer	casting in mono?
</A></li>
        <LI>Next message: <A HREF="007341.html">[Mono-devel-list] Prevalence of pointer-integral-pointer castingin mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7367">[ date ]</a>
              <a href="thread.html#7367">[ thread ]</a>
              <a href="subject.html#7367">[ subject ]</a>
              <a href="author.html#7367">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/04/04 Peter Colson wrote:
&gt;<i> To clarify, the platform concerned is the AS/400. It's not a full-blown
</I>&gt;<i> 128-bit platform as such, however pointers are represented as 128-bit
</I>&gt;<i> entities.
</I>
How much of that is the compiler doing weird things or the cpu requiring
that setup (like, for example, how function descriptors are used on some
archs)? The code generated by mono can have different behaviour than
the code generated by the C compiler used to compile mono. There is a
more-or-less defined interface that deals with going from managed to
unmanaged code, so if you'd need conversion code between the two worlds
it could go there. Not saying this will be particularly easy, but it's doable.
A quick google search seems to suggest that on as/400 the address space
is 48 bits, there are flags to compile code so that pointers are 8 bytes
long (even if it might not be the default). So this is another path that
could be taken (note, I know nothing about as/400, so I may have got
things wrong).
If the above is not applicable, you'll have to support 128 bit pointers
in the jitted code, too. This requires a bit of work if a register can't
hold a pointer (similar to how 64 bit ints are handled on 32 bit archs).
Of course, the places where the runtime assumes a pointer can be stored
in a 64 bit int needs fixing.
Anyway, if I were you, I'd first look at how feasible is a libgc port,
since that is a requirement of mono anyway.

lupus

-- 
-----------------------------------------------------------------
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at debian.org</A>                                     debian/rules
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>                             Monkeys do it better

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007411.html">[Mono-devel-list] Prevalence of pointer-integral-pointer	casting in mono?
</A></li>
	<LI>Next message: <A HREF="007341.html">[Mono-devel-list] Prevalence of pointer-integral-pointer castingin mono?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7367">[ date ]</a>
              <a href="thread.html#7367">[ thread ]</a>
              <a href="subject.html#7367">[ subject ]</a>
              <a href="author.html#7367">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
