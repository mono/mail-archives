<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Using floats with decimal comma from MS-SQL db (internationalisation)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Using%20floats%20with%20decimal%20comma%20from%20MS-SQL%20db%20%28internationalisation%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008191.html">
   <LINK REL="Next"  HREF="008212.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Using floats with decimal comma from MS-SQL db (internationalisation)</H1>
    <B>Martin Honermeyer</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Using%20floats%20with%20decimal%20comma%20from%20MS-SQL%20db%20%28internationalisation%29&In-Reply-To="
       TITLE="[Mono-devel-list] Using floats with decimal comma from MS-SQL db (internationalisation)">maze at strahlungsfrei.de
       </A><BR>
    <I>Sun Oct  3 18:24:59 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008191.html">[Mono-devel-list] Using floats with decimal comma from MS-SQL db (internationalisation)
</A></li>
        <LI>Next message: <A HREF="008212.html">[Mono-devel-list] Re: Using floats with decimal comma from MS-SQL db (internationalisation)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8180">[ date ]</a>
              <a href="thread.html#8180">[ thread ]</a>
              <a href="subject.html#8180">[ subject ]</a>
              <a href="author.html#8180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

there is a big problem with using Float or Money values with DataSets and
SqlClient on MS-SQL Server.

I am doing a query from a table with Money values. Those are returned with
decimal comma, as we are having a localized German database. Using a
DataSet with a DataReader and a prepared update command, updating fails.
This is because the comma is recognized as a separator between different
fields.

I worked around this by changing the NumberFormatInfo of the Culture in the
current thread. This works as long as the float fields are changed
(rewritten) before the adapter.Update(). 

If not all float fields are changed in between, the update fails again,
because the update statement is filled with the original field values, with
contain the decimal comma.


To cut a long story short, in my opinion this is a real shortcoming,
supposedly in the TDS client code. From my point of view, it doesn't seem
to convert float and money values correctly! This is really bad behaviour
and I won't be able to get my program any further without a fix..


Appreciating any help!

Greetz,
Martin



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008191.html">[Mono-devel-list] Using floats with decimal comma from MS-SQL db (internationalisation)
</A></li>
	<LI>Next message: <A HREF="008212.html">[Mono-devel-list] Re: Using floats with decimal comma from MS-SQL db (internationalisation)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8180">[ date ]</a>
              <a href="thread.html#8180">[ thread ]</a>
              <a href="subject.html#8180">[ subject ]</a>
              <a href="author.html#8180">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
