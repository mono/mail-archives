<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Mono ResourceReader - known problems?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Mono%20ResourceReader%20-%20known%20problems%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008423.html">
   <LINK REL="Next"  HREF="008478.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Mono ResourceReader - known problems?</H1>
    <B>Anset</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Mono%20ResourceReader%20-%20known%20problems%3F&In-Reply-To="
       TITLE="[Mono-devel-list] Mono ResourceReader - known problems?">anset at anset.org
       </A><BR>
    <I>Fri Oct 22 10:03:47 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008423.html">[Mono-devel-list] Mono ResourceReader - known problems?
</A></li>
        <LI>Next message: <A HREF="008478.html">[Mono-devel-list] System.Web.Security.FormAuthentication	encryption?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8428">[ date ]</a>
              <a href="thread.html#8428">[ thread ]</a>
              <a href="subject.html#8428">[ subject ]</a>
              <a href="author.html#8428">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well,

an update for those who want it:

The Resourcereader is not the problem. The problem apparantly lies with the
IFormatter (the binary one).
I haven't traced the problem further down yet, but I did find a workaround.

What I was doing was serializing a self made object that containd to
ListDictionaries of two other self made objects. (the listdictionary does
not seem to serialize well between .net and mono, so I implemented the
serialise inerface, transforming the listdictionaries to simple arrays)
The two child objects contain only primitive types plus a pixdata object.
(which is Why I implemented the serialize interface for those two objects
aswel.)

Reading such a resource file with mono (even when the file was written by
mono) would only read the top object, it would not decend to the second
level self made objects.

I've worked around the problem now by not making the top object serialise
itself, but rather adding the second level objects one at a time to the
resource file. This does mean I have to do some post-processing on the
restored objects, but I can live with that.

I do not think I will look further at this, but maybe someone should try and
find out why it takes 30 seconds to resource-read a file on mono when it
takes about 2 seconds on windows...

The delay is (again) with the formatter... From the opening of the
resourcereader until the &quot;deserialise&quot; commad in ResourceReader, everything
goes fast, then it hangs 30 seconds with mono taking 90%-100% cpu, and then
it goes to my serialise constructor methods and everything goes fast again.

There is something going on between the time mono enters the
formater.deserialize method and it gets to my serialise ctr...

wkr,

Anset

----- Original Message ----- 
From: &quot;Anset&quot; &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">anset at anset.org</A>&gt;
To: &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">mono-devel-list at lists.ximian.com</A>&gt;
Sent: Friday, October 22, 2004 11:53 AM
Subject: [Mono-devel-list] Mono ResourceReader - known problems?


&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Are there any known problems with the mono ResourceReader class?
</I>&gt;<i>
</I>&gt;<i> I've got a program that works both on windows/.net and linux/mono.
</I>&gt;<i> The program writes a resource file (uwing ResourceWriter). And Reads it
</I>back
&gt;<i> in.
</I>&gt;<i>
</I>&gt;<i> Reading a resource file on Windows works. The resource file can be
</I>generated
&gt;<i> with .net or with mono. Both work.
</I>&gt;<i> On Linux however, reading a resource file does not work. no data is taken
</I>&gt;<i> in.... It does not matter where the resource file is created.
</I>&gt;<i>
</I>&gt;<i> I did some more simple project tests, and there the reader does work...
</I>&gt;<i>
</I>&gt;<i> I'm now looking at the class sources, but I would appreciate it if anybody
</I>&gt;<i> who knows about a problem, could say so.
</I>&gt;<i>
</I>&gt;<i> thank you for your time,
</I>&gt;<i>
</I>&gt;<i> Anset
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008423.html">[Mono-devel-list] Mono ResourceReader - known problems?
</A></li>
	<LI>Next message: <A HREF="008478.html">[Mono-devel-list] System.Web.Security.FormAuthentication	encryption?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8428">[ date ]</a>
              <a href="thread.html#8428">[ thread ]</a>
              <a href="subject.html#8428">[ subject ]</a>
              <a href="author.html#8428">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
