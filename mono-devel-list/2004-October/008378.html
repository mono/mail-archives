<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Re: Improved and fixed mcs /doc patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20Improved%20and%20fixed%20mcs%20/doc%20patch&In-Reply-To=41749875.4000509%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008368.html">
   <LINK REL="Next"  HREF="008586.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Re: Improved and fixed mcs /doc patch</H1>
    <B>Marek Safar</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Re%3A%20Improved%20and%20fixed%20mcs%20/doc%20patch&In-Reply-To=41749875.4000509%40ximian.com"
       TITLE="[Mono-devel-list] Re: Improved and fixed mcs /doc patch">marek.safar at seznam.cz
       </A><BR>
    <I>Tue Oct 19 04:04:11 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008368.html">[Mono-devel-list] Re: Improved and fixed mcs /doc patch
</A></li>
        <LI>Next message: <A HREF="008586.html">[Mono-devel-list] Re: Improved and fixed mcs /doc patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8378">[ date ]</a>
              <a href="thread.html#8378">[ thread ]</a>
              <a href="subject.html#8378">[ subject ]</a>
              <a href="author.html#8378">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Eno,

&gt;<i>Please, don't remove devel-list from CC.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>As you want ;-)

&gt;&gt;<i>I love these tests. Just add comparison to makefile and it will be great.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Actually we can't. They are literally different. But we can still add
</I>&gt;<i>comparison code by using canonicalization or something else.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>I don't understand where is the problem, with line ending or somewhere else.

&gt;&gt;<i>It would be really good to have this CreateMemberComment inside of class derived from MemberCore instead of in the lexer.
</I>&gt;&gt;<i>e.g
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>method.SetComment (xml_data);
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>No, original idea was little different. Look at this.

+ if (Lexer.xml_comment_buffer.Length &gt; 0)
+ e.Documentation = CreateMemberComment (&quot;E:&quot; + MakeName (e.MemberName));

It seems to me that you are doing things that should be done inside a
class outside. When I have operation that works just with class members
why it is outside of class.

&gt;<i>I could not find strong reason to do so and have separate trivial
</I>&gt;<i>overrides in each derived MemberCore just for name string (to have
</I>&gt;<i>&quot;M:&quot;, &quot;P:&quot;, &quot;F:&quot; ...). What I would do is
</I>&gt;<i>&quot;method.SetComment (string name, string xmlcomment)&quot; and hopefully
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>+			string file = el.GetAttribute (&quot;file&quot;);
</I>&gt;&gt;<i>+			string path = el.GetAttribute (&quot;path&quot;);
</I>&gt;&gt;<i>+			if (file == &quot;&quot;)
</I>&gt;&gt;<i>+				Report.Warning (1590, 1, Location, &quot;Invalid XML 'include' element; Missing 'file' attribute.&quot;);
</I>&gt;&gt;<i>+			else if (path == &quot;&quot;)
</I>&gt;&gt;<i>+				Report.Warning (1590, 1, Location, &quot;Invalid XML 'include' element; Missing 'path' attribute.&quot;);
</I>&gt;&gt;<i>Both file and path could not be &quot;&quot;.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>csc does not report both, even if both of them are missing.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>+		internal void CheckDocumentation (DeclSpace ds)
</I>&gt;&gt;<i>+		{
</I>&gt;&gt;<i>+			if (Documentation != null) {
</I>&gt;&gt;<i>+				foreach (XmlElement el in Documentation.SelectNodes (&quot;.//include&quot;))
</I>&gt;&gt;<i>+					HandleInclude (el);
</I>&gt;&gt;<i>+				Documentation = null; // release the reference
</I>&gt;&gt;<i>+			}
</I>&gt;&gt;<i>+			else if (RootContext.NeedDocument &amp;&amp;
</I>&gt;&gt;<i>+				IsExposedFromAssembly (ds) &amp;&amp;
</I>&gt;&gt;<i>+				// There are no warnings when the container also
</I>&gt;&gt;<i>+				// misses documentations.
</I>&gt;&gt;<i>+				(ds == null || ds.Documentation != null)) {
</I>&gt;&gt;<i>+				string name = MemberName.GetFullName ();
</I>&gt;&gt;<i>+				if (ds != null)
</I>&gt;&gt;<i>+					name = String.Concat (ds.MemberName.GetTypeName (), &quot;.&quot;, name);
</I>&gt;&gt;<i>+				Report.Warning (1591, 4, Location,
</I>&gt;&gt;<i>+					&quot;Missing XML comment for publicly visible type or member '{0}'&quot;, name);
</I>&gt;&gt;<i>+			}
</I>&gt;&gt;<i>+		}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Better should be move whole method to MemberCore.FixupDocumentaion
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>It was used in Operator. It was historical, and now merged.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>+			else if (RootContext.NeedDocument &amp;&amp;
</I>&gt;&gt;<i>+				IsExposedFromAssembly (ds) &amp;&amp;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * RootContext.NeedDocument is always true, isn't it ?
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>No. It is true only when /doc is passed to the command line
</I>&gt;<i>(otherwise that error should not be put).
</I>&gt;<i>  
</I>&gt;<i>
</I>
OK, but I thought that public virtual void FixupDocument (DeclSpace ds)
is called only when RootContext.NeedDocument is true.;

&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>+				string name = MemberName.GetFullName ();
</I>&gt;&gt;<i>+				if (ds != null)
</I>&gt;&gt;<i>+					name = String.Concat (ds.MemberName.GetTypeName (), &quot;.&quot;, name);
</I>&gt;&gt;<i>+				Report.Warning (1591, 4, Location,
</I>&gt;&gt;<i>+					&quot;Missing XML comment for publicly visible type or member '{0}'&quot;, name);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Report.Warning (1591, 4, Location, &quot;Missing XML comment for publicly visible type or member '{0}'&quot;, GetSignatureForError ());
</I>&gt;&gt;<i>  can be better
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Ok, fixed.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>Did you run error tests (mcs/error) too ?.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>mhm, didn't notice. Maybe having separate tests for warnings and
</I>&gt;<i>having option warnaserror would be nicer.
</I>&gt;<i>  
</I>&gt;<i>
</I>
No, I want to be sure that you didn't break any of error tests.

&gt;<i>Code (with reorganizing tests) will follow, maybe tomorrow.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>OK

Thanks,
Marek



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008368.html">[Mono-devel-list] Re: Improved and fixed mcs /doc patch
</A></li>
	<LI>Next message: <A HREF="008586.html">[Mono-devel-list] Re: Improved and fixed mcs /doc patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8378">[ date ]</a>
              <a href="thread.html#8378">[ thread ]</a>
              <a href="subject.html#8378">[ subject ]</a>
              <a href="author.html#8378">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
