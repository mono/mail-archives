<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Loading of assemblies by runtime and reflection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Loading%20of%20assemblies%20by%20runtime%20and%20reflection&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008484.html">
   <LINK REL="Next"  HREF="008486.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Loading of assemblies by runtime and reflection</H1>
    <B>Kamil Skalski</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Loading%20of%20assemblies%20by%20runtime%20and%20reflection&In-Reply-To="
       TITLE="[Mono-devel-list] Loading of assemblies by runtime and reflection">nazgul at nemerle.org
       </A><BR>
    <I>Mon Oct 25 16:11:55 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008484.html">[Mono-devel-list] Loading of assemblies by runtime and reflection
</A></li>
        <LI>Next message: <A HREF="008486.html">[Mono-devel-list] Loading of assemblies by runtime and reflection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8485">[ date ]</a>
              <a href="thread.html#8485">[ thread ]</a>
              <a href="subject.html#8485">[ subject ]</a>
              <a href="author.html#8485">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dnia poniedzia&#322;ek, 25 pa&#378;dziernika 2004 21:38, Zoltan Varga napisa&#322;:
&gt;<i>                                 Hi,
</I>&gt;<i>
</I>&gt;<i>   I would like to fix this but I can't reproduce it either with
</I>&gt;<i> current CVS or with
</I>&gt;<i> the 1.0 branch.
</I>
Hmm, strange...
I'm having this problem on two independent machines with 1.0.2 and 1.1.1 (see
below).
The issue was commented some time ago by someone, that is might be because of
two System.dlls are visible in the path, but on both machines I have only
one.
Some tips on fighting ./configure script, so I can get cvs up and running...?


[<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">nazgul at lilith</A> nazgul]$ mono --version
Mono JIT compiler version 1.0.1, (C) 2002-2004 Novell, Inc and Contributors.
www.go-mono.com
        TLS:           normal
        GC:            Included Boehm (with typed GC)
        SIGSEGV      : normal
        Globalization: ICU
[<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">nazgul at lilith</A> nazgul]$ cat &gt; t.cs
using System;
using System.Reflection;

public class Test {
       static void Main () {
         Console.WriteLine (typeof (int).Assembly.ToString ());
         Assembly a = System.Reflection.Assembly.LoadFrom
                          (&quot;///usr/lib/mono/1.0/System.dll&quot;);
         System.Net.Dns.GetHostByName (&quot;localhost&quot;);
       }
}

[<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">nazgul at lilith</A> nazgul]$ mcs t.cs
Compilation succeeded
[<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">nazgul at lilith</A> nazgul]$ mono t.exe
mscorlib, Version=1.0.5000.0, Culture=neutral,
 PublicKeyToken=b77a5c561934e089

Unhandled Exception: System.NullReferenceException: Object reference not set
to an instance of an object
in (unmanaged) (wrapper managed-to-native)
System.Net.Dns:GetHostByName_internal (string,string&amp;,string[]&amp;,string[]&amp;)
in &lt;0x00004&gt; (wrapper managed-to-native)
 System.Net.Dns:GetHostByName_internal (string,string&amp;,string[]&amp;,string[]&amp;)
in &lt;0x0005a&gt; System.Net.Dns:GetHostByName (string)
in &lt;0x0004f&gt; Test:Main ()


and


[<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">nazgul at mordor</A> testsuite]$ mono --version
Mono JIT compiler version 1.1.1, (C) 2002-2004 Novell, Inc and Contributors.
www.go-mono.com
        TLS:           normal
        GC:            Included Boehm (with typed GC)
        SIGSEGV      : normal
        Globalization: ICU
[<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">nazgul at mordor</A> testsuite]$ cat &gt; t.cs
using System;
using System.Reflection;

public class Test {
       static void Main () {
         Console.WriteLine (typeof (int).Assembly.ToString ());
         Assembly a = System.Reflection.Assembly.LoadFrom
                          (&quot;///usr/lib/mono/1.0/System.dll&quot;);
         System.Net.Dns.GetHostByName (&quot;localhost&quot;);
       }
}

[<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">nazgul at mordor</A> testsuite]$ mcs t.cs
Compilation succeeded
[<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">nazgul at mordor</A> testsuite]$ mono t.exe
mscorlib, Version=1.0.5000.0, Culture=neutral,
 PublicKeyToken=b77a5c561934e089

Unhandled Exception: System.NullReferenceException: Object reference not set
to an instance of an object
in &lt;0xc69571d2&gt; (wrapper managed-to-native)
System.Net.Dns:GetHostByName_internal (string,string&amp;,string[]&amp;,string[]&amp;)
in &lt;0x00004&gt; (wrapper managed-to-native)
 System.Net.Dns:GetHostByName_internal (string,string&amp;,string[]&amp;,string[]&amp;)
in &lt;0x00057&gt; System.Net.Dns:GetHostByName (string)
in &lt;0x0004c&gt; Test:Main ()

&gt;<i>                 Zoltan
</I>&gt;<i>
</I>&gt;<i> On Mon, 25 Oct 2004 21:16:01 +0200, Kamil Skalski &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">nazgul at nemerle.org</A>&gt;
</I>
wrote:
&gt;<i> &gt; Hi!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am trying to make some investigation on
</I>&gt;<i> &gt; <A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=61152">http://bugzilla.ximian.com/show_bug.cgi?id=61152</A>
</I>&gt;<i> &gt; so I tracked what is called by Assembly.LoadFrom. It seems that this is
</I>&gt;<i> &gt; the same code, which is used by runtime to load referenced assemblies
</I>&gt;<i> &gt; (mono_assembly_load_from in metadata/assembly.c).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can anybody comment if it is true? I don't think that erasure of runtime
</I>&gt;<i> &gt; loaded assemblies by reflecting some with the same name is a good
</I>&gt;<i> &gt; behaviour.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; But even if it is, is shouldn't cause setting system_assembly in
</I>&gt;<i> &gt; socket-io.c to NULL.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I wanted to do some more debugging, but I have some problems running mono
</I>&gt;<i> &gt; cvs version:
</I>&gt;<i> &gt; checking how to run the C++ preprocessor... /lib/cpp
</I>&gt;<i> &gt; configure: error: C++ preprocessor &quot;/lib/cpp&quot; fails sanity check
</I>&gt;<i> &gt; See `config.log' for more details.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The config.log file ends with some invalid preprocessor directives:
</I>&gt;<i> &gt; #define VERSION &quot;1.1.1&quot;
</I>&gt;<i> &gt; #endif
</I>&gt;<i> &gt; #ifdef __cplusplus
</I>&gt;<i> &gt; void exit (int);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It's probably some issue with automake generating bad configure script...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sorry for this probably bogus message, but the 61152 problem is open now
</I>&gt;<i> &gt; for a few months and IMHO it seems to be quite critical issue. Especially
</I>&gt;<i> &gt; if it occurs in some more sofisticated scenarios with reflecting
</I>&gt;<i> &gt; assemblies with various versions.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Just to put some positive comments, you guys are doing great job.
</I>&gt;<i> &gt; According to our summary
</I>&gt;<i> &gt; (<A HREF="http://nemerle.org/wiki/index.php/Runtime_issues">http://nemerle.org/wiki/index.php/Runtime_issues</A>), mono has currently
</I>&gt;<i> &gt; less open bugs interfering with our project than MS.NET.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Kamil Skalski
</I>&gt;<i> &gt; <A HREF="http://nemerle.org">http://nemerle.org</A> developer
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mono-devel-list mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>
--
Kamil Skalski
<A HREF="http://nemerle.org">http://nemerle.org</A> developer

-------------------------------------------------------

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008484.html">[Mono-devel-list] Loading of assemblies by runtime and reflection
</A></li>
	<LI>Next message: <A HREF="008486.html">[Mono-devel-list] Loading of assemblies by runtime and reflection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8485">[ date ]</a>
              <a href="thread.html#8485">[ thread ]</a>
              <a href="subject.html#8485">[ subject ]</a>
              <a href="author.html#8485">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
