<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] RSA and ECDH
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20RSA%20and%20ECDH&In-Reply-To=%3CCAJjm3Zd4My3AdN2jhwREq-pLbaesNwGh8F-Hk9MSn94vHebQPw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041164.html">
   <LINK REL="Next"  HREF="041168.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] RSA and ECDH</H1>
    <B>Sebastien Pouliot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20RSA%20and%20ECDH&In-Reply-To=%3CCAJjm3Zd4My3AdN2jhwREq-pLbaesNwGh8F-Hk9MSn94vHebQPw%40mail.gmail.com%3E"
       TITLE="[Mono-dev] RSA and ECDH">sebastien.pouliot at gmail.com
       </A><BR>
    <I>Mon Feb 17 01:04:38 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="041164.html">[Mono-dev] RSA and ECDH
</A></li>
        <LI>Next message: <A HREF="041168.html">[Mono-dev] RSA and ECDH
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41166">[ date ]</a>
              <a href="thread.html#41166">[ thread ]</a>
              <a href="subject.html#41166">[ subject ]</a>
              <a href="author.html#41166">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello guys,

There's quite a few misconceptions in the above thread. There's a lot of
places that could be/do better but misidentifying them is not helpful (and
they are fairly googl'able assertions to be validated).

On Sun, Feb 16, 2014 at 3:03 PM, Edward Ned Harvey (mono) &lt;
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">edward.harvey.mono at clevertrove.com</A>&gt; wrote:

&gt;<i> &gt; From: Ian Norton [mailto:<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">inorton at gmail.com</A>]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi folks.
</I>&gt;<i> &gt; Key generation can be hugely different on different platforms.
</I>&gt;<i> Essentially for
</I>&gt;<i> &gt; RSA you need to generate two huge random integers and do primality checks
</I>&gt;<i> &gt; on them.
</I>&gt;<i> &gt; This is always going to be fairly nondeterministic in terms of time.
</I>&gt;<i>
</I>
True words.

As for Mono this is entirely done in managed code. It means it's always
available anywhere you can run mono (without any additional dependencies),
i.e. you got mono, you got crypto and SSL/TLS. It also means it's not
optimized like it's generally is for most platforms (and yes, even in 2014,
most platforms still use hand-written assembly code for this).

OTOH Mono/.NET (and it's cryptographic stack) is easily extended so you're
free to add/replace cryptographic code with native code (e.g. Xamarin.iOS
does this using Apple's CommonCrypto and there are other examples in Mono's
crimson git repository).


&gt;<i> &gt; What really matters for performance of TLS is the speed at which you can
</I>&gt;<i> do
</I>&gt;<i> &gt; a decrypt using RSA.
</I>

Good (but incomplete). Both encrypt and decrypt speeds are important -
depending on which side of the SSL channel (i.e. client or server, both
supported by Mono) you are. The use of client certificates also affect
which operation is critical.


&gt;<i> The best way to measure this is to generate one key.
</I>&gt;<i> &gt; Start the stopwatch and do lots of signatures of about 20-60 bytes of
</I>&gt;<i> data.
</I>&gt;<i>
</I>
Again true - but let me emphasis that the &quot;generate one key&quot; is _not_
important above. The important (true) part is that you start the watch dog
after the key generation.


&gt;<i>
</I>&gt;<i> I think you meant to respond to the list and not just me, so I included
</I>&gt;<i> your whole text above.  And my response:
</I>&gt;<i>
</I>&gt;<i> This is true - by nature of the fact that you have to start with a random
</I>&gt;<i> number, and from there, perform a search for a prime.  If you're lucky, you
</I>&gt;<i> could get a prime on the first random pick, and if you're unlucky, you
</I>&gt;<i> could be required to search for a long time before you find a prime.
</I>&gt;<i>
</I>
Yup!


&gt;<i>
</I>&gt;<i> But when the time required is *usually* 20-40 seconds, as opposed to
</I>&gt;<i> usually 1-2 sec...
</I>

Proving a prime is not easy (nor fast) and it's easy to take shortcuts. We
try to say away from them and ensure any key we generate is safe to use,
now and in the future.

OTOH all our BigInteger code is available. You can optimize it or the way
you wish your prime numbers to be tested - they'll be yours after all ;-)



&gt;<i> And this is a blocking operation,
</I>

Wrong!


&gt;<i> and it's necessary to establish an https connection (or anything else
</I>&gt;<i> using SSL/TLS) ...
</I>

Please re-read the TLS RFC (any of them) and tell me where you need to
_generate_ an RSA keypair to establish an SSL/TLS connection ?!?

Now that does not make mono faster at generating key pairs - but it makes
it unimportant for 99% of use cases I can dream of (including SSL/TLS).


&gt;<i>  That is well outside of the normal user tolerance.
</I>&gt;<i>
</I>
A good thing it does not matter :-)


&gt;<i>
</I>&gt;<i> Normally, all we need to do is generate a keypair, and then encrypt
</I>&gt;<i> something on par with 32-128 bytes, to perform an AES key exchange, and
</I>&gt;<i> then never care about the RSA key again.
</I>

No, this is not how SSL/TLS works. Do you normally trash for physical keys
after each use ? I don't.

As for virtual keys I bet certificate sellers would be thrilled if this was
the case ;-) Thankfully it's not something required for SSL/TLS.


&gt;<i> So I humbly disagree that the speed of encryption / decryption is what
</I>&gt;<i> matters.
</I>

and I disagree with your disagreement.

You might state that mono key generation is slow and I'll agree (your data
shows this);

You might state that mono's SSL/TLS is slow and I'll agree (no data given
but it's never been a secret, the implementation sits on a wholly managed
code base);

But if you state that SSL/TLS is slow because of the key generation then
you'll not get my agreement (your assertion is wrong);



&gt;<i> What matters is the total time to perform session key exchange (AES or
</I>&gt;<i> whatever algorithm was negotiated), which includes the time to generate the
</I>&gt;<i> RSA key.
</I>&gt;<i>
</I>
Right (total) and wrong (key generation).

Sebastien
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140216/5b7ede34/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20140216/5b7ede34/attachment.html</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041164.html">[Mono-dev] RSA and ECDH
</A></li>
	<LI>Next message: <A HREF="041168.html">[Mono-dev] RSA and ECDH
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41166">[ date ]</a>
              <a href="thread.html#41166">[ thread ]</a>
              <a href="subject.html#41166">[ subject ]</a>
              <a href="author.html#41166">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
