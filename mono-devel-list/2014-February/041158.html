<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] RSA and ECDH
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20RSA%20and%20ECDH&In-Reply-To=%3C25132d529c074823819bebb8109e1dee%40BL2PR08MB451.namprd08.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041157.html">
   <LINK REL="Next"  HREF="041159.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] RSA and ECDH</H1>
    <B>Edward Ned Harvey (mono)</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20RSA%20and%20ECDH&In-Reply-To=%3C25132d529c074823819bebb8109e1dee%40BL2PR08MB451.namprd08.prod.outlook.com%3E"
       TITLE="[Mono-dev] RSA and ECDH">edward.harvey.mono at clevertrove.com
       </A><BR>
    <I>Sun Feb 16 15:51:17 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="041157.html">[Mono-dev] RSA and ECDH
</A></li>
        <LI>Next message: <A HREF="041159.html">[Mono-dev] RSA and ECDH
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41158">[ date ]</a>
              <a href="thread.html#41158">[ thread ]</a>
              <a href="subject.html#41158">[ subject ]</a>
              <a href="author.html#41158">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here are my RSA benchmark results:

Conclusion is that RSA key generation is expensive no matter what, but it's 20x-40x worse on mono.

.NET 4.0, Win 8.1 VM inside a Mac, Debug build, 3 trials average:
1024	27 ms
2048	80 ms
3072	673 ms

.NET 4.0, Win 8.1 VM inside a Mac, Release build, 3 trials average:
1024	14 ms
2048	94 ms
3072	1,273 ms

Mono 3.2.5 on Mac OSX, compiled by VS Debug, 3 trials average:
1024	505 ms
2048	4,718 ms
3072	42,972 ms

Mono 3.2.5 on Mac OSX, compiled by VS Release, 3 trials average:
1024	883 ms
2048	8,310 ms
3072	40,284 ms

Mono 3.2.5 on Mac OSX, compiled by xbuild Debug, 3 trials average:
1024	894 ms
2048	5,756 ms
3072	35,273 ms

Mono 3.2.5 on Mac OSX, compiled by xbuild Release, 3 trials average:
1024	1,215 ms
2048	12,966 ms
3072	18,952 ms

Code to generate these results:

using System;
using System.Collections.Generic;
using System.Security.Cryptography;

namespace FunWithRSAKeys
{
    class Program
    {
        static void Main(string[] args)
        {
            const int numRuns = 3;
            long beforeTicks;
            long afterTicks;
            RSACryptoServiceProvider RSACSP;
            int[] keySizes = { 1024, 2048, 3072 };
            Dictionary&lt;int, double[]&gt; results = new Dictionary&lt;int, double[]&gt;();
            foreach (int keySize in keySizes)
                results[keySize] = new double[numRuns];

            for (int i = 0; i &lt; numRuns; i++)
            {
                System.Console.WriteLine(&quot;-----------------------------&quot;);
                foreach (int keySize in keySizes)
                {
                    beforeTicks = DateTime.UtcNow.Ticks;
                    RSACSP = new RSACryptoServiceProvider(keySize);
                    RSACSP.ExportParameters(false);   // Minimum effort to guarantee key will actually be generated
                    afterTicks = DateTime.UtcNow.Ticks;
                    double seconds = (double)(afterTicks - beforeTicks) / (double)TimeSpan.TicksPerSecond;
                    results[keySize][i] = seconds;
                    System.Console.WriteLine(keySize.ToString() + &quot; &quot; + seconds.ToString());
                }
            }
            System.Console.WriteLine(&quot;----------------------------- Results&quot;);
            foreach(int keySize in keySizes)
            {
                System.Console.WriteLine(keySize.ToString() + &quot; &quot; + avg(results[keySize]).ToString());
            }
            System.Console.WriteLine(&quot;-----------------------------&quot;);
            System.Threading.Thread.Sleep(int.MaxValue);
        }
        static double avg(double[] values)
        {
            double result = 0;
            foreach (double value in values)
                result += value / values.Length;
            return result;
        }
    }
}
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041157.html">[Mono-dev] RSA and ECDH
</A></li>
	<LI>Next message: <A HREF="041159.html">[Mono-dev] RSA and ECDH
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41158">[ date ]</a>
              <a href="thread.html#41158">[ thread ]</a>
              <a href="subject.html#41158">[ subject ]</a>
              <a href="author.html#41158">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
