<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] RSA and ECDH
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20RSA%20and%20ECDH&In-Reply-To=%3C5300E0C7.7090508%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041158.html">
   <LINK REL="Next"  HREF="041160.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] RSA and ECDH</H1>
    <B>Brandon Perry</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=Re%3A%20%5BMono-dev%5D%20RSA%20and%20ECDH&In-Reply-To=%3C5300E0C7.7090508%40gmail.com%3E"
       TITLE="[Mono-dev] RSA and ECDH">bperry.volatile at gmail.com
       </A><BR>
    <I>Sun Feb 16 16:01:11 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="041158.html">[Mono-dev] RSA and ECDH
</A></li>
        <LI>Next message: <A HREF="041160.html">[Mono-dev] RSA and ECDH
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41159">[ date ]</a>
              <a href="thread.html#41159">[ thread ]</a>
              <a href="subject.html#41159">[ subject ]</a>
              <a href="author.html#41159">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I wonder, you are instantiating the RSACryptoServiceProvider object
after storing the before ticks, how much of the time is simply
instantiating the object? Maybe move that ahead of before ticks if you
want to measure just the key generation.

Just off-the-cuff thought.

On 02/16/2014 09:51 AM, Edward Ned Harvey (mono) wrote:
&gt;<i> Here are my RSA benchmark results:
</I>&gt;<i>
</I>&gt;<i> Conclusion is that RSA key generation is expensive no matter what, but it's 20x-40x worse on mono.
</I>&gt;<i>
</I>&gt;<i> .NET 4.0, Win 8.1 VM inside a Mac, Debug build, 3 trials average:
</I>&gt;<i> 1024	27 ms
</I>&gt;<i> 2048	80 ms
</I>&gt;<i> 3072	673 ms
</I>&gt;<i>
</I>&gt;<i> .NET 4.0, Win 8.1 VM inside a Mac, Release build, 3 trials average:
</I>&gt;<i> 1024	14 ms
</I>&gt;<i> 2048	94 ms
</I>&gt;<i> 3072	1,273 ms
</I>&gt;<i>
</I>&gt;<i> Mono 3.2.5 on Mac OSX, compiled by VS Debug, 3 trials average:
</I>&gt;<i> 1024	505 ms
</I>&gt;<i> 2048	4,718 ms
</I>&gt;<i> 3072	42,972 ms
</I>&gt;<i>
</I>&gt;<i> Mono 3.2.5 on Mac OSX, compiled by VS Release, 3 trials average:
</I>&gt;<i> 1024	883 ms
</I>&gt;<i> 2048	8,310 ms
</I>&gt;<i> 3072	40,284 ms
</I>&gt;<i>
</I>&gt;<i> Mono 3.2.5 on Mac OSX, compiled by xbuild Debug, 3 trials average:
</I>&gt;<i> 1024	894 ms
</I>&gt;<i> 2048	5,756 ms
</I>&gt;<i> 3072	35,273 ms
</I>&gt;<i>
</I>&gt;<i> Mono 3.2.5 on Mac OSX, compiled by xbuild Release, 3 trials average:
</I>&gt;<i> 1024	1,215 ms
</I>&gt;<i> 2048	12,966 ms
</I>&gt;<i> 3072	18,952 ms
</I>&gt;<i>
</I>&gt;<i> Code to generate these results:
</I>&gt;<i>
</I>&gt;<i> using System;
</I>&gt;<i> using System.Collections.Generic;
</I>&gt;<i> using System.Security.Cryptography;
</I>&gt;<i>
</I>&gt;<i> namespace FunWithRSAKeys
</I>&gt;<i> {
</I>&gt;<i>     class Program
</I>&gt;<i>     {
</I>&gt;<i>         static void Main(string[] args)
</I>&gt;<i>         {
</I>&gt;<i>             const int numRuns = 3;
</I>&gt;<i>             long beforeTicks;
</I>&gt;<i>             long afterTicks;
</I>&gt;<i>             RSACryptoServiceProvider RSACSP;
</I>&gt;<i>             int[] keySizes = { 1024, 2048, 3072 };
</I>&gt;<i>             Dictionary&lt;int, double[]&gt; results = new Dictionary&lt;int, double[]&gt;();
</I>&gt;<i>             foreach (int keySize in keySizes)
</I>&gt;<i>                 results[keySize] = new double[numRuns];
</I>&gt;<i>
</I>&gt;<i>             for (int i = 0; i &lt; numRuns; i++)
</I>&gt;<i>             {
</I>&gt;<i>                 System.Console.WriteLine(&quot;-----------------------------&quot;);
</I>&gt;<i>                 foreach (int keySize in keySizes)
</I>&gt;<i>                 {
</I>&gt;<i>                     beforeTicks = DateTime.UtcNow.Ticks;
</I>&gt;<i>                     RSACSP = new RSACryptoServiceProvider(keySize);
</I>&gt;<i>                     RSACSP.ExportParameters(false);   // Minimum effort to guarantee key will actually be generated
</I>&gt;<i>                     afterTicks = DateTime.UtcNow.Ticks;
</I>&gt;<i>                     double seconds = (double)(afterTicks - beforeTicks) / (double)TimeSpan.TicksPerSecond;
</I>&gt;<i>                     results[keySize][i] = seconds;
</I>&gt;<i>                     System.Console.WriteLine(keySize.ToString() + &quot; &quot; + seconds.ToString());
</I>&gt;<i>                 }
</I>&gt;<i>             }
</I>&gt;<i>             System.Console.WriteLine(&quot;----------------------------- Results&quot;);
</I>&gt;<i>             foreach(int keySize in keySizes)
</I>&gt;<i>             {
</I>&gt;<i>                 System.Console.WriteLine(keySize.ToString() + &quot; &quot; + avg(results[keySize]).ToString());
</I>&gt;<i>             }
</I>&gt;<i>             System.Console.WriteLine(&quot;-----------------------------&quot;);
</I>&gt;<i>             System.Threading.Thread.Sleep(int.MaxValue);
</I>&gt;<i>         }
</I>&gt;<i>         static double avg(double[] values)
</I>&gt;<i>         {
</I>&gt;<i>             double result = 0;
</I>&gt;<i>             foreach (double value in values)
</I>&gt;<i>                 result += value / values.Length;
</I>&gt;<i>             return result;
</I>&gt;<i>         }
</I>&gt;<i>     }
</I>&gt;<i> }
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041158.html">[Mono-dev] RSA and ECDH
</A></li>
	<LI>Next message: <A HREF="041160.html">[Mono-dev] RSA and ECDH
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41159">[ date ]</a>
              <a href="thread.html#41159">[ thread ]</a>
              <a href="subject.html#41159">[ subject ]</a>
              <a href="author.html#41159">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
