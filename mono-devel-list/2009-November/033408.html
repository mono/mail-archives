<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [patch] coreclr/com check + icall cleanup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5Bpatch%5D%20coreclr/com%20check%20%2B%20icall%20cleanup&In-Reply-To=1256841821.19039.10.camel%40mizar.home">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033442.html">
   <LINK REL="Next"  HREF="033416.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [patch] coreclr/com check + icall cleanup</H1>
    <B>Rodrigo Kumpera</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20%5Bpatch%5D%20coreclr/com%20check%20%2B%20icall%20cleanup&In-Reply-To=1256841821.19039.10.camel%40mizar.home"
       TITLE="[Mono-dev] [patch] coreclr/com check + icall cleanup">kumpera at gmail.com
       </A><BR>
    <I>Wed Nov  4 13:31:54 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033442.html">[Mono-dev] Partial System.Data.Services implementation
</A></li>
        <LI>Next message: <A HREF="033416.html">[Mono-dev] [patch] coreclr/com check + icall cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33408">[ date ]</a>
              <a href="thread.html#33408">[ thread ]</a>
              <a href="subject.html#33408">[ subject ]</a>
              <a href="author.html#33408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The icall removal patch is ok.

The second one is tricky. Do we really want to completely disable COM
support when running under the sandbox?
It does make sense for moonlight, but not for other users of coreclr.

I believe we should only fail COM for non-platform assemblies which has the
same result for moonlight but won't
bite future users of the sandbox code.



On Thu, Oct 29, 2009 at 4:43 PM, Sebastien Pouliot &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">sebastien at ximian.com</A>&gt;wrote:

&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> Two small/easy patches for review.
</I>&gt;<i>
</I>&gt;<i> The first one avoid calling mono_com_init when coreclr is enabled*.&#65279;
</I>&gt;<i> This avoid a crash if some assembly use [ComImport] on a type and throw
</I>&gt;<i> a TypeLoadException - which is what happens in Silverlight.
</I>&gt;<i>
</I>&gt;<i>        * For some reason (I guess it use COM for it's platform code,
</I>&gt;<i>        while Moonlight does not) &#65279;Silverlight expose [ComImport] but
</I>&gt;<i>        otherwise does not support COM (as least for application code).
</I>&gt;<i>
</I>&gt;<i> Second patch removes some internal calls (all strings except one) that
</I>&gt;<i> are not used (anymore) in the class libraries.
</I>&gt;<i>
</I>&gt;<i> Sebastien
</I>&gt;<i>
</I>&gt;<i> p.s. both patches were created from 2-6 branch but I'll commit them
</I>&gt;<i> against HEAD too.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-devel-list mailing list
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">Mono-devel-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">http://lists.ximian.com/mailman/listinfo/mono-devel-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20091104/d77c2b1b/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20091104/d77c2b1b/attachment.html</A> 
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033442.html">[Mono-dev] Partial System.Data.Services implementation
</A></li>
	<LI>Next message: <A HREF="033416.html">[Mono-dev] [patch] coreclr/com check + icall cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33408">[ date ]</a>
              <a href="thread.html#33408">[ thread ]</a>
              <a href="subject.html#33408">[ subject ]</a>
              <a href="author.html#33408">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
