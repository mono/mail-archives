<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Patch for Processes.c on Mac OSX
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%20for%20Processes.c%20on%20Mac%20OSX&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033577.html">
   <LINK REL="Next"  HREF="033595.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Patch for Processes.c on Mac OSX</H1>
    <B>Tom Philpot</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Patch%20for%20Processes.c%20on%20Mac%20OSX&In-Reply-To="
       TITLE="[Mono-dev] Patch for Processes.c on Mac OSX">tom.philpot at logos.com
       </A><BR>
    <I>Wed Nov 25 18:09:41 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033577.html">[Mono-dev] DateTimeOffset Test and Patch
</A></li>
        <LI>Next message: <A HREF="033595.html">[Mono-dev] FW:  Patch for Processes.c on Mac OSX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33570">[ date ]</a>
              <a href="thread.html#33570">[ thread ]</a>
              <a href="subject.html#33570">[ subject ]</a>
              <a href="author.html#33570">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have a patch for io-layer/processes.c where Mono on Mac OSX crashes if
trying to lock a named mutex which is not owned by the current process. The
problem is that Mono on Mac does not correctly know how to enumerate
processes.

The attached program assumes that you have built it, it then launches itself
and takes a lock on a named mutex. The first instance also tries to acquire
the lock and crashes.

The attached patch fixes the issue for us.

Again, props to Martin Potter for the discovery and the patch.

Tom

This patch is MIT/X11 licensed.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: MutexTest.cs
Type: application/octet-stream
Size: 1345 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20091125/eebfe05e/attachment-0002.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20091125/eebfe05e/attachment-0002.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: processes-patch.txt
Type: application/octet-stream
Size: 2226 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20091125/eebfe05e/attachment-0003.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20091125/eebfe05e/attachment-0003.obj</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033577.html">[Mono-dev] DateTimeOffset Test and Patch
</A></li>
	<LI>Next message: <A HREF="033595.html">[Mono-dev] FW:  Patch for Processes.c on Mac OSX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33570">[ date ]</a>
              <a href="thread.html#33570">[ thread ]</a>
              <a href="subject.html#33570">[ subject ]</a>
              <a href="author.html#33570">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
