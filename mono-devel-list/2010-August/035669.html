<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] reloading mono domain or assemblies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20reloading%20mono%20domain%20or%20assemblies&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035666.html">
   <LINK REL="Next"  HREF="035670.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] reloading mono domain or assemblies</H1>
    <B>marcus julius</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20reloading%20mono%20domain%20or%20assemblies&In-Reply-To="
       TITLE="[Mono-dev] reloading mono domain or assemblies">marcusjls at yahoo.com
       </A><BR>
    <I>Fri Aug 13 09:10:38 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="035666.html">[Mono-dev] Active Directory issues
</A></li>
        <LI>Next message: <A HREF="035670.html">[Mono-dev] reloading mono domain or assemblies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35669">[ date ]</a>
              <a href="thread.html#35669">[ thread ]</a>
              <a href="subject.html#35669">[ subject ]</a>
              <a href="author.html#35669">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We are developing a game and using C# and C++ with the help of mono. 

There are two dlls we use; Dll1 and Dll2. At run-time, I want to change (update) these dlls without restarting the game (which takes a while). Here is the code we use:

mono_domain = mono_jit_init(Dll1);

mono_world_assembly = mono_domain_assembly_open(mono_domain,Dll1);
mono_world_image = mono_assembly_get_image(mono_world_assembly);
&#160;&#160;&#160; &#160;&#160; 
mono_module_assembly = mono_domain_assembly_open(mono_domain, Dll2);
mono_module_image = mono_assembly_get_image(mono_module_assembly);

I tried two diferent ways, but neither was successful. I don't even know what is the exact error since I don't know how to debug mono in C++.

First approach was to use mono_jit_cleanup and then when the dlls are recompiled use the code above to reload the dlls.

Second approach was to close the assemblies and images and reopen them when the dlls are replaced.

Did I make a mistake and/or is there a way to do this? 

Thanks.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100813/e928e44d/attachment.html">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100813/e928e44d/attachment.html</A> 
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035666.html">[Mono-dev] Active Directory issues
</A></li>
	<LI>Next message: <A HREF="035670.html">[Mono-dev] reloading mono domain or assemblies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35669">[ date ]</a>
              <a href="thread.html#35669">[ thread ]</a>
              <a href="subject.html#35669">[ subject ]</a>
              <a href="author.html#35669">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
