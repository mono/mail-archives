<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Options needed for imported Linux libraries.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Options%20needed%20for%20imported%20Linux%20libraries.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035766.html">
   <LINK REL="Next"  HREF="035662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Options needed for imported Linux libraries.</H1>
    <B>Omar Siam</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Options%20needed%20for%20imported%20Linux%20libraries.&In-Reply-To="
       TITLE="[Mono-dev] Options needed for imported Linux libraries.">simar at gmx.net
       </A><BR>
    <I>Thu Aug 12 10:49:54 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="035766.html">[Mono-dev] invalid ELF header
</A></li>
        <LI>Next message: <A HREF="035662.html">[Mono-dev] Options needed for imported Linux libraries.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35660">[ date ]</a>
              <a href="thread.html#35660">[ thread ]</a>
              <a href="subject.html#35660">[ subject ]</a>
              <a href="author.html#35660">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I compiled a C so lib on Linux to do ioctl calls and tried to use it
with DllImport but when I pass structures by ref or StringBuilder for
returning char* buffers to my library everything is behaving strange.
The StringBuilders returned do not contain anything or I have to create
a new StringBuilder for any call to unmanged code because they are stuck
to the first value returned. The structures contain nonsense data after
the second call into the library. What am I missing? How do I compile so
libs to be mono friendly?
I tried to Marshal my structure to an HGlobal IntPtr as the docs say
passing structures by ref to unmanaged code is unsupported (.NET
obviously supports this) but that didn't help. I use mono 2.6.7 on
openSUSE 11.3. Valgrind doesn't say anything about the functions I call
from mono when I run it using a C test program.

</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035766.html">[Mono-dev] invalid ELF header
</A></li>
	<LI>Next message: <A HREF="035662.html">[Mono-dev] Options needed for imported Linux libraries.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35660">[ date ]</a>
              <a href="thread.html#35660">[ thread ]</a>
              <a href="subject.html#35660">[ subject ]</a>
              <a href="author.html#35660">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
