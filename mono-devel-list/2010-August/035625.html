<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Serialization problem in WCF
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Serialization%20problem%20in%20WCF&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035769.html">
   <LINK REL="Next"  HREF="035635.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Serialization problem in WCF</H1>
    <B>SuperCiccio</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Serialization%20problem%20in%20WCF&In-Reply-To="
       TITLE="[Mono-dev] Serialization problem in WCF">sc_030268 at yahoo.it
       </A><BR>
    <I>Fri Aug  6 10:14:07 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="035769.html">[Mono-dev] debug embedded mono
</A></li>
        <LI>Next message: <A HREF="035635.html">[Mono-dev] Serialization problem in WCF
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35625">[ date ]</a>
              <a href="thread.html#35625">[ thread ]</a>
              <a href="subject.html#35625">[ subject ]</a>
              <a href="author.html#35625">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I'm using Mono 2.6.7/MS .NET 3.5SP1
I have a serialization problem trying to make Mono WCF interact with MS WCF.

The service is defined as the following:

    [OperationContract]
    ServiceResult&lt;string&gt; TestMethod(string varA, int varB);

where ServiceResult&lt;T&gt; is a generic class for returning results, so defined:

    [Serializable]
    public class ServiceResult&lt;T&gt; : ServiceResult
    {
        public T Value { get; set; }
    }

where ServiceResult is in turn roughly

    [Serializable]
    public class ServiceResult
    {
        public bool Error { get; set; }
        public List&lt;ResultInfo&gt; ResultInfoList { get; set; }
    }

and so on..

When talking Mono &lt;-&gt; Mono or MS &lt;-&gt; MS all goes well, but when trying to
make them interact problems arise.
In particular, with Mono server, when the message returns to client (the
call terminates correctly on server) there are deserialization errors:

1) using netTcpBinding

System.ServiceModel.Dispatcher.NetDispatcherFaultException: The formatter
threw an exception while trying to deserialize the message: There was an
error while trying to deserialize parameter
<A HREF="http://tempuri.org/:TestMethodResult.">http://tempuri.org/:TestMethodResult.</A> The InnerException message was
''EndElement' 'TestMethodResult' from namespace '<A HREF="http://tempuri.org/'">http://tempuri.org/'</A> is not
expected. Expecting element '_x003C_Error_x003E_k__BackingField'.'.  Please
see InnerException for more details. ---&gt;
System.Runtime.Serialization.SerializationException: ...
   at
System.Runtime.Serialization.XmlObjectSerializerReadContext.ThrowRequiredMemberMissingException(XmlReaderDelegator
xmlReader, Int32 memberIndex, Int32 requiredIndex, XmlDictionaryString[]
memberNames)
   at ReadServiceResultOfstringFromXml(XmlReaderDelegator ,
XmlObjectSerializerReadContext , XmlDictionaryString[] ,
XmlDictionaryString[] )
   at
System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator
xmlReader, XmlObjectSerializerReadContext context)
   at
System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator
reader, String name, String ns, DataContract&amp; dataContract)


2) using basicHttpBinding

System.ServiceModel.Dispatcher.NetDispatcherFaultException: The formatter
threw an exception while trying to deserialize the message: There was an
error while trying to deserialize parameter
<A HREF="http://tempuri.org/:TestMethodResult.">http://tempuri.org/:TestMethodResult.</A> The InnerException message was 'There
was an error deserializing the object of type
myApp.ServiceResult`1[[System.String, mscorlib, Version=2.0.0.0,
Culture=neutral, PublicKeyToken=b77a5c561934e089]]. The '&lt;' character,
hexadecimal value 0x3C, cannot be included in a name. Line 1, position
304.'.  Please see InnerException for more details. ---&gt;
System.Runtime.Serialization.SerializationException: ... ---&gt;
System.Xml.XmlException: ...
   at System.Xml.XmlExceptionHelper.ThrowXmlException(XmlDictionaryReader
reader, XmlException exception)
   at System.Xml.XmlUTF8TextReader.VerifyNCName(String s)
   at System.Xml.XmlUTF8TextReader.ReadQualifiedName(PrefixHandle prefix,
StringHandle localName)
   at System.Xml.XmlUTF8TextReader.ReadStartElement()
   at System.Xml.XmlUTF8TextReader.Read()
   at System.Runtime.Serialization.XmlReaderDelegator.Read()
   at
System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator
xmlReader, XmlObjectSerializerReadContext context)
   at
System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator
reader, String name, String ns, DataContract&amp; dataContract)


Bugs in Mono serialization?
Can I do anything as a workaround?
-- 
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Serialization-problem-in-WCF-tp2316370p2316370.html">http://mono.1490590.n4.nabble.com/Serialization-problem-in-WCF-tp2316370p2316370.html</A>
Sent from the Mono - Dev mailing list archive at Nabble.com.
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035769.html">[Mono-dev] debug embedded mono
</A></li>
	<LI>Next message: <A HREF="035635.html">[Mono-dev] Serialization problem in WCF
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35625">[ date ]</a>
              <a href="thread.html#35625">[ thread ]</a>
              <a href="subject.html#35625">[ subject ]</a>
              <a href="author.html#35625">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
