<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] Serialization problem in WCF
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Serialization%20problem%20in%20WCF&In-Reply-To=1281104047529-2316370.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035625.html">
   <LINK REL="Next"  HREF="035751.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] Serialization problem in WCF</H1>
    <B>Atsushi Eno</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20Serialization%20problem%20in%20WCF&In-Reply-To=1281104047529-2316370.post%40n4.nabble.com"
       TITLE="[Mono-dev] Serialization problem in WCF">atsushieno at veritas-vos-liberabit.com
       </A><BR>
    <I>Sat Aug  7 03:43:42 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="035625.html">[Mono-dev] Serialization problem in WCF
</A></li>
        <LI>Next message: <A HREF="035751.html">[Mono-dev] Serialization problem in WCF
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35635">[ date ]</a>
              <a href="thread.html#35635">[ thread ]</a>
              <a href="subject.html#35635">[ subject ]</a>
              <a href="author.html#35635">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

If you provide a complete (i.e. runnable) code example, I can try if it 
runs fine on WCF in trunk which is far better than 2.6. Or you can try 
daily snapshot by yourself.
<A HREF="http://mono.ximian.com/daily/">http://mono.ximian.com/daily/</A>

Atsushi Eno


On 2010/08/06 23:14, SuperCiccio wrote:
&gt;<i> I'm using Mono 2.6.7/MS .NET 3.5SP1
</I>&gt;<i> I have a serialization problem trying to make Mono WCF interact with MS WCF.
</I>&gt;<i>
</I>&gt;<i> The service is defined as the following:
</I>&gt;<i>
</I>&gt;<i>      [OperationContract]
</I>&gt;<i>      ServiceResult&lt;string&gt;  TestMethod(string varA, int varB);
</I>&gt;<i>
</I>&gt;<i> where ServiceResult&lt;T&gt;  is a generic class for returning results, so defined:
</I>&gt;<i>
</I>&gt;<i>      [Serializable]
</I>&gt;<i>      public class ServiceResult&lt;T&gt;  : ServiceResult
</I>&gt;<i>      {
</I>&gt;<i>          public T Value { get; set; }
</I>&gt;<i>      }
</I>&gt;<i>
</I>&gt;<i> where ServiceResult is in turn roughly
</I>&gt;<i>
</I>&gt;<i>      [Serializable]
</I>&gt;<i>      public class ServiceResult
</I>&gt;<i>      {
</I>&gt;<i>          public bool Error { get; set; }
</I>&gt;<i>          public List&lt;ResultInfo&gt;  ResultInfoList { get; set; }
</I>&gt;<i>      }
</I>&gt;<i>
</I>&gt;<i> and so on..
</I>&gt;<i>
</I>&gt;<i> When talking Mono&lt;-&gt;  Mono or MS&lt;-&gt;  MS all goes well, but when trying to
</I>&gt;<i> make them interact problems arise.
</I>&gt;<i> In particular, with Mono server, when the message returns to client (the
</I>&gt;<i> call terminates correctly on server) there are deserialization errors:
</I>&gt;<i>
</I>&gt;<i> 1) using netTcpBinding
</I>&gt;<i>
</I>&gt;<i> System.ServiceModel.Dispatcher.NetDispatcherFaultException: The formatter
</I>&gt;<i> threw an exception while trying to deserialize the message: There was an
</I>&gt;<i> error while trying to deserialize parameter
</I>&gt;<i> <A HREF="http://tempuri.org/:TestMethodResult.">http://tempuri.org/:TestMethodResult.</A> The InnerException message was
</I>&gt;<i> ''EndElement' 'TestMethodResult' from namespace '<A HREF="http://tempuri.org/'">http://tempuri.org/'</A> is not
</I>&gt;<i> expected. Expecting element '_x003C_Error_x003E_k__BackingField'.'.  Please
</I>&gt;<i> see InnerException for more details. ---&gt;
</I>&gt;<i> System.Runtime.Serialization.SerializationException: ...
</I>&gt;<i>     at
</I>&gt;<i> System.Runtime.Serialization.XmlObjectSerializerReadContext.ThrowRequiredMemberMissingException(XmlReaderDelegator
</I>&gt;<i> xmlReader, Int32 memberIndex, Int32 requiredIndex, XmlDictionaryString[]
</I>&gt;<i> memberNames)
</I>&gt;<i>     at ReadServiceResultOfstringFromXml(XmlReaderDelegator ,
</I>&gt;<i> XmlObjectSerializerReadContext , XmlDictionaryString[] ,
</I>&gt;<i> XmlDictionaryString[] )
</I>&gt;<i>     at
</I>&gt;<i> System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator
</I>&gt;<i> xmlReader, XmlObjectSerializerReadContext context)
</I>&gt;<i>     at
</I>&gt;<i> System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator
</I>&gt;<i> reader, String name, String ns, DataContract&amp;  dataContract)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2) using basicHttpBinding
</I>&gt;<i>
</I>&gt;<i> System.ServiceModel.Dispatcher.NetDispatcherFaultException: The formatter
</I>&gt;<i> threw an exception while trying to deserialize the message: There was an
</I>&gt;<i> error while trying to deserialize parameter
</I>&gt;<i> <A HREF="http://tempuri.org/:TestMethodResult.">http://tempuri.org/:TestMethodResult.</A> The InnerException message was 'There
</I>&gt;<i> was an error deserializing the object of type
</I>&gt;<i> myApp.ServiceResult`1[[System.String, mscorlib, Version=2.0.0.0,
</I>&gt;<i> Culture=neutral, PublicKeyToken=b77a5c561934e089]]. The '&lt;' character,
</I>&gt;<i> hexadecimal value 0x3C, cannot be included in a name. Line 1, position
</I>&gt;<i> 304.'.  Please see InnerException for more details. ---&gt;
</I>&gt;<i> System.Runtime.Serialization.SerializationException: ... ---&gt;
</I>&gt;<i> System.Xml.XmlException: ...
</I>&gt;<i>     at System.Xml.XmlExceptionHelper.ThrowXmlException(XmlDictionaryReader
</I>&gt;<i> reader, XmlException exception)
</I>&gt;<i>     at System.Xml.XmlUTF8TextReader.VerifyNCName(String s)
</I>&gt;<i>     at System.Xml.XmlUTF8TextReader.ReadQualifiedName(PrefixHandle prefix,
</I>&gt;<i> StringHandle localName)
</I>&gt;<i>     at System.Xml.XmlUTF8TextReader.ReadStartElement()
</I>&gt;<i>     at System.Xml.XmlUTF8TextReader.Read()
</I>&gt;<i>     at System.Runtime.Serialization.XmlReaderDelegator.Read()
</I>&gt;<i>     at
</I>&gt;<i> System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator
</I>&gt;<i> xmlReader, XmlObjectSerializerReadContext context)
</I>&gt;<i>     at
</I>&gt;<i> System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator
</I>&gt;<i> reader, String name, String ns, DataContract&amp;  dataContract)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Bugs in Mono serialization?
</I>&gt;<i> Can I do anything as a workaround?
</I>&gt;<i>    
</I>
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035625.html">[Mono-dev] Serialization problem in WCF
</A></li>
	<LI>Next message: <A HREF="035751.html">[Mono-dev] Serialization problem in WCF
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35635">[ date ]</a>
              <a href="thread.html#35635">[ thread ]</a>
              <a href="subject.html#35635">[ subject ]</a>
              <a href="author.html#35635">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
