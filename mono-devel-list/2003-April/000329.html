<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] freeing intermediate structures in mcs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20freeing%20intermediate%20structures%20in%20mcs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000327.html">
   <LINK REL="Next"  HREF="000331.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] freeing intermediate structures in mcs</H1>
    <B>Varga Zoltan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20freeing%20intermediate%20structures%20in%20mcs&In-Reply-To="
       TITLE="[Mono-devel-list] freeing intermediate structures in mcs">vargaz at freemail.hu
       </A><BR>
    <I>Mon Apr  7 14:22:48 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000327.html">[Mono-devel-list] mono/autogen.sh broken?
</A></li>
        <LI>Next message: <A HREF="000331.html">[Mono-devel-list] freeing intermediate structures in mcs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#329">[ date ]</a>
              <a href="thread.html#329">[ thread ]</a>
              <a href="subject.html#329">[ subject ]</a>
              <a href="author.html#329">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
                                          Hi,

  Currently mcs retains the syntax trees for all methods
till the end of
compilation, consuming lots of memory. Is this necessary? I
tried setting
the 'block' variable to null at the end of Emit() and this
alone reduced
the peak memory used by mcs during corlib compilation by
about 10%
and it also increased its speed somewhat (due to faster
collections). 
The attached patch implements this idea.

Also, there was some talk about emitting the list of
namespaces of an
assembly into a special resource during compilation. Is this
still true?
If it is, I could make up a patch for that...

         bye

              Zoltan 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mcs.patch
Type: application/octet-stream
Size: 3003 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20030407/0fd62f2b/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20030407/0fd62f2b/attachment.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000327.html">[Mono-devel-list] mono/autogen.sh broken?
</A></li>
	<LI>Next message: <A HREF="000331.html">[Mono-devel-list] freeing intermediate structures in mcs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#329">[ date ]</a>
              <a href="thread.html#329">[ thread ]</a>
              <a href="subject.html#329">[ subject ]</a>
              <a href="author.html#329">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
