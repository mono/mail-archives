<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Typed allocation facility in runtime
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Typed%20allocation%20facility%20in%20runtime&In-Reply-To=freemail.20030303234339.23278%40fm14.freemail.hu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000278.html">
   <LINK REL="Next"  HREF="000280.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Typed allocation facility in runtime</H1>
    <B>Martin Baulig</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Typed%20allocation%20facility%20in%20runtime&In-Reply-To=freemail.20030303234339.23278%40fm14.freemail.hu"
       TITLE="[Mono-devel-list] Typed allocation facility in runtime">martin at gnome.org
       </A><BR>
    <I>Fri Apr  4 09:16:32 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000278.html">[Mono-devel-list] Typed allocation facility in runtime
</A></li>
        <LI>Next message: <A HREF="000280.html">[Mono-devel-list] Typed allocation facility in runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#276">[ date ]</a>
              <a href="thread.html#276">[ thread ]</a>
              <a href="subject.html#276">[ subject ]</a>
              <a href="author.html#276">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Varga Zoltan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">vargaz at freemail.hu</A>&gt; writes:

&gt;<i>   I added an experimental typed allocation facility to the
</I>&gt;<i> runtime. Typed
</I>&gt;<i> allocation means the Boehm collector knows the layout of
</I>&gt;<i> heap allocated
</I>&gt;<i> objects and known which words can hold pointers and which do
</I>&gt;<i> not. This
</I>&gt;<i> speeds up collection since fewer memory locations needs to
</I>&gt;<i> be examined,
</I>&gt;<i> and it also decreases the working set of applications since
</I>&gt;<i> fewer false
</I>&gt;<i> pointers are encountered by the collector. Typed allocation
</I>&gt;<i> can be turned
</I>&gt;<i> on by setting CREATION_SPEEDUP to 1 in metadata/object.c. 
</I>&gt;<i> This change speeds up corlib compilation by about 10% on my
</I>&gt;<i> machine.
</I>&gt;<i> I would appreciate if people would test this. If it works,
</I>&gt;<i> it can be made
</I>&gt;<i> the default.
</I>
Hi,

I haven't looked at the code yet, but I'd like to use something similar for the debugger's
MemoryStream implementation since it allocates very large objects which can not contain
any pointers (the contents of the symbol file).  Is it possible to call this from managed
code somehow to tell the garbage collector to allocate an object of XXX bytes which cannot
contain any pointers ?

Btw. my libgc changes will also increase corlib compilation speed since we don't need to
suspend/resume any threads anymore.

-- 
Martin Baulig
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">martin at gnome.org</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">martin at ximian.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000278.html">[Mono-devel-list] Typed allocation facility in runtime
</A></li>
	<LI>Next message: <A HREF="000280.html">[Mono-devel-list] Typed allocation facility in runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#276">[ date ]</a>
              <a href="thread.html#276">[ thread ]</a>
              <a href="subject.html#276">[ subject ]</a>
              <a href="author.html#276">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
