<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] Socket.SetSocketOption multicast patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Socket.SetSocketOption%20multicast%20patch&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000584.html">
   <LINK REL="Next"  HREF="000580.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] Socket.SetSocketOption multicast patch</H1>
    <B>Jerome Laban</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20Socket.SetSocketOption%20multicast%20patch&In-Reply-To="
       TITLE="[Mono-devel-list] Socket.SetSocketOption multicast patch">jlaban at wanadoo.fr
       </A><BR>
    <I>Mon Apr 28 16:57:32 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000584.html">[Mono-devel-list] Reflection[.Emit] / Copy an Assembly
</A></li>
        <LI>Next message: <A HREF="000580.html">[Mono-devel-list] Showstopper: mcs does not build on cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#579">[ date ]</a>
              <a href="thread.html#579">[ thread ]</a>
              <a href="subject.html#579">[ subject ]</a>
              <a href="author.html#579">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi monoers,

    Here are two patches for Socket.SetSocketOption for the options
AddMembership and DropMembership and one for the MulticastOption class.

	Three problems here, the first is that the MulticastOption
members can be set to null through its properties and can cause an
uncatchable exception in
ves_icall_System_Net_Sockets_Socket_SetSocketOption_internal function;
Just added a check for it.

    The second one is a fix for the ipaddress_to_struct_in_addr
function, which was converting the internal network ordered value of
IPAddress with htonl. Just removed the call to htonl.

    The last one is the value checking of the two MulticastOption class
ctors. Setting either group or localAddress to null throws an exception.
(as in ms.net)

Could anyone review these patches and commit if ok ?

Jerome.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MulticastOption-20030428.diff
Type: application/octet-stream
Size: 848 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20030428/e6678a06/attachment.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20030428/e6678a06/attachment.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: setsockopt-20030428.diff
Type: application/octet-stream
Size: 2590 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20030428/e6678a06/attachment-0001.obj">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20030428/e6678a06/attachment-0001.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000584.html">[Mono-devel-list] Reflection[.Emit] / Copy an Assembly
</A></li>
	<LI>Next message: <A HREF="000580.html">[Mono-devel-list] Showstopper: mcs does not build on cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#579">[ date ]</a>
              <a href="thread.html#579">[ thread ]</a>
              <a href="subject.html#579">[ subject ]</a>
              <a href="author.html#579">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
