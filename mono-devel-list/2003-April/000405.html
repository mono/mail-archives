<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-devel-list] implementing the synchronized method a
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20implementing%20the%20synchronized%20method%20a&In-Reply-To=20030413085403.GG907%40debian.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000403.html">
   <LINK REL="Next"  HREF="000406.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-devel-list] implementing the synchronized method a</H1>
    <B>Varga Zoltan</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-devel-list%5D%20implementing%20the%20synchronized%20method%20a&In-Reply-To=20030413085403.GG907%40debian.org"
       TITLE="[Mono-devel-list] implementing the synchronized method a">vargaz at freemail.hu
       </A><BR>
    <I>Mon Apr 14 05:26:12 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000403.html">[Mono-devel-list] implementing the synchronized method attribute
</A></li>
        <LI>Next message: <A HREF="000406.html">[Mono-devel-list] implementing the synchronized method a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#405">[ date ]</a>
              <a href="thread.html#405">[ thread ]</a>
              <a href="subject.html#405">[ subject ]</a>
              <a href="author.html#405">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Paolo Molaro &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">lupus at ximian.com</A>&gt; &#237;rta:

&gt;<i> On 04/12/03 Varga Zoltan wrote:
</I>&gt;<i> &gt;   I would like to implement the 'synchronized' method
</I>&gt;<i> &gt; attribute in the
</I>&gt;<i> &gt; runtime. I thought about using the wrapper facility for
</I>&gt;<i> &gt; this, i.e. creating
</I>&gt;<i> &gt; a synchronized wrapper for the method which would call the
</I>&gt;<i> &gt; non-synchronized version. Is this a good idea?
</I>&gt;<i> 
</I>&gt;<i> I don't think using a wrapper would buy you anything.
</I>&gt;<i> The best way, IMO, is to insert the calls to
</I>&gt;<i> mono_monitor_enter/mono_monitor_leave in mono_method_to_ir().
</I>&gt;<i> 
</I>
                                                Hi,

  I suggested using a wrapper because it reuses existing
code, i.e.
the wrapper would contain IL code similar to the code
generated by
mcs for this statement:
     lock (this) {
         &lt;CALL ORIGINAL METHOD&gt;
     }

This has the advantage that the exception handling stuff
comes for
free, i.e. there is no need to save the location of the this
pointer, no
need to obtain its value at runtime etc. The only change
needed in the
runtime is the substitution of the wrapper in place of the
original method
in the appropriate place. What's the problem with this
approach ?

                      bye

                          Zoltan







</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000403.html">[Mono-devel-list] implementing the synchronized method attribute
</A></li>
	<LI>Next message: <A HREF="000406.html">[Mono-devel-list] implementing the synchronized method a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#405">[ date ]</a>
              <a href="thread.html#405">[ thread ]</a>
              <a href="subject.html#405">[ subject ]</a>
              <a href="author.html#405">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
