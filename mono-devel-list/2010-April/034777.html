<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] GC Safe Points by Polling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20GC%20Safe%20Points%20by%20Polling&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034778.html">
   <LINK REL="Next"  HREF="034779.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] GC Safe Points by Polling</H1>
    <B>Sanjoy Das</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20GC%20Safe%20Points%20by%20Polling&In-Reply-To="
       TITLE="[Mono-dev] GC Safe Points by Polling">sanjoy at playingwithpointers.com
       </A><BR>
    <I>Wed Apr 14 10:35:25 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="034778.html">[Mono-dev] patch for System.Data.SqlClient -	SqlDataReader.GetValues() with SequentialAccess flag set
</A></li>
        <LI>Next message: <A HREF="034779.html">[Mono-dev] Threading parameters? Fill a DataGridView via Invoke	very slow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34777">[ date ]</a>
              <a href="thread.html#34777">[ thread ]</a>
              <a href="subject.html#34777">[ subject ]</a>
              <a href="author.html#34777">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've attached a patch that implements GC safe points via polling. I was
wondering if I could get some feedback since my GSoC work shall largely
be based on the same code.

Simply put, the idea is to stop all threads first and then advance the
ones running managed code to the next nearest safe point.

Though the patch has not been tested very extensively, I can verify that
it

 * Passes all tests run by 'make check' in the project root.
 * Passes all the mscorlib tests.
 * Causes a &lt; 2 % performance penalty with pystones / ironpython. 

The patch also includes certain other seemingly unrelated changes. They
are required for the project to build successfully.


-- 
Regards,

Sanjoy Das
<A HREF="http://playingwithpointers.com">http://playingwithpointers.com</A>
<A HREF="http://playingwithpointers.com/custom/public_key.txt">http://playingwithpointers.com/custom/public_key.txt</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: patchfile.sgen.gc_safe_points
Type: text/x-patch
Size: 14141 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100414/f8fa4f7c/attachment-0002.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100414/f8fa4f7c/attachment-0002.bin</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100414/f8fa4f7c/attachment-0003.bin">http://lists.ximian.com/pipermail/mono-devel-list/attachments/20100414/f8fa4f7c/attachment-0003.bin</A> 
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034778.html">[Mono-dev] patch for System.Data.SqlClient -	SqlDataReader.GetValues() with SequentialAccess flag set
</A></li>
	<LI>Next message: <A HREF="034779.html">[Mono-dev] Threading parameters? Fill a DataGridView via Invoke	very slow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34777">[ date ]</a>
              <a href="thread.html#34777">[ thread ]</a>
              <a href="subject.html#34777">[ subject ]</a>
              <a href="author.html#34777">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
