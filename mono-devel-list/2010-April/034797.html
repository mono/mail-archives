<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] New performance counter in Mono to report physical memory size in the machine
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20New%20performance%20counter%20in%20Mono%20to%20report%20physical%0A%20memory%20size%20in%20the%20machine&In-Reply-To=1271556889421-2014604.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034798.html">
   <LINK REL="Next"  HREF="034788.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] New performance counter in Mono to report physical memory size in the machine</H1>
    <B>Marek Habersack</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%20New%20performance%20counter%20in%20Mono%20to%20report%20physical%0A%20memory%20size%20in%20the%20machine&In-Reply-To=1271556889421-2014604.post%40n4.nabble.com"
       TITLE="[Mono-dev] New performance counter in Mono to report physical memory size in the machine">grendel at twistedcode.net
       </A><BR>
    <I>Mon Apr 19 02:35:20 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="034798.html">[Mono-dev] New performance counter in Mono to report physical memory size in the machine
</A></li>
        <LI>Next message: <A HREF="034788.html">[Mono-dev] Mono performance counters documentation - help needed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34797">[ date ]</a>
              <a href="thread.html#34797">[ thread ]</a>
              <a href="subject.html#34797">[ subject ]</a>
              <a href="author.html#34797">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 17 Apr 2010 18:14:49 -0800 (PST)
jmalcolm &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-devel-list">malcolm.justin at gmail.com</A>&gt; wrote:

Hello,
 
&gt;<i> Thanks Marek,
</I>&gt;<i> 
</I>&gt;<i> Does this live in System.Diagnostics?
</I>Yes,

&gt;<i> 
</I>&gt;<i> Does this mean that the code you posted would fail on Microsoft.NET with an
</I>&gt;<i> InvalidOperationException?
</I>Using this particular category, yes - it is described in the article as Mono-specific and the
constructor is supposed to throw the exception
(see <A HREF="http://msdn.microsoft.com/en-us/library/z0wssx8x.aspx">http://msdn.microsoft.com/en-us/library/z0wssx8x.aspx</A>)
 
&gt;<i> System.Diagnostics seems like the place Microsoft should have put it.  I am
</I>&gt;<i> just surprised to see a Mono extension that does not have it's own assembly
</I>&gt;<i> or namespace.  There are probably more that I have managed to miss or simply
</I>&gt;<i> forgotten about.
</I>There's nothing to be put in a separate assembly. The code throws an exception not because we
extended something, but because the performance counter _category_ doesn't exist
(<A HREF="http://www.mono-project.com/Mono_Performance_Counters#Category:_Mono_Memory">http://www.mono-project.com/Mono_Performance_Counters#Category:_Mono_Memory</A>) on .NET. Replace &quot;Mono
Memory&quot; with any other non-Mono specific category in the list and it will work. You are always
expected to handle the exceptions that are thrown by the class code - the sample is just a
simple snippet of code to show a technique. Performance counters are implemented in the
Mono runtime, not in managed code, so they don't belong in any assembly.

&gt;<i> 
</I>&gt;<i> Would something like the following be portable?
</I>Both your code and the sample are perfectly portable.

[snip]
&gt;<i> Sorry if this is a basic question but I am currently on a Windows machine. 
</I>&gt;<i> Building Mono from trunk on Windows is not an area of strength for me and I
</I>&gt;<i> have not really played around with this part of the framework before.
</I>I've updated the article with an extended sample and a note about the exception. I've noticed that
Mono doesn't throw the InvalidOperationException for missing categories. Will look into that later
today.

marek
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034798.html">[Mono-dev] New performance counter in Mono to report physical memory size in the machine
</A></li>
	<LI>Next message: <A HREF="034788.html">[Mono-dev] Mono performance counters documentation - help needed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34797">[ date ]</a>
              <a href="thread.html#34797">[ thread ]</a>
              <a href="subject.html#34797">[ subject ]</a>
              <a href="author.html#34797">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
