<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-dev] [HaikuPorts-devs]  [RFC 5/8] io-layer: Define makedev for Haiku
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%0A%20%3D%3Futf-8%3Fq%3F%3D5BHaikuPorts-devs%3D5D__%3D5BRFC_5/8%3D5D_io-laye%3F%3D%0A%20%3D%3Futf-8%3Fq%3Fr%3D3A_Define_makedev_for_Haiku%3F%3D&In-Reply-To=1B79AB25-5C9B-475B-8248-C6EAB3038E69%40web.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034604.html">
   <LINK REL="Next"  HREF="034590.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-dev] [HaikuPorts-devs]  [RFC 5/8] io-layer: Define makedev for Haiku</H1>
    <B>Fran&#231;ois Revol</B> 
    <A HREF="mailto:mono-devel-list%40lists.ximian.com?Subject=%5BMono-dev%5D%0A%20%3D%3Futf-8%3Fq%3F%3D5BHaikuPorts-devs%3D5D__%3D5BRFC_5/8%3D5D_io-laye%3F%3D%0A%20%3D%3Futf-8%3Fq%3Fr%3D3A_Define_makedev_for_Haiku%3F%3D&In-Reply-To=1B79AB25-5C9B-475B-8248-C6EAB3038E69%40web.de"
       TITLE="[Mono-dev] [HaikuPorts-devs]  [RFC 5/8] io-layer: Define makedev for Haiku">revol at free.fr
       </A><BR>
    <I>Fri Apr  2 13:35:08 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="034604.html">[Mono-dev] [RFC 5/8] io-layer: Define makedev for Haiku
</A></li>
        <LI>Next message: <A HREF="034590.html">[Mono-dev] [PATCH 2/8] mini: Fix unguarded uses of siginfo_t
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34688">[ date ]</a>
              <a href="thread.html#34688">[ thread ]</a>
              <a href="subject.html#34688">[ subject ]</a>
              <a href="author.html#34688">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Le Fri, 2 Apr 2010 19:18:09 +0200, Andreas F&#228;rber a &#233;crit :
&gt;<i> Hey guys,
</I>&gt;<i> 
</I>&gt;<i> First, Haiku has the POSIX dev_t type declared in sys/types.h:
</I>&gt;<i> <A HREF="http://www.opengroup.org/onlinepubs/9699919799/basedefs/sys_types.h.html">http://www.opengroup.org/onlinepubs/9699919799/basedefs/sys_types.h.html</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> Linux, BSDs, Solaris, OSX all seem to have a makedev macro or 
</I>&gt;<i> function  
</I>&gt;<i> to construct the final dev_t value from major and minor values (and  
</I>&gt;<i> major and minor macros/functions to obtain the individual values  
</I>&gt;<i> again). The stub implementation below is from FreeBSD iirc, OSX uses 
</I>&gt;<i> a  
</I>&gt;<i> different shift.
</I>&gt;<i> 
</I>&gt;<i> Should some implementation be added to Haiku?
</I>&gt;<i> 
</I>
I don't know what you want this for, but Haiku does not use the major/
minor values at all, and devfs publishes them as 0,0 for all devices 
anyway.

The dev_t is used for block devices (which are actually char devices 
currently as in BeOS because the drivers do not differentiate) which 
are mounted, but they are just an internal incremented ID.

&gt;<i> Second, the use of makedev here comes from trying to parse a dev_t  
</I>&gt;<i> value from a string in a /proc/*/map[s] file [1], in load_modules 
</I>&gt;<i> [2].  
</I>&gt;<i> Apparently Haiku does not have /proc at all.
</I>
It does not. So if you don't need makedev for anything else just drop 
it.

&gt;<i> On Mac OS X, Mono uses _dyld_get_image_* functions instead [3].
</I>&gt;<i> 
</I>&gt;<i> What could I use on Haiku to enumerate process modules, from C code?
</I>
You'll want to check get_next_image_info() from &lt;OS.h&gt;.
Set a cookie to 0, and iterate over it.

Fran&#231;ois.
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034604.html">[Mono-dev] [RFC 5/8] io-layer: Define makedev for Haiku
</A></li>
	<LI>Next message: <A HREF="034590.html">[Mono-dev] [PATCH 2/8] mini: Fix unguarded uses of siginfo_t
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34688">[ date ]</a>
              <a href="thread.html#34688">[ thread ]</a>
              <a href="subject.html#34688">[ subject ]</a>
              <a href="author.html#34688">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-devel-list">More information about the Mono-devel-list
mailing list</a><br>
</body></html>
