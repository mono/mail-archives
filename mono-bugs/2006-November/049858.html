<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 79822][Nor] Changed - &quot;new PrintDialog()&quot; takes ~2	seconds on linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2079822%5D%5BNor%5D%20Changed%20-%20%22new%20PrintDialog%28%29%22%20takes%20%7E2%0A%09seconds%20on%20linux&In-Reply-To=bug-79822%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="049857.html">
   <LINK REL="Next"  HREF="049859.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 79822][Nor] Changed - &quot;new PrintDialog()&quot; takes ~2	seconds on linux</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2079822%5D%5BNor%5D%20Changed%20-%20%22new%20PrintDialog%28%29%22%20takes%20%7E2%0A%09seconds%20on%20linux&In-Reply-To=bug-79822%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 79822][Nor] Changed - &quot;new PrintDialog()&quot; takes ~2	seconds on linux">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Fri Nov 10 09:00:14 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="049857.html">[Mono-bugs] [Bug 79891][Nor] New - Datagrid: double clicking space	between headers autosizes column
</A></li>
        <LI>Next message: <A HREF="049859.html">[Mono-bugs] [Bug 79891][Nor] Changed - Datagrid: double clicking	space between headers autosizes column
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49858">[ date ]</a>
              <a href="thread.html#49858">[ thread ]</a>
              <a href="subject.html#49858">[ subject ]</a>
              <a href="author.html#49858">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">toshok at ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=79822">http://bugzilla.ximian.com/show_bug.cgi?id=79822</A>

--- shadow/79822	2006-11-10 06:49:36.000000000 -0500
+++ shadow/79822.tmp.8025	2006-11-10 09:00:14.000000000 -0500
@@ -63,6 +63,23 @@
 Yep, the new gtk printing backend caches the list of printers but
 doesn't use cupsGetDests to get the printer list.
 
 So the heart of the problem is, when should the printer list get
 updated ? I mean, caching some strings, removing and adding them, is
 not a big problem.
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">toshok at ximian.com</A>  2006-11-10 09:00 -------
+My suggestion is to stop using the PrintingServices* classes as
+singletons.  We'll have 1 global one to handle the static
+PrinterSettings.InstalledPrinters, but the PrinterSettings instances
+as well as the PrintDialog instances should be talking to an instance
+(preferably the same) of PrintingServicesUnix.  It'll be created as
+its needed and shared amongst the other objects.
+
+cupsGetDests is a time consuming call to be sure, as are the other
+cups calls made by PrintingServicesUnix.  We can make the list code
+async by firing off the async request when a new PrintingServicesUnix
+is created and populate the dialog with those results.  But the main
+problem is that we seem to be invoking those same synchronous cups
+calls multiple times when bringing up the print dialog and futzing
+with things.  We need to cache the return values at least for the
+lifetime of the print dialog.  No other caching should be necessary.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="049857.html">[Mono-bugs] [Bug 79891][Nor] New - Datagrid: double clicking space	between headers autosizes column
</A></li>
	<LI>Next message: <A HREF="049859.html">[Mono-bugs] [Bug 79891][Nor] Changed - Datagrid: double clicking	space between headers autosizes column
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49858">[ date ]</a>
              <a href="thread.html#49858">[ thread ]</a>
              <a href="subject.html#49858">[ subject ]</a>
              <a href="author.html#49858">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
