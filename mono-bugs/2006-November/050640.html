<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 78042][Nor] Changed - [PATCH] SOAP list result	error. Mono expects response namespace,	but it shouldn't (Form property)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2078042%5D%5BNor%5D%20Changed%20-%20%5BPATCH%5D%20SOAP%20list%20result%0A%09error.%20Mono%20expects%20response%20namespace%2C%0A%09but%20it%20shouldn%27t%20%28Form%20property%29&In-Reply-To=bug-78042%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="050639.html">
   <LINK REL="Next"  HREF="050641.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 78042][Nor] Changed - [PATCH] SOAP list result	error. Mono expects response namespace,	but it shouldn't (Form property)</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2078042%5D%5BNor%5D%20Changed%20-%20%5BPATCH%5D%20SOAP%20list%20result%0A%09error.%20Mono%20expects%20response%20namespace%2C%0A%09but%20it%20shouldn%27t%20%28Form%20property%29&In-Reply-To=bug-78042%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 78042][Nor] Changed - [PATCH] SOAP list result	error. Mono expects response namespace,	but it shouldn't (Form property)">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Mon Nov 27 11:38:00 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="050639.html">[Mono-bugs] [Bug 79791][Nor] Changed - RichTextBox paste	functionality broken
</A></li>
        <LI>Next message: <A HREF="050641.html">[Mono-bugs] [Bug 78042][Nor] Changed - [PATCH] SOAP list result	error. Mono expects response namespace,	but it shouldn't (Form property)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50640">[ date ]</a>
              <a href="thread.html#50640">[ thread ]</a>
              <a href="subject.html#50640">[ subject ]</a>
              <a href="author.html#50640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=78042">http://bugzilla.ximian.com/show_bug.cgi?id=78042</A>

--- shadow/78042	2006-11-08 02:36:06.000000000 -0500
+++ shadow/78042.tmp.27371	2006-11-27 11:38:00.000000000 -0500
@@ -11,13 +11,13 @@
 AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>                            
 ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">krzymkowski at kontinuum.pl</A>               
 QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
 TargetMilestone: ---
 URL: 
 Cc: 
-Summary: SOAP list result error. Mono expects response namespace, but it shouldn't
+Summary: [PATCH] SOAP list result error. Mono expects response namespace, but it shouldn't (Form property)
 
 Description of Problem: 
 Mono expects that sub-elements of a SOAP response are in the response
 namespace. .NET expects no namespace. Please see attached SOAP responses.
 mono.soap works only on mono, dotnet.soap works only on .NET.
 The Service.wsdl and the responses are files is generated using gSOAP.
@@ -148,6 +148,46 @@
 (ctx.Response.OutputStream);
                 sw.Write (sr.ReadToEnd ());
                 sw.Close ();
         }
 }
 
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>  2006-11-27 11:38 -------
+I think I have a fix. The bug is caused because we didn't consider
+XmlArrayAttribute. This would illustrate the same issue.
+
+--------
+using System;
+using System.Xml.Schema;
+using System.Xml.Serialization;
+
+[XmlType (Namespace=&quot;urn:gyabo&quot;)]
+public class mid
+{
+        [XmlArray (Form = XmlSchemaForm.Unqualified)]
+        public string [] Whee = new string [] {&quot;foo&quot;, &quot;bar&quot;};
+}
+
+[XmlRoot (Namespace=&quot;urn:hoge&quot;)]
+public class test
+{
+        public static void Main ()
+        {
+                XmlArrayAttribute a = new XmlArrayAttribute ();
+                a.Namespace = &quot;urn:foo&quot;;
+                a.Form = XmlSchemaForm.Unqualified;
+
+                XmlSerializer ser = new XmlSerializer (typeof (test));
+                ser.Serialize (Console.Out, new test ());
+        }
+
+        [XmlArray (Form = XmlSchemaForm.Unqualified)]
+        public string [] Whoa = new string [] {&quot;foo&quot;, &quot;bar&quot;};
+
+        [XmlArray (Form = XmlSchemaForm.Unqualified)]
+        public mid [] mids = new mid [] {new mid ()};
+}
+--------
+
+I'm attaching a patch before committing, as some other guys might find
+erroneous changes.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="050639.html">[Mono-bugs] [Bug 79791][Nor] Changed - RichTextBox paste	functionality broken
</A></li>
	<LI>Next message: <A HREF="050641.html">[Mono-bugs] [Bug 78042][Nor] Changed - [PATCH] SOAP list result	error. Mono expects response namespace,	but it shouldn't (Form property)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50640">[ date ]</a>
              <a href="thread.html#50640">[ thread ]</a>
              <a href="subject.html#50640">[ subject ]</a>
              <a href="author.html#50640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
