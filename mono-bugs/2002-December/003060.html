<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 35539][Nor] New - Mono compiler generates DLL which causes exception on Windows .NET
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40rocky.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003059.html">
   <LINK REL="Next"  HREF="003061.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 35539][Nor] New - Mono compiler generates DLL which causes exception on Windows .NET
   </H1>
    <B>bugzilla-daemon@rocky.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40rocky.ximian.com"
       TITLE="[Mono-bugs] [Bug 35539][Nor] New - Mono compiler generates DLL which causes exception on Windows .NET">bugzilla-daemon@rocky.ximian.com
       </A><BR>
    <I>12 Dec 2002 21:12:21 -0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="003059.html">[Mono-bugs] [Bug 35531][Maj] New - &quot;Hello World&quot; app doesn't run correctly
</A></li>
        <LI> Next message: <A HREF="003061.html">[Mono-bugs] [Bug 35539][Nor] Changed - Mono compiler generates DLL which causes exception on Windows .NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3060">[ date ]</a>
              <a href="thread.html#3060">[ thread ]</a>
              <a href="subject.html#3060">[ subject ]</a>
              <a href="author.html#3060">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:wdowns@iglooware.com.">wdowns@iglooware.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=35539">http://bugzilla.ximian.com/show_bug.cgi?id=35539</A>

--- shadow/35539	Thu Dec 12 16:12:20 2002
+++ shadow/35539.tmp.4733	Thu Dec 12 16:12:21 2002
@@ -0,0 +1,72 @@
+Bug#: 35539
+Product: Mono/MCS
+Version: unspecified
+OS: Mandrake 9.0
+OS Details: 
+Status: NEW   
+Resolution: 
+Severity: 
+Priority: Normal
+Component: Misc
+AssignedTo: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>                            
+ReportedBy: <A HREF="mailto:wdowns@iglooware.com">wdowns@iglooware.com</A>               
+QAContact: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>
+TargetMilestone: ---
+URL: 
+Cc: 
+Summary: Mono compiler generates DLL which causes exception on Windows .NET
+
+Please fill in this template when reporting a bug, unless you know what you are doing.
+Description of Problem:
+
+
+Steps to reproduce the problem:
+1. Given the source (below), compile server.cs and client.cs on both mono and .NET:
+
+-------------- server.cs --------------
+public class Sum { public static int mSum(int x,int y) { return x+y; } }
+-------------- client.cs --------------
+using System;
+class Client { public static void Main() { Console.WriteLine(Sum.mSum(3,5)); } }
+-------------- Makefile --------------
+all: server.dll client.exe
+server.dll: server.cs
+        mcs /t:library /out:server.dll server.cs
+client.exe: client.cs
+        mcs /r:server.dll client.cs
+-------------- build.bat --------------
+csc /t:library /out:server.dll server.cs
+csc /r:server.dll client.cs
+------------- END SOURCES -------------
+
+2. Run the .NET-produced client.exe, with server.dll in same directory, on mono, and on .NET
+3. Run the mono produced client.exe, with server.dll in same directory, on mono, and on .NET
+
+Actual Results:
+
+.NET can't run the binaries compiled solely on mono, or the .NET compiled client.exe with the mono-compiled server.dll.  Both cases fail with:
+
+Unhandled Exception: System.IO.FileLoadException: Unable to load file 'server'.
+File name: &quot;server&quot;
+   at Client.Main()
+
+Expected Results:
+
+Mono and .NET compiled binaries should run on both Mono and .NET
+
+How often does this happen? 
+
+Every time.
+
+Additional Information:
+
+I am running Mono on Mandrake 9.0 (it worked with both .NET and mono produced executables), and .NET on Windows 2000 Professional (using the .NET framework included in Visual Studio .NET latest MSDN version).
+
+I have used monodis to produce the MSIL for both client.exe and server.dll, but haven't been able to discern any substantive difference between the two, except for the apparently extraneous code produced by .NET for server.dll, within mSum:
+
+        IL_0003: stloc.0
+        IL_0004: br.s IL_0006
+
+        IL_0006: ldloc.0
+
+Does anyone have a tool which will get at additional meta-data stored within a .DLL, that could help determine the important difference between the .NET produced and mono produced server.dll?


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003059.html">[Mono-bugs] [Bug 35531][Maj] New - &quot;Hello World&quot; app doesn't run correctly
</A></li>
	<LI> Next message: <A HREF="003061.html">[Mono-bugs] [Bug 35539][Nor] Changed - Mono compiler generates DLL which causes exception on Windows .NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3060">[ date ]</a>
              <a href="thread.html#3060">[ thread ]</a>
              <a href="subject.html#3060">[ subject ]</a>
              <a href="author.html#3060">[ author ]</a>
         </LI>
       </UL>
</body></html>
