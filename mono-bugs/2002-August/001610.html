<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] GetCustomAttributes(bool) infinite loop
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tum_public%40veridicus.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001608.html">
   <LINK REL="Next"  HREF="001609.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] GetCustomAttributes(bool) infinite loop
   </H1>
    <B>Tum
    </B> 
    <A HREF="mailto:tum_public%40veridicus.com"
       TITLE="[Mono-bugs] GetCustomAttributes(bool) infinite loop">tum_public@veridicus.com
       </A><BR>
    <I>Thu, 29 Aug 2002 10:15:34 +1200</I>
    <P><UL>
        <LI> Previous message: <A HREF="001608.html">[Mono-bugs] GetCustomAttributes(bool) infinite loop
</A></li>
        <LI> Next message: <A HREF="001609.html">[Mono-bugs] [Bug 29590][Nor] New - Access of private constructor possible
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1610">[ date ]</a>
              <a href="thread.html#1610">[ thread ]</a>
              <a href="subject.html#1610">[ subject ]</a>
              <a href="author.html#1610">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry for having to reply to myself...

I've tracked the bug down to the fact that mono doesn't return the
BaseType of &quot;object&quot; as null.

I confirmed this with:

Console.WriteLine(typeof(object).BaseType.Name);

(Under MS.NET it is null)

&gt;<i>From what I can see, the MonoType.element_class for Object is NOT NULL.
</I>I'm pretty sure it should be since Object is neither an enum or an
array.

This is what screws up the function: ves_icall_get_type_info

I've been up all night.  I hope someone can investigate this futher....

Cheers,

^Tum 

-----Original Message-----
From: <A HREF="mailto:mono-bugs-admin@ximian.com">mono-bugs-admin@ximian.com</A> [mailto:<A HREF="mailto:mono-bugs-admin@ximian.com">mono-bugs-admin@ximian.com</A>] On
Behalf Of Tum
Sent: Thursday, 29 August 2002 8:54 a.m.
To: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>
Subject: [Mono-bugs] GetCustomAttributes(bool) infinite loop

Hi everyone,

There seems to be a bug where MemberInfo.GetCustomAttributes(true) goes
into an infinite loop.

Here's the code.


using System;

class TestMono
{
      public int x = 100;

	public static void Main()
	{
		Type type = typeof(TestMono);

		type.GetCustomAttributes(true);
	}
}

When run with mono or mint, the program will never stop.  If you call
GetCustomAttributes with the inherit parameter set to false it works
fine.

Can anyone else reproduce this?  I'm running on a fresh cygwin build.


Cheers,

^Tum


_______________________________________________
mono-bugs maillist  -  <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">http://lists.ximian.com/mailman/listinfo/mono-bugs</A>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001608.html">[Mono-bugs] GetCustomAttributes(bool) infinite loop
</A></li>
	<LI> Next message: <A HREF="001609.html">[Mono-bugs] [Bug 29590][Nor] New - Access of private constructor possible
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1610">[ date ]</a>
              <a href="thread.html#1610">[ thread ]</a>
              <a href="subject.html#1610">[ subject ]</a>
              <a href="author.html#1610">[ author ]</a>
         </LI>
       </UL>
</body></html>
