<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 80892][Maj] Changed - Monitor.Pulse not working	properly on s390x
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2080892%5D%5BMaj%5D%20Changed%20-%20Monitor.Pulse%20not%20working%0A%09properly%20on%20s390x&In-Reply-To=bug-80892%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="054535.html">
   <LINK REL="Next"  HREF="054537.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 80892][Maj] Changed - Monitor.Pulse not working	properly on s390x</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2080892%5D%5BMaj%5D%20Changed%20-%20Monitor.Pulse%20not%20working%0A%09properly%20on%20s390x&In-Reply-To=bug-80892%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 80892][Maj] Changed - Monitor.Pulse not working	properly on s390x">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Tue Feb 27 14:21:31 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="054535.html">[Mono-bugs] [Bug 80931][Nor] Changed - .NET Reflector ListView	Exception
</A></li>
        <LI>Next message: <A HREF="054537.html">[Mono-bugs] [Bug 80971][Nor] Changed - Texture brush does not paint	anything
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54536">[ date ]</a>
              <a href="thread.html#54536">[ thread ]</a>
              <a href="subject.html#54536">[ subject ]</a>
              <a href="author.html#54536">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=80892">http://bugzilla.ximian.com/show_bug.cgi?id=80892</A>

--- shadow/80892	2007-02-27 12:54:22.000000000 -0500
+++ shadow/80892.tmp.31502	2007-02-27 14:21:31.000000000 -0500
@@ -144,6 +144,13 @@
 hardcoded registers (1 in compareexchange, 1 and 2 in the others):
 there is no guarantee that gcc will not use the same registers for the
 other arguments. Apart from that, I don't see how the code returns the
 old value at the memory location, instead it looks like it returns the
 old value we were expecting, which works just fine if the swap
 succeds, but is the wrong one if it fails.
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at ximian.com</A>  2007-02-27 14:21 -------
+Uhm, the asm code may not be wrong if the cs instruction itself stores
+the old value in the first register (I have no good s390 asm docs), 
+the code looks more complex than needed, since a single cs instruction
+would work, instead of using an LA/LR pair before it.
+
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="054535.html">[Mono-bugs] [Bug 80931][Nor] Changed - .NET Reflector ListView	Exception
</A></li>
	<LI>Next message: <A HREF="054537.html">[Mono-bugs] [Bug 80971][Nor] Changed - Texture brush does not paint	anything
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54536">[ date ]</a>
              <a href="thread.html#54536">[ thread ]</a>
              <a href="subject.html#54536">[ subject ]</a>
              <a href="author.html#54536">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
