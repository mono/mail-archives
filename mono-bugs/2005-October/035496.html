<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 76562][Blo] Changed - 32-bit BMPs should be loaded
	as Format32bppRgb
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2076562%5D%5BBlo%5D%20Changed%20-%2032-bit%20BMPs%20should%20be%20loaded%0A%09as%20Format32bppRgb&In-Reply-To=bug-76562%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035495.html">
   <LINK REL="Next"  HREF="035497.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 76562][Blo] Changed - 32-bit BMPs should be loaded
	as Format32bppRgb</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2076562%5D%5BBlo%5D%20Changed%20-%2032-bit%20BMPs%20should%20be%20loaded%0A%09as%20Format32bppRgb&In-Reply-To=bug-76562%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 76562][Blo] Changed - 32-bit BMPs should be loaded
	as Format32bppRgb">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Fri Oct 28 08:05:45 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="035495.html">[Mono-bugs] [Bug 76582][Nor] Changed - Atom.Net does not work
	correctly under Mono
</A></li>
        <LI>Next message: <A HREF="035497.html">[Mono-bugs] [Bug 76553][Nor] Changed - Mono JIT on ARM has trouble
	with doubles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35496">[ date ]</a>
              <a href="thread.html#35496">[ thread ]</a>
              <a href="subject.html#35496">[ subject ]</a>
              <a href="author.html#35496">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">kornelpal at hotmail.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=76562">http://bugzilla.ximian.com/show_bug.cgi?id=76562</A>

--- shadow/76562	2005-10-26 10:48:24.000000000 -0400
+++ shadow/76562.tmp.21690	2005-10-28 08:05:45.000000000 -0400
@@ -2,14 +2,14 @@
 Product: Mono: Class Libraries
 Version: unspecified
 OS: All
 OS Details: 
 Status: NEW   
 Resolution: 
-Severity: 
-Priority: Normal
+Severity: Unknown
+Priority: Blocker
 Component: libgdiplus
 AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jordi at ximian.com</A>                            
 ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">kornelpal at hotmail.com</A>               
 QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
 TargetMilestone: ---
 URL: 
@@ -22,6 +22,26 @@
 alpha channel for Format32bppRgb but alpha channel is preserved in memory 
 and can be accessed using LockBits even when locking with Format32bppRgb. 
 (I think locking in format other than the format of bitmap is not 
 supported by MS GDI+.)
 
 libgdiplus should do the same.
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">kornelpal at hotmail.com</A>  2005-10-28 08:05 -------
+The following patch seems to fix the bug without side effects.
+
+Please approve or commit it as this patch is required for 
+ImageListStreamer.
+
+Index: bmpcodec.c
+===================================================================
+--- bmpcodec.c	(revision 52314)
++++ bmpcodec.c	(working copy)
+@@ -76,7 +76,7 @@
+ {
+         switch (bitcount) {
+         case 32:
+-                return Format32bppArgb;
++                return Format32bppRgb;
+         case 24:
+                 return Format24bppRgb;
+         case 8: 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035495.html">[Mono-bugs] [Bug 76582][Nor] Changed - Atom.Net does not work
	correctly under Mono
</A></li>
	<LI>Next message: <A HREF="035497.html">[Mono-bugs] [Bug 76553][Nor] Changed - Mono JIT on ARM has trouble
	with doubles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35496">[ date ]</a>
              <a href="thread.html#35496">[ thread ]</a>
              <a href="subject.html#35496">[ subject ]</a>
              <a href="author.html#35496">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
