<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 644418] New: DataTable clone fails
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20644418%5D%20New%3A%20DataTable%20clone%20fails&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="104586.html">
   <LINK REL="Next"  HREF="104591.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 644418] New: DataTable clone fails</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20644418%5D%20New%3A%20DataTable%20clone%20fails&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 644418] New: DataTable clone fails">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Oct  6 21:15:42 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="104586.html">[Mono-bugs] [Bug 642156] MonoTools 2.0.8152 with Mono 2.8 rc1 Win XP 32 and openSUSE 11.3 i586: Remote Debug of Winforms app doesn't hit breakpoint
</A></li>
        <LI>Next message: <A HREF="104591.html">[Mono-bugs] [Bug 644428] New: Mono creates new thread for each call to Socket.xxxAsync
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104590">[ date ]</a>
              <a href="thread.html#104590">[ thread ]</a>
              <a href="subject.html#104590">[ subject ]</a>
              <a href="author.html#104590">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=644418">https://bugzilla.novell.com/show_bug.cgi?id=644418</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=644418#c0">https://bugzilla.novell.com/show_bug.cgi?id=644418#c0</A>


           Summary: DataTable clone fails
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.6.x
          Platform: i386
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Data
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">peter.figuli at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.10)
Gecko/20100914 Firefox/3.6.10 ( .NET CLR 3.5.30729; .NET4.0E)

public virtual DataTable Clone () creates a new instance with Activator and
than calls CopyProperties(). 
Code tries to copy all properties from old instance to new one, but if you
clone DataSet generated table, you end up with: &quot;System.ArgumentException: Key
duplication when adding: typedName.&quot;


So in code it needs one more condition:

for (int i=0; i &lt; ExtendedProperties.Count; i++)
  if (!Copy.ExtendedProperties.Contains(tgtArray.GetValue (i))
    Copy.ExtendedProperties.Add (tgtArray.GetValue (i),
ExtendedProperties[tgtArray.GetValue (i)]);
}


Reproducible: Always

Steps to Reproduce:
1.Create DataTable
2. Add typedName into ExtendetedProperties
3. do table.Clone()
Actual Results:  
Exception

Expected Results:  
to have a clone

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>











































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="104586.html">[Mono-bugs] [Bug 642156] MonoTools 2.0.8152 with Mono 2.8 rc1 Win XP 32 and openSUSE 11.3 i586: Remote Debug of Winforms app doesn't hit breakpoint
</A></li>
	<LI>Next message: <A HREF="104591.html">[Mono-bugs] [Bug 644428] New: Mono creates new thread for each call to Socket.xxxAsync
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104590">[ date ]</a>
              <a href="thread.html#104590">[ thread ]</a>
              <a href="subject.html#104590">[ subject ]</a>
              <a href="author.html#104590">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
