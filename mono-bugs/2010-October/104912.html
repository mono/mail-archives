<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 646505] New: BoundField databinding inconsistency between Mono and MS.NET
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20646505%5D%20New%3A%20BoundField%20databinding%20inconsistency%0A%20between%20Mono%20and%20MS.NET&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="104909.html">
   <LINK REL="Next"  HREF="105568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 646505] New: BoundField databinding inconsistency between Mono and MS.NET</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20646505%5D%20New%3A%20BoundField%20databinding%20inconsistency%0A%20between%20Mono%20and%20MS.NET&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 646505] New: BoundField databinding inconsistency between Mono and MS.NET">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Oct 14 07:42:54 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="104909.html">[Mono-bugs] [Bug 464128] char* should be in ANSI encoding when passed to C runtime rather than Unicode
</A></li>
        <LI>Next message: <A HREF="105568.html">[Mono-bugs] [Bug 646505] BoundField databinding inconsistency between Mono and MS.NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104912">[ date ]</a>
              <a href="thread.html#104912">[ thread ]</a>
              <a href="subject.html#104912">[ subject ]</a>
              <a href="author.html#104912">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=646505">https://bugzilla.novell.com/show_bug.cgi?id=646505</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=646505#c0">https://bugzilla.novell.com/show_bug.cgi?id=646505#c0</A>


           Summary: BoundField databinding inconsistency between Mono and
                    MS.NET
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.8.x
          Platform: x86-64
        OS/Version: Windows 7
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sergey.hakobyan at gaiaware.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.10)
Gecko/20100914 Firefox/3.6.10

The same issue as described in
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=595568">https://bugzilla.novell.com/show_bug.cgi?id=595568</A> happens with custom
BoundField in edit mode with overridden InitializeDataCell() and a TextBox.

Reproducible: Always

Steps to Reproduce:
1. Add GridView to Page markup.
2. Set AutoGenerateColumns property to False.
3. Create a derived class from BoundField.
4. Override InitializeDataCell().
5. Create a TextBox in InitializeDataCell().
6. Add newly created TextBox the Controls collection of the cell.
7. Attach OnDataBinding() event handler to the newly created TextBox.
8. During OnInit() event of the GridView create instance of the custom field.
9. Add custom field to the Columns collection of the GridView.
10. During Page_Load DataBind the GridView.
Actual Results:  
System.InvalidCastException: Cannot cast from source type to destination type.
  at System.Web.UI.WebControls.BoundField.OnDataBindField (System.Object
sender, System.EventArgs e) [0x000a2] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\BoundField.cs:266 
  at System.Web.UI.Control.OnDataBinding (System.EventArgs e) [0x00029] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1159 
  at System.Web.UI.Control.DataBind (Boolean raiseOnDataBinding) [0x0003c] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:2023 
  at System.Web.UI.Control.DataBind () [0x00000] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1454 
  at System.Web.UI.Control.DataBindChildren () [0x0003d] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1465 
  at System.Web.UI.Control.DataBind (Boolean raiseOnDataBinding) [0x00047] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:2024 
  at System.Web.UI.Control.DataBind () [0x00000] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1454 
  at System.Web.UI.Control.DataBindChildren () [0x0003d] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1465 
  at System.Web.UI.Control.DataBind (Boolean raiseOnDataBinding) [0x00047] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:2024 
  at System.Web.UI.Control.DataBind () [0x00000] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1454 
  at System.Web.UI.WebControls.GridView.CreateChildControls (IEnumerable data,
Boolean dataBinding) [0x00310] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\GridView.cs:1515 
  at Gaia.WebWidgets.GridView.CreateChildControls (IEnumerable dataSource,
Boolean dataBinding) [0x00001] in
D:\work\repos\gaia-ajax\trunk\Gaia.WebWidgets\Widgets\GridView.cs:374 
  at System.Web.UI.WebControls.CompositeDataBoundControl.PerformDataBinding
(IEnumerable data) [0x00012] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\CompositeDataBoundControl.cs:65 
  at System.Web.UI.WebControls.GridView.PerformDataBinding (IEnumerable data)
[0x00000] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\GridView.cs:1771 
  at System.Web.UI.WebControls.DataBoundControl.InternalPerformDataBinding
(IEnumerable data) [0x0001e] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\DataBoundControl.cs:251 
  at System.Web.UI.WebControls.DataBoundControl.OnSelect (IEnumerable data)
[0x00016] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\DataBoundControl.cs:242 
  at System.Web.UI.DataSourceView.Select
(System.Web.UI.DataSourceSelectArguments selectArgs,
System.Web.UI.DataSourceViewSelectCallback callBack) [0x00020] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\DataSourceView.cs:149 
  at System.Web.UI.WebControls.DataBoundControl.PerformSelect () [0x00029] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\DataBoundControl.cs:225 
  at System.Web.UI.WebControls.BaseDataBoundControl.DataBind () [0x00000] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\BaseDataBoundControl.cs:141 
  at System.Web.UI.WebControls.GridView.DataBind () [0x00012] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\GridView.cs:1756 
  at System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound ()
[0x00016] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\BaseDataBoundControl.cs:147 
  at System.Web.UI.WebControls.BaseDataBoundControl.OnPreRender
(System.EventArgs e) [0x00007] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\BaseDataBoundControl.cs:180 
  at System.Web.UI.WebControls.GridView.OnPreRender (System.EventArgs e)
[0x00000] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI.WebControls\GridView.cs:2483 
  at Gaia.WebWidgets.GridView.OnPreRender (System.EventArgs e) [0x00001] in
D:\work\repos\gaia-ajax\trunk\Gaia.WebWidgets\Widgets\GridView.cs:653 
  at System.Web.UI.Control.PreRenderRecursiveInternal () [0x0003b] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1686 
  at System.Web.UI.Control.PreRenderRecursiveInternal () [0x00083] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1693 
  at System.Web.UI.Control.PreRenderRecursiveInternal () [0x00083] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1693 
  at System.Web.UI.Control.PreRenderRecursiveInternal () [0x00083] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1693 
  at System.Web.UI.Control.PreRenderRecursiveInternal () [0x00083] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1693 
  at System.Web.UI.Control.PreRenderRecursiveInternal () [0x00083] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Control.cs:1693 
  at System.Web.UI.Page.ProcessLoadComplete () [0x00089] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Page.cs:1523 
  at System.Web.UI.Page.InternalProcessRequest () [0x001cb] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Page.cs:1436 
  at System.Web.UI.Page.ProcessRequest (System.Web.HttpContext context)
[0x0005b] in
C:\cygwin\tmp\monobuild\build\BUILD\mono-2.8\mcs\class\System.Web\System.Web.UI\Page.cs:1261 

Expected Results:  
No exception, same behavior as with MS.NET

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>






























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="104909.html">[Mono-bugs] [Bug 464128] char* should be in ANSI encoding when passed to C runtime rather than Unicode
</A></li>
	<LI>Next message: <A HREF="105568.html">[Mono-bugs] [Bug 646505] BoundField databinding inconsistency between Mono and MS.NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104912">[ date ]</a>
              <a href="thread.html#104912">[ thread ]</a>
              <a href="subject.html#104912">[ subject ]</a>
              <a href="author.html#104912">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
