<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 643397] New: Runtime deadlocks while compiling	corlib
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20643397%5D%20New%3A%20Runtime%20deadlocks%20while%20compiling%0A%09corlib&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="104406.html">
   <LINK REL="Next"  HREF="104417.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 643397] New: Runtime deadlocks while compiling	corlib</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20643397%5D%20New%3A%20Runtime%20deadlocks%20while%20compiling%0A%09corlib&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 643397] New: Runtime deadlocks while compiling	corlib">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Oct  3 20:57:04 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="104406.html">[Mono-bugs] [Bug 322158] rethrow loses stack trace information
</A></li>
        <LI>Next message: <A HREF="104417.html">[Mono-bugs] [Bug 643397] Runtime deadlocks while compiling corlib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104407">[ date ]</a>
              <a href="thread.html#104407">[ thread ]</a>
              <a href="subject.html#104407">[ subject ]</a>
              <a href="author.html#104407">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=643397">https://bugzilla.novell.com/show_bug.cgi?id=643397</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=643397#c0">https://bugzilla.novell.com/show_bug.cgi?id=643397#c0</A>


           Summary: Runtime deadlocks while compiling corlib
    Classification: Mono
           Product: Mono: Runtime
           Version: SVN
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rkumpera at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


I'm getting this deadlock while compiling corlib on OS 11.2 x86:

Thread 5 (Thread 0x40537b70 (LWP 20733)):
#0  0xffffe424 in __kernel_vsyscall ()
#1  0x4007fd95 in pthread_cond_wait@@GLIBC_2.3.2 () at
./nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_wait.S:122
#2  0x08211b9e in GC_wait_marker () at pthread_support.c:1787
#3  0x08219d96 in GC_help_marker (my_mark_no=5) at mark.c:1116
#4  0x08210aa6 in GC_mark_thread (id=0x0) at pthread_support.c:548
#5  0x4007b6e5 in start_thread (arg=0x0) at pthread_create.c:297
#6  0x4007b600 in ?? () at pthread_create.c:216 from /lib/libpthread.so.0

Thread 4 (Thread 0x40738b70 (LWP 20734)):
#0  0xffffe424 in __kernel_vsyscall ()
#1  0x4007fd95 in pthread_cond_wait@@GLIBC_2.3.2 () at
./nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_wait.S:122
#2  0x08211b9e in GC_wait_marker () at pthread_support.c:1787
#3  0x08219d96 in GC_help_marker (my_mark_no=5) at mark.c:1116
#4  0x08210aa6 in GC_mark_thread (id=0x1) at pthread_support.c:548
#5  0x4007b6e5 in start_thread (arg=0x0) at pthread_create.c:297
#6  0x4007b600 in ?? () at pthread_create.c:216 from /lib/libpthread.so.0

Thread 3 (Thread 0x40939b70 (LWP 20735)):
#0  0xffffe424 in __kernel_vsyscall ()
#1  0x4007fd95 in pthread_cond_wait@@GLIBC_2.3.2 () at
./nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_wait.S:122
#2  0x08211b9e in GC_wait_marker () at pthread_support.c:1787
#3  0x08219d96 in GC_help_marker (my_mark_no=5) at mark.c:1116
#4  0x08210aa6 in GC_mark_thread (id=0x2) at pthread_support.c:548
#5  0x4007b6e5 in start_thread (arg=0x0) at pthread_create.c:297
#6  0x4007b600 in ?? () at pthread_create.c:216 from /lib/libpthread.so.0

Thread 2 (Thread 0x411c2b70 (LWP 20736)):
#0  0xffffe424 in __kernel_vsyscall ()
#1  0x40082899 in __lll_lock_wait () at
./nptl/sysdeps/unix/sysv/linux/i386/i486/lowlevellock.S:142
#2  0x4007def1 in _L_lock_765 () from /lib/libpthread.so.0
#3  0x4007dd09 in __pthread_mutex_lock (mutex=0x8312508) at
pthread_mutex_lock.c:61
#4  0x081f6eaa in noshm_sem_lock (sem=&lt;value optimized out&gt;) at shared.c:67
#5  _wapi_shm_sem_lock (sem=&lt;value optimized out&gt;) at shared.c:861
#6  0x081e678c in _wapi_handle_lock_shared_handles () at
./../mono/io-layer/handles-private.h:335
#7  _wapi_free_share_info () at handles.c:1646
#8  0x081ed6f0 in _wapi_handle_share_release (info=&lt;value optimized out&gt;) at
./../mono/io-layer/handles-private.h:370
#9  file_close (info=&lt;value optimized out&gt;) at io.c:330
#10 0x081e7450 in _wapi_handle_unref (handle=0x3) at handles.c:1176
#11 0x081e7726 in CloseHandle (handle=0xfffffe00) at handles.c:1354
#12 0x0819cd00 in ves_icall_System_IO_MonoIO_Close (handle=0x3,
error=0x411c2110) at file-io.c:801
#13 0x4109a3d8 in ?? ()
#14 0x40cce390 in System.IO.FileStream:Dispose (this=..., disposing=false) at
/home/rodrigo/repo/mono/mcs/class/corlib/System.IO/FileStream.cs:927
#15 0x40cce2b4 in System.IO.FileStream:Finalize (this=...) at
/home/rodrigo/repo/mono/mcs/class/corlib/System.IO/FileStream.cs:911
#16 0x4109a576 in ?? ()
#17 0x08169499 in mono_gc_run_finalize (obj=0x52d70, data=0x0) at gc.c:218
#18 0x08210240 in GC_invoke_finalizers () at finalize.c:787
#19 0x081696ac in finalizer_thread (unused=0x0) at gc.c:1066
#20 0x081549f5 in start_wrapper (data=0x8377170) at threads.c:750
#21 0x081f11cf in thread_start_routine (args=0x8359a74) at wthreads.c:285
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
#22 0x0821183b in GC_start_routine (arg=0x5dfe0) at pthread_support.c:1392
#23 0x4007b6e5 in start_thread (arg=0x0) at pthread_create.c:297
#24 0x4007b600 in ?? () at pthread_create.c:216 from /lib/libpthread.so.0

Thread 1 (Thread 0x401f0f20 (LWP 20715)):
#0  0xffffe424 in __kernel_vsyscall ()
#1  0x40082899 in __lll_lock_wait () at
./nptl/sysdeps/unix/sysv/linux/i386/i486/lowlevellock.S:142
#2  0x4007def1 in _L_lock_765 () from /lib/libpthread.so.0
#3  0x4007dd09 in __pthread_mutex_lock (mutex=0x83124f0) at
pthread_mutex_lock.c:61
#4  0x081f6eaa in noshm_sem_lock (sem=&lt;value optimized out&gt;) at shared.c:67
#5  _wapi_shm_sem_lock (sem=&lt;value optimized out&gt;) at shared.c:861
#6  0x081e5e9b in _wapi_handle_get_or_set_share (device=2055, inode=4209253,
new_sharemode=1, new_access=2147483648, old_sharemode=0xbf8c73ec, 
    old_access=0xbf8c73e8, share_info=0xbf8c74ac) at handles.c:1689
#7  0x081ee16b in share_allows_open (statbuf=&lt;value optimized out&gt;,
sharemode=1, fileaccess=2147483648, share_info=0xbf8c74ac) at io.c:1371
#8  0x081ee72e in share_check (fd=&lt;value optimized out&gt;, share_info=&lt;value
optimized out&gt;, fileaccess=&lt;value optimized out&gt;, 
    sharemode=&lt;value optimized out&gt;, statbuf=&lt;value optimized out&gt;) at
io.c:1429
#9  CreateFile (fd=&lt;value optimized out&gt;, share_info=&lt;value optimized out&gt;,
fileaccess=&lt;value optimized out&gt;, sharemode=&lt;value optimized out&gt;, 
    statbuf=&lt;value optimized out&gt;) at io.c:1591
#10 0x0819ceff in ves_icall_System_IO_MonoIO_Open (filename=0x609c0, mode=3,
access_mode=1, share=1, options=0, error=0xbf8c75e4) at file-io.c:782
#11 0x4109714c in ?? ()
#12 0x40ccbacb in System.IO.FileStream:.ctor (this=..., path=0x609c0,
mode=Open, access=Read, share=Read, bufferSize=8192, anonymous=false, 
    options=None) at
/home/rodrigo/repo/mono/mcs/class/corlib/System.IO/FileStream.cs:309
#13 0x40ccb600 in System.IO.FileStream:.ctor (this=..., path=0x609c0,
mode=Open, access=Read, share=Read)
   from /home/rodrigo/repo/mono/mcs/class/lib/net_2_0/mscorlib.dll.so
#14 0x41096f70 in ?? ()
#15 0x40cc894c in System.IO.File:OpenRead (path=0x609c0) at
/home/rodrigo/repo/mono/mcs/class/corlib/System.IO/File.cs:337
#16 0x41357bb4 in Mono.CSharp.Driver:Parse (this=..., file=...) at
/home/rodrigo/repo/mono/mcs/mcs/driver.cs:189
#17 0x413599fd in Mono.CSharp.Driver:Parse (this=...) at
/home/rodrigo/repo/mono/mcs/mcs/driver.cs:697
#18 0x4135d893 in Mono.CSharp.Driver:Compile (this=...) at
/home/rodrigo/repo/mono/mcs/mcs/driver.cs:1655
#19 0x41357f07 in Mono.CSharp.Driver:Main (args=0x52dc0) at
/home/rodrigo/repo/mono/mcs/mcs/driver.cs:308
#20 0x41092db0 in ?? ()
#21 0x08062ae8 in mono_jit_runtime_invoke (method=0x837f11c, obj=0x0,
params=0xbf8c798c, exc=0x0) at mini.c:5413
#22 0x0811d360 in mono_runtime_invoke (method=0x837f11c, obj=0x0,
params=0xbf8c798c, exc=0x0) at object.c:2709
#23 0x08120963 in mono_runtime_exec_main (method=0x837f11c, args=0x5ef60,
exc=0x0) at object.c:3870
#24 0x080b5101 in main_thread_handler (user_data=&lt;value optimized out&gt;) at
driver.c:999
#25 mono_main (user_data=&lt;value optimized out&gt;) at driver.c:1830
#26 0x08059158 in mono_main_with_options (argv=&lt;value optimized out&gt;,
argc=&lt;value optimized out&gt;) at main.c:66
#27 main (argv=&lt;value optimized out&gt;, argc=&lt;value optimized out&gt;) at main.c:97

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="104406.html">[Mono-bugs] [Bug 322158] rethrow loses stack trace information
</A></li>
	<LI>Next message: <A HREF="104417.html">[Mono-bugs] [Bug 643397] Runtime deadlocks while compiling corlib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104407">[ date ]</a>
              <a href="thread.html#104407">[ thread ]</a>
              <a href="subject.html#104407">[ subject ]</a>
              <a href="author.html#104407">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
