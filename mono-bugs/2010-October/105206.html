<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 648193] New: xsp2 stops responding if application files are touched more than once (while busy)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20648193%5D%20New%3A%20xsp2%20stops%20responding%20if%20application%0A%20files%20are%20touched%20more%20than%20once%20%28while%20busy%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="105205.html">
   <LINK REL="Next"  HREF="105208.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 648193] New: xsp2 stops responding if application files are touched more than once (while busy)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20648193%5D%20New%3A%20xsp2%20stops%20responding%20if%20application%0A%20files%20are%20touched%20more%20than%20once%20%28while%20busy%29&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 648193] New: xsp2 stops responding if application files are touched more than once (while busy)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Oct 20 20:26:58 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="105205.html">[Mono-bugs] [Bug 641915] Security hole: Mono should not search current directory for DLLs
</A></li>
        <LI>Next message: <A HREF="105208.html">[Mono-bugs] [Bug 648193] xsp2 stops responding if application files are touched more than once (while busy)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105206">[ date ]</a>
              <a href="thread.html#105206">[ thread ]</a>
              <a href="subject.html#105206">[ subject ]</a>
              <a href="author.html#105206">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=648193">https://bugzilla.novell.com/show_bug.cgi?id=648193</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=648193#c0">https://bugzilla.novell.com/show_bug.cgi?id=648193#c0</A>


           Summary: xsp2 stops responding if application files are touched
                    more than once (while busy)
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.8.x
          Platform: i386
        OS/Version: RHEL 5
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">tekhedd at byteheaven.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.10)
Gecko/20100914 Firefox/3.6.10

xsp2 (or xsp-server2 if running under mod_mono) will stop responding if you
&quot;touch *&quot; more than once while it is serving a request. the application does
not have to be doing anything, but the problem manifests differently depending
on whether my page has codebehind DLLs, and whether it inherits from codebehind
dlls.



*Why this is important*

Customer backups touch files (presumably as part of a &quot;last archived&quot; timestamp
or something), causing the application to refresh and, about 25% of the time,
to stop responding. Customer is not happy. 

Reproducible: Sometimes

Steps to Reproduce:
1) No codebehind: various exceptions 

To reproduce: make a simple webapp that contains nothing but this file:

&lt;%@ Page language=&quot;c#&quot; ValidateRequest=&quot;false&quot; AutoEventWireup=&quot;false&quot;%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;test&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
testbody
&lt;/body&gt;
&lt;/html&gt;

run xsp (I used port 8081) on this app.

in a separate terminal, run 

 while true; do wget <A HREF="http://localhost:8081/test/test.aspx">http://localhost:8081/test/test.aspx</A> -O- ; done

This will ensure that the page is almost always busy.

In a third terminal, touch test.aspx. Do this a lot (or in a loop, once per
second works for me) and within a minute the application will catch an uncaught
ThreadAbortException. At this point the app will stop responding until the
current request times out. If you keep doing this, eventually the app will stop
responding entirely. It will not exit cleanly and will need to be killed. (I
will attach exception stack traces from a different machine.)

2) Hang indefinitely: codebehind and the infinte stop

Using the same test file in my production application, I do not see exceptions,
but the same behavior occurs--eventually the application that was refreshed
stops responding..

Actual Results:  
Results are inline with &quot;steps to reproduce&quot;

Expected Results:  
web site should refresh and continue serving files. 

I understand that waitChangeNotification is not implemented, otherwise I might
try this as a workaround.

It's critical to me, but I'm calling it major because the workaround is &quot;don't
touch those files&quot;. 

I don't understand the http server code enough to track down the bug. Help
would be appreciated.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>






















































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="105205.html">[Mono-bugs] [Bug 641915] Security hole: Mono should not search current directory for DLLs
</A></li>
	<LI>Next message: <A HREF="105208.html">[Mono-bugs] [Bug 648193] xsp2 stops responding if application files are touched more than once (while busy)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105206">[ date ]</a>
              <a href="thread.html#105206">[ thread ]</a>
              <a href="subject.html#105206">[ subject ]</a>
              <a href="author.html#105206">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
