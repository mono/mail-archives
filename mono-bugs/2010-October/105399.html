<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 649034] New: UpdateProgress doesn't find UpdatePanel inside a userercontrol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20649034%5D%20New%3A%20UpdateProgress%20doesn%27t%20find%0A%20UpdatePanel%20inside%20a%20userercontrol&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="105395.html">
   <LINK REL="Next"  HREF="105432.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 649034] New: UpdateProgress doesn't find UpdatePanel inside a userercontrol</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20649034%5D%20New%3A%20UpdateProgress%20doesn%27t%20find%0A%20UpdatePanel%20inside%20a%20userercontrol&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 649034] New: UpdateProgress doesn't find UpdatePanel inside a userercontrol">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Oct 25 11:48:03 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="105395.html">[Mono-bugs] [Bug 639599] DateTime.Now returns GMT not local time
</A></li>
        <LI>Next message: <A HREF="105432.html">[Mono-bugs] [Bug 649034] UpdateProgress doesn't find UpdatePanel inside a userercontrol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105399">[ date ]</a>
              <a href="thread.html#105399">[ thread ]</a>
              <a href="subject.html#105399">[ subject ]</a>
              <a href="author.html#105399">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=649034">https://bugzilla.novell.com/show_bug.cgi?id=649034</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=649034#c0">https://bugzilla.novell.com/show_bug.cgi?id=649034#c0</A>


           Summary: UpdateProgress doesn't find UpdatePanel inside a
                    userercontrol
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.4.x
          Platform: x86-64
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lnc19 at hotmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR
1.1.4322; InfoPath.1; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR
3.5.21022; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)

Update progress can't associate to an updatepanale that is inside a user
control.
The folowing pseudo-sample works on windows and not on linux with mono:

&lt;asp:UpdateProgress ID=&quot;updateTest&quot; associatedUpdatePanelId=&quot;updateMain&quot;
runat=&quot;server&quot;&gt;
        &lt;ProgressTemplate&gt;
            Processing...
        &lt;/ProgressTemplate&gt;
  &lt;/asp:UpdateProgress&gt;

&lt;cc1:MyControl runat=&quot;server&quot; id=&quot;MyControlId&quot;&gt;
&lt;MyContent&gt;
&lt;asp:UpdatePanel id=&quot;updateMain&quot; runat=&quot;server&quot;&gt;
    &lt;ContentTemplate&gt;
    Content
    &lt;/ContentTemplate&gt;
&lt;/asp:UpdatePanel&gt;
&lt;/MyContent&gt;

&lt;/cc1:MyControl&gt;



Reproducible: Always

Steps to Reproduce:
1. Create a user control.
2. Insert and update panel inside the control (The control should implement
ITemplate)
3. Create an UpdateProgress in the page.
4. Assign de AssociatedUpdatePanelId to the update panel (2).

Actual Results:  
InvalidOperationException No UpdatePanel found for AssociatedUpdatePanelID...

Expected Results:  
Works ok on M$.

In System.Web.Extension.UpdateProgress class on master git is doing something
like

        protected virtual IEnumerable&lt;ScriptDescriptor&gt; GetScriptDescriptors ()
{
            string updatePanelClientId;
            if (String.IsNullOrEmpty (AssociatedUpdatePanelID))
                updatePanelClientId = null;
            else {
                UpdatePanel updatePanel = FindControl (AssociatedUpdatePanelID)
as UpdatePanel;
                if (updatePanel == null)
                    throw new InvalidOperationException (&quot;No UpdatePanel found
for AssociatedUpdatePanelID '&quot; + AssociatedUpdatePanelID + &quot;'.&quot;);
                updatePanelClientId = updatePanel.ClientID;
            }
            ScriptControlDescriptor descriptor = new ScriptControlDescriptor
(&quot;Sys.UI._UpdateProgress&quot;, this.ClientID);
            descriptor.AddProperty (&quot;associatedUpdatePanelId&quot;,
updatePanelClientId);
            descriptor.AddProperty (&quot;displayAfter&quot;, DisplayAfter);
            descriptor.AddProperty (&quot;dynamicLayout&quot;, DynamicLayout);
            yield return descriptor;
        }


and it should:

        protected virtual IEnumerable&lt;ScriptDescriptor&gt; GetScriptDescriptors ()
{
            string updatePanelClientId;
            if (String.IsNullOrEmpty (AssociatedUpdatePanelID))
                updatePanelClientId = null;
            else {
                UpdatePanel updatePanel = FindControl (AssociatedUpdatePanelID)
as UpdatePanel;
                if (updatePanel == null)
                        updatePanel = FindUserControl (AssociatedUpdatePanelID)
as UpdatePanel // This method should work recursively
                if (updatePanel == null)
                    throw new InvalidOperationException (&quot;No UpdatePanel found
for AssociatedUpdatePanelID '&quot; + AssociatedUpdatePanelID + &quot;'.&quot;);
                updatePanelClientId = updatePanel.ClientID;
            }
            ScriptControlDescriptor descriptor = new ScriptControlDescriptor
(&quot;Sys.UI._UpdateProgress&quot;, this.ClientID);
            descriptor.AddProperty (&quot;associatedUpdatePanelId&quot;,
updatePanelClientId);
            descriptor.AddProperty (&quot;displayAfter&quot;, DisplayAfter);
            descriptor.AddProperty (&quot;dynamicLayout&quot;, DynamicLayout);
            yield return descriptor;
        }

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>







































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="105395.html">[Mono-bugs] [Bug 639599] DateTime.Now returns GMT not local time
</A></li>
	<LI>Next message: <A HREF="105432.html">[Mono-bugs] [Bug 649034] UpdateProgress doesn't find UpdatePanel inside a userercontrol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105399">[ date ]</a>
              <a href="thread.html#105399">[ thread ]</a>
              <a href="subject.html#105399">[ subject ]</a>
              <a href="author.html#105399">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
