<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 443569] Memory leak in asp.net (low level) for each unique URL request.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20443569%5D%20Memory%20leak%20in%20asp.net%20%28low%20level%29%20for%0A%20each%20unique%20URL%20request.&In-Reply-To=bug-443569-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="090756.html">
   <LINK REL="Next"  HREF="090517.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 443569] Memory leak in asp.net (low level) for each unique URL request.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20443569%5D%20Memory%20leak%20in%20asp.net%20%28low%20level%29%20for%0A%20each%20unique%20URL%20request.&In-Reply-To=bug-443569-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 443569] Memory leak in asp.net (low level) for each unique URL request.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Jul  8 19:50:12 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="090756.html">[Mono-bugs] [Bug 520437] [PATCH] using == operator when comparing too difference refs to the same native COM object returns false .NET difference
</A></li>
        <LI>Next message: <A HREF="090517.html">[Mono-bugs] [Bug 510125] Windows support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#90515">[ date ]</a>
              <a href="thread.html#90515">[ thread ]</a>
              <a href="subject.html#90515">[ subject ]</a>
              <a href="author.html#90515">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=443569">http://bugzilla.novell.com/show_bug.cgi?id=443569</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">bassam at symform.com</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=443569#c5">http://bugzilla.novell.com/show_bug.cgi?id=443569#c5</A>





--- Comment #5 from Bassam Tabbara &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">bassam at symform.com</A>&gt;  2009-07-08 17:50:11 MDT ---
I've turned on the logging profiler and I see many string allocations such as
the following:

23.18% (384571906 bytes) string
        104713132 bytes (246427 instances) from
System.Text.StringBuilder.InternalEnsureCapacity (int)
                1899844 bytes (1042 instances) inside
                        string.InternalAllocateStr (int)
                        System.Text.StringBuilder.InternalEnsureCapacity (int)
                        System.Text.StringBuilder.Append (string)
                        System.IO.StringWriter.Write (string)
                        System.Xml.XmlTextWriter.WriteCheckedString (string)
                        System.Xml.XmlTextWriter.WriteEscapedString
(string,bool)
                        System.Xml.XmlTextWriter.WriteString (string)
                        System.Xml.XmlWriter.WriteAttribute
(System.Xml.XmlReader,bool)
                        System.Xml.XmlWriter.WriteNode
(System.Xml.XmlReader,bool)
                        System.Xml.XmlWriter.WriteNode
(System.Xml.XmlReader,bool)
                        System.Xml.XmlReader.ReadOuterXml ()
                        System.Configuration.SectionInfo.ReadData
(System.Configuration.Configuration,System.Xml.XmlReader,bool)
                        System.Configuration.SectionGroupInfo.ReadContent
(System.Xml.XmlReader,System.Configuration.Configuration,bool,bool)
                        System.Configuration.SectionGroupInfo.ReadData
(System.Configuration.Configuration,System.Xml.XmlReader,bool)
                        System.Configuration.SectionGroupInfo.ReadContent
(System.Xml.XmlReader,System.Configuration.Configuration,bool,bool)
                        System.Configuration.SectionGroupInfo.ReadRootData
(System.Xml.XmlReader,System.Configuration.Configuration,bool)
                        System.Configuration.Configuration.ReadConfigFile
(System.Xml.XmlReader,string)
                        System.Configuration.Configuration.Load ()
                        System.Configuration.Configuration.Init
(System.Configuration.Internal.IConfigSystem,string,System.Configuration.Configuration)
                        System.Configuration.Configuration..ctor
(System.Configuration.InternalConfigurationSystem,string)
                        System.Configuration.Configuration..ctor
(System.Configuration.InternalConfigurationSystem,string)
                        System.Configuration.Configuration..ctor
(System.Configuration.InternalConfigurationSystem,string)
                        System.Configuration.Configuration..ctor
(System.Configuration.InternalConfigurationSystem,string)
                        System.Configuration.Configuration..ctor
(System.Configuration.InternalConfigurationSystem,string)
                       
System.Configuration.InternalConfigurationFactory.Create (System.Type,object[])
                       
System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration
(string,string,string,string,string,string)
                       
System.Web.Configuration.WebConfigurationManager.GetSection
(string,string,System.Web.HttpContext)
                       
System.Web.Configuration.WebConfigurationManager.GetSection (string)
                        System.Web.HttpApplication.PreStart ()
                        System.Web.HttpApplication.Start (object)
                       
System.Web.HttpApplication.System.Web.IHttpHandler.ProcessRequest
(System.Web.HttpContext)
                        System.Web.HttpRuntime.Process
(System.Web.HttpWorkerRequest)
                        System.Web.HttpRuntime.RealProcessRequest (object)
                        System.Web.HttpRuntime.ProcessRequest
(System.Web.HttpWorkerRequest)
                        Mono.WebServer.MonoWorkerRequest.ProcessRequest ()
                        Mono.WebServer.BaseApplicationHost.ProcessRequest
(Mono.WebServer.MonoWorkerRequest)
                        Mono.WebServer.ModMonoApplicationHost.ProcessRequest
(int,string,string,string,string,string,int,string,int,string,string[],string[],object)
                        Mono.WebServer.ModMonoApplicationHost.ProcessRequest
(int,string,string,string,string,string,int,string,int,string,string[],string[],object)
                        Mono.WebServer.ModMonoWorker.InnerRun (object)
                        Mono.WebServer.ModMonoWorker.Run (object)
                        object.runtime_invoke_void__this___object
(object,intptr,intptr,intptr)

Furthermore these strings remain on the heap after collections, for example:

Heap data collection 117 started at 7/8/2009 6:46:20 AM (duration 1066.332ms)
    45.62% string 66692734 bytes (3980042 freed)
    18.75% byte[] 27409028 bytes (8283623 freed)

Heap data collection 123 started at 7/8/2009 6:46:34 AM (duration 1277.961ms)
    44.86% string 71659010 bytes (8560478 freed)
    17.43% byte[] 27833882 bytes (25134773 freed)

Heap data collection 124 started at 7/8/2009 6:46:46 AM (duration 1349.888ms)
    47.08% string 75127210 bytes (5481450 freed)
    12.07% byte[] 19255352 bytes (30587742 freed)

Any help with this would be greatly appreciated. Our web site does not stay up
for too long with this leak.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>






















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="090756.html">[Mono-bugs] [Bug 520437] [PATCH] using == operator when comparing too difference refs to the same native COM object returns false .NET difference
</A></li>
	<LI>Next message: <A HREF="090517.html">[Mono-bugs] [Bug 510125] Windows support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#90515">[ date ]</a>
              <a href="thread.html#90515">[ thread ]</a>
              <a href="subject.html#90515">[ subject ]</a>
              <a href="author.html#90515">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
