<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 470120] Socket.EndSend unexpectedly fails with	WSAEWOULDBLOCK
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20470120%5D%20Socket.EndSend%20unexpectedly%20fails%20with%0A%09WSAEWOULDBLOCK&In-Reply-To=bug-470120-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="090819.html">
   <LINK REL="Next"  HREF="090821.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 470120] Socket.EndSend unexpectedly fails with	WSAEWOULDBLOCK</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20470120%5D%20Socket.EndSend%20unexpectedly%20fails%20with%0A%09WSAEWOULDBLOCK&In-Reply-To=bug-470120-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 470120] Socket.EndSend unexpectedly fails with	WSAEWOULDBLOCK">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Jul 21 17:46:11 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="090819.html">[Mono-bugs] [Bug 515100] HttpWebRequest: BeginWrite does not throw	after Abort()
</A></li>
        <LI>Next message: <A HREF="090821.html">[Mono-bugs] [Bug 524049] New: HttpWebRequest and StreamWriter ArgumentException when ContentLength set to 0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#90820">[ date ]</a>
              <a href="thread.html#90820">[ thread ]</a>
              <a href="subject.html#90820">[ subject ]</a>
              <a href="author.html#90820">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=470120">http://bugzilla.novell.com/show_bug.cgi?id=470120</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">benoit at zeroc.com</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=470120#c8">http://bugzilla.novell.com/show_bug.cgi?id=470120#c8</A>


Benoit Foucher &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">benoit at zeroc.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
             Status|RESOLVED                    |REOPENED
         Resolution|WONTFIX                     |




--- Comment #8 from Benoit Foucher &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">benoit at zeroc.com</A>&gt;  2009-07-21 15:46:11 MDT ---
It's not clear to me why you're closing this bug. EWOULDBLOCK is an expected
error condition for non-blocking sockets whether or not you check readiness
with select or poll.

And throwing this exception seems wrong to me even if the socket is set to
non-blocking.  We don't have this problem with .NET and it would be really
annoying if we had to use a blocking socket to get BeginSend/EndSend to behave
properly (we use a mix of BeginSend/EndSend and non-blocking Send to send
data...).

I don't know well the implementation of the mono thread pool, but this bug
seems to indicate that it doesn't handle EWOULDBLOCK when calling send on a
socket (and possibly recv?). Does it instead rely on blocking send/recv,
eventually causing (possibly many) threads to block on socket IO?

If that's the case it seems to me that it would be better if it did handle
EWOULDBLOCK as this an expected condition for a non-blocking socket if the send
buffer fills up or if there's not enough data in the receive buffer (regardless
of whether or not you use select()/poll() to get readiness information on the
socket). It could also relinquish the thread pool thread upon getting this
error condition and wait for the socket to be ready again.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>





























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="090819.html">[Mono-bugs] [Bug 515100] HttpWebRequest: BeginWrite does not throw	after Abort()
</A></li>
	<LI>Next message: <A HREF="090821.html">[Mono-bugs] [Bug 524049] New: HttpWebRequest and StreamWriter ArgumentException when ContentLength set to 0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#90820">[ date ]</a>
              <a href="thread.html#90820">[ thread ]</a>
              <a href="subject.html#90820">[ subject ]</a>
              <a href="author.html#90820">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
