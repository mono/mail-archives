<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 684773] New: Crash if ListView does not have focus and I remove all items from it
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20684773%5D%20New%3A%20Crash%20if%20ListView%20does%20not%20have%20focus%0A%20and%20I%20remove%20all%20items%20from%20it&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="110761.html">
   <LINK REL="Next"  HREF="110763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 684773] New: Crash if ListView does not have focus and I remove all items from it</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20684773%5D%20New%3A%20Crash%20if%20ListView%20does%20not%20have%20focus%0A%20and%20I%20remove%20all%20items%20from%20it&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 684773] New: Crash if ListView does not have focus and I remove all items from it">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Apr  3 14:06:50 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="110761.html">[Mono-bugs] [Bug 668386] [post] Should allow reporting items which were ignored without affecting the final exitCode
</A></li>
        <LI>Next message: <A HREF="110763.html">[Mono-bugs] [Bug 684803] New: XmlSiteMapProvider parsing: Can't find a site map node for the url: Default.aspx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110762">[ date ]</a>
              <a href="thread.html#110762">[ thread ]</a>
              <a href="subject.html#110762">[ subject ]</a>
              <a href="author.html#110762">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=684773">https://bugzilla.novell.com/show_bug.cgi?id=684773</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=684773#c0">https://bugzilla.novell.com/show_bug.cgi?id=684773#c0</A>


           Summary: Crash if ListView does not have focus and I remove all
                    items from it
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.6.x
          Platform: 64bit
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">SeLoGM at googlemail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=422922)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=422922">http://bugzilla.novell.com/attachment.cgi?id=422922</A>)
Exsample Project

User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.16)
Gecko/20110323 Ubuntu/10.10 (maverick) Firefox/3.6.16

Crash if ListView does not have focus and I remove all items from it 

Reproducible: Always

Steps to Reproduce:
1. Add Items in ListView (in run time)
2. Select Item in ListView
3. Lost Focus by Selecting other controls (ex. Textedit)
4. Remove all Items in ListView (in runtime)
5. Crash



Code for remove all Items:
foreach (ListViewItem obj in listView1.Items.Cast&lt;ListViewItem&gt;().ToList()) {
                listView1.Items.Remove(obj);
            }

---------------
Error:
mono '/home/sergej/Desktop/WindowsFormsApplication1.exe' 
System.ArgumentOutOfRangeException: Argument is out of range.
Parameter name: index
  at System.Windows.Forms.ListView+ListViewItemCollection.get_Item (Int32
index) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView.GetItemAtDisplayIndex (Int32 display_index)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView.get_FocusedItem () [0x00000] in &lt;filename
unknown&gt;:0 
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.ListView:get_FocusedItem ()
  at System.Windows.Forms.ListViewItem.get_Focused () [0x00000] in &lt;filename
unknown&gt;:0 
  at System.Windows.Forms.ListView+ListViewItemCollection.RemoveAt (Int32
index) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ListView+ListViewItemCollection.Remove
(System.Windows.Forms.ListViewItem item) [0x00000] in &lt;filename unknown&gt;:0 
  at WindowsFormsApplication1.Form1.button2_Click (System.Object sender,
System.EventArgs e) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.OnClick (System.EventArgs e) [0x00000] in
&lt;filename unknown&gt;:0 
  at System.Windows.Forms.Button.OnClick (System.EventArgs e) [0x00000] in
&lt;filename unknown&gt;:0 
  at System.Windows.Forms.ButtonBase.OnMouseUp
(System.Windows.Forms.MouseEventArgs mevent) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Button.OnMouseUp (System.Windows.Forms.MouseEventArgs
mevent) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.WmLButtonUp (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.ButtonBase.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Button.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x00000] in &lt;filename unknown&gt;:0 

--------------
mono version:
Mono JIT compiler version 2.6.7 (Debian 2.6.7-3ubuntu1)
Copyright (C) 2002-2010 Novell, Inc and Contributors. www.mono-project.com
    TLS:           __thread
    GC:            Included Boehm (with typed GC and Parallel Mark)
    SIGSEGV:       altstack
    Notifications: epoll
    Architecture:  amd64
    Disabled:      none

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="110761.html">[Mono-bugs] [Bug 668386] [post] Should allow reporting items which were ignored without affecting the final exitCode
</A></li>
	<LI>Next message: <A HREF="110763.html">[Mono-bugs] [Bug 684803] New: XmlSiteMapProvider parsing: Can't find a site map node for the url: Default.aspx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110762">[ date ]</a>
              <a href="thread.html#110762">[ thread ]</a>
              <a href="subject.html#110762">[ subject ]</a>
              <a href="author.html#110762">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
