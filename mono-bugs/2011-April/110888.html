<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 685872] New: UITableView makes SIGSEGV after upgraded to monotouch 4.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20685872%5D%20New%3A%20UITableView%20makes%20SIGSEGV%20after%0A%20upgraded%20to%20monotouch%204.0&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="111161.html">
   <LINK REL="Next"  HREF="111290.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 685872] New: UITableView makes SIGSEGV after upgraded to monotouch 4.0</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20685872%5D%20New%3A%20UITableView%20makes%20SIGSEGV%20after%0A%20upgraded%20to%20monotouch%204.0&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 685872] New: UITableView makes SIGSEGV after upgraded to monotouch 4.0">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Apr  7 09:25:02 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="111161.html">[Mono-bugs] [Bug 685863] Improve (?) GC to collect when there are too many finalizers queued.
</A></li>
        <LI>Next message: <A HREF="111290.html">[Mono-bugs] [Bug 685872] UITableView makes SIGSEGV after upgraded to monotouch 4.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110888">[ date ]</a>
              <a href="thread.html#110888">[ thread ]</a>
              <a href="subject.html#110888">[ subject ]</a>
              <a href="author.html#110888">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=685872">https://bugzilla.novell.com/show_bug.cgi?id=685872</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=685872#c0">https://bugzilla.novell.com/show_bug.cgi?id=685872#c0</A>


           Summary: UITableView makes SIGSEGV after upgraded to monotouch
                    4.0
    Classification: Mono
           Product: MonoTouch
           Version: unspecified
          Platform: iPhone
        OS/Version: Apple iOS 4.3
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Runtime
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">liiir1985 at hotmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Description of Problem:
I upgraded my monotouch from 3.2.6 to 4.0 today, but as I start my project, it
crashed instantly.
And then I discover, if I set an UITableViewSource to TableView.Source
property, it will then crash with SIGSEGV, even with a brand new
UITableViewSource(only basic implementation with GetCell and RowsInSection
overrides, and returning 0). And I noticed that the overriden method of
UITableViewSource isn't called at all before crashing. It means it already
crashed before the app even called the method in UITableViewSource.

Steps to reproduce the problem:
1. Load a UITableView with Source set.


Actual Results:
Crash instantly after the UITableView is loaded

Expected Results:
Shows the content in UITableViewSource

How often does this happen? 
Everytime

Additional Information:
Callstack while crashing:
Stacktrace:

  at (wrapper managed-to-native)
MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr)
&lt;IL 0x0009f, 0xffffffff&gt;
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x00038] in
/Users/plasma/Source/iphone/monotouch/UIKit/UIApplication.cs:26
  at MonoTouch.UIKit.UIApplication.Main (string[]) [0x00000] in
/Users/plasma/Source/iphone/monotouch/UIKit/UIApplication.cs:31
  at Subscriber.Application.Main (string[]) [0x00000] in
/Users/liiir1985/Projects/Imouto/Subscriber/Main.cs:15
  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_void_object
(object,intptr,intptr,intptr) &lt;IL 0x00050, 0xffffffff&gt;

Native stacktrace:

    0   Subscriber                          0x000d0db5
mono_handle_native_sigsegv + 343
    1   Subscriber                          0x0000f80c
mono_sigsegv_signal_handler + 322
    2   libSystem.B.dylib                   0x920cd45b _sigtramp + 43
    3   ???                                 0xffffffff 0x0 + 4294967295
    4   UIKit                               0x01e8c3b0 -[UITableViewRowData
invalidateAllSections] + 66
    5   UIKit                               0x01d43d23
-[UITableView(_UITableViewPrivate) _updateRowData] + 113
    6   UIKit                               0x01d3f65c -[UITableView
noteNumberOfRowsChanged] + 105
    7   UIKit                               0x01d4c708 -[UITableView
reloadData] + 773
    8   UIKit                               0x01d49844 -[UITableView
layoutSubviews] + 42
    9   QuartzCore                          0x031aea5a -[CALayer
layoutSublayers] + 181
    10  QuartzCore                          0x031b0ddc CALayerLayoutIfNeeded +
220
    11  QuartzCore                          0x031560b4
_ZN2CA7Context18commit_transactionEPNS_11TransactionE + 310
    12  QuartzCore                          0x03157294
_ZN2CA11Transaction6commitEv + 292
    13  QuartzCore                          0x0315746d
_ZN2CA11Transaction17observer_callbackEP19__CFRunLoopObservermPv + 99
    14  CoreFoundation                      0x00e9f89b
__CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 27
    15  CoreFoundation                      0x00e346e7 __CFRunLoopDoObservers +
295
    16  CoreFoundation                      0x00dfd1d7 __CFRunLoopRun + 1575
    17  CoreFoundation                      0x00dfc840 CFRunLoopRunSpecific +
208
    18  CoreFoundation                      0x00dfc761 CFRunLoopRunInMode + 97
    19  GraphicsServices                    0x0404b1c4 GSEventRunModal + 217
    20  GraphicsServices                    0x0404b289 GSEventRun + 115
    21  UIKit                               0x01cdfc93 UIApplicationMain + 1160
    22  ???                                 0x09d470eb 0x0 + 164917483
    23  ???                                 0x09d46ebc 0x0 + 164916924
    24  ???                                 0x09d464bc 0x0 + 164914364
    25  ???                                 0x09d46314 0x0 + 164913940
    26  ???                                 0x09d46466 0x0 + 164914278
    27  Subscriber                          0x0000f5c7 mono_jit_runtime_invoke
+ 1332
    28  Subscriber                          0x001ed281 mono_runtime_invoke +
137
    29  Subscriber                          0x001ef968 mono_runtime_exec_main +
669
    30  Subscriber                          0x001eed52 mono_runtime_run_main +
843
    31  Subscriber                          0x000a3153 mono_jit_exec + 200
    32  Subscriber                          0x002a16b8 main + 4155
    33  Subscriber                          0x00002949 _start + 208
    34  Subscriber                          0x00002878 start + 40

Debug info from gdb:

/tmp/mono-gdb-commands.OLVfhM:1: Error in sourced command file:
unable to debug self

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="111161.html">[Mono-bugs] [Bug 685863] Improve (?) GC to collect when there are too many finalizers queued.
</A></li>
	<LI>Next message: <A HREF="111290.html">[Mono-bugs] [Bug 685872] UITableView makes SIGSEGV after upgraded to monotouch 4.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110888">[ date ]</a>
              <a href="thread.html#110888">[ thread ]</a>
              <a href="subject.html#110888">[ subject ]</a>
              <a href="author.html#110888">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
