<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 687865] New: Async methods of HttpWebRequest fail when compiled for the Device
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20687865%5D%20New%3A%20Async%20methods%20of%20HttpWebRequest%20fail%0A%20when%20compiled%20for%20the%20Device&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="111072.html">
   <LINK REL="Next"  HREF="111092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 687865] New: Async methods of HttpWebRequest fail when compiled for the Device</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20687865%5D%20New%3A%20Async%20methods%20of%20HttpWebRequest%20fail%0A%20when%20compiled%20for%20the%20Device&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 687865] New: Async methods of HttpWebRequest fail when compiled for the Device">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Apr 15 09:48:09 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="111072.html">[Mono-bugs] [Bug 667329] Key duplication when adding: sessionState
</A></li>
        <LI>Next message: <A HREF="111092.html">[Mono-bugs] [Bug 687865] Async methods of HttpWebRequest fail when compiled for the Device
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111073">[ date ]</a>
              <a href="thread.html#111073">[ thread ]</a>
              <a href="subject.html#111073">[ subject ]</a>
              <a href="author.html#111073">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=687865">https://bugzilla.novell.com/show_bug.cgi?id=687865</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=687865#c0">https://bugzilla.novell.com/show_bug.cgi?id=687865#c0</A>


           Summary: Async methods of HttpWebRequest fail when compiled for
                    the Device
    Classification: Mono
           Product: MonoTouch
           Version: SVN
          Platform: iPhone
        OS/Version: Other
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Class Libraries
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gnorton at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jonathan.peppers at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US)
AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.204 Safari/534.16

I recently updated to MonoTouch 4, prior to this my app worked fine.

I am using HttpWebRequest asynchronously: I call Begin/EndGetRequestStream and
Begin/EndGetResponse, and pass private member methods of my class for
callbacks.

When running on the device, in Debug or Release, I get this exception:

System.ExecutionEngineException has been thrown.

Attempting to JIT compile method 'Omniprise.API.HttpServer:GetResponseCallback
(System.IAsyncResult)' while running with --aot-only.

 at System.Net.WebAsyncResult.CB (System.Object unused) [0x00000] in &lt;filename
unknown&gt;:0

I tried changing several minor things like putting PreserveAttribute on the
methods, making them non-private, etc., turning off linking, etc. but nothing
I've tried has gotten my code to work on MonoTouch 4.0, even though it works
fine on Windows and the previous version of MonoTouch.

Reproducible: Always

Steps to Reproduce:
1. Use async methods of HttpWebRequest
2. Build for the device, you can run in Debug
3. First request fails with above exception
Actual Results:  
ExecutionEngineException is thrown.

Expected Results:  
The request should complete.

This is holding us up from putting an update of our App to the app store.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>











































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="111072.html">[Mono-bugs] [Bug 667329] Key duplication when adding: sessionState
</A></li>
	<LI>Next message: <A HREF="111092.html">[Mono-bugs] [Bug 687865] Async methods of HttpWebRequest fail when compiled for the Device
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111073">[ date ]</a>
              <a href="thread.html#111073">[ thread ]</a>
              <a href="subject.html#111073">[ subject ]</a>
              <a href="author.html#111073">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
