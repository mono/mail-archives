<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 689487] New: Application.Lock() causes SynchronizationLockException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20689487%5D%20New%3A%20Application.Lock%28%29%20causes%0A%20SynchronizationLockException&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="111378.html">
   <LINK REL="Next"  HREF="111449.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 689487] New: Application.Lock() causes SynchronizationLockException</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20689487%5D%20New%3A%20Application.Lock%28%29%20causes%0A%20SynchronizationLockException&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 689487] New: Application.Lock() causes SynchronizationLockException">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Apr 24 07:09:25 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="111378.html">[Mono-bugs] [Bug 689477] New: AvoidUnnecessarySpecializationRule is too aggressive when dealing with generic types and suggesting base interaces
</A></li>
        <LI>Next message: <A HREF="111449.html">[Mono-bugs] [Bug 689487] Application.Lock() causes	SynchronizationLockException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111379">[ date ]</a>
              <a href="thread.html#111379">[ thread ]</a>
              <a href="subject.html#111379">[ subject ]</a>
              <a href="author.html#111379">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=689487">https://bugzilla.novell.com/show_bug.cgi?id=689487</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=689487#c0">https://bugzilla.novell.com/show_bug.cgi?id=689487#c0</A>


           Summary: Application.Lock() causes SynchronizationLockException
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.10.x
          Platform: x86-64
        OS/Version: openSUSE 11.4
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">tsilikovis at freemail.ru</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
                CC: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">tsilikovis at freemail.ru</A>
          Found By: DeveloperNet
           Blocker: ---


Description of Problem:
I'm trying to deploy mojoPortal on latest Mono &amp; XSP, but I have
System.Threading.SynchronizationLockException: The current thread has not
entered the lock in read mode. mojoPortal forum already has this question and
they don't know how to solve that Application.Lock() in ASP .Net causes the
error.

Steps to reproduce the problem:
1. Write some Web site that uses Application.Lock() in Session_Start of
Global.asax.
2. Deploy it under the latest Mono and XSP with Apache.
3. Try to open the page. It causes the error.


Actual Results:
SynchronizationLockException in Global.asax

Expected Results:
Correct work of Application.Lock() according to documentation.

How often does this happen? 
On every start of a Web application that uses this method in Global.asax

Additional Information:

the message:
The current thread has not entered the lock in read mode

Description: HTTP 500. Error processing request.

Stack Trace:

System.Threading.SynchronizationLockException: The current thread has not
entered the lock in read mode
  at System.Threading.ReaderWriterLockSlim.ExitReadLock () [0x00000] in
&lt;filename unknown&gt;:0 
  at System.Web.HttpApplicationState.Get (System.String name) [0x00000] in
&lt;filename unknown&gt;:0 
  at System.Web.HttpApplicationState.get_Item (System.String name) [0x00000] in
&lt;filename unknown&gt;:0 
  at mojoPortal.Web.Global.IncrementUserCount () [0x00000] in &lt;filename
unknown&gt;:0 
  at mojoPortal.Web.Global.Session_Start (System.Object sender,
System.EventArgs e) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Web.SessionState.SessionStateModule.OnSessionStart () [0x00000] in
&lt;filename unknown&gt;:0 
  at System.Web.SessionState.SessionStateModule.OnAcquireRequestState
(System.Object o, System.EventArgs args) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Web.HttpApplication+&lt;RunHooks&gt;c__Iterator5.MoveNext () [0x00000] in
&lt;filename unknown&gt;:0 
  at System.Web.HttpApplication+&lt;Pipeline&gt;c__Iterator6.MoveNext () [0x00000] in
&lt;filename unknown&gt;:0 
  at System.Web.HttpApplication.Tick () [0x00000] in &lt;filename unknown&gt;:0 
Version information: Mono Runtime Version: 2.10.1 (tarball Wed Feb 23 20:28:28
UTC 2011); ASP.NET Version: 2.0.50727.1433

May be it was already reported but I've not found some patch or just some
information about this bug.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>





































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="111378.html">[Mono-bugs] [Bug 689477] New: AvoidUnnecessarySpecializationRule is too aggressive when dealing with generic types and suggesting base interaces
</A></li>
	<LI>Next message: <A HREF="111449.html">[Mono-bugs] [Bug 689487] Application.Lock() causes	SynchronizationLockException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111379">[ date ]</a>
              <a href="thread.html#111379">[ thread ]</a>
              <a href="subject.html#111379">[ subject ]</a>
              <a href="author.html#111379">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
