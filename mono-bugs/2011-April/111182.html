<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 688414] New: Exposing IEnumberable&lt;&gt; on a WCF	service fails
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20688414%5D%20New%3A%20Exposing%20IEnumberable%3C%3E%20on%20a%20WCF%0A%09service%20fails&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="111223.html">
   <LINK REL="Next"  HREF="111183.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 688414] New: Exposing IEnumberable&lt;&gt; on a WCF	service fails</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20688414%5D%20New%3A%20Exposing%20IEnumberable%3C%3E%20on%20a%20WCF%0A%09service%20fails&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 688414] New: Exposing IEnumberable&lt;&gt; on a WCF	service fails">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Apr 19 07:22:35 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="111223.html">[Mono-bugs] [Bug 688353] HttpListener returns HTTP 400 when wildcard is used for host name and path exists
</A></li>
        <LI>Next message: <A HREF="111183.html">[Mono-bugs] [Bug 688414] Exposing IEnumberable&lt;&gt; on a WCF service	fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111182">[ date ]</a>
              <a href="thread.html#111182">[ thread ]</a>
              <a href="subject.html#111182">[ subject ]</a>
              <a href="author.html#111182">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=688414">https://bugzilla.novell.com/show_bug.cgi?id=688414</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=688414#c0">https://bugzilla.novell.com/show_bug.cgi?id=688414#c0</A>


           Summary: Exposing IEnumberable&lt;&gt; on a WCF service fails
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.10.x
          Platform: x86
        OS/Version: Windows 7
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: WCF
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">b.vries at afas.nl</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=425605)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=425605">http://bugzilla.novell.com/attachment.cgi?id=425605</A>)
Solution to reproduce the problem

User-Agent:       Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64;
Trident/5.0; BOIE9;ENGB)

Exposing IEnumberable&lt;&gt; on a WCF service and calling the service fails with the
error below. It does work on MS .NET 4, but fails under mono 2.10.1. Could be
related to bug 670560.

Reproducible: Always

Steps to Reproduce:
1. Open the solution.
2. Run the client.exe and server.exe.
3. Then server reports it is ready press enter in the client and the error
appears. If you run with ms .net the call succeeds.
Actual Results:  
Exception Type 'System.Guid[]' is unexpected. The type should either be
registered as a known type, or DataContractResolver should be used.   
  at System.Runtime.Serialization.DataContractSerializer.WriteStartObject
(System.Xml.XmlDictionaryWriter writer, System.Object graph) [0x00000] in
&lt;filename unknown&gt;:0
  at System.Runtime.Serialization.XmlObjectSerializer.WriteObject
(System.Xml.XmlDictionaryWriter writer, System.Object graph) [0x00000] in
&lt;filename unknown&gt;:0
  at
System.ServiceModel.Dispatcher.DataContractMessagesFormatter+DataContractBodyWriter.WriteMessagePart
(System.Xml.XmlDictionaryWriter writer,
System.ServiceModel.Description.MessageBodyDescription desc,
System.ServiceModel.Description.MessagePartDescription partDesc, System.Object
obj) [0x00000] in &lt;filename unknown&gt;:0  at
System.ServiceModel.Dispatcher.DataContractMessagesFormatter+DataContractBodyWriter.OnWriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.BodyWriter.WriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.SimpleMessage.OnWriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Message.WriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Message.WriteBody
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Message.OnWriteMessage
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Message.WriteMessage
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.TextMessageEncoder.WriteMessage
(System.ServiceModel.Channels.Message message, System.IO.Stream stream)
[0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Http.HttpRequestContext.InternalReply
(System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000] in
&lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Http.HttpRequestContext.Reply
(System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000] in
&lt;filename unknown&gt;:0
  at System.ServiceModel.Dispatcher.MessageProcessingContext.Reply (Boolean
useTimeout) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Dispatcher.OperationInvokerHandler.Reply
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc, Boolean
useTimeout) [0x00000] in &lt;filename unknown&gt;:0  at
System.ServiceModel.Dispatcher.OperationInvokerHandler.ProcessRequest
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc) [0x00000] in
&lt;filenameunknown&gt;:0
  at
System.ServiceModel.Dispatcher.BaseRequestProcessorHandler.ProcessRequestChain
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc) [0x00000] in
&lt;filename unknown&gt;:0
  at
System.ServiceModel.Dispatcher.BaseRequestProcessorHandler.ProcessRequestChain
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc) [0x00000] in
&lt;filename unknown&gt;:0
  at System.ServiceModel.Dispatcher.HandlersChain.ProcessRequestChain
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc) [0x00000] in
&lt;filename unknown&gt;:0
  at System.ServiceModel.Dispatcher.BaseRequestProcessor.ProcessRequest
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc) [0x00000] in
&lt;filename unknown&gt;:0

 System.Runtime.Serialization.SerializationException: Type 'System.Guid[]' is
unexpected. The type should either be registered as a known type, or
DataContractResolver should be used.
  at System.Runtime.Serialization.DataContractSerializer.WriteStartObject
(System.Xml.XmlDictionaryWriter writer, System.Object graph) [0x00000] in
&lt;filename unknown&gt;:0
  at System.Runtime.Serialization.XmlObjectSerializer.WriteObject
(System.Xml.XmlDictionaryWriter writer, System.Object graph) [0x00000] in
&lt;filename unknown&gt;:0
  at
System.ServiceModel.Dispatcher.DataContractMessagesFormatter+DataContractBodyWriter.WriteMessagePart
(System.Xml.XmlDictionaryWriter writer,
System.ServiceModel.Description.MessageBodyDescription desc,
System.ServiceModel.Description.MessagePartDescription partDesc, System.Object
obj) [0x00000] in &lt;filename unknown&gt;:0
  at
System.ServiceModel.Dispatcher.DataContractMessagesFormatter+DataContractBodyWriter.OnWriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.BodyWriter.WriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.SimpleMessage.OnWriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Message.WriteBodyContents
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Message.WriteBody
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Message.OnWriteMessage
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Message.WriteMessage
(System.Xml.XmlDictionaryWriter writer) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.TextMessageEncoder.WriteMessage
(System.ServiceModel.Channels.Message message, System.IO.Stream stream)
[0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Http.HttpRequestContext.InternalReply
(System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000] in
&lt;filename unknown&gt;:0
  at System.ServiceModel.Channels.Http.HttpRequestContext.Reply
(System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000] in
&lt;filename unknown&gt;:0
  at System.ServiceModel.Dispatcher.MessageProcessingContext.Reply (Boolean
useTimeout) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Dispatcher.OperationInvokerHandler.Reply
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc, Boolean
useTimeout) [0x00000] in &lt;filename unknown&gt;:0
  at System.ServiceModel.Dispatcher.OperationInvokerHandler.ProcessRequest
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc) [0x00000] in
&lt;filenameunknown&gt;:0
  at
System.ServiceModel.Dispatcher.BaseRequestProcessorHandler.ProcessRequestChain
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc) [0x00000] in
&lt;filename unknown&gt;:0
  at
System.ServiceModel.Dispatcher.BaseRequestProcessorHandler.ProcessRequestChain
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc) [0x00000] in
&lt;filename unknown&gt;:0
  at System.ServiceModel.Dispatcher.HandlersChain.ProcessRequestChain
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc) [0x00000] in
&lt;filename unknown&gt;:0
  at System.ServiceModel.Dispatcher.BaseRequestProcessor.ProcessRequest
(System.ServiceModel.Dispatcher.MessageProcessingContext mrc) [0x00000] in
&lt;filename unknown&gt;:0

Expected Results:  
The client should display the guids returned from the server.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="111223.html">[Mono-bugs] [Bug 688353] HttpListener returns HTTP 400 when wildcard is used for host name and path exists
</A></li>
	<LI>Next message: <A HREF="111183.html">[Mono-bugs] [Bug 688414] Exposing IEnumberable&lt;&gt; on a WCF service	fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111182">[ date ]</a>
              <a href="thread.html#111182">[ thread ]</a>
              <a href="subject.html#111182">[ subject ]</a>
              <a href="author.html#111182">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
