<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 686486] New: Mono crashes when setting the DialogResult in the FormClosing event method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20686486%5D%20New%3A%20Mono%20crashes%20when%20setting%20the%0A%20DialogResult%20in%20the%20FormClosing%20event%20method&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="110955.html">
   <LINK REL="Next"  HREF="110966.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 686486] New: Mono crashes when setting the DialogResult in the FormClosing event method</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20686486%5D%20New%3A%20Mono%20crashes%20when%20setting%20the%0A%20DialogResult%20in%20the%20FormClosing%20event%20method&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 686486] New: Mono crashes when setting the DialogResult in the FormClosing event method">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Apr 10 10:10:20 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="110955.html">[Mono-bugs] [Bug 686481] AllowsAirPlay does not work with MonoTouch	4.0
</A></li>
        <LI>Next message: <A HREF="110966.html">[Mono-bugs] [Bug 686486] Mono crashes when setting the DialogResult in the FormClosing event method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110952">[ date ]</a>
              <a href="thread.html#110952">[ thread ]</a>
              <a href="subject.html#110952">[ subject ]</a>
              <a href="author.html#110952">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=686486">https://bugzilla.novell.com/show_bug.cgi?id=686486</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=686486#c0">https://bugzilla.novell.com/show_bug.cgi?id=686486#c0</A>


           Summary: Mono crashes when setting the DialogResult in the
                    FormClosing event method
    Classification: Mono
           Product: Mono: Class Libraries
           Version: SVN
          Platform: x86
        OS/Version: openSUSE 11.4
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">floseflose at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=424131)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=424131">http://bugzilla.novell.com/attachment.cgi?id=424131</A>)
test case for dialogresult bug

Description of Problem:
When setting the DialogResult in the FormClosing event method, mono immediately
calls FireClosingEvents again, which calls fires FormClosing, where
DialogResult is set again, so mono is caught in an endless loop and eventually
crashes.

Steps to reproduce the problem:
1. combile the attached cs file: gmcs -r:System.Windows.Forms
mono_dialogresult_bug.cs
2. run the program, an empty Form appears.
3. close the form

Actual Results:
mono crashes

Expected Results:
the form should simply be closed

How often does this happen? 
always

Additional Information:
a workaround is to check in the FormClosing method if the DialogResult hasn't
been set already and only then set the DialogResult.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="110955.html">[Mono-bugs] [Bug 686481] AllowsAirPlay does not work with MonoTouch	4.0
</A></li>
	<LI>Next message: <A HREF="110966.html">[Mono-bugs] [Bug 686486] Mono crashes when setting the DialogResult in the FormClosing event method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110952">[ date ]</a>
              <a href="thread.html#110952">[ thread ]</a>
              <a href="subject.html#110952">[ subject ]</a>
              <a href="author.html#110952">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
