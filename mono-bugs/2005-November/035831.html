<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 76655][Nor] Changed - Assembly loading problems
	are not reported in a System.CodeDom compile.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2076655%5D%5BNor%5D%20Changed%20-%20Assembly%20loading%20problems%0A%09are%20not%20reported%20in%20a%20System.CodeDom%20compile.&In-Reply-To=bug-76655%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035830.html">
   <LINK REL="Next"  HREF="035832.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 76655][Nor] Changed - Assembly loading problems
	are not reported in a System.CodeDom compile.</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2076655%5D%5BNor%5D%20Changed%20-%20Assembly%20loading%20problems%0A%09are%20not%20reported%20in%20a%20System.CodeDom%20compile.&In-Reply-To=bug-76655%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 76655][Nor] Changed - Assembly loading problems
	are not reported in a System.CodeDom compile.">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Wed Nov  9 12:49:16 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="035830.html">[Mono-bugs] [Bug 76655][Nor] Changed - Assembly loading problems
	are not reported in a System.CodeDom compile.
</A></li>
        <LI>Next message: <A HREF="035832.html">[Mono-bugs] [Bug 76655][Nor] Changed - Assembly loading problems
	are not reported in a System.CodeDom compile.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35831">[ date ]</a>
              <a href="thread.html#35831">[ thread ]</a>
              <a href="subject.html#35831">[ subject ]</a>
              <a href="author.html#35831">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">grompf at sublimeintervention.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=76655">http://bugzilla.ximian.com/show_bug.cgi?id=76655</A>

--- shadow/76655	2005-11-09 12:12:00.000000000 -0500
+++ shadow/76655.tmp.9087	2005-11-09 12:49:16.000000000 -0500
@@ -1,14 +1,14 @@
 Bug#: 76655
 Product: Mono: Class Libraries
 Version: 1.1
-OS: 
+OS: unknown
 OS Details: 
 Status: NEW   
 Resolution: 
-Severity: 
+Severity: Unknown
 Priority: Normal
 Component: System
 AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>                            
 ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">d.moonfire at mfgames.com</A>               
 QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
 TargetMilestone: ---
@@ -142,6 +142,38 @@
 Additional Information:
 
 ------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">d.moonfire at mfgames.com</A>  2005-11-09 12:11 -------
 Created an attachment (id=16041)
 Zip file with test case.
 
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">grompf at sublimeintervention.com</A>  2005-11-09 12:49 -------
+The basic problem here is that mcs is running but the TestNamespace.dll reference isn't 
+locatable so the runtime crashes with:
+
+** (/Library/Frameworks/Mono.framework/Versions/Current/bin/../lib/mono/1.0/
+mcs.exe:23166): WARNING **: The following assembly referenced from /Users/plasma/
+Desktop/test-case-3/TestNamespace2.dll could not be loaded:
+     Assembly:   TestNamespace    (assemblyref_index=0)
+     Version:    0.0.0.0
+     Public Key: (none)
+The assembly was not found in the Global Assembly Cache, a path listed in the 
+MONO_PATH environment variable, or in the location of the executing assembly (/Users/
+plasma/Desktop/test-case-3).
+
+
+** ERROR **: file class.c: line 2418 (mono_class_setup_parent): should not be reached
+aborting...      
+
+Since this doesn't match the regex on line 266 of class/System/Microsoft.CSharp/
+CSharpCodeCompiler.cs we return null as a result the crash is gobbled and the code 
+continues trying to load the assembly that was never compiled.
+
+Microsoft throws a CS0011 in this case; but this is a little more difficult for us to do.  I've 
+attached a patch that will propogate up unmatched output from the compiler; but it may 
+have unexpected consequences. 
+
+We definately shouldn't be treating runtime crashes as ok; perhaps we should check the 
+return code from the process and handle it there instead?
+
+-kangaroo
+
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035830.html">[Mono-bugs] [Bug 76655][Nor] Changed - Assembly loading problems
	are not reported in a System.CodeDom compile.
</A></li>
	<LI>Next message: <A HREF="035832.html">[Mono-bugs] [Bug 76655][Nor] Changed - Assembly loading problems
	are not reported in a System.CodeDom compile.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35831">[ date ]</a>
              <a href="thread.html#35831">[ thread ]</a>
              <a href="subject.html#35831">[ subject ]</a>
              <a href="author.html#35831">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
