<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 77268][Wis] Changed - Sqlite DateTime Parameters	Handled Incorrectly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2077268%5D%5BWis%5D%20Changed%20-%20Sqlite%20DateTime%20Parameters%0A%09Handled%20Incorrectly&In-Reply-To=bug-77268%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044175.html">
   <LINK REL="Next"  HREF="044177.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 77268][Wis] Changed - Sqlite DateTime Parameters	Handled Incorrectly</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2077268%5D%5BWis%5D%20Changed%20-%20Sqlite%20DateTime%20Parameters%0A%09Handled%20Incorrectly&In-Reply-To=bug-77268%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 77268][Wis] Changed - Sqlite DateTime Parameters	Handled Incorrectly">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Tue Jul  4 07:44:08 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="044175.html">[Mono-bugs] [Bug 78759][Nor] Changed - ImageListStreamer fails to	load image resources
</A></li>
        <LI>Next message: <A HREF="044177.html">[Mono-bugs] [Bug 78594][Nor] Changed - [PATCH] 2.0 Serialization	Callbacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44176">[ date ]</a>
              <a href="thread.html#44176">[ thread ]</a>
              <a href="subject.html#44176">[ subject ]</a>
              <a href="author.html#44176">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">anmar at gmx.net.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=77268">http://bugzilla.ximian.com/show_bug.cgi?id=77268</A>

--- shadow/77268	2006-07-04 07:02:32.000000000 -0400
+++ shadow/77268.tmp.22825	2006-07-04 07:44:08.000000000 -0400
@@ -10,13 +10,12 @@
 Component: Sys.Data.SqlClient
 AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">tsenganal at novell.com</A>                            
 ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jhill at arcfocus.com</A>               
 QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
 TargetMilestone: ---
 URL: 
-Cc: 
 Summary: Sqlite DateTime Parameters Handled Incorrectly
 
 Description of Problem:
 DbType.DateTime parameters are passed into SqliteCommands as numbers which
 cannot be used for datetime comparison in Sqlite (for instance, using the
 datetime functions provided with sqlite), and, if stored, will not be
@@ -183,6 +182,23 @@
 
 I'd prefer 1) as it's the simplest to work with, and can be even done
 in a somewhat backwards compatible way detecting the order of
 magnitude of the stored number.
 
 I'd be willing to provide patches for any of them.
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">anmar at gmx.net</A>  2006-07-04 07:44 -------
+Sorry, the modifier code should read:
+    case 'd': {
+      if( strcmp(z, &quot;dotnet&quot;)==0 &amp;&amp; p-&gt;validJD ){
+        p-&gt;rJD = ((p-&gt;rJD/86400.0)/10000000.0) + 2305813.5;
+        p-&gt;rJD += localtimeOffset(p);
+        clearYMD_HMS_TZ(p);
+        rc = 0;
+      }
+      break;
+    }
+
+In the above case 1) it would be even simplier to be backwards
+compatible, as julian representation of date is returned by sqlite as
+double and current implementation as integer. Well and going
+julian-&gt;ticks is just ... trivial.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044175.html">[Mono-bugs] [Bug 78759][Nor] Changed - ImageListStreamer fails to	load image resources
</A></li>
	<LI>Next message: <A HREF="044177.html">[Mono-bugs] [Bug 78594][Nor] Changed - [PATCH] 2.0 Serialization	Callbacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44176">[ date ]</a>
              <a href="thread.html#44176">[ thread ]</a>
              <a href="subject.html#44176">[ subject ]</a>
              <a href="author.html#44176">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
