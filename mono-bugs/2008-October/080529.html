<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 432388] mono_thread_attach() causes infinite loop on win32 with --profile
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20432388%5D%20mono_thread_attach%28%29%20causes%20infinite%20loop%0A%20on%20win32%20with%20--profile&In-Reply-To=bug-432388-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080493.html">
   <LINK REL="Next"  HREF="080533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 432388] mono_thread_attach() causes infinite loop on win32 with --profile</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20432388%5D%20mono_thread_attach%28%29%20causes%20infinite%20loop%0A%20on%20win32%20with%20--profile&In-Reply-To=bug-432388-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 432388] mono_thread_attach() causes infinite loop on win32 with --profile">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Oct  8 05:30:09 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="080493.html">[Mono-bugs] [Bug 432388] mono_thread_attach() causes infinite loop on win32 with --profile
</A></li>
        <LI>Next message: <A HREF="080533.html">[Mono-bugs] [Bug 432388] mono_thread_attach() causes infinite loop on win32 with --profile
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80529">[ date ]</a>
              <a href="thread.html#80529">[ thread ]</a>
              <a href="subject.html#80529">[ subject ]</a>
              <a href="author.html#80529">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=432388">https://bugzilla.novell.com/show_bug.cgi?id=432388</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">massi at ximian.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=432388#c4">https://bugzilla.novell.com/show_bug.cgi?id=432388#c4</A>





--- Comment #4 from Massimiliano Mantione &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">massi at ximian.com</A>&gt;  2008-10-08 03:30:09 MDT ---
I should check the ChangeLog, bit IIRC the &quot;thread attach&quot; was needed because
it could happen that the shutdown happened inside a thread that was not
attached.
The function that printd the statistical profiler data needs to be called in a
thread that has a &quot;small ID&quot;, otherwise the profiler cannot get the JIT info
for the IP saved in the buffer.

The new profiler has proper code to deal with this (which has been nontrivial
to set up), so my preferred &quot;fix&quot; would be to switch to the new profiler.
Unfortunately I still did not build it on Windows, so this &quot;fix&quot; is not
applicable :-(

I would vote against this patch because it would fix this case and break
another one.

BTW, I checked the ChangeLog, and it turns out that the patch that introduced
the call to &quot;mono_thread_attach&quot; did not come from me, so my comment above
could be wrong.

Given a test case or the previous problem I could try to adapt the new
profiler's logic to the old one, or anyway to solve the problem properly.
But simply applying this patch would likely cause a regression.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080493.html">[Mono-bugs] [Bug 432388] mono_thread_attach() causes infinite loop on win32 with --profile
</A></li>
	<LI>Next message: <A HREF="080533.html">[Mono-bugs] [Bug 432388] mono_thread_attach() causes infinite loop on win32 with --profile
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80529">[ date ]</a>
              <a href="thread.html#80529">[ thread ]</a>
              <a href="subject.html#80529">[ subject ]</a>
              <a href="author.html#80529">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
