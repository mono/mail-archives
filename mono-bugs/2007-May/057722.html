<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 81737][Nor] Changed - DrawRect not placed correctly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2081737%5D%5BNor%5D%20Changed%20-%20DrawRect%20not%20placed%20correctly&In-Reply-To=bug-81737%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="057721.html">
   <LINK REL="Next"  HREF="057723.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 81737][Nor] Changed - DrawRect not placed correctly</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2081737%5D%5BNor%5D%20Changed%20-%20DrawRect%20not%20placed%20correctly&In-Reply-To=bug-81737%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 81737][Nor] Changed - DrawRect not placed correctly">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Mon May 28 15:21:17 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="057721.html">[Mono-bugs] [Bug 81767][Wis] New - convert_share does not convert	the FILE_SHARE_DELETE
</A></li>
        <LI>Next message: <A HREF="057723.html">[Mono-bugs] [Bug 81768][Wis] New - bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57722">[ date ]</a>
              <a href="thread.html#57722">[ thread ]</a>
              <a href="subject.html#57722">[ subject ]</a>
              <a href="author.html#57722">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sebastien at ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=81737">http://bugzilla.ximian.com/show_bug.cgi?id=81737</A>

--- shadow/81737	2007-05-28 14:24:22.000000000 -0400
+++ shadow/81737.tmp.23948	2007-05-28 15:21:17.000000000 -0400
@@ -75,6 +75,31 @@
 don't see any easy way to totally remove it :(
 
 ------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sebastien at ximian.com</A>  2007-05-28 14:24 -------
 Good news, the AA is already disabled when scaling is detected (and
 this applies in your case). Another good news, applying AA to fills
 fix your test case. Bad news, this makes SWF regress :(
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sebastien at ximian.com</A>  2007-05-28 15:21 -------
+Your sample is *very* dependant on an exact match of libgdiplus/cairo
+and gdi+ because it does it's own calculations. E.g. The two calls:
+DrawFilledRect (e.Graphics, 50f, 50f, 100f, 50f, 1f);
+DrawFilledRect (e.Graphics, 50f, 150f, 100f, 50f, 2f);
+
+are transformed into:
+DrawRectangle 50.5,50.5,99,49
+FillRectangle 51,51,98,48
+DrawRectangle 51,151,98,48
+FillRectangle 52,152,96,46
+
+So you're drawing/filling side-by-side using float values. At some
+points things gets converted into pixels (integer) and it will (even
+when this issue is fixed) look bad. BTW that would explain why you
+have some failures, in certain cases, on MS GDI+ too.
+
+I'm not sure how much this samples looks like your application code
+but an easier way to do this (that won't depends on side-by-side and
+floats) would be to call Fill first then Draw using the same values
+(i.e. draw over the fill).
+
+This should work correctly on MS GDI+ and look better (than today) on
+Mono and eventually get identical to GDI+ output.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="057721.html">[Mono-bugs] [Bug 81767][Wis] New - convert_share does not convert	the FILE_SHARE_DELETE
</A></li>
	<LI>Next message: <A HREF="057723.html">[Mono-bugs] [Bug 81768][Wis] New - bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57722">[ date ]</a>
              <a href="thread.html#57722">[ thread ]</a>
              <a href="subject.html#57722">[ subject ]</a>
              <a href="author.html#57722">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
