<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 78035][Maj] Changed - make check fails due to
	errors in delegate1 and delegate2 tests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2078035%5D%5BMaj%5D%20Changed%20-%20make%20check%20fails%20due%20to%0A%09errors%20in%20delegate1%20and%20delegate2%20tests&In-Reply-To=bug-78035%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041316.html">
   <LINK REL="Next"  HREF="041318.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 78035][Maj] Changed - make check fails due to
	errors in delegate1 and delegate2 tests</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2078035%5D%5BMaj%5D%20Changed%20-%20make%20check%20fails%20due%20to%0A%09errors%20in%20delegate1%20and%20delegate2%20tests&In-Reply-To=bug-78035%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 78035][Maj] Changed - make check fails due to
	errors in delegate1 and delegate2 tests">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Wed Apr 12 15:33:53 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="041316.html">[Mono-bugs] [Bug 78093][Maj] New - Class loader race condition
</A></li>
        <LI>Next message: <A HREF="041318.html">[Mono-bugs] [Bug 78093][Maj] Changed - Class loader race condition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41317">[ date ]</a>
              <a href="thread.html#41317">[ thread ]</a>
              <a href="subject.html#41317">[ subject ]</a>
              <a href="author.html#41317">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">matt at use.net.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=78035">http://bugzilla.ximian.com/show_bug.cgi?id=78035</A>

--- shadow/78035	2006-04-12 12:48:27.000000000 -0400
+++ shadow/78035.tmp.27681	2006-04-12 15:33:53.000000000 -0400
@@ -197,6 +197,30 @@
 will depend highly on the memory layout as determined by gcc version,
 optimization level, kernel version, glibc version, etc, etc.
 
 ------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">vargaz at gmail.com</A>  2006-04-12 12:48 -------
 Should be fixed in HEAD and the 1.1.13 branch. Could you recheck ?
 
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">matt at use.net</A>  2006-04-12 15:33 -------
+Those valgrind warnings are now gone, thanks! The tests still fail
+during 'make check', though. When running them individually they pass.
+After a conversation with Zoltan on IRC, I tried the following
+commandline:
+MONO_PATH=../../../mcs/class/lib/default/ ~/bin/valgrind
+--smc-check=all --suppressions=/home/matt/src/mono/mono/data/mono.supp
+--error-limit=no --freelist-vol=50000000 mono -O=all  ./delegate1.exe
+
+Which produced this new valgrind warning:
+&quot;
+completed4: True
+==30111== 
+==30111== Invalid read of size 8
+==30111==    at 0x455157: mono_runtime_exec_main (object.c:2097)
+==30111==    by 0x455364: mono_runtime_run_main (object.c:1962)
+==30111==    by 0x41954C: mono_main (driver.c:545)
+==30111==    by 0x5518CFF: (below main) (in /lib/libc-2.3.5.so)
+==30111==  Address 0x7FEFFFAA0 is just below the stack ptr.  
+&quot;
+
+If I run without valgrind and those commandline parameters, the test
+fails. So, this appears to be a JIT optimizer issue on amd64?
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041316.html">[Mono-bugs] [Bug 78093][Maj] New - Class loader race condition
</A></li>
	<LI>Next message: <A HREF="041318.html">[Mono-bugs] [Bug 78093][Maj] Changed - Class loader race condition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41317">[ date ]</a>
              <a href="thread.html#41317">[ thread ]</a>
              <a href="subject.html#41317">[ subject ]</a>
              <a href="author.html#41317">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
