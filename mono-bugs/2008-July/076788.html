<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 409672] New: DrawEllipse renders translated after scaling the graphics transform.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20409672%5D%20New%3A%20DrawEllipse%20renders%20translated%20after%0A%20scaling%20the%20graphics%20transform.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="076785.html">
   <LINK REL="Next"  HREF="076790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 409672] New: DrawEllipse renders translated after scaling the graphics transform.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20409672%5D%20New%3A%20DrawEllipse%20renders%20translated%20after%0A%20scaling%20the%20graphics%20transform.&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 409672] New: DrawEllipse renders translated after scaling the graphics transform.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Jul 16 16:26:50 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="076785.html">[Mono-bugs] [Bug 317244] [PARSER] get tons of error CS1010: Newline	in constant
</A></li>
        <LI>Next message: <A HREF="076790.html">[Mono-bugs] [Bug 409672] DrawEllipse renders translated after scaling the graphics transform.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76788">[ date ]</a>
              <a href="thread.html#76788">[ thread ]</a>
              <a href="subject.html#76788">[ subject ]</a>
              <a href="author.html#76788">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=409672">https://bugzilla.novell.com/show_bug.cgi?id=409672</A>


           Summary: DrawEllipse renders translated after scaling the
                    graphics transform.
           Product: Mono: Class Libraries
           Version: 1.9.0
          Platform: Other
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Drawing.
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">david.bobeck at precisepath.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Other


Created an attachment (id=228235)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=228235">https://bugzilla.novell.com/attachment.cgi?id=228235</A>)
Windows Zip

Description of Problem:
----------------------- 

When assigning a scaling transform to a Graphics object, Graphics.DrawEllipse()
method renders fine under Windows and Win32 Mono, but translated under Mono for
Linux.


Steps to reproduce the problem:
-------------------------------

I have included (zipped) a solution created with Microsoft Visual C# Express
Edition. (Sorry, I'm a Windows developer) The source files and a release
executable are provided. A post-build step will copy the &quot;Mono Bug 2 by
DAB.exe&quot; to &quot;bug2.exe&quot; for ease-of-use on linux.

1. run the included bug2.exe on linux (mono bug2.exe)
2. cringe at the results


Actual Results:
---------------

The included sample application creates a rectangle (rTest) 5 units in width
and height. A scaling factor is then calculated to map rTest to the Form's
client rectangle. This scaling factor is applied to the graphics object with 

Matrix X = new Matrix(fSceneScaler, 0, 0, fSceneScaler, 0, 0);
g.Transform = X;

when FillEllipse(...) is called, it works as expected, but when
DrawEllipse(...) is called, it will render translated by some fixed amount.

By changing the rTest size to something smaller, the effect is more dramatic.
By changing the rTest size to something larger (say 300 units), the effect
becomes negligable.

Since my cad-like application attempts to draw using units that are one-to-one,
the results are awful to look at.


Expected Results:
-----------------
The Linux output should match the Windows output, right?


How often does this happen?
---------------------------
Every Time.


Additional Information:
-----------------------

Images of the results found on windows (Windows.png), on mono for windows
(WinMono.png) and on mono for linux (LinuxMono-5.png) are included in the zip
file. Additionally, other rTest rectangle sizes are included (LinuxMono-25.png,
LinuxMono-75.png, LinuxMono-300.png)


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="076785.html">[Mono-bugs] [Bug 317244] [PARSER] get tons of error CS1010: Newline	in constant
</A></li>
	<LI>Next message: <A HREF="076790.html">[Mono-bugs] [Bug 409672] DrawEllipse renders translated after scaling the graphics transform.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76788">[ date ]</a>
              <a href="thread.html#76788">[ thread ]</a>
              <a href="subject.html#76788">[ subject ]</a>
              <a href="author.html#76788">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
