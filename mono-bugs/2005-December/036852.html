<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 76920][Maj] New - SIGILL ExecutionEngineException
	on program with empty form
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2076920%5D%5BMaj%5D%20New%20-%20SIGILL%20ExecutionEngineException%0A%09on%20program%20with%20empty%20form&In-Reply-To=bug-76920%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036851.html">
   <LINK REL="Next"  HREF="036854.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 76920][Maj] New - SIGILL ExecutionEngineException
	on program with empty form</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2076920%5D%5BMaj%5D%20New%20-%20SIGILL%20ExecutionEngineException%0A%09on%20program%20with%20empty%20form&In-Reply-To=bug-76920%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 76920][Maj] New - SIGILL ExecutionEngineException
	on program with empty form">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Mon Dec  5 15:14:04 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="036851.html">[Mono-bugs] [Bug 76919][Nor] New - Overriding Controls property has
	an improper effect
</A></li>
        <LI>Next message: <A HREF="036854.html">[Mono-bugs] [Bug 76921][Min] New - Enum.FormatFlags fails to
	properly handle the &quot;No bits set&quot; case
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36852">[ date ]</a>
              <a href="thread.html#36852">[ thread ]</a>
              <a href="subject.html#36852">[ subject ]</a>
              <a href="author.html#36852">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sjoerd-ximian at linuxonly.nl.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=76920">http://bugzilla.ximian.com/show_bug.cgi?id=76920</A>

--- shadow/76920	2005-12-05 15:14:04.000000000 -0500
+++ shadow/76920.tmp.28412	2005-12-05 15:14:04.000000000 -0500
@@ -0,0 +1,95 @@
+Bug#: 76920
+Product: Mono: Class Libraries
+Version: 1.1
+OS: 
+OS Details: Debian Testing
+Status: NEW   
+Resolution: 
+Severity: 
+Priority: Major
+Component: libgdiplus
+AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jordi at ximian.com</A>                            
+ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sjoerd-ximian at linuxonly.nl</A>               
+QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
+TargetMilestone: ---
+URL: 
+Cc: 
+Summary: SIGILL ExecutionEngineException on program with empty form
+
+Description of Problem:
+When starting a program, it gives the following exception:
+System.ExecutionEngineException: SIGILL
+
+Program:
+----- start -----
+using System;
+using System.Drawing;
+using System.Windows.Forms;
+
+class BugTest:Form {
+	public static void Main() {
+	    BugTest b = new BugTest();
+	    Application.Run(b);
+	}
+
+
+}
+----- end -----
+
+Compiled using:
+gmcs -r:System.Windows.Forms -r:System.Drawing bug.cs
+
+Output:
+----- start -----
+Mono System.Windows.Forms Assembly [Revision: 51965; built: 2005/10/20 3:34:45]
+Keyboard: United States keyboard layout (phantom key version)
+Gtk colorscheme read
+
+Unhandled Exception: System.ExecutionEngineException: SIGILL
+in &lt;0x00000&gt; &lt;unknown method&gt;
+in (wrapper managed-to-native) System.Drawing.GDIPlus:GdipDrawImageRectI
+(intptr,intptr,int,int,int,int)
+in &lt;0x0003d&gt; System.Drawing.Graphics:DrawImage (System.Drawing.Image image,
+Int32 x, Int32 y, Int32 width, Int32 height)
+in (wrapper remoting-invoke-with-check) System.Drawing.Graphics:DrawImage
+(System.Drawing.Image,int,int,int,int)
+in &lt;0x0003b&gt; System.Drawing.Bitmap:.ctor (System.Drawing.Image original,
+Int32 width, Int32 height)
+in (wrapper remoting-invoke-with-check) System.Drawing.Bitmap:.ctor
+(System.Drawing.Image,int,int)
+in &lt;0x003cf&gt; System.Drawing.Icon:ToBitmap ()
+----- end -----
+
+GDB backtrace:
+----- start -----
+Program received signal SIGILL, Illegal instruction.
+[Switching to Thread -1210320672 (LWP 1867)]
+0xb718ba1e in _cairo_pixman_have_mmx () from /usr/lib/libgdiplus.so
+(gdb) bt
+#0  0xb718ba1e in _cairo_pixman_have_mmx () from /usr/lib/libgdiplus.so
+#1  0xb718bac6 in _cairo_pixman_compose_setup_mmx ()
+   from /usr/lib/libgdiplus.so
+#2  0xb7195c15 in _cairo_pixman_add_trapezoids () from /usr/lib/libgdiplus.so
+#3  0xb717683c in cairo_image_surface_get_height () from /usr/lib/libgdiplus.so
+#4  0xb717bb23 in cairo_surface_set_device_offset ()
+   from /usr/lib/libgdiplus.so
+#5  0xb717416a in cairo_font_options_get_hint_metrics ()
+   from /usr/lib/libgdiplus.so
+#6  0xb7174439 in cairo_font_options_get_hint_metrics ()
+   from /usr/lib/libgdiplus.so
+#7  0xb7174635 in cairo_font_options_get_hint_metrics ()
+   from /usr/lib/libgdiplus.so
+#8  0xb716dd3c in cairo_paint () from /usr/lib/libgdiplus.so
+#9  0xb7157077 in GdipDrawImageRect () from /usr/lib/libgdiplus.so
+#10 0xb7156f9c in GdipDrawImageRect () from /usr/lib/libgdiplus.so
+#11 0xb715714b in GdipDrawImageRectI () from /usr/lib/libgdiplus.so
+#12 0xb6a35d2a in ?? ()
+...
+#79 0x00000000 in ?? ()
+#80 0x080fd3f3 in mono_pthread_key_for_tls ()
+Previous frame inner to this frame (corrupt stack?)
+----- end -----
+
+Expected results: empty form
+Mono version: 1.1.10
+CPU: VIA Samuel 2
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036851.html">[Mono-bugs] [Bug 76919][Nor] New - Overriding Controls property has
	an improper effect
</A></li>
	<LI>Next message: <A HREF="036854.html">[Mono-bugs] [Bug 76921][Min] New - Enum.FormatFlags fails to
	properly handle the &quot;No bits set&quot; case
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36852">[ date ]</a>
              <a href="thread.html#36852">[ thread ]</a>
              <a href="subject.html#36852">[ subject ]</a>
              <a href="author.html#36852">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
