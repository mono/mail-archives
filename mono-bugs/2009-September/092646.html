<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 539394] New: mod_mono web app hangs when a cross-appdomain call results in a ThreadAbortException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20539394%5D%20New%3A%20mod_mono%20web%20app%20hangs%20when%20a%0A%20cross-appdomain%20call%20results%20in%20a%20ThreadAbortException&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="092637.html">
   <LINK REL="Next"  HREF="092693.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 539394] New: mod_mono web app hangs when a cross-appdomain call results in a ThreadAbortException</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20539394%5D%20New%3A%20mod_mono%20web%20app%20hangs%20when%20a%0A%20cross-appdomain%20call%20results%20in%20a%20ThreadAbortException&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 539394] New: mod_mono web app hangs when a cross-appdomain call results in a ThreadAbortException">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Sep 15 15:52:08 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="092637.html">[Mono-bugs] [Bug 525323] HttpListener wants a Content-Length header from requests with the SUBSCRIBE method
</A></li>
        <LI>Next message: <A HREF="092693.html">[Mono-bugs] [Bug 539394] mod_mono web app hangs when a cross-appdomain call results in a ThreadAbortException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92646">[ date ]</a>
              <a href="thread.html#92646">[ thread ]</a>
              <a href="subject.html#92646">[ subject ]</a>
              <a href="author.html#92646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=539394">http://bugzilla.novell.com/show_bug.cgi?id=539394</A>


           Summary: mod_mono web app hangs when a cross-appdomain call
                    results in a ThreadAbortException
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.4.x
          Platform: i686
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">brett at fogcreek.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=318397)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=318397">http://bugzilla.novell.com/attachment.cgi?id=318397</A>)
A small .net website to run with mod/mono -- web.config, .dll, and source .cs
file

User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.1.3)
Gecko/20090824 Firefox/3.5.3 (.NET CLR 3.5.30729)

&gt;<i>From a web app running from mod_mono with mono 2.4.2.3, I create an AppDomain,
</I>instantiate a class within that appdomain, and do a thread abort. Instead of
bubbling up the exception, mono hangs. gdb'd into it, looks like it's in
WaitForMultipleObjectsEx.

This does not happen in a simple console app, nor from the same web app running
under IIS and .NET. 

I'm not going into detail here about how to set this up under mod_mono - if
that needs further specification, let me know.

Reproducible: Always

Steps to Reproduce:
1. Run mod-mono-server2 against the provided .dll
2. Hit webserver/default.aspx
Actual Results:  
Mono process hangs indefinitely and must be killed, browser page spins.

Expected Results:  
For the site to serve a page with the following text, as .Net 2.0 does:
I shall now create an appdomain, call to that appdomain, and call BACK into
this appdomain to ThreadAbort . . .
Called it, caught it, reset it, and we're done.

This would involve the ThreadAbortException bubbling properly back into the
calling AppDomain.

We'd prefer to not have to work around this bug for FogBugz's plugin
architecture.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>
































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="092637.html">[Mono-bugs] [Bug 525323] HttpListener wants a Content-Length header from requests with the SUBSCRIBE method
</A></li>
	<LI>Next message: <A HREF="092693.html">[Mono-bugs] [Bug 539394] mod_mono web app hangs when a cross-appdomain call results in a ThreadAbortException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92646">[ date ]</a>
              <a href="thread.html#92646">[ thread ]</a>
              <a href="subject.html#92646">[ subject ]</a>
              <a href="author.html#92646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
