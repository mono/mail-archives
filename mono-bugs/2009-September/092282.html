<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 434772] unixODBC connection fails with I000 error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20434772%5D%20unixODBC%20connection%20fails%20with%20I000%20error&In-Reply-To=bug-434772-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="092280.html">
   <LINK REL="Next"  HREF="092283.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 434772] unixODBC connection fails with I000 error</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20434772%5D%20unixODBC%20connection%20fails%20with%20I000%20error&In-Reply-To=bug-434772-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 434772] unixODBC connection fails with I000 error">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Sep  4 12:28:58 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="092280.html">[Mono-bugs] [Bug 533882] HttpWebRequest fails inside a ASP.NET page: Socket::CheckProtocolSupport()
</A></li>
        <LI>Next message: <A HREF="092283.html">[Mono-bugs] [Bug 312968] HttpWebRequest can not handle WWW-Authenticate with POST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92282">[ date ]</a>
              <a href="thread.html#92282">[ thread ]</a>
              <a href="subject.html#92282">[ subject ]</a>
              <a href="author.html#92282">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=434772">http://bugzilla.novell.com/show_bug.cgi?id=434772</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jeffrey.w.williams at gmail.com</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=434772#c5">http://bugzilla.novell.com/show_bug.cgi?id=434772#c5</A>


Jeff Williams &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jeffrey.w.williams at gmail.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jeffrey.w.williams at gmail.co</A>
                   |                            |m




--- Comment #5 from Jeff Williams &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jeffrey.w.williams at gmail.com</A>&gt;  2009-09-04 10:28:55 MDT ---
I ran GDB on OpenSim w/ our Linux ODBC driver and found it was erroring out on
line 405 in OdbcConnection.cs. This in turn was traced back to the SQLConnect
DllImport in libodbc.cs. As Gert suspected, the only changes that occurred with
this DllImport (as well as all of the others for all ODBC functions) between
Mono 1.9.1 and Mono 2.x were the Unicode additions.

After I did some digging I had a hunch that one of the character sets wasn't
lining up now that Unicode was being used. I realized then that Mono, by
implementing Windows Unicode functions, uses UCS-2/UTF-16 and returns data in
that format. However the data being sent to/from these functions was malformed
because in our case Informix by default uses UCS-4 as its locale.

Thus the problem was fixed by merely changing /etc/unixODBC/odbc.ini (or
whichever INI you are using and setting the $ODBCINI param to it) to have the
following addition:

[ODBC]
UNICODE=UCS-2

To instruct Informix to send and receive data over its ODBC driver in UCS-2.

I'm not sure if all Linux ODBC drivers support UCS-2 as the default on most
Linux distros I believe is UTF-8. Although Gert said MySQL was working
correctly I am not sure what configuration he is using and haven't tested it. 

&gt;<i>From what I can tell, it would appear that Mono requires the ODBC driver to
</I>support UCS-2 to work properly and to be configured as such.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="092280.html">[Mono-bugs] [Bug 533882] HttpWebRequest fails inside a ASP.NET page: Socket::CheckProtocolSupport()
</A></li>
	<LI>Next message: <A HREF="092283.html">[Mono-bugs] [Bug 312968] HttpWebRequest can not handle WWW-Authenticate with POST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92282">[ date ]</a>
              <a href="thread.html#92282">[ thread ]</a>
              <a href="subject.html#92282">[ subject ]</a>
              <a href="author.html#92282">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
