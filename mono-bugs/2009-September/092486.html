<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 538280] New: mono crash in remoting,	if I use 'out' agrument.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20538280%5D%20New%3A%20mono%20crash%20in%20remoting%2C%0A%09if%20I%20use%20%27out%27%20agrument.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="092485.html">
   <LINK REL="Next"  HREF="092487.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 538280] New: mono crash in remoting,	if I use 'out' agrument.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20538280%5D%20New%3A%20mono%20crash%20in%20remoting%2C%0A%09if%20I%20use%20%27out%27%20agrument.&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 538280] New: mono crash in remoting,	if I use 'out' agrument.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Sep 11 00:17:54 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="092485.html">[Mono-bugs] [Bug 336676] Double free in libgamin
</A></li>
        <LI>Next message: <A HREF="092487.html">[Mono-bugs] [Bug 538280] mono crash in remoting,	if I use 'out' agrument.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92486">[ date ]</a>
              <a href="thread.html#92486">[ thread ]</a>
              <a href="subject.html#92486">[ subject ]</a>
              <a href="author.html#92486">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=538280">http://bugzilla.novell.com/show_bug.cgi?id=538280</A>


           Summary: mono crash in remoting, if I use 'out' agrument.
    Classification: Mono
           Product: Mono: Runtime
           Version: 2.4.x
          Platform: x86
        OS/Version: RHEL 5
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: remoting
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lluis at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mailing at mono.developer.kr</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US)
AppleWebKit/530.5 (KHTML, like Gecko) Chrome/2.0.172.30 Safari/530.5



** ERROR **: file object.c: line 5258 (mono_method_return_message_restore):
should not be reached
aborting...
Stacktrace:

  at (wrapper managed-to-native) object.__icall_wrapper_mono_remoting_wrapper
(intptr,intptr) &lt;0x00004&gt;
  at (wrapper managed-to-native) object.__icall_wrapper_mono_remoting_wrapper
(intptr,intptr) &lt;0xffffffff&gt;
  at (wrapper remoting-invoke) RIO.Data.Creative.Status.GetPublishableCreatives
(string,System.Collections.Generic.List`1&lt;RIO.Structures.Data.Campaign.CreativeData&gt;&amp;,System.Collections.Generic.Dictionary`2&lt;uint,
int&gt;&amp;) &lt;0xffffffff&gt;
  at (wrapper remoting-invoke-with-check)
RIO.Data.Creative.Status.GetPublishableCreatives
(string,System.Collections.Generic.List`1&lt;RIO.Structures.Data.Campaign.CreativeData&gt;&amp;,System.Collections.Generic.Dictionary`2&lt;uint,
int&gt;&amp;) &lt;0xffffffff&gt;
  at RIO.BusinessLogicLayer.Preset.SetPreset (string) &lt;0x00262&gt;
  at (wrapper runtime-invoke)
RIO.BusinessLogicLayer.Preset.runtime_invoke_byte__this___object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;
  at (wrapper managed-to-native)
System.Runtime.Remoting.RemotingServices.InternalExecute
(System.Reflection.MethodBase,object,object[],object[]&amp;) &lt;0x00004&gt;
  at (wrapper managed-to-native)
System.Runtime.Remoting.RemotingServices.InternalExecute
(System.Reflection.MethodBase,object,object[],object[]&amp;) &lt;0xffffffff&gt;
  at System.Runtime.Remoting.RemotingServices.InternalExecuteMessage
(System.MarshalByRefObject,System.Runtime.Remoting.Messaging.IMethodCallMessage)
&lt;0x001d5&gt;
  at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x000c9&gt;
  at
System.Runtime.Remoting.Messaging.ServerObjectTerminatorSink.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x00063&gt;
  at System.Runtime.Remoting.Lifetime.LeaseSink.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x00030&gt;
  at System.Runtime.Remoting.SingletonIdentity.SyncObjectProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x0004f&gt;
  at
System.Runtime.Remoting.Messaging.ServerContextTerminatorSink.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x00156&gt;
  at System.Runtime.Remoting.Contexts.CrossContextChannel.SyncProcessMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x000c7&gt;
  at System.Runtime.Remoting.Channels.ChannelServices.SyncDispatchMessage
(System.Runtime.Remoting.Messaging.IMessage) &lt;0x0003d&gt;
  at System.Runtime.Remoting.Channels.ChannelServices.DispatchMessage
(System.Runtime.Remoting.Channels.IServerChannelSinkStack,System.Runtime.Remoting.Messaging.IMessage,System.Runtime.Remoting.Messaging.IMessage&amp;)
&lt;0x0001f&gt;
  at System.Runtime.Remoting.Channels.ServerDispatchSink.ProcessMessage
(System.Runtime.Remoting.Channels.IServerChannelSinkStack,System.Runtime.Remoting.Messaging.IMessage,System.Runtime.Remoting.Channels.ITransportHeaders,System.IO.Stream,System.Runtime.Remoting.Messaging.IMessage&amp;,System.Runtime.Remoting.Channels.ITransportHeaders&amp;,System.IO.Stream&amp;)
&lt;0x00028&gt;
  at System.Runtime.Remoting.Channels.BinaryServerFormatterSink.ProcessMessage
(System.Runtime.Remoting.Channels.IServerChannelSinkStack,System.Runtime.Remoting.Messaging.IMessage,System.Runtime.Remoting.Channels.ITransportHeaders,System.IO.Stream,System.Runtime.Remoting.Messaging.IMessage&amp;,System.Runtime.Remoting.Channels.ITransportHeaders&amp;,System.IO.Stream&amp;)
&lt;0x0006a&gt;
  at System.Runtime.Remoting.Channels.SoapServerFormatterSink.ProcessMessage
(System.Runtime.Remoting.Channels.IServerChannelSinkStack,System.Runtime.Remoting.Messaging.IMessage,System.Runtime.Remoting.Channels.ITransportHeaders,System.IO.Stream,System.Runtime.Remoting.Messaging.IMessage&amp;,System.Runtime.Remoting.Channels.ITransportHeaders&amp;,System.IO.Stream&amp;)
&lt;0x002b0&gt;
  at System.Runtime.Remoting.MetadataServices.SdlChannelSink.ProcessMessage
(System.Runtime.Remoting.Channels.IServerChannelSinkStack,System.Runtime.Remoting.Messaging.IMessage,System.Runtime.Remoting.Channels.ITransportHeaders,System.IO.Stream,System.Runtime.Remoting.Messaging.IMessage&amp;,System.Runtime.Remoting.Channels.ITransportHeaders&amp;,System.IO.Stream&amp;)
&lt;0x0032b&gt;
  at
System.Runtime.Remoting.Channels.Http.HttpServerTransportSink.HandleRequest
(MonoHttp.HttpListenerContext) &lt;0x00446&gt;
  at System.Runtime.Remoting.Channels.Http.RemotingHttpListener.BindContext
(MonoHttp.HttpListenerContext) &lt;0x00019&gt;
  at MonoHttp.HttpConnection.OnRead (System.IAsyncResult) &lt;0x001e8&gt;
  at System.Net.Sockets.Socket/SocketAsyncResult.Complete () &lt;0x001b3&gt;
  at System.Net.Sockets.Socket/Worker.Receive () &lt;0x00016&gt;
  at (wrapper runtime-invoke) object.runtime_invoke_void__this__
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

    mono [0x80caceb]
    /lib/tls/libpthread.so.0 [0xa3aa90]
    /lib/tls/libc.so.6(abort+0xe9) [0x8ff279]
    /usr/lib/libglib-2.0.so.0(g_log+0) [0xbdbebe]
    /usr/lib/libglib-2.0.so.0(g_log+0x32) [0xbdbef0]
    mono [0x810e394]
    mono [0x81272e2]
    [0x4e1ac0]
    [0x81ded1]
    [0x81ddf0]
    [0x4c5083]
    [0x4c4d8e]
    mono(mono_runtime_invoke_array+0x1ba) [0x810c9be]
    mono [0x8113bb9]
    [0x482a9b]
    [0x482686]
    [0x48209a]
    [0x481f3c]
    [0x481da1]
    [0x380e60]
    [0x380db7]
    [0x3805f8]
    [0x3800de]
    [0x37ff98]
    [0x37ff61]
    [0x37f76b]
    [0x3789c9]
    [0x3786c4]
    [0x377d17]
    [0x3778ba]
    [0x373789]
    [0x36e774]
    [0x37344f]
    [0x397070]
    mono(mono_runtime_invoke_array+0x1ba) [0x810c9be]
    mono [0x810dc78]
    mono [0x8145848]
    mono [0x814614e]
    mono [0x81431d8]
    mono [0x81a739e]
    mono [0x81c4dd1]
    /lib/tls/libpthread.so.0 [0xa343cc]
    /lib/tls/libc.so.6(__clone+0x5e) [0x99f1ae]


Reproducible: Always

Steps to Reproduce:
1. build two remoting host and one client, on linux rhel 5. (it work well with
windows)
2. one call other the method. the method has out parameter. example below.

var host1 = (IHost2)Activator.GetObject(typeof(IHost2),
&quot;<A HREF="http://127.0.0.1:40002/OutParameterMethod&quot;">http://127.0.0.1:40002/OutParameterMethod&quot;</A>);

3. client call one's the method that call others.

var client = (IHost1)Activator.GetObject(typeof(IHost1),
&quot;<A HREF="http://127.0.0.1:40001/OutParameterMethod&quot;">http://127.0.0.1:40001/OutParameterMethod&quot;</A>);

4. alwasy crash.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>



































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="092485.html">[Mono-bugs] [Bug 336676] Double free in libgamin
</A></li>
	<LI>Next message: <A HREF="092487.html">[Mono-bugs] [Bug 538280] mono crash in remoting,	if I use 'out' agrument.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92486">[ date ]</a>
              <a href="thread.html#92486">[ thread ]</a>
              <a href="subject.html#92486">[ subject ]</a>
              <a href="author.html#92486">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
