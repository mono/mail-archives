<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 536194] New: Inifite loop in DataSet.Merge() with	itself
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20536194%5D%20New%3A%20Inifite%20loop%20in%20DataSet.Merge%28%29%20with%0A%09itself&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="092179.html">
   <LINK REL="Next"  HREF="092478.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 536194] New: Inifite loop in DataSet.Merge() with	itself</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20536194%5D%20New%3A%20Inifite%20loop%20in%20DataSet.Merge%28%29%20with%0A%09itself&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 536194] New: Inifite loop in DataSet.Merge() with	itself">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Sep  2 04:45:14 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="092179.html">[Mono-bugs] [Bug 533166] No @webservice directive found for precompiled webservice accessed from client proxy.
</A></li>
        <LI>Next message: <A HREF="092478.html">[Mono-bugs] [Bug 536194] Inifite loop in DataSet.Merge() with itself
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92180">[ date ]</a>
              <a href="thread.html#92180">[ thread ]</a>
              <a href="subject.html#92180">[ subject ]</a>
              <a href="author.html#92180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=536194">http://bugzilla.novell.com/show_bug.cgi?id=536194</A>


           Summary: Inifite loop in DataSet.Merge() with itself
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.4.x
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: Sys.Data
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">bnc-blr-team-mono at forge.provo.novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">novell at hafner-software.de</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Description of Problem:
If you invoke DataSet.Merge(DataSet), and if the supplied parameter is the same
instance as the one for which the method is invoked, then the method executed
forever and consumes an infinite amount of memory.


Code to reproduce the problem:
DataTable dataTable = new DataTable(&quot;Test&quot;);
dataTable.Columns.Add(&quot;Test&quot;);
dataTable.Rows.Add(&quot;Test&quot;);
DataSet dataSet = new DataSet(&quot;Test&quot;);
dataSet.Tables.Add(dataTable);
dataSet.Merge(dataSet); // &lt;-- crashes here

Actual Results:
&quot;dataSet.Merge(dataSet)&quot; executes forever. Memory consumption increases
quickly. It will probably crash as soon as it consumed all available memory and
cannot allocate any more.

Expected Results:
The Microsoft implementation does nothing in this case and returns immediately.
I assume that they have an additional check at the very beginning of the
DataSet.Merge(DataSet) implementation that skips the whole merge process.

How often does this happen? 
Always.

Additional Information:
I assume that this bug occurs on all platforms and all systems. However, I
confirmed it on Ubuntu 9.04 x86 and x64 and on the suseLinux vmware appliance
provided by mono-project.com with mono 2.4.2.3.  

I classified the severity as &quot;critical&quot; because I consider the behavior as s
&quot;Crash&quot; and &quot;Severe Memory leak&quot; I guess that a unit test and fix and is
quickly done.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="092179.html">[Mono-bugs] [Bug 533166] No @webservice directive found for precompiled webservice accessed from client proxy.
</A></li>
	<LI>Next message: <A HREF="092478.html">[Mono-bugs] [Bug 536194] Inifite loop in DataSet.Merge() with itself
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92180">[ date ]</a>
              <a href="thread.html#92180">[ thread ]</a>
              <a href="subject.html#92180">[ subject ]</a>
              <a href="author.html#92180">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
