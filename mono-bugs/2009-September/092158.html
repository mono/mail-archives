<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 312968] HttpWebRequest can not handle WWW-Authenticate with POST
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20312968%5D%20HttpWebRequest%20can%20not%20handle%0A%20WWW-Authenticate%20with%20POST&In-Reply-To=bug-312968-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="092157.html">
   <LINK REL="Next"  HREF="092160.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 312968] HttpWebRequest can not handle WWW-Authenticate with POST</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20312968%5D%20HttpWebRequest%20can%20not%20handle%0A%20WWW-Authenticate%20with%20POST&In-Reply-To=bug-312968-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 312968] HttpWebRequest can not handle WWW-Authenticate with POST">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Sep  1 15:09:56 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="092157.html">[Mono-bugs] [Bug 312968] HttpWebRequest can not handle WWW-Authenticate with POST
</A></li>
        <LI>Next message: <A HREF="092160.html">[Mono-bugs] [Bug 536069] New: TransactionScope: System.NotImplementedException (connection with MySql Connector)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92158">[ date ]</a>
              <a href="thread.html#92158">[ thread ]</a>
              <a href="subject.html#92158">[ subject ]</a>
              <a href="author.html#92158">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=312968">http://bugzilla.novell.com/show_bug.cgi?id=312968</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">greg.smolyn at strangeloopnetworks.com</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=312968#c6">http://bugzilla.novell.com/show_bug.cgi?id=312968#c6</A>





--- Comment #6 from Greg Smolyn &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">greg.smolyn at strangeloopnetworks.com</A>&gt;  2009-09-01 13:09:55 MDT ---
The test case is unfortunately not entirely self-contained, the only
requirement is an HTTP server on the _local machine_ that has authentication
enabled.

This is fairly easy to set up in Apache 2:

In your VirtualHost section for your site, just add
&lt;Directory /var/www/&gt;
          Options Indexes FollowSymLinks
          AllowOverride None
          Order allow,deny
          Allow from all
          AuthType Basic
          AuthName &quot;SSL and Basic Auth Test&quot;
          AuthUserFile /etc/apache2/passwd
          Require user test
&lt;/Directory&gt;

then run:

htpasswd -bc /etc/apache2/passwd test test



The test case should then explode (there are comments in the Main.cs file).

It looks like there is a race condition, but mainly when getting very fast
response/request cycles, thus the requirement for a local HTTP server.  I
attempted to recreate with going through the internet, but the delays managed
to keep the reproduction case from occuring.

The scenario is fairly specific, however: requires a POST with a body, and
KeepAlive=false.  So it smells like something in the connection tear-down code
that is having issues.

In the test case provided, an ObjectDisposedException gets thrown and the
program quits.

The error is different if you set up SSL on your local site and try to hit the
URL in the test with https instead of http.  A 5 minute timeout occurs deep in
the Tls code, while it does a WaitOne() for some async lock.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="092157.html">[Mono-bugs] [Bug 312968] HttpWebRequest can not handle WWW-Authenticate with POST
</A></li>
	<LI>Next message: <A HREF="092160.html">[Mono-bugs] [Bug 536069] New: TransactionScope: System.NotImplementedException (connection with MySql Connector)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92158">[ date ]</a>
              <a href="thread.html#92158">[ thread ]</a>
              <a href="subject.html#92158">[ subject ]</a>
              <a href="author.html#92158">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
