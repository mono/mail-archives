<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 536776] New: Mono crashes when creating too many threads or running too many processes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20536776%5D%20New%3A%20Mono%20crashes%20when%20creating%20too%20many%0A%20threads%20or%20running%20too%20many%20processes&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="092259.html">
   <LINK REL="Next"  HREF="092303.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 536776] New: Mono crashes when creating too many threads or running too many processes</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20536776%5D%20New%3A%20Mono%20crashes%20when%20creating%20too%20many%0A%20threads%20or%20running%20too%20many%20processes&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 536776] New: Mono crashes when creating too many threads or running too many processes">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Sep  4 03:28:07 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="092259.html">[Mono-bugs] [Bug 536761] New: remoting server crashed while stress	test
</A></li>
        <LI>Next message: <A HREF="092303.html">[Mono-bugs] [Bug 536776] Mono crashes when creating too many threads or running too many processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92261">[ date ]</a>
              <a href="thread.html#92261">[ thread ]</a>
              <a href="subject.html#92261">[ subject ]</a>
              <a href="author.html#92261">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=536776">http://bugzilla.novell.com/show_bug.cgi?id=536776</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">joakim at nsense.net</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=536776#c319514">http://bugzilla.novell.com/show_bug.cgi?id=536776#c319514</A>

           Summary: Mono crashes when creating too many threads or running
                    too many processes
    Classification: Mono
           Product: Mono: Runtime
           Version: 2.0.x
          Platform: x86
        OS/Version: Ubuntu
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: GC
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">joakim at nsense.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        Depends on: 319514
          Found By: DeveloperNet


+++ This bug was initially created as a clone of Bug #319514 +++
---- Reported by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">carlos at applianz.com</A> 2005-11-12 13:22:45 MST ----

I've seen this bug pop up in different versions every now and then. I've tried
code that uses threads to launch processes and all kinds of work around. The
problem is simple however.

Running on latest jaunty ubuntu with mono version: 2.0.1

The following code fails after 255 iterations: 

     static void Main(string[] args)
        {

            for (int i = 0; i &lt; 4096; i++)
            {
                Console.WriteLine(&quot;Starting: &quot; + i.ToString());
                System.Diagnostics.Process.Start(&quot;echo \&quot;hello mono\&quot;;&quot;);
                System.GC.Collect();
                System.GC.WaitForPendingFinalizers();
                System.Threading.Thread.Sleep(10);
            }
        }

In addition there is a problem in the way the error is casted. As a WARNING 
from the mono runtime - Createprocess: error creating process handle. This is
not seen by the application so the application assumes everything is fine. 

I've tried different ways with greater sleeps (for gc to have time to come
collect). But never been able to go above 300 processes. And at the same time
being unable to notice the error (pretty critical).

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="092259.html">[Mono-bugs] [Bug 536761] New: remoting server crashed while stress	test
</A></li>
	<LI>Next message: <A HREF="092303.html">[Mono-bugs] [Bug 536776] Mono crashes when creating too many threads or running too many processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92261">[ date ]</a>
              <a href="thread.html#92261">[ thread ]</a>
              <a href="subject.html#92261">[ subject ]</a>
              <a href="author.html#92261">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
