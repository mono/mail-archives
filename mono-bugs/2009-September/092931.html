<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 541607] New: securitytrimmingenabled not expected for xmlsitemapprovider
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20541607%5D%20New%3A%20securitytrimmingenabled%20not%20expected%0A%20for%20xmlsitemapprovider&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="092927.html">
   <LINK REL="Next"  HREF="092936.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 541607] New: securitytrimmingenabled not expected for xmlsitemapprovider</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20541607%5D%20New%3A%20securitytrimmingenabled%20not%20expected%0A%20for%20xmlsitemapprovider&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 541607] New: securitytrimmingenabled not expected for xmlsitemapprovider">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Sep 23 23:47:16 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="092927.html">[Mono-bugs] [Bug 540994] Step over nullable assignment ends up in mono_jit_runtime_invoke and terminates
</A></li>
        <LI>Next message: <A HREF="092936.html">[Mono-bugs] [Bug 541607] securitytrimmingenabled not expected for xmlsitemapprovider
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92931">[ date ]</a>
              <a href="thread.html#92931">[ thread ]</a>
              <a href="subject.html#92931">[ subject ]</a>
              <a href="author.html#92931">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=541607">http://bugzilla.novell.com/show_bug.cgi?id=541607</A>


           Summary: securitytrimmingenabled not expected for
                    xmlsitemapprovider
    Classification: Mono
           Product: Mono: Class Libraries
           Version: SVN
          Platform: i586
        OS/Version: openSUSE 11.1
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">chrisbrown76 at hotmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=319627)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=319627">http://bugzilla.novell.com/attachment.cgi?id=319627</A>)
Test case source files

User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-GB; rv:1.9.1.3)
Gecko/20090824 Firefox/3.5.3 (.NET CLR 3.5.30729)

When configuring an xml sitemap provider in web.config if the attribute
'securitytrimmingenabled' is specified an 'attribute unexpected' error occurs
when attempting to use the sitemap to bind to a control.

Reproducible: Always

Steps to Reproduce:
1. Copy attached test case source files into Mono environment.
2. Run 'xsp2' from the command line at the location of the source files.
3. Browse to '<A HREF="http://localhost:8080'.">http://localhost:8080'.</A>
Actual Results:  
The following error is returned:

The attribute 'securityTrimmingEnabled' is unexpected in the configuration of
the 'TestXmlSiteMapProvider' provider.

Description: HTTP 500. Error processing request.

Stack Trace:

System.Configuration.ConfigurationErrorsException: The attribute
'securityTrimmingEnabled' is unexpected in the configuration of the
'TestXmlSiteMapProvider' provider.
  at System.Web.XmlSiteMapProvider.Initialize (System.String name,
System.Collections.Specialized.NameValueCollection attributes) [0x00107] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web/XmlSiteMapProvider.cs:482 
  at System.Web.Configuration.ProvidersHelper.InstantiateProvider
(System.Configuration.ProviderSettings providerSettings, System.Type
providerType) [0x00063] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.Configuration_2.0/ProvidersHelper.cs:61 
  at System.Web.Configuration.ProvidersHelper.InstantiateProviders
(System.Configuration.ProviderSettingsCollection configProviders,
System.Configuration.Provider.ProviderCollection providers, System.Type
providerType) [0x0003e] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.Configuration_2.0/ProvidersHelper.cs:72 
  at System.Web.Configuration.SiteMapSection.get_ProvidersInternal () [0x00011]
in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.Configuration_2.0/SiteMapSection.cs:81 
  at System.Web.SiteMap.Init () [0x0003c] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web/SiteMap.cs:51 
  at System.Web.SiteMap.get_Providers () [0x00000] 
  at System.Web.UI.WebControls.SiteMapDataSource.get_Provider () [0x00041] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/SiteMapDataSource.cs:98 
  at System.Web.UI.WebControls.SiteMapDataSource.GetStartNode (System.String
viewPath) [0x000a9] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/SiteMapDataSource.cs:199 
  at System.Web.UI.WebControls.SiteMapDataSource.GetHierarchicalView
(System.String viewPath) [0x00000] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/SiteMapDataSource.cs:171 
  at
System.Web.UI.HierarchicalDataSourceControl.System.Web.UI.IHierarchicalDataSource.GetHierarchicalView
(System.String viewPath) [0x00000] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI/HierarchicalDataSourceControl.cs:57 
  at System.Web.UI.WebControls.HierarchicalDataBoundControl.GetData
(System.String viewPath) [0x00033] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/HierarchicalDataBoundControl.cs:65 
  at System.Web.UI.WebControls.TreeView.PerformDataBinding () [0x0000c] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/TreeView.cs:990 
  at
System.Web.UI.WebControls.HierarchicalDataBoundControl.InternalPerformDataBinding
() [0x0001d] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/HierarchicalDataBoundControl.cs:146 
  at System.Web.UI.WebControls.HierarchicalDataBoundControl.PerformSelect ()
[0x0000b] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/HierarchicalDataBoundControl.cs:156 
  at System.Web.UI.WebControls.BaseDataBoundControl.DataBind () [0x00000] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/BaseDataBoundControl.cs:143 
  at System.Web.UI.WebControls.TreeView.DataBind () [0x00000] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/TreeView.cs:730 
  at System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound ()
[0x00016] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/BaseDataBoundControl.cs:149 
  at System.Web.UI.WebControls.BaseDataBoundControl.OnPreRender
(System.EventArgs e) [0x00007] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/BaseDataBoundControl.cs:182 
  at System.Web.UI.WebControls.TreeView.OnPreRender (System.EventArgs e)
[0x00000] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI.WebControls/TreeView.cs:1087 
  at System.Web.UI.Control.PreRenderRecursiveInternal () [0x0003b] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI/Control.cs:1536 
  at System.Web.UI.Control.PreRenderRecursiveInternal () [0x00072] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI/Control.cs:1543 
  at System.Web.UI.Control.PreRenderRecursiveInternal () [0x00072] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI/Control.cs:1543 
  at System.Web.UI.Page.ProcessLoadComplete () [0x00089] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI/Page.cs:1647 
  at System.Web.UI.Page.InternalProcessRequest () [0x001cb] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI/Page.cs:1536 
  at System.Web.UI.Page.ProcessRequest (System.Web.HttpContext context)
[0x0005b] in
/root/mono-svn-latest/mono/mcs/class/System.Web/System.Web.UI/Page.cs:1353 

Version information: Mono Runtime Version: /trunk/mono r142436 Wed Sep 23
12:04:04 NZST 2009; ASP.NET Version: 2.0.50727.1433


Expected Results:  
The xml sitemap data is successfully bound and displayed in the treeview.

As the stack trace indicates the problem is occurring in
System.Web.XmlSiteMapProvider.Initialize where the 'switch' statement at line
467 does not cater for 'securityTrimmingEnabled' only 'siteMapFile' and
'description'.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>




























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="092927.html">[Mono-bugs] [Bug 540994] Step over nullable assignment ends up in mono_jit_runtime_invoke and terminates
</A></li>
	<LI>Next message: <A HREF="092936.html">[Mono-bugs] [Bug 541607] securitytrimmingenabled not expected for xmlsitemapprovider
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92931">[ date ]</a>
              <a href="thread.html#92931">[ thread ]</a>
              <a href="subject.html#92931">[ subject ]</a>
              <a href="author.html#92931">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
