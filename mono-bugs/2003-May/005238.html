<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 42021][Wis] Changed - DllImport/PInvoke does not deal correctly with A/W versions of functions.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40rocky.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="005237.html">
   <LINK REL="Next"  HREF="005239.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 42021][Wis] Changed - DllImport/PInvoke does not deal correctly with A/W versions of functions.
   </H1>
    <B>bugzilla-daemon@rocky.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40rocky.ximian.com"
       TITLE="[Mono-bugs] [Bug 42021][Wis] Changed - DllImport/PInvoke does not deal correctly with A/W versions of functions.">bugzilla-daemon@rocky.ximian.com
       </A><BR>
    <I>Mon, 12 May 2003 11:57:25 -0400 (EDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="005237.html">[Mono-bugs] [Bug 42797][Wis] New - Profiling code is not thread safe
</A></li>
        <LI> Next message: <A HREF="005239.html">[Mono-bugs] [Bug 42801][Nor] New - proplems with CharSet attribute
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5238">[ date ]</a>
              <a href="thread.html#5238">[ thread ]</a>
              <a href="subject.html#5238">[ subject ]</a>
              <a href="author.html#5238">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:dietmar@ximian.com.">dietmar@ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=42021">http://bugzilla.ximian.com/show_bug.cgi?id=42021</A>

--- shadow/42021	Mon Apr 28 10:43:44 2003
+++ shadow/42021.tmp.15513	Mon May 12 11:57:25 2003
@@ -1,14 +1,14 @@
 Bug#: 42021
 Product: Mono/Runtime
 Version: unspecified
-OS: 
+OS: unknown
 OS Details: 
-Status: NEW   
+Status: NEEDINFO   
 Resolution: 
-Severity: 
+Severity: Unknown
 Priority: Wishlist
 Component: misc
 AssignedTo: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>                            
 ReportedBy: <A HREF="mailto:japj@darius.demon.nl">japj@darius.demon.nl</A>               
 QAContact: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>
 TargetMilestone: ---
@@ -66,6 +66,28 @@
 CharSet.Auto 
 Platform invoke chooses between ANSI and Unicode formats at runtime, based
 on the target platform.
 
 So this functionality is probably missing in mono and explains why certain
 SWT constructs work ok in MS .NET but not in Mono.
+
+------- Additional Comments From <A HREF="mailto:dietmar@ximian.com">dietmar@ximian.com</A>  2003-05-12 11:57 -------
+I added support for that, but I am not 100% sure if the Ansi lookup is
+right. I dont understand:
+
+-----------
+When the ExactSpelling object field is False, as it is by default in the
+Managed Extensions for C++ and C#, platform invoke searches for the
+unmangled name first (MessageBox), then the mangled name (MessageBoxA) if
+the unmangled name is not found. If a DLL contains both MessageBox and
+MessageBoxA, platform invoke selects MessageBoxA.
+--------------
+
+Does this mean we allways lookup both names?
+
+There is also a mcs/reflection bug, which makes my test case fail
+(mono/mono/tests/pinvoke13.cs). But I works when compiled with csc.
+
+
+
+
+

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005237.html">[Mono-bugs] [Bug 42797][Wis] New - Profiling code is not thread safe
</A></li>
	<LI> Next message: <A HREF="005239.html">[Mono-bugs] [Bug 42801][Nor] New - proplems with CharSet attribute
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5238">[ date ]</a>
              <a href="thread.html#5238">[ thread ]</a>
              <a href="subject.html#5238">[ subject ]</a>
              <a href="author.html#5238">[ author ]</a>
         </LI>
       </UL>
</body></html>
