<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 366566] New: PropertyGrid: Image property un-settable -- maybe all subclass values
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20366566%5D%20New%3A%20PropertyGrid%3A%20Image%20property%0A%20un-settable%20--%20maybe%20all%20subclass%20values&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070258.html">
   <LINK REL="Next"  HREF="070264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 366566] New: PropertyGrid: Image property un-settable -- maybe all subclass values</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20366566%5D%20New%3A%20PropertyGrid%3A%20Image%20property%0A%20un-settable%20--%20maybe%20all%20subclass%20values&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 366566] New: PropertyGrid: Image property un-settable -- maybe all subclass values">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Mar  3 08:48:41 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="070258.html">[Mono-bugs] [Bug 325463] Process.ExitCode returns 0 for forked apps
</A></li>
        <LI>Next message: <A HREF="070264.html">[Mono-bugs] [Bug 366566] PropertyGrid: Image property un-settable -- maybe all subclass values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70259">[ date ]</a>
              <a href="thread.html#70259">[ thread ]</a>
              <a href="subject.html#70259">[ subject ]</a>
              <a href="author.html#70259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=366566">https://bugzilla.novell.com/show_bug.cgi?id=366566</A>


           Summary: PropertyGrid: Image property un-settable -- maybe all
                    subclass values
           Product: Mono: Class Libraries
           Version: SVN
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">contact at i-nz.net</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


A property of type Image is un-settable: the UI editor appears, an image file
can be selected, but the property retains its previous value.  This occurs
whether the existing value was null or not.  

Debugging shows that the UI editor (ImageEditor.EditValue) returns a Bitmap
(for my test file).  Note that Bitmap is a subclass of abstract class Image. 
ImageTypeConverter.CanConvertFrom returns false for typeof(Image) and
typeof(Bitmap), so(?) setting a value of type Bitmap on a property of type
Image must be valid directly.

Thus, should the check in GridEntry.SetValueCore whether the value needs
conversion be:
   if (!this.PropertyDescriptor.PropertyType
         .IsAssignableFrom(valueType)) {
instead of the current:
   if (valueType != this.PropertyDescriptor.PropertyType) {

(Of, maybe its that even if using the TypeConverter fails then
PropertyDescriptor.SetValue should be attempted anyway?  Hmm less likely).


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070258.html">[Mono-bugs] [Bug 325463] Process.ExitCode returns 0 for forked apps
</A></li>
	<LI>Next message: <A HREF="070264.html">[Mono-bugs] [Bug 366566] PropertyGrid: Image property un-settable -- maybe all subclass values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70259">[ date ]</a>
              <a href="thread.html#70259">[ thread ]</a>
              <a href="subject.html#70259">[ subject ]</a>
              <a href="author.html#70259">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
