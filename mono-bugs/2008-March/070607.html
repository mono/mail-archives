<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 369048] New: List controls don' t select first item on binding list fill
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20369048%5D%20New%3A%20List%20controls%20don%27%20t%20select%20first%0A%20item%20on%20binding%20list%20fill&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070672.html">
   <LINK REL="Next"  HREF="070609.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 369048] New: List controls don' t select first item on binding list fill</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20369048%5D%20New%3A%20List%20controls%20don%27%20t%20select%20first%0A%20item%20on%20binding%20list%20fill&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 369048] New: List controls don' t select first item on binding list fill">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Mar 11 06:07:09 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="070672.html">[Mono-bugs] [Bug 368885] make install puts the System.dll, System.Core.dll, and System. Xml.Core.dll in the wrong place
</A></li>
        <LI>Next message: <A HREF="070609.html">[Mono-bugs] [Bug 369048] List controls don't select first item on binding list fill
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70607">[ date ]</a>
              <a href="thread.html#70607">[ thread ]</a>
              <a href="subject.html#70607">[ subject ]</a>
              <a href="author.html#70607">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=369048">https://bugzilla.novell.com/show_bug.cgi?id=369048</A>


           Summary: List controls don't select first item on binding list
                    fill
           Product: Mono: Class Libraries
           Version: 1.9.0
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Minor
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


If the selected item updates due to binding list change (i.e. when the list was
previously empty) then neither ComboBox nor ListBox update to select the first
item.

This is seen in the repro app in bug 349655.  Beforehand both empty; after see
no selection in either.  MSFT selects the first item.  Updated repro below has
a button to show current selection.

Minor as user can make the selection manually -- as in my case. 

[[
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows.Forms;
using System.ComponentModel;

class ListControlIBindingList
{
        static void Main(string[] args)
        {
                bool nonEmptyWhenBound = false;
                //
                if (args.Length &gt; 0)
                        nonEmptyWhenBound = true;
                //
                Foo(nonEmptyWhenBound);
        }

        static IBindingList m_ibl;

        static void buttonDoFill_Click(object sender, EventArgs e)
        {
                // The bug occurs here, the list is empty and bound, 
                // now add an item to it.  Crash.  Occurs when empty list -&gt;
item added.
                m_ibl.Add(new Version(3, 1));
                m_ibl.Add(new Version(3, 2));
                m_ibl.Add(new Version(3, 3));
        }

        private static void Foo(bool nonEmptyWhenBound)
        {
                Form f = new Form();
                f.Text = &quot;ListControlIBindingList&quot;;
                FlowLayoutPanel flp = new FlowLayoutPanel();
                flp.Dock = DockStyle.Fill;
                f.Controls.Add(flp);
                //
                m_ibl = new BindingList&lt;Version&gt;();
                bool skipBug = false || nonEmptyWhenBound;
                if (skipBug) {
                        m_ibl.Add(new Version(0, 99));// NON-EMPTY at bound Add
                }
                //
                ComboBox cb = new ComboBox();
                cb.DataSource = m_ibl;
                flp.Controls.Add(cb);
                //
                Button b = new Button();
                b.Text = &quot;Do Fill&quot;;
                b.Click += buttonDoFill_Click;
                flp.Controls.Add(b);
                //
                ListBox lb = new ListBox();
                lb.DataSource = m_ibl;
                flp.Controls.Add(lb);
                //--
                Button stateButton = new Button();
                stateButton.Text = &quot;State!&quot;;
                stateButton.Click += delegate {
                        MessageBox.Show(&quot;CB idx: &quot; + cb.SelectedIndex
                                + &quot;, item: &quot; + cb.SelectedItem + &quot;, value: &quot; +
cb.SelectedValue
                          + Environment.NewLine
                        + &quot;LB idx: &quot; + lb.SelectedIndex
                                + &quot;, item: &quot; + lb.SelectedItem + &quot;, value: &quot; +
lb.SelectedValue);
                };
                flp.Controls.Add(stateButton);
                //
                Application.Run(f);
        }

}//class
]]


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>









































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070672.html">[Mono-bugs] [Bug 368885] make install puts the System.dll, System.Core.dll, and System. Xml.Core.dll in the wrong place
</A></li>
	<LI>Next message: <A HREF="070609.html">[Mono-bugs] [Bug 369048] List controls don't select first item on binding list fill
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70607">[ date ]</a>
              <a href="thread.html#70607">[ thread ]</a>
              <a href="subject.html#70607">[ subject ]</a>
              <a href="author.html#70607">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
