<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 371672] New: ComboBox: SelectedIndex and SelectedItem must be cleared when typed-in value
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20371672%5D%20New%3A%20ComboBox%3A%20SelectedIndex%20and%0A%20SelectedItem%20must%20be%20cleared%20when%20typed-in%20value&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070851.html">
   <LINK REL="Next"  HREF="070789.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 371672] New: ComboBox: SelectedIndex and SelectedItem must be cleared when typed-in value</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20371672%5D%20New%3A%20ComboBox%3A%20SelectedIndex%20and%0A%20SelectedItem%20must%20be%20cleared%20when%20typed-in%20value&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 371672] New: ComboBox: SelectedIndex and SelectedItem must be cleared when typed-in value">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Mar 17 05:03:49 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="070851.html">[Mono-bugs] [Bug 371663] ASP.NET Masterpages broken in mono-1-9 and	trunk
</A></li>
        <LI>Next message: <A HREF="070789.html">[Mono-bugs] [Bug 371672] ComboBox: SelectedIndex and SelectedItem must be cleared when typed-in value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70788">[ date ]</a>
              <a href="thread.html#70788">[ thread ]</a>
              <a href="subject.html#70788">[ subject ]</a>
              <a href="author.html#70788">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=371672">https://bugzilla.novell.com/show_bug.cgi?id=371672</A>


           Summary: ComboBox: SelectedIndex and SelectedItem must be cleared
                    when typed-in value
           Product: Mono: Class Libraries
           Version: 1.2.6
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=202486)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=202486">https://bugzilla.novell.com/attachment.cgi?id=202486</A>)
Repro code

As a &quot;combo&quot; one can either select from the menu or type in a value.  On Mono,
if one selects an item from the menu and later types in a new value then the
SelectedItem and SelectedIndex property still return/reference the previously
selected item, they should be cleared then.

This behaviour would confuse code of the following form:
[[
int GetSelectedPortNumber ()
{
// Has the user selected a given item?
PortAndName item = (PortAndName)comboBox1.SelectedItem;
if (item != null)
  return item.Number;
// Or has the user entered a number directly?
int num;
if (Int32.TryParse(comboBox1.Text, out num))
  return num;
return -1;
}

public Form1()
{
  ...
  comboBox1.Items.AddRange(new object[] {
    new PortAndName(80, &quot;HTTP&quot;),
    new PortAndName(25, &quot;SMTP&quot;),
    new PortAndName(23, &quot;Telnet&quot;) });
}
]]

See the attached repro app.
1. Select item &quot;RButton&quot; from the combobox  drop-down.
See SelectedIndex, and SelectedItem set respectively.
2. Type in a letter 'x' to make &quot;xRButton&quot;.  Hit &lt;Get State&gt;.
Expect Index=-1 and Item=null.  On Mono the previous values remain.  This is
the fault reported here.
3. Change the text to LButton by typing -- don't open the drop-down.  Hit &lt;Get
State&gt;.
Expect -1/null.
4. Open the drop-down -- the LButton item is automatically selected.  Hit &lt;Get
State&gt;.
Now see SelectedIndex, and SelectedItem set respectively.
Mono doesn't select the item automatically, so just manually select a new item
instead.

(The Text property is correctly set to the current visible string at each
stage, and the SelectedText property is set when the combobox has focus and
some text in the field is selected (highlighted)).


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>

























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070851.html">[Mono-bugs] [Bug 371663] ASP.NET Masterpages broken in mono-1-9 and	trunk
</A></li>
	<LI>Next message: <A HREF="070789.html">[Mono-bugs] [Bug 371672] ComboBox: SelectedIndex and SelectedItem must be cleared when typed-in value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70788">[ date ]</a>
              <a href="thread.html#70788">[ thread ]</a>
              <a href="subject.html#70788">[ subject ]</a>
              <a href="author.html#70788">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
