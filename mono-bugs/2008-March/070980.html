<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 373190] New: (g)mcs always emits static properties
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20373190%5D%20New%3A%20%28g%29mcs%20always%20emits%20static%20properties&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070979.html">
   <LINK REL="Next"  HREF="070981.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 373190] New: (g)mcs always emits static properties</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20373190%5D%20New%3A%20%28g%29mcs%20always%20emits%20static%20properties&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 373190] New: (g)mcs always emits static properties">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Mar 23 14:29:09 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="070979.html">[Mono-bugs] [Bug 360796] Internal compiler error with large methods
</A></li>
        <LI>Next message: <A HREF="070981.html">[Mono-bugs] [Bug 373190] (g)mcs always emits static properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70980">[ date ]</a>
              <a href="thread.html#70980">[ thread ]</a>
              <a href="subject.html#70980">[ subject ]</a>
              <a href="author.html#70980">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=373190">https://bugzilla.novell.com/show_bug.cgi?id=373190</A>


           Summary: (g)mcs always emits static properties
           Product: Mono: Compilers
           Version: SVN
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: C#
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gert.driesen at pandora.be</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


When a given property is an instance property, then (g)mcs correctly emits
instance accessors but the property itself is still static.

To fix this for gmcs, we need use the DefineProperty overload that takes a
CallingConventions argument. This property was introduced in .NET 2.0 SP1. For
mcs, we'll need to use reflection to invoke an internal method.

To reproduce, compile the following code (using /target:library) and then
disassembly it:

public class Foo
{
        public bool A {
                get { return false; }
        }

        public static bool B {
                get { return false; }
        }
}

Expected result:

property instance bool A()
{
  .get instance bool Foo::get_A()
}
property bool B()
{
  .get bool Foo::get_B()
}

Actual result:

property bool A()
{
  .get instance bool Foo::get_A()
}
property bool B()
{
  .get bool Foo::get_B()
}


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070979.html">[Mono-bugs] [Bug 360796] Internal compiler error with large methods
</A></li>
	<LI>Next message: <A HREF="070981.html">[Mono-bugs] [Bug 373190] (g)mcs always emits static properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70980">[ date ]</a>
              <a href="thread.html#70980">[ thread ]</a>
              <a href="subject.html#70980">[ subject ]</a>
              <a href="author.html#70980">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
