<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 371722] Mono array initialization 10x slower than	.NET
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20371722%5D%20Mono%20array%20initialization%2010x%20slower%20than%0A%09.NET&In-Reply-To=bug-371722-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070800.html">
   <LINK REL="Next"  HREF="070805.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 371722] Mono array initialization 10x slower than	.NET</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20371722%5D%20Mono%20array%20initialization%2010x%20slower%20than%0A%09.NET&In-Reply-To=bug-371722-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 371722] Mono array initialization 10x slower than	.NET">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Mar 17 12:25:31 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="070800.html">[Mono-bugs] [Bug 371722] Mono array initialization 10x slower than	.NET
</A></li>
        <LI>Next message: <A HREF="070805.html">[Mono-bugs] [Bug 371722] Mono array initialization 10x slower than	.NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70802">[ date ]</a>
              <a href="thread.html#70802">[ thread ]</a>
              <a href="subject.html#70802">[ subject ]</a>
              <a href="author.html#70802">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=371722">https://bugzilla.novell.com/show_bug.cgi?id=371722</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=371722#c4">https://bugzilla.novell.com/show_bug.cgi?id=371722#c4</A>





--- Comment #4 from Paolo Molaro &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>&gt;  2008-03-17 10:25:30 MST ---
Marek, of course adding more calculations won't help, in fact I didn't ask you
to add more calculations, I asked you to write benchmarks so that the results
of the calculations are used (ie generate a jit-invisible side effect). Without
this the numbers are meaningless because they measure something, but you don't
know what.

I should likely write a small guide on writing benchmarks, since this is a very
common mistake to make (another being reporting a timing without specifying the
cpu the program was ran on, the operating system and how many times it was ran
and if it was averaged, how).

The issue is that your numbers look very inconsistent and in that case it's
important to look at the details. For example, here are my findings on a core 2
duo 2.4, linux.
The test takes 2.75 seconds, best of several runs, I deduce your system is
about 25% slower than mine.
If BaseToString() is changed to just do the allocation, it takes 0.96 seconds
(this doesn't match Zoltan's results: in my case about one third of the time is
due to allocation and GC).

The equivalent java 1.6 program that does only the allocation takes 0.32 (this
is consistent with several results also from the MS CLR: alloc-only benchmarks
are 3 times faster than mono and the .net GC and java's GC are mostly
equivalent). With the 25% slowdown of your box, it would mean that java doing
just the allocation would be slower than .net (and the complete program takes
0.7 seconds, which would become 0.87 on your box, so ~2.4x slower).
This result is inconsistent with your numbers and is consistent with all the
previous results we had, so one of the likely options is that the benchmark as
written doesn't measure what you think it measures. There may be also other
issues in your numbers (like running mono on windows: performance in that case
has no relevance).


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>



























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070800.html">[Mono-bugs] [Bug 371722] Mono array initialization 10x slower than	.NET
</A></li>
	<LI>Next message: <A HREF="070805.html">[Mono-bugs] [Bug 371722] Mono array initialization 10x slower than	.NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70802">[ date ]</a>
              <a href="thread.html#70802">[ thread ]</a>
              <a href="subject.html#70802">[ subject ]</a>
              <a href="author.html#70802">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
