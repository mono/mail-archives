<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 366445] [Regression] assertion failed, accessing value type field over remoting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20366445%5D%20%5BRegression%5D%20assertion%20failed%2C%0A%20accessing%20value%20type%20field%20over%20remoting&In-Reply-To=bug-366445-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070287.html">
   <LINK REL="Next"  HREF="070297.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 366445] [Regression] assertion failed, accessing value type field over remoting</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20366445%5D%20%5BRegression%5D%20assertion%20failed%2C%0A%20accessing%20value%20type%20field%20over%20remoting&In-Reply-To=bug-366445-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 366445] [Regression] assertion failed, accessing value type field over remoting">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Mar  3 22:08:37 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="070287.html">[Mono-bugs] [Bug 366445] [Regression] assertion failed, accessing value type field over remoting
</A></li>
        <LI>Next message: <A HREF="070297.html">[Mono-bugs] [Bug 366445] [Regression] assertion failed, accessing value type field over remoting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70296">[ date ]</a>
              <a href="thread.html#70296">[ thread ]</a>
              <a href="subject.html#70296">[ subject ]</a>
              <a href="author.html#70296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=366445">https://bugzilla.novell.com/show_bug.cgi?id=366445</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">cmarshall at pacificbiosciences.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=366445#c10">https://bugzilla.novell.com/show_bug.cgi?id=366445#c10</A>





--- Comment #10 from Casey Marshall &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">cmarshall at pacificbiosciences.com</A>&gt;  2008-03-03 20:08:37 MST ---
The issue seems to be change 40141:

r40141 | zoltan | 2005-02-04 10:08:18 -0800 (Fri, 04 Feb 2005) | 6 lines

2005-02-04  Zoltan Varga  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">vargaz at freemail.hu</A>&gt;

        * class-internals.h marshal.c: Add two new wrappers, ldfld_remote and
        stfld_remote which call mono_load/store_field_new. This allows methods
        calling ldfld/stfld wrappers to be AOTed.

Yes, it is three years old; I just tried the same testcase with mono 1.2.4 that
was installed by my distribution, and it fails in the exact same way. It looks
like the extra method call inserts an extra value on the stack (presumably, the
space to be used to store the struct being returned) and that misaligns the
arguments passed to mono_load_remote_field_new. Maybe it misaligns the stack at
the call to the second generated wrapper method, I'm not sure.

The attached patch fixes the test case for me, but it's clearly not the right
fix,  and I don't understand this well enough yet.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070287.html">[Mono-bugs] [Bug 366445] [Regression] assertion failed, accessing value type field over remoting
</A></li>
	<LI>Next message: <A HREF="070297.html">[Mono-bugs] [Bug 366445] [Regression] assertion failed, accessing value type field over remoting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70296">[ date ]</a>
              <a href="thread.html#70296">[ thread ]</a>
              <a href="subject.html#70296">[ subject ]</a>
              <a href="author.html#70296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
