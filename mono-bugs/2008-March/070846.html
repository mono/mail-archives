<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 372220] New: mod-mono-server always crashes when	using --port
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20372220%5D%20New%3A%20mod-mono-server%20always%20crashes%20when%0A%09using%20--port&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070845.html">
   <LINK REL="Next"  HREF="070849.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 372220] New: mod-mono-server always crashes when	using --port</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20372220%5D%20New%3A%20mod-mono-server%20always%20crashes%20when%0A%09using%20--port&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 372220] New: mod-mono-server always crashes when	using --port">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Mar 19 00:46:06 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="070845.html">[Mono-bugs] [Bug 337469] Resources: MessageBox ctor fires	AssemblyResolve
</A></li>
        <LI>Next message: <A HREF="070849.html">[Mono-bugs] [Bug 372220] mod-mono-server always crashes when using	--port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70846">[ date ]</a>
              <a href="thread.html#70846">[ thread ]</a>
              <a href="subject.html#70846">[ subject ]</a>
              <a href="author.html#70846">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=372220">https://bugzilla.novell.com/show_bug.cgi?id=372220</A>


           Summary: mod-mono-server always crashes when using --port
           Product: Mono: Class Libraries
           Version: 1.2.5
          Platform: All
        OS/Version: Windows XP
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">dcohenp at eduinnova.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=202836)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=202836">https://bugzilla.novell.com/attachment.cgi?id=202836</A>)
fix for Mono.WebServer.Apache/main.cs r98568

Ever since mono 1.2.5 (still valid in SVN trunk), mod_mono+Apache 2.2 hosted
applications silently stop working in Windows (using Windows mod_mono from
<A HREF="http://anmar.eu.org/mono/mod_mono/">http://anmar.eu.org/mono/mod_mono/</A>).

Symptom: any application which mod_mono is registered to execute makes Apache
return a 500 server error.

Upon closer examination, and executing mod-mono-server.exe by hand with the
same parameters used by mod_mono to launch it, realized that it is always
throwing a FormatException.

Looking at the source (xsp/src/Mono.WebServer.Apache/main.cs), the problem
seems simple: when all the initial checks have succeeded, and the server is
about to start listening, it prints an informational Console message which is
wrongly formatted (closing brace missing). Simply adding the brace brings
everything back to normal.

This only happens when using TCP mode (the --port parameter), used by default
in Windows, which apparently few of us are using, so this went by undetected
for a while.

Steps to Reproduce: Run _any_ ASP.NET 1.0 app under Windows XP/Apache 2.2/mono
1.2.5/mod_mono-win32 r89283 (from <A HREF="http://anmar.eu.org/mono/mod_mono">http://anmar.eu.org/mono/mod_mono</A>).

Actual Result: ALWAYS get a 500 server error, with no further information in
the Apache error logs.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>

















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070845.html">[Mono-bugs] [Bug 337469] Resources: MessageBox ctor fires	AssemblyResolve
</A></li>
	<LI>Next message: <A HREF="070849.html">[Mono-bugs] [Bug 372220] mod-mono-server always crashes when using	--port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70846">[ date ]</a>
              <a href="thread.html#70846">[ thread ]</a>
              <a href="subject.html#70846">[ subject ]</a>
              <a href="author.html#70846">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
