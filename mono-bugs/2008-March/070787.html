<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 371559] Enum.ToString doesn't recognize negative member in Flags ( GetValue ordering)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20371559%5D%20Enum.ToString%20doesn%27t%20recognize%20negative%0A%20member%20in%20Flags%20%28%20GetValue%20ordering%29&In-Reply-To=bug-371559-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070753.html">
   <LINK REL="Next"  HREF="070754.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 371559] Enum.ToString doesn't recognize negative member in Flags ( GetValue ordering)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20371559%5D%20Enum.ToString%20doesn%27t%20recognize%20negative%0A%20member%20in%20Flags%20%28%20GetValue%20ordering%29&In-Reply-To=bug-371559-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 371559] Enum.ToString doesn't recognize negative member in Flags ( GetValue ordering)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Mar 17 04:55:57 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="070753.html">[Mono-bugs] [Bug 371559] New: Enum.ToString doesn' t recognize all members when overlapping Flags
</A></li>
        <LI>Next message: <A HREF="070754.html">[Mono-bugs] [Bug 371560] New: MenuStrip: a wide Menu is drawn off	screen edge
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70787">[ date ]</a>
              <a href="thread.html#70787">[ thread ]</a>
              <a href="subject.html#70787">[ subject ]</a>
              <a href="author.html#70787">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=371559">https://bugzilla.novell.com/show_bug.cgi?id=371559</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=371559#c1">https://bugzilla.novell.com/show_bug.cgi?id=371559#c1</A>


Andy Hume &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>&gt; changed:

           What    |Removed                                         |Added
----------------------------------------------------------------------------
            Summary|Enum.ToString doesn't recognize all members when|Enum.ToString doesn't recognize negative member
                   |overlapping Flags                               |in Flags (GetValue ordering)




--- Comment #1 from Andy Hume &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>&gt;  2008-03-17 02:55:57 MST ---
That'll teach me to speculate!  Of course FormatFlags uses the array in reverse
order so that's fine.

In writing another test case I found that the problem only occures when the
member is 'negative'.  So the actual difference is that MSFT's Enum.GetValues
orders the members as unsigned even when the underlying type is int.  See the
following.  Perhaps that's what's being implied by &quot;binary values&quot; in that
Enum.GetValues MSDN quote above.

Mono:
[[
Bb    = FFFF0000
Dd    = FFFFFFFF
Cc    = 00000000
Aa    = 00000005
Ff    = 00000064
Ee    = 7FFFFFFF
]]

MSFT:
[[
Cc    = 00000000
Aa    = 00000005
Ff    = 00000064
Ee    = 7FFFFFFF
Bb    = FFFF0000
Dd    = FFFFFFFF
]]

Code:
[[
using System;

enum OrderingEnumNoFlags
{
  Aa = 5,
  Bb = unchecked((int)0xFFFF0000),
  Cc = 0,
  Dd = -1,
  Ee = 0x7FFFFFFF,
  Ff = 100
}

[Flags]
enum OrderingEnumFlags
{
  Aa = 5,
  Bb = unchecked((int)0xFFFF0000),
  Cc = 0,
  Dd = -1,
  Ee = 0x7FFFFFFF,
  Ff = 100
}


class EnumGetValuesSignedOrderTest
{
    static void Main()
    {
        DumpAllEnumMembers(typeof(OrderingEnumNoFlags));
        //DumpAllEnumMembers(typeof(OrderingEnumFlags));
    }

    static void DumpAllEnumMembers(Type enumType)
    {
        Console.WriteLine(&quot;* {0}&quot;, enumType.Name);
        foreach(object cur in Enum.GetValues(enumType)){
            Console.WriteLine(&quot;{0,-5} = {0:X}&quot;, cur);
        }
    }
}
]]


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070753.html">[Mono-bugs] [Bug 371559] New: Enum.ToString doesn' t recognize all members when overlapping Flags
</A></li>
	<LI>Next message: <A HREF="070754.html">[Mono-bugs] [Bug 371560] New: MenuStrip: a wide Menu is drawn off	screen edge
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70787">[ date ]</a>
              <a href="thread.html#70787">[ thread ]</a>
              <a href="subject.html#70787">[ subject ]</a>
              <a href="author.html#70787">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
