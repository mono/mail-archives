<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 674490] New: Mono.Debugger.Soft.VirtualMachine.EnableEvents dislikes EventType.Step
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20674490%5D%20New%3A%0A%20Mono.Debugger.Soft.VirtualMachine.EnableEvents%20dislikes%20EventType.Step&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="109461.html">
   <LINK REL="Next"  HREF="109463.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 674490] New: Mono.Debugger.Soft.VirtualMachine.EnableEvents dislikes EventType.Step</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20674490%5D%20New%3A%0A%20Mono.Debugger.Soft.VirtualMachine.EnableEvents%20dislikes%20EventType.Step&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 674490] New: Mono.Debugger.Soft.VirtualMachine.EnableEvents dislikes EventType.Step">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Feb 23 15:59:06 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="109461.html">[Mono-bugs] [Bug 674482] System.Reflection.MethodInfo.ReturnType property returns null on each case
</A></li>
        <LI>Next message: <A HREF="109463.html">[Mono-bugs] [Bug 674490] Mono.Debugger.Soft.VirtualMachine.EnableEvents dislikes EventType.Step
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#109455">[ date ]</a>
              <a href="thread.html#109455">[ thread ]</a>
              <a href="subject.html#109455">[ subject ]</a>
              <a href="author.html#109455">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=674490">https://bugzilla.novell.com/show_bug.cgi?id=674490</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=674490#c0">https://bugzilla.novell.com/show_bug.cgi?id=674490#c0</A>


           Summary: Mono.Debugger.Soft.VirtualMachine.EnableEvents
                    dislikes EventType.Step
    Classification: Mono
           Product: Mono: Debugger
           Version: 2.10.x
          Platform: x86-64
        OS/Version: Windows 7
            Status: NEW
          Severity: Minor
          Priority: P5 - None
         Component: backend
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">martin at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mikael at lyngvig.org</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=415858)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=415858">http://bugzilla.novell.com/attachment.cgi?id=415858</A>)
Displays the assertion failed error (no new info).

User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; da; rv:1.9.2.13)
Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729; .NET4.0E)

If you call EnableEvents with the EventType.Step value, the debugging agent
blows up with an assertion failed in line 5535 of debugger-agent.c.  It appears
that debugger-agent.c expects some parameters to be passed over the line, which
EnableEvents does not pass over.

It may very well be me who is doing something wrong as I am meddling around
trying to grok the Mono Soft Debugger without any API documentation and only
the Mono and MonoDevelop sources to help me.

I just thought I'd let you know about this problem.  It is very low priority as
far as I can see (MonoDevelop does not use the EventType.Step value when it
calls EnableEvents).  It may even be intended behavior, but it is hard to say
without documentation.

My take was that I wanted to enable all events (except MethodEntry and
MethodExit) so that I could concentrate on handling the events rather than on
enabling and disabling all the time.  So I created a huge call to EnableEvents:

// enable as many events as at all possible (cannot enable breakpoint events
for some obscure reason)
_vm.EnableEvents(
    EventType.VMStart,
    EventType.VMDeath,
    EventType.ThreadStart,
    EventType.ThreadDeath,
    EventType.AppDomainCreate,
    EventType.AppDomainUnload,
#if false
    // enabling these events will likely slow down the run-time performance of
the running app too much
    EventType.MethodEntry,
    EventType.MethodExit
#endif
    EventType.AssemblyLoad,
    EventType.AssemblyUnload,
#if false
    // the VirtualMachine.EnableEvents() method throws an exception if this one
is specified (reason unknown)
    EventType.Breakpoint
#endif
    EventType.Step,
    EventType.Exception,
    EventType.VMDisconnect
);


Reproducible: Always

Steps to Reproduce:
1. Create a VirtualMachine() instance (vm).
2. Call vm.EnableEvents(EventType.Step).

Actual Results:  
Mono was terminated &quot;in an unusual way&quot;.

Expected Results:  
I would expect the Virtual Machine to enable all events without crashing and
burning.  After all, it does seem somewhat sensible to simply enable all events
(except those that slow down execution such as MethodEntry and MethodExit) when
the virtual machine is started.  I'm not sure if the Step event belongs in the
&quot;slows down&quot; category, though.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="109461.html">[Mono-bugs] [Bug 674482] System.Reflection.MethodInfo.ReturnType property returns null on each case
</A></li>
	<LI>Next message: <A HREF="109463.html">[Mono-bugs] [Bug 674490] Mono.Debugger.Soft.VirtualMachine.EnableEvents dislikes EventType.Step
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#109455">[ date ]</a>
              <a href="thread.html#109455">[ thread ]</a>
              <a href="subject.html#109455">[ subject ]</a>
              <a href="author.html#109455">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
