<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 667921] [Dynamic methods] Crash with	multi-threaded linq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20667921%5D%20%5BDynamic%20methods%5D%20Crash%20with%0A%09multi-threaded%20linq&In-Reply-To=bug-667921-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="108969.html">
   <LINK REL="Next"  HREF="108972.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 667921] [Dynamic methods] Crash with	multi-threaded linq</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20667921%5D%20%5BDynamic%20methods%5D%20Crash%20with%0A%09multi-threaded%20linq&In-Reply-To=bug-667921-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 667921] [Dynamic methods] Crash with	multi-threaded linq">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Feb 10 18:06:28 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="108969.html">[Mono-bugs] [Bug 652331] Exception when deserializing an object whose class inherits from a base class with a different namespace
</A></li>
        <LI>Next message: <A HREF="108972.html">[Mono-bugs] [Bug 667921] [Dynamic methods] Crash with	multi-threaded linq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#108971">[ date ]</a>
              <a href="thread.html#108971">[ thread ]</a>
              <a href="subject.html#108971">[ subject ]</a>
              <a href="author.html#108971">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=667921">https://bugzilla.novell.com/show_bug.cgi?id=667921</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=667921#c9">https://bugzilla.novell.com/show_bug.cgi?id=667921#c9</A>


--- Comment #9 from Rolf Bjarne Kvinge &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rkvinge at novell.com</A>&gt; 2011-02-11 00:06:27 CET ---
This patch makes the program go down a lot faster, the test program hasn't
finished once in tens of executions now.

Note that it's no longer necessary to run using the provided binary either,
just compile and run the C# file.

diff --git a/mono/utils/mono-codeman.c b/mono/utils/mono-codeman.c
index 22284de..bfaedd9 100644
--- a/mono/utils/mono-codeman.c
+++ b/mono/utils/mono-codeman.c
@@ -278,6 +278,7 @@ free_chunklist (CodeChunk *chunk)
         dead = chunk;
         mono_profiler_code_chunk_destroy ((gpointer) dead-&gt;data);
         chunk = chunk-&gt;next;
+        memset (dead-&gt;data, 0xCC, dead-&gt;size);
         if (dead-&gt;flags == CODE_FLAG_MMAP) {
             mono_vfree (dead-&gt;data, dead-&gt;size);
             /* valgrind_unregister(dead-&gt;data); */

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>










































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="108969.html">[Mono-bugs] [Bug 652331] Exception when deserializing an object whose class inherits from a base class with a different namespace
</A></li>
	<LI>Next message: <A HREF="108972.html">[Mono-bugs] [Bug 667921] [Dynamic methods] Crash with	multi-threaded linq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#108971">[ date ]</a>
              <a href="thread.html#108971">[ thread ]</a>
              <a href="subject.html#108971">[ subject ]</a>
              <a href="author.html#108971">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
