<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 671586] New: Using Task.Factory.StartNew will not create new Tasks if previous Task is blocked
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20671586%5D%20New%3A%20Using%20Task.Factory.StartNew%20will%20not%0A%20create%20new%20Tasks%20if%20previous%20Task%20is%20blocked&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="109090.html">
   <LINK REL="Next"  HREF="109092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 671586] New: Using Task.Factory.StartNew will not create new Tasks if previous Task is blocked</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20671586%5D%20New%3A%20Using%20Task.Factory.StartNew%20will%20not%0A%20create%20new%20Tasks%20if%20previous%20Task%20is%20blocked&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 671586] New: Using Task.Factory.StartNew will not create new Tasks if previous Task is blocked">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Feb 13 17:17:16 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="109090.html">[Mono-bugs] [Bug 662867] Attribute.GetCustomAttributes fails in searching inheritance chain against overridden method ToString()
</A></li>
        <LI>Next message: <A HREF="109092.html">[Mono-bugs] [Bug 671586] Using Task.Factory.StartNew will not create new Tasks if previous Task is blocked
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#109091">[ date ]</a>
              <a href="thread.html#109091">[ thread ]</a>
              <a href="subject.html#109091">[ subject ]</a>
              <a href="author.html#109091">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=671586">https://bugzilla.novell.com/show_bug.cgi?id=671586</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=671586#c0">https://bugzilla.novell.com/show_bug.cgi?id=671586#c0</A>


           Summary: Using Task.Factory.StartNew will not create new Tasks
                    if previous Task is blocked
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.8.x
          Platform: x86
        OS/Version: Windows 7
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">cdmckay at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US)
AppleWebKit/534.13 (KHTML, like Gecko) Chrome/9.0.597.98 Safari/534.13

I've made a program that creates Tasks using Task.Factory.StartNew to create
new Tasks that block using ManualResetEvents under certain circumstances.  It
seems that Task.Factory.StartNew will not create new tasks if a previous Task
is blocking using either ManualResetEvents#WaitOne or Thread.Sleep().

Reproducible: Always

Steps to Reproduce:
1. Run a Task that blocks on a ManualResetEvent.
2. Try to run another Task while previous Task is still blocked or sleeping.
Actual Results:  
Task 99 Started
Task 2 Started
Task 98 Started
Task 0 Started

Expected Results:  
Task 0 Started
Task 1 Started
Task 3 Started
Task 2 Started
Task 4 Started
Task 5 Started
.. 100 times ...

The attached code works as expected in the MS runtime but not in the Mono
runtime (only creates as many threads as there are threads on your CPU).

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>




























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="109090.html">[Mono-bugs] [Bug 662867] Attribute.GetCustomAttributes fails in searching inheritance chain against overridden method ToString()
</A></li>
	<LI>Next message: <A HREF="109092.html">[Mono-bugs] [Bug 671586] Using Task.Factory.StartNew will not create new Tasks if previous Task is blocked
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#109091">[ date ]</a>
              <a href="thread.html#109091">[ thread ]</a>
              <a href="subject.html#109091">[ subject ]</a>
              <a href="author.html#109091">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
