<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 325397] DbTransaction: Rollback is wrongly invoked in Dispose (bool)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20325397%5D%20DbTransaction%3A%20Rollback%20is%20wrongly%20invoked%0A%20in%20Dispose%20%28bool%29&In-Reply-To=bug-325397-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063200.html">
   <LINK REL="Next"  HREF="063203.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 325397] DbTransaction: Rollback is wrongly invoked in Dispose (bool)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20325397%5D%20DbTransaction%3A%20Rollback%20is%20wrongly%20invoked%0A%20in%20Dispose%20%28bool%29&In-Reply-To=bug-325397-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 325397] DbTransaction: Rollback is wrongly invoked in Dispose (bool)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Oct 16 14:41:40 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="063200.html">[Mono-bugs] [Bug 318854] OdbcDataAdapter.Fill method crashes with 'real' data type
</A></li>
        <LI>Next message: <A HREF="063203.html">[Mono-bugs] [Bug 325397] DbTransaction: Rollback is wrongly invoked in Dispose (bool)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63201">[ date ]</a>
              <a href="thread.html#63201">[ thread ]</a>
              <a href="subject.html#63201">[ subject ]</a>
              <a href="author.html#63201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=325397#c4">https://bugzilla.novell.com/show_bug.cgi?id=325397#c4</A>


Gert Driesen &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gert.driesen at pandora.be</A>&gt; changed:

           What    |Removed                                         |Added
----------------------------------------------------------------------------
             Status|NEEDINFO                                        |ASSIGNED
      Info Provider|<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">dobos at complex.elte.hu</A>                           |
            Summary|Transaction.Commit occures in                   |DbTransaction: Rollback is wrongly invoked in
                   |Transaction.Dispose                             |Dispose (bool)




--- Comment #4 from Gert Driesen &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gert.driesen at pandora.be</A>&gt;  2007-10-16 12:41:40 MST ---
I've added a DbTransactionTest.cs class containing a unit test that shows that
we're currently invoking RollBack in Dispose (bool), while MS does not appear
to do anything in Dispose (bool).

MS appears to leave it up to the deriving classes to override Dispose (bool)
and perform a rollback (when necessary?). This makes sense of course.

I've verified whether our implementation of DbTransaction are behaving
correctly, and from a quick look it seems that all except OleDbTransaction are
performing a rollback in Dispose (bool).

Before removing the call to Rollback we should:
* add standalone tests that verify the correct behavior on Dispose.
=&gt; I'll add standalone tests to my test repository 

* fix and test OleDbTransaction

Does this sound like a plan?


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>














































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063200.html">[Mono-bugs] [Bug 318854] OdbcDataAdapter.Fill method crashes with 'real' data type
</A></li>
	<LI>Next message: <A HREF="063203.html">[Mono-bugs] [Bug 325397] DbTransaction: Rollback is wrongly invoked in Dispose (bool)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63201">[ date ]</a>
              <a href="thread.html#63201">[ thread ]</a>
              <a href="subject.html#63201">[ subject ]</a>
              <a href="author.html#63201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
