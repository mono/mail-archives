<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 325495] arrays don' t appear to be implementing all the generic interfaces in 2.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20325495%5D%20arrays%20don%27%20t%20appear%20to%20be%20implementing%0A%20all%20the%20generic%20interfaces%20in%202.0&In-Reply-To=bug-325495-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="062312.html">
   <LINK REL="Next"  HREF="062318.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 325495] arrays don' t appear to be implementing all the generic interfaces in 2.0</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20325495%5D%20arrays%20don%27%20t%20appear%20to%20be%20implementing%0A%20all%20the%20generic%20interfaces%20in%202.0&In-Reply-To=bug-325495-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 325495] arrays don' t appear to be implementing all the generic interfaces in 2.0">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Oct  3 07:50:44 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="062312.html">[Mono-bugs] [Bug 325478] Problem compiling IronPython 2.0 Alpha 4
</A></li>
        <LI>Next message: <A HREF="062318.html">[Mono-bugs] [Bug 328774] Regression/Crash: string concatenation	operator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62317">[ date ]</a>
              <a href="thread.html#62317">[ thread ]</a>
              <a href="subject.html#62317">[ subject ]</a>
              <a href="author.html#62317">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=325495#c8">https://bugzilla.novell.com/show_bug.cgi?id=325495#c8</A>





--- Comment #8 from Paolo Molaro &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>&gt;  2007-10-03 05:50:43 MST ---
I implemented the interface offset sharing in my tree: this provides huge
memory savings (600-700+ KB of corlib metadata alone for ironpython/monodevelop
plus about the same in other memory allocations) and speedups even for the case
where we end up implementing all the needed interfaces (the ones the current
svn code misses). This is still not enough to run the anonarray.cs test case
because there is one more type involved that would need to have about the same
characteristics re implicit interfaces as the arrays: InternalEnumerator&lt;T&gt; in
System.Array.
This is the type of the object that is created when GetEnumerator&lt;T&gt; is called.
Now the twist is this: given a string[] array A you can end up calling
GetEnumerator&lt;T&gt; on it in several different ways, depending on how many
IEnumerable&lt;T&gt; interfaces the array exposes (which we know can be huge).

With the interface offsets sharing, we end up creating a single
GetEnumerator&lt;string[]&gt; method which returns an object which doesn't implement,
for example, IEnumerator&lt;IEnumerable&lt;string&gt;&gt;.
One solution to this problem is to not share offsets for the IEnumerable&lt;T&gt;
interfaces of arrays, but this reintroduces (even if to a lesser extent) the
explosive growth in memory usage and complexity.
The other solution is to do the same sharing and implicit interface
implementations we do on arrays also on InternalEnumerator&lt;T&gt;.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="062312.html">[Mono-bugs] [Bug 325478] Problem compiling IronPython 2.0 Alpha 4
</A></li>
	<LI>Next message: <A HREF="062318.html">[Mono-bugs] [Bug 328774] Regression/Crash: string concatenation	operator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62317">[ date ]</a>
              <a href="thread.html#62317">[ thread ]</a>
              <a href="subject.html#62317">[ subject ]</a>
              <a href="author.html#62317">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
