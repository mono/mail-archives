<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 336676] New: asp.net app segfaults in libgamin ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20336676%5D%20New%3A%20asp.net%20app%20segfaults%20in%20libgamin%20%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063663.html">
   <LINK REL="Next"  HREF="063615.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 336676] New: asp.net app segfaults in libgamin ?</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20336676%5D%20New%3A%20asp.net%20app%20segfaults%20in%20libgamin%20%3F&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 336676] New: asp.net app segfaults in libgamin ?">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Oct 25 07:00:48 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="063663.html">[Mono-bugs] [Bug 336675] OnResize event from plugin not firing
</A></li>
        <LI>Next message: <A HREF="063615.html">[Mono-bugs] [Bug 336676] asp.net app segfaults in libgamin ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63613">[ date ]</a>
              <a href="thread.html#63613">[ thread ]</a>
              <a href="subject.html#63613">[ subject ]</a>
              <a href="author.html#63613">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=336676#c331183">https://bugzilla.novell.com/show_bug.cgi?id=336676#c331183</A>

           Summary: asp.net app segfaults in libgamin ?
           Product: Mono: Class Libraries
           Version: 1.2
          Platform: x86
        OS/Version: RHEL 4
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">f.meyer at tetco.fr</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
          Found By: Integration Test


Hello,

Stress testing the start of our Web application mono, rarely, but occasionaly,
crashes (see log below)

Redhat EL 4 update 1. mono 1.2.5.1 tag with patch for bug #331183 and bug
#330357 (+apache +mod_mono)
On our distrib, gamin rpm is : gamin-0.1.7-1.2.1

By the way, we tried stopping gamin_server and uninstalling gamin rpm.
Surprinsingly :
- our web application still works,
- as for now we did not reproduce the problem (seems logical as we may not pass
through the same portion of code as if gamin was installed),
- moreover, it seems that the all configuration consumes far far less memory
than before ?

Frederic

Regards

[Mon Oct 15 10:29:32 2007] [notice] Apache/2.0.54 (Unix) mod_mono/1.2.5
configured -- resuming normal operations
*** glibc detected *** double free or corruption (fasttop): 0xb7002618 ***
Stacktrace:

  at (wrapper managed-to-native) System.IO.FAMWatcher.gamin_MonitorDirectory
(System.IO.FAMConnection&amp;,string,System.IO.FAMRequest&amp;,intptr) &lt;0x00004&gt;
  at (wrapper managed-to-native) System.IO.FAMWatcher.gamin_MonitorDirectory
(System.IO.FAMConnection&amp;,string,System.IO.FAMRequest&amp;,intptr) &lt;0xffffffff&gt;
  at System.IO.FAMWatcher.FAMMonitorDirectory
(System.IO.FAMConnection&amp;,string,System.IO.FAMRequest&amp;,intptr) &lt;0x0001f&gt;
  at System.IO.FAMWatcher.StartMonitoringDirectory (System.IO.FAMData,bool)
&lt;0x00041&gt;
  at System.IO.FAMWatcher.StartDispatching (System.IO.FileSystemWatcher)
&lt;0x0018e&gt;
  at System.IO.FileSystemWatcher.Start () &lt;0x00017&gt;
  at System.IO.FileSystemWatcher.set_EnableRaisingEvents (bool) &lt;0x00027&gt;
  at (wrapper remoting-invoke-with-check)
System.IO.FileSystemWatcher.set_EnableRaisingEvents (bool) &lt;0xffffffff&gt;
  at System.Web.Caching.CacheDependency..ctor
(string[],string[],System.Web.Caching.CacheDependency,System.DateTime)
&lt;0x00279&gt;
  at System.Web.Caching.CacheDependency..ctor (string[]) &lt;0x0003f&gt;
  at System.Web.Compilation.AspGenerator.AddTypeToCache
(System.Collections.ArrayList,string,System.Type) &lt;0x00065&gt;
  at System.Web.Compilation.AspGenerator.GetCompiledType () &lt;0x000d8&gt;
  at System.Web.UI.PageParser.CompileIntoType () &lt;0x0002a&gt;
  at System.Web.UI.TemplateControlParser.GetCompiledInstance () &lt;0x00012&gt;
  at System.Web.UI.PageParser.GetCompiledPageInstance
(string,string,System.Web.HttpContext) &lt;0x0003d&gt;
  at System.Web.UI.PageHandlerFactory.GetHandler
(System.Web.HttpContext,string,string,string) &lt;0x00010&gt;
  at System.Web.HttpApplication.GetHandler (System.Web.HttpContext) &lt;0x001cc&gt;
  at &lt;&gt;c__CompilerGenerated2.MoveNext () &lt;0x00dc9&gt;
  at System.Web.HttpApplication.Tick () &lt;0x0002c&gt;
  at System.Web.HttpApplication.Start (object) &lt;0x000fb&gt;
  at
System.Web.HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest
(System.Web.HttpContext,System.AsyncCallback,object) &lt;0x00073&gt;
  at System.Web.HttpRuntime.RealProcessRequest (object) &lt;0x00229&gt;
  at System.Web.HttpRuntime.ProcessRequest (System.Web.HttpWorkerRequest)
&lt;0x0002a&gt;
  at Mono.WebServer.MonoWorkerRequest.ProcessRequest () &lt;0x0007e&gt;
  at Mono.WebServer.BaseApplicationHost.ProcessRequest
(Mono.WebServer.MonoWorkerRequest) &lt;0x0006d&gt;
  at Mono.WebServer.ModMonoApplicationHost.ProcessRequest
(int,string,string,string,string,string,int,string,int,string,string[],string[])
&lt;0x00293&gt;
  at (wrapper remoting-invoke-with-check)
Mono.WebServer.ModMonoApplicationHost.ProcessRequest
(int,string,string,string,string,string,int,string,int,string,string[],string[])
&lt;0xffffffff&gt;
  at (wrapper xdomain-dispatch)
Mono.WebServer.ModMonoApplicationHost.ProcessRequest
(object,byte[]&amp;,byte[]&amp;,int,string,string,string,string,string,int,string,int,string,string[],string[])
&lt;0xffffffff&gt;
  at (wrapper xdomain-invoke)
Mono.WebServer.ModMonoApplicationHost.ProcessRequest
(int,string,string,string,string,string,int,string,int,string,string[],string[])
&lt;0xffffffff&gt;
  at (wrapper remoting-invoke-with-check)
Mono.WebServer.ModMonoApplicationHost.ProcessRequest
(int,string,string,string,string,string,int,string,int,string,string[],string[])
&lt;0xffffffff&gt;
  at Mono.WebServer.ModMonoWorker.InnerRun (object) &lt;0x0041d&gt;
  at Mono.WebServer.ModMonoWorker.Run (object) &lt;0x00017&gt;
  at (wrapper delegate-invoke) System.MulticastDelegate.invoke_void_object
(object) &lt;0xffffffff&gt;
  at (wrapper runtime-invoke)
System.Threading.WaitCallback.runtime_invoke_void_object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

   /usr/bin/mono [0x81685e0]
   /lib/tls/libpthread.so.0 [0xd757c0]
   /lib/tls/libc.so.6(abort+0xe9) [0xb64149]
   /lib/tls/libc.so.6 [0xb9627a]
   /lib/tls/libc.so.6 [0xb9cabf]
   /lib/tls/libc.so.6 [0xb9e3e1]
   /lib/tls/libc.so.6(__libc_realloc+0x116) [0xb9f5d6]
   /usr/lib/libgamin-1.so(vfprintf+0x23b2) [0x24e3b2]
   /usr/lib/libgamin-1.so(vfprintf+0x2bb9) [0x24ebb9]
   /usr/lib/libgamin-1.so(vfprintf+0x155c) [0x24d55c]
   /usr/lib/libgamin-1.so(FAMMonitorDirectory+0xad) [0x24dda3]
   [0x29b5f9]
   [0x29b578]
   [0x29b232]
   [0xaaff2f]
   [0xaafd98]
   [0xaafd68]
   [0xaafd00]
   [0xaaebea]
   [0xaad4e8]
   [0x29c326]
   [0x2980b9]
   [0x53e093]
   [0x53dfa3]
   [0x53b31e]
   [0x53b281]
   [0x41419d]
   [0x3fab72]
   [0x3f98ed]
   [0x2ccc94]
   [0x2cc844]
   [0x28437a]
   [0x283583]
   [0x28323f]
   [0x28172e]
   [0x216a7c]
   [0x215c4e]
   [0x21565e]
   [0x230b93]
   [0x2308a9]
   [0x1a7556]
   [0x1a7000]
   [0x1a6fb7]
   [0x1a6f1e]
   /usr/bin/mono [0x8155356]
   /usr/bin/mono(mono_runtime_invoke+0x27) [0x80927b7]
   /usr/bin/mono(mono_runtime_invoke_array+0x210) [0x80983c0]
   /usr/bin/mono [0x8098682]
   /usr/bin/mono [0x80cfdbd]
   /usr/bin/mono [0x80d0283]
   /usr/bin/mono [0x80cddb0]
   /usr/bin/mono [0x811b6a0]
   /usr/bin/mono [0x81318e4]
   /lib/tls/libpthread.so.0 [0xd6f341]
   /lib/tls/libc.so.6(__clone+0x5e) [0xc01fee]


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>






























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063663.html">[Mono-bugs] [Bug 336675] OnResize event from plugin not firing
</A></li>
	<LI>Next message: <A HREF="063615.html">[Mono-bugs] [Bug 336676] asp.net app segfaults in libgamin ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63613">[ date ]</a>
              <a href="thread.html#63613">[ thread ]</a>
              <a href="subject.html#63613">[ subject ]</a>
              <a href="author.html#63613">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
