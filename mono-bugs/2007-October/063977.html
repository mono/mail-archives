<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 338220] Sometimes ff might execute js before the plugin has been initialized
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20338220%5D%20Sometimes%20ff%20might%20execute%20js%20before%20the%0A%20plugin%20has%20been%20initialized&In-Reply-To=bug-338220-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063976.html">
   <LINK REL="Next"  HREF="063978.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 338220] Sometimes ff might execute js before the plugin has been initialized</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20338220%5D%20Sometimes%20ff%20might%20execute%20js%20before%20the%0A%20plugin%20has%20been%20initialized&In-Reply-To=bug-338220-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 338220] Sometimes ff might execute js before the plugin has been initialized">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Oct 31 13:59:31 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="063976.html">[Mono-bugs] [Bug 338220] New: Sometimes ff might execute js before the plugin has been initialized
</A></li>
        <LI>Next message: <A HREF="063978.html">[Mono-bugs] [Bug 325112] ImageAnimator: Large pauzes between each	frame
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63977">[ date ]</a>
              <a href="thread.html#63977">[ thread ]</a>
              <a href="subject.html#63977">[ subject ]</a>
              <a href="author.html#63977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=338220#c1">https://bugzilla.novell.com/show_bug.cgi?id=338220#c1</A>





--- Comment #1 from Rolf Bjarne Kvinge &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rkvinge at novell.com</A>&gt;  2007-10-31 11:59:30 MST ---
IRC log:

&lt;rolf_&gt; I can repro about 1/3 of the time I try 
&lt;toshok&gt; wow.. that shouldn't happen.  yuck.
&lt;jackson&gt; hmm, i might have comitted something accidently that does that
&lt;jackson&gt; ok, no i didn't
&lt;rolf_&gt; toshok, <A HREF="https://bugzilla.novell.com/show_bug.cgi?id=338220">https://bugzilla.novell.com/show_bug.cgi?id=338220</A>
&lt;rolf_&gt; we (1) initialize the plugin, (2) request a download of the xaml file,
and when it's been downloaded we (3) load it
&lt;rolf_&gt; in this case ff executes js inbetween 2 and 3
&lt;jackson&gt; we do need to make sure that we don't initialize the plugin too late,
because if there are errors parsing we need to notify the plugin
&lt;toshok&gt; we don't have any control over when we initialize the plugin though.. 
ff drives that, no?
&lt;rolf_&gt; the problem is that when we request the xaml file, it's done async
&lt;shana&gt; hmmm
&lt;toshok&gt; right, but (1) happens before (2), right?
&lt;shana&gt; rolf_: that might happen due to the extra time of things going through
gluezilla
&lt;toshok&gt; I mean, ff queries us for our scriptable interface when some JS gets
executed
&lt;rolf_&gt; yes, (1) is the PluginInstance ctor and PluginInstance::Initialize
&lt;shana&gt; it's also blowing up sometimes on clock.cpp:1113
&lt;toshok&gt; PluginInstance::GetValue
&lt;rolf_&gt; which is done before control is returned to ff
&lt;rolf_&gt; shana, except that I don't have gluezilla :)
&lt;rolf_&gt; it might make it happen more often though
&lt;shana&gt; rolf_: yeah, that's why I can always make it blow up :)
&lt;rolf_&gt; did you try any other website?
&lt;toshok&gt; I'm having a hard time understanding how there's any race involved
&lt;toshok&gt; I think the bug is someplace else
&lt;shana&gt; rolf_: gimme more sites :)
&lt;rolf_&gt; (1) plugin created (2) plugin requests download of xaml (3) firefox
executes js (4) plugin accesses surface-&gt;TopLevel, which hasn't been loaded,
since the xaml hasn't been downloaded yet
&lt;toshok&gt; ahhh, okay - by &quot;plugin initialization&quot; I thought you meant there was
some race in creation of the JS objects, which there couldn't be
&lt;rolf_&gt; yes, my wording was somewhat confusing


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063976.html">[Mono-bugs] [Bug 338220] New: Sometimes ff might execute js before the plugin has been initialized
</A></li>
	<LI>Next message: <A HREF="063978.html">[Mono-bugs] [Bug 325112] ImageAnimator: Large pauzes between each	frame
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63977">[ date ]</a>
              <a href="thread.html#63977">[ thread ]</a>
              <a href="subject.html#63977">[ subject ]</a>
              <a href="author.html#63977">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
