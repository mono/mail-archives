<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 324011] SimpleWorkerRequest: Content in subdirs	not accesible
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20324011%5D%20SimpleWorkerRequest%3A%20Content%20in%20subdirs%0A%09not%20accesible&In-Reply-To=bug-324011-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072788.html">
   <LINK REL="Next"  HREF="072784.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 324011] SimpleWorkerRequest: Content in subdirs	not accesible</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20324011%5D%20SimpleWorkerRequest%3A%20Content%20in%20subdirs%0A%09not%20accesible&In-Reply-To=bug-324011-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 324011] SimpleWorkerRequest: Content in subdirs	not accesible">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Apr 25 09:03:09 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="072788.html">[Mono-bugs] [Bug 383749] --debug not thread safe
</A></li>
        <LI>Next message: <A HREF="072784.html">[Mono-bugs] [Bug 324011] SimpleWorkerRequest: Content in subdirs	not accesible
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72783">[ date ]</a>
              <a href="thread.html#72783">[ thread ]</a>
              <a href="subject.html#72783">[ subject ]</a>
              <a href="author.html#72783">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=324011">https://bugzilla.novell.com/show_bug.cgi?id=324011</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gert.driesen at pandora.be</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=324011#c20">https://bugzilla.novell.com/show_bug.cgi?id=324011#c20</A>





--- Comment #20 from Gert Driesen &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gert.driesen at pandora.be</A>&gt;  2008-04-25 07:03:09 MST ---
I think SimpleWorkerRequest was actually broken:
  * it treated everything up until the first / as path_info, but it should have
    taken everything up until the last /.
  * GetFilePath did not ever use path_info at all, so content from subdir could
    never be served.

I attached a patch which fixes this, and which uses Path.DirectorySeparatorChar
to split the path instead of hardcoding it to /.  This should not have any
effect on linux (since for unix Path.DirectorySeparatorChar is / anyway), and
it fixes the behavior for Windows.

After applying my patch, the file path passed to HttpResponse.TransmitFile is
correct but still nothing is written to the TextWriter.

Can you please apply this patch locally, and look into this? You can use my
&quot;simplified repro&quot; to reproduce this.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072788.html">[Mono-bugs] [Bug 383749] --debug not thread safe
</A></li>
	<LI>Next message: <A HREF="072784.html">[Mono-bugs] [Bug 324011] SimpleWorkerRequest: Content in subdirs	not accesible
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72783">[ date ]</a>
              <a href="thread.html#72783">[ thread ]</a>
              <a href="subject.html#72783">[ subject ]</a>
              <a href="author.html#72783">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
