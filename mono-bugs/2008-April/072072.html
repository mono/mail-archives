<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 379348] gmcs generates code that crashes mono with delegates and generic types
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20379348%5D%20gmcs%20generates%20code%20that%20crashes%20mono%20with%0A%20delegates%20and%20generic%20types&In-Reply-To=bug-379348-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072068.html">
   <LINK REL="Next"  HREF="072074.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 379348] gmcs generates code that crashes mono with delegates and generic types</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20379348%5D%20gmcs%20generates%20code%20that%20crashes%20mono%20with%0A%20delegates%20and%20generic%20types&In-Reply-To=bug-379348-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 379348] gmcs generates code that crashes mono with delegates and generic types">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Apr 11 16:35:03 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="072068.html">[Mono-bugs] [Bug 379348] New: gmcs generates code that crashes mono with delegates and generic types
</A></li>
        <LI>Next message: <A HREF="072074.html">[Mono-bugs] [Bug 379348] gmcs generates code that crashes mono with delegates and generic types
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72072">[ date ]</a>
              <a href="thread.html#72072">[ thread ]</a>
              <a href="subject.html#72072">[ subject ]</a>
              <a href="author.html#72072">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=379348">https://bugzilla.novell.com/show_bug.cgi?id=379348</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rkumpera at novell.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=379348#c1">https://bugzilla.novell.com/show_bug.cgi?id=379348#c1</A>





--- Comment #1 from Rodrigo Kumpera &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rkumpera at novell.com</A>&gt;  2008-04-11 14:35:03 MST ---
Created an attachment (id=207576)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=207576">https://bugzilla.novell.com/attachment.cgi?id=207576</A>)
Teste case

The attached test case will crash mono if compiled with gmcs, but will work
with csc. The difference between CSC and GMCS is in how the delegate is
constructed:

GMCS:
ldarg.0 
ldfld !0 class GenericClass`1&lt;!0&gt;::'field'
dup 
ldvirtftn instance string class [mscorlib]System.IFormattable::ToString(string,
class [mscorlib]System.IFormatProvider)
newobj instance void class ToStr::'.ctor'(object, native int)


CSC:
ldarg.0 
ldfld !0 class GenericClass`1&lt;!0&gt;::'field'
box !0 //&lt;&lt;&lt;------
dup 
ldvirtftn instance string class [mscorlib]System.IFormattable::ToString(string,
class [mscorlib]System.IFormatProvider)
newobj instance void class ToStr::'.ctor'(object, native int)


Note that this extra box is completely harmless to performance for the
reference type expansion, as it must be a nop.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072068.html">[Mono-bugs] [Bug 379348] New: gmcs generates code that crashes mono with delegates and generic types
</A></li>
	<LI>Next message: <A HREF="072074.html">[Mono-bugs] [Bug 379348] gmcs generates code that crashes mono with delegates and generic types
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72072">[ date ]</a>
              <a href="thread.html#72072">[ thread ]</a>
              <a href="subject.html#72072">[ subject ]</a>
              <a href="author.html#72072">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
