<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 375997] New: downloader.getResponseText() charset	fu
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20375997%5D%20New%3A%20downloader.getResponseText%28%29%20charset%0A%09fu&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="071427.html">
   <LINK REL="Next"  HREF="071430.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 375997] New: downloader.getResponseText() charset	fu</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20375997%5D%20New%3A%20downloader.getResponseText%28%29%20charset%0A%09fu&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 375997] New: downloader.getResponseText() charset	fu">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Apr  1 14:02:46 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="071427.html">[Mono-bugs] [Bug 375249] Performance of Math.Max and Math.Min ( missing predicate instructions)
</A></li>
        <LI>Next message: <A HREF="071430.html">[Mono-bugs] [Bug 376002] New: StatusStrip - ToolStripStatusLabel text incorrectly positioned when images are used
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71429">[ date ]</a>
              <a href="thread.html#71429">[ thread ]</a>
              <a href="subject.html#71429">[ subject ]</a>
              <a href="author.html#71429">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=375997">https://bugzilla.novell.com/show_bug.cgi?id=375997</A>


           Summary: downloader.getResponseText() charset fu
           Product: Moonlight
           Version: unspecified
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Minor
          Priority: P5 - None
         Component: plugin
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">fejj at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


The NSPlugin API only allows us to pass it NPVariant Strings in the UTF-8
encoding. Anything with invalid UTF-8 potentially gets truncated when the
javascript variable containing the result gets passed around.

Currently, Downloader::GetResponseText() attempts to convert to UTF-8 so this
isn't a huge issue, but as Larry pointed out, if the file downloaded happens to
be some sort of xhtml page or some such that requires the charset to be
identical to that in the original downloaded file, things may break.

In any case, createFromXaml() needs to be able to handle results passed to it
via a downloader.GetResponseText(), so if GetResponseText() changes to not
return UTF-8, then createFromXaml() will need to be fixed (either in the
plugin-class.cpp code or else in xaml.cpp)

Make sure that the DownloaderRegressions.htm test passes after any changes :)


As Larry suggests, this is a corner case and is probably not a huge priority.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="071427.html">[Mono-bugs] [Bug 375249] Performance of Math.Max and Math.Min ( missing predicate instructions)
</A></li>
	<LI>Next message: <A HREF="071430.html">[Mono-bugs] [Bug 376002] New: StatusStrip - ToolStripStatusLabel text incorrectly positioned when images are used
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71429">[ date ]</a>
              <a href="thread.html#71429">[ thread ]</a>
              <a href="subject.html#71429">[ subject ]</a>
              <a href="author.html#71429">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
