<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 430732] v0.8.0 : bug in resolve() or	serviceremoved() functions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430732%5D%20v0.8.0%20%3A%20bug%20in%20resolve%28%29%20or%0A%09serviceremoved%28%29%20functions&In-Reply-To=bug-430732-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088487.html">
   <LINK REL="Next"  HREF="088490.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 430732] v0.8.0 : bug in resolve() or	serviceremoved() functions</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430732%5D%20v0.8.0%20%3A%20bug%20in%20resolve%28%29%20or%0A%09serviceremoved%28%29%20functions&In-Reply-To=bug-430732-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 430732] v0.8.0 : bug in resolve() or	serviceremoved() functions">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon May  4 09:25:01 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="088487.html">[Mono-bugs] [Bug 459790] SoapRpcMethod based webservices return HTTP 500 error with Mono 2.0.1 Runtime
</A></li>
        <LI>Next message: <A HREF="088490.html">[Mono-bugs] [Bug 467201] [PATCH] Improper conv.r4, conv.r8 and float return implementations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88488">[ date ]</a>
              <a href="thread.html#88488">[ thread ]</a>
              <a href="subject.html#88488">[ subject ]</a>
              <a href="author.html#88488">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=430732">http://bugzilla.novell.com/show_bug.cgi?id=430732</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">daniel.phillips at gmail.com</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=430732#c3">http://bugzilla.novell.com/show_bug.cgi?id=430732#c3</A>


Daniel Phillips &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">daniel.phillips at gmail.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">daniel.phillips at gmail.com</A>




--- Comment #3 from Daniel Phillips &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">daniel.phillips at gmail.com</A>&gt;  2009-05-04 07:25:00 MDT ---
I'm experiencing the same issue with the latest source from the trunk as well. 
After some investigation, I've found the following:

* When OnServiceAdded() is executed and resolve_shares is true, the call to
args.Service.Resolve() never returns.  This is in ZeroConfClient.cs.

* After tracing down through the code, it appears that the call to Resolve()
blocks forever in Mono.Zeroconf.Providers.Bonjour\BrowseService.cs
OnResolveReply().  If AddressProtocol is set to AddressProtocol.Any, then
DNSServiceQueryRecord() is called for both an IPv4 and IPv6 query.  When
sd_ref.Process() is executed for the IPv6 query, it never executes any
callback, hence never deallocs its ServiceRef, and therefore never returns.

I don't think I have IPv6 support on my machine (I'm not sure how I would
confirm this), but I have found that starting the test client with &quot;-a IPv4&quot;
makes everything work fine.  So, for the time being, I should be able to work
around this just by always using AddressProtocol.IPv4.  However, it would be
good if the call to Resolve() didn't block when there was no IPv6 address for a
machine.

I'm running XPx64 SP2 on my machine (if that helps?)

Please let me know if you need any more information.

Thanks!

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088487.html">[Mono-bugs] [Bug 459790] SoapRpcMethod based webservices return HTTP 500 error with Mono 2.0.1 Runtime
</A></li>
	<LI>Next message: <A HREF="088490.html">[Mono-bugs] [Bug 467201] [PATCH] Improper conv.r4, conv.r8 and float return implementations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88488">[ date ]</a>
              <a href="thread.html#88488">[ thread ]</a>
              <a href="subject.html#88488">[ subject ]</a>
              <a href="author.html#88488">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
