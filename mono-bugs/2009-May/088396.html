<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 500019] New: SSE2 used on system without SSE2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20500019%5D%20New%3A%20SSE2%20used%20on%20system%20without%20SSE2&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088394.html">
   <LINK REL="Next"  HREF="088398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 500019] New: SSE2 used on system without SSE2</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20500019%5D%20New%3A%20SSE2%20used%20on%20system%20without%20SSE2&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 500019] New: SSE2 used on system without SSE2">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri May  1 06:35:22 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="088394.html">[Mono-bugs] [Bug 420950] error in the DrawString method
</A></li>
        <LI>Next message: <A HREF="088398.html">[Mono-bugs] [Bug 500019] SSE2 used on system without SSE2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88396">[ date ]</a>
              <a href="thread.html#88396">[ thread ]</a>
              <a href="subject.html#88396">[ subject ]</a>
              <a href="author.html#88396">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=500019">http://bugzilla.novell.com/show_bug.cgi?id=500019</A>


           Summary: SSE2 used on system without SSE2
    Classification: Mono
           Product: Mono: Runtime
           Version: 2.4.x
          Platform: i686
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">paul at floorball-flamingos.nl</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8)
Gecko/2009040210 Gentoo Firefox/3.0.8

[Filing a bug as requested in
<A HREF="http://lists.ximian.com/pipermail/mono-devel-list/2009-May/031958.html]">http://lists.ximian.com/pipermail/mono-devel-list/2009-May/031958.html]</A>

After successfully building mono 2.4 on a freshly installed ubuntu 9.04
laptop I get a SIGILL somewhere in the basic tests:

[...]


Test run: image=/home/melis/c/mono-2.4/mono/mini/basic-float.exe,
opts=peephole
Results: total tests: 29, all pass
Elapsed time: 0.004071 secs (0.000318, 0.003753), Code size: 7100

Test run: image=/home/melis/c/mono-2.4/mono/mini/basic-float.exe,
opts=branch
Results: total tests: 29, all pass
Elapsed time: 0.003926 secs (0.000315, 0.003611), Code size: 7299

Test run: image=/home/melis/c/mono-2.4/mono/mini/basic-float.exe, opts=cfold
Results: total tests: 29, all pass
Elapsed time: 0.003806 secs (0.000313, 0.003493), Code size: 7843

Test run: image=/home/melis/c/mono-2.4/mono/mini/basic-float.exe, opts=fcmov
Results: total tests: 29, all pass
Elapsed time: 0.003790 secs (0.000309, 0.003481), Code size: 7254

Test run: image=/home/melis/c/mono-2.4/mono/mini/basic-float.exe, opts=simd
Results: total tests: 29, all pass
Elapsed time: 0.003811 secs (0.000310, 0.003501), Code size: 7843

Test run: image=/home/melis/c/mono-2.4/mono/mini/basic-float.exe, opts=sse2

Unhandled Exception: System.ExecutionEngineException: SIGILL
  at Tests.test_0_conv_i () [0x00000]
make[4]: *** [rcheck] Error 1
make[4]: Leaving directory `/home/melis/c/mono-2.4/mono/mini'
make[3]: *** [check-am] Error 2
make[3]: Leaving directory `/home/melis/c/mono-2.4/mono/mini'
make[2]: *** [check] Error 2
make[2]: Leaving directory `/home/melis/c/mono-2.4/mono/mini'
make[1]: *** [check-recursive] Error 1
make[1]: Leaving directory `/home/melis/c/mono-2.4/mono'
make: *** [check-recursive] Error 1

It seems that an attempt is made to run code using optimizations that
use SSE2 instructions, however, the laptop's CPU (an old P3) does not
have SSE2, only SSE. I don't see any switch to ./configure to tell it to
not assume SSE2 is available. 


Reproducible: Always

Steps to Reproduce:
1. compile Mono 2.4
2. run make check
3.



Contents of /proc/cpuinfo

processor    : 0
vendor_id    : GenuineIntel
cpu family    : 6
model        : 11
model name    : Intel(R) Pentium(R) III Mobile CPU      1000MHz
stepping    : 1
cpu MHz        : 731.500
cache size    : 512 KB
fdiv_bug    : no
hlt_bug        : no
f00f_bug    : no
coma_bug    : no
fpu        : yes
fpu_exception    : yes
cpuid level    : 2
wp        : yes
flags        : fpu vme de pse tsc msr pae mce cx8 sep mtrr pge mca cmov pat
pse36 mmx fxsr sse up
bogomips    : 1461.91
clflush size    : 32
power management:

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088394.html">[Mono-bugs] [Bug 420950] error in the DrawString method
</A></li>
	<LI>Next message: <A HREF="088398.html">[Mono-bugs] [Bug 500019] SSE2 used on system without SSE2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88396">[ date ]</a>
              <a href="thread.html#88396">[ thread ]</a>
              <a href="subject.html#88396">[ subject ]</a>
              <a href="author.html#88396">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
