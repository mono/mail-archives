<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 500987] SqlCommand with DateTime parameter throws exception &quot;Error converting data type varchar to datetime&quot; (impacts NHibernate and Castle ActiveRecord)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20500987%5D%20SqlCommand%20with%20DateTime%20parameter%20throws%0A%20exception%20%22Error%20converting%20data%20type%20varchar%20to%20datetime%22%20%28impacts%0A%20NHibernate%20and%20Castle%20ActiveRecord%29&In-Reply-To=bug-500987-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088886.html">
   <LINK REL="Next"  HREF="088889.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 500987] SqlCommand with DateTime parameter throws exception &quot;Error converting data type varchar to datetime&quot; (impacts NHibernate and Castle ActiveRecord)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20500987%5D%20SqlCommand%20with%20DateTime%20parameter%20throws%0A%20exception%20%22Error%20converting%20data%20type%20varchar%20to%20datetime%22%20%28impacts%0A%20NHibernate%20and%20Castle%20ActiveRecord%29&In-Reply-To=bug-500987-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 500987] SqlCommand with DateTime parameter throws exception &quot;Error converting data type varchar to datetime&quot; (impacts NHibernate and Castle ActiveRecord)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri May 15 12:17:49 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="088886.html">[Mono-bugs] [Bug 500987] SqlCommand with DateTime parameter throws exception &quot;Error converting data type varchar to datetime&quot; (impacts NHibernate and Castle ActiveRecord)
</A></li>
        <LI>Next message: <A HREF="088889.html">[Mono-bugs] [Bug 500987] SqlCommand with DateTime parameter throws exception &quot;Error converting data type varchar to datetime&quot; (impacts NHibernate and Castle ActiveRecord)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88888">[ date ]</a>
              <a href="thread.html#88888">[ thread ]</a>
              <a href="subject.html#88888">[ subject ]</a>
              <a href="author.html#88888">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=500987">http://bugzilla.novell.com/show_bug.cgi?id=500987</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">loic.nageleisen at gmail.com</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=500987#c14">http://bugzilla.novell.com/show_bug.cgi?id=500987#c14</A>





--- Comment #14 from Loic Nageleisen &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">loic.nageleisen at gmail.com</A>&gt;  2009-05-15 10:17:47 MDT ---
Since Tds70 inherits Tds (which I stupidly overlooked), base.Locale is of
course set in Tds.cs, and it is set initially to CultureInfo.InvariantCulture.
Then it is set in

            case TdsEnvPacketSubType.Locale :

to

            locale = new CultureInfo (lcid);


During my tests, it seems Mono receives an lcid which implies a CultureInfo,
but MSSQL expects another locale. Using &quot;SET LANGUAGE Fran&#231;ais&quot; aligns one with
the other. The question is, which one is wrong at the beginning? If I just
start a failing query without setting language, MSSQL error message is in
french, therefore LANGUAGE is Fran&#231;ais to begin with, and lcid is something
else, certainly 1033 (database is set to us_english). In my opinion this
behavior must be due to the fact that the database is run on a French XP,
because there is no single place where the database is set to French. This
mismatch is then the cause of the failure, because Mono doesn't cope with this
(yet).

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088886.html">[Mono-bugs] [Bug 500987] SqlCommand with DateTime parameter throws exception &quot;Error converting data type varchar to datetime&quot; (impacts NHibernate and Castle ActiveRecord)
</A></li>
	<LI>Next message: <A HREF="088889.html">[Mono-bugs] [Bug 500987] SqlCommand with DateTime parameter throws exception &quot;Error converting data type varchar to datetime&quot; (impacts NHibernate and Castle ActiveRecord)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88888">[ date ]</a>
              <a href="thread.html#88888">[ thread ]</a>
              <a href="subject.html#88888">[ subject ]</a>
              <a href="author.html#88888">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
