<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 506144] New: Structs that contain Mono.Simd.Vector4f fields have broken sequential layout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20506144%5D%20New%3A%20Structs%20that%20contain%0A%20Mono.Simd.Vector4f%20fields%20have%20broken%20sequential%20layout&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="089071.html">
   <LINK REL="Next"  HREF="089074.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 506144] New: Structs that contain Mono.Simd.Vector4f fields have broken sequential layout</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20506144%5D%20New%3A%20Structs%20that%20contain%0A%20Mono.Simd.Vector4f%20fields%20have%20broken%20sequential%20layout&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 506144] New: Structs that contain Mono.Simd.Vector4f fields have broken sequential layout">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu May 21 16:05:07 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="089071.html">[Mono-bugs] [Bug 506122] New: XmlSchema.Compile does not throw XmlSchemaException when invoked twice
</A></li>
        <LI>Next message: <A HREF="089074.html">[Mono-bugs] [Bug 506144] Structs that contain Mono.Simd.Vector4f fields have broken sequential layout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89073">[ date ]</a>
              <a href="thread.html#89073">[ thread ]</a>
              <a href="subject.html#89073">[ subject ]</a>
              <a href="author.html#89073">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=506144">http://bugzilla.novell.com/show_bug.cgi?id=506144</A>


           Summary: Structs that contain Mono.Simd.Vector4f fields have
                    broken sequential layout
    Classification: Mono
           Product: Mono: Runtime
           Version: SVN
          Platform: i686
        OS/Version: Windows Vista
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: JIT
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhutchinson at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
                CC: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at novell.com</A>
          Found By: ---


Created an attachment (id=293732)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=293732">http://bugzilla.novell.com/attachment.cgi?id=293732</A>)
Test case for the layout issue.

I have a struct that contains four Mono.Simd.Vector4f fields. I'm using it as a
pointer into unmanaged code.

[StructLayout (LayoutKind.Sequential)]
struct Matrix {
    public Vector4f col0, col1, col2, col3;
}

The problem is that on Mono, the address of the first field is not the same as
the address of the struct, despite using LayoutKind.Sequential. This means that
code that works on .NET does not work on Mono.

A test case is attached.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="089071.html">[Mono-bugs] [Bug 506122] New: XmlSchema.Compile does not throw XmlSchemaException when invoked twice
</A></li>
	<LI>Next message: <A HREF="089074.html">[Mono-bugs] [Bug 506144] Structs that contain Mono.Simd.Vector4f fields have broken sequential layout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89073">[ date ]</a>
              <a href="thread.html#89073">[ thread ]</a>
              <a href="subject.html#89073">[ subject ]</a>
              <a href="author.html#89073">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
