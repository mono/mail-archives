<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 609109] [Regression] Incoming tablular data stream (TDS) remote procedure call (RPC) protocal stream is incorrect.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20609109%5D%20%5BRegression%5D%20Incoming%20tablular%20data%20stream%0A%20%28TDS%29%20remote%20procedure%20call%20%28RPC%29%20protocal%20stream%20is%20incorrect.&In-Reply-To=bug-609109-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="102130.html">
   <LINK REL="Next"  HREF="102132.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 609109] [Regression] Incoming tablular data stream (TDS) remote procedure call (RPC) protocal stream is incorrect.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20609109%5D%20%5BRegression%5D%20Incoming%20tablular%20data%20stream%0A%20%28TDS%29%20remote%20procedure%20call%20%28RPC%29%20protocal%20stream%20is%20incorrect.&In-Reply-To=bug-609109-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 609109] [Regression] Incoming tablular data stream (TDS) remote procedure call (RPC) protocal stream is incorrect.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Jul 13 09:45:11 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="102130.html">[Mono-bugs] [Bug 613845] Decimal Parameter stored wrong in Money-attribute in database
</A></li>
        <LI>Next message: <A HREF="102132.html">[Mono-bugs] [Bug 621899] New: GC / memory leak in conjunction with F#, GC appears to lock-up in infinite loop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#102131">[ date ]</a>
              <a href="thread.html#102131">[ thread ]</a>
              <a href="subject.html#102131">[ subject ]</a>
              <a href="author.html#102131">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=609109">http://bugzilla.novell.com/show_bug.cgi?id=609109</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=609109#c18">http://bugzilla.novell.com/show_bug.cgi?id=609109#c18</A>


--- Comment #18 from scott fluto &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">srfcanada at hotmail.com</A>&gt; 2010-07-13 13:45:09 UTC ---
all the tests that failed now pass except 1. If I change the data getting
inserted slightly it starts to pass so I could do that but there seems to still
be a bug lurking in there. I tried creating a test case but it seems to be part
of the binary data included and I have a hard time duplicating it. Is there
some place I could debug that would help identify where is coming from. Would
it be in the same place you made the fix originally.

this is the error Im still getting:
NHibernate.Exceptions.GenericADOException: could not insert:
[Drms.Server.EntityModel.EntityRootTestObject#046b9cee-cce3-4603-8778-9db202eee234][SQL:
INSERT INTO [EROOTTESTOBJECT] ([COMMITCOUNT], [TESTDATE], [TESTSTRING],
[TESTDOUBLE], [TESTINT], [TESTINT64], [SINGLECHILD], [LABEL],
[PERSISTABLEBACKREFERENCES], [PERSISTABLECASECONTEXTID],
[PERSISTABLECASECONTEXTREFERENC], [NAME], [BINARYTEST], [CHILDSHARED],
[SINGLEDOMAINOBJECT], [TESTBLOB], [INTERFACEOBJECT], [DOMAINLISTCOLLECTION1],
[SHAREDLIST], [SHAREDLIST2], [RELATIONSHIPLISTCOLLECTION1],
[SINGLERELATIONSHIP1], [DOMAINDICTIONARYCOLLECTION1], [SHAREDDICTIONARY],
[SHAREDDICTIONARY2], [SHAREDSINGLERELATIONSHIP], [STRINGLIST],
[STRINGVALIDATEDLIST], [STRINGVALIDATEDDICTIONARY], [DICTIONARYKEY],
[DICTIONARYKEYBINARY], [RELDICTIONARYKEYBINARY], [CHILDADICTIONARY],
[CHILDACOLLECTION], [ILISTCOLLECTION1], [ILISTCOLLECTION2],
[DOMAINLISTCOLLECTION2], [DOMAINLISTCOLLECTION3], [DOMAINLISTCOLLECTION4],
[VALIDATEDLISTCOLLECTION1], [VALIDATEDLISTCOLLECTION2],
[VALIDATEDLISTCOLLECTION3], [VALIDATEDLISTCOLLECTION4],
[DOMAINDICTIONARYCOLLECTION2], [DOMAINDICTIONARYCOLLECTION3],
[DOMAINDICTIONARYCOLLECTION4], [VALIDATEDDICTIONARYCOLLECTION1],
[VALIDATEDDICTIONARYCOLLECTION2], [VALIDATEDDICTIONARYCOLLECTION3],
[VALIDATEDDICTIONARYCOLLECTION4], [RELATIONSHIPLISTCOLLECTION2],
[RELATIONSHIPLISTCOLLECTION3], [SINGLERELATIONSHIP2], [SINGLERELATIONSHIP3],
[ARRAY1], [COLLECTIONLIST], [ORIGINAL], [ISBACKREFERENCETRACKINGENABLED],
[CASECONTEXTBEHAVIOR], [CREATED], [DESCRIPTION], [ID]) VALUES (?, ?, ?, ?, ?,
?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,
?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,
?, ?, ?, ?, ?)]
Source: NHibernate
Target Site: Void Insert(System.Object, System.Object[], System.Boolean[],
Int32, NHibernate.SqlCommand.SqlCommandInfo, System.Object,
ISessionImplementor)
Stack Trace:   at NHibernate.Persister.Entity.AbstractEntityPersister.Insert
(System.Object id, System.Object[] fields, System.Boolean[] notNull, Int32 j,
NHibernate.SqlCommand.SqlCommandInfo sql, System.Object obj,
ISessionImplementor session) [0x00000] in &lt;filename unknown&gt;:0
  at NHibernate.Persister.Entity.AbstractEntityPersister.Insert (System.Object
id, System.Object[] fields, System.Object obj, ISessionImplementor session)
[0x00000] in &lt;filename unknown&gt;:0
  at NHibernate.Action.EntityInsertAction.Execute () [0x00000] in &lt;filename
unknown&gt;:0
  at NHibernate.Engine.ActionQueue.Execute (IExecutable executable) [0x00000]
in &lt;filename unknown&gt;:0
  at NHibernate.Engine.ActionQueue.ExecuteActions (IList list) [0x00000] in
&lt;filename unknown&gt;:0
  at NHibernate.Engine.ActionQueue.ExecuteActions () [0x00000] in &lt;filename
unknown&gt;:0
  at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions
(IEventSource session) [0x00000] in &lt;filename unknown&gt;:0
Custom Data:
Inner Exception: System.Data.SqlClient.SqlException: The incoming tabular data
stream (TDS) remote procedure call (RPC) protocol stream is incorrect.
Parameter 53 (&quot;@p5&#42240;&quot;): Data type 0x00 is unknown.
Source: Mono SqlClient Data Provider
Target Site: Void ErrorHandler(System.Object,
Mono.Data.Tds.Protocol.TdsInternalErrorMessageEventArgs)
Stack Trace:   at System.Data.SqlClient.SqlConnection.ErrorHandler
(System.Object sender, Mono.Data.Tds.Protocol.TdsInternalErrorMessageEventArgs
e) [0x00000] in &lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds.OnTdsErrorMessage
(Mono.Data.Tds.Protocol.TdsInternalErrorMessageEventArgs e) [0x00000] in
&lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds.ProcessMessage (TdsPacketSubType subType)
[0x00000] in &lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds.ProcessSubPacket () [0x00000] in &lt;filename
unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds.NextResult () [0x00000] in &lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds.SkipToEnd () [0x00000] in &lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds70.ExecRPC (TdsRpcProcId rpcId, System.String
sql, Mono.Data.Tds.TdsMetaParameterCollection parameters, Int32 timeout,
Boolean wantResults) [0x00000] in &lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds80.Execute (System.String commandText,
Mono.Data.Tds.TdsMetaParameterCollection parameters, Int32 timeout, Boolean
wantResults) [0x00000] in &lt;filename unknown&gt;:0
  at System.Data.SqlClient.SqlCommand.Execute (Boolean wantResults) [0x00000]
in &lt;filename unknown&gt;:0
  at System.Data.SqlClient.SqlCommand.ExecuteNonQuery () [0x00000] in &lt;filename
unknown&gt;:0
  at NHibernate.AdoNet.AbstractBatcher.ExecuteNonQuery (IDbCommand cmd)
[0x00000] in &lt;filename unknown&gt;:0
Custom Data:
   Key #1: actual-sql-query
   Value #1: INSERT INTO [EROOTTESTOBJECT] ([COMMITCOUNT], [TESTDATE],
[TESTSTRING], [TESTDOUBLE], [TESTINT], [TESTINT64], [SINGLECHILD], [LABEL],
[PERSISTABLEBACKREFERENCES], [PERSISTABLECASECONTEXTID],
[PERSISTABLECASECONTEXTREFERENC], [NAME], [BINARYTEST], [CHILDSHARED],
[SINGLEDOMAINOBJECT], [TESTBLOB], [INTERFACEOBJECT], [DOMAINLISTCOLLECTION1],
[SHAREDLIST], [SHAREDLIST2], [RELATIONSHIPLISTCOLLECTION1],
[SINGLERELATIONSHIP1], [DOMAINDICTIONARYCOLLECTION1], [SHAREDDICTIONARY],
[SHAREDDICTIONARY2], [SHAREDSINGLERELATIONSHIP], [STRINGLIST],
[STRINGVALIDATEDLIST], [STRINGVALIDATEDDICTIONARY], [DICTIONARYKEY],
[DICTIONARYKEYBINARY], [RELDICTIONARYKEYBINARY], [CHILDADICTIONARY],
[CHILDACOLLECTION], [ILISTCOLLECTION1], [ILISTCOLLECTION2],
[DOMAINLISTCOLLECTION2], [DOMAINLISTCOLLECTION3], [DOMAINLISTCOLLECTION4],
[VALIDATEDLISTCOLLECTION1], [VALIDATEDLISTCOLLECTION2],
[VALIDATEDLISTCOLLECTION3], [VALIDATEDLISTCOLLECTION4],
[DOMAINDICTIONARYCOLLECTION2], [DOMAINDICTIONARYCOLLECTION3],
[DOMAINDICTIONARYCOLLECTION4], [VALIDATEDDICTIONARYCOLLECTION1],
[VALIDATEDDICTIONARYCOLLECTION2], [VALIDATEDDICTIONARYCOLLECTION3],
[VALIDATEDDICTIONARYCOLLECTION4], [RELATIONSHIPLISTCOLLECTION2],
[RELATIONSHIPLISTCOLLECTION3], [SINGLERELATIONSHIP2], [SINGLERELATIONSHIP3],
[ARRAY1], [COLLECTIONLIST], [ORIGINAL], [ISBACKREFERENCETRACKINGENABLED],
[CASECONTEXTBEHAVIOR], [CREATED], [DESCRIPTION], [ID]) VALUES (@p0, @p1, @p2,
@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16,
@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29,
@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42,
@p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55,
@p56, @p57, @p58, @p59, @p60, @p61)
Inner Exception:

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="102130.html">[Mono-bugs] [Bug 613845] Decimal Parameter stored wrong in Money-attribute in database
</A></li>
	<LI>Next message: <A HREF="102132.html">[Mono-bugs] [Bug 621899] New: GC / memory leak in conjunction with F#, GC appears to lock-up in infinite loop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#102131">[ date ]</a>
              <a href="thread.html#102131">[ thread ]</a>
              <a href="subject.html#102131">[ subject ]</a>
              <a href="author.html#102131">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
