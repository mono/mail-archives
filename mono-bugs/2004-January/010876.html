<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 52709][Nor] Changed - System.Diagnostics.Debug methods unexpected behaviour when DEBUG defined
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="010875.html">
   <LINK REL="Next"  HREF="010880.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 52709][Nor] Changed - System.Diagnostics.Debug methods unexpected behaviour when DEBUG defined
   </H1>
    <B>bugzilla-daemon@bugzilla.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com"
       TITLE="[Mono-bugs] [Bug 52709][Nor] Changed - System.Diagnostics.Debug methods unexpected behaviour when DEBUG defined">bugzilla-daemon@bugzilla.ximian.com
       </A><BR>
    <I>Fri,  9 Jan 2004 14:52:15 -0500 (EST)</I>
    <P><UL>
        <LI> Previous message: <A HREF="010875.html">[Mono-bugs] u know u are so irritated? necromancy jailer endlessly
</A></li>
        <LI> Next message: <A HREF="010880.html">[Mono-bugs] birch datsun cyclops harbinger allegro
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10876">[ date ]</a>
              <a href="thread.html#10876">[ thread ]</a>
              <a href="subject.html#10876">[ subject ]</a>
              <a href="author.html#10876">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:t7@pobox.com.">t7@pobox.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=52709">http://bugzilla.ximian.com/show_bug.cgi?id=52709</A>

--- shadow/52709	2004-01-09 14:02:49.000000000 -0500
+++ shadow/52709.tmp.14027	2004-01-09 14:52:15.000000000 -0500
@@ -89,6 +89,73 @@
 Looks to me (unsure) that DEBUG needs to be defined when the runtime
 is built for them to output anything.
 Is that the entended behaviour? i.e. that the System.Diagnostic
 classes are for diagnosing the runtime during its development rather
 than for the use of application developers?
 
+
+------- Additional Comments From <A HREF="mailto:t7@pobox.com">t7@pobox.com</A>  2004-01-09 14:52 -------
+Continuing my investigation (/confusion); The mono class lib
+documentation has a System.Diagnostics.ConditionalAttribute that has
+an example:
+
+&quot;using System;
+using System.Diagnostics;
+
+public class MyClass { 
+
+  [ConditionalAttribute(&quot;DEBUG&quot;)] 
+  public static void Display() { 
+
+    Console.WriteLine(&quot;Compiled with DEBUG&quot;); 
+  }
+}
+
+public class TestCondition { 
+
+  public static void Main() { 
+
+    Console.WriteLine(&quot;How was this compiled?&quot;); 
+    MyClass.Display(); 
+    Console.WriteLine(&quot;&lt;eop&gt;&quot;); 
+  }
+}
+      
+
+When this code is compiled with the compilation-variable DEBUG defined
+at the callsite [...]&quot;
+
+When I compile this example, it outputs the string 'Compiled with
+DEBUG' even if I don't define DEBUG - even if I add #undef DEBUG at
+the top.
+Obviously that isn't correct.
+
+However, if I change the code from
+[ConditionalAttribute(&quot;DEBUG&quot;)] to [Conditional(&quot;DEBUG&quot;)] it
+does appear to work as advertized.
+(I'm not sure what the difference is between [Conditional(&quot;DEBUG&quot;)]
+and [ConditionalAttribute(&quot;DEBUG&quot;)], if any? - are they different
+attribute classes?)
+The [Conditional(&quot;DEBUG&quot;)] form is what appears in the source of the
+Debug class methods, so I don't understand why it doesn't work.
+
+If I seperate the code into two classes
+so that I can independently compile the call and called methods
+with and without DEBUG defined in each,
+it sort-of works.
+If DEBUG is defined at the call site, it outputs.  If it isn't
+defined, it doesn't output (as expected).
+However, if I define DEBUG in the compilation unit of the
+method implementation, it always outputs, regardless of the
+definition or not of DEBUG at the call-site.
+(I'm assuming that DEBUG is only visible to the compiler? If it is
+a symbol that gets into the assembly, then perhaps that is
+understandable, as I'm compiling with
+mcs example1.cs example2.cs
+where example1.cs contains the TestCondition class and
+example2.cs contains the MyClass class)
+
+Given this behaviour, I have no idea why the calls to Debug.WriteLine
+don't output.
+
+Any ideas?
+

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="010875.html">[Mono-bugs] u know u are so irritated? necromancy jailer endlessly
</A></li>
	<LI> Next message: <A HREF="010880.html">[Mono-bugs] birch datsun cyclops harbinger allegro
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10876">[ date ]</a>
              <a href="thread.html#10876">[ thread ]</a>
              <a href="subject.html#10876">[ subject ]</a>
              <a href="author.html#10876">[ author ]</a>
         </LI>
       </UL>
</body></html>
