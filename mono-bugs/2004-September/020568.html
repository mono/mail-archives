<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 65406][Maj] Changed - TheadPool leaks RAM
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="020567.html">
   <LINK REL="Next"  HREF="020569.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 65406][Maj] Changed - TheadPool leaks RAM
   </H1>
    <B>bugzilla-daemon@bugzilla.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com"
       TITLE="[Mono-bugs] [Bug 65406][Maj] Changed - TheadPool leaks RAM">bugzilla-daemon@bugzilla.ximian.com
       </A><BR>
    <I>Tue,  7 Sep 2004 11:01:35 -0400 (EDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="020567.html">[Mono-bugs] [Bug 58334][Nor] Changed - TypeResolve handler invoked twice
</A></li>
        <LI> Next message: <A HREF="020569.html">[Mono-bugs] [Bug 65458][Wis] New - build (configure) in libgc is broken on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20568">[ date ]</a>
              <a href="thread.html#20568">[ thread ]</a>
              <a href="subject.html#20568">[ subject ]</a>
              <a href="author.html#20568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:lupus@ximian.com.">lupus@ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=65406">http://bugzilla.ximian.com/show_bug.cgi?id=65406</A>

--- shadow/65406	2004-09-06 18:06:51.000000000 -0400
+++ shadow/65406.tmp.30662	2004-09-07 11:01:35.000000000 -0400
@@ -1,14 +1,14 @@
 Bug#: 65406
 Product: Mono: Runtime
 Version: unspecified
-OS: 
+OS: unknown
 OS Details: 
-Status: NEW   
-Resolution: 
-Severity: 
+Status: RESOLVED   
+Resolution: NOTABUG
+Severity: Unknown
 Priority: Major
 Component: misc
 AssignedTo: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>                            
 ReportedBy: <A HREF="mailto:bmaurer@users.sf.net">bmaurer@users.sf.net</A>               
 QAContact: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>
 TargetMilestone: ---
@@ -42,6 +42,17 @@
 	}
 }
 
 Once all the threads are done executing, the memory usage should get very
 small. However, the memory usage stays constant at about 100 MB, meaning
 none of the arrays was feed.
+
+------- Additional Comments From <A HREF="mailto:lupus@ximian.com">lupus@ximian.com</A>  2004-09-07 11:01 -------
+The current default GC build won't release the heap memory back to the
+system, so the comment about memory not shrinking is meaningless.
+If you get rid of the sleep calls and put the QueueUserWorkItem loop
+inside the while(true) loop, you'll actually test if the threadpool
+leaks and you'll see that the amount of memory is basically constant
+(35-40 VSZ, 8 MB RSS for me). The RSS just changes by 30KB after 10
+minutes and this is a small change that could depend on many factors
+(VSZ didn't change): feel free to run the test for a few hours and
+reopen if you have any actual data.

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="020567.html">[Mono-bugs] [Bug 58334][Nor] Changed - TypeResolve handler invoked twice
</A></li>
	<LI> Next message: <A HREF="020569.html">[Mono-bugs] [Bug 65458][Wis] New - build (configure) in libgc is broken on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20568">[ date ]</a>
              <a href="thread.html#20568">[ thread ]</a>
              <a href="subject.html#20568">[ subject ]</a>
              <a href="author.html#20568">[ author ]</a>
         </LI>
       </UL>
</body></html>
