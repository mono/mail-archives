<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 59537][Nor] Changed - improve NameTable performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="020818.html">
   <LINK REL="Next"  HREF="020820.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 59537][Nor] Changed - improve NameTable performance
   </H1>
    <B>bugzilla-daemon@bugzilla.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com"
       TITLE="[Mono-bugs] [Bug 59537][Nor] Changed - improve NameTable performance">bugzilla-daemon@bugzilla.ximian.com
       </A><BR>
    <I>Thu, 16 Sep 2004 02:01:38 -0400 (EDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="020818.html">[Mono-bugs] [Bug 66060][Min] Changed - AppDomain.AssemblyResolve event not emitted
</A></li>
        <LI> Next message: <A HREF="020820.html">[Mono-bugs] [Bug 59537][Nor] Changed - improve NameTable performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20819">[ date ]</a>
              <a href="thread.html#20819">[ thread ]</a>
              <a href="subject.html#20819">[ subject ]</a>
              <a href="author.html#20819">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:mono@bitfurnace.com.">mono@bitfurnace.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=59537">http://bugzilla.ximian.com/show_bug.cgi?id=59537</A>

--- shadow/59537	2004-09-16 01:53:08.000000000 -0400
+++ shadow/59537.tmp.28943	2004-09-16 02:01:38.000000000 -0400
@@ -502,6 +502,21 @@
 the very same randomness will make those cases exceedingly unlikely.
 In practise, linear probing with random hash multipliers is extremely
 fast and the worst case results are not seen.
 
 If worst-case results are a worry, we can rehash with a new multiplier
  when exceeding long probe lengths are encountered.
+
+------- Additional Comments From <A HREF="mailto:mono@bitfurnace.com">mono@bitfurnace.com</A>  2004-09-16 02:01 -------
+Atsushi, I havent tried the unit tests (nor was I aware of them). I'll
+look into it and post here again when I can make the code pass the tests.
+
+The key to the performance improvement, in my opinion, is the memory
+efficiency of my approach. The main hashtable is an array of structs,
+each with only two fields. Everything is nice and compact and
+co-located in memory. A linear probing algorithm means that only
+consecutive memory locations need to be scanned to find matching
+hashtable entries. I found that my test was slower at 50% occupancy
+than 66% occupancy, so Im fairly sure that memory efficiency plays a role.
+
+In general less space equals more speed on modern processors, where a
+level 2 cache miss can result in 1000 instruction cycles being lost.

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="020818.html">[Mono-bugs] [Bug 66060][Min] Changed - AppDomain.AssemblyResolve event not emitted
</A></li>
	<LI> Next message: <A HREF="020820.html">[Mono-bugs] [Bug 59537][Nor] Changed - improve NameTable performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20819">[ date ]</a>
              <a href="thread.html#20819">[ thread ]</a>
              <a href="subject.html#20819">[ subject ]</a>
              <a href="author.html#20819">[ author ]</a>
         </LI>
       </UL>
</body></html>
