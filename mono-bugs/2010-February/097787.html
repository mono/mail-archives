<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 562150] abort in compute_class_bitmap while JITting a verified method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20562150%5D%20abort%20in%20compute_class_bitmap%20while%0A%20JITting%20a%20verified%20method&In-Reply-To=bug-562150-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="097786.html">
   <LINK REL="Next"  HREF="097788.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 562150] abort in compute_class_bitmap while JITting a verified method</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20562150%5D%20abort%20in%20compute_class_bitmap%20while%0A%20JITting%20a%20verified%20method&In-Reply-To=bug-562150-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 562150] abort in compute_class_bitmap while JITting a verified method">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Feb 24 18:02:22 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="097786.html">[Mono-bugs] [Bug 562150] abort in compute_class_bitmap while JITting a verified method
</A></li>
        <LI>Next message: <A HREF="097788.html">[Mono-bugs] [Bug 538714] Get &quot;The directory Hello.app does not exist&quot; when creating bundle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#97787">[ date ]</a>
              <a href="thread.html#97787">[ thread ]</a>
              <a href="subject.html#97787">[ subject ]</a>
              <a href="author.html#97787">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=562150">http://bugzilla.novell.com/show_bug.cgi?id=562150</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=562150#c3">http://bugzilla.novell.com/show_bug.cgi?id=562150#c3</A>


Thomas Philpot &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">tom.philpot at logos.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">tom.philpot at logos.com</A>

--- Comment #3 from Thomas Philpot &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">tom.philpot at logos.com</A>&gt; 2010-02-24 23:02:20 UTC ---
I believe I'm seeing the same error on Mono SVN builds post r147679. compile
the attached VarCompilerTest.cs with gmcs and run with Mono. You get the
following stack trace:

* ERROR **: compute_class_bitmap: Invalid type 13 for field
Application.FooClass`1[S]:m_source

aborting...
Stacktrace:

  at Application.VarCompilerTest.Main (string[]) &lt;0xffffffff&gt;
  at Application.VarCompilerTest.Main (string[]) &lt;0x000de&gt;
  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_void_object
(object,intptr,intptr,intptr) &lt;0x00043&gt;

Native stacktrace:

    0   mono                                0x000c17f7
mono_handle_native_sigsegv + 376
    1   mono                                0x00119510 sigabrt_signal_handler +
116
    2   libSystem.B.dylib                   0x934be9bb _sigtramp + 43
    3   ???                                 0xffffffff 0x0 + 4294967295
    4   libSystem.B.dylib                   0x9354c98d raise + 26
    5   libSystem.B.dylib                   0x93562a44 abort + 93
    6   libglib-2.0.0.dylib                 0x00459093 g_logv + 611
    7   libglib-2.0.0.dylib                 0x00459369 g_log + 41
    8   mono                                0x001c0dfe compute_class_bitmap +
1041
    9   mono                                0x001c1122
mono_class_compute_gc_descriptor + 706
    10  mono                                0x001c3032
mono_class_create_runtime_vtable + 1375
    11  mono                                0x001c2a2a mono_class_vtable_full +
211
    12  mono                                0x001c2955 mono_class_vtable + 32
    13  mono                                0x0003f3e8 mono_method_to_ir +
42755
    14  mono                                0x0000a642 mini_method_compile +
2985
    15  mono                                0x0000bdd3
mono_jit_compile_method_inner + 1084
    16  mono                                0x0000c8bb
mono_jit_compile_method_with_opt + 494
    17  mono                                0x0000ca55 mono_jit_compile_method
+ 50
    18  mono                                0x001c0927 mono_compile_method + 73
    19  mono                                0x000c2ee8 common_call_trampoline +
2497
    20  mono                                0x000c3542 mono_magic_trampoline +
170
    21  ???                                 0x00628066 0x0 + 6455398
    22  ???                                 0x006a0304 0x0 + 6947588
    23  mono                                0x0000d431 mono_jit_runtime_invoke
+ 1304
    24  mono                                0x001c541d mono_runtime_invoke +
137
    25  mono                                0x001c762d mono_runtime_exec_main +
697
    26  mono                                0x001c68f6 mono_runtime_run_main +
794
    27  mono                                0x0009834c mono_jit_exec + 200
    28  mono                                0x00098583 main_thread_handler +
555
    29  mono                                0x0009a479 mono_main + 6584
    30  mono                                0x00001c53 main + 49
    31  mono                                0x00001bf6 start + 54

Debug info from gdb:

warning: Trying to remove a section from the ordered section list that did not
exist at 0x336000.
Attaching to process 80742.
Reading symbols for shared libraries . done
Reading symbols for shared libraries
...................................................................................................
done
0x93463bf9 in read$UNIX2003 ()
  4 port# 0x1a03 0x93458916 in semaphore_wait_trap ()
  3 port# 0x1603 0x93486806 in __semwait_signal ()
  2 port# 0x1203 0x934588da in mach_msg_trap ()
* 1 port# 0x903  0x93463bf9 in read$UNIX2003 ()

Thread 4 (process 80742):
#0  0x93458916 in semaphore_wait_trap ()
#1  0x00157e0b in finalizer_thread (unused=0x0) at gc.c:1022
#2  0x001ff3f5 in start_wrapper (data=0x1307e90) at threads.c:720
#3  0x0023eef0 in thread_start_routine (args=0x181d1b8) at wthreads.c:286
#4  0x0026402d in GC_start_routine (arg=0x6f4f60) at pthread_support.c:1390
#5  0x93485fbd in _pthread_start ()
#6  0x93485e42 in thread_start ()

Thread 3 (process 80742):
#0  0x93486806 in __semwait_signal ()
#1  0x934b2441 in nanosleep$UNIX2003 ()
#2  0x002221ea in collection_thread (unused=0x0) at collection.c:34
#3  0x93485fbd in _pthread_start ()
#4  0x93485e42 in thread_start ()

Thread 2 (process 80742):
#0  0x934588da in mach_msg_trap ()
#1  0x93459047 in mach_msg ()
#2  0x00118d37 in mach_exception_thread (arg=0x0) at mini-darwin.c:127
#3  0x93485fbd in _pthread_start ()
#4  0x93485e42 in thread_start ()

Thread 1 (process 80742):
#0  0x93463bf9 in read$UNIX2003 ()
#1  0x000c19ea in mono_handle_native_sigsegv (signal=6, ctx=0xbfffdb3c) at
mini-exceptions.c:1852
#2  0x00119510 in sigabrt_signal_handler (_dummy=6, info=0xbfffdafc,
context=0xbfffdb3c) at mini-posix.c:155
#3  &lt;signal handler called&gt;
#4  0x934b9732 in __kill ()
#5  0x934b9724 in kill$UNIX2003 ()
#6  0x9354c98d in raise ()
#7  0x93562a44 in abort ()
#8  0x00459093 in g_logv ()
#9  0x00459369 in g_log ()
#10 0x001c0dfe in compute_class_bitmap (class=0x181080c, bitmap=0xbfffe114,
size=128, offset=0, max_set=0xbfffe12c, static_fields=0) at object.c:718
#11 0x001c1122 in mono_class_compute_gc_descriptor (class=0x181080c) at
object.c:943
#12 0x001c3032 in mono_class_create_runtime_vtable (domain=0x65ee58,
class=0x181080c, raise_on_error=0) at object.c:1857
#13 0x001c2a2a in mono_class_vtable_full (domain=0x65ee58, class=0x181080c,
raise_on_error=0) at object.c:1739
#14 0x001c2955 in mono_class_vtable (domain=0x65ee58, class=0x181080c) at
object.c:1710
#15 0x0003f3e8 in mono_method_to_ir (cfg=0x1834200, method=0x130bc80,
start_bblock=0x1831f14, end_bblock=0x1831fb4, return_var=0x0,
dont_inline=0x821c30, inline_args=0x0, inline_offset=0, is_virtual_call=0) at
method-to-ir.c:6229
#16 0x0000a642 in mini_method_compile (method=0x130ca80, opts=59861503,
domain=0x65ee58, run_cctors=1, compile_aot=0, parts=0) at mini.c:3832
#17 0x0000bdd3 in mono_jit_compile_method_inner (method=0x130ca80,
target_domain=0x65ee58, opt=59861503, jit_ex=0xbfffef7c) at mini.c:4448
#18 0x0000c8bb in mono_jit_compile_method_with_opt (method=0x130ca80,
opt=59861503, ex=0xbfffef7c) at mini.c:4645
#19 0x0000ca55 in mono_jit_compile_method (method=0x130ca80) at mini.c:4670
#20 0x001c0927 in mono_compile_method (method=0x130ca80) at object.c:554
#21 0x000c2ee8 in common_call_trampoline (regs=0xbffff108, code=0x6a029e
&quot;??\020??&quot;, arg=0x130ca80, tramp=0x0, vt=0x0, vtable_slot=0x0,
need_rgctx_tramp=0) at mini-trampolines.c:491
#22 0x000c3542 in mono_magic_trampoline (regs=0xbffff108, code=0x6a029e
&quot;??\020??&quot;, arg=0x130ca80, tramp=0x0) at mini-trampolines.c:613
#23 0x00628066 in ?? ()
#24 0x006a0304 in ?? ()
#25 0x0000d431 in mono_jit_runtime_invoke (method=0x82221c, obj=0x0,
params=0xbffff288, exc=0x0) at mini.c:4998
#26 0x001c541d in mono_runtime_invoke (method=0x82221c, obj=0x0,
params=0xbffff288, exc=0x0) at object.c:2653
#27 0x001c762d in mono_runtime_exec_main (method=0x82221c, args=0x6f3fc0,
exc=0x0) at object.c:3775
#28 0x001c68f6 in mono_runtime_run_main (method=0x82221c, argc=0,
argv=0xbffff4ec, exc=0x0) at object.c:3398
#29 0x0009834c in mono_jit_exec (domain=0x65ee58, assembly=0x1308810, argc=1,
argv=0xbffff4e8) at driver.c:938
#30 0x00098583 in main_thread_handler (user_data=0xbffff3d8) at driver.c:997
#31 0x0009a479 in mono_main (argc=2, argv=0xbffff4e4) at driver.c:1744
#32 0x00001c53 in main (argc=2, argv=0xbffff4e4) at main.c:34

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

Abort trap

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="097786.html">[Mono-bugs] [Bug 562150] abort in compute_class_bitmap while JITting a verified method
</A></li>
	<LI>Next message: <A HREF="097788.html">[Mono-bugs] [Bug 538714] Get &quot;The directory Hello.app does not exist&quot; when creating bundle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#97787">[ date ]</a>
              <a href="thread.html#97787">[ thread ]</a>
              <a href="subject.html#97787">[ subject ]</a>
              <a href="author.html#97787">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
