<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 581679] New: System.InvalidCastException: Cannot cast from source type to destination type.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20581679%5D%20New%3A%20System.InvalidCastException%3A%20Cannot%0A%20cast%20from%20source%20type%20to%20destination%20type.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="097696.html">
   <LINK REL="Next"  HREF="097684.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 581679] New: System.InvalidCastException: Cannot cast from source type to destination type.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20581679%5D%20New%3A%20System.InvalidCastException%3A%20Cannot%0A%20cast%20from%20source%20type%20to%20destination%20type.&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 581679] New: System.InvalidCastException: Cannot cast from source type to destination type.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Feb 22 02:53:10 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="097696.html">[Mono-bugs] [Bug 581666] Crash with UIAlertView in latest beta	1.4.100
</A></li>
        <LI>Next message: <A HREF="097684.html">[Mono-bugs] [Bug 581679] System.InvalidCastException: Cannot cast from source type to destination type.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#97683">[ date ]</a>
              <a href="thread.html#97683">[ thread ]</a>
              <a href="subject.html#97683">[ subject ]</a>
              <a href="author.html#97683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=581679">http://bugzilla.novell.com/show_bug.cgi?id=581679</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=581679#c0">http://bugzilla.novell.com/show_bug.cgi?id=581679#c0</A>


           Summary: System.InvalidCastException: Cannot cast from source
                    type to destination type.
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.6.x
          Platform: x86
        OS/Version: openSUSE 11.2
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">Kulichkin at kvy.com.ua</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=343712)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=343712">http://bugzilla.novell.com/attachment.cgi?id=343712</A>)
The full project in Visual Studio 2010

User-Agent:       Mozilla/5.0 (X11; U; Linux i686; ru; rv:1.9.1.7)
Gecko/20091222 SUSE/3.5.7-1.1.1 Firefox/3.5.7

I created the project in Visual Studio 2010 for MS Windows. This is a windows
form, which must work in .Net Framework 2.0. That form has two DataGridView
objects. At start the program creates two tables (DataTable), adds them to 
DataSet object and links those tables. The program works in Windows 7 and XP
without any problems. But when I moved it to openSUSE 11.2 with Mono 2.6.1:

Mono JIT compiler version 2.6.1 (tarball Thu Dec 17 17:24:22 UTC 2009)
Copyright (C) 2002-2008 Novell, Inc and Contributors. www.mono-project.com
        TLS:           __thread
        GC:            Included Boehm (with typed GC and Parallel Mark)
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  x86
        Disabled:      none

the program crashed at start. The full project is attached to this report.      

Reproducible: Always

Steps to Reproduce:
1. Run program  

mono KVYadmin.exe


Actual Results:  
After start I get the exception:

SUSE32:/home/d # mono KVYadmin.exe

Unhandled Exception: System.InvalidCastException: Cannot cast from source type
to destination type.
  at System.Data.DataViewManager.CollectionToListChangeEventArgs
(System.ComponentModel.CollectionChangeEventArgs e) [0x00000] in &lt;filename
unknown&gt;:0
  at System.Data.DataViewManager.RelationCollectionChanged (System.Object
sender, System.ComponentModel.CollectionChangeEventArgs e) [0x00000] in
&lt;filename unknown&gt;:0
  at System.Data.DataRelationCollection.OnCollectionChanged
(System.ComponentModel.CollectionChangeEventArgs ccevent) [0x00000] in
&lt;filename unknown&gt;:0
  at System.Data.DataRelationCollection.Add (System.Data.DataRelation relation)
[0x00000] in &lt;filename unknown&gt;:0
  at System.Data.DataRelationCollection.Add (System.String name,
System.Data.DataColumn parentColumn, System.Data.DataColumn childColumn)
[0x00000] in &lt;filename unknown&gt;:0
  at KVYadmin.KVYadmin..ctor () [0x00000] in &lt;filename unknown&gt;:0
  at (wrapper remoting-invoke-with-check) KVYadmin.KVYadmin:.ctor ()
  at KVYadmin.Program.Main () [0x00000] in &lt;filename unknown&gt;:0



Expected Results:  
The windows form with two tables into two DataGridView objects.

The crash met in KVYadmin at the following string:

 m_dataSet.Relations.Add(m_relationNameTables,
m_dataSet.Tables[m_nameHostsTable].Columns[m_colMACHostsTable],
               
m_dataSet.Tables[m_nameSitesTable].Columns[m_colMACSitesTable]);

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="097696.html">[Mono-bugs] [Bug 581666] Crash with UIAlertView in latest beta	1.4.100
</A></li>
	<LI>Next message: <A HREF="097684.html">[Mono-bugs] [Bug 581679] System.InvalidCastException: Cannot cast from source type to destination type.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#97683">[ date ]</a>
              <a href="thread.html#97683">[ thread ]</a>
              <a href="subject.html#97683">[ subject ]</a>
              <a href="author.html#97683">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
