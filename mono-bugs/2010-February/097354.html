<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 578873] New: Banshee and Tomboy crash with AOTed	Glib#
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20578873%5D%20New%3A%20Banshee%20and%20Tomboy%20crash%20with%20AOTed%0A%09Glib%23&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="097744.html">
   <LINK REL="Next"  HREF="097355.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 578873] New: Banshee and Tomboy crash with AOTed	Glib#</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20578873%5D%20New%3A%20Banshee%20and%20Tomboy%20crash%20with%20AOTed%0A%09Glib%23&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 578873] New: Banshee and Tomboy crash with AOTed	Glib#">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Feb 10 15:48:20 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="097744.html">[Mono-bugs] [Bug 578863] Formview ignores PagerSettings when using Gridview paging
</A></li>
        <LI>Next message: <A HREF="097355.html">[Mono-bugs] [Bug 578880] New: System.Web.Hosting.HostingEnvironment's IsHosted, ApplicationID and SiteName properties not provided for a hosted environment
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#97354">[ date ]</a>
              <a href="thread.html#97354">[ thread ]</a>
              <a href="subject.html#97354">[ subject ]</a>
              <a href="author.html#97354">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=578873">http://bugzilla.novell.com/show_bug.cgi?id=578873</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=578873#c0">http://bugzilla.novell.com/show_bug.cgi?id=578873#c0</A>


           Summary: Banshee and Tomboy crash with AOTed Glib#
    Classification: Mono
           Product: Mono: Runtime
           Version: 2.6.x
          Platform: x86-64
        OS/Version: openSUSE 11.2
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: JIT
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhutchinson at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Using an AOTed glib-sharp.dll on Mono 2.6.1 causes Tomboy and Banshee to crash
when they are run. The error is:

ERROR:class.c:3669:mono_class_setup_vtable_general: assertion failed: (cur_slot
== class-&gt;vtable_size)

Program received signal SIGABRT, Aborted.
0x00007ffff6d6d4e5 in raise (sig=&lt;value optimized out&gt;) at
./nptl/sysdeps/unix/sysv/linux/raise.c:64
64    ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
    in ../nptl/sysdeps/unix/sysv/linux/raise.c
(gdb) t a a bt

Thread 4 (Thread 0x7ffff57eb910 (LWP 17823)):
#0  0x00007ffff6d6d4e5 in raise (sig=&lt;value optimized out&gt;) at
./nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007ffff6d6e9b0 in abort () at abort.c:88
#2  0x00007ffff797577f in g_assertion_message () from
/usr/lib64/libglib-2.0.so.0
#3  0x00007ffff7975cf0 in g_assertion_message_expr () from
/usr/lib64/libglib-2.0.so.0
#4  0x00000000004e849e in mono_class_setup_vtable_general
(class=&quot;GLib.GException&quot;, overrides=&lt;value optimized out&gt;, onum=28) at
class.c:3669
#5  0x00000000004e89cc in mono_class_setup_vtable (class=&quot;GLib.GException&quot;) at
class.c:2897
#6  0x00000000004ee83b in mono_class_get_vtable_entry (class=&quot;GLib.GException&quot;,
offset=2) at class.c:1914
#7  0x000000000048a331 in mono_magic_trampoline (regs=0x7ffff57eadc8,
code=0x40023364 &quot;H\307E&quot;, &lt;incomplete sequence \310&gt;, arg=&lt;value optimized
out&gt;, 
    tramp=&lt;value optimized out&gt;) at mini-trampolines.c:295
#8  0x0000000040002168 in &lt;generic_trampoline&gt; ()
#9  0x0000000040023364 in (wrapper runtime-invoke)
object:runtime_invoke_virtual_void__this__ (param0=GLib.GException = {...}, 
    param1=&lt;value optimized out&gt;, param2=140737312108296, param3=&lt;value
optimized out&gt;) at xdb.il:1918
#10 0x00000000004fd1b0 in mono_gc_run_finalize (obj=&lt;value optimized out&gt;,
data=&lt;value optimized out&gt;) at gc.c:218
#11 0x00000000005b2c78 in GC_invoke_finalizers () at finalize.c:787
#12 0x00000000004fd368 in finalizer_thread (unused=&lt;value optimized out&gt;) at
gc.c:1048
#13 0x0000000000572595 in start_wrapper (data=&lt;value optimized out&gt;) at
threads.c:662
#14 0x00000000005a2663 in thread_start_routine (args=0x956288) at
wthreads.c:286
#15 0x00000000005bf031 in GC_start_routine (arg=&lt;value optimized out&gt;) at
pthread_support.c:1390
#16 0x00007ffff72f165d in start_thread (arg=&lt;value optimized out&gt;) at
pthread_create.c:297
#17 0x00007ffff6e0c14d in clone () at
./sysdeps/unix/sysv/linux/x86_64/clone.S:112
#18 0x0000000000000000 in ?? ()

Thread 3 (Thread 0x7ffff7fc3910 (LWP 17822)):
#0  0x00007ffff72f9341 in nanosleep () from /lib64/libpthread.so.0
#1  0x0000000000589ab2 in collection_thread (unused=&lt;value optimized out&gt;) at
collection.c:34
#2  0x00007ffff72f165d in start_thread (arg=&lt;value optimized out&gt;) at
pthread_create.c:297
#3  0x00007ffff6e0c14d in clone () at
./sysdeps/unix/sysv/linux/x86_64/clone.S:112
#4  0x0000000000000000 in ?? ()

Thread 2 (Thread 0x7ffff6b0c910 (LWP 17821)):
#0  pthread_cond_wait@@GLIBC_2.3.2 () at
./nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:261
#1  0x00000000005bdb53 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005b82bd in GC_help_marker (my_mark_no=5) at mark.c:1116
#3  0x00000000005be95c in GC_mark_thread (id=&lt;value optimized out&gt;) at
pthread_support.c:548
#4  0x00007ffff72f165d in start_thread (arg=&lt;value optimized out&gt;) at
pthread_create.c:297
#5  0x00007ffff6e0c14d in clone () at
./sysdeps/unix/sysv/linux/x86_64/clone.S:112
#6  0x0000000000000000 in ?? ()

Thread 1 (Thread 0x7ffff7fba730 (LWP 17818)):
#0  __lll_lock_wait () at
./nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:136
#1  0x00007ffff72f3f50 in _L_lock_1014 () from /lib64/libpthread.so.0
#2  0x00007ffff72f3db1 in __pthread_mutex_lock (mutex=0x8b51a8) at
pthread_mutex_lock.c:82
#3  0x0000000000510e4e in mono_loader_lock () at loader.c:2002
#4  0x00000000005115b0 in cache_memberref_sig (image=0x8b51a8, sig_idx=128,
sig=0xefced8) at loader.c:394
#5  0x0000000000512250 in method_from_memberref (image=0xece4c0, idx=&lt;value
optimized out&gt;, typespec_context=&lt;value optimized out&gt;, 
    used_context=&lt;value optimized out&gt;) at loader.c:942
#6  0x00000000005122fe in mono_get_method_from_token (image=0x8b51a8,
token=167772457, klass=0x0, context=0x0, used_context=0x8b51a8) at
loader.c:1477
#7  0x000000000051289a in mono_get_method_full (image=0xece4c0,
token=167772457, klass=0x0, context=&lt;value optimized out&gt;) at loader.c:1591
#8  0x000000000042841b in mini_get_method_allow_open (context=&lt;value optimized
out&gt;, token=&lt;value optimized out&gt;, m=&lt;value optimized out&gt;, 
    klass=&lt;value optimized out&gt;) at method-to-ir.c:4600
#9  mini_get_method (context=&lt;value optimized out&gt;, token=&lt;value optimized
out&gt;, m=&lt;value optimized out&gt;, klass=&lt;value optimized out&gt;)
    at method-to-ir.c:4608
#10 0x0000000000444701 in mono_method_to_ir (cfg=0xee5c30, method=&lt;value
optimized out&gt;, start_bblock=&lt;value optimized out&gt;, 
    end_bblock=&lt;value optimized out&gt;, return_var=&lt;value optimized out&gt;,
dont_inline=&lt;value optimized out&gt;, inline_args=0x0, inline_offset=0, 
    is_virtual_call=0) at method-to-ir.c:6228
#11 0x000000000041d377 in mini_method_compile
(method=&quot;Mono.Addins.Serialization.BinaryXmlReader:ReadValueInternal ()&quot;,
opts=&lt;value optimized out&gt;, 
    domain=&lt;value optimized out&gt;, run_cctors=&lt;value optimized out&gt;,
compile_aot=&lt;value optimized out&gt;, parts=&lt;value optimized out&gt;) at mini.c:3401
#12 0x000000000041ea04 in mono_jit_compile_method_inner (jit_ex=&lt;value
optimized out&gt;, opt=&lt;value optimized out&gt;, target_domain=&lt;value optimized out&gt;, 
    method=&quot;Mono.Addins.Serialization.BinaryXmlReader:ReadValueInternal ()&quot;) at
mini.c:4146
#13 mono_jit_compile_method_with_opt (jit_ex=&lt;value optimized out&gt;, opt=&lt;value
optimized out&gt;, target_domain=&lt;value optimized out&gt;, method=
    &quot;Mono.Addins.Serialization.BinaryXmlReader:ReadValueInternal ()&quot;) at
mini.c:4338
#14 0x000000000041f37d in mono_jit_compile_method (method=Traceback (most
recent call last):
  File &quot;/usr/bin/mono-gdb.py&quot;, line 150, in to_string
    class_name = stringify_class_name (klass [&quot;name_space&quot;].string (), klass
[&quot;name&quot;].string ())
RuntimeError: Cannot access memory at address 0x1000045e7
) at mini.c:4363
#15 0x0000000000489f89 in mono_magic_trampoline (regs=0x7fffffffd398, code=
    0x4002d864
&quot;L\213\064$L\213|$\bH\203\304\030\303\350\211G\375\377\004\200\315&quot;,
&lt;incomplete sequence \357&gt;, arg=&lt;value optimized out&gt;, 
    tramp=&lt;value optimized out&gt;) at mini-trampolines.c:476
#16 0x0000000040002168 in &lt;generic_trampoline&gt; ()
#17 0x000000004002d864 in ?? ()
#18 0x00007ffff440fc00 in ?? ()
#19 0x00007ffff440fc00 in ?? ()
#20 0x00007fffffffd530 in ?? ()
#21 0x000000004002d7e8 in ?? ()
#22 0x00007ffff440fc00 in ?? ()
#23 0x000000004002d7d0 in ?? ()
#24 0x00007fffffffd530 in ?? ()
#25 0x000000004002d7b5 in ?? ()
#26 0x00007ffff40cf750 in ?? ()
#27 0x00007ffff442ce88 in ?? ()
#28 0x00007fffffffd530 in ?? ()
#29 0x000000004002d016 in ?? ()
#30 0x00007fffffffd5a0 in ?? ()
#31 0x00007ffff40cf5b0 in ?? ()
#32 0x00007ffff440fc00 in ?? ()
#33 0x00007fffffffd570 in ?? ()
#34 0x0000000000000000 in ?? ()
Current language:  auto
The current source language is &quot;auto; currently asm&quot;.
Current language:  auto
The current source language is &quot;auto; currently c&quot;.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="097744.html">[Mono-bugs] [Bug 578863] Formview ignores PagerSettings when using Gridview paging
</A></li>
	<LI>Next message: <A HREF="097355.html">[Mono-bugs] [Bug 578880] New: System.Web.Hosting.HostingEnvironment's IsHosted, ApplicationID and SiteName properties not provided for a hosted environment
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#97354">[ date ]</a>
              <a href="thread.html#97354">[ thread ]</a>
              <a href="subject.html#97354">[ subject ]</a>
              <a href="author.html#97354">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
