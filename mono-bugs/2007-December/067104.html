<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 349688] New: SocketFlags.Partial is not implemented correctly in Linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20349688%5D%20New%3A%20SocketFlags.Partial%20is%20not%0A%20implemented%20correctly%20in%20Linux&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067103.html">
   <LINK REL="Next"  HREF="067105.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 349688] New: SocketFlags.Partial is not implemented correctly in Linux</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20349688%5D%20New%3A%20SocketFlags.Partial%20is%20not%0A%20implemented%20correctly%20in%20Linux&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 349688] New: SocketFlags.Partial is not implemented correctly in Linux">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Dec 18 23:51:01 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="067103.html">[Mono-bugs] [Bug 323144] [PATCH] Runtime crashes with program that pinvokes a generic signature
</A></li>
        <LI>Next message: <A HREF="067105.html">[Mono-bugs] [Bug 349688] SocketFlags.Partial is not implemented correctly in Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67104">[ date ]</a>
              <a href="thread.html#67104">[ thread ]</a>
              <a href="subject.html#67104">[ subject ]</a>
              <a href="author.html#67104">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=349688">https://bugzilla.novell.com/show_bug.cgi?id=349688</A>


           Summary: SocketFlags.Partial is not implemented correctly in
                    Linux
           Product: Mono: Class Libraries
           Version: 1.2.6
          Platform: Other
        OS/Version: Linux
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andrew at ishiboo.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
          Found By: Customer


There are a few issues with SocketFlags.Partial. Mono maps this flag to
MSG_MORE in Linux. MSG_MORE is not the same thing as Partial. Partial is
described as a short read/write. MSG_MORE is a buffered read/write which is
enables TCP and UDP 'corking' on Linux. (see man 7 tcp for TCP_CORK)

Assume a 1mb buffer of data. Under Windows, if Send() is called with Partial
specified, it may send 100k (arbitrary number) and then the app could call
Send() again with the rest, or possibly decide to &quot;timeout&quot; (note: 100k was
sent on the wire). Under Linux, if Send() is called with the same buffer and
the Partial flag, it will never send the entire 1mb (or any portion of it)
unless Send() is called again without the Partial flag. That can never produce
the same behavior.

Additionally, Windows ignores the Partial flag on UDP sockets. It always sends
immediately (no exception, no error). Under Linux, UDP supports corking and
because Partial == MSG_MORE, it enables corking when used. This deviates from
the Windows behavior.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067103.html">[Mono-bugs] [Bug 323144] [PATCH] Runtime crashes with program that pinvokes a generic signature
</A></li>
	<LI>Next message: <A HREF="067105.html">[Mono-bugs] [Bug 349688] SocketFlags.Partial is not implemented correctly in Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67104">[ date ]</a>
              <a href="thread.html#67104">[ thread ]</a>
              <a href="subject.html#67104">[ subject ]</a>
              <a href="author.html#67104">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
