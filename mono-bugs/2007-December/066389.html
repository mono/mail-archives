<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 348193] New: Mono is incompatible with Boehm GC 7.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20348193%5D%20New%3A%20Mono%20is%20incompatible%20with%20Boehm%20GC%207.0&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066405.html">
   <LINK REL="Next"  HREF="066399.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 348193] New: Mono is incompatible with Boehm GC 7.0</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20348193%5D%20New%3A%20Mono%20is%20incompatible%20with%20Boehm%20GC%207.0&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 348193] New: Mono is incompatible with Boehm GC 7.0">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Dec 12 15:14:47 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="066405.html">[Mono-bugs] [Bug 348192] Stress testing interop will cause it to	crash.
</A></li>
        <LI>Next message: <A HREF="066399.html">[Mono-bugs] [Bug 348193] Mono is incompatible with Boehm GC 7.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66389">[ date ]</a>
              <a href="thread.html#66389">[ thread ]</a>
              <a href="subject.html#66389">[ subject ]</a>
              <a href="author.html#66389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=348193">https://bugzilla.novell.com/show_bug.cgi?id=348193</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andreas.faerber at web.de</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=348193#c324005">https://bugzilla.novell.com/show_bug.cgi?id=348193#c324005</A>

           Summary: Mono is incompatible with Boehm GC 7.0
           Product: Mono: Runtime
           Version: SVN
          Platform: x86-64
        OS/Version: Solaris 10
            Status: NEW
          Severity: Enhancement
          Priority: P5 - None
         Component: GC
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andreas.faerber at web.de</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
            Blocks: 324005
          Found By: ---


Compiling Mono against a system-installed Boehm GC 7.0 fails with:

 gcc -m64 -DHAVE_CONFIG_H -I. -I../../../../mono/mono/metadata -I../..
-I../../../../mono -I../../../../mono/mono -D_REENTRANT -I/usr/include/glib-2.0
-I/usr/lib/amd64/glib-2.0/include -DMONO_BINDIR=\&quot;/opt/mono/bin/amd64/\&quot;
-DMONO_ASSEMBLIES=\&quot;/opt/mono/lib\&quot; -DMONO_CFG_DIR=\&quot;/opt/mono/etc\&quot;
-I/opt/mono-gc/include -DGC_SOLARIS_THREADS -DGC_SOLARIS_PTHREADS -D_REENTRANT
-D_POSIX_PTHREAD_SEMANTICS -DUSE_MMAP -DUSE_MUNMAP -DPLATFORM_SOLARIS
-D_XOPEN_SOURCE=500 -D__EXTENSIONS__ -D_XOPEN_SOURCE_EXTENDED=1 -g -O2
-fno-strict-aliasing -Wdeclaration-after-statement -g -Wall -Wunused
-Wmissing-prototypes -Wmissing-declarations -Wstrict-prototypes
-Wmissing-prototypes -Wnested-externs -Wpointer-arith -Wno-cast-qual
-Wcast-align -Wwrite-strings -mno-tls-direct-seg-refs -Wno-char-subscripts -MT
object.lo -MD -MP -MF .deps/object.Tpo -c
./../../../mono/mono/metadata/object.c  -fPIC -DPIC -o .libs/object.o
./../../../mono/mono/metadata/object.c: In function
`mono_class_compute_gc_descriptor':
./../../../mono/mono/metadata/object.c:870: error: `GC_gcj_fast_malloc'
undeclared (first use in this function)
./../../../mono/mono/metadata/object.c:870: error: (Each undeclared identifier
is reported only once
./../../../mono/mono/metadata/object.c:870: error: for each function it
appears in.)
gmake[3]: *** [object.lo] Error 1
gmake[3]: Leaving directory
`/export/home/andreas/Mono/amd64/mono/mono/metadata'


GC_gcj_fast_malloc is only available in Boehm GC 6.x. Yet neither Boehm GC 6.8
nor Mono's libgc support Solaris/amd64. A backport of the relevant
configuration sections to libgc was proposed as part of
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=324005">https://bugzilla.novell.com/show_bug.cgi?id=324005</A>
but rejected at the time, and the Wiki tells users to &quot;install the latest Boehm
GC from the Boehm web site&quot;, with the latest being 7.0 since July.
<A HREF="http://www.mono-project.com/Mono:Solaris">http://www.mono-project.com/Mono:Solaris</A>
(btw it should read --with-gc=boehm instead of --with-gc=system)

The above Solaris/amd64 issue #324005 could be closed if we either update libgc
or change Mono's use of Boehm GC to not rely on dropped functions. The first
solution sounds easiest, while the latter would apply to all platforms.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>






















































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066405.html">[Mono-bugs] [Bug 348192] Stress testing interop will cause it to	crash.
</A></li>
	<LI>Next message: <A HREF="066399.html">[Mono-bugs] [Bug 348193] Mono is incompatible with Boehm GC 7.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66389">[ date ]</a>
              <a href="thread.html#66389">[ thread ]</a>
              <a href="subject.html#66389">[ subject ]</a>
              <a href="author.html#66389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
