<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 349073] New: Application.Exit does not trigger	FormClosing event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20349073%5D%20New%3A%20Application.Exit%20does%20not%20trigger%0A%09FormClosing%20event&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066950.html">
   <LINK REL="Next"  HREF="066964.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 349073] New: Application.Exit does not trigger	FormClosing event</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20349073%5D%20New%3A%20Application.Exit%20does%20not%20trigger%0A%09FormClosing%20event&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 349073] New: Application.Exit does not trigger	FormClosing event">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Dec 16 03:42:23 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="066950.html">[Mono-bugs] [Bug 328398] SqlDbType.Image is not supported
</A></li>
        <LI>Next message: <A HREF="066964.html">[Mono-bugs] [Bug 349073] Application.Exit does not trigger	FormClosing event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66951">[ date ]</a>
              <a href="thread.html#66951">[ thread ]</a>
              <a href="subject.html#66951">[ subject ]</a>
              <a href="author.html#66951">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=349073">https://bugzilla.novell.com/show_bug.cgi?id=349073</A>


           Summary: Application.Exit does not trigger FormClosing event
           Product: Mono: Class Libraries
           Version: 1.2.5
          Platform: i686
        OS/Version: Linux
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">ai2097 at users.sourceforge.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
          Found By: Community of Practice


When calling Application.Exit() in a WinForms based application, the
FormClosing event is not fired on active forms.

Steps to reproduce:

1. Compile the following (gmcs -target:winexe -r:System.Windows.Forms
&lt;filename&gt;):

using System;
using System.Windows.Forms;

namespace Bug {
    public class Form1 : Form
    {   
        public Form1()
        {   
            this.FormClosing += ClosingHandler;
            Button quit = new Button();
            quit.Text = &quot;Exit&quot;;
            quit.Click += delegate(Object sender, EventArgs e)
                { Application.Exit(); };
            this.Controls.Add(quit);
        }

        public void ClosingHandler(Object sender, FormClosingEventArgs e)
        {   
            string message = &quot;Are you sure?&quot;;
            string caption = &quot;Confirm exit&quot;;
            MessageBoxButtons type = MessageBoxButtons.YesNo;
            MessageBoxIcon icon = MessageBoxIcon.Exclamation;
            DialogResult result = MessageBox.Show(message, caption, type,
icon);
            if(DialogResult.No == result)
            {   
                e.Cancel = true;
            }
        }
    }

    public class Bug
    {   
        public static void Main()
        {   
            Application.Run(new Form1());
        }
    }
}

2. Run the application via mono


Expected:

  Closing the window via the &quot;Exit&quot; button should trigger the dialog, and
answering &quot;no&quot; to the dialog should prevent the application from exiting.
Identical behavior should be observed if the window is closed via the window
manager.


Actual:

  Closing the window via the &quot;Exit&quot; button causes the application to exit
immediately. The expected behavior does occur when the window is closed via the
window manager.


Other notes:

  Because the FormClosing event is not fired when Application.Exit is called,
no opportunity is given to prevent the application from exiting. Likewise,
clean up code that depends on this behavior to save state will not be run if
the application exits in this manner, which is why this bug is being filed with
a &quot;major&quot; priority. The expected behavior is implied by the presence of the
CloseReason.ApplicationExitCall enumeration value, and can be confirmed on the
Microsoft implementation of .NET 2.0.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>












































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066950.html">[Mono-bugs] [Bug 328398] SqlDbType.Image is not supported
</A></li>
	<LI>Next message: <A HREF="066964.html">[Mono-bugs] [Bug 349073] Application.Exit does not trigger	FormClosing event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66951">[ date ]</a>
              <a href="thread.html#66951">[ thread ]</a>
              <a href="subject.html#66951">[ subject ]</a>
              <a href="author.html#66951">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
