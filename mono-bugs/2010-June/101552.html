<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 616131] New: SIGSEGV when downloading data from web services into UIWebView
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20616131%5D%20New%3A%20SIGSEGV%20when%20downloading%20data%20from%0A%20web%20services%20into%20UIWebView&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="101680.html">
   <LINK REL="Next"  HREF="101553.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 616131] New: SIGSEGV when downloading data from web services into UIWebView</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20616131%5D%20New%3A%20SIGSEGV%20when%20downloading%20data%20from%0A%20web%20services%20into%20UIWebView&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 616131] New: SIGSEGV when downloading data from web services into UIWebView">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Jun 21 22:07:03 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="101680.html">[Mono-bugs] [Bug 616121] Need to be able to construct CGContext from IntPtr to implement layer drawing
</A></li>
        <LI>Next message: <A HREF="101553.html">[Mono-bugs] [Bug 616131] SIGSEGV when downloading data from web services into UIWebView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101552">[ date ]</a>
              <a href="thread.html#101552">[ thread ]</a>
              <a href="subject.html#101552">[ subject ]</a>
              <a href="author.html#101552">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=616131">http://bugzilla.novell.com/show_bug.cgi?id=616131</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=616131#c0">http://bugzilla.novell.com/show_bug.cgi?id=616131#c0</A>


           Summary: SIGSEGV when downloading data from web services into
                    UIWebView
    Classification: Mono
           Product: MonoTouch
           Version: unspecified
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Runtime
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">stratfordholdings at riddlepop.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Development
           Blocker: ---


Description of Problem:
A SIGSEGV is created the second time data is downloaded from a web service into
a UIWebView.

This only happens on the device, not on the simulator.

Steps to reproduce the problem:
1. Create a project that has a tableview with 3 items in it.
2. Upon clicking a tableview item, show an interface with a UIWebView in it.
3. On the ViewDidLoad of the UIWebView interface, download file data from a web
service. And load it into the webview with this code:
        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();
            TestService.Service1 serv = new TestService.Service1();

            NSData d = NSData.FromArray(serv.GetData().data);
            webView.LoadData(d,&quot;application/pdf&quot;, &quot;&quot;, NSUrl.FromString(&quot;&quot;));
        }
4. Use the back button on the UIWebView interface and then select another item
from the tableview that makes the same call.
5. App Crashes.

Actual Results:
App consistently crashes on the second (or very rarely third) time opening the
UIWebView interface.

Expected Results:
Consistently displaying the data in the UIWebView, no matter how many times the
data is downloaded from the web service and displayed in the UIWebView.

How often does this happen? 
Consistently

Additional Information:
This error does not occur if I use NSData.FromURL or any other non-webservice
call.

mtouch 2.0.6.6731
MonoDevelop 2.4
iPhone OS 3.1.3

Native stacktrace:

    0   UIWebViewBug                        0x004cc018
mono_handle_native_sigsegv + 404
    1   UIWebViewBug                        0x004a773c
mono_sigsegv_signal_handler + 256
    2   libSystem.B.dylib                   0x33b3b7f3 _sigtramp + 34
    3   CoreFoundation                      0x323d69ed CFRelease + 104
    4   WebCore                             0x302d056c
_ZN7WebCore12SharedBufferD2Ev + 28
    5   WebCore                             0x301fac8c
_ZN7WebCore14DocumentLoaderD2Ev + 2376
    6   WebKit                              0x3111bdfc
_ZN20WebDocumentLoaderMacD0Ev + 196
    7   WebCore                             0x301fcf78
_ZN7WebCore11FrameLoader16detachFromParentEv + 100
    8   WebKit                              0x31121aec -[WebView(WebPrivate)
_close] + 236
    9   WebKit                              0x311219d8 -[WebView close] + 24
    10  WebKit                              0x31121940 -[WebView dealloc] + 68
    11  CoreFoundation                      0x323d7641 -[NSObject release] + 34
    12  WebCore                             0x3018dd78
_ZL33WebCoreObjCDeallocOnWebThreadImplP11objc_objectP13objc_selector + 84
    13  WebCore                             0x301cf558
_ZL28HandleWebThreadReleaseSourcePv + 148
    14  CoreFoundation                      0x323f4f49 CFRunLoopRunSpecific +
796
    15  CoreFoundation                      0x323f4c1f CFRunLoopRunInMode + 50
    16  WebCore                             0x3018c1dc _ZL12RunWebThreadPv +
420
    17  libSystem.B.dylib                   0x33ad8788 _pthread_body + 28

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="101680.html">[Mono-bugs] [Bug 616121] Need to be able to construct CGContext from IntPtr to implement layer drawing
</A></li>
	<LI>Next message: <A HREF="101553.html">[Mono-bugs] [Bug 616131] SIGSEGV when downloading data from web services into UIWebView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101552">[ date ]</a>
              <a href="thread.html#101552">[ thread ]</a>
              <a href="subject.html#101552">[ subject ]</a>
              <a href="author.html#101552">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
