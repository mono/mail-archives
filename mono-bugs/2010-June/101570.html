<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 616416] New: Array.Sort() doesnt sort
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20616416%5D%20New%3A%20Array.Sort%28%29%20doesnt%20sort&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="101632.html">
   <LINK REL="Next"  HREF="101571.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 616416] New: Array.Sort() doesnt sort</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20616416%5D%20New%3A%20Array.Sort%28%29%20doesnt%20sort&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 616416] New: Array.Sort() doesnt sort">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Jun 22 15:27:11 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="101632.html">[Mono-bugs] [Bug 616415] Autoupdate on the beta should not require an immediate update
</A></li>
        <LI>Next message: <A HREF="101571.html">[Mono-bugs] [Bug 616416] Array.Sort() doesnt sort
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101570">[ date ]</a>
              <a href="thread.html#101570">[ thread ]</a>
              <a href="subject.html#101570">[ subject ]</a>
              <a href="author.html#101570">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=616416">http://bugzilla.novell.com/show_bug.cgi?id=616416</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=616416#c0">http://bugzilla.novell.com/show_bug.cgi?id=616416#c0</A>


           Summary: Array.Sort() doesnt sort
    Classification: Mono
           Product: Mono: Runtime
           Version: SVN
          Platform: 64bit
        OS/Version: RHEL 5
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">srfcanada at hotmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.2; WOW64;
Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152)

The given sample test gives different results under windows .net and mono. Note
that it seems to have something to do with IComparer. If you explicitly change
the comparer to null in the Sort method it will work but in both cases the
comparer is null which is the really strange thing.

Reproducible: Always

Steps to Reproduce:
Run the following Test under windows .net and mono it will generate different
results:

    public class SortClass&lt;T&gt; where T : IComparable&lt;T&gt;
      {


         public void Sort(T[] values, IComparer comparer)
         {
            T[] doubleValues = new T[11];

            doubleValues[0] = values[0];
            doubleValues[1] = values[1];
            doubleValues[2] = values[2];
            doubleValues[3] = values[3];
            doubleValues[4] = values[4];
            doubleValues[5] = values[5];
            doubleValues[6] = values[6];
            doubleValues[7] = values[7];
            doubleValues[8] = values[8];
            doubleValues[9] = values[9];
            doubleValues[10] = values[10];

            int[] indices = new int[11];
            indices[0] = 0;
            indices[1] = 1;
            indices[2] = 2;
            indices[3] = 3;
            indices[4] = 4;
            indices[5] = 5;
            indices[6] = 6;
            indices[7] = 7;
            indices[8] = 8;
            indices[9] = 9;
            indices[10] = 10;

            //the comparer passed in is null 
            //try changing the comparer to null and see how the sorting is
changed even though 
            //both times the comparer is really null, kind of strange
            Array.Sort(doubleValues, indices, comparer);
            foreach (T doubleValue in doubleValues)
            {
               Console.WriteLine(&quot;DoubleValue: &quot; + doubleValue);
            }

            foreach (int index in indices)
            {
               Console.WriteLine(&quot;IndexValue: &quot; + index);
            }

         }
      }

      [Test]
      public void testSort()
      {
         double[] doubleValues = new double[11];
         doubleValues[0] = 0.221788066253601;
         doubleValues[1] = 0.497278285809481;
         doubleValues[2] = 0.100565033883643;
         doubleValues[3] = 0.0433309347749905;
         doubleValues[4] = 0.00476726438463812;
         doubleValues[5] = 0.1354609735456;
         doubleValues[6] = 0.57690356588135;
         doubleValues[7] = 0.466239434334826;
         doubleValues[8] = 0.409741461978934;
         doubleValues[9] = 0.0112412763949565;
         doubleValues[10] = 0.668704347674307;

         SortClass&lt;double&gt; sortClass = new SortClass&lt;double&gt;();
         sortClass.Sort(doubleValues,null);


      }

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="101632.html">[Mono-bugs] [Bug 616415] Autoupdate on the beta should not require an immediate update
</A></li>
	<LI>Next message: <A HREF="101571.html">[Mono-bugs] [Bug 616416] Array.Sort() doesnt sort
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101570">[ date ]</a>
              <a href="thread.html#101570">[ thread ]</a>
              <a href="subject.html#101570">[ subject ]</a>
              <a href="author.html#101570">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
