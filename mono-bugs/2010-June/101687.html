<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 616463] SIGSEGV in common_call_trampoline (with	test case)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20616463%5D%20SIGSEGV%20in%20common_call_trampoline%20%28with%0A%09test%20case%29&In-Reply-To=bug-616463-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="101683.html">
   <LINK REL="Next"  HREF="101689.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 616463] SIGSEGV in common_call_trampoline (with	test case)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20616463%5D%20SIGSEGV%20in%20common_call_trampoline%20%28with%0A%09test%20case%29&In-Reply-To=bug-616463-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 616463] SIGSEGV in common_call_trampoline (with	test case)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Jun 25 03:32:12 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="101683.html">[Mono-bugs] [Bug 616463] SIGSEGV in common_call_trampoline (with	test case)
</A></li>
        <LI>Next message: <A HREF="101689.html">[Mono-bugs] [Bug 616463] SIGSEGV in common_call_trampoline (with	test case)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101687">[ date ]</a>
              <a href="thread.html#101687">[ thread ]</a>
              <a href="subject.html#101687">[ subject ]</a>
              <a href="author.html#101687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=616463">http://bugzilla.novell.com/show_bug.cgi?id=616463</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=616463#c4">http://bugzilla.novell.com/show_bug.cgi?id=616463#c4</A>


Marek Habersack &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
             Status|RESOLVED                    |REOPENED
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
         Resolution|FIXED                       |

--- Comment #4 from Marek Habersack &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>&gt; 2010-06-25 09:32:10 CEST ---
The commit also breaks Mono bootstrap:

make[8]: Entering directory `/home/src/build/mono/mcs/class/Mono.Security'
MONO_PATH=&quot;./../../class/lib/net_2_0:$MONO_PATH&quot;
/home/src/build/mono/mono/runtime/mono-wrapper  ./../../mcs/gmcs.exe
/codepage:65001  -optimize -d:NET_1_1 -d:NET_2_0 -debug /noconfig -r:System.dll
-unsafe -target:library -out:../../class/lib/net_2_0/tmp/Mono.Security.dll 
@Mono.Security.dll.sources
/Mono.Security.Protocol.Tls.Handshake.Client/TlsClientCertificate.cs(76,0):
warning CS1030: #warning: `&quot;Client certificate selection is unfinished&quot;'
/Mono.Security.Protocol.Tls.Handshake.Client/TlsServerFinished.cs(77,0):
warning CS1030: #warning: `Review that selected alert is correct'
* Assertion at mini-trampolines.c:417, condition `generic_virtual-&gt;is_inflated'
not met

Stacktrace:

  at System.Array.qsort&lt;K, V&gt;
(K[],V[],int,int,System.Collections.Generic.IComparer`1&lt;K&gt;) &lt;0xffffffff&gt;
  at System.Array.qsort&lt;K, V&gt;
(K[],V[],int,int,System.Collections.Generic.IComparer`1&lt;K&gt;) &lt;0x0042d&gt;
  at System.Array.SortImpl&lt;TKey, TValue&gt;
(TKey[],TValue[],int,int,System.Collections.Generic.IComparer`1&lt;TKey&gt;)
&lt;0x00617&gt;
  at System.Array.Sort&lt;T&gt; (T[],System.Collections.Generic.IComparer`1&lt;T&gt;)
&lt;0x0004f&gt;
  at System.Array.Sort&lt;T&gt; (T[]) &lt;0x00024&gt;
  at Mono.CSharp.Switch.TableSwitchEmit
(Mono.CSharp.EmitContext,Mono.CSharp.Expression) &lt;0x00105&gt;
  at Mono.CSharp.Switch.DoEmit (Mono.CSharp.EmitContext) &lt;0x00217&gt;
  at Mono.CSharp.Statement.Emit (Mono.CSharp.EmitContext) &lt;0x0003e&gt;
  at Mono.CSharp.Block.DoEmit (Mono.CSharp.EmitContext) &lt;0x00053&gt;
  at Mono.CSharp.Block.Emit (Mono.CSharp.EmitContext) &lt;0x00052&gt;
  at Mono.CSharp.ExplicitBlock.Emit (Mono.CSharp.EmitContext) &lt;0x000e7&gt;
  at Mono.CSharp.ToplevelBlock.Emit (Mono.CSharp.EmitContext) &lt;0x00083&gt;
  at Mono.CSharp.MethodData.Emit (Mono.CSharp.DeclSpace) &lt;0x00281&gt;
  at Mono.CSharp.MethodOrOperator.Emit () &lt;0x0042f&gt;
  at Mono.CSharp.TypeContainer.EmitType () &lt;0x0025c&gt;
  at Mono.CSharp.RootContext.EmitCode () &lt;0x0013f&gt;
  at Mono.CSharp.Driver.Compile () &lt;0x0081f&gt;
  at Mono.CSharp.Driver.Main (string[]) &lt;0x000cb&gt;
  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_int_object
(object,intptr,intptr,intptr) &lt;0x00040&gt;

Native stacktrace:

    /home/src/build/mono/mono/mono/mini/mono() [0x489dfb]
    /lib/libpthread.so.0(+0xf8f0) [0x2b56deaac8f0]
    /lib/libc.so.6(gsignal+0x35) [0x2b56deceda75]
    /lib/libc.so.6(abort+0x180) [0x2b56decf15c0]
    /home/src/build/mono/mono/mono/mini/mono() [0x5bb64f]
    /home/src/build/mono/mono/mono/mini/mono() [0x5bb6e7]
    /home/src/build/mono/mono/mono/mini/mono() [0x48e084]
    /home/src/build/mono/mono/mono/mini/mono() [0x48e2f0]
    [0x40f3116a]

Debug info from gdb:

[Thread debugging using libthread_db enabled]
[New Thread 0x2aaaab7c2710 (LWP 13726)]
[New Thread 0x2aaaab561710 (LWP 13725)]
[New Thread 0x2b56dfe46710 (LWP 13724)]
[New Thread 0x2b56dfc45710 (LWP 13723)]
[New Thread 0x2b56dfa44710 (LWP 13722)]
[New Thread 0x2b56df843710 (LWP 13721)]
[New Thread 0x2b56df642710 (LWP 13720)]
[New Thread 0x2b56df441710 (LWP 13719)]
[New Thread 0x2b56df240710 (LWP 13718)]
0x00002b56deaab93d in read () from /lib/libpthread.so.0
  10 Thread 0x2b56df240710 (LWP 13718)  0x00002b56deaa885c in
pthread_cond_wait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
  9 Thread 0x2b56df441710 (LWP 13719)  0x00002b56deaa885c in
pthread_cond_wait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
  8 Thread 0x2b56df642710 (LWP 13720)  0x00002b56deaa885c in
pthread_cond_wait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
  7 Thread 0x2b56df843710 (LWP 13721)  0x00002b56deaa885c in
pthread_cond_wait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
  6 Thread 0x2b56dfa44710 (LWP 13722)  0x00002b56deaa885c in
pthread_cond_wait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
  5 Thread 0x2b56dfc45710 (LWP 13723)  0x00002b56deaa885c in
pthread_cond_wait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
  4 Thread 0x2b56dfe46710 (LWP 13724)  0x00002b56deaa885c in
pthread_cond_wait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
  3 Thread 0x2aaaab561710 (LWP 13725)  0x00002b56deaac11d in nanosleep () from
/lib/libpthread.so.0
  2 Thread 0x2aaaab7c2710 (LWP 13726)  0x00002b56deaaab50 in sem_wait () from
/lib/libpthread.so.0
* 1 Thread 0x2b56df03e360 (LWP 13705)  0x00002b56deaab93d in read () from
/lib/libpthread.so.0

Thread 10 (Thread 0x2b56df240710 (LWP 13718)):
#0  0x00002b56deaa885c in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib/libpthread.so.0
#1  0x00000000005ce923 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005c5aad in GC_help_marker (my_mark_no=14) at mark.c:1116
#3  0x00000000005cf69b in GC_mark_thread (id=&lt;value optimized out&gt;) at
pthread_support.c:548
#4  0x00002b56deaa39ca in start_thread () from /lib/libpthread.so.0
#5  0x00002b56deda06fd in clone () from /lib/libc.so.6
#6  0x0000000000000000 in ?? ()

Thread 9 (Thread 0x2b56df441710 (LWP 13719)):
#0  0x00002b56deaa885c in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib/libpthread.so.0
#1  0x00000000005ce923 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005c5aad in GC_help_marker (my_mark_no=14) at mark.c:1116
#3  0x00000000005cf69b in GC_mark_thread (id=&lt;value optimized out&gt;) at
pthread_support.c:548
#4  0x00002b56deaa39ca in start_thread () from /lib/libpthread.so.0
#5  0x00002b56deda06fd in clone () from /lib/libc.so.6
#6  0x0000000000000000 in ?? ()

Thread 8 (Thread 0x2b56df642710 (LWP 13720)):
#0  0x00002b56deaa885c in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib/libpthread.so.0
#1  0x00000000005ce923 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005c5aad in GC_help_marker (my_mark_no=14) at mark.c:1116
#3  0x00000000005cf69b in GC_mark_thread (id=&lt;value optimized out&gt;) at
pthread_support.c:548
#4  0x00002b56deaa39ca in start_thread () from /lib/libpthread.so.0
#5  0x00002b56deda06fd in clone () from /lib/libc.so.6
#6  0x0000000000000000 in ?? ()

Thread 7 (Thread 0x2b56df843710 (LWP 13721)):
#0  0x00002b56deaa885c in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib/libpthread.so.0
#1  0x00000000005ce923 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005c5aad in GC_help_marker (my_mark_no=14) at mark.c:1116
#3  0x00000000005cf69b in GC_mark_thread (id=&lt;value optimized out&gt;) at
pthread_support.c:548
#4  0x00002b56deaa39ca in start_thread () from /lib/libpthread.so.0
#5  0x00002b56deda06fd in clone () from /lib/libc.so.6
#6  0x0000000000000000 in ?? ()

Thread 6 (Thread 0x2b56dfa44710 (LWP 13722)):
#0  0x00002b56deaa885c in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib/libpthread.so.0
#1  0x00000000005ce923 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005c5aad in GC_help_marker (my_mark_no=14) at mark.c:1116
#3  0x00000000005cf69b in GC_mark_thread (id=&lt;value optimized out&gt;) at
pthread_support.c:548
#4  0x00002b56deaa39ca in start_thread () from /lib/libpthread.so.0
#5  0x00002b56deda06fd in clone () from /lib/libc.so.6
#6  0x0000000000000000 in ?? ()

Thread 5 (Thread 0x2b56dfc45710 (LWP 13723)):
#0  0x00002b56deaa885c in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib/libpthread.so.0
#1  0x00000000005ce923 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005c5aad in GC_help_marker (my_mark_no=14) at mark.c:1116
#3  0x00000000005cf69b in GC_mark_thread (id=&lt;value optimized out&gt;) at
pthread_support.c:548
#4  0x00002b56deaa39ca in start_thread () from /lib/libpthread.so.0
#5  0x00002b56deda06fd in clone () from /lib/libc.so.6
#6  0x0000000000000000 in ?? ()

Thread 4 (Thread 0x2b56dfe46710 (LWP 13724)):
#0  0x00002b56deaa885c in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib/libpthread.so.0
#1  0x00000000005ce923 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005c5aad in GC_help_marker (my_mark_no=14) at mark.c:1116
#3  0x00000000005cf69b in GC_mark_thread (id=&lt;value optimized out&gt;) at
pthread_support.c:548
#4  0x00002b56deaa39ca in start_thread () from /lib/libpthread.so.0
#5  0x00002b56deda06fd in clone () from /lib/libc.so.6
#6  0x0000000000000000 in ?? ()

Thread 3 (Thread 0x2aaaab561710 (LWP 13725)):
#0  0x00002b56deaac11d in nanosleep () from /lib/libpthread.so.0
#1  0x000000000059b792 in collection_thread (unused=&lt;value optimized out&gt;) at
collection.c:34
#2  0x00002b56deaa39ca in start_thread () from /lib/libpthread.so.0
#3  0x00002b56deda06fd in clone () from /lib/libc.so.6
#4  0x0000000000000000 in ?? ()

Thread 2 (Thread 0x2aaaab7c2710 (LWP 13726)):
#0  0x00002b56deaaab50 in sem_wait () from /lib/libpthread.so.0
#1  0x00000000005b67b8 in mono_sem_wait (sem=0x8d3de0, alertable=0) at
mono-semaphore.c:102
#2  0x0000000000547b22 in finalizer_thread (unused=&lt;value optimized out&gt;) at
gc.c:1048
#3  0x000000000056dcf3 in start_wrapper (data=&lt;value optimized out&gt;) at
threads.c:747
#4  0x00000000005a2b64 in thread_start_routine (args=0xe96b70) at
wthreads.c:285
#5  0x00000000005cfd01 in GC_start_routine (arg=&lt;value optimized out&gt;) at
pthread_support.c:1390
#6  0x00002b56deaa39ca in start_thread () from /lib/libpthread.so.0
#7  0x00002b56deda06fd in clone () from /lib/libc.so.6
#8  0x0000000000000000 in ?? ()

Thread 1 (Thread 0x2b56df03e360 (LWP 13705)):
#0  0x00002b56deaab93d in read () from /lib/libpthread.so.0
#1  0x0000000000489f87 in read (signal=&lt;value optimized out&gt;, ctx=&lt;value
optimized out&gt;) at /usr/include/bits/unistd.h:45
#2  mono_handle_native_sigsegv (signal=&lt;value optimized out&gt;, ctx=&lt;value
optimized out&gt;) at mini-exceptions.c:1907
#3  &lt;signal handler called&gt;
#4  0x00002b56deceda75 in raise () from /lib/libc.so.6
#5  0x00002b56decf15c0 in abort () from /lib/libc.so.6
#6  0x00000000005bb64f in monoeg_g_logv ()
#7  0x00000000005bb6e7 in monoeg_assertion_message ()
#8  0x000000000048e084 in common_call_trampoline (regs=&lt;value optimized out&gt;,
code=0x2aaaaad9d30e &quot;;l$x}(H\213|$0\350L\363!&quot;, arg=&lt;value optimized out&gt;,
tramp=&lt;value optimized out&gt;, vt=0x0, 
    vtable_slot=0x0, need_rgctx_tramp=0) at mini-trampolines.c:417
#9  0x000000000048e2f0 in mono_magic_trampoline (regs=0x7fff75827e48,
code=0x2aaaaad9d30e &quot;;l$x}(H\213|$0\350L\363!&quot;, arg=0x130bf20,
tramp=0xffffffffffffffff &lt;Address 0xffffffffffffffff out of bounds&gt;)
    at mini-trampolines.c:648
#10 0x0000000040f3116a in ?? ()
#11 0x00002b56dfe6be68 in ?? ()
#12 0x00002aaaac6947c0 in ?? ()
#13 0x00002b56dfe6bd48 in ?? ()
#14 0x00000000031169ff in ?? ()
#15 0x0000000000000000 in ?? ()

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

Aborted
make[8]: *** [../../class/lib/net_2_0/tmp/Mono.Security.dll] Error 134

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="101683.html">[Mono-bugs] [Bug 616463] SIGSEGV in common_call_trampoline (with	test case)
</A></li>
	<LI>Next message: <A HREF="101689.html">[Mono-bugs] [Bug 616463] SIGSEGV in common_call_trampoline (with	test case)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101687">[ date ]</a>
              <a href="thread.html#101687">[ thread ]</a>
              <a href="subject.html#101687">[ subject ]</a>
              <a href="author.html#101687">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
