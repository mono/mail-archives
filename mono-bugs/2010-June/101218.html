<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 613684] New: Mono doesn't validate XML keyref in	schemas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20613684%5D%20New%3A%20Mono%20doesn%27t%20validate%20XML%20keyref%20in%0A%09schemas&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="101244.html">
   <LINK REL="Next"  HREF="101228.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 613684] New: Mono doesn't validate XML keyref in	schemas</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20613684%5D%20New%3A%20Mono%20doesn%27t%20validate%20XML%20keyref%20in%0A%09schemas&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 613684] New: Mono doesn't validate XML keyref in	schemas">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Jun 11 15:18:24 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="101244.html">[Mono-bugs] [Bug 613682] XML Documents validated against schema always show SchemaInfo.Validity == NotKnown
</A></li>
        <LI>Next message: <A HREF="101228.html">[Mono-bugs] [Bug 613684] Mono doesn't validate XML keyref in schemas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101218">[ date ]</a>
              <a href="thread.html#101218">[ thread ]</a>
              <a href="subject.html#101218">[ subject ]</a>
              <a href="author.html#101218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=613684">http://bugzilla.novell.com/show_bug.cgi?id=613684</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=613684#c0">http://bugzilla.novell.com/show_bug.cgi?id=613684#c0</A>


           Summary: Mono doesn't validate XML keyref in schemas
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.6.x
          Platform: x86-64
        OS/Version: openSUSE 11.2
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.XML
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">ibboard at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US) AppleWebKit/534.1
SUSE/6.0.428.0 (KHTML, like Gecko) Chrome/6.0.428.0 Safari/534.1

This was originally sent to the Mono mailing list [1], but Atsushi Eno said I
should report it as a bug. Since there are two slightly different problems then
I've reported them as two bugs.

Basically, I have a simple test project [2] that loads a schema then loads a
document against that schema. If a schema uses a &lt;key&gt; and &lt;keyref&gt; then Mono
doesn't appear to validate the restriction and behaves as if they didn't exist.
Currently, because of Bug 613682, this means that the process doesn't error but
the doc.SchemaInfo.Validity is NotKnown. If these tests are run in Windows on
MS .Net then the invalid keyref is found, the message &quot;The key sequence '558'
in Keyref fails to refer to some key.&quot; is printed for the third test and
doc.SchemaInfo.Validity is Invalid

Some validation must be occurring, because unexpected elements are still
causing validation errors, but the incorrect keyref value doesn't cause a
validation error.


[1] <A HREF="http://lists.ximian.com/pipermail/mono-list/2010-June/045285.html">http://lists.ximian.com/pipermail/mono-list/2010-June/045285.html</A>
[2] <A HREF="http://ibboard.co.uk/temp/XmlTest.tar.gz">http://ibboard.co.uk/temp/XmlTest.tar.gz</A>

Reproducible: Always

Steps to Reproduce:
Steps to Reproduce:
1. Run test project and observe output

or, more generally

1. Create an XML schema with a keyref and a document that is valid against that
schema, except for an invalid value in the keyref's attribute
2. Load the schema into an XmlReaderSettings object with the correct namespace
3. Load the XML document into a variable called doc
4. Check doc.SchemaInfo.Validity
Actual Results:  
No errors in schema validation. doc.SchemaInfo.Validity == NotKnown

Expected Results:  
Error in schema validation because of invalid keyref (either thrown as an
exception or passed to a method, depending on whether a validation message was
added). doc.SchemaInfo.Validity == Invalid

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>




































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="101244.html">[Mono-bugs] [Bug 613682] XML Documents validated against schema always show SchemaInfo.Validity == NotKnown
</A></li>
	<LI>Next message: <A HREF="101228.html">[Mono-bugs] [Bug 613684] Mono doesn't validate XML keyref in schemas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101218">[ date ]</a>
              <a href="thread.html#101218">[ thread ]</a>
              <a href="subject.html#101218">[ subject ]</a>
              <a href="author.html#101218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
