<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 79605][Nor] Changed - [MCS] Iterators produce	invalid IL code.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2079605%5D%5BNor%5D%20Changed%20-%20%5BMCS%5D%20Iterators%20produce%0A%09invalid%20IL%20code.&In-Reply-To=bug-79605%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048541.html">
   <LINK REL="Next"  HREF="048543.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 79605][Nor] Changed - [MCS] Iterators produce	invalid IL code.</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2079605%5D%5BNor%5D%20Changed%20-%20%5BMCS%5D%20Iterators%20produce%0A%09invalid%20IL%20code.&In-Reply-To=bug-79605%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 79605][Nor] Changed - [MCS] Iterators produce	invalid IL code.">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Mon Oct  9 20:32:54 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="048541.html">[Mono-bugs] [Bug 74869][Wis] Changed - [PATCH] Signal handlers	problem on os x.
</A></li>
        <LI>Next message: <A HREF="048543.html">[Mono-bugs] [Bug 79611][Wis] Changed - mono-66382 don't run	vc2005's xsd.exe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48542">[ date ]</a>
              <a href="thread.html#48542">[ thread ]</a>
              <a href="subject.html#48542">[ subject ]</a>
              <a href="author.html#48542">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=79605">http://bugzilla.ximian.com/show_bug.cgi?id=79605</A>

--- shadow/79605	2006-10-09 17:08:28.000000000 -0400
+++ shadow/79605.tmp.20779	2006-10-09 20:32:54.000000000 -0400
@@ -71,6 +71,44 @@
 Martin
 
 ------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">marek.safar at seznam.cz</A>  2006-10-09 17:08 -------
 Sorry for misinformation but for some strange reasons GMCS is OK and
 the problem occurs with MCS only.
 The output is OK in terms of Peverify but cannot run it at all.
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at ximian.com</A>  2006-10-09 20:32 -------
+The problem is easy to reproduce:
+
+cd mcs/class/corlib
+make run-test-local PROFILE=net_2_0
+
+Let it run, at some point it will hang, you can control-c it at that
+point;  It hangs because of something else now (strtod.c is broken
+with O2).  Anyways, then type this from that directory:
+
+MONO_PATH=&quot;../../class/lib/net_2_0::$MONO_PATH&quot;
+/cvs/mono/runtime/mono-wrapper --debug
+../../class/lib/net_2_0/nunit-console.exe 
+/exclude:NotWorking,ValueAdd,CAS,InetAccess
+/fixture:MonoTests.System.ArrayTest corlib_test_net_2_0.dll
+
+It will produce this:
+
+Failures:
+1) MonoTests.System.ArrayTest.ReadOnly_Enumerator :
+System.InvalidProgramException : Invalid IL code in
+&lt;&gt;c__CompilerGenerated1:System.Collections.Generic.IEnumerator&lt;T&gt;.get_Current
+(): IL_0010: newobj    0x060006bc
+
+
+  at &lt;0x00000&gt; &lt;unknown method&gt;
+  at MonoTests.System.ArrayTest.ReadOnly_Enumerator () [0x00033] in
+/home/cvs/mcs/class/corlib/Test/System/ArrayTest.cs:2747
+  at &lt;0x00000&gt; &lt;unknown method&gt;
+  at (wrapper managed-to-native)
+System.Reflection.MonoMethod:InternalInvoke (object,object[])
+  at System.Reflection.MonoMethod.Invoke (System.Object obj,
+BindingFlags invokeAttr, System.Reflection.Binder binder,
+System.Object[] parameters, System.Globalization.CultureInfo culture)
+[0x00056] in
+/home/cvs/mcs/class/corlib/System.Reflection/MonoMethod.cs:143
+
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048541.html">[Mono-bugs] [Bug 74869][Wis] Changed - [PATCH] Signal handlers	problem on os x.
</A></li>
	<LI>Next message: <A HREF="048543.html">[Mono-bugs] [Bug 79611][Wis] Changed - mono-66382 don't run	vc2005's xsd.exe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48542">[ date ]</a>
              <a href="thread.html#48542">[ thread ]</a>
              <a href="subject.html#48542">[ subject ]</a>
              <a href="author.html#48542">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
