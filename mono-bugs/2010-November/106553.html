<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 655656] New: System.Environment.GetFolderPath not fully supported in Mono 2.8.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20655656%5D%20New%3A%20System.Environment.GetFolderPath%20not%0A%20fully%20supported%20in%20Mono%202.8.1&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="106552.html">
   <LINK REL="Next"  HREF="106599.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 655656] New: System.Environment.GetFolderPath not fully supported in Mono 2.8.1</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20655656%5D%20New%3A%20System.Environment.GetFolderPath%20not%0A%20fully%20supported%20in%20Mono%202.8.1&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 655656] New: System.Environment.GetFolderPath not fully supported in Mono 2.8.1">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Nov 24 00:17:04 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="106552.html">[Mono-bugs] [Bug 515635] csharp shell should permit running scripts
</A></li>
        <LI>Next message: <A HREF="106599.html">[Mono-bugs] [Bug 655656] System.Environment.GetFolderPath not fully supported in Mono 2.8.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106553">[ date ]</a>
              <a href="thread.html#106553">[ thread ]</a>
              <a href="subject.html#106553">[ subject ]</a>
              <a href="author.html#106553">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=655656">https://bugzilla.novell.com/show_bug.cgi?id=655656</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=655656#c0">https://bugzilla.novell.com/show_bug.cgi?id=655656#c0</A>


           Summary: System.Environment.GetFolderPath not fully supported
                    in Mono 2.8.1
    Classification: Mono
           Product: Mono: Runtime
           Version: 2.8.x
          Platform: x86-64
        OS/Version: Mac OS X 10.6
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">s_lessard at yahoo.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_5; en-us)
AppleWebKit/533.19.4 (KHTML, like Gecko) Version/5.0.3 Safari/533.19.4

The GetFolderPath method throws an exception when it is passed one of the new
enum values in the .NET 4.0 version of System.Environment.SpecialFolder.

Reproducible: Always

Steps to Reproduce:
1. Save the code below to ~/specialfolderstest.cs
2. Run the command: csharp ~/specialfolderstest.cs
3. See Actual Results section for output



Console.WriteLine(&quot;System.Environment.Version = &quot; +
System.Environment.Version);
Console.WriteLine(&quot;{0,-25}  {1,-8}  {2}&quot;, &quot;Name&quot;, &quot;Value&quot;, &quot;Result&quot;);
foreach (System.Environment.SpecialFolder atypeSpecialFolder in 
                     System.Enum.GetValues(typeof(Environment.SpecialFolder)))
   {
      var typeSpecialFolder = atypeSpecialFolder;
      string enumname = string.Empty;
      short enumvalue = 0;
      string result = string.Empty;

      try
      {
         enumname = typeSpecialFolder.ToString();
         enumvalue = ((short)typeSpecialFolder);
         result = System.Environment.GetFolderPath(typeSpecialFolder);
      }
      catch (Exception ex)
      {
          result = ex.Message;
      }
      Console.WriteLine(&quot;{0,-25}  {1,-8}  {2}&quot;, enumname, enumvalue, result);
   }

Actual Results:  
An ArgumentException is thrown when one of the new SpecialFolders enum values
is passed to the GetFolderPath method.


System.Environment.Version = 4.0.30319.1
Name                       Value     Result
Desktop                    0         /Users/slessard/Desktop
Programs                   2         
Personal                   5         /Users/slessard
Personal                   5         /Users/slessard
Favorites                  6         
Startup                    7         
Recent                     8         
SendTo                     9         
StartMenu                  11        
MyMusic                    13        /Users/slessard/Music
MyVideos                   14        Invalid SpecialFolder
DesktopDirectory           16        /Users/slessard/Desktop
MyComputer                 17        
NetworkShortcuts           19        Invalid SpecialFolder
Fonts                      20        Invalid SpecialFolder
Templates                  21        
CommonStartMenu            22        Invalid SpecialFolder
CommonPrograms             23        Invalid SpecialFolder
CommonStartup              24        Invalid SpecialFolder
CommonDesktopDirectory     25        Invalid SpecialFolder
ApplicationData            26        /Users/slessard/.config
PrinterShortcuts           27        Invalid SpecialFolder
LocalApplicationData       28        /Users/slessard/.local/share
InternetCache              32        
Cookies                    33        
History                    34        
CommonApplicationData      35        /usr/share
Windows                    36        Invalid SpecialFolder
System                     37        
ProgramFiles               38        
MyPictures                 39        /Users/slessard/Pictures
UserProfile                40        Invalid SpecialFolder
SystemX86                  41        Invalid SpecialFolder
ProgramFilesX86            42        Invalid SpecialFolder
CommonProgramFiles         43        
CommonProgramFilesX86      44        Invalid SpecialFolder
CommonTemplates            45        Invalid SpecialFolder
CommonDocuments            46        Invalid SpecialFolder
CommonAdminTools           47        Invalid SpecialFolder
AdminTools                 48        Invalid SpecialFolder
CommonMusic                53        Invalid SpecialFolder
CommonPictures             54        Invalid SpecialFolder
CommonVideos               55        Invalid SpecialFolder
Resources                  56        Invalid SpecialFolder
LocalizedResources         57        Invalid SpecialFolder
CommonOemLinks             58        Invalid SpecialFolder
CDBurning                  59        Invalid SpecialFolder


Expected Results:  
No exception is thrown

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="106552.html">[Mono-bugs] [Bug 515635] csharp shell should permit running scripts
</A></li>
	<LI>Next message: <A HREF="106599.html">[Mono-bugs] [Bug 655656] System.Environment.GetFolderPath not fully supported in Mono 2.8.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106553">[ date ]</a>
              <a href="thread.html#106553">[ thread ]</a>
              <a href="subject.html#106553">[ subject ]</a>
              <a href="author.html#106553">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
