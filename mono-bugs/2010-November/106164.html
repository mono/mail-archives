<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 653192] New: Using a relative path for the MasterPageFile throws an exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20653192%5D%20New%3A%20Using%20a%20relative%20path%20for%20the%0A%20MasterPageFile%20throws%20an%20exception&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="106162.html">
   <LINK REL="Next"  HREF="106167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 653192] New: Using a relative path for the MasterPageFile throws an exception</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20653192%5D%20New%3A%20Using%20a%20relative%20path%20for%20the%0A%20MasterPageFile%20throws%20an%20exception&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 653192] New: Using a relative path for the MasterPageFile throws an exception">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Nov 12 03:24:41 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="106162.html">[Mono-bugs] [Bug 641449] Admin links missing in BlogEngine (both xsp and mod_mono)
</A></li>
        <LI>Next message: <A HREF="106167.html">[Mono-bugs] [Bug 653192] Using a relative path for the MasterPageFile throws an exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106164">[ date ]</a>
              <a href="thread.html#106164">[ thread ]</a>
              <a href="subject.html#106164">[ subject ]</a>
              <a href="author.html#106164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=653192">https://bugzilla.novell.com/show_bug.cgi?id=653192</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=653192#c0">https://bugzilla.novell.com/show_bug.cgi?id=653192#c0</A>


           Summary: Using a relative path for the MasterPageFile throws an
                    exception
    Classification: Mono
           Product: Mono: Class Libraries
           Version: SVN
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">dredd422 at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=399853)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=399853">http://bugzilla.novell.com/attachment.cgi?id=399853</A>)
ASP.NET MVC with relative MasterPage path

User-Agent:       Mozilla/5.0 (X11; U; Linux i686; en-US) AppleWebKit/534.7
(KHTML, like Gecko) Chrome/7.0.517.44 Safari/534.7

If you use a relative path for the MasterPageFile attribute in a ViewPage using
ASP.NET MVC, an exception is thrown.  This is because the path is supposed to
be relative to the path of the ViewPage file, but Mono makes it relative to the
Web Request path.

Reproducible: Always

Steps to Reproduce:
1. Create an ASP.NET MVC Application
2. Create a ViewPage and a MasterPage
3. Set the MasterPageFile attribute using a relative path to the ViewPage file
Actual Results:  
System.Web.HttpException: Cannot use a leading .. to exit above the top
directory.
  at System.Web.VirtualPathUtility.Normalize (System.String path) [0x0017f] in
/usr/src/packages/BUILD/mono-2.8.1/mcs/class/System.Web/System.Web/VirtualPathUtility.cs:400 
  at System.Web.VirtualPathUtility.Combine (System.String basePath,
System.String relativePath) [0x00066] in
/usr/src/packages/BUILD/mono-2.8.1/mcs/class/System.Web/System.Web/VirtualPathUtility.cs:87 
.....

Expected Results:  
Page successfully displayed.

Attached is the ASP.NET MVC 2 template site created by VS 2010 altered to use
relative path MasterPageFile attributes.  It runs fine on MS .NET, but throws
an exception on Mono.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="106162.html">[Mono-bugs] [Bug 641449] Admin links missing in BlogEngine (both xsp and mod_mono)
</A></li>
	<LI>Next message: <A HREF="106167.html">[Mono-bugs] [Bug 653192] Using a relative path for the MasterPageFile throws an exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106164">[ date ]</a>
              <a href="thread.html#106164">[ thread ]</a>
              <a href="subject.html#106164">[ subject ]</a>
              <a href="author.html#106164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
