<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 650439] New: poor performance (and wrong arithmetic result) of multi-thread code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20650439%5D%20New%3A%20poor%20performance%20%28and%20wrong%0A%20arithmetic%20result%29%20of%20multi-thread%20code&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="105697.html">
   <LINK REL="Next"  HREF="105699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 650439] New: poor performance (and wrong arithmetic result) of multi-thread code</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20650439%5D%20New%3A%20poor%20performance%20%28and%20wrong%0A%20arithmetic%20result%29%20of%20multi-thread%20code&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 650439] New: poor performance (and wrong arithmetic result) of multi-thread code">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Nov  1 06:21:13 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="105697.html">[Mono-bugs] [Bug 650437] qualifyAssembly configuration element has	no effect
</A></li>
        <LI>Next message: <A HREF="105699.html">[Mono-bugs] [Bug 650439] poor performance (and wrong arithmetic result) of multi-thread code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105698">[ date ]</a>
              <a href="thread.html#105698">[ thread ]</a>
              <a href="subject.html#105698">[ subject ]</a>
              <a href="author.html#105698">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=650439">https://bugzilla.novell.com/show_bug.cgi?id=650439</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=650439#c0">https://bugzilla.novell.com/show_bug.cgi?id=650439#c0</A>


           Summary: poor performance (and wrong arithmetic result) of
                    multi-thread code
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.8.x
          Platform: i686
        OS/Version: Mac OS X 10.6
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">matteo.tesser at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Description of Problem:

Three instances of a computing intensive sample performing the calculation of
an integral using a recursive algorithm are launched in a dual core machine.

The sample do the following: at the beginning, the first instance is launched,
then the other  two istances are launched at the same  time using two
differents threads. Given that the test uses only local variables and hence
there is no significant memory allocation on the heap, it is expected that the
two parallel instances to take more or less the same time of the first
instance.

Steps to reproduce the problem:
1. compile the attached sample with gmcs
2. launch it


Actual Results:
on a macbook (dual core) with mono 2.8 and mac osx 10.6

Launching one test instance
Integral=76519.7602677242 running time=00:00:03.0577680
Launching two tests instances
Integral=76519.7602677264 running time=00:00:11.9237780
Integral=76519.7602677264 running time=00:00:12.0516960 


Expected Results:

On Windows: dual core machine
Integral=76519.7602677242 running time=00:00:02.0591178
Launching two tests instances
Integral=76519.7602677242 running time=00:00:02.0641180
Integral=76519.7602677242 running time=00:00:02.1941255


On Linux (OpenSuse 11.3 64 bit + mono 2.6.7)

Launching one test instance
Integral=76519,7602677242 running time=00:00:01.5732770
Launching two tests instances
Integral=76519,7602677242 running time=00:00:01.5600490
Integral=76519,7602677242 running time=00:00:01.5657280


How often does this happen? 
Always

Additional Information:

Note that in windows and linux the result of the integral as printed by the two
concurrent threads is equal up to the last digit, while in osx there is also

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="105697.html">[Mono-bugs] [Bug 650437] qualifyAssembly configuration element has	no effect
</A></li>
	<LI>Next message: <A HREF="105699.html">[Mono-bugs] [Bug 650439] poor performance (and wrong arithmetic result) of multi-thread code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105698">[ date ]</a>
              <a href="thread.html#105698">[ thread ]</a>
              <a href="subject.html#105698">[ subject ]</a>
              <a href="author.html#105698">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
