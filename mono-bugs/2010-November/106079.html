<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 652522] New: Parallel.For is 100 times slower than sequential for, at the same time Parallel.For with Partitioner is ok
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20652522%5D%20New%3A%20Parallel.For%20is%20100%20times%20slower%20than%0A%20sequential%20for%2C%20at%20the%20same%20time%20Parallel.For%20with%20Partitioner%20is%20ok&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="106078.html">
   <LINK REL="Next"  HREF="106080.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 652522] New: Parallel.For is 100 times slower than sequential for, at the same time Parallel.For with Partitioner is ok</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20652522%5D%20New%3A%20Parallel.For%20is%20100%20times%20slower%20than%0A%20sequential%20for%2C%20at%20the%20same%20time%20Parallel.For%20with%20Partitioner%20is%20ok&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 652522] New: Parallel.For is 100 times slower than sequential for, at the same time Parallel.For with Partitioner is ok">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Nov 10 00:34:11 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="106078.html">[Mono-bugs] [Bug 631810] [PATCH] Modal Form closing event raised by button cannot be canceled
</A></li>
        <LI>Next message: <A HREF="106080.html">[Mono-bugs] [Bug 652522] Parallel.For is 100 times slower than sequential for, at the same time Parallel.For with Partitioner is ok
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106079">[ date ]</a>
              <a href="thread.html#106079">[ thread ]</a>
              <a href="subject.html#106079">[ subject ]</a>
              <a href="author.html#106079">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=652522">https://bugzilla.novell.com/show_bug.cgi?id=652522</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=652522#c0">https://bugzilla.novell.com/show_bug.cgi?id=652522#c0</A>


           Summary: Parallel.For is 100 times slower than sequential for,
                    at the same time Parallel.For with Partitioner is ok
    Classification: Mono
           Product: Mono: Class Libraries
           Version: SVN
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Core
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jbevain at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mariusz.krej at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Opera/9.80 (Windows NT 6.1; U; pl) Presto/2.6.30
Version/10.63

Parallel.For (without partitioner) is 200 times slower than sequential for on
4-logical core machines (I've tried on two computers)

  I have runned microsoft's example &quot;ComputePi&quot; 
  (<A HREF="http://blogs.msdn.com/b/pfxteam/archive/2009/12/09/9934811.aspx">http://blogs.msdn.com/b/pfxteam/archive/2009/12/09/9934811.aspx</A>
   or <A HREF="http://code.msdn.microsoft.com/ParExtSamples">http://code.msdn.microsoft.com/ParExtSamples</A>)
  on mono 2.9 (from trunk)
  ( Mono 2.8 throws NotImplemented Exception)

  Here are the execution times:
  SerialLinq:
    00:00:16.5024978
  ParallelLinq:
    00:00:26.0804742
  Serial:
    00:00:00.9266276
  Parallel:
    00:03:04.7353892
  ParallelPartitioner
    00:00:00.5463789

  Above values are really strange, parallel version time (3 minutes !) is
slower than serial one, 
  at the same time the new parallel partitioner result is ok

  I've also tried running in .net program compiled on mono
  and results are ok (other computer results):
  SerialLinq:
    00:00:08.5200829
  ParallelLinq:
    00:00:02.6109864
  Serial:
    00:00:02.2807189
  Parallel:
    00:00:01.2737228
  ParallelPartitioner
    00:00:00.7517575


Reproducible: Always

Steps to Reproduce:
1. run 'ComputePi' Microsoft's parallel example
   (<A HREF="http://code.msdn.microsoft.com/ParExtSamples">http://code.msdn.microsoft.com/ParExtSamples</A>)

Actual Results:  
(approximately)
  00:00:16.5024978
  00:00:26.0804742
  00:00:00.9266276
  00:03:04.7353892
  00:00:00.5463789

Expected Results:  
(approximately)
 00:00:08.5200829
 00:00:02.6109864
 00:00:02.2807189
 00:00:01.2737228
 00:00:00.7517575

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="106078.html">[Mono-bugs] [Bug 631810] [PATCH] Modal Form closing event raised by button cannot be canceled
</A></li>
	<LI>Next message: <A HREF="106080.html">[Mono-bugs] [Bug 652522] Parallel.For is 100 times slower than sequential for, at the same time Parallel.For with Partitioner is ok
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106079">[ date ]</a>
              <a href="thread.html#106079">[ thread ]</a>
              <a href="subject.html#106079">[ subject ]</a>
              <a href="author.html#106079">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
