<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 653254] New: sgen segfaults with XSP test suite and the log profiler active in heapshot mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20653254%5D%20New%3A%20sgen%20segfaults%20with%20XSP%20test%20suite%0A%20and%20the%20log%20profiler%20active%20in%20heapshot%20mode&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="106175.html">
   <LINK REL="Next"  HREF="106181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 653254] New: sgen segfaults with XSP test suite and the log profiler active in heapshot mode</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20653254%5D%20New%3A%20sgen%20segfaults%20with%20XSP%20test%20suite%0A%20and%20the%20log%20profiler%20active%20in%20heapshot%20mode&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 653254] New: sgen segfaults with XSP test suite and the log profiler active in heapshot mode">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Nov 12 09:16:13 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="106175.html">[Mono-bugs] [Bug 635377] Error creating wcf client proxy
</A></li>
        <LI>Next message: <A HREF="106181.html">[Mono-bugs] [Bug 650335] Keyboard shortcut does not work for SaveAll when code editor is active
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106178">[ date ]</a>
              <a href="thread.html#106178">[ thread ]</a>
              <a href="subject.html#106178">[ subject ]</a>
              <a href="author.html#106178">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=653254">https://bugzilla.novell.com/show_bug.cgi?id=653254</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=653254#c0">https://bugzilla.novell.com/show_bug.cgi?id=653254#c0</A>


           Summary: sgen segfaults with XSP test suite and the log
                    profiler active in heapshot mode
    Classification: Mono
           Product: Mono: Runtime
           Version: SVN
          Platform: x86-64
        OS/Version: openSUSE 11.3
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: GC
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


When accessing the XSP test suite's index.aspx for the first time from browser
(the .as?x files are compiled at this point) the exception below is thrown to
the browser while compiling global.asax. Command line for xsp was:
MONO_OPTIONS=&quot;--gc=sgen --profile=log:heapshot&quot; xsp2. The XSP test suite can be
found in $prefix/lib/xsp/test/

gmcs /target:library /lib:&quot;/home/devel/trunk/lib/xsp/test/bin&quot; /debug-
/optimize+ /warn:0
/out:&quot;/tmp/grendel-temp-aspnet-0/86ee356/App_global.asax_63366e66.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System/2.0.0.0__b77a5c561934e089/System.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System.Data/2.0.0.0__b77a5c561934e089/System.Data.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System.Web/2.0.0.0__b03f5f7f11d50a3a/System.Web.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System.Web.Services/2.0.0.0__b03f5f7f11d50a3a/System.Web.Services.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System.Runtime.Serialization/3.0.0.0__b77a5c561934e089/System.Runtime.Serialization.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System.IdentityModel/3.0.0.0__b77a5c561934e089/System.IdentityModel.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System.ServiceModel/3.0.0.0__b77a5c561934e089/System.ServiceModel.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System.ServiceModel.Web/3.5.0.0__31bf3856ad364e35/System.ServiceModel.Web.dll&quot;
/r:&quot;/home/devel/trunk/lib/mono/gac/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll&quot;
/r:&quot;/tmp/grendel-temp-aspnet-0/86ee356/App_Code.6b3a6ae8.dll&quot;
/r:&quot;/home/devel/trunk/lib/xsp/test/bin/codebehind1.dll&quot;
/r:&quot;/home/devel/trunk/lib/xsp/test/bin/extensions.dll&quot;
/r:&quot;/home/devel/trunk/lib/xsp/test/bin/tabcontrol.dll&quot;
/r:&quot;/home/devel/trunk/lib/xsp/test/bin/tabcontrol2.dll&quot;
/r:&quot;/home/devel/trunk/lib/xsp/test/bin/treeview.dll&quot;
/r:&quot;/home/devel/trunk/lib/xsp/test/bin/typedesc.dll&quot;  /nowarn:0169  --
&quot;/tmp/grendel-temp-aspnet-0/86ee356/App_global.asax_63366e66_0.cs&quot; 

Stacktrace:

  at (wrapper managed-to-native) object.__icall_wrapper_mono_array_new_specific
(intptr,int) &lt;0xffffffff&gt;
  at System.Array.Resize&lt;T&gt; (T[]&amp;,int) &lt;0x000bb&gt;
  at System.Collections.Generic.List`1.set_Capacity (int) &lt;0x00053&gt;
  at System.Collections.Generic.List`1.GrowIfNeeded (int) &lt;0x0006b&gt;
  at System.Collections.Generic.List`1.Add (T) &lt;0x00037&gt;
  at Mono.CSharp.TypeSpec.AddInterface (Mono.CSharp.TypeSpec) &lt;0x00067&gt;
  at Mono.CSharp.ReflectionMetaImporter.ImportTypeBase
(Mono.CSharp.TypeSpec,System.Type) &lt;0x0013b&gt;
  at Mono.CSharp.ReflectionMetaImporter.CreateType
(System.Type,Mono.CSharp.TypeSpec,System.Reflection.ICustomAttributeProvider,int,bool)
&lt;0x00a1f&gt;
  at Mono.CSharp.ReflectionMetaImporter.ImportTypes
(System.Type[],Mono.CSharp.Namespace,System.Type) &lt;0x000d7&gt;
  at Mono.CSharp.ReflectionMetaImporter.ImportAssembly
(System.Reflection.Assembly,Mono.CSharp.Namespace) &lt;0x000b3&gt;
  at Mono.CSharp.RootNamespace.ImportTypes (Mono.CSharp.CompilerContext)
&lt;0x000af&gt;
  at Mono.CSharp.GlobalRootNamespace.ImportTypes (Mono.CSharp.CompilerContext)
&lt;0x0001f&gt;
  at Mono.CSharp.GlobalRootNamespace.ComputeNamespaces
(Mono.CSharp.CompilerContext) &lt;0x00074&gt;
  at Mono.CSharp.Driver.LoadReferences () &lt;0x0038f&gt;
  at Mono.CSharp.Driver.Compile () &lt;0x004fb&gt;
  at Mono.CSharp.Driver.Main (string[]) &lt;0x000bb&gt;
  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_int_object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

    /home/devel/trunk/bin/mono-sgen() [0x48c7d6]
    /home/devel/trunk/bin/mono-sgen() [0x4dc0df]
    /lib64/libpthread.so.0(+0xf2e0) [0x7fb9332e02e0]
    /home/devel/trunk/bin/mono-sgen() [0x5933d0]
    /home/devel/trunk/bin/mono-sgen() [0x593576]
    /home/devel/trunk/bin/mono-sgen() [0x593601]
    /home/devel/trunk/bin/mono-sgen() [0x5996a7]
    /home/devel/trunk/bin/mono-sgen() [0x59bfea]
    /home/devel/trunk/bin/mono-sgen() [0x59c47e]
    /home/devel/trunk/bin/mono-sgen() [0x59c830]
    /home/devel/trunk/bin/mono-sgen(mono_array_new_specific+0x36) [0x534b16]
    [0x419b459d]

Debug info from gdb:

warning: the debug information found in
&quot;/usr/lib/debug//lib64/libdl-2.11.2.so.debug&quot; does not match
&quot;/lib64/libdl.so.2&quot; (CRC mismatch).

warning: the debug information found in
&quot;/usr/lib/debug/lib64/libdl-2.11.2.so.debug&quot; does not match &quot;/lib64/libdl.so.2&quot;
(CRC mismatch).

Missing separate debuginfo for /lib64/libdl.so.2
Try: zypper install -C
&quot;debuginfo(build-id)=b32241719a8a0234bb425377e47155231deadf26&quot;
warning: the debug information found in
&quot;/usr/lib/debug//lib64/libpthread-2.11.2.so.debug&quot; does not match
&quot;/lib64/libpthread.so.0&quot; (CRC mismatch).

warning: the debug information found in
&quot;/usr/lib/debug/lib64/libpthread-2.11.2.so.debug&quot; does not match
&quot;/lib64/libpthread.so.0&quot; (CRC mismatch).

Missing separate debuginfo for /lib64/libpthread.so.0
Try: zypper install -C
&quot;debuginfo(build-id)=0bfcf306c464b3ab89bd3e485c4f813196fecca5&quot;
warning: the debug information found in
&quot;/usr/lib/debug//lib64/libc-2.11.2.so.debug&quot; does not match &quot;/lib64/libc.so.6&quot;
(CRC mismatch).

warning: the debug information found in
&quot;/usr/lib/debug/lib64/libc-2.11.2.so.debug&quot; does not match &quot;/lib64/libc.so.6&quot;
(CRC mismatch).

Missing separate debuginfo for /lib64/libc.so.6
Try: zypper install -C
&quot;debuginfo(build-id)=8626ba66937eea83fbe594766f27ecd27bc0ab0d&quot;
warning: the debug information found in
&quot;/usr/lib/debug//lib64/ld-2.11.2.so.debug&quot; does not match
&quot;/lib64/ld-linux-x86-64.so.2&quot; (CRC mismatch).

warning: the debug information found in
&quot;/usr/lib/debug/lib64/ld-2.11.2.so.debug&quot; does not match
&quot;/lib64/ld-linux-x86-64.so.2&quot; (CRC mismatch).

Missing separate debuginfo for /lib64/ld-linux-x86-64.so.2
Try: zypper install -C
&quot;debuginfo(build-id)=cb584e8640c40d7b4adb4c44eb44e2f30bb274dc&quot;
Missing separate debuginfo for /lib64/libz.so.1
Try: zypper install -C
&quot;debuginfo(build-id)=cb036401316b8a63b5e6cc3ac3c584f77d649b7b&quot;
Missing separate debuginfo for /usr/lib64/libstdc++.so.6
Try: zypper install -C
&quot;debuginfo(build-id)=d3e842dd8ac07e4fa9457531cd53a409d0acf8c8&quot;
Missing separate debuginfo for /usr/lib64/gconv/UTF-16.so
Try: zypper install -C
&quot;debuginfo(build-id)=b6a351b5b1fda5ab4b78138a230d7fc36a392298&quot;
[Thread debugging using libthread_db enabled]
[New Thread 0x7fb930907710 (LWP 7340)]
0x00007fb9332df38d in read () from /lib64/libpthread.so.0
  2 Thread 0x7fb930907710 (LWP 7340)  0x00007fb932fa3d84 in sigsuspend () from
/lib64/libc.so.6
* 1 Thread 0x7fb933d47780 (LWP 7339)  0x00007fb9332df38d in read () from
/lib64/libpthread.so.0

Thread 2 (Thread 0x7fb930907710 (LWP 7340)):
#0  0x00007fb932fa3d84 in sigsuspend () from /lib64/libc.so.6
#1  0x000000000059289b in suspend_handler (sig=&lt;value optimized out&gt;,
siginfo=&lt;value optimized out&gt;, context=0x7fb930906940) at sgen-gc.c:4826
#2  &lt;signal handler called&gt;
#3  0x00007fb9332de5fe in sem_wait () from /lib64/libpthread.so.0
#4  0x00000000005d2af8 in mono_sem_wait (sem=0x8ed5c0, alertable=0) at
mono-semaphore.c:102
#5  0x000000000050304d in finalizer_thread (unused=&lt;value optimized out&gt;) at
gc.c:1046
#6  0x00000000005a6be9 in start_wrapper (data=0x998e80) at threads.c:782
#7  0x00000000005c14a4 in thread_start_routine (args=0x96c6e0) at
wthreads.c:285
#8  0x0000000000594f1d in gc_start_thread (arg=0x993470) at sgen-gc.c:5573
#9  0x00007fb9332d7a4f in start_thread () from /lib64/libpthread.so.0
#10 0x00007fb93304182d in clone () from /lib64/libc.so.6
#11 0x0000000000000000 in ?? ()

Thread 1 (Thread 0x7fb933d47780 (LWP 7339)):
#0  0x00007fb9332df38d in read () from /lib64/libpthread.so.0
#1  0x000000000048c95b in mono_handle_native_sigsegv (signal=&lt;value optimized
out&gt;, ctx=&lt;value optimized out&gt;) at mini-exceptions.c:1946
#2  0x00000000004dc0df in mono_arch_handle_altstack_exception
(sigctx=0x7fff4bd950c0, fault_addr=&lt;value optimized out&gt;, stack_ovf=0) at
exceptions-amd64.c:920
#3  &lt;signal handler called&gt;
#4  conservatively_pin_objects_from (start=0x7fff4bd97000, end=0x7fff4bd9a000,
start_nursery=0x7fb932800000, end_nursery=0x7fb932c00000, pin_type=&lt;value
optimized out&gt;)
    at sgen-gc.c:1932
#5  0x0000000000593576 in scan_thread_data (start_nursery=0x7fb932800000,
end_nursery=0x7fb932c00000, precise=0) at sgen-gc.c:4983
#6  0x0000000000593601 in pin_from_roots (start_nursery=0x7fb932800000,
end_nursery=0x7fb932c00000) at sgen-gc.c:2015
#7  0x00000000005996a7 in collect_nursery (requested_size=&lt;value optimized
out&gt;) at sgen-gc.c:2742
#8  0x000000000059bfea in minor_collect_or_expand_inner (size=4096) at
sgen-gc.c:3157
#9  0x000000000059c47e in mono_gc_alloc_obj_nolock (vtable=0xa20b28,
size=&lt;value optimized out&gt;) at sgen-gc.c:3497
#10 0x000000000059c830 in mono_gc_alloc_vector (vtable=0xa20b28, size=64,
max_length=4) at sgen-gc.c:3627
#11 0x0000000000534b16 in mono_array_new_specific (vtable=0xa20b28, n=4) at
object.c:4713
#12 0x00000000419b459d in ?? ()
#13 0x000000000091d660 in ?? ()
#14 0x0000000000000000 in ?? ()

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="106175.html">[Mono-bugs] [Bug 635377] Error creating wcf client proxy
</A></li>
	<LI>Next message: <A HREF="106181.html">[Mono-bugs] [Bug 650335] Keyboard shortcut does not work for SaveAll when code editor is active
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106178">[ date ]</a>
              <a href="thread.html#106178">[ thread ]</a>
              <a href="subject.html#106178">[ subject ]</a>
              <a href="author.html#106178">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
