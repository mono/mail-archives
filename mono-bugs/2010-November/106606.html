<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 647464] Debugger segfaults when hitting a breakpoint on sse4.2 enabled systems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20647464%5D%20Debugger%20segfaults%20when%20hitting%20a%0A%20breakpoint%20on%20sse4.2%20enabled%20systems&In-Reply-To=bug-647464-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="106604.html">
   <LINK REL="Next"  HREF="106608.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 647464] Debugger segfaults when hitting a breakpoint on sse4.2 enabled systems</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20647464%5D%20Debugger%20segfaults%20when%20hitting%20a%0A%20breakpoint%20on%20sse4.2%20enabled%20systems&In-Reply-To=bug-647464-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 647464] Debugger segfaults when hitting a breakpoint on sse4.2 enabled systems">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Nov 25 10:39:20 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="106604.html">[Mono-bugs] [Bug 647464] Debugger segfaults on ASP.Net MVC projects
</A></li>
        <LI>Next message: <A HREF="106608.html">[Mono-bugs] [Bug 655996] New: Socket method error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106606">[ date ]</a>
              <a href="thread.html#106606">[ thread ]</a>
              <a href="subject.html#106606">[ subject ]</a>
              <a href="author.html#106606">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=647464">https://bugzilla.novell.com/show_bug.cgi?id=647464</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=647464#c6">https://bugzilla.novell.com/show_bug.cgi?id=647464#c6</A>


Justen Hyde &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">Justen.Hyde at gmail.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
           Priority|P5 - None                   |P2 - High
            Summary|Debugger segfaults on       |Debugger segfaults when
                   |ASP.Net MVC projects        |hitting a breakpoint on
                   |                            |sse4.2 enabled systems
         OS/Version|Kubuntu                     |Ubuntu

--- Comment #6 from Justen Hyde &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">Justen.Hyde at gmail.com</A>&gt; 2010-11-25 15:39:18 UTC ---
Tracing back before the invocation of strstr by mini.c, the function in mini.c
is called from do_invoke_method in debugger-agent.c, line 4806. Likely this is
the root of the problem, since whatever is causing the trouble has to be
something to do with the debugger else there'd be problems when not debugging.
I also checked for problems on a 32 bit vm, and whilst that did use the sse42
strstr, it didn't have a misaligned stack (and hence didn't fall over).

It looks like the breakpoint doesn't cause a problem if the variable being
inspected isn't an object. doubles, ints, chars and strings are all fine
possibly because the do_invoke_method simply isn't called when inspecting these
types.

It also looks like the method being invoked by do_invoke_method is
System.Type::GetType(). I don't know if that's useful information, since the
problem has potentially already happened at this point, we just haven't hit any
instructions that require stack alignment.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="106604.html">[Mono-bugs] [Bug 647464] Debugger segfaults on ASP.Net MVC projects
</A></li>
	<LI>Next message: <A HREF="106608.html">[Mono-bugs] [Bug 655996] New: Socket method error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106606">[ date ]</a>
              <a href="thread.html#106606">[ thread ]</a>
              <a href="subject.html#106606">[ subject ]</a>
              <a href="author.html#106606">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
