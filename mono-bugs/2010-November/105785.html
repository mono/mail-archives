<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 650979] New: Wrong exit code returned from parent	process
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20650979%5D%20New%3A%20Wrong%20exit%20code%20returned%20from%20parent%0A%09process&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="105784.html">
   <LINK REL="Next"  HREF="105786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 650979] New: Wrong exit code returned from parent	process</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20650979%5D%20New%3A%20Wrong%20exit%20code%20returned%20from%20parent%0A%09process&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 650979] New: Wrong exit code returned from parent	process">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Nov  3 10:33:40 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="105784.html">[Mono-bugs] [Bug 649546] RadAjaxManagerProxy in WebUserControl	problem
</A></li>
        <LI>Next message: <A HREF="105786.html">[Mono-bugs] [Bug 650979] Wrong exit code returned from parent	process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105785">[ date ]</a>
              <a href="thread.html#105785">[ thread ]</a>
              <a href="subject.html#105785">[ subject ]</a>
              <a href="author.html#105785">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=650979">https://bugzilla.novell.com/show_bug.cgi?id=650979</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=650979#c0">https://bugzilla.novell.com/show_bug.cgi?id=650979#c0</A>


           Summary: Wrong exit code returned from parent process
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.8.x
          Platform: x86
        OS/Version: Other
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rajoo at mail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; sv-SE; rv:1.9.2.12)
Gecko/20101026 Firefox/3.6.12

When a process grabs its parent by Process.GetProcessById(), the exit code
returned from the parents Process instance is 0, even if the parent is still
alive. According to the source code, the exit code in this case should be equal
to STILL_ACTIVE (or 259).

This in turn results in wrong return value of the Process.HasExited property
because it is evaluated against the exit code.

Everything works as intended in Mono 2.6.7, but not since Mono 2.8.

I've attached some sample code which works fine on Mono 2.6.7 but fails on Mono
2.8. Compile and run parent.exe, which will spawn a child.exe waiting for its
parent to exit.

Reproducible: Always

Steps to Reproduce:
Compile the attached files and run parent.exe
Actual Results:  
[P] Parent started with pid 24100
[C] Child started with pid 24103, my expected parent pid is 24100
[C] Parent process found with pid 24100
[C] Parent seems to be dead
[C] Child exited
[P] Parent exited

Expected Results:  
[P] Parent started with pid 21443
[C] Child started with pid 21446, my expected parent pid is 21443
[C] Parent process found with pid 21443
[C] Waiting for parent...
[C] Waiting for parent...
[C] Waiting for parent...
[C] Waiting for parent...
[C] Waiting for parent...
[C] Waiting for parent...
[C] Waiting for parent...
[C] Waiting for parent...
[C] Waiting for parent...
[C] Waiting for parent...
[P] Parent exited
[C] Parent seems to be dead
[C] Child exited

Platform: Intel Atom
Operatingsystem: Meego (Linux 2.6.33.5)

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="105784.html">[Mono-bugs] [Bug 649546] RadAjaxManagerProxy in WebUserControl	problem
</A></li>
	<LI>Next message: <A HREF="105786.html">[Mono-bugs] [Bug 650979] Wrong exit code returned from parent	process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105785">[ date ]</a>
              <a href="thread.html#105785">[ thread ]</a>
              <a href="subject.html#105785">[ subject ]</a>
              <a href="author.html#105785">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
