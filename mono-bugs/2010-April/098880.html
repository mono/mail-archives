<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 593951] New: RichTextxBox RTF Parsing failure: Malformed color entry
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20593951%5D%20New%3A%20RichTextxBox%20RTF%20Parsing%20failure%3A%0A%20Malformed%20color%20entry&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="098879.html">
   <LINK REL="Next"  HREF="098892.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 593951] New: RichTextxBox RTF Parsing failure: Malformed color entry</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20593951%5D%20New%3A%20RichTextxBox%20RTF%20Parsing%20failure%3A%0A%20Malformed%20color%20entry&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 593951] New: RichTextxBox RTF Parsing failure: Malformed color entry">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Apr  6 05:10:55 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="098879.html">[Mono-bugs] [Bug 588098] MonoTouch App crashes 9 out of 10 times when run on Simulator
</A></li>
        <LI>Next message: <A HREF="098892.html">[Mono-bugs] [Bug 593951] RichTextxBox RTF Parsing failure:	Malformed color entry
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#98880">[ date ]</a>
              <a href="thread.html#98880">[ thread ]</a>
              <a href="subject.html#98880">[ subject ]</a>
              <a href="author.html#98880">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=593951">http://bugzilla.novell.com/show_bug.cgi?id=593951</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=593951#c0">http://bugzilla.novell.com/show_bug.cgi?id=593951#c0</A>


           Summary: RichTextxBox RTF Parsing failure: Malformed color
                    entry
    Classification: Mono
           Product: Mono: Runtime
           Version: 2.6.x
          Platform: Macintosh
        OS/Version: Mac OS X 10.6
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jchampion at zetacentauri.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US;
rv:1.9.2) Gecko/20100115 Firefox/3.6

When generating colored text using a '\colortbl' in a RichTextBox, the
following method works fine on Windows, but fails on MacOSX 10.6.2 with Mono
2.6.1 and 2.6.3.  It also generates the same results on Linux with Mono
2.4.2.3.

See this link for code to reproduce the problem:

<A HREF="http://stackoverflow.com/questions/2534296/rtftextbox-works-on-windows-mono-throws-rtf-parsing-failure-malformed-color-en">http://stackoverflow.com/questions/2534296/rtftextbox-works-on-windows-mono-throws-rtf-parsing-failure-malformed-color-en</A>

The error shown in the terminal is this:

RTF Parsing failure: Malformed color entry
RTF Stream Info: Pos:324 Line:1
TokenClass:Text, Major:8, Minor:0, Param:-10000000, Text:

The RichTextBox remains blank when the error is thrown.  Program does not
crash.

The error appears to be generated in System.Windows.Forms.RTF.ReadColorTbl()

Reproducible: Always

Steps to Reproduce:
1.See sample code at Stackoverflow.com link.
2.Pass in a RichTextBox control and any text to reproduce the error.
Actual Results:  
Rather than populating with colored text, the RichTextBox remains blank.

Expected Results:  
The RichTextBox will show text in one of the colors listed in the color table.

If you would like to run the application that produces this error, you can
download it here:

<A HREF="http://basternae.org/Basternae3Editor_v0.49.zip">http://basternae.org/Basternae3Editor_v0.49.zip</A>

To generate the error using this app:
1. run the start.sh file in a terminal window.
2. Click File --&gt; New.
3. Click the next to last icon in the toolstrip, a set of gears that shows the
tooltip &quot;Edit Area Settings&quot;.
4. Type anything in the &quot;Area Name&quot; text box.  The terminal will show the
'malformed color entry' errors.

I can provide source code if needed, but the only RTF code that executes is at
the Stack Overflow link above.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="098879.html">[Mono-bugs] [Bug 588098] MonoTouch App crashes 9 out of 10 times when run on Simulator
</A></li>
	<LI>Next message: <A HREF="098892.html">[Mono-bugs] [Bug 593951] RichTextxBox RTF Parsing failure:	Malformed color entry
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#98880">[ date ]</a>
              <a href="thread.html#98880">[ thread ]</a>
              <a href="subject.html#98880">[ subject ]</a>
              <a href="author.html#98880">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
