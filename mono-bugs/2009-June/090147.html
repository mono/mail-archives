<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 515850] New: Applying transform to drawings works incorrectly when PageUnit != Pixel
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20515850%5D%20New%3A%20Applying%20transform%20to%20drawings%20works%0A%20incorrectly%20when%20PageUnit%20%21%3D%20Pixel&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="090144.html">
   <LINK REL="Next"  HREF="090148.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 515850] New: Applying transform to drawings works incorrectly when PageUnit != Pixel</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20515850%5D%20New%3A%20Applying%20transform%20to%20drawings%20works%0A%20incorrectly%20when%20PageUnit%20%21%3D%20Pixel&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 515850] New: Applying transform to drawings works incorrectly when PageUnit != Pixel">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Jun 23 23:37:50 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="090144.html">[Mono-bugs] [Bug 515801] New: Reporting CS0738 instead of CS0535
</A></li>
        <LI>Next message: <A HREF="090148.html">[Mono-bugs] [Bug 515850] Applying transform to drawings works incorrectly when PageUnit != Pixel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#90147">[ date ]</a>
              <a href="thread.html#90147">[ thread ]</a>
              <a href="subject.html#90147">[ subject ]</a>
              <a href="author.html#90147">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=515850">http://bugzilla.novell.com/show_bug.cgi?id=515850</A>


           Summary: Applying transform to drawings works incorrectly when
                    PageUnit != Pixel
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.4.x
          Platform: x86
        OS/Version: openSUSE 11.1
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Sys.Drawing.
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">amorozov at vtc.ru</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=299891)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=299891">http://bugzilla.novell.com/attachment.cgi?id=299891</A>)
good and bad output in one pic

User-Agent:       Opera/9.64 (Windows NT 5.1; U; ru) Presto/2.1.1

Suppose below code is Form_Paint event handler

===

Graphics g = e.Graphics;
g.PageUnit = GraphicsUnit.Point;        // !!!

Pen pen = new Pen(Color.Black, 2);

for(int x = 0; x &lt; 5; x++)
  for (int y = 0; y &lt; 5; y++)
  {
    Matrix m = new Matrix(1, 0, 0, 1, x * 23, y * 23);

    g.Transform = m;

    g.DrawLine(pen, 5, 5, 25, 5); 
    g.DrawLine(pen, 25, 5, 25, 25); 
    g.DrawLine(pen, 25, 25, 5, 25); 
    g.DrawLine(pen, 5, 25, 5, 5);
  }

===



Reproducible: Always

Steps to Reproduce:
1.
2.
3.
Actual Results:  
Output is ok when PageUnit = GraphicsUnit.Pixel and when PageUnit =
GraphicsUnit.Point then squares &quot;overlapped&quot;.

Expected Results:  
Output produced is 5x5 squares. Squares should NOT overlap each other
regardless PageUnit.

Tested on 2.4 stable and 136748 SVN revision libgdiplus.

Seems that first point (x1, y1) DrawLine is transforming correctly but second
(x2, y2) is not.

Also fails if PageUnit = Milimiter or PageUnit = Inch.

Not sure but can corelate with Bug 392391.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="090144.html">[Mono-bugs] [Bug 515801] New: Reporting CS0738 instead of CS0535
</A></li>
	<LI>Next message: <A HREF="090148.html">[Mono-bugs] [Bug 515850] Applying transform to drawings works incorrectly when PageUnit != Pixel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#90147">[ date ]</a>
              <a href="thread.html#90147">[ thread ]</a>
              <a href="subject.html#90147">[ subject ]</a>
              <a href="author.html#90147">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
