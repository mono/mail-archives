<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 460242] New: Compilation of C# involving generically-typed collection classes fails with a System .IndexOutOfRangeException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20460242%5D%20New%3A%20Compilation%20of%20C%23%20involving%0A%20generically-typed%20collection%20classes%20fails%20with%20a%20System%0A%20.IndexOutOfRangeException&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083519.html">
   <LINK REL="Next"  HREF="083522.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 460242] New: Compilation of C# involving generically-typed collection classes fails with a System .IndexOutOfRangeException</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20460242%5D%20New%3A%20Compilation%20of%20C%23%20involving%0A%20generically-typed%20collection%20classes%20fails%20with%20a%20System%0A%20.IndexOutOfRangeException&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 460242] New: Compilation of C# involving generically-typed collection classes fails with a System .IndexOutOfRangeException">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Dec 18 10:40:53 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="083519.html">[Mono-bugs] [Bug 460236] New: mono &lt;dir&gt; crashes
</A></li>
        <LI>Next message: <A HREF="083522.html">[Mono-bugs] [Bug 460242] Compilation of C# involving generically-typed collection classes fails with a System .IndexOutOfRangeException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83520">[ date ]</a>
              <a href="thread.html#83520">[ thread ]</a>
              <a href="subject.html#83520">[ subject ]</a>
              <a href="author.html#83520">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=460242">https://bugzilla.novell.com/show_bug.cgi?id=460242</A>


           Summary: Compilation of C# involving generically-typed collection
                    classes fails with a System.IndexOutOfRangeException
           Product: Mono: Compilers
           Version: SVN
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: C#
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">cbutor at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
                CC: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">billholmes54 at gmail.com</A>
          Found By: Community User


Created an attachment (id=260885)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=260885">https://bugzilla.novell.com/attachment.cgi?id=260885</A>)
C# code that produces the compiler error

When compiling C# code with classes based on generically-typed signatures
(based on System.Collections.Generic), the mono C# compiler fails and produces
a &quot;System.IndexOutOfRangeException&quot;.  Compilation succeeds on .NET.  

NOTE:  This is a regression from mono version 1.9. (applicable to 2.0, 2.2, and
SVN)

The attached program illustrates this compilation failure when compiled using
gmcs.  For this specific example, the stack trace is as follows:

Exception caught by the compiler while compiling:
   Block that caused the problem begin at: Foo.cs(10,24):
                     Block being compiled: [Foo.cs(11,5):,Foo.cs(17,5):]
System.IndexOutOfRangeException: Array index is out of range.
Internal compiler error at Foo.cs(10,24):: exception caught while emitting
MethodBuilder [Foo::Main]

Unhandled Exception: System.IndexOutOfRangeException: Array index is out of
range.
  at Mono.CSharp.ConstraintChecker.CheckConstraint (IResolveContext ec,
System.Type ptype, Mono.CSharp.Expression expr, System.Type ctype) [0x00000]
  at Mono.CSharp.ConstraintChecker.CheckConstraints (IResolveContext ec, Int32
index) [0x00000]
  at Mono.CSharp.ConstraintChecker.CheckConstraints (IResolveContext ec)
[0x00000]
  at Mono.CSharp.ConstraintChecker.CheckConstraints (Mono.CSharp.EmitContext
ec, System.Reflection.MethodBase definition, System.Reflection.MethodBase
instantiated, Location loc) [0x00000]
  at Mono.CSharp.MethodGroupExpr.OverloadResolve (Mono.CSharp.EmitContext ec,
System.Collections.ArrayList&amp; Arguments, Boolean may_fail, Location loc)
[0x00000]
  at Mono.CSharp.Invocation.DoResolveOverload (Mono.CSharp.EmitContext ec)
[0x00000]
  at Mono.CSharp.Invocation.DoResolve (Mono.CSharp.EmitContext ec) [0x00000]
  at Mono.CSharp.Expression.Resolve (Mono.CSharp.EmitContext ec, ResolveFlags
flags) [0x00000]
  at Mono.CSharp.Expression.Resolve (Mono.CSharp.EmitContext ec) [0x00000]
  at Mono.CSharp.ExpressionStatement.ResolveStatement (Mono.CSharp.EmitContext
ec) [0x00000]
  at Mono.CSharp.StatementExpression.Resolve (Mono.CSharp.EmitContext ec)
[0x00000]
  at Mono.CSharp.Block.Resolve (Mono.CSharp.EmitContext ec) [0x00000]
  at Mono.CSharp.ExplicitBlock.Resolve (Mono.CSharp.EmitContext ec) [0x00000]
  at Mono.CSharp.EmitContext.ResolveTopBlock (Mono.CSharp.EmitContext
anonymous_method_host, Mono.CSharp.ToplevelBlock block, Mono.CSharp.Parameters
ip, IMethodData md, System.Boolean&amp; unreachable) [0x00000]


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>













































































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083519.html">[Mono-bugs] [Bug 460236] New: mono &lt;dir&gt; crashes
</A></li>
	<LI>Next message: <A HREF="083522.html">[Mono-bugs] [Bug 460242] Compilation of C# involving generically-typed collection classes fails with a System .IndexOutOfRangeException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83520">[ date ]</a>
              <a href="thread.html#83520">[ thread ]</a>
              <a href="subject.html#83520">[ subject ]</a>
              <a href="author.html#83520">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
