<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 473899] New: UnicodeEncoding.Unicode.GetString allows invalid code points through
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20473899%5D%20New%3A%20UnicodeEncoding.Unicode.GetString%0A%20allows%20invalid%20code%20points%20through&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="085736.html">
   <LINK REL="Next"  HREF="085740.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 473899] New: UnicodeEncoding.Unicode.GetString allows invalid code points through</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20473899%5D%20New%3A%20UnicodeEncoding.Unicode.GetString%0A%20allows%20invalid%20code%20points%20through&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 473899] New: UnicodeEncoding.Unicode.GetString allows invalid code points through">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Feb  9 08:51:11 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="085736.html">[Mono-bugs] [Bug 443508] monodoc crashes with selecting namespace	node
</A></li>
        <LI>Next message: <A HREF="085740.html">[Mono-bugs] [Bug 473899] UnicodeEncoding.Unicode.GetString allows invalid code points through
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85739">[ date ]</a>
              <a href="thread.html#85739">[ thread ]</a>
              <a href="subject.html#85739">[ subject ]</a>
              <a href="author.html#85739">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=473899">https://bugzilla.novell.com/show_bug.cgi?id=473899</A>


           Summary: UnicodeEncoding.Unicode.GetString allows invalid code
                    points through
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.2.x
          Platform: x86
        OS/Version: Windows XP
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: CORLIB
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">joe at mistachkin.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.20)
Gecko/20081217 Firefox/2.0.0.20 (.NET CLR 3.5.30729)


The Eagle unit test fileIO-1.11 demonstrates an inconsistency between the
UnicodeEncoding implementations on Mono and .NET.  It also appears to
demonstrate that Mono is not in compliance with the Unicode standard.

The test fails because two code points from a range of &quot;invalid&quot; code points is
returned by UnicodeEncoding.Unicode.GetString, in this case U+D9D8 and U+DFDE.

&gt;<i>From the Wikipedia article &quot;<A HREF="http://en.wikipedia.org/wiki/UTF-8&quot;:">http://en.wikipedia.org/wiki/UTF-8&quot;:</A>
</I>
&lt;snip&gt;
&quot;Unicode also disallows the 2048 code points U+D800..U+DFFF (the UTF-16
surrogate pairs).&quot;
&lt;/snip&gt;


Reproducible: Always

Steps to Reproduce:
1. Download the &quot;Mono-on-Unix&quot; binaries distribution from: <A HREF="http://eagle.to/">http://eagle.to/</A>
2. Start the EagleShell.exe under the Mono of your choice (fails in 2.2, 2.0
has not been tested).
3. Type &quot;set argv [list -constraints monoBug]; set no(sql) true&quot; and hit enter.
4. Type &quot;#test file-io*&quot; and hit enter to see the failure (complete with stack
trace).

Alternatively, you should be able to reproduce this bug by reading the contents
of the test data file (included in the binary distribution as
&quot;Eagle/tests/file.dat&quot; and in the source distribution as
&quot;Eagle/Library/Tests/file.dat&quot;) using File.ReadAllBytes or similar and then
calling UnicodeEncoding.Unicode.GetString() on the resulting byte array.

Actual Results:  
The unit test fails because the invalid code points U+D9D8 and U+DFDE are
returned.

Expected Results:  
The unit test should pass.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>














































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="085736.html">[Mono-bugs] [Bug 443508] monodoc crashes with selecting namespace	node
</A></li>
	<LI>Next message: <A HREF="085740.html">[Mono-bugs] [Bug 473899] UnicodeEncoding.Unicode.GetString allows invalid code points through
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85739">[ date ]</a>
              <a href="thread.html#85739">[ thread ]</a>
              <a href="subject.html#85739">[ subject ]</a>
              <a href="author.html#85739">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
