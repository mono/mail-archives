<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 471379] [REGRESSION] mono-2.4 preview 1: mcs: unbounded memory consumption growth when compiling cli_uno_bridge.dll from Gentoo openoffice-3.0.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20471379%5D%20%5BREGRESSION%5D%20mono-2.4%20preview%201%3A%20mcs%3A%0A%20unbounded%20memory%20consumption%20growth%20when%20compiling%20cli_uno_bridge.dll%20from%0A%20Gentoo%20openoffice-3.0.1&In-Reply-To=bug-471379-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="085385.html">
   <LINK REL="Next"  HREF="085522.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 471379] [REGRESSION] mono-2.4 preview 1: mcs: unbounded memory consumption growth when compiling cli_uno_bridge.dll from Gentoo openoffice-3.0.1</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20471379%5D%20%5BREGRESSION%5D%20mono-2.4%20preview%201%3A%20mcs%3A%0A%20unbounded%20memory%20consumption%20growth%20when%20compiling%20cli_uno_bridge.dll%20from%0A%20Gentoo%20openoffice-3.0.1&In-Reply-To=bug-471379-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 471379] [REGRESSION] mono-2.4 preview 1: mcs: unbounded memory consumption growth when compiling cli_uno_bridge.dll from Gentoo openoffice-3.0.1">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Feb  3 19:57:15 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="085385.html">[Mono-bugs] [Bug 471379] [REGRESSION] mono-2.4 preview 1: mcs: unbounded memory consumption growth when compiling cli_uno_bridge.dll from Gentoo openoffice-3.0.1
</A></li>
        <LI>Next message: <A HREF="085522.html">[Mono-bugs] [Bug 471379] [REGRESSION] mono-2.4 preview 1: mcs: unbounded memory consumption growth when compiling cli_uno_bridge.dll from Gentoo openoffice-3.0.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85510">[ date ]</a>
              <a href="thread.html#85510">[ thread ]</a>
              <a href="subject.html#85510">[ subject ]</a>
              <a href="author.html#85510">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=471379">https://bugzilla.novell.com/show_bug.cgi?id=471379</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">loki_val at gentoo.org</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=471379#c2">https://bugzilla.novell.com/show_bug.cgi?id=471379#c2</A>





--- Comment #2 from Peter Alfredsen &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">loki_val at gentoo.org</A>&gt;  2009-02-03 17:57:13 MST ---
In bash I'm unable to reproduce the issue, but I am able to get a backtrace
from Mono (2.4 preview 2), attached at the bottom of this comment. With the
provided makefiles, it's entirely reproducible with 2.4 preview 2 and does not
happen with 2.2. I don't know how openoffice's build system work, but I can
tell that the only thing we do to enable building the mono bindings is to pass
--enable-mono to configure.

loki mono_bridge # gdb --args /usr/bin/mono /usr/lib64/mono/1.0/mcs.exe
-target:library -unsafe -out:../../unxlngx6.pro/bin/cli_uno_bridge.dll
-keyfile:../../unxlngx6.pro/bin/cliuno.snk
-reference:../../unxlngx6.pro/bin/cli_basetypes.dll
-reference:../../unxlngx6.pro/bin/cli_uretypes.dll  binaryuno.cs bridge.cs
cli_environment.cs managed_proxy.cs rtl_ustring.cs typeclass.cs
typedescription.cs  uik.cs uno_proxy.cs
GNU gdb 6.8
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;<A HREF="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</A>&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-pc-linux-gnu&quot;...
(gdb) run
Starting program: /usr/bin/mono /usr/lib64/mono/1.0/mcs.exe -target:library
-unsafe -out:../../unxlngx6.pro/bin/cli_uno_bridge.dll
-keyfile:../../unxlngx6.pro/bin/cliuno.snk
-reference:../../unxlngx6.pro/bin/cli_basetypes.dll
-reference:../../unxlngx6.pro/bin/cli_uretypes.dll binaryuno.cs bridge.cs
cli_environment.cs managed_proxy.cs rtl_ustring.cs typeclass.cs
typedescription.cs uik.cs uno_proxy.cs
[Thread debugging using libthread_db enabled]
[New Thread 0x7f8400489730 (LWP 12129)]
[New Thread 0x404be950 (LWP 12132)]
[New Thread 0x41789950 (LWP 12133)]

Program received signal SIGPWR, Power fail/restart.
[Switching to Thread 0x41789950 (LWP 12133)]
0x00007f83ffbc0bb1 in sem_wait () from /lib/libpthread.so.0
Current language:  auto; currently asm
(gdb) bt
#0  0x00007f83ffbc0bb1 in sem_wait () from /lib/libpthread.so.0
#1  0x00007f83ffed657c in finalizer_thread (unused=&lt;value optimized out&gt;) at
gc.c:935
#2  0x00007f83ffef7033 in start_wrapper (data=&lt;value optimized out&gt;) at
threads.c:623
#3  0x00007f83fff64cfb in thread_start_routine (args=0x2226db0) at
threads.c:286
#4  0x00007f83fff874b2 in GC_start_routine (arg=&lt;value optimized out&gt;) at
pthread_support.c:1382
#5  0x00007f83ffbbb037 in start_thread (arg=&lt;value optimized out&gt;) at
pthread_create.c:297
#6  0x00007f83ff92f76d in clone () from /lib/libc.so.6
#7  0x0000000000000000 in ?? ()
(gdb) bt full
#0  0x00007f83ffbc0bb1 in sem_wait () from /lib/libpthread.so.0
No locals.
#1  0x00007f83ffed657c in finalizer_thread (unused=&lt;value optimized out&gt;) at
gc.c:935
    __PRETTY_FUNCTION__ = &quot;finalizer_thread&quot;
#2  0x00007f83ffef7033 in start_wrapper (data=&lt;value optimized out&gt;) at
threads.c:623
    start_info = (struct StartInfo *) 0x22375c0
    start_func = (guint32 (*)(void *)) 0x7f83ffed6540 &lt;finalizer_thread&gt;
    start_arg = (void *) 0x0
    tid = 1098422608
    thread = (MonoThread *) 0x7f840047da00
    start_delegate = (MonoObject *) 0x0
    __PRETTY_FUNCTION__ = &quot;start_wrapper&quot;
#3  0x00007f83fff64cfb in thread_start_routine (args=0x2226db0) at
threads.c:286
    thr_ret = -512
    __PRETTY_FUNCTION__ = &quot;thread_start_routine&quot;
#4  0x00007f83fff874b2 in GC_start_routine (arg=&lt;value optimized out&gt;) at
pthread_support.c:1382
    __cancel_buf = {__cancel_jmp_buf = {{__cancel_jmp_buf = {1098422608,
-1773648032686801388, 140733332517120, 1098420768, 0, 4096,
-1773786636106990060, 1757885386564828692}, __mask_was_saved = 0}}, __pad =
{0x41789190, 0x0, 0x0, 
    0x0}}
    not_first_call = &lt;value optimized out&gt;
    dummy = 0
    result = &lt;value optimized out&gt;
    start = &lt;value optimized out&gt;
    start_arg = (void *) 0x2226db0
#5  0x00007f83ffbbb037 in start_thread (arg=&lt;value optimized out&gt;) at
pthread_create.c:297
    __res = &lt;value optimized out&gt;
    pd = (struct pthread *) 0x41789950
    unwind_buf = {cancel_jmp_buf = {{jmp_buf = {1098422608,
-1773648032686801388, 140733332517120, 1098420768, 0, 4096,
-1773786636146835948, 1757885952071302676}, mask_was_saved = 0}}, priv = {pad =
{0x0, 0x0, 0x0, 0x0}, data = {
      prev = 0x0, cleanup = 0x0, canceltype = 0}}}
    not_first_call = 1098422608
    robust = &lt;value optimized out&gt;
#6  0x00007f83ff92f76d in clone () from /lib/libc.so.6
    fstab_state = {fs_fp = 0x0, fs_buffer = 0x0, fs_mntres = {mnt_fsname = 0x0,
mnt_dir = 0x0, mnt_type = 0x0, mnt_opts = 0x0, mnt_freq = 0, mnt_passno = 0},
fs_ret = {fs_spec = 0x0, fs_file = 0x0, fs_vfstype = 0x0, 
    fs_mntops = 0x0, fs_type = 0x0, fs_freq = 0, fs_passno = 0}}
    __elf_set___libc_subfreeres_element_fstab_free__ = (const void *)
0x7f83ff965e40
#7  0x0000000000000000 in ?? ()

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="085385.html">[Mono-bugs] [Bug 471379] [REGRESSION] mono-2.4 preview 1: mcs: unbounded memory consumption growth when compiling cli_uno_bridge.dll from Gentoo openoffice-3.0.1
</A></li>
	<LI>Next message: <A HREF="085522.html">[Mono-bugs] [Bug 471379] [REGRESSION] mono-2.4 preview 1: mcs: unbounded memory consumption growth when compiling cli_uno_bridge.dll from Gentoo openoffice-3.0.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85510">[ date ]</a>
              <a href="thread.html#85510">[ thread ]</a>
              <a href="subject.html#85510">[ subject ]</a>
              <a href="author.html#85510">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
