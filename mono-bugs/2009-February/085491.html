<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 324945] using assembly load/resolve hooks can lead to runtime crashes/hangs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20324945%5D%20using%20assembly%20load/resolve%20hooks%20can%20lead%0A%20to%20runtime%20crashes/hangs&In-Reply-To=bug-324945-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="085488.html">
   <LINK REL="Next"  HREF="085492.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 324945] using assembly load/resolve hooks can lead to runtime crashes/hangs</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20324945%5D%20using%20assembly%20load/resolve%20hooks%20can%20lead%0A%20to%20runtime%20crashes/hangs&In-Reply-To=bug-324945-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 324945] using assembly load/resolve hooks can lead to runtime crashes/hangs">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Feb  3 13:54:14 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="085488.html">[Mono-bugs] [Bug 470451] null reference in TreeView/MouseMoveHandler
</A></li>
        <LI>Next message: <A HREF="085492.html">[Mono-bugs] [Bug 469529] Verifier bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85491">[ date ]</a>
              <a href="thread.html#85491">[ thread ]</a>
              <a href="subject.html#85491">[ subject ]</a>
              <a href="author.html#85491">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=324945">https://bugzilla.novell.com/show_bug.cgi?id=324945</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jaebird at gmail.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=324945#c7">https://bugzilla.novell.com/show_bug.cgi?id=324945#c7</A>


Jae Stutzman &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jaebird at gmail.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jaebird at gmail.com</A>




--- Comment #7 from Jae Stutzman &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jaebird at gmail.com</A>&gt;  2009-02-03 11:54:13 MST ---
We have two threads running simultaneously in our app at startup. The first
&quot;Kernel&quot; is doing a sequential lookup for a particular type using a homegrown
type loader. The second is the UI thread using Mono.Addins to load types. You
can see from the stacktrace that it appears that
System.Reflection.MonoCMethod.InternalInvoke and
System.Reflection.Assembly.GetTypes are in deadlock.

Stacktrace of similar issue:

&quot;Main Thread / UI&quot; tid=0x0xb7d066d0 this=0x0x3eed8:
  at (wrapper managed-to-native) System.Reflection.MonoCMethod.InternalInvoke
(object,object[],System.Exception&amp;) &lt;0x00004&gt;
  at (wrapper managed-to-native) System.Reflection.MonoCMethod.InternalInvoke
(object,object[],System.Exception&amp;) &lt;0xffffffff&gt;
  at System.Reflection.MonoCMethod.Invoke
(object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo)
[0x000a6] in
/home/user/mono2.2/mono-2.2/mcs/class/corlib/System.Reflection/MonoMethod.cs:434
  at System.Reflection.MonoCMethod.Invoke
(System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo)
[0x00000] in
/home/user/mono2.2/mono-2.2/mcs/class/corlib/System.Reflection/MonoMethod.cs:449
  at System.Reflection.ConstructorInfo.Invoke (object[]) [0x0000e] in
/home/user/mono2.2/mono-2.2/mcs/class/corlib/System.Reflection/ConstructorInfo.cs:77
  at System.Activator.CreateInstance (System.Type,bool) [0x00083] in
/home/user/mono2.2/mono-2.2/mcs/class/corlib/System/Activator.cs:323
  at System.Activator.CreateInstance (System.Type) [0x00000] in
/home/user/mono2.2/mono-2.2/mcs/class/corlib/System/Activator.cs:213
  at Mono.Addins.TypeExtensionNode.CreateInstance () [0x00000] in
/home/user/Dev/branches/dev/App/External/Mono/Addins/Mono.Addins/TypeExtensionNode.cs:54
  at Mono.Addins.InstanceExtensionNode.GetInstance () [0x0000b] in
/home/user/Dev/branches/dev/App/External/Mono/Addins/Mono.Addins/InstanceExtensionNode.cs:49
  at Mono.Addins.InstanceExtensionNode.GetInstance (System.Type) [0x00000] in
/home/user/Dev/branches/dev/App/External/Mono/Addins/Mono.Addins/InstanceExtensionNode.cs:40
  at Mono.Addins.ExtensionNode.GetChildObjects (System.Type,bool) [0x00058] in
/home/user/Dev/branches/dev/App/External/Mono/Addins/Mono.Addins/ExtensionNode.cs:190
  at Mono.Addins.ExtensionContext.GetExtensionObjects (string,System.Type,bool)
[0x0001f] in
/home/user/Dev/branches/dev/App/External/Mono/Addins/Mono.Addins/ExtensionContext.cs:279
  at Mono.Addins.ExtensionContext.GetExtensionObjects (string,System.Type)
[0x00000] in
/home/user/Dev/branches/dev/App/External/Mono/Addins/Mono.Addins/ExtensionContext.cs:271
  at Mono.Addins.AddinManager.GetExtensionObjects (string,System.Type)
[0x00005] in
/home/user/Dev/branches/dev/App/External/Mono/Addins/Mono.Addins/AddinManager.cs:248
&lt;snip&gt;.....

&quot;Kernel&quot; tid=0x0xb6c2fb90 this=0x0x3e000:
  at (wrapper managed-to-native) System.Reflection.Assembly.GetTypes (bool)
&lt;0x00004&gt;
  at (wrapper managed-to-native) System.Reflection.Assembly.GetTypes (bool)
&lt;0xffffffff&gt;
  at System.Reflection.Assembly.GetTypes () [0x00000] in
/home/user/mono2.2/mono-2.2/mcs/class/corlib/System.Reflection/Assembly.cs:348
&lt;snip&gt;....
main.cs:232
  at (wrapper runtime-invoke) object.runtime_invoke_void__this__
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>











































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="085488.html">[Mono-bugs] [Bug 470451] null reference in TreeView/MouseMoveHandler
</A></li>
	<LI>Next message: <A HREF="085492.html">[Mono-bugs] [Bug 469529] Verifier bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85491">[ date ]</a>
              <a href="thread.html#85491">[ thread ]</a>
              <a href="subject.html#85491">[ subject ]</a>
              <a href="author.html#85491">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
