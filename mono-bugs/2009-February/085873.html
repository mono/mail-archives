<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 474718] New: correct program that never ends, but it does if you add a WriteLine in a specific place
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20474718%5D%20New%3A%20correct%20program%20that%20never%20ends%2C%0A%20but%20it%20does%20if%20you%20add%20a%20WriteLine%20in%20a%20specific%20place&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="085872.html">
   <LINK REL="Next"  HREF="085882.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 474718] New: correct program that never ends, but it does if you add a WriteLine in a specific place</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20474718%5D%20New%3A%20correct%20program%20that%20never%20ends%2C%0A%20but%20it%20does%20if%20you%20add%20a%20WriteLine%20in%20a%20specific%20place&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 474718] New: correct program that never ends, but it does if you add a WriteLine in a specific place">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Feb 11 06:40:17 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="085872.html">[Mono-bugs] [Bug 474716] New: Separator image not shown correctly on horizontal Menu
</A></li>
        <LI>Next message: <A HREF="085882.html">[Mono-bugs] [Bug 474718] correct program that never ends, but it does if you add a WriteLine in a specific place
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85873">[ date ]</a>
              <a href="thread.html#85873">[ thread ]</a>
              <a href="subject.html#85873">[ subject ]</a>
              <a href="author.html#85873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=474718">https://bugzilla.novell.com/show_bug.cgi?id=474718</A>


           Summary: correct program that never ends, but it does if you
                    add a WriteLine in a specific place
    Classification: Mono
           Product: Mono: Runtime
           Version: 2.2.x
          Platform: x86
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: JIT
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">anto.cuni at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=271831)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=271831">https://bugzilla.novell.com/attachment.cgi?id=271831</A>)
IL code reproducing the bug

User-Agent:       Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.1.11)
Gecko/20080111 Firefox/2.0.0.11

The attached IL program never ends. It seems that the JIT produce an infinite
loop, even if the program itself does not contain any loop.
Howover, if you uncomment the ldstr/WriteLine at lines 50-51, the JIT produces
the right code and everything works as expected.


Reproducible: Always

Steps to Reproduce:
1.ilasm2 bug.il
2.mono bug.exe
3.ctrl-C to stop it :-)
Actual Results:  
the program doesn't end

Expected Results:  
the program should print 0

This is the broken mono version I got:
$ mono -V
Mono JIT compiler version 2.2 (tarball Thu Feb  5 11:12:49 CET 2009)
Copyright (C) 2002-2008 Novell, Inc and Contributors. www.mono-project.com
        TLS:           __thread
        GC:            Included Boehm (with typed GC)
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  x86
        Disabled:      none

Tried on another machine, mono 1.2.2.1 works correctly.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


















































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="085872.html">[Mono-bugs] [Bug 474716] New: Separator image not shown correctly on horizontal Menu
</A></li>
	<LI>Next message: <A HREF="085882.html">[Mono-bugs] [Bug 474718] correct program that never ends, but it does if you add a WriteLine in a specific place
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85873">[ date ]</a>
              <a href="thread.html#85873">[ thread ]</a>
              <a href="subject.html#85873">[ subject ]</a>
              <a href="author.html#85873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
