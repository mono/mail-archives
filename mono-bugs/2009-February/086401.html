<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 478648] New: monodoc and other broken on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20478648%5D%20New%3A%20monodoc%20and%20other%20broken%20on%20Windows&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="086426.html">
   <LINK REL="Next"  HREF="086402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 478648] New: monodoc and other broken on Windows</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20478648%5D%20New%3A%20monodoc%20and%20other%20broken%20on%20Windows&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 478648] New: monodoc and other broken on Windows">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Feb 23 07:38:25 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="086426.html">[Mono-bugs] [Bug 478616] ContextMenuStrip: Crash when pressing &lt;ESC&gt;
</A></li>
        <LI>Next message: <A HREF="086402.html">[Mono-bugs] [Bug 478648] monodoc and other broken on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86401">[ date ]</a>
              <a href="thread.html#86401">[ thread ]</a>
              <a href="subject.html#86401">[ subject ]</a>
              <a href="author.html#86401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=478648">https://bugzilla.novell.com/show_bug.cgi?id=478648</A>


           Summary: monodoc and other broken on Windows
    Classification: Mono
           Product: Mono: Runtime
           Version: 2.4.x
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=274650)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=274650">https://bugzilla.novell.com/attachment.cgi?id=274650</A>)
monodoc browser console output

User-Agent:       Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR
2.0.50727; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 3.0.04506.648;
NET CLR 3.5.21022)

Subsequent to bug 472021 three .bat scripts in the Windows installation are
still broken because the path to the assembly is wrong.  However, these three
are apparently special as they have non-trivial shell scripts.  Either custom
bat files have to be prepared, or perhaps the shell scripts simplified.

[[
-- create-native-map.bat ------------------------------------------------ 
Cannot open assembly 'C:\PROGRA~1\Mono-2.4\create-native-map.exe': No such file
or directory.
-- ilcontrast.bat ------------------------------------------------ 
Cannot open assembly 'C:\PROGRA~1\Mono-2.4\ilcontrast.exe': No such file or
directory.
-- monodoc.bat ------------------------------------------------ 
Cannot open assembly 'C:\PROGRA~1\Mono-2.4\browser.exe': No such file or
directory.
-- EoF ------------------------------------------------
]]

If once runs the assembly manually, then some other things go wrong.  Perhap in
the latter two cases the shell script is needed to configure the app?

&#8226; create-native-map
Runs, but then I can't get it to do anything useful, but I'm probably supplying
the wrong args.
[[
C:\foo&gt;mono &quot;\Program
Files\Mono-2.4\lib\create-native-map\create-native-map.exe&quot;
\Program Files\Mono-2.4\lib\create-native-map\create-native-map.exe: error:
missing ASSEMBLY
Usage: create-native-map 
    [--autoconf-header=HEADER]* 
    [--autoconf-member=MEMBER]* 
    [--exclude-native-symbol=SYMBOL]*
    [--impl-header=HEADER]* 
    [--impl-macro=MACRO]* 
    [--library=LIBRARY]+ 
    [--public-header=HEADER]* 
    [--public-macro=MACRO]* 
    [--rename-member=FROM=TO]* 
    [--rename-namespace=FROM=TO]*
    ASSEMBLY OUTPUT-PREFIX
]]


&#8226; ilcontrast
[[
C:\foo&gt;mono &quot;\Program Files\Mono-2.4\lib\ilcontrast\ilcontrast.exe&quot;
Unhandled Exception: System.TypeInitializationException: An exception was
thrown by the type initializer for Gecko.WebControl ---&gt;
System.DllNotFoundException: libgtkembedmoz.so
  at (wrapper managed-to-native) Gecko.WebControl:gtk_moz_embed_get_type ()
  at Gecko.WebControl.get_GType () [0x00000] 
  at GtkSharp.GeckoSharp.ObjectManager.Initialize () [0x00000] 
  at Gecko.WebControl..cctor () [0x00000] 
  --- End of inner exception stack trace ---
  at IlContrast.Window..ctor (IlContrast.ComparisonInfo info) [0x00000] 
  at IlContrast.Application.Main (System.String[] args) [0x00000]
]]


&#8226; monodoc
[[
c:\foo&gt;mono &quot;\Program Files\Mono-2.4\lib\monodoc\browser.exe&quot;

Unhandled Exception: System.IO.DirectoryNotFoundException: Could not find a
part of the path &quot;C:\tmp\install\lib\monodoc\monodoc.xml&quot;.
  at System.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess
access, FileShare share, Int32 bufferSize, Boolean anonymous, FileOptions
options) [0x00000] 
  at System.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess
access, FileShare share) [0x00000] 
  at (wrapper remoting-invoke-with-check) System.IO.FileStream:.ctor
(string,System.IO.FileMode,System.IO.FileAccess,System.IO.FileShare)
  at System.Xml.XmlUrlResolver.GetEntity (System.Uri absoluteUri, System.String
role, System.Type ofObjectToReturn) [0x00000] 
  at Mono.Xml2.XmlTextReader.GetStreamFromUrl (System.String url,
System.String&amp; absoluteUriString) [0x00000] 
  at Mono.Xml2.XmlTextReader..ctor (System.String url, System.Xml.XmlNameTable
nt) [0x00000] 
  at System.Xml.XmlTextReader..ctor (System.String url, System.Xml.XmlNameTable
nt) [0x00000] 
  at System.Xml.XmlDocument.Load (System.String filename) [0x00000] 
  at Monodoc.RootTree.LoadTree (System.String basedir) [0x00000] 
  at Monodoc.RootTree.LoadTree () [0x00000] 
  at Monodoc.Browser..ctor (System.String engine) [0x00000] 
  at Monodoc.Driver.Main (System.String[] args) [0x00000]
]]

That occurs due to the broken .config file in &quot;C:\Program
Files\Mono-2.4\lib\mono\gac\monodoc\1.0.0.0__0738eb9f132ed756&quot;, which contains:
[[
&lt;config&gt;
        &lt;path docsPath=&quot;/tmp/install/lib/monodoc&quot; /&gt;
&lt;/config&gt;
]]

If one fixes that, the browser then runs and displays.  A fix is either to
delete/rename that file and cd to &quot;C:\Program Files\Mono-2.4\lib\monodoc&quot;
before running, or to update the /tmp/install to the correct path.  Couldn't it
do without the config file and just look for the sources next to the .exe?
(Assembly.GetEntryAssembly.Location)

However, then on display no page appears and clicking on a tree node crashes
with:
[[
Exception in Gtk# callback delegate
  Note: Applications can use GLib.ExceptionManager.UnhandledException to handle
the exception.
System.Reflection.TargetInvocationException: Exception has been thrown by the
target of an invocation. ---&gt; System.NullReferenceException: Object reference
not set to an instance of an object
  at Monodoc.TreeBrowser.RowActivated (System.Object sender, System.EventArgs
a) [0x00000] 
  at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke
(object,object[],System.Exception&amp;)
  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags
invokeAttr, System.Reflection.Binder binder, System.Object[] parameters,
System.Globalization.CultureInfo culture) [0x00000] 
  --- End of inner exception stack trace ---
  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags
invokeAttr, System.Reflection.Binder binder, System.Object[] parameters,
System.Globalization.CultureInfo culture) [0x00000] 
  at System.Reflection.MethodBase.Invoke (System.Object obj, System.Object[]
parameters) [0x00000] 
  at System.Delegate.DynamicInvokeImpl (System.Object[] args) [0x00000] 
  at System.MulticastDelegate.DynamicInvokeImpl (System.Object[] args)
[0x00000] 
  at System.Delegate.DynamicInvoke (System.Object[] args) [0x00000] 
  at GLib.Signal.ClosureInvokedCB (System.Object o, GLib.ClosureInvokedArgs
args) [0x00000] 
  at GLib.SignalClosure.Invoke (GLib.ClosureInvokedArgs args) [0x00000] 
  at GLib.SignalClosure.MarshalCallback (IntPtr raw_closure, IntPtr return_val,
UInt32 n_param_vals, IntPtr param_values, IntPtr invocation_hint, IntPtr
marshal_data) [0x00000] 
   at GLib.ExceptionManager.RaiseUnhandledException(System.Exception e, Boolean
is_terminal)
   at GLib.SignalClosure.MarshalCallback(IntPtr raw_closure, IntPtr return_val,
UInt32 n_param_vals, IntPtr param_values, IntPtr invocation_hint, IntPtr
marshal_data)
   at Gtk.Application.gtk_main()
   at Gtk.Application.Run()
   at Monodoc.Driver.Main(System.String[] args)
]]

More logging occur prior to that, the full log is attached.

Reproducible: Always

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="086426.html">[Mono-bugs] [Bug 478616] ContextMenuStrip: Crash when pressing &lt;ESC&gt;
</A></li>
	<LI>Next message: <A HREF="086402.html">[Mono-bugs] [Bug 478648] monodoc and other broken on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86401">[ date ]</a>
              <a href="thread.html#86401">[ thread ]</a>
              <a href="subject.html#86401">[ subject ]</a>
              <a href="author.html#86401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
