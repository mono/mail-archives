<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 589740] New: Mono bootstrap hangs randomly if	--debug is used
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20589740%5D%20New%3A%20Mono%20bootstrap%20hangs%20randomly%20if%0A%09--debug%20is%20used&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="098328.html">
   <LINK REL="Next"  HREF="098335.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 589740] New: Mono bootstrap hangs randomly if	--debug is used</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20589740%5D%20New%3A%20Mono%20bootstrap%20hangs%20randomly%20if%0A%09--debug%20is%20used&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 589740] New: Mono bootstrap hangs randomly if	--debug is used">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Mar 19 11:17:56 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="098328.html">[Mono-bugs] [Bug 589596] Curses in Mono.Terminal
</A></li>
        <LI>Next message: <A HREF="098335.html">[Mono-bugs] [Bug 589740] Mono bootstrap hangs randomly if --debug	is used
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#98331">[ date ]</a>
              <a href="thread.html#98331">[ thread ]</a>
              <a href="subject.html#98331">[ subject ]</a>
              <a href="author.html#98331">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=589740">http://bugzilla.novell.com/show_bug.cgi?id=589740</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=589740#c0">http://bugzilla.novell.com/show_bug.cgi?id=589740#c0</A>


           Summary: Mono bootstrap hangs randomly if --debug is used
    Classification: Mono
           Product: Mono: Runtime
           Version: SVN
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: debug
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">martin at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Compiling Mono with --debug passed to the runtime while bootstrapping causes
random hangs during compilation:

Thread 4 (Thread 0x2aaaaacac910 (LWP 31495)):
#0  0x00002ade37bac049 in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib64/libpthread.so.0
#1  0x00000000005bee03 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005c4d35 in GC_help_marker (my_mark_no=5) at mark.c:1116
#3  0x00000000005bfb1b in GC_mark_thread (id=&lt;value optimized out&gt;) at
pthread_support.c:548
#4  0x00002ade37ba765d in start_thread () from /lib64/libpthread.so.0
#5  0x00002ade380e3e1d in clone () from /lib64/libc.so.6
#6  0x0000000000000000 in ?? ()

Thread 3 (Thread 0x2aaaab370910 (LWP 31496)):
#0  0x00002ade37baf341 in nanosleep () from /lib64/libpthread.so.0
#1  0x00000000005ab572 in collection_thread (unused=&lt;value optimized out&gt;) at
collection.c:34
#2  0x00002ade37ba765d in start_thread () from /lib64/libpthread.so.0
#3  0x00002ade380e3e1d in clone () from /lib64/libc.so.6
#4  0x0000000000000000 in ?? ()

Thread 2 (Thread 0x2aaaab5d1910 (LWP 31497)):
#0  0x00002ade37bae624 in __lll_lock_wait () from /lib64/libpthread.so.0
#1  0x00002ade37ba9f50 in _L_lock_1014 () from /lib64/libpthread.so.0
#2  0x00002ade37ba9db1 in pthread_mutex_lock () from /lib64/libpthread.so.0
#3  0x000000000057dd8e in mono_loader_lock () at loader.c:2021
#4  0x000000000052130f in mono_class_create_from_typedef (image=0x8c0e88,
type_token=128) at class.c:4792
#5  0x000000000052100d in mono_class_get_full (image=0x8c0e88, type_token=128,
context=0x0) at class.c:6143
#6  0x00000000005965b0 in parse_section_data (ptr=&lt;value optimized out&gt;,
num_clauses=&lt;value optimized out&gt;, m=&lt;value optimized out&gt;) at metadata.c:3297
#7  mono_metadata_parse_mh_full (ptr=&lt;value optimized out&gt;, num_clauses=&lt;value
optimized out&gt;, m=&lt;value optimized out&gt;) at metadata.c:3463
#8  0x00000000005696cd in dis_one (str=0xa61060, dh=0x80, method=0x0,
ip=0xffffffffffffffff &lt;Address 0xffffffffffffffff out of bounds&gt;, end=0x8c0e88
&quot;\002&quot;)
    at debug-helpers.c:530
#9  0x0000000000569b2c in mono_disasm_code (dh=0x8b7380, method=0xa8c000,
ip=0x2aaaaad60744 &quot;\024\n\002{T\v&quot;, end=0x2aaaaad60829 &quot;&quot;) at
debug-helpers.c:728
#10 0x000000000057bff7 in mono_debug_add_method (method=0xa8c000, jit=&lt;value
optimized out&gt;, domain=&lt;value optimized out&gt;) at mono-debug.c:669
#11 0x000000000046c4fd in mono_debug_close_method (cfg=0xc0bba0) at
debug-mini.c:316
#12 0x000000000041f45d in mini_method_compile (method=&lt;value optimized out&gt;,
opts=&lt;value optimized out&gt;, domain=&lt;value optimized out&gt;, run_cctors=&lt;value
optimized out&gt;, 
    compile_aot=&lt;value optimized out&gt;, parts=&lt;value optimized out&gt;) at
mini.c:4415
#13 0x0000000000420642 in mono_jit_compile_method_inner (jit_ex=&lt;value
optimized out&gt;, opt=&lt;value optimized out&gt;, target_domain=&lt;value optimized out&gt;,
method=0xa8c000)
    at mini.c:4667
#14 mono_jit_compile_method_with_opt (jit_ex=&lt;value optimized out&gt;, opt=&lt;value
optimized out&gt;, target_domain=&lt;value optimized out&gt;, method=0xa8c000) at
mini.c:4865
#15 0x0000000000420fdd in mono_jit_compile_method (method=0x8c0e88) at
mini.c:4890
#16 0x000000000048dee2 in common_call_trampoline (regs=&lt;value optimized out&gt;,
code=0x41d5f751 &quot;H\203\354\b\350\006&quot;, arg=&lt;value optimized out&gt;, 
    tramp=&lt;value optimized out&gt;, vt=0xaa4940, vtable_slot=0xaa4a40,
need_rgctx_tramp=0) at mini-trampolines.c:491
#17 0x000000000048eb80 in mono_magic_trampoline (regs=0x2aaaab5d0d88,
code=0x41d5f751 &quot;H\203\354\b\350\006&quot;, arg=0xfffffffffffffffe, tramp=
    0xffffffffffffffff &lt;Address 0xffffffffffffffff out of bounds&gt;) at
mini-trampolines.c:610
#18 0x000000004122b168 in ?? ()
#19 0x0000000000b49908 in ?? ()
#20 0x00000000418c2022 in ?? ()
#21 0x0000000000b49908 in ?? ()
#22 0x0000000000578573 in mono_thread_interruption_checkpoint_request
(bypass_abort_protection=-1419964880) at threads.c:3935
#23 0x000000004122b173 in ?? ()
#24 0x00000000005d6838 in ?? ()
#25 0x0000000000001000 in ?? ()
#26 0x00002ade38369e60 in ?? () from /lib64/libc.so.6
#27 0x0000000000fc65c0 in ?? ()
#28 0x0000000000001000 in ?? ()
#29 0x00002ade38369e60 in ?? () from /lib64/libc.so.6
#30 0x00002ade38369e60 in ?? () from /lib64/libc.so.6
#31 0x00002ade380883e4 in ?? () from /lib64/libc.so.6

#32 0x000000000056ec6a in mono_jit_info_table_add (domain=&lt;value optimized
out&gt;, ji=&lt;value optimized out&gt;) at domain.c:771
#33 0x0000000000000000 in ?? ()

Thread 1 (Thread 0x2ade3859d5d0 (LWP 31480)):
#0  0x00002ade37bae624 in __lll_lock_wait () from /lib64/libpthread.so.0
#1  0x00002ade37ba9f50 in _L_lock_1014 () from /lib64/libpthread.so.0
#2  0x00002ade37ba9db1 in pthread_mutex_lock () from /lib64/libpthread.so.0
#3  0x000000000056476a in mono_debugger_lock () at mono-debug-debugger.c:69
#4  0x000000000057b9fa in mono_debug_add_type (klass=0x8c0888) at
mono-debug.c:832
#5  0x000000000051cf2f in mono_class_init (class=0xc30840) at class.c:4480
#6  0x000000000051d4a0 in mono_class_init (class=0xb534d8) at class.c:4241
#7  0x0000000000436ad0 in mini_get_class (context=&lt;value optimized out&gt;,
token=&lt;value optimized out&gt;, method=&lt;value optimized out&gt;) at
method-to-ir.c:4807
#8  mono_method_to_ir (context=&lt;value optimized out&gt;, token=&lt;value optimized
out&gt;, method=&lt;value optimized out&gt;) at method-to-ir.c:7546
#9  0x000000000041e946 in mini_method_compile (method=&lt;value optimized out&gt;,
opts=&lt;value optimized out&gt;, domain=&lt;value optimized out&gt;, run_cctors=&lt;value
optimized out&gt;, 
    compile_aot=&lt;value optimized out&gt;, parts=&lt;value optimized out&gt;) at
mini.c:4005
#10 0x0000000000420642 in mono_jit_compile_method_inner (jit_ex=&lt;value
optimized out&gt;, opt=&lt;value optimized out&gt;, target_domain=&lt;value optimized out&gt;,
method=0xc30238)
    at mini.c:4667
#11 mono_jit_compile_method_with_opt (jit_ex=&lt;value optimized out&gt;, opt=&lt;value
optimized out&gt;, target_domain=&lt;value optimized out&gt;, method=0xc30238) at
mini.c:4865
#12 0x0000000000420fdd in mono_jit_compile_method (method=0x8c0888) at
mini.c:4890
#13 0x000000000048dee2 in common_call_trampoline (regs=&lt;value optimized out&gt;,
code=0x41d5f37c &quot;H\213\205H\377\377\377H\213\200\270&quot;, arg=&lt;value optimized
out&gt;, 
    tramp=&lt;value optimized out&gt;, vt=0x0, vtable_slot=0x0, need_rgctx_tramp=0)
at mini-trampolines.c:491
#14 0x000000000048eb80 in mono_magic_trampoline (regs=0x7fff712c45a8,
code=0x41d5f37c &quot;H\213\205H\377\377\377H\213\200\270&quot;, arg=0xc30238, tramp=
    0xffffffffffffffff &lt;Address 0xffffffffffffffff out of bounds&gt;) at
mini-trampolines.c:610
#15 0x000000004122b168 in ?? ()
#16 0x00002aaaab716b60 in ?? ()
#17 0x00007fff712c4688 in ?? ()
#18 0x0000000000000000 in ?? ()

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>



























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="098328.html">[Mono-bugs] [Bug 589596] Curses in Mono.Terminal
</A></li>
	<LI>Next message: <A HREF="098335.html">[Mono-bugs] [Bug 589740] Mono bootstrap hangs randomly if --debug	is used
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#98331">[ date ]</a>
              <a href="thread.html#98331">[ thread ]</a>
              <a href="subject.html#98331">[ subject ]</a>
              <a href="author.html#98331">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
