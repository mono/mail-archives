<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 590493] New: Memory Leak in System.Drawing.Image.Save when saving to a Stream on Mono-2.6.3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20590493%5D%20New%3A%20Memory%20Leak%20in%0A%20System.Drawing.Image.Save%20when%20saving%20to%20a%20Stream%20on%20Mono-2.6.3&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="098470.html">
   <LINK REL="Next"  HREF="098461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 590493] New: Memory Leak in System.Drawing.Image.Save when saving to a Stream on Mono-2.6.3</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20590493%5D%20New%3A%20Memory%20Leak%20in%0A%20System.Drawing.Image.Save%20when%20saving%20to%20a%20Stream%20on%20Mono-2.6.3&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 590493] New: Memory Leak in System.Drawing.Image.Save when saving to a Stream on Mono-2.6.3">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Mar 23 10:10:48 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="098470.html">[Mono-bugs] [Bug 590488] Not an exception when connecting to the	socket.
</A></li>
        <LI>Next message: <A HREF="098461.html">[Mono-bugs] [Bug 590503] New: GdipCloneImage does not clone	PropertyItem.value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#98460">[ date ]</a>
              <a href="thread.html#98460">[ thread ]</a>
              <a href="subject.html#98460">[ subject ]</a>
              <a href="author.html#98460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=590493">http://bugzilla.novell.com/show_bug.cgi?id=590493</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=590493#c0">http://bugzilla.novell.com/show_bug.cgi?id=590493#c0</A>


           Summary: Memory Leak in System.Drawing.Image.Save when saving
                    to a Stream on Mono-2.6.3
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.6.x
          Platform: i386
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: libgdiplus
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jim at apption.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=350045)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=350045">http://bugzilla.novell.com/attachment.cgi?id=350045</A>)
Program that continually loads a .jpg image and converts it to a .png memory
stream

User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US)
AppleWebKit/532.5 (KHTML, like Gecko) Chrome/4.1.249.1036 Safari/532.5

Some memory is not being garbage collected when the Image.Save() method is
call.  This problem occurs only when Image.Save is passed a Stream (tested with
MemoryStream and FileStream) and does not occur when Image.Save is passed a
string for the file path.

Reproducible: Always

Steps to Reproduce:
1. Compile attached program 
2. Put a picture called picture.jpg in the same directory as the program will
be executed.  (Picture should be 10k or more)
3. Run the program.
4. Watch the amount of memory used by the program continue to increase
Actual Results:  
The program continues to use more and more memory until it starts paging. (If
two or more of these programs are running concurrently it eventually crashes
the program)

Expected Results:  
On both .net and an earlier version of Mono the program continues to run using
less than 1Mbytes of memory (depends on image size)

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>














































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="098470.html">[Mono-bugs] [Bug 590488] Not an exception when connecting to the	socket.
</A></li>
	<LI>Next message: <A HREF="098461.html">[Mono-bugs] [Bug 590503] New: GdipCloneImage does not clone	PropertyItem.value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#98460">[ date ]</a>
              <a href="thread.html#98460">[ thread ]</a>
              <a href="subject.html#98460">[ subject ]</a>
              <a href="author.html#98460">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
