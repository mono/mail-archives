<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 589853] New: ExitThread can cause crashes during	shutdown
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20589853%5D%20New%3A%20ExitThread%20can%20cause%20crashes%20during%0A%09shutdown&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="098428.html">
   <LINK REL="Next"  HREF="098339.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 589853] New: ExitThread can cause crashes during	shutdown</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20589853%5D%20New%3A%20ExitThread%20can%20cause%20crashes%20during%0A%09shutdown&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 589853] New: ExitThread can cause crashes during	shutdown">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Mar 19 15:50:38 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="098428.html">[Mono-bugs] [Bug 589825] wrapper managed-to-native crash
</A></li>
        <LI>Next message: <A HREF="098339.html">[Mono-bugs] [Bug 589856] New: Null reference when accessing	resources
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#98338">[ date ]</a>
              <a href="thread.html#98338">[ thread ]</a>
              <a href="subject.html#98338">[ subject ]</a>
              <a href="author.html#98338">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=589853">http://bugzilla.novell.com/show_bug.cgi?id=589853</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=589853#c0">http://bugzilla.novell.com/show_bug.cgi?id=589853#c0</A>


           Summary: ExitThread can cause crashes during shutdown
    Classification: Mono
           Product: Mono: Runtime
           Version: unspecified
          Platform: Other
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: JIT
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rkumpera at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


libgcc does unwinding as part of pthread_exit.

This is fine for threads where all code for the call stack is valid, but during
shutdown this might not be the case if the root domain was unloaded.

The unwinding code tries to read from the return address, which has been
released and causes a fatal segfault.

The way to fix this is to restore to the last LMF and have it call
pthread_exit, this way avoiding unwinding any deallocated managed methods.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>





























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="098428.html">[Mono-bugs] [Bug 589825] wrapper managed-to-native crash
</A></li>
	<LI>Next message: <A HREF="098339.html">[Mono-bugs] [Bug 589856] New: Null reference when accessing	resources
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#98338">[ date ]</a>
              <a href="thread.html#98338">[ thread ]</a>
              <a href="subject.html#98338">[ subject ]</a>
              <a href="author.html#98338">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
