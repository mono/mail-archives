<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 775116] New: TimeZoneInfo throws exception when	serialized
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=Re%3A%20%5BMono-bugs%5D%20%5BBug%20775116%5D%20New%3A%20TimeZoneInfo%20throws%20exception%20when%0A%09serialized&In-Reply-To=%3Cbug-775116-28286%40http.bugzilla.novell.com/%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="113608.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 775116] New: TimeZoneInfo throws exception when	serialized</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=Re%3A%20%5BMono-bugs%5D%20%5BBug%20775116%5D%20New%3A%20TimeZoneInfo%20throws%20exception%20when%0A%09serialized&In-Reply-To=%3Cbug-775116-28286%40http.bugzilla.novell.com/%3E"
       TITLE="[Mono-bugs] [Bug 775116] New: TimeZoneInfo throws exception when	serialized">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Aug  8 19:48:07 UTC 2012</I>
    <P><UL>
        
        <LI>Next message: <A HREF="113608.html">[Mono-bugs] [Bug 318949] Monodoc crashes when reading Gnome.About	overview
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#113607">[ date ]</a>
              <a href="thread.html#113607">[ thread ]</a>
              <a href="subject.html#113607">[ subject ]</a>
              <a href="author.html#113607">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=775116">https://bugzilla.novell.com/show_bug.cgi?id=775116</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=775116#c0">https://bugzilla.novell.com/show_bug.cgi?id=775116#c0</A>


           Summary: TimeZoneInfo throws exception when serialized
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.10.x
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Sys.Core
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">michael.miller at suse.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jclegg at reflexsystems.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101
Firefox/14.0.1

TimeZoneInfo implements ISerializable, but the GetObjectData() method simply
throws a NotImplementedException.   

Someone should be able to serialize an object of this type using a
BinaryFormater
(works on MS .NET, and it's marked as serializable), but because of this, you
get an exception if you try.

Reproducible: Always

Steps to Reproduce:
1. Create a TimeZoneInfo instance
2. Try to serialize it with a BinaryFormatter

Actual Results:  
throw exception

Expected Results:  
it should serialize the object properly without throwing an exception.  It
should have code to deserialize the object as well.

This snippet will throw the exception.  It doesnt matter if it's the local time
zone or any other:

TimeZoneInfo tzi = TimeZoneInfo.Local;
BinaryFormatter bf = new BinaryFormatter();
MemoryStream ms = new MemoryStream();
bf.Serialize(ms, tzi);
ms.Seek(0, SeekOrigin.Begin);
var tzi2= bf.Deserialize(ms);

/// in the TimeZoneInfo class, the following (lack of) code is the problem:

void ISerializable.GetObjectData (SerializationInfo info, StreamingContext 
{
throw new NotImplementedException ();
}
void IDeserializationCallback.OnDeserialization (object sender)
{
throw new NotImplementedException ();
}

it looks like there is also a missing custom deserialization constructor

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="113608.html">[Mono-bugs] [Bug 318949] Monodoc crashes when reading Gnome.About	overview
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#113607">[ date ]</a>
              <a href="thread.html#113607">[ thread ]</a>
              <a href="subject.html#113607">[ subject ]</a>
              <a href="author.html#113607">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
