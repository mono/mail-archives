<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 696784] New: Call a wcf method with a ref DataContract as parameter, eg: ref Customer makes the parameter null after the call
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20696784%5D%20New%3A%20Call%20a%20wcf%20method%20with%20a%20ref%0A%20DataContract%20as%20parameter%2C%0A%20eg%3A%20ref%20Customer%20makes%20the%20parameter%20null%20after%20the%20call&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="111981.html">
   <LINK REL="Next"  HREF="111986.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 696784] New: Call a wcf method with a ref DataContract as parameter, eg: ref Customer makes the parameter null after the call</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20696784%5D%20New%3A%20Call%20a%20wcf%20method%20with%20a%20ref%0A%20DataContract%20as%20parameter%2C%0A%20eg%3A%20ref%20Customer%20makes%20the%20parameter%20null%20after%20the%20call&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 696784] New: Call a wcf method with a ref DataContract as parameter, eg: ref Customer makes the parameter null after the call">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat May 28 03:13:13 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="111981.html">[Mono-bugs] [Bug 669807] Abandon session then redirect goes boom
</A></li>
        <LI>Next message: <A HREF="111986.html">[Mono-bugs] [Bug 696815] New: mscorlib.dll System.NullReferenceException: Object reference not set to an instance of an object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111982">[ date ]</a>
              <a href="thread.html#111982">[ thread ]</a>
              <a href="subject.html#111982">[ subject ]</a>
              <a href="author.html#111982">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=696784">https://bugzilla.novell.com/show_bug.cgi?id=696784</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=696784#c0">https://bugzilla.novell.com/show_bug.cgi?id=696784#c0</A>


           Summary: Call a wcf method with a ref DataContract as
                    parameter, eg: ref Customer makes the parameter null
                    after the call
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.10.x
          Platform: 32bit
        OS/Version: openSUSE 11.3
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: WCF
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">65rnov at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=431973)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=431973">http://bugzilla.novell.com/attachment.cgi?id=431973</A>)
WCF service and Winform Application that can reproduce the problem

User-Agent:       Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101
Firefox/4.0.1

Creating a simple wcf service with a method like 

public class CustomerService : ICustomerService
    {
        public void AddUpdateCustomer(ref Customer customer)
        {
            customer.Id = 1;            
        }

        public void AddUpdateCustomer2(Customer customer)
        {
            customer.Id = 1;
        }
    }

Calling the first method from a winform application, AddUpdateCustomer(ref
Customer customer), causes the parameter to be null after the call

CustomerService.Customer customer  = new
TestMonoWCFApplication.CustomerService.Customer();
customer.Firstname = &quot;John&quot;;
customer.Surname = &quot;Doe&quot;;

CustomerService.CustomerServiceClient c = new
TestMonoWCFApplication.CustomerService.CustomerServiceClient(&quot;BasicHttpBinding_ICustomerService&quot;);
c.AddUpdateCustomer(ref customer);

After this call the customer object is null, it should not be null

Reproducible: Always

Steps to Reproduce:
1. Create a simple wcf service, with a Ref parameter in the method
2. Add this service's service reference to a simple winform application
3. Call the method in 1, and after the method the parameter is null
Actual Results:  
A Ref Parameter is always null after a WCF service call.
c.AddUpdateCustomer(ref customer);
Trying to use customer object is useless, as it is null 


Expected Results:  
The customer object above should not be null, and contain the values that were
set in the service. (Like customer.Id)

This error, makes the wcf library included with mono 2.10.2, not useful, as
this error was not present in mono 2.10.1.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="111981.html">[Mono-bugs] [Bug 669807] Abandon session then redirect goes boom
</A></li>
	<LI>Next message: <A HREF="111986.html">[Mono-bugs] [Bug 696815] New: mscorlib.dll System.NullReferenceException: Object reference not set to an instance of an object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111982">[ date ]</a>
              <a href="thread.html#111982">[ thread ]</a>
              <a href="subject.html#111982">[ subject ]</a>
              <a href="author.html#111982">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
