<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 670945] XML Serialization output differs from Microsoft .NET Runtime (or CLR)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20670945%5D%20XML%20Serialization%20output%20differs%20from%0A%20Microsoft%20.NET%20Runtime%20%28or%20CLR%29&In-Reply-To=bug-670945-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="111785.html">
   <LINK REL="Next"  HREF="111787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 670945] XML Serialization output differs from Microsoft .NET Runtime (or CLR)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20670945%5D%20XML%20Serialization%20output%20differs%20from%0A%20Microsoft%20.NET%20Runtime%20%28or%20CLR%29&In-Reply-To=bug-670945-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 670945] XML Serialization output differs from Microsoft .NET Runtime (or CLR)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon May  9 02:25:31 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="111785.html">[Mono-bugs] [Bug 687580] Mono 2.10.1WCF fails with '(400) Bad Request' when the calling client uses URIs that should be functionally equivalent such as IP address instead of machine name
</A></li>
        <LI>Next message: <A HREF="111787.html">[Mono-bugs] [Bug 692493] New: incorrect result of float expression (intermediate result optimized away?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111786">[ date ]</a>
              <a href="thread.html#111786">[ thread ]</a>
              <a href="subject.html#111786">[ subject ]</a>
              <a href="author.html#111786">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=670945">https://bugzilla.novell.com/show_bug.cgi?id=670945</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=670945#c2">https://bugzilla.novell.com/show_bug.cgi?id=670945#c2</A>


Atsushi Enomoto &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">aenomoto at novell.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
           Severity|Major                       |Normal

--- Comment #2 from Atsushi Enomoto &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">aenomoto at novell.com</A>&gt; 2011-05-09 06:25:29 UTC ---
Our WsdlImporter cannot generate valid client proxy and it is not practical
without fixing this issue. So first I'm going to fix it.

So far I got simple repro for the importer issue:

---- 670945.cs ----
using System;
using System.Collections;
using System.IO;
using System.ServiceModel;
using System.ServiceModel.Description;
using System.Xml;
using System.Xml.Schema;

using WSServiceDescription =
System.Web.Services.Description.ServiceDescription;

public class Imp
{
    public static void Main (string [] args)
    {
        var mset = new MetadataSet ();
        WSServiceDescription sd = null;
        sd = WSServiceDescription.Read (XmlReader.Create (&quot;670945.wsdl&quot;));
        mset.MetadataSections.Add (new MetadataSection () {
            Dialect = MetadataSection.ServiceDescriptionDialect,
            Metadata = sd });
        var imp = new WsdlImporter (mset);
        var sec = imp.ImportAllContracts ();
    }
}


---- 670945.wsdl ----
&lt;wsdl:definitions xmlns:wsdl=&quot;<A HREF="http://schemas.xmlsoap.org/wsdl/&quot;">http://schemas.xmlsoap.org/wsdl/&quot;</A>
xmlns:soap=&quot;<A HREF="http://schemas.xmlsoap.org/wsdl/soap12/&quot;">http://schemas.xmlsoap.org/wsdl/soap12/&quot;</A>
xmlns:xs=&quot;<A HREF="http://www.w3.org/2001/XMLSchema&quot;">http://www.w3.org/2001/XMLSchema&quot;</A>
xmlns:tds=&quot;<A HREF="http://www.onvif.org/ver10/device/wsdl&quot;">http://www.onvif.org/ver10/device/wsdl&quot;</A>
targetNamespace=&quot;<A HREF="http://www.onvif.org/ver10/device/wsdl&quot;">http://www.onvif.org/ver10/device/wsdl&quot;</A>&gt;
  &lt;wsdl:types&gt;

    &lt;xs:schema
    targetNamespace=&quot;<A HREF="http://www.onvif.org/ver10/schema&quot;">http://www.onvif.org/ver10/schema&quot;</A>
    elementFormDefault=&quot;qualified&quot;
    xmlns:xs=&quot;<A HREF="http://www.w3.org/2001/XMLSchema&quot;">http://www.w3.org/2001/XMLSchema&quot;</A>
    xmlns:tt=&quot;<A HREF="http://www.onvif.org/ver10/schema&quot;">http://www.onvif.org/ver10/schema&quot;</A>&gt;

      &lt;xs:complexType name=&quot;SystemDateTime&quot;&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element name=&quot;foobar&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot; /&gt;
          &lt;xs:element name=&quot;Extension&quot; type=&quot;tt:SystemDateTimeExtension&quot;
minOccurs=&quot;0&quot;/&gt;
        &lt;/xs:sequence&gt;
        &lt;!-- xs:anyAttribute processContents=&quot;lax&quot;/ --&gt;
      &lt;/xs:complexType&gt;

      &lt;xs:complexType name=&quot;SystemDateTimeExtension&quot;&gt;
        &lt;xs:sequence&gt;
          &lt;xs:any namespace=&quot;##any&quot; processContents=&quot;lax&quot; minOccurs=&quot;0&quot;
maxOccurs=&quot;unbounded&quot;/&gt;
        &lt;/xs:sequence&gt;
      &lt;/xs:complexType&gt;

    &lt;/xs:schema&gt;

    &lt;xs:schema targetNamespace=&quot;<A HREF="http://www.onvif.org/ver10/device/wsdl&quot;">http://www.onvif.org/ver10/device/wsdl&quot;</A>
xmlns:tt=&quot;<A HREF="http://www.onvif.org/ver10/schema&quot;">http://www.onvif.org/ver10/schema&quot;</A>
xmlns:tds=&quot;<A HREF="http://www.onvif.org/ver10/device/wsdl&quot;">http://www.onvif.org/ver10/device/wsdl&quot;</A>
elementFormDefault=&quot;qualified&quot;&gt;
      &lt;xs:element name=&quot;GetSystemDateAndTime&quot;&gt;
        &lt;xs:complexType&gt;
          &lt;xs:sequence/&gt;

        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name=&quot;GetSystemDateAndTimeResponse&quot;&gt;
        &lt;xs:complexType&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element name=&quot;SystemDateAndTime&quot; type=&quot;tt:SystemDateTime&quot;&gt;
              &lt;xs:annotation&gt;
                &lt;xs:documentation&gt;Contains information whether system date and
time are set manually or by NTP, daylight savings is on or off, time zone in
POSIX 1003.1 format and system date and time in UTC and also local system date
and time.&lt;/xs:documentation&gt;

              &lt;/xs:annotation&gt;
            &lt;/xs:element&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
    &lt;/xs:schema&gt;
  &lt;/wsdl:types&gt;
  &lt;wsdl:message name=&quot;GetSystemDateAndTimeRequest&quot;&gt;
    &lt;wsdl:part name=&quot;parameters&quot; element=&quot;tds:GetSystemDateAndTime&quot;/&gt;
  &lt;/wsdl:message&gt;
  &lt;wsdl:message name=&quot;GetSystemDateAndTimeResponse&quot;&gt;
    &lt;wsdl:part name=&quot;parameters&quot; element=&quot;tds:GetSystemDateAndTimeResponse&quot;/&gt;
  &lt;/wsdl:message&gt;
  &lt;wsdl:portType name=&quot;Device&quot;&gt;
    &lt;wsdl:operation name=&quot;GetSystemDateAndTime&quot;&gt;
      &lt;wsdl:documentation&gt;This operation gets the device system date and time.
The device shall support the return of
        the daylight saving setting and of the manual system date and time (if
applicable) or indication
        of NTP time (if applicable) through the GetSystemDateAndTime
command.&lt;br/&gt;
        A device shall provide the UTCDateTime
information.&lt;/wsdl:documentation&gt;
      &lt;wsdl:input message=&quot;tds:GetSystemDateAndTimeRequest&quot;/&gt;
      &lt;wsdl:output message=&quot;tds:GetSystemDateAndTimeResponse&quot;/&gt;
    &lt;/wsdl:operation&gt;
  &lt;/wsdl:portType&gt;
  &lt;wsdl:binding name=&quot;DeviceBinding&quot; type=&quot;tds:Device&quot;&gt;
    &lt;wsdl:operation name=&quot;GetSystemDateAndTime&quot;&gt;

      &lt;soap:operation
soapAction=&quot;<A HREF="http://www.onvif.org/ver10/device/wsdl/GetSystemDateAndTime&quot;/">http://www.onvif.org/ver10/device/wsdl/GetSystemDateAndTime&quot;/</A>&gt;
      &lt;wsdl:input&gt;
        &lt;soap:body use=&quot;literal&quot;/&gt;
      &lt;/wsdl:input&gt;
      &lt;wsdl:output&gt;
        &lt;soap:body use=&quot;literal&quot;/&gt;
      &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
  &lt;/wsdl:binding&gt;
&lt;/wsdl:definitions&gt;

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="111785.html">[Mono-bugs] [Bug 687580] Mono 2.10.1WCF fails with '(400) Bad Request' when the calling client uses URIs that should be functionally equivalent such as IP address instead of machine name
</A></li>
	<LI>Next message: <A HREF="111787.html">[Mono-bugs] [Bug 692493] New: incorrect result of float expression (intermediate result optimized away?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111786">[ date ]</a>
              <a href="thread.html#111786">[ thread ]</a>
              <a href="subject.html#111786">[ subject ]</a>
              <a href="author.html#111786">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
