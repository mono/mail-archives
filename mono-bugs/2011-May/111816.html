<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 693041] New: Exception caused by SqlDataSource
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20693041%5D%20New%3A%20Exception%20caused%20by%20SqlDataSource&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="111813.html">
   <LINK REL="Next"  HREF="111817.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 693041] New: Exception caused by SqlDataSource</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20693041%5D%20New%3A%20Exception%20caused%20by%20SqlDataSource&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 693041] New: Exception caused by SqlDataSource">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed May 11 04:14:48 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="111813.html">[Mono-bugs] [Bug 693029] HttpListener removes encoded pound character from querystring
</A></li>
        <LI>Next message: <A HREF="111817.html">[Mono-bugs] [Bug 682619] ERROR building certificate chain: System.NullReferenceException: Object reference not set to an instance of an object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111816">[ date ]</a>
              <a href="thread.html#111816">[ thread ]</a>
              <a href="subject.html#111816">[ subject ]</a>
              <a href="author.html#111816">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=693041">https://bugzilla.novell.com/show_bug.cgi?id=693041</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=693041#c0">https://bugzilla.novell.com/show_bug.cgi?id=693041#c0</A>


           Summary: Exception caused by SqlDataSource
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.10.x
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">test051102 at hotmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101
Firefox/4.0.1

Exception caused by SqlDataSource

Analysis
#####################
If a page contains a GridView which is connected to SqlDataSource which has
it's SelectCommand not defined, Mono throws an exception. This does not happend
under .Net Framework.

It is sometimes useful to set the SelectCommand property within the code-behind
file. Consider a search engine where the user has to open the search page
containg a GridView, a SqlDataSource and a TextBox to enter the search term. In
this case, it doesn't makes sense to set the SqlDataSource's SelectCommand
property within the .aspx file. Mono does currently not support this behaviour.

Solution
#####################
GridView.DataBind() is called when loading the page. GridView.DataBind() calls
SqlDataSourceView.ExecuteSelect() which is responsible for accessing the
database and executing the query. However, in case the SelectCommand is not
defined, Mono must to try to access the database in any way. The following code
would help when beeing inserted at the beginning of
SqlDataSourceView.ExecuteSelect()

if(String.IsNullOrEmpty(SelectCommand))
    return null;

Reproducible: Always

Steps to Reproduce:
1. Run example project under native .Net Framework
2. Run example project under Mono 2.10.2
3. Compare the results
Actual Results:  
Mono throws an exception where .Net Framework does not

Expected Results:  
No exeption

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="111813.html">[Mono-bugs] [Bug 693029] HttpListener removes encoded pound character from querystring
</A></li>
	<LI>Next message: <A HREF="111817.html">[Mono-bugs] [Bug 682619] ERROR building certificate chain: System.NullReferenceException: Object reference not set to an instance of an object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111816">[ date ]</a>
              <a href="thread.html#111816">[ thread ]</a>
              <a href="subject.html#111816">[ subject ]</a>
              <a href="author.html#111816">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
