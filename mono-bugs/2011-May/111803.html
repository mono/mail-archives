<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 692782] New: CSharpCodeProvider.CompileAssemblyFromDom produces non-compilable code when generic type arguments are involved
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20692782%5D%20New%3A%0A%20CSharpCodeProvider.CompileAssemblyFromDom%20produces%20non-compilable%20code%20when%0A%20generic%20type%20arguments%20are%20involved&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="111825.html">
   <LINK REL="Next"  HREF="111826.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 692782] New: CSharpCodeProvider.CompileAssemblyFromDom produces non-compilable code when generic type arguments are involved</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20692782%5D%20New%3A%0A%20CSharpCodeProvider.CompileAssemblyFromDom%20produces%20non-compilable%20code%20when%0A%20generic%20type%20arguments%20are%20involved&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 692782] New: CSharpCodeProvider.CompileAssemblyFromDom produces non-compilable code when generic type arguments are involved">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue May 10 03:18:36 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="111825.html">[Mono-bugs] [Bug 692779] CSharpCodeProvider: CompileAssemblyFromSource and CompileAssemblyFromDom wrongly produces &quot;hides inherited member&quot; error and warning
</A></li>
        <LI>Next message: <A HREF="111826.html">[Mono-bugs] [Bug 692782] CSharpCodeProvider.CompileAssemblyFromDom produces non-compilable code when generic type arguments are involved
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111803">[ date ]</a>
              <a href="thread.html#111803">[ thread ]</a>
              <a href="subject.html#111803">[ subject ]</a>
              <a href="author.html#111803">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=692782">https://bugzilla.novell.com/show_bug.cgi?id=692782</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=692782#c0">https://bugzilla.novell.com/show_bug.cgi?id=692782#c0</A>


           Summary: CSharpCodeProvider.CompileAssemblyFromDom produces
                    non-compilable code when generic type arguments are
                    involved
    Classification: Mono
           Product: Mono: Runtime
           Version: 2.10.x
          Platform: 64bit
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">alex_syd1 at yahoo.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=428771)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=428771">http://bugzilla.novell.com/attachment.cgi?id=428771</A>)
The code to reproduce the bug, and two generated files.

User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.16)
Gecko/20110319 Firefox/3.6.16 ( .NET CLR 3.5.30729; .NET4.0E)

When dynamically generating C# code with
CSharpCodeProvider.CompileAssemblyFromDom(), the resulting code is invalid if
generic type arguments are involved. Specifically, the following line
    ClassB&lt;TType&gt;.FuncB();
is generated as 
    ClassB.FuncB();

This produces a compiler error.

Reproducible: Always

Steps to Reproduce:
1. In VS2008 build a solution containing Program.cs from the attached file.
2. Run the executable in Windows 7.
3. Run the executable in Ubuntu with Mono 2.10, e.g. mono ca1.exe. Don't
recompile in Mono, just use the binary produced by VS compiler.

Actual Results:  
In case of Mono, the generated code is invalid (does not contain generic type
arguments in &lt;&gt;) and triggers a compiler error. Please see the attached file
generated-Mono.cs.

Expected Results:  
In case of VS2008, the generated code is correct.

The .cs files generated by Mono and VS2008 are also attached.
I have just raised Bug 692779 from the same area. We had to introduce ugly and
shaky hacks to keep the situation under control.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="111825.html">[Mono-bugs] [Bug 692779] CSharpCodeProvider: CompileAssemblyFromSource and CompileAssemblyFromDom wrongly produces &quot;hides inherited member&quot; error and warning
</A></li>
	<LI>Next message: <A HREF="111826.html">[Mono-bugs] [Bug 692782] CSharpCodeProvider.CompileAssemblyFromDom produces non-compilable code when generic type arguments are involved
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111803">[ date ]</a>
              <a href="thread.html#111803">[ thread ]</a>
              <a href="subject.html#111803">[ subject ]</a>
              <a href="author.html#111803">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
