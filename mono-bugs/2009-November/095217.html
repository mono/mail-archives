<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 558288] New: XBuild 2.7 out of SVN trunk (R146890) looks for a non-existent lib/mono/3.0 directory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20558288%5D%20New%3A%20XBuild%202.7%20out%20of%20SVN%20trunk%20%28R146890%29%0A%20looks%20for%20a%20non-existent%20lib/mono/3.0%20directory&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="095216.html">
   <LINK REL="Next"  HREF="095218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 558288] New: XBuild 2.7 out of SVN trunk (R146890) looks for a non-existent lib/mono/3.0 directory</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20558288%5D%20New%3A%20XBuild%202.7%20out%20of%20SVN%20trunk%20%28R146890%29%0A%20looks%20for%20a%20non-existent%20lib/mono/3.0%20directory&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 558288] New: XBuild 2.7 out of SVN trunk (R146890) looks for a non-existent lib/mono/3.0 directory">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Nov 25 04:25:00 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="095216.html">[Mono-bugs] [Bug 495957] bundled machine.config files no longer work
</A></li>
        <LI>Next message: <A HREF="095218.html">[Mono-bugs] [Bug 558288] XBuild 2.7 out of SVN trunk (R146890) looks for a non-existent lib/mono/3.0 directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#95217">[ date ]</a>
              <a href="thread.html#95217">[ thread ]</a>
              <a href="subject.html#95217">[ subject ]</a>
              <a href="author.html#95217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=558288">http://bugzilla.novell.com/show_bug.cgi?id=558288</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=558288#c0">http://bugzilla.novell.com/show_bug.cgi?id=558288#c0</A>


           Summary: XBuild 2.7 out of SVN trunk (R146890) looks for a
                    non-existent lib/mono/3.0 directory
    Classification: Mono
           Product: Mono: Tools
           Version: SVN
          Platform: All
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: xbuild
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jankit at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">kog at epiphanic.org</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Third Party Developer/Partner
           Blocker: No


Created an attachment (id=329387)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=329387">http://bugzilla.novell.com/attachment.cgi?id=329387</A>)
A transcript of XBuild's log upon building normally (before creating a faux
directory)

When calling XBuild on my solution file it fails during the
ResolveAssemblyReferences target thusly:

(ResolveAssemblyReferences target) -&gt;

        /usr/local/lib/mono/2.0/Microsoft.Common.targets: error : Error
executing task ResolveAssemblyReference: Directory '/usr/local/lib/mono/3.0'
not found.

         0 Warning(s)
         1 Error(s)

Looking at my fresh copy of Mono from SVN (R146890) I do not see a 3.0, I see:

$ ls /usr/local/lib/mono
1.0  2.0  3.5  compat-1.0  compat-2.0  gac  monodoc  xbuild

I got mhutch to check his copy to make sure there wasn't something odd about my
environment. After talking to Marek I created the directory, with permissions
akin to the others, and tried running XBuild again, which succeeded but gave me
a bunch of warnings related to assembly bindings. It looks like it chose the
correct version of the assemblies (2.0 instead of 1.0), which seems proper.
Further, I did a grep to see if I had any 1.0x versions hardcoded in my project
files and I do not.

See attached files for build outputs (redirected STDOUT). SVN URL available
upon request, but I'd rather not spam it here.

(Logs are in attached tar/gzip).

Steps to reproduce the problem:
1. xbuild SpikeLite.sln


Actual Results:
 * See build-fail.log in the tar/gzip attachment.

Expected Results:
 * Something akin to build-rename.log in the tar/gzip attachment. Namely, the
project should build.

How often does this happen? 
 * Every time I try and run XBuild on either the SLN or any of the CSProj
files. I upgraded from an earlier copy of 2.7 to the latest today (see rev no.
above) and it still occurs. 

Additional Information:
 * XBuild does not seem to require anything in the 3.0 lib directory, merely
the presence of it. 
 * Looked at my csproj file and the target framework version is set as 3.5:
&lt;TargetFrameworkVersion&gt;v3.5&lt;/TargetFrameworkVersion&gt;, and after looking at the
common targets it seems like it's also pulling the 3.0 libs, which through a
bunch of call tracing seems like it might go to 
mcs/class/Microsoft.Build.Utilities/Microsoft.Build.Utilities/ToolLocationHelper.cs:57,
which seems to define 3.0 as a valid lib/mono directory. Also, the SVN blame
suggests that it was added R145756, which would explain me encountering it the
first time after upgrading from 2.5 to 2.7 and why others may not be
experiencing this.
 * I haven't modified the source and attempted to try again since I'm not sure
what else is using this source, nor am I sure as to how MSBuild actually works
(I'm a NAnt dude).

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>

















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="095216.html">[Mono-bugs] [Bug 495957] bundled machine.config files no longer work
</A></li>
	<LI>Next message: <A HREF="095218.html">[Mono-bugs] [Bug 558288] XBuild 2.7 out of SVN trunk (R146890) looks for a non-existent lib/mono/3.0 directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#95217">[ date ]</a>
              <a href="thread.html#95217">[ thread ]</a>
              <a href="subject.html#95217">[ subject ]</a>
              <a href="author.html#95217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
