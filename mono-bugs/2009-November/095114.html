<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 555464] reflection.c:2609:get_field_on_inst_generic_type: assertion
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20555464%5D%0A%20reflection.c%3A2609%3Aget_field_on_inst_generic_type%3A%20assertion&In-Reply-To=bug-555464-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="095036.html">
   <LINK REL="Next"  HREF="095235.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 555464] reflection.c:2609:get_field_on_inst_generic_type: assertion</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20555464%5D%0A%20reflection.c%3A2609%3Aget_field_on_inst_generic_type%3A%20assertion&In-Reply-To=bug-555464-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 555464] reflection.c:2609:get_field_on_inst_generic_type: assertion">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Nov 22 10:10:30 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="095036.html">[Mono-bugs] [Bug 555464] reflection.c:2609:get_field_on_inst_generic_type: assertion
</A></li>
        <LI>Next message: <A HREF="095235.html">[Mono-bugs] [Bug 555464] reflection.c:2609:get_field_on_inst_generic_type: assertion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#95114">[ date ]</a>
              <a href="thread.html#95114">[ thread ]</a>
              <a href="subject.html#95114">[ subject ]</a>
              <a href="author.html#95114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=555464">http://bugzilla.novell.com/show_bug.cgi?id=555464</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=555464#c3">http://bugzilla.novell.com/show_bug.cgi?id=555464#c3</A>


--- Comment #3 from Basile Starynkevitch &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">basile at starynkevitch.net</A>&gt; 2009-11-22 15:10:26 UTC ---
(In reply to comment #2)

The bug still happens with
  % mono -V
Mono JIT compiler version 2.7 (/trunk/mono r146684 Sun Nov 22 10:21:03 MET
2009)
Copyright (C) 2002-2009 Novell, Inc and Contributors. www.mono-project.com
    TLS:           __thread
    GC:            Included Boehm (with typed GC and Parallel Mark)
    SIGSEGV:       altstack
    Notifications: epoll
    Architecture:  amd64
    Disabled:      none
and
URL: <A HREF="http://nemerle.googlecode.com/svn/nemerle/trunk">http://nemerle.googlecode.com/svn/nemerle/trunk</A>
Repository Root: <A HREF="http://nemerle.googlecode.com/svn">http://nemerle.googlecode.com/svn</A>
Repository UUID: c8a6711f-211a-0410-a8d5-2f220496d6d1
Revision: 8438
Node Kind: directory
Schedule: normal
Last Changed Author: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">vc at rsdn.ru</A>
Last Changed Rev: 8438
Last Changed Date: 2009-11-20 19:40:57 +0100 (Fri, 20 Nov 2009)

Of course, the line number changed slightly:
 Entering directory `/usr/src/Lang/nemerle/ncc'
COMPILE [stage1] Nemerle.dll
**_____________________________________.....................
ERROR:reflection.c:2612:get_field_on_inst_generic_type: assertion failed:
(field_index &gt;= 0 &amp;&amp; field_index &lt; dgclass-&gt;count_fields)
Stacktrace:

  at (wrapper managed-to-native) System.MonoType.GetField
(System.MonoType*,string,System.Reflection.BindingFlags) &lt;0x00051&gt;
  at (wrapper managed-to-native) System.MonoType.GetField
(System.MonoType*,string,System.Reflection.BindingFlags) &lt;0x00051&gt;
  at System.MonoType.GetField (System.Reflection.FieldInfo) &lt;0x00088&gt;
  at System.Reflection.Emit.TypeBuilder.GetField
(System.Type,System.Reflection.FieldInfo) &lt;0x0001b&gt;
  at Nemerle.Compiler.ILEmitter.FrameworkGetField
(System.Type,System.Reflection.FieldInfo) &lt;0x000e7&gt;
  at Nemerle.Compiler.ILEmitter.GetFieldInfo
(System.Type,Nemerle.Compiler.IField) &lt;0x0004b&gt;
  at Nemerle.Compiler.ILEmitter.emit (Nemerle.Compiler.Typedtree.TExpr)
&lt;0x05f47&gt;
  at Nemerle.Compiler.ILEmitter.emit (Nemerle.Compiler.Typedtree.TExpr)
&lt;0x047a3&gt;
  at Nemerle.Compiler.ILEmitter.emit (Nemerle.Compiler.Typedtree.TExpr)
&lt;0x01c7b&gt;
  at Nemerle.Compiler.ILEmitter.emit (Nemerle.Compiler.Typedtree.TExpr)
&lt;0x01e97&gt;
  at Nemerle.Compiler.ILEmitter.emit (Nemerle.Compiler.Typedtree.TExpr)
&lt;0x01e97&gt;
  at Nemerle.Compiler.ILEmitter.emit (Nemerle.Compiler.Typedtree.TExpr)
&lt;0x03c73&gt;
  at Nemerle.Compiler.ILEmitter.Run () &lt;0x00133&gt;
  at Nemerle.Compiler.MethodBuilder/_N__N_lambda__59337__59458.apply_void ()
&lt;0x000cb&gt;
  at Nemerle.Compiler.TypeBuilder.FinalizeType () &lt;0x000cd&gt;
  at Nemerle.Compiler.TypeBuilder.EmitImplementation () &lt;0x0021f&gt;
  at Nemerle.Compiler.TypesManager/_N_emit_impl__52700.apply_void
(Nemerle.Compiler.TypeBuilder) &lt;0x0005b&gt;
  at Nemerle.Compiler.TypesManager/_N_maybe_f__53272.apply_void
(Nemerle.Compiler.TypeBuilder) &lt;0x00196&gt;
  at Nemerle.Collections.NList.Iter&lt;object&gt;
(Nemerle.Core.list`1&lt;object&gt;,Nemerle.Builtins.FunctionVoid`1&lt;object&gt;) &lt;0x000bf&gt;
  at Nemerle.Core.list`1&lt;object&gt;.Iter (Nemerle.Builtins.FunctionVoid`1&lt;object&gt;)
&lt;0x00033&gt;
  at Nemerle.Compiler.TypesManager.Iter
(Nemerle.Core.list`1&lt;Nemerle.Compiler.TypeBuilder&gt;,Nemerle.Builtins.FunctionVoid`1&lt;Nemerle.Compiler.TypeBuilder&gt;)
&lt;0x00097&gt;
  at Nemerle.Compiler.TypesManager.Iter
(Nemerle.Builtins.FunctionVoid`1&lt;Nemerle.Compiler.TypeBuilder&gt;) &lt;0x0002f&gt;
  at Nemerle.Compiler.TypesManager.compile_all_tyinfos (bool) &lt;0x001b7&gt;
  at Nemerle.Compiler.TypesManager/_N__N_lambda__52140__52243.apply_void ()
&lt;0x00034&gt;
  at Nemerle.Compiler.Solver.Enqueue (Nemerle.Builtins.FunctionVoid) &lt;0x0004c&gt;
  at Nemerle.Compiler.TypesManager.EmitDecls () &lt;0x00063&gt;
  at Nemerle.Compiler.ManagerClass.Run () &lt;0x005d3&gt;
  at Nemerle.CommandlineCompiler.MainClass.main_with_catching () &lt;0x0015f&gt;
  at Nemerle.CommandlineCompiler.MainClass.Main () &lt;0x001f7&gt;
  at (wrapper runtime-invoke) object.runtime_invoke_void
(object,intptr,intptr,intptr) &lt;0x00049&gt;

Native stacktrace:

    /usr/local/bin//mono [0x488536]
    /lib/libpthread.so.0 [0x2addd0025990]
    /lib/libc.so.6(gsignal+0x35) [0x2addd04e7f25]
    /lib/libc.so.6(abort+0x180) [0x2addd04ead60]
    /lib/libglib-2.0.so.0(g_assertion_message+0x100) [0x2addcf9a5ad0]
    /lib/libglib-2.0.so.0 [0x2addcf9a6052]
    /usr/local/bin//mono [0x56e33c]
    /usr/local/bin//mono(mono_field_get_object+0x165) [0x57c1a5]
    /usr/local/bin//mono [0x4e4674]
    [0x41a3d001]

Debug info from gdb:

Mono support loaded.
[Thread debugging using libthread_db enabled]
[New Thread 0x2aaaac227910 (LWP 24618)]
[New Thread 0x2aaaabfc6910 (LWP 24617)]
[New Thread 0x2aaaab0ae910 (LWP 24616)]
[New Thread 0x2aaaaaead910 (LWP 24615)]
[New Thread 0x2aaaaacac910 (LWP 24614)]
0x00002addd002490b in read () from /lib/libpthread.so.0
  6 Thread 0x2aaaaacac910 (LWP 24614)  pthread_cond_wait@@GLIBC_2.3.2 () at
./nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:261
  5 Thread 0x2aaaaaead910 (LWP 24615)  pthread_cond_wait@@GLIBC_2.3.2 () at
./nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:261
  4 Thread 0x2aaaab0ae910 (LWP 24616)  pthread_cond_wait@@GLIBC_2.3.2 () at
./nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:261
  3 Thread 0x2aaaabfc6910 (LWP 24617)  0x00002addd0025131 in nanosleep () from
/lib/libpthread.so.0
  2 Thread 0x2aaaac227910 (LWP 24618)  sem_wait () at
./nptl/sysdeps/unix/sysv/linux/x86_64/sem_wait.S:85
* 1 Thread 0x2addd0a390b0 (LWP 24613)  0x00002addd002490b in read () from
/lib/libpthread.so.0

Thread 6 (Thread 0x2aaaaacac910 (LWP 24614)):
#0  pthread_cond_wait@@GLIBC_2.3.2 () at
./nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:261
#1  0x00000000005b49a3 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005b6724 in GC_help_marker (my_mark_no=57) at mark.c:1116
#3  0x00000000005b36f0 in GC_mark_thread (id=0x0) at pthread_support.c:548
#4  0x00002addd001d73a in start_thread (arg=&lt;value optimized out&gt;) at
pthread_create.c:300
#5  0x00002addd05812fd in clone () at
./sysdeps/unix/sysv/linux/x86_64/clone.S:112
#6  0x0000000000000000 in ?? ()

Thread 5 (Thread 0x2aaaaaead910 (LWP 24615)):
#0  pthread_cond_wait@@GLIBC_2.3.2 () at
./nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:261
#1  0x00000000005b49a3 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005b6724 in GC_help_marker (my_mark_no=57) at mark.c:1116
#3  0x00000000005b36f0 in GC_mark_thread (id=0x1) at pthread_support.c:548
#4  0x00002addd001d73a in start_thread (arg=&lt;value optimized out&gt;) at
pthread_create.c:300
#5  0x00002addd05812fd in clone () at
./sysdeps/unix/sysv/linux/x86_64/clone.S:112
#6  0x0000000000000000 in ?? ()
Current language:  auto
The current source language is &quot;auto; currently asm&quot;.

Thread 4 (Thread 0x2aaaab0ae910 (LWP 24616)):
#0  pthread_cond_wait@@GLIBC_2.3.2 () at
./nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:261
#1  0x00000000005b49a3 in GC_wait_marker () at pthread_support.c:1785
#2  0x00000000005b6724 in GC_help_marker (my_mark_no=57) at mark.c:1116
#3  0x00000000005b36f0 in GC_mark_thread (id=0x2) at pthread_support.c:548
#4  0x00002addd001d73a in start_thread (arg=&lt;value optimized out&gt;) at
pthread_create.c:300
#5  0x00002addd05812fd in clone () at
./sysdeps/unix/sysv/linux/x86_64/clone.S:112
#6  0x0000000000000000 in ?? ()

Thread 3 (Thread 0x2aaaabfc6910 (LWP 24617)):
#0  0x00002addd0025131 in nanosleep () from /lib/libpthread.so.0
#1  0x00000000005a72a2 in collection_thread (unused=&lt;value optimized out&gt;) at
collection.c:34
#2  0x00002addd001d73a in start_thread (arg=&lt;value optimized out&gt;) at
pthread_create.c:300
#3  0x00002addd05812fd in clone () at
./sysdeps/unix/sysv/linux/x86_64/clone.S:112
#4  0x0000000000000000 in ?? ()

Thread 2 (Thread 0x2aaaac227910 (LWP 24618)):
#0  sem_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/sem_wait.S:85
#1  0x000000000056d290 in finalizer_thread (unused=&lt;value optimized out&gt;) at
gc.c:1022
#2  0x00000000004ee795 in start_wrapper (data=&lt;value optimized out&gt;) at
threads.c:721
#3  0x00000000005a1833 in thread_start_routine (args=0xfcc970) at
wthreads.c:286
#4  0x00000000005b4636 in GC_start_routine (arg=0x2aaaab0d4e70) at
pthread_support.c:1390
#5  0x00002addd001d73a in start_thread (arg=&lt;value optimized out&gt;) at
pthread_create.c:300
#6  0x00002addd05812fd in clone () at
./sysdeps/unix/sysv/linux/x86_64/clone.S:112
#7  0x0000000000000000 in ?? ()
Current language:  auto
The current source language is &quot;auto; currently c&quot;.

Thread 1 (Thread 0x2addd0a390b0 (LWP 24613)):
#0  0x00002addd002490b in read () from /lib/libpthread.so.0
#1  0x000000000048869b in mono_handle_native_sigsegv (signal=&lt;value optimized
out&gt;, ctx=&lt;value optimized out&gt;) at mini-exceptions.c:1808
#2  &lt;signal handler called&gt;
#3  0x00002addd04e7f25 in *__GI_raise (sig=&lt;value optimized out&gt;) at
./nptl/sysdeps/unix/sysv/linux/raise.c:64
#4  0x00002addd04ead60 in *__GI_abort () at abort.c:88
#5  0x00002addcf9a5ad0 in IA__g_assertion_message (domain=0x2addcf9e351e &quot;&quot;,
file=0x5d81bc &quot;reflection.c&quot;, line=&lt;value optimized out&gt;, func=0x676df0
&quot;get_field_on_inst_generic_type&quot;, 
    message=&lt;value optimized out&gt;) at
/tmp/buildd/glib2.0-2.22.2/glib/gtestutils.c:1302
#6  0x00002addcf9a6052 in IA__g_assertion_message_expr (domain=0x0,
file=0x5d81bc &quot;reflection.c&quot;, line=2612, func=0x676df0
&quot;get_field_on_inst_generic_type&quot;, 
    expr=&lt;value optimized out&gt;) at
/tmp/buildd/glib2.0-2.22.2/glib/gtestutils.c:1313
#7  0x000000000056e33c in get_field_on_inst_generic_type (field=&lt;value
optimized out&gt;) at reflection.c:2612
#8  0x000000000057c1a5 in mono_field_get_object (domain=0x2aaaab0d3db0,
klass=&quot;Nil&quot;, field=0x2aaab0e871a8) at reflection.c:6447
#9  0x00000000004e4674 in ves_icall_Type_GetField (type=&lt;value optimized out&gt;,
name=0x2aaaac897240, bflags=24) at icall.c:3302
#10 0x0000000041a3d001 in ?? ()
#11 0x0000000000f8ee60 in ?? ()
#12 0x00002aaaaef71f80 in ?? ()
#13 0x00007fff42d1fde0 in ?? ()
#14 0x0000000000000000 in ?? ()
Current language:  auto
The current source language is &quot;auto; currently asm&quot;.
Current language:  auto
The current source language is &quot;auto; currently c&quot;.

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

Command terminated by signal 6

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="095036.html">[Mono-bugs] [Bug 555464] reflection.c:2609:get_field_on_inst_generic_type: assertion
</A></li>
	<LI>Next message: <A HREF="095235.html">[Mono-bugs] [Bug 555464] reflection.c:2609:get_field_on_inst_generic_type: assertion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#95114">[ date ]</a>
              <a href="thread.html#95114">[ thread ]</a>
              <a href="subject.html#95114">[ subject ]</a>
              <a href="author.html#95114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
