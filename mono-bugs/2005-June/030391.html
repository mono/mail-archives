<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 75214][Maj] Changed - assembly load failure on
	64bit with bundle
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2075214%5D%5BMaj%5D%20Changed%20-%20assembly%20load%20failure%20on%0A%0964bit%20with%20bundle&In-Reply-To=bug-75214%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030390.html">
   <LINK REL="Next"  HREF="030392.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 75214][Maj] Changed - assembly load failure on
	64bit with bundle</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2075214%5D%5BMaj%5D%20Changed%20-%20assembly%20load%20failure%20on%0A%0964bit%20with%20bundle&In-Reply-To=bug-75214%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 75214][Maj] Changed - assembly load failure on
	64bit with bundle">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Mon Jun 13 20:42:33 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="030390.html">[Mono-bugs] [Bug 75214][Maj] Changed - assembly load failure on
	64bit with bundle
</A></li>
        <LI>Next message: <A HREF="030392.html">[Mono-bugs] [Bug 75240][Nor] Changed - Remove mod_mono from the
	installer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30391">[ date ]</a>
              <a href="thread.html#30391">[ thread ]</a>
              <a href="subject.html#30391">[ subject ]</a>
              <a href="author.html#30391">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=75214">http://bugzilla.ximian.com/show_bug.cgi?id=75214</A>

--- shadow/75214	2005-06-13 19:14:05.000000000 -0400
+++ shadow/75214.tmp.27356	2005-06-13 20:42:33.000000000 -0400
@@ -72,6 +72,85 @@
 ------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at ximian.com</A>  2005-06-13 19:14 -------
 Extra information: this was a regression from 1.1.7.2 and 1.1.7.3.
 
 Although 1.1.7.2 would crash later for some other reason, this new
 crash apparently was introduced after the amd64 patches that we
 applied from Zoltan.
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at ximian.com</A>  2005-06-13 20:42 -------
+Some further detail:
+
+Using mono-1.1.7.3.tar.gz from:
+
+<A HREF="http://primates.ximian.com/~bmaurer/1.1.7.3/mono-1.1.7.3.tar.gz">http://primates.ximian.com/~bmaurer/1.1.7.3/mono-1.1.7.3.tar.gz</A>
+
+And doing:
+bash$ mcs hello.cs (your standard hello world)
+bash$ mono hello.exe
+Hello
+bash$ mkbundle hello.exe 
+Sources: 1 Auto-dependencies: False
+   embedding: /home/miguel/hello.exe
+Compiling:
+as -o /tmp/tmp3d4aad4c.o temp.s
+cc -o a.out -Wall temp.c `pkg-config --cflags --libs mono`
+/tmp/tmp3d4aad4c.o
+Done
+bash$ ./a.out
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">+miguel at amd-mono</A>:~&gt; ./a.out
+Hello
+
+You must C-c to stop a.out, as it hangs at this point, running on gdb:
+
+(gdb) run
+Starting program: /home/miguel/a.out
+[Thread debugging using libthread_db enabled]
+[New Thread 182910049728 (LWP 18642)]
+[New Thread 1073822064 (LWP 18645)]
+[New Thread 1075984752 (LWP 18646)]
+Hello
+
+Program received signal SIGPWR, Power fail/restart.
+[Switching to Thread 1075984752 (LWP 18646)]
+0x0000002a9597a8c1 in pthread_cond_timedwait@@GLIBC_2.3.2 () from
+/lib64/tls/libpthread.so.0
+(gdb) cont
+Continuing.
+
+Program received signal SIGSEGV, Segmentation fault.
+[Switching to Thread 182910049728 (LWP 18642)]
+0x0000002a957a9395 in GC_mark_from (mark_stack_top=Variable
+&quot;mark_stack_top&quot; is not available.
+) at mark.c:759
+759               deferred = *limit;
+(gdb) p limit
+Could not find the frame base for &quot;GC_mark_from&quot;.
+(gdb) where
+#0  0x0000002a957a9395 in GC_mark_from (mark_stack_top=Variable
+&quot;mark_stack_top&quot; is not available.
+) at mark.c:759
+#1  0x0000002a957a9a5f in GC_mark_some (cold_gc_frame=Variable
+&quot;cold_gc_frame&quot; is not available.
+) at mark.c:361
+#2  0x0000002a957a1d6a in GC_stopped_mark (stop_func=Variable
+&quot;stop_func&quot; is not available.
+) at alloc.c:533
+#3  0x0000002a957a20a5 in GC_try_to_collect_inner (stop_func=Variable
+&quot;stop_func&quot; is not available.
+) at alloc.c:375
+#4  0x0000002a957a2486 in GC_try_to_collect (stop_func=Variable
+&quot;stop_func&quot; is not available.
+) at alloc.c:799
+#5  0x0000002a957a2510 in GC_gcollect () at alloc.c:812
+#6  0x0000002a957460fa in mono_domain_finalize (domain=Variable
+&quot;domain&quot; is not available.
+) at gc.c:197
+#7  0x0000002a956bc832 in mini_cleanup (domain=Variable &quot;domain&quot; is
+not available.
+) at mini.c:10090
+#8  0x0000002a956e645b in mono_main (argc=Variable &quot;argc&quot; is not
+available.
+) at driver.c:898
+#9  0x0000000000400b33 in main ()
+
+This is the hang, but it is not the problem that James is running into
+it seems.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030390.html">[Mono-bugs] [Bug 75214][Maj] Changed - assembly load failure on
	64bit with bundle
</A></li>
	<LI>Next message: <A HREF="030392.html">[Mono-bugs] [Bug 75240][Nor] Changed - Remove mod_mono from the
	installer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30391">[ date ]</a>
              <a href="thread.html#30391">[ thread ]</a>
              <a href="subject.html#30391">[ subject ]</a>
              <a href="author.html#30391">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
