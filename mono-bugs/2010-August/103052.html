<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 633037] New: System.Web.Mvc.ViewPage&lt;dynamic&gt; causes compiler exception when accessing Model methods or properties
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20633037%5D%20New%3A%20System.Web.Mvc.ViewPage%3Cdynamic%3E%0A%20causes%20compiler%20exception%20when%20accessing%20Model%20methods%20or%20properties&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="103050.html">
   <LINK REL="Next"  HREF="103053.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 633037] New: System.Web.Mvc.ViewPage&lt;dynamic&gt; causes compiler exception when accessing Model methods or properties</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20633037%5D%20New%3A%20System.Web.Mvc.ViewPage%3Cdynamic%3E%0A%20causes%20compiler%20exception%20when%20accessing%20Model%20methods%20or%20properties&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 633037] New: System.Web.Mvc.ViewPage&lt;dynamic&gt; causes compiler exception when accessing Model methods or properties">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Aug 19 21:33:08 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="103050.html">[Mono-bugs] [Bug 623723] Gendarme - AvoidCodeDuplicatedInSameClassRule, AvoidCodeDuplicatedInSiblingClassesRule false positives
</A></li>
        <LI>Next message: <A HREF="103053.html">[Mono-bugs] [Bug 633037] System.Web.Mvc.ViewPage&lt;dynamic&gt; causes compiler exception when accessing Model methods or properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#103052">[ date ]</a>
              <a href="thread.html#103052">[ thread ]</a>
              <a href="subject.html#103052">[ subject ]</a>
              <a href="author.html#103052">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=633037">https://bugzilla.novell.com/show_bug.cgi?id=633037</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=633037#c0">https://bugzilla.novell.com/show_bug.cgi?id=633037#c0</A>


           Summary: System.Web.Mvc.ViewPage&lt;dynamic&gt; causes compiler
                    exception when accessing Model methods or properties
    Classification: Mono
           Product: Mono: Compilers
           Version: SVN
          Platform: x86
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: C#
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">denisv at post.skynet.lt</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.8)
Gecko/20100722 Firefox/3.6.8

Versions:
Mono Git 42932bf97e7d985c273a264c34c30bd8c5d56b8c
XSP Git ab6ba373a90a89a3e75b0e17232a2dddd273dcc7
(pulled 2010-08-19)
OS: Debian squeeze

When an ASP.NET MVC page has a dynamic typed model

&lt;%@ Page Title=&quot;&quot; Language=&quot;C#&quot;
MasterPageFile=&quot;~/Views/Shared/ViewMasterPage1.Master&quot;
Inherits=&quot;System.Web.Mvc.ViewPage&lt;dynamic&gt;&quot; %&gt;

and accesses the model

&lt;%: Model.SomeMethod() %&gt;

it causes System.NullReferenceException in Mono.CSharp.Invocation.EmitCall
(full exception stack trace is provided below)

Reproducible: Always

Steps to Reproduce:
1. Unzip attached zip file
2. xsp4 --port 8000
3. Point web browser to localhost:8000
Actual Results:  
Server Error in '/' Application
Compilation Error

Description: Error compiling a resource required to service this request.
Review your source file and modify it to fix this error.

Compiler Error Message: : at Mono.CSharp.Invocation.EmitCall
(Mono.CSharp.EmitContext ec, Mono.CSharp.Expression instance_expr,
Mono.CSharp.MethodSpec method, Mono.CSharp.Arguments Arguments, Location loc,
Boolean dup_args, Boolean omit_args) [0x00000] in &lt;filename unknown&gt;:0
~/Views/Home/Index.aspx
Show Detailed Compiler Output:

dmcs /target:library /lib:&quot;/tmp/bug/bin&quot; /debug+ /optimize- /warn:4
/out:&quot;/tmp/denis-temp-aspnet-0/d8918e95/App_Web_1763a62a.dll&quot;
/r:&quot;/opt/mono/lib/mono/4.0/mscorlib.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/Microsoft.CSharp/4.0.0.0__b03f5f7f11d50a3a/Microsoft.CSharp.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System/4.0.0.0__b77a5c561934e089/System.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Configuration/4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Web/4.0.0.0__b03f5f7f11d50a3a/System.Web.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Data/4.0.0.0__b77a5c561934e089/System.Data.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Web.Services/4.0.0.0__b03f5f7f11d50a3a/System.Web.Services.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Xml/4.0.0.0__b77a5c561934e089/System.Xml.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Drawing/4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.EnterpriseServices/4.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.IdentityModel/4.0.0.0__b77a5c561934e089/System.IdentityModel.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Runtime.Serialization/4.0.0.0__b77a5c561934e089/System.Runtime.Serialization.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Xaml/4.0.0.0__b77a5c561934e089/System.Xaml.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.ServiceModel/4.0.0.0__b77a5c561934e089/System.ServiceModel.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.ServiceModel.Web/4.0.0.0__31bf3856ad364e35/System.ServiceModel.Web.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Core/4.0.0.0__b77a5c561934e089/System.Core.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Web.Extensions/4.0.0.0__31bf3856ad364e35/System.Web.Extensions.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Data.DataSetExtensions/4.0.0.0__b77a5c561934e089/System.Data.DataSetExtensions.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Xml.Linq/4.0.0.0__b77a5c561934e089/System.Xml.Linq.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.ComponentModel.DataAnnotations/4.0.0.0__31bf3856ad364e35/System.ComponentModel.DataAnnotations.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Web.DynamicData/4.0.0.0__31bf3856ad364e35/System.Web.DynamicData.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Data.Linq/4.0.0.0__b77a5c561934e089/System.Data.Linq.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Web.ApplicationServices/4.0.0.0__31bf3856ad364e35/System.Web.ApplicationServices.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Web.Abstractions/4.0.0.0__31bf3856ad364e35/System.Web.Abstractions.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Web.Routing/4.0.0.0__31bf3856ad364e35/System.Web.Routing.dll&quot;
/r:&quot;/opt/mono/lib/mono/gac/System.Web.Mvc/2.0.0.0__31bf3856ad364e35/System.Web.Mvc.dll&quot;
/r:&quot;/tmp/bug/bin/MvcApplication1.dll&quot;
/r:&quot;/tmp/denis-temp-aspnet-0/d8918e95/App_global.asax_3469df5f.dll&quot;
/r:&quot;/tmp/denis-temp-aspnet-0/d8918e95/App_Web_ViewMasterPage1.Master.dbfc6dff.5b59d94a.dll&quot;
 /nowarn:0169 /d:DEBUG  --
&quot;/tmp/denis-temp-aspnet-0/d8918e95/App_Web_1763a62a_0.cs&quot; 


Unhandled Exception: System.NullReferenceException: Object reference not set to
an instance of an object
  at Mono.CSharp.Invocation.EmitCall (Mono.CSharp.EmitContext ec,
Mono.CSharp.Expression instance_expr, Mono.CSharp.MethodSpec method,
Mono.CSharp.Arguments Arguments, Location loc, Boolean dup_args, Boolean
omit_args) [0x00000] in :0 
  at Mono.CSharp.PropertyExpr.Emit (Mono.CSharp.EmitContext ec, Boolean
leave_copy) [0x00000] in :0 
  at Mono.CSharp.PropertyOrIndexerExpr`1[T].Emit (Mono.CSharp.EmitContext ec)
[0x00000] in :0 
  at Mono.CSharp.Argument.Emit (Mono.CSharp.EmitContext ec) [0x00000] in :0 
  at Mono.CSharp.Arguments.Emit (Mono.CSharp.EmitContext ec, Boolean dup_args,
Mono.CSharp.LocalTemporary this_arg) [0x00000] in :0 
  at Mono.CSharp.Invocation.EmitCall (Mono.CSharp.EmitContext ec,
Mono.CSharp.Expression instance_expr, Mono.CSharp.MethodSpec method,
Mono.CSharp.Arguments Arguments, Location loc, Boolean dup_args, Boolean
omit_args) [0x00000] in :0 
  at Mono.CSharp.Invocation.EmitCall (Mono.CSharp.EmitContext ec,
Mono.CSharp.Expression instance_expr, Mono.CSharp.MethodSpec method,
Mono.CSharp.Arguments Arguments, Location loc) [0x00000] in :0 
  at Mono.CSharp.DelegateInvocation.Emit (Mono.CSharp.EmitContext ec) [0x00000]
in :0 
  at Mono.CSharp.DynamicExpressionStatement.EmitCall (Mono.CSharp.EmitContext
ec, Mono.CSharp.Expression binder, Mono.CSharp.Arguments arguments, Boolean
isStatement) [0x00000] in :0 
  at Mono.CSharp.DynamicExpressionStatement.Emit (Mono.CSharp.EmitContext ec)
[0x00000] in :0 
  at Mono.CSharp.Argument.Emit (Mono.CSharp.EmitContext ec) [0x00000] in :0 
  at Mono.CSharp.Arguments.Emit (Mono.CSharp.EmitContext ec, Boolean dup_args,
Mono.CSharp.LocalTemporary this_arg) [0x00000] in :0 
  at Mono.CSharp.Invocation.EmitCall (Mono.CSharp.EmitContext ec,
Mono.CSharp.Expression instance_expr, Mono.CSharp.MethodSpec method,
Mono.CSharp.Arguments Arguments, Location loc, Boolean dup_args, Boolean
omit_args) [0x00000] in :0 
  at Mono.CSharp.Invocation.EmitCall (Mono.CSharp.EmitContext ec,
Mono.CSharp.Expression instance_expr, Mono.CSharp.MethodSpec method,
Mono.CSharp.Arguments Arguments, Location loc) [0x00000] in :0 
  at Mono.CSharp.DelegateInvocation.Emit (Mono.CSharp.EmitContext ec) [0x00000]
in :0 
  at Mono.CSharp.DynamicExpressionStatement.EmitCall (Mono.CSharp.EmitContext
ec, Mono.CSharp.Expression binder, Mono.CSharp.Arguments arguments, Boolean
isStatement) [0x00000] in :0 
  at Mono.CSharp.DynamicExpressionStatement.Emit (Mono.CSharp.EmitContext ec)
[0x00000] in :0 
  at Mono.CSharp.Argument.Emit (Mono.CSharp.EmitContext ec) [0x00000] in :0 
  at Mono.CSharp.Arguments.Emit (Mono.CSharp.EmitContext ec, Boolean dup_args,
Mono.CSharp.LocalTemporary this_arg) [0x00000] in :0 
  at Mono.CSharp.Invocation.EmitCall (Mono.CSharp.EmitContext ec,
Mono.CSharp.Expression instance_expr, Mono.CSharp.MethodSpec method,
Mono.CSharp.Arguments Arguments, Location loc, Boolean dup_args, Boolean
omit_args) [0x00000] in :0 
  at Mono.CSharp.Invocation.EmitCall (Mono.CSharp.EmitContext ec,
Mono.CSharp.Expression instance_expr, Mono.CSharp.MethodSpec method,
Mono.CSharp.Arguments Arguments, Location loc) [0x00000] in :0 
  at Mono.CSharp.DelegateInvocation.Emit (Mono.CSharp.EmitContext ec) [0x00000]
in :0 
  at Mono.CSharp.DynamicExpressionStatement.EmitCall (Mono.CSharp.EmitContext
ec, Mono.CSharp.Expression binder, Mono.CSharp.Arguments arguments, Boolean
isStatement) [0x00000] in :0 
  at Mono.CSharp.DynamicExpressionStatement.EmitStatement
(Mono.CSharp.EmitContext ec) [0x00000] in :0 
  at Mono.CSharp.DynamicInvocation.EmitStatement (Mono.CSharp.EmitContext ec)
[0x00000] in :0 
  at Mono.CSharp.StatementExpression.DoEmit (Mono.CSharp.EmitContext ec)
[0x00000] in :0 
  at Mono.CSharp.Statement.Emit (Mono.CSharp.EmitContext ec) [0x00000] in :0 
  at Mono.CSharp.Block.DoEmit (Mono.CSharp.EmitContext ec) [0x00000] in :0 
  at Mono.CSharp.Block.Emit (Mono.CSharp.EmitContext ec) [0x00000] in :0 
  at Mono.CSharp.ExplicitBlock.Emit (Mono.CSharp.EmitContext ec) [0x00000] in
:<i>0 
</I>  at Mono.CSharp.ToplevelBlock.Emit (Mono.CSharp.EmitContext ec) [0x00000] in
:<i>0 
</I>  at Mono.CSharp.MethodData.Emit (Mono.CSharp.DeclSpace parent) [0x00000] in :0 
  at Mono.CSharp.MethodOrOperator.Emit () [0x00000] in :0 
  at Mono.CSharp.Method.Emit () [0x00000] in :0 


Expected Results:  
No error page

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="103050.html">[Mono-bugs] [Bug 623723] Gendarme - AvoidCodeDuplicatedInSameClassRule, AvoidCodeDuplicatedInSiblingClassesRule false positives
</A></li>
	<LI>Next message: <A HREF="103053.html">[Mono-bugs] [Bug 633037] System.Web.Mvc.ViewPage&lt;dynamic&gt; causes compiler exception when accessing Model methods or properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#103052">[ date ]</a>
              <a href="thread.html#103052">[ thread ]</a>
              <a href="subject.html#103052">[ subject ]</a>
              <a href="author.html#103052">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
