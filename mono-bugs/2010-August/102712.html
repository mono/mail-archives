<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 628660] New: Crash in runtime when fetching method body from a boo compiled assembly type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20628660%5D%20New%3A%20Crash%20in%20runtime%20when%20fetching%20method%0A%20body%20from%20a%20boo%20compiled%20assembly%20type&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="102711.html">
   <LINK REL="Next"  HREF="102731.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 628660] New: Crash in runtime when fetching method body from a boo compiled assembly type</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20628660%5D%20New%3A%20Crash%20in%20runtime%20when%20fetching%20method%0A%20body%20from%20a%20boo%20compiled%20assembly%20type&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 628660] New: Crash in runtime when fetching method body from a boo compiled assembly type">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Aug  5 07:06:16 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="102711.html">[Mono-bugs] [Bug 628615] New: FolderBrowserDialog does not properly display Unicode characters in folder names
</A></li>
        <LI>Next message: <A HREF="102731.html">[Mono-bugs] [Bug 628660] Crash in runtime when fetching method body from a boo compiled assembly type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#102712">[ date ]</a>
              <a href="thread.html#102712">[ thread ]</a>
              <a href="subject.html#102712">[ subject ]</a>
              <a href="author.html#102712">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=628660">http://bugzilla.novell.com/show_bug.cgi?id=628660</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=628660#c0">http://bugzilla.novell.com/show_bug.cgi?id=628660#c0</A>


           Summary: Crash in runtime when fetching method body from a boo
                    compiled assembly type
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.6.x
          Platform: i686
        OS/Version: Kubuntu
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">marcus at in-process.se</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Description of Problem:


Steps to reproduce the problem:
1. Compile type with Boo
2. Retrieve a method info from the boo type
3. Call GetMethodBody on the boo type method


Actual Results:
ERROR:metadata.c:1000:mono_metadata_decode_row_col: assertion failed: (idx &lt;
t-&gt;rows)
Stacktrace:

  at (wrapper managed-to-native)
System.Reflection.MethodBase.GetMethodBodyInternal (intptr) &lt;0x00004&gt;
  at (wrapper managed-to-native)
System.Reflection.MethodBase.GetMethodBodyInternal (intptr) &lt;0x00004&gt;
  at System.Reflection.MethodBase.GetMethodBody (intptr) &lt;IL 0x00001, 0x00010&gt;
  at System.Reflection.MonoMethod.GetMethodBody () &lt;IL 0x00001, 0x00014&gt;
  at BooConfigurator.Engine.Configurator.BuildConstraints
(System.Reflection.Assembly) [0x00091] in
/home/kuse/Code/CLI/BooConfigurator/BooConfigurator.Engine/Configurator.cs:159
  at BooConfigurator.Engine.Configurator.Build () [0x0009b] in
/home/kuse/Code/CLI/BooConfigurator/BooConfigurator.Engine/Configurator.cs:40
  at WinFormsTest.Form1.OnLoad (System.EventArgs) [0x00006] in
/home/kuse/Code/CLI/BooConfigurator/WinFormsTest/Form1.cs:36
  at System.Windows.Forms.Form.OnLoadInternal (System.EventArgs) &lt;IL 0x0002b,
0x00081&gt;
  at System.Windows.Forms.Form.OnCreateControl () &lt;IL 0x0002d, 0x00051&gt;
  at System.Windows.Forms.Control.CreateControl () &lt;IL 0x000a4, 0x0012e&gt;
  at System.Windows.Forms.Control.WmShowWindow (System.Windows.Forms.Message&amp;)
&lt;IL 0x0003c, 0x0010f&gt;
  at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message&amp;) &lt;IL
0x001dd, 0x00292&gt;
  at System.Windows.Forms.ScrollableControl.WndProc
(System.Windows.Forms.Message&amp;) &lt;IL 0x00002, 0x00013&gt;
  at System.Windows.Forms.ContainerControl.WndProc
(System.Windows.Forms.Message&amp;) &lt;IL 0x0003e, 0x00051&gt;
  at System.Windows.Forms.Form.WndProc (System.Windows.Forms.Message&amp;) &lt;IL
0x00167, 0x0022a&gt;
  at System.Windows.Forms.Control/ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp;) &lt;IL 0x00007, 0x0001d&gt;
  at System.Windows.Forms.Control/ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp;) &lt;IL 0x0000c, 0x0002d&gt;
  at System.Windows.Forms.NativeWindow.WndProc
(intptr,System.Windows.Forms.Msg,intptr,intptr) &lt;IL 0x00088, 0x001eb&gt;
  at System.Windows.Forms.XplatUIX11.SendMessage
(intptr,System.Windows.Forms.Msg,intptr,intptr) &lt;IL 0x000db, 0x002ae&gt;
  at System.Windows.Forms.XplatUIX11.MapWindow
(System.Windows.Forms.Hwnd,System.Windows.Forms.WindowType) &lt;IL 0x00048,
0x0019a&gt;
  at System.Windows.Forms.XplatUIX11.CreateWindow
(System.Windows.Forms.CreateParams) &lt;IL 0x0059a, 0x00bb4&gt;
  at System.Windows.Forms.XplatUI.CreateWindow
(System.Windows.Forms.CreateParams) &lt;IL 0x00006, 0x0001d&gt;
  at System.Windows.Forms.NativeWindow.CreateHandle
(System.Windows.Forms.CreateParams) &lt;IL 0x0000d, 0x00030&gt;
  at System.Windows.Forms.Control.CreateHandle () &lt;IL 0x00041, 0x0007f&gt;
  at System.Windows.Forms.Form.CreateHandle () &lt;IL 0x00001, 0x00014&gt;
  at System.Windows.Forms.Control.CreateControl () &lt;IL 0x0004c, 0x0008a&gt;
  at System.Windows.Forms.Control.SetVisibleCore (bool) &lt;IL 0x00044, 0x00079&gt;
  at System.Windows.Forms.Form.SetVisibleCore (bool) &lt;IL 0x0007d, 0x0021d&gt;
  at System.Windows.Forms.Control.set_Visible (bool) &lt;IL 0x0000e, 0x0002c&gt;
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.Control.set_Visible (bool) &lt;IL 0x00033, 0x00057&gt;
  at System.Windows.Forms.Application.RunLoop
(bool,System.Windows.Forms.ApplicationContext) &lt;IL 0x00060, 0x001f9&gt;
  at System.Windows.Forms.Application.Run
(System.Windows.Forms.ApplicationContext) &lt;IL 0x00016, 0x00052&gt;
  at System.Windows.Forms.Application.Run (System.Windows.Forms.Form) &lt;IL
0x00006, 0x00033&gt;
  at WinFormsTest.Program.Main () [0x0000b] in
/home/kuse/Code/CLI/BooConfigurator/WinFormsTest/Program.cs:18
  at (wrapper runtime-invoke) object.runtime_invoke_void
(object,intptr,intptr,intptr) &lt;IL 0x0001b, 0x0003a&gt;

Native stacktrace:

    /usr/bin/mono() [0x80d5984]
    [0xb77c6410]
    /lib/tls/i686/cmov/libc.so.6(abort+0x182) [0xb7561a82]
    /lib/libglib-2.0.so.0(g_assertion_message+0x163) [0xb773ddf3]
    /lib/libglib-2.0.so.0(+0x6344d) [0xb773e44d]
    /usr/bin/mono(mono_metadata_decode_row_col+0x114) [0x814c454]
    /usr/bin/mono(mono_method_body_get_object+0x14a) [0x81b12aa]
    /usr/bin/mono() [0x813b49a]
    [0xb4e78975]
    [0xb4e78931]
    [0xb4e7890d]
    [0xb4e78822]
    [0xb51002c1]
    [0xb50ffddb]
    [0xb50ffb02]
    [0xb50ff6aa]
    [0xb57e6f0f]
    [0xb57efa98]
    [0xb57eee13]
    [0xb50fd344]
    [0xb50fd30a]
    [0xb50fd16b]
    [0xb57eeb76]
    [0xb57eeb4e]
    [0xb57ede8c]
    [0xb57ebcdf]
    [0xb57ef78b]
    [0xb57e7fbd]
    [0xb57e73fe]
    [0xb57e7381]
    [0xb57e7108]
    [0xb50fb295]
    [0xb57e6e6b]
    [0xb511a3ca]
    [0xb50fae6e]
    [0xb511a31d]
    [0xb511a2c0]
    [0xb50f9e32]
    [0xb50f9be3]
    [0xb50f989c]
    [0xb68ff1f5]
    [0xb68ff26b]
    /usr/bin/mono() [0x8063611]
    /usr/bin/mono(mono_runtime_invoke+0x40) [0x8164940]
    /usr/bin/mono(mono_runtime_exec_main+0xde) [0x816844e]
    /usr/bin/mono(mono_runtime_run_main+0x112) [0x8168752]
    /usr/bin/mono(mono_main+0x1679) [0x80b50a9]
    /usr/bin/mono() [0x805b6e5]
    /lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe6) [0xb754abd6]
    /usr/bin/mono() [0x805b621]

Debug info from gdb:

[Thread debugging using libthread_db enabled]
[New Thread 0xb6507b70 (LWP 4630)]
[New Thread 0xb77b2b70 (LWP 4629)]
[New Thread 0xb7391b70 (LWP 4628)]
0xb77c6422 in __kernel_vsyscall ()
  4 Thread 0xb7391b70 (LWP 4628)  0xb77c6422 in __kernel_vsyscall ()
  3 Thread 0xb77b2b70 (LWP 4629)  0xb77c6422 in __kernel_vsyscall ()
  2 Thread 0xb6507b70 (LWP 4630)  0xb77c6422 in __kernel_vsyscall ()
* 1 Thread 0xb75016f0 (LWP 4625)  0xb77c6422 in __kernel_vsyscall ()

Thread 4 (Thread 0xb7391b70 (LWP 4628)):
#0  0xb77c6422 in __kernel_vsyscall ()
#1  0xb76be015 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib/tls/i686/cmov/libpthread.so.0
#2  0x0821157a in ?? ()
#3  0x08208eed in ?? ()
#4  0x082123a5 in ?? ()
#5  0xb76b996e in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
#6  0xb7601a4e in clone () from /lib/tls/i686/cmov/libc.so.6

Thread 3 (Thread 0xb77b2b70 (LWP 4629)):
#0  0xb77c6422 in __kernel_vsyscall ()
#1  0xb76c1736 in nanosleep () from /lib/tls/i686/cmov/libpthread.so.0
#2  0x081f8a28 in ?? ()
#3  0xb76b996e in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
#4  0xb7601a4e in clone () from /lib/tls/i686/cmov/libc.so.6

Thread 2 (Thread 0xb6507b70 (LWP 4630)):
#0  0xb77c6422 in __kernel_vsyscall ()
#1  0xb76c0245 in sem_wait@@GLIBC_2.1 ()
   from /lib/tls/i686/cmov/libpthread.so.0
#2  0x0815a6c0 in ?? ()
#3  0x08171b1b in ?? ()
#4  0x081e2fc2 in ?? ()
#5  0x08212955 in ?? ()
#6  0xb76b996e in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
#7  0xb7601a4e in clone () from /lib/tls/i686/cmov/libc.so.6

Thread 1 (Thread 0xb75016f0 (LWP 4625)):
#0  0xb77c6422 in __kernel_vsyscall ()
#1  0xb76c0f5b in read () from /lib/tls/i686/cmov/libpthread.so.0
#2  0x080d5b54 in ?? ()
#3  &lt;signal handler called&gt;
#4  0xb77c6422 in __kernel_vsyscall ()
#5  0xb755e651 in raise () from /lib/tls/i686/cmov/libc.so.6
#6  0xb7561a82 in abort () from /lib/tls/i686/cmov/libc.so.6
#7  0xb773ddf3 in g_assertion_message () from /lib/libglib-2.0.so.0
#8  0xb773e44d in g_assertion_message_expr () from /lib/libglib-2.0.so.0
#9  0x0814c454 in mono_metadata_decode_row_col ()
#10 0x081b12aa in mono_method_body_get_object ()
#11 0x0813b49a in ?? ()
#12 0xb4e78975 in ?? ()
#13 0xb4e78931 in ?? ()
#14 0xb4e7890d in ?? ()
#15 0xb4e78822 in ?? ()
#16 0xb51002c1 in ?? ()
#17 0xb50ffddb in ?? ()
#18 0xb50ffb02 in ?? ()
#19 0xb50ff6aa in ?? ()
#20 0xb57e6f0f in ?? ()
#21 0xb57efa98 in ?? ()
#22 0xb57eee13 in ?? ()
#23 0xb50fd344 in ?? ()
#24 0xb50fd30a in ?? ()
#25 0xb50fd16b in ?? ()
#26 0xb57eeb76 in ?? ()
#27 0xb57eeb4e in ?? ()
#28 0xb57ede8c in ?? ()
#29 0xb57ebcdf in ?? ()
#30 0xb57ef78b in ?? ()
#31 0xb57e7fbd in ?? ()
#32 0xb57e73fe in ?? ()
#33 0xb57e7381 in ?? ()
#34 0xb57e7108 in ?? ()
#35 0xb50fb295 in ?? ()
#36 0xb57e6e6b in ?? ()
#37 0xb511a3ca in ?? ()
#38 0xb50fae6e in ?? ()
#39 0xb511a31d in ?? ()
#40 0xb511a2c0 in ?? ()
#41 0xb50f9e32 in ?? ()
#42 0xb50f9be3 in ?? ()
#43 0xb50f989c in ?? ()
#44 0xb68ff1f5 in ?? ()
#45 0xb68ff26b in ?? ()
#46 0x08063611 in ?? ()
#47 0x08164940 in mono_runtime_invoke ()
#48 0x0816844e in mono_runtime_exec_main ()
#49 0x08168752 in mono_runtime_run_main ()
#50 0x080b50a9 in mono_main ()
#51 0x0805b6e5 in ?? ()
#52 0xb754abd6 in __libc_start_main () from /lib/tls/i686/cmov/libc.so.6
#53 0x0805b621 in ?? ()

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

The application was terminated by a signal: SIGIOT

Expected Results:
No crash

How often does this happen? 
Always

Additional Information:

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="102711.html">[Mono-bugs] [Bug 628615] New: FolderBrowserDialog does not properly display Unicode characters in folder names
</A></li>
	<LI>Next message: <A HREF="102731.html">[Mono-bugs] [Bug 628660] Crash in runtime when fetching method body from a boo compiled assembly type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#102712">[ date ]</a>
              <a href="thread.html#102712">[ thread ]</a>
              <a href="subject.html#102712">[ subject ]</a>
              <a href="author.html#102712">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
