<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 548346] New: Requesting Longitude results in fatal	error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20548346%5D%20New%3A%20Requesting%20Longitude%20results%20in%20fatal%0A%09error&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="093929.html">
   <LINK REL="Next"  HREF="093898.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 548346] New: Requesting Longitude results in fatal	error</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20548346%5D%20New%3A%20Requesting%20Longitude%20results%20in%20fatal%0A%09error&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 548346] New: Requesting Longitude results in fatal	error">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Oct 20 05:24:48 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="093929.html">[Mono-bugs] [Bug 548276] Marshalling DateTime -&gt; DATE doesn't work for out params.
</A></li>
        <LI>Next message: <A HREF="093898.html">[Mono-bugs] [Bug 548417] New: Runtime crashes in Assembly.GetTypes()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93896">[ date ]</a>
              <a href="thread.html#93896">[ thread ]</a>
              <a href="subject.html#93896">[ subject ]</a>
              <a href="author.html#93896">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=548346">http://bugzilla.novell.com/show_bug.cgi?id=548346</A>


           Summary: Requesting Longitude results in fatal error
    Classification: Mono
           Product: MonoTouch
           Version: unspecified
          Platform: x86
        OS/Version: Mac OS X 10.6
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Runtime
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gnorton at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">Jochenvanwylick at hotmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_1; en-us)
AppleWebKit/531.9 (KHTML, like Gecko) Version/4.0.3 Safari/531.9

When I request the current location in my application using this line: 

System.Console.WriteLine(&quot;Latitude: &quot;+new
MonoTouch.CoreLocation.CLLocation().Coordinate.Latitude.ToString());

My application produces a fatal error. 

NOTE - I'm debugging on the iPhone simulator.

Reproducible: Always

Steps to Reproduce:
1. Create a new application
2. Add this line in FinishedLaunching method:
System.Console.WriteLine(&quot;Latitude: &quot;+new
MonoTouch.CoreLocation.CLLocation().Coordinate.Latitude.ToString());
3. Compile &amp; Run on iPhone simulator
Actual Results:  
Application quits - Application output says: 
Stacktrace:

  at (wrapper managed-to-native)
MonoTouch.ObjCRuntime.Messaging.CLLocationCoordinate2D_objc_msgSend_stret
(MonoTouch.CoreLocation.CLLocationCoordinate2D&amp;,intptr,intptr) &lt;0x00004&gt;
  at (wrapper managed-to-native)
MonoTouch.ObjCRuntime.Messaging.CLLocationCoordinate2D_objc_msgSend_stret
(MonoTouch.CoreLocation.CLLocationCoordinate2D&amp;,intptr,intptr) &lt;0xffffffff&gt;
  at MonoTouch.CoreLocation.CLLocation.get_Coordinate () &lt;0x00053&gt;
  at BugProject.AppDelegate.FinishedLaunching
(MonoTouch.UIKit.UIApplication,MonoTouch.Foundation.NSDictionary) &lt;0x00123&gt;
  at (wrapper runtime-invoke)
&lt;Module&gt;.runtime_invoke_bool__this___object_object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;
  at (wrapper managed-to-native)
MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr)
&lt;0x00004&gt;
  at (wrapper managed-to-native)
MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr)
&lt;0xffffffff&gt;
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) &lt;0x00089&gt;
  at MonoTouch.UIKit.UIApplication.Main (string[]) &lt;0x00014&gt;
  at BugProject.Application.Main (string[]) &lt;0x00010&gt;
  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_void_object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

    0   BugProject                          0x000930ea
mono_handle_native_sigsegv + 266
    1   BugProject                          0x000066fa
mono_sigsegv_signal_handler + 298
    2   libSystem.B.dylib                   0x9769bb9b _sigtramp + 43
    3   ???                                 0xffffffff 0x0 + 4294967295
    4   ???                                 0x057d5b85 0x0 + 92101509
    5   ???                                 0x057d5acc 0x0 + 92101324
    6   ???                                 0x0478e124 0x0 + 75030820
    7   ???                                 0x0478e20c 0x0 + 75031052
    8   BugProject                          0x0000ca9d mono_jit_runtime_invoke
+ 157
    9   BugProject                          0x001f3605 monotouch_trampoline +
1552
    10  UIKit                               0x009df5db -[UIApplication
_performInitializationWithURL:sourceBundleID:] + 432
    11  UIKit                               0x009e8a0a -[UIApplication
_runWithURL:sourceBundleID:] + 594
    12  UIKit                               0x009e5b88 -[UIApplication
handleEvent:withNewEvent:] + 1532
    13  UIKit                               0x009e16d3 -[UIApplication
sendEvent:] + 71
    14  UIKit                               0x009e80b5
_UIApplicationHandleEvent + 5048
    15  GraphicsServices                    0x02b92ef1 PurpleEventCallback +
1533
    16  CoreFoundation                      0x02091b80 CFRunLoopRunSpecific +
3888
    17  CoreFoundation                      0x02090c48 CFRunLoopRunInMode + 88
    18  UIKit                               0x009dfe69 -[UIApplication _run] +
611
    19  UIKit                               0x009e9003 UIApplicationMain + 1157
    20  ???                                 0x0478a709 0x0 + 75015945
    21  ???                                 0x0478a642 0x0 + 75015746
    22  ???                                 0x04789ea5 0x0 + 75013797
    23  ???                                 0x04789de1 0x0 + 75013601
    24  ???                                 0x04789e3b 0x0 + 75013691
    25  BugProject                          0x0000ca9d mono_jit_runtime_invoke
+ 157
    26  BugProject                          0x0015b24b mono_runtime_exec_main +
251
    27  BugProject                          0x0015de75 mono_runtime_run_main +
405
    28  BugProject                          0x001f5729 main + 451
    29  BugProject                          0x00002156 start + 54

Debug info from gdb:

warning: Trying to remove a section from the ordered section list that did not
exist at 0x2d5000.
warning: Could not find object file
&quot;/var/folders/MW/MWGUCO42F+KS-LJHR-Y4OU+++TI/-Tmp-/tmp5db84b39.tmp/main.o&quot; - no
debug information available for
&quot;/var/folders/MW/MWGUCO42F+KS-LJHR-Y4OU+++TI/-Tmp-/tmp5db84b39.tmp/main.m&quot;.

Attaching to process 543.
Reading symbols for shared libraries . done
Reading symbols for shared libraries
........................................................ done
0x97640af9 in read$UNIX2003 ()
  6 port# 0x4a03 0x976357da in mach_msg_trap ()
  5 port# 0x2a03 0x976357da in mach_msg_trap ()
  4 port# 0x2903 0x97635816 in semaphore_wait_trap ()
  3 port# 0x2503 0x97663782 in __semwait_signal ()
  2 port# 0x1403 0x976357da in mach_msg_trap ()
* 1 port# 0x207  0x97640af9 in read$UNIX2003 ()

Thread 6 (process 543):
#0  0x976357da in mach_msg_trap ()
#1  0x97635f47 in mach_msg ()
#2  0x02091382 in CFRunLoopRunSpecific ()
#3  0x02090c48 in CFRunLoopRunInMode ()
#4  0x006a480e in +[NSURLConnection(NSURLConnectionReallyInternal)
_resourceLoadLoop:] ()
#5  0x0064ef7d in -[NSThread main] ()
#6  0x0064eb18 in __NSThread__main__ ()
#7  0x97662f39 in _pthread_start ()
#8  0x97662dbe in thread_start ()

Thread 5 (process 543):
#0  0x976357da in mach_msg_trap ()
#1  0x97635f47 in mach_msg ()
#2  0x02091382 in CFRunLoopRunSpecific ()
#3  0x02090c48 in CFRunLoopRunInMode ()
#4  0x030ed803 in RunWebThread ()
#5  0x97662f39 in _pthread_start ()
#6  0x97662dbe in thread_start ()

Thread 4 (process 543):
#0  0x97635816 in semaphore_wait_trap ()
#1  0x000fe8f0 in finalizer_thread (unused=0x0) at
./../../../mono/metadata/gc.c:1022
#2  0x0018fd36 in start_wrapper (data=0x5100910) at
./../../../mono/metadata/threads.c:657
#3  0x001c43c6 in thread_start_routine (args=0x4843c34) at
./../../../mono/io-layer/wthreads.c:286
#4  0x001eea08 in GC_start_routine (arg=0x4732f60) at
./../../libgc/pthread_support.c:1390
#5  0x97662f39 in _pthread_start ()
#6  0x97662dbe in thread_start ()

Thread 3 (process 543):
#0  0x97663782 in __semwait_signal ()
#1  0x9768f621 in nanosleep$UNIX2003 ()
#2  0x001a66c0 in collection_thread (unused=0x0) at
./../../../mono/io-layer/collection.c:34
#3  0x97662f39 in _pthread_start ()
#4  0x97662dbe in thread_start ()

Thread 2 (process 543):
#0  0x976357da in mach_msg_trap ()
#1  0x97635f47 in mach_msg ()
#2  0x000c64ba in mach_exception_thread (arg=0x0) at
./../../../mono/mini/mini-darwin.c:131
#3  0x001eea08 in GC_start_routine (arg=0x4732f60) at
./../../libgc/pthread_support.c:1390
#4  0x97662f39 in _pthread_start ()
#5  0x97662dbe in thread_start ()

Thread 1 (process 543):
#0  0x97640af9 in read$UNIX2003 ()
#1  0x0009322a in mono_handle_native_sigsegv (signal=11, ctx=0xbfffdd88) at
./../../../mono/mini/mini-exceptions.c:1589
#2  0x000066fa in mono_sigsegv_signal_handler (_dummy=10, info=0xbfffdd48,
context=0xbfffdd88) at ../../../../mono/mini/mini.c:4712
#3  &lt;signal handler called&gt;
#4  0x006005c3 in -[CLLocation coordinate] ()
#5  0x057d5b85 in ?? ()
#6  0x057d5acc in ?? ()
#7  0x0478e124 in ?? ()
#8  0x0478e20c in ?? ()
#9  0x0000ca9d in mono_jit_runtime_invoke (method=0x48094f4, obj=0x47addb0,
params=0xbfffdf40, exc=0x0) at ../../../../mono/mini/mini.c:4616
#10 0x001f3605 in monotouch_trampoline ()
#11 0x009df5db in -[UIApplication
_performInitializationWithURL:sourceBundleID:] ()
#12 0x009e8a0a in -[UIApplication _runWithURL:sourceBundleID:] ()
#13 0x009e5b88 in -[UIApplication handleEvent:withNewEvent:] ()
#14 0x009e16d3 in -[UIApplication sendEvent:] ()
#15 0x009e80b5 in _UIApplicationHandleEvent ()
#16 0x02b92ef1 in PurpleEventCallback ()
#17 0x02091b80 in CFRunLoopRunSpecific ()
#18 0x02090c48 in CFRunLoopRunInMode ()
#19 0x009dfe69 in -[UIApplication _run] ()
#20 0x009e9003 in UIApplicationMain ()
#21 0x0478a709 in ?? ()
#22 0x0478a642 in ?? ()
#23 0x04789ea5 in ?? ()
#24 0x04789de1 in ?? ()
#25 0x04789e3b in ?? ()
#26 0x0000ca9d in mono_jit_runtime_invoke (method=0x5813534, obj=0x0,
params=0xbffff14c, exc=0x0) at ../../../../mono/mini/mini.c:4616
#27 0x0015b24b in mono_runtime_exec_main (method=0x5813534, args=0x473d0a0,
exc=0x0) at ../../../../mono/metadata/object.c:3515
#28 0x0015de75 in mono_runtime_run_main (method=0x5813534, argc=0,
argv=0xbffff1f8, exc=0x0) at ../../../../mono/metadata/object.c:3295
#29 0x001f5729 in main ()

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

Expected Results:  
Getting location information from the CLLocation opbject

Using MTouch 1.1.1 - Snow Leopard - latest Mono

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>

































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="093929.html">[Mono-bugs] [Bug 548276] Marshalling DateTime -&gt; DATE doesn't work for out params.
</A></li>
	<LI>Next message: <A HREF="093898.html">[Mono-bugs] [Bug 548417] New: Runtime crashes in Assembly.GetTypes()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93896">[ date ]</a>
              <a href="thread.html#93896">[ thread ]</a>
              <a href="subject.html#93896">[ subject ]</a>
              <a href="author.html#93896">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
