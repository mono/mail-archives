<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 545525] New: Exception when a strong named assembly reads or writes setting when the Company name has non allowed characters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20545525%5D%20New%3A%20Exception%20when%20a%20strong%20named%0A%20assembly%20reads%20or%20writes%20setting%20when%20the%20Company%20name%20has%20non%20allowed%0A%20characters&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="093486.html">
   <LINK REL="Next"  HREF="093488.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 545525] New: Exception when a strong named assembly reads or writes setting when the Company name has non allowed characters</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20545525%5D%20New%3A%20Exception%20when%20a%20strong%20named%0A%20assembly%20reads%20or%20writes%20setting%20when%20the%20Company%20name%20has%20non%20allowed%0A%20characters&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 545525] New: Exception when a strong named assembly reads or writes setting when the Company name has non allowed characters">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Oct  8 16:10:56 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="093486.html">[Mono-bugs] [Bug 543226] The mono-x debugger acts differently when run inside the mono-addon environment than outside
</A></li>
        <LI>Next message: <A HREF="093488.html">[Mono-bugs] [Bug 545531] New: Spelling Error in MonoTouch.AVFoundation.AVAudioRecorder method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93487">[ date ]</a>
              <a href="thread.html#93487">[ thread ]</a>
              <a href="subject.html#93487">[ subject ]</a>
              <a href="author.html#93487">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=545525">http://bugzilla.novell.com/show_bug.cgi?id=545525</A>


           Summary: Exception when a strong named assembly reads or writes
                    setting when the Company name has non allowed
                    characters
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.4.x
          Platform: i386
        OS/Version: Windows
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">richard at laparola.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; it; rv:1.9.1.3)
Gecko/20090824 Firefox/3.5.3 (.NET CLR 3.5.30729)

When an assembly is strong named, the settings (when calling
ProgramName.Properties.Settings.Default.ExampleSetting) are saved in or read
from a directory that includes the &quot;Company&quot; field in the Assembly Information.
If however the Company field includes characters that can not be used in a
directory name, such as \/:*?&quot;&lt;&gt;| in Windows, then an exception is thrown and
the settings aren't used. The exception with the end of the calling stack is

Unhandled Exception: System.IO.IOException: Win 32 IO returned
ERROR_INVALID_NAME. Path: C:\Users\richard\AppData\Roaming\ProgramName
(<A HREF="http://www.example.com/">http://www.example.com/</A>)\ProgramName.exe_StrongName_+FGcUnFUmN2pzDsQJugTNR+J9VE=
at System.IO.Directory.Exists (System.String path) [0x00036] in
C:\...\System.IO\Directory.cs:227
at System.Configuration.CustomizableFileSettingsProvider.PrevVersionPath
(System.String dirName, System.String currentVersion) [0x00006] in
C:\...\System.System.Configuration\CustomizableFileSettingsProvider.cs:400
at System.Configuration.CustomizableFileSettingsProvider.CreateUserConfigPath()
[0.00268] in
c:\...\System\System.Configuration\CustomizableFileSettingsProvider.cs:384

Microsoft Studio replaces the non allowed characters and all spaces with an
underscore. It also truncates the Company name if it is long, and stores the
settings in AppData\Local rather than AppData\Roaming, but I don't believe that
that is important.

Reproducible: Always

Steps to Reproduce:
1. Create a new assembly and strong name it.
2. In the Assembly Information of the properties, but some non allowed
characters (eg /) in the Company field
3. Create a new setting in the assembly, eg ExampleSetting
4. In the program, read Settings.Default.ExampleSetting
Actual Results:  
An IOException

Expected Results:  
The settings would be read or written.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="093486.html">[Mono-bugs] [Bug 543226] The mono-x debugger acts differently when run inside the mono-addon environment than outside
</A></li>
	<LI>Next message: <A HREF="093488.html">[Mono-bugs] [Bug 545531] New: Spelling Error in MonoTouch.AVFoundation.AVAudioRecorder method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93487">[ date ]</a>
              <a href="thread.html#93487">[ thread ]</a>
              <a href="subject.html#93487">[ subject ]</a>
              <a href="author.html#93487">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
