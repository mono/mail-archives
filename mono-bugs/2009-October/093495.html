<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 545578] New: appSettings file attribute should be interpreted relative to the containing file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20545578%5D%20New%3A%20appSettings%20file%20attribute%20should%20be%0A%20interpreted%20relative%20to%20the%20containing%20file&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="093494.html">
   <LINK REL="Next"  HREF="093497.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 545578] New: appSettings file attribute should be interpreted relative to the containing file</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20545578%5D%20New%3A%20appSettings%20file%20attribute%20should%20be%0A%20interpreted%20relative%20to%20the%20containing%20file&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 545578] New: appSettings file attribute should be interpreted relative to the containing file">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Oct  8 18:21:08 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="093494.html">[Mono-bugs] [Bug 538588] Graffiti crashes when purging a story
</A></li>
        <LI>Next message: <A HREF="093497.html">[Mono-bugs] [Bug 542846] System.Web.HttpResponse.Redirect doesn't use useFullyQualifiedRedirectUrl setting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93495">[ date ]</a>
              <a href="thread.html#93495">[ thread ]</a>
              <a href="subject.html#93495">[ subject ]</a>
              <a href="author.html#93495">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=545578">http://bugzilla.novell.com/show_bug.cgi?id=545578</A>


           Summary: appSettings file attribute should be interpreted
                    relative to the containing file
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.4.x
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Configuration
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sean.foy+novell at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US;
rv:1.9.1.3) Gecko/20090824 Firefox/3.5.3

The MonoInternalNote in
mcs/class/System.Configuration/System.Configuration/AppSettingsSection.cs
indicates some uncertainty about this and related implementation details, but
<A HREF="http://msdn.microsoft.com/en-us/library/ms228154%28VS.80%29.aspx#attributesandElementsToggle">http://msdn.microsoft.com/en-us/library/ms228154%28VS.80%29.aspx#attributesandElementsToggle</A>
is pretty clear that the file attribute specifies a path relative to &quot;the local
configuration file.&quot;

Right now, AppSettingsSection just passes the file attribute value to
System.IO.File.OpenRead, with the consequence that xsp interprets the filename
relative to the directory in which it is started. It should interpret the
filename relative to the file in which it found the appSettings element (in
this case, Web.config).


Reproducible: Always

Steps to Reproduce:
1. mkdir demo
2. cd demo
3. emacs demo.aspx Web.config user.config
3.a. (demo.aspx)
   &lt;%@ Page language=&quot;c#&quot; inherits=&quot;System.Web.UI.Page&quot; %&gt;
   &lt;%= System.Configuration.ConfigurationSettings.AppSettings[&quot;test&quot;] %&gt;
3.b. (Web.config)
   &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
   &lt;appSettings file=&quot;user.config&quot;&gt;
   &lt;/appSettings&gt;
3.c. (user.config)
   &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
   &lt;appSettings&gt;
     &lt;add key=&quot;test&quot; value=&quot;it works&quot; /&gt;
   &lt;/appSettings&gt;
4. cd ..
5. xsp --applications /demo:demo
6. wget <A HREF="http://localhost:8080/demo/demo.aspx">http://localhost:8080/demo/demo.aspx</A>
Actual Results:  
blank page

Expected Results:  
&quot;it works&quot;

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>
























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="093494.html">[Mono-bugs] [Bug 538588] Graffiti crashes when purging a story
</A></li>
	<LI>Next message: <A HREF="093497.html">[Mono-bugs] [Bug 542846] System.Web.HttpResponse.Redirect doesn't use useFullyQualifiedRedirectUrl setting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93495">[ date ]</a>
              <a href="thread.html#93495">[ thread ]</a>
              <a href="subject.html#93495">[ subject ]</a>
              <a href="author.html#93495">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
