<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 543694] New: DataObject.GetData and DataObject.GetDataPresent Not Working For Arbitrary Types in Drag Drop
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20543694%5D%20New%3A%20DataObject.GetData%20and%0A%20DataObject.GetDataPresent%20Not%20Working%20For%20Arbitrary%20Types%20in%20Drag%20Drop&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="093225.html">
   <LINK REL="Next"  HREF="093227.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 543694] New: DataObject.GetData and DataObject.GetDataPresent Not Working For Arbitrary Types in Drag Drop</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20543694%5D%20New%3A%20DataObject.GetData%20and%0A%20DataObject.GetDataPresent%20Not%20Working%20For%20Arbitrary%20Types%20in%20Drag%20Drop&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 543694] New: DataObject.GetData and DataObject.GetDataPresent Not Working For Arbitrary Types in Drag Drop">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Oct  1 18:16:46 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="093225.html">[Mono-bugs] [Bug 541577] Function return inconsistent ulong value, which has dummy parameter of a Class and a ulong (re-occurrence of Bug 426264)
</A></li>
        <LI>Next message: <A HREF="093227.html">[Mono-bugs] [Bug 541577] Function return inconsistent ulong value, which has dummy parameter of a Class and a ulong (re-occurrence of Bug 426264)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93226">[ date ]</a>
              <a href="thread.html#93226">[ thread ]</a>
              <a href="subject.html#93226">[ subject ]</a>
              <a href="author.html#93226">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=543694">http://bugzilla.novell.com/show_bug.cgi?id=543694</A>


           Summary: DataObject.GetData and DataObject.GetDataPresent Not
                    Working For Arbitrary Types in Drag Drop
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.4.x
          Platform: 32bit
        OS/Version: Windows XP
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">dglick at dracorp.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Description of Problem:
When a drag and drop operation is initalized via Control.DoDragDrop and an
arbitrary object is passed in as the first parameter, the object cannot be
retrieved or tested from the DataObject passed in event handlers through the
DragEventArgs parameter. In a handler (such as DragOver) if you get the
DataObject from the DragEventArgs.Data field and call DataObject.GetDataPreset
with either a Type parameter or a type name false is always returned. If you
call DataObject.GetData with either a Type parameter or a type name null is
always returned.

Steps to reproduce the problem:
1. Initiate a drag/drop operation using Control.DoDragDrop and pass in an
arbitrary object as the first parameter (the drag/drop data):

Control.DoDragDrop(new Point(100), DragDropEffect.All);

2. Register a handler for Control.DragOver.
3. In the Control.DragOver handler, attempt to get the drag/drop data object by
using DragEventArgs.Data.GetData:

void Control_DragOver(object sender, DragEventArgs e)
{
 Point p = (Point)e.Data.GetData(typeof(Point));
}


Actual Results:
null is always returned.

Expected Results:
The object is returned.

How often does this happen? 
Always (that I can tell).

Additional Information:

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="093225.html">[Mono-bugs] [Bug 541577] Function return inconsistent ulong value, which has dummy parameter of a Class and a ulong (re-occurrence of Bug 426264)
</A></li>
	<LI>Next message: <A HREF="093227.html">[Mono-bugs] [Bug 541577] Function return inconsistent ulong value, which has dummy parameter of a Class and a ulong (re-occurrence of Bug 426264)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93226">[ date ]</a>
              <a href="thread.html#93226">[ thread ]</a>
              <a href="subject.html#93226">[ subject ]</a>
              <a href="author.html#93226">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
