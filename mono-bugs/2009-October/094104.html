<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 549807] New: WaitHandle.WaitAny returns WAIT_IO_COMPLETION (an impossible return value for .NET)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20549807%5D%20New%3A%20WaitHandle.WaitAny%20returns%0A%20WAIT_IO_COMPLETION%20%28an%20impossible%20return%20value%20for%20.NET%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="094103.html">
   <LINK REL="Next"  HREF="094107.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 549807] New: WaitHandle.WaitAny returns WAIT_IO_COMPLETION (an impossible return value for .NET)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20549807%5D%20New%3A%20WaitHandle.WaitAny%20returns%0A%20WAIT_IO_COMPLETION%20%28an%20impossible%20return%20value%20for%20.NET%29&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 549807] New: WaitHandle.WaitAny returns WAIT_IO_COMPLETION (an impossible return value for .NET)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Oct 23 21:02:48 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="094103.html">[Mono-bugs] [Bug 545873] Runtime aborts with &quot;** ERROR **: VAR 2 (TConstructorArg) cannot be expanded...&quot; Suspected due to generics
</A></li>
        <LI>Next message: <A HREF="094107.html">[Mono-bugs] [Bug 545873] Runtime aborts with &quot;** ERROR **: VAR 2 (TConstructorArg) cannot be expanded...&quot; Suspected due to generics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#94104">[ date ]</a>
              <a href="thread.html#94104">[ thread ]</a>
              <a href="subject.html#94104">[ subject ]</a>
              <a href="author.html#94104">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=549807">http://bugzilla.novell.com/show_bug.cgi?id=549807</A>


           Summary: WaitHandle.WaitAny returns WAIT_IO_COMPLETION (an
                    impossible return value for .NET)
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.4.x
          Platform: x86
        OS/Version: Windows XP
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: CORLIB
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">joe at mistachkin.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.20)
Gecko/20081217 Firefox/2.0.0.20 (.NET CLR 3.5.30729)

The WaitHandle.WaitAny method can return WAIT_IO_COMPLETION (0xC0) when an APC
is dispatched to the waiting thread.  The .NET Framework never returns this
result for this method (in accordance with the documented return values).

Per the docs (<A HREF="http://msdn.microsoft.com/en-us/library/4h1414yz(VS.80">http://msdn.microsoft.com/en-us/library/4h1414yz(VS.80</A>).aspx):

&quot;Return Value

The array index of the object that satisfied the wait, or WaitTimeout if no
object satisfied the wait and a time interval equivalent to millisecondsTimeout
has passed.&quot;

Reproducible: Always

Steps to Reproduce:
1. Create a thread and have it use WaitHandle.WaitAny (or any derived class,
like ManualResetEvent).
2. Send the created thread an APC using QueueUserAPC via P/Invoke.
3. Check the return value from WaitHandle.WaitAny, it will be 0xC0.
Actual Results:  
The method returns WAIT_IO_COMPLETION (0xC0).

Expected Results:  
The method should return WaitTimeout or an array index.  In this case,
WAIT_IO_COMPLETION should be mapped to WaitTimeout, unless one of the objects
has been signaled.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>






























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="094103.html">[Mono-bugs] [Bug 545873] Runtime aborts with &quot;** ERROR **: VAR 2 (TConstructorArg) cannot be expanded...&quot; Suspected due to generics
</A></li>
	<LI>Next message: <A HREF="094107.html">[Mono-bugs] [Bug 545873] Runtime aborts with &quot;** ERROR **: VAR 2 (TConstructorArg) cannot be expanded...&quot; Suspected due to generics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#94104">[ date ]</a>
              <a href="thread.html#94104">[ thread ]</a>
              <a href="subject.html#94104">[ subject ]</a>
              <a href="author.html#94104">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
