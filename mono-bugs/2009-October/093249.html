<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 543946] New: BufferedGraphics.Render() fails to render to screen
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20543946%5D%20New%3A%20BufferedGraphics.Render%28%29%20fails%20to%0A%20render%20to%20screen&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="093251.html">
   <LINK REL="Next"  HREF="093250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 543946] New: BufferedGraphics.Render() fails to render to screen</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20543946%5D%20New%3A%20BufferedGraphics.Render%28%29%20fails%20to%0A%20render%20to%20screen&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 543946] New: BufferedGraphics.Render() fails to render to screen">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Oct  2 15:20:09 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="093251.html">[Mono-bugs] [Bug 543928] Removing the Selected TabPage From a TabControl Causes a Crash
</A></li>
        <LI>Next message: <A HREF="093250.html">[Mono-bugs] [Bug 534452] TabControl exception when removing tab	pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93249">[ date ]</a>
              <a href="thread.html#93249">[ thread ]</a>
              <a href="subject.html#93249">[ subject ]</a>
              <a href="author.html#93249">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=543946">http://bugzilla.novell.com/show_bug.cgi?id=543946</A>


           Summary: BufferedGraphics.Render() fails to render to screen
    Classification: Mono
           Product: Mono: Class Libraries
           Version: unspecified
          Platform: Macintosh
        OS/Version: Mac OS X 10.5
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: libgdiplus
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lionel.keene at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=320876)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=320876">http://bugzilla.novell.com/attachment.cgi?id=320876</A>)
VS2008 solution

User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US)
AppleWebKit/532.0 (KHTML, like Gecko) Chrome/3.0.195.24 Safari/532.0

I've been trying to find the source of poor performance in my WinForms app when
running on OSX + Mono runtime. I have prepared a multithreaded example which
replicates the strategy I'm using in my applciation to get good Windows and
Linux performance. I try two different methods: 1) use the .NET &quot;built-in&quot;
double buffering, which renders properly but is very slow. 2) Use the
DoubleBuffered class which doesn't render at all.

I decided to try the DoubleBuffered class in hopes that the redraw speed would
be faster...it's currently much too slow on Mac with the SetStyles flags set
(unusably so).

In summary, this project illustrates 2 issues: very slow redraw speed using
SetStyle(OptimizedDoubleBuffer,...) on OSX, and DoubleBuffered.Render()
failure. 

Reproducible: Always

Steps to Reproduce:
1. Build attached VS2008 project, run app.
2. Press button on form to launch threads.
3. Drag trackbar to draw to screen
Actual Results:  
When using DoubleBuffered.Render() nothing is drawn to screen. When using
&quot;SetStyles(...)&quot; and &quot;Refresh()&quot; to force repainting of form, screen is drawn
properly but is very slow. Windows + Linux performance is okay.

Expected Results:  
Screen should redraw very quickly, especially on multicore machines.

Running the app as-is will illustrate the failure of Render() to function.

The other test is to comment out the BufferedGraphics stuff, remove the
comments for the &quot;SetStyles()&quot; stuff in the form's constructor as well as the
&quot;Refresh()&quot; command in the trackbar_scroll handler. Also, uncomment the
&quot;DrawImageUnscaled&quot; line in the form's paint handler. The screen will now
redraw but VERY slowly on OSX versus Linux/Windows. This has a huge impact on
any app that does a lot of drawing. I sure hope you guys and gals can fix this!

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="093251.html">[Mono-bugs] [Bug 543928] Removing the Selected TabPage From a TabControl Causes a Crash
</A></li>
	<LI>Next message: <A HREF="093250.html">[Mono-bugs] [Bug 534452] TabControl exception when removing tab	pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93249">[ date ]</a>
              <a href="thread.html#93249">[ thread ]</a>
              <a href="subject.html#93249">[ subject ]</a>
              <a href="author.html#93249">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
