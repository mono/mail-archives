<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 60573][Nor] Changed - CryptoStream output 1 block short after Flush
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="017851.html">
   <LINK REL="Next"  HREF="017853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 60573][Nor] Changed - CryptoStream output 1 block short after Flush
   </H1>
    <B>bugzilla-daemon@bugzilla.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com"
       TITLE="[Mono-bugs] [Bug 60573][Nor] Changed - CryptoStream output 1 block short after Flush">bugzilla-daemon@bugzilla.ximian.com
       </A><BR>
    <I>Wed, 23 Jun 2004 09:07:27 -0400 (EDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="017851.html">[Mono-bugs] [Bug 59623][Nor] Changed - Regex.Matches method does not return correct results.
</A></li>
        <LI> Next message: <A HREF="017853.html">[Mono-bugs] [Bug 58560][Maj] Changed - Poor interaction between Mono and NPTL.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17852">[ date ]</a>
              <a href="thread.html#17852">[ thread ]</a>
              <a href="subject.html#17852">[ subject ]</a>
              <a href="author.html#17852">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:sebastien@ximian.com.">sebastien@ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=60573">http://bugzilla.ximian.com/show_bug.cgi?id=60573</A>

--- shadow/60573	2004-06-22 16:39:49.000000000 -0400
+++ shadow/60573.tmp.10832	2004-06-23 09:07:27.000000000 -0400
@@ -243,6 +243,25 @@
 unless we are sure it's not the last one. Somehow this isn't the case
 in your sample code.
 
 Note that Flush doesn't call FlushFinalBlock as this would break any
 further use of the stream (nothing can be encrypted/decrypted after
 the final block).
+
+------- Additional Comments From <A HREF="mailto:sebastien@ximian.com">sebastien@ximian.com</A>  2004-06-23 09:07 -------
+The current design CryptoStream design is a little different from
+Microsoft. This is generally not a problem unless you want to access
+the data _of the last block_ (from the underlying stream) before
+closing the CryptoStream.
+
+Mono: 
+Write:            64        Actual Write: 56
+FlushFinalBlock:   -        Actual Write: 16
+
+Microsoft:
+Write:            64        Actual Write: 64
+FlushFinalBlock:   -        Actual Write: 8
+
+
+It also seems that we can get the same behaviour by commenting 2 lines
+in CryptoStream.cs. However this makes other unit tests fails on Mono
+(but strangely not on Windows).

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="017851.html">[Mono-bugs] [Bug 59623][Nor] Changed - Regex.Matches method does not return correct results.
</A></li>
	<LI> Next message: <A HREF="017853.html">[Mono-bugs] [Bug 58560][Maj] Changed - Poor interaction between Mono and NPTL.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17852">[ date ]</a>
              <a href="thread.html#17852">[ thread ]</a>
              <a href="subject.html#17852">[ subject ]</a>
              <a href="author.html#17852">[ author ]</a>
         </LI>
       </UL>
</body></html>
