<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 60787][Wis] New - libgdiplus has a dependency on pthreads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="018079.html">
   <LINK REL="Next"  HREF="018081.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 60787][Wis] New - libgdiplus has a dependency on pthreads
   </H1>
    <B>bugzilla-daemon@bugzilla.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com"
       TITLE="[Mono-bugs] [Bug 60787][Wis] New - libgdiplus has a dependency on pthreads">bugzilla-daemon@bugzilla.ximian.com
       </A><BR>
    <I>Sat, 26 Jun 2004 14:31:29 -0400 (EDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="018079.html">[Mono-bugs] [Bug 60751][Maj] Changed - tiffcodec failes because of missing byteswap.h
</A></li>
        <LI> Next message: <A HREF="018081.html">[Mono-bugs] [Bug 60788][Nor] New - opcode.def generation is wrong
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18080">[ date ]</a>
              <a href="thread.html#18080">[ thread ]</a>
              <a href="subject.html#18080">[ subject ]</a>
              <a href="author.html#18080">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:recht@netbsd.org.">recht@netbsd.org.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=60787">http://bugzilla.ximian.com/show_bug.cgi?id=60787</A>

--- shadow/60787	2004-06-26 14:31:29.000000000 -0400
+++ shadow/60787.tmp.23039	2004-06-26 14:31:29.000000000 -0400
@@ -0,0 +1,92 @@
+Bug#: 60787
+Product: Mono: Class Libraries
+Version: unspecified
+OS: other
+OS Details: NetBSD 2.0_BETA i386 
+Status: NEW   
+Resolution: 
+Severity: 
+Priority: Wishlist
+Component: Sys.Drawing.
+AssignedTo: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>                            
+ReportedBy: <A HREF="mailto:recht@netbsd.org">recht@netbsd.org</A>               
+QAContact: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>
+TargetMilestone: ---
+URL: 
+Cc: 
+Summary: libgdiplus has a dependency on pthreads
+
+Steps to reproduce the problem:
+1. build
+
+Actual Results:
+linking fails
+
+Expected Results:
+linking succeeds
+
+How often does this happen? 
+everytime
+
+Additional Information:
+libgdiplus (gdip_win32.c) uses pthread mutex functions, but doesn't link 
+against libpthread. 
+This produces the following error:
+
+gcc -O2 -pipe -march=athlon-xp -I/usr/pkgsrc/graphics/libgdiplus/work/.
+buildlink/include -I/usr/pkg/packages/Xft2-2.1.2nb2/include 
+-I/usr/pkg/packages/fontconfig-2.2.95/include -I/usr/pkg/packages/expat-1.
+95.7/include -I/usr/pkg/packages/freetype2-2.1.8/include/freetype2 
+-DGLX_GLXEXT_LEGACY -I/usr/pkg/packages/MesaLib-6.0.1/include 
+-I/usr/pkg/packages/libungif-4.1.0.1/include -I/usr/pkg/packages/png-1.2.
+5nb5/include -I/usr/pkg/packages/tiff-3.6.1nb2/include 
+-I/usr/pkg/packages/jpeg-6bnb1/include -I/usr/pkg/packages/glib2-2.4.
+2/include -I/usr/pkg/packages/Xrender-0.8.3nb1/include 
+-I/usr/pkg/packages/render-0.8/include -Wl,-R/usr/pkg/lib -Wl,
+-R/usr/pkg/packages/Xft2-2.1.2nb2/lib -Wl,-R/usr/pkg/packages/fontconfig-2.
+2.95/lib -Wl,-R/usr/pkg/packages/expat-1.95.7/lib -Wl,
+-R/usr/pkg/packages/freetype2-2.1.8/lib -Wl,-R/usr/pkg/packages/MesaLib-6.
+0.1/lib -Wl,-R/usr/pkg/packages/libungif-4.1.0.1/lib -Wl,
+-R/usr/pkg/packages/png-1.2.5nb5/lib -Wl,-R/usr/pkg/packages/tiff-3.6.
+1nb2/lib -Wl,-R/usr/pkg/packages/jpeg-6bnb1/lib -Wl,
+-R/usr/pkg/packages/glib2-2.4.2/lib -Wl,-R/usr/pkg/packages/Xrender-0.8.
+3nb1/lib -Wl,-R/usr/X11R6/lib -o .libs/testgdi testgdi.o -Wl,--rpath -Wl,
+/usr/pkg/packages/freetype2-2.1.8/lib  ../src/.libs/libgdiplus.so 
+-L/usr/pkg/packages/pkgconfig-0.15.0/lib 
+-L/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib 
+-L/usr/pkg/packages/Xft2-2.1.2nb2/lib -L/usr/pkg/packages/fontconfig-2.2.
+95/lib -L/usr/pkg/packages/expat-1.95.7/lib 
+-L/usr/pkg/packages/freetype2-2.1.8/lib -L/usr/pkg/packages/MesaLib-6.0.
+1/lib -L/usr/pkg/packages/libungif-4.1.0.1/lib -L/usr/pkg/packages/png-1.2.
+5nb5/lib -L/usr/pkg/packages/tiff-3.6.1nb2/lib 
+-L/usr/pkg/packages/jpeg-6bnb1/lib -L/usr/pkg/packages/glib2-2.4.2/lib 
+-L/usr/pkg/packages/Xrender-0.8.3nb1/lib -L/usr/pkg/packages/render-0.8/lib 
+-L/usr/pkgsrc/graphics/libgdiplus/work/.x11-buildlink/lib 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libcairo.so 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libfontconfig.so 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libexpat.so 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libpixman.so 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libXrender.so -lX11 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libglitz.so 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libglib-2.0.so 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libfreetype.so 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libtiff.so 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libjpeg.so 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libungif.so 
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib/libpng.so -lz -lm 
+-lintl -Wl,--rpath -Wl,/usr/pkg/lib -Wl,--rpath -Wl,
+/usr/pkgsrc/graphics/libgdiplus/work/.buildlink/lib
+../src/.libs/libgdiplus.so: warning: tempnam() possibly used unsafely, use 
+mkstemp() or mkdtemp()
+../src/.libs/libgdiplus.so: undefined reference to `pthread_mutex_unlock'
+../src/.libs/libgdiplus.so: undefined reference to `pthread_mutex_destroy'
+../src/.libs/libgdiplus.so: undefined reference to `pthread_mutex_lock'
+../src/.libs/libgdiplus.so: undefined reference to `pthread_mutex_init'
+gmake[2]: *** [testgdi] Fehler 1
+gmake[2]: Leaving directory 
+`/usr/pkgsrc/graphics/libgdiplus/work/libgdiplus-0.10/tests'
+gmake[1]: *** [all-recursive] Fehler 1
+gmake[1]: Leaving directory 
+`/usr/pkgsrc/graphics/libgdiplus/work/libgdiplus-0.10'
+gmake: *** [all] Fehler 2
+*** Error code 2

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="018079.html">[Mono-bugs] [Bug 60751][Maj] Changed - tiffcodec failes because of missing byteswap.h
</A></li>
	<LI> Next message: <A HREF="018081.html">[Mono-bugs] [Bug 60788][Nor] New - opcode.def generation is wrong
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18080">[ date ]</a>
              <a href="thread.html#18080">[ thread ]</a>
              <a href="subject.html#18080">[ subject ]</a>
              <a href="author.html#18080">[ author ]</a>
         </LI>
       </UL>
</body></html>
