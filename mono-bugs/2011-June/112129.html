<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 699643] saving a DBNull field saves as and empty string in the sqlserver database
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20699643%5D%20saving%20a%20DBNull%20field%20saves%20as%20and%20empty%0A%20string%20in%20the%20sqlserver%20database&In-Reply-To=bug-699643-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="112123.html">
   <LINK REL="Next"  HREF="112116.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 699643] saving a DBNull field saves as and empty string in the sqlserver database</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20699643%5D%20saving%20a%20DBNull%20field%20saves%20as%20and%20empty%0A%20string%20in%20the%20sqlserver%20database&In-Reply-To=bug-699643-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 699643] saving a DBNull field saves as and empty string in the sqlserver database">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Jun 15 17:42:13 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="112123.html">[Mono-bugs] [Bug 699643] saving a DBNull field saves as and empty string in the sqlserver database
</A></li>
        <LI>Next message: <A HREF="112116.html">[Mono-bugs] [Bug 699747] New: Binary Serialization De-serialization of Dictionary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#112129">[ date ]</a>
              <a href="thread.html#112129">[ thread ]</a>
              <a href="subject.html#112129">[ subject ]</a>
              <a href="author.html#112129">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=699643">https://bugzilla.novell.com/show_bug.cgi?id=699643</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=699643#c2">https://bugzilla.novell.com/show_bug.cgi?id=699643#c2</A>


--- Comment #2 from scott fluto &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">srfcanada at hotmail.com</A>&gt; 2011-06-15 21:42:12 UTC ---
looking at the performance issue around how it generates the parameter
information, if you do the following:

modify TdsMetaParameter.cs:
line 249:
from:
int paramSize = GetActualSize () / 2;
to:
int paramSize = Size &lt; 1 ? GetActualSize () / 2 : Size;

and line 221:
from:
typeName = &quot;image&quot;;
to:
typeName = &quot;varbinary(max)&quot;;

doing this will cause the parameter information to generate the same TDS
parameter data the same as windows does and will generate the same TDS
Parameter data for the same sql command which should improve the query
performance since sqlserver will be able to look up the query in its cache
rather than have to parse it every time. 

Note that the change to line 221 may be an issue for older versions of
sqlserver that dont use varbinary(max) but keeping it as Image should still be
ok since it will still generate the same sql command.

Ill rerun our performance tests to see if I see and differences in performance.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="112123.html">[Mono-bugs] [Bug 699643] saving a DBNull field saves as and empty string in the sqlserver database
</A></li>
	<LI>Next message: <A HREF="112116.html">[Mono-bugs] [Bug 699747] New: Binary Serialization De-serialization of Dictionary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#112129">[ date ]</a>
              <a href="thread.html#112129">[ thread ]</a>
              <a href="subject.html#112129">[ subject ]</a>
              <a href="author.html#112129">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
