<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 701733] New: Setting ENV variables for mono causes crash while generating Xml serializers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20701733%5D%20New%3A%20Setting%20ENV%20variables%20for%20mono%20causes%0A%20crash%20while%20generating%20Xml%20serializers&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="112166.html">
   <LINK REL="Next"  HREF="112169.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 701733] New: Setting ENV variables for mono causes crash while generating Xml serializers</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20701733%5D%20New%3A%20Setting%20ENV%20variables%20for%20mono%20causes%0A%20crash%20while%20generating%20Xml%20serializers&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 701733] New: Setting ENV variables for mono causes crash while generating Xml serializers">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Jun 23 02:18:36 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="112166.html">[Mono-bugs] [Bug 649006] Process locked up/segfaulting/aborting after a few AppDomain reloads
</A></li>
        <LI>Next message: <A HREF="112169.html">[Mono-bugs] [Bug 701733] Setting ENV variables for mono causes crash while generating Xml serializers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#112168">[ date ]</a>
              <a href="thread.html#112168">[ thread ]</a>
              <a href="subject.html#112168">[ subject ]</a>
              <a href="author.html#112168">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=701733">https://bugzilla.novell.com/show_bug.cgi?id=701733</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=701733#c0">https://bugzilla.novell.com/show_bug.cgi?id=701733#c0</A>


           Summary: Setting ENV variables for mono causes crash while
                    generating Xml serializers
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.10.x
          Platform: 64bit
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.XML
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">maciej.paszta at mlabs.pl</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML,
like Gecko) Chrome/13.0.782.24 Safari/535.1

Mono takes different ENV variables to alter it's behavior. Some of that
variables' values are only valid when mono is run with specific parameters,
eg.:
MONO_GC_PARAMS=nursery-size=32m
is only valid when mono in invoked with &quot;--gc=sgen&quot;, invoked without this
switch, mono crashes as the default GC doesn't handle this parameter.
Generation of Xml Serializer causes mono subprocess to be spawned, this
subprocess inherits the ENV variables, but doesn't pay attention to additional
options passed to the original command, and so it crashes, because it cannot
handle the mentioned MONO_GC_PARAMS

Reproducible: Always

Steps to Reproduce:
1. Compile provided file with: &quot;gmcs Program.cs&quot;
2. Invoke command: &quot;MONO_GC_PARAMS=nursery-size=64m mono --gc=sgen Program.exe&quot;

Actual Results:  
The following lines appear on the console:

Error while compiling generated serializer
(0,0) : error : MONO_GC_PARAMS must be a comma-delimited list of one or more of
the following:
(0,0) : error :   max-heap-size=N (where N is an integer, possibly with a k, m
or a g suffix)
Hello


Expected Results:  
Program should successfully generate serializer.

Code works ok on mono 2.8 (Mono JIT compiler version 2.8.2 (mono-2-8/6621fbe))
Code doesn't work on mono 2.10.1 (Mono JIT compiler version 2.10.1
(mono-2-10/0214f74)
Code doesn't work on master (Mono JIT compiler version 2.11 (master/41f79be))

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="112166.html">[Mono-bugs] [Bug 649006] Process locked up/segfaulting/aborting after a few AppDomain reloads
</A></li>
	<LI>Next message: <A HREF="112169.html">[Mono-bugs] [Bug 701733] Setting ENV variables for mono causes crash while generating Xml serializers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#112168">[ date ]</a>
              <a href="thread.html#112168">[ thread ]</a>
              <a href="subject.html#112168">[ subject ]</a>
              <a href="author.html#112168">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
