<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 697828] New: Control.KeyPress event is triggered BEFORE Control.KeyDown event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20697828%5D%20New%3A%20Control.KeyPress%20event%20is%20triggered%0A%20BEFORE%20Control.KeyDown%20event&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="112025.html">
   <LINK REL="Next"  HREF="112027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 697828] New: Control.KeyPress event is triggered BEFORE Control.KeyDown event</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20697828%5D%20New%3A%20Control.KeyPress%20event%20is%20triggered%0A%20BEFORE%20Control.KeyDown%20event&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 697828] New: Control.KeyPress event is triggered BEFORE Control.KeyDown event">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Jun  2 20:55:30 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="112025.html">[Mono-bugs] [Bug 325669] X11: MessageBox improperly centered on dual-monitor setups
</A></li>
        <LI>Next message: <A HREF="112027.html">[Mono-bugs] [Bug 661054] libMonoPosixHelper.* under support/ is not compiled in cross compilation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#112026">[ date ]</a>
              <a href="thread.html#112026">[ thread ]</a>
              <a href="subject.html#112026">[ subject ]</a>
              <a href="author.html#112026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=697828">https://bugzilla.novell.com/show_bug.cgi?id=697828</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=697828#c0">https://bugzilla.novell.com/show_bug.cgi?id=697828#c0</A>


           Summary: Control.KeyPress event is triggered BEFORE
                    Control.KeyDown event
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.10.x
          Platform: IA64
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">juanantonio.ram at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=432778)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=432778">http://bugzilla.novell.com/attachment.cgi?id=432778</A>)
Sample file

User-Agent:       Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.30 (KHTML,
like Gecko) Chrome/12.0.742.68 Safari/534.30

I was handling the KeyDown event on a multiline textbox, and when enter was
pressed the Handled property of the event was set to true so the new line was
not painted on the control.

This works fine on windows under microsoft's .net runtime, but on linux it's
not working as it should.

This link:
<A HREF="http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx">http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx</A>

explains that the order of the events should be KeyDown KeyPress and KeyUp, but
the Mono runtime triggers KeyPress before keyDown, so the newline is painted
before I can do something with it.

Reproducible: Always

Steps to Reproduce:
1.Create a WinForms project
2.Add any control to the form and handle KeyDown and KeyPress event
3.See for your self
Actual Results:  
The KeyPress event is triggered before KeyDown

Expected Results:  
keyDown should be triggered first

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="112025.html">[Mono-bugs] [Bug 325669] X11: MessageBox improperly centered on dual-monitor setups
</A></li>
	<LI>Next message: <A HREF="112027.html">[Mono-bugs] [Bug 661054] libMonoPosixHelper.* under support/ is not compiled in cross compilation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#112026">[ date ]</a>
              <a href="thread.html#112026">[ thread ]</a>
              <a href="subject.html#112026">[ subject ]</a>
              <a href="author.html#112026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
