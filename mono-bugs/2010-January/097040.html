<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 575562] New: WriteLinesToFile does not delete file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20575562%5D%20New%3A%20WriteLinesToFile%20does%20not%20delete%20file&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="097039.html">
   <LINK REL="Next"  HREF="097042.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 575562] New: WriteLinesToFile does not delete file</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20575562%5D%20New%3A%20WriteLinesToFile%20does%20not%20delete%20file&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 575562] New: WriteLinesToFile does not delete file">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Jan 30 09:44:09 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="097039.html">[Mono-bugs] [Bug 564637] NetworkStream explicitly implements	IDisposable
</A></li>
        <LI>Next message: <A HREF="097042.html">[Mono-bugs] [Bug 575562] WriteLinesToFile does not delete file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#97040">[ date ]</a>
              <a href="thread.html#97040">[ thread ]</a>
              <a href="subject.html#97040">[ subject ]</a>
              <a href="author.html#97040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=575562">http://bugzilla.novell.com/show_bug.cgi?id=575562</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=575562#c0">http://bugzilla.novell.com/show_bug.cgi?id=575562#c0</A>


           Summary: WriteLinesToFile does not delete file
    Classification: Mono
           Product: Mono: Tools
           Version: SVN
          Platform: Other
        OS/Version: Other
            Status: NEW
          Keywords: easy_fix
          Severity: Normal
          Priority: P5 - None
         Component: xbuild
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jankit at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">themann at indyfantasysports.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Development
           Blocker: No


Description of Problem:

In the MSBuild implementation, the WriteLinesToFile, when specifying no Lines
and setting Overwrite to true, deletes the file. This detail is used in the
Clean target from Microsoft.Common.Targets to delete the CleanFile if all
files specified in the CleanFile have been successfully deleted.

XBuild implementation does not delete the file in this case, and leaves
a blank CleanFile in the OutDir after Clean.

Steps to reproduce the problem:
1. Create a new target with the WriteLinesToFile with Lines empty or omitted,
and Overwrite set to true OR use a project file which eventually imports
Microsoft.Common.Targets

2. Execute the specified target in the build file (use the Clean target of a
project that had previously executed Build on a Microsoft.Common.Targets based
project)


Actual Results:

The file specified ($(BaseIntermediatePath)$(CleanFile) on
Microsoft.Common.Targets based project) is deleted.

Expected Results:

The file specified exists as empty.

How often does this happen? 

Every run.

Additional Information:

This functionality is required in order to fully clean projects based
on Microsoft.Common.Targets. Leaving the extra CleanFile can cause issues
with automated build and packaging systems.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="097039.html">[Mono-bugs] [Bug 564637] NetworkStream explicitly implements	IDisposable
</A></li>
	<LI>Next message: <A HREF="097042.html">[Mono-bugs] [Bug 575562] WriteLinesToFile does not delete file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#97040">[ date ]</a>
              <a href="thread.html#97040">[ thread ]</a>
              <a href="subject.html#97040">[ subject ]</a>
              <a href="author.html#97040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
