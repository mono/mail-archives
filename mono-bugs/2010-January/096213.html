<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 560330] [verifier] abort in mono_metadata_token_from_dor on bad assembly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20560330%5D%20%5Bverifier%5D%20abort%20in%0A%20mono_metadata_token_from_dor%20on%20bad%20assembly&In-Reply-To=bug-560330-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="096211.html">
   <LINK REL="Next"  HREF="096214.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 560330] [verifier] abort in mono_metadata_token_from_dor on bad assembly</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20560330%5D%20%5Bverifier%5D%20abort%20in%0A%20mono_metadata_token_from_dor%20on%20bad%20assembly&In-Reply-To=bug-560330-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 560330] [verifier] abort in mono_metadata_token_from_dor on bad assembly">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Jan  6 08:51:01 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="096211.html">[Mono-bugs] [Bug 567962] Cannot use culture resources (global and local) like &quot;Default.aspx.en.resx&quot; or &quot;Dictionary.en.resx&quot;
</A></li>
        <LI>Next message: <A HREF="096214.html">[Mono-bugs] [Bug 560330] [verifier] abort in mono_metadata_token_from_dor on bad assembly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96213">[ date ]</a>
              <a href="thread.html#96213">[ thread ]</a>
              <a href="subject.html#96213">[ subject ]</a>
              <a href="author.html#96213">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=560330">http://bugzilla.novell.com/show_bug.cgi?id=560330</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=560330#c3">http://bugzilla.novell.com/show_bug.cgi?id=560330#c3</A>


Sebastien Pouliot &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">spouliot at novell.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
 Attachment #330761|0                           |1
        is obsolete|                            |

--- Comment #3 from Sebastien Pouliot &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">spouliot at novell.com</A>&gt; 2010-01-06 13:50:59 UTC ---
Created an attachment (id=335155)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=335155">http://bugzilla.novell.com/attachment.cgi?id=335155</A>)
assembly to reproduce crash

Well it did not take long to find another case ;-) this time with the
2.1/moonlight profile. note: only x86_64 tested this morning.

MONO_PATH=/opt/mono/lib/moonlight/plugin/ gdb --args pedump --verify all
System.Xml.sigabrt.7096.dll

** ERROR:(metadata.c:3242):mono_metadata_token_from_dor: code should not be
reached
[New Thread 0x7f98e3030710 (LWP 25937)]

Program received signal SIGABRT, Aborted.
[Switching to Thread 0x7f98e3030710 (LWP 25937)]
0x00007f98e1b9d5c5 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x00007f98e1b9d5c5 in raise () from /lib64/libc.so.6
#1  0x00007f98e1b9ebb3 in abort () from /lib64/libc.so.6
#2  0x00007f98e29cb2c7 in g_assertion_message () from
/usr/lib64/libglib-2.0.so.0
#3  0x000000000045a0f2 in mono_metadata_token_from_dor (dor_index=3) at
metadata.c:3242
#4  0x0000000000456a20 in mono_metadata_parse_typedef_or_ref (m=0x8ac240, 
    ptr=0x7f98e1ae193d
&quot;\n\a\006\b\b\b\003\003\021\200&#65533;\005\a\001\022\201&#65533;\005\a\001\022\201\230\006\a\002\002\021\200\230\006\a\002\016\021\200\230\f\a\005\022\201l\002\034\022u\022\200&#65533;\002\035\005\002\035\003\003&quot;,
rptr=0x7fffeb0504a8) at metadata.c:1215
#5  0x0000000000456a93 in mono_metadata_parse_custom_mod (m=0x8ac240,
dest=0x7fffeb050440, 
    ptr=0x7f98e1ae193b
&quot;\037\003\n\a\006\b\b\b\003\003\021\200&#65533;\005\a\001\022\201&#65533;\005\a\001\022\201\230\006\a\002\002\021\200\230\006\a\002\016\021\200\230\f\a\005\022\201l\002\034\022u\022\200&#65533;\002\035\005\002\035\003\003&quot;,
rptr=0x7fffeb0504a8) at metadata.c:1237
#6  0x0000000000457219 in mono_metadata_parse_type_full (m=0x8ac240,
container=0x0, mode=MONO_PARSE_LOCAL, opt_attrs=0, 
    ptr=0x7f98e1ae193b
&quot;\037\003\n\a\006\b\b\b\003\003\021\200&#65533;\005\a\001\022\201&#65533;\005\a\001\022\201\230\006\a\002\002\021\200\230\006\a\002\016\021\200\230\f\a\005\022\201l\002\034\022u\022\200&#65533;\002\035\005\002\035\003\003&quot;,
rptr=0x7fffeb050540) at metadata.c:1574
#7  0x0000000000459d3d in mono_metadata_parse_mh_full (m=0x8ac240,
container=0x0, ptr=0x7f98e1acfcd4 &quot;\003\027(&gt;\002&quot;) at metadata.c:3031
#8  0x000000000043a23d in mono_method_get_header (method=0x952e98) at
loader.c:2277
#9  0x00000000004ca342 in mono_method_verify (method=0x952e98, level=135) at
verify.c:4945
#10 0x000000000040e79f in dump_verify_info (image=0x8ac240, flags=135) at
pedump.c:375
#11 0x000000000040f4f1 in main (argc=4, argv=0x7fffeb050e98) at pedump.c:730
(gdb) up 3
#3  0x000000000045a0f2 in mono_metadata_token_from_dor (dor_index=3) at
metadata.c:3242
3242            g_assert_not_reached ();
(gdb) up
#4  0x0000000000456a20 in mono_metadata_parse_typedef_or_ref (m=0x8ac240, 
    ptr=0x7f98e1ae193d
&quot;\n\a\006\b\b\b\003\003\021\200&#65533;\005\a\001\022\201&#65533;\005\a\001\022\201\230\006\a\002\002\021\200\230\006\a\002\016\021\200\230\f\a\005\022\201l\002\034\022u\022\200&#65533;\002\035\005\002\035\003\003&quot;,
rptr=0x7fffeb0504a8) at metadata.c:1215
1215        return mono_metadata_token_from_dor (token);
(gdb) p m-&gt;name
$1 = 0x87ff00 &quot;/home/poupou/svn/moon-3-0/fuzz/bin/System.Xml.sigabrt.7096dll&quot;
(gdb) p token
$2 = 3

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="096211.html">[Mono-bugs] [Bug 567962] Cannot use culture resources (global and local) like &quot;Default.aspx.en.resx&quot; or &quot;Dictionary.en.resx&quot;
</A></li>
	<LI>Next message: <A HREF="096214.html">[Mono-bugs] [Bug 560330] [verifier] abort in mono_metadata_token_from_dor on bad assembly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96213">[ date ]</a>
              <a href="thread.html#96213">[ thread ]</a>
              <a href="subject.html#96213">[ subject ]</a>
              <a href="author.html#96213">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
