<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 565944] Control.Invalidate(true) does not call invalidate on nested controls
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20565944%5D%20Control.Invalidate%28true%29%20does%20not%20call%0A%20invalidate%20on%20nested%20controls&In-Reply-To=bug-565944-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="096261.html">
   <LINK REL="Next"  HREF="096263.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 565944] Control.Invalidate(true) does not call invalidate on nested controls</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20565944%5D%20Control.Invalidate%28true%29%20does%20not%20call%0A%20invalidate%20on%20nested%20controls&In-Reply-To=bug-565944-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 565944] Control.Invalidate(true) does not call invalidate on nested controls">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Jan  7 07:41:06 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="096261.html">[Mono-bugs] [Bug 558632] ToolStripLabel DoubleClick event not fired
</A></li>
        <LI>Next message: <A HREF="096263.html">[Mono-bugs] [Bug 567331] ToolStrip BackColor property ignored
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96262">[ date ]</a>
              <a href="thread.html#96262">[ thread ]</a>
              <a href="subject.html#96262">[ subject ]</a>
              <a href="author.html#96262">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=565944">http://bugzilla.novell.com/show_bug.cgi?id=565944</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=565944#c2">http://bugzilla.novell.com/show_bug.cgi?id=565944#c2</A>


Carlos Alberto Cortez &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">calberto.cortez at gmail.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">calberto.cortez at gmail.com</A>

--- Comment #2 from Carlos Alberto Cortez &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">calberto.cortez at gmail.com</A>&gt; 2010-01-07 12:41:02 UTC ---
Actually calling Invalidate on a MdiContainer is not generating Invalidated
events for the children in the Mdi children, as the next sample shows:

using System;
using System.ComponentModel;
using System.Drawing;
using System.Windows.Forms;

public class Test
{
        static void Main (string [] args)
        {
                Application.EnableVisualStyles ();
                TestForm form = new TestForm ();
                form.ShowDialog ();
        }

}

public class TestForm : Form
{
        Form mdi_form;
        Control c;
        Control c2;
        bool invalidated_called;

        public TestForm ()
        {
                IsMdiContainer = true;

                mdi_form = new Form ();
                mdi_form.Text = &quot;Child form&quot;;
                mdi_form.MdiParent = this;

                c = new Button ();
                c.Text = &quot;Invalidate&quot;;
                c.Click += delegate
                {
                        invalidated_called = false;
                        Refresh ();
                        Console.WriteLine (&quot;Invalidated reached = &quot; +
invalidated_called);
                };

                c2 = new Label ();
                c2.Text = &quot;World&quot;;
                c2.Location = new Point (50, 50);
                c2.Invalidated += delegate
                {
                        invalidated_called = true;
                };

                mdi_form.Controls.AddRange (new Control [] { c, c2 });
                mdi_form.Show ();
        }
}

Clicking on the &quot;Invalidate&quot; button should fire the Invalidated event on the
Label child, but it's not *at all*.

What happens in your sample, is that the call to Refresh (and not the call to
Invalidate) is somehow forcing the mdi container to wait for the paint of the
mdi children (and its controls) *because it's in the Show event*, and that's
exactly when *all* the controls are shown for the first time.

In other words: the difference in behaviour is not related to Invalidate, but
to Refresh _on an mdi container_ inside the Show event (if you call Refresh
outside the Show event, nothing happens at all). I don't think this small
difference is worth for a bug.

Hopefully the explanation was *not that* complicated ;-)

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="096261.html">[Mono-bugs] [Bug 558632] ToolStripLabel DoubleClick event not fired
</A></li>
	<LI>Next message: <A HREF="096263.html">[Mono-bugs] [Bug 567331] ToolStrip BackColor property ignored
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96262">[ date ]</a>
              <a href="thread.html#96262">[ thread ]</a>
              <a href="subject.html#96262">[ subject ]</a>
              <a href="author.html#96262">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
