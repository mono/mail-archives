<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 571650] New: Adding a schema to the default namespace throws an exception.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20571650%5D%20New%3A%20Adding%20a%20schema%20to%20the%20default%0A%20namespace%20throws%20an%20exception.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="096606.html">
   <LINK REL="Next"  HREF="096608.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 571650] New: Adding a schema to the default namespace throws an exception.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20571650%5D%20New%3A%20Adding%20a%20schema%20to%20the%20default%0A%20namespace%20throws%20an%20exception.&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 571650] New: Adding a schema to the default namespace throws an exception.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Jan 18 11:14:23 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="096606.html">[Mono-bugs] [Bug 566296] abort in mono_local_regalloc while JITting a verified method
</A></li>
        <LI>Next message: <A HREF="096608.html">[Mono-bugs] [Bug 571650] Adding a schema to the default namespace throws an exception.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96607">[ date ]</a>
              <a href="thread.html#96607">[ thread ]</a>
              <a href="subject.html#96607">[ subject ]</a>
              <a href="author.html#96607">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=571650">http://bugzilla.novell.com/show_bug.cgi?id=571650</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=571650#c0">http://bugzilla.novell.com/show_bug.cgi?id=571650#c0</A>


           Summary: Adding a schema to the default namespace throws an
                    exception.
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.6.x
          Platform: x86-64
        OS/Version: Other
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: Sys.XML
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">cipherzero at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Development
           Blocker: No


Description of Problem:
When adding a schema to a schema set, it shouldn't fail because the xsd has no
target namespace.

Steps to reproduce the problem:
1.var schemas = new Schema.XmlSchemaSet();
var xsd = schemas.Add(&quot;&quot;,(defaultSchema:string));
var settings = new
XmlReaderSettings{IgnoreWhitespace=true,IgnoreComments=true,ValidationType=ValidationType.Schema,Schemas=schemas,CloseInput=true};
using(reader = XmlReader.Create(File.OpenText(file),settings))
readFromReader(reader);


Actual Results:
Unhandled Exception: System.Xml.Schema.XmlSchemaException: XmlSchema error: The
targetNamespace attribute cannot have have empty string as its value. Related
schema item SourceUri: <A HREF="file:///tmp/project/proj.xsd,">file:///tmp/project/proj.xsd,</A> Line 2, Position 2.


Expected Results: This is allowed and works fine in .net
It should just add it to the default namespace and validate xml without an
xmlns

How often does this happen? always


Additional Information:
Stack Trace:
at System.Xml.Schema.ValidationHandler.RaiseValidationEvent
(System.Xml.Schema.ValidationEventHandler handle, System.Exception
innerException, System.String message, System.Xml.Schema.XmlSchemaObject xsobj,
System.Object sender, System.String sourceUri, XmlSeverityType severity)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Xml.Schema.XmlSchemaObject.error
(System.Xml.Schema.ValidationEventHandler handle, System.String message,
System.Exception innerException, System.Xml.Schema.XmlSchemaObject xsobj,
System.Object sender) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Xml.Schema.XmlSchemaObject.error
(System.Xml.Schema.ValidationEventHandler handle, System.String message)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Xml.Schema.XmlSchema.DoCompile
(System.Xml.Schema.ValidationEventHandler handler, System.Collections.Hashtable
handledUris, System.Xml.Schema.XmlSchemaSet col, System.Xml.XmlResolver
resolver) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Xml.Schema.XmlSchema.CompileSubset
(System.Xml.Schema.ValidationEventHandler handler,
System.Xml.Schema.XmlSchemaSet col, System.Xml.XmlResolver resolver,
System.Collections.Hashtable handledUris) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Xml.Schema.XmlSchemaSet.Compile () [0x00000] in &lt;filename
unknown&gt;:0 
  at System.Xml.Schema.XmlSchemaValidator.Initialize () [0x00000] in &lt;filename
unknown&gt;:0 
  at Mono.Xml.Schema.XmlSchemaValidatingReader..ctor (System.Xml.XmlReader
reader, System.Xml.XmlReaderSettings settings) [0x00000] in &lt;filename
unknown&gt;:0 
  at System.Xml.XmlReader.CreateValidatingXmlReader (System.Xml.XmlReader
reader, System.Xml.XmlReaderSettings settings) [0x00000] in &lt;filename
unknown&gt;:0 
  at System.Xml.XmlReader.CreateFilteredXmlReader (System.Xml.XmlReader reader,
System.Xml.XmlReaderSettings settings) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Xml.XmlReader.CreateCustomizedTextReader (System.Xml.XmlTextReader
reader, System.Xml.XmlReaderSettings settings) [0x00000] in &lt;filename
unknown&gt;:0 
  at System.Xml.XmlReader.Create (System.IO.TextReader reader,
System.Xml.XmlReaderSettings settings, System.Xml.XmlParserContext context)
[0x00000] in &lt;filename unknown&gt;:0 
  at System.Xml.XmlReader.Create (System.IO.TextReader reader,
System.Xml.XmlReaderSettings settings, System.String baseUri) [0x00000] in
&lt;filename unknown&gt;:0 
  at System.Xml.XmlReader.Create (System.IO.TextReader reader,
System.Xml.XmlReaderSettings settings) [0x00000] in &lt;filename unknown&gt;:0

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="096606.html">[Mono-bugs] [Bug 566296] abort in mono_local_regalloc while JITting a verified method
</A></li>
	<LI>Next message: <A HREF="096608.html">[Mono-bugs] [Bug 571650] Adding a schema to the default namespace throws an exception.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96607">[ date ]</a>
              <a href="thread.html#96607">[ thread ]</a>
              <a href="subject.html#96607">[ subject ]</a>
              <a href="author.html#96607">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
