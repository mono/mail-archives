<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 464132] New: Shadow copy implementation is broken	on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20464132%5D%20New%3A%20Shadow%20copy%20implementation%20is%20broken%0A%09on%20Windows&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084317.html">
   <LINK REL="Next"  HREF="084316.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 464132] New: Shadow copy implementation is broken	on Windows</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20464132%5D%20New%3A%20Shadow%20copy%20implementation%20is%20broken%0A%09on%20Windows&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 464132] New: Shadow copy implementation is broken	on Windows">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Jan  7 09:06:10 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="084317.html">[Mono-bugs] [Bug 464128] char* should be in ANSI encoding when passed to C runtime rather than Unicode
</A></li>
        <LI>Next message: <A HREF="084316.html">[Mono-bugs] [Bug 464132] Shadow copy implementation is broken on	Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84261">[ date ]</a>
              <a href="thread.html#84261">[ thread ]</a>
              <a href="subject.html#84261">[ subject ]</a>
              <a href="author.html#84261">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=464132">https://bugzilla.novell.com/show_bug.cgi?id=464132</A>


           Summary: Shadow copy implementation is broken on Windows
           Product: Mono: Runtime
           Version: unspecified
          Platform: All
        OS/Version: Windows
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">kornelpal at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


On Linux files can be deleted even when they are open but the contrary applies
to Windows.

Current shadow copy implementation assumes that open files can be deleted on
Windows as well. Assembly files are ususally open because they are memmapped.

The goal of shadow copying would be to aviod the condition when you cannot
replace an assembly file because it's open.

The solution would be to copy the file to a new location.

I actually experienced this bug in conjunction with bug 464128:

private_file_needs_copying fails because it passes UTF-8 to stat while that
expets ANSI code page. Then mono_make_shadow_copy siply tries to call
DeleteFile and CopyFile that obviously fails.

Note that even if private_file_needs_copying will be fixed the problem
described in this bug remains.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>






























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084317.html">[Mono-bugs] [Bug 464128] char* should be in ANSI encoding when passed to C runtime rather than Unicode
</A></li>
	<LI>Next message: <A HREF="084316.html">[Mono-bugs] [Bug 464132] Shadow copy implementation is broken on	Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84261">[ date ]</a>
              <a href="thread.html#84261">[ thread ]</a>
              <a href="subject.html#84261">[ subject ]</a>
              <a href="author.html#84261">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
