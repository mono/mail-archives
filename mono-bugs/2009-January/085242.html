<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 469317] XML schema validation fails when there are more than two schema documents on the same server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20469317%5D%20XML%20schema%20validation%20fails%20when%20there%20are%0A%20more%20than%20two%20schema%20documents%20on%20the%20same%20server&In-Reply-To=bug-469317-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="085014.html">
   <LINK REL="Next"  HREF="085251.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 469317] XML schema validation fails when there are more than two schema documents on the same server</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20469317%5D%20XML%20schema%20validation%20fails%20when%20there%20are%0A%20more%20than%20two%20schema%20documents%20on%20the%20same%20server&In-Reply-To=bug-469317-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 469317] XML schema validation fails when there are more than two schema documents on the same server">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Jan 30 04:23:37 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="085014.html">[Mono-bugs] [Bug 469317] New: XML schema validation fails when ValidationType is set to Schema
</A></li>
        <LI>Next message: <A HREF="085251.html">[Mono-bugs] [Bug 469317] XML schema validation fails when there are more than two schema documents on the same server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85242">[ date ]</a>
              <a href="thread.html#85242">[ thread ]</a>
              <a href="subject.html#85242">[ subject ]</a>
              <a href="author.html#85242">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=469317">https://bugzilla.novell.com/show_bug.cgi?id=469317</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=469317#c1">https://bugzilla.novell.com/show_bug.cgi?id=469317#c1</A>


Atsushi Enomoto &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
            Summary|XML schema validation fails |XML schema validation fails
                   |when ValidationType is set  |when there are more than
                   |to Schema                   |two schema documents on the
                   |                            |same server




--- Comment #1 from Atsushi Enomoto &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>&gt;  2009-01-30 02:23:35 MST ---
It is rather about schema resolution and network MaxConnection settings. It is
rather a difference in implementation details. .NET likely has sloppy
implementation to read up the entire external DTD and then to parse it. We
process DTD in &quot;streaming&quot; way. Thus, first, xmldsig schema is read (in
streaming mode) from www.w3.org, which contains a reference to XMLSchema.dtd
from www.w3.org, which again has a reference to datatypes.dtd on (again)
www.w3.org.

So, there are more than two documents. And when it tries to get datatypes.dtd,
the XmlUrlResolver simply waits until timeout, and then treats as resource
error (which is ignored) and goes on parsing.

datatypes.dtd contains a definition for &quot;simpleType&quot;, which is used in
XMLSchema.dtd line 112. Since it is followed by '|' and is expected to hold a
name while it does not hold anything as this external entity is not parsed
successfully, it contains an empty string and hence DTD reader fails to read a
valid name but gets '|'.

I doubt that it is better to fix this issue just for implementation detail
difference (it causes an ugly change in our XML implementation that dumps
decent streaming entity reader). You can workaround the issue by having more
than 2 maxConnection in your application config file, e.g:

&lt;configuration&gt;
&lt;system.net&gt;
&lt;connectionManagement maxConnection=&quot;5&quot;&gt;
&lt;/system.net&gt;
&lt;/configuration&gt;

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="085014.html">[Mono-bugs] [Bug 469317] New: XML schema validation fails when ValidationType is set to Schema
</A></li>
	<LI>Next message: <A HREF="085251.html">[Mono-bugs] [Bug 469317] XML schema validation fails when there are more than two schema documents on the same server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85242">[ date ]</a>
              <a href="thread.html#85242">[ thread ]</a>
              <a href="subject.html#85242">[ subject ]</a>
              <a href="author.html#85242">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
