<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 465875] New: System.Core Lookup&lt;TKey, TElement&gt; does not use the specified comparer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20465875%5D%20New%3A%20System.Core%20Lookup%3CTKey%2C%0A%20TElement%3E%20does%20not%20use%20the%20specified%20comparer&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084567.html">
   <LINK REL="Next"  HREF="084641.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 465875] New: System.Core Lookup&lt;TKey, TElement&gt; does not use the specified comparer</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20465875%5D%20New%3A%20System.Core%20Lookup%3CTKey%2C%0A%20TElement%3E%20does%20not%20use%20the%20specified%20comparer&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 465875] New: System.Core Lookup&lt;TKey, TElement&gt; does not use the specified comparer">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Jan 13 16:16:52 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="084567.html">[Mono-bugs] [Bug 465864] Runtime crash when calling BeginInvoke right before exiting Main
</A></li>
        <LI>Next message: <A HREF="084641.html">[Mono-bugs] [Bug 465875] System.Core Lookup&lt;TKey, TElement&gt; does not use the specified comparer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84563">[ date ]</a>
              <a href="thread.html#84563">[ thread ]</a>
              <a href="subject.html#84563">[ subject ]</a>
              <a href="author.html#84563">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=465875">https://bugzilla.novell.com/show_bug.cgi?id=465875</A>


           Summary: System.Core Lookup&lt;TKey,TElement&gt; does not use the
                    specified comparer
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.0.x
          Platform: x86
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Core
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jbevain at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">bassam at symform.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; SLCC1;
NET CLR 2.0.50727; Media Center PC 5.0; InfoPath.2; .NET CLR 3.5.20706; .NET
CLR 3.5.21022; .NET CLR 3.5.30729; .NET CLR 3.0.30618)

The IEqualityComparer passed to ToLookup is not honored. This result in the
wrong comparison. It looks like the comparer is not passed to the dictionary
that implements lookup.

We would greatly appreciate a fix for this in 2.2.

Reproducible: Always

Steps to Reproduce:
        private class Color
        {
            public string Name;
            public int Value;
        }

        [Test]
        public void LookupCase()
        {
            Color[] colors = new Color[] 
            { 
                new Color() { Name = &quot;red&quot;, Value = 0xFF0000 },
                new Color() { Name = &quot;green&quot;, Value = 0x00FF00 },
                new Color() { Name = &quot;blue&quot;, Value = 0x0000FF },
            };

            Lookup&lt;string, int&gt; lookup = colors.ToLookup(c =&gt; c.Name, c =&gt;
c.Value, StringComparer.OrdinalIgnoreCase) as Lookup&lt;string, int&gt;;

            Assert.AreEqual(lookup[&quot;Red&quot;].First(), 0xFF0000);
        }

Actual Results:  
KeyNotFoundException thrown.

Expected Results:  
No exception thrown.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>














































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084567.html">[Mono-bugs] [Bug 465864] Runtime crash when calling BeginInvoke right before exiting Main
</A></li>
	<LI>Next message: <A HREF="084641.html">[Mono-bugs] [Bug 465875] System.Core Lookup&lt;TKey, TElement&gt; does not use the specified comparer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84563">[ date ]</a>
              <a href="thread.html#84563">[ thread ]</a>
              <a href="subject.html#84563">[ subject ]</a>
              <a href="author.html#84563">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
