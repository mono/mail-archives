<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 467202] New: Bitmap creating from other bitmap not	thread safe.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20467202%5D%20New%3A%20Bitmap%20creating%20from%20other%20bitmap%20not%0A%09thread%20safe.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="085155.html">
   <LINK REL="Next"  HREF="084710.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 467202] New: Bitmap creating from other bitmap not	thread safe.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20467202%5D%20New%3A%20Bitmap%20creating%20from%20other%20bitmap%20not%0A%09thread%20safe.&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 467202] New: Bitmap creating from other bitmap not	thread safe.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Jan 18 11:54:14 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="085155.html">[Mono-bugs] [Bug 467201] [PATCH] Improper conv.r4, conv.r8 and float return implementations
</A></li>
        <LI>Next message: <A HREF="084710.html">[Mono-bugs] [Bug 467202] Bitmap creating from other bitmap not	thread safe.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84709">[ date ]</a>
              <a href="thread.html#84709">[ thread ]</a>
              <a href="subject.html#84709">[ subject ]</a>
              <a href="author.html#84709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=467202">https://bugzilla.novell.com/show_bug.cgi?id=467202</A>


           Summary: Bitmap creating from other bitmap not thread safe.
    Classification: Mono
           Product: Mono: Class Libraries
           Version: unspecified
          Platform: x86-64
        OS/Version: Linux
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: libgdiplus
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jan.oravec at 6com.sk</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.0.5)
Gecko/2008122221 Gentoo Firefox/3.0.5

When two thread are trying to create bitmaps at same time, Mono crashes in
libgdiplus.so.

This code easily triggers crash:

using System.Drawing;
using System.Threading;

class Foo
{
  public static void Main ()
  {
    new Thread (Worker).Start ();
    new Thread (Worker).Start ();
  }

  static void Worker ()
  {
    Bitmap test = new Bitmap (100, 100);

    while (true)
      using (Bitmap bmp = new Bitmap (test))
        ;
  }
}

Furthermore, I would expect the code above to be safe even if 'test' was static
member of Foo, initialized once.

Setting severity to major, as there is no easy workaround (in my case, two
different unrelated libraries are trying to create bitmaps).

Reproducible: Always

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>















































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="085155.html">[Mono-bugs] [Bug 467201] [PATCH] Improper conv.r4, conv.r8 and float return implementations
</A></li>
	<LI>Next message: <A HREF="084710.html">[Mono-bugs] [Bug 467202] Bitmap creating from other bitmap not	thread safe.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84709">[ date ]</a>
              <a href="thread.html#84709">[ thread ]</a>
              <a href="subject.html#84709">[ subject ]</a>
              <a href="author.html#84709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
