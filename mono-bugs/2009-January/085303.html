<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 471149] New: System.UriFormatException thrown when downloading a file from ftp server using FtpWebRequest
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20471149%5D%20New%3A%20System.UriFormatException%20thrown%20when%0A%20downloading%20a%20file%20from%20ftp%20server%20using%20FtpWebRequest&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="085295.html">
   <LINK REL="Next"  HREF="085322.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 471149] New: System.UriFormatException thrown when downloading a file from ftp server using FtpWebRequest</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20471149%5D%20New%3A%20System.UriFormatException%20thrown%20when%0A%20downloading%20a%20file%20from%20ftp%20server%20using%20FtpWebRequest&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 471149] New: System.UriFormatException thrown when downloading a file from ftp server using FtpWebRequest">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Jan 30 16:28:51 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="085295.html">[Mono-bugs] [Bug 423379] OSX - Busy window while scanning
</A></li>
        <LI>Next message: <A HREF="085322.html">[Mono-bugs] [Bug 471149] System.UriFormatException thrown when downloading a file from ftp server using FtpWebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85303">[ date ]</a>
              <a href="thread.html#85303">[ thread ]</a>
              <a href="subject.html#85303">[ subject ]</a>
              <a href="author.html#85303">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=471149">https://bugzilla.novell.com/show_bug.cgi?id=471149</A>


           Summary: System.UriFormatException thrown when downloading a
                    file from ftp server using FtpWebRequest
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.2.x
          Platform: 32bit
        OS/Version: Windows Vista
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sdasari at rccny.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=269024)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=269024">https://bugzilla.novell.com/attachment.cgi?id=269024</A>)
Source code

User-Agent:       Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; SLCC1;
NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.5.21022; .NET CLR
3.5.30729; .NET CLR 3.0.30618)

Following exception is thrown when trying to file download a file from ftp
server:

Unhandled Exception: System.UriFormatException: Invalid URI: The format of the
U
RI could not be determined: /&quot; is current directory/
  at System.Uri..ctor (System.String uriString, Boolean dontEscape) [0x00000]
  at System.Uri..ctor (System.String uriString) [0x00000]
  at System.Net.FtpWebRequest.GetRemoteFolderPath (System.Uri uri) [0x00000]
  at System.Net.FtpWebRequest.CWDAndSetFileName (System.Uri uri) [0x00000]
  at System.Net.FtpWebRequest.ProcessMethod () [0x00000]
  at System.Net.FtpWebRequest.ProcessRequest () [0x00000]

Attached in the attachments is the source code that reproduces the exception. 
Mono that was used to run is mono 2.2 for windows downloaded from
<A HREF="http://www.go-mono.com/mono-downloads/">http://www.go-mono.com/mono-downloads/</A> 

Reproducible: Always

Steps to Reproduce:
1. Setup ftp server.  (ftp server was setup on windows os)
2. Compile attached source code(code was compiled using .net 3.5 compiler
csc.exe).  Depending on ftp server setup uri and server credentials in the code
will need to be changed.
3. Run output exe under mono
Actual Results:  
Following exception is thrown: System.UriFormatException: Invalid URI: The
format of the U
RI could not be determined: /&quot; is current directory/


Expected Results:  
File will be downloaded from ftp server.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="085295.html">[Mono-bugs] [Bug 423379] OSX - Busy window while scanning
</A></li>
	<LI>Next message: <A HREF="085322.html">[Mono-bugs] [Bug 471149] System.UriFormatException thrown when downloading a file from ftp server using FtpWebRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85303">[ date ]</a>
              <a href="thread.html#85303">[ thread ]</a>
              <a href="subject.html#85303">[ subject ]</a>
              <a href="author.html#85303">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
