<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 467221] New: asp.net security trimming / authorization not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20467221%5D%20New%3A%20asp.net%20security%20trimming%20/%0A%20authorization%20not%20working&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084725.html">
   <LINK REL="Next"  HREF="084727.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 467221] New: asp.net security trimming / authorization not working</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20467221%5D%20New%3A%20asp.net%20security%20trimming%20/%0A%20authorization%20not%20working&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 467221] New: asp.net security trimming / authorization not working">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Jan 18 21:29:47 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="084725.html">[Mono-bugs] [Bug 442105] XSP2.0.1 on Windows crashes when exiting [assert in mono_get_lmf_addr]
</A></li>
        <LI>Next message: <A HREF="084727.html">[Mono-bugs] [Bug 442105] XSP2.0.1 on Windows crashes when exiting [assert in mono_get_lmf_addr]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84726">[ date ]</a>
              <a href="thread.html#84726">[ thread ]</a>
              <a href="subject.html#84726">[ subject ]</a>
              <a href="author.html#84726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=467221">https://bugzilla.novell.com/show_bug.cgi?id=467221</A>


           Summary: asp.net security trimming / authorization not working
    Classification: Mono
           Product: Mono: Class Libraries
           Version: unspecified
          Platform: x86-64
        OS/Version: openSUSE 11.1
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mmorano at mikeandwan.us</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.0.5)
Gecko/2008121300 SUSE/3.0.5-1.1 Firefox/3.0.5

I have a navigation control that is driven from a SiteMapDataSource (using the
default Xml sitemap provider), and have configured security trimming in the
web.config as such:

&lt;siteMap enabled=&quot;true&quot; defaultProvider=&quot;SecuredSiteMapProvider&quot;&gt;
            &lt;providers&gt;
                &lt;clear /&gt;
                &lt;add name=&quot;SecuredSiteMapProvider&quot; 
                     type=&quot;System.Web.XmlSiteMapProvider, System.Web,
Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&quot; 
                     siteMapFile=&quot;web.sitemap&quot; 
                     securityTrimmingEnabled=&quot;true&quot; /&gt;
            &lt;/providers&gt;
        &lt;/siteMap&gt;

further on in the web.config, I have a number of elements defined to restrict
access to various resources within the site, such as the admin directory, and
is configured as such:

&lt;location path=&quot;admin&quot;&gt;
        &lt;system.web&gt;
            &lt;authorization&gt;
                &lt;allow roles=&quot;admin&quot; /&gt;
                &lt;deny users=&quot;*&quot; /&gt;
            &lt;/authorization&gt;
        &lt;/system.web&gt;
    &lt;/location&gt;

If I run this application on the version from SVN, then the navigation control
gets all the available nodes as configured, but also gets the admin node, which
it shouldn't as a user in the admin role has not authenticated yet.  The user
can then click on the link to the secured resource, and access it, even though
they have not logged in yet.

However, if I run with the mono/xsp2 from the opensuse 11.1 install (2.0.1),
the node is not returned, and resources are properly secured in the website.

Reproducible: Always



Expected Results:  
All nodes that do not meet their authorization requirement should not be
returned.  Additionally, if a resource location is configured to require a
particular user/role for the page to be accessed, the page should not be
processed if this condition is not met.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>



























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084725.html">[Mono-bugs] [Bug 442105] XSP2.0.1 on Windows crashes when exiting [assert in mono_get_lmf_addr]
</A></li>
	<LI>Next message: <A HREF="084727.html">[Mono-bugs] [Bug 442105] XSP2.0.1 on Windows crashes when exiting [assert in mono_get_lmf_addr]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84726">[ date ]</a>
              <a href="thread.html#84726">[ thread ]</a>
              <a href="subject.html#84726">[ subject ]</a>
              <a href="author.html#84726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
