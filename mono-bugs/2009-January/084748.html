<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 467385] New: 1-dimensional Array-creation with constructor results in runtime error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20467385%5D%20New%3A%201-dimensional%20Array-creation%20with%0A%20constructor%20results%20in%20runtime%20error&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084746.html">
   <LINK REL="Next"  HREF="084749.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 467385] New: 1-dimensional Array-creation with constructor results in runtime error</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20467385%5D%20New%3A%201-dimensional%20Array-creation%20with%0A%20constructor%20results%20in%20runtime%20error&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 467385] New: 1-dimensional Array-creation with constructor results in runtime error">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Jan 19 10:44:57 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="084746.html">[Mono-bugs] [Bug 467369] New: Regex bug with groups
</A></li>
        <LI>Next message: <A HREF="084749.html">[Mono-bugs] [Bug 467385] 1-dimensional Array-creation with constructor results in runtime error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84748">[ date ]</a>
              <a href="thread.html#84748">[ thread ]</a>
              <a href="subject.html#84748">[ subject ]</a>
              <a href="author.html#84748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=467385">https://bugzilla.novell.com/show_bug.cgi?id=467385</A>


           Summary: 1-dimensional Array-creation with constructor results
                    in runtime error
    Classification: Mono
           Product: Mono: Runtime
           Version: 2.0.x
          Platform: i386
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: JIT
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">maik.schoepe at informatik.uni-halle.de</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Development


Description of Problem:
When creating a one-dimensional array with newobj (calling .ctor) instead of
using newarr mono crashes at runtime. This happens since version 2.0.1 of mono.
It works with newarr and with multidimensional arrays. (see attachment).


Steps to reproduce the problem:
1. use version 2.0.1 (with version 1.9.1 it works fine)
2. compile the attachment with &quot;ilasm createarr.il&quot;
3. run &quot;mono createarr.exe&quot;


Actual Results:
Stacktrace:


Native stacktrace:

    mono [0x806d049]
    mono [0x8085beb]
    [0xb8004410]
    mono [0x8132619]
    mono(mono_get_method_full+0xa1) [0x8132971]
    mono [0x8184440]
    mono [0x8195824]
    mono [0x81aa405]
    mono [0x81ac2c1]
    mono [0x81acb7b]
    mono(mono_runtime_exec_main+0xe5) [0x80f6fd5]
    mono(mono_runtime_run_main+0x16b) [0x80f774b]
    mono(mono_main+0x16df) [0x805c7ff]
    mono [0x805aba2]
    /lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe5) [0xb7d86685]
    mono [0x805aae1]

Debug info from gdb:

(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
[Thread debugging using libthread_db enabled]
[New Thread 0xb7d446d0 (LWP 3256)]
[New Thread 0xb758bb90 (LWP 3258)]
[New Thread 0xb75afb90 (LWP 3257)]
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
0xb8004430 in __kernel_vsyscall ()
  3 Thread 0xb75afb90 (LWP 3257)  0xb8004430 in __kernel_vsyscall ()
  2 Thread 0xb758bb90 (LWP 3258)  0xb8004430 in __kernel_vsyscall ()
  1 Thread 0xb7d446d0 (LWP 3256)  0xb8004430 in __kernel_vsyscall ()

Thread 3 (Thread 0xb75afb90 (LWP 3257)):
#0  0xb8004430 in __kernel_vsyscall ()
#1  0xb7f01906 in nanosleep () from /lib/tls/i686/cmov/libpthread.so.0
#2  0x08164918 in ?? ()
#3  0xb7efa50f in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
#4  0xb7e517ee in clone () from /lib/tls/i686/cmov/libc.so.6

Thread 2 (Thread 0xb758bb90 (LWP 3258)):
#0  0xb8004430 in __kernel_vsyscall ()
#1  0xb7efe075 in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib/tls/i686/cmov/libpthread.so.0
#2  0x08153537 in ?? ()
#3  0x081560b4 in ?? ()
#4  0x0815611c in ?? ()
#5  0x0814b0e2 in ?? ()
#6  0x081c5a1a in ?? ()
#7  0x08137569 in ?? ()
#8  0x08161756 in ?? ()
#9  0x0817be95 in ?? ()
#10 0xb7efa50f in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
#11 0xb7e517ee in clone () from /lib/tls/i686/cmov/libc.so.6

Thread 1 (Thread 0xb7d446d0 (LWP 3256)):
#0  0xb8004430 in __kernel_vsyscall ()
#1  0xb7e4ddc7 in syscall () from /lib/tls/i686/cmov/libc.so.6
#2  0x0806d0d6 in ?? ()
#3  0x08085beb in ?? ()
#4  &lt;signal handler called&gt;
#5  0x08131f6c in ?? ()
#6  0x08132619 in ?? ()
#7  0x08132971 in mono_get_method_full ()
#8  0x08184440 in ?? ()
#9  0x08195824 in ?? ()
#10 0x081aa405 in ?? ()
#11 0x081ac2c1 in ?? ()
#12 0x081acb7b in ?? ()
#13 0x080f6fd5 in mono_runtime_exec_main ()
#14 0x080f774b in mono_runtime_run_main ()
#15 0x0805c7ff in mono_main ()
#16 0x0805aba2 in ?? ()
#17 0xb7d86685 in __libc_start_main () from /lib/tls/i686/cmov/libc.so.6
#18 0x0805aae1 in ?? ()
#0  0xb8004430 in __kernel_vsyscall ()

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

Aborted


Expected Results:
no runtime error


How often does this happen? 
everytime

Additional Information:

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>




























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084746.html">[Mono-bugs] [Bug 467369] New: Regex bug with groups
</A></li>
	<LI>Next message: <A HREF="084749.html">[Mono-bugs] [Bug 467385] 1-dimensional Array-creation with constructor results in runtime error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84748">[ date ]</a>
              <a href="thread.html#84748">[ thread ]</a>
              <a href="subject.html#84748">[ subject ]</a>
              <a href="author.html#84748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
