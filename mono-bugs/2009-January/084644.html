<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 466510] New: Assembly.CodeBase returns an incorrect value when using Shadow Copy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20466510%5D%20New%3A%20Assembly.CodeBase%20returns%20an%0A%20incorrect%20value%20when%20using%20Shadow%20Copy&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084643.html">
   <LINK REL="Next"  HREF="084651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 466510] New: Assembly.CodeBase returns an incorrect value when using Shadow Copy</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20466510%5D%20New%3A%20Assembly.CodeBase%20returns%20an%0A%20incorrect%20value%20when%20using%20Shadow%20Copy&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 466510] New: Assembly.CodeBase returns an incorrect value when using Shadow Copy">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Jan 15 12:40:30 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="084643.html">[Mono-bugs] [Bug 437312] System.Data.Odbc and Mono 2.0 : Many new problems upgrading from 1.9.1
</A></li>
        <LI>Next message: <A HREF="084651.html">[Mono-bugs] [Bug 466510] Assembly.CodeBase returns an incorrect value when using Shadow Copy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84644">[ date ]</a>
              <a href="thread.html#84644">[ thread ]</a>
              <a href="subject.html#84644">[ subject ]</a>
              <a href="author.html#84644">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=466510">https://bugzilla.novell.com/show_bug.cgi?id=466510</A>


           Summary: Assembly.CodeBase returns an incorrect value when
                    using Shadow Copy
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.2.x
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: CORLIB
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lluis at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


In the following test case, Assembly.CodeBase returns the location of the
shadow copy assembly, instead of the original location. Notice that it returns
the correct value if setup.ShadowCopyDirectories is not set.

using System;
using System.IO;
using System.Reflection;

class App
{
    public static void Main (string[] args)
    {
        AppDomainSetup setup = new AppDomainSetup();

        setup.ShadowCopyFiles = &quot;true&quot;;

        setup.ShadowCopyDirectories = Path.GetDirectoryName
(typeof(App).Assembly.Location);

        AppDomain runnerDomain = AppDomain.CreateDomain (&quot;other&quot;,
AppDomain.CurrentDomain.Evidence, setup);

        runnerDomain.DoCallBack (Run);
    }

    static void Run ()
    {
        Console.WriteLine (&quot;Domain: &quot; + AppDomain.CurrentDomain.FriendlyName);
        Assembly asm = typeof(App).Assembly;
        Console.WriteLine (&quot;asm.Location: &quot; + asm.Location);
        Console.WriteLine (&quot;asm.CodeBase: &quot; + asm.CodeBase);
    }
}

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>





















































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084643.html">[Mono-bugs] [Bug 437312] System.Data.Odbc and Mono 2.0 : Many new problems upgrading from 1.9.1
</A></li>
	<LI>Next message: <A HREF="084651.html">[Mono-bugs] [Bug 466510] Assembly.CodeBase returns an incorrect value when using Shadow Copy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84644">[ date ]</a>
              <a href="thread.html#84644">[ thread ]</a>
              <a href="subject.html#84644">[ subject ]</a>
              <a href="author.html#84644">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
