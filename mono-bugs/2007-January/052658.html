<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 80307][Wis] Changed - NullReferenceException in	ternary operator
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2080307%5D%5BWis%5D%20Changed%20-%20NullReferenceException%20in%0A%09ternary%20operator&In-Reply-To=bug-80307%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052657.html">
   <LINK REL="Next"  HREF="052659.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 80307][Wis] Changed - NullReferenceException in	ternary operator</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2080307%5D%5BWis%5D%20Changed%20-%20NullReferenceException%20in%0A%09ternary%20operator&In-Reply-To=bug-80307%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 80307][Wis] Changed - NullReferenceException in	ternary operator">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Thu Jan 11 11:28:32 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="052657.html">[Mono-bugs] [Bug 80497][Nor] Changed - Labels did not Resize to new	assigned Text
</A></li>
        <LI>Next message: <A HREF="052659.html">[Mono-bugs] [Bug 80487][Wis] Changed - Module constructor of	libraries is not executed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52658">[ date ]</a>
              <a href="thread.html#52658">[ thread ]</a>
              <a href="subject.html#52658">[ subject ]</a>
              <a href="author.html#52658">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">massi at ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=80307">http://bugzilla.ximian.com/show_bug.cgi?id=80307</A>

--- shadow/80307	2007-01-05 02:33:07.000000000 -0500
+++ shadow/80307.tmp.27349	2007-01-11 11:28:32.000000000 -0500
@@ -153,6 +153,29 @@
 
 ------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">grendello at gmail.com</A>  2007-01-04 18:15 -------
 The main symptom of the linears breakage is that the thread local 
 storage doesn't contain the frame information, but only in threads 
 other than the thread where xsp is running. It might be a problem 
 with one of the cpu registers related to the stack being overwritten.
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">massi at ximian.com</A>  2007-01-11 11:28 -------
+
+While it is true that the bug does not show up with -O=-linears, it
+is also true that it is not present in Mono 1.2, and the 1.2 JIT
+produces *identical* code in the relevant method
+&quot;System.Web.Compilation.AspParser.GetServerTag&quot;
+(relevant because enabling-disabling linears on exactly that method
+toggles the bug's presence).
+
+So it can be that investigating -O=linears was not the right thing
+to do.
+On the other hand, backing out r69404 &quot;fixes&quot; this bug, while it
+reintroduces bug #80235.
+
+About the commented code enabled in r69404: Zoltan, in r61500, wrote
+as a comment &quot;This doesn't work because mono_class_from_mono_type ()
+returns the original klass for a byref type, not a 'byref' class,
+causing the JIT to create variables with the wrong type&quot;.
+I also had big problems with this piece of code when trying to
+implement type based alias analysis for HSSA.
+
+Anyway, I'll investigate more.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052657.html">[Mono-bugs] [Bug 80497][Nor] Changed - Labels did not Resize to new	assigned Text
</A></li>
	<LI>Next message: <A HREF="052659.html">[Mono-bugs] [Bug 80487][Wis] Changed - Module constructor of	libraries is not executed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52658">[ date ]</a>
              <a href="thread.html#52658">[ thread ]</a>
              <a href="subject.html#52658">[ subject ]</a>
              <a href="author.html#52658">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
