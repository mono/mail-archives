<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 80508][Nor] Changed - code quality regression for	array init
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2080508%5D%5BNor%5D%20Changed%20-%20code%20quality%20regression%20for%0A%09array%20init&In-Reply-To=bug-80508%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052725.html">
   <LINK REL="Next"  HREF="052727.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 80508][Nor] Changed - code quality regression for	array init</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2080508%5D%5BNor%5D%20Changed%20-%20code%20quality%20regression%20for%0A%09array%20init&In-Reply-To=bug-80508%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 80508][Nor] Changed - code quality regression for	array init">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Sat Jan 13 08:50:08 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="052725.html">[Mono-bugs] [Bug 80510][Maj] Changed - GetFactoryClasses not	working in ASP.Net but in other apps its OK
</A></li>
        <LI>Next message: <A HREF="052727.html">[Mono-bugs] [Bug 77075][Maj] Changed - &quot;SuspendThread failed!&quot; on	windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52726">[ date ]</a>
              <a href="thread.html#52726">[ thread ]</a>
              <a href="subject.html#52726">[ subject ]</a>
              <a href="author.html#52726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=80508">http://bugzilla.ximian.com/show_bug.cgi?id=80508</A>

--- shadow/80508	2007-01-12 19:13:33.000000000 -0500
+++ shadow/80508.tmp.21500	2007-01-13 08:50:08.000000000 -0500
@@ -50,6 +50,19 @@
 I understand that on other architectures you can get different results
  so it probably makes better sense to optimize InitializeArray to be
 architecture specific and set threshold lower to cover only cost of
 managed-&gt;unmanaged transition.
 
 
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at ximian.com</A>  2007-01-13 08:50 -------
+I'm not saying that currently the performance would be better. I'm
+saying that this change causes orrible code to be persisted in
+assemblies and that code is not optimizable. Changes like this should
+be done only after discussion and consensus, because the generated
+code is persisted and can live forever. You can run your benchmarks
+all you want, but you're measuring the wrong thing.
+This change increases jit time and runtime memory use and it's
+preventing the JIT from optimizing the initialization (the jit could
+just mempcy() the data on little endian systems).
+This has nothing to do with different architectures: the issue is that
+this change is not an optimization: it is a pessimization.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052725.html">[Mono-bugs] [Bug 80510][Maj] Changed - GetFactoryClasses not	working in ASP.Net but in other apps its OK
</A></li>
	<LI>Next message: <A HREF="052727.html">[Mono-bugs] [Bug 77075][Maj] Changed - &quot;SuspendThread failed!&quot; on	windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52726">[ date ]</a>
              <a href="thread.html#52726">[ thread ]</a>
              <a href="subject.html#52726">[ subject ]</a>
              <a href="author.html#52726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
