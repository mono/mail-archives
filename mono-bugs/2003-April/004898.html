<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 42063][Blo] New - mono asserts on ctor of unsafe delegate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40rocky.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004897.html">
   <LINK REL="Next"  HREF="004899.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 42063][Blo] New - mono asserts on ctor of unsafe delegate
   </H1>
    <B>bugzilla-daemon@rocky.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40rocky.ximian.com"
       TITLE="[Mono-bugs] [Bug 42063][Blo] New - mono asserts on ctor of unsafe delegate">bugzilla-daemon@rocky.ximian.com
       </A><BR>
    <I>Mon, 28 Apr 2003 19:14:22 -0400 (EDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="004897.html">[Mono-bugs] [Bug 41841][Maj] Changed - MonoEnumInfo requires ThreadSafety
</A></li>
        <LI> Next message: <A HREF="004899.html">[Mono-bugs] [Bug 41841][Maj] Changed - MonoEnumInfo requires ThreadSafety
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4898">[ date ]</a>
              <a href="thread.html#4898">[ thread ]</a>
              <a href="subject.html#4898">[ subject ]</a>
              <a href="author.html#4898">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:r.h.lee@attbi.com.">r.h.lee@attbi.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=42063">http://bugzilla.ximian.com/show_bug.cgi?id=42063</A>

--- shadow/42063	Mon Apr 28 19:14:22 2003
+++ shadow/42063.tmp.11679	Mon Apr 28 19:14:22 2003
@@ -0,0 +1,67 @@
+Bug#: 42063
+Product: Mono/Runtime
+Version: unspecified
+OS: 
+OS Details: 
+Status: NEW   
+Resolution: 
+Severity: 
+Priority: Blocker
+Component: misc
+AssignedTo: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>                            
+ReportedBy: <A HREF="mailto:r.h.lee@attbi.com">r.h.lee@attbi.com</A>               
+QAContact: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>
+TargetMilestone: ---
+URL: 
+Cc: 
+Summary: mono asserts on ctor of unsafe delegate 
+
+Steps:
+
+using System;
+
+public class Test {
+	public Test () {}
+
+	unsafe private delegate void* _test1_delegate();
+	
+	unsafe private static void* _test1_handler () {
+		return null;
+	}
+	
+	unsafe public static void Main () {
+		_test1_delegate del=null;
+		del = new _test1_delegate(_test1_handler); // &lt;&lt;--crash
+		del();
+	}
+} 
+
+Actual Results:
+=== Trace from mono ===
+
+ENTER: 04 System.String:.cctor (object,intptr,intptr)((nil), (nil),
+0xbffff5ec, )
+. ENTER: 00 System.String:.cctor ()()
+. . LEAVE: 00 System.String:.cctor ()
+. LEAVE: 04 System.String:.cctor (object,intptr,intptr)[OBJECT:(nil)]
+ENTER: 04 System.AppDomain:DoAssemblyLoad
+(object,intptr,intptr)([System.AppDomain:0x8069fc0], 0xbffff7f0, (nil), )
+. ENTER: 00 System.AppDomain:DoAssemblyLoad
+(System.Reflection.Assembly)(this:0x8069fc0[System.AppDomain],
+[System.Reflection.Assembly:0x80bfff0], )
+. . ENTER: 00 System.MulticastDelegate:op_Equality
+(System.MulticastDelegate,System.MulticastDelegate)((nil), (nil), )
+. . . LEAVE: 00 System.MulticastDelegate:op_Equality
+(System.MulticastDelegate,System.MulticastDelegate)TRUE:1
+. . LEAVE: 00 System.AppDomain:DoAssemblyLoad (System.Reflection.Assembly)
+. LEAVE: 04 System.AppDomain:DoAssemblyLoad
+(object,intptr,intptr)[OBJECT:(nil)]
+ENTER: 04 .Test:Main (object,intptr,intptr)((nil), 0xbf5ff9a8, (nil), )
+. ENTER: 00 .Test:Main ()()
+ 
+** (test.exe:2666): WARNING **: type 0xf not handled
+ 
+** ERROR **: file /usr/src/cvs/mono/mono/mono/metadata/marshal.c: line 1216
+(mono_mb_emit_restore_result): should not be reached
+aborting...
+Aborted

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004897.html">[Mono-bugs] [Bug 41841][Maj] Changed - MonoEnumInfo requires ThreadSafety
</A></li>
	<LI> Next message: <A HREF="004899.html">[Mono-bugs] [Bug 41841][Maj] Changed - MonoEnumInfo requires ThreadSafety
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4898">[ date ]</a>
              <a href="thread.html#4898">[ thread ]</a>
              <a href="subject.html#4898">[ subject ]</a>
              <a href="author.html#4898">[ author ]</a>
         </LI>
       </UL>
</body></html>
