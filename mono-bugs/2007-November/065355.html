<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 342504] New: [Regression] File open dialog crashes	app
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20342504%5D%20New%3A%20%5BRegression%5D%20File%20open%20dialog%20crashes%0A%09app&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065354.html">
   <LINK REL="Next"  HREF="065356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 342504] New: [Regression] File open dialog crashes	app</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20342504%5D%20New%3A%20%5BRegression%5D%20File%20open%20dialog%20crashes%0A%09app&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 342504] New: [Regression] File open dialog crashes	app">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Nov 17 01:55:51 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="065354.html">[Mono-bugs] [Bug 323555] [regression] monodoc 1.2.3 missing files
</A></li>
        <LI>Next message: <A HREF="065356.html">[Mono-bugs] [Bug 342504] [Regression] File open dialog crashes app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65355">[ date ]</a>
              <a href="thread.html#65355">[ thread ]</a>
              <a href="subject.html#65355">[ subject ]</a>
              <a href="author.html#65355">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=342504">https://bugzilla.novell.com/show_bug.cgi?id=342504</A>

           Summary: [Regression] File open dialog crashes app
           Product: Mono: Class Libraries
           Version: 1.2.6
          Platform: i386
        OS/Version: SLED 10
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">twiest at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
          Found By: Component Test


Description of Problem:
If you open a file open dialog, and follow the procedure below, the entire app
crashes with the error message &quot;System.ArgumentOutOfRangeException: Argument is
out of range.&quot;

This does not happen on Mono 1.2.2 or 1.2.5.1 so this is a regression. These
versions have some problems too, but they don't crash the app.


Steps to reproduce the problem:
1. Click file / open on a Winforms app (I used ControlInspector)
2. Click &quot;My Computer&quot;
3. Double click on HDD
4. Single click to select &quot;lib&quot;
5. Wait a few seconds
6. Single click lib again to start to rename the directory
7. Without renaming the directory, double click on the folder next to lib
8. Notice the crash


Actual Results:
crash

Expected Results:
go into the directory

How often does this happen? 
every time 

Additional Information:
Unhandled Exception: System.Reflection.TargetInvocationException: Exception has
been thrown by the target of an invocation. ---&gt;
System.ArgumentOutOfRangeException: Argument is out of range.
Parameter name: displayIndex
  at System.Windows.Forms.ListView+ListViewItemCollection.get_Item (Int32
displayIndex) [0x00030] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListView.cs:4531
  at System.Windows.Forms.ListView.SetFocusedItem (Int32 index) [0x0002a] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListView.cs:3010
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.ListView:SetFocusedItem (int)
  at System.Windows.Forms.ListView+ListViewItemCollection.Clear () [0x00016] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListView.cs:4682
  at System.Windows.Forms.MWFFileView.RealFileViewUpdate
(System.Collections.ArrayList directoriesArrayList,
System.Collections.ArrayList fileArrayList) [0x00006] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/FileDialog.cs:2548
  at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke
(object,object[])
  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags
invokeAttr, System.Reflection.Binder binder, System.Object[] parameters,
System.Globalization.CultureInfo culture) [0x0003f] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/corlib/System.Reflection/MonoMethod.cs:149
--- End of inner exception stack trace ---

  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags
invokeAttr, System.Reflection.Binder binder, System.Object[] parameters,
System.Globalization.CultureInfo culture) [0x00064] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/corlib/System.Reflection/MonoMethod.cs:163
  at System.Reflection.MethodBase.Invoke (System.Object obj, System.Object[]
parameters) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/corlib/System.Reflection/MethodBase.cs:93
  at System.Delegate.DynamicInvokeImpl (System.Object[] args) [0x00050] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/corlib/System/Delegate.cs:391
  at System.MulticastDelegate.DynamicInvokeImpl (System.Object[] args)
[0x00018] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/corlib/System/MulticastDelegate.cs:71
  at System.Delegate.DynamicInvoke (System.Object[] args) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/corlib/System/Delegate.cs:363
  at System.Windows.Forms.XplatUIDriverSupport.ExecuteClientMessage (GCHandle
gchandle) [0x0003c] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUIDriver.cs:478
  at System.Windows.Forms.XplatUIX11.GetMessage (System.Object queue_id,
System.Windows.Forms.MSG&amp; msg, IntPtr handle, Int32 wFilterMin, Int32
wFilterMax) [0x01560] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUIX11.cs:4195
  at System.Windows.Forms.XplatUI.GetMessage (System.Object queue_id,
System.Windows.Forms.MSG&amp; msg, IntPtr hWnd, Int32 wFilterMin, Int32 wFilterMax)
[0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUI.cs:671
  at System.Windows.Forms.Application.RunLoop (Boolean Modal,
System.Windows.Forms.ApplicationContext context) [0x001e8] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Application.cs:854
  at System.Windows.Forms.Form.ShowDialog (IWin32Window ownerWin32) [0x000f8]
in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Form.cs:1747
  at (wrapper remoting-invoke-with-check) System.Windows.Forms.Form:ShowDialog
(System.Windows.Forms.IWin32Window)
  at System.Windows.Forms.CommonDialog.ShowDialog (IWin32Window ownerWin32)
[0x00046] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/CommonDialog.cs:131
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.CommonDialog:ShowDialog
(System.Windows.Forms.IWin32Window)
  at EventTestDriver.FormSelectForm.btnBrowse_Click (System.Object sender,
System.EventArgs e) [0x00000] in
/usr/src/packages/BUILD/wf-apps-r282/ICanSpy/ICanSpy-Port/FormSelectForm.cs:244
  at System.Windows.Forms.Control.OnClick (System.EventArgs e) [0x0001c] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:5651
  at System.Windows.Forms.Button.OnClick (System.EventArgs e) [0x00024] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Button.cs:104
  at System.Windows.Forms.ButtonBase.OnMouseUp
(System.Windows.Forms.MouseEventArgs mevent) [0x00076] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ButtonBase.cs:616
  at System.Windows.Forms.Button.OnMouseUp (System.Windows.Forms.MouseEventArgs
e) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Button.cs:126
  at System.Windows.Forms.Control.WmLButtonUp (System.Windows.Forms.Message&amp; m)
[0x0005c] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:5247
at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message&amp; m)
[0x0017c] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:5000
  at System.Windows.Forms.ButtonBase.WndProc (System.Windows.Forms.Message&amp; m)
[0x00055] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ButtonBase.cs:674
  at System.Windows.Forms.Button.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Button.cs:148
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:225
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:206
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x0006a] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/NativeWindow.cs:188
  at System.Windows.Forms.XplatUIX11.DispatchMessage (System.Windows.Forms.MSG&amp;
msg) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUIX11.cs:3254
  at System.Windows.Forms.XplatUI.DispatchMessage (System.Windows.Forms.MSG&amp;
msg) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUI.cs:551
  at System.Windows.Forms.Application.RunLoop (Boolean Modal,
System.Windows.Forms.ApplicationContext context) [0x00194] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Application.cs:842
  at System.Windows.Forms.Form.ShowDialog (IWin32Window ownerWin32) [0x000f8]
in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Form.cs:1747
  at (wrapper remoting-invoke-with-check) System.Windows.Forms.Form:ShowDialog
(System.Windows.Forms.IWin32Window)
  at EventTestDriver.FormMain.menuSelectForm_Click (System.Object sender,
System.EventArgs e) [0x00006] in
/usr/src/packages/BUILD/wf-apps-r282/ICanSpy/ICanSpy-Port/FormMain.cs:303
  at System.Windows.Forms.MenuItem.OnClick (System.EventArgs e) [0x0001c] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/MenuItem.cs:517
  at System.Windows.Forms.MenuItem.PerformClick () [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/MenuItem.cs:559
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.MenuItem:PerformClick ()
  at System.Windows.Forms.MenuTracker.OnMouseUp
(System.Windows.Forms.MouseEventArgs args) [0x00093] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/MenuAPI.cs:237
  at System.Windows.Forms.Form.WmButtonUp (System.Windows.Forms.Message&amp; m)
[0x000b5] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Form.cs:2799
  at System.Windows.Forms.Form.WndProc (System.Windows.Forms.Message&amp; m)
[0x00151] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Form.cs:2473
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:225
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:206
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x0006a] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/NativeWindow.cs:188
  at System.Windows.Forms.XplatUIX11.DispatchMessage (System.Windows.Forms.MSG&amp;
msg) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUIX11.cs:3254
  at System.Windows.Forms.XplatUI.DispatchMessage (System.Windows.Forms.MSG&amp;
msg) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUI.cs:551
  at System.Windows.Forms.Application.RunLoop (Boolean Modal,
System.Windows.Forms.ApplicationContext context) [0x00194] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Application.cs:842
  at System.Windows.Forms.Application.Run
(System.Windows.Forms.ApplicationContext context) [0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Application.cs:630
  at System.Windows.Forms.Application.Run (System.Windows.Forms.Form mainForm)
[0x00000] in
/tmp/monobuild/build/BUILD/mono-1.2.6/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Application.cs:618
  at EventTestDriver.FormMain.Main () [0x00033] in
/usr/src/packages/BUILD/wf-apps-r282/ICanSpy/ICanSpy-Port/FormMain.cs:292


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065354.html">[Mono-bugs] [Bug 323555] [regression] monodoc 1.2.3 missing files
</A></li>
	<LI>Next message: <A HREF="065356.html">[Mono-bugs] [Bug 342504] [Regression] File open dialog crashes app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65355">[ date ]</a>
              <a href="thread.html#65355">[ thread ]</a>
              <a href="subject.html#65355">[ subject ]</a>
              <a href="author.html#65355">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
