<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 325261] Profiling xsp/xsp2 (requesting an empty .aspx) always leads to crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20325261%5D%20Profiling%20xsp/xsp2%20%28requesting%20an%20empty%0A%20.aspx%29%20always%20leads%20to%20crash&In-Reply-To=bug-325261-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064474.html">
   <LINK REL="Next"  HREF="064476.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 325261] Profiling xsp/xsp2 (requesting an empty .aspx) always leads to crash</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20325261%5D%20Profiling%20xsp/xsp2%20%28requesting%20an%20empty%0A%20.aspx%29%20always%20leads%20to%20crash&In-Reply-To=bug-325261-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 325261] Profiling xsp/xsp2 (requesting an empty .aspx) always leads to crash">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Nov  5 17:48:30 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="064474.html">[Mono-bugs] [Bug 324135] eglib does not build on Mac OS X
</A></li>
        <LI>Next message: <A HREF="064476.html">[Mono-bugs] [Bug 339392] New: use of unassigned local variable not	detected
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64475">[ date ]</a>
              <a href="thread.html#64475">[ thread ]</a>
              <a href="subject.html#64475">[ subject ]</a>
              <a href="author.html#64475">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=325261#c1">https://bugzilla.novell.com/show_bug.cgi?id=325261#c1</A>





--- Comment #1 from Massimiliano Mantione &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">massi at ximian.com</A>&gt;  2007-11-05 15:48:29 MST ---
This *seems* to be related to freeing portions of metadata before printing the
profiler results.

I isolated the crash inside &quot;method_get_name&quot; in &quot;profiler.c&quot;.
It happens when printing the callers of
&quot;System.Web.HttpUtility::runtime_invoke_void(object,intptr,intptr,intptr)&quot;,
particularly when printing the name &quot;ASP.index_aspx::.ctor()&quot;.

At that point, none of the pointers is NULL, but it *seems* that
&quot;method-&gt;klass-&gt;name_space&quot; points to an invalid address, or something
like that, in any case the sigsegv happens in the g_strdup_printf, but
none of its arguments is NULL.

I cannot reproduce this in gdb, so I resorted to printf, I know the
exact method because I also printed the MonoMethod* values at jit time.

None of my attempts to print the results earlier gave good results
so far... anyway, the new (logging) profiler is not affected by this
problem.
And this bug is does not seem a regression, at least it has not been
caused by my addition of profiler hooks because it predates them.

Should I *really* insist in fixing the old profiler, which in this
case (xsp, many dynamic things) is flawed by design, or should I just
move on to the new profiler?


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064474.html">[Mono-bugs] [Bug 324135] eglib does not build on Mac OS X
</A></li>
	<LI>Next message: <A HREF="064476.html">[Mono-bugs] [Bug 339392] New: use of unassigned local variable not	detected
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64475">[ date ]</a>
              <a href="thread.html#64475">[ thread ]</a>
              <a href="subject.html#64475">[ subject ]</a>
              <a href="author.html#64475">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
