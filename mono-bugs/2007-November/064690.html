<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 321212] HttpWebRequest must not send credentials on first request
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20321212%5D%20HttpWebRequest%20must%20not%20send%20credentials%0A%20on%20first%20request&In-Reply-To=bug-321212-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064689.html">
   <LINK REL="Next"  HREF="064691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 321212] HttpWebRequest must not send credentials on first request</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20321212%5D%20HttpWebRequest%20must%20not%20send%20credentials%0A%20on%20first%20request&In-Reply-To=bug-321212-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 321212] HttpWebRequest must not send credentials on first request">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Nov  6 17:18:27 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="064689.html">[Mono-bugs] [Bug 324248] [GMCS] implicite conversion to boolean from generic using == does not work
</A></li>
        <LI>Next message: <A HREF="064691.html">[Mono-bugs] [Bug 311626] Numbering of regular expression groups	fails.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64690">[ date ]</a>
              <a href="thread.html#64690">[ thread ]</a>
              <a href="subject.html#64690">[ subject ]</a>
              <a href="author.html#64690">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=321212#c4">https://bugzilla.novell.com/show_bug.cgi?id=321212#c4</A>


Geoff Norton &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gnorton at novell.com</A>&gt; changed:

           What    |Removed                                         |Added
----------------------------------------------------------------------------
                 CC|                                                |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gnorton at novell.com</A>




--- Comment #4 from Geoff Norton &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gnorton at novell.com</A>&gt;  2007-11-06 15:18:27 MST ---
I spent a bit of time on this and the reporter is correct.  PreAuthenticate
acts the same on 1.1 and 2.0 but it does NOT blindly send the credentials; it
causes the following behaviour

WITHOUT PREAUTH:
(HttpWebRequest Object #1)
C: GET /someUrl
S: 401 Auth Required
C: GET /someUrl (with authentication headers)
S: 200 OK

(HttpWebRequestObject #2)
C: GET /someOtherUrl
S: 401 Auth Required
C: GET /someOtherUrl (with authentication headers)
S: 200 OK

WITH PREAUTH:
(HttpWebRequest Object #1)
C: GET /someUrl
S: 401 AuthRequired
C: GET /someUrl (with authentication headers)
S: 200 OK

(HttpWebRequest Object #2)
C: GET /someOtherUrl (with authentication headers)
S: 200 OK

There are a few caveats.  Domain has to match and the path has to match up to
the containing folder of the first request.  Also both request #1 and #2 must
have the same credentials and both have to set PreAuthenticate = true. 
Microsoft must keep some sort of state cache of PreAuth requests and only skip
getting the 401 when those criteria match.

We still need to determine wether these are appdomain specific (I assume they
are) and what lifecycle they have (if any)


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>
















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064689.html">[Mono-bugs] [Bug 324248] [GMCS] implicite conversion to boolean from generic using == does not work
</A></li>
	<LI>Next message: <A HREF="064691.html">[Mono-bugs] [Bug 311626] Numbering of regular expression groups	fails.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64690">[ date ]</a>
              <a href="thread.html#64690">[ thread ]</a>
              <a href="subject.html#64690">[ subject ]</a>
              <a href="author.html#64690">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
