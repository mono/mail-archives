<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 343353] New: nunit-console. exe crashes under the current development build 20071121
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20343353%5D%20New%3A%20nunit-console.%20exe%20crashes%20under%20the%0A%20current%20development%20build%2020071121&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065729.html">
   <LINK REL="Next"  HREF="065646.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 343353] New: nunit-console. exe crashes under the current development build 20071121</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20343353%5D%20New%3A%20nunit-console.%20exe%20crashes%20under%20the%0A%20current%20development%20build%2020071121&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 343353] New: nunit-console. exe crashes under the current development build 20071121">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Nov 21 11:14:10 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="065729.html">[Mono-bugs] [Bug 343342] [Regression] InvOpEx in GDIPlus.CheckStatus from ImageAnimator .CanAnimate on attached image
</A></li>
        <LI>Next message: <A HREF="065646.html">[Mono-bugs] [Bug 343353] nunit-console. exe crashes under the current development build 20071121
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65641">[ date ]</a>
              <a href="thread.html#65641">[ thread ]</a>
              <a href="subject.html#65641">[ subject ]</a>
              <a href="author.html#65641">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=343353">https://bugzilla.novell.com/show_bug.cgi?id=343353</A>

           Summary: nunit-console.exe crashes under the current development
                    build 20071121
           Product: Mono: Runtime
           Version: SVN
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">srfcanada at hotmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
          Found By: ---


Starting with the builds in november the nunit_console crashes under mono. the
last build that it works on that I tried was the November 1 build.
It doesnt matter what kind of unit test I try it with, it crashes on any I try.

This is the command:
mono --debug nunit-console.exe -domain=multiple tests.nunit

this is the output:
NUnit version 2.4.3
Copyright (C) 2002-2007 Charlie Poole.
Copyright (C) 2002-2004 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov.
Copyright (C) 2000-2002 Philip Craig.
All Rights Reserved.

Runtime Environment -
   OS Version: Unix 2.6.18.8
  CLR Version: 2.0.50727.42 ( Mono 20071121 )

Stacktrace:

  at (wrapper managed-to-native) System.Diagnostics.Process.GetModules_internal
(intptr) &lt;0x0000b&gt;
  at (wrapper managed-to-native) System.Diagnostics.Process.GetModules_internal
(intptr) &lt;0xffffffff&gt;
  at System.Diagnostics.Process.get_Modules () [0x0000b] in
/home/scott/monosrc/mono-20071121/mono-20071121/mcs/class/System/System.Diagnostics/Process.cs:332
  at System.Diagnostics.Process.get_MainModule () [0x00000] in
/home/scott/monosrc/mono-20071121/mono-20071121/mcs/class/System/System.Diagnostics/Process.cs:233
  at (wrapper remoting-invoke-with-check)
System.Diagnostics.Process.get_MainModule () &lt;0xffffffff&gt;
  at NUnit.Util.DomainManager.CreateDomain (NUnit.Core.TestPackage) &lt;0x006f9&gt;
  at NUnit.Util.TestDomain.Load (NUnit.Core.TestPackage) &lt;0x00040&gt;
  at NUnit.Util.MultipleTestDomainRunner.Load (NUnit.Core.TestPackage)
&lt;0x0084d&gt;
  at NUnit.ConsoleRunner.ConsoleUi.MakeRunnerFromCommandLine
(NUnit.ConsoleRunner.ConsoleOptions) &lt;0x00412&gt;
  at NUnit.ConsoleRunner.ConsoleUi.Execute (NUnit.ConsoleRunner.ConsoleOptions)
&lt;0x00231&gt;
  at NUnit.ConsoleRunner.Runner.Main (string[]) &lt;0x00278&gt;
  at NUnit.ConsoleRunner.Class1.Main (string[]) &lt;0x00019&gt;
  at (wrapper runtime-invoke)
NUnit.ConsoleRunner.Class1.runtime_invoke_int_string[]
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

        mono [0x526d11]
        mono [0x43bcad]
        /lib64/libpthread.so.0 [0x36ea40dd20]
        mono [0x5357c3]
        mono [0x535977]
        mono [0x533ffb]
        mono [0x534630]
        [0x40301269]

Debug info from gdb:

Using host libthread_db library &quot;/lib64/libthread_db.so.1&quot;.
[Thread debugging using libthread_db enabled]
[New Thread 46912496268912 (LWP 28929)]
[New Thread 1079138640 (LWP 28932)]
[New Thread 1075988816 (LWP 28931)]
[New Thread 1073887568 (LWP 28930)]
0x00000036e98c9ad2 in __select_nocancel () from /lib64/libc.so.6
  4 Thread 1073887568 (LWP 28930)  0x00000036ea40d3d1 in __nanosleep_nocancel
    () from /lib64/libpthread.so.0
  3 Thread 1075988816 (LWP 28931)  0x00000036ea40a3a6 in
pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
  2 Thread 1079138640 (LWP 28932)  0x00000036ea40a597 in
pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
  1 Thread 46912496268912 (LWP 28929)  0x00000036e98c9ad2 in __select_nocancel
    () from /lib64/libc.so.6

Thread 4 (Thread 1073887568 (LWP 28930)):
#0  0x00000036ea40d3d1 in __nanosleep_nocancel () from /lib64/libpthread.so.0
#1  0x00000000004cb7ef in collection_thread (unused=&lt;value optimized out&gt;)
    at collection.c:34
#2  0x00000036ea4061c5 in start_thread () from /lib64/libpthread.so.0
#3  0x00000036e98d062d in clone () from /lib64/libc.so.6
#4  0x0000000000000000 in ?? ()

Thread 3 (Thread 1075988816 (LWP 28931)):
#0  0x00000036ea40a3a6 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib64/libpthread.so.0
#1  0x00000000004c35d5 in timedwait_signal_poll_cond (cond=0x2aaaaf14f268,
    mutex=0x2aaaaf14f240, timeout=0x5, alertable=-1) at handles.c:1443
#2  0x00000000004c5b6d in _wapi_handle_timedwait_signal_handle (
    handle=&lt;value optimized out&gt;, timeout=0x0, alertable=-1357581760)
    at handles.c:1523
#3  0x00000000004d3a8b in WaitForSingleObjectEx (handle=0x404,
    timeout=4294967295, alertable=0) at wait.c:200
#4  0x00000000004c09e1 in finalizer_thread (unused=&lt;value optimized out&gt;)
    at gc.c:888
#5  0x00000000004b6863 in start_wrapper (data=&lt;value optimized out&gt;)
    at threads.c:550
#6  0x00000000004cf627 in thread_start_routine (args=0x2aaaaf1b63f0)
    at threads.c:264
#7  0x00000000004e25a2 in GC_start_routine (arg=&lt;value optimized out&gt;)
    at pthread_support.c:1369
#8  0x00000036ea4061c5 in start_thread () from /lib64/libpthread.so.0
#9  0x00000036e98d062d in clone () from /lib64/libc.so.6
#10 0x0000000000000000 in ?? ()

Thread 2 (Thread 1079138640 (LWP 28932)):
#0  0x00000036ea40a597 in pthread_cond_timedwait@@GLIBC_2.3.2 ()
   from /lib64/libpthread.so.0
#1  0x00000000004c35c0 in timedwait_signal_poll_cond (cond=0x2aaaaf14f510,
    mutex=0x2aaaaf14f4e8, timeout=0x40524bf0, alertable=&lt;value optimized out&gt;)
    at handles.c:1453
#2  0x00000000004c5b6d in _wapi_handle_timedwait_signal_handle (
    handle=&lt;value optimized out&gt;, timeout=0x40524bf0, alertable=-1357581080)
    at handles.c:1523
#3  0x00000000004d3944 in WaitForSingleObjectEx (handle=0x409, timeout=9992,
    alertable=1) at wait.c:202
#4  0x00000000004b47e3 in
ves_icall_System_Threading_WaitHandle_WaitOne_internal (this=&lt;value optimized
out&gt;, handle=0x409, ms=9992,
    exitContext=&lt;value optimized out&gt;) at threads.c:1328
#5  0x000000004031960c in ?? ()
#6  0x00000000403194eb in ?? ()
#7  0x0000000040524ff8 in ?? ()
#8  0x0000000040524d30 in ?? ()
#9  0x0000000040524c20 in ?? ()
#10 0x000000000fc435a0 in ?? ()
#11 0x0000000040525948 in ?? ()
#12 0x00002aaaafde6b18 in ?? ()
#13 0x000000004031959e in ?? ()
#14 0x0000000040524ff8 in ?? ()
#15 0x0000000040524d30 in ?? ()
#16 0x0000000040524c50 in ?? ()
#17 0x00002aaaaf9caaf0 in ?? ()
#18 0x08c9fa6ebd6f4e8a in ?? ()
#19 0x0000000000000000 in ?? ()

Thread 1 (Thread 46912496268912 (LWP 28929)):
#0  0x00000036e98c9ad2 in __select_nocancel () from /lib64/libc.so.6
#1  0x00000036f005603e in g_spawn_sync () from /lib64/libglib-2.0.so.0
#2  0x00000036f0056408 in g_spawn_command_line_sync ()
   from /lib64/libglib-2.0.so.0
#3  0x0000000000526da8 in mono_handle_native_sigsegv (
    signal=&lt;value optimized out&gt;, ctx=&lt;value optimized out&gt;)
    at mini-exceptions.c:1061
#4  0x000000000043bcad in mono_arch_handle_altstack_exception (
    sigctx=0x2aaaaea53c40, fault_addr=&lt;value optimized out&gt;, stack_ovf=0)
    at exceptions-amd64.c:845
#5  &lt;signal handler called&gt;
#6  find_pe_file_resources (file_map=0x2aaab4000000, map_size=4608, res_id=16,
    lang_id=0, size=0x7fff6deb2518) at versioninfo.c:166
#7  0x0000000000535977 in GetFileVersionInfoSize (
    filename=&lt;value optimized out&gt;, handle=&lt;value optimized out&gt;)
    at versioninfo.c:315
#8  0x0000000000533ffb in process_get_fileversion (filever=0x2aaaafd24888,
    filename=0x7fff6deb48b0) at process.c:250
#9  0x0000000000534630 in
ves_icall_System_Diagnostics_Process_GetModules_internal (this=&lt;value optimized
out&gt;, process=0x402) at process.c:357
#10 0x0000000040301269 in ?? ()
#11 0x00007fff6deb4b90 in ?? ()
#12 0x0000000000000402 in ?? ()
#13 0x000000000f790490 in ?? ()
#14 0x00002aaaaaacf668 in ?? ()
#15 0x00000000004e9980 in GC_init_headers ()
#16 0x000000004030120b in ?? ()
#17 0x00002aaaaea4c900 in ?? ()
#18 0x00002aaaaf72d500 in ?? ()
#19 0x00007fff6deb4b20 in ?? ()
#20 0x00002aaaafda1f70 in ?? ()
#21 0x00002aaaaf9c8d20 in ?? ()
#22 0x00002aaaaea4ce40 in ?? ()
#23 0x00002aaaaea4ce40 in ?? ()
#24 0x00000000403011e7 in ?? ()
#25 0x00002aaaaf72d500 in ?? ()
#26 0x0000000040301159 in ?? ()
#27 0x00002aaaafda1f70 in ?? ()
#28 0x00002aaaaf9c8d20 in ?? ()
#29 0x00002aaaaea4ce40 in ?? ()
#30 0x00002aaaaea4ce40 in ?? ()
#31 0x000000000fc8eb50 in ?? ()
#32 0x0000000040301108 in ?? ()
#33 0x00002aaaaf72d500 in ?? ()
#34 0x00000000403010e3 in ?? ()
#35 0x00002aaaaea4ce40 in ?? ()
#36 0x00000000403010b2 in ?? ()
#37 0x00002aaaaf72d500 in ?? ()
#38 0x00000000403010a4 in ?? ()
#39 0x00002aaaafd9de70 in ?? ()
#40 0x0000000000000000 in ?? ()
#0  0x00000036e98c9ad2 in __select_nocancel () from /lib64/libc.so.6


=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================

Aborted


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065729.html">[Mono-bugs] [Bug 343342] [Regression] InvOpEx in GDIPlus.CheckStatus from ImageAnimator .CanAnimate on attached image
</A></li>
	<LI>Next message: <A HREF="065646.html">[Mono-bugs] [Bug 343353] nunit-console. exe crashes under the current development build 20071121
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65641">[ date ]</a>
              <a href="thread.html#65641">[ thread ]</a>
              <a href="subject.html#65641">[ subject ]</a>
              <a href="author.html#65641">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
