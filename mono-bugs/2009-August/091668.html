<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 531983] New: Application crashes when i do undoing data in text boxes.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20531983%5D%20New%3A%20Application%20crashes%20when%20i%20do%20undoing%0A%20data%20in%20text%20boxes.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="091666.html">
   <LINK REL="Next"  HREF="091669.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 531983] New: Application crashes when i do undoing data in text boxes.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20531983%5D%20New%3A%20Application%20crashes%20when%20i%20do%20undoing%0A%20data%20in%20text%20boxes.&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 531983] New: Application crashes when i do undoing data in text boxes.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Aug 18 03:44:07 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="091666.html">[Mono-bugs] [Bug 421336] DbCommandBuilder throws exceptions on	command creation
</A></li>
        <LI>Next message: <A HREF="091669.html">[Mono-bugs] [Bug 531983] Application crashes when i do undoing data in text boxes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#91668">[ date ]</a>
              <a href="thread.html#91668">[ thread ]</a>
              <a href="subject.html#91668">[ subject ]</a>
              <a href="author.html#91668">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=531983">http://bugzilla.novell.com/show_bug.cgi?id=531983</A>


           Summary: Application crashes when i do undoing data in text
                    boxes.
    Classification: Mono
           Product: Mono: Class Libraries
           Version: unspecified
          Platform: All
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">incubator125 at hotmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=313430)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=313430">http://bugzilla.novell.com/attachment.cgi?id=313430</A>)
test application

User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US)
AppleWebKit/530.5 (KHTML, like Gecko) Chrome/2.0.172.37 Safari/530.5

My Test application contains two text boxes in which, one is &quot;multiline=true&quot;
and in other &quot;multiline=false&quot;. When i do undoing data in text boxes the
application throws an error and crashes.


Reproducible: Always

Steps to Reproduce:
1.Paste some data(i tried the above test data) in the first text box.
2.select last few words in the text box.
3.click backspace or delete button to delete data.
4.again click backspace
5.press ctrl+z then it will throw error and application crashes.
Actual Results:  
Case 1 (Textbox with multiline=false) :

Exception which i got,

System.ArgumentOutOfRangeException: Argument is out of range.
  at System.Text.StringBuilder.ToString (Int32 startIndex, Int32 length)
[0x00000] 
  at System.Windows.Forms.Document.Split (System.Windows.Forms.Line line,
System.Windows.Forms.LineTag tag, Int32 pos) [0x00000] 
  at System.Windows.Forms.Document.Split (System.Windows.Forms.Line line, Int32
pos) [0x00000] 
  at System.Windows.Forms.UndoManager.Insert (System.Windows.Forms.Line line,
Int32 pos, System.Windows.Forms.Line insert, Boolean select) [0x00000] 
  at System.Windows.Forms.UndoManager.Undo () [0x00000] 
  at System.Windows.Forms.TextBoxBase.Undo () [0x00000] 
  at System.Windows.Forms.TextBoxBase.ProcessKey (Keys keyData) [0x00000] 
  at System.Windows.Forms.TextBoxBase.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] 
  at System.Windows.Forms.TextBox.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x00000] 


Case 2 (Textbox with multiline=true):

Throws error and application crahes.

Exception,

System.NullReferenceException: Object reference not set to an instance of an
object
  at System.Windows.Forms.UndoManager.Insert (System.Windows.Forms.Line line,
Int32 pos, System.Windows.Forms.Line insert, Boolean select) [0x00000] 
  at System.Windows.Forms.UndoManager.Undo () [0x00000] 
  at System.Windows.Forms.TextBoxBase.Undo () [0x00000] 
  at System.Windows.Forms.TextBoxBase.ProcessKey (Keys keyData) [0x00000] 
  at System.Windows.Forms.TextBoxBase.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] 
  at System.Windows.Forms.TextBox.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x00000]

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="091666.html">[Mono-bugs] [Bug 421336] DbCommandBuilder throws exceptions on	command creation
</A></li>
	<LI>Next message: <A HREF="091669.html">[Mono-bugs] [Bug 531983] Application crashes when i do undoing data in text boxes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#91668">[ date ]</a>
              <a href="thread.html#91668">[ thread ]</a>
              <a href="subject.html#91668">[ subject ]</a>
              <a href="author.html#91668">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
