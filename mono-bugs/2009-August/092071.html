<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 535449] New: XmlNodeList is reevaluated during	iteration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20535449%5D%20New%3A%20XmlNodeList%20is%20reevaluated%20during%0A%09iteration&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="092069.html">
   <LINK REL="Next"  HREF="092091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 535449] New: XmlNodeList is reevaluated during	iteration</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20535449%5D%20New%3A%20XmlNodeList%20is%20reevaluated%20during%0A%09iteration&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 535449] New: XmlNodeList is reevaluated during	iteration">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Aug 29 13:38:15 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="092069.html">[Mono-bugs] [Bug 535448] New: gmcs HEAD miscompile	Gendarme.Rules.Design.dll
</A></li>
        <LI>Next message: <A HREF="092091.html">[Mono-bugs] [Bug 535449] XmlNodeList is reevaluated during iteration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92071">[ date ]</a>
              <a href="thread.html#92071">[ thread ]</a>
              <a href="subject.html#92071">[ subject ]</a>
              <a href="author.html#92071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=535449">http://bugzilla.novell.com/show_bug.cgi?id=535449</A>


           Summary: XmlNodeList is reevaluated during iteration
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.4.x
          Platform: Macintosh
        OS/Version: Mac OS X 10.5
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.XML
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">richard.hubers at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US;
rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2

The attached program creates an XmlDocument and loads it with XML. From this
XmlDocument two nodes are selected. They are iterated twice. During the second
iteration of these nodes, the nodes are cloned and the new node is added to the
parent of the node. While the original nodes are not touched (only their
parents are), the collection of nodes is changed during iteration (which
results in an endless loop), possibly because the new nodes conform to the
XPath expression which was used to obtain the XmlNodeList in the first place.
(This is confirmed when adding '[position() &lt;= 2]' to the XPath expression;
then the results are as expected).

Reproducible: Always

Steps to Reproduce:
1. Compile and run the source code provided in the attachment
Actual Results:  
(Console output on Mac OS 10.5)
Nodes: 2
&lt;child a=&quot;1&quot; /&gt;
&lt;child a=&quot;2&quot; /&gt;
&lt;child a=&quot;1&quot; /&gt;
&lt;child a=&quot;1&quot; /&gt;
&lt;child a=&quot;1&quot; /&gt;
&lt;child a=&quot;1&quot; /&gt;
&lt;child a=&quot;1&quot; /&gt;
&lt;child a=&quot;1&quot; /&gt;
&lt;child a=&quot;1&quot; /&gt;
..

Expected Results:  
(Console output on Microsoft .NET 3.5 SP1)
Nodes: 2
&lt;child a=&quot;1&quot; /&gt;
&lt;child a=&quot;2&quot; /&gt;
&lt;child a=&quot;1&quot; /&gt;
&lt;child a=&quot;2&quot; /&gt;
&lt;root&gt;&lt;child a=&quot;1&quot; /&gt;&lt;child a=&quot;1&quot; /&gt;&lt;child a=&quot;2&quot; /&gt;&lt;child a=&quot;2&quot; /&gt;&lt;/root&gt;

This bug seems similar to <A HREF="https://bugzilla.novell.com/show_bug.cgi?id=495693.">https://bugzilla.novell.com/show_bug.cgi?id=495693.</A>

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="092069.html">[Mono-bugs] [Bug 535448] New: gmcs HEAD miscompile	Gendarme.Rules.Design.dll
</A></li>
	<LI>Next message: <A HREF="092091.html">[Mono-bugs] [Bug 535449] XmlNodeList is reevaluated during iteration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92071">[ date ]</a>
              <a href="thread.html#92071">[ thread ]</a>
              <a href="subject.html#92071">[ subject ]</a>
              <a href="author.html#92071">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
