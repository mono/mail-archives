<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 530588] Remoting doesn't handle types with multiple fields with the same name correctly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20530588%5D%20Remoting%20doesn%27t%20handle%20types%20with%0A%20multiple%20fields%20with%20the%20same%20name%20correctly&In-Reply-To=bug-530588-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="091502.html">
   <LINK REL="Next"  HREF="092072.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 530588] Remoting doesn't handle types with multiple fields with the same name correctly</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20530588%5D%20Remoting%20doesn%27t%20handle%20types%20with%0A%20multiple%20fields%20with%20the%20same%20name%20correctly&In-Reply-To=bug-530588-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 530588] Remoting doesn't handle types with multiple fields with the same name correctly">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Aug 29 13:19:52 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="091502.html">[Mono-bugs] [Bug 530588] New: Remoting doesn't handle types with multiple fields with the same name correctly
</A></li>
        <LI>Next message: <A HREF="092072.html">[Mono-bugs] [Bug 530588] Remoting doesn't handle types with multiple fields with the same name correctly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92070">[ date ]</a>
              <a href="thread.html#92070">[ thread ]</a>
              <a href="subject.html#92070">[ subject ]</a>
              <a href="author.html#92070">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=530588">http://bugzilla.novell.com/show_bug.cgi?id=530588</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">robertj at gmx.net</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=530588#c1">http://bugzilla.novell.com/show_bug.cgi?id=530588#c1</A>


Robert Jordan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">robertj at gmx.net</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">robertj at gmx.net</A>




--- Comment #1 from Robert Jordan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">robertj at gmx.net</A>&gt;  2009-08-29 11:19:45 MDT ---
Unfortunately, there is no way to pass the field type across app domains in a
compatible manner with MS.NET.

Have a look at the signatures:

void FieldGetter (string typeName, string fieldName, ref object val);
void FieldSetter (string typeName, string fieldName, object val);

typeName is redundant in Mono, but MS.NET is relying on the type name being the
type of the *instance* the method is called on.

In Mono we could misuse typeName to carry the field type name, but this would
break the compatibility with MS.NET.



BTW, your sample is raising this exception under MS.NET:

Unhandled Exception: System.Reflection.AmbiguousMatchException: Ambiguous match
found.
   at System.RuntimeType.GetField(String name, BindingFlags bindingAttr)
   at System.Object.GetFieldInfo(String typeName, String fieldName)
   at System.Object.FieldGetter(String typeName, String fieldName, Object&amp; val)
   at System.Object.FieldGetter(String typeName, String fieldName, Object&amp; val)
   at Driver.Main()

while Mono raises an InvalidCastException, because Mono's GetField does not
check for ambiguous field names.

This is probably due to MS own LAMESPEC since MSDN's GetField docs do not
specify that AmbiguousMatchException is ever thrown.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="091502.html">[Mono-bugs] [Bug 530588] New: Remoting doesn't handle types with multiple fields with the same name correctly
</A></li>
	<LI>Next message: <A HREF="092072.html">[Mono-bugs] [Bug 530588] Remoting doesn't handle types with multiple fields with the same name correctly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92070">[ date ]</a>
              <a href="thread.html#92070">[ thread ]</a>
              <a href="subject.html#92070">[ subject ]</a>
              <a href="author.html#92070">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
