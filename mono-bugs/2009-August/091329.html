<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 529206] New: More behaviour differences between .NET and Mono versions of System.Text.RegularExpressions.Regex class.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20529206%5D%20New%3A%20More%20behaviour%20differences%20between%0A%20.NET%20and%20Mono%20versions%20of%20System.Text.RegularExpressions.Regex%20class.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="091322.html">
   <LINK REL="Next"  HREF="091332.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 529206] New: More behaviour differences between .NET and Mono versions of System.Text.RegularExpressions.Regex class.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20529206%5D%20New%3A%20More%20behaviour%20differences%20between%0A%20.NET%20and%20Mono%20versions%20of%20System.Text.RegularExpressions.Regex%20class.&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 529206] New: More behaviour differences between .NET and Mono versions of System.Text.RegularExpressions.Regex class.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Aug  7 09:46:21 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="091322.html">[Mono-bugs] [Bug 512807] DataGridView poor performance for moderate number of records (1000) makes it unusable
</A></li>
        <LI>Next message: <A HREF="091332.html">[Mono-bugs] [Bug 529218] New: mtouch reports an error while linking (Unable to attach to process-id 1814: Resource busy (16))
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#91329">[ date ]</a>
              <a href="thread.html#91329">[ thread ]</a>
              <a href="subject.html#91329">[ subject ]</a>
              <a href="author.html#91329">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=529206">http://bugzilla.novell.com/show_bug.cgi?id=529206</A>


           Summary: More behaviour differences between .NET and Mono
                    versions of System.Text.RegularExpressions.Regex
                    class.
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.0.x
          Platform: x86-64
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jimteeuwen at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.0.13)
Gecko/2009080315 Ubuntu/9.04 (jaunty) Firefox/3.0.13

The bug list already has a number of entries related to the Regex class not
behaving as it should, but I have not encountered an entry detailing the
inconsistent behaviour of it's Replace() method. So here goes..

It appears that Mono's Regex.Replace(input, pattern, replacement) method only
replaces a number of characters equal to the length of the matched string,
while it should completely replace &lt;match&gt; with &lt;replacement&gt;, regardless of
either string's length.

For example:
[code]
using System;
using System.Text.RegularExpressions;

namespace Test
{
    static class Entry
    {
        static void Main(string[] args)
        {
            string mystr = &quot;cookies rock and stuff&quot;;

            // This should replace each /single/ whitespace character with
'___'
            mystr = Regex.Replace(mystr, @&quot;\s&quot;, &quot;___&quot;);

            Console.WriteLine(mystr);
            Console.Read();
        }
    }
}
[/code]

The above code should replace each occurrence of a whitespace character with
'___'. This means that the resulting string after the replacement is larger in
length than the original input string. This works as expected in .NET, but Mono
seems to want to retain the input string's original size and thus only replaces
a number of characters equal to the length of the match that was found.

In the above example, each match will only consist of a single space ' '. 
The replacement will therefor only be done on a single character, and thus
change ' ' into '_'. This is incorrect behaviour.

Reproducible: Always

Steps to Reproduce:
1. Paste the code listed above in a new sourcefile named 'regextest.cs'
2. compile with: csc regextest.cs /out=regextest.exe
3. Run with: ./regextest.exe

Actual Results:  
cookes_rock_and_stuff

Expected Results:  
cookes___rock___and___stuff

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="091322.html">[Mono-bugs] [Bug 512807] DataGridView poor performance for moderate number of records (1000) makes it unusable
</A></li>
	<LI>Next message: <A HREF="091332.html">[Mono-bugs] [Bug 529218] New: mtouch reports an error while linking (Unable to attach to process-id 1814: Resource busy (16))
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#91329">[ date ]</a>
              <a href="thread.html#91329">[ thread ]</a>
              <a href="subject.html#91329">[ subject ]</a>
              <a href="author.html#91329">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
