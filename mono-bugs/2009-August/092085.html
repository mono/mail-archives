<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 531890] Object serialization fails when using	GZipStream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20531890%5D%20Object%20serialization%20fails%20when%20using%0A%09GZipStream&In-Reply-To=bug-531890-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="092084.html">
   <LINK REL="Next"  HREF="091656.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 531890] Object serialization fails when using	GZipStream</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20531890%5D%20Object%20serialization%20fails%20when%20using%0A%09GZipStream&In-Reply-To=bug-531890-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 531890] Object serialization fails when using	GZipStream">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Aug 30 13:48:12 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="092084.html">[Mono-bugs] [Bug 531890] Object serialization fails when using	GZipStream
</A></li>
        <LI>Next message: <A HREF="091656.html">[Mono-bugs] [Bug 531926] New: BeforeBuild/AfterBuild Targets missing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92085">[ date ]</a>
              <a href="thread.html#92085">[ thread ]</a>
              <a href="subject.html#92085">[ subject ]</a>
              <a href="author.html#92085">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=531890">http://bugzilla.novell.com/show_bug.cgi?id=531890</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gonzalo at novell.com</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=531890#c5">http://bugzilla.novell.com/show_bug.cgi?id=531890#c5</A>





--- Comment #5 from Gonzalo Paniagua Javier &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gonzalo at novell.com</A>&gt;  2009-08-30 11:48:07 MDT ---
Also, you should call Close() in GZipStream, both when compressing and
decompressing. There's one unmanaged for each stream that is not freed until
you call Close or the GC disposes the stream.

Given the code that you have, if you want to &quot;reuse&quot; the MemoryStream and still
be able to call Close() on the GZipStream, I would do something like:

       compressStream.Flush ();
       MemoryStream gzinput = new MemoryStream (saveStream.GetBuffer (), 0,
saveStream.Length);
       compressStream.Close ();
       BinaryFormatter reader = new BinaryFormatter();
       var compressedStream = new GZipStream(gzinput,
CompressionMode.Decompress );
.........

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="092084.html">[Mono-bugs] [Bug 531890] Object serialization fails when using	GZipStream
</A></li>
	<LI>Next message: <A HREF="091656.html">[Mono-bugs] [Bug 531926] New: BeforeBuild/AfterBuild Targets missing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92085">[ date ]</a>
              <a href="thread.html#92085">[ thread ]</a>
              <a href="subject.html#92085">[ subject ]</a>
              <a href="author.html#92085">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
