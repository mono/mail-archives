<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 535490] New: System.Xml.XmlConvert.EncodeName (string) causes SIGSEGV
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20535490%5D%20New%3A%20System.Xml.XmlConvert.EncodeName%0A%20%28string%29%20causes%20SIGSEGV&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="092080.html">
   <LINK REL="Next"  HREF="092088.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 535490] New: System.Xml.XmlConvert.EncodeName (string) causes SIGSEGV</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20535490%5D%20New%3A%20System.Xml.XmlConvert.EncodeName%0A%20%28string%29%20causes%20SIGSEGV&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 535490] New: System.Xml.XmlConvert.EncodeName (string) causes SIGSEGV">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Aug 30 19:08:13 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="092080.html">[Mono-bugs] [Bug 535464] New: Please can you bind CoreAudio
</A></li>
        <LI>Next message: <A HREF="092088.html">[Mono-bugs] [Bug 535490] System.Xml.XmlConvert.EncodeName (string) causes SIGSEGV
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92087">[ date ]</a>
              <a href="thread.html#92087">[ thread ]</a>
              <a href="subject.html#92087">[ subject ]</a>
              <a href="author.html#92087">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=535490">http://bugzilla.novell.com/show_bug.cgi?id=535490</A>


           Summary: System.Xml.XmlConvert.EncodeName (string) causes
                    SIGSEGV
    Classification: Mono
           Product: MonoTouch
           Version: unspecified
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: Runtime
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">fak at kruegersystems.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Description of Problem:

When trying to parse some HTML, the app crashes with SIGSEGV.

Steps to reproduce the problem:
1. Click the button

Actual Results:

-- System.Text.UTF8Encoding
Stacktrace:

  at System.Xml.XmlConvert.EncodeName (string) &lt;IL 0x00008, 0xffffffff&gt;
  at System.Xml.XmlConvert.EncodeName (string) &lt;IL 0x00002, 0x00013&gt;
  at Sgml.SgmlReader.get_Name () &lt;IL 0x00014, 0x00022&gt;
  at Sgml.SgmlReader.get_Prefix () &lt;IL 0x00001, 0x00013&gt;
  at System.Xml.XmlDocument.ReadAttributeNode (System.Xml.XmlReader) &lt;IL
0x00038, 0x0005e&gt;
  at System.Xml.XmlDocument.ReadNodeCore (System.Xml.XmlReader) &lt;IL 0x00140,
0x00296&gt;
  at System.Xml.XmlDocument.ReadNodeCore (System.Xml.XmlReader) &lt;IL 0x00194,
0x00341&gt;
  at System.Xml.XmlDocument.ReadNodeCore (System.Xml.XmlReader) &lt;IL 0x00194,
0x00341&gt;
  at System.Xml.XmlDocument.ReadNode (System.Xml.XmlReader) &lt;IL 0x0004e,
0x000dc&gt;
  at System.Xml.XmlDocument.Load (System.Xml.XmlReader) &lt;IL 0x0001b, 0x00054&gt;
  at K.Html.Linq.HDocument.Load (System.IO.Stream,System.Text.Encoding) &lt;IL
0x00036, 0x000e9&gt;
  at K.Html.Linq.HDocument.Load (System.Net.WebResponse) &lt;IL 0x00073, 0x001b4&gt;
  at Touch.AppDelegate.&lt;FinishedLaunching&gt;m__0 (object,System.EventArgs) &lt;IL
0x00017, 0x00049&gt;
  at MonoTouch.UIKit.UIControlEventProxy.Activated () &lt;IL 0x00011, 0x0001e&gt;
  at (wrapper runtime-invoke) object.runtime_invoke_void__this__
(object,intptr,intptr,intptr) &lt;IL 0x00043, 0xffffffff&gt;
  at (wrapper managed-to-native)
MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr)
&lt;0x00004&gt;
  at (wrapper managed-to-native)
MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr)
&lt;IL 0x0009f, 0xffffffff&gt;
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) &lt;IL 0x0003e,
0x00089&gt;
  at MonoTouch.UIKit.UIApplication.Main (string[]) &lt;IL 0x00003, 0x00014&gt;
  at Touch.Application.Main (string[]) &lt;IL 0x00001, 0x00010&gt;
  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_void_object
(object,intptr,intptr,intptr) &lt;IL 0x00044, 0xffffffff&gt;

Native stacktrace:

    0   Touch                               0x000928ea
mono_handle_native_sigsegv + 266
    1   Touch                               0x000065fa
mono_sigsegv_signal_handler + 298
    2   libSystem.B.dylib                   0x969702bb _sigtramp + 43
    3   ???                                 0xffffffff 0x0 + 4294967295

Debug info from gdb:

warning: Trying to remove a section from the ordered section list that did not
exist at 0x2d2000.
warning: Could not find object file
&quot;/var/folders/C7/C7HobBM7HAiDv0Unwiqeqk+++TI/-Tmp-/tmp450598fe.tmp/main.o&quot; - no
debug information available for
&quot;/var/folders/C7/C7HobBM7HAiDv0Unwiqeqk+++TI/-Tmp-/tmp450598fe.tmp/main.m&quot;.

Symbol file /Users/fak/Library/Application Support/iPhone
Simulator/User/Applications/811C8A00-E6D3-4E1B-87C8-3AA8E51AA451/Touch.app/mscorlib.dll.mdb
doesn't match image /Users/fak/Library/Application Support/iPhone
Simulator/User/Applications/811C8A00-E6D3-4E1B-87C8-3AA8E51AA451/Touch.app/mscorlib.dllSymbol
file /Users/fak/Library/Application Support/iPhone
Simulator/User/Applications/811C8A00-E6D3-4E1B-87C8-3AA8E51AA451/Touch.app/Touch.exe.mdb
doesn't match image /Users/fak/Library/Application Support/iPhone
Simulator/User/Applications/811C8A00-E6D3-4E1B-87C8-3AA8E51AA451/Touch.app/Touch.exeSymbol
file /Users/fak/Library/Application Support/iPhone
Simulator/User/Applications/811C8A00-E6D3-4E1B-87C8-3AA8E51AA451/Touch.app/monotouch.dll.mdb
doesn't match image /Users/fak/Library/Application Support/iPhone
Simulator/User/Applications/811C8A00-E6D3-4E1B-87C8-3AA8E51AA451/Touch.app/monotouch.dllSymbol
file /Users/fak/Library/Application Support/iPhone
Simulator/User/Applications/811C8A00-E6D3-4E1B-87C8-3AA8E51AA451/Touch.app/System.dll.mdb
doesn't match image /Users/fak/Library/Application Support/iPhone
Simulator/User/Applications/811C8A00-E6D3-4E1B-87C8-3AA8E51AA451/Touch.app/System.dllSymbol
file /Users/fak/Library/Application Support/iPhone
Simulator/User/Applications/811C8A00-E6D3-4E1B-87C8-3AA8E51AA451/Touch.app/System.Xml.dll.mdb
doesn't match image /Users/fak/Library/Application Support/iPhone
Simulator/User/Applications/811C8A00-E6D3-4E1B-87C8-3AA8E51AA451/Touch.app/System.Xml.dllAttaching
to process 1991.
Reading symbols for shared libraries . done
Reading symbols for shared libraries ......................................
done
0x96927f95 in read$UNIX2003 ()
  10 process 1991 thread 0x5903  0x9690b46e in __semwait_signal ()
  9 process 1991 thread 0x5703  0x9690b46e in __semwait_signal ()
  8 process 1991 thread 0x5403  0x9696ae0e in poll$UNIX2003 ()
  7 process 1991 thread 0x5103  0x9690b46e in __semwait_signal ()
  6 process 1991 thread 0x4e03  0x9690b46e in __semwait_signal ()
  5 process 1991 thread 0x2703  0x96904286 in mach_msg_trap ()
  4 process 1991 thread 0x2603  0x969042c2 in semaphore_wait_trap ()
  3 process 1991 thread 0x2203  0x9690b46e in __semwait_signal ()
  2 process 1991 thread 0x1103  0x96904286 in mach_msg_trap ()
* 1 process 1991 thread 0x20b  0x96927f95 in read$UNIX2003 ()

Thread 10 (process 1991 thread 0x5903):
#0  0x9690b46e in __semwait_signal ()
#1  0x969363e6 in _pthread_cond_wait ()
#2  0x9695b9f8 in pthread_cond_timedwait$UNIX2003 ()
#3  0x001abfa2 in _wapi_handle_timedwait_signal_handle (handle=0x157d0b4,
timeout=0xb0712df8, alertable=1, poll=0) at
./../../../mono/io-layer/handles.c:1608
#4  0x001c0bdd in WaitForSingleObjectEx (handle=0x157d0b4, timeout=1000,
alertable=1) at ../../../../mono/io-layer/wait.c:207
#5  0x0018772f in async_invoke_thread (data=0xb0713000) at
./../../../mono/metadata/threadpool.c:1470
#6  0x0018ef96 in start_wrapper (data=0x4946770) at
./../../../mono/metadata/threads.c:657
#7  0x001c34f6 in thread_start_routine (args=0x157d890) at
./../../../mono/io-layer/wthreads.c:286
#8  0x001eda9c in GC_start_routine (arg=0x47cff00) at
./../../libgc/pthread_support.c:1390
#9  0x96935155 in _pthread_start ()
#10 0x96935012 in thread_start ()

Thread 9 (process 1991 thread 0x5703):
#0  0x9690b46e in __semwait_signal ()
#1  0x969363e6 in _pthread_cond_wait ()
#2  0x9695b9f8 in pthread_cond_timedwait$UNIX2003 ()
#3  0x001abfa2 in _wapi_handle_timedwait_signal_handle (handle=0x157d684,
timeout=0xb0610e08, alertable=1, poll=0) at
./../../../mono/io-layer/handles.c:1608
#4  0x001c0bdd in WaitForSingleObjectEx (handle=0x157d684, timeout=1000,
alertable=1) at ../../../../mono/io-layer/wait.c:207
#5  0x001873bb in async_invoke_io_thread (data=0x0) at
./../../../mono/metadata/threadpool.c:343
#6  0x0018ef96 in start_wrapper (data=0x4918ba0) at
./../../../mono/metadata/threads.c:657
#7  0x001c34f6 in thread_start_routine (args=0x157d798) at
./../../../mono/io-layer/wthreads.c:286
#8  0x001eda9c in GC_start_routine (arg=0x47cff60) at
./../../libgc/pthread_support.c:1390
#9  0x96935155 in _pthread_start ()
#10 0x96935012 in thread_start ()

Thread 8 (process 1991 thread 0x5403):
#0  0x9696ae0e in poll$UNIX2003 ()
#1  0x001863ba in socket_io_poll_main (p=0x2aeac0) at
./../../../mono/metadata/threadpool.c:475
#2  0x0018ef96 in start_wrapper (data=0x4918ba0) at
./../../../mono/metadata/threads.c:657
#3  0x001c34f6 in thread_start_routine (args=0x157d71c) at
./../../../mono/io-layer/wthreads.c:286
#4  0x001eda9c in GC_start_routine (arg=0x47cff60) at
./../../libgc/pthread_support.c:1390
#5  0x96935155 in _pthread_start ()
#6  0x96935012 in thread_start ()

Thread 7 (process 1991 thread 0x5103):
#0  0x9690b46e in __semwait_signal ()
#1  0x969363e6 in _pthread_cond_wait ()
#2  0x9695b9f8 in pthread_cond_timedwait$UNIX2003 ()
#3  0x001abfa2 in _wapi_handle_timedwait_signal_handle (handle=0x157d0b4,
timeout=0xb040cdf8, alertable=1, poll=0) at
./../../../mono/io-layer/handles.c:1608
#4  0x001c0bdd in WaitForSingleObjectEx (handle=0x157d0b4, timeout=1000,
alertable=1) at ../../../../mono/io-layer/wait.c:207
#5  0x0018772f in async_invoke_thread (data=0xb040d000) at
./../../../mono/metadata/threadpool.c:1470
#6  0x0018ef96 in start_wrapper (data=0x4905780) at
./../../../mono/metadata/threads.c:657
#7  0x001c34f6 in thread_start_routine (args=0x157d52c) at
./../../../mono/io-layer/wthreads.c:286
#8  0x001eda9c in GC_start_routine (arg=0x47cff60) at
./../../libgc/pthread_support.c:1390
#9  0x96935155 in _pthread_start ()
#10 0x96935012 in thread_start ()

Thread 6 (process 1991 thread 0x4e03):
#0  0x9690b46e in __semwait_signal ()
#1  0x9690b2ef in nanosleep$UNIX2003 ()
#2  0x001c212e in SleepEx (ms=500, alertable=0) at
./../../../mono/io-layer/wthreads.c:1027
#3  0x001c21d9 in Sleep (ms=60) at ../../../../mono/io-layer/wthreads.c:1050
#4  0x001871c0 in start_idle_threads (data=0x0) at
./../../../mono/metadata/threadpool.c:1048
#5  0x0018ef96 in start_wrapper (data=0x4905780) at
./../../../mono/metadata/threads.c:657
#6  0x001c34f6 in thread_start_routine (args=0x157d4b0) at
./../../../mono/io-layer/wthreads.c:286
#7  0x001eda9c in GC_start_routine (arg=0x47cff60) at
./../../libgc/pthread_support.c:1390
#8  0x96935155 in _pthread_start ()
#9  0x96935012 in thread_start ()

Thread 5 (process 1991 thread 0x2703):
#0  0x96904286 in mach_msg_trap ()
#1  0x9690ba7c in mach_msg ()
#2  0x30244d62 in CFRunLoopRunSpecific ()
#3  0x30244628 in CFRunLoopRunInMode ()
#4  0x3588ea13 in RunWebThread ()
#5  0x96935155 in _pthread_start ()
#6  0x96935012 in thread_start ()

Thread 4 (process 1991 thread 0x2603):
#0  0x969042c2 in semaphore_wait_trap ()
#1  0x000fdf70 in finalizer_thread (unused=0x0) at
./../../../mono/metadata/gc.c:1014
#2  0x0018ef96 in start_wrapper (data=0x1013ef0) at
./../../../mono/metadata/threads.c:657
#3  0x001c34f6 in thread_start_routine (args=0x157d434) at
./../../../mono/io-layer/wthreads.c:286
#4  0x001eda9c in GC_start_routine (arg=0xe28f60) at
./../../libgc/pthread_support.c:1390
#5  0x96935155 in _pthread_start ()
#6  0x96935012 in thread_start ()

Thread 3 (process 1991 thread 0x2203):
#0  0x9690b46e in __semwait_signal ()
#1  0x9690b2ef in nanosleep$UNIX2003 ()
#2  0x001a5860 in collection_thread (unused=0x0) at
./../../../mono/io-layer/collection.c:34
#3  0x96935155 in _pthread_start ()
#4  0x96935012 in thread_start ()

Thread 2 (process 1991 thread 0x1103):
#0  0x96904286 in mach_msg_trap ()
#1  0x9690ba7c in mach_msg ()
#2  0x000c5fba in mach_exception_thread (arg=0x0) at
./../../../mono/mini/mini-darwin.c:131
#3  0x001eda9c in GC_start_routine (arg=0xe28f60) at
./../../libgc/pthread_support.c:1390
#4  0x96935155 in _pthread_start ()
#5  0x96935012 in thread_start ()

Thread 1 (process 1991 thread 0x20b):
#0  0x96927f95 in read$UNIX2003 ()
#1  0x00092a2a in mono_handle_native_sigsegv (signal=11, ctx=0xbfffd7d4) at
./../../../mono/mini/mini-exceptions.c:1560
#2  0x000065fa in mono_sigsegv_signal_handler (_dummy=11, info=0xbfffd794,
context=0xbfffd7d4) at ../../../../mono/mini/mini.c:4570
#3  &lt;signal handler called&gt;
#4  0x8fe18c02 in __dyld_misaligned_stack_error ()

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================




Expected Results:

Either a nice .NET exception, or it should parse the document.


How often does this happen? 

Always


Additional Information:

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="092080.html">[Mono-bugs] [Bug 535464] New: Please can you bind CoreAudio
</A></li>
	<LI>Next message: <A HREF="092088.html">[Mono-bugs] [Bug 535490] System.Xml.XmlConvert.EncodeName (string) causes SIGSEGV
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#92087">[ date ]</a>
              <a href="thread.html#92087">[ thread ]</a>
              <a href="subject.html#92087">[ subject ]</a>
              <a href="author.html#92087">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
