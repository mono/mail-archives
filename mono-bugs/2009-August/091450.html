<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 320004] in MS.Net 2.0, finally blocks are not interrupted by ThreadAbortExceptions/Interrupt
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20320004%5D%20in%20MS.Net%202.0%2C%0A%20finally%20blocks%20are%20not%20interrupted%20by%0A%20ThreadAbortExceptions/Interrupt&In-Reply-To=bug-320004-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="091449.html">
   <LINK REL="Next"  HREF="091451.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 320004] in MS.Net 2.0, finally blocks are not interrupted by ThreadAbortExceptions/Interrupt</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20320004%5D%20in%20MS.Net%202.0%2C%0A%20finally%20blocks%20are%20not%20interrupted%20by%0A%20ThreadAbortExceptions/Interrupt&In-Reply-To=bug-320004-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 320004] in MS.Net 2.0, finally blocks are not interrupted by ThreadAbortExceptions/Interrupt">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Aug 12 02:54:42 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="091449.html">[Mono-bugs] [Bug 530212] Unable to access named keystores.
</A></li>
        <LI>Next message: <A HREF="091451.html">[Mono-bugs] [Bug 317647] Thread.Interrupt not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#91450">[ date ]</a>
              <a href="thread.html#91450">[ thread ]</a>
              <a href="subject.html#91450">[ subject ]</a>
              <a href="author.html#91450">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=320004">http://bugzilla.novell.com/show_bug.cgi?id=320004</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andrew at it.swin.edu.au</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=320004#c1">http://bugzilla.novell.com/show_bug.cgi?id=320004#c1</A>


Andrew Cain &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andrew at it.swin.edu.au</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
           Priority|P3 - Medium                 |P2 - High
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andrew at it.swin.edu.au</A>
           Platform|Other                       |i386
            Version|1.1                         |2.4.x
         OS/Version|Other                       |Mac OS X 10.5




--- Comment #1 from Andrew Cain &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andrew at it.swin.edu.au</A>&gt;  2009-08-12 00:54:37 MDT ---
Mono 2.4 (2.4.2 on Mac) still exhibits this erroneous behaviour. This makes it
difficult to write reusable thread safe concurrency utilities for Mono as no
protection is offered to code within finally blocks. For example a blocking
buffer using semaphores would need to go to significant extra effort to
guarantee that a token was taken/added to a semaphore on enqueue/dequeue - this
could be done safely using a finally block to ensure the token was taken/added
when the data was successfully enqueued/dequeued.


The new attached code should produce the following (generated from MS.NET):

Try
Pre lock
Interrupt
Done
Abort
Pre Sleep
Post Sleep
Post Lock


but produced the following indicating that the enter of monitor is interrupted
(lock entry):

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="091449.html">[Mono-bugs] [Bug 530212] Unable to access named keystores.
</A></li>
	<LI>Next message: <A HREF="091451.html">[Mono-bugs] [Bug 317647] Thread.Interrupt not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#91450">[ date ]</a>
              <a href="thread.html#91450">[ thread ]</a>
              <a href="subject.html#91450">[ subject ]</a>
              <a href="author.html#91450">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
