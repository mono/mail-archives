<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 394818] New: Type.MakeGenericType(Type[]) crashes the runtime if not matching generic argument count is passed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20394818%5D%20New%3A%20Type.MakeGenericType%28Type%5B%5D%29%20crashes%0A%20the%20runtime%20if%20not%20matching%20generic%20argument%20count%20is%20passed&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074310.html">
   <LINK REL="Next"  HREF="074318.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 394818] New: Type.MakeGenericType(Type[]) crashes the runtime if not matching generic argument count is passed</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20394818%5D%20New%3A%20Type.MakeGenericType%28Type%5B%5D%29%20crashes%0A%20the%20runtime%20if%20not%20matching%20generic%20argument%20count%20is%20passed&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 394818] New: Type.MakeGenericType(Type[]) crashes the runtime if not matching generic argument count is passed">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue May 27 14:35:55 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="074310.html">[Mono-bugs] [Bug 336739] Unable to use GroupWise SOAP WSDL bindings with Mono 1.2.4
</A></li>
        <LI>Next message: <A HREF="074318.html">[Mono-bugs] [Bug 394818] Type.MakeGenericType(Type[]) crashes the runtime if not matching generic argument count is passed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74312">[ date ]</a>
              <a href="thread.html#74312">[ thread ]</a>
              <a href="subject.html#74312">[ subject ]</a>
              <a href="author.html#74312">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=394818">https://bugzilla.novell.com/show_bug.cgi?id=394818</A>


           Summary: Type.MakeGenericType(Type[]) crashes the runtime if not
                    matching generic argument count is passed
           Product: Mono: Runtime
           Version: 1.2.6
          Platform: i686
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: generics
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">meebey at meebey.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=218405)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=218405">https://bugzilla.novell.com/attachment.cgi?id=218405</A>)
test-case to reproduce the runtime crash

Type.MakeGenericType(Type[]) crashes the Mono runtime on generic types that
don't match the generic arguments, see the attached test-case.

I tested this on Mono 1.2.6 and Mono 1.9.1 both crashes.

Here the output of the test-case:

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mirco.bauer at flyinghorse</A>:~$ mono MakeGenericType-crash.exe

** ERROR **: VAR 0 (K) cannot be expanded in this context with 0 instantiations
aborting...
Stacktrace:

  at (wrapper managed-to-native) System.Type.MakeGenericType
(System.Type,System.Type[]) &lt;0x00004&gt;
  at (wrapper managed-to-native) System.Type.MakeGenericType
(System.Type,System.Type[]) &lt;0xffffffff&gt;
  at System.Type.MakeGenericType (System.Type[]) &lt;0x000d8&gt;
  at Test.Main () &lt;0x00030&gt;
  at (wrapper runtime-invoke) Test.runtime_invoke_void
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

        mono [0x817f546]
        [0xb7f0c440]
        /lib/tls/i686/cmov/libc.so.6(abort+0x109) [0xb7d0ffb9]
        /usr/lib/libglib-2.0.so.0(g_logv+0x454) [0xb7e90074]
        /usr/lib/libglib-2.0.so.0(g_log+0x29) [0xb7e900a9]
        mono [0x80c0a22]
        mono(mono_class_inflate_generic_type+0x14) [0x80c1ba4]
        mono [0x80d6ed5]
        mono [0x80c0a30]
        mono(mono_class_inflate_generic_type+0x14) [0x80c1ba4]
        mono [0x80c39c6]
        mono [0x80faeab]
        mono [0x80e1df2]
        [0xb785b7e2]
        [0xb785b421]
        [0xb785b259]
        [0xb785b1be]
        mono(mono_runtime_exec_main+0xb8) [0x80f4908]
        mono(mono_runtime_run_main+0x1b4) [0x80f5d54]
        mono(mono_main+0xfbf) [0x8059ddf]
        mono [0x8058932]
        /lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xc8) [0xb7cfaea8]
        mono [0x8058881]

Debug info from gdb:

(no debugging symbols found)
Using host libthread_db library &quot;/lib/tls/i686/cmov/libthread_db.so.1&quot;.
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
[Thread debugging using libthread_db enabled]
[New Thread -1211218240 (LWP 7402)]
[New Thread -1221772368 (LWP 7404)]
[New Thread -1215976528 (LWP 7403)]
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
0xb7f0c410 in ?? ()
  3 Thread -1215976528 (LWP 7403)  0xb7f0c410 in ?? ()
  2 Thread -1221772368 (LWP 7404)  0xb7f0c410 in ?? ()
  1 Thread -1211218240 (LWP 7402)  0xb7f0c410 in ?? ()

Thread 3 (Thread -1215976528 (LWP 7403)):
#0  0xb7f0c410 in ?? ()
#1  0xb785a458 in ?? ()
#2  0x0821ce80 in ?? ()
#3  0x00000000 in ?? ()

Thread 2 (Thread -1221772368 (LWP 7404)):
#0  0xb7f0c410 in ?? ()
#1  0xb72d32a8 in ?? ()
#2  0x00000001 in ?? ()
#3  0x00000000 in ?? ()

Thread 1 (Thread -1211218240 (LWP 7402)):
#0  0xb7f0c410 in ?? ()
#1  0xbfc3740c in ?? ()
#2  0x00000000 in ?? ()
#0  0xb7f0c410 in ?? ()


=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================

Aborted
<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mirco.bauer at flyinghorse</A>:~$


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074310.html">[Mono-bugs] [Bug 336739] Unable to use GroupWise SOAP WSDL bindings with Mono 1.2.4
</A></li>
	<LI>Next message: <A HREF="074318.html">[Mono-bugs] [Bug 394818] Type.MakeGenericType(Type[]) crashes the runtime if not matching generic argument count is passed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74312">[ date ]</a>
              <a href="thread.html#74312">[ thread ]</a>
              <a href="subject.html#74312">[ subject ]</a>
              <a href="author.html#74312">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
