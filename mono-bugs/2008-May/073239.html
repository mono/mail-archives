<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 386715] New: Performance Problem when filling a	TreeView
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20386715%5D%20New%3A%20Performance%20Problem%20when%20filling%20a%0A%09TreeView&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073238.html">
   <LINK REL="Next"  HREF="073251.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 386715] New: Performance Problem when filling a	TreeView</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20386715%5D%20New%3A%20Performance%20Problem%20when%20filling%20a%0A%09TreeView&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 386715] New: Performance Problem when filling a	TreeView">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon May  5 09:55:23 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="073238.html">[Mono-bugs] [Bug 362561] ETonline - page fails to load
</A></li>
        <LI>Next message: <A HREF="073251.html">[Mono-bugs] [Bug 386715] Performance Problem when filling a TreeView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73239">[ date ]</a>
              <a href="thread.html#73239">[ thread ]</a>
              <a href="subject.html#73239">[ subject ]</a>
              <a href="author.html#73239">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=386715">https://bugzilla.novell.com/show_bug.cgi?id=386715</A>


           Summary: Performance Problem when filling a TreeView
           Product: Mono: Class Libraries
           Version: 1.9.0
          Platform: x86-64
        OS/Version: SLES 10
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">carsten.sponsel at astrum-it.de</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=212329)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=212329">https://bugzilla.novell.com/attachment.cgi?id=212329</A>)
Profiler output

The Mono (1.9.3) TreeView shows a dramatic performance compared with the .NET's
TreeView when adding new nodes. The more nodes my program adds, the worse the
performance is. When I'm inspecting the profiler output I'm having the
impression that my program is mainly occupied with sending messages and
updating controls.

That is my program:

// TestTreeViewPerf.cs created with MonoDevelop

using System;
using System.Windows.Forms;

namespace TestTreeViewPerf
{
    public class TestTreeViewPerf : Form
    {
        public TestTreeViewPerf() : base ()
        {
            TableLayoutPanel lp = new TableLayoutPanel ();
            lp.RowCount = 2;
            lp.ColumnCount = 1;
            lp.RowStyles.Add (new RowStyle (SizeType.Percent, 100));
            lp.RowStyles.Add (new RowStyle (SizeType.AutoSize));

            Button FillTree = new Button ();
            FillTree.Text = &quot;Fill Tree&quot;;
            FillTree.Click += new EventHandler (FillTree_Click);

            lp.Controls.Add (m_Tree);
            m_Tree.Dock = DockStyle.Fill;
            lp.Controls.Add (FillTree);

            Controls.Add (lp);
            lp.Dock = DockStyle.Fill;
        }

        private void FillTree_Click (object sender, EventArgs args)
        {
            for (int i = 0; i &lt; 2000; i++)
            {
                TreeNode tn = new TreeNode (i.ToString ());
                tn.Name = i.ToString ();
                m_Tree.Nodes.Add (tn);

                for (int j = 0; j &lt; 5; j++)
                {
                    TreeNode subtn = new TreeNode (j.ToString ());
                    subtn.Name = j.ToString ();
                    tn.Nodes.Add (subtn);
                }
            }
        }

        TreeView m_Tree = new TreeView ();

        public static void Main (string [] args)
        {
            Application.EnableVisualStyles ();
            Application.SetCompatibleTextRenderingDefault (false);
            Application.Run (new TestTreeViewPerf ());
        }
    }
}


I've added the profiler output file as attachment.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073238.html">[Mono-bugs] [Bug 362561] ETonline - page fails to load
</A></li>
	<LI>Next message: <A HREF="073251.html">[Mono-bugs] [Bug 386715] Performance Problem when filling a TreeView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73239">[ date ]</a>
              <a href="thread.html#73239">[ thread ]</a>
              <a href="subject.html#73239">[ subject ]</a>
              <a href="author.html#73239">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
