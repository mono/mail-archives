<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 391286] New: Several issues with	AspNetSqlMembershipProvider
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20391286%5D%20New%3A%20Several%20issues%20with%0A%09AspNetSqlMembershipProvider&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073932.html">
   <LINK REL="Next"  HREF="073934.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 391286] New: Several issues with	AspNetSqlMembershipProvider</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20391286%5D%20New%3A%20Several%20issues%20with%0A%09AspNetSqlMembershipProvider&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 391286] New: Several issues with	AspNetSqlMembershipProvider">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri May 16 07:42:47 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="073932.html">[Mono-bugs] [Bug 385006] Running mono in a Xen domU fills syslog with &quot;4gb seg fixup&quot; messages
</A></li>
        <LI>Next message: <A HREF="073934.html">[Mono-bugs] [Bug 322164] ANSI strings are UTF-8 but should be in ANSI code page on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73933">[ date ]</a>
              <a href="thread.html#73933">[ thread ]</a>
              <a href="subject.html#73933">[ subject ]</a>
              <a href="author.html#73933">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=391286">https://bugzilla.novell.com/show_bug.cgi?id=391286</A>


           Summary: Several issues with AspNetSqlMembershipProvider
           Product: Mono: Class Libraries
           Version: SVN
          Platform: x86
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Data.SqlClient
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gunsh at neobee.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=215932)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=215932">https://bugzilla.novell.com/attachment.cgi?id=215932</A>)
Files needed to reproduce bug

I have used Mono 1.9.1 on Ubuntu as well as version from SVN from about two
weeks ago.

This bug is about membership provider. Using VS2008 I have built two ASP.NET
pages (Login.aspx and Success.aspx). Login.aspx page uses asp:Login control to
ask user for credentials and Success.aspx is the page user lands on upon
successful login.

On Windows the default membership provider is SQL Server. I have added a single
user to the database using Web Site Administration Tool. With MS.NET everything
works ok. Entering user's credentials ends up with a successful login and
entering anything else reports a bad login. The only user's username/pass is
test/123456-

When I upload the files to Ubuntu and run xsp2, the browser throws an error
(error1.htm) that mentions System.Web.Security.SqliteMembershipProvider. I have
looked up machine.config and found out that system.web/membership/providers
section contains AspNetSqlMembershipProvider which appears to use SQL Server
not SQLite. A connection string for SQLite is defined but it does not appear to
be referenced anywhere. After the sample is run, aspnetdb.sqlite file appears
in App_Data with size 0.

If I add an explicit attribute MembershipProvider=&quot;AspNetSqlMembershipProvider&quot;
to &lt;asp:Login&gt;, I still get correct behavior on MS.NET and the very same error
on Mono.

If I deliberately set some bogus string for Membership provider, both MS.NET
and Mono report an error saying that the provider could not be found.

Next I tried to copy/paste AspNetSqlMembershipProvider membership section from
Mono's machine.config to app's web.config. If I leave the name of the provider
intact (effectively a duplicate), MS.NET uses the provider from the web.config
while Mono ignores it and still throws the same error (error1.htm). ### This
paragraph alone describes an inconsistency between Mono and MS.NET.

Finally, if I rename AspNetSqlMembershipProvider to say
AspNetSqlMembershipProvider2 in both web.config and asp:Login's attribute, I
get an improvement from Mono. The error from error1.htm is no longer shown.
Instead the page insists that the user credentials supplied were incorrect.
Needless to say I have also uploaded the contents of App_Data directory with
the prepared database.

So in brief.

1) If there are two providers with the same name in machine.config and
web.config Mono always picks the machine.config one and MS.NET picks the
web.config.

2) The default membership provider in Mono somehow defaults to SQLite despite
settings in machine.config which imply SQL Server.

3) Even when workarounds are implemented for 1) and 2), Mono fails to verify
user's credentials as shown by the attached sample.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>













































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073932.html">[Mono-bugs] [Bug 385006] Running mono in a Xen domU fills syslog with &quot;4gb seg fixup&quot; messages
</A></li>
	<LI>Next message: <A HREF="073934.html">[Mono-bugs] [Bug 322164] ANSI strings are UTF-8 but should be in ANSI code page on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73933">[ date ]</a>
              <a href="thread.html#73933">[ thread ]</a>
              <a href="subject.html#73933">[ subject ]</a>
              <a href="author.html#73933">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
